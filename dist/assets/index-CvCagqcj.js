function WO(e,r){for(var s=0;s<r.length;s++){const n=r[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function s(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=s(a);fetch(a.href,l)}})();var Wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cb={exports:{}},Vh={};var e3;function UL(){if(e3)return Vh;e3=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(n,a,l){var d=null;if(l!==void 0&&(d=""+l),a.key!==void 0&&(d=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:e,type:n,key:d,ref:a!==void 0?a:null,props:l}}return Vh.Fragment=r,Vh.jsx=s,Vh.jsxs=s,Vh}var t3;function zL(){return t3||(t3=1,cb.exports=UL()),cb.exports}var t=zL(),db={exports:{}},Ut={};var r3;function VL(){if(r3)return Ut;r3=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),S=Symbol.iterator;function T(X){return X===null||typeof X!="object"?null:(X=S&&X[S]||X["@@iterator"],typeof X=="function"?X:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,D={};function I(X,ae,ve){this.props=X,this.context=ae,this.refs=D,this.updater=ve||A}I.prototype.isReactComponent={},I.prototype.setState=function(X,ae){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ae,"setState")},I.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function L(){}L.prototype=I.prototype;function _(X,ae,ve){this.props=X,this.context=ae,this.refs=D,this.updater=ve||A}var $=_.prototype=new L;$.constructor=_,P($,I.prototype),$.isPureReactComponent=!0;var F=Array.isArray;function B(){}var M={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function z(X,ae,ve){var fe=ve.ref;return{$$typeof:e,type:X,key:ae,ref:fe!==void 0?fe:null,props:ve}}function H(X,ae){return z(X.type,ae,X.props)}function U(X){return typeof X=="object"&&X!==null&&X.$$typeof===e}function G(X){var ae={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(ve){return ae[ve]})}var Q=/\/+/g;function ce(X,ae){return typeof X=="object"&&X!==null&&X.key!=null?G(""+X.key):ae.toString(36)}function ne(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(B,B):(X.status="pending",X.then(function(ae){X.status==="pending"&&(X.status="fulfilled",X.value=ae)},function(ae){X.status==="pending"&&(X.status="rejected",X.reason=ae)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function J(X,ae,ve,fe,se){var oe=typeof X;(oe==="undefined"||oe==="boolean")&&(X=null);var he=!1;if(X===null)he=!0;else switch(oe){case"bigint":case"string":case"number":he=!0;break;case"object":switch(X.$$typeof){case e:case r:he=!0;break;case p:return he=X._init,J(he(X._payload),ae,ve,fe,se)}}if(he)return se=se(X),he=fe===""?"."+ce(X,0):fe,F(se)?(ve="",he!=null&&(ve=he.replace(Q,"$&/")+"/"),J(se,ae,ve,"",function(Ke){return Ke})):se!=null&&(U(se)&&(se=H(se,ve+(se.key==null||X&&X.key===se.key?"":(""+se.key).replace(Q,"$&/")+"/")+he)),ae.push(se)),1;he=0;var Ve=fe===""?".":fe+":";if(F(X))for(var Ce=0;Ce<X.length;Ce++)fe=X[Ce],oe=Ve+ce(fe,Ce),he+=J(fe,ae,ve,oe,se);else if(Ce=T(X),typeof Ce=="function")for(X=Ce.call(X),Ce=0;!(fe=X.next()).done;)fe=fe.value,oe=Ve+ce(fe,Ce++),he+=J(fe,ae,ve,oe,se);else if(oe==="object"){if(typeof X.then=="function")return J(ne(X),ae,ve,fe,se);throw ae=String(X),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return he}function W(X,ae,ve){if(X==null)return X;var fe=[],se=0;return J(X,fe,"","",function(oe){return ae.call(ve,oe,se++)}),fe}function le(X){if(X._status===-1){var ae=X._result;ae=ae(),ae.then(function(ve){(X._status===0||X._status===-1)&&(X._status=1,X._result=ve)},function(ve){(X._status===0||X._status===-1)&&(X._status=2,X._result=ve)}),X._status===-1&&(X._status=0,X._result=ae)}if(X._status===1)return X._result.default;throw X._result}var ge=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},re={map:W,forEach:function(X,ae,ve){W(X,function(){ae.apply(this,arguments)},ve)},count:function(X){var ae=0;return W(X,function(){ae++}),ae},toArray:function(X){return W(X,function(ae){return ae})||[]},only:function(X){if(!U(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return Ut.Activity=b,Ut.Children=re,Ut.Component=I,Ut.Fragment=s,Ut.Profiler=a,Ut.PureComponent=_,Ut.StrictMode=n,Ut.Suspense=f,Ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ut.__COMPILER_RUNTIME={__proto__:null,c:function(X){return M.H.useMemoCache(X)}},Ut.cache=function(X){return function(){return X.apply(null,arguments)}},Ut.cacheSignal=function(){return null},Ut.cloneElement=function(X,ae,ve){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var fe=P({},X.props),se=X.key;if(ae!=null)for(oe in ae.key!==void 0&&(se=""+ae.key),ae)!V.call(ae,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&ae.ref===void 0||(fe[oe]=ae[oe]);var oe=arguments.length-2;if(oe===1)fe.children=ve;else if(1<oe){for(var he=Array(oe),Ve=0;Ve<oe;Ve++)he[Ve]=arguments[Ve+2];fe.children=he}return z(X.type,se,fe)},Ut.createContext=function(X){return X={$$typeof:d,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:l,_context:X},X},Ut.createElement=function(X,ae,ve){var fe,se={},oe=null;if(ae!=null)for(fe in ae.key!==void 0&&(oe=""+ae.key),ae)V.call(ae,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(se[fe]=ae[fe]);var he=arguments.length-2;if(he===1)se.children=ve;else if(1<he){for(var Ve=Array(he),Ce=0;Ce<he;Ce++)Ve[Ce]=arguments[Ce+2];se.children=Ve}if(X&&X.defaultProps)for(fe in he=X.defaultProps,he)se[fe]===void 0&&(se[fe]=he[fe]);return z(X,oe,se)},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(X){return{$$typeof:h,render:X}},Ut.isValidElement=U,Ut.lazy=function(X){return{$$typeof:p,_payload:{_status:-1,_result:X},_init:le}},Ut.memo=function(X,ae){return{$$typeof:x,type:X,compare:ae===void 0?null:ae}},Ut.startTransition=function(X){var ae=M.T,ve={};M.T=ve;try{var fe=X(),se=M.S;se!==null&&se(ve,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(B,ge)}catch(oe){ge(oe)}finally{ae!==null&&ve.types!==null&&(ae.types=ve.types),M.T=ae}},Ut.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ut.use=function(X){return M.H.use(X)},Ut.useActionState=function(X,ae,ve){return M.H.useActionState(X,ae,ve)},Ut.useCallback=function(X,ae){return M.H.useCallback(X,ae)},Ut.useContext=function(X){return M.H.useContext(X)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(X,ae){return M.H.useDeferredValue(X,ae)},Ut.useEffect=function(X,ae){return M.H.useEffect(X,ae)},Ut.useEffectEvent=function(X){return M.H.useEffectEvent(X)},Ut.useId=function(){return M.H.useId()},Ut.useImperativeHandle=function(X,ae,ve){return M.H.useImperativeHandle(X,ae,ve)},Ut.useInsertionEffect=function(X,ae){return M.H.useInsertionEffect(X,ae)},Ut.useLayoutEffect=function(X,ae){return M.H.useLayoutEffect(X,ae)},Ut.useMemo=function(X,ae){return M.H.useMemo(X,ae)},Ut.useOptimistic=function(X,ae){return M.H.useOptimistic(X,ae)},Ut.useReducer=function(X,ae,ve){return M.H.useReducer(X,ae,ve)},Ut.useRef=function(X){return M.H.useRef(X)},Ut.useState=function(X){return M.H.useState(X)},Ut.useSyncExternalStore=function(X,ae,ve){return M.H.useSyncExternalStore(X,ae,ve)},Ut.useTransition=function(){return M.H.useTransition()},Ut.version="19.2.0",Ut}var s3;function Iu(){return s3||(s3=1,db.exports=VL()),db.exports}var v=Iu();const Yo=Qi(v),$L=WO({__proto__:null,default:Yo},[v]);var ub={exports:{}},$h={},hb={exports:{}},mb={};var n3;function qL(){return n3||(n3=1,(function(e){function r(J,W){var le=J.length;J.push(W);e:for(;0<le;){var ge=le-1>>>1,re=J[ge];if(0<a(re,W))J[ge]=W,J[le]=re,le=ge;else break e}}function s(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var W=J[0],le=J.pop();if(le!==W){J[0]=le;e:for(var ge=0,re=J.length,X=re>>>1;ge<X;){var ae=2*(ge+1)-1,ve=J[ae],fe=ae+1,se=J[fe];if(0>a(ve,le))fe<re&&0>a(se,ve)?(J[ge]=se,J[fe]=le,ge=fe):(J[ge]=ve,J[ae]=le,ge=ae);else if(fe<re&&0>a(se,le))J[ge]=se,J[fe]=le,ge=fe;else break e}}return W}function a(J,W){var le=J.sortIndex-W.sortIndex;return le!==0?le:J.id-W.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var d=Date,h=d.now();e.unstable_now=function(){return d.now()-h}}var f=[],x=[],p=1,b=null,S=3,T=!1,A=!1,P=!1,D=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function $(J){for(var W=s(x);W!==null;){if(W.callback===null)n(x);else if(W.startTime<=J)n(x),W.sortIndex=W.expirationTime,r(f,W);else break;W=s(x)}}function F(J){if(P=!1,$(J),!A)if(s(f)!==null)A=!0,B||(B=!0,G());else{var W=s(x);W!==null&&ne(F,W.startTime-J)}}var B=!1,M=-1,V=5,z=-1;function H(){return D?!0:!(e.unstable_now()-z<V)}function U(){if(D=!1,B){var J=e.unstable_now();z=J;var W=!0;try{e:{A=!1,P&&(P=!1,L(M),M=-1),T=!0;var le=S;try{t:{for($(J),b=s(f);b!==null&&!(b.expirationTime>J&&H());){var ge=b.callback;if(typeof ge=="function"){b.callback=null,S=b.priorityLevel;var re=ge(b.expirationTime<=J);if(J=e.unstable_now(),typeof re=="function"){b.callback=re,$(J),W=!0;break t}b===s(f)&&n(f),$(J)}else n(f);b=s(f)}if(b!==null)W=!0;else{var X=s(x);X!==null&&ne(F,X.startTime-J),W=!1}}break e}finally{b=null,S=le,T=!1}W=void 0}}finally{W?G():B=!1}}}var G;if(typeof _=="function")G=function(){_(U)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ce=Q.port2;Q.port1.onmessage=U,G=function(){ce.postMessage(null)}}else G=function(){I(U,0)};function ne(J,W){M=I(function(){J(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_next=function(J){switch(S){case 1:case 2:case 3:var W=3;break;default:W=S}var le=S;S=W;try{return J()}finally{S=le}},e.unstable_requestPaint=function(){D=!0},e.unstable_runWithPriority=function(J,W){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var le=S;S=J;try{return W()}finally{S=le}},e.unstable_scheduleCallback=function(J,W,le){var ge=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?ge+le:ge):le=ge,J){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=le+re,J={id:p++,callback:W,priorityLevel:J,startTime:le,expirationTime:re,sortIndex:-1},le>ge?(J.sortIndex=le,r(x,J),s(f)===null&&J===s(x)&&(P?(L(M),M=-1):P=!0,ne(F,le-ge))):(J.sortIndex=re,r(f,J),A||T||(A=!0,B||(B=!0,G()))),J},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(J){var W=S;return function(){var le=S;S=W;try{return J.apply(this,arguments)}finally{S=le}}}})(mb)),mb}var a3;function HL(){return a3||(a3=1,hb.exports=qL()),hb.exports}var fb={exports:{}},Sn={};var i3;function GL(){if(i3)return Sn;i3=1;var e=Iu();function r(f){var x="https://react.dev/errors/"+f;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)x+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var n={d:{f:s,r:function(){throw Error(r(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,x,p){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:f,containerInfo:x,implementation:p}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,x){if(f==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Sn.createPortal=function(f,x){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(r(299));return l(f,x,null,p)},Sn.flushSync=function(f){var x=d.T,p=n.p;try{if(d.T=null,n.p=2,f)return f()}finally{d.T=x,n.p=p,n.d.f()}},Sn.preconnect=function(f,x){typeof f=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,n.d.C(f,x))},Sn.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},Sn.preinit=function(f,x){if(typeof f=="string"&&x&&typeof x.as=="string"){var p=x.as,b=h(p,x.crossOrigin),S=typeof x.integrity=="string"?x.integrity:void 0,T=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;p==="style"?n.d.S(f,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:T}):p==="script"&&n.d.X(f,{crossOrigin:b,integrity:S,fetchPriority:T,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Sn.preinitModule=function(f,x){if(typeof f=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var p=h(x.as,x.crossOrigin);n.d.M(f,{crossOrigin:p,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&n.d.M(f)},Sn.preload=function(f,x){if(typeof f=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var p=x.as,b=h(p,x.crossOrigin);n.d.L(f,p,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Sn.preloadModule=function(f,x){if(typeof f=="string")if(x){var p=h(x.as,x.crossOrigin);n.d.m(f,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:p,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else n.d.m(f)},Sn.requestFormReset=function(f){n.d.r(f)},Sn.unstable_batchedUpdates=function(f,x){return f(x)},Sn.useFormState=function(f,x,p){return d.H.useFormState(f,x,p)},Sn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Sn.version="19.2.0",Sn}var l3;function XO(){if(l3)return fb.exports;l3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),fb.exports=GL(),fb.exports}var o3;function YL(){if(o3)return $h;o3=1;var e=HL(),r=Iu(),s=XO();function n(i){var c="https://react.dev/errors/"+i;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+i+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var c=i,g=i;if(i.alternate)for(;c.return;)c=c.return;else{i=c;do c=i,(c.flags&4098)!==0&&(g=c.return),i=c.return;while(i)}return c.tag===3?g:null}function d(i){if(i.tag===13){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function h(i){if(i.tag===31){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function f(i){if(l(i)!==i)throw Error(n(188))}function x(i){var c=i.alternate;if(!c){if(c=l(i),c===null)throw Error(n(188));return c!==i?null:i}for(var g=i,j=c;;){var E=g.return;if(E===null)break;var k=E.alternate;if(k===null){if(j=E.return,j!==null){g=j;continue}break}if(E.child===k.child){for(k=E.child;k;){if(k===g)return f(E),i;if(k===j)return f(E),c;k=k.sibling}throw Error(n(188))}if(g.return!==j.return)g=E,j=k;else{for(var Y=!1,te=E.child;te;){if(te===g){Y=!0,g=E,j=k;break}if(te===j){Y=!0,j=E,g=k;break}te=te.sibling}if(!Y){for(te=k.child;te;){if(te===g){Y=!0,g=k,j=E;break}if(te===j){Y=!0,j=k,g=E;break}te=te.sibling}if(!Y)throw Error(n(189))}}if(g.alternate!==j)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?i:c}function p(i){var c=i.tag;if(c===5||c===26||c===27||c===6)return i;for(i=i.child;i!==null;){if(c=p(i),c!==null)return c;i=i.sibling}return null}var b=Object.assign,S=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),_=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var Q=Symbol.for("react.client.reference");function ce(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Q?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case I:return"Profiler";case D:return"StrictMode";case F:return"Suspense";case B:return"SuspenseList";case z:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case _:return i.displayName||"Context";case L:return(i._context.displayName||"Context")+".Consumer";case $:var c=i.render;return i=i.displayName,i||(i=c.displayName||c.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return c=i.displayName||null,c!==null?c:ce(i.type)||"Memo";case V:c=i._payload,i=i._init;try{return ce(i(c))}catch{}}return null}var ne=Array.isArray,J=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},ge=[],re=-1;function X(i){return{current:i}}function ae(i){0>re||(i.current=ge[re],ge[re]=null,re--)}function ve(i,c){re++,ge[re]=i.current,i.current=c}var fe=X(null),se=X(null),oe=X(null),he=X(null);function Ve(i,c){switch(ve(oe,c),ve(se,i),ve(fe,null),c.nodeType){case 9:case 11:i=(i=c.documentElement)&&(i=i.namespaceURI)?wA(i):0;break;default:if(i=c.tagName,c=c.namespaceURI)c=wA(c),i=SA(c,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ae(fe),ve(fe,i)}function Ce(){ae(fe),ae(se),ae(oe)}function Ke(i){i.memoizedState!==null&&ve(he,i);var c=fe.current,g=SA(c,i.type);c!==g&&(ve(se,i),ve(fe,g))}function xe(i){se.current===i&&(ae(fe),ae(se)),he.current===i&&(ae(he),Fh._currentValue=le)}var Ee,pe;function Fe(i){if(Ee===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);Ee=c&&c[1]||"",pe=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ee+i+pe}var me=!1;function Ge(i,c){if(!i||me)return"";me=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var j={DetermineComponentFrameRoot:function(){try{if(c){var Xe=function(){throw Error()};if(Object.defineProperty(Xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xe,[])}catch(Ue){var Ie=Ue}Reflect.construct(i,[],Xe)}else{try{Xe.call()}catch(Ue){Ie=Ue}i.call(Xe.prototype)}}else{try{throw Error()}catch(Ue){Ie=Ue}(Xe=i())&&typeof Xe.catch=="function"&&Xe.catch(function(){})}}catch(Ue){if(Ue&&Ie&&typeof Ue.stack=="string")return[Ue.stack,Ie.stack]}return[null,null]}};j.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(j.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(j.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=j.DetermineComponentFrameRoot(),Y=k[0],te=k[1];if(Y&&te){var ye=Y.split(`
`),_e=te.split(`
`);for(E=j=0;j<ye.length&&!ye[j].includes("DetermineComponentFrameRoot");)j++;for(;E<_e.length&&!_e[E].includes("DetermineComponentFrameRoot");)E++;if(j===ye.length||E===_e.length)for(j=ye.length-1,E=_e.length-1;1<=j&&0<=E&&ye[j]!==_e[E];)E--;for(;1<=j&&0<=E;j--,E--)if(ye[j]!==_e[E]){if(j!==1||E!==1)do if(j--,E--,0>E||ye[j]!==_e[E]){var He=`
`+ye[j].replace(" at new "," at ");return i.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",i.displayName)),He}while(1<=j&&0<=E);break}}}finally{me=!1,Error.prepareStackTrace=g}return(g=i?i.displayName||i.name:"")?Fe(g):""}function Te(i,c){switch(i.tag){case 26:case 27:case 5:return Fe(i.type);case 16:return Fe("Lazy");case 13:return i.child!==c&&c!==null?Fe("Suspense Fallback"):Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 15:return Ge(i.type,!1);case 11:return Ge(i.type.render,!1);case 1:return Ge(i.type,!0);case 31:return Fe("Activity");default:return""}}function at(i){try{var c="",g=null;do c+=Te(i,g),g=i,i=i.return;while(i);return c}catch(j){return`
Error generating stack: `+j.message+`
`+j.stack}}var dt=Object.prototype.hasOwnProperty,Nt=e.unstable_scheduleCallback,Qe=e.unstable_cancelCallback,ct=e.unstable_shouldYield,ze=e.unstable_requestPaint,ft=e.unstable_now,Kt=e.unstable_getCurrentPriorityLevel,lr=e.unstable_ImmediatePriority,ys=e.unstable_UserBlockingPriority,Ye=e.unstable_NormalPriority,xt=e.unstable_LowPriority,Ur=e.unstable_IdlePriority,Ir=e.log,Cr=e.unstable_setDisableYieldValue,_t=null,Ae=null;function tt(i){if(typeof Ir=="function"&&Cr(i),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(_t,i)}catch{}}var lt=Math.clz32?Math.clz32:bs,Ct=Math.log,jr=Math.LN2;function bs(i){return i>>>=0,i===0?32:31-(Ct(i)/jr|0)|0}var Ar=256,ht=262144,Ze=4194304;function Mt(i){var c=i&42;if(c!==0)return c;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function zr(i,c,g){var j=i.pendingLanes;if(j===0)return 0;var E=0,k=i.suspendedLanes,Y=i.pingedLanes;i=i.warmLanes;var te=j&134217727;return te!==0?(j=te&~k,j!==0?E=Mt(j):(Y&=te,Y!==0?E=Mt(Y):g||(g=te&~i,g!==0&&(E=Mt(g))))):(te=j&~k,te!==0?E=Mt(te):Y!==0?E=Mt(Y):g||(g=j&~i,g!==0&&(E=Mt(g)))),E===0?0:c!==0&&c!==E&&(c&k)===0&&(k=E&-E,g=c&-c,k>=g||k===32&&(g&4194048)!==0)?c:E}function ns(i,c){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&c)===0}function $e(i,c){switch(i){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function At(){var i=Ze;return Ze<<=1,(Ze&62914560)===0&&(Ze=4194304),i}function Ws(i){for(var c=[],g=0;31>g;g++)c.push(i);return c}function Un(i,c){i.pendingLanes|=c,c!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Nn(i,c,g,j,E,k){var Y=i.pendingLanes;i.pendingLanes=g,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=g,i.entangledLanes&=g,i.errorRecoveryDisabledLanes&=g,i.shellSuspendCounter=0;var te=i.entanglements,ye=i.expirationTimes,_e=i.hiddenUpdates;for(g=Y&~g;0<g;){var He=31-lt(g),Xe=1<<He;te[He]=0,ye[He]=-1;var Ie=_e[He];if(Ie!==null)for(_e[He]=null,He=0;He<Ie.length;He++){var Ue=Ie[He];Ue!==null&&(Ue.lane&=-536870913)}g&=~Xe}j!==0&&Kl(i,j,0),k!==0&&E===0&&i.tag!==0&&(i.suspendedLanes|=k&~(Y&~c))}function Kl(i,c,g){i.pendingLanes|=c,i.suspendedLanes&=~c;var j=31-lt(c);i.entangledLanes|=c,i.entanglements[j]=i.entanglements[j]|1073741824|g&261930}function jn(i,c){var g=i.entangledLanes|=c;for(i=i.entanglements;g;){var j=31-lt(g),E=1<<j;E&c|i[j]&c&&(i[j]|=c),g&=~E}}function ei(i,c){var g=c&-c;return g=(g&42)!==0?1:vs(g),(g&(i.suspendedLanes|c))!==0?0:g}function vs(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function On(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function as(){var i=W.p;return i!==0?i:(i=window.event,i===void 0?32:YA(i.type))}function ut(i,c){var g=W.p;try{return W.p=i,c()}finally{W.p=g}}var Ds=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Ds,or="__reactProps$"+Ds,hn="__reactContainer$"+Ds,Ca="__reactEvents$"+Ds,Ei="__reactListeners$"+Ds,wn="__reactHandles$"+Ds,de="__reactResources$"+Ds,pt="__reactMarker$"+Ds;function yt(i){delete i[Yr],delete i[or],delete i[Ca],delete i[Ei],delete i[wn]}function Zt(i){var c=i[Yr];if(c)return c;for(var g=i.parentNode;g;){if(c=g[hn]||g[Yr]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(i=PA(i);i!==null;){if(g=i[Yr])return g;i=PA(i)}return c}i=g,g=i.parentNode}return null}function ur(i){if(i=i[Yr]||i[hn]){var c=i.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return i}return null}function qe(i){var c=i.tag;if(c===5||c===26||c===27||c===6)return i.stateNode;throw Error(n(33))}function vt(i){var c=i[de];return c||(c=i[de]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Wr(i){i[pt]=!0}var Je=new Set,km={};function Er(i,c){sa(i,c),sa(i+"Capture",c)}function sa(i,c){for(km[i]=c,i=0;i<c.length;i++)Je.add(c[i])}var gy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mr={},hr={};function Qt(i){return dt.call(hr,i)?!0:dt.call(mr,i)?!1:gy.test(i)?hr[i]=!0:(mr[i]=!0,!1)}function Zl(i,c,g){if(Qt(c))if(g===null)i.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":i.removeAttribute(c);return;case"boolean":var j=c.toLowerCase().slice(0,5);if(j!=="data-"&&j!=="aria-"){i.removeAttribute(c);return}}i.setAttribute(c,""+g)}}function Ql(i,c,g){if(g===null)i.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttribute(c,""+g)}}function na(i,c,g,j){if(j===null)i.removeAttribute(g);else{switch(typeof j){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(g);return}i.setAttributeNS(c,g,""+j)}}function xr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ti(i){var c=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function xy(i,c,g){var j=Object.getOwnPropertyDescriptor(i.constructor.prototype,c);if(!i.hasOwnProperty(c)&&typeof j<"u"&&typeof j.get=="function"&&typeof j.set=="function"){var E=j.get,k=j.set;return Object.defineProperty(i,c,{configurable:!0,get:function(){return E.call(this)},set:function(Y){g=""+Y,k.call(this,Y)}}),Object.defineProperty(i,c,{enumerable:j.enumerable}),{getValue:function(){return g},setValue:function(Y){g=""+Y},stopTracking:function(){i._valueTracker=null,delete i[c]}}}}function Zr(i){if(!i._valueTracker){var c=ti(i)?"checked":"value";i._valueTracker=xy(i,c,""+i[c])}}function ri(i){if(!i)return!1;var c=i._valueTracker;if(!c)return!0;var g=c.getValue(),j="";return i&&(j=ti(i)?i.checked?"true":"false":i.value),i=j,i!==g?(c.setValue(i),!0):!1}function md(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Jl=/[\n"\\]/g;function Wt(i){return i.replace(Jl,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Ls(i,c,g,j,E,k,Y,te){i.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?i.type=Y:i.removeAttribute("type"),c!=null?Y==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+xr(c)):i.value!==""+xr(c)&&(i.value=""+xr(c)):Y!=="submit"&&Y!=="reset"||i.removeAttribute("value"),c!=null?ie(i,Y,xr(c)):g!=null?ie(i,Y,xr(g)):j!=null&&i.removeAttribute("value"),E==null&&k!=null&&(i.defaultChecked=!!k),E!=null&&(i.checked=E&&typeof E!="function"&&typeof E!="symbol"),te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?i.name=""+xr(te):i.removeAttribute("name")}function Pe(i,c,g,j,E,k,Y,te){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(i.type=k),c!=null||g!=null){if(!(k!=="submit"&&k!=="reset"||c!=null)){Zr(i);return}g=g!=null?""+xr(g):"",c=c!=null?""+xr(c):g,te||c===i.value||(i.value=c),i.defaultValue=c}j=j??E,j=typeof j!="function"&&typeof j!="symbol"&&!!j,i.checked=te?i.checked:!!j,i.defaultChecked=!!j,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(i.name=Y),Zr(i)}function ie(i,c,g){c==="number"&&md(i.ownerDocument)===i||i.defaultValue===""+g||(i.defaultValue=""+g)}function jt(i,c,g,j){if(i=i.options,c){c={};for(var E=0;E<g.length;E++)c["$"+g[E]]=!0;for(g=0;g<i.length;g++)E=c.hasOwnProperty("$"+i[g].value),i[g].selected!==E&&(i[g].selected=E),E&&j&&(i[g].defaultSelected=!0)}else{for(g=""+xr(g),c=null,E=0;E<i.length;E++){if(i[E].value===g){i[E].selected=!0,j&&(i[E].defaultSelected=!0);return}c!==null||i[E].disabled||(c=i[E])}c!==null&&(c.selected=!0)}}function Os(i,c,g){if(c!=null&&(c=""+xr(c),c!==i.value&&(i.value=c),g==null)){i.defaultValue!==c&&(i.defaultValue=c);return}i.defaultValue=g!=null?""+xr(g):""}function Pn(i,c,g,j){if(c==null){if(j!=null){if(g!=null)throw Error(n(92));if(ne(j)){if(1<j.length)throw Error(n(93));j=j[0]}g=j}g==null&&(g=""),c=g}g=xr(c),i.defaultValue=g,j=i.textContent,j===g&&j!==""&&j!==null&&(i.value=j),Zr(i)}function eo(i,c){if(c){var g=i.firstChild;if(g&&g===i.lastChild&&g.nodeType===3){g.nodeValue=c;return}}i.textContent=c}var eh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kn(i,c,g){var j=c.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?j?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="":j?i.setProperty(c,g):typeof g!="number"||g===0||eh.has(c)?c==="float"?i.cssFloat=g:i[c]=(""+g).trim():i[c]=g+"px"}function St(i,c,g){if(c!=null&&typeof c!="object")throw Error(n(62));if(i=i.style,g!=null){for(var j in g)!g.hasOwnProperty(j)||c!=null&&c.hasOwnProperty(j)||(j.indexOf("--")===0?i.setProperty(j,""):j==="float"?i.cssFloat="":i[j]="");for(var E in c)j=c[E],c.hasOwnProperty(E)&&g[E]!==j&&kn(i,E,j)}else for(var k in c)c.hasOwnProperty(k)&&kn(i,k,c[k])}function Vr(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _m=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),py=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(i){return py.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function zn(){}var cc=null;function th(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Qr=null,Aa=null;function si(i){var c=ur(i);if(c&&(i=c.stateNode)){var g=i[or]||null;e:switch(i=c.stateNode,c.type){case"input":if(Ls(i,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),c=g.name,g.type==="radio"&&c!=null){for(g=i;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Wt(""+c)+'"][type="radio"]'),c=0;c<g.length;c++){var j=g[c];if(j!==i&&j.form===i.form){var E=j[or]||null;if(!E)throw Error(n(90));Ls(j,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(c=0;c<g.length;c++)j=g[c],j.form===i.form&&ri(j)}break e;case"textarea":Os(i,g.value,g.defaultValue);break e;case"select":c=g.value,c!=null&&jt(i,!!g.multiple,c,!1)}}}var Dt=!1;function Im(i,c,g){if(Dt)return i(c,g);Dt=!0;try{var j=i(c);return j}finally{if(Dt=!1,(Qr!==null||Aa!==null)&&(Af(),Qr&&(c=Qr,i=Aa,Aa=Qr=null,si(c),i)))for(c=0;c<i.length;c++)si(i[c])}}function Lt(i,c){var g=i.stateNode;if(g===null)return null;var j=g[or]||null;if(j===null)return null;g=j[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(i=i.type,j=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!j;break e;default:i=!1}if(i)return null;if(g&&typeof g!="function")throw Error(n(231,c,typeof g));return g}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rh=!1;if($r)try{var el={};Object.defineProperty(el,"passive",{get:function(){rh=!0}}),window.addEventListener("test",el,el),window.removeEventListener("test",el,el)}catch{rh=!1}var ni=null,ai=null,fd=null;function ro(){if(fd)return fd;var i,c=ai,g=c.length,j,E="value"in ni?ni.value:ni.textContent,k=E.length;for(i=0;i<g&&c[i]===E[i];i++);var Y=g-i;for(j=1;j<=Y&&c[g-j]===E[k-j];j++);return fd=E.slice(i,1<j?1-j:void 0)}function Ti(i){var c=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&c===13&&(i=13)):i=c,i===10&&(i=13),32<=i||i===13?i:0}function Di(){return!0}function sh(){return!1}function Fs(i){function c(g,j,E,k,Y){this._reactName=g,this._targetInst=E,this.type=j,this.nativeEvent=k,this.target=Y,this.currentTarget=null;for(var te in i)i.hasOwnProperty(te)&&(g=i[te],this[te]=g?g(k):k[te]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Di:sh,this.isPropagationStopped=sh,this}return b(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Di)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Di)},persist:function(){},isPersistent:Di}),c}var aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=Fs(aa),so=b({},aa,{view:0,detail:0}),Rm=Fs(so),gd,nh,dc,xd=b({},so,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==dc&&(dc&&i.type==="mousemove"?(gd=i.screenX-dc.screenX,nh=i.screenY-dc.screenY):nh=gd=0,dc=i),gd)},movementY:function(i){return"movementY"in i?i.movementY:nh}}),wr=Fs(xd),Mm=b({},xd,{dataTransfer:0}),pd=Fs(Mm),Oi=b({},so,{relatedTarget:0}),ah=Fs(Oi),Le=b({},aa,{animationName:0,elapsedTime:0,pseudoElement:0}),qt=Fs(Le),Ks=b({},aa,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),yd=Fs(Ks),Lm=b({},aa,{data:0}),Fm=Fs(Lm),yy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},by={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ih={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ps(i){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(i):(i=ih[i])?!!c[i]:!1}function uc(){return Ps}var is=b({},so,{key:function(i){if(i.key){var c=yy[i.key]||i.key;if(c!=="Unidentified")return c}return i.type==="keypress"?(i=Ti(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?by[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uc,charCode:function(i){return i.type==="keypress"?Ti(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ti(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),bd=Fs(is),tl=b({},xd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tr=Fs(tl),Ot=b({},so,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uc}),vy=Fs(Ot),qr=b({},aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),rl=Fs(qr),no=b({},xd,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ny=Fs(no),Ea=b({},aa,{newState:0,oldState:0}),lh=Fs(Ea),Bm=[9,13,27,32],hc=$r&&"CompositionEvent"in window,ao=null;$r&&"documentMode"in document&&(ao=document.documentMode);var Um=$r&&"TextEvent"in window&&!ao,zm=$r&&(!hc||ao&&8<ao&&11>=ao),sl=" ",vd=!1;function Vm(i,c){switch(i){case"keyup":return Bm.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function io(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var lo=!1;function Pi(i,c){switch(i){case"compositionend":return io(c);case"keypress":return c.which!==32?null:(vd=!0,sl);case"textInput":return i=c.data,i===sl&&vd?null:i;default:return null}}function Nd(i,c){if(lo)return i==="compositionend"||!hc&&Vm(i,c)?(i=ro(),fd=ai=ni=null,lo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return zm&&c.locale!=="ko"?null:c.data;default:return null}}var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oh(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c==="input"?!!Vn[i.type]:c==="textarea"}function ia(i,c,g,j){Qr?Aa?Aa.push(j):Aa=[j]:Qr=j,c=_f(c,"onChange"),0<c.length&&(g=new Xs("onChange","change",null,g,j),i.push({event:g,listeners:c}))}var mc=null,nl=null;function jy(i){pA(i,0)}function fc(i){var c=qe(i);if(ri(c))return i}function la(i,c){if(i==="change")return c}var $m=!1;if($r){var gc;if($r){var al="oninput"in document;if(!al){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),al=typeof rr.oninput=="function"}gc=al}else gc=!1;$m=gc&&(!document.documentMode||9<document.documentMode)}function xc(){mc&&(mc.detachEvent("onpropertychange",K),nl=mc=null)}function K(i){if(i.propertyName==="value"&&fc(nl)){var c=[];ia(c,nl,i,th(i)),Im(jy,c)}}function o(i,c,g){i==="focusin"?(xc(),mc=c,nl=g,mc.attachEvent("onpropertychange",K)):i==="focusout"&&xc()}function u(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return fc(nl)}function m(i,c){if(i==="click")return fc(c)}function y(i,c){if(i==="input"||i==="change")return fc(c)}function N(i,c){return i===c&&(i!==0||1/i===1/c)||i!==i&&c!==c}var w=typeof Object.is=="function"?Object.is:N;function C(i,c){if(w(i,c))return!0;if(typeof i!="object"||i===null||typeof c!="object"||c===null)return!1;var g=Object.keys(i),j=Object.keys(c);if(g.length!==j.length)return!1;for(j=0;j<g.length;j++){var E=g[j];if(!dt.call(c,E)||!w(i[E],c[E]))return!1}return!0}function O(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function R(i,c){var g=O(i);i=0;for(var j;g;){if(g.nodeType===3){if(j=i+g.textContent.length,i<=c&&j>=c)return{node:g,offset:c-i};i=j}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=O(g)}}function q(i,c){return i&&c?i===c?!0:i&&i.nodeType===3?!1:c&&c.nodeType===3?q(i,c.parentNode):"contains"in i?i.contains(c):i.compareDocumentPosition?!!(i.compareDocumentPosition(c)&16):!1:!1}function Z(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var c=md(i.document);c instanceof i.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)i=c.contentWindow;else break;c=md(i.document)}return c}function ee(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c&&(c==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||c==="textarea"||i.contentEditable==="true")}var ue=$r&&"documentMode"in document&&11>=document.documentMode,be=null,Ne=null,Oe=null,Re=!1;function it(i,c,g){var j=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Re||be==null||be!==md(j)||(j=be,"selectionStart"in j&&ee(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),Oe&&C(Oe,j)||(Oe=j,j=_f(Ne,"onSelect"),0<j.length&&(c=new Xs("onSelect","select",null,c,g),i.push({event:c,listeners:j}),c.target=be)))}function nt(i,c){var g={};return g[i.toLowerCase()]=c.toLowerCase(),g["Webkit"+i]="webkit"+c,g["Moz"+i]="moz"+c,g}var et={animationend:nt("Animation","AnimationEnd"),animationiteration:nt("Animation","AnimationIteration"),animationstart:nt("Animation","AnimationStart"),transitionrun:nt("Transition","TransitionRun"),transitionstart:nt("Transition","TransitionStart"),transitioncancel:nt("Transition","TransitionCancel"),transitionend:nt("Transition","TransitionEnd")},Gt={},Ft={};$r&&(Ft=document.createElement("div").style,"AnimationEvent"in window||(delete et.animationend.animation,delete et.animationiteration.animation,delete et.animationstart.animation),"TransitionEvent"in window||delete et.transitionend.transition);function Ns(i){if(Gt[i])return Gt[i];if(!et[i])return i;var c=et[i],g;for(g in c)if(c.hasOwnProperty(g)&&g in Ft)return Gt[i]=c[g];return i}var $n=Ns("animationend"),mn=Ns("animationiteration"),Dr=Ns("animationstart"),Zs=Ns("transitionrun"),_n=Ns("transitionstart"),oo=Ns("transitioncancel"),il=Ns("transitionend"),qm=new Map,ch="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ch.push("scrollEnd");function ii(i,c){qm.set(i,c),Er(c,[i])}var Hm=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Ta=[],jd=0,wy=0;function Gm(){for(var i=jd,c=wy=jd=0;c<i;){var g=Ta[c];Ta[c++]=null;var j=Ta[c];Ta[c++]=null;var E=Ta[c];Ta[c++]=null;var k=Ta[c];if(Ta[c++]=null,j!==null&&E!==null){var Y=j.pending;Y===null?E.next=E:(E.next=Y.next,Y.next=E),j.pending=E}k!==0&&QS(g,E,k)}}function Ym(i,c,g,j){Ta[jd++]=i,Ta[jd++]=c,Ta[jd++]=g,Ta[jd++]=j,wy|=j,i.lanes|=j,i=i.alternate,i!==null&&(i.lanes|=j)}function Sy(i,c,g,j){return Ym(i,c,g,j),Wm(i)}function pc(i,c){return Ym(i,null,null,c),Wm(i)}function QS(i,c,g){i.lanes|=g;var j=i.alternate;j!==null&&(j.lanes|=g);for(var E=!1,k=i.return;k!==null;)k.childLanes|=g,j=k.alternate,j!==null&&(j.childLanes|=g),k.tag===22&&(i=k.stateNode,i===null||i._visibility&1||(E=!0)),i=k,k=k.return;return i.tag===3?(k=i.stateNode,E&&c!==null&&(E=31-lt(g),i=k.hiddenUpdates,j=i[E],j===null?i[E]=[c]:j.push(c),c.lane=g|536870912),k):null}function Wm(i){if(50<Ph)throw Ph=0,_1=null,Error(n(185));for(var c=i.return;c!==null;)i=c,c=i.return;return i.tag===3?i.stateNode:null}var wd={};function w9(i,c,g,j){this.tag=i,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oa(i,c,g,j){return new w9(i,c,g,j)}function Cy(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ll(i,c){var g=i.alternate;return g===null?(g=oa(i.tag,c,i.key,i.mode),g.elementType=i.elementType,g.type=i.type,g.stateNode=i.stateNode,g.alternate=i,i.alternate=g):(g.pendingProps=c,g.type=i.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=i.flags&65011712,g.childLanes=i.childLanes,g.lanes=i.lanes,g.child=i.child,g.memoizedProps=i.memoizedProps,g.memoizedState=i.memoizedState,g.updateQueue=i.updateQueue,c=i.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=i.sibling,g.index=i.index,g.ref=i.ref,g.refCleanup=i.refCleanup,g}function JS(i,c){i.flags&=65011714;var g=i.alternate;return g===null?(i.childLanes=0,i.lanes=c,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=g.childLanes,i.lanes=g.lanes,i.child=g.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=g.memoizedProps,i.memoizedState=g.memoizedState,i.updateQueue=g.updateQueue,i.type=g.type,c=g.dependencies,i.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),i}function Xm(i,c,g,j,E,k){var Y=0;if(j=i,typeof i=="function")Cy(i)&&(Y=1);else if(typeof i=="string")Y=TL(i,g,fe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case z:return i=oa(31,g,c,E),i.elementType=z,i.lanes=k,i;case P:return yc(g.children,E,k,c);case D:Y=8,E|=24;break;case I:return i=oa(12,g,c,E|2),i.elementType=I,i.lanes=k,i;case F:return i=oa(13,g,c,E),i.elementType=F,i.lanes=k,i;case B:return i=oa(19,g,c,E),i.elementType=B,i.lanes=k,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case _:Y=10;break e;case L:Y=9;break e;case $:Y=11;break e;case M:Y=14;break e;case V:Y=16,j=null;break e}Y=29,g=Error(n(130,i===null?"null":typeof i,"")),j=null}return c=oa(Y,g,c,E),c.elementType=i,c.type=j,c.lanes=k,c}function yc(i,c,g,j){return i=oa(7,i,j,c),i.lanes=g,i}function Ay(i,c,g){return i=oa(6,i,null,c),i.lanes=g,i}function e4(i){var c=oa(18,null,null,0);return c.stateNode=i,c}function Ey(i,c,g){return c=oa(4,i.children!==null?i.children:[],i.key,c),c.lanes=g,c.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},c}var t4=new WeakMap;function Da(i,c){if(typeof i=="object"&&i!==null){var g=t4.get(i);return g!==void 0?g:(c={value:i,source:c,stack:at(c)},t4.set(i,c),c)}return{value:i,source:c,stack:at(c)}}var Sd=[],Cd=0,Km=null,dh=0,Oa=[],Pa=0,co=null,ki=1,_i="";function ol(i,c){Sd[Cd++]=dh,Sd[Cd++]=Km,Km=i,dh=c}function r4(i,c,g){Oa[Pa++]=ki,Oa[Pa++]=_i,Oa[Pa++]=co,co=i;var j=ki;i=_i;var E=32-lt(j)-1;j&=~(1<<E),g+=1;var k=32-lt(c)+E;if(30<k){var Y=E-E%5;k=(j&(1<<Y)-1).toString(32),j>>=Y,E-=Y,ki=1<<32-lt(c)+E|g<<E|j,_i=k+i}else ki=1<<k|g<<E|j,_i=i}function Ty(i){i.return!==null&&(ol(i,1),r4(i,1,0))}function Dy(i){for(;i===Km;)Km=Sd[--Cd],Sd[Cd]=null,dh=Sd[--Cd],Sd[Cd]=null;for(;i===co;)co=Oa[--Pa],Oa[Pa]=null,_i=Oa[--Pa],Oa[Pa]=null,ki=Oa[--Pa],Oa[Pa]=null}function s4(i,c){Oa[Pa++]=ki,Oa[Pa++]=_i,Oa[Pa++]=co,ki=c.id,_i=c.overflow,co=i}var fn=null,Jr=null,cr=!1,uo=null,ka=!1,Oy=Error(n(519));function ho(i){var c=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw uh(Da(c,i)),Oy}function n4(i){var c=i.stateNode,g=i.type,j=i.memoizedProps;switch(c[Yr]=i,c[or]=j,g){case"dialog":er("cancel",c),er("close",c);break;case"iframe":case"object":case"embed":er("load",c);break;case"video":case"audio":for(g=0;g<_h.length;g++)er(_h[g],c);break;case"source":er("error",c);break;case"img":case"image":case"link":er("error",c),er("load",c);break;case"details":er("toggle",c);break;case"input":er("invalid",c),Pe(c,j.value,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name,!0);break;case"select":er("invalid",c);break;case"textarea":er("invalid",c),Pn(c,j.value,j.defaultValue,j.children)}g=j.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||c.textContent===""+g||j.suppressHydrationWarning===!0||NA(c.textContent,g)?(j.popover!=null&&(er("beforetoggle",c),er("toggle",c)),j.onScroll!=null&&er("scroll",c),j.onScrollEnd!=null&&er("scrollend",c),j.onClick!=null&&(c.onclick=zn),c=!0):c=!1,c||ho(i,!0)}function a4(i){for(fn=i.return;fn;)switch(fn.tag){case 5:case 31:case 13:ka=!1;return;case 27:case 3:ka=!0;return;default:fn=fn.return}}function Ad(i){if(i!==fn)return!1;if(!cr)return a4(i),cr=!0,!1;var c=i.tag,g;if((g=c!==3&&c!==27)&&((g=c===5)&&(g=i.type,g=!(g!=="form"&&g!=="button")||W1(i.type,i.memoizedProps)),g=!g),g&&Jr&&ho(i),a4(i),c===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Jr=OA(i)}else if(c===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Jr=OA(i)}else c===27?(c=Jr,Ao(i.type)?(i=J1,J1=null,Jr=i):Jr=c):Jr=fn?Ia(i.stateNode.nextSibling):null;return!0}function bc(){Jr=fn=null,cr=!1}function Py(){var i=uo;return i!==null&&(Yn===null?Yn=i:Yn.push.apply(Yn,i),uo=null),i}function uh(i){uo===null?uo=[i]:uo.push(i)}var ky=X(null),vc=null,cl=null;function mo(i,c,g){ve(ky,c._currentValue),c._currentValue=g}function dl(i){i._currentValue=ky.current,ae(ky)}function _y(i,c,g){for(;i!==null;){var j=i.alternate;if((i.childLanes&c)!==c?(i.childLanes|=c,j!==null&&(j.childLanes|=c)):j!==null&&(j.childLanes&c)!==c&&(j.childLanes|=c),i===g)break;i=i.return}}function Iy(i,c,g,j){var E=i.child;for(E!==null&&(E.return=i);E!==null;){var k=E.dependencies;if(k!==null){var Y=E.child;k=k.firstContext;e:for(;k!==null;){var te=k;k=E;for(var ye=0;ye<c.length;ye++)if(te.context===c[ye]){k.lanes|=g,te=k.alternate,te!==null&&(te.lanes|=g),_y(k.return,g,i),j||(Y=null);break e}k=te.next}}else if(E.tag===18){if(Y=E.return,Y===null)throw Error(n(341));Y.lanes|=g,k=Y.alternate,k!==null&&(k.lanes|=g),_y(Y,g,i),Y=null}else Y=E.child;if(Y!==null)Y.return=E;else for(Y=E;Y!==null;){if(Y===i){Y=null;break}if(E=Y.sibling,E!==null){E.return=Y.return,Y=E;break}Y=Y.return}E=Y}}function Ed(i,c,g,j){i=null;for(var E=c,k=!1;E!==null;){if(!k){if((E.flags&524288)!==0)k=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var Y=E.alternate;if(Y===null)throw Error(n(387));if(Y=Y.memoizedProps,Y!==null){var te=E.type;w(E.pendingProps.value,Y.value)||(i!==null?i.push(te):i=[te])}}else if(E===he.current){if(Y=E.alternate,Y===null)throw Error(n(387));Y.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(i!==null?i.push(Fh):i=[Fh])}E=E.return}i!==null&&Iy(c,i,g,j),c.flags|=262144}function Zm(i){for(i=i.firstContext;i!==null;){if(!w(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Nc(i){vc=i,cl=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function gn(i){return i4(vc,i)}function Qm(i,c){return vc===null&&Nc(i),i4(i,c)}function i4(i,c){var g=c._currentValue;if(c={context:c,memoizedValue:g,next:null},cl===null){if(i===null)throw Error(n(308));cl=c,i.dependencies={lanes:0,firstContext:c},i.flags|=524288}else cl=cl.next=c;return g}var S9=typeof AbortController<"u"?AbortController:function(){var i=[],c=this.signal={aborted:!1,addEventListener:function(g,j){i.push(j)}};this.abort=function(){c.aborted=!0,i.forEach(function(g){return g()})}},C9=e.unstable_scheduleCallback,A9=e.unstable_NormalPriority,Bs={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ry(){return{controller:new S9,data:new Map,refCount:0}}function hh(i){i.refCount--,i.refCount===0&&C9(A9,function(){i.controller.abort()})}var mh=null,My=0,Td=0,Dd=null;function E9(i,c){if(mh===null){var g=mh=[];My=0,Td=B1(),Dd={status:"pending",value:void 0,then:function(j){g.push(j)}}}return My++,c.then(l4,l4),c}function l4(){if(--My===0&&mh!==null){Dd!==null&&(Dd.status="fulfilled");var i=mh;mh=null,Td=0,Dd=null;for(var c=0;c<i.length;c++)(0,i[c])()}}function T9(i,c){var g=[],j={status:"pending",value:null,reason:null,then:function(E){g.push(E)}};return i.then(function(){j.status="fulfilled",j.value=c;for(var E=0;E<g.length;E++)(0,g[E])(c)},function(E){for(j.status="rejected",j.reason=E,E=0;E<g.length;E++)(0,g[E])(void 0)}),j}var o4=J.S;J.S=function(i,c){HC=ft(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&E9(i,c),o4!==null&&o4(i,c)};var jc=X(null);function Ly(){var i=jc.current;return i!==null?i:Hr.pooledCache}function Jm(i,c){c===null?ve(jc,jc.current):ve(jc,c.pool)}function c4(){var i=Ly();return i===null?null:{parent:Bs._currentValue,pool:i}}var Od=Error(n(460)),Fy=Error(n(474)),ef=Error(n(542)),tf={then:function(){}};function d4(i){return i=i.status,i==="fulfilled"||i==="rejected"}function u4(i,c,g){switch(g=i[g],g===void 0?i.push(c):g!==c&&(c.then(zn,zn),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw i=c.reason,m4(i),i;default:if(typeof c.status=="string")c.then(zn,zn);else{if(i=Hr,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=c,i.status="pending",i.then(function(j){if(c.status==="pending"){var E=c;E.status="fulfilled",E.value=j}},function(j){if(c.status==="pending"){var E=c;E.status="rejected",E.reason=j}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw i=c.reason,m4(i),i}throw Sc=c,Od}}function wc(i){try{var c=i._init;return c(i._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(Sc=g,Od):g}}var Sc=null;function h4(){if(Sc===null)throw Error(n(459));var i=Sc;return Sc=null,i}function m4(i){if(i===Od||i===ef)throw Error(n(483))}var Pd=null,fh=0;function rf(i){var c=fh;return fh+=1,Pd===null&&(Pd=[]),u4(Pd,i,c)}function gh(i,c){c=c.props.ref,i.ref=c!==void 0?c:null}function sf(i,c){throw c.$$typeof===S?Error(n(525)):(i=Object.prototype.toString.call(c),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":i)))}function f4(i){function c(De,we){if(i){var ke=De.deletions;ke===null?(De.deletions=[we],De.flags|=16):ke.push(we)}}function g(De,we){if(!i)return null;for(;we!==null;)c(De,we),we=we.sibling;return null}function j(De){for(var we=new Map;De!==null;)De.key!==null?we.set(De.key,De):we.set(De.index,De),De=De.sibling;return we}function E(De,we){return De=ll(De,we),De.index=0,De.sibling=null,De}function k(De,we,ke){return De.index=ke,i?(ke=De.alternate,ke!==null?(ke=ke.index,ke<we?(De.flags|=67108866,we):ke):(De.flags|=67108866,we)):(De.flags|=1048576,we)}function Y(De){return i&&De.alternate===null&&(De.flags|=67108866),De}function te(De,we,ke,We){return we===null||we.tag!==6?(we=Ay(ke,De.mode,We),we.return=De,we):(we=E(we,ke),we.return=De,we)}function ye(De,we,ke,We){var Et=ke.type;return Et===P?He(De,we,ke.props.children,We,ke.key):we!==null&&(we.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===V&&wc(Et)===we.type)?(we=E(we,ke.props),gh(we,ke),we.return=De,we):(we=Xm(ke.type,ke.key,ke.props,null,De.mode,We),gh(we,ke),we.return=De,we)}function _e(De,we,ke,We){return we===null||we.tag!==4||we.stateNode.containerInfo!==ke.containerInfo||we.stateNode.implementation!==ke.implementation?(we=Ey(ke,De.mode,We),we.return=De,we):(we=E(we,ke.children||[]),we.return=De,we)}function He(De,we,ke,We,Et){return we===null||we.tag!==7?(we=yc(ke,De.mode,We,Et),we.return=De,we):(we=E(we,ke),we.return=De,we)}function Xe(De,we,ke){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=Ay(""+we,De.mode,ke),we.return=De,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case T:return ke=Xm(we.type,we.key,we.props,null,De.mode,ke),gh(ke,we),ke.return=De,ke;case A:return we=Ey(we,De.mode,ke),we.return=De,we;case V:return we=wc(we),Xe(De,we,ke)}if(ne(we)||G(we))return we=yc(we,De.mode,ke,null),we.return=De,we;if(typeof we.then=="function")return Xe(De,rf(we),ke);if(we.$$typeof===_)return Xe(De,Qm(De,we),ke);sf(De,we)}return null}function Ie(De,we,ke,We){var Et=we!==null?we.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return Et!==null?null:te(De,we,""+ke,We);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case T:return ke.key===Et?ye(De,we,ke,We):null;case A:return ke.key===Et?_e(De,we,ke,We):null;case V:return ke=wc(ke),Ie(De,we,ke,We)}if(ne(ke)||G(ke))return Et!==null?null:He(De,we,ke,We,null);if(typeof ke.then=="function")return Ie(De,we,rf(ke),We);if(ke.$$typeof===_)return Ie(De,we,Qm(De,ke),We);sf(De,ke)}return null}function Ue(De,we,ke,We,Et){if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return De=De.get(ke)||null,te(we,De,""+We,Et);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case T:return De=De.get(We.key===null?ke:We.key)||null,ye(we,De,We,Et);case A:return De=De.get(We.key===null?ke:We.key)||null,_e(we,De,We,Et);case V:return We=wc(We),Ue(De,we,ke,We,Et)}if(ne(We)||G(We))return De=De.get(ke)||null,He(we,De,We,Et,null);if(typeof We.then=="function")return Ue(De,we,ke,rf(We),Et);if(We.$$typeof===_)return Ue(De,we,ke,Qm(we,We),Et);sf(we,We)}return null}function bt(De,we,ke,We){for(var Et=null,pr=null,wt=we,Ht=we=0,nr=null;wt!==null&&Ht<ke.length;Ht++){wt.index>Ht?(nr=wt,wt=null):nr=wt.sibling;var yr=Ie(De,wt,ke[Ht],We);if(yr===null){wt===null&&(wt=nr);break}i&&wt&&yr.alternate===null&&c(De,wt),we=k(yr,we,Ht),pr===null?Et=yr:pr.sibling=yr,pr=yr,wt=nr}if(Ht===ke.length)return g(De,wt),cr&&ol(De,Ht),Et;if(wt===null){for(;Ht<ke.length;Ht++)wt=Xe(De,ke[Ht],We),wt!==null&&(we=k(wt,we,Ht),pr===null?Et=wt:pr.sibling=wt,pr=wt);return cr&&ol(De,Ht),Et}for(wt=j(wt);Ht<ke.length;Ht++)nr=Ue(wt,De,Ht,ke[Ht],We),nr!==null&&(i&&nr.alternate!==null&&wt.delete(nr.key===null?Ht:nr.key),we=k(nr,we,Ht),pr===null?Et=nr:pr.sibling=nr,pr=nr);return i&&wt.forEach(function(Po){return c(De,Po)}),cr&&ol(De,Ht),Et}function kt(De,we,ke,We){if(ke==null)throw Error(n(151));for(var Et=null,pr=null,wt=we,Ht=we=0,nr=null,yr=ke.next();wt!==null&&!yr.done;Ht++,yr=ke.next()){wt.index>Ht?(nr=wt,wt=null):nr=wt.sibling;var Po=Ie(De,wt,yr.value,We);if(Po===null){wt===null&&(wt=nr);break}i&&wt&&Po.alternate===null&&c(De,wt),we=k(Po,we,Ht),pr===null?Et=Po:pr.sibling=Po,pr=Po,wt=nr}if(yr.done)return g(De,wt),cr&&ol(De,Ht),Et;if(wt===null){for(;!yr.done;Ht++,yr=ke.next())yr=Xe(De,yr.value,We),yr!==null&&(we=k(yr,we,Ht),pr===null?Et=yr:pr.sibling=yr,pr=yr);return cr&&ol(De,Ht),Et}for(wt=j(wt);!yr.done;Ht++,yr=ke.next())yr=Ue(wt,De,Ht,yr.value,We),yr!==null&&(i&&yr.alternate!==null&&wt.delete(yr.key===null?Ht:yr.key),we=k(yr,we,Ht),pr===null?Et=yr:pr.sibling=yr,pr=yr);return i&&wt.forEach(function(BL){return c(De,BL)}),cr&&ol(De,Ht),Et}function Lr(De,we,ke,We){if(typeof ke=="object"&&ke!==null&&ke.type===P&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case T:e:{for(var Et=ke.key;we!==null;){if(we.key===Et){if(Et=ke.type,Et===P){if(we.tag===7){g(De,we.sibling),We=E(we,ke.props.children),We.return=De,De=We;break e}}else if(we.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===V&&wc(Et)===we.type){g(De,we.sibling),We=E(we,ke.props),gh(We,ke),We.return=De,De=We;break e}g(De,we);break}else c(De,we);we=we.sibling}ke.type===P?(We=yc(ke.props.children,De.mode,We,ke.key),We.return=De,De=We):(We=Xm(ke.type,ke.key,ke.props,null,De.mode,We),gh(We,ke),We.return=De,De=We)}return Y(De);case A:e:{for(Et=ke.key;we!==null;){if(we.key===Et)if(we.tag===4&&we.stateNode.containerInfo===ke.containerInfo&&we.stateNode.implementation===ke.implementation){g(De,we.sibling),We=E(we,ke.children||[]),We.return=De,De=We;break e}else{g(De,we);break}else c(De,we);we=we.sibling}We=Ey(ke,De.mode,We),We.return=De,De=We}return Y(De);case V:return ke=wc(ke),Lr(De,we,ke,We)}if(ne(ke))return bt(De,we,ke,We);if(G(ke)){if(Et=G(ke),typeof Et!="function")throw Error(n(150));return ke=Et.call(ke),kt(De,we,ke,We)}if(typeof ke.then=="function")return Lr(De,we,rf(ke),We);if(ke.$$typeof===_)return Lr(De,we,Qm(De,ke),We);sf(De,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,we!==null&&we.tag===6?(g(De,we.sibling),We=E(we,ke),We.return=De,De=We):(g(De,we),We=Ay(ke,De.mode,We),We.return=De,De=We),Y(De)):g(De,we)}return function(De,we,ke,We){try{fh=0;var Et=Lr(De,we,ke,We);return Pd=null,Et}catch(wt){if(wt===Od||wt===ef)throw wt;var pr=oa(29,wt,null,De.mode);return pr.lanes=We,pr.return=De,pr}finally{}}}var Cc=f4(!0),g4=f4(!1),fo=!1;function By(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uy(i,c){i=i.updateQueue,c.updateQueue===i&&(c.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function go(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function xo(i,c,g){var j=i.updateQueue;if(j===null)return null;if(j=j.shared,(Sr&2)!==0){var E=j.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),j.pending=c,c=Wm(i),QS(i,null,g),c}return Ym(i,j,c,g),Wm(i)}function xh(i,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194048)!==0)){var j=c.lanes;j&=i.pendingLanes,g|=j,c.lanes=g,jn(i,g)}}function zy(i,c){var g=i.updateQueue,j=i.alternate;if(j!==null&&(j=j.updateQueue,g===j)){var E=null,k=null;if(g=g.firstBaseUpdate,g!==null){do{var Y={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};k===null?E=k=Y:k=k.next=Y,g=g.next}while(g!==null);k===null?E=k=c:k=k.next=c}else E=k=c;g={baseState:j.baseState,firstBaseUpdate:E,lastBaseUpdate:k,shared:j.shared,callbacks:j.callbacks},i.updateQueue=g;return}i=g.lastBaseUpdate,i===null?g.firstBaseUpdate=c:i.next=c,g.lastBaseUpdate=c}var Vy=!1;function ph(){if(Vy){var i=Dd;if(i!==null)throw i}}function yh(i,c,g,j){Vy=!1;var E=i.updateQueue;fo=!1;var k=E.firstBaseUpdate,Y=E.lastBaseUpdate,te=E.shared.pending;if(te!==null){E.shared.pending=null;var ye=te,_e=ye.next;ye.next=null,Y===null?k=_e:Y.next=_e,Y=ye;var He=i.alternate;He!==null&&(He=He.updateQueue,te=He.lastBaseUpdate,te!==Y&&(te===null?He.firstBaseUpdate=_e:te.next=_e,He.lastBaseUpdate=ye))}if(k!==null){var Xe=E.baseState;Y=0,He=_e=ye=null,te=k;do{var Ie=te.lane&-536870913,Ue=Ie!==te.lane;if(Ue?(sr&Ie)===Ie:(j&Ie)===Ie){Ie!==0&&Ie===Td&&(Vy=!0),He!==null&&(He=He.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var bt=i,kt=te;Ie=c;var Lr=g;switch(kt.tag){case 1:if(bt=kt.payload,typeof bt=="function"){Xe=bt.call(Lr,Xe,Ie);break e}Xe=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=kt.payload,Ie=typeof bt=="function"?bt.call(Lr,Xe,Ie):bt,Ie==null)break e;Xe=b({},Xe,Ie);break e;case 2:fo=!0}}Ie=te.callback,Ie!==null&&(i.flags|=64,Ue&&(i.flags|=8192),Ue=E.callbacks,Ue===null?E.callbacks=[Ie]:Ue.push(Ie))}else Ue={lane:Ie,tag:te.tag,payload:te.payload,callback:te.callback,next:null},He===null?(_e=He=Ue,ye=Xe):He=He.next=Ue,Y|=Ie;if(te=te.next,te===null){if(te=E.shared.pending,te===null)break;Ue=te,te=Ue.next,Ue.next=null,E.lastBaseUpdate=Ue,E.shared.pending=null}}while(!0);He===null&&(ye=Xe),E.baseState=ye,E.firstBaseUpdate=_e,E.lastBaseUpdate=He,k===null&&(E.shared.lanes=0),No|=Y,i.lanes=Y,i.memoizedState=Xe}}function x4(i,c){if(typeof i!="function")throw Error(n(191,i));i.call(c)}function p4(i,c){var g=i.callbacks;if(g!==null)for(i.callbacks=null,i=0;i<g.length;i++)x4(g[i],c)}var kd=X(null),nf=X(0);function y4(i,c){i=bl,ve(nf,i),ve(kd,c),bl=i|c.baseLanes}function $y(){ve(nf,bl),ve(kd,kd.current)}function qy(){bl=nf.current,ae(kd),ae(nf)}var ca=X(null),_a=null;function po(i){var c=i.alternate;ve(ks,ks.current&1),ve(ca,i),_a===null&&(c===null||kd.current!==null||c.memoizedState!==null)&&(_a=i)}function Hy(i){ve(ks,ks.current),ve(ca,i),_a===null&&(_a=i)}function b4(i){i.tag===22?(ve(ks,ks.current),ve(ca,i),_a===null&&(_a=i)):yo()}function yo(){ve(ks,ks.current),ve(ca,ca.current)}function da(i){ae(ca),_a===i&&(_a=null),ae(ks)}var ks=X(0);function af(i){for(var c=i;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||Z1(g)||Q1(g)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var ul=0,Vt=null,Rr=null,Us=null,lf=!1,_d=!1,Ac=!1,of=0,bh=0,Id=null,D9=0;function js(){throw Error(n(321))}function Gy(i,c){if(c===null)return!1;for(var g=0;g<c.length&&g<i.length;g++)if(!w(i[g],c[g]))return!1;return!0}function Yy(i,c,g,j,E,k){return ul=k,Vt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,J.H=i===null||i.memoizedState===null?rC:o1,Ac=!1,k=g(j,E),Ac=!1,_d&&(k=N4(c,g,j,E)),v4(i),k}function v4(i){J.H=jh;var c=Rr!==null&&Rr.next!==null;if(ul=0,Us=Rr=Vt=null,lf=!1,bh=0,Id=null,c)throw Error(n(300));i===null||zs||(i=i.dependencies,i!==null&&Zm(i)&&(zs=!0))}function N4(i,c,g,j){Vt=i;var E=0;do{if(_d&&(Id=null),bh=0,_d=!1,25<=E)throw Error(n(301));if(E+=1,Us=Rr=null,i.updateQueue!=null){var k=i.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}J.H=sC,k=c(g,j)}while(_d);return k}function O9(){var i=J.H,c=i.useState()[0];return c=typeof c.then=="function"?vh(c):c,i=i.useState()[0],(Rr!==null?Rr.memoizedState:null)!==i&&(Vt.flags|=1024),c}function Wy(){var i=of!==0;return of=0,i}function Xy(i,c,g){c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~g}function Ky(i){if(lf){for(i=i.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}lf=!1}ul=0,Us=Rr=Vt=null,_d=!1,bh=of=0,Id=null}function In(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Us===null?Vt.memoizedState=Us=i:Us=Us.next=i,Us}function _s(){if(Rr===null){var i=Vt.alternate;i=i!==null?i.memoizedState:null}else i=Rr.next;var c=Us===null?Vt.memoizedState:Us.next;if(c!==null)Us=c,Rr=i;else{if(i===null)throw Vt.alternate===null?Error(n(467)):Error(n(310));Rr=i,i={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},Us===null?Vt.memoizedState=Us=i:Us=Us.next=i}return Us}function cf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vh(i){var c=bh;return bh+=1,Id===null&&(Id=[]),i=u4(Id,i,c),c=Vt,(Us===null?c.memoizedState:Us.next)===null&&(c=c.alternate,J.H=c===null||c.memoizedState===null?rC:o1),i}function df(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return vh(i);if(i.$$typeof===_)return gn(i)}throw Error(n(438,String(i)))}function Zy(i){var c=null,g=Vt.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var j=Vt.alternate;j!==null&&(j=j.updateQueue,j!==null&&(j=j.memoCache,j!=null&&(c={data:j.data.map(function(E){return E.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=cf(),Vt.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(i),j=0;j<i;j++)g[j]=H;return c.index++,g}function hl(i,c){return typeof c=="function"?c(i):c}function uf(i){var c=_s();return Qy(c,Rr,i)}function Qy(i,c,g){var j=i.queue;if(j===null)throw Error(n(311));j.lastRenderedReducer=g;var E=i.baseQueue,k=j.pending;if(k!==null){if(E!==null){var Y=E.next;E.next=k.next,k.next=Y}c.baseQueue=E=k,j.pending=null}if(k=i.baseState,E===null)i.memoizedState=k;else{c=E.next;var te=Y=null,ye=null,_e=c,He=!1;do{var Xe=_e.lane&-536870913;if(Xe!==_e.lane?(sr&Xe)===Xe:(ul&Xe)===Xe){var Ie=_e.revertLane;if(Ie===0)ye!==null&&(ye=ye.next={lane:0,revertLane:0,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),Xe===Td&&(He=!0);else if((ul&Ie)===Ie){_e=_e.next,Ie===Td&&(He=!0);continue}else Xe={lane:0,revertLane:_e.revertLane,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},ye===null?(te=ye=Xe,Y=k):ye=ye.next=Xe,Vt.lanes|=Ie,No|=Ie;Xe=_e.action,Ac&&g(k,Xe),k=_e.hasEagerState?_e.eagerState:g(k,Xe)}else Ie={lane:Xe,revertLane:_e.revertLane,gesture:_e.gesture,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},ye===null?(te=ye=Ie,Y=k):ye=ye.next=Ie,Vt.lanes|=Xe,No|=Xe;_e=_e.next}while(_e!==null&&_e!==c);if(ye===null?Y=k:ye.next=te,!w(k,i.memoizedState)&&(zs=!0,He&&(g=Dd,g!==null)))throw g;i.memoizedState=k,i.baseState=Y,i.baseQueue=ye,j.lastRenderedState=k}return E===null&&(j.lanes=0),[i.memoizedState,j.dispatch]}function Jy(i){var c=_s(),g=c.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=i;var j=g.dispatch,E=g.pending,k=c.memoizedState;if(E!==null){g.pending=null;var Y=E=E.next;do k=i(k,Y.action),Y=Y.next;while(Y!==E);w(k,c.memoizedState)||(zs=!0),c.memoizedState=k,c.baseQueue===null&&(c.baseState=k),g.lastRenderedState=k}return[k,j]}function j4(i,c,g){var j=Vt,E=_s(),k=cr;if(k){if(g===void 0)throw Error(n(407));g=g()}else g=c();var Y=!w((Rr||E).memoizedState,g);if(Y&&(E.memoizedState=g,zs=!0),E=E.queue,r1(C4.bind(null,j,E,i),[i]),E.getSnapshot!==c||Y||Us!==null&&Us.memoizedState.tag&1){if(j.flags|=2048,Rd(9,{destroy:void 0},S4.bind(null,j,E,g,c),null),Hr===null)throw Error(n(349));k||(ul&127)!==0||w4(j,c,g)}return g}function w4(i,c,g){i.flags|=16384,i={getSnapshot:c,value:g},c=Vt.updateQueue,c===null?(c=cf(),Vt.updateQueue=c,c.stores=[i]):(g=c.stores,g===null?c.stores=[i]:g.push(i))}function S4(i,c,g,j){c.value=g,c.getSnapshot=j,A4(c)&&E4(i)}function C4(i,c,g){return g(function(){A4(c)&&E4(i)})}function A4(i){var c=i.getSnapshot;i=i.value;try{var g=c();return!w(i,g)}catch{return!0}}function E4(i){var c=pc(i,2);c!==null&&Wn(c,i,2)}function e1(i){var c=In();if(typeof i=="function"){var g=i;if(i=g(),Ac){tt(!0);try{g()}finally{tt(!1)}}}return c.memoizedState=c.baseState=i,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:i},c}function T4(i,c,g,j){return i.baseState=g,Qy(i,Rr,typeof j=="function"?j:hl)}function P9(i,c,g,j,E){if(ff(i))throw Error(n(485));if(i=c.action,i!==null){var k={payload:E,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){k.listeners.push(Y)}};J.T!==null?g(!0):k.isTransition=!1,j(k),g=c.pending,g===null?(k.next=c.pending=k,D4(c,k)):(k.next=g.next,c.pending=g.next=k)}}function D4(i,c){var g=c.action,j=c.payload,E=i.state;if(c.isTransition){var k=J.T,Y={};J.T=Y;try{var te=g(E,j),ye=J.S;ye!==null&&ye(Y,te),O4(i,c,te)}catch(_e){t1(i,c,_e)}finally{k!==null&&Y.types!==null&&(k.types=Y.types),J.T=k}}else try{k=g(E,j),O4(i,c,k)}catch(_e){t1(i,c,_e)}}function O4(i,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(j){P4(i,c,j)},function(j){return t1(i,c,j)}):P4(i,c,g)}function P4(i,c,g){c.status="fulfilled",c.value=g,k4(c),i.state=g,c=i.pending,c!==null&&(g=c.next,g===c?i.pending=null:(g=g.next,c.next=g,D4(i,g)))}function t1(i,c,g){var j=i.pending;if(i.pending=null,j!==null){j=j.next;do c.status="rejected",c.reason=g,k4(c),c=c.next;while(c!==j)}i.action=null}function k4(i){i=i.listeners;for(var c=0;c<i.length;c++)(0,i[c])()}function _4(i,c){return c}function I4(i,c){if(cr){var g=Hr.formState;if(g!==null){e:{var j=Vt;if(cr){if(Jr){t:{for(var E=Jr,k=ka;E.nodeType!==8;){if(!k){E=null;break t}if(E=Ia(E.nextSibling),E===null){E=null;break t}}k=E.data,E=k==="F!"||k==="F"?E:null}if(E){Jr=Ia(E.nextSibling),j=E.data==="F!";break e}}ho(j)}j=!1}j&&(c=g[0])}}return g=In(),g.memoizedState=g.baseState=c,j={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_4,lastRenderedState:c},g.queue=j,g=J4.bind(null,Vt,j),j.dispatch=g,j=e1(!1),k=l1.bind(null,Vt,!1,j.queue),j=In(),E={state:c,dispatch:null,action:i,pending:null},j.queue=E,g=P9.bind(null,Vt,E,k,g),E.dispatch=g,j.memoizedState=i,[c,g,!1]}function R4(i){var c=_s();return M4(c,Rr,i)}function M4(i,c,g){if(c=Qy(i,c,_4)[0],i=uf(hl)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var j=vh(c)}catch(Y){throw Y===Od?ef:Y}else j=c;c=_s();var E=c.queue,k=E.dispatch;return g!==c.memoizedState&&(Vt.flags|=2048,Rd(9,{destroy:void 0},k9.bind(null,E,g),null)),[j,k,i]}function k9(i,c){i.action=c}function L4(i){var c=_s(),g=Rr;if(g!==null)return M4(c,g,i);_s(),c=c.memoizedState,g=_s();var j=g.queue.dispatch;return g.memoizedState=i,[c,j,!1]}function Rd(i,c,g,j){return i={tag:i,create:g,deps:j,inst:c,next:null},c=Vt.updateQueue,c===null&&(c=cf(),Vt.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=i.next=i:(j=g.next,g.next=i,i.next=j,c.lastEffect=i),i}function F4(){return _s().memoizedState}function hf(i,c,g,j){var E=In();Vt.flags|=i,E.memoizedState=Rd(1|c,{destroy:void 0},g,j===void 0?null:j)}function mf(i,c,g,j){var E=_s();j=j===void 0?null:j;var k=E.memoizedState.inst;Rr!==null&&j!==null&&Gy(j,Rr.memoizedState.deps)?E.memoizedState=Rd(c,k,g,j):(Vt.flags|=i,E.memoizedState=Rd(1|c,k,g,j))}function B4(i,c){hf(8390656,8,i,c)}function r1(i,c){mf(2048,8,i,c)}function _9(i){Vt.flags|=4;var c=Vt.updateQueue;if(c===null)c=cf(),Vt.updateQueue=c,c.events=[i];else{var g=c.events;g===null?c.events=[i]:g.push(i)}}function U4(i){var c=_s().memoizedState;return _9({ref:c,nextImpl:i}),function(){if((Sr&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}function z4(i,c){return mf(4,2,i,c)}function V4(i,c){return mf(4,4,i,c)}function $4(i,c){if(typeof c=="function"){i=i();var g=c(i);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return i=i(),c.current=i,function(){c.current=null}}function q4(i,c,g){g=g!=null?g.concat([i]):null,mf(4,4,$4.bind(null,c,i),g)}function s1(){}function H4(i,c){var g=_s();c=c===void 0?null:c;var j=g.memoizedState;return c!==null&&Gy(c,j[1])?j[0]:(g.memoizedState=[i,c],i)}function G4(i,c){var g=_s();c=c===void 0?null:c;var j=g.memoizedState;if(c!==null&&Gy(c,j[1]))return j[0];if(j=i(),Ac){tt(!0);try{i()}finally{tt(!1)}}return g.memoizedState=[j,c],j}function n1(i,c,g){return g===void 0||(ul&1073741824)!==0&&(sr&261930)===0?i.memoizedState=c:(i.memoizedState=g,i=YC(),Vt.lanes|=i,No|=i,g)}function Y4(i,c,g,j){return w(g,c)?g:kd.current!==null?(i=n1(i,g,j),w(i,c)||(zs=!0),i):(ul&42)===0||(ul&1073741824)!==0&&(sr&261930)===0?(zs=!0,i.memoizedState=g):(i=YC(),Vt.lanes|=i,No|=i,c)}function W4(i,c,g,j,E){var k=W.p;W.p=k!==0&&8>k?k:8;var Y=J.T,te={};J.T=te,l1(i,!1,c,g);try{var ye=E(),_e=J.S;if(_e!==null&&_e(te,ye),ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var He=T9(ye,j);Nh(i,c,He,ma(i))}else Nh(i,c,j,ma(i))}catch(Xe){Nh(i,c,{then:function(){},status:"rejected",reason:Xe},ma())}finally{W.p=k,Y!==null&&te.types!==null&&(Y.types=te.types),J.T=Y}}function I9(){}function a1(i,c,g,j){if(i.tag!==5)throw Error(n(476));var E=X4(i).queue;W4(i,E,c,le,g===null?I9:function(){return K4(i),g(j)})}function X4(i){var c=i.memoizedState;if(c!==null)return c;c={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:le},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:g},next:null},i.memoizedState=c,i=i.alternate,i!==null&&(i.memoizedState=c),c}function K4(i){var c=X4(i);c.next===null&&(c=i.alternate.memoizedState),Nh(i,c.next.queue,{},ma())}function i1(){return gn(Fh)}function Z4(){return _s().memoizedState}function Q4(){return _s().memoizedState}function R9(i){for(var c=i.return;c!==null;){switch(c.tag){case 24:case 3:var g=ma();i=go(g);var j=xo(c,i,g);j!==null&&(Wn(j,c,g),xh(j,c,g)),c={cache:Ry()},i.payload=c;return}c=c.return}}function M9(i,c,g){var j=ma();g={lane:j,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},ff(i)?eC(c,g):(g=Sy(i,c,g,j),g!==null&&(Wn(g,i,j),tC(g,c,j)))}function J4(i,c,g){var j=ma();Nh(i,c,g,j)}function Nh(i,c,g,j){var E={lane:j,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(ff(i))eC(c,E);else{var k=i.alternate;if(i.lanes===0&&(k===null||k.lanes===0)&&(k=c.lastRenderedReducer,k!==null))try{var Y=c.lastRenderedState,te=k(Y,g);if(E.hasEagerState=!0,E.eagerState=te,w(te,Y))return Ym(i,c,E,0),Hr===null&&Gm(),!1}catch{}finally{}if(g=Sy(i,c,E,j),g!==null)return Wn(g,i,j),tC(g,c,j),!0}return!1}function l1(i,c,g,j){if(j={lane:2,revertLane:B1(),gesture:null,action:j,hasEagerState:!1,eagerState:null,next:null},ff(i)){if(c)throw Error(n(479))}else c=Sy(i,g,j,2),c!==null&&Wn(c,i,2)}function ff(i){var c=i.alternate;return i===Vt||c!==null&&c===Vt}function eC(i,c){_d=lf=!0;var g=i.pending;g===null?c.next=c:(c.next=g.next,g.next=c),i.pending=c}function tC(i,c,g){if((g&4194048)!==0){var j=c.lanes;j&=i.pendingLanes,g|=j,c.lanes=g,jn(i,g)}}var jh={readContext:gn,use:df,useCallback:js,useContext:js,useEffect:js,useImperativeHandle:js,useLayoutEffect:js,useInsertionEffect:js,useMemo:js,useReducer:js,useRef:js,useState:js,useDebugValue:js,useDeferredValue:js,useTransition:js,useSyncExternalStore:js,useId:js,useHostTransitionStatus:js,useFormState:js,useActionState:js,useOptimistic:js,useMemoCache:js,useCacheRefresh:js};jh.useEffectEvent=js;var rC={readContext:gn,use:df,useCallback:function(i,c){return In().memoizedState=[i,c===void 0?null:c],i},useContext:gn,useEffect:B4,useImperativeHandle:function(i,c,g){g=g!=null?g.concat([i]):null,hf(4194308,4,$4.bind(null,c,i),g)},useLayoutEffect:function(i,c){return hf(4194308,4,i,c)},useInsertionEffect:function(i,c){hf(4,2,i,c)},useMemo:function(i,c){var g=In();c=c===void 0?null:c;var j=i();if(Ac){tt(!0);try{i()}finally{tt(!1)}}return g.memoizedState=[j,c],j},useReducer:function(i,c,g){var j=In();if(g!==void 0){var E=g(c);if(Ac){tt(!0);try{g(c)}finally{tt(!1)}}}else E=c;return j.memoizedState=j.baseState=E,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:E},j.queue=i,i=i.dispatch=M9.bind(null,Vt,i),[j.memoizedState,i]},useRef:function(i){var c=In();return i={current:i},c.memoizedState=i},useState:function(i){i=e1(i);var c=i.queue,g=J4.bind(null,Vt,c);return c.dispatch=g,[i.memoizedState,g]},useDebugValue:s1,useDeferredValue:function(i,c){var g=In();return n1(g,i,c)},useTransition:function(){var i=e1(!1);return i=W4.bind(null,Vt,i.queue,!0,!1),In().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,c,g){var j=Vt,E=In();if(cr){if(g===void 0)throw Error(n(407));g=g()}else{if(g=c(),Hr===null)throw Error(n(349));(sr&127)!==0||w4(j,c,g)}E.memoizedState=g;var k={value:g,getSnapshot:c};return E.queue=k,B4(C4.bind(null,j,k,i),[i]),j.flags|=2048,Rd(9,{destroy:void 0},S4.bind(null,j,k,g,c),null),g},useId:function(){var i=In(),c=Hr.identifierPrefix;if(cr){var g=_i,j=ki;g=(j&~(1<<32-lt(j)-1)).toString(32)+g,c="_"+c+"R_"+g,g=of++,0<g&&(c+="H"+g.toString(32)),c+="_"}else g=D9++,c="_"+c+"r_"+g.toString(32)+"_";return i.memoizedState=c},useHostTransitionStatus:i1,useFormState:I4,useActionState:I4,useOptimistic:function(i){var c=In();c.memoizedState=c.baseState=i;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=l1.bind(null,Vt,!0,g),g.dispatch=c,[i,c]},useMemoCache:Zy,useCacheRefresh:function(){return In().memoizedState=R9.bind(null,Vt)},useEffectEvent:function(i){var c=In(),g={impl:i};return c.memoizedState=g,function(){if((Sr&2)!==0)throw Error(n(440));return g.impl.apply(void 0,arguments)}}},o1={readContext:gn,use:df,useCallback:H4,useContext:gn,useEffect:r1,useImperativeHandle:q4,useInsertionEffect:z4,useLayoutEffect:V4,useMemo:G4,useReducer:uf,useRef:F4,useState:function(){return uf(hl)},useDebugValue:s1,useDeferredValue:function(i,c){var g=_s();return Y4(g,Rr.memoizedState,i,c)},useTransition:function(){var i=uf(hl)[0],c=_s().memoizedState;return[typeof i=="boolean"?i:vh(i),c]},useSyncExternalStore:j4,useId:Z4,useHostTransitionStatus:i1,useFormState:R4,useActionState:R4,useOptimistic:function(i,c){var g=_s();return T4(g,Rr,i,c)},useMemoCache:Zy,useCacheRefresh:Q4};o1.useEffectEvent=U4;var sC={readContext:gn,use:df,useCallback:H4,useContext:gn,useEffect:r1,useImperativeHandle:q4,useInsertionEffect:z4,useLayoutEffect:V4,useMemo:G4,useReducer:Jy,useRef:F4,useState:function(){return Jy(hl)},useDebugValue:s1,useDeferredValue:function(i,c){var g=_s();return Rr===null?n1(g,i,c):Y4(g,Rr.memoizedState,i,c)},useTransition:function(){var i=Jy(hl)[0],c=_s().memoizedState;return[typeof i=="boolean"?i:vh(i),c]},useSyncExternalStore:j4,useId:Z4,useHostTransitionStatus:i1,useFormState:L4,useActionState:L4,useOptimistic:function(i,c){var g=_s();return Rr!==null?T4(g,Rr,i,c):(g.baseState=i,[i,g.queue.dispatch])},useMemoCache:Zy,useCacheRefresh:Q4};sC.useEffectEvent=U4;function c1(i,c,g,j){c=i.memoizedState,g=g(j,c),g=g==null?c:b({},c,g),i.memoizedState=g,i.lanes===0&&(i.updateQueue.baseState=g)}var d1={enqueueSetState:function(i,c,g){i=i._reactInternals;var j=ma(),E=go(j);E.payload=c,g!=null&&(E.callback=g),c=xo(i,E,j),c!==null&&(Wn(c,i,j),xh(c,i,j))},enqueueReplaceState:function(i,c,g){i=i._reactInternals;var j=ma(),E=go(j);E.tag=1,E.payload=c,g!=null&&(E.callback=g),c=xo(i,E,j),c!==null&&(Wn(c,i,j),xh(c,i,j))},enqueueForceUpdate:function(i,c){i=i._reactInternals;var g=ma(),j=go(g);j.tag=2,c!=null&&(j.callback=c),c=xo(i,j,g),c!==null&&(Wn(c,i,g),xh(c,i,g))}};function nC(i,c,g,j,E,k,Y){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(j,k,Y):c.prototype&&c.prototype.isPureReactComponent?!C(g,j)||!C(E,k):!0}function aC(i,c,g,j){i=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,j),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,j),c.state!==i&&d1.enqueueReplaceState(c,c.state,null)}function Ec(i,c){var g=c;if("ref"in c){g={};for(var j in c)j!=="ref"&&(g[j]=c[j])}if(i=i.defaultProps){g===c&&(g=b({},g));for(var E in i)g[E]===void 0&&(g[E]=i[E])}return g}function iC(i){Hm(i)}function lC(i){console.error(i)}function oC(i){Hm(i)}function gf(i,c){try{var g=i.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(j){setTimeout(function(){throw j})}}function cC(i,c,g){try{var j=i.onCaughtError;j(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function u1(i,c,g){return g=go(g),g.tag=3,g.payload={element:null},g.callback=function(){gf(i,c)},g}function dC(i){return i=go(i),i.tag=3,i}function uC(i,c,g,j){var E=g.type.getDerivedStateFromError;if(typeof E=="function"){var k=j.value;i.payload=function(){return E(k)},i.callback=function(){cC(c,g,j)}}var Y=g.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(i.callback=function(){cC(c,g,j),typeof E!="function"&&(jo===null?jo=new Set([this]):jo.add(this));var te=j.stack;this.componentDidCatch(j.value,{componentStack:te!==null?te:""})})}function L9(i,c,g,j,E){if(g.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){if(c=g.alternate,c!==null&&Ed(c,g,E,!0),g=ca.current,g!==null){switch(g.tag){case 31:case 13:return _a===null?Ef():g.alternate===null&&ws===0&&(ws=3),g.flags&=-257,g.flags|=65536,g.lanes=E,j===tf?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([j]):c.add(j),M1(i,j,E)),!1;case 22:return g.flags|=65536,j===tf?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([j])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([j]):g.add(j)),M1(i,j,E)),!1}throw Error(n(435,g.tag))}return M1(i,j,E),Ef(),!1}if(cr)return c=ca.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=E,j!==Oy&&(i=Error(n(422),{cause:j}),uh(Da(i,g)))):(j!==Oy&&(c=Error(n(423),{cause:j}),uh(Da(c,g))),i=i.current.alternate,i.flags|=65536,E&=-E,i.lanes|=E,j=Da(j,g),E=u1(i.stateNode,j,E),zy(i,E),ws!==4&&(ws=2)),!1;var k=Error(n(520),{cause:j});if(k=Da(k,g),Oh===null?Oh=[k]:Oh.push(k),ws!==4&&(ws=2),c===null)return!0;j=Da(j,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,i=E&-E,g.lanes|=i,i=u1(g.stateNode,j,i),zy(g,i),!1;case 1:if(c=g.type,k=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(jo===null||!jo.has(k))))return g.flags|=65536,E&=-E,g.lanes|=E,E=dC(E),uC(E,i,g,j),zy(g,E),!1}g=g.return}while(g!==null);return!1}var h1=Error(n(461)),zs=!1;function xn(i,c,g,j){c.child=i===null?g4(c,null,g,j):Cc(c,i.child,g,j)}function hC(i,c,g,j,E){g=g.render;var k=c.ref;if("ref"in j){var Y={};for(var te in j)te!=="ref"&&(Y[te]=j[te])}else Y=j;return Nc(c),j=Yy(i,c,g,Y,k,E),te=Wy(),i!==null&&!zs?(Xy(i,c,E),ml(i,c,E)):(cr&&te&&Ty(c),c.flags|=1,xn(i,c,j,E),c.child)}function mC(i,c,g,j,E){if(i===null){var k=g.type;return typeof k=="function"&&!Cy(k)&&k.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=k,fC(i,c,k,j,E)):(i=Xm(g.type,null,j,c,c.mode,E),i.ref=c.ref,i.return=c,c.child=i)}if(k=i.child,!v1(i,E)){var Y=k.memoizedProps;if(g=g.compare,g=g!==null?g:C,g(Y,j)&&i.ref===c.ref)return ml(i,c,E)}return c.flags|=1,i=ll(k,j),i.ref=c.ref,i.return=c,c.child=i}function fC(i,c,g,j,E){if(i!==null){var k=i.memoizedProps;if(C(k,j)&&i.ref===c.ref)if(zs=!1,c.pendingProps=j=k,v1(i,E))(i.flags&131072)!==0&&(zs=!0);else return c.lanes=i.lanes,ml(i,c,E)}return m1(i,c,g,j,E)}function gC(i,c,g,j){var E=j.children,k=i!==null?i.memoizedState:null;if(i===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),j.mode==="hidden"){if((c.flags&128)!==0){if(k=k!==null?k.baseLanes|g:g,i!==null){for(j=c.child=i.child,E=0;j!==null;)E=E|j.lanes|j.childLanes,j=j.sibling;j=E&~k}else j=0,c.child=null;return xC(i,c,k,g,j)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},i!==null&&Jm(c,k!==null?k.cachePool:null),k!==null?y4(c,k):$y(),b4(c);else return j=c.lanes=536870912,xC(i,c,k!==null?k.baseLanes|g:g,g,j)}else k!==null?(Jm(c,k.cachePool),y4(c,k),yo(),c.memoizedState=null):(i!==null&&Jm(c,null),$y(),yo());return xn(i,c,E,g),c.child}function wh(i,c){return i!==null&&i.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function xC(i,c,g,j,E){var k=Ly();return k=k===null?null:{parent:Bs._currentValue,pool:k},c.memoizedState={baseLanes:g,cachePool:k},i!==null&&Jm(c,null),$y(),b4(c),i!==null&&Ed(i,c,j,!0),c.childLanes=E,null}function xf(i,c){return c=yf({mode:c.mode,children:c.children},i.mode),c.ref=i.ref,i.child=c,c.return=i,c}function pC(i,c,g){return Cc(c,i.child,null,g),i=xf(c,c.pendingProps),i.flags|=2,da(c),c.memoizedState=null,i}function F9(i,c,g){var j=c.pendingProps,E=(c.flags&128)!==0;if(c.flags&=-129,i===null){if(cr){if(j.mode==="hidden")return i=xf(c,j),c.lanes=536870912,wh(null,i);if(Hy(c),(i=Jr)?(i=DA(i,ka),i=i!==null&&i.data==="&"?i:null,i!==null&&(c.memoizedState={dehydrated:i,treeContext:co!==null?{id:ki,overflow:_i}:null,retryLane:536870912,hydrationErrors:null},g=e4(i),g.return=c,c.child=g,fn=c,Jr=null)):i=null,i===null)throw ho(c);return c.lanes=536870912,null}return xf(c,j)}var k=i.memoizedState;if(k!==null){var Y=k.dehydrated;if(Hy(c),E)if(c.flags&256)c.flags&=-257,c=pC(i,c,g);else if(c.memoizedState!==null)c.child=i.child,c.flags|=128,c=null;else throw Error(n(558));else if(zs||Ed(i,c,g,!1),E=(g&i.childLanes)!==0,zs||E){if(j=Hr,j!==null&&(Y=ei(j,g),Y!==0&&Y!==k.retryLane))throw k.retryLane=Y,pc(i,Y),Wn(j,i,Y),h1;Ef(),c=pC(i,c,g)}else i=k.treeContext,Jr=Ia(Y.nextSibling),fn=c,cr=!0,uo=null,ka=!1,i!==null&&s4(c,i),c=xf(c,j),c.flags|=4096;return c}return i=ll(i.child,{mode:j.mode,children:j.children}),i.ref=c.ref,c.child=i,i.return=c,i}function pf(i,c){var g=c.ref;if(g===null)i!==null&&i.ref!==null&&(c.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(n(284));(i===null||i.ref!==g)&&(c.flags|=4194816)}}function m1(i,c,g,j,E){return Nc(c),g=Yy(i,c,g,j,void 0,E),j=Wy(),i!==null&&!zs?(Xy(i,c,E),ml(i,c,E)):(cr&&j&&Ty(c),c.flags|=1,xn(i,c,g,E),c.child)}function yC(i,c,g,j,E,k){return Nc(c),c.updateQueue=null,g=N4(c,j,g,E),v4(i),j=Wy(),i!==null&&!zs?(Xy(i,c,k),ml(i,c,k)):(cr&&j&&Ty(c),c.flags|=1,xn(i,c,g,k),c.child)}function bC(i,c,g,j,E){if(Nc(c),c.stateNode===null){var k=wd,Y=g.contextType;typeof Y=="object"&&Y!==null&&(k=gn(Y)),k=new g(j,k),c.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=d1,c.stateNode=k,k._reactInternals=c,k=c.stateNode,k.props=j,k.state=c.memoizedState,k.refs={},By(c),Y=g.contextType,k.context=typeof Y=="object"&&Y!==null?gn(Y):wd,k.state=c.memoizedState,Y=g.getDerivedStateFromProps,typeof Y=="function"&&(c1(c,g,Y,j),k.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(Y=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),Y!==k.state&&d1.enqueueReplaceState(k,k.state,null),yh(c,j,k,E),ph(),k.state=c.memoizedState),typeof k.componentDidMount=="function"&&(c.flags|=4194308),j=!0}else if(i===null){k=c.stateNode;var te=c.memoizedProps,ye=Ec(g,te);k.props=ye;var _e=k.context,He=g.contextType;Y=wd,typeof He=="object"&&He!==null&&(Y=gn(He));var Xe=g.getDerivedStateFromProps;He=typeof Xe=="function"||typeof k.getSnapshotBeforeUpdate=="function",te=c.pendingProps!==te,He||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(te||_e!==Y)&&aC(c,k,j,Y),fo=!1;var Ie=c.memoizedState;k.state=Ie,yh(c,j,k,E),ph(),_e=c.memoizedState,te||Ie!==_e||fo?(typeof Xe=="function"&&(c1(c,g,Xe,j),_e=c.memoizedState),(ye=fo||nC(c,g,ye,j,Ie,_e,Y))?(He||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(c.flags|=4194308)):(typeof k.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=j,c.memoizedState=_e),k.props=j,k.state=_e,k.context=Y,j=ye):(typeof k.componentDidMount=="function"&&(c.flags|=4194308),j=!1)}else{k=c.stateNode,Uy(i,c),Y=c.memoizedProps,He=Ec(g,Y),k.props=He,Xe=c.pendingProps,Ie=k.context,_e=g.contextType,ye=wd,typeof _e=="object"&&_e!==null&&(ye=gn(_e)),te=g.getDerivedStateFromProps,(_e=typeof te=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(Y!==Xe||Ie!==ye)&&aC(c,k,j,ye),fo=!1,Ie=c.memoizedState,k.state=Ie,yh(c,j,k,E),ph();var Ue=c.memoizedState;Y!==Xe||Ie!==Ue||fo||i!==null&&i.dependencies!==null&&Zm(i.dependencies)?(typeof te=="function"&&(c1(c,g,te,j),Ue=c.memoizedState),(He=fo||nC(c,g,He,j,Ie,Ue,ye)||i!==null&&i.dependencies!==null&&Zm(i.dependencies))?(_e||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(j,Ue,ye),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(j,Ue,ye)),typeof k.componentDidUpdate=="function"&&(c.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof k.componentDidUpdate!="function"||Y===i.memoizedProps&&Ie===i.memoizedState||(c.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||Y===i.memoizedProps&&Ie===i.memoizedState||(c.flags|=1024),c.memoizedProps=j,c.memoizedState=Ue),k.props=j,k.state=Ue,k.context=ye,j=He):(typeof k.componentDidUpdate!="function"||Y===i.memoizedProps&&Ie===i.memoizedState||(c.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||Y===i.memoizedProps&&Ie===i.memoizedState||(c.flags|=1024),j=!1)}return k=j,pf(i,c),j=(c.flags&128)!==0,k||j?(k=c.stateNode,g=j&&typeof g.getDerivedStateFromError!="function"?null:k.render(),c.flags|=1,i!==null&&j?(c.child=Cc(c,i.child,null,E),c.child=Cc(c,null,g,E)):xn(i,c,g,E),c.memoizedState=k.state,i=c.child):i=ml(i,c,E),i}function vC(i,c,g,j){return bc(),c.flags|=256,xn(i,c,g,j),c.child}var f1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function g1(i){return{baseLanes:i,cachePool:c4()}}function x1(i,c,g){return i=i!==null?i.childLanes&~g:0,c&&(i|=ha),i}function NC(i,c,g){var j=c.pendingProps,E=!1,k=(c.flags&128)!==0,Y;if((Y=k)||(Y=i!==null&&i.memoizedState===null?!1:(ks.current&2)!==0),Y&&(E=!0,c.flags&=-129),Y=(c.flags&32)!==0,c.flags&=-33,i===null){if(cr){if(E?po(c):yo(),(i=Jr)?(i=DA(i,ka),i=i!==null&&i.data!=="&"?i:null,i!==null&&(c.memoizedState={dehydrated:i,treeContext:co!==null?{id:ki,overflow:_i}:null,retryLane:536870912,hydrationErrors:null},g=e4(i),g.return=c,c.child=g,fn=c,Jr=null)):i=null,i===null)throw ho(c);return Q1(i)?c.lanes=32:c.lanes=536870912,null}var te=j.children;return j=j.fallback,E?(yo(),E=c.mode,te=yf({mode:"hidden",children:te},E),j=yc(j,E,g,null),te.return=c,j.return=c,te.sibling=j,c.child=te,j=c.child,j.memoizedState=g1(g),j.childLanes=x1(i,Y,g),c.memoizedState=f1,wh(null,j)):(po(c),p1(c,te))}var ye=i.memoizedState;if(ye!==null&&(te=ye.dehydrated,te!==null)){if(k)c.flags&256?(po(c),c.flags&=-257,c=y1(i,c,g)):c.memoizedState!==null?(yo(),c.child=i.child,c.flags|=128,c=null):(yo(),te=j.fallback,E=c.mode,j=yf({mode:"visible",children:j.children},E),te=yc(te,E,g,null),te.flags|=2,j.return=c,te.return=c,j.sibling=te,c.child=j,Cc(c,i.child,null,g),j=c.child,j.memoizedState=g1(g),j.childLanes=x1(i,Y,g),c.memoizedState=f1,c=wh(null,j));else if(po(c),Q1(te)){if(Y=te.nextSibling&&te.nextSibling.dataset,Y)var _e=Y.dgst;Y=_e,j=Error(n(419)),j.stack="",j.digest=Y,uh({value:j,source:null,stack:null}),c=y1(i,c,g)}else if(zs||Ed(i,c,g,!1),Y=(g&i.childLanes)!==0,zs||Y){if(Y=Hr,Y!==null&&(j=ei(Y,g),j!==0&&j!==ye.retryLane))throw ye.retryLane=j,pc(i,j),Wn(Y,i,j),h1;Z1(te)||Ef(),c=y1(i,c,g)}else Z1(te)?(c.flags|=192,c.child=i.child,c=null):(i=ye.treeContext,Jr=Ia(te.nextSibling),fn=c,cr=!0,uo=null,ka=!1,i!==null&&s4(c,i),c=p1(c,j.children),c.flags|=4096);return c}return E?(yo(),te=j.fallback,E=c.mode,ye=i.child,_e=ye.sibling,j=ll(ye,{mode:"hidden",children:j.children}),j.subtreeFlags=ye.subtreeFlags&65011712,_e!==null?te=ll(_e,te):(te=yc(te,E,g,null),te.flags|=2),te.return=c,j.return=c,j.sibling=te,c.child=j,wh(null,j),j=c.child,te=i.child.memoizedState,te===null?te=g1(g):(E=te.cachePool,E!==null?(ye=Bs._currentValue,E=E.parent!==ye?{parent:ye,pool:ye}:E):E=c4(),te={baseLanes:te.baseLanes|g,cachePool:E}),j.memoizedState=te,j.childLanes=x1(i,Y,g),c.memoizedState=f1,wh(i.child,j)):(po(c),g=i.child,i=g.sibling,g=ll(g,{mode:"visible",children:j.children}),g.return=c,g.sibling=null,i!==null&&(Y=c.deletions,Y===null?(c.deletions=[i],c.flags|=16):Y.push(i)),c.child=g,c.memoizedState=null,g)}function p1(i,c){return c=yf({mode:"visible",children:c},i.mode),c.return=i,i.child=c}function yf(i,c){return i=oa(22,i,null,c),i.lanes=0,i}function y1(i,c,g){return Cc(c,i.child,null,g),i=p1(c,c.pendingProps.children),i.flags|=2,c.memoizedState=null,i}function jC(i,c,g){i.lanes|=c;var j=i.alternate;j!==null&&(j.lanes|=c),_y(i.return,c,g)}function b1(i,c,g,j,E,k){var Y=i.memoizedState;Y===null?i.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:j,tail:g,tailMode:E,treeForkCount:k}:(Y.isBackwards=c,Y.rendering=null,Y.renderingStartTime=0,Y.last=j,Y.tail=g,Y.tailMode=E,Y.treeForkCount=k)}function wC(i,c,g){var j=c.pendingProps,E=j.revealOrder,k=j.tail;j=j.children;var Y=ks.current,te=(Y&2)!==0;if(te?(Y=Y&1|2,c.flags|=128):Y&=1,ve(ks,Y),xn(i,c,j,g),j=cr?dh:0,!te&&i!==null&&(i.flags&128)!==0)e:for(i=c.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&jC(i,g,c);else if(i.tag===19)jC(i,g,c);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===c)break e;for(;i.sibling===null;){if(i.return===null||i.return===c)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(E){case"forwards":for(g=c.child,E=null;g!==null;)i=g.alternate,i!==null&&af(i)===null&&(E=g),g=g.sibling;g=E,g===null?(E=c.child,c.child=null):(E=g.sibling,g.sibling=null),b1(c,!1,E,g,k,j);break;case"backwards":case"unstable_legacy-backwards":for(g=null,E=c.child,c.child=null;E!==null;){if(i=E.alternate,i!==null&&af(i)===null){c.child=E;break}i=E.sibling,E.sibling=g,g=E,E=i}b1(c,!0,g,null,k,j);break;case"together":b1(c,!1,null,null,void 0,j);break;default:c.memoizedState=null}return c.child}function ml(i,c,g){if(i!==null&&(c.dependencies=i.dependencies),No|=c.lanes,(g&c.childLanes)===0)if(i!==null){if(Ed(i,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(i!==null&&c.child!==i.child)throw Error(n(153));if(c.child!==null){for(i=c.child,g=ll(i,i.pendingProps),c.child=g,g.return=c;i.sibling!==null;)i=i.sibling,g=g.sibling=ll(i,i.pendingProps),g.return=c;g.sibling=null}return c.child}function v1(i,c){return(i.lanes&c)!==0?!0:(i=i.dependencies,!!(i!==null&&Zm(i)))}function B9(i,c,g){switch(c.tag){case 3:Ve(c,c.stateNode.containerInfo),mo(c,Bs,i.memoizedState.cache),bc();break;case 27:case 5:Ke(c);break;case 4:Ve(c,c.stateNode.containerInfo);break;case 10:mo(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,Hy(c),null;break;case 13:var j=c.memoizedState;if(j!==null)return j.dehydrated!==null?(po(c),c.flags|=128,null):(g&c.child.childLanes)!==0?NC(i,c,g):(po(c),i=ml(i,c,g),i!==null?i.sibling:null);po(c);break;case 19:var E=(i.flags&128)!==0;if(j=(g&c.childLanes)!==0,j||(Ed(i,c,g,!1),j=(g&c.childLanes)!==0),E){if(j)return wC(i,c,g);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),ve(ks,ks.current),j)break;return null;case 22:return c.lanes=0,gC(i,c,g,c.pendingProps);case 24:mo(c,Bs,i.memoizedState.cache)}return ml(i,c,g)}function SC(i,c,g){if(i!==null)if(i.memoizedProps!==c.pendingProps)zs=!0;else{if(!v1(i,g)&&(c.flags&128)===0)return zs=!1,B9(i,c,g);zs=(i.flags&131072)!==0}else zs=!1,cr&&(c.flags&1048576)!==0&&r4(c,dh,c.index);switch(c.lanes=0,c.tag){case 16:e:{var j=c.pendingProps;if(i=wc(c.elementType),c.type=i,typeof i=="function")Cy(i)?(j=Ec(i,j),c.tag=1,c=bC(null,c,i,j,g)):(c.tag=0,c=m1(null,c,i,j,g));else{if(i!=null){var E=i.$$typeof;if(E===$){c.tag=11,c=hC(null,c,i,j,g);break e}else if(E===M){c.tag=14,c=mC(null,c,i,j,g);break e}}throw c=ce(i)||i,Error(n(306,c,""))}}return c;case 0:return m1(i,c,c.type,c.pendingProps,g);case 1:return j=c.type,E=Ec(j,c.pendingProps),bC(i,c,j,E,g);case 3:e:{if(Ve(c,c.stateNode.containerInfo),i===null)throw Error(n(387));j=c.pendingProps;var k=c.memoizedState;E=k.element,Uy(i,c),yh(c,j,null,g);var Y=c.memoizedState;if(j=Y.cache,mo(c,Bs,j),j!==k.cache&&Iy(c,[Bs],g,!0),ph(),j=Y.element,k.isDehydrated)if(k={element:j,isDehydrated:!1,cache:Y.cache},c.updateQueue.baseState=k,c.memoizedState=k,c.flags&256){c=vC(i,c,j,g);break e}else if(j!==E){E=Da(Error(n(424)),c),uh(E),c=vC(i,c,j,g);break e}else{switch(i=c.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Jr=Ia(i.firstChild),fn=c,cr=!0,uo=null,ka=!0,g=g4(c,null,j,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(bc(),j===E){c=ml(i,c,g);break e}xn(i,c,j,g)}c=c.child}return c;case 26:return pf(i,c),i===null?(g=RA(c.type,null,c.pendingProps,null))?c.memoizedState=g:cr||(g=c.type,i=c.pendingProps,j=If(oe.current).createElement(g),j[Yr]=c,j[or]=i,pn(j,g,i),Wr(j),c.stateNode=j):c.memoizedState=RA(c.type,i.memoizedProps,c.pendingProps,i.memoizedState),null;case 27:return Ke(c),i===null&&cr&&(j=c.stateNode=kA(c.type,c.pendingProps,oe.current),fn=c,ka=!0,E=Jr,Ao(c.type)?(J1=E,Jr=Ia(j.firstChild)):Jr=E),xn(i,c,c.pendingProps.children,g),pf(i,c),i===null&&(c.flags|=4194304),c.child;case 5:return i===null&&cr&&((E=j=Jr)&&(j=gL(j,c.type,c.pendingProps,ka),j!==null?(c.stateNode=j,fn=c,Jr=Ia(j.firstChild),ka=!1,E=!0):E=!1),E||ho(c)),Ke(c),E=c.type,k=c.pendingProps,Y=i!==null?i.memoizedProps:null,j=k.children,W1(E,k)?j=null:Y!==null&&W1(E,Y)&&(c.flags|=32),c.memoizedState!==null&&(E=Yy(i,c,O9,null,null,g),Fh._currentValue=E),pf(i,c),xn(i,c,j,g),c.child;case 6:return i===null&&cr&&((i=g=Jr)&&(g=xL(g,c.pendingProps,ka),g!==null?(c.stateNode=g,fn=c,Jr=null,i=!0):i=!1),i||ho(c)),null;case 13:return NC(i,c,g);case 4:return Ve(c,c.stateNode.containerInfo),j=c.pendingProps,i===null?c.child=Cc(c,null,j,g):xn(i,c,j,g),c.child;case 11:return hC(i,c,c.type,c.pendingProps,g);case 7:return xn(i,c,c.pendingProps,g),c.child;case 8:return xn(i,c,c.pendingProps.children,g),c.child;case 12:return xn(i,c,c.pendingProps.children,g),c.child;case 10:return j=c.pendingProps,mo(c,c.type,j.value),xn(i,c,j.children,g),c.child;case 9:return E=c.type._context,j=c.pendingProps.children,Nc(c),E=gn(E),j=j(E),c.flags|=1,xn(i,c,j,g),c.child;case 14:return mC(i,c,c.type,c.pendingProps,g);case 15:return fC(i,c,c.type,c.pendingProps,g);case 19:return wC(i,c,g);case 31:return F9(i,c,g);case 22:return gC(i,c,g,c.pendingProps);case 24:return Nc(c),j=gn(Bs),i===null?(E=Ly(),E===null&&(E=Hr,k=Ry(),E.pooledCache=k,k.refCount++,k!==null&&(E.pooledCacheLanes|=g),E=k),c.memoizedState={parent:j,cache:E},By(c),mo(c,Bs,E)):((i.lanes&g)!==0&&(Uy(i,c),yh(c,null,null,g),ph()),E=i.memoizedState,k=c.memoizedState,E.parent!==j?(E={parent:j,cache:j},c.memoizedState=E,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=E),mo(c,Bs,j)):(j=k.cache,mo(c,Bs,j),j!==E.cache&&Iy(c,[Bs],g,!0))),xn(i,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function fl(i){i.flags|=4}function N1(i,c,g,j,E){if((c=(i.mode&32)!==0)&&(c=!1),c){if(i.flags|=16777216,(E&335544128)===E)if(i.stateNode.complete)i.flags|=8192;else if(ZC())i.flags|=8192;else throw Sc=tf,Fy}else i.flags&=-16777217}function CC(i,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!UA(c))if(ZC())i.flags|=8192;else throw Sc=tf,Fy}function bf(i,c){c!==null&&(i.flags|=4),i.flags&16384&&(c=i.tag!==22?At():536870912,i.lanes|=c,Bd|=c)}function Sh(i,c){if(!cr)switch(i.tailMode){case"hidden":c=i.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?i.tail=null:g.sibling=null;break;case"collapsed":g=i.tail;for(var j=null;g!==null;)g.alternate!==null&&(j=g),g=g.sibling;j===null?c||i.tail===null?i.tail=null:i.tail.sibling=null:j.sibling=null}}function es(i){var c=i.alternate!==null&&i.alternate.child===i.child,g=0,j=0;if(c)for(var E=i.child;E!==null;)g|=E.lanes|E.childLanes,j|=E.subtreeFlags&65011712,j|=E.flags&65011712,E.return=i,E=E.sibling;else for(E=i.child;E!==null;)g|=E.lanes|E.childLanes,j|=E.subtreeFlags,j|=E.flags,E.return=i,E=E.sibling;return i.subtreeFlags|=j,i.childLanes=g,c}function U9(i,c,g){var j=c.pendingProps;switch(Dy(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return es(c),null;case 1:return es(c),null;case 3:return g=c.stateNode,j=null,i!==null&&(j=i.memoizedState.cache),c.memoizedState.cache!==j&&(c.flags|=2048),dl(Bs),Ce(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(Ad(c)?fl(c):i===null||i.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Py())),es(c),null;case 26:var E=c.type,k=c.memoizedState;return i===null?(fl(c),k!==null?(es(c),CC(c,k)):(es(c),N1(c,E,null,j,g))):k?k!==i.memoizedState?(fl(c),es(c),CC(c,k)):(es(c),c.flags&=-16777217):(i=i.memoizedProps,i!==j&&fl(c),es(c),N1(c,E,i,j,g)),null;case 27:if(xe(c),g=oe.current,E=c.type,i!==null&&c.stateNode!=null)i.memoizedProps!==j&&fl(c);else{if(!j){if(c.stateNode===null)throw Error(n(166));return es(c),null}i=fe.current,Ad(c)?n4(c):(i=kA(E,j,g),c.stateNode=i,fl(c))}return es(c),null;case 5:if(xe(c),E=c.type,i!==null&&c.stateNode!=null)i.memoizedProps!==j&&fl(c);else{if(!j){if(c.stateNode===null)throw Error(n(166));return es(c),null}if(k=fe.current,Ad(c))n4(c);else{var Y=If(oe.current);switch(k){case 1:k=Y.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:k=Y.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":k=Y.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":k=Y.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":k=Y.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof j.is=="string"?Y.createElement("select",{is:j.is}):Y.createElement("select"),j.multiple?k.multiple=!0:j.size&&(k.size=j.size);break;default:k=typeof j.is=="string"?Y.createElement(E,{is:j.is}):Y.createElement(E)}}k[Yr]=c,k[or]=j;e:for(Y=c.child;Y!==null;){if(Y.tag===5||Y.tag===6)k.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===c)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===c)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}c.stateNode=k;e:switch(pn(k,E,j),E){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}j&&fl(c)}}return es(c),N1(c,c.type,i===null?null:i.memoizedProps,c.pendingProps,g),null;case 6:if(i&&c.stateNode!=null)i.memoizedProps!==j&&fl(c);else{if(typeof j!="string"&&c.stateNode===null)throw Error(n(166));if(i=oe.current,Ad(c)){if(i=c.stateNode,g=c.memoizedProps,j=null,E=fn,E!==null)switch(E.tag){case 27:case 5:j=E.memoizedProps}i[Yr]=c,i=!!(i.nodeValue===g||j!==null&&j.suppressHydrationWarning===!0||NA(i.nodeValue,g)),i||ho(c,!0)}else i=If(i).createTextNode(j),i[Yr]=c,c.stateNode=i}return es(c),null;case 31:if(g=c.memoizedState,i===null||i.memoizedState!==null){if(j=Ad(c),g!==null){if(i===null){if(!j)throw Error(n(318));if(i=c.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Yr]=c}else bc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;es(c),i=!1}else g=Py(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),i=!0;if(!i)return c.flags&256?(da(c),c):(da(c),null);if((c.flags&128)!==0)throw Error(n(558))}return es(c),null;case 13:if(j=c.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(E=Ad(c),j!==null&&j.dehydrated!==null){if(i===null){if(!E)throw Error(n(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[Yr]=c}else bc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;es(c),E=!1}else E=Py(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=E),E=!0;if(!E)return c.flags&256?(da(c),c):(da(c),null)}return da(c),(c.flags&128)!==0?(c.lanes=g,c):(g=j!==null,i=i!==null&&i.memoizedState!==null,g&&(j=c.child,E=null,j.alternate!==null&&j.alternate.memoizedState!==null&&j.alternate.memoizedState.cachePool!==null&&(E=j.alternate.memoizedState.cachePool.pool),k=null,j.memoizedState!==null&&j.memoizedState.cachePool!==null&&(k=j.memoizedState.cachePool.pool),k!==E&&(j.flags|=2048)),g!==i&&g&&(c.child.flags|=8192),bf(c,c.updateQueue),es(c),null);case 4:return Ce(),i===null&&$1(c.stateNode.containerInfo),es(c),null;case 10:return dl(c.type),es(c),null;case 19:if(ae(ks),j=c.memoizedState,j===null)return es(c),null;if(E=(c.flags&128)!==0,k=j.rendering,k===null)if(E)Sh(j,!1);else{if(ws!==0||i!==null&&(i.flags&128)!==0)for(i=c.child;i!==null;){if(k=af(i),k!==null){for(c.flags|=128,Sh(j,!1),i=k.updateQueue,c.updateQueue=i,bf(c,i),c.subtreeFlags=0,i=g,g=c.child;g!==null;)JS(g,i),g=g.sibling;return ve(ks,ks.current&1|2),cr&&ol(c,j.treeForkCount),c.child}i=i.sibling}j.tail!==null&&ft()>Sf&&(c.flags|=128,E=!0,Sh(j,!1),c.lanes=4194304)}else{if(!E)if(i=af(k),i!==null){if(c.flags|=128,E=!0,i=i.updateQueue,c.updateQueue=i,bf(c,i),Sh(j,!0),j.tail===null&&j.tailMode==="hidden"&&!k.alternate&&!cr)return es(c),null}else 2*ft()-j.renderingStartTime>Sf&&g!==536870912&&(c.flags|=128,E=!0,Sh(j,!1),c.lanes=4194304);j.isBackwards?(k.sibling=c.child,c.child=k):(i=j.last,i!==null?i.sibling=k:c.child=k,j.last=k)}return j.tail!==null?(i=j.tail,j.rendering=i,j.tail=i.sibling,j.renderingStartTime=ft(),i.sibling=null,g=ks.current,ve(ks,E?g&1|2:g&1),cr&&ol(c,j.treeForkCount),i):(es(c),null);case 22:case 23:return da(c),qy(),j=c.memoizedState!==null,i!==null?i.memoizedState!==null!==j&&(c.flags|=8192):j&&(c.flags|=8192),j?(g&536870912)!==0&&(c.flags&128)===0&&(es(c),c.subtreeFlags&6&&(c.flags|=8192)):es(c),g=c.updateQueue,g!==null&&bf(c,g.retryQueue),g=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(g=i.memoizedState.cachePool.pool),j=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(j=c.memoizedState.cachePool.pool),j!==g&&(c.flags|=2048),i!==null&&ae(jc),null;case 24:return g=null,i!==null&&(g=i.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),dl(Bs),es(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function z9(i,c){switch(Dy(c),c.tag){case 1:return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 3:return dl(Bs),Ce(),i=c.flags,(i&65536)!==0&&(i&128)===0?(c.flags=i&-65537|128,c):null;case 26:case 27:case 5:return xe(c),null;case 31:if(c.memoizedState!==null){if(da(c),c.alternate===null)throw Error(n(340));bc()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 13:if(da(c),i=c.memoizedState,i!==null&&i.dehydrated!==null){if(c.alternate===null)throw Error(n(340));bc()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 19:return ae(ks),null;case 4:return Ce(),null;case 10:return dl(c.type),null;case 22:case 23:return da(c),qy(),i!==null&&ae(jc),i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 24:return dl(Bs),null;case 25:return null;default:return null}}function AC(i,c){switch(Dy(c),c.tag){case 3:dl(Bs),Ce();break;case 26:case 27:case 5:xe(c);break;case 4:Ce();break;case 31:c.memoizedState!==null&&da(c);break;case 13:da(c);break;case 19:ae(ks);break;case 10:dl(c.type);break;case 22:case 23:da(c),qy(),i!==null&&ae(jc);break;case 24:dl(Bs)}}function Ch(i,c){try{var g=c.updateQueue,j=g!==null?g.lastEffect:null;if(j!==null){var E=j.next;g=E;do{if((g.tag&i)===i){j=void 0;var k=g.create,Y=g.inst;j=k(),Y.destroy=j}g=g.next}while(g!==E)}}catch(te){kr(c,c.return,te)}}function bo(i,c,g){try{var j=c.updateQueue,E=j!==null?j.lastEffect:null;if(E!==null){var k=E.next;j=k;do{if((j.tag&i)===i){var Y=j.inst,te=Y.destroy;if(te!==void 0){Y.destroy=void 0,E=c;var ye=g,_e=te;try{_e()}catch(He){kr(E,ye,He)}}}j=j.next}while(j!==k)}}catch(He){kr(c,c.return,He)}}function EC(i){var c=i.updateQueue;if(c!==null){var g=i.stateNode;try{p4(c,g)}catch(j){kr(i,i.return,j)}}}function TC(i,c,g){g.props=Ec(i.type,i.memoizedProps),g.state=i.memoizedState;try{g.componentWillUnmount()}catch(j){kr(i,c,j)}}function Ah(i,c){try{var g=i.ref;if(g!==null){switch(i.tag){case 26:case 27:case 5:var j=i.stateNode;break;case 30:j=i.stateNode;break;default:j=i.stateNode}typeof g=="function"?i.refCleanup=g(j):g.current=j}}catch(E){kr(i,c,E)}}function Ii(i,c){var g=i.ref,j=i.refCleanup;if(g!==null)if(typeof j=="function")try{j()}catch(E){kr(i,c,E)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(E){kr(i,c,E)}else g.current=null}function DC(i){var c=i.type,g=i.memoizedProps,j=i.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":g.autoFocus&&j.focus();break e;case"img":g.src?j.src=g.src:g.srcSet&&(j.srcset=g.srcSet)}}catch(E){kr(i,i.return,E)}}function j1(i,c,g){try{var j=i.stateNode;cL(j,i.type,g,c),j[or]=c}catch(E){kr(i,i.return,E)}}function OC(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ao(i.type)||i.tag===4}function w1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||OC(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ao(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function S1(i,c,g){var j=i.tag;if(j===5||j===6)i=i.stateNode,c?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(i,c):(c=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,c.appendChild(i),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=zn));else if(j!==4&&(j===27&&Ao(i.type)&&(g=i.stateNode,c=null),i=i.child,i!==null))for(S1(i,c,g),i=i.sibling;i!==null;)S1(i,c,g),i=i.sibling}function vf(i,c,g){var j=i.tag;if(j===5||j===6)i=i.stateNode,c?g.insertBefore(i,c):g.appendChild(i);else if(j!==4&&(j===27&&Ao(i.type)&&(g=i.stateNode),i=i.child,i!==null))for(vf(i,c,g),i=i.sibling;i!==null;)vf(i,c,g),i=i.sibling}function PC(i){var c=i.stateNode,g=i.memoizedProps;try{for(var j=i.type,E=c.attributes;E.length;)c.removeAttributeNode(E[0]);pn(c,j,g),c[Yr]=i,c[or]=g}catch(k){kr(i,i.return,k)}}var gl=!1,Vs=!1,C1=!1,kC=typeof WeakSet=="function"?WeakSet:Set,an=null;function V9(i,c){if(i=i.containerInfo,G1=zf,i=Z(i),ee(i)){if("selectionStart"in i)var g={start:i.selectionStart,end:i.selectionEnd};else e:{g=(g=i.ownerDocument)&&g.defaultView||window;var j=g.getSelection&&g.getSelection();if(j&&j.rangeCount!==0){g=j.anchorNode;var E=j.anchorOffset,k=j.focusNode;j=j.focusOffset;try{g.nodeType,k.nodeType}catch{g=null;break e}var Y=0,te=-1,ye=-1,_e=0,He=0,Xe=i,Ie=null;t:for(;;){for(var Ue;Xe!==g||E!==0&&Xe.nodeType!==3||(te=Y+E),Xe!==k||j!==0&&Xe.nodeType!==3||(ye=Y+j),Xe.nodeType===3&&(Y+=Xe.nodeValue.length),(Ue=Xe.firstChild)!==null;)Ie=Xe,Xe=Ue;for(;;){if(Xe===i)break t;if(Ie===g&&++_e===E&&(te=Y),Ie===k&&++He===j&&(ye=Y),(Ue=Xe.nextSibling)!==null)break;Xe=Ie,Ie=Xe.parentNode}Xe=Ue}g=te===-1||ye===-1?null:{start:te,end:ye}}else g=null}g=g||{start:0,end:0}}else g=null;for(Y1={focusedElem:i,selectionRange:g},zf=!1,an=c;an!==null;)if(c=an,i=c.child,(c.subtreeFlags&1028)!==0&&i!==null)i.return=c,an=i;else for(;an!==null;){switch(c=an,k=c.alternate,i=c.flags,c.tag){case 0:if((i&4)!==0&&(i=c.updateQueue,i=i!==null?i.events:null,i!==null))for(g=0;g<i.length;g++)E=i[g],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&k!==null){i=void 0,g=c,E=k.memoizedProps,k=k.memoizedState,j=g.stateNode;try{var bt=Ec(g.type,E);i=j.getSnapshotBeforeUpdate(bt,k),j.__reactInternalSnapshotBeforeUpdate=i}catch(kt){kr(g,g.return,kt)}}break;case 3:if((i&1024)!==0){if(i=c.stateNode.containerInfo,g=i.nodeType,g===9)K1(i);else if(g===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":K1(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=c.sibling,i!==null){i.return=c.return,an=i;break}an=c.return}}function _C(i,c,g){var j=g.flags;switch(g.tag){case 0:case 11:case 15:pl(i,g),j&4&&Ch(5,g);break;case 1:if(pl(i,g),j&4)if(i=g.stateNode,c===null)try{i.componentDidMount()}catch(Y){kr(g,g.return,Y)}else{var E=Ec(g.type,c.memoizedProps);c=c.memoizedState;try{i.componentDidUpdate(E,c,i.__reactInternalSnapshotBeforeUpdate)}catch(Y){kr(g,g.return,Y)}}j&64&&EC(g),j&512&&Ah(g,g.return);break;case 3:if(pl(i,g),j&64&&(i=g.updateQueue,i!==null)){if(c=null,g.child!==null)switch(g.child.tag){case 27:case 5:c=g.child.stateNode;break;case 1:c=g.child.stateNode}try{p4(i,c)}catch(Y){kr(g,g.return,Y)}}break;case 27:c===null&&j&4&&PC(g);case 26:case 5:pl(i,g),c===null&&j&4&&DC(g),j&512&&Ah(g,g.return);break;case 12:pl(i,g);break;case 31:pl(i,g),j&4&&MC(i,g);break;case 13:pl(i,g),j&4&&LC(i,g),j&64&&(i=g.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(g=Z9.bind(null,g),pL(i,g))));break;case 22:if(j=g.memoizedState!==null||gl,!j){c=c!==null&&c.memoizedState!==null||Vs,E=gl;var k=Vs;gl=j,(Vs=c)&&!k?yl(i,g,(g.subtreeFlags&8772)!==0):pl(i,g),gl=E,Vs=k}break;case 30:break;default:pl(i,g)}}function IC(i){var c=i.alternate;c!==null&&(i.alternate=null,IC(c)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(c=i.stateNode,c!==null&&yt(c)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ls=null,qn=!1;function xl(i,c,g){for(g=g.child;g!==null;)RC(i,c,g),g=g.sibling}function RC(i,c,g){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(_t,g)}catch{}switch(g.tag){case 26:Vs||Ii(g,c),xl(i,c,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Vs||Ii(g,c);var j=ls,E=qn;Ao(g.type)&&(ls=g.stateNode,qn=!1),xl(i,c,g),Rh(g.stateNode),ls=j,qn=E;break;case 5:Vs||Ii(g,c);case 6:if(j=ls,E=qn,ls=null,xl(i,c,g),ls=j,qn=E,ls!==null)if(qn)try{(ls.nodeType===9?ls.body:ls.nodeName==="HTML"?ls.ownerDocument.body:ls).removeChild(g.stateNode)}catch(k){kr(g,c,k)}else try{ls.removeChild(g.stateNode)}catch(k){kr(g,c,k)}break;case 18:ls!==null&&(qn?(i=ls,EA(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,g.stateNode),Yd(i)):EA(ls,g.stateNode));break;case 4:j=ls,E=qn,ls=g.stateNode.containerInfo,qn=!0,xl(i,c,g),ls=j,qn=E;break;case 0:case 11:case 14:case 15:bo(2,g,c),Vs||bo(4,g,c),xl(i,c,g);break;case 1:Vs||(Ii(g,c),j=g.stateNode,typeof j.componentWillUnmount=="function"&&TC(g,c,j)),xl(i,c,g);break;case 21:xl(i,c,g);break;case 22:Vs=(j=Vs)||g.memoizedState!==null,xl(i,c,g),Vs=j;break;default:xl(i,c,g)}}function MC(i,c){if(c.memoizedState===null&&(i=c.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Yd(i)}catch(g){kr(c,c.return,g)}}}function LC(i,c){if(c.memoizedState===null&&(i=c.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Yd(i)}catch(g){kr(c,c.return,g)}}function $9(i){switch(i.tag){case 31:case 13:case 19:var c=i.stateNode;return c===null&&(c=i.stateNode=new kC),c;case 22:return i=i.stateNode,c=i._retryCache,c===null&&(c=i._retryCache=new kC),c;default:throw Error(n(435,i.tag))}}function Nf(i,c){var g=$9(i);c.forEach(function(j){if(!g.has(j)){g.add(j);var E=Q9.bind(null,i,j);j.then(E,E)}})}function Hn(i,c){var g=c.deletions;if(g!==null)for(var j=0;j<g.length;j++){var E=g[j],k=i,Y=c,te=Y;e:for(;te!==null;){switch(te.tag){case 27:if(Ao(te.type)){ls=te.stateNode,qn=!1;break e}break;case 5:ls=te.stateNode,qn=!1;break e;case 3:case 4:ls=te.stateNode.containerInfo,qn=!0;break e}te=te.return}if(ls===null)throw Error(n(160));RC(k,Y,E),ls=null,qn=!1,k=E.alternate,k!==null&&(k.return=null),E.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)FC(c,i),c=c.sibling}var li=null;function FC(i,c){var g=i.alternate,j=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Hn(c,i),Gn(i),j&4&&(bo(3,i,i.return),Ch(3,i),bo(5,i,i.return));break;case 1:Hn(c,i),Gn(i),j&512&&(Vs||g===null||Ii(g,g.return)),j&64&&gl&&(i=i.updateQueue,i!==null&&(j=i.callbacks,j!==null&&(g=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=g===null?j:g.concat(j))));break;case 26:var E=li;if(Hn(c,i),Gn(i),j&512&&(Vs||g===null||Ii(g,g.return)),j&4){var k=g!==null?g.memoizedState:null;if(j=i.memoizedState,g===null)if(j===null)if(i.stateNode===null){e:{j=i.type,g=i.memoizedProps,E=E.ownerDocument||E;t:switch(j){case"title":k=E.getElementsByTagName("title")[0],(!k||k[pt]||k[Yr]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=E.createElement(j),E.head.insertBefore(k,E.querySelector("head > title"))),pn(k,j,g),k[Yr]=i,Wr(k),j=k;break e;case"link":var Y=FA("link","href",E).get(j+(g.href||""));if(Y){for(var te=0;te<Y.length;te++)if(k=Y[te],k.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&k.getAttribute("rel")===(g.rel==null?null:g.rel)&&k.getAttribute("title")===(g.title==null?null:g.title)&&k.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){Y.splice(te,1);break t}}k=E.createElement(j),pn(k,j,g),E.head.appendChild(k);break;case"meta":if(Y=FA("meta","content",E).get(j+(g.content||""))){for(te=0;te<Y.length;te++)if(k=Y[te],k.getAttribute("content")===(g.content==null?null:""+g.content)&&k.getAttribute("name")===(g.name==null?null:g.name)&&k.getAttribute("property")===(g.property==null?null:g.property)&&k.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&k.getAttribute("charset")===(g.charSet==null?null:g.charSet)){Y.splice(te,1);break t}}k=E.createElement(j),pn(k,j,g),E.head.appendChild(k);break;default:throw Error(n(468,j))}k[Yr]=i,Wr(k),j=k}i.stateNode=j}else BA(E,i.type,i.stateNode);else i.stateNode=LA(E,j,i.memoizedProps);else k!==j?(k===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):k.count--,j===null?BA(E,i.type,i.stateNode):LA(E,j,i.memoizedProps)):j===null&&i.stateNode!==null&&j1(i,i.memoizedProps,g.memoizedProps)}break;case 27:Hn(c,i),Gn(i),j&512&&(Vs||g===null||Ii(g,g.return)),g!==null&&j&4&&j1(i,i.memoizedProps,g.memoizedProps);break;case 5:if(Hn(c,i),Gn(i),j&512&&(Vs||g===null||Ii(g,g.return)),i.flags&32){E=i.stateNode;try{eo(E,"")}catch(bt){kr(i,i.return,bt)}}j&4&&i.stateNode!=null&&(E=i.memoizedProps,j1(i,E,g!==null?g.memoizedProps:E)),j&1024&&(C1=!0);break;case 6:if(Hn(c,i),Gn(i),j&4){if(i.stateNode===null)throw Error(n(162));j=i.memoizedProps,g=i.stateNode;try{g.nodeValue=j}catch(bt){kr(i,i.return,bt)}}break;case 3:if(Lf=null,E=li,li=Rf(c.containerInfo),Hn(c,i),li=E,Gn(i),j&4&&g!==null&&g.memoizedState.isDehydrated)try{Yd(c.containerInfo)}catch(bt){kr(i,i.return,bt)}C1&&(C1=!1,BC(i));break;case 4:j=li,li=Rf(i.stateNode.containerInfo),Hn(c,i),Gn(i),li=j;break;case 12:Hn(c,i),Gn(i);break;case 31:Hn(c,i),Gn(i),j&4&&(j=i.updateQueue,j!==null&&(i.updateQueue=null,Nf(i,j)));break;case 13:Hn(c,i),Gn(i),i.child.flags&8192&&i.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(wf=ft()),j&4&&(j=i.updateQueue,j!==null&&(i.updateQueue=null,Nf(i,j)));break;case 22:E=i.memoizedState!==null;var ye=g!==null&&g.memoizedState!==null,_e=gl,He=Vs;if(gl=_e||E,Vs=He||ye,Hn(c,i),Vs=He,gl=_e,Gn(i),j&8192)e:for(c=i.stateNode,c._visibility=E?c._visibility&-2:c._visibility|1,E&&(g===null||ye||gl||Vs||Tc(i)),g=null,c=i;;){if(c.tag===5||c.tag===26){if(g===null){ye=g=c;try{if(k=ye.stateNode,E)Y=k.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{te=ye.stateNode;var Xe=ye.memoizedProps.style,Ie=Xe!=null&&Xe.hasOwnProperty("display")?Xe.display:null;te.style.display=Ie==null||typeof Ie=="boolean"?"":(""+Ie).trim()}}catch(bt){kr(ye,ye.return,bt)}}}else if(c.tag===6){if(g===null){ye=c;try{ye.stateNode.nodeValue=E?"":ye.memoizedProps}catch(bt){kr(ye,ye.return,bt)}}}else if(c.tag===18){if(g===null){ye=c;try{var Ue=ye.stateNode;E?TA(Ue,!0):TA(ye.stateNode,!1)}catch(bt){kr(ye,ye.return,bt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===i)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break e;for(;c.sibling===null;){if(c.return===null||c.return===i)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}j&4&&(j=i.updateQueue,j!==null&&(g=j.retryQueue,g!==null&&(j.retryQueue=null,Nf(i,g))));break;case 19:Hn(c,i),Gn(i),j&4&&(j=i.updateQueue,j!==null&&(i.updateQueue=null,Nf(i,j)));break;case 30:break;case 21:break;default:Hn(c,i),Gn(i)}}function Gn(i){var c=i.flags;if(c&2){try{for(var g,j=i.return;j!==null;){if(OC(j)){g=j;break}j=j.return}if(g==null)throw Error(n(160));switch(g.tag){case 27:var E=g.stateNode,k=w1(i);vf(i,k,E);break;case 5:var Y=g.stateNode;g.flags&32&&(eo(Y,""),g.flags&=-33);var te=w1(i);vf(i,te,Y);break;case 3:case 4:var ye=g.stateNode.containerInfo,_e=w1(i);S1(i,_e,ye);break;default:throw Error(n(161))}}catch(He){kr(i,i.return,He)}i.flags&=-3}c&4096&&(i.flags&=-4097)}function BC(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var c=i;BC(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),i=i.sibling}}function pl(i,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)_C(i,c.alternate,c),c=c.sibling}function Tc(i){for(i=i.child;i!==null;){var c=i;switch(c.tag){case 0:case 11:case 14:case 15:bo(4,c,c.return),Tc(c);break;case 1:Ii(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&TC(c,c.return,g),Tc(c);break;case 27:Rh(c.stateNode);case 26:case 5:Ii(c,c.return),Tc(c);break;case 22:c.memoizedState===null&&Tc(c);break;case 30:Tc(c);break;default:Tc(c)}i=i.sibling}}function yl(i,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var j=c.alternate,E=i,k=c,Y=k.flags;switch(k.tag){case 0:case 11:case 15:yl(E,k,g),Ch(4,k);break;case 1:if(yl(E,k,g),j=k,E=j.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(_e){kr(j,j.return,_e)}if(j=k,E=j.updateQueue,E!==null){var te=j.stateNode;try{var ye=E.shared.hiddenCallbacks;if(ye!==null)for(E.shared.hiddenCallbacks=null,E=0;E<ye.length;E++)x4(ye[E],te)}catch(_e){kr(j,j.return,_e)}}g&&Y&64&&EC(k),Ah(k,k.return);break;case 27:PC(k);case 26:case 5:yl(E,k,g),g&&j===null&&Y&4&&DC(k),Ah(k,k.return);break;case 12:yl(E,k,g);break;case 31:yl(E,k,g),g&&Y&4&&MC(E,k);break;case 13:yl(E,k,g),g&&Y&4&&LC(E,k);break;case 22:k.memoizedState===null&&yl(E,k,g),Ah(k,k.return);break;case 30:break;default:yl(E,k,g)}c=c.sibling}}function A1(i,c){var g=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(g=i.memoizedState.cachePool.pool),i=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(i=c.memoizedState.cachePool.pool),i!==g&&(i!=null&&i.refCount++,g!=null&&hh(g))}function E1(i,c){i=null,c.alternate!==null&&(i=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==i&&(c.refCount++,i!=null&&hh(i))}function oi(i,c,g,j){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)UC(i,c,g,j),c=c.sibling}function UC(i,c,g,j){var E=c.flags;switch(c.tag){case 0:case 11:case 15:oi(i,c,g,j),E&2048&&Ch(9,c);break;case 1:oi(i,c,g,j);break;case 3:oi(i,c,g,j),E&2048&&(i=null,c.alternate!==null&&(i=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==i&&(c.refCount++,i!=null&&hh(i)));break;case 12:if(E&2048){oi(i,c,g,j),i=c.stateNode;try{var k=c.memoizedProps,Y=k.id,te=k.onPostCommit;typeof te=="function"&&te(Y,c.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(ye){kr(c,c.return,ye)}}else oi(i,c,g,j);break;case 31:oi(i,c,g,j);break;case 13:oi(i,c,g,j);break;case 23:break;case 22:k=c.stateNode,Y=c.alternate,c.memoizedState!==null?k._visibility&2?oi(i,c,g,j):Eh(i,c):k._visibility&2?oi(i,c,g,j):(k._visibility|=2,Md(i,c,g,j,(c.subtreeFlags&10256)!==0||!1)),E&2048&&A1(Y,c);break;case 24:oi(i,c,g,j),E&2048&&E1(c.alternate,c);break;default:oi(i,c,g,j)}}function Md(i,c,g,j,E){for(E=E&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var k=i,Y=c,te=g,ye=j,_e=Y.flags;switch(Y.tag){case 0:case 11:case 15:Md(k,Y,te,ye,E),Ch(8,Y);break;case 23:break;case 22:var He=Y.stateNode;Y.memoizedState!==null?He._visibility&2?Md(k,Y,te,ye,E):Eh(k,Y):(He._visibility|=2,Md(k,Y,te,ye,E)),E&&_e&2048&&A1(Y.alternate,Y);break;case 24:Md(k,Y,te,ye,E),E&&_e&2048&&E1(Y.alternate,Y);break;default:Md(k,Y,te,ye,E)}c=c.sibling}}function Eh(i,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=i,j=c,E=j.flags;switch(j.tag){case 22:Eh(g,j),E&2048&&A1(j.alternate,j);break;case 24:Eh(g,j),E&2048&&E1(j.alternate,j);break;default:Eh(g,j)}c=c.sibling}}var Th=8192;function Ld(i,c,g){if(i.subtreeFlags&Th)for(i=i.child;i!==null;)zC(i,c,g),i=i.sibling}function zC(i,c,g){switch(i.tag){case 26:Ld(i,c,g),i.flags&Th&&i.memoizedState!==null&&DL(g,li,i.memoizedState,i.memoizedProps);break;case 5:Ld(i,c,g);break;case 3:case 4:var j=li;li=Rf(i.stateNode.containerInfo),Ld(i,c,g),li=j;break;case 22:i.memoizedState===null&&(j=i.alternate,j!==null&&j.memoizedState!==null?(j=Th,Th=16777216,Ld(i,c,g),Th=j):Ld(i,c,g));break;default:Ld(i,c,g)}}function VC(i){var c=i.alternate;if(c!==null&&(i=c.child,i!==null)){c.child=null;do c=i.sibling,i.sibling=null,i=c;while(i!==null)}}function Dh(i){var c=i.deletions;if((i.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var j=c[g];an=j,qC(j,i)}VC(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)$C(i),i=i.sibling}function $C(i){switch(i.tag){case 0:case 11:case 15:Dh(i),i.flags&2048&&bo(9,i,i.return);break;case 3:Dh(i);break;case 12:Dh(i);break;case 22:var c=i.stateNode;i.memoizedState!==null&&c._visibility&2&&(i.return===null||i.return.tag!==13)?(c._visibility&=-3,jf(i)):Dh(i);break;default:Dh(i)}}function jf(i){var c=i.deletions;if((i.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var j=c[g];an=j,qC(j,i)}VC(i)}for(i=i.child;i!==null;){switch(c=i,c.tag){case 0:case 11:case 15:bo(8,c,c.return),jf(c);break;case 22:g=c.stateNode,g._visibility&2&&(g._visibility&=-3,jf(c));break;default:jf(c)}i=i.sibling}}function qC(i,c){for(;an!==null;){var g=an;switch(g.tag){case 0:case 11:case 15:bo(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var j=g.memoizedState.cachePool.pool;j!=null&&j.refCount++}break;case 24:hh(g.memoizedState.cache)}if(j=g.child,j!==null)j.return=g,an=j;else e:for(g=i;an!==null;){j=an;var E=j.sibling,k=j.return;if(IC(j),j===g){an=null;break e}if(E!==null){E.return=k,an=E;break e}an=k}}}var q9={getCacheForType:function(i){var c=gn(Bs),g=c.data.get(i);return g===void 0&&(g=i(),c.data.set(i,g)),g},cacheSignal:function(){return gn(Bs).controller.signal}},H9=typeof WeakMap=="function"?WeakMap:Map,Sr=0,Hr=null,Jt=null,sr=0,Pr=0,ua=null,vo=!1,Fd=!1,T1=!1,bl=0,ws=0,No=0,Dc=0,D1=0,ha=0,Bd=0,Oh=null,Yn=null,O1=!1,wf=0,HC=0,Sf=1/0,Cf=null,jo=null,Qs=0,wo=null,Ud=null,vl=0,P1=0,k1=null,GC=null,Ph=0,_1=null;function ma(){return(Sr&2)!==0&&sr!==0?sr&-sr:J.T!==null?B1():as()}function YC(){if(ha===0)if((sr&536870912)===0||cr){var i=ht;ht<<=1,(ht&3932160)===0&&(ht=262144),ha=i}else ha=536870912;return i=ca.current,i!==null&&(i.flags|=32),ha}function Wn(i,c,g){(i===Hr&&(Pr===2||Pr===9)||i.cancelPendingCommit!==null)&&(zd(i,0),So(i,sr,ha,!1)),Un(i,g),((Sr&2)===0||i!==Hr)&&(i===Hr&&((Sr&2)===0&&(Dc|=g),ws===4&&So(i,sr,ha,!1)),Ri(i))}function WC(i,c,g){if((Sr&6)!==0)throw Error(n(327));var j=!g&&(c&127)===0&&(c&i.expiredLanes)===0||ns(i,c),E=j?W9(i,c):R1(i,c,!0),k=j;do{if(E===0){Fd&&!j&&So(i,c,0,!1);break}else{if(g=i.current.alternate,k&&!G9(g)){E=R1(i,c,!1),k=!1;continue}if(E===2){if(k=c,i.errorRecoveryDisabledLanes&k)var Y=0;else Y=i.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){c=Y;e:{var te=i;E=Oh;var ye=te.current.memoizedState.isDehydrated;if(ye&&(zd(te,Y).flags|=256),Y=R1(te,Y,!1),Y!==2){if(T1&&!ye){te.errorRecoveryDisabledLanes|=k,Dc|=k,E=4;break e}k=Yn,Yn=E,k!==null&&(Yn===null?Yn=k:Yn.push.apply(Yn,k))}E=Y}if(k=!1,E!==2)continue}}if(E===1){zd(i,0),So(i,c,0,!0);break}e:{switch(j=i,k=E,k){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:So(j,c,ha,!vo);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(E=wf+300-ft(),10<E)){if(So(j,c,ha,!vo),zr(j,0,!0)!==0)break e;vl=c,j.timeoutHandle=CA(XC.bind(null,j,g,Yn,Cf,O1,c,ha,Dc,Bd,vo,k,"Throttled",-0,0),E);break e}XC(j,g,Yn,Cf,O1,c,ha,Dc,Bd,vo,k,null,-0,0)}}break}while(!0);Ri(i)}function XC(i,c,g,j,E,k,Y,te,ye,_e,He,Xe,Ie,Ue){if(i.timeoutHandle=-1,Xe=c.subtreeFlags,Xe&8192||(Xe&16785408)===16785408){Xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zn},zC(c,k,Xe);var bt=(k&62914560)===k?wf-ft():(k&4194048)===k?HC-ft():0;if(bt=OL(Xe,bt),bt!==null){vl=k,i.cancelPendingCommit=bt(sA.bind(null,i,c,k,g,j,E,Y,te,ye,He,Xe,null,Ie,Ue)),So(i,k,Y,!_e);return}}sA(i,c,k,g,j,E,Y,te,ye)}function G9(i){for(var c=i;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var j=0;j<g.length;j++){var E=g[j],k=E.getSnapshot;E=E.value;try{if(!w(k(),E))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function So(i,c,g,j){c&=~D1,c&=~Dc,i.suspendedLanes|=c,i.pingedLanes&=~c,j&&(i.warmLanes|=c),j=i.expirationTimes;for(var E=c;0<E;){var k=31-lt(E),Y=1<<k;j[k]=-1,E&=~Y}g!==0&&Kl(i,g,c)}function Af(){return(Sr&6)===0?(kh(0),!1):!0}function I1(){if(Jt!==null){if(Pr===0)var i=Jt.return;else i=Jt,cl=vc=null,Ky(i),Pd=null,fh=0,i=Jt;for(;i!==null;)AC(i.alternate,i),i=i.return;Jt=null}}function zd(i,c){var g=i.timeoutHandle;g!==-1&&(i.timeoutHandle=-1,hL(g)),g=i.cancelPendingCommit,g!==null&&(i.cancelPendingCommit=null,g()),vl=0,I1(),Hr=i,Jt=g=ll(i.current,null),sr=c,Pr=0,ua=null,vo=!1,Fd=ns(i,c),T1=!1,Bd=ha=D1=Dc=No=ws=0,Yn=Oh=null,O1=!1,(c&8)!==0&&(c|=c&32);var j=i.entangledLanes;if(j!==0)for(i=i.entanglements,j&=c;0<j;){var E=31-lt(j),k=1<<E;c|=i[E],j&=~k}return bl=c,Gm(),g}function KC(i,c){Vt=null,J.H=jh,c===Od||c===ef?(c=h4(),Pr=3):c===Fy?(c=h4(),Pr=4):Pr=c===h1?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ua=c,Jt===null&&(ws=1,gf(i,Da(c,i.current)))}function ZC(){var i=ca.current;return i===null?!0:(sr&4194048)===sr?_a===null:(sr&62914560)===sr||(sr&536870912)!==0?i===_a:!1}function QC(){var i=J.H;return J.H=jh,i===null?jh:i}function JC(){var i=J.A;return J.A=q9,i}function Ef(){ws=4,vo||(sr&4194048)!==sr&&ca.current!==null||(Fd=!0),(No&134217727)===0&&(Dc&134217727)===0||Hr===null||So(Hr,sr,ha,!1)}function R1(i,c,g){var j=Sr;Sr|=2;var E=QC(),k=JC();(Hr!==i||sr!==c)&&(Cf=null,zd(i,c)),c=!1;var Y=ws;e:do try{if(Pr!==0&&Jt!==null){var te=Jt,ye=ua;switch(Pr){case 8:I1(),Y=6;break e;case 3:case 2:case 9:case 6:ca.current===null&&(c=!0);var _e=Pr;if(Pr=0,ua=null,Vd(i,te,ye,_e),g&&Fd){Y=0;break e}break;default:_e=Pr,Pr=0,ua=null,Vd(i,te,ye,_e)}}Y9(),Y=ws;break}catch(He){KC(i,He)}while(!0);return c&&i.shellSuspendCounter++,cl=vc=null,Sr=j,J.H=E,J.A=k,Jt===null&&(Hr=null,sr=0,Gm()),Y}function Y9(){for(;Jt!==null;)eA(Jt)}function W9(i,c){var g=Sr;Sr|=2;var j=QC(),E=JC();Hr!==i||sr!==c?(Cf=null,Sf=ft()+500,zd(i,c)):Fd=ns(i,c);e:do try{if(Pr!==0&&Jt!==null){c=Jt;var k=ua;t:switch(Pr){case 1:Pr=0,ua=null,Vd(i,c,k,1);break;case 2:case 9:if(d4(k)){Pr=0,ua=null,tA(c);break}c=function(){Pr!==2&&Pr!==9||Hr!==i||(Pr=7),Ri(i)},k.then(c,c);break e;case 3:Pr=7;break e;case 4:Pr=5;break e;case 7:d4(k)?(Pr=0,ua=null,tA(c)):(Pr=0,ua=null,Vd(i,c,k,7));break;case 5:var Y=null;switch(Jt.tag){case 26:Y=Jt.memoizedState;case 5:case 27:var te=Jt;if(Y?UA(Y):te.stateNode.complete){Pr=0,ua=null;var ye=te.sibling;if(ye!==null)Jt=ye;else{var _e=te.return;_e!==null?(Jt=_e,Tf(_e)):Jt=null}break t}}Pr=0,ua=null,Vd(i,c,k,5);break;case 6:Pr=0,ua=null,Vd(i,c,k,6);break;case 8:I1(),ws=6;break e;default:throw Error(n(462))}}X9();break}catch(He){KC(i,He)}while(!0);return cl=vc=null,J.H=j,J.A=E,Sr=g,Jt!==null?0:(Hr=null,sr=0,Gm(),ws)}function X9(){for(;Jt!==null&&!ct();)eA(Jt)}function eA(i){var c=SC(i.alternate,i,bl);i.memoizedProps=i.pendingProps,c===null?Tf(i):Jt=c}function tA(i){var c=i,g=c.alternate;switch(c.tag){case 15:case 0:c=yC(g,c,c.pendingProps,c.type,void 0,sr);break;case 11:c=yC(g,c,c.pendingProps,c.type.render,c.ref,sr);break;case 5:Ky(c);default:AC(g,c),c=Jt=JS(c,bl),c=SC(g,c,bl)}i.memoizedProps=i.pendingProps,c===null?Tf(i):Jt=c}function Vd(i,c,g,j){cl=vc=null,Ky(c),Pd=null,fh=0;var E=c.return;try{if(L9(i,E,c,g,sr)){ws=1,gf(i,Da(g,i.current)),Jt=null;return}}catch(k){if(E!==null)throw Jt=E,k;ws=1,gf(i,Da(g,i.current)),Jt=null;return}c.flags&32768?(cr||j===1?i=!0:Fd||(sr&536870912)!==0?i=!1:(vo=i=!0,(j===2||j===9||j===3||j===6)&&(j=ca.current,j!==null&&j.tag===13&&(j.flags|=16384))),rA(c,i)):Tf(c)}function Tf(i){var c=i;do{if((c.flags&32768)!==0){rA(c,vo);return}i=c.return;var g=U9(c.alternate,c,bl);if(g!==null){Jt=g;return}if(c=c.sibling,c!==null){Jt=c;return}Jt=c=i}while(c!==null);ws===0&&(ws=5)}function rA(i,c){do{var g=z9(i.alternate,i);if(g!==null){g.flags&=32767,Jt=g;return}if(g=i.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(i=i.sibling,i!==null)){Jt=i;return}Jt=i=g}while(i!==null);ws=6,Jt=null}function sA(i,c,g,j,E,k,Y,te,ye){i.cancelPendingCommit=null;do Df();while(Qs!==0);if((Sr&6)!==0)throw Error(n(327));if(c!==null){if(c===i.current)throw Error(n(177));if(k=c.lanes|c.childLanes,k|=wy,Nn(i,g,k,Y,te,ye),i===Hr&&(Jt=Hr=null,sr=0),Ud=c,wo=i,vl=g,P1=k,k1=E,GC=j,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,J9(Ye,function(){return oA(),null})):(i.callbackNode=null,i.callbackPriority=0),j=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||j){j=J.T,J.T=null,E=W.p,W.p=2,Y=Sr,Sr|=4;try{V9(i,c,g)}finally{Sr=Y,W.p=E,J.T=j}}Qs=1,nA(),aA(),iA()}}function nA(){if(Qs===1){Qs=0;var i=wo,c=Ud,g=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||g){g=J.T,J.T=null;var j=W.p;W.p=2;var E=Sr;Sr|=4;try{FC(c,i);var k=Y1,Y=Z(i.containerInfo),te=k.focusedElem,ye=k.selectionRange;if(Y!==te&&te&&te.ownerDocument&&q(te.ownerDocument.documentElement,te)){if(ye!==null&&ee(te)){var _e=ye.start,He=ye.end;if(He===void 0&&(He=_e),"selectionStart"in te)te.selectionStart=_e,te.selectionEnd=Math.min(He,te.value.length);else{var Xe=te.ownerDocument||document,Ie=Xe&&Xe.defaultView||window;if(Ie.getSelection){var Ue=Ie.getSelection(),bt=te.textContent.length,kt=Math.min(ye.start,bt),Lr=ye.end===void 0?kt:Math.min(ye.end,bt);!Ue.extend&&kt>Lr&&(Y=Lr,Lr=kt,kt=Y);var De=R(te,kt),we=R(te,Lr);if(De&&we&&(Ue.rangeCount!==1||Ue.anchorNode!==De.node||Ue.anchorOffset!==De.offset||Ue.focusNode!==we.node||Ue.focusOffset!==we.offset)){var ke=Xe.createRange();ke.setStart(De.node,De.offset),Ue.removeAllRanges(),kt>Lr?(Ue.addRange(ke),Ue.extend(we.node,we.offset)):(ke.setEnd(we.node,we.offset),Ue.addRange(ke))}}}}for(Xe=[],Ue=te;Ue=Ue.parentNode;)Ue.nodeType===1&&Xe.push({element:Ue,left:Ue.scrollLeft,top:Ue.scrollTop});for(typeof te.focus=="function"&&te.focus(),te=0;te<Xe.length;te++){var We=Xe[te];We.element.scrollLeft=We.left,We.element.scrollTop=We.top}}zf=!!G1,Y1=G1=null}finally{Sr=E,W.p=j,J.T=g}}i.current=c,Qs=2}}function aA(){if(Qs===2){Qs=0;var i=wo,c=Ud,g=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||g){g=J.T,J.T=null;var j=W.p;W.p=2;var E=Sr;Sr|=4;try{_C(i,c.alternate,c)}finally{Sr=E,W.p=j,J.T=g}}Qs=3}}function iA(){if(Qs===4||Qs===3){Qs=0,ze();var i=wo,c=Ud,g=vl,j=GC;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Qs=5:(Qs=0,Ud=wo=null,lA(i,i.pendingLanes));var E=i.pendingLanes;if(E===0&&(jo=null),On(g),c=c.stateNode,Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(_t,c,void 0,(c.current.flags&128)===128)}catch{}if(j!==null){c=J.T,E=W.p,W.p=2,J.T=null;try{for(var k=i.onRecoverableError,Y=0;Y<j.length;Y++){var te=j[Y];k(te.value,{componentStack:te.stack})}}finally{J.T=c,W.p=E}}(vl&3)!==0&&Df(),Ri(i),E=i.pendingLanes,(g&261930)!==0&&(E&42)!==0?i===_1?Ph++:(Ph=0,_1=i):Ph=0,kh(0)}}function lA(i,c){(i.pooledCacheLanes&=c)===0&&(c=i.pooledCache,c!=null&&(i.pooledCache=null,hh(c)))}function Df(){return nA(),aA(),iA(),oA()}function oA(){if(Qs!==5)return!1;var i=wo,c=P1;P1=0;var g=On(vl),j=J.T,E=W.p;try{W.p=32>g?32:g,J.T=null,g=k1,k1=null;var k=wo,Y=vl;if(Qs=0,Ud=wo=null,vl=0,(Sr&6)!==0)throw Error(n(331));var te=Sr;if(Sr|=4,$C(k.current),UC(k,k.current,Y,g),Sr=te,kh(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(_t,k)}catch{}return!0}finally{W.p=E,J.T=j,lA(i,c)}}function cA(i,c,g){c=Da(g,c),c=u1(i.stateNode,c,2),i=xo(i,c,2),i!==null&&(Un(i,2),Ri(i))}function kr(i,c,g){if(i.tag===3)cA(i,i,g);else for(;c!==null;){if(c.tag===3){cA(c,i,g);break}else if(c.tag===1){var j=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(jo===null||!jo.has(j))){i=Da(g,i),g=dC(2),j=xo(c,g,2),j!==null&&(uC(g,j,c,i),Un(j,2),Ri(j));break}}c=c.return}}function M1(i,c,g){var j=i.pingCache;if(j===null){j=i.pingCache=new H9;var E=new Set;j.set(c,E)}else E=j.get(c),E===void 0&&(E=new Set,j.set(c,E));E.has(g)||(T1=!0,E.add(g),i=K9.bind(null,i,c,g),c.then(i,i))}function K9(i,c,g){var j=i.pingCache;j!==null&&j.delete(c),i.pingedLanes|=i.suspendedLanes&g,i.warmLanes&=~g,Hr===i&&(sr&g)===g&&(ws===4||ws===3&&(sr&62914560)===sr&&300>ft()-wf?(Sr&2)===0&&zd(i,0):D1|=g,Bd===sr&&(Bd=0)),Ri(i)}function dA(i,c){c===0&&(c=At()),i=pc(i,c),i!==null&&(Un(i,c),Ri(i))}function Z9(i){var c=i.memoizedState,g=0;c!==null&&(g=c.retryLane),dA(i,g)}function Q9(i,c){var g=0;switch(i.tag){case 31:case 13:var j=i.stateNode,E=i.memoizedState;E!==null&&(g=E.retryLane);break;case 19:j=i.stateNode;break;case 22:j=i.stateNode._retryCache;break;default:throw Error(n(314))}j!==null&&j.delete(c),dA(i,g)}function J9(i,c){return Nt(i,c)}var Of=null,$d=null,L1=!1,Pf=!1,F1=!1,Co=0;function Ri(i){i!==$d&&i.next===null&&($d===null?Of=$d=i:$d=$d.next=i),Pf=!0,L1||(L1=!0,tL())}function kh(i,c){if(!F1&&Pf){F1=!0;do for(var g=!1,j=Of;j!==null;){if(i!==0){var E=j.pendingLanes;if(E===0)var k=0;else{var Y=j.suspendedLanes,te=j.pingedLanes;k=(1<<31-lt(42|i)+1)-1,k&=E&~(Y&~te),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(g=!0,fA(j,k))}else k=sr,k=zr(j,j===Hr?k:0,j.cancelPendingCommit!==null||j.timeoutHandle!==-1),(k&3)===0||ns(j,k)||(g=!0,fA(j,k));j=j.next}while(g);F1=!1}}function eL(){uA()}function uA(){Pf=L1=!1;var i=0;Co!==0&&uL()&&(i=Co);for(var c=ft(),g=null,j=Of;j!==null;){var E=j.next,k=hA(j,c);k===0?(j.next=null,g===null?Of=E:g.next=E,E===null&&($d=g)):(g=j,(i!==0||(k&3)!==0)&&(Pf=!0)),j=E}Qs!==0&&Qs!==5||kh(i),Co!==0&&(Co=0)}function hA(i,c){for(var g=i.suspendedLanes,j=i.pingedLanes,E=i.expirationTimes,k=i.pendingLanes&-62914561;0<k;){var Y=31-lt(k),te=1<<Y,ye=E[Y];ye===-1?((te&g)===0||(te&j)!==0)&&(E[Y]=$e(te,c)):ye<=c&&(i.expiredLanes|=te),k&=~te}if(c=Hr,g=sr,g=zr(i,i===c?g:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),j=i.callbackNode,g===0||i===c&&(Pr===2||Pr===9)||i.cancelPendingCommit!==null)return j!==null&&j!==null&&Qe(j),i.callbackNode=null,i.callbackPriority=0;if((g&3)===0||ns(i,g)){if(c=g&-g,c===i.callbackPriority)return c;switch(j!==null&&Qe(j),On(g)){case 2:case 8:g=ys;break;case 32:g=Ye;break;case 268435456:g=Ur;break;default:g=Ye}return j=mA.bind(null,i),g=Nt(g,j),i.callbackPriority=c,i.callbackNode=g,c}return j!==null&&j!==null&&Qe(j),i.callbackPriority=2,i.callbackNode=null,2}function mA(i,c){if(Qs!==0&&Qs!==5)return i.callbackNode=null,i.callbackPriority=0,null;var g=i.callbackNode;if(Df()&&i.callbackNode!==g)return null;var j=sr;return j=zr(i,i===Hr?j:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),j===0?null:(WC(i,j,c),hA(i,ft()),i.callbackNode!=null&&i.callbackNode===g?mA.bind(null,i):null)}function fA(i,c){if(Df())return null;WC(i,c,!0)}function tL(){mL(function(){(Sr&6)!==0?Nt(lr,eL):uA()})}function B1(){if(Co===0){var i=Td;i===0&&(i=Ar,Ar<<=1,(Ar&261888)===0&&(Ar=256)),Co=i}return Co}function gA(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:to(""+i)}function xA(i,c){var g=c.ownerDocument.createElement("input");return g.name=c.name,g.value=c.value,i.id&&g.setAttribute("form",i.id),c.parentNode.insertBefore(g,c),i=new FormData(i),g.parentNode.removeChild(g),i}function rL(i,c,g,j,E){if(c==="submit"&&g&&g.stateNode===E){var k=gA((E[or]||null).action),Y=j.submitter;Y&&(c=(c=Y[or]||null)?gA(c.formAction):Y.getAttribute("formAction"),c!==null&&(k=c,Y=null));var te=new Xs("action","action",null,j,E);i.push({event:te,listeners:[{instance:null,listener:function(){if(j.defaultPrevented){if(Co!==0){var ye=Y?xA(E,Y):new FormData(E);a1(g,{pending:!0,data:ye,method:E.method,action:k},null,ye)}}else typeof k=="function"&&(te.preventDefault(),ye=Y?xA(E,Y):new FormData(E),a1(g,{pending:!0,data:ye,method:E.method,action:k},k,ye))},currentTarget:E}]})}}for(var U1=0;U1<ch.length;U1++){var z1=ch[U1],sL=z1.toLowerCase(),nL=z1[0].toUpperCase()+z1.slice(1);ii(sL,"on"+nL)}ii($n,"onAnimationEnd"),ii(mn,"onAnimationIteration"),ii(Dr,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(Zs,"onTransitionRun"),ii(_n,"onTransitionStart"),ii(oo,"onTransitionCancel"),ii(il,"onTransitionEnd"),sa("onMouseEnter",["mouseout","mouseover"]),sa("onMouseLeave",["mouseout","mouseover"]),sa("onPointerEnter",["pointerout","pointerover"]),sa("onPointerLeave",["pointerout","pointerover"]),Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Er("onBeforeInput",["compositionend","keypress","textInput","paste"]),Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _h="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_h));function pA(i,c){c=(c&4)!==0;for(var g=0;g<i.length;g++){var j=i[g],E=j.event;j=j.listeners;e:{var k=void 0;if(c)for(var Y=j.length-1;0<=Y;Y--){var te=j[Y],ye=te.instance,_e=te.currentTarget;if(te=te.listener,ye!==k&&E.isPropagationStopped())break e;k=te,E.currentTarget=_e;try{k(E)}catch(He){Hm(He)}E.currentTarget=null,k=ye}else for(Y=0;Y<j.length;Y++){if(te=j[Y],ye=te.instance,_e=te.currentTarget,te=te.listener,ye!==k&&E.isPropagationStopped())break e;k=te,E.currentTarget=_e;try{k(E)}catch(He){Hm(He)}E.currentTarget=null,k=ye}}}}function er(i,c){var g=c[Ca];g===void 0&&(g=c[Ca]=new Set);var j=i+"__bubble";g.has(j)||(yA(c,i,2,!1),g.add(j))}function V1(i,c,g){var j=0;c&&(j|=4),yA(g,i,j,c)}var kf="_reactListening"+Math.random().toString(36).slice(2);function $1(i){if(!i[kf]){i[kf]=!0,Je.forEach(function(g){g!=="selectionchange"&&(aL.has(g)||V1(g,!1,i),V1(g,!0,i))});var c=i.nodeType===9?i:i.ownerDocument;c===null||c[kf]||(c[kf]=!0,V1("selectionchange",!1,c))}}function yA(i,c,g,j){switch(YA(c)){case 2:var E=_L;break;case 8:E=IL;break;default:E=nb}g=E.bind(null,c,g,i),E=void 0,!rh||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(E=!0),j?E!==void 0?i.addEventListener(c,g,{capture:!0,passive:E}):i.addEventListener(c,g,!0):E!==void 0?i.addEventListener(c,g,{passive:E}):i.addEventListener(c,g,!1)}function q1(i,c,g,j,E){var k=j;if((c&1)===0&&(c&2)===0&&j!==null)e:for(;;){if(j===null)return;var Y=j.tag;if(Y===3||Y===4){var te=j.stateNode.containerInfo;if(te===E)break;if(Y===4)for(Y=j.return;Y!==null;){var ye=Y.tag;if((ye===3||ye===4)&&Y.stateNode.containerInfo===E)return;Y=Y.return}for(;te!==null;){if(Y=Zt(te),Y===null)return;if(ye=Y.tag,ye===5||ye===6||ye===26||ye===27){j=k=Y;continue e}te=te.parentNode}}j=j.return}Im(function(){var _e=k,He=th(g),Xe=[];e:{var Ie=qm.get(i);if(Ie!==void 0){var Ue=Xs,bt=i;switch(i){case"keypress":if(Ti(g)===0)break e;case"keydown":case"keyup":Ue=bd;break;case"focusin":bt="focus",Ue=ah;break;case"focusout":bt="blur",Ue=ah;break;case"beforeblur":case"afterblur":Ue=ah;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=wr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=pd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=vy;break;case $n:case mn:case Dr:Ue=qt;break;case il:Ue=rl;break;case"scroll":case"scrollend":Ue=Rm;break;case"wheel":Ue=Ny;break;case"copy":case"cut":case"paste":Ue=yd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=Tr;break;case"toggle":case"beforetoggle":Ue=lh}var kt=(c&4)!==0,Lr=!kt&&(i==="scroll"||i==="scrollend"),De=kt?Ie!==null?Ie+"Capture":null:Ie;kt=[];for(var we=_e,ke;we!==null;){var We=we;if(ke=We.stateNode,We=We.tag,We!==5&&We!==26&&We!==27||ke===null||De===null||(We=Lt(we,De),We!=null&&kt.push(Ih(we,We,ke))),Lr)break;we=we.return}0<kt.length&&(Ie=new Ue(Ie,bt,null,g,He),Xe.push({event:Ie,listeners:kt}))}}if((c&7)===0){e:{if(Ie=i==="mouseover"||i==="pointerover",Ue=i==="mouseout"||i==="pointerout",Ie&&g!==cc&&(bt=g.relatedTarget||g.fromElement)&&(Zt(bt)||bt[hn]))break e;if((Ue||Ie)&&(Ie=He.window===He?He:(Ie=He.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,Ue?(bt=g.relatedTarget||g.toElement,Ue=_e,bt=bt?Zt(bt):null,bt!==null&&(Lr=l(bt),kt=bt.tag,bt!==Lr||kt!==5&&kt!==27&&kt!==6)&&(bt=null)):(Ue=null,bt=_e),Ue!==bt)){if(kt=wr,We="onMouseLeave",De="onMouseEnter",we="mouse",(i==="pointerout"||i==="pointerover")&&(kt=Tr,We="onPointerLeave",De="onPointerEnter",we="pointer"),Lr=Ue==null?Ie:qe(Ue),ke=bt==null?Ie:qe(bt),Ie=new kt(We,we+"leave",Ue,g,He),Ie.target=Lr,Ie.relatedTarget=ke,We=null,Zt(He)===_e&&(kt=new kt(De,we+"enter",bt,g,He),kt.target=ke,kt.relatedTarget=Lr,We=kt),Lr=We,Ue&&bt)t:{for(kt=iL,De=Ue,we=bt,ke=0,We=De;We;We=kt(We))ke++;We=0;for(var Et=we;Et;Et=kt(Et))We++;for(;0<ke-We;)De=kt(De),ke--;for(;0<We-ke;)we=kt(we),We--;for(;ke--;){if(De===we||we!==null&&De===we.alternate){kt=De;break t}De=kt(De),we=kt(we)}kt=null}else kt=null;Ue!==null&&bA(Xe,Ie,Ue,kt,!1),bt!==null&&Lr!==null&&bA(Xe,Lr,bt,kt,!0)}}e:{if(Ie=_e?qe(_e):window,Ue=Ie.nodeName&&Ie.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&Ie.type==="file")var pr=la;else if(oh(Ie))if($m)pr=y;else{pr=u;var wt=o}else Ue=Ie.nodeName,!Ue||Ue.toLowerCase()!=="input"||Ie.type!=="checkbox"&&Ie.type!=="radio"?_e&&Vr(_e.elementType)&&(pr=la):pr=m;if(pr&&(pr=pr(i,_e))){ia(Xe,pr,g,He);break e}wt&&wt(i,Ie,_e),i==="focusout"&&_e&&Ie.type==="number"&&_e.memoizedProps.value!=null&&ie(Ie,"number",Ie.value)}switch(wt=_e?qe(_e):window,i){case"focusin":(oh(wt)||wt.contentEditable==="true")&&(be=wt,Ne=_e,Oe=null);break;case"focusout":Oe=Ne=be=null;break;case"mousedown":Re=!0;break;case"contextmenu":case"mouseup":case"dragend":Re=!1,it(Xe,g,He);break;case"selectionchange":if(ue)break;case"keydown":case"keyup":it(Xe,g,He)}var Ht;if(hc)e:{switch(i){case"compositionstart":var nr="onCompositionStart";break e;case"compositionend":nr="onCompositionEnd";break e;case"compositionupdate":nr="onCompositionUpdate";break e}nr=void 0}else lo?Vm(i,g)&&(nr="onCompositionEnd"):i==="keydown"&&g.keyCode===229&&(nr="onCompositionStart");nr&&(zm&&g.locale!=="ko"&&(lo||nr!=="onCompositionStart"?nr==="onCompositionEnd"&&lo&&(Ht=ro()):(ni=He,ai="value"in ni?ni.value:ni.textContent,lo=!0)),wt=_f(_e,nr),0<wt.length&&(nr=new Fm(nr,i,null,g,He),Xe.push({event:nr,listeners:wt}),Ht?nr.data=Ht:(Ht=io(g),Ht!==null&&(nr.data=Ht)))),(Ht=Um?Pi(i,g):Nd(i,g))&&(nr=_f(_e,"onBeforeInput"),0<nr.length&&(wt=new Fm("onBeforeInput","beforeinput",null,g,He),Xe.push({event:wt,listeners:nr}),wt.data=Ht)),rL(Xe,i,_e,g,He)}pA(Xe,c)})}function Ih(i,c,g){return{instance:i,listener:c,currentTarget:g}}function _f(i,c){for(var g=c+"Capture",j=[];i!==null;){var E=i,k=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||k===null||(E=Lt(i,g),E!=null&&j.unshift(Ih(i,E,k)),E=Lt(i,c),E!=null&&j.push(Ih(i,E,k))),i.tag===3)return j;i=i.return}return[]}function iL(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function bA(i,c,g,j,E){for(var k=c._reactName,Y=[];g!==null&&g!==j;){var te=g,ye=te.alternate,_e=te.stateNode;if(te=te.tag,ye!==null&&ye===j)break;te!==5&&te!==26&&te!==27||_e===null||(ye=_e,E?(_e=Lt(g,k),_e!=null&&Y.unshift(Ih(g,_e,ye))):E||(_e=Lt(g,k),_e!=null&&Y.push(Ih(g,_e,ye)))),g=g.return}Y.length!==0&&i.push({event:c,listeners:Y})}var lL=/\r\n?/g,oL=/\u0000|\uFFFD/g;function vA(i){return(typeof i=="string"?i:""+i).replace(lL,`
`).replace(oL,"")}function NA(i,c){return c=vA(c),vA(i)===c}function Mr(i,c,g,j,E,k){switch(g){case"children":typeof j=="string"?c==="body"||c==="textarea"&&j===""||eo(i,j):(typeof j=="number"||typeof j=="bigint")&&c!=="body"&&eo(i,""+j);break;case"className":Ql(i,"class",j);break;case"tabIndex":Ql(i,"tabindex",j);break;case"dir":case"role":case"viewBox":case"width":case"height":Ql(i,g,j);break;case"style":St(i,j,k);break;case"data":if(c!=="object"){Ql(i,"data",j);break}case"src":case"href":if(j===""&&(c!=="a"||g!=="href")){i.removeAttribute(g);break}if(j==null||typeof j=="function"||typeof j=="symbol"||typeof j=="boolean"){i.removeAttribute(g);break}j=to(""+j),i.setAttribute(g,j);break;case"action":case"formAction":if(typeof j=="function"){i.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(g==="formAction"?(c!=="input"&&Mr(i,c,"name",E.name,E,null),Mr(i,c,"formEncType",E.formEncType,E,null),Mr(i,c,"formMethod",E.formMethod,E,null),Mr(i,c,"formTarget",E.formTarget,E,null)):(Mr(i,c,"encType",E.encType,E,null),Mr(i,c,"method",E.method,E,null),Mr(i,c,"target",E.target,E,null)));if(j==null||typeof j=="symbol"||typeof j=="boolean"){i.removeAttribute(g);break}j=to(""+j),i.setAttribute(g,j);break;case"onClick":j!=null&&(i.onclick=zn);break;case"onScroll":j!=null&&er("scroll",i);break;case"onScrollEnd":j!=null&&er("scrollend",i);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(n(61));if(g=j.__html,g!=null){if(E.children!=null)throw Error(n(60));i.innerHTML=g}}break;case"multiple":i.multiple=j&&typeof j!="function"&&typeof j!="symbol";break;case"muted":i.muted=j&&typeof j!="function"&&typeof j!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(j==null||typeof j=="function"||typeof j=="boolean"||typeof j=="symbol"){i.removeAttribute("xlink:href");break}g=to(""+j),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":j!=null&&typeof j!="function"&&typeof j!="symbol"?i.setAttribute(g,""+j):i.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":j&&typeof j!="function"&&typeof j!="symbol"?i.setAttribute(g,""):i.removeAttribute(g);break;case"capture":case"download":j===!0?i.setAttribute(g,""):j!==!1&&j!=null&&typeof j!="function"&&typeof j!="symbol"?i.setAttribute(g,j):i.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":j!=null&&typeof j!="function"&&typeof j!="symbol"&&!isNaN(j)&&1<=j?i.setAttribute(g,j):i.removeAttribute(g);break;case"rowSpan":case"start":j==null||typeof j=="function"||typeof j=="symbol"||isNaN(j)?i.removeAttribute(g):i.setAttribute(g,j);break;case"popover":er("beforetoggle",i),er("toggle",i),Zl(i,"popover",j);break;case"xlinkActuate":na(i,"http://www.w3.org/1999/xlink","xlink:actuate",j);break;case"xlinkArcrole":na(i,"http://www.w3.org/1999/xlink","xlink:arcrole",j);break;case"xlinkRole":na(i,"http://www.w3.org/1999/xlink","xlink:role",j);break;case"xlinkShow":na(i,"http://www.w3.org/1999/xlink","xlink:show",j);break;case"xlinkTitle":na(i,"http://www.w3.org/1999/xlink","xlink:title",j);break;case"xlinkType":na(i,"http://www.w3.org/1999/xlink","xlink:type",j);break;case"xmlBase":na(i,"http://www.w3.org/XML/1998/namespace","xml:base",j);break;case"xmlLang":na(i,"http://www.w3.org/XML/1998/namespace","xml:lang",j);break;case"xmlSpace":na(i,"http://www.w3.org/XML/1998/namespace","xml:space",j);break;case"is":Zl(i,"is",j);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=_m.get(g)||g,Zl(i,g,j))}}function H1(i,c,g,j,E,k){switch(g){case"style":St(i,j,k);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(n(61));if(g=j.__html,g!=null){if(E.children!=null)throw Error(n(60));i.innerHTML=g}}break;case"children":typeof j=="string"?eo(i,j):(typeof j=="number"||typeof j=="bigint")&&eo(i,""+j);break;case"onScroll":j!=null&&er("scroll",i);break;case"onScrollEnd":j!=null&&er("scrollend",i);break;case"onClick":j!=null&&(i.onclick=zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!km.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(E=g.endsWith("Capture"),c=g.slice(2,E?g.length-7:void 0),k=i[or]||null,k=k!=null?k[g]:null,typeof k=="function"&&i.removeEventListener(c,k,E),typeof j=="function")){typeof k!="function"&&k!==null&&(g in i?i[g]=null:i.hasAttribute(g)&&i.removeAttribute(g)),i.addEventListener(c,j,E);break e}g in i?i[g]=j:j===!0?i.setAttribute(g,""):Zl(i,g,j)}}}function pn(i,c,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":er("error",i),er("load",i);var j=!1,E=!1,k;for(k in g)if(g.hasOwnProperty(k)){var Y=g[k];if(Y!=null)switch(k){case"src":j=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Mr(i,c,k,Y,g,null)}}E&&Mr(i,c,"srcSet",g.srcSet,g,null),j&&Mr(i,c,"src",g.src,g,null);return;case"input":er("invalid",i);var te=k=Y=E=null,ye=null,_e=null;for(j in g)if(g.hasOwnProperty(j)){var He=g[j];if(He!=null)switch(j){case"name":E=He;break;case"type":Y=He;break;case"checked":ye=He;break;case"defaultChecked":_e=He;break;case"value":k=He;break;case"defaultValue":te=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(n(137,c));break;default:Mr(i,c,j,He,g,null)}}Pe(i,k,te,ye,_e,Y,E,!1);return;case"select":er("invalid",i),j=Y=k=null;for(E in g)if(g.hasOwnProperty(E)&&(te=g[E],te!=null))switch(E){case"value":k=te;break;case"defaultValue":Y=te;break;case"multiple":j=te;default:Mr(i,c,E,te,g,null)}c=k,g=Y,i.multiple=!!j,c!=null?jt(i,!!j,c,!1):g!=null&&jt(i,!!j,g,!0);return;case"textarea":er("invalid",i),k=E=j=null;for(Y in g)if(g.hasOwnProperty(Y)&&(te=g[Y],te!=null))switch(Y){case"value":j=te;break;case"defaultValue":E=te;break;case"children":k=te;break;case"dangerouslySetInnerHTML":if(te!=null)throw Error(n(91));break;default:Mr(i,c,Y,te,g,null)}Pn(i,j,E,k);return;case"option":for(ye in g)if(g.hasOwnProperty(ye)&&(j=g[ye],j!=null))switch(ye){case"selected":i.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Mr(i,c,ye,j,g,null)}return;case"dialog":er("beforetoggle",i),er("toggle",i),er("cancel",i),er("close",i);break;case"iframe":case"object":er("load",i);break;case"video":case"audio":for(j=0;j<_h.length;j++)er(_h[j],i);break;case"image":er("error",i),er("load",i);break;case"details":er("toggle",i);break;case"embed":case"source":case"link":er("error",i),er("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in g)if(g.hasOwnProperty(_e)&&(j=g[_e],j!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Mr(i,c,_e,j,g,null)}return;default:if(Vr(c)){for(He in g)g.hasOwnProperty(He)&&(j=g[He],j!==void 0&&H1(i,c,He,j,g,void 0));return}}for(te in g)g.hasOwnProperty(te)&&(j=g[te],j!=null&&Mr(i,c,te,j,g,null))}function cL(i,c,g,j){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,k=null,Y=null,te=null,ye=null,_e=null,He=null;for(Ue in g){var Xe=g[Ue];if(g.hasOwnProperty(Ue)&&Xe!=null)switch(Ue){case"checked":break;case"value":break;case"defaultValue":ye=Xe;default:j.hasOwnProperty(Ue)||Mr(i,c,Ue,null,j,Xe)}}for(var Ie in j){var Ue=j[Ie];if(Xe=g[Ie],j.hasOwnProperty(Ie)&&(Ue!=null||Xe!=null))switch(Ie){case"type":k=Ue;break;case"name":E=Ue;break;case"checked":_e=Ue;break;case"defaultChecked":He=Ue;break;case"value":Y=Ue;break;case"defaultValue":te=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(n(137,c));break;default:Ue!==Xe&&Mr(i,c,Ie,Ue,j,Xe)}}Ls(i,Y,te,ye,_e,He,k,E);return;case"select":Ue=Y=te=Ie=null;for(k in g)if(ye=g[k],g.hasOwnProperty(k)&&ye!=null)switch(k){case"value":break;case"multiple":Ue=ye;default:j.hasOwnProperty(k)||Mr(i,c,k,null,j,ye)}for(E in j)if(k=j[E],ye=g[E],j.hasOwnProperty(E)&&(k!=null||ye!=null))switch(E){case"value":Ie=k;break;case"defaultValue":te=k;break;case"multiple":Y=k;default:k!==ye&&Mr(i,c,E,k,j,ye)}c=te,g=Y,j=Ue,Ie!=null?jt(i,!!g,Ie,!1):!!j!=!!g&&(c!=null?jt(i,!!g,c,!0):jt(i,!!g,g?[]:"",!1));return;case"textarea":Ue=Ie=null;for(te in g)if(E=g[te],g.hasOwnProperty(te)&&E!=null&&!j.hasOwnProperty(te))switch(te){case"value":break;case"children":break;default:Mr(i,c,te,null,j,E)}for(Y in j)if(E=j[Y],k=g[Y],j.hasOwnProperty(Y)&&(E!=null||k!=null))switch(Y){case"value":Ie=E;break;case"defaultValue":Ue=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(n(91));break;default:E!==k&&Mr(i,c,Y,E,j,k)}Os(i,Ie,Ue);return;case"option":for(var bt in g)if(Ie=g[bt],g.hasOwnProperty(bt)&&Ie!=null&&!j.hasOwnProperty(bt))switch(bt){case"selected":i.selected=!1;break;default:Mr(i,c,bt,null,j,Ie)}for(ye in j)if(Ie=j[ye],Ue=g[ye],j.hasOwnProperty(ye)&&Ie!==Ue&&(Ie!=null||Ue!=null))switch(ye){case"selected":i.selected=Ie&&typeof Ie!="function"&&typeof Ie!="symbol";break;default:Mr(i,c,ye,Ie,j,Ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var kt in g)Ie=g[kt],g.hasOwnProperty(kt)&&Ie!=null&&!j.hasOwnProperty(kt)&&Mr(i,c,kt,null,j,Ie);for(_e in j)if(Ie=j[_e],Ue=g[_e],j.hasOwnProperty(_e)&&Ie!==Ue&&(Ie!=null||Ue!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(n(137,c));break;default:Mr(i,c,_e,Ie,j,Ue)}return;default:if(Vr(c)){for(var Lr in g)Ie=g[Lr],g.hasOwnProperty(Lr)&&Ie!==void 0&&!j.hasOwnProperty(Lr)&&H1(i,c,Lr,void 0,j,Ie);for(He in j)Ie=j[He],Ue=g[He],!j.hasOwnProperty(He)||Ie===Ue||Ie===void 0&&Ue===void 0||H1(i,c,He,Ie,j,Ue);return}}for(var De in g)Ie=g[De],g.hasOwnProperty(De)&&Ie!=null&&!j.hasOwnProperty(De)&&Mr(i,c,De,null,j,Ie);for(Xe in j)Ie=j[Xe],Ue=g[Xe],!j.hasOwnProperty(Xe)||Ie===Ue||Ie==null&&Ue==null||Mr(i,c,Xe,Ie,j,Ue)}function jA(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dL(){if(typeof performance.getEntriesByType=="function"){for(var i=0,c=0,g=performance.getEntriesByType("resource"),j=0;j<g.length;j++){var E=g[j],k=E.transferSize,Y=E.initiatorType,te=E.duration;if(k&&te&&jA(Y)){for(Y=0,te=E.responseEnd,j+=1;j<g.length;j++){var ye=g[j],_e=ye.startTime;if(_e>te)break;var He=ye.transferSize,Xe=ye.initiatorType;He&&jA(Xe)&&(ye=ye.responseEnd,Y+=He*(ye<te?1:(te-_e)/(ye-_e)))}if(--j,c+=8*(k+Y)/(E.duration/1e3),i++,10<i)break}}if(0<i)return c/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var G1=null,Y1=null;function If(i){return i.nodeType===9?i:i.ownerDocument}function wA(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function SA(i,c){if(i===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&c==="foreignObject"?0:i}function W1(i,c){return i==="textarea"||i==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var X1=null;function uL(){var i=window.event;return i&&i.type==="popstate"?i===X1?!1:(X1=i,!0):(X1=null,!1)}var CA=typeof setTimeout=="function"?setTimeout:void 0,hL=typeof clearTimeout=="function"?clearTimeout:void 0,AA=typeof Promise=="function"?Promise:void 0,mL=typeof queueMicrotask=="function"?queueMicrotask:typeof AA<"u"?function(i){return AA.resolve(null).then(i).catch(fL)}:CA;function fL(i){setTimeout(function(){throw i})}function Ao(i){return i==="head"}function EA(i,c){var g=c,j=0;do{var E=g.nextSibling;if(i.removeChild(g),E&&E.nodeType===8)if(g=E.data,g==="/$"||g==="/&"){if(j===0){i.removeChild(E),Yd(c);return}j--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")j++;else if(g==="html")Rh(i.ownerDocument.documentElement);else if(g==="head"){g=i.ownerDocument.head,Rh(g);for(var k=g.firstChild;k;){var Y=k.nextSibling,te=k.nodeName;k[pt]||te==="SCRIPT"||te==="STYLE"||te==="LINK"&&k.rel.toLowerCase()==="stylesheet"||g.removeChild(k),k=Y}}else g==="body"&&Rh(i.ownerDocument.body);g=E}while(g);Yd(c)}function TA(i,c){var g=i;i=0;do{var j=g.nextSibling;if(g.nodeType===1?c?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(c?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),j&&j.nodeType===8)if(g=j.data,g==="/$"){if(i===0)break;i--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||i++;g=j}while(g)}function K1(i){var c=i.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var g=c;switch(c=c.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":K1(g),yt(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}i.removeChild(g)}}function gL(i,c,g,j){for(;i.nodeType===1;){var E=g;if(i.nodeName.toLowerCase()!==c.toLowerCase()){if(!j&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(j){if(!i[pt])switch(c){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(k=i.getAttribute("rel"),k==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(k!==E.rel||i.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||i.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||i.getAttribute("title")!==(E.title==null?null:E.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(k=i.getAttribute("src"),(k!==(E.src==null?null:E.src)||i.getAttribute("type")!==(E.type==null?null:E.type)||i.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&k&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(c==="input"&&i.type==="hidden"){var k=E.name==null?null:""+E.name;if(E.type==="hidden"&&i.getAttribute("name")===k)return i}else return i;if(i=Ia(i.nextSibling),i===null)break}return null}function xL(i,c,g){if(c==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!g||(i=Ia(i.nextSibling),i===null))return null;return i}function DA(i,c){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Ia(i.nextSibling),i===null))return null;return i}function Z1(i){return i.data==="$?"||i.data==="$~"}function Q1(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function pL(i,c){var g=i.ownerDocument;if(i.data==="$~")i._reactRetry=c;else if(i.data!=="$?"||g.readyState!=="loading")c();else{var j=function(){c(),g.removeEventListener("DOMContentLoaded",j)};g.addEventListener("DOMContentLoaded",j),i._reactRetry=j}}function Ia(i){for(;i!=null;i=i.nextSibling){var c=i.nodeType;if(c===1||c===3)break;if(c===8){if(c=i.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return i}var J1=null;function OA(i){i=i.nextSibling;for(var c=0;i;){if(i.nodeType===8){var g=i.data;if(g==="/$"||g==="/&"){if(c===0)return Ia(i.nextSibling);c--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||c++}i=i.nextSibling}return null}function PA(i){i=i.previousSibling;for(var c=0;i;){if(i.nodeType===8){var g=i.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(c===0)return i;c--}else g!=="/$"&&g!=="/&"||c++}i=i.previousSibling}return null}function kA(i,c,g){switch(c=If(g),i){case"html":if(i=c.documentElement,!i)throw Error(n(452));return i;case"head":if(i=c.head,!i)throw Error(n(453));return i;case"body":if(i=c.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Rh(i){for(var c=i.attributes;c.length;)i.removeAttributeNode(c[0]);yt(i)}var Ra=new Map,_A=new Set;function Rf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Nl=W.d;W.d={f:yL,r:bL,D:vL,C:NL,L:jL,m:wL,X:CL,S:SL,M:AL};function yL(){var i=Nl.f(),c=Af();return i||c}function bL(i){var c=ur(i);c!==null&&c.tag===5&&c.type==="form"?K4(c):Nl.r(i)}var qd=typeof document>"u"?null:document;function IA(i,c,g){var j=qd;if(j&&typeof c=="string"&&c){var E=Wt(c);E='link[rel="'+i+'"][href="'+E+'"]',typeof g=="string"&&(E+='[crossorigin="'+g+'"]'),_A.has(E)||(_A.add(E),i={rel:i,crossOrigin:g,href:c},j.querySelector(E)===null&&(c=j.createElement("link"),pn(c,"link",i),Wr(c),j.head.appendChild(c)))}}function vL(i){Nl.D(i),IA("dns-prefetch",i,null)}function NL(i,c){Nl.C(i,c),IA("preconnect",i,c)}function jL(i,c,g){Nl.L(i,c,g);var j=qd;if(j&&i&&c){var E='link[rel="preload"][as="'+Wt(c)+'"]';c==="image"&&g&&g.imageSrcSet?(E+='[imagesrcset="'+Wt(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(E+='[imagesizes="'+Wt(g.imageSizes)+'"]')):E+='[href="'+Wt(i)+'"]';var k=E;switch(c){case"style":k=Hd(i);break;case"script":k=Gd(i)}Ra.has(k)||(i=b({rel:"preload",href:c==="image"&&g&&g.imageSrcSet?void 0:i,as:c},g),Ra.set(k,i),j.querySelector(E)!==null||c==="style"&&j.querySelector(Mh(k))||c==="script"&&j.querySelector(Lh(k))||(c=j.createElement("link"),pn(c,"link",i),Wr(c),j.head.appendChild(c)))}}function wL(i,c){Nl.m(i,c);var g=qd;if(g&&i){var j=c&&typeof c.as=="string"?c.as:"script",E='link[rel="modulepreload"][as="'+Wt(j)+'"][href="'+Wt(i)+'"]',k=E;switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=Gd(i)}if(!Ra.has(k)&&(i=b({rel:"modulepreload",href:i},c),Ra.set(k,i),g.querySelector(E)===null)){switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Lh(k)))return}j=g.createElement("link"),pn(j,"link",i),Wr(j),g.head.appendChild(j)}}}function SL(i,c,g){Nl.S(i,c,g);var j=qd;if(j&&i){var E=vt(j).hoistableStyles,k=Hd(i);c=c||"default";var Y=E.get(k);if(!Y){var te={loading:0,preload:null};if(Y=j.querySelector(Mh(k)))te.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":c},g),(g=Ra.get(k))&&eb(i,g);var ye=Y=j.createElement("link");Wr(ye),pn(ye,"link",i),ye._p=new Promise(function(_e,He){ye.onload=_e,ye.onerror=He}),ye.addEventListener("load",function(){te.loading|=1}),ye.addEventListener("error",function(){te.loading|=2}),te.loading|=4,Mf(Y,c,j)}Y={type:"stylesheet",instance:Y,count:1,state:te},E.set(k,Y)}}}function CL(i,c){Nl.X(i,c);var g=qd;if(g&&i){var j=vt(g).hoistableScripts,E=Gd(i),k=j.get(E);k||(k=g.querySelector(Lh(E)),k||(i=b({src:i,async:!0},c),(c=Ra.get(E))&&tb(i,c),k=g.createElement("script"),Wr(k),pn(k,"link",i),g.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},j.set(E,k))}}function AL(i,c){Nl.M(i,c);var g=qd;if(g&&i){var j=vt(g).hoistableScripts,E=Gd(i),k=j.get(E);k||(k=g.querySelector(Lh(E)),k||(i=b({src:i,async:!0,type:"module"},c),(c=Ra.get(E))&&tb(i,c),k=g.createElement("script"),Wr(k),pn(k,"link",i),g.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},j.set(E,k))}}function RA(i,c,g,j){var E=(E=oe.current)?Rf(E):null;if(!E)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(c=Hd(g.href),g=vt(E).hoistableStyles,j=g.get(c),j||(j={type:"style",instance:null,count:0,state:null},g.set(c,j)),j):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){i=Hd(g.href);var k=vt(E).hoistableStyles,Y=k.get(i);if(Y||(E=E.ownerDocument||E,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(i,Y),(k=E.querySelector(Mh(i)))&&!k._p&&(Y.instance=k,Y.state.loading=5),Ra.has(i)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Ra.set(i,g),k||EL(E,i,g,Y.state))),c&&j===null)throw Error(n(528,""));return Y}if(c&&j!==null)throw Error(n(529,""));return null;case"script":return c=g.async,g=g.src,typeof g=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Gd(g),g=vt(E).hoistableScripts,j=g.get(c),j||(j={type:"script",instance:null,count:0,state:null},g.set(c,j)),j):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Hd(i){return'href="'+Wt(i)+'"'}function Mh(i){return'link[rel="stylesheet"]['+i+"]"}function MA(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function EL(i,c,g,j){i.querySelector('link[rel="preload"][as="style"]['+c+"]")?j.loading=1:(c=i.createElement("link"),j.preload=c,c.addEventListener("load",function(){return j.loading|=1}),c.addEventListener("error",function(){return j.loading|=2}),pn(c,"link",g),Wr(c),i.head.appendChild(c))}function Gd(i){return'[src="'+Wt(i)+'"]'}function Lh(i){return"script[async]"+i}function LA(i,c,g){if(c.count++,c.instance===null)switch(c.type){case"style":var j=i.querySelector('style[data-href~="'+Wt(g.href)+'"]');if(j)return c.instance=j,Wr(j),j;var E=b({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return j=(i.ownerDocument||i).createElement("style"),Wr(j),pn(j,"style",E),Mf(j,g.precedence,i),c.instance=j;case"stylesheet":E=Hd(g.href);var k=i.querySelector(Mh(E));if(k)return c.state.loading|=4,c.instance=k,Wr(k),k;j=MA(g),(E=Ra.get(E))&&eb(j,E),k=(i.ownerDocument||i).createElement("link"),Wr(k);var Y=k;return Y._p=new Promise(function(te,ye){Y.onload=te,Y.onerror=ye}),pn(k,"link",j),c.state.loading|=4,Mf(k,g.precedence,i),c.instance=k;case"script":return k=Gd(g.src),(E=i.querySelector(Lh(k)))?(c.instance=E,Wr(E),E):(j=g,(E=Ra.get(k))&&(j=b({},g),tb(j,E)),i=i.ownerDocument||i,E=i.createElement("script"),Wr(E),pn(E,"link",j),i.head.appendChild(E),c.instance=E);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(j=c.instance,c.state.loading|=4,Mf(j,g.precedence,i));return c.instance}function Mf(i,c,g){for(var j=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=j.length?j[j.length-1]:null,k=E,Y=0;Y<j.length;Y++){var te=j[Y];if(te.dataset.precedence===c)k=te;else if(k!==E)break}k?k.parentNode.insertBefore(i,k.nextSibling):(c=g.nodeType===9?g.head:g,c.insertBefore(i,c.firstChild))}function eb(i,c){i.crossOrigin==null&&(i.crossOrigin=c.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=c.referrerPolicy),i.title==null&&(i.title=c.title)}function tb(i,c){i.crossOrigin==null&&(i.crossOrigin=c.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=c.referrerPolicy),i.integrity==null&&(i.integrity=c.integrity)}var Lf=null;function FA(i,c,g){if(Lf===null){var j=new Map,E=Lf=new Map;E.set(g,j)}else E=Lf,j=E.get(g),j||(j=new Map,E.set(g,j));if(j.has(i))return j;for(j.set(i,null),g=g.getElementsByTagName(i),E=0;E<g.length;E++){var k=g[E];if(!(k[pt]||k[Yr]||i==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=k.getAttribute(c)||"";Y=i+Y;var te=j.get(Y);te?te.push(k):j.set(Y,[k])}}return j}function BA(i,c,g){i=i.ownerDocument||i,i.head.insertBefore(g,c==="title"?i.querySelector("head > title"):null)}function TL(i,c,g){if(g===1||c.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return i=c.disabled,typeof c.precedence=="string"&&i==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function UA(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function DL(i,c,g,j){if(g.type==="stylesheet"&&(typeof j.media!="string"||matchMedia(j.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var E=Hd(j.href),k=c.querySelector(Mh(E));if(k){c=k._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(i.count++,i=Ff.bind(i),c.then(i,i)),g.state.loading|=4,g.instance=k,Wr(k);return}k=c.ownerDocument||c,j=MA(j),(E=Ra.get(E))&&eb(j,E),k=k.createElement("link"),Wr(k);var Y=k;Y._p=new Promise(function(te,ye){Y.onload=te,Y.onerror=ye}),pn(k,"link",j),g.instance=k}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(g,c),(c=g.state.preload)&&(g.state.loading&3)===0&&(i.count++,g=Ff.bind(i),c.addEventListener("load",g),c.addEventListener("error",g))}}var rb=0;function OL(i,c){return i.stylesheets&&i.count===0&&Uf(i,i.stylesheets),0<i.count||0<i.imgCount?function(g){var j=setTimeout(function(){if(i.stylesheets&&Uf(i,i.stylesheets),i.unsuspend){var k=i.unsuspend;i.unsuspend=null,k()}},6e4+c);0<i.imgBytes&&rb===0&&(rb=62500*dL());var E=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Uf(i,i.stylesheets),i.unsuspend)){var k=i.unsuspend;i.unsuspend=null,k()}},(i.imgBytes>rb?50:800)+c);return i.unsuspend=g,function(){i.unsuspend=null,clearTimeout(j),clearTimeout(E)}}:null}function Ff(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Bf=null;function Uf(i,c){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Bf=new Map,c.forEach(PL,i),Bf=null,Ff.call(i))}function PL(i,c){if(!(c.state.loading&4)){var g=Bf.get(i);if(g)var j=g.get(null);else{g=new Map,Bf.set(i,g);for(var E=i.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<E.length;k++){var Y=E[k];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(g.set(Y.dataset.precedence,Y),j=Y)}j&&g.set(null,j)}E=c.instance,Y=E.getAttribute("data-precedence"),k=g.get(Y)||j,k===j&&g.set(null,E),g.set(Y,E),this.count++,j=Ff.bind(this),E.addEventListener("load",j),E.addEventListener("error",j),k?k.parentNode.insertBefore(E,k.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(E,i.firstChild)),c.state.loading|=4}}var Fh={$$typeof:_,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function kL(i,c,g,j,E,k,Y,te,ye){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ws(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ws(0),this.hiddenUpdates=Ws(null),this.identifierPrefix=j,this.onUncaughtError=E,this.onCaughtError=k,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ye,this.incompleteTransitions=new Map}function zA(i,c,g,j,E,k,Y,te,ye,_e,He,Xe){return i=new kL(i,c,g,Y,ye,_e,He,Xe,te),c=1,k===!0&&(c|=24),k=oa(3,null,null,c),i.current=k,k.stateNode=i,c=Ry(),c.refCount++,i.pooledCache=c,c.refCount++,k.memoizedState={element:j,isDehydrated:g,cache:c},By(k),i}function VA(i){return i?(i=wd,i):wd}function $A(i,c,g,j,E,k){E=VA(E),j.context===null?j.context=E:j.pendingContext=E,j=go(c),j.payload={element:g},k=k===void 0?null:k,k!==null&&(j.callback=k),g=xo(i,j,c),g!==null&&(Wn(g,i,c),xh(g,i,c))}function qA(i,c){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var g=i.retryLane;i.retryLane=g!==0&&g<c?g:c}}function sb(i,c){qA(i,c),(i=i.alternate)&&qA(i,c)}function HA(i){if(i.tag===13||i.tag===31){var c=pc(i,67108864);c!==null&&Wn(c,i,67108864),sb(i,67108864)}}function GA(i){if(i.tag===13||i.tag===31){var c=ma();c=vs(c);var g=pc(i,c);g!==null&&Wn(g,i,c),sb(i,c)}}var zf=!0;function _L(i,c,g,j){var E=J.T;J.T=null;var k=W.p;try{W.p=2,nb(i,c,g,j)}finally{W.p=k,J.T=E}}function IL(i,c,g,j){var E=J.T;J.T=null;var k=W.p;try{W.p=8,nb(i,c,g,j)}finally{W.p=k,J.T=E}}function nb(i,c,g,j){if(zf){var E=ab(j);if(E===null)q1(i,c,j,Vf,g),WA(i,j);else if(ML(E,i,c,g,j))j.stopPropagation();else if(WA(i,j),c&4&&-1<RL.indexOf(i)){for(;E!==null;){var k=ur(E);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var Y=Mt(k.pendingLanes);if(Y!==0){var te=k;for(te.pendingLanes|=2,te.entangledLanes|=2;Y;){var ye=1<<31-lt(Y);te.entanglements[1]|=ye,Y&=~ye}Ri(k),(Sr&6)===0&&(Sf=ft()+500,kh(0))}}break;case 31:case 13:te=pc(k,2),te!==null&&Wn(te,k,2),Af(),sb(k,2)}if(k=ab(j),k===null&&q1(i,c,j,Vf,g),k===E)break;E=k}E!==null&&j.stopPropagation()}else q1(i,c,j,null,g)}}function ab(i){return i=th(i),ib(i)}var Vf=null;function ib(i){if(Vf=null,i=Zt(i),i!==null){var c=l(i);if(c===null)i=null;else{var g=c.tag;if(g===13){if(i=d(c),i!==null)return i;i=null}else if(g===31){if(i=h(c),i!==null)return i;i=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;i=null}else c!==i&&(i=null)}}return Vf=i,null}function YA(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Kt()){case lr:return 2;case ys:return 8;case Ye:case xt:return 32;case Ur:return 268435456;default:return 32}default:return 32}}var lb=!1,Eo=null,To=null,Do=null,Bh=new Map,Uh=new Map,Oo=[],RL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function WA(i,c){switch(i){case"focusin":case"focusout":Eo=null;break;case"dragenter":case"dragleave":To=null;break;case"mouseover":case"mouseout":Do=null;break;case"pointerover":case"pointerout":Bh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uh.delete(c.pointerId)}}function zh(i,c,g,j,E,k){return i===null||i.nativeEvent!==k?(i={blockedOn:c,domEventName:g,eventSystemFlags:j,nativeEvent:k,targetContainers:[E]},c!==null&&(c=ur(c),c!==null&&HA(c)),i):(i.eventSystemFlags|=j,c=i.targetContainers,E!==null&&c.indexOf(E)===-1&&c.push(E),i)}function ML(i,c,g,j,E){switch(c){case"focusin":return Eo=zh(Eo,i,c,g,j,E),!0;case"dragenter":return To=zh(To,i,c,g,j,E),!0;case"mouseover":return Do=zh(Do,i,c,g,j,E),!0;case"pointerover":var k=E.pointerId;return Bh.set(k,zh(Bh.get(k)||null,i,c,g,j,E)),!0;case"gotpointercapture":return k=E.pointerId,Uh.set(k,zh(Uh.get(k)||null,i,c,g,j,E)),!0}return!1}function XA(i){var c=Zt(i.target);if(c!==null){var g=l(c);if(g!==null){if(c=g.tag,c===13){if(c=d(g),c!==null){i.blockedOn=c,ut(i.priority,function(){GA(g)});return}}else if(c===31){if(c=h(g),c!==null){i.blockedOn=c,ut(i.priority,function(){GA(g)});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){i.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}i.blockedOn=null}function $f(i){if(i.blockedOn!==null)return!1;for(var c=i.targetContainers;0<c.length;){var g=ab(i.nativeEvent);if(g===null){g=i.nativeEvent;var j=new g.constructor(g.type,g);cc=j,g.target.dispatchEvent(j),cc=null}else return c=ur(g),c!==null&&HA(c),i.blockedOn=g,!1;c.shift()}return!0}function KA(i,c,g){$f(i)&&g.delete(c)}function LL(){lb=!1,Eo!==null&&$f(Eo)&&(Eo=null),To!==null&&$f(To)&&(To=null),Do!==null&&$f(Do)&&(Do=null),Bh.forEach(KA),Uh.forEach(KA)}function qf(i,c){i.blockedOn===c&&(i.blockedOn=null,lb||(lb=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,LL)))}var Hf=null;function ZA(i){Hf!==i&&(Hf=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Hf===i&&(Hf=null);for(var c=0;c<i.length;c+=3){var g=i[c],j=i[c+1],E=i[c+2];if(typeof j!="function"){if(ib(j||g)===null)continue;break}var k=ur(g);k!==null&&(i.splice(c,3),c-=3,a1(k,{pending:!0,data:E,method:g.method,action:j},j,E))}}))}function Yd(i){function c(ye){return qf(ye,i)}Eo!==null&&qf(Eo,i),To!==null&&qf(To,i),Do!==null&&qf(Do,i),Bh.forEach(c),Uh.forEach(c);for(var g=0;g<Oo.length;g++){var j=Oo[g];j.blockedOn===i&&(j.blockedOn=null)}for(;0<Oo.length&&(g=Oo[0],g.blockedOn===null);)XA(g),g.blockedOn===null&&Oo.shift();if(g=(i.ownerDocument||i).$$reactFormReplay,g!=null)for(j=0;j<g.length;j+=3){var E=g[j],k=g[j+1],Y=E[or]||null;if(typeof k=="function")Y||ZA(g);else if(Y){var te=null;if(k&&k.hasAttribute("formAction")){if(E=k,Y=k[or]||null)te=Y.formAction;else if(ib(E)!==null)continue}else te=Y.action;typeof te=="function"?g[j+1]=te:(g.splice(j,3),j-=3),ZA(g)}}}function QA(){function i(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(Y){return E=Y})},focusReset:"manual",scroll:"manual"})}function c(){E!==null&&(E(),E=null),j||setTimeout(g,20)}function g(){if(!j&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var j=!1,E=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(g,100),function(){j=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),E!==null&&(E(),E=null)}}}function ob(i){this._internalRoot=i}Gf.prototype.render=ob.prototype.render=function(i){var c=this._internalRoot;if(c===null)throw Error(n(409));var g=c.current,j=ma();$A(g,j,i,c,null,null)},Gf.prototype.unmount=ob.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var c=i.containerInfo;$A(i.current,2,null,i,null,null),Af(),c[hn]=null}};function Gf(i){this._internalRoot=i}Gf.prototype.unstable_scheduleHydration=function(i){if(i){var c=as();i={blockedOn:null,target:i,priority:c};for(var g=0;g<Oo.length&&c!==0&&c<Oo[g].priority;g++);Oo.splice(g,0,i),g===0&&XA(i)}};var JA=r.version;if(JA!=="19.2.0")throw Error(n(527,JA,"19.2.0"));W.findDOMNode=function(i){var c=i._reactInternals;if(c===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=x(c),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var FL={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yf.isDisabled&&Yf.supportsFiber)try{_t=Yf.inject(FL),Ae=Yf}catch{}}return $h.createRoot=function(i,c){if(!a(i))throw Error(n(299));var g=!1,j="",E=iC,k=lC,Y=oC;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(j=c.identifierPrefix),c.onUncaughtError!==void 0&&(E=c.onUncaughtError),c.onCaughtError!==void 0&&(k=c.onCaughtError),c.onRecoverableError!==void 0&&(Y=c.onRecoverableError)),c=zA(i,1,!1,null,null,g,j,null,E,k,Y,QA),i[hn]=c.current,$1(i),new ob(c)},$h.hydrateRoot=function(i,c,g){if(!a(i))throw Error(n(299));var j=!1,E="",k=iC,Y=lC,te=oC,ye=null;return g!=null&&(g.unstable_strictMode===!0&&(j=!0),g.identifierPrefix!==void 0&&(E=g.identifierPrefix),g.onUncaughtError!==void 0&&(k=g.onUncaughtError),g.onCaughtError!==void 0&&(Y=g.onCaughtError),g.onRecoverableError!==void 0&&(te=g.onRecoverableError),g.formState!==void 0&&(ye=g.formState)),c=zA(i,1,!0,c,g??null,j,E,ye,k,Y,te,QA),c.context=VA(null),g=c.current,j=ma(),j=vs(j),E=go(j),E.callback=null,xo(g,E,j),g=j,c.current.lanes=g,Un(c,g),Ri(c),i[hn]=c.current,$1(i),new Gf(c)},$h.version="19.2.0",$h}var c3;function WL(){if(c3)return ub.exports;c3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),ub.exports=YL(),ub.exports}var XL=WL();var d3="popstate";function KL(e={}){function r(n,a){let{pathname:l,search:d,hash:h}=n.location;return P2("",{pathname:l,search:d,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:w0(a)}return QL(r,s,null,e)}function us(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function Wa(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function ZL(){return Math.random().toString(36).substring(2,10)}function u3(e,r){return{usr:e.state,key:e.key,idx:r}}function P2(e,r,s=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof r=="string"?Ru(r):r,state:s,key:r&&r.key||n||ZL()}}function w0({pathname:e="/",search:r="",hash:s=""}){return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Ru(e){let r={};if(e){let s=e.indexOf("#");s>=0&&(r.hash=e.substring(s),e=e.substring(0,s));let n=e.indexOf("?");n>=0&&(r.search=e.substring(n),e=e.substring(0,n)),e&&(r.pathname=e)}return r}function QL(e,r,s,n={}){let{window:a=document.defaultView,v5Compat:l=!1}=n,d=a.history,h="POP",f=null,x=p();x==null&&(x=0,d.replaceState({...d.state,idx:x},""));function p(){return(d.state||{idx:null}).idx}function b(){h="POP";let D=p(),I=D==null?null:D-x;x=D,f&&f({action:h,location:P.location,delta:I})}function S(D,I){h="PUSH";let L=P2(P.location,D,I);x=p()+1;let _=u3(L,x),$=P.createHref(L);try{d.pushState(_,"",$)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;a.location.assign($)}l&&f&&f({action:h,location:P.location,delta:1})}function T(D,I){h="REPLACE";let L=P2(P.location,D,I);x=p();let _=u3(L,x),$=P.createHref(L);d.replaceState(_,"",$),l&&f&&f({action:h,location:P.location,delta:0})}function A(D){return JL(D)}let P={get action(){return h},get location(){return e(a,d)},listen(D){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(d3,b),f=D,()=>{a.removeEventListener(d3,b),f=null}},createHref(D){return r(a,D)},createURL:A,encodeLocation(D){let I=A(D);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:S,replace:T,go(D){return d.go(D)}};return P}function JL(e,r=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),us(s,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:w0(e);return n=n.replace(/ $/,"%20"),!r&&n.startsWith("//")&&(n=s+n),new URL(n,s)}function KO(e,r,s="/"){return eF(e,r,s,!1)}function eF(e,r,s,n){let a=typeof r=="string"?Ru(r):r,l=Il(a.pathname||"/",s);if(l==null)return null;let d=ZO(e);tF(d);let h=null;for(let f=0;h==null&&f<d.length;++f){let x=hF(l);h=dF(d[f],x,n)}return h}function ZO(e,r=[],s=[],n="",a=!1){let l=(d,h,f=a,x)=>{let p={relativePath:x===void 0?d.path||"":x,caseSensitive:d.caseSensitive===!0,childrenIndex:h,route:d};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&f)return;us(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let b=Pl([n,p.relativePath]),S=s.concat(p);d.children&&d.children.length>0&&(us(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),ZO(d.children,r,S,b,f)),!(d.path==null&&!d.index)&&r.push({path:b,score:oF(b,d.index),routesMeta:S})};return e.forEach((d,h)=>{if(d.path===""||!d.path?.includes("?"))l(d,h);else for(let f of QO(d.path))l(d,h,!0,f)}),r}function QO(e){let r=e.split("/");if(r.length===0)return[];let[s,...n]=r,a=s.endsWith("?"),l=s.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let d=QO(n.join("/")),h=[];return h.push(...d.map(f=>f===""?l:[l,f].join("/"))),a&&h.push(...d),h.map(f=>e.startsWith("/")&&f===""?"/":f)}function tF(e){e.sort((r,s)=>r.score!==s.score?s.score-r.score:cF(r.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}var rF=/^:[\w-]+$/,sF=3,nF=2,aF=1,iF=10,lF=-2,h3=e=>e==="*";function oF(e,r){let s=e.split("/"),n=s.length;return s.some(h3)&&(n+=lF),r&&(n+=nF),s.filter(a=>!h3(a)).reduce((a,l)=>a+(rF.test(l)?sF:l===""?aF:iF),n)}function cF(e,r){return e.length===r.length&&e.slice(0,-1).every((n,a)=>n===r[a])?e[e.length-1]-r[r.length-1]:0}function dF(e,r,s=!1){let{routesMeta:n}=e,a={},l="/",d=[];for(let h=0;h<n.length;++h){let f=n[h],x=h===n.length-1,p=l==="/"?r:r.slice(l.length)||"/",b=tx({path:f.relativePath,caseSensitive:f.caseSensitive,end:x},p),S=f.route;if(!b&&x&&s&&!n[n.length-1].route.index&&(b=tx({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!b)return null;Object.assign(a,b.params),d.push({params:a,pathname:Pl([l,b.pathname]),pathnameBase:pF(Pl([l,b.pathnameBase])),route:S}),b.pathnameBase!=="/"&&(l=Pl([l,b.pathnameBase]))}return d}function tx(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=uF(e.path,e.caseSensitive,e.end),a=r.match(s);if(!a)return null;let l=a[0],d=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:n.reduce((x,{paramName:p,isOptional:b},S)=>{if(p==="*"){let A=h[S]||"";d=l.slice(0,l.length-A.length).replace(/(.)\/+$/,"$1")}const T=h[S];return b&&!T?x[p]=void 0:x[p]=(T||"").replace(/%2F/g,"/"),x},{}),pathname:l,pathnameBase:d,pattern:e}}function uF(e,r=!1,s=!0){Wa(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,h,f)=>(n.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,r?void 0:"i"),n]}function hF(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Wa(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),e}}function Il(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}var mF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fF=e=>mF.test(e);function gF(e,r="/"){let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?Ru(e):e,l;if(s)if(fF(s))l=s;else{if(s.includes("//")){let d=s;s=s.replace(/\/\/+/g,"/"),Wa(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${s}`)}s.startsWith("/")?l=m3(s.substring(1),"/"):l=m3(s,r)}else l=r;return{pathname:l,search:yF(n),hash:bF(a)}}function m3(e,r){let s=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function gb(e,r,s,n){return`Cannot include a '${e}' character in a manually specified \`to.${r}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xF(e){return e.filter((r,s)=>s===0||r.route.path&&r.route.path.length>0)}function cj(e){let r=xF(e);return r.map((s,n)=>n===r.length-1?s.pathname:s.pathnameBase)}function dj(e,r,s,n=!1){let a;typeof e=="string"?a=Ru(e):(a={...e},us(!a.pathname||!a.pathname.includes("?"),gb("?","pathname","search",a)),us(!a.pathname||!a.pathname.includes("#"),gb("#","pathname","hash",a)),us(!a.search||!a.search.includes("#"),gb("#","search","hash",a)));let l=e===""||a.pathname==="",d=l?"/":a.pathname,h;if(d==null)h=s;else{let b=r.length-1;if(!n&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),b-=1;a.pathname=S.join("/")}h=b>=0?r[b]:"/"}let f=gF(a,h),x=d&&d!=="/"&&d.endsWith("/"),p=(l||d===".")&&s.endsWith("/");return!f.pathname.endsWith("/")&&(x||p)&&(f.pathname+="/"),f}var Pl=e=>e.join("/").replace(/\/\/+/g,"/"),pF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,bF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function vF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var JO=["POST","PUT","PATCH","DELETE"];new Set(JO);var NF=["GET",...JO];new Set(NF);var Mu=v.createContext(null);Mu.displayName="DataRouter";var dp=v.createContext(null);dp.displayName="DataRouterState";v.createContext(!1);var eP=v.createContext({isTransitioning:!1});eP.displayName="ViewTransition";var jF=v.createContext(new Map);jF.displayName="Fetchers";var wF=v.createContext(null);wF.displayName="Await";var wi=v.createContext(null);wi.displayName="Navigation";var K0=v.createContext(null);K0.displayName="Location";var Si=v.createContext({outlet:null,matches:[],isDataRoute:!1});Si.displayName="Route";var uj=v.createContext(null);uj.displayName="RouteError";function SF(e,{relative:r}={}){us(Lu(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=v.useContext(wi),{hash:a,pathname:l,search:d}=Z0(e,{relative:r}),h=l;return s!=="/"&&(h=l==="/"?s:Pl([s,l])),n.createHref({pathname:h,search:d,hash:a})}function Lu(){return v.useContext(K0)!=null}function Sa(){return us(Lu(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(K0).location}var tP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rP(e){v.useContext(wi).static||v.useLayoutEffect(e)}function up(){let{isDataRoute:e}=v.useContext(Si);return e?BF():CF()}function CF(){us(Lu(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(Mu),{basename:r,navigator:s}=v.useContext(wi),{matches:n}=v.useContext(Si),{pathname:a}=Sa(),l=JSON.stringify(cj(n)),d=v.useRef(!1);return rP(()=>{d.current=!0}),v.useCallback((f,x={})=>{if(Wa(d.current,tP),!d.current)return;if(typeof f=="number"){s.go(f);return}let p=dj(f,JSON.parse(l),a,x.relative==="path");e==null&&r!=="/"&&(p.pathname=p.pathname==="/"?r:Pl([r,p.pathname])),(x.replace?s.replace:s.push)(p,x.state,x)},[r,s,l,a,e])}var AF=v.createContext(null);function EF(e){let r=v.useContext(Si).outlet;return v.useMemo(()=>r&&v.createElement(AF.Provider,{value:e},r),[r,e])}function Z0(e,{relative:r}={}){let{matches:s}=v.useContext(Si),{pathname:n}=Sa(),a=JSON.stringify(cj(s));return v.useMemo(()=>dj(e,JSON.parse(a),n,r==="path"),[e,a,n,r])}function TF(e,r){return sP(e,r)}function sP(e,r,s,n,a){us(Lu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=v.useContext(wi),{matches:d}=v.useContext(Si),h=d[d.length-1],f=h?h.params:{},x=h?h.pathname:"/",p=h?h.pathnameBase:"/",b=h&&h.route;{let L=b&&b.path||"";nP(x,!b||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let S=Sa(),T;if(r){let L=typeof r=="string"?Ru(r):r;us(p==="/"||L.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${L.pathname}" was given in the \`location\` prop.`),T=L}else T=S;let A=T.pathname||"/",P=A;if(p!=="/"){let L=p.replace(/^\//,"").split("/");P="/"+A.replace(/^\//,"").split("/").slice(L.length).join("/")}let D=KO(e,{pathname:P});Wa(b||D!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Wa(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=_F(D&&D.map(L=>Object.assign({},L,{params:Object.assign({},f,L.params),pathname:Pl([p,l.encodeLocation?l.encodeLocation(L.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?p:Pl([p,l.encodeLocation?l.encodeLocation(L.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathnameBase])})),d,s,n,a);return r&&I?v.createElement(K0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},I):I}function DF(){let e=FF(),r=vF(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:l},"ErrorBoundary")," or"," ",v.createElement("code",{style:l},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},r),s?v.createElement("pre",{style:a},s):null,d)}var OF=v.createElement(DF,null),PF=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){this.props.onError?this.props.onError(e,r):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?v.createElement(Si.Provider,{value:this.props.routeContext},v.createElement(uj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function kF({routeContext:e,match:r,children:s}){let n=v.useContext(Mu);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(Si.Provider,{value:e},s)}function _F(e,r=[],s=null,n=null,a=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(r.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let l=e,d=s?.errors;if(d!=null){let p=l.findIndex(b=>b.route.id&&d?.[b.route.id]!==void 0);us(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,p+1))}let h=!1,f=-1;if(s)for(let p=0;p<l.length;p++){let b=l[p];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(f=p),b.route.id){let{loaderData:S,errors:T}=s,A=b.route.loader&&!S.hasOwnProperty(b.route.id)&&(!T||T[b.route.id]===void 0);if(b.route.lazy||A){h=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}let x=s&&n?(p,b)=>{n(p,{location:s.location,params:s.matches?.[0]?.params??{},errorInfo:b})}:void 0;return l.reduceRight((p,b,S)=>{let T,A=!1,P=null,D=null;s&&(T=d&&b.route.id?d[b.route.id]:void 0,P=b.route.errorElement||OF,h&&(f<0&&S===0?(nP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,D=null):f===S&&(A=!0,D=b.route.hydrateFallbackElement||null)));let I=r.concat(l.slice(0,S+1)),L=()=>{let _;return T?_=P:A?_=D:b.route.Component?_=v.createElement(b.route.Component,null):b.route.element?_=b.route.element:_=p,v.createElement(kF,{match:b,routeContext:{outlet:p,matches:I,isDataRoute:s!=null},children:_})};return s&&(b.route.ErrorBoundary||b.route.errorElement||S===0)?v.createElement(PF,{location:s.location,revalidation:s.revalidation,component:P,error:T,children:L(),routeContext:{outlet:null,matches:I,isDataRoute:!0},onError:x}):L()},null)}function hj(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function IF(e){let r=v.useContext(Mu);return us(r,hj(e)),r}function RF(e){let r=v.useContext(dp);return us(r,hj(e)),r}function MF(e){let r=v.useContext(Si);return us(r,hj(e)),r}function mj(e){let r=MF(e),s=r.matches[r.matches.length-1];return us(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function LF(){return mj("useRouteId")}function FF(){let e=v.useContext(uj),r=RF("useRouteError"),s=mj("useRouteError");return e!==void 0?e:r.errors?.[s]}function BF(){let{router:e}=IF("useNavigate"),r=mj("useNavigate"),s=v.useRef(!1);return rP(()=>{s.current=!0}),v.useCallback(async(a,l={})=>{Wa(s.current,tP),s.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:r,...l}))},[e,r])}var f3={};function nP(e,r,s){!r&&!f3[e]&&(f3[e]=!0,Wa(!1,s))}v.memo(UF);function UF({routes:e,future:r,state:s,unstable_onError:n}){return sP(e,void 0,s,n,r)}function rx({to:e,replace:r,state:s,relative:n}){us(Lu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=v.useContext(wi);Wa(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=v.useContext(Si),{pathname:d}=Sa(),h=up(),f=dj(e,cj(l),d,n==="path"),x=JSON.stringify(f);return v.useEffect(()=>{h(JSON.parse(x),{replace:r,state:s,relative:n})},[h,x,n,r,s]),null}function zF(e){return EF(e.context)}function tr(e){us(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VF({basename:e="/",children:r=null,location:s,navigationType:n="POP",navigator:a,static:l=!1}){us(!Lu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),h=v.useMemo(()=>({basename:d,navigator:a,static:l,future:{}}),[d,a,l]);typeof s=="string"&&(s=Ru(s));let{pathname:f="/",search:x="",hash:p="",state:b=null,key:S="default"}=s,T=v.useMemo(()=>{let A=Il(f,d);return A==null?null:{location:{pathname:A,search:x,hash:p,state:b,key:S},navigationType:n}},[d,f,x,p,b,S,n]);return Wa(T!=null,`<Router basename="${d}"> is not able to match the URL "${f}${x}${p}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:v.createElement(wi.Provider,{value:h},v.createElement(K0.Provider,{children:r,value:T}))}function $F({children:e,location:r}){return TF(k2(e),r)}function k2(e,r=[]){let s=[];return v.Children.forEach(e,(n,a)=>{if(!v.isValidElement(n))return;let l=[...r,a];if(n.type===v.Fragment){s.push.apply(s,k2(n.props.children,l));return}us(n.type===tr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),us(!n.props.index||!n.props.children,"An index route cannot have child routes.");let d={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(d.children=k2(n.props.children,l)),s.push(d)}),s}var Bg="get",Ug="application/x-www-form-urlencoded";function hp(e){return e!=null&&typeof e.tagName=="string"}function qF(e){return hp(e)&&e.tagName.toLowerCase()==="button"}function HF(e){return hp(e)&&e.tagName.toLowerCase()==="form"}function GF(e){return hp(e)&&e.tagName.toLowerCase()==="input"}function YF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function WF(e,r){return e.button===0&&(!r||r==="_self")&&!YF(e)}var Xf=null;function XF(){if(Xf===null)try{new FormData(document.createElement("form"),0),Xf=!1}catch{Xf=!0}return Xf}var KF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xb(e){return e!=null&&!KF.has(e)?(Wa(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ug}"`),null):e}function ZF(e,r){let s,n,a,l,d;if(HF(e)){let h=e.getAttribute("action");n=h?Il(h,r):null,s=e.getAttribute("method")||Bg,a=xb(e.getAttribute("enctype"))||Ug,l=new FormData(e)}else if(qF(e)||GF(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||h.getAttribute("action");if(n=f?Il(f,r):null,s=e.getAttribute("formmethod")||h.getAttribute("method")||Bg,a=xb(e.getAttribute("formenctype"))||xb(h.getAttribute("enctype"))||Ug,l=new FormData(h,e),!XF()){let{name:x,type:p,value:b}=e;if(p==="image"){let S=x?`${x}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else x&&l.append(x,b)}}else{if(hp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Bg,n=null,a=Ug,d=e}return l&&a==="text/plain"&&(d=l,l=void 0),{action:n,method:s.toLowerCase(),encType:a,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fj(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function QF(e,r,s){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${s}`:r&&Il(n.pathname,r)==="/"?n.pathname=`${r.replace(/\/$/,"")}/_root.${s}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${s}`,n}async function JF(e,r){if(e.id in r)return r[e.id];try{let s=await import(e.module);return r[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function eB(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function tB(e,r,s){let n=await Promise.all(e.map(async a=>{let l=r.routes[a.route.id];if(l){let d=await JF(l,s);return d.links?d.links():[]}return[]}));return aB(n.flat(1).filter(eB).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function g3(e,r,s,n,a,l){let d=(f,x)=>s[x]?f.route.id!==s[x].route.id:!0,h=(f,x)=>s[x].pathname!==f.pathname||s[x].route.path?.endsWith("*")&&s[x].params["*"]!==f.params["*"];return l==="assets"?r.filter((f,x)=>d(f,x)||h(f,x)):l==="data"?r.filter((f,x)=>{let p=n.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(d(f,x)||h(f,x))return!0;if(f.route.shouldRevalidate){let b=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function rB(e,r,{includeHydrateFallback:s}={}){return sB(e.map(n=>{let a=r.routes[n.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),s&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function sB(e){return[...new Set(e)]}function nB(e){let r={},s=Object.keys(e).sort();for(let n of s)r[n]=e[n];return r}function aB(e,r){let s=new Set;return new Set(r),e.reduce((n,a)=>{let l=JSON.stringify(nB(a));return s.has(l)||(s.add(l),n.push({key:l,link:a})),n},[])}function aP(){let e=v.useContext(Mu);return fj(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function iB(){let e=v.useContext(dp);return fj(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var gj=v.createContext(void 0);gj.displayName="FrameworkContext";function iP(){let e=v.useContext(gj);return fj(e,"You must render this element inside a <HydratedRouter> element"),e}function lB(e,r){let s=v.useContext(gj),[n,a]=v.useState(!1),[l,d]=v.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:x,onMouseLeave:p,onTouchStart:b}=r,S=v.useRef(null);v.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let P=I=>{I.forEach(L=>{d(L.isIntersecting)})},D=new IntersectionObserver(P,{threshold:.5});return S.current&&D.observe(S.current),()=>{D.disconnect()}}},[e]),v.useEffect(()=>{if(n){let P=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(P)}}},[n]);let T=()=>{a(!0)},A=()=>{a(!1),d(!1)};return s?e!=="intent"?[l,S,{}]:[l,S,{onFocus:qh(h,T),onBlur:qh(f,A),onMouseEnter:qh(x,T),onMouseLeave:qh(p,A),onTouchStart:qh(b,T)}]:[!1,S,{}]}function qh(e,r){return s=>{e&&e(s),s.defaultPrevented||r(s)}}function oB({page:e,...r}){let{router:s}=aP(),n=v.useMemo(()=>KO(s.routes,e,s.basename),[s.routes,e,s.basename]);return n?v.createElement(dB,{page:e,matches:n,...r}):null}function cB(e){let{manifest:r,routeModules:s}=iP(),[n,a]=v.useState([]);return v.useEffect(()=>{let l=!1;return tB(e,r,s).then(d=>{l||a(d)}),()=>{l=!0}},[e,r,s]),n}function dB({page:e,matches:r,...s}){let n=Sa(),{manifest:a,routeModules:l}=iP(),{basename:d}=aP(),{loaderData:h,matches:f}=iB(),x=v.useMemo(()=>g3(e,r,f,a,n,"data"),[e,r,f,a,n]),p=v.useMemo(()=>g3(e,r,f,a,n,"assets"),[e,r,f,a,n]),b=v.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let A=new Set,P=!1;if(r.forEach(I=>{let L=a.routes[I.route.id];!L||!L.hasLoader||(!x.some(_=>_.route.id===I.route.id)&&I.route.id in h&&l[I.route.id]?.shouldRevalidate||L.hasClientLoader?P=!0:A.add(I.route.id))}),A.size===0)return[];let D=QF(e,d,"data");return P&&A.size>0&&D.searchParams.set("_routes",r.filter(I=>A.has(I.route.id)).map(I=>I.route.id).join(",")),[D.pathname+D.search]},[d,h,n,a,x,r,e,l]),S=v.useMemo(()=>rB(p,a),[p,a]),T=cB(p);return v.createElement(v.Fragment,null,b.map(A=>v.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...s})),S.map(A=>v.createElement("link",{key:A,rel:"modulepreload",href:A,...s})),T.map(({key:A,link:P})=>v.createElement("link",{key:A,nonce:s.nonce,...P})))}function uB(...e){return r=>{e.forEach(s=>{typeof s=="function"?s(r):s!=null&&(s.current=r)})}}var lP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lP&&(window.__reactRouterVersion="7.9.6")}catch{}function hB({basename:e,children:r,window:s}){let n=v.useRef();n.current==null&&(n.current=KL({window:s,v5Compat:!0}));let a=n.current,[l,d]=v.useState({action:a.action,location:a.location}),h=v.useCallback(f=>{v.startTransition(()=>d(f))},[d]);return v.useLayoutEffect(()=>a.listen(h),[a,h]),v.createElement(VF,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:a})}var oP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sx=v.forwardRef(function({onClick:r,discover:s="render",prefetch:n="none",relative:a,reloadDocument:l,replace:d,state:h,target:f,to:x,preventScrollReset:p,viewTransition:b,...S},T){let{basename:A}=v.useContext(wi),P=typeof x=="string"&&oP.test(x),D,I=!1;if(typeof x=="string"&&P&&(D=x,lP))try{let z=new URL(window.location.href),H=x.startsWith("//")?new URL(z.protocol+x):new URL(x),U=Il(H.pathname,A);H.origin===z.origin&&U!=null?x=U+H.search+H.hash:I=!0}catch{Wa(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=SF(x,{relative:a}),[_,$,F]=lB(n,S),B=xB(x,{replace:d,state:h,target:f,preventScrollReset:p,relative:a,viewTransition:b});function M(z){r&&r(z),z.defaultPrevented||B(z)}let V=v.createElement("a",{...S,...F,href:D||L,onClick:I||l?r:M,ref:uB(T,$),target:f,"data-discover":!P&&s==="render"?"true":void 0});return _&&!P?v.createElement(v.Fragment,null,V,v.createElement(oB,{page:L})):V});sx.displayName="Link";var mB=v.forwardRef(function({"aria-current":r="page",caseSensitive:s=!1,className:n="",end:a=!1,style:l,to:d,viewTransition:h,children:f,...x},p){let b=Z0(d,{relative:x.relative}),S=Sa(),T=v.useContext(dp),{navigator:A,basename:P}=v.useContext(wi),D=T!=null&&NB(b)&&h===!0,I=A.encodeLocation?A.encodeLocation(b).pathname:b.pathname,L=S.pathname,_=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;s||(L=L.toLowerCase(),_=_?_.toLowerCase():null,I=I.toLowerCase()),_&&P&&(_=Il(_,P)||_);const $=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let F=L===I||!a&&L.startsWith(I)&&L.charAt($)==="/",B=_!=null&&(_===I||!a&&_.startsWith(I)&&_.charAt(I.length)==="/"),M={isActive:F,isPending:B,isTransitioning:D},V=F?r:void 0,z;typeof n=="function"?z=n(M):z=[n,F?"active":null,B?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let H=typeof l=="function"?l(M):l;return v.createElement(sx,{...x,"aria-current":V,className:z,ref:p,style:H,to:d,viewTransition:h},typeof f=="function"?f(M):f)});mB.displayName="NavLink";var fB=v.forwardRef(({discover:e="render",fetcherKey:r,navigate:s,reloadDocument:n,replace:a,state:l,method:d=Bg,action:h,onSubmit:f,relative:x,preventScrollReset:p,viewTransition:b,...S},T)=>{let A=bB(),P=vB(h,{relative:x}),D=d.toLowerCase()==="get"?"get":"post",I=typeof h=="string"&&oP.test(h),L=_=>{if(f&&f(_),_.defaultPrevented)return;_.preventDefault();let $=_.nativeEvent.submitter,F=$?.getAttribute("formmethod")||d;A($||_.currentTarget,{fetcherKey:r,method:F,navigate:s,replace:a,state:l,relative:x,preventScrollReset:p,viewTransition:b})};return v.createElement("form",{ref:T,method:D,action:P,onSubmit:n?f:L,...S,"data-discover":!I&&e==="render"?"true":void 0})});fB.displayName="Form";function gB(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cP(e){let r=v.useContext(Mu);return us(r,gB(e)),r}function xB(e,{target:r,replace:s,state:n,preventScrollReset:a,relative:l,viewTransition:d}={}){let h=up(),f=Sa(),x=Z0(e,{relative:l});return v.useCallback(p=>{if(WF(p,r)){p.preventDefault();let b=s!==void 0?s:w0(f)===w0(x);h(e,{replace:b,state:n,preventScrollReset:a,relative:l,viewTransition:d})}},[f,h,x,s,n,r,e,a,l,d])}var pB=0,yB=()=>`__${String(++pB)}__`;function bB(){let{router:e}=cP("useSubmit"),{basename:r}=v.useContext(wi),s=LF();return v.useCallback(async(n,a={})=>{let{action:l,method:d,encType:h,formData:f,body:x}=ZF(n,r);if(a.navigate===!1){let p=a.fetcherKey||yB();await e.fetch(p,s,a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:x,formMethod:a.method||d,formEncType:a.encType||h,flushSync:a.flushSync})}else await e.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:x,formMethod:a.method||d,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,r,s])}function vB(e,{relative:r}={}){let{basename:s}=v.useContext(wi),n=v.useContext(Si);us(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),l={...Z0(e||".",{relative:r})},d=Sa();if(e==null){l.search=d.search;let h=new URLSearchParams(l.search),f=h.getAll("index");if(f.some(p=>p==="")){h.delete("index"),f.filter(b=>b).forEach(b=>h.append("index",b));let p=h.toString();l.search=p?`?${p}`:""}}return(!e||e===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(l.pathname=l.pathname==="/"?s:Pl([s,l.pathname])),w0(l)}function NB(e,{relative:r}={}){let s=v.useContext(eP);us(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=cP("useViewTransitionState"),a=Z0(e,{relative:r});if(!s.isTransitioning)return!1;let l=Il(s.currentLocation.pathname,n)||s.currentLocation.pathname,d=Il(s.nextLocation.pathname,n)||s.nextLocation.pathname;return tx(a.pathname,d)!=null||tx(a.pathname,l)!=null}var xj=XO();function dP(e,r){return function(){return e.apply(r,arguments)}}const{toString:jB}=Object.prototype,{getPrototypeOf:pj}=Object,{iterator:mp,toStringTag:uP}=Symbol,fp=(e=>r=>{const s=jB.call(r);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Ci=e=>(e=e.toLowerCase(),r=>fp(r)===e),gp=e=>r=>typeof r===e,{isArray:Fu}=Array,xu=gp("undefined");function Q0(e){return e!==null&&!xu(e)&&e.constructor!==null&&!xu(e.constructor)&&ea(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const hP=Ci("ArrayBuffer");function wB(e){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(e):r=e&&e.buffer&&hP(e.buffer),r}const SB=gp("string"),ea=gp("function"),mP=gp("number"),J0=e=>e!==null&&typeof e=="object",CB=e=>e===!0||e===!1,zg=e=>{if(fp(e)!=="object")return!1;const r=pj(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(uP in e)&&!(mp in e)},AB=e=>{if(!J0(e)||Q0(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},EB=Ci("Date"),TB=Ci("File"),DB=Ci("Blob"),OB=Ci("FileList"),PB=e=>J0(e)&&ea(e.pipe),kB=e=>{let r;return e&&(typeof FormData=="function"&&e instanceof FormData||ea(e.append)&&((r=fp(e))==="formdata"||r==="object"&&ea(e.toString)&&e.toString()==="[object FormData]"))},_B=Ci("URLSearchParams"),[IB,RB,MB,LB]=["ReadableStream","Request","Response","Headers"].map(Ci),FB=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function em(e,r,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Fu(e))for(n=0,a=e.length;n<a;n++)r.call(null,e[n],n,e);else{if(Q0(e))return;const l=s?Object.getOwnPropertyNames(e):Object.keys(e),d=l.length;let h;for(n=0;n<d;n++)h=l[n],r.call(null,e[h],h,e)}}function fP(e,r){if(Q0(e))return null;r=r.toLowerCase();const s=Object.keys(e);let n=s.length,a;for(;n-- >0;)if(a=s[n],r===a.toLowerCase())return a;return null}const Gc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gP=e=>!xu(e)&&e!==Gc;function _2(){const{caseless:e,skipUndefined:r}=gP(this)&&this||{},s={},n=(a,l)=>{const d=e&&fP(s,l)||l;zg(s[d])&&zg(a)?s[d]=_2(s[d],a):zg(a)?s[d]=_2({},a):Fu(a)?s[d]=a.slice():(!r||!xu(a))&&(s[d]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&em(arguments[a],n);return s}const BB=(e,r,s,{allOwnKeys:n}={})=>(em(r,(a,l)=>{s&&ea(a)?e[l]=dP(a,s):e[l]=a},{allOwnKeys:n}),e),UB=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),zB=(e,r,s,n)=>{e.prototype=Object.create(r.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:r.prototype}),s&&Object.assign(e.prototype,s)},VB=(e,r,s,n)=>{let a,l,d;const h={};if(r=r||{},e==null)return r;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)d=a[l],(!n||n(d,e,r))&&!h[d]&&(r[d]=e[d],h[d]=!0);e=s!==!1&&pj(e)}while(e&&(!s||s(e,r))&&e!==Object.prototype);return r},$B=(e,r,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=r.length;const n=e.indexOf(r,s);return n!==-1&&n===s},qB=e=>{if(!e)return null;if(Fu(e))return e;let r=e.length;if(!mP(r))return null;const s=new Array(r);for(;r-- >0;)s[r]=e[r];return s},HB=(e=>r=>e&&r instanceof e)(typeof Uint8Array<"u"&&pj(Uint8Array)),GB=(e,r)=>{const n=(e&&e[mp]).call(e);let a;for(;(a=n.next())&&!a.done;){const l=a.value;r.call(e,l[0],l[1])}},YB=(e,r)=>{let s;const n=[];for(;(s=e.exec(r))!==null;)n.push(s);return n},WB=Ci("HTMLFormElement"),XB=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,a){return n.toUpperCase()+a}),x3=(({hasOwnProperty:e})=>(r,s)=>e.call(r,s))(Object.prototype),KB=Ci("RegExp"),xP=(e,r)=>{const s=Object.getOwnPropertyDescriptors(e),n={};em(s,(a,l)=>{let d;(d=r(a,l,e))!==!1&&(n[l]=d||a)}),Object.defineProperties(e,n)},ZB=e=>{xP(e,(r,s)=>{if(ea(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=e[s];if(ea(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},QB=(e,r)=>{const s={},n=a=>{a.forEach(l=>{s[l]=!0})};return Fu(e)?n(e):n(String(e).split(r)),s},JB=()=>{},eU=(e,r)=>e!=null&&Number.isFinite(e=+e)?e:r;function tU(e){return!!(e&&ea(e.append)&&e[uP]==="FormData"&&e[mp])}const rU=e=>{const r=new Array(10),s=(n,a)=>{if(J0(n)){if(r.indexOf(n)>=0)return;if(Q0(n))return n;if(!("toJSON"in n)){r[a]=n;const l=Fu(n)?[]:{};return em(n,(d,h)=>{const f=s(d,a+1);!xu(f)&&(l[h]=f)}),r[a]=void 0,l}}return n};return s(e,0)},sU=Ci("AsyncFunction"),nU=e=>e&&(J0(e)||ea(e))&&ea(e.then)&&ea(e.catch),pP=((e,r)=>e?setImmediate:r?((s,n)=>(Gc.addEventListener("message",({source:a,data:l})=>{a===Gc&&l===s&&n.length&&n.shift()()},!1),a=>{n.push(a),Gc.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",ea(Gc.postMessage)),aU=typeof queueMicrotask<"u"?queueMicrotask.bind(Gc):typeof process<"u"&&process.nextTick||pP,iU=e=>e!=null&&ea(e[mp]),Be={isArray:Fu,isArrayBuffer:hP,isBuffer:Q0,isFormData:kB,isArrayBufferView:wB,isString:SB,isNumber:mP,isBoolean:CB,isObject:J0,isPlainObject:zg,isEmptyObject:AB,isReadableStream:IB,isRequest:RB,isResponse:MB,isHeaders:LB,isUndefined:xu,isDate:EB,isFile:TB,isBlob:DB,isRegExp:KB,isFunction:ea,isStream:PB,isURLSearchParams:_B,isTypedArray:HB,isFileList:OB,forEach:em,merge:_2,extend:BB,trim:FB,stripBOM:UB,inherits:zB,toFlatObject:VB,kindOf:fp,kindOfTest:Ci,endsWith:$B,toArray:qB,forEachEntry:GB,matchAll:YB,isHTMLForm:WB,hasOwnProperty:x3,hasOwnProp:x3,reduceDescriptors:xP,freezeMethods:ZB,toObjectSet:QB,toCamelCase:XB,noop:JB,toFiniteNumber:eU,findKey:fP,global:Gc,isContextDefined:gP,isSpecCompliantForm:tU,toJSONObject:rU,isAsyncFn:sU,isThenable:nU,setImmediate:pP,asap:aU,isIterable:iU};function $t(e,r,s,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",r&&(this.code=r),s&&(this.config=s),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}Be.inherits($t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Be.toJSONObject(this.config),code:this.code,status:this.status}}});const yP=$t.prototype,bP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{bP[e]={value:e}});Object.defineProperties($t,bP);Object.defineProperty(yP,"isAxiosError",{value:!0});$t.from=(e,r,s,n,a,l)=>{const d=Object.create(yP);Be.toFlatObject(e,d,function(p){return p!==Error.prototype},x=>x!=="isAxiosError");const h=e&&e.message?e.message:"Error",f=r==null&&e?e.code:r;return $t.call(d,h,f,s,n,a),e&&d.cause==null&&Object.defineProperty(d,"cause",{value:e,configurable:!0}),d.name=e&&e.name||"Error",l&&Object.assign(d,l),d};const lU=null;function I2(e){return Be.isPlainObject(e)||Be.isArray(e)}function vP(e){return Be.endsWith(e,"[]")?e.slice(0,-2):e}function p3(e,r,s){return e?e.concat(r).map(function(a,l){return a=vP(a),!s&&l?"["+a+"]":a}).join(s?".":""):r}function oU(e){return Be.isArray(e)&&!e.some(I2)}const cU=Be.toFlatObject(Be,{},null,function(r){return/^is[A-Z]/.test(r)});function xp(e,r,s){if(!Be.isObject(e))throw new TypeError("target must be an object");r=r||new FormData,s=Be.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(P,D){return!Be.isUndefined(D[P])});const n=s.metaTokens,a=s.visitor||p,l=s.dots,d=s.indexes,f=(s.Blob||typeof Blob<"u"&&Blob)&&Be.isSpecCompliantForm(r);if(!Be.isFunction(a))throw new TypeError("visitor must be a function");function x(A){if(A===null)return"";if(Be.isDate(A))return A.toISOString();if(Be.isBoolean(A))return A.toString();if(!f&&Be.isBlob(A))throw new $t("Blob is not supported. Use a Buffer instead.");return Be.isArrayBuffer(A)||Be.isTypedArray(A)?f&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function p(A,P,D){let I=A;if(A&&!D&&typeof A=="object"){if(Be.endsWith(P,"{}"))P=n?P:P.slice(0,-2),A=JSON.stringify(A);else if(Be.isArray(A)&&oU(A)||(Be.isFileList(A)||Be.endsWith(P,"[]"))&&(I=Be.toArray(A)))return P=vP(P),I.forEach(function(_,$){!(Be.isUndefined(_)||_===null)&&r.append(d===!0?p3([P],$,l):d===null?P:P+"[]",x(_))}),!1}return I2(A)?!0:(r.append(p3(D,P,l),x(A)),!1)}const b=[],S=Object.assign(cU,{defaultVisitor:p,convertValue:x,isVisitable:I2});function T(A,P){if(!Be.isUndefined(A)){if(b.indexOf(A)!==-1)throw Error("Circular reference detected in "+P.join("."));b.push(A),Be.forEach(A,function(I,L){(!(Be.isUndefined(I)||I===null)&&a.call(r,I,Be.isString(L)?L.trim():L,P,S))===!0&&T(I,P?P.concat(L):[L])}),b.pop()}}if(!Be.isObject(e))throw new TypeError("data must be an object");return T(e),r}function y3(e){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function yj(e,r){this._pairs=[],e&&xp(e,this,r)}const NP=yj.prototype;NP.append=function(r,s){this._pairs.push([r,s])};NP.toString=function(r){const s=r?function(n){return r.call(this,n,y3)}:y3;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function dU(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function jP(e,r,s){if(!r)return e;const n=s&&s.encode||dU;Be.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let l;if(a?l=a(r,s):l=Be.isURLSearchParams(r)?r.toString():new yj(r,s).toString(n),l){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class b3{constructor(){this.handlers=[]}use(r,s,n){return this.handlers.push({fulfilled:r,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){Be.forEach(this.handlers,function(n){n!==null&&r(n)})}}const wP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uU=typeof URLSearchParams<"u"?URLSearchParams:yj,hU=typeof FormData<"u"?FormData:null,mU=typeof Blob<"u"?Blob:null,fU={isBrowser:!0,classes:{URLSearchParams:uU,FormData:hU,Blob:mU},protocols:["http","https","file","blob","url","data"]},bj=typeof window<"u"&&typeof document<"u",R2=typeof navigator=="object"&&navigator||void 0,gU=bj&&(!R2||["ReactNative","NativeScript","NS"].indexOf(R2.product)<0),xU=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",pU=bj&&window.location.href||"http://localhost",yU=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bj,hasStandardBrowserEnv:gU,hasStandardBrowserWebWorkerEnv:xU,navigator:R2,origin:pU},Symbol.toStringTag,{value:"Module"})),En={...yU,...fU};function bU(e,r){return xp(e,new En.classes.URLSearchParams,{visitor:function(s,n,a,l){return En.isNode&&Be.isBuffer(s)?(this.append(n,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...r})}function vU(e){return Be.matchAll(/\w+|\[(\w*)]/g,e).map(r=>r[0]==="[]"?"":r[1]||r[0])}function NU(e){const r={},s=Object.keys(e);let n;const a=s.length;let l;for(n=0;n<a;n++)l=s[n],r[l]=e[l];return r}function SP(e){function r(s,n,a,l){let d=s[l++];if(d==="__proto__")return!0;const h=Number.isFinite(+d),f=l>=s.length;return d=!d&&Be.isArray(a)?a.length:d,f?(Be.hasOwnProp(a,d)?a[d]=[a[d],n]:a[d]=n,!h):((!a[d]||!Be.isObject(a[d]))&&(a[d]=[]),r(s,n,a[d],l)&&Be.isArray(a[d])&&(a[d]=NU(a[d])),!h)}if(Be.isFormData(e)&&Be.isFunction(e.entries)){const s={};return Be.forEachEntry(e,(n,a)=>{r(vU(n),a,s,0)}),s}return null}function jU(e,r,s){if(Be.isString(e))try{return(r||JSON.parse)(e),Be.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(e)}const tm={transitional:wP,adapter:["xhr","http","fetch"],transformRequest:[function(r,s){const n=s.getContentType()||"",a=n.indexOf("application/json")>-1,l=Be.isObject(r);if(l&&Be.isHTMLForm(r)&&(r=new FormData(r)),Be.isFormData(r))return a?JSON.stringify(SP(r)):r;if(Be.isArrayBuffer(r)||Be.isBuffer(r)||Be.isStream(r)||Be.isFile(r)||Be.isBlob(r)||Be.isReadableStream(r))return r;if(Be.isArrayBufferView(r))return r.buffer;if(Be.isURLSearchParams(r))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let h;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return bU(r,this.formSerializer).toString();if((h=Be.isFileList(r))||n.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return xp(h?{"files[]":r}:r,f&&new f,this.formSerializer)}}return l||a?(s.setContentType("application/json",!1),jU(r)):r}],transformResponse:[function(r){const s=this.transitional||tm.transitional,n=s&&s.forcedJSONParsing,a=this.responseType==="json";if(Be.isResponse(r)||Be.isReadableStream(r))return r;if(r&&Be.isString(r)&&(n&&!this.responseType||a)){const d=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(r,this.parseReviver)}catch(h){if(d)throw h.name==="SyntaxError"?$t.from(h,$t.ERR_BAD_RESPONSE,this,null,this.response):h}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:En.classes.FormData,Blob:En.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Be.forEach(["delete","get","head","post","put","patch"],e=>{tm.headers[e]={}});const wU=Be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),SU=e=>{const r={};let s,n,a;return e&&e.split(`
`).forEach(function(d){a=d.indexOf(":"),s=d.substring(0,a).trim().toLowerCase(),n=d.substring(a+1).trim(),!(!s||r[s]&&wU[s])&&(s==="set-cookie"?r[s]?r[s].push(n):r[s]=[n]:r[s]=r[s]?r[s]+", "+n:n)}),r},v3=Symbol("internals");function Hh(e){return e&&String(e).trim().toLowerCase()}function Vg(e){return e===!1||e==null?e:Be.isArray(e)?e.map(Vg):String(e)}function CU(e){const r=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)r[n[1]]=n[2];return r}const AU=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function pb(e,r,s,n,a){if(Be.isFunction(n))return n.call(this,r,s);if(a&&(r=s),!!Be.isString(r)){if(Be.isString(n))return r.indexOf(n)!==-1;if(Be.isRegExp(n))return n.test(r)}}function EU(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,s,n)=>s.toUpperCase()+n)}function TU(e,r){const s=Be.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+s,{value:function(a,l,d){return this[n].call(this,r,a,l,d)},configurable:!0})})}let ta=class{constructor(r){r&&this.set(r)}set(r,s,n){const a=this;function l(h,f,x){const p=Hh(f);if(!p)throw new Error("header name must be a non-empty string");const b=Be.findKey(a,p);(!b||a[b]===void 0||x===!0||x===void 0&&a[b]!==!1)&&(a[b||f]=Vg(h))}const d=(h,f)=>Be.forEach(h,(x,p)=>l(x,p,f));if(Be.isPlainObject(r)||r instanceof this.constructor)d(r,s);else if(Be.isString(r)&&(r=r.trim())&&!AU(r))d(SU(r),s);else if(Be.isObject(r)&&Be.isIterable(r)){let h={},f,x;for(const p of r){if(!Be.isArray(p))throw TypeError("Object iterator must return a key-value pair");h[x=p[0]]=(f=h[x])?Be.isArray(f)?[...f,p[1]]:[f,p[1]]:p[1]}d(h,s)}else r!=null&&l(s,r,n);return this}get(r,s){if(r=Hh(r),r){const n=Be.findKey(this,r);if(n){const a=this[n];if(!s)return a;if(s===!0)return CU(a);if(Be.isFunction(s))return s.call(this,a,n);if(Be.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,s){if(r=Hh(r),r){const n=Be.findKey(this,r);return!!(n&&this[n]!==void 0&&(!s||pb(this,this[n],n,s)))}return!1}delete(r,s){const n=this;let a=!1;function l(d){if(d=Hh(d),d){const h=Be.findKey(n,d);h&&(!s||pb(n,n[h],h,s))&&(delete n[h],a=!0)}}return Be.isArray(r)?r.forEach(l):l(r),a}clear(r){const s=Object.keys(this);let n=s.length,a=!1;for(;n--;){const l=s[n];(!r||pb(this,this[l],l,r,!0))&&(delete this[l],a=!0)}return a}normalize(r){const s=this,n={};return Be.forEach(this,(a,l)=>{const d=Be.findKey(n,l);if(d){s[d]=Vg(a),delete s[l];return}const h=r?EU(l):String(l).trim();h!==l&&delete s[l],s[h]=Vg(a),n[h]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const s=Object.create(null);return Be.forEach(this,(n,a)=>{n!=null&&n!==!1&&(s[a]=r&&Be.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,s])=>r+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...s){const n=new this(r);return s.forEach(a=>n.set(a)),n}static accessor(r){const n=(this[v3]=this[v3]={accessors:{}}).accessors,a=this.prototype;function l(d){const h=Hh(d);n[h]||(TU(a,d),n[h]=!0)}return Be.isArray(r)?r.forEach(l):l(r),this}};ta.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Be.reduceDescriptors(ta.prototype,({value:e},r)=>{let s=r[0].toUpperCase()+r.slice(1);return{get:()=>e,set(n){this[s]=n}}});Be.freezeMethods(ta);function yb(e,r){const s=this||tm,n=r||s,a=ta.from(n.headers);let l=n.data;return Be.forEach(e,function(h){l=h.call(s,l,a.normalize(),r?r.status:void 0)}),a.normalize(),l}function CP(e){return!!(e&&e.__CANCEL__)}function Bu(e,r,s){$t.call(this,e??"canceled",$t.ERR_CANCELED,r,s),this.name="CanceledError"}Be.inherits(Bu,$t,{__CANCEL__:!0});function AP(e,r,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?e(s):r(new $t("Request failed with status code "+s.status,[$t.ERR_BAD_REQUEST,$t.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function DU(e){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}function OU(e,r){e=e||10;const s=new Array(e),n=new Array(e);let a=0,l=0,d;return r=r!==void 0?r:1e3,function(f){const x=Date.now(),p=n[l];d||(d=x),s[a]=f,n[a]=x;let b=l,S=0;for(;b!==a;)S+=s[b++],b=b%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),x-d<r)return;const T=p&&x-p;return T?Math.round(S*1e3/T):void 0}}function PU(e,r){let s=0,n=1e3/r,a,l;const d=(x,p=Date.now())=>{s=p,a=null,l&&(clearTimeout(l),l=null),e(...x)};return[(...x)=>{const p=Date.now(),b=p-s;b>=n?d(x,p):(a=x,l||(l=setTimeout(()=>{l=null,d(a)},n-b)))},()=>a&&d(a)]}const nx=(e,r,s=3)=>{let n=0;const a=OU(50,250);return PU(l=>{const d=l.loaded,h=l.lengthComputable?l.total:void 0,f=d-n,x=a(f),p=d<=h;n=d;const b={loaded:d,total:h,progress:h?d/h:void 0,bytes:f,rate:x||void 0,estimated:x&&h&&p?(h-d)/x:void 0,event:l,lengthComputable:h!=null,[r?"download":"upload"]:!0};e(b)},s)},N3=(e,r)=>{const s=e!=null;return[n=>r[0]({lengthComputable:s,total:e,loaded:n}),r[1]]},j3=e=>(...r)=>Be.asap(()=>e(...r)),kU=En.hasStandardBrowserEnv?((e,r)=>s=>(s=new URL(s,En.origin),e.protocol===s.protocol&&e.host===s.host&&(r||e.port===s.port)))(new URL(En.origin),En.navigator&&/(msie|trident)/i.test(En.navigator.userAgent)):()=>!0,_U=En.hasStandardBrowserEnv?{write(e,r,s,n,a,l,d){if(typeof document>"u")return;const h=[`${e}=${encodeURIComponent(r)}`];Be.isNumber(s)&&h.push(`expires=${new Date(s).toUTCString()}`),Be.isString(n)&&h.push(`path=${n}`),Be.isString(a)&&h.push(`domain=${a}`),l===!0&&h.push("secure"),Be.isString(d)&&h.push(`SameSite=${d}`),document.cookie=h.join("; ")},read(e){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function IU(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function RU(e,r){return r?e.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):e}function EP(e,r,s){let n=!IU(r);return e&&(n||s==!1)?RU(e,r):r}const w3=e=>e instanceof ta?{...e}:e;function nd(e,r){r=r||{};const s={};function n(x,p,b,S){return Be.isPlainObject(x)&&Be.isPlainObject(p)?Be.merge.call({caseless:S},x,p):Be.isPlainObject(p)?Be.merge({},p):Be.isArray(p)?p.slice():p}function a(x,p,b,S){if(Be.isUndefined(p)){if(!Be.isUndefined(x))return n(void 0,x,b,S)}else return n(x,p,b,S)}function l(x,p){if(!Be.isUndefined(p))return n(void 0,p)}function d(x,p){if(Be.isUndefined(p)){if(!Be.isUndefined(x))return n(void 0,x)}else return n(void 0,p)}function h(x,p,b){if(b in r)return n(x,p);if(b in e)return n(void 0,x)}const f={url:l,method:l,data:l,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:h,headers:(x,p,b)=>a(w3(x),w3(p),b,!0)};return Be.forEach(Object.keys({...e,...r}),function(p){const b=f[p]||a,S=b(e[p],r[p],p);Be.isUndefined(S)&&b!==h||(s[p]=S)}),s}const TP=e=>{const r=nd({},e);let{data:s,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:l,headers:d,auth:h}=r;if(r.headers=d=ta.from(d),r.url=jP(EP(r.baseURL,r.url,r.allowAbsoluteUrls),e.params,e.paramsSerializer),h&&d.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),Be.isFormData(s)){if(En.hasStandardBrowserEnv||En.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(Be.isFunction(s.getHeaders)){const f=s.getHeaders(),x=["content-type","content-length"];Object.entries(f).forEach(([p,b])=>{x.includes(p.toLowerCase())&&d.set(p,b)})}}if(En.hasStandardBrowserEnv&&(n&&Be.isFunction(n)&&(n=n(r)),n||n!==!1&&kU(r.url))){const f=a&&l&&_U.read(l);f&&d.set(a,f)}return r},MU=typeof XMLHttpRequest<"u",LU=MU&&function(e){return new Promise(function(s,n){const a=TP(e);let l=a.data;const d=ta.from(a.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:x}=a,p,b,S,T,A;function P(){T&&T(),A&&A(),a.cancelToken&&a.cancelToken.unsubscribe(p),a.signal&&a.signal.removeEventListener("abort",p)}let D=new XMLHttpRequest;D.open(a.method.toUpperCase(),a.url,!0),D.timeout=a.timeout;function I(){if(!D)return;const _=ta.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),F={data:!h||h==="text"||h==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:_,config:e,request:D};AP(function(M){s(M),P()},function(M){n(M),P()},F),D=null}"onloadend"in D?D.onloadend=I:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(I)},D.onabort=function(){D&&(n(new $t("Request aborted",$t.ECONNABORTED,e,D)),D=null)},D.onerror=function($){const F=$&&$.message?$.message:"Network Error",B=new $t(F,$t.ERR_NETWORK,e,D);B.event=$||null,n(B),D=null},D.ontimeout=function(){let $=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const F=a.transitional||wP;a.timeoutErrorMessage&&($=a.timeoutErrorMessage),n(new $t($,F.clarifyTimeoutError?$t.ETIMEDOUT:$t.ECONNABORTED,e,D)),D=null},l===void 0&&d.setContentType(null),"setRequestHeader"in D&&Be.forEach(d.toJSON(),function($,F){D.setRequestHeader(F,$)}),Be.isUndefined(a.withCredentials)||(D.withCredentials=!!a.withCredentials),h&&h!=="json"&&(D.responseType=a.responseType),x&&([S,A]=nx(x,!0),D.addEventListener("progress",S)),f&&D.upload&&([b,T]=nx(f),D.upload.addEventListener("progress",b),D.upload.addEventListener("loadend",T)),(a.cancelToken||a.signal)&&(p=_=>{D&&(n(!_||_.type?new Bu(null,e,D):_),D.abort(),D=null)},a.cancelToken&&a.cancelToken.subscribe(p),a.signal&&(a.signal.aborted?p():a.signal.addEventListener("abort",p)));const L=DU(a.url);if(L&&En.protocols.indexOf(L)===-1){n(new $t("Unsupported protocol "+L+":",$t.ERR_BAD_REQUEST,e));return}D.send(l||null)})},FU=(e,r)=>{const{length:s}=e=e?e.filter(Boolean):[];if(r||s){let n=new AbortController,a;const l=function(x){if(!a){a=!0,h();const p=x instanceof Error?x:this.reason;n.abort(p instanceof $t?p:new Bu(p instanceof Error?p.message:p))}};let d=r&&setTimeout(()=>{d=null,l(new $t(`timeout ${r} of ms exceeded`,$t.ETIMEDOUT))},r);const h=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(x=>{x.unsubscribe?x.unsubscribe(l):x.removeEventListener("abort",l)}),e=null)};e.forEach(x=>x.addEventListener("abort",l));const{signal:f}=n;return f.unsubscribe=()=>Be.asap(h),f}},BU=function*(e,r){let s=e.byteLength;if(s<r){yield e;return}let n=0,a;for(;n<s;)a=n+r,yield e.slice(n,a),n=a},UU=async function*(e,r){for await(const s of zU(e))yield*BU(s,r)},zU=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const r=e.getReader();try{for(;;){const{done:s,value:n}=await r.read();if(s)break;yield n}}finally{await r.cancel()}},S3=(e,r,s,n)=>{const a=UU(e,r);let l=0,d,h=f=>{d||(d=!0,n&&n(f))};return new ReadableStream({async pull(f){try{const{done:x,value:p}=await a.next();if(x){h(),f.close();return}let b=p.byteLength;if(s){let S=l+=b;s(S)}f.enqueue(new Uint8Array(p))}catch(x){throw h(x),x}},cancel(f){return h(f),a.return()}},{highWaterMark:2})},C3=64*1024,{isFunction:Kf}=Be,VU=(({Request:e,Response:r})=>({Request:e,Response:r}))(Be.global),{ReadableStream:A3,TextEncoder:E3}=Be.global,T3=(e,...r)=>{try{return!!e(...r)}catch{return!1}},$U=e=>{e=Be.merge.call({skipUndefined:!0},VU,e);const{fetch:r,Request:s,Response:n}=e,a=r?Kf(r):typeof fetch=="function",l=Kf(s),d=Kf(n);if(!a)return!1;const h=a&&Kf(A3),f=a&&(typeof E3=="function"?(A=>P=>A.encode(P))(new E3):async A=>new Uint8Array(await new s(A).arrayBuffer())),x=l&&h&&T3(()=>{let A=!1;const P=new s(En.origin,{body:new A3,method:"POST",get duplex(){return A=!0,"half"}}).headers.has("Content-Type");return A&&!P}),p=d&&h&&T3(()=>Be.isReadableStream(new n("").body)),b={stream:p&&(A=>A.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(A=>{!b[A]&&(b[A]=(P,D)=>{let I=P&&P[A];if(I)return I.call(P);throw new $t(`Response type '${A}' is not supported`,$t.ERR_NOT_SUPPORT,D)})});const S=async A=>{if(A==null)return 0;if(Be.isBlob(A))return A.size;if(Be.isSpecCompliantForm(A))return(await new s(En.origin,{method:"POST",body:A}).arrayBuffer()).byteLength;if(Be.isArrayBufferView(A)||Be.isArrayBuffer(A))return A.byteLength;if(Be.isURLSearchParams(A)&&(A=A+""),Be.isString(A))return(await f(A)).byteLength},T=async(A,P)=>{const D=Be.toFiniteNumber(A.getContentLength());return D??S(P)};return async A=>{let{url:P,method:D,data:I,signal:L,cancelToken:_,timeout:$,onDownloadProgress:F,onUploadProgress:B,responseType:M,headers:V,withCredentials:z="same-origin",fetchOptions:H}=TP(A),U=r||fetch;M=M?(M+"").toLowerCase():"text";let G=FU([L,_&&_.toAbortSignal()],$),Q=null;const ce=G&&G.unsubscribe&&(()=>{G.unsubscribe()});let ne;try{if(B&&x&&D!=="get"&&D!=="head"&&(ne=await T(V,I))!==0){let X=new s(P,{method:"POST",body:I,duplex:"half"}),ae;if(Be.isFormData(I)&&(ae=X.headers.get("content-type"))&&V.setContentType(ae),X.body){const[ve,fe]=N3(ne,nx(j3(B)));I=S3(X.body,C3,ve,fe)}}Be.isString(z)||(z=z?"include":"omit");const J=l&&"credentials"in s.prototype,W={...H,signal:G,method:D.toUpperCase(),headers:V.normalize().toJSON(),body:I,duplex:"half",credentials:J?z:void 0};Q=l&&new s(P,W);let le=await(l?U(Q,H):U(P,W));const ge=p&&(M==="stream"||M==="response");if(p&&(F||ge&&ce)){const X={};["status","statusText","headers"].forEach(se=>{X[se]=le[se]});const ae=Be.toFiniteNumber(le.headers.get("content-length")),[ve,fe]=F&&N3(ae,nx(j3(F),!0))||[];le=new n(S3(le.body,C3,ve,()=>{fe&&fe(),ce&&ce()}),X)}M=M||"text";let re=await b[Be.findKey(b,M)||"text"](le,A);return!ge&&ce&&ce(),await new Promise((X,ae)=>{AP(X,ae,{data:re,headers:ta.from(le.headers),status:le.status,statusText:le.statusText,config:A,request:Q})})}catch(J){throw ce&&ce(),J&&J.name==="TypeError"&&/Load failed|fetch/i.test(J.message)?Object.assign(new $t("Network Error",$t.ERR_NETWORK,A,Q),{cause:J.cause||J}):$t.from(J,J&&J.code,A,Q)}}},qU=new Map,DP=e=>{let r=e&&e.env||{};const{fetch:s,Request:n,Response:a}=r,l=[n,a,s];let d=l.length,h=d,f,x,p=qU;for(;h--;)f=l[h],x=p.get(f),x===void 0&&p.set(f,x=h?new Map:$U(r)),p=x;return x};DP();const vj={http:lU,xhr:LU,fetch:{get:DP}};Be.forEach(vj,(e,r)=>{if(e){try{Object.defineProperty(e,"name",{value:r})}catch{}Object.defineProperty(e,"adapterName",{value:r})}});const D3=e=>`- ${e}`,HU=e=>Be.isFunction(e)||e===null||e===!1;function GU(e,r){e=Be.isArray(e)?e:[e];const{length:s}=e;let n,a;const l={};for(let d=0;d<s;d++){n=e[d];let h;if(a=n,!HU(n)&&(a=vj[(h=String(n)).toLowerCase()],a===void 0))throw new $t(`Unknown adapter '${h}'`);if(a&&(Be.isFunction(a)||(a=a.get(r))))break;l[h||"#"+d]=a}if(!a){const d=Object.entries(l).map(([f,x])=>`adapter ${f} `+(x===!1?"is not supported by the environment":"is not available in the build"));let h=s?d.length>1?`since :
`+d.map(D3).join(`
`):" "+D3(d[0]):"as no adapter specified";throw new $t("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return a}const OP={getAdapter:GU,adapters:vj};function bb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Bu(null,e)}function O3(e){return bb(e),e.headers=ta.from(e.headers),e.data=yb.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),OP.getAdapter(e.adapter||tm.adapter,e)(e).then(function(n){return bb(e),n.data=yb.call(e,e.transformResponse,n),n.headers=ta.from(n.headers),n},function(n){return CP(n)||(bb(e),n&&n.response&&(n.response.data=yb.call(e,e.transformResponse,n.response),n.response.headers=ta.from(n.response.headers))),Promise.reject(n)})}const PP="1.13.2",pp={};["object","boolean","number","function","string","symbol"].forEach((e,r)=>{pp[e]=function(n){return typeof n===e||"a"+(r<1?"n ":" ")+e}});const P3={};pp.transitional=function(r,s,n){function a(l,d){return"[Axios v"+PP+"] Transitional option '"+l+"'"+d+(n?". "+n:"")}return(l,d,h)=>{if(r===!1)throw new $t(a(d," has been removed"+(s?" in "+s:"")),$t.ERR_DEPRECATED);return s&&!P3[d]&&(P3[d]=!0,console.warn(a(d," has been deprecated since v"+s+" and will be removed in the near future"))),r?r(l,d,h):!0}};pp.spelling=function(r){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${r}`),!0)};function YU(e,r,s){if(typeof e!="object")throw new $t("options must be an object",$t.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const l=n[a],d=r[l];if(d){const h=e[l],f=h===void 0||d(h,l,e);if(f!==!0)throw new $t("option "+l+" must be "+f,$t.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new $t("Unknown option "+l,$t.ERR_BAD_OPTION)}}const $g={assertOptions:YU,validators:pp},Mi=$g.validators;let Zc=class{constructor(r){this.defaults=r||{},this.interceptors={request:new b3,response:new b3}}async request(r,s){try{return await this._request(r,s)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(r,s){typeof r=="string"?(s=s||{},s.url=r):s=r||{},s=nd(this.defaults,s);const{transitional:n,paramsSerializer:a,headers:l}=s;n!==void 0&&$g.assertOptions(n,{silentJSONParsing:Mi.transitional(Mi.boolean),forcedJSONParsing:Mi.transitional(Mi.boolean),clarifyTimeoutError:Mi.transitional(Mi.boolean)},!1),a!=null&&(Be.isFunction(a)?s.paramsSerializer={serialize:a}:$g.assertOptions(a,{encode:Mi.function,serialize:Mi.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),$g.assertOptions(s,{baseUrl:Mi.spelling("baseURL"),withXsrfToken:Mi.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let d=l&&Be.merge(l.common,l[s.method]);l&&Be.forEach(["delete","get","head","post","put","patch","common"],A=>{delete l[A]}),s.headers=ta.concat(d,l);const h=[];let f=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(s)===!1||(f=f&&P.synchronous,h.unshift(P.fulfilled,P.rejected))});const x=[];this.interceptors.response.forEach(function(P){x.push(P.fulfilled,P.rejected)});let p,b=0,S;if(!f){const A=[O3.bind(this),void 0];for(A.unshift(...h),A.push(...x),S=A.length,p=Promise.resolve(s);b<S;)p=p.then(A[b++],A[b++]);return p}S=h.length;let T=s;for(;b<S;){const A=h[b++],P=h[b++];try{T=A(T)}catch(D){P.call(this,D);break}}try{p=O3.call(this,T)}catch(A){return Promise.reject(A)}for(b=0,S=x.length;b<S;)p=p.then(x[b++],x[b++]);return p}getUri(r){r=nd(this.defaults,r);const s=EP(r.baseURL,r.url,r.allowAbsoluteUrls);return jP(s,r.params,r.paramsSerializer)}};Be.forEach(["delete","get","head","options"],function(r){Zc.prototype[r]=function(s,n){return this.request(nd(n||{},{method:r,url:s,data:(n||{}).data}))}});Be.forEach(["post","put","patch"],function(r){function s(n){return function(l,d,h){return this.request(nd(h||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}Zc.prototype[r]=s(),Zc.prototype[r+"Form"]=s(!0)});let WU=class kP{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const n=this;this.promise.then(a=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](a);n._listeners=null}),this.promise.then=a=>{let l;const d=new Promise(h=>{n.subscribe(h),l=h}).then(a);return d.cancel=function(){n.unsubscribe(l)},d},r(function(l,d,h){n.reason||(n.reason=new Bu(l,d,h),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const s=this._listeners.indexOf(r);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const r=new AbortController,s=n=>{r.abort(n)};return this.subscribe(s),r.signal.unsubscribe=()=>this.unsubscribe(s),r.signal}static source(){let r;return{token:new kP(function(a){r=a}),cancel:r}}};function XU(e){return function(s){return e.apply(null,s)}}function KU(e){return Be.isObject(e)&&e.isAxiosError===!0}const M2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(M2).forEach(([e,r])=>{M2[r]=e});function _P(e){const r=new Zc(e),s=dP(Zc.prototype.request,r);return Be.extend(s,Zc.prototype,r,{allOwnKeys:!0}),Be.extend(s,r,null,{allOwnKeys:!0}),s.create=function(a){return _P(nd(e,a))},s}const Ts=_P(tm);Ts.Axios=Zc;Ts.CanceledError=Bu;Ts.CancelToken=WU;Ts.isCancel=CP;Ts.VERSION=PP;Ts.toFormData=xp;Ts.AxiosError=$t;Ts.Cancel=Ts.CanceledError;Ts.all=function(r){return Promise.all(r)};Ts.spread=XU;Ts.isAxiosError=KU;Ts.mergeConfig=nd;Ts.AxiosHeaders=ta;Ts.formToJSON=e=>SP(Be.isHTMLForm(e)?new FormData(e):e);Ts.getAdapter=OP.getAdapter;Ts.HttpStatusCode=M2;Ts.default=Ts;const{Axios:Gfe,AxiosError:Yfe,CanceledError:Wfe,isCancel:Xfe,CancelToken:Kfe,VERSION:Zfe,all:Qfe,Cancel:Jfe,isAxiosError:ege,spread:tge,toFormData:rge,AxiosHeaders:sge,HttpStatusCode:nge,formToJSON:age,getAdapter:ige,mergeConfig:lge}=Ts,An={ACCESS_TOKEN:"accessToken",REFRESH_TOKEN:"refreshToken",ADMIN_DATA:"adminData",REMEMBER_ME:"rememberMe"},x0=()=>localStorage.getItem(An.REMEMBER_ME)==="true"?localStorage:sessionStorage,fi={getAccessToken:()=>{const e=x0().getItem(An.ACCESS_TOKEN);return console.log("[Storage] Getting access token:",e?"exists":"null"),e},getRefreshToken:()=>{const e=x0().getItem(An.REFRESH_TOKEN);return console.log("[Storage] Getting refresh token:",e?"exists":"null"),e},setTokens:({accessToken:e,refreshToken:r},s=!1)=>{console.log("[Storage] Setting tokens, rememberMe:",s),localStorage.setItem(An.REMEMBER_ME,String(s));const n=s?localStorage:sessionStorage;e&&n.setItem(An.ACCESS_TOKEN,e),r&&n.setItem(An.REFRESH_TOKEN,r)},setAccessToken:e=>{console.log("[Storage] Updating access token"),x0().setItem(An.ACCESS_TOKEN,e)},clearTokens:()=>{console.log("[Storage] Clearing all tokens"),localStorage.removeItem(An.ACCESS_TOKEN),localStorage.removeItem(An.REFRESH_TOKEN),localStorage.removeItem(An.REMEMBER_ME),sessionStorage.removeItem(An.ACCESS_TOKEN),sessionStorage.removeItem(An.REFRESH_TOKEN)},hasTokens:()=>!!fi.getAccessToken()&&!!fi.getRefreshToken()},Uo={getAdmin:()=>{try{const e=x0().getItem(An.ADMIN_DATA),r=e?JSON.parse(e):null;return console.log("[Storage] Getting admin data:",r?r.email:"null"),r}catch(e){return console.error("[Storage] Error parsing admin data:",e),null}},setAdmin:e=>{console.log("[Storage] Setting admin data:",e?.email),x0().setItem(An.ADMIN_DATA,JSON.stringify(e))},clearAdmin:()=>{console.log("[Storage] Clearing admin data"),localStorage.removeItem(An.ADMIN_DATA),sessionStorage.removeItem(An.ADMIN_DATA)}},L2=()=>{console.log("[Storage] Clearing all auth data"),fi.clearTokens(),Uo.clearAdmin()},Nj="http://192.168.29.69:5000/api";console.log("[API] Initializing with base URL:",Nj);const El=Ts.create({baseURL:Nj,timeout:3e4,headers:{"Content-Type":"application/json"}});let Zf=!1,qg=[];const k3=(e,r=null)=>{console.log("[API] Processing queued requests:",qg.length),qg.forEach(s=>{e?s.reject(e):s.resolve(r)}),qg=[]},ax=e=>{if(!e||typeof e!="object")return e;if(Array.isArray(e))return e.map(ax);const r=["password","currentPassword","newPassword","refreshToken","accessToken"],s={...e};return Object.keys(s).forEach(n=>{r.includes(n)?s[n]="***MASKED***":typeof s[n]=="object"&&s[n]!==null&&(s[n]=ax(s[n]))}),s};El.interceptors.request.use(e=>{const r=fi.getAccessToken();return r&&(e.headers.Authorization=`Bearer ${r}`),console.log(`[API] Request: ${e.method?.toUpperCase()} ${e.url}`,{hasAuth:!!r,body:e.data?ax(e.data):null,params:e.params||null}),e},e=>(console.error("[API] Request error:",e.message),Promise.reject(e)));El.interceptors.response.use(e=>(console.log(`[API] Response: ${e.status} ${e.config.url}`,{message:e.data?.message,data:e.data?.data?ax(e.data.data):null}),e),async e=>{const r=e.config;if(console.error("[API] Response error:",{status:e.response?.status,url:r?.url,message:e.response?.data?.message||e.message}),e.response?.status===401&&!r._retry&&!r.url?.includes("/auth/refresh-token")&&!r.url?.includes("/auth/login")){if(console.log("[API] Token expired, attempting refresh..."),Zf)return console.log("[API] Refresh in progress, queueing request"),new Promise((n,a)=>{qg.push({resolve:n,reject:a})}).then(n=>(r.headers.Authorization=`Bearer ${n}`,El(r))).catch(n=>Promise.reject(n));r._retry=!0,Zf=!0;const s=fi.getRefreshToken();if(!s)return console.log("[API] No refresh token available, clearing auth"),Zf=!1,L2(),window.location.href="/login",Promise.reject(e);try{console.log("[API] Refreshing access token...");const n=await Ts.post(`${Nj}/web/auth/refresh-token`,{refreshToken:s}),{accessToken:a}=n.data.data;return console.log("[API] Token refresh successful"),fi.setAccessToken(a),k3(null,a),r.headers.Authorization=`Bearer ${a}`,El(r)}catch(n){return console.error("[API] Token refresh failed:",n.response?.data?.message),k3(n,null),L2(),window.location.href="/login",Promise.reject(n)}finally{Zf=!1}}return Promise.reject(e)});const Se=async e=>{try{const r=await e;return{success:!0,data:r.data.data,message:r.data.message,error:null,status:r.data.status||r.status}}catch(r){const s={success:!1,data:null,message:r.response?.data?.message||"An unexpected error occurred",error:r.response?.data?.error||r.message,status:r.response?.status||500};return console.error("[API] Handled error:",s),s}},je={get:(e,r={})=>El.get(e,r),post:(e,r={},s={})=>El.post(e,r,s),put:(e,r={},s={})=>El.put(e,r,s),delete:(e,r={})=>El.delete(e,r),patch:(e,r={},s={})=>El.patch(e,r,s)},Oc={LOGIN:"/web/auth/login",REGISTER:"/web/auth/register",LOGOUT:"/web/auth/logout",REFRESH_TOKEN:"/web/auth/refresh-token",PROFILE:"/web/auth/profile",CHANGE_PASSWORD:"/web/auth/change-password"},ko={login:async(e,r=!1)=>{console.log("[Auth] Attempting login for:",e.username);const s=await Se(je.post(Oc.LOGIN,{username:e.username,password:e.password}));if(s.success&&s.data){const{admin:n,tokens:a}=s.data;fi.setTokens({accessToken:a.accessToken,refreshToken:a.refreshToken},r),Uo.setAdmin(n),console.log("[Auth] Login successful for:",n.username),console.log("[Auth] Admin role:",n.role)}else console.error("[Auth] Login failed:",s.message);return s},register:async(e,r=!1)=>{console.log("[Auth] Attempting registration for:",e.username);const s=await Se(je.post(Oc.REGISTER,e));if(s.success&&s.data){const{admin:n,tokens:a}=s.data;fi.setTokens({accessToken:a.accessToken,refreshToken:a.refreshToken},r),Uo.setAdmin(n),console.log("[Auth] Registration successful for:",n.username)}else console.error("[Auth] Registration failed:",s.message);return s},logout:async()=>{console.log("[Auth] Attempting logout");try{await Se(je.post(Oc.LOGOUT)),console.log("[Auth] Server logout successful")}catch(e){console.warn("[Auth] Server logout failed, clearing local data anyway:",e.message)}return L2(),console.log("[Auth] Local auth data cleared"),{success:!0,message:"Logged out successfully"}},getProfile:async()=>{console.log("[Auth] Fetching profile");const e=await Se(je.get(Oc.PROFILE));return e.success&&e.data&&(Uo.setAdmin(e.data.admin),console.log("[Auth] Profile fetched for:",e.data.admin.username)),e},updateProfile:async e=>{console.log("[Auth] Updating profile");const r=await Se(je.put(Oc.PROFILE,e));return r.success&&r.data&&(Uo.setAdmin(r.data.admin),console.log("[Auth] Profile updated successfully")),r},changePassword:async e=>{console.log("[Auth] Changing password");const r=await Se(je.put(Oc.CHANGE_PASSWORD,e));return r.success?console.log("[Auth] Password changed successfully"):console.error("[Auth] Password change failed:",r.message),r},refreshToken:async()=>{const e=fi.getRefreshToken();if(!e)return console.log("[Auth] No refresh token available"),{success:!1,accessToken:null,error:"No refresh token"};console.log("[Auth] Refreshing access token");const r=await Se(je.post(Oc.REFRESH_TOKEN,{refreshToken:e}));return r.success&&r.data?(fi.setAccessToken(r.data.accessToken),console.log("[Auth] Token refreshed successfully"),{success:!0,accessToken:r.data.accessToken,error:null}):(console.error("[Auth] Token refresh failed:",r.message),{success:!1,accessToken:null,error:r.message})},isAuthenticated:()=>{const e=fi.hasTokens();return console.log("[Auth] Checking authentication:",e),e},getStoredAdmin:()=>Uo.getAdmin(),hasRole:e=>{const r=Uo.getAdmin();return r?(Array.isArray(e)?e:[e]).includes(r.role):!1},hasAccess:e=>{const r=Uo.getAdmin();return r&&r.access?.includes(e)||!1}},IP=v.createContext(null),ZU=({children:e})=>{const[r,s]=v.useState(null),[n,a]=v.useState(!1),[l,d]=v.useState(!0),[h,f]=v.useState(null);v.useEffect(()=>{(async()=>{console.log("[AuthContext] Initializing auth state...");try{if(ko.isAuthenticated()){console.log("[AuthContext] Found stored tokens, fetching profile...");const $=await ko.getProfile();$.success?(s($.data.admin),a(!0),console.log("[AuthContext] Auth initialized successfully")):(console.log("[AuthContext] Profile fetch failed, token may be expired"),a(!1),s(null))}else console.log("[AuthContext] No stored tokens found"),a(!1),s(null)}catch($){console.error("[AuthContext] Error initializing auth:",$),a(!1),s(null)}finally{d(!1)}})()},[]);const x=v.useCallback(async(_,$=!1)=>{console.log("[AuthContext] Login attempt"),f(null),d(!0);try{const F=await ko.login(_,$);return F.success?(s(F.data.admin),a(!0),console.log("[AuthContext] Login successful"),{success:!0,data:F.data}):(f(F.message),console.error("[AuthContext] Login failed:",F.message),{success:!1,error:F.message})}catch(F){const B="An unexpected error occurred during login";return f(B),console.error("[AuthContext] Login error:",F),{success:!1,error:B}}finally{d(!1)}},[]),p=v.useCallback(async(_,$=!1)=>{console.log("[AuthContext] Register attempt"),f(null),d(!0);try{const F=await ko.register(_,$);return F.success?(s(F.data.admin),a(!0),console.log("[AuthContext] Registration successful"),{success:!0,data:F.data}):(f(F.message),console.error("[AuthContext] Registration failed:",F.message),{success:!1,error:F.message})}catch(F){const B="An unexpected error occurred during registration";return f(B),console.error("[AuthContext] Registration error:",F),{success:!1,error:B}}finally{d(!1)}},[]),b=v.useCallback(async()=>{console.log("[AuthContext] Logout attempt"),d(!0);try{return await ko.logout(),s(null),a(!1),f(null),console.log("[AuthContext] Logout successful"),{success:!0}}catch(_){return console.error("[AuthContext] Logout error:",_),s(null),a(!1),{success:!0}}finally{d(!1)}},[]),S=v.useCallback(async()=>{console.log("[AuthContext] Refreshing profile");try{const _=await ko.getProfile();return _.success?(s(_.data.admin),console.log("[AuthContext] Profile refreshed"),{success:!0,data:_.data.admin}):(console.error("[AuthContext] Profile refresh failed:",_.message),{success:!1,error:_.message})}catch(_){return console.error("[AuthContext] Profile refresh error:",_),{success:!1,error:"Failed to refresh profile"}}},[]),T=v.useCallback(async _=>{console.log("[AuthContext] Updating profile"),f(null);try{const $=await ko.updateProfile(_);return $.success?(s($.data.admin),console.log("[AuthContext] Profile updated"),{success:!0,data:$.data.admin}):(f($.message),{success:!1,error:$.message})}catch{const F="Failed to update profile";return f(F),{success:!1,error:F}}},[]),A=v.useCallback(async _=>{console.log("[AuthContext] Changing password"),f(null);try{const $=await ko.changePassword(_);return $.success?(console.log("[AuthContext] Password changed"),{success:!0}):(f($.message),{success:!1,error:$.message})}catch{const F="Failed to change password";return f(F),{success:!1,error:F}}},[]),P=v.useCallback(()=>{f(null)},[]),D=v.useCallback(_=>r?(Array.isArray(_)?_:[_]).includes(r.role):!1,[r]),I=v.useCallback(_=>r&&r.access?.includes(_)||!1,[r]),L={admin:r,isAuthenticated:n,isLoading:l,error:h,login:x,register:p,logout:b,refreshProfile:S,updateProfile:T,changePassword:A,clearError:P,hasRole:D,hasAccess:I};return t.jsx(IP.Provider,{value:L,children:e})},vn=()=>{const e=v.useContext(IP);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},RP=()=>t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-gray-800 border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}),_3=()=>t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:t.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center max-w-md",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access this page."}),t.jsx("a",{href:"/dashboard",className:"inline-block px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Go to Dashboard"})]})}),QU=({children:e,allowedRoles:r=[],requiredAccess:s=[],redirectTo:n="/login"})=>{const{isAuthenticated:a,isLoading:l,admin:d,hasRole:h,hasAccess:f}=vn(),x=Sa();return console.log("[ProtectedRoute] Checking access:",{isAuthenticated:a,isLoading:l,path:x.pathname,adminRole:d?.role}),l?(console.log("[ProtectedRoute] Loading auth state..."),t.jsx(RP,{})):a?r.length>0&&!h(r)?(console.log("[ProtectedRoute] Access denied - role mismatch:",{required:r,actual:d?.role}),t.jsx(_3,{})):s.length>0&&!s.every(b=>f(b))?(console.log("[ProtectedRoute] Access denied - missing permissions:",{required:s,actual:d?.access}),t.jsx(_3,{})):(console.log("[ProtectedRoute] Access granted"),e):(console.log("[ProtectedRoute] Not authenticated, redirecting to:",n),t.jsx(rx,{to:n,state:{from:x},replace:!0}))},JU=({children:e,redirectTo:r="/dashboard"})=>{const{isAuthenticated:s,isLoading:n}=vn(),a=Sa();if(console.log("[PublicRoute] Checking:",{isAuthenticated:s,isLoading:n}),n)return t.jsx(RP,{});if(s){const l=a.state?.from?.pathname||r;return console.log("[PublicRoute] Already authenticated, redirecting to:",l),t.jsx(rx,{to:l,replace:!0})}return e};const ez=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tz=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,s,n)=>n?n.toUpperCase():s.toLowerCase()),I3=e=>{const r=tz(e);return r.charAt(0).toUpperCase()+r.slice(1)},MP=(...e)=>e.filter((r,s,n)=>!!r&&r.trim()!==""&&n.indexOf(r)===s).join(" ").trim(),rz=e=>{for(const r in e)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};var sz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const nz=v.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:a="",children:l,iconNode:d,...h},f)=>v.createElement("svg",{ref:f,...sz,width:r,height:r,stroke:e,strokeWidth:n?Number(s)*24/Number(r):s,className:MP("lucide",a),...!l&&!rz(h)&&{"aria-hidden":"true"},...h},[...d.map(([x,p])=>v.createElement(x,p)),...Array.isArray(l)?l:[l]]));const rt=(e,r)=>{const s=v.forwardRef(({className:n,...a},l)=>v.createElement(nz,{ref:l,iconNode:r,className:MP(`lucide-${ez(I3(e))}`,`lucide-${e}`,n),...a}));return s.displayName=I3(e),s};const az=[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"1qyhux"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]],iz=rt("armchair",az);const lz=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],oz=rt("arrow-left",lz);const cz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],dz=rt("arrow-right",cz);const uz=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],R3=rt("award",uz);const hz=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],jj=rt("banknote",hz);const mz=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ix=rt("bell",mz);const fz=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],M3=rt("briefcase",fz);const gz=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],xz=rt("calendar-check",gz);const pz=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],vb=rt("calendar-range",pz);const yz=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]],Qf=rt("calendar-x",yz);const bz=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Xt=rt("calendar",bz);const vz=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ga=rt("chart-column",vz);const Nz=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Rn=rt("check",Nz);const jz=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ni=rt("chevron-down",jz);const wz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yp=rt("chevron-right",wz);const Sz=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],wj=rt("chevron-left",Sz);const Cz=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Az=rt("chevron-up",Cz);const Ez=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Tt=rt("circle-alert",Ez);const Tz=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ar=rt("circle-check-big",Tz);const Dz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],kl=rt("circle-check",Dz);const Oz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],Pz=rt("circle-dot",Oz);const kz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Hg=rt("circle-question-mark",kz);const _z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Rt=rt("circle-x",_z);const Iz=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],p0=rt("clipboard-list",Iz);const Rz=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],dr=rt("clock",Rz);const Mz=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],pu=rt("copy",Mz);const Lz=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],bp=rt("credit-card",Lz);const Fz=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],vp=rt("crown",Fz);const Bz=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Uz=rt("dollar-sign",Bz);const zz=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Vz=rt("download",zz);const $z=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Uu=rt("external-link",$z);const qz=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],LP=rt("eye-off",qz);const Hz=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Or=rt("eye",Hz);const Gz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],Yz=rt("file-play",Gz);const Wz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],F2=rt("file-spreadsheet",Wz);const Xz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ad=rt("file-text",Xz);const Kz=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Fn=rt("funnel",Kz);const Zz=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Qz=rt("gift",Zz);const Jz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],S0=rt("globe",Jz);const eV=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Np=rt("grip-vertical",eV);const tV=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Sj=rt("hash",tV);const rV=[["path",{d:"M15 15.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"nrt1m3"}],["path",{d:"M21 12.17V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6",key:"99hgts"}],["path",{d:"m6 21 5-5",key:"1wyjai"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],sV=rt("image-play",rV);const nV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Xo=rt("image",nV);const aV=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],rm=rt("indian-rupee",aV);const iV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],lV=rt("info",iV);const oV=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],cV=rt("layout-dashboard",oV);const dV=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],FP=rt("layout-grid",dV);const uV=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],sm=rt("link",uV);const hV=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],lx=rt("list-checks",hV);const mV=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Cj=rt("list",mV);const fV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],st=rt("loader-circle",fV);const gV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],xV=rt("lock-open",gV);const pV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],BP=rt("lock",pV);const yV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],bV=rt("log-out",yV);const vV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ji=rt("mail",vV);const NV=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Aj=rt("map-pin",NV);const jV=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],C0=rt("message-circle",jV);const wV=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],UP=rt("message-square",wV);const SV=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],$a=rt("package",SV);const CV=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],L3=rt("pen-line",CV);const AV=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],zP=rt("pen",AV);const EV=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],yu=rt("percent",EV);const TV=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],hs=rt("phone",TV);const DV=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],VP=rt("play",DV);const OV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fr=rt("plus",OV);const PV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ms=rt("refresh-cw",PV);const kV=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Xi=rt("rotate-ccw",kV);const _V=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],$P=rt("save",_V);const IV=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],RV=rt("scan-line",IV);const MV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],br=rt("search",MV);const LV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],zu=rt("send",LV);const FV=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],BV=rt("settings-2",FV);const UV=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zV=rt("settings",UV);const VV=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],$V=rt("share-2",VV);const qV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ej=rt("shield-check",qV);const HV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],jp=rt("shield",HV);const GV=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],YV=rt("shopping-cart",GV);const WV=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],XV=rt("sliders-horizontal",WV);const KV=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ZV=rt("square-check-big",KV);const QV=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Es=rt("square-pen",QV);const JV=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],hi=rt("star",JV);const e$=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],on=rt("tag",e$);const t$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],bu=rt("target",t$);const r$=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],s$=rt("text-align-start",r$);const n$=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],Go=rt("ticket",n$);const a$=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Ki=rt("toggle-left",a$);const i$=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Rl=rt("toggle-right",i$);const l$=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ir=rt("trash-2",l$);const o$=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],c$=rt("trash",o$);const d$=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],qP=rt("trending-up",d$);const u$=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],wp=rt("triangle-alert",u$);const h$=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],hu=rt("trophy",h$);const m$=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],HP=rt("upload",m$);const f$=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Vu=rt("user-check",f$);const g$=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],x$=rt("user-cog",g$);const p$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Tj=rt("user-plus",p$);const y$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],nm=rt("user-x",y$);const b$=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gr=rt("user",b$);const v$=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],ox=rt("users-round",v$);const N$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],tn=rt("users",N$);const j$=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],qi=rt("video",j$);const w$=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ss=rt("x",w$);const S$=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Tn=rt("zap",S$),GP="/assets/Motivata-Dba061jL.png",C$="/assets/logo2-NMKQARNi.png",Li={BASE:"/web/membership-requests",PLANS:"/web/membership-plans",PENDING_COUNT:"/web/membership-requests/pending-count"},A$=e=>{const r=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&r.append(s,n)}),r.toString()},vu={getPlans:async()=>{console.log("[MembershipRequestService] Fetching plans");const e=await Se(je.get(Li.PLANS));return e.success?console.log("[MembershipRequestService] Fetched plans:",e.data.plans?.length):console.error("[MembershipRequestService] Failed to fetch plans:",e.message),e},submitRequest:async e=>{console.log("[MembershipRequestService] Submitting request for:",e.phone);const r=await Se(je.post(Li.BASE,e));return r.success?console.log("[MembershipRequestService] Request submitted:",r.data.requestId):console.error("[MembershipRequestService] Failed to submit request:",r.message),r},getPendingCount:async()=>{const e=await Se(je.get(Li.PENDING_COUNT));return e.success&&console.log("[MembershipRequestService] Pending count:",e.data.count),e},getAll:async(e={})=>{const r=A$(e),s=r?`${Li.BASE}?${r}`:Li.BASE;console.log("[MembershipRequestService] Fetching requests with params:",e);const n=await Se(je.get(s));return n.success?console.log("[MembershipRequestService] Fetched requests:",n.data.requests?.length):console.error("[MembershipRequestService] Failed to fetch requests:",n.message),n},getById:async e=>{console.log("[MembershipRequestService] Fetching request:",e);const r=await Se(je.get(`${Li.BASE}/${e}`));return r.success?console.log("[MembershipRequestService] Fetched request:",r.data.request?.name):console.error("[MembershipRequestService] Failed to fetch request:",r.message),r},approve:async(e,r)=>{console.log("[MembershipRequestService] Approving request:",e);const s=await Se(je.post(`${Li.BASE}/${e}/approve`,r));return s.success?console.log("[MembershipRequestService] Request approved:",s.data.paymentLink):console.error("[MembershipRequestService] Failed to approve request:",s.message),s},reject:async(e,r)=>{console.log("[MembershipRequestService] Rejecting request:",e);const s=await Se(je.post(`${Li.BASE}/${e}/reject`,r));return s.success?console.log("[MembershipRequestService] Request rejected"):console.error("[MembershipRequestService] Failed to reject request:",s.message),s},resendPaymentLink:async e=>{console.log("[MembershipRequestService] Resending payment link:",e);const r=await Se(je.post(`${Li.BASE}/${e}/resend-link`));return r.success?console.log("[MembershipRequestService] Payment link resent"):console.error("[MembershipRequestService] Failed to resend link:",r.message),r},withdraw:async(e,r)=>{console.log("[MembershipRequestService] Withdrawing request:",e);const s=await Se(je.post(`${Li.BASE}/${e}/withdraw`,r));return s.success?console.log("[MembershipRequestService] Request withdrawn successfully"):console.error("[MembershipRequestService] Failed to withdraw request:",s.message),s}};function E$(){const[e,r]=v.useState(0),[s,n]=v.useState(!0),[a,l]=v.useState(!1);return v.useEffect(()=>{const d=async()=>{try{const f=await vu.getPendingCount();f.success?(r(f.data.count||0),l(!1)):(console.warn("Failed to fetch pending count:",f.message),l(!0))}catch(f){console.error("Failed to fetch pending membership request count:",f),l(!0)}finally{n(!1)}};d();const h=setInterval(d,3e4);return()=>clearInterval(h)},[]),s||a||e===0?null:t.jsx("span",{className:"inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 rounded-full bg-red-500 text-white text-xs font-bold shadow-sm",children:e>99?"99+":e})}const Pc={BASE:"/web/feature-requests",PENDING_COUNT:"/web/feature-requests/pending-count",BY_ID:e=>`/web/feature-requests/${e}`,APPROVE:e=>`/web/feature-requests/${e}/approve`,REJECT:e=>`/web/feature-requests/${e}/reject`,RESEND_LINK:e=>`/web/feature-requests/${e}/resend-link`},T$=e=>{const r=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&r.append(s,n)}),r.toString()},A0={getPendingCount:async()=>{const e=await Se(je.get(Pc.PENDING_COUNT));return e.success&&console.log("[FeatureRequestService] Pending count:",e.data.count),e},getAll:async(e={})=>{const r=T$(e),s=r?`${Pc.BASE}?${r}`:Pc.BASE;console.log("[FeatureRequestService] Fetching requests with params:",e);const n=await Se(je.get(s));return n.success?console.log("[FeatureRequestService] Fetched requests:",n.data.requests?.length):console.error("[FeatureRequestService] Failed to fetch requests:",n.message),n},getById:async e=>{console.log("[FeatureRequestService] Fetching request:",e);const r=await Se(je.get(Pc.BY_ID(e)));return r.success?console.log("[FeatureRequestService] Fetched request:",r.data.request?.name):console.error("[FeatureRequestService] Failed to fetch request:",r.message),r},approve:async(e,r)=>{console.log("[FeatureRequestService] Approving request:",e);const s=await Se(je.post(Pc.APPROVE(e),r));return s.success?console.log("[FeatureRequestService] Request approved:",s.data.paymentLink):console.error("[FeatureRequestService] Failed to approve request:",s.message),s},reject:async(e,r)=>{console.log("[FeatureRequestService] Rejecting request:",e);const s=await Se(je.post(Pc.REJECT(e),r));return s.success?console.log("[FeatureRequestService] Request rejected"):console.error("[FeatureRequestService] Failed to reject request:",s.message),s},resendPaymentLink:async e=>{console.log("[FeatureRequestService] Resending payment link:",e);const r=await Se(je.post(Pc.RESEND_LINK(e)));return r.success?console.log("[FeatureRequestService] Payment link resent"):console.error("[FeatureRequestService] Failed to resend link:",r.message),r}};function D$(){const[e,r]=v.useState(0),[s,n]=v.useState(!0),[a,l]=v.useState(!1);return v.useEffect(()=>{const d=async()=>{try{const f=await A0.getPendingCount();f.success?(r(f.data.count||0),l(!1)):(console.warn("Failed to fetch pending feature request count:",f.message),l(!0))}catch(f){console.error("Failed to fetch pending feature request count:",f),l(!0)}finally{n(!1)}};d();const h=setInterval(d,3e4);return()=>clearInterval(h)},[]),s||a||e===0?null:t.jsx("span",{className:"inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 rounded-full bg-red-500 text-white text-xs font-bold shadow-sm",children:e>99?"99+":e})}const jl={BASE:"/web/motivata-blend/admin/requests",STATS:"/web/motivata-blend/admin/stats",EXPORT:"/web/motivata-blend/admin/export",PENDING_COUNT:"/web/motivata-blend/admin/pending-count"},F3=e=>{const r=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&r.append(s,n)}),r.toString()},d0={getPendingCount:async()=>{const e=await Se(je.get(jl.PENDING_COUNT));return e.success&&console.log("[MotivataBlendService] Pending count:",e.data.count),e},getAll:async(e={})=>{const r=F3(e),s=r?`${jl.BASE}?${r}`:jl.BASE;console.log("[MotivataBlendService] Fetching requests with params:",e);const n=await Se(je.get(s));return n.success?console.log("[MotivataBlendService] Fetched requests:",n.data.requests?.length):console.error("[MotivataBlendService] Failed to fetch requests:",n.message),n},getById:async e=>{console.log("[MotivataBlendService] Fetching request:",e);const r=await Se(je.get(`${jl.BASE}/${e}`));return r.success?console.log("[MotivataBlendService] Fetched request:",r.data.request?.name):console.error("[MotivataBlendService] Failed to fetch request:",r.message),r},approve:async(e,r={})=>{console.log("[MotivataBlendService] Approving request:",e);const s=await Se(je.post(`${jl.BASE}/${e}/approve`,r));return s.success?console.log("[MotivataBlendService] Request approved"):console.error("[MotivataBlendService] Failed to approve request:",s.message),s},reject:async(e,r)=>{console.log("[MotivataBlendService] Rejecting request:",e);const s=await Se(je.post(`${jl.BASE}/${e}/reject`,r));return s.success?console.log("[MotivataBlendService] Request rejected"):console.error("[MotivataBlendService] Failed to reject request:",s.message),s},getStats:async()=>{console.log("[MotivataBlendService] Fetching stats");const e=await Se(je.get(jl.STATS));return e.success?console.log("[MotivataBlendService] Stats fetched:",e.data):console.error("[MotivataBlendService] Failed to fetch stats:",e.message),e},exportRequests:async(e={})=>{const r=F3(e),s=r?`${jl.EXPORT}?${r}`:jl.EXPORT;console.log("[MotivataBlendService] Exporting requests with params:",e);try{return{success:!0,data:(await je.get(s,{responseType:"blob"})).data,message:"Export successful"}}catch(n){return console.error("[MotivataBlendService] Failed to export:",n.message),{success:!1,data:null,message:n.response?.data?.message||"Failed to export requests"}}}};function O$(){const[e,r]=v.useState(0),[s,n]=v.useState(!0),[a,l]=v.useState(!1);return v.useEffect(()=>{const d=async()=>{try{const f=await d0.getPendingCount();f.success?(r(f.data.count||0),l(!1)):(console.warn("Failed to fetch Motivata Blend pending count:",f.message),l(!0))}catch(f){console.error("Failed to fetch Motivata Blend pending count:",f),l(!0)}finally{n(!1)}};d();const h=setInterval(d,3e4);return()=>clearInterval(h)},[]),s||a||e===0?null:t.jsx("span",{className:"inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 rounded-full bg-red-500 text-white text-xs font-bold shadow-sm",children:e>99?"99+":e})}const wl={BASE:"/web/round-table/admin/requests",STATS:"/web/round-table/admin/stats",EXPORT:"/web/round-table/admin/export",PENDING_COUNT:"/web/round-table/admin/pending-count"},B3=e=>{const r=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&r.append(s,n)}),r.toString()},u0={getPendingCount:async()=>{const e=await Se(je.get(wl.PENDING_COUNT));return e.success&&console.log("[RoundTableService] Pending count:",e.data.count),e},getAll:async(e={})=>{const r=B3(e),s=r?`${wl.BASE}?${r}`:wl.BASE;console.log("[RoundTableService] Fetching requests with params:",e);const n=await Se(je.get(s));return n.success?console.log("[RoundTableService] Fetched requests:",n.data.requests?.length):console.error("[RoundTableService] Failed to fetch requests:",n.message),n},getById:async e=>{console.log("[RoundTableService] Fetching request:",e);const r=await Se(je.get(`${wl.BASE}/${e}`));return r.success?console.log("[RoundTableService] Fetched request:",r.data.request?.name):console.error("[RoundTableService] Failed to fetch request:",r.message),r},approve:async(e,r={})=>{console.log("[RoundTableService] Approving request:",e);const s=await Se(je.post(`${wl.BASE}/${e}/approve`,r));return s.success?console.log("[RoundTableService] Request approved"):console.error("[RoundTableService] Failed to approve request:",s.message),s},reject:async(e,r)=>{console.log("[RoundTableService] Rejecting request:",e);const s=await Se(je.post(`${wl.BASE}/${e}/reject`,r));return s.success?console.log("[RoundTableService] Request rejected"):console.error("[RoundTableService] Failed to reject request:",s.message),s},getStats:async()=>{console.log("[RoundTableService] Fetching stats");const e=await Se(je.get(wl.STATS));return e.success?console.log("[RoundTableService] Stats fetched:",e.data):console.error("[RoundTableService] Failed to fetch stats:",e.message),e},exportRequests:async(e={})=>{const r=B3(e),s=r?`${wl.EXPORT}?${r}`:wl.EXPORT;console.log("[RoundTableService] Exporting requests with params:",e);try{return{success:!0,data:(await je.get(s,{responseType:"blob"})).data,message:"Export successful"}}catch(n){return console.error("[RoundTableService] Failed to export:",n.message),{success:!1,data:null,message:n.response?.data?.message||"Failed to export requests"}}}};function P$(){const[e,r]=v.useState(0),[s,n]=v.useState(!0),[a,l]=v.useState(!1);return v.useEffect(()=>{const d=async()=>{try{const f=await u0.getPendingCount();f.success?(r(f.data.count||0),l(!1)):(console.warn("Failed to fetch Round Table pending count:",f.message),l(!0))}catch(f){console.error("Failed to fetch Round Table pending count:",f),l(!0)}finally{n(!1)}};d();const h=setInterval(d,3e4);return()=>clearInterval(h)},[]),s||a||e===0?null:t.jsx("span",{className:"inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 rounded-full bg-red-500 text-white text-xs font-bold shadow-sm",children:e>99?"99+":e})}function k$({collapsed:e,isOpen:r,onClose:s}){const n=up(),a=Sa(),{logout:l,admin:d}=vn(),[h,f]=v.useState({clubs:!0,services:!0,engagement:!0,"registration-requests":!0}),x=()=>{l(),n("/login")},p=_=>{f($=>({...$,[_]:!$[_]}))},b=_=>a.pathname===_,S=_=>_?.some($=>b($.path)),T=[{id:"dashboard",label:"Dashboard",icon:cV,path:"/dashboard",type:"single"},{id:"events",label:"Events",icon:Xt,path:"/events",type:"single"},{id:"users",label:"Users",icon:x$,path:"/users",type:"single"},{id:"admins",label:"Admins",icon:Ej,path:"/admins",type:"single"},{id:"clubs",label:"Clubs & Connect",icon:ox,type:"section",children:[{id:"clubs-manage",label:"Manage Clubs",icon:ox,path:"/clubs"},{id:"club-join-requests",label:"Join Requests",icon:Tj,path:"/club-join-requests"},{id:"admin-club-posts",label:"Create Post",icon:Es,path:"/admin-club-posts"}]},{id:"engagement",label:"Engagement",icon:Ga,type:"section",children:[{id:"sessions",label:"Sessions",icon:qi,path:"/sessions"},{id:"quizes",label:"Quizes",icon:p0,path:"/quizes"},{id:"challenges",label:"Challenges",icon:hu,path:"/challenges"},{id:"polls",label:"Polls",icon:Ga,path:"/polls"},{id:"stories",label:"Stories",icon:sV,path:"/stories"}]},{id:"services",label:"Services",icon:M3,type:"section",children:[{id:"services-manage",label:"Manage Services",icon:M3,path:"/services"},{id:"service-orders",label:"Orders",icon:bp,path:"/service-orders"},{id:"service-requests",label:"Requests",icon:ad,path:"/service-requests"}]},{id:"registration-requests",label:"Registration Requests",icon:p0,type:"section",children:[{id:"motivata-blend-requests",label:"Motivata Blend",icon:tn,path:"/motivata-blend-requests",showBadge:"motivataBlend"},{id:"round-table-requests",label:"Round Table",icon:Pz,path:"/round-table-requests",showBadge:"roundTable"}]},{id:"memberships",label:"Memberships",icon:vp,path:"/memberships",type:"single"},{id:"membership-requests",label:"Membership Requests",icon:tn,path:"/membership-requests",type:"single",showBadge:!0},{id:"user-subscriptions",label:"Subscriptions",icon:Vu,path:"/user-subscriptions",type:"single"},{id:"cashtickets",label:"Cash Tickets",icon:jj,path:"/cash-tickets",type:"single"},{id:"vouchers",label:"Vouchers",icon:Qz,path:"/vouchers",type:"single"},{id:"coupons",label:"Coupons",icon:on,path:"/coupons",type:"single"},{id:"scan-qr",label:"Scan QR",icon:RV,path:"/scan-qr",type:"single"},{id:"ticket-reshare",label:"Ticket Reshare",icon:$V,path:"/ticket-reshare",type:"single"},{id:"feature-access",label:"Feature Access",icon:jp,path:"/feature-access",type:"single"},{id:"feature-pricing",label:"Feature Pricing",icon:on,path:"/feature-pricing",type:"single"},{id:"feature-requests",label:"Feature Requests",icon:Tn,path:"/feature-requests",type:"single",showBadge:"feature"},{id:"settings",label:"Settings",icon:zV,path:"/settings",type:"single"}],A=d?.name||d?.username||"Admin",P=d?.email||"admin@motivata.com",D=d?.role||"Administrator",I=_=>_.split(" ").map($=>$[0]).join("").toUpperCase().slice(0,2),L=_=>{if(_.type==="single"){const $=b(_.path);return t.jsx("li",{children:t.jsxs(sx,{to:_.path,className:`
              w-full flex items-center gap-3 px-3 py-2.5 rounded-lg
              transition-all duration-200 group relative
              ${$?"bg-gray-900 text-white shadow-md":"text-gray-700 hover:bg-gray-100"}
              ${e?"lg:justify-center lg:px-2":""}
            `,title:e?_.label:"",children:[t.jsx(_.icon,{className:`
                h-4 w-4 shrink-0 transition-transform duration-200
                ${$?"scale-110":"group-hover:scale-105"}
              `}),!e&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"font-medium text-sm truncate flex-1",children:_.label}),_.showBadge===!0&&t.jsx(E$,{}),_.showBadge==="feature"&&t.jsx(D$,{})]})]})},_.id)}if(_.type==="section"){const $=h[_.id],F=S(_.children);return t.jsxs("li",{className:"space-y-1",children:[t.jsxs("button",{onClick:()=>p(_.id),className:`
              w-full flex items-center gap-3 px-3 py-2.5 rounded-lg
              transition-all duration-200 group
              ${F?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}
              ${e?"lg:justify-center lg:px-2":""}
            `,title:e?_.label:"",children:[t.jsx(_.icon,{className:"h-4 w-4 shrink-0"}),!e&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"font-semibold text-sm truncate flex-1 text-left",children:_.label}),$?t.jsx(Ni,{className:"h-4 w-4 shrink-0"}):t.jsx(yp,{className:"h-4 w-4 shrink-0"})]})]}),!e&&$&&t.jsx("ul",{className:"ml-3 pl-3 border-l-2 border-gray-200 space-y-1",children:_.children.map(B=>{const M=b(B.path);return t.jsx("li",{children:t.jsxs(sx,{to:B.path,className:`
                        w-full flex items-center gap-3 px-3 py-2 rounded-lg
                        transition-all duration-200 group
                        ${M?"bg-gray-900 text-white shadow-md":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}
                      `,children:[t.jsx(B.icon,{className:"h-4 w-4 shrink-0"}),t.jsx("span",{className:"font-medium text-sm truncate flex-1",children:B.label}),B.showBadge==="motivataBlend"&&t.jsx(O$,{}),B.showBadge==="roundTable"&&t.jsx(P$,{})]})},B.id)})})]},_.id)}};return t.jsxs("aside",{className:`
        ${e?"lg:w-20":"lg:w-72"}
        fixed lg:static inset-y-0 left-0 z-50
        w-72
        ${r?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        bg-gradient-to-b from-white to-gray-50/50
        border-r border-gray-200
        shadow-2xl lg:shadow-none
        flex flex-col
        transition-all duration-300 ease-in-out
        h-screen
        overflow-hidden
      `,children:[t.jsx("div",{className:"p-5 lg:p-6 border-b border-gray-200/80 shrink-0 bg-white/80 backdrop-blur-sm",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:`flex flex-col ${e?"items-center":"items-start"} min-w-0 flex-1`,children:[t.jsx("img",{src:e?C$:GP,alt:"Motivata",className:`${e?"h-12 w-12":"h-16"} object-contain`}),!e&&t.jsx("p",{className:"text-xs text-gray-500 font-medium -mt-1 ml-4",children:"Admin Panel"})]}),t.jsx("button",{onClick:s,className:"lg:hidden p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-all active:scale-95","aria-label":"Close sidebar",children:t.jsx(ss,{className:"h-5 w-5"})})]})}),t.jsx("nav",{className:"flex-1 p-3 lg:p-4 overflow-y-auto overflow-x-hidden custom-scrollbar",children:t.jsx("ul",{className:"space-y-1",children:T.map(_=>L(_))})}),t.jsxs("div",{className:"border-t border-gray-200/80 shrink-0 bg-white/50 backdrop-blur-sm",children:[t.jsx("div",{className:`p-4 ${e?"lg:p-2":""}`,children:t.jsxs("div",{className:`
              flex items-center gap-3 p-3 rounded-xl
              bg-gradient-to-br from-gray-50 to-gray-100/50
              border border-gray-200/50
              transition-all duration-200 hover:shadow-md
              ${e?"lg:justify-center lg:p-2":""}
            `,title:e?`${A} - ${D}`:"",children:[t.jsxs("div",{className:"relative shrink-0",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-800 via-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-sm shadow-md ring-2 ring-white",children:I(A)}),t.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white shadow-sm"})]}),!e&&t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-bold text-gray-900 truncate",children:A}),t.jsx("p",{className:"text-xs text-gray-600 truncate",children:P}),t.jsx("div",{className:"flex items-center gap-1 mt-1",children:t.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-[10px] font-semibold bg-blue-100 text-gray-900 border border-blue-200",children:D})})]})]})}),t.jsx("div",{className:"p-4 pt-0",children:t.jsxs("button",{onClick:x,className:`
              w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl
              bg-gradient-to-r from-red-50 to-red-100/50
              text-red-600 font-semibold text-sm
              border border-red-200
              hover:from-red-100 hover:to-red-200/50
              hover:border-red-300 hover:shadow-md
              active:scale-[0.98]
              transition-all duration-200
              group
              ${e?"lg:px-2":""}
            `,title:"Logout",children:[t.jsx(bV,{className:"h-4 w-4 shrink-0 group-hover:scale-110 transition-transform"}),!e&&t.jsx("span",{children:"Logout"})]})})]})]})}function _$({toggleSidebar:e}){const[r,s]=v.useState(!1),[n,a]=v.useState("");return t.jsxs("header",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 px-4 lg:px-6 py-3 lg:py-4 flex items-center justify-between flex-shrink-0 sticky top-0 z-30 shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 flex-1",children:[t.jsx("button",{onClick:e,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all hover:scale-105 active:scale-95 group","aria-label":"Toggle Sidebar",children:t.jsxs("div",{className:"relative h-6 w-6",children:[t.jsx("span",{className:"absolute left-0 top-1 w-6 h-0.5 bg-gray-600 rounded transition-all group-hover:w-5"}),t.jsx("span",{className:"absolute left-0 top-3 w-6 h-0.5 bg-gray-600 rounded"}),t.jsx("span",{className:"absolute left-0 top-5 w-6 h-0.5 bg-gray-600 rounded transition-all group-hover:w-4"})]})}),t.jsxs("div",{className:"hidden lg:block",children:[t.jsx("h1",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"Welcome back"}),t.jsx("p",{className:"text-xs text-gray-500",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"relative hidden md:block",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),t.jsx("input",{type:"text",placeholder:"Search anything...",value:n,onChange:l=>a(l.target.value),className:"pl-10 pr-4 py-2 w-64 lg:w-80 bg-gray-50 border border-gray-200 rounded-lg focus:border-gray-800 outline-none text-sm transition-all placeholder:text-gray-400"}),n&&t.jsx("button",{onClick:()=>a(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-0.5 hover:bg-gray-200 rounded",children:t.jsx(ss,{className:"h-3.5 w-3.5 text-gray-400"})})]}),t.jsx("button",{onClick:()=>s(!r),className:"md:hidden p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all active:scale-95","aria-label":"Search",children:t.jsx(br,{className:"h-5 w-5"})}),t.jsxs("button",{className:"relative p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all hover:scale-105 active:scale-95 group","aria-label":"Notifications",title:"Notifications",children:[t.jsx(ix,{className:"h-5 w-5 group-hover:animate-pulse"}),t.jsx("span",{className:"absolute top-1.5 right-1.5 h-2 w-2 bg-red-500 rounded-full ring-2 ring-white"}),t.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center ring-2 ring-white",children:"3"})]})]}),r&&t.jsx("div",{className:"md:hidden fixed inset-x-0 top-[57px] bg-white border-b border-gray-200 p-4 shadow-lg z-40 animate-in slide-in-from-top",children:t.jsxs("div",{className:"relative",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search anything...",autoFocus:!0,value:n,onChange:l=>a(l.target.value),className:"w-full pl-10 pr-10 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:border-gray-800 outline-none text-sm"}),t.jsx("button",{onClick:()=>{s(!1),a("")},className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 rounded",children:t.jsx(ss,{className:"h-4 w-4 text-gray-400"})})]})})]})}function I$(){const[e,r]=v.useState(!1),[s,n]=v.useState(!1),a=Sa(),l=()=>{window.innerWidth<1024?n(!s):r(!e)},d=()=>n(!1);v.useEffect(()=>{n(!1)},[a.pathname]),v.useEffect(()=>{const x=()=>{window.innerWidth>=1024&&n(!1)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const h={"/dashboard":"dashboard","/events":"events","/enrollments":"enrollments","/coupons":"coupons","/users":"users","/admins":"admins","/payments":"payments","/cash-tickets":"cashtickets","/vouchers":"vouchers","/sessions":"sessions","/quizes":"quizes","/challenges":"challenges","/polls":"polls","/stories":"stories","/memberships":"memberships","/settings":"settings","/clubs":"clubs","/scan-qr":"scan-qr","/ticket-reshare":"ticket-reshare","/services":"services","/service-orders":"service-orders","/service-requests":"service-requests","/user-subscriptions":"user-subscriptions"},f=()=>h[a.pathname]||"dashboard";return t.jsxs("div",{className:"h-screen bg-gradient-to-br from-gray-50 via-gray-50 to-blue-50/30 flex overflow-hidden",children:[s&&t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden transition-opacity",onClick:d}),t.jsx(k$,{activeMenu:f(),collapsed:e,isOpen:s,onClose:d}),t.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[t.jsx(_$,{toggleSidebar:l}),t.jsx("main",{className:"flex-1 overflow-auto custom-scrollbar",children:t.jsx("div",{className:"p-4 sm:p-6 lg:p-8 max-w-[1920px] mx-auto",children:t.jsx(zF,{})})})]})]})}function R$(){const[e,r]=v.useState(""),[s,n]=v.useState(""),[a,l]=v.useState(!1),[d,h]=v.useState(!1),[f,x]=v.useState(!1),[p,b]=v.useState(""),S=up(),T=Sa(),{login:A}=vn(),P=T.state?.from?.pathname||"/dashboard",D=async I=>{if(I.preventDefault(),b(""),!e.trim()){b("Username is required");return}if(!s.trim()){b("Password is required");return}console.log("[Login] Attempting login for:",e),x(!0);try{const L=await A({username:e,password:s},d);L.success?(console.log("[Login] Login successful, redirecting to:",P),S(P,{replace:!0})):(console.error("[Login] Login failed:",L.error),L.error?.includes("deactivated")?b("Your account has been deactivated. Please contact an administrator."):L.error?.includes("Invalid")?b("Invalid username or password. Please try again."):b(L.error||"Login failed. Please try again."))}catch(L){console.error("[Login] Unexpected error:",L),b("An unexpected error occurred. Please try again.")}finally{x(!1)}};return t.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:t.jsxs("div",{className:"w-full max-w-md",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("img",{src:GP,alt:"Motivata",className:"h-16 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Sign in to your account"})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[p&&t.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[t.jsx(Tt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),t.jsx("p",{className:"text-sm text-red-700",children:p})]}),t.jsxs("form",{onSubmit:D,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(gr,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{id:"username",type:"text",value:e,onChange:I=>r(I.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-all disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter your username",disabled:f,autoComplete:"username"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(BP,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{id:"password",type:a?"text":"password",value:s,onChange:I=>n(I.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-all disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter your password",disabled:f,autoComplete:"current-password"}),t.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute inset-y-0 right-0 pr-3 flex items-center disabled:cursor-not-allowed",disabled:f,tabIndex:-1,children:a?t.jsx(LP,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):t.jsx(Or,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("label",{className:"flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d,onChange:I=>h(I.target.checked),className:"h-4 w-4 text-gray-800 border-gray-300 rounded focus:ring-gray-700 cursor-pointer",disabled:f}),t.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),t.jsx("a",{href:"#",className:"text-sm text-gray-800 hover:text-black font-medium",children:"Forgot password?"})]}),t.jsx("button",{type:"submit",disabled:f,className:"w-full bg-gray-800 text-white py-3 px-4 rounded-lg font-medium hover:bg-gray-900 focus:ring-4 focus:ring-gray-300 transition-all disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:f?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-5 w-5 animate-spin"}),"Signing in..."]}):"Log In"})]})]})]})})}var YP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},U3=Yo.createContext&&Yo.createContext(YP),M$=["attr","size","title"];function L$(e,r){if(e==null)return{};var s=F$(e,r),n,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function F$(e,r){if(e==null)return{};var s={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(r.indexOf(n)>=0)continue;s[n]=e[n]}return s}function cx(){return cx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},cx.apply(this,arguments)}function z3(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function dx(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?z3(Object(s),!0).forEach(function(n){B$(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):z3(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function B$(e,r,s){return r=U$(r),r in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function U$(e){var r=z$(e,"string");return typeof r=="symbol"?r:r+""}function z$(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function WP(e){return e&&e.map((r,s)=>Yo.createElement(r.tag,dx({key:s},r.attr),WP(r.child)))}function Yt(e){return r=>Yo.createElement(V$,cx({attr:dx({},e.attr)},r),WP(e.child))}function V$(e){var r=s=>{var{attr:n,size:a,title:l}=e,d=L$(e,M$),h=a||s.size||"1em",f;return s.className&&(f=s.className),e.className&&(f=(f?f+" ":"")+e.className),Yo.createElement("svg",cx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,n,d,{className:f,style:dx(dx({color:e.color||s.color},s.style),e.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),l&&Yo.createElement("title",null,l),e.children)};return U3!==void 0?Yo.createElement(U3.Consumer,null,s=>r(s)):r(YP)}function $$(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},child:[]},{tag:"path",attr:{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},child:[]}]})(e)}function q$(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"},child:[]}]})(e)}function V3(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"},child:[]}]})(e)}function Nu(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(e)}function $3(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"},child:[]}]})(e)}function H$(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"},child:[]}]})(e)}function G$(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"},child:[]}]})(e)}function Y$(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(e)}function XP(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"},child:[]}]})(e)}function W$(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"},child:[]}]})(e)}function q3(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(e)}function X$(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M8 5v14l11-7z"},child:[]}]})(e)}function K$(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"},child:[]}]})(e)}function Z$(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(e)}function Q$(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"},child:[]}]})(e)}function y0(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 21h-2v-2h2v2zm-2-7h-2v5h2v-5zm8-2h-2v4h2v-4zm-2-2h-2v2h2v-2zM7 12H5v2h2v-2zm-2-2H3v2h2v-2zm7-5h2V3h-2v2zm-7.5-.5v3h3v-3h-3zM9 9H3V3h6v6zm-4.5 7.5v3h3v-3h-3zM9 21H3v-6h6v6zm7.5-16.5v3h3v-3h-3zM21 9h-6V3h6v6zm-2 10v-3h-4v2h2v3h4v-2h-2zm-2-7h-4v2h4v-2zm-4-2H7v2h2v2h2v-2h2v-2zm1-1V7h-2V5h-2v4h4zM6.75 5.25h-1.5v1.5h1.5v-1.5zm0 12h-1.5v1.5h1.5v-1.5zm12-12h-1.5v1.5h1.5v-1.5z"},child:[]}]})(e)}function Jf(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.5 6.5v3h-3v-3h3M11 5H5v6h6V5zm-1.5 9.5v3h-3v-3h3M11 13H5v6h6v-6zm6.5-6.5v3h-3v-3h3M19 5h-6v6h6V5zm-6 8h1.5v1.5H13V13zm1.5 1.5H16V16h-1.5v-1.5zM16 13h1.5v1.5H16V13zm-3 3h1.5v1.5H13V16zm1.5 1.5H16V19h-1.5v-1.5zM16 16h1.5v1.5H16V16zm1.5-1.5H19V16h-1.5v-1.5zm0 3H19V19h-1.5v-1.5zM22 7h-2V4h-3V2h5v5zm0 15v-5h-2v3h-3v2h5zM2 22h5v-2H4v-3H2v5zM2 2v5h2V4h3V2H2z"},child:[]}]})(e)}function Nb(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(e)}function J$(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"},child:[]}]})(e)}function ux(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(e)}function eq(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m21.16 7.26-1.41-1.41-3.56 3.55 1.41 1.41s3.45-3.52 3.56-3.55zM11 3h2v5h-2zM6.4 10.81 7.81 9.4 4.26 5.84 2.84 7.26c.11.03 3.56 3.55 3.56 3.55zM20 12h-5c0 1.66-1.34 3-3 3s-3-1.34-3-3H4c-1.1 0-2 .9-2 2v5c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2z"},child:[]}]})(e)}function tq(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M16 7h-1l-1-1h-4L9 7H8c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-4 7c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},child:[]},{tag:"path",attr:{d:"m8.57.51 4.48 4.48V2.04c4.72.47 8.48 4.23 8.95 8.95h2C23.34 3.02 15.49-1.59 8.57.51zM10.95 21.96c-4.72-.47-8.48-4.23-8.95-8.95H0c.66 7.97 8.51 12.58 15.43 10.48l-4.48-4.48v2.95z"},child:[]}]})(e)}function H3(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.79 21 3 11.21v2c0 .53.21 1.04.59 1.41l7.79 7.79c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83L12.79 21z"},child:[]},{tag:"path",attr:{d:"M11.38 17.41c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83L12.63.58A2.04 2.04 0 0 0 11.21 0H5C3.9 0 3 .9 3 2v6.21c0 .53.21 1.04.59 1.41l7.79 7.79zM7.25 3a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5z"},child:[]}]})(e)}function rq(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(e)}function sq(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"},child:[]}]})(e)}function nq(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}function KP(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(e)}function G3(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M22 10V6a2 2 0 0 0-2-2H4c-1.1 0-1.99.89-1.99 2v4c1.1 0 1.99.9 1.99 2s-.89 2-2 2v4c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-4c-1.1 0-2-.9-2-2s.9-2 2-2zm-9 7.5h-2v-2h2v2zm0-4.5h-2v-2h2v2zm0-4.5h-2v-2h2v2z"},child:[]}]})(e)}function aq(e){return Yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},child:[]}]})(e)}function ZP(e){var r,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(r=0;r<a;r++)e[r]&&(s=ZP(e[r]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function Rs(){for(var e,r,s=0,n="",a=arguments.length;s<a;s++)(e=arguments[s])&&(r=ZP(e))&&(n&&(n+=" "),n+=r);return n}function iq(e){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}iq(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Dj=e=>typeof e=="number"&&!isNaN(e),E0=e=>typeof e=="string",QP=e=>typeof e=="function",lq=e=>E0(e)||Dj(e),oq=e=>v.isValidElement(e)||E0(e)||QP(e)||Dj(e),cq=1,JP=()=>`${cq++}`,Hi=new Map,B2=[],Y3=new Set,ek=()=>Hi.size>0,dq=(e,{containerId:r})=>{var s;return(s=Hi.get(r||1))==null?void 0:s.toasts.get(e)};function uq(e,r){var s;if(r)return!!((s=Hi.get(r))!=null&&s.isToastActive(e));let n=!1;return Hi.forEach(a=>{a.isToastActive(e)&&(n=!0)}),n}function hq(e){if(!ek()){B2=B2.filter(r=>e!=null&&r.options.toastId!==e);return}if(e==null||lq(e))Hi.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let r=Hi.get(e.containerId);r?r.removeToast(e.id):Hi.forEach(s=>{s.removeToast(e.id)})}}var mq=(e={})=>{Hi.forEach(r=>{r.props.limit&&(!e.containerId||r.id===e.containerId)&&r.clearQueue()})};function fq(e,r){oq(e)&&(ek()||B2.push({content:e,options:r}),Hi.forEach(s=>{s.buildToast(e,r)}))}function tk(e,r){Hi.forEach(s=>{(r==null||!(r!=null&&r.containerId)||r?.containerId===s.id)&&s.toggle(e,r?.id)})}function gq(e){return Y3.add(e),()=>{Y3.delete(e)}}function xq(e){return e&&(E0(e.toastId)||Dj(e.toastId))?e.toastId:JP()}function am(e,r){return fq(e,r),r.toastId}function Sp(e,r){return{...r,type:r&&r.type||e,toastId:xq(r)}}function Cp(e){return(r,s)=>am(r,Sp(e,s))}function ot(e,r){return am(e,Sp("default",r))}ot.loading=(e,r)=>am(e,Sp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...r}));function pq(e,{pending:r,error:s,success:n},a){let l;r&&(l=E0(r)?ot.loading(r,a):ot.loading(r.render,{...a,...r}));let d={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},h=(x,p,b)=>{if(p==null){ot.dismiss(l);return}let S={type:x,...d,...a,data:b},T=E0(p)?{render:p}:p;return l?ot.update(l,{...S,...T}):ot(T.render,{...S,...T}),b},f=QP(e)?e():e;return f.then(x=>h("success",n,x)).catch(x=>h("error",s,x)),f}ot.promise=pq;ot.success=Cp("success");ot.info=Cp("info");ot.error=Cp("error");ot.warning=Cp("warning");ot.warn=ot.warning;ot.dark=(e,r)=>am(e,Sp("default",{theme:"dark",...r}));function yq(e){hq(e)}ot.dismiss=yq;ot.clearWaitingQueue=mq;ot.isActive=uq;ot.update=(e,r={})=>{let s=dq(e,r);if(s){let{props:n,content:a}=s,l={delay:100,...n,...r,toastId:r.toastId||e,updateId:JP()};l.toastId!==e&&(l.staleId=e);let d=l.render||a;delete l.render,am(d,l)}};ot.done=e=>{ot.update(e,{progress:1})};ot.onChange=gq;ot.play=e=>tk(!0,e);ot.pause=e=>tk(!1,e);const rk=v.createContext({});function bq(e){const r=v.useRef(null);return r.current===null&&(r.current=e()),r.current}const Oj=typeof window<"u",vq=Oj?v.useLayoutEffect:v.useEffect,Pj=v.createContext(null);function kj(e,r){e.indexOf(r)===-1&&e.push(r)}function _j(e,r){const s=e.indexOf(r);s>-1&&e.splice(s,1)}const Ml=(e,r,s)=>s>r?r:s<e?e:s;let Ij=()=>{};const Ll={},sk=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function nk(e){return typeof e=="object"&&e!==null}const ak=e=>/^0[^.\s]+$/u.test(e);function Rj(e){let r;return()=>(r===void 0&&(r=e()),r)}const Ya=e=>e,Nq=(e,r)=>s=>r(e(s)),im=(...e)=>e.reduce(Nq),T0=(e,r,s)=>{const n=r-e;return n===0?1:(s-e)/n};class Mj{constructor(){this.subscriptions=[]}add(r){return kj(this.subscriptions,r),()=>_j(this.subscriptions,r)}notify(r,s,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](r,s,n);else for(let l=0;l<a;l++){const d=this.subscriptions[l];d&&d(r,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gi=e=>e*1e3,qa=e=>e/1e3;function ik(e,r){return r?e*(1e3/r):0}const lk=(e,r,s)=>(((1-3*s+3*r)*e+(3*s-6*r))*e+3*r)*e,jq=1e-7,wq=12;function Sq(e,r,s,n,a){let l,d,h=0;do d=r+(s-r)/2,l=lk(d,n,a)-e,l>0?s=d:r=d;while(Math.abs(l)>jq&&++h<wq);return d}function lm(e,r,s,n){if(e===r&&s===n)return Ya;const a=l=>Sq(l,0,1,e,s);return l=>l===0||l===1?l:lk(a(l),r,n)}const ok=e=>r=>r<=.5?e(2*r)/2:(2-e(2*(1-r)))/2,ck=e=>r=>1-e(1-r),dk=lm(.33,1.53,.69,.99),Lj=ck(dk),uk=ok(Lj),hk=e=>(e*=2)<1?.5*Lj(e):.5*(2-Math.pow(2,-10*(e-1))),Fj=e=>1-Math.sin(Math.acos(e)),mk=ck(Fj),fk=ok(Fj),Cq=lm(.42,0,1,1),Aq=lm(0,0,.58,1),gk=lm(.42,0,.58,1),Eq=e=>Array.isArray(e)&&typeof e[0]!="number",xk=e=>Array.isArray(e)&&typeof e[0]=="number",Tq={linear:Ya,easeIn:Cq,easeInOut:gk,easeOut:Aq,circIn:Fj,circInOut:fk,circOut:mk,backIn:Lj,backInOut:uk,backOut:dk,anticipate:hk},Dq=e=>typeof e=="string",W3=e=>{if(xk(e)){Ij(e.length===4);const[r,s,n,a]=e;return lm(r,s,n,a)}else if(Dq(e))return Tq[e];return e},eg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Oq(e,r){let s=new Set,n=new Set,a=!1,l=!1;const d=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function f(p){d.has(p)&&(x.schedule(p),e()),p(h)}const x={schedule:(p,b=!1,S=!1)=>{const A=S&&a?s:n;return b&&d.add(p),A.has(p)||A.add(p),p},cancel:p=>{n.delete(p),d.delete(p)},process:p=>{if(h=p,a){l=!0;return}a=!0,[s,n]=[n,s],s.forEach(f),s.clear(),a=!1,l&&(l=!1,x.process(p))}};return x}const Pq=40;function pk(e,r){let s=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>s=!0,d=eg.reduce((_,$)=>(_[$]=Oq(l),_),{}),{setup:h,read:f,resolveKeyframes:x,preUpdate:p,update:b,preRender:S,render:T,postRender:A}=d,P=()=>{const _=Ll.useManualTiming?a.timestamp:performance.now();s=!1,Ll.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(_-a.timestamp,Pq),1)),a.timestamp=_,a.isProcessing=!0,h.process(a),f.process(a),x.process(a),p.process(a),b.process(a),S.process(a),T.process(a),A.process(a),a.isProcessing=!1,s&&r&&(n=!1,e(P))},D=()=>{s=!0,n=!0,a.isProcessing||e(P)};return{schedule:eg.reduce((_,$)=>{const F=d[$];return _[$]=(B,M=!1,V=!1)=>(s||D(),F.schedule(B,M,V)),_},{}),cancel:_=>{for(let $=0;$<eg.length;$++)d[eg[$]].cancel(_)},state:a,steps:d}}const{schedule:cs,cancel:Ko,state:bn,steps:jb}=pk(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ya,!0);let Gg;function kq(){Gg=void 0}const Zn={now:()=>(Gg===void 0&&Zn.set(bn.isProcessing||Ll.useManualTiming?bn.timestamp:performance.now()),Gg),set:e=>{Gg=e,queueMicrotask(kq)}},yk=e=>r=>typeof r=="string"&&r.startsWith(e),Bj=yk("--"),_q=yk("var(--"),Uj=e=>_q(e)?Iq.test(e.split("/*")[0].trim()):!1,Iq=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,$u={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},D0={...$u,transform:e=>Ml(0,1,e)},tg={...$u,default:1},b0=e=>Math.round(e*1e5)/1e5,zj=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Rq(e){return e==null}const Mq=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Vj=(e,r)=>s=>!!(typeof s=="string"&&Mq.test(s)&&s.startsWith(e)||r&&!Rq(s)&&Object.prototype.hasOwnProperty.call(s,r)),bk=(e,r,s)=>n=>{if(typeof n!="string")return n;const[a,l,d,h]=n.match(zj);return{[e]:parseFloat(a),[r]:parseFloat(l),[s]:parseFloat(d),alpha:h!==void 0?parseFloat(h):1}},Lq=e=>Ml(0,255,e),wb={...$u,transform:e=>Math.round(Lq(e))},Yc={test:Vj("rgb","red"),parse:bk("red","green","blue"),transform:({red:e,green:r,blue:s,alpha:n=1})=>"rgba("+wb.transform(e)+", "+wb.transform(r)+", "+wb.transform(s)+", "+b0(D0.transform(n))+")"};function Fq(e){let r="",s="",n="",a="";return e.length>5?(r=e.substring(1,3),s=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(r=e.substring(1,2),s=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),r+=r,s+=s,n+=n,a+=a),{red:parseInt(r,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const U2={test:Vj("#"),parse:Fq,transform:Yc.transform},om=e=>({test:r=>typeof r=="string"&&r.endsWith(e)&&r.split(" ").length===1,parse:parseFloat,transform:r=>`${r}${e}`}),zo=om("deg"),Yi=om("%"),It=om("px"),Bq=om("vh"),Uq=om("vw"),X3={...Yi,parse:e=>Yi.parse(e)/100,transform:e=>Yi.transform(e*100)},nu={test:Vj("hsl","hue"),parse:bk("hue","saturation","lightness"),transform:({hue:e,saturation:r,lightness:s,alpha:n=1})=>"hsla("+Math.round(e)+", "+Yi.transform(b0(r))+", "+Yi.transform(b0(s))+", "+b0(D0.transform(n))+")"},qs={test:e=>Yc.test(e)||U2.test(e)||nu.test(e),parse:e=>Yc.test(e)?Yc.parse(e):nu.test(e)?nu.parse(e):U2.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Yc.transform(e):nu.transform(e),getAnimatableNone:e=>{const r=qs.parse(e);return r.alpha=0,qs.transform(r)}},zq=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Vq(e){return isNaN(e)&&typeof e=="string"&&(e.match(zj)?.length||0)+(e.match(zq)?.length||0)>0}const vk="number",Nk="color",$q="var",qq="var(",K3="${}",Hq=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function O0(e){const r=e.toString(),s=[],n={color:[],number:[],var:[]},a=[];let l=0;const h=r.replace(Hq,f=>(qs.test(f)?(n.color.push(l),a.push(Nk),s.push(qs.parse(f))):f.startsWith(qq)?(n.var.push(l),a.push($q),s.push(f)):(n.number.push(l),a.push(vk),s.push(parseFloat(f))),++l,K3)).split(K3);return{values:s,split:h,indexes:n,types:a}}function jk(e){return O0(e).values}function wk(e){const{split:r,types:s}=O0(e),n=r.length;return a=>{let l="";for(let d=0;d<n;d++)if(l+=r[d],a[d]!==void 0){const h=s[d];h===vk?l+=b0(a[d]):h===Nk?l+=qs.transform(a[d]):l+=a[d]}return l}}const Gq=e=>typeof e=="number"?0:qs.test(e)?qs.getAnimatableNone(e):e;function Yq(e){const r=jk(e);return wk(e)(r.map(Gq))}const Zo={test:Vq,parse:jk,createTransformer:wk,getAnimatableNone:Yq};function Sb(e,r,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(r-e)*6*s:s<1/2?r:s<2/3?e+(r-e)*(2/3-s)*6:e}function Wq({hue:e,saturation:r,lightness:s,alpha:n}){e/=360,r/=100,s/=100;let a=0,l=0,d=0;if(!r)a=l=d=s;else{const h=s<.5?s*(1+r):s+r-s*r,f=2*s-h;a=Sb(f,h,e+1/3),l=Sb(f,h,e),d=Sb(f,h,e-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(d*255),alpha:n}}function hx(e,r){return s=>s>0?r:e}const gs=(e,r,s)=>e+(r-e)*s,Cb=(e,r,s)=>{const n=e*e,a=s*(r*r-n)+n;return a<0?0:Math.sqrt(a)},Xq=[U2,Yc,nu],Kq=e=>Xq.find(r=>r.test(e));function Z3(e){const r=Kq(e);if(!r)return!1;let s=r.parse(e);return r===nu&&(s=Wq(s)),s}const Q3=(e,r)=>{const s=Z3(e),n=Z3(r);if(!s||!n)return hx(e,r);const a={...s};return l=>(a.red=Cb(s.red,n.red,l),a.green=Cb(s.green,n.green,l),a.blue=Cb(s.blue,n.blue,l),a.alpha=gs(s.alpha,n.alpha,l),Yc.transform(a))},z2=new Set(["none","hidden"]);function Zq(e,r){return z2.has(e)?s=>s<=0?e:r:s=>s>=1?r:e}function Qq(e,r){return s=>gs(e,r,s)}function $j(e){return typeof e=="number"?Qq:typeof e=="string"?Uj(e)?hx:qs.test(e)?Q3:tH:Array.isArray(e)?Sk:typeof e=="object"?qs.test(e)?Q3:Jq:hx}function Sk(e,r){const s=[...e],n=s.length,a=e.map((l,d)=>$j(l)(l,r[d]));return l=>{for(let d=0;d<n;d++)s[d]=a[d](l);return s}}function Jq(e,r){const s={...e,...r},n={};for(const a in s)e[a]!==void 0&&r[a]!==void 0&&(n[a]=$j(e[a])(e[a],r[a]));return a=>{for(const l in n)s[l]=n[l](a);return s}}function eH(e,r){const s=[],n={color:0,var:0,number:0};for(let a=0;a<r.values.length;a++){const l=r.types[a],d=e.indexes[l][n[l]],h=e.values[d]??0;s[a]=h,n[l]++}return s}const tH=(e,r)=>{const s=Zo.createTransformer(r),n=O0(e),a=O0(r);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?z2.has(e)&&!a.values.length||z2.has(r)&&!n.values.length?Zq(e,r):im(Sk(eH(n,a),a.values),s):hx(e,r)};function Ck(e,r,s){return typeof e=="number"&&typeof r=="number"&&typeof s=="number"?gs(e,r,s):$j(e)(e,r)}const rH=e=>{const r=({timestamp:s})=>e(s);return{start:(s=!0)=>cs.update(r,s),stop:()=>Ko(r),now:()=>bn.isProcessing?bn.timestamp:Zn.now()}},Ak=(e,r,s=10)=>{let n="";const a=Math.max(Math.round(r/s),2);for(let l=0;l<a;l++)n+=Math.round(e(l/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},mx=2e4;function qj(e){let r=0;const s=50;let n=e.next(r);for(;!n.done&&r<mx;)r+=s,n=e.next(r);return r>=mx?1/0:r}function sH(e,r=100,s){const n=s({...e,keyframes:[0,r]}),a=Math.min(qj(n),mx);return{type:"keyframes",ease:l=>n.next(a*l).value/r,duration:qa(a)}}const nH=5;function Ek(e,r,s){const n=Math.max(r-nH,0);return ik(s-e(n),r-n)}const Cs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ab=.001;function aH({duration:e=Cs.duration,bounce:r=Cs.bounce,velocity:s=Cs.velocity,mass:n=Cs.mass}){let a,l,d=1-r;d=Ml(Cs.minDamping,Cs.maxDamping,d),e=Ml(Cs.minDuration,Cs.maxDuration,qa(e)),d<1?(a=x=>{const p=x*d,b=p*e,S=p-s,T=V2(x,d),A=Math.exp(-b);return Ab-S/T*A},l=x=>{const b=x*d*e,S=b*s+s,T=Math.pow(d,2)*Math.pow(x,2)*e,A=Math.exp(-b),P=V2(Math.pow(x,2),d);return(-a(x)+Ab>0?-1:1)*((S-T)*A)/P}):(a=x=>{const p=Math.exp(-x*e),b=(x-s)*e+1;return-Ab+p*b},l=x=>{const p=Math.exp(-x*e),b=(s-x)*(e*e);return p*b});const h=5/e,f=lH(a,l,h);if(e=Gi(e),isNaN(f))return{stiffness:Cs.stiffness,damping:Cs.damping,duration:e};{const x=Math.pow(f,2)*n;return{stiffness:x,damping:d*2*Math.sqrt(n*x),duration:e}}}const iH=12;function lH(e,r,s){let n=s;for(let a=1;a<iH;a++)n=n-e(n)/r(n);return n}function V2(e,r){return e*Math.sqrt(1-r*r)}const oH=["duration","bounce"],cH=["stiffness","damping","mass"];function J3(e,r){return r.some(s=>e[s]!==void 0)}function dH(e){let r={velocity:Cs.velocity,stiffness:Cs.stiffness,damping:Cs.damping,mass:Cs.mass,isResolvedFromDuration:!1,...e};if(!J3(e,cH)&&J3(e,oH))if(e.visualDuration){const s=e.visualDuration,n=2*Math.PI/(s*1.2),a=n*n,l=2*Ml(.05,1,1-(e.bounce||0))*Math.sqrt(a);r={...r,mass:Cs.mass,stiffness:a,damping:l}}else{const s=aH(e);r={...r,...s,mass:Cs.mass},r.isResolvedFromDuration=!0}return r}function fx(e=Cs.visualDuration,r=Cs.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:r}:e;let{restSpeed:n,restDelta:a}=s;const l=s.keyframes[0],d=s.keyframes[s.keyframes.length-1],h={done:!1,value:l},{stiffness:f,damping:x,mass:p,duration:b,velocity:S,isResolvedFromDuration:T}=dH({...s,velocity:-qa(s.velocity||0)}),A=S||0,P=x/(2*Math.sqrt(f*p)),D=d-l,I=qa(Math.sqrt(f/p)),L=Math.abs(D)<5;n||(n=L?Cs.restSpeed.granular:Cs.restSpeed.default),a||(a=L?Cs.restDelta.granular:Cs.restDelta.default);let _;if(P<1){const F=V2(I,P);_=B=>{const M=Math.exp(-P*I*B);return d-M*((A+P*I*D)/F*Math.sin(F*B)+D*Math.cos(F*B))}}else if(P===1)_=F=>d-Math.exp(-I*F)*(D+(A+I*D)*F);else{const F=I*Math.sqrt(P*P-1);_=B=>{const M=Math.exp(-P*I*B),V=Math.min(F*B,300);return d-M*((A+P*I*D)*Math.sinh(V)+F*D*Math.cosh(V))/F}}const $={calculatedDuration:T&&b||null,next:F=>{const B=_(F);if(T)h.done=F>=b;else{let M=F===0?A:0;P<1&&(M=F===0?Gi(A):Ek(_,F,B));const V=Math.abs(M)<=n,z=Math.abs(d-B)<=a;h.done=V&&z}return h.value=h.done?d:B,h},toString:()=>{const F=Math.min(qj($),mx),B=Ak(M=>$.next(F*M).value,F,30);return F+"ms "+B},toTransition:()=>{}};return $}fx.applyToOptions=e=>{const r=sH(e,100,fx);return e.ease=r.ease,e.duration=Gi(r.duration),e.type="keyframes",e};function $2({keyframes:e,velocity:r=0,power:s=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:d,min:h,max:f,restDelta:x=.5,restSpeed:p}){const b=e[0],S={done:!1,value:b},T=V=>h!==void 0&&V<h||f!==void 0&&V>f,A=V=>h===void 0?f:f===void 0||Math.abs(h-V)<Math.abs(f-V)?h:f;let P=s*r;const D=b+P,I=d===void 0?D:d(D);I!==D&&(P=I-b);const L=V=>-P*Math.exp(-V/n),_=V=>I+L(V),$=V=>{const z=L(V),H=_(V);S.done=Math.abs(z)<=x,S.value=S.done?I:H};let F,B;const M=V=>{T(S.value)&&(F=V,B=fx({keyframes:[S.value,A(S.value)],velocity:Ek(_,V,S.value),damping:a,stiffness:l,restDelta:x,restSpeed:p}))};return M(0),{calculatedDuration:null,next:V=>{let z=!1;return!B&&F===void 0&&(z=!0,$(V),M(V)),F!==void 0&&V>=F?B.next(V-F):(!z&&$(V),S)}}}function uH(e,r,s){const n=[],a=s||Ll.mix||Ck,l=e.length-1;for(let d=0;d<l;d++){let h=a(e[d],e[d+1]);if(r){const f=Array.isArray(r)?r[d]||Ya:r;h=im(f,h)}n.push(h)}return n}function hH(e,r,{clamp:s=!0,ease:n,mixer:a}={}){const l=e.length;if(Ij(l===r.length),l===1)return()=>r[0];if(l===2&&r[0]===r[1])return()=>r[1];const d=e[0]===e[1];e[0]>e[l-1]&&(e=[...e].reverse(),r=[...r].reverse());const h=uH(r,n,a),f=h.length,x=p=>{if(d&&p<e[0])return r[0];let b=0;if(f>1)for(;b<e.length-2&&!(p<e[b+1]);b++);const S=T0(e[b],e[b+1],p);return h[b](S)};return s?p=>x(Ml(e[0],e[l-1],p)):x}function mH(e,r){const s=e[e.length-1];for(let n=1;n<=r;n++){const a=T0(0,r,n);e.push(gs(s,1,a))}}function fH(e){const r=[0];return mH(r,e.length-1),r}function gH(e,r){return e.map(s=>s*r)}function xH(e,r){return e.map(()=>r||gk).splice(0,e.length-1)}function v0({duration:e=300,keyframes:r,times:s,ease:n="easeInOut"}){const a=Eq(n)?n.map(W3):W3(n),l={done:!1,value:r[0]},d=gH(s&&s.length===r.length?s:fH(r),e),h=hH(d,r,{ease:Array.isArray(a)?a:xH(r,a)});return{calculatedDuration:e,next:f=>(l.value=h(f),l.done=f>=e,l)}}const pH=e=>e!==null;function Hj(e,{repeat:r,repeatType:s="loop"},n,a=1){const l=e.filter(pH),h=a<0||r&&s!=="loop"&&r%2===1?0:l.length-1;return!h||n===void 0?l[h]:n}const yH={decay:$2,inertia:$2,tween:v0,keyframes:v0,spring:fx};function Tk(e){typeof e.type=="string"&&(e.type=yH[e.type])}class Gj{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(r=>{this.resolve=r})}notifyFinished(){this.resolve()}then(r,s){return this.finished.then(r,s)}}const bH=e=>e/100;class Yj extends Gj{constructor(r){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==Zn.now()&&this.tick(Zn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=r,this.initAnimation(),this.play(),r.autoplay===!1&&this.pause()}initAnimation(){const{options:r}=this;Tk(r);const{type:s=v0,repeat:n=0,repeatDelay:a=0,repeatType:l,velocity:d=0}=r;let{keyframes:h}=r;const f=s||v0;f!==v0&&typeof h[0]!="number"&&(this.mixKeyframes=im(bH,Ck(h[0],h[1])),h=[0,100]);const x=f({...r,keyframes:h});l==="mirror"&&(this.mirroredGenerator=f({...r,keyframes:[...h].reverse(),velocity:-d})),x.calculatedDuration===null&&(x.calculatedDuration=qj(x));const{calculatedDuration:p}=x;this.calculatedDuration=p,this.resolvedDuration=p+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=x}updateTime(r){const s=Math.round(r-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(r,s=!1){const{generator:n,totalDuration:a,mixKeyframes:l,mirroredGenerator:d,resolvedDuration:h,calculatedDuration:f}=this;if(this.startTime===null)return n.next(0);const{delay:x=0,keyframes:p,repeat:b,repeatType:S,repeatDelay:T,type:A,onUpdate:P,finalKeyframe:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,r):this.speed<0&&(this.startTime=Math.min(r-a/this.speed,this.startTime)),s?this.currentTime=r:this.updateTime(r);const I=this.currentTime-x*(this.playbackSpeed>=0?1:-1),L=this.playbackSpeed>=0?I<0:I>a;this.currentTime=Math.max(I,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let _=this.currentTime,$=n;if(b){const V=Math.min(this.currentTime,a)/h;let z=Math.floor(V),H=V%1;!H&&V>=1&&(H=1),H===1&&z--,z=Math.min(z,b+1),!!(z%2)&&(S==="reverse"?(H=1-H,T&&(H-=T/h)):S==="mirror"&&($=d)),_=Ml(0,1,H)*h}const F=L?{done:!1,value:p[0]}:$.next(_);l&&(F.value=l(F.value));let{done:B}=F;!L&&f!==null&&(B=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return M&&A!==$2&&(F.value=Hj(p,this.options,D,this.speed)),P&&P(F.value),M&&this.finish(),F}then(r,s){return this.finished.then(r,s)}get duration(){return qa(this.calculatedDuration)}get iterationDuration(){const{delay:r=0}=this.options||{};return this.duration+qa(r)}get time(){return qa(this.currentTime)}set time(r){r=Gi(r),this.currentTime=r,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=r:this.driver&&(this.startTime=this.driver.now()-r/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(r){this.updateTime(Zn.now());const s=this.playbackSpeed!==r;this.playbackSpeed=r,s&&(this.time=qa(this.currentTime))}play(){if(this.isStopped)return;const{driver:r=rH,startTime:s}=this.options;this.driver||(this.driver=r(a=>this.tick(a))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=s??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(r){return this.startTime=0,this.tick(r,!0)}attachTimeline(r){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),r.observe(this)}}function vH(e){for(let r=1;r<e.length;r++)e[r]??(e[r]=e[r-1])}const Wc=e=>e*180/Math.PI,q2=e=>{const r=Wc(Math.atan2(e[1],e[0]));return H2(r)},NH={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:q2,rotateZ:q2,skewX:e=>Wc(Math.atan(e[1])),skewY:e=>Wc(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},H2=e=>(e=e%360,e<0&&(e+=360),e),eE=q2,tE=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),rE=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),jH={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tE,scaleY:rE,scale:e=>(tE(e)+rE(e))/2,rotateX:e=>H2(Wc(Math.atan2(e[6],e[5]))),rotateY:e=>H2(Wc(Math.atan2(-e[2],e[0]))),rotateZ:eE,rotate:eE,skewX:e=>Wc(Math.atan(e[4])),skewY:e=>Wc(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function G2(e){return e.includes("scale")?1:0}function Y2(e,r){if(!e||e==="none")return G2(r);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(s)n=jH,a=s;else{const h=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=NH,a=h}if(!a)return G2(r);const l=n[r],d=a[1].split(",").map(SH);return typeof l=="function"?l(d):d[l]}const wH=(e,r)=>{const{transform:s="none"}=getComputedStyle(e);return Y2(s,r)};function SH(e){return parseFloat(e.trim())}const qu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hu=new Set(qu),sE=e=>e===$u||e===It,CH=new Set(["x","y","z"]),AH=qu.filter(e=>!CH.has(e));function EH(e){const r=[];return AH.forEach(s=>{const n=e.getValue(s);n!==void 0&&(r.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),r}const Qc={width:({x:e},{paddingLeft:r="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(r)-parseFloat(s),height:({y:e},{paddingTop:r="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(r)-parseFloat(s),top:(e,{top:r})=>parseFloat(r),left:(e,{left:r})=>parseFloat(r),bottom:({y:e},{top:r})=>parseFloat(r)+(e.max-e.min),right:({x:e},{left:r})=>parseFloat(r)+(e.max-e.min),x:(e,{transform:r})=>Y2(r,"x"),y:(e,{transform:r})=>Y2(r,"y")};Qc.translateX=Qc.x;Qc.translateY=Qc.y;const Jc=new Set;let W2=!1,X2=!1,K2=!1;function Dk(){if(X2){const e=Array.from(Jc).filter(n=>n.needsMeasurement),r=new Set(e.map(n=>n.element)),s=new Map;r.forEach(n=>{const a=EH(n);a.length&&(s.set(n,a),n.render())}),e.forEach(n=>n.measureInitialState()),r.forEach(n=>{n.render();const a=s.get(n);a&&a.forEach(([l,d])=>{n.getValue(l)?.set(d)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}X2=!1,W2=!1,Jc.forEach(e=>e.complete(K2)),Jc.clear()}function Ok(){Jc.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(X2=!0)})}function TH(){K2=!0,Ok(),Dk(),K2=!1}class Wj{constructor(r,s,n,a,l,d=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...r],this.onComplete=s,this.name=n,this.motionValue=a,this.element=l,this.isAsync=d}scheduleResolve(){this.state="scheduled",this.isAsync?(Jc.add(this),W2||(W2=!0,cs.read(Ok),cs.resolveKeyframes(Dk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:r,name:s,element:n,motionValue:a}=this;if(r[0]===null){const l=a?.get(),d=r[r.length-1];if(l!==void 0)r[0]=l;else if(n&&s){const h=n.readValue(s,d);h!=null&&(r[0]=h)}r[0]===void 0&&(r[0]=d),a&&l===void 0&&a.set(r[0])}vH(r)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(r=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,r),Jc.delete(this)}cancel(){this.state==="scheduled"&&(Jc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const DH=e=>e.startsWith("--");function OH(e,r,s){DH(r)?e.style.setProperty(r,s):e.style[r]=s}const PH=Rj(()=>window.ScrollTimeline!==void 0),kH={};function _H(e,r){const s=Rj(e);return()=>kH[r]??s()}const Pk=_H(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),h0=([e,r,s,n])=>`cubic-bezier(${e}, ${r}, ${s}, ${n})`,nE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:h0([0,.65,.55,1]),circOut:h0([.55,0,1,.45]),backIn:h0([.31,.01,.66,-.59]),backOut:h0([.33,1.53,.69,.99])};function kk(e,r){if(e)return typeof e=="function"?Pk()?Ak(e,r):"ease-out":xk(e)?h0(e):Array.isArray(e)?e.map(s=>kk(s,r)||nE.easeOut):nE[e]}function IH(e,r,s,{delay:n=0,duration:a=300,repeat:l=0,repeatType:d="loop",ease:h="easeOut",times:f}={},x=void 0){const p={[r]:s};f&&(p.offset=f);const b=kk(h,a);Array.isArray(b)&&(p.easing=b);const S={delay:n,duration:a,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:l+1,direction:d==="reverse"?"alternate":"normal"};return x&&(S.pseudoElement=x),e.animate(p,S)}function _k(e){return typeof e=="function"&&"applyToOptions"in e}function RH({type:e,...r}){return _k(e)&&Pk()?e.applyToOptions(r):(r.duration??(r.duration=300),r.ease??(r.ease="easeOut"),r)}class MH extends Gj{constructor(r){if(super(),this.finishedTime=null,this.isStopped=!1,!r)return;const{element:s,name:n,keyframes:a,pseudoElement:l,allowFlatten:d=!1,finalKeyframe:h,onComplete:f}=r;this.isPseudoElement=!!l,this.allowFlatten=d,this.options=r,Ij(typeof r.type!="string");const x=RH(r);this.animation=IH(s,n,a,x,l),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const p=Hj(a,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(p):OH(s,n,p),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:r}=this;r==="idle"||r==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const r=this.animation.effect?.getComputedTiming?.().duration||0;return qa(Number(r))}get iterationDuration(){const{delay:r=0}=this.options||{};return this.duration+qa(r)}get time(){return qa(Number(this.animation.currentTime)||0)}set time(r){this.finishedTime=null,this.animation.currentTime=Gi(r)}get speed(){return this.animation.playbackRate}set speed(r){r<0&&(this.finishedTime=null),this.animation.playbackRate=r}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(r){this.animation.startTime=r}attachTimeline({timeline:r,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,r&&PH()?(this.animation.timeline=r,Ya):s(this)}}const Ik={anticipate:hk,backInOut:uk,circInOut:fk};function LH(e){return e in Ik}function FH(e){typeof e.ease=="string"&&LH(e.ease)&&(e.ease=Ik[e.ease])}const aE=10;class BH extends MH{constructor(r){FH(r),Tk(r),super(r),r.startTime&&(this.startTime=r.startTime),this.options=r}updateMotionValue(r){const{motionValue:s,onUpdate:n,onComplete:a,element:l,...d}=this.options;if(!s)return;if(r!==void 0){s.set(r);return}const h=new Yj({...d,autoplay:!1}),f=Gi(this.finishedTime??this.time);s.setWithVelocity(h.sample(f-aE).value,h.sample(f).value,aE),h.stop()}}const iE=(e,r)=>r==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Zo.test(e)||e==="0")&&!e.startsWith("url("));function UH(e){const r=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==r)return!0}function zH(e,r,s,n){const a=e[0];if(a===null)return!1;if(r==="display"||r==="visibility")return!0;const l=e[e.length-1],d=iE(a,r),h=iE(l,r);return!d||!h?!1:UH(e)||(s==="spring"||_k(s))&&n}function Z2(e){e.duration=0,e.type="keyframes"}const VH=new Set(["opacity","clipPath","filter","transform"]),$H=Rj(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function qH(e){const{motionValue:r,name:s,repeatDelay:n,repeatType:a,damping:l,type:d}=e;if(!(r?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:x}=r.owner.getProps();return $H()&&s&&VH.has(s)&&(s!=="transform"||!x)&&!f&&!n&&a!=="mirror"&&l!==0&&d!=="inertia"}const HH=40;class GH extends Gj{constructor({autoplay:r=!0,delay:s=0,type:n="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:d="loop",keyframes:h,name:f,motionValue:x,element:p,...b}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Zn.now();const S={autoplay:r,delay:s,type:n,repeat:a,repeatDelay:l,repeatType:d,name:f,motionValue:x,element:p,...b},T=p?.KeyframeResolver||Wj;this.keyframeResolver=new T(h,(A,P,D)=>this.onKeyframesResolved(A,P,S,!D),f,x,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(r,s,n,a){this.keyframeResolver=void 0;const{name:l,type:d,velocity:h,delay:f,isHandoff:x,onUpdate:p}=n;this.resolvedAt=Zn.now(),zH(r,l,d,h)||((Ll.instantAnimations||!f)&&p?.(Hj(r,n,s)),r[0]=r[r.length-1],Z2(n),n.repeat=0);const S={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>HH?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...n,keyframes:r},T=!x&&qH(S)?new BH({...S,element:S.motionValue.owner.current}):new Yj(S);T.finished.then(()=>this.notifyFinished()).catch(Ya),this.pendingTimeline&&(this.stopTimeline=T.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=T}get finished(){return this._animation?this.animation.finished:this._finished}then(r,s){return this.finished.finally(r).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),TH()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(r){this.animation.time=r}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(r){this.animation.speed=r}get startTime(){return this.animation.startTime}attachTimeline(r){return this._animation?this.stopTimeline=this.animation.attachTimeline(r):this.pendingTimeline=r,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const YH=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function WH(e){const r=YH.exec(e);if(!r)return[,];const[,s,n,a]=r;return[`--${s??n}`,a]}function Rk(e,r,s=1){const[n,a]=WH(e);if(!n)return;const l=window.getComputedStyle(r).getPropertyValue(n);if(l){const d=l.trim();return sk(d)?parseFloat(d):d}return Uj(a)?Rk(a,r,s+1):a}function Xj(e,r){return e?.[r]??e?.default??e}const Mk=new Set(["width","height","top","left","right","bottom",...qu]),XH={test:e=>e==="auto",parse:e=>e},Lk=e=>r=>r.test(e),Fk=[$u,It,Yi,zo,Uq,Bq,XH],lE=e=>Fk.find(Lk(e));function KH(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||ak(e):!0}const ZH=new Set(["brightness","contrast","saturate","opacity"]);function QH(e){const[r,s]=e.slice(0,-1).split("(");if(r==="drop-shadow")return e;const[n]=s.match(zj)||[];if(!n)return e;const a=s.replace(n,"");let l=ZH.has(r)?1:0;return n!==s&&(l*=100),r+"("+l+a+")"}const JH=/\b([a-z-]*)\(.*?\)/gu,Q2={...Zo,getAnimatableNone:e=>{const r=e.match(JH);return r?r.map(QH).join(" "):e}},oE={...$u,transform:Math.round},eG={rotate:zo,rotateX:zo,rotateY:zo,rotateZ:zo,scale:tg,scaleX:tg,scaleY:tg,scaleZ:tg,skew:zo,skewX:zo,skewY:zo,distance:It,translateX:It,translateY:It,translateZ:It,x:It,y:It,z:It,perspective:It,transformPerspective:It,opacity:D0,originX:X3,originY:X3,originZ:It},Kj={borderWidth:It,borderTopWidth:It,borderRightWidth:It,borderBottomWidth:It,borderLeftWidth:It,borderRadius:It,radius:It,borderTopLeftRadius:It,borderTopRightRadius:It,borderBottomRightRadius:It,borderBottomLeftRadius:It,width:It,maxWidth:It,height:It,maxHeight:It,top:It,right:It,bottom:It,left:It,padding:It,paddingTop:It,paddingRight:It,paddingBottom:It,paddingLeft:It,margin:It,marginTop:It,marginRight:It,marginBottom:It,marginLeft:It,backgroundPositionX:It,backgroundPositionY:It,...eG,zIndex:oE,fillOpacity:D0,strokeOpacity:D0,numOctaves:oE},tG={...Kj,color:qs,backgroundColor:qs,outlineColor:qs,fill:qs,stroke:qs,borderColor:qs,borderTopColor:qs,borderRightColor:qs,borderBottomColor:qs,borderLeftColor:qs,filter:Q2,WebkitFilter:Q2},Bk=e=>tG[e];function Uk(e,r){let s=Bk(e);return s!==Q2&&(s=Zo),s.getAnimatableNone?s.getAnimatableNone(r):void 0}const rG=new Set(["auto","none","0"]);function sG(e,r,s){let n=0,a;for(;n<e.length&&!a;){const l=e[n];typeof l=="string"&&!rG.has(l)&&O0(l).values.length&&(a=e[n]),n++}if(a&&s)for(const l of r)e[l]=Uk(s,a)}class nG extends Wj{constructor(r,s,n,a,l){super(r,s,n,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:r,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let f=0;f<r.length;f++){let x=r[f];if(typeof x=="string"&&(x=x.trim(),Uj(x))){const p=Rk(x,s.current);p!==void 0&&(r[f]=p),f===r.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!Mk.has(n)||r.length!==2)return;const[a,l]=r,d=lE(a),h=lE(l);if(d!==h)if(sE(d)&&sE(h))for(let f=0;f<r.length;f++){const x=r[f];typeof x=="string"&&(r[f]=parseFloat(x))}else Qc[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:r,name:s}=this,n=[];for(let a=0;a<r.length;a++)(r[a]===null||KH(r[a]))&&n.push(a);n.length&&sG(r,n,s)}measureInitialState(){const{element:r,unresolvedKeyframes:s,name:n}=this;if(!r||!r.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Qc[n](r.measureViewportBox(),window.getComputedStyle(r.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&r.getValue(n,a).jump(a,!1)}measureEndState(){const{element:r,name:s,unresolvedKeyframes:n}=this;if(!r||!r.current)return;const a=r.getValue(s);a&&a.jump(this.measuredOrigin,!1);const l=n.length-1,d=n[l];n[l]=Qc[s](r.measureViewportBox(),window.getComputedStyle(r.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,f])=>{r.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function aG(e,r,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const a=s?.[e]??n.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const zk=(e,r)=>r&&typeof e=="number"?r.transform(e):e;function iG(e){return nk(e)&&"offsetHeight"in e}const cE=30,lG=e=>!isNaN(parseFloat(e));class oG{constructor(r,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const a=Zn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(r),this.owner=s.owner}setCurrent(r){this.current=r,this.updatedAt=Zn.now(),this.canTrackVelocity===null&&r!==void 0&&(this.canTrackVelocity=lG(this.current))}setPrevFrameValue(r=this.current){this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt}onChange(r){return this.on("change",r)}on(r,s){this.events[r]||(this.events[r]=new Mj);const n=this.events[r].add(s);return r==="change"?()=>{n(),cs.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const r in this.events)this.events[r].clear()}attach(r,s){this.passiveEffect=r,this.stopPassiveEffect=s}set(r){this.passiveEffect?this.passiveEffect(r,this.updateAndNotify):this.updateAndNotify(r)}setWithVelocity(r,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt-n}jump(r,s=!0){this.updateAndNotify(r),this.prev=r,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(r){this.dependents||(this.dependents=new Set),this.dependents.add(r)}removeDependent(r){this.dependents&&this.dependents.delete(r)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const r=Zn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||r-this.updatedAt>cE)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,cE);return ik(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(r){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=r(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ju(e,r){return new oG(e,r)}const{schedule:Zj}=pk(queueMicrotask,!1),ui={x:!1,y:!1};function Vk(){return ui.x||ui.y}function cG(e){return e==="x"||e==="y"?ui[e]?null:(ui[e]=!0,()=>{ui[e]=!1}):ui.x||ui.y?null:(ui.x=ui.y=!0,()=>{ui.x=ui.y=!1})}function $k(e,r){const s=aG(e),n=new AbortController,a={passive:!0,...r,signal:n.signal};return[s,a,()=>n.abort()]}function dE(e){return!(e.pointerType==="touch"||Vk())}function dG(e,r,s={}){const[n,a,l]=$k(e,s),d=h=>{if(!dE(h))return;const{target:f}=h,x=r(f,h);if(typeof x!="function"||!f)return;const p=b=>{dE(b)&&(x(b),f.removeEventListener("pointerleave",p))};f.addEventListener("pointerleave",p,a)};return n.forEach(h=>{h.addEventListener("pointerenter",d,a)}),l}const qk=(e,r)=>r?e===r?!0:qk(e,r.parentElement):!1,Qj=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,uG=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function hG(e){return uG.has(e.tagName)||e.tabIndex!==-1}const Yg=new WeakSet;function uE(e){return r=>{r.key==="Enter"&&e(r)}}function Eb(e,r){e.dispatchEvent(new PointerEvent("pointer"+r,{isPrimary:!0,bubbles:!0}))}const mG=(e,r)=>{const s=e.currentTarget;if(!s)return;const n=uE(()=>{if(Yg.has(s))return;Eb(s,"down");const a=uE(()=>{Eb(s,"up")}),l=()=>Eb(s,"cancel");s.addEventListener("keyup",a,r),s.addEventListener("blur",l,r)});s.addEventListener("keydown",n,r),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),r)};function hE(e){return Qj(e)&&!Vk()}function fG(e,r,s={}){const[n,a,l]=$k(e,s),d=h=>{const f=h.currentTarget;if(!hE(h))return;Yg.add(f);const x=r(f,h),p=(T,A)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",S),Yg.has(f)&&Yg.delete(f),hE(T)&&typeof x=="function"&&x(T,{success:A})},b=T=>{p(T,f===window||f===document||s.useGlobalTarget||qk(f,T.target))},S=T=>{p(T,!1)};window.addEventListener("pointerup",b,a),window.addEventListener("pointercancel",S,a)};return n.forEach(h=>{(s.useGlobalTarget?window:h).addEventListener("pointerdown",d,a),iG(h)&&(h.addEventListener("focus",x=>mG(x,a)),!hG(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),l}function Hk(e){return nk(e)&&"ownerSVGElement"in e}function gG(e){return Hk(e)&&e.tagName==="svg"}const Dn=e=>!!(e&&e.getVelocity),xG=[...Fk,qs,Zo],pG=e=>xG.find(Lk(e)),Gk=v.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function yG(e=!0){const r=v.useContext(Pj);if(r===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:a}=r,l=v.useId();v.useEffect(()=>{if(e)return a(l)},[e]);const d=v.useCallback(()=>e&&n&&n(l),[l,n,e]);return!s&&n?[!1,d]:[!0]}const Yk=v.createContext({strict:!1}),mE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},wu={};for(const e in mE)wu[e]={isEnabled:r=>mE[e].some(s=>!!r[s])};function bG(e){for(const r in e)wu[r]={...wu[r],...e[r]}}const vG=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function gx(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||vG.has(e)}let Wk=e=>!gx(e);function NG(e){typeof e=="function"&&(Wk=r=>r.startsWith("on")?!gx(r):e(r))}try{NG(require("@emotion/is-prop-valid").default)}catch{}function jG(e,r,s){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(Wk(a)||s===!0&&gx(a)||!r&&!gx(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}const Ap=v.createContext({});function Ep(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function P0(e){return typeof e=="string"||Array.isArray(e)}const Jj=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ew=["initial",...Jj];function Tp(e){return Ep(e.animate)||ew.some(r=>P0(e[r]))}function Xk(e){return!!(Tp(e)||e.variants)}function wG(e,r){if(Tp(e)){const{initial:s,animate:n}=e;return{initial:s===!1||P0(s)?s:void 0,animate:P0(n)?n:void 0}}return e.inherit!==!1?r:{}}function SG(e){const{initial:r,animate:s}=wG(e,v.useContext(Ap));return v.useMemo(()=>({initial:r,animate:s}),[fE(r),fE(s)])}function fE(e){return Array.isArray(e)?e.join(" "):e}const k0={};function CG(e){for(const r in e)k0[r]=e[r],Bj(r)&&(k0[r].isCSSVariable=!0)}function Kk(e,{layout:r,layoutId:s}){return Hu.has(e)||e.startsWith("origin")||(r||s!==void 0)&&(!!k0[e]||e==="opacity")}const AG={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},EG=qu.length;function TG(e,r,s){let n="",a=!0;for(let l=0;l<EG;l++){const d=qu[l],h=e[d];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(d.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||s){const x=zk(h,Kj[d]);if(!f){a=!1;const p=AG[d]||d;n+=`${p}(${x}) `}s&&(r[d]=x)}}return n=n.trim(),s?n=s(r,a?"":n):a&&(n="none"),n}function tw(e,r,s){const{style:n,vars:a,transformOrigin:l}=e;let d=!1,h=!1;for(const f in r){const x=r[f];if(Hu.has(f)){d=!0;continue}else if(Bj(f)){a[f]=x;continue}else{const p=zk(x,Kj[f]);f.startsWith("origin")?(h=!0,l[f]=p):n[f]=p}}if(r.transform||(d||s?n.transform=TG(r,e.transform,s):n.transform&&(n.transform="none")),h){const{originX:f="50%",originY:x="50%",originZ:p=0}=l;n.transformOrigin=`${f} ${x} ${p}`}}const rw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Zk(e,r,s){for(const n in r)!Dn(r[n])&&!Kk(n,s)&&(e[n]=r[n])}function DG({transformTemplate:e},r){return v.useMemo(()=>{const s=rw();return tw(s,r,e),Object.assign({},s.vars,s.style)},[r])}function OG(e,r){const s=e.style||{},n={};return Zk(n,s,e),Object.assign(n,DG(e,r)),n}function PG(e,r){const s={},n=OG(e,r);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=n,s}const kG={offset:"stroke-dashoffset",array:"stroke-dasharray"},_G={offset:"strokeDashoffset",array:"strokeDasharray"};function IG(e,r,s=1,n=0,a=!0){e.pathLength=1;const l=a?kG:_G;e[l.offset]=It.transform(-n);const d=It.transform(r),h=It.transform(s);e[l.array]=`${d} ${h}`}function Qk(e,{attrX:r,attrY:s,attrScale:n,pathLength:a,pathSpacing:l=1,pathOffset:d=0,...h},f,x,p){if(tw(e,h,x),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:b,style:S}=e;b.transform&&(S.transform=b.transform,delete b.transform),(S.transform||b.transformOrigin)&&(S.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),S.transform&&(S.transformBox=p?.transformBox??"fill-box",delete b.transformBox),r!==void 0&&(b.x=r),s!==void 0&&(b.y=s),n!==void 0&&(b.scale=n),a!==void 0&&IG(b,a,l,d,!1)}const Jk=()=>({...rw(),attrs:{}}),e_=e=>typeof e=="string"&&e.toLowerCase()==="svg";function RG(e,r,s,n){const a=v.useMemo(()=>{const l=Jk();return Qk(l,r,e_(n),e.transformTemplate,e.style),{...l.attrs,style:{...l.style}}},[r]);if(e.style){const l={};Zk(l,e.style,e),a.style={...l,...a.style}}return a}const MG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sw(e){return typeof e!="string"||e.includes("-")?!1:!!(MG.indexOf(e)>-1||/[A-Z]/u.test(e))}function LG(e,r,s,{latestValues:n},a,l=!1){const h=(sw(e)?RG:PG)(r,n,a,e),f=jG(r,typeof e=="string",l),x=e!==v.Fragment?{...f,...h,ref:s}:{},{children:p}=r,b=v.useMemo(()=>Dn(p)?p.get():p,[p]);return v.createElement(e,{...x,children:b})}function gE(e){const r=[{},{}];return e?.values.forEach((s,n)=>{r[0][n]=s.get(),r[1][n]=s.getVelocity()}),r}function nw(e,r,s,n){if(typeof r=="function"){const[a,l]=gE(n);r=r(s!==void 0?s:e.custom,a,l)}if(typeof r=="string"&&(r=e.variants&&e.variants[r]),typeof r=="function"){const[a,l]=gE(n);r=r(s!==void 0?s:e.custom,a,l)}return r}function Wg(e){return Dn(e)?e.get():e}function FG({scrapeMotionValuesFromProps:e,createRenderState:r},s,n,a){return{latestValues:BG(s,n,a,e),renderState:r()}}function BG(e,r,s,n){const a={},l=n(e,{});for(const S in l)a[S]=Wg(l[S]);let{initial:d,animate:h}=e;const f=Tp(e),x=Xk(e);r&&x&&!f&&e.inherit!==!1&&(d===void 0&&(d=r.initial),h===void 0&&(h=r.animate));let p=s?s.initial===!1:!1;p=p||d===!1;const b=p?h:d;if(b&&typeof b!="boolean"&&!Ep(b)){const S=Array.isArray(b)?b:[b];for(let T=0;T<S.length;T++){const A=nw(e,S[T]);if(A){const{transitionEnd:P,transition:D,...I}=A;for(const L in I){let _=I[L];if(Array.isArray(_)){const $=p?_.length-1:0;_=_[$]}_!==null&&(a[L]=_)}for(const L in P)a[L]=P[L]}}}return a}const t_=e=>(r,s)=>{const n=v.useContext(Ap),a=v.useContext(Pj),l=()=>FG(e,r,n,a);return s?l():bq(l)};function aw(e,r,s){const{style:n}=e,a={};for(const l in n)(Dn(n[l])||r.style&&Dn(r.style[l])||Kk(l,e)||s?.getValue(l)?.liveStyle!==void 0)&&(a[l]=n[l]);return a}const UG=t_({scrapeMotionValuesFromProps:aw,createRenderState:rw});function r_(e,r,s){const n=aw(e,r,s);for(const a in e)if(Dn(e[a])||Dn(r[a])){const l=qu.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[l]=e[a]}return n}const zG=t_({scrapeMotionValuesFromProps:r_,createRenderState:Jk}),VG=Symbol.for("motionComponentSymbol");function au(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function $G(e,r,s){return v.useCallback(n=>{n&&e.onMount&&e.onMount(n),r&&(n?r.mount(n):r.unmount()),s&&(typeof s=="function"?s(n):au(s)&&(s.current=n))},[r])}const iw=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),qG="framerAppearId",s_="data-"+iw(qG),n_=v.createContext({});function HG(e,r,s,n,a){const{visualElement:l}=v.useContext(Ap),d=v.useContext(Yk),h=v.useContext(Pj),f=v.useContext(Gk).reducedMotion,x=v.useRef(null);n=n||d.renderer,!x.current&&n&&(x.current=n(e,{visualState:r,parent:l,props:s,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const p=x.current,b=v.useContext(n_);p&&!p.projection&&a&&(p.type==="html"||p.type==="svg")&&GG(x.current,s,a,b);const S=v.useRef(!1);v.useInsertionEffect(()=>{p&&S.current&&p.update(s,h)});const T=s[s_],A=v.useRef(!!T&&!window.MotionHandoffIsComplete?.(T)&&window.MotionHasOptimisedAnimation?.(T));return vq(()=>{p&&(S.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),A.current&&p.animationState&&p.animationState.animateChanges())}),v.useEffect(()=>{p&&(!A.current&&p.animationState&&p.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(T)}),A.current=!1),p.enteringChildren=void 0)}),p}function GG(e,r,s,n){const{layoutId:a,layout:l,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:x,layoutCrossfade:p}=r;e.projection=new s(e.latestValues,r["data-framer-portal-id"]?void 0:a_(e.parent)),e.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!d||h&&au(h),visualElement:e,animationType:typeof l=="string"?l:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:f,layoutRoot:x})}function a_(e){if(e)return e.options.allowProjection!==!1?e.projection:a_(e.parent)}function Tb(e,{forwardMotionProps:r=!1}={},s,n){s&&bG(s);const a=sw(e)?zG:UG;function l(h,f){let x;const p={...v.useContext(Gk),...h,layoutId:YG(h)},{isStatic:b}=p,S=SG(h),T=a(h,b);if(!b&&Oj){WG();const A=XG(p);x=A.MeasureLayout,S.visualElement=HG(e,T,p,n,A.ProjectionNode)}return t.jsxs(Ap.Provider,{value:S,children:[x&&S.visualElement?t.jsx(x,{visualElement:S.visualElement,...p}):null,LG(e,h,$G(T,S.visualElement,f),T,b,r)]})}l.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const d=v.forwardRef(l);return d[VG]=e,d}function YG({layoutId:e}){const r=v.useContext(rk).id;return r&&e!==void 0?r+"-"+e:e}function WG(e,r){v.useContext(Yk).strict}function XG(e){const{drag:r,layout:s}=wu;if(!r&&!s)return{};const n={...r,...s};return{MeasureLayout:r?.isEnabled(e)||s?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function KG(e,r){if(typeof Proxy>"u")return Tb;const s=new Map,n=(l,d)=>Tb(l,d,e,r),a=(l,d)=>n(l,d);return new Proxy(a,{get:(l,d)=>d==="create"?n:(s.has(d)||s.set(d,Tb(d,void 0,e,r)),s.get(d))})}function i_({top:e,left:r,right:s,bottom:n}){return{x:{min:r,max:s},y:{min:e,max:n}}}function ZG({x:e,y:r}){return{top:r.min,right:e.max,bottom:r.max,left:e.min}}function QG(e,r){if(!r)return e;const s=r({x:e.left,y:e.top}),n=r({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function Db(e){return e===void 0||e===1}function J2({scale:e,scaleX:r,scaleY:s}){return!Db(e)||!Db(r)||!Db(s)}function Fc(e){return J2(e)||l_(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function l_(e){return xE(e.x)||xE(e.y)}function xE(e){return e&&e!=="0%"}function xx(e,r,s){const n=e-s,a=r*n;return s+a}function pE(e,r,s,n,a){return a!==void 0&&(e=xx(e,a,n)),xx(e,s,n)+r}function eN(e,r=0,s=1,n,a){e.min=pE(e.min,r,s,n,a),e.max=pE(e.max,r,s,n,a)}function o_(e,{x:r,y:s}){eN(e.x,r.translate,r.scale,r.originPoint),eN(e.y,s.translate,s.scale,s.originPoint)}const yE=.999999999999,bE=1.0000000000001;function JG(e,r,s,n=!1){const a=s.length;if(!a)return;r.x=r.y=1;let l,d;for(let h=0;h<a;h++){l=s[h],d=l.projectionDelta;const{visualElement:f}=l.options;f&&f.props.style&&f.props.style.display==="contents"||(n&&l.options.layoutScroll&&l.scroll&&l!==l.root&&lu(e,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),d&&(r.x*=d.x.scale,r.y*=d.y.scale,o_(e,d)),n&&Fc(l.latestValues)&&lu(e,l.latestValues))}r.x<bE&&r.x>yE&&(r.x=1),r.y<bE&&r.y>yE&&(r.y=1)}function iu(e,r){e.min=e.min+r,e.max=e.max+r}function vE(e,r,s,n,a=.5){const l=gs(e.min,e.max,a);eN(e,r,s,l,n)}function lu(e,r){vE(e.x,r.x,r.scaleX,r.scale,r.originX),vE(e.y,r.y,r.scaleY,r.scale,r.originY)}function c_(e,r){return i_(QG(e.getBoundingClientRect(),r))}function eY(e,r,s){const n=c_(e,s),{scroll:a}=r;return a&&(iu(n.x,a.offset.x),iu(n.y,a.offset.y)),n}const NE=()=>({translate:0,scale:1,origin:0,originPoint:0}),ou=()=>({x:NE(),y:NE()}),jE=()=>({min:0,max:0}),Js=()=>({x:jE(),y:jE()}),tN={current:null},d_={current:!1};function tY(){if(d_.current=!0,!!Oj)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),r=()=>tN.current=e.matches;e.addEventListener("change",r),r()}else tN.current=!1}const rY=new WeakMap;function sY(e,r,s){for(const n in r){const a=r[n],l=s[n];if(Dn(a))e.addValue(n,a);else if(Dn(l))e.addValue(n,ju(a,{owner:e}));else if(l!==a)if(e.hasValue(n)){const d=e.getValue(n);d.liveStyle===!0?d.jump(a):d.hasAnimated||d.set(a)}else{const d=e.getStaticValue(n);e.addValue(n,ju(d!==void 0?d:a,{owner:e}))}}for(const n in s)r[n]===void 0&&e.removeValue(n);return r}const wE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class nY{scrapeMotionValuesFromProps(r,s,n){return{}}constructor({parent:r,props:s,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:l,visualState:d},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Wj,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=Zn.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,cs.render(this.render,!1,!0))};const{latestValues:f,renderState:x}=d;this.latestValues=f,this.baseTarget={...f},this.initialValues=s.initial?{...f}:{},this.renderState=x,this.parent=r,this.props=s,this.presenceContext=n,this.depth=r?r.depth+1:0,this.reducedMotionConfig=a,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=Tp(s),this.isVariantNode=Xk(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(r&&r.current);const{willChange:p,...b}=this.scrapeMotionValuesFromProps(s,{},this);for(const S in b){const T=b[S];f[S]!==void 0&&Dn(T)&&T.set(f[S])}}mount(r){this.current=r,rY.set(r,this),this.projection&&!this.projection.instance&&this.projection.mount(r),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),d_.current||tY(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:tN.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ko(this.notifyUpdate),Ko(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const s=this.features[r];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(r){this.children.add(r),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(r)}removeChild(r){this.children.delete(r),this.enteringChildren&&this.enteringChildren.delete(r)}bindToMotionValue(r,s){this.valueSubscriptions.has(r)&&this.valueSubscriptions.get(r)();const n=Hu.has(r);n&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",d=>{this.latestValues[r]=d,this.props.onUpdate&&cs.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,r,s)),this.valueSubscriptions.set(r,()=>{a(),l&&l(),s.owner&&s.stop()})}sortNodePosition(r){return!this.current||!this.sortInstanceNodePosition||this.type!==r.type?0:this.sortInstanceNodePosition(this.current,r.current)}updateFeatures(){let r="animation";for(r in wu){const s=wu[r];if(!s)continue;const{isEnabled:n,Feature:a}=s;if(!this.features[r]&&a&&n(this.props)&&(this.features[r]=new a(this)),this.features[r]){const l=this.features[r];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Js()}getStaticValue(r){return this.latestValues[r]}setStaticValue(r,s){this.latestValues[r]=s}update(r,s){(r.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=r,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<wE.length;n++){const a=wE[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,d=r[l];d&&(this.propEventSubscriptions[a]=this.on(a,d))}this.prevMotionValues=sY(this,this.scrapeMotionValuesFromProps(r,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(r){return this.props.variants?this.props.variants[r]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(r){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(r),()=>s.variantChildren.delete(r)}addValue(r,s){const n=this.values.get(r);s!==n&&(n&&this.removeValue(r),this.bindToMotionValue(r,s),this.values.set(r,s),this.latestValues[r]=s.get())}removeValue(r){this.values.delete(r);const s=this.valueSubscriptions.get(r);s&&(s(),this.valueSubscriptions.delete(r)),delete this.latestValues[r],this.removeValueFromRenderState(r,this.renderState)}hasValue(r){return this.values.has(r)}getValue(r,s){if(this.props.values&&this.props.values[r])return this.props.values[r];let n=this.values.get(r);return n===void 0&&s!==void 0&&(n=ju(s===null?void 0:s,{owner:this}),this.addValue(r,n)),n}readValue(r,s){let n=this.latestValues[r]!==void 0||!this.current?this.latestValues[r]:this.getBaseTargetFromProps(this.props,r)??this.readValueFromInstance(this.current,r,this.options);return n!=null&&(typeof n=="string"&&(sk(n)||ak(n))?n=parseFloat(n):!pG(n)&&Zo.test(s)&&(n=Uk(r,s)),this.setBaseTarget(r,Dn(n)?n.get():n)),Dn(n)?n.get():n}setBaseTarget(r,s){this.baseTarget[r]=s}getBaseTarget(r){const{initial:s}=this.props;let n;if(typeof s=="string"||typeof s=="object"){const l=nw(this.props,s,this.presenceContext?.custom);l&&(n=l[r])}if(s&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,r);return a!==void 0&&!Dn(a)?a:this.initialValues[r]!==void 0&&n===void 0?void 0:this.baseTarget[r]}on(r,s){return this.events[r]||(this.events[r]=new Mj),this.events[r].add(s)}notify(r,...s){this.events[r]&&this.events[r].notify(...s)}scheduleRenderMicrotask(){Zj.render(this.render)}}class u_ extends nY{constructor(){super(...arguments),this.KeyframeResolver=nG}sortInstanceNodePosition(r,s){return r.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(r,s){return r.style?r.style[s]:void 0}removeValueFromRenderState(r,{vars:s,style:n}){delete s[r],delete n[r]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:r}=this.props;Dn(r)&&(this.childSubscription=r.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function h_(e,{style:r,vars:s},n,a){const l=e.style;let d;for(d in r)l[d]=r[d];a?.applyProjectionStyles(l,n);for(d in s)l.setProperty(d,s[d])}function aY(e){return window.getComputedStyle(e)}class iY extends u_{constructor(){super(...arguments),this.type="html",this.renderInstance=h_}readValueFromInstance(r,s){if(Hu.has(s))return this.projection?.isProjecting?G2(s):wH(r,s);{const n=aY(r),a=(Bj(s)?n.getPropertyValue(s):n[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(r,{transformPagePoint:s}){return c_(r,s)}build(r,s,n){tw(r,s,n.transformTemplate)}scrapeMotionValuesFromProps(r,s,n){return aw(r,s,n)}}const m_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function lY(e,r,s,n){h_(e,r,void 0,n);for(const a in r.attrs)e.setAttribute(m_.has(a)?a:iw(a),r.attrs[a])}class oY extends u_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Js}getBaseTargetFromProps(r,s){return r[s]}readValueFromInstance(r,s){if(Hu.has(s)){const n=Bk(s);return n&&n.default||0}return s=m_.has(s)?s:iw(s),r.getAttribute(s)}scrapeMotionValuesFromProps(r,s,n){return r_(r,s,n)}build(r,s,n){Qk(r,s,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(r,s,n,a){lY(r,s,n,a)}mount(r){this.isSVGTag=e_(r.tagName),super.mount(r)}}const cY=(e,r)=>sw(e)?new oY(r):new iY(r,{allowProjection:e!==v.Fragment});function mu(e,r,s){const n=e.getProps();return nw(n,r,s!==void 0?s:n.custom,e)}const rN=e=>Array.isArray(e);function dY(e,r,s){e.hasValue(r)?e.getValue(r).set(s):e.addValue(r,ju(s))}function uY(e){return rN(e)?e[e.length-1]||0:e}function hY(e,r){const s=mu(e,r);let{transitionEnd:n={},transition:a={},...l}=s||{};l={...l,...n};for(const d in l){const h=uY(l[d]);dY(e,d,h)}}function mY(e){return!!(Dn(e)&&e.add)}function sN(e,r){const s=e.getValue("willChange");if(mY(s))return s.add(r);if(!s&&Ll.WillChange){const n=new Ll.WillChange("auto");e.addValue("willChange",n),n.add(r)}}function f_(e){return e.props[s_]}const fY=e=>e!==null;function gY(e,{repeat:r,repeatType:s="loop"},n){const a=e.filter(fY),l=r&&s!=="loop"&&r%2===1?0:a.length-1;return a[l]}const xY={type:"spring",stiffness:500,damping:25,restSpeed:10},pY=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),yY={type:"keyframes",duration:.8},bY={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},vY=(e,{keyframes:r})=>r.length>2?yY:Hu.has(e)?e.startsWith("scale")?pY(r[1]):xY:bY;function NY({when:e,delay:r,delayChildren:s,staggerChildren:n,staggerDirection:a,repeat:l,repeatType:d,repeatDelay:h,from:f,elapsed:x,...p}){return!!Object.keys(p).length}const lw=(e,r,s,n={},a,l)=>d=>{const h=Xj(n,e)||{},f=h.delay||n.delay||0;let{elapsed:x=0}=n;x=x-Gi(f);const p={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:r.getVelocity(),...h,delay:-x,onUpdate:S=>{r.set(S),h.onUpdate&&h.onUpdate(S)},onComplete:()=>{d(),h.onComplete&&h.onComplete()},name:e,motionValue:r,element:l?void 0:a};NY(h)||Object.assign(p,vY(e,p)),p.duration&&(p.duration=Gi(p.duration)),p.repeatDelay&&(p.repeatDelay=Gi(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let b=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Z2(p),p.delay===0&&(b=!0)),(Ll.instantAnimations||Ll.skipAnimations)&&(b=!0,Z2(p),p.delay=0),p.allowFlatten=!h.type&&!h.ease,b&&!l&&r.get()!==void 0){const S=gY(p.keyframes,h);if(S!==void 0){cs.update(()=>{p.onUpdate(S),p.onComplete()});return}}return h.isSync?new Yj(p):new GH(p)};function jY({protectedKeys:e,needsAnimating:r},s){const n=e.hasOwnProperty(s)&&r[s]!==!0;return r[s]=!1,n}function g_(e,r,{delay:s=0,transitionOverride:n,type:a}={}){let{transition:l=e.getDefaultTransition(),transitionEnd:d,...h}=r;n&&(l=n);const f=[],x=a&&e.animationState&&e.animationState.getState()[a];for(const p in h){const b=e.getValue(p,e.latestValues[p]??null),S=h[p];if(S===void 0||x&&jY(x,p))continue;const T={delay:s,...Xj(l||{},p)},A=b.get();if(A!==void 0&&!b.isAnimating&&!Array.isArray(S)&&S===A&&!T.velocity)continue;let P=!1;if(window.MotionHandoffAnimation){const I=f_(e);if(I){const L=window.MotionHandoffAnimation(I,p,cs);L!==null&&(T.startTime=L,P=!0)}}sN(e,p),b.start(lw(p,b,S,e.shouldReduceMotion&&Mk.has(p)?{type:!1}:T,e,P));const D=b.animation;D&&f.push(D)}return d&&Promise.all(f).then(()=>{cs.update(()=>{d&&hY(e,d)})}),f}function x_(e,r,s,n=0,a=1){const l=Array.from(e).sort((x,p)=>x.sortNodePosition(p)).indexOf(r),d=e.size,h=(d-1)*n;return typeof s=="function"?s(l,d):a===1?l*n:h-l*n}function nN(e,r,s={}){const n=mu(e,r,s.type==="exit"?e.presenceContext?.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(a=s.transitionOverride);const l=n?()=>Promise.all(g_(e,n,s)):()=>Promise.resolve(),d=e.variantChildren&&e.variantChildren.size?(f=0)=>{const{delayChildren:x=0,staggerChildren:p,staggerDirection:b}=a;return wY(e,r,f,x,p,b,s)}:()=>Promise.resolve(),{when:h}=a;if(h){const[f,x]=h==="beforeChildren"?[l,d]:[d,l];return f().then(()=>x())}else return Promise.all([l(),d(s.delay)])}function wY(e,r,s=0,n=0,a=0,l=1,d){const h=[];for(const f of e.variantChildren)f.notify("AnimationStart",r),h.push(nN(f,r,{...d,delay:s+(typeof n=="function"?0:n)+x_(e.variantChildren,f,n,a,l)}).then(()=>f.notify("AnimationComplete",r)));return Promise.all(h)}function SY(e,r,s={}){e.notify("AnimationStart",r);let n;if(Array.isArray(r)){const a=r.map(l=>nN(e,l,s));n=Promise.all(a)}else if(typeof r=="string")n=nN(e,r,s);else{const a=typeof r=="function"?mu(e,r,s.custom):r;n=Promise.all(g_(e,a,s))}return n.then(()=>{e.notify("AnimationComplete",r)})}function p_(e,r){if(!Array.isArray(r))return!1;const s=r.length;if(s!==e.length)return!1;for(let n=0;n<s;n++)if(r[n]!==e[n])return!1;return!0}const CY=ew.length;function y_(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?y_(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const r={};for(let s=0;s<CY;s++){const n=ew[s],a=e.props[n];(P0(a)||a===!1)&&(r[n]=a)}return r}const AY=[...Jj].reverse(),EY=Jj.length;function TY(e){return r=>Promise.all(r.map(({animation:s,options:n})=>SY(e,s,n)))}function DY(e){let r=TY(e),s=SE(),n=!0;const a=f=>(x,p)=>{const b=mu(e,p,f==="exit"?e.presenceContext?.custom:void 0);if(b){const{transition:S,transitionEnd:T,...A}=b;x={...x,...A,...T}}return x};function l(f){r=f(e)}function d(f){const{props:x}=e,p=y_(e.parent)||{},b=[],S=new Set;let T={},A=1/0;for(let D=0;D<EY;D++){const I=AY[D],L=s[I],_=x[I]!==void 0?x[I]:p[I],$=P0(_),F=I===f?L.isActive:null;F===!1&&(A=D);let B=_===p[I]&&_!==x[I]&&$;if(B&&n&&e.manuallyAnimateOnMount&&(B=!1),L.protectedKeys={...T},!L.isActive&&F===null||!_&&!L.prevProp||Ep(_)||typeof _=="boolean")continue;const M=OY(L.prevProp,_);let V=M||I===f&&L.isActive&&!B&&$||D>A&&$,z=!1;const H=Array.isArray(_)?_:[_];let U=H.reduce(a(I),{});F===!1&&(U={});const{prevResolvedValues:G={}}=L,Q={...G,...U},ce=W=>{V=!0,S.has(W)&&(z=!0,S.delete(W)),L.needsAnimating[W]=!0;const le=e.getValue(W);le&&(le.liveStyle=!1)};for(const W in Q){const le=U[W],ge=G[W];if(T.hasOwnProperty(W))continue;let re=!1;rN(le)&&rN(ge)?re=!p_(le,ge):re=le!==ge,re?le!=null?ce(W):S.add(W):le!==void 0&&S.has(W)?ce(W):L.protectedKeys[W]=!0}L.prevProp=_,L.prevResolvedValues=U,L.isActive&&(T={...T,...U}),n&&e.blockInitialAnimation&&(V=!1);const ne=B&&M;V&&(!ne||z)&&b.push(...H.map(W=>{const le={type:I};if(typeof W=="string"&&n&&!ne&&e.manuallyAnimateOnMount&&e.parent){const{parent:ge}=e,re=mu(ge,W);if(ge.enteringChildren&&re){const{delayChildren:X}=re.transition||{};le.delay=x_(ge.enteringChildren,e,X)}}return{animation:W,options:le}}))}if(S.size){const D={};if(typeof x.initial!="boolean"){const I=mu(e,Array.isArray(x.initial)?x.initial[0]:x.initial);I&&I.transition&&(D.transition=I.transition)}S.forEach(I=>{const L=e.getBaseTarget(I),_=e.getValue(I);_&&(_.liveStyle=!0),D[I]=L??null}),b.push({animation:D})}let P=!!b.length;return n&&(x.initial===!1||x.initial===x.animate)&&!e.manuallyAnimateOnMount&&(P=!1),n=!1,P?r(b):Promise.resolve()}function h(f,x){if(s[f].isActive===x)return Promise.resolve();e.variantChildren?.forEach(b=>b.animationState?.setActive(f,x)),s[f].isActive=x;const p=d(f);for(const b in s)s[b].protectedKeys={};return p}return{animateChanges:d,setActive:h,setAnimateFunction:l,getState:()=>s,reset:()=>{s=SE()}}}function OY(e,r){return typeof r=="string"?r!==e:Array.isArray(r)?!p_(r,e):!1}function kc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function SE(){return{animate:kc(!0),whileInView:kc(),whileHover:kc(),whileTap:kc(),whileDrag:kc(),whileFocus:kc(),exit:kc()}}class rc{constructor(r){this.isMounted=!1,this.node=r}update(){}}class PY extends rc{constructor(r){super(r),r.animationState||(r.animationState=DY(r))}updateAnimationControlsSubscription(){const{animate:r}=this.node.getProps();Ep(r)&&(this.unmountControls=r.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:r}=this.node.getProps(),{animate:s}=this.node.prevProps||{};r!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let kY=0;class _Y extends rc{constructor(){super(...arguments),this.id=kY++}update(){if(!this.node.presenceContext)return;const{isPresent:r,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||r===n)return;const a=this.node.animationState.setActive("exit",!r);s&&!r&&a.then(()=>{s(this.id)})}mount(){const{register:r,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),r&&(this.unmount=r(this.id))}unmount(){}}const IY={animation:{Feature:PY},exit:{Feature:_Y}};function _0(e,r,s,n={passive:!0}){return e.addEventListener(r,s,n),()=>e.removeEventListener(r,s)}function cm(e){return{point:{x:e.pageX,y:e.pageY}}}const RY=e=>r=>Qj(r)&&e(r,cm(r));function N0(e,r,s,n){return _0(e,r,RY(s),n)}const b_=1e-4,MY=1-b_,LY=1+b_,v_=.01,FY=0-v_,BY=0+v_;function Mn(e){return e.max-e.min}function UY(e,r,s){return Math.abs(e-r)<=s}function CE(e,r,s,n=.5){e.origin=n,e.originPoint=gs(r.min,r.max,e.origin),e.scale=Mn(s)/Mn(r),e.translate=gs(s.min,s.max,e.origin)-e.originPoint,(e.scale>=MY&&e.scale<=LY||isNaN(e.scale))&&(e.scale=1),(e.translate>=FY&&e.translate<=BY||isNaN(e.translate))&&(e.translate=0)}function j0(e,r,s,n){CE(e.x,r.x,s.x,n?n.originX:void 0),CE(e.y,r.y,s.y,n?n.originY:void 0)}function AE(e,r,s){e.min=s.min+r.min,e.max=e.min+Mn(r)}function zY(e,r,s){AE(e.x,r.x,s.x),AE(e.y,r.y,s.y)}function EE(e,r,s){e.min=r.min-s.min,e.max=e.min+Mn(r)}function px(e,r,s){EE(e.x,r.x,s.x),EE(e.y,r.y,s.y)}function Ua(e){return[e("x"),e("y")]}const N_=({current:e})=>e?e.ownerDocument.defaultView:null,TE=(e,r)=>Math.abs(e-r);function VY(e,r){const s=TE(e.x,r.x),n=TE(e.y,r.y);return Math.sqrt(s**2+n**2)}class j_{constructor(r,s,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:l=!1,distanceThreshold:d=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Pb(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,A=VY(S.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!A)return;const{point:P}=S,{timestamp:D}=bn;this.history.push({...P,timestamp:D});const{onStart:I,onMove:L}=this.handlers;T||(I&&I(this.lastMoveEvent,S),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,S)},this.handlePointerMove=(S,T)=>{this.lastMoveEvent=S,this.lastMoveEventInfo=Ob(T,this.transformPagePoint),cs.update(this.updatePoint,!0)},this.handlePointerUp=(S,T)=>{this.end();const{onEnd:A,onSessionEnd:P,resumeAnimation:D}=this.handlers;if(this.dragSnapToOrigin&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=Pb(S.type==="pointercancel"?this.lastMoveEventInfo:Ob(T,this.transformPagePoint),this.history);this.startEvent&&A&&A(S,I),P&&P(S,I)},!Qj(r))return;this.dragSnapToOrigin=l,this.handlers=s,this.transformPagePoint=n,this.distanceThreshold=d,this.contextWindow=a||window;const h=cm(r),f=Ob(h,this.transformPagePoint),{point:x}=f,{timestamp:p}=bn;this.history=[{...x,timestamp:p}];const{onSessionStart:b}=s;b&&b(r,Pb(f,this.history)),this.removeListeners=im(N0(this.contextWindow,"pointermove",this.handlePointerMove),N0(this.contextWindow,"pointerup",this.handlePointerUp),N0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(r){this.handlers=r}end(){this.removeListeners&&this.removeListeners(),Ko(this.updatePoint)}}function Ob(e,r){return r?{point:r(e.point)}:e}function DE(e,r){return{x:e.x-r.x,y:e.y-r.y}}function Pb({point:e},r){return{point:e,delta:DE(e,w_(r)),offset:DE(e,$Y(r)),velocity:qY(r,.1)}}function $Y(e){return e[0]}function w_(e){return e[e.length-1]}function qY(e,r){if(e.length<2)return{x:0,y:0};let s=e.length-1,n=null;const a=w_(e);for(;s>=0&&(n=e[s],!(a.timestamp-n.timestamp>Gi(r)));)s--;if(!n)return{x:0,y:0};const l=qa(a.timestamp-n.timestamp);if(l===0)return{x:0,y:0};const d={x:(a.x-n.x)/l,y:(a.y-n.y)/l};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function HY(e,{min:r,max:s},n){return r!==void 0&&e<r?e=n?gs(r,e,n.min):Math.max(e,r):s!==void 0&&e>s&&(e=n?gs(s,e,n.max):Math.min(e,s)),e}function OE(e,r,s){return{min:r!==void 0?e.min+r:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function GY(e,{top:r,left:s,bottom:n,right:a}){return{x:OE(e.x,s,a),y:OE(e.y,r,n)}}function PE(e,r){let s=r.min-e.min,n=r.max-e.max;return r.max-r.min<e.max-e.min&&([s,n]=[n,s]),{min:s,max:n}}function YY(e,r){return{x:PE(e.x,r.x),y:PE(e.y,r.y)}}function WY(e,r){let s=.5;const n=Mn(e),a=Mn(r);return a>n?s=T0(r.min,r.max-n,e.min):n>a&&(s=T0(e.min,e.max-a,r.min)),Ml(0,1,s)}function XY(e,r){const s={};return r.min!==void 0&&(s.min=r.min-e.min),r.max!==void 0&&(s.max=r.max-e.min),s}const aN=.35;function KY(e=aN){return e===!1?e=0:e===!0&&(e=aN),{x:kE(e,"left","right"),y:kE(e,"top","bottom")}}function kE(e,r,s){return{min:_E(e,r),max:_E(e,s)}}function _E(e,r){return typeof e=="number"?e:e[r]||0}const ZY=new WeakMap;class QY{constructor(r){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Js(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=r}start(r,{snapToCursor:s=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const l=b=>{const{dragSnapToOrigin:S}=this.getProps();S?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(cm(b).point)},d=(b,S)=>{const{drag:T,dragPropagation:A,onDragStart:P}=this.getProps();if(T&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=cG(T),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=S,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ua(I=>{let L=this.getAxisMotionValue(I).get()||0;if(Yi.test(L)){const{projection:_}=this.visualElement;if(_&&_.layout){const $=_.layout.layoutBox[I];$&&(L=Mn($)*(parseFloat(L)/100))}}this.originPoint[I]=L}),P&&cs.postRender(()=>P(b,S)),sN(this.visualElement,"transform");const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},h=(b,S)=>{this.latestPointerEvent=b,this.latestPanInfo=S;const{dragPropagation:T,dragDirectionLock:A,onDirectionLock:P,onDrag:D}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:I}=S;if(A&&this.currentDirection===null){this.currentDirection=JY(I),this.currentDirection!==null&&P&&P(this.currentDirection);return}this.updateAxis("x",S.point,I),this.updateAxis("y",S.point,I),this.visualElement.render(),D&&D(b,S)},f=(b,S)=>{this.latestPointerEvent=b,this.latestPanInfo=S,this.stop(b,S),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>Ua(b=>this.getAnimationState(b)==="paused"&&this.getAxisMotionValue(b).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new j_(r,{onSessionStart:l,onStart:d,onMove:h,onSessionEnd:f,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:N_(this.visualElement)})}stop(r,s){const n=r||this.latestPointerEvent,a=s||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!a||!n)return;const{velocity:d}=a;this.startAnimation(d);const{onDragEnd:h}=this.getProps();h&&cs.postRender(()=>h(n,a))}cancel(){this.isDragging=!1;const{projection:r,animationState:s}=this.visualElement;r&&(r.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(r,s,n){const{drag:a}=this.getProps();if(!n||!rg(r,a,this.currentDirection))return;const l=this.getAxisMotionValue(r);let d=this.originPoint[r]+n[r];this.constraints&&this.constraints[r]&&(d=HY(d,this.constraints[r],this.elastic[r])),l.set(d)}resolveConstraints(){const{dragConstraints:r,dragElastic:s}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;r&&au(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&n?this.constraints=GY(n.layoutBox,r):this.constraints=!1,this.elastic=KY(s),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ua(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=XY(n.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:r,onMeasureDragConstraints:s}=this.getProps();if(!r||!au(r))return!1;const n=r.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=eY(n,a.root,this.visualElement.getTransformPagePoint());let d=YY(a.layout.layoutBox,l);if(s){const h=s(ZG(d));this.hasMutatedConstraints=!!h,h&&(d=i_(h))}return d}startAnimation(r){const{drag:s,dragMomentum:n,dragElastic:a,dragTransition:l,dragSnapToOrigin:d,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},x=Ua(p=>{if(!rg(p,s,this.currentDirection))return;let b=f&&f[p]||{};d&&(b={min:0,max:0});const S=a?200:1e6,T=a?40:1e7,A={type:"inertia",velocity:n?r[p]:0,bounceStiffness:S,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...l,...b};return this.startAxisValueAnimation(p,A)});return Promise.all(x).then(h)}startAxisValueAnimation(r,s){const n=this.getAxisMotionValue(r);return sN(this.visualElement,r),n.start(lw(r,n,0,s,this.visualElement,!1))}stopAnimation(){Ua(r=>this.getAxisMotionValue(r).stop())}pauseAnimation(){Ua(r=>this.getAxisMotionValue(r).animation?.pause())}getAnimationState(r){return this.getAxisMotionValue(r).animation?.state}getAxisMotionValue(r){const s=`_drag${r.toUpperCase()}`,n=this.visualElement.getProps(),a=n[s];return a||this.visualElement.getValue(r,(n.initial?n.initial[r]:void 0)||0)}snapToCursor(r){Ua(s=>{const{drag:n}=this.getProps();if(!rg(s,n,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(s);if(a&&a.layout){const{min:d,max:h}=a.layout.layoutBox[s];l.set(r[s]-gs(d,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:r,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!au(s)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Ua(d=>{const h=this.getAxisMotionValue(d);if(h&&this.constraints!==!1){const f=h.get();a[d]=WY({min:f,max:f},this.constraints[d])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ua(d=>{if(!rg(d,r,null))return;const h=this.getAxisMotionValue(d),{min:f,max:x}=this.constraints[d];h.set(gs(f,x,a[d]))})}addListeners(){if(!this.visualElement.current)return;ZY.set(this.visualElement,this);const r=this.visualElement.current,s=N0(r,"pointerdown",f=>{const{drag:x,dragListener:p=!0}=this.getProps();x&&p&&this.start(f)}),n=()=>{const{dragConstraints:f}=this.getProps();au(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),cs.read(n);const d=_0(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:x})=>{this.isDragging&&x&&(Ua(p=>{const b=this.getAxisMotionValue(p);b&&(this.originPoint[p]+=f[p].translate,b.set(b.get()+f[p].translate))}),this.visualElement.render())}));return()=>{d(),s(),l(),h&&h()}}getProps(){const r=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:d=aN,dragMomentum:h=!0}=r;return{...r,drag:s,dragDirectionLock:n,dragPropagation:a,dragConstraints:l,dragElastic:d,dragMomentum:h}}}function rg(e,r,s){return(r===!0||r===e)&&(s===null||s===e)}function JY(e,r=10){let s=null;return Math.abs(e.y)>r?s="y":Math.abs(e.x)>r&&(s="x"),s}class eW extends rc{constructor(r){super(r),this.removeGroupControls=Ya,this.removeListeners=Ya,this.controls=new QY(r)}mount(){const{dragControls:r}=this.node.getProps();r&&(this.removeGroupControls=r.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ya}unmount(){this.removeGroupControls(),this.removeListeners()}}const IE=e=>(r,s)=>{e&&cs.postRender(()=>e(r,s))};class tW extends rc{constructor(){super(...arguments),this.removePointerDownListener=Ya}onPointerDown(r){this.session=new j_(r,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:N_(this.node)})}createPanHandlers(){const{onPanSessionStart:r,onPanStart:s,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:IE(r),onStart:IE(s),onMove:n,onEnd:(l,d)=>{delete this.session,a&&cs.postRender(()=>a(l,d))}}}mount(){this.removePointerDownListener=N0(this.node.current,"pointerdown",r=>this.onPointerDown(r))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Xg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function RE(e,r){return r.max===r.min?0:e/(r.max-r.min)*100}const Gh={correct:(e,r)=>{if(!r.target)return e;if(typeof e=="string")if(It.test(e))e=parseFloat(e);else return e;const s=RE(e,r.target.x),n=RE(e,r.target.y);return`${s}% ${n}%`}},rW={correct:(e,{treeScale:r,projectionDelta:s})=>{const n=e,a=Zo.parse(e);if(a.length>5)return n;const l=Zo.createTransformer(e),d=typeof a[0]!="number"?1:0,h=s.x.scale*r.x,f=s.y.scale*r.y;a[0+d]/=h,a[1+d]/=f;const x=gs(h,f,.5);return typeof a[2+d]=="number"&&(a[2+d]/=x),typeof a[3+d]=="number"&&(a[3+d]/=x),l(a)}};let kb=!1;class sW extends v.Component{componentDidMount(){const{visualElement:r,layoutGroup:s,switchLayoutGroup:n,layoutId:a}=this.props,{projection:l}=r;CG(nW),l&&(s.group&&s.group.add(l),n&&n.register&&a&&n.register(l),kb&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Xg.hasEverUpdated=!0}getSnapshotBeforeUpdate(r){const{layoutDependency:s,visualElement:n,drag:a,isPresent:l}=this.props,{projection:d}=n;return d&&(d.isPresent=l,kb=!0,a||r.layoutDependency!==s||s===void 0||r.isPresent!==l?d.willUpdate():this.safeToRemove(),r.isPresent!==l&&(l?d.promote():d.relegate()||cs.postRender(()=>{const h=d.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:r}=this.props.visualElement;r&&(r.root.didUpdate(),Zj.postRender(()=>{!r.currentAnimation&&r.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:r,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:a}=r;kb=!0,a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:r}=this.props;r&&r()}render(){return null}}function S_(e){const[r,s]=yG(),n=v.useContext(rk);return t.jsx(sW,{...e,layoutGroup:n,switchLayoutGroup:v.useContext(n_),isPresent:r,safeToRemove:s})}const nW={borderRadius:{...Gh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gh,borderTopRightRadius:Gh,borderBottomLeftRadius:Gh,borderBottomRightRadius:Gh,boxShadow:rW};function aW(e,r,s){const n=Dn(e)?e:ju(e);return n.start(lw("",n,r,s)),n.animation}const iW=(e,r)=>e.depth-r.depth;class lW{constructor(){this.children=[],this.isDirty=!1}add(r){kj(this.children,r),this.isDirty=!0}remove(r){_j(this.children,r),this.isDirty=!0}forEach(r){this.isDirty&&this.children.sort(iW),this.isDirty=!1,this.children.forEach(r)}}function oW(e,r){const s=Zn.now(),n=({timestamp:a})=>{const l=a-s;l>=r&&(Ko(n),e(l-r))};return cs.setup(n,!0),()=>Ko(n)}const C_=["TopLeft","TopRight","BottomLeft","BottomRight"],cW=C_.length,ME=e=>typeof e=="string"?parseFloat(e):e,LE=e=>typeof e=="number"||It.test(e);function dW(e,r,s,n,a,l){a?(e.opacity=gs(0,s.opacity??1,uW(n)),e.opacityExit=gs(r.opacity??1,0,hW(n))):l&&(e.opacity=gs(r.opacity??1,s.opacity??1,n));for(let d=0;d<cW;d++){const h=`border${C_[d]}Radius`;let f=FE(r,h),x=FE(s,h);if(f===void 0&&x===void 0)continue;f||(f=0),x||(x=0),f===0||x===0||LE(f)===LE(x)?(e[h]=Math.max(gs(ME(f),ME(x),n),0),(Yi.test(x)||Yi.test(f))&&(e[h]+="%")):e[h]=x}(r.rotate||s.rotate)&&(e.rotate=gs(r.rotate||0,s.rotate||0,n))}function FE(e,r){return e[r]!==void 0?e[r]:e.borderRadius}const uW=A_(0,.5,mk),hW=A_(.5,.95,Ya);function A_(e,r,s){return n=>n<e?0:n>r?1:s(T0(e,r,n))}function BE(e,r){e.min=r.min,e.max=r.max}function ci(e,r){BE(e.x,r.x),BE(e.y,r.y)}function UE(e,r){e.translate=r.translate,e.scale=r.scale,e.originPoint=r.originPoint,e.origin=r.origin}function zE(e,r,s,n,a){return e-=r,e=xx(e,1/s,n),a!==void 0&&(e=xx(e,1/a,n)),e}function mW(e,r=0,s=1,n=.5,a,l=e,d=e){if(Yi.test(r)&&(r=parseFloat(r),r=gs(d.min,d.max,r/100)-d.min),typeof r!="number")return;let h=gs(l.min,l.max,n);e===l&&(h-=r),e.min=zE(e.min,r,s,h,a),e.max=zE(e.max,r,s,h,a)}function VE(e,r,[s,n,a],l,d){mW(e,r[s],r[n],r[a],r.scale,l,d)}const fW=["x","scaleX","originX"],gW=["y","scaleY","originY"];function $E(e,r,s,n){VE(e.x,r,fW,s?s.x:void 0,n?n.x:void 0),VE(e.y,r,gW,s?s.y:void 0,n?n.y:void 0)}function qE(e){return e.translate===0&&e.scale===1}function E_(e){return qE(e.x)&&qE(e.y)}function HE(e,r){return e.min===r.min&&e.max===r.max}function xW(e,r){return HE(e.x,r.x)&&HE(e.y,r.y)}function GE(e,r){return Math.round(e.min)===Math.round(r.min)&&Math.round(e.max)===Math.round(r.max)}function T_(e,r){return GE(e.x,r.x)&&GE(e.y,r.y)}function YE(e){return Mn(e.x)/Mn(e.y)}function WE(e,r){return e.translate===r.translate&&e.scale===r.scale&&e.originPoint===r.originPoint}class pW{constructor(){this.members=[]}add(r){kj(this.members,r),r.scheduleRender()}remove(r){if(_j(this.members,r),r===this.prevLead&&(this.prevLead=void 0),r===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(r){const s=this.members.findIndex(a=>r===a);if(s===0)return!1;let n;for(let a=s;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){n=l;break}}return n?(this.promote(n),!0):!1}promote(r,s){const n=this.lead;if(r!==n&&(this.prevLead=n,this.lead=r,r.show(),n)){n.instance&&n.scheduleRender(),r.scheduleRender(),r.resumeFrom=n,s&&(r.resumeFrom.preserveOpacity=!0),n.snapshot&&(r.snapshot=n.snapshot,r.snapshot.latestValues=n.animationValues||n.latestValues),r.root&&r.root.isUpdating&&(r.isLayoutDirty=!0);const{crossfade:a}=r.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(r=>{const{options:s,resumingFrom:n}=r;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(r=>{r.instance&&r.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yW(e,r,s){let n="";const a=e.x.translate/r.x,l=e.y.translate/r.y,d=s?.z||0;if((a||l||d)&&(n=`translate3d(${a}px, ${l}px, ${d}px) `),(r.x!==1||r.y!==1)&&(n+=`scale(${1/r.x}, ${1/r.y}) `),s){const{transformPerspective:x,rotate:p,rotateX:b,rotateY:S,skewX:T,skewY:A}=s;x&&(n=`perspective(${x}px) ${n}`),p&&(n+=`rotate(${p}deg) `),b&&(n+=`rotateX(${b}deg) `),S&&(n+=`rotateY(${S}deg) `),T&&(n+=`skewX(${T}deg) `),A&&(n+=`skewY(${A}deg) `)}const h=e.x.scale*r.x,f=e.y.scale*r.y;return(h!==1||f!==1)&&(n+=`scale(${h}, ${f})`),n||"none"}const _b=["","X","Y","Z"],bW=1e3;let vW=0;function Ib(e,r,s,n){const{latestValues:a}=r;a[e]&&(s[e]=a[e],r.setStaticValue(e,0),n&&(n[e]=0))}function D_(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:r}=e.options;if(!r)return;const s=f_(r);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:l}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",cs,!(a||l))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&D_(n)}function O_({attachResizeListener:e,defaultParent:r,measureScroll:s,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(d={},h=r?.()){this.id=vW++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(wW),this.nodes.forEach(EW),this.nodes.forEach(TW),this.nodes.forEach(SW)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new lW)}addEventListener(d,h){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new Mj),this.eventHandlers.get(d).add(h)}notifyListeners(d,...h){const f=this.eventHandlers.get(d);f&&f.notify(...h)}hasListeners(d){return this.eventHandlers.has(d)}mount(d){if(this.instance)return;this.isSVG=Hk(d)&&!gG(d),this.instance=d;const{layoutId:h,layout:f,visualElement:x}=this.options;if(x&&!x.current&&x.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||h)&&(this.isLayoutDirty=!0),e){let p,b=0;const S=()=>this.root.updateBlockedByResize=!1;cs.read(()=>{b=window.innerWidth}),e(d,()=>{const T=window.innerWidth;T!==b&&(b=T,this.root.updateBlockedByResize=!0,p&&p(),p=oW(S,250),Xg.hasAnimatedSinceResize&&(Xg.hasAnimatedSinceResize=!1,this.nodes.forEach(ZE)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&x&&(h||f)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:b,hasRelativeLayoutChanged:S,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||x.getDefaultTransition()||_W,{onLayoutAnimationStart:P,onLayoutAnimationComplete:D}=x.getProps(),I=!this.targetLayout||!T_(this.targetLayout,T),L=!b&&S;if(this.options.layoutRoot||this.resumeFrom||L||b&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...Xj(A,"layout"),onPlay:P,onComplete:D};(x.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(p,L)}else b||ZE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ko(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(DW),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&D_(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const b=this.path[p];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(XE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(KE);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(AW),this.nodes.forEach(NW),this.nodes.forEach(jW)):this.nodes.forEach(KE),this.clearAllSnapshots();const h=Zn.now();bn.delta=Ml(0,1e3/60,h-bn.timestamp),bn.timestamp=h,bn.isProcessing=!0,jb.update.process(bn),jb.preRender.process(bn),jb.render.process(bn),bn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Zj.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(CW),this.sharedNodes.forEach(OW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,cs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){cs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Mn(this.snapshot.measuredBox.x)&&!Mn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Js(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(h=!1),h&&this.instance){const f=n(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:f,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!a)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!E_(this.projectionDelta),f=this.getTransformTemplate(),x=f?f(this.latestValues,""):void 0,p=x!==this.prevTransformTemplateValue;d&&this.instance&&(h||Fc(this.latestValues)||p)&&(a(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return d&&(f=this.removeTransform(f)),IW(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:d}=this.options;if(!d)return Js();const h=d.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(RW))){const{scroll:x}=this.root;x&&(iu(h.x,x.offset.x),iu(h.y,x.offset.y))}return h}removeElementScroll(d){const h=Js();if(ci(h,d),this.scroll?.wasRoot)return h;for(let f=0;f<this.path.length;f++){const x=this.path[f],{scroll:p,options:b}=x;x!==this.root&&p&&b.layoutScroll&&(p.wasRoot&&ci(h,d),iu(h.x,p.offset.x),iu(h.y,p.offset.y))}return h}applyTransform(d,h=!1){const f=Js();ci(f,d);for(let x=0;x<this.path.length;x++){const p=this.path[x];!h&&p.options.layoutScroll&&p.scroll&&p!==p.root&&lu(f,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Fc(p.latestValues)&&lu(f,p.latestValues)}return Fc(this.latestValues)&&lu(f,this.latestValues),f}removeTransform(d){const h=Js();ci(h,d);for(let f=0;f<this.path.length;f++){const x=this.path[f];if(!x.instance||!Fc(x.latestValues))continue;J2(x.latestValues)&&x.updateSnapshot();const p=Js(),b=x.measurePageBox();ci(p,b),$E(h,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,p)}return Fc(this.latestValues)&&$E(h,this.latestValues),h}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(d||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:b}=this.options;if(!this.layout||!(p||b))return;this.resolvedRelativeTargetAt=bn.timestamp;const S=this.getClosestProjectingParent();S&&this.linkedParentVersion!==S.layoutVersion&&!S.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(S&&S.layout?this.createRelativeTarget(S,this.layout.layoutBox,S.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Js(),this.targetWithTransforms=Js()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),zY(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ci(this.target,this.layout.layoutBox),o_(this.target,this.targetDelta)):ci(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?this.createRelativeTarget(S,this.target,S.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||J2(this.parent.latestValues)||l_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(d,h,f){this.relativeParent=d,this.linkedParentVersion=d.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Js(),this.relativeTargetOrigin=Js(),px(this.relativeTargetOrigin,h,f),ci(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const d=this.getLead(),h=!!this.resumingFrom||this!==d;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===bn.timestamp&&(f=!1),f)return;const{layout:x,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||p))return;ci(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,S=this.treeScale.y;JG(this.layoutCorrected,this.treeScale,this.path,h),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=Js());const{target:T}=d;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(UE(this.prevProjectionDelta.x,this.projectionDelta.x),UE(this.prevProjectionDelta.y,this.projectionDelta.y)),j0(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==S||!WE(this.projectionDelta.x,this.prevProjectionDelta.x)||!WE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){if(this.options.visualElement?.scheduleRender(),d){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ou(),this.projectionDelta=ou(),this.projectionDeltaWithTransform=ou()}setAnimationOrigin(d,h=!1){const f=this.snapshot,x=f?f.latestValues:{},p={...this.latestValues},b=ou();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const S=Js(),T=f?f.source:void 0,A=this.layout?this.layout.source:void 0,P=T!==A,D=this.getStack(),I=!D||D.members.length<=1,L=!!(P&&!I&&this.options.crossfade===!0&&!this.path.some(kW));this.animationProgress=0;let _;this.mixTargetDelta=$=>{const F=$/1e3;QE(b.x,d.x,F),QE(b.y,d.y,F),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(px(S,this.layout.layoutBox,this.relativeParent.layout.layoutBox),PW(this.relativeTarget,this.relativeTargetOrigin,S,F),_&&xW(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Js()),ci(_,this.relativeTarget)),P&&(this.animationValues=p,dW(p,x,this.latestValues,F,L,I)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ko(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=cs.update(()=>{Xg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ju(0)),this.currentAnimation=aW(this.motionValue,[0,1e3],{...d,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),d.onUpdate&&d.onUpdate(h)},onStop:()=>{},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(bW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:h,target:f,layout:x,latestValues:p}=d;if(!(!h||!f||!x)){if(this!==d&&this.layout&&x&&P_(this.options.animationType,this.layout.layoutBox,x.layoutBox)){f=this.target||Js();const b=Mn(this.layout.layoutBox.x);f.x.min=d.target.x.min,f.x.max=f.x.min+b;const S=Mn(this.layout.layoutBox.y);f.y.min=d.target.y.min,f.y.max=f.y.min+S}ci(h,f),lu(h,p),j0(this.projectionDeltaWithTransform,this.layoutCorrected,h,p)}}registerSharedNode(d,h){this.sharedNodes.has(d)||this.sharedNodes.set(d,new pW),this.sharedNodes.get(d).add(h);const x=h.options.initialPromotionConfig;h.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(h):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){const{layoutId:d}=this.options;return d?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:d}=this.options;return d?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:h,preserveFollowOpacity:f}={}){const x=this.getStack();x&&x.promote(this,f),d&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let h=!1;const{latestValues:f}=d;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const x={};f.z&&Ib("z",d,x,this.animationValues);for(let p=0;p<_b.length;p++)Ib(`rotate${_b[p]}`,d,x,this.animationValues),Ib(`skew${_b[p]}`,d,x,this.animationValues);d.render();for(const p in x)d.setStaticValue(p,x[p]),this.animationValues&&(this.animationValues[p]=x[p]);d.scheduleRender()}applyProjectionStyles(d,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){d.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,d.visibility="",d.opacity="",d.pointerEvents=Wg(h?.pointerEvents)||"",d.transform=f?f(this.latestValues,""):"none";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(d.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,d.pointerEvents=Wg(h?.pointerEvents)||""),this.hasProjected&&!Fc(this.latestValues)&&(d.transform=f?f({},""):"none",this.hasProjected=!1);return}d.visibility="";const p=x.animationValues||x.latestValues;this.applyTransformsToTarget();let b=yW(this.projectionDeltaWithTransform,this.treeScale,p);f&&(b=f(p,b)),d.transform=b;const{x:S,y:T}=this.projectionDelta;d.transformOrigin=`${S.origin*100}% ${T.origin*100}% 0`,x.animationValues?d.opacity=x===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:d.opacity=x===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const A in k0){if(p[A]===void 0)continue;const{correct:P,applyTo:D,isCSSVariable:I}=k0[A],L=b==="none"?p[A]:P(p[A],x);if(D){const _=D.length;for(let $=0;$<_;$++)d[D[$]]=L}else I?this.options.visualElement.renderState.vars[A]=L:d[A]=L}this.options.layoutId&&(d.pointerEvents=x===this?Wg(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>d.currentAnimation?.stop()),this.root.nodes.forEach(XE),this.root.sharedNodes.clear()}}}function NW(e){e.updateLayout()}function jW(e){const r=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:n}=e.layout,{animationType:a}=e.options,l=r.source!==e.layout.source;a==="size"?Ua(p=>{const b=l?r.measuredBox[p]:r.layoutBox[p],S=Mn(b);b.min=s[p].min,b.max=b.min+S}):P_(a,r.layoutBox,s)&&Ua(p=>{const b=l?r.measuredBox[p]:r.layoutBox[p],S=Mn(s[p]);b.max=b.min+S,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[p].max=e.relativeTarget[p].min+S)});const d=ou();j0(d,s,r.layoutBox);const h=ou();l?j0(h,e.applyTransform(n,!0),r.measuredBox):j0(h,s,r.layoutBox);const f=!E_(d);let x=!1;if(!e.resumeFrom){const p=e.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:b,layout:S}=p;if(b&&S){const T=Js();px(T,r.layoutBox,b.layoutBox);const A=Js();px(A,s,S.layoutBox),T_(T,A)||(x=!0),p.options.layoutRoot&&(e.relativeTarget=A,e.relativeTargetOrigin=T,e.relativeParent=p)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:r,delta:h,layoutDelta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:x})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function wW(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function SW(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function CW(e){e.clearSnapshot()}function XE(e){e.clearMeasurements()}function KE(e){e.isLayoutDirty=!1}function AW(e){const{visualElement:r}=e.options;r&&r.getProps().onBeforeLayoutMeasure&&r.notify("BeforeLayoutMeasure"),e.resetTransform()}function ZE(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function EW(e){e.resolveTargetDelta()}function TW(e){e.calcProjection()}function DW(e){e.resetSkewAndRotation()}function OW(e){e.removeLeadSnapshot()}function QE(e,r,s){e.translate=gs(r.translate,0,s),e.scale=gs(r.scale,1,s),e.origin=r.origin,e.originPoint=r.originPoint}function JE(e,r,s,n){e.min=gs(r.min,s.min,n),e.max=gs(r.max,s.max,n)}function PW(e,r,s,n){JE(e.x,r.x,s.x,n),JE(e.y,r.y,s.y,n)}function kW(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const _W={duration:.45,ease:[.4,0,.1,1]},e5=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),t5=e5("applewebkit/")&&!e5("chrome/")?Math.round:Ya;function r5(e){e.min=t5(e.min),e.max=t5(e.max)}function IW(e){r5(e.x),r5(e.y)}function P_(e,r,s){return e==="position"||e==="preserve-aspect"&&!UY(YE(r),YE(s),.2)}function RW(e){return e!==e.root&&e.scroll?.wasRoot}const MW=O_({attachResizeListener:(e,r)=>_0(e,"resize",r),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Rb={current:void 0},k_=O_({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Rb.current){const e=new MW({});e.mount(window),e.setOptions({layoutScroll:!0}),Rb.current=e}return Rb.current},resetTransform:(e,r)=>{e.style.transform=r!==void 0?r:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),LW={pan:{Feature:tW},drag:{Feature:eW,ProjectionNode:k_,MeasureLayout:S_}};function s5(e,r,s){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,l=n[a];l&&cs.postRender(()=>l(r,cm(r)))}class FW extends rc{mount(){const{current:r}=this.node;r&&(this.unmount=dG(r,(s,n)=>(s5(this.node,n,"Start"),a=>s5(this.node,a,"End"))))}unmount(){}}class BW extends rc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let r=!1;try{r=this.node.current.matches(":focus-visible")}catch{r=!0}!r||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=im(_0(this.node.current,"focus",()=>this.onFocus()),_0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function n5(e,r,s){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),l=n[a];l&&cs.postRender(()=>l(r,cm(r)))}class UW extends rc{mount(){const{current:r}=this.node;r&&(this.unmount=fG(r,(s,n)=>(n5(this.node,n,"Start"),(a,{success:l})=>n5(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const iN=new WeakMap,Mb=new WeakMap,zW=e=>{const r=iN.get(e.target);r&&r(e)},VW=e=>{e.forEach(zW)};function $W({root:e,...r}){const s=e||document;Mb.has(s)||Mb.set(s,{});const n=Mb.get(s),a=JSON.stringify(r);return n[a]||(n[a]=new IntersectionObserver(VW,{root:e,...r})),n[a]}function qW(e,r,s){const n=$W(r);return iN.set(e,s),n.observe(e),()=>{iN.delete(e),n.unobserve(e)}}const HW={some:0,all:1};class GW extends rc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:r={}}=this.node.getProps(),{root:s,margin:n,amount:a="some",once:l}=r,d={root:s?s.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:HW[a]},h=f=>{const{isIntersecting:x}=f;if(this.isInView===x||(this.isInView=x,l&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:p,onViewportLeave:b}=this.node.getProps(),S=x?p:b;S&&S(f)};return qW(this.node.current,d,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:r,prevProps:s}=this.node;["amount","margin","root"].some(YW(r,s))&&this.startObserver()}unmount(){}}function YW({viewport:e={}},{viewport:r={}}={}){return s=>e[s]!==r[s]}const WW={inView:{Feature:GW},tap:{Feature:UW},focus:{Feature:BW},hover:{Feature:FW}},XW={layout:{ProjectionNode:k_,MeasureLayout:S_}},KW={...IY,...WW,...LW,...XW},__=KG(KW,cY),ZW=[{value:"lifetime",label:"All Time",icon:""},{value:"last12Months",label:"12 Months",icon:"12M"},{value:"last6Months",label:"6 Months",icon:"6M"},{value:"last3Months",label:"3 Months",icon:"3M"},{value:"lastMonth",label:"Last Month",icon:"1M"},{value:"thisMonth",label:"This Month",icon:"TM"}],QW=({selected:e,onChange:r})=>t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-2",children:t.jsx("div",{className:"flex flex-wrap gap-2",children:ZW.map(s=>t.jsxs(__.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r(s.value),className:`
              px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200
              ${e===s.value?"bg-gray-800 text-white shadow-md":"bg-gray-50 text-gray-700 hover:bg-gray-100"}
            `,children:[t.jsx("span",{className:"hidden sm:inline",children:s.label}),t.jsx("span",{className:"sm:hidden font-semibold",children:s.icon})]},s.value))})});function JW(e){return Yt({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"},child:[]}]})(e)}function eX(e){return Yt({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"},child:[]},{tag:"path",attr:{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"},child:[]}]})(e)}const Hs=({title:e,value:r,subtitle:s,icon:n,trend:a,trendDirection:l="neutral",bgColor:d="bg-white",iconColor:h="text-gray-800",children:f,loading:x=!1})=>{const p={up:"text-green-600 bg-green-50",down:"text-red-600 bg-red-50",neutral:"text-gray-600 bg-gray-50"};return x?t.jsxs("div",{className:`${d} rounded-lg shadow-sm border border-gray-100 p-4 animate-pulse`,children:[t.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-3"}),t.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),t.jsx("div",{className:"h-2 bg-gray-200 rounded w-1/3"})]}):t.jsxs(__.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`${d} rounded-lg shadow-sm hover:shadow-md transition-all duration-200 border border-gray-100 p-4`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1 uppercase tracking-wide",children:e}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 truncate",children:r}),s&&t.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:s})]}),n&&t.jsx("div",{className:`${h} bg-opacity-10 p-2 rounded-lg flex-shrink-0 ml-2`,children:n})]}),a&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${p[l]}`,children:a}),t.jsx("span",{className:"text-xs text-gray-500",children:"vs last period"})]}),f&&t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:f})]})},tX=async()=>Se(je.get("/web/analytics/dashboard")),mi=e=>!e&&e!==0?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Br=e=>!e&&e!==0?"0":e>=1e7?`${(e/1e7).toFixed(1)}Cr`:e>=1e5?`${(e/1e5).toFixed(1)}L`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString(),rX=e=>{if(!e)return"N/A";const r=new Date(e);return new Intl.DateTimeFormat("en-IN",{day:"numeric",month:"short",year:"numeric"}).format(r)},sX=({data:e,loading:r})=>{if(!e)return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(l=>t.jsx(Hs,{loading:!0},l))});const{email:s,whatsapp:n,totalCommunications:a}=e;return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"Communication Analytics"}),t.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-green-50 px-2 py-1 rounded-full border border-green-200",children:[t.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),t.jsx("span",{children:"Real-time"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[t.jsx(Hs,{title:"Total Communications",value:Br(a),subtitle:"All channels combined",icon:t.jsx(JW,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:r}),t.jsx(Hs,{title:"Email Messages",value:Br(s.total),subtitle:`${s.successRate} success rate`,icon:t.jsx(eX,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:r}),t.jsx(Hs,{title:"WhatsApp Messages",value:Br(n.total),subtitle:`${n.successRate} success rate`,icon:t.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),iconColor:"text-green-600",loading:r}),t.jsx(Hs,{title:"Overall Success Rate",value:a>0?((s.successful+n.successful)/a*100).toFixed(1)+"%":"0%",subtitle:"Across all channels",icon:t.jsx(Nu,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:r})]})]})};function nX(e){return Yt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 32C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48H48zm0 32h106c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H38c-3.3 0-6-2.7-6-6V80c0-8.8 7.2-16 16-16zm426 96H38c-3.3 0-6-2.7-6-6v-36c0-3.3 2.7-6 6-6h138l30.2-45.3c1.1-1.7 3-2.7 5-2.7H464c8.8 0 16 7.2 16 16v74c0 3.3-2.7 6-6 6zM256 424c-66.2 0-120-53.8-120-120s53.8-120 120-120 120 53.8 120 120-53.8 120-120 120zm0-208c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm-48 104c-8.8 0-16-7.2-16-16 0-35.3 28.7-64 64-64 8.8 0 16 7.2 16 16s-7.2 16-16 16c-17.6 0-32 14.4-32 32 0 8.8-7.2 16-16 16z"},child:[]}]})(e)}function I_(e){return Yt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(e)}function aX(e){return Yt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 174.8l-39.6-39.6c-9.4-9.4-24.6-9.4-33.9 0L192 374.7 80.6 263.2c-9.4-9.4-24.6-9.4-33.9 0L7 302.9c-9.4 9.4-9.4 24.6 0 34L175 505c9.4 9.4 24.6 9.4 33.9 0l296-296.2c9.4-9.5 9.4-24.7.1-34zm-324.3 106c6.2 6.3 16.4 6.3 22.6 0l208-208.2c6.2-6.3 6.2-16.4 0-22.6L366.1 4.7c-6.2-6.3-16.4-6.3-22.6 0L192 156.2l-55.4-55.5c-6.2-6.3-16.4-6.3-22.6 0L68.7 146c-6.2 6.3-6.2 16.4 0 22.6l112 112.2z"},child:[]}]})(e)}function lN(e){return Yt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"},child:[]}]})(e)}function oN(e){return Yt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function Yh(e){return Yt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M223.75 130.75L154.62 15.54A31.997 31.997 0 0 0 127.18 0H16.03C3.08 0-4.5 14.57 2.92 25.18l111.27 158.96c29.72-27.77 67.52-46.83 109.56-53.39zM495.97 0H384.82c-11.24 0-21.66 5.9-27.44 15.54l-69.13 115.21c42.04 6.56 79.84 25.62 109.56 53.38L509.08 25.18C516.5 14.57 508.92 0 495.97 0zM256 160c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm92.52 157.26l-37.93 36.96 8.97 52.22c1.6 9.36-8.26 16.51-16.65 12.09L256 393.88l-46.9 24.65c-8.4 4.45-18.25-2.74-16.65-12.09l8.97-52.22-37.93-36.96c-6.82-6.64-3.05-18.23 6.35-19.59l52.43-7.64 23.43-47.52c2.11-4.28 6.19-6.39 10.28-6.39 4.11 0 8.22 2.14 10.33 6.39l23.43 47.52 52.43 7.64c9.4 1.36 13.17 12.95 6.35 19.59z"},child:[]}]})(e)}function yx(e){return Yt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M128 160h320v192H128V160zm400 96c0 26.51 21.49 48 48 48v96c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48v-96c26.51 0 48-21.49 48-48s-21.49-48-48-48v-96c0-26.51 21.49-48 48-48h480c26.51 0 48 21.49 48 48v96c-26.51 0-48 21.49-48 48zm-48-104c0-13.255-10.745-24-24-24H120c-13.255 0-24 10.745-24 24v208c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V152z"},child:[]}]})(e)}function iX(e){return Yt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function R_(e){return Yt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}const lX=({usersData:e,adminsData:r,loading:s})=>t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"Users & Admins"}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e&&t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-medium text-gray-600 mb-1",children:"Total Users"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Br(e.total)})]}),t.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:t.jsx(R_,{className:"w-6 h-6 text-gray-800"})})]}),e.growth&&t.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-50 border border-green-200 mb-3",children:[t.jsx("span",{className:"text-xs font-bold text-green-700",children:e.growth}),t.jsx("span",{className:"text-xs text-gray-600",children:"growth"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-3 rounded-lg border border-green-100",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[t.jsx(iX,{className:"w-3 h-3 text-green-600"}),t.jsx("p",{className:"text-xs font-medium text-gray-600",children:"This Month"})]}),t.jsx("p",{className:"text-xl font-bold text-green-700",children:Br(e.thisMonth)})]}),t.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[t.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Last Month"}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:Br(e.lastMonth)})]})]})]}),r&&t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-medium text-gray-600 mb-1",children:"Total Admins"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Br(r.total)})]}),t.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:t.jsx($$,{className:"w-6 h-6 text-purple-600"})})]}),t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-50 border border-green-200",children:[t.jsx(W$,{className:"w-3 h-3 text-green-600"}),t.jsx("span",{className:"text-xs font-bold text-gray-900",children:r.active}),t.jsx("span",{className:"text-xs text-gray-600",children:"active"})]}),t.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gray-100 border border-gray-200",children:[t.jsx("span",{className:"text-xs font-bold text-gray-900",children:r.inactive}),t.jsx("span",{className:"text-xs text-gray-600",children:"inactive"})]})]}),r.byRole&&Object.keys(r.byRole).length>0&&t.jsxs("div",{className:"space-y-1.5 mt-3 pt-3 border-t border-gray-200",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase mb-1.5",children:"By Role"}),Object.entries(r.byRole).map(([n,a])=>t.jsxs("div",{className:"flex items-center justify-between text-xs p-2 rounded-lg bg-purple-50 hover:bg-purple-100 transition-colors",children:[t.jsx("span",{className:"font-medium text-gray-900 capitalize",children:n.replace("_"," ")}),t.jsx("span",{className:"font-bold text-purple-700",children:a})]},n))]})]})]})]});var oX=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function ow(e){if(typeof e!="string")return!1;var r=oX;return r.includes(e)}var cX=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],dX=new Set(cX);function M_(e){return typeof e!="string"?!1:dX.has(e)}function L_(e){return typeof e=="string"&&e.startsWith("data-")}function Su(e){if(typeof e!="object"||e===null)return{};var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(M_(s)||L_(s))&&(r[s]=e[s]);return r}function cN(e){if(e==null)return null;if(v.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var r=e.props;return Su(r)}return typeof e=="object"&&!Array.isArray(e)?Su(e):null}function Xa(e){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(M_(s)||L_(s)||ow(s))&&(r[s]=e[s]);return r}var uX=["children","width","height","viewBox","className","style","title","desc"];function dN(){return dN=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},dN.apply(null,arguments)}function hX(e,r){if(e==null)return{};var s,n,a=mX(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function mX(e,r){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var cw=v.forwardRef((e,r)=>{var{children:s,width:n,height:a,viewBox:l,className:d,style:h,title:f,desc:x}=e,p=hX(e,uX),b=l||{width:n,height:a,x:0,y:0},S=Rs("recharts-surface",d);return v.createElement("svg",dN({},Xa(p),{className:S,width:n,height:a,style:h,viewBox:"".concat(b.x," ").concat(b.y," ").concat(b.width," ").concat(b.height),ref:r}),v.createElement("title",null,f),v.createElement("desc",null,x),s)}),fX=["children","className"];function uN(){return uN=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},uN.apply(null,arguments)}function gX(e,r){if(e==null)return{};var s,n,a=xX(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function xX(e,r){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var Qo=v.forwardRef((e,r)=>{var{children:s,className:n}=e,a=gX(e,fX),l=Rs("recharts-layer",n);return v.createElement("g",uN({className:l},Xa(a),{ref:r}),s)}),F_=v.createContext(null),pX=()=>v.useContext(F_);function Xr(e){return function(){return e}}const B_=Math.cos,bx=Math.sin,Ai=Math.sqrt,vx=Math.PI,Dp=2*vx,hN=Math.PI,mN=2*hN,Bc=1e-6,yX=mN-Bc;function U_(e){this._+=e[0];for(let r=1,s=e.length;r<s;++r)this._+=arguments[r]+e[r]}function bX(e){let r=Math.floor(e);if(!(r>=0))throw new Error(`invalid digits: ${e}`);if(r>15)return U_;const s=10**r;return function(n){this._+=n[0];for(let a=1,l=n.length;a<l;++a)this._+=Math.round(arguments[a]*s)/s+n[a]}}class vX{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?U_:bX(r)}moveTo(r,s){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+s}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,s){this._append`L${this._x1=+r},${this._y1=+s}`}quadraticCurveTo(r,s,n,a){this._append`Q${+r},${+s},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(r,s,n,a,l,d){this._append`C${+r},${+s},${+n},${+a},${this._x1=+l},${this._y1=+d}`}arcTo(r,s,n,a,l){if(r=+r,s=+s,n=+n,a=+a,l=+l,l<0)throw new Error(`negative radius: ${l}`);let d=this._x1,h=this._y1,f=n-r,x=a-s,p=d-r,b=h-s,S=p*p+b*b;if(this._x1===null)this._append`M${this._x1=r},${this._y1=s}`;else if(S>Bc)if(!(Math.abs(b*f-x*p)>Bc)||!l)this._append`L${this._x1=r},${this._y1=s}`;else{let T=n-d,A=a-h,P=f*f+x*x,D=T*T+A*A,I=Math.sqrt(P),L=Math.sqrt(S),_=l*Math.tan((hN-Math.acos((P+S-D)/(2*I*L)))/2),$=_/L,F=_/I;Math.abs($-1)>Bc&&this._append`L${r+$*p},${s+$*b}`,this._append`A${l},${l},0,0,${+(b*T>p*A)},${this._x1=r+F*f},${this._y1=s+F*x}`}}arc(r,s,n,a,l,d){if(r=+r,s=+s,n=+n,d=!!d,n<0)throw new Error(`negative radius: ${n}`);let h=n*Math.cos(a),f=n*Math.sin(a),x=r+h,p=s+f,b=1^d,S=d?a-l:l-a;this._x1===null?this._append`M${x},${p}`:(Math.abs(this._x1-x)>Bc||Math.abs(this._y1-p)>Bc)&&this._append`L${x},${p}`,n&&(S<0&&(S=S%mN+mN),S>yX?this._append`A${n},${n},0,1,${b},${r-h},${s-f}A${n},${n},0,1,${b},${this._x1=x},${this._y1=p}`:S>Bc&&this._append`A${n},${n},0,${+(S>=hN)},${b},${this._x1=r+n*Math.cos(l)},${this._y1=s+n*Math.sin(l)}`)}rect(r,s,n,a){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+s}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function dw(e){let r=3;return e.digits=function(s){if(!arguments.length)return r;if(s==null)r=null;else{const n=Math.floor(s);if(!(n>=0))throw new RangeError(`invalid digits: ${s}`);r=n}return e},()=>new vX(r)}function uw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function z_(e){this._context=e}z_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:this._context.lineTo(e,r);break}}};function Op(e){return new z_(e)}function V_(e){return e[0]}function $_(e){return e[1]}function q_(e,r){var s=Xr(!0),n=null,a=Op,l=null,d=dw(h);e=typeof e=="function"?e:e===void 0?V_:Xr(e),r=typeof r=="function"?r:r===void 0?$_:Xr(r);function h(f){var x,p=(f=uw(f)).length,b,S=!1,T;for(n==null&&(l=a(T=d())),x=0;x<=p;++x)!(x<p&&s(b=f[x],x,f))===S&&((S=!S)?l.lineStart():l.lineEnd()),S&&l.point(+e(b,x,f),+r(b,x,f));if(T)return l=null,T+""||null}return h.x=function(f){return arguments.length?(e=typeof f=="function"?f:Xr(+f),h):e},h.y=function(f){return arguments.length?(r=typeof f=="function"?f:Xr(+f),h):r},h.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Xr(!!f),h):s},h.curve=function(f){return arguments.length?(a=f,n!=null&&(l=a(n)),h):a},h.context=function(f){return arguments.length?(f==null?n=l=null:l=a(n=f),h):n},h}function sg(e,r,s){var n=null,a=Xr(!0),l=null,d=Op,h=null,f=dw(x);e=typeof e=="function"?e:e===void 0?V_:Xr(+e),r=typeof r=="function"?r:Xr(r===void 0?0:+r),s=typeof s=="function"?s:s===void 0?$_:Xr(+s);function x(b){var S,T,A,P=(b=uw(b)).length,D,I=!1,L,_=new Array(P),$=new Array(P);for(l==null&&(h=d(L=f())),S=0;S<=P;++S){if(!(S<P&&a(D=b[S],S,b))===I)if(I=!I)T=S,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),A=S-1;A>=T;--A)h.point(_[A],$[A]);h.lineEnd(),h.areaEnd()}I&&(_[S]=+e(D,S,b),$[S]=+r(D,S,b),h.point(n?+n(D,S,b):_[S],s?+s(D,S,b):$[S]))}if(L)return h=null,L+""||null}function p(){return q_().defined(a).curve(d).context(l)}return x.x=function(b){return arguments.length?(e=typeof b=="function"?b:Xr(+b),n=null,x):e},x.x0=function(b){return arguments.length?(e=typeof b=="function"?b:Xr(+b),x):e},x.x1=function(b){return arguments.length?(n=b==null?null:typeof b=="function"?b:Xr(+b),x):n},x.y=function(b){return arguments.length?(r=typeof b=="function"?b:Xr(+b),s=null,x):r},x.y0=function(b){return arguments.length?(r=typeof b=="function"?b:Xr(+b),x):r},x.y1=function(b){return arguments.length?(s=b==null?null:typeof b=="function"?b:Xr(+b),x):s},x.lineX0=x.lineY0=function(){return p().x(e).y(r)},x.lineY1=function(){return p().x(e).y(s)},x.lineX1=function(){return p().x(n).y(r)},x.defined=function(b){return arguments.length?(a=typeof b=="function"?b:Xr(!!b),x):a},x.curve=function(b){return arguments.length?(d=b,l!=null&&(h=d(l)),x):d},x.context=function(b){return arguments.length?(b==null?l=h=null:h=d(l=b),x):l},x}class H_{constructor(r,s){this._context=r,this._x=s}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(r,s){switch(r=+r,s=+s,this._point){case 0:{this._point=1,this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+r)/2,this._y0,this._x0,s,r,s):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+s)/2,r,this._y0,r,s);break}}this._x0=r,this._y0=s}}function NX(e){return new H_(e,!0)}function jX(e){return new H_(e,!1)}const hw={draw(e,r){const s=Ai(r/vx);e.moveTo(s,0),e.arc(0,0,s,0,Dp)}},wX={draw(e,r){const s=Ai(r/5)/2;e.moveTo(-3*s,-s),e.lineTo(-s,-s),e.lineTo(-s,-3*s),e.lineTo(s,-3*s),e.lineTo(s,-s),e.lineTo(3*s,-s),e.lineTo(3*s,s),e.lineTo(s,s),e.lineTo(s,3*s),e.lineTo(-s,3*s),e.lineTo(-s,s),e.lineTo(-3*s,s),e.closePath()}},G_=Ai(1/3),SX=G_*2,CX={draw(e,r){const s=Ai(r/SX),n=s*G_;e.moveTo(0,-s),e.lineTo(n,0),e.lineTo(0,s),e.lineTo(-n,0),e.closePath()}},AX={draw(e,r){const s=Ai(r),n=-s/2;e.rect(n,n,s,s)}},EX=.8908130915292852,Y_=bx(vx/10)/bx(7*vx/10),TX=bx(Dp/10)*Y_,DX=-B_(Dp/10)*Y_,OX={draw(e,r){const s=Ai(r*EX),n=TX*s,a=DX*s;e.moveTo(0,-s),e.lineTo(n,a);for(let l=1;l<5;++l){const d=Dp*l/5,h=B_(d),f=bx(d);e.lineTo(f*s,-h*s),e.lineTo(h*n-f*a,f*n+h*a)}e.closePath()}},Lb=Ai(3),PX={draw(e,r){const s=-Ai(r/(Lb*3));e.moveTo(0,s*2),e.lineTo(-Lb*s,-s),e.lineTo(Lb*s,-s),e.closePath()}},Ma=-.5,La=Ai(3)/2,fN=1/Ai(12),kX=(fN/2+1)*3,_X={draw(e,r){const s=Ai(r/kX),n=s/2,a=s*fN,l=n,d=s*fN+s,h=-l,f=d;e.moveTo(n,a),e.lineTo(l,d),e.lineTo(h,f),e.lineTo(Ma*n-La*a,La*n+Ma*a),e.lineTo(Ma*l-La*d,La*l+Ma*d),e.lineTo(Ma*h-La*f,La*h+Ma*f),e.lineTo(Ma*n+La*a,Ma*a-La*n),e.lineTo(Ma*l+La*d,Ma*d-La*l),e.lineTo(Ma*h+La*f,Ma*f-La*h),e.closePath()}};function IX(e,r){let s=null,n=dw(a);e=typeof e=="function"?e:Xr(e||hw),r=typeof r=="function"?r:Xr(r===void 0?64:+r);function a(){let l;if(s||(s=l=n()),e.apply(this,arguments).draw(s,+r.apply(this,arguments)),l)return s=null,l+""||null}return a.type=function(l){return arguments.length?(e=typeof l=="function"?l:Xr(l),a):e},a.size=function(l){return arguments.length?(r=typeof l=="function"?l:Xr(+l),a):r},a.context=function(l){return arguments.length?(s=l??null,a):s},a}function Nx(){}function jx(e,r,s){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+r)/6,(e._y0+4*e._y1+s)/6)}function W_(e){this._context=e}W_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jx(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function RX(e){return new W_(e)}function X_(e){this._context=e}X_.prototype={areaStart:Nx,areaEnd:Nx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._x2=e,this._y2=r;break;case 1:this._point=2,this._x3=e,this._y3=r;break;case 2:this._point=3,this._x4=e,this._y4=r,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+r)/6);break;default:jx(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function MX(e){return new X_(e)}function K_(e){this._context=e}K_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var s=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(s,n):this._context.moveTo(s,n);break;case 3:this._point=4;default:jx(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function LX(e){return new K_(e)}function Z_(e){this._context=e}Z_.prototype={areaStart:Nx,areaEnd:Nx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,r){e=+e,r=+r,this._point?this._context.lineTo(e,r):(this._point=1,this._context.moveTo(e,r))}};function FX(e){return new Z_(e)}function a5(e){return e<0?-1:1}function i5(e,r,s){var n=e._x1-e._x0,a=r-e._x1,l=(e._y1-e._y0)/(n||a<0&&-0),d=(s-e._y1)/(a||n<0&&-0),h=(l*a+d*n)/(n+a);return(a5(l)+a5(d))*Math.min(Math.abs(l),Math.abs(d),.5*Math.abs(h))||0}function l5(e,r){var s=e._x1-e._x0;return s?(3*(e._y1-e._y0)/s-r)/2:r}function Fb(e,r,s){var n=e._x0,a=e._y0,l=e._x1,d=e._y1,h=(l-n)/3;e._context.bezierCurveTo(n+h,a+h*r,l-h,d-h*s,l,d)}function wx(e){this._context=e}wx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Fb(this,this._t0,l5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){var s=NaN;if(e=+e,r=+r,!(e===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,Fb(this,l5(this,s=i5(this,e,r)),s);break;default:Fb(this,this._t0,s=i5(this,e,r));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r,this._t0=s}}};function Q_(e){this._context=new J_(e)}(Q_.prototype=Object.create(wx.prototype)).point=function(e,r){wx.prototype.point.call(this,r,e)};function J_(e){this._context=e}J_.prototype={moveTo:function(e,r){this._context.moveTo(r,e)},closePath:function(){this._context.closePath()},lineTo:function(e,r){this._context.lineTo(r,e)},bezierCurveTo:function(e,r,s,n,a,l){this._context.bezierCurveTo(r,e,n,s,l,a)}};function BX(e){return new wx(e)}function UX(e){return new Q_(e)}function eI(e){this._context=e}eI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,r=this._y,s=e.length;if(s)if(this._line?this._context.lineTo(e[0],r[0]):this._context.moveTo(e[0],r[0]),s===2)this._context.lineTo(e[1],r[1]);else for(var n=o5(e),a=o5(r),l=0,d=1;d<s;++l,++d)this._context.bezierCurveTo(n[0][l],a[0][l],n[1][l],a[1][l],e[d],r[d]);(this._line||this._line!==0&&s===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,r){this._x.push(+e),this._y.push(+r)}};function o5(e){var r,s=e.length-1,n,a=new Array(s),l=new Array(s),d=new Array(s);for(a[0]=0,l[0]=2,d[0]=e[0]+2*e[1],r=1;r<s-1;++r)a[r]=1,l[r]=4,d[r]=4*e[r]+2*e[r+1];for(a[s-1]=2,l[s-1]=7,d[s-1]=8*e[s-1]+e[s],r=1;r<s;++r)n=a[r]/l[r-1],l[r]-=n,d[r]-=n*d[r-1];for(a[s-1]=d[s-1]/l[s-1],r=s-2;r>=0;--r)a[r]=(d[r]-a[r+1])/l[r];for(l[s-1]=(e[s]+a[s-1])/2,r=0;r<s-1;++r)l[r]=2*e[r+1]-a[r+1];return[a,l]}function zX(e){return new eI(e)}function Pp(e,r){this._context=e,this._t=r}Pp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(e,r);else{var s=this._x*(1-this._t)+e*this._t;this._context.lineTo(s,this._y),this._context.lineTo(s,r)}break}}this._x=e,this._y=r}};function VX(e){return new Pp(e,.5)}function $X(e){return new Pp(e,0)}function qX(e){return new Pp(e,1)}function Cu(e,r){if((d=e.length)>1)for(var s=1,n,a,l=e[r[0]],d,h=l.length;s<d;++s)for(a=l,l=e[r[s]],n=0;n<h;++n)l[n][1]+=l[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function gN(e){for(var r=e.length,s=new Array(r);--r>=0;)s[r]=r;return s}function HX(e,r){return e[r]}function GX(e){const r=[];return r.key=e,r}function YX(){var e=Xr([]),r=gN,s=Cu,n=HX;function a(l){var d=Array.from(e.apply(this,arguments),GX),h,f=d.length,x=-1,p;for(const b of l)for(h=0,++x;h<f;++h)(d[h][x]=[0,+n(b,d[h].key,x,l)]).data=b;for(h=0,p=uw(r(d));h<f;++h)d[p[h]].index=h;return s(d,p),d}return a.keys=function(l){return arguments.length?(e=typeof l=="function"?l:Xr(Array.from(l)),a):e},a.value=function(l){return arguments.length?(n=typeof l=="function"?l:Xr(+l),a):n},a.order=function(l){return arguments.length?(r=l==null?gN:typeof l=="function"?l:Xr(Array.from(l)),a):r},a.offset=function(l){return arguments.length?(s=l??Cu,a):s},a}function WX(e,r){if((n=e.length)>0){for(var s,n,a=0,l=e[0].length,d;a<l;++a){for(d=s=0;s<n;++s)d+=e[s][a][1]||0;if(d)for(s=0;s<n;++s)e[s][a][1]/=d}Cu(e,r)}}function XX(e,r){if((a=e.length)>0){for(var s=0,n=e[r[0]],a,l=n.length;s<l;++s){for(var d=0,h=0;d<a;++d)h+=e[d][s][1]||0;n[s][1]+=n[s][0]=-h/2}Cu(e,r)}}function KX(e,r){if(!(!((d=e.length)>0)||!((l=(a=e[r[0]]).length)>0))){for(var s=0,n=1,a,l,d;n<l;++n){for(var h=0,f=0,x=0;h<d;++h){for(var p=e[r[h]],b=p[n][1]||0,S=p[n-1][1]||0,T=(b-S)/2,A=0;A<h;++A){var P=e[r[A]],D=P[n][1]||0,I=P[n-1][1]||0;T+=D-I}f+=b,x+=T*b}a[n-1][1]+=a[n-1][0]=s,f&&(s-=x/f)}a[n-1][1]+=a[n-1][0]=s,Cu(e,r)}}var Bb={},Ub={},c5;function ZX(){return c5||(c5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){return s==="__proto__"}e.isUnsafeProperty=r})(Ub)),Ub}var zb={},d5;function tI(){return d5||(d5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){switch(typeof s){case"number":case"symbol":return!1;case"string":return s.includes(".")||s.includes("[")||s.includes("]")}}e.isDeepKey=r})(zb)),zb}var Vb={},u5;function mw(){return u5||(u5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){return typeof s=="string"||typeof s=="symbol"?s:Object.is(s?.valueOf?.(),-0)?"-0":String(s)}e.toKey=r})(Vb)),Vb}var $b={},qb={},h5;function QX(){return h5||(h5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){if(s==null)return"";if(typeof s=="string")return s;if(Array.isArray(s))return s.map(r).join(",");const n=String(s);return n==="0"&&Object.is(Number(s),-0)?"-0":n}e.toString=r})(qb)),qb}var m5;function fw(){return m5||(m5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=QX(),s=mw();function n(a){if(Array.isArray(a))return a.map(s.toKey);if(typeof a=="symbol")return[a];a=r.toString(a);const l=[],d=a.length;if(d===0)return l;let h=0,f="",x="",p=!1;for(a.charCodeAt(0)===46&&(l.push(""),h++);h<d;){const b=a[h];x?b==="\\"&&h+1<d?(h++,f+=a[h]):b===x?x="":f+=b:p?b==='"'||b==="'"?x=b:b==="]"?(p=!1,l.push(f),f=""):f+=b:b==="["?(p=!0,f&&(l.push(f),f="")):b==="."?f&&(l.push(f),f=""):f+=b,h++}return f&&l.push(f),l}e.toPath=n})($b)),$b}var f5;function gw(){return f5||(f5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=ZX(),s=tI(),n=mw(),a=fw();function l(h,f,x){if(h==null)return x;switch(typeof f){case"string":{if(r.isUnsafeProperty(f))return x;const p=h[f];return p===void 0?s.isDeepKey(f)?l(h,a.toPath(f),x):x:p}case"number":case"symbol":{typeof f=="number"&&(f=n.toKey(f));const p=h[f];return p===void 0?x:p}default:{if(Array.isArray(f))return d(h,f,x);if(Object.is(f?.valueOf(),-0)?f="-0":f=String(f),r.isUnsafeProperty(f))return x;const p=h[f];return p===void 0?x:p}}}function d(h,f,x){if(f.length===0)return x;let p=h;for(let b=0;b<f.length;b++){if(p==null||r.isUnsafeProperty(f[b]))return x;p=p[f[b]]}return p===void 0?x:p}e.get=l})(Bb)),Bb}var Hb,g5;function JX(){return g5||(g5=1,Hb=gw().get),Hb}var eK=JX();const I0=Qi(eK);var Qn=e=>e===0?0:e>0?1:-1,Fl=e=>typeof e=="number"&&e!=+e,Bl=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Bt=e=>(typeof e=="number"||e instanceof Number)&&!Fl(e),Ul=e=>Bt(e)||typeof e=="string",tK=0,R0=e=>{var r=++tK;return"".concat(e||"").concat(r)},va=function(r,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Bt(r)&&typeof r!="string")return n;var l;if(Bl(r)){if(s==null)return n;var d=r.indexOf("%");l=s*parseFloat(r.slice(0,d))/100}else l=+r;return Fl(l)&&(l=n),a&&s!=null&&l>s&&(l=s),l},rI=e=>{if(!Array.isArray(e))return!1;for(var r=e.length,s={},n=0;n<r;n++)if(!s[e[n]])s[e[n]]=!0;else return!0;return!1};function gi(e,r,s){return Bt(e)&&Bt(r)?e+s*(r-e):r}function rK(e,r,s){if(!(!e||!e.length))return e.find(n=>n&&(typeof r=="function"?r(n):I0(n,r))===s)}var ja=e=>e===null||typeof e>"u",dm=e=>ja(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function sK(e){return e!=null}function um(){}var nK=["type","size","sizeType"];function xN(){return xN=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},xN.apply(null,arguments)}function x5(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function p5(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?x5(Object(s),!0).forEach(function(n){aK(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):x5(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function aK(e,r,s){return(r=iK(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function iK(e){var r=lK(e,"string");return typeof r=="symbol"?r:r+""}function lK(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function oK(e,r){if(e==null)return{};var s,n,a=cK(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function cK(e,r){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var sI={symbolCircle:hw,symbolCross:wX,symbolDiamond:CX,symbolSquare:AX,symbolStar:OX,symbolTriangle:PX,symbolWye:_X},dK=Math.PI/180,uK=e=>{var r="symbol".concat(dm(e));return sI[r]||hw},hK=(e,r,s)=>{if(r==="area")return e;switch(s){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*dK;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},mK=(e,r)=>{sI["symbol".concat(dm(e))]=r},xw=e=>{var{type:r="circle",size:s=64,sizeType:n="area"}=e,a=oK(e,nK),l=p5(p5({},a),{},{type:r,size:s,sizeType:n}),d="circle";typeof r=="string"&&(d=r);var h=()=>{var S=uK(d),T=IX().type(S).size(hK(s,n,d)),A=T();if(A!==null)return A},{className:f,cx:x,cy:p}=l,b=Xa(l);return Bt(x)&&Bt(p)&&Bt(s)?v.createElement("path",xN({},b,{className:Rs("recharts-symbols",f),transform:"translate(".concat(x,", ").concat(p,")"),d:h()})):null};xw.registerSymbol=mK;var nI=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,fK=(e,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(v.isValidElement(e)&&(s=e.props),typeof s!="object"&&typeof s!="function")return null;var n={};return Object.keys(s).forEach(a=>{ow(a)&&(n[a]=(l=>s[a](s,l)))}),n},gK=(e,r,s)=>n=>(e(r,s,n),null),aI=(e,r,s)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var l=e[a];ow(a)&&typeof l=="function"&&(n||(n={}),n[a]=gK(l,r,s))}),n};function y5(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function xK(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?y5(Object(s),!0).forEach(function(n){pK(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y5(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function pK(e,r,s){return(r=yK(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function yK(e){var r=bK(e,"string");return typeof r=="symbol"?r:r+""}function bK(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Qa(e,r){var s=xK({},e),n=r,a=Object.keys(r),l=a.reduce((d,h)=>(d[h]===void 0&&n[h]!==void 0&&(d[h]=n[h]),d),s);return l}function Sx(){return Sx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Sx.apply(null,arguments)}function b5(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function vK(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?b5(Object(s),!0).forEach(function(n){NK(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b5(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function NK(e,r,s){return(r=jK(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function jK(e){var r=wK(e,"string");return typeof r=="symbol"?r:r+""}function wK(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var za=32,SK={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function CK(e){var{data:r,iconType:s,inactiveColor:n}=e,a=za/2,l=za/6,d=za/3,h=r.inactive?n:r.color,f=s??r.type;if(f==="none")return null;if(f==="plainline"){var x;return v.createElement("line",{strokeWidth:4,fill:"none",stroke:h,strokeDasharray:(x=r.payload)===null||x===void 0?void 0:x.strokeDasharray,x1:0,y1:a,x2:za,y2:a,className:"recharts-legend-icon"})}if(f==="line")return v.createElement("path",{strokeWidth:4,fill:"none",stroke:h,d:"M0,".concat(a,"h").concat(d,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*d,",").concat(a,`
            H`).concat(za,"M").concat(2*d,",").concat(a,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(d,",").concat(a),className:"recharts-legend-icon"});if(f==="rect")return v.createElement("path",{stroke:"none",fill:h,d:"M0,".concat(za/8,"h").concat(za,"v").concat(za*3/4,"h").concat(-za,"z"),className:"recharts-legend-icon"});if(v.isValidElement(r.legendIcon)){var p=vK({},r);return delete p.legendIcon,v.cloneElement(r.legendIcon,p)}return v.createElement(xw,{fill:h,cx:a,cy:a,size:za,sizeType:"diameter",type:f})}function AK(e){var{payload:r,iconSize:s,layout:n,formatter:a,inactiveColor:l,iconType:d}=e,h={x:0,y:0,width:za,height:za},f={display:n==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map((p,b)=>{var S=p.formatter||a,T=Rs({"recharts-legend-item":!0,["legend-item-".concat(b)]:!0,inactive:p.inactive});if(p.type==="none")return null;var A=p.inactive?l:p.color,P=S?S(p.value,p,b):p.value;return v.createElement("li",Sx({className:T,style:f,key:"legend-item-".concat(b)},aI(e,p,b)),v.createElement(cw,{width:s,height:s,viewBox:h,style:x,"aria-label":"".concat(P," legend icon")},v.createElement(CK,{data:p,iconType:d,inactiveColor:l})),v.createElement("span",{className:"recharts-legend-item-text",style:{color:A}},P))})}var EK=e=>{var r=Qa(e,SK),{payload:s,layout:n,align:a}=r;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return v.createElement("ul",{className:"recharts-default-legend",style:l},v.createElement(AK,Sx({},r,{payload:s})))},Gb={},Yb={},v5;function TK(){return v5||(v5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s,n){const a=new Map;for(let l=0;l<s.length;l++){const d=s[l],h=n(d);a.has(h)||a.set(h,d)}return Array.from(a.values())}e.uniqBy=r})(Yb)),Yb}var Wb={},N5;function iI(){return N5||(N5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){return s}e.identity=r})(Wb)),Wb}var Xb={},Kb={},Zb={},j5;function DK(){return j5||(j5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){return Number.isSafeInteger(s)&&s>=0}e.isLength=r})(Zb)),Zb}var w5;function pw(){return w5||(w5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=DK();function s(n){return n!=null&&typeof n!="function"&&r.isLength(n.length)}e.isArrayLike=s})(Kb)),Kb}var Qb={},S5;function OK(){return S5||(S5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){return typeof s=="object"&&s!==null}e.isObjectLike=r})(Qb)),Qb}var C5;function PK(){return C5||(C5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=pw(),s=OK();function n(a){return s.isObjectLike(a)&&r.isArrayLike(a)}e.isArrayLikeObject=n})(Xb)),Xb}var Jb={},ev={},A5;function kK(){return A5||(A5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=gw();function s(n){return function(a){return r.get(a,n)}}e.property=s})(ev)),ev}var tv={},rv={},sv={},nv={},E5;function lI(){return E5||(E5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){return s!==null&&(typeof s=="object"||typeof s=="function")}e.isObject=r})(nv)),nv}var av={},T5;function oI(){return T5||(T5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){return s==null||typeof s!="object"&&typeof s!="function"}e.isPrimitive=r})(av)),av}var iv={},D5;function cI(){return D5||(D5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s,n){return s===n||Number.isNaN(s)&&Number.isNaN(n)}e.eq=r})(iv)),iv}var O5;function _K(){return O5||(O5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=lI(),s=oI(),n=cI();function a(p,b,S){return typeof S!="function"?a(p,b,()=>{}):l(p,b,function T(A,P,D,I,L,_){const $=S(A,P,D,I,L,_);return $!==void 0?!!$:l(A,P,T,_)},new Map)}function l(p,b,S,T){if(b===p)return!0;switch(typeof b){case"object":return d(p,b,S,T);case"function":return Object.keys(b).length>0?l(p,{...b},S,T):n.eq(p,b);default:return r.isObject(p)?typeof b=="string"?b==="":!0:n.eq(p,b)}}function d(p,b,S,T){if(b==null)return!0;if(Array.isArray(b))return f(p,b,S,T);if(b instanceof Map)return h(p,b,S,T);if(b instanceof Set)return x(p,b,S,T);const A=Object.keys(b);if(p==null)return A.length===0;if(A.length===0)return!0;if(T?.has(b))return T.get(b)===p;T?.set(b,p);try{for(let P=0;P<A.length;P++){const D=A[P];if(!s.isPrimitive(p)&&!(D in p)||b[D]===void 0&&p[D]!==void 0||b[D]===null&&p[D]!==null||!S(p[D],b[D],D,p,b,T))return!1}return!0}finally{T?.delete(b)}}function h(p,b,S,T){if(b.size===0)return!0;if(!(p instanceof Map))return!1;for(const[A,P]of b.entries()){const D=p.get(A);if(S(D,P,A,p,b,T)===!1)return!1}return!0}function f(p,b,S,T){if(b.length===0)return!0;if(!Array.isArray(p))return!1;const A=new Set;for(let P=0;P<b.length;P++){const D=b[P];let I=!1;for(let L=0;L<p.length;L++){if(A.has(L))continue;const _=p[L];let $=!1;if(S(_,D,P,p,b,T)&&($=!0),$){A.add(L),I=!0;break}}if(!I)return!1}return!0}function x(p,b,S,T){return b.size===0?!0:p instanceof Set?f([...p],[...b],S,T):!1}e.isMatchWith=a,e.isSetMatch=x})(sv)),sv}var P5;function dI(){return P5||(P5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=_K();function s(n,a){return r.isMatchWith(n,a,()=>{})}e.isMatch=s})(rv)),rv}var lv={},ov={},cv={},k5;function IK(){return k5||(k5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){return Object.getOwnPropertySymbols(s).filter(n=>Object.prototype.propertyIsEnumerable.call(s,n))}e.getSymbols=r})(cv)),cv}var dv={},_5;function uI(){return _5||(_5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}e.getTag=r})(dv)),dv}var uv={},I5;function hI(){return I5||(I5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r="[object RegExp]",s="[object String]",n="[object Number]",a="[object Boolean]",l="[object Arguments]",d="[object Symbol]",h="[object Date]",f="[object Map]",x="[object Set]",p="[object Array]",b="[object Function]",S="[object ArrayBuffer]",T="[object Object]",A="[object Error]",P="[object DataView]",D="[object Uint8Array]",I="[object Uint8ClampedArray]",L="[object Uint16Array]",_="[object Uint32Array]",$="[object BigUint64Array]",F="[object Int8Array]",B="[object Int16Array]",M="[object Int32Array]",V="[object BigInt64Array]",z="[object Float32Array]",H="[object Float64Array]";e.argumentsTag=l,e.arrayBufferTag=S,e.arrayTag=p,e.bigInt64ArrayTag=V,e.bigUint64ArrayTag=$,e.booleanTag=a,e.dataViewTag=P,e.dateTag=h,e.errorTag=A,e.float32ArrayTag=z,e.float64ArrayTag=H,e.functionTag=b,e.int16ArrayTag=B,e.int32ArrayTag=M,e.int8ArrayTag=F,e.mapTag=f,e.numberTag=n,e.objectTag=T,e.regexpTag=r,e.setTag=x,e.stringTag=s,e.symbolTag=d,e.uint16ArrayTag=L,e.uint32ArrayTag=_,e.uint8ArrayTag=D,e.uint8ClampedArrayTag=I})(uv)),uv}var hv={},R5;function RK(){return R5||(R5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}e.isTypedArray=r})(hv)),hv}var M5;function mI(){return M5||(M5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=IK(),s=uI(),n=hI(),a=oI(),l=RK();function d(p,b){return h(p,void 0,p,new Map,b)}function h(p,b,S,T=new Map,A=void 0){const P=A?.(p,b,S,T);if(P!==void 0)return P;if(a.isPrimitive(p))return p;if(T.has(p))return T.get(p);if(Array.isArray(p)){const D=new Array(p.length);T.set(p,D);for(let I=0;I<p.length;I++)D[I]=h(p[I],I,S,T,A);return Object.hasOwn(p,"index")&&(D.index=p.index),Object.hasOwn(p,"input")&&(D.input=p.input),D}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const D=new RegExp(p.source,p.flags);return D.lastIndex=p.lastIndex,D}if(p instanceof Map){const D=new Map;T.set(p,D);for(const[I,L]of p)D.set(I,h(L,I,S,T,A));return D}if(p instanceof Set){const D=new Set;T.set(p,D);for(const I of p)D.add(h(I,void 0,S,T,A));return D}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(l.isTypedArray(p)){const D=new(Object.getPrototypeOf(p)).constructor(p.length);T.set(p,D);for(let I=0;I<p.length;I++)D[I]=h(p[I],I,S,T,A);return D}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const D=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return T.set(p,D),f(D,p,S,T,A),D}if(typeof File<"u"&&p instanceof File){const D=new File([p],p.name,{type:p.type});return T.set(p,D),f(D,p,S,T,A),D}if(typeof Blob<"u"&&p instanceof Blob){const D=new Blob([p],{type:p.type});return T.set(p,D),f(D,p,S,T,A),D}if(p instanceof Error){const D=new p.constructor;return T.set(p,D),D.message=p.message,D.name=p.name,D.stack=p.stack,D.cause=p.cause,f(D,p,S,T,A),D}if(p instanceof Boolean){const D=new Boolean(p.valueOf());return T.set(p,D),f(D,p,S,T,A),D}if(p instanceof Number){const D=new Number(p.valueOf());return T.set(p,D),f(D,p,S,T,A),D}if(p instanceof String){const D=new String(p.valueOf());return T.set(p,D),f(D,p,S,T,A),D}if(typeof p=="object"&&x(p)){const D=Object.create(Object.getPrototypeOf(p));return T.set(p,D),f(D,p,S,T,A),D}return p}function f(p,b,S=p,T,A){const P=[...Object.keys(b),...r.getSymbols(b)];for(let D=0;D<P.length;D++){const I=P[D],L=Object.getOwnPropertyDescriptor(p,I);(L==null||L.writable)&&(p[I]=h(b[I],I,S,T,A))}}function x(p){switch(s.getTag(p)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=d,e.cloneDeepWithImpl=h,e.copyProperties=f})(ov)),ov}var L5;function MK(){return L5||(L5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=mI();function s(n){return r.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=s})(lv)),lv}var F5;function LK(){return F5||(F5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=dI(),s=MK();function n(a){return a=s.cloneDeep(a),l=>r.isMatch(l,a)}e.matches=n})(tv)),tv}var mv={},fv={},gv={},B5;function FK(){return B5||(B5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=mI(),s=hI();function n(a,l){return r.cloneDeepWith(a,(d,h,f,x)=>{const p=l?.(d,h,f,x);if(p!==void 0)return p;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case s.numberTag:case s.stringTag:case s.booleanTag:{const b=new a.constructor(a?.valueOf());return r.copyProperties(b,a),b}case s.argumentsTag:{const b={};return r.copyProperties(b,a),b.length=a.length,b[Symbol.iterator]=a[Symbol.iterator],b}default:return}})}e.cloneDeepWith=n})(gv)),gv}var U5;function BK(){return U5||(U5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=FK();function s(n){return r.cloneDeepWith(n)}e.cloneDeep=s})(fv)),fv}var xv={},pv={},z5;function fI(){return z5||(z5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=/^(?:0|[1-9]\d*)$/;function s(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return r.test(n)}}e.isIndex=s})(pv)),pv}var yv={},V5;function UK(){return V5||(V5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=uI();function s(n){return n!==null&&typeof n=="object"&&r.getTag(n)==="[object Arguments]"}e.isArguments=s})(yv)),yv}var $5;function zK(){return $5||($5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=tI(),s=fI(),n=UK(),a=fw();function l(d,h){let f;if(Array.isArray(h)?f=h:typeof h=="string"&&r.isDeepKey(h)&&d?.[h]==null?f=a.toPath(h):f=[h],f.length===0)return!1;let x=d;for(let p=0;p<f.length;p++){const b=f[p];if((x==null||!Object.hasOwn(x,b))&&!((Array.isArray(x)||n.isArguments(x))&&s.isIndex(b)&&b<x.length))return!1;x=x[b]}return!0}e.has=l})(xv)),xv}var q5;function VK(){return q5||(q5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=dI(),s=mw(),n=BK(),a=gw(),l=zK();function d(h,f){switch(typeof h){case"object":{Object.is(h?.valueOf(),-0)&&(h="-0");break}case"number":{h=s.toKey(h);break}}return f=n.cloneDeep(f),function(x){const p=a.get(x,h);return p===void 0?l.has(x,h):f===void 0?p===void 0:r.isMatch(p,f)}}e.matchesProperty=d})(mv)),mv}var H5;function $K(){return H5||(H5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=iI(),s=kK(),n=LK(),a=VK();function l(d){if(d==null)return r.identity;switch(typeof d){case"function":return d;case"object":return Array.isArray(d)&&d.length===2?a.matchesProperty(d[0],d[1]):n.matches(d);case"string":case"symbol":case"number":return s.property(d)}}e.iteratee=l})(Jb)),Jb}var G5;function qK(){return G5||(G5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=TK(),s=iI(),n=PK(),a=$K();function l(d,h=s.identity){return n.isArrayLikeObject(d)?r.uniqBy(Array.from(d),a.iteratee(h)):[]}e.uniqBy=l})(Gb)),Gb}var bv,Y5;function HK(){return Y5||(Y5=1,bv=qK().uniqBy),bv}var GK=HK();const W5=Qi(GK);function gI(e,r,s){return r===!0?W5(e,s):typeof r=="function"?W5(e,r):e}var vv={exports:{}},Nv={},jv={exports:{}},wv={};var X5;function YK(){if(X5)return wv;X5=1;var e=Iu();function r(b,S){return b===S&&(b!==0||1/b===1/S)||b!==b&&S!==S}var s=typeof Object.is=="function"?Object.is:r,n=e.useState,a=e.useEffect,l=e.useLayoutEffect,d=e.useDebugValue;function h(b,S){var T=S(),A=n({inst:{value:T,getSnapshot:S}}),P=A[0].inst,D=A[1];return l(function(){P.value=T,P.getSnapshot=S,f(P)&&D({inst:P})},[b,T,S]),a(function(){return f(P)&&D({inst:P}),b(function(){f(P)&&D({inst:P})})},[b]),d(T),T}function f(b){var S=b.getSnapshot;b=b.value;try{var T=S();return!s(b,T)}catch{return!0}}function x(b,S){return S()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x:h;return wv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,wv}var K5;function WK(){return K5||(K5=1,jv.exports=YK()),jv.exports}var Z5;function XK(){if(Z5)return Nv;Z5=1;var e=Iu(),r=WK();function s(x,p){return x===p&&(x!==0||1/x===1/p)||x!==x&&p!==p}var n=typeof Object.is=="function"?Object.is:s,a=r.useSyncExternalStore,l=e.useRef,d=e.useEffect,h=e.useMemo,f=e.useDebugValue;return Nv.useSyncExternalStoreWithSelector=function(x,p,b,S,T){var A=l(null);if(A.current===null){var P={hasValue:!1,value:null};A.current=P}else P=A.current;A=h(function(){function I(B){if(!L){if(L=!0,_=B,B=S(B),T!==void 0&&P.hasValue){var M=P.value;if(T(M,B))return $=M}return $=B}if(M=$,n(_,B))return M;var V=S(B);return T!==void 0&&T(M,V)?(_=B,M):(_=B,$=V)}var L=!1,_,$,F=b===void 0?null:b;return[function(){return I(p())},F===null?void 0:function(){return I(F())}]},[p,b,S,T]);var D=a(x,A[0],A[1]);return d(function(){P.hasValue=!0,P.value=D},[D]),f(D),D},Nv}var Q5;function KK(){return Q5||(Q5=1,vv.exports=XK()),vv.exports}var ZK=KK(),yw=v.createContext(null),QK=e=>e,Ms=()=>{var e=v.useContext(yw);return e?e.store.dispatch:QK},Kg=()=>{},JK=()=>Kg,eZ=(e,r)=>e===r;function zt(e){var r=v.useContext(yw);return ZK.useSyncExternalStoreWithSelector(r?r.subscription.addNestedSub:JK,r?r.store.getState:Kg,r?r.store.getState:Kg,r?e:Kg,eZ)}function tZ(e,r=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(r)}function rZ(e,r=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(r)}function sZ(e,r="expected all items to be functions, instead received the following types: "){if(!e.every(s=>typeof s=="function")){const s=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${r}[${s}]`)}}var J5=e=>Array.isArray(e)?e:[e];function nZ(e){const r=Array.isArray(e[0])?e[0]:e;return sZ(r,"createSelector expects all input-selectors to be functions, but received the following types: "),r}function aZ(e,r){const s=[],{length:n}=e;for(let a=0;a<n;a++)s.push(e[a].apply(null,r));return s}var iZ=class{constructor(e){this.value=e}deref(){return this.value}},lZ=typeof WeakRef<"u"?WeakRef:iZ,oZ=0,e6=1;function ng(){return{s:oZ,v:void 0,o:null,p:null}}function xI(e,r={}){let s=ng();const{resultEqualityCheck:n}=r;let a,l=0;function d(){let h=s;const{length:f}=arguments;for(let b=0,S=f;b<S;b++){const T=arguments[b];if(typeof T=="function"||typeof T=="object"&&T!==null){let A=h.o;A===null&&(h.o=A=new WeakMap);const P=A.get(T);P===void 0?(h=ng(),A.set(T,h)):h=P}else{let A=h.p;A===null&&(h.p=A=new Map);const P=A.get(T);P===void 0?(h=ng(),A.set(T,h)):h=P}}const x=h;let p;if(h.s===e6)p=h.v;else if(p=e.apply(null,arguments),l++,n){const b=a?.deref?.()??a;b!=null&&n(b,p)&&(p=b,l!==0&&l--),a=typeof p=="object"&&p!==null||typeof p=="function"?new lZ(p):p}return x.s=e6,x.v=p,p}return d.clearCache=()=>{s=ng(),d.resetResultsCount()},d.resultsCount=()=>l,d.resetResultsCount=()=>{l=0},d}function cZ(e,...r){const s=typeof e=="function"?{memoize:e,memoizeOptions:r}:e,n=(...a)=>{let l=0,d=0,h,f={},x=a.pop();typeof x=="object"&&(f=x,x=a.pop()),tZ(x,`createSelector expects an output function after the inputs, but received: [${typeof x}]`);const p={...s,...f},{memoize:b,memoizeOptions:S=[],argsMemoize:T=xI,argsMemoizeOptions:A=[]}=p,P=J5(S),D=J5(A),I=nZ(a),L=b(function(){return l++,x.apply(null,arguments)},...P),_=T(function(){d++;const F=aZ(I,arguments);return h=L.apply(null,F),h},...D);return Object.assign(_,{resultFunc:x,memoizedResultFunc:L,dependencies:I,dependencyRecomputations:()=>d,resetDependencyRecomputations:()=>{d=0},lastResult:()=>h,recomputations:()=>l,resetRecomputations:()=>{l=0},memoize:b,argsMemoize:T})};return Object.assign(n,{withTypes:()=>n}),n}var Me=cZ(xI),dZ=Object.assign((e,r=Me)=>{rZ(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const s=Object.keys(e),n=s.map(l=>e[l]);return r(n,(...l)=>l.reduce((d,h,f)=>(d[s[f]]=h,d),{}))},{withTypes:()=>dZ}),Sv={},Cv={},Av={},t6;function uZ(){return t6||(t6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const s=(n,a,l)=>{if(n!==a){const d=r(n),h=r(a);if(d===h&&d===0){if(n<a)return l==="desc"?1:-1;if(n>a)return l==="desc"?-1:1}return l==="desc"?h-d:d-h}return 0};e.compareValues=s})(Av)),Av}var Ev={},Tv={},r6;function pI(){return r6||(r6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){return typeof s=="symbol"||s instanceof Symbol}e.isSymbol=r})(Tv)),Tv}var s6;function hZ(){return s6||(s6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=pI(),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(l,d){return Array.isArray(l)?!1:typeof l=="number"||typeof l=="boolean"||l==null||r.isSymbol(l)?!0:typeof l=="string"&&(n.test(l)||!s.test(l))||d!=null&&Object.hasOwn(d,l)}e.isKey=a})(Ev)),Ev}var n6;function mZ(){return n6||(n6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=uZ(),s=hZ(),n=fw();function a(l,d,h,f){if(l==null)return[];h=f?void 0:h,Array.isArray(l)||(l=Object.values(l)),Array.isArray(d)||(d=d==null?[null]:[d]),d.length===0&&(d=[null]),Array.isArray(h)||(h=h==null?[]:[h]),h=h.map(T=>String(T));const x=(T,A)=>{let P=T;for(let D=0;D<A.length&&P!=null;++D)P=P[A[D]];return P},p=(T,A)=>A==null||T==null?A:typeof T=="object"&&"key"in T?Object.hasOwn(A,T.key)?A[T.key]:x(A,T.path):typeof T=="function"?T(A):Array.isArray(T)?x(A,T):typeof A=="object"?A[T]:A,b=d.map(T=>(Array.isArray(T)&&T.length===1&&(T=T[0]),T==null||typeof T=="function"||Array.isArray(T)||s.isKey(T)?T:{key:T,path:n.toPath(T)}));return l.map(T=>({original:T,criteria:b.map(A=>p(A,T))})).slice().sort((T,A)=>{for(let P=0;P<b.length;P++){const D=r.compareValues(T.criteria[P],A.criteria[P],h[P]);if(D!==0)return D}return 0}).map(T=>T.original)}e.orderBy=a})(Cv)),Cv}var Dv={},a6;function fZ(){return a6||(a6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s,n=1){const a=[],l=Math.floor(n),d=(h,f)=>{for(let x=0;x<h.length;x++){const p=h[x];Array.isArray(p)&&f<l?d(p,f+1):a.push(p)}};return d(s,0),a}e.flatten=r})(Dv)),Dv}var Ov={},i6;function yI(){return i6||(i6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=fI(),s=pw(),n=lI(),a=cI();function l(d,h,f){return n.isObject(f)&&(typeof h=="number"&&s.isArrayLike(f)&&r.isIndex(h)&&h<f.length||typeof h=="string"&&h in f)?a.eq(f[h],d):!1}e.isIterateeCall=l})(Ov)),Ov}var l6;function gZ(){return l6||(l6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=mZ(),s=fZ(),n=yI();function a(l,...d){const h=d.length;return h>1&&n.isIterateeCall(l,d[0],d[1])?d=[]:h>2&&n.isIterateeCall(d[0],d[1],d[2])&&(d=[d[0]]),r.orderBy(l,s.flatten(d),["asc"])}e.sortBy=a})(Sv)),Sv}var Pv,o6;function xZ(){return o6||(o6=1,Pv=gZ().sortBy),Pv}var pZ=xZ();const kp=Qi(pZ);var bI=e=>e.legend.settings,yZ=e=>e.legend.size,bZ=e=>e.legend.payload,vZ=Me([bZ,bI],(e,r)=>{var{itemSorter:s}=r,n=e.flat(1);return s?kp(n,s):n});function NZ(){return zt(vZ)}var ag=1;function vI(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[r,s]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(a=>{if(a!=null){var l=a.getBoundingClientRect(),d={height:l.height,left:l.left,top:l.top,width:l.width};(Math.abs(d.height-r.height)>ag||Math.abs(d.left-r.left)>ag||Math.abs(d.top-r.top)>ag||Math.abs(d.width-r.width)>ag)&&s({height:d.height,left:d.left,top:d.top,width:d.width})}},[r.width,r.height,r.top,r.left,...e]);return[r,n]}function yn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var jZ=typeof Symbol=="function"&&Symbol.observable||"@@observable",c6=jZ,kv=()=>Math.random().toString(36).substring(7).split("").join("."),wZ={INIT:`@@redux/INIT${kv()}`,REPLACE:`@@redux/REPLACE${kv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${kv()}`},Cx=wZ;function bw(e){if(typeof e!="object"||e===null)return!1;let r=e;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r||Object.getPrototypeOf(e)===null}function NI(e,r,s){if(typeof e!="function")throw new Error(yn(2));if(typeof r=="function"&&typeof s=="function"||typeof s=="function"&&typeof arguments[3]=="function")throw new Error(yn(0));if(typeof r=="function"&&typeof s>"u"&&(s=r,r=void 0),typeof s<"u"){if(typeof s!="function")throw new Error(yn(1));return s(NI)(e,r)}let n=e,a=r,l=new Map,d=l,h=0,f=!1;function x(){d===l&&(d=new Map,l.forEach((D,I)=>{d.set(I,D)}))}function p(){if(f)throw new Error(yn(3));return a}function b(D){if(typeof D!="function")throw new Error(yn(4));if(f)throw new Error(yn(5));let I=!0;x();const L=h++;return d.set(L,D),function(){if(I){if(f)throw new Error(yn(6));I=!1,x(),d.delete(L),l=null}}}function S(D){if(!bw(D))throw new Error(yn(7));if(typeof D.type>"u")throw new Error(yn(8));if(typeof D.type!="string")throw new Error(yn(17));if(f)throw new Error(yn(9));try{f=!0,a=n(a,D)}finally{f=!1}return(l=d).forEach(L=>{L()}),D}function T(D){if(typeof D!="function")throw new Error(yn(10));n=D,S({type:Cx.REPLACE})}function A(){const D=b;return{subscribe(I){if(typeof I!="object"||I===null)throw new Error(yn(11));function L(){const $=I;$.next&&$.next(p())}return L(),{unsubscribe:D(L)}},[c6](){return this}}}return S({type:Cx.INIT}),{dispatch:S,subscribe:b,getState:p,replaceReducer:T,[c6]:A}}function SZ(e){Object.keys(e).forEach(r=>{const s=e[r];if(typeof s(void 0,{type:Cx.INIT})>"u")throw new Error(yn(12));if(typeof s(void 0,{type:Cx.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(yn(13))})}function jI(e){const r=Object.keys(e),s={};for(let l=0;l<r.length;l++){const d=r[l];typeof e[d]=="function"&&(s[d]=e[d])}const n=Object.keys(s);let a;try{SZ(s)}catch(l){a=l}return function(d={},h){if(a)throw a;let f=!1;const x={};for(let p=0;p<n.length;p++){const b=n[p],S=s[b],T=d[b],A=S(T,h);if(typeof A>"u")throw h&&h.type,new Error(yn(14));x[b]=A,f=f||A!==T}return f=f||n.length!==Object.keys(d).length,f?x:d}}function Ax(...e){return e.length===0?r=>r:e.length===1?e[0]:e.reduce((r,s)=>(...n)=>r(s(...n)))}function CZ(...e){return r=>(s,n)=>{const a=r(s,n);let l=()=>{throw new Error(yn(15))};const d={getState:a.getState,dispatch:(f,...x)=>l(f,...x)},h=e.map(f=>f(d));return l=Ax(...h)(a.dispatch),{...a,dispatch:l}}}function wI(e){return bw(e)&&"type"in e&&typeof e.type=="string"}var SI=Symbol.for("immer-nothing"),d6=Symbol.for("immer-draftable"),Bn=Symbol.for("immer-state");function xi(e,...r){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ya=Object,Au=ya.getPrototypeOf,Ex="constructor",_p="prototype",pN="configurable",Tx="enumerable",Zg="writable",M0="value",zl=e=>!!e&&!!e[Bn];function ji(e){return e?CI(e)||Ip(e)||!!e[d6]||!!e[Ex]?.[d6]||Rp(e)||Mp(e):!1}var AZ=ya[_p][Ex].toString(),u6=new WeakMap;function CI(e){if(!e||!vw(e))return!1;const r=Au(e);if(r===null||r===ya[_p])return!0;const s=ya.hasOwnProperty.call(r,Ex)&&r[Ex];if(s===Object)return!0;if(!su(s))return!1;let n=u6.get(s);return n===void 0&&(n=Function.toString.call(s),u6.set(s,n)),n===AZ}function hm(e,r,s=!0){mm(e)===0?(s?Reflect.ownKeys(e):ya.keys(e)).forEach(a=>{r(a,e[a],e)}):e.forEach((n,a)=>r(a,n,e))}function mm(e){const r=e[Bn];return r?r.type_:Ip(e)?1:Rp(e)?2:Mp(e)?3:0}var h6=(e,r,s=mm(e))=>s===2?e.has(r):ya[_p].hasOwnProperty.call(e,r),yN=(e,r,s=mm(e))=>s===2?e.get(r):e[r],Dx=(e,r,s,n=mm(e))=>{n===2?e.set(r,s):n===3?e.add(s):e[r]=s};function EZ(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}var Ip=Array.isArray,Rp=e=>e instanceof Map,Mp=e=>e instanceof Set,vw=e=>typeof e=="object",su=e=>typeof e=="function",_v=e=>typeof e=="boolean",Al=e=>e.copy_||e.base_,Nw=e=>e.modified_?e.copy_:e.base_;function bN(e,r){if(Rp(e))return new Map(e);if(Mp(e))return new Set(e);if(Ip(e))return Array[_p].slice.call(e);const s=CI(e);if(r===!0||r==="class_only"&&!s){const n=ya.getOwnPropertyDescriptors(e);delete n[Bn];let a=Reflect.ownKeys(n);for(let l=0;l<a.length;l++){const d=a[l],h=n[d];h[Zg]===!1&&(h[Zg]=!0,h[pN]=!0),(h.get||h.set)&&(n[d]={[pN]:!0,[Zg]:!0,[Tx]:h[Tx],[M0]:e[d]})}return ya.create(Au(e),n)}else{const n=Au(e);if(n!==null&&s)return{...e};const a=ya.create(n);return ya.assign(a,e)}}function jw(e,r=!1){return Lp(e)||zl(e)||!ji(e)||(mm(e)>1&&ya.defineProperties(e,{set:ig,add:ig,clear:ig,delete:ig}),ya.freeze(e),r&&hm(e,(s,n)=>{jw(n,!0)},!1)),e}function TZ(){xi(2)}var ig={[M0]:TZ};function Lp(e){return e===null||!vw(e)?!0:ya.isFrozen(e)}var Ox="MapSet",vN="Patches",AI={};function Eu(e){const r=AI[e];return r||xi(0,e),r}var DZ=e=>!!AI[e],L0,EI=()=>L0,OZ=(e,r)=>({drafts_:[],parent_:e,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:DZ(Ox)?Eu(Ox):void 0});function m6(e,r){r&&(e.patchPlugin_=Eu(vN),e.patches_=[],e.inversePatches_=[],e.patchListener_=r)}function NN(e){jN(e),e.drafts_.forEach(PZ),e.drafts_=null}function jN(e){e===L0&&(L0=e.parent_)}var f6=e=>L0=OZ(L0,e);function PZ(e){const r=e[Bn];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function g6(e,r){r.unfinalizedDrafts_=r.drafts_.length;const s=r.drafts_[0];if(e!==void 0&&e!==s){s[Bn].modified_&&(NN(r),xi(4)),ji(e)&&(e=x6(r,e));const{patchPlugin_:a}=r;a&&a.generateReplacementPatches_(s[Bn].base_,e,r)}else e=x6(r,s);return kZ(r,e,!0),NN(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),e!==SI?e:void 0}function x6(e,r){if(Lp(r))return r;const s=r[Bn];if(!s)return ww(r,e.handledSet_,e);if(!Fp(s,e))return r;if(!s.modified_)return s.base_;if(!s.finalized_){const{callbacks_:n}=s;if(n)for(;n.length>0;)n.pop()(e);OI(s,e)}return s.copy_}function kZ(e,r,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&jw(r,s)}function TI(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Fp=(e,r)=>e.scope_===r,_Z=[];function DI(e,r,s,n){const a=Al(e),l=e.type_;if(n!==void 0&&yN(a,n,l)===r){Dx(a,n,s,l);return}if(!e.draftLocations_){const h=e.draftLocations_=new Map;hm(a,(f,x)=>{if(zl(x)){const p=h.get(x)||[];p.push(f),h.set(x,p)}})}const d=e.draftLocations_.get(r)??_Z;for(const h of d)Dx(a,h,s,l)}function IZ(e,r,s){e.callbacks_.push(function(a){const l=r;if(!l||!Fp(l,a))return;a.mapSetPlugin_?.fixSetContents(l);const d=Nw(l);DI(e,l.draft_??l,d,s),OI(l,a)})}function OI(e,r){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=r;if(n){const a=n.getPath(e);a&&n.generatePatches_(e,a,r)}TI(e)}}function RZ(e,r,s){const{scope_:n}=e;if(zl(s)){const a=s[Bn];Fp(a,n)&&a.callbacks_.push(function(){Qg(e);const d=Nw(a);DI(e,s,d,r)})}else ji(s)&&e.callbacks_.push(function(){const l=Al(e);yN(l,r,e.type_)===s&&n.drafts_.length>1&&(e.assigned_.get(r)??!1)===!0&&e.copy_&&ww(yN(e.copy_,r,e.type_),n.handledSet_,n)})}function ww(e,r,s){return!s.immer_.autoFreeze_&&s.unfinalizedDrafts_<1||zl(e)||r.has(e)||!ji(e)||Lp(e)||(r.add(e),hm(e,(n,a)=>{if(zl(a)){const l=a[Bn];if(Fp(l,s)){const d=Nw(l);Dx(e,n,d,e.type_),TI(l)}}else ji(a)&&ww(a,r,s)})),e}function MZ(e,r){const s=Ip(e),n={type_:s?1:0,scope_:r?r.scope_:EI(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,l=Sw;s&&(a=[n],l=F0);const{revoke:d,proxy:h}=Proxy.revocable(a,l);return n.draft_=h,n.revoke_=d,[h,n]}var Sw={get(e,r){if(r===Bn)return e;const s=Al(e);if(!h6(s,r,e.type_))return LZ(e,s,r);const n=s[r];if(e.finalized_||!ji(n))return n;if(n===Iv(e.base_,r)){Qg(e);const a=e.type_===1?+r:r,l=SN(e.scope_,n,e,a);return e.copy_[a]=l}return n},has(e,r){return r in Al(e)},ownKeys(e){return Reflect.ownKeys(Al(e))},set(e,r,s){const n=PI(Al(e),r);if(n?.set)return n.set.call(e.draft_,s),!0;if(!e.modified_){const a=Iv(Al(e),r),l=a?.[Bn];if(l&&l.base_===s)return e.copy_[r]=s,e.assigned_.set(r,!1),!0;if(EZ(s,a)&&(s!==void 0||h6(e.base_,r,e.type_)))return!0;Qg(e),wN(e)}return e.copy_[r]===s&&(s!==void 0||r in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[r])||(e.copy_[r]=s,e.assigned_.set(r,!0),RZ(e,r,s)),!0},deleteProperty(e,r){return Qg(e),Iv(e.base_,r)!==void 0||r in e.base_?(e.assigned_.set(r,!1),wN(e)):e.assigned_.delete(r),e.copy_&&delete e.copy_[r],!0},getOwnPropertyDescriptor(e,r){const s=Al(e),n=Reflect.getOwnPropertyDescriptor(s,r);return n&&{[Zg]:!0,[pN]:e.type_!==1||r!=="length",[Tx]:n[Tx],[M0]:s[r]}},defineProperty(){xi(11)},getPrototypeOf(e){return Au(e.base_)},setPrototypeOf(){xi(12)}},F0={};hm(Sw,(e,r)=>{F0[e]=function(){const s=arguments;return s[0]=s[0][0],r.apply(this,s)}});F0.deleteProperty=function(e,r){return F0.set.call(this,e,r,void 0)};F0.set=function(e,r,s){return Sw.set.call(this,e[0],r,s,e[0])};function Iv(e,r){const s=e[Bn];return(s?Al(s):e)[r]}function LZ(e,r,s){const n=PI(r,s);return n?M0 in n?n[M0]:n.get?.call(e.draft_):void 0}function PI(e,r){if(!(r in e))return;let s=Au(e);for(;s;){const n=Object.getOwnPropertyDescriptor(s,r);if(n)return n;s=Au(s)}}function wN(e){e.modified_||(e.modified_=!0,e.parent_&&wN(e.parent_))}function Qg(e){e.copy_||(e.assigned_=new Map,e.copy_=bN(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var FZ=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(s,n,a)=>{if(su(s)&&!su(n)){const d=n;n=s;const h=this;return function(x=d,...p){return h.produce(x,b=>n.call(this,b,...p))}}su(n)||xi(6),a!==void 0&&!su(a)&&xi(7);let l;if(ji(s)){const d=f6(this),h=SN(d,s,void 0);let f=!0;try{l=n(h),f=!1}finally{f?NN(d):jN(d)}return m6(d,a),g6(l,d)}else if(!s||!vw(s)){if(l=n(s),l===void 0&&(l=s),l===SI&&(l=void 0),this.autoFreeze_&&jw(l,!0),a){const d=[],h=[];Eu(vN).generateReplacementPatches_(s,l,{patches_:d,inversePatches_:h}),a(d,h)}return l}else xi(1,s)},this.produceWithPatches=(s,n)=>{if(su(s))return(h,...f)=>this.produceWithPatches(h,x=>s(x,...f));let a,l;return[this.produce(s,n,(h,f)=>{a=h,l=f}),a,l]},_v(r?.autoFreeze)&&this.setAutoFreeze(r.autoFreeze),_v(r?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(r.useStrictShallowCopy),_v(r?.useStrictIteration)&&this.setUseStrictIteration(r.useStrictIteration)}createDraft(r){ji(r)||xi(8),zl(r)&&(r=vi(r));const s=f6(this),n=SN(s,r,void 0);return n[Bn].isManual_=!0,jN(s),n}finishDraft(r,s){const n=r&&r[Bn];(!n||!n.isManual_)&&xi(9);const{scope_:a}=n;return m6(a,s),g6(void 0,a)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}setUseStrictIteration(r){this.useStrictIteration_=r}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(r,s){let n;for(n=s.length-1;n>=0;n--){const l=s[n];if(l.path.length===0&&l.op==="replace"){r=l.value;break}}n>-1&&(s=s.slice(n+1));const a=Eu(vN).applyPatches_;return zl(r)?a(r,s):this.produce(r,l=>a(l,s))}};function SN(e,r,s,n){const[a,l]=Rp(r)?Eu(Ox).proxyMap_(r,s):Mp(r)?Eu(Ox).proxySet_(r,s):MZ(r,s);return(s?.scope_??EI()).drafts_.push(a),l.callbacks_=s?.callbacks_??[],l.key_=n,s&&n!==void 0?IZ(s,l,n):l.callbacks_.push(function(f){f.mapSetPlugin_?.fixSetContents(l);const{patchPlugin_:x}=f;l.modified_&&x&&x.generatePatches_(l,[],f)}),a}function vi(e){return zl(e)||xi(10,e),kI(e)}function kI(e){if(!ji(e)||Lp(e))return e;const r=e[Bn];let s,n=!0;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,s=bN(e,r.scope_.immer_.useStrictShallowCopy_),n=r.scope_.immer_.shouldUseStrictIteration()}else s=bN(e,!0);return hm(s,(a,l)=>{Dx(s,a,kI(l))},n),r&&(r.finalized_=!1),s}var BZ=new FZ,_I=BZ.produce;function II(e){return({dispatch:s,getState:n})=>a=>l=>typeof l=="function"?l(s,n,e):a(l)}var UZ=II(),zZ=II,VZ=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ax:Ax.apply(null,arguments)};function Ka(e,r){function s(...n){if(r){let a=r(...n);if(!a)throw new Error(Na(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return s.toString=()=>`${e}`,s.type=e,s.match=n=>wI(n)&&n.type===e,s}var RI=class m0 extends Array{constructor(...r){super(...r),Object.setPrototypeOf(this,m0.prototype)}static get[Symbol.species](){return m0}concat(...r){return super.concat.apply(this,r)}prepend(...r){return r.length===1&&Array.isArray(r[0])?new m0(...r[0].concat(this)):new m0(...r.concat(this))}};function p6(e){return ji(e)?_I(e,()=>{}):e}function lg(e,r,s){return e.has(r)?e.get(r):e.set(r,s(r)).get(r)}function $Z(e){return typeof e=="boolean"}var qZ=()=>function(r){const{thunk:s=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:l=!0}=r??{};let d=new RI;return s&&($Z(s)?d.push(UZ):d.push(zZ(s.extraArgument))),d},MI="RTK_autoBatch",os=()=>e=>({payload:e,meta:{[MI]:!0}}),y6=e=>r=>{setTimeout(r,e)},LI=(e={type:"raf"})=>r=>(...s)=>{const n=r(...s);let a=!0,l=!1,d=!1;const h=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:y6(10):e.type==="callback"?e.queueNotification:y6(e.timeout),x=()=>{d=!1,l&&(l=!1,h.forEach(p=>p()))};return Object.assign({},n,{subscribe(p){const b=()=>a&&p(),S=n.subscribe(b);return h.add(p),()=>{S(),h.delete(p)}},dispatch(p){try{return a=!p?.meta?.[MI],l=!a,l&&(d||(d=!0,f(x))),n.dispatch(p)}finally{a=!0}}})},HZ=e=>function(s){const{autoBatch:n=!0}=s??{};let a=new RI(e);return n&&a.push(LI(typeof n=="object"?n:void 0)),a};function GZ(e){const r=qZ(),{reducer:s=void 0,middleware:n,devTools:a=!0,preloadedState:l=void 0,enhancers:d=void 0}=e||{};let h;if(typeof s=="function")h=s;else if(bw(s))h=jI(s);else throw new Error(Na(1));let f;typeof n=="function"?f=n(r):f=r();let x=Ax;a&&(x=VZ({trace:!1,...typeof a=="object"&&a}));const p=CZ(...f),b=HZ(p);let S=typeof d=="function"?d(b):b();const T=x(...S);return NI(h,l,T)}function FI(e){const r={},s=[];let n;const a={addCase(l,d){const h=typeof l=="string"?l:l.type;if(!h)throw new Error(Na(28));if(h in r)throw new Error(Na(29));return r[h]=d,a},addAsyncThunk(l,d){return d.pending&&(r[l.pending.type]=d.pending),d.rejected&&(r[l.rejected.type]=d.rejected),d.fulfilled&&(r[l.fulfilled.type]=d.fulfilled),d.settled&&s.push({matcher:l.settled,reducer:d.settled}),a},addMatcher(l,d){return s.push({matcher:l,reducer:d}),a},addDefaultCase(l){return n=l,a}};return e(a),[r,s,n]}function YZ(e){return typeof e=="function"}function WZ(e,r){let[s,n,a]=FI(r),l;if(YZ(e))l=()=>p6(e());else{const h=p6(e);l=()=>h}function d(h=l(),f){let x=[s[f.type],...n.filter(({matcher:p})=>p(f)).map(({reducer:p})=>p)];return x.filter(p=>!!p).length===0&&(x=[a]),x.reduce((p,b)=>{if(b)if(zl(p)){const T=b(p,f);return T===void 0?p:T}else{if(ji(p))return _I(p,S=>b(S,f));{const S=b(p,f);if(S===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}}return p},h)}return d.getInitialState=l,d}var XZ="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",KZ=(e=21)=>{let r="",s=e;for(;s--;)r+=XZ[Math.random()*64|0];return r},ZZ=Symbol.for("rtk-slice-createasyncthunk");function QZ(e,r){return`${e}/${r}`}function JZ({creators:e}={}){const r=e?.asyncThunk?.[ZZ];return function(n){const{name:a,reducerPath:l=a}=n;if(!a)throw new Error(Na(11));const d=(typeof n.reducers=="function"?n.reducers(tQ()):n.reducers)||{},h=Object.keys(d),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},x={addCase(_,$){const F=typeof _=="string"?_:_.type;if(!F)throw new Error(Na(12));if(F in f.sliceCaseReducersByType)throw new Error(Na(13));return f.sliceCaseReducersByType[F]=$,x},addMatcher(_,$){return f.sliceMatchers.push({matcher:_,reducer:$}),x},exposeAction(_,$){return f.actionCreators[_]=$,x},exposeCaseReducer(_,$){return f.sliceCaseReducersByName[_]=$,x}};h.forEach(_=>{const $=d[_],F={reducerName:_,type:QZ(a,_),createNotation:typeof n.reducers=="function"};sQ($)?aQ(F,$,x,r):rQ(F,$,x)});function p(){const[_={},$=[],F=void 0]=typeof n.extraReducers=="function"?FI(n.extraReducers):[n.extraReducers],B={..._,...f.sliceCaseReducersByType};return WZ(n.initialState,M=>{for(let V in B)M.addCase(V,B[V]);for(let V of f.sliceMatchers)M.addMatcher(V.matcher,V.reducer);for(let V of $)M.addMatcher(V.matcher,V.reducer);F&&M.addDefaultCase(F)})}const b=_=>_,S=new Map,T=new WeakMap;let A;function P(_,$){return A||(A=p()),A(_,$)}function D(){return A||(A=p()),A.getInitialState()}function I(_,$=!1){function F(M){let V=M[_];return typeof V>"u"&&$&&(V=lg(T,F,D)),V}function B(M=b){const V=lg(S,$,()=>new WeakMap);return lg(V,M,()=>{const z={};for(const[H,U]of Object.entries(n.selectors??{}))z[H]=eQ(U,M,()=>lg(T,M,D),$);return z})}return{reducerPath:_,getSelectors:B,get selectors(){return B(F)},selectSlice:F}}const L={name:a,reducer:P,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:D,...I(l),injectInto(_,{reducerPath:$,...F}={}){const B=$??l;return _.inject({reducerPath:B,reducer:P},F),{...L,...I(B,!0)}}};return L}}function eQ(e,r,s,n){function a(l,...d){let h=r(l);return typeof h>"u"&&n&&(h=s()),e(h,...d)}return a.unwrapped=e,a}var ra=JZ();function tQ(){function e(r,s){return{_reducerDefinitionType:"asyncThunk",payloadCreator:r,...s}}return e.withTypes=()=>e,{reducer(r){return Object.assign({[r.name](...s){return r(...s)}}[r.name],{_reducerDefinitionType:"reducer"})},preparedReducer(r,s){return{_reducerDefinitionType:"reducerWithPrepare",prepare:r,reducer:s}},asyncThunk:e}}function rQ({type:e,reducerName:r,createNotation:s},n,a){let l,d;if("reducer"in n){if(s&&!nQ(n))throw new Error(Na(17));l=n.reducer,d=n.prepare}else l=n;a.addCase(e,l).exposeCaseReducer(r,l).exposeAction(r,d?Ka(e,d):Ka(e))}function sQ(e){return e._reducerDefinitionType==="asyncThunk"}function nQ(e){return e._reducerDefinitionType==="reducerWithPrepare"}function aQ({type:e,reducerName:r},s,n,a){if(!a)throw new Error(Na(18));const{payloadCreator:l,fulfilled:d,pending:h,rejected:f,settled:x,options:p}=s,b=a(e,l,p);n.exposeAction(r,b),d&&n.addCase(b.fulfilled,d),h&&n.addCase(b.pending,h),f&&n.addCase(b.rejected,f),x&&n.addMatcher(b.settled,x),n.exposeCaseReducer(r,{fulfilled:d||og,pending:h||og,rejected:f||og,settled:x||og})}function og(){}var iQ="task",BI="listener",UI="completed",Cw="cancelled",lQ=`task-${Cw}`,oQ=`task-${UI}`,CN=`${BI}-${Cw}`,cQ=`${BI}-${UI}`,Bp=class{constructor(e){this.code=e,this.message=`${iQ} ${Cw} (reason: ${e})`}name="TaskAbortError";message},Aw=(e,r)=>{if(typeof e!="function")throw new TypeError(Na(32))},Px=()=>{},zI=(e,r=Px)=>(e.catch(r),e),VI=(e,r)=>(e.addEventListener("abort",r,{once:!0}),()=>e.removeEventListener("abort",r)),ed=(e,r)=>{const s=e.signal;s.aborted||("reason"in s||Object.defineProperty(s,"reason",{enumerable:!0,value:r,configurable:!0,writable:!0}),e.abort(r))},td=e=>{if(e.aborted){const{reason:r}=e;throw new Bp(r)}};function $I(e,r){let s=Px;return new Promise((n,a)=>{const l=()=>a(new Bp(e.reason));if(e.aborted){l();return}s=VI(e,l),r.finally(()=>s()).then(n,a)}).finally(()=>{s=Px})}var dQ=async(e,r)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(s){return{status:s instanceof Bp?"cancelled":"rejected",error:s}}finally{r?.()}},kx=e=>r=>zI($I(e,r).then(s=>(td(e),s))),qI=e=>{const r=kx(e);return s=>r(new Promise(n=>setTimeout(n,s)))},{assign:fu}=Object,b6={},Up="listenerMiddleware",uQ=(e,r)=>{const s=n=>VI(e,()=>ed(n,e.reason));return(n,a)=>{Aw(n);const l=new AbortController;s(l);const d=dQ(async()=>{td(e),td(l.signal);const h=await n({pause:kx(l.signal),delay:qI(l.signal),signal:l.signal});return td(l.signal),h},()=>ed(l,oQ));return a?.autoJoin&&r.push(d.catch(Px)),{result:kx(e)(d),cancel(){ed(l,lQ)}}}},hQ=(e,r)=>{const s=async(n,a)=>{td(r);let l=()=>{};const h=[new Promise((f,x)=>{let p=e({predicate:n,effect:(b,S)=>{S.unsubscribe(),f([b,S.getState(),S.getOriginalState()])}});l=()=>{p(),x()}})];a!=null&&h.push(new Promise(f=>setTimeout(f,a,null)));try{const f=await $I(r,Promise.race(h));return td(r),f}finally{l()}};return(n,a)=>zI(s(n,a))},HI=e=>{let{type:r,actionCreator:s,matcher:n,predicate:a,effect:l}=e;if(r)a=Ka(r).match;else if(s)r=s.type,a=s.match;else if(n)a=n;else if(!a)throw new Error(Na(21));return Aw(l),{predicate:a,type:r,effect:l}},GI=fu(e=>{const{type:r,predicate:s,effect:n}=HI(e);return{id:KZ(),effect:n,type:r,predicate:s,pending:new Set,unsubscribe:()=>{throw new Error(Na(22))}}},{withTypes:()=>GI}),v6=(e,r)=>{const{type:s,effect:n,predicate:a}=HI(r);return Array.from(e.values()).find(l=>(typeof s=="string"?l.type===s:l.predicate===a)&&l.effect===n)},AN=e=>{e.pending.forEach(r=>{ed(r,CN)})},mQ=(e,r)=>()=>{for(const s of r.keys())AN(s);e.clear()},N6=(e,r,s)=>{try{e(r,s)}catch(n){setTimeout(()=>{throw n},0)}},YI=fu(Ka(`${Up}/add`),{withTypes:()=>YI}),fQ=Ka(`${Up}/removeAll`),WI=fu(Ka(`${Up}/remove`),{withTypes:()=>WI}),gQ=(...e)=>{console.error(`${Up}/error`,...e)},fm=(e={})=>{const r=new Map,s=new Map,n=T=>{const A=s.get(T)??0;s.set(T,A+1)},a=T=>{const A=s.get(T)??1;A===1?s.delete(T):s.set(T,A-1)},{extra:l,onError:d=gQ}=e;Aw(d);const h=T=>(T.unsubscribe=()=>r.delete(T.id),r.set(T.id,T),A=>{T.unsubscribe(),A?.cancelActive&&AN(T)}),f=T=>{const A=v6(r,T)??GI(T);return h(A)};fu(f,{withTypes:()=>f});const x=T=>{const A=v6(r,T);return A&&(A.unsubscribe(),T.cancelActive&&AN(A)),!!A};fu(x,{withTypes:()=>x});const p=async(T,A,P,D)=>{const I=new AbortController,L=hQ(f,I.signal),_=[];try{T.pending.add(I),n(T),await Promise.resolve(T.effect(A,fu({},P,{getOriginalState:D,condition:($,F)=>L($,F).then(Boolean),take:L,delay:qI(I.signal),pause:kx(I.signal),extra:l,signal:I.signal,fork:uQ(I.signal,_),unsubscribe:T.unsubscribe,subscribe:()=>{r.set(T.id,T)},cancelActiveListeners:()=>{T.pending.forEach(($,F,B)=>{$!==I&&(ed($,CN),B.delete($))})},cancel:()=>{ed(I,CN),T.pending.delete(I)},throwIfCancelled:()=>{td(I.signal)}})))}catch($){$ instanceof Bp||N6(d,$,{raisedBy:"effect"})}finally{await Promise.all(_),ed(I,cQ),a(T),T.pending.delete(I)}},b=mQ(r,s);return{middleware:T=>A=>P=>{if(!wI(P))return A(P);if(YI.match(P))return f(P.payload);if(fQ.match(P)){b();return}if(WI.match(P))return x(P.payload);let D=T.getState();const I=()=>{if(D===b6)throw new Error(Na(23));return D};let L;try{if(L=A(P),r.size>0){const _=T.getState(),$=Array.from(r.values());for(const F of $){let B=!1;try{B=F.predicate(P,_,D)}catch(M){B=!1,N6(d,M,{raisedBy:"predicate"})}B&&p(F,P,T,I)}}}finally{D=b6}return L},startListening:f,stopListening:x,clearListeners:b}};function Na(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var xQ={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},XI=ra({name:"chartLayout",initialState:xQ,reducers:{setLayout(e,r){e.layoutType=r.payload},setChartSize(e,r){e.width=r.payload.width,e.height=r.payload.height},setMargin(e,r){var s,n,a,l;e.margin.top=(s=r.payload.top)!==null&&s!==void 0?s:0,e.margin.right=(n=r.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=r.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(l=r.payload.left)!==null&&l!==void 0?l:0},setScale(e,r){e.scale=r.payload}}}),{setMargin:pQ,setLayout:yQ,setChartSize:bQ,setScale:vQ}=XI.actions,NQ=XI.reducer;function KI(e,r,s){return Array.isArray(e)&&e&&r+s!==0?e.slice(r,s+1):e}function j6(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function cu(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?j6(Object(s),!0).forEach(function(n){jQ(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):j6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function jQ(e,r,s){return(r=wQ(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function wQ(e){var r=SQ(e,"string");return typeof r=="symbol"?r:r+""}function SQ(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Is(e,r,s){return ja(e)||ja(r)?s:Ul(r)?I0(e,r,s):typeof r=="function"?r(e):s}var CQ=(e,r,s)=>{if(r&&s){var{width:n,height:a}=s,{align:l,verticalAlign:d,layout:h}=r;if((h==="vertical"||h==="horizontal"&&d==="middle")&&l!=="center"&&Bt(e[l]))return cu(cu({},e),{},{[l]:e[l]+(n||0)});if((h==="horizontal"||h==="vertical"&&l==="center")&&d!=="middle"&&Bt(e[d]))return cu(cu({},e),{},{[d]:e[d]+(a||0)})}return e},dd=(e,r)=>e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis",w6=1e-4,AQ=e=>{var r=e.domain();if(!(!r||r.length<=2)){var s=r.length,n=e.range(),a=Math.min(n[0],n[1])-w6,l=Math.max(n[0],n[1])+w6,d=e(r[0]),h=e(r[s-1]);(d<a||d>l||h<a||h>l)&&e.domain([r[0],r[s-1]])}},EQ=e=>{var r=e.length;if(!(r<=0))for(var s=0,n=e[0].length;s<n;++s)for(var a=0,l=0,d=0;d<r;++d){var h=Fl(e[d][s][1])?e[d][s][0]:e[d][s][1];h>=0?(e[d][s][0]=a,e[d][s][1]=a+h,a=e[d][s][1]):(e[d][s][0]=l,e[d][s][1]=l+h,l=e[d][s][1])}},TQ=e=>{var r=e.length;if(!(r<=0))for(var s=0,n=e[0].length;s<n;++s)for(var a=0,l=0;l<r;++l){var d=Fl(e[l][s][1])?e[l][s][0]:e[l][s][1];d>=0?(e[l][s][0]=a,e[l][s][1]=a+d,a=e[l][s][1]):(e[l][s][0]=0,e[l][s][1]=0)}},DQ={sign:EQ,expand:WX,none:Cu,silhouette:XX,wiggle:KX,positive:TQ},OQ=(e,r,s)=>{var n=DQ[s],a=YX().keys(r).value((l,d)=>Number(Is(l,d,0))).order(gN).offset(n);return a(e)},PQ=e=>{var r=e.flat(2).filter(Bt);return[Math.min(...r),Math.max(...r)]},kQ=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],_Q=(e,r,s)=>{if(e!=null)return kQ(Object.keys(e).reduce((n,a)=>{var l=e[a],{stackedData:d}=l,h=d.reduce((f,x)=>{var p=KI(x,r,s),b=PQ(p);return[Math.min(f[0],b[0]),Math.max(f[1],b[1])]},[1/0,-1/0]);return[Math.min(h[0],n[0]),Math.max(h[1],n[1])]},[1/0,-1/0]))},S6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,C6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,A6=(e,r,s)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();return n}if(e&&r&&r.length>=2){for(var a=kp(r,p=>p.coordinate),l=1/0,d=1,h=a.length;d<h;d++){var f=a[d],x=a[d-1];l=Math.min((f.coordinate||0)-(x.coordinate||0),l)}return l===1/0?0:l}return s?void 0:0};function E6(e){var{tooltipEntrySettings:r,dataKey:s,payload:n,value:a,name:l}=e;return cu(cu({},r),{},{dataKey:s,payload:n,value:a,name:l})}function ZI(e,r){if(e)return String(e);if(typeof r=="string")return r}var IQ=(e,r)=>{if(r==="horizontal")return e.chartX;if(r==="vertical")return e.chartY},RQ=(e,r)=>r==="centric"?e.angle:e.radius,Gl=e=>e.layout.width,Yl=e=>e.layout.height,MQ=e=>e.layout.scale,QI=e=>e.layout.margin,zp=Me(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Vp=Me(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),JI="data-recharts-item-index",eR="data-recharts-item-data-key",gm=60;function T6(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function cg(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?T6(Object(s),!0).forEach(function(n){LQ(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function LQ(e,r,s){return(r=FQ(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function FQ(e){var r=BQ(e,"string");return typeof r=="symbol"?r:r+""}function BQ(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var UQ=e=>e.brush.height;function zQ(e){var r=Vp(e);return r.reduce((s,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:gm;return s+a}return s},0)}function VQ(e){var r=Vp(e);return r.reduce((s,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:gm;return s+a}return s},0)}function $Q(e){var r=zp(e);return r.reduce((s,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?s+n.height:s,0)}function qQ(e){var r=zp(e);return r.reduce((s,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?s+n.height:s,0)}var dn=Me([Gl,Yl,QI,UQ,zQ,VQ,$Q,qQ,bI,yZ],(e,r,s,n,a,l,d,h,f,x)=>{var p={left:(s.left||0)+a,right:(s.right||0)+l},b={top:(s.top||0)+d,bottom:(s.bottom||0)+h},S=cg(cg({},b),p),T=S.bottom;S.bottom+=n,S=CQ(S,f,x);var A=e-S.left-S.right,P=r-S.top-S.bottom;return cg(cg({brushBottom:T},S),{},{width:Math.max(A,0),height:Math.max(P,0)})}),HQ=Me(dn,e=>({x:e.left,y:e.top,width:e.width,height:e.height}));Me(Gl,Yl,(e,r)=>({x:0,y:0,width:e,height:r}));var GQ=v.createContext(null),sc=()=>v.useContext(GQ)!=null,$p=e=>e.brush,qp=Me([$p,dn,QI],(e,r,s)=>({height:e.height,x:Bt(e.x)?e.x:r.left,y:Bt(e.y)?e.y:r.top+r.height+r.brushBottom-(s?.bottom||0),width:Bt(e.width)?e.width:r.width})),Rv={},Mv={},Lv={},D6;function YQ(){return D6||(D6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s,n,{signal:a,edges:l}={}){let d,h=null;const f=l!=null&&l.includes("leading"),x=l==null||l.includes("trailing"),p=()=>{h!==null&&(s.apply(d,h),d=void 0,h=null)},b=()=>{x&&p(),P()};let S=null;const T=()=>{S!=null&&clearTimeout(S),S=setTimeout(()=>{S=null,b()},n)},A=()=>{S!==null&&(clearTimeout(S),S=null)},P=()=>{A(),d=void 0,h=null},D=()=>{p()},I=function(...L){if(a?.aborted)return;d=this,h=L;const _=S==null;T(),f&&_&&p()};return I.schedule=T,I.cancel=P,I.flush=D,a?.addEventListener("abort",P,{once:!0}),I}e.debounce=r})(Lv)),Lv}var O6;function WQ(){return O6||(O6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=YQ();function s(n,a=0,l={}){typeof l!="object"&&(l={});const{leading:d=!1,trailing:h=!0,maxWait:f}=l,x=Array(2);d&&(x[0]="leading"),h&&(x[1]="trailing");let p,b=null;const S=r.debounce(function(...P){p=n.apply(this,P),b=null},a,{edges:x}),T=function(...P){return f!=null&&(b===null&&(b=Date.now()),Date.now()-b>=f)?(p=n.apply(this,P),b=Date.now(),S.cancel(),S.schedule(),p):(S.apply(this,P),p)},A=()=>(S.flush(),p);return T.cancel=S.cancel,T.flush=A,T}e.debounce=s})(Mv)),Mv}var P6;function XQ(){return P6||(P6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=WQ();function s(n,a=0,l={}){const{leading:d=!0,trailing:h=!0}=l;return r.debounce(n,a,{leading:d,maxWait:a,trailing:h})}e.throttle=s})(Rv)),Rv}var Fv,k6;function KQ(){return k6||(k6=1,Fv=XQ().throttle),Fv}var ZQ=KQ();const QQ=Qi(ZQ);var _6=function(r,s){for(var n=arguments.length,a=new Array(n>2?n-2:0),l=2;l<n;l++)a[l-2]=arguments[l];if(typeof console<"u"&&console.warn&&(s===void 0&&console.warn("LogUtils requires an error message argument"),!r))if(s===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=0;console.warn(s.replace(/%s/g,()=>a[d++]))}},tR=(e,r,s)=>{var{width:n="100%",height:a="100%",aspect:l,maxHeight:d}=s,h=Bl(n)?e:Number(n),f=Bl(a)?r:Number(a);return l&&l>0&&(h?f=h/l:f&&(h=f*l),d&&f!=null&&f>d&&(f=d)),{calculatedWidth:h,calculatedHeight:f}},JQ={width:0,height:0,overflow:"visible"},eJ={width:0,overflowX:"visible"},tJ={height:0,overflowY:"visible"},rJ={},sJ=e=>{var{width:r,height:s}=e,n=Bl(r),a=Bl(s);return n&&a?JQ:n?eJ:a?tJ:rJ};function nJ(e){var{width:r,height:s,aspect:n}=e,a=r,l=s;return a===void 0&&l===void 0?(a="100%",l="100%"):a===void 0?a=n&&n>0?void 0:"100%":l===void 0&&(l=n&&n>0?void 0:"100%"),{width:a,height:l}}function cn(e){return Number.isFinite(e)}function Jo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function EN(){return EN=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},EN.apply(null,arguments)}function I6(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function R6(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?I6(Object(s),!0).forEach(function(n){aJ(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):I6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function aJ(e,r,s){return(r=iJ(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function iJ(e){var r=lJ(e,"string");return typeof r=="symbol"?r:r+""}function lJ(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var rR=v.createContext({width:-1,height:-1});function oJ(e){return Jo(e.width)&&Jo(e.height)}function sR(e){var{children:r,width:s,height:n}=e,a=v.useMemo(()=>({width:s,height:n}),[s,n]);return oJ(a)?v.createElement(rR.Provider,{value:a},r):null}var Ew=()=>v.useContext(rR),cJ=v.forwardRef((e,r)=>{var{aspect:s,initialDimension:n={width:-1,height:-1},width:a,height:l,minWidth:d=0,minHeight:h,maxHeight:f,children:x,debounce:p=0,id:b,className:S,onResize:T,style:A={}}=e,P=v.useRef(null),D=v.useRef();D.current=T,v.useImperativeHandle(r,()=>P.current);var[I,L]=v.useState({containerWidth:n.width,containerHeight:n.height}),_=v.useCallback((V,z)=>{L(H=>{var U=Math.round(V),G=Math.round(z);return H.containerWidth===U&&H.containerHeight===G?H:{containerWidth:U,containerHeight:G}})},[]);v.useEffect(()=>{if(P.current==null||typeof ResizeObserver>"u")return um;var V=G=>{var Q,{width:ce,height:ne}=G[0].contentRect;_(ce,ne),(Q=D.current)===null||Q===void 0||Q.call(D,ce,ne)};p>0&&(V=QQ(V,p,{trailing:!0,leading:!1}));var z=new ResizeObserver(V),{width:H,height:U}=P.current.getBoundingClientRect();return _(H,U),z.observe(P.current),()=>{z.disconnect()}},[_,p]);var{containerWidth:$,containerHeight:F}=I;_6(!s||s>0,"The aspect(%s) must be greater than zero.",s);var{calculatedWidth:B,calculatedHeight:M}=tR($,F,{width:a,height:l,aspect:s,maxHeight:f});return _6(B!=null&&B>0||M!=null&&M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,M,a,l,d,h,s),v.createElement("div",{id:b?"".concat(b):void 0,className:Rs("recharts-responsive-container",S),style:R6(R6({},A),{},{width:a,height:l,minWidth:d,minHeight:h,maxHeight:f}),ref:P},v.createElement("div",{style:sJ({width:a,height:l})},v.createElement(sR,{width:B,height:M},x)))}),TN=v.forwardRef((e,r)=>{var s=Ew();if(Jo(s.width)&&Jo(s.height))return e.children;var{width:n,height:a}=nJ({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:l,calculatedHeight:d}=tR(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return Bt(l)&&Bt(d)?v.createElement(sR,{width:l,height:d},e.children):v.createElement(cJ,EN({},e,{width:n,height:a,ref:r}))});function nR(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Hp=()=>{var e,r=sc(),s=zt(HQ),n=zt(qp),a=(e=zt($p))===null||e===void 0?void 0:e.padding;return!r||!n||!a?s:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},dJ={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},uJ=()=>{var e;return(e=zt(dn))!==null&&e!==void 0?e:dJ},aR=()=>zt(Gl),iR=()=>zt(Yl),hJ=()=>zt(e=>e.layout.margin),Kr=e=>e.layout.layoutType,Tw=()=>zt(Kr),mJ=()=>{var e=Tw();return e!==void 0},Gp=e=>{var r=Ms(),s=sc(),{width:n,height:a}=e,l=Ew(),d=n,h=a;return l&&(d=l.width>0?l.width:n,h=l.height>0?l.height:a),v.useEffect(()=>{!s&&Jo(d)&&Jo(h)&&r(bQ({width:d,height:h}))},[r,s,d,h]),null},lR=Symbol.for("immer-nothing"),M6=Symbol.for("immer-draftable"),wa=Symbol.for("immer-state");function pi(e,...r){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var B0=Object.getPrototypeOf;function Tu(e){return!!e&&!!e[wa]}function id(e){return e?oR(e)||Array.isArray(e)||!!e[M6]||!!e.constructor?.[M6]||xm(e)||Wp(e):!1}var fJ=Object.prototype.constructor.toString(),L6=new WeakMap;function oR(e){if(!e||typeof e!="object")return!1;const r=Object.getPrototypeOf(e);if(r===null||r===Object.prototype)return!0;const s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;if(s===Object)return!0;if(typeof s!="function")return!1;let n=L6.get(s);return n===void 0&&(n=Function.toString.call(s),L6.set(s,n)),n===fJ}function _x(e,r,s=!0){Yp(e)===0?(s?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{r(a,e[a],e)}):e.forEach((n,a)=>r(a,n,e))}function Yp(e){const r=e[wa];return r?r.type_:Array.isArray(e)?1:xm(e)?2:Wp(e)?3:0}function DN(e,r){return Yp(e)===2?e.has(r):Object.prototype.hasOwnProperty.call(e,r)}function cR(e,r,s){const n=Yp(e);n===2?e.set(r,s):n===3?e.add(s):e[r]=s}function gJ(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}function xm(e){return e instanceof Map}function Wp(e){return e instanceof Set}function Uc(e){return e.copy_||e.base_}function ON(e,r){if(xm(e))return new Map(e);if(Wp(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const s=oR(e);if(r===!0||r==="class_only"&&!s){const n=Object.getOwnPropertyDescriptors(e);delete n[wa];let a=Reflect.ownKeys(n);for(let l=0;l<a.length;l++){const d=a[l],h=n[d];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(n[d]={configurable:!0,writable:!0,enumerable:h.enumerable,value:e[d]})}return Object.create(B0(e),n)}else{const n=B0(e);if(n!==null&&s)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function Dw(e,r=!1){return Xp(e)||Tu(e)||!id(e)||(Yp(e)>1&&Object.defineProperties(e,{set:dg,add:dg,clear:dg,delete:dg}),Object.freeze(e),r&&Object.values(e).forEach(s=>Dw(s,!0))),e}function xJ(){pi(2)}var dg={value:xJ};function Xp(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var pJ={};function ld(e){const r=pJ[e];return r||pi(0,e),r}var U0;function dR(){return U0}function yJ(e,r){return{drafts_:[],parent_:e,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function F6(e,r){r&&(ld("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=r)}function PN(e){kN(e),e.drafts_.forEach(bJ),e.drafts_=null}function kN(e){e===U0&&(U0=e.parent_)}function B6(e){return U0=yJ(U0,e)}function bJ(e){const r=e[wa];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function U6(e,r){r.unfinalizedDrafts_=r.drafts_.length;const s=r.drafts_[0];return e!==void 0&&e!==s?(s[wa].modified_&&(PN(r),pi(4)),id(e)&&(e=Ix(r,e),r.parent_||Rx(r,e)),r.patches_&&ld("Patches").generateReplacementPatches_(s[wa].base_,e,r.patches_,r.inversePatches_)):e=Ix(r,s,[]),PN(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),e!==lR?e:void 0}function Ix(e,r,s){if(Xp(r))return r;const n=e.immer_.shouldUseStrictIteration(),a=r[wa];if(!a)return _x(r,(l,d)=>z6(e,a,r,l,d,s),n),r;if(a.scope_!==e)return r;if(!a.modified_)return Rx(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const l=a.copy_;let d=l,h=!1;a.type_===3&&(d=new Set(l),l.clear(),h=!0),_x(d,(f,x)=>z6(e,a,l,f,x,s,h),n),Rx(e,l,!1),s&&e.patches_&&ld("Patches").generatePatches_(a,s,e.patches_,e.inversePatches_)}return a.copy_}function z6(e,r,s,n,a,l,d){if(a==null||typeof a!="object"&&!d)return;const h=Xp(a);if(!(h&&!d)){if(Tu(a)){const f=l&&r&&r.type_!==3&&!DN(r.assigned_,n)?l.concat(n):void 0,x=Ix(e,a,f);if(cR(s,n,x),Tu(x))e.canAutoFreeze_=!1;else return}else d&&s.add(a);if(id(a)&&!h){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||r&&r.base_&&r.base_[n]===a&&h)return;Ix(e,a),(!r||!r.scope_.parent_)&&typeof n!="symbol"&&(xm(s)?s.has(n):Object.prototype.propertyIsEnumerable.call(s,n))&&Rx(e,a)}}}function Rx(e,r,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Dw(r,s)}function vJ(e,r){const s=Array.isArray(e),n={type_:s?1:0,scope_:r?r.scope_:dR(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,l=Ow;s&&(a=[n],l=z0);const{revoke:d,proxy:h}=Proxy.revocable(a,l);return n.draft_=h,n.revoke_=d,h}var Ow={get(e,r){if(r===wa)return e;const s=Uc(e);if(!DN(s,r))return NJ(e,s,r);const n=s[r];return e.finalized_||!id(n)?n:n===Bv(e.base_,r)?(Uv(e),e.copy_[r]=IN(n,e)):n},has(e,r){return r in Uc(e)},ownKeys(e){return Reflect.ownKeys(Uc(e))},set(e,r,s){const n=uR(Uc(e),r);if(n?.set)return n.set.call(e.draft_,s),!0;if(!e.modified_){const a=Bv(Uc(e),r),l=a?.[wa];if(l&&l.base_===s)return e.copy_[r]=s,e.assigned_[r]=!1,!0;if(gJ(s,a)&&(s!==void 0||DN(e.base_,r)))return!0;Uv(e),_N(e)}return e.copy_[r]===s&&(s!==void 0||r in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[r])||(e.copy_[r]=s,e.assigned_[r]=!0),!0},deleteProperty(e,r){return Bv(e.base_,r)!==void 0||r in e.base_?(e.assigned_[r]=!1,Uv(e),_N(e)):delete e.assigned_[r],e.copy_&&delete e.copy_[r],!0},getOwnPropertyDescriptor(e,r){const s=Uc(e),n=Reflect.getOwnPropertyDescriptor(s,r);return n&&{writable:!0,configurable:e.type_!==1||r!=="length",enumerable:n.enumerable,value:s[r]}},defineProperty(){pi(11)},getPrototypeOf(e){return B0(e.base_)},setPrototypeOf(){pi(12)}},z0={};_x(Ow,(e,r)=>{z0[e]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}});z0.deleteProperty=function(e,r){return z0.set.call(this,e,r,void 0)};z0.set=function(e,r,s){return Ow.set.call(this,e[0],r,s,e[0])};function Bv(e,r){const s=e[wa];return(s?Uc(s):e)[r]}function NJ(e,r,s){const n=uR(r,s);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function uR(e,r){if(!(r in e))return;let s=B0(e);for(;s;){const n=Object.getOwnPropertyDescriptor(s,r);if(n)return n;s=B0(s)}}function _N(e){e.modified_||(e.modified_=!0,e.parent_&&_N(e.parent_))}function Uv(e){e.copy_||(e.copy_=ON(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var jJ=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(r,s,n)=>{if(typeof r=="function"&&typeof s!="function"){const l=s;s=r;const d=this;return function(f=l,...x){return d.produce(f,p=>s.call(this,p,...x))}}typeof s!="function"&&pi(6),n!==void 0&&typeof n!="function"&&pi(7);let a;if(id(r)){const l=B6(this),d=IN(r,void 0);let h=!0;try{a=s(d),h=!1}finally{h?PN(l):kN(l)}return F6(l,n),U6(a,l)}else if(!r||typeof r!="object"){if(a=s(r),a===void 0&&(a=r),a===lR&&(a=void 0),this.autoFreeze_&&Dw(a,!0),n){const l=[],d=[];ld("Patches").generateReplacementPatches_(r,a,l,d),n(l,d)}return a}else pi(1,r)},this.produceWithPatches=(r,s)=>{if(typeof r=="function")return(d,...h)=>this.produceWithPatches(d,f=>r(f,...h));let n,a;return[this.produce(r,s,(d,h)=>{n=d,a=h}),n,a]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){id(e)||pi(8),Tu(e)&&(e=wJ(e));const r=B6(this),s=IN(e,void 0);return s[wa].isManual_=!0,kN(r),s}finishDraft(e,r){const s=e&&e[wa];(!s||!s.isManual_)&&pi(9);const{scope_:n}=s;return F6(n,r),U6(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let s;for(s=r.length-1;s>=0;s--){const a=r[s];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}s>-1&&(r=r.slice(s+1));const n=ld("Patches").applyPatches_;return Tu(e)?n(e,r):this.produce(e,a=>n(a,r))}};function IN(e,r){const s=xm(e)?ld("MapSet").proxyMap_(e,r):Wp(e)?ld("MapSet").proxySet_(e,r):vJ(e,r);return(r?r.scope_:dR()).drafts_.push(s),s}function wJ(e){return Tu(e)||pi(10,e),hR(e)}function hR(e){if(!id(e)||Xp(e))return e;const r=e[wa];let s,n=!0;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,s=ON(e,r.scope_.immer_.useStrictShallowCopy_),n=r.scope_.immer_.shouldUseStrictIteration()}else s=ON(e,!0);return _x(s,(a,l)=>{cR(s,a,hR(l))},n),r&&(r.finalized_=!1),s}var SJ=new jJ;SJ.produce;var CJ={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},mR=ra({name:"legend",initialState:CJ,reducers:{setLegendSize(e,r){e.size.width=r.payload.width,e.size.height=r.payload.height},setLegendSettings(e,r){e.settings.align=r.payload.align,e.settings.layout=r.payload.layout,e.settings.verticalAlign=r.payload.verticalAlign,e.settings.itemSorter=r.payload.itemSorter},addLegendPayload:{reducer(e,r){e.payload.push(r.payload)},prepare:os()},replaceLegendPayload:{reducer(e,r){var{prev:s,next:n}=r.payload,a=vi(e).payload.indexOf(s);a>-1&&(e.payload[a]=n)},prepare:os()},removeLegendPayload:{reducer(e,r){var s=vi(e).payload.indexOf(r.payload);s>-1&&e.payload.splice(s,1)},prepare:os()}}}),{setLegendSize:V6,setLegendSettings:AJ,addLegendPayload:EJ,replaceLegendPayload:TJ,removeLegendPayload:DJ}=mR.actions,OJ=mR.reducer,PJ=["contextPayload"];function RN(){return RN=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},RN.apply(null,arguments)}function $6(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Du(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?$6(Object(s),!0).forEach(function(n){kJ(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function kJ(e,r,s){return(r=_J(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function _J(e){var r=IJ(e,"string");return typeof r=="symbol"?r:r+""}function IJ(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function RJ(e,r){if(e==null)return{};var s,n,a=MJ(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function MJ(e,r){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;s[n]=e[n]}return s}function LJ(e){return e.value}function FJ(e){var{contextPayload:r}=e,s=RJ(e,PJ),n=gI(r,e.payloadUniqBy,LJ),a=Du(Du({},s),{},{payload:n});return v.isValidElement(e.content)?v.cloneElement(e.content,a):typeof e.content=="function"?v.createElement(e.content,a):v.createElement(EK,a)}function BJ(e,r,s,n,a,l){var{layout:d,align:h,verticalAlign:f}=r,x,p;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(h==="center"&&d==="vertical"?x={left:((n||0)-l.width)/2}:x=h==="right"?{right:s&&s.right||0}:{left:s&&s.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(f==="middle"?p={top:((a||0)-l.height)/2}:p=f==="bottom"?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),Du(Du({},x),p)}function UJ(e){var r=Ms();return v.useEffect(()=>{r(AJ(e))},[r,e]),null}function zJ(e){var r=Ms();return v.useEffect(()=>(r(V6(e)),()=>{r(V6({width:0,height:0}))}),[r,e]),null}function VJ(e,r,s,n){return e==="vertical"&&Bt(r)?{height:r}:e==="horizontal"?{width:s||n}:null}var $J={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function fR(e){var r=Qa(e,$J),s=NZ(),n=pX(),a=hJ(),{width:l,height:d,wrapperStyle:h,portal:f}=r,[x,p]=vI([s]),b=aR(),S=iR();if(b==null||S==null)return null;var T=b-(a?.left||0)-(a?.right||0),A=VJ(r.layout,d,l,T),P=f?h:Du(Du({position:"absolute",width:A?.width||l||"auto",height:A?.height||d||"auto"},BJ(h,r,a,b,S,x)),h),D=f??n;if(D==null||s==null)return null;var I=v.createElement("div",{className:"recharts-legend-wrapper",style:P,ref:p},v.createElement(UJ,{layout:r.layout,align:r.align,verticalAlign:r.verticalAlign,itemSorter:r.itemSorter}),!f&&v.createElement(zJ,{width:x.width,height:x.height}),v.createElement(FJ,RN({},r,A,{margin:a,chartWidth:b,chartHeight:S,contextPayload:s})));return xj.createPortal(I,D)}fR.displayName="Legend";function MN(){return MN=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},MN.apply(null,arguments)}function q6(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function zv(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?q6(Object(s),!0).forEach(function(n){qJ(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):q6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function qJ(e,r,s){return(r=HJ(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function HJ(e){var r=GJ(e,"string");return typeof r=="symbol"?r:r+""}function GJ(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function YJ(e){return Array.isArray(e)&&Ul(e[0])&&Ul(e[1])?e.join(" ~ "):e}var WJ=e=>{var{separator:r=" : ",contentStyle:s={},itemStyle:n={},labelStyle:a={},payload:l,formatter:d,itemSorter:h,wrapperClassName:f,labelClassName:x,label:p,labelFormatter:b,accessibilityLayer:S=!1}=e,T=()=>{if(l&&l.length){var F={padding:0,margin:0},B=(h?kp(l,h):l).map((M,V)=>{if(M.type==="none")return null;var z=M.formatter||d||YJ,{value:H,name:U}=M,G=H,Q=U;if(z){var ce=z(H,U,M,V,l);if(Array.isArray(ce))[G,Q]=ce;else if(ce!=null)G=ce;else return null}var ne=zv({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(V),style:ne},Ul(Q)?v.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,Ul(Q)?v.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,v.createElement("span",{className:"recharts-tooltip-item-value"},G),v.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:F},B)}return null},A=zv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),P=zv({margin:0},a),D=!ja(p),I=D?p:"",L=Rs("recharts-default-tooltip",f),_=Rs("recharts-tooltip-label",x);D&&b&&l!==void 0&&l!==null&&(I=b(p,l));var $=S?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",MN({className:L,style:A},$),v.createElement("p",{className:_,style:P},v.isValidElement(I)?I:"".concat(I)),T())},Wh="recharts-tooltip-wrapper",XJ={visibility:"hidden"};function KJ(e){var{coordinate:r,translateX:s,translateY:n}=e;return Rs(Wh,{["".concat(Wh,"-right")]:Bt(s)&&r&&Bt(r.x)&&s>=r.x,["".concat(Wh,"-left")]:Bt(s)&&r&&Bt(r.x)&&s<r.x,["".concat(Wh,"-bottom")]:Bt(n)&&r&&Bt(r.y)&&n>=r.y,["".concat(Wh,"-top")]:Bt(n)&&r&&Bt(r.y)&&n<r.y})}function H6(e){var{allowEscapeViewBox:r,coordinate:s,key:n,offsetTopLeft:a,position:l,reverseDirection:d,tooltipDimension:h,viewBox:f,viewBoxDimension:x}=e;if(l&&Bt(l[n]))return l[n];var p=s[n]-h-(a>0?a:0),b=s[n]+a;if(r[n])return d[n]?p:b;var S=f[n];if(S==null)return 0;if(d[n]){var T=p,A=S;return T<A?Math.max(b,S):Math.max(p,S)}if(x==null)return 0;var P=b+h,D=S+x;return P>D?Math.max(p,S):Math.max(b,S)}function ZJ(e){var{translateX:r,translateY:s,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(r,"px, ").concat(s,"px, 0)"):"translate(".concat(r,"px, ").concat(s,"px)")}}function QJ(e){var{allowEscapeViewBox:r,coordinate:s,offsetTopLeft:n,position:a,reverseDirection:l,tooltipBox:d,useTranslate3d:h,viewBox:f}=e,x,p,b;return d.height>0&&d.width>0&&s?(p=H6({allowEscapeViewBox:r,coordinate:s,key:"x",offsetTopLeft:n,position:a,reverseDirection:l,tooltipDimension:d.width,viewBox:f,viewBoxDimension:f.width}),b=H6({allowEscapeViewBox:r,coordinate:s,key:"y",offsetTopLeft:n,position:a,reverseDirection:l,tooltipDimension:d.height,viewBox:f,viewBoxDimension:f.height}),x=ZJ({translateX:p,translateY:b,useTranslate3d:h})):x=XJ,{cssProperties:x,cssClasses:KJ({translateX:p,translateY:b,coordinate:s})}}function G6(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function ug(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?G6(Object(s),!0).forEach(function(n){LN(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):G6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function LN(e,r,s){return(r=JJ(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function JJ(e){var r=eee(e,"string");return typeof r=="symbol"?r:r+""}function eee(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class tee extends v.PureComponent{constructor(){super(...arguments),LN(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),LN(this,"handleKeyDown",r=>{if(r.key==="Escape"){var s,n,a,l;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&s!==void 0?s:0,y:(a=(l=this.props.coordinate)===null||l===void 0?void 0:l.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var r,s;this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:r,allowEscapeViewBox:s,animationDuration:n,animationEasing:a,children:l,coordinate:d,hasPayload:h,isAnimationActive:f,offset:x,position:p,reverseDirection:b,useTranslate3d:S,viewBox:T,wrapperStyle:A,lastBoundingBox:P,innerRef:D,hasPortalFromProps:I}=this.props,{cssClasses:L,cssProperties:_}=QJ({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:x,position:p,reverseDirection:b,tooltipBox:{height:P.height,width:P.width},useTranslate3d:S,viewBox:T}),$=I?{}:ug(ug({transition:f&&r?"transform ".concat(n,"ms ").concat(a):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&h?"visible":"hidden",position:"absolute",top:0,left:0}),F=ug(ug({},$),{},{visibility:!this.state.dismissed&&r&&h?"visible":"hidden"},A);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:L,style:F,ref:D},l)}}var gR=()=>{var e;return(e=zt(r=>r.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function FN(){return FN=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},FN.apply(null,arguments)}function Y6(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function W6(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Y6(Object(s),!0).forEach(function(n){ree(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Y6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function ree(e,r,s){return(r=see(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function see(e){var r=nee(e,"string");return typeof r=="symbol"?r:r+""}function nee(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var X6={curveBasisClosed:MX,curveBasisOpen:LX,curveBasis:RX,curveBumpX:NX,curveBumpY:jX,curveLinearClosed:FX,curveLinear:Op,curveMonotoneX:BX,curveMonotoneY:UX,curveNatural:zX,curveStep:VX,curveStepAfter:qX,curveStepBefore:$X},Mx=e=>cn(e.x)&&cn(e.y),K6=e=>e.base!=null&&Mx(e.base)&&Mx(e),Xh=e=>e.x,Kh=e=>e.y,aee=(e,r)=>{if(typeof e=="function")return e;var s="curve".concat(dm(e));return(s==="curveMonotone"||s==="curveBump")&&r?X6["".concat(s).concat(r==="vertical"?"Y":"X")]:X6[s]||Op},iee=e=>{var{type:r="linear",points:s=[],baseLine:n,layout:a,connectNulls:l=!1}=e,d=aee(r,a),h=l?s.filter(Mx):s,f;if(Array.isArray(n)){var x=s.map((T,A)=>W6(W6({},T),{},{base:n[A]}));a==="vertical"?f=sg().y(Kh).x1(Xh).x0(T=>T.base.x):f=sg().x(Xh).y1(Kh).y0(T=>T.base.y);var p=f.defined(K6).curve(d),b=l?x.filter(K6):x;return p(b)}a==="vertical"&&Bt(n)?f=sg().y(Kh).x1(Xh).x0(n):Bt(n)?f=sg().x(Xh).y1(Kh).y0(n):f=q_().x(Xh).y(Kh);var S=f.defined(Mx).curve(d);return S(h)},Pw=e=>{var{className:r,points:s,path:n,pathRef:a}=e;if((!s||!s.length)&&!n)return null;var l=s&&s.length?iee(e):n;return v.createElement("path",FN({},Su(e),fK(e),{className:Rs("recharts-curve",r),d:l===null?void 0:l,ref:a}))},lee=["x","y","top","left","width","height","className"];function BN(){return BN=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},BN.apply(null,arguments)}function Z6(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function oee(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Z6(Object(s),!0).forEach(function(n){cee(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Z6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function cee(e,r,s){return(r=dee(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function dee(e){var r=uee(e,"string");return typeof r=="symbol"?r:r+""}function uee(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function hee(e,r){if(e==null)return{};var s,n,a=mee(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function mee(e,r){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var fee=(e,r,s,n,a,l)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(l,",").concat(r,"h").concat(s),gee=e=>{var{x:r=0,y:s=0,top:n=0,left:a=0,width:l=0,height:d=0,className:h}=e,f=hee(e,lee),x=oee({x:r,y:s,top:n,left:a,width:l,height:d},f);return!Bt(r)||!Bt(s)||!Bt(l)||!Bt(d)||!Bt(n)||!Bt(a)?null:v.createElement("path",BN({},Xa(x),{className:Rs("recharts-cross",h),d:fee(r,s,l,d,n,a)}))};function xee(e,r,s,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?r.x-a:s.left+.5,y:e==="horizontal"?s.top+.5:r.y-a,width:e==="horizontal"?n:s.width-1,height:e==="horizontal"?s.height-1:n}}function Q6(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function J6(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Q6(Object(s),!0).forEach(function(n){pee(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Q6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function pee(e,r,s){return(r=yee(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function yee(e){var r=bee(e,"string");return typeof r=="symbol"?r:r+""}function bee(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var vee=e=>e.replace(/([A-Z])/g,r=>"-".concat(r.toLowerCase())),xR=(e,r,s)=>e.map(n=>"".concat(vee(n)," ").concat(r,"ms ").concat(s)).join(","),Nee=(e,r)=>[Object.keys(e),Object.keys(r)].reduce((s,n)=>s.filter(a=>n.includes(a))),V0=(e,r)=>Object.keys(r).reduce((s,n)=>J6(J6({},s),{},{[n]:e(n,r[n])}),{});function eT(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function en(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?eT(Object(s),!0).forEach(function(n){jee(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):eT(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function jee(e,r,s){return(r=wee(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function wee(e){var r=See(e,"string");return typeof r=="symbol"?r:r+""}function See(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Lx=(e,r,s)=>e+(r-e)*s,UN=e=>{var{from:r,to:s}=e;return r!==s},pR=(e,r,s)=>{var n=V0((a,l)=>{if(UN(l)){var[d,h]=e(l.from,l.to,l.velocity);return en(en({},l),{},{from:d,velocity:h})}return l},r);return s<1?V0((a,l)=>UN(l)?en(en({},l),{},{velocity:Lx(l.velocity,n[a].velocity,s),from:Lx(l.from,n[a].from,s)}):l,r):pR(e,n,s-1)};function Cee(e,r,s,n,a,l){var d,h=n.reduce((S,T)=>en(en({},S),{},{[T]:{from:e[T],velocity:0,to:r[T]}}),{}),f=()=>V0((S,T)=>T.from,h),x=()=>!Object.values(h).filter(UN).length,p=null,b=S=>{d||(d=S);var T=S-d,A=T/s.dt;h=pR(s,h,A),a(en(en(en({},e),r),f())),d=S,x()||(p=l.setTimeout(b))};return()=>(p=l.setTimeout(b),()=>{var S;(S=p)===null||S===void 0||S()})}function Aee(e,r,s,n,a,l,d){var h=null,f=a.reduce((b,S)=>en(en({},b),{},{[S]:[e[S],r[S]]}),{}),x,p=b=>{x||(x=b);var S=(b-x)/n,T=V0((P,D)=>Lx(...D,s(S)),f);if(l(en(en(en({},e),r),T)),S<1)h=d.setTimeout(p);else{var A=V0((P,D)=>Lx(...D,s(1)),f);l(en(en(en({},e),r),A))}};return()=>(h=d.setTimeout(p),()=>{var b;(b=h)===null||b===void 0||b()})}const Eee=(e,r,s,n,a,l)=>{var d=Nee(e,r);return s==null?()=>(a(en(en({},e),r)),()=>{}):s.isStepper===!0?Cee(e,r,s,d,a,l):Aee(e,r,s,n,d,a,l)};var Fx=1e-4,yR=(e,r)=>[0,3*e,3*r-6*e,3*e-3*r+1],bR=(e,r)=>e.map((s,n)=>s*r**n).reduce((s,n)=>s+n),tT=(e,r)=>s=>{var n=yR(e,r);return bR(n,s)},Tee=(e,r)=>s=>{var n=yR(e,r),a=[...n.map((l,d)=>l*d).slice(1),0];return bR(a,s)},Dee=function(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];if(s.length===1)switch(s[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a,l=s[0].split("(");if(l[0]==="cubic-bezier"&&((a=l[1])===null||a===void 0?void 0:a.split(")")[0].split(",").length)===4){var d=l[1].split(")")[0].split(",").map(h=>parseFloat(h));return[d[0],d[1],d[2],d[3]]}}}return s.length===4?s:[0,0,1,1]},Oee=(e,r,s,n)=>{var a=tT(e,s),l=tT(r,n),d=Tee(e,s),h=x=>x>1?1:x<0?0:x,f=x=>{for(var p=x>1?1:x,b=p,S=0;S<8;++S){var T=a(b)-p,A=d(b);if(Math.abs(T-p)<Fx||A<Fx)return l(b);b=h(b-T/A)}return l(b)};return f.isStepper=!1,f},rT=function(){return Oee(...Dee(...arguments))},Pee=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:s=100,damping:n=8,dt:a=17}=r,l=(d,h,f)=>{var x=-(d-h)*s,p=f*n,b=f+(x-p)*a/1e3,S=f*a/1e3+d;return Math.abs(S-h)<Fx&&Math.abs(b)<Fx?[h,0]:[S,b]};return l.isStepper=!0,l.dt=a,l},kee=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return rT(e);case"spring":return Pee();default:if(e.split("(")[0]==="cubic-bezier")return rT(e)}return typeof e=="function"?e:null};function _ee(e){var r,s=()=>null,n=!1,a=null,l=d=>{if(!n){if(Array.isArray(d)){if(!d.length)return;var h=d,[f,...x]=h;if(typeof f=="number"){a=e.setTimeout(l.bind(null,x),f);return}l(f),a=e.setTimeout(l.bind(null,x));return}typeof d=="string"&&(r=d,s(r)),typeof d=="object"&&(r=d,s(r)),typeof d=="function"&&d()}};return{stop:()=>{n=!0},start:d=>{n=!1,a&&(a(),a=null),l(d)},subscribe:d=>(s=d,()=>{s=()=>null}),getTimeoutController:()=>e}}class Iee{setTimeout(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,l=d=>{d-n>=s?r(d):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(l))};return a=requestAnimationFrame(l),()=>{a!=null&&cancelAnimationFrame(a)}}}function Ree(){return _ee(new Iee)}var Mee=v.createContext(Ree);function Lee(e,r){var s=v.useContext(Mee);return v.useMemo(()=>r??s(e),[e,r,s])}var Fee=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Kp={devToolsEnabled:!1,isSsr:Fee()},Bee={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},sT={t:0},Vv={t:1};function kw(e){var r=Qa(e,Bee),{isActive:s,canBegin:n,duration:a,easing:l,begin:d,onAnimationEnd:h,onAnimationStart:f,children:x}=r,p=s==="auto"?!Kp.isSsr:s,b=Lee(r.animationId,r.animationManager),[S,T]=v.useState(p?sT:Vv),A=v.useRef(null);return v.useEffect(()=>{p||T(Vv)},[p]),v.useEffect(()=>{if(!p||!n)return um;var P=Eee(sT,Vv,kee(l),a,T,b.getTimeoutController()),D=()=>{A.current=P()};return b.start([f,d,D,a,h]),()=>{b.stop(),A.current&&A.current(),h()}},[p,n,a,l,d,f,h,b]),x(S.t)}function _w(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",s=v.useRef(R0(r)),n=v.useRef(e);return n.current!==e&&(s.current=R0(r),n.current=e),s.current}var Uee=["radius"],zee=["radius"];function nT(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function aT(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?nT(Object(s),!0).forEach(function(n){Vee(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):nT(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Vee(e,r,s){return(r=$ee(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function $ee(e){var r=qee(e,"string");return typeof r=="symbol"?r:r+""}function qee(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Bx(){return Bx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Bx.apply(null,arguments)}function iT(e,r){if(e==null)return{};var s,n,a=Hee(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Hee(e,r){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var lT=(e,r,s,n,a)=>{var l=Math.min(Math.abs(s)/2,Math.abs(n)/2),d=n>=0?1:-1,h=s>=0?1:-1,f=n>=0&&s>=0||n<0&&s<0?1:0,x;if(l>0&&a instanceof Array){for(var p=[0,0,0,0],b=0,S=4;b<S;b++)p[b]=a[b]>l?l:a[b];x="M".concat(e,",").concat(r+d*p[0]),p[0]>0&&(x+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(f,",").concat(e+h*p[0],",").concat(r)),x+="L ".concat(e+s-h*p[1],",").concat(r),p[1]>0&&(x+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(f,`,
        `).concat(e+s,",").concat(r+d*p[1])),x+="L ".concat(e+s,",").concat(r+n-d*p[2]),p[2]>0&&(x+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(f,`,
        `).concat(e+s-h*p[2],",").concat(r+n)),x+="L ".concat(e+h*p[3],",").concat(r+n),p[3]>0&&(x+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(f,`,
        `).concat(e,",").concat(r+n-d*p[3])),x+="Z"}else if(l>0&&a===+a&&a>0){var T=Math.min(l,a);x="M ".concat(e,",").concat(r+d*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e+h*T,",").concat(r,`
            L `).concat(e+s-h*T,",").concat(r,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e+s,",").concat(r+d*T,`
            L `).concat(e+s,",").concat(r+n-d*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e+s-h*T,",").concat(r+n,`
            L `).concat(e+h*T,",").concat(r+n,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e,",").concat(r+n-d*T," Z")}else x="M ".concat(e,",").concat(r," h ").concat(s," v ").concat(n," h ").concat(-s," Z");return x},oT={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},vR=e=>{var r=Qa(e,oT),s=v.useRef(null),[n,a]=v.useState(-1);v.useEffect(()=>{if(s.current&&s.current.getTotalLength)try{var W=s.current.getTotalLength();W&&a(W)}catch{}},[]);var{x:l,y:d,width:h,height:f,radius:x,className:p}=r,{animationEasing:b,animationDuration:S,animationBegin:T,isAnimationActive:A,isUpdateAnimationActive:P}=r,D=v.useRef(h),I=v.useRef(f),L=v.useRef(l),_=v.useRef(d),$=v.useMemo(()=>({x:l,y:d,width:h,height:f,radius:x}),[l,d,h,f,x]),F=_w($,"rectangle-");if(l!==+l||d!==+d||h!==+h||f!==+f||h===0||f===0)return null;var B=Rs("recharts-rectangle",p);if(!P){var M=Xa(r),{radius:V}=M,z=iT(M,Uee);return v.createElement("path",Bx({},z,{radius:typeof x=="number"?x:void 0,className:B,d:lT(l,d,h,f,x)}))}var H=D.current,U=I.current,G=L.current,Q=_.current,ce="0px ".concat(n===-1?1:n,"px"),ne="".concat(n,"px 0px"),J=xR(["strokeDasharray"],S,typeof b=="string"?b:oT.animationEasing);return v.createElement(kw,{animationId:F,key:F,canBegin:n>0,duration:S,easing:b,isActive:P,begin:T},W=>{var le=gi(H,h,W),ge=gi(U,f,W),re=gi(G,l,W),X=gi(Q,d,W);s.current&&(D.current=le,I.current=ge,L.current=re,_.current=X);var ae;A?W>0?ae={transition:J,strokeDasharray:ne}:ae={strokeDasharray:ce}:ae={strokeDasharray:ne};var ve=Xa(r),{radius:fe}=ve,se=iT(ve,zee);return v.createElement("path",Bx({},se,{radius:typeof x=="number"?x:void 0,className:B,d:lT(re,X,le,ge,x),ref:s,style:aT(aT({},ae),r.style)}))})};function cT(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function dT(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?cT(Object(s),!0).forEach(function(n){Gee(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):cT(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Gee(e,r,s){return(r=Yee(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function Yee(e){var r=Wee(e,"string");return typeof r=="symbol"?r:r+""}function Wee(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Ux=Math.PI/180,Xee=e=>e*180/Math.PI,Gs=(e,r,s,n)=>({x:e+Math.cos(-Ux*n)*s,y:r+Math.sin(-Ux*n)*s}),NR=function(r,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(r-(n.left||0)-(n.right||0)),Math.abs(s-(n.top||0)-(n.bottom||0)))/2},Kee=(e,r)=>{var{x:s,y:n}=e,{x:a,y:l}=r;return Math.sqrt((s-a)**2+(n-l)**2)},Zee=(e,r)=>{var{x:s,y:n}=e,{cx:a,cy:l}=r,d=Kee({x:s,y:n},{x:a,y:l});if(d<=0)return{radius:d,angle:0};var h=(s-a)/d,f=Math.acos(h);return n>l&&(f=2*Math.PI-f),{radius:d,angle:Xee(f),angleInRadian:f}},Qee=e=>{var{startAngle:r,endAngle:s}=e,n=Math.floor(r/360),a=Math.floor(s/360),l=Math.min(n,a);return{startAngle:r-l*360,endAngle:s-l*360}},Jee=(e,r)=>{var{startAngle:s,endAngle:n}=r,a=Math.floor(s/360),l=Math.floor(n/360),d=Math.min(a,l);return e+d*360},ete=(e,r)=>{var{chartX:s,chartY:n}=e,{radius:a,angle:l}=Zee({x:s,y:n},r),{innerRadius:d,outerRadius:h}=r;if(a<d||a>h||a===0)return null;var{startAngle:f,endAngle:x}=Qee(r),p=l,b;if(f<=x){for(;p>x;)p-=360;for(;p<f;)p+=360;b=p>=f&&p<=x}else{for(;p>f;)p-=360;for(;p<x;)p+=360;b=p>=x&&p<=f}return b?dT(dT({},r),{},{radius:a,angle:Jee(p,r)}):null};function jR(e){var{cx:r,cy:s,radius:n,startAngle:a,endAngle:l}=e,d=Gs(r,s,n,a),h=Gs(r,s,n,l);return{points:[d,h],cx:r,cy:s,radius:n,startAngle:a,endAngle:l}}function zN(){return zN=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},zN.apply(null,arguments)}var tte=(e,r)=>{var s=Qn(r-e),n=Math.min(Math.abs(r-e),359.999);return s*n},hg=e=>{var{cx:r,cy:s,radius:n,angle:a,sign:l,isExternal:d,cornerRadius:h,cornerIsExternal:f}=e,x=h*(d?1:-1)+n,p=Math.asin(h/x)/Ux,b=f?a:a+l*p,S=Gs(r,s,x,b),T=Gs(r,s,n,b),A=f?a-l*p:a,P=Gs(r,s,x*Math.cos(p*Ux),A);return{center:S,circleTangency:T,lineTangency:P,theta:p}},wR=e=>{var{cx:r,cy:s,innerRadius:n,outerRadius:a,startAngle:l,endAngle:d}=e,h=tte(l,d),f=l+h,x=Gs(r,s,a,l),p=Gs(r,s,a,f),b="M ".concat(x.x,",").concat(x.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(h)>180),",").concat(+(l>f),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(n>0){var S=Gs(r,s,n,l),T=Gs(r,s,n,f);b+="L ".concat(T.x,",").concat(T.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(h)>180),",").concat(+(l<=f),`,
            `).concat(S.x,",").concat(S.y," Z")}else b+="L ".concat(r,",").concat(s," Z");return b},rte=e=>{var{cx:r,cy:s,innerRadius:n,outerRadius:a,cornerRadius:l,forceCornerRadius:d,cornerIsExternal:h,startAngle:f,endAngle:x}=e,p=Qn(x-f),{circleTangency:b,lineTangency:S,theta:T}=hg({cx:r,cy:s,radius:a,angle:f,sign:p,cornerRadius:l,cornerIsExternal:h}),{circleTangency:A,lineTangency:P,theta:D}=hg({cx:r,cy:s,radius:a,angle:x,sign:-p,cornerRadius:l,cornerIsExternal:h}),I=h?Math.abs(f-x):Math.abs(f-x)-T-D;if(I<0)return d?"M ".concat(S.x,",").concat(S.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):wR({cx:r,cy:s,innerRadius:n,outerRadius:a,startAngle:f,endAngle:x});var L="M ".concat(S.x,",").concat(S.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(I>180),",").concat(+(p<0),",").concat(A.x,",").concat(A.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat(P.x,",").concat(P.y,`
  `);if(n>0){var{circleTangency:_,lineTangency:$,theta:F}=hg({cx:r,cy:s,radius:n,angle:f,sign:p,isExternal:!0,cornerRadius:l,cornerIsExternal:h}),{circleTangency:B,lineTangency:M,theta:V}=hg({cx:r,cy:s,radius:n,angle:x,sign:-p,isExternal:!0,cornerRadius:l,cornerIsExternal:h}),z=h?Math.abs(f-x):Math.abs(f-x)-F-V;if(z<0&&l===0)return"".concat(L,"L").concat(r,",").concat(s,"Z");L+="L".concat(M.x,",").concat(M.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat(B.x,",").concat(B.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(z>180),",").concat(+(p>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat($.x,",").concat($.y,"Z")}else L+="L".concat(r,",").concat(s,"Z");return L},ste={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},SR=e=>{var r=Qa(e,ste),{cx:s,cy:n,innerRadius:a,outerRadius:l,cornerRadius:d,forceCornerRadius:h,cornerIsExternal:f,startAngle:x,endAngle:p,className:b}=r;if(l<a||x===p)return null;var S=Rs("recharts-sector",b),T=l-a,A=va(d,T,0,!0),P;return A>0&&Math.abs(x-p)<360?P=rte({cx:s,cy:n,innerRadius:a,outerRadius:l,cornerRadius:Math.min(A,T/2),forceCornerRadius:h,cornerIsExternal:f,startAngle:x,endAngle:p}):P=wR({cx:s,cy:n,innerRadius:a,outerRadius:l,startAngle:x,endAngle:p}),v.createElement("path",zN({},Xa(r),{className:S,d:P}))};function nte(e,r,s){if(e==="horizontal")return[{x:r.x,y:s.top},{x:r.x,y:s.top+s.height}];if(e==="vertical")return[{x:s.left,y:r.y},{x:s.left+s.width,y:r.y}];if(nI(r)){if(e==="centric"){var{cx:n,cy:a,innerRadius:l,outerRadius:d,angle:h}=r,f=Gs(n,a,l,h),x=Gs(n,a,d,h);return[{x:f.x,y:f.y},{x:x.x,y:x.y}]}return jR(r)}}var $v={},qv={},Hv={},uT;function ate(){return uT||(uT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=pI();function s(n){return r.isSymbol(n)?NaN:Number(n)}e.toNumber=s})(Hv)),Hv}var hT;function ite(){return hT||(hT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=ate();function s(n){return n?(n=r.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=s})(qv)),qv}var mT;function lte(){return mT||(mT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=yI(),s=ite();function n(a,l,d){d&&typeof d!="number"&&r.isIterateeCall(a,l,d)&&(l=d=void 0),a=s.toFinite(a),l===void 0?(l=a,a=0):l=s.toFinite(l),d=d===void 0?a<l?1:-1:s.toFinite(d);const h=Math.max(Math.ceil((l-a)/(d||1)),0),f=new Array(h);for(let x=0;x<h;x++)f[x]=a,a+=d;return f}e.range=n})($v)),$v}var Gv,fT;function ote(){return fT||(fT=1,Gv=lte().range),Gv}var cte=ote();const CR=Qi(cte);function Wo(e,r){return e==null||r==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function dte(e,r){return e==null||r==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function Iw(e){let r,s,n;e.length!==2?(r=Wo,s=(h,f)=>Wo(e(h),f),n=(h,f)=>e(h)-f):(r=e===Wo||e===dte?e:ute,s=e,n=e);function a(h,f,x=0,p=h.length){if(x<p){if(r(f,f)!==0)return p;do{const b=x+p>>>1;s(h[b],f)<0?x=b+1:p=b}while(x<p)}return x}function l(h,f,x=0,p=h.length){if(x<p){if(r(f,f)!==0)return p;do{const b=x+p>>>1;s(h[b],f)<=0?x=b+1:p=b}while(x<p)}return x}function d(h,f,x=0,p=h.length){const b=a(h,f,x,p-1);return b>x&&n(h[b-1],f)>-n(h[b],f)?b-1:b}return{left:a,center:d,right:l}}function ute(){return 0}function AR(e){return e===null?NaN:+e}function*hte(e,r){for(let s of e)s!=null&&(s=+s)>=s&&(yield s)}const mte=Iw(Wo),pm=mte.right;Iw(AR).center;class gT extends Map{constructor(r,s=xte){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:s}}),r!=null)for(const[n,a]of r)this.set(n,a)}get(r){return super.get(xT(this,r))}has(r){return super.has(xT(this,r))}set(r,s){return super.set(fte(this,r),s)}delete(r){return super.delete(gte(this,r))}}function xT({_intern:e,_key:r},s){const n=r(s);return e.has(n)?e.get(n):s}function fte({_intern:e,_key:r},s){const n=r(s);return e.has(n)?e.get(n):(e.set(n,s),s)}function gte({_intern:e,_key:r},s){const n=r(s);return e.has(n)&&(s=e.get(n),e.delete(n)),s}function xte(e){return e!==null&&typeof e=="object"?e.valueOf():e}function pte(e=Wo){if(e===Wo)return ER;if(typeof e!="function")throw new TypeError("compare is not a function");return(r,s)=>{const n=e(r,s);return n||n===0?n:(e(s,s)===0)-(e(r,r)===0)}}function ER(e,r){return(e==null||!(e>=e))-(r==null||!(r>=r))||(e<r?-1:e>r?1:0)}const yte=Math.sqrt(50),bte=Math.sqrt(10),vte=Math.sqrt(2);function zx(e,r,s){const n=(r-e)/Math.max(0,s),a=Math.floor(Math.log10(n)),l=n/Math.pow(10,a),d=l>=yte?10:l>=bte?5:l>=vte?2:1;let h,f,x;return a<0?(x=Math.pow(10,-a)/d,h=Math.round(e*x),f=Math.round(r*x),h/x<e&&++h,f/x>r&&--f,x=-x):(x=Math.pow(10,a)*d,h=Math.round(e/x),f=Math.round(r/x),h*x<e&&++h,f*x>r&&--f),f<h&&.5<=s&&s<2?zx(e,r,s*2):[h,f,x]}function VN(e,r,s){if(r=+r,e=+e,s=+s,!(s>0))return[];if(e===r)return[e];const n=r<e,[a,l,d]=n?zx(r,e,s):zx(e,r,s);if(!(l>=a))return[];const h=l-a+1,f=new Array(h);if(n)if(d<0)for(let x=0;x<h;++x)f[x]=(l-x)/-d;else for(let x=0;x<h;++x)f[x]=(l-x)*d;else if(d<0)for(let x=0;x<h;++x)f[x]=(a+x)/-d;else for(let x=0;x<h;++x)f[x]=(a+x)*d;return f}function $N(e,r,s){return r=+r,e=+e,s=+s,zx(e,r,s)[2]}function qN(e,r,s){r=+r,e=+e,s=+s;const n=r<e,a=n?$N(r,e,s):$N(e,r,s);return(n?-1:1)*(a<0?1/-a:a)}function pT(e,r){let s;for(const n of e)n!=null&&(s<n||s===void 0&&n>=n)&&(s=n);return s}function yT(e,r){let s;for(const n of e)n!=null&&(s>n||s===void 0&&n>=n)&&(s=n);return s}function TR(e,r,s=0,n=1/0,a){if(r=Math.floor(r),s=Math.floor(Math.max(0,s)),n=Math.floor(Math.min(e.length-1,n)),!(s<=r&&r<=n))return e;for(a=a===void 0?ER:pte(a);n>s;){if(n-s>600){const f=n-s+1,x=r-s+1,p=Math.log(f),b=.5*Math.exp(2*p/3),S=.5*Math.sqrt(p*b*(f-b)/f)*(x-f/2<0?-1:1),T=Math.max(s,Math.floor(r-x*b/f+S)),A=Math.min(n,Math.floor(r+(f-x)*b/f+S));TR(e,r,T,A,a)}const l=e[r];let d=s,h=n;for(Zh(e,s,r),a(e[n],l)>0&&Zh(e,s,n);d<h;){for(Zh(e,d,h),++d,--h;a(e[d],l)<0;)++d;for(;a(e[h],l)>0;)--h}a(e[s],l)===0?Zh(e,s,h):(++h,Zh(e,h,n)),h<=r&&(s=h+1),r<=h&&(n=h-1)}return e}function Zh(e,r,s){const n=e[r];e[r]=e[s],e[s]=n}function Nte(e,r,s){if(e=Float64Array.from(hte(e)),!(!(n=e.length)||isNaN(r=+r))){if(r<=0||n<2)return yT(e);if(r>=1)return pT(e);var n,a=(n-1)*r,l=Math.floor(a),d=pT(TR(e,l).subarray(0,l+1)),h=yT(e.subarray(l+1));return d+(h-d)*(a-l)}}function jte(e,r,s=AR){if(!(!(n=e.length)||isNaN(r=+r))){if(r<=0||n<2)return+s(e[0],0,e);if(r>=1)return+s(e[n-1],n-1,e);var n,a=(n-1)*r,l=Math.floor(a),d=+s(e[l],l,e),h=+s(e[l+1],l+1,e);return d+(h-d)*(a-l)}}function wte(e,r,s){e=+e,r=+r,s=(a=arguments.length)<2?(r=e,e=0,1):a<3?1:+s;for(var n=-1,a=Math.max(0,Math.ceil((r-e)/s))|0,l=new Array(a);++n<a;)l[n]=e+n*s;return l}function Ja(e,r){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(r).domain(e);break}return this}function Wl(e,r){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}const HN=Symbol("implicit");function Rw(){var e=new gT,r=[],s=[],n=HN;function a(l){let d=e.get(l);if(d===void 0){if(n!==HN)return n;e.set(l,d=r.push(l)-1)}return s[d%s.length]}return a.domain=function(l){if(!arguments.length)return r.slice();r=[],e=new gT;for(const d of l)e.has(d)||e.set(d,r.push(d)-1);return a},a.range=function(l){return arguments.length?(s=Array.from(l),a):s.slice()},a.unknown=function(l){return arguments.length?(n=l,a):n},a.copy=function(){return Rw(r,s).unknown(n)},Ja.apply(a,arguments),a}function Mw(){var e=Rw().unknown(void 0),r=e.domain,s=e.range,n=0,a=1,l,d,h=!1,f=0,x=0,p=.5;delete e.unknown;function b(){var S=r().length,T=a<n,A=T?a:n,P=T?n:a;l=(P-A)/Math.max(1,S-f+x*2),h&&(l=Math.floor(l)),A+=(P-A-l*(S-f))*p,d=l*(1-f),h&&(A=Math.round(A),d=Math.round(d));var D=wte(S).map(function(I){return A+l*I});return s(T?D.reverse():D)}return e.domain=function(S){return arguments.length?(r(S),b()):r()},e.range=function(S){return arguments.length?([n,a]=S,n=+n,a=+a,b()):[n,a]},e.rangeRound=function(S){return[n,a]=S,n=+n,a=+a,h=!0,b()},e.bandwidth=function(){return d},e.step=function(){return l},e.round=function(S){return arguments.length?(h=!!S,b()):h},e.padding=function(S){return arguments.length?(f=Math.min(1,x=+S),b()):f},e.paddingInner=function(S){return arguments.length?(f=Math.min(1,S),b()):f},e.paddingOuter=function(S){return arguments.length?(x=+S,b()):x},e.align=function(S){return arguments.length?(p=Math.max(0,Math.min(1,S)),b()):p},e.copy=function(){return Mw(r(),[n,a]).round(h).paddingInner(f).paddingOuter(x).align(p)},Ja.apply(b(),arguments)}function DR(e){var r=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return DR(r())},e}function Ste(){return DR(Mw.apply(null,arguments).paddingInner(1))}function Lw(e,r,s){e.prototype=r.prototype=s,s.constructor=e}function OR(e,r){var s=Object.create(e.prototype);for(var n in r)s[n]=r[n];return s}function ym(){}var $0=.7,Vx=1/$0,gu="\\s*([+-]?\\d+)\\s*",q0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cte=/^#([0-9a-f]{3,8})$/,Ate=new RegExp(`^rgb\\(${gu},${gu},${gu}\\)$`),Ete=new RegExp(`^rgb\\(${Wi},${Wi},${Wi}\\)$`),Tte=new RegExp(`^rgba\\(${gu},${gu},${gu},${q0}\\)$`),Dte=new RegExp(`^rgba\\(${Wi},${Wi},${Wi},${q0}\\)$`),Ote=new RegExp(`^hsl\\(${q0},${Wi},${Wi}\\)$`),Pte=new RegExp(`^hsla\\(${q0},${Wi},${Wi},${q0}\\)$`),bT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Lw(ym,H0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vT,formatHex:vT,formatHex8:kte,formatHsl:_te,formatRgb:NT,toString:NT});function vT(){return this.rgb().formatHex()}function kte(){return this.rgb().formatHex8()}function _te(){return PR(this).formatHsl()}function NT(){return this.rgb().formatRgb()}function H0(e){var r,s;return e=(e+"").trim().toLowerCase(),(r=Cte.exec(e))?(s=r[1].length,r=parseInt(r[1],16),s===6?jT(r):s===3?new Jn(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):s===8?mg(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):s===4?mg(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=Ate.exec(e))?new Jn(r[1],r[2],r[3],1):(r=Ete.exec(e))?new Jn(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=Tte.exec(e))?mg(r[1],r[2],r[3],r[4]):(r=Dte.exec(e))?mg(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Ote.exec(e))?CT(r[1],r[2]/100,r[3]/100,1):(r=Pte.exec(e))?CT(r[1],r[2]/100,r[3]/100,r[4]):bT.hasOwnProperty(e)?jT(bT[e]):e==="transparent"?new Jn(NaN,NaN,NaN,0):null}function jT(e){return new Jn(e>>16&255,e>>8&255,e&255,1)}function mg(e,r,s,n){return n<=0&&(e=r=s=NaN),new Jn(e,r,s,n)}function Ite(e){return e instanceof ym||(e=H0(e)),e?(e=e.rgb(),new Jn(e.r,e.g,e.b,e.opacity)):new Jn}function GN(e,r,s,n){return arguments.length===1?Ite(e):new Jn(e,r,s,n??1)}function Jn(e,r,s,n){this.r=+e,this.g=+r,this.b=+s,this.opacity=+n}Lw(Jn,GN,OR(ym,{brighter(e){return e=e==null?Vx:Math.pow(Vx,e),new Jn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$0:Math.pow($0,e),new Jn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Jn(rd(this.r),rd(this.g),rd(this.b),$x(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wT,formatHex:wT,formatHex8:Rte,formatRgb:ST,toString:ST}));function wT(){return`#${Xc(this.r)}${Xc(this.g)}${Xc(this.b)}`}function Rte(){return`#${Xc(this.r)}${Xc(this.g)}${Xc(this.b)}${Xc((isNaN(this.opacity)?1:this.opacity)*255)}`}function ST(){const e=$x(this.opacity);return`${e===1?"rgb(":"rgba("}${rd(this.r)}, ${rd(this.g)}, ${rd(this.b)}${e===1?")":`, ${e})`}`}function $x(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xc(e){return e=rd(e),(e<16?"0":"")+e.toString(16)}function CT(e,r,s,n){return n<=0?e=r=s=NaN:s<=0||s>=1?e=r=NaN:r<=0&&(e=NaN),new yi(e,r,s,n)}function PR(e){if(e instanceof yi)return new yi(e.h,e.s,e.l,e.opacity);if(e instanceof ym||(e=H0(e)),!e)return new yi;if(e instanceof yi)return e;e=e.rgb();var r=e.r/255,s=e.g/255,n=e.b/255,a=Math.min(r,s,n),l=Math.max(r,s,n),d=NaN,h=l-a,f=(l+a)/2;return h?(r===l?d=(s-n)/h+(s<n)*6:s===l?d=(n-r)/h+2:d=(r-s)/h+4,h/=f<.5?l+a:2-l-a,d*=60):h=f>0&&f<1?0:d,new yi(d,h,f,e.opacity)}function Mte(e,r,s,n){return arguments.length===1?PR(e):new yi(e,r,s,n??1)}function yi(e,r,s,n){this.h=+e,this.s=+r,this.l=+s,this.opacity=+n}Lw(yi,Mte,OR(ym,{brighter(e){return e=e==null?Vx:Math.pow(Vx,e),new yi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$0:Math.pow($0,e),new yi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*r,a=2*s-n;return new Jn(Yv(e>=240?e-240:e+120,a,n),Yv(e,a,n),Yv(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new yi(AT(this.h),fg(this.s),fg(this.l),$x(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=$x(this.opacity);return`${e===1?"hsl(":"hsla("}${AT(this.h)}, ${fg(this.s)*100}%, ${fg(this.l)*100}%${e===1?")":`, ${e})`}`}}));function AT(e){return e=(e||0)%360,e<0?e+360:e}function fg(e){return Math.max(0,Math.min(1,e||0))}function Yv(e,r,s){return(e<60?r+(s-r)*e/60:e<180?s:e<240?r+(s-r)*(240-e)/60:r)*255}const Fw=e=>()=>e;function Lte(e,r){return function(s){return e+s*r}}function Fte(e,r,s){return e=Math.pow(e,s),r=Math.pow(r,s)-e,s=1/s,function(n){return Math.pow(e+n*r,s)}}function Bte(e){return(e=+e)==1?kR:function(r,s){return s-r?Fte(r,s,e):Fw(isNaN(r)?s:r)}}function kR(e,r){var s=r-e;return s?Lte(e,s):Fw(isNaN(e)?r:e)}const ET=(function e(r){var s=Bte(r);function n(a,l){var d=s((a=GN(a)).r,(l=GN(l)).r),h=s(a.g,l.g),f=s(a.b,l.b),x=kR(a.opacity,l.opacity);return function(p){return a.r=d(p),a.g=h(p),a.b=f(p),a.opacity=x(p),a+""}}return n.gamma=e,n})(1);function Ute(e,r){r||(r=[]);var s=e?Math.min(r.length,e.length):0,n=r.slice(),a;return function(l){for(a=0;a<s;++a)n[a]=e[a]*(1-l)+r[a]*l;return n}}function zte(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Vte(e,r){var s=r?r.length:0,n=e?Math.min(s,e.length):0,a=new Array(n),l=new Array(s),d;for(d=0;d<n;++d)a[d]=Gu(e[d],r[d]);for(;d<s;++d)l[d]=r[d];return function(h){for(d=0;d<n;++d)l[d]=a[d](h);return l}}function $te(e,r){var s=new Date;return e=+e,r=+r,function(n){return s.setTime(e*(1-n)+r*n),s}}function qx(e,r){return e=+e,r=+r,function(s){return e*(1-s)+r*s}}function qte(e,r){var s={},n={},a;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(a in r)a in e?s[a]=Gu(e[a],r[a]):n[a]=r[a];return function(l){for(a in s)n[a]=s[a](l);return n}}var YN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wv=new RegExp(YN.source,"g");function Hte(e){return function(){return e}}function Gte(e){return function(r){return e(r)+""}}function Yte(e,r){var s=YN.lastIndex=Wv.lastIndex=0,n,a,l,d=-1,h=[],f=[];for(e=e+"",r=r+"";(n=YN.exec(e))&&(a=Wv.exec(r));)(l=a.index)>s&&(l=r.slice(s,l),h[d]?h[d]+=l:h[++d]=l),(n=n[0])===(a=a[0])?h[d]?h[d]+=a:h[++d]=a:(h[++d]=null,f.push({i:d,x:qx(n,a)})),s=Wv.lastIndex;return s<r.length&&(l=r.slice(s),h[d]?h[d]+=l:h[++d]=l),h.length<2?f[0]?Gte(f[0].x):Hte(r):(r=f.length,function(x){for(var p=0,b;p<r;++p)h[(b=f[p]).i]=b.x(x);return h.join("")})}function Gu(e,r){var s=typeof r,n;return r==null||s==="boolean"?Fw(r):(s==="number"?qx:s==="string"?(n=H0(r))?(r=n,ET):Yte:r instanceof H0?ET:r instanceof Date?$te:zte(r)?Ute:Array.isArray(r)?Vte:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?qte:qx)(e,r)}function Bw(e,r){return e=+e,r=+r,function(s){return Math.round(e*(1-s)+r*s)}}function Wte(e,r){r===void 0&&(r=e,e=Gu);for(var s=0,n=r.length-1,a=r[0],l=new Array(n<0?0:n);s<n;)l[s]=e(a,a=r[++s]);return function(d){var h=Math.max(0,Math.min(n-1,Math.floor(d*=n)));return l[h](d-h)}}function Xte(e){return function(){return e}}function Hx(e){return+e}var TT=[0,1];function Ln(e){return e}function WN(e,r){return(r-=e=+e)?function(s){return(s-e)/r}:Xte(isNaN(r)?NaN:.5)}function Kte(e,r){var s;return e>r&&(s=e,e=r,r=s),function(n){return Math.max(e,Math.min(r,n))}}function Zte(e,r,s){var n=e[0],a=e[1],l=r[0],d=r[1];return a<n?(n=WN(a,n),l=s(d,l)):(n=WN(n,a),l=s(l,d)),function(h){return l(n(h))}}function Qte(e,r,s){var n=Math.min(e.length,r.length)-1,a=new Array(n),l=new Array(n),d=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),r=r.slice().reverse());++d<n;)a[d]=WN(e[d],e[d+1]),l[d]=s(r[d],r[d+1]);return function(h){var f=pm(e,h,1,n)-1;return l[f](a[f](h))}}function bm(e,r){return r.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Zp(){var e=TT,r=TT,s=Gu,n,a,l,d=Ln,h,f,x;function p(){var S=Math.min(e.length,r.length);return d!==Ln&&(d=Kte(e[0],e[S-1])),h=S>2?Qte:Zte,f=x=null,b}function b(S){return S==null||isNaN(S=+S)?l:(f||(f=h(e.map(n),r,s)))(n(d(S)))}return b.invert=function(S){return d(a((x||(x=h(r,e.map(n),qx)))(S)))},b.domain=function(S){return arguments.length?(e=Array.from(S,Hx),p()):e.slice()},b.range=function(S){return arguments.length?(r=Array.from(S),p()):r.slice()},b.rangeRound=function(S){return r=Array.from(S),s=Bw,p()},b.clamp=function(S){return arguments.length?(d=S?!0:Ln,p()):d!==Ln},b.interpolate=function(S){return arguments.length?(s=S,p()):s},b.unknown=function(S){return arguments.length?(l=S,b):l},function(S,T){return n=S,a=T,p()}}function Uw(){return Zp()(Ln,Ln)}function Jte(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Gx(e,r){if((s=(e=r?e.toExponential(r-1):e.toExponential()).indexOf("e"))<0)return null;var s,n=e.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+e.slice(s+1)]}function Ou(e){return e=Gx(Math.abs(e)),e?e[1]:NaN}function ere(e,r){return function(s,n){for(var a=s.length,l=[],d=0,h=e[0],f=0;a>0&&h>0&&(f+h+1>n&&(h=Math.max(1,n-f)),l.push(s.substring(a-=h,a+h)),!((f+=h+1)>n));)h=e[d=(d+1)%e.length];return l.reverse().join(r)}}function tre(e){return function(r){return r.replace(/[0-9]/g,function(s){return e[+s]})}}var rre=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function G0(e){if(!(r=rre.exec(e)))throw new Error("invalid format: "+e);var r;return new zw({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}G0.prototype=zw.prototype;function zw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}zw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function sre(e){e:for(var r=e.length,s=1,n=-1,a;s<r;++s)switch(e[s]){case".":n=a=s;break;case"0":n===0&&(n=s),a=s;break;default:if(!+e[s])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var _R;function nre(e,r){var s=Gx(e,r);if(!s)return e+"";var n=s[0],a=s[1],l=a-(_R=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,d=n.length;return l===d?n:l>d?n+new Array(l-d+1).join("0"):l>0?n.slice(0,l)+"."+n.slice(l):"0."+new Array(1-l).join("0")+Gx(e,Math.max(0,r+l-1))[0]}function DT(e,r){var s=Gx(e,r);if(!s)return e+"";var n=s[0],a=s[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const OT={"%":(e,r)=>(e*100).toFixed(r),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Jte,e:(e,r)=>e.toExponential(r),f:(e,r)=>e.toFixed(r),g:(e,r)=>e.toPrecision(r),o:e=>Math.round(e).toString(8),p:(e,r)=>DT(e*100,r),r:DT,s:nre,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function PT(e){return e}var kT=Array.prototype.map,_T=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function are(e){var r=e.grouping===void 0||e.thousands===void 0?PT:ere(kT.call(e.grouping,Number),e.thousands+""),s=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?PT:tre(kT.call(e.numerals,String)),d=e.percent===void 0?"%":e.percent+"",h=e.minus===void 0?"":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function x(b){b=G0(b);var S=b.fill,T=b.align,A=b.sign,P=b.symbol,D=b.zero,I=b.width,L=b.comma,_=b.precision,$=b.trim,F=b.type;F==="n"?(L=!0,F="g"):OT[F]||(_===void 0&&(_=12),$=!0,F="g"),(D||S==="0"&&T==="=")&&(D=!0,S="0",T="=");var B=P==="$"?s:P==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",M=P==="$"?n:/[%p]/.test(F)?d:"",V=OT[F],z=/[defgprs%]/.test(F);_=_===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function H(U){var G=B,Q=M,ce,ne,J;if(F==="c")Q=V(U)+Q,U="";else{U=+U;var W=U<0||1/U<0;if(U=isNaN(U)?f:V(Math.abs(U),_),$&&(U=sre(U)),W&&+U==0&&A!=="+"&&(W=!1),G=(W?A==="("?A:h:A==="-"||A==="("?"":A)+G,Q=(F==="s"?_T[8+_R/3]:"")+Q+(W&&A==="("?")":""),z){for(ce=-1,ne=U.length;++ce<ne;)if(J=U.charCodeAt(ce),48>J||J>57){Q=(J===46?a+U.slice(ce+1):U.slice(ce))+Q,U=U.slice(0,ce);break}}}L&&!D&&(U=r(U,1/0));var le=G.length+U.length+Q.length,ge=le<I?new Array(I-le+1).join(S):"";switch(L&&D&&(U=r(ge+U,ge.length?I-Q.length:1/0),ge=""),T){case"<":U=G+U+Q+ge;break;case"=":U=G+ge+U+Q;break;case"^":U=ge.slice(0,le=ge.length>>1)+G+U+Q+ge.slice(le);break;default:U=ge+G+U+Q;break}return l(U)}return H.toString=function(){return b+""},H}function p(b,S){var T=x((b=G0(b),b.type="f",b)),A=Math.max(-8,Math.min(8,Math.floor(Ou(S)/3)))*3,P=Math.pow(10,-A),D=_T[8+A/3];return function(I){return T(P*I)+D}}return{format:x,formatPrefix:p}}var gg,Vw,IR;ire({thousands:",",grouping:[3],currency:["$",""]});function ire(e){return gg=are(e),Vw=gg.format,IR=gg.formatPrefix,gg}function lre(e){return Math.max(0,-Ou(Math.abs(e)))}function ore(e,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ou(r)/3)))*3-Ou(Math.abs(e)))}function cre(e,r){return e=Math.abs(e),r=Math.abs(r)-e,Math.max(0,Ou(r)-Ou(e))+1}function RR(e,r,s,n){var a=qN(e,r,s),l;switch(n=G0(n??",f"),n.type){case"s":{var d=Math.max(Math.abs(e),Math.abs(r));return n.precision==null&&!isNaN(l=ore(a,d))&&(n.precision=l),IR(n,d)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(l=cre(a,Math.max(Math.abs(e),Math.abs(r))))&&(n.precision=l-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(l=lre(a))&&(n.precision=l-(n.type==="%")*2);break}}return Vw(n)}function nc(e){var r=e.domain;return e.ticks=function(s){var n=r();return VN(n[0],n[n.length-1],s??10)},e.tickFormat=function(s,n){var a=r();return RR(a[0],a[a.length-1],s??10,n)},e.nice=function(s){s==null&&(s=10);var n=r(),a=0,l=n.length-1,d=n[a],h=n[l],f,x,p=10;for(h<d&&(x=d,d=h,h=x,x=a,a=l,l=x);p-- >0;){if(x=$N(d,h,s),x===f)return n[a]=d,n[l]=h,r(n);if(x>0)d=Math.floor(d/x)*x,h=Math.ceil(h/x)*x;else if(x<0)d=Math.ceil(d*x)/x,h=Math.floor(h*x)/x;else break;f=x}return e},e}function MR(){var e=Uw();return e.copy=function(){return bm(e,MR())},Ja.apply(e,arguments),nc(e)}function LR(e){var r;function s(n){return n==null||isNaN(n=+n)?r:n}return s.invert=s,s.domain=s.range=function(n){return arguments.length?(e=Array.from(n,Hx),s):e.slice()},s.unknown=function(n){return arguments.length?(r=n,s):r},s.copy=function(){return LR(e).unknown(r)},e=arguments.length?Array.from(e,Hx):[0,1],nc(s)}function FR(e,r){e=e.slice();var s=0,n=e.length-1,a=e[s],l=e[n],d;return l<a&&(d=s,s=n,n=d,d=a,a=l,l=d),e[s]=r.floor(a),e[n]=r.ceil(l),e}function IT(e){return Math.log(e)}function RT(e){return Math.exp(e)}function dre(e){return-Math.log(-e)}function ure(e){return-Math.exp(-e)}function hre(e){return isFinite(e)?+("1e"+e):e<0?0:e}function mre(e){return e===10?hre:e===Math.E?Math.exp:r=>Math.pow(e,r)}function fre(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),r=>Math.log(r)/e)}function MT(e){return(r,s)=>-e(-r,s)}function $w(e){const r=e(IT,RT),s=r.domain;let n=10,a,l;function d(){return a=fre(n),l=mre(n),s()[0]<0?(a=MT(a),l=MT(l),e(dre,ure)):e(IT,RT),r}return r.base=function(h){return arguments.length?(n=+h,d()):n},r.domain=function(h){return arguments.length?(s(h),d()):s()},r.ticks=h=>{const f=s();let x=f[0],p=f[f.length-1];const b=p<x;b&&([x,p]=[p,x]);let S=a(x),T=a(p),A,P;const D=h==null?10:+h;let I=[];if(!(n%1)&&T-S<D){if(S=Math.floor(S),T=Math.ceil(T),x>0){for(;S<=T;++S)for(A=1;A<n;++A)if(P=S<0?A/l(-S):A*l(S),!(P<x)){if(P>p)break;I.push(P)}}else for(;S<=T;++S)for(A=n-1;A>=1;--A)if(P=S>0?A/l(-S):A*l(S),!(P<x)){if(P>p)break;I.push(P)}I.length*2<D&&(I=VN(x,p,D))}else I=VN(S,T,Math.min(T-S,D)).map(l);return b?I.reverse():I},r.tickFormat=(h,f)=>{if(h==null&&(h=10),f==null&&(f=n===10?"s":","),typeof f!="function"&&(!(n%1)&&(f=G0(f)).precision==null&&(f.trim=!0),f=Vw(f)),h===1/0)return f;const x=Math.max(1,n*h/r.ticks().length);return p=>{let b=p/l(Math.round(a(p)));return b*n<n-.5&&(b*=n),b<=x?f(p):""}},r.nice=()=>s(FR(s(),{floor:h=>l(Math.floor(a(h))),ceil:h=>l(Math.ceil(a(h)))})),r}function BR(){const e=$w(Zp()).domain([1,10]);return e.copy=()=>bm(e,BR()).base(e.base()),Ja.apply(e,arguments),e}function LT(e){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/e))}}function FT(e){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*e}}function qw(e){var r=1,s=e(LT(r),FT(r));return s.constant=function(n){return arguments.length?e(LT(r=+n),FT(r)):r},nc(s)}function UR(){var e=qw(Zp());return e.copy=function(){return bm(e,UR()).constant(e.constant())},Ja.apply(e,arguments)}function BT(e){return function(r){return r<0?-Math.pow(-r,e):Math.pow(r,e)}}function gre(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function xre(e){return e<0?-e*e:e*e}function Hw(e){var r=e(Ln,Ln),s=1;function n(){return s===1?e(Ln,Ln):s===.5?e(gre,xre):e(BT(s),BT(1/s))}return r.exponent=function(a){return arguments.length?(s=+a,n()):s},nc(r)}function Gw(){var e=Hw(Zp());return e.copy=function(){return bm(e,Gw()).exponent(e.exponent())},Ja.apply(e,arguments),e}function pre(){return Gw.apply(null,arguments).exponent(.5)}function UT(e){return Math.sign(e)*e*e}function yre(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function zR(){var e=Uw(),r=[0,1],s=!1,n;function a(l){var d=yre(e(l));return isNaN(d)?n:s?Math.round(d):d}return a.invert=function(l){return e.invert(UT(l))},a.domain=function(l){return arguments.length?(e.domain(l),a):e.domain()},a.range=function(l){return arguments.length?(e.range((r=Array.from(l,Hx)).map(UT)),a):r.slice()},a.rangeRound=function(l){return a.range(l).round(!0)},a.round=function(l){return arguments.length?(s=!!l,a):s},a.clamp=function(l){return arguments.length?(e.clamp(l),a):e.clamp()},a.unknown=function(l){return arguments.length?(n=l,a):n},a.copy=function(){return zR(e.domain(),r).round(s).clamp(e.clamp()).unknown(n)},Ja.apply(a,arguments),nc(a)}function VR(){var e=[],r=[],s=[],n;function a(){var d=0,h=Math.max(1,r.length);for(s=new Array(h-1);++d<h;)s[d-1]=jte(e,d/h);return l}function l(d){return d==null||isNaN(d=+d)?n:r[pm(s,d)]}return l.invertExtent=function(d){var h=r.indexOf(d);return h<0?[NaN,NaN]:[h>0?s[h-1]:e[0],h<s.length?s[h]:e[e.length-1]]},l.domain=function(d){if(!arguments.length)return e.slice();e=[];for(let h of d)h!=null&&!isNaN(h=+h)&&e.push(h);return e.sort(Wo),a()},l.range=function(d){return arguments.length?(r=Array.from(d),a()):r.slice()},l.unknown=function(d){return arguments.length?(n=d,l):n},l.quantiles=function(){return s.slice()},l.copy=function(){return VR().domain(e).range(r).unknown(n)},Ja.apply(l,arguments)}function $R(){var e=0,r=1,s=1,n=[.5],a=[0,1],l;function d(f){return f!=null&&f<=f?a[pm(n,f,0,s)]:l}function h(){var f=-1;for(n=new Array(s);++f<s;)n[f]=((f+1)*r-(f-s)*e)/(s+1);return d}return d.domain=function(f){return arguments.length?([e,r]=f,e=+e,r=+r,h()):[e,r]},d.range=function(f){return arguments.length?(s=(a=Array.from(f)).length-1,h()):a.slice()},d.invertExtent=function(f){var x=a.indexOf(f);return x<0?[NaN,NaN]:x<1?[e,n[0]]:x>=s?[n[s-1],r]:[n[x-1],n[x]]},d.unknown=function(f){return arguments.length&&(l=f),d},d.thresholds=function(){return n.slice()},d.copy=function(){return $R().domain([e,r]).range(a).unknown(l)},Ja.apply(nc(d),arguments)}function qR(){var e=[.5],r=[0,1],s,n=1;function a(l){return l!=null&&l<=l?r[pm(e,l,0,n)]:s}return a.domain=function(l){return arguments.length?(e=Array.from(l),n=Math.min(e.length,r.length-1),a):e.slice()},a.range=function(l){return arguments.length?(r=Array.from(l),n=Math.min(e.length,r.length-1),a):r.slice()},a.invertExtent=function(l){var d=r.indexOf(l);return[e[d-1],e[d]]},a.unknown=function(l){return arguments.length?(s=l,a):s},a.copy=function(){return qR().domain(e).range(r).unknown(s)},Ja.apply(a,arguments)}const Xv=new Date,Kv=new Date;function rn(e,r,s,n){function a(l){return e(l=arguments.length===0?new Date:new Date(+l)),l}return a.floor=l=>(e(l=new Date(+l)),l),a.ceil=l=>(e(l=new Date(l-1)),r(l,1),e(l),l),a.round=l=>{const d=a(l),h=a.ceil(l);return l-d<h-l?d:h},a.offset=(l,d)=>(r(l=new Date(+l),d==null?1:Math.floor(d)),l),a.range=(l,d,h)=>{const f=[];if(l=a.ceil(l),h=h==null?1:Math.floor(h),!(l<d)||!(h>0))return f;let x;do f.push(x=new Date(+l)),r(l,h),e(l);while(x<l&&l<d);return f},a.filter=l=>rn(d=>{if(d>=d)for(;e(d),!l(d);)d.setTime(d-1)},(d,h)=>{if(d>=d)if(h<0)for(;++h<=0;)for(;r(d,-1),!l(d););else for(;--h>=0;)for(;r(d,1),!l(d););}),s&&(a.count=(l,d)=>(Xv.setTime(+l),Kv.setTime(+d),e(Xv),e(Kv),Math.floor(s(Xv,Kv))),a.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?a.filter(n?d=>n(d)%l===0:d=>a.count(0,d)%l===0):a)),a}const Yx=rn(()=>{},(e,r)=>{e.setTime(+e+r)},(e,r)=>r-e);Yx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?rn(r=>{r.setTime(Math.floor(r/e)*e)},(r,s)=>{r.setTime(+r+s*e)},(r,s)=>(s-r)/e):Yx);Yx.range;const Dl=1e3,Ha=Dl*60,Ol=Ha*60,Vl=Ol*24,Yw=Vl*7,zT=Vl*30,Zv=Vl*365,Kc=rn(e=>{e.setTime(e-e.getMilliseconds())},(e,r)=>{e.setTime(+e+r*Dl)},(e,r)=>(r-e)/Dl,e=>e.getUTCSeconds());Kc.range;const Ww=rn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Dl)},(e,r)=>{e.setTime(+e+r*Ha)},(e,r)=>(r-e)/Ha,e=>e.getMinutes());Ww.range;const Xw=rn(e=>{e.setUTCSeconds(0,0)},(e,r)=>{e.setTime(+e+r*Ha)},(e,r)=>(r-e)/Ha,e=>e.getUTCMinutes());Xw.range;const Kw=rn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Dl-e.getMinutes()*Ha)},(e,r)=>{e.setTime(+e+r*Ol)},(e,r)=>(r-e)/Ol,e=>e.getHours());Kw.range;const Zw=rn(e=>{e.setUTCMinutes(0,0,0)},(e,r)=>{e.setTime(+e+r*Ol)},(e,r)=>(r-e)/Ol,e=>e.getUTCHours());Zw.range;const vm=rn(e=>e.setHours(0,0,0,0),(e,r)=>e.setDate(e.getDate()+r),(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Ha)/Vl,e=>e.getDate()-1);vm.range;const Qp=rn(e=>{e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r)},(e,r)=>(r-e)/Vl,e=>e.getUTCDate()-1);Qp.range;const HR=rn(e=>{e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r)},(e,r)=>(r-e)/Vl,e=>Math.floor(e/Vl));HR.range;function ud(e){return rn(r=>{r.setDate(r.getDate()-(r.getDay()+7-e)%7),r.setHours(0,0,0,0)},(r,s)=>{r.setDate(r.getDate()+s*7)},(r,s)=>(s-r-(s.getTimezoneOffset()-r.getTimezoneOffset())*Ha)/Yw)}const Jp=ud(0),Wx=ud(1),bre=ud(2),vre=ud(3),Pu=ud(4),Nre=ud(5),jre=ud(6);Jp.range;Wx.range;bre.range;vre.range;Pu.range;Nre.range;jre.range;function hd(e){return rn(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-e)%7),r.setUTCHours(0,0,0,0)},(r,s)=>{r.setUTCDate(r.getUTCDate()+s*7)},(r,s)=>(s-r)/Yw)}const ey=hd(0),Xx=hd(1),wre=hd(2),Sre=hd(3),ku=hd(4),Cre=hd(5),Are=hd(6);ey.range;Xx.range;wre.range;Sre.range;ku.range;Cre.range;Are.range;const Qw=rn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,r)=>{e.setMonth(e.getMonth()+r)},(e,r)=>r.getMonth()-e.getMonth()+(r.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Qw.range;const Jw=rn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCMonth(e.getUTCMonth()+r)},(e,r)=>r.getUTCMonth()-e.getUTCMonth()+(r.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Jw.range;const $l=rn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r)},(e,r)=>r.getFullYear()-e.getFullYear(),e=>e.getFullYear());$l.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rn(r=>{r.setFullYear(Math.floor(r.getFullYear()/e)*e),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,s)=>{r.setFullYear(r.getFullYear()+s*e)});$l.range;const ql=rn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r)},(e,r)=>r.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ql.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rn(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/e)*e),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,s)=>{r.setUTCFullYear(r.getUTCFullYear()+s*e)});ql.range;function GR(e,r,s,n,a,l){const d=[[Kc,1,Dl],[Kc,5,5*Dl],[Kc,15,15*Dl],[Kc,30,30*Dl],[l,1,Ha],[l,5,5*Ha],[l,15,15*Ha],[l,30,30*Ha],[a,1,Ol],[a,3,3*Ol],[a,6,6*Ol],[a,12,12*Ol],[n,1,Vl],[n,2,2*Vl],[s,1,Yw],[r,1,zT],[r,3,3*zT],[e,1,Zv]];function h(x,p,b){const S=p<x;S&&([x,p]=[p,x]);const T=b&&typeof b.range=="function"?b:f(x,p,b),A=T?T.range(x,+p+1):[];return S?A.reverse():A}function f(x,p,b){const S=Math.abs(p-x)/b,T=Iw(([,,D])=>D).right(d,S);if(T===d.length)return e.every(qN(x/Zv,p/Zv,b));if(T===0)return Yx.every(Math.max(qN(x,p,b),1));const[A,P]=d[S/d[T-1][2]<d[T][2]/S?T-1:T];return A.every(P)}return[h,f]}const[Ere,Tre]=GR(ql,Jw,ey,HR,Zw,Xw),[Dre,Ore]=GR($l,Qw,Jp,vm,Kw,Ww);function Qv(e){if(0<=e.y&&e.y<100){var r=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return r.setFullYear(e.y),r}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Jv(e){if(0<=e.y&&e.y<100){var r=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return r.setUTCFullYear(e.y),r}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Qh(e,r,s){return{y:e,m:r,d:s,H:0,M:0,S:0,L:0}}function Pre(e){var r=e.dateTime,s=e.date,n=e.time,a=e.periods,l=e.days,d=e.shortDays,h=e.months,f=e.shortMonths,x=Jh(a),p=e0(a),b=Jh(l),S=e0(l),T=Jh(d),A=e0(d),P=Jh(h),D=e0(h),I=Jh(f),L=e0(f),_={a:W,A:le,b:ge,B:re,c:null,d:YT,e:YT,f:ese,g:dse,G:hse,H:Zre,I:Qre,j:Jre,L:YR,m:tse,M:rse,p:X,q:ae,Q:KT,s:ZT,S:sse,u:nse,U:ase,V:ise,w:lse,W:ose,x:null,X:null,y:cse,Y:use,Z:mse,"%":XT},$={a:ve,A:fe,b:se,B:oe,c:null,d:WT,e:WT,f:pse,g:Ese,G:Dse,H:fse,I:gse,j:xse,L:XR,m:yse,M:bse,p:he,q:Ve,Q:KT,s:ZT,S:vse,u:Nse,U:jse,V:wse,w:Sse,W:Cse,x:null,X:null,y:Ase,Y:Tse,Z:Ose,"%":XT},F={a:H,A:U,b:G,B:Q,c:ce,d:HT,e:HT,f:Yre,g:qT,G:$T,H:GT,I:GT,j:$re,L:Gre,m:Vre,M:qre,p:z,q:zre,Q:Xre,s:Kre,S:Hre,u:Mre,U:Lre,V:Fre,w:Rre,W:Bre,x:ne,X:J,y:qT,Y:$T,Z:Ure,"%":Wre};_.x=B(s,_),_.X=B(n,_),_.c=B(r,_),$.x=B(s,$),$.X=B(n,$),$.c=B(r,$);function B(Ce,Ke){return function(xe){var Ee=[],pe=-1,Fe=0,me=Ce.length,Ge,Te,at;for(xe instanceof Date||(xe=new Date(+xe));++pe<me;)Ce.charCodeAt(pe)===37&&(Ee.push(Ce.slice(Fe,pe)),(Te=VT[Ge=Ce.charAt(++pe)])!=null?Ge=Ce.charAt(++pe):Te=Ge==="e"?" ":"0",(at=Ke[Ge])&&(Ge=at(xe,Te)),Ee.push(Ge),Fe=pe+1);return Ee.push(Ce.slice(Fe,pe)),Ee.join("")}}function M(Ce,Ke){return function(xe){var Ee=Qh(1900,void 0,1),pe=V(Ee,Ce,xe+="",0),Fe,me;if(pe!=xe.length)return null;if("Q"in Ee)return new Date(Ee.Q);if("s"in Ee)return new Date(Ee.s*1e3+("L"in Ee?Ee.L:0));if(Ke&&!("Z"in Ee)&&(Ee.Z=0),"p"in Ee&&(Ee.H=Ee.H%12+Ee.p*12),Ee.m===void 0&&(Ee.m="q"in Ee?Ee.q:0),"V"in Ee){if(Ee.V<1||Ee.V>53)return null;"w"in Ee||(Ee.w=1),"Z"in Ee?(Fe=Jv(Qh(Ee.y,0,1)),me=Fe.getUTCDay(),Fe=me>4||me===0?Xx.ceil(Fe):Xx(Fe),Fe=Qp.offset(Fe,(Ee.V-1)*7),Ee.y=Fe.getUTCFullYear(),Ee.m=Fe.getUTCMonth(),Ee.d=Fe.getUTCDate()+(Ee.w+6)%7):(Fe=Qv(Qh(Ee.y,0,1)),me=Fe.getDay(),Fe=me>4||me===0?Wx.ceil(Fe):Wx(Fe),Fe=vm.offset(Fe,(Ee.V-1)*7),Ee.y=Fe.getFullYear(),Ee.m=Fe.getMonth(),Ee.d=Fe.getDate()+(Ee.w+6)%7)}else("W"in Ee||"U"in Ee)&&("w"in Ee||(Ee.w="u"in Ee?Ee.u%7:"W"in Ee?1:0),me="Z"in Ee?Jv(Qh(Ee.y,0,1)).getUTCDay():Qv(Qh(Ee.y,0,1)).getDay(),Ee.m=0,Ee.d="W"in Ee?(Ee.w+6)%7+Ee.W*7-(me+5)%7:Ee.w+Ee.U*7-(me+6)%7);return"Z"in Ee?(Ee.H+=Ee.Z/100|0,Ee.M+=Ee.Z%100,Jv(Ee)):Qv(Ee)}}function V(Ce,Ke,xe,Ee){for(var pe=0,Fe=Ke.length,me=xe.length,Ge,Te;pe<Fe;){if(Ee>=me)return-1;if(Ge=Ke.charCodeAt(pe++),Ge===37){if(Ge=Ke.charAt(pe++),Te=F[Ge in VT?Ke.charAt(pe++):Ge],!Te||(Ee=Te(Ce,xe,Ee))<0)return-1}else if(Ge!=xe.charCodeAt(Ee++))return-1}return Ee}function z(Ce,Ke,xe){var Ee=x.exec(Ke.slice(xe));return Ee?(Ce.p=p.get(Ee[0].toLowerCase()),xe+Ee[0].length):-1}function H(Ce,Ke,xe){var Ee=T.exec(Ke.slice(xe));return Ee?(Ce.w=A.get(Ee[0].toLowerCase()),xe+Ee[0].length):-1}function U(Ce,Ke,xe){var Ee=b.exec(Ke.slice(xe));return Ee?(Ce.w=S.get(Ee[0].toLowerCase()),xe+Ee[0].length):-1}function G(Ce,Ke,xe){var Ee=I.exec(Ke.slice(xe));return Ee?(Ce.m=L.get(Ee[0].toLowerCase()),xe+Ee[0].length):-1}function Q(Ce,Ke,xe){var Ee=P.exec(Ke.slice(xe));return Ee?(Ce.m=D.get(Ee[0].toLowerCase()),xe+Ee[0].length):-1}function ce(Ce,Ke,xe){return V(Ce,r,Ke,xe)}function ne(Ce,Ke,xe){return V(Ce,s,Ke,xe)}function J(Ce,Ke,xe){return V(Ce,n,Ke,xe)}function W(Ce){return d[Ce.getDay()]}function le(Ce){return l[Ce.getDay()]}function ge(Ce){return f[Ce.getMonth()]}function re(Ce){return h[Ce.getMonth()]}function X(Ce){return a[+(Ce.getHours()>=12)]}function ae(Ce){return 1+~~(Ce.getMonth()/3)}function ve(Ce){return d[Ce.getUTCDay()]}function fe(Ce){return l[Ce.getUTCDay()]}function se(Ce){return f[Ce.getUTCMonth()]}function oe(Ce){return h[Ce.getUTCMonth()]}function he(Ce){return a[+(Ce.getUTCHours()>=12)]}function Ve(Ce){return 1+~~(Ce.getUTCMonth()/3)}return{format:function(Ce){var Ke=B(Ce+="",_);return Ke.toString=function(){return Ce},Ke},parse:function(Ce){var Ke=M(Ce+="",!1);return Ke.toString=function(){return Ce},Ke},utcFormat:function(Ce){var Ke=B(Ce+="",$);return Ke.toString=function(){return Ce},Ke},utcParse:function(Ce){var Ke=M(Ce+="",!0);return Ke.toString=function(){return Ce},Ke}}}var VT={"-":"",_:" ",0:"0"},un=/^\s*\d+/,kre=/^%/,_re=/[\\^$*+?|[\]().{}]/g;function Nr(e,r,s){var n=e<0?"-":"",a=(n?-e:e)+"",l=a.length;return n+(l<s?new Array(s-l+1).join(r)+a:a)}function Ire(e){return e.replace(_re,"\\$&")}function Jh(e){return new RegExp("^(?:"+e.map(Ire).join("|")+")","i")}function e0(e){return new Map(e.map((r,s)=>[r.toLowerCase(),s]))}function Rre(e,r,s){var n=un.exec(r.slice(s,s+1));return n?(e.w=+n[0],s+n[0].length):-1}function Mre(e,r,s){var n=un.exec(r.slice(s,s+1));return n?(e.u=+n[0],s+n[0].length):-1}function Lre(e,r,s){var n=un.exec(r.slice(s,s+2));return n?(e.U=+n[0],s+n[0].length):-1}function Fre(e,r,s){var n=un.exec(r.slice(s,s+2));return n?(e.V=+n[0],s+n[0].length):-1}function Bre(e,r,s){var n=un.exec(r.slice(s,s+2));return n?(e.W=+n[0],s+n[0].length):-1}function $T(e,r,s){var n=un.exec(r.slice(s,s+4));return n?(e.y=+n[0],s+n[0].length):-1}function qT(e,r,s){var n=un.exec(r.slice(s,s+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),s+n[0].length):-1}function Ure(e,r,s){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(s,s+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),s+n[0].length):-1}function zre(e,r,s){var n=un.exec(r.slice(s,s+1));return n?(e.q=n[0]*3-3,s+n[0].length):-1}function Vre(e,r,s){var n=un.exec(r.slice(s,s+2));return n?(e.m=n[0]-1,s+n[0].length):-1}function HT(e,r,s){var n=un.exec(r.slice(s,s+2));return n?(e.d=+n[0],s+n[0].length):-1}function $re(e,r,s){var n=un.exec(r.slice(s,s+3));return n?(e.m=0,e.d=+n[0],s+n[0].length):-1}function GT(e,r,s){var n=un.exec(r.slice(s,s+2));return n?(e.H=+n[0],s+n[0].length):-1}function qre(e,r,s){var n=un.exec(r.slice(s,s+2));return n?(e.M=+n[0],s+n[0].length):-1}function Hre(e,r,s){var n=un.exec(r.slice(s,s+2));return n?(e.S=+n[0],s+n[0].length):-1}function Gre(e,r,s){var n=un.exec(r.slice(s,s+3));return n?(e.L=+n[0],s+n[0].length):-1}function Yre(e,r,s){var n=un.exec(r.slice(s,s+6));return n?(e.L=Math.floor(n[0]/1e3),s+n[0].length):-1}function Wre(e,r,s){var n=kre.exec(r.slice(s,s+1));return n?s+n[0].length:-1}function Xre(e,r,s){var n=un.exec(r.slice(s));return n?(e.Q=+n[0],s+n[0].length):-1}function Kre(e,r,s){var n=un.exec(r.slice(s));return n?(e.s=+n[0],s+n[0].length):-1}function YT(e,r){return Nr(e.getDate(),r,2)}function Zre(e,r){return Nr(e.getHours(),r,2)}function Qre(e,r){return Nr(e.getHours()%12||12,r,2)}function Jre(e,r){return Nr(1+vm.count($l(e),e),r,3)}function YR(e,r){return Nr(e.getMilliseconds(),r,3)}function ese(e,r){return YR(e,r)+"000"}function tse(e,r){return Nr(e.getMonth()+1,r,2)}function rse(e,r){return Nr(e.getMinutes(),r,2)}function sse(e,r){return Nr(e.getSeconds(),r,2)}function nse(e){var r=e.getDay();return r===0?7:r}function ase(e,r){return Nr(Jp.count($l(e)-1,e),r,2)}function WR(e){var r=e.getDay();return r>=4||r===0?Pu(e):Pu.ceil(e)}function ise(e,r){return e=WR(e),Nr(Pu.count($l(e),e)+($l(e).getDay()===4),r,2)}function lse(e){return e.getDay()}function ose(e,r){return Nr(Wx.count($l(e)-1,e),r,2)}function cse(e,r){return Nr(e.getFullYear()%100,r,2)}function dse(e,r){return e=WR(e),Nr(e.getFullYear()%100,r,2)}function use(e,r){return Nr(e.getFullYear()%1e4,r,4)}function hse(e,r){var s=e.getDay();return e=s>=4||s===0?Pu(e):Pu.ceil(e),Nr(e.getFullYear()%1e4,r,4)}function mse(e){var r=e.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+Nr(r/60|0,"0",2)+Nr(r%60,"0",2)}function WT(e,r){return Nr(e.getUTCDate(),r,2)}function fse(e,r){return Nr(e.getUTCHours(),r,2)}function gse(e,r){return Nr(e.getUTCHours()%12||12,r,2)}function xse(e,r){return Nr(1+Qp.count(ql(e),e),r,3)}function XR(e,r){return Nr(e.getUTCMilliseconds(),r,3)}function pse(e,r){return XR(e,r)+"000"}function yse(e,r){return Nr(e.getUTCMonth()+1,r,2)}function bse(e,r){return Nr(e.getUTCMinutes(),r,2)}function vse(e,r){return Nr(e.getUTCSeconds(),r,2)}function Nse(e){var r=e.getUTCDay();return r===0?7:r}function jse(e,r){return Nr(ey.count(ql(e)-1,e),r,2)}function KR(e){var r=e.getUTCDay();return r>=4||r===0?ku(e):ku.ceil(e)}function wse(e,r){return e=KR(e),Nr(ku.count(ql(e),e)+(ql(e).getUTCDay()===4),r,2)}function Sse(e){return e.getUTCDay()}function Cse(e,r){return Nr(Xx.count(ql(e)-1,e),r,2)}function Ase(e,r){return Nr(e.getUTCFullYear()%100,r,2)}function Ese(e,r){return e=KR(e),Nr(e.getUTCFullYear()%100,r,2)}function Tse(e,r){return Nr(e.getUTCFullYear()%1e4,r,4)}function Dse(e,r){var s=e.getUTCDay();return e=s>=4||s===0?ku(e):ku.ceil(e),Nr(e.getUTCFullYear()%1e4,r,4)}function Ose(){return"+0000"}function XT(){return"%"}function KT(e){return+e}function ZT(e){return Math.floor(+e/1e3)}var Wd,ZR,QR;Pse({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Pse(e){return Wd=Pre(e),ZR=Wd.format,Wd.parse,QR=Wd.utcFormat,Wd.utcParse,Wd}function kse(e){return new Date(e)}function _se(e){return e instanceof Date?+e:+new Date(+e)}function eS(e,r,s,n,a,l,d,h,f,x){var p=Uw(),b=p.invert,S=p.domain,T=x(".%L"),A=x(":%S"),P=x("%I:%M"),D=x("%I %p"),I=x("%a %d"),L=x("%b %d"),_=x("%B"),$=x("%Y");function F(B){return(f(B)<B?T:h(B)<B?A:d(B)<B?P:l(B)<B?D:n(B)<B?a(B)<B?I:L:s(B)<B?_:$)(B)}return p.invert=function(B){return new Date(b(B))},p.domain=function(B){return arguments.length?S(Array.from(B,_se)):S().map(kse)},p.ticks=function(B){var M=S();return e(M[0],M[M.length-1],B??10)},p.tickFormat=function(B,M){return M==null?F:x(M)},p.nice=function(B){var M=S();return(!B||typeof B.range!="function")&&(B=r(M[0],M[M.length-1],B??10)),B?S(FR(M,B)):p},p.copy=function(){return bm(p,eS(e,r,s,n,a,l,d,h,f,x))},p}function Ise(){return Ja.apply(eS(Dre,Ore,$l,Qw,Jp,vm,Kw,Ww,Kc,ZR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Rse(){return Ja.apply(eS(Ere,Tre,ql,Jw,ey,Qp,Zw,Xw,Kc,QR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ty(){var e=0,r=1,s,n,a,l,d=Ln,h=!1,f;function x(b){return b==null||isNaN(b=+b)?f:d(a===0?.5:(b=(l(b)-s)*a,h?Math.max(0,Math.min(1,b)):b))}x.domain=function(b){return arguments.length?([e,r]=b,s=l(e=+e),n=l(r=+r),a=s===n?0:1/(n-s),x):[e,r]},x.clamp=function(b){return arguments.length?(h=!!b,x):h},x.interpolator=function(b){return arguments.length?(d=b,x):d};function p(b){return function(S){var T,A;return arguments.length?([T,A]=S,d=b(T,A),x):[d(0),d(1)]}}return x.range=p(Gu),x.rangeRound=p(Bw),x.unknown=function(b){return arguments.length?(f=b,x):f},function(b){return l=b,s=b(e),n=b(r),a=s===n?0:1/(n-s),x}}function ac(e,r){return r.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function JR(){var e=nc(ty()(Ln));return e.copy=function(){return ac(e,JR())},Wl.apply(e,arguments)}function e7(){var e=$w(ty()).domain([1,10]);return e.copy=function(){return ac(e,e7()).base(e.base())},Wl.apply(e,arguments)}function t7(){var e=qw(ty());return e.copy=function(){return ac(e,t7()).constant(e.constant())},Wl.apply(e,arguments)}function tS(){var e=Hw(ty());return e.copy=function(){return ac(e,tS()).exponent(e.exponent())},Wl.apply(e,arguments)}function Mse(){return tS.apply(null,arguments).exponent(.5)}function r7(){var e=[],r=Ln;function s(n){if(n!=null&&!isNaN(n=+n))return r((pm(e,n,1)-1)/(e.length-1))}return s.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Wo),s},s.interpolator=function(n){return arguments.length?(r=n,s):r},s.range=function(){return e.map((n,a)=>r(a/(e.length-1)))},s.quantiles=function(n){return Array.from({length:n+1},(a,l)=>Nte(e,l/n))},s.copy=function(){return r7(r).domain(e)},Wl.apply(s,arguments)}function ry(){var e=0,r=.5,s=1,n=1,a,l,d,h,f,x=Ln,p,b=!1,S;function T(P){return isNaN(P=+P)?S:(P=.5+((P=+p(P))-l)*(n*P<n*l?h:f),x(b?Math.max(0,Math.min(1,P)):P))}T.domain=function(P){return arguments.length?([e,r,s]=P,a=p(e=+e),l=p(r=+r),d=p(s=+s),h=a===l?0:.5/(l-a),f=l===d?0:.5/(d-l),n=l<a?-1:1,T):[e,r,s]},T.clamp=function(P){return arguments.length?(b=!!P,T):b},T.interpolator=function(P){return arguments.length?(x=P,T):x};function A(P){return function(D){var I,L,_;return arguments.length?([I,L,_]=D,x=Wte(P,[I,L,_]),T):[x(0),x(.5),x(1)]}}return T.range=A(Gu),T.rangeRound=A(Bw),T.unknown=function(P){return arguments.length?(S=P,T):S},function(P){return p=P,a=P(e),l=P(r),d=P(s),h=a===l?0:.5/(l-a),f=l===d?0:.5/(d-l),n=l<a?-1:1,T}}function s7(){var e=nc(ry()(Ln));return e.copy=function(){return ac(e,s7())},Wl.apply(e,arguments)}function n7(){var e=$w(ry()).domain([.1,1,10]);return e.copy=function(){return ac(e,n7()).base(e.base())},Wl.apply(e,arguments)}function a7(){var e=qw(ry());return e.copy=function(){return ac(e,a7()).constant(e.constant())},Wl.apply(e,arguments)}function rS(){var e=Hw(ry());return e.copy=function(){return ac(e,rS()).exponent(e.exponent())},Wl.apply(e,arguments)}function Lse(){return rS.apply(null,arguments).exponent(.5)}const f0=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Mw,scaleDiverging:s7,scaleDivergingLog:n7,scaleDivergingPow:rS,scaleDivergingSqrt:Lse,scaleDivergingSymlog:a7,scaleIdentity:LR,scaleImplicit:HN,scaleLinear:MR,scaleLog:BR,scaleOrdinal:Rw,scalePoint:Ste,scalePow:Gw,scaleQuantile:VR,scaleQuantize:$R,scaleRadial:zR,scaleSequential:JR,scaleSequentialLog:e7,scaleSequentialPow:tS,scaleSequentialQuantile:r7,scaleSequentialSqrt:Mse,scaleSequentialSymlog:t7,scaleSqrt:pre,scaleSymlog:UR,scaleThreshold:qR,scaleTime:Ise,scaleUtc:Rse,tickFormat:RR},Symbol.toStringTag,{value:"Module"}));var ic=e=>e.chartData,sS=Me([ic],e=>{var r=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:r,dataStartIndex:0}}),i7=(e,r,s,n)=>n?sS(e):ic(e);function ec(e){if(Array.isArray(e)&&e.length===2){var[r,s]=e;if(cn(r)&&cn(s))return!0}return!1}function QT(e,r,s){return s?e:[Math.min(e[0],r[0]),Math.max(e[1],r[1])]}function l7(e,r){if(r&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[s,n]=e,a,l;if(cn(s))a=s;else if(typeof s=="function")return;if(cn(n))l=n;else if(typeof n=="function")return;var d=[a,l];if(ec(d))return d}}function Fse(e,r,s){if(!(!s&&r==null)){if(typeof e=="function"&&r!=null)try{var n=e(r,s);if(ec(n))return QT(n,r,s)}catch{}if(Array.isArray(e)&&e.length===2){var[a,l]=e,d,h;if(a==="auto")r!=null&&(d=Math.min(...r));else if(Bt(a))d=a;else if(typeof a=="function")try{r!=null&&(d=a(r?.[0]))}catch{}else if(typeof a=="string"&&S6.test(a)){var f=S6.exec(a);if(f==null||r==null)d=void 0;else{var x=+f[1];d=r[0]-x}}else d=r?.[0];if(l==="auto")r!=null&&(h=Math.max(...r));else if(Bt(l))h=l;else if(typeof l=="function")try{r!=null&&(h=l(r?.[1]))}catch{}else if(typeof l=="string"&&C6.test(l)){var p=C6.exec(l);if(p==null||r==null)h=void 0;else{var b=+p[1];h=r[1]+b}}else h=r?.[1];var S=[d,h];if(ec(S))return r==null?S:QT(S,r,s)}}}var Yu=1e9,Bse={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},aS,ds=!0,Za="[DecimalError] ",sd=Za+"Invalid argument: ",nS=Za+"Exponent out of range: ",Wu=Math.floor,zc=Math.pow,Use=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,pa,ln=1e7,rs=7,o7=9007199254740991,Kx=Wu(o7/rs),gt={};gt.absoluteValue=gt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};gt.comparedTo=gt.cmp=function(e){var r,s,n,a,l=this;if(e=new l.constructor(e),l.s!==e.s)return l.s||-e.s;if(l.e!==e.e)return l.e>e.e^l.s<0?1:-1;for(n=l.d.length,a=e.d.length,r=0,s=n<a?n:a;r<s;++r)if(l.d[r]!==e.d[r])return l.d[r]>e.d[r]^l.s<0?1:-1;return n===a?0:n>a^l.s<0?1:-1};gt.decimalPlaces=gt.dp=function(){var e=this,r=e.d.length-1,s=(r-e.e)*rs;if(r=e.d[r],r)for(;r%10==0;r/=10)s--;return s<0?0:s};gt.dividedBy=gt.div=function(e){return _l(this,new this.constructor(e))};gt.dividedToIntegerBy=gt.idiv=function(e){var r=this,s=r.constructor;return Gr(_l(r,new s(e),0,1),s.precision)};gt.equals=gt.eq=function(e){return!this.cmp(e)};gt.exponent=function(){return Ys(this)};gt.greaterThan=gt.gt=function(e){return this.cmp(e)>0};gt.greaterThanOrEqualTo=gt.gte=function(e){return this.cmp(e)>=0};gt.isInteger=gt.isint=function(){return this.e>this.d.length-2};gt.isNegative=gt.isneg=function(){return this.s<0};gt.isPositive=gt.ispos=function(){return this.s>0};gt.isZero=function(){return this.s===0};gt.lessThan=gt.lt=function(e){return this.cmp(e)<0};gt.lessThanOrEqualTo=gt.lte=function(e){return this.cmp(e)<1};gt.logarithm=gt.log=function(e){var r,s=this,n=s.constructor,a=n.precision,l=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(pa))throw Error(Za+"NaN");if(s.s<1)throw Error(Za+(s.s?"NaN":"-Infinity"));return s.eq(pa)?new n(0):(ds=!1,r=_l(Y0(s,l),Y0(e,l),l),ds=!0,Gr(r,a))};gt.minus=gt.sub=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?u7(r,e):c7(r,(e.s=-e.s,e))};gt.modulo=gt.mod=function(e){var r,s=this,n=s.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Za+"NaN");return s.s?(ds=!1,r=_l(s,e,0,1).times(e),ds=!0,s.minus(r)):Gr(new n(s),a)};gt.naturalExponential=gt.exp=function(){return d7(this)};gt.naturalLogarithm=gt.ln=function(){return Y0(this)};gt.negated=gt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};gt.plus=gt.add=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?c7(r,e):u7(r,(e.s=-e.s,e))};gt.precision=gt.sd=function(e){var r,s,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(sd+e);if(r=Ys(a)+1,n=a.d.length-1,s=n*rs+1,n=a.d[n],n){for(;n%10==0;n/=10)s--;for(n=a.d[0];n>=10;n/=10)s++}return e&&r>s?r:s};gt.squareRoot=gt.sqrt=function(){var e,r,s,n,a,l,d,h=this,f=h.constructor;if(h.s<1){if(!h.s)return new f(0);throw Error(Za+"NaN")}for(e=Ys(h),ds=!1,a=Math.sqrt(+h),a==0||a==1/0?(r=$i(h.d),(r.length+e)%2==0&&(r+="0"),a=Math.sqrt(r),e=Wu((e+1)/2)-(e<0||e%2),a==1/0?r="5e"+e:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),n=new f(r)):n=new f(a.toString()),s=f.precision,a=d=s+3;;)if(l=n,n=l.plus(_l(h,l,d+2)).times(.5),$i(l.d).slice(0,d)===(r=$i(n.d)).slice(0,d)){if(r=r.slice(d-3,d+1),a==d&&r=="4999"){if(Gr(l,s+1,0),l.times(l).eq(h)){n=l;break}}else if(r!="9999")break;d+=4}return ds=!0,Gr(n,s)};gt.times=gt.mul=function(e){var r,s,n,a,l,d,h,f,x,p=this,b=p.constructor,S=p.d,T=(e=new b(e)).d;if(!p.s||!e.s)return new b(0);for(e.s*=p.s,s=p.e+e.e,f=S.length,x=T.length,f<x&&(l=S,S=T,T=l,d=f,f=x,x=d),l=[],d=f+x,n=d;n--;)l.push(0);for(n=x;--n>=0;){for(r=0,a=f+n;a>n;)h=l[a]+T[n]*S[a-n-1]+r,l[a--]=h%ln|0,r=h/ln|0;l[a]=(l[a]+r)%ln|0}for(;!l[--d];)l.pop();return r?++s:l.shift(),e.d=l,e.e=s,ds?Gr(e,b.precision):e};gt.toDecimalPlaces=gt.todp=function(e,r){var s=this,n=s.constructor;return s=new n(s),e===void 0?s:(Zi(e,0,Yu),r===void 0?r=n.rounding:Zi(r,0,8),Gr(s,e+Ys(s)+1,r))};gt.toExponential=function(e,r){var s,n=this,a=n.constructor;return e===void 0?s=od(n,!0):(Zi(e,0,Yu),r===void 0?r=a.rounding:Zi(r,0,8),n=Gr(new a(n),e+1,r),s=od(n,!0,e+1)),s};gt.toFixed=function(e,r){var s,n,a=this,l=a.constructor;return e===void 0?od(a):(Zi(e,0,Yu),r===void 0?r=l.rounding:Zi(r,0,8),n=Gr(new l(a),e+Ys(a)+1,r),s=od(n.abs(),!1,e+Ys(n)+1),a.isneg()&&!a.isZero()?"-"+s:s)};gt.toInteger=gt.toint=function(){var e=this,r=e.constructor;return Gr(new r(e),Ys(e)+1,r.rounding)};gt.toNumber=function(){return+this};gt.toPower=gt.pow=function(e){var r,s,n,a,l,d,h=this,f=h.constructor,x=12,p=+(e=new f(e));if(!e.s)return new f(pa);if(h=new f(h),!h.s){if(e.s<1)throw Error(Za+"Infinity");return h}if(h.eq(pa))return h;if(n=f.precision,e.eq(pa))return Gr(h,n);if(r=e.e,s=e.d.length-1,d=r>=s,l=h.s,d){if((s=p<0?-p:p)<=o7){for(a=new f(pa),r=Math.ceil(n/rs+4),ds=!1;s%2&&(a=a.times(h),e8(a.d,r)),s=Wu(s/2),s!==0;)h=h.times(h),e8(h.d,r);return ds=!0,e.s<0?new f(pa).div(a):Gr(a,n)}}else if(l<0)throw Error(Za+"NaN");return l=l<0&&e.d[Math.max(r,s)]&1?-1:1,h.s=1,ds=!1,a=e.times(Y0(h,n+x)),ds=!0,a=d7(a),a.s=l,a};gt.toPrecision=function(e,r){var s,n,a=this,l=a.constructor;return e===void 0?(s=Ys(a),n=od(a,s<=l.toExpNeg||s>=l.toExpPos)):(Zi(e,1,Yu),r===void 0?r=l.rounding:Zi(r,0,8),a=Gr(new l(a),e,r),s=Ys(a),n=od(a,e<=s||s<=l.toExpNeg,e)),n};gt.toSignificantDigits=gt.tosd=function(e,r){var s=this,n=s.constructor;return e===void 0?(e=n.precision,r=n.rounding):(Zi(e,1,Yu),r===void 0?r=n.rounding:Zi(r,0,8)),Gr(new n(s),e,r)};gt.toString=gt.valueOf=gt.val=gt.toJSON=gt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,r=Ys(e),s=e.constructor;return od(e,r<=s.toExpNeg||r>=s.toExpPos)};function c7(e,r){var s,n,a,l,d,h,f,x,p=e.constructor,b=p.precision;if(!e.s||!r.s)return r.s||(r=new p(e)),ds?Gr(r,b):r;if(f=e.d,x=r.d,d=e.e,a=r.e,f=f.slice(),l=d-a,l){for(l<0?(n=f,l=-l,h=x.length):(n=x,a=d,h=f.length),d=Math.ceil(b/rs),h=d>h?d+1:h+1,l>h&&(l=h,n.length=1),n.reverse();l--;)n.push(0);n.reverse()}for(h=f.length,l=x.length,h-l<0&&(l=h,n=x,x=f,f=n),s=0;l;)s=(f[--l]=f[l]+x[l]+s)/ln|0,f[l]%=ln;for(s&&(f.unshift(s),++a),h=f.length;f[--h]==0;)f.pop();return r.d=f,r.e=a,ds?Gr(r,b):r}function Zi(e,r,s){if(e!==~~e||e<r||e>s)throw Error(sd+e)}function $i(e){var r,s,n,a=e.length-1,l="",d=e[0];if(a>0){for(l+=d,r=1;r<a;r++)n=e[r]+"",s=rs-n.length,s&&(l+=$o(s)),l+=n;d=e[r],n=d+"",s=rs-n.length,s&&(l+=$o(s))}else if(d===0)return"0";for(;d%10===0;)d/=10;return l+d}var _l=(function(){function e(n,a){var l,d=0,h=n.length;for(n=n.slice();h--;)l=n[h]*a+d,n[h]=l%ln|0,d=l/ln|0;return d&&n.unshift(d),n}function r(n,a,l,d){var h,f;if(l!=d)f=l>d?1:-1;else for(h=f=0;h<l;h++)if(n[h]!=a[h]){f=n[h]>a[h]?1:-1;break}return f}function s(n,a,l){for(var d=0;l--;)n[l]-=d,d=n[l]<a[l]?1:0,n[l]=d*ln+n[l]-a[l];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,l,d){var h,f,x,p,b,S,T,A,P,D,I,L,_,$,F,B,M,V,z=n.constructor,H=n.s==a.s?1:-1,U=n.d,G=a.d;if(!n.s)return new z(n);if(!a.s)throw Error(Za+"Division by zero");for(f=n.e-a.e,M=G.length,F=U.length,T=new z(H),A=T.d=[],x=0;G[x]==(U[x]||0);)++x;if(G[x]>(U[x]||0)&&--f,l==null?L=l=z.precision:d?L=l+(Ys(n)-Ys(a))+1:L=l,L<0)return new z(0);if(L=L/rs+2|0,x=0,M==1)for(p=0,G=G[0],L++;(x<F||p)&&L--;x++)_=p*ln+(U[x]||0),A[x]=_/G|0,p=_%G|0;else{for(p=ln/(G[0]+1)|0,p>1&&(G=e(G,p),U=e(U,p),M=G.length,F=U.length),$=M,P=U.slice(0,M),D=P.length;D<M;)P[D++]=0;V=G.slice(),V.unshift(0),B=G[0],G[1]>=ln/2&&++B;do p=0,h=r(G,P,M,D),h<0?(I=P[0],M!=D&&(I=I*ln+(P[1]||0)),p=I/B|0,p>1?(p>=ln&&(p=ln-1),b=e(G,p),S=b.length,D=P.length,h=r(b,P,S,D),h==1&&(p--,s(b,M<S?V:G,S))):(p==0&&(h=p=1),b=G.slice()),S=b.length,S<D&&b.unshift(0),s(P,b,D),h==-1&&(D=P.length,h=r(G,P,M,D),h<1&&(p++,s(P,M<D?V:G,D))),D=P.length):h===0&&(p++,P=[0]),A[x++]=p,h&&P[0]?P[D++]=U[$]||0:(P=[U[$]],D=1);while(($++<F||P[0]!==void 0)&&L--)}return A[0]||A.shift(),T.e=f,Gr(T,d?l+Ys(T)+1:l)}})();function d7(e,r){var s,n,a,l,d,h,f=0,x=0,p=e.constructor,b=p.precision;if(Ys(e)>16)throw Error(nS+Ys(e));if(!e.s)return new p(pa);for(ds=!1,h=b,d=new p(.03125);e.abs().gte(.1);)e=e.times(d),x+=5;for(n=Math.log(zc(2,x))/Math.LN10*2+5|0,h+=n,s=a=l=new p(pa),p.precision=h;;){if(a=Gr(a.times(e),h),s=s.times(++f),d=l.plus(_l(a,s,h)),$i(d.d).slice(0,h)===$i(l.d).slice(0,h)){for(;x--;)l=Gr(l.times(l),h);return p.precision=b,r==null?(ds=!0,Gr(l,b)):l}l=d}}function Ys(e){for(var r=e.e*rs,s=e.d[0];s>=10;s/=10)r++;return r}function e2(e,r,s){if(r>e.LN10.sd())throw ds=!0,s&&(e.precision=s),Error(Za+"LN10 precision limit exceeded");return Gr(new e(e.LN10),r)}function $o(e){for(var r="";e--;)r+="0";return r}function Y0(e,r){var s,n,a,l,d,h,f,x,p,b=1,S=10,T=e,A=T.d,P=T.constructor,D=P.precision;if(T.s<1)throw Error(Za+(T.s?"NaN":"-Infinity"));if(T.eq(pa))return new P(0);if(r==null?(ds=!1,x=D):x=r,T.eq(10))return r==null&&(ds=!0),e2(P,x);if(x+=S,P.precision=x,s=$i(A),n=s.charAt(0),l=Ys(T),Math.abs(l)<15e14){for(;n<7&&n!=1||n==1&&s.charAt(1)>3;)T=T.times(e),s=$i(T.d),n=s.charAt(0),b++;l=Ys(T),n>1?(T=new P("0."+s),l++):T=new P(n+"."+s.slice(1))}else return f=e2(P,x+2,D).times(l+""),T=Y0(new P(n+"."+s.slice(1)),x-S).plus(f),P.precision=D,r==null?(ds=!0,Gr(T,D)):T;for(h=d=T=_l(T.minus(pa),T.plus(pa),x),p=Gr(T.times(T),x),a=3;;){if(d=Gr(d.times(p),x),f=h.plus(_l(d,new P(a),x)),$i(f.d).slice(0,x)===$i(h.d).slice(0,x))return h=h.times(2),l!==0&&(h=h.plus(e2(P,x+2,D).times(l+""))),h=_l(h,new P(b),x),P.precision=D,r==null?(ds=!0,Gr(h,D)):h;h=f,a+=2}}function JT(e,r){var s,n,a;for((s=r.indexOf("."))>-1&&(r=r.replace(".","")),(n=r.search(/e/i))>0?(s<0&&(s=n),s+=+r.slice(n+1),r=r.substring(0,n)):s<0&&(s=r.length),n=0;r.charCodeAt(n)===48;)++n;for(a=r.length;r.charCodeAt(a-1)===48;)--a;if(r=r.slice(n,a),r){if(a-=n,s=s-n-1,e.e=Wu(s/rs),e.d=[],n=(s+1)%rs,s<0&&(n+=rs),n<a){for(n&&e.d.push(+r.slice(0,n)),a-=rs;n<a;)e.d.push(+r.slice(n,n+=rs));r=r.slice(n),n=rs-r.length}else n-=a;for(;n--;)r+="0";if(e.d.push(+r),ds&&(e.e>Kx||e.e<-Kx))throw Error(nS+s)}else e.s=0,e.e=0,e.d=[0];return e}function Gr(e,r,s){var n,a,l,d,h,f,x,p,b=e.d;for(d=1,l=b[0];l>=10;l/=10)d++;if(n=r-d,n<0)n+=rs,a=r,x=b[p=0];else{if(p=Math.ceil((n+1)/rs),l=b.length,p>=l)return e;for(x=l=b[p],d=1;l>=10;l/=10)d++;n%=rs,a=n-rs+d}if(s!==void 0&&(l=zc(10,d-a-1),h=x/l%10|0,f=r<0||b[p+1]!==void 0||x%l,f=s<4?(h||f)&&(s==0||s==(e.s<0?3:2)):h>5||h==5&&(s==4||f||s==6&&(n>0?a>0?x/zc(10,d-a):0:b[p-1])%10&1||s==(e.s<0?8:7))),r<1||!b[0])return f?(l=Ys(e),b.length=1,r=r-l-1,b[0]=zc(10,(rs-r%rs)%rs),e.e=Wu(-r/rs)||0):(b.length=1,b[0]=e.e=e.s=0),e;if(n==0?(b.length=p,l=1,p--):(b.length=p+1,l=zc(10,rs-n),b[p]=a>0?(x/zc(10,d-a)%zc(10,a)|0)*l:0),f)for(;;)if(p==0){(b[0]+=l)==ln&&(b[0]=1,++e.e);break}else{if(b[p]+=l,b[p]!=ln)break;b[p--]=0,l=1}for(n=b.length;b[--n]===0;)b.pop();if(ds&&(e.e>Kx||e.e<-Kx))throw Error(nS+Ys(e));return e}function u7(e,r){var s,n,a,l,d,h,f,x,p,b,S=e.constructor,T=S.precision;if(!e.s||!r.s)return r.s?r.s=-r.s:r=new S(e),ds?Gr(r,T):r;if(f=e.d,b=r.d,n=r.e,x=e.e,f=f.slice(),d=x-n,d){for(p=d<0,p?(s=f,d=-d,h=b.length):(s=b,n=x,h=f.length),a=Math.max(Math.ceil(T/rs),h)+2,d>a&&(d=a,s.length=1),s.reverse(),a=d;a--;)s.push(0);s.reverse()}else{for(a=f.length,h=b.length,p=a<h,p&&(h=a),a=0;a<h;a++)if(f[a]!=b[a]){p=f[a]<b[a];break}d=0}for(p&&(s=f,f=b,b=s,r.s=-r.s),h=f.length,a=b.length-h;a>0;--a)f[h++]=0;for(a=b.length;a>d;){if(f[--a]<b[a]){for(l=a;l&&f[--l]===0;)f[l]=ln-1;--f[l],f[a]+=ln}f[a]-=b[a]}for(;f[--h]===0;)f.pop();for(;f[0]===0;f.shift())--n;return f[0]?(r.d=f,r.e=n,ds?Gr(r,T):r):new S(0)}function od(e,r,s){var n,a=Ys(e),l=$i(e.d),d=l.length;return r?(s&&(n=s-d)>0?l=l.charAt(0)+"."+l.slice(1)+$o(n):d>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(a<0?"e":"e+")+a):a<0?(l="0."+$o(-a-1)+l,s&&(n=s-d)>0&&(l+=$o(n))):a>=d?(l+=$o(a+1-d),s&&(n=s-a-1)>0&&(l=l+"."+$o(n))):((n=a+1)<d&&(l=l.slice(0,n)+"."+l.slice(n)),s&&(n=s-d)>0&&(a+1===d&&(l+="."),l+=$o(n))),e.s<0?"-"+l:l}function e8(e,r){if(e.length>r)return e.length=r,!0}function h7(e){var r,s,n;function a(l){var d=this;if(!(d instanceof a))return new a(l);if(d.constructor=a,l instanceof a){d.s=l.s,d.e=l.e,d.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(sd+l);if(l>0)d.s=1;else if(l<0)l=-l,d.s=-1;else{d.s=0,d.e=0,d.d=[0];return}if(l===~~l&&l<1e7){d.e=0,d.d=[l];return}return JT(d,l.toString())}else if(typeof l!="string")throw Error(sd+l);if(l.charCodeAt(0)===45?(l=l.slice(1),d.s=-1):d.s=1,Use.test(l))JT(d,l);else throw Error(sd+l)}if(a.prototype=gt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=h7,a.config=a.set=zse,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<n.length;)e.hasOwnProperty(s=n[r++])||(e[s]=this[s]);return a.config(e),a}function zse(e){if(!e||typeof e!="object")throw Error(Za+"Object expected");var r,s,n,a=["precision",1,Yu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(r=0;r<a.length;r+=3)if((n=e[s=a[r]])!==void 0)if(Wu(n)===n&&n>=a[r+1]&&n<=a[r+2])this[s]=n;else throw Error(sd+s+": "+n);if((n=e[s="LN10"])!==void 0)if(n==Math.LN10)this[s]=new this(n);else throw Error(sd+s+": "+n);return this}var aS=h7(Bse);pa=new aS(1);const _r=aS;var Vse=e=>e,m7={},f7=e=>e===m7,t8=e=>function r(){return arguments.length===0||arguments.length===1&&f7(arguments.length<=0?void 0:arguments[0])?r:e(...arguments)},g7=(e,r)=>e===1?r:t8(function(){for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];var l=n.filter(d=>d!==m7).length;return l>=e?r(...n):g7(e-l,t8(function(){for(var d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];var x=n.map(p=>f7(p)?h.shift():p);return r(...x,...h)}))}),$se=e=>g7(e.length,e),XN=(e,r)=>{for(var s=[],n=e;n<r;++n)s[n-e]=n;return s},qse=$se((e,r)=>Array.isArray(r)?r.map(e):Object.keys(r).map(s=>r[s]).map(e)),Hse=function(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];if(!s.length)return Vse;var a=s.reverse(),l=a[0],d=a.slice(1);return function(){return d.reduce((h,f)=>f(h),l(...arguments))}},KN=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function x7(e){var r;return e===0?r=1:r=Math.floor(new _r(e).abs().log(10).toNumber())+1,r}function p7(e,r,s){for(var n=new _r(e),a=0,l=[];n.lt(r)&&a<1e5;)l.push(n.toNumber()),n=n.add(s),a++;return l}var y7=e=>{var[r,s]=e,[n,a]=[r,s];return r>s&&([n,a]=[s,r]),[n,a]},b7=(e,r,s)=>{if(e.lte(0))return new _r(0);var n=x7(e.toNumber()),a=new _r(10).pow(n),l=e.div(a),d=n!==1?.05:.1,h=new _r(Math.ceil(l.div(d).toNumber())).add(s).mul(d),f=h.mul(a);return r?new _r(f.toNumber()):new _r(Math.ceil(f.toNumber()))},Gse=(e,r,s)=>{var n=new _r(1),a=new _r(e);if(!a.isint()&&s){var l=Math.abs(e);l<1?(n=new _r(10).pow(x7(e)-1),a=new _r(Math.floor(a.div(n).toNumber())).mul(n)):l>1&&(a=new _r(Math.floor(e)))}else e===0?a=new _r(Math.floor((r-1)/2)):s||(a=new _r(Math.floor(e)));var d=Math.floor((r-1)/2),h=Hse(qse(f=>a.add(new _r(f-d).mul(n)).toNumber()),XN);return h(0,r)},v7=function(r,s,n,a){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((s-r)/(n-1)))return{step:new _r(0),tickMin:new _r(0),tickMax:new _r(0)};var d=b7(new _r(s).sub(r).div(n-1),a,l),h;r<=0&&s>=0?h=new _r(0):(h=new _r(r).add(s).div(2),h=h.sub(new _r(h).mod(d)));var f=Math.ceil(h.sub(r).div(d).toNumber()),x=Math.ceil(new _r(s).sub(h).div(d).toNumber()),p=f+x+1;return p>n?v7(r,s,n,a,l+1):(p<n&&(x=s>0?x+(n-p):x,f=s>0?f:f+(n-p)),{step:d,tickMin:h.sub(new _r(f).mul(d)),tickMax:h.add(new _r(x).mul(d))})},Yse=function(r){var[s,n]=r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=Math.max(a,2),[h,f]=y7([s,n]);if(h===-1/0||f===1/0){var x=f===1/0?[h,...XN(0,a-1).map(()=>1/0)]:[...XN(0,a-1).map(()=>-1/0),f];return s>n?KN(x):x}if(h===f)return Gse(h,a,l);var{step:p,tickMin:b,tickMax:S}=v7(h,f,d,l,0),T=p7(b,S.add(new _r(.1).mul(p)),p);return s>n?KN(T):T},Wse=function(r,s){var[n,a]=r,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[d,h]=y7([n,a]);if(d===-1/0||h===1/0)return[n,a];if(d===h)return[d];var f=Math.max(s,2),x=b7(new _r(h).sub(d).div(f-1),l,0),p=[...p7(new _r(d),new _r(h),x),h];return l===!1&&(p=p.map(b=>Math.round(b))),n>a?KN(p):p},Xse=e=>e.rootProps.barCategoryGap,Nm=e=>e.rootProps.stackOffset,N7=e=>e.rootProps.reverseStackOrder,iS=e=>e.options.chartName,lS=e=>e.rootProps.syncId,j7=e=>e.rootProps.syncMethod,oS=e=>e.options.eventEmitter,bi={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Tl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},xa={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},sy=(e,r)=>{if(!(!e||!r))return e!=null&&e.reversed?[r[1],r[0]]:r},Kse={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Tl.angleAxisId,includeHidden:!1,name:void 0,reversed:Tl.reversed,scale:Tl.scale,tick:Tl.tick,tickCount:void 0,ticks:void 0,type:Tl.type,unit:void 0},Zse={allowDataOverflow:xa.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:xa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xa.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xa.scale,tick:xa.tick,tickCount:xa.tickCount,ticks:void 0,type:xa.type,unit:void 0},Qse={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Tl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Tl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Tl.scale,tick:Tl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Jse={allowDataOverflow:xa.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:xa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xa.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xa.scale,tick:xa.tick,tickCount:xa.tickCount,ticks:void 0,type:"category",unit:void 0},cS=(e,r)=>e.polarAxis.angleAxis[r]!=null?e.polarAxis.angleAxis[r]:e.layout.layoutType==="radial"?Qse:Kse,dS=(e,r)=>e.polarAxis.radiusAxis[r]!=null?e.polarAxis.radiusAxis[r]:e.layout.layoutType==="radial"?Jse:Zse,ny=e=>e.polarOptions,uS=Me([Gl,Yl,dn],NR),w7=Me([ny,uS],(e,r)=>{if(e!=null)return va(e.innerRadius,r,0)}),S7=Me([ny,uS],(e,r)=>{if(e!=null)return va(e.outerRadius,r,r*.8)}),ene=e=>{if(e==null)return[0,0];var{startAngle:r,endAngle:s}=e;return[r,s]},C7=Me([ny],ene);Me([cS,C7],sy);var A7=Me([uS,w7,S7],(e,r,s)=>{if(!(e==null||r==null||s==null))return[r,s]});Me([dS,A7],sy);var E7=Me([Kr,ny,w7,S7,Gl,Yl],(e,r,s,n,a,l)=>{if(!(e!=="centric"&&e!=="radial"||r==null||s==null||n==null)){var{cx:d,cy:h,startAngle:f,endAngle:x}=r;return{cx:va(d,a,a/2),cy:va(h,l,l/2),innerRadius:s,outerRadius:n,startAngle:f,endAngle:x,clockWise:!1}}}),fs=(e,r)=>r,jm=(e,r,s)=>s;function T7(e){return e?.id}function D7(e,r,s){var{chartData:n=[]}=r,{allowDuplicatedCategory:a,dataKey:l}=s,d=new Map;return e.forEach(h=>{var f,x=(f=h.data)!==null&&f!==void 0?f:n;if(!(x==null||x.length===0)){var p=T7(h);x.forEach((b,S)=>{var T=l==null||a?S:String(Is(b,l,null)),A=Is(b,h.dataKey,0),P;d.has(T)?P=d.get(T):P={},Object.assign(P,{[p]:A}),d.set(T,P)})}}),Array.from(d.values())}function hS(e){return e.stackId!=null&&e.dataKey!=null}var ay=(e,r)=>e===r?!0:e==null||r==null?!1:e[0]===r[0]&&e[1]===r[1];function iy(e,r){return Array.isArray(e)&&Array.isArray(r)&&e.length===0&&r.length===0?!0:e===r}function tne(e,r){if(e.length===r.length){for(var s=0;s<e.length;s++)if(e[s]!==r[s])return!1;return!0}return!1}var sn=e=>{var r=Kr(e);return r==="horizontal"?"xAxis":r==="vertical"?"yAxis":r==="centric"?"angleAxis":"radiusAxis"},Xu=e=>e.tooltip.settings.axisId;function r8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Zx(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?r8(Object(s),!0).forEach(function(n){rne(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function rne(e,r,s){return(r=sne(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function sne(e){var r=nne(e,"string");return typeof r=="symbol"?r:r+""}function nne(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var ZN=[0,"auto"],ane={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},ine=(e,r)=>e.cartesianAxis.xAxis[r],lc=(e,r)=>{var s=ine(e,r);return s??ane},lne={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ZN,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:gm},one=(e,r)=>e.cartesianAxis.yAxis[r],oc=(e,r)=>{var s=one(e,r);return s??lne},cne={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},mS=(e,r)=>{var s=e.cartesianAxis.zAxis[r];return s??cne},ps=(e,r,s)=>{switch(r){case"xAxis":return lc(e,s);case"yAxis":return oc(e,s);case"zAxis":return mS(e,s);case"angleAxis":return cS(e,s);case"radiusAxis":return dS(e,s);default:throw new Error("Unexpected axis type: ".concat(r))}},dne=(e,r,s)=>{switch(r){case"xAxis":return lc(e,s);case"yAxis":return oc(e,s);default:throw new Error("Unexpected axis type: ".concat(r))}},wm=(e,r,s)=>{switch(r){case"xAxis":return lc(e,s);case"yAxis":return oc(e,s);case"angleAxis":return cS(e,s);case"radiusAxis":return dS(e,s);default:throw new Error("Unexpected axis type: ".concat(r))}},O7=e=>e.graphicalItems.cartesianItems.some(r=>r.type==="bar")||e.graphicalItems.polarItems.some(r=>r.type==="radialBar");function fS(e,r){return s=>{switch(e){case"xAxis":return"xAxisId"in s&&s.xAxisId===r;case"yAxis":return"yAxisId"in s&&s.yAxisId===r;case"zAxis":return"zAxisId"in s&&s.zAxisId===r;case"angleAxis":return"angleAxisId"in s&&s.angleAxisId===r;case"radiusAxis":return"radiusAxisId"in s&&s.radiusAxisId===r;default:return!1}}}var une=e=>e.graphicalItems.cartesianItems,hne=Me([fs,jm],fS),gS=(e,r,s)=>e.filter(s).filter(n=>r?.includeHidden===!0?!0:!n.hide),Sm=Me([une,ps,hne],gS,{memoizeOptions:{resultEqualityCheck:iy}}),P7=Me([Sm],e=>e.filter(r=>r.type==="area"||r.type==="bar").filter(hS)),k7=e=>e.filter(r=>!("stackId"in r)||r.stackId===void 0),mne=Me([Sm],k7),xS=e=>e.map(r=>r.data).filter(Boolean).flat(1),fne=Me([Sm],xS,{memoizeOptions:{resultEqualityCheck:iy}}),pS=(e,r)=>{var{chartData:s=[],dataStartIndex:n,dataEndIndex:a}=r;return e.length>0?e:s.slice(n,a+1)},yS=Me([fne,i7],pS),bS=(e,r,s)=>r?.dataKey!=null?e.map(n=>({value:Is(n,r.dataKey)})):s.length>0?s.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Is(a,n)}))):e.map(n=>({value:n})),ly=Me([yS,ps,Sm],bS);function _7(e,r){switch(e){case"xAxis":return r.direction==="x";case"yAxis":return r.direction==="y";default:return!1}}function Jg(e){if(Ul(e)||e instanceof Date){var r=Number(e);if(cn(r))return r}}function s8(e){if(Array.isArray(e)){var r=[Jg(e[0]),Jg(e[1])];return ec(r)?r:void 0}var s=Jg(e);if(s!=null)return[s,s]}function Hl(e){return e.map(Jg).filter(sK)}function gne(e,r,s){return!s||typeof r!="number"||Fl(r)?[]:s.length?Hl(s.flatMap(n=>{var a=Is(e,n.dataKey),l,d;if(Array.isArray(a)?[l,d]=a:l=d=a,!(!cn(l)||!cn(d)))return[r-l,r+d]})):[]}var nn=e=>{var r=sn(e),s=Xu(e);return wm(e,r,s)},Cm=Me([nn],e=>e?.dataKey),xne=Me([P7,i7,nn],D7),I7=(e,r,s,n)=>{var a={},l=r.reduce((d,h)=>(h.stackId==null||(d[h.stackId]==null&&(d[h.stackId]=[]),d[h.stackId].push(h)),d),a);return Object.fromEntries(Object.entries(l).map(d=>{var[h,f]=d,x=n?[...f].reverse():f,p=x.map(T7);return[h,{stackedData:OQ(e,p,s),graphicalItems:x}]}))},pne=Me([xne,P7,Nm,N7],I7),R7=(e,r,s,n)=>{var{dataStartIndex:a,dataEndIndex:l}=r;if(n==null&&s!=="zAxis"){var d=_Q(e,a,l);if(!(d!=null&&d[0]===0&&d[1]===0))return d}},yne=Me([ps],e=>e.allowDataOverflow),vS=e=>{var r;if(e==null||!("domain"in e))return ZN;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var s=Hl(e.ticks);return[Math.min(...s),Math.max(...s)]}if(e.type==="category")return e.ticks.map(String)}return(r=e?.domain)!==null&&r!==void 0?r:ZN},NS=Me([ps],vS),jS=Me([NS,yne],l7),bne=Me([pne,ic,fs,jS],R7,{memoizeOptions:{resultEqualityCheck:ay}}),oy=e=>e.errorBars,vne=(e,r,s)=>e.flatMap(n=>r[n.id]).filter(Boolean).filter(n=>_7(s,n)),Qx=function(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];var a=s.filter(Boolean);if(a.length!==0){var l=a.flat(),d=Math.min(...l),h=Math.max(...l);return[d,h]}},wS=(e,r,s,n,a)=>{var l,d;if(s.length>0&&e.forEach(h=>{s.forEach(f=>{var x,p,b=(x=n[f.id])===null||x===void 0?void 0:x.filter(I=>_7(a,I)),S=Is(h,(p=r.dataKey)!==null&&p!==void 0?p:f.dataKey),T=gne(h,S,b);if(T.length>=2){var A=Math.min(...T),P=Math.max(...T);(l==null||A<l)&&(l=A),(d==null||P>d)&&(d=P)}var D=s8(S);D!=null&&(l=l==null?D[0]:Math.min(l,D[0]),d=d==null?D[1]:Math.max(d,D[1]))})}),r?.dataKey!=null&&e.forEach(h=>{var f=s8(Is(h,r.dataKey));f!=null&&(l=l==null?f[0]:Math.min(l,f[0]),d=d==null?f[1]:Math.max(d,f[1]))}),cn(l)&&cn(d))return[l,d]},Nne=Me([yS,ps,mne,oy,fs],wS,{memoizeOptions:{resultEqualityCheck:ay}});function jne(e){var{value:r}=e;if(Ul(r)||r instanceof Date)return r}var wne=(e,r,s)=>{var n=e.map(jne).filter(a=>a!=null);return s&&(r.dataKey==null||r.allowDuplicatedCategory&&rI(n))?CR(0,e.length):r.allowDuplicatedCategory?n:Array.from(new Set(n))},M7=e=>e.referenceElements.dots,Ku=(e,r,s)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>r==="xAxis"?n.xAxisId===s:n.yAxisId===s),Sne=Me([M7,fs,jm],Ku),L7=e=>e.referenceElements.areas,Cne=Me([L7,fs,jm],Ku),F7=e=>e.referenceElements.lines,Ane=Me([F7,fs,jm],Ku),B7=(e,r)=>{var s=Hl(e.map(n=>r==="xAxis"?n.x:n.y));if(s.length!==0)return[Math.min(...s),Math.max(...s)]},Ene=Me(Sne,fs,B7),U7=(e,r)=>{var s=Hl(e.flatMap(n=>[r==="xAxis"?n.x1:n.y1,r==="xAxis"?n.x2:n.y2]));if(s.length!==0)return[Math.min(...s),Math.max(...s)]},Tne=Me([Cne,fs],U7);function Dne(e){var r;if(e.x!=null)return Hl([e.x]);var s=(r=e.segment)===null||r===void 0?void 0:r.map(n=>n.x);return s==null||s.length===0?[]:Hl(s)}function One(e){var r;if(e.y!=null)return Hl([e.y]);var s=(r=e.segment)===null||r===void 0?void 0:r.map(n=>n.y);return s==null||s.length===0?[]:Hl(s)}var z7=(e,r)=>{var s=e.flatMap(n=>r==="xAxis"?Dne(n):One(n));if(s.length!==0)return[Math.min(...s),Math.max(...s)]},Pne=Me([Ane,fs],z7),kne=Me(Ene,Pne,Tne,(e,r,s)=>Qx(e,s,r)),SS=(e,r,s,n,a,l,d,h)=>{if(s!=null)return s;var f=d==="vertical"&&h==="xAxis"||d==="horizontal"&&h==="yAxis",x=f?Qx(n,l,a):Qx(l,a);return Fse(r,x,e.allowDataOverflow)},_ne=Me([ps,NS,jS,bne,Nne,kne,Kr,fs],SS,{memoizeOptions:{resultEqualityCheck:ay}}),Ine=[0,1],CS=(e,r,s,n,a,l,d)=>{if(!((e==null||s==null||s.length===0)&&d===void 0)){var{dataKey:h,type:f}=e,x=dd(r,l);if(x&&h==null){var p;return CR(0,(p=s?.length)!==null&&p!==void 0?p:0)}return f==="category"?wne(n,e,x):a==="expand"?Ine:d}},AS=Me([ps,Kr,yS,ly,Nm,fs,_ne],CS),V7=(e,r,s,n,a)=>{if(e!=null){var{scale:l,type:d}=e;if(l==="auto")return r==="radial"&&a==="radiusAxis"?"band":r==="radial"&&a==="angleAxis"?"linear":d==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!s)?"point":d==="category"?"band":"linear";if(typeof l=="string"){var h="scale".concat(dm(l));return h in f0?h:"point"}}},Zu=Me([ps,Kr,O7,iS,fs],V7);function Rne(e){if(e!=null){if(e in f0)return f0[e]();var r="scale".concat(dm(e));if(r in f0)return f0[r]()}}function ES(e,r,s,n){if(!(s==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(s).range(n);var a=Rne(r);if(a!=null){var l=a.domain(s).range(n);return AQ(l),l}}}var TS=(e,r,s)=>{var n=vS(r);if(!(s!=="auto"&&s!=="linear")){if(r!=null&&r.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&ec(e))return Yse(e,r.tickCount,r.allowDecimals);if(r!=null&&r.tickCount&&r.type==="number"&&ec(e))return Wse(e,r.tickCount,r.allowDecimals)}},DS=Me([AS,wm,Zu],TS),OS=(e,r,s,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&ec(r)&&Array.isArray(s)&&s.length>0){var a=r[0],l=s[0],d=r[1],h=s[s.length-1];return[Math.min(a,l),Math.max(d,h)]}return r},Mne=Me([ps,AS,DS,fs],OS),Lne=Me(ly,ps,(e,r)=>{if(!(!r||r.type!=="number")){var s=1/0,n=Array.from(Hl(e.map(h=>h.value))).sort((h,f)=>h-f);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var l=0;l<n.length-1;l++){var d=n[l+1]-n[l];s=Math.min(s,d)}return s/a}}),$7=Me(Lne,Kr,Xse,dn,(e,r,s,n)=>n,(e,r,s,n,a)=>{if(!cn(e))return 0;var l=r==="vertical"?n.height:n.width;if(a==="gap")return e*l/2;if(a==="no-gap"){var d=va(s,e*l),h=e*l/2;return h-d-(h-d)/l*d}return 0}),Fne=(e,r)=>{var s=lc(e,r);return s==null||typeof s.padding!="string"?0:$7(e,"xAxis",r,s.padding)},Bne=(e,r)=>{var s=oc(e,r);return s==null||typeof s.padding!="string"?0:$7(e,"yAxis",r,s.padding)},Une=Me(lc,Fne,(e,r)=>{var s,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:r,right:r}:{left:((s=a.left)!==null&&s!==void 0?s:0)+r,right:((n=a.right)!==null&&n!==void 0?n:0)+r}}),zne=Me(oc,Bne,(e,r)=>{var s,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:r,bottom:r}:{top:((s=a.top)!==null&&s!==void 0?s:0)+r,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+r}}),Vne=Me([dn,Une,qp,$p,(e,r,s)=>s],(e,r,s,n,a)=>{var{padding:l}=n;return a?[l.left,s.width-l.right]:[e.left+r.left,e.left+e.width-r.right]}),$ne=Me([dn,Kr,zne,qp,$p,(e,r,s)=>s],(e,r,s,n,a,l)=>{var{padding:d}=a;return l?[n.height-d.bottom,d.top]:r==="horizontal"?[e.top+e.height-s.bottom,e.top+s.top]:[e.top+s.top,e.top+e.height-s.bottom]}),Am=(e,r,s,n)=>{var a;switch(r){case"xAxis":return Vne(e,s,n);case"yAxis":return $ne(e,s,n);case"zAxis":return(a=mS(e,s))===null||a===void 0?void 0:a.range;case"angleAxis":return C7(e);case"radiusAxis":return A7(e,s);default:return}},q7=Me([ps,Am],sy),cy=Me([ps,Zu,Mne,q7],ES);Me([Sm,oy,fs],vne);function H7(e,r){return e.id<r.id?-1:e.id>r.id?1:0}var dy=(e,r)=>r,uy=(e,r,s)=>s,qne=Me(zp,dy,uy,(e,r,s)=>e.filter(n=>n.orientation===r).filter(n=>n.mirror===s).sort(H7)),Hne=Me(Vp,dy,uy,(e,r,s)=>e.filter(n=>n.orientation===r).filter(n=>n.mirror===s).sort(H7)),G7=(e,r)=>({width:e.width,height:r.height}),Gne=(e,r)=>{var s=typeof r.width=="number"?r.width:gm;return{width:s,height:e.height}};Me(dn,lc,G7);var Yne=(e,r,s)=>{switch(r){case"top":return e.top;case"bottom":return s-e.bottom;default:return 0}},Wne=(e,r,s)=>{switch(r){case"left":return e.left;case"right":return s-e.right;default:return 0}},Xne=Me(Yl,dn,qne,dy,uy,(e,r,s,n,a)=>{var l={},d;return s.forEach(h=>{var f=G7(r,h);d==null&&(d=Yne(r,n,e));var x=n==="top"&&!a||n==="bottom"&&a;l[h.id]=d-Number(x)*f.height,d+=(x?-1:1)*f.height}),l}),Kne=Me(Gl,dn,Hne,dy,uy,(e,r,s,n,a)=>{var l={},d;return s.forEach(h=>{var f=Gne(r,h);d==null&&(d=Wne(r,n,e));var x=n==="left"&&!a||n==="right"&&a;l[h.id]=d-Number(x)*f.width,d+=(x?-1:1)*f.width}),l}),Zne=(e,r)=>{var s=lc(e,r);if(s!=null)return Xne(e,s.orientation,s.mirror)};Me([dn,lc,Zne,(e,r)=>r],(e,r,s,n)=>{if(r!=null){var a=s?.[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}});var Qne=(e,r)=>{var s=oc(e,r);if(s!=null)return Kne(e,s.orientation,s.mirror)};Me([dn,oc,Qne,(e,r)=>r],(e,r,s,n)=>{if(r!=null){var a=s?.[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}});Me(dn,oc,(e,r)=>{var s=typeof r.width=="number"?r.width:gm;return{width:s,height:e.height}});var Y7=(e,r,s,n)=>{if(s!=null){var{allowDuplicatedCategory:a,type:l,dataKey:d}=s,h=dd(e,n),f=r.map(x=>x.value);if(d&&h&&l==="category"&&a&&rI(f))return f}},PS=Me([Kr,ly,ps,fs],Y7),W7=(e,r,s,n)=>{if(!(s==null||s.dataKey==null)){var{type:a,scale:l}=s,d=dd(e,n);if(d&&(a==="number"||l!=="auto"))return r.map(h=>h.value)}},kS=Me([Kr,ly,wm,fs],W7);Me([Kr,dne,Zu,cy,PS,kS,Am,DS,fs],(e,r,s,n,a,l,d,h,f)=>{if(r!=null){var x=dd(e,f);return{angle:r.angle,interval:r.interval,minTickGap:r.minTickGap,orientation:r.orientation,tick:r.tick,tickCount:r.tickCount,tickFormatter:r.tickFormatter,ticks:r.ticks,type:r.type,unit:r.unit,axisType:f,categoricalDomain:l,duplicateDomain:a,isCategorical:x,niceTicks:h,range:d,realScaleType:s,scale:n}}});var Jne=(e,r,s,n,a,l,d,h,f)=>{if(!(r==null||n==null)){var x=dd(e,f),{type:p,ticks:b,tickCount:S}=r,T=s==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,A=p==="category"&&n.bandwidth?n.bandwidth()/T:0;A=f==="angleAxis"&&l!=null&&l.length>=2?Qn(l[0]-l[1])*2*A:A;var P=b||a;if(P){var D=P.map((I,L)=>{var _=d?d.indexOf(I):I;return{index:L,coordinate:n(_)+A,value:I,offset:A}});return D.filter(I=>cn(I.coordinate))}return x&&h?h.map((I,L)=>({coordinate:n(I)+A,value:I,index:L,offset:A})).filter(I=>cn(I.coordinate)):n.ticks?n.ticks(S).map(I=>({coordinate:n(I)+A,value:I,offset:A})):n.domain().map((I,L)=>({coordinate:n(I)+A,value:d?d[I]:I,index:L,offset:A}))}};Me([Kr,wm,Zu,cy,DS,Am,PS,kS,fs],Jne);var eae=(e,r,s,n,a,l,d)=>{if(!(r==null||s==null||n==null||n[0]===n[1])){var h=dd(e,d),{tickCount:f}=r,x=0;return x=d==="angleAxis"&&n?.length>=2?Qn(n[0]-n[1])*2*x:x,h&&l?l.map((p,b)=>({coordinate:s(p)+x,value:p,index:b,offset:x})):s.ticks?s.ticks(f).map(p=>({coordinate:s(p)+x,value:p,offset:x})):s.domain().map((p,b)=>({coordinate:s(p)+x,value:a?a[p]:p,index:b,offset:x}))}};Me([Kr,wm,cy,Am,PS,kS,fs],eae);Me(ps,cy,(e,r)=>{if(!(e==null||r==null))return Zx(Zx({},e),{},{scale:r})});var tae=Me([ps,Zu,AS,q7],ES);Me((e,r,s)=>mS(e,s),tae,(e,r)=>{if(!(e==null||r==null))return Zx(Zx({},e),{},{scale:r})});var rae=Me([Kr,zp,Vp],(e,r,s)=>{switch(e){case"horizontal":return r.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return s.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),X7=e=>e.options.defaultTooltipEventType,K7=e=>e.options.validateTooltipEventTypes;function Z7(e,r,s){if(e==null)return r;var n=e?"axis":"item";return s==null?r:s.includes(n)?n:r}function _S(e,r){var s=X7(e),n=K7(e);return Z7(r,s,n)}function sae(e){return zt(r=>_S(r,e))}var Q7=(e,r)=>{var s,n=Number(r);if(!(Fl(n)||r==null))return n>=0?e==null||(s=e[n])===null||s===void 0?void 0:s.value:void 0},nae=e=>e.tooltip.settings,Ho={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},aae={itemInteraction:{click:Ho,hover:Ho},axisInteraction:{click:Ho,hover:Ho},keyboardInteraction:Ho,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},J7=ra({name:"tooltip",initialState:aae,reducers:{addTooltipEntrySettings:{reducer(e,r){e.tooltipItemPayloads.push(r.payload)},prepare:os()},replaceTooltipEntrySettings:{reducer(e,r){var{prev:s,next:n}=r.payload,a=vi(e).tooltipItemPayloads.indexOf(s);a>-1&&(e.tooltipItemPayloads[a]=n)},prepare:os()},removeTooltipEntrySettings:{reducer(e,r){var s=vi(e).tooltipItemPayloads.indexOf(r.payload);s>-1&&e.tooltipItemPayloads.splice(s,1)},prepare:os()},setTooltipSettingsState(e,r){e.settings=r.payload},setActiveMouseOverItemIndex(e,r){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=r.payload.activeIndex,e.itemInteraction.hover.dataKey=r.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=r.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=r.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,r){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=r.payload.activeIndex,e.itemInteraction.click.dataKey=r.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=r.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=r.payload.activeCoordinate},setMouseOverAxisIndex(e,r){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=r.payload.activeIndex,e.axisInteraction.hover.dataKey=r.payload.activeDataKey,e.axisInteraction.hover.coordinate=r.payload.activeCoordinate},setMouseClickAxisIndex(e,r){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=r.payload.activeIndex,e.axisInteraction.click.dataKey=r.payload.activeDataKey,e.axisInteraction.click.coordinate=r.payload.activeCoordinate},setSyncInteraction(e,r){e.syncInteraction=r.payload},setKeyboardInteraction(e,r){e.keyboardInteraction.active=r.payload.active,e.keyboardInteraction.index=r.payload.activeIndex,e.keyboardInteraction.coordinate=r.payload.activeCoordinate,e.keyboardInteraction.dataKey=r.payload.activeDataKey}}}),{addTooltipEntrySettings:iae,replaceTooltipEntrySettings:lae,removeTooltipEntrySettings:oae,setTooltipSettingsState:cae,setActiveMouseOverItemIndex:eM,mouseLeaveItem:dae,mouseLeaveChart:tM,setActiveClickItemIndex:uae,setMouseOverAxisIndex:rM,setMouseClickAxisIndex:hae,setSyncInteraction:QN,setKeyboardInteraction:JN}=J7.actions,mae=J7.reducer;function n8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function xg(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?n8(Object(s),!0).forEach(function(n){fae(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function fae(e,r,s){return(r=gae(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function gae(e){var r=xae(e,"string");return typeof r=="symbol"?r:r+""}function xae(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function pae(e,r,s){return r==="axis"?s==="click"?e.axisInteraction.click:e.axisInteraction.hover:s==="click"?e.itemInteraction.click:e.itemInteraction.hover}function yae(e){return e.index!=null}var sM=(e,r,s,n)=>{if(r==null)return Ho;var a=pae(e,r,s);if(a==null)return Ho;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var l=e.settings.active===!0;if(yae(a)){if(l)return xg(xg({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return xg(xg({},Ho),{},{coordinate:a.coordinate})};function bae(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var r=e.valueOf();return Number.isFinite(r)?r:void 0}var s=Number(e);return Number.isFinite(s)?s:void 0}function vae(e,r){var s=bae(e),n=r[0],a=r[1];if(s===void 0)return!1;var l=Math.min(n,a),d=Math.max(n,a);return s>=l&&s<=d}function Nae(e,r,s){if(s==null||r==null)return!0;var n=Is(e,r);return n==null||!ec(s)?!0:vae(n,s)}var IS=(e,r,s,n)=>{var a=e?.index;if(a==null)return null;var l=Number(a);if(!cn(l))return a;var d=0,h=1/0;r.length>0&&(h=r.length-1);var f=Math.max(d,Math.min(l,h)),x=r[f];return x==null||Nae(x,s,n)?String(f):null},nM=(e,r,s,n,a,l,d,h)=>{if(!(l==null||h==null)){var f=d[0],x=f==null?void 0:h(f.positions,l);if(x!=null)return x;var p=a?.[Number(l)];if(p)switch(s){case"horizontal":return{x:p.coordinate,y:(n.top+r)/2};default:return{x:(n.left+e)/2,y:p.coordinate}}}},aM=(e,r,s,n)=>{if(r==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return s==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(l=>{var d;return((d=l.settings)===null||d===void 0?void 0:d.dataKey)===a})},Em=e=>e.options.tooltipPayloadSearcher,Qu=e=>e.tooltip;function a8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function i8(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?a8(Object(s),!0).forEach(function(n){jae(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function jae(e,r,s){return(r=wae(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function wae(e){var r=Sae(e,"string");return typeof r=="symbol"?r:r+""}function Sae(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Cae(e,r){return e??r}var iM=(e,r,s,n,a,l,d)=>{if(!(r==null||l==null)){var{chartData:h,computedData:f,dataStartIndex:x,dataEndIndex:p}=s,b=[];return e.reduce((S,T)=>{var A,{dataDefinedOnItem:P,settings:D}=T,I=Cae(P,h),L=Array.isArray(I)?KI(I,x,p):I,_=(A=D?.dataKey)!==null&&A!==void 0?A:n,$=D?.nameKey,F;if(n&&Array.isArray(L)&&!Array.isArray(L[0])&&d==="axis"?F=rK(L,n,a):F=l(L,r,f,$),Array.isArray(F))F.forEach(M=>{var V=i8(i8({},D),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});S.push(E6({tooltipEntrySettings:V,dataKey:M.dataKey,payload:M.payload,value:Is(M.payload,M.dataKey),name:M.name}))});else{var B;S.push(E6({tooltipEntrySettings:D,dataKey:_,payload:F,value:Is(F,_),name:(B=Is(F,$))!==null&&B!==void 0?B:D?.name}))}return S},b)}},RS=Me([nn,Kr,O7,iS,sn],V7),Aae=Me([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,r)=>[...e,...r]),Eae=Me([sn,Xu],fS),Tm=Me([Aae,nn,Eae],gS,{memoizeOptions:{resultEqualityCheck:iy}}),Tae=Me([Tm],e=>e.filter(hS)),Dae=Me([Tm],xS,{memoizeOptions:{resultEqualityCheck:iy}}),Ju=Me([Dae,ic],pS),Oae=Me([Tae,ic,nn],D7),MS=Me([Ju,nn,Tm],bS),lM=Me([nn],vS),Pae=Me([nn],e=>e.allowDataOverflow),oM=Me([lM,Pae],l7),kae=Me([Tm],e=>e.filter(hS)),_ae=Me([Oae,kae,Nm,N7],I7),Iae=Me([_ae,ic,sn,oM],R7),Rae=Me([Tm],k7),Mae=Me([Ju,nn,Rae,oy,sn],wS,{memoizeOptions:{resultEqualityCheck:ay}}),Lae=Me([M7,sn,Xu],Ku),Fae=Me([Lae,sn],B7),Bae=Me([L7,sn,Xu],Ku),Uae=Me([Bae,sn],U7),zae=Me([F7,sn,Xu],Ku),Vae=Me([zae,sn],z7),$ae=Me([Fae,Vae,Uae],Qx),qae=Me([nn,lM,oM,Iae,Mae,$ae,Kr,sn],SS),Dm=Me([nn,Kr,Ju,MS,Nm,sn,qae],CS),Hae=Me([Dm,nn,RS],TS),Gae=Me([nn,Dm,Hae,sn],OS),cM=e=>{var r=sn(e),s=Xu(e),n=!1;return Am(e,r,s,n)},dM=Me([nn,cM],sy),uM=Me([nn,RS,Gae,dM],ES),Yae=Me([Kr,MS,nn,sn],Y7),Wae=Me([Kr,MS,nn,sn],W7),Xae=(e,r,s,n,a,l,d,h)=>{if(r){var{type:f}=r,x=dd(e,h);if(n){var p=s==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,b=f==="category"&&n.bandwidth?n.bandwidth()/p:0;return b=h==="angleAxis"&&a!=null&&a?.length>=2?Qn(a[0]-a[1])*2*b:b,x&&d?d.map((S,T)=>({coordinate:n(S)+b,value:S,index:T,offset:b})):n.domain().map((S,T)=>({coordinate:n(S)+b,value:l?l[S]:S,index:T,offset:b}))}}},Xl=Me([Kr,nn,RS,uM,cM,Yae,Wae,sn],Xae),LS=Me([X7,K7,nae],(e,r,s)=>Z7(s.shared,e,r)),hM=e=>e.tooltip.settings.trigger,FS=e=>e.tooltip.settings.defaultIndex,Om=Me([Qu,LS,hM,FS],sM),W0=Me([Om,Ju,Cm,Dm],IS),mM=Me([Xl,W0],Q7),fM=Me([Om],e=>{if(e)return e.dataKey}),Kae=Me([Om],e=>{if(e)return e.graphicalItemId}),gM=Me([Qu,LS,hM,FS],aM),Zae=Me([Gl,Yl,Kr,dn,Xl,FS,gM,Em],nM),Qae=Me([Om,Zae],(e,r)=>e!=null&&e.coordinate?e.coordinate:r),Jae=Me([Om],e=>e.active),eie=Me([gM,W0,ic,Cm,mM,Em,LS],iM);Me([eie],e=>{if(e!=null){var r=e.map(s=>s.payload).filter(s=>s!=null);return Array.from(new Set(r))}});function l8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function o8(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?l8(Object(s),!0).forEach(function(n){tie(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function tie(e,r,s){return(r=rie(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function rie(e){var r=sie(e,"string");return typeof r=="symbol"?r:r+""}function sie(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var nie=()=>zt(nn),aie=()=>{var e=nie(),r=zt(Xl),s=zt(uM);return A6(!e||!s?void 0:o8(o8({},e),{},{scale:s}),r)};function c8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Xd(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?c8(Object(s),!0).forEach(function(n){iie(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function iie(e,r,s){return(r=lie(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function lie(e){var r=oie(e,"string");return typeof r=="symbol"?r:r+""}function oie(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var cie=(e,r,s,n)=>{var a=r.find(l=>l&&l.index===s);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},die=(e,r,s,n)=>{var a=r.find(x=>x&&x.index===s);if(a){if(e==="centric"){var l=a.coordinate,{radius:d}=n;return Xd(Xd(Xd({},n),Gs(n.cx,n.cy,d,l)),{},{angle:l,radius:d})}var h=a.coordinate,{angle:f}=n;return Xd(Xd(Xd({},n),Gs(n.cx,n.cy,h,f)),{},{angle:f,radius:h})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function uie(e,r){var{chartX:s,chartY:n}=e;return s>=r.left&&s<=r.left+r.width&&n>=r.top&&n<=r.top+r.height}var xM=(e,r,s,n,a)=>{var l,d=-1,h=(l=r?.length)!==null&&l!==void 0?l:0;if(h<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var f=0;f<h;f++){var x=f>0?s[f-1].coordinate:s[h-1].coordinate,p=s[f].coordinate,b=f>=h-1?s[0].coordinate:s[f+1].coordinate,S=void 0;if(Qn(p-x)!==Qn(b-p)){var T=[];if(Qn(b-p)===Qn(a[1]-a[0])){S=b;var A=p+a[1]-a[0];T[0]=Math.min(A,(A+x)/2),T[1]=Math.max(A,(A+x)/2)}else{S=x;var P=b+a[1]-a[0];T[0]=Math.min(p,(P+p)/2),T[1]=Math.max(p,(P+p)/2)}var D=[Math.min(p,(S+p)/2),Math.max(p,(S+p)/2)];if(e>D[0]&&e<=D[1]||e>=T[0]&&e<=T[1]){({index:d}=s[f]);break}}else{var I=Math.min(x,b),L=Math.max(x,b);if(e>(I+p)/2&&e<=(L+p)/2){({index:d}=s[f]);break}}}else if(r){for(var _=0;_<h;_++)if(_===0&&e<=(r[_].coordinate+r[_+1].coordinate)/2||_>0&&_<h-1&&e>(r[_].coordinate+r[_-1].coordinate)/2&&e<=(r[_].coordinate+r[_+1].coordinate)/2||_===h-1&&e>(r[_].coordinate+r[_-1].coordinate)/2){({index:d}=r[_]);break}}return d},hie=()=>zt(iS),BS=(e,r)=>r,pM=(e,r,s)=>s,US=(e,r,s,n)=>n,mie=Me(Xl,e=>kp(e,r=>r.coordinate)),zS=Me([Qu,BS,pM,US],sM),VS=Me([zS,Ju,Cm,Dm],IS),fie=(e,r,s)=>{if(r!=null){var n=Qu(e);return r==="axis"?s==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:s==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},yM=Me([Qu,BS,pM,US],aM),Jx=Me([Gl,Yl,Kr,dn,Xl,US,yM,Em],nM),gie=Me([zS,Jx],(e,r)=>{var s;return(s=e.coordinate)!==null&&s!==void 0?s:r}),bM=Me([Xl,VS],Q7),xie=Me([yM,VS,ic,Cm,bM,Em,BS],iM),pie=Me([zS,VS],(e,r)=>({isActive:e.active&&r!=null,activeIndex:r})),yie=(e,r,s,n,a,l,d)=>{if(!(!e||!s||!n||!a)&&uie(e,d)){var h=IQ(e,r),f=xM(h,l,a,s,n),x=cie(r,a,f,e);return{activeIndex:String(f),activeCoordinate:x}}},bie=(e,r,s,n,a,l,d)=>{if(!(!e||!n||!a||!l||!s)){var h=ete(e,s);if(h){var f=RQ(h,r),x=xM(f,d,l,n,a),p=die(r,l,x,h);return{activeIndex:String(x),activeCoordinate:p}}}},vie=(e,r,s,n,a,l,d,h)=>{if(!(!e||!r||!n||!a||!l))return r==="horizontal"||r==="vertical"?yie(e,r,n,a,l,d,h):bie(e,r,s,n,a,l,d)},Nie=Me(e=>e.zIndex.zIndexMap,(e,r)=>r,(e,r,s)=>s,(e,r,s)=>{if(r!=null){var n=e[r];if(n!=null)return s?n.panoramaElementId:n.elementId}}),jie=Me(e=>e.zIndex.zIndexMap,e=>{var r=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(bi)),s=Array.from(new Set(r));return s.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:tne}});function d8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function u8(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?d8(Object(s),!0).forEach(function(n){wie(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function wie(e,r,s){return(r=Sie(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function Sie(e){var r=Cie(e,"string");return typeof r=="symbol"?r:r+""}function Cie(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Aie={},Eie={zIndexMap:Object.values(bi).reduce((e,r)=>u8(u8({},e),{},{[r]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),Aie)},Tie=new Set(Object.values(bi));function Die(e){return Tie.has(e)}var vM=ra({name:"zIndex",initialState:Eie,reducers:{registerZIndexPortal:{reducer:(e,r)=>{var{zIndex:s}=r.payload;e.zIndexMap[s]?e.zIndexMap[s].consumers+=1:e.zIndexMap[s]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:os()},unregisterZIndexPortal:{reducer:(e,r)=>{var{zIndex:s}=r.payload;e.zIndexMap[s]&&(e.zIndexMap[s].consumers-=1,e.zIndexMap[s].consumers<=0&&!Die(s)&&delete e.zIndexMap[s])},prepare:os()},registerZIndexPortalId:{reducer:(e,r)=>{var{zIndex:s,elementId:n,isPanorama:a}=r.payload;e.zIndexMap[s]?a?e.zIndexMap[s].panoramaElementId=n:e.zIndexMap[s].elementId=n:e.zIndexMap[s]={consumers:0,elementId:a?void 0:n,panoramaElementId:a?n:void 0}},prepare:os()},unregisterZIndexPortalId:{reducer:(e,r)=>{var{zIndex:s}=r.payload;e.zIndexMap[s]&&(r.payload.isPanorama?e.zIndexMap[s].panoramaElementId=void 0:e.zIndexMap[s].elementId=void 0)},prepare:os()}}}),{registerZIndexPortal:Oie,unregisterZIndexPortal:Pie,registerZIndexPortalId:kie,unregisterZIndexPortalId:_ie}=vM.actions,Iie=vM.reducer;function Pm(e){var{zIndex:r,children:s}=e,n=mJ(),a=n&&r!==void 0&&r!==0,l=sc(),d=Ms();v.useLayoutEffect(()=>a?(d(Oie({zIndex:r})),()=>{d(Pie({zIndex:r}))}):um,[d,r,a]);var h=zt(x=>Nie(x,r,l));if(!a)return s;if(!h)return null;var f=document.getElementById(h);return f?xj.createPortal(s,f):null}function ej(){return ej=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},ej.apply(null,arguments)}function h8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function pg(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?h8(Object(s),!0).forEach(function(n){Rie(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Rie(e,r,s){return(r=Mie(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function Mie(e){var r=Lie(e,"string");return typeof r=="symbol"?r:r+""}function Lie(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Fie(e){var{cursor:r,cursorComp:s,cursorProps:n}=e;return v.isValidElement(r)?v.cloneElement(r,n):v.createElement(s,n)}function Bie(e){var r,{coordinate:s,payload:n,index:a,offset:l,tooltipAxisBandSize:d,layout:h,cursor:f,tooltipEventType:x,chartName:p}=e,b=s,S=n,T=a;if(!f||!b||p!=="ScatterChart"&&x!=="axis")return null;var A,P,D;if(p==="ScatterChart")A=b,P=gee,D=bi.cursorLine;else if(p==="BarChart")A=xee(h,b,l,d),P=vR,D=bi.cursorRectangle;else if(h==="radial"&&nI(b)){var{cx:I,cy:L,radius:_,startAngle:$,endAngle:F}=jR(b);A={cx:I,cy:L,startAngle:$,endAngle:F,innerRadius:_,outerRadius:_},P=SR,D=bi.cursorLine}else A={points:nte(h,b,l)},P=Pw,D=bi.cursorLine;var B=typeof f=="object"&&"className"in f?f.className:void 0,M=pg(pg(pg(pg({stroke:"#ccc",pointerEvents:"none"},l),A),cN(f)),{},{payload:S,payloadIndex:T,className:Rs("recharts-tooltip-cursor",B)});return v.createElement(Pm,{zIndex:(r=e.zIndex)!==null&&r!==void 0?r:D},v.createElement(Fie,{cursor:f,cursorComp:P,cursorProps:M}))}function Uie(e){var r=aie(),s=uJ(),n=Tw(),a=hie();return r==null||s==null||n==null||a==null?null:v.createElement(Bie,ej({},e,{offset:s,layout:n,tooltipAxisBandSize:r,chartName:a}))}var NM=v.createContext(null),zie=()=>v.useContext(NM),t2={exports:{}},m8;function Vie(){return m8||(m8=1,(function(e){var r=Object.prototype.hasOwnProperty,s="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(s=!1));function a(f,x,p){this.fn=f,this.context=x,this.once=p||!1}function l(f,x,p,b,S){if(typeof p!="function")throw new TypeError("The listener must be a function");var T=new a(p,b||f,S),A=s?s+x:x;return f._events[A]?f._events[A].fn?f._events[A]=[f._events[A],T]:f._events[A].push(T):(f._events[A]=T,f._eventsCount++),f}function d(f,x){--f._eventsCount===0?f._events=new n:delete f._events[x]}function h(){this._events=new n,this._eventsCount=0}h.prototype.eventNames=function(){var x=[],p,b;if(this._eventsCount===0)return x;for(b in p=this._events)r.call(p,b)&&x.push(s?b.slice(1):b);return Object.getOwnPropertySymbols?x.concat(Object.getOwnPropertySymbols(p)):x},h.prototype.listeners=function(x){var p=s?s+x:x,b=this._events[p];if(!b)return[];if(b.fn)return[b.fn];for(var S=0,T=b.length,A=new Array(T);S<T;S++)A[S]=b[S].fn;return A},h.prototype.listenerCount=function(x){var p=s?s+x:x,b=this._events[p];return b?b.fn?1:b.length:0},h.prototype.emit=function(x,p,b,S,T,A){var P=s?s+x:x;if(!this._events[P])return!1;var D=this._events[P],I=arguments.length,L,_;if(D.fn){switch(D.once&&this.removeListener(x,D.fn,void 0,!0),I){case 1:return D.fn.call(D.context),!0;case 2:return D.fn.call(D.context,p),!0;case 3:return D.fn.call(D.context,p,b),!0;case 4:return D.fn.call(D.context,p,b,S),!0;case 5:return D.fn.call(D.context,p,b,S,T),!0;case 6:return D.fn.call(D.context,p,b,S,T,A),!0}for(_=1,L=new Array(I-1);_<I;_++)L[_-1]=arguments[_];D.fn.apply(D.context,L)}else{var $=D.length,F;for(_=0;_<$;_++)switch(D[_].once&&this.removeListener(x,D[_].fn,void 0,!0),I){case 1:D[_].fn.call(D[_].context);break;case 2:D[_].fn.call(D[_].context,p);break;case 3:D[_].fn.call(D[_].context,p,b);break;case 4:D[_].fn.call(D[_].context,p,b,S);break;default:if(!L)for(F=1,L=new Array(I-1);F<I;F++)L[F-1]=arguments[F];D[_].fn.apply(D[_].context,L)}}return!0},h.prototype.on=function(x,p,b){return l(this,x,p,b,!1)},h.prototype.once=function(x,p,b){return l(this,x,p,b,!0)},h.prototype.removeListener=function(x,p,b,S){var T=s?s+x:x;if(!this._events[T])return this;if(!p)return d(this,T),this;var A=this._events[T];if(A.fn)A.fn===p&&(!S||A.once)&&(!b||A.context===b)&&d(this,T);else{for(var P=0,D=[],I=A.length;P<I;P++)(A[P].fn!==p||S&&!A[P].once||b&&A[P].context!==b)&&D.push(A[P]);D.length?this._events[T]=D.length===1?D[0]:D:d(this,T)}return this},h.prototype.removeAllListeners=function(x){var p;return x?(p=s?s+x:x,this._events[p]&&d(this,p)):(this._events=new n,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=s,h.EventEmitter=h,e.exports=h})(t2)),t2.exports}var $ie=Vie();const qie=Qi($ie);var X0=new qie,tj="recharts.syncEvent.tooltip",f8="recharts.syncEvent.brush";function Hie(e,r){if(r){var s=Number.parseInt(r,10);if(!Fl(s))return e?.[s]}}var Gie={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},jM=ra({name:"options",initialState:Gie,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Yie=jM.reducer,{createEventEmitter:Wie}=jM.actions;function Xie(e){return e.tooltip.syncInteraction}var Kie={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},wM=ra({name:"chartData",initialState:Kie,reducers:{setChartData(e,r){if(e.chartData=r.payload,r.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}r.payload.length>0&&e.dataEndIndex!==r.payload.length-1&&(e.dataEndIndex=r.payload.length-1)},setComputedData(e,r){e.computedData=r.payload},setDataStartEndIndexes(e,r){var{startIndex:s,endIndex:n}=r.payload;s!=null&&(e.dataStartIndex=s),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:g8,setDataStartEndIndexes:Zie,setComputedData:dge}=wM.actions,Qie=wM.reducer,Jie=["x","y"];function x8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Kd(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?x8(Object(s),!0).forEach(function(n){ele(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):x8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function ele(e,r,s){return(r=tle(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function tle(e){var r=rle(e,"string");return typeof r=="symbol"?r:r+""}function rle(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function sle(e,r){if(e==null)return{};var s,n,a=nle(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function nle(e,r){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;s[n]=e[n]}return s}function ale(){var e=zt(lS),r=zt(oS),s=Ms(),n=zt(j7),a=zt(Xl),l=Tw(),d=Hp(),h=zt(f=>f.rootProps.className);v.useEffect(()=>{if(e==null)return um;var f=(x,p,b)=>{if(r!==b&&e===x){if(n==="index"){var S;if(d&&p!==null&&p!==void 0&&(S=p.payload)!==null&&S!==void 0&&S.coordinate&&p.payload.sourceViewBox){var T=p.payload.coordinate,{x:A,y:P}=T,D=sle(T,Jie),{x:I,y:L,width:_,height:$}=p.payload.sourceViewBox,F=Kd(Kd({},D),{},{x:d.x+(_?(A-I)/_:0)*d.width,y:d.y+($?(P-L)/$:0)*d.height});s(Kd(Kd({},p),{},{payload:Kd(Kd({},p.payload),{},{coordinate:F})}))}else s(p);return}if(a!=null){var B;if(typeof n=="function"){var M={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},V=n(a,M);B=a[V]}else n==="value"&&(B=a.find(J=>String(J.value)===p.payload.label));var{coordinate:z}=p.payload;if(B==null||p.payload.active===!1||z==null||d==null){s(QN({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:H,y:U}=z,G=Math.min(H,d.x+d.width),Q=Math.min(U,d.y+d.height),ce={x:l==="horizontal"?B.coordinate:G,y:l==="horizontal"?Q:B.coordinate},ne=QN({active:p.payload.active,coordinate:ce,dataKey:p.payload.dataKey,index:String(B.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});s(ne)}}};return X0.on(tj,f),()=>{X0.off(tj,f)}},[h,s,r,e,n,a,l,d])}function ile(){var e=zt(lS),r=zt(oS),s=Ms();v.useEffect(()=>{if(e==null)return um;var n=(a,l,d)=>{r!==d&&e===a&&s(Zie(l))};return X0.on(f8,n),()=>{X0.off(f8,n)}},[s,r,e])}function lle(){var e=Ms();v.useEffect(()=>{e(Wie())},[e]),ale(),ile()}function ole(e,r,s,n,a,l){var d=zt(T=>fie(T,e,r)),h=zt(oS),f=zt(lS),x=zt(j7),p=zt(Xie),b=p?.active,S=Hp();v.useEffect(()=>{if(!b&&f!=null&&h!=null){var T=QN({active:l,coordinate:s,dataKey:d,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:S,graphicalItemId:void 0});X0.emit(tj,f,T,h)}},[b,s,d,a,n,h,f,x,l,S])}function p8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function y8(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?p8(Object(s),!0).forEach(function(n){cle(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function cle(e,r,s){return(r=dle(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function dle(e){var r=ule(e,"string");return typeof r=="symbol"?r:r+""}function ule(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function hle(e){return e.dataKey}function mle(e,r){return v.isValidElement(e)?v.cloneElement(e,r):typeof e=="function"?v.createElement(e,r):v.createElement(WJ,r)}var b8=[],fle={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function rj(e){var r,s,n=Qa(e,fle),{active:a,allowEscapeViewBox:l,animationDuration:d,animationEasing:h,content:f,filterNull:x,isAnimationActive:p,offset:b,payloadUniqBy:S,position:T,reverseDirection:A,useTranslate3d:P,wrapperStyle:D,cursor:I,shared:L,trigger:_,defaultIndex:$,portal:F,axisId:B}=n,M=Ms(),V=typeof $=="number"?String($):$;v.useEffect(()=>{M(cae({shared:L,trigger:_,axisId:B,active:a,defaultIndex:V}))},[M,L,_,B,a,V]);var z=Hp(),H=gR(),U=sae(L),{activeIndex:G,isActive:Q}=(r=zt(he=>pie(he,U,_,V)))!==null&&r!==void 0?r:{},ce=zt(he=>xie(he,U,_,V)),ne=zt(he=>bM(he,U,_,V)),J=zt(he=>gie(he,U,_,V)),W=ce,le=zie(),ge=(s=a??Q)!==null&&s!==void 0?s:!1,[re,X]=vI([W,ge]),ae=U==="axis"?ne:void 0;ole(U,_,J,ae,G,ge);var ve=F??le;if(ve==null||z==null||U==null)return null;var fe=W??b8;ge||(fe=b8),x&&fe.length&&(fe=gI(fe.filter(he=>he.value!=null&&(he.hide!==!0||n.includeHidden)),S,hle));var se=fe.length>0,oe=v.createElement(tee,{allowEscapeViewBox:l,animationDuration:d,animationEasing:h,isAnimationActive:p,active:ge,coordinate:J,hasPayload:se,offset:b,position:T,reverseDirection:A,useTranslate3d:P,viewBox:z,wrapperStyle:D,lastBoundingBox:re,innerRef:X,hasPortalFromProps:!!F},mle(f,y8(y8({},n),{},{payload:fe,label:ae,active:ge,activeIndex:G,coordinate:J,accessibilityLayer:H})));return v.createElement(v.Fragment,null,xj.createPortal(oe,ve),ge&&v.createElement(Uie,{cursor:I,tooltipEventType:U,coordinate:J,payload:fe,index:G}))}var _u=e=>null;_u.displayName="Cell";function gle(e,r,s){return(r=xle(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function xle(e){var r=ple(e,"string");return typeof r=="symbol"?r:r+""}function ple(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class yle{constructor(r){gle(this,"cache",new Map),this.maxSize=r}get(r){var s=this.cache.get(r);return s!==void 0&&(this.cache.delete(r),this.cache.set(r,s)),s}set(r,s){if(this.cache.has(r))this.cache.delete(r);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(r,s)}clear(){this.cache.clear()}size(){return this.cache.size}}function v8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function ble(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?v8(Object(s),!0).forEach(function(n){vle(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function vle(e,r,s){return(r=Nle(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function Nle(e){var r=jle(e,"string");return typeof r=="symbol"?r:r+""}function jle(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var wle={cacheSize:2e3,enableCache:!0},SM=ble({},wle),N8=new yle(SM.cacheSize),Sle={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},j8="recharts_measurement_span";function Cle(e,r){var s=r.fontSize||"",n=r.fontFamily||"",a=r.fontWeight||"",l=r.fontStyle||"",d=r.letterSpacing||"",h=r.textTransform||"";return"".concat(e,"|").concat(s,"|").concat(n,"|").concat(a,"|").concat(l,"|").concat(d,"|").concat(h)}var w8=(e,r)=>{try{var s=document.getElementById(j8);s||(s=document.createElement("span"),s.setAttribute("id",j8),s.setAttribute("aria-hidden","true"),document.body.appendChild(s)),Object.assign(s.style,Sle,r),s.textContent="".concat(e);var n=s.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},S8=function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r==null||Kp.isSsr)return{width:0,height:0};if(!SM.enableCache)return w8(r,s);var n=Cle(r,s),a=N8.get(n);if(a)return a;var l=w8(r,s);return N8.set(n,l),l},C8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,A8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ale=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Ele=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Tle=Object.keys(CM),du="NaN";function Dle(e,r){return e*CM[r]}class Kn{static parse(r){var s,[,n,a]=(s=Ele.exec(r))!==null&&s!==void 0?s:[];return new Kn(parseFloat(n),a??"")}constructor(r,s){this.num=r,this.unit=s,this.num=r,this.unit=s,Fl(r)&&(this.unit=""),s!==""&&!Ale.test(s)&&(this.num=NaN,this.unit=""),Tle.includes(s)&&(this.num=Dle(r,s),this.unit="px")}add(r){return this.unit!==r.unit?new Kn(NaN,""):new Kn(this.num+r.num,this.unit)}subtract(r){return this.unit!==r.unit?new Kn(NaN,""):new Kn(this.num-r.num,this.unit)}multiply(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new Kn(NaN,""):new Kn(this.num*r.num,this.unit||r.unit)}divide(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new Kn(NaN,""):new Kn(this.num/r.num,this.unit||r.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Fl(this.num)}}function AM(e){if(e.includes(du))return du;for(var r=e;r.includes("*")||r.includes("/");){var s,[,n,a,l]=(s=C8.exec(r))!==null&&s!==void 0?s:[],d=Kn.parse(n??""),h=Kn.parse(l??""),f=a==="*"?d.multiply(h):d.divide(h);if(f.isNaN())return du;r=r.replace(C8,f.toString())}for(;r.includes("+")||/.-\d+(?:\.\d+)?/.test(r);){var x,[,p,b,S]=(x=A8.exec(r))!==null&&x!==void 0?x:[],T=Kn.parse(p??""),A=Kn.parse(S??""),P=b==="+"?T.add(A):T.subtract(A);if(P.isNaN())return du;r=r.replace(A8,P.toString())}return r}var E8=/\(([^()]*)\)/;function Ole(e){for(var r=e,s;(s=E8.exec(r))!=null;){var[,n]=s;r=r.replace(E8,AM(n))}return r}function Ple(e){var r=e.replace(/\s+/g,"");return r=Ole(r),r=AM(r),r}function kle(e){try{return Ple(e)}catch{return du}}function r2(e){var r=kle(e.slice(5,-1));return r===du?"":r}var _le=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Ile=["dx","dy","angle","className","breakAll"];function sj(){return sj=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},sj.apply(null,arguments)}function T8(e,r){if(e==null)return{};var s,n,a=Rle(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Rle(e,r){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var EM=/[ \f\n\r\t\v\u2028\u2029]+/,TM=e=>{var{children:r,breakAll:s,style:n}=e;try{var a=[];ja(r)||(s?a=r.toString().split(""):a=r.toString().split(EM));var l=a.map(h=>({word:h,width:S8(h,n).width})),d=s?0:S8("",n).width;return{wordsWithComputedWidth:l,spaceWidth:d}}catch{return null}};function Mle(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var DM=(e,r,s,n)=>e.reduce((a,l)=>{var{word:d,width:h}=l,f=a[a.length-1];if(f&&h!=null&&(r==null||n||f.width+h+s<Number(r)))f.words.push(d),f.width+=h+s;else{var x={words:[d],width:h};a.push(x)}return a},[]),OM=e=>e.reduce((r,s)=>r.width>s.width?r:s),Lle="",D8=(e,r,s,n,a,l,d,h)=>{var f=e.slice(0,r),x=TM({breakAll:s,style:n,children:f+Lle});if(!x)return[!1,[]];var p=DM(x.wordsWithComputedWidth,l,d,h),b=p.length>a||OM(p).width>Number(l);return[b,p]},Fle=(e,r,s,n,a)=>{var{maxLines:l,children:d,style:h,breakAll:f}=e,x=Bt(l),p=String(d),b=DM(r,n,s,a);if(!x||a)return b;var S=b.length>l||OM(b).width>Number(n);if(!S)return b;for(var T=0,A=p.length-1,P=0,D;T<=A&&P<=p.length-1;){var I=Math.floor((T+A)/2),L=I-1,[_,$]=D8(p,L,f,h,l,n,s,a),[F]=D8(p,I,f,h,l,n,s,a);if(!_&&!F&&(T=I+1),_&&F&&(A=I-1),!_&&F){D=$;break}P++}return D||b},O8=e=>{var r=ja(e)?[]:e.toString().split(EM);return[{words:r,width:void 0}]},Ble=e=>{var{width:r,scaleToFit:s,children:n,style:a,breakAll:l,maxLines:d}=e;if((r||s)&&!Kp.isSsr){var h,f,x=TM({breakAll:l,children:n,style:a});if(x){var{wordsWithComputedWidth:p,spaceWidth:b}=x;h=p,f=b}else return O8(n);return Fle({breakAll:l,children:n,maxLines:d,style:a},h,f,r,!!s)}return O8(n)},PM="#808080",Ule={angle:0,breakAll:!1,capHeight:"0.71em",fill:PM,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},$S=v.forwardRef((e,r)=>{var s=Qa(e,Ule),{x:n,y:a,lineHeight:l,capHeight:d,fill:h,scaleToFit:f,textAnchor:x,verticalAnchor:p}=s,b=T8(s,_le),S=v.useMemo(()=>Ble({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width}),[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),{dx:T,dy:A,angle:P,className:D,breakAll:I}=b,L=T8(b,Ile);if(!Ul(n)||!Ul(a)||S.length===0)return null;var _=Number(n)+(Bt(T)?T:0),$=Number(a)+(Bt(A)?A:0);if(!cn(_)||!cn($))return null;var F;switch(p){case"start":F=r2("calc(".concat(d,")"));break;case"middle":F=r2("calc(".concat((S.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:F=r2("calc(".concat(S.length-1," * -").concat(l,")"));break}var B=[];if(f){var M=S[0].width,{width:V}=b;B.push("scale(".concat(Bt(V)&&Bt(M)?V/M:1,")"))}return P&&B.push("rotate(".concat(P,", ").concat(_,", ").concat($,")")),B.length&&(L.transform=B.join(" ")),v.createElement("text",sj({},Xa(L),{ref:r,x:_,y:$,className:Rs("recharts-text",D),textAnchor:x,fill:h.includes("url")?PM:h}),S.map((z,H)=>{var U=z.words.join(I?"":" ");return v.createElement("tspan",{x:_,dy:H===0?F:l,key:"".concat(U,"-").concat(H)},U)}))});$S.displayName="Text";var zle=["labelRef"];function Vle(e,r){if(e==null)return{};var s,n,a=$le(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function $le(e,r){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;s[n]=e[n]}return s}function P8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function $s(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?P8(Object(s),!0).forEach(function(n){qle(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function qle(e,r,s){return(r=Hle(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function Hle(e){var r=Gle(e,"string");return typeof r=="symbol"?r:r+""}function Gle(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ep(){return ep=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},ep.apply(null,arguments)}var Yle=v.createContext(null),Wle=()=>{var e=v.useContext(Yle),r=Hp();return e||nR(r)},Xle=v.createContext(null),Kle=()=>{var e=v.useContext(Xle),r=zt(E7);return e||r},Zle=e=>{var{value:r,formatter:s}=e,n=ja(e.children)?r:e.children;return typeof s=="function"?s(n):n},Qle=e=>e!=null&&typeof e=="function",Jle=(e,r)=>{var s=Qn(r-e),n=Math.min(Math.abs(r-e),360);return s*n},eoe=(e,r,s,n,a)=>{var{offset:l,className:d}=e,{cx:h,cy:f,innerRadius:x,outerRadius:p,startAngle:b,endAngle:S,clockWise:T}=a,A=(x+p)/2,P=Jle(b,S),D=P>=0?1:-1,I,L;switch(r){case"insideStart":I=b+D*l,L=T;break;case"insideEnd":I=S-D*l,L=!T;break;case"end":I=S+D*l,L=T;break;default:throw new Error("Unsupported position ".concat(r))}L=P<=0?L:!L;var _=Gs(h,f,A,I),$=Gs(h,f,A,I+(L?1:-1)*359),F="M".concat(_.x,",").concat(_.y,`
    A`).concat(A,",").concat(A,",0,1,").concat(L?0:1,`,
    `).concat($.x,",").concat($.y),B=ja(e.id)?R0("recharts-radial-line-"):e.id;return v.createElement("text",ep({},n,{dominantBaseline:"central",className:Rs("recharts-radial-bar-label",d)}),v.createElement("defs",null,v.createElement("path",{id:B,d:F})),v.createElement("textPath",{xlinkHref:"#".concat(B)},s))},toe=(e,r,s)=>{var{cx:n,cy:a,innerRadius:l,outerRadius:d,startAngle:h,endAngle:f}=e,x=(h+f)/2;if(s==="outside"){var{x:p,y:b}=Gs(n,a,d+r,x);return{x:p,y:b,textAnchor:p>=n?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var S=(l+d)/2,{x:T,y:A}=Gs(n,a,S,x);return{x:T,y:A,textAnchor:"middle",verticalAnchor:"middle"}},nj=e=>"cx"in e&&Bt(e.cx),roe=(e,r)=>{var{parentViewBox:s,offset:n,position:a}=e,l;s!=null&&!nj(s)&&(l=s);var{x:d,y:h,upperWidth:f,lowerWidth:x,height:p}=r,b=d,S=d+(f-x)/2,T=(b+S)/2,A=(f+x)/2,P=b+f/2,D=p>=0?1:-1,I=D*n,L=D>0?"end":"start",_=D>0?"start":"end",$=f>=0?1:-1,F=$*n,B=$>0?"end":"start",M=$>0?"start":"end";if(a==="top"){var V={x:b+f/2,y:h-I,textAnchor:"middle",verticalAnchor:L};return $s($s({},V),l?{height:Math.max(h-l.y,0),width:f}:{})}if(a==="bottom"){var z={x:S+x/2,y:h+p+I,textAnchor:"middle",verticalAnchor:_};return $s($s({},z),l?{height:Math.max(l.y+l.height-(h+p),0),width:x}:{})}if(a==="left"){var H={x:T-F,y:h+p/2,textAnchor:B,verticalAnchor:"middle"};return $s($s({},H),l?{width:Math.max(H.x-l.x,0),height:p}:{})}if(a==="right"){var U={x:T+A+F,y:h+p/2,textAnchor:M,verticalAnchor:"middle"};return $s($s({},U),l?{width:Math.max(l.x+l.width-U.x,0),height:p}:{})}var G=l?{width:A,height:p}:{};return a==="insideLeft"?$s({x:T+F,y:h+p/2,textAnchor:M,verticalAnchor:"middle"},G):a==="insideRight"?$s({x:T+A-F,y:h+p/2,textAnchor:B,verticalAnchor:"middle"},G):a==="insideTop"?$s({x:b+f/2,y:h+I,textAnchor:"middle",verticalAnchor:_},G):a==="insideBottom"?$s({x:S+x/2,y:h+p-I,textAnchor:"middle",verticalAnchor:L},G):a==="insideTopLeft"?$s({x:b+F,y:h+I,textAnchor:M,verticalAnchor:_},G):a==="insideTopRight"?$s({x:b+f-F,y:h+I,textAnchor:B,verticalAnchor:_},G):a==="insideBottomLeft"?$s({x:S+F,y:h+p-I,textAnchor:M,verticalAnchor:L},G):a==="insideBottomRight"?$s({x:S+x-F,y:h+p-I,textAnchor:B,verticalAnchor:L},G):a&&typeof a=="object"&&(Bt(a.x)||Bl(a.x))&&(Bt(a.y)||Bl(a.y))?$s({x:d+va(a.x,A),y:h+va(a.y,p),textAnchor:"end",verticalAnchor:"end"},G):$s({x:P,y:h+p/2,textAnchor:"middle",verticalAnchor:"middle"},G)},soe={angle:0,offset:5,zIndex:bi.label,position:"middle",textBreakAll:!1};function kM(e){var r=Qa(e,soe),{viewBox:s,position:n,value:a,children:l,content:d,className:h="",textBreakAll:f,labelRef:x}=r,p=Kle(),b=Wle(),S=n==="center"?b:p??b,T,A,P;if(s==null?T=S:nj(s)?T=s:T=nR(s),!T||ja(a)&&ja(l)&&!v.isValidElement(d)&&typeof d!="function")return null;var D=$s($s({},r),{},{viewBox:T});if(v.isValidElement(d)){var{labelRef:I}=D,L=Vle(D,zle);return v.cloneElement(d,L)}if(typeof d=="function"){if(A=v.createElement(d,D),v.isValidElement(A))return A}else A=Zle(r);var _=Xa(r);if(nj(T)){if(n==="insideStart"||n==="insideEnd"||n==="end")return eoe(r,n,A,_,T);P=toe(T,r.offset,r.position)}else P=roe(r,T);return v.createElement(Pm,{zIndex:r.zIndex},v.createElement($S,ep({ref:x,className:Rs("recharts-label",h)},_,P,{textAnchor:Mle(_.textAnchor)?_.textAnchor:P.textAnchor,breakAll:f}),A))}kM.displayName="Label";var s2={},n2={},k8;function noe(){return k8||(k8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){return s[s.length-1]}e.last=r})(n2)),n2}var a2={},_8;function aoe(){return _8||(_8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){return Array.isArray(s)?s:Array.from(s)}e.toArray=r})(a2)),a2}var I8;function ioe(){return I8||(I8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=noe(),s=aoe(),n=pw();function a(l){if(n.isArrayLike(l))return r.last(s.toArray(l))}e.last=a})(s2)),s2}var i2,R8;function loe(){return R8||(R8=1,i2=ioe().last),i2}var ooe=loe();const coe=Qi(ooe);var doe=["valueAccessor"],uoe=["dataKey","clockWise","id","textBreakAll","zIndex"];function tp(){return tp=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},tp.apply(null,arguments)}function M8(e,r){if(e==null)return{};var s,n,a=hoe(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function hoe(e,r){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var moe=e=>Array.isArray(e.value)?coe(e.value):e.value,_M=v.createContext(void 0);_M.Provider;var IM=v.createContext(void 0),foe=IM.Provider;function goe(){return v.useContext(_M)}function xoe(){return v.useContext(IM)}function ex(e){var{valueAccessor:r=moe}=e,s=M8(e,doe),{dataKey:n,clockWise:a,id:l,textBreakAll:d,zIndex:h}=s,f=M8(s,uoe),x=goe(),p=xoe(),b=x||p;return!b||!b.length?null:v.createElement(Pm,{zIndex:h??bi.label},v.createElement(Qo,{className:"recharts-label-list"},b.map((S,T)=>{var A,P=ja(n)?r(S,T):Is(S&&S.payload,n),D=ja(l)?{}:{id:"".concat(l,"-").concat(T)};return v.createElement(kM,tp({key:"label-".concat(T)},Xa(S),f,D,{fill:(A=s.fill)!==null&&A!==void 0?A:S.fill,parentViewBox:S.parentViewBox,value:P,textBreakAll:d,viewBox:S.viewBox,index:T,zIndex:0}))})))}ex.displayName="LabelList";function poe(e){var{label:r}=e;return r?r===!0?v.createElement(ex,{key:"labelList-implicit"}):v.isValidElement(r)||Qle(r)?v.createElement(ex,{key:"labelList-implicit",content:r}):typeof r=="object"?v.createElement(ex,tp({key:"labelList-implicit"},r,{type:String(r.type)})):null:null}var RM=e=>e.graphicalItems.polarItems,yoe=Me([fs,jm],fS),hy=Me([RM,ps,yoe],gS),boe=Me([hy],xS),my=Me([boe,sS],pS),voe=Me([my,ps,hy],bS);Me([my,ps,hy],(e,r,s)=>s.length>0?e.flatMap(n=>s.flatMap(a=>{var l,d=Is(n,(l=r.dataKey)!==null&&l!==void 0?l:a.dataKey);return{value:d,errorDomain:[]}})).filter(Boolean):r?.dataKey!=null?e.map(n=>({value:Is(n,r.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var L8=()=>{},Noe=Me([my,ps,hy,oy,fs],wS),joe=Me([ps,NS,jS,L8,Noe,L8,Kr,fs],SS),MM=Me([ps,Kr,my,voe,Nm,fs,joe],CS),woe=Me([MM,ps,Zu],TS);Me([ps,MM,woe,fs],OS);var Soe={radiusAxis:{},angleAxis:{}},LM=ra({name:"polarAxis",initialState:Soe,reducers:{addRadiusAxis(e,r){e.radiusAxis[r.payload.id]=r.payload},removeRadiusAxis(e,r){delete e.radiusAxis[r.payload.id]},addAngleAxis(e,r){e.angleAxis[r.payload.id]=r.payload},removeAngleAxis(e,r){delete e.angleAxis[r.payload.id]}}}),{addRadiusAxis:uge,removeRadiusAxis:hge,addAngleAxis:mge,removeAngleAxis:fge}=LM.actions,Coe=LM.reducer;function F8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function B8(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?F8(Object(s),!0).forEach(function(n){Aoe(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):F8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Aoe(e,r,s){return(r=Eoe(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function Eoe(e){var r=Toe(e,"string");return typeof r=="symbol"?r:r+""}function Toe(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Doe=(e,r)=>r,qS=Me([RM,Doe],(e,r)=>e.filter(s=>s.type==="pie").find(s=>s.id===r)),Ooe=[],HS=(e,r,s)=>s?.length===0?Ooe:s,FM=Me([sS,qS,HS],(e,r,s)=>{var{chartData:n}=e;if(r!=null){var a;if(r?.data!=null&&r.data.length>0?a=r.data:a=n,(!a||!a.length)&&s!=null&&(a=s.map(l=>B8(B8({},r.presentationProps),l.props))),a!=null)return a}}),Poe=Me([FM,qS,HS],(e,r,s)=>{if(!(e==null||r==null))return e.map((n,a)=>{var l,d=Is(n,r.nameKey,r.name),h;return s!=null&&(l=s[a])!==null&&l!==void 0&&(l=l.props)!==null&&l!==void 0&&l.fill?h=s[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?h=n.fill:h=r.fill,{value:ZI(d,r.dataKey),color:h,payload:n,type:r.legendType}})}),koe=Me([FM,qS,HS,dn],(e,r,s,n)=>{if(!(r==null||e==null))return Rce({offset:n,pieSettings:r,displayedData:e,cells:s})}),l2={exports:{}},Fr={};var U8;function _oe(){if(U8)return Fr;U8=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),S=Symbol.for("react.view_transition"),T=Symbol.for("react.client.reference");function A(P){if(typeof P=="object"&&P!==null){var D=P.$$typeof;switch(D){case e:switch(P=P.type,P){case s:case a:case n:case f:case x:case S:return P;default:switch(P=P&&P.$$typeof,P){case d:case h:case b:case p:return P;case l:return P;default:return D}}case r:return D}}}return Fr.ContextConsumer=l,Fr.ContextProvider=d,Fr.Element=e,Fr.ForwardRef=h,Fr.Fragment=s,Fr.Lazy=b,Fr.Memo=p,Fr.Portal=r,Fr.Profiler=a,Fr.StrictMode=n,Fr.Suspense=f,Fr.SuspenseList=x,Fr.isContextConsumer=function(P){return A(P)===l},Fr.isContextProvider=function(P){return A(P)===d},Fr.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===e},Fr.isForwardRef=function(P){return A(P)===h},Fr.isFragment=function(P){return A(P)===s},Fr.isLazy=function(P){return A(P)===b},Fr.isMemo=function(P){return A(P)===p},Fr.isPortal=function(P){return A(P)===r},Fr.isProfiler=function(P){return A(P)===a},Fr.isStrictMode=function(P){return A(P)===n},Fr.isSuspense=function(P){return A(P)===f},Fr.isSuspenseList=function(P){return A(P)===x},Fr.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===s||P===a||P===n||P===f||P===x||typeof P=="object"&&P!==null&&(P.$$typeof===b||P.$$typeof===p||P.$$typeof===d||P.$$typeof===l||P.$$typeof===h||P.$$typeof===T||P.getModuleId!==void 0)},Fr.typeOf=A,Fr}var z8;function Ioe(){return z8||(z8=1,l2.exports=_oe()),l2.exports}var Roe=Ioe(),V8=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",$8=null,o2=null,BM=e=>{if(e===$8&&Array.isArray(o2))return o2;var r=[];return v.Children.forEach(e,s=>{ja(s)||(Roe.isFragment(s)?r=r.concat(BM(s.props.children)):r.push(s))}),o2=r,$8=e,r};function UM(e,r){var s=[],n=[];return Array.isArray(r)?n=r.map(a=>V8(a)):n=[V8(r)],BM(e).forEach(a=>{var l=I0(a,"type.displayName")||I0(a,"type.name");l&&n.indexOf(l)!==-1&&s.push(a)}),s}var c2={},q8;function Moe(){return q8||(q8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(s){if(typeof s!="object"||s==null)return!1;if(Object.getPrototypeOf(s)===null)return!0;if(Object.prototype.toString.call(s)!=="[object Object]"){const a=s[Symbol.toStringTag];return a==null||!Object.getOwnPropertyDescriptor(s,Symbol.toStringTag)?.writable?!1:s.toString()===`[object ${a}]`}let n=s;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(s)===n}e.isPlainObject=r})(c2)),c2}var d2,H8;function Loe(){return H8||(H8=1,d2=Moe().isPlainObject),d2}var Foe=Loe();const Boe=Qi(Foe);function G8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Y8(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?G8(Object(s),!0).forEach(function(n){Uoe(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):G8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Uoe(e,r,s){return(r=zoe(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function zoe(e){var r=Voe(e,"string");return typeof r=="symbol"?r:r+""}function Voe(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function rp(){return rp=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},rp.apply(null,arguments)}var W8=(e,r,s,n,a)=>{var l=s-n,d;return d="M ".concat(e,",").concat(r),d+="L ".concat(e+s,",").concat(r),d+="L ".concat(e+s-l/2,",").concat(r+a),d+="L ".concat(e+s-l/2-n,",").concat(r+a),d+="L ".concat(e,",").concat(r," Z"),d},$oe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},qoe=e=>{var r=Qa(e,$oe),{x:s,y:n,upperWidth:a,lowerWidth:l,height:d,className:h}=r,{animationEasing:f,animationDuration:x,animationBegin:p,isUpdateAnimationActive:b}=r,S=v.useRef(null),[T,A]=v.useState(-1),P=v.useRef(a),D=v.useRef(l),I=v.useRef(d),L=v.useRef(s),_=v.useRef(n),$=_w(e,"trapezoid-");if(v.useEffect(()=>{if(S.current&&S.current.getTotalLength)try{var ce=S.current.getTotalLength();ce&&A(ce)}catch{}},[]),s!==+s||n!==+n||a!==+a||l!==+l||d!==+d||a===0&&l===0||d===0)return null;var F=Rs("recharts-trapezoid",h);if(!b)return v.createElement("g",null,v.createElement("path",rp({},Xa(r),{className:F,d:W8(s,n,a,l,d)})));var B=P.current,M=D.current,V=I.current,z=L.current,H=_.current,U="0px ".concat(T===-1?1:T,"px"),G="".concat(T,"px 0px"),Q=xR(["strokeDasharray"],x,f);return v.createElement(kw,{animationId:$,key:$,canBegin:T>0,duration:x,easing:f,isActive:b,begin:p},ce=>{var ne=gi(B,a,ce),J=gi(M,l,ce),W=gi(V,d,ce),le=gi(z,s,ce),ge=gi(H,n,ce);S.current&&(P.current=ne,D.current=J,I.current=W,L.current=le,_.current=ge);var re=ce>0?{transition:Q,strokeDasharray:G}:{strokeDasharray:U};return v.createElement("path",rp({},Xa(r),{className:F,d:W8(le,ge,ne,J,W),ref:S,style:Y8(Y8({},re),r.style)}))})},Hoe=["option","shapeType","propTransformer","activeClassName"];function Goe(e,r){if(e==null)return{};var s,n,a=Yoe(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Yoe(e,r){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;s[n]=e[n]}return s}function X8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function sp(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?X8(Object(s),!0).forEach(function(n){Woe(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):X8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Woe(e,r,s){return(r=Xoe(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function Xoe(e){var r=Koe(e,"string");return typeof r=="symbol"?r:r+""}function Koe(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Zoe(e,r){return sp(sp({},r),e)}function Qoe(e,r){return e==="symbols"}function K8(e){var{shapeType:r,elementProps:s}=e;switch(r){case"rectangle":return v.createElement(vR,s);case"trapezoid":return v.createElement(qoe,s);case"sector":return v.createElement(SR,s);case"symbols":if(Qoe(r))return v.createElement(xw,s);break;case"curve":return v.createElement(Pw,s);default:return null}}function Joe(e){return v.isValidElement(e)?e.props:e}function ece(e){var{option:r,shapeType:s,propTransformer:n=Zoe,activeClassName:a="recharts-active-shape"}=e,l=Goe(e,Hoe),d;if(v.isValidElement(r))d=v.cloneElement(r,sp(sp({},l),Joe(r)));else if(typeof r=="function")d=r(l,l.index);else if(Boe(r)&&typeof r!="boolean"){var h=n(r,l);d=v.createElement(K8,{shapeType:s,elementProps:h})}else{var f=l;d=v.createElement(K8,{shapeType:s,elementProps:f})}return l.isActive?v.createElement(Qo,{className:a},d):d}var tce=(e,r,s)=>{var n=Ms();return(a,l)=>d=>{e?.(a,l,d),n(eM({activeIndex:String(l),activeDataKey:r,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:s}))}},rce=e=>{var r=Ms();return(s,n)=>a=>{e?.(s,n,a),r(dae())}},sce=(e,r,s)=>{var n=Ms();return(a,l)=>d=>{e?.(a,l,d),n(uae({activeIndex:String(l),activeDataKey:r,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:s}))}};function nce(e){var{tooltipEntrySettings:r}=e,s=Ms(),n=sc(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?s(iae(r)):a.current!==r&&s(lae({prev:a.current,next:r})),a.current=r)},[r,s,n]),v.useLayoutEffect(()=>()=>{a.current&&(s(oae(a.current)),a.current=null)},[s]),null}function ace(e){var{legendPayload:r}=e,s=Ms(),n=zt(Kr),a=v.useRef(null);return v.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?s(EJ(r)):a.current!==r&&s(TJ({prev:a.current,next:r})),a.current=r)},[s,n,r]),v.useLayoutEffect(()=>()=>{a.current&&(s(DJ(a.current)),a.current=null)},[s]),null}var u2,ice=()=>{var[e]=v.useState(()=>R0("uid-"));return e},lce=(u2=$L.useId)!==null&&u2!==void 0?u2:ice;function zM(e,r){var s=lce();return r||(e?"".concat(e,"-").concat(s):s)}var oce=v.createContext(void 0),cce=e=>{var{id:r,type:s,children:n}=e,a=zM("recharts-".concat(s),r);return v.createElement(oce.Provider,{value:a},n(a))},dce={cartesianItems:[],polarItems:[]},VM=ra({name:"graphicalItems",initialState:dce,reducers:{addCartesianGraphicalItem:{reducer(e,r){e.cartesianItems.push(r.payload)},prepare:os()},replaceCartesianGraphicalItem:{reducer(e,r){var{prev:s,next:n}=r.payload,a=vi(e).cartesianItems.indexOf(s);a>-1&&(e.cartesianItems[a]=n)},prepare:os()},removeCartesianGraphicalItem:{reducer(e,r){var s=vi(e).cartesianItems.indexOf(r.payload);s>-1&&e.cartesianItems.splice(s,1)},prepare:os()},addPolarGraphicalItem:{reducer(e,r){e.polarItems.push(r.payload)},prepare:os()},removePolarGraphicalItem:{reducer(e,r){var s=vi(e).polarItems.indexOf(r.payload);s>-1&&e.polarItems.splice(s,1)},prepare:os()}}}),{addCartesianGraphicalItem:gge,replaceCartesianGraphicalItem:xge,removeCartesianGraphicalItem:pge,addPolarGraphicalItem:uce,removePolarGraphicalItem:hce}=VM.actions,mce=VM.reducer;function fce(e){var r=Ms();return v.useLayoutEffect(()=>(r(uce(e)),()=>{r(hce(e))}),[r,e]),null}var gce=["key"],xce=["onMouseEnter","onClick","onMouseLeave"],pce=["id"],yce=["id"];function Z8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function As(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Z8(Object(s),!0).forEach(function(n){bce(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Z8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function bce(e,r,s){return(r=vce(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function vce(e){var r=Nce(e,"string");return typeof r=="symbol"?r:r+""}function Nce(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function tc(){return tc=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},tc.apply(null,arguments)}function fy(e,r){if(e==null)return{};var s,n,a=jce(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function jce(e,r){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;s[n]=e[n]}return s}function wce(e){var r=v.useMemo(()=>UM(e.children,_u),[e.children]),s=zt(n=>Poe(n,e.id,r));return s==null?null:v.createElement(ace,{legendPayload:s})}var Sce=v.memo(e=>{var{dataKey:r,nameKey:s,sectors:n,stroke:a,strokeWidth:l,fill:d,name:h,hide:f,tooltipType:x}=e,p={dataDefinedOnItem:n.map(b=>b.tooltipPayload),positions:n.map(b=>b.tooltipPosition),settings:{stroke:a,strokeWidth:l,fill:d,dataKey:r,nameKey:s,name:ZI(h,r),hide:f,type:x,color:d,unit:""}};return v.createElement(nce,{tooltipEntrySettings:p})}),Cce=(e,r)=>e>r?"start":e<r?"end":"middle",Ace=(e,r,s)=>va(typeof r=="function"?r(e):r,s,s*.8),Ece=(e,r,s)=>{var{top:n,left:a,width:l,height:d}=r,h=NR(l,d),f=a+va(e.cx,l,l/2),x=n+va(e.cy,d,d/2),p=va(e.innerRadius,h,0),b=Ace(s,e.outerRadius,h),S=e.maxRadius||Math.sqrt(l*l+d*d)/2;return{cx:f,cy:x,innerRadius:p,outerRadius:b,maxRadius:S}},Tce=(e,r)=>{var s=Qn(r-e),n=Math.min(Math.abs(r-e),360);return s*n};function Dce(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Oce=(e,r)=>{if(v.isValidElement(e))return v.cloneElement(e,r);if(typeof e=="function")return e(r);var s=Rs("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=r,a=fy(r,gce);return v.createElement(Pw,tc({},a,{type:"linear",className:s}))},Pce=(e,r,s)=>{if(v.isValidElement(e))return v.cloneElement(e,r);var n=s;if(typeof e=="function"&&(n=e(r),v.isValidElement(n)))return n;var a=Rs("recharts-pie-label-text",Dce(e));return v.createElement($S,tc({},r,{alignmentBaseline:"middle",className:a}),n)};function kce(e){var{sectors:r,props:s,showLabels:n}=e,{label:a,labelLine:l,dataKey:d}=s;if(!n||!a||!r)return null;var h=Su(s),f=cN(a),x=cN(l),p=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,b=r.map((S,T)=>{var A=(S.startAngle+S.endAngle)/2,P=Gs(S.cx,S.cy,S.outerRadius+p,A),D=As(As(As(As({},h),S),{},{stroke:"none"},f),{},{index:T,textAnchor:Cce(P.x,S.cx)},P),I=As(As(As(As({},h),S),{},{fill:"none",stroke:S.fill},x),{},{index:T,points:[Gs(S.cx,S.cy,S.outerRadius,A),P],key:"line"});return v.createElement(Pm,{zIndex:bi.label,key:"label-".concat(S.startAngle,"-").concat(S.endAngle,"-").concat(S.midAngle,"-").concat(T)},v.createElement(Qo,null,l&&Oce(l,I),Pce(a,D,Is(S,d))))});return v.createElement(Qo,{className:"recharts-pie-labels"},b)}function _ce(e){var{sectors:r,props:s,showLabels:n}=e,{label:a}=s;return typeof a=="object"&&a!=null&&"position"in a?v.createElement(poe,{label:a}):v.createElement(kce,{sectors:r,props:s,showLabels:n})}function Ice(e){var{sectors:r,activeShape:s,inactiveShape:n,allOtherPieProps:a,shape:l,id:d}=e,h=zt(W0),f=zt(fM),x=zt(Kae),{onMouseEnter:p,onClick:b,onMouseLeave:S}=a,T=fy(a,xce),A=tce(p,a.dataKey,d),P=rce(S),D=sce(b,a.dataKey,d);return r==null||r.length===0?null:v.createElement(v.Fragment,null,r.map((I,L)=>{if(I?.startAngle===0&&I?.endAngle===0&&r.length!==1)return null;var _=x==null||x===d,$=String(L)===h&&(f==null||a.dataKey===f)&&_,F=h?n:null,B=s&&$?s:F,M=As(As({},I),{},{stroke:I.stroke,tabIndex:-1,[JI]:L,[eR]:a.dataKey});return v.createElement(Qo,tc({key:"sector-".concat(I?.startAngle,"-").concat(I?.endAngle,"-").concat(I.midAngle,"-").concat(L),tabIndex:-1,className:"recharts-pie-sector"},aI(T,I,L),{onMouseEnter:A(I,L),onMouseLeave:P(I,L),onClick:D(I,L)}),v.createElement(ece,tc({option:l??B,index:L,shapeType:"sector",isActive:$},M)))}))}function Rce(e){var r,{pieSettings:s,displayedData:n,cells:a,offset:l}=e,{cornerRadius:d,startAngle:h,endAngle:f,dataKey:x,nameKey:p,tooltipType:b}=s,S=Math.abs(s.minAngle),T=Tce(h,f),A=Math.abs(T),P=n.length<=1?0:(r=s.paddingAngle)!==null&&r!==void 0?r:0,D=n.filter(B=>Is(B,x,0)!==0).length,I=(A>=360?D:D-1)*P,L=A-D*S-I,_=n.reduce((B,M)=>{var V=Is(M,x,0);return B+(Bt(V)?V:0)},0),$;if(_>0){var F;$=n.map((B,M)=>{var V=Is(B,x,0),z=Is(B,p,M),H=Ece(s,l,B),U=(Bt(V)?V:0)/_,G,Q=As(As({},B),a&&a[M]&&a[M].props);M?G=F.endAngle+Qn(T)*P*(V!==0?1:0):G=h;var ce=G+Qn(T)*((V!==0?S:0)+U*L),ne=(G+ce)/2,J=(H.innerRadius+H.outerRadius)/2,W=[{name:z,value:V,payload:Q,dataKey:x,type:b}],le=Gs(H.cx,H.cy,J,ne);return F=As(As(As(As({},s.presentationProps),{},{percent:U,cornerRadius:typeof d=="string"?parseFloat(d):d,name:z,tooltipPayload:W,midAngle:ne,middleRadius:J,tooltipPosition:le},Q),H),{},{value:V,dataKey:x,startAngle:G,endAngle:ce,payload:Q,paddingAngle:Qn(T)*P}),F})}return $}function Mce(e){var{showLabels:r,sectors:s,children:n}=e,a=v.useMemo(()=>!r||!s?[]:s.map(l=>({value:l.value,payload:l.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:l.cx,cy:l.cy,innerRadius:l.innerRadius,outerRadius:l.outerRadius,startAngle:l.startAngle,endAngle:l.endAngle,clockWise:!1},fill:l.fill})),[s,r]);return v.createElement(foe,{value:r?a:void 0},n)}function Lce(e){var{props:r,previousSectorsRef:s,id:n}=e,{sectors:a,isAnimationActive:l,animationBegin:d,animationDuration:h,animationEasing:f,activeShape:x,inactiveShape:p,onAnimationStart:b,onAnimationEnd:S}=r,T=_w(r,"recharts-pie-"),A=s.current,[P,D]=v.useState(!1),I=v.useCallback(()=>{typeof S=="function"&&S(),D(!1)},[S]),L=v.useCallback(()=>{typeof b=="function"&&b(),D(!0)},[b]);return v.createElement(Mce,{showLabels:!P,sectors:a},v.createElement(kw,{animationId:T,begin:d,duration:h,isActive:l,easing:f,onAnimationStart:L,onAnimationEnd:I,key:T},_=>{var $=[],F=a&&a[0],B=F?.startAngle;return a?.forEach((M,V)=>{var z=A&&A[V],H=V>0?I0(M,"paddingAngle",0):0;if(z){var U=gi(z.endAngle-z.startAngle,M.endAngle-M.startAngle,_),G=As(As({},M),{},{startAngle:B+H,endAngle:B+U+H});$.push(G),B=G.endAngle}else{var{endAngle:Q,startAngle:ce}=M,ne=gi(0,Q-ce,_),J=As(As({},M),{},{startAngle:B+H,endAngle:B+ne+H});$.push(J),B=J.endAngle}}),s.current=$,v.createElement(Qo,null,v.createElement(Ice,{sectors:$,activeShape:x,inactiveShape:p,allOtherPieProps:r,shape:r.shape,id:n}))}),v.createElement(_ce,{showLabels:!P,sectors:a,props:r}),r.children)}var Fce={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:bi.area};function Bce(e){var{id:r}=e,s=fy(e,pce),{hide:n,className:a,rootTabIndex:l}=e,d=v.useMemo(()=>UM(e.children,_u),[e.children]),h=zt(p=>koe(p,r,d)),f=v.useRef(null),x=Rs("recharts-pie",a);return n||h==null?(f.current=null,v.createElement(Qo,{tabIndex:l,className:x})):v.createElement(Pm,{zIndex:e.zIndex},v.createElement(Sce,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:h,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),v.createElement(Qo,{tabIndex:l,className:x},v.createElement(Lce,{props:As(As({},s),{},{sectors:h}),previousSectorsRef:f,id:r})))}function np(e){var r=Qa(e,Fce),{id:s}=r,n=fy(r,yce),a=Su(n);return v.createElement(cce,{id:s,type:"pie"},l=>v.createElement(v.Fragment,null,v.createElement(fce,{type:"pie",id:l,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:r.maxRadius}),v.createElement(wce,tc({},n,{id:l})),v.createElement(Bce,tc({},n,{id:l}))))}np.displayName="Pie";function Q8(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function J8(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Q8(Object(s),!0).forEach(function(n){Uce(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Q8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Uce(e,r,s){return(r=zce(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function zce(e){var r=Vce(e,"string");return typeof r=="symbol"?r:r+""}function Vce(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var $ce={xAxis:{},yAxis:{},zAxis:{}},$M=ra({name:"cartesianAxis",initialState:$ce,reducers:{addXAxis:{reducer(e,r){e.xAxis[r.payload.id]=r.payload},prepare:os()},replaceXAxis:{reducer(e,r){var{prev:s,next:n}=r.payload;e.xAxis[s.id]!==void 0&&(s.id!==n.id&&delete e.xAxis[s.id],e.xAxis[n.id]=n)},prepare:os()},removeXAxis:{reducer(e,r){delete e.xAxis[r.payload.id]},prepare:os()},addYAxis:{reducer(e,r){e.yAxis[r.payload.id]=r.payload},prepare:os()},replaceYAxis:{reducer(e,r){var{prev:s,next:n}=r.payload;e.yAxis[s.id]!==void 0&&(s.id!==n.id&&delete e.yAxis[s.id],e.yAxis[n.id]=n)},prepare:os()},removeYAxis:{reducer(e,r){delete e.yAxis[r.payload.id]},prepare:os()},addZAxis:{reducer(e,r){e.zAxis[r.payload.id]=r.payload},prepare:os()},replaceZAxis:{reducer(e,r){var{prev:s,next:n}=r.payload;e.zAxis[s.id]!==void 0&&(s.id!==n.id&&delete e.zAxis[s.id],e.zAxis[n.id]=n)},prepare:os()},removeZAxis:{reducer(e,r){delete e.zAxis[r.payload.id]},prepare:os()},updateYAxisWidth(e,r){var{id:s,width:n}=r.payload,a=e.yAxis[s];if(a){var l=a.widthHistory||[];if(l.length===3&&l[0]===l[2]&&n===l[1]&&n!==a.width&&Math.abs(n-l[0])<=1)return;var d=[...l,n].slice(-3);e.yAxis[s]=J8(J8({},e.yAxis[s]),{},{width:n,widthHistory:d})}}}}),{addXAxis:yge,replaceXAxis:bge,removeXAxis:vge,addYAxis:Nge,replaceYAxis:jge,removeYAxis:wge,addZAxis:Sge,replaceZAxis:Cge,removeZAxis:Age,updateYAxisWidth:Ege}=$M.actions,qce=$M.reducer,Hce=Me([dn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Gce=Me([Hce,Gl,Yl],(e,r,s)=>{if(!(!e||r==null||s==null))return{x:e.left,y:e.top,width:Math.max(0,r-e.left-e.right),height:Math.max(0,s-e.top-e.bottom)}}),Yce=()=>zt(Gce),Wce={},qM=ra({name:"errorBars",initialState:Wce,reducers:{addErrorBar:(e,r)=>{var{itemId:s,errorBar:n}=r.payload;e[s]||(e[s]=[]),e[s].push(n)},replaceErrorBar:(e,r)=>{var{itemId:s,prev:n,next:a}=r.payload;e[s]&&(e[s]=e[s].map(l=>l.dataKey===n.dataKey&&l.direction===n.direction?a:l))},removeErrorBar:(e,r)=>{var{itemId:s,errorBar:n}=r.payload;e[s]&&(e[s]=e[s].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Tge,replaceErrorBar:Dge,removeErrorBar:Oge}=qM.actions,Xce=qM.reducer,h2={exports:{}},m2={};var eD;function Kce(){if(eD)return m2;eD=1;var e=Iu();function r(f,x){return f===x&&(f!==0||1/f===1/x)||f!==f&&x!==x}var s=typeof Object.is=="function"?Object.is:r,n=e.useSyncExternalStore,a=e.useRef,l=e.useEffect,d=e.useMemo,h=e.useDebugValue;return m2.useSyncExternalStoreWithSelector=function(f,x,p,b,S){var T=a(null);if(T.current===null){var A={hasValue:!1,value:null};T.current=A}else A=T.current;T=d(function(){function D(F){if(!I){if(I=!0,L=F,F=b(F),S!==void 0&&A.hasValue){var B=A.value;if(S(B,F))return _=B}return _=F}if(B=_,s(L,F))return B;var M=b(F);return S!==void 0&&S(B,M)?(L=F,B):(L=F,_=M)}var I=!1,L,_,$=p===void 0?null:p;return[function(){return D(x())},$===null?void 0:function(){return D($())}]},[x,p,b,S]);var P=n(f,T[0],T[1]);return l(function(){A.hasValue=!0,A.value=P},[P]),h(P),P},m2}var tD;function Zce(){return tD||(tD=1,h2.exports=Kce()),h2.exports}Zce();function Qce(e){e()}function Jce(){let e=null,r=null;return{clear(){e=null,r=null},notify(){Qce(()=>{let s=e;for(;s;)s.callback(),s=s.next})},get(){const s=[];let n=e;for(;n;)s.push(n),n=n.next;return s},subscribe(s){let n=!0;const a=r={callback:s,next:null,prev:r};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:r=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var rD={notify(){},get:()=>[]};function ede(e,r){let s,n=rD,a=0,l=!1;function d(P){p();const D=n.subscribe(P);let I=!1;return()=>{I||(I=!0,D(),b())}}function h(){n.notify()}function f(){A.onStateChange&&A.onStateChange()}function x(){return l}function p(){a++,s||(s=e.subscribe(f),n=Jce())}function b(){a--,s&&a===0&&(s(),s=void 0,n.clear(),n=rD)}function S(){l||(l=!0,p())}function T(){l&&(l=!1,b())}const A={addNestedSub:d,notifyNestedSubs:h,handleChangeWrapper:f,isSubscribed:x,trySubscribe:S,tryUnsubscribe:T,getListeners:()=>n};return A}var tde=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rde=tde(),sde=()=>typeof navigator<"u"&&navigator.product==="ReactNative",nde=sde(),ade=()=>rde||nde?v.useLayoutEffect:v.useEffect,ide=ade();function sD(e,r){return e===r?e!==0||r!==0||1/e===1/r:e!==e&&r!==r}function lde(e,r){if(sD(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;const s=Object.keys(e),n=Object.keys(r);if(s.length!==n.length)return!1;for(let a=0;a<s.length;a++)if(!Object.prototype.hasOwnProperty.call(r,s[a])||!sD(e[s[a]],r[s[a]]))return!1;return!0}var ode=Symbol.for("react-redux-context"),cde=typeof globalThis<"u"?globalThis:{};function dde(){if(!v.createContext)return{};const e=cde[ode]??=new Map;let r=e.get(v.createContext);return r||(r=v.createContext(null),e.set(v.createContext,r)),r}var ude=dde();function hde(e){const{children:r,context:s,serverState:n,store:a}=e,l=v.useMemo(()=>{const f=ede(a);return{store:a,subscription:f,getServerState:n?()=>n:void 0}},[a,n]),d=v.useMemo(()=>a.getState(),[a]);ide(()=>{const{subscription:f}=l;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),d!==a.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[l,d]);const h=s||ude;return v.createElement(h.Provider,{value:l},r)}var mde=hde,fde=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function gde(e,r){return e==null&&r==null?!0:typeof e=="number"&&typeof r=="number"?e===r||e!==e&&r!==r:e===r}function xde(e,r){var s=new Set([...Object.keys(e),...Object.keys(r)]);for(var n of s)if(fde.has(n)){if(e[n]==null&&r[n]==null)continue;if(!lde(e[n],r[n]))return!1}else if(!gde(e[n],r[n]))return!1;return!0}var pde=e=>{var{chartData:r}=e,s=Ms(),n=sc();return v.useEffect(()=>n?()=>{}:(s(g8(r)),()=>{s(g8(void 0))}),[r,s,n]),null},nD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},HM=ra({name:"brush",initialState:nD,reducers:{setBrushSettings(e,r){return r.payload==null?nD:r.payload}}}),{setBrushSettings:Pge}=HM.actions,yde=HM.reducer,bde={dots:[],areas:[],lines:[]},GM=ra({name:"referenceElements",initialState:bde,reducers:{addDot:(e,r)=>{e.dots.push(r.payload)},removeDot:(e,r)=>{var s=vi(e).dots.findIndex(n=>n===r.payload);s!==-1&&e.dots.splice(s,1)},addArea:(e,r)=>{e.areas.push(r.payload)},removeArea:(e,r)=>{var s=vi(e).areas.findIndex(n=>n===r.payload);s!==-1&&e.areas.splice(s,1)},addLine:(e,r)=>{e.lines.push(r.payload)},removeLine:(e,r)=>{var s=vi(e).lines.findIndex(n=>n===r.payload);s!==-1&&e.lines.splice(s,1)}}}),{addDot:kge,removeDot:_ge,addArea:Ige,removeArea:Rge,addLine:Mge,removeLine:Lge}=GM.actions,vde=GM.reducer,Nde=v.createContext(void 0),jde=e=>{var{children:r}=e,[s]=v.useState("".concat(R0("recharts"),"-clip")),n=Yce();if(n==null)return null;var{x:a,y:l,width:d,height:h}=n;return v.createElement(Nde.Provider,{value:s},v.createElement("defs",null,v.createElement("clipPath",{id:s},v.createElement("rect",{x:a,y:l,height:h,width:d}))),r)},wde=(e,r)=>r,GS=Me([wde,Kr,E7,sn,dM,Xl,mie,dn],vie),YS=e=>{var r=e.currentTarget.getBoundingClientRect(),s=r.width/e.currentTarget.offsetWidth,n=r.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-r.left)/s),chartY:Math.round((e.clientY-r.top)/n)}},YM=Ka("mouseClick"),WM=fm();WM.startListening({actionCreator:YM,effect:(e,r)=>{var s=e.payload,n=GS(r.getState(),YS(s));n?.activeIndex!=null&&r.dispatch(hae({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var aj=Ka("mouseMove"),XM=fm(),yg=null;XM.startListening({actionCreator:aj,effect:(e,r)=>{var s=e.payload;yg!==null&&cancelAnimationFrame(yg);var n=YS(s);yg=requestAnimationFrame(()=>{var a=r.getState(),l=_S(a,a.tooltip.settings.shared);if(l==="axis"){var d=GS(a,n);d?.activeIndex!=null?r.dispatch(rM({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate})):r.dispatch(tM())}yg=null})}});var aD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},KM=ra({name:"rootProps",initialState:aD,reducers:{updateOptions:(e,r)=>{var s;e.accessibilityLayer=r.payload.accessibilityLayer,e.barCategoryGap=r.payload.barCategoryGap,e.barGap=(s=r.payload.barGap)!==null&&s!==void 0?s:aD.barGap,e.barSize=r.payload.barSize,e.maxBarSize=r.payload.maxBarSize,e.stackOffset=r.payload.stackOffset,e.syncId=r.payload.syncId,e.syncMethod=r.payload.syncMethod,e.className=r.payload.className,e.baseValue=r.payload.baseValue,e.reverseStackOrder=r.payload.reverseStackOrder}}}),Sde=KM.reducer,{updateOptions:Cde}=KM.actions,ZM=ra({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,r)=>r.payload}}),{updatePolarOptions:Ade}=ZM.actions,Ede=ZM.reducer,QM=Ka("keyDown"),JM=Ka("focus"),WS=fm();WS.startListening({actionCreator:QM,effect:(e,r)=>{var s=r.getState(),n=s.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=s.tooltip,l=e.payload;if(!(l!=="ArrowRight"&&l!=="ArrowLeft"&&l!=="Enter")){var d=IS(a,Ju(s),Cm(s),Dm(s)),h=d==null?-1:Number(d);if(!(!Number.isFinite(h)||h<0)){var f=Xl(s);if(l==="Enter"){var x=Jx(s,"axis","hover",String(a.index));r.dispatch(JN({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:x}));return}var p=rae(s),b=p==="left-to-right"?1:-1,S=l==="ArrowRight"?1:-1,T=h+S*b;if(!(f==null||T>=f.length||T<0)){var A=Jx(s,"axis","hover",String(T));r.dispatch(JN({active:!0,activeIndex:T.toString(),activeDataKey:void 0,activeCoordinate:A}))}}}}}});WS.startListening({actionCreator:JM,effect:(e,r)=>{var s=r.getState(),n=s.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=s.tooltip;if(!a.active&&a.index==null){var l="0",d=Jx(s,"axis","hover",String(l));r.dispatch(JN({activeDataKey:void 0,active:!0,activeIndex:l,activeCoordinate:d}))}}}});var Ba=Ka("externalEvent"),e9=fm(),f2=new Map;e9.startListening({actionCreator:Ba,effect:(e,r)=>{var{handler:s,reactEvent:n}=e.payload;if(s!=null){n.persist();var a=n.type,l=f2.get(a);l!==void 0&&cancelAnimationFrame(l);var d=requestAnimationFrame(()=>{try{var h=r.getState(),f={activeCoordinate:Qae(h),activeDataKey:fM(h),activeIndex:W0(h),activeLabel:mM(h),activeTooltipIndex:W0(h),isTooltipActive:Jae(h)};s(f,n)}finally{f2.delete(a)}});f2.set(a,d)}}});var Tde=Me([Qu],e=>e.tooltipItemPayloads),Dde=Me([Tde,Em,(e,r,s)=>r,(e,r,s)=>s],(e,r,s,n)=>{var a=e.find(h=>h.settings.dataKey===n);if(a!=null){var{positions:l}=a;if(l!=null){var d=r(l,s);return d}}}),t9=Ka("touchMove"),r9=fm();r9.startListening({actionCreator:t9,effect:(e,r)=>{var s=e.payload;if(!(s.touches==null||s.touches.length===0)){var n=r.getState(),a=_S(n,n.tooltip.settings.shared);if(a==="axis"){var l=GS(n,YS({clientX:s.touches[0].clientX,clientY:s.touches[0].clientY,currentTarget:s.currentTarget}));l?.activeIndex!=null&&r.dispatch(rM({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(a==="item"){var d,h=s.touches[0];if(document.elementFromPoint==null)return;var f=document.elementFromPoint(h.clientX,h.clientY);if(!f||!f.getAttribute)return;var x=f.getAttribute(JI),p=(d=f.getAttribute(eR))!==null&&d!==void 0?d:void 0,b=Dde(r.getState(),x,p);r.dispatch(eM({activeDataKey:p,activeIndex:x,activeCoordinate:b}))}}}});var Ode=jI({brush:yde,cartesianAxis:qce,chartData:Qie,errorBars:Xce,graphicalItems:mce,layout:NQ,legend:OJ,options:Yie,polarAxis:Coe,polarOptions:Ede,referenceElements:vde,rootProps:Sde,tooltip:mae,zIndex:Iie}),Pde=function(r){return GZ({reducer:Ode,preloadedState:r,middleware:s=>{var n;return s({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([WM.middleware,XM.middleware,WS.middleware,e9.middleware,r9.middleware])},enhancers:s=>{var n=s;return typeof s=="function"&&(n=s()),n.concat(LI({type:"raf"}))},devTools:Kp.devToolsEnabled})};function kde(e){var{preloadedState:r,children:s,reduxStoreName:n}=e,a=sc(),l=v.useRef(null);if(a)return s;l.current==null&&(l.current=Pde(r));var d=yw;return v.createElement(mde,{context:d,store:l.current},s)}function _de(e){var{layout:r,margin:s}=e,n=Ms(),a=sc();return v.useEffect(()=>{a||(n(yQ(r)),n(pQ(s)))},[n,a,r,s]),null}var Ide=v.memo(_de,xde);function Rde(e){var r=Ms();return v.useEffect(()=>{r(Cde(e))},[r,e]),null}function iD(e){var{zIndex:r,isPanorama:s}=e,n=s?"recharts-zindex-panorama-":"recharts-zindex-",a=zM("".concat(n).concat(r)),l=Ms();return v.useLayoutEffect(()=>(l(kie({zIndex:r,elementId:a,isPanorama:s})),()=>{l(_ie({zIndex:r,isPanorama:s}))}),[l,r,a,s]),v.createElement("g",{tabIndex:-1,id:a})}function lD(e){var{children:r,isPanorama:s}=e,n=zt(jie);if(!n||n.length===0)return r;var a=n.filter(d=>d<0),l=n.filter(d=>d>0);return v.createElement(v.Fragment,null,a.map(d=>v.createElement(iD,{key:d,zIndex:d,isPanorama:s})),r,l.map(d=>v.createElement(iD,{key:d,zIndex:d,isPanorama:s})))}var Mde=["children"];function Lde(e,r){if(e==null)return{};var s,n,a=Fde(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Fde(e,r){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;s[n]=e[n]}return s}function ap(){return ap=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},ap.apply(null,arguments)}var Bde={width:"100%",height:"100%",display:"block"},Ude=v.forwardRef((e,r)=>{var s=aR(),n=iR(),a=gR();if(!Jo(s)||!Jo(n))return null;var{children:l,otherAttributes:d,title:h,desc:f}=e,x,p;return d!=null&&(typeof d.tabIndex=="number"?x=d.tabIndex:x=a?0:void 0,typeof d.role=="string"?p=d.role:p=a?"application":void 0),v.createElement(cw,ap({},d,{title:h,desc:f,role:p,tabIndex:x,width:s,height:n,style:Bde,ref:r}),l)}),zde=e=>{var{children:r}=e,s=zt(qp);if(!s)return null;var{width:n,height:a,y:l,x:d}=s;return v.createElement(cw,{width:n,height:a,x:d,y:l},r)},oD=v.forwardRef((e,r)=>{var{children:s}=e,n=Lde(e,Mde),a=sc();return a?v.createElement(zde,null,v.createElement(lD,{isPanorama:!0},s)):v.createElement(Ude,ap({ref:r},n),v.createElement(lD,{isPanorama:!1},s))});function Vde(){var e=Ms(),[r,s]=v.useState(null),n=zt(MQ);return v.useEffect(()=>{if(r!=null){var a=r.getBoundingClientRect(),l=a.width/r.offsetWidth;cn(l)&&l!==n&&e(vQ(l))}},[r,e,n]),s}function cD(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function $de(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?cD(Object(s),!0).forEach(function(n){qde(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):cD(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function qde(e,r,s){return(r=Hde(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function Hde(e){var r=Gde(e,"string");return typeof r=="symbol"?r:r+""}function Gde(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function cd(){return cd=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},cd.apply(null,arguments)}var Yde=()=>(lle(),null);function ip(e){if(typeof e=="number")return e;if(typeof e=="string"){var r=parseFloat(e);if(!Number.isNaN(r))return r}return 0}var Wde=v.forwardRef((e,r)=>{var s,n,a=v.useRef(null),[l,d]=v.useState({containerWidth:ip((s=e.style)===null||s===void 0?void 0:s.width),containerHeight:ip((n=e.style)===null||n===void 0?void 0:n.height)}),h=v.useCallback((x,p)=>{d(b=>{var S=Math.round(x),T=Math.round(p);return b.containerWidth===S&&b.containerHeight===T?b:{containerWidth:S,containerHeight:T}})},[]),f=v.useCallback(x=>{if(typeof r=="function"&&r(x),x!=null&&typeof ResizeObserver<"u"){var{width:p,height:b}=x.getBoundingClientRect();h(p,b);var S=A=>{var{width:P,height:D}=A[0].contentRect;h(P,D)},T=new ResizeObserver(S);T.observe(x),a.current=T}},[r,h]);return v.useEffect(()=>()=>{var x=a.current;x?.disconnect()},[h]),v.createElement(v.Fragment,null,v.createElement(Gp,{width:l.containerWidth,height:l.containerHeight}),v.createElement("div",cd({ref:f},e)))}),Xde=v.forwardRef((e,r)=>{var{width:s,height:n}=e,[a,l]=v.useState({containerWidth:ip(s),containerHeight:ip(n)}),d=v.useCallback((f,x)=>{l(p=>{var b=Math.round(f),S=Math.round(x);return p.containerWidth===b&&p.containerHeight===S?p:{containerWidth:b,containerHeight:S}})},[]),h=v.useCallback(f=>{if(typeof r=="function"&&r(f),f!=null){var{width:x,height:p}=f.getBoundingClientRect();d(x,p)}},[r,d]);return v.createElement(v.Fragment,null,v.createElement(Gp,{width:a.containerWidth,height:a.containerHeight}),v.createElement("div",cd({ref:h},e)))}),Kde=v.forwardRef((e,r)=>{var{width:s,height:n}=e;return v.createElement(v.Fragment,null,v.createElement(Gp,{width:s,height:n}),v.createElement("div",cd({ref:r},e)))}),Zde=v.forwardRef((e,r)=>{var{width:s,height:n}=e;return Bl(s)||Bl(n)?v.createElement(Xde,cd({},e,{ref:r})):v.createElement(Kde,cd({},e,{ref:r}))});function Qde(e){return e===!0?Wde:Zde}var Jde=v.forwardRef((e,r)=>{var{children:s,className:n,height:a,onClick:l,onContextMenu:d,onDoubleClick:h,onMouseDown:f,onMouseEnter:x,onMouseLeave:p,onMouseMove:b,onMouseUp:S,onTouchEnd:T,onTouchMove:A,onTouchStart:P,style:D,width:I,responsive:L,dispatchTouchEvents:_=!0}=e,$=v.useRef(null),F=Ms(),[B,M]=v.useState(null),[V,z]=v.useState(null),H=Vde(),U=Ew(),G=U?.width>0?U.width:I,Q=U?.height>0?U.height:a,ce=v.useCallback(Ce=>{H(Ce),typeof r=="function"&&r(Ce),M(Ce),z(Ce),Ce!=null&&($.current=Ce)},[H,r,M,z]),ne=v.useCallback(Ce=>{F(YM(Ce)),F(Ba({handler:l,reactEvent:Ce}))},[F,l]),J=v.useCallback(Ce=>{F(aj(Ce)),F(Ba({handler:x,reactEvent:Ce}))},[F,x]),W=v.useCallback(Ce=>{F(tM()),F(Ba({handler:p,reactEvent:Ce}))},[F,p]),le=v.useCallback(Ce=>{F(aj(Ce)),F(Ba({handler:b,reactEvent:Ce}))},[F,b]),ge=v.useCallback(()=>{F(JM())},[F]),re=v.useCallback(Ce=>{F(QM(Ce.key))},[F]),X=v.useCallback(Ce=>{F(Ba({handler:d,reactEvent:Ce}))},[F,d]),ae=v.useCallback(Ce=>{F(Ba({handler:h,reactEvent:Ce}))},[F,h]),ve=v.useCallback(Ce=>{F(Ba({handler:f,reactEvent:Ce}))},[F,f]),fe=v.useCallback(Ce=>{F(Ba({handler:S,reactEvent:Ce}))},[F,S]),se=v.useCallback(Ce=>{F(Ba({handler:P,reactEvent:Ce}))},[F,P]),oe=v.useCallback(Ce=>{_&&F(t9(Ce)),F(Ba({handler:A,reactEvent:Ce}))},[F,_,A]),he=v.useCallback(Ce=>{F(Ba({handler:T,reactEvent:Ce}))},[F,T]),Ve=Qde(L);return v.createElement(NM.Provider,{value:B},v.createElement(F_.Provider,{value:V},v.createElement(Ve,{width:G??D?.width,height:Q??D?.height,className:Rs("recharts-wrapper",n),style:$de({position:"relative",cursor:"default",width:G,height:Q},D),onClick:ne,onContextMenu:X,onDoubleClick:ae,onFocus:ge,onKeyDown:re,onMouseDown:ve,onMouseEnter:J,onMouseLeave:W,onMouseMove:le,onMouseUp:fe,onTouchEnd:he,onTouchMove:oe,onTouchStart:se,ref:ce},v.createElement(Yde,null),s)))}),eue=["width","height","responsive","children","className","style","compact","title","desc"];function tue(e,r){if(e==null)return{};var s,n,a=rue(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function rue(e,r){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var sue=v.forwardRef((e,r)=>{var{width:s,height:n,responsive:a,children:l,className:d,style:h,compact:f,title:x,desc:p}=e,b=tue(e,eue),S=Su(b);return f?v.createElement(v.Fragment,null,v.createElement(Gp,{width:s,height:n}),v.createElement(oD,{otherAttributes:S,title:x,desc:p},l)):v.createElement(Jde,{className:d,style:h,width:s,height:n,responsive:a??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},v.createElement(oD,{otherAttributes:S,title:x,desc:p,ref:r},v.createElement(jde,null,l)))});function nue(e){var r=Ms();return v.useEffect(()=>{r(Ade(e))},[r,e]),null}var aue=["layout"];function ij(){return ij=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},ij.apply(null,arguments)}function iue(e,r){if(e==null)return{};var s,n,a=lue(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function lue(e,r){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var oue={top:5,right:5,bottom:5,left:5},s9={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:oue,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},cue=v.forwardRef(function(r,s){var n,a=Qa(r.categoricalChartProps,s9),{layout:l}=a,d=iue(a,aue),{chartName:h,defaultTooltipEventType:f,validateTooltipEventTypes:x,tooltipPayloadSearcher:p}=r,b={chartName:h,defaultTooltipEventType:f,validateTooltipEventTypes:x,tooltipPayloadSearcher:p,eventEmitter:void 0};return v.createElement(kde,{preloadedState:{options:b},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:h},v.createElement(pde,{chartData:a.data}),v.createElement(Ide,{layout:l,margin:a.margin}),v.createElement(Rde,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(nue,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),v.createElement(sue,ij({},d,{ref:s})))});function dD(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function uD(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?dD(Object(s),!0).forEach(function(n){due(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):dD(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function due(e,r,s){return(r=uue(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function uue(e){var r=hue(e,"string");return typeof r=="symbol"?r:r+""}function hue(e,r){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var mue=["item"],fue=uD(uD({},s9),{},{layout:"centric",startAngle:0,endAngle:360}),lj=v.forwardRef((e,r)=>{var s=Qa(e,fue);return v.createElement(cue,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:mue,tooltipPayloadSearcher:Hie,categoricalChartProps:s,ref:r})});const bg=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],gue=({data:e,loading:r})=>{if(!e)return t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx(Hs,{loading:!0}),t.jsx(Hs,{loading:!0})]});const{totalPayments:s,totalRevenue:n,averageOrderValue:a,totalDiscount:l,paymentMethods:d=[],topCoupons:h=[]}=e,f=d.map(p=>({name:p._id,value:p.revenue,count:p.count})),x=({active:p,payload:b})=>p&&b&&b.length?t.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b[0].name}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Revenue: ",t.jsx("span",{className:"font-bold text-green-600",children:mi(b[0].value)})]}),b[0].payload.count&&t.jsxs("p",{className:"text-sm text-gray-600",children:["Orders: ",t.jsx("span",{className:"font-bold",children:b[0].payload.count})]})]}):null;return t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"Revenue & Payments"}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"xl:col-span-1 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-1 gap-3",children:[t.jsx(Hs,{title:"Total Revenue",value:mi(n),subtitle:`From ${Br(s)} transactions`,icon:t.jsx(XP,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:r}),t.jsx(Hs,{title:"Total Payments",value:Br(s),subtitle:"Successful transactions",icon:t.jsx(G$,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:r}),t.jsx(Hs,{title:"Average Order Value",value:mi(a),subtitle:"Per transaction",icon:t.jsx(yx,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:r}),t.jsx(Hs,{title:"Total Discounts",value:mi(l),subtitle:"Coupons & offers applied",icon:t.jsx(H3,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:r})]}),f.length>0&&t.jsxs("div",{className:"xl:col-span-2 bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[t.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"Payment Distribution"}),t.jsx(TN,{width:"100%",height:240,children:t.jsxs(lj,{children:[t.jsx(np,{data:f,cx:"50%",cy:"50%",labelLine:!1,label:({name:p,percent:b})=>`${p} (${(b*100).toFixed(0)}%)`,outerRadius:70,fill:"#8884d8",dataKey:"value",children:f.map((p,b)=>t.jsx(_u,{fill:bg[b%bg.length]},`cell-${b}`))}),t.jsx(rj,{content:t.jsx(x,{})}),t.jsx(fR,{})]})}),t.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:f.map((p,b)=>t.jsxs("div",{className:"flex items-center justify-between text-xs p-2 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2.5 h-2.5 rounded-full shrink-0",style:{backgroundColor:bg[b%bg.length]}}),t.jsx("span",{className:"font-semibold text-gray-900",children:p.name})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"font-bold text-gray-900",children:mi(p.value)}),t.jsxs("p",{className:"text-xs text-gray-500",children:[p.count," orders"]})]})]},p.name))})})]})]}),h.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[t.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"Top Performing Coupons"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:h.map((p,b)=>t.jsxs("div",{className:"relative p-3 rounded-lg border-2 border-dashed border-gray-200 hover:border-blue-400 hover:bg-blue-50/30 transition-all group",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsxs("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 text-white font-bold px-2 py-0.5 rounded text-xs shadow-sm",children:["#",b+1]}),t.jsx("span",{className:"font-bold text-sm text-gray-900 group-hover:text-gray-900 transition-colors truncate",children:p._id})]}),t.jsx(H3,{className:"text-orange-500 w-4 h-4 group-hover:scale-110 transition-transform shrink-0"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.jsxs("div",{className:"bg-white/50 p-2 rounded-lg",children:[t.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:"Usage Count"}),t.jsx("p",{className:"font-bold text-gray-900",children:Br(p.usageCount)})]}),t.jsxs("div",{className:"bg-white/50 p-2 rounded-lg",children:[t.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:"Total Discount"}),t.jsx("p",{className:"font-bold text-green-600",children:mi(p.totalDiscount)})]})]})]},p._id))})]})]})},hD={TECHNOLOGY:"#3B82F6",ENTERTAINMENT:"#EC4899",EDUCATION:"#10B981",BUSINESS:"#F59E0B",OTHER:"#6B7280"},mD={OFFLINE:"#EF4444",ONLINE:"#10B981",HYBRID:"#8B5CF6"},xue=({data:e,enrollmentsData:r,cashTicketsData:s,loading:n})=>{if(!e)return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.jsx(Hs,{loading:!0})});const{total:a,live:l,upcoming:d,past:h,byCategory:f={},byMode:x={}}=e,p=Object.entries(f).map(([T,A])=>({name:T,value:A})),b=Object.entries(x).map(([T,A])=>({name:T,value:A})),S=({active:T,payload:A})=>T&&A&&A.length?t.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:A[0].name}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Events: ",t.jsx("span",{className:"font-bold text-gray-800",children:A[0].value})]})]}):null;return t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"Events Overview"}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(Hs,{title:"Total Events",value:Br(a),subtitle:"All time events",icon:t.jsx($3,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:n}),t.jsx(Hs,{title:"Live Events",value:Br(l),subtitle:"Currently ongoing",icon:t.jsx(X$,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:n}),t.jsx(Hs,{title:"Upcoming Events",value:Br(d),subtitle:"Scheduled ahead",icon:t.jsx(eq,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:n}),t.jsx(Hs,{title:"Past Events",value:Br(h),subtitle:"Completed events",icon:t.jsx(H$,{className:"w-6 h-6"}),iconColor:"text-gray-600",loading:n})]}),p.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[t.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"Events by Category"}),t.jsx(TN,{width:"100%",height:220,children:t.jsxs(lj,{children:[t.jsx(np,{data:p,cx:"50%",cy:"50%",labelLine:!1,label:({name:T,percent:A})=>`${T.slice(0,3)} (${(A*100).toFixed(0)}%)`,outerRadius:60,fill:"#8884d8",dataKey:"value",children:p.map((T,A)=>t.jsx(_u,{fill:hD[T.name]||"#6B7280"},`cell-${A}`))}),t.jsx(rj,{content:t.jsx(S,{})})]})}),t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-2 gap-2",children:p.map(T=>t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:hD[T.name]||"#6B7280"}}),t.jsx("span",{className:"font-semibold text-gray-900 truncate",children:T.name}),t.jsx("span",{className:"text-gray-600 ml-auto",children:T.value})]},T.name))})]}),b.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[t.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"Events by Mode"}),t.jsx(TN,{width:"100%",height:220,children:t.jsxs(lj,{children:[t.jsx(np,{data:b,cx:"50%",cy:"50%",labelLine:!1,label:({name:T,percent:A})=>`${T} (${(A*100).toFixed(0)}%)`,outerRadius:60,fill:"#8884d8",dataKey:"value",children:b.map((T,A)=>t.jsx(_u,{fill:mD[T.name]||"#6B7280"},`cell-${A}`))}),t.jsx(rj,{content:t.jsx(S,{})})]})}),t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-2",children:b.map(T=>t.jsxs("div",{className:"flex items-center justify-between text-sm p-2 rounded-lg bg-gray-50",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:mD[T.name]||"#6B7280"}}),t.jsx("span",{className:"font-semibold text-gray-900",children:T.name})]}),t.jsx("span",{className:"font-bold text-gray-900",children:T.value})]},T.name))})]})]}),r&&t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx(Hs,{title:"Total Enrollments",value:Br(r.totalEnrollments),subtitle:"Online + Cash combined",icon:t.jsx(R_,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:n}),t.jsx(Hs,{title:"Online Enrollments",value:Br(r.onlineEnrollments),subtitle:`${Br(r.onlineTickets)} tickets sold`,icon:t.jsx(lN,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:n}),t.jsx(Hs,{title:"Cash Enrollments",value:Br(r.cashEnrollments),subtitle:"Offline redemptions",icon:t.jsx($3,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:n}),s&&t.jsx(Hs,{title:"Cash Tickets",value:Br(s.totalMinted),subtitle:`${s.redeemed} redeemed, ${s.pending} pending`,icon:t.jsx(oN,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:n})]})]})},pue=({data:e,loading:r})=>{const[s,n]=v.useState("totalRevenue"),[a,l]=v.useState("desc");if(!e||e.length===0)return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Admin Performance"}),t.jsx("p",{className:"text-gray-500 text-center py-8",children:"No admin performance data available"})]});const d=[...e].sort((p,b)=>{const S=p[s],T=b[s];return a==="asc"?S-T:T-S}),h=p=>{s===p?l(a==="asc"?"desc":"asc"):(n(p),l("desc"))},f=p=>({SUPER_ADMIN:"bg-purple-100 text-purple-800",ADMIN:"bg-blue-100 text-blue-800",MANAGEMENT_STAFF:"bg-green-100 text-green-800"})[p]||"bg-gray-100 text-gray-800",x=(p,b)=>b?(p/b*100).toFixed(1):0;return r?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[t.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6 animate-pulse"}),t.jsx("div",{className:"space-y-4",children:[1,2,3].map(p=>t.jsx("div",{className:"h-20 bg-gray-100 rounded animate-pulse"},p))})]}):t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Admin Performance"}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.jsx(Yh,{className:"text-yellow-500"}),t.jsxs("span",{children:["Top ",d.length," performers"]})]})]}),t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-200",children:[t.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm",children:"Rank"}),t.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm",children:"Admin"}),t.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm",children:"Role"}),t.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm cursor-pointer hover:text-gray-800",onClick:()=>h("totalTickets"),title:"Total cash tickets issued by this admin",children:t.jsxs("div",{className:"flex flex-col items-end",children:[t.jsxs("span",{children:["Tickets Issued ",s==="totalTickets"&&(a==="asc"?"":"")]}),t.jsx("span",{className:"text-xs font-normal text-gray-400",children:"Cash tickets"})]})}),t.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm cursor-pointer hover:text-gray-800",onClick:()=>h("redeemedTickets"),title:"Tickets redeemed by this admin",children:t.jsxs("div",{className:"flex flex-col items-end",children:[t.jsxs("span",{children:["Redeemed ",s==="redeemedTickets"&&(a==="asc"?"":"")]}),t.jsx("span",{className:"text-xs font-normal text-gray-400",children:"Tickets verified"})]})}),t.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm",title:"Pending tickets",children:t.jsxs("div",{className:"flex flex-col items-end",children:[t.jsx("span",{children:"Pending"}),t.jsx("span",{className:"text-xs font-normal text-gray-400",children:"Tickets"})]})}),t.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm cursor-pointer hover:text-gray-800",onClick:()=>h("totalRevenue"),title:"Revenue from redeemed tickets",children:t.jsxs("div",{className:"flex flex-col items-end",children:[t.jsxs("span",{children:["Revenue ",s==="totalRevenue"&&(a==="asc"?"":"")]}),t.jsx("span",{className:"text-xs font-normal text-gray-400",children:"From redemptions"})]})})]})}),t.jsx("tbody",{children:d.map((p,b)=>t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"py-4 px-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[b===0&&t.jsx(Yh,{className:"text-yellow-500 w-5 h-5"}),b===1&&t.jsx(Yh,{className:"text-gray-400 w-5 h-5"}),b===2&&t.jsx(Yh,{className:"text-orange-600 w-5 h-5"}),t.jsxs("span",{className:"font-semibold text-gray-900",children:["#",b+1]})]})}),t.jsx("td",{className:"py-4 px-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-900",children:p.adminName}),t.jsxs("p",{className:"text-xs text-gray-500",children:["@",p.adminUsername]})]})}),t.jsx("td",{className:"py-4 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f(p.adminRole)}`,children:p.adminRole.replace("_"," ")})}),t.jsx("td",{className:"py-4 px-4 text-right",children:t.jsx("span",{className:"font-semibold text-blue-600",children:Br(p.totalTickets)})}),t.jsx("td",{className:"py-4 px-4 text-right",children:t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold text-green-600",children:Br(p.redeemedTickets)}),t.jsxs("p",{className:"text-xs text-gray-500",children:[x(p.redeemedTickets,p.totalTickets),"% rate"]})]})}),t.jsx("td",{className:"py-4 px-4 text-right",children:t.jsx("span",{className:"font-semibold text-orange-600",children:Br(p.pendingTickets)})}),t.jsx("td",{className:"py-4 px-4 text-right",children:t.jsx("span",{className:"font-bold text-gray-900",children:mi(p.totalRevenue)})})]},p.adminId))})]})}),t.jsx("div",{className:"lg:hidden space-y-4",children:d.map((p,b)=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[b<3&&t.jsx(Yh,{className:b===0?"text-yellow-500":b===1?"text-gray-400":"text-orange-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-900",children:p.adminName}),t.jsxs("p",{className:"text-xs text-gray-500",children:["@",p.adminUsername]})]})]}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f(p.adminRole)}`,children:p.adminRole.replace("_"," ")})]}),t.jsxs("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg",children:[t.jsx("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"Cash Tickets Issued"}),t.jsx("p",{className:"font-bold text-blue-800 text-lg",children:Br(p.totalTickets)})]}),t.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-xs text-gray-600 font-medium mb-2",children:"Ticket Redemptions"}),t.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Redeemed"}),t.jsx("p",{className:"font-semibold text-green-600",children:Br(p.redeemedTickets)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Pending"}),t.jsx("p",{className:"font-semibold text-orange-600",children:Br(p.pendingTickets)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Rate"}),t.jsxs("p",{className:"font-semibold text-gray-800",children:[x(p.redeemedTickets,p.totalTickets),"%"]})]})]})]}),t.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-gray-600 text-sm flex items-center gap-1",children:[t.jsx(XP,{className:"text-purple-600"})," Revenue"]}),t.jsx("span",{className:"font-bold text-gray-900",children:mi(p.totalRevenue)})]})})]},p.adminId))})]})},fD=({events:e,loading:r})=>{if(!e||e.length===0)return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Top Performing Events"}),t.jsx("p",{className:"text-gray-500 text-center py-8",children:"No event data available"})]});if(r)return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[t.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6 animate-pulse"}),t.jsx("div",{className:"space-y-4",children:[1,2,3].map(a=>t.jsx("div",{className:"h-32 bg-gray-100 rounded animate-pulse"},a))})]});const s=a=>({TECHNOLOGY:"bg-blue-100 text-blue-800",ENTERTAINMENT:"bg-pink-100 text-pink-800",EDUCATION:"bg-green-100 text-green-800",BUSINESS:"bg-yellow-100 text-yellow-800",OTHER:"bg-gray-100 text-gray-800"})[a]||"bg-gray-100 text-gray-800",n=a=>{switch(a){case"ONLINE":return t.jsx(lN,{className:"w-4 h-4 text-green-600"});case"OFFLINE":return t.jsx(oN,{className:"w-4 h-4 text-red-600"});case"HYBRID":return t.jsx(yx,{className:"w-4 h-4 text-purple-600"});default:return t.jsx(yx,{className:"w-4 h-4 text-gray-600"})}};return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Top Performing Events"}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.jsx(aq,{className:"text-yellow-500"}),t.jsxs("span",{children:["Top ",e.length," events"]})]})]}),t.jsx("div",{className:"space-y-4",children:e.map((a,l)=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200 hover:border-blue-300",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l<3&&t.jsx("span",{className:`
                        w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold
                        ${l===0?"bg-yellow-500 text-white":""}
                        ${l===1?"bg-gray-400 text-white":""}
                        ${l===2?"bg-orange-600 text-white":""}
                      `,children:l+1}),t.jsx("h3",{className:"font-bold text-lg text-gray-900",children:a.eventName})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-gray-600",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(q$,{className:"w-4 h-4"}),rX(a.eventDate)]}),a.eventCity&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Z$,{className:"w-4 h-4"}),a.eventCity]}),t.jsxs("span",{className:"flex items-center gap-1",children:[n(a.eventMode),a.eventMode]})]})]}),t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s(a.eventCategory)}`,children:a.eventCategory})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[t.jsx("p",{className:"text-xs text-gray-800 font-medium mb-1",children:"Total Revenue"}),t.jsx("p",{className:"text-lg font-bold text-blue-900",children:mi(a.totalRevenue)})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[t.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"Total Tickets"}),t.jsx("p",{className:"text-lg font-bold text-green-900",children:Br(a.totalTickets)})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t border-gray-100",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-xs text-gray-600 font-medium mb-2 flex items-center gap-1",children:[t.jsx(lN,{className:"text-gray-800"}),"Online Sales"]}),t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Tickets:"}),t.jsx("span",{className:"font-semibold text-gray-900",children:Br(a.onlineTickets)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Revenue:"}),t.jsx("span",{className:"font-semibold text-gray-800",children:mi(a.onlineRevenue)})]})]})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-xs text-gray-600 font-medium mb-2 flex items-center gap-1",children:[t.jsx(oN,{className:"text-red-600"}),"Offline Sales"]}),t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Tickets:"}),t.jsx("span",{className:"font-semibold text-gray-900",children:Br(a.offlineTickets)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Revenue:"}),t.jsx("span",{className:"font-semibold text-green-600",children:mi(a.offlineRevenue)})]})]})]})]})]},a.eventId))})]})};function yue(){const[e,r]=v.useState("lifetime"),[s,n]=v.useState(null),[a,l]=v.useState(!0),[d,h]=v.useState(null),f=async()=>{l(!0);try{const S=await tX();if(S.success)n(S.data),h(new Date),console.log("[Dashboard] Data loaded successfully");else{const T=S.message||"Failed to load dashboard statistics";ot.error(T),console.error("[Dashboard] Error:",S.error),S.error&&console.error("[Dashboard] Backend Error Details:",{status:S.status,message:S.message,error:S.error})}}catch(S){ot.error("An unexpected error occurred while loading dashboard"),console.error("[Dashboard] Exception:",S)}finally{l(!1)}};v.useEffect(()=>{f()},[]);const x=()=>{ot.info("Refreshing dashboard data..."),f()},p=()=>{ot.info("Export functionality coming soon!")},b=S=>S?S[e]||S.lifetime||S:null;return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 tracking-tight",children:"Dashboard"}),t.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Comprehensive insights and analytics",d&&t.jsxs("span",{className:"ml-2",children:[" Updated ",d.toLocaleTimeString()]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:x,disabled:a,className:"flex items-center gap-1.5 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm text-sm",title:"Refresh dashboard data",children:[t.jsx(KP,{className:`w-4 h-4 ${a?"animate-spin":""}`}),t.jsx("span",{className:"hidden sm:inline font-medium",children:"Refresh"})]}),t.jsxs("button",{onClick:p,className:"flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white rounded-lg hover:from-gray-900 hover:to-black transition-all shadow-sm text-sm",title:"Export dashboard data",children:[t.jsx(rq,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline font-medium",children:"Export"})]})]})]}),s&&t.jsx(QW,{selected:e,onChange:r}),!a&&!s&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:t.jsxs("div",{className:"max-w-md mx-auto",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Failed to Load Dashboard"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"There was an error loading the analytics data. This is likely a backend issue."}),t.jsx("button",{onClick:x,className:"px-6 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Try Again"})]})}),s?.payments&&t.jsx(gue,{data:b(s.payments),loading:a}),(s?.users||s?.admins)&&t.jsx(lX,{usersData:s.users,adminsData:s.admins,loading:a}),s?.events&&t.jsx(xue,{data:s.events,enrollmentsData:b(s.enrollments),cashTicketsData:b(s.cashTickets),loading:a}),s?.communications&&t.jsx(sX,{data:b(s.communications),loading:a}),s?.topPerformingEvents&&s.topPerformingEvents.length>0&&t.jsx(fD,{events:s.topPerformingEvents,loading:a}),s?.eventStats&&b(s.eventStats)?.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:["Events Performance (",e.replace(/([A-Z])/g," $1").trim(),")"]}),t.jsx(fD,{events:b(s.eventStats),loading:a})]}),s?.adminPerformance&&s.adminPerformance.length>0&&t.jsx(pue,{data:s.adminPerformance,loading:a}),t.jsx("div",{className:"text-center text-xs text-gray-500 py-6 border-t border-gray-200",children:s?.generatedAt&&t.jsxs("p",{children:["Statistics generated at: ",new Date(s.generatedAt).toLocaleString()]})})]})})}const Cn={BASE:"/web/events",DROPDOWN:"/web/events/dropdown",DELETED:"/web/events/deleted",UPDATE_EXPIRED:"/web/events/update-expired",FEATURED:"/web/events/featured"},vg=e=>{const r=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&r.append(s,n)}),r.toString()},Va={getAll:async(e={})=>{const r=vg(e),s=r?`${Cn.BASE}?${r}`:Cn.BASE;console.log("[EventService] Fetching events with params:",e);const n=await Se(je.get(s));return n.success?console.log("[EventService] Fetched events:",n.data.events?.length):console.error("[EventService] Failed to fetch events:",n.message),n},getById:async e=>{console.log("[EventService] Fetching event:",e);const r=await Se(je.get(`${Cn.BASE}/${e}`));return r.success?console.log("[EventService] Fetched event:",r.data.event?.name):console.error("[EventService] Failed to fetch event:",r.message),r},create:async e=>{console.log("[EventService] Creating event:",e.name);const r=await Se(je.post(Cn.BASE,e));return r.success?console.log("[EventService] Created event:",r.data.event?._id):console.error("[EventService] Failed to create event:",r.message),r},update:async(e,r)=>{console.log("[EventService] Updating event:",e);const s=await Se(je.put(`${Cn.BASE}/${e}`,r));return s.success?console.log("[EventService] Updated event:",s.data.event?.name):console.error("[EventService] Failed to update event:",s.message),s},delete:async e=>{console.log("[EventService] Deleting event:",e);const r=await Se(je.delete(`${Cn.BASE}/${e}`));return r.success?console.log("[EventService] Deleted event successfully"):console.error("[EventService] Failed to delete event:",r.message),r},restore:async e=>{console.log("[EventService] Restoring event:",e);const r=await Se(je.post(`${Cn.BASE}/${e}/restore`));return r.success?console.log("[EventService] Restored event successfully"):console.error("[EventService] Failed to restore event:",r.message),r},permanentDelete:async e=>{console.log("[EventService] Permanently deleting event:",e);const r=await Se(je.delete(`${Cn.BASE}/${e}/permanent`));return r.success?console.log("[EventService] Permanently deleted event successfully"):console.error("[EventService] Failed to permanently delete event:",r.message),r},getDeleted:async(e={})=>{const r=vg(e),s=r?`${Cn.DELETED}?${r}`:Cn.DELETED;console.log("[EventService] Fetching deleted events");const n=await Se(je.get(s));return n.success?console.log("[EventService] Fetched deleted events:",n.data.events?.length):console.error("[EventService] Failed to fetch deleted events:",n.message),n},getDropdownEvents:async(e={})=>{const r=vg(e),s=r?`${Cn.DROPDOWN}?${r}`:Cn.DROPDOWN;console.log("[EventService] Fetching dropdown events with params:",e);const n=await Se(je.get(s));return n.success?console.log("[EventService] Fetched events:",n.data.events?.length):console.error("[EventService] Failed to fetch events:",n.message),n},getTicketStats:async e=>{console.log("[EventService] Fetching ticket stats for event:",e);const r=await Se(je.get(`${Cn.BASE}/${e}/ticket-stats`));return r.success?console.log("[EventService] Fetched ticket stats"):console.error("[EventService] Failed to fetch ticket stats:",r.message),r},updateExpired:async()=>{console.log("[EventService] Updating expired events");const e=await Se(je.post(Cn.UPDATE_EXPIRED));return e.success?console.log("[EventService] Updated expired events:",e.data.updatedCount):console.error("[EventService] Failed to update expired events:",e.message),e},getFeaturedEvents:async(e={})=>{const r=vg(e),s=r?`${Cn.FEATURED}?${r}`:Cn.FEATURED;console.log("[EventService] Fetching featured events");const n=await Se(je.get(s));return n.success?console.log("[EventService] Fetched featured events:",n.data.events?.length):console.error("[EventService] Failed to fetch featured events:",n.message),n}},n9=["TECHNOLOGY","EDUCATION","MEDICAL","COMEDY","ENTERTAINMENT","BUSINESS","SPORTS","ARTS","MUSIC","FOOD","LIFESTYLE","OTHER"],a9=["ONLINE","OFFLINE","HYBRID"],bue=[{value:"createdAt",label:"Created Date"},{value:"name",label:"Name"},{value:"startDate",label:"Start Date"},{value:"endDate",label:"End Date"},{value:"price",label:"Price"}],gD={search:"",category:"",mode:"",city:"",isLive:"",featured:"",minPrice:"",maxPrice:"",startDateFrom:"",startDateTo:"",sortBy:"createdAt",sortOrder:"desc"};function vue(e={}){const[r,s]=v.useState([]),[n,a]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[l,d]=v.useState({...gD,...e}),[h,f]=v.useState(!1),[x,p]=v.useState(null),[b,S]=v.useState([]),[T,A]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[P,D]=v.useState(!1),I=v.useRef(null),L=v.useCallback(async(ge=n.currentPage)=>{f(!0),p(null);try{const re={page:ge,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.category&&{category:l.category},...l.mode&&{mode:l.mode},...l.city&&{city:l.city},...l.isLive!==""&&{isLive:l.isLive},...l.featured!==""&&{featured:l.featured},...l.minPrice&&{minPrice:l.minPrice},...l.maxPrice&&{maxPrice:l.maxPrice},...l.startDateFrom&&{startDateFrom:l.startDateFrom},...l.startDateTo&&{startDateTo:l.startDateTo}},X=await Va.getAll(re);X.success?(s(X.data.events||[]),a(X.data.pagination||n)):(p(X.message),s([]))}catch{p("Failed to fetch events"),s([])}finally{f(!1)}},[l,n.limit,n.currentPage]),_=v.useCallback(async(ge=T.currentPage)=>{f(!0),p(null);try{const re=await Va.getDeleted({page:ge,limit:T.limit});re.success?(S(re.data.events||[]),A(X=>({...X,...re.data.pagination}))):(p(re.message),S([]))}catch{p("Failed to fetch deleted events"),S([])}finally{f(!1)}},[T.currentPage,T.limit]),$=v.useCallback(async ge=>{try{const re=await Va.getById(ge);return re.success?{success:!0,data:re.data.event}:{success:!1,error:re.message}}catch{return{success:!1,error:"Failed to fetch event details"}}},[]),F=v.useCallback(async ge=>{f(!0),p(null);try{const re=await Va.create(ge);return re.success?(await L(1),{success:!0,data:re.data}):{success:!1,error:re.message,validationErrors:Array.isArray(re.error)?re.error:re.data?.errors}}catch{return{success:!1,error:"Failed to create event"}}finally{f(!1)}},[L]),B=v.useCallback(async(ge,re)=>{f(!0),p(null);try{const X=await Va.update(ge,re);return X.success?(s(ae=>ae.map(ve=>ve._id===ge?{...ve,...X.data.event}:ve)),{success:!0,data:X.data}):{success:!1,error:X.message,validationErrors:Array.isArray(X.error)?X.error:X.data?.errors}}catch{return{success:!1,error:"Failed to update event"}}finally{f(!1)}},[]),M=v.useCallback(async ge=>{f(!0),p(null);try{const re=await Va.delete(ge);return re.success?(s(X=>X.filter(ae=>ae._id!==ge)),a(X=>({...X,totalCount:X.totalCount-1,totalPages:Math.ceil((X.totalCount-1)/X.limit)})),{success:!0}):{success:!1,error:re.message}}catch{return{success:!1,error:"Failed to delete event"}}finally{f(!1)}},[]),V=v.useCallback(async ge=>{f(!0),p(null);try{const re=await Va.restore(ge);return re.success?(S(X=>X.filter(ae=>ae._id!==ge)),A(X=>({...X,totalCount:X.totalCount-1,totalPages:Math.ceil((X.totalCount-1)/X.limit)})),{success:!0}):{success:!1,error:re.message}}catch{return{success:!1,error:"Failed to restore event"}}finally{f(!1)}},[]),z=v.useCallback(async ge=>{f(!0),p(null);try{const re=await Va.permanentDelete(ge);return re.success?(S(X=>X.filter(ae=>ae._id!==ge)),A(X=>({...X,totalCount:X.totalCount-1,totalPages:Math.ceil((X.totalCount-1)/X.limit)})),{success:!0}):{success:!1,error:re.message}}catch{return{success:!1,error:"Failed to permanently delete event"}}finally{f(!1)}},[]),H=v.useCallback(async ge=>{try{const re=await Va.getTicketStats(ge);return re.success?{success:!0,data:re.data.stats}:{success:!1,error:re.message}}catch{return{success:!1,error:"Failed to fetch ticket statistics"}}},[]),U=v.useCallback(async()=>{f(!0),p(null);try{const ge=await Va.updateExpired();return ge.success?(await L(n.currentPage),{success:!0,updatedCount:ge.data.updatedCount}):{success:!1,error:ge.message}}catch{return{success:!1,error:"Failed to update expired events"}}finally{f(!1)}},[L,n.currentPage]),G=v.useCallback(ge=>{d(re=>({...re,...ge}))},[]),Q=v.useCallback(ge=>{I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{d(re=>({...re,search:ge}))},300)},[]),ce=v.useCallback(()=>{d({...gD,...e})},[e]),ne=v.useCallback(ge=>{P?_(ge):L(ge)},[P,L,_]),J=v.useCallback(ge=>{a(re=>({...re,limit:ge})),A(re=>({...re,limit:ge}))},[]),W=v.useCallback(()=>{D(ge=>!ge)},[]),le=v.useCallback(()=>{p(null)},[]);return v.useEffect(()=>{P||L(1)},[l,P]),v.useEffect(()=>{P&&_(1)},[P]),v.useEffect(()=>()=>{I.current&&clearTimeout(I.current)},[]),{events:P?b:r,pagination:P?T:n,filters:l,isLoading:h,error:x,showDeleted:P,fetchEvents:L,fetchDeletedEvents:_,getEventById:$,createEvent:F,updateEvent:B,deleteEvent:M,restoreEvent:V,permanentDeleteEvent:z,getTicketStats:H,updateExpiredEvents:U,updateFilters:G,updateSearch:Q,resetFilters:ce,changePage:ne,changeLimit:J,toggleShowDeleted:W,clearError:le}}function Pt({isOpen:e,onClose:r,title:s,children:n,size:a="md",showCloseButton:l=!0,closeOnOverlayClick:d=!0}){const h={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl"},f=v.useCallback(p=>{p.key==="Escape"&&r()},[r]);if(v.useEffect(()=>(e&&(document.addEventListener("keydown",f),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",f),document.body.style.overflow="unset"}),[e,f]),!e)return null;const x=p=>{p.target===p.currentTarget&&d&&r()};return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:x,children:t.jsxs("div",{className:`w-full ${h[a]} bg-white rounded-xl shadow-xl transform transition-all`,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[t.jsx("h2",{id:"modal-title",className:"text-lg font-semibold text-gray-900",children:s}),l&&t.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:t.jsx(ss,{className:"h-5 w-5"})})]}),t.jsx("div",{className:"px-6 py-4 max-h-[calc(100vh-200px)] overflow-y-auto",children:n})]})})}const Nue={UPLOAD:"/web/assets/upload",DELETE:"/web/assets",DOWNLOAD_URL:"/app/assets/download-url"},i9=async(e,r={})=>{const{folder:s="assets",onProgress:n}=r,a=new FormData;(Array.isArray(e)?e:[e]).forEach(d=>{a.append("files",d)}),s&&a.append("folder",s);try{const d=await je.post(Nue.UPLOAD,a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:h=>{if(n&&h.total){const f=Math.round(h.loaded*100/h.total);n(f)}}});return{success:!0,data:d.data.data||d.data,message:d.data.message||"Upload successful",error:null}}catch(d){return console.error("[AssetService] Upload error:",d),{success:!1,data:null,message:d.response?.data?.message||"Upload failed",error:d.response?.data?.error||d.message}}},jue=async(e,r={})=>{const s=await i9(e,r);if(s.success&&s.data?.uploaded?.length>0){const n=s.data.uploaded[0];return{success:!0,url:n.publicUrl,downloadUrl:n.downloadUrl,data:n,error:null}}return{success:!1,url:null,downloadUrl:null,data:null,error:s.error||"Upload failed",message:s.message}},wue=async(e,r={})=>{const s=await i9(e,r);return s.success&&s.data?.uploaded?.length>0?{success:!0,urls:s.data.uploaded.map(n=>n.publicUrl),downloadUrls:s.data.uploaded.map(n=>n.downloadUrl),data:s.data.uploaded,totalUploaded:s.data.totalUploaded,totalFailed:s.data.totalFailed,error:null}:{success:!1,urls:[],downloadUrls:[],data:[],totalUploaded:0,totalFailed:e.length,error:s.error||"Upload failed",message:s.message}},l9=(e,r={})=>{const{allowedTypes:s=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"],maxSize:n=10*1024*1024}=r;return e?s.length>0&&!s.includes(e.type)?{valid:!1,error:`Invalid file type. Allowed: ${s.map(l=>l.split("/")[1]).join(", ")}`}:e.size>n?{valid:!1,error:`File too large. Maximum size: ${(n/1048576).toFixed(1)}MB`}:{valid:!0,error:null}:{valid:!1,error:"No file provided"}},Sue=(e,r={})=>{const s=[],n=[];return e.forEach((a,l)=>{const d=l9(a,r);d.valid?n.push(a):s.push(`${a.name}: ${d.error}`)}),{valid:s.length===0,errors:s,validFiles:n}},Cue=e=>{if(e===0)return"0 Bytes";const r=1024,s=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(r));return parseFloat((e/Math.pow(r,n)).toFixed(2))+" "+s[n]};function ba({onUpload:e,value:r="",values:s=[],multiple:n=!1,accept:a,maxSize:l=10*1024*1024,folder:d="assets",disabled:h=!1,error:f,label:x,required:p=!1,placeholder:b="Drop files here or click to upload",onRemove:S,showUrlInput:T=!0,type:A="image"}){const[P,D]=v.useState(!1),[I,L]=v.useState(!1),[_,$]=v.useState(0),[F,B]=v.useState(null),[M,V]=v.useState(!1),[z,H]=v.useState(""),U=v.useRef(null),G=()=>{if(a)return a;switch(A){case"video":return"video/*";case"any":return"image/*,video/*";default:return"image/*"}},Q=()=>{switch(A){case"video":return["video/mp4","video/webm","video/ogg","video/quicktime"];case"any":return["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","video/mp4","video/webm","video/ogg","video/quicktime"];default:return["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"]}},ce=v.useCallback(oe=>{oe.preventDefault(),!h&&!I&&D(!0)},[h,I]),ne=v.useCallback(oe=>{oe.preventDefault(),D(!1)},[]),J=v.useCallback(oe=>{if(oe.preventDefault(),D(!1),h||I)return;const he=Array.from(oe.dataTransfer.files);he.length>0&&le(n?he:[he[0]])},[h,I,n]),W=oe=>{const he=Array.from(oe.target.files);he.length>0&&le(n?he:[he[0]]),oe.target.value=""},le=async oe=>{B(null),$(0);const he=Q();if(n){const Ve=Sue(oe,{allowedTypes:he,maxSize:l});if(!Ve.valid){B(Ve.errors.join(", "));return}await re(Ve.validFiles)}else{const Ve=l9(oe[0],{allowedTypes:he,maxSize:l});if(!Ve.valid){B(Ve.error);return}await ge(oe[0])}},ge=async oe=>{L(!0),$(0);try{const he=await jue(oe,{folder:d,onProgress:$});he.success&&he.url?(e(he.url),$(100)):B(he.message||he.error||"Upload failed")}catch(he){B(he.message||"Upload failed")}finally{L(!1)}},re=async oe=>{L(!0),$(0);try{const he=await wue(oe,{folder:d,onProgress:$});he.success&&he.urls.length>0?(e([...s,...he.urls]),$(100)):B(he.message||he.error||"Upload failed")}catch(he){B(he.message||"Upload failed")}finally{L(!1)}},X=()=>{if(z.trim()){if(!/^https?:\/\/.+/.test(z.trim())){B("Invalid URL format");return}e(n?[...s,z.trim()]:z.trim()),H(""),V(!1),B(null)}},ae=oe=>{if(S)S(oe);else if(n){const he=s.filter((Ve,Ce)=>Ce!==oe);e(he)}},ve=()=>{e("")},fe=oe=>/\.(mp4|webm|ogg|mov)(\?.*)?$/i.test(oe)||A==="video",se=(oe,he=null)=>{const Ve=fe(oe);return t.jsxs("div",{className:"relative group flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[Ve?t.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0",children:t.jsx(Yz,{className:"h-6 w-6 text-gray-500"})}):t.jsx("img",{src:oe,alt:`Preview ${he!==null?he+1:""}`,className:"w-16 h-16 object-cover rounded flex-shrink-0",onError:Ce=>{Ce.target.style.display="none",Ce.target.nextSibling?.classList.remove("hidden")}}),t.jsx("div",{className:"hidden w-16 h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0",children:t.jsx(Xo,{className:"h-6 w-6 text-gray-400"})}),t.jsx("span",{className:"flex-1 text-sm text-gray-600 truncate",children:oe}),!h&&t.jsx("button",{type:"button",onClick:()=>he!==null?ae(he):ve(),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",children:t.jsx(ss,{className:"h-4 w-4"})})]},he!==null?he:"single")};return n&&s.length>0,t.jsxs("div",{className:"space-y-2",children:[x&&t.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[x,p&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),!n&&r&&se(r),n&&s.length>0&&t.jsx("div",{className:"space-y-2 mb-3",children:s.map((oe,he)=>se(oe,he))}),(n||!r)&&t.jsxs("div",{onDragOver:ce,onDragLeave:ne,onDrop:J,onClick:()=>!h&&!I&&U.current?.click(),className:`
            relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer
            transition-all duration-200
            ${P?"border-gray-800 bg-gray-50":"border-gray-300 hover:border-gray-400"}
            ${h||I?"opacity-50 cursor-not-allowed":""}
            ${f||F?"border-red-300 bg-red-50/50":""}
          `,children:[t.jsx("input",{ref:U,type:"file",accept:G(),multiple:n,onChange:W,disabled:h||I,className:"hidden"}),I?t.jsxs("div",{className:"space-y-3",children:[t.jsx(st,{className:"h-8 w-8 mx-auto text-gray-400 animate-spin"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Uploading..."}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 max-w-xs mx-auto",children:t.jsx("div",{className:"bg-gray-800 h-2 rounded-full transition-all duration-300",style:{width:`${_}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500",children:[_,"%"]})]})]}):t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx(HP,{className:"h-5 w-5 text-gray-500"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:b}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[A==="video"?"MP4, WebM, OGG":A==="any"?"Images or videos":"PNG, JPG, GIF, WebP, SVG"," ","up to ",Cue(l)]})]})]})]}),(f||F)&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-500",children:[t.jsx(Tt,{className:"h-4 w-4 flex-shrink-0"}),t.jsx("span",{children:f||F})]}),T&&!h&&t.jsx("div",{className:"pt-2",children:M?t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"url",value:z,onChange:oe=>H(oe.target.value),placeholder:"Enter URL manually",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none",onKeyDown:oe=>{oe.key==="Enter"&&(oe.preventDefault(),X()),oe.key==="Escape"&&(V(!1),H(""))}}),t.jsx("button",{type:"button",onClick:X,disabled:!z.trim(),className:"px-3 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 text-sm",children:t.jsx(Rn,{className:"h-4 w-4"})}),t.jsx("button",{type:"button",onClick:()=>{V(!1),H("")},className:"px-3 py-2 border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:t.jsx(ss,{className:"h-4 w-4"})})]}):t.jsx("button",{type:"button",onClick:()=>V(!0),className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Or enter URL manually"})})]})}function o9({startDate:e,endDate:r,bookingStartDate:s,bookingEndDate:n}){const a=h=>h?new Date(h).toLocaleString("en-IN",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",l=e&&r&&s&&n,d=()=>{if(!l)return!1;const h=new Date(s),f=new Date(n),x=new Date(e),p=new Date(r);return h<f&&x<p&&h<p&&f<=p};return t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(dr,{className:"h-5 w-5 text-blue-600"}),t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Event Timeline Preview"})]}),l&&d()?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-0 right-0 top-8 h-2 bg-gradient-to-r from-green-300 via-green-400 to-yellow-300 rounded-full opacity-50"}),t.jsx("div",{className:"absolute left-1/3 right-0 top-8 h-2 bg-gradient-to-r from-yellow-300 via-blue-400 to-blue-500 rounded-full"}),t.jsxs("div",{className:"relative flex justify-between items-start pt-16",children:[t.jsxs("div",{className:"flex flex-col items-center -mt-16 w-1/4",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center shadow-lg mb-2",children:t.jsx(Go,{className:"h-6 w-6 text-white"})}),t.jsx("span",{className:"text-xs font-semibold text-green-700 text-center mb-1",children:"Booking Opens"}),t.jsx("span",{className:"text-xs text-gray-600 text-center",children:a(s)})]}),t.jsxs("div",{className:"flex flex-col items-center -mt-16 w-1/4",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center shadow-lg mb-2",children:t.jsx(Xt,{className:"h-6 w-6 text-white"})}),t.jsx("span",{className:"text-xs font-semibold text-blue-700 text-center mb-1",children:"Event Starts"}),t.jsx("span",{className:"text-xs text-gray-600 text-center",children:a(e)})]}),t.jsxs("div",{className:"flex flex-col items-center -mt-16 w-1/4",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-500 flex items-center justify-center shadow-lg mb-2",children:t.jsx(kl,{className:"h-6 w-6 text-white"})}),t.jsx("span",{className:"text-xs font-semibold text-yellow-700 text-center mb-1",children:"Booking Closes"}),t.jsx("span",{className:"text-xs text-gray-600 text-center",children:a(n)})]}),t.jsxs("div",{className:"flex flex-col items-center -mt-16 w-1/4",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-500 flex items-center justify-center shadow-lg mb-2",children:t.jsx(Xt,{className:"h-6 w-6 text-white"})}),t.jsx("span",{className:"text-xs font-semibold text-indigo-700 text-center mb-1",children:"Event Ends"}),t.jsx("span",{className:"text-xs text-gray-600 text-center",children:a(r)})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[t.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-200",children:[t.jsx("div",{className:"text-xs font-semibold text-green-700 mb-1",children:" Booking Period"}),t.jsx("div",{className:"text-xs text-gray-600",children:"Users can book tickets"})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[t.jsx("div",{className:"text-xs font-semibold text-blue-700 mb-1",children:" Event Period"}),t.jsx("div",{className:"text-xs text-gray-600",children:"Event is happening"})]})]})]}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-3",children:t.jsx(dr,{className:"h-8 w-8 text-gray-400"})}),t.jsx("p",{className:"text-sm text-gray-500",children:"Fill in all date fields to see the timeline preview"})]})]})}const Ng={SEAT_ARRANGEMENT:"/web/events"},$c={createSeatArrangement:async(e,r)=>(console.log("[SeatArrangementService] Creating seat arrangement for event:",e),Se(je.post(`${Ng.SEAT_ARRANGEMENT}/${e}/seat-arrangement`,r))),getSeatArrangement:async e=>(console.log("[SeatArrangementService] Fetching seat arrangement for event:",e),Se(je.get(`${Ng.SEAT_ARRANGEMENT}/${e}/seat-arrangement`))),updateSeatArrangement:async(e,r)=>(console.log("[SeatArrangementService] Updating seat arrangement for event:",e),Se(je.put(`${Ng.SEAT_ARRANGEMENT}/${e}/seat-arrangement`,r))),deleteSeatArrangement:async e=>(console.log("[SeatArrangementService] Deleting seat arrangement for event:",e),Se(je.delete(`${Ng.SEAT_ARRANGEMENT}/${e}/seat-arrangement`))),generateSeatLabels:e=>{const r=[],s=/^([A-Z]+)(\d+)-([A-Z]+)(\d+)$/i,n=e.match(s);if(n){const[,d,h,f,x]=n,p=d.toUpperCase().charCodeAt(0),b=f.toUpperCase().charCodeAt(0);for(let S=p;S<=b;S++){const T=String.fromCharCode(S),A=parseInt(x),P=S===p?parseInt(h):1;for(let D=P;D<=A;D++)r.push(`${T}${D}`)}return r}const a=/^(\d+)-(\d+)$/,l=e.match(a);if(l){const[,d,h]=l;for(let f=parseInt(d);f<=parseInt(h);f++)r.push(String(f));return r}return e.includes(",")?e.split(",").map(d=>d.trim()).filter(Boolean):[e.trim()]},parseSeatLabels:e=>{if(!e||!e.trim())return[];const r=new Set;return e.split(/[\n;]/).map(n=>n.trim()).filter(Boolean).forEach(n=>{n.split(",").map(l=>l.trim()).filter(Boolean).forEach(l=>{/^[A-Z]?\d+-[A-Z]?\d+$/i.test(l)||/^[A-Z]+\d+-[A-Z]+\d+$/i.test(l)?$c.generateSeatLabels(l).forEach(f=>r.add(f)):r.add(l)})}),Array.from(r).map(n=>({label:n}))}},xD=(e=null,r=null)=>({name:e?.name||"",description:e?.description||"",imageUrls:e?.imageUrls||[],thumbnail:{imageUrl:e?.thumbnail?.imageUrl||"",videoUrl:e?.thumbnail?.videoUrl||""},mode:e?.mode||"",city:e?.city||"",gmapLink:e?.gmapLink||"",category:e?.category||"",startDate:e?.startDate?jg(e.startDate):"",endDate:e?.endDate?jg(e.endDate):"",bookingStartDate:e?.bookingStartDate?jg(e.bookingStartDate):"",bookingEndDate:e?.bookingEndDate?jg(e.bookingEndDate):"",duration:e?.duration??"",price:e?.price??"",compareAtPrice:e?.compareAtPrice??"",availableSeats:e?.availableSeats??"",usePricingTiers:e?.pricingTiers?.length>0,pricingTiers:e?.pricingTiers||[],isLive:e?.isLive??!1,featured:e?.featured??!1,useSeatArrangement:!!r,seatArrangement:{imageUrl:r?.imageUrl||"",seatLabelsInput:r?.seats?.map(s=>s.label).join(", ")||"",seats:r?.seats||[]}});function jg(e){if(!e)return"";const r=new Date(e),s=r.getFullYear(),n=String(r.getMonth()+1).padStart(2,"0"),a=String(r.getDate()).padStart(2,"0"),l=String(r.getHours()).padStart(2,"0"),d=String(r.getMinutes()).padStart(2,"0");return`${s}-${n}-${a}T${l}:${d}`}const Aue=(e,r=!1)=>{const s={};if(e.name.trim()?e.name.length>200&&(s.name="Name must be 200 characters or less"):s.name="Name is required",e.description.trim()?e.description.length>5e3&&(s.description="Description must be 5000 characters or less"):s.description="Description is required",e.mode||(s.mode="Mode is required"),(e.mode==="OFFLINE"||e.mode==="HYBRID")&&!e.city.trim()&&(s.city="City is required for offline or hybrid events"),e.gmapLink&&e.gmapLink.trim()){const n=/^https?:\/\/(www\.)?(google\.[a-z.]+\/maps|maps\.google\.[a-z.]+|goo\.gl\/maps|maps\.app\.goo\.gl)\/.+/i;/^https?:\/\/.+/.test(e.gmapLink.trim())?n.test(e.gmapLink.trim())||(s.gmapLink="Please provide a valid Google Maps link"):s.gmapLink="Please provide a valid URL"}if(e.category||(s.category="Category is required"),e.startDate?r||new Date(e.startDate)<=new Date&&(s.startDate="Start date must be in the future"):s.startDate="Start date is required",!e.endDate)s.endDate="End date is required";else if(e.startDate){const n=new Date(e.startDate);new Date(e.endDate)<=n&&(s.endDate="End date must be after start date")}if(!e.bookingStartDate)s.bookingStartDate="Booking start date is required";else if(e.endDate){const n=new Date(e.bookingStartDate),a=new Date(e.endDate);n>=a&&(s.bookingStartDate="Booking start must be before event end")}if(!e.bookingEndDate)s.bookingEndDate="Booking end date is required";else if(e.bookingStartDate){const n=new Date(e.bookingStartDate);new Date(e.bookingEndDate)<=n&&(s.bookingEndDate="Booking end must be after booking start")}if(e.bookingEndDate&&e.endDate){const n=new Date(e.bookingEndDate),a=new Date(e.endDate);n>a&&(s.bookingEndDate="Booking end cannot be after event end")}if(!e.usePricingTiers)e.price===""||e.price===null||e.price===void 0?s.price="Price is required":(isNaN(e.price)||Number(e.price)<0)&&(s.price="Price must be a valid positive number"),e.compareAtPrice!==""&&e.compareAtPrice!==null&&e.compareAtPrice!==void 0&&(isNaN(e.compareAtPrice)||Number(e.compareAtPrice)<0?s.compareAtPrice="Compare at price must be a valid positive number":Number(e.compareAtPrice)<Number(e.price)&&(s.compareAtPrice="Compare at price must be greater than or equal to price"));else if(e.pricingTiers.length===0)s.pricingTiers="At least one pricing tier is required";else{const n=[];e.pricingTiers.forEach((a,l)=>{const d={};a.name?.trim()||(d.name="Tier name is required"),a.price===""||a.price===null||a.price===void 0?d.price="Tier price is required":(isNaN(a.price)||Number(a.price)<0)&&(d.price="Invalid price"),Object.keys(d).length>0&&(n[l]=d)}),n.some(a=>a)&&(s.tierErrors=n)}if(e.availableSeats!==""&&e.availableSeats!==null&&e.availableSeats!==void 0&&(isNaN(e.availableSeats)||Number(e.availableSeats)<0)&&(s.availableSeats="Available seats must be a valid positive number"),e.imageUrls.length>0){const n=/^https?:\/\/.+/;e.imageUrls.forEach((a,l)=>{a&&!n.test(a)&&(s.imageUrls||(s.imageUrls={}),s.imageUrls[l]="Invalid URL format")})}return e.thumbnail.imageUrl&&!/^https?:\/\/.+/.test(e.thumbnail.imageUrl)&&(s.thumbnailImage="Invalid thumbnail image URL"),e.thumbnail.videoUrl&&!/^https?:\/\/.+/.test(e.thumbnail.videoUrl)&&(s.thumbnailVideo="Invalid thumbnail video URL"),e.useSeatArrangement&&(e.mode==="OFFLINE"||e.mode==="HYBRID")&&(e.seatArrangement.imageUrl?/^https?:\/\/.+/.test(e.seatArrangement.imageUrl)||(s["seatArrangement.imageUrl"]="Invalid seating map image URL"):s["seatArrangement.imageUrl"]="Seating map image is required",(!e.seatArrangement.seats||e.seatArrangement.seats.length===0)&&(s["seatArrangement.seats"]="At least one seat must be defined")),{isValid:Object.keys(s).length===0,errors:s}},pD=()=>({name:"",price:"",compareAtPrice:"",shortDescription:"",notes:"",ticketQuantity:1});function yD({isOpen:e,onClose:r,onSubmit:s,event:n=null,seatArrangement:a=null,isLoading:l=!1,serverError:d=null,validationErrors:h=null}){const f=!!n,[x,p]=v.useState(xD(n,a)),[b,S]=v.useState({});v.useEffect(()=>{e&&(p(xD(n,a)),S({}))},[e,n,a]),v.useEffect(()=>{if(h&&Array.isArray(h)){const H={};h.forEach(U=>{U.field&&(H[U.field]=U.message)}),S(U=>({...U,...H}))}},[h]);const T=H=>{const{name:U,value:G,type:Q}=H.target,ce=Q==="number"?G===""?"":Number(G):G;p(ne=>({...ne,[U]:ce})),b[U]&&S(ne=>({...ne,[U]:null}))},A=(H,U)=>{p(Q=>({...Q,thumbnail:{...Q.thumbnail,[H]:U}}));const G=H==="imageUrl"?"thumbnailImage":"thumbnailVideo";b[G]&&S(Q=>({...Q,[G]:null}))},P=H=>{p(U=>({...U,imageUrls:U.imageUrls.filter((G,Q)=>Q!==H)}))},D=()=>{p(H=>({...H,usePricingTiers:!H.usePricingTiers,pricingTiers:H.usePricingTiers?[]:[pD()],price:H.usePricingTiers?"":H.price,compareAtPrice:H.usePricingTiers?"":H.compareAtPrice}))},I=()=>{p(H=>({...H,pricingTiers:[...H.pricingTiers,pD()]}))},L=H=>{p(U=>({...U,pricingTiers:U.pricingTiers.filter((G,Q)=>Q!==H)}))},_=(H,U,G)=>{p(Q=>({...Q,pricingTiers:Q.pricingTiers.map((ce,ne)=>ne===H?{...ce,[U]:U==="price"||U==="compareAtPrice"||U==="ticketQuantity"?G===""?"":Number(G):G}:ce)})),b.tierErrors?.[H]?.[U]&&S(Q=>{const ce=[...Q.tierErrors||[]];return ce[H]&&delete ce[H][U],{...Q,tierErrors:ce}})},$=()=>{p(H=>({...H,useSeatArrangement:!H.useSeatArrangement,seatArrangement:H.useSeatArrangement?H.seatArrangement:{imageUrl:"",seatLabelsInput:"",seats:[]}}))},F=(H,U)=>{p(G=>({...G,seatArrangement:{...G.seatArrangement,[H]:U}})),b[`seatArrangement.${H}`]&&S(G=>({...G,[`seatArrangement.${H}`]:null}))},B=()=>{const H=x.seatArrangement.seatLabelsInput;if(!H.trim()){p(G=>({...G,seatArrangement:{...G.seatArrangement,seats:[]}}));return}const U=$c.parseSeatLabels(H);p(G=>({...G,seatArrangement:{...G.seatArrangement,seats:U}}))},M=H=>{p(U=>({...U,seatArrangement:{...U.seatArrangement,seats:U.seatArrangement.seats.filter((G,Q)=>Q!==H)}}))},V=async H=>{H.preventDefault();const U=Aue(x,f);if(!U.isValid){S(U.errors);return}const G={name:x.name.trim(),description:x.description.trim(),mode:x.mode,category:x.category,startDate:new Date(x.startDate).toISOString(),endDate:new Date(x.endDate).toISOString(),bookingStartDate:new Date(x.bookingStartDate).toISOString(),bookingEndDate:new Date(x.bookingEndDate).toISOString()};x.city.trim()&&(G.city=x.city.trim()),x.gmapLink.trim()&&(G.gmapLink=x.gmapLink.trim()),x.imageUrls.length>0&&(G.imageUrls=x.imageUrls.filter(Q=>Q.trim())),(x.thumbnail.imageUrl||x.thumbnail.videoUrl)&&(G.thumbnail={},x.thumbnail.imageUrl&&(G.thumbnail.imageUrl=x.thumbnail.imageUrl.trim()),x.thumbnail.videoUrl&&(G.thumbnail.videoUrl=x.thumbnail.videoUrl.trim())),x.usePricingTiers&&x.pricingTiers.length>0?G.pricingTiers=x.pricingTiers.map(Q=>({name:Q.name.trim(),price:Number(Q.price),...Q.compareAtPrice!==""&&{compareAtPrice:Number(Q.compareAtPrice)},...Q.shortDescription&&{shortDescription:Q.shortDescription.trim()},...Q.notes&&{notes:Q.notes.trim()},ticketQuantity:Number(Q.ticketQuantity)||1})):(G.price=Number(x.price),x.compareAtPrice!==""&&(G.compareAtPrice=Number(x.compareAtPrice))),x.availableSeats!==""&&(G.availableSeats=Number(x.availableSeats)),x.duration!==""&&x.duration!==null&&x.duration!==void 0&&(G.duration=Number(x.duration)),f&&(G.isLive=x.isLive,G.featured=x.featured),x.useSeatArrangement&&(G.seatArrangement={imageUrl:x.seatArrangement.imageUrl,seats:x.seatArrangement.seats}),await s(G)},z=()=>{l||r()};return t.jsx(Pt,{isOpen:e,onClose:z,title:f?"Edit Event":"Create Event",size:"2xl",closeOnOverlayClick:!l,children:t.jsxs("form",{onSubmit:V,className:"space-y-6",children:[d&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:d}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Basic Information"}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Event Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"name",name:"name",value:x.name,onChange:T,disabled:l,maxLength:200,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter event name"}),b.name&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.name})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{id:"description",name:"description",value:x.description,onChange:T,disabled:l,rows:4,maxLength:5e3,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none ${b.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter event description"}),t.jsxs("div",{className:"flex justify-between mt-1",children:[b.description?t.jsx("p",{className:"text-sm text-red-500",children:b.description}):t.jsx("span",{}),t.jsxs("span",{className:"text-xs text-gray-500",children:[x.description.length,"/5000"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"mode",className:"block text-sm font-medium text-gray-700 mb-1",children:["Mode ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{id:"mode",name:"mode",value:x.mode,onChange:T,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b.mode?"border-red-500":"border-gray-300"}`,children:[t.jsx("option",{value:"",children:"Select mode"}),a9.map(H=>t.jsx("option",{value:H,children:H},H))]}),b.mode&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.mode})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{id:"category",name:"category",value:x.category,onChange:T,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b.category?"border-red-500":"border-gray-300"}`,children:[t.jsx("option",{value:"",children:"Select category"}),n9.map(H=>t.jsx("option",{value:H,children:H.charAt(0)+H.slice(1).toLowerCase()},H))]}),b.category&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.category})]})]}),(x.mode==="OFFLINE"||x.mode==="HYBRID")&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:["City ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"city",name:"city",value:x.city,onChange:T,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b.city?"border-red-500":"border-gray-300"}`,placeholder:"Enter city"}),b.city&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.city})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"gmapLink",className:"block text-sm font-medium text-gray-700 mb-1",children:t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Aj,{className:"h-4 w-4"}),"Google Maps Link"]})}),t.jsx("input",{type:"url",id:"gmapLink",name:"gmapLink",value:x.gmapLink,onChange:T,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b.gmapLink?"border-red-500":"border-gray-300"}`,placeholder:"https://maps.app.goo.gl/..."}),b.gmapLink&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.gmapLink})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Event Schedule"}),t.jsx("p",{className:"text-sm text-gray-500",children:"When does the event actually happen?"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:["Event Start Date & Time ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"datetime-local",id:"startDate",name:"startDate",value:x.startDate,onChange:T,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b.startDate?"border-red-500":"border-gray-300"}`}),b.startDate&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.startDate}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"When does the event begin?"})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:["Event End Date & Time ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"datetime-local",id:"endDate",name:"endDate",value:x.endDate,onChange:T,disabled:l,min:x.startDate,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b.endDate?"border-red-500":"border-gray-300"}`}),b.endDate&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.endDate}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"When does the event end?"})]})]}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2 mt-6",children:"Booking Window"}),t.jsx("p",{className:"text-sm text-gray-500",children:"When can users book tickets for this event?"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"bookingStartDate",className:"block text-sm font-medium text-gray-700 mb-1",children:["Booking Start Date & Time ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"datetime-local",id:"bookingStartDate",name:"bookingStartDate",value:x.bookingStartDate,onChange:T,disabled:l,max:x.endDate,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b.bookingStartDate?"border-red-500":"border-gray-300"}`}),b.bookingStartDate&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.bookingStartDate}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"When can users start booking?"})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"bookingEndDate",className:"block text-sm font-medium text-gray-700 mb-1",children:["Booking End Date & Time ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"datetime-local",id:"bookingEndDate",name:"bookingEndDate",value:x.bookingEndDate,onChange:T,disabled:l,min:x.bookingStartDate,max:x.endDate,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b.bookingEndDate?"border-red-500":"border-gray-300"}`}),b.bookingEndDate&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.bookingEndDate}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"When should ticket sales close?"})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:["Duration (minutes) ",t.jsx("span",{className:"text-gray-400 text-xs",children:"Optional"})]}),t.jsx("input",{type:"number",id:"duration",name:"duration",value:x.duration,onChange:T,disabled:l,min:"0",placeholder:"e.g., 120",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Event duration in minutes (for reference)"})]}),t.jsx("div",{className:"mt-6",children:t.jsx(o9,{startDate:x.startDate,endDate:x.endDate,bookingStartDate:x.bookingStartDate,bookingEndDate:x.bookingEndDate})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pricing"}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:x.usePricingTiers,onChange:D,disabled:l,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Use pricing tiers"})]})]}),x.usePricingTiers?t.jsxs("div",{className:"space-y-4",children:[b.pricingTiers&&t.jsx("p",{className:"text-sm text-red-500",children:b.pricingTiers}),x.pricingTiers.map((H,U)=>t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"font-medium text-gray-700",children:["Tier ",U+1]}),x.pricingTiers.length>1&&t.jsx("button",{type:"button",onClick:()=>L(U),disabled:l,className:"p-1 text-red-500 hover:bg-red-50 rounded transition-colors",children:t.jsx(ir,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tier Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:H.name,onChange:G=>_(U,"name",G.target.value),disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b.tierErrors?.[U]?.name?"border-red-500":"border-gray-300"}`,placeholder:"e.g., General Admission"}),b.tierErrors?.[U]?.name&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.tierErrors[U].name})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:H.price,onChange:G=>_(U,"price",G.target.value),disabled:l,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b.tierErrors?.[U]?.price?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),b.tierErrors?.[U]?.price&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.tierErrors[U].price})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compare at Price"}),t.jsx("input",{type:"number",value:H.compareAtPrice,onChange:G=>_(U,"compareAtPrice",G.target.value),disabled:l,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"0.00"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ticket Quantity"}),t.jsx("input",{type:"number",value:H.ticketQuantity,onChange:G=>_(U,"ticketQuantity",G.target.value),disabled:l,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"1"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Description"}),t.jsx("input",{type:"text",value:H.shortDescription,onChange:G=>_(U,"shortDescription",G.target.value),disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"Brief description of this tier"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{value:H.notes,onChange:G=>_(U,"notes",G.target.value),disabled:l,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Additional notes"})]})]})]},U)),t.jsxs("button",{type:"button",onClick:I,disabled:l,className:"flex items-center gap-2 px-4 py-2 text-gray-800 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[t.jsx(fr,{className:"h-4 w-4"}),"Add Pricing Tier"]}),t.jsxs("div",{className:"w-full md:w-1/3",children:[t.jsx("label",{htmlFor:"availableSeats",className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Available Seats"}),t.jsx("input",{type:"number",id:"availableSeats",name:"availableSeats",value:x.availableSeats,onChange:T,disabled:l,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b.availableSeats?"border-red-500":"border-gray-300"}`,placeholder:"Unlimited"}),b.availableSeats&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.availableSeats})]})]}):t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:["Price ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",id:"price",name:"price",value:x.price,onChange:T,disabled:l,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b.price?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),b.price&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.price})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"compareAtPrice",className:"block text-sm font-medium text-gray-700 mb-1",children:"Compare at Price"}),t.jsx("input",{type:"number",id:"compareAtPrice",name:"compareAtPrice",value:x.compareAtPrice,onChange:T,disabled:l,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b.compareAtPrice?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),b.compareAtPrice&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.compareAtPrice})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"availableSeats",className:"block text-sm font-medium text-gray-700 mb-1",children:"Available Seats"}),t.jsx("input",{type:"number",id:"availableSeats",name:"availableSeats",value:x.availableSeats,onChange:T,disabled:l,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b.availableSeats?"border-red-500":"border-gray-300"}`,placeholder:"Unlimited"}),b.availableSeats&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.availableSeats})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Media"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(ba,{label:"Thumbnail Image",value:x.thumbnail.imageUrl,onUpload:H=>A("imageUrl",H),disabled:l,error:b.thumbnailImage,type:"image",folder:"events/thumbnails",placeholder:"Drop image here or click to upload"}),t.jsx(ba,{label:"Thumbnail Video",value:x.thumbnail.videoUrl,onUpload:H=>A("videoUrl",H),disabled:l,error:b.thumbnailVideo,type:"video",folder:"events/videos",placeholder:"Drop video here or click to upload"})]}),t.jsx(ba,{label:"Image Gallery",values:x.imageUrls,onUpload:H=>p(U=>({...U,imageUrls:H})),onRemove:H=>P(H),multiple:!0,disabled:l,error:b.imageUrls?"Some image URLs are invalid":null,type:"image",folder:"events/gallery",placeholder:"Drop images here or click to upload"})]}),(x.mode==="OFFLINE"||x.mode==="HYBRID")&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[t.jsx(iz,{className:"h-5 w-5"}),"Seat Arrangement"]}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:x.useSeatArrangement,onChange:$,disabled:l,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Enable seat selection"})]})]}),x.useSeatArrangement&&t.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsx(lV,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"text-sm text-blue-700",children:[t.jsx("p",{className:"font-medium",children:"Seat arrangement will be created after the event is saved."}),t.jsx("p",{className:"text-xs mt-1",children:'Upload a seating map image and define seat labels using patterns like "A1-A10" or "1-50", separated by commas.'})]})]}),t.jsx(ba,{label:"Seating Map Image",value:x.seatArrangement.imageUrl,onUpload:H=>F("imageUrl",H),disabled:l,error:b["seatArrangement.imageUrl"],type:"image",folder:"events/seat-maps",placeholder:"Upload seating arrangement diagram",required:!0}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Seat Labels ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:x.seatArrangement.seatLabelsInput,onChange:H=>F("seatLabelsInput",H.target.value),disabled:l,className:`flex-1 px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${b["seatArrangement.seats"]?"border-red-500":"border-gray-300"}`,placeholder:"A1-A10, B1-B10, 1-50"}),t.jsx("button",{type:"button",onClick:B,disabled:l||!x.seatArrangement.seatLabelsInput.trim(),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50",children:"Generate"})]}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:'Use patterns: "A1-A10" for A1, A2...A10 | "1-50" for 1, 2...50 | Comma separated for multiple ranges'}),b["seatArrangement.seats"]&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:b["seatArrangement.seats"]})]}),x.seatArrangement.seats.length>0&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Generated Seats (",x.seatArrangement.seats.length,")"]}),t.jsx("button",{type:"button",onClick:()=>p(H=>({...H,seatArrangement:{...H.seatArrangement,seats:[],seatLabelsInput:""}})),disabled:l,className:"text-xs text-red-500 hover:text-red-700",children:"Clear all"})]}),t.jsx("div",{className:"max-h-40 overflow-y-auto p-3 bg-white border border-gray-200 rounded-lg",children:t.jsx("div",{className:"flex flex-wrap gap-2",children:x.seatArrangement.seats.map((H,U)=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 text-sm rounded-md border border-gray-200",children:[H.label,t.jsx("button",{type:"button",onClick:()=>M(U),disabled:l,className:"text-gray-400 hover:text-red-500",children:t.jsx(ss,{className:"h-3 w-3"})})]},U))})})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Status"}),t.jsxs("div",{className:"flex flex-wrap gap-6",children:[t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"checkbox",checked:x.isLive,onChange:H=>p(U=>({...U,isLive:H.target.checked})),disabled:l,className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-green-500 peer-disabled:opacity-50 transition-colors"}),t.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Live"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Event is visible to users"})]})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"checkbox",checked:x.featured,onChange:H=>p(U=>({...U,featured:H.target.checked})),disabled:l,className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-purple-500 peer-disabled:opacity-50 transition-colors"}),t.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Featured"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Highlight in featured sections"})]})]})]})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:z,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[l&&t.jsx(st,{className:"h-4 w-4 animate-spin"}),f?"Update Event":"Create Event"]})]})]})})}const c9=e=>{if(!e)return"Unknown";const r=new Date,s=new Date(e.bookingStartDate),n=new Date(e.bookingEndDate),a=new Date(e.startDate),l=new Date(e.endDate);return r>l?"Completed":r>=a&&r<=l?"Ongoing":r>n&&r<a?"Booking Closed":r>=s&&r<=n?"Booking Open":r<s?"Upcoming":"Unknown"},d9=e=>{const r={Upcoming:{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300"},"Booking Open":{bg:"bg-green-100",text:"text-green-700",border:"border-green-300"},"Booking Closed":{bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-300"},Ongoing:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"},Completed:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300"}};return r[e]||r.Unknown||{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300"}},wg=e=>e?new Date(e).toLocaleString("en-IN",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";function _c(e){return e?new Date(e).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"N/A"}function Sg(e){return e==null?"Free":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e)}function Eue(e){const r={TECHNOLOGY:"bg-blue-100 text-gray-900",EDUCATION:"bg-indigo-100 text-indigo-700",MEDICAL:"bg-green-100 text-green-700",COMEDY:"bg-yellow-100 text-yellow-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",BUSINESS:"bg-gray-100 text-gray-700",SPORTS:"bg-orange-100 text-orange-700",ARTS:"bg-purple-100 text-purple-700",MUSIC:"bg-red-100 text-red-700",FOOD:"bg-amber-100 text-amber-700",LIFESTYLE:"bg-teal-100 text-teal-700",OTHER:"bg-slate-100 text-slate-700"};return r[e]||r.OTHER}function Tue(e){return{ONLINE:"bg-green-100 text-green-700",OFFLINE:"bg-blue-100 text-gray-900",HYBRID:"bg-purple-100 text-purple-700"}[e]||"bg-gray-100 text-gray-700"}function Due(e){return e==="ONLINE"||e==="HYBRID"?S0:Aj}function Oue({isOpen:e,onClose:r,event:s}){const[n,a]=v.useState(0);if(v.useEffect(()=>{e&&s&&a(0)},[e,s]),!s)return null;const l=Due(s.mode),d=s.pricingTiers&&s.pricingTiers.length>0;return t.jsx(Pt,{isOpen:e,onClose:r,title:"Event Details",size:"2xl",children:t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-start justify-between gap-4",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:s.name}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Eue(s.category)}`,children:s.category}),t.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Tue(s.mode)}`,children:s.mode}),s.isLive?t.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700",children:"Live"}):t.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-600",children:"Not Live"}),s.featured&&t.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-700",children:"Featured"}),s.isDeleted&&t.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-700",children:"Deleted"})]})]})}),(s.thumbnail?.imageUrl||s.imageUrls?.length>0)&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"relative aspect-video bg-gray-100 rounded-lg overflow-hidden",children:[s.thumbnail?.imageUrl||s.imageUrls?.length>0?t.jsx("img",{src:s.imageUrls?.[n]||s.thumbnail?.imageUrl,alt:s.name,className:"w-full h-full object-cover",onError:h=>{h.target.src="https://via.placeholder.com/800x450?text=No+Image"}}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No image available"}),s.thumbnail?.videoUrl&&t.jsxs("a",{href:s.thumbnail.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-3 right-3 flex items-center gap-2 px-3 py-2 bg-black/70 text-white rounded-lg hover:bg-black/80 transition-colors",children:[t.jsx(VP,{className:"h-4 w-4"}),"Watch Video"]})]}),s.imageUrls&&s.imageUrls.length>1&&t.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:s.imageUrls.map((h,f)=>t.jsx("button",{onClick:()=>a(f),className:`flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-colors ${n===f?"border-blue-500":"border-transparent"}`,children:t.jsx("img",{src:h,alt:`${s.name} ${f+1}`,className:"w-full h-full object-cover",onError:x=>{x.target.style.display="none"}})},f))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Description"}),t.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s.description})]}),t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[(()=>{const h=c9(s),f=d9(h);return t.jsx("span",{className:`inline-flex px-3 py-1.5 rounded-full text-sm font-medium border ${f.bg} ${f.text} ${f.border}`,children:h})})(),s.isLive&&t.jsx("span",{className:"inline-flex px-3 py-1.5 rounded-full text-sm font-medium bg-purple-100 text-purple-700 border border-purple-300",children:"Visible to Users"})]}),t.jsx("div",{className:"mb-6",children:t.jsx(o9,{startDate:s.startDate,endDate:s.endDate,bookingStartDate:s.bookingStartDate,bookingEndDate:s.bookingEndDate})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-3",children:[t.jsx(Xt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Event Schedule"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Event Starts"}),t.jsx("p",{className:"text-sm text-gray-900 font-medium",children:_c(s.startDate)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Event Ends"}),t.jsx("p",{className:"text-sm text-gray-900 font-medium",children:_c(s.endDate)})]})]})]}),t.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[t.jsxs("div",{className:"flex items-center gap-2 text-blue-700 mb-3",children:[t.jsx(Go,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Booking Window"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-green-700 font-medium",children:"Booking Opens"}),t.jsx("p",{className:"text-sm text-gray-900 font-medium",children:_c(s.bookingStartDate)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-yellow-700 font-medium",children:"Booking Closes"}),t.jsx("p",{className:"text-sm text-gray-900 font-medium",children:_c(s.bookingEndDate)})]})]})]}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-2",children:[t.jsx(l,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Location"})]}),t.jsx("p",{className:"text-gray-900 font-medium",children:s.mode==="ONLINE"?"Online Event":s.city||"Location not specified"}),t.jsxs("p",{className:"text-sm text-gray-500 capitalize",children:[s.mode?.toLowerCase()," event"]})]})]}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-3",children:[t.jsx(Uz,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Pricing"})]}),d?t.jsx("div",{className:"space-y-3",children:s.pricingTiers.map((h,f)=>t.jsxs("div",{className:"flex items-start justify-between p-3 bg-white rounded-lg border border-gray-200",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:h.name}),h.shortDescription&&t.jsx("p",{className:"text-sm text-gray-500",children:h.shortDescription}),h.notes&&t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.notes}),h.ticketQuantity>1&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Includes ",h.ticketQuantity," tickets"]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"font-semibold text-gray-900",children:Sg(h.price)}),h.compareAtPrice&&t.jsx("p",{className:"text-sm text-gray-400 line-through",children:Sg(h.compareAtPrice)})]})]},f))}):t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Sg(s.price)}),s.compareAtPrice&&t.jsx("p",{className:"text-sm text-gray-400 line-through",children:Sg(s.compareAtPrice)})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-gray-500 mb-1",children:"Created By"}),t.jsxs("p",{className:"text-gray-900 font-medium",children:[s.createdBy?.name||"Unknown",s.createdBy?.email&&t.jsxs("span",{className:"text-gray-500 font-normal",children:[" (",s.createdBy.email,")"]})]}),t.jsx("p",{className:"text-gray-500 text-xs mt-1",children:_c(s.createdAt)})]}),s.updatedBy&&t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-gray-500 mb-1",children:"Last Updated By"}),t.jsx("p",{className:"text-gray-900 font-medium",children:s.updatedBy?.name||"Unknown"}),t.jsx("p",{className:"text-gray-500 text-xs mt-1",children:_c(s.updatedAt)})]}),s.isDeleted&&s.deletedBy&&t.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[t.jsx("p",{className:"text-red-500 mb-1",children:"Deleted By"}),t.jsx("p",{className:"text-red-700 font-medium",children:s.deletedBy?.name||"Unknown"}),t.jsx("p",{className:"text-red-500 text-xs mt-1",children:_c(s.deletedAt)})]})]}),t.jsx("div",{className:"pt-4 border-t border-gray-200",children:t.jsxs("p",{className:"text-xs text-gray-400",children:["Event ID: ",t.jsx("code",{className:"bg-gray-100 px-1 py-0.5 rounded",children:s._id})]})})]})})}function Pue({filters:e,onFilterChange:r,onSearchChange:s,onReset:n,showDeleted:a,onToggleDeleted:l,disabled:d=!1}){const[h,f]=v.useState(!1),[x,p]=v.useState(e.search||""),b=P=>{const D=P.target.value;p(D),s(D)},S=(P,D)=>{r({[P]:D})},T=()=>{p(""),f(!1),n()},A=e.category||e.mode||e.city||e.isLive!==""||e.featured!==""||e.minPrice||e.maxPrice||e.startDateFrom||e.startDateTo;return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search events...",value:x,onChange:b,disabled:d,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),x&&t.jsx("button",{onClick:()=>{p(""),s("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(ss,{className:"h-4 w-4"})})]}),t.jsxs("select",{value:e.category,onChange:P=>S("category",P.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"All Categories"}),n9.map(P=>t.jsx("option",{value:P,children:P.charAt(0)+P.slice(1).toLowerCase()},P))]}),t.jsxs("select",{value:e.mode,onChange:P=>S("mode",P.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"All Modes"}),a9.map(P=>t.jsx("option",{value:P,children:P},P))]}),t.jsxs("select",{value:e.isLive,onChange:P=>S("isLive",P.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"true",children:"Live Only"}),t.jsx("option",{value:"false",children:"Not Live"})]}),t.jsxs("select",{value:e.featured,onChange:P=>S("featured",P.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"All Events"}),t.jsx("option",{value:"true",children:"Featured Only"}),t.jsx("option",{value:"false",children:"Not Featured"})]}),t.jsx("select",{value:e.sortBy,onChange:P=>S("sortBy",P.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:bue.map(P=>t.jsxs("option",{value:P.value,children:["Sort: ",P.label]},P.value))}),t.jsxs("select",{value:e.sortOrder,onChange:P=>S("sortOrder",P.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"desc",children:"Newest First"}),t.jsx("option",{value:"asc",children:"Oldest First"})]}),t.jsxs("button",{onClick:()=>f(!h),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${h||A?"bg-gray-100 border-gray-400 text-gray-900":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[t.jsx(Fn,{className:"h-4 w-4"}),t.jsx("span",{children:"Filters"}),A&&t.jsx("span",{className:"flex items-center justify-center w-5 h-5 text-xs bg-gray-800 text-white rounded-full",children:"!"}),h?t.jsx(Az,{className:"h-4 w-4"}):t.jsx(Ni,{className:"h-4 w-4"})]}),(A||x)&&t.jsxs("button",{onClick:T,disabled:d,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[t.jsx(Xi,{className:"h-4 w-4"}),"Reset"]})]}),h&&t.jsx("div",{className:"pt-4 border-t border-gray-200 space-y-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),t.jsx("input",{type:"text",placeholder:"Filter by city",value:e.city,onChange:P=>S("city",P.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Price"}),t.jsx("input",{type:"number",placeholder:"0",value:e.minPrice,onChange:P=>S("minPrice",P.target.value),disabled:d,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Price"}),t.jsx("input",{type:"number",placeholder:"Any",value:e.maxPrice,onChange:P=>S("maxPrice",P.target.value),disabled:d,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})]}),t.jsx("div",{className:"hidden lg:block"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date From"}),t.jsx("input",{type:"date",value:e.startDateFrom,onChange:P=>S("startDateFrom",P.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date To"}),t.jsx("input",{type:"date",value:e.startDateTo,onChange:P=>S("startDateTo",P.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})]})]})}),t.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a,onChange:l,disabled:d,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Show deleted events"})]}),a&&t.jsx("span",{className:"text-sm text-amber-600 bg-amber-50 px-2 py-1 rounded",children:"Viewing deleted events"})]})]})}function kue(e,r){if(r&&r.length>0){const s=r.map(l=>l.price),n=Math.min(...s),a=Math.max(...s);return n===a?Cg(n):`${Cg(n)} - ${Cg(a)}`}return e==null?"Free":Cg(e)}function Cg(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function _ue(e){const r={TECHNOLOGY:"bg-blue-100 text-gray-900",EDUCATION:"bg-indigo-100 text-indigo-700",MEDICAL:"bg-green-100 text-green-700",COMEDY:"bg-yellow-100 text-yellow-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",BUSINESS:"bg-gray-100 text-gray-700",SPORTS:"bg-orange-100 text-orange-700",ARTS:"bg-purple-100 text-purple-700",MUSIC:"bg-red-100 text-red-700",FOOD:"bg-amber-100 text-amber-700",LIFESTYLE:"bg-teal-100 text-teal-700",OTHER:"bg-slate-100 text-slate-700"};return r[e]||r.OTHER}function Iue({events:e,showDeleted:r,isLoading:s,canEdit:n,canDelete:a,canPermanentDelete:l,onView:d,onEdit:h,onDelete:f,onRestore:x,onPermanentDelete:p}){return s?t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx(st,{className:"h-8 w-8 animate-spin text-gray-800"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading events..."})]})}):e.length===0?t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:t.jsxs("div",{className:"text-center text-gray-500",children:[t.jsx("p",{className:"text-lg font-medium",children:"No events found"}),t.jsx("p",{className:"text-sm mt-1",children:r?"No deleted events to display.":"Try adjusting your filters or create a new event."})]})}):t.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Event"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Category"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Mode"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Event Period"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Booking Window"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Price"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:e.map(b=>t.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 ${b.isDeleted?"bg-red-50/50":""}`,children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative w-16 h-12 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:[b.featured&&t.jsx("div",{className:"absolute top-0 left-0 z-10",children:t.jsx("div",{className:"bg-purple-600 text-white text-[8px] font-semibold px-1.5 py-0.5 rounded-br-md shadow-sm",children:"Featured"})}),b.thumbnail?.imageUrl||b.imageUrls?.[0]?t.jsx("img",{src:b.thumbnail?.imageUrl||b.imageUrls?.[0],alt:b.name,className:"w-full h-full object-cover",onError:S=>{S.target.style.display="none"}}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:"No image"})]}),t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate max-w-[200px]",children:b.name}),b.featured&&t.jsx("span",{className:"hidden sm:inline-flex px-1.5 py-0.5 rounded text-[10px] font-medium bg-purple-100 text-purple-700",children:"Featured"})]}),b.city&&t.jsx("p",{className:"text-sm text-gray-500 truncate",children:b.city})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${_ue(b.category)}`,children:b.category})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"text-sm text-gray-600",children:b.mode})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{className:"text-gray-900 font-medium",children:"Start"}),t.jsx("p",{className:"text-gray-600 text-xs",children:wg(b.startDate)}),t.jsx("p",{className:"text-gray-900 font-medium mt-1",children:"End"}),t.jsx("p",{className:"text-gray-600 text-xs",children:wg(b.endDate)})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{className:"text-green-700 font-medium",children:"Opens"}),t.jsx("p",{className:"text-gray-600 text-xs",children:wg(b.bookingStartDate)}),t.jsx("p",{className:"text-yellow-700 font-medium mt-1",children:"Closes"}),t.jsx("p",{className:"text-gray-600 text-xs",children:wg(b.bookingEndDate)})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"text-sm font-medium text-gray-900",children:kue(b.price,b.pricingTiers)})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex flex-col gap-1.5",children:b.isDeleted?t.jsx("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700 border border-red-300",children:"Deleted"}):t.jsxs(t.Fragment,{children:[(()=>{const S=c9(b),T=d9(S);return t.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium border ${T.bg} ${T.text} ${T.border}`,children:S})})(),b.isLive&&t.jsx("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700 border border-purple-300",children:"Visible"})]})})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx("button",{onClick:()=>d(b),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:t.jsx(Or,{className:"h-4 w-4"})}),r?t.jsxs(t.Fragment,{children:[n&&t.jsx("button",{onClick:()=>x(b),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Restore Event",children:t.jsx(Xi,{className:"h-4 w-4"})}),l&&t.jsx("button",{onClick:()=>p(b),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Permanently Delete",children:t.jsx(c$,{className:"h-4 w-4"})})]}):t.jsxs(t.Fragment,{children:[n&&t.jsx("button",{onClick:()=>h(b),className:"p-2 text-gray-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Event",children:t.jsx(Es,{className:"h-4 w-4"})}),a&&t.jsx("button",{onClick:()=>f(b),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Event",children:t.jsx(ir,{className:"h-4 w-4"})})]})]})})]},b._id))})]})})})}function xs({isOpen:e,onClose:r,onConfirm:s,title:n="Confirm Action",message:a="Are you sure you want to proceed?",confirmText:l="Confirm",cancelText:d="Cancel",variant:h="danger",isLoading:f=!1}){const p={danger:{icon:"bg-red-100 text-red-600",button:"bg-red-600 hover:bg-red-700 focus:ring-red-500"},warning:{icon:"bg-yellow-100 text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"},primary:{icon:"bg-blue-100 text-gray-800",button:"bg-gray-800 hover:bg-gray-900 focus:ring-blue-500"}}[h],b=async()=>{await s()};return t.jsx(Pt,{isOpen:e,onClose:r,title:n,size:"sm",closeOnOverlayClick:!f,children:t.jsxs("div",{className:"flex flex-col items-center text-center",children:[t.jsx("div",{className:`w-12 h-12 rounded-full ${p.icon} flex items-center justify-center mb-4`,children:t.jsx(wp,{className:"h-6 w-6"})}),t.jsx("p",{className:"text-gray-600 mb-6",children:a}),t.jsxs("div",{className:"flex gap-3 w-full",children:[t.jsx("button",{onClick:r,disabled:f,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:d}),t.jsxs("button",{onClick:b,disabled:f,className:`flex-1 px-4 py-2 text-white rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 ${p.button} flex items-center justify-center gap-2`,children:[f&&t.jsx(st,{className:"h-4 w-4 animate-spin"}),l]})]})]})})}function vr({currentPage:e,totalPages:r,totalItems:s,itemsPerPage:n,onPageChange:a,itemLabel:l="items",maxVisiblePages:d=5}){if(r<=0)return null;const h=s>0?(e-1)*n+1:0,f=Math.min(e*n,s),x=P=>{const D=[];let I=Math.max(1,e-Math.floor(P/2)),L=Math.min(r,I+P-1);L-I+1<P&&(I=Math.max(1,L-P+1));for(let _=I;_<=L;_++)D.push(_);return D},p=x(d),b=x(3),S=()=>{e>1&&a(e-1)},T=()=>{e<r&&a(e+1)},A=(P,D=!1)=>t.jsxs(t.Fragment,{children:[P[0]>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>a(1),className:`${D?"w-7 h-7 text-xs":"w-8 h-8 text-sm"} rounded-lg text-gray-600 hover:bg-gray-100 transition-all`,children:"1"}),P[0]>2&&t.jsx("span",{className:`${D?"w-7 h-7":"w-8 h-8"} flex items-center justify-center text-gray-400 text-sm`,children:"..."})]}),P.map(I=>t.jsx("button",{onClick:()=>a(I),className:`${D?"w-7 h-7 text-xs":"w-8 h-8 text-sm"} rounded-lg transition-all ${e===I?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-100"}`,children:I},I)),P[P.length-1]<r&&t.jsxs(t.Fragment,{children:[P[P.length-1]<r-1&&t.jsx("span",{className:`${D?"w-7 h-7":"w-8 h-8"} flex items-center justify-center text-gray-400 text-sm`,children:"..."}),t.jsx("button",{onClick:()=>a(r),className:`${D?"w-7 h-7 text-xs":"w-8 h-8 text-sm"} rounded-lg text-gray-600 hover:bg-gray-100 transition-all`,children:r})]})]});return t.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 px-4 sm:px-6 py-3 sm:py-4 border-t border-gray-200",children:[t.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 order-2 sm:order-1",children:[t.jsx("span",{className:"hidden sm:inline",children:"Showing "}),h,"-",f," of ",s," ",l]}),t.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 order-1 sm:order-2",children:[t.jsx("button",{onClick:S,disabled:e===1,className:`p-1.5 sm:p-2 rounded-lg transition-all ${e===1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,"aria-label":"Previous page",children:t.jsx(wj,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),t.jsx("div",{className:"hidden sm:flex items-center gap-1",children:A(p,!1)}),t.jsx("div",{className:"flex sm:hidden items-center gap-1",children:A(b,!0)}),t.jsx("button",{onClick:T,disabled:e===r,className:`p-1.5 sm:p-2 rounded-lg transition-all ${e===r?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,"aria-label":"Next page",children:t.jsx(yp,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]})}function Rue(){const{hasRole:e}=vn(),r=e(["SUPER_ADMIN","ADMIN"]),s=e(["SUPER_ADMIN","ADMIN"]),n=e(["SUPER_ADMIN","ADMIN"]),a=e(["SUPER_ADMIN"]),{events:l,pagination:d,filters:h,isLoading:f,error:x,showDeleted:p,getEventById:b,createEvent:S,updateEvent:T,deleteEvent:A,restoreEvent:P,permanentDeleteEvent:D,getTicketStats:I,updateExpiredEvents:L,updateFilters:_,updateSearch:$,resetFilters:F,changePage:B,toggleShowDeleted:M,clearError:V}=vue(),[z,H]=v.useState(!1),[U,G]=v.useState(!1),[Q,ce]=v.useState(!1),[ne,J]=v.useState(!1),[W,le]=v.useState(!1),[ge,re]=v.useState(!1),[X,ae]=v.useState(null),[ve,fe]=v.useState(null),[se,oe]=v.useState(null),[he,Ve]=v.useState(!1),[Ce,Ke]=v.useState(!1),[xe,Ee]=v.useState(null),[pe,Fe]=v.useState(null),me=v.useCallback(async Ye=>{ae(Ye),oe(null),ce(!0)},[]),Ge=v.useCallback(async Ye=>{Ve(!0);try{const xt=await I(Ye);xt.success&&oe(xt.data)}finally{Ve(!1)}},[I]),Te=v.useCallback(async Ye=>{const xt=await b(Ye._id);if(xt.success){ae(xt.data),Ee(null),Fe(null);try{const Ur=await $c.getSeatArrangement(Ye._id);Ur.success&&Ur.data?.arrangement?fe(Ur.data.arrangement):fe(null)}catch{fe(null)}G(!0)}else Ee(xt.error)},[b]),at=v.useCallback(()=>{ae(null),Ee(null),Fe(null),H(!0)},[]),dt=v.useCallback(Ye=>{ae(Ye),J(!0)},[]),Nt=v.useCallback(Ye=>{ae(Ye),le(!0)},[]),Qe=v.useCallback(Ye=>{ae(Ye),re(!0)},[]),ct=v.useCallback(async Ye=>{Ke(!0),Ee(null),Fe(null);const{seatArrangement:xt,...Ur}=Ye;try{const Ir=await S(Ur);if(Ir.success){if(xt&&xt.seats?.length>0){const Cr=Ir.data._id,_t={imageUrl:xt.imageUrl,seats:xt.seats.map(tt=>({label:tt.label}))},Ae=await $c.createSeatArrangement(Cr,_t);Ae.success||(console.error("Failed to create seat arrangement:",Ae.error),Ee(`Event created, but seat arrangement failed: ${Ae.error}`))}H(!1)}else Ee(Ir.error),Fe(Ir.validationErrors)}finally{Ke(!1)}},[S]),ze=v.useCallback(async Ye=>{if(!X)return;Ke(!0),Ee(null),Fe(null);const{seatArrangement:xt,...Ur}=Ye;try{const Ir=await T(X._id,Ur);if(Ir.success){const Cr=xt&&xt.seats?.length>0,_t=!!ve;if(Cr&&!_t){const Ae={imageUrl:xt.imageUrl,seats:xt.seats.map(lt=>({label:lt.label}))},tt=await $c.createSeatArrangement(X._id,Ae);tt.success||console.error("Failed to create seat arrangement:",tt.error)}else if(Cr&&_t){const Ae={imageUrl:xt.imageUrl,seats:xt.seats.map(lt=>({label:lt.label}))},tt=await $c.updateSeatArrangement(X._id,Ae);tt.success||console.error("Failed to update seat arrangement:",tt.error)}else if(!Cr&&_t){const Ae=await $c.deleteSeatArrangement(X._id);Ae.success||console.error("Failed to delete seat arrangement:",Ae.error)}G(!1),ae(null),fe(null)}else Ee(Ir.error),Fe(Ir.validationErrors)}finally{Ke(!1)}},[X,ve,T]),ft=v.useCallback(async()=>{if(X){Ke(!0);try{const Ye=await A(X._id);Ye.success?(J(!1),ae(null)):Ee(Ye.error)}finally{Ke(!1)}}},[X,A]),Kt=v.useCallback(async()=>{if(X){Ke(!0);try{const Ye=await P(X._id);Ye.success?(le(!1),ae(null)):Ee(Ye.error)}finally{Ke(!1)}}},[X,P]),lr=v.useCallback(async()=>{if(X){Ke(!0);try{const Ye=await D(X._id);Ye.success?(re(!1),ae(null)):Ee(Ye.error)}finally{Ke(!1)}}},[X,D]),ys=v.useCallback(async()=>{const Ye=await L();Ye.success&&Ye.updatedCount>0&&console.log(`Updated ${Ye.updatedCount} expired events`)},[L]);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Events"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your events, pricing, and ticket availability"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:ys,disabled:f,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Mark expired events as not live",children:[t.jsx(ms,{className:`h-4 w-4 ${f?"animate-spin":""}`}),t.jsx("span",{className:"hidden sm:inline",children:"Update Expired"})]}),r&&t.jsxs("button",{onClick:at,className:"flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-900 transition-colors",children:[t.jsx(fr,{className:"h-5 w-5"}),t.jsx("span",{children:"Create Event"})]})]})]}),x&&t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5 flex-shrink-0"}),t.jsx("p",{className:"flex-1",children:x}),t.jsx("button",{onClick:V,className:"text-red-500 hover:text-red-700 font-medium",children:"Dismiss"})]}),t.jsx(Pue,{filters:h,onFilterChange:_,onSearchChange:$,onReset:F,showDeleted:p,onToggleDeleted:M,disabled:f}),t.jsx(Iue,{events:l,showDeleted:p,isLoading:f,canEdit:s,canDelete:n,canPermanentDelete:a,onView:me,onEdit:Te,onDelete:dt,onRestore:Nt,onPermanentDelete:Qe}),d.totalPages>0&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsx(vr,{currentPage:d.currentPage,totalPages:d.totalPages,totalItems:d.totalCount,itemsPerPage:d.limit,onPageChange:B,itemLabel:"events"})}),t.jsx(yD,{isOpen:z,onClose:()=>H(!1),onSubmit:ct,event:null,isLoading:Ce,serverError:xe,validationErrors:pe}),t.jsx(yD,{isOpen:U,onClose:()=>{G(!1),ae(null),fe(null)},onSubmit:ze,event:X,seatArrangement:ve,isLoading:Ce,serverError:xe,validationErrors:pe}),t.jsx(Oue,{isOpen:Q,onClose:()=>{ce(!1),ae(null),oe(null)},event:X,ticketStats:se,isLoadingStats:he,onFetchStats:Ge}),t.jsx(xs,{isOpen:ne,onClose:()=>{J(!1),ae(null)},onConfirm:ft,title:"Delete Event",message:`Are you sure you want to delete "${X?.name}"? This event will be moved to the deleted items and can be restored later.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:Ce}),t.jsx(xs,{isOpen:W,onClose:()=>{le(!1),ae(null)},onConfirm:Kt,title:"Restore Event",message:`Are you sure you want to restore "${X?.name}"? This event will be available again in the events list.`,confirmText:"Restore",cancelText:"Cancel",variant:"primary",isLoading:Ce}),t.jsx(xs,{isOpen:ge,onClose:()=>{re(!1),ae(null)},onConfirm:lr,title:"Permanently Delete Event",message:`Are you sure you want to permanently delete "${X?.name}"? This action cannot be undone and all associated data will be lost.`,confirmText:"Delete Permanently",cancelText:"Cancel",variant:"danger",isLoading:Ce})]})}function Mue(){const[e,r]=v.useState(1),[s,n]=v.useState(""),[a,l]=v.useState(""),[d,h]=v.useState(""),f=10,x={confirmed:"bg-green-100 text-green-700",pending:"bg-yellow-100 text-yellow-700",cancelled:"bg-red-100 text-red-700"},[p,b]=v.useState([{id:1,userName:"John Doe",email:"john.doe@email.com",phone:"+91 9876543210",eventName:"Tech Conference 2025",enrollmentDate:"2025-02-15",status:"confirmed"},{id:2,userName:"Jane Smith",email:"jane.smith@email.com",phone:"+91 9876543211",eventName:"Medical Summit 2025",enrollmentDate:"2025-02-18",status:"pending"},{id:3,userName:"Mike Johnson",email:"mike.j@email.com",phone:"+91 9876543212",eventName:"Comedy Night Live",enrollmentDate:"2025-02-20",status:"confirmed"},{id:4,userName:"Sarah Wilson",email:"sarah.w@email.com",phone:"+91 9876543213",eventName:"Rock Music Festival",enrollmentDate:"2025-02-22",status:"cancelled"},{id:5,userName:"David Brown",email:"david.b@email.com",phone:"+91 9876543214",eventName:"AI Workshop 2025",enrollmentDate:"2025-02-25",status:"confirmed"},{id:6,userName:"Emily Davis",email:"emily.d@email.com",phone:"+91 9876543215",eventName:"Health Awareness Camp",enrollmentDate:"2025-02-28",status:"pending"},{id:7,userName:"Chris Martin",email:"chris.m@email.com",phone:"+91 9876543216",eventName:"Stand-up Comedy Show",enrollmentDate:"2025-03-01",status:"confirmed"},{id:8,userName:"Lisa Anderson",email:"lisa.a@email.com",phone:"+91 9876543217",eventName:"Jazz Night",enrollmentDate:"2025-03-05",status:"confirmed"},{id:9,userName:"Robert Taylor",email:"robert.t@email.com",phone:"+91 9876543218",eventName:"Tech Conference 2025",enrollmentDate:"2025-03-08",status:"pending"},{id:10,userName:"Amanda White",email:"amanda.w@email.com",phone:"+91 9876543219",eventName:"Medical Summit 2025",enrollmentDate:"2025-03-10",status:"confirmed"},{id:11,userName:"Kevin Lee",email:"kevin.l@email.com",phone:"+91 9876543220",eventName:"Rock Music Festival",enrollmentDate:"2025-03-12",status:"cancelled"},{id:12,userName:"Michelle Garcia",email:"michelle.g@email.com",phone:"+91 9876543221",eventName:"Comedy Night Live",enrollmentDate:"2025-03-15",status:"confirmed"}]),S=[...new Set(p.map(M=>M.eventName))],T=["confirmed","pending","cancelled"],A=M=>{window.confirm("Are you sure you want to delete this enrollment?")&&b(p.filter(V=>V.id!==M))},P=p.filter(M=>{const V=M.userName.toLowerCase().includes(s.toLowerCase())||M.email.toLowerCase().includes(s.toLowerCase()),z=a?M.status===a:!0,H=d?M.eventName===d:!0;return V&&z&&H}),D=Math.ceil(P.length/f),I=(e-1)*f,L=I+f,_=P.slice(I,L),$=(M,V)=>{M(V),r(1)},F=()=>{e>1&&r(e-1)},B=()=>{e<D&&r(e+1)};return t.jsxs("div",{children:[t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t.jsxs("div",{className:"relative w-80",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search by name or email...",value:s,onChange:M=>$(n,M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("select",{value:a,onChange:M=>$(l,M.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white",children:[t.jsx("option",{value:"",children:"All Status"}),T.map(M=>t.jsx("option",{value:M,className:"capitalize",children:M.charAt(0).toUpperCase()+M.slice(1)},M))]}),t.jsxs("select",{value:d,onChange:M=>$(h,M.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white",children:[t.jsx("option",{value:"",children:"All Events"}),S.map(M=>t.jsx("option",{value:M,children:M},M))]})]})}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"User"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Event"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Phone"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Enrollment Date"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:_.map(M=>t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:M.userName}),t.jsx("p",{className:"text-sm text-gray-500",children:M.email})]})}),t.jsx("td",{className:"px-6 py-4 text-gray-600",children:M.eventName}),t.jsx("td",{className:"px-6 py-4 text-gray-600",children:M.phone}),t.jsx("td",{className:"px-6 py-4 text-gray-600",children:M.enrollmentDate}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium capitalize ${x[M.status]}`,children:M.status})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx("button",{className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-all",title:"View Details",children:t.jsx(Or,{className:"h-5 w-5"})}),t.jsx("button",{onClick:()=>A(M.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete",children:t.jsx(ir,{className:"h-5 w-5"})})]})})]},M.id))})]}),t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",P.length>0?I+1:0," to"," ",Math.min(L,P.length)," of ",P.length," enrollments"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:F,disabled:e===1,className:`p-2 rounded-lg transition-all ${e===1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,children:t.jsx(wj,{className:"h-5 w-5"})}),Array.from({length:D},(M,V)=>V+1).map(M=>t.jsx("button",{onClick:()=>r(M),className:`w-8 h-8 rounded-lg transition-all ${e===M?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-100"}`,children:M},M)),t.jsx("button",{onClick:B,disabled:e===D,className:`p-2 rounded-lg transition-all ${e===D?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,children:t.jsx(yp,{className:"h-5 w-5"})})]})]})]})]})}const Fi={BASE:"/web/coupons",BY_ID:e=>`/web/coupons/${e}`,RESTORE:e=>`/web/coupons/${e}/restore`,DELETED:"/web/coupons/deleted",VALIDATE_MEMBERSHIP:"/app/memberships/validate-coupon"},Vc={create:async e=>(console.log("[CouponService] Creating coupon:",e.code),Se(je.post(Fi.BASE,e))),getAll:async(e={})=>{console.log("[CouponService] Fetching coupons with params:",e);const r=new URLSearchParams;e.page&&r.append("page",e.page),e.limit&&r.append("limit",e.limit),e.sortBy&&r.append("sortBy",e.sortBy),e.sortOrder&&r.append("sortOrder",e.sortOrder),e.isActive!==void 0&&r.append("isActive",e.isActive),e.search&&r.append("search",e.search);const s=r.toString(),n=s?`${Fi.BASE}?${s}`:Fi.BASE;return Se(je.get(n))},getById:async e=>(console.log("[CouponService] Fetching coupon:",e),Se(je.get(Fi.BY_ID(e)))),update:async(e,r)=>(console.log("[CouponService] Updating coupon:",e),Se(je.put(Fi.BY_ID(e),r))),delete:async e=>(console.log("[CouponService] Deleting coupon:",e),Se(je.delete(Fi.BY_ID(e)))),restore:async e=>(console.log("[CouponService] Restoring coupon:",e),Se(je.post(Fi.RESTORE(e)))),getDeleted:async(e={})=>{console.log("[CouponService] Fetching deleted coupons");const r=new URLSearchParams;e.page&&r.append("page",e.page),e.limit&&r.append("limit",e.limit);const s=r.toString(),n=s?`${Fi.DELETED}?${s}`:Fi.DELETED;return Se(je.get(n))},validateForMembership:async(e,r,s)=>(console.log("[CouponService] Validating coupon for membership:",e),Se(je.post(Fi.VALIDATE_MEMBERSHIP,{couponCode:e,membershipPlanId:r,phone:s})))};function qc({children:e,variant:r="default",size:s="md",rounded:n=!1,icon:a,className:l=""}){const d="inline-flex items-center font-medium transition-colors",h={default:"bg-gray-100 text-gray-800 border border-gray-200",primary:"bg-blue-100 text-blue-800 border border-blue-200",success:"bg-green-100 text-green-800 border border-green-200",warning:"bg-yellow-100 text-yellow-800 border border-yellow-200",danger:"bg-red-100 text-red-800 border border-red-200",info:"bg-cyan-100 text-cyan-800 border border-cyan-200",purple:"bg-purple-100 text-purple-800 border border-purple-200",solid:"bg-gradient-to-r from-gray-800 to-gray-900 text-white shadow-sm",outline:"bg-transparent text-gray-700 border-2 border-gray-300"},f={xs:"px-2 py-0.5 text-[10px] gap-1",sm:"px-2.5 py-0.5 text-xs gap-1",md:"px-3 py-1 text-sm gap-1.5",lg:"px-3.5 py-1.5 text-base gap-2"},x={xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-3.5 w-3.5",lg:"h-4 w-4"};return t.jsxs("span",{className:`
        ${d}
        ${h[r]}
        ${f[s]}
        ${n?"rounded-full":"rounded-md"}
        ${l}
      `,children:[a&&t.jsx(a,{className:x[s]}),e]})}const Lue=[{value:"percentage",label:"Percentage Discount",icon:yu},{value:"flat",label:"Flat Amount Discount",icon:rm}],bD={code:"",discountType:"percentage",discountPercent:"",maxDiscountAmount:"",discountAmount:"",minPurchaseAmount:"0",maxUsageLimit:"",maxUsagePerUser:"1",validFrom:"",validUntil:"",description:"",isActive:!0,applicableTo:["MEMBERSHIP"]},Fue=[{value:"ALL",label:"All Types (Events, Memberships, Sessions, Services)"},{value:"MEMBERSHIP",label:"Memberships Only"},{value:"EVENT",label:"Events Only"},{value:"SESSION",label:"Sessions Only"},{value:"SERVICE",label:"Services Only"}],Bue=e=>{switch(e){case"MEMBERSHIP":return"purple";case"EVENT":return"success";case"SESSION":return"warning";case"SERVICE":return"primary";case"ALL":return"info";default:return"default"}},vD=e=>{if(!e)return"";const r=new Date(e),s=r.getFullYear(),n=String(r.getMonth()+1).padStart(2,"0"),a=String(r.getDate()).padStart(2,"0"),l=String(r.getHours()).padStart(2,"0"),d=String(r.getMinutes()).padStart(2,"0");return`${s}-${n}-${a}T${l}:${d}`},ND=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",jD=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0});function Uue(){const[e,r]=v.useState([]),[s,n]=v.useState([]),[a,l]=v.useState(bD),[d,h]=v.useState({}),[f,x]=v.useState({search:"",isActive:"all",applicableTo:"all"}),[p,b]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[S,T]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[A,P]=v.useState("active"),[D,I]=v.useState(!1),[L,_]=v.useState(!1),[$,F]=v.useState(!1),[B,M]=v.useState(null),[V,z]=v.useState(null),[H,U]=v.useState(null),G=async(xe=1)=>{I(!0);const Ee={page:xe,limit:p.limit,sortBy:"createdAt",sortOrder:"desc"};f.search.trim()&&(Ee.search=f.search.trim()),f.isActive!=="all"&&(Ee.isActive=f.isActive==="active");const pe=await Vc.getAll(Ee);pe.success?(r(pe.data?.coupons||[]),b({currentPage:pe.data?.pagination?.currentPage||xe,totalPages:pe.data?.pagination?.totalPages||0,totalCount:pe.data?.pagination?.totalCount||0,limit:pe.data?.pagination?.limit||p.limit})):ot.error(pe.message||"Failed to fetch coupons"),I(!1)},Q=async(xe=1)=>{I(!0);const Ee=await Vc.getDeleted({page:xe,limit:S.limit});Ee.success?(n(Ee.data?.coupons||[]),T({currentPage:Ee.data?.pagination?.currentPage||xe,totalPages:Ee.data?.pagination?.totalPages||0,totalCount:Ee.data?.pagination?.totalCount||0,limit:Ee.data?.pagination?.limit||S.limit})):ot.error(Ee.message||"Failed to fetch deleted coupons"),I(!1)};v.useEffect(()=>{A==="active"?G(1):Q(1)},[A]);const ce=()=>{const xe={};if(a.code.trim()?(a.code.length<3||a.code.length>50)&&(xe.code="Code must be 3-50 characters"):xe.code="Coupon code is required",a.discountType==="percentage"){const Ee=parseFloat(a.discountPercent);a.discountPercent===""||isNaN(Ee)?xe.discountPercent="Discount percentage is required":(Ee<0||Ee>100)&&(xe.discountPercent="Discount must be 0-100%");const pe=parseFloat(a.maxDiscountAmount);a.maxDiscountAmount===""||isNaN(pe)?xe.maxDiscountAmount="Max discount amount is required":pe<0&&(xe.maxDiscountAmount="Must be a positive number")}else{const Ee=parseFloat(a.discountAmount);a.discountAmount===""||isNaN(Ee)?xe.discountAmount="Discount amount is required":Ee<=0&&(xe.discountAmount="Must be a positive number")}return a.validFrom||(xe.validFrom="Start date is required"),a.validUntil||(xe.validUntil="End date is required"),a.validFrom&&a.validUntil&&new Date(a.validUntil)<=new Date(a.validFrom)&&(xe.validUntil="End date must be after start date"),(!a.applicableTo||a.applicableTo.length===0)&&(xe.applicableTo="Select at least one applicable type"),h(xe),Object.keys(xe).length===0},ne=()=>{const xe={code:a.code.trim().toUpperCase(),validFrom:new Date(a.validFrom).toISOString(),validUntil:new Date(a.validUntil).toISOString(),isActive:a.isActive,applicableTo:a.applicableTo};return a.discountType==="percentage"?(xe.discountPercent=parseFloat(a.discountPercent),xe.maxDiscountAmount=parseFloat(a.maxDiscountAmount)):(xe.discountPercent=100,xe.maxDiscountAmount=parseFloat(a.discountAmount)),a.minPurchaseAmount!==""&&(xe.minPurchaseAmount=parseFloat(a.minPurchaseAmount)||0),a.maxUsageLimit!==""&&(xe.maxUsageLimit=parseInt(a.maxUsageLimit,10)),a.maxUsagePerUser!==""&&(xe.maxUsagePerUser=parseInt(a.maxUsagePerUser,10)||1),a.description.trim()&&(xe.description=a.description.trim()),xe},J=async xe=>{if(xe.preventDefault(),!ce())return;_(!0);const Ee=ne();let pe;if(B?pe=await Vc.update(B._id,Ee):pe=await Vc.create(Ee),pe.success)ot.success(B?"Coupon updated successfully":"Coupon created successfully"),F(!1),re(),G(B?p.currentPage:1);else if(pe.error&&Array.isArray(pe.error)&&pe.error.length>0){const Fe=pe.error.map(me=>me.message||me.msg||me).join(", ");ot.error(Fe),console.error("[Coupon] Validation errors:",pe.error)}else ot.error(pe.message||"Failed to save coupon");_(!1)},W=async()=>{if(!V)return;const xe=await Vc.delete(V);xe.success?(ot.success("Coupon deleted successfully"),z(null),G(p.currentPage)):ot.error(xe.message||"Failed to delete coupon")},le=async()=>{if(!H)return;const xe=await Vc.restore(H);xe.success?(ot.success("Coupon restored successfully"),U(null),Q(S.currentPage)):ot.error(xe.message||"Failed to restore coupon")},ge=xe=>{M(xe);const Ee=xe.discountPercent===100,pe=Ee?"flat":"percentage";l({code:xe.code||"",discountType:pe,discountPercent:Ee?"":xe.discountPercent?.toString()||"",maxDiscountAmount:Ee?"":xe.maxDiscountAmount?.toString()||"",discountAmount:Ee&&xe.maxDiscountAmount?.toString()||"",minPurchaseAmount:xe.minPurchaseAmount?.toString()||"0",maxUsageLimit:xe.maxUsageLimit?.toString()||"",maxUsagePerUser:xe.maxUsagePerUser?.toString()||"1",validFrom:vD(xe.validFrom),validUntil:vD(xe.validUntil),description:xe.description||"",isActive:xe.isActive??!0,applicableTo:xe.applicableTo||["MEMBERSHIP"]}),h({}),F(!0)},re=()=>{l(bD),M(null),h({})},X=(xe,Ee)=>{l(pe=>{let Fe;return xe==="ALL"?Fe=Ee?["ALL"]:[]:Ee?Fe=pe.applicableTo.filter(me=>me!=="ALL").concat(xe):Fe=pe.applicableTo.filter(me=>me!==xe),{...pe,applicableTo:Fe}})},ae=(xe,Ee)=>{x(pe=>({...pe,[xe]:Ee}))},ve=()=>{G(1)},fe=()=>{x({search:"",isActive:"all",applicableTo:"all"}),G(1)},se=()=>{A==="active"?G(p.currentPage):Q(S.currentPage)},oe=xe=>!xe||xe.length===0?"-":xe.includes("ALL")?t.jsx(qc,{variant:"info",size:"sm",children:"All Types"}):t.jsx("div",{className:"flex flex-wrap gap-1",children:xe.map(Ee=>t.jsx(qc,{variant:Bue(Ee),size:"sm",children:Ee},Ee))}),he=xe=>{if(!xe.isActive)return!1;const Ee=new Date,pe=new Date(xe.validUntil);return Ee<=pe},Ve=xe=>{const Ee=new Date,pe=new Date(xe.validUntil);return Ee>pe},Ce=xe=>{const Ee=xe.currentUsageCount||0,pe=xe.maxUsageLimit;return pe?`${Ee}/${pe}`:`${Ee}/`},Ke=(xe,Ee=!1)=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(on,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"font-bold text-gray-900 uppercase",children:xe.code})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex items-center gap-1",children:xe.discountPercent===100?t.jsxs(t.Fragment,{children:[t.jsx(rm,{className:"h-4 w-4 text-gray-400"}),t.jsxs("span",{className:"text-gray-900",children:[jD.format(xe.maxDiscountAmount)," off"]})]}):t.jsxs(t.Fragment,{children:[t.jsx(yu,{className:"h-4 w-4 text-gray-400"}),t.jsxs("span",{className:"text-gray-900",children:[xe.discountPercent,"% (max ",jD.format(xe.maxDiscountAmount),")"]})]})})}),t.jsx("td",{className:"px-6 py-4",children:oe(xe.applicableTo)}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[t.jsx(Xt,{className:"h-4 w-4 text-gray-400"}),t.jsxs("span",{children:[ND(xe.validFrom)," - ",ND(xe.validUntil)]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[t.jsx(tn,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{children:Ce(xe)})]})}),t.jsx("td",{className:"px-6 py-4",children:Ve(xe)?t.jsx(qc,{variant:"warning",size:"sm",children:"Expired"}):he(xe)?t.jsx(qc,{variant:"success",size:"sm",children:"Active"}):t.jsx(qc,{variant:"danger",size:"sm",children:"Inactive"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex items-center gap-2",children:Ee?t.jsx("button",{onClick:()=>U(xe._id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Restore",children:t.jsx(Xi,{className:"h-4 w-4"})}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>ge(xe),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:t.jsx(Es,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>z(xe._id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:t.jsx(ir,{className:"h-4 w-4"})})]})})})]},xe._id);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Coupons"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage discount coupons for memberships and other purchases"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:se,disabled:D,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-60",children:[t.jsx(ms,{className:`h-4 w-4 ${D?"animate-spin":""}`}),"Refresh"]}),t.jsxs("button",{onClick:()=>{re(),F(!0)},className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800",children:[t.jsx(fr,{className:"h-4 w-4"}),"Create Coupon"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-2 shadow-sm flex gap-2",children:[t.jsxs("button",{onClick:()=>P("active"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold transition-colors ${A==="active"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`,children:["Active Coupons",p.totalCount>0&&A==="active"&&t.jsx("span",{className:"ml-2 px-2 py-0.5 bg-white/20 rounded-full text-xs",children:p.totalCount})]}),t.jsxs("button",{onClick:()=>P("deleted"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold transition-colors ${A==="deleted"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`,children:["Deleted Coupons",S.totalCount>0&&A==="deleted"&&t.jsx("span",{className:"ml-2 px-2 py-0.5 bg-white/20 rounded-full text-xs",children:S.totalCount})]})]}),A==="active"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:t.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:f.search,onChange:xe=>ae("search",xe.target.value),onKeyDown:xe=>xe.key==="Enter"&&ve(),placeholder:"Search by code or description...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("select",{value:f.isActive,onChange:xe=>ae("isActive",xe.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:ve,className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800",children:"Search"}),t.jsx("button",{onClick:fe,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Reset"})]})]})}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[D?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(st,{className:"h-8 w-8 animate-spin text-gray-400"})}):(A==="active"?e:s).length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[t.jsx(on,{className:"h-12 w-12 text-gray-300 mb-4"}),t.jsx("p",{className:"text-lg font-medium",children:"No coupons found"}),t.jsx("p",{className:"text-sm",children:A==="active"?"Create your first coupon to get started":"No deleted coupons"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Code"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Discount"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Applicable To"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Validity"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Usage"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(A==="active"?e:s).map(xe=>Ke(xe,A==="deleted"))})]})}),(A==="active"?p:S).totalPages>1&&t.jsx("div",{className:"border-t border-gray-200 px-4 py-3",children:t.jsx(vr,{currentPage:(A==="active"?p:S).currentPage,totalPages:(A==="active"?p:S).totalPages,totalItems:(A==="active"?p:S).totalCount,itemsPerPage:(A==="active"?p:S).limit,onPageChange:xe=>A==="active"?G(xe):Q(xe),itemLabel:"coupons"})})]}),t.jsx(Pt,{isOpen:$,onClose:()=>{F(!1),re()},title:B?"Edit Coupon":"Create Coupon",size:"lg",children:t.jsxs("form",{onSubmit:J,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Coupon Code ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:a.code,onChange:xe=>l({...a,code:xe.target.value.toUpperCase()}),placeholder:"e.g., MEMBER50",maxLength:50,disabled:!!B,className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none uppercase ${d.code?"border-red-500":"border-gray-300"} ${B?"bg-gray-100":""}`}),d.code&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.code}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"3-50 characters, will be auto-uppercased"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Discount Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:Lue.map(xe=>{const Ee=xe.icon,pe=a.discountType===xe.value;return t.jsxs("button",{type:"button",onClick:()=>l({...a,discountType:xe.value}),className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all ${pe?"border-gray-900 bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:[t.jsx("div",{className:`p-2 rounded-lg ${pe?"bg-gray-900 text-white":"bg-gray-100 text-gray-500"}`,children:t.jsx(Ee,{className:"h-5 w-5"})}),t.jsx("span",{className:`font-medium ${pe?"text-gray-900":"text-gray-600"}`,children:xe.label})]},xe.value)})})]}),a.discountType==="percentage"?t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Discount Percentage ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",min:"0",max:"100",value:a.discountPercent,onChange:xe=>l({...a,discountPercent:xe.target.value}),placeholder:"e.g., 50",className:`w-full px-4 py-2 pr-10 border rounded-lg focus:border-gray-800 outline-none ${d.discountPercent?"border-red-500":"border-gray-300"}`}),t.jsx(yu,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"})]}),d.discountPercent&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.discountPercent})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Max Discount Amount () ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",min:"0",value:a.maxDiscountAmount,onChange:xe=>l({...a,maxDiscountAmount:xe.target.value}),placeholder:"e.g., 500",className:`w-full px-4 py-2 pl-8 border rounded-lg focus:border-gray-800 outline-none ${d.maxDiscountAmount?"border-red-500":"border-gray-300"}`}),t.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:""})]}),d.maxDiscountAmount&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.maxDiscountAmount}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum discount cap for percentage"})]})]}):t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Discount Amount () ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative max-w-xs",children:[t.jsx("input",{type:"number",min:"1",value:a.discountAmount,onChange:xe=>l({...a,discountAmount:xe.target.value}),placeholder:"e.g., 100",className:`w-full px-4 py-2 pl-8 border rounded-lg focus:border-gray-800 outline-none ${d.discountAmount?"border-red-500":"border-gray-300"}`}),t.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:""})]}),d.discountAmount&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.discountAmount}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Fixed amount off the purchase price"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Purchase Amount ()"}),t.jsx("input",{type:"number",min:"0",value:a.minPurchaseAmount,onChange:xe=>l({...a,minPurchaseAmount:xe.target.value}),placeholder:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Total Uses"}),t.jsx("input",{type:"number",min:"1",value:a.maxUsageLimit,onChange:xe=>l({...a,maxUsageLimit:xe.target.value}),placeholder:"Unlimited",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for unlimited"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Uses Per User"}),t.jsx("input",{type:"number",min:"1",value:a.maxUsagePerUser,onChange:xe=>l({...a,maxUsagePerUser:xe.target.value}),placeholder:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Valid From ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"datetime-local",value:a.validFrom,onChange:xe=>l({...a,validFrom:xe.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${d.validFrom?"border-red-500":"border-gray-300"}`}),d.validFrom&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.validFrom})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Valid Until ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"datetime-local",value:a.validUntil,onChange:xe=>l({...a,validUntil:xe.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${d.validUntil?"border-red-500":"border-gray-300"}`}),d.validUntil&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.validUntil})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Applicable To ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"space-y-2 p-4 bg-gray-50 rounded-lg border border-gray-200",children:Fue.map(xe=>t.jsxs("label",{className:`flex items-center gap-3 text-sm ${xe.value!=="ALL"&&a.applicableTo.includes("ALL")?"opacity-50":""}`,children:[t.jsx("input",{type:"checkbox",checked:a.applicableTo.includes(xe.value),onChange:Ee=>X(xe.value,Ee.target.checked),disabled:xe.value!=="ALL"&&a.applicableTo.includes("ALL"),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),t.jsx("span",{className:"text-gray-700",children:xe.label})]},xe.value))}),d.applicableTo&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.applicableTo})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:xe=>l({...a,description:xe.target.value}),placeholder:"Optional description for internal reference",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none"})]}),t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.isActive,onChange:xe=>l({...a,isActive:xe.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),t.jsx("span",{className:"font-medium text-gray-700",children:"Active"})]}),t.jsx("span",{className:"text-sm text-gray-500",children:a.isActive?"Coupon can be used by customers":"Coupon is disabled and cannot be used"})]}),t.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:()=>{F(!1),re()},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:L,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[L?t.jsx(st,{className:"h-4 w-4 animate-spin"}):t.jsx(kl,{className:"h-4 w-4"}),B?"Update Coupon":"Create Coupon"]})]})]})}),t.jsx(xs,{isOpen:!!V,title:"Delete Coupon?",message:"This coupon will be moved to deleted coupons. You can restore it later if needed.",confirmText:"Delete",cancelText:"Cancel",isDestructive:!0,onConfirm:W,onCancel:()=>z(null)}),t.jsx(xs,{isOpen:!!H,title:"Restore Coupon?",message:"This coupon will be restored and made available again.",confirmText:"Restore",cancelText:"Cancel",isDestructive:!1,onConfirm:le,onCancel:()=>U(null)})]})}const Ic={LIST:"/app/auth/users",GET_BY_ID:e=>`/app/auth/users/${e}`,UPDATE:e=>`/app/auth/users/${e}`,DELETE:e=>`/app/auth/users/${e}`,RESTORE:e=>`/app/auth/users/${e}/restore`,PERMANENT_DELETE:e=>`/app/auth/users/${e}/permanent`},Zd={getAll:async(e={})=>{const r=new URLSearchParams;e.page&&r.append("page",e.page),e.limit&&r.append("limit",e.limit),e.search&&r.append("search",e.search),e.includeDeleted&&r.append("includeDeleted",e.includeDeleted);const s=r.toString(),n=s?`${Ic.LIST}?${s}`:Ic.LIST;console.log("[UserService] Fetching users with params:",e);const a=await Se(je.get(n));return a.success?console.log("[UserService] Fetched users:",a.data.users?.length):console.error("[UserService] Failed to fetch users:",a.message),a},getById:async e=>{console.log("[UserService] Fetching user by ID:",e);const r=await Se(je.get(Ic.GET_BY_ID(e)));return r.success?console.log("[UserService] Fetched user:",r.data.user?.name):console.error("[UserService] Failed to fetch user:",r.message),r},update:async(e,r)=>{console.log("[UserService] Updating user:",e);const s=await Se(je.put(Ic.UPDATE(e),r));return s.success?console.log("[UserService] User updated successfully"):console.error("[UserService] Failed to update user:",s.message),s},delete:async e=>{console.log("[UserService] Soft deleting user:",e);const r=await Se(je.delete(Ic.DELETE(e)));return r.success?console.log("[UserService] User soft deleted successfully"):console.error("[UserService] Failed to delete user:",r.message),r},restore:async e=>{console.log("[UserService] Restoring user:",e);const r=await Se(je.post(Ic.RESTORE(e)));return r.success?console.log("[UserService] User restored successfully"):console.error("[UserService] Failed to restore user:",r.message),r},permanentDelete:async e=>{console.log("[UserService] Permanently deleting user:",e);const r=await Se(je.delete(Ic.PERMANENT_DELETE(e)));return r.success?console.log("[UserService] User permanently deleted"):console.error("[UserService] Failed to permanently delete user:",r.message),r}};function zue(e={}){const[r,s]=v.useState([]),[n,a]=v.useState({total:0,page:1,limit:10,totalPages:0}),[l,d]=v.useState({search:"",includeDeleted:!1,...e}),[h,f]=v.useState(!1),[x,p]=v.useState(null),b=v.useCallback(async(B=n.page)=>{f(!0),p(null);try{const M={page:B,limit:n.limit,...l.search&&{search:l.search},...l.includeDeleted&&{includeDeleted:l.includeDeleted}},V=await Zd.getAll(M);V.success?(s(V.data.users),a(V.data.pagination)):(p(V.message),s([]))}catch{p("Failed to fetch users"),s([])}finally{f(!1)}},[l,n.limit]),S=v.useCallback(async B=>{try{const M=await Zd.getById(B);return M.success?{success:!0,data:M.data.user}:{success:!1,error:M.message}}catch{return{success:!1,error:"Failed to fetch user details"}}},[]),T=v.useCallback(async(B,M)=>{f(!0),p(null);try{const V=await Zd.update(B,M);return V.success?(s(z=>z.map(H=>H._id===B?{...H,...V.data.user}:H)),{success:!0,data:V.data}):{success:!1,error:V.message,validationErrors:V.data?.errors}}catch{return{success:!1,error:"Failed to update user"}}finally{f(!1)}},[]),A=v.useCallback(async B=>{f(!0),p(null);try{const M=await Zd.delete(B);return M.success?(l.includeDeleted?s(V=>V.map(z=>z._id===B?{...z,isDeleted:!0}:z)):(s(V=>V.filter(z=>z._id!==B)),a(V=>({...V,total:V.total-1,totalPages:Math.ceil((V.total-1)/V.limit)}))),{success:!0}):{success:!1,error:M.message}}catch{return{success:!1,error:"Failed to delete user"}}finally{f(!1)}},[l.includeDeleted]),P=v.useCallback(async B=>{f(!0),p(null);try{const M=await Zd.restore(B);return M.success?(s(V=>V.map(z=>z._id===B?{...z,isDeleted:!1,deletedAt:null}:z)),{success:!0}):{success:!1,error:M.message}}catch{return{success:!1,error:"Failed to restore user"}}finally{f(!1)}},[]),D=v.useCallback(async B=>{f(!0),p(null);try{const M=await Zd.permanentDelete(B);return M.success?(s(V=>V.filter(z=>z._id!==B)),a(V=>({...V,total:V.total-1,totalPages:Math.ceil((V.total-1)/V.limit)})),{success:!0}):{success:!1,error:M.message}}catch{return{success:!1,error:"Failed to permanently delete user"}}finally{f(!1)}},[]),I=v.useCallback(B=>{d(M=>({...M,...B}))},[]),L=v.useCallback(()=>{d({search:"",includeDeleted:!1,...e})},[e]),_=v.useCallback(B=>{b(B)},[b]),$=v.useCallback(B=>{a(M=>({...M,limit:B}))},[]),F=v.useCallback(()=>{p(null)},[]);return v.useEffect(()=>{b(1)},[l]),{users:r,pagination:n,filters:l,isLoading:h,error:x,fetchUsers:b,getUserById:S,updateUser:T,deleteUser:A,restoreUser:P,permanentDeleteUser:D,updateFilters:I,resetFilters:L,changePage:_,changeLimit:$,clearError:F}}const wD=(e=null)=>({name:e?.name||"",email:e?.email||"",phone:e?.phone||""}),Vue=e=>{const r={};if(e.name.trim()?(e.name.length<2||e.name.length>100)&&(r.name="Name must be between 2 and 100 characters"):r.name="Name is required",e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(r.email="Invalid email format"):r.email="Email is required",!e.phone.trim())r.phone="Phone is required";else{const s=e.phone.replace(/[^0-9]/g,"");(s.length<10||s.length>15)&&(r.phone="Phone must be 10-15 digits")}return{isValid:Object.keys(r).length===0,errors:r}};function $ue({isOpen:e,onClose:r,onSubmit:s,user:n=null,isLoading:a=!1,serverError:l=null,validationErrors:d=null}){const[h,f]=v.useState(wD(n)),[x,p]=v.useState({});v.useEffect(()=>{e&&(f(wD(n)),p({}))},[e,n]),v.useEffect(()=>{if(d&&Array.isArray(d)){const A={};d.forEach(P=>{P.field&&(A[P.field]=P.message)}),p(P=>({...P,...A}))}},[d]);const b=A=>{const{name:P,value:D}=A.target;f(I=>({...I,[P]:D})),x[P]&&p(I=>({...I,[P]:null}))},S=async A=>{A.preventDefault();const P=Vue(h);if(!P.isValid){p(P.errors);return}const D={...h};D.phone=D.phone.replace(/[^0-9]/g,""),await s(D)},T=()=>{a||r()};return t.jsx(Pt,{isOpen:e,onClose:T,title:"Edit User",size:"md",closeOnOverlayClick:!a,children:t.jsxs("form",{onSubmit:S,children:[l&&t.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:l}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"name",name:"name",value:h.name,onChange:b,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${x.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter user name"}),x.name&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:x.name})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"email",id:"email",name:"email",value:h.email,onChange:b,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${x.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),x.email&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:x.email})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",id:"phone",name:"phone",value:h.phone,onChange:b,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${x.phone?"border-red-500":"border-gray-300"}`,placeholder:"Enter phone number"}),x.phone&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:x.phone})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:T,disabled:a,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[a&&t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Update User"]})]})]})})}const g2=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",que=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-";function Hue({isOpen:e,onClose:r,user:s,isLoading:n=!1}){return!s&&!n?null:t.jsx(Pt,{isOpen:e,onClose:r,title:"User Details",size:"lg",children:n?t.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading user details..."})]}):s?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start gap-4 pb-4 border-b border-gray-200",children:[t.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center shrink-0",children:t.jsx("span",{className:"text-xl font-semibold text-gray-800",children:s.name?.charAt(0)?.toUpperCase()||"?"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:s.name}),t.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:s.isDeleted&&t.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-xs font-medium flex items-center gap-1",children:[t.jsx(Tt,{className:"h-3 w-3"}),"Deleted"]})})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Contact Information"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(Ji,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Email"})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.email||"-"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(hs,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Phone"})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.phone||"-"})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Activity"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(dr,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Last Login"})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.lastLogin?g2(s.lastLogin):"Never"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(Xt,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Joined"})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:g2(s.createdAt)})]})]})]}),s.enrollments&&s.enrollments.length>0?t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Enrollments (",s.enrollments.length,")"]})}),t.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:s.enrollments.map((a,l)=>t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center shrink-0",children:t.jsx(R3,{className:"h-4 w-4 text-gray-800"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.event?.name||a.event||"Unknown Event"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Enrolled: ",que(a.enrolledAt)]})]}),a.certificate&&t.jsx("a",{href:a.certificate,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-gray-800 hover:text-gray-900 hover:underline shrink-0",children:"View Certificate"})]},a._id||l))})]}):t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[t.jsx(R3,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"No enrollments yet"})]}),s.isDeleted&&s.deletedAt&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[t.jsx(Tt,{className:"h-4 w-4 shrink-0"}),t.jsxs("p",{className:"text-sm",children:["This user was deleted on ",g2(s.deletedAt)]})]})}),t.jsx("div",{className:"pt-4 border-t border-gray-200",children:t.jsx("button",{onClick:r,className:"w-full px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Close"})})]}):t.jsx("div",{className:"py-12 text-center text-gray-500",children:t.jsx("p",{children:"No user data available"})})})}function Gue(){const{hasRole:e}=vn(),{users:r,pagination:s,filters:n,isLoading:a,error:l,getUserById:d,updateUser:h,deleteUser:f,restoreUser:x,permanentDeleteUser:p,updateFilters:b,changePage:S,clearError:T}=zue(),A=e(["SUPER_ADMIN","ADMIN"]),[P,D]=v.useState(!1),[I,L]=v.useState(!1),[_,$]=v.useState(!1),[F,B]=v.useState(!1),[M,V]=v.useState(!1),[z,H]=v.useState(null),[U,G]=v.useState(null),[Q,ce]=v.useState(!1),[ne,J]=v.useState(null),[W,le]=v.useState(null),[ge,re]=v.useState(!1),[X,ae]=v.useState("");v.useEffect(()=>{const me=setTimeout(()=>{X!==n.search&&b({search:X})},300);return()=>clearTimeout(me)},[X,n.search,b]);const ve=async me=>{L(!0),ce(!0),G(null);const Ge=await d(me._id);Ge.success?G(Ge.data):G(me),ce(!1)},fe=me=>{A&&(H(me),J(null),le(null),D(!0))},se=async me=>{re(!0),J(null),le(null);const Ge=await h(z._id,me);Ge.success?(D(!1),H(null)):(J(Ge.error),le(Ge.validationErrors)),re(!1)},oe=me=>{A&&(H(me),$(!0))},he=async()=>{const me=await f(z._id);$(!1),H(null),me.success||console.error("Delete failed:",me.error)},Ve=me=>{A&&(H(me),B(!0))},Ce=async()=>{const me=await x(z._id);B(!1),H(null),me.success||console.error("Restore failed:",me.error)},Ke=me=>{A&&(H(me),V(!0))},xe=async()=>{const me=await p(z._id);V(!1),H(null),me.success||console.error("Permanent delete failed:",me.error)},Ee=()=>{b({includeDeleted:!n.includeDeleted})},pe=()=>{D(!1),H(null),J(null),le(null)},Fe=()=>{L(!1),G(null)};return t.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[t.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Users Management"}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"Manage and monitor user accounts"})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 border border-gray-200",children:t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:X,onChange:me=>ae(me.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:border-gray-800 outline-none text-sm"})]}),A&&t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:n.includeDeleted,onChange:Ee,className:"w-4 h-4 text-gray-800 border-gray-300 rounded focus:ring-0"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Show deleted users"})]})]})}),l&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[t.jsx(wp,{className:"h-5 w-5"}),t.jsx("span",{children:l})]}),t.jsx("button",{onClick:T,className:"text-red-700 hover:text-red-900",children:"Dismiss"})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200",children:a&&r.length===0?t.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[t.jsx(st,{className:"h-8 w-8 text-blue-600 animate-spin"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading users..."})]}):r.length===0?t.jsxs("div",{className:"py-12 text-center text-gray-500",children:[t.jsx("p",{children:"No users found"}),n.search&&t.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your search criteria"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"User"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Phone"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Last Login"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:r.map(me=>t.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 transition-colors ${me.isDeleted?"bg-red-50/50":""}`,children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-700 to-gray-800 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-white font-semibold text-sm",children:me.name?.charAt(0)?.toUpperCase()||"?"})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:me.name}),t.jsx("p",{className:"text-sm text-gray-500 truncate",children:me.email})]})]})}),t.jsx("td",{className:"px-6 py-4 text-gray-600",children:me.phone||"-"}),t.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:me.lastLogin?new Date(me.lastLogin).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"Never"}),t.jsx("td",{className:"px-6 py-4",children:me.isDeleted?t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:"Deleted"}):t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Active"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx("button",{onClick:()=>ve(me),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-all",title:"View Details",children:t.jsx(Or,{className:"h-5 w-5"})}),A&&t.jsx(t.Fragment,{children:me.isDeleted?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>Ve(me),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Restore User",children:t.jsx(Xi,{className:"h-5 w-5"})}),t.jsx("button",{onClick:()=>Ke(me),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Permanently Delete",children:t.jsx(ir,{className:"h-5 w-5"})})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>fe(me),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit",children:t.jsx(Es,{className:"h-5 w-5"})}),t.jsx("button",{onClick:()=>oe(me),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete",children:t.jsx(ir,{className:"h-5 w-5"})})]})})]})})]},me._id))})]})}),t.jsx("div",{className:"lg:hidden divide-y divide-gray-200",children:r.map(me=>t.jsxs("div",{className:`p-4 hover:bg-gray-50 transition-colors ${me.isDeleted?"bg-red-50/50":""}`,children:[t.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-700 to-gray-800 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-white font-semibold",children:me.name?.charAt(0)?.toUpperCase()||"?"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-semibold text-gray-900 truncate",children:me.name}),t.jsx("p",{className:"text-sm text-gray-500 truncate",children:me.email}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:me.phone||"No phone"})]}),t.jsx("div",{children:me.isDeleted?t.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:"Deleted"}):t.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Active"})})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("span",{className:"text-gray-500",children:["Last login:"," ",me.lastLogin?new Date(me.lastLogin).toLocaleDateString("en-IN",{day:"numeric",month:"short"}):"Never"]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>ve(me),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-all",title:"View Details",children:t.jsx(Or,{className:"h-5 w-5"})}),A&&t.jsx(t.Fragment,{children:me.isDeleted?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>Ve(me),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Restore",children:t.jsx(Xi,{className:"h-5 w-5"})}),t.jsx("button",{onClick:()=>Ke(me),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Forever",children:t.jsx(ir,{className:"h-5 w-5"})})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>fe(me),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit",children:t.jsx(Es,{className:"h-5 w-5"})}),t.jsx("button",{onClick:()=>oe(me),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete",children:t.jsx(ir,{className:"h-5 w-5"})})]})})]})]})]},me._id))}),t.jsx(vr,{currentPage:s.page,totalPages:s.totalPages,totalItems:s.total,itemsPerPage:s.limit,onPageChange:S,itemLabel:"users"})]})}),t.jsx($ue,{isOpen:P,onClose:pe,onSubmit:se,user:z,isLoading:ge,serverError:ne,validationErrors:W}),t.jsx(Hue,{isOpen:I,onClose:Fe,user:U,isLoading:Q}),t.jsx(xs,{isOpen:_,onClose:()=>$(!1),onConfirm:he,title:"Delete User",message:`Are you sure you want to delete "${z?.name}"? This action can be undone by restoring the user.`,confirmText:"Delete",variant:"danger",isLoading:a}),t.jsx(xs,{isOpen:F,onClose:()=>B(!1),onConfirm:Ce,title:"Restore User",message:`Are you sure you want to restore "${z?.name}"?`,confirmText:"Restore",variant:"primary",isLoading:a}),t.jsx(xs,{isOpen:M,onClose:()=>V(!1),onConfirm:xe,title:"Permanently Delete User",message:`Are you sure you want to PERMANENTLY delete "${z?.name}"? This action CANNOT be undone and all user data will be lost forever.`,confirmText:"Delete Forever",variant:"danger",isLoading:a})]})}const Bi={CREATE:"/web/auth/create",LIST:"/web/auth/admins",GET_BY_ID:e=>`/web/auth/admins/${e}`,UPDATE:e=>`/web/auth/admins/${e}`,DELETE:e=>`/web/auth/admins/${e}`,GET_ALLOWED_EVENTS:e=>`/web/auth/admins/${e}/allowed-events`,UPDATE_ALLOWED_EVENTS:e=>`/web/auth/admins/${e}/allowed-events`,ADD_ALLOWED_EVENT:(e,r)=>`/web/auth/admins/${e}/allowed-events/${r}`,REMOVE_ALLOWED_EVENT:(e,r)=>`/web/auth/admins/${e}/allowed-events/${r}`},t0={create:async e=>{console.log("[AdminService] Creating admin:",e.username);const r=await Se(je.post(Bi.CREATE,e));return r.success?console.log("[AdminService] Admin created successfully:",r.data.admin._id):console.error("[AdminService] Failed to create admin:",r.message),r},getAll:async(e={})=>{const r=new URLSearchParams;e.page&&r.append("page",e.page),e.limit&&r.append("limit",e.limit),e.status&&r.append("status",e.status),e.role&&r.append("role",e.role),e.search&&r.append("search",e.search);const s=r.toString(),n=s?`${Bi.LIST}?${s}`:Bi.LIST;console.log("[AdminService] Fetching admins with params:",e);const a=await Se(je.get(n));return a.success?console.log("[AdminService] Fetched admins:",a.data.admins?.length):console.error("[AdminService] Failed to fetch admins:",a.message),a},getById:async e=>{console.log("[AdminService] Fetching admin by ID:",e);const r=await Se(je.get(Bi.GET_BY_ID(e)));return r.success?console.log("[AdminService] Fetched admin:",r.data.admin.username):console.error("[AdminService] Failed to fetch admin:",r.message),r},update:async(e,r)=>{console.log("[AdminService] Updating admin:",e);const s=await Se(je.put(Bi.UPDATE(e),r));return s.success?console.log("[AdminService] Admin updated successfully"):console.error("[AdminService] Failed to update admin:",s.message),s},delete:async e=>{console.log("[AdminService] Deleting admin:",e);const r=await Se(je.delete(Bi.DELETE(e)));return r.success?console.log("[AdminService] Admin deleted successfully"):console.error("[AdminService] Failed to delete admin:",r.message),r},getAllowedEvents:async e=>{console.log("[AdminService] Fetching allowed events for admin:",e);const r=await Se(je.get(Bi.GET_ALLOWED_EVENTS(e)));return r.success?console.log("[AdminService] Fetched allowed events:",r.data.allowedEvents?.length):console.error("[AdminService] Failed to fetch allowed events:",r.message),r},updateAllowedEvents:async(e,r)=>{console.log("[AdminService] Updating allowed events for admin:",e);const s=await Se(je.put(Bi.UPDATE_ALLOWED_EVENTS(e),{allowedEvents:r}));return s.success?console.log("[AdminService] Allowed events updated successfully"):console.error("[AdminService] Failed to update allowed events:",s.message),s},addAllowedEvent:async(e,r)=>{console.log("[AdminService] Adding event to allowed events:",r);const s=await Se(je.post(Bi.ADD_ALLOWED_EVENT(e,r)));return s.success?console.log("[AdminService] Event added to allowed events"):console.error("[AdminService] Failed to add event:",s.message),s},removeAllowedEvent:async(e,r)=>{console.log("[AdminService] Removing event from allowed events:",r);const s=await Se(je.delete(Bi.REMOVE_ALLOWED_EVENT(e,r)));return s.success?console.log("[AdminService] Event removed from allowed events"):console.error("[AdminService] Failed to remove event:",s.message),s}};function Yue(e={}){const[r,s]=v.useState([]),[n,a]=v.useState({total:0,page:1,limit:10,totalPages:0}),[l,d]=v.useState({search:"",status:"",role:"",...e}),[h,f]=v.useState(!1),[x,p]=v.useState(null),b=v.useCallback(async(F=n.page)=>{f(!0),p(null);try{const B={page:F,limit:n.limit,...l.search&&{search:l.search},...l.status&&{status:l.status},...l.role&&{role:l.role}},M=await t0.getAll(B);M.success?(s(M.data.admins),a(M.data.pagination)):(p(M.message),s([]))}catch{p("Failed to fetch admins"),s([])}finally{f(!1)}},[l,n.limit]),S=v.useCallback(async F=>{f(!0),p(null);try{const B=await t0.create(F);return B.success?(await b(1),{success:!0,data:B.data}):{success:!1,error:B.message,validationErrors:B.error}}catch{return{success:!1,error:"Failed to create admin"}}finally{f(!1)}},[b]),T=v.useCallback(async(F,B)=>{f(!0),p(null);try{const M=await t0.update(F,B);return M.success?(s(V=>V.map(z=>z._id===F?{...z,...M.data.admin}:z)),{success:!0,data:M.data}):{success:!1,error:M.message,validationErrors:M.error}}catch{return{success:!1,error:"Failed to update admin"}}finally{f(!1)}},[]),A=v.useCallback(async F=>{f(!0),p(null);try{const B=await t0.delete(F);return B.success?(s(M=>M.filter(V=>V._id!==F)),a(M=>({...M,total:M.total-1,totalPages:Math.ceil((M.total-1)/M.limit)})),{success:!0}):{success:!1,error:B.message}}catch{return{success:!1,error:"Failed to delete admin"}}finally{f(!1)}},[]),P=v.useCallback(async F=>{try{const B=await t0.getById(F);return B.success?{success:!0,data:B.data.admin}:{success:!1,error:B.message}}catch{return{success:!1,error:"Failed to fetch admin details"}}},[]),D=v.useCallback(F=>{d(B=>({...B,...F}))},[]),I=v.useCallback(()=>{d({search:"",status:"",role:"",...e})},[e]),L=v.useCallback(F=>{b(F)},[b]),_=v.useCallback(F=>{a(B=>({...B,limit:F}))},[]),$=v.useCallback(()=>{p(null)},[]);return v.useEffect(()=>{b(1)},[l]),{admins:r,pagination:n,filters:l,isLoading:h,error:x,fetchAdmins:b,createAdmin:S,updateAdmin:T,deleteAdmin:A,getAdminById:P,updateFilters:D,resetFilters:I,changePage:L,changeLimit:_,clearError:$}}function Wue(e={}){const{autoFetch:r=!0,isLive:s}=e,[n,a]=v.useState([]),[l,d]=v.useState(!1),[h,f]=v.useState(null),[x,p]=v.useState(""),b=v.useRef(null),S=v.useRef({data:null,timestamp:null}),T=300*1e3,A=v.useCallback(async(L="",_=!0)=>{if(_&&!L&&S.current.data&&Date.now()-S.current.timestamp<T){a(S.current.data);return}d(!0),f(null);try{const $={};s!==void 0&&($.isLive=s),L&&($.search=L);const F=await Va.getDropdownEvents($);if(F.success){const B=F.data.events||[];a(B),L||(S.current={data:B,timestamp:Date.now()})}else f(F.message),a([])}catch{f("Failed to fetch events"),a([])}finally{d(!1)}},[s]),P=v.useCallback(L=>{if(p(L),b.current&&clearTimeout(b.current),!L.trim()){S.current.data?a(S.current.data):A("",!0);return}b.current=setTimeout(()=>{A(L,!1)},300)},[A]),D=v.useCallback(()=>{S.current={data:null,timestamp:null},A("",!1)},[A]),I=v.useCallback(()=>{f(null)},[]);return v.useEffect(()=>{r&&A("",!0)},[r,A]),v.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),{events:n,isLoading:l,error:h,searchQuery:x,fetchEvents:A,searchEvents:P,refreshEvents:D,clearError:I}}const Xue=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",SD={TECHNOLOGY:"bg-blue-100 text-gray-900",MUSIC:"bg-purple-100 text-purple-700",SPORTS:"bg-green-100 text-green-700",BUSINESS:"bg-yellow-100 text-yellow-700",EDUCATION:"bg-indigo-100 text-indigo-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",DEFAULT:"bg-gray-100 text-gray-700"};function u9({selectedIds:e=[],onChange:r,disabled:s=!1,placeholder:n="Select events...",error:a}){const[l,d]=v.useState(!1),[h,f]=v.useState(""),x=v.useRef(null),p=v.useRef(null),{events:b,isLoading:S,error:T,searchEvents:A}=Wue({autoFetch:!0}),P=v.useMemo(()=>{if(!h.trim())return b;const U=h.toLowerCase();return b.filter(G=>G.name.toLowerCase().includes(U)||G.category?.toLowerCase().includes(U))},[b,h]),D=v.useMemo(()=>b.filter(U=>e.includes(U._id)),[b,e]);v.useEffect(()=>{const U=G=>{x.current&&!x.current.contains(G.target)&&d(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]);const I=v.useCallback(U=>{const G=U.target.value;f(G),A(G)},[A]),L=v.useCallback(U=>{if(s)return;const G=e.includes(U)?e.filter(Q=>Q!==U):[...e,U];r(G)},[e,r,s]),_=v.useCallback((U,G)=>{G.stopPropagation(),!s&&r(e.filter(Q=>Q!==U))},[e,r,s]),$=v.useCallback(()=>{if(s)return;const U=P.map(Q=>Q._id),G=[...new Set([...e,...U])];r(G)},[P,e,r,s]),F=v.useCallback(()=>{s||r([])},[r,s]),B=v.useCallback(()=>{s||(d(!0),setTimeout(()=>p.current?.focus(),0))},[s]),M=v.useCallback(U=>{U.key==="Escape"&&d(!1)},[]),V=U=>SD[U]||SD.DEFAULT,z=a||T,H=2;return t.jsxs("div",{ref:x,className:"relative",onKeyDown:M,children:[t.jsx("div",{onClick:B,className:`min-h-[42px] px-2 sm:px-3 py-2 border rounded-lg cursor-pointer transition-colors ${s?"bg-gray-100 cursor-not-allowed":l?"border-gray-800":z?"border-red-500":"border-gray-300 hover:border-gray-400"}`,children:t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[D.length>0?t.jsxs(t.Fragment,{children:[D.slice(0,H).map(U=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 sm:px-2 py-0.5 sm:py-1 bg-blue-100 text-blue-800 text-xs sm:text-sm rounded-md",children:[t.jsx("span",{className:"truncate max-w-[80px] sm:max-w-[120px]",children:U.name}),!s&&t.jsx("button",{type:"button",onClick:G=>_(U._id,G),className:"hover:bg-blue-200 rounded p-0.5",children:t.jsx(ss,{className:"h-3 w-3"})})]},U._id)),D.length>H&&t.jsxs("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 bg-gray-100 text-gray-600 text-xs sm:text-sm rounded-md",children:["+",D.length-H," more"]})]}):t.jsx("span",{className:"text-gray-400 text-sm",children:n}),t.jsx(Ni,{className:`h-4 w-4 sm:h-5 sm:w-5 text-gray-400 ml-auto shrink-0 transition-transform ${l?"rotate-180":""}`})]})}),z&&t.jsxs("p",{className:"mt-1 text-xs sm:text-sm text-red-500 flex items-center gap-1",children:[t.jsx(Tt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),z]}),l&&!s&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",children:[t.jsx("div",{className:"p-2 border-b border-gray-200",children:t.jsxs("div",{className:"relative",children:[t.jsx(br,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{ref:p,type:"text",value:h,onChange:I,placeholder:"Search events...",className:"w-full pl-8 sm:pl-9 pr-4 py-2 border border-gray-300 rounded-md focus:border-gray-800 outline-none text-sm"}),S&&t.jsx(st,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 animate-spin"})]})}),t.jsxs("div",{className:"px-2 py-1.5 border-b border-gray-200 flex items-center justify-between bg-gray-50",children:[t.jsxs("span",{className:"text-xs text-gray-500",children:[e.length,"/",b.length]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{type:"button",onClick:$,className:"text-xs text-gray-800 hover:text-black font-medium",children:"Select all"}),t.jsx("span",{className:"text-gray-300",children:"|"}),t.jsx("button",{type:"button",onClick:F,className:"text-xs text-red-600 hover:text-red-800 font-medium",children:"Clear"})]})]}),t.jsx("div",{className:"max-h-48 sm:max-h-60 overflow-y-auto",children:P.length===0?t.jsx("div",{className:"px-4 py-6 sm:py-8 text-center text-gray-500 text-sm",children:S?t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx(st,{className:"h-5 w-5 sm:h-6 sm:w-6 animate-spin"}),t.jsx("span",{children:"Loading events..."})]}):h?t.jsxs("span",{children:['No events found for "',h,'"']}):t.jsx("span",{children:"No events available"})}):P.map(U=>{const G=e.includes(U._id);return t.jsxs("div",{onClick:()=>L(U._id),className:`px-2 sm:px-3 py-2 sm:py-2.5 cursor-pointer flex items-start gap-2 sm:gap-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 ${G?"bg-blue-50":""}`,children:[t.jsx("div",{className:`shrink-0 w-4 h-4 sm:w-5 sm:h-5 rounded border-2 flex items-center justify-center mt-0.5 ${G?"bg-gray-800 border-gray-800":"border-gray-300"}`,children:G&&t.jsx(Rn,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-white"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[t.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:U.name}),U.isLive&&t.jsx("span",{className:"shrink-0 px-1 sm:px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Live"})]}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mt-1 flex-wrap",children:[U.category&&t.jsx("span",{className:`px-1 sm:px-1.5 py-0.5 text-xs rounded ${V(U.category)}`,children:U.category}),U.startDate&&t.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-500",children:[t.jsx(Xt,{className:"h-3 w-3"}),Xue(U.startDate)]})]})]})]},U._id)})}),e.length>0&&t.jsx("div",{className:"px-2 sm:px-3 py-2 border-t border-gray-200 bg-gray-50",children:t.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:[t.jsx("span",{className:"font-medium",children:e.length})," event",e.length!==1?"s":""," selected"]})})]})]})}const Kue=[{value:"MANAGEMENT_STAFF",label:"Management Staff"},{value:"ADMIN",label:"Admin"},{value:"SUPER_ADMIN",label:"Super Admin"}],Zue=[{value:"ACTIVATED",label:"Active"},{value:"DEACTIVATED",label:"Inactive"}],Que=[{value:"events",label:"Events"},{value:"enrollments",label:"Enrollments"},{value:"payments",label:"Payments"},{value:"users",label:"Users"},{value:"coupons",label:"Coupons"}],Jue=e=>!e||!Array.isArray(e)?[]:e.map(r=>typeof r=="string"?r:r._id).filter(Boolean),CD=(e=null)=>({name:e?.name||"",username:e?.username||"",email:e?.email||"",phone:e?.phone||"",password:"",role:e?.role||"MANAGEMENT_STAFF",status:e?.status||"ACTIVATED",access:e?.access||[],allowedEvents:Jue(e?.allowedEvents),maxCashTicketsAllowed:e?.maxCashTicketsAllowed||""}),ehe=(e,r=!1)=>{const s={};if(e.name.trim()?(e.name.length<2||e.name.length>100)&&(s.name="Name must be between 2 and 100 characters"):s.name="Name is required",e.username.trim()?e.username.length<3||e.username.length>50?s.username="Username must be between 3 and 50 characters":/^[a-zA-Z0-9_]+$/.test(e.username)||(s.username="Username can only contain letters, numbers, and underscores"):s.username="Username is required",e.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&(s.email="Invalid email format"),e.phone.trim()){const n=e.phone.replace(/[^0-9]/g,"");n.length>0&&(n.length<10||n.length>15)&&(s.phone="Phone must be 10-15 digits")}if(r||(e.password?e.password.length<8&&(s.password="Password must be at least 8 characters"):s.password="Password is required"),e.maxCashTicketsAllowed!==""&&e.maxCashTicketsAllowed!==null&&e.maxCashTicketsAllowed!==void 0){const n=parseInt(e.maxCashTicketsAllowed,10);isNaN(n)?s.maxCashTicketsAllowed="Must be a valid number":n<0&&(s.maxCashTicketsAllowed="Cannot be negative")}return{isValid:Object.keys(s).length===0,errors:s}};function the({isOpen:e,onClose:r,onSubmit:s,admin:n=null,isLoading:a=!1,serverError:l=null,validationErrors:d=null}){const h=!!n,[f,x]=v.useState(CD(n)),[p,b]=v.useState({}),[S,T]=v.useState(!1);v.useEffect(()=>{e&&(x(CD(n)),b({}))},[e,n]),v.useEffect(()=>{if(d&&Array.isArray(d)){const F={};d.forEach(B=>{B.field&&(F[B.field]=B.message)}),b(B=>({...B,...F}))}},[d]);const A=F=>{const{name:B,value:M}=F.target;x(V=>{const z={...V,[B]:M};return B==="role"&&M==="SUPER_ADMIN"&&(z.allowedEvents=[]),B==="role"&&(M==="ADMIN"||M==="SUPER_ADMIN")&&(z.maxCashTicketsAllowed=""),z}),p[B]&&b(V=>({...V,[B]:null}))},P=f.role!=="SUPER_ADMIN",D=f.role==="MANAGEMENT_STAFF",I=F=>{x(B=>({...B,access:B.access.includes(F)?B.access.filter(M=>M!==F):[...B.access,F]}))},L=F=>{x(B=>({...B,allowedEvents:F}))},_=async F=>{F.preventDefault();const B=ehe(f,h);if(!B.isValid){b(B.errors);return}const M={...f};M.phone=M.phone.replace(/[^0-9]/g,""),h&&!M.password&&delete M.password,h||delete M.status,M.maxCashTicketsAllowed===""||M.maxCashTicketsAllowed===null||M.maxCashTicketsAllowed===void 0?delete M.maxCashTicketsAllowed:M.maxCashTicketsAllowed=parseInt(M.maxCashTicketsAllowed,10),await s(M)},$=()=>{a||r()};return t.jsx(Pt,{isOpen:e,onClose:$,title:h?"Edit Admin":"Create New Admin",size:"xl",closeOnOverlayClick:!a,children:t.jsxs("form",{onSubmit:_,children:[l&&t.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:l}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"name",name:"name",value:f.name,onChange:A,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter admin name"}),p.name&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.name})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:["Username ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"username",name:"username",value:f.username,onChange:A,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.username?"border-red-500":"border-gray-300"}`,placeholder:"Enter username"}),p.username&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.username})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:["Email"," ",t.jsx("span",{className:"text-gray-400 text-xs ml-1",children:"(optional)"})]}),t.jsx("input",{type:"email",id:"email",name:"email",value:f.email,onChange:A,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),p.email&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.email})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone"," ",t.jsx("span",{className:"text-gray-400 text-xs ml-1",children:"(optional)"})]}),t.jsx("input",{type:"tel",id:"phone",name:"phone",value:f.phone,onChange:A,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.phone?"border-red-500":"border-gray-300"}`,placeholder:"Enter phone number"}),p.phone&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.phone})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",!h&&t.jsx("span",{className:"text-red-500",children:"*"}),h&&t.jsx("span",{className:"text-gray-400 text-xs ml-1",children:"(leave empty to keep current)"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:S?"text":"password",id:"password",name:"password",value:f.password,onChange:A,disabled:a,className:`w-full px-3 py-2 pr-10 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.password?"border-red-500":"border-gray-300"}`,placeholder:h?"New password (optional)":"Enter password"}),t.jsx("button",{type:"button",onClick:()=>T(!S),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:S?t.jsx(LP,{className:"h-4 w-4 sm:h-5 sm:w-5"}):t.jsx(Or,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}),p.password&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.password})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),t.jsx("select",{id:"role",name:"role",value:f.role,onChange:A,disabled:a,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100 text-sm sm:text-base",children:Kue.map(F=>t.jsx("option",{value:F.value,children:F.label},F.value))})]}),h&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsx("select",{id:"status",name:"status",value:f.status,onChange:A,disabled:a,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100 text-sm sm:text-base",children:Zue.map(F=>t.jsx("option",{value:F.value,children:F.label},F.value))})]}),D&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"maxCashTicketsAllowed",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Cash Tickets Allowed"}),t.jsx("input",{type:"number",id:"maxCashTicketsAllowed",name:"maxCashTicketsAllowed",value:f.maxCashTicketsAllowed,onChange:A,disabled:a,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.maxCashTicketsAllowed?"border-red-500":"border-gray-300"}`,placeholder:"Enter max tickets or leave empty"}),p.maxCashTicketsAllowed&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.maxCashTicketsAllowed}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Limit the total number of cash tickets this admin can generate. Leave empty for unlimited."}),t.jsx("p",{className:"text-gray-400 text-xs",children:"optional, leave empty for unlimited"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Access Permissions"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Que.map(F=>t.jsxs("label",{className:`inline-flex items-center px-3 py-2 rounded-lg border cursor-pointer transition-colors ${f.access.includes(F.value)?"bg-blue-50 border-blue-500 text-gray-900":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"} ${a?"opacity-50 cursor-not-allowed":""}`,children:[t.jsx("input",{type:"checkbox",checked:f.access.includes(F.value),onChange:()=>I(F.value),disabled:a,className:"sr-only"}),t.jsx("span",{className:"text-sm",children:F.label})]},F.value))})]}),P&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Allowed Events",t.jsx("span",{className:"text-gray-400 text-xs ml-2 font-normal",children:"(Events this admin can access)"})]}),t.jsx(u9,{selectedIds:f.allowedEvents,onChange:L,disabled:a,placeholder:"Search and select events..."})]}),!P&&t.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsx("p",{className:"text-sm text-gray-900",children:"Super Admins have access to all events by default."})})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:$,disabled:a,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[a&&t.jsx(st,{className:"h-4 w-4 animate-spin"}),h?"Update Admin":"Create Admin"]})]})]})})}const rhe={SUPER_ADMIN:{label:"Super Admin",color:"bg-red-100 text-red-700"},ADMIN:{label:"Admin",color:"bg-purple-100 text-purple-700"},MANAGEMENT_STAFF:{label:"Management",color:"bg-blue-100 text-blue-700"}},she={ACTIVATED:{label:"Active",color:"bg-green-100 text-green-700"},DEACTIVATED:{label:"Inactive",color:"bg-gray-100 text-gray-700"}},nhe=[{value:"",label:"All Roles"},{value:"SUPER_ADMIN",label:"Super Admin"},{value:"ADMIN",label:"Admin"},{value:"MANAGEMENT_STAFF",label:"Management Staff"}],ahe=[{value:"",label:"All Status"},{value:"ACTIVATED",label:"Active"},{value:"DEACTIVATED",label:"Inactive"}];function ihe(){const{admin:e}=vn(),{admins:r,pagination:s,filters:n,isLoading:a,error:l,fetchAdmins:d,createAdmin:h,updateAdmin:f,deleteAdmin:x,updateFilters:p,changePage:b,clearError:S}=Yue(),[T,A]=v.useState(!1),[P,D]=v.useState(!1),[I,L]=v.useState(null),[_,$]=v.useState(!1),[F,B]=v.useState(null),[M,V]=v.useState(null),[z,H]=v.useState(n.search),U=v.useCallback(he=>{H(he);const Ve=setTimeout(()=>{p({search:he})},300);return()=>clearTimeout(Ve)},[p]),G=v.useCallback(he=>{p({role:he})},[p]),Q=v.useCallback(he=>{p({status:he})},[p]),ce=v.useCallback(()=>{L(null),B(null),V(null),A(!0)},[]),ne=v.useCallback(he=>{L(he),B(null),V(null),A(!0)},[]),J=v.useCallback(()=>{A(!1),L(null),B(null),V(null)},[]),W=v.useCallback(he=>{L(he),D(!0)},[]),le=v.useCallback(()=>{D(!1),L(null)},[]),ge=v.useCallback(async he=>{$(!0),B(null),V(null);try{let Ve;I?Ve=await f(I._id,he):Ve=await h(he),Ve.success?J():(B(Ve.error),Ve.validationErrors&&V(Ve.validationErrors))}catch{B("An unexpected error occurred")}finally{$(!1)}},[I,h,f,J]),re=v.useCallback(async()=>{if(I){$(!0);try{const he=await x(I._id);he.success?le():alert(he.error||"Failed to delete admin")}catch{alert("An unexpected error occurred")}finally{$(!1)}}},[I,x,le]),X=v.useCallback(he=>{if(!he)return"-";const Ve=he.replace(/\D/g,"");return Ve.length===10?`+91 ${Ve.slice(0,5)} ${Ve.slice(5)}`:he},[]),ae=v.useCallback(he=>rhe[he]||{label:he,color:"bg-gray-100 text-gray-700"},[]),ve=v.useCallback(he=>she[he]||{label:he,color:"bg-gray-100 text-gray-700"},[]),fe=v.useCallback(he=>e?._id!==he._id,[e]),se=v.useMemo(()=>{if(a||l||r.length>0)return null;const he=n.search||n.role||n.status;return t.jsx("tr",{children:t.jsx("td",{colSpan:"5",className:"px-4 sm:px-6 py-12 text-center",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx(Tt,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-300 mb-4"}),t.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-1",children:he?"No admins found":"No admins yet"}),t.jsx("p",{className:"text-sm text-gray-500 mb-4 px-4",children:he?"Try adjusting your search or filter criteria":"Get started by creating a new admin"}),!he&&t.jsxs("button",{onClick:ce,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center gap-2 text-sm",children:[t.jsx(fr,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Create Admin"]})]})})})},[a,l,r.length,n,ce]),oe=he=>{const Ve=ae(he.role),Ce=ve(he.status),Ke=e?._id===he._id;return t.jsxs("div",{className:`p-4 border-b border-gray-100 ${Ke?"bg-blue-50/30":""}`,children:[t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[t.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-purple-600 font-medium",children:he.name?.charAt(0)?.toUpperCase()||"?"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("p",{className:"font-medium text-gray-900 truncate",children:[he.name,Ke&&t.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(You)"})]}),t.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",he.username]})]})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>ne(he),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit",children:t.jsx(Es,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>W(he),disabled:!fe(he),className:`p-2 rounded-lg transition-all ${fe(he)?"text-red-600 hover:bg-red-50":"text-gray-300 cursor-not-allowed"}`,title:fe(he)?"Delete":"Can't delete your own account",children:t.jsx(ir,{className:"h-4 w-4"})})]})]}),t.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ve.color}`,children:Ve.label}),t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ce.color}`,children:Ce.label}),t.jsx("span",{className:"text-xs text-gray-500",children:X(he.phone)}),he.role==="MANAGEMENT_STAFF"&&he.maxCashTicketsAllowed!=null&&t.jsxs("span",{className:"text-xs text-gray-500",children:["Max Tickets: ",he.maxCashTicketsAllowed]})]})]},he._id)};return t.jsxs("div",{className:"px-2 sm:px-0",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4 sm:mb-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Admin Management"}),t.jsx("p",{className:"text-sm text-gray-500 mt-0.5 sm:mt-1",children:"Manage admin users and their permissions"})]}),t.jsxs("button",{onClick:ce,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center justify-center gap-2 text-sm sm:text-base w-full sm:w-auto",children:[t.jsx(fr,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Create Admin"]})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-3 sm:p-4 mb-4 sm:mb-6",children:t.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-stretch sm:items-center gap-3 sm:gap-4",children:[t.jsxs("div",{className:"relative flex-1 sm:flex-none sm:w-64 lg:w-80",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search by name, username, or phone...",value:z,onChange:he=>U(he.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none text-sm"})]}),t.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[t.jsx("select",{value:n.role,onChange:he=>G(he.target.value),className:"flex-1 sm:flex-none px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white text-sm",children:nhe.map(he=>t.jsx("option",{value:he.value,children:he.label},he.value))}),t.jsx("select",{value:n.status,onChange:he=>Q(he.target.value),className:"flex-1 sm:flex-none px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white text-sm",children:ahe.map(he=>t.jsx("option",{value:he.value,children:he.label},he.value))}),t.jsx("button",{onClick:()=>d(s.page),disabled:a,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 flex-shrink-0",title:"Refresh",children:t.jsx(ms,{className:`h-4 w-4 sm:h-5 sm:w-5 ${a?"animate-spin":""}`})})]})]})}),l&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 sm:p-4 mb-4 sm:mb-6 flex items-center gap-3",children:[t.jsx(Tt,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),t.jsx("p",{className:"text-sm text-red-700 flex-1",children:l}),t.jsx("button",{onClick:S,className:"text-red-500 hover:text-red-700 text-sm font-medium flex-shrink-0",children:"Dismiss"})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[t.jsx("div",{className:"hidden md:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600",children:"Admin"}),t.jsx("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600",children:"Phone"}),t.jsx("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600",children:"Role"}),t.jsx("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-right px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsxs("tbody",{children:[a&&r.length===0&&t.jsx("tr",{children:t.jsxs("td",{colSpan:"5",className:"px-6 py-12 text-center",children:[t.jsx(st,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-2"}),t.jsx("p",{className:"text-gray-500",children:"Loading admins..."})]})}),se,r.map(he=>{const Ve=ae(he.role),Ce=ve(he.status),Ke=e?._id===he._id;return t.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 ${Ke?"bg-blue-50/30":""}`,children:[t.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-purple-600 font-medium text-sm lg:text-base",children:he.name?.charAt(0)?.toUpperCase()||"?"})}),t.jsxs("div",{className:"min-w-0",children:[t.jsxs("p",{className:"font-medium text-gray-900 text-sm lg:text-base truncate",children:[he.name,Ke&&t.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(You)"})]}),t.jsxs("p",{className:"text-xs lg:text-sm text-gray-500 truncate",children:["@",he.username]})]})]})}),t.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4 text-sm text-gray-600",children:X(he.phone)}),t.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:`px-2 lg:px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ve.color} inline-flex items-center w-fit`,children:Ve.label}),he.role==="MANAGEMENT_STAFF"&&he.maxCashTicketsAllowed!=null&&t.jsxs("span",{className:"text-xs text-gray-500",children:["Max: ",he.maxCashTicketsAllowed," tickets"]})]})}),t.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4",children:t.jsx("span",{className:`px-2 lg:px-3 py-1 rounded-full text-xs font-medium ${Ce.color}`,children:Ce.label})}),t.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-1 lg:gap-2",children:[t.jsx("button",{onClick:()=>ne(he),className:"p-1.5 lg:p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit",children:t.jsx(Es,{className:"h-4 w-4 lg:h-5 lg:w-5"})}),t.jsx("button",{onClick:()=>W(he),disabled:!fe(he),className:`p-1.5 lg:p-2 rounded-lg transition-all ${fe(he)?"text-red-600 hover:bg-red-50":"text-gray-300 cursor-not-allowed"}`,title:fe(he)?"Delete":"Can't delete your own account",children:t.jsx(ir,{className:"h-4 w-4 lg:h-5 lg:w-5"})})]})})]},he._id)})]})]})}),t.jsxs("div",{className:"md:hidden",children:[a&&r.length===0&&t.jsxs("div",{className:"px-4 py-12 text-center",children:[t.jsx(st,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-2"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Loading admins..."})]}),!a&&!l&&r.length===0&&t.jsxs("div",{className:"px-4 py-12 text-center",children:[t.jsx(Tt,{className:"h-10 w-10 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-base font-medium text-gray-900 mb-1",children:n.search||n.role||n.status?"No admins found":"No admins yet"}),t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:n.search||n.role||n.status?"Try adjusting your search or filter criteria":"Get started by creating a new admin"}),!(n.search||n.role||n.status)&&t.jsxs("button",{onClick:ce,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors inline-flex items-center gap-2 text-sm",children:[t.jsx(fr,{className:"h-4 w-4"}),"Create Admin"]})]}),r.map(oe)]}),s.totalPages>0&&t.jsx(vr,{currentPage:s.page,totalPages:s.totalPages,totalItems:s.total,itemsPerPage:s.limit,onPageChange:b,itemLabel:"admins"})]}),t.jsx(the,{isOpen:T,onClose:J,onSubmit:ge,admin:I,isLoading:_,serverError:F,validationErrors:M}),t.jsx(xs,{isOpen:P,onClose:le,onConfirm:re,title:"Delete Admin",message:`Are you sure you want to delete "${I?.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:_})]})}function lhe(){return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Payment History"}),t.jsx("p",{className:"text-gray-600",children:"View payment history here."})]})}const Ui={BASE:"/web/offline-cash",ALLOWED_EVENTS:"/web/offline-cash/allowed-events",GET_BY_ID:e=>`/web/offline-cash/${e}`,DELETE:e=>`/web/offline-cash/${e}`,EVENT_ENROLLMENTS:e=>`/web/offline-cash/event/${e}/enrollments`,DIRECT_TICKET:"/web/offline-cash/direct-ticket",DIRECT_TICKET_BULK:"/web/offline-cash/direct-ticket-bulk"},qo={getAllowedEvents:async(e={})=>{const r=new URLSearchParams;e.search&&r.append("search",e.search),e.isLive!==void 0&&r.append("isLive",e.isLive);const s=r.toString(),n=s?`${Ui.ALLOWED_EVENTS}?${s}`:Ui.ALLOWED_EVENTS;console.log("[OfflineCashService] Fetching allowed events with params:",e);const a=await Se(je.get(n));return a.success?console.log("[OfflineCashService] Fetched allowed events:",a.data.events?.length):console.error("[OfflineCashService] Failed to fetch allowed events:",a.message),a},create:async e=>{console.log("[OfflineCashService] Creating offline cash record for phone:",e.phone);const r=await Se(je.post(Ui.BASE,e));return r.success?console.log("[OfflineCashService] Record created successfully, link:",r.data.link):console.error("[OfflineCashService] Failed to create record:",r.message),r},getAll:async(e={})=>{const r=new URLSearchParams;e.eventId&&r.append("eventId",e.eventId),e.redeemed!==void 0&&e.redeemed!==""&&r.append("redeemed",e.redeemed),e.page&&r.append("page",e.page),e.limit&&r.append("limit",e.limit);const s=r.toString(),n=s?`${Ui.BASE}?${s}`:Ui.BASE;console.log("[OfflineCashService] Fetching offline cash records with params:",e);const a=await Se(je.get(n));return a.success?console.log("[OfflineCashService] Fetched records:",a.data.records?.length):console.error("[OfflineCashService] Failed to fetch records:",a.message),a},getById:async e=>{console.log("[OfflineCashService] Fetching record by ID:",e);const r=await Se(je.get(Ui.GET_BY_ID(e)));return r.success?console.log("[OfflineCashService] Fetched record:",r.data._id):console.error("[OfflineCashService] Failed to fetch record:",r.message),r},delete:async e=>{console.log("[OfflineCashService] Deleting record:",e);const r=await Se(je.delete(Ui.DELETE(e)));return r.success?console.log("[OfflineCashService] Record deleted successfully"):console.error("[OfflineCashService] Failed to delete record:",r.message),r},getEventEnrollments:async(e,r={})=>{const s=new URLSearchParams;r.status&&s.append("status",r.status),r.page&&s.append("page",r.page),r.limit&&s.append("limit",r.limit);const n=s.toString(),a=Ui.EVENT_ENROLLMENTS(e),l=n?`${a}?${n}`:a;console.log("[OfflineCashService] Fetching event enrollments:",e,r);const d=await Se(je.get(l));return d.success?console.log("[OfflineCashService] Fetched enrollments:",d.data.enrollments?.length):console.error("[OfflineCashService] Failed to fetch enrollments:",d.message),d},createDirectTicket:async e=>{console.log("[OfflineCashService] Creating direct ticket for phone:",e.phone);const r=await Se(je.post(Ui.DIRECT_TICKET,e));return r.success?console.log("[OfflineCashService] Direct ticket created:",r.data.enrollment?.id):console.error("[OfflineCashService] Failed to create direct ticket:",r.message),r},createDirectTicketBulk:async(e,r)=>{console.log("[OfflineCashService] Creating bulk direct tickets for event:",r.eventId);const s=new FormData;s.append("file",e),s.append("eventId",r.eventId),r.priceCharged!==void 0&&r.priceCharged!==""&&s.append("priceCharged",r.priceCharged),r.notes&&s.append("notes",r.notes);try{const n=await je.post(Ui.DIRECT_TICKET_BULK,s,{headers:{"Content-Type":"multipart/form-data"}});return console.log("[OfflineCashService] Bulk direct tickets result:",{total:n.data?.data?.summary?.total,successful:n.data?.data?.summary?.successful,rejected:n.data?.data?.summary?.rejected}),{success:!0,data:n.data.data,message:n.data.message,error:null,status:n.data.status||n.status}}catch(n){const a={success:!1,data:null,message:n.response?.data?.message||"Failed to process bulk direct tickets",error:n.response?.data?.error||n.message,status:n.response?.status||500};return console.error("[OfflineCashService] Bulk direct tickets failed:",a),a}}};function ohe(e={}){const[r,s]=v.useState([]),[n,a]=v.useState({total:0,page:1,limit:20,totalPages:0}),[l,d]=v.useState({eventId:"",redeemed:"",...e}),[h,f]=v.useState(!1),[x,p]=v.useState(null),[b,S]=v.useState([]),[T,A]=v.useState(!1),[P,D]=v.useState(null),I=v.useRef(null),L=v.useCallback(async(ne="")=>{A(!0),D(null);try{const J={};ne&&(J.search=ne);const W=await qo.getAllowedEvents(J);W.success?S(W.data.events||[]):(D(W.message),S([]))}catch{D("Failed to fetch allowed events"),S([])}finally{A(!1)}},[]),_=v.useCallback(ne=>{I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{L(ne)},300)},[L]),$=v.useCallback(async(ne=n.page)=>{f(!0),p(null);try{const J={page:ne,limit:n.limit,...l.eventId&&{eventId:l.eventId},...l.redeemed!==""&&{redeemed:l.redeemed}},W=await qo.getAll(J);W.success?(s(W.data.records||[]),a({total:W.data.pagination?.total||0,page:W.data.pagination?.page||1,limit:W.data.pagination?.limit||20,totalPages:W.data.pagination?.pages||0})):(p(W.message),s([]))}catch{p("Failed to fetch cash ticket records"),s([])}finally{f(!1)}},[l,n.limit]),F=v.useCallback(async ne=>{f(!0),p(null);try{const J=await qo.create(ne);return J.success?(await $(1),{success:!0,data:J.data}):J.status===409&&J.error?.existingLink?{success:!1,error:J.message,existingLink:J.error.existingLink,signature:J.error.signature}:{success:!1,error:J.message,validationErrors:J.error}}catch{return{success:!1,error:"Failed to create cash ticket"}}finally{f(!1)}},[$]),B=v.useCallback(async ne=>{try{const J=await qo.getById(ne);return J.success?{success:!0,data:J.data}:{success:!1,error:J.message}}catch{return{success:!1,error:"Failed to fetch record details"}}},[]),M=v.useCallback(async ne=>{f(!0),p(null);try{const J=await qo.delete(ne);return J.success?(s(W=>W.filter(le=>le._id!==ne)),a(W=>({...W,total:W.total-1,totalPages:Math.ceil((W.total-1)/W.limit)})),{success:!0}):{success:!1,error:J.message}}catch{return{success:!1,error:"Failed to delete record"}}finally{f(!1)}},[]),V=v.useCallback(async(ne,J={})=>{try{const W=await qo.getEventEnrollments(ne,J);return W.success?{success:!0,data:{enrollments:W.data.enrollments||[],pagination:W.data.pagination}}:{success:!1,error:W.message}}catch{return{success:!1,error:"Failed to fetch enrollments"}}},[]),z=v.useCallback(ne=>{d(J=>({...J,...ne}))},[]),H=v.useCallback(()=>{d({eventId:"",redeemed:"",...e})},[e]),U=v.useCallback(ne=>{$(ne)},[$]),G=v.useCallback(ne=>{a(J=>({...J,limit:ne}))},[]),Q=v.useCallback(()=>{p(null)},[]),ce=v.useCallback(()=>{D(null)},[]);return v.useEffect(()=>{$(1)},[l]),v.useEffect(()=>{L()},[L]),v.useEffect(()=>()=>{I.current&&clearTimeout(I.current)},[]),{records:r,pagination:n,filters:l,isLoading:h,error:x,allowedEvents:b,eventsLoading:T,eventsError:P,fetchRecords:$,createRecord:F,getRecordById:B,deleteRecord:M,getEventEnrollments:V,fetchAllowedEvents:L,searchEvents:_,updateFilters:z,resetFilters:H,changePage:U,changeLimit:G,clearError:Q,clearEventsError:ce}}const che=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",dhe=e=>e==null?"":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),AD={TECHNOLOGY:"bg-blue-100 text-gray-900",MUSIC:"bg-purple-100 text-purple-700",SPORTS:"bg-green-100 text-green-700",BUSINESS:"bg-yellow-100 text-yellow-700",EDUCATION:"bg-indigo-100 text-indigo-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",DEFAULT:"bg-gray-100 text-gray-700"};function XS({selectedId:e="",onChange:r,events:s=[],isLoading:n=!1,onSearch:a,disabled:l=!1,placeholder:d="Select an event...",error:h}){const[f,x]=v.useState(!1),[p,b]=v.useState(""),[S,T]=v.useState(-1),A=v.useRef(null),P=v.useRef(null),D=v.useRef(null),I=v.useMemo(()=>{if(!p.trim())return s;const z=p.toLowerCase();return s.filter(H=>H.name.toLowerCase().includes(z)||H.category?.toLowerCase().includes(z))},[s,p]),L=v.useMemo(()=>s.find(z=>z._id===e),[s,e]);v.useEffect(()=>{const z=H=>{A.current&&!A.current.contains(H.target)&&(x(!1),b(""),T(-1))};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const _=v.useCallback(z=>{const H=z.target.value;b(H),T(-1),a&&a(H)},[a]),$=v.useCallback(z=>{l||(r(z._id,z),x(!1),b(""),T(-1))},[r,l]),F=v.useCallback(z=>{z.stopPropagation(),!l&&r("",null)},[r,l]),B=v.useCallback(()=>{l||(x(!0),setTimeout(()=>P.current?.focus(),0))},[l]),M=v.useCallback(z=>{if(!f){(z.key==="Enter"||z.key===" "||z.key==="ArrowDown")&&(z.preventDefault(),x(!0));return}switch(z.key){case"Escape":x(!1),b(""),T(-1);break;case"ArrowDown":z.preventDefault(),T(H=>H<I.length-1?H+1:H);break;case"ArrowUp":z.preventDefault(),T(H=>H>0?H-1:0);break;case"Enter":z.preventDefault(),S>=0&&I[S]&&$(I[S]);break}},[f,I,S,$]);v.useEffect(()=>{if(S>=0&&D.current){const z=D.current.children[S];z&&z.scrollIntoView({block:"nearest"})}},[S]);const V=z=>AD[z]||AD.DEFAULT;return t.jsxs("div",{ref:A,className:"relative",onKeyDown:M,children:[t.jsx("div",{onClick:B,className:`min-h-[42px] px-2 sm:px-3 py-2 border rounded-lg cursor-pointer transition-colors ${l?"bg-gray-100 cursor-not-allowed":f?"border-gray-800":h?"border-red-500":"border-gray-300 hover:border-gray-400"}`,tabIndex:l?-1:0,role:"combobox","aria-expanded":f,"aria-haspopup":"listbox",children:t.jsxs("div",{className:"flex items-center gap-2",children:[L?t.jsxs("div",{className:"flex-1 flex items-center gap-2 min-w-0",children:[t.jsx("span",{className:"truncate text-sm font-medium text-gray-900",children:L.name}),L.isLive&&t.jsx("span",{className:"shrink-0 px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Live"}),!l&&t.jsx("button",{type:"button",onClick:F,className:"shrink-0 p-0.5 hover:bg-gray-200 rounded",children:t.jsx(ss,{className:"h-4 w-4 text-gray-500"})})]}):t.jsx("span",{className:"flex-1 text-gray-400 text-sm",children:d}),t.jsx(Ni,{className:`h-4 w-4 sm:h-5 sm:w-5 text-gray-400 shrink-0 transition-transform ${f?"rotate-180":""}`})]})}),h&&t.jsxs("p",{className:"mt-1 text-xs sm:text-sm text-red-500 flex items-center gap-1",children:[t.jsx(Tt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),h]}),f&&!l&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",children:[t.jsx("div",{className:"p-2 border-b border-gray-200",children:t.jsxs("div",{className:"relative",children:[t.jsx(br,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{ref:P,type:"text",value:p,onChange:_,placeholder:"Search events...",className:"w-full pl-8 sm:pl-9 pr-4 py-2 border border-gray-300 rounded-md focus:border-gray-800 outline-none text-sm"}),n&&t.jsx(st,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 animate-spin"})]})}),t.jsx("div",{className:"px-2 py-1.5 border-b border-gray-200 bg-gray-50",children:t.jsxs("span",{className:"text-xs text-gray-500",children:[I.length," event",I.length!==1?"s":""," available"]})}),t.jsx("div",{ref:D,className:"max-h-60 sm:max-h-72 overflow-y-auto",role:"listbox",children:I.length===0?t.jsx("div",{className:"px-4 py-6 sm:py-8 text-center text-gray-500 text-sm",children:n?t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx(st,{className:"h-5 w-5 sm:h-6 sm:w-6 animate-spin"}),t.jsx("span",{children:"Loading events..."})]}):p?t.jsxs("span",{children:['No events found for "',p,'"']}):t.jsx("span",{children:"No events available"})}):I.map((z,H)=>{const U=z._id===e,G=H===S;return t.jsx("div",{onClick:()=>$(z),className:`px-2 sm:px-3 py-2 sm:py-3 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors ${U?"bg-blue-50":G?"bg-gray-100":"hover:bg-gray-50"}`,role:"option","aria-selected":U,children:t.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[t.jsx("div",{className:`shrink-0 w-4 h-4 sm:w-5 sm:h-5 rounded-full border-2 flex items-center justify-center mt-0.5 ${U?"bg-gray-800 border-gray-800":"border-gray-300"}`,children:U&&t.jsx(Rn,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-white"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[t.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:z.name}),z.isLive&&t.jsx("span",{className:"shrink-0 px-1 sm:px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Live"})]}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mt-1 flex-wrap",children:[z.category&&t.jsx("span",{className:`px-1 sm:px-1.5 py-0.5 text-xs rounded ${V(z.category)}`,children:z.category}),z.startDate&&t.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-500",children:[t.jsx(Xt,{className:"h-3 w-3"}),che(z.startDate)]}),z.price!==void 0&&t.jsx("span",{className:"text-xs text-gray-600 font-medium",children:dhe(z.price)})]})]})]})},z._id)})})]})]})}const uhe=e=>e==null?"":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),hhe=e=>{const r={};if(e.eventId||(r.eventId="Event is required"),!e.phone.trim())r.phone="Phone number is required";else{const s=e.phone.replace(/[^0-9]/g,"");(s.length<10||s.length>15)&&(r.phone="Phone must be 10-15 digits")}return!e.ticketCount||e.ticketCount<1?r.ticketCount="At least 1 ticket is required":e.ticketCount>100&&(r.ticketCount="Maximum 100 tickets allowed"),e.priceCharged&&e.priceCharged<0&&(r.priceCharged="Price cannot be negative"),{isValid:Object.keys(r).length===0,errors:r}},x2=()=>({eventId:"",phone:"",ticketCount:1,priceCharged:"",notes:""});function mhe({isOpen:e,onClose:r,onSubmit:s,isLoading:n=!1,serverError:a=null,existingLinkData:l=null,allowedEvents:d=[],eventsLoading:h=!1,onSearchEvents:f}){const[x,p]=v.useState(x2()),[b,S]=v.useState({}),[T,A]=v.useState(null),[P,D]=v.useState(null),[I,L]=v.useState(!1);v.useEffect(()=>{e&&(p(x2()),S({}),A(null),D(null),L(!1))},[e]),v.useEffect(()=>{l&&D({link:l.existingLink,isExisting:!0})},[l]);const _=v.useCallback(H=>{const{name:U,value:G,type:Q}=H.target;let ce=G;Q==="number"&&(ce=G===""?"":Number(G)),p(ne=>({...ne,[U]:ce})),b[U]&&S(ne=>({...ne,[U]:null}))},[b]),$=v.useCallback((H,U)=>{p(G=>({...G,eventId:H})),A(U),U?.price&&p(G=>({...G,eventId:H,priceCharged:G.priceCharged||U.price*(G.ticketCount||1)})),b.eventId&&S(G=>({...G,eventId:null}))},[b.eventId]),F=v.useCallback(H=>{const U=H.target.value===""?"":Number(H.target.value);p(G=>{const Q={...G,ticketCount:U};return T?.price&&U&&(Q.priceCharged=T.price*U),Q}),b.ticketCount&&S(G=>({...G,ticketCount:null}))},[T,b.ticketCount]),B=v.useCallback(async()=>{if(P?.link)try{await navigator.clipboard.writeText(P.link),L(!0),setTimeout(()=>L(!1),2e3)}catch(H){console.error("[CashTicketForm] Failed to copy:",H)}},[P]),M=async H=>{H.preventDefault();const U=hhe(x);if(!U.isValid){S(U.errors);return}const G={eventId:x.eventId,phone:x.phone.replace(/[^0-9]/g,""),ticketCount:Number(x.ticketCount)};x.priceCharged!==""&&x.priceCharged!==null&&(G.priceCharged=Number(x.priceCharged)),x.notes.trim()&&(G.notes=x.notes.trim());const Q=await s(G);Q?.success&&Q.data&&D({link:Q.data.link,isExisting:!1,ticketCount:Q.data.ticketCount,event:Q.data.event,phone:Q.data.phone})},V=v.useCallback(()=>{n||r()},[n,r]),z=v.useCallback(()=>{p(x2()),A(null),D(null),L(!1),S({})},[]);return t.jsx(Pt,{isOpen:e,onClose:V,title:P?"Ticket Link Generated":"Generate Cash Ticket Link",size:"xl",closeOnOverlayClick:!n,children:P?t.jsxs("div",{className:"space-y-4",children:[P.isExisting&&t.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-2",children:[t.jsx(Tt,{className:"h-5 w-5 text-yellow-600 shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Existing Link Found"}),t.jsx("p",{className:"text-sm text-yellow-700 mt-0.5",children:"An unredeemed ticket link already exists for this phone and event."})]})]}),!P.isExisting&&t.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium text-green-800",children:"Success!"}),t.jsx("p",{className:"text-sm text-green-700 mt-0.5",children:"Cash ticket link has been generated successfully."})]}),P.event&&t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg space-y-1",children:[t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500",children:"Event:"})," ",t.jsx("span",{className:"font-medium text-gray-900",children:P.event.name})]}),t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500",children:"Phone:"})," ",t.jsx("span",{className:"font-medium text-gray-900",children:P.phone})]}),t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500",children:"Tickets:"})," ",t.jsx("span",{className:"font-medium text-gray-900",children:P.ticketCount})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Redemption Link"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:P.link,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-700 truncate"}),t.jsx("button",{type:"button",onClick:B,className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 shrink-0 ${I?"bg-green-600 text-white":"bg-gray-800 text-white hover:bg-gray-900"}`,children:I?t.jsxs(t.Fragment,{children:[t.jsx(Rn,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Copied!"})]}):t.jsxs(t.Fragment,{children:[t.jsx(pu,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Copy"})]})}),t.jsxs("a",{href:P.link,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 shrink-0",children:[t.jsx(Uu,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Open"})]})]})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:V,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"}),t.jsx("button",{type:"button",onClick:z,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Create Another"})]})]}):t.jsxs("form",{onSubmit:M,className:"space-y-4",children:[a&&t.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[t.jsx(Tt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),t.jsx("p",{className:"text-sm text-red-700",children:a})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Event ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(XS,{selectedId:x.eventId,onChange:$,events:d,isLoading:h,onSearch:f,disabled:n,placeholder:"Search and select an event...",error:b.eventId})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",name:"phone",value:x.phone,onChange:_,disabled:n,placeholder:"Enter customer phone number",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${b.phone?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),b.phone&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:b.phone})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Number of Tickets ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"ticketCount",value:x.ticketCount,onChange:F,disabled:n,min:"1",max:"100",placeholder:"1",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${b.ticketCount?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),b.ticketCount&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:b.ticketCount})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price Charged (INR) ",t.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),t.jsx("input",{type:"number",name:"priceCharged",value:x.priceCharged,onChange:_,disabled:n,min:"0",placeholder:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${b.priceCharged?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),b.priceCharged&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:b.priceCharged}),T?.price&&t.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Base price: ",uhe(T.price),"/ticket"]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Notes ",t.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),t.jsx("textarea",{name:"notes",value:x.notes,onChange:_,disabled:n,rows:2,placeholder:"Add any notes about this transaction",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-colors resize-none ${n?"bg-gray-100":""}`})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:V,disabled:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[n&&t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Generate Link"]})]})]})})}const Ag=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",fhe=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);function Eg({icon:e,label:r,value:s,className:n=""}){return t.jsxs("div",{className:`flex items-start gap-3 ${n}`,children:[t.jsx("div",{className:"shrink-0 w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:t.jsx(e,{className:"h-4 w-4 text-gray-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500",children:r}),t.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",children:s||"-"})]})]})}function ghe({isOpen:e,onClose:r,record:s,isLoading:n=!1}){const[a,l]=v.useState(!1);v.useEffect(()=>{e||l(!1)},[e]);const d=v.useCallback(async()=>{if(s?.link)try{await navigator.clipboard.writeText(s.link),l(!0),setTimeout(()=>l(!1),2e3)}catch(h){console.error("[CashTicketDetailsModal] Failed to copy:",h)}},[s?.link]);return t.jsx(Pt,{isOpen:e,onClose:r,title:"Cash Ticket Details",size:"lg",children:n?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading details..."})]}):s?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ${s.redeemed?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:s.redeemed?t.jsxs(t.Fragment,{children:[t.jsx(ar,{className:"h-4 w-4"}),"Redeemed"]}):t.jsxs(t.Fragment,{children:[t.jsx(dr,{className:"h-4 w-4"}),"Pending Redemption"]})}),s.redeemedAt&&t.jsx("span",{className:"text-xs text-gray-500",children:Ag(s.redeemedAt)})]}),t.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"shrink-0 w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx(Xt,{className:"h-5 w-5 text-gray-800"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-800 font-medium",children:"Event"}),t.jsx("p",{className:"text-base font-semibold text-gray-900 truncate",children:s.eventId?.name||"Unknown Event"}),s.eventId?.startDate&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Ag(s.eventId.startDate),s.eventId?.endDate&&` - ${Ag(s.eventId.endDate)}`]})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsx(Eg,{icon:hs,label:"Phone Number",value:s.generatedFor}),t.jsx(Eg,{icon:Go,label:"Ticket Count",value:`${s.ticketCount} ticket${s.ticketCount!==1?"s":""}`}),t.jsx(Eg,{icon:bp,label:"Price Charged",value:fhe(s.priceCharged)}),t.jsx(Eg,{icon:dr,label:"Created At",value:Ag(s.createdAt)})]}),s.generatedBy&&t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Generated By"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:t.jsx(gr,{className:"h-4 w-4 text-gray-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.generatedBy.name||"Unknown"}),t.jsx("p",{className:"text-xs text-gray-500",children:s.generatedBy.email})]})]})]}),s.notes&&t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(ad,{className:"h-4 w-4 text-gray-500"}),t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Notes"})]}),t.jsx("p",{className:"text-sm text-gray-700",children:s.notes})]}),!s.redeemed&&s.link&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Redemption Link"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:s.link,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-700 truncate"}),t.jsx("button",{type:"button",onClick:d,className:`px-3 py-2 rounded-lg transition-colors flex items-center gap-1.5 shrink-0 ${a?"bg-green-600 text-white":"bg-gray-800 text-white hover:bg-gray-900"}`,children:a?t.jsxs(t.Fragment,{children:[t.jsx(Rn,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline text-sm",children:"Copied!"})]}):t.jsxs(t.Fragment,{children:[t.jsx(pu,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline text-sm",children:"Copy"})]})}),t.jsxs("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-1.5 shrink-0",children:[t.jsx(Uu,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline text-sm",children:"Open"})]})]})]}),s.signature&&t.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[t.jsx("span",{className:"text-xs text-gray-400",children:"Signature"}),t.jsx("code",{className:"text-xs font-mono text-gray-500 bg-gray-100 px-2 py-1 rounded",children:s.signature})]}),t.jsx("div",{className:"pt-4 border-t border-gray-200",children:t.jsx("button",{type:"button",onClick:r,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Close"})})]}):t.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Rt,{className:"h-12 w-12 text-gray-300"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No record data available"})]})})}const xhe=e=>{const r={};if(e.eventId||(r.eventId="Event is required"),!e.phone.trim())r.phone="Phone number is required";else{const s=e.phone.replace(/[^0-9]/g,"");(s.length<10||s.length>15)&&(r.phone="Phone must be 10-15 digits")}return e.name.trim()?(e.name.trim().length<2||e.name.trim().length>100)&&(r.name="Name must be 2-100 characters"):r.name="Name is required",e.priceCharged!==""&&e.priceCharged<0&&(r.priceCharged="Price cannot be negative"),{isValid:Object.keys(r).length===0,errors:r}},p2=()=>({eventId:"",phone:"",name:"",priceCharged:"",notes:""});function phe({isOpen:e,onClose:r,onSubmit:s,isLoading:n=!1,serverError:a=null,allowedEvents:l=[],eventsLoading:d=!1,onSearchEvents:h}){const[f,x]=v.useState(p2()),[p,b]=v.useState({}),[S,T]=v.useState(null),[A,P]=v.useState(null);v.useEffect(()=>{e&&(x(p2()),b({}),T(null),P(null))},[e]);const D=v.useCallback(F=>{const{name:B,value:M,type:V}=F.target;let z=M;V==="number"&&(z=M===""?"":Number(M)),x(H=>({...H,[B]:z})),p[B]&&b(H=>({...H,[B]:null}))},[p]),I=v.useCallback((F,B)=>{x(M=>({...M,eventId:F})),T(B),B?.price&&x(M=>({...M,eventId:F,priceCharged:M.priceCharged||B.price})),p.eventId&&b(M=>({...M,eventId:null}))},[p.eventId]),L=async F=>{F.preventDefault();const B=xhe(f);if(!B.isValid){b(B.errors);return}const M={eventId:f.eventId,phone:f.phone.replace(/[^0-9]/g,""),name:f.name.trim()};f.priceCharged!==""&&f.priceCharged!==null&&(M.priceCharged=Number(f.priceCharged)),f.notes.trim()&&(M.notes=f.notes.trim());const V=await s(M);V?.success&&V.data&&P({enrollment:V.data.enrollment,event:V.data.event})},_=v.useCallback(()=>{n||r()},[n,r]),$=v.useCallback(()=>{x(p2()),T(null),P(null),b({})},[]);return t.jsx(Pt,{isOpen:e,onClose:_,title:A?"Direct Ticket Created":"Create Direct Ticket",size:"xl",closeOnOverlayClick:!n,children:A?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg flex items-start gap-2",children:[t.jsx(Rn,{className:"h-5 w-5 text-green-600 shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-green-800",children:"Success"}),t.jsx("p",{className:"text-sm text-green-700 mt-0.5",children:"Direct ticket created and sent via WhatsApp."})]})]}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Go,{className:"h-5 w-5 text-gray-500"}),t.jsx("span",{className:"font-medium text-gray-900",children:A.event?.name})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(gr,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-gray-600",children:A.enrollment?.name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(hs,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-gray-600",children:A.enrollment?.phone})]})]})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:_,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"}),t.jsx("button",{type:"button",onClick:$,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Create Another"})]})]}):t.jsxs("form",{onSubmit:L,className:"space-y-4",children:[a&&t.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[t.jsx(Tt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),t.jsx("p",{className:"text-sm text-red-700",children:a})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Event ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(XS,{selectedId:f.eventId,onChange:I,events:l,isLoading:d,onSearch:h,disabled:n,placeholder:"Search and select an event...",error:p.eventId})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Attendee Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"name",value:f.name,onChange:D,disabled:n,placeholder:"Enter attendee name",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.name?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),p.name&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.name})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",name:"phone",value:f.phone,onChange:D,disabled:n,placeholder:"Enter phone number",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.phone?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),p.phone&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.phone})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price Charged (INR) ",t.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),t.jsx("input",{type:"number",name:"priceCharged",value:f.priceCharged,onChange:D,disabled:n,min:"0",placeholder:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.priceCharged?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),p.priceCharged&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.priceCharged}),S?.price&&t.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Event base price: ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(S.price)]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Notes ",t.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),t.jsx("textarea",{name:"notes",value:f.notes,onChange:D,disabled:n,rows:2,maxLength:500,placeholder:"Add any notes",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-colors resize-none ${n?"bg-gray-100":""}`})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:_,disabled:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[n&&t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Create Ticket"]})]})]})})}const yhe=e=>{if(e===0)return"0 Bytes";const r=1024,s=["Bytes","KB","MB"],n=Math.floor(Math.log(e)/Math.log(r));return parseFloat((e/Math.pow(r,n)).toFixed(2))+" "+s[n]},bhe=e=>{const r={};return e.eventId||(r.eventId="Event is required"),e.file||(r.file="Excel file is required"),e.priceCharged!==""&&e.priceCharged<0&&(r.priceCharged="Price cannot be negative"),{isValid:Object.keys(r).length===0,errors:r}},y2=()=>({eventId:"",file:null,priceCharged:"",notes:""}),vhe=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"],Nhe=".xlsx,.xls,.csv";function jhe({isOpen:e,onClose:r,onSubmit:s,isLoading:n=!1,serverError:a=null,allowedEvents:l=[],eventsLoading:d=!1,onSearchEvents:h}){const[f,x]=v.useState(y2()),[p,b]=v.useState({}),[S,T]=v.useState(null),[A,P]=v.useState(null),[D,I]=v.useState(!1),L=v.useRef(null);v.useEffect(()=>{e&&(x(y2()),b({}),T(null),P(null),I(!1))},[e]);const _=v.useCallback(J=>{const{name:W,value:le,type:ge}=J.target;let re=le;ge==="number"&&(re=le===""?"":Number(le)),x(X=>({...X,[W]:re})),p[W]&&b(X=>({...X,[W]:null}))},[p]),$=v.useCallback((J,W)=>{x(le=>({...le,eventId:J})),T(W),W?.price&&x(le=>({...le,eventId:J,priceCharged:le.priceCharged||W.price})),p.eventId&&b(le=>({...le,eventId:null}))},[p.eventId]),F=J=>vhe.includes(J.type)||J.name.endsWith(".xlsx")||J.name.endsWith(".xls")||J.name.endsWith(".csv"),B=v.useCallback(J=>{if(J){if(!F(J)){b(W=>({...W,file:"Invalid file type. Please upload an Excel file (.xlsx, .xls) or CSV."}));return}if(J.size>10*1024*1024){b(W=>({...W,file:"File size exceeds 10MB limit."}));return}x(W=>({...W,file:J})),b(W=>({...W,file:null}))}},[]),M=J=>{const W=J.target.files?.[0];B(W),J.target.value=""},V=J=>{J.preventDefault(),n||I(!0)},z=J=>{J.preventDefault(),I(!1)},H=J=>{if(J.preventDefault(),I(!1),n)return;const W=J.dataTransfer.files?.[0];B(W)},U=()=>{x(J=>({...J,file:null}))},G=async J=>{J.preventDefault();const W=bhe(f);if(!W.isValid){b(W.errors);return}const le={eventId:f.eventId};f.priceCharged!==""&&f.priceCharged!==null&&(le.priceCharged=Number(f.priceCharged)),f.notes.trim()&&(le.notes=f.notes.trim());const ge=await s(f.file,le);ge?.success&&ge.data&&P(ge.data)},Q=()=>{if(A?.rejectionFile?.base64)try{const J=atob(A.rejectionFile.base64),W=new Array(J.length);for(let ae=0;ae<J.length;ae++)W[ae]=J.charCodeAt(ae);const le=new Uint8Array(W),ge=new Blob([le],{type:A.rejectionFile.mimeType}),re=window.URL.createObjectURL(ge),X=document.createElement("a");X.href=re,X.download=A.rejectionFile.filename,document.body.appendChild(X),X.click(),document.body.removeChild(X),window.URL.revokeObjectURL(re)}catch(J){console.error("[DirectTicketBulk] Failed to download rejections:",J)}},ce=v.useCallback(()=>{n||r()},[n,r]),ne=v.useCallback(()=>{x(y2()),T(null),P(null),b({})},[]);return t.jsx(Pt,{isOpen:e,onClose:ce,title:A?"Bulk Upload Complete":"Bulk Direct Ticket Upload",size:"xl",closeOnOverlayClick:!n,children:A?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:A.summary?.total||0}),t.jsx("div",{className:"text-xs text-gray-500",children:"Total"})]}),t.jsxs("div",{className:"p-3 bg-green-50 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-700",children:A.summary?.successful||0}),t.jsx("div",{className:"text-xs text-green-600",children:"Successful"})]}),t.jsxs("div",{className:"p-3 bg-red-50 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-red-700",children:A.summary?.rejected||0}),t.jsx("div",{className:"text-xs text-red-600",children:"Rejected"})]})]}),A.event&&t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg flex items-center gap-2",children:[t.jsx(F2,{className:"h-5 w-5 text-gray-500"}),t.jsx("span",{className:"font-medium text-gray-900",children:A.event.name})]}),A.successful?.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-green-700",children:[t.jsx(kl,{className:"h-4 w-4"}),"Successful (",A.successful.length,")"]}),t.jsx("div",{className:"max-h-32 overflow-y-auto border border-gray-200 rounded-lg",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-50 sticky top-0",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Row"}),t.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Phone"}),t.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Name"})]})}),t.jsxs("tbody",{className:"divide-y divide-gray-100",children:[A.successful.slice(0,50).map((J,W)=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-3 py-1.5 text-gray-600",children:J.rowNumber}),t.jsx("td",{className:"px-3 py-1.5 text-gray-900",children:J.phone}),t.jsx("td",{className:"px-3 py-1.5 text-gray-900",children:J.name})]},W)),A.successful.length>50&&t.jsx("tr",{children:t.jsxs("td",{colSpan:3,className:"px-3 py-2 text-center text-gray-500 text-xs",children:["... and ",A.successful.length-50," more"]})})]})]})})]}),A.rejected?.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-red-700",children:[t.jsx(Rt,{className:"h-4 w-4"}),"Rejected (",A.rejected.length,")"]}),A.rejectionFile&&t.jsxs("button",{type:"button",onClick:Q,className:"flex items-center gap-1 px-2 py-1 text-xs text-gray-600 bg-gray-100 hover:bg-gray-200 rounded transition-colors",children:[t.jsx(Vz,{className:"h-3 w-3"}),"Download"]})]}),t.jsx("div",{className:"max-h-32 overflow-y-auto border border-gray-200 rounded-lg",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-50 sticky top-0",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Row"}),t.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Phone"}),t.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Reason"})]})}),t.jsxs("tbody",{className:"divide-y divide-gray-100",children:[A.rejected.slice(0,20).map((J,W)=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-3 py-1.5 text-gray-600",children:J.rowNumber}),t.jsx("td",{className:"px-3 py-1.5 text-gray-900",children:J.phone||"-"}),t.jsx("td",{className:"px-3 py-1.5 text-red-600 text-xs",children:J.reason})]},W)),A.rejected.length>20&&t.jsx("tr",{children:t.jsxs("td",{colSpan:3,className:"px-3 py-2 text-center text-gray-500 text-xs",children:["... and ",A.rejected.length-20," more (download for full list)"]})})]})]})})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:ce,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"}),t.jsx("button",{type:"button",onClick:ne,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Upload Another"})]})]}):t.jsxs("form",{onSubmit:G,className:"space-y-4",children:[a&&t.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[t.jsx(Tt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),t.jsx("p",{className:"text-sm text-red-700",children:a})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Event ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(XS,{selectedId:f.eventId,onChange:$,events:l,isLoading:d,onSearch:h,disabled:n,placeholder:"Search and select an event...",error:p.eventId})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Excel File ",t.jsx("span",{className:"text-red-500",children:"*"})]}),f.file?t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[t.jsx(F2,{className:"h-8 w-8 text-green-600 shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:f.file.name}),t.jsx("p",{className:"text-xs text-gray-500",children:yhe(f.file.size)})]}),t.jsx("button",{type:"button",onClick:U,disabled:n,className:"p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors disabled:opacity-50",children:t.jsx(ss,{className:"h-4 w-4"})})]}):t.jsxs("div",{onDragOver:V,onDragLeave:z,onDrop:H,onClick:()=>!n&&L.current?.click(),className:`
                  relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer
                  transition-all duration-200
                  ${D?"border-gray-800 bg-gray-50":"border-gray-300 hover:border-gray-400"}
                  ${n?"opacity-50 cursor-not-allowed":""}
                  ${p.file?"border-red-300 bg-red-50/50":""}
                `,children:[t.jsx("input",{ref:L,type:"file",accept:Nhe,onChange:M,disabled:n,className:"hidden"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx(HP,{className:"h-5 w-5 text-gray-500"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Drop Excel file here or click to upload"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"XLSX, XLS, or CSV (max 10MB)"})]})]})]}),p.file&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.file}),t.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[t.jsxs("p",{children:["Excel should have columns: ",t.jsx("span",{className:"font-medium",children:"phone"})," and ",t.jsx("span",{className:"font-medium",children:"name"})]}),t.jsx("p",{className:"text-gray-400",children:"Column order doesn't matter. Accepts: Phone, phone number, Name, full name, etc."})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price Charged Per Ticket (INR) ",t.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),t.jsx("input",{type:"number",name:"priceCharged",value:f.priceCharged,onChange:_,disabled:n,min:"0",placeholder:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.priceCharged?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),p.priceCharged&&t.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.priceCharged}),S?.price&&t.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Event base price: ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(S.price)]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Notes ",t.jsx("span",{className:"text-gray-400",children:"(Optional, applies to all)"})]}),t.jsx("textarea",{name:"notes",value:f.notes,onChange:_,disabled:n,rows:2,maxLength:500,placeholder:"Add notes for all tickets",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-colors resize-none ${n?"bg-gray-100":""}`})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:ce,disabled:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[n&&t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Upload & Process"]})]})]})})}const ED=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",TD=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Tg={redeemed:"bg-green-100 text-green-700",pending:"bg-yellow-100 text-yellow-700"};function whe(){const{admin:e}=vn(),{records:r,pagination:s,filters:n,isLoading:a,error:l,allowedEvents:d,eventsLoading:h,fetchRecords:f,createRecord:x,getRecordById:p,deleteRecord:b,searchEvents:S,updateFilters:T,changePage:A,clearError:P}=ohe(),D=v.useMemo(()=>e?.role==="ADMIN"||e?.role==="SUPER_ADMIN",[e?.role]),I=v.useMemo(()=>e?.role==="MANAGEMENT_STAFF"?r.filter(Ze=>Ze.generatedBy?._id===e._id):r,[r,e?.role,e?._id]),[L,_]=v.useState(!1),[$,F]=v.useState(!1),[B,M]=v.useState(!1),[V,z]=v.useState(!1),[H,U]=v.useState(!1),[G,Q]=v.useState(null),[ce,ne]=v.useState(!1),[J,W]=v.useState(!1),[le,ge]=v.useState(null),[re,X]=v.useState(null),[ae,ve]=v.useState(!1),[fe,se]=v.useState(null),[oe,he]=v.useState(!1),[Ve,Ce]=v.useState(null),[Ke,xe]=v.useState(null),[Ee,pe]=v.useState(!1),[Fe,me]=v.useState(n.eventId||""),[Ge,Te]=v.useState(n.redeemed||""),at=v.useCallback(()=>{ge(null),X(null),_(!0)},[]),dt=v.useCallback(()=>{_(!1),ge(null),X(null)},[]),Nt=v.useCallback(()=>{se(null),z(!0)},[]),Qe=v.useCallback(()=>{z(!1),se(null)},[]),ct=v.useCallback(async Ze=>{ve(!0),se(null);try{const Mt=await qo.createDirectTicket(Ze);return Mt.success?(console.log("[CashTickets] Direct ticket created:",Mt.data?.enrollment?.id),f(1),{success:!0,data:Mt.data}):(console.error("[CashTickets] Direct ticket failed:",Mt.message),se(Mt.message||"Failed to create direct ticket"),{success:!1})}catch(Mt){return console.error("[CashTickets] Direct ticket error:",Mt),se("An unexpected error occurred"),{success:!1}}finally{ve(!1)}},[f]),ze=v.useCallback(()=>{Ce(null),U(!0)},[]),ft=v.useCallback(()=>{U(!1),Ce(null)},[]),Kt=v.useCallback(async(Ze,Mt)=>{he(!0),Ce(null);try{const zr=await qo.createDirectTicketBulk(Ze,Mt);return zr.success?(console.log("[CashTickets] Bulk direct tickets processed:",zr.data?.summary),f(1),{success:!0,data:zr.data}):(console.error("[CashTickets] Bulk direct tickets failed:",zr.message),Ce(zr.message||"Failed to process bulk upload"),{success:!1})}catch(zr){return console.error("[CashTickets] Bulk direct tickets error:",zr),Ce("An unexpected error occurred"),{success:!1}}finally{he(!1)}},[f]),lr=v.useCallback(async Ze=>{W(!0),ge(null),X(null);try{const Mt=await x(Ze);return Mt.success?Mt:Mt.existingLink?(X({existingLink:Mt.existingLink,signature:Mt.signature}),{success:!1}):(ge(Mt.error||"Failed to create cash ticket"),{success:!1})}catch{return ge("An unexpected error occurred"),{success:!1}}finally{W(!1)}},[x]),ys=v.useCallback(async Ze=>{Q(Ze),F(!0),ne(!0);try{const Mt=await p(Ze._id);Mt.success&&Q(Mt.data)}catch(Mt){console.error("[CashTickets] Failed to fetch details:",Mt)}finally{ne(!1)}},[p]),Ye=v.useCallback(()=>{F(!1),Q(null)},[]),xt=v.useCallback(Ze=>{Q(Ze),M(!0)},[]),Ur=v.useCallback(()=>{M(!1),Q(null)},[]),Ir=v.useCallback(async()=>{if(G){W(!0);try{const Ze=await b(G._id);Ze.success?Ur():alert(Ze.error||"Failed to delete record")}catch{alert("An unexpected error occurred")}finally{W(!1)}}},[G,b,Ur]),Cr=v.useCallback(async(Ze,Mt)=>{try{await navigator.clipboard.writeText(Ze),xe(Mt),setTimeout(()=>xe(null),2e3)}catch(zr){console.error("[CashTickets] Failed to copy:",zr)}},[]),_t=v.useCallback(()=>{T({eventId:Fe,redeemed:Ge}),pe(!1)},[Fe,Ge,T]),Ae=v.useCallback(()=>{me(""),Te(""),T({eventId:"",redeemed:""}),pe(!1)},[T]),tt=v.useCallback(()=>{f(s.page)},[f,s.page]),lt=v.useMemo(()=>n.eventId||n.redeemed!=="",[n]),Ct=v.useMemo(()=>I.reduce((Ze,Mt)=>Ze+(Mt.ticketCount||0),0),[I]),jr=v.useMemo(()=>e?.role==="MANAGEMENT_STAFF"&&e?.maxCashTicketsAllowed!=null,[e?.role,e?.maxCashTicketsAllowed]),bs=v.useMemo(()=>jr?Math.min(100,Ct/e.maxCashTicketsAllowed*100):0,[jr,Ct,e?.maxCashTicketsAllowed]),Ar=bs>=80,ht=Ct>=e?.maxCashTicketsAllowed;return t.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Cash Tickets"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Generate and manage offline cash payment ticket links"})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsxs("button",{onClick:at,disabled:ht,className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-colors font-medium ${ht?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-800 text-white hover:bg-gray-900"}`,title:ht?"Ticket limit reached":"Generate new ticket link",children:[t.jsx(fr,{className:"h-5 w-5"}),t.jsx("span",{className:"hidden sm:inline",children:"Generate Link"}),t.jsx("span",{className:"sm:hidden",children:"Link"})]}),t.jsxs("button",{onClick:Nt,disabled:ht,className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-colors font-medium ${ht?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-700 text-white hover:bg-gray-800"}`,title:ht?"Ticket limit reached":"Create direct ticket",children:[t.jsx(Tj,{className:"h-5 w-5"}),t.jsx("span",{className:"hidden sm:inline",children:"Direct Ticket"}),t.jsx("span",{className:"sm:hidden",children:"Direct"})]}),t.jsxs("button",{onClick:ze,disabled:ht,className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-colors font-medium ${ht?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700"}`,title:ht?"Ticket limit reached":"Bulk upload direct tickets",children:[t.jsx(F2,{className:"h-5 w-5"}),t.jsx("span",{className:"hidden sm:inline",children:"Direct Ticket Bulk"}),t.jsx("span",{className:"sm:hidden",children:"Bulk"})]})]})]}),jr&&t.jsxs("div",{className:`p-4 rounded-xl border ${ht?"bg-red-50 border-red-200":Ar?"bg-yellow-50 border-yellow-200":"bg-blue-50 border-blue-200"}`,children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Go,{className:`h-5 w-5 ${ht?"text-red-600":Ar?"text-yellow-600":"text-gray-800"}`}),t.jsx("h3",{className:`font-medium ${ht?"text-red-800":Ar?"text-yellow-800":"text-blue-800"}`,children:"Ticket Generation Limit"})]}),t.jsx("p",{className:`text-sm ${ht?"text-red-700":Ar?"text-yellow-700":"text-blue-700"}`,children:ht?t.jsx(t.Fragment,{children:"You have reached your maximum ticket limit. Contact your administrator to increase your limit."}):t.jsxs(t.Fragment,{children:["You have created"," ",t.jsxs("span",{className:"font-semibold",children:[Ct," of ",e.maxCashTicketsAllowed]})," ","tickets (",e.maxCashTicketsAllowed-Ct," remaining)"]})})]}),t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:`text-2xl font-bold ${ht?"text-red-700":Ar?"text-yellow-700":"text-blue-700"}`,children:Ct}),t.jsxs("div",{className:`text-xs ${ht?"text-red-600":Ar?"text-yellow-600":"text-gray-800"}`,children:["of ",e.maxCashTicketsAllowed]})]})})]}),t.jsx("div",{className:"mt-3",children:t.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full transition-all duration-300 ${ht?"bg-red-600":Ar?"bg-yellow-500":"bg-blue-600"}`,style:{width:`${bs}%`}})})})]}),l&&t.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[t.jsx(Tt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error loading records"}),t.jsx("p",{className:"text-sm text-red-700 mt-0.5",children:l})]}),t.jsx("button",{onClick:P,className:"shrink-0 text-red-600 hover:text-red-800",children:""})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[t.jsxs("button",{onClick:()=>pe(!Ee),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${lt?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[t.jsx(Fn,{className:"h-4 w-4"}),t.jsx("span",{children:"Filters"}),lt&&t.jsx("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full",children:(n.eventId?1:0)+(n.redeemed!==""?1:0)}),t.jsx(Ni,{className:`h-4 w-4 transition-transform ${Ee?"rotate-180":""}`})]}),t.jsxs("button",{onClick:tt,disabled:a,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[t.jsx(ms,{className:`h-4 w-4 ${a?"animate-spin":""}`}),t.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),t.jsxs("div",{className:"ml-auto text-sm text-gray-500",children:[s.total," record",s.total!==1?"s":""," total"]})]}),Ee&&t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event"}),t.jsxs("select",{value:Fe,onChange:Ze=>me(Ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Events"}),d.map(Ze=>t.jsx("option",{value:Ze._id,children:Ze.name},Ze._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsxs("select",{value:Ge,onChange:Ze=>Te(Ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"false",children:"Pending"}),t.jsx("option",{value:"true",children:"Redeemed"})]})]}),t.jsxs("div",{className:"flex items-end gap-2 sm:col-span-2 lg:col-span-1",children:[t.jsx("button",{onClick:_t,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Apply"}),t.jsx("button",{onClick:Ae,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]})})]}),t.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Event"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Phone"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Details"}),D&&t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Created By"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:a&&I.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:D?6:5,className:"px-6 py-12 text-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading records..."})]})}):I.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:D?6:5,className:"px-6 py-12 text-center",children:[t.jsx(Go,{className:"h-12 w-12 text-gray-300 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No records found"}),t.jsx("button",{onClick:at,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Generate your first ticket link"})]})}):I.map(Ze=>t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center shrink-0",children:t.jsx(Xt,{className:"h-4 w-4 text-gray-800"})}),t.jsx("span",{className:"font-medium text-gray-900 truncate max-w-[200px]",children:Ze.eventId?.name||"Unknown Event"})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(hs,{className:"h-4 w-4 text-gray-400"}),Ze.generatedFor]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("span",{className:"text-gray-900 font-medium",children:[Ze.ticketCount," x ",TD(Ze.priceCharged)]}),t.jsx("span",{className:"text-xs text-gray-500 mt-0.5",children:ED(Ze.createdAt)})]})}),D&&t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-gray-900 font-medium",children:Ze.generatedBy?.name||"-"}),(Ze.generatedBy?.email||Ze.generatedBy?.phone)&&t.jsx("span",{className:"text-xs text-gray-500 mt-0.5",children:Ze.generatedBy?.email||Ze.generatedBy?.phone})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Ze.redeemed?Tg.redeemed:Tg.pending}`,children:Ze.redeemed?"Redeemed":"Pending"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[!Ze.redeemed&&Ze.link&&t.jsx("button",{onClick:()=>Cr(Ze.link,Ze._id),className:`p-2 rounded-lg transition-colors ${Ke===Ze._id?"text-green-600 bg-green-50":"text-gray-600 hover:bg-gray-100"}`,title:"Copy link",children:Ke===Ze._id?t.jsx(Rn,{className:"h-4 w-4"}):t.jsx(pu,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>ys(Ze),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details",children:t.jsx(Or,{className:"h-4 w-4"})}),!Ze.redeemed&&t.jsx("button",{onClick:()=>xt(Ze),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:t.jsx(ir,{className:"h-4 w-4"})})]})})]},Ze._id))})]})}),s.totalPages>0&&t.jsx(vr,{currentPage:s.page,totalPages:s.totalPages,totalItems:s.total,itemsPerPage:s.limit,onPageChange:A,itemLabel:"records"})]}),t.jsx("div",{className:"md:hidden space-y-4",children:a&&I.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading records..."})]}):I.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(Go,{className:"h-12 w-12 text-gray-300 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No records found"}),t.jsx("button",{onClick:at,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Generate your first ticket link"})]}):t.jsxs(t.Fragment,{children:[I.map(Ze=>t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center shrink-0",children:t.jsx(Xt,{className:"h-5 w-5 text-gray-800"})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:Ze.eventId?.name||"Unknown Event"}),t.jsx("p",{className:"text-xs text-gray-500",children:ED(Ze.createdAt)})]})]}),t.jsx("span",{className:`shrink-0 px-2.5 py-1 rounded-full text-xs font-medium ${Ze.redeemed?Tg.redeemed:Tg.pending}`,children:Ze.redeemed?"Redeemed":"Pending"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(hs,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-gray-600",children:Ze.generatedFor})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Go,{className:"h-4 w-4 text-gray-400"}),t.jsxs("span",{className:"text-gray-600",children:[Ze.ticketCount," x ",TD(Ze.priceCharged)]})]})]}),D&&t.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Created By"}),t.jsxs("div",{className:"flex flex-col items-end",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:Ze.generatedBy?.name||"-"}),(Ze.generatedBy?.email||Ze.generatedBy?.phone)&&t.jsx("span",{className:"text-xs text-gray-500",children:Ze.generatedBy?.email||Ze.generatedBy?.phone})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100",children:[!Ze.redeemed&&Ze.link&&t.jsx("button",{onClick:()=>Cr(Ze.link,Ze._id),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Ke===Ze._id?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Ke===Ze._id?t.jsxs(t.Fragment,{children:[t.jsx(Rn,{className:"h-4 w-4"}),"Copied!"]}):t.jsxs(t.Fragment,{children:[t.jsx(pu,{className:"h-4 w-4"}),"Copy Link"]})}),t.jsxs("button",{onClick:()=>ys(Ze),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:[t.jsx(Or,{className:"h-4 w-4"}),"Details"]}),!Ze.redeemed&&t.jsx("button",{onClick:()=>xt(Ze),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:t.jsx(ir,{className:"h-4 w-4"})})]})]},Ze._id)),s.totalPages>0&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsx(vr,{currentPage:s.page,totalPages:s.totalPages,totalItems:s.total,itemsPerPage:s.limit,onPageChange:A,itemLabel:"records"})})]})}),t.jsx(mhe,{isOpen:L,onClose:dt,onSubmit:lr,isLoading:J,serverError:le,existingLinkData:re,allowedEvents:d,eventsLoading:h,onSearchEvents:S}),t.jsx(ghe,{isOpen:$,onClose:Ye,record:G,isLoading:ce}),t.jsx(xs,{isOpen:B,onClose:Ur,onConfirm:Ir,title:"Delete Cash Ticket",message:`Are you sure you want to delete this cash ticket for ${G?.generatedFor}? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:J}),t.jsx(phe,{isOpen:V,onClose:Qe,onSubmit:ct,isLoading:ae,serverError:fe,allowedEvents:d,eventsLoading:h,onSearchEvents:S}),t.jsx(jhe,{isOpen:H,onClose:ft,onSubmit:Kt,isLoading:oe,serverError:Ve,allowedEvents:d,eventsLoading:h,onSearchEvents:S})]})}const di={BASE:"/web/vouchers",GET_BY_ID:e=>`/web/vouchers/${e}`,UPDATE:e=>`/web/vouchers/${e}`,DELETE:e=>`/web/vouchers/${e}`,ENABLE:e=>`/web/vouchers/${e}/enable`,DISABLE:e=>`/web/vouchers/${e}/disable`,DELETED:"/web/vouchers/deleted",RESTORE:e=>`/web/vouchers/${e}/restore`,PERMANENT_DELETE:e=>`/web/vouchers/${e}/permanent`},Rc={create:async e=>{console.log("[VoucherService] Creating voucher with code:",e.code);const r=await Se(je.post(di.BASE,e));return r.success?console.log("[VoucherService] Voucher created successfully:",r.data.voucher?._id):console.error("[VoucherService] Failed to create voucher:",r.message),r},getAll:async(e={})=>{const r=new URLSearchParams;e.page&&r.append("page",e.page),e.limit&&r.append("limit",e.limit),e.sortBy&&r.append("sortBy",e.sortBy),e.sortOrder&&r.append("sortOrder",e.sortOrder),e.isActive!==void 0&&e.isActive!==""&&r.append("isActive",e.isActive),e.search&&r.append("search",e.search);const s=r.toString(),n=s?`${di.BASE}?${s}`:di.BASE;console.log("[VoucherService] Fetching vouchers with params:",e);const a=await Se(je.get(n));return a.success?console.log("[VoucherService] Fetched vouchers:",a.data.vouchers?.length):console.error("[VoucherService] Failed to fetch vouchers:",a.message),a},getById:async e=>{console.log("[VoucherService] Fetching voucher by ID:",e);const r=await Se(je.get(di.GET_BY_ID(e)));return r.success?console.log("[VoucherService] Fetched voucher:",r.data.voucher?._id):console.error("[VoucherService] Failed to fetch voucher:",r.message),r},update:async(e,r)=>{console.log("[VoucherService] Updating voucher:",e);const s=await Se(je.put(di.UPDATE(e),r));return s.success?console.log("[VoucherService] Voucher updated successfully"):console.error("[VoucherService] Failed to update voucher:",s.message),s},enable:async e=>{console.log("[VoucherService] Enabling voucher:",e);const r=await Se(je.post(di.ENABLE(e)));return r.success?console.log("[VoucherService] Voucher enabled successfully"):console.error("[VoucherService] Failed to enable voucher:",r.message),r},disable:async e=>{console.log("[VoucherService] Disabling voucher:",e);const r=await Se(je.post(di.DISABLE(e)));return r.success?console.log("[VoucherService] Voucher disabled successfully"):console.error("[VoucherService] Failed to disable voucher:",r.message),r},delete:async e=>{console.log("[VoucherService] Deleting voucher:",e);const r=await Se(je.delete(di.DELETE(e)));return r.success?console.log("[VoucherService] Voucher deleted successfully"):console.error("[VoucherService] Failed to delete voucher:",r.message),r},getDeleted:async()=>{console.log("[VoucherService] Fetching deleted vouchers");const e=await Se(je.get(di.DELETED));return e.success?console.log("[VoucherService] Fetched deleted vouchers:",e.data.vouchers?.length):console.error("[VoucherService] Failed to fetch deleted vouchers:",e.message),e},restore:async e=>{console.log("[VoucherService] Restoring voucher:",e);const r=await Se(je.post(di.RESTORE(e)));return r.success?console.log("[VoucherService] Voucher restored successfully"):console.error("[VoucherService] Failed to restore voucher:",r.message),r},permanentDelete:async e=>{console.log("[VoucherService] Permanently deleting voucher:",e);const r=await Se(je.delete(di.PERMANENT_DELETE(e)));return r.success?console.log("[VoucherService] Voucher permanently deleted"):console.error("[VoucherService] Failed to permanently delete voucher:",r.message),r}};function She(e={}){const[r,s]=v.useState([]),[n,a]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[l,d]=v.useState({search:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e}),[h,f]=v.useState(!1),[x,p]=v.useState(null),b=v.useRef(null),S=v.useCallback(async(V=n.currentPage)=>{f(!0),p(null);try{const z={page:V,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.isActive!==""&&{isActive:l.isActive}},H=await Rc.getAll(z);H.success?(s(H.data.vouchers||[]),a({currentPage:H.data.pagination?.currentPage||1,totalPages:H.data.pagination?.totalPages||0,totalCount:H.data.pagination?.totalCount||0,limit:H.data.pagination?.limit||10})):(p(H.message),s([]))}catch{p("Failed to fetch vouchers"),s([])}finally{f(!1)}},[l,n.limit]),T=v.useCallback(async V=>{try{const z=await Rc.create(V);return z.success?(await S(1),{success:!0,data:z.data}):{success:!1,error:z.message,validationErrors:z.error}}catch{return{success:!1,error:"Failed to create voucher"}}},[S]),A=v.useCallback(async V=>{try{const z=await Rc.getById(V);return z.success?{success:!0,data:z.data.voucher}:{success:!1,error:z.message}}catch{return{success:!1,error:"Failed to fetch voucher details"}}},[]),P=v.useCallback(async(V,z)=>{try{const H=await Rc.update(V,z);return H.success?(s(U=>U.map(G=>G._id===V?{...G,...H.data.voucher}:G)),{success:!0,data:H.data}):{success:!1,error:H.message,validationErrors:H.error}}catch{return{success:!1,error:"Failed to update voucher"}}},[]),D=v.useCallback(async(V,z)=>{try{const H=z?await Rc.disable(V):await Rc.enable(V);return H.success?(s(U=>U.map(G=>G._id===V?{...G,isActive:!z}:G)),{success:!0}):{success:!1,error:H.message}}catch{return{success:!1,error:"Failed to update voucher status"}}},[]),I=v.useCallback(async V=>{try{const z=await Rc.delete(V);return z.success?(s(H=>H.filter(U=>U._id!==V)),a(H=>({...H,totalCount:H.totalCount-1,totalPages:Math.ceil((H.totalCount-1)/H.limit)})),{success:!0}):{success:!1,error:z.message}}catch{return{success:!1,error:"Failed to delete voucher"}}},[]),L=v.useCallback(V=>{b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{d(z=>({...z,search:V}))},300)},[]),_=v.useCallback(V=>{d(z=>({...z,...V}))},[]),$=v.useCallback(()=>{d({search:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),F=v.useCallback(V=>{S(V)},[S]),B=v.useCallback(V=>{a(z=>({...z,limit:V}))},[]),M=v.useCallback(()=>{p(null)},[]);return v.useEffect(()=>{S(1)},[l]),v.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),{vouchers:r,pagination:n,filters:l,isLoading:h,error:x,fetchVouchers:S,createVoucher:T,getVoucherById:A,updateVoucher:P,toggleVoucherStatus:D,deleteVoucher:I,searchVouchers:L,updateFilters:_,resetFilters:$,changePage:F,changeLimit:B,clearError:M}}const DD=()=>({title:"",description:"",code:"",maxUsage:"",events:[],isActive:!0});function Che({isOpen:e,onClose:r,onSubmit:s,isLoading:n=!1,serverError:a=null,voucherToEdit:l=null}){const[d,h]=v.useState(DD()),[f,x]=v.useState({}),p=!!l;v.useEffect(()=>{e&&(h(l?{title:l.title||"",description:l.description||"",code:l.code||"",maxUsage:l.maxUsage?.toString()||"",events:l.events?.map(D=>D._id||D)||[],isActive:l.isActive??!0}:DD()),x({}))},[e,l]);const b=D=>{const I={};if(D.title.trim()?D.title.length>100&&(I.title="Title must be less than 100 characters"):I.title="Title is required",D.description.trim()?D.description.length>500&&(I.description="Description must be less than 500 characters"):I.description="Description is required",D.code.trim()?/^[A-Z0-9_-]+$/i.test(D.code)?D.code.length>20&&(I.code="Code must be less than 20 characters"):I.code="Code can only contain letters, numbers, hyphens, and underscores":I.code="Voucher code is required",!D.maxUsage)I.maxUsage="Maximum usage is required";else{const L=parseInt(D.maxUsage,10);isNaN(L)||L<1?I.maxUsage="Maximum usage must be at least 1":L>1e6&&(I.maxUsage="Maximum usage cannot exceed 1,000,000")}return{isValid:Object.keys(I).length===0,errors:I}},S=(D,I)=>{h(L=>({...L,[D]:I})),f[D]&&x(L=>{const _={...L};return delete _[D],_})},T=D=>{S("code",D.toUpperCase())},A=D=>{S("events",D)},P=async D=>{D.preventDefault();const{isValid:I,errors:L}=b(d);if(!I){x(L);return}const _={title:d.title.trim(),description:d.description.trim(),code:d.code.trim().toUpperCase(),maxUsage:parseInt(d.maxUsage,10),isActive:d.isActive};d.events.length>0&&(_.events=d.events),(await s(_))?.success&&r()};return t.jsx(Pt,{isOpen:e,onClose:r,title:p?"Edit Voucher":"Create Voucher",size:"lg",children:t.jsxs("form",{onSubmit:P,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:d.title,onChange:D=>S("title",D.target.value),placeholder:"e.g., Festival Food Court Discount",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.title&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.title})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:d.description,onChange:D=>S("description",D.target.value),placeholder:"e.g., Get Rs.200 off at the food court for first 1500 buyers",rows:3,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${f.description?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.description&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.description})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Voucher Code ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:d.code,onChange:D=>T(D.target.value),placeholder:"e.g., FESTIVAL200",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none font-mono uppercase transition-colors ${f.code?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.code&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.code})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Maximum Usage ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:d.maxUsage,onChange:D=>S("maxUsage",D.target.value),placeholder:"e.g., 1500",min:"1",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.maxUsage?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.maxUsage&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.maxUsage})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Linked Events",t.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),t.jsx(u9,{selectedIds:d.events,onChange:A,disabled:n,placeholder:"Select events to link this voucher..."}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to make the voucher available for all events"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d.isActive,onChange:D=>S("isActive",D.target.checked),disabled:n,className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800"})]}),t.jsx("span",{className:"text-sm text-gray-700",children:d.isActive?"Active":"Disabled"})]}),a&&t.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[t.jsx(Tt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),t.jsx("p",{className:"text-sm text-red-700",children:a})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:r,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:n?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),t.jsx("span",{children:p?"Updating...":"Creating..."})]}):t.jsx("span",{children:p?"Update Voucher":"Create Voucher"})})]})]})})}const OD=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Ahe=(e,r)=>r?Math.min(Math.round(e/r*100),100):0,Ehe=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500";function The({isOpen:e,onClose:r,voucher:s,isLoading:n=!1}){if(!s&&!n)return null;const a=s?Ahe(s.usageCount||0,s.maxUsage):0;return t.jsx(Pt,{isOpen:e,onClose:r,title:"Voucher Details",size:"lg",children:n?t.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading voucher details..."})]}):s?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4 pb-4 border-b border-gray-200",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.title}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.description})]}),t.jsxs("span",{className:`shrink-0 px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1.5 ${s.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:[s.isActive?t.jsx(ar,{className:"h-4 w-4"}):t.jsx(Rt,{className:"h-4 w-4"}),s.isActive?"Active":"Disabled"]})]}),t.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx(on,{className:"h-5 w-5 text-gray-800"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-800 font-medium uppercase",children:"Voucher Code"}),t.jsx("p",{className:"text-xl font-bold text-blue-900 font-mono tracking-wider",children:s.code})]})]})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Usage Progress"}),t.jsxs("span",{className:"text-sm text-gray-500",children:[s.usageCount||0," / ",s.maxUsage," claimed"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:t.jsx("div",{className:`h-3 rounded-full transition-all ${Ehe(a)}`,style:{width:`${a}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a,"% used (",s.maxUsage-(s.usageCount||0)," remaining)"]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(Sj,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Maximum Usage"})]}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.maxUsage?.toLocaleString("en-IN")})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(tn,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Times Used"})]}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(s.usageCount||0).toLocaleString("en-IN")})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(dr,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Created"})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:OD(s.createdAt)})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(dr,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Last Updated"})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:OD(s.updatedAt)})]})]}),s.createdBy&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(gr,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Created By"})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.createdBy.name||s.createdBy.email}),s.createdBy.email&&s.createdBy.name&&t.jsx("p",{className:"text-xs text-gray-500",children:s.createdBy.email})]}),s.events&&s.events.length>0&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Xt,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Linked Events"})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:s.events.map(l=>t.jsx("span",{className:"px-3 py-1.5 bg-blue-100 text-gray-900 rounded-full text-sm font-medium",children:l.name||l},l._id||l))})]}),s.claimedPhones&&s.claimedPhones.length>0&&t.jsx("div",{className:"pt-4 border-t border-gray-200",children:t.jsxs("p",{className:"text-sm text-gray-500",children:[t.jsx("span",{className:"font-medium",children:s.claimedPhones.length})," phone number",s.claimedPhones.length!==1?"s":""," have claimed this voucher"]})}),t.jsx("div",{className:"pt-4 border-t border-gray-200",children:t.jsx("button",{onClick:r,className:"w-full px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Close"})})]}):t.jsx("div",{className:"py-12 text-center text-gray-500",children:t.jsx("p",{children:"No voucher data available"})})})}const PD=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",kD=(e,r)=>r?Math.min(Math.round(e/r*100),100):0,_D=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500",Dg={active:"bg-green-100 text-green-700",disabled:"bg-gray-100 text-gray-600"};function Dhe(){const{vouchers:e,pagination:r,filters:s,isLoading:n,error:a,fetchVouchers:l,createVoucher:d,getVoucherById:h,updateVoucher:f,toggleVoucherStatus:x,deleteVoucher:p,searchVouchers:b,updateFilters:S,resetFilters:T,changePage:A,clearError:P}=She(),[D,I]=v.useState(!1),[L,_]=v.useState(!1),[$,F]=v.useState(!1),[B,M]=v.useState(null),[V,z]=v.useState(null),[H,U]=v.useState(!1),[G,Q]=v.useState(!1),[ce,ne]=v.useState(null),[J,W]=v.useState(!1),[le,ge]=v.useState(s.search||""),[re,X]=v.useState(s.isActive||""),ae=v.useCallback(()=>{ne(null),z(null),I(!0)},[]),ve=v.useCallback(async Te=>{ne(null),U(!0);try{const at=await h(Te._id);at.success?(z(at.data),I(!0)):alert(at.error||"Failed to load voucher details")}catch{alert("An unexpected error occurred")}finally{U(!1)}},[h]),fe=v.useCallback(()=>{I(!1),ne(null),z(null)},[]),se=v.useCallback(async Te=>{Q(!0),ne(null);try{let at;return V?at=await f(V._id,Te):at=await d(Te),at.success?at:(ne(at.error||"Failed to save voucher"),{success:!1})}catch{return ne("An unexpected error occurred"),{success:!1}}finally{Q(!1)}},[d,f,V]),oe=v.useCallback(async Te=>{M(Te),_(!0),U(!0);try{const at=await h(Te._id);at.success&&M(at.data)}catch(at){console.error("[Vouchers] Failed to fetch details:",at)}finally{U(!1)}},[h]),he=v.useCallback(()=>{_(!1),M(null)},[]),Ve=v.useCallback(async Te=>{Q(!0);try{const at=await x(Te._id,Te.isActive);at.success||alert(at.error||"Failed to update voucher status")}catch{alert("An unexpected error occurred")}finally{Q(!1)}},[x]),Ce=v.useCallback(Te=>{M(Te),F(!0)},[]),Ke=v.useCallback(()=>{F(!1),M(null)},[]),xe=v.useCallback(async()=>{if(B){Q(!0);try{const Te=await p(B._id);Te.success?Ke():alert(Te.error||"Failed to delete voucher")}catch{alert("An unexpected error occurred")}finally{Q(!1)}}},[B,p,Ke]),Ee=v.useCallback(Te=>{const at=Te.target.value;ge(at),b(at)},[b]),pe=v.useCallback(()=>{S({search:le,isActive:re}),W(!1)},[le,re,S]),Fe=v.useCallback(()=>{ge(""),X(""),T(),W(!1)},[T]),me=v.useCallback(()=>{l(r.currentPage)},[l,r.currentPage]),Ge=v.useMemo(()=>s.search||s.isActive!=="",[s]);return t.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Vouchers"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Create and manage discount vouchers"})]}),t.jsxs("button",{onClick:ae,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium",children:[t.jsx(fr,{className:"h-5 w-5"}),t.jsx("span",{children:"Create Voucher"})]})]}),a&&t.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[t.jsx(Tt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error loading vouchers"}),t.jsx("p",{className:"text-sm text-red-700 mt-0.5",children:a})]}),t.jsx("button",{onClick:P,className:"shrink-0 text-red-600 hover:text-red-800",children:""})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:le,onChange:Ee,placeholder:"Search vouchers...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("button",{onClick:()=>W(!J),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${Ge?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[t.jsx(Fn,{className:"h-4 w-4"}),t.jsx("span",{children:"Filters"}),Ge&&t.jsx("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full",children:(s.search?1:0)+(s.isActive!==""?1:0)}),t.jsx(Ni,{className:`h-4 w-4 transition-transform ${J?"rotate-180":""}`})]}),t.jsxs("button",{onClick:me,disabled:n,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[t.jsx(ms,{className:`h-4 w-4 ${n?"animate-spin":""}`}),t.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),t.jsxs("div",{className:"ml-auto text-sm text-gray-500",children:[r.totalCount," voucher",r.totalCount!==1?"s":""," total"]})]}),J&&t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsxs("select",{value:re,onChange:Te=>X(Te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"true",children:"Active"}),t.jsx("option",{value:"false",children:"Disabled"})]})]}),t.jsxs("div",{className:"flex items-end gap-2 sm:col-span-1 lg:col-span-2",children:[t.jsx("button",{onClick:pe,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Apply"}),t.jsx("button",{onClick:Fe,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]})})]}),t.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Code"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Title"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Usage"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Events"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Created"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:n&&e.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading vouchers..."})]})}):e.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[t.jsx(on,{className:"h-12 w-12 text-gray-300 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No vouchers found"}),t.jsx("button",{onClick:ae,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first voucher"})]})}):e.map(Te=>{const at=kD(Te.usageCount||0,Te.maxUsage);return t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"px-2.5 py-1 bg-gray-100 text-gray-700 rounded font-mono text-sm font-medium",children:Te.code})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("p",{className:"font-medium text-gray-900 truncate max-w-[200px]",children:Te.title})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"w-32",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[t.jsxs("span",{className:"text-gray-600",children:[Te.usageCount||0," / ",Te.maxUsage]}),t.jsxs("span",{className:"text-gray-400",children:[at,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:t.jsx("div",{className:`h-1.5 rounded-full ${_D(at)}`,style:{width:`${at}%`}})})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Te.isActive?Dg.active:Dg.disabled}`,children:Te.isActive?"Active":"Disabled"})}),t.jsx("td",{className:"px-6 py-4",children:Te.events&&Te.events.length>0?t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Xt,{className:"h-4 w-4 text-gray-400"}),t.jsxs("span",{className:"text-sm text-gray-600",children:[Te.events.length," event",Te.events.length!==1?"s":""]})]}):t.jsx("span",{className:"text-sm text-gray-400",children:"All events"})}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:PD(Te.createdAt)}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx("button",{onClick:()=>Ve(Te),disabled:G,className:`p-2 rounded-lg transition-colors ${Te.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:Te.isActive?"Disable voucher":"Enable voucher",children:Te.isActive?t.jsx(Rl,{className:"h-5 w-5"}):t.jsx(Ki,{className:"h-5 w-5"})}),t.jsx("button",{onClick:()=>oe(Te),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details",children:t.jsx(Or,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>ve(Te),disabled:H,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit voucher",children:t.jsx(Es,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ce(Te),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:t.jsx(ir,{className:"h-4 w-4"})})]})})]},Te._id)})})]})}),r.totalPages>0&&t.jsx(vr,{currentPage:r.currentPage,totalPages:r.totalPages,totalItems:r.totalCount,itemsPerPage:r.limit,onPageChange:A,itemLabel:"vouchers"})]}),t.jsx("div",{className:"md:hidden space-y-4",children:n&&e.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading vouchers..."})]}):e.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(on,{className:"h-12 w-12 text-gray-300 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No vouchers found"}),t.jsx("button",{onClick:ae,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first voucher"})]}):t.jsxs(t.Fragment,{children:[e.map(Te=>{const at=kD(Te.usageCount||0,Te.maxUsage);return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 rounded font-mono text-sm font-medium",children:Te.code}),t.jsx("p",{className:"font-medium text-gray-900 mt-2 truncate",children:Te.title}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:PD(Te.createdAt)})]}),t.jsx("span",{className:`shrink-0 px-2.5 py-1 rounded-full text-xs font-medium ${Te.isActive?Dg.active:Dg.disabled}`,children:Te.isActive?"Active":"Disabled"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[t.jsxs("span",{className:"text-gray-600",children:[Te.usageCount||0," / ",Te.maxUsage," claimed"]}),t.jsxs("span",{className:"text-gray-400",children:[at,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full ${_D(at)}`,style:{width:`${at}%`}})})]}),Te.events&&Te.events.length>0&&t.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[t.jsx(Xt,{className:"h-4 w-4 text-gray-400"}),t.jsxs("span",{children:[Te.events.length," event",Te.events.length!==1?"s":""]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[t.jsx("button",{onClick:()=>Ve(Te),disabled:G,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Te.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Te.isActive?t.jsxs(t.Fragment,{children:[t.jsx(Rl,{className:"h-4 w-4"}),"On"]}):t.jsxs(t.Fragment,{children:[t.jsx(Ki,{className:"h-4 w-4"}),"Off"]})}),t.jsxs("button",{onClick:()=>oe(Te),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:[t.jsx(Or,{className:"h-4 w-4"}),"Details"]}),t.jsx("button",{onClick:()=>ve(Te),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:t.jsx(Es,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ce(Te),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:t.jsx(ir,{className:"h-4 w-4"})})]})]},Te._id)}),r.totalPages>0&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsx(vr,{currentPage:r.currentPage,totalPages:r.totalPages,totalItems:r.totalCount,itemsPerPage:r.limit,onPageChange:A,itemLabel:"vouchers"})})]})}),t.jsx(Che,{isOpen:D,onClose:fe,onSubmit:se,isLoading:G,serverError:ce,voucherToEdit:V}),t.jsx(The,{isOpen:L,onClose:he,voucher:B,isLoading:H}),t.jsx(xs,{isOpen:$,onClose:Ke,onConfirm:xe,title:"Delete Voucher",message:`Are you sure you want to delete the voucher "${B?.code}"? This action can be undone by restoring from deleted vouchers.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:G})]})}const fa={BASE:"/web/sessions",GET_BY_ID:e=>`/web/sessions/${e}`,UPDATE:e=>`/web/sessions/${e}`,DELETE:e=>`/web/sessions/${e}`,TOGGLE_LIVE:e=>`/web/sessions/${e}/toggle-live`,DELETED:"/web/sessions/deleted",RESTORE:e=>`/web/sessions/${e}/restore`,PERMANENT_DELETE:e=>`/web/sessions/${e}/permanent`,BOOKINGS:"/web/sessions/bookings",UPDATE_BOOKING:e=>`/web/sessions/bookings/${e}`},_o={create:async e=>{console.log("[SessionService] Creating session:",e.title);const r=await Se(je.post(fa.BASE,e));return r.success?console.log("[SessionService] Session created successfully:",r.data.session?._id):console.error("[SessionService] Failed to create session:",r.message),r},getAll:async(e={})=>{const r=new URLSearchParams;e.page&&r.append("page",e.page),e.limit&&r.append("limit",e.limit),e.sortBy&&r.append("sortBy",e.sortBy),e.sortOrder&&r.append("sortOrder",e.sortOrder),e.isLive!==void 0&&e.isLive!==""&&r.append("isLive",e.isLive),e.sessionType&&r.append("sessionType",e.sessionType),e.search&&r.append("search",e.search);const s=r.toString(),n=s?`${fa.BASE}?${s}`:fa.BASE;console.log("[SessionService] Fetching sessions with params:",e);const a=await Se(je.get(n));return a.success?console.log("[SessionService] Fetched sessions:",a.data.sessions?.length):console.error("[SessionService] Failed to fetch sessions:",a.message),a},getById:async e=>{console.log("[SessionService] Fetching session by ID:",e);const r=await Se(je.get(fa.GET_BY_ID(e)));return r.success?console.log("[SessionService] Fetched session:",r.data.session?._id):console.error("[SessionService] Failed to fetch session:",r.message),r},update:async(e,r)=>{console.log("[SessionService] Updating session:",e);const s=await Se(je.put(fa.UPDATE(e),r));return s.success?console.log("[SessionService] Session updated successfully"):console.error("[SessionService] Failed to update session:",s.message),s},toggleLive:async e=>{console.log("[SessionService] Toggling session live status:",e);const r=await Se(je.patch(fa.TOGGLE_LIVE(e)));return r.success?console.log("[SessionService] Session live status toggled successfully"):console.error("[SessionService] Failed to toggle session live status:",r.message),r},delete:async e=>{console.log("[SessionService] Deleting session:",e);const r=await Se(je.delete(fa.DELETE(e)));return r.success?console.log("[SessionService] Session deleted successfully"):console.error("[SessionService] Failed to delete session:",r.message),r},getDeleted:async()=>{console.log("[SessionService] Fetching deleted sessions");const e=await Se(je.get(fa.DELETED));return e.success?console.log("[SessionService] Fetched deleted sessions:",e.data.sessions?.length):console.error("[SessionService] Failed to fetch deleted sessions:",e.message),e},restore:async e=>{console.log("[SessionService] Restoring session:",e);const r=await Se(je.post(fa.RESTORE(e)));return r.success?console.log("[SessionService] Session restored successfully"):console.error("[SessionService] Failed to restore session:",r.message),r},permanentDelete:async e=>{console.log("[SessionService] Permanently deleting session:",e);const r=await Se(je.delete(fa.PERMANENT_DELETE(e)));return r.success?console.log("[SessionService] Session permanently deleted"):console.error("[SessionService] Failed to permanently delete session:",r.message),r},getBookings:async(e={})=>{const r=new URLSearchParams;e.page&&r.append("page",e.page),e.limit&&r.append("limit",e.limit),e.status&&r.append("status",e.status),e.sessionId&&r.append("sessionId",e.sessionId);const s=r.toString(),n=s?`${fa.BOOKINGS}?${s}`:fa.BOOKINGS;console.log("[SessionService] Fetching bookings with params:",e);const a=await Se(je.get(n));return a.success?console.log("[SessionService] Fetched bookings:",a.data.bookings?.length):console.error("[SessionService] Failed to fetch bookings:",a.message),a},updateBooking:async(e,r)=>{console.log("[SessionService] Updating booking:",e,"with status:",r.status);const s=await Se(je.put(fa.UPDATE_BOOKING(e),r));return s.success?console.log("[SessionService] Booking updated successfully"):console.error("[SessionService] Failed to update booking:",s.message),s}};function Ohe(e={}){const[r,s]=v.useState([]),[n,a]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[l,d]=v.useState({search:"",isLive:"",sessionType:"",category:"",sortBy:"createdAt",sortOrder:"desc",...e}),[h,f]=v.useState(!1),[x,p]=v.useState(null),[b,S]=v.useState([]),[T,A]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[P,D]=v.useState({status:"",sessionId:""}),[I,L]=v.useState(!1),[_,$]=v.useState(null),F=v.useRef(null),B=v.useCallback(async(fe=n.currentPage)=>{f(!0),p(null);try{const se={page:fe,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.isLive!==""&&{isLive:l.isLive},...l.sessionType&&{sessionType:l.sessionType},...l.category&&{category:l.category}};console.log("[useSessions] Fetching sessions with params:",se);const oe=await _o.getAll(se);oe.success?(s(oe.data.sessions||[]),a({currentPage:oe.data.pagination?.currentPage||1,totalPages:oe.data.pagination?.totalPages||0,totalCount:oe.data.pagination?.totalCount||0,limit:oe.data.pagination?.limit||10})):(p(oe.message),s([]))}catch{p("Failed to fetch sessions"),s([])}finally{f(!1)}},[l,n.limit]),M=v.useCallback(async fe=>{try{const se=await _o.create(fe);return se.success?(await B(1),{success:!0,data:se.data}):{success:!1,error:se.message,validationErrors:se.error}}catch{return{success:!1,error:"Failed to create session"}}},[B]),V=v.useCallback(async fe=>{try{const se=await _o.getById(fe);return se.success?{success:!0,data:se.data.session}:{success:!1,error:se.message}}catch{return{success:!1,error:"Failed to fetch session details"}}},[]),z=v.useCallback(async(fe,se)=>{try{const oe=await _o.update(fe,se);return oe.success?(s(he=>he.map(Ve=>Ve._id===fe?{...Ve,...oe.data.session}:Ve)),{success:!0,data:oe.data}):{success:!1,error:oe.message,validationErrors:oe.error}}catch{return{success:!1,error:"Failed to update session"}}},[]),H=v.useCallback(async(fe,se)=>{try{const oe=await _o.toggleLive(fe);return oe.success?(s(he=>he.map(Ve=>Ve._id===fe?{...Ve,isLive:!se}:Ve)),{success:!0}):{success:!1,error:oe.message}}catch{return{success:!1,error:"Failed to update session status"}}},[]),U=v.useCallback(async fe=>{try{const se=await _o.delete(fe);return se.success?(s(oe=>oe.filter(he=>he._id!==fe)),a(oe=>({...oe,totalCount:oe.totalCount-1,totalPages:Math.ceil((oe.totalCount-1)/oe.limit)})),{success:!0}):{success:!1,error:se.message}}catch{return{success:!1,error:"Failed to delete session"}}},[]),G=v.useCallback(fe=>{F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{d(se=>({...se,search:fe}))},300)},[]),Q=v.useCallback(fe=>{d(se=>({...se,...fe}))},[]),ce=v.useCallback(()=>{d({search:"",isLive:"",sessionType:"",category:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),ne=v.useCallback(fe=>{B(fe)},[B]),J=v.useCallback(fe=>{a(se=>({...se,limit:fe}))},[]),W=v.useCallback(()=>{p(null)},[]),le=v.useCallback(async(fe=T.currentPage)=>{L(!0),$(null);try{const se={page:fe,limit:T.limit,...P.status&&{status:P.status},...P.sessionId&&{sessionId:P.sessionId}};console.log("[useSessions] Fetching bookings with params:",se);const oe=await _o.getBookings(se);oe.success?(S(oe.data.bookings||[]),A({currentPage:oe.data.pagination?.currentPage||1,totalPages:oe.data.pagination?.totalPages||0,totalCount:oe.data.pagination?.totalCount||0,limit:oe.data.pagination?.limit||10}),console.log("[useSessions] Fetched bookings:",oe.data.bookings?.length)):(console.error("[useSessions] Failed to fetch bookings:",oe.message),$(oe.message||"Failed to fetch bookings"),S([]))}catch(se){console.error("[useSessions] Error fetching bookings:",se),$("Failed to fetch bookings"),S([])}finally{L(!1)}},[P,T.limit]),ge=v.useCallback(async(fe,se)=>{try{console.log("[useSessions] Updating booking:",fe,"with data:",se);const oe=await _o.updateBooking(fe,se);return oe.success?(console.log("[useSessions] Booking updated successfully"),S(he=>he.map(Ve=>Ve._id===fe?{...Ve,...oe.data.booking}:Ve)),{success:!0,data:oe.data}):(console.error("[useSessions] Failed to update booking:",oe.message),{success:!1,error:oe.message})}catch(oe){return console.error("[useSessions] Error updating booking:",oe),{success:!1,error:"Failed to update booking"}}},[]),re=v.useCallback(fe=>{D(se=>({...se,...fe}))},[]),X=v.useCallback(()=>{D({status:"",sessionId:""})},[]),ae=v.useCallback(fe=>{le(fe)},[le]),ve=v.useCallback(()=>{$(null)},[]);return v.useEffect(()=>{B(1)},[l]),v.useEffect(()=>()=>{F.current&&clearTimeout(F.current)},[]),{sessions:r,pagination:n,filters:l,isLoading:h,error:x,fetchSessions:B,createSession:M,getSessionById:V,updateSession:z,toggleSessionLive:H,deleteSession:U,searchSessions:G,updateFilters:Q,resetFilters:ce,changePage:ne,changeLimit:J,clearError:W,bookings:b,bookingPagination:T,bookingFilters:P,isLoadingBookings:I,bookingError:_,fetchBookings:le,updateBooking:ge,updateBookingFilters:re,resetBookingFilters:X,changeBookingPage:ae,clearBookingError:ve}}const Phe=[{value:"therapeutic",label:"Therapeutic"},{value:"mental_wellness",label:"Mental Wellness"},{value:"career",label:"Career"},{value:"relationships",label:"Relationships"},{value:"lifestyle",label:"Lifestyle"},{value:"other",label:"Other"}],ID=()=>({title:"",shortDescription:"",longDescription:"",price:"",compareAtPrice:"",duration:"",sessionType:"OTO",category:"mental_wellness",isLive:!1,host:"",hostEmail:"",hostPhone:"",availableSlots:"",calendlyLink:"",sessionDate:"",imageUrl:"",tags:[]});function khe({isOpen:e,onClose:r,onSubmit:s,isLoading:n=!1,serverError:a=null,sessionToEdit:l=null}){const[d,h]=v.useState(ID()),[f,x]=v.useState({}),p=!!l,[b,S]=v.useState("");v.useEffect(()=>{e&&(h(l?{title:l.title||"",shortDescription:l.shortDescription||"",longDescription:l.longDescription||"",price:l.price?.toString()||"",compareAtPrice:l.compareAtPrice?.toString()||"",duration:l.duration?.toString()||"",sessionType:l.sessionType||"OTO",category:l.category||"mental_wellness",isLive:l.isLive??!1,host:l.host||"",hostEmail:l.hostEmail||"",hostPhone:l.hostPhone||"",availableSlots:l.availableSlots?.toString()||"",calendlyLink:l.calendlyLink||"",sessionDate:l.sessionDate?new Date(l.sessionDate).toISOString().slice(0,16):"",imageUrl:l.imageUrl||"",tags:l.tags||[]}:ID()),x({}),S(""))},[e,l]);const T=D=>{const I={};if(D.title.trim()?D.title.length>200&&(I.title="Title must be less than 200 characters"):I.title="Title is required",D.shortDescription.trim()?D.shortDescription.length>500&&(I.shortDescription="Short description must be less than 500 characters"):I.shortDescription="Short description is required",D.longDescription.trim()?D.longDescription.length>5e3&&(I.longDescription="Long description must be less than 5000 characters"):I.longDescription="Long description is required",!D.price)I.price="Price is required";else{const L=parseFloat(D.price);(isNaN(L)||L<0)&&(I.price="Price must be a positive number")}if(D.compareAtPrice){const L=parseFloat(D.compareAtPrice),_=parseFloat(D.price);isNaN(L)||L<0?I.compareAtPrice="Compare at price must be a positive number":!isNaN(_)&&L<_&&(I.compareAtPrice="Compare at price must be greater than or equal to price")}if(!D.duration)I.duration="Duration is required";else{const L=parseInt(D.duration,10);isNaN(L)||L<1?I.duration="Duration must be at least 1 minute":L>480&&(I.duration="Duration cannot exceed 480 minutes (8 hours)")}if(D.host.trim()?D.host.length>100&&(I.host="Host name must be less than 100 characters"):I.host="Host name is required",D.hostEmail&&D.hostEmail.trim()&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D.hostEmail.trim())||(I.hostEmail="Please provide a valid email address")),D.hostPhone&&D.hostPhone.trim()&&(/^[\d\s+\-()]+$/.test(D.hostPhone.trim())?D.hostPhone.trim().length<10&&(I.hostPhone="Phone number must be at least 10 digits"):I.hostPhone="Please provide a valid phone number"),D.sessionType==="OTM"&&D.availableSlots){const L=parseInt(D.availableSlots,10);(isNaN(L)||L<1)&&(I.availableSlots="Available slots must be at least 1")}return D.calendlyLink.trim()?/^https?:\/\/.+/.test(D.calendlyLink)||(I.calendlyLink="Please provide a valid URL"):I.calendlyLink="Calendly link is required",D.imageUrl&&!/^https?:\/\/.+/.test(D.imageUrl)&&(I.imageUrl="Please provide a valid image URL"),{isValid:Object.keys(I).length===0,errors:I}},A=(D,I)=>{h(L=>({...L,[D]:I})),f[D]&&x(L=>{const _={...L};return delete _[D],_})},P=async D=>{D.preventDefault();const{isValid:I,errors:L}=T(d);if(!I){x(L);return}const _={title:d.title.trim(),shortDescription:d.shortDescription.trim(),longDescription:d.longDescription.trim(),price:parseFloat(d.price),duration:parseInt(d.duration,10),sessionType:d.sessionType,category:d.category,isLive:d.isLive,host:d.host.trim()};d.compareAtPrice&&(_.compareAtPrice=parseFloat(d.compareAtPrice)),d.availableSlots&&(_.availableSlots=parseInt(d.availableSlots,10)),_.calendlyLink=d.calendlyLink.trim(),d.sessionDate&&(_.sessionDate=new Date(d.sessionDate).toISOString()),d.imageUrl.trim()&&(_.imageUrl=d.imageUrl.trim()),d.hostEmail.trim()&&(_.hostEmail=d.hostEmail.trim()),d.hostPhone.trim()&&(_.hostPhone=d.hostPhone.trim()),d.tags.length>0&&(_.tags=d.tags),(await s(_))?.success&&r()};return t.jsx(Pt,{isOpen:e,onClose:r,title:p?"Edit Session":"Create Session",size:"xl",children:t.jsxs("form",{onSubmit:P,className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:d.title,onChange:D=>A("title",D.target.value),placeholder:"e.g., One-on-One Career Coaching",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.title&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.title})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Short Description ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:d.shortDescription,onChange:D=>A("shortDescription",D.target.value),placeholder:"Brief overview of the session...",rows:2,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${f.shortDescription?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.shortDescription&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.shortDescription})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Long Description ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:d.longDescription,onChange:D=>A("longDescription",D.target.value),placeholder:"Detailed description of what participants will learn...",rows:4,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${f.longDescription?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.longDescription&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.longDescription})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price () ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:d.price,onChange:D=>A("price",D.target.value),placeholder:"e.g., 999",min:"0",step:"0.01",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.price?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.price&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.price})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compare at Price ()"}),t.jsx("input",{type:"number",value:d.compareAtPrice,onChange:D=>A("compareAtPrice",D.target.value),placeholder:"e.g., 1499",min:"0",step:"0.01",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.compareAtPrice?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.compareAtPrice&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.compareAtPrice})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Duration (mins) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:d.duration,onChange:D=>A("duration",D.target.value),placeholder:"e.g., 60",min:"1",max:"480",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.duration?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.duration&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.duration})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Session Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:d.sessionType,onChange:D=>A("sessionType",D.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`,children:[t.jsx("option",{value:"OTO",children:"One-to-One (OTO)"}),t.jsx("option",{value:"OTM",children:"One-to-Many (OTM)"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("select",{value:d.category,onChange:D=>A("category",D.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`,children:Phe.map(D=>t.jsx("option",{value:D.value,children:D.label},D.value))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Host Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:d.host,onChange:D=>A("host",D.target.value),placeholder:"e.g., John Doe",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.host?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.host&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.host})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Host Email",t.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),t.jsx("input",{type:"email",value:d.hostEmail,onChange:D=>A("hostEmail",D.target.value),placeholder:"host@example.com",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.hostEmail?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.hostEmail&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.hostEmail})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Host Phone",t.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),t.jsx("input",{type:"tel",value:d.hostPhone,onChange:D=>A("hostPhone",D.target.value),placeholder:"+91 9876543210",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.hostPhone?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.hostPhone&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.hostPhone})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Available Slots",d.sessionType==="OTM"&&t.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(for group sessions)"})]}),t.jsx("input",{type:"number",value:d.availableSlots,onChange:D=>A("availableSlots",D.target.value),placeholder:d.sessionType==="OTO"?"1":"e.g., 50",min:"1",disabled:n||d.sessionType==="OTO",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.availableSlots?"border-red-500":"border-gray-300"} ${n||d.sessionType==="OTO"?"bg-gray-100":""}`}),f.availableSlots&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.availableSlots}),d.sessionType==="OTO"&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Fixed to 1 for one-to-one sessions"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Session Date",t.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),t.jsx("input",{type:"datetime-local",value:d.sessionDate,onChange:D=>A("sessionDate",D.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Calendly Link ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"url",value:d.calendlyLink,onChange:D=>A("calendlyLink",D.target.value),placeholder:"https://calendly.com/your-link",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.calendlyLink?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.calendlyLink&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.calendlyLink})]}),t.jsx(ba,{label:"Session Image",value:d.imageUrl,onUpload:D=>A("imageUrl",D),disabled:n,error:f.imageUrl,type:"image",folder:"sessions",placeholder:"Drop image here or click to upload"}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tags",t.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:b,onChange:D=>S(D.target.value),onKeyDown:D=>{if(D.key==="Enter"){D.preventDefault();const I=b.trim().toLowerCase();I&&!d.tags.includes(I)&&(A("tags",[...d.tags,I]),S(""))}},placeholder:"Type a tag and press Enter",disabled:n,className:`flex-1 px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`}),t.jsx("button",{type:"button",onClick:()=>{const D=b.trim().toLowerCase();D&&!d.tags.includes(D)&&(A("tags",[...d.tags,D]),S(""))},disabled:n||!b.trim(),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:t.jsx(fr,{className:"h-4 w-4"})})]}),d.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:d.tags.map((D,I)=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:[D,t.jsx("button",{type:"button",onClick:()=>{A("tags",d.tags.filter((L,_)=>_!==I))},disabled:n,className:"text-gray-500 hover:text-gray-700",children:t.jsx(ss,{className:"h-3 w-3"})})]},I))})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d.isLive,onChange:D=>A("isLive",D.target.checked),disabled:n,className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]}),t.jsx("span",{className:"text-sm text-gray-700",children:d.isLive?"Live (Available for booking)":"Not Live"})]}),a&&t.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[t.jsx(Tt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),t.jsx("p",{className:"text-sm text-red-700",children:a})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 sticky bottom-0 bg-white",children:[t.jsx("button",{type:"button",onClick:r,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:n?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),t.jsx("span",{children:p?"Updating...":"Creating..."})]}):t.jsx("span",{children:p?"Update Session":"Create Session"})})]})]})})}const b2=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",RD=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),_he=e=>{if(!e)return"-";if(e<60)return`${e} min`;const r=Math.floor(e/60),s=e%60;return s>0?`${r}h ${s}m`:`${r}h`},Ihe=(e,r)=>r?Math.min(Math.round(e/r*100),100):0,Rhe=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500";function Mhe({isOpen:e,onClose:r,session:s,isLoading:n=!1}){if(!s&&!n)return null;const a=s?.bookedSlots||0,l=s?.availableSlots,d=Ihe(a,l),h=s?.discountPercent||0;return t.jsx(Pt,{isOpen:e,onClose:r,title:"Session Details",size:"lg",children:n?t.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading session details..."})]}):s?t.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-2",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4 pb-4 border-b border-gray-200",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"flex items-center gap-2 mb-1",children:t.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${s.sessionType==="OTO"?"bg-purple-100 text-purple-700":"bg-blue-100 text-gray-900"}`,children:s.sessionType==="OTO"?"One-to-One":"One-to-Many"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.title}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.shortDescription})]}),t.jsxs("span",{className:`shrink-0 px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1.5 ${s.isLive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:[s.isLive?t.jsx(ar,{className:"h-4 w-4"}):t.jsx(Rt,{className:"h-4 w-4"}),s.isLive?"Live":"Not Live"]})]}),s.imageUrl&&t.jsx("div",{className:"rounded-lg overflow-hidden bg-gray-100",children:t.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-48 object-cover",onError:f=>{f.target.style.display="none"}})}),t.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx(rm,{className:"h-5 w-5 text-gray-800"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-800 font-medium uppercase",children:"Price"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"text-2xl font-bold text-blue-900",children:RD(s.price)}),s.compareAtPrice&&s.compareAtPrice>s.price&&t.jsx("p",{className:"text-sm text-gray-500 line-through",children:RD(s.compareAtPrice)})]})]})]}),h>0&&t.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full",children:[t.jsx(yu,{className:"h-4 w-4"}),t.jsxs("span",{className:"font-semibold",children:[h,"% OFF"]})]})]})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:s.longDescription})]}),s.sessionType==="OTM"&&l&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Booking Progress"}),t.jsxs("span",{className:"text-sm text-gray-500",children:[a," / ",l," booked"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:t.jsx("div",{className:`h-3 rounded-full transition-all ${Rhe(d)}`,style:{width:`${d}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[d,"% filled (",l-a," slots remaining)"]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(dr,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Duration"})]}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:_he(s.duration)})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(gr,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Host"})]}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.host})]}),s.sessionDate&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(Xt,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Session Date"})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:b2(s.sessionDate)})]}),l&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(tn,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:s.sessionType==="OTO"?"Slot":"Available Slots"})]}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[l-a," remaining"]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(dr,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Created"})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:b2(s.createdAt)})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(dr,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Last Updated"})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:b2(s.updatedAt)})]})]}),s.calendlyLink&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(sm,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Booking Link"})]}),t.jsx("a",{href:s.calendlyLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-800 hover:text-black hover:underline break-all",children:s.calendlyLink})]}),s.createdBy&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(gr,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Created By"})]}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.createdBy.name||s.createdBy.email}),s.createdBy.email&&s.createdBy.name&&t.jsx("p",{className:"text-xs text-gray-500",children:s.createdBy.email})]}),t.jsx("div",{className:"pt-4 border-t border-gray-200 sticky bottom-0 bg-white",children:t.jsx("button",{onClick:r,className:"w-full px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Close"})})]}):t.jsx("div",{className:"py-12 text-center text-gray-500",children:t.jsx("p",{children:"No session data available"})})})}const r0=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),MD=e=>{if(!e)return"-";if(e<60)return`${e}m`;const r=Math.floor(e/60),s=e%60;return s>0?`${r}h ${s}m`:`${r}h`},Lhe=(e,r)=>r?Math.min(Math.round(e/r*100),100):0,Fhe=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500",Og={live:"bg-green-100 text-green-700",notLive:"bg-gray-100 text-gray-600"},LD={OTO:"bg-purple-100 text-purple-700",OTM:"bg-gray-100 text-gray-700"},FD=[{value:"therapeutic",label:"Therapeutic"},{value:"mental_wellness",label:"Mental Wellness"},{value:"career",label:"Career"},{value:"relationships",label:"Relationships"},{value:"lifestyle",label:"Lifestyle"},{value:"other",label:"Other"}],BD={therapeutic:"bg-blue-100 text-blue-700",mental_wellness:"bg-green-100 text-green-700",career:"bg-amber-100 text-amber-700",relationships:"bg-pink-100 text-pink-700",lifestyle:"bg-indigo-100 text-indigo-700",other:"bg-gray-100 text-gray-700"},Pg={pending:{color:"bg-amber-100 text-amber-700",label:"Pending"},confirmed:{color:"bg-blue-100 text-blue-700",label:"Confirmed"},completed:{color:"bg-green-100 text-green-700",label:"Completed"},cancelled:{color:"bg-red-100 text-red-700",label:"Cancelled"},no_show:{color:"bg-gray-100 text-gray-700",label:"No Show"}},UD=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",Bhe=e=>e?new Date(e).toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";function Uhe(){const{sessions:e,pagination:r,filters:s,isLoading:n,error:a,fetchSessions:l,createSession:d,getSessionById:h,updateSession:f,toggleSessionLive:x,deleteSession:p,searchSessions:b,updateFilters:S,resetFilters:T,changePage:A,clearError:P,bookings:D,bookingPagination:I,bookingFilters:L,isLoadingBookings:_,bookingError:$,fetchBookings:F,updateBooking:B,updateBookingFilters:M,resetBookingFilters:V,changeBookingPage:z,clearBookingError:H}=Ohe(),[U,G]=v.useState(!1),[Q,ce]=v.useState(!1),[ne,J]=v.useState(!1),[W,le]=v.useState(null),[ge,re]=v.useState(null),[X,ae]=v.useState(!1),[ve,fe]=v.useState(!1),[se,oe]=v.useState(null),[he,Ve]=v.useState("sessions"),[Ce,Ke]=v.useState(!1),[xe,Ee]=v.useState(s.search||""),[pe,Fe]=v.useState(s.isLive||""),[me,Ge]=v.useState(s.sessionType||""),[Te,at]=v.useState(s.category||""),[dt,Nt]=v.useState(L.status||""),[Qe,ct]=v.useState(L.sessionId||""),[ze,ft]=v.useState(null),[Kt,lr]=v.useState(!1),ys=v.useCallback(()=>{oe(null),re(null),G(!0)},[]),Ye=v.useCallback(async $e=>{oe(null),ae(!0);try{const At=await h($e._id);At.success?(re(At.data),G(!0)):alert(At.error||"Failed to load session details")}catch{alert("An unexpected error occurred")}finally{ae(!1)}},[h]),xt=v.useCallback(()=>{G(!1),oe(null),re(null)},[]),Ur=v.useCallback(async $e=>{fe(!0),oe(null);try{let At;return ge?At=await f(ge._id,$e):At=await d($e),At.success?At:(oe(At.error||"Failed to save session"),{success:!1})}catch{return oe("An unexpected error occurred"),{success:!1}}finally{fe(!1)}},[d,f,ge]),Ir=v.useCallback(async $e=>{le($e),ce(!0),ae(!0);try{const At=await h($e._id);At.success&&le(At.data)}catch(At){console.error("[Sessions] Failed to fetch details:",At)}finally{ae(!1)}},[h]),Cr=v.useCallback(()=>{ce(!1),le(null)},[]),_t=v.useCallback(async $e=>{fe(!0);try{const At=await x($e._id,$e.isLive);At.success||alert(At.error||"Failed to update session status")}catch{alert("An unexpected error occurred")}finally{fe(!1)}},[x]),Ae=v.useCallback($e=>{le($e),J(!0)},[]),tt=v.useCallback(()=>{J(!1),le(null)},[]),lt=v.useCallback(async()=>{if(W){fe(!0);try{const $e=await p(W._id);$e.success?tt():alert($e.error||"Failed to delete session")}catch{alert("An unexpected error occurred")}finally{fe(!1)}}},[W,p,tt]),Ct=v.useCallback($e=>{const At=$e.target.value;Ee(At),b(At)},[b]),jr=v.useCallback(()=>{S({search:xe,isLive:pe,sessionType:me,category:Te}),Ke(!1)},[xe,pe,me,Te,S]),bs=v.useCallback(()=>{Ee(""),Fe(""),Ge(""),at(""),T(),Ke(!1)},[T]),Ar=v.useCallback(()=>{M({status:dt,sessionId:Qe}),Ke(!1)},[dt,Qe,M]),ht=v.useCallback(()=>{Nt(""),ct(""),V(),Ke(!1)},[V]),Ze=v.useCallback(async($e,At)=>{lr(!0);try{const Ws=await B($e,{status:At});Ws.success||alert(Ws.error||"Failed to update booking status")}catch(Ws){console.error("[Sessions] Error updating booking:",Ws),alert("An unexpected error occurred")}finally{lr(!1),ft(null)}},[B]),Mt=v.useCallback(()=>{he==="sessions"?l(r.currentPage):F(I.currentPage)},[he,l,F,r.currentPage,I.currentPage]),zr=v.useMemo(()=>s.search||s.isLive!==""||s.sessionType||s.category,[s]),ns=v.useMemo(()=>L.status||L.sessionId,[L]);return v.useEffect(()=>{he==="bookings"&&F(1)},[he]),v.useEffect(()=>{he==="bookings"&&F(1)},[L]),t.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Sessions"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Create and manage coaching sessions and bookings"})]}),he==="sessions"&&t.jsxs("button",{onClick:ys,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium",children:[t.jsx(fr,{className:"h-5 w-5"}),t.jsx("span",{children:"Create Session"})]})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsxs("div",{className:"flex border-b border-gray-200",children:[t.jsxs("button",{onClick:()=>Ve("sessions"),className:`flex-1 sm:flex-none px-6 py-3 text-sm font-medium transition-colors relative ${he==="sessions"?"text-gray-900":"text-gray-500 hover:text-gray-700"}`,children:[t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(qi,{className:"h-4 w-4"}),t.jsx("span",{children:"Sessions"}),t.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 rounded-full",children:r.totalCount})]}),he==="sessions"&&t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-800"})]}),t.jsxs("button",{onClick:()=>Ve("bookings"),className:`flex-1 sm:flex-none px-6 py-3 text-sm font-medium transition-colors relative ${he==="bookings"?"text-gray-900":"text-gray-500 hover:text-gray-700"}`,children:[t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(xz,{className:"h-4 w-4"}),t.jsx("span",{children:"Bookings"}),t.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 rounded-full",children:I.totalCount})]}),he==="bookings"&&t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-800"})]})]})}),(a||$)&&t.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[t.jsx(Tt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{className:"text-sm font-medium text-red-800",children:["Error loading ",a?"sessions":"bookings"]}),t.jsx("p",{className:"text-sm text-red-700 mt-0.5",children:a||$})]}),t.jsx("button",{onClick:a?P:H,className:"shrink-0 text-red-600 hover:text-red-800",children:""})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[he==="sessions"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:xe,onChange:Ct,placeholder:"Search sessions...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("button",{onClick:()=>Ke(!Ce),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${zr?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[t.jsx(Fn,{className:"h-4 w-4"}),t.jsx("span",{children:"Filters"}),zr&&t.jsx("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full",children:(s.search?1:0)+(s.isLive!==""?1:0)+(s.sessionType?1:0)+(s.category?1:0)}),t.jsx(Ni,{className:`h-4 w-4 transition-transform ${Ce?"rotate-180":""}`})]})]}):t.jsx(t.Fragment,{children:t.jsxs("button",{onClick:()=>Ke(!Ce),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${ns?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[t.jsx(Fn,{className:"h-4 w-4"}),t.jsx("span",{children:"Filters"}),ns&&t.jsx("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full",children:(L.status?1:0)+(L.sessionId?1:0)}),t.jsx(Ni,{className:`h-4 w-4 transition-transform ${Ce?"rotate-180":""}`})]})}),t.jsxs("button",{onClick:Mt,disabled:n||_,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[t.jsx(ms,{className:`h-4 w-4 ${n||_?"animate-spin":""}`}),t.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),t.jsx("div",{className:"ml-auto text-sm text-gray-500",children:he==="sessions"?t.jsxs(t.Fragment,{children:[r.totalCount," session",r.totalCount!==1?"s":""," total"]}):t.jsxs(t.Fragment,{children:[I.totalCount," booking",I.totalCount!==1?"s":""," total"]})})]}),Ce&&he==="sessions"&&t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsxs("select",{value:pe,onChange:$e=>Fe($e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"true",children:"Live"}),t.jsx("option",{value:"false",children:"Not Live"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Type"}),t.jsxs("select",{value:me,onChange:$e=>Ge($e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Types"}),t.jsx("option",{value:"OTO",children:"One-to-One (OTO)"}),t.jsx("option",{value:"OTM",children:"One-to-Many (OTM)"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),t.jsxs("select",{value:Te,onChange:$e=>at($e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Categories"}),FD.map($e=>t.jsx("option",{value:$e.value,children:$e.label},$e.value))]})]}),t.jsxs("div",{className:"flex items-end gap-2 sm:col-span-2",children:[t.jsx("button",{onClick:jr,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Apply"}),t.jsx("button",{onClick:bs,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]})}),Ce&&he==="bookings"&&t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Booking Status"}),t.jsxs("select",{value:dt,onChange:$e=>Nt($e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"confirmed",children:"Confirmed"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"cancelled",children:"Cancelled"}),t.jsx("option",{value:"no_show",children:"No Show"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session"}),t.jsxs("select",{value:Qe,onChange:$e=>ct($e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Sessions"}),e.map($e=>t.jsx("option",{value:$e._id,children:$e.title},$e._id))]})]}),t.jsxs("div",{className:"flex items-end gap-2 sm:col-span-2",children:[t.jsx("button",{onClick:Ar,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Apply"}),t.jsx("button",{onClick:ht,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]})})]}),he==="sessions"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Session"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Type"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Category"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Price"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Duration"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Host"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:n&&e.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:8,className:"px-6 py-12 text-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading sessions..."})]})}):e.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:8,className:"px-6 py-12 text-center",children:[t.jsx(qi,{className:"h-12 w-12 text-gray-300 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No sessions found"}),t.jsx("button",{onClick:ys,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first session"})]})}):e.map($e=>t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"max-w-[200px]",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:$e.title}),t.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:$e.shortDescription})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${LD[$e.sessionType]}`,children:$e.sessionType==="OTO"?"OTO":"OTM"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${BD[$e.category]||BD.other}`,children:FD.find(At=>At.value===$e.category)?.label||"Other"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"font-semibold text-gray-900",children:r0($e.price)}),$e.compareAtPrice&&$e.compareAtPrice>$e.price&&t.jsx("span",{className:"text-xs text-gray-400 line-through",children:r0($e.compareAtPrice)})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[t.jsx(dr,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:MD($e.duration)})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-7 h-7 bg-gray-200 rounded-full flex items-center justify-center",children:t.jsx(gr,{className:"h-4 w-4 text-gray-500"})}),t.jsx("span",{className:"text-sm text-gray-700 truncate max-w-[100px]",children:$e.host})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${$e.isLive?Og.live:Og.notLive}`,children:$e.isLive?"Live":"Not Live"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx("button",{onClick:()=>_t($e),disabled:ve,className:`p-2 rounded-lg transition-colors ${$e.isLive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:$e.isLive?"Set Not Live":"Set Live",children:$e.isLive?t.jsx(Rl,{className:"h-5 w-5"}):t.jsx(Ki,{className:"h-5 w-5"})}),t.jsx("button",{onClick:()=>Ir($e),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details",children:t.jsx(Or,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ye($e),disabled:X,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit session",children:t.jsx(Es,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ae($e),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:t.jsx(ir,{className:"h-4 w-4"})})]})})]},$e._id))})]})}),r.totalPages>0&&t.jsx(vr,{currentPage:r.currentPage,totalPages:r.totalPages,totalItems:r.totalCount,itemsPerPage:r.limit,onPageChange:A,itemLabel:"sessions"})]}),t.jsx("div",{className:"md:hidden space-y-4",children:n&&e.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading sessions..."})]}):e.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(qi,{className:"h-12 w-12 text-gray-300 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No sessions found"}),t.jsx("button",{onClick:ys,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first session"})]}):t.jsxs(t.Fragment,{children:[e.map($e=>{const At=Lhe($e.bookedSlots||0,$e.availableSlots);return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-3",children:[t.jsx("div",{className:"flex items-start justify-between gap-3",children:t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${LD[$e.sessionType]}`,children:$e.sessionType}),t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${$e.isLive?Og.live:Og.notLive}`,children:$e.isLive?"Live":"Not Live"})]}),t.jsx("p",{className:"font-medium text-gray-900 truncate",children:$e.title}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2",children:$e.shortDescription})]})}),t.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Price"}),t.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:r0($e.price)})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Duration"}),t.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:MD($e.duration)})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Host"}),t.jsx("p",{className:"font-semibold text-gray-900 text-sm truncate",children:$e.host})]})]}),$e.sessionType==="OTM"&&$e.availableSlots&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[t.jsxs("span",{className:"text-gray-600",children:[$e.bookedSlots||0," / ",$e.availableSlots," booked"]}),t.jsxs("span",{className:"text-gray-400",children:[At,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full ${Fhe(At)}`,style:{width:`${At}%`}})})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[t.jsx("button",{onClick:()=>_t($e),disabled:ve,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${$e.isLive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:$e.isLive?t.jsxs(t.Fragment,{children:[t.jsx(Rl,{className:"h-4 w-4"}),"Live"]}):t.jsxs(t.Fragment,{children:[t.jsx(Ki,{className:"h-4 w-4"}),"Off"]})}),t.jsxs("button",{onClick:()=>Ir($e),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:[t.jsx(Or,{className:"h-4 w-4"}),"Details"]}),t.jsx("button",{onClick:()=>Ye($e),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:t.jsx(Es,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ae($e),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:t.jsx(ir,{className:"h-4 w-4"})})]})]},$e._id)}),r.totalPages>0&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsx(vr,{currentPage:r.currentPage,totalPages:r.totalPages,totalItems:r.totalCount,itemsPerPage:r.limit,onPageChange:A,itemLabel:"sessions"})})]})})]}),he==="bookings"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"User"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Session"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Scheduled Date"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Amount"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Booked On"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:_&&D.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading bookings..."})]})}):D.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[t.jsx(Qf,{className:"h-12 w-12 text-gray-300 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No bookings found"})]})}):D.map($e=>t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:t.jsx(gr,{className:"h-4 w-4 text-gray-500"})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate max-w-[150px]",children:$e.userId?.name||"Unknown User"}),t.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[150px]",children:$e.userId?.email||"-"})]})]})}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate max-w-[180px]",children:$e.sessionId?.title||"Unknown Session"}),t.jsx("p",{className:"text-xs text-gray-500",children:$e.sessionId?.sessionType||"-"})]}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[t.jsx(Xt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:Bhe($e.scheduledSlot)})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"font-semibold text-gray-900",children:r0($e.amountPaid)})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Pg[$e.status]?.color||"bg-gray-100 text-gray-700"}`,children:Pg[$e.status]?.label||$e.status})}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:UD($e.createdAt)}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[$e.status==="pending"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>Ze($e._id,"confirmed"),disabled:Kt,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Confirm",children:t.jsx(Rn,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ze($e._id,"cancelled"),disabled:Kt,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Cancel",children:t.jsx(ss,{className:"h-4 w-4"})})]}),$e.status==="confirmed"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>Ze($e._id,"completed"),disabled:Kt,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Mark Completed",children:t.jsx(Rn,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ze($e._id,"no_show"),disabled:Kt,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",title:"No Show",children:t.jsx(Qf,{className:"h-4 w-4"})})]})]})})]},$e._id))})]})}),I.totalPages>0&&t.jsx(vr,{currentPage:I.currentPage,totalPages:I.totalPages,totalItems:I.totalCount,itemsPerPage:I.limit,onPageChange:z,itemLabel:"bookings"})]}),t.jsx("div",{className:"md:hidden space-y-4",children:_&&D.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading bookings..."})]}):D.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(Qf,{className:"h-12 w-12 text-gray-300 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No bookings found"})]}):t.jsxs(t.Fragment,{children:[D.map($e=>t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-3",children:[t.jsx("div",{className:"flex items-start justify-between gap-3",children:t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("div",{className:"flex items-center gap-2 mb-1",children:t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Pg[$e.status]?.color||"bg-gray-100 text-gray-700"}`,children:Pg[$e.status]?.label||$e.status})}),t.jsx("p",{className:"font-medium text-gray-900 truncate",children:$e.userId?.name||"Unknown User"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:$e.userId?.email||"-"})]})}),t.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Session"}),t.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:$e.sessionId?.title||"Unknown Session"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Scheduled"}),t.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:UD($e.scheduledSlot)})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Amount"}),t.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:r0($e.amountPaid)})]})]}),($e.status==="pending"||$e.status==="confirmed")&&t.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[$e.status==="pending"&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>Ze($e._id,"confirmed"),disabled:Kt,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors",children:[t.jsx(Rn,{className:"h-4 w-4"}),"Confirm"]}),t.jsxs("button",{onClick:()=>Ze($e._id,"cancelled"),disabled:Kt,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors",children:[t.jsx(ss,{className:"h-4 w-4"}),"Cancel"]})]}),$e.status==="confirmed"&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>Ze($e._id,"completed"),disabled:Kt,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors",children:[t.jsx(Rn,{className:"h-4 w-4"}),"Complete"]}),t.jsxs("button",{onClick:()=>Ze($e._id,"no_show"),disabled:Kt,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:[t.jsx(Qf,{className:"h-4 w-4"}),"No Show"]})]})]})]},$e._id)),I.totalPages>0&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsx(vr,{currentPage:I.currentPage,totalPages:I.totalPages,totalItems:I.totalCount,itemsPerPage:I.limit,onPageChange:z,itemLabel:"bookings"})})]})})]}),t.jsx(khe,{isOpen:U,onClose:xt,onSubmit:Ur,isLoading:ve,serverError:se,sessionToEdit:ge}),t.jsx(Mhe,{isOpen:Q,onClose:Cr,session:W,isLoading:X}),t.jsx(xs,{isOpen:ne,onClose:tt,onConfirm:lt,title:"Delete Session",message:`Are you sure you want to delete the session "${W?.title}"? This action can be undone by restoring from deleted sessions.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:ve})]})}const s0={BASE:"/web/sos/quizzes",GET_BY_ID:e=>`/web/sos/quizzes/${e}`,UPDATE:e=>`/web/sos/quizzes/${e}`,DELETE:e=>`/web/sos/quizzes/${e}`},n0={getAll:async(e={})=>{const{page:r=1,limit:s=10,sortBy:n="createdAt",sortOrder:a="desc",programId:l="",dayNumber:d="",isActive:h=""}=e,f=new URLSearchParams;f.append("page",r.toString()),f.append("limit",s.toString()),f.append("sortBy",n),f.append("sortOrder",a),l&&f.append("programId",l),d&&f.append("dayNumber",d.toString()),h!==""&&f.append("isActive",h);const x=`${s0.BASE}?${f.toString()}`;return console.log("[SOSQuizService] Fetching quizzes:",x),Se(je.get(x))},getById:async e=>e?(console.log("[SOSQuizService] Fetching quiz:",e),Se(je.get(s0.GET_BY_ID(e)))):(console.error("[SOSQuizService] getById: No ID provided"),{success:!1,error:"Quiz ID is required"}),create:async e=>(console.log("[SOSQuizService] Creating quiz:",e.title,"for program:",e.programId,"day:",e.dayNumber),e.programId?e.dayNumber?Se(je.post(s0.BASE,e)):(console.error("[SOSQuizService] create: No dayNumber provided"),{success:!1,error:"Day number is required"}):(console.error("[SOSQuizService] create: No programId provided"),{success:!1,error:"Program ID is required"})),update:async(e,r)=>{if(!e)return console.error("[SOSQuizService] update: No ID provided"),{success:!1,error:"Quiz ID is required"};console.log("[SOSQuizService] Updating quiz:",e);const{programId:s,dayNumber:n,...a}=r;return(s||n)&&console.warn("[SOSQuizService] Ignoring programId and dayNumber in update - these cannot be changed"),Se(je.put(s0.UPDATE(e),a))},delete:async e=>e?(console.log("[SOSQuizService] Deleting quiz:",e),Se(je.delete(s0.DELETE(e)))):(console.error("[SOSQuizService] delete: No ID provided"),{success:!1,error:"Quiz ID is required"}),buildQuestion:e=>{const{questionText:r,questionType:s,options:n=[],points:a=5}=e,l={questionText:r,questionType:s,points:a};return(s==="scale"||s==="single-choice"||s==="multiple-choice")&&(l.options=n.map((d,h)=>({text:d.text,value:d.value??h+1}))),l}};function zhe(e={}){const[r,s]=v.useState([]),[n,a]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[l,d]=v.useState({programId:"",dayNumber:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e}),[h,f]=v.useState(!1),[x,p]=v.useState(null),b=v.useRef(null),S=v.useCallback(async(M=n.currentPage)=>{f(!0),p(null);try{const V={page:M,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.programId&&{programId:l.programId},...l.dayNumber&&{dayNumber:l.dayNumber},...l.isActive!==""&&{isActive:l.isActive}};console.log("[useSOSQuizzes] Fetching quizzes with params:",V);const z=await n0.getAll(V);z.success?(s(z.data.quizzes||[]),a({currentPage:z.data.pagination?.currentPage||1,totalPages:z.data.pagination?.totalPages||0,totalCount:z.data.pagination?.totalCount||0,limit:z.data.pagination?.limit||10}),console.log("[useSOSQuizzes] Fetched quizzes:",z.data.quizzes?.length)):(console.error("[useSOSQuizzes] Failed to fetch quizzes:",z.message),p(z.message||"Failed to fetch quizzes"),s([]))}catch(V){console.error("[useSOSQuizzes] Error fetching quizzes:",V),p("Failed to fetch quizzes"),s([])}finally{f(!1)}},[l,n.limit]),T=v.useCallback(async M=>{try{console.log("[useSOSQuizzes] Creating quiz:",M.title,"for program:",M.programId);const V=await n0.create(M);return V.success?(console.log("[useSOSQuizzes] Quiz created successfully"),await S(1),{success:!0,data:V.data}):(console.error("[useSOSQuizzes] Failed to create quiz:",V.message),{success:!1,error:V.message,validationErrors:V.error})}catch(V){return console.error("[useSOSQuizzes] Error creating quiz:",V),{success:!1,error:"Failed to create quiz"}}},[S]),A=v.useCallback(async M=>{try{console.log("[useSOSQuizzes] Fetching quiz by ID:",M);const V=await n0.getById(M);return V.success?{success:!0,data:V.data.quiz}:(console.error("[useSOSQuizzes] Failed to fetch quiz:",V.message),{success:!1,error:V.message})}catch(V){return console.error("[useSOSQuizzes] Error fetching quiz:",V),{success:!1,error:"Failed to fetch quiz details"}}},[]),P=v.useCallback(async(M,V)=>{try{console.log("[useSOSQuizzes] Updating quiz:",M);const z=await n0.update(M,V);return z.success?(console.log("[useSOSQuizzes] Quiz updated successfully"),s(H=>H.map(U=>U._id===M?{...U,...z.data.quiz}:U)),{success:!0,data:z.data}):(console.error("[useSOSQuizzes] Failed to update quiz:",z.message),{success:!1,error:z.message,validationErrors:z.error})}catch(z){return console.error("[useSOSQuizzes] Error updating quiz:",z),{success:!1,error:"Failed to update quiz"}}},[]),D=v.useCallback(async M=>{try{console.log("[useSOSQuizzes] Deleting quiz:",M);const V=await n0.delete(M);return V.success?(console.log("[useSOSQuizzes] Quiz deleted successfully"),s(z=>z.filter(H=>H._id!==M)),a(z=>({...z,totalCount:z.totalCount-1,totalPages:Math.ceil((z.totalCount-1)/z.limit)})),{success:!0}):(console.error("[useSOSQuizzes] Failed to delete quiz:",V.message),{success:!1,error:V.message})}catch(V){return console.error("[useSOSQuizzes] Error deleting quiz:",V),{success:!1,error:"Failed to delete quiz"}}},[]),I=v.useCallback(M=>{b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{d(V=>({...V,programId:M}))},300)},[]),L=v.useCallback(M=>{d(V=>({...V,...M}))},[]),_=v.useCallback(()=>{d({programId:"",dayNumber:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),$=v.useCallback(M=>{S(M)},[S]),F=v.useCallback(M=>{a(V=>({...V,limit:M}))},[]),B=v.useCallback(()=>{p(null)},[]);return v.useEffect(()=>{S(1)},[l]),v.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),{quizzes:r,pagination:n,filters:l,isLoading:h,error:x,fetchQuizzes:S,createQuiz:T,getQuizById:A,updateQuiz:P,deleteQuiz:D,filterByProgram:I,updateFilters:L,resetFilters:_,changePage:$,changeLimit:F,clearError:B}}const Io={BASE:"/web/sos/programs",GET_BY_ID:e=>`/web/sos/programs/${e}`,UPDATE:e=>`/web/sos/programs/${e}`,DELETE:e=>`/web/sos/programs/${e}`,TOGGLE_STATUS:e=>`/web/sos/programs/${e}/toggle-status`,STATS:e=>`/web/sos/programs/${e}/stats`,QUIZZES:e=>`/web/sos/programs/${e}/quizzes`},Ro={getAll:async(e={})=>{const{page:r=1,limit:s=10,sortBy:n="createdAt",sortOrder:a="desc",type:l="",isActive:d="",search:h=""}=e,f=new URLSearchParams;f.append("page",r.toString()),f.append("limit",s.toString()),f.append("sortBy",n),f.append("sortOrder",a),l&&f.append("type",l),d!==""&&f.append("isActive",d),h&&f.append("search",h);const x=`${Io.BASE}?${f.toString()}`;return console.log("[SOSProgramService] Fetching programs:",x),Se(je.get(x))},getById:async e=>e?(console.log("[SOSProgramService] Fetching program:",e),Se(je.get(Io.GET_BY_ID(e)))):(console.error("[SOSProgramService] getById: No ID provided"),{success:!1,error:"Program ID is required"}),create:async e=>(console.log("[SOSProgramService] Creating program:",e.title),Se(je.post(Io.BASE,e))),update:async(e,r)=>e?(console.log("[SOSProgramService] Updating program:",e),Se(je.put(Io.UPDATE(e),r))):(console.error("[SOSProgramService] update: No ID provided"),{success:!1,error:"Program ID is required"}),delete:async e=>e?(console.log("[SOSProgramService] Deleting program:",e),Se(je.delete(Io.DELETE(e)))):(console.error("[SOSProgramService] delete: No ID provided"),{success:!1,error:"Program ID is required"}),toggleStatus:async e=>e?(console.log("[SOSProgramService] Toggling status for program:",e),Se(je.patch(Io.TOGGLE_STATUS(e)))):(console.error("[SOSProgramService] toggleStatus: No ID provided"),{success:!1,error:"Program ID is required"}),getStats:async e=>e?(console.log("[SOSProgramService] Fetching stats for program:",e),Se(je.get(Io.STATS(e)))):(console.error("[SOSProgramService] getStats: No ID provided"),{success:!1,error:"Program ID is required"}),getQuizzes:async e=>e?(console.log("[SOSProgramService] Fetching quizzes for program:",e),Se(je.get(Io.QUIZZES(e)))):(console.error("[SOSProgramService] getQuizzes: No ID provided"),{success:!1,error:"Program ID is required"})};function Vhe(e={}){const[r,s]=v.useState([]),[n,a]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[l,d]=v.useState({search:"",type:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e}),[h,f]=v.useState(!1),[x,p]=v.useState(null),b=v.useRef(null),S=v.useCallback(async(H=n.currentPage)=>{f(!0),p(null);try{const U={page:H,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.type&&{type:l.type},...l.isActive!==""&&{isActive:l.isActive}};console.log("[useSOSPrograms] Fetching programs with params:",U);const G=await Ro.getAll(U);G.success?(s(G.data.programs||[]),a({currentPage:G.data.pagination?.currentPage||1,totalPages:G.data.pagination?.totalPages||0,totalCount:G.data.pagination?.totalCount||0,limit:G.data.pagination?.limit||10}),console.log("[useSOSPrograms] Fetched programs:",G.data.programs?.length)):(console.error("[useSOSPrograms] Failed to fetch programs:",G.message),p(G.message||"Failed to fetch programs"),s([]))}catch(U){console.error("[useSOSPrograms] Error fetching programs:",U),p("Failed to fetch programs"),s([])}finally{f(!1)}},[l,n.limit]),T=v.useCallback(async H=>{try{console.log("[useSOSPrograms] Creating program:",H.title);const U=await Ro.create(H);return U.success?(console.log("[useSOSPrograms] Program created successfully"),await S(1),{success:!0,data:U.data}):(console.error("[useSOSPrograms] Failed to create program:",U.message),{success:!1,error:U.message,validationErrors:U.error})}catch(U){return console.error("[useSOSPrograms] Error creating program:",U),{success:!1,error:"Failed to create program"}}},[S]),A=v.useCallback(async H=>{try{console.log("[useSOSPrograms] Fetching program by ID:",H);const U=await Ro.getById(H);return U.success?{success:!0,data:U.data.program}:(console.error("[useSOSPrograms] Failed to fetch program:",U.message),{success:!1,error:U.message})}catch(U){return console.error("[useSOSPrograms] Error fetching program:",U),{success:!1,error:"Failed to fetch program details"}}},[]),P=v.useCallback(async H=>{try{console.log("[useSOSPrograms] Fetching stats for program:",H);const U=await Ro.getStats(H);return U.success?{success:!0,data:U.data}:(console.error("[useSOSPrograms] Failed to fetch program stats:",U.message),{success:!1,error:U.message})}catch(U){return console.error("[useSOSPrograms] Error fetching program stats:",U),{success:!1,error:"Failed to fetch program statistics"}}},[]),D=v.useCallback(async H=>{try{console.log("[useSOSPrograms] Fetching quizzes for program:",H);const U=await Ro.getQuizzes(H);return U.success?{success:!0,data:U.data}:(console.error("[useSOSPrograms] Failed to fetch program quizzes:",U.message),{success:!1,error:U.message})}catch(U){return console.error("[useSOSPrograms] Error fetching program quizzes:",U),{success:!1,error:"Failed to fetch program quizzes"}}},[]),I=v.useCallback(async(H,U)=>{try{console.log("[useSOSPrograms] Updating program:",H);const G=await Ro.update(H,U);return G.success?(console.log("[useSOSPrograms] Program updated successfully"),s(Q=>Q.map(ce=>ce._id===H?{...ce,...G.data.program}:ce)),{success:!0,data:G.data}):(console.error("[useSOSPrograms] Failed to update program:",G.message),{success:!1,error:G.message,validationErrors:G.error})}catch(G){return console.error("[useSOSPrograms] Error updating program:",G),{success:!1,error:"Failed to update program"}}},[]),L=v.useCallback(async(H,U)=>{try{console.log("[useSOSPrograms] Toggling status for program:",H);const G=await Ro.toggleStatus(H);return G.success?(console.log("[useSOSPrograms] Program status toggled successfully"),s(Q=>Q.map(ce=>ce._id===H?{...ce,isActive:!U}:ce)),{success:!0}):(console.error("[useSOSPrograms] Failed to toggle program status:",G.message),{success:!1,error:G.message})}catch(G){return console.error("[useSOSPrograms] Error toggling program status:",G),{success:!1,error:"Failed to update program status"}}},[]),_=v.useCallback(async H=>{try{console.log("[useSOSPrograms] Deleting program:",H);const U=await Ro.delete(H);return U.success?(console.log("[useSOSPrograms] Program deleted successfully"),s(G=>G.filter(Q=>Q._id!==H)),a(G=>({...G,totalCount:G.totalCount-1,totalPages:Math.ceil((G.totalCount-1)/G.limit)})),{success:!0}):(console.error("[useSOSPrograms] Failed to delete program:",U.message),{success:!1,error:U.message})}catch(U){return console.error("[useSOSPrograms] Error deleting program:",U),{success:!1,error:"Failed to delete program"}}},[]),$=v.useCallback(H=>{b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{d(U=>({...U,search:H}))},300)},[]),F=v.useCallback(H=>{d(U=>({...U,...H}))},[]),B=v.useCallback(()=>{d({search:"",type:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),M=v.useCallback(H=>{S(H)},[S]),V=v.useCallback(H=>{a(U=>({...U,limit:H}))},[]),z=v.useCallback(()=>{p(null)},[]);return v.useEffect(()=>{S(1)},[l]),v.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),{programs:r,pagination:n,filters:l,isLoading:h,error:x,fetchPrograms:S,createProgram:T,getProgramById:A,getProgramStats:P,getProgramQuizzes:D,updateProgram:I,toggleProgramStatus:L,deleteProgram:_,searchPrograms:$,updateFilters:F,resetFilters:B,changePage:M,changeLimit:V,clearError:z}}const zD=()=>({programId:"",dayNumber:"",title:"",description:"",questions:[],isActive:!0}),$he=()=>({questionText:"",questionType:"single-choice",options:[{text:"",value:1},{text:"",value:2}],points:5}),qhe=[{value:"scale",label:"Scale (1-5)",description:"Rating scale from 1 to 5"},{value:"single-choice",label:"Single Choice",description:"Choose one option"},{value:"multiple-choice",label:"Multiple Choice",description:"Select multiple options"},{value:"boolean",label:"Yes/No",description:"True or false question"},{value:"text",label:"Text",description:"Free text response"}];function Hhe({isOpen:e,onClose:r,onSubmit:s,isLoading:n=!1,serverError:a=null,quizToEdit:l=null,programs:d=[],selectedProgram:h=null}){const[f,x]=v.useState(zD()),[p,b]=v.useState({}),[S,T]=v.useState("basic"),A=!!l,P=d.find(z=>z._id===f.programId)||h;v.useEffect(()=>{e&&(x(l?{programId:l.programId?._id||l.programId||"",dayNumber:l.dayNumber?.toString()||"",title:l.title||"",description:l.description||"",questions:l.questions?.map(z=>({questionText:z.questionText||"",questionType:z.questionType||"single-choice",options:z.options||[{text:"",value:1},{text:"",value:2}],points:z.points||5}))||[],isActive:l.isActive??!0}:{...zD(),programId:h?._id||""}),b({}),T("basic"))},[e,l,h]);const D=z=>{const H={};if(!A&&!z.programId&&(H.programId="Please select a program"),!A)if(!z.dayNumber)H.dayNumber="Day number is required";else{const U=parseInt(z.dayNumber,10);isNaN(U)||U<1?H.dayNumber="Day number must be at least 1":P&&U>P.durationDays&&(H.dayNumber=`Day number cannot exceed program duration (${P.durationDays} days)`)}if(z.title.trim()?z.title.length>200&&(H.title="Title must be less than 200 characters"):H.title="Title is required",z.questions.length===0)H.questions="At least one question is required";else{const U=[];z.questions.forEach((G,Q)=>{const ce={};G.questionText.trim()||(ce.questionText="Question text is required"),(G.questionType==="scale"||G.questionType==="single-choice"||G.questionType==="multiple-choice")&&G.options&&(G.options.some(J=>!J.text.trim())&&(ce.options="All options must have text"),G.options.length<2&&(ce.options="At least 2 options are required")),Object.keys(ce).length>0&&(U[Q]=ce)}),(U.length>0||Object.keys(U).some(G=>U[G]))&&(H.questionErrors=U)}return{isValid:Object.keys(H).length===0,errors:H}},I=(z,H)=>{x(U=>({...U,[z]:H})),p[z]&&b(U=>{const G={...U};return delete G[z],G})},L=()=>{x(z=>({...z,questions:[...z.questions,$he()]}))},_=z=>{x(H=>({...H,questions:H.questions.filter((U,G)=>G!==z)}))},$=(z,H,U)=>{x(G=>({...G,questions:G.questions.map((Q,ce)=>{if(ce!==z)return Q;const ne={...Q,[H]:U};return H==="questionType"&&(U==="scale"?ne.options=[{text:"Very Bad",value:1},{text:"Bad",value:2},{text:"Neutral",value:3},{text:"Good",value:4},{text:"Very Good",value:5}]:U==="single-choice"||U==="multiple-choice"?ne.options=[{text:"",value:1},{text:"",value:2}]:(U==="boolean"||U==="text")&&(ne.options=[])),ne})}))},F=z=>{x(H=>({...H,questions:H.questions.map((U,G)=>G!==z?U:{...U,options:[...U.options,{text:"",value:U.options.length+1}]})}))},B=(z,H)=>{x(U=>({...U,questions:U.questions.map((G,Q)=>Q!==z?G:{...G,options:G.options.filter((ce,ne)=>ne!==H).map((ce,ne)=>({...ce,value:ne+1}))})}))},M=(z,H,U)=>{x(G=>({...G,questions:G.questions.map((Q,ce)=>ce!==z?Q:{...Q,options:Q.options.map((ne,J)=>J!==H?ne:{...ne,text:U})})}))},V=async z=>{z.preventDefault();const{isValid:H,errors:U}=D(f);if(!H){b(U),(U.questions||U.questionErrors)&&T("questions");return}const G={title:f.title.trim(),description:f.description.trim(),questions:f.questions.map(ce=>({questionText:ce.questionText.trim(),questionType:ce.questionType,points:ce.points,...ce.questionType==="scale"||ce.questionType==="single-choice"||ce.questionType==="multiple-choice"?{options:ce.options.map(ne=>({text:ne.text.trim(),value:ne.value}))}:{}})),isActive:f.isActive};A||(G.programId=f.programId,G.dayNumber=parseInt(f.dayNumber,10)),console.log("[SOSQuizForm] Submitting data:",G),(await s(G))?.success&&r()};return t.jsx(Pt,{isOpen:e,onClose:r,title:A?"Edit SOS Quiz":"Create SOS Quiz",size:"xl",children:t.jsxs("form",{onSubmit:V,className:"space-y-4",children:[t.jsxs("div",{className:"flex border-b border-gray-200",children:[t.jsx("button",{type:"button",onClick:()=>T("basic"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${S==="basic"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Basic Info"}),t.jsxs("button",{type:"button",onClick:()=>T("questions"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${S==="questions"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Questions (",f.questions.length,")"]})]}),t.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:S==="basic"?t.jsxs("div",{className:"space-y-4",children:[!A&&t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Program ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:f.programId,onChange:z=>I("programId",z.target.value),disabled:n||h,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.programId?"border-red-500":"border-gray-300"} ${n||h?"bg-gray-100":""}`,children:[t.jsx("option",{value:"",children:"Select a program"}),d.map(z=>t.jsxs("option",{value:z._id,children:[z.title," (",z.durationDays," days)"]},z._id))]}),p.programId&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:p.programId})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Day Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:f.dayNumber,onChange:z=>I("dayNumber",z.target.value),placeholder:"e.g., 1",min:"1",max:P?.durationDays||365,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.dayNumber?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),p.dayNumber&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:p.dayNumber}),P&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Program duration: ",P.durationDays," days"]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Quiz Title ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:f.title,onChange:z=>I("title",z.target.value),placeholder:"e.g., Day 1: Introduction to Mindfulness",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),p.title&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:p.title})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description",t.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),t.jsx("textarea",{value:f.description,onChange:z=>I("description",z.target.value),placeholder:"Brief description of this day's activities...",rows:3,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:f.isActive,onChange:z=>I("isActive",z.target.checked),disabled:n,className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]}),t.jsx("span",{className:"text-sm text-gray-700",children:f.isActive?"Active":"Inactive"})]})]}):t.jsxs("div",{className:"space-y-4",children:[p.questions&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-700",children:p.questions})}),f.questions.length===0?t.jsxs("div",{className:"p-8 text-center border-2 border-dashed border-gray-200 rounded-lg",children:[t.jsx("p",{className:"text-gray-500 mb-3",children:"No questions added yet"}),t.jsxs("button",{type:"button",onClick:L,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:[t.jsx(fr,{className:"h-4 w-4"}),"Add Question"]})]}):t.jsxs(t.Fragment,{children:[f.questions.map((z,H)=>t.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Np,{className:"h-4 w-4 text-gray-400"}),t.jsxs("span",{className:"font-medium text-gray-700",children:["Question ",H+1]})]}),t.jsx("button",{type:"button",onClick:()=>_(H),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:t.jsx(ir,{className:"h-4 w-4"})})]}),t.jsxs("div",{children:[t.jsx("input",{type:"text",value:z.questionText,onChange:U=>$(H,"questionText",U.target.value),placeholder:"Enter your question...",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.questionErrors?.[H]?.questionText?"border-red-500":"border-gray-300"}`}),p.questionErrors?.[H]?.questionText&&t.jsx("p",{className:"text-red-600 text-xs mt-1",children:p.questionErrors[H].questionText})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),t.jsx("select",{value:z.questionType,onChange:U=>$(H,"questionType",U.target.value),disabled:n,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:qhe.map(U=>t.jsx("option",{value:U.value,children:U.label},U.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Points"}),t.jsx("input",{type:"number",value:z.points,onChange:U=>$(H,"points",parseInt(U.target.value)||0),min:"0",max:"100",disabled:n,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]})]}),(z.questionType==="scale"||z.questionType==="single-choice"||z.questionType==="multiple-choice")&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Options"}),z.options.map((U,G)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-xs text-gray-400 w-6",children:[G+1,"."]}),t.jsx("input",{type:"text",value:U.text,onChange:Q=>M(H,G,Q.target.value),placeholder:`Option ${G+1}`,disabled:n||z.questionType==="scale",className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),(z.questionType==="single-choice"||z.questionType==="multiple-choice")&&z.options.length>2&&t.jsx("button",{type:"button",onClick:()=>B(H,G),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:t.jsx(ir,{className:"h-3 w-3"})})]},G)),(z.questionType==="single-choice"||z.questionType==="multiple-choice")&&t.jsxs("button",{type:"button",onClick:()=>F(H),className:"text-xs text-gray-600 hover:text-gray-800 flex items-center gap-1",children:[t.jsx(fr,{className:"h-3 w-3"}),"Add Option"]}),p.questionErrors?.[H]?.options&&t.jsx("p",{className:"text-red-600 text-xs",children:p.questionErrors[H].options})]})]},H)),t.jsxs("button",{type:"button",onClick:L,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",children:[t.jsx(fr,{className:"h-4 w-4"}),"Add Question"]})]})]})}),a&&t.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[t.jsx(Tt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),t.jsx("p",{className:"text-sm text-red-700",children:a})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:r,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:n?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),t.jsx("span",{children:A?"Updating...":"Creating..."})]}):t.jsx("span",{children:A?"Update Quiz":"Create Quiz"})})]})]})})}const VD=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",Ghe={scale:"Scale (1-5)","single-choice":"Single Choice","multiple-choice":"Multiple Choice",boolean:"Yes/No",text:"Text Response"},Yhe={scale:bu,"single-choice":Cj,"multiple-choice":ZV,boolean:Ki,text:s$};function Whe({isOpen:e,onClose:r,quiz:s,isLoading:n=!1}){if(!e)return null;const a=s?.questions?.reduce((l,d)=>l+(d.points||0),0)||0;return t.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:r}),t.jsx("div",{className:"relative min-h-full flex items-center justify-center p-4",children:t.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Quiz Details"}),t.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(ss,{className:"h-5 w-5"})})]}),t.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:n?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading quiz details..."})]}):s?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${s.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:s.isActive?"Active":"Inactive"}),s.dayNumber&&t.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:["Day ",s.dayNumber]})]}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:s.title})]}),s.programId&&t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Program"}),t.jsx("p",{className:"font-medium text-gray-900",children:s.programId.title||s.programId})]}),s.description&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:s.description})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[t.jsx(Hg,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),t.jsx("p",{className:"text-2xl font-bold text-blue-700",children:s.questions?.length||s.questionCount||0}),t.jsx("p",{className:"text-xs text-blue-600",children:"Questions"})]}),t.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 text-center",children:[t.jsx(bu,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),t.jsx("p",{className:"text-2xl font-bold text-amber-700",children:a}),t.jsx("p",{className:"text-xs text-amber-600",children:"Total Points"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[t.jsx(Xt,{className:"h-5 w-5 text-gray-500 mx-auto mb-1"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["Day ",s.dayNumber||"-"]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Program Day"})]})]}),s.questions&&s.questions.length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[t.jsx(Hg,{className:"h-4 w-4"}),"Questions"]}),t.jsx("div",{className:"space-y-3",children:s.questions.map((l,d)=>{const h=Yhe[l.questionType]||Hg;return t.jsx("div",{className:"p-3 border border-gray-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-xs font-medium text-gray-600",children:d+1}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-gray-900 font-medium",children:l.questionText}),t.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(h,{className:"h-3 w-3"}),Ghe[l.questionType]||l.questionType]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(bu,{className:"h-3 w-3"}),l.points," pts"]})]}),l.options&&l.options.length>0&&t.jsx("div",{className:"mt-2 space-y-1",children:l.options.map((f,x)=>t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.jsx("span",{className:`w-4 h-4 border border-gray-300 flex-shrink-0 ${l.questionType==="multiple-choice"?"rounded":"rounded-full"}`}),t.jsxs("span",{children:[f.text,l.questionType==="scale"&&t.jsxs("span",{className:"text-gray-400 ml-1",children:["(",f.value,")"]})]})]},x))}),l.questionType==="boolean"&&t.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(ar,{className:"h-4 w-4 text-green-500"}),"Yes"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Rt,{className:"h-4 w-4 text-red-500"}),"No"]})]}),l.questionType==="text"&&t.jsx("div",{className:"mt-2 text-sm text-gray-500 italic",children:"Free text response"})]})]})},d)})})]}),t.jsx("div",{className:"pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[t.jsxs("span",{children:["Created: ",VD(s.createdAt)]}),s.updatedAt&&s.updatedAt!==s.createdAt&&t.jsxs("span",{children:["Updated: ",VD(s.updatedAt)]})]})})]}):t.jsx("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:t.jsx("p",{children:"No quiz data available"})})}),t.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:t.jsx("button",{onClick:r,className:"w-full px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium",children:"Close"})})]})})]})}const $D=()=>({title:"",description:"",type:"ISOS",durationDays:"",imageUrl:"",isActive:!1}),qD=[{value:"GSOS",label:"General SOS (GSOS)",description:"Single day quick programs"},{value:"ISOS",label:"Intensive SOS (ISOS)",description:"Multi-day structured programs (7D, 15D, 30D)"}];function Xhe({isOpen:e,onClose:r,onSubmit:s,isLoading:n=!1,serverError:a=null,programToEdit:l=null}){const[d,h]=v.useState($D()),[f,x]=v.useState({}),p=!!l;v.useEffect(()=>{e&&(h(l?{title:l.title||"",description:l.description||"",type:l.type||"ISOS",durationDays:l.durationDays?.toString()||"",imageUrl:l.imageUrl||"",isActive:l.isActive??!1}:$D()),x({}))},[e,l]);const b=A=>{const P={};if(A.title.trim()?A.title.length>200&&(P.title="Title must be less than 200 characters"):P.title="Title is required",A.description.trim()?A.description.length>2e3&&(P.description="Description must be less than 2000 characters"):P.description="Description is required",!A.durationDays)P.durationDays="Duration is required";else{const D=parseInt(A.durationDays,10);isNaN(D)||D<1?P.durationDays="Duration must be at least 1 day":D>365&&(P.durationDays="Duration cannot exceed 365 days"),A.type==="GSOS"&&D!==1&&(P.durationDays="General SOS programs should be 1 day")}return A.imageUrl&&!/^https?:\/\/.+/.test(A.imageUrl)&&(P.imageUrl="Please provide a valid image URL"),{isValid:Object.keys(P).length===0,errors:P}},S=(A,P)=>{h(D=>{const I={...D,[A]:P};return A==="type"&&P==="GSOS"&&(I.durationDays="1"),I}),f[A]&&x(D=>{const I={...D};return delete I[A],I})},T=async A=>{A.preventDefault();const{isValid:P,errors:D}=b(d);if(!P){x(D);return}const I={title:d.title.trim(),description:d.description.trim(),type:d.type,durationDays:parseInt(d.durationDays,10),isActive:d.isActive};d.imageUrl.trim()&&(I.imageUrl=d.imageUrl.trim()),console.log("[SOSProgramForm] Submitting data:",I),(await s(I))?.success&&r()};return t.jsx(Pt,{isOpen:e,onClose:r,title:p?"Edit SOS Program":"Create SOS Program",size:"lg",children:t.jsxs("form",{onSubmit:T,className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Program Title ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:d.title,onChange:A=>S("title",A.target.value),placeholder:"e.g., 7-Day Anxiety Relief Program",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.title&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.title})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:d.description,onChange:A=>S("description",A.target.value),placeholder:"Describe what participants will achieve through this program...",rows:4,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${f.description?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.description&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.description})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Program Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("select",{value:d.type,onChange:A=>S("type",A.target.value),disabled:n||p,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n||p?"bg-gray-100":""}`,children:qD.map(A=>t.jsx("option",{value:A.value,children:A.label},A.value))}),p&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Type cannot be changed after creation"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:qD.find(A=>A.value===d.type)?.description})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Duration (Days) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:d.durationDays,onChange:A=>S("durationDays",A.target.value),placeholder:"e.g., 7",min:"1",max:"365",disabled:n||p||d.type==="GSOS",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.durationDays?"border-red-500":"border-gray-300"} ${n||p||d.type==="GSOS"?"bg-gray-100":""}`}),f.durationDays&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.durationDays}),p&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Duration cannot be changed after creation"}),d.type==="GSOS"&&!p&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Fixed to 1 day for General SOS"})]})]}),t.jsx(ba,{label:"Program Image",value:d.imageUrl,onUpload:A=>S("imageUrl",A),disabled:n,error:f.imageUrl,type:"image",folder:"sos-programs",placeholder:"Drop image here or click to upload"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d.isActive,onChange:A=>S("isActive",A.target.checked),disabled:n,className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]}),t.jsx("span",{className:"text-sm text-gray-700",children:d.isActive?"Active (Visible to users)":"Inactive"})]}),a&&t.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[t.jsx(Tt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),t.jsx("p",{className:"text-sm text-red-700",children:a})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 sticky bottom-0 bg-white",children:[t.jsx("button",{type:"button",onClick:r,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:n?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),t.jsx("span",{children:p?"Updating...":"Creating..."})]}):t.jsx("span",{children:p?"Update Program":"Create Program"})})]})]})})}const v2=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",Khe={GSOS:"bg-blue-100 text-blue-700",ISOS:"bg-purple-100 text-purple-700"},HD={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-600"};function Zhe({isOpen:e,onClose:r,program:s,isLoading:n=!1,onFetchStats:a}){const[l,d]=v.useState(null),[h,f]=v.useState(!1),[x,p]=v.useState(null);return v.useEffect(()=>{(async()=>{if(!(!e||!s?._id||!a)){f(!0),p(null);try{const S=await a(s._id);S.success?d(S.data.stats):p(S.error||"Failed to load statistics")}catch(S){console.error("[SOSProgramDetailsModal] Error fetching stats:",S),p("Failed to load statistics")}finally{f(!1)}}})()},[e,s?._id,a]),v.useEffect(()=>{e||(d(null),p(null))},[e]),e?t.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:r}),t.jsx("div",{className:"relative min-h-full flex items-center justify-center p-4",children:t.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Program Details"}),t.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(ss,{className:"h-5 w-5"})})]}),t.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:n?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading program details..."})]}):s?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${Khe[s.type]}`,children:s.type==="GSOS"?"General SOS":"Intensive SOS"}),t.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${s.isActive?HD.active:HD.inactive}`,children:s.isActive?"Active":"Inactive"})]}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:s.title})]}),s.description&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:s.description})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(Xt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"Duration"})]}),t.jsxs("p",{className:"font-semibold text-gray-900",children:[s.durationDays," ",s.durationDays===1?"Day":"Days"]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(dr,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"Created"})]}),t.jsx("p",{className:"font-semibold text-gray-900",children:v2(s.createdAt)})]})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[t.jsx(Ga,{className:"h-4 w-4"}),"Statistics"]}),h?t.jsxs("div",{className:"flex items-center justify-center py-8 bg-gray-50 rounded-lg",children:[t.jsx(st,{className:"h-6 w-6 text-gray-400 animate-spin"}),t.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading statistics..."})]}):x?t.jsx("div",{className:"p-4 bg-red-50 rounded-lg text-sm text-red-600",children:x}):l?t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[t.jsx(tn,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),t.jsx("p",{className:"text-2xl font-bold text-blue-700",children:l.totalEnrolled||0}),t.jsx("p",{className:"text-xs text-blue-600",children:"Total Enrolled"})]}),t.jsxs("div",{className:"bg-amber-50 rounded-lg p-3 text-center",children:[t.jsx(dr,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),t.jsx("p",{className:"text-2xl font-bold text-amber-700",children:l.inProgress||0}),t.jsx("p",{className:"text-xs text-amber-600",children:"In Progress"})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[t.jsx(kl,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),t.jsx("p",{className:"text-2xl font-bold text-green-700",children:l.completed||0}),t.jsx("p",{className:"text-xs text-green-600",children:"Completed"})]}),t.jsxs("div",{className:"bg-red-50 rounded-lg p-3 text-center",children:[t.jsx(Rt,{className:"h-5 w-5 text-red-600 mx-auto mb-1"}),t.jsx("p",{className:"text-2xl font-bold text-red-700",children:l.abandoned||0}),t.jsx("p",{className:"text-xs text-red-600",children:"Abandoned"})]})]}):t.jsx("div",{className:"p-4 bg-gray-50 rounded-lg text-sm text-gray-500 text-center",children:"No statistics available"}),l&&t.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-3",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[t.jsx(qP,{className:"h-4 w-4 text-gray-500 mx-auto mb-1"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[l.completionRate||0,"%"]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Completion Rate"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[t.jsx(ad,{className:"h-4 w-4 text-gray-500 mx-auto mb-1"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[l.quizCount||0,"/",s.durationDays]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Quizzes Created"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[t.jsx(bu,{className:"h-4 w-4 text-gray-500 mx-auto mb-1"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:l.averageScore?.toFixed(1)||"-"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Avg. Score"})]})]})]}),s.imageUrl&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Program Image"}),t.jsx("div",{className:"relative rounded-lg overflow-hidden bg-gray-100 aspect-video",children:t.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-full object-cover",onError:b=>{b.target.style.display="none",b.target.parentElement.innerHTML='<div class="flex items-center justify-center h-full text-gray-400 text-sm">Failed to load image</div>'}})})]}),t.jsx("div",{className:"pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[t.jsxs("span",{children:["Created: ",v2(s.createdAt)]}),s.updatedAt&&s.updatedAt!==s.createdAt&&t.jsxs("span",{children:["Updated: ",v2(s.updatedAt)]}),s.createdBy?.name&&t.jsxs("span",{children:["By: ",s.createdBy.name]})]})})]}):t.jsx("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:t.jsx("p",{children:"No program data available"})})}),t.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:t.jsx("button",{onClick:r,className:"w-full px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium",children:"Close"})})]})})]}):null}const Mo={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-600"},GD={GSOS:"bg-blue-100 text-blue-700",ISOS:"bg-purple-100 text-purple-700"};function Qhe(){const[e,r]=v.useState("quizzes"),{quizzes:s,pagination:n,filters:a,isLoading:l,error:d,fetchQuizzes:h,createQuiz:f,getQuizById:x,updateQuiz:p,deleteQuiz:b,filterByProgram:S,updateFilters:T,resetFilters:A,changePage:P,clearError:D}=zhe(),{programs:I,pagination:L,filters:_,isLoading:$,error:F,fetchPrograms:B,createProgram:M,getProgramById:V,getProgramStats:z,updateProgram:H,toggleProgramStatus:U,deleteProgram:G,searchPrograms:Q,updateFilters:ce,resetFilters:ne,changePage:J,clearError:W}=Vhe(),[le,ge]=v.useState(!1),[re,X]=v.useState(!1),[ae,ve]=v.useState(!1),[fe,se]=v.useState(null),[oe,he]=v.useState(null),[Ve,Ce]=v.useState(!1),[Ke,xe]=v.useState(!1),[Ee,pe]=v.useState(!1),[Fe,me]=v.useState(!1),[Ge,Te]=v.useState(null),[at,dt]=v.useState(null),[Nt,Qe]=v.useState(!1),[ct,ze]=v.useState(!1),[ft,Kt]=v.useState(null),[lr,ys]=v.useState(!1),[Ye,xt]=v.useState(a.programId||""),[Ur,Ir]=v.useState(a.isActive||""),[Cr,_t]=v.useState(!1),[Ae,tt]=v.useState(_.search||""),[lt,Ct]=v.useState(_.type||""),[jr,bs]=v.useState(_.isActive||"");v.useEffect(()=>{B(1)},[]);const Ar=v.useCallback(()=>{Kt(null),he(null),ge(!0)},[]),ht=v.useCallback(async qe=>{Kt(null),Ce(!0);try{const vt=await x(qe._id);vt.success?(he(vt.data),ge(!0)):alert(vt.error||"Failed to load quiz details")}catch(vt){console.error("[Quizes] Failed to load quiz for edit:",vt),alert("An unexpected error occurred")}finally{Ce(!1)}},[x]),Ze=v.useCallback(()=>{ge(!1),Kt(null),he(null)},[]),Mt=v.useCallback(async qe=>{ze(!0),Kt(null);try{let vt;return oe?vt=await p(oe._id,qe):vt=await f(qe),vt.success?vt:(Kt(vt.error||"Failed to save quiz"),{success:!1})}catch(vt){return console.error("[Quizes] Form submission error:",vt),Kt("An unexpected error occurred"),{success:!1}}finally{ze(!1)}},[f,p,oe]),zr=v.useCallback(async qe=>{se(qe),X(!0),Ce(!0);try{const vt=await x(qe._id);vt.success&&se(vt.data)}catch(vt){console.error("[Quizes] Failed to fetch details:",vt)}finally{Ce(!1)}},[x]),ns=v.useCallback(()=>{X(!1),se(null)},[]),$e=v.useCallback(qe=>{se(qe),ve(!0)},[]),At=v.useCallback(()=>{ve(!1),se(null)},[]),Ws=v.useCallback(async()=>{if(fe){ze(!0);try{const qe=await b(fe._id);qe.success?At():alert(qe.error||"Failed to delete quiz")}catch(qe){console.error("[Quizes] Delete error:",qe),alert("An unexpected error occurred")}finally{ze(!1)}}},[fe,b,At]),Un=v.useCallback(()=>{T({programId:Ye,isActive:Ur}),ys(!1)},[Ye,Ur,T]),Nn=v.useCallback(()=>{xt(""),Ir(""),A(),ys(!1)},[A]),Kl=v.useCallback(()=>{h(n.currentPage)},[h,n.currentPage]),jn=v.useCallback(()=>{Kt(null),dt(null),xe(!0)},[]),ei=v.useCallback(async qe=>{Kt(null),Qe(!0);try{const vt=await V(qe._id);vt.success?(dt(vt.data),xe(!0)):alert(vt.error||"Failed to load program details")}catch(vt){console.error("[Quizes] Failed to load program for edit:",vt),alert("An unexpected error occurred")}finally{Qe(!1)}},[V]),vs=v.useCallback(()=>{xe(!1),Kt(null),dt(null)},[]),On=v.useCallback(async qe=>{ze(!0),Kt(null);try{let vt;return at?vt=await H(at._id,qe):vt=await M(qe),vt.success?vt:(Kt(vt.error||"Failed to save program"),{success:!1})}catch(vt){return console.error("[Quizes] Form submission error:",vt),Kt("An unexpected error occurred"),{success:!1}}finally{ze(!1)}},[M,H,at]),as=v.useCallback(async qe=>{Te(qe),pe(!0),Qe(!0);try{const vt=await V(qe._id);vt.success&&Te(vt.data)}catch(vt){console.error("[Quizes] Failed to fetch program details:",vt)}finally{Qe(!1)}},[V]),ut=v.useCallback(()=>{pe(!1),Te(null)},[]),Ds=v.useCallback(async qe=>{ze(!0);try{const vt=await U(qe._id,qe.isActive);vt.success||alert(vt.error||"Failed to update program status")}catch(vt){console.error("[Quizes] Toggle status error:",vt),alert("An unexpected error occurred")}finally{ze(!1)}},[U]),Yr=v.useCallback(qe=>{Te(qe),me(!0)},[]),or=v.useCallback(()=>{me(!1),Te(null)},[]),hn=v.useCallback(async()=>{if(Ge){ze(!0);try{const qe=await G(Ge._id);qe.success?or():alert(qe.error||"Failed to delete program")}catch(qe){console.error("[Quizes] Delete error:",qe),alert("An unexpected error occurred")}finally{ze(!1)}}},[Ge,G,or]),Ca=v.useCallback(qe=>{const vt=qe.target.value;tt(vt),Q(vt)},[Q]),Ei=v.useCallback(()=>{ce({search:Ae,type:lt,isActive:jr}),_t(!1)},[Ae,lt,jr,ce]),wn=v.useCallback(()=>{tt(""),Ct(""),bs(""),ne(),_t(!1)},[ne]),de=v.useCallback(()=>{B(L.currentPage)},[B,L.currentPage]),pt=v.useMemo(()=>a.programId||a.isActive!=="",[a]),yt=v.useMemo(()=>_.search||_.type||_.isActive!=="",[_]),Zt=v.useCallback(qe=>qe?typeof qe=="object"&&qe.title?qe.title:I.find(Wr=>Wr._id===qe)?.title||qe:"-",[I]),ur=v.useCallback(qe=>qe.questions?.reduce((vt,Wr)=>vt+(Wr.points||0),0)||qe.totalPoints||0,[]);return t.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"SOS Management"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage SOS programs and their daily quizzes"})]}),t.jsxs("button",{onClick:e==="quizzes"?Ar:jn,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium",children:[t.jsx(fr,{className:"h-5 w-5"}),t.jsx("span",{children:e==="quizzes"?"Create Quiz":"Create Program"})]})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"flex -mb-px",children:[t.jsxs("button",{onClick:()=>r("programs"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="programs"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(hu,{className:"h-4 w-4 inline-block mr-2"}),"Programs (",L.totalCount||0,")"]}),t.jsxs("button",{onClick:()=>r("quizzes"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="quizzes"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(p0,{className:"h-4 w-4 inline-block mr-2"}),"Quizzes (",n.totalCount||0,")"]})]})})}),(e==="quizzes"?d:F)&&t.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[t.jsx(Tt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{className:"text-sm font-medium text-red-800",children:["Error loading ",e==="quizzes"?"quizzes":"programs"]}),t.jsx("p",{className:"text-sm text-red-700 mt-0.5",children:e==="quizzes"?d:F})]}),t.jsx("button",{onClick:e==="quizzes"?D:W,className:"shrink-0 text-red-600 hover:text-red-800",children:""})]}),e==="programs"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:Ae,onChange:Ca,placeholder:"Search programs...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("button",{onClick:()=>_t(!Cr),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${yt?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[t.jsx(Fn,{className:"h-4 w-4"}),t.jsx("span",{children:"Filters"}),yt&&t.jsx("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full",children:(_.search?1:0)+(_.type?1:0)+(_.isActive!==""?1:0)}),t.jsx(Ni,{className:`h-4 w-4 transition-transform ${Cr?"rotate-180":""}`})]}),t.jsxs("button",{onClick:de,disabled:$,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[t.jsx(ms,{className:`h-4 w-4 ${$?"animate-spin":""}`}),t.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),t.jsxs("div",{className:"ml-auto text-sm text-gray-500",children:[L.totalCount," program",L.totalCount!==1?"s":""," total"]})]}),Cr&&t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),t.jsxs("select",{value:lt,onChange:qe=>Ct(qe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Types"}),t.jsx("option",{value:"GSOS",children:"General SOS (GSOS)"}),t.jsx("option",{value:"ISOS",children:"Intensive SOS (ISOS)"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsxs("select",{value:jr,onChange:qe=>bs(qe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"true",children:"Active"}),t.jsx("option",{value:"false",children:"Inactive"})]})]}),t.jsxs("div",{className:"flex items-end gap-2 sm:col-span-2",children:[t.jsx("button",{onClick:Ei,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Apply"}),t.jsx("button",{onClick:wn,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]})})]}),t.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Program"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Type"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Duration"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:$&&I.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading programs..."})]})}):I.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center",children:[t.jsx(hu,{className:"h-12 w-12 text-gray-300 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No programs found"}),t.jsx("button",{onClick:jn,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first program"})]})}):I.map(qe=>t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"max-w-[300px]",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:qe.title}),qe.description&&t.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:qe.description})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${GD[qe.type]}`,children:qe.type==="GSOS"?"General":"Intensive"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(Xt,{className:"h-4 w-4"}),t.jsxs("span",{className:"text-sm",children:[qe.durationDays," ",qe.durationDays===1?"day":"days"]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${qe.isActive?Mo.active:Mo.inactive}`,children:qe.isActive?"Active":"Inactive"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx("button",{onClick:()=>Ds(qe),disabled:ct,className:`p-2 rounded-lg transition-colors ${qe.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:qe.isActive?"Set Inactive":"Set Active",children:qe.isActive?t.jsx(Rl,{className:"h-5 w-5"}):t.jsx(Ki,{className:"h-5 w-5"})}),t.jsx("button",{onClick:()=>as(qe),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details",children:t.jsx(Or,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>ei(qe),disabled:Nt,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit program",children:t.jsx(Es,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Yr(qe),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:t.jsx(ir,{className:"h-4 w-4"})})]})})]},qe._id))})]})}),L.totalPages>0&&t.jsx(vr,{currentPage:L.currentPage,totalPages:L.totalPages,totalItems:L.totalCount,itemsPerPage:L.limit,onPageChange:J,itemLabel:"programs"})]}),t.jsx("div",{className:"md:hidden space-y-4",children:$&&I.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading programs..."})]}):I.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(hu,{className:"h-12 w-12 text-gray-300 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No programs found"}),t.jsx("button",{onClick:jn,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first program"})]}):t.jsxs(t.Fragment,{children:[I.map(qe=>t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-3",children:[t.jsx("div",{className:"flex items-start justify-between gap-3",children:t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[t.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${GD[qe.type]}`,children:qe.type}),t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${qe.isActive?Mo.active:Mo.inactive}`,children:qe.isActive?"Active":"Inactive"})]}),t.jsx("p",{className:"font-medium text-gray-900 truncate",children:qe.title})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Duration"}),t.jsxs("p",{className:"font-semibold text-gray-900 text-sm",children:[qe.durationDays," days"]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Type"}),t.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:qe.type==="GSOS"?"General":"Intensive"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[t.jsx("button",{onClick:()=>Ds(qe),disabled:ct,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${qe.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:qe.isActive?t.jsxs(t.Fragment,{children:[t.jsx(Rl,{className:"h-4 w-4"}),"Active"]}):t.jsxs(t.Fragment,{children:[t.jsx(Ki,{className:"h-4 w-4"}),"Inactive"]})}),t.jsxs("button",{onClick:()=>as(qe),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:[t.jsx(Or,{className:"h-4 w-4"}),"Details"]}),t.jsx("button",{onClick:()=>ei(qe),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:t.jsx(Es,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Yr(qe),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:t.jsx(ir,{className:"h-4 w-4"})})]})]},qe._id)),L.totalPages>0&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsx(vr,{currentPage:L.currentPage,totalPages:L.totalPages,totalItems:L.totalCount,itemsPerPage:L.limit,onPageChange:J,itemLabel:"programs"})})]})})]}),e==="quizzes"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[t.jsx("div",{className:"relative flex-1 max-w-md",children:t.jsxs("select",{value:Ye,onChange:qe=>{xt(qe.target.value),S(qe.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Programs"}),I.map(qe=>t.jsxs("option",{value:qe._id,children:[qe.title," (",qe.durationDays," days)"]},qe._id))]})}),t.jsxs("button",{onClick:()=>ys(!lr),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${pt?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[t.jsx(Fn,{className:"h-4 w-4"}),t.jsx("span",{children:"Filters"}),pt&&t.jsx("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full",children:(a.programId?1:0)+(a.isActive!==""?1:0)}),t.jsx(Ni,{className:`h-4 w-4 transition-transform ${lr?"rotate-180":""}`})]}),t.jsxs("button",{onClick:Kl,disabled:l,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[t.jsx(ms,{className:`h-4 w-4 ${l?"animate-spin":""}`}),t.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),t.jsxs("div",{className:"ml-auto text-sm text-gray-500",children:[n.totalCount," quiz",n.totalCount!==1?"zes":""," total"]})]}),lr&&t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsxs("select",{value:Ur,onChange:qe=>Ir(qe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"true",children:"Active"}),t.jsx("option",{value:"false",children:"Inactive"})]})]}),t.jsxs("div",{className:"flex items-end gap-2 sm:col-span-2 lg:col-span-3",children:[t.jsx("button",{onClick:Un,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Apply"}),t.jsx("button",{onClick:Nn,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]})})]}),t.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Quiz"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Program"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Day"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Questions"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Points"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:l&&s.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading quizzes..."})]})}):s.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[t.jsx(p0,{className:"h-12 w-12 text-gray-300 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No quizzes found"}),t.jsx("button",{onClick:Ar,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first quiz"})]})}):s.map(qe=>t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"max-w-[200px]",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:qe.title}),qe.description&&t.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:qe.description})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"text-sm text-gray-700 truncate max-w-[150px] block",children:Zt(qe.programId)})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-1.5 text-gray-600",children:[t.jsx(Xt,{className:"h-4 w-4"}),t.jsxs("span",{className:"text-sm font-medium",children:["Day ",qe.dayNumber||"-"]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(Hg,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-700",children:qe.questions?.length||qe.questionCount||0})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(bu,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-700",children:ur(qe)})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${qe.isActive?Mo.active:Mo.inactive}`,children:qe.isActive?"Active":"Inactive"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx("button",{onClick:()=>zr(qe),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details",children:t.jsx(Or,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>ht(qe),disabled:Ve,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit quiz",children:t.jsx(Es,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>$e(qe),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:t.jsx(ir,{className:"h-4 w-4"})})]})})]},qe._id))})]})}),n.totalPages>0&&t.jsx(vr,{currentPage:n.currentPage,totalPages:n.totalPages,totalItems:n.totalCount,itemsPerPage:n.limit,onPageChange:P,itemLabel:"quizzes"})]}),t.jsx("div",{className:"md:hidden space-y-4",children:l&&s.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading quizzes..."})]}):s.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(p0,{className:"h-12 w-12 text-gray-300 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No quizzes found"}),t.jsx("button",{onClick:Ar,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first quiz"})]}):t.jsxs(t.Fragment,{children:[s.map(qe=>t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-3",children:[t.jsx("div",{className:"flex items-start justify-between gap-3",children:t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[t.jsxs("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-700",children:["Day ",qe.dayNumber||"-"]}),t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${qe.isActive?Mo.active:Mo.inactive}`,children:qe.isActive?"Active":"Inactive"})]}),t.jsx("p",{className:"font-medium text-gray-900 truncate",children:qe.title}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:Zt(qe.programId)})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Questions"}),t.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:qe.questions?.length||qe.questionCount||0})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Total Points"}),t.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:ur(qe)})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[t.jsxs("button",{onClick:()=>zr(qe),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:[t.jsx(Or,{className:"h-4 w-4"}),"Details"]}),t.jsx("button",{onClick:()=>ht(qe),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:t.jsx(Es,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>$e(qe),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:t.jsx(ir,{className:"h-4 w-4"})})]})]},qe._id)),n.totalPages>0&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsx(vr,{currentPage:n.currentPage,totalPages:n.totalPages,totalItems:n.totalCount,itemsPerPage:n.limit,onPageChange:P,itemLabel:"quizzes"})})]})})]}),t.jsx(Hhe,{isOpen:le,onClose:Ze,onSubmit:Mt,isLoading:ct,serverError:ft,quizToEdit:oe,programs:I}),t.jsx(Whe,{isOpen:re,onClose:ns,quiz:fe,isLoading:Ve}),t.jsx(xs,{isOpen:ae,onClose:At,onConfirm:Ws,title:"Delete Quiz",message:`Are you sure you want to delete the quiz "${fe?.title}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:ct}),t.jsx(Xhe,{isOpen:Ke,onClose:vs,onSubmit:On,isLoading:ct,serverError:ft,programToEdit:at}),t.jsx(Zhe,{isOpen:Ee,onClose:ut,program:Ge,isLoading:Nt,onFetchStats:z}),t.jsx(xs,{isOpen:Fe,onClose:or,onConfirm:hn,title:"Delete Program",message:`Are you sure you want to delete the program "${Ge?.title}"? This will also affect all associated quizzes and user progress.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:ct})]})}const Lo={BASE:"/web/challenges",GET_BY_ID:e=>`/web/challenges/${e}`,UPDATE:e=>`/web/challenges/${e}`,DELETE:e=>`/web/challenges/${e}`,TOGGLE_STATUS:e=>`/web/challenges/${e}/toggle-status`,STATS:e=>`/web/challenges/${e}/stats`,PARTICIPANTS:e=>`/web/challenges/${e}/participants`},Fo={getAll:async(e={})=>{const{page:r=1,limit:s=10,sortBy:n="createdAt",sortOrder:a="desc",isActive:l="",search:d="",category:h="",difficulty:f=""}=e,x=new URLSearchParams;x.append("page",r.toString()),x.append("limit",s.toString()),x.append("sortBy",n),x.append("sortOrder",a),l!==""&&x.append("isActive",l),d&&x.append("search",d),h&&x.append("category",h),f&&x.append("difficulty",f);const p=`${Lo.BASE}?${x.toString()}`;return console.log("[ChallengeService] Fetching challenges:",p),Se(je.get(p))},getById:async e=>e?(console.log("[ChallengeService] Fetching challenge:",e),Se(je.get(Lo.GET_BY_ID(e)))):(console.error("[ChallengeService] getById: No ID provided"),{success:!1,error:"Challenge ID is required"}),create:async e=>(console.log("[ChallengeService] Creating challenge:",e.title),!e.tasks||e.tasks.length===0?(console.error("[ChallengeService] create: No tasks provided"),{success:!1,error:"At least one task is required"}):Se(je.post(Lo.BASE,e))),update:async(e,r)=>e?(console.log("[ChallengeService] Updating challenge:",e),Se(je.put(Lo.UPDATE(e),r))):(console.error("[ChallengeService] update: No ID provided"),{success:!1,error:"Challenge ID is required"}),delete:async e=>e?(console.log("[ChallengeService] Deleting challenge:",e),Se(je.delete(Lo.DELETE(e)))):(console.error("[ChallengeService] delete: No ID provided"),{success:!1,error:"Challenge ID is required"}),toggleStatus:async e=>e?(console.log("[ChallengeService] Toggling status for challenge:",e),Se(je.patch(Lo.TOGGLE_STATUS(e)))):(console.error("[ChallengeService] toggleStatus: No ID provided"),{success:!1,error:"Challenge ID is required"}),getStats:async e=>e?(console.log("[ChallengeService] Fetching stats for challenge:",e),Se(je.get(Lo.STATS(e)))):(console.error("[ChallengeService] getStats: No ID provided"),{success:!1,error:"Challenge ID is required"}),getParticipants:async(e,r={})=>{if(!e)return console.error("[ChallengeService] getParticipants: No ID provided"),{success:!1,error:"Challenge ID is required"};const{page:s=1,limit:n=10,status:a=""}=r,l=new URLSearchParams;l.append("page",s.toString()),l.append("limit",n.toString()),a&&l.append("status",a);const d=`${Lo.PARTICIPANTS(e)}?${l.toString()}`;return console.log("[ChallengeService] Fetching participants:",d),Se(je.get(d))},buildTask:e=>{const{title:r,description:s=""}=e;return{title:r,description:s}}};function Jhe(e={}){const[r,s]=v.useState([]),[n,a]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[l,d]=v.useState({search:"",isActive:"",category:"",difficulty:"",sortBy:"createdAt",sortOrder:"desc",...e}),[h,f]=v.useState(!1),[x,p]=v.useState(null),b=v.useRef(null),S=v.useCallback(async(H=n.currentPage)=>{f(!0),p(null);try{const U={page:H,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.isActive!==""&&{isActive:l.isActive},...l.category&&{category:l.category},...l.difficulty&&{difficulty:l.difficulty}};console.log("[useChallenges] Fetching challenges with params:",U);const G=await Fo.getAll(U);G.success?(s(G.data.challenges||[]),a({currentPage:G.data.pagination?.currentPage||1,totalPages:G.data.pagination?.totalPages||0,totalCount:G.data.pagination?.totalCount||0,limit:G.data.pagination?.limit||10}),console.log("[useChallenges] Fetched challenges:",G.data.challenges?.length)):(console.error("[useChallenges] Failed to fetch challenges:",G.message),p(G.message||"Failed to fetch challenges"),s([]))}catch(U){console.error("[useChallenges] Error fetching challenges:",U),p("Failed to fetch challenges"),s([])}finally{f(!1)}},[l,n.limit]),T=v.useCallback(async H=>{try{console.log("[useChallenges] Creating challenge:",H.title);const U=await Fo.create(H);return U.success?(console.log("[useChallenges] Challenge created successfully"),await S(1),{success:!0,data:U.data}):(console.error("[useChallenges] Failed to create challenge:",U.message),{success:!1,error:U.message,validationErrors:U.error})}catch(U){return console.error("[useChallenges] Error creating challenge:",U),{success:!1,error:"Failed to create challenge"}}},[S]),A=v.useCallback(async H=>{try{console.log("[useChallenges] Fetching challenge by ID:",H);const U=await Fo.getById(H);return U.success?{success:!0,data:U.data.challenge}:(console.error("[useChallenges] Failed to fetch challenge:",U.message),{success:!1,error:U.message})}catch(U){return console.error("[useChallenges] Error fetching challenge:",U),{success:!1,error:"Failed to fetch challenge details"}}},[]),P=v.useCallback(async H=>{try{console.log("[useChallenges] Fetching stats for challenge:",H);const U=await Fo.getStats(H);return U.success?{success:!0,data:U.data}:(console.error("[useChallenges] Failed to fetch challenge stats:",U.message),{success:!1,error:U.message})}catch(U){return console.error("[useChallenges] Error fetching challenge stats:",U),{success:!1,error:"Failed to fetch challenge statistics"}}},[]),D=v.useCallback(async(H,U={})=>{try{console.log("[useChallenges] Fetching participants for challenge:",H);const G=await Fo.getParticipants(H,U);return G.success?{success:!0,data:G.data}:(console.error("[useChallenges] Failed to fetch participants:",G.message),{success:!1,error:G.message})}catch(G){return console.error("[useChallenges] Error fetching participants:",G),{success:!1,error:"Failed to fetch challenge participants"}}},[]),I=v.useCallback(async(H,U)=>{try{console.log("[useChallenges] Updating challenge:",H);const G=await Fo.update(H,U);return G.success?(console.log("[useChallenges] Challenge updated successfully"),s(Q=>Q.map(ce=>ce._id===H?{...ce,...G.data.challenge}:ce)),{success:!0,data:G.data}):(console.error("[useChallenges] Failed to update challenge:",G.message),{success:!1,error:G.message,validationErrors:G.error})}catch(G){return console.error("[useChallenges] Error updating challenge:",G),{success:!1,error:"Failed to update challenge"}}},[]),L=v.useCallback(async(H,U)=>{try{console.log("[useChallenges] Toggling status for challenge:",H);const G=await Fo.toggleStatus(H);return G.success?(console.log("[useChallenges] Challenge status toggled successfully"),s(Q=>Q.map(ce=>ce._id===H?{...ce,isActive:!U}:ce)),{success:!0}):(console.error("[useChallenges] Failed to toggle challenge status:",G.message),{success:!1,error:G.message})}catch(G){return console.error("[useChallenges] Error toggling challenge status:",G),{success:!1,error:"Failed to update challenge status"}}},[]),_=v.useCallback(async H=>{try{console.log("[useChallenges] Deleting challenge:",H);const U=await Fo.delete(H);return U.success?(console.log("[useChallenges] Challenge deleted successfully"),s(G=>G.filter(Q=>Q._id!==H)),a(G=>({...G,totalCount:G.totalCount-1,totalPages:Math.ceil((G.totalCount-1)/G.limit)})),{success:!0}):(console.error("[useChallenges] Failed to delete challenge:",U.message),{success:!1,error:U.message})}catch(U){return console.error("[useChallenges] Error deleting challenge:",U),{success:!1,error:"Failed to delete challenge"}}},[]),$=v.useCallback(H=>{b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{d(U=>({...U,search:H}))},300)},[]),F=v.useCallback(H=>{d(U=>({...U,...H}))},[]),B=v.useCallback(()=>{d({search:"",isActive:"",category:"",difficulty:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),M=v.useCallback(H=>{S(H)},[S]),V=v.useCallback(H=>{a(U=>({...U,limit:H}))},[]),z=v.useCallback(()=>{p(null)},[]);return v.useEffect(()=>{S(1)},[l]),v.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),{challenges:r,pagination:n,filters:l,isLoading:h,error:x,fetchChallenges:S,createChallenge:T,getChallengeById:A,getChallengeStats:P,getChallengeParticipants:D,updateChallenge:I,toggleChallengeStatus:L,deleteChallenge:_,searchChallenges:$,updateFilters:F,resetFilters:B,changePage:M,changeLimit:V,clearError:z}}const e0e=[{value:"health",label:"Health"},{value:"fitness",label:"Fitness"},{value:"mindfulness",label:"Mindfulness"},{value:"productivity",label:"Productivity"},{value:"social",label:"Social"},{value:"creativity",label:"Creativity"},{value:"learning",label:"Learning"},{value:"wellness",label:"Wellness"},{value:"habit",label:"Habit"},{value:"other",label:"Other"}],t0e=[{value:"easy",label:"Easy",description:"Suitable for beginners"},{value:"medium",label:"Medium",description:"Moderate effort required"},{value:"hard",label:"Hard",description:"Challenging for experienced users"}],YD=()=>({title:"",description:"",category:"",difficulty:"medium",tasks:[],durationDays:"",imageUrl:"",isActive:!1}),r0e=()=>({title:"",description:""});function s0e({isOpen:e,onClose:r,onSubmit:s,isLoading:n=!1,serverError:a=null,challengeToEdit:l=null}){const[d,h]=v.useState(YD()),[f,x]=v.useState({}),[p,b]=v.useState("basic"),S=!!l;v.useEffect(()=>{e&&(h(l?{title:l.title||"",description:l.description||"",category:l.category||"",difficulty:l.difficulty||"medium",tasks:l.tasks?.map(_=>({title:_.title||"",description:_.description||""}))||[],durationDays:l.durationDays?.toString()||"",imageUrl:l.imageUrl||"",isActive:l.isActive??!1}:YD()),x({}),b("basic"))},[e,l]);const T=_=>{const $={};if(_.title.trim()?_.title.length>200&&($.title="Title must be less than 200 characters"):$.title="Title is required",_.description.trim()?_.description.length>2e3&&($.description="Description must be less than 2000 characters"):$.description="Description is required",_.category||($.category="Category is required"),_.durationDays){const F=parseInt(_.durationDays,10);isNaN(F)||F<1?$.durationDays="Duration must be at least 1 day":F>365&&($.durationDays="Duration cannot exceed 365 days")}if(_.imageUrl&&!/^https?:\/\/.+/.test(_.imageUrl)&&($.imageUrl="Please provide a valid image URL"),_.tasks.length===0)$.tasks="At least one task is required";else{const F=[];_.tasks.forEach((B,M)=>{const V={};B.title.trim()||(V.title="Task title is required"),Object.keys(V).length>0&&(F[M]=V)}),(F.length>0||Object.keys(F).some(B=>F[B]))&&($.taskErrors=F)}return{isValid:Object.keys($).length===0,errors:$}},A=(_,$)=>{h(F=>({...F,[_]:$})),f[_]&&x(F=>{const B={...F};return delete B[_],B})},P=()=>{h(_=>({..._,tasks:[..._.tasks,r0e()]}))},D=_=>{h($=>({...$,tasks:$.tasks.filter((F,B)=>B!==_)}))},I=(_,$,F)=>{h(B=>({...B,tasks:B.tasks.map((M,V)=>V!==_?M:{...M,[$]:F})}))},L=async _=>{_.preventDefault();const{isValid:$,errors:F}=T(d);if(!$){x(F),(F.tasks||F.taskErrors)&&b("tasks");return}const B={title:d.title.trim(),description:d.description.trim(),category:d.category,difficulty:d.difficulty,tasks:d.tasks.map((V,z)=>({title:V.title.trim(),description:V.description.trim(),order:z})),isActive:d.isActive};d.durationDays&&(B.durationDays=parseInt(d.durationDays,10)),d.imageUrl.trim()&&(B.imageUrl=d.imageUrl.trim()),console.log("[ChallengeForm] Submitting data:",B),(await s(B))?.success&&r()};return t.jsx(Pt,{isOpen:e,onClose:r,title:S?"Edit Challenge":"Create Challenge",size:"xl",children:t.jsxs("form",{onSubmit:L,className:"space-y-4",children:[t.jsxs("div",{className:"flex border-b border-gray-200",children:[t.jsx("button",{type:"button",onClick:()=>b("basic"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${p==="basic"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Basic Info"}),t.jsxs("button",{type:"button",onClick:()=>b("tasks"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${p==="tasks"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Tasks (",d.tasks.length,")"]})]}),t.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:p==="basic"?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Challenge Title ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:d.title,onChange:_=>A("title",_.target.value),placeholder:"e.g., 30-Day Fitness Challenge",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.title&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.title})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:d.description,onChange:_=>A("description",_.target.value),placeholder:"Describe what participants will achieve through this challenge...",rows:4,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${f.description?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.description&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.description})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:d.category,onChange:_=>A("category",_.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.category?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`,children:[t.jsx("option",{value:"",children:"Select a category"}),e0e.map(_=>t.jsx("option",{value:_.value,children:_.label},_.value))]}),f.category&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.category})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficulty"}),t.jsx("select",{value:d.difficulty,onChange:_=>A("difficulty",_.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`,children:t0e.map(_=>t.jsx("option",{value:_.value,children:_.label},_.value))})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Duration (Days)",t.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),t.jsx("input",{type:"number",value:d.durationDays,onChange:_=>A("durationDays",_.target.value),placeholder:"e.g., 30",min:"1",max:"365",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.durationDays?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),f.durationDays&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.durationDays}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Duration of the challenge in days. Leave empty for no time limit."})]}),t.jsx(ba,{label:"Challenge Image",value:d.imageUrl,onUpload:_=>A("imageUrl",_),disabled:n,error:f.imageUrl,type:"image",folder:"challenges",placeholder:"Drop image here or click to upload"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d.isActive,onChange:_=>A("isActive",_.target.checked),disabled:n,className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]}),t.jsx("span",{className:"text-sm text-gray-700",children:d.isActive?"Active (Visible to users)":"Inactive"})]})]}):t.jsxs("div",{className:"space-y-4",children:[f.tasks&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-700",children:f.tasks})}),d.tasks.length===0?t.jsxs("div",{className:"p-8 text-center border-2 border-dashed border-gray-200 rounded-lg",children:[t.jsx("p",{className:"text-gray-500 mb-3",children:"No tasks added yet"}),t.jsxs("button",{type:"button",onClick:P,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:[t.jsx(fr,{className:"h-4 w-4"}),"Add Task"]})]}):t.jsxs(t.Fragment,{children:[d.tasks.map((_,$)=>t.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Np,{className:"h-4 w-4 text-gray-400"}),t.jsxs("span",{className:"font-medium text-gray-700",children:["Task ",$+1]})]}),t.jsx("button",{type:"button",onClick:()=>D($),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:t.jsx(ir,{className:"h-4 w-4"})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["Title ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:_.title,onChange:F=>I($,"title",F.target.value),placeholder:"e.g., Do 20 pushups",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${f.taskErrors?.[$]?.title?"border-red-500":"border-gray-300"}`}),f.taskErrors?.[$]?.title&&t.jsx("p",{className:"text-red-600 text-xs mt-1",children:f.taskErrors[$].title})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["Description",t.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),t.jsx("textarea",{value:_.description,onChange:F=>I($,"description",F.target.value),placeholder:"Additional details about this task...",rows:2,disabled:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none transition-colors"})]})]},$)),t.jsxs("button",{type:"button",onClick:P,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",children:[t.jsx(fr,{className:"h-4 w-4"}),"Add Task"]})]})]})}),a&&t.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[t.jsx(Tt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),t.jsx("p",{className:"text-sm text-red-700",children:a})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:r,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:n?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),t.jsx("span",{children:S?"Updating...":"Creating..."})]}):t.jsx("span",{children:S?"Update Challenge":"Create Challenge"})})]})]})})}const WD=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"-",N2={easy:{color:"bg-green-100 text-green-700",label:"Easy"},medium:{color:"bg-amber-100 text-amber-700",label:"Medium"},hard:{color:"bg-red-100 text-red-700",label:"Hard"}},XD=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-";function n0e({isOpen:e,onClose:r,challenge:s,isLoading:n=!1,onFetchStats:a}){const[l,d]=v.useState(null),[h,f]=v.useState(!1),[x,p]=v.useState(null);return v.useEffect(()=>{(async()=>{if(!(!e||!s?._id||!a)){f(!0),p(null);try{const S=await a(s._id);S.success?d(S.data.stats||S.data):p(S.error||"Failed to load statistics")}catch(S){console.error("[ChallengeDetailsModal] Error fetching stats:",S),p("Failed to load statistics")}finally{f(!1)}}})()},[e,s?._id,a]),v.useEffect(()=>{e||(d(null),p(null))},[e]),e?t.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:r}),t.jsx("div",{className:"relative min-h-full flex items-center justify-center p-4",children:t.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Challenge Details"}),t.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(ss,{className:"h-5 w-5"})})]}),t.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:n?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading challenge details..."})]}):s?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${s.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:s.isActive?"Active":"Inactive"}),s.category&&t.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:WD(s.category)}),s.difficulty&&t.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${N2[s.difficulty]?.color||"bg-gray-100 text-gray-700"}`,children:N2[s.difficulty]?.label||s.difficulty}),s.durationDays&&t.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:[s.durationDays," Days"]})]}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:s.title})]}),s.description&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:s.description})]}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[t.jsx(lx,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),t.jsx("p",{className:"text-2xl font-bold text-blue-700",children:s.tasks?.length||0}),t.jsx("p",{className:"text-xs text-blue-600",children:"Tasks"})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[t.jsx(on,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),t.jsx("p",{className:"text-lg font-semibold text-purple-700",children:WD(s.category)}),t.jsx("p",{className:"text-xs text-purple-600",children:"Category"})]}),t.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 text-center",children:[t.jsx(Tn,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),t.jsx("p",{className:"text-lg font-semibold text-amber-700",children:N2[s.difficulty]?.label||"Medium"}),t.jsx("p",{className:"text-xs text-amber-600",children:"Difficulty"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[t.jsx(Xt,{className:"h-5 w-5 text-gray-500 mx-auto mb-1"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.durationDays?`${s.durationDays}d`:"No Limit"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Duration"})]})]}),s.tasks&&s.tasks.length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[t.jsx(lx,{className:"h-4 w-4"}),"Tasks (",s.tasks.length,")"]}),t.jsx("div",{className:"space-y-2",children:s.tasks.map((b,S)=>t.jsx("div",{className:"p-3 border border-gray-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-xs font-medium text-gray-600",children:S+1}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:b.title}),b.description&&t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:b.description})]})]})},S))})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[t.jsx(Ga,{className:"h-4 w-4"}),"Statistics"]}),h?t.jsxs("div",{className:"flex items-center justify-center py-8 bg-gray-50 rounded-lg",children:[t.jsx(st,{className:"h-6 w-6 text-gray-400 animate-spin"}),t.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading statistics..."})]}):x?t.jsx("div",{className:"p-4 bg-red-50 rounded-lg text-sm text-red-600",children:x}):l?t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[t.jsx(tn,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),t.jsx("p",{className:"text-2xl font-bold text-blue-700",children:l.totalParticipants||0}),t.jsx("p",{className:"text-xs text-blue-600",children:"Participants"})]}),t.jsxs("div",{className:"bg-amber-50 rounded-lg p-3 text-center",children:[t.jsx(dr,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),t.jsx("p",{className:"text-2xl font-bold text-amber-700",children:l.activeParticipants||0}),t.jsx("p",{className:"text-xs text-amber-600",children:"Active"})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[t.jsx(kl,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),t.jsx("p",{className:"text-2xl font-bold text-green-700",children:l.completedParticipants||0}),t.jsx("p",{className:"text-xs text-green-600",children:"Completed"})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 text-center",children:[t.jsx(bu,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),t.jsx("p",{className:"text-2xl font-bold text-purple-700",children:l.averageTasksCompleted||0}),t.jsx("p",{className:"text-xs text-purple-600",children:"Avg. Tasks Done"})]})]}):t.jsx("div",{className:"p-4 bg-gray-50 rounded-lg text-sm text-gray-500 text-center",children:"No statistics available"})]}),s.imageUrl&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Challenge Image"}),t.jsx("div",{className:"relative rounded-lg overflow-hidden bg-gray-100 aspect-video",children:t.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-full object-cover",onError:b=>{b.target.style.display="none",b.target.parentElement.innerHTML='<div class="flex items-center justify-center h-full text-gray-400 text-sm">Failed to load image</div>'}})})]}),t.jsx("div",{className:"pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[t.jsxs("span",{children:["Created: ",XD(s.createdAt)]}),s.updatedAt&&s.updatedAt!==s.createdAt&&t.jsxs("span",{children:["Updated: ",XD(s.updatedAt)]}),s.createdBy?.name&&t.jsxs("span",{children:["By: ",s.createdBy.name]})]})})]}):t.jsx("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:t.jsx("p",{children:"No challenge data available"})})}),t.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:t.jsx("button",{onClick:r,className:"w-full px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium",children:"Close"})})]})})]}):null}const KD=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"-",a0e=[{value:"health",label:"Health"},{value:"fitness",label:"Fitness"},{value:"mindfulness",label:"Mindfulness"},{value:"productivity",label:"Productivity"},{value:"social",label:"Social"},{value:"creativity",label:"Creativity"},{value:"learning",label:"Learning"},{value:"wellness",label:"Wellness"},{value:"habit",label:"Habit"},{value:"other",label:"Other"}],kg={easy:{color:"bg-green-100 text-green-700",label:"Easy"},medium:{color:"bg-amber-100 text-amber-700",label:"Medium"},hard:{color:"bg-red-100 text-red-700",label:"Hard"}},_g={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-600"};function i0e(){const{challenges:e,pagination:r,filters:s,isLoading:n,error:a,fetchChallenges:l,createChallenge:d,getChallengeById:h,getChallengeStats:f,updateChallenge:x,toggleChallengeStatus:p,deleteChallenge:b,searchChallenges:S,updateFilters:T,resetFilters:A,changePage:P,clearError:D}=Jhe(),[I,L]=v.useState(!1),[_,$]=v.useState(!1),[F,B]=v.useState(!1),[M,V]=v.useState(null),[z,H]=v.useState(null),[U,G]=v.useState(!1),[Q,ce]=v.useState(!1),[ne,J]=v.useState(null),[W,le]=v.useState(!1),[ge,re]=v.useState(s.search||""),[X,ae]=v.useState(s.isActive||""),[ve,fe]=v.useState(s.category||""),[se,oe]=v.useState(s.difficulty||""),he=v.useCallback(()=>{J(null),H(null),L(!0)},[]),Ve=v.useCallback(async ze=>{J(null),G(!0);try{const ft=await h(ze._id);ft.success?(H(ft.data),L(!0)):alert(ft.error||"Failed to load challenge details")}catch(ft){console.error("[Challenges] Failed to load challenge for edit:",ft),alert("An unexpected error occurred")}finally{G(!1)}},[h]),Ce=v.useCallback(()=>{L(!1),J(null),H(null)},[]),Ke=v.useCallback(async ze=>{ce(!0),J(null);try{let ft;return z?ft=await x(z._id,ze):ft=await d(ze),ft.success?ft:(J(ft.error||"Failed to save challenge"),{success:!1})}catch(ft){return console.error("[Challenges] Form submission error:",ft),J("An unexpected error occurred"),{success:!1}}finally{ce(!1)}},[d,x,z]),xe=v.useCallback(async ze=>{V(ze),$(!0),G(!0);try{const ft=await h(ze._id);ft.success&&V(ft.data)}catch(ft){console.error("[Challenges] Failed to fetch details:",ft)}finally{G(!1)}},[h]),Ee=v.useCallback(()=>{$(!1),V(null)},[]),pe=v.useCallback(async ze=>{ce(!0);try{const ft=await p(ze._id,ze.isActive);ft.success||alert(ft.error||"Failed to update challenge status")}catch(ft){console.error("[Challenges] Toggle status error:",ft),alert("An unexpected error occurred")}finally{ce(!1)}},[p]),Fe=v.useCallback(ze=>{V(ze),B(!0)},[]),me=v.useCallback(()=>{B(!1),V(null)},[]),Ge=v.useCallback(async()=>{if(M){ce(!0);try{const ze=await b(M._id);ze.success?me():alert(ze.error||"Failed to delete challenge")}catch(ze){console.error("[Challenges] Delete error:",ze),alert("An unexpected error occurred")}finally{ce(!1)}}},[M,b,me]),Te=v.useCallback(ze=>{const ft=ze.target.value;re(ft),S(ft)},[S]),at=v.useCallback(()=>{T({search:ge,isActive:X,category:ve,difficulty:se}),le(!1)},[ge,X,ve,se,T]),dt=v.useCallback(()=>{re(""),ae(""),fe(""),oe(""),A(),le(!1)},[A]),Nt=v.useCallback(()=>{l(r.currentPage)},[l,r.currentPage]),Qe=v.useMemo(()=>s.search||s.isActive!==""||s.category||s.difficulty,[s]),ct=v.useMemo(()=>{let ze=0;return s.search&&ze++,s.isActive!==""&&ze++,s.category&&ze++,s.difficulty&&ze++,ze},[s]);return t.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Challenges"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Create and manage task-based challenges for users"})]}),t.jsxs("button",{onClick:he,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium",children:[t.jsx(fr,{className:"h-5 w-5"}),t.jsx("span",{children:"Create Challenge"})]})]}),a&&t.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[t.jsx(Tt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error loading challenges"}),t.jsx("p",{className:"text-sm text-red-700 mt-0.5",children:a})]}),t.jsx("button",{onClick:D,className:"shrink-0 text-red-600 hover:text-red-800",children:""})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:ge,onChange:Te,placeholder:"Search challenges...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("button",{onClick:()=>le(!W),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${Qe?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[t.jsx(Fn,{className:"h-4 w-4"}),t.jsx("span",{children:"Filters"}),Qe&&t.jsx("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full",children:ct}),t.jsx(Ni,{className:`h-4 w-4 transition-transform ${W?"rotate-180":""}`})]}),t.jsxs("button",{onClick:Nt,disabled:n,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[t.jsx(ms,{className:`h-4 w-4 ${n?"animate-spin":""}`}),t.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),t.jsxs("div",{className:"ml-auto text-sm text-gray-500",children:[r.totalCount," challenge",r.totalCount!==1?"s":""," total"]})]}),W&&t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),t.jsxs("select",{value:ve,onChange:ze=>fe(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Categories"}),a0e.map(ze=>t.jsx("option",{value:ze.value,children:ze.label},ze.value))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficulty"}),t.jsxs("select",{value:se,onChange:ze=>oe(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Difficulties"}),t.jsx("option",{value:"easy",children:"Easy"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"hard",children:"Hard"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsxs("select",{value:X,onChange:ze=>ae(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"true",children:"Active"}),t.jsx("option",{value:"false",children:"Inactive"})]})]}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx("button",{onClick:at,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Apply"}),t.jsx("button",{onClick:dt,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]})})]}),t.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Challenge"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Tasks"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Category"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Difficulty"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Duration"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:n&&e.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading challenges..."})]})}):e.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[t.jsx(hu,{className:"h-12 w-12 text-gray-300 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No challenges found"}),t.jsx("button",{onClick:he,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first challenge"})]})}):e.map(ze=>t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"max-w-[300px]",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:ze.title}),ze.description&&t.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:ze.description})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(lx,{className:"h-4 w-4"}),t.jsxs("span",{className:"text-sm",children:[ze.tasks?.length||ze.taskCount||0," tasks"]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:[t.jsx(on,{className:"h-3 w-3"}),KD(ze.category)]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${kg[ze.difficulty]?.color||"bg-gray-100 text-gray-700"}`,children:[t.jsx(Tn,{className:"h-3 w-3"}),kg[ze.difficulty]?.label||"Medium"]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(Xt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:ze.durationDays?`${ze.durationDays} days`:"No limit"})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${ze.isActive?_g.active:_g.inactive}`,children:ze.isActive?"Active":"Inactive"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx("button",{onClick:()=>pe(ze),disabled:Q,className:`p-2 rounded-lg transition-colors ${ze.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:ze.isActive?"Set Inactive":"Set Active",children:ze.isActive?t.jsx(Rl,{className:"h-5 w-5"}):t.jsx(Ki,{className:"h-5 w-5"})}),t.jsx("button",{onClick:()=>xe(ze),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details",children:t.jsx(Or,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ve(ze),disabled:U,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit challenge",children:t.jsx(Es,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Fe(ze),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:t.jsx(ir,{className:"h-4 w-4"})})]})})]},ze._id))})]})}),r.totalPages>0&&t.jsx(vr,{currentPage:r.currentPage,totalPages:r.totalPages,totalItems:r.totalCount,itemsPerPage:r.limit,onPageChange:P,itemLabel:"challenges"})]}),t.jsx("div",{className:"md:hidden space-y-4",children:n&&e.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(st,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading challenges..."})]}):e.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(hu,{className:"h-12 w-12 text-gray-300 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No challenges found"}),t.jsx("button",{onClick:he,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first challenge"})]}):t.jsxs(t.Fragment,{children:[e.map(ze=>t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-3",children:[t.jsx("div",{className:"flex items-start justify-between gap-3",children:t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${ze.isActive?_g.active:_g.inactive}`,children:ze.isActive?"Active":"Inactive"}),ze.category&&t.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-700",children:KD(ze.category)}),ze.difficulty&&t.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${kg[ze.difficulty]?.color||"bg-gray-100 text-gray-700"}`,children:kg[ze.difficulty]?.label||"Medium"}),ze.durationDays&&t.jsxs("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700",children:[ze.durationDays," days"]})]}),t.jsx("p",{className:"font-medium text-gray-900 truncate",children:ze.title}),ze.description&&t.jsx("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2",children:ze.description})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsxs("div",{className:"flex items-center justify-center gap-1 text-gray-500",children:[t.jsx(lx,{className:"h-3 w-3"}),t.jsx("p",{className:"text-xs",children:"Tasks"})]}),t.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:ze.tasks?.length||ze.taskCount||0})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[t.jsxs("div",{className:"flex items-center justify-center gap-1 text-gray-500",children:[t.jsx(Xt,{className:"h-3 w-3"}),t.jsx("p",{className:"text-xs",children:"Duration"})]}),t.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:ze.durationDays?`${ze.durationDays}d`:"No limit"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[t.jsx("button",{onClick:()=>pe(ze),disabled:Q,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${ze.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:ze.isActive?t.jsxs(t.Fragment,{children:[t.jsx(Rl,{className:"h-4 w-4"}),"Active"]}):t.jsxs(t.Fragment,{children:[t.jsx(Ki,{className:"h-4 w-4"}),"Inactive"]})}),t.jsxs("button",{onClick:()=>xe(ze),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:[t.jsx(Or,{className:"h-4 w-4"}),"Details"]}),t.jsx("button",{onClick:()=>Ve(ze),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:t.jsx(Es,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Fe(ze),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:t.jsx(ir,{className:"h-4 w-4"})})]})]},ze._id)),r.totalPages>0&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsx(vr,{currentPage:r.currentPage,totalPages:r.totalPages,totalItems:r.totalCount,itemsPerPage:r.limit,onPageChange:P,itemLabel:"challenges"})})]})}),t.jsx(s0e,{isOpen:I,onClose:Ce,onSubmit:Ke,isLoading:Q,serverError:ne,challengeToEdit:z}),t.jsx(n0e,{isOpen:_,onClose:Ee,challenge:M,isLoading:U,onFetchStats:f}),t.jsx(xs,{isOpen:F,onClose:me,onConfirm:Ge,title:"Delete Challenge",message:`Are you sure you want to delete the challenge "${M?.title}"? This will also affect all participant progress.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:Q})]})}const Qd={BASE:"/web/polls",BY_EVENT:"/web/polls/event"},Jd={create:async e=>{console.log("[PollService] Creating poll for event:",e.eventId);const r=await Se(je.post(Qd.BASE,e));return r.success?console.log("[PollService] Created poll:",r.data?._id):console.error("[PollService] Failed to create poll:",r.message),r},getByEventId:async e=>{console.log("[PollService] Fetching poll for event:",e);const r=await Se(je.get(`${Qd.BY_EVENT}/${e}`));return r.success?console.log("[PollService] Fetched poll:",r.data?._id):console.error("[PollService] Failed to fetch poll:",r.message),r},update:async(e,r)=>{console.log("[PollService] Updating poll:",e);const s=await Se(je.put(`${Qd.BASE}/${e}`,r));return s.success?console.log("[PollService] Updated poll successfully"):console.error("[PollService] Failed to update poll:",s.message),s},delete:async e=>{console.log("[PollService] Deleting poll:",e);const r=await Se(je.delete(`${Qd.BASE}/${e}`));return r.success?console.log("[PollService] Deleted poll successfully"):console.error("[PollService] Failed to delete poll:",r.message),r},getStats:async e=>{console.log("[PollService] Fetching stats for poll:",e);const r=await Se(je.get(`${Qd.BASE}/${e}/stats`));return r.success?console.log("[PollService] Fetched poll stats, total submissions:",r.data?.totalSubmissions):console.error("[PollService] Failed to fetch poll stats:",r.message),r},notifyUsers:async e=>{console.log("[PollService] Sending notification for poll:",e);const r=await Se(je.post(`${Qd.BASE}/${e}/notify`));return r.success?console.log("[PollService] Notification sent, success:",r.data?.successCount,"failed:",r.data?.failureCount):console.error("[PollService] Failed to send notification:",r.message),r}},ZD=(e=null)=>({questions:e?.questions?.length>0?e.questions.map(r=>({questionText:r.questionText||"",options:r.options?.length>0?[...r.options]:["",""]})):[{questionText:"",options:["",""]}],isActive:e?.isActive??!0}),l0e=e=>{const r={};if(!e.questions||e.questions.length===0)return r.questions="At least one question is required",{isValid:!1,errors:r};const s=[];return e.questions.forEach((n,a)=>{const l={};n.questionText?.trim()?n.questionText.length>500&&(l.questionText="Question text must be 500 characters or less"):l.questionText="Question text is required";const d=n.options?.filter(f=>f?.trim())||[];d.length<2&&(l.options="At least 2 options are required"),new Set(d.map(f=>f.trim().toLowerCase())).size!==d.length&&(l.options="Options must be unique"),Object.keys(l).length>0&&(s[a]=l)}),s.some(n=>n)&&(r.questionErrors=s),{isValid:Object.keys(r).length===0,errors:r}};function QD({isOpen:e,onClose:r,onSubmit:s,poll:n=null,event:a=null,isLoading:l=!1,serverError:d=null}){const h=!!n,[f,x]=v.useState(ZD(n)),[p,b]=v.useState({});v.useEffect(()=>{e&&(x(ZD(n)),b({}),console.log("[PollForm] Form initialized:",{isEditMode:h,poll:n}))},[e,n]);const S=(F,B)=>{x(M=>({...M,questions:M.questions.map((V,z)=>z===F?{...V,questionText:B}:V)})),p.questionErrors?.[F]?.questionText&&b(M=>{const V={...M};return V.questionErrors?.[F]&&delete V.questionErrors[F].questionText,V})},T=(F,B,M)=>{x(V=>({...V,questions:V.questions.map((z,H)=>H===F?{...z,options:z.options.map((U,G)=>G===B?M:U)}:z)})),p.questionErrors?.[F]?.options&&b(V=>{const z={...V};return z.questionErrors?.[F]&&delete z.questionErrors[F].options,z})},A=F=>{x(B=>({...B,questions:B.questions.map((M,V)=>V===F?{...M,options:[...M.options,""]}:M)}))},P=(F,B)=>{x(M=>({...M,questions:M.questions.map((V,z)=>z===F?{...V,options:V.options.filter((H,U)=>U!==B)}:V)}))},D=()=>{x(F=>({...F,questions:[...F.questions,{questionText:"",options:["",""]}]}))},I=F=>{x(B=>({...B,questions:B.questions.filter((M,V)=>V!==F)}))},L=()=>{x(F=>({...F,isActive:!F.isActive}))},_=async F=>{F.preventDefault();const B=l0e(f);if(!B.isValid){b(B.errors),console.log("[PollForm] Validation failed:",B.errors);return}const M={questions:f.questions.map(V=>({questionText:V.questionText.trim(),options:V.options.filter(z=>z?.trim()).map(z=>z.trim())}))};!h&&a?M.eventId=a._id:h&&(M.isActive=f.isActive),console.log("[PollForm] Submitting:",M),await s(M)},$=()=>{l||r()};return t.jsx(Pt,{isOpen:e,onClose:$,title:h?"Edit Poll":"Create Poll",size:"2xl",closeOnOverlayClick:!l,children:t.jsxs("form",{onSubmit:_,className:"space-y-6",children:[a&&t.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 text-blue-800 rounded-lg",children:t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"font-medium",children:"Event:"})," ",a.name]})}),d&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:d}),p.questions&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:p.questions}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Questions"}),t.jsxs("span",{className:"text-sm text-gray-500",children:[f.questions.length," question(s)"]})]}),f.questions.map((F,B)=>t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-4",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mt-2",children:[t.jsx(Np,{className:"h-4 w-4"}),t.jsxs("span",{className:"font-medium text-sm text-gray-500",children:["Q",B+1]})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Question Text ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:F.questionText,onChange:M=>S(B,M.target.value),disabled:l,maxLength:500,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${p.questionErrors?.[B]?.questionText?"border-red-500":"border-gray-300"}`,placeholder:"Enter your question"}),p.questionErrors?.[B]?.questionText&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:p.questionErrors[B].questionText})]}),f.questions.length>1&&t.jsx("button",{type:"button",onClick:()=>I(B),disabled:l,className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors mt-6",title:"Remove question",children:t.jsx(ir,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"ml-10 space-y-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Options ",t.jsx("span",{className:"text-red-500",children:"*"}),t.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(min 2)"})]}),p.questionErrors?.[B]?.options&&t.jsx("p",{className:"text-sm text-red-500",children:p.questionErrors[B].options}),F.options.map((M,V)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-sm text-gray-400 w-6",children:[V+1,"."]}),t.jsx("input",{type:"text",value:M,onChange:z=>T(B,V,z.target.value),disabled:l,maxLength:200,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:`Option ${V+1}`}),F.options.length>2&&t.jsx("button",{type:"button",onClick:()=>P(B,V),disabled:l,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Remove option",children:t.jsx(ir,{className:"h-4 w-4"})})]},V)),t.jsxs("button",{type:"button",onClick:()=>A(B),disabled:l||F.options.length>=10,className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[t.jsx(fr,{className:"h-3 w-3"}),"Add Option"]})]})]},B)),t.jsxs("button",{type:"button",onClick:D,disabled:l||f.questions.length>=20,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 text-gray-600 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[t.jsx(fr,{className:"h-4 w-4"}),"Add Question"]})]}),h&&t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:"Poll Status"}),t.jsx("p",{className:"text-sm text-gray-500",children:f.isActive?"Poll is accepting submissions":"Poll is closed for submissions"})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:f.isActive,onChange:L,disabled:l,className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:$,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[l&&t.jsx(st,{className:"h-4 w-4 animate-spin"}),h?"Update Poll":"Create Poll"]})]})]})})}function o0e(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function c0e(e){return e==="ONLINE"||e==="HYBRID"?S0:Aj}function d0e(e){const r={TECHNOLOGY:"bg-blue-100 text-blue-700",EDUCATION:"bg-indigo-100 text-indigo-700",MEDICAL:"bg-green-100 text-green-700",COMEDY:"bg-yellow-100 text-yellow-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",BUSINESS:"bg-gray-100 text-gray-700",SPORTS:"bg-orange-100 text-orange-700",ARTS:"bg-purple-100 text-purple-700",MUSIC:"bg-red-100 text-red-700",FOOD:"bg-amber-100 text-amber-700",LIFESTYLE:"bg-teal-100 text-teal-700",OTHER:"bg-slate-100 text-slate-700"};return r[e]||r.OTHER}function u0e({event:e,poll:r,isLoadingPoll:s=!1,isNotifying:n=!1,canEdit:a=!0,canDelete:l=!0,onCreatePoll:d,onEditPoll:h,onDeletePoll:f,onViewStats:x,onViewPoll:p,onNotifyUsers:b}){const S=!!r,T=c0e(e.mode);return t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"relative h-36 bg-gradient-to-br from-gray-100 to-gray-200",children:[e.thumbnail?.imageUrl||e.imageUrls?.[0]?t.jsx("img",{src:e.thumbnail?.imageUrl||e.imageUrls?.[0],alt:e.name,className:"w-full h-full object-cover",onError:A=>{A.target.style.display="none"}}):t.jsx("div",{className:"w-full h-full flex items-center justify-center bg-linear-to-br from-gray-50 to-gray-100",children:t.jsx(Xt,{className:"h-12 w-12 text-gray-300"})}),t.jsx("div",{className:"absolute top-2 right-2",children:s?t.jsx("span",{className:"px-2.5 py-1 text-xs font-medium bg-white/90 text-gray-600 rounded-full shadow-sm animate-pulse",children:"Loading..."}):S?t.jsx("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm ${r.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:r.isActive?"Poll Active":"Poll Closed"}):t.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold bg-yellow-500 text-white rounded-full shadow-sm",children:"No Poll"})}),t.jsx("div",{className:"absolute top-2 left-2",children:t.jsx("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm ${e.isLive?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:e.isLive?"Live":"Not Live"})})]}),t.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-1 text-base",title:e.name,children:e.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:[t.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-md ${d0e(e.category)}`,children:e.category}),t.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[t.jsx(T,{className:"h-3 w-3"}),e.mode]})]})]}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.jsx(Xt,{className:"h-4 w-4 text-gray-400 shrink-0"}),t.jsx("span",{children:o0e(e.startDate)})]}),S&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.jsx(C0,{className:"h-4 w-4 text-gray-400 shrink-0"}),t.jsxs("span",{children:[r.questions?.length||0," question",r.questions?.length!==1?"s":""]})]})]}),t.jsx("div",{className:"mt-auto pt-3 border-t border-gray-100",children:S?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>p(e,r),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",title:"View Poll",children:[t.jsx(Or,{className:"h-4 w-4"}),"View"]}),t.jsxs("button",{onClick:()=>x(e,r),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-blue-700 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors",title:"View Statistics",children:[t.jsx(Ga,{className:"h-4 w-4"}),"Stats"]})]}),(a||l)&&t.jsxs("div",{className:"flex items-center gap-2",children:[a&&t.jsxs("button",{onClick:()=>h(e,r),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",title:"Edit Poll",children:[t.jsx(zP,{className:"h-4 w-4"}),"Edit"]}),l&&t.jsxs("button",{onClick:()=>f(e,r),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-red-200",title:"Delete Poll",children:[t.jsx(ir,{className:"h-4 w-4"}),"Delete"]})]}),a&&t.jsxs("button",{onClick:()=>b(e,r),disabled:n,className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-amber-700 bg-amber-50 hover:bg-amber-100 rounded-lg transition-colors border border-amber-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Send push notification to enrolled users",children:[t.jsx(ix,{className:`h-4 w-4 ${n?"animate-pulse":""}`}),n?"Sending...":"Notify Users"]})]}):a&&t.jsxs("button",{onClick:()=>d(e),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-gray-800 hover:bg-gray-900 rounded-lg transition-colors",children:[t.jsx(fr,{className:"h-4 w-4"}),"Create Poll"]})})]})]})}function JD(e){return e?new Date(e).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"N/A"}function h0e({isOpen:e,onClose:r,poll:s,event:n}){return s?t.jsx(Pt,{isOpen:e,onClose:r,title:"Poll Details",size:"2xl",children:t.jsxs("div",{className:"space-y-6",children:[n&&t.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Xt,{className:"h-5 w-5 text-blue-600 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-blue-900",children:n.name}),t.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:[n.category,"  ",n.mode]})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(ar,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Status"})]}),t.jsx("span",{className:`inline-flex px-2 py-1 text-sm font-medium rounded-full ${s.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:s.isActive?"Active":"Closed"})]}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(C0,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Questions"})]}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:s.questions?.length||0})]}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(dr,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Created"})]}),t.jsx("p",{className:"text-sm text-gray-900",children:JD(s.createdAt)})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Questions & Options"}),s.questions?.length===0?t.jsxs("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg text-center",children:[t.jsx(C0,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-600 font-medium",children:"No questions"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This poll has no questions configured."})]}):s.questions?.map((a,l)=>t.jsxs("div",{className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[t.jsx("span",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 text-gray-600 font-semibold text-sm rounded-lg",children:l+1}),t.jsx("h4",{className:"font-medium text-gray-900 pt-1",children:a.questionText})]}),t.jsxs("div",{className:"ml-11 space-y-2",children:[t.jsxs("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:["Options (",a.options?.length||0,")"]}),a.options?.map((d,h)=>t.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center bg-white border border-gray-200 text-gray-500 text-xs font-medium rounded-full",children:String.fromCharCode(65+h)}),t.jsx("span",{className:"text-sm text-gray-700",children:d})]},h))]})]},l))]}),t.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[t.jsxs("p",{className:"text-xs text-gray-400",children:["Poll ID: ",t.jsx("code",{className:"bg-gray-100 px-1 py-0.5 rounded",children:s._id})]}),s.updatedAt&&s.updatedAt!==s.createdAt&&t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Last updated: ",JD(s.updatedAt)]})]}),t.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:t.jsx("button",{onClick:r,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"})})]})}):null}function m0e({percentage:e,color:r="blue"}){const s={blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",orange:"bg-orange-500",pink:"bg-pink-500",cyan:"bg-cyan-500",indigo:"bg-indigo-500",amber:"bg-amber-500"};return t.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full ${s[r]||s.blue} rounded-full transition-all duration-500 ease-out`,style:{width:`${Math.min(100,e)}%`}})})}const f0e=e=>{const r=["blue","green","purple","orange","pink","cyan","indigo","amber"];return r[e%r.length]};function g0e({isOpen:e,onClose:r,poll:s,stats:n,isLoading:a=!1,error:l=null,onFetchStats:d}){return v.useEffect(()=>{e&&s&&d&&(console.log("[PollStatsModal] Fetching stats for poll:",s._id),d(s._id))},[e,s,d]),s?t.jsx(Pt,{isOpen:e,onClose:r,title:"Poll Statistics",size:"2xl",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Poll Overview"}),t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:s.isActive?"Active":"Closed"})]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[s.questions?.length||0," question(s)"]})]}),l&&t.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:t.jsx("p",{className:"text-sm",children:l})}),a&&t.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(st,{className:"h-8 w-8 animate-spin text-gray-400"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading statistics..."})]}),!a&&n&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[t.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(tn,{className:"h-5 w-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-blue-900",children:n.totalSubmissions||0}),t.jsx("p",{className:"text-sm text-blue-700",children:"Total Submissions"})]})]})}),t.jsx("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:t.jsx(ar,{className:"h-5 w-5 text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-green-900",children:n.questions?.length||0}),t.jsx("p",{className:"text-sm text-green-700",children:"Questions"})]})]})}),t.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:t.jsx(Ga,{className:"h-5 w-5 text-purple-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-purple-900",children:n.questions?.reduce((h,f)=>h+(f.options?.length||0),0)||0}),t.jsx("p",{className:"text-sm text-purple-700",children:"Total Options"})]})]})})]}),n.totalSubmissions===0&&t.jsxs("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg text-center",children:[t.jsx(Ga,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-600 font-medium",children:"No submissions yet"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Statistics will appear once users start submitting their answers."})]}),n.totalSubmissions>0&&n.questions?.map((h,f)=>t.jsxs("div",{className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("span",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 text-gray-600 font-semibold text-sm rounded-lg",children:f+1}),t.jsx("h4",{className:"font-medium text-gray-900 pt-1",children:h.questionText})]}),t.jsx("div",{className:"space-y-3 ml-11",children:h.options?.map((x,p)=>t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-700",children:x.optionText}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:x.count||0}),t.jsxs("span",{className:"text-sm text-gray-500",children:["(",(x.percentage||0).toFixed(1),"%)"]})]})]}),t.jsx(m0e,{percentage:x.percentage||0,color:f0e(p)})]},p))})]},f))]}),!a&&!n&&!l&&t.jsxs("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg text-center",children:[t.jsx(Ga,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-600 font-medium",children:"No statistics available"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Statistics could not be loaded for this poll."})]}),t.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:t.jsx("button",{onClick:r,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"})})]})}):null}function x0e(){const{hasRole:e}=vn(),r=e(["SUPER_ADMIN","ADMIN"]),s=e(["SUPER_ADMIN","ADMIN"]),n=e(["SUPER_ADMIN","ADMIN"]),[a,l]=v.useState([]),[d,h]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:12}),[f,x]=v.useState(!1),[p,b]=v.useState(null),[S,T]=v.useState({}),[A,P]=v.useState({}),[D,I]=v.useState({}),[L,_]=v.useState(""),[$,F]=v.useState(!1),[B,M]=v.useState("all"),[V,z]=v.useState("grid"),[H,U]=v.useState(!1),[G,Q]=v.useState(!1),[ce,ne]=v.useState(!1),[J,W]=v.useState(!1),[le,ge]=v.useState(!1),[re,X]=v.useState(null),[ae,ve]=v.useState(null),[fe,se]=v.useState(null),[oe,he]=v.useState(!1),[Ve,Ce]=v.useState(null),[Ke,xe]=v.useState(!1),[Ee,pe]=v.useState(null),[Fe,me]=v.useState(null),Ge=v.useRef(null),Te=v.useCallback(async(Ae=1)=>{x(!0),b(null);try{const tt={page:Ae,limit:d.limit,sortBy:"createdAt",sortOrder:"desc"};L.trim()&&(tt.search=L.trim()),console.log("[Polls] Fetching events with params:",tt);const lt=await Va.getAll(tt);if(lt.success){l(lt.data.events||[]),h({currentPage:lt.data.pagination?.currentPage||1,totalPages:lt.data.pagination?.totalPages||0,totalCount:lt.data.pagination?.totalCount||0,limit:lt.data.pagination?.limit||12});const Ct=(lt.data.events||[]).map(jr=>jr._id);at(Ct)}else b(lt.message||"Failed to fetch events"),console.error("[Polls] Failed to fetch events:",lt.message)}catch(tt){b("An unexpected error occurred"),console.error("[Polls] Error fetching events:",tt)}finally{x(!1)}},[L,d.limit]),at=v.useCallback(async Ae=>{const tt=Ae.map(async lt=>{if(S[lt]===void 0){P(Ct=>({...Ct,[lt]:!0}));try{const Ct=await Jd.getByEventId(lt);Ct.success?T(jr=>({...jr,[lt]:Ct.data})):T(jr=>({...jr,[lt]:null}))}catch(Ct){console.error(`[Polls] Error fetching poll for event ${lt}:`,Ct),T(jr=>({...jr,[lt]:null}))}finally{P(Ct=>({...Ct,[lt]:!1}))}}});await Promise.all(tt)},[S]);v.useEffect(()=>{Te(1)},[]);const dt=v.useCallback(Ae=>{_(Ae),Ge.current&&clearTimeout(Ge.current),Ge.current=setTimeout(()=>{Te(1)},300)},[Te]),Nt=v.useCallback(Ae=>{Te(Ae),window.scrollTo({top:0,behavior:"smooth"})},[Te]),Qe=v.useCallback(()=>{T({}),Te(d.currentPage)},[Te,d.currentPage]),ct=a.filter(Ae=>{if(B==="all")return!0;const tt=S[Ae._id]!==null&&S[Ae._id]!==void 0;return B==="with-poll"?tt:B==="without-poll"?!tt:!0}),ze=v.useCallback(Ae=>{X(Ae),ve(null),pe(null),U(!0),console.log("[Polls] Opening create modal for event:",Ae.name)},[]),ft=v.useCallback((Ae,tt)=>{X(Ae),ve(tt),pe(null),Q(!0),console.log("[Polls] Opening edit modal for poll:",tt._id)},[]),Kt=v.useCallback((Ae,tt)=>{X(Ae),ve(tt),ne(!0),console.log("[Polls] Opening details modal for poll:",tt._id)},[]),lr=v.useCallback((Ae,tt)=>{X(Ae),ve(tt),se(null),Ce(null),W(!0),console.log("[Polls] Opening stats modal for poll:",tt._id)},[]),ys=v.useCallback(async Ae=>{he(!0),Ce(null);try{const tt=await Jd.getStats(Ae);tt.success?se(tt.data):Ce(tt.message||"Failed to fetch statistics")}catch(tt){Ce("An unexpected error occurred"),console.error("[Polls] Error fetching stats:",tt)}finally{he(!1)}},[]),Ye=v.useCallback((Ae,tt)=>{X(Ae),ve(tt),ge(!0),console.log("[Polls] Opening delete dialog for poll:",tt._id)},[]),xt=v.useCallback(async(Ae,tt)=>{if(tt?._id){I(lt=>({...lt,[tt._id]:!0})),me(null),b(null);try{console.log("[Polls] Sending notification for poll:",tt._id);const lt=await Jd.notifyUsers(tt._id);if(lt.success){const{successCount:Ct,failureCount:jr,message:bs}=lt.data||{};me(bs||`Notification sent to ${Ct} user${Ct!==1?"s":""}${jr>0?` (${jr} failed)`:""}`),console.log("[Polls] Notification sent successfully")}else b(lt.message||"Failed to send notification"),console.error("[Polls] Failed to send notification:",lt.message)}catch(lt){b("An unexpected error occurred while sending notification"),console.error("[Polls] Error sending notification:",lt)}finally{I(lt=>({...lt,[tt._id]:!1}))}}},[]),Ur=v.useCallback(async Ae=>{xe(!0),pe(null);try{console.log("[Polls] Creating poll:",Ae);const tt=await Jd.create(Ae);tt.success?(U(!1),T(lt=>({...lt,[Ae.eventId]:tt.data})),console.log("[Polls] Poll created successfully")):(pe(tt.message||"Failed to create poll"),console.error("[Polls] Failed to create poll:",tt.message))}catch(tt){pe("An unexpected error occurred"),console.error("[Polls] Error creating poll:",tt)}finally{xe(!1)}},[]),Ir=v.useCallback(async Ae=>{if(ae){xe(!0),pe(null);try{console.log("[Polls] Updating poll:",ae._id,Ae);const tt=await Jd.update(ae._id,Ae);tt.success?(Q(!1),re&&T(lt=>({...lt,[re._id]:tt.data})),X(null),ve(null),console.log("[Polls] Poll updated successfully")):(pe(tt.message||"Failed to update poll"),console.error("[Polls] Failed to update poll:",tt.message))}catch(tt){pe("An unexpected error occurred"),console.error("[Polls] Error updating poll:",tt)}finally{xe(!1)}}},[ae,re]),Cr=v.useCallback(async()=>{if(ae){xe(!0);try{console.log("[Polls] Deleting poll:",ae._id);const Ae=await Jd.delete(ae._id);Ae.success?(ge(!1),re&&T(tt=>({...tt,[re._id]:null})),X(null),ve(null),console.log("[Polls] Poll deleted successfully")):(b(Ae.message||"Failed to delete poll"),console.error("[Polls] Failed to delete poll:",Ae.message))}catch(Ae){b("An unexpected error occurred"),console.error("[Polls] Error deleting poll:",Ae)}finally{xe(!1)}}},[ae,re]),_t=v.useCallback(()=>b(null),[]);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Polls"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Create and manage polls for your events"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:Qe,disabled:f,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Refresh events and polls",children:[t.jsx(ms,{className:`h-4 w-4 ${f?"animate-spin":""}`}),t.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),t.jsxs("div",{className:"flex items-center bg-white border border-gray-300 rounded-lg overflow-hidden",children:[t.jsx("button",{onClick:()=>z("grid"),className:`p-2 transition-colors ${V==="grid"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"Grid view",children:t.jsx(FP,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>z("list"),className:`p-2 transition-colors ${V==="list"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"List view",children:t.jsx(Cj,{className:"h-4 w-4"})})]})]})]}),p&&t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5 shrink-0"}),t.jsx("p",{className:"flex-1",children:p}),t.jsx("button",{onClick:_t,className:"text-red-500 hover:text-red-700 font-medium",children:"Dismiss"})]}),Fe&&t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg",children:[t.jsx(ix,{className:"h-5 w-5 shrink-0"}),t.jsx("p",{className:"flex-1",children:Fe}),t.jsx("button",{onClick:()=>me(null),className:"text-green-500 hover:text-green-700 font-medium",children:"Dismiss"})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:L,onChange:Ae=>dt(Ae.target.value),placeholder:"Search events...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),L&&t.jsx("button",{onClick:()=>{_(""),Te(1)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(ss,{className:"h-4 w-4"})})]}),t.jsxs("button",{onClick:()=>F(!$),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${$||B!=="all"?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`,children:[t.jsx(Fn,{className:"h-4 w-4"}),t.jsx("span",{children:"Filters"}),B!=="all"&&t.jsx("span",{className:"w-2 h-2 bg-white rounded-full"})]})]}),$&&t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Poll Status:"}),t.jsx("div",{className:"flex gap-2",children:[{value:"all",label:"All Events"},{value:"with-poll",label:"With Poll"},{value:"without-poll",label:"Without Poll"}].map(Ae=>t.jsx("button",{onClick:()=>M(Ae.value),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${B===Ae.value?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Ae.label},Ae.value))}),B!=="all"&&t.jsx("button",{onClick:()=>M("all"),className:"text-sm text-gray-500 hover:text-gray-700",children:"Reset"})]})})]}),f&&a.length===0?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[...Array(8)].map((Ae,tt)=>t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden animate-pulse",children:[t.jsx("div",{className:"h-32 bg-gray-200"}),t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),t.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})]},tt))}):ct.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:t.jsx(br,{className:"h-8 w-8 text-gray-400"})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No events found"}),t.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:L||B!=="all"?"Try adjusting your search or filter criteria.":"Create an event first to add polls."})]}):V==="grid"?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:ct.map(Ae=>t.jsx(u0e,{event:Ae,poll:S[Ae._id],isLoadingPoll:A[Ae._id],isNotifying:D[S[Ae._id]?._id],canEdit:s,canDelete:n,onCreatePoll:ze,onEditPoll:ft,onDeletePoll:Ye,onViewStats:lr,onViewPoll:Kt,onNotifyUsers:xt},Ae._id))}):t.jsx("div",{className:"space-y-3",children:ct.map(Ae=>t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 flex items-center gap-4",children:[t.jsx("div",{className:"shrink-0 w-20 h-20 rounded-lg overflow-hidden bg-gray-100",children:Ae.thumbnail?.imageUrl||Ae.imageUrls?.[0]?t.jsx("img",{src:Ae.thumbnail?.imageUrl||Ae.imageUrls?.[0],alt:Ae.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx("span",{className:"text-gray-300 text-2xl",children:"E"})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:Ae.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:[Ae.category,"  ",Ae.mode]}),t.jsx("div",{className:"flex items-center gap-2 mt-1",children:S[Ae._id]?t.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${S[Ae._id].isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:S[Ae._id].isActive?"Poll Active":"Poll Closed"}):t.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-yellow-100 text-yellow-700",children:"No Poll"})})]}),t.jsx("div",{className:"flex items-center gap-2",children:S[Ae._id]?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>lr(Ae,S[Ae._id]),className:"px-3 py-1.5 text-sm text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:"Stats"}),s&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>ft(Ae,S[Ae._id]),className:"px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:"Edit"}),t.jsxs("button",{onClick:()=>xt(Ae,S[Ae._id]),disabled:D[S[Ae._id]?._id],className:"flex items-center gap-1 px-3 py-1.5 text-sm text-amber-600 bg-amber-50 hover:bg-amber-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Send push notification to enrolled users",children:[t.jsx(ix,{className:`h-4 w-4 ${D[S[Ae._id]?._id]?"animate-pulse":""}`}),D[S[Ae._id]?._id]?"Sending...":"Notify"]})]}),n&&t.jsx("button",{onClick:()=>Ye(Ae,S[Ae._id]),className:"px-3 py-1.5 text-sm text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors",children:"Delete"})]}):r&&t.jsx("button",{onClick:()=>ze(Ae),className:"px-3 py-1.5 text-sm text-white bg-gray-800 hover:bg-gray-900 rounded-lg transition-colors",children:"Create Poll"})})]},Ae._id))}),d.totalPages>1&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsx(vr,{currentPage:d.currentPage,totalPages:d.totalPages,totalItems:d.totalCount,itemsPerPage:d.limit,onPageChange:Nt,itemLabel:"events"})}),t.jsx(QD,{isOpen:H,onClose:()=>{U(!1),X(null)},onSubmit:Ur,poll:null,event:re,isLoading:Ke,serverError:Ee}),t.jsx(QD,{isOpen:G,onClose:()=>{Q(!1),X(null),ve(null)},onSubmit:Ir,poll:ae,event:re,isLoading:Ke,serverError:Ee}),t.jsx(h0e,{isOpen:ce,onClose:()=>{ne(!1),X(null),ve(null)},poll:ae,event:re}),t.jsx(g0e,{isOpen:J,onClose:()=>{W(!1),X(null),ve(null),se(null)},poll:ae,stats:fe,isLoading:oe,error:Ve,onFetchStats:ys}),t.jsx(xs,{isOpen:le,onClose:()=>{ge(!1),X(null),ve(null)},onConfirm:Cr,title:"Delete Poll",message:`Are you sure you want to delete the poll for "${re?.name}"? This will also delete all associated submissions. This action cannot be undone.`,confirmText:"Delete Poll",cancelText:"Cancel",variant:"danger",isLoading:Ke})]})}const Fa={BASE:"/web/stories",STATS:"/web/stories/stats",TTL_OPTIONS:"/web/stories/ttl-options",REORDER:"/web/stories/reorder"},zi={create:async e=>(console.log("[StoryService] Creating story"),Se(je.post(Fa.BASE,e))),getAll:async(e={})=>{console.log("[StoryService] Fetching stories:",e);const r=new URLSearchParams;e.page&&r.append("page",e.page),e.limit&&r.append("limit",e.limit),e.includeExpired!==void 0&&r.append("includeExpired",e.includeExpired);const s=`${Fa.BASE}?${r.toString()}`;return Se(je.get(s))},getById:async e=>(console.log("[StoryService] Fetching story:",e),Se(je.get(`${Fa.BASE}/${e}`))),update:async(e,r)=>(console.log("[StoryService] Updating story:",e),Se(je.put(`${Fa.BASE}/${e}`,r))),toggleActive:async e=>(console.log("[StoryService] Toggling story status:",e),Se(je.patch(`${Fa.BASE}/${e}/toggle`))),delete:async(e,r=!1)=>{console.log("[StoryService] Deleting story:",e);const s=r?`${Fa.BASE}/${e}?deleteMedia=true`:`${Fa.BASE}/${e}`;return Se(je.delete(s))},permanentDelete:async(e,r=!0)=>{console.log("[StoryService] Permanently deleting story:",e);const s=r?`${Fa.BASE}/${e}/permanent`:`${Fa.BASE}/${e}/permanent?deleteMedia=false`;return Se(je.delete(s))},reorder:async e=>(console.log("[StoryService] Reordering stories"),Se(je.put(Fa.REORDER,{order:e}))),getStats:async()=>(console.log("[StoryService] Fetching story stats"),Se(je.get(Fa.STATS))),getTtlOptions:async()=>(console.log("[StoryService] Fetching TTL options"),Se(je.get(Fa.TTL_OPTIONS)))},h9=[{value:"1_hour",label:"1 hour"},{value:"6_hours",label:"6 hours"},{value:"12_hours",label:"12 hours"},{value:"1_day",label:"1 day"},{value:"3_days",label:"3 days"},{value:"7_days",label:"7 days"},{value:"30_days",label:"30 days"},{value:"forever",label:"Forever"}],p0e=[{value:"image",label:"Image"},{value:"video",label:"Video"}],y0e=[{value:"createdAt",label:"Created Date"},{value:"displayOrder",label:"Display Order"},{value:"viewCount",label:"View Count"},{value:"expiresAt",label:"Expiry Date"}],eO={search:"",mediaType:"",isActive:"",includeExpired:!1,sortBy:"displayOrder",sortOrder:"asc"};function b0e(e={}){const[r,s]=v.useState([]),[n,a]=v.useState({page:1,totalPages:0,total:0,limit:20}),[l,d]=v.useState({...eO,...e}),[h,f]=v.useState(!1),[x,p]=v.useState(null),[b,S]=v.useState(null),[T,A]=v.useState(!1),[P,D]=v.useState(h9),I=v.useRef(null),L=v.useCallback(async(re=n.page)=>{console.log("[useStoriesManagement] Fetching stories"),f(!0),p(null);try{const X={page:re,limit:n.limit,includeExpired:l.includeExpired},ae=await zi.getAll(X);if(ae.success){let ve=ae.data.stories||[];if(l.mediaType&&(ve=ve.filter(fe=>fe.mediaType===l.mediaType)),l.isActive!==""){const fe=l.isActive==="true";ve=ve.filter(se=>se.isActive===fe)}if(l.search){const fe=l.search.toLowerCase();ve=ve.filter(se=>se.title?.toLowerCase().includes(fe)||se.mediaType?.toLowerCase().includes(fe))}ve.sort((fe,se)=>{const oe=fe[l.sortBy],he=se[l.sortBy],Ve=l.sortOrder==="asc"?1:-1;return typeof oe=="string"?oe.localeCompare(he)*Ve:oe instanceof Date||l.sortBy.includes("At")?(new Date(oe)-new Date(he))*Ve:((oe||0)-(he||0))*Ve}),s(ve),a(fe=>({...fe,...ae.data.pagination}))}else p(ae.message),s([])}catch(X){console.error("[useStoriesManagement] Error fetching stories:",X),p("Failed to fetch stories"),s([])}finally{f(!1)}},[l,n.limit,n.page]),_=v.useCallback(async()=>{console.log("[useStoriesManagement] Fetching stats"),A(!0);try{const re=await zi.getStats();re.success&&S(re.data)}catch(re){console.error("[useStoriesManagement] Error fetching stats:",re)}finally{A(!1)}},[]),$=v.useCallback(async()=>{try{const re=await zi.getTtlOptions();re.success&&re.data.options&&D(re.data.options)}catch(re){console.error("[useStoriesManagement] Error fetching TTL options:",re)}},[]),F=v.useCallback(async re=>{try{const X=await zi.getById(re);return X.success?{success:!0,data:X.data}:{success:!1,error:X.message}}catch{return{success:!1,error:"Failed to fetch story details"}}},[]),B=v.useCallback(async re=>{console.log("[useStoriesManagement] Creating story"),f(!0),p(null);try{const X=await zi.create(re);return X.success?(await L(1),await _(),{success:!0,data:X.data}):{success:!1,error:X.message,validationErrors:X.data?.errors}}catch{return{success:!1,error:"Failed to create story"}}finally{f(!1)}},[L,_]),M=v.useCallback(async(re,X)=>{console.log("[useStoriesManagement] Updating story:",re),f(!0),p(null);try{const ae=await zi.update(re,X);return ae.success?(s(ve=>ve.map(fe=>fe._id===re?{...fe,...ae.data}:fe)),{success:!0,data:ae.data}):{success:!1,error:ae.message,validationErrors:ae.data?.errors}}catch{return{success:!1,error:"Failed to update story"}}finally{f(!1)}},[]),V=v.useCallback(async re=>{console.log("[useStoriesManagement] Toggling story status:",re);try{const X=await zi.toggleActive(re);return X.success?(s(ae=>ae.map(ve=>ve._id===re?{...ve,isActive:X.data.isActive}:ve)),{success:!0,data:X.data}):{success:!1,error:X.message}}catch{return{success:!1,error:"Failed to toggle story status"}}},[]),z=v.useCallback(async(re,X=!1)=>{console.log("[useStoriesManagement] Deleting story:",re),f(!0),p(null);try{const ae=await zi.delete(re,X);return ae.success?(s(ve=>ve.filter(fe=>fe._id!==re)),a(ve=>({...ve,total:ve.total-1,totalPages:Math.ceil((ve.total-1)/ve.limit)})),await _(),{success:!0}):{success:!1,error:ae.message}}catch{return{success:!1,error:"Failed to delete story"}}finally{f(!1)}},[_]),H=v.useCallback(async(re,X=!0)=>{console.log("[useStoriesManagement] Permanently deleting story:",re),f(!0),p(null);try{const ae=await zi.permanentDelete(re,X);return ae.success?(s(ve=>ve.filter(fe=>fe._id!==re)),a(ve=>({...ve,total:ve.total-1,totalPages:Math.ceil((ve.total-1)/ve.limit)})),await _(),{success:!0}):{success:!1,error:ae.message}}catch{return{success:!1,error:"Failed to permanently delete story"}}finally{f(!1)}},[_]),U=v.useCallback(async re=>{console.log("[useStoriesManagement] Reordering stories");try{const X=await zi.reorder(re);return X.success?(s(ae=>{const ve=new Map(re.map(fe=>[fe.storyId,fe.displayOrder]));return[...ae].map(fe=>({...fe,displayOrder:ve.get(fe._id)??fe.displayOrder})).sort((fe,se)=>fe.displayOrder-se.displayOrder)}),{success:!0}):{success:!1,error:X.message}}catch{return{success:!1,error:"Failed to reorder stories"}}},[]),G=v.useCallback(re=>{d(X=>({...X,...re}))},[]),Q=v.useCallback(re=>{I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{d(X=>({...X,search:re}))},300)},[]),ce=v.useCallback(()=>{d({...eO,...e})},[e]),ne=v.useCallback(re=>{L(re)},[L]),J=v.useCallback(re=>{a(X=>({...X,limit:re}))},[]),W=v.useCallback(()=>{d(re=>({...re,includeExpired:!re.includeExpired}))},[]),le=v.useCallback(()=>{p(null)},[]),ge=v.useCallback(()=>{L(1),_()},[L,_]);return v.useEffect(()=>{L(1)},[l]),v.useEffect(()=>{_(),$()},[_,$]),v.useEffect(()=>()=>{I.current&&clearTimeout(I.current)},[]),{stories:r,pagination:n,filters:l,isLoading:h,error:x,stats:b,isLoadingStats:T,ttlOptions:P,fetchStories:L,fetchStats:_,getStoryById:F,createStory:B,updateStory:M,toggleStoryActive:V,deleteStory:z,permanentDeleteStory:H,reorderStories:U,updateFilters:G,updateSearch:Q,resetFilters:ce,toggleIncludeExpired:W,changePage:ne,changeLimit:J,clearError:le,refresh:ge}}const tO=(e=null)=>({mediaUrl:e?.mediaUrl||"",mediaType:e?.mediaType||"image",title:e?.title||"",cloudinaryPublicId:e?.cloudinaryPublicId||"",ttl:e?.ttl||"1_day",displayOrder:e?.displayOrder??0,isActive:e?.isActive??!0}),v0e=(e,r=!1)=>{const s={};if(e.mediaUrl?.trim()?/^https?:\/\/.+/.test(e.mediaUrl)||(s.mediaUrl="Invalid media URL"):s.mediaUrl="Media is required",e.mediaType?["image","video"].includes(e.mediaType)||(s.mediaType="Invalid media type"):s.mediaType="Media type is required",e.title&&e.title.length>500&&(s.title="Title must be 500 characters or less"),e.ttl||(s.ttl="Time to live is required"),e.displayOrder!==void 0&&e.displayOrder!==""){const n=parseInt(e.displayOrder,10);(isNaN(n)||n<0)&&(s.displayOrder="Display order must be a non-negative number")}return{isValid:Object.keys(s).length===0,errors:s}},N0e=e=>e&&/\.(mp4|webm|ogg|mov|avi)(\?.*)?$/i.test(e)?"video":"image",j0e=e=>{if(!e||!e.includes("cloudinary.com"))return"";const r=e.match(/\/upload\/(?:v\d+\/)?(.+?)(?:\.[^.]+)?$/);return r?r[1]:""};function rO({isOpen:e,onClose:r,onSubmit:s,story:n=null,ttlOptions:a=h9,isLoading:l=!1,serverError:d=null}){const h=!!n,[f,x]=v.useState(tO(n)),[p,b]=v.useState({});v.useEffect(()=>{e&&(x(tO(n)),b({}),console.log("[StoryForm] Form initialized:",{isEditMode:h,story:n?._id}))},[e,n]);const S=(I,L)=>{x(_=>({..._,[I]:L})),p[I]&&b(_=>{const $={..._};return delete $[I],$})},T=I=>{const L=N0e(I),_=j0e(I);x($=>({...$,mediaUrl:I,mediaType:L,cloudinaryPublicId:_})),p.mediaUrl&&b($=>{const F={...$};return delete F.mediaUrl,F})},A=()=>{x(I=>({...I,isActive:!I.isActive}))},P=async I=>{I.preventDefault();const L=v0e(f,h);if(!L.isValid){b(L.errors),console.log("[StoryForm] Validation failed:",L.errors);return}const _={mediaUrl:f.mediaUrl.trim(),mediaType:f.mediaType,ttl:f.ttl,displayOrder:parseInt(f.displayOrder,10)||0};f.title?.trim()&&(_.title=f.title.trim()),f.cloudinaryPublicId&&(_.cloudinaryPublicId=f.cloudinaryPublicId),h&&(_.isActive=f.isActive),console.log("[StoryForm] Submitting:",{isEditMode:h,storyId:n?._id}),await s(_)},D=()=>{l||r()};return t.jsx(Pt,{isOpen:e,onClose:D,title:h?"Edit Story":"Create Story",size:"xl",closeOnOverlayClick:!l,children:t.jsxs("form",{onSubmit:P,className:"space-y-6",children:[d&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:d}),t.jsx("div",{children:t.jsx(ba,{label:"Media",required:!0,value:f.mediaUrl,onUpload:T,folder:"stories",type:"any",maxSize:50*1024*1024,placeholder:"Upload image or video for story",error:p.mediaUrl,disabled:l,showUrlInput:!0})}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Media Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{type:"button",onClick:()=>S("mediaType","image"),disabled:l,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${f.mediaType==="image"?"border-gray-800 bg-gray-800 text-white":"border-gray-300 text-gray-600 hover:border-gray-400"} disabled:opacity-50`,children:[t.jsx(Xo,{className:"h-5 w-5"}),t.jsx("span",{className:"font-medium",children:"Image"})]}),t.jsxs("button",{type:"button",onClick:()=>S("mediaType","video"),disabled:l,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${f.mediaType==="video"?"border-gray-800 bg-gray-800 text-white":"border-gray-300 text-gray-600 hover:border-gray-400"} disabled:opacity-50`,children:[t.jsx(qi,{className:"h-5 w-5"}),t.jsx("span",{className:"font-medium",children:"Video"})]})]}),p.mediaType&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:p.mediaType})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title / Caption",t.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),t.jsx("textarea",{value:f.title,onChange:I=>S("title",I.target.value),disabled:l,maxLength:500,rows:3,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none disabled:bg-gray-100 ${p.title?"border-red-500":"border-gray-300"}`,placeholder:"Add a caption for this story..."}),t.jsxs("div",{className:"flex justify-between mt-1",children:[p.title?t.jsx("p",{className:"text-sm text-red-500",children:p.title}):t.jsx("span",{}),t.jsxs("span",{className:"text-xs text-gray-400",children:[f.title.length,"/500"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t.jsx(dr,{className:"inline h-4 w-4 mr-1"}),"Time to Live ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("select",{value:f.ttl,onChange:I=>S("ttl",I.target.value),disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${p.ttl?"border-red-500":"border-gray-300"}`,children:a.map(I=>t.jsx("option",{value:I.value,children:I.label},I.value))}),p.ttl&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:p.ttl})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t.jsx(Sj,{className:"inline h-4 w-4 mr-1"}),"Display Order"]}),t.jsx("input",{type:"number",value:f.displayOrder,onChange:I=>S("displayOrder",I.target.value),disabled:l,min:0,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${p.displayOrder?"border-red-500":"border-gray-300"}`,placeholder:"0"}),p.displayOrder&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:p.displayOrder}),t.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Lower numbers appear first"})]})]}),h&&t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:"Story Status"}),t.jsx("p",{className:"text-sm text-gray-500",children:f.isActive?"Story is visible to users":"Story is hidden from users"})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:f.isActive,onChange:A,disabled:l,className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:D,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[l&&t.jsx(st,{className:"h-4 w-4 animate-spin"}),h?"Update Story":"Create Story"]})]})]})})}function w0e(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function S0e(e){if(!e)return"N/A";const n=new Date(e)-new Date;if(n<0)return"Expired";const a=Math.floor(n/(1e3*60*60)),l=Math.floor(a/24);return l>0?`${l}d ${a%24}h left`:a>0?`${a}h left`:`${Math.floor(n/(1e3*60))}m left`}function C0e(e){return{"1_hour":"1 hour","6_hours":"6 hours","12_hours":"12 hours","1_day":"1 day","3_days":"3 days","7_days":"7 days","30_days":"30 days",forever:"Forever"}[e]||e}function A0e(e,r){return r==="forever"||!e?!1:new Date(e)<new Date}function E0e({story:e,canEdit:r=!0,canDelete:s=!0,isToggling:n=!1,onView:a,onEdit:l,onDelete:d,onToggleActive:h,draggable:f=!1,dragHandleProps:x={}}){const p=A0e(e.expiresAt,e.ttl),b=e.mediaType==="video";return t.jsxs("div",{className:`bg-white rounded-xl border shadow-sm hover:shadow-md transition-all overflow-hidden flex flex-col ${p?"border-orange-200 bg-orange-50/30":"border-gray-200"}`,children:[t.jsxs("div",{className:"relative h-48 sm:h-56 bg-gradient-to-br from-gray-100 to-gray-200",children:[b?t.jsxs("div",{className:"w-full h-full relative",children:[t.jsx("video",{src:e.mediaUrl,className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata",onError:S=>{S.target.style.display="none",S.target.nextElementSibling?.classList.remove("hidden")}}),t.jsx("div",{className:"hidden w-full h-full flex items-center justify-center bg-gray-100",children:t.jsx(qi,{className:"h-12 w-12 text-gray-300"})}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:t.jsx("div",{className:"w-14 h-14 rounded-full bg-white/90 flex items-center justify-center shadow-lg",children:t.jsx(VP,{className:"h-6 w-6 text-gray-800 ml-1"})})})]}):t.jsxs(t.Fragment,{children:[t.jsx("img",{src:e.mediaUrl,alt:e.title||"Story",className:"w-full h-full object-cover",onError:S=>{S.target.style.display="none",S.target.nextElementSibling?.classList.remove("hidden")}}),t.jsx("div",{className:"hidden w-full h-full flex items-center justify-center bg-gray-100",children:t.jsx(Xo,{className:"h-12 w-12 text-gray-300"})})]}),f&&t.jsx("div",{...x,className:"absolute top-2 left-2 p-1.5 bg-white/90 rounded-lg shadow-sm cursor-grab active:cursor-grabbing",children:t.jsx(Np,{className:"h-4 w-4 text-gray-500"})}),t.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[t.jsx("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm ${e.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:e.isActive?"Active":"Inactive"}),p&&t.jsxs("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm bg-orange-500 text-white flex items-center gap-1",children:[t.jsx(wp,{className:"h-3 w-3"}),"Expired"]})]}),t.jsx("div",{className:"absolute bottom-2 left-2",children:t.jsxs("span",{className:"px-2.5 py-1 text-xs font-medium bg-black/60 text-white rounded-full flex items-center gap-1",children:[b?t.jsx(qi,{className:"h-3 w-3"}):t.jsx(Xo,{className:"h-3 w-3"}),e.mediaType]})}),t.jsx("div",{className:"absolute bottom-2 right-2",children:t.jsxs("span",{className:"px-2.5 py-1 text-xs font-medium bg-black/60 text-white rounded-full flex items-center gap-1",children:[t.jsx(Or,{className:"h-3 w-3"}),e.viewCount||0]})})]}),t.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[e.title&&t.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-2 text-sm mb-2",title:e.title,children:e.title}),t.jsxs("div",{className:"space-y-1.5 mb-3 text-xs text-gray-500",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(dr,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}),t.jsxs("span",{children:["TTL: ",C0e(e.ttl)]})]}),e.ttl!=="forever"&&e.expiresAt&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(dr,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}),t.jsx("span",{className:p?"text-orange-600 font-medium":"",children:p?"Expired":S0e(e.expiresAt)})]}),t.jsx("div",{className:"flex items-center gap-2 text-gray-400",children:t.jsxs("span",{children:["Created: ",w0e(e.createdAt)]})}),t.jsx("div",{className:"flex items-center gap-2 text-gray-400",children:t.jsxs("span",{children:["Order: #",e.displayOrder]})})]}),t.jsxs("div",{className:"mt-auto pt-3 border-t border-gray-100 space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>a(e),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",title:"View Story",children:[t.jsx(Or,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"View"})]}),r&&t.jsxs("button",{onClick:()=>l(e),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",title:"Edit Story",children:[t.jsx(zP,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),s&&t.jsxs("button",{onClick:()=>d(e),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-red-200",title:"Delete Story",children:[t.jsx(ir,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]}),r&&t.jsx("button",{onClick:()=>h(e),disabled:n,className:`w-full flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-lg transition-colors border disabled:opacity-50 ${e.isActive?"text-orange-600 bg-orange-50 hover:bg-orange-100 border-orange-200":"text-green-600 bg-green-50 hover:bg-green-100 border-green-200"}`,title:e.isActive?"Deactivate Story":"Activate Story",children:e.isActive?t.jsxs(t.Fragment,{children:[t.jsx(Rl,{className:"h-4 w-4"}),n?"Processing...":"Deactivate"]}):t.jsxs(t.Fragment,{children:[t.jsx(Ki,{className:"h-4 w-4"}),n?"Processing...":"Activate"]})})]})]})]})}function sO(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function T0e(e){if(!e)return"N/A";const n=new Date(e)-new Date;if(n<0)return"Expired";const a=Math.floor(n/(1e3*60*60)),l=Math.floor(a/24);if(l>0)return`${l} day${l>1?"s":""} ${a%24} hour${a%24!==1?"s":""} remaining`;if(a>0)return`${a} hour${a!==1?"s":""} remaining`;const d=Math.floor(n/(1e3*60));return`${d} minute${d!==1?"s":""} remaining`}function D0e(e){return{"1_hour":"1 hour","6_hours":"6 hours","12_hours":"12 hours","1_day":"1 day","3_days":"3 days","7_days":"7 days","30_days":"30 days",forever:"Forever"}[e]||e}function O0e(e,r){return r==="forever"||!e?!1:new Date(e)<new Date}function Ig({label:e,value:r,icon:s,variant:n="default"}){const a={default:"bg-gray-50 border-gray-200 text-gray-600",success:"bg-green-50 border-green-200 text-green-600",warning:"bg-orange-50 border-orange-200 text-orange-600",danger:"bg-red-50 border-red-200 text-red-600",info:"bg-blue-50 border-blue-200 text-blue-600"};return t.jsxs("div",{className:`p-3 rounded-lg border ${a[n]}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(s,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium uppercase tracking-wide",children:e})]}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r})]})}function P0e({isOpen:e,onClose:r,story:s}){if(!s)return null;const n=O0e(s.expiresAt,s.ttl),a=s.mediaType==="video";return t.jsx(Pt,{isOpen:e,onClose:r,title:"Story Details",size:"2xl",children:t.jsxs("div",{className:"space-y-6",children:[n&&t.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 text-orange-700 rounded-lg flex items-center gap-2",children:[t.jsx(wp,{className:"h-5 w-5 shrink-0"}),t.jsx("span",{className:"font-medium",children:"This story has expired"})]}),t.jsxs("div",{className:"relative rounded-xl overflow-hidden bg-gray-100",children:[a?t.jsx("div",{className:"relative aspect-[9/16] sm:aspect-video max-h-96 mx-auto bg-black",children:t.jsx("video",{src:s.mediaUrl,controls:!0,className:"w-full h-full object-contain",preload:"metadata",children:"Your browser does not support the video tag."})}):t.jsx("div",{className:"relative max-h-96 flex items-center justify-center bg-gray-900",children:t.jsx("img",{src:s.mediaUrl,alt:s.title||"Story",className:"max-h-96 w-auto object-contain",onError:l=>{l.target.src="",l.target.alt="Failed to load image"}})}),t.jsx("a",{href:s.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 p-2 bg-white/90 rounded-lg shadow-sm hover:bg-white transition-colors",title:"Open in new tab",children:t.jsx(Uu,{className:"h-4 w-4 text-gray-600"})})]}),s.title&&t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Caption"}),t.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:s.title})]}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[t.jsx(Ig,{label:"Status",value:s.isActive?"Active":"Inactive",icon:s.isActive?ar:Rt,variant:s.isActive?"success":"default"}),t.jsx(Ig,{label:"Views",value:s.viewCount||0,icon:Or,variant:"info"}),t.jsx(Ig,{label:"Type",value:s.mediaType,icon:a?qi:Xo,variant:"default"}),t.jsx(Ig,{label:"Order",value:`#${s.displayOrder}`,icon:Sj,variant:"default"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-2",children:[t.jsx(dr,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Time to Live"})]}),t.jsx("p",{className:"text-gray-900 font-semibold",children:D0e(s.ttl)})]}),t.jsxs("div",{className:`p-4 rounded-lg border ${n?"bg-orange-50 border-orange-200":"bg-gray-50 border-gray-200"}`,children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-2",children:[t.jsx(dr,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:n?"Expired":"Expires"})]}),t.jsx("p",{className:`font-semibold ${n?"text-orange-700":"text-gray-900"}`,children:s.ttl==="forever"?"Never":n?sO(s.expiresAt):T0e(s.expiresAt)})]}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-2",children:[t.jsx(Xt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Created"})]}),t.jsx("p",{className:"text-gray-900 font-semibold",children:sO(s.createdAt)})]}),s.createdBy&&t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-2",children:[t.jsx(gr,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Created By"})]}),t.jsx("p",{className:"text-gray-900 font-semibold",children:typeof s.createdBy=="object"?s.createdBy.name||s.createdBy.username:s.createdBy})]})]}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500 mb-3",children:"Technical Details"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1",children:[t.jsx("span",{className:"text-gray-500 shrink-0 sm:w-32",children:"Story ID:"}),t.jsx("code",{className:"text-gray-700 bg-gray-200 px-2 py-0.5 rounded text-xs break-all",children:s._id})]}),s.cloudinaryPublicId&&t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1",children:[t.jsx("span",{className:"text-gray-500 shrink-0 sm:w-32",children:"Public ID:"}),t.jsx("code",{className:"text-gray-700 bg-gray-200 px-2 py-0.5 rounded text-xs break-all",children:s.cloudinaryPublicId})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1",children:[t.jsx("span",{className:"text-gray-500 shrink-0 sm:w-32",children:"Media URL:"}),t.jsx("a",{href:s.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-xs break-all",children:s.mediaUrl})]})]})]}),t.jsx("div",{className:"pt-4 border-t border-gray-200",children:t.jsx("button",{onClick:r,className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Close"})})]})})}function k0e({filters:e,onFilterChange:r,onSearchChange:s,onReset:n,includeExpired:a=!1,onToggleExpired:l,disabled:d=!1}){const[h,f]=v.useState(!1),x=e.search||e.mediaType||e.isActive!==""||a||e.sortBy!=="displayOrder"||e.sortOrder!=="asc",p=P=>{s(P.target.value)},b=P=>{r({mediaType:P===e.mediaType?"":P})},S=P=>{r({isActive:P===e.isActive?"":P})},T=(P,D)=>{r({[P]:D})},A=()=>{n(),f(!1)};return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:e.search,onChange:p,disabled:d,placeholder:"Search stories by title...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:opacity-50 disabled:bg-gray-100"}),e.search&&t.jsx("button",{onClick:()=>s(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600",children:t.jsx(ss,{className:"h-4 w-4"})})]}),t.jsxs("button",{onClick:()=>f(!h),disabled:d,className:`flex items-center justify-center gap-2 px-4 py-2.5 border rounded-lg transition-colors whitespace-nowrap ${h||x?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"} disabled:opacity-50`,children:[t.jsx(Fn,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Filters"}),x&&t.jsx("span",{className:"w-2 h-2 rounded-full bg-white"})]})]}),h&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Media Type"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:p0e.map(P=>t.jsxs("button",{onClick:()=>b(P.value),disabled:d,className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg transition-colors ${e.mediaType===P.value?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"} disabled:opacity-50`,children:[P.value==="image"?t.jsx(Xo,{className:"h-3.5 w-3.5"}):t.jsx(qi,{className:"h-3.5 w-3.5"}),P.label]},P.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("button",{onClick:()=>S("true"),disabled:d,className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${e.isActive==="true"?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"} disabled:opacity-50`,children:"Active"}),t.jsx("button",{onClick:()=>S("false"),disabled:d,className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${e.isActive==="false"?"bg-gray-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"} disabled:opacity-50`,children:"Inactive"})]})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(dr,{className:"h-4 w-4 text-gray-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Include Expired Stories"})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a,onChange:l,disabled:d,className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800 peer-disabled:opacity-50"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(XV,{className:"inline h-4 w-4 mr-1"}),"Sort By"]}),t.jsx("select",{value:e.sortBy,onChange:P=>T("sortBy",P.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:opacity-50",children:y0e.map(P=>t.jsx("option",{value:P.value,children:P.label},P.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order"}),t.jsxs("select",{value:e.sortOrder,onChange:P=>T("sortOrder",P.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:opacity-50",children:[t.jsx("option",{value:"asc",children:"Ascending"}),t.jsx("option",{value:"desc",children:"Descending"})]})]})]}),x&&t.jsxs("button",{onClick:A,disabled:d,className:"flex items-center gap-2 text-sm text-gray-500 hover:text-gray-700 transition-colors disabled:opacity-50",children:[t.jsx(ss,{className:"h-4 w-4"}),"Reset all filters"]})]})]})}function j2({label:e,value:r,icon:s,color:n="gray",description:a}){const l={gray:"bg-gray-50 border-gray-200 text-gray-600",blue:"bg-blue-50 border-blue-200 text-blue-600",green:"bg-green-50 border-green-200 text-green-600",orange:"bg-orange-50 border-orange-200 text-orange-600",red:"bg-red-50 border-red-200 text-red-600",purple:"bg-purple-50 border-purple-200 text-purple-600"};return t.jsx("div",{className:`p-4 rounded-xl border ${l[n]}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-2 rounded-lg ${l[n]}`,children:t.jsx(s,{className:"h-5 w-5"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:e}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r}),a&&t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:a})]})]})})}function _0e({isOpen:e,onClose:r,stats:s,isLoading:n=!1}){return t.jsxs(Pt,{isOpen:e,onClose:r,title:"Story Statistics",size:"xl",children:[n?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(st,{className:"h-8 w-8 text-gray-400 animate-spin mb-3"}),t.jsx("p",{className:"text-gray-500",children:"Loading statistics..."})]}):s?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl text-white",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx(Ga,{className:"h-6 w-6"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Overview"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-400 text-sm",children:"Total Stories"}),t.jsx("p",{className:"text-3xl font-bold",children:s.totalStories||0})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-400 text-sm",children:"Total Views"}),t.jsx("p",{className:"text-3xl font-bold",children:s.totalViews||0})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsx(j2,{label:"Active Stories",value:s.activeStories||0,icon:ar,color:"green",description:"Currently visible to users"}),t.jsx(j2,{label:"Inactive Stories",value:s.inactiveStories||0,icon:Rt,color:"gray",description:"Hidden from users"}),t.jsx(j2,{label:"Expired Stories",value:s.expiredStories||0,icon:dr,color:"orange",description:"Past their TTL"})]}),t.jsx("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-xl",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:t.jsx(qP,{className:"h-5 w-5 text-purple-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:"Average Views per Story"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.averageViews?s.averageViews.toFixed(1):"0"})]})]})}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-200",children:[t.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Summary"}),t.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),s.activeStories||0," stories are currently active and visible"]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),s.expiredStories||0," stories have expired based on their TTL"]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-gray-500"}),s.inactiveStories||0," stories are manually deactivated"]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Stories have been viewed ",s.totalViews||0," times in total"]})]})]})]}):t.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Ga,{className:"h-12 w-12 text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-500",children:"No statistics available"})]}),t.jsx("div",{className:"pt-4 mt-6 border-t border-gray-200",children:t.jsx("button",{onClick:r,className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Close"})})]})}function I0e(){const{hasRole:e}=vn(),r=e(["SUPER_ADMIN","ADMIN"]),s=e(["SUPER_ADMIN","ADMIN"]),n=e(["SUPER_ADMIN","ADMIN"]),{stories:a,pagination:l,filters:d,isLoading:h,error:f,stats:x,isLoadingStats:p,ttlOptions:b,createStory:S,updateStory:T,toggleStoryActive:A,deleteStory:P,updateFilters:D,updateSearch:I,resetFilters:L,toggleIncludeExpired:_,changePage:$,clearError:F,refresh:B}=b0e(),[M,V]=v.useState("grid"),[z,H]=v.useState(!1),[U,G]=v.useState(!1),[Q,ce]=v.useState(!1),[ne,J]=v.useState(!1),[W,le]=v.useState(!1),[ge,re]=v.useState(null),[X,ae]=v.useState(!1),[ve,fe]=v.useState(!1),[se,oe]=v.useState(null),[he,Ve]=v.useState({}),[Ce,Ke]=v.useState(null),xe=v.useCallback(()=>{re(null),oe(null),H(!0),console.log("[Stories] Opening create modal")},[]),Ee=v.useCallback(ct=>{re(ct),oe(null),G(!0),console.log("[Stories] Opening edit modal for story:",ct._id)},[]),pe=v.useCallback(ct=>{re(ct),ce(!0),console.log("[Stories] Opening details modal for story:",ct._id)},[]),Fe=v.useCallback(()=>{J(!0),console.log("[Stories] Opening stats modal")},[]),me=v.useCallback(ct=>{re(ct),ae(!1),le(!0),console.log("[Stories] Opening delete dialog for story:",ct._id)},[]),Ge=v.useCallback(async ct=>{Ve(ze=>({...ze,[ct._id]:!0}));try{const ze=await A(ct._id);ze.success&&(Ke(`Story ${ze.data.isActive?"activated":"deactivated"} successfully`),setTimeout(()=>Ke(null),3e3))}finally{Ve(ze=>({...ze,[ct._id]:!1}))}},[A]),Te=v.useCallback(async ct=>{fe(!0),oe(null);try{console.log("[Stories] Creating story");const ze=await S(ct);ze.success?(H(!1),Ke("Story created successfully"),setTimeout(()=>Ke(null),3e3),console.log("[Stories] Story created successfully")):(oe(ze.error||"Failed to create story"),console.error("[Stories] Failed to create story:",ze.error))}catch(ze){oe("An unexpected error occurred"),console.error("[Stories] Error creating story:",ze)}finally{fe(!1)}},[S]),at=v.useCallback(async ct=>{if(ge){fe(!0),oe(null);try{console.log("[Stories] Updating story:",ge._id);const ze=await T(ge._id,ct);ze.success?(G(!1),re(null),Ke("Story updated successfully"),setTimeout(()=>Ke(null),3e3),console.log("[Stories] Story updated successfully")):(oe(ze.error||"Failed to update story"),console.error("[Stories] Failed to update story:",ze.error))}catch(ze){oe("An unexpected error occurred"),console.error("[Stories] Error updating story:",ze)}finally{fe(!1)}}},[ge,T]),dt=v.useCallback(async()=>{if(ge){fe(!0);try{console.log("[Stories] Deleting story:",ge._id);const ct=await P(ge._id,X);ct.success?(le(!1),re(null),Ke("Story deleted successfully"),setTimeout(()=>Ke(null),3e3),console.log("[Stories] Story deleted successfully")):console.error("[Stories] Failed to delete story:",ct.error)}catch(ct){console.error("[Stories] Error deleting story:",ct)}finally{fe(!1)}}},[ge,X,P]),Nt=v.useCallback(ct=>{$(ct),window.scrollTo({top:0,behavior:"smooth"})},[$]),Qe=v.useCallback(()=>{B(),console.log("[Stories] Refreshing stories")},[B]);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Stories"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload and manage stories visible to all users"})]}),t.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[t.jsxs("button",{onClick:Fe,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",title:"View statistics",children:[t.jsx(Ga,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Stats"})]}),t.jsxs("button",{onClick:Qe,disabled:h,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Refresh stories",children:[t.jsx(ms,{className:`h-4 w-4 ${h?"animate-spin":""}`}),t.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),t.jsxs("div",{className:"flex items-center bg-white border border-gray-300 rounded-lg overflow-hidden",children:[t.jsx("button",{onClick:()=>V("grid"),className:`p-2 transition-colors ${M==="grid"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"Grid view",children:t.jsx(FP,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>V("list"),className:`p-2 transition-colors ${M==="list"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"List view",children:t.jsx(Cj,{className:"h-4 w-4"})})]}),r&&t.jsxs("button",{onClick:xe,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:[t.jsx(fr,{className:"h-4 w-4"}),t.jsx("span",{children:"New Story"})]})]})]}),f&&t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5 shrink-0"}),t.jsx("p",{className:"flex-1",children:f}),t.jsx("button",{onClick:F,className:"text-red-500 hover:text-red-700 font-medium",children:"Dismiss"})]}),Ce&&t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg",children:[t.jsx(ar,{className:"h-5 w-5 shrink-0"}),t.jsx("p",{className:"flex-1",children:Ce}),t.jsx("button",{onClick:()=>Ke(null),className:"text-green-500 hover:text-green-700 font-medium",children:"Dismiss"})]}),t.jsx(k0e,{filters:d,onFilterChange:D,onSearchChange:I,onReset:L,includeExpired:d.includeExpired,onToggleExpired:_,disabled:h}),h&&a.length===0?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[...Array(8)].map((ct,ze)=>t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden animate-pulse",children:[t.jsx("div",{className:"h-48 bg-gray-200"}),t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"}),t.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})]},ze))}):a.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:t.jsx(Xo,{className:"h-8 w-8 text-gray-400"})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No stories found"}),t.jsx("p",{className:"text-gray-500 max-w-md mx-auto mb-6",children:d.search||d.mediaType||d.isActive!==""||d.includeExpired?"Try adjusting your search or filter criteria.":"Create your first story to get started."}),r&&!d.search&&t.jsxs("button",{onClick:xe,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:[t.jsx(fr,{className:"h-4 w-4"}),"Create Story"]})]}):M==="grid"?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:a.map(ct=>t.jsx(E0e,{story:ct,canEdit:s,canDelete:n,isToggling:he[ct._id],onView:pe,onEdit:Ee,onDelete:me,onToggleActive:Ge},ct._id))}):t.jsx("div",{className:"space-y-3",children:a.map(ct=>t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[t.jsxs("div",{className:"shrink-0 w-full sm:w-24 h-32 sm:h-24 rounded-lg overflow-hidden bg-gray-100 relative",children:[ct.mediaType==="video"?t.jsx("video",{src:ct.mediaUrl,className:"w-full h-full object-cover",muted:!0,preload:"metadata"}):t.jsx("img",{src:ct.mediaUrl,alt:ct.title||"Story",className:"w-full h-full object-cover"}),t.jsx("span",{className:`absolute top-2 right-2 px-2 py-0.5 text-xs font-medium rounded-full ${ct.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:ct.isActive?"Active":"Inactive"})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:ct.title||"Untitled Story"}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-sm text-gray-500",children:[t.jsx("span",{className:"capitalize",children:ct.mediaType}),t.jsxs("span",{children:["TTL: ",ct.ttl?.replace("_"," ")]}),t.jsxs("span",{children:[ct.viewCount||0," views"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[t.jsx("button",{onClick:()=>pe(ct),className:"flex-1 sm:flex-none px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:"View"}),s&&t.jsx("button",{onClick:()=>Ee(ct),className:"flex-1 sm:flex-none px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:"Edit"}),n&&t.jsx("button",{onClick:()=>me(ct),className:"flex-1 sm:flex-none px-3 py-1.5 text-sm text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors",children:"Delete"})]})]},ct._id))}),l.totalPages>1&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsx(vr,{currentPage:l.page,totalPages:l.totalPages,totalItems:l.total,itemsPerPage:l.limit,onPageChange:Nt,itemLabel:"stories"})}),t.jsx(rO,{isOpen:z,onClose:()=>{H(!1),oe(null)},onSubmit:Te,story:null,ttlOptions:b,isLoading:ve,serverError:se}),t.jsx(rO,{isOpen:U,onClose:()=>{G(!1),re(null),oe(null)},onSubmit:at,story:ge,ttlOptions:b,isLoading:ve,serverError:se}),t.jsx(P0e,{isOpen:Q,onClose:()=>{ce(!1),re(null)},story:ge}),t.jsx(_0e,{isOpen:ne,onClose:()=>J(!1),stats:x,isLoading:p}),t.jsx(xs,{isOpen:W,onClose:()=>{le(!1),re(null),ae(!1)},onConfirm:dt,title:"Delete Story",message:t.jsxs("div",{className:"space-y-3",children:[t.jsx("p",{children:"Are you sure you want to delete this story? This action cannot be undone."}),t.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[t.jsx("input",{type:"checkbox",checked:X,onChange:ct=>ae(ct.target.checked),className:"rounded border-gray-300"}),t.jsx("span",{children:"Also delete media from cloud storage"})]})]}),confirmText:"Delete Story",cancelText:"Cancel",variant:"danger",isLoading:ve})]})}var mt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(mt||(mt={}));var nO=new Map([[mt.QR_CODE,"QR_CODE"],[mt.AZTEC,"AZTEC"],[mt.CODABAR,"CODABAR"],[mt.CODE_39,"CODE_39"],[mt.CODE_93,"CODE_93"],[mt.CODE_128,"CODE_128"],[mt.DATA_MATRIX,"DATA_MATRIX"],[mt.MAXICODE,"MAXICODE"],[mt.ITF,"ITF"],[mt.EAN_13,"EAN_13"],[mt.EAN_8,"EAN_8"],[mt.PDF_417,"PDF_417"],[mt.RSS_14,"RSS_14"],[mt.RSS_EXPANDED,"RSS_EXPANDED"],[mt.UPC_A,"UPC_A"],[mt.UPC_E,"UPC_E"],[mt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),aO;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(aO||(aO={}));function R0e(e){return Object.values(mt).includes(e)}var lp;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(lp||(lp={}));var M0e=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[lp.SCAN_TYPE_CAMERA,lp.SCAN_TYPE_FILE],e})(),m9=(function(){function e(r,s){this.format=r,this.formatName=s}return e.prototype.toString=function(){return this.formatName},e.create=function(r){if(!nO.has(r))throw"".concat(r," not in html5QrcodeSupportedFormatsTextMap");return new e(r,nO.get(r))},e})(),iO=(function(){function e(){}return e.createFromText=function(r){var s={text:r};return{decodedText:r,result:s}},e.createFromQrcodeResult=function(r){return{decodedText:r.text,result:r}},e})(),oj;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(oj||(oj={}));var L0e=(function(){function e(){}return e.createFrom=function(r){return{errorMessage:r,type:oj.UNKWOWN_ERROR}},e})(),F0e=(function(){function e(r){this.verbose=r}return e.prototype.log=function(r){this.verbose&&console.log(r)},e.prototype.warn=function(r){this.verbose&&console.warn(r)},e.prototype.logError=function(r,s){(this.verbose||s===!0)&&console.error(r)},e.prototype.logErrors=function(r){if(r.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(r)},e})();function Cl(e){return typeof e>"u"||e===null}var uu=(function(){function e(){}return e.codeParseError=function(r){return"QR code parse error, error = ".concat(r)},e.errorGettingUserMedia=function(r){return"Error getting userMedia, error = ".concat(r)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),f9=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(r,s){if(typeof r!="object"){var n=typeof r;return s.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(a),d=Object.keys(r),h=0,f=d;h<f.length;h++){var x=f[h];if(l.has(x))return s.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},e})(),g0={exports:{}},B0e=g0.exports,lO;function U0e(){return lO||(lO=1,(function(e,r){(function(s,n){n(r)})(B0e,(function(s){function n(K){return K==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,o){K.__proto__=o}||function(K,o){for(var u in o)o.hasOwnProperty(u)&&(K[u]=o[u])};function l(K,o){a(K,o);function u(){this.constructor=K}K.prototype=o===null?Object.create(o):(u.prototype=o.prototype,new u)}function d(K,o){var u=Object.setPrototypeOf;u?u(K,o):K.__proto__=o}function h(K,o){o===void 0&&(o=K.constructor);var u=Error.captureStackTrace;u&&u(K,o)}var f=(function(K){l(o,K);function o(u){var m=this.constructor,y=K.call(this,u)||this;return Object.defineProperty(y,"name",{value:m.name,enumerable:!1}),d(y,m.prototype),h(y),y}return o})(Error);class x extends f{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}x.kind="Exception";class p extends x{}p.kind="ArgumentException";class b extends x{}b.kind="IllegalArgumentException";class S{constructor(o){if(this.binarizer=o,o===null)throw new b("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,u){return this.binarizer.getBlackRow(o,u)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,u,m,y){const N=this.binarizer.getLuminanceSource().crop(o,u,m,y);return new S(this.binarizer.createBinarizer(N))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new S(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new S(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends x{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class A{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class P{static arraycopy(o,u,m,y,N){for(;N--;)m[y++]=o[u++]}static currentTimeMillis(){return Date.now()}}class D extends x{}D.kind="IndexOutOfBoundsException";class I extends D{constructor(o=void 0,u=void 0){super(u),this.index=o,this.message=u}}I.kind="ArrayIndexOutOfBoundsException";class L{static fill(o,u){for(let m=0,y=o.length;m<y;m++)o[m]=u}static fillWithin(o,u,m,y){L.rangeCheck(o.length,u,m);for(let N=u;N<m;N++)o[N]=y}static rangeCheck(o,u,m){if(u>m)throw new b("fromIndex("+u+") > toIndex("+m+")");if(u<0)throw new I(u);if(m>o)throw new I(m)}static asList(...o){return o}static create(o,u,m){return Array.from({length:o}).map(N=>Array.from({length:u}).fill(m))}static createInt32Array(o,u,m){return Array.from({length:o}).map(N=>Int32Array.from({length:u}).fill(m))}static equals(o,u){if(!o||!u||!o.length||!u.length||o.length!==u.length)return!1;for(let m=0,y=o.length;m<y;m++)if(o[m]!==u[m])return!1;return!0}static hashCode(o){if(o===null)return 0;let u=1;for(const m of o)u=31*u+m;return u}static fillUint8Array(o,u){for(let m=0;m!==o.length;m++)o[m]=u}static copyOf(o,u){return o.slice(0,u)}static copyOfUint8Array(o,u){if(o.length<=u){const m=new Uint8Array(u);return m.set(o),m}return o.slice(0,u)}static copyOfRange(o,u,m){const y=m-u,N=new Int32Array(y);return P.arraycopy(o,u,N,0,y),N}static binarySearch(o,u,m){m===void 0&&(m=L.numberComparator);let y=0,N=o.length-1;for(;y<=N;){const w=N+y>>1,C=m(u,o[w]);if(C>0)y=w+1;else if(C<0)N=w-1;else return w}return-y-1}static numberComparator(o,u){return o-u}}class _{static numberOfTrailingZeros(o){let u;if(o===0)return 32;let m=31;return u=o<<16,u!==0&&(m-=16,o=u),u=o<<8,u!==0&&(m-=8,o=u),u=o<<4,u!==0&&(m-=4,o=u),u=o<<2,u!==0&&(m-=2,o=u),m-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let u=1;return o>>>16||(u+=16,o<<=16),o>>>24||(u+=8,o<<=8),o>>>28||(u+=4,o<<=4),o>>>30||(u+=2,o<<=2),u-=o>>>31,u}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,u){return Math.trunc(o/u)}static parseInt(o,u=void 0){return parseInt(o,u)}}_.MIN_VALUE_32_BITS=-2147483648,_.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ${constructor(o,u){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,u==null?this.bits=$.makeArray(o):this.bits=u)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){const u=$.makeArray(o);P.arraycopy(this.bits,0,u,0,this.bits.length),this.bits=u}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){const u=this.size;if(o>=u)return u;const m=this.bits;let y=Math.floor(o/32),N=m[y];N&=~((1<<(o&31))-1);const w=m.length;for(;N===0;){if(++y===w)return u;N=m[y]}const C=y*32+_.numberOfTrailingZeros(N);return C>u?u:C}getNextUnset(o){const u=this.size;if(o>=u)return u;const m=this.bits;let y=Math.floor(o/32),N=~m[y];N&=~((1<<(o&31))-1);const w=m.length;for(;N===0;){if(++y===w)return u;N=~m[y]}const C=y*32+_.numberOfTrailingZeros(N);return C>u?u:C}setBulk(o,u){this.bits[Math.floor(o/32)]=u}setRange(o,u){if(u<o||o<0||u>this.size)throw new b;if(u===o)return;u--;const m=Math.floor(o/32),y=Math.floor(u/32),N=this.bits;for(let w=m;w<=y;w++){const C=w>m?0:o&31,R=(2<<(w<y?31:u&31))-(1<<C);N[w]|=R}}clear(){const o=this.bits.length,u=this.bits;for(let m=0;m<o;m++)u[m]=0}isRange(o,u,m){if(u<o||o<0||u>this.size)throw new b;if(u===o)return!0;u--;const y=Math.floor(o/32),N=Math.floor(u/32),w=this.bits;for(let C=y;C<=N;C++){const O=C>y?0:o&31,q=(2<<(C<N?31:u&31))-(1<<O)&4294967295;if((w[C]&q)!==(m?q:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,u){if(u<0||u>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+u);for(let m=u;m>0;m--)this.appendBit((o>>m-1&1)===1)}appendBitArray(o){const u=o.size;this.ensureCapacity(this.size+u);for(let m=0;m<u;m++)this.appendBit(o.get(m))}xor(o){if(this.size!==o.size)throw new b("Sizes don't match");const u=this.bits;for(let m=0,y=u.length;m<y;m++)u[m]^=o.bits[m]}toBytes(o,u,m,y){for(let N=0;N<y;N++){let w=0;for(let C=0;C<8;C++)this.get(o)&&(w|=1<<7-C),o++;u[m+N]=w}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),u=Math.floor((this.size-1)/32),m=u+1,y=this.bits;for(let N=0;N<m;N++){let w=y[N];w=w>>1&1431655765|(w&1431655765)<<1,w=w>>2&858993459|(w&858993459)<<2,w=w>>4&252645135|(w&252645135)<<4,w=w>>8&16711935|(w&16711935)<<8,w=w>>16&65535|(w&65535)<<16,o[u-N]=w}if(this.size!==m*32){const N=m*32-this.size;let w=o[0]>>>N;for(let C=1;C<m;C++){const O=o[C];w|=O<<32-N,o[C-1]=w,w=O>>>N}o[m-1]=w}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof $))return!1;const u=o;return this.size===u.size&&L.equals(this.bits,u.bits)}hashCode(){return 31*this.size+L.hashCode(this.bits)}toString(){let o="";for(let u=0,m=this.size;u<m;u++)(u&7)===0&&(o+=" "),o+=this.get(u)?"X":".";return o}clone(){return new $(this.size,this.bits.slice())}}var F;(function(K){K[K.OTHER=0]="OTHER",K[K.PURE_BARCODE=1]="PURE_BARCODE",K[K.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",K[K.TRY_HARDER=3]="TRY_HARDER",K[K.CHARACTER_SET=4]="CHARACTER_SET",K[K.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",K[K.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",K[K.ASSUME_GS1=7]="ASSUME_GS1",K[K.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",K[K.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",K[K.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(F||(F={}));var B=F;class M extends x{static getFormatInstance(){return new M}}M.kind="FormatException";var V;(function(K){K[K.Cp437=0]="Cp437",K[K.ISO8859_1=1]="ISO8859_1",K[K.ISO8859_2=2]="ISO8859_2",K[K.ISO8859_3=3]="ISO8859_3",K[K.ISO8859_4=4]="ISO8859_4",K[K.ISO8859_5=5]="ISO8859_5",K[K.ISO8859_6=6]="ISO8859_6",K[K.ISO8859_7=7]="ISO8859_7",K[K.ISO8859_8=8]="ISO8859_8",K[K.ISO8859_9=9]="ISO8859_9",K[K.ISO8859_10=10]="ISO8859_10",K[K.ISO8859_11=11]="ISO8859_11",K[K.ISO8859_13=12]="ISO8859_13",K[K.ISO8859_14=13]="ISO8859_14",K[K.ISO8859_15=14]="ISO8859_15",K[K.ISO8859_16=15]="ISO8859_16",K[K.SJIS=16]="SJIS",K[K.Cp1250=17]="Cp1250",K[K.Cp1251=18]="Cp1251",K[K.Cp1252=19]="Cp1252",K[K.Cp1256=20]="Cp1256",K[K.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",K[K.UTF8=22]="UTF8",K[K.ASCII=23]="ASCII",K[K.Big5=24]="Big5",K[K.GB18030=25]="GB18030",K[K.EUC_KR=26]="EUC_KR"})(V||(V={}));class z{constructor(o,u,m,...y){this.valueIdentifier=o,this.name=m,typeof u=="number"?this.values=Int32Array.from([u]):this.values=u,this.otherEncodingNames=y,z.VALUE_IDENTIFIER_TO_ECI.set(o,this),z.NAME_TO_ECI.set(m,this);const N=this.values;for(let w=0,C=N.length;w!==C;w++){const O=N[w];z.VALUES_TO_ECI.set(O,this)}for(const w of y)z.NAME_TO_ECI.set(w,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new M("incorect value");const u=z.VALUES_TO_ECI.get(o);if(u===void 0)throw new M("incorect value");return u}static getCharacterSetECIByName(o){const u=z.NAME_TO_ECI.get(o);if(u===void 0)throw new M("incorect value");return u}equals(o){if(!(o instanceof z))return!1;const u=o;return this.getName()===u.getName()}}z.VALUE_IDENTIFIER_TO_ECI=new Map,z.VALUES_TO_ECI=new Map,z.NAME_TO_ECI=new Map,z.Cp437=new z(V.Cp437,Int32Array.from([0,2]),"Cp437"),z.ISO8859_1=new z(V.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),z.ISO8859_2=new z(V.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),z.ISO8859_3=new z(V.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),z.ISO8859_4=new z(V.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),z.ISO8859_5=new z(V.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),z.ISO8859_6=new z(V.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),z.ISO8859_7=new z(V.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),z.ISO8859_8=new z(V.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),z.ISO8859_9=new z(V.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),z.ISO8859_10=new z(V.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),z.ISO8859_11=new z(V.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),z.ISO8859_13=new z(V.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),z.ISO8859_14=new z(V.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),z.ISO8859_15=new z(V.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),z.ISO8859_16=new z(V.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),z.SJIS=new z(V.SJIS,20,"SJIS","Shift_JIS"),z.Cp1250=new z(V.Cp1250,21,"Cp1250","windows-1250"),z.Cp1251=new z(V.Cp1251,22,"Cp1251","windows-1251"),z.Cp1252=new z(V.Cp1252,23,"Cp1252","windows-1252"),z.Cp1256=new z(V.Cp1256,24,"Cp1256","windows-1256"),z.UnicodeBigUnmarked=new z(V.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),z.UTF8=new z(V.UTF8,26,"UTF8","UTF-8"),z.ASCII=new z(V.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),z.Big5=new z(V.Big5,28,"Big5"),z.GB18030=new z(V.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),z.EUC_KR=new z(V.EUC_KR,30,"EUC_KR","EUC-KR");class H extends x{}H.kind="UnsupportedOperationException";class U{static decode(o,u){const m=this.encodingName(u);return this.customDecoder?this.customDecoder(o,m):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(m)?this.decodeFallback(o,m):new TextDecoder(m).decode(o)}static shouldDecodeOnFallback(o){return!U.isBrowser()&&o==="ISO-8859-1"}static encode(o,u){const m=this.encodingName(u);return this.customEncoder?this.customEncoder(o,m):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof z?o:z.getCharacterSetECIByName(o)}static decodeFallback(o,u){const m=this.encodingCharacterSet(u);if(U.isDecodeFallbackSupported(m)){let y="";for(let N=0,w=o.length;N<w;N++){let C=o[N].toString(16);C.length<2&&(C="0"+C),y+="%"+C}return decodeURIComponent(y)}if(m.equals(z.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new H(`Encoding ${this.encodingName(u)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(z.UTF8)||o.equals(z.ISO8859_1)||o.equals(z.ASCII)}static encodeFallback(o){const m=btoa(unescape(encodeURIComponent(o))).split(""),y=[];for(let N=0;N<m.length;N++)y.push(m[N].charCodeAt(0));return new Uint8Array(y)}}class G{static castAsNonUtf8Char(o,u=null){const m=u?u.getName():this.ISO88591;return U.decode(new Uint8Array([o]),m)}static guessEncoding(o,u){if(u!=null&&u.get(B.CHARACTER_SET)!==void 0)return u.get(B.CHARACTER_SET).toString();const m=o.length;let y=!0,N=!0,w=!0,C=0,O=0,R=0,q=0,Z=0,ee=0,ue=0,be=0,Ne=0,Oe=0,Re=0;const it=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let nt=0;nt<m&&(y||N||w);nt++){const et=o[nt]&255;w&&(C>0?(et&128)===0?w=!1:C--:(et&128)!==0&&((et&64)===0?w=!1:(C++,(et&32)===0?O++:(C++,(et&16)===0?R++:(C++,(et&8)===0?q++:w=!1))))),y&&(et>127&&et<160?y=!1:et>159&&(et<192||et===215||et===247)&&Re++),N&&(Z>0?et<64||et===127||et>252?N=!1:Z--:et===128||et===160||et>239?N=!1:et>160&&et<224?(ee++,be=0,ue++,ue>Ne&&(Ne=ue)):et>127?(Z++,ue=0,be++,be>Oe&&(Oe=be)):(ue=0,be=0))}return w&&C>0&&(w=!1),N&&Z>0&&(N=!1),w&&(it||O+R+q>0)?G.UTF8:N&&(G.ASSUME_SHIFT_JIS||Ne>=3||Oe>=3)?G.SHIFT_JIS:y&&N?Ne===2&&ee===2||Re*10>=m?G.SHIFT_JIS:G.ISO88591:y?G.ISO88591:N?G.SHIFT_JIS:w?G.UTF8:G.PLATFORM_DEFAULT_ENCODING}static format(o,...u){let m=-1;function y(w,C,O,R,q,Z){if(w==="%%")return"%";if(u[++m]===void 0)return;w=R?parseInt(R.substr(1)):void 0;let ee=q?parseInt(q.substr(1)):void 0,ue;switch(Z){case"s":ue=u[m];break;case"c":ue=u[m][0];break;case"f":ue=parseFloat(u[m]).toFixed(w);break;case"p":ue=parseFloat(u[m]).toPrecision(w);break;case"e":ue=parseFloat(u[m]).toExponential(w);break;case"x":ue=parseInt(u[m]).toString(ee||16);break;case"d":ue=parseFloat(parseInt(u[m],ee||10).toPrecision(w)).toFixed(0);break}ue=typeof ue=="object"?JSON.stringify(ue):(+ue).toString(ee);let be=parseInt(O),Ne=O&&O[0]+""=="0"?"0":" ";for(;ue.length<be;)ue=C!==void 0?ue+Ne:Ne+ue;return ue}let N=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(N,y)}static getBytes(o,u){return U.encode(o,u)}static getCharCode(o,u=0){return o.charCodeAt(u)}static getCharAt(o){return String.fromCharCode(o)}}G.SHIFT_JIS=z.SJIS.getName(),G.GB2312="GB2312",G.ISO88591=z.ISO8859_1.getName(),G.EUC_JP="EUC_JP",G.UTF8=z.UTF8.getName(),G.PLATFORM_DEFAULT_ENCODING=G.UTF8,G.ASSUME_SHIFT_JIS=!1;class Q{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=G.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,u,m){for(let y=u;u<u+m;y++)this.append(o[y]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,u){this.value=this.value.substr(0,o)+u+this.value.substr(o+1)}substring(o,u){return this.value.substring(o,u)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,u){this.value=this.value.substr(0,o)+u+this.value.substr(o+u.length)}}class ce{constructor(o,u,m,y){if(this.width=o,this.height=u,this.rowSize=m,this.bits=y,u==null&&(u=o),this.height=u,o<1||u<1)throw new b("Both dimensions must be greater than 0");m==null&&(m=Math.floor((o+31)/32)),this.rowSize=m,y==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const u=o.length,m=o[0].length,y=new ce(m,u);for(let N=0;N<u;N++){const w=o[N];for(let C=0;C<m;C++)w[C]&&y.set(C,N)}return y}static parseFromString(o,u,m){if(o===null)throw new b("stringRepresentation cannot be null");const y=new Array(o.length);let N=0,w=0,C=-1,O=0,R=0;for(;R<o.length;)if(o.charAt(R)===`
`||o.charAt(R)==="\r"){if(N>w){if(C===-1)C=N-w;else if(N-w!==C)throw new b("row lengths do not match");w=N,O++}R++}else if(o.substring(R,R+u.length)===u)R+=u.length,y[N]=!0,N++;else if(o.substring(R,R+m.length)===m)R+=m.length,y[N]=!1,N++;else throw new b("illegal character encountered: "+o.substring(R));if(N>w){if(C===-1)C=N-w;else if(N-w!==C)throw new b("row lengths do not match");O++}const q=new ce(C,O);for(let Z=0;Z<N;Z++)y[Z]&&q.set(Math.floor(Z%C),Math.floor(Z/C));return q}get(o,u){const m=u*this.rowSize+Math.floor(o/32);return(this.bits[m]>>>(o&31)&1)!==0}set(o,u){const m=u*this.rowSize+Math.floor(o/32);this.bits[m]|=1<<(o&31)&4294967295}unset(o,u){const m=u*this.rowSize+Math.floor(o/32);this.bits[m]&=~(1<<(o&31)&4294967295)}flip(o,u){const m=u*this.rowSize+Math.floor(o/32);this.bits[m]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new b("input matrix dimensions do not match");const u=new $(Math.floor(this.width/32)+1),m=this.rowSize,y=this.bits;for(let N=0,w=this.height;N<w;N++){const C=N*m,O=o.getRow(N,u).getBitArray();for(let R=0;R<m;R++)y[C+R]^=O[R]}}clear(){const o=this.bits,u=o.length;for(let m=0;m<u;m++)o[m]=0}setRegion(o,u,m,y){if(u<0||o<0)throw new b("Left and top must be nonnegative");if(y<1||m<1)throw new b("Height and width must be at least 1");const N=o+m,w=u+y;if(w>this.height||N>this.width)throw new b("The region must fit inside the matrix");const C=this.rowSize,O=this.bits;for(let R=u;R<w;R++){const q=R*C;for(let Z=o;Z<N;Z++)O[q+Math.floor(Z/32)]|=1<<(Z&31)&4294967295}}getRow(o,u){u==null||u.getSize()<this.width?u=new $(this.width):u.clear();const m=this.rowSize,y=this.bits,N=o*m;for(let w=0;w<m;w++)u.setBulk(w*32,y[N+w]);return u}setRow(o,u){P.arraycopy(u.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),u=this.getHeight();let m=new $(o),y=new $(o);for(let N=0,w=Math.floor((u+1)/2);N<w;N++)m=this.getRow(N,m),y=this.getRow(u-1-N,y),m.reverse(),y.reverse(),this.setRow(N,y),this.setRow(u-1-N,m)}getEnclosingRectangle(){const o=this.width,u=this.height,m=this.rowSize,y=this.bits;let N=o,w=u,C=-1,O=-1;for(let R=0;R<u;R++)for(let q=0;q<m;q++){const Z=y[R*m+q];if(Z!==0){if(R<w&&(w=R),R>O&&(O=R),q*32<N){let ee=0;for(;(Z<<31-ee&4294967295)===0;)ee++;q*32+ee<N&&(N=q*32+ee)}if(q*32+31>C){let ee=31;for(;!(Z>>>ee);)ee--;q*32+ee>C&&(C=q*32+ee)}}}return C<N||O<w?null:Int32Array.from([N,w,C-N+1,O-w+1])}getTopLeftOnBit(){const o=this.rowSize,u=this.bits;let m=0;for(;m<u.length&&u[m]===0;)m++;if(m===u.length)return null;const y=m/o;let N=m%o*32;const w=u[m];let C=0;for(;(w<<31-C&4294967295)===0;)C++;return N+=C,Int32Array.from([N,y])}getBottomRightOnBit(){const o=this.rowSize,u=this.bits;let m=u.length-1;for(;m>=0&&u[m]===0;)m--;if(m<0)return null;const y=Math.floor(m/o);let N=Math.floor(m%o)*32;const w=u[m];let C=31;for(;!(w>>>C);)C--;return N+=C,Int32Array.from([N,y])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof ce))return!1;const u=o;return this.width===u.width&&this.height===u.height&&this.rowSize===u.rowSize&&L.equals(this.bits,u.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+L.hashCode(this.bits),o}toString(o="X ",u="  ",m=`
`){return this.buildToString(o,u,m)}buildToString(o,u,m){let y=new Q;for(let N=0,w=this.height;N<w;N++){for(let C=0,O=this.width;C<O;C++)y.append(this.get(C,N)?o:u);y.append(m)}return y.toString()}clone(){return new ce(this.width,this.height,this.rowSize,this.bits.slice())}}class ne extends x{static getNotFoundInstance(){return new ne}}ne.kind="NotFoundException";class J extends A{constructor(o){super(o),this.luminances=J.EMPTY,this.buckets=new Int32Array(J.LUMINANCE_BUCKETS)}getBlackRow(o,u){const m=this.getLuminanceSource(),y=m.getWidth();u==null||u.getSize()<y?u=new $(y):u.clear(),this.initArrays(y);const N=m.getRow(o,this.luminances),w=this.buckets;for(let O=0;O<y;O++)w[(N[O]&255)>>J.LUMINANCE_SHIFT]++;const C=J.estimateBlackPoint(w);if(y<3)for(let O=0;O<y;O++)(N[O]&255)<C&&u.set(O);else{let O=N[0]&255,R=N[1]&255;for(let q=1;q<y-1;q++){const Z=N[q+1]&255;(R*4-O-Z)/2<C&&u.set(q),O=R,R=Z}}return u}getBlackMatrix(){const o=this.getLuminanceSource(),u=o.getWidth(),m=o.getHeight(),y=new ce(u,m);this.initArrays(u);const N=this.buckets;for(let O=1;O<5;O++){const R=Math.floor(m*O/5),q=o.getRow(R,this.luminances),Z=Math.floor(u*4/5);for(let ee=Math.floor(u/5);ee<Z;ee++){const ue=q[ee]&255;N[ue>>J.LUMINANCE_SHIFT]++}}const w=J.estimateBlackPoint(N),C=o.getMatrix();for(let O=0;O<m;O++){const R=O*u;for(let q=0;q<u;q++)(C[R+q]&255)<w&&y.set(q,O)}return y}createBinarizer(o){return new J(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const u=this.buckets;for(let m=0;m<J.LUMINANCE_BUCKETS;m++)u[m]=0}static estimateBlackPoint(o){const u=o.length;let m=0,y=0,N=0;for(let q=0;q<u;q++)o[q]>N&&(y=q,N=o[q]),o[q]>m&&(m=o[q]);let w=0,C=0;for(let q=0;q<u;q++){const Z=q-y,ee=o[q]*Z*Z;ee>C&&(w=q,C=ee)}if(y>w){const q=y;y=w,w=q}if(w-y<=u/16)throw new ne;let O=w-1,R=-1;for(let q=w-1;q>y;q--){const Z=q-y,ee=Z*Z*(w-q)*(m-o[q]);ee>R&&(O=q,R=ee)}return O<<J.LUMINANCE_SHIFT}}J.LUMINANCE_BITS=5,J.LUMINANCE_SHIFT=8-J.LUMINANCE_BITS,J.LUMINANCE_BUCKETS=1<<J.LUMINANCE_BITS,J.EMPTY=Uint8ClampedArray.from([0]);class W extends J{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const o=this.getLuminanceSource(),u=o.getWidth(),m=o.getHeight();if(u>=W.MINIMUM_DIMENSION&&m>=W.MINIMUM_DIMENSION){const y=o.getMatrix();let N=u>>W.BLOCK_SIZE_POWER;(u&W.BLOCK_SIZE_MASK)!==0&&N++;let w=m>>W.BLOCK_SIZE_POWER;(m&W.BLOCK_SIZE_MASK)!==0&&w++;const C=W.calculateBlackPoints(y,N,w,u,m),O=new ce(u,m);W.calculateThresholdForBlock(y,N,w,u,m,C,O),this.matrix=O}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new W(o)}static calculateThresholdForBlock(o,u,m,y,N,w,C){const O=N-W.BLOCK_SIZE,R=y-W.BLOCK_SIZE;for(let q=0;q<m;q++){let Z=q<<W.BLOCK_SIZE_POWER;Z>O&&(Z=O);const ee=W.cap(q,2,m-3);for(let ue=0;ue<u;ue++){let be=ue<<W.BLOCK_SIZE_POWER;be>R&&(be=R);const Ne=W.cap(ue,2,u-3);let Oe=0;for(let it=-2;it<=2;it++){const nt=w[ee+it];Oe+=nt[Ne-2]+nt[Ne-1]+nt[Ne]+nt[Ne+1]+nt[Ne+2]}const Re=Oe/25;W.thresholdBlock(o,be,Z,Re,y,C)}}}static cap(o,u,m){return o<u?u:o>m?m:o}static thresholdBlock(o,u,m,y,N,w){for(let C=0,O=m*N+u;C<W.BLOCK_SIZE;C++,O+=N)for(let R=0;R<W.BLOCK_SIZE;R++)(o[O+R]&255)<=y&&w.set(u+R,m+C)}static calculateBlackPoints(o,u,m,y,N){const w=N-W.BLOCK_SIZE,C=y-W.BLOCK_SIZE,O=new Array(m);for(let R=0;R<m;R++){O[R]=new Int32Array(u);let q=R<<W.BLOCK_SIZE_POWER;q>w&&(q=w);for(let Z=0;Z<u;Z++){let ee=Z<<W.BLOCK_SIZE_POWER;ee>C&&(ee=C);let ue=0,be=255,Ne=0;for(let Re=0,it=q*y+ee;Re<W.BLOCK_SIZE;Re++,it+=y){for(let nt=0;nt<W.BLOCK_SIZE;nt++){const et=o[it+nt]&255;ue+=et,et<be&&(be=et),et>Ne&&(Ne=et)}if(Ne-be>W.MIN_DYNAMIC_RANGE)for(Re++,it+=y;Re<W.BLOCK_SIZE;Re++,it+=y)for(let nt=0;nt<W.BLOCK_SIZE;nt++)ue+=o[it+nt]&255}let Oe=ue>>W.BLOCK_SIZE_POWER*2;if(Ne-be<=W.MIN_DYNAMIC_RANGE&&(Oe=be/2,R>0&&Z>0)){const Re=(O[R-1][Z]+2*O[R][Z-1]+O[R-1][Z-1])/4;be<Re&&(Oe=Re)}O[R][Z]=Oe}}return O}}W.BLOCK_SIZE_POWER=3,W.BLOCK_SIZE=1<<W.BLOCK_SIZE_POWER,W.BLOCK_SIZE_MASK=W.BLOCK_SIZE-1,W.MINIMUM_DIMENSION=W.BLOCK_SIZE*5,W.MIN_DYNAMIC_RANGE=24;class le{constructor(o,u){this.width=o,this.height=u}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,u,m,y){throw new H("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new H("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new H("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let u=new Q;for(let m=0;m<this.height;m++){const y=this.getRow(m,o);for(let N=0;N<this.width;N++){const w=y[N]&255;let C;w<64?C="#":w<128?C="+":w<192?C=".":C=" ",u.append(C)}u.append(`
`)}return u.toString()}}class ge extends le{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,u){const m=this.delegate.getRow(o,u),y=this.getWidth();for(let N=0;N<y;N++)m[N]=255-(m[N]&255);return m}getMatrix(){const o=this.delegate.getMatrix(),u=this.getWidth()*this.getHeight(),m=new Uint8ClampedArray(u);for(let y=0;y<u;y++)m[y]=255-(o[y]&255);return m}isCropSupported(){return this.delegate.isCropSupported()}crop(o,u,m,y){return new ge(this.delegate.crop(o,u,m,y))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ge(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ge(this.delegate.rotateCounterClockwise45())}}class re extends le{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=re.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const u=o.getContext("2d").getImageData(0,0,o.width,o.height);return re.toGrayscaleBuffer(u.data,o.width,o.height)}static toGrayscaleBuffer(o,u,m){const y=new Uint8ClampedArray(u*m);for(let N=0,w=0,C=o.length;N<C;N+=4,w++){let O;if(o[N+3]===0)O=255;else{const q=o[N],Z=o[N+1],ee=o[N+2];O=306*q+601*Z+117*ee+512>>10}y[w]=O}return y}getRow(o,u){if(o<0||o>=this.getHeight())throw new b("Requested row is outside the image: "+o);const m=this.getWidth(),y=o*m;return u===null?u=this.buffer.slice(y,y+m):(u.length<m&&(u=new Uint8ClampedArray(m)),u.set(this.buffer.slice(y,y+m))),u}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,u,m,y){return super.crop(o,u,m,y),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const u=this.getTempCanvasElement(),m=u.getContext("2d"),y=o*re.DEGREE_TO_RADIANS,N=this.canvas.width,w=this.canvas.height,C=Math.ceil(Math.abs(Math.cos(y))*N+Math.abs(Math.sin(y))*w),O=Math.ceil(Math.abs(Math.sin(y))*N+Math.abs(Math.cos(y))*w);return u.width=C,u.height=O,m.translate(C/2,O/2),m.rotate(y),m.drawImage(this.canvas,N/-2,w/-2),this.buffer=re.makeBufferFromCanvasImageData(u),this}invert(){return new ge(this)}}re.DEGREE_TO_RADIANS=Math.PI/180;class X{constructor(o,u,m){this.deviceId=o,this.label=u,this.kind="videoinput",this.groupId=m||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ae=(globalThis||Wf||self||window||void 0)&&(globalThis||Wf||self||window||void 0).__awaiter||function(K,o,u,m){function y(N){return N instanceof u?N:new u(function(w){w(N)})}return new(u||(u=Promise))(function(N,w){function C(q){try{R(m.next(q))}catch(Z){w(Z)}}function O(q){try{R(m.throw(q))}catch(Z){w(Z)}}function R(q){q.done?N(q.value):y(q.value).then(C,O)}R((m=m.apply(K,o||[])).next())})};class ve{constructor(o,u=500,m){this.reader=o,this.timeBetweenScansMillis=u,this._hints=m,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),u=[];for(const m of o){const y=m.kind==="video"?"videoinput":m.kind;if(y!=="videoinput")continue;const N=m.deviceId||m.id,w=m.label||`Video device ${u.length+1}`,C=m.groupId,O={deviceId:N,label:w,kind:y,groupId:C};u.push(O)}return u})}getVideoInputDevices(){return ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(u=>new X(u.deviceId,u.label))})}findDeviceById(o){return ae(this,void 0,void 0,function*(){const u=yield this.listVideoInputDevices();return u?u.find(m=>m.deviceId===o):null})}decodeFromInputVideoDevice(o,u){return ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,u)})}decodeOnceFromVideoDevice(o,u){return ae(this,void 0,void 0,function*(){this.reset();let m;o?m={deviceId:{exact:o}}:m={facingMode:"environment"};const y={video:m};return yield this.decodeOnceFromConstraints(y,u)})}decodeOnceFromConstraints(o,u){return ae(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(m,u)})}decodeOnceFromStream(o,u){return ae(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(o,u);return yield this.decodeOnce(m)})}decodeFromInputVideoDeviceContinuously(o,u,m){return ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,u,m)})}decodeFromVideoDevice(o,u,m){return ae(this,void 0,void 0,function*(){let y;o?y={deviceId:{exact:o}}:y={facingMode:"environment"};const N={video:y};return yield this.decodeFromConstraints(N,u,m)})}decodeFromConstraints(o,u,m){return ae(this,void 0,void 0,function*(){const y=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(y,u,m)})}decodeFromStream(o,u,m){return ae(this,void 0,void 0,function*(){this.reset();const y=yield this.attachStreamToVideo(o,u);return yield this.decodeContinuously(y,m)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,u){return ae(this,void 0,void 0,function*(){const m=this.prepareVideoElement(u);return this.addVideoSource(m,o),this.videoElement=m,this.stream=o,yield this.playVideoOnLoadAsync(m),m})}playVideoOnLoadAsync(o){return new Promise((u,m)=>this.playVideoOnLoad(o,()=>u()))}playVideoOnLoad(o,u){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",u),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,u){const m=document.getElementById(o);if(!m)throw new p(`element with id '${o}' not found`);if(m.nodeName.toLowerCase()!==u.toLowerCase())throw new p(`element with id '${o}' must be an ${u} element`);return m}decodeFromImage(o,u){if(!o&&!u)throw new p("either imageElement with a src set or an url must be provided");return u&&!o?this.decodeFromImageUrl(u):this.decodeFromImageElement(o)}decodeFromVideo(o,u){if(!o&&!u)throw new p("Either an element with a src set or an URL must be provided");return u&&!o?this.decodeFromVideoUrl(u):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,u,m){if(o===void 0&&u===void 0)throw new p("Either an element with a src set or an URL must be provided");return u&&!o?this.decodeFromVideoUrlContinuously(u,m):this.decodeFromVideoElementContinuously(o,m)}decodeFromImageElement(o){if(!o)throw new p("An image element must be provided.");this.reset();const u=this.prepareImageElement(o);this.imageElement=u;let m;return this.isImageLoaded(u)?m=this.decodeOnce(u,!1,!0):m=this._decodeOnLoadImage(u),m}decodeFromVideoElement(o){const u=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(u)}decodeFromVideoElementContinuously(o,u){const m=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(m,u)}_decodeFromVideoElementSetup(o){if(!o)throw new p("A video element must be provided.");this.reset();const u=this.prepareVideoElement(o);return this.videoElement=u,u}decodeFromImageUrl(o){if(!o)throw new p("An URL must be provided.");this.reset();const u=this.prepareImageElement();this.imageElement=u;const m=this._decodeOnLoadImage(u);return u.src=o,m}decodeFromVideoUrl(o){if(!o)throw new p("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),m=this.decodeFromVideoElement(u);return u.src=o,m}decodeFromVideoUrlContinuously(o,u){if(!o)throw new p("An URL must be provided.");this.reset();const m=this.prepareVideoElement(),y=this.decodeFromVideoElementContinuously(m,u);return m.src=o,y}_decodeOnLoadImage(o){return new Promise((u,m)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(u,m),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,u){return ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,u)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let u;return typeof o>"u"&&(u=document.createElement("img"),u.width=200,u.height=200),typeof o=="string"&&(u=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(u=o),u}prepareVideoElement(o){let u;return!o&&typeof document<"u"&&(u=document.createElement("video"),u.width=200,u.height=200),typeof o=="string"&&(u=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(u=o),u.setAttribute("autoplay","true"),u.setAttribute("muted","true"),u.setAttribute("playsinline","true"),u}decodeOnce(o,u=!0,m=!0){this._stopAsyncDecode=!1;const y=(N,w)=>{if(this._stopAsyncDecode){w(new ne("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const C=this.decode(o);N(C)}catch(C){const O=u&&C instanceof ne,q=(C instanceof T||C instanceof M)&&m;if(O||q)return setTimeout(y,this._timeBetweenDecodingAttempts,N,w);w(C)}};return new Promise((N,w)=>y(N,w))}decodeContinuously(o,u){this._stopContinuousDecode=!1;const m=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const y=this.decode(o);u(y,null),setTimeout(m,this.timeBetweenScansMillis)}catch(y){u(null,y);const N=y instanceof T||y instanceof M,w=y instanceof ne;(N||w)&&setTimeout(m,this._timeBetweenDecodingAttempts)}};m()}decode(o){const u=this.createBinaryBitmap(o);return this.decodeBitmap(u)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,u,m){u||(u={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),m||(m=this.captureCanvasContext),m.drawImage(o,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}drawImageOnCanvas(o,u,m=this.captureCanvasContext){u||(u={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),m||(m=this.captureCanvasContext),m.drawImage(o,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const u=this.getCaptureCanvas(o),m=new re(u),y=new W(m);return new S(y)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const m=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=m}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const u=this.createCaptureCanvas(o);this.captureCanvas=u}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const u=document.createElement("canvas");let m,y;return typeof o<"u"&&(o instanceof HTMLVideoElement?(m=o.videoWidth,y=o.videoHeight):o instanceof HTMLImageElement&&(m=o.naturalWidth||o.width,y=o.naturalHeight||o.height)),u.style.width=m+"px",u.style.height=y+"px",u.width=m,u.height=y,u}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,u){try{o.srcObject=u}catch{o.src=URL.createObjectURL(u)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class fe{constructor(o,u,m=u==null?0:8*u.length,y,N,w=P.currentTimeMillis()){this.text=o,this.rawBytes=u,this.numBits=m,this.resultPoints=y,this.format=N,this.timestamp=w,this.text=o,this.rawBytes=u,m==null?this.numBits=u==null?0:8*u.length:this.numBits=m,this.resultPoints=y,this.format=N,this.resultMetadata=null,w==null?this.timestamp=P.currentTimeMillis():this.timestamp=w}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,u){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,u)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){const u=this.resultPoints;if(u===null)this.resultPoints=o;else if(o!==null&&o.length>0){const m=new Array(u.length+o.length);P.arraycopy(u,0,m,0,u.length),P.arraycopy(o,0,m,u.length,o.length),this.resultPoints=m}}getTimestamp(){return this.timestamp}toString(){return this.text}}var se;(function(K){K[K.AZTEC=0]="AZTEC",K[K.CODABAR=1]="CODABAR",K[K.CODE_39=2]="CODE_39",K[K.CODE_93=3]="CODE_93",K[K.CODE_128=4]="CODE_128",K[K.DATA_MATRIX=5]="DATA_MATRIX",K[K.EAN_8=6]="EAN_8",K[K.EAN_13=7]="EAN_13",K[K.ITF=8]="ITF",K[K.MAXICODE=9]="MAXICODE",K[K.PDF_417=10]="PDF_417",K[K.QR_CODE=11]="QR_CODE",K[K.RSS_14=12]="RSS_14",K[K.RSS_EXPANDED=13]="RSS_EXPANDED",K[K.UPC_A=14]="UPC_A",K[K.UPC_E=15]="UPC_E",K[K.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(se||(se={}));var oe=se,he;(function(K){K[K.OTHER=0]="OTHER",K[K.ORIENTATION=1]="ORIENTATION",K[K.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",K[K.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",K[K.ISSUE_NUMBER=4]="ISSUE_NUMBER",K[K.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",K[K.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",K[K.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",K[K.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",K[K.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",K[K.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(he||(he={}));var Ve=he;class Ce{constructor(o,u,m,y,N=-1,w=-1){this.rawBytes=o,this.text=u,this.byteSegments=m,this.ecLevel=y,this.structuredAppendSequenceNumber=N,this.structuredAppendParity=w,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ke{exp(o){return this.expTable[o]}log(o){if(o===0)throw new b;return this.logTable[o]}static addOrSubtract(o,u){return o^u}}class xe{constructor(o,u){if(u.length===0)throw new b;this.field=o;const m=u.length;if(m>1&&u[0]===0){let y=1;for(;y<m&&u[y]===0;)y++;y===m?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(m-y),P.arraycopy(u,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);const u=this.coefficients;let m;if(o===1){m=0;for(let w=0,C=u.length;w!==C;w++){const O=u[w];m=Ke.addOrSubtract(m,O)}return m}m=u[0];const y=u.length,N=this.field;for(let w=1;w<y;w++)m=Ke.addOrSubtract(N.multiply(o,m),u[w]);return m}addOrSubtract(o){if(!this.field.equals(o.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let u=this.coefficients,m=o.coefficients;if(u.length>m.length){const w=u;u=m,m=w}let y=new Int32Array(m.length);const N=m.length-u.length;P.arraycopy(m,0,y,0,N);for(let w=N;w<m.length;w++)y[w]=Ke.addOrSubtract(u[w-N],m[w]);return new xe(this.field,y)}multiply(o){if(!this.field.equals(o.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const u=this.coefficients,m=u.length,y=o.coefficients,N=y.length,w=new Int32Array(m+N-1),C=this.field;for(let O=0;O<m;O++){const R=u[O];for(let q=0;q<N;q++)w[O+q]=Ke.addOrSubtract(w[O+q],C.multiply(R,y[q]))}return new xe(C,w)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;const u=this.coefficients.length,m=this.field,y=new Int32Array(u),N=this.coefficients;for(let w=0;w<u;w++)y[w]=m.multiply(N[w],o);return new xe(m,y)}multiplyByMonomial(o,u){if(o<0)throw new b;if(u===0)return this.field.getZero();const m=this.coefficients,y=m.length,N=new Int32Array(y+o),w=this.field;for(let C=0;C<y;C++)N[C]=w.multiply(m[C],u);return new xe(w,N)}divide(o){if(!this.field.equals(o.field))throw new b("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new b("Divide by 0");const u=this.field;let m=u.getZero(),y=this;const N=o.getCoefficient(o.getDegree()),w=u.inverse(N);for(;y.getDegree()>=o.getDegree()&&!y.isZero();){const C=y.getDegree()-o.getDegree(),O=u.multiply(y.getCoefficient(y.getDegree()),w),R=o.multiplyByMonomial(C,O),q=u.buildMonomial(C,O);m=m.addOrSubtract(q),y=y.addOrSubtract(R)}return[m,y]}toString(){let o="";for(let u=this.getDegree();u>=0;u--){let m=this.getCoefficient(u);if(m!==0){if(m<0?(o+=" - ",m=-m):o.length>0&&(o+=" + "),u===0||m!==1){const y=this.field.log(m);y===0?o+="1":y===1?o+="a":(o+="a^",o+=y)}u!==0&&(u===1?o+="x":(o+="x^",o+=u))}}return o}}class Ee extends x{}Ee.kind="ArithmeticException";class pe extends Ke{constructor(o,u,m){super(),this.primitive=o,this.size=u,this.generatorBase=m;const y=new Int32Array(u);let N=1;for(let C=0;C<u;C++)y[C]=N,N*=2,N>=u&&(N^=o,N&=u-1);this.expTable=y;const w=new Int32Array(u);for(let C=0;C<u-1;C++)w[y[C]]=C;this.logTable=w,this.zero=new xe(this,Int32Array.from([0])),this.one=new xe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,u){if(o<0)throw new b;if(u===0)return this.zero;const m=new Int32Array(o+1);return m[0]=u,new xe(this,m)}inverse(o){if(o===0)throw new Ee;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,u){return o===0||u===0?0:this.expTable[(this.logTable[o]+this.logTable[u])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+_.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}pe.AZTEC_DATA_12=new pe(4201,4096,1),pe.AZTEC_DATA_10=new pe(1033,1024,1),pe.AZTEC_DATA_6=new pe(67,64,1),pe.AZTEC_PARAM=new pe(19,16,1),pe.QR_CODE_FIELD_256=new pe(285,256,0),pe.DATA_MATRIX_FIELD_256=new pe(301,256,1),pe.AZTEC_DATA_8=pe.DATA_MATRIX_FIELD_256,pe.MAXICODE_FIELD_64=pe.AZTEC_DATA_6;class Fe extends x{}Fe.kind="ReedSolomonException";class me extends x{}me.kind="IllegalStateException";class Ge{constructor(o){this.field=o}decode(o,u){const m=this.field,y=new xe(m,o),N=new Int32Array(u);let w=!0;for(let ue=0;ue<u;ue++){const be=y.evaluateAt(m.exp(ue+m.getGeneratorBase()));N[N.length-1-ue]=be,be!==0&&(w=!1)}if(w)return;const C=new xe(m,N),O=this.runEuclideanAlgorithm(m.buildMonomial(u,1),C,u),R=O[0],q=O[1],Z=this.findErrorLocations(R),ee=this.findErrorMagnitudes(q,Z);for(let ue=0;ue<Z.length;ue++){const be=o.length-1-m.log(Z[ue]);if(be<0)throw new Fe("Bad error location");o[be]=pe.addOrSubtract(o[be],ee[ue])}}runEuclideanAlgorithm(o,u,m){if(o.getDegree()<u.getDegree()){const ue=o;o=u,u=ue}const y=this.field;let N=o,w=u,C=y.getZero(),O=y.getOne();for(;w.getDegree()>=(m/2|0);){let ue=N,be=C;if(N=w,C=O,N.isZero())throw new Fe("r_{i-1} was zero");w=ue;let Ne=y.getZero();const Oe=N.getCoefficient(N.getDegree()),Re=y.inverse(Oe);for(;w.getDegree()>=N.getDegree()&&!w.isZero();){const it=w.getDegree()-N.getDegree(),nt=y.multiply(w.getCoefficient(w.getDegree()),Re);Ne=Ne.addOrSubtract(y.buildMonomial(it,nt)),w=w.addOrSubtract(N.multiplyByMonomial(it,nt))}if(O=Ne.multiply(C).addOrSubtract(be),w.getDegree()>=N.getDegree())throw new me("Division algorithm failed to reduce polynomial?")}const R=O.getCoefficient(0);if(R===0)throw new Fe("sigmaTilde(0) was zero");const q=y.inverse(R),Z=O.multiplyScalar(q),ee=w.multiplyScalar(q);return[Z,ee]}findErrorLocations(o){const u=o.getDegree();if(u===1)return Int32Array.from([o.getCoefficient(1)]);const m=new Int32Array(u);let y=0;const N=this.field;for(let w=1;w<N.getSize()&&y<u;w++)o.evaluateAt(w)===0&&(m[y]=N.inverse(w),y++);if(y!==u)throw new Fe("Error locator degree does not match number of roots");return m}findErrorMagnitudes(o,u){const m=u.length,y=new Int32Array(m),N=this.field;for(let w=0;w<m;w++){const C=N.inverse(u[w]);let O=1;for(let R=0;R<m;R++)if(w!==R){const q=N.multiply(u[R],C),Z=(q&1)===0?q|1:q&-2;O=N.multiply(O,Z)}y[w]=N.multiply(o.evaluateAt(C),N.inverse(O)),N.getGeneratorBase()!==0&&(y[w]=N.multiply(y[w],C))}return y}}var Te;(function(K){K[K.UPPER=0]="UPPER",K[K.LOWER=1]="LOWER",K[K.MIXED=2]="MIXED",K[K.DIGIT=3]="DIGIT",K[K.PUNCT=4]="PUNCT",K[K.BINARY=5]="BINARY"})(Te||(Te={}));class at{decode(o){this.ddata=o;let u=o.getBits(),m=this.extractBits(u),y=this.correctBits(m),N=at.convertBoolArrayToByteArray(y),w=at.getEncodedData(y),C=new Ce(N,w,null,null);return C.setNumBits(y.length),C}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let u=o.length,m=Te.UPPER,y=Te.UPPER,N="",w=0;for(;w<u;)if(y===Te.BINARY){if(u-w<5)break;let C=at.readCode(o,w,5);if(w+=5,C===0){if(u-w<11)break;C=at.readCode(o,w,11)+31,w+=11}for(let O=0;O<C;O++){if(u-w<8){w=u;break}const R=at.readCode(o,w,8);N+=G.castAsNonUtf8Char(R),w+=8}y=m}else{let C=y===Te.DIGIT?4:5;if(u-w<C)break;let O=at.readCode(o,w,C);w+=C;let R=at.getCharacter(y,O);R.startsWith("CTRL_")?(m=y,y=at.getTable(R.charAt(5)),R.charAt(6)==="L"&&(m=y)):(N+=R,y=m)}return N}static getTable(o){switch(o){case"L":return Te.LOWER;case"P":return Te.PUNCT;case"M":return Te.MIXED;case"D":return Te.DIGIT;case"B":return Te.BINARY;case"U":default:return Te.UPPER}}static getCharacter(o,u){switch(o){case Te.UPPER:return at.UPPER_TABLE[u];case Te.LOWER:return at.LOWER_TABLE[u];case Te.MIXED:return at.MIXED_TABLE[u];case Te.PUNCT:return at.PUNCT_TABLE[u];case Te.DIGIT:return at.DIGIT_TABLE[u];default:throw new me("Bad table")}}correctBits(o){let u,m;this.ddata.getNbLayers()<=2?(m=6,u=pe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(m=8,u=pe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(m=10,u=pe.AZTEC_DATA_10):(m=12,u=pe.AZTEC_DATA_12);let y=this.ddata.getNbDatablocks(),N=o.length/m;if(N<y)throw new M;let w=o.length%m,C=new Int32Array(N);for(let ee=0;ee<N;ee++,w+=m)C[ee]=at.readCode(o,w,m);try{new Ge(u).decode(C,N-y)}catch(ee){throw new M(ee)}let O=(1<<m)-1,R=0;for(let ee=0;ee<y;ee++){let ue=C[ee];if(ue===0||ue===O)throw new M;(ue===1||ue===O-1)&&R++}let q=new Array(y*m-R),Z=0;for(let ee=0;ee<y;ee++){let ue=C[ee];if(ue===1||ue===O-1)q.fill(ue>1,Z,Z+m-1),Z+=m-1;else for(let be=m-1;be>=0;--be)q[Z++]=(ue&1<<be)!==0}return q}extractBits(o){let u=this.ddata.isCompact(),m=this.ddata.getNbLayers(),y=(u?11:14)+m*4,N=new Int32Array(y),w=new Array(this.totalBitsInLayer(m,u));if(u)for(let C=0;C<N.length;C++)N[C]=C;else{let C=y+1+2*_.truncDivision(_.truncDivision(y,2)-1,15),O=y/2,R=_.truncDivision(C,2);for(let q=0;q<O;q++){let Z=q+_.truncDivision(q,15);N[O-q-1]=R-Z-1,N[O+q]=R+Z+1}}for(let C=0,O=0;C<m;C++){let R=(m-C)*4+(u?9:12),q=C*2,Z=y-1-q;for(let ee=0;ee<R;ee++){let ue=ee*2;for(let be=0;be<2;be++)w[O+ue+be]=o.get(N[q+be],N[q+ee]),w[O+2*R+ue+be]=o.get(N[q+ee],N[Z-be]),w[O+4*R+ue+be]=o.get(N[Z-be],N[Z-ee]),w[O+6*R+ue+be]=o.get(N[Z-ee],N[q+be])}O+=R*8}return w}static readCode(o,u,m){let y=0;for(let N=u;N<u+m;N++)y<<=1,o[N]&&(y|=1);return y}static readByte(o,u){let m=o.length-u;return m>=8?at.readCode(o,u,8):at.readCode(o,u,m)<<8-m}static convertBoolArrayToByteArray(o){let u=new Uint8Array((o.length+7)/8);for(let m=0;m<u.length;m++)u[m]=at.readByte(o,8*m);return u}totalBitsInLayer(o,u){return((u?88:112)+16*o)*o}}at.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],at.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],at.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],at.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],at.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class dt{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,u,m,y){const N=o-m,w=u-y;return Math.sqrt(N*N+w*w)}static sum(o){let u=0;for(let m=0,y=o.length;m!==y;m++){const N=o[m];u+=N}return u}}class Nt{static floatToIntBits(o){return o}}Nt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Qe{constructor(o,u){this.x=o,this.y=u}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof Qe){const u=o;return this.x===u.x&&this.y===u.y}return!1}hashCode(){return 31*Nt.floatToIntBits(this.x)+Nt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const u=this.distance(o[0],o[1]),m=this.distance(o[1],o[2]),y=this.distance(o[0],o[2]);let N,w,C;if(m>=u&&m>=y?(w=o[0],N=o[1],C=o[2]):y>=m&&y>=u?(w=o[1],N=o[0],C=o[2]):(w=o[2],N=o[0],C=o[1]),this.crossProductZ(N,w,C)<0){const O=N;N=C,C=O}o[0]=N,o[1]=w,o[2]=C}static distance(o,u){return dt.distance(o.x,o.y,u.x,u.y)}static crossProductZ(o,u,m){const y=u.x,N=u.y;return(m.x-y)*(o.y-N)-(m.y-N)*(o.x-y)}}class ct{constructor(o,u){this.bits=o,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class ze extends ct{constructor(o,u,m,y,N){super(o,u),this.compact=m,this.nbDatablocks=y,this.nbLayers=N}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ft{constructor(o,u,m,y){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),u==null&&(u=ft.INIT_SIZE),m==null&&(m=o.getWidth()/2|0),y==null&&(y=o.getHeight()/2|0);const N=u/2|0;if(this.leftInit=m-N,this.rightInit=m+N,this.upInit=y-N,this.downInit=y+N,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ne}detect(){let o=this.leftInit,u=this.rightInit,m=this.upInit,y=this.downInit,N=!1,w=!0,C=!1,O=!1,R=!1,q=!1,Z=!1;const ee=this.width,ue=this.height;for(;w;){w=!1;let be=!0;for(;(be||!O)&&u<ee;)be=this.containsBlackPoint(m,y,u,!1),be?(u++,w=!0,O=!0):O||u++;if(u>=ee){N=!0;break}let Ne=!0;for(;(Ne||!R)&&y<ue;)Ne=this.containsBlackPoint(o,u,y,!0),Ne?(y++,w=!0,R=!0):R||y++;if(y>=ue){N=!0;break}let Oe=!0;for(;(Oe||!q)&&o>=0;)Oe=this.containsBlackPoint(m,y,o,!1),Oe?(o--,w=!0,q=!0):q||o--;if(o<0){N=!0;break}let Re=!0;for(;(Re||!Z)&&m>=0;)Re=this.containsBlackPoint(o,u,m,!0),Re?(m--,w=!0,Z=!0):Z||m--;if(m<0){N=!0;break}w&&(C=!0)}if(!N&&C){const be=u-o;let Ne=null;for(let nt=1;Ne===null&&nt<be;nt++)Ne=this.getBlackPointOnSegment(o,y-nt,o+nt,y);if(Ne==null)throw new ne;let Oe=null;for(let nt=1;Oe===null&&nt<be;nt++)Oe=this.getBlackPointOnSegment(o,m+nt,o+nt,m);if(Oe==null)throw new ne;let Re=null;for(let nt=1;Re===null&&nt<be;nt++)Re=this.getBlackPointOnSegment(u,m+nt,u-nt,m);if(Re==null)throw new ne;let it=null;for(let nt=1;it===null&&nt<be;nt++)it=this.getBlackPointOnSegment(u,y-nt,u-nt,y);if(it==null)throw new ne;return this.centerEdges(it,Ne,Re,Oe)}else throw new ne}getBlackPointOnSegment(o,u,m,y){const N=dt.round(dt.distance(o,u,m,y)),w=(m-o)/N,C=(y-u)/N,O=this.image;for(let R=0;R<N;R++){const q=dt.round(o+R*w),Z=dt.round(u+R*C);if(O.get(q,Z))return new Qe(q,Z)}return null}centerEdges(o,u,m,y){const N=o.getX(),w=o.getY(),C=u.getX(),O=u.getY(),R=m.getX(),q=m.getY(),Z=y.getX(),ee=y.getY(),ue=ft.CORR;return N<this.width/2?[new Qe(Z-ue,ee+ue),new Qe(C+ue,O+ue),new Qe(R-ue,q-ue),new Qe(N+ue,w-ue)]:[new Qe(Z+ue,ee+ue),new Qe(C+ue,O-ue),new Qe(R-ue,q+ue),new Qe(N-ue,w-ue)]}containsBlackPoint(o,u,m,y){const N=this.image;if(y){for(let w=o;w<=u;w++)if(N.get(w,m))return!0}else for(let w=o;w<=u;w++)if(N.get(m,w))return!0;return!1}}ft.INIT_SIZE=10,ft.CORR=1;class Kt{static checkAndNudgePoints(o,u){const m=o.getWidth(),y=o.getHeight();let N=!0;for(let w=0;w<u.length&&N;w+=2){const C=Math.floor(u[w]),O=Math.floor(u[w+1]);if(C<-1||C>m||O<-1||O>y)throw new ne;N=!1,C===-1?(u[w]=0,N=!0):C===m&&(u[w]=m-1,N=!0),O===-1?(u[w+1]=0,N=!0):O===y&&(u[w+1]=y-1,N=!0)}N=!0;for(let w=u.length-2;w>=0&&N;w-=2){const C=Math.floor(u[w]),O=Math.floor(u[w+1]);if(C<-1||C>m||O<-1||O>y)throw new ne;N=!1,C===-1?(u[w]=0,N=!0):C===m&&(u[w]=m-1,N=!0),O===-1?(u[w+1]=0,N=!0):O===y&&(u[w+1]=y-1,N=!0)}}}class lr{constructor(o,u,m,y,N,w,C,O,R){this.a11=o,this.a21=u,this.a31=m,this.a12=y,this.a22=N,this.a32=w,this.a13=C,this.a23=O,this.a33=R}static quadrilateralToQuadrilateral(o,u,m,y,N,w,C,O,R,q,Z,ee,ue,be,Ne,Oe){const Re=lr.quadrilateralToSquare(o,u,m,y,N,w,C,O);return lr.squareToQuadrilateral(R,q,Z,ee,ue,be,Ne,Oe).times(Re)}transformPoints(o){const u=o.length,m=this.a11,y=this.a12,N=this.a13,w=this.a21,C=this.a22,O=this.a23,R=this.a31,q=this.a32,Z=this.a33;for(let ee=0;ee<u;ee+=2){const ue=o[ee],be=o[ee+1],Ne=N*ue+O*be+Z;o[ee]=(m*ue+w*be+R)/Ne,o[ee+1]=(y*ue+C*be+q)/Ne}}transformPointsWithValues(o,u){const m=this.a11,y=this.a12,N=this.a13,w=this.a21,C=this.a22,O=this.a23,R=this.a31,q=this.a32,Z=this.a33,ee=o.length;for(let ue=0;ue<ee;ue++){const be=o[ue],Ne=u[ue],Oe=N*be+O*Ne+Z;o[ue]=(m*be+w*Ne+R)/Oe,u[ue]=(y*be+C*Ne+q)/Oe}}static squareToQuadrilateral(o,u,m,y,N,w,C,O){const R=o-m+N-C,q=u-y+w-O;if(R===0&&q===0)return new lr(m-o,N-m,o,y-u,w-y,u,0,0,1);{const Z=m-N,ee=C-N,ue=y-w,be=O-w,Ne=Z*be-ee*ue,Oe=(R*be-ee*q)/Ne,Re=(Z*q-R*ue)/Ne;return new lr(m-o+Oe*m,C-o+Re*C,o,y-u+Oe*y,O-u+Re*O,u,Oe,Re,1)}}static quadrilateralToSquare(o,u,m,y,N,w,C,O){return lr.squareToQuadrilateral(o,u,m,y,N,w,C,O).buildAdjoint()}buildAdjoint(){return new lr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new lr(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class ys extends Kt{sampleGrid(o,u,m,y,N,w,C,O,R,q,Z,ee,ue,be,Ne,Oe,Re,it,nt){const et=lr.quadrilateralToQuadrilateral(y,N,w,C,O,R,q,Z,ee,ue,be,Ne,Oe,Re,it,nt);return this.sampleGridWithTransform(o,u,m,et)}sampleGridWithTransform(o,u,m,y){if(u<=0||m<=0)throw new ne;const N=new ce(u,m),w=new Float32Array(2*u);for(let C=0;C<m;C++){const O=w.length,R=C+.5;for(let q=0;q<O;q+=2)w[q]=q/2+.5,w[q+1]=R;y.transformPoints(w),Kt.checkAndNudgePoints(o,w);try{for(let q=0;q<O;q+=2)o.get(Math.floor(w[q]),Math.floor(w[q+1]))&&N.set(q/2,C)}catch{throw new ne}}return N}}class Ye{static setGridSampler(o){Ye.gridSampler=o}static getInstance(){return Ye.gridSampler}}Ye.gridSampler=new ys;class xt{constructor(o,u){this.x=o,this.y=u}toResultPoint(){return new Qe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ur{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let u=this.getMatrixCenter(),m=this.getBullsEyeCorners(u);if(o){let w=m[0];m[0]=m[2],m[2]=w}this.extractParameters(m);let y=this.sampleGrid(this.image,m[this.shift%4],m[(this.shift+1)%4],m[(this.shift+2)%4],m[(this.shift+3)%4]),N=this.getMatrixCornerPoints(m);return new ze(y,N,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new ne;let u=2*this.nbCenterLayers,m=new Int32Array([this.sampleLine(o[0],o[1],u),this.sampleLine(o[1],o[2],u),this.sampleLine(o[2],o[3],u),this.sampleLine(o[3],o[0],u)]);this.shift=this.getRotation(m,u);let y=0;for(let w=0;w<4;w++){let C=m[(this.shift+w)%4];this.compact?(y<<=7,y+=C>>1&127):(y<<=10,y+=(C>>2&992)+(C>>1&31))}let N=this.getCorrectedParameterData(y,this.compact);this.compact?(this.nbLayers=(N>>6)+1,this.nbDataBlocks=(N&63)+1):(this.nbLayers=(N>>11)+1,this.nbDataBlocks=(N&2047)+1)}getRotation(o,u){let m=0;o.forEach((y,N,w)=>{let C=(y>>u-2<<1)+(y&1);m=(m<<3)+C}),m=((m&1)<<11)+(m>>1);for(let y=0;y<4;y++)if(_.bitCount(m^this.EXPECTED_CORNER_BITS[y])<=2)return y;throw new ne}getCorrectedParameterData(o,u){let m,y;u?(m=7,y=2):(m=10,y=4);let N=m-y,w=new Int32Array(m);for(let O=m-1;O>=0;--O)w[O]=o&15,o>>=4;try{new Ge(pe.AZTEC_PARAM).decode(w,N)}catch{throw new ne}let C=0;for(let O=0;O<y;O++)C=(C<<4)+w[O];return C}getBullsEyeCorners(o){let u=o,m=o,y=o,N=o,w=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let Z=this.getFirstDifferent(u,w,1,-1),ee=this.getFirstDifferent(m,w,1,1),ue=this.getFirstDifferent(y,w,-1,1),be=this.getFirstDifferent(N,w,-1,-1);if(this.nbCenterLayers>2){let Ne=this.distancePoint(be,Z)*this.nbCenterLayers/(this.distancePoint(N,u)*(this.nbCenterLayers+2));if(Ne<.75||Ne>1.25||!this.isWhiteOrBlackRectangle(Z,ee,ue,be))break}u=Z,m=ee,y=ue,N=be,w=!w}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ne;this.compact=this.nbCenterLayers===5;let C=new Qe(u.getX()+.5,u.getY()-.5),O=new Qe(m.getX()+.5,m.getY()+.5),R=new Qe(y.getX()-.5,y.getY()+.5),q=new Qe(N.getX()-.5,N.getY()-.5);return this.expandSquare([C,O,R,q],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,u,m,y;try{let C=new ft(this.image).detect();o=C[0],u=C[1],m=C[2],y=C[3]}catch{let O=this.image.getWidth()/2,R=this.image.getHeight()/2;o=this.getFirstDifferent(new xt(O+7,R-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new xt(O+7,R+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new xt(O-7,R+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new xt(O-7,R-7),!1,-1,-1).toResultPoint()}let N=dt.round((o.getX()+y.getX()+u.getX()+m.getX())/4),w=dt.round((o.getY()+y.getY()+u.getY()+m.getY())/4);try{let C=new ft(this.image,15,N,w).detect();o=C[0],u=C[1],m=C[2],y=C[3]}catch{o=this.getFirstDifferent(new xt(N+7,w-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new xt(N+7,w+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new xt(N-7,w+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new xt(N-7,w-7),!1,-1,-1).toResultPoint()}return N=dt.round((o.getX()+y.getX()+u.getX()+m.getX())/4),w=dt.round((o.getY()+y.getY()+u.getY()+m.getY())/4),new xt(N,w)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,u,m,y,N){let w=Ye.getInstance(),C=this.getDimension(),O=C/2-this.nbCenterLayers,R=C/2+this.nbCenterLayers;return w.sampleGrid(o,C,C,O,O,R,O,R,R,O,R,u.getX(),u.getY(),m.getX(),m.getY(),y.getX(),y.getY(),N.getX(),N.getY())}sampleLine(o,u,m){let y=0,N=this.distanceResultPoint(o,u),w=N/m,C=o.getX(),O=o.getY(),R=w*(u.getX()-o.getX())/N,q=w*(u.getY()-o.getY())/N;for(let Z=0;Z<m;Z++)this.image.get(dt.round(C+Z*R),dt.round(O+Z*q))&&(y|=1<<m-Z-1);return y}isWhiteOrBlackRectangle(o,u,m,y){let N=3;o=new xt(o.getX()-N,o.getY()+N),u=new xt(u.getX()-N,u.getY()-N),m=new xt(m.getX()+N,m.getY()-N),y=new xt(y.getX()+N,y.getY()+N);let w=this.getColor(y,o);if(w===0)return!1;let C=this.getColor(o,u);return C!==w||(C=this.getColor(u,m),C!==w)?!1:(C=this.getColor(m,y),C===w)}getColor(o,u){let m=this.distancePoint(o,u),y=(u.getX()-o.getX())/m,N=(u.getY()-o.getY())/m,w=0,C=o.getX(),O=o.getY(),R=this.image.get(o.getX(),o.getY()),q=Math.ceil(m);for(let ee=0;ee<q;ee++)C+=y,O+=N,this.image.get(dt.round(C),dt.round(O))!==R&&w++;let Z=w/m;return Z>.1&&Z<.9?0:Z<=.1===R?1:-1}getFirstDifferent(o,u,m,y){let N=o.getX()+m,w=o.getY()+y;for(;this.isValid(N,w)&&this.image.get(N,w)===u;)N+=m,w+=y;for(N-=m,w-=y;this.isValid(N,w)&&this.image.get(N,w)===u;)N+=m;for(N-=m;this.isValid(N,w)&&this.image.get(N,w)===u;)w+=y;return w-=y,new xt(N,w)}expandSquare(o,u,m){let y=m/(2*u),N=o[0].getX()-o[2].getX(),w=o[0].getY()-o[2].getY(),C=(o[0].getX()+o[2].getX())/2,O=(o[0].getY()+o[2].getY())/2,R=new Qe(C+y*N,O+y*w),q=new Qe(C-y*N,O-y*w);N=o[1].getX()-o[3].getX(),w=o[1].getY()-o[3].getY(),C=(o[1].getX()+o[3].getX())/2,O=(o[1].getY()+o[3].getY())/2;let Z=new Qe(C+y*N,O+y*w),ee=new Qe(C-y*N,O-y*w);return[R,Z,q,ee]}isValid(o,u){return o>=0&&o<this.image.getWidth()&&u>0&&u<this.image.getHeight()}isValidPoint(o){let u=dt.round(o.getX()),m=dt.round(o.getY());return this.isValid(u,m)}distancePoint(o,u){return dt.distance(o.getX(),o.getY(),u.getX(),u.getY())}distanceResultPoint(o,u){return dt.distance(o.getX(),o.getY(),u.getX(),u.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(_.truncDivision(this.nbLayers-4,8)+1)+15}}class Ir{decode(o,u=null){let m=null,y=new Ur(o.getBlackMatrix()),N=null,w=null;try{let q=y.detectMirror(!1);N=q.getPoints(),this.reportFoundResultPoints(u,N),w=new at().decode(q)}catch(q){m=q}if(w==null)try{let q=y.detectMirror(!0);N=q.getPoints(),this.reportFoundResultPoints(u,N),w=new at().decode(q)}catch(q){throw m??q}let C=new fe(w.getText(),w.getRawBytes(),w.getNumBits(),N,oe.AZTEC,P.currentTimeMillis()),O=w.getByteSegments();O!=null&&C.putMetadata(Ve.BYTE_SEGMENTS,O);let R=w.getECLevel();return R!=null&&C.putMetadata(Ve.ERROR_CORRECTION_LEVEL,R),C}reportFoundResultPoints(o,u){if(o!=null){let m=o.get(B.NEED_RESULT_POINT_CALLBACK);m!=null&&u.forEach((y,N,w)=>{m.foundPossibleResultPoint(y)})}}reset(){}}class Cr extends ve{constructor(o=500){super(new Ir,o)}}class _t{decode(o,u){try{return this.doDecode(o,u)}catch{if(u&&u.get(B.TRY_HARDER)===!0&&o.isRotateSupported()){const N=o.rotateCounterClockwise(),w=this.doDecode(N,u),C=w.getResultMetadata();let O=270;C!==null&&C.get(Ve.ORIENTATION)===!0&&(O=O+C.get(Ve.ORIENTATION)%360),w.putMetadata(Ve.ORIENTATION,O);const R=w.getResultPoints();if(R!==null){const q=N.getHeight();for(let Z=0;Z<R.length;Z++)R[Z]=new Qe(q-R[Z].getY()-1,R[Z].getX())}return w}else throw new ne}}reset(){}doDecode(o,u){const m=o.getWidth(),y=o.getHeight();let N=new $(m);const w=u&&u.get(B.TRY_HARDER)===!0,C=Math.max(1,y>>(w?8:5));let O;w?O=y:O=15;const R=Math.trunc(y/2);for(let q=0;q<O;q++){const Z=Math.trunc((q+1)/2),ee=(q&1)===0,ue=R+C*(ee?Z:-Z);if(ue<0||ue>=y)break;try{N=o.getBlackRow(ue,N)}catch{continue}for(let be=0;be<2;be++){if(be===1&&(N.reverse(),u&&u.get(B.NEED_RESULT_POINT_CALLBACK)===!0)){const Ne=new Map;u.forEach((Oe,Re)=>Ne.set(Re,Oe)),Ne.delete(B.NEED_RESULT_POINT_CALLBACK),u=Ne}try{const Ne=this.decodeRow(ue,N,u);if(be===1){Ne.putMetadata(Ve.ORIENTATION,180);const Oe=Ne.getResultPoints();Oe!==null&&(Oe[0]=new Qe(m-Oe[0].getX()-1,Oe[0].getY()),Oe[1]=new Qe(m-Oe[1].getX()-1,Oe[1].getY()))}return Ne}catch{}}}throw new ne}static recordPattern(o,u,m){const y=m.length;for(let R=0;R<y;R++)m[R]=0;const N=o.getSize();if(u>=N)throw new ne;let w=!o.get(u),C=0,O=u;for(;O<N;){if(o.get(O)!==w)m[C]++;else{if(++C===y)break;m[C]=1,w=!w}O++}if(!(C===y||C===y-1&&O===N))throw new ne}static recordPatternInReverse(o,u,m){let y=m.length,N=o.get(u);for(;u>0&&y>=0;)o.get(--u)!==N&&(y--,N=!N);if(y>=0)throw new ne;_t.recordPattern(o,u+1,m)}static patternMatchVariance(o,u,m){const y=o.length;let N=0,w=0;for(let R=0;R<y;R++)N+=o[R],w+=u[R];if(N<w)return Number.POSITIVE_INFINITY;const C=N/w;m*=C;let O=0;for(let R=0;R<y;R++){const q=o[R],Z=u[R]*C,ee=q>Z?q-Z:Z-q;if(ee>m)return Number.POSITIVE_INFINITY;O+=ee}return O/N}}class Ae extends _t{static findStartPattern(o){const u=o.getSize(),m=o.getNextSet(0);let y=0,N=Int32Array.from([0,0,0,0,0,0]),w=m,C=!1;const O=6;for(let R=m;R<u;R++)if(o.get(R)!==C)N[y]++;else{if(y===O-1){let q=Ae.MAX_AVG_VARIANCE,Z=-1;for(let ee=Ae.CODE_START_A;ee<=Ae.CODE_START_C;ee++){const ue=_t.patternMatchVariance(N,Ae.CODE_PATTERNS[ee],Ae.MAX_INDIVIDUAL_VARIANCE);ue<q&&(q=ue,Z=ee)}if(Z>=0&&o.isRange(Math.max(0,w-(R-w)/2),w,!1))return Int32Array.from([w,R,Z]);w+=N[0]+N[1],N=N.slice(2,N.length-1),N[y-1]=0,N[y]=0,y--}else y++;N[y]=1,C=!C}throw new ne}static decodeCode(o,u,m){_t.recordPattern(o,m,u);let y=Ae.MAX_AVG_VARIANCE,N=-1;for(let w=0;w<Ae.CODE_PATTERNS.length;w++){const C=Ae.CODE_PATTERNS[w],O=this.patternMatchVariance(u,C,Ae.MAX_INDIVIDUAL_VARIANCE);O<y&&(y=O,N=w)}if(N>=0)return N;throw new ne}decodeRow(o,u,m){const y=m&&m.get(B.ASSUME_GS1)===!0,N=Ae.findStartPattern(u),w=N[2];let C=0;const O=new Uint8Array(20);O[C++]=w;let R;switch(w){case Ae.CODE_START_A:R=Ae.CODE_CODE_A;break;case Ae.CODE_START_B:R=Ae.CODE_CODE_B;break;case Ae.CODE_START_C:R=Ae.CODE_CODE_C;break;default:throw new M}let q=!1,Z=!1,ee="",ue=N[0],be=N[1];const Ne=Int32Array.from([0,0,0,0,0,0]);let Oe=0,Re=0,it=w,nt=0,et=!0,Gt=!1,Ft=!1;for(;!q;){const il=Z;switch(Z=!1,Oe=Re,Re=Ae.decodeCode(u,Ne,be),O[C++]=Re,Re!==Ae.CODE_STOP&&(et=!0),Re!==Ae.CODE_STOP&&(nt++,it+=nt*Re),ue=be,be+=Ne.reduce((qm,ch)=>qm+ch,0),Re){case Ae.CODE_START_A:case Ae.CODE_START_B:case Ae.CODE_START_C:throw new M}switch(R){case Ae.CODE_CODE_A:if(Re<64)Ft===Gt?ee+=String.fromCharCode(32+Re):ee+=String.fromCharCode(32+Re+128),Ft=!1;else if(Re<96)Ft===Gt?ee+=String.fromCharCode(Re-64):ee+=String.fromCharCode(Re+64),Ft=!1;else switch(Re!==Ae.CODE_STOP&&(et=!1),Re){case Ae.CODE_FNC_1:y&&(ee.length===0?ee+="]C1":ee+="");break;case Ae.CODE_FNC_2:case Ae.CODE_FNC_3:break;case Ae.CODE_FNC_4_A:!Gt&&Ft?(Gt=!0,Ft=!1):Gt&&Ft?(Gt=!1,Ft=!1):Ft=!0;break;case Ae.CODE_SHIFT:Z=!0,R=Ae.CODE_CODE_B;break;case Ae.CODE_CODE_B:R=Ae.CODE_CODE_B;break;case Ae.CODE_CODE_C:R=Ae.CODE_CODE_C;break;case Ae.CODE_STOP:q=!0;break}break;case Ae.CODE_CODE_B:if(Re<96)Ft===Gt?ee+=String.fromCharCode(32+Re):ee+=String.fromCharCode(32+Re+128),Ft=!1;else switch(Re!==Ae.CODE_STOP&&(et=!1),Re){case Ae.CODE_FNC_1:y&&(ee.length===0?ee+="]C1":ee+="");break;case Ae.CODE_FNC_2:case Ae.CODE_FNC_3:break;case Ae.CODE_FNC_4_B:!Gt&&Ft?(Gt=!0,Ft=!1):Gt&&Ft?(Gt=!1,Ft=!1):Ft=!0;break;case Ae.CODE_SHIFT:Z=!0,R=Ae.CODE_CODE_A;break;case Ae.CODE_CODE_A:R=Ae.CODE_CODE_A;break;case Ae.CODE_CODE_C:R=Ae.CODE_CODE_C;break;case Ae.CODE_STOP:q=!0;break}break;case Ae.CODE_CODE_C:if(Re<100)Re<10&&(ee+="0"),ee+=Re;else switch(Re!==Ae.CODE_STOP&&(et=!1),Re){case Ae.CODE_FNC_1:y&&(ee.length===0?ee+="]C1":ee+="");break;case Ae.CODE_CODE_A:R=Ae.CODE_CODE_A;break;case Ae.CODE_CODE_B:R=Ae.CODE_CODE_B;break;case Ae.CODE_STOP:q=!0;break}break}il&&(R=R===Ae.CODE_CODE_A?Ae.CODE_CODE_B:Ae.CODE_CODE_A)}const Ns=be-ue;if(be=u.getNextUnset(be),!u.isRange(be,Math.min(u.getSize(),be+(be-ue)/2),!1))throw new ne;if(it-=nt*Oe,it%103!==Oe)throw new T;const $n=ee.length;if($n===0)throw new ne;$n>0&&et&&(R===Ae.CODE_CODE_C?ee=ee.substring(0,$n-2):ee=ee.substring(0,$n-1));const mn=(N[1]+N[0])/2,Dr=ue+Ns/2,Zs=O.length,_n=new Uint8Array(Zs);for(let il=0;il<Zs;il++)_n[il]=O[il];const oo=[new Qe(mn,o),new Qe(Dr,o)];return new fe(ee,_n,0,oo,oe.CODE_128,new Date().getTime())}}Ae.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ae.MAX_AVG_VARIANCE=.25,Ae.MAX_INDIVIDUAL_VARIANCE=.7,Ae.CODE_SHIFT=98,Ae.CODE_CODE_C=99,Ae.CODE_CODE_B=100,Ae.CODE_CODE_A=101,Ae.CODE_FNC_1=102,Ae.CODE_FNC_2=97,Ae.CODE_FNC_3=96,Ae.CODE_FNC_4_A=101,Ae.CODE_FNC_4_B=100,Ae.CODE_START_A=103,Ae.CODE_START_B=104,Ae.CODE_START_C=105,Ae.CODE_STOP=106;class tt extends _t{constructor(o=!1,u=!1){super(),this.usingCheckDigit=o,this.extendedMode=u,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,u,m){let y=this.counters;y.fill(0),this.decodeRowResult="";let N=tt.findAsteriskPattern(u,y),w=u.getNextSet(N[1]),C=u.getSize(),O,R;do{tt.recordPattern(u,w,y);let Ne=tt.toNarrowWidePattern(y);if(Ne<0)throw new ne;O=tt.patternToChar(Ne),this.decodeRowResult+=O,R=w;for(let Oe of y)w+=Oe;w=u.getNextSet(w)}while(O!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let q=0;for(let Ne of y)q+=Ne;let Z=w-R-q;if(w!==C&&Z*2<q)throw new ne;if(this.usingCheckDigit){let Ne=this.decodeRowResult.length-1,Oe=0;for(let Re=0;Re<Ne;Re++)Oe+=tt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Re));if(this.decodeRowResult.charAt(Ne)!==tt.ALPHABET_STRING.charAt(Oe%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,Ne)}if(this.decodeRowResult.length===0)throw new ne;let ee;this.extendedMode?ee=tt.decodeExtended(this.decodeRowResult):ee=this.decodeRowResult;let ue=(N[1]+N[0])/2,be=R+q/2;return new fe(ee,null,0,[new Qe(ue,o),new Qe(be,o)],oe.CODE_39,new Date().getTime())}static findAsteriskPattern(o,u){let m=o.getSize(),y=o.getNextSet(0),N=0,w=y,C=!1,O=u.length;for(let R=y;R<m;R++)if(o.get(R)!==C)u[N]++;else{if(N===O-1){if(this.toNarrowWidePattern(u)===tt.ASTERISK_ENCODING&&o.isRange(Math.max(0,w-Math.floor((R-w)/2)),w,!1))return[w,R];w+=u[0]+u[1],u.copyWithin(0,2,2+N-1),u[N-1]=0,u[N]=0,N--}else N++;u[N]=1,C=!C}throw new ne}static toNarrowWidePattern(o){let u=o.length,m=0,y;do{let N=2147483647;for(let O of o)O<N&&O>m&&(N=O);m=N,y=0;let w=0,C=0;for(let O=0;O<u;O++){let R=o[O];R>m&&(C|=1<<u-1-O,y++,w+=R)}if(y===3){for(let O=0;O<u&&y>0;O++){let R=o[O];if(R>m&&(y--,R*2>=w))return-1}return C}}while(y>3);return-1}static patternToChar(o){for(let u=0;u<tt.CHARACTER_ENCODINGS.length;u++)if(tt.CHARACTER_ENCODINGS[u]===o)return tt.ALPHABET_STRING.charAt(u);if(o===tt.ASTERISK_ENCODING)return"*";throw new ne}static decodeExtended(o){let u=o.length,m="";for(let y=0;y<u;y++){let N=o.charAt(y);if(N==="+"||N==="$"||N==="%"||N==="/"){let w=o.charAt(y+1),C="\0";switch(N){case"+":if(w>="A"&&w<="Z")C=String.fromCharCode(w.charCodeAt(0)+32);else throw new M;break;case"$":if(w>="A"&&w<="Z")C=String.fromCharCode(w.charCodeAt(0)-64);else throw new M;break;case"%":if(w>="A"&&w<="E")C=String.fromCharCode(w.charCodeAt(0)-38);else if(w>="F"&&w<="J")C=String.fromCharCode(w.charCodeAt(0)-11);else if(w>="K"&&w<="O")C=String.fromCharCode(w.charCodeAt(0)+16);else if(w>="P"&&w<="T")C=String.fromCharCode(w.charCodeAt(0)+43);else if(w==="U")C="\0";else if(w==="V")C="@";else if(w==="W")C="`";else if(w==="X"||w==="Y"||w==="Z")C="";else throw new M;break;case"/":if(w>="A"&&w<="O")C=String.fromCharCode(w.charCodeAt(0)-32);else if(w==="Z")C=":";else throw new M;break}m+=C,y++}else m+=N}return m}}tt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",tt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],tt.ASTERISK_ENCODING=148;class lt extends _t{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,u,m){let y=this.decodeStart(u),N=this.decodeEnd(u),w=new Q;lt.decodeMiddle(u,y[1],N[0],w);let C=w.toString(),O=null;m!=null&&(O=m.get(B.ALLOWED_LENGTHS)),O==null&&(O=lt.DEFAULT_ALLOWED_LENGTHS);let R=C.length,q=!1,Z=0;for(let be of O){if(R===be){q=!0;break}be>Z&&(Z=be)}if(!q&&R>Z&&(q=!0),!q)throw new M;const ee=[new Qe(y[1],o),new Qe(N[0],o)];return new fe(C,null,0,ee,oe.ITF,new Date().getTime())}static decodeMiddle(o,u,m,y){let N=new Int32Array(10),w=new Int32Array(5),C=new Int32Array(5);for(N.fill(0),w.fill(0),C.fill(0);u<m;){_t.recordPattern(o,u,N);for(let R=0;R<5;R++){let q=2*R;w[R]=N[q],C[R]=N[q+1]}let O=lt.decodeDigit(w);y.append(O.toString()),O=this.decodeDigit(C),y.append(O.toString()),N.forEach(function(R){u+=R})}}decodeStart(o){let u=lt.skipWhiteSpace(o),m=lt.findGuardPattern(o,u,lt.START_PATTERN);return this.narrowLineWidth=(m[1]-m[0])/4,this.validateQuietZone(o,m[0]),m}validateQuietZone(o,u){let m=this.narrowLineWidth*10;m=m<u?m:u;for(let y=u-1;m>0&&y>=0&&!o.get(y);y--)m--;if(m!==0)throw new ne}static skipWhiteSpace(o){const u=o.getSize(),m=o.getNextSet(0);if(m===u)throw new ne;return m}decodeEnd(o){o.reverse();try{let u=lt.skipWhiteSpace(o),m;try{m=lt.findGuardPattern(o,u,lt.END_PATTERN_REVERSED[0])}catch(N){N instanceof ne&&(m=lt.findGuardPattern(o,u,lt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,m[0]);let y=m[0];return m[0]=o.getSize()-m[1],m[1]=o.getSize()-y,m}finally{o.reverse()}}static findGuardPattern(o,u,m){let y=m.length,N=new Int32Array(y),w=o.getSize(),C=!1,O=0,R=u;N.fill(0);for(let q=u;q<w;q++)if(o.get(q)!==C)N[O]++;else{if(O===y-1){if(_t.patternMatchVariance(N,m,lt.MAX_INDIVIDUAL_VARIANCE)<lt.MAX_AVG_VARIANCE)return[R,q];R+=N[0]+N[1],P.arraycopy(N,2,N,0,O-1),N[O-1]=0,N[O]=0,O--}else O++;N[O]=1,C=!C}throw new ne}static decodeDigit(o){let u=lt.MAX_AVG_VARIANCE,m=-1,y=lt.PATTERNS.length;for(let N=0;N<y;N++){let w=lt.PATTERNS[N],C=_t.patternMatchVariance(o,w,lt.MAX_INDIVIDUAL_VARIANCE);C<u?(u=C,m=N):C===u&&(m=-1)}if(m>=0)return m%10;throw new ne}}lt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],lt.MAX_AVG_VARIANCE=.38,lt.MAX_INDIVIDUAL_VARIANCE=.5,lt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],lt.START_PATTERN=Int32Array.from([1,1,1,1]),lt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ct extends _t{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let u=!1,m,y=0,N=Int32Array.from([0,0,0]);for(;!u;){N=Int32Array.from([0,0,0]),m=Ct.findGuardPattern(o,y,!1,this.START_END_PATTERN,N);let w=m[0];y=m[1];let C=w-(y-w);C>=0&&(u=o.isRange(C,w,!1))}return m}static checkChecksum(o){return Ct.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let u=o.length;if(u===0)return!1;let m=parseInt(o.charAt(u-1),10);return Ct.getStandardUPCEANChecksum(o.substring(0,u-1))===m}static getStandardUPCEANChecksum(o){let u=o.length,m=0;for(let y=u-1;y>=0;y-=2){let N=o.charAt(y).charCodeAt(0)-48;if(N<0||N>9)throw new M;m+=N}m*=3;for(let y=u-2;y>=0;y-=2){let N=o.charAt(y).charCodeAt(0)-48;if(N<0||N>9)throw new M;m+=N}return(1e3-m)%10}static decodeEnd(o,u){return Ct.findGuardPattern(o,u,!1,Ct.START_END_PATTERN,new Int32Array(Ct.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,u,m,y){return this.findGuardPattern(o,u,m,y,new Int32Array(y.length))}static findGuardPattern(o,u,m,y,N){let w=o.getSize();u=m?o.getNextUnset(u):o.getNextSet(u);let C=0,O=u,R=y.length,q=m;for(let Z=u;Z<w;Z++)if(o.get(Z)!==q)N[C]++;else{if(C===R-1){if(_t.patternMatchVariance(N,y,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return Int32Array.from([O,Z]);O+=N[0]+N[1];let ee=N.slice(2,N.length-1);for(let ue=0;ue<C-1;ue++)N[ue]=ee[ue];N[C-1]=0,N[C]=0,C--}else C++;N[C]=1,q=!q}throw new ne}static decodeDigit(o,u,m,y){this.recordPattern(o,m,u);let N=this.MAX_AVG_VARIANCE,w=-1,C=y.length;for(let O=0;O<C;O++){let R=y[O],q=_t.patternMatchVariance(u,R,Ct.MAX_INDIVIDUAL_VARIANCE);q<N&&(N=q,w=O)}if(w>=0)return w;throw new ne}}Ct.MAX_AVG_VARIANCE=.48,Ct.MAX_INDIVIDUAL_VARIANCE=.7,Ct.START_END_PATTERN=Int32Array.from([1,1,1]),Ct.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ct.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ct.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class jr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,u,m){let y=this.decodeRowStringBuffer,N=this.decodeMiddle(u,m,y),w=y.toString(),C=jr.parseExtensionString(w),O=[new Qe((m[0]+m[1])/2,o),new Qe(N,o)],R=new fe(w,null,0,O,oe.UPC_EAN_EXTENSION,new Date().getTime());return C!=null&&R.putAllMetadata(C),R}decodeMiddle(o,u,m){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let N=o.getSize(),w=u[1],C=0;for(let R=0;R<5&&w<N;R++){let q=Ct.decodeDigit(o,y,w,Ct.L_AND_G_PATTERNS);m+=String.fromCharCode(48+q%10);for(let Z of y)w+=Z;q>=10&&(C|=1<<4-R),R!==4&&(w=o.getNextSet(w),w=o.getNextUnset(w))}if(m.length!==5)throw new ne;let O=this.determineCheckDigit(C);if(jr.extensionChecksum(m.toString())!==O)throw new ne;return w}static extensionChecksum(o){let u=o.length,m=0;for(let y=u-2;y>=0;y-=2)m+=o.charAt(y).charCodeAt(0)-48;m*=3;for(let y=u-1;y>=0;y-=2)m+=o.charAt(y).charCodeAt(0)-48;return m*=3,m%10}determineCheckDigit(o){for(let u=0;u<10;u++)if(o===this.CHECK_DIGIT_ENCODINGS[u])return u;throw new ne}static parseExtensionString(o){if(o.length!==5)return null;let u=jr.parseExtension5String(o);return u==null?null:new Map([[Ve.SUGGESTED_PRICE,u]])}static parseExtension5String(o){let u;switch(o.charAt(0)){case"0":u="";break;case"5":u="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}u="";break;default:u="";break}let m=parseInt(o.substring(1)),y=(m/100).toString(),N=m%100,w=N<10?"0"+N:N.toString();return u+y+"."+w}}class bs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,u,m){let y=this.decodeRowStringBuffer,N=this.decodeMiddle(u,m,y),w=y.toString(),C=bs.parseExtensionString(w),O=[new Qe((m[0]+m[1])/2,o),new Qe(N,o)],R=new fe(w,null,0,O,oe.UPC_EAN_EXTENSION,new Date().getTime());return C!=null&&R.putAllMetadata(C),R}decodeMiddle(o,u,m){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let N=o.getSize(),w=u[1],C=0;for(let O=0;O<2&&w<N;O++){let R=Ct.decodeDigit(o,y,w,Ct.L_AND_G_PATTERNS);m+=String.fromCharCode(48+R%10);for(let q of y)w+=q;R>=10&&(C|=1<<1-O),O!==1&&(w=o.getNextSet(w),w=o.getNextUnset(w))}if(m.length!==2)throw new ne;if(parseInt(m.toString())%4!==C)throw new ne;return w}static parseExtensionString(o){return o.length!==2?null:new Map([[Ve.ISSUE_NUMBER,parseInt(o)]])}}class Ar{static decodeRow(o,u,m){let y=Ct.findGuardPattern(u,m,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new jr().decodeRow(o,u,y)}catch{return new bs().decodeRow(o,u,y)}}}Ar.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ht extends Ct{constructor(){super(),this.decodeRowStringBuffer="",ht.L_AND_G_PATTERNS=ht.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let u=ht.L_PATTERNS[o-10],m=new Int32Array(u.length);for(let y=0;y<u.length;y++)m[y]=u[u.length-y-1];ht.L_AND_G_PATTERNS[o]=m}}decodeRow(o,u,m){let y=ht.findStartGuardPattern(u),N=m==null?null:m.get(B.NEED_RESULT_POINT_CALLBACK);if(N!=null){const et=new Qe((y[0]+y[1])/2,o);N.foundPossibleResultPoint(et)}let w=this.decodeMiddle(u,y,this.decodeRowStringBuffer),C=w.rowOffset,O=w.resultString;if(N!=null){const et=new Qe(C,o);N.foundPossibleResultPoint(et)}let R=this.decodeEnd(u,C);if(N!=null){const et=new Qe((R[0]+R[1])/2,o);N.foundPossibleResultPoint(et)}let q=R[1],Z=q+(q-R[0]);if(Z>=u.getSize()||!u.isRange(q,Z,!1))throw new ne;let ee=O.toString();if(ee.length<8)throw new M;if(!ht.checkChecksum(ee))throw new T;let ue=(y[1]+y[0])/2,be=(R[1]+R[0])/2,Ne=this.getBarcodeFormat(),Oe=[new Qe(ue,o),new Qe(be,o)],Re=new fe(ee,null,0,Oe,Ne,new Date().getTime()),it=0;try{let et=Ar.decodeRow(o,u,R[1]);Re.putMetadata(Ve.UPC_EAN_EXTENSION,et.getText()),Re.putAllMetadata(et.getResultMetadata()),Re.addResultPoints(et.getResultPoints()),it=et.getText().length}catch{}let nt=m==null?null:m.get(B.ALLOWED_EAN_EXTENSIONS);if(nt!=null){let et=!1;for(let Gt in nt)if(it.toString()===Gt){et=!0;break}if(!et)throw new ne}return Re}decodeEnd(o,u){return ht.findGuardPattern(o,u,!1,ht.START_END_PATTERN,new Int32Array(ht.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return ht.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let u=o.length;if(u===0)return!1;let m=parseInt(o.charAt(u-1),10);return ht.getStandardUPCEANChecksum(o.substring(0,u-1))===m}static getStandardUPCEANChecksum(o){let u=o.length,m=0;for(let y=u-1;y>=0;y-=2){let N=o.charAt(y).charCodeAt(0)-48;if(N<0||N>9)throw new M;m+=N}m*=3;for(let y=u-2;y>=0;y-=2){let N=o.charAt(y).charCodeAt(0)-48;if(N<0||N>9)throw new M;m+=N}return(1e3-m)%10}}class Ze extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,u,m){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let N=o.getSize(),w=u[1],C=0;for(let R=0;R<6&&w<N;R++){let q=ht.decodeDigit(o,y,w,ht.L_AND_G_PATTERNS);m+=String.fromCharCode(48+q%10);for(let Z of y)w+=Z;q>=10&&(C|=1<<5-R)}m=Ze.determineFirstDigit(m,C),w=ht.findGuardPattern(o,w,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let R=0;R<6&&w<N;R++){let q=ht.decodeDigit(o,y,w,ht.L_PATTERNS);m+=String.fromCharCode(48+q);for(let Z of y)w+=Z}return{rowOffset:w,resultString:m}}getBarcodeFormat(){return oe.EAN_13}static determineFirstDigit(o,u){for(let m=0;m<10;m++)if(u===this.FIRST_DIGIT_ENCODINGS[m])return o=String.fromCharCode(48+m)+o,o;throw new ne}}Ze.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Mt extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,u,m){const y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let N=o.getSize(),w=u[1];for(let O=0;O<4&&w<N;O++){let R=ht.decodeDigit(o,y,w,ht.L_PATTERNS);m+=String.fromCharCode(48+R);for(let q of y)w+=q}w=ht.findGuardPattern(o,w,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let O=0;O<4&&w<N;O++){let R=ht.decodeDigit(o,y,w,ht.L_PATTERNS);m+=String.fromCharCode(48+R);for(let q of y)w+=q}return{rowOffset:w,resultString:m}}getBarcodeFormat(){return oe.EAN_8}}class zr extends ht{constructor(){super(...arguments),this.ean13Reader=new Ze}getBarcodeFormat(){return oe.UPC_A}decode(o,u){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,u,m){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,u,m))}decodeMiddle(o,u,m){return this.ean13Reader.decodeMiddle(o,u,m)}maybeReturnResult(o){let u=o.getText();if(u.charAt(0)==="0"){let m=new fe(u.substring(1),null,null,o.getResultPoints(),oe.UPC_A);return o.getResultMetadata()!=null&&m.putAllMetadata(o.getResultMetadata()),m}else throw new ne}reset(){this.ean13Reader.reset()}}class ns extends ht{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,u,m){const y=this.decodeMiddleCounters.map(R=>R);y[0]=0,y[1]=0,y[2]=0,y[3]=0;const N=o.getSize();let w=u[1],C=0;for(let R=0;R<6&&w<N;R++){const q=ns.decodeDigit(o,y,w,ns.L_AND_G_PATTERNS);m+=String.fromCharCode(48+q%10);for(let Z of y)w+=Z;q>=10&&(C|=1<<5-R)}let O=ns.determineNumSysAndCheckDigit(m,C);return{rowOffset:w,resultString:O}}decodeEnd(o,u){return ns.findGuardPatternWithoutCounters(o,u,!0,ns.MIDDLE_END_PATTERN)}checkChecksum(o){return ht.checkChecksum(ns.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,u){for(let m=0;m<=1;m++)for(let y=0;y<10;y++)if(u===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[m][y]){let N=String.fromCharCode(48+m),w=String.fromCharCode(48+y);return N+o+w}throw ne.getNotFoundInstance()}getBarcodeFormat(){return oe.UPC_E}static convertUPCEtoUPCA(o){const u=o.slice(1,7).split("").map(N=>N.charCodeAt(0)),m=new Q;m.append(o.charAt(0));let y=u[5];switch(y){case 0:case 1:case 2:m.appendChars(u,0,2),m.append(y),m.append("0000"),m.appendChars(u,2,3);break;case 3:m.appendChars(u,0,3),m.append("00000"),m.appendChars(u,3,2);break;case 4:m.appendChars(u,0,4),m.append("00000"),m.append(u[4]);break;default:m.appendChars(u,0,5),m.append("0000"),m.append(y);break}return o.length>=8&&m.append(o.charAt(7)),m.toString()}}ns.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ns.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class $e extends _t{constructor(o){super();let u=o==null?null:o.get(B.POSSIBLE_FORMATS),m=[];n(u)?(m.push(new Ze),m.push(new zr),m.push(new Mt),m.push(new ns)):(u.indexOf(oe.EAN_13)>-1&&m.push(new Ze),u.indexOf(oe.UPC_A)>-1&&m.push(new zr),u.indexOf(oe.EAN_8)>-1&&m.push(new Mt),u.indexOf(oe.UPC_E)>-1&&m.push(new ns)),this.readers=m}decodeRow(o,u,m){for(let y of this.readers)try{const N=y.decodeRow(o,u,m),w=N.getBarcodeFormat()===oe.EAN_13&&N.getText().charAt(0)==="0",C=m==null?null:m.get(B.POSSIBLE_FORMATS),O=C==null||C.includes(oe.UPC_A);if(w&&O){const R=N.getRawBytes(),q=new fe(N.getText().substring(1),R,R?R.length:null,N.getResultPoints(),oe.UPC_A);return q.putAllMetadata(N.getResultMetadata()),q}return N}catch{}throw new ne}reset(){for(let o of this.readers)o.reset()}}class At extends _t{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,u){for(let m=0;m<u.length;m++)if(_t.patternMatchVariance(o,u[m],At.MAX_INDIVIDUAL_VARIANCE)<At.MAX_AVG_VARIANCE)return m;throw new ne}static count(o){return dt.sum(new Int32Array(o))}static increment(o,u){let m=0,y=u[0];for(let N=1;N<o.length;N++)u[N]>y&&(y=u[N],m=N);o[m]++}static decrement(o,u){let m=0,y=u[0];for(let N=1;N<o.length;N++)u[N]<y&&(y=u[N],m=N);o[m]--}static isFinderPattern(o){let u=o[0]+o[1],m=u+o[2]+o[3],y=u/m;if(y>=At.MIN_FINDER_PATTERN_RATIO&&y<=At.MAX_FINDER_PATTERN_RATIO){let N=Number.MAX_SAFE_INTEGER,w=Number.MIN_SAFE_INTEGER;for(let C of o)C>w&&(w=C),C<N&&(N=C);return w<10*N}return!1}}At.MAX_AVG_VARIANCE=.2,At.MAX_INDIVIDUAL_VARIANCE=.45,At.MIN_FINDER_PATTERN_RATIO=9.5/12,At.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ws{constructor(o,u){this.value=o,this.checksumPortion=u}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof Ws))return!1;const u=o;return this.value===u.value&&this.checksumPortion===u.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Un{constructor(o,u,m,y,N){this.value=o,this.startEnd=u,this.value=o,this.startEnd=u,this.resultPoints=new Array,this.resultPoints.push(new Qe(m,N)),this.resultPoints.push(new Qe(y,N))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof Un))return!1;const u=o;return this.value===u.value}hashCode(){return this.value}}class Nn{constructor(){}static getRSSvalue(o,u,m){let y=0;for(let O of o)y+=O;let N=0,w=0,C=o.length;for(let O=0;O<C-1;O++){let R;for(R=1,w|=1<<O;R<o[O];R++,w&=~(1<<O)){let q=Nn.combins(y-R-1,C-O-2);if(m&&w===0&&y-R-(C-O-1)>=C-O-1&&(q-=Nn.combins(y-R-(C-O),C-O-2)),C-O-1>1){let Z=0;for(let ee=y-R-(C-O-2);ee>u;ee--)Z+=Nn.combins(y-R-ee-1,C-O-3);q-=Z*(C-1-O)}else y-R>u&&q--;N+=q}y-=R}return N}static combins(o,u){let m,y;o-u>u?(y=u,m=o-u):(y=o-u,m=u);let N=1,w=1;for(let C=o;C>m;C--)N*=C,w<=y&&(N/=w,w++);for(;w<=y;)N/=w,w++;return N}}class Kl{static buildBitArray(o){let u=o.length*2-1;o[o.length-1].getRightChar()==null&&(u-=1);let m=12*u,y=new $(m),N=0,C=o[0].getRightChar().getValue();for(let O=11;O>=0;--O)(C&1<<O)!=0&&y.set(N),N++;for(let O=1;O<o.length;++O){let R=o[O],q=R.getLeftChar().getValue();for(let Z=11;Z>=0;--Z)(q&1<<Z)!=0&&y.set(N),N++;if(R.getRightChar()!=null){let Z=R.getRightChar().getValue();for(let ee=11;ee>=0;--ee)(Z&1<<ee)!=0&&y.set(N),N++}}return y}}class jn{constructor(o,u){u?this.decodedInformation=null:(this.finished=o,this.decodedInformation=u)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ei{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}class vs extends ei{constructor(o,u){super(o),this.value=u}getValue(){return this.value}isFNC1(){return this.value===vs.FNC1}}vs.FNC1="$";class On extends ei{constructor(o,u,m){super(o),m?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=u}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class as extends ei{constructor(o,u,m){if(super(o),u<0||u>10||m<0||m>10)throw new M;this.firstDigit=u,this.secondDigit=m}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===as.FNC1}isSecondDigitFNC1(){return this.secondDigit===as.FNC1}isAnyFNC1(){return this.firstDigit===as.FNC1||this.secondDigit===as.FNC1}}as.FNC1=10;class ut{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new ne;let u=o.substring(0,2);for(let N of ut.TWO_DIGIT_DATA_LENGTH)if(N[0]===u)return N[1]===ut.VARIABLE_LENGTH?ut.processVariableAI(2,N[2],o):ut.processFixedAI(2,N[1],o);if(o.length<3)throw new ne;let m=o.substring(0,3);for(let N of ut.THREE_DIGIT_DATA_LENGTH)if(N[0]===m)return N[1]===ut.VARIABLE_LENGTH?ut.processVariableAI(3,N[2],o):ut.processFixedAI(3,N[1],o);for(let N of ut.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(N[0]===m)return N[1]===ut.VARIABLE_LENGTH?ut.processVariableAI(4,N[2],o):ut.processFixedAI(4,N[1],o);if(o.length<4)throw new ne;let y=o.substring(0,4);for(let N of ut.FOUR_DIGIT_DATA_LENGTH)if(N[0]===y)return N[1]===ut.VARIABLE_LENGTH?ut.processVariableAI(4,N[2],o):ut.processFixedAI(4,N[1],o);throw new ne}static processFixedAI(o,u,m){if(m.length<o)throw new ne;let y=m.substring(0,o);if(m.length<o+u)throw new ne;let N=m.substring(o,o+u),w=m.substring(o+u),C="("+y+")"+N,O=ut.parseFieldsInGeneralPurpose(w);return O==null?C:C+O}static processVariableAI(o,u,m){let y=m.substring(0,o),N;m.length<o+u?N=m.length:N=o+u;let w=m.substring(o,N),C=m.substring(N),O="("+y+")"+w,R=ut.parseFieldsInGeneralPurpose(C);return R==null?O:O+R}}ut.VARIABLE_LENGTH=[],ut.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ut.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ut.VARIABLE_LENGTH,20],["22",ut.VARIABLE_LENGTH,29],["30",ut.VARIABLE_LENGTH,8],["37",ut.VARIABLE_LENGTH,8],["90",ut.VARIABLE_LENGTH,30],["91",ut.VARIABLE_LENGTH,30],["92",ut.VARIABLE_LENGTH,30],["93",ut.VARIABLE_LENGTH,30],["94",ut.VARIABLE_LENGTH,30],["95",ut.VARIABLE_LENGTH,30],["96",ut.VARIABLE_LENGTH,30],["97",ut.VARIABLE_LENGTH,3],["98",ut.VARIABLE_LENGTH,30],["99",ut.VARIABLE_LENGTH,30]],ut.THREE_DIGIT_DATA_LENGTH=[["240",ut.VARIABLE_LENGTH,30],["241",ut.VARIABLE_LENGTH,30],["242",ut.VARIABLE_LENGTH,6],["250",ut.VARIABLE_LENGTH,30],["251",ut.VARIABLE_LENGTH,30],["253",ut.VARIABLE_LENGTH,17],["254",ut.VARIABLE_LENGTH,20],["400",ut.VARIABLE_LENGTH,30],["401",ut.VARIABLE_LENGTH,30],["402",17],["403",ut.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ut.VARIABLE_LENGTH,20],["421",ut.VARIABLE_LENGTH,15],["422",3],["423",ut.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ut.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ut.VARIABLE_LENGTH,15],["391",ut.VARIABLE_LENGTH,18],["392",ut.VARIABLE_LENGTH,15],["393",ut.VARIABLE_LENGTH,18],["703",ut.VARIABLE_LENGTH,30]],ut.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ut.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ut.VARIABLE_LENGTH,20],["8003",ut.VARIABLE_LENGTH,30],["8004",ut.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ut.VARIABLE_LENGTH,30],["8008",ut.VARIABLE_LENGTH,12],["8018",18],["8020",ut.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ut.VARIABLE_LENGTH,70],["8200",ut.VARIABLE_LENGTH,70]];class Ds{constructor(o){this.buffer=new Q,this.information=o}decodeAllCodes(o,u){let m=u,y=null;do{let N=this.decodeGeneralPurposeField(m,y),w=ut.parseFieldsInGeneralPurpose(N.getNewString());if(w!=null&&o.append(w),N.isRemaining()?y=""+N.getRemainingValue():y=null,m===N.getNewPosition())break;m=N.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let u=o;u<o+3;++u)if(this.information.get(u))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let N=this.extractNumericValueFromBitArray(o,4);return N===0?new as(this.information.getSize(),as.FNC1,as.FNC1):new as(this.information.getSize(),N-1,as.FNC1)}let u=this.extractNumericValueFromBitArray(o,7),m=(u-8)/11,y=(u-8)%11;return new as(o+7,m,y)}extractNumericValueFromBitArray(o,u){return Ds.extractNumericValueFromBitArray(this.information,o,u)}static extractNumericValueFromBitArray(o,u,m){let y=0;for(let N=0;N<m;++N)o.get(u+N)&&(y|=1<<m-N-1);return y}decodeGeneralPurposeField(o,u){this.buffer.setLengthToZero(),u!=null&&this.buffer.append(u),this.current.setPosition(o);let m=this.parseBlocks();return m!=null&&m.isRemaining()?new On(this.current.getPosition(),this.buffer.toString(),m.getRemainingValue()):new On(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,u;do{let m=this.current.getPosition();if(this.current.isAlpha()?(u=this.parseAlphaBlock(),o=u.isFinished()):this.current.isIsoIec646()?(u=this.parseIsoIec646Block(),o=u.isFinished()):(u=this.parseNumericBlock(),o=u.isFinished()),!(m!==this.current.getPosition())&&!o)break}while(!o);return u.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let u;return o.isSecondDigitFNC1()?u=new On(this.current.getPosition(),this.buffer.toString()):u=new On(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new jn(!0,u)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let u=new On(this.current.getPosition(),this.buffer.toString());return new jn(!0,u)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new jn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let u=new On(this.current.getPosition(),this.buffer.toString());return new jn(!0,u)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new jn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let u=new On(this.current.getPosition(),this.buffer.toString());return new jn(!0,u)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new jn(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(o,5);if(u>=5&&u<16)return!0;if(o+7>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(o,7);if(m>=64&&m<116)return!0;if(o+8>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(o,8);return y>=232&&y<253}decodeIsoIec646(o){let u=this.extractNumericValueFromBitArray(o,5);if(u===15)return new vs(o+5,vs.FNC1);if(u>=5&&u<15)return new vs(o+5,"0"+(u-5));let m=this.extractNumericValueFromBitArray(o,7);if(m>=64&&m<90)return new vs(o+7,""+(m+1));if(m>=90&&m<116)return new vs(o+7,""+(m+7));let y=this.extractNumericValueFromBitArray(o,8),N;switch(y){case 232:N="!";break;case 233:N='"';break;case 234:N="%";break;case 235:N="&";break;case 236:N="'";break;case 237:N="(";break;case 238:N=")";break;case 239:N="*";break;case 240:N="+";break;case 241:N=",";break;case 242:N="-";break;case 243:N=".";break;case 244:N="/";break;case 245:N=":";break;case 246:N=";";break;case 247:N="<";break;case 248:N="=";break;case 249:N=">";break;case 250:N="?";break;case 251:N="_";break;case 252:N=" ";break;default:throw new M}return new vs(o+8,N)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(o,5);if(u>=5&&u<16)return!0;if(o+6>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(o,6);return m>=16&&m<63}decodeAlphanumeric(o){let u=this.extractNumericValueFromBitArray(o,5);if(u===15)return new vs(o+5,vs.FNC1);if(u>=5&&u<15)return new vs(o+5,"0"+(u-5));let m=this.extractNumericValueFromBitArray(o,6);if(m>=32&&m<58)return new vs(o+6,""+(m+33));let y;switch(m){case 58:y="*";break;case 59:y=",";break;case 60:y="-";break;case 61:y=".";break;case 62:y="/";break;default:throw new me("Decoding invalid alphanumeric value: "+m)}return new vs(o+6,y)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let u=0;u<5&&u+o<this.information.getSize();++u)if(u===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+u))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let u=o;u<o+3;++u)if(this.information.get(u))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let u=0;u<4&&u+o<this.information.getSize();++u)if(this.information.get(o+u))return!1;return!0}}class Yr{constructor(o){this.information=o,this.generalDecoder=new Ds(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class or extends Yr{constructor(o){super(o)}encodeCompressedGtin(o,u){o.append("(01)");let m=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,u,m)}encodeCompressedGtinWithoutAI(o,u,m){for(let y=0;y<4;++y){let N=this.getGeneralDecoder().extractNumericValueFromBitArray(u+10*y,10);N/100===0&&o.append("0"),N/10===0&&o.append("0"),o.append(N)}or.appendCheckDigit(o,m)}static appendCheckDigit(o,u){let m=0;for(let y=0;y<13;y++){let N=o.charAt(y+u).charCodeAt(0)-48;m+=(y&1)===0?3*N:N}m=10-m%10,m===10&&(m=0),o.append(m)}}or.GTIN_SIZE=40;class hn extends or{constructor(o){super(o)}parseInformation(){let o=new Q;o.append("(01)");let u=o.length(),m=this.getGeneralDecoder().extractNumericValueFromBitArray(hn.HEADER_SIZE,4);return o.append(m),this.encodeCompressedGtinWithoutAI(o,hn.HEADER_SIZE+4,u),this.getGeneralDecoder().decodeAllCodes(o,hn.HEADER_SIZE+44)}}hn.HEADER_SIZE=4;class Ca extends Yr{constructor(o){super(o)}parseInformation(){let o=new Q;return this.getGeneralDecoder().decodeAllCodes(o,Ca.HEADER_SIZE)}}Ca.HEADER_SIZE=5;class Ei extends or{constructor(o){super(o)}encodeCompressedWeight(o,u,m){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(u,m);this.addWeightCode(o,y);let N=this.checkWeight(y),w=1e5;for(let C=0;C<5;++C)N/w===0&&o.append("0"),w/=10;o.append(N)}}class wn extends Ei{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=wn.HEADER_SIZE+Ei.GTIN_SIZE+wn.WEIGHT_SIZE)throw new ne;let o=new Q;return this.encodeCompressedGtin(o,wn.HEADER_SIZE),this.encodeCompressedWeight(o,wn.HEADER_SIZE+Ei.GTIN_SIZE,wn.WEIGHT_SIZE),o.toString()}}wn.HEADER_SIZE=5,wn.WEIGHT_SIZE=15;class de extends wn{constructor(o){super(o)}addWeightCode(o,u){o.append("(3103)")}checkWeight(o){return o}}class pt extends wn{constructor(o){super(o)}addWeightCode(o,u){u<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}class yt extends or{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<yt.HEADER_SIZE+or.GTIN_SIZE)throw new ne;let o=new Q;this.encodeCompressedGtin(o,yt.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(yt.HEADER_SIZE+or.GTIN_SIZE,yt.LAST_DIGIT_SIZE);o.append("(392"),o.append(u),o.append(")");let m=this.getGeneralDecoder().decodeGeneralPurposeField(yt.HEADER_SIZE+or.GTIN_SIZE+yt.LAST_DIGIT_SIZE,null);return o.append(m.getNewString()),o.toString()}}yt.HEADER_SIZE=8,yt.LAST_DIGIT_SIZE=2;class Zt extends or{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<Zt.HEADER_SIZE+or.GTIN_SIZE)throw new ne;let o=new Q;this.encodeCompressedGtin(o,Zt.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(Zt.HEADER_SIZE+or.GTIN_SIZE,Zt.LAST_DIGIT_SIZE);o.append("(393"),o.append(u),o.append(")");let m=this.getGeneralDecoder().extractNumericValueFromBitArray(Zt.HEADER_SIZE+or.GTIN_SIZE+Zt.LAST_DIGIT_SIZE,Zt.FIRST_THREE_DIGITS_SIZE);m/100==0&&o.append("0"),m/10==0&&o.append("0"),o.append(m);let y=this.getGeneralDecoder().decodeGeneralPurposeField(Zt.HEADER_SIZE+or.GTIN_SIZE+Zt.LAST_DIGIT_SIZE+Zt.FIRST_THREE_DIGITS_SIZE,null);return o.append(y.getNewString()),o.toString()}}Zt.HEADER_SIZE=8,Zt.LAST_DIGIT_SIZE=2,Zt.FIRST_THREE_DIGITS_SIZE=10;class ur extends Ei{constructor(o,u,m){super(o),this.dateCode=m,this.firstAIdigits=u}parseInformation(){if(this.getInformation().getSize()!=ur.HEADER_SIZE+ur.GTIN_SIZE+ur.WEIGHT_SIZE+ur.DATE_SIZE)throw new ne;let o=new Q;return this.encodeCompressedGtin(o,ur.HEADER_SIZE),this.encodeCompressedWeight(o,ur.HEADER_SIZE+ur.GTIN_SIZE,ur.WEIGHT_SIZE),this.encodeCompressedDate(o,ur.HEADER_SIZE+ur.GTIN_SIZE+ur.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,u){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(u,ur.DATE_SIZE);if(m==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let y=m%32;m/=32;let N=m%12+1;m/=12;let w=m;w/10==0&&o.append("0"),o.append(w),N/10==0&&o.append("0"),o.append(N),y/10==0&&o.append("0"),o.append(y)}addWeightCode(o,u){o.append("("),o.append(this.firstAIdigits),o.append(u/1e5),o.append(")")}checkWeight(o){return o%1e5}}ur.HEADER_SIZE=8,ur.WEIGHT_SIZE=20,ur.DATE_SIZE=16;function qe(K){try{if(K.get(1))return new hn(K);if(!K.get(2))return new Ca(K);switch(Ds.extractNumericValueFromBitArray(K,1,4)){case 4:return new de(K);case 5:return new pt(K)}switch(Ds.extractNumericValueFromBitArray(K,1,5)){case 12:return new yt(K);case 13:return new Zt(K)}switch(Ds.extractNumericValueFromBitArray(K,1,7)){case 56:return new ur(K,"310","11");case 57:return new ur(K,"320","11");case 58:return new ur(K,"310","13");case 59:return new ur(K,"320","13");case 60:return new ur(K,"310","15");case 61:return new ur(K,"320","15");case 62:return new ur(K,"310","17");case 63:return new ur(K,"320","17")}}catch(o){throw console.log(o),new me("unknown decoder: "+K)}}class vt{constructor(o,u,m,y){this.leftchar=o,this.rightchar=u,this.finderpattern=m,this.maybeLast=y}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,u){return o instanceof vt?vt.equalsOrNull(o.leftchar,u.leftchar)&&vt.equalsOrNull(o.rightchar,u.rightchar)&&vt.equalsOrNull(o.finderpattern,u.finderpattern):!1}static equalsOrNull(o,u){return o===null?u===null:vt.equals(o,u)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Wr{constructor(o,u,m){this.pairs=o,this.rowNumber=u,this.wasReversed=m}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,u){return o instanceof Wr?this.checkEqualitity(o,u)&&o.wasReversed===u.wasReversed:!1}checkEqualitity(o,u){if(!o||!u)return;let m;return o.forEach((y,N)=>{u.forEach(w=>{y.getLeftChar().getValue()===w.getLeftChar().getValue()&&y.getRightChar().getValue()===w.getRightChar().getValue()&&y.getFinderPatter().getValue()===w.getFinderPatter().getValue()&&(m=!0)})}),m}}class Je extends At{constructor(o){super(...arguments),this.pairs=new Array(Je.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,u,m){this.pairs.length=0,this.startFromEven=!1;try{return Je.constructResult(this.decodeRow2pairs(o,u))}catch(y){this.verbose&&console.log(y)}return this.pairs.length=0,this.startFromEven=!0,Je.constructResult(this.decodeRow2pairs(o,u))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,u){let m=!1;for(;!m;)try{this.pairs.push(this.retrieveNextPair(u,this.pairs,o))}catch(N){if(N instanceof ne){if(!this.pairs.length)throw new ne;m=!0}}if(this.checkChecksum())return this.pairs;let y;if(this.rows.length?y=!0:y=!1,this.storeRow(o,!1),y){let N=this.checkRowsBoolean(!1);if(N!=null||(N=this.checkRowsBoolean(!0),N!=null))return N}throw new ne}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let u=null;try{u=this.checkRows(new Array,0)}catch(m){this.verbose&&console.log(m)}return o&&(this.rows=this.rows.reverse()),u}checkRows(o,u){for(let m=u;m<this.rows.length;m++){let y=this.rows[m];this.pairs.length=0;for(let w of o)this.pairs.push(w.getPairs());if(this.pairs.push(y.getPairs()),!Je.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let N=new Array(o);N.push(y);try{return this.checkRows(N,m+1)}catch(w){this.verbose&&console.log(w)}}throw new ne}static isValidSequence(o){for(let u of Je.FINDER_PATTERN_SEQUENCES){if(o.length>u.length)continue;let m=!0;for(let y=0;y<o.length;y++)if(o[y].getFinderPattern().getValue()!=u[y]){m=!1;break}if(m)return!0}return!1}storeRow(o,u){let m=0,y=!1,N=!1;for(;m<this.rows.length;){let w=this.rows[m];if(w.getRowNumber()>o){N=w.isEquivalent(this.pairs);break}y=w.isEquivalent(this.pairs),m++}N||y||Je.isPartialRow(this.pairs,this.rows)||(this.rows.push(m,new Wr(this.pairs,o,u)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,u){for(let m of u)if(m.getPairs().length!==o.length){for(let y of m.getPairs())for(let N of o)if(vt.equals(y,N))break}}static isPartialRow(o,u){for(let m of u){let y=!0;for(let N of o){let w=!1;for(let C of m.getPairs())if(N.equals(C)){w=!0;break}if(!w){y=!1;break}}if(y)return!0}return!1}getRows(){return this.rows}static constructResult(o){let u=Kl.buildBitArray(o),y=qe(u).parseInformation(),N=o[0].getFinderPattern().getResultPoints(),w=o[o.length-1].getFinderPattern().getResultPoints(),C=[N[0],N[1],w[0],w[1]];return new fe(y,null,null,C,oe.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),u=o.getLeftChar(),m=o.getRightChar();if(m==null)return!1;let y=m.getChecksumPortion(),N=2;for(let C=1;C<this.pairs.size();++C){let O=this.pairs.get(C);y+=O.getLeftChar().getChecksumPortion(),N++;let R=O.getRightChar();R!=null&&(y+=R.getChecksumPortion(),N++)}return y%=211,211*(N-4)+y==u.getValue()}static getNextSecondBar(o,u){let m;return o.get(u)?(m=o.getNextUnset(u),m=o.getNextSet(m)):(m=o.getNextSet(u),m=o.getNextUnset(m)),m}retrieveNextPair(o,u,m){let y=u.length%2==0;this.startFromEven&&(y=!y);let N,w=!0,C=-1;do this.findNextPair(o,u,C),N=this.parseFoundFinderPattern(o,m,y),N==null?C=Je.getNextSecondBar(o,this.startEnd[0]):w=!1;while(w);let O=this.decodeDataCharacter(o,N,y,!0);if(!this.isEmptyPair(u)&&u[u.length-1].mustBeLast())throw new ne;let R;try{R=this.decodeDataCharacter(o,N,y,!1)}catch(q){R=null,this.verbose&&console.log(q)}return new vt(O,R,N,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,u,m){let y=this.getDecodeFinderCounters();y[0]=0,y[1]=0,y[2]=0,y[3]=0;let N=o.getSize(),w;m>=0?w=m:this.isEmptyPair(u)?w=0:w=u[u.length-1].getFinderPattern().getStartEnd()[1];let C=u.length%2!=0;this.startFromEven&&(C=!C);let O=!1;for(;w<N&&(O=!o.get(w),!!O);)w++;let R=0,q=w;for(let Z=w;Z<N;Z++)if(o.get(Z)!=O)y[R]++;else{if(R==3){if(C&&Je.reverseCounters(y),Je.isFinderPattern(y)){this.startEnd[0]=q,this.startEnd[1]=Z;return}C&&Je.reverseCounters(y),q+=y[0]+y[1],y[0]=y[2],y[1]=y[3],y[2]=0,y[3]=0,R--}else R++;y[R]=1,O=!O}throw new ne}static reverseCounters(o){let u=o.length;for(let m=0;m<u/2;++m){let y=o[m];o[m]=o[u-m-1],o[u-m-1]=y}}parseFoundFinderPattern(o,u,m){let y,N,w;if(m){let R=this.startEnd[0]-1;for(;R>=0&&!o.get(R);)R--;R++,y=this.startEnd[0]-R,N=R,w=this.startEnd[1]}else N=this.startEnd[0],w=o.getNextUnset(this.startEnd[1]+1),y=w-this.startEnd[1];let C=this.getDecodeFinderCounters();P.arraycopy(C,0,C,1,C.length-1),C[0]=y;let O;try{O=this.parseFinderValue(C,Je.FINDER_PATTERNS)}catch{return null}return new Un(O,[N,w],N,w,u)}decodeDataCharacter(o,u,m,y){let N=this.getDataCharacterCounters();for(let Dr=0;Dr<N.length;Dr++)N[Dr]=0;if(y)Je.recordPatternInReverse(o,u.getStartEnd()[0],N);else{Je.recordPattern(o,u.getStartEnd()[1],N);for(let Dr=0,Zs=N.length-1;Dr<Zs;Dr++,Zs--){let _n=N[Dr];N[Dr]=N[Zs],N[Zs]=_n}}let w=17,C=dt.sum(new Int32Array(N))/w,O=(u.getStartEnd()[1]-u.getStartEnd()[0])/15;if(Math.abs(C-O)/O>.3)throw new ne;let R=this.getOddCounts(),q=this.getEvenCounts(),Z=this.getOddRoundingErrors(),ee=this.getEvenRoundingErrors();for(let Dr=0;Dr<N.length;Dr++){let Zs=1*N[Dr]/C,_n=Zs+.5;if(_n<1){if(Zs<.3)throw new ne;_n=1}else if(_n>8){if(Zs>8.7)throw new ne;_n=8}let oo=Dr/2;(Dr&1)==0?(R[oo]=_n,Z[oo]=Zs-_n):(q[oo]=_n,ee[oo]=Zs-_n)}this.adjustOddEvenCounts(w);let ue=4*u.getValue()+(m?0:2)+(y?0:1)-1,be=0,Ne=0;for(let Dr=R.length-1;Dr>=0;Dr--){if(Je.isNotA1left(u,m,y)){let Zs=Je.WEIGHTS[ue][2*Dr];Ne+=R[Dr]*Zs}be+=R[Dr]}let Oe=0;for(let Dr=q.length-1;Dr>=0;Dr--)if(Je.isNotA1left(u,m,y)){let Zs=Je.WEIGHTS[ue][2*Dr+1];Oe+=q[Dr]*Zs}let Re=Ne+Oe;if((be&1)!=0||be>13||be<4)throw new ne;let it=(13-be)/2,nt=Je.SYMBOL_WIDEST[it],et=9-nt,Gt=Nn.getRSSvalue(R,nt,!0),Ft=Nn.getRSSvalue(q,et,!1),Ns=Je.EVEN_TOTAL_SUBSET[it],$n=Je.GSUM[it],mn=Gt*Ns+Ft+$n;return new Ws(mn,Re)}static isNotA1left(o,u,m){return!(o.getValue()==0&&u&&m)}adjustOddEvenCounts(o){let u=dt.sum(new Int32Array(this.getOddCounts())),m=dt.sum(new Int32Array(this.getEvenCounts())),y=!1,N=!1;u>13?N=!0:u<4&&(y=!0);let w=!1,C=!1;m>13?C=!0:m<4&&(w=!0);let O=u+m-o,R=(u&1)==1,q=(m&1)==0;if(O==1)if(R){if(q)throw new ne;N=!0}else{if(!q)throw new ne;C=!0}else if(O==-1)if(R){if(q)throw new ne;y=!0}else{if(!q)throw new ne;w=!0}else if(O==0){if(R){if(!q)throw new ne;u<m?(y=!0,C=!0):(N=!0,w=!0)}else if(q)throw new ne}else throw new ne;if(y){if(N)throw new ne;Je.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(N&&Je.decrement(this.getOddCounts(),this.getOddRoundingErrors()),w){if(C)throw new ne;Je.increment(this.getEvenCounts(),this.getOddRoundingErrors())}C&&Je.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Je.SYMBOL_WIDEST=[7,5,4,3,1],Je.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Je.GSUM=[0,348,1388,2948,3988],Je.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Je.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Je.FINDER_PAT_A=0,Je.FINDER_PAT_B=1,Je.FINDER_PAT_C=2,Je.FINDER_PAT_D=3,Je.FINDER_PAT_E=4,Je.FINDER_PAT_F=5,Je.FINDER_PATTERN_SEQUENCES=[[Je.FINDER_PAT_A,Je.FINDER_PAT_A],[Je.FINDER_PAT_A,Je.FINDER_PAT_B,Je.FINDER_PAT_B],[Je.FINDER_PAT_A,Je.FINDER_PAT_C,Je.FINDER_PAT_B,Je.FINDER_PAT_D],[Je.FINDER_PAT_A,Je.FINDER_PAT_E,Je.FINDER_PAT_B,Je.FINDER_PAT_D,Je.FINDER_PAT_C],[Je.FINDER_PAT_A,Je.FINDER_PAT_E,Je.FINDER_PAT_B,Je.FINDER_PAT_D,Je.FINDER_PAT_D,Je.FINDER_PAT_F],[Je.FINDER_PAT_A,Je.FINDER_PAT_E,Je.FINDER_PAT_B,Je.FINDER_PAT_D,Je.FINDER_PAT_E,Je.FINDER_PAT_F,Je.FINDER_PAT_F],[Je.FINDER_PAT_A,Je.FINDER_PAT_A,Je.FINDER_PAT_B,Je.FINDER_PAT_B,Je.FINDER_PAT_C,Je.FINDER_PAT_C,Je.FINDER_PAT_D,Je.FINDER_PAT_D],[Je.FINDER_PAT_A,Je.FINDER_PAT_A,Je.FINDER_PAT_B,Je.FINDER_PAT_B,Je.FINDER_PAT_C,Je.FINDER_PAT_C,Je.FINDER_PAT_D,Je.FINDER_PAT_E,Je.FINDER_PAT_E],[Je.FINDER_PAT_A,Je.FINDER_PAT_A,Je.FINDER_PAT_B,Je.FINDER_PAT_B,Je.FINDER_PAT_C,Je.FINDER_PAT_C,Je.FINDER_PAT_D,Je.FINDER_PAT_E,Je.FINDER_PAT_F,Je.FINDER_PAT_F],[Je.FINDER_PAT_A,Je.FINDER_PAT_A,Je.FINDER_PAT_B,Je.FINDER_PAT_B,Je.FINDER_PAT_C,Je.FINDER_PAT_D,Je.FINDER_PAT_D,Je.FINDER_PAT_E,Je.FINDER_PAT_E,Je.FINDER_PAT_F,Je.FINDER_PAT_F]],Je.MAX_PAIRS=11;class km extends Ws{constructor(o,u,m){super(o,u),this.count=0,this.finderPattern=m}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Er extends At{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,u,m){const y=this.decodePair(u,!1,o,m);Er.addOrTally(this.possibleLeftPairs,y),u.reverse();let N=this.decodePair(u,!0,o,m);Er.addOrTally(this.possibleRightPairs,N),u.reverse();for(let w of this.possibleLeftPairs)if(w.getCount()>1){for(let C of this.possibleRightPairs)if(C.getCount()>1&&Er.checkChecksum(w,C))return Er.constructResult(w,C)}throw new ne}static addOrTally(o,u){if(u==null)return;let m=!1;for(let y of o)if(y.getValue()===u.getValue()){y.incrementCount(),m=!0;break}m||o.push(u)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,u){let m=4537077*o.getValue()+u.getValue(),y=new String(m).toString(),N=new Q;for(let R=13-y.length;R>0;R--)N.append("0");N.append(y);let w=0;for(let R=0;R<13;R++){let q=N.charAt(R).charCodeAt(0)-48;w+=(R&1)===0?3*q:q}w=10-w%10,w===10&&(w=0),N.append(w.toString());let C=o.getFinderPattern().getResultPoints(),O=u.getFinderPattern().getResultPoints();return new fe(N.toString(),null,0,[C[0],C[1],O[0],O[1]],oe.RSS_14,new Date().getTime())}static checkChecksum(o,u){let m=(o.getChecksumPortion()+16*u.getChecksumPortion())%79,y=9*o.getFinderPattern().getValue()+u.getFinderPattern().getValue();return y>72&&y--,y>8&&y--,m===y}decodePair(o,u,m,y){try{let N=this.findFinderPattern(o,u),w=this.parseFoundFinderPattern(o,m,u,N),C=y==null?null:y.get(B.NEED_RESULT_POINT_CALLBACK);if(C!=null){let q=(N[0]+N[1])/2;u&&(q=o.getSize()-1-q),C.foundPossibleResultPoint(new Qe(q,m))}let O=this.decodeDataCharacter(o,w,!0),R=this.decodeDataCharacter(o,w,!1);return new km(1597*O.getValue()+R.getValue(),O.getChecksumPortion()+4*R.getChecksumPortion(),w)}catch{return null}}decodeDataCharacter(o,u,m){let y=this.getDataCharacterCounters();for(let Oe=0;Oe<y.length;Oe++)y[Oe]=0;if(m)_t.recordPatternInReverse(o,u.getStartEnd()[0],y);else{_t.recordPattern(o,u.getStartEnd()[1]+1,y);for(let Oe=0,Re=y.length-1;Oe<Re;Oe++,Re--){let it=y[Oe];y[Oe]=y[Re],y[Re]=it}}let N=m?16:15,w=dt.sum(new Int32Array(y))/N,C=this.getOddCounts(),O=this.getEvenCounts(),R=this.getOddRoundingErrors(),q=this.getEvenRoundingErrors();for(let Oe=0;Oe<y.length;Oe++){let Re=y[Oe]/w,it=Math.floor(Re+.5);it<1?it=1:it>8&&(it=8);let nt=Math.floor(Oe/2);(Oe&1)===0?(C[nt]=it,R[nt]=Re-it):(O[nt]=it,q[nt]=Re-it)}this.adjustOddEvenCounts(m,N);let Z=0,ee=0;for(let Oe=C.length-1;Oe>=0;Oe--)ee*=9,ee+=C[Oe],Z+=C[Oe];let ue=0,be=0;for(let Oe=O.length-1;Oe>=0;Oe--)ue*=9,ue+=O[Oe],be+=O[Oe];let Ne=ee+3*ue;if(m){if((Z&1)!==0||Z>12||Z<4)throw new ne;let Oe=(12-Z)/2,Re=Er.OUTSIDE_ODD_WIDEST[Oe],it=9-Re,nt=Nn.getRSSvalue(C,Re,!1),et=Nn.getRSSvalue(O,it,!0),Gt=Er.OUTSIDE_EVEN_TOTAL_SUBSET[Oe],Ft=Er.OUTSIDE_GSUM[Oe];return new Ws(nt*Gt+et+Ft,Ne)}else{if((be&1)!==0||be>10||be<4)throw new ne;let Oe=(10-be)/2,Re=Er.INSIDE_ODD_WIDEST[Oe],it=9-Re,nt=Nn.getRSSvalue(C,Re,!0),et=Nn.getRSSvalue(O,it,!1),Gt=Er.INSIDE_ODD_TOTAL_SUBSET[Oe],Ft=Er.INSIDE_GSUM[Oe];return new Ws(et*Gt+nt+Ft,Ne)}}findFinderPattern(o,u){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let y=o.getSize(),N=!1,w=0;for(;w<y&&(N=!o.get(w),u!==N);)w++;let C=0,O=w;for(let R=w;R<y;R++)if(o.get(R)!==N)m[C]++;else{if(C===3){if(At.isFinderPattern(m))return[O,R];O+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,C--}else C++;m[C]=1,N=!N}throw new ne}parseFoundFinderPattern(o,u,m,y){let N=o.get(y[0]),w=y[0]-1;for(;w>=0&&N!==o.get(w);)w--;w++;const C=y[0]-w,O=this.getDecodeFinderCounters(),R=new Int32Array(O.length);P.arraycopy(O,0,R,1,O.length-1),R[0]=C;const q=this.parseFinderValue(R,Er.FINDER_PATTERNS);let Z=w,ee=y[1];return m&&(Z=o.getSize()-1-Z,ee=o.getSize()-1-ee),new Un(q,[w,y[1]],Z,ee,u)}adjustOddEvenCounts(o,u){let m=dt.sum(new Int32Array(this.getOddCounts())),y=dt.sum(new Int32Array(this.getEvenCounts())),N=!1,w=!1,C=!1,O=!1;o?(m>12?w=!0:m<4&&(N=!0),y>12?O=!0:y<4&&(C=!0)):(m>11?w=!0:m<5&&(N=!0),y>10?O=!0:y<4&&(C=!0));let R=m+y-u,q=(m&1)===(o?1:0),Z=(y&1)===1;if(R===1)if(q){if(Z)throw new ne;w=!0}else{if(!Z)throw new ne;O=!0}else if(R===-1)if(q){if(Z)throw new ne;N=!0}else{if(!Z)throw new ne;C=!0}else if(R===0){if(q){if(!Z)throw new ne;m<y?(N=!0,O=!0):(w=!0,C=!0)}else if(Z)throw new ne}else throw new ne;if(N){if(w)throw new ne;At.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(w&&At.decrement(this.getOddCounts(),this.getOddRoundingErrors()),C){if(O)throw new ne;At.increment(this.getEvenCounts(),this.getOddRoundingErrors())}O&&At.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Er.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Er.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Er.OUTSIDE_GSUM=[0,161,961,2015,2715],Er.INSIDE_GSUM=[0,336,1036,1516],Er.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Er.INSIDE_ODD_WIDEST=[2,4,6,8],Er.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class sa extends _t{constructor(o,u){super(),this.readers=[],this.verbose=u===!0;const m=o?o.get(B.POSSIBLE_FORMATS):null,y=o&&o.get(B.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;m?((m.includes(oe.EAN_13)||m.includes(oe.UPC_A)||m.includes(oe.EAN_8)||m.includes(oe.UPC_E))&&this.readers.push(new $e(o)),m.includes(oe.CODE_39)&&this.readers.push(new tt(y)),m.includes(oe.CODE_128)&&this.readers.push(new Ae),m.includes(oe.ITF)&&this.readers.push(new lt),m.includes(oe.RSS_14)&&this.readers.push(new Er),m.includes(oe.RSS_EXPANDED)&&this.readers.push(new Je(this.verbose))):(this.readers.push(new $e(o)),this.readers.push(new tt),this.readers.push(new $e(o)),this.readers.push(new Ae),this.readers.push(new lt),this.readers.push(new Er),this.readers.push(new Je(this.verbose)))}decodeRow(o,u,m){for(let y=0;y<this.readers.length;y++)try{return this.readers[y].decodeRow(o,u,m)}catch{}throw new ne}reset(){this.readers.forEach(o=>o.reset())}}class gy extends ve{constructor(o=500,u){super(new sa(u),o,u)}}class mr{constructor(o,u,m){this.ecCodewords=o,this.ecBlocks=[u],m&&this.ecBlocks.push(m)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class hr{constructor(o,u){this.count=o,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Qt{constructor(o,u,m,y,N,w){this.versionNumber=o,this.symbolSizeRows=u,this.symbolSizeColumns=m,this.dataRegionSizeRows=y,this.dataRegionSizeColumns=N,this.ecBlocks=w;let C=0;const O=w.getECCodewords(),R=w.getECBlocks();for(let q of R)C+=q.getCount()*(q.getDataCodewords()+O);this.totalCodewords=C}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,u){if((o&1)!==0||(u&1)!==0)throw new M;for(let m of Qt.VERSIONS)if(m.symbolSizeRows===o&&m.symbolSizeColumns===u)return m;throw new M}toString(){return""+this.versionNumber}static buildVersions(){return[new Qt(1,10,10,8,8,new mr(5,new hr(1,3))),new Qt(2,12,12,10,10,new mr(7,new hr(1,5))),new Qt(3,14,14,12,12,new mr(10,new hr(1,8))),new Qt(4,16,16,14,14,new mr(12,new hr(1,12))),new Qt(5,18,18,16,16,new mr(14,new hr(1,18))),new Qt(6,20,20,18,18,new mr(18,new hr(1,22))),new Qt(7,22,22,20,20,new mr(20,new hr(1,30))),new Qt(8,24,24,22,22,new mr(24,new hr(1,36))),new Qt(9,26,26,24,24,new mr(28,new hr(1,44))),new Qt(10,32,32,14,14,new mr(36,new hr(1,62))),new Qt(11,36,36,16,16,new mr(42,new hr(1,86))),new Qt(12,40,40,18,18,new mr(48,new hr(1,114))),new Qt(13,44,44,20,20,new mr(56,new hr(1,144))),new Qt(14,48,48,22,22,new mr(68,new hr(1,174))),new Qt(15,52,52,24,24,new mr(42,new hr(2,102))),new Qt(16,64,64,14,14,new mr(56,new hr(2,140))),new Qt(17,72,72,16,16,new mr(36,new hr(4,92))),new Qt(18,80,80,18,18,new mr(48,new hr(4,114))),new Qt(19,88,88,20,20,new mr(56,new hr(4,144))),new Qt(20,96,96,22,22,new mr(68,new hr(4,174))),new Qt(21,104,104,24,24,new mr(56,new hr(6,136))),new Qt(22,120,120,18,18,new mr(68,new hr(6,175))),new Qt(23,132,132,20,20,new mr(62,new hr(8,163))),new Qt(24,144,144,22,22,new mr(62,new hr(8,156),new hr(2,155))),new Qt(25,8,18,6,16,new mr(7,new hr(1,5))),new Qt(26,8,32,6,14,new mr(11,new hr(1,10))),new Qt(27,12,26,10,24,new mr(14,new hr(1,16))),new Qt(28,12,36,10,16,new mr(18,new hr(1,22))),new Qt(29,16,36,14,16,new mr(24,new hr(1,32))),new Qt(30,16,48,14,22,new mr(28,new hr(1,49)))]}}Qt.VERSIONS=Qt.buildVersions();class Zl{constructor(o){const u=o.getHeight();if(u<8||u>144||(u&1)!==0)throw new M;this.version=Zl.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new ce(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const u=o.getHeight(),m=o.getWidth();return Qt.getVersionForDimensions(u,m)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let u=0,m=4,y=0;const N=this.mappingBitMatrix.getHeight(),w=this.mappingBitMatrix.getWidth();let C=!1,O=!1,R=!1,q=!1;do if(m===N&&y===0&&!C)o[u++]=this.readCorner1(N,w)&255,m-=2,y+=2,C=!0;else if(m===N-2&&y===0&&(w&3)!==0&&!O)o[u++]=this.readCorner2(N,w)&255,m-=2,y+=2,O=!0;else if(m===N+4&&y===2&&(w&7)===0&&!R)o[u++]=this.readCorner3(N,w)&255,m-=2,y+=2,R=!0;else if(m===N-2&&y===0&&(w&7)===4&&!q)o[u++]=this.readCorner4(N,w)&255,m-=2,y+=2,q=!0;else{do m<N&&y>=0&&!this.readMappingMatrix.get(y,m)&&(o[u++]=this.readUtah(m,y,N,w)&255),m-=2,y+=2;while(m>=0&&y<w);m+=1,y+=3;do m>=0&&y<w&&!this.readMappingMatrix.get(y,m)&&(o[u++]=this.readUtah(m,y,N,w)&255),m+=2,y-=2;while(m<N&&y>=0);m+=3,y+=1}while(m<N||y<w);if(u!==this.version.getTotalCodewords())throw new M;return o}readModule(o,u,m,y){return o<0&&(o+=m,u+=4-(m+4&7)),u<0&&(u+=y,o+=4-(y+4&7)),this.readMappingMatrix.set(u,o),this.mappingBitMatrix.get(u,o)}readUtah(o,u,m,y){let N=0;return this.readModule(o-2,u-2,m,y)&&(N|=1),N<<=1,this.readModule(o-2,u-1,m,y)&&(N|=1),N<<=1,this.readModule(o-1,u-2,m,y)&&(N|=1),N<<=1,this.readModule(o-1,u-1,m,y)&&(N|=1),N<<=1,this.readModule(o-1,u,m,y)&&(N|=1),N<<=1,this.readModule(o,u-2,m,y)&&(N|=1),N<<=1,this.readModule(o,u-1,m,y)&&(N|=1),N<<=1,this.readModule(o,u,m,y)&&(N|=1),N}readCorner1(o,u){let m=0;return this.readModule(o-1,0,o,u)&&(m|=1),m<<=1,this.readModule(o-1,1,o,u)&&(m|=1),m<<=1,this.readModule(o-1,2,o,u)&&(m|=1),m<<=1,this.readModule(0,u-2,o,u)&&(m|=1),m<<=1,this.readModule(0,u-1,o,u)&&(m|=1),m<<=1,this.readModule(1,u-1,o,u)&&(m|=1),m<<=1,this.readModule(2,u-1,o,u)&&(m|=1),m<<=1,this.readModule(3,u-1,o,u)&&(m|=1),m}readCorner2(o,u){let m=0;return this.readModule(o-3,0,o,u)&&(m|=1),m<<=1,this.readModule(o-2,0,o,u)&&(m|=1),m<<=1,this.readModule(o-1,0,o,u)&&(m|=1),m<<=1,this.readModule(0,u-4,o,u)&&(m|=1),m<<=1,this.readModule(0,u-3,o,u)&&(m|=1),m<<=1,this.readModule(0,u-2,o,u)&&(m|=1),m<<=1,this.readModule(0,u-1,o,u)&&(m|=1),m<<=1,this.readModule(1,u-1,o,u)&&(m|=1),m}readCorner3(o,u){let m=0;return this.readModule(o-1,0,o,u)&&(m|=1),m<<=1,this.readModule(o-1,u-1,o,u)&&(m|=1),m<<=1,this.readModule(0,u-3,o,u)&&(m|=1),m<<=1,this.readModule(0,u-2,o,u)&&(m|=1),m<<=1,this.readModule(0,u-1,o,u)&&(m|=1),m<<=1,this.readModule(1,u-3,o,u)&&(m|=1),m<<=1,this.readModule(1,u-2,o,u)&&(m|=1),m<<=1,this.readModule(1,u-1,o,u)&&(m|=1),m}readCorner4(o,u){let m=0;return this.readModule(o-3,0,o,u)&&(m|=1),m<<=1,this.readModule(o-2,0,o,u)&&(m|=1),m<<=1,this.readModule(o-1,0,o,u)&&(m|=1),m<<=1,this.readModule(0,u-2,o,u)&&(m|=1),m<<=1,this.readModule(0,u-1,o,u)&&(m|=1),m<<=1,this.readModule(1,u-1,o,u)&&(m|=1),m<<=1,this.readModule(2,u-1,o,u)&&(m|=1),m<<=1,this.readModule(3,u-1,o,u)&&(m|=1),m}extractDataRegion(o){const u=this.version.getSymbolSizeRows(),m=this.version.getSymbolSizeColumns();if(o.getHeight()!==u)throw new b("Dimension of bitMatrix must match the version size");const y=this.version.getDataRegionSizeRows(),N=this.version.getDataRegionSizeColumns(),w=u/y|0,C=m/N|0,O=w*y,R=C*N,q=new ce(R,O);for(let Z=0;Z<w;++Z){const ee=Z*y;for(let ue=0;ue<C;++ue){const be=ue*N;for(let Ne=0;Ne<y;++Ne){const Oe=Z*(y+2)+1+Ne,Re=ee+Ne;for(let it=0;it<N;++it){const nt=ue*(N+2)+1+it;if(o.get(nt,Oe)){const et=be+it;q.set(et,Re)}}}}}return q}}class Ql{constructor(o,u){this.numDataCodewords=o,this.codewords=u}static getDataBlocks(o,u){const m=u.getECBlocks();let y=0;const N=m.getECBlocks();for(let Ne of N)y+=Ne.getCount();const w=new Array(y);let C=0;for(let Ne of N)for(let Oe=0;Oe<Ne.getCount();Oe++){const Re=Ne.getDataCodewords(),it=m.getECCodewords()+Re;w[C++]=new Ql(Re,new Uint8Array(it))}const R=w[0].codewords.length-m.getECCodewords(),q=R-1;let Z=0;for(let Ne=0;Ne<q;Ne++)for(let Oe=0;Oe<C;Oe++)w[Oe].codewords[Ne]=o[Z++];const ee=u.getVersionNumber()===24,ue=ee?8:C;for(let Ne=0;Ne<ue;Ne++)w[Ne].codewords[R-1]=o[Z++];const be=w[0].codewords.length;for(let Ne=R;Ne<be;Ne++)for(let Oe=0;Oe<C;Oe++){const Re=ee?(Oe+8)%C:Oe,it=ee&&Re>7?Ne-1:Ne;w[Re].codewords[it]=o[Z++]}if(Z!==o.length)throw new b;return w}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class na{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new b(""+o);let u=0,m=this.bitOffset,y=this.byteOffset;const N=this.bytes;if(m>0){const w=8-m,C=o<w?o:w,O=w-C,R=255>>8-C<<O;u=(N[y]&R)>>O,o-=C,m+=C,m===8&&(m=0,y++)}if(o>0){for(;o>=8;)u=u<<8|N[y]&255,y++,o-=8;if(o>0){const w=8-o,C=255>>w<<w;u=u<<o|(N[y]&C)>>w,m+=o}}return this.bitOffset=m,this.byteOffset=y,u}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var xr;(function(K){K[K.PAD_ENCODE=0]="PAD_ENCODE",K[K.ASCII_ENCODE=1]="ASCII_ENCODE",K[K.C40_ENCODE=2]="C40_ENCODE",K[K.TEXT_ENCODE=3]="TEXT_ENCODE",K[K.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",K[K.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",K[K.BASE256_ENCODE=6]="BASE256_ENCODE"})(xr||(xr={}));class ti{static decode(o){const u=new na(o),m=new Q,y=new Q,N=new Array;let w=xr.ASCII_ENCODE;do if(w===xr.ASCII_ENCODE)w=this.decodeAsciiSegment(u,m,y);else{switch(w){case xr.C40_ENCODE:this.decodeC40Segment(u,m);break;case xr.TEXT_ENCODE:this.decodeTextSegment(u,m);break;case xr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(u,m);break;case xr.EDIFACT_ENCODE:this.decodeEdifactSegment(u,m);break;case xr.BASE256_ENCODE:this.decodeBase256Segment(u,m,N);break;default:throw new M}w=xr.ASCII_ENCODE}while(w!==xr.PAD_ENCODE&&u.available()>0);return y.length()>0&&m.append(y.toString()),new Ce(o,m.toString(),N.length===0?null:N,null)}static decodeAsciiSegment(o,u,m){let y=!1;do{let N=o.readBits(8);if(N===0)throw new M;if(N<=128)return y&&(N+=128),u.append(String.fromCharCode(N-1)),xr.ASCII_ENCODE;if(N===129)return xr.PAD_ENCODE;if(N<=229){const w=N-130;w<10&&u.append("0"),u.append(""+w)}else switch(N){case 230:return xr.C40_ENCODE;case 231:return xr.BASE256_ENCODE;case 232:u.append("");break;case 233:case 234:break;case 235:y=!0;break;case 236:u.append("[)>05"),m.insert(0,"");break;case 237:u.append("[)>06"),m.insert(0,"");break;case 238:return xr.ANSIX12_ENCODE;case 239:return xr.TEXT_ENCODE;case 240:return xr.EDIFACT_ENCODE;case 241:break;default:if(N!==254||o.available()!==0)throw new M;break}}while(o.available()>0);return xr.ASCII_ENCODE}static decodeC40Segment(o,u){let m=!1;const y=[];let N=0;do{if(o.available()===8)return;const w=o.readBits(8);if(w===254)return;this.parseTwoBytes(w,o.readBits(8),y);for(let C=0;C<3;C++){const O=y[C];switch(N){case 0:if(O<3)N=O+1;else if(O<this.C40_BASIC_SET_CHARS.length){const R=this.C40_BASIC_SET_CHARS[O];m?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),m=!1):u.append(R)}else throw new M;break;case 1:m?(u.append(String.fromCharCode(O+128)),m=!1):u.append(String.fromCharCode(O)),N=0;break;case 2:if(O<this.C40_SHIFT2_SET_CHARS.length){const R=this.C40_SHIFT2_SET_CHARS[O];m?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),m=!1):u.append(R)}else switch(O){case 27:u.append("");break;case 30:m=!0;break;default:throw new M}N=0;break;case 3:m?(u.append(String.fromCharCode(O+224)),m=!1):u.append(String.fromCharCode(O+96)),N=0;break;default:throw new M}}}while(o.available()>0)}static decodeTextSegment(o,u){let m=!1,y=[],N=0;do{if(o.available()===8)return;const w=o.readBits(8);if(w===254)return;this.parseTwoBytes(w,o.readBits(8),y);for(let C=0;C<3;C++){const O=y[C];switch(N){case 0:if(O<3)N=O+1;else if(O<this.TEXT_BASIC_SET_CHARS.length){const R=this.TEXT_BASIC_SET_CHARS[O];m?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),m=!1):u.append(R)}else throw new M;break;case 1:m?(u.append(String.fromCharCode(O+128)),m=!1):u.append(String.fromCharCode(O)),N=0;break;case 2:if(O<this.TEXT_SHIFT2_SET_CHARS.length){const R=this.TEXT_SHIFT2_SET_CHARS[O];m?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),m=!1):u.append(R)}else switch(O){case 27:u.append("");break;case 30:m=!0;break;default:throw new M}N=0;break;case 3:if(O<this.TEXT_SHIFT3_SET_CHARS.length){const R=this.TEXT_SHIFT3_SET_CHARS[O];m?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),m=!1):u.append(R),N=0}else throw new M;break;default:throw new M}}}while(o.available()>0)}static decodeAnsiX12Segment(o,u){const m=[];do{if(o.available()===8)return;const y=o.readBits(8);if(y===254)return;this.parseTwoBytes(y,o.readBits(8),m);for(let N=0;N<3;N++){const w=m[N];switch(w){case 0:u.append("\r");break;case 1:u.append("*");break;case 2:u.append(">");break;case 3:u.append(" ");break;default:if(w<14)u.append(String.fromCharCode(w+44));else if(w<40)u.append(String.fromCharCode(w+51));else throw new M;break}}}while(o.available()>0)}static parseTwoBytes(o,u,m){let y=(o<<8)+u-1,N=Math.floor(y/1600);m[0]=N,y-=N*1600,N=Math.floor(y/40),m[1]=N,m[2]=y-N*40}static decodeEdifactSegment(o,u){do{if(o.available()<=16)return;for(let m=0;m<4;m++){let y=o.readBits(6);if(y===31){const N=8-o.getBitOffset();N!==8&&o.readBits(N);return}(y&32)===0&&(y|=64),u.append(String.fromCharCode(y))}}while(o.available()>0)}static decodeBase256Segment(o,u,m){let y=1+o.getByteOffset();const N=this.unrandomize255State(o.readBits(8),y++);let w;if(N===0?w=o.available()/8|0:N<250?w=N:w=250*(N-249)+this.unrandomize255State(o.readBits(8),y++),w<0)throw new M;const C=new Uint8Array(w);for(let O=0;O<w;O++){if(o.available()<8)throw new M;C[O]=this.unrandomize255State(o.readBits(8),y++)}m.push(C);try{u.append(U.decode(C,G.ISO88591))}catch(O){throw new me("Platform does not support required encoding: "+O.message)}}static unrandomize255State(o,u){const m=149*u%255+1,y=o-m;return y>=0?y:y+256}}ti.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ti.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ti.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ti.TEXT_SHIFT2_SET_CHARS=ti.C40_SHIFT2_SET_CHARS,ti.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class xy{constructor(){this.rsDecoder=new Ge(pe.DATA_MATRIX_FIELD_256)}decode(o){const u=new Zl(o),m=u.getVersion(),y=u.readCodewords(),N=Ql.getDataBlocks(y,m);let w=0;for(let R of N)w+=R.getNumDataCodewords();const C=new Uint8Array(w),O=N.length;for(let R=0;R<O;R++){const q=N[R],Z=q.getCodewords(),ee=q.getNumDataCodewords();this.correctErrors(Z,ee);for(let ue=0;ue<ee;ue++)C[ue*O+R]=Z[ue]}return ti.decode(C)}correctErrors(o,u){const m=new Int32Array(o);try{this.rsDecoder.decode(m,o.length-u)}catch{throw new T}for(let y=0;y<u;y++)o[y]=m[y]}}class Zr{constructor(o){this.image=o,this.rectangleDetector=new ft(this.image)}detect(){const o=this.rectangleDetector.detect();let u=this.detectSolid1(o);if(u=this.detectSolid2(u),u[3]=this.correctTopRight(u),!u[3])throw new ne;u=this.shiftToModuleCenter(u);const m=u[0],y=u[1],N=u[2],w=u[3];let C=this.transitionsBetween(m,w)+1,O=this.transitionsBetween(N,w)+1;(C&1)===1&&(C+=1),(O&1)===1&&(O+=1),4*C<7*O&&4*O<7*C&&(C=O=Math.max(C,O));let R=Zr.sampleGrid(this.image,m,y,N,w,C,O);return new ct(R,[m,y,N,w])}static shiftPoint(o,u,m){let y=(u.getX()-o.getX())/(m+1),N=(u.getY()-o.getY())/(m+1);return new Qe(o.getX()+y,o.getY()+N)}static moveAway(o,u,m){let y=o.getX(),N=o.getY();return y<u?y-=1:y+=1,N<m?N-=1:N+=1,new Qe(y,N)}detectSolid1(o){let u=o[0],m=o[1],y=o[3],N=o[2],w=this.transitionsBetween(u,m),C=this.transitionsBetween(m,y),O=this.transitionsBetween(y,N),R=this.transitionsBetween(N,u),q=w,Z=[N,u,m,y];return q>C&&(q=C,Z[0]=u,Z[1]=m,Z[2]=y,Z[3]=N),q>O&&(q=O,Z[0]=m,Z[1]=y,Z[2]=N,Z[3]=u),q>R&&(Z[0]=y,Z[1]=N,Z[2]=u,Z[3]=m),Z}detectSolid2(o){let u=o[0],m=o[1],y=o[2],N=o[3],w=this.transitionsBetween(u,N),C=Zr.shiftPoint(m,y,(w+1)*4),O=Zr.shiftPoint(y,m,(w+1)*4),R=this.transitionsBetween(C,u),q=this.transitionsBetween(O,N);return R<q?(o[0]=u,o[1]=m,o[2]=y,o[3]=N):(o[0]=m,o[1]=y,o[2]=N,o[3]=u),o}correctTopRight(o){let u=o[0],m=o[1],y=o[2],N=o[3],w=this.transitionsBetween(u,N),C=this.transitionsBetween(m,N),O=Zr.shiftPoint(u,m,(C+1)*4),R=Zr.shiftPoint(y,m,(w+1)*4);w=this.transitionsBetween(O,N),C=this.transitionsBetween(R,N);let q=new Qe(N.getX()+(y.getX()-m.getX())/(w+1),N.getY()+(y.getY()-m.getY())/(w+1)),Z=new Qe(N.getX()+(u.getX()-m.getX())/(C+1),N.getY()+(u.getY()-m.getY())/(C+1));if(!this.isValid(q))return this.isValid(Z)?Z:null;if(!this.isValid(Z))return q;let ee=this.transitionsBetween(O,q)+this.transitionsBetween(R,q),ue=this.transitionsBetween(O,Z)+this.transitionsBetween(R,Z);return ee>ue?q:Z}shiftToModuleCenter(o){let u=o[0],m=o[1],y=o[2],N=o[3],w=this.transitionsBetween(u,N)+1,C=this.transitionsBetween(y,N)+1,O=Zr.shiftPoint(u,m,C*4),R=Zr.shiftPoint(y,m,w*4);w=this.transitionsBetween(O,N)+1,C=this.transitionsBetween(R,N)+1,(w&1)===1&&(w+=1),(C&1)===1&&(C+=1);let q=(u.getX()+m.getX()+y.getX()+N.getX())/4,Z=(u.getY()+m.getY()+y.getY()+N.getY())/4;u=Zr.moveAway(u,q,Z),m=Zr.moveAway(m,q,Z),y=Zr.moveAway(y,q,Z),N=Zr.moveAway(N,q,Z);let ee,ue;return O=Zr.shiftPoint(u,m,C*4),O=Zr.shiftPoint(O,N,w*4),ee=Zr.shiftPoint(m,u,C*4),ee=Zr.shiftPoint(ee,y,w*4),R=Zr.shiftPoint(y,N,C*4),R=Zr.shiftPoint(R,m,w*4),ue=Zr.shiftPoint(N,y,C*4),ue=Zr.shiftPoint(ue,u,w*4),[O,ee,R,ue]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,u,m,y,N,w,C){return Ye.getInstance().sampleGrid(o,w,C,.5,.5,w-.5,.5,w-.5,C-.5,.5,C-.5,u.getX(),u.getY(),N.getX(),N.getY(),y.getX(),y.getY(),m.getX(),m.getY())}transitionsBetween(o,u){let m=Math.trunc(o.getX()),y=Math.trunc(o.getY()),N=Math.trunc(u.getX()),w=Math.trunc(u.getY()),C=Math.abs(w-y)>Math.abs(N-m);if(C){let Ne=m;m=y,y=Ne,Ne=N,N=w,w=Ne}let O=Math.abs(N-m),R=Math.abs(w-y),q=-O/2,Z=y<w?1:-1,ee=m<N?1:-1,ue=0,be=this.image.get(C?y:m,C?m:y);for(let Ne=m,Oe=y;Ne!==N;Ne+=ee){let Re=this.image.get(C?Oe:Ne,C?Ne:Oe);if(Re!==be&&(ue++,be=Re),q+=R,q>0){if(Oe===w)break;Oe+=Z,q-=O}}return ue}}class ri{constructor(){this.decoder=new xy}decode(o,u=null){let m,y;if(u!=null&&u.has(B.PURE_BARCODE)){const R=ri.extractPureBits(o.getBlackMatrix());m=this.decoder.decode(R),y=ri.NO_POINTS}else{const R=new Zr(o.getBlackMatrix()).detect();m=this.decoder.decode(R.getBits()),y=R.getPoints()}const N=m.getRawBytes(),w=new fe(m.getText(),N,8*N.length,y,oe.DATA_MATRIX,P.currentTimeMillis()),C=m.getByteSegments();C!=null&&w.putMetadata(Ve.BYTE_SEGMENTS,C);const O=m.getECLevel();return O!=null&&w.putMetadata(Ve.ERROR_CORRECTION_LEVEL,O),w}reset(){}static extractPureBits(o){const u=o.getTopLeftOnBit(),m=o.getBottomRightOnBit();if(u==null||m==null)throw new ne;const y=this.moduleSize(u,o);let N=u[1];const w=m[1];let C=u[0];const R=(m[0]-C+1)/y,q=(w-N+1)/y;if(R<=0||q<=0)throw new ne;const Z=y/2;N+=Z,C+=Z;const ee=new ce(R,q);for(let ue=0;ue<q;ue++){const be=N+ue*y;for(let Ne=0;Ne<R;Ne++)o.get(C+Ne*y,be)&&ee.set(Ne,ue)}return ee}static moduleSize(o,u){const m=u.getWidth();let y=o[0];const N=o[1];for(;y<m&&u.get(y,N);)y++;if(y===m)throw new ne;const w=y-o[0];if(w===0)throw new ne;return w}}ri.NO_POINTS=[];class md extends ve{constructor(o=500){super(new ri,o)}}var Jl;(function(K){K[K.L=0]="L",K[K.M=1]="M",K[K.Q=2]="Q",K[K.H=3]="H"})(Jl||(Jl={}));class Wt{constructor(o,u,m){this.value=o,this.stringValue=u,this.bits=m,Wt.FOR_BITS.set(m,this),Wt.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return Wt.L;case"M":return Wt.M;case"Q":return Wt.Q;case"H":return Wt.H;default:throw new p(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof Wt))return!1;const u=o;return this.value===u.value}static forBits(o){if(o<0||o>=Wt.FOR_BITS.size)throw new b;return Wt.FOR_BITS.get(o)}}Wt.FOR_BITS=new Map,Wt.FOR_VALUE=new Map,Wt.L=new Wt(Jl.L,"L",1),Wt.M=new Wt(Jl.M,"M",0),Wt.Q=new Wt(Jl.Q,"Q",3),Wt.H=new Wt(Jl.H,"H",2);class Ls{constructor(o){this.errorCorrectionLevel=Wt.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,u){return _.bitCount(o^u)}static decodeFormatInformation(o,u){const m=Ls.doDecodeFormatInformation(o,u);return m!==null?m:Ls.doDecodeFormatInformation(o^Ls.FORMAT_INFO_MASK_QR,u^Ls.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,u){let m=Number.MAX_SAFE_INTEGER,y=0;for(const N of Ls.FORMAT_INFO_DECODE_LOOKUP){const w=N[0];if(w===o||w===u)return new Ls(N[1]);let C=Ls.numBitsDiffering(o,w);C<m&&(y=N[1],m=C),o!==u&&(C=Ls.numBitsDiffering(u,w),C<m&&(y=N[1],m=C))}return m<=3?new Ls(y):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof Ls))return!1;const u=o;return this.errorCorrectionLevel===u.errorCorrectionLevel&&this.dataMask===u.dataMask}}Ls.FORMAT_INFO_MASK_QR=21522,Ls.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Pe{constructor(o,...u){this.ecCodewordsPerBlock=o,this.ecBlocks=u}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const u=this.ecBlocks;for(const m of u)o+=m.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ie{constructor(o,u){this.count=o,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class jt{constructor(o,u,...m){this.versionNumber=o,this.alignmentPatternCenters=u,this.ecBlocks=m;let y=0;const N=m[0].getECCodewordsPerBlock(),w=m[0].getECBlocks();for(const C of w)y+=C.getCount()*(C.getDataCodewords()+N);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new M;try{return this.getVersionForNumber((o-17)/4)}catch{throw new M}}static getVersionForNumber(o){if(o<1||o>40)throw new b;return jt.VERSIONS[o-1]}static decodeVersionInformation(o){let u=Number.MAX_SAFE_INTEGER,m=0;for(let y=0;y<jt.VERSION_DECODE_INFO.length;y++){const N=jt.VERSION_DECODE_INFO[y];if(N===o)return jt.getVersionForNumber(y+7);const w=Ls.numBitsDiffering(o,N);w<u&&(m=y+7,u=w)}return u<=3?jt.getVersionForNumber(m):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),u=new ce(o);u.setRegion(0,0,9,9),u.setRegion(o-8,0,8,9),u.setRegion(0,o-8,9,8);const m=this.alignmentPatternCenters.length;for(let y=0;y<m;y++){const N=this.alignmentPatternCenters[y]-2;for(let w=0;w<m;w++)y===0&&(w===0||w===m-1)||y===m-1&&w===0||u.setRegion(this.alignmentPatternCenters[w]-2,N,5,5)}return u.setRegion(6,9,1,o-17),u.setRegion(9,6,o-17,1),this.versionNumber>6&&(u.setRegion(o-11,0,3,6),u.setRegion(0,o-11,6,3)),u}toString(){return""+this.versionNumber}}jt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),jt.VERSIONS=[new jt(1,new Int32Array(0),new Pe(7,new ie(1,19)),new Pe(10,new ie(1,16)),new Pe(13,new ie(1,13)),new Pe(17,new ie(1,9))),new jt(2,Int32Array.from([6,18]),new Pe(10,new ie(1,34)),new Pe(16,new ie(1,28)),new Pe(22,new ie(1,22)),new Pe(28,new ie(1,16))),new jt(3,Int32Array.from([6,22]),new Pe(15,new ie(1,55)),new Pe(26,new ie(1,44)),new Pe(18,new ie(2,17)),new Pe(22,new ie(2,13))),new jt(4,Int32Array.from([6,26]),new Pe(20,new ie(1,80)),new Pe(18,new ie(2,32)),new Pe(26,new ie(2,24)),new Pe(16,new ie(4,9))),new jt(5,Int32Array.from([6,30]),new Pe(26,new ie(1,108)),new Pe(24,new ie(2,43)),new Pe(18,new ie(2,15),new ie(2,16)),new Pe(22,new ie(2,11),new ie(2,12))),new jt(6,Int32Array.from([6,34]),new Pe(18,new ie(2,68)),new Pe(16,new ie(4,27)),new Pe(24,new ie(4,19)),new Pe(28,new ie(4,15))),new jt(7,Int32Array.from([6,22,38]),new Pe(20,new ie(2,78)),new Pe(18,new ie(4,31)),new Pe(18,new ie(2,14),new ie(4,15)),new Pe(26,new ie(4,13),new ie(1,14))),new jt(8,Int32Array.from([6,24,42]),new Pe(24,new ie(2,97)),new Pe(22,new ie(2,38),new ie(2,39)),new Pe(22,new ie(4,18),new ie(2,19)),new Pe(26,new ie(4,14),new ie(2,15))),new jt(9,Int32Array.from([6,26,46]),new Pe(30,new ie(2,116)),new Pe(22,new ie(3,36),new ie(2,37)),new Pe(20,new ie(4,16),new ie(4,17)),new Pe(24,new ie(4,12),new ie(4,13))),new jt(10,Int32Array.from([6,28,50]),new Pe(18,new ie(2,68),new ie(2,69)),new Pe(26,new ie(4,43),new ie(1,44)),new Pe(24,new ie(6,19),new ie(2,20)),new Pe(28,new ie(6,15),new ie(2,16))),new jt(11,Int32Array.from([6,30,54]),new Pe(20,new ie(4,81)),new Pe(30,new ie(1,50),new ie(4,51)),new Pe(28,new ie(4,22),new ie(4,23)),new Pe(24,new ie(3,12),new ie(8,13))),new jt(12,Int32Array.from([6,32,58]),new Pe(24,new ie(2,92),new ie(2,93)),new Pe(22,new ie(6,36),new ie(2,37)),new Pe(26,new ie(4,20),new ie(6,21)),new Pe(28,new ie(7,14),new ie(4,15))),new jt(13,Int32Array.from([6,34,62]),new Pe(26,new ie(4,107)),new Pe(22,new ie(8,37),new ie(1,38)),new Pe(24,new ie(8,20),new ie(4,21)),new Pe(22,new ie(12,11),new ie(4,12))),new jt(14,Int32Array.from([6,26,46,66]),new Pe(30,new ie(3,115),new ie(1,116)),new Pe(24,new ie(4,40),new ie(5,41)),new Pe(20,new ie(11,16),new ie(5,17)),new Pe(24,new ie(11,12),new ie(5,13))),new jt(15,Int32Array.from([6,26,48,70]),new Pe(22,new ie(5,87),new ie(1,88)),new Pe(24,new ie(5,41),new ie(5,42)),new Pe(30,new ie(5,24),new ie(7,25)),new Pe(24,new ie(11,12),new ie(7,13))),new jt(16,Int32Array.from([6,26,50,74]),new Pe(24,new ie(5,98),new ie(1,99)),new Pe(28,new ie(7,45),new ie(3,46)),new Pe(24,new ie(15,19),new ie(2,20)),new Pe(30,new ie(3,15),new ie(13,16))),new jt(17,Int32Array.from([6,30,54,78]),new Pe(28,new ie(1,107),new ie(5,108)),new Pe(28,new ie(10,46),new ie(1,47)),new Pe(28,new ie(1,22),new ie(15,23)),new Pe(28,new ie(2,14),new ie(17,15))),new jt(18,Int32Array.from([6,30,56,82]),new Pe(30,new ie(5,120),new ie(1,121)),new Pe(26,new ie(9,43),new ie(4,44)),new Pe(28,new ie(17,22),new ie(1,23)),new Pe(28,new ie(2,14),new ie(19,15))),new jt(19,Int32Array.from([6,30,58,86]),new Pe(28,new ie(3,113),new ie(4,114)),new Pe(26,new ie(3,44),new ie(11,45)),new Pe(26,new ie(17,21),new ie(4,22)),new Pe(26,new ie(9,13),new ie(16,14))),new jt(20,Int32Array.from([6,34,62,90]),new Pe(28,new ie(3,107),new ie(5,108)),new Pe(26,new ie(3,41),new ie(13,42)),new Pe(30,new ie(15,24),new ie(5,25)),new Pe(28,new ie(15,15),new ie(10,16))),new jt(21,Int32Array.from([6,28,50,72,94]),new Pe(28,new ie(4,116),new ie(4,117)),new Pe(26,new ie(17,42)),new Pe(28,new ie(17,22),new ie(6,23)),new Pe(30,new ie(19,16),new ie(6,17))),new jt(22,Int32Array.from([6,26,50,74,98]),new Pe(28,new ie(2,111),new ie(7,112)),new Pe(28,new ie(17,46)),new Pe(30,new ie(7,24),new ie(16,25)),new Pe(24,new ie(34,13))),new jt(23,Int32Array.from([6,30,54,78,102]),new Pe(30,new ie(4,121),new ie(5,122)),new Pe(28,new ie(4,47),new ie(14,48)),new Pe(30,new ie(11,24),new ie(14,25)),new Pe(30,new ie(16,15),new ie(14,16))),new jt(24,Int32Array.from([6,28,54,80,106]),new Pe(30,new ie(6,117),new ie(4,118)),new Pe(28,new ie(6,45),new ie(14,46)),new Pe(30,new ie(11,24),new ie(16,25)),new Pe(30,new ie(30,16),new ie(2,17))),new jt(25,Int32Array.from([6,32,58,84,110]),new Pe(26,new ie(8,106),new ie(4,107)),new Pe(28,new ie(8,47),new ie(13,48)),new Pe(30,new ie(7,24),new ie(22,25)),new Pe(30,new ie(22,15),new ie(13,16))),new jt(26,Int32Array.from([6,30,58,86,114]),new Pe(28,new ie(10,114),new ie(2,115)),new Pe(28,new ie(19,46),new ie(4,47)),new Pe(28,new ie(28,22),new ie(6,23)),new Pe(30,new ie(33,16),new ie(4,17))),new jt(27,Int32Array.from([6,34,62,90,118]),new Pe(30,new ie(8,122),new ie(4,123)),new Pe(28,new ie(22,45),new ie(3,46)),new Pe(30,new ie(8,23),new ie(26,24)),new Pe(30,new ie(12,15),new ie(28,16))),new jt(28,Int32Array.from([6,26,50,74,98,122]),new Pe(30,new ie(3,117),new ie(10,118)),new Pe(28,new ie(3,45),new ie(23,46)),new Pe(30,new ie(4,24),new ie(31,25)),new Pe(30,new ie(11,15),new ie(31,16))),new jt(29,Int32Array.from([6,30,54,78,102,126]),new Pe(30,new ie(7,116),new ie(7,117)),new Pe(28,new ie(21,45),new ie(7,46)),new Pe(30,new ie(1,23),new ie(37,24)),new Pe(30,new ie(19,15),new ie(26,16))),new jt(30,Int32Array.from([6,26,52,78,104,130]),new Pe(30,new ie(5,115),new ie(10,116)),new Pe(28,new ie(19,47),new ie(10,48)),new Pe(30,new ie(15,24),new ie(25,25)),new Pe(30,new ie(23,15),new ie(25,16))),new jt(31,Int32Array.from([6,30,56,82,108,134]),new Pe(30,new ie(13,115),new ie(3,116)),new Pe(28,new ie(2,46),new ie(29,47)),new Pe(30,new ie(42,24),new ie(1,25)),new Pe(30,new ie(23,15),new ie(28,16))),new jt(32,Int32Array.from([6,34,60,86,112,138]),new Pe(30,new ie(17,115)),new Pe(28,new ie(10,46),new ie(23,47)),new Pe(30,new ie(10,24),new ie(35,25)),new Pe(30,new ie(19,15),new ie(35,16))),new jt(33,Int32Array.from([6,30,58,86,114,142]),new Pe(30,new ie(17,115),new ie(1,116)),new Pe(28,new ie(14,46),new ie(21,47)),new Pe(30,new ie(29,24),new ie(19,25)),new Pe(30,new ie(11,15),new ie(46,16))),new jt(34,Int32Array.from([6,34,62,90,118,146]),new Pe(30,new ie(13,115),new ie(6,116)),new Pe(28,new ie(14,46),new ie(23,47)),new Pe(30,new ie(44,24),new ie(7,25)),new Pe(30,new ie(59,16),new ie(1,17))),new jt(35,Int32Array.from([6,30,54,78,102,126,150]),new Pe(30,new ie(12,121),new ie(7,122)),new Pe(28,new ie(12,47),new ie(26,48)),new Pe(30,new ie(39,24),new ie(14,25)),new Pe(30,new ie(22,15),new ie(41,16))),new jt(36,Int32Array.from([6,24,50,76,102,128,154]),new Pe(30,new ie(6,121),new ie(14,122)),new Pe(28,new ie(6,47),new ie(34,48)),new Pe(30,new ie(46,24),new ie(10,25)),new Pe(30,new ie(2,15),new ie(64,16))),new jt(37,Int32Array.from([6,28,54,80,106,132,158]),new Pe(30,new ie(17,122),new ie(4,123)),new Pe(28,new ie(29,46),new ie(14,47)),new Pe(30,new ie(49,24),new ie(10,25)),new Pe(30,new ie(24,15),new ie(46,16))),new jt(38,Int32Array.from([6,32,58,84,110,136,162]),new Pe(30,new ie(4,122),new ie(18,123)),new Pe(28,new ie(13,46),new ie(32,47)),new Pe(30,new ie(48,24),new ie(14,25)),new Pe(30,new ie(42,15),new ie(32,16))),new jt(39,Int32Array.from([6,26,54,82,110,138,166]),new Pe(30,new ie(20,117),new ie(4,118)),new Pe(28,new ie(40,47),new ie(7,48)),new Pe(30,new ie(43,24),new ie(22,25)),new Pe(30,new ie(10,15),new ie(67,16))),new jt(40,Int32Array.from([6,30,58,86,114,142,170]),new Pe(30,new ie(19,118),new ie(6,119)),new Pe(28,new ie(18,47),new ie(31,48)),new Pe(30,new ie(34,24),new ie(34,25)),new Pe(30,new ie(20,15),new ie(61,16)))];var Os;(function(K){K[K.DATA_MASK_000=0]="DATA_MASK_000",K[K.DATA_MASK_001=1]="DATA_MASK_001",K[K.DATA_MASK_010=2]="DATA_MASK_010",K[K.DATA_MASK_011=3]="DATA_MASK_011",K[K.DATA_MASK_100=4]="DATA_MASK_100",K[K.DATA_MASK_101=5]="DATA_MASK_101",K[K.DATA_MASK_110=6]="DATA_MASK_110",K[K.DATA_MASK_111=7]="DATA_MASK_111"})(Os||(Os={}));class Pn{constructor(o,u){this.value=o,this.isMasked=u}unmaskBitMatrix(o,u){for(let m=0;m<u;m++)for(let y=0;y<u;y++)this.isMasked(m,y)&&o.flip(y,m)}}Pn.values=new Map([[Os.DATA_MASK_000,new Pn(Os.DATA_MASK_000,(K,o)=>(K+o&1)===0)],[Os.DATA_MASK_001,new Pn(Os.DATA_MASK_001,(K,o)=>(K&1)===0)],[Os.DATA_MASK_010,new Pn(Os.DATA_MASK_010,(K,o)=>o%3===0)],[Os.DATA_MASK_011,new Pn(Os.DATA_MASK_011,(K,o)=>(K+o)%3===0)],[Os.DATA_MASK_100,new Pn(Os.DATA_MASK_100,(K,o)=>(Math.floor(K/2)+Math.floor(o/3)&1)===0)],[Os.DATA_MASK_101,new Pn(Os.DATA_MASK_101,(K,o)=>K*o%6===0)],[Os.DATA_MASK_110,new Pn(Os.DATA_MASK_110,(K,o)=>K*o%6<3)],[Os.DATA_MASK_111,new Pn(Os.DATA_MASK_111,(K,o)=>(K+o+K*o%3&1)===0)]]);class eo{constructor(o){const u=o.getHeight();if(u<21||(u&3)!==1)throw new M;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let N=0;N<6;N++)o=this.copyBit(N,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let N=5;N>=0;N--)o=this.copyBit(8,N,o);const u=this.bitMatrix.getHeight();let m=0;const y=u-7;for(let N=u-1;N>=y;N--)m=this.copyBit(8,N,m);for(let N=u-8;N<u;N++)m=this.copyBit(N,8,m);if(this.parsedFormatInfo=Ls.decodeFormatInformation(o,m),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new M}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const o=this.bitMatrix.getHeight(),u=Math.floor((o-17)/4);if(u<=6)return jt.getVersionForNumber(u);let m=0;const y=o-11;for(let w=5;w>=0;w--)for(let C=o-9;C>=y;C--)m=this.copyBit(C,w,m);let N=jt.decodeVersionInformation(m);if(N!==null&&N.getDimensionForVersion()===o)return this.parsedVersion=N,N;m=0;for(let w=5;w>=0;w--)for(let C=o-9;C>=y;C--)m=this.copyBit(w,C,m);if(N=jt.decodeVersionInformation(m),N!==null&&N.getDimensionForVersion()===o)return this.parsedVersion=N,N;throw new M}copyBit(o,u,m){return(this.isMirror?this.bitMatrix.get(u,o):this.bitMatrix.get(o,u))?m<<1|1:m<<1}readCodewords(){const o=this.readFormatInformation(),u=this.readVersion(),m=Pn.values.get(o.getDataMask()),y=this.bitMatrix.getHeight();m.unmaskBitMatrix(this.bitMatrix,y);const N=u.buildFunctionPattern();let w=!0;const C=new Uint8Array(u.getTotalCodewords());let O=0,R=0,q=0;for(let Z=y-1;Z>0;Z-=2){Z===6&&Z--;for(let ee=0;ee<y;ee++){const ue=w?y-1-ee:ee;for(let be=0;be<2;be++)N.get(Z-be,ue)||(q++,R<<=1,this.bitMatrix.get(Z-be,ue)&&(R|=1),q===8&&(C[O++]=R,q=0,R=0))}w=!w}if(O!==u.getTotalCodewords())throw new M;return C}remask(){if(this.parsedFormatInfo===null)return;const o=Pn.values[this.parsedFormatInfo.getDataMask()],u=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,u)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let u=0,m=o.getWidth();u<m;u++)for(let y=u+1,N=o.getHeight();y<N;y++)o.get(u,y)!==o.get(y,u)&&(o.flip(y,u),o.flip(u,y))}}class eh{constructor(o,u){this.numDataCodewords=o,this.codewords=u}static getDataBlocks(o,u,m){if(o.length!==u.getTotalCodewords())throw new b;const y=u.getECBlocksForLevel(m);let N=0;const w=y.getECBlocks();for(const be of w)N+=be.getCount();const C=new Array(N);let O=0;for(const be of w)for(let Ne=0;Ne<be.getCount();Ne++){const Oe=be.getDataCodewords(),Re=y.getECCodewordsPerBlock()+Oe;C[O++]=new eh(Oe,new Uint8Array(Re))}const R=C[0].codewords.length;let q=C.length-1;for(;q>=0&&C[q].codewords.length!==R;)q--;q++;const Z=R-y.getECCodewordsPerBlock();let ee=0;for(let be=0;be<Z;be++)for(let Ne=0;Ne<O;Ne++)C[Ne].codewords[be]=o[ee++];for(let be=q;be<O;be++)C[be].codewords[Z]=o[ee++];const ue=C[0].codewords.length;for(let be=Z;be<ue;be++)for(let Ne=0;Ne<O;Ne++){const Oe=Ne<q?be:be+1;C[Ne].codewords[Oe]=o[ee++]}return C}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var kn;(function(K){K[K.TERMINATOR=0]="TERMINATOR",K[K.NUMERIC=1]="NUMERIC",K[K.ALPHANUMERIC=2]="ALPHANUMERIC",K[K.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",K[K.BYTE=4]="BYTE",K[K.ECI=5]="ECI",K[K.KANJI=6]="KANJI",K[K.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",K[K.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",K[K.HANZI=9]="HANZI"})(kn||(kn={}));class St{constructor(o,u,m,y){this.value=o,this.stringValue=u,this.characterCountBitsForVersions=m,this.bits=y,St.FOR_BITS.set(y,this),St.FOR_VALUE.set(o,this)}static forBits(o){const u=St.FOR_BITS.get(o);if(u===void 0)throw new b;return u}getCharacterCountBits(o){const u=o.getVersionNumber();let m;return u<=9?m=0:u<=26?m=1:m=2,this.characterCountBitsForVersions[m]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof St))return!1;const u=o;return this.value===u.value}toString(){return this.stringValue}}St.FOR_BITS=new Map,St.FOR_VALUE=new Map,St.TERMINATOR=new St(kn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),St.NUMERIC=new St(kn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),St.ALPHANUMERIC=new St(kn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),St.STRUCTURED_APPEND=new St(kn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),St.BYTE=new St(kn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),St.ECI=new St(kn.ECI,"ECI",Int32Array.from([0,0,0]),7),St.KANJI=new St(kn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),St.FNC1_FIRST_POSITION=new St(kn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),St.FNC1_SECOND_POSITION=new St(kn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),St.HANZI=new St(kn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Vr{static decode(o,u,m,y){const N=new na(o);let w=new Q;const C=new Array;let O=-1,R=-1;try{let q=null,Z=!1,ee;do{if(N.available()<4)ee=St.TERMINATOR;else{const ue=N.readBits(4);ee=St.forBits(ue)}switch(ee){case St.TERMINATOR:break;case St.FNC1_FIRST_POSITION:case St.FNC1_SECOND_POSITION:Z=!0;break;case St.STRUCTURED_APPEND:if(N.available()<16)throw new M;O=N.readBits(8),R=N.readBits(8);break;case St.ECI:const ue=Vr.parseECIValue(N);if(q=z.getCharacterSetECIByValue(ue),q===null)throw new M;break;case St.HANZI:const be=N.readBits(4),Ne=N.readBits(ee.getCharacterCountBits(u));be===Vr.GB2312_SUBSET&&Vr.decodeHanziSegment(N,w,Ne);break;default:const Oe=N.readBits(ee.getCharacterCountBits(u));switch(ee){case St.NUMERIC:Vr.decodeNumericSegment(N,w,Oe);break;case St.ALPHANUMERIC:Vr.decodeAlphanumericSegment(N,w,Oe,Z);break;case St.BYTE:Vr.decodeByteSegment(N,w,Oe,q,C,y);break;case St.KANJI:Vr.decodeKanjiSegment(N,w,Oe);break;default:throw new M}break}}while(ee!==St.TERMINATOR)}catch{throw new M}return new Ce(o,w.toString(),C.length===0?null:C,m===null?null:m.toString(),O,R)}static decodeHanziSegment(o,u,m){if(m*13>o.available())throw new M;const y=new Uint8Array(2*m);let N=0;for(;m>0;){const w=o.readBits(13);let C=w/96<<8&4294967295|w%96;C<959?C+=41377:C+=42657,y[N]=C>>8&255,y[N+1]=C&255,N+=2,m--}try{u.append(U.decode(y,G.GB2312))}catch(w){throw new M(w)}}static decodeKanjiSegment(o,u,m){if(m*13>o.available())throw new M;const y=new Uint8Array(2*m);let N=0;for(;m>0;){const w=o.readBits(13);let C=w/192<<8&4294967295|w%192;C<7936?C+=33088:C+=49472,y[N]=C>>8,y[N+1]=C,N+=2,m--}try{u.append(U.decode(y,G.SHIFT_JIS))}catch(w){throw new M(w)}}static decodeByteSegment(o,u,m,y,N,w){if(8*m>o.available())throw new M;const C=new Uint8Array(m);for(let R=0;R<m;R++)C[R]=o.readBits(8);let O;y===null?O=G.guessEncoding(C,w):O=y.getName();try{u.append(U.decode(C,O))}catch(R){throw new M(R)}N.push(C)}static toAlphaNumericChar(o){if(o>=Vr.ALPHANUMERIC_CHARS.length)throw new M;return Vr.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,u,m,y){const N=u.length();for(;m>1;){if(o.available()<11)throw new M;const w=o.readBits(11);u.append(Vr.toAlphaNumericChar(Math.floor(w/45))),u.append(Vr.toAlphaNumericChar(w%45)),m-=2}if(m===1){if(o.available()<6)throw new M;u.append(Vr.toAlphaNumericChar(o.readBits(6)))}if(y)for(let w=N;w<u.length();w++)u.charAt(w)==="%"&&(w<u.length()-1&&u.charAt(w+1)==="%"?u.deleteCharAt(w+1):u.setCharAt(w,""))}static decodeNumericSegment(o,u,m){for(;m>=3;){if(o.available()<10)throw new M;const y=o.readBits(10);if(y>=1e3)throw new M;u.append(Vr.toAlphaNumericChar(Math.floor(y/100))),u.append(Vr.toAlphaNumericChar(Math.floor(y/10)%10)),u.append(Vr.toAlphaNumericChar(y%10)),m-=3}if(m===2){if(o.available()<7)throw new M;const y=o.readBits(7);if(y>=100)throw new M;u.append(Vr.toAlphaNumericChar(Math.floor(y/10))),u.append(Vr.toAlphaNumericChar(y%10))}else if(m===1){if(o.available()<4)throw new M;const y=o.readBits(4);if(y>=10)throw new M;u.append(Vr.toAlphaNumericChar(y))}}static parseECIValue(o){const u=o.readBits(8);if((u&128)===0)return u&127;if((u&192)===128){const m=o.readBits(8);return(u&63)<<8&4294967295|m}if((u&224)===192){const m=o.readBits(16);return(u&31)<<16&4294967295|m}throw new M}}Vr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Vr.GB2312_SUBSET=1;class _m{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;const u=o[0];o[0]=o[2],o[2]=u}}class py{constructor(){this.rsDecoder=new Ge(pe.QR_CODE_FIELD_256)}decodeBooleanArray(o,u){return this.decodeBitMatrix(ce.parseFromBooleanArray(o),u)}decodeBitMatrix(o,u){const m=new eo(o);let y=null;try{return this.decodeBitMatrixParser(m,u)}catch(N){y=N}try{m.remask(),m.setMirror(!0),m.readVersion(),m.readFormatInformation(),m.mirror();const N=this.decodeBitMatrixParser(m,u);return N.setOther(new _m(!0)),N}catch(N){throw y!==null?y:N}}decodeBitMatrixParser(o,u){const m=o.readVersion(),y=o.readFormatInformation().getErrorCorrectionLevel(),N=o.readCodewords(),w=eh.getDataBlocks(N,m,y);let C=0;for(const q of w)C+=q.getNumDataCodewords();const O=new Uint8Array(C);let R=0;for(const q of w){const Z=q.getCodewords(),ee=q.getNumDataCodewords();this.correctErrors(Z,ee);for(let ue=0;ue<ee;ue++)O[R++]=Z[ue]}return Vr.decode(O,m,y,u)}correctErrors(o,u){const m=new Int32Array(o);try{this.rsDecoder.decode(m,o.length-u)}catch{throw new T}for(let y=0;y<u;y++)o[y]=m[y]}}class to extends Qe{constructor(o,u,m){super(o,u),this.estimatedModuleSize=m}aboutEquals(o,u,m){if(Math.abs(u-this.getY())<=o&&Math.abs(m-this.getX())<=o){const y=Math.abs(o-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(o,u,m){const y=(this.getX()+u)/2,N=(this.getY()+o)/2,w=(this.estimatedModuleSize+m)/2;return new to(y,N,w)}}class zn{constructor(o,u,m,y,N,w,C){this.image=o,this.startX=u,this.startY=m,this.width=y,this.height=N,this.moduleSize=w,this.resultPointCallback=C,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,u=this.height,m=this.width,y=o+m,N=this.startY+u/2,w=new Int32Array(3),C=this.image;for(let O=0;O<u;O++){const R=N+((O&1)===0?Math.floor((O+1)/2):-Math.floor((O+1)/2));w[0]=0,w[1]=0,w[2]=0;let q=o;for(;q<y&&!C.get(q,R);)q++;let Z=0;for(;q<y;){if(C.get(q,R))if(Z===1)w[1]++;else if(Z===2){if(this.foundPatternCross(w)){const ee=this.handlePossibleCenter(w,R,q);if(ee!==null)return ee}w[0]=w[2],w[1]=1,w[2]=0,Z=1}else w[++Z]++;else Z===1&&Z++,w[Z]++;q++}if(this.foundPatternCross(w)){const ee=this.handlePossibleCenter(w,R,y);if(ee!==null)return ee}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ne}static centerFromEnd(o,u){return u-o[2]-o[1]/2}foundPatternCross(o){const u=this.moduleSize,m=u/2;for(let y=0;y<3;y++)if(Math.abs(u-o[y])>=m)return!1;return!0}crossCheckVertical(o,u,m,y){const N=this.image,w=N.getHeight(),C=this.crossCheckStateCount;C[0]=0,C[1]=0,C[2]=0;let O=o;for(;O>=0&&N.get(u,O)&&C[1]<=m;)C[1]++,O--;if(O<0||C[1]>m)return NaN;for(;O>=0&&!N.get(u,O)&&C[0]<=m;)C[0]++,O--;if(C[0]>m)return NaN;for(O=o+1;O<w&&N.get(u,O)&&C[1]<=m;)C[1]++,O++;if(O===w||C[1]>m)return NaN;for(;O<w&&!N.get(u,O)&&C[2]<=m;)C[2]++,O++;if(C[2]>m)return NaN;const R=C[0]+C[1]+C[2];return 5*Math.abs(R-y)>=2*y?NaN:this.foundPatternCross(C)?zn.centerFromEnd(C,O):NaN}handlePossibleCenter(o,u,m){const y=o[0]+o[1]+o[2],N=zn.centerFromEnd(o,m),w=this.crossCheckVertical(u,N,2*o[1],y);if(!isNaN(w)){const C=(o[0]+o[1]+o[2])/3;for(const R of this.possibleCenters)if(R.aboutEquals(C,w,N))return R.combineEstimate(w,N,C);const O=new to(N,w,C);this.possibleCenters.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return null}}class cc extends Qe{constructor(o,u,m,y){super(o,u),this.estimatedModuleSize=m,this.count=y,y===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,u,m){if(Math.abs(u-this.getY())<=o&&Math.abs(m-this.getX())<=o){const y=Math.abs(o-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(o,u,m){const y=this.count+1,N=(this.count*this.getX()+u)/y,w=(this.count*this.getY()+o)/y,C=(this.count*this.estimatedModuleSize+m)/y;return new cc(N,w,C,y)}}class th{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Qr{constructor(o,u){this.image=o,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=u}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const u=o!=null&&o.get(B.TRY_HARDER)!==void 0,m=o!=null&&o.get(B.PURE_BARCODE)!==void 0,y=this.image,N=y.getHeight(),w=y.getWidth();let C=Math.floor(3*N/(4*Qr.MAX_MODULES));(C<Qr.MIN_SKIP||u)&&(C=Qr.MIN_SKIP);let O=!1;const R=new Int32Array(5);for(let Z=C-1;Z<N&&!O;Z+=C){R[0]=0,R[1]=0,R[2]=0,R[3]=0,R[4]=0;let ee=0;for(let ue=0;ue<w;ue++)if(y.get(ue,Z))(ee&1)===1&&ee++,R[ee]++;else if((ee&1)===0)if(ee===4)if(Qr.foundPatternCross(R)){if(this.handlePossibleCenter(R,Z,ue,m)===!0)if(C=2,this.hasSkipped===!0)O=this.haveMultiplyConfirmedCenters();else{const Ne=this.findRowSkip();Ne>R[2]&&(Z+=Ne-R[2]-C,ue=w-1)}else{R[0]=R[2],R[1]=R[3],R[2]=R[4],R[3]=1,R[4]=0,ee=3;continue}ee=0,R[0]=0,R[1]=0,R[2]=0,R[3]=0,R[4]=0}else R[0]=R[2],R[1]=R[3],R[2]=R[4],R[3]=1,R[4]=0,ee=3;else R[++ee]++;else R[ee]++;Qr.foundPatternCross(R)&&this.handlePossibleCenter(R,Z,w,m)===!0&&(C=R[0],this.hasSkipped&&(O=this.haveMultiplyConfirmedCenters()))}const q=this.selectBestPatterns();return Qe.orderBestPatterns(q),new th(q)}static centerFromEnd(o,u){return u-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let u=0;for(let N=0;N<5;N++){const w=o[N];if(w===0)return!1;u+=w}if(u<7)return!1;const m=u/7,y=m/2;return Math.abs(m-o[0])<y&&Math.abs(m-o[1])<y&&Math.abs(3*m-o[2])<3*y&&Math.abs(m-o[3])<y&&Math.abs(m-o[4])<y}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,u,m,y){const N=this.getCrossCheckStateCount();let w=0;const C=this.image;for(;o>=w&&u>=w&&C.get(u-w,o-w);)N[2]++,w++;if(o<w||u<w)return!1;for(;o>=w&&u>=w&&!C.get(u-w,o-w)&&N[1]<=m;)N[1]++,w++;if(o<w||u<w||N[1]>m)return!1;for(;o>=w&&u>=w&&C.get(u-w,o-w)&&N[0]<=m;)N[0]++,w++;if(N[0]>m)return!1;const O=C.getHeight(),R=C.getWidth();for(w=1;o+w<O&&u+w<R&&C.get(u+w,o+w);)N[2]++,w++;if(o+w>=O||u+w>=R)return!1;for(;o+w<O&&u+w<R&&!C.get(u+w,o+w)&&N[3]<m;)N[3]++,w++;if(o+w>=O||u+w>=R||N[3]>=m)return!1;for(;o+w<O&&u+w<R&&C.get(u+w,o+w)&&N[4]<m;)N[4]++,w++;if(N[4]>=m)return!1;const q=N[0]+N[1]+N[2]+N[3]+N[4];return Math.abs(q-y)<2*y&&Qr.foundPatternCross(N)}crossCheckVertical(o,u,m,y){const N=this.image,w=N.getHeight(),C=this.getCrossCheckStateCount();let O=o;for(;O>=0&&N.get(u,O);)C[2]++,O--;if(O<0)return NaN;for(;O>=0&&!N.get(u,O)&&C[1]<=m;)C[1]++,O--;if(O<0||C[1]>m)return NaN;for(;O>=0&&N.get(u,O)&&C[0]<=m;)C[0]++,O--;if(C[0]>m)return NaN;for(O=o+1;O<w&&N.get(u,O);)C[2]++,O++;if(O===w)return NaN;for(;O<w&&!N.get(u,O)&&C[3]<m;)C[3]++,O++;if(O===w||C[3]>=m)return NaN;for(;O<w&&N.get(u,O)&&C[4]<m;)C[4]++,O++;if(C[4]>=m)return NaN;const R=C[0]+C[1]+C[2]+C[3]+C[4];return 5*Math.abs(R-y)>=2*y?NaN:Qr.foundPatternCross(C)?Qr.centerFromEnd(C,O):NaN}crossCheckHorizontal(o,u,m,y){const N=this.image,w=N.getWidth(),C=this.getCrossCheckStateCount();let O=o;for(;O>=0&&N.get(O,u);)C[2]++,O--;if(O<0)return NaN;for(;O>=0&&!N.get(O,u)&&C[1]<=m;)C[1]++,O--;if(O<0||C[1]>m)return NaN;for(;O>=0&&N.get(O,u)&&C[0]<=m;)C[0]++,O--;if(C[0]>m)return NaN;for(O=o+1;O<w&&N.get(O,u);)C[2]++,O++;if(O===w)return NaN;for(;O<w&&!N.get(O,u)&&C[3]<m;)C[3]++,O++;if(O===w||C[3]>=m)return NaN;for(;O<w&&N.get(O,u)&&C[4]<m;)C[4]++,O++;if(C[4]>=m)return NaN;const R=C[0]+C[1]+C[2]+C[3]+C[4];return 5*Math.abs(R-y)>=y?NaN:Qr.foundPatternCross(C)?Qr.centerFromEnd(C,O):NaN}handlePossibleCenter(o,u,m,y){const N=o[0]+o[1]+o[2]+o[3]+o[4];let w=Qr.centerFromEnd(o,m),C=this.crossCheckVertical(u,Math.floor(w),o[2],N);if(!isNaN(C)&&(w=this.crossCheckHorizontal(Math.floor(w),Math.floor(C),o[2],N),!isNaN(w)&&(!y||this.crossCheckDiagonal(Math.floor(C),Math.floor(w),o[2],N)))){const O=N/7;let R=!1;const q=this.possibleCenters;for(let Z=0,ee=q.length;Z<ee;Z++){const ue=q[Z];if(ue.aboutEquals(O,C,w)){q[Z]=ue.combineEstimate(C,w,O),R=!0;break}}if(!R){const Z=new cc(w,C,O);q.push(Z),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(Z)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let u=null;for(const m of this.possibleCenters)if(m.getCount()>=Qr.CENTER_QUORUM)if(u==null)u=m;else return this.hasSkipped=!0,Math.floor((Math.abs(u.getX()-m.getX())-Math.abs(u.getY()-m.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,u=0;const m=this.possibleCenters.length;for(const w of this.possibleCenters)w.getCount()>=Qr.CENTER_QUORUM&&(o++,u+=w.getEstimatedModuleSize());if(o<3)return!1;const y=u/m;let N=0;for(const w of this.possibleCenters)N+=Math.abs(w.getEstimatedModuleSize()-y);return N<=.05*u}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new ne;const u=this.possibleCenters;let m;if(o>3){let y=0,N=0;for(const O of this.possibleCenters){const R=O.getEstimatedModuleSize();y+=R,N+=R*R}m=y/o;let w=Math.sqrt(N/o-m*m);u.sort((O,R)=>{const q=Math.abs(R.getEstimatedModuleSize()-m),Z=Math.abs(O.getEstimatedModuleSize()-m);return q<Z?-1:q>Z?1:0});const C=Math.max(.2*m,w);for(let O=0;O<u.length&&u.length>3;O++){const R=u[O];Math.abs(R.getEstimatedModuleSize()-m)>C&&(u.splice(O,1),O--)}}if(u.length>3){let y=0;for(const N of u)y+=N.getEstimatedModuleSize();m=y/u.length,u.sort((N,w)=>{if(w.getCount()===N.getCount()){const C=Math.abs(w.getEstimatedModuleSize()-m),O=Math.abs(N.getEstimatedModuleSize()-m);return C<O?1:C>O?-1:0}else return w.getCount()-N.getCount()}),u.splice(3)}return[u[0],u[1],u[2]]}}Qr.CENTER_QUORUM=2,Qr.MIN_SKIP=3,Qr.MAX_MODULES=57;class Aa{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(B.NEED_RESULT_POINT_CALLBACK);const m=new Qr(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(m)}processFinderPatternInfo(o){const u=o.getTopLeft(),m=o.getTopRight(),y=o.getBottomLeft(),N=this.calculateModuleSize(u,m,y);if(N<1)throw new ne("No pattern found in proccess finder.");const w=Aa.computeDimension(u,m,y,N),C=jt.getProvisionalVersionForDimension(w),O=C.getDimensionForVersion()-7;let R=null;if(C.getAlignmentPatternCenters().length>0){const ue=m.getX()-u.getX()+y.getX(),be=m.getY()-u.getY()+y.getY(),Ne=1-3/O,Oe=Math.floor(u.getX()+Ne*(ue-u.getX())),Re=Math.floor(u.getY()+Ne*(be-u.getY()));for(let it=4;it<=16;it<<=1)try{R=this.findAlignmentInRegion(N,Oe,Re,it);break}catch(nt){if(!(nt instanceof ne))throw nt}}const q=Aa.createTransform(u,m,y,R,w),Z=Aa.sampleGrid(this.image,q,w);let ee;return R===null?ee=[y,u,m]:ee=[y,u,m,R],new ct(Z,ee)}static createTransform(o,u,m,y,N){const w=N-3.5;let C,O,R,q;return y!==null?(C=y.getX(),O=y.getY(),R=w-3,q=R):(C=u.getX()-o.getX()+m.getX(),O=u.getY()-o.getY()+m.getY(),R=w,q=w),lr.quadrilateralToQuadrilateral(3.5,3.5,w,3.5,R,q,3.5,w,o.getX(),o.getY(),u.getX(),u.getY(),C,O,m.getX(),m.getY())}static sampleGrid(o,u,m){return Ye.getInstance().sampleGridWithTransform(o,m,m,u)}static computeDimension(o,u,m,y){const N=dt.round(Qe.distance(o,u)/y),w=dt.round(Qe.distance(o,m)/y);let C=Math.floor((N+w)/2)+7;switch(C&3){case 0:C++;break;case 2:C--;break;case 3:throw new ne("Dimensions could be not found.")}return C}calculateModuleSize(o,u,m){return(this.calculateModuleSizeOneWay(o,u)+this.calculateModuleSizeOneWay(o,m))/2}calculateModuleSizeOneWay(o,u){const m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(u.getX()),Math.floor(u.getY())),y=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(u.getX()),Math.floor(u.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(m)?y/7:isNaN(y)?m/7:(m+y)/14}sizeOfBlackWhiteBlackRunBothWays(o,u,m,y){let N=this.sizeOfBlackWhiteBlackRun(o,u,m,y),w=1,C=o-(m-o);C<0?(w=o/(o-C),C=0):C>=this.image.getWidth()&&(w=(this.image.getWidth()-1-o)/(C-o),C=this.image.getWidth()-1);let O=Math.floor(u-(y-u)*w);return w=1,O<0?(w=u/(u-O),O=0):O>=this.image.getHeight()&&(w=(this.image.getHeight()-1-u)/(O-u),O=this.image.getHeight()-1),C=Math.floor(o+(C-o)*w),N+=this.sizeOfBlackWhiteBlackRun(o,u,C,O),N-1}sizeOfBlackWhiteBlackRun(o,u,m,y){const N=Math.abs(y-u)>Math.abs(m-o);if(N){let ue=o;o=u,u=ue,ue=m,m=y,y=ue}const w=Math.abs(m-o),C=Math.abs(y-u);let O=-w/2;const R=o<m?1:-1,q=u<y?1:-1;let Z=0;const ee=m+R;for(let ue=o,be=u;ue!==ee;ue+=R){const Ne=N?be:ue,Oe=N?ue:be;if(Z===1===this.image.get(Ne,Oe)){if(Z===2)return dt.distance(ue,be,o,u);Z++}if(O+=C,O>0){if(be===y)break;be+=q,O-=w}}return Z===2?dt.distance(m+R,y,o,u):NaN}findAlignmentInRegion(o,u,m,y){const N=Math.floor(y*o),w=Math.max(0,u-N),C=Math.min(this.image.getWidth()-1,u+N);if(C-w<o*3)throw new ne("Alignment top exceeds estimated module size.");const O=Math.max(0,m-N),R=Math.min(this.image.getHeight()-1,m+N);if(R-O<o*3)throw new ne("Alignment bottom exceeds estimated module size.");return new zn(this.image,w,O,C-w,R-O,o,this.resultPointCallback).find()}}class si{constructor(){this.decoder=new py}getDecoder(){return this.decoder}decode(o,u){let m,y;if(u!=null&&u.get(B.PURE_BARCODE)!==void 0){const O=si.extractPureBits(o.getBlackMatrix());m=this.decoder.decodeBitMatrix(O,u),y=si.NO_POINTS}else{const O=new Aa(o.getBlackMatrix()).detect(u);m=this.decoder.decodeBitMatrix(O.getBits(),u),y=O.getPoints()}m.getOther()instanceof _m&&m.getOther().applyMirroredCorrection(y);const N=new fe(m.getText(),m.getRawBytes(),void 0,y,oe.QR_CODE,void 0),w=m.getByteSegments();w!==null&&N.putMetadata(Ve.BYTE_SEGMENTS,w);const C=m.getECLevel();return C!==null&&N.putMetadata(Ve.ERROR_CORRECTION_LEVEL,C),m.hasStructuredAppend()&&(N.putMetadata(Ve.STRUCTURED_APPEND_SEQUENCE,m.getStructuredAppendSequenceNumber()),N.putMetadata(Ve.STRUCTURED_APPEND_PARITY,m.getStructuredAppendParity())),N}reset(){}static extractPureBits(o){const u=o.getTopLeftOnBit(),m=o.getBottomRightOnBit();if(u===null||m===null)throw new ne;const y=this.moduleSize(u,o);let N=u[1],w=m[1],C=u[0],O=m[0];if(C>=O||N>=w)throw new ne;if(w-N!==O-C&&(O=C+(w-N),O>=o.getWidth()))throw new ne;const R=Math.round((O-C+1)/y),q=Math.round((w-N+1)/y);if(R<=0||q<=0)throw new ne;if(q!==R)throw new ne;const Z=Math.floor(y/2);N+=Z,C+=Z;const ee=C+Math.floor((R-1)*y)-O;if(ee>0){if(ee>Z)throw new ne;C-=ee}const ue=N+Math.floor((q-1)*y)-w;if(ue>0){if(ue>Z)throw new ne;N-=ue}const be=new ce(R,q);for(let Ne=0;Ne<q;Ne++){const Oe=N+Math.floor(Ne*y);for(let Re=0;Re<R;Re++)o.get(C+Math.floor(Re*y),Oe)&&be.set(Re,Ne)}return be}static moduleSize(o,u){const m=u.getHeight(),y=u.getWidth();let N=o[0],w=o[1],C=!0,O=0;for(;N<y&&w<m;){if(C!==u.get(N,w)){if(++O===5)break;C=!C}N++,w++}if(N===y||w===m)throw new ne;return(N-o[0])/7}}si.NO_POINTS=new Array;class Dt{PDF417Common(){}static getBitCountSum(o){return dt.sum(o)}static toIntArray(o){if(o==null||!o.length)return Dt.EMPTY_INT_ARRAY;const u=new Int32Array(o.length);let m=0;for(const y of o)u[m++]=y;return u}static getCodeword(o){const u=L.binarySearch(Dt.SYMBOL_TABLE,o&262143);return u<0?-1:(Dt.CODEWORD_TABLE[u]-1)%Dt.NUMBER_OF_CODEWORDS}}Dt.NUMBER_OF_CODEWORDS=929,Dt.MAX_CODEWORDS_IN_BARCODE=Dt.NUMBER_OF_CODEWORDS-1,Dt.MIN_ROWS_IN_BARCODE=3,Dt.MAX_ROWS_IN_BARCODE=90,Dt.MODULES_IN_CODEWORD=17,Dt.MODULES_IN_STOP_PATTERN=18,Dt.BARS_IN_MODULE=8,Dt.EMPTY_INT_ARRAY=new Int32Array([]),Dt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Dt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Im{constructor(o,u){this.bits=o,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class Lt{static detectMultiple(o,u,m){let y=o.getBlackMatrix(),N=Lt.detect(m,y);return N.length||(y=y.clone(),y.rotate180(),N=Lt.detect(m,y)),new Im(y,N)}static detect(o,u){const m=new Array;let y=0,N=0,w=!1;for(;y<u.getHeight();){const C=Lt.findVertices(u,y,N);if(C[0]==null&&C[3]==null){if(!w)break;w=!1,N=0;for(const O of m)O[1]!=null&&(y=Math.trunc(Math.max(y,O[1].getY()))),O[3]!=null&&(y=Math.max(y,Math.trunc(O[3].getY())));y+=Lt.ROW_STEP;continue}if(w=!0,m.push(C),!o)break;C[2]!=null?(N=Math.trunc(C[2].getX()),y=Math.trunc(C[2].getY())):(N=Math.trunc(C[4].getX()),y=Math.trunc(C[4].getY()))}return m}static findVertices(o,u,m){const y=o.getHeight(),N=o.getWidth(),w=new Array(8);return Lt.copyToResult(w,Lt.findRowsWithPattern(o,y,N,u,m,Lt.START_PATTERN),Lt.INDEXES_START_PATTERN),w[4]!=null&&(m=Math.trunc(w[4].getX()),u=Math.trunc(w[4].getY())),Lt.copyToResult(w,Lt.findRowsWithPattern(o,y,N,u,m,Lt.STOP_PATTERN),Lt.INDEXES_STOP_PATTERN),w}static copyToResult(o,u,m){for(let y=0;y<m.length;y++)o[m[y]]=u[y]}static findRowsWithPattern(o,u,m,y,N,w){const C=new Array(4);let O=!1;const R=new Int32Array(w.length);for(;y<u;y+=Lt.ROW_STEP){let Z=Lt.findGuardPattern(o,N,y,m,!1,w,R);if(Z!=null){for(;y>0;){const ee=Lt.findGuardPattern(o,N,--y,m,!1,w,R);if(ee!=null)Z=ee;else{y++;break}}C[0]=new Qe(Z[0],y),C[1]=new Qe(Z[1],y),O=!0;break}}let q=y+1;if(O){let Z=0,ee=Int32Array.from([Math.trunc(C[0].getX()),Math.trunc(C[1].getX())]);for(;q<u;q++){const ue=Lt.findGuardPattern(o,ee[0],q,m,!1,w,R);if(ue!=null&&Math.abs(ee[0]-ue[0])<Lt.MAX_PATTERN_DRIFT&&Math.abs(ee[1]-ue[1])<Lt.MAX_PATTERN_DRIFT)ee=ue,Z=0;else{if(Z>Lt.SKIPPED_ROW_COUNT_MAX)break;Z++}}q-=Z+1,C[2]=new Qe(ee[0],q),C[3]=new Qe(ee[1],q)}return q-y<Lt.BARCODE_MIN_HEIGHT&&L.fill(C,null),C}static findGuardPattern(o,u,m,y,N,w,C){L.fillWithin(C,0,C.length,0);let O=u,R=0;for(;o.get(O,m)&&O>0&&R++<Lt.MAX_PIXEL_DRIFT;)O--;let q=O,Z=0,ee=w.length;for(let ue=N;q<y;q++)if(o.get(q,m)!==ue)C[Z]++;else{if(Z===ee-1){if(Lt.patternMatchVariance(C,w,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return new Int32Array([O,q]);O+=C[0]+C[1],P.arraycopy(C,2,C,0,Z-1),C[Z-1]=0,C[Z]=0,Z--}else Z++;C[Z]=1,ue=!ue}return Z===ee-1&&Lt.patternMatchVariance(C,w,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE?new Int32Array([O,q-1]):null}static patternMatchVariance(o,u,m){let y=o.length,N=0,w=0;for(let R=0;R<y;R++)N+=o[R],w+=u[R];if(N<w)return 1/0;let C=N/w;m*=C;let O=0;for(let R=0;R<y;R++){let q=o[R],Z=u[R]*C,ee=q>Z?q-Z:Z-q;if(ee>m)return 1/0;O+=ee}return O/N}}Lt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Lt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Lt.MAX_AVG_VARIANCE=.42,Lt.MAX_INDIVIDUAL_VARIANCE=.8,Lt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Lt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Lt.MAX_PIXEL_DRIFT=3,Lt.MAX_PATTERN_DRIFT=5,Lt.SKIPPED_ROW_COUNT_MAX=25,Lt.ROW_STEP=5,Lt.BARCODE_MIN_HEIGHT=10;class $r{constructor(o,u){if(u.length===0)throw new b;this.field=o;let m=u.length;if(m>1&&u[0]===0){let y=1;for(;y<m&&u[y]===0;)y++;y===m?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(m-y),P.arraycopy(u,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let y=0;for(let N of this.coefficients)y=this.field.add(y,N);return y}let u=this.coefficients[0],m=this.coefficients.length;for(let y=1;y<m;y++)u=this.field.add(this.field.multiply(o,u),this.coefficients[y]);return u}add(o){if(!this.field.equals(o.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let u=this.coefficients,m=o.coefficients;if(u.length>m.length){let w=u;u=m,m=w}let y=new Int32Array(m.length),N=m.length-u.length;P.arraycopy(m,0,y,0,N);for(let w=N;w<m.length;w++)y[w]=this.field.add(u[w-N],m[w]);return new $r(this.field,y)}subtract(o){if(!this.field.equals(o.field))throw new b("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof $r?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new $r(this.field,new Int32Array([0]));let u=this.coefficients,m=u.length,y=o.coefficients,N=y.length,w=new Int32Array(m+N-1);for(let C=0;C<m;C++){let O=u[C];for(let R=0;R<N;R++)w[C+R]=this.field.add(w[C+R],this.field.multiply(O,y[R]))}return new $r(this.field,w)}negative(){let o=this.coefficients.length,u=new Int32Array(o);for(let m=0;m<o;m++)u[m]=this.field.subtract(0,this.coefficients[m]);return new $r(this.field,u)}multiplyScalar(o){if(o===0)return new $r(this.field,new Int32Array([0]));if(o===1)return this;let u=this.coefficients.length,m=new Int32Array(u);for(let y=0;y<u;y++)m[y]=this.field.multiply(this.coefficients[y],o);return new $r(this.field,m)}multiplyByMonomial(o,u){if(o<0)throw new b;if(u===0)return new $r(this.field,new Int32Array([0]));let m=this.coefficients.length,y=new Int32Array(m+o);for(let N=0;N<m;N++)y[N]=this.field.multiply(this.coefficients[N],u);return new $r(this.field,y)}toString(){let o=new Q;for(let u=this.getDegree();u>=0;u--){let m=this.getCoefficient(u);m!==0&&(m<0?(o.append(" - "),m=-m):o.length()>0&&o.append(" + "),(u===0||m!==1)&&o.append(m),u!==0&&(u===1?o.append("x"):(o.append("x^"),o.append(u))))}return o.toString()}}class rh{add(o,u){return(o+u)%this.modulus}subtract(o,u){return(this.modulus+o-u)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new b;return this.logTable[o]}inverse(o){if(o===0)throw new Ee;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,u){return o===0||u===0?0:this.expTable[(this.logTable[o]+this.logTable[u])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class el extends rh{constructor(o,u){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let m=1;for(let y=0;y<o;y++)this.expTable[y]=m,m=m*u%o;for(let y=0;y<o-1;y++)this.logTable[this.expTable[y]]=y;this.zero=new $r(this,new Int32Array([0])),this.one=new $r(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,u){if(o<0)throw new b;if(u===0)return this.zero;let m=new Int32Array(o+1);return m[0]=u,new $r(this,m)}}el.PDF417_GF=new el(Dt.NUMBER_OF_CODEWORDS,3);class ni{constructor(){this.field=el.PDF417_GF}decode(o,u,m){let y=new $r(this.field,o),N=new Int32Array(u),w=!1;for(let be=u;be>0;be--){let Ne=y.evaluateAt(this.field.exp(be));N[u-be]=Ne,Ne!==0&&(w=!0)}if(!w)return 0;let C=this.field.getOne();if(m!=null)for(const be of m){let Ne=this.field.exp(o.length-1-be),Oe=new $r(this.field,new Int32Array([this.field.subtract(0,Ne),1]));C=C.multiply(Oe)}let O=new $r(this.field,N),R=this.runEuclideanAlgorithm(this.field.buildMonomial(u,1),O,u),q=R[0],Z=R[1],ee=this.findErrorLocations(q),ue=this.findErrorMagnitudes(Z,q,ee);for(let be=0;be<ee.length;be++){let Ne=o.length-1-this.field.log(ee[be]);if(Ne<0)throw T.getChecksumInstance();o[Ne]=this.field.subtract(o[Ne],ue[be])}return ee.length}runEuclideanAlgorithm(o,u,m){if(o.getDegree()<u.getDegree()){let ee=o;o=u,u=ee}let y=o,N=u,w=this.field.getZero(),C=this.field.getOne();for(;N.getDegree()>=Math.round(m/2);){let ee=y,ue=w;if(y=N,w=C,y.isZero())throw T.getChecksumInstance();N=ee;let be=this.field.getZero(),Ne=y.getCoefficient(y.getDegree()),Oe=this.field.inverse(Ne);for(;N.getDegree()>=y.getDegree()&&!N.isZero();){let Re=N.getDegree()-y.getDegree(),it=this.field.multiply(N.getCoefficient(N.getDegree()),Oe);be=be.add(this.field.buildMonomial(Re,it)),N=N.subtract(y.multiplyByMonomial(Re,it))}C=be.multiply(w).subtract(ue).negative()}let O=C.getCoefficient(0);if(O===0)throw T.getChecksumInstance();let R=this.field.inverse(O),q=C.multiply(R),Z=N.multiply(R);return[q,Z]}findErrorLocations(o){let u=o.getDegree(),m=new Int32Array(u),y=0;for(let N=1;N<this.field.getSize()&&y<u;N++)o.evaluateAt(N)===0&&(m[y]=this.field.inverse(N),y++);if(y!==u)throw T.getChecksumInstance();return m}findErrorMagnitudes(o,u,m){let y=u.getDegree(),N=new Int32Array(y);for(let R=1;R<=y;R++)N[y-R]=this.field.multiply(R,u.getCoefficient(R));let w=new $r(this.field,N),C=m.length,O=new Int32Array(C);for(let R=0;R<C;R++){let q=this.field.inverse(m[R]),Z=this.field.subtract(0,o.evaluateAt(q)),ee=this.field.inverse(w.evaluateAt(q));O[R]=this.field.multiply(Z,ee)}return O}}class ai{constructor(o,u,m,y,N){o instanceof ai?this.constructor_2(o):this.constructor_1(o,u,m,y,N)}constructor_1(o,u,m,y,N){const w=u==null||m==null,C=y==null||N==null;if(w&&C)throw new ne;w?(u=new Qe(0,y.getY()),m=new Qe(0,N.getY())):C&&(y=new Qe(o.getWidth()-1,u.getY()),N=new Qe(o.getWidth()-1,m.getY())),this.image=o,this.topLeft=u,this.bottomLeft=m,this.topRight=y,this.bottomRight=N,this.minX=Math.trunc(Math.min(u.getX(),m.getX())),this.maxX=Math.trunc(Math.max(y.getX(),N.getX())),this.minY=Math.trunc(Math.min(u.getY(),y.getY())),this.maxY=Math.trunc(Math.max(m.getY(),N.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,u){return o==null?u:u==null?o:new ai(o.image,o.topLeft,o.bottomLeft,u.topRight,u.bottomRight)}addMissingRows(o,u,m){let y=this.topLeft,N=this.bottomLeft,w=this.topRight,C=this.bottomRight;if(o>0){let O=m?this.topLeft:this.topRight,R=Math.trunc(O.getY()-o);R<0&&(R=0);let q=new Qe(O.getX(),R);m?y=q:w=q}if(u>0){let O=m?this.bottomLeft:this.bottomRight,R=Math.trunc(O.getY()+u);R>=this.image.getHeight()&&(R=this.image.getHeight()-1);let q=new Qe(O.getX(),R);m?N=q:C=q}return new ai(this.image,y,N,w,C)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class fd{constructor(o,u,m,y){this.columnCount=o,this.errorCorrectionLevel=y,this.rowCountUpperPart=u,this.rowCountLowerPart=m,this.rowCount=u+m}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ro{constructor(){this.buffer=""}static form(o,u){let m=-1;function y(w,C,O,R,q,Z){if(w==="%%")return"%";if(u[++m]===void 0)return;w=R?parseInt(R.substr(1)):void 0;let ee=q?parseInt(q.substr(1)):void 0,ue;switch(Z){case"s":ue=u[m];break;case"c":ue=u[m][0];break;case"f":ue=parseFloat(u[m]).toFixed(w);break;case"p":ue=parseFloat(u[m]).toPrecision(w);break;case"e":ue=parseFloat(u[m]).toExponential(w);break;case"x":ue=parseInt(u[m]).toString(ee||16);break;case"d":ue=parseFloat(parseInt(u[m],ee||10).toPrecision(w)).toFixed(0);break}ue=typeof ue=="object"?JSON.stringify(ue):(+ue).toString(ee);let be=parseInt(O),Ne=O&&O[0]+""=="0"?"0":" ";for(;ue.length<be;)ue=C!==void 0?ue+Ne:Ne+ue;return ue}let N=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(N,y)}format(o,...u){this.buffer+=ro.form(o,u)}toString(){return this.buffer}}class Ti{constructor(o){this.boundingBox=new ai(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let u=this.getCodeword(o);if(u!=null)return u;for(let m=1;m<Ti.MAX_NEARBY_DISTANCE;m++){let y=this.imageRowToCodewordIndex(o)-m;if(y>=0&&(u=this.codewords[y],u!=null)||(y=this.imageRowToCodewordIndex(o)+m,y<this.codewords.length&&(u=this.codewords[y],u!=null)))return u}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,u){this.codewords[this.imageRowToCodewordIndex(o)]=u}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new ro;let u=0;for(const m of this.codewords){if(m==null){o.format("%3d:    |   %n",u++);continue}o.format("%3d: %3d|%3d%n",u++,m.getRowNumber(),m.getValue())}return o.toString()}}Ti.MAX_NEARBY_DISTANCE=5;class Di{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let u=this.values.get(o);u==null&&(u=0),u++,this.values.set(o,u)}getValue(){let o=-1,u=new Array;for(const[m,y]of this.values.entries()){const N={getKey:()=>m,getValue:()=>y};N.getValue()>o?(o=N.getValue(),u=[],u.push(N.getKey())):N.getValue()===o&&u.push(N.getKey())}return Dt.toIntArray(u)}getConfidence(o){return this.values.get(o)}}class sh extends Ti{constructor(o,u){super(o),this._isLeft=u}setRowNumbers(){for(let o of this.getCodewords())o?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let u=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(u,o);let m=this.getBoundingBox(),y=this._isLeft?m.getTopLeft():m.getTopRight(),N=this._isLeft?m.getBottomLeft():m.getBottomRight(),w=this.imageRowToCodewordIndex(Math.trunc(y.getY())),C=this.imageRowToCodewordIndex(Math.trunc(N.getY())),O=-1,R=1,q=0;for(let Z=w;Z<C;Z++){if(u[Z]==null)continue;let ee=u[Z],ue=ee.getRowNumber()-O;if(ue===0)q++;else if(ue===1)R=Math.max(R,q),q=1,O=ee.getRowNumber();else if(ue<0||ee.getRowNumber()>=o.getRowCount()||ue>Z)u[Z]=null;else{let be;R>2?be=(R-2)*ue:be=ue;let Ne=be>=Z;for(let Oe=1;Oe<=be&&!Ne;Oe++)Ne=u[Z-Oe]!=null;Ne?u[Z]=null:(O=ee.getRowNumber(),q=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let u=new Int32Array(o.getRowCount());for(let m of this.getCodewords())if(m!=null){let y=m.getRowNumber();if(y>=u.length)continue;u[y]++}return u}adjustIncompleteIndicatorColumnRowNumbers(o){let u=this.getBoundingBox(),m=this._isLeft?u.getTopLeft():u.getTopRight(),y=this._isLeft?u.getBottomLeft():u.getBottomRight(),N=this.imageRowToCodewordIndex(Math.trunc(m.getY())),w=this.imageRowToCodewordIndex(Math.trunc(y.getY())),C=this.getCodewords(),O=-1;for(let R=N;R<w;R++){if(C[R]==null)continue;let q=C[R];q.setRowNumberAsRowIndicatorColumn();let Z=q.getRowNumber()-O;Z===0||(Z===1?O=q.getRowNumber():q.getRowNumber()>=o.getRowCount()?C[R]=null:O=q.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),u=new Di,m=new Di,y=new Di,N=new Di;for(let C of o){if(C==null)continue;C.setRowNumberAsRowIndicatorColumn();let O=C.getValue()%30,R=C.getRowNumber();switch(this._isLeft||(R+=2),R%3){case 0:m.setValue(O*3+1);break;case 1:N.setValue(O/3),y.setValue(O%3);break;case 2:u.setValue(O+1);break}}if(u.getValue().length===0||m.getValue().length===0||y.getValue().length===0||N.getValue().length===0||u.getValue()[0]<1||m.getValue()[0]+y.getValue()[0]<Dt.MIN_ROWS_IN_BARCODE||m.getValue()[0]+y.getValue()[0]>Dt.MAX_ROWS_IN_BARCODE)return null;let w=new fd(u.getValue()[0],m.getValue()[0],y.getValue()[0],N.getValue()[0]);return this.removeIncorrectCodewords(o,w),w}removeIncorrectCodewords(o,u){for(let m=0;m<o.length;m++){let y=o[m];if(o[m]==null)continue;let N=y.getValue()%30,w=y.getRowNumber();if(w>u.getRowCount()){o[m]=null;continue}switch(this._isLeft||(w+=2),w%3){case 0:N*3+1!==u.getRowCountUpperPart()&&(o[m]=null);break;case 1:(Math.trunc(N/3)!==u.getErrorCorrectionLevel()||N%3!==u.getRowCountLowerPart())&&(o[m]=null);break;case 2:N+1!==u.getColumnCount()&&(o[m]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Fs{constructor(o,u){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=u,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=Dt.MAX_CODEWORDS_IN_BARCODE,u;do u=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<u);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let u=1;u<this.barcodeColumnCount+1;u++){let m=this.detectionResultColumns[u].getCodewords();for(let y=0;y<m.length;y++)m[y]!=null&&(m[y].hasValidRowNumber()||this.adjustRowNumbers(u,y,m))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<o.length;m++)if(o[m]!=null&&u[m]!=null&&o[m].getRowNumber()===u[m].getRowNumber())for(let y=1;y<=this.barcodeColumnCount;y++){let N=this.detectionResultColumns[y].getCodewords()[m];N!=null&&(N.setRowNumber(o[m].getRowNumber()),N.hasValidRowNumber()||(this.detectionResultColumns[y].getCodewords()[m]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<u.length;m++){if(u[m]==null)continue;let y=u[m].getRowNumber(),N=0;for(let w=this.barcodeColumnCount+1;w>0&&N<this.ADJUST_ROW_NUMBER_SKIP;w--){let C=this.detectionResultColumns[w].getCodewords()[m];C!=null&&(N=Fs.adjustRowNumberIfValid(y,N,C),C.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,u=this.detectionResultColumns[0].getCodewords();for(let m=0;m<u.length;m++){if(u[m]==null)continue;let y=u[m].getRowNumber(),N=0;for(let w=1;w<this.barcodeColumnCount+1&&N<this.ADJUST_ROW_NUMBER_SKIP;w++){let C=this.detectionResultColumns[w].getCodewords()[m];C!=null&&(N=Fs.adjustRowNumberIfValid(y,N,C),C.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,u,m){return m==null||m.hasValidRowNumber()||(m.isValidRowNumber(o)?(m.setRowNumber(o),u=0):++u),u}adjustRowNumbers(o,u,m){if(!this.detectionResultColumns[o-1])return;let y=m[u],N=this.detectionResultColumns[o-1].getCodewords(),w=N;this.detectionResultColumns[o+1]!=null&&(w=this.detectionResultColumns[o+1].getCodewords());let C=new Array(14);C[2]=N[u],C[3]=w[u],u>0&&(C[0]=m[u-1],C[4]=N[u-1],C[5]=w[u-1]),u>1&&(C[8]=m[u-2],C[10]=N[u-2],C[11]=w[u-2]),u<m.length-1&&(C[1]=m[u+1],C[6]=N[u+1],C[7]=w[u+1]),u<m.length-2&&(C[9]=m[u+2],C[12]=N[u+2],C[13]=w[u+2]);for(let O of C)if(Fs.adjustRowNumber(y,O))return}static adjustRowNumber(o,u){return u==null?!1:u.hasValidRowNumber()&&u.getBucket()===o.getBucket()?(o.setRowNumber(u.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,u){this.detectionResultColumns[o]=u}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let u=new ro;for(let m=0;m<o.getCodewords().length;m++){u.format("CW %3d:",m);for(let y=0;y<this.barcodeColumnCount+2;y++){if(this.detectionResultColumns[y]==null){u.format("    |   ");continue}let N=this.detectionResultColumns[y].getCodewords()[m];if(N==null){u.format("    |   ");continue}u.format(" %3d|%3d",N.getRowNumber(),N.getValue())}u.format("%n")}return u.toString()}}class aa{constructor(o,u,m,y){this.rowNumber=aa.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(u),this.bucket=Math.trunc(m),this.value=Math.trunc(y)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==aa.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}aa.BARCODE_ROW_UNKNOWN=-1;class Xs{static initialize(){for(let o=0;o<Dt.SYMBOL_TABLE.length;o++){let u=Dt.SYMBOL_TABLE[o],m=u&1;for(let y=0;y<Dt.BARS_IN_MODULE;y++){let N=0;for(;(u&1)===m;)N+=1,u>>=1;m=u&1,Xs.RATIOS_TABLE[o]||(Xs.RATIOS_TABLE[o]=new Array(Dt.BARS_IN_MODULE)),Xs.RATIOS_TABLE[o][Dt.BARS_IN_MODULE-y-1]=Math.fround(N/Dt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let u=Xs.getDecodedCodewordValue(Xs.sampleBitCounts(o));return u!==-1?u:Xs.getClosestDecodedValue(o)}static sampleBitCounts(o){let u=dt.sum(o),m=new Int32Array(Dt.BARS_IN_MODULE),y=0,N=0;for(let w=0;w<Dt.MODULES_IN_CODEWORD;w++){let C=u/(2*Dt.MODULES_IN_CODEWORD)+w*u/Dt.MODULES_IN_CODEWORD;N+o[y]<=C&&(N+=o[y],y++),m[y]++}return m}static getDecodedCodewordValue(o){let u=Xs.getBitValue(o);return Dt.getCodeword(u)===-1?-1:u}static getBitValue(o){let u=0;for(let m=0;m<o.length;m++)for(let y=0;y<o[m];y++)u=u<<1|(m%2===0?1:0);return Math.trunc(u)}static getClosestDecodedValue(o){let u=dt.sum(o),m=new Array(Dt.BARS_IN_MODULE);if(u>1)for(let w=0;w<m.length;w++)m[w]=Math.fround(o[w]/u);let y=Nt.MAX_VALUE,N=-1;this.bSymbolTableReady||Xs.initialize();for(let w=0;w<Xs.RATIOS_TABLE.length;w++){let C=0,O=Xs.RATIOS_TABLE[w];for(let R=0;R<Dt.BARS_IN_MODULE;R++){let q=Math.fround(O[R]-m[R]);if(C+=Math.fround(q*q),C>=y)break}C<y&&(y=C,N=Dt.SYMBOL_TABLE[w])}return N}}Xs.bSymbolTableReady=!1,Xs.RATIOS_TABLE=new Array(Dt.SYMBOL_TABLE.length).map(K=>new Array(Dt.BARS_IN_MODULE));class so{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class Rm{static parseLong(o,u=void 0){return parseInt(o,u)}}class gd extends x{}gd.kind="NullPointerException";class nh{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,u,m){if(o==null)throw new gd;if(u<0||u>o.length||m<0||u+m>o.length||u+m<0)throw new D;if(m===0)return;for(let y=0;y<m;y++)this.write(o[u+y])}flush(){}close(){}}class dc extends x{}class xd extends nh{constructor(o=32){if(super(),this.count=0,o<0)throw new b("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let m=this.buf.length<<1;if(m-o<0&&(m=o),m<0){if(o<0)throw new dc;m=_.MAX_VALUE}this.buf=L.copyOfUint8Array(this.buf,m)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,u,m){if(u<0||u>o.length||m<0||u+m-o.length>0)throw new D;this.ensureCapacity(this.count+m),P.arraycopy(o,u,this.buf,this.count,m),this.count+=m}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return L.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var wr;(function(K){K[K.ALPHA=0]="ALPHA",K[K.LOWER=1]="LOWER",K[K.MIXED=2]="MIXED",K[K.PUNCT=3]="PUNCT",K[K.ALPHA_SHIFT=4]="ALPHA_SHIFT",K[K.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(wr||(wr={}));function Mm(){if(typeof window<"u")return window.BigInt||null;if(typeof Wf<"u")return Wf.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let pd;function Oi(K){if(typeof pd>"u"&&(pd=Mm()),pd===null)throw new Error("BigInt is not supported!");return pd(K)}function ah(){let K=[];K[0]=Oi(1);let o=Oi(900);K[1]=o;for(let u=2;u<16;u++)K[u]=K[u-1]*o;return K}class Le{static decode(o,u){let m=new Q(""),y=z.ISO8859_1;m.enableDecoding(y);let N=1,w=o[N++],C=new so;for(;N<o[0];){switch(w){case Le.TEXT_COMPACTION_MODE_LATCH:N=Le.textCompaction(o,N,m);break;case Le.BYTE_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH_6:N=Le.byteCompaction(w,o,y,N,m);break;case Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(o[N++]);break;case Le.NUMERIC_COMPACTION_MODE_LATCH:N=Le.numericCompaction(o,N,m);break;case Le.ECI_CHARSET:z.getCharacterSetECIByValue(o[N++]);break;case Le.ECI_GENERAL_PURPOSE:N+=2;break;case Le.ECI_USER_DEFINED:N++;break;case Le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:N=Le.decodeMacroBlock(o,N,C);break;case Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Le.MACRO_PDF417_TERMINATOR:throw new M;default:N--,N=Le.textCompaction(o,N,m);break}if(N<o.length)w=o[N++];else throw M.getFormatInstance()}if(m.length()===0)throw M.getFormatInstance();let O=new Ce(null,m.toString(),null,u);return O.setOther(C),O}static decodeMacroBlock(o,u,m){if(u+Le.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw M.getFormatInstance();let y=new Int32Array(Le.NUMBER_OF_SEQUENCE_CODEWORDS);for(let C=0;C<Le.NUMBER_OF_SEQUENCE_CODEWORDS;C++,u++)y[C]=o[u];m.setSegmentIndex(_.parseInt(Le.decodeBase900toBase10(y,Le.NUMBER_OF_SEQUENCE_CODEWORDS)));let N=new Q;u=Le.textCompaction(o,u,N),m.setFileId(N.toString());let w=-1;for(o[u]===Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(w=u+1);u<o[0];)switch(o[u]){case Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(u++,o[u]){case Le.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let C=new Q;u=Le.textCompaction(o,u+1,C),m.setFileName(C.toString());break;case Le.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let O=new Q;u=Le.textCompaction(o,u+1,O),m.setSender(O.toString());break;case Le.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let R=new Q;u=Le.textCompaction(o,u+1,R),m.setAddressee(R.toString());break;case Le.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let q=new Q;u=Le.numericCompaction(o,u+1,q),m.setSegmentCount(_.parseInt(q.toString()));break;case Le.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let Z=new Q;u=Le.numericCompaction(o,u+1,Z),m.setTimestamp(Rm.parseLong(Z.toString()));break;case Le.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let ee=new Q;u=Le.numericCompaction(o,u+1,ee),m.setChecksum(_.parseInt(ee.toString()));break;case Le.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ue=new Q;u=Le.numericCompaction(o,u+1,ue),m.setFileSize(Rm.parseLong(ue.toString()));break;default:throw M.getFormatInstance()}break;case Le.MACRO_PDF417_TERMINATOR:u++,m.setLastSegment(!0);break;default:throw M.getFormatInstance()}if(w!==-1){let C=u-w;m.isLastSegment()&&C--,m.setOptionalData(L.copyOfRange(o,w,w+C))}return u}static textCompaction(o,u,m){let y=new Int32Array((o[0]-u)*2),N=new Int32Array((o[0]-u)*2),w=0,C=!1;for(;u<o[0]&&!C;){let O=o[u++];if(O<Le.TEXT_COMPACTION_MODE_LATCH)y[w]=O/30,y[w+1]=O%30,w+=2;else switch(O){case Le.TEXT_COMPACTION_MODE_LATCH:y[w++]=Le.TEXT_COMPACTION_MODE_LATCH;break;case Le.BYTE_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH_6:case Le.NUMERIC_COMPACTION_MODE_LATCH:case Le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Le.MACRO_PDF417_TERMINATOR:u--,C=!0;break;case Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y[w]=Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,O=o[u++],N[w]=O,w++;break}}return Le.decodeTextCompaction(y,N,w,m),u}static decodeTextCompaction(o,u,m,y){let N=wr.ALPHA,w=wr.ALPHA,C=0;for(;C<m;){let O=o[C],R="";switch(N){case wr.ALPHA:if(O<26)R=String.fromCharCode(65+O);else switch(O){case 26:R=" ";break;case Le.LL:N=wr.LOWER;break;case Le.ML:N=wr.MIXED;break;case Le.PS:w=N,N=wr.PUNCT_SHIFT;break;case Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(u[C]);break;case Le.TEXT_COMPACTION_MODE_LATCH:N=wr.ALPHA;break}break;case wr.LOWER:if(O<26)R=String.fromCharCode(97+O);else switch(O){case 26:R=" ";break;case Le.AS:w=N,N=wr.ALPHA_SHIFT;break;case Le.ML:N=wr.MIXED;break;case Le.PS:w=N,N=wr.PUNCT_SHIFT;break;case Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(u[C]);break;case Le.TEXT_COMPACTION_MODE_LATCH:N=wr.ALPHA;break}break;case wr.MIXED:if(O<Le.PL)R=Le.MIXED_CHARS[O];else switch(O){case Le.PL:N=wr.PUNCT;break;case 26:R=" ";break;case Le.LL:N=wr.LOWER;break;case Le.AL:N=wr.ALPHA;break;case Le.PS:w=N,N=wr.PUNCT_SHIFT;break;case Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(u[C]);break;case Le.TEXT_COMPACTION_MODE_LATCH:N=wr.ALPHA;break}break;case wr.PUNCT:if(O<Le.PAL)R=Le.PUNCT_CHARS[O];else switch(O){case Le.PAL:N=wr.ALPHA;break;case Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(u[C]);break;case Le.TEXT_COMPACTION_MODE_LATCH:N=wr.ALPHA;break}break;case wr.ALPHA_SHIFT:if(N=w,O<26)R=String.fromCharCode(65+O);else switch(O){case 26:R=" ";break;case Le.TEXT_COMPACTION_MODE_LATCH:N=wr.ALPHA;break}break;case wr.PUNCT_SHIFT:if(N=w,O<Le.PAL)R=Le.PUNCT_CHARS[O];else switch(O){case Le.PAL:N=wr.ALPHA;break;case Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(u[C]);break;case Le.TEXT_COMPACTION_MODE_LATCH:N=wr.ALPHA;break}break}R!==""&&y.append(R),C++}}static byteCompaction(o,u,m,y,N){let w=new xd,C=0,O=0,R=!1;switch(o){case Le.BYTE_COMPACTION_MODE_LATCH:let q=new Int32Array(6),Z=u[y++];for(;y<u[0]&&!R;)switch(q[C++]=Z,O=900*O+Z,Z=u[y++],Z){case Le.TEXT_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH:case Le.NUMERIC_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH_6:case Le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Le.MACRO_PDF417_TERMINATOR:y--,R=!0;break;default:if(C%5===0&&C>0){for(let ee=0;ee<6;++ee)w.write(Number(Oi(O)>>Oi(8*(5-ee))));O=0,C=0}break}y===u[0]&&Z<Le.TEXT_COMPACTION_MODE_LATCH&&(q[C++]=Z);for(let ee=0;ee<C;ee++)w.write(q[ee]);break;case Le.BYTE_COMPACTION_MODE_LATCH_6:for(;y<u[0]&&!R;){let ee=u[y++];if(ee<Le.TEXT_COMPACTION_MODE_LATCH)C++,O=900*O+ee;else switch(ee){case Le.TEXT_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH:case Le.NUMERIC_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH_6:case Le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Le.MACRO_PDF417_TERMINATOR:y--,R=!0;break}if(C%5===0&&C>0){for(let ue=0;ue<6;++ue)w.write(Number(Oi(O)>>Oi(8*(5-ue))));O=0,C=0}}break}return N.append(U.decode(w.toByteArray(),m)),y}static numericCompaction(o,u,m){let y=0,N=!1,w=new Int32Array(Le.MAX_NUMERIC_CODEWORDS);for(;u<o[0]&&!N;){let C=o[u++];if(u===o[0]&&(N=!0),C<Le.TEXT_COMPACTION_MODE_LATCH)w[y]=C,y++;else switch(C){case Le.TEXT_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH_6:case Le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Le.MACRO_PDF417_TERMINATOR:u--,N=!0;break}(y%Le.MAX_NUMERIC_CODEWORDS===0||C===Le.NUMERIC_COMPACTION_MODE_LATCH||N)&&y>0&&(m.append(Le.decodeBase900toBase10(w,y)),y=0)}return u}static decodeBase900toBase10(o,u){let m=Oi(0);for(let N=0;N<u;N++)m+=Le.EXP900[u-N-1]*Oi(o[N]);let y=m.toString();if(y.charAt(0)!=="1")throw new M;return y.substring(1)}}Le.TEXT_COMPACTION_MODE_LATCH=900,Le.BYTE_COMPACTION_MODE_LATCH=901,Le.NUMERIC_COMPACTION_MODE_LATCH=902,Le.BYTE_COMPACTION_MODE_LATCH_6=924,Le.ECI_USER_DEFINED=925,Le.ECI_GENERAL_PURPOSE=926,Le.ECI_CHARSET=927,Le.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Le.MACRO_PDF417_TERMINATOR=922,Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Le.MAX_NUMERIC_CODEWORDS=15,Le.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Le.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Le.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Le.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Le.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Le.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Le.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Le.PL=25,Le.LL=27,Le.AS=27,Le.ML=28,Le.AL=28,Le.PS=29,Le.PAL=29,Le.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Le.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Le.EXP900=Mm()?ah():[],Le.NUMBER_OF_SEQUENCE_CODEWORDS=2;class qt{constructor(){}static decode(o,u,m,y,N,w,C){let O=new ai(o,u,m,y,N),R=null,q=null,Z;for(let be=!0;;be=!1){if(u!=null&&(R=qt.getRowIndicatorColumn(o,O,u,!0,w,C)),y!=null&&(q=qt.getRowIndicatorColumn(o,O,y,!1,w,C)),Z=qt.merge(R,q),Z==null)throw ne.getNotFoundInstance();let Ne=Z.getBoundingBox();if(be&&Ne!=null&&(Ne.getMinY()<O.getMinY()||Ne.getMaxY()>O.getMaxY()))O=Ne;else break}Z.setBoundingBox(O);let ee=Z.getBarcodeColumnCount()+1;Z.setDetectionResultColumn(0,R),Z.setDetectionResultColumn(ee,q);let ue=R!=null;for(let be=1;be<=ee;be++){let Ne=ue?be:ee-be;if(Z.getDetectionResultColumn(Ne)!==void 0)continue;let Oe;Ne===0||Ne===ee?Oe=new sh(O,Ne===0):Oe=new Ti(O),Z.setDetectionResultColumn(Ne,Oe);let Re=-1,it=Re;for(let nt=O.getMinY();nt<=O.getMaxY();nt++){if(Re=qt.getStartColumn(Z,Ne,nt,ue),Re<0||Re>O.getMaxX()){if(it===-1)continue;Re=it}let et=qt.detectCodeword(o,O.getMinX(),O.getMaxX(),ue,Re,nt,w,C);et!=null&&(Oe.setCodeword(nt,et),it=Re,w=Math.min(w,et.getWidth()),C=Math.max(C,et.getWidth()))}}return qt.createDecoderResult(Z)}static merge(o,u){if(o==null&&u==null)return null;let m=qt.getBarcodeMetadata(o,u);if(m==null)return null;let y=ai.merge(qt.adjustBoundingBox(o),qt.adjustBoundingBox(u));return new Fs(m,y)}static adjustBoundingBox(o){if(o==null)return null;let u=o.getRowHeights();if(u==null)return null;let m=qt.getMax(u),y=0;for(let C of u)if(y+=m-C,C>0)break;let N=o.getCodewords();for(let C=0;y>0&&N[C]==null;C++)y--;let w=0;for(let C=u.length-1;C>=0&&(w+=m-u[C],!(u[C]>0));C--);for(let C=N.length-1;w>0&&N[C]==null;C--)w--;return o.getBoundingBox().addMissingRows(y,w,o.isLeft())}static getMax(o){let u=-1;for(let m of o)u=Math.max(u,m);return u}static getBarcodeMetadata(o,u){let m;if(o==null||(m=o.getBarcodeMetadata())==null)return u==null?null:u.getBarcodeMetadata();let y;return u==null||(y=u.getBarcodeMetadata())==null?m:m.getColumnCount()!==y.getColumnCount()&&m.getErrorCorrectionLevel()!==y.getErrorCorrectionLevel()&&m.getRowCount()!==y.getRowCount()?null:m}static getRowIndicatorColumn(o,u,m,y,N,w){let C=new sh(u,y);for(let O=0;O<2;O++){let R=O===0?1:-1,q=Math.trunc(Math.trunc(m.getX()));for(let Z=Math.trunc(Math.trunc(m.getY()));Z<=u.getMaxY()&&Z>=u.getMinY();Z+=R){let ee=qt.detectCodeword(o,0,o.getWidth(),y,q,Z,N,w);ee!=null&&(C.setCodeword(Z,ee),y?q=ee.getStartX():q=ee.getEndX())}}return C}static adjustCodewordCount(o,u){let m=u[0][1],y=m.getValue(),N=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-qt.getNumberOfECCodeWords(o.getBarcodeECLevel());if(y.length===0){if(N<1||N>Dt.MAX_CODEWORDS_IN_BARCODE)throw ne.getNotFoundInstance();m.setValue(N)}else y[0]!==N&&m.setValue(N)}static createDecoderResult(o){let u=qt.createBarcodeMatrix(o);qt.adjustCodewordCount(o,u);let m=new Array,y=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),N=[],w=new Array;for(let O=0;O<o.getBarcodeRowCount();O++)for(let R=0;R<o.getBarcodeColumnCount();R++){let q=u[O][R+1].getValue(),Z=O*o.getBarcodeColumnCount()+R;q.length===0?m.push(Z):q.length===1?y[Z]=q[0]:(w.push(Z),N.push(q))}let C=new Array(N.length);for(let O=0;O<C.length;O++)C[O]=N[O];return qt.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),y,Dt.toIntArray(m),Dt.toIntArray(w),C)}static createDecoderResultFromAmbiguousValues(o,u,m,y,N){let w=new Int32Array(y.length),C=100;for(;C-- >0;){for(let O=0;O<w.length;O++)u[y[O]]=N[O][w[O]];try{return qt.decodeCodewords(u,o,m)}catch(O){if(!(O instanceof T))throw O}if(w.length===0)throw T.getChecksumInstance();for(let O=0;O<w.length;O++)if(w[O]<N[O].length-1){w[O]++;break}else if(w[O]=0,O===w.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(o){let u=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let y=0;y<u.length;y++)for(let N=0;N<u[y].length;N++)u[y][N]=new Di;let m=0;for(let y of o.getDetectionResultColumns()){if(y!=null){for(let N of y.getCodewords())if(N!=null){let w=N.getRowNumber();if(w>=0){if(w>=u.length)continue;u[w][m].setValue(N.getValue())}}}m++}return u}static isValidBarcodeColumn(o,u){return u>=0&&u<=o.getBarcodeColumnCount()+1}static getStartColumn(o,u,m,y){let N=y?1:-1,w=null;if(qt.isValidBarcodeColumn(o,u-N)&&(w=o.getDetectionResultColumn(u-N).getCodeword(m)),w!=null)return y?w.getEndX():w.getStartX();if(w=o.getDetectionResultColumn(u).getCodewordNearby(m),w!=null)return y?w.getStartX():w.getEndX();if(qt.isValidBarcodeColumn(o,u-N)&&(w=o.getDetectionResultColumn(u-N).getCodewordNearby(m)),w!=null)return y?w.getEndX():w.getStartX();let C=0;for(;qt.isValidBarcodeColumn(o,u-N);){u-=N;for(let O of o.getDetectionResultColumn(u).getCodewords())if(O!=null)return(y?O.getEndX():O.getStartX())+N*C*(O.getEndX()-O.getStartX());C++}return y?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,u,m,y,N,w,C,O){N=qt.adjustCodewordStartColumn(o,u,m,y,N,w);let R=qt.getModuleBitCount(o,u,m,y,N,w);if(R==null)return null;let q,Z=dt.sum(R);if(y)q=N+Z;else{for(let be=0;be<R.length/2;be++){let Ne=R[be];R[be]=R[R.length-1-be],R[R.length-1-be]=Ne}q=N,N=q-Z}if(!qt.checkCodewordSkew(Z,C,O))return null;let ee=Xs.getDecodedValue(R),ue=Dt.getCodeword(ee);return ue===-1?null:new aa(N,q,qt.getCodewordBucketNumber(ee),ue)}static getModuleBitCount(o,u,m,y,N,w){let C=N,O=new Int32Array(8),R=0,q=y?1:-1,Z=y;for(;(y?C<m:C>=u)&&R<O.length;)o.get(C,w)===Z?(O[R]++,C+=q):(R++,Z=!Z);return R===O.length||C===(y?m:u)&&R===O.length-1?O:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,u,m,y,N,w){let C=N,O=y?-1:1;for(let R=0;R<2;R++){for(;(y?C>=u:C<m)&&y===o.get(C,w);){if(Math.abs(N-C)>qt.CODEWORD_SKEW_SIZE)return N;C+=O}O=-O,y=!y}return C}static checkCodewordSkew(o,u,m){return u-qt.CODEWORD_SKEW_SIZE<=o&&o<=m+qt.CODEWORD_SKEW_SIZE}static decodeCodewords(o,u,m){if(o.length===0)throw M.getFormatInstance();let y=1<<u+1,N=qt.correctErrors(o,m,y);qt.verifyCodewordCount(o,y);let w=Le.decode(o,""+u);return w.setErrorsCorrected(N),w.setErasures(m.length),w}static correctErrors(o,u,m){if(u!=null&&u.length>m/2+qt.MAX_ERRORS||m<0||m>qt.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return qt.errorCorrection.decode(o,m,u)}static verifyCodewordCount(o,u){if(o.length<4)throw M.getFormatInstance();let m=o[0];if(m>o.length)throw M.getFormatInstance();if(m===0)if(u<o.length)o[0]=o.length-u;else throw M.getFormatInstance()}static getBitCountForCodeword(o){let u=new Int32Array(8),m=0,y=u.length-1;for(;!((o&1)!==m&&(m=o&1,y--,y<0));)u[y]++,o>>=1;return u}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return qt.getCodewordBucketNumber(qt.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let u=new ro;for(let m=0;m<o.length;m++){u.format("Row %2d: ",m);for(let y=0;y<o[m].length;y++){let N=o[m][y];N.getValue().length===0?u.format("        ",null):u.format("%4d(%2d)",N.getValue()[0],N.getConfidence(N.getValue()[0]))}u.format("%n")}return u.toString()}}qt.CODEWORD_SKEW_SIZE=2,qt.MAX_ERRORS=3,qt.MAX_EC_CODEWORDS=512,qt.errorCorrection=new ni;class Ks{decode(o,u=null){let m=Ks.decode(o,u,!1);if(m==null||m.length===0||m[0]==null)throw ne.getNotFoundInstance();return m[0]}decodeMultiple(o,u=null){try{return Ks.decode(o,u,!0)}catch(m){throw m instanceof M||m instanceof T?ne.getNotFoundInstance():m}}static decode(o,u,m){const y=new Array,N=Lt.detectMultiple(o,u,m);for(const w of N.getPoints()){const C=qt.decode(N.getBits(),w[4],w[5],w[6],w[7],Ks.getMinCodewordWidth(w),Ks.getMaxCodewordWidth(w)),O=new fe(C.getText(),C.getRawBytes(),void 0,w,oe.PDF_417);O.putMetadata(Ve.ERROR_CORRECTION_LEVEL,C.getECLevel());const R=C.getOther();R!=null&&O.putMetadata(Ve.PDF417_EXTRA_METADATA,R),y.push(O)}return y.map(w=>w)}static getMaxWidth(o,u){return o==null||u==null?0:Math.trunc(Math.abs(o.getX()-u.getX()))}static getMinWidth(o,u){return o==null||u==null?_.MAX_VALUE:Math.trunc(Math.abs(o.getX()-u.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(Ks.getMaxWidth(o[0],o[4]),Ks.getMaxWidth(o[6],o[2])*Dt.MODULES_IN_CODEWORD/Dt.MODULES_IN_STOP_PATTERN),Math.max(Ks.getMaxWidth(o[1],o[5]),Ks.getMaxWidth(o[7],o[3])*Dt.MODULES_IN_CODEWORD/Dt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(Ks.getMinWidth(o[0],o[4]),Ks.getMinWidth(o[6],o[2])*Dt.MODULES_IN_CODEWORD/Dt.MODULES_IN_STOP_PATTERN),Math.min(Ks.getMinWidth(o[1],o[5]),Ks.getMinWidth(o[7],o[3])*Dt.MODULES_IN_CODEWORD/Dt.MODULES_IN_STOP_PATTERN)))}reset(){}}class yd extends x{}yd.kind="ReaderException";class Lm{constructor(o,u){this.verbose=o===!0,u&&this.setHints(u)}decode(o,u){return u&&this.setHints(u),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const u=!n(o)&&o.get(B.TRY_HARDER)===!0,m=n(o)?null:o.get(B.POSSIBLE_FORMATS),y=new Array;if(!n(m)){const N=m.some(w=>w===oe.UPC_A||w===oe.UPC_E||w===oe.EAN_13||w===oe.EAN_8||w===oe.CODABAR||w===oe.CODE_39||w===oe.CODE_93||w===oe.CODE_128||w===oe.ITF||w===oe.RSS_14||w===oe.RSS_EXPANDED);N&&!u&&y.push(new sa(o,this.verbose)),m.includes(oe.QR_CODE)&&y.push(new si),m.includes(oe.DATA_MATRIX)&&y.push(new ri),m.includes(oe.AZTEC)&&y.push(new Ir),m.includes(oe.PDF_417)&&y.push(new Ks),N&&u&&y.push(new sa(o,this.verbose))}y.length===0&&(u||y.push(new sa(o,this.verbose)),y.push(new si),y.push(new ri),y.push(new Ir),y.push(new Ks),u&&y.push(new sa(o,this.verbose))),this.readers=y}reset(){if(this.readers!==null)for(const o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new yd("No readers where selected, nothing can be read.");for(const u of this.readers)try{return u.decode(o,this.hints)}catch(m){if(m instanceof yd)continue}throw new ne("No MultiFormat Readers were able to detect the code.")}}class Fm extends ve{constructor(o=null,u=500){const m=new Lm;m.setHints(o),super(m,u)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class yy extends ve{constructor(o=500){super(new Ks,o)}}class by extends ve{constructor(o=500){super(new si,o)}}var ih;(function(K){K[K.ERROR_CORRECTION=0]="ERROR_CORRECTION",K[K.CHARACTER_SET=1]="CHARACTER_SET",K[K.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",K[K.MIN_SIZE=3]="MIN_SIZE",K[K.MAX_SIZE=4]="MAX_SIZE",K[K.MARGIN=5]="MARGIN",K[K.PDF417_COMPACT=6]="PDF417_COMPACT",K[K.PDF417_COMPACTION=7]="PDF417_COMPACTION",K[K.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",K[K.AZTEC_LAYERS=9]="AZTEC_LAYERS",K[K.QR_VERSION=10]="QR_VERSION"})(ih||(ih={}));var Ps=ih;class uc{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new xe(o,Int32Array.from([1])))}buildGenerator(o){const u=this.cachedGenerators;if(o>=u.length){let m=u[u.length-1];const y=this.field;for(let N=u.length;N<=o;N++){const w=m.multiply(new xe(y,Int32Array.from([1,y.exp(N-1+y.getGeneratorBase())])));u.push(w),m=w}}return u[o]}encode(o,u){if(u===0)throw new b("No error correction bytes");const m=o.length-u;if(m<=0)throw new b("No data bytes provided");const y=this.buildGenerator(u),N=new Int32Array(m);P.arraycopy(o,0,N,0,m);let w=new xe(this.field,N);w=w.multiplyByMonomial(u,1);const O=w.divide(y)[1].getCoefficients(),R=u-O.length;for(let q=0;q<R;q++)o[m+q]=0;P.arraycopy(O,0,o,m+R,O.length)}}class is{constructor(){}static applyMaskPenaltyRule1(o){return is.applyMaskPenaltyRule1Internal(o,!0)+is.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let u=0;const m=o.getArray(),y=o.getWidth(),N=o.getHeight();for(let w=0;w<N-1;w++){const C=m[w];for(let O=0;O<y-1;O++){const R=C[O];R===C[O+1]&&R===m[w+1][O]&&R===m[w+1][O+1]&&u++}}return is.N2*u}static applyMaskPenaltyRule3(o){let u=0;const m=o.getArray(),y=o.getWidth(),N=o.getHeight();for(let w=0;w<N;w++)for(let C=0;C<y;C++){const O=m[w];C+6<y&&O[C]===1&&O[C+1]===0&&O[C+2]===1&&O[C+3]===1&&O[C+4]===1&&O[C+5]===0&&O[C+6]===1&&(is.isWhiteHorizontal(O,C-4,C)||is.isWhiteHorizontal(O,C+7,C+11))&&u++,w+6<N&&m[w][C]===1&&m[w+1][C]===0&&m[w+2][C]===1&&m[w+3][C]===1&&m[w+4][C]===1&&m[w+5][C]===0&&m[w+6][C]===1&&(is.isWhiteVertical(m,C,w-4,w)||is.isWhiteVertical(m,C,w+7,w+11))&&u++}return u*is.N3}static isWhiteHorizontal(o,u,m){u=Math.max(u,0),m=Math.min(m,o.length);for(let y=u;y<m;y++)if(o[y]===1)return!1;return!0}static isWhiteVertical(o,u,m,y){m=Math.max(m,0),y=Math.min(y,o.length);for(let N=m;N<y;N++)if(o[N][u]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let u=0;const m=o.getArray(),y=o.getWidth(),N=o.getHeight();for(let O=0;O<N;O++){const R=m[O];for(let q=0;q<y;q++)R[q]===1&&u++}const w=o.getHeight()*o.getWidth();return Math.floor(Math.abs(u*2-w)*10/w)*is.N4}static getDataMaskBit(o,u,m){let y,N;switch(o){case 0:y=m+u&1;break;case 1:y=m&1;break;case 2:y=u%3;break;case 3:y=(m+u)%3;break;case 4:y=Math.floor(m/2)+Math.floor(u/3)&1;break;case 5:N=m*u,y=(N&1)+N%3;break;case 6:N=m*u,y=(N&1)+N%3&1;break;case 7:N=m*u,y=N%3+(m+u&1)&1;break;default:throw new b("Invalid mask pattern: "+o)}return y===0}static applyMaskPenaltyRule1Internal(o,u){let m=0;const y=u?o.getHeight():o.getWidth(),N=u?o.getWidth():o.getHeight(),w=o.getArray();for(let C=0;C<y;C++){let O=0,R=-1;for(let q=0;q<N;q++){const Z=u?w[C][q]:w[q][C];Z===R?O++:(O>=5&&(m+=is.N1+(O-5)),O=1,R=Z)}O>=5&&(m+=is.N1+(O-5))}return m}}is.N1=3,is.N2=3,is.N3=40,is.N4=10;class bd{constructor(o,u){this.width=o,this.height=u;const m=new Array(u);for(let y=0;y!==u;y++)m[y]=new Uint8Array(o);this.bytes=m}getHeight(){return this.height}getWidth(){return this.width}get(o,u){return this.bytes[u][o]}getArray(){return this.bytes}setNumber(o,u,m){this.bytes[u][o]=m}setBoolean(o,u,m){this.bytes[u][o]=m?1:0}clear(o){for(const u of this.bytes)L.fill(u,o)}equals(o){if(!(o instanceof bd))return!1;const u=o;if(this.width!==u.width||this.height!==u.height)return!1;for(let m=0,y=this.height;m<y;++m){const N=this.bytes[m],w=u.bytes[m];for(let C=0,O=this.width;C<O;++C)if(N[C]!==w[C])return!1}return!0}toString(){const o=new Q;for(let u=0,m=this.height;u<m;++u){const y=this.bytes[u];for(let N=0,w=this.width;N<w;++N)switch(y[N]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}class tl{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new Q;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<tl.NUM_MASK_PATTERNS}}tl.NUM_MASK_PATTERNS=8;class Tr extends x{}Tr.kind="WriterException";class Ot{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,u,m,y,N){Ot.clearMatrix(N),Ot.embedBasicPatterns(m,N),Ot.embedTypeInfo(u,y,N),Ot.maybeEmbedVersionInfo(m,N),Ot.embedDataBits(o,y,N)}static embedBasicPatterns(o,u){Ot.embedPositionDetectionPatternsAndSeparators(u),Ot.embedDarkDotAtLeftBottomCorner(u),Ot.maybeEmbedPositionAdjustmentPatterns(o,u),Ot.embedTimingPatterns(u)}static embedTypeInfo(o,u,m){const y=new $;Ot.makeTypeInfoBits(o,u,y);for(let N=0,w=y.getSize();N<w;++N){const C=y.get(y.getSize()-1-N),O=Ot.TYPE_INFO_COORDINATES[N],R=O[0],q=O[1];if(m.setBoolean(R,q,C),N<8){const Z=m.getWidth()-N-1;m.setBoolean(Z,8,C)}else{const ee=m.getHeight()-7+(N-8);m.setBoolean(8,ee,C)}}}static maybeEmbedVersionInfo(o,u){if(o.getVersionNumber()<7)return;const m=new $;Ot.makeVersionInfoBits(o,m);let y=17;for(let N=0;N<6;++N)for(let w=0;w<3;++w){const C=m.get(y);y--,u.setBoolean(N,u.getHeight()-11+w,C),u.setBoolean(u.getHeight()-11+w,N,C)}}static embedDataBits(o,u,m){let y=0,N=-1,w=m.getWidth()-1,C=m.getHeight()-1;for(;w>0;){for(w===6&&(w-=1);C>=0&&C<m.getHeight();){for(let O=0;O<2;++O){const R=w-O;if(!Ot.isEmpty(m.get(R,C)))continue;let q;y<o.getSize()?(q=o.get(y),++y):q=!1,u!==255&&is.getDataMaskBit(u,R,C)&&(q=!q),m.setBoolean(R,C,q)}C+=N}N=-N,C+=N,w-=2}if(y!==o.getSize())throw new Tr("Not all bits consumed: "+y+"/"+o.getSize())}static findMSBSet(o){return 32-_.numberOfLeadingZeros(o)}static calculateBCHCode(o,u){if(u===0)throw new b("0 polynomial");const m=Ot.findMSBSet(u);for(o<<=m-1;Ot.findMSBSet(o)>=m;)o^=u<<Ot.findMSBSet(o)-m;return o}static makeTypeInfoBits(o,u,m){if(!tl.isValidMaskPattern(u))throw new Tr("Invalid mask pattern");const y=o.getBits()<<3|u;m.appendBits(y,5);const N=Ot.calculateBCHCode(y,Ot.TYPE_INFO_POLY);m.appendBits(N,10);const w=new $;if(w.appendBits(Ot.TYPE_INFO_MASK_PATTERN,15),m.xor(w),m.getSize()!==15)throw new Tr("should not happen but we got: "+m.getSize())}static makeVersionInfoBits(o,u){u.appendBits(o.getVersionNumber(),6);const m=Ot.calculateBCHCode(o.getVersionNumber(),Ot.VERSION_INFO_POLY);if(u.appendBits(m,12),u.getSize()!==18)throw new Tr("should not happen but we got: "+u.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let u=8;u<o.getWidth()-8;++u){const m=(u+1)%2;Ot.isEmpty(o.get(u,6))&&o.setNumber(u,6,m),Ot.isEmpty(o.get(6,u))&&o.setNumber(6,u,m)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new Tr;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,u,m){for(let y=0;y<8;++y){if(!Ot.isEmpty(m.get(o+y,u)))throw new Tr;m.setNumber(o+y,u,0)}}static embedVerticalSeparationPattern(o,u,m){for(let y=0;y<7;++y){if(!Ot.isEmpty(m.get(o,u+y)))throw new Tr;m.setNumber(o,u+y,0)}}static embedPositionAdjustmentPattern(o,u,m){for(let y=0;y<5;++y){const N=Ot.POSITION_ADJUSTMENT_PATTERN[y];for(let w=0;w<5;++w)m.setNumber(o+w,u+y,N[w])}}static embedPositionDetectionPattern(o,u,m){for(let y=0;y<7;++y){const N=Ot.POSITION_DETECTION_PATTERN[y];for(let w=0;w<7;++w)m.setNumber(o+w,u+y,N[w])}}static embedPositionDetectionPatternsAndSeparators(o){const u=Ot.POSITION_DETECTION_PATTERN[0].length;Ot.embedPositionDetectionPattern(0,0,o),Ot.embedPositionDetectionPattern(o.getWidth()-u,0,o),Ot.embedPositionDetectionPattern(0,o.getWidth()-u,o);const m=8;Ot.embedHorizontalSeparationPattern(0,m-1,o),Ot.embedHorizontalSeparationPattern(o.getWidth()-m,m-1,o),Ot.embedHorizontalSeparationPattern(0,o.getWidth()-m,o);const y=7;Ot.embedVerticalSeparationPattern(y,0,o),Ot.embedVerticalSeparationPattern(o.getHeight()-y-1,0,o),Ot.embedVerticalSeparationPattern(y,o.getHeight()-y,o)}static maybeEmbedPositionAdjustmentPatterns(o,u){if(o.getVersionNumber()<2)return;const m=o.getVersionNumber()-1,y=Ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[m];for(let N=0,w=y.length;N!==w;N++){const C=y[N];if(C>=0)for(let O=0;O!==w;O++){const R=y[O];R>=0&&Ot.isEmpty(u.get(R,C))&&Ot.embedPositionAdjustmentPattern(R-2,C-2,u)}}}}Ot.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ot.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ot.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ot.VERSION_INFO_POLY=7973,Ot.TYPE_INFO_POLY=1335,Ot.TYPE_INFO_MASK_PATTERN=21522;class vy{constructor(o,u){this.dataBytes=o,this.errorCorrectionBytes=u}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class qr{constructor(){}static calculateMaskPenalty(o){return is.applyMaskPenaltyRule1(o)+is.applyMaskPenaltyRule2(o)+is.applyMaskPenaltyRule3(o)+is.applyMaskPenaltyRule4(o)}static encode(o,u,m=null){let y=qr.DEFAULT_BYTE_MODE_ENCODING;const N=m!==null&&m.get(Ps.CHARACTER_SET)!==void 0;N&&(y=m.get(Ps.CHARACTER_SET).toString());const w=this.chooseMode(o,y),C=new $;if(w===St.BYTE&&(N||qr.DEFAULT_BYTE_MODE_ENCODING!==y)){const nt=z.getCharacterSetECIByName(y);nt!==void 0&&this.appendECI(nt,C)}this.appendModeInfo(w,C);const O=new $;this.appendBytes(o,w,O,y);let R;if(m!==null&&m.get(Ps.QR_VERSION)!==void 0){const nt=Number.parseInt(m.get(Ps.QR_VERSION).toString(),10);R=jt.getVersionForNumber(nt);const et=this.calculateBitsNeeded(w,C,O,R);if(!this.willFit(et,R,u))throw new Tr("Data too big for requested version")}else R=this.recommendVersion(u,w,C,O);const q=new $;q.appendBitArray(C);const Z=w===St.BYTE?O.getSizeInBytes():o.length;this.appendLengthInfo(Z,R,w,q),q.appendBitArray(O);const ee=R.getECBlocksForLevel(u),ue=R.getTotalCodewords()-ee.getTotalECCodewords();this.terminateBits(ue,q);const be=this.interleaveWithECBytes(q,R.getTotalCodewords(),ue,ee.getNumBlocks()),Ne=new tl;Ne.setECLevel(u),Ne.setMode(w),Ne.setVersion(R);const Oe=R.getDimensionForVersion(),Re=new bd(Oe,Oe),it=this.chooseMaskPattern(be,u,R,Re);return Ne.setMaskPattern(it),Ot.buildMatrix(be,u,R,it,Re),Ne.setMatrix(Re),Ne}static recommendVersion(o,u,m,y){const N=this.calculateBitsNeeded(u,m,y,jt.getVersionForNumber(1)),w=this.chooseVersion(N,o),C=this.calculateBitsNeeded(u,m,y,w);return this.chooseVersion(C,o)}static calculateBitsNeeded(o,u,m,y){return u.getSize()+o.getCharacterCountBits(y)+m.getSize()}static getAlphanumericCode(o){return o<qr.ALPHANUMERIC_TABLE.length?qr.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,u=null){if(z.SJIS.getName()===u&&this.isOnlyDoubleByteKanji(o))return St.KANJI;let m=!1,y=!1;for(let N=0,w=o.length;N<w;++N){const C=o.charAt(N);if(qr.isDigit(C))m=!0;else if(this.getAlphanumericCode(C.charCodeAt(0))!==-1)y=!0;else return St.BYTE}return y?St.ALPHANUMERIC:m?St.NUMERIC:St.BYTE}static isOnlyDoubleByteKanji(o){let u;try{u=U.encode(o,z.SJIS)}catch{return!1}const m=u.length;if(m%2!==0)return!1;for(let y=0;y<m;y+=2){const N=u[y]&255;if((N<129||N>159)&&(N<224||N>235))return!1}return!0}static chooseMaskPattern(o,u,m,y){let N=Number.MAX_SAFE_INTEGER,w=-1;for(let C=0;C<tl.NUM_MASK_PATTERNS;C++){Ot.buildMatrix(o,u,m,C,y);let O=this.calculateMaskPenalty(y);O<N&&(N=O,w=C)}return w}static chooseVersion(o,u){for(let m=1;m<=40;m++){const y=jt.getVersionForNumber(m);if(qr.willFit(o,y,u))return y}throw new Tr("Data too big")}static willFit(o,u,m){const y=u.getTotalCodewords(),w=u.getECBlocksForLevel(m).getTotalECCodewords(),C=y-w,O=(o+7)/8;return C>=O}static terminateBits(o,u){const m=o*8;if(u.getSize()>m)throw new Tr("data bits cannot fit in the QR Code"+u.getSize()+" > "+m);for(let w=0;w<4&&u.getSize()<m;++w)u.appendBit(!1);const y=u.getSize()&7;if(y>0)for(let w=y;w<8;w++)u.appendBit(!1);const N=o-u.getSizeInBytes();for(let w=0;w<N;++w)u.appendBits((w&1)===0?236:17,8);if(u.getSize()!==m)throw new Tr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,u,m,y,N,w){if(y>=m)throw new Tr("Block ID too large");const C=o%m,O=m-C,R=Math.floor(o/m),q=R+1,Z=Math.floor(u/m),ee=Z+1,ue=R-Z,be=q-ee;if(ue!==be)throw new Tr("EC bytes mismatch");if(m!==O+C)throw new Tr("RS blocks mismatch");if(o!==(Z+ue)*O+(ee+be)*C)throw new Tr("Total bytes mismatch");y<O?(N[0]=Z,w[0]=ue):(N[0]=ee,w[0]=be)}static interleaveWithECBytes(o,u,m,y){if(o.getSizeInBytes()!==m)throw new Tr("Number of bits and data bytes does not match");let N=0,w=0,C=0;const O=new Array;for(let q=0;q<y;++q){const Z=new Int32Array(1),ee=new Int32Array(1);qr.getNumDataBytesAndNumECBytesForBlockID(u,m,y,q,Z,ee);const ue=Z[0],be=new Uint8Array(ue);o.toBytes(8*N,be,0,ue);const Ne=qr.generateECBytes(be,ee[0]);O.push(new vy(be,Ne)),w=Math.max(w,ue),C=Math.max(C,Ne.length),N+=Z[0]}if(m!==N)throw new Tr("Data bytes does not match offset");const R=new $;for(let q=0;q<w;++q)for(const Z of O){const ee=Z.getDataBytes();q<ee.length&&R.appendBits(ee[q],8)}for(let q=0;q<C;++q)for(const Z of O){const ee=Z.getErrorCorrectionBytes();q<ee.length&&R.appendBits(ee[q],8)}if(u!==R.getSizeInBytes())throw new Tr("Interleaving error: "+u+" and "+R.getSizeInBytes()+" differ.");return R}static generateECBytes(o,u){const m=o.length,y=new Int32Array(m+u);for(let w=0;w<m;w++)y[w]=o[w]&255;new uc(pe.QR_CODE_FIELD_256).encode(y,u);const N=new Uint8Array(u);for(let w=0;w<u;w++)N[w]=y[m+w];return N}static appendModeInfo(o,u){u.appendBits(o.getBits(),4)}static appendLengthInfo(o,u,m,y){const N=m.getCharacterCountBits(u);if(o>=1<<N)throw new Tr(o+" is bigger than "+((1<<N)-1));y.appendBits(o,N)}static appendBytes(o,u,m,y){switch(u){case St.NUMERIC:qr.appendNumericBytes(o,m);break;case St.ALPHANUMERIC:qr.appendAlphanumericBytes(o,m);break;case St.BYTE:qr.append8BitBytes(o,m,y);break;case St.KANJI:qr.appendKanjiBytes(o,m);break;default:throw new Tr("Invalid mode: "+u)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const u=qr.getDigit(o);return u>=0&&u<=9}static appendNumericBytes(o,u){const m=o.length;let y=0;for(;y<m;){const N=qr.getDigit(o.charAt(y));if(y+2<m){const w=qr.getDigit(o.charAt(y+1)),C=qr.getDigit(o.charAt(y+2));u.appendBits(N*100+w*10+C,10),y+=3}else if(y+1<m){const w=qr.getDigit(o.charAt(y+1));u.appendBits(N*10+w,7),y+=2}else u.appendBits(N,4),y++}}static appendAlphanumericBytes(o,u){const m=o.length;let y=0;for(;y<m;){const N=qr.getAlphanumericCode(o.charCodeAt(y));if(N===-1)throw new Tr;if(y+1<m){const w=qr.getAlphanumericCode(o.charCodeAt(y+1));if(w===-1)throw new Tr;u.appendBits(N*45+w,11),y+=2}else u.appendBits(N,6),y++}}static append8BitBytes(o,u,m){let y;try{y=U.encode(o,m)}catch(N){throw new Tr(N)}for(let N=0,w=y.length;N!==w;N++){const C=y[N];u.appendBits(C,8)}}static appendKanjiBytes(o,u){let m;try{m=U.encode(o,z.SJIS)}catch(N){throw new Tr(N)}const y=m.length;for(let N=0;N<y;N+=2){const w=m[N]&255,C=m[N+1]&255,O=w<<8&4294967295|C;let R=-1;if(O>=33088&&O<=40956?R=O-33088:O>=57408&&O<=60351&&(R=O-49472),R===-1)throw new Tr("Invalid byte sequence");const q=(R>>8)*192+(R&255);u.appendBits(q,13)}}static appendECI(o,u){u.appendBits(St.ECI.getBits(),4),u.appendBits(o.getValue(),8)}}qr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),qr.DEFAULT_BYTE_MODE_ENCODING=z.UTF8.getName();class rl{write(o,u,m,y=null){if(o.length===0)throw new b("Found empty contents");if(u<0||m<0)throw new b("Requested dimensions are too small: "+u+"x"+m);let N=Wt.L,w=rl.QUIET_ZONE_SIZE;y!==null&&(y.get(Ps.ERROR_CORRECTION)!==void 0&&(N=Wt.fromString(y.get(Ps.ERROR_CORRECTION).toString())),y.get(Ps.MARGIN)!==void 0&&(w=Number.parseInt(y.get(Ps.MARGIN).toString(),10)));const C=qr.encode(o,N,y);return this.renderResult(C,u,m,w)}writeToDom(o,u,m,y,N=null){typeof o=="string"&&(o=document.querySelector(o));const w=this.write(u,m,y,N);o&&o.appendChild(w)}renderResult(o,u,m,y){const N=o.getMatrix();if(N===null)throw new me;const w=N.getWidth(),C=N.getHeight(),O=w+y*2,R=C+y*2,q=Math.max(u,O),Z=Math.max(m,R),ee=Math.min(Math.floor(q/O),Math.floor(Z/R)),ue=Math.floor((q-w*ee)/2),be=Math.floor((Z-C*ee)/2),Ne=this.createSVGElement(q,Z);for(let Oe=0,Re=be;Oe<C;Oe++,Re+=ee)for(let it=0,nt=ue;it<w;it++,nt+=ee)if(N.get(it,Oe)===1){const et=this.createSvgRectElement(nt,Re,ee,ee);Ne.appendChild(et)}return Ne}createSVGElement(o,u){const m=document.createElementNS(rl.SVG_NS,"svg");return m.setAttributeNS(null,"height",o.toString()),m.setAttributeNS(null,"width",u.toString()),m}createSvgRectElement(o,u,m,y){const N=document.createElementNS(rl.SVG_NS,"rect");return N.setAttributeNS(null,"x",o.toString()),N.setAttributeNS(null,"y",u.toString()),N.setAttributeNS(null,"height",m.toString()),N.setAttributeNS(null,"width",y.toString()),N.setAttributeNS(null,"fill","#000000"),N}}rl.QUIET_ZONE_SIZE=4,rl.SVG_NS="http://www.w3.org/2000/svg";class no{encode(o,u,m,y,N){if(o.length===0)throw new b("Found empty contents");if(u!==oe.QR_CODE)throw new b("Can only encode QR_CODE, but got "+u);if(m<0||y<0)throw new b(`Requested dimensions are too small: ${m}x${y}`);let w=Wt.L,C=no.QUIET_ZONE_SIZE;N!==null&&(N.get(Ps.ERROR_CORRECTION)!==void 0&&(w=Wt.fromString(N.get(Ps.ERROR_CORRECTION).toString())),N.get(Ps.MARGIN)!==void 0&&(C=Number.parseInt(N.get(Ps.MARGIN).toString(),10)));const O=qr.encode(o,w,N);return no.renderResult(O,m,y,C)}static renderResult(o,u,m,y){const N=o.getMatrix();if(N===null)throw new me;const w=N.getWidth(),C=N.getHeight(),O=w+y*2,R=C+y*2,q=Math.max(u,O),Z=Math.max(m,R),ee=Math.min(Math.floor(q/O),Math.floor(Z/R)),ue=Math.floor((q-w*ee)/2),be=Math.floor((Z-C*ee)/2),Ne=new ce(q,Z);for(let Oe=0,Re=be;Oe<C;Oe++,Re+=ee)for(let it=0,nt=ue;it<w;it++,nt+=ee)N.get(it,Oe)===1&&Ne.setRegion(nt,Re,ee,ee);return Ne}}no.QUIET_ZONE_SIZE=4;class Ny{encode(o,u,m,y,N){let w;switch(u){case oe.QR_CODE:w=new no;break;default:throw new b("No encoder available for format "+u)}return w.encode(o,u,m,y,N)}}class Ea extends le{constructor(o,u,m,y,N,w,C,O){if(super(w,C),this.yuvData=o,this.dataWidth=u,this.dataHeight=m,this.left=y,this.top=N,y+w>u||N+C>m)throw new b("Crop rectangle does not fit within image data.");O&&this.reverseHorizontal(w,C)}getRow(o,u){if(o<0||o>=this.getHeight())throw new b("Requested row is outside the image: "+o);const m=this.getWidth();(u==null||u.length<m)&&(u=new Uint8ClampedArray(m));const y=(o+this.top)*this.dataWidth+this.left;return P.arraycopy(this.yuvData,y,u,0,m),u}getMatrix(){const o=this.getWidth(),u=this.getHeight();if(o===this.dataWidth&&u===this.dataHeight)return this.yuvData;const m=o*u,y=new Uint8ClampedArray(m);let N=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return P.arraycopy(this.yuvData,N,y,0,m),y;for(let w=0;w<u;w++){const C=w*o;P.arraycopy(this.yuvData,N,y,C,o),N+=this.dataWidth}return y}isCropSupported(){return!0}crop(o,u,m,y){return new Ea(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+u,m,y,!1)}renderThumbnail(){const o=this.getWidth()/Ea.THUMBNAIL_SCALE_FACTOR,u=this.getHeight()/Ea.THUMBNAIL_SCALE_FACTOR,m=new Int32Array(o*u),y=this.yuvData;let N=this.top*this.dataWidth+this.left;for(let w=0;w<u;w++){const C=w*o;for(let O=0;O<o;O++){const R=y[N+O*Ea.THUMBNAIL_SCALE_FACTOR]&255;m[C+O]=4278190080|R*65793}N+=this.dataWidth*Ea.THUMBNAIL_SCALE_FACTOR}return m}getThumbnailWidth(){return this.getWidth()/Ea.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ea.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,u){const m=this.yuvData;for(let y=0,N=this.top*this.dataWidth+this.left;y<u;y++,N+=this.dataWidth){const w=N+o/2;for(let C=N,O=N+o-1;C<w;C++,O--){const R=m[C];m[C]=m[O],m[O]=R}}}invert(){return new ge(this)}}Ea.THUMBNAIL_SCALE_FACTOR=2;class lh extends le{constructor(o,u,m,y,N,w,C){if(super(u,m),this.dataWidth=y,this.dataHeight=N,this.left=w,this.top=C,o.BYTES_PER_ELEMENT===4){const O=u*m,R=new Uint8ClampedArray(O);for(let q=0;q<O;q++){const Z=o[q],ee=Z>>16&255,ue=Z>>7&510,be=Z&255;R[q]=(ee+ue+be)/4&255}this.luminances=R}else this.luminances=o;if(y===void 0&&(this.dataWidth=u),N===void 0&&(this.dataHeight=m),w===void 0&&(this.left=0),C===void 0&&(this.top=0),this.left+u>this.dataWidth||this.top+m>this.dataHeight)throw new b("Crop rectangle does not fit within image data.")}getRow(o,u){if(o<0||o>=this.getHeight())throw new b("Requested row is outside the image: "+o);const m=this.getWidth();(u==null||u.length<m)&&(u=new Uint8ClampedArray(m));const y=(o+this.top)*this.dataWidth+this.left;return P.arraycopy(this.luminances,y,u,0,m),u}getMatrix(){const o=this.getWidth(),u=this.getHeight();if(o===this.dataWidth&&u===this.dataHeight)return this.luminances;const m=o*u,y=new Uint8ClampedArray(m);let N=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return P.arraycopy(this.luminances,N,y,0,m),y;for(let w=0;w<u;w++){const C=w*o;P.arraycopy(this.luminances,N,y,C,o),N+=this.dataWidth}return y}isCropSupported(){return!0}crop(o,u,m,y){return new lh(this.luminances,m,y,this.dataWidth,this.dataHeight,this.left+o,this.top+u)}invert(){return new ge(this)}}class Bm extends z{static forName(o){return this.getCharacterSetECIByName(o)}}class hc{}hc.ISO_8859_1=z.ISO8859_1;class ao{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class Um{static singletonList(o){return[o]}static min(o,u){return o.sort(u)[0]}}class zm{constructor(o){this.previous=o}getPrevious(){return this.previous}}class sl extends zm{constructor(o,u,m){super(o),this.value=u,this.bitCount=m}appendTo(o,u){o.appendBits(this.value,this.bitCount)}add(o,u){return new sl(this,o,u)}addBinaryShift(o,u){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new sl(this,o,u)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+_.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class vd extends sl{constructor(o,u,m){super(o,0,0),this.binaryShiftStart=u,this.binaryShiftByteCount=m}appendTo(o,u){for(let m=0;m<this.binaryShiftByteCount;m++)(m===0||m===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):m===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(u[this.binaryShiftStart+m],8)}addBinaryShift(o,u){return new vd(this,o,u)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Vm(K,o,u){return new vd(K,o,u)}function io(K,o,u){return new sl(K,o,u)}const lo=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Pi=0,Nd=1,Vn=2,oh=3,ia=4,mc=new sl(null,0,0),nl=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function jy(K){for(let o of K)L.fill(o,-1);return K[Pi][ia]=0,K[Nd][ia]=0,K[Nd][Pi]=28,K[oh][ia]=0,K[Vn][ia]=0,K[Vn][Pi]=15,K}const fc=jy(L.createInt32Array(6,6));class la{constructor(o,u,m,y){this.token=o,this.mode=u,this.binaryShiftByteCount=m,this.bitCount=y}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,u){let m=this.bitCount,y=this.token;if(o!==this.mode){let w=nl[this.mode][o];y=io(y,w&65535,w>>16),m+=w>>16}let N=o===Vn?4:5;return y=io(y,u,N),new la(y,o,0,m+N)}shiftAndAppend(o,u){let m=this.token,y=this.mode===Vn?4:5;return m=io(m,fc[this.mode][o],y),m=io(m,u,5),new la(m,this.mode,0,this.bitCount+y+5)}addBinaryShiftChar(o){let u=this.token,m=this.mode,y=this.bitCount;if(this.mode===ia||this.mode===Vn){let C=nl[m][Pi];u=io(u,C&65535,C>>16),y+=C>>16,m=Pi}let N=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,w=new la(u,m,this.binaryShiftByteCount+1,y+N);return w.binaryShiftByteCount===2078&&(w=w.endBinaryShift(o+1)),w}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let u=this.token;return u=Vm(u,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new la(u,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let u=this.bitCount+(nl[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?u+=la.calculateBinaryShiftCost(o)-la.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(u+=10),u<=o.bitCount}toBitArray(o){let u=[];for(let y=this.endBinaryShift(o.length).token;y!==null;y=y.getPrevious())u.unshift(y);let m=new $;for(const y of u)y.appendTo(m,o);return m}toString(){return G.format("%s bits=%d bytes=%d",lo[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}la.INITIAL_STATE=new la(mc,Pi,0,0);function $m(K){const o=G.getCharCode(" "),u=G.getCharCode("."),m=G.getCharCode(",");K[Pi][o]=1;const y=G.getCharCode("Z"),N=G.getCharCode("A");for(let ee=N;ee<=y;ee++)K[Pi][ee]=ee-N+2;K[Nd][o]=1;const w=G.getCharCode("z"),C=G.getCharCode("a");for(let ee=C;ee<=w;ee++)K[Nd][ee]=ee-C+2;K[Vn][o]=1;const O=G.getCharCode("9"),R=G.getCharCode("0");for(let ee=R;ee<=O;ee++)K[Vn][ee]=ee-R+2;K[Vn][m]=12,K[Vn][u]=13;const q=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let ee=0;ee<q.length;ee++)K[oh][G.getCharCode(q[ee])]=ee;const Z=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let ee=0;ee<Z.length;ee++)G.getCharCode(Z[ee])>0&&(K[ia][G.getCharCode(Z[ee])]=ee);return K}const gc=$m(L.createInt32Array(5,256));class al{constructor(o){this.text=o}encode(){const o=G.getCharCode(" "),u=G.getCharCode(`
`);let m=Um.singletonList(la.INITIAL_STATE);for(let N=0;N<this.text.length;N++){let w,C=N+1<this.text.length?this.text[N+1]:0;switch(this.text[N]){case G.getCharCode("\r"):w=C===u?2:0;break;case G.getCharCode("."):w=C===o?3:0;break;case G.getCharCode(","):w=C===o?4:0;break;case G.getCharCode(":"):w=C===o?5:0;break;default:w=0}w>0?(m=al.updateStateListForPair(m,N,w),N++):m=this.updateStateListForChar(m,N)}return Um.min(m,(N,w)=>N.getBitCount()-w.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,u){const m=[];for(let y of o)this.updateStateForChar(y,u,m);return al.simplifyStates(m)}updateStateForChar(o,u,m){let y=this.text[u]&255,N=gc[o.getMode()][y]>0,w=null;for(let C=0;C<=ia;C++){let O=gc[C][y];if(O>0){if(w==null&&(w=o.endBinaryShift(u)),!N||C===o.getMode()||C===Vn){const R=w.latchAndAppend(C,O);m.push(R)}if(!N&&fc[o.getMode()][C]>=0){const R=w.shiftAndAppend(C,O);m.push(R)}}}if(o.getBinaryShiftByteCount()>0||gc[o.getMode()][y]===0){let C=o.addBinaryShiftChar(u);m.push(C)}}static updateStateListForPair(o,u,m){const y=[];for(let N of o)this.updateStateForPair(N,u,m,y);return this.simplifyStates(y)}static updateStateForPair(o,u,m,y){let N=o.endBinaryShift(u);if(y.push(N.latchAndAppend(ia,m)),o.getMode()!==ia&&y.push(N.shiftAndAppend(ia,m)),m===3||m===4){let w=N.latchAndAppend(Vn,16-m).latchAndAppend(Vn,1);y.push(w)}if(o.getBinaryShiftByteCount()>0){let w=o.addBinaryShiftChar(u).addBinaryShiftChar(u+1);y.push(w)}}static simplifyStates(o){let u=[];for(const m of o){let y=!0;for(const N of u){if(N.isBetterThanOrEqualTo(m)){y=!1;break}m.isBetterThanOrEqualTo(N)&&(u=u.filter(w=>w!==N))}y&&u.push(m)}return u}}class rr{constructor(){}static encodeBytes(o){return rr.encode(o,rr.DEFAULT_EC_PERCENT,rr.DEFAULT_AZTEC_LAYERS)}static encode(o,u,m){let y=new al(o).encode(),N=_.truncDivision(y.getSize()*u,100)+11,w=y.getSize()+N,C,O,R,q,Z;if(m!==rr.DEFAULT_AZTEC_LAYERS){if(C=m<0,O=Math.abs(m),O>(C?rr.MAX_NB_BITS_COMPACT:rr.MAX_NB_BITS))throw new b(G.format("Illegal value %s for layers",m));R=rr.totalBitsInLayer(O,C),q=rr.WORD_SIZE[O];let et=R-R%q;if(Z=rr.stuffBits(y,q),Z.getSize()+N>et)throw new b("Data to large for user specified layer");if(C&&Z.getSize()>q*64)throw new b("Data to large for user specified layer")}else{q=0,Z=null;for(let et=0;;et++){if(et>rr.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(C=et<=3,O=C?et+1:et,R=rr.totalBitsInLayer(O,C),w>R)continue;(Z==null||q!==rr.WORD_SIZE[O])&&(q=rr.WORD_SIZE[O],Z=rr.stuffBits(y,q));let Gt=R-R%q;if(!(C&&Z.getSize()>q*64)&&Z.getSize()+N<=Gt)break}}let ee=rr.generateCheckWords(Z,R,q),ue=Z.getSize()/q,be=rr.generateModeMessage(C,O,ue),Ne=(C?11:14)+O*4,Oe=new Int32Array(Ne),Re;if(C){Re=Ne;for(let et=0;et<Oe.length;et++)Oe[et]=et}else{Re=Ne+1+2*_.truncDivision(_.truncDivision(Ne,2)-1,15);let et=_.truncDivision(Ne,2),Gt=_.truncDivision(Re,2);for(let Ft=0;Ft<et;Ft++){let Ns=Ft+_.truncDivision(Ft,15);Oe[et-Ft-1]=Gt-Ns-1,Oe[et+Ft]=Gt+Ns+1}}let it=new ce(Re);for(let et=0,Gt=0;et<O;et++){let Ft=(O-et)*4+(C?9:12);for(let Ns=0;Ns<Ft;Ns++){let $n=Ns*2;for(let mn=0;mn<2;mn++)ee.get(Gt+$n+mn)&&it.set(Oe[et*2+mn],Oe[et*2+Ns]),ee.get(Gt+Ft*2+$n+mn)&&it.set(Oe[et*2+Ns],Oe[Ne-1-et*2-mn]),ee.get(Gt+Ft*4+$n+mn)&&it.set(Oe[Ne-1-et*2-mn],Oe[Ne-1-et*2-Ns]),ee.get(Gt+Ft*6+$n+mn)&&it.set(Oe[Ne-1-et*2-Ns],Oe[et*2+mn])}Gt+=Ft*8}if(rr.drawModeMessage(it,C,Re,be),C)rr.drawBullsEye(it,_.truncDivision(Re,2),5);else{rr.drawBullsEye(it,_.truncDivision(Re,2),7);for(let et=0,Gt=0;et<_.truncDivision(Ne,2)-1;et+=15,Gt+=16)for(let Ft=_.truncDivision(Re,2)&1;Ft<Re;Ft+=2)it.set(_.truncDivision(Re,2)-Gt,Ft),it.set(_.truncDivision(Re,2)+Gt,Ft),it.set(Ft,_.truncDivision(Re,2)-Gt),it.set(Ft,_.truncDivision(Re,2)+Gt)}let nt=new ao;return nt.setCompact(C),nt.setSize(Re),nt.setLayers(O),nt.setCodeWords(ue),nt.setMatrix(it),nt}static drawBullsEye(o,u,m){for(let y=0;y<m;y+=2)for(let N=u-y;N<=u+y;N++)o.set(N,u-y),o.set(N,u+y),o.set(u-y,N),o.set(u+y,N);o.set(u-m,u-m),o.set(u-m+1,u-m),o.set(u-m,u-m+1),o.set(u+m,u-m),o.set(u+m,u-m+1),o.set(u+m,u+m-1)}static generateModeMessage(o,u,m){let y=new $;return o?(y.appendBits(u-1,2),y.appendBits(m-1,6),y=rr.generateCheckWords(y,28,4)):(y.appendBits(u-1,5),y.appendBits(m-1,11),y=rr.generateCheckWords(y,40,4)),y}static drawModeMessage(o,u,m,y){let N=_.truncDivision(m,2);if(u)for(let w=0;w<7;w++){let C=N-3+w;y.get(w)&&o.set(C,N-5),y.get(w+7)&&o.set(N+5,C),y.get(20-w)&&o.set(C,N+5),y.get(27-w)&&o.set(N-5,C)}else for(let w=0;w<10;w++){let C=N-5+w+_.truncDivision(w,5);y.get(w)&&o.set(C,N-7),y.get(w+10)&&o.set(N+7,C),y.get(29-w)&&o.set(C,N+7),y.get(39-w)&&o.set(N-7,C)}}static generateCheckWords(o,u,m){let y=o.getSize()/m,N=new uc(rr.getGF(m)),w=_.truncDivision(u,m),C=rr.bitsToWords(o,m,w);N.encode(C,w-y);let O=u%m,R=new $;R.appendBits(0,O);for(const q of Array.from(C))R.appendBits(q,m);return R}static bitsToWords(o,u,m){let y=new Int32Array(m),N,w;for(N=0,w=o.getSize()/u;N<w;N++){let C=0;for(let O=0;O<u;O++)C|=o.get(N*u+O)?1<<u-O-1:0;y[N]=C}return y}static getGF(o){switch(o){case 4:return pe.AZTEC_PARAM;case 6:return pe.AZTEC_DATA_6;case 8:return pe.AZTEC_DATA_8;case 10:return pe.AZTEC_DATA_10;case 12:return pe.AZTEC_DATA_12;default:throw new b("Unsupported word size "+o)}}static stuffBits(o,u){let m=new $,y=o.getSize(),N=(1<<u)-2;for(let w=0;w<y;w+=u){let C=0;for(let O=0;O<u;O++)(w+O>=y||o.get(w+O))&&(C|=1<<u-1-O);(C&N)===N?(m.appendBits(C&N,u),w--):(C&N)===0?(m.appendBits(C|1,u),w--):m.appendBits(C,u)}return m}static totalBitsInLayer(o,u){return((u?88:112)+16*o)*o}}rr.DEFAULT_EC_PERCENT=33,rr.DEFAULT_AZTEC_LAYERS=0,rr.MAX_NB_BITS=32,rr.MAX_NB_BITS_COMPACT=4,rr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class xc{encode(o,u,m,y){return this.encodeWithHints(o,u,m,y,null)}encodeWithHints(o,u,m,y,N){let w=hc.ISO_8859_1,C=rr.DEFAULT_EC_PERCENT,O=rr.DEFAULT_AZTEC_LAYERS;return N!=null&&(N.has(Ps.CHARACTER_SET)&&(w=Bm.forName(N.get(Ps.CHARACTER_SET).toString())),N.has(Ps.ERROR_CORRECTION)&&(C=_.parseInt(N.get(Ps.ERROR_CORRECTION).toString())),N.has(Ps.AZTEC_LAYERS)&&(O=_.parseInt(N.get(Ps.AZTEC_LAYERS).toString()))),xc.encodeLayers(o,u,m,y,w,C,O)}static encodeLayers(o,u,m,y,N,w,C){if(u!==oe.AZTEC)throw new b("Can only encode AZTEC, but got "+u);let O=rr.encode(G.getBytes(o,N),w,C);return xc.renderResult(O,m,y)}static renderResult(o,u,m){let y=o.getMatrix();if(y==null)throw new me;let N=y.getWidth(),w=y.getHeight(),C=Math.max(u,N),O=Math.max(m,w),R=Math.min(C/N,O/w),q=(C-N*R)/2,Z=(O-w*R)/2,ee=new ce(C,O);for(let ue=0,be=Z;ue<w;ue++,be+=R)for(let Ne=0,Oe=q;Ne<N;Ne++,Oe+=R)y.get(Ne,ue)&&ee.setRegion(Oe,be,R,R);return ee}}s.AbstractExpandedDecoder=Yr,s.ArgumentException=p,s.ArithmeticException=Ee,s.AztecCode=ao,s.AztecCodeReader=Ir,s.AztecCodeWriter=xc,s.AztecDecoder=at,s.AztecDetector=Ur,s.AztecDetectorResult=ze,s.AztecEncoder=rr,s.AztecHighLevelEncoder=al,s.AztecPoint=xt,s.BarcodeFormat=oe,s.Binarizer=A,s.BinaryBitmap=S,s.BitArray=$,s.BitMatrix=ce,s.BitSource=na,s.BrowserAztecCodeReader=Cr,s.BrowserBarcodeReader=gy,s.BrowserCodeReader=ve,s.BrowserDatamatrixCodeReader=md,s.BrowserMultiFormatReader=Fm,s.BrowserPDF417Reader=yy,s.BrowserQRCodeReader=by,s.BrowserQRCodeSvgWriter=rl,s.CharacterSetECI=z,s.ChecksumException=T,s.Code128Reader=Ae,s.Code39Reader=tt,s.DataMatrixDecodedBitStreamParser=ti,s.DataMatrixReader=ri,s.DecodeHintType=B,s.DecoderResult=Ce,s.DefaultGridSampler=ys,s.DetectorResult=ct,s.EAN13Reader=Ze,s.EncodeHintType=Ps,s.Exception=x,s.FormatException=M,s.GenericGF=pe,s.GenericGFPoly=xe,s.GlobalHistogramBinarizer=J,s.GridSampler=Kt,s.GridSamplerInstance=Ye,s.HTMLCanvasElementLuminanceSource=re,s.HybridBinarizer=W,s.ITFReader=lt,s.IllegalArgumentException=b,s.IllegalStateException=me,s.InvertedLuminanceSource=ge,s.LuminanceSource=le,s.MathUtils=dt,s.MultiFormatOneDReader=sa,s.MultiFormatReader=Lm,s.MultiFormatWriter=Ny,s.NotFoundException=ne,s.OneDReader=_t,s.PDF417DecodedBitStreamParser=Le,s.PDF417DecoderErrorCorrection=ni,s.PDF417Reader=Ks,s.PDF417ResultMetadata=so,s.PerspectiveTransform=lr,s.PlanarYUVLuminanceSource=Ea,s.QRCodeByteMatrix=bd,s.QRCodeDataMask=Pn,s.QRCodeDecodedBitStreamParser=Vr,s.QRCodeDecoderErrorCorrectionLevel=Wt,s.QRCodeDecoderFormatInformation=Ls,s.QRCodeEncoder=qr,s.QRCodeEncoderQRCode=tl,s.QRCodeMaskUtil=is,s.QRCodeMatrixUtil=Ot,s.QRCodeMode=St,s.QRCodeReader=si,s.QRCodeVersion=jt,s.QRCodeWriter=no,s.RGBLuminanceSource=lh,s.RSS14Reader=Er,s.RSSExpandedReader=Je,s.ReaderException=yd,s.ReedSolomonDecoder=Ge,s.ReedSolomonEncoder=uc,s.ReedSolomonException=Fe,s.Result=fe,s.ResultMetadataType=Ve,s.ResultPoint=Qe,s.StringUtils=G,s.UnsupportedOperationException=H,s.VideoInputDevice=X,s.WhiteRectangleDetector=ft,s.WriterException=Tr,s.ZXingArrays=L,s.ZXingCharset=Bm,s.ZXingInteger=_,s.ZXingStandardCharsets=hc,s.ZXingStringBuilder=Q,s.ZXingStringEncoding=U,s.ZXingSystem=P,s.createAbstractExpandedDecoder=qe,Object.defineProperty(s,"__esModule",{value:!0})}))})(g0,g0.exports)),g0.exports}var ts=U0e();const z0e=Qi(ts),V0e=WO({__proto__:null,default:z0e},[ts]);var oO=(function(){function e(r,s,n){if(this.formatMap=new Map([[mt.QR_CODE,ts.BarcodeFormat.QR_CODE],[mt.AZTEC,ts.BarcodeFormat.AZTEC],[mt.CODABAR,ts.BarcodeFormat.CODABAR],[mt.CODE_39,ts.BarcodeFormat.CODE_39],[mt.CODE_93,ts.BarcodeFormat.CODE_93],[mt.CODE_128,ts.BarcodeFormat.CODE_128],[mt.DATA_MATRIX,ts.BarcodeFormat.DATA_MATRIX],[mt.MAXICODE,ts.BarcodeFormat.MAXICODE],[mt.ITF,ts.BarcodeFormat.ITF],[mt.EAN_13,ts.BarcodeFormat.EAN_13],[mt.EAN_8,ts.BarcodeFormat.EAN_8],[mt.PDF_417,ts.BarcodeFormat.PDF_417],[mt.RSS_14,ts.BarcodeFormat.RSS_14],[mt.RSS_EXPANDED,ts.BarcodeFormat.RSS_EXPANDED],[mt.UPC_A,ts.BarcodeFormat.UPC_A],[mt.UPC_E,ts.BarcodeFormat.UPC_E],[mt.UPC_EAN_EXTENSION,ts.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!V0e)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=s,this.logger=n;var a=this.createZXingFormats(r),l=new Map;l.set(ts.DecodeHintType.POSSIBLE_FORMATS,a),l.set(ts.DecodeHintType.TRY_HARDER,!1),this.hints=l}return e.prototype.decodeAsync=function(r){var s=this;return new Promise(function(n,a){try{n(s.decode(r))}catch(l){a(l)}})},e.prototype.decode=function(r){var s=new ts.MultiFormatReader(this.verbose,this.hints),n=new ts.HTMLCanvasElementLuminanceSource(r),a=new ts.BinaryBitmap(new ts.HybridBinarizer(n)),l=s.decode(a);return{text:l.text,format:m9.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(s,n,a){r.set(s,n)}),r},e.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},e.prototype.createZXingFormats=function(r){for(var s=[],n=0,a=r;n<a.length;n++){var l=a[n];this.formatMap.has(l)?s.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return s},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),$0e=function(e,r,s,n){function a(l){return l instanceof s?l:new s(function(d){d(l)})}return new(s||(s=Promise))(function(l,d){function h(p){try{x(n.next(p))}catch(b){d(b)}}function f(p){try{x(n.throw(p))}catch(b){d(b)}}function x(p){p.done?l(p.value):a(p.value).then(h,f)}x((n=n.apply(e,r||[])).next())})},q0e=function(e,r){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,a,l,d;return d={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(x){return function(p){return f([x,p])}}function f(x){if(n)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(s=0)),s;)try{if(n=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return s.label++,{value:x[1],done:!1};case 5:s.label++,a=x[1],x=[0];continue;case 7:x=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){s=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){s.label=x[1];break}if(x[0]===6&&s.label<l[1]){s.label=l[1],l=x;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(x);break}l[2]&&s.ops.pop(),s.trys.pop();continue}x=r.call(e,s)}catch(p){x=[6,p],a=0}finally{n=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},cO=(function(){function e(r,s,n){if(this.formatMap=new Map([[mt.QR_CODE,"qr_code"],[mt.AZTEC,"aztec"],[mt.CODABAR,"codabar"],[mt.CODE_39,"code_39"],[mt.CODE_93,"code_93"],[mt.CODE_128,"code_128"],[mt.DATA_MATRIX,"data_matrix"],[mt.ITF,"itf"],[mt.EAN_13,"ean_13"],[mt.EAN_8,"ean_8"],[mt.PDF_417,"pdf417"],[mt.UPC_A,"upc_a"],[mt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=s,this.logger=n;var a=this.createBarcodeDetectorFormats(r);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var r=new BarcodeDetector({formats:["qr_code"]});return typeof r<"u"},e.prototype.decodeAsync=function(r){return $0e(this,void 0,void 0,function(){var s,n;return q0e(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(r)];case 1:if(s=a.sent(),!s||s.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(s),[2,{text:n.rawValue,format:m9.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(r){for(var s=null,n=0,a=0,l=r;a<l.length;a++){var d=l[a],h=d.boundingBox.width*d.boundingBox.height;h>n&&(n=h,s=d)}if(!s)throw"No largest barcode found";return s},e.prototype.createBarcodeDetectorFormats=function(r){for(var s=[],n=0,a=r;n<a.length;n++){var l=a[n];this.formatMap.has(l)?s.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:s}},e.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},e.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(s,n,a){r.set(s,n)}),r},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),dO=function(e,r,s,n){function a(l){return l instanceof s?l:new s(function(d){d(l)})}return new(s||(s=Promise))(function(l,d){function h(p){try{x(n.next(p))}catch(b){d(b)}}function f(p){try{x(n.throw(p))}catch(b){d(b)}}function x(p){p.done?l(p.value):a(p.value).then(h,f)}x((n=n.apply(e,r||[])).next())})},uO=function(e,r){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,a,l,d;return d={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(x){return function(p){return f([x,p])}}function f(x){if(n)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(s=0)),s;)try{if(n=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return s.label++,{value:x[1],done:!1};case 5:s.label++,a=x[1],x=[0];continue;case 7:x=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){s=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){s.label=x[1];break}if(x[0]===6&&s.label<l[1]){s.label=l[1],l=x;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(x);break}l[2]&&s.ops.pop(),s.trys.pop();continue}x=r.call(e,s)}catch(p){x=[6,p],a=0}finally{n=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},H0e=(function(){function e(r,s,n,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,s&&cO.isSupported()?(this.primaryDecoder=new cO(r,n,a),this.secondaryDecoder=new oO(r,n,a)):this.primaryDecoder=new oO(r,n,a)}return e.prototype.decodeAsync=function(r){return dO(this,void 0,void 0,function(){var s;return uO(this,function(n){switch(n.label){case 0:s=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(r)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(s),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(r){return dO(this,void 0,void 0,function(){var s,n;return uO(this,function(a){switch(a.label){case 0:s=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(r)];case 2:return[2,a.sent()];case 3:if(n=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(r)];throw n;case 4:return this.possiblyLogPerformance(s),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(r){if(this.verbose){var s=performance.now()-r;this.executionResults.push(s),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var r=0,s=0,n=this.executionResults;s<n.length;s++){var a=n[s];r+=a}var l=r/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),KS=(function(){var e=function(r,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},e(r,s)};return function(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(r,s);function n(){this.constructor=r}r.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),op=function(e,r,s,n){function a(l){return l instanceof s?l:new s(function(d){d(l)})}return new(s||(s=Promise))(function(l,d){function h(p){try{x(n.next(p))}catch(b){d(b)}}function f(p){try{x(n.throw(p))}catch(b){d(b)}}function x(p){p.done?l(p.value):a(p.value).then(h,f)}x((n=n.apply(e,r||[])).next())})},cp=function(e,r){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,a,l,d;return d={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(x){return function(p){return f([x,p])}}function f(x){if(n)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(s=0)),s;)try{if(n=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return s.label++,{value:x[1],done:!1};case 5:s.label++,a=x[1],x=[0];continue;case 7:x=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){s=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){s.label=x[1];break}if(x[0]===6&&s.label<l[1]){s.label=l[1],l=x;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(x);break}l[2]&&s.ops.pop(),s.trys.pop();continue}x=r.call(e,s)}catch(p){x=[6,p],a=0}finally{n=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},g9=(function(){function e(r,s){this.name=r,this.track=s}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(r){var s={};s[this.name]=r;var n={advanced:[s]};return this.track.applyConstraints(n)},e.prototype.value=function(){var r=this.track.getSettings();if(this.name in r){var s=r[this.name];return s}return null},e})(),G0e=(function(e){KS(r,e);function r(s,n){return e.call(this,s,n)||this}return r.prototype.min=function(){return this.getCapabilities().min},r.prototype.max=function(){return this.getCapabilities().max},r.prototype.step=function(){return this.getCapabilities().step},r.prototype.apply=function(s){var n={};n[this.name]=s;var a={advanced:[n]};return this.track.applyConstraints(a)},r.prototype.getCapabilities=function(){this.failIfNotSupported();var s=this.track.getCapabilities(),n=s[this.name];return{min:n.min,max:n.max,step:n.step}},r.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},r})(g9),Y0e=(function(e){KS(r,e);function r(s){return e.call(this,"zoom",s)||this}return r})(G0e),W0e=(function(e){KS(r,e);function r(s){return e.call(this,"torch",s)||this}return r})(g9),X0e=(function(){function e(r){this.track=r}return e.prototype.zoomFeature=function(){return new Y0e(this.track)},e.prototype.torchFeature=function(){return new W0e(this.track)},e})(),K0e=(function(){function e(r,s,n){this.isClosed=!1,this.parentElement=r,this.mediaStream=s,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),r.append(this.surface)}return e.prototype.createVideoElement=function(r){var s=document.createElement("video");return s.style.width="".concat(r,"px"),s.style.display="block",s.muted=!0,s.setAttribute("muted","true"),s.playsInline=!0,s},e.prototype.setupSurface=function(){var r=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var s=function(){var n=r.surface.clientWidth,a=r.surface.clientHeight;r.callbacks.onRenderSurfaceReady(n,a),r.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(r,s,n,a){return op(this,void 0,void 0,function(){var l,d;return cp(this,function(h){switch(h.label){case 0:return l=new e(r,s,a),n.aspectRatio?(d={aspectRatio:n.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(d)]):[3,2];case 1:h.sent(),h.label=2;case 2:return l.setupSurface(),[2,l]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(r){this.failIfClosed();var s=this,n=function(){setTimeout(r,200),s.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(r){return op(this,void 0,void 0,function(){return cp(this,function(s){if("aspectRatio"in r)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(r)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var r=this;return new Promise(function(s,n){var a=r.mediaStream.getVideoTracks(),l=a.length,d=0;r.mediaStream.getVideoTracks().forEach(function(h){r.mediaStream.removeTrack(h),h.stop(),++d,d>=l&&(r.isClosed=!0,r.parentElement.removeChild(r.surface),s())})})},e.prototype.getCapabilities=function(){return new X0e(this.getFirstTrackOrFail())},e})(),Z0e=(function(){function e(r){this.mediaStream=r}return e.prototype.render=function(r,s,n){return op(this,void 0,void 0,function(){return cp(this,function(a){return[2,K0e.create(r,this.mediaStream,s,n)]})})},e.create=function(r){return op(this,void 0,void 0,function(){var s,n;return cp(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return s={audio:!1,video:r},[4,navigator.mediaDevices.getUserMedia(s)];case 1:return n=a.sent(),[2,new e(n)]}})})},e})(),hO=function(e,r,s,n){function a(l){return l instanceof s?l:new s(function(d){d(l)})}return new(s||(s=Promise))(function(l,d){function h(p){try{x(n.next(p))}catch(b){d(b)}}function f(p){try{x(n.throw(p))}catch(b){d(b)}}function x(p){p.done?l(p.value):a(p.value).then(h,f)}x((n=n.apply(e,r||[])).next())})},mO=function(e,r){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,a,l,d;return d={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(x){return function(p){return f([x,p])}}function f(x){if(n)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(s=0)),s;)try{if(n=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return s.label++,{value:x[1],done:!1};case 5:s.label++,a=x[1],x=[0];continue;case 7:x=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){s=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){s.label=x[1];break}if(x[0]===6&&s.label<l[1]){s.label=l[1],l=x;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(x);break}l[2]&&s.ops.pop(),s.trys.pop();continue}x=r.call(e,s)}catch(p){x=[6,p],a=0}finally{n=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Q0e=(function(){function e(){}return e.failIfNotSupported=function(){return hO(this,void 0,void 0,function(){return mO(this,function(r){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(r){return hO(this,void 0,void 0,function(){return mO(this,function(s){return[2,Z0e.create(r)]})})},e})(),J0e=function(e,r,s,n){function a(l){return l instanceof s?l:new s(function(d){d(l)})}return new(s||(s=Promise))(function(l,d){function h(p){try{x(n.next(p))}catch(b){d(b)}}function f(p){try{x(n.throw(p))}catch(b){d(b)}}function x(p){p.done?l(p.value):a(p.value).then(h,f)}x((n=n.apply(e,r||[])).next())})},eme=function(e,r){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,a,l,d;return d={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(x){return function(p){return f([x,p])}}function f(x){if(n)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(s=0)),s;)try{if(n=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return s.label++,{value:x[1],done:!1};case 5:s.label++,a=x[1],x=[0];continue;case 7:x=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){s=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){s.label=x[1];break}if(x[0]===6&&s.label<l[1]){s.label=l[1],l=x;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(x);break}l[2]&&s.ops.pop(),s.trys.pop();continue}x=r.call(e,s)}catch(p){x=[6,p],a=0}finally{n=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},tme=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var r=MediaStreamTrack;return MediaStreamTrack&&r.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var r=uu.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(r=uu.insecureContextCameraQueryError()),Promise.reject(r)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var r=location.host.split(":")[0];return r==="127.0.0.1"||r==="localhost"},e.getCamerasFromMediaDevices=function(){return J0e(this,void 0,void 0,function(){var r,s,n,a,l,d,h;return eme(this,function(f){switch(f.label){case 0:return r=function(x){for(var p=x.getVideoTracks(),b=0,S=p;b<S.length;b++){var T=S[b];T.enabled=!1,T.stop(),x.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return s=f.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=f.sent(),a=[],l=0,d=n;l<d.length;l++)h=d[l],h.kind==="videoinput"&&a.push({id:h.deviceId,label:h.label});return r(s),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(r,s){var n=function(l){for(var d=[],h=0,f=l;h<f.length;h++){var x=f[h];x.kind==="video"&&d.push({id:x.id,label:x.label})}r(d)},a=MediaStreamTrack;a.getSources(n)})},e})(),Ss;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Ss||(Ss={}));var rme=(function(){function e(){this.state=Ss.NOT_STARTED,this.onGoingTransactionNewState=Ss.UNKNOWN}return e.prototype.directTransition=function(r){this.failIfTransitionOngoing(),this.validateTransition(r),this.state=r},e.prototype.startTransition=function(r){return this.failIfTransitionOngoing(),this.validateTransition(r),this.onGoingTransactionNewState=r,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Ss.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var r=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ss.UNKNOWN,this.directTransition(r)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ss.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ss.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ss.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(r){switch(this.state){case Ss.UNKNOWN:throw"Transition from unknown is not allowed";case Ss.NOT_STARTED:this.failIfNewStateIs(r,[Ss.PAUSED]);break;case Ss.SCANNING:break;case Ss.PAUSED:break}},e.prototype.failIfNewStateIs=function(r,s){for(var n=0,a=s;n<a.length;n++){var l=a[n];if(r===l)throw"Cannot transition from ".concat(this.state," to ").concat(r)}},e})(),sme=(function(){function e(r){this.stateManager=r}return e.prototype.startTransition=function(r){return this.stateManager.startTransition(r)},e.prototype.directTransition=function(r){this.stateManager.directTransition(r)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Ss.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Ss.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ss.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Ss.PAUSED},e})(),nme=(function(){function e(){}return e.create=function(){return new sme(new rme)},e})(),ame=(function(){var e=function(r,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},e(r,s)};return function(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(r,s);function n(){this.constructor=r}r.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),ga=(function(e){ame(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.DEFAULT_WIDTH=300,r.DEFAULT_WIDTH_OFFSET=2,r.FILE_SCAN_MIN_HEIGHT=300,r.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,r.MIN_QR_BOX_SIZE=50,r.SHADED_LEFT=1,r.SHADED_RIGHT=2,r.SHADED_TOP=3,r.SHADED_BOTTOM=4,r.SHADED_REGION_ELEMENT_ID="qr-shaded-region",r.VERBOSE=!1,r.BORDER_SHADER_DEFAULT_COLOR="#ffffff",r.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",r})(M0e),ime=(function(){function e(r,s){this.logger=s,this.fps=ga.SCAN_DEFAULT_FPS,r?(r.fps&&(this.fps=r.fps),this.disableFlip=r.disableFlip===!0,this.qrbox=r.qrbox,this.aspectRatio=r.aspectRatio,this.videoConstraints=r.videoConstraints):this.disableFlip=ga.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?f9.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Cl(this.qrbox)},e.create=function(r,s){return new e(r,s)},e})(),w2=(function(){function e(r,s){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.elementId=r,this.verbose=!1;var n;typeof s=="boolean"?this.verbose=s===!0:s&&(n=s,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new F0e(this.verbose),this.qrcode=new H0e(this.getSupportedFormats(s),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=nme.create()}return e.prototype.start=function(r,s,n,a){var l=this;if(!r)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var d;a?d=a:d=this.verbose?this.logger.log:function(){};var h=ime.create(s,this.logger);this.clearElement();var f=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?f=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=f,p=document.getElementById(this.elementId);p.clientWidth?p.clientWidth:ga.DEFAULT_WIDTH,p.style.position="relative",this.shouldScan=!0,this.element=p;var b=this,S=this.stateManagerProxy.startTransition(Ss.SCANNING);return new Promise(function(T,A){var P=x?h.videoConstraints:b.createVideoConstraints(r);if(!P){S.cancel(),A("videoConstraints should be defined");return}var D={};(!x||h.aspectRatio)&&(D.aspectRatio=h.aspectRatio);var I={onRenderSurfaceReady:function(L,_){b.setupUi(L,_,h),b.isScanning=!0,b.foreverScan(h,n,d)}};Q0e.failIfNotSupported().then(function(L){L.create(P).then(function(_){return _.render(l.element,D,I).then(function($){b.renderedCamera=$,S.execute(),T(null)}).catch(function($){S.cancel(),A($)})}).catch(function(_){S.cancel(),A(uu.errorGettingUserMedia(_))})}).catch(function(L){S.cancel(),A(uu.cameraStreamingNotSupported())})})},e.prototype.pause=function(r){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ss.PAUSED),this.showPausedState(),(Cl(r)||r!==!0)&&(r=!1),r&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var r=this,s=function(){r.stateManagerProxy.directTransition(Ss.SCANNING),r.hidePausedState()};if(!this.renderedCamera.isPaused()){s();return}this.renderedCamera.resume(function(){s()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var r=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var s=this.stateManagerProxy.startTransition(Ss.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(r.element){var l=document.getElementById(ga.SHADED_REGION_ELEMENT_ID);l&&r.element.removeChild(l)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),n(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),s.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(r,s){return this.scanFileV2(r,s).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(r,s){var n=this;if(!r||!(r instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Cl(s)&&(s=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,l){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(r);var d=new Image;d.onload=function(){var h=d.width,f=d.height,x=document.getElementById(n.elementId),p=x.clientWidth?x.clientWidth:ga.DEFAULT_WIDTH,b=Math.max(x.clientHeight?x.clientHeight:f,ga.FILE_SCAN_MIN_HEIGHT),S=n.computeCanvasDrawConfig(h,f,p,b);if(s){var T=n.createCanvasElement(p,b,"qr-canvas-visible");T.style.display="inline-block",x.appendChild(T);var A=T.getContext("2d");if(!A)throw"Unable to get 2d context from canvas";A.canvas.width=p,A.canvas.height=b,A.drawImage(d,0,0,h,f,S.x,S.y,S.width,S.height)}var P=ga.FILE_SCAN_HIDDEN_CANVAS_PADDING,D=Math.max(d.width,S.width),I=Math.max(d.height,S.height),L=D+2*P,_=I+2*P,$=n.createCanvasElement(L,_);x.appendChild($);var F=$.getContext("2d");if(!F)throw"Unable to get 2d context from canvas";F.canvas.width=L,F.canvas.height=_,F.drawImage(d,0,0,h,f,P,P,D,I);try{n.qrcode.decodeRobustlyAsync($).then(function(B){a(iO.createFromQrcodeResult(B))}).catch(l)}catch(B){l("QR code parse error, error = ".concat(B))}},d.onerror=l,d.onabort=l,d.onstalled=l,d.onsuspend=l,d.src=URL.createObjectURL(r)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return tme.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(r){if(r){if(!f9.isMediaStreamConstraintsValid(r,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(r)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(r){var s=[mt.QR_CODE,mt.AZTEC,mt.CODABAR,mt.CODE_39,mt.CODE_93,mt.CODE_128,mt.DATA_MATRIX,mt.MAXICODE,mt.ITF,mt.EAN_13,mt.EAN_8,mt.PDF_417,mt.RSS_14,mt.RSS_EXPANDED,mt.UPC_A,mt.UPC_E,mt.UPC_EAN_EXTENSION];if(!r||typeof r=="boolean"||!r.formatsToSupport)return s;if(!Array.isArray(r.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(r.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],a=0,l=r.formatsToSupport;a<l.length;a++){var d=l[a];R0e(d)?n.push(d):this.logger.warn("Invalid format: ".concat(d," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(r){if(Cl(r))return!0;if(!Cl(r.useBarCodeDetectorIfSupported))return r.useBarCodeDetectorIfSupported!==!1;if(Cl(r.experimentalFeatures))return!0;var s=r.experimentalFeatures;return Cl(s.useBarCodeDetectorIfSupported)?!0:s.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(r,s,n){var a=this,l=n.qrbox;this.validateQrboxConfig(l);var d=this.toQrdimensions(r,s,l),h=function(x){if(x<ga.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ga.MIN_QR_BOX_SIZE,"px.")},f=function(x){return x>r&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=r),x};h(d.width),h(d.height),d.width=f(d.width)},e.prototype.validateQrboxConfig=function(r){if(typeof r!="number"&&typeof r!="function"&&(r.width===void 0||r.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(r,s,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(r,s)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return n},e.prototype.setupUi=function(r,s,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(r,s,n);var a=Cl(n.qrbox)?{width:r,height:s}:n.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(r,s,a);l.height>s&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=n.isShadedBoxEnabled()&&l.height<=s,h={x:0,y:0,width:r,height:s},f=d?this.getShadedRegionBounds(r,s,l):h,x=this.createCanvasElement(f.width,f.height),p={willReadFrequently:!0},b=x.getContext("2d",p);b.canvas.width=f.width,b.canvas.height=f.height,this.element.append(x),d&&this.possiblyInsertShadingElement(this.element,r,s,l),this.createScannerPausedUiElement(this.element),this.qrRegion=f,this.context=b,this.canvasElement=x},e.prototype.createScannerPausedUiElement=function(r){var s=document.createElement("div");s.innerText=uu.scannerPaused(),s.style.display="none",s.style.position="absolute",s.style.top="0px",s.style.zIndex="1",s.style.background="rgba(9, 9, 9, 0.46)",s.style.color="#FFECEC",s.style.textAlign="center",s.style.width="100%",r.appendChild(s),this.scannerPausedUiElement=s},e.prototype.scanContext=function(r,s){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return r(a.text,iO.createFromQrcodeResult(a)),n.possiblyUpdateShaders(!0),!0}).catch(function(a){n.possiblyUpdateShaders(!1);var l=uu.codeParseError(a);return s(l,L0e.createFrom(l)),!1})},e.prototype.foreverScan=function(r,s,n){var a=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),d=l.videoWidth/l.clientWidth,h=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var f=this.qrRegion.width*d,x=this.qrRegion.height*h,p=this.qrRegion.x*d,b=this.qrRegion.y*h;this.context.drawImage(l,p,b,f,x,0,0,this.qrRegion.width,this.qrRegion.height);var S=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(r,s,n)},a.getTimeoutFps(r.fps))};this.scanContext(s,n).then(function(T){!T&&r.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(s,n).finally(function(){S()})):S()}).catch(function(T){a.logger.logError("Error happend while scanning context",T),S()})}},e.prototype.createVideoConstraints=function(r){if(typeof r=="string")return{deviceId:{exact:r}};if(typeof r=="object"){var s="facingMode",n="deviceId",a={user:!0,environment:!0},l="exact",d=function(A){if(A in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(A,"'")},h=Object.keys(r);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var f=Object.keys(r)[0];if(f!==s&&f!==n)throw"Only '".concat(s,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(f===s){var x=r.facingMode;if(typeof x=="string"){if(d(x))return{facingMode:x}}else if(typeof x=="object")if(l in x){if(d(x["".concat(l)]))return{facingMode:{exact:x["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var p=typeof x;throw"Invalid type of 'facingMode' = ".concat(p)}}else{var b=r.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(l in b)return{deviceId:{exact:b["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var S=typeof b;throw"Invalid type of 'deviceId' = ".concat(S)}}}var T=typeof r;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},e.prototype.computeCanvasDrawConfig=function(r,s,n,a){if(r<=n&&s<=a){var l=(n-r)/2,d=(a-s)/2;return{x:l,y:d,width:r,height:s}}else{var h=r,f=s;return r>n&&(s=n/r*s,r=n),s>a&&(r=a/s*r,s=a),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(f)+" to ".concat(r,"X").concat(s,".")),this.computeCanvasDrawConfig(r,s,n,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var r=document.getElementById(this.elementId);r&&(r.innerHTML="")},e.prototype.possiblyUpdateShaders=function(r){this.qrMatch!==r&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(s){s.style.backgroundColor=r?ga.BORDER_SHADER_MATCH_COLOR:ga.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=r)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(r,s,n){var a=r,l=s,d=document.createElement("canvas");return d.style.width="".concat(a,"px"),d.style.height="".concat(l,"px"),d.style.display="none",d.id=Cl(n)?"qr-canvas":n,d},e.prototype.getShadedRegionBounds=function(r,s,n){if(n.width>r||n.height>s)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(r-n.width)/2,y:(s-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(r,s,n,a){if(!(s-a.width<1||n-a.height<1)){var l=document.createElement("div");l.style.position="absolute";var d=(s-a.width)/2,h=(n-a.height)/2;if(l.style.borderLeft="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(ga.SHADED_REGION_ELEMENT_ID),s-a.width<11||n-a.height<11)this.hasBorderShaders=!1;else{var f=5,x=40;this.insertShaderBorders(l,x,f,-f,null,0,!0),this.insertShaderBorders(l,x,f,-f,null,0,!1),this.insertShaderBorders(l,x,f,null,-f,0,!0),this.insertShaderBorders(l,x,f,null,-f,0,!1),this.insertShaderBorders(l,f,x+f,-f,null,-f,!0),this.insertShaderBorders(l,f,x+f,null,-f,-f,!0),this.insertShaderBorders(l,f,x+f,-f,null,-f,!1),this.insertShaderBorders(l,f,x+f,null,-f,-f,!1),this.hasBorderShaders=!0}r.append(l)}},e.prototype.insertShaderBorders=function(r,s,n,a,l,d,h){var f=document.createElement("div");f.style.position="absolute",f.style.backgroundColor=ga.BORDER_SHADER_DEFAULT_COLOR,f.style.width="".concat(s,"px"),f.style.height="".concat(n,"px"),a!==null&&(f.style.top="".concat(a,"px")),l!==null&&(f.style.bottom="".concat(l,"px")),h?f.style.left="".concat(d,"px"):f.style.right="".concat(d,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(f),r.appendChild(f)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(r){return 1e3/r},e})(),fO;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(fO||(fO={}));class lme extends v.Component{constructor(r){super(r),this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,s){console.error("Scanner Error:",r,s)}render(){return this.state.hasError?t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-center",children:[t.jsx("p",{className:"text-red-800 font-semibold",children:"Scanner Error"}),t.jsx("p",{className:"text-sm text-red-600 mt-2",children:"Please refresh the page to try again."}),t.jsx("button",{onClick:()=>window.location.reload(),className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Refresh Page"})]}):this.props.children}}const x9=v.memo(({scannerContainerId:e})=>{const r=v.useRef(null),s=v.useRef(null);return v.useEffect(()=>(console.log("[ScannerContainer] Mounted ONCE",{scannerContainerId:e,containerExists:!!document.getElementById(e)}),()=>{console.log("[ScannerContainer] Unmounting (should only happen on page leave)",{scannerContainerId:e})}),[e]),t.jsx("div",{id:e,ref:r,className:"relative w-full aspect-square max-w-[90vw] sm:max-w-lg lg:max-w-xl mx-auto rounded-xl overflow-hidden bg-gray-100 border-2 border-dashed border-gray-300",style:{minHeight:"min(80vw, 400px)"},children:t.jsxs("div",{ref:s,"data-placeholder":"true",className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500 p-4 z-10 bg-gray-100",children:[t.jsx(I_,{className:"w-10 h-10 sm:w-12 sm:h-12 mb-3"}),t.jsx("p",{className:"text-sm font-medium text-center",children:"Camera Preview"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1 text-center",children:"Tap the button below to start scanning"})]})})},()=>!0);x9.displayName="ScannerContainer";function ome(){const[e,r]=v.useState(!1),[s,n]=v.useState(null),[a,l]=v.useState("unknown"),[d,h]=v.useState([]),[f,x]=v.useState(null),[p,b]=v.useState(!1),[S,T]=v.useState([]),[A,P]=v.useState(""),[D,I]=v.useState(!0),[L,_]=v.useState(!1),[$,F]=v.useState(null),[B,M]=v.useState(!1),[V,z]=v.useState(null),[H,U]=v.useState(!1),G=v.useRef(null),Q=v.useRef(`qr-scanner-${Date.now()}`).current,ce=v.useRef(!1),ne=v.useRef(!0),J=v.useRef(0);v.useEffect(()=>{console.log("[ScanQR] State changed:",{isScanning:e,isLoading:p,permissionStatus:a,availableCameras:d.length,hasScanner:!!G.current})},[e,p,a,d]),v.useEffect(()=>{console.log("[ScanQR] Component mounted",{scannerContainerId:Q});const pe=window.location.protocol==="https:"||window.location.hostname==="localhost";I(pe);const Fe=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return _(Fe),ne.current=!0,()=>{if(console.log("[ScanQR] Component unmounting",{scannerContainerId:Q,hasScanner:!!G.current,isCleaningUp:ce.current}),ne.current=!1,G.current&&!ce.current){ce.current=!0;const me=G.current;try{const Ge=me.getState();console.log("[ScanQR] Unmount cleanup - scanner state:",Ge),Ge===2&&me.stop().catch(Te=>{console.log("[ScanQR] Unmount stop error:",Te.message)})}catch(Ge){console.log("[ScanQR] Unmount cleanup error:",Ge.message)}G.current=null,setTimeout(()=>{const Ge=document.getElementById(Q);console.log("[ScanQR] Clearing container after unmount:",{containerExists:!!Ge,children:Ge?.children.length||0}),Ge&&(Ge.innerHTML="")},0)}}},[Q]);const W=async()=>{try{const pe=await w2.getCameras();if(pe&&pe.length>0){h(pe);const Fe=pe.find(me=>{const Ge=me.label.toLowerCase();return Ge.includes("back")||Ge.includes("rear")||Ge.includes("environment")||Ge.includes("0")});return x(Fe?.id||pe[0].id),l("granted"),!0}else return P("No cameras found on this device."),l("error"),!1}catch(pe){return console.error("Error getting cameras:",pe),le(pe),!1}},le=pe=>{console.error("Camera error:",pe);const Fe=pe.name||"",me=pe.message||"";Fe==="NotAllowedError"||me.includes("Permission")?(l("denied"),P(L?"Camera permission denied. On mobile, please go to your browser settings, find this site, and allow camera access.":"Camera permission was denied. Please allow camera access in your browser settings.")):Fe==="NotFoundError"||me.includes("not found")?(l("error"),P("No camera found on this device.")):Fe==="NotReadableError"||me.includes("in use")?(l("error"),P("Camera is already in use by another application. Please close other apps using the camera.")):Fe==="SecurityError"?(l("error"),P("Camera access blocked due to security settings. Please use HTTPS.")):Fe==="AbortError"?(l("error"),P("Camera access was interrupted. Please try again.")):(l("error"),P(me||"Failed to access camera. Please try again."))},ge=async()=>{if(b(!0),l("checking"),P(""),L&&!D)return l("error"),P("Camera access requires HTTPS on mobile devices. Please access this site via HTTPS."),b(!1),!1;if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return l("error"),P("Your browser does not support camera access. Please try a different browser."),b(!1),!1;try{let pe;try{pe=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}}})}catch(me){console.log("Environment camera failed, trying any camera:",me),pe=await navigator.mediaDevices.getUserMedia({video:!0})}return pe.getTracks().forEach(me=>me.stop()),await W()?(ot.success("Camera access granted!"),!0):!1}catch(pe){return console.error("Camera permission error:",pe),le(pe),pe.name==="NotAllowedError"?ot.error("Camera permission denied."):ot.error("Failed to access camera."),!1}finally{b(!1)}},re=async()=>{if(console.log("[startScanner] Called",{availableCameras:d.length,isScanning:e,isLoading:p,hasExistingScanner:!!G.current}),d.length===0){if(!await ge())return;await new Promise(Fe=>setTimeout(Fe,100))}b(!0),n(null);try{const pe=document.getElementById(Q);if(console.log("[startScanner] Container check",{containerExists:!!pe,containerChildren:pe?.children.length||0,containerHTML:pe?.innerHTML.substring(0,100)}),!pe){ot.error("Scanner container not ready. Please try again."),b(!1);return}G.current&&!ce.current&&(console.log("[startScanner] Stopping existing scanner"),await X(),await new Promise(dt=>setTimeout(dt,300)));const Fe=pe.querySelectorAll("video, canvas, #qr-shaded-region");if(console.log("[startScanner] Clearing leftover elements",{count:Fe.length,types:Array.from(Fe).map(dt=>dt.tagName)}),Fe.forEach(dt=>{try{dt.parentNode===pe&&(console.log("[startScanner] Removing element:",dt.tagName,dt.id),dt.remove())}catch(Nt){console.log("[startScanner] Error removing leftover element:",Nt.message)}}),!ne.current){console.log("[startScanner] Component unmounted, aborting"),b(!1);return}console.log("[startScanner] Creating new Html5Qrcode instance");const me=new w2(Q);G.current=me;const Ge={fps:10,qrbox:L?{width:200,height:200}:{width:250,height:250},aspectRatio:1,disableFlip:!1},Te=f||{facingMode:"environment"};if(console.log("[startScanner] Starting scanner with config",{cameraConfig:Te,config:Ge}),await me.start(Te,Ge,se,oe),console.log("[startScanner] Scanner started successfully",{containerChildren:pe.children.length,hasVideo:!!pe.querySelector("video"),hasCanvas:!!pe.querySelector("canvas")}),!ne.current){console.log("[startScanner] Component unmounted after start, stopping"),await me.stop().catch(()=>{});return}const at=pe.querySelector('[data-placeholder="true"]');at&&(console.log("[startScanner] Hiding placeholder via DOM"),at.style.display="none"),pe.classList.remove("bg-gray-100"),pe.classList.add("bg-black"),J.current=0,r(!0),l("granted"),ot.info("Scanner started. Point camera at a QR code."),console.log("[startScanner]  Scanner ready - point camera at QR code")}catch(pe){if(console.error("Error starting scanner:",pe),f&&pe.message?.includes("Unable to start"))try{const Fe=new w2(Q);G.current=Fe,await Fe.start({facingMode:"environment"},{fps:10,qrbox:{width:200,height:200}},se,oe),r(!0),l("granted"),ot.info("Scanner started.");return}catch(Fe){console.error("Fallback also failed:",Fe)}le(pe),ot.error("Failed to start scanner.")}finally{b(!1)}},X=async()=>{if(console.log("[stopScanner] Called",{hasScanner:!!G.current,isCleaningUp:ce.current,isMounted:ne.current}),!G.current||ce.current){console.log("[stopScanner] Early return - no scanner or already cleaning"),r(!1);return}ce.current=!0;try{const pe=G.current,Fe=pe.getState();console.log("[stopScanner] Scanner state:",Fe),Fe===2&&(console.log("[stopScanner] Stopping scanner..."),await pe.stop(),console.log("[stopScanner] Scanner stopped successfully"),ne.current&&await new Promise(me=>setTimeout(me,200)))}catch(pe){console.error("[stopScanner] Error stopping scanner:",pe);try{const Fe=document.getElementById(Q);if(Fe){const me=Fe.querySelector("video");me&&me.srcObject&&(console.log("[stopScanner] Manually stopping video tracks"),me.srcObject.getTracks().forEach(Ge=>Ge.stop()))}}catch(Fe){console.log("[stopScanner] Could not stop video tracks:",Fe.message)}}finally{console.log("[stopScanner] Cleanup - setting refs to null"),G.current=null,ce.current=!1;const pe=document.getElementById(Q);if(pe){const Fe=pe.querySelector('[data-placeholder="true"]');Fe&&(console.log("[stopScanner] Showing placeholder via DOM"),Fe.style.display="flex"),pe.classList.remove("bg-black"),pe.classList.add("bg-gray-100")}ne.current&&r(!1)}},ae=async pe=>{const{enrollmentId:Fe,eventId:me,phone:Ge,userId:Te}=pe,at=new URLSearchParams({enrollmentId:Fe,eventId:me,phone:Ge,...Te&&{userId:Te}}),dt=await fetch(`http://192.168.29.69:5000/api/app/tickets/qr-scan?${at}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),Nt=await dt.json();if(console.log("[validateRegularTicket] API Response:",Nt),!dt.ok){const Qe=Nt.message?.toLowerCase().includes("already been scanned");let ct=null;if(Qe&&Nt.message){const ze=Nt.message.match(/scanned at (.+)$/i);ze&&ze[1]&&(ct=ze[1])}return{...Nt,status:dt.status,ticketType:"regular",data:{...Nt.data,isValid:!Qe,isAlreadyScanned:Qe,scannedAt:ct}}}return{...Nt,status:dt.status,ticketType:"regular",data:{...Nt.data,isValid:!0,isAlreadyScanned:!1}}},ve=async pe=>{const{enrollmentId:Fe,eventId:me,phone:Ge,userId:Te}=pe,at=new URLSearchParams({enrollmentId:Fe,eventId:me,phone:Ge,...Te&&{userId:Te}}),dt=await fetch(`http://192.168.29.69:5000/api/app/tickets/cash/qr-scan?${at}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),Nt=await dt.json();return console.log("[validateCashTicket] API Response:",Nt),{...Nt,status:dt.status,ticketType:"cash"}},fe=async pe=>{U(!0);try{console.log("[validateTicket] Trying regular ticket endpoint...");const Fe=await ae(pe);return Fe.status===200||Fe.data?.isAlreadyScanned?(console.log("[validateTicket] Regular ticket validated"),Fe):Fe.status===404?(console.log("[validateTicket] Regular ticket not found, trying cash ticket..."),await ve(pe)):Fe}catch(Fe){return console.error("[validateTicket] API Error:",Fe),{status:500,message:"Failed to validate ticket",error:Fe.message,data:null}}finally{U(!1)}},se=async(pe,Fe)=>{console.log("[onScanSuccess] QR Code scanned:",pe),n(pe);let me=null;try{const Nt=new URL(pe),Qe={};Nt.searchParams.forEach((ct,ze)=>{Qe[ze]=ct}),me={type:"url",fullUrl:pe,protocol:Nt.protocol,host:Nt.host,pathname:Nt.pathname,parameters:Qe,hash:Nt.hash||null},console.log("[onScanSuccess]  URL detected!"),console.log("[onScanSuccess] Full URL:",pe),console.log("[onScanSuccess] Protocol:",Nt.protocol),console.log("[onScanSuccess] Host:",Nt.host),console.log("[onScanSuccess] Pathname:",Nt.pathname),console.log("[onScanSuccess] Parameters:",Qe),Object.keys(Qe).length>0?(console.log("[onScanSuccess]  Extracted Parameters:"),Object.entries(Qe).forEach(([ct,ze])=>{console.log(`   ${ct}: ${ze}`)})):console.log("[onScanSuccess]  No parameters found in URL"),Nt.hash&&console.log("[onScanSuccess] Hash:",Nt.hash)}catch{console.log("[onScanSuccess]  Not a URL, just plain text:",pe),me={type:"text",text:pe}}F(me);let Ge=null;const Te=me.parameters||{},at=Te.enrollmentId||Te.id,dt=at&&Te.eventId&&Te.phone;me.type==="url"&&dt?(console.log("[onScanSuccess] Validating ticket with API...",{enrollmentId:at,eventId:Te.eventId,phone:Te.phone,userId:Te.userId}),ot.info(" Validating ticket..."),Ge=await fe({enrollmentId:at,eventId:Te.eventId,phone:Te.phone,userId:Te.userId}),console.log("[onScanSuccess] Full API Response:",JSON.stringify(Ge,null,2)),z(Ge),Ge.status===200||Ge.data?.isAlreadyScanned?(console.log("[onScanSuccess] API Data:",{message:Ge.message,isValid:Ge.data?.isValid,isAlreadyScanned:Ge.data?.isAlreadyScanned,ticketType:Ge.ticketType,enrollment:Ge.data?.enrollment?.name}),Ge.data?.isAlreadyScanned===!0?(console.log("[onScanSuccess]  Ticket already scanned!"),ot.warning(" This ticket was already scanned!",{autoClose:5e3}),navigator.vibrate&&navigator.vibrate([100,50,100,50,100]),M(!0)):Ge.data?.isValid===!0?(console.log("[onScanSuccess]  First time scan - Valid!"),ot.success(" Ticket Verified - First Scan!"),navigator.vibrate&&navigator.vibrate([200,100,200]),M(!0)):(console.log("[onScanSuccess]  Invalid ticket!"),ot.error(" Invalid Ticket!"),navigator.vibrate&&navigator.vibrate([300,100,300]),M(!1))):(console.log("[onScanSuccess]  API Error or Invalid Response"),ot.error(" Failed to validate ticket!"),navigator.vibrate&&navigator.vibrate([300,100,300]),M(!1))):(M(!0),ot.success(" QR Code Scanned!"),navigator.vibrate&&navigator.vibrate([200,100,200])),T(Nt=>[{text:pe,timestamp:new Date,format:Fe?.result?.format?.formatName||"QR_CODE"},...Nt.slice(0,9)]),X()},oe=pe=>{J.current+=1,J.current%10===0&&console.log(`[onScanFailure] Scanner active, attempts: ${J.current}`),pe&&!pe.includes("No MultiFormat Readers")&&!pe.includes("NotFoundException")&&console.log("[onScanFailure] Error:",pe)},he=async()=>{if(d.length<=1)return;const Fe=(d.findIndex(Ge=>Ge.id===f)+1)%d.length,me=d[Fe];await X(),x(me.id),setTimeout(()=>re(),200),ot.info(`Switched to ${me.label||"Camera "+(Fe+1)}`)},Ve=async pe=>{try{await navigator.clipboard.writeText(pe),ot.success("Copied to clipboard!")}catch{try{const me=document.createElement("textarea");me.value=pe,document.body.appendChild(me),me.select(),document.execCommand("copy"),document.body.removeChild(me),ot.success("Copied to clipboard!")}catch{ot.error("Failed to copy")}}},Ce=pe=>{try{return new URL(pe),!0}catch{return!1}},Ke=pe=>{Ce(pe)?window.open(pe,"_blank","noopener,noreferrer"):Ve(pe)},xe=a==="denied"||a==="error",Ee=!xe;return t.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[t.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 tracking-tight",children:"Scan QR Code"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Scan QR codes using your device camera"})]})}),L&&!D&&t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex items-start gap-3",children:[t.jsx(q3,{className:"w-6 h-6 text-yellow-600 shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-yellow-800",children:"HTTPS Required"}),t.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Camera access on mobile requires a secure connection (HTTPS). Please access this site via HTTPS to use the scanner."})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[t.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(Jf,{className:"w-6 h-6 text-blue-600"}),"Scanner"]}),xe&&t.jsxs("div",{className:"text-center py-6 sm:py-8",children:[t.jsx("div",{className:`w-14 h-14 sm:w-16 sm:h-16 ${a==="denied"?"bg-red-100":"bg-orange-100"} rounded-full flex items-center justify-center mx-auto mb-4`,children:t.jsx(nX,{className:`w-7 h-7 sm:w-8 sm:h-8 ${a==="denied"?"text-red-500":"text-orange-500"}`})}),t.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-2",children:a==="denied"?"Camera Access Denied":"Camera Error"}),t.jsx("p",{className:"text-gray-600 mb-4 text-sm max-w-sm mx-auto px-2",children:A||"Unable to access camera. Please check your permissions and try again."}),t.jsx("button",{onClick:ge,disabled:p||L&&!D,className:"px-5 sm:px-6 py-2.5 sm:py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-2 mx-auto text-sm sm:text-base",children:p?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),t.jsx("span",{children:"Requesting..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(I_,{className:"w-4 h-4"}),t.jsx("span",{children:"Request Camera Access"})]})}),a==="denied"&&t.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg max-w-xs mx-auto",children:t.jsx("p",{className:"text-xs text-gray-600",children:L?"Go to your browser settings  Site settings  Camera  Allow for this site.":"Click the camera icon in your browser's address bar to allow access."})})]}),Ee&&t.jsx(lme,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(x9,{scannerContainerId:Q}),t.jsx("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-3",children:e?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:X,className:"flex items-center gap-2 px-5 sm:px-6 py-2.5 sm:py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm sm:text-base",children:[t.jsx(nq,{className:"w-5 h-5"}),t.jsx("span",{children:"Stop"})]}),d.length>1&&t.jsxs("button",{onClick:he,className:"flex items-center gap-2 px-4 py-2.5 sm:py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm sm:text-base",title:"Switch Camera",children:[t.jsx(tq,{className:"w-5 h-5"}),t.jsx("span",{className:"hidden sm:inline",children:"Switch Camera"})]})]}):t.jsx("button",{onClick:re,disabled:p||L&&!D,className:"flex items-center gap-2 px-5 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all disabled:opacity-50 shadow-lg shadow-blue-500/30 text-sm sm:text-base",children:p?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),t.jsx("span",{children:"Starting..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(Jf,{className:"w-5 h-5"}),t.jsx("span",{children:"Start Scanner"})]})})}),d.length>1&&!e&&t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-600",children:"Camera:"}),t.jsx("select",{value:f||"",onChange:pe=>x(pe.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 max-w-[200px]",children:d.map((pe,Fe)=>t.jsx("option",{value:pe.id,children:pe.label||`Camera ${Fe+1}`},pe.id))})]})]})})]}),t.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[B&&$&&(()=>{const pe=V?.data?.isAlreadyScanned===!0;return t.jsxs("div",{className:`rounded-xl shadow-lg border-2 p-6 sm:p-8 ${pe?"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-400":"bg-gradient-to-br from-green-50 to-emerald-50 border-green-300"}`,children:[t.jsx("div",{className:"text-center mb-6",children:pe?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-yellow-500 rounded-full mb-4 animate-pulse",children:t.jsx(q3,{className:"w-12 h-12 text-white"})}),t.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-yellow-800 mb-2",children:" ALREADY SCANNED"}),t.jsx("p",{className:"text-yellow-700 font-medium",children:"This ticket was previously scanned"}),V.data.scannedAt&&t.jsxs("p",{className:"text-sm text-yellow-600 mt-2",children:["Previously scanned: ",new Date(V.data.scannedAt).toLocaleString()]})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-500 rounded-full mb-4 animate-pulse",children:t.jsx(Nu,{className:"w-12 h-12 text-white"})}),t.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-green-800 mb-2",children:" VERIFIED - FIRST SCAN"}),t.jsx("p",{className:"text-green-700 font-medium",children:"Person is Allowed & Authenticated"})]})}),V?.data&&(V.data.user||V.data.enrollment)&&(()=>{const Fe=V.ticketType==="cash",me=Fe?V.data.enrollment?.name:V.data.user?.name,Ge=Fe?V.data.enrollment?.phone:V.data.ticket?.phone||V.data.user?.phone,Te=Fe?V.data.enrollment?.event:V.data.event;return t.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 mb-4 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(Nu,{className:"w-5 h-5 text-blue-600"}),"Attendee Information",V.ticketType&&t.jsx("span",{className:"text-xs font-normal bg-gray-100 px-2 py-1 rounded",children:V.ticketType==="cash"?"Cash Ticket":"Online Ticket"})]}),t.jsxs("div",{className:"space-y-3",children:[me&&t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-blue-50 rounded-lg",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0",children:"Name:"}),t.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-900 bg-white px-4 py-2 rounded border border-blue-200",children:me})]}),Ge&&t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0",children:"Phone:"}),t.jsx("span",{className:"text-sm sm:text-base font-mono text-gray-900 bg-white px-3 py-1 rounded border border-gray-200",children:Ge})]}),Te&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0",children:"Event:"}),t.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900 bg-white px-3 py-1 rounded border border-gray-200",children:Te.name})]}),Te.startDate&&Te.endDate&&t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0",children:"Event Date:"}),t.jsxs("span",{className:"text-xs sm:text-sm text-gray-900 bg-white px-3 py-1 rounded border border-gray-200",children:[new Date(Te.startDate).toLocaleDateString()," - ",new Date(Te.endDate).toLocaleDateString()]})]})]})]})]})})(),V?.data&&(V.data.voucher?t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 sm:p-6 mb-4 shadow-sm border border-purple-200",children:[t.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2",children:[t.jsx(V3,{className:"w-5 h-5 text-purple-600"}),"Redeemed Voucher"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-white rounded-lg border border-purple-100",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0",children:"Voucher Code:"}),t.jsx("span",{className:"text-base sm:text-lg font-bold text-purple-700 bg-purple-100 px-4 py-2 rounded border border-purple-200 font-mono",children:V.data.voucher.code})]}),V.data.voucher.title&&t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-white rounded-lg border border-purple-100",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0",children:"Title:"}),t.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:V.data.voucher.title})]}),V.data.voucher.description&&t.jsxs("div",{className:"p-3 bg-white rounded-lg border border-purple-100",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide block mb-2",children:"Description:"}),t.jsx("p",{className:"text-sm text-gray-700",children:V.data.voucher.description})]})]})]}):t.jsx("div",{className:"bg-gray-50 rounded-lg p-4 sm:p-6 mb-4 shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(V3,{className:"w-6 h-6 text-gray-400"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-base font-semibold text-gray-600",children:"No Food Voucher"}),t.jsx("p",{className:"text-sm text-gray-500",children:"This attendee has not redeemed any voucher"})]})]})})),!V?.data?.enrollment&&!V?.data?.user&&$.type==="url"&&Object.keys($.parameters).length>0&&t.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 mb-4 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(Nb,{className:"w-5 h-5 text-blue-600"}),"Ticket Information"]}),t.jsx("div",{className:"space-y-3",children:Object.entries($.parameters).map(([Fe,me])=>t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[t.jsxs("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0",children:[Fe.replace(/_/g," "),":"]}),t.jsx("span",{className:"text-sm sm:text-base font-mono text-gray-900 bg-white px-3 py-1 rounded border border-gray-200",children:me})]},Fe))})]}),$.type==="url"&&t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:[t.jsx("p",{className:"text-xs text-blue-700 font-semibold mb-1",children:"SCANNED URL:"}),t.jsx("p",{className:"text-sm text-blue-900 break-all font-mono",children:$.fullUrl})]}),$.type==="text"&&t.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 mb-4 shadow-sm",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Scanned Content:"}),t.jsx("p",{className:"text-gray-900 break-all font-mono text-sm bg-gray-50 p-3 rounded border border-gray-200",children:$.text})]}),t.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[t.jsxs("button",{onClick:()=>{n(null),F(null),M(!1),z(null),re()},className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all shadow-md hover:shadow-lg font-semibold",children:[t.jsx(Jf,{className:"w-5 h-5"}),"Scan Next Person"]}),t.jsxs("button",{onClick:()=>Ve(s),className:"flex items-center gap-2 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors shadow-md",children:[t.jsx(Nb,{className:"w-5 h-5"}),"Copy Data"]})]})]})})(),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Scan History"}),S.length===0?t.jsxs("div",{className:"text-center py-6 sm:py-8 text-gray-500",children:[t.jsx(Jf,{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-2 opacity-30"}),t.jsx("p",{className:"text-sm",children:"No scans yet. Start scanning to see history."})]}):t.jsx("div",{className:"space-y-2 sm:space-y-3 max-h-60 sm:max-h-80 overflow-y-auto",children:S.map((pe,Fe)=>t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer group active:bg-gray-200",onClick:()=>Ke(pe.text),children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm text-gray-900 break-all font-mono truncate group-hover:text-blue-600",children:pe.text}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[pe.timestamp.toLocaleTimeString(),"  ",pe.format]})]}),t.jsx("button",{onClick:me=>{me.stopPropagation(),Ve(pe.text)},className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded transition-colors",children:t.jsx(Nb,{className:"w-4 h-4"})})]})},Fe))})]}),t.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[t.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Tips for better scanning:"}),t.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[t.jsx("li",{children:" Hold your device steady"}),t.jsx("li",{children:" Ensure good lighting"}),t.jsx("li",{children:" Position QR code within the frame"}),t.jsx("li",{children:" Keep the QR code flat and clear"}),L&&t.jsx("li",{children:" Try switching to back camera if using front"})]})]})]})]})]})}const cme=async(e,r={})=>Se(je.get(`/web/tickets/reshare/list/${e}`,{params:{page:r.page||1,limit:r.limit||20,search:r.search||void 0,enrollmentType:r.enrollmentType||void 0,scannedStatus:r.scannedStatus||void 0}})),dme=async(e,r,s={})=>Se(je.post(`/web/tickets/reshare/${e}/${r}`,{phone:s.phone,sendVia:s.sendVia||"both"})),ume=async(e,r="whatsapp")=>Se(je.post("/web/tickets/reshare/bulk",{tickets:e,sendVia:r})),hme=async()=>Se(je.get("/web/events")),gO=[{value:"",label:"All Types"},{value:"ONLINE",label:"Online"},{value:"CASH",label:"Cash"}],xO=[{value:"",label:"All Status"},{value:"false",label:"Not Scanned"},{value:"true",label:"Scanned"}],pO=[{value:"both",label:"WhatsApp & Email"},{value:"whatsapp",label:"WhatsApp Only"},{value:"email",label:"Email Only"}],mme=()=>{const[e,r]=v.useState([]),[s,n]=v.useState(""),[a,l]=v.useState(null),[d,h]=v.useState([]),[f,x]=v.useState(null),[p,b]=v.useState(!1),[S,T]=v.useState(!0),[A,P]=v.useState({currentPage:1,totalPages:1,totalCount:0,limit:20}),[D,I]=v.useState({search:"",enrollmentType:"",scannedStatus:""}),[L,_]=v.useState([]),[$,F]=v.useState(!1),[B,M]=v.useState({}),[V,z]=v.useState(!1);v.useEffect(()=>{H()},[]),v.useEffect(()=>{s?U():(h([]),x(null),l(null))},[s,A.currentPage,D]),v.useEffect(()=>{_([]),F(!1)},[d]);const H=async()=>{T(!0);try{const ae=await hme();if(ae.success){const ve=ae.data?.events||ae.data||[];r(Array.isArray(ve)?ve:[])}else ot.error(ae.message||"Failed to load events")}catch(ae){console.error("Error fetching events:",ae),ot.error("Failed to load events")}finally{T(!1)}},U=v.useCallback(async()=>{if(s){b(!0);try{const ae=await cme(s,{page:A.currentPage,limit:A.limit,search:D.search||void 0,enrollmentType:D.enrollmentType||void 0,scannedStatus:D.scannedStatus||void 0});ae.success?(h(ae.data.ticketHolders||[]),l(ae.data.event||null),x(ae.data.statistics||null),P(ve=>({...ve,...ae.data.pagination}))):(ot.error(ae.message||"Failed to load ticket holders"),h([]))}catch(ae){console.error("Error fetching ticket holders:",ae),ot.error("Failed to load ticket holders"),h([])}finally{b(!1)}}},[s,A.currentPage,A.limit,D]);return{events:e,selectedEventId:s,eventData:a,ticketHolders:d,statistics:f,pagination:A,filters:D,loading:p,eventsLoading:S,reshareLoading:B,bulkReshareLoading:V,selectedTickets:L,selectAll:$,isTicketSelected:ae=>L.some(ve=>ve.enrollmentType===ae.enrollmentType&&ve.enrollmentId===ae.enrollmentId),handleEventChange:ae=>{n(ae),P(ve=>({...ve,currentPage:1})),I({search:"",enrollmentType:"",scannedStatus:""})},handleFilterChange:(ae,ve)=>{I(fe=>({...fe,[ae]:ve})),P(fe=>({...fe,currentPage:1}))},handleSearch:ae=>{I(ve=>({...ve,search:ae})),P(ve=>({...ve,currentPage:1}))},handlePageChange:ae=>{P(ve=>({...ve,currentPage:ae}))},handleTicketSelect:ae=>{const ve=`${ae.enrollmentType}-${ae.enrollmentId}`;_(fe=>fe.find(oe=>`${oe.enrollmentType}-${oe.enrollmentId}`===ve)?fe.filter(oe=>`${oe.enrollmentType}-${oe.enrollmentId}`!==ve):[...fe,ae])},handleSelectAll:()=>{_($?[]:[...d]),F(!$)},handleReshareTicket:async(ae,ve="both")=>{const fe=`${ae.enrollmentType}-${ae.enrollmentId}`;M(se=>({...se,[fe]:!0}));try{const se=await dme(ae.enrollmentType,ae.enrollmentId,{phone:ae.phone||ae.user?.phone,sendVia:ve});se.success?(ot.success("Ticket reshared successfully!"),U()):ot.error(se.message||"Failed to reshare ticket")}catch(se){console.error("Error resharing ticket:",se),ot.error("Failed to reshare ticket")}finally{M(se=>({...se,[fe]:!1}))}},handleBulkReshare:async(ae="whatsapp")=>{if(L.length===0){ot.warning("Please select tickets to reshare");return}if(L.length>50){ot.warning("Maximum 50 tickets can be reshared at once");return}z(!0);try{const ve=L.map(se=>({enrollmentType:se.enrollmentType,enrollmentId:se.enrollmentId,phone:se.phone||se.user?.phone})),fe=await ume(ve,ae);if(fe.success){const{summary:se}=fe.data;se.failed>0?ot.warning(`Reshared ${se.success} tickets. ${se.failed} failed.`):ot.success(`Successfully reshared ${se.success} tickets!`),_([]),F(!1),U()}else ot.error(fe.message||"Bulk reshare failed")}catch(ve){console.error("Error in bulk reshare:",ve),ot.error("Bulk reshare failed")}finally{z(!1)}},refresh:()=>{s&&U()}}};function fme(){const{events:e,selectedEventId:r,ticketHolders:s,statistics:n,pagination:a,filters:l,loading:d,eventsLoading:h,reshareLoading:f,bulkReshareLoading:x,selectedTickets:p,selectAll:b,isTicketSelected:S,handleEventChange:T,handleFilterChange:A,handleSearch:P,handlePageChange:D,handleTicketSelect:I,handleSelectAll:L,handleReshareTicket:_,handleBulkReshare:$,refresh:F}=mme(),[B,M]=v.useState(""),[V,z]=v.useState(!1),[H,U]=v.useState("whatsapp"),[G,Q]=v.useState(null),[ce,ne]=v.useState("both");v.useEffect(()=>{const re=setTimeout(()=>{B!==l.search&&P(B)},500);return()=>clearTimeout(re)},[B]);const J=re=>re?new Date(re).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",W=re=>!re&&re!==0?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(re),le=re=>{Q(re),ne("both")},ge=async()=>{G&&(await _(G,ce),Q(null))};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 tracking-tight",children:"Ticket Reshare"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Regenerate and reshare ticket QR codes to users"})]}),t.jsxs("button",{onClick:F,disabled:d||!r,className:"flex items-center gap-1.5 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm text-sm",children:[t.jsx(KP,{className:`w-4 h-4 ${d?"animate-spin":""}`}),t.jsx("span",{className:"hidden sm:inline font-medium",children:"Refresh"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Event"}),t.jsxs("select",{value:r,onChange:re=>T(re.target.value),disabled:h,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:h?"Loading events...":"-- Select an Event --"}),e.map(re=>t.jsxs("option",{value:re._id,children:[re.name," - ",J(re.startDate)]},re._id))]})]}),r&&t.jsxs(t.Fragment,{children:[n&&t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[t.jsx(eu,{label:"Total",value:n.total,color:"blue",icon:t.jsx(yx,{})}),t.jsx(eu,{label:"Online",value:n.online,color:"purple",icon:t.jsx(G3,{})}),t.jsx(eu,{label:"Cash",value:n.cash,color:"green",icon:t.jsx(G3,{})}),t.jsx(eu,{label:"Scanned",value:n.scanned,color:"emerald",icon:t.jsx(Nu,{})}),t.jsx(eu,{label:"Not Scanned",value:n.notScanned,color:"orange",icon:t.jsx(y0,{})}),t.jsx(eu,{label:"Cancelled",value:n.cancelled,color:"red",icon:t.jsx(sq,{})})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(Y$,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search by phone, name, or email...",value:B,onChange:re=>M(re.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("button",{onClick:()=>z(!V),className:"lg:hidden flex items-center gap-2 px-4 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50",children:[t.jsx(J$,{className:"w-5 h-5"}),"Filters"]}),t.jsxs("div",{className:"hidden lg:flex items-center gap-3",children:[t.jsx("select",{value:l.enrollmentType,onChange:re=>A("enrollmentType",re.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:gO.map(re=>t.jsx("option",{value:re.value,children:re.label},re.value))}),t.jsx("select",{value:l.scannedStatus,onChange:re=>A("scannedStatus",re.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:xO.map(re=>t.jsx("option",{value:re.value,children:re.label},re.value))})]})]}),V&&t.jsxs("div",{className:"lg:hidden mt-3 pt-3 border-t border-gray-200 grid grid-cols-2 gap-3",children:[t.jsx("select",{value:l.enrollmentType,onChange:re=>A("enrollmentType",re.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-sm",children:gO.map(re=>t.jsx("option",{value:re.value,children:re.label},re.value))}),t.jsx("select",{value:l.scannedStatus,onChange:re=>A("scannedStatus",re.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-sm",children:xO.map(re=>t.jsx("option",{value:re.value,children:re.label},re.value))})]})]}),p.length>0&&t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(aX,{className:"text-blue-600 w-5 h-5"}),t.jsxs("span",{className:"font-semibold text-blue-900",children:[p.length," ticket(s) selected"]})]}),t.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[t.jsx("select",{value:H,onChange:re=>U(re.target.value),className:"flex-1 sm:flex-none px-3 py-2 border border-blue-300 rounded-lg bg-white text-sm focus:ring-2 focus:ring-blue-500",children:pO.map(re=>t.jsx("option",{value:re.value,children:re.label},re.value))}),t.jsxs("button",{onClick:()=>$(H),disabled:x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm font-medium",children:[x?t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsx(ux,{className:"w-4 h-4"}),"Reshare Selected"]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[t.jsx("div",{className:"hidden lg:block",children:t.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:b,onChange:L,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select All"})]}),t.jsxs("span",{className:"text-sm text-gray-500",children:[a.totalCount," ticket holder(s)"]})]})})}),d&&t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),t.jsx("p",{className:"text-gray-600",children:"Loading ticket holders..."})]}),!d&&s.length===0&&t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(y0,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Ticket Holders Found"}),t.jsx("p",{className:"text-gray-600",children:l.search||l.enrollmentType||l.scannedStatus?"Try adjusting your filters":"No tickets have been issued for this event yet"})]}),!d&&s.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden lg:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"w-12 px-4 py-3"}),t.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"User Details"}),t.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Type"}),t.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Tier / Price"}),t.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Scan Status"}),t.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Created"}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-semibold text-gray-700",children:"Action"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-100",children:s.map(re=>t.jsx(gme,{ticket:re,isSelected:S(re),onSelect:()=>I(re),onReshare:()=>le(re),isResharing:f[`${re.enrollmentType}-${re.enrollmentId}`],formatDate:J,formatCurrency:W},`${re.enrollmentType}-${re.enrollmentId}`))})]})}),t.jsxs("div",{className:"lg:hidden divide-y divide-gray-100",children:[t.jsxs("div",{className:"px-4 py-3 bg-gray-50 flex items-center justify-between",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:b,onChange:L,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select All"})]}),t.jsxs("span",{className:"text-sm text-gray-500",children:[a.totalCount," total"]})]}),s.map(re=>t.jsx(xme,{ticket:re,isSelected:S(re),onSelect:()=>I(re),onReshare:()=>le(re),isResharing:f[`${re.enrollmentType}-${re.enrollmentId}`],formatDate:J,formatCurrency:W},`${re.enrollmentType}-${re.enrollmentId}`))]})]}),!d&&a.totalPages>1&&t.jsxs("div",{className:"border-t border-gray-200 px-4 py-3 flex flex-col sm:flex-row items-center justify-between gap-3",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:["Page ",a.currentPage," of ",a.totalPages," (",a.totalCount," items)"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>D(a.currentPage-1),disabled:a.currentPage===1,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),t.jsx("div",{className:"hidden sm:flex items-center gap-1",children:Array.from({length:Math.min(5,a.totalPages)},(re,X)=>{let ae;return a.totalPages<=5||a.currentPage<=3?ae=X+1:a.currentPage>=a.totalPages-2?ae=a.totalPages-4+X:ae=a.currentPage-2+X,t.jsx("button",{onClick:()=>D(ae),className:`w-8 h-8 text-sm rounded-lg ${a.currentPage===ae?"bg-gray-900 text-white":"border border-gray-300 hover:bg-gray-50"}`,children:ae},ae)})}),t.jsx("button",{onClick:()=>D(a.currentPage+1),disabled:a.currentPage===a.totalPages,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}),!r&&!h&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[t.jsx(y0,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Select an Event"}),t.jsx("p",{className:"text-gray-600",children:"Choose an event from the dropdown above to view and manage ticket holders"})]}),G&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Confirm Reshare"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"This will reset the scan status and send a new QR code to:"}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[t.jsx("p",{className:"font-semibold text-gray-900",children:G.user?.name||G.name||"Unknown"}),t.jsx("p",{className:"text-sm text-gray-600",children:G.phone||G.user?.phone}),G.user?.email&&t.jsx("p",{className:"text-sm text-gray-600",children:G.user?.email})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Send via"}),t.jsx("select",{value:ce,onChange:re=>ne(re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:pO.map(re=>t.jsx("option",{value:re.value,children:re.label},re.value))})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:()=>Q(null),className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium",children:"Cancel"}),t.jsxs("button",{onClick:ge,disabled:f[`${G.enrollmentType}-${G.enrollmentId}`],className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50",children:[f[`${G.enrollmentType}-${G.enrollmentId}`]?t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsx(ux,{className:"w-4 h-4"}),"Reshare"]})]})]})})]})}function eu({label:e,value:r,color:s,icon:n}){const a={blue:"bg-blue-50 text-blue-600 border-blue-200",purple:"bg-purple-50 text-purple-600 border-purple-200",green:"bg-green-50 text-green-600 border-green-200",emerald:"bg-emerald-50 text-emerald-600 border-emerald-200",orange:"bg-orange-50 text-orange-600 border-orange-200",red:"bg-red-50 text-red-600 border-red-200"};return t.jsxs("div",{className:`rounded-lg border p-3 ${a[s]||a.blue}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"w-4 h-4",children:n}),t.jsx("span",{className:"text-xs font-medium opacity-80",children:e})]}),t.jsx("p",{className:"text-xl font-bold",children:r||0})]})}function gme({ticket:e,isSelected:r,onSelect:s,onReshare:n,isResharing:a,formatDate:l,formatCurrency:d}){const h=e.user?.name||e.name||"Unknown",f=e.phone||e.user?.phone||"N/A",x=e.user?.email||"N/A",p=e.enrollmentType==="ONLINE"?e.ticketPrice:e.priceCharged;return t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("input",{type:"checkbox",checked:r,onChange:s,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-900",children:h}),t.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Q$,{className:"w-3.5 h-3.5"}),f]}),x!=="N/A"&&t.jsxs("span",{className:"flex items-center gap-1 truncate max-w-[200px]",children:[t.jsx(K$,{className:"w-3.5 h-3.5"}),x]})]})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.enrollmentType==="ONLINE"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:e.enrollmentType})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{children:[e.tierName&&t.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.tierName}),t.jsx("p",{className:"text-sm text-gray-600",children:d(p)})]})}),t.jsx("td",{className:"px-4 py-3 text-center",children:e.isTicketScanned?t.jsxs("div",{className:"inline-flex flex-col items-center",children:[t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[t.jsx(Nu,{className:"w-3.5 h-3.5"}),"Scanned"]}),e.ticketScannedAt&&t.jsx("span",{className:"text-xs text-gray-500 mt-1",children:l(e.ticketScannedAt)})]}):t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[t.jsx(y0,{className:"w-3.5 h-3.5"}),"Not Scanned"]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-600",children:l(e.createdAt)})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsxs("button",{onClick:n,disabled:a||e.status==="CANCELLED",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a?t.jsx("div",{className:"w-3.5 h-3.5 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsx(ux,{className:"w-3.5 h-3.5"}),"Reshare"]})})]})}function xme({ticket:e,isSelected:r,onSelect:s,onReshare:n,isResharing:a,formatDate:l,formatCurrency:d}){const h=e.user?.name||e.name||"Unknown",f=e.phone||e.user?.phone||"N/A";e.user?.email;const x=e.enrollmentType==="ONLINE"?e.ticketPrice:e.priceCharged;return t.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("input",{type:"checkbox",checked:r,onChange:s,className:"w-4 h-4 mt-1 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-900",children:h}),t.jsx("p",{className:"text-sm text-gray-600",children:f})]}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium shrink-0 ${e.enrollmentType==="ONLINE"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:e.enrollmentType})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500 text-xs",children:"Price"}),t.jsx("p",{className:"font-medium text-gray-900",children:d(x)})]}),e.tierName&&t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500 text-xs",children:"Tier"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.tierName})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[e.isTicketScanned?t.jsxs("div",{children:[t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[t.jsx(Nu,{className:"w-3.5 h-3.5"}),"Scanned"]}),e.ticketScannedAt&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:l(e.ticketScannedAt)})]}):t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[t.jsx(y0,{className:"w-3.5 h-3.5"}),"Not Scanned"]}),t.jsxs("button",{onClick:n,disabled:a||e.status==="CANCELLED",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a?t.jsx("div",{className:"w-3.5 h-3.5 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsx(ux,{className:"w-3.5 h-3.5"}),"Reshare"]})]})]})]})})}const Xn={PLANS:"/web/membership-plans",USER_MEMBERSHIPS:"/web/user-memberships"},Sl={createPlan:async e=>(console.log("[MembershipService] Creating membership plan"),Se(je.post(Xn.PLANS,e))),getPlans:async(e={})=>(console.log("[MembershipService] Fetching membership plans with params:",e),Se(je.get(Xn.PLANS,{params:e}))),getPlanById:async e=>(console.log("[MembershipService] Fetching membership plan:",e),Se(je.get(`${Xn.PLANS}/${e}`))),updatePlan:async(e,r)=>(console.log("[MembershipService] Updating membership plan:",e),Se(je.put(`${Xn.PLANS}/${e}`,r))),deletePlan:async e=>(console.log("[MembershipService] Deleting membership plan:",e),Se(je.delete(`${Xn.PLANS}/${e}`))),restorePlan:async e=>(console.log("[MembershipService] Restoring membership plan:",e),Se(je.post(`${Xn.PLANS}/${e}/restore`))),createUserMembership:async e=>(console.log("[MembershipService] Creating user membership for phone:",e?.phone),Se(je.post(Xn.USER_MEMBERSHIPS,e))),getUserMemberships:async(e={})=>(console.log("[MembershipService] Fetching user memberships with params:",e),Se(je.get(Xn.USER_MEMBERSHIPS,{params:e}))),checkMembershipStatus:async e=>(console.log("[MembershipService] Checking membership status for phone:",e),Se(je.post(`${Xn.USER_MEMBERSHIPS}/check-status`,{phone:e}))),getUserMembershipById:async e=>(console.log("[MembershipService] Fetching user membership:",e),Se(je.get(`${Xn.USER_MEMBERSHIPS}/${e}`))),extendUserMembership:async(e,r)=>(console.log("[MembershipService] Extending membership:",e,"by",r,"days"),Se(je.post(`${Xn.USER_MEMBERSHIPS}/${e}/extend`,{additionalDays:r}))),cancelUserMembership:async(e,r)=>(console.log("[MembershipService] Cancelling membership:",e),Se(je.post(`${Xn.USER_MEMBERSHIPS}/${e}/cancel`,{reason:r}))),updateAdminNotes:async(e,r)=>(console.log("[MembershipService] Updating admin notes for membership:",e),Se(je.patch(`${Xn.USER_MEMBERSHIPS}/${e}/notes`,{adminNotes:r}))),deleteUserMembership:async e=>(console.log("[MembershipService] Deleting user membership:",e),Se(je.delete(`${Xn.USER_MEMBERSHIPS}/${e}`)))},Mc={BASE:"/web/feature-pricing",BY_ID:e=>`/web/feature-pricing/${e}`,RESTORE:e=>`/web/feature-pricing/${e}/restore`},pme=e=>{const r=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&r.append(s,n)}),r.toString()},Vi={getAll:async(e={})=>{console.log("[FeaturePricingService] Fetching pricing with params:",e);const r=pme(e),s=r?`${Mc.BASE}?${r}`:Mc.BASE,n=await Se(je.get(s));return n.success?console.log("[FeaturePricingService] Fetched pricing:",n.data.individualFeatures?.length,"individual,",n.data.bundles?.length,"bundles"):console.error("[FeaturePricingService] Failed to fetch pricing:",n.message),n},getById:async e=>{console.log("[FeaturePricingService] Fetching pricing:",e);const r=await Se(je.get(Mc.BY_ID(e)));return r.success?console.log("[FeaturePricingService] Fetched pricing:",r.data.pricing?.name):console.error("[FeaturePricingService] Failed to fetch pricing:",r.message),r},create:async e=>{console.log("[FeaturePricingService] Creating pricing:",e.featureKey);const r=await Se(je.post(Mc.BASE,e));return r.success?console.log("[FeaturePricingService] Pricing created:",r.data.pricing?._id):console.error("[FeaturePricingService] Failed to create pricing:",r.message),r},update:async(e,r)=>{console.log("[FeaturePricingService] Updating pricing:",e);const s=await Se(je.put(Mc.BY_ID(e),r));return s.success?console.log("[FeaturePricingService] Pricing updated:",s.data.pricing?.name):console.error("[FeaturePricingService] Failed to update pricing:",s.message),s},delete:async e=>{console.log("[FeaturePricingService] Deleting pricing:",e);const r=await Se(je.delete(Mc.BY_ID(e)));return r.success?console.log("[FeaturePricingService] Pricing deleted"):console.error("[FeaturePricingService] Failed to delete pricing:",r.message),r},restore:async e=>{console.log("[FeaturePricingService] Restoring pricing:",e);const r=await Se(je.post(Mc.RESTORE(e)));return r.success?console.log("[FeaturePricingService] Pricing restored:",r.data.pricing?.name):console.error("[FeaturePricingService] Failed to restore pricing:",r.message),r}},S2={name:"",description:"",price:"",compareAtPrice:"",durationInDays:"",perks:[],perkInput:"",displayOrder:"",isFeatured:!1,isActive:!0,maxPurchases:""},yme={currentPage:1,totalPages:0,totalCount:0,limit:9},bme={currentPage:1,totalPages:0,totalCount:0,limit:10};function vme(){const{hasRole:e}=vn(),r=e(["SUPER_ADMIN","ADMIN"]),[s,n]=v.useState("memberships"),[a,l]=v.useState([]),[d,h]=v.useState(S2),[f,x]=v.useState({search:"",status:"all",featured:"all"}),[p,b]=v.useState(yme),[S,T]=v.useState(!1),[A,P]=v.useState(!1),[D,I]=v.useState(null),[L,_]=v.useState(null),[$,F]=v.useState(!1),[B,M]=v.useState(null),[V,z]=v.useState([]),[H,U]=v.useState([]),[G,Q]=v.useState({phone:"",membershipPlanId:"",amountPaid:"",adminNotes:""}),[ce,ne]=v.useState({phone:"",status:"all",paymentStatus:"all",purchaseMethod:"all"}),[J,W]=v.useState(bme),[le,ge]=v.useState(!1),[re,X]=v.useState(null),[ae,ve]=v.useState(!1),[fe,se]=v.useState(null),[oe,he]=v.useState(!1),[Ve,Ce]=v.useState(null),[Ke,xe]=v.useState(""),[Ee,pe]=v.useState(""),[Fe,me]=v.useState(""),[Ge,Te]=v.useState(!1),[at,dt]=v.useState(!1),[Nt,Qe]=v.useState(!1),[ct,ze]=v.useState(!1),[ft,Kt]=v.useState(null),[lr,ys]=v.useState({individualFeatures:[],bundles:[]}),[Ye,xt]=v.useState({featureKey:"",name:"",description:"",price:"",compareAtPrice:"",durationInDays:"30",isLifetime:!1,isBundle:!1,includedFeatures:[],perks:[""],displayOrder:"1",isFeatured:!1,isActive:!0}),[Ur,Ir]=v.useState(!1),[Cr,_t]=v.useState(null),[Ae,tt]=v.useState(!1),[lt,Ct]=v.useState(null),[jr,bs]=v.useState({}),Ar=v.useMemo(()=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}),[]),ht=async(de=1)=>{T(!0),I(null);const pt={page:de,limit:p.limit,sortBy:"displayOrder",sortOrder:"asc"};f.search.trim()&&(pt.search=f.search.trim()),f.status!=="all"&&(pt.isActive=f.status==="active"),f.featured!=="all"&&(pt.isFeatured=f.featured==="featured");const yt=await Sl.getPlans(pt);yt.success?(l(yt.data?.plans||[]),z(yt.data?.plans||V),b({currentPage:yt.data?.pagination?.currentPage||de,totalPages:yt.data?.pagination?.totalPages||0,totalCount:yt.data?.pagination?.totalCount||0,limit:yt.data?.pagination?.limit||p.limit})):I(yt.message||"Failed to load plans"),T(!1)},Ze=async(de=1)=>{ge(!0),X(null);const pt={page:de,limit:J.limit,sortBy:"createdAt",sortOrder:"desc"};ce.phone.trim()&&(pt.phone=ce.phone.trim()),ce.status!=="all"&&(pt.status=ce.status),ce.paymentStatus!=="all"&&(pt.paymentStatus=ce.paymentStatus),ce.purchaseMethod!=="all"&&(pt.purchaseMethod=ce.purchaseMethod);const yt=await Sl.getUserMemberships(pt);yt.success?(U(yt.data?.memberships||[]),W({currentPage:yt.data?.pagination?.currentPage||de,totalPages:yt.data?.pagination?.totalPages||0,totalCount:yt.data?.pagination?.totalCount||0,limit:yt.data?.pagination?.limit||J.limit})):X(yt.message||"Failed to load memberships"),ge(!1)},Mt=async()=>{Ir(!0);const de=await Vi.getAll({includeInactive:!0});if(de.success){const pt=de.data?.pricingList?.filter(Zt=>!Zt.isBundle)||[],yt=de.data?.pricingList?.filter(Zt=>Zt.isBundle)||[];ys({individualFeatures:pt,bundles:yt})}Ir(!1)};v.useEffect(()=>{ht(1),Ze(1),Mt()},[]);const zr=()=>h(S2),ns=de=>{const pt=de.durationInDays===0||de.durationInDays==="0"||de.durationInDays===null||de.durationInDays==="",yt={name:de.name.trim(),description:de.description.trim(),price:de.price?Number(de.price):0,durationInDays:pt?0:Number(de.durationInDays),perks:de.perks,isFeatured:de.isFeatured,isActive:de.isActive};return de.compareAtPrice&&Number(de.compareAtPrice)>0&&(yt.compareAtPrice=Number(de.compareAtPrice)),de.displayOrder&&Number(de.displayOrder)>0&&(yt.displayOrder=Number(de.displayOrder)),de.maxPurchases&&Number(de.maxPurchases)>0&&(yt.maxPurchases=Number(de.maxPurchases)),console.log("[Memberships] Prepared plan payload:",yt),yt},$e=()=>{const de=d.perkInput.trim();!de||d.perks.includes(de)||h(pt=>({...pt,perks:[...pt.perks,de],perkInput:""}))},At=de=>{h(pt=>({...pt,perks:pt.perks.filter(yt=>yt!==de)}))},Ws=de=>{_(de),h({...S2,...de,price:de.price??"",compareAtPrice:de.compareAtPrice??"",durationInDays:de.durationInDays??"",displayOrder:de.displayOrder??"",maxPurchases:de.maxPurchases??"",perks:de.perks||[],perkInput:""}),F(!0)},Un=async de=>{if(de.preventDefault(),!L)return;P(!0),I(null);const pt=await Sl.updatePlan(L._id,ns(d));pt.success?(F(!1),_(null),zr(),ht(p.currentPage)):I(pt.message||"Failed to update plan"),P(!1)},Nn=async de=>{if(de.preventDefault(),!r)return;ve(!0),X(null);const pt={phone:G.phone.trim(),membershipPlanId:G.membershipPlanId,amountPaid:G.amountPaid?Number(G.amountPaid):void 0,adminNotes:G.adminNotes.trim()||void 0},yt=await Sl.createUserMembership(pt);yt.success?(Q({phone:"",membershipPlanId:"",amountPaid:"",adminNotes:""}),Ze(1)):X(yt.message||"Failed to create membership"),ve(!1)},Kl=async()=>{if(!ce.phone.trim()){se(null);return}he(!0);const de=await Sl.checkMembershipStatus(ce.phone.trim());se(de.success?de.data:{hasActiveMembership:!1,error:de.message}),he(!1)},jn=async de=>{de.preventDefault(),!(!Ve||!Ke)&&(Te(!0),await Sl.extendUserMembership(Ve._id,Number(Ke)),Te(!1),dt(!1),xe(""),Ce(null),Ze(J.currentPage))},ei=async de=>{de.preventDefault(),!(!Ve||!Ee.trim())&&(Te(!0),await Sl.cancelUserMembership(Ve._id,Ee.trim()),Te(!1),Qe(!1),pe(""),Ce(null),Ze(J.currentPage))},vs=async de=>{de.preventDefault(),Ve&&(Te(!0),await Sl.updateAdminNotes(Ve._id,Fe.trim()),Te(!1),ze(!1),me(""),Ce(null),Ze(J.currentPage))},On=async()=>{ft&&(Te(!0),await Sl.deleteUserMembership(ft),Te(!1),Kt(null),Ze(J.currentPage))},as=()=>{xt({featureKey:"",name:"",description:"",price:"",compareAtPrice:"",durationInDays:"30",isLifetime:!1,isBundle:!1,includedFeatures:[],perks:[""],displayOrder:"1",isFeatured:!1,isActive:!0}),bs({})},ut=async de=>{if(de.preventDefault(),!r)return;Te(!0),bs({});const pt={featureKey:Ye.featureKey.trim().toUpperCase(),name:Ye.name.trim(),description:Ye.description.trim(),price:Number(Ye.price),durationInDays:Ye.isLifetime?0:Number(Ye.durationInDays),isBundle:Ye.isBundle,perks:Ye.perks.filter(Zt=>Zt.trim()),displayOrder:Number(Ye.displayOrder),isFeatured:Ye.isFeatured,isActive:Ye.isActive};Ye.compareAtPrice&&(pt.compareAtPrice=Number(Ye.compareAtPrice)),Ye.isBundle&&Ye.includedFeatures.length>0&&(pt.includedFeatures=Ye.includedFeatures);const yt=await Vi.create(pt);yt.success?(tt(!1),as(),Mt()):bs({submit:yt.message||"Failed to create feature pricing"}),Te(!1)},Ds=de=>{_t(de),xt({featureKey:de.featureKey||"",name:de.name||"",description:de.description||"",price:de.price?.toString()||"",compareAtPrice:de.compareAtPrice?.toString()||"",durationInDays:de.durationInDays===0?"0":de.durationInDays?.toString()||"30",isLifetime:de.durationInDays===0,isBundle:de.isBundle||!1,includedFeatures:de.includedFeatures||[],perks:de.perks?.length>0?de.perks:[""],displayOrder:de.displayOrder?.toString()||"1",isFeatured:de.isFeatured||!1,isActive:de.isActive!==!1}),tt(!0)},Yr=async de=>{if(de.preventDefault(),!Cr)return;Te(!0),bs({});const pt={name:Ye.name.trim(),description:Ye.description.trim(),price:Number(Ye.price),durationInDays:Ye.isLifetime?0:Number(Ye.durationInDays),perks:Ye.perks.filter(Zt=>Zt.trim()),displayOrder:Number(Ye.displayOrder),isFeatured:Ye.isFeatured,isActive:Ye.isActive};Ye.compareAtPrice&&(pt.compareAtPrice=Number(Ye.compareAtPrice)),Ye.isBundle&&Ye.includedFeatures.length>0&&(pt.includedFeatures=Ye.includedFeatures);const yt=await Vi.update(Cr._id,pt);yt.success?(tt(!1),_t(null),as(),Mt()):bs({submit:yt.message||"Failed to update feature pricing"}),Te(!1)},or=async()=>{if(!lt)return;Te(!0);const de=await Vi.delete(lt);Te(!1),Ct(null),de.success&&Mt()},hn=()=>{Ye.perks[Ye.perks.length-1]?.trim()&&xt(de=>({...de,perks:[...de.perks,""]}))},Ca=(de,pt)=>{const yt=[...Ye.perks];yt[de]=pt,xt(Zt=>({...Zt,perks:yt}))},Ei=de=>{Ye.perks.length>1&&xt(pt=>({...pt,perks:pt.perks.filter((yt,Zt)=>Zt!==de)}))},wn=({plan:de})=>t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${de.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:de.isActive?"Active":"Inactive"}),de.isFeatured&&t.jsxs("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-amber-100 text-amber-700 flex items-center gap-1",children:[t.jsx(hi,{className:"h-3 w-3"}),"Featured"]}),de.isDeleted&&t.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-700",children:"Deleted"})]});return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Memberships & Feature Access"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage membership plans, subscriptions, and feature pricing."})]}),t.jsxs("button",{onClick:()=>{ht(p.currentPage),Ze(J.currentPage),Mt()},className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[t.jsx(ms,{className:"h-4 w-4"}),"Refresh"]})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-2 shadow-sm flex gap-2",children:[t.jsx("button",{onClick:()=>n("plans"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold ${s==="plans"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`,children:"Membership Plans"}),t.jsx("button",{onClick:()=>n("memberships"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold ${s==="memberships"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`,children:"Member Subscriptions"}),t.jsxs("button",{onClick:()=>n("features"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 ${s==="features"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`,children:[t.jsx(Tn,{className:"h-4 w-4"}),"Feature Pricing"]})]}),s==="plans"&&t.jsxs("div",{className:"space-y-6",id:"plans-tab-content",children:[D&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[t.jsx(Rt,{className:"h-5 w-5"}),t.jsx("span",{className:"font-medium",children:D})]})}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"p-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:f.search,onChange:de=>x({...f,search:de.target.value}),onKeyDown:de=>de.key==="Enter"&&ht(1),onBlur:()=>ht(1),placeholder:"Search plans",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{value:f.status,onChange:de=>x({...f,status:de.target.value}),onBlur:()=>ht(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"all",children:"All status"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"})]}),t.jsxs("select",{value:f.featured,onChange:de=>x({...f,featured:de.target.value}),onBlur:()=>ht(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"all",children:"All visibility"}),t.jsx("option",{value:"featured",children:"Featured"}),t.jsx("option",{value:"standard",children:"Standard"})]}),t.jsx("button",{onClick:()=>{x({search:"",status:"all",featured:"all"}),ht(1)},className:"px-3 py-2 text-sm text-gray-600 bg-gray-100 border border-gray-200 rounded-lg hover:bg-gray-200",children:"Reset"})]})]}),S?t.jsxs("div",{className:"p-6 flex items-center justify-center gap-2 text-gray-600",children:[t.jsx(st,{className:"h-5 w-5 animate-spin"}),"Loading plans..."]}):a.length===0?t.jsx("div",{className:"p-6 text-center text-gray-500",children:"No membership plans found."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 p-4",children:a.map(de=>t.jsxs("div",{className:"border border-gray-200 rounded-xl p-4 flex flex-col gap-3 hover:shadow-sm transition",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:de.name}),t.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:de.description}),t.jsx(wn,{plan:de})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xl font-bold text-gray-900",children:Ar.format(de.price||0)}),de.compareAtPrice&&t.jsx("p",{className:"text-xs text-gray-500 line-through",children:Ar.format(de.compareAtPrice)})]})]}),t.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[t.jsx(on,{className:"h-4 w-4"}),"Display order: ",de.displayOrder??"-"]}),t.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[t.jsx(vb,{className:"h-4 w-4"}),de.durationInDays===0||de.durationInDays===null||de.isLifetime?t.jsxs("span",{className:"flex items-center gap-1 text-yellow-700 font-semibold",children:[t.jsx(hi,{className:"h-3.5 w-3.5",fill:"currentColor"}),"Lifetime"]}):`${de.durationInDays} days`," - ",de.currentPurchases??0,de.maxPurchases?` / ${de.maxPurchases}`:""," purchases"]}),de.perks?.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:de.perks.map(pt=>t.jsx("span",{className:"px-2 py-1 text-xs rounded-lg bg-gray-100 text-gray-800",children:pt},pt))}),t.jsx("div",{className:"flex items-center gap-3 pt-2",children:t.jsx("button",{onClick:()=>Ws(de),className:"w-full px-3 py-2 text-sm text-white bg-gray-900 rounded-lg hover:bg-gray-800",children:"Edit"})})]},de._id))}),p.totalPages>1&&t.jsx(vr,{currentPage:p.currentPage,totalPages:p.totalPages,totalItems:p.totalCount,itemsPerPage:p.limit,onPageChange:de=>ht(de),itemLabel:"plans"})]})]}),s==="memberships"&&t.jsxs("div",{className:"space-y-6",id:"memberships-tab-content",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(hs,{className:"h-5 w-5 text-gray-800"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Check membership status"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.jsx("input",{type:"text",value:ce.phone,onChange:de=>ne({...ce,phone:de.target.value}),placeholder:"Phone number",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),t.jsxs("button",{onClick:Kl,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800",children:[oe?t.jsx(st,{className:"h-4 w-4 animate-spin"}):t.jsx(br,{className:"h-4 w-4"}),"Check"]})]}),fe&&t.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 bg-gray-50 space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-900",children:[fe.hasActiveMembership?t.jsx(kl,{className:"h-4 w-4 text-green-600"}):t.jsx(Rt,{className:"h-4 w-4 text-red-600"}),fe.hasActiveMembership?"Active membership found":"No active membership"]}),fe.membership&&t.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[t.jsxs("p",{children:["Plan: ",fe.membership.membershipPlanId?.name]}),fe.membership.isLifetime?t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"flex items-center gap-1 text-yellow-700 font-semibold",children:[t.jsx(hi,{className:"h-3.5 w-3.5",fill:"currentColor"}),"Lifetime Membership"]}),t.jsx("p",{children:"Valid: Forever"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("p",{children:["Valid till:"," ",fe.membership.endDate?new Date(fe.membership.endDate).toLocaleDateString():"-"]}),t.jsxs("p",{children:["Days remaining: ",fe.membership.daysRemaining??"-"]})]})]}),fe.error&&t.jsx("p",{className:"text-sm text-red-600",children:fe.error})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Tj,{className:"h-5 w-5 text-gray-800"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Create membership manually"})]}),re&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Rt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:re})]}),t.jsxs("form",{onSubmit:Nn,className:"space-y-3",children:[t.jsx("input",{type:"text",value:G.phone,onChange:de=>Q({...G,phone:de.target.value}),required:!0,placeholder:"Phone number",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),t.jsxs("select",{value:G.membershipPlanId,onChange:de=>Q({...G,membershipPlanId:de.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"Select plan"}),V.map(de=>t.jsxs("option",{value:de._id,children:[de.name," - ",Ar.format(de.price||0)]},de._id))]}),t.jsx("input",{type:"number",min:"0",value:G.amountPaid,onChange:de=>Q({...G,amountPaid:de.target.value}),placeholder:"Amount paid (optional)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),t.jsx("textarea",{rows:3,value:G.adminNotes,onChange:de=>Q({...G,adminNotes:de.target.value}),placeholder:"Admin notes",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{type:"submit",disabled:ae,className:"inline-flex items-center gap-2 px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[ae?t.jsx(st,{className:"h-4 w-4 animate-spin"}):t.jsx(fr,{className:"h-4 w-4"}),"Create membership"]})})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"p-4 flex flex-col lg:flex-row gap-3 lg:items-center lg:justify-between",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:ce.phone,onChange:de=>ne({...ce,phone:de.target.value}),onKeyDown:de=>de.key==="Enter"&&Ze(1),placeholder:"Search by phone",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{value:ce.status,onChange:de=>ne({...ce,status:de.target.value}),onBlur:()=>Ze(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"all",children:"All status"}),t.jsx("option",{value:"ACTIVE",children:"Active"}),t.jsx("option",{value:"CANCELLED",children:"Cancelled"}),t.jsx("option",{value:"EXPIRED",children:"Expired"})]}),t.jsxs("select",{value:ce.paymentStatus,onChange:de=>ne({...ce,paymentStatus:de.target.value}),onBlur:()=>Ze(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"all",children:"All payments"}),t.jsx("option",{value:"SUCCESS",children:"Success"}),t.jsx("option",{value:"PENDING",children:"Pending"}),t.jsx("option",{value:"FAILED",children:"Failed"})]}),t.jsxs("select",{value:ce.purchaseMethod,onChange:de=>ne({...ce,purchaseMethod:de.target.value}),onBlur:()=>Ze(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"all",children:"All methods"}),t.jsx("option",{value:"ADMIN",children:"Admin"}),t.jsx("option",{value:"IN_APP",children:"In app"}),t.jsx("option",{value:"WEBSITE",children:"Website"})]}),t.jsx("button",{onClick:()=>{ne({phone:"",status:"all",paymentStatus:"all",purchaseMethod:"all"}),Ze(1)},className:"px-3 py-2 text-sm text-gray-600 bg-gray-100 border border-gray-200 rounded-lg hover:bg-gray-200",children:"Reset"}),t.jsxs("button",{onClick:()=>Ze(1),className:"px-3 py-2 text-sm text-white bg-gray-900 rounded-lg hover:bg-gray-800 flex items-center gap-2",children:[t.jsx(br,{className:"h-4 w-4"}),"Apply"]})]})]}),le?t.jsxs("div",{className:"p-6 flex items-center justify-center gap-2 text-gray-600",children:[t.jsx(st,{className:"h-5 w-5 animate-spin"}),"Loading memberships..."]}):H.length===0?t.jsx("div",{className:"p-6 text-center text-gray-500",children:"No memberships found."}):t.jsx("div",{className:"divide-y divide-gray-200",children:H.map(de=>t.jsxs("div",{className:"p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-base font-semibold text-gray-900",children:de.membershipPlanId?.name||"Membership"}),de.isCurrentlyActive&&t.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-emerald-100 text-emerald-700",children:"Active now"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:de.phone}),t.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[t.jsx(vb,{className:"h-4 w-4 text-gray-500"}),de.startDate?new Date(de.startDate).toLocaleDateString():"-"," -"," ",de.endDate?new Date(de.endDate).toLocaleDateString():"-"]}),t.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[t.jsx(rm,{className:"h-4 w-4 text-gray-500"}),Ar.format(de.amountPaid||de.membershipPlanId?.price||0)]}),t.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[t.jsx(ad,{className:"h-4 w-4 text-gray-500"}),de.adminNotes||"No notes"]}),t.jsxs("div",{className:"flex flex-wrap gap-2 pt-1",children:[t.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${de.status==="ACTIVE"?"bg-green-100 text-green-700":de.status==="CANCELLED"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`,children:de.status}),t.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${de.paymentStatus==="SUCCESS"?"bg-emerald-100 text-emerald-700":de.paymentStatus==="FAILED"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:de.paymentStatus}),t.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-blue-100 text-blue-700",children:de.purchaseMethod||"IN_APP"})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx("button",{onClick:()=>{Ce(de),xe(""),dt(!0)},className:"px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Extend"}),t.jsx("button",{onClick:()=>{Ce(de),pe(""),Qe(!0)},className:"px-3 py-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100",children:"Cancel"}),t.jsx("button",{onClick:()=>{Ce(de),me(de.adminNotes||""),ze(!0)},className:"px-3 py-2 text-sm text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50",children:"Notes"}),t.jsx("button",{onClick:()=>Kt(de._id),className:"px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Delete"})]})]},de._id))}),J.totalPages>1&&t.jsx(vr,{currentPage:J.currentPage,totalPages:J.totalPages,totalItems:J.totalCount,itemsPerPage:J.limit,onPageChange:de=>Ze(de),itemLabel:"memberships"})]})]}),s==="features"&&t.jsxs("div",{className:"space-y-6",id:"features-tab-content",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Manage individual features and bundles. Features can be purchased separately or as part of bundles."}),t.jsxs("button",{onClick:()=>{as(),_t(null),tt(!0)},className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800",children:[t.jsx(fr,{className:"h-4 w-4"}),"Add Feature/Bundle"]})]}),Ur?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 flex items-center justify-center gap-2 text-gray-600",children:[t.jsx(st,{className:"h-5 w-5 animate-spin"}),"Loading feature pricing..."]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Tn,{className:"h-5 w-5 text-blue-600"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Individual Features"}),t.jsxs("span",{className:"text-sm text-gray-500",children:["(",lr.individualFeatures.length,")"]})]}),lr.individualFeatures.length===0?t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 text-center text-gray-500",children:"No individual features found. Create one to get started."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:lr.individualFeatures.map(de=>t.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-sm transition",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-3",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"px-2 py-0.5 text-xs font-mono font-semibold bg-blue-100 text-blue-700 rounded",children:de.featureKey}),de.isFeatured&&t.jsx(hi,{className:"h-4 w-4 text-amber-500",fill:"currentColor"})]}),t.jsx("h3",{className:"text-base font-semibold text-gray-900",children:de.name}),t.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 mt-1",children:de.description})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-lg font-bold text-gray-900",children:Ar.format(de.price||0)}),de.compareAtPrice&&t.jsx("p",{className:"text-xs text-gray-500 line-through",children:Ar.format(de.compareAtPrice)})]})]}),t.jsxs("div",{className:"space-y-2 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.jsx(dr,{className:"h-4 w-4"}),de.durationInDays===0?t.jsx("span",{className:"text-yellow-700 font-semibold",children:"Lifetime"}):`${de.durationInDays} days`]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${de.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:de.isActive?"Active":"Inactive"}),de.isDeleted&&t.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-700",children:"Deleted"})]})]}),de.perks?.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:de.perks.map((pt,yt)=>t.jsx("span",{className:"px-2 py-1 text-xs rounded bg-gray-100 text-gray-700",children:pt},yt))}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>Ds(de),className:"flex-1 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg hover:bg-gray-800 flex items-center justify-center gap-1",children:[t.jsx(Es,{className:"h-3.5 w-3.5"}),"Edit"]}),t.jsx("button",{onClick:()=>Ct(de._id),className:"px-3 py-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100",children:t.jsx(ir,{className:"h-3.5 w-3.5"})})]})]},de._id))})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($a,{className:"h-5 w-5 text-purple-600"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Feature Bundles"}),t.jsxs("span",{className:"text-sm text-gray-500",children:["(",lr.bundles.length,")"]})]}),lr.bundles.length===0?t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 text-center text-gray-500",children:"No bundles found. Create a bundle to offer multiple features together."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:lr.bundles.map(de=>t.jsxs("div",{className:"bg-white border border-purple-200 rounded-xl p-4 hover:shadow-sm transition",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-3",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"px-2 py-0.5 text-xs font-mono font-semibold bg-purple-100 text-purple-700 rounded",children:de.featureKey}),de.isFeatured&&t.jsx(hi,{className:"h-4 w-4 text-amber-500",fill:"currentColor"})]}),t.jsx("h3",{className:"text-base font-semibold text-gray-900",children:de.name}),t.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 mt-1",children:de.description})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-lg font-bold text-gray-900",children:Ar.format(de.price||0)}),de.compareAtPrice&&t.jsx("p",{className:"text-xs text-gray-500 line-through",children:Ar.format(de.compareAtPrice)})]})]}),de.includedFeatures?.length>0&&t.jsxs("div",{className:"mb-3 p-2 bg-purple-50 rounded-lg",children:[t.jsx("p",{className:"text-xs text-purple-700 font-semibold mb-1",children:"Includes:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:de.includedFeatures.map((pt,yt)=>t.jsx("span",{className:"px-2 py-0.5 text-xs bg-white text-purple-700 rounded border border-purple-200",children:pt},yt))})]}),t.jsxs("div",{className:"space-y-2 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.jsx(dr,{className:"h-4 w-4"}),de.durationInDays===0?t.jsx("span",{className:"text-yellow-700 font-semibold",children:"Lifetime"}):`${de.durationInDays} days`]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${de.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:de.isActive?"Active":"Inactive"}),de.isDeleted&&t.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-700",children:"Deleted"})]})]}),de.perks?.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:de.perks.map((pt,yt)=>t.jsx("span",{className:"px-2 py-1 text-xs rounded bg-gray-100 text-gray-700",children:pt},yt))}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>Ds(de),className:"flex-1 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg hover:bg-gray-800 flex items-center justify-center gap-1",children:[t.jsx(Es,{className:"h-3.5 w-3.5"}),"Edit"]}),t.jsx("button",{onClick:()=>Ct(de._id),className:"px-3 py-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100",children:t.jsx(ir,{className:"h-3.5 w-3.5"})})]})]},de._id))})]})]})]}),t.jsx(Pt,{isOpen:$,onClose:()=>{F(!1),_(null),zr()},title:"Edit membership plan",size:"lg",children:t.jsxs("form",{onSubmit:Un,className:"space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[t.jsx("input",{type:"text",value:d.name,onChange:de=>h({...d,name:de.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Plan name"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx("input",{type:"checkbox",checked:d.durationInDays===0||d.durationInDays==="0"||d.durationInDays===null||d.durationInDays==="",onChange:de=>{de.target.checked?h({...d,durationInDays:"0"}):h({...d,durationInDays:""})},className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(hi,{className:"h-4 w-4 text-yellow-600",fill:"currentColor"}),"Lifetime Membership (Never Expires)"]})]}),!(d.durationInDays===0||d.durationInDays==="0"||d.durationInDays===null||d.durationInDays==="")&&t.jsx("input",{type:"number",min:"1",value:d.durationInDays,onChange:de=>h({...d,durationInDays:de.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Duration in days"})]}),t.jsx("input",{type:"number",min:"0",value:d.price,onChange:de=>h({...d,price:de.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Price"}),t.jsx("input",{type:"number",min:"0",value:d.compareAtPrice,onChange:de=>h({...d,compareAtPrice:de.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Compare at price"}),t.jsx("input",{type:"number",min:"1",value:d.displayOrder,onChange:de=>h({...d,displayOrder:de.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Display order"}),t.jsx("input",{type:"number",min:"0",value:d.maxPurchases,onChange:de=>h({...d,maxPurchases:de.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Max purchases"})]}),t.jsx("textarea",{rows:3,value:d.description,onChange:de=>h({...d,description:de.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Description"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx("input",{type:"checkbox",checked:d.isActive,onChange:de=>h({...d,isActive:de.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),"Active"]}),t.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx("input",{type:"checkbox",checked:d.isFeatured,onChange:de=>h({...d,isFeatured:de.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),"Featured"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.jsx("input",{type:"text",value:d.perkInput,onChange:de=>h({...d,perkInput:de.target.value}),onKeyDown:de=>{de.key==="Enter"&&(de.preventDefault(),$e())},placeholder:"Add perk",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),t.jsxs("button",{type:"button",onClick:$e,className:"inline-flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800",children:[t.jsx(fr,{className:"h-4 w-4"}),"Add perk"]})]}),d.perks.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:d.perks.map(de=>t.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gray-100 text-gray-800 text-sm",children:[de,t.jsx("button",{type:"button",onClick:()=>At(de),className:"text-gray-500 hover:text-gray-700",children:"x"})]},de))})]}),t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx("button",{type:"button",onClick:()=>{F(!1),_(null),zr()},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Close"}),t.jsxs("button",{type:"submit",disabled:A,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[A?t.jsx(st,{className:"h-4 w-4 animate-spin"}):t.jsx(kl,{className:"h-4 w-4"}),"Save changes"]})]})]})}),t.jsx(Pt,{isOpen:at,onClose:()=>{dt(!1),Ce(null),xe("")},title:"Extend membership",children:t.jsxs("form",{onSubmit:jn,className:"space-y-3",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:["Extend ",Ve?.membershipPlanId?.name," for ",Ve?.phone]}),t.jsx("input",{type:"number",min:"1",value:Ke,onChange:de=>xe(de.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Additional days"}),t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx("button",{type:"button",onClick:()=>{dt(!1),Ce(null),xe("")},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Close"}),t.jsxs("button",{type:"submit",disabled:Ge,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[Ge?t.jsx(st,{className:"h-4 w-4 animate-spin"}):t.jsx(vb,{className:"h-4 w-4"}),"Extend"]})]})]})}),t.jsx(Pt,{isOpen:Nt,onClose:()=>{Qe(!1),Ce(null),pe("")},title:"Cancel membership",children:t.jsxs("form",{onSubmit:ei,className:"space-y-3",children:[t.jsx("textarea",{rows:3,value:Ee,onChange:de=>pe(de.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Cancellation reason"}),t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx("button",{type:"button",onClick:()=>{Qe(!1),Ce(null),pe("")},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Close"}),t.jsxs("button",{type:"submit",disabled:Ge,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-60",children:[Ge?t.jsx(st,{className:"h-4 w-4 animate-spin"}):t.jsx(Rt,{className:"h-4 w-4"}),"Cancel membership"]})]})]})}),t.jsx(Pt,{isOpen:ct,onClose:()=>{ze(!1),Ce(null),me("")},title:"Update admin notes",size:"lg",children:t.jsxs("form",{onSubmit:vs,className:"space-y-3",children:[t.jsx("textarea",{rows:4,value:Fe,onChange:de=>me(de.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Add admin notes"}),t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx("button",{type:"button",onClick:()=>{ze(!1),Ce(null),me("")},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Close"}),t.jsxs("button",{type:"submit",disabled:Ge,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[Ge?t.jsx(st,{className:"h-4 w-4 animate-spin"}):t.jsx(ad,{className:"h-4 w-4"}),"Save notes"]})]})]})}),t.jsx(xs,{isOpen:!!ft,onClose:()=>Kt(null),onConfirm:On,title:"Delete membership",message:"This will remove the membership record. This action cannot be undone.",confirmText:"Delete membership",variant:"danger",isLoading:Ge}),t.jsx(Pt,{isOpen:Ae,onClose:()=>{tt(!1),_t(null),as()},title:Cr?"Edit Feature Pricing":"Create Feature Pricing",size:"lg",children:t.jsxs("form",{onSubmit:Cr?Yr:ut,className:"space-y-4",children:[jr.submit&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-red-700 text-sm",children:jr.submit}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[t.jsx("div",{className:"md:col-span-2",children:t.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 mb-2",children:[t.jsx("input",{type:"checkbox",checked:Ye.isBundle,onChange:de=>xt({...Ye,isBundle:de.target.checked}),disabled:!!Cr,className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),t.jsx($a,{className:"h-4 w-4"}),"This is a bundle (multiple features)"]})}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Feature Key ",Cr&&"(cannot be changed)"]}),t.jsx("input",{type:"text",value:Ye.featureKey,onChange:de=>xt({...Ye,featureKey:de.target.value}),required:!0,disabled:!!Cr,placeholder:"e.g., ADVANCED_ANALYTICS",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 uppercase"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),t.jsx("input",{type:"text",value:Ye.name,onChange:de=>xt({...Ye,name:de.target.value}),required:!0,placeholder:"Advanced Analytics",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{value:Ye.description,onChange:de=>xt({...Ye,description:de.target.value}),rows:3,placeholder:"Unlock powerful analytics and reporting tools",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ()"}),t.jsx("input",{type:"number",min:"0",step:"0.01",value:Ye.price,onChange:de=>xt({...Ye,price:de.target.value}),required:!0,placeholder:"999",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compare At Price ()"}),t.jsx("input",{type:"number",min:"0",step:"0.01",value:Ye.compareAtPrice,onChange:de=>xt({...Ye,compareAtPrice:de.target.value}),placeholder:"1499",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 mb-2",children:[t.jsx("input",{type:"checkbox",checked:Ye.isLifetime,onChange:de=>xt({...Ye,isLifetime:de.target.checked,durationInDays:de.target.checked?"0":"30"}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),t.jsx(hi,{className:"h-4 w-4 text-yellow-600",fill:"currentColor"}),"Lifetime Access"]}),!Ye.isLifetime&&t.jsxs(t.Fragment,{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (days)"}),t.jsx("input",{type:"number",min:"1",value:Ye.durationInDays,onChange:de=>xt({...Ye,durationInDays:de.target.value}),required:!Ye.isLifetime,placeholder:"30",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Order"}),t.jsx("input",{type:"number",min:"1",value:Ye.displayOrder,onChange:de=>xt({...Ye,displayOrder:de.target.value}),placeholder:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),Ye.isBundle&&t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Included Features (comma-separated feature keys)"}),t.jsx("input",{type:"text",value:Ye.includedFeatures.join(", "),onChange:de=>xt({...Ye,includedFeatures:de.target.value.split(",").map(pt=>pt.trim().toUpperCase()).filter(Boolean)}),placeholder:"FEATURE_ONE, FEATURE_TWO, FEATURE_THREE",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none uppercase"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Perks/Benefits"}),t.jsxs("div",{className:"space-y-2",children:[Ye.perks.map((de,pt)=>t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:de,onChange:yt=>Ca(pt,yt.target.value),placeholder:`Perk ${pt+1}`,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),Ye.perks.length>1&&t.jsx("button",{type:"button",onClick:()=>Ei(pt),className:"px-3 py-2 text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100",children:t.jsx(Rt,{className:"h-4 w-4"})})]},pt)),t.jsxs("button",{type:"button",onClick:hn,className:"inline-flex items-center gap-2 px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:[t.jsx(fr,{className:"h-4 w-4"}),"Add Perk"]})]})]}),t.jsxs("div",{className:"md:col-span-2 flex items-center gap-4",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx("input",{type:"checkbox",checked:Ye.isActive,onChange:de=>xt({...Ye,isActive:de.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),"Active (visible to users)"]}),t.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx("input",{type:"checkbox",checked:Ye.isFeatured,onChange:de=>xt({...Ye,isFeatured:de.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),t.jsx(hi,{className:"h-4 w-4 text-amber-500"}),"Featured"]})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 border-t",children:[t.jsx("button",{type:"button",onClick:()=>{tt(!1),_t(null),as()},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:Ge,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[Ge?t.jsx(st,{className:"h-4 w-4 animate-spin"}):Cr?t.jsx(kl,{className:"h-4 w-4"}):t.jsx(fr,{className:"h-4 w-4"}),Cr?"Save Changes":"Create"]})]})]})}),t.jsx(xs,{isOpen:!!lt,onClose:()=>Ct(null),onConfirm:or,title:"Delete Feature Pricing",message:"This will mark the feature as deleted. Users will not be able to purchase it.",confirmText:"Delete",variant:"danger",isLoading:Ge})]})}function Nme({request:e,onClose:r,onSuccess:s}){const[n,a]=v.useState([]),l=e.couponCode||e.couponId?.code,d=!!l,[h,f]=v.useState({planId:e.requestedPlanId?._id||"",paymentAmount:e.paymentAmount||"",couponCode:l||"",adminNotes:"",sendWhatsApp:!0,alternativePhone:"",alternativeEmail:"",contactPreference:["REGISTERED"]}),[x,p]=v.useState(!1),[b,S]=v.useState(!0),[T,A]=v.useState(""),[P,D]=v.useState({}),[I,L]=v.useState(null),[_,$]=v.useState(""),[F,B]=v.useState(!1),M=d?{originalAmount:e.originalAmount||e.requestedPlanId?.price,discountPercent:e.discountPercent||e.couponId?.discountPercent,discountAmount:e.discountAmount,finalAmount:e.paymentAmount,isCustomerApplied:!0}:null;v.useEffect(()=>{(async()=>{S(!0);try{const le=await vu.getPlans();if(le.success){if(a(le.data.plans||[]),e.requestedPlanId?._id&&!d){const ge=le.data.plans.find(re=>re._id===e.requestedPlanId._id);ge&&f(re=>({...re,paymentAmount:ge.price}))}M&&L(M)}else A("Failed to load membership plans")}catch{A("An error occurred while loading plans")}finally{S(!1)}})()},[e]);const V=W=>{const le=n.find(ge=>ge._id===W);f(ge=>({...ge,planId:W,paymentAmount:le?.price||""})),A(""),L(null),$("")},z=async()=>{const W=h.couponCode.trim();if(!W){$("Please enter a coupon code");return}if(!h.planId){$("Please select a plan first");return}B(!0),$("");try{const le=await Vc.validateForMembership(W,h.planId,e.phone);le.success&&le.data?(L(le.data),f(ge=>({...ge,paymentAmount:le.data.finalAmount||le.data.finalPrice}))):($(le.message||"Invalid coupon code"),L(null))}catch{$("Failed to validate coupon"),L(null)}finally{B(!1)}},H=()=>{const W=n.find(le=>le._id===h.planId);f(le=>({...le,couponCode:"",paymentAmount:W?.price||""})),L(null),$("")},U=W=>W&&W.replace(/\D/g,"").length!==10?"Phone number must be exactly 10 digits":null,G=W=>W?/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(W)?null:"Please enter a valid email address":null,Q=!!(h.alternativePhone.trim()||h.alternativeEmail.trim()),ce=W=>{const le=h.contactPreference;if(le.includes(W)){const ge=le.filter(re=>re!==W);if(ge.length===0){D(re=>({...re,contactPreference:"At least one contact must be selected"}));return}f(re=>({...re,contactPreference:ge})),D(re=>({...re,contactPreference:null}))}else f(ge=>({...ge,contactPreference:[...le,W]})),D(ge=>({...ge,contactPreference:null}))},ne=async()=>{if(A(""),D({}),!h.planId){A("Please select a membership plan");return}if(!h.paymentAmount||h.paymentAmount<0){A("Please enter a valid payment amount");return}const W={};if(h.alternativePhone.trim()){const le=U(h.alternativePhone.trim());le&&(W.alternativePhone=le)}if(h.alternativeEmail.trim()){const le=G(h.alternativeEmail.trim());le&&(W.alternativeEmail=le)}if(h.contactPreference.length===0&&(W.contactPreference="Please select at least one contact to send the payment link"),h.contactPreference.includes("ALTERNATIVE")&&!Q&&(W.contactPreference="Please provide alternative phone or email to send to alternative contact"),Object.keys(W).length>0){D(W);return}p(!0);try{const le={planId:h.planId,paymentAmount:Number(h.paymentAmount),adminNotes:h.adminNotes.trim()||void 0,sendWhatsApp:h.sendWhatsApp};h.couponCode.trim()&&(le.couponCode=h.couponCode.trim().toUpperCase()),h.alternativePhone.trim()&&(le.alternativePhone=h.alternativePhone.replace(/\D/g,"")),h.alternativeEmail.trim()&&(le.alternativeEmail=h.alternativeEmail.toLowerCase().trim()),le.contactPreference=h.contactPreference;const ge=await vu.approve(e._id,le);ge.success?(s(),r()):A(ge.message||"Failed to approve request")}catch{A("An error occurred while approving the request")}finally{p(!1)}},J=n.find(W=>W._id===h.planId);return t.jsx(Pt,{isOpen:!0,onClose:r,title:"Approve Membership Request",size:"lg",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Applicant Information"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(gr,{className:"h-4 w-4 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Name"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.name})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(hs,{className:"h-4 w-4 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.phone})]})]})]}),e.isExistingUser&&e.existingUserInfo&&t.jsxs("div",{className:"mt-4 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(tn,{className:"h-4 w-4 text-purple-600"}),t.jsx("p",{className:"font-semibold text-purple-900",children:"Existing User"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[t.jsx("div",{children:t.jsxs("p",{className:"text-purple-700",children:["Email: ",e.existingUserInfo.email||"N/A"]})}),t.jsx("div",{children:t.jsxs("p",{className:"text-purple-700",children:["Enrollments: ",e.existingUserInfo.enrollmentCount||0]})})]})]}),d&&t.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(on,{className:"h-4 w-4 text-green-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-green-900",children:"Customer Applied Coupon"}),t.jsxs("p",{className:"text-sm text-green-700",children:["Code: ",t.jsx("span",{className:"font-mono font-bold uppercase",children:l}),e.discountAmount>0&&t.jsxs(t.Fragment,{children:["  Savings: ",e.discountAmount?.toLocaleString("en-IN")]})]})]})]})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Membership Plan ",t.jsx("span",{className:"text-red-500",children:"*"})]}),b?t.jsx("div",{className:"flex items-center justify-center py-4",children:t.jsx(st,{className:"h-5 w-5 animate-spin text-gray-400"})}):t.jsxs("select",{value:h.planId,onChange:W=>V(W.target.value),disabled:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"Select a plan"}),n.filter(W=>W.isAvailable).map(W=>t.jsxs("option",{value:W._id,children:[W.name," - ",W.price.toLocaleString("en-IN")," (",W.durationInDays," ","days)"]},W._id))]}),J&&t.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(vp,{className:"h-5 w-5 text-yellow-500 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-semibold text-gray-900",children:J.name}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:J.description}),J.perks&&J.perks.length>0&&t.jsx("ul",{className:"mt-2 space-y-1",children:J.perks.map((W,le)=>t.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-1",children:[t.jsx("span",{className:"text-green-500 mt-0.5",children:""}),W]},le))})]})]})}),e.requestedPlanId&&J&&J._id!==e.requestedPlanId._id&&t.jsx("div",{className:"mt-3 p-3 bg-amber-50 border border-amber-300 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(Tt,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-semibold text-amber-900 mb-2",children:"Plan Changed"}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsxs("span",{className:"text-amber-800",children:[t.jsx("strong",{children:"Requested:"})," ",e.requestedPlanId.name]}),t.jsx(dz,{className:"h-4 w-4 text-amber-600"}),t.jsxs("span",{className:"text-amber-900 font-semibold",children:[t.jsx("strong",{children:"Approving:"})," ",J.name]})]})]})]})})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Coupon Code ",t.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),d&&t.jsx("span",{className:"text-xs font-medium text-blue-700 bg-blue-100 px-2 py-0.5 rounded-md border border-blue-200",children:"Applied by Customer"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(on,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:h.couponCode,onChange:W=>{f(le=>({...le,couponCode:W.target.value.toUpperCase()})),L(null),$("")},disabled:x,placeholder:"Enter coupon code",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 uppercase"})]}),I?t.jsxs("button",{type:"button",onClick:H,disabled:x,className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 transition-colors disabled:opacity-50 flex items-center gap-2",children:[t.jsx(Rt,{className:"h-4 w-4"}),"Clear"]}):t.jsx("button",{type:"button",onClick:z,disabled:x||F||!h.couponCode.trim()||!h.planId,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:F?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Checking..."]}):"Apply"})]}),_&&t.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600",children:[t.jsx(Rt,{className:"h-4 w-4"}),t.jsx("p",{className:"text-sm",children:_})]}),I&&t.jsx("div",{className:`mt-3 p-3 rounded-lg ${I.isCustomerApplied?"bg-blue-50 border border-blue-200":"bg-green-50 border border-green-200"}`,children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(ar,{className:`h-5 w-5 mt-0.5 ${I.isCustomerApplied?"text-blue-600":"text-green-600"}`}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:`font-semibold ${I.isCustomerApplied?"text-blue-900":"text-green-900"}`,children:I.isCustomerApplied?"Customer Applied Coupon":"Coupon Applied!"}),I.isCustomerApplied&&t.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"This coupon was applied by the customer during request submission"}),t.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Original Price:"}),t.jsxs("span",{className:"text-gray-900",children:["",(I.originalAmount||J?.price)?.toLocaleString("en-IN")]})]}),(I.discountPercent||I.coupon?.discountPercent)&&t.jsxs("div",{className:`flex justify-between ${I.isCustomerApplied?"text-blue-700":"text-green-700"}`,children:[t.jsxs("span",{children:["Discount (",I.discountPercent||I.coupon?.discountPercent,"%):"]}),t.jsxs("span",{children:["-",(I.discountAmount||I.discount)?.toLocaleString("en-IN")]})]}),t.jsxs("div",{className:`flex justify-between font-semibold pt-1 border-t ${I.isCustomerApplied?"border-blue-200":"border-green-200"}`,children:[t.jsx("span",{className:I.isCustomerApplied?"text-blue-900":"text-green-900",children:"Final Amount:"}),t.jsxs("span",{className:I.isCustomerApplied?"text-blue-900":"text-green-900",children:["",(I.finalAmount||I.finalPrice)?.toLocaleString("en-IN")]})]})]})]})]})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Amount () ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",min:"0",step:"1",value:h.paymentAmount,onChange:W=>f(le=>({...le,paymentAmount:W.target.value})),disabled:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"Enter payment amount"}),t.jsxs("div",{className:"flex items-start justify-between mt-1",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"You can adjust the amount for discounts or special pricing"}),J&&h.paymentAmount&&Number(h.paymentAmount)!==J.price&&t.jsx("span",{className:"text-xs font-medium text-blue-700 bg-blue-100 px-2 py-0.5 rounded",children:"Custom Pricing"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin Notes ",t.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),t.jsx("textarea",{value:h.adminNotes,onChange:W=>f(le=>({...le,adminNotes:W.target.value})),disabled:x,maxLength:500,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Internal notes (not visible to user)"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[h.adminNotes.length,"/500 characters"]})]}),t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(zu,{className:"h-5 w-5 text-gray-700"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Payment Link Delivery"})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:t.jsxs("p",{className:"text-xs text-blue-800",children:[t.jsx("strong",{children:"Tip:"})," You can send payment links to alternative contacts in addition to or instead of the registered contact. Simply provide an alternative phone or email below."]})}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Alternative Phone Number ",t.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(hs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:h.alternativePhone,onChange:W=>{f(le=>({...le,alternativePhone:W.target.value})),D(le=>({...le,alternativePhone:null}))},disabled:x,maxLength:10,placeholder:"9876543210",className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${P.alternativePhone?"border-red-300 bg-red-50":"border-gray-300"}`})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"10-digit Indian phone number without country code"}),P.alternativePhone&&t.jsxs("p",{className:"flex items-center gap-1 text-xs text-red-600 mt-1",children:[t.jsx(Rt,{className:"h-3 w-3"}),P.alternativePhone]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Alternative Email ",t.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Ji,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"email",value:h.alternativeEmail,onChange:W=>{f(le=>({...le,alternativeEmail:W.target.value})),D(le=>({...le,alternativeEmail:null}))},disabled:x,placeholder:"alternative@example.com",className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${P.alternativeEmail?"border-red-300 bg-red-50":"border-gray-300"}`})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Payment link will be sent to this email address"}),P.alternativeEmail&&t.jsxs("p",{className:"flex items-center gap-1 text-xs text-red-600 mt-1",children:[t.jsx(Rt,{className:"h-3 w-3"}),P.alternativeEmail]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Send Payment Link To: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:`flex items-start gap-3 p-3 border rounded-lg cursor-pointer transition-colors ${h.contactPreference.includes("REGISTERED")?"bg-blue-50 border-blue-300":"bg-white border-gray-300 hover:bg-gray-50"}`,children:[t.jsx("input",{type:"checkbox",checked:h.contactPreference.includes("REGISTERED"),onChange:()=>ce("REGISTERED"),disabled:x,className:"w-4 h-4 text-blue-600 rounded focus:ring-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Registered contact"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["WhatsApp: ",e.phone]})]})]}),t.jsxs("label",{className:`flex items-start gap-3 p-3 border rounded-lg transition-colors ${Q?h.contactPreference.includes("ALTERNATIVE")?"bg-blue-50 border-blue-300 cursor-pointer":"bg-white border-gray-300 hover:bg-gray-50 cursor-pointer":"opacity-50 cursor-not-allowed bg-gray-100 border-gray-200"}`,children:[t.jsx("input",{type:"checkbox",checked:h.contactPreference.includes("ALTERNATIVE"),onChange:()=>ce("ALTERNATIVE"),disabled:x||!Q,className:"w-4 h-4 text-blue-600 rounded focus:ring-0 mt-0.5 disabled:cursor-not-allowed"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Alternative contact"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:Q?`${h.alternativePhone?"WhatsApp: "+h.alternativePhone:""}${h.alternativePhone&&h.alternativeEmail?", ":""}${h.alternativeEmail?"Email: "+h.alternativeEmail:""}`:"Provide phone or email above to enable"})]})]})]}),P.contactPreference&&t.jsxs("p",{className:"flex items-center gap-1 text-xs text-red-600 mt-2",children:[t.jsx(Tt,{className:"h-3 w-3"}),P.contactPreference]})]}),t.jsx("div",{className:"pt-2 border-t border-gray-200",children:t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",id:"sendWhatsApp",checked:h.sendWhatsApp,onChange:W=>f(le=>({...le,sendWhatsApp:W.target.checked})),disabled:x,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Send payment link via WhatsApp"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Automatically send WhatsApp message to selected contacts"})]})]})})]}),T&&t.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5"}),t.jsx("p",{className:"text-sm",children:T})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{onClick:r,disabled:x,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{onClick:ne,disabled:x||b,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[x&&t.jsx(st,{className:"h-4 w-4 animate-spin"}),x?"Approving...":"Approve & Send Link"]})]})]})})}function jme({request:e,onClose:r,onSuccess:s}){const[n,a]=v.useState({rejectionReason:"",adminNotes:""}),[l,d]=v.useState(!1),[h,f]=v.useState(""),x=async()=>{if(!n.rejectionReason.trim()){f("Rejection reason is required");return}d(!0),f("");try{const p=await vu.reject(e._id,{rejectionReason:n.rejectionReason.trim(),adminNotes:n.adminNotes.trim()||void 0});p.success?(s(),r()):f(p.message||"Failed to reject request")}catch{f("An error occurred while rejecting the request")}finally{d(!1)}};return t.jsx(Pt,{isOpen:!0,onClose:r,title:"Reject Membership Request",size:"md",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx(Rt,{className:"h-5 w-5 text-red-600 mt-0.5 shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-red-900",children:"Confirm Rejection"}),t.jsx("p",{className:"text-sm text-red-700 mt-1",children:"This action will reject the membership application. The user will be notified with the rejection reason you provide."})]})]}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Applicant Information"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(gr,{className:"h-4 w-4 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Name"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.name})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(hs,{className:"h-4 w-4 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.phone})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rejection Reason ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:n.rejectionReason,onChange:p=>a(b=>({...b,rejectionReason:p.target.value})),disabled:l,maxLength:500,rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Enter the reason for rejection (this will be shown to the user)",required:!0}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[n.rejectionReason.length,"/500 characters  This will be visible to the user"]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin Notes ",t.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional, Internal Only)"})]}),t.jsx("textarea",{value:n.adminNotes,onChange:p=>a(b=>({...b,adminNotes:p.target.value})),disabled:l,maxLength:500,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Internal notes (not visible to user)"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[n.adminNotes.length,"/500 characters  Internal use only"]})]}),h&&t.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5"}),t.jsx("p",{className:"text-sm",children:h})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{onClick:r,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{onClick:x,disabled:l,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[l&&t.jsx(st,{className:"h-4 w-4 animate-spin"}),l?"Rejecting...":"Reject Request"]})]})]})})}const a0=e=>e?new Date(e).toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",yO={PENDING:{label:"Pending Review",bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-300",icon:Xt},PAYMENT_SENT:{label:"Payment Link Sent",bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300",icon:sm},COMPLETED:{label:"Completed",bg:"bg-green-100",text:"text-green-700",border:"border-green-300",icon:ar},REJECTED:{label:"Rejected",bg:"bg-red-100",text:"text-red-700",border:"border-red-300",icon:Rt},WITHDRAWN:{label:"Withdrawn by User",bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300",icon:Rt}};function wme({request:e,onClose:r,onApprove:s,onReject:n,onResendLink:a}){const l=yO[e.status]||yO.PENDING,d=l.icon;return t.jsx(Pt,{isOpen:!0,onClose:r,title:"Membership Request Details",size:"xl",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg border ${l.bg} ${l.text} ${l.border}`,children:[t.jsx(d,{className:"h-5 w-5"}),t.jsx("span",{className:"font-semibold",children:l.label})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[e.status==="PENDING"&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>{r(),s(e)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[t.jsx(ar,{className:"h-4 w-4"}),"Approve"]}),t.jsxs("button",{onClick:()=>{r(),n(e)},className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[t.jsx(Rt,{className:"h-4 w-4"}),"Reject"]})]}),e.status==="PAYMENT_SENT"&&t.jsxs("button",{onClick:()=>{a(e)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(zu,{className:"h-4 w-4"}),"Resend Link"]})]})]}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-4",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[t.jsx(gr,{className:"h-5 w-5"}),"Applicant Information"]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-white rounded-lg",children:t.jsx(gr,{className:"h-5 w-5 text-gray-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Full Name"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.name})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-white rounded-lg",children:t.jsx(hs,{className:"h-5 w-5 text-gray-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Phone Number"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.phone})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-white rounded-lg",children:t.jsx(Xt,{className:"h-5 w-5 text-gray-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Submitted On"}),t.jsx("p",{className:"font-medium text-gray-900",children:a0(e.createdAt)})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-white rounded-lg",children:t.jsx(Xt,{className:"h-5 w-5 text-gray-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Last Updated"}),t.jsx("p",{className:"font-medium text-gray-900",children:a0(e.updatedAt)})]})]})]})]}),e.isExistingUser&&e.existingUserInfo&&t.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(tn,{className:"h-5 w-5 text-purple-600"}),t.jsx("h3",{className:"font-semibold text-purple-900",children:"Existing User"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-purple-700",children:"Email"}),t.jsx("p",{className:"font-medium text-purple-900",children:e.existingUserInfo.email||"Not available"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-purple-700",children:"User ID"}),t.jsx("p",{className:"font-mono text-sm text-purple-900",children:e.existingUserInfo._id})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-purple-700",children:"Event Enrollments"}),t.jsx("p",{className:"font-medium text-purple-900",children:e.existingUserInfo.enrollmentCount||0})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-purple-700",children:"Registered On"}),t.jsx("p",{className:"font-medium text-purple-900",children:a0(e.existingUserInfo.registeredAt)})]})]})]}),e.requestedPlanId&&t.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(vp,{className:"h-5 w-5 text-yellow-500"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Requested Membership Plan"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Plan Name"}),t.jsx("p",{className:"font-semibold text-gray-900",children:e.requestedPlanId.name})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Price"}),t.jsxs("p",{className:"font-semibold text-gray-900",children:["",e.requestedPlanId.price?.toLocaleString("en-IN")]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Duration"}),t.jsx("p",{className:"font-semibold text-gray-900",children:e.requestedPlanId.durationInDays===0||e.requestedPlanId.durationInDays===null?" Lifetime":`${e.requestedPlanId.durationInDays} days`})]})]}),e.requestedPlanId.description&&t.jsx("p",{className:"text-sm text-gray-700",children:e.requestedPlanId.description}),e.requestedPlanId.perks&&e.requestedPlanId.perks.length>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Plan Perks"}),t.jsx("ul",{className:"space-y-1",children:e.requestedPlanId.perks.map((h,f)=>t.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[t.jsx("span",{className:"text-green-500 mt-0.5",children:""}),h]},f))})]})]}),(()=>{const h=!!(e.couponCode||e.couponId),f=e.couponCode||e.couponId?.code,x=e.discountPercent||e.couponId?.discountPercent,p=e.originalAmount||e.approvedPlanId?.price||e.requestedPlanId?.price,b=e.discountAmount||(p&&e.paymentAmount?p-e.paymentAmount:0);return!(b>0)&&!h?null:t.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(on,{className:"h-5 w-5 text-green-600"}),t.jsx("h3",{className:"font-semibold text-green-900",children:"Discount Applied"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[f&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-green-700",children:"Coupon Code"}),t.jsx("p",{className:"font-mono font-semibold text-green-900 uppercase",children:f})]}),b>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-green-700",children:"Discount Amount"}),t.jsxs("p",{className:"font-semibold text-green-900",children:["",b?.toLocaleString("en-IN")]})]}),x&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-green-700",children:"Discount Rate"}),t.jsxs("p",{className:"font-semibold text-green-900 flex items-center gap-1",children:[t.jsx(yu,{className:"h-4 w-4"}),x,"% off"]})]})]}),p&&e.paymentAmount&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-green-200",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-green-700",children:"Original Price:"}),t.jsxs("span",{className:"text-gray-600",children:["",p?.toLocaleString("en-IN")]})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-green-700",children:"Discount:"}),t.jsxs("span",{className:"text-green-600 font-medium",children:["",b?.toLocaleString("en-IN")]})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold mt-1 pt-1 border-t border-green-200",children:[t.jsx("span",{className:"text-green-900",children:"Final Amount:"}),t.jsxs("span",{className:"text-green-900",children:["",e.paymentAmount?.toLocaleString("en-IN")]})]})]})]})})(),e.approvedPlanId&&e.approvedPlanId._id!==e.requestedPlanId?._id&&t.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ar,{className:"h-5 w-5 text-green-600"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Approved Plan (Modified)"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Plan Name"}),t.jsx("p",{className:"font-semibold text-gray-900",children:e.approvedPlanId.name})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Original Price"}),t.jsxs("p",{className:"font-semibold text-gray-900",children:["",e.approvedPlanId.price?.toLocaleString("en-IN")]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Duration"}),t.jsx("p",{className:"font-semibold text-gray-900",children:e.approvedPlanId.durationInDays===0||e.approvedPlanId.durationInDays===null?"Lifetime":`${e.approvedPlanId.durationInDays} days`})]})]})]}),e.status==="WITHDRAWN"&&t.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Rt,{className:"h-5 w-5 text-gray-600"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Withdrawal Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Withdrawn On"}),t.jsx("p",{className:"font-medium text-gray-900",children:a0(e.deletedAt||e.updatedAt)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Status"}),t.jsx("p",{className:"font-medium text-gray-900",children:"User withdrew this request"})]})]}),t.jsxs("div",{className:"p-3 bg-blue-50 rounded text-sm text-blue-800",children:[t.jsx("strong",{children:"Note:"})," The user withdrew this request and may have submitted a new one."]})]}),(e.status==="PAYMENT_SENT"||e.status==="COMPLETED")&&t.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(jj,{className:"h-5 w-5 text-blue-600"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Payment Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Payment Amount"}),t.jsxs("p",{className:"font-semibold text-gray-900",children:["",e.paymentAmount?.toLocaleString("en-IN")]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Order ID"}),t.jsx("p",{className:"font-mono text-sm text-gray-900",children:e.orderId||"N/A"})]})]}),e.paymentUrl&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Payment Link"}),t.jsxs("a",{href:e.paymentUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 text-sm font-medium",children:[t.jsx(sm,{className:"h-4 w-4"}),e.paymentUrl]})]})]}),e.reviewedBy&&t.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(jp,{className:"h-5 w-5 text-gray-600"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Review Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Reviewed By"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.reviewedBy.name||e.reviewedBy.username})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Reviewed On"}),t.jsx("p",{className:"font-medium text-gray-900",children:a0(e.reviewedAt)})]})]}),e.adminNotes&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Admin Notes"}),t.jsx("p",{className:"text-sm text-gray-700 bg-white p-3 rounded border border-gray-200",children:e.adminNotes})]}),e.rejectionReason&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Rejection Reason"}),t.jsx("p",{className:"text-sm text-red-700 bg-red-50 p-3 rounded border border-red-200",children:e.rejectionReason})]})]}),e.userMembershipId&&t.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ar,{className:"h-5 w-5 text-green-600"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-green-900",children:"Membership Granted"}),t.jsxs("p",{className:"text-sm text-green-700",children:["Membership ID: ",t.jsx("span",{className:"font-mono",children:e.userMembershipId})]})]})]})}),t.jsx("div",{className:"pt-4 border-t border-gray-200",children:t.jsxs("p",{className:"text-xs text-gray-500",children:["Request ID: ",t.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-gray-700",children:e._id})]})})]})})}const bO={PENDING:{label:"Pending",bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-300"},PAYMENT_SENT:{label:"Payment Link Sent",bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"},COMPLETED:{label:"Completed",bg:"bg-green-100",text:"text-green-700",border:"border-green-300"},REJECTED:{label:"Rejected",bg:"bg-red-100",text:"text-red-700",border:"border-red-300"},WITHDRAWN:{label:"Withdrawn",bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300"}};function Sme(){const[e,r]=v.useState([]),[s,n]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:20,hasNextPage:!1,hasPrevPage:!1}),[a,l]=v.useState({page:1,limit:20,status:"",search:"",sortBy:"createdAt",sortOrder:"desc"}),[d,h]=v.useState(!0),[f,x]=v.useState(null),[p,b]=v.useState(!1),[S,T]=v.useState(!1),[A,P]=v.useState(!1),[D,I]=v.useState(null),L=v.useCallback(async()=>{h(!0),x(null);try{const Q=await vu.getAll(a);Q.success?(r(Q.data.requests||[]),n(Q.data.pagination||s)):(x(Q.message||"Failed to fetch membership requests"),r([]))}catch{x("An error occurred while fetching requests"),r([])}finally{h(!1)}},[a]);v.useEffect(()=>{L()},[L]);const _=(Q,ce)=>{l(ne=>({...ne,[Q]:ce,page:1}))},$=Q=>{l(ce=>({...ce,page:Q}))},F=Q=>{_("search",Q)},B=Q=>{I(Q),P(!0)},M=Q=>{I(Q),b(!0)},V=Q=>{I(Q),T(!0)},z=async Q=>{if(window.confirm("Resend payment link via WhatsApp?"))try{const ce=await vu.resendPaymentLink(Q._id);ce.success?(alert("Payment link resent successfully"),L()):alert(ce.message||"Failed to resend payment link")}catch{alert("An error occurred while resending the link")}},H=()=>{L()},U=Q=>Q?new Date(Q).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A",G=Q=>{const ce=bO[Q]||bO.PENDING;return t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold border ${ce.bg} ${ce.text} ${ce.border}`,children:ce.label})};return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Membership Requests"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage and review membership applications"})]}),t.jsxs("button",{onClick:L,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50",children:[t.jsx(ms,{className:`h-4 w-4 ${d?"animate-spin":""}`}),"Refresh"]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[t.jsx(Fn,{className:"h-5 w-5"}),"Filters"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(br,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search by phone or name...",value:a.search,onChange:Q=>F(Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("select",{value:a.status,onChange:Q=>_("status",Q.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"PENDING",children:"Pending"}),t.jsx("option",{value:"PAYMENT_SENT",children:"Payment Link Sent"}),t.jsx("option",{value:"COMPLETED",children:"Completed"}),t.jsx("option",{value:"REJECTED",children:"Rejected"}),t.jsx("option",{value:"WITHDRAWN",children:"Withdrawn"})]}),t.jsxs("select",{value:`${a.sortBy}-${a.sortOrder}`,onChange:Q=>{const[ce,ne]=Q.target.value.split("-");l(J=>({...J,sortBy:ce,sortOrder:ne}))},className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"createdAt-desc",children:"Newest First"}),t.jsx("option",{value:"createdAt-asc",children:"Oldest First"}),t.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),t.jsx("option",{value:"name-desc",children:"Name (Z-A)"})]})]})]}),f&&t.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[t.jsx(Tt,{className:"h-5 w-5"}),f]}),d&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 flex items-center justify-center",children:[t.jsx(st,{className:"h-8 w-8 animate-spin text-gray-800"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading requests..."})]}),!d&&e.length===0&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(gr,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No membership requests found"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a.search||a.status?"Try adjusting your filters":"New requests will appear here"})]}),!d&&e.length>0&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Applicant"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Requested Plan"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Submitted On"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:e.map(Q=>{console.log("[MembershipRequest] Coupon fields for",Q.name,":",{couponCode:Q.couponCode,couponId:Q.couponId,discountPercent:Q.discountPercent,discountAmount:Q.discountAmount,originalAmount:Q.originalAmount,paymentAmount:Q.paymentAmount,requestedPlanPrice:Q.requestedPlanId?.price,status:Q.status});const ce=!!(Q.couponCode||Q.couponId),ne=Q.couponCode||Q.couponId?.code,J=Q.discountPercent||Q.couponId?.discountPercent,W=Q.originalAmount||Q.approvedPlanId?.price||Q.requestedPlanId?.price,le=Q.discountAmount||(W&&Q.paymentAmount?W-Q.paymentAmount:0),ge=le>0;return t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(gr,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"font-medium text-gray-900",children:Q.name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(hs,{className:"h-3.5 w-3.5 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-600",children:Q.phone})]}),Q.isExistingUser&&t.jsx("span",{className:"inline-flex items-center w-fit px-2 py-0.5 rounded-md text-xs font-medium bg-purple-100 text-purple-700 border border-purple-200",children:"Existing User"})]})}),t.jsx("td",{className:"px-6 py-4",children:Q.requestedPlanId?t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(vp,{className:"h-4 w-4 text-yellow-500 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:Q.requestedPlanId.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:["",Q.requestedPlanId.price?.toLocaleString("en-IN"),"  ",Q.requestedPlanId.durationInDays===0||Q.requestedPlanId.durationInDays===null?" Lifetime":`${Q.requestedPlanId.durationInDays} days`]})]})]}),ge&&t.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 ml-6",children:[t.jsx(on,{className:"h-3.5 w-3.5 text-green-600"}),ce&&ne&&t.jsx("span",{className:"text-xs font-mono font-bold text-green-800 bg-green-100 px-2 py-0.5 rounded-md border border-green-300 uppercase",children:ne}),t.jsxs("span",{className:"text-xs font-medium text-green-700 bg-green-50 px-2 py-0.5 rounded-md border border-green-200",children:[J&&`${J}%  `,"",le.toLocaleString("en-IN")]})]}),ge&&Q.paymentAmount&&t.jsxs("p",{className:"text-xs font-medium text-gray-700 ml-6",children:["Final: ",Q.paymentAmount.toLocaleString("en-IN")]}),Q.approvedPlanId&&Q.approvedPlanId._id!==Q.requestedPlanId._id&&t.jsxs("div",{className:"pl-6 border-l-2 border-green-300",children:[t.jsx("p",{className:"text-xs font-medium text-green-700 mb-1",children:" Approved Plan"}),t.jsx("p",{className:"font-medium text-gray-900 text-sm",children:Q.approvedPlanId.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:["",(Q.paymentAmount||Q.approvedPlanId.price)?.toLocaleString("en-IN"),"  ",Q.approvedPlanId.durationInDays===0||Q.approvedPlanId.durationInDays===null?" Lifetime":`${Q.approvedPlanId.durationInDays} days`]})]})]}):t.jsx("span",{className:"text-sm text-gray-500",children:"No plan selected"})}),t.jsx("td",{className:"px-6 py-4",children:G(Q.status)}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.jsx(Xt,{className:"h-4 w-4"}),U(Q.createdAt)]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx("button",{onClick:()=>B(Q),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:t.jsx(Or,{className:"h-4 w-4"})}),Q.status==="PENDING"&&t.jsx("button",{onClick:()=>M(Q),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve Request",children:t.jsx(ar,{className:"h-4 w-4"})}),Q.status==="PENDING"&&t.jsx("button",{onClick:()=>V(Q),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject Request",children:t.jsx(Rt,{className:"h-4 w-4"})}),Q.status==="PAYMENT_SENT"&&t.jsx("button",{onClick:()=>z(Q),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Resend Payment Link",children:t.jsx(zu,{className:"h-4 w-4"})})]})})]},Q._id)})})]})}),t.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:t.jsx(vr,{currentPage:s.currentPage,totalPages:s.totalPages,onPageChange:$,totalCount:s.totalCount,itemsPerPage:s.limit})})]}),p&&D&&t.jsx(Nme,{request:D,onClose:()=>{b(!1),I(null)},onSuccess:H}),S&&D&&t.jsx(jme,{request:D,onClose:()=>{T(!1),I(null)},onSuccess:H}),A&&D&&t.jsx(wme,{request:D,onClose:()=>{P(!1),I(null)},onApprove:M,onReject:V,onResendLink:z})]})}const Lc={CLUBS:"/web/clubs",CONNECT_CLUBS:"/app/connect/clubs"},Vo={createClub:async e=>(console.log("[ClubsService] Creating club"),Se(je.post(Lc.CLUBS,e))),getClubs:async(e={})=>(console.log("[ClubsService] Fetching clubs with params:",e),Se(je.get(Lc.CLUBS,{params:e}))),getClubById:async e=>(console.log("[ClubsService] Fetching club:",e),Se(je.get(`${Lc.CLUBS}/${e}`))),updateClub:async(e,r)=>(console.log("[ClubsService] Updating club:",e),Se(je.put(`${Lc.CLUBS}/${e}`,r))),deleteClub:async e=>(console.log("[ClubsService] Deleting club:",e),Se(je.delete(`${Lc.CLUBS}/${e}`))),getClubStats:async e=>(console.log("[ClubsService] Fetching club stats:",e),Se(je.get(`${Lc.CLUBS}/${e}/stats`))),getClubMembers:async(e,r={})=>(console.log("[ClubsService] Fetching club members:",e),Se(je.get(`${Lc.CONNECT_CLUBS}/${e}/members`,{params:r})))};function vO({value:e,onChange:r,disabled:s=!1}){const[n,a]=v.useState(e||["MEMBERS"]);v.useEffect(()=>{e&&a(e)},[e]);const l=h=>{if(s)return;let f;h==="ANYONE"?f=n.includes("ANYONE")?[]:["ANYONE"]:(f=n.filter(x=>x!=="ANYONE"),f.includes(h)?f=f.filter(x=>x!==h):f.push(h)),f.length===0&&(f=["MEMBERS"]),a(f),r(f)},d=n.includes("ANYONE");return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-sm font-semibold text-gray-900",children:["Who Can Post ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:`flex items-center gap-3 p-3 border-2 rounded-lg cursor-pointer transition-all ${n.includes("ANYONE")?"border-green-500 bg-green-50":"border-gray-300 hover:border-gray-400 bg-white"} ${s?"opacity-60 cursor-not-allowed":""}`,children:[t.jsx("input",{type:"checkbox",checked:n.includes("ANYONE"),onChange:()=>l("ANYONE"),disabled:s,className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),t.jsx(S0,{className:`h-4 w-4 ${n.includes("ANYONE")?"text-green-600":"text-gray-500"}`}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Anyone"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Any authenticated user can post (no membership required)"})]})]}),t.jsxs("label",{className:`flex items-center gap-3 p-3 border-2 rounded-lg cursor-pointer transition-all ${n.includes("MEMBERS")?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 bg-white"} ${s||d?"opacity-60 cursor-not-allowed":""}`,children:[t.jsx("input",{type:"checkbox",checked:n.includes("MEMBERS"),onChange:()=>l("MEMBERS"),disabled:s||d,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),t.jsx(ox,{className:`h-4 w-4 ${n.includes("MEMBERS")?"text-blue-600":"text-gray-500"}`}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Members"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Only approved club members can post"})]})]}),t.jsxs("label",{className:`flex items-center gap-3 p-3 border-2 rounded-lg cursor-pointer transition-all ${n.includes("ADMIN")?"border-red-500 bg-red-50":"border-gray-300 hover:border-gray-400 bg-white"} ${s||d?"opacity-60 cursor-not-allowed":""}`,children:[t.jsx("input",{type:"checkbox",checked:n.includes("ADMIN"),onChange:()=>l("ADMIN"),disabled:s||d,className:"w-4 h-4 text-red-600 bg-gray-100 border-gray-300 rounded focus:ring-red-500"}),t.jsx(Ej,{className:`h-4 w-4 ${n.includes("ADMIN")?"text-red-600":"text-gray-500"}`}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Admins"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Only system administrators can post"})]})]})]}),t.jsx("div",{className:"text-xs text-gray-500 mt-2",children:d?t.jsx("span",{className:"text-green-600",children:" Anyone can post - MEMBERS and ADMIN are disabled"}):t.jsx("span",{children:"You can select multiple options (ADMIN + MEMBERS)"})})]})}function p9({permissions:e}){const r=Array.isArray(e)?e:["MEMBERS"],s={ANYONE:{label:"Open Posting",icon:S0,className:"bg-green-100 text-green-700 border-green-300"},MEMBERS:{label:"Members",icon:ox,className:"bg-blue-100 text-blue-700 border-blue-300"},ADMIN:{label:"Admins",icon:Ej,className:"bg-red-100 text-red-700 border-red-300"}};return t.jsx("div",{className:"flex items-center gap-1.5 flex-wrap",children:r.map(n=>{const a=s[n];if(!a)return null;const l=a.icon;return t.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-md border ${a.className}`,children:[t.jsx(l,{className:"h-3 w-3"}),a.label]},n)})})}const NO={name:"",description:"",thumbnail:"",requiresApproval:!1,postPermissions:["MEMBERS"]},jO={currentPage:1,totalPages:0,totalCount:0,limit:10};function Cme(){const{hasRole:e}=vn(),r=e(["SUPER_ADMIN","ADMIN"]),[s,n]=v.useState("clubs"),[a,l]=v.useState([]),[d,h]=v.useState(NO),[f,x]=v.useState({search:""}),[p,b]=v.useState({...jO,limit:12}),[S,T]=v.useState(!1),[A,P]=v.useState(!1),[D,I]=v.useState(null),[L,_]=v.useState(null),[$,F]=v.useState(!1),[B,M]=v.useState(null),[V,z]=v.useState(null),[H,U]=v.useState(!1),[G,Q]=v.useState(!1),[ce,ne]=v.useState(null),[J,W]=v.useState([]),[le,ge]=v.useState(jO),[re,X]=v.useState(!1),[ae,ve]=v.useState(null),fe=async(me=1)=>{T(!0),I(null);const Ge={page:me,limit:p.limit,sortBy:"createdAt",sortOrder:"desc"};f.search.trim()&&(Ge.search=f.search.trim());const Te=await Vo.getClubs(Ge);if(Te.success){const at=Te.data?.clubs||[],dt=await Promise.all(at.map(async Nt=>{try{const Qe=await Vo.getClubStats(Nt._id);if(console.log("[Clubs] Stats result for",Nt.name,":",Qe),Qe.success&&Qe.data){const ct=Qe.data.stats||Qe.data;return console.log("[Clubs] Extracted stats:",ct),{...Nt,memberCount:ct.totalMembers??Nt.memberCount,postCount:ct.totalPosts??Nt.postCount}}}catch(Qe){console.error("[Clubs] Stats fetch error for",Nt.name,":",Qe)}return Nt}));l(dt),b({currentPage:Te.data?.pagination?.currentPage||me,totalPages:Te.data?.pagination?.totalPages||0,totalCount:Te.data?.pagination?.totalCount||0,limit:Te.data?.pagination?.limit||p.limit})}else I(Te.message||"Failed to load clubs");T(!1)},se=async(me=1)=>{if(!ce)return;X(!0),ve(null);const Ge={page:me,limit:le.limit},Te=await Vo.getClubMembers(ce._id,Ge);Te.success?(W(Te.data?.members||[]),ge({currentPage:Te.data?.pagination?.currentPage||me,totalPages:Te.data?.pagination?.totalPages||0,totalCount:Te.data?.pagination?.totalCount||0,limit:Te.data?.pagination?.limit||le.limit})):ve(Te.message||"Failed to load members"),X(!1)};v.useEffect(()=>{fe(1)},[]),v.useEffect(()=>{s==="members"&&ce&&se(1)},[s,ce]);const oe=()=>h(NO),he=async me=>{if(me.preventDefault(),!r)return;P(!0),I(null);const Ge={name:d.name.trim(),description:d.description.trim(),thumbnail:d.thumbnail.trim()||void 0,requiresApproval:d.requiresApproval,postPermissions:d.postPermissions},Te=await Vo.createClub(Ge);Te.success?(oe(),fe(1)):I(Te.message||"Failed to create club"),P(!1)},Ve=me=>{_(me),h({name:me.name||"",description:me.description||"",thumbnail:me.thumbnail||"",requiresApproval:me.requiresApproval||!1,postPermissions:me.postPermissions||["MEMBERS"]}),F(!0)},Ce=async me=>{if(me.preventDefault(),!L)return;P(!0),I(null);const Ge={name:d.name.trim(),description:d.description.trim(),thumbnail:d.thumbnail.trim()||void 0,requiresApproval:d.requiresApproval,postPermissions:d.postPermissions},Te=await Vo.updateClub(L._id,Ge);Te.success?(F(!1),_(null),oe(),fe(p.currentPage)):I(Te.message||"Failed to update club"),P(!1)},Ke=async()=>{B&&(Q(!0),await Vo.deleteClub(B),Q(!1),M(null),fe(p.currentPage))},xe=async me=>{Q(!0);const Ge=await Vo.getClubStats(me._id);Ge.success&&(z(Ge.data?.stats||null),U(!0)),Q(!1)},Ee=me=>{ne(me),n("members")},pe=()=>{ne(null),n("clubs"),W([])},Fe=me=>me?new Date(me).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-";return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsx("div",{children:ce?t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:pe,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(oz,{className:"h-5 w-5 text-gray-600"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:ce.name}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[ce.memberCount||0," members - ",ce.postCount||0," posts"]})]})]}):t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Clubs & Connect"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage clubs and members."})]})}),t.jsxs("button",{onClick:()=>{s==="clubs"?fe(p.currentPage):s==="members"&&se(le.currentPage)},className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[t.jsx(ms,{className:"h-4 w-4"}),"Refresh"]})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-2 shadow-sm flex gap-2",children:[t.jsx("button",{onClick:()=>{ce?pe():n("clubs")},className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold ${s==="clubs"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`,children:"Clubs"}),t.jsx("button",{onClick:()=>n("members"),disabled:!ce,className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold ${s==="members"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"} ${ce?"":"opacity-50 cursor-not-allowed"}`,children:"Members"})]}),s==="clubs"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Create new club"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Add a new community for users to join."})]}),D&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Rt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:D})]})]}),t.jsxs("form",{onSubmit:he,className:"mt-5 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",value:d.name,onChange:me=>h({...d,name:me.target.value}),required:!0,placeholder:"Club name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),t.jsx("textarea",{value:d.description,onChange:me=>h({...d,description:me.target.value}),rows:2,placeholder:"Description",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsx(ba,{label:"Club Thumbnail",value:d.thumbnail,onUpload:me=>h({...d,thumbnail:me}),folder:"clubs",type:"image",placeholder:"Drop club thumbnail here or click to upload",disabled:A}),t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-sm font-semibold text-gray-900",children:"Requires Approval"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Users must be approved by admin before joining this club"})]}),t.jsx("button",{type:"button",onClick:()=>h({...d,requiresApproval:!d.requiresApproval}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d.requiresApproval?"bg-gray-900":"bg-gray-300"}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d.requiresApproval?"translate-x-6":"translate-x-1"}`})})]}),t.jsx(vO,{value:d.postPermissions,onChange:me=>h({...d,postPermissions:me}),disabled:A}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{type:"submit",disabled:A,className:"inline-flex items-center gap-2 px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[A?t.jsx(st,{className:"h-4 w-4 animate-spin"}):t.jsx(fr,{className:"h-4 w-4"}),"Create club"]})})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"p-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:f.search,onChange:me=>x({...f,search:me.target.value}),onKeyDown:me=>me.key==="Enter"&&fe(1),onBlur:()=>fe(1),placeholder:"Search clubs",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsx("button",{onClick:()=>{x({search:""}),fe(1)},className:"px-3 py-2 text-sm text-gray-600 bg-gray-100 border border-gray-200 rounded-lg hover:bg-gray-200",children:"Reset"})]}),S?t.jsxs("div",{className:"p-6 flex items-center justify-center gap-2 text-gray-600",children:[t.jsx(st,{className:"h-5 w-5 animate-spin"}),"Loading clubs..."]}):a.length===0?t.jsx("div",{className:"p-6 text-center text-gray-500",children:"No clubs found."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 p-4",children:a.map(me=>t.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden hover:shadow-md transition",children:[t.jsxs("div",{className:"h-32 bg-gradient-to-br from-gray-100 to-gray-200 relative",children:[me.thumbnail?t.jsx("img",{src:me.thumbnail,alt:me.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx(tn,{className:"h-12 w-12 text-gray-400"})}),me.isDeleted&&t.jsx("span",{className:"absolute top-2 right-2 px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-700",children:"Deleted"}),!me.isDeleted&&t.jsx("span",{className:`absolute top-2 right-2 px-2 py-0.5 text-xs font-semibold rounded-full ${me.requiresApproval?"bg-orange-100 text-orange-700 border border-orange-300":"bg-green-100 text-green-700 border border-green-300"}`,children:me.requiresApproval?"Approval Required":"Open to All"})]}),t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:me.name}),t.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:me.description||"No description"})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(tn,{className:"h-4 w-4"}),me.memberCount||0," members"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(UP,{className:"h-4 w-4"}),me.postCount||0," posts"]})]}),t.jsx(p9,{permissions:me.postPermissions||["MEMBERS"]}),t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100",children:[t.jsxs("button",{onClick:()=>Ee(me),className:"flex-1 px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 flex items-center justify-center gap-1",children:[t.jsx(tn,{className:"h-4 w-4"}),"View Members"]}),t.jsx("button",{onClick:()=>xe(me),className:"px-3 py-2 text-sm text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100",children:t.jsx(Ga,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>Ve(me),className:"flex-1 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg hover:bg-gray-800 flex items-center justify-center gap-1",children:[t.jsx(L3,{className:"h-4 w-4"}),"Edit"]}),t.jsx("button",{onClick:()=>M(me._id),className:"px-3 py-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100",children:t.jsx(ir,{className:"h-4 w-4"})})]})]})]},me._id))}),p.totalPages>1&&t.jsx(vr,{currentPage:p.currentPage,totalPages:p.totalPages,totalItems:p.totalCount,itemsPerPage:p.limit,onPageChange:me=>fe(me),itemLabel:"clubs"})]})]}),s==="members"&&ce&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"p-4 border-b border-gray-200",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Club Members"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[le.totalCount," members in this club"]})]}),re?t.jsxs("div",{className:"p-6 flex items-center justify-center gap-2 text-gray-600",children:[t.jsx(st,{className:"h-5 w-5 animate-spin"}),"Loading members..."]}):ae?t.jsx("div",{className:"p-6 text-center text-red-500",children:ae}):J.length===0?t.jsx("div",{className:"p-6 text-center text-gray-500",children:"No members in this club."}):t.jsx("div",{className:"divide-y divide-gray-200",children:J.map(me=>t.jsxs("div",{className:"p-4 flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-800 to-gray-600 flex items-center justify-center text-white font-bold text-sm",children:me.name?.charAt(0)?.toUpperCase()||"U"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:me.name||"Unknown"}),t.jsx("p",{className:"text-xs text-gray-500",children:me.email||me.phone||"-"})]})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[t.jsxs("span",{children:[me.followerCount||0," followers"]}),t.jsxs("span",{className:"text-xs text-gray-400",children:["Joined ",Fe(me.joinedAt)]})]})]},me.id))}),le.totalPages>1&&t.jsx(vr,{currentPage:le.currentPage,totalPages:le.totalPages,totalItems:le.totalCount,itemsPerPage:le.limit,onPageChange:me=>se(me),itemLabel:"members"})]}),t.jsx(Pt,{isOpen:$,onClose:()=>{F(!1),_(null),oe()},title:"Edit club",size:"lg",children:t.jsxs("form",{onSubmit:Ce,className:"space-y-4",children:[t.jsx("input",{type:"text",value:d.name,onChange:me=>h({...d,name:me.target.value}),required:!0,placeholder:"Club name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),t.jsx("textarea",{value:d.description,onChange:me=>h({...d,description:me.target.value}),rows:3,placeholder:"Description",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),t.jsx(ba,{label:"Club Thumbnail",value:d.thumbnail,onUpload:me=>h({...d,thumbnail:me}),folder:"clubs",type:"image",placeholder:"Drop club thumbnail here or click to upload",disabled:A}),t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-sm font-semibold text-gray-900",children:"Requires Approval"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Users must be approved by admin before joining this club"})]}),t.jsx("button",{type:"button",onClick:()=>h({...d,requiresApproval:!d.requiresApproval}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d.requiresApproval?"bg-gray-900":"bg-gray-300"}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d.requiresApproval?"translate-x-6":"translate-x-1"}`})})]}),t.jsx(vO,{value:d.postPermissions,onChange:me=>h({...d,postPermissions:me}),disabled:A}),t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx("button",{type:"button",onClick:()=>{F(!1),_(null),oe()},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:A,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[A?t.jsx(st,{className:"h-4 w-4 animate-spin"}):t.jsx(L3,{className:"h-4 w-4"}),"Save changes"]})]})]})}),t.jsx(Pt,{isOpen:H,onClose:()=>{U(!1),z(null)},title:"Club Statistics",size:"lg",children:V&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:V.clubName}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-blue-700",children:V.totalMembers||0}),t.jsx("p",{className:"text-sm text-blue-600",children:"Total Members"})]}),t.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-green-700",children:V.totalPosts||0}),t.jsx("p",{className:"text-sm text-green-600",children:"Total Posts"})]}),t.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg col-span-2",children:[t.jsx("p",{className:"text-2xl font-bold text-purple-700",children:V.recentPosts||0}),t.jsx("p",{className:"text-sm text-purple-600",children:"Recent Posts"})]})]}),V.topPosters?.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Top Posters"}),t.jsx("div",{className:"space-y-2",children:V.topPosters.map((me,Ge)=>t.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-6 h-6 rounded-full bg-gray-800 text-white text-xs flex items-center justify-center font-bold",children:Ge+1}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:me.name})]}),t.jsxs("span",{className:"text-sm text-gray-600",children:[me.postCount," posts"]})]},me.userId))})]})]})}),t.jsx(xs,{isOpen:!!B,onClose:()=>M(null),onConfirm:Ke,title:"Delete club",message:"This will delete the club and all associated data (members, posts). This action cannot be undone.",confirmText:"Delete club",variant:"danger",isLoading:G})]})}const Rg={GET_ALL:"/web/clubs/join-requests/all",APPROVE:e=>`/web/clubs/join-requests/${e}/approve`,REJECT:e=>`/web/clubs/join-requests/${e}/reject`,UPDATE_APPROVAL_SETTING:e=>`/web/clubs/${e}/approval-setting`},C2={getAllJoinRequests:async(e={})=>{const r=new URLSearchParams;e.page&&r.append("page",e.page),e.limit&&r.append("limit",e.limit),e.status&&r.append("status",e.status),e.clubId&&r.append("clubId",e.clubId),e.search&&r.append("search",e.search);const s=`${Rg.GET_ALL}?${r.toString()}`;return console.log("[ClubJoinRequestsService] Fetching join requests:",s),Se(je.get(s))},approveJoinRequest:async(e,r={})=>(console.log("[ClubJoinRequestsService] Approving join request:",e),Se(je.post(Rg.APPROVE(e),r))),rejectJoinRequest:async(e,r)=>(console.log("[ClubJoinRequestsService] Rejecting join request:",e),Se(je.post(Rg.REJECT(e),r))),updateApprovalSetting:async(e,r)=>(console.log("[ClubJoinRequestsService] Updating club approval setting:",e,r),Se(je.put(Rg.UPDATE_APPROVAL_SETTING(e),r)))},Ame={PENDING:"bg-yellow-100 text-yellow-800 border-yellow-300",APPROVED:"bg-green-100 text-green-800 border-green-300",REJECTED:"bg-red-100 text-red-800 border-red-300"},Eme={PENDING:dr,APPROVED:ar,REJECTED:Rt};function Tme(){const[e,r]=v.useState([]),[s,n]=v.useState(!1),[a,l]=v.useState(null),[d,h]=v.useState(null),[f,x]=v.useState(""),[p,b]=v.useState(""),[S,T]=v.useState(""),[A,P]=v.useState(1),[D,I]=v.useState(null),L=20,[_,$]=v.useState(null),[F,B]=v.useState(null),[M,V]=v.useState(""),[z,H]=v.useState(""),[U,G]=v.useState(!1);v.useEffect(()=>{Q()},[A,f,p,S]);const Q=async()=>{n(!0),l(null);const X=await C2.getAllJoinRequests({page:A,limit:L,status:f,clubId:p,search:S});X.success?(r(X.data?.requests||[]),I(X.data?.pagination)):l(X.message||"Failed to fetch join requests"),n(!1)},ce=X=>{$(X),V("")},ne=X=>{B(X),H(""),V("")},J=async()=>{if(!_)return;G(!0),l(null);const X=await C2.approveJoinRequest(_.id,{adminNotes:M.trim()||void 0});X.success?(h("Join request approved successfully"),$(null),V(""),Q()):l(X.message||"Failed to approve join request"),G(!1)},W=async()=>{if(!F||!z.trim())return;G(!0),l(null);const X=await C2.rejectJoinRequest(F.id,{rejectionReason:z.trim(),adminNotes:M.trim()||void 0});X.success?(h("Join request rejected successfully"),B(null),H(""),V(""),Q()):l(X.message||"Failed to reject join request"),G(!1)},le=()=>{Q()},ge=X=>{P(X),window.scrollTo({top:0,behavior:"smooth"})},re=()=>{x(""),b(""),T(""),P(1)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Club Join Requests"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage user requests to join approval-required clubs"})]}),t.jsxs("button",{onClick:le,disabled:s,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-60",children:[t.jsx(ms,{className:`h-4 w-4 ${s?"animate-spin":""}`}),"Refresh"]})]}),a&&t.jsxs("div",{className:"px-4 py-3 rounded-lg border border-red-200 bg-red-50 text-red-700 text-sm flex items-start gap-2",children:[t.jsx(Rt,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),t.jsx("span",{children:a})]}),d&&t.jsxs("div",{className:"px-4 py-3 rounded-lg border border-emerald-200 bg-emerald-50 text-emerald-700 text-sm flex items-start gap-2",children:[t.jsx(ar,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),t.jsx("span",{children:d})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Fn,{className:"h-5 w-5 text-gray-600"}),t.jsx("h2",{className:"font-semibold text-gray-900",children:"Filters"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search by User"}),t.jsxs("div",{className:"relative",children:[t.jsx(br,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:S,onChange:X=>{T(X.target.value),P(1)},placeholder:"Search by name...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsxs("select",{value:f,onChange:X=>{x(X.target.value),P(1)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Statuses"}),t.jsx("option",{value:"PENDING",children:"Pending"}),t.jsx("option",{value:"APPROVED",children:"Approved"}),t.jsx("option",{value:"REJECTED",children:"Rejected"})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:re,className:"w-full px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Clear Filters"})})]})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:s?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(st,{className:"h-8 w-8 animate-spin text-gray-400"})}):e.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(tn,{className:"h-12 w-12 text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-500",children:"No join requests found"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:f||p||S?"Try adjusting your filters":"Join requests will appear here when users request to join clubs"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Club"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Note"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(X=>{const ae=Eme[X.status];return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:t.jsx(gr,{className:"h-5 w-5 text-gray-600"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900",children:X.user?.name||"Unknown"}),t.jsx("div",{className:"text-sm text-gray-500",children:X.user?.phone||X.user?.email})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"font-medium text-gray-900",children:X.club?.name||"Unknown Club"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium border ${Ame[X.status]}`,children:[t.jsx(ae,{className:"h-3.5 w-3.5"}),X.status]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(X.createdAt).toLocaleDateString()}),t.jsx("td",{className:"px-6 py-4 max-w-xs",children:t.jsx("p",{className:"text-sm text-gray-600 truncate",title:X.userNote,children:X.userNote||"-"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:X.status==="PENDING"?t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsxs("button",{onClick:()=>ce(X),className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium",children:[t.jsx(ar,{className:"h-4 w-4"}),"Approve"]}),t.jsxs("button",{onClick:()=>ne(X),className:"inline-flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium",children:[t.jsx(Rt,{className:"h-4 w-4"}),"Reject"]})]}):t.jsx("span",{className:"text-sm text-gray-400",children:X.status==="APPROVED"?"Approved":"Rejected"})})]},X.id)})})]})}),D&&D.totalPages>1&&t.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[t.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(A-1)*L+1," to"," ",Math.min(A*L,D.totalCount)," of ",D.totalCount," ","requests"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>ge(A-1),disabled:!D.hasPrevPage,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(wj,{className:"h-4 w-4"})}),t.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",A," of ",D.totalPages]}),t.jsx("button",{onClick:()=>ge(A+1),disabled:!D.hasNextPage,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(yp,{className:"h-4 w-4"})})]})]})]})}),_&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center",children:t.jsx(ar,{className:"h-6 w-6 text-green-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Approve Join Request"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Approve user to join the club"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-600",children:"User:"}),t.jsx("p",{className:"font-medium text-gray-900",children:_.user?.name})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Club:"}),t.jsx("p",{className:"font-medium text-gray-900",children:_.club?.name})]}),_.userNote&&t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-600",children:"User Note:"}),t.jsx("p",{className:"text-sm text-gray-800 mt-1",children:_.userNote})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Notes (Optional)"}),t.jsx("textarea",{value:M,onChange:X=>V(X.target.value),placeholder:"Add optional notes...",maxLength:500,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[M.length,"/500 characters"]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[t.jsx("button",{onClick:()=>$(null),disabled:U,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:J,disabled:U,className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-60",children:U?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Approving..."]}):t.jsxs(t.Fragment,{children:[t.jsx(ar,{className:"h-4 w-4"}),"Approve"]})})]})]})})}),F&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"h-12 w-12 rounded-full bg-red-100 flex items-center justify-center",children:t.jsx(Rt,{className:"h-6 w-6 text-red-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Reject Join Request"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Reject user's request to join"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-600",children:"User:"}),t.jsx("p",{className:"font-medium text-gray-900",children:F.user?.name})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Club:"}),t.jsx("p",{className:"font-medium text-gray-900",children:F.club?.name})]}),F.userNote&&t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-600",children:"User Note:"}),t.jsx("p",{className:"text-sm text-gray-800 mt-1",children:F.userNote})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rejection Reason ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:z,onChange:X=>H(X.target.value),placeholder:"Explain why the request is being rejected...",maxLength:500,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[z.length,"/500 characters"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Notes (Optional)"}),t.jsx("textarea",{value:M,onChange:X=>V(X.target.value),placeholder:"Add optional internal notes...",maxLength:500,rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[M.length,"/500 characters"]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[t.jsx("button",{onClick:()=>B(null),disabled:U,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:W,disabled:U||!z.trim(),className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-60",children:U?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Rejecting..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Rt,{className:"h-4 w-4"}),"Reject"]})})]})]})})})]})}const Dme={CREATE_POST:"/app/connect/posts"},Ome={createPost:async e=>(console.log("[ClubPostsService] Creating post:",e),Se(je.post(Dme.CREATE_POST,e)))},wO={caption:"",mediaType:"IMAGE",mediaUrls:[],mediaThumbnail:"",clubId:""};function Pme(){const{hasRole:e}=vn(),r=e(["SUPER_ADMIN","ADMIN"]),[s,n]=v.useState([]),[a,l]=v.useState(wO),[d,h]=v.useState(!1),[f,x]=v.useState(!1),[p,b]=v.useState(null),[S,T]=v.useState(null);v.useEffect(()=>{A()},[]);const A=async()=>{h(!0),b(null);const _=await Vo.getClubs({page:1,limit:100});_.success?n(_.data?.clubs||[]):b(_.message||"Failed to load clubs"),h(!1)},P=()=>{l(wO),b(null),T(null)},D=async _=>{if(_.preventDefault(),!r)return;if(!a.clubId){b("Please select a club");return}if(a.mediaUrls.length===0){b("Please upload at least one media file");return}x(!0),b(null),T(null);const $=await Ome.createPost({caption:a.caption.trim(),mediaType:a.mediaType,mediaUrls:a.mediaUrls,mediaThumbnail:a.mediaThumbnail||void 0,clubId:a.clubId});$.success?(T("Post created successfully!"),P()):b($.message||"Failed to create post"),x(!1)},I=()=>s.find(_=>_._id===a.clubId),L=_=>{const $=_.postPermissions||["MEMBERS"];return $.includes("ANYONE")?t.jsx("span",{className:"text-green-600",children:" Open to all"}):$.includes("ADMIN")?t.jsx("span",{className:"text-green-600",children:" You have posting access (Admin)"}):$.includes("MEMBERS")?_.isJoined?t.jsx("span",{className:"text-green-600",children:" Member"}):t.jsx("span",{className:"text-orange-600",children:" Not a member"}):t.jsx("span",{className:"text-gray-600",children:"No posting access"})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Club Post (Admin)"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Create posts in clubs as an administrator"})]}),t.jsxs("button",{onClick:A,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[t.jsx(ms,{className:"h-4 w-4"}),"Refresh Clubs"]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[S&&t.jsx("div",{className:"mb-4 flex items-center gap-2 px-4 py-3 bg-green-50 border border-green-200 text-green-700 rounded-lg",children:t.jsx("span",{className:"text-sm font-medium",children:S})}),p&&t.jsxs("div",{className:"mb-4 flex items-center gap-2 px-4 py-3 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Rt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:p})]}),t.jsxs("form",{onSubmit:D,className:"space-y-5",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-sm font-semibold text-gray-900",children:["Select Club ",t.jsx("span",{className:"text-red-500",children:"*"})]}),d?t.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Loading clubs..."]}):t.jsxs("select",{required:!0,value:a.clubId,onChange:_=>l({...a,clubId:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white",children:[t.jsx("option",{value:"",children:"-- Choose a club --"}),s.map(_=>t.jsxs("option",{value:_._id,children:[_.name," (",_.memberCount||0," members)"]},_._id))]}),a.clubId&&I()&&t.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-900",children:I().name}),t.jsx(p9,{permissions:I().postPermissions||["MEMBERS"]})]}),t.jsx("div",{className:"text-xs text-gray-600",children:L(I())})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-semibold text-gray-900",children:"Caption"}),t.jsx("textarea",{value:a.caption,onChange:_=>l({...a,caption:_.target.value}),rows:4,placeholder:"Write something about this post...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Optional - Add a caption to your post"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-sm font-semibold text-gray-900",children:["Media Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{type:"button",onClick:()=>l({...a,mediaType:"IMAGE",mediaUrls:[]}),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${a.mediaType==="IMAGE"?"border-gray-900 bg-gray-50 text-gray-900":"border-gray-300 bg-white text-gray-600 hover:border-gray-400"}`,children:[t.jsx(Xo,{className:"h-5 w-5"}),t.jsx("span",{className:"font-semibold",children:"Image(s)"})]}),t.jsxs("button",{type:"button",onClick:()=>l({...a,mediaType:"VIDEO",mediaUrls:[]}),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${a.mediaType==="VIDEO"?"border-gray-900 bg-gray-50 text-gray-900":"border-gray-300 bg-white text-gray-600 hover:border-gray-400"}`,children:[t.jsx(qi,{className:"h-5 w-5"}),t.jsx("span",{className:"font-semibold",children:"Video"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-sm font-semibold text-gray-900",children:[a.mediaType==="IMAGE"?"Upload Images":"Upload Video"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(ba,{value:a.mediaUrls[0]||"",onUpload:_=>l({...a,mediaUrls:[_]}),folder:a.mediaType==="IMAGE"?"club-posts/images":"club-posts/videos",type:a.mediaType==="IMAGE"?"image":"video",placeholder:`Drop ${a.mediaType==="IMAGE"?"image":"video"} here or click to upload`,disabled:f}),a.mediaType==="IMAGE"&&t.jsx("p",{className:"text-xs text-gray-500",children:'You can upload multiple images by clicking "Add More" after uploading the first one'})]}),a.mediaType==="VIDEO"&&a.mediaUrls.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-semibold text-gray-900",children:"Video Thumbnail (Optional)"}),t.jsx(ba,{value:a.mediaThumbnail,onUpload:_=>l({...a,mediaThumbnail:_}),folder:"club-posts/thumbnails",type:"image",placeholder:"Drop thumbnail image here or click to upload",disabled:f}),t.jsx("p",{className:"text-xs text-gray-500",children:"Upload a thumbnail image for the video preview"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:P,disabled:f,className:"px-5 py-2.5 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-60",children:"Reset"}),t.jsx("button",{type:"submit",disabled:f||!a.clubId||a.mediaUrls.length===0,className:"inline-flex items-center gap-2 px-6 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60 disabled:cursor-not-allowed",children:f?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Creating Post..."]}):t.jsxs(t.Fragment,{children:[t.jsx(fr,{className:"h-4 w-4"}),"Create Post"]})})]})]})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:" About Posting Permissions"}),t.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[t.jsxs("li",{children:[" ",t.jsx("strong",{children:"Admins:"})," You can always post in clubs with admin permission"]}),t.jsxs("li",{children:[" ",t.jsx("strong",{children:"Members:"})," You need to be a member of the club to post"]}),t.jsxs("li",{children:[" ",t.jsx("strong",{children:"Anyone:"})," Any authenticated user can post (no membership required)"]}),t.jsxs("li",{children:[" ",t.jsx("strong",{children:"Multiple permissions:"})," Clubs can allow both admins and members to post"]})]})]})]})}const SO={APP_VERSION:"/web/settings/app-version"},CO={getAppVersion:async()=>(console.log("[SettingsService] Fetching app version settings"),Se(je.get(SO.APP_VERSION))),updateAppVersion:async e=>(console.log("[SettingsService] Updating app version settings"),Se(je.put(SO.APP_VERSION,e)))},AO={currentVersion:"",minimumVersion:"",forceUpdate:!1,updateUrl:""};function kme(){const[e,r]=v.useState(AO),[s,n]=v.useState(AO),[a,l]=v.useState(!1),[d,h]=v.useState(!1),[f,x]=v.useState(null),[p,b]=v.useState(null),S=v.useMemo(()=>e.currentVersion!==s.currentVersion||e.minimumVersion!==s.minimumVersion||e.forceUpdate!==s.forceUpdate||e.updateUrl!==s.updateUrl,[e,s]),T=async()=>{l(!0),x(null),b(null);const D=await CO.getAppVersion();if(D.success){const I=D.data?.appVersion||{},L={currentVersion:I.currentVersion||"",minimumVersion:I.minimumVersion||"",forceUpdate:I.forceUpdate||!1,updateUrl:I.updateUrl||""};r(L),n(L)}else x(D.message||"Failed to fetch app version settings");l(!1)};v.useEffect(()=>{T()},[]);const A=async D=>{D.preventDefault(),h(!0),x(null),b(null);const I={currentVersion:e.currentVersion.trim(),minimumVersion:e.minimumVersion.trim(),forceUpdate:!!e.forceUpdate,updateUrl:e.updateUrl.trim()},L=await CO.updateAppVersion(I);if(L.success){const _={currentVersion:I.currentVersion,minimumVersion:I.minimumVersion,forceUpdate:I.forceUpdate,updateUrl:I.updateUrl};n(_),r(_),b("App version settings updated successfully")}else x(L.message||"Failed to update app version settings");h(!1)},P=()=>{r(s),b(null),x(null)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Control app versioning and force updates for mobile clients."})]}),t.jsxs("button",{onClick:T,disabled:a,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-60",children:[t.jsx(ms,{className:`h-4 w-4 ${a?"animate-spin":""}`}),"Refresh"]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-800",children:t.jsx(BV,{className:"h-5 w-5"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"App Version Control"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Configure latest and minimum supported app versions. Users below minimum will be forced to update."})]})]}),f&&t.jsx("div",{className:"mb-4 px-4 py-3 rounded-lg border border-red-200 bg-red-50 text-red-700 text-sm",children:f}),p&&t.jsx("div",{className:"mb-4 px-4 py-3 rounded-lg border border-emerald-200 bg-emerald-50 text-emerald-700 text-sm",children:p}),t.jsxs("form",{onSubmit:A,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Current Version"}),t.jsx("input",{type:"text",value:e.currentVersion,onChange:D=>r({...e,currentVersion:D.target.value}),placeholder:"e.g. 2.5.0",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Latest version available on the store."})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Minimum Version"}),t.jsx("input",{type:"text",value:e.minimumVersion,onChange:D=>r({...e,minimumVersion:D.target.value}),placeholder:"e.g. 2.3.0",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Users below this version will see a force update prompt."})]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[t.jsx(jp,{className:"h-4 w-4 text-gray-600"}),"Force Update"]}),t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[t.jsx("input",{type:"checkbox",checked:e.forceUpdate,onChange:D=>r({...e,forceUpdate:D.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),"Require update for users below minimum version"]})})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[t.jsx(Uu,{className:"h-4 w-4 text-gray-600"}),"Update URL"]}),t.jsx("input",{type:"url",value:e.updateUrl,onChange:D=>r({...e,updateUrl:D.target.value}),placeholder:"https://play.google.com/store/apps/details?id=...",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Link to the app page on the store."})]}),t.jsxs("div",{className:"flex items-center justify-end gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:P,disabled:!S||d,className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50",children:"Reset"}),t.jsxs("button",{type:"submit",disabled:d||a||!S,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[d?t.jsx(st,{className:"h-4 w-4 animate-spin"}):t.jsx($P,{className:"h-4 w-4"}),"Save Changes"]})]})]})]})]})}const Mg={GET_ALL:"/web/feature-access",UPDATE:"/web/feature-access",UPDATE_BY_ID:e=>`/web/feature-access/${e}`,CHECK_ACCESS:"/web/feature-access/check"},EO={getAllFeatureAccess:async()=>(console.log("[FeatureAccessService] Fetching all feature access settings"),Se(je.get(Mg.GET_ALL))),updateFeatureAccess:async e=>(console.log("[FeatureAccessService] Updating feature access settings:",e),Se(je.put(Mg.UPDATE,e))),updateFeatureAccessById:async(e,r)=>(console.log(`[FeatureAccessService] Updating feature by ID ${e}:`,r),Se(je.patch(Mg.UPDATE_BY_ID(e),r))),checkFeatureAccess:async(e,r)=>(console.log(`[FeatureAccessService] Checking access for feature: ${e}, phone: ${r}`),Se(je.post(Mg.CHECK_ACCESS,{featureKey:e,phone:r})))},TO=[{key:"SOS",name:"SOS (Sort Our Selves)",description:"Mental health programs and counseling sessions",icon:""},{key:"CONNECT",name:"Connect",description:"Social networking, clubs, and community",icon:""},{key:"CHALLENGE",name:"Challenges",description:"Daily challenges and habit tracking",icon:""}];function _me(){const[e,r]=v.useState([]),[s,n]=v.useState(!1),[a,l]=v.useState(new Set),[d,h]=v.useState(new Set),f=async()=>{n(!0);const A=await EO.getAllFeatureAccess();if(A.success){const P=Array.isArray(A.data)?A.data:A.data?.features||[],D=new Map(P.map(L=>[L.featureKey,L])),I=TO.map(L=>{const _=D.get(L.key);return{...L,requiresMembership:_?.requiresMembership??!1,isActive:_?.isActive??!0,_id:_?._id,updatedAt:_?.updatedAt,updatedBy:_?.updatedBy,originalRequiresMembership:_?.requiresMembership??!1,originalIsActive:_?.isActive??!0}});r(I),h(new Set),ot.success("Feature settings loaded successfully")}else ot.error(A.message||"Failed to fetch feature access settings"),r(TO.map(P=>({...P,requiresMembership:!1,isActive:!0,originalRequiresMembership:!1,originalIsActive:!0})));n(!1)};v.useEffect(()=>{f()},[]);const x=A=>{r(P=>P.map(D=>D.key===A?{...D,requiresMembership:!D.requiresMembership}:D)),h(P=>new Set(P).add(A))},p=A=>{r(P=>P.map(D=>D.key===A?{...D,isActive:!D.isActive}:D)),h(P=>new Set(P).add(A))},b=async A=>{l(D=>new Set(D).add(A.key));const P=await EO.updateFeatureAccess({featureKey:A.key,requiresMembership:A.requiresMembership,isActive:A.isActive});P.success?(ot.success(`${A.name} settings updated successfully`),r(D=>D.map(I=>I.key===A.key?{...I,updatedAt:P.data?.updatedAt||new Date().toISOString(),updatedBy:P.data?.updatedBy,originalRequiresMembership:I.requiresMembership,originalIsActive:I.isActive}:I)),h(D=>{const I=new Set(D);return I.delete(A.key),I})):ot.error(P.message||`Failed to update ${A.name}`),l(D=>{const I=new Set(D);return I.delete(A.key),I})},S=A=>{r(P=>P.map(D=>D.key===A?{...D,requiresMembership:D.originalRequiresMembership,isActive:D.originalIsActive}:D)),h(P=>{const D=new Set(P);return D.delete(A),D})},T=A=>A?new Date(A).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never";return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Feature Access Control"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage which features are available and set membership requirements"})]}),t.jsxs("button",{onClick:f,disabled:s,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-60",children:[t.jsx(ms,{className:`h-4 w-4 ${s?"animate-spin":""}`}),"Refresh"]})]}),s?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(st,{className:"h-8 w-8 animate-spin text-gray-400"})}):t.jsx("div",{className:"space-y-4",children:e.map(A=>{const P=d.has(A.key),D=a.has(A.key);return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"text-3xl",children:A.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:A.name}),!A.isActive&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 text-xs font-semibold bg-red-100 text-red-700 rounded-full",children:[t.jsx(Rt,{className:"h-3 w-3"}),"Disabled"]}),A.isActive&&A.requiresMembership&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 text-xs font-semibold bg-amber-100 text-amber-700 rounded-full",children:[t.jsx(BP,{className:"h-3 w-3"}),"Members Only"]}),A.isActive&&!A.requiresMembership&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 text-xs font-semibold bg-emerald-100 text-emerald-700 rounded-full",children:[t.jsx(xV,{className:"h-3 w-3"}),"Open to All"]}),P&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 text-xs font-semibold bg-blue-100 text-blue-700 rounded-full",children:[t.jsx(Tt,{className:"h-3 w-3"}),"Unsaved Changes"]})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:A.description})]})]}),!A.isActive&&t.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 border border-red-200",children:t.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[t.jsx(Tt,{className:"h-4 w-4 flex-shrink-0"}),t.jsx("p",{className:"text-sm font-medium",children:"FEATURE DISABLED - Users cannot access this feature"})]})}),t.jsx("div",{className:"mb-4 p-4 rounded-lg bg-gray-50 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:A.isActive,onChange:()=>p(A.key),disabled:D,className:"h-5 w-5 text-gray-800 border-gray-300 rounded cursor-pointer"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900",children:"Feature Status"}),t.jsx("div",{className:"text-xs text-gray-500",children:A.isActive?"Active (enabled)":"Inactive (disabled)"})]})]})}),t.jsx("div",{children:t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:A.requiresMembership,onChange:()=>x(A.key),disabled:D||!A.isActive,className:"h-5 w-5 text-gray-800 border-gray-300 rounded cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900",children:"Requires Active Membership"}),t.jsx("div",{className:"text-xs text-gray-500",children:A.requiresMembership?"Only paid members can access":"Available to all users"})]})]})})]})}),t.jsxs("div",{className:"mb-4 flex items-center gap-4 text-xs text-gray-500",children:[t.jsxs("span",{children:[t.jsx("strong",{children:"Last Updated:"})," ",T(A.updatedAt)]}),A.updatedBy&&t.jsxs("span",{children:[t.jsx("strong",{children:"Updated By:"})," ",A.updatedBy.name||A.updatedBy.email||"Admin"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[P&&t.jsx("button",{onClick:()=>S(A.key),disabled:D,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Reset"}),t.jsx("button",{onClick:()=>b(A),disabled:D||!P,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white text-sm font-medium rounded-lg hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:D?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):t.jsxs(t.Fragment,{children:[t.jsx($P,{className:"h-4 w-4"}),"Save Changes"]})})]})]},A.key)})}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-blue-900 text-sm mb-2",children:"Access Control Rules:"}),t.jsxs("ul",{className:"text-sm text-blue-800 space-y-1.5",children:[t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"font-bold mt-0.5",children:"1."}),t.jsxs("span",{children:[t.jsx("strong",{children:"Feature Inactive:"})," When disabled, the feature is completely blocked for ALL users regardless of membership"]})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"font-bold mt-0.5",children:"2."}),t.jsxs("span",{children:[t.jsx("strong",{children:"Feature Active + Membership Required:"})," Only users with active paid membership can access"]})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"font-bold mt-0.5",children:"3."}),t.jsxs("span",{children:[t.jsx("strong",{children:"Feature Active + No Membership Required:"})," Feature is open to all users (free access)"]})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"font-bold mt-0.5",children:"4."}),t.jsxs("span",{children:[t.jsx("strong",{children:"User Experience:"})," Users without required membership will see a membership upgrade prompt when attempting to access"]})]})]})]})]})}const tu={BASE:"/web/services"},Ime=e=>{const r=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&r.append(s,n)}),r.toString()},Hc={getAll:async(e={})=>{const r=Ime(e),s=r?`${tu.BASE}?${r}`:tu.BASE;console.log("[ServiceService] Fetching services with params:",e);const n=await Se(je.get(s));return n.success?console.log("[ServiceService] Fetched services:",n.data.services?.length):console.error("[ServiceService] Failed to fetch services:",n.message),n},getById:async e=>{console.log("[ServiceService] Fetching service:",e);const r=await Se(je.get(`${tu.BASE}/${e}`));return r.success?console.log("[ServiceService] Fetched service:",r.data.service?.name):console.error("[ServiceService] Failed to fetch service:",r.message),r},create:async e=>{console.log("[ServiceService] Creating service:",e.name);const r=await Se(je.post(tu.BASE,e));return r.success?console.log("[ServiceService] Created service:",r.data.service?._id):console.error("[ServiceService] Failed to create service:",r.message),r},update:async(e,r)=>{console.log("[ServiceService] Updating service:",e);const s=await Se(je.put(`${tu.BASE}/${e}`,r));return s.success?console.log("[ServiceService] Updated service:",s.data.service?.name):console.error("[ServiceService] Failed to update service:",s.message),s},delete:async e=>{console.log("[ServiceService] Deleting service:",e);const r=await Se(je.delete(`${tu.BASE}/${e}`));return r.success?console.log("[ServiceService] Deleted service successfully"):console.error("[ServiceService] Failed to delete service:",r.message),r}},y9=["CONSULTATION","COACHING","THERAPY","WELLNESS","FITNESS","EDUCATION","OTHER"],Rme=[{value:"displayOrder",label:"Display Order"},{value:"createdAt",label:"Created Date"},{value:"name",label:"Name"},{value:"price",label:"Price"}],DO={search:"",category:"",isActive:"",isFeatured:"",requiresApproval:"",sortBy:"displayOrder",sortOrder:"asc"};function Mme(e={}){const[r,s]=v.useState([]),[n,a]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[l,d]=v.useState({...DO,...e}),[h,f]=v.useState(!1),[x,p]=v.useState(null),b=v.useRef(null),S=v.useCallback(async(M=n.currentPage)=>{f(!0),p(null);try{const V={page:M,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.category&&{category:l.category},...l.isActive!==""&&{isActive:l.isActive},...l.isFeatured!==""&&{isFeatured:l.isFeatured},...l.requiresApproval!==""&&{requiresApproval:l.requiresApproval}},z=await Hc.getAll(V);z.success?(s(z.data.services||[]),a(z.data.pagination||n)):(p(z.message),s([]))}catch{p("Failed to fetch services"),s([])}finally{f(!1)}},[l,n.limit,n.currentPage]),T=v.useCallback(async M=>{try{const V=await Hc.getById(M);return V.success?{success:!0,data:V.data.service}:{success:!1,error:V.message}}catch{return{success:!1,error:"Failed to fetch service details"}}},[]),A=v.useCallback(async M=>{f(!0),p(null);try{const V=await Hc.create(M);return V.success?(await S(1),{success:!0,data:V.data}):{success:!1,error:V.message,validationErrors:Array.isArray(V.error)?V.error:V.data?.errors}}catch{return{success:!1,error:"Failed to create service"}}finally{f(!1)}},[S]),P=v.useCallback(async(M,V)=>{f(!0),p(null);try{const z=await Hc.update(M,V);return z.success?(s(H=>H.map(U=>U._id===M?{...U,...z.data.service}:U)),{success:!0,data:z.data}):{success:!1,error:z.message,validationErrors:Array.isArray(z.error)?z.error:z.data?.errors}}catch{return{success:!1,error:"Failed to update service"}}finally{f(!1)}},[]),D=v.useCallback(async M=>{f(!0),p(null);try{const V=await Hc.delete(M);return V.success?(s(z=>z.map(H=>H._id===M?{...H,isActive:!1}:H)),{success:!0}):{success:!1,error:V.message}}catch{return{success:!1,error:"Failed to delete service"}}finally{f(!1)}},[]),I=v.useCallback(M=>{d(V=>({...V,...M}))},[]),L=v.useCallback(M=>{b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{d(V=>({...V,search:M}))},300)},[]),_=v.useCallback(()=>{d({...DO,...e})},[e]),$=v.useCallback(M=>{S(M)},[S]),F=v.useCallback(M=>{a(V=>({...V,limit:M}))},[]),B=v.useCallback(()=>{p(null)},[]);return v.useEffect(()=>{S(1)},[l]),v.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),{services:r,pagination:n,filters:l,isLoading:h,error:x,fetchServices:S,getServiceById:T,createService:A,updateService:P,deleteService:D,updateFilters:I,updateSearch:L,resetFilters:_,changePage:$,changeLimit:F,clearError:B}}function Lme({filters:e,onFilterChange:r,onSearchChange:s,onReset:n,disabled:a=!1}){const[l,d]=v.useState(e.search||""),h=b=>{const S=b.target.value;d(S),s(S)},f=(b,S)=>{r({[b]:S})},x=()=>{d(""),n()},p=e.category||e.isActive!==""||e.isFeatured!==""||e.requiresApproval!=="";return t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search services...",value:l,onChange:h,disabled:a,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),l&&t.jsx("button",{onClick:()=>{d(""),s("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(ss,{className:"h-4 w-4"})})]}),t.jsxs("select",{value:e.category,onChange:b=>f("category",b.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"All Categories"}),y9.map(b=>t.jsx("option",{value:b,children:b.charAt(0)+b.slice(1).toLowerCase()},b))]}),t.jsxs("select",{value:e.isActive,onChange:b=>f("isActive",b.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"true",children:"Active Only"}),t.jsx("option",{value:"false",children:"Inactive"})]}),t.jsxs("select",{value:e.isFeatured,onChange:b=>f("isFeatured",b.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"All Services"}),t.jsx("option",{value:"true",children:"Featured Only"}),t.jsx("option",{value:"false",children:"Not Featured"})]}),t.jsxs("select",{value:e.requiresApproval,onChange:b=>f("requiresApproval",b.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"All Purchase Types"}),t.jsx("option",{value:"true",children:"Approval Required"}),t.jsx("option",{value:"false",children:"Direct Purchase"})]}),t.jsx("select",{value:e.sortBy,onChange:b=>f("sortBy",b.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:Rme.map(b=>t.jsxs("option",{value:b.value,children:["Sort: ",b.label]},b.value))}),t.jsxs("select",{value:e.sortOrder,onChange:b=>f("sortOrder",b.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"asc",children:"Ascending"}),t.jsx("option",{value:"desc",children:"Descending"})]}),(p||l)&&t.jsxs("button",{onClick:x,disabled:a,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[t.jsx(Xi,{className:"h-4 w-4"}),"Reset"]})]})})}function OO(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function Fme(e){const r={CONSULTATION:"bg-blue-100 text-blue-700",COACHING:"bg-purple-100 text-purple-700",THERAPY:"bg-green-100 text-green-700",WELLNESS:"bg-teal-100 text-teal-700",FITNESS:"bg-orange-100 text-orange-700",EDUCATION:"bg-indigo-100 text-indigo-700",OTHER:"bg-slate-100 text-slate-700"};return r[e]||r.OTHER}function Bme({services:e,isLoading:r,canEdit:s,canDelete:n,onView:a,onEdit:l,onDelete:d}){return r?t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx(st,{className:"h-8 w-8 animate-spin text-gray-800"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading services..."})]})}):e.length===0?t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:t.jsxs("div",{className:"text-center text-gray-500",children:[t.jsx("p",{className:"text-lg font-medium",children:"No services found"}),t.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your filters or create a new service."})]})}):t.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Service"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Category"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Price"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Duration"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Purchase Type"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Subscriptions"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:e.map(h=>t.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 ${h.isActive?"":"bg-gray-50/50"}`,children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative w-16 h-12 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:[h.isFeatured&&t.jsx("div",{className:"absolute top-0 left-0 z-10",children:t.jsx("div",{className:"bg-amber-500 text-white text-[8px] font-semibold px-1.5 py-0.5 rounded-br-md shadow-sm",children:t.jsx(hi,{className:"h-2 w-2 inline"})})}),h.imageUrl?t.jsx("img",{src:h.imageUrl,alt:h.name,className:"w-full h-full object-cover",onError:f=>{f.target.style.display="none"}}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:"No image"})]}),t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate max-w-[200px]",children:h.name}),h.isFeatured&&t.jsx("span",{className:"hidden sm:inline-flex px-1.5 py-0.5 rounded text-[10px] font-medium bg-amber-100 text-amber-700",children:"Featured"})]}),h.shortDescription&&t.jsx("p",{className:"text-sm text-gray-500 truncate max-w-[250px]",children:h.shortDescription})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Fme(h.category)}`,children:h.category})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{className:"font-medium text-gray-900",children:OO(h.price)}),h.compareAtPrice&&h.compareAtPrice>h.price&&t.jsx("p",{className:"text-gray-400 line-through text-xs",children:OO(h.compareAtPrice)})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("span",{className:"text-sm text-gray-600",children:[h.durationInDays," days"]})}),t.jsx("td",{className:"px-6 py-4",children:h.requiresApproval?t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-700",children:" Approval Required"}):t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:" Direct Purchase"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"text-sm",children:[t.jsxs("p",{className:"text-gray-900",children:[h.activeSubscriptionCount||0," active"]}),t.jsxs("p",{className:"text-gray-500 text-xs",children:[h.totalSubscriptionCount||0," total"]})]})}),t.jsx("td",{className:"px-6 py-4",children:h.isActive?t.jsx("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Active"}):t.jsx("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Inactive"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx("button",{onClick:()=>a(h),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:t.jsx(Or,{className:"h-4 w-4"})}),s&&t.jsx("button",{onClick:()=>l(h),className:"p-2 text-gray-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Service",children:t.jsx(Es,{className:"h-4 w-4"})}),n&&t.jsx("button",{onClick:()=>d(h),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Service",children:t.jsx(ir,{className:"h-4 w-4"})})]})})]},h._id))})]})})})}function PO(e=null){return e?{name:e.name||"",description:e.description||"",shortDescription:e.shortDescription||"",price:e.price||"",compareAtPrice:e.compareAtPrice||"",durationInDays:e.durationInDays||30,category:e.category||"OTHER",imageUrl:e.imageUrl||"",perks:e.perks||[],maxSubscriptions:e.maxSubscriptions||"",displayOrder:e.displayOrder||0,isFeatured:e.isFeatured||!1,isActive:e.isActive!==void 0?e.isActive:!0,requiresApproval:e.requiresApproval!==void 0?e.requiresApproval:!0,metadata:e.metadata||{}}:{name:"",description:"",shortDescription:"",price:"",compareAtPrice:"",durationInDays:30,category:"OTHER",imageUrl:"",perks:[],maxSubscriptions:"",displayOrder:0,isFeatured:!1,isActive:!0,requiresApproval:!0,metadata:{}}}function kO({isOpen:e,onClose:r,onSubmit:s,service:n=null,isLoading:a=!1,serverError:l=null,validationErrors:d=null}){const[h,f]=v.useState(PO(n)),[x,p]=v.useState({}),[b,S]=v.useState("");v.useEffect(()=>{e&&(f(PO(n)),p({}))},[e,n]),v.useEffect(()=>{if(d&&Array.isArray(d)){const _={};d.forEach($=>{$.field&&(_[$.field]=$.message)}),p($=>({...$,..._}))}},[d]);const T=(_,$)=>{f(F=>({...F,[_]:$})),x[_]&&p(F=>{const B={...F};return delete B[_],B})},A=()=>{b.trim()&&(f(_=>({..._,perks:[..._.perks,b.trim()]})),S(""))},P=_=>{f($=>({...$,perks:$.perks.filter((F,B)=>B!==_)}))},D=()=>{const _={};return h.name.trim()||(_.name="Name is required"),(!h.price||h.price<=0)&&(_.price="Price must be greater than 0"),(!h.durationInDays||h.durationInDays<=0)&&(_.durationInDays="Duration must be greater than 0"),h.compareAtPrice&&h.compareAtPrice<=h.price&&(_.compareAtPrice="Compare at price should be higher than price"),p(_),Object.keys(_).length===0},I=_=>{if(_.preventDefault(),!D())return;const $={name:h.name.trim(),description:h.description.trim(),shortDescription:h.shortDescription.trim(),price:Number(h.price),durationInDays:Number(h.durationInDays),category:h.category,perks:h.perks,displayOrder:Number(h.displayOrder)||0,isFeatured:h.isFeatured,isActive:h.isActive,requiresApproval:h.requiresApproval};h.imageUrl&&($.imageUrl=h.imageUrl),h.compareAtPrice&&($.compareAtPrice=Number(h.compareAtPrice)),h.maxSubscriptions&&($.maxSubscriptions=Number(h.maxSubscriptions)),s($)},L=!!n;return t.jsx(Pt,{isOpen:e,onClose:r,title:L?"Edit Service":"Create New Service",size:"xl",children:t.jsxs("form",{onSubmit:I,className:"space-y-6",children:[l&&t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5 flex-shrink-0"}),t.jsx("p",{children:l})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Service Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:h.name,onChange:_=>T("name",_.target.value),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${x.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter service name"}),x.name&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:x.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Description"}),t.jsx("input",{type:"text",value:h.shortDescription,onChange:_=>T("shortDescription",_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Brief description for cards",maxLength:150})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Description"}),t.jsx("textarea",{value:h.description,onChange:_=>T("description",_.target.value),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none",placeholder:"Detailed description of the service"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),t.jsx("select",{value:h.category,onChange:_=>T("category",_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white",children:y9.map(_=>t.jsx("option",{value:_,children:_.charAt(0)+_.slice(1).toLowerCase()},_))})]})]}),t.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pricing & Duration"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price () ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:h.price,onChange:_=>T("price",_.target.value),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${x.price?"border-red-500":"border-gray-300"}`,placeholder:"0",min:"0"}),x.price&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:x.price})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compare at Price ()"}),t.jsx("input",{type:"number",value:h.compareAtPrice,onChange:_=>T("compareAtPrice",_.target.value),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${x.compareAtPrice?"border-red-500":"border-gray-300"}`,placeholder:"Optional",min:"0"}),x.compareAtPrice&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:x.compareAtPrice})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Duration (Days) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:h.durationInDays,onChange:_=>T("durationInDays",_.target.value),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${x.durationInDays?"border-red-500":"border-gray-300"}`,placeholder:"30",min:"1"}),x.durationInDays&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:x.durationInDays})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Subscriptions"}),t.jsx("input",{type:"number",value:h.maxSubscriptions,onChange:_=>T("maxSubscriptions",_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Leave empty for unlimited",min:"0"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for unlimited subscriptions"})]})]}),t.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Service Image"}),t.jsx(ba,{value:h.imageUrl,onUpload:_=>T("imageUrl",_),folder:"services",placeholder:"Upload service image",type:"image"})]}),t.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Service Perks"}),h.perks.length>0&&t.jsx("div",{className:"space-y-2",children:h.perks.map((_,$)=>t.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"flex-1 text-sm text-gray-700",children:_}),t.jsx("button",{type:"button",onClick:()=>P($),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:t.jsx(ir,{className:"h-4 w-4"})})]},$))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:b,onChange:_=>S(_.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Add a perk (e.g., Weekly 1-on-1 calls)",onKeyPress:_=>{_.key==="Enter"&&(_.preventDefault(),A())}}),t.jsx("button",{type:"button",onClick:A,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:t.jsx(fr,{className:"h-5 w-5"})})]})]}),t.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Settings"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Order"}),t.jsx("input",{type:"number",value:h.displayOrder,onChange:_=>T("displayOrder",_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"0",min:"0"})]})}),t.jsxs("div",{className:"flex flex-wrap gap-6",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:h.isFeatured,onChange:_=>T("isFeatured",_.target.checked),className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Featured Service"})]}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:h.isActive,onChange:_=>T("isActive",_.target.checked),className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:h.requiresApproval,onChange:_=>T("requiresApproval",_.target.checked),className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Requires Admin Approval"})]})]}),t.jsx("div",{className:`p-3 rounded-lg border ${h.requiresApproval?"bg-amber-50 border-amber-200":"bg-green-50 border-green-200"}`,children:t.jsx("p",{className:"text-sm text-gray-700",children:h.requiresApproval?" Users must request approval. Admin will review and send payment link.":" Users can purchase directly with immediate payment."})})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:r,disabled:a,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center gap-2",children:a?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"animate-spin",children:""}),L?"Updating...":"Creating..."]}):L?"Update Service":"Create Service"})]})]})})}function _O(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function IO(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function Ume(e){const r={CONSULTATION:"bg-blue-100 text-blue-700",COACHING:"bg-purple-100 text-purple-700",THERAPY:"bg-green-100 text-green-700",WELLNESS:"bg-teal-100 text-teal-700",FITNESS:"bg-orange-100 text-orange-700",EDUCATION:"bg-indigo-100 text-indigo-700",OTHER:"bg-slate-100 text-slate-700"};return r[e]||r.OTHER}function zme({isOpen:e,onClose:r,service:s}){return s?t.jsx(Pt,{isOpen:e,onClose:r,title:"Service Details",size:"xl",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex gap-6",children:[t.jsx("div",{className:"w-40 h-32 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:s.imageUrl?t.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No image"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s.name}),s.shortDescription&&t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.shortDescription})]}),t.jsxs("div",{className:"flex gap-2",children:[s.isFeatured&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-700",children:[t.jsx(hi,{className:"h-3 w-3"}),"Featured"]}),s.isActive?t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Active"}):t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Inactive"})]})]}),t.jsx("div",{className:"mt-3",children:t.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Ume(s.category)}`,children:[t.jsx(on,{className:"h-3 w-3 inline mr-1"}),s.category]})})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(rm,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"Price"})]}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:_O(s.price)}),s.compareAtPrice&&s.compareAtPrice>s.price&&t.jsx("p",{className:"text-sm text-gray-400 line-through",children:_O(s.compareAtPrice)})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(dr,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"Duration"})]}),t.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[s.durationInDays," days"]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(tn,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"Active"})]}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:s.activeSubscriptionCount||0})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(tn,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"Total"})]}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:s.totalSubscriptionCount||0})]})]}),s.description&&t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:s.description})]}),s.perks&&s.perks.length>0&&t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Service Perks"}),t.jsx("ul",{className:"space-y-2",children:s.perks.map((n,a)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx(ar,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),t.jsx("span",{className:"text-sm text-gray-600",children:n})]},a))})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Purchase Flow"}),t.jsx("div",{className:`p-4 rounded-lg border ${s.requiresApproval?"bg-amber-50 border-amber-200":"bg-green-50 border-green-200"}`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"text-2xl",children:s.requiresApproval?"":""}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900 mb-1",children:s.requiresApproval?"Admin Approval Required":"Direct Purchase Enabled"}),t.jsx("p",{className:"text-sm text-gray-700",children:s.requiresApproval?"Users must request this service. Admin will review requests and send payment links upon approval.":"Users can purchase this service directly with immediate payment processing through Razorpay."})]})]})})]}),t.jsx("div",{className:"border-t border-gray-200 pt-4",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Max Subscriptions:"}),t.jsx("span",{className:"ml-2 text-gray-900",children:s.maxSubscriptions||"Unlimited"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Display Order:"}),t.jsx("span",{className:"ml-2 text-gray-900",children:s.displayOrder||0})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Created:"}),t.jsx("span",{className:"ml-2 text-gray-900",children:IO(s.createdAt)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Updated:"}),t.jsx("span",{className:"ml-2 text-gray-900",children:IO(s.updatedAt)})]})]})}),t.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:t.jsx("button",{onClick:r,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})}):null}function Vme(){const{hasRole:e}=vn(),r=e(["SUPER_ADMIN","ADMIN"]),s=e(["SUPER_ADMIN","ADMIN"]),n=e(["SUPER_ADMIN","ADMIN"]),{services:a,pagination:l,filters:d,isLoading:h,error:f,getServiceById:x,createService:p,updateService:b,deleteService:S,updateFilters:T,updateSearch:A,resetFilters:P,changePage:D,clearError:I}=Mme(),[L,_]=v.useState(!1),[$,F]=v.useState(!1),[B,M]=v.useState(!1),[V,z]=v.useState(!1),[H,U]=v.useState(null),[G,Q]=v.useState(!1),[ce,ne]=v.useState(null),[J,W]=v.useState(null),le=v.useCallback(se=>{U(se),M(!0)},[]),ge=v.useCallback(async se=>{const oe=await x(se._id);oe.success?(U(oe.data),ne(null),W(null),F(!0)):ne(oe.error)},[x]),re=v.useCallback(()=>{U(null),ne(null),W(null),_(!0)},[]),X=v.useCallback(se=>{U(se),z(!0)},[]),ae=v.useCallback(async se=>{Q(!0),ne(null),W(null);try{const oe=await p(se);oe.success?_(!1):(ne(oe.error),W(oe.validationErrors))}finally{Q(!1)}},[p]),ve=v.useCallback(async se=>{if(H){Q(!0),ne(null),W(null);try{const oe=await b(H._id,se);oe.success?(F(!1),U(null)):(ne(oe.error),W(oe.validationErrors))}finally{Q(!1)}}},[H,b]),fe=v.useCallback(async()=>{if(H){Q(!0);try{const se=await S(H._id);se.success?(z(!1),U(null)):ne(se.error)}finally{Q(!1)}}},[H,S]);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Services"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your services and subscription offerings"})]}),t.jsx("div",{className:"flex items-center gap-3",children:r&&t.jsxs("button",{onClick:re,className:"flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-900 transition-colors",children:[t.jsx(fr,{className:"h-5 w-5"}),t.jsx("span",{children:"Create Service"})]})})]}),f&&t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5 flex-shrink-0"}),t.jsx("p",{className:"flex-1",children:f}),t.jsx("button",{onClick:I,className:"text-red-500 hover:text-red-700 font-medium",children:"Dismiss"})]}),t.jsx(Lme,{filters:d,onFilterChange:T,onSearchChange:A,onReset:P,disabled:h}),t.jsx(Bme,{services:a,isLoading:h,canEdit:s,canDelete:n,onView:le,onEdit:ge,onDelete:X}),l.totalPages>0&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsx(vr,{currentPage:l.currentPage,totalPages:l.totalPages,totalItems:l.totalCount,itemsPerPage:l.limit,onPageChange:D,itemLabel:"services"})}),t.jsx(kO,{isOpen:L,onClose:()=>_(!1),onSubmit:ae,service:null,isLoading:G,serverError:ce,validationErrors:J}),t.jsx(kO,{isOpen:$,onClose:()=>{F(!1),U(null)},onSubmit:ve,service:H,isLoading:G,serverError:ce,validationErrors:J}),t.jsx(zme,{isOpen:B,onClose:()=>{M(!1),U(null)},service:H}),t.jsx(xs,{isOpen:V,onClose:()=>{z(!1),U(null)},onConfirm:fe,title:"Delete Service",message:`Are you sure you want to delete "${H?.name}"? This will mark the service as inactive.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:G})]})}const i0={BASE:"/web/service-orders",GENERATE_LINK:"/web/service-orders/generate-payment-link"},$me=e=>{const r=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&r.append(s,n)}),r.toString()},Lg={getAll:async(e={})=>{const r=$me(e),s=r?`${i0.BASE}?${r}`:i0.BASE;console.log("[ServiceOrderService] Fetching service orders with params:",e);const n=await Se(je.get(s));return n.success?console.log("[ServiceOrderService] Fetched orders:",n.data.orders?.length):console.error("[ServiceOrderService] Failed to fetch orders:",n.message),n},getById:async e=>{console.log("[ServiceOrderService] Fetching service order:",e);const r=await Se(je.get(`${i0.BASE}/${e}`));return r.success?console.log("[ServiceOrderService] Fetched order:",r.data.order?.orderId):console.error("[ServiceOrderService] Failed to fetch order:",r.message),r},generatePaymentLink:async e=>{console.log("[ServiceOrderService] Generating payment link for:",e.phone);const r=await Se(je.post(i0.GENERATE_LINK,e));return r.success?console.log("[ServiceOrderService] Payment link generated:",r.data.paymentLink):console.error("[ServiceOrderService] Failed to generate payment link:",r.message),r},resendPaymentLink:async e=>{console.log("[ServiceOrderService] Resending payment link:",e);const r=await Se(je.post(`${i0.BASE}/${e}/resend`));return r.success?console.log("[ServiceOrderService] Payment link resent successfully"):console.error("[ServiceOrderService] Failed to resend payment link:",r.message),r}},qme=["PENDING","SUCCESS","FAILED","EXPIRED","CANCELLED"],Hme=["ADMIN","USER_REQUEST"],Gme=[{value:"createdAt",label:"Created Date"},{value:"totalAmount",label:"Amount"}],RO={search:"",status:"",source:"",phone:"",sortBy:"createdAt",sortOrder:"desc"};function Yme(e={}){const[r,s]=v.useState([]),[n,a]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[l,d]=v.useState({...RO,...e}),[h,f]=v.useState(!1),[x,p]=v.useState(null),b=v.useRef(null),S=v.useCallback(async(B=n.currentPage)=>{f(!0),p(null);try{const M={page:B,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.status&&{status:l.status},...l.source&&{source:l.source},...l.phone&&{phone:l.phone}},V=await Lg.getAll(M);V.success?(s(V.data.orders||[]),a(V.data.pagination||n)):(p(V.message),s([]))}catch{p("Failed to fetch service orders"),s([])}finally{f(!1)}},[l,n.limit,n.currentPage]),T=v.useCallback(async B=>{try{const M=await Lg.getById(B);return M.success?{success:!0,data:M.data.order}:{success:!1,error:M.message}}catch{return{success:!1,error:"Failed to fetch order details"}}},[]),A=v.useCallback(async B=>{f(!0),p(null);try{const M=await Lg.generatePaymentLink(B);return M.success?(await S(1),{success:!0,data:M.data}):{success:!1,error:M.message,validationErrors:Array.isArray(M.error)?M.error:M.data?.errors}}catch{return{success:!1,error:"Failed to generate payment link"}}finally{f(!1)}},[S]),P=v.useCallback(async B=>{f(!0),p(null);try{const M=await Lg.resendPaymentLink(B);return M.success?(s(V=>V.map(z=>z._id===B?{...z,...M.data.order}:z)),{success:!0,data:M.data}):{success:!1,error:M.message}}catch{return{success:!1,error:"Failed to resend payment link"}}finally{f(!1)}},[]),D=v.useCallback(B=>{d(M=>({...M,...B}))},[]),I=v.useCallback(B=>{b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{d(M=>({...M,search:B}))},300)},[]),L=v.useCallback(()=>{d({...RO,...e})},[e]),_=v.useCallback(B=>{S(B)},[S]),$=v.useCallback(B=>{a(M=>({...M,limit:B}))},[]),F=v.useCallback(()=>{p(null)},[]);return v.useEffect(()=>{S(1)},[l]),v.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),{orders:r,pagination:n,filters:l,isLoading:h,error:x,fetchOrders:S,getOrderById:T,generatePaymentLink:A,resendPaymentLink:P,updateFilters:D,updateSearch:I,resetFilters:L,changePage:_,changeLimit:$,clearError:F}}function Wme({filters:e,onFilterChange:r,onSearchChange:s,onReset:n,disabled:a=!1}){const[l,d]=v.useState(e.search||""),h=b=>{const S=b.target.value;d(S),s(S)},f=(b,S)=>{r({[b]:S})},x=()=>{d(""),n()},p=e.status||e.source||e.phone;return t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search by phone, order ID, name...",value:l,onChange:h,disabled:a,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),l&&t.jsx("button",{onClick:()=>{d(""),s("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(ss,{className:"h-4 w-4"})})]}),t.jsxs("select",{value:e.status,onChange:b=>f("status",b.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"All Status"}),qme.map(b=>t.jsx("option",{value:b,children:b.charAt(0)+b.slice(1).toLowerCase()},b))]}),t.jsxs("select",{value:e.source,onChange:b=>f("source",b.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"All Sources"}),Hme.map(b=>t.jsx("option",{value:b,children:b==="ADMIN"?"Admin Created":"User Request"},b))]}),t.jsx("select",{value:e.sortBy,onChange:b=>f("sortBy",b.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:Gme.map(b=>t.jsxs("option",{value:b.value,children:["Sort: ",b.label]},b.value))}),t.jsxs("select",{value:e.sortOrder,onChange:b=>f("sortOrder",b.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"desc",children:"Newest First"}),t.jsx("option",{value:"asc",children:"Oldest First"})]}),(p||l)&&t.jsxs("button",{onClick:x,disabled:a,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[t.jsx(Xi,{className:"h-4 w-4"}),"Reset"]})]})})}function A2(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function Xme(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function Kme(e){const r={PENDING:"bg-yellow-100 text-yellow-700",SUCCESS:"bg-green-100 text-green-700",FAILED:"bg-red-100 text-red-700",EXPIRED:"bg-gray-100 text-gray-600",CANCELLED:"bg-red-100 text-red-700"};return r[e]||r.PENDING}function Zme(e){return e==="ADMIN"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}function Qme({orders:e,isLoading:r,onView:s,onResend:n,resendingId:a}){const[l,d]=v.useState(null),h=async(f,x)=>{try{await navigator.clipboard.writeText(f),d(x),setTimeout(()=>d(null),2e3)}catch(p){console.error("Failed to copy:",p)}};return r?t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx(st,{className:"h-8 w-8 animate-spin text-gray-800"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading orders..."})]})}):e.length===0?t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:t.jsxs("div",{className:"text-center text-gray-500",children:[t.jsx("p",{className:"text-lg font-medium",children:"No orders found"}),t.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your filters or generate a new payment link."})]})}):t.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Order ID"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Customer"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Services"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Amount"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Source"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Created"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:e.map(f=>t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900 font-mono text-sm",children:f.orderId}),f.userExists&&t.jsx("span",{className:"text-xs text-green-600 bg-green-50 px-1.5 py-0.5 rounded",children:"User exists"}),!f.userExists&&t.jsx("span",{className:"text-xs text-amber-600 bg-amber-50 px-1.5 py-0.5 rounded",children:"New user"})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:f.customerName||f.userId?.name||"N/A"}),t.jsx("p",{className:"text-sm text-gray-500",children:f.phone})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"space-y-1",children:[f.services?.slice(0,2).map((x,p)=>t.jsx("p",{className:"text-sm text-gray-700 truncate max-w-[150px]",children:x.serviceName},p)),f.services?.length>2&&t.jsxs("p",{className:"text-xs text-gray-500",children:["+",f.services.length-2," more"]})]})}),t.jsx("td",{className:"px-6 py-4",children:f.couponCode?t.jsxs("div",{className:"space-y-1",children:[t.jsx("span",{className:"text-sm text-gray-500 line-through",children:A2(f.originalAmount)}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"font-medium text-gray-900",children:A2(f.finalAmount)}),t.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded",children:f.couponCode})]})]}):t.jsx("span",{className:"font-medium text-gray-900",children:A2(f.totalAmount)})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Zme(f.source)}`,children:f.source==="ADMIN"?"Admin":"Request"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"space-y-1",children:[t.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${Kme(f.status)}`,children:f.status}),f.whatsappSent&&t.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600",children:[t.jsx(C0,{className:"h-3 w-3"}),t.jsx("span",{children:"Sent"})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("p",{className:"text-sm text-gray-600",children:Xme(f.createdAt)})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx("button",{onClick:()=>s(f),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:t.jsx(Or,{className:"h-4 w-4"})}),f.paymentLinkUrl&&f.status==="PENDING"&&t.jsx("button",{onClick:()=>h(f.paymentLinkUrl,f._id),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Copy Payment Link",children:l===f._id?t.jsx(Rn,{className:"h-4 w-4 text-green-600"}):t.jsx(pu,{className:"h-4 w-4"})}),f.paymentLinkUrl&&f.status==="PENDING"&&t.jsx("a",{href:f.paymentLinkUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Open Payment Link",children:t.jsx(Uu,{className:"h-4 w-4"})}),f.status==="PENDING"&&t.jsx("button",{onClick:()=>n(f._id),disabled:a===f._id,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors disabled:opacity-50",title:"Resend via WhatsApp",children:a===f._id?t.jsx(st,{className:"h-4 w-4 animate-spin"}):t.jsx(ms,{className:"h-4 w-4"})})]})})]},f._id))})]})})})}function Jme({isOpen:e,onClose:r,onSubmit:s,isLoading:n=!1,serverError:a=null,successData:l=null}){const[d,h]=v.useState({phone:"",customerName:"",serviceIds:[],adminNotes:"",sendWhatsApp:!0}),[f,x]=v.useState({}),[p,b]=v.useState([]),[S,T]=v.useState(!1);v.useEffect(()=>{e&&(h({phone:"",customerName:"",serviceIds:[],adminNotes:"",sendWhatsApp:!0}),x({}))},[e]),v.useEffect(()=>{e&&A()},[e]);const A=async()=>{T(!0);try{const F=await Hc.getAll({isActive:!0,limit:100});F.success&&b(F.data.services||[])}catch(F){console.error("Failed to fetch services:",F)}finally{T(!1)}},P=(F,B)=>{h(M=>({...M,[F]:B})),f[F]&&x(M=>{const V={...M};return delete V[F],V})},D=F=>{h(B=>{const M=B.serviceIds.includes(F);return{...B,serviceIds:M?B.serviceIds.filter(V=>V!==F):[...B.serviceIds,F]}}),f.serviceIds&&x(B=>{const M={...B};return delete M.serviceIds,M})},I=()=>{const F={};return d.phone.trim()?/^[6-9]\d{9}$/.test(d.phone.trim())||(F.phone="Enter a valid 10-digit phone number"):F.phone="Phone number is required",d.serviceIds.length===0&&(F.serviceIds="Select at least one service"),x(F),Object.keys(F).length===0},L=F=>{if(F.preventDefault(),!I())return;const B={phone:d.phone.trim(),customerName:d.customerName.trim()||void 0,serviceIds:d.serviceIds,adminNotes:d.adminNotes.trim()||void 0,sendWhatsApp:d.sendWhatsApp};s(B)},_=()=>d.serviceIds.reduce((F,B)=>{const M=p.find(V=>V._id===B);return F+(M?.price||0)},0),$=F=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(F);return l?t.jsx(Pt,{isOpen:e,onClose:r,title:"Payment Link Generated",size:"md",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(ar,{className:"h-8 w-8 text-green-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Success!"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Payment link has been generated successfully."})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Order ID:"}),t.jsx("span",{className:"text-sm font-mono font-medium",children:l.serviceOrder?.orderId})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Amount:"}),t.jsx("span",{className:"text-sm font-medium",children:$(l.serviceOrder?.totalAmount)})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"User Status:"}),t.jsx("span",{className:"flex items-center gap-1 text-sm",children:l.userExists?t.jsxs(t.Fragment,{children:[t.jsx(Vu,{className:"h-4 w-4 text-green-600"}),t.jsx("span",{className:"text-green-600",children:"Existing User"})]}):t.jsxs(t.Fragment,{children:[t.jsx(nm,{className:"h-4 w-4 text-amber-600"}),t.jsx("span",{className:"text-amber-600",children:"New User"})]})})]}),l.serviceOrder?.whatsappSent&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"WhatsApp:"}),t.jsx("span",{className:"text-sm text-green-600",children:"Sent"})]})]}),l.paymentLink&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Link"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:l.paymentLink,readOnly:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm"}),t.jsx("button",{onClick:()=>navigator.clipboard.writeText(l.paymentLink),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 text-sm",children:"Copy"})]})]}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx("button",{onClick:r,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})}):t.jsx(Pt,{isOpen:e,onClose:r,title:"Generate Payment Link",size:"lg",children:t.jsxs("form",{onSubmit:L,className:"space-y-6",children:[a&&t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5 flex-shrink-0"}),t.jsx("p",{children:a})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Customer Information"}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",value:d.phone,onChange:F=>P("phone",F.target.value),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${f.phone?"border-red-500":"border-gray-300"}`,placeholder:"10-digit phone number",maxLength:10}),f.phone&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.phone})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),t.jsx("input",{type:"text",value:d.customerName,onChange:F=>P("customerName",F.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Optional - for reference"})]})]}),t.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Services ",t.jsx("span",{className:"text-red-500",children:"*"})]}),S?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx(st,{className:"h-6 w-6 animate-spin text-gray-400"}),t.jsx("span",{className:"ml-2 text-gray-500",children:"Loading services..."})]}):p.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:"No active services available"}):t.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:p.map(F=>t.jsxs("label",{className:`flex items-start gap-3 p-4 rounded-lg border cursor-pointer transition-colors ${d.serviceIds.includes(F._id)?"border-gray-800 bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:[t.jsx("input",{type:"checkbox",checked:d.serviceIds.includes(F._id),onChange:()=>D(F._id),className:"w-4 h-4 text-gray-800 rounded focus:ring-0 mt-1"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"font-medium text-gray-900",children:F.name}),t.jsx("p",{className:"font-semibold text-gray-900",children:$(F.price)})]}),F.shortDescription&&t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:F.shortDescription}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[F.durationInDays," days"]})]})]},F._id))}),f.serviceIds&&t.jsx("p",{className:"text-sm text-red-500",children:f.serviceIds})]}),d.serviceIds.length>0&&t.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-700",children:"Total Amount:"}),t.jsx("span",{className:"text-xl font-bold text-gray-900",children:$(_())})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Notes"}),t.jsx("textarea",{value:d.adminNotes,onChange:F=>P("adminNotes",F.target.value),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none",placeholder:"Optional notes for internal reference"})]}),t.jsx("div",{className:"pt-4 border-t border-gray-200",children:t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d.sendWhatsApp,onChange:F=>P("sendWhatsApp",F.target.checked),className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Send via WhatsApp"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Automatically send payment link to the customer's WhatsApp"})]})]})}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:r,disabled:n,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:n,className:"px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center gap-2",children:n?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Generating..."]}):"Generate Payment Link"})]})]})})}function Bo(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function E2(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function efe(e){const r={PENDING:"bg-yellow-100 text-yellow-700",SUCCESS:"bg-green-100 text-green-700",FAILED:"bg-red-100 text-red-700",EXPIRED:"bg-gray-100 text-gray-600",CANCELLED:"bg-red-100 text-red-700"};return r[e]||r.PENDING}function tfe({isOpen:e,onClose:r,order:s}){const[n,a]=v.useState(!1);if(!s)return null;const l=async()=>{if(s.paymentLinkUrl)try{await navigator.clipboard.writeText(s.paymentLinkUrl),a(!0),setTimeout(()=>a(!1),2e3)}catch(d){console.error("Failed to copy:",d)}};return t.jsx(Pt,{isOpen:e,onClose:r,title:"Order Details",size:"xl",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 font-mono",children:s.orderId}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${efe(s.status)}`,children:s.status}),t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s.source==="ADMIN"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:s.source==="ADMIN"?"Admin Created":"User Request"})]})]}),t.jsx("div",{className:"text-right",children:s.couponCode?t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm text-gray-500 line-through",children:Bo(s.originalAmount)}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Bo(s.finalAmount)})]}):t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Bo(s.totalAmount)})})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Customer Information"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(gr,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),t.jsx("p",{className:"font-medium text-gray-900",children:s.customerName||s.userId?.name||"N/A"})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(hs,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),t.jsx("p",{className:"font-medium text-gray-900",children:s.phone})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[s.userExists?t.jsx(Vu,{className:"h-5 w-5 text-green-500"}):t.jsx(nm,{className:"h-5 w-5 text-amber-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"User Status"}),t.jsx("p",{className:`font-medium ${s.userExists?"text-green-600":"text-amber-600"}`,children:s.userExists?"Existing User":"New User"})]})]}),s.userId?.email&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),t.jsx("p",{className:"font-medium text-gray-900",children:s.userId.email})]})]})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[t.jsx($a,{className:"h-4 w-4"}),"Services (",s.services?.length||0,")"]}),t.jsx("div",{className:"space-y-2",children:s.services?.map((d,h)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:d.serviceName}),t.jsxs("p",{className:"text-sm text-gray-500",children:[d.durationInDays," days"]})]}),t.jsx("p",{className:"font-semibold text-gray-900",children:Bo(d.price)})]},h))}),s.couponCode?t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Subtotal"}),t.jsx("span",{className:"text-gray-900",children:Bo(s.originalAmount)})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[t.jsx(on,{className:"h-3 w-3"}),"Discount (",s.couponCode,")"]}),t.jsxs("span",{className:"text-green-600",children:["-",Bo(s.discountAmount)]})]}),t.jsxs("div",{className:"flex justify-between font-semibold pt-2 border-t border-gray-200",children:[t.jsx("span",{className:"text-gray-900",children:"Total"}),t.jsx("span",{className:"text-gray-900",children:Bo(s.finalAmount)})]})]}):t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex justify-between font-semibold",children:[t.jsx("span",{className:"text-gray-900",children:"Total"}),t.jsx("span",{className:"text-gray-900",children:Bo(s.totalAmount)})]})})]}),s.paymentLinkUrl&&t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[t.jsx(bp,{className:"h-4 w-4"}),"Payment Link"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:s.paymentLinkUrl,readOnly:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm font-mono"}),t.jsx("button",{onClick:l,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:n?t.jsx(Rn,{className:"h-5 w-5 text-green-600"}):t.jsx(pu,{className:"h-5 w-5"})}),t.jsx("a",{href:s.paymentLinkUrl,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:t.jsx(Uu,{className:"h-5 w-5"})})]}),s.expiresAt&&t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Expires: ",E2(s.expiresAt)]})]}),s.whatsappSent&&t.jsxs("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 px-4 py-3 rounded-lg",children:[t.jsx(C0,{className:"h-5 w-5"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"WhatsApp Sent"}),s.whatsappSentAt&&t.jsx("p",{className:"text-xs opacity-75",children:E2(s.whatsappSentAt)})]})]}),s.adminNotes&&t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Admin Notes"}),t.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:s.adminNotes})]}),t.jsx("div",{className:"border-t border-gray-200 pt-4",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(dr,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-gray-500",children:"Created:"}),t.jsx("span",{className:"text-gray-900",children:E2(s.createdAt)})]}),s.adminId&&t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Created by:"}),t.jsx("span",{className:"ml-2 text-gray-900",children:s.adminId.name||s.adminId.username})]})]})}),t.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:t.jsx("button",{onClick:r,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})})}function rfe(){const{hasRole:e}=vn(),r=e(["SUPER_ADMIN","ADMIN"]),{orders:s,pagination:n,filters:a,isLoading:l,error:d,getOrderById:h,generatePaymentLink:f,resendPaymentLink:x,updateFilters:p,updateSearch:b,resetFilters:S,changePage:T,clearError:A}=Yme(),[P,D]=v.useState(!1),[I,L]=v.useState(!1),[_,$]=v.useState(null),[F,B]=v.useState(!1),[M,V]=v.useState(null),[z,H]=v.useState(null),[U,G]=v.useState(null),Q=v.useCallback(async le=>{const ge=await h(le._id);ge.success&&($(ge.data),L(!0))},[h]),ce=v.useCallback(()=>{V(null),H(null),D(!0)},[]),ne=v.useCallback(async le=>{G(le);try{const ge=await x(le);ge.success||console.error("Failed to resend:",ge.error)}finally{G(null)}},[x]),J=v.useCallback(async le=>{B(!0),V(null);try{const ge=await f(le);ge.success?H(ge.data):V(ge.error)}finally{B(!1)}},[f]),W=v.useCallback(()=>{D(!1),V(null),H(null)},[]);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Service Orders"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage payment links and service orders"})]}),t.jsx("div",{className:"flex items-center gap-3",children:r&&t.jsxs("button",{onClick:ce,className:"flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-900 transition-colors",children:[t.jsx(fr,{className:"h-5 w-5"}),t.jsx("span",{children:"Generate Payment Link"})]})})]}),d&&t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5 flex-shrink-0"}),t.jsx("p",{className:"flex-1",children:d}),t.jsx("button",{onClick:A,className:"text-red-500 hover:text-red-700 font-medium",children:"Dismiss"})]}),t.jsx(Wme,{filters:a,onFilterChange:p,onSearchChange:b,onReset:S,disabled:l}),t.jsx(Qme,{orders:s,isLoading:l,onView:Q,onResend:ne,resendingId:U}),n.totalPages>0&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsx(vr,{currentPage:n.currentPage,totalPages:n.totalPages,totalItems:n.totalCount,itemsPerPage:n.limit,onPageChange:T,itemLabel:"orders"})}),t.jsx(Jme,{isOpen:P,onClose:W,onSubmit:J,isLoading:F,serverError:M,successData:z}),t.jsx(tfe,{isOpen:I,onClose:()=>{L(!1),$(null)},order:_})]})}const l0={BASE:"/web/service-requests"},sfe=e=>{const r=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&r.append(s,n)}),r.toString()},Fg={getAll:async(e={})=>{const r=sfe(e),s=r?`${l0.BASE}?${r}`:l0.BASE;console.log("[ServiceRequestService] Fetching service requests with params:",e);const n=await Se(je.get(s));return n.success?console.log("[ServiceRequestService] Fetched requests:",n.data.requests?.length):console.error("[ServiceRequestService] Failed to fetch requests:",n.message),n},getById:async e=>{console.log("[ServiceRequestService] Fetching service request:",e);const r=await Se(je.get(`${l0.BASE}/${e}`));return r.success?console.log("[ServiceRequestService] Fetched request:",r.data.request?._id):console.error("[ServiceRequestService] Failed to fetch request:",r.message),r},approve:async(e,r={})=>{console.log("[ServiceRequestService] Approving service request:",e);const s=await Se(je.post(`${l0.BASE}/${e}/approve`,r));return s.success?console.log("[ServiceRequestService] Request approved successfully"):console.error("[ServiceRequestService] Failed to approve request:",s.message),s},reject:async(e,r)=>{console.log("[ServiceRequestService] Rejecting service request:",e);const s=await Se(je.post(`${l0.BASE}/${e}/reject`,r));return s.success?console.log("[ServiceRequestService] Request rejected successfully"):console.error("[ServiceRequestService] Failed to reject request:",s.message),s}},nfe=["PENDING","APPROVED","REJECTED"],afe=[{value:"createdAt",label:"Created Date"},{value:"totalAmount",label:"Amount"}],MO={search:"",status:"",userExists:"",sortBy:"createdAt",sortOrder:"desc"};function ife(e={}){const[r,s]=v.useState([]),[n,a]=v.useState(0),[l,d]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[h,f]=v.useState({...MO,...e}),[x,p]=v.useState(!1),[b,S]=v.useState(null),T=v.useRef(null),A=v.useCallback(async(V=l.currentPage)=>{p(!0),S(null);try{const z={page:V,limit:l.limit,sortBy:h.sortBy,sortOrder:h.sortOrder,...h.search&&{search:h.search},...h.status&&{status:h.status},...h.userExists!==""&&{userExists:h.userExists}},H=await Fg.getAll(z);H.success?(s(H.data.requests||[]),a(H.data.pendingCount||0),d(H.data.pagination||l)):(S(H.message),s([]))}catch{S("Failed to fetch service requests"),s([])}finally{p(!1)}},[h,l.limit,l.currentPage]),P=v.useCallback(async V=>{try{const z=await Fg.getById(V);return z.success?{success:!0,data:z.data.request}:{success:!1,error:z.message}}catch{return{success:!1,error:"Failed to fetch request details"}}},[]),D=v.useCallback(async(V,z={})=>{p(!0),S(null);try{const H=await Fg.approve(V,z);return H.success?(s(U=>U.map(G=>G._id===V?{...G,status:"APPROVED",...H.data.request}:G)),a(U=>Math.max(0,U-1)),{success:!0,data:H.data}):{success:!1,error:H.message}}catch{return{success:!1,error:"Failed to approve request"}}finally{p(!1)}},[]),I=v.useCallback(async(V,z)=>{p(!0),S(null);try{const H=await Fg.reject(V,z);return H.success?(s(U=>U.map(G=>G._id===V?{...G,status:"REJECTED",...H.data.request}:G)),a(U=>Math.max(0,U-1)),{success:!0,data:H.data}):{success:!1,error:H.message}}catch{return{success:!1,error:"Failed to reject request"}}finally{p(!1)}},[]),L=v.useCallback(V=>{f(z=>({...z,...V}))},[]),_=v.useCallback(V=>{T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{f(z=>({...z,search:V}))},300)},[]),$=v.useCallback(()=>{f({...MO,...e})},[e]),F=v.useCallback(V=>{A(V)},[A]),B=v.useCallback(V=>{d(z=>({...z,limit:V}))},[]),M=v.useCallback(()=>{S(null)},[]);return v.useEffect(()=>{A(1)},[h]),v.useEffect(()=>()=>{T.current&&clearTimeout(T.current)},[]),{requests:r,pendingCount:n,pagination:l,filters:h,isLoading:x,error:b,fetchRequests:A,getRequestById:P,approveRequest:D,rejectRequest:I,updateFilters:L,updateSearch:_,resetFilters:$,changePage:F,changeLimit:B,clearError:M}}function lfe({filters:e,onFilterChange:r,onSearchChange:s,onReset:n,pendingCount:a=0,disabled:l=!1}){const[d,h]=v.useState(e.search||""),f=S=>{const T=S.target.value;h(T),s(T)},x=(S,T)=>{r({[S]:T})},p=()=>{h(""),n()},b=e.status||e.userExists!=="";return t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a>0&&t.jsx("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-amber-100 text-amber-800 rounded-lg",children:t.jsxs("span",{className:"text-sm font-medium",children:[a," pending"]})}),t.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search by phone, name, email...",value:d,onChange:f,disabled:l,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),d&&t.jsx("button",{onClick:()=>{h(""),s("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(ss,{className:"h-4 w-4"})})]}),t.jsxs("select",{value:e.status,onChange:S=>x("status",S.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"All Status"}),nfe.map(S=>t.jsx("option",{value:S,children:S.charAt(0)+S.slice(1).toLowerCase()},S))]}),t.jsxs("select",{value:e.userExists,onChange:S=>x("userExists",S.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"All Users"}),t.jsx("option",{value:"true",children:"Existing Users"}),t.jsx("option",{value:"false",children:"New Users"})]}),t.jsx("select",{value:e.sortBy,onChange:S=>x("sortBy",S.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:afe.map(S=>t.jsxs("option",{value:S.value,children:["Sort: ",S.label]},S.value))}),t.jsxs("select",{value:e.sortOrder,onChange:S=>x("sortOrder",S.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"desc",children:"Newest First"}),t.jsx("option",{value:"asc",children:"Oldest First"})]}),(b||d)&&t.jsxs("button",{onClick:p,disabled:l,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[t.jsx(Xi,{className:"h-4 w-4"}),"Reset"]})]})})}function ofe(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function cfe(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function dfe(e){const r={PENDING:"bg-yellow-100 text-yellow-700",APPROVED:"bg-green-100 text-green-700",REJECTED:"bg-red-100 text-red-700"};return r[e]||r.PENDING}function ufe({requests:e,isLoading:r,canReview:s,onView:n,onApprove:a,onReject:l}){return r?t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx(st,{className:"h-8 w-8 animate-spin text-gray-800"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading requests..."})]})}):e.length===0?t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:t.jsxs("div",{className:"text-center text-gray-500",children:[t.jsx("p",{className:"text-lg font-medium",children:"No requests found"}),t.jsx("p",{className:"text-sm mt-1",children:"Service requests from users will appear here."})]})}):t.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Customer"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"User Status"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Services"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Amount"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Requested"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:e.map(d=>t.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 ${d.status==="PENDING"?"bg-amber-50/30":""}`,children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:d.name||"N/A"}),t.jsx("p",{className:"text-sm text-gray-500",children:d.phone}),d.email&&t.jsx("p",{className:"text-sm text-gray-400 truncate",children:d.email})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex items-center gap-2",children:d.userExists?t.jsxs(t.Fragment,{children:[t.jsx(Vu,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{className:"text-sm text-green-600",children:"Existing"})]}):t.jsxs(t.Fragment,{children:[t.jsx(nm,{className:"h-4 w-4 text-amber-500"}),t.jsx("span",{className:"text-sm text-amber-600",children:"New"})]})})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"space-y-1",children:[d.services?.slice(0,2).map((h,f)=>t.jsx("p",{className:"text-sm text-gray-700 truncate max-w-[150px]",children:h.serviceName||h.serviceId?.name},f)),d.services?.length>2&&t.jsxs("p",{className:"text-xs text-gray-500",children:["+",d.services.length-2," more"]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"font-medium text-gray-900",children:ofe(d.totalAmount)})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${dfe(d.status)}`,children:d.status})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("p",{className:"text-sm text-gray-600",children:cfe(d.createdAt)})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx("button",{onClick:()=>n(d),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:t.jsx(Or,{className:"h-4 w-4"})}),d.status==="PENDING"&&s&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>a(d),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve Request",children:t.jsx(Rn,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>l(d),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject Request",children:t.jsx(ss,{className:"h-4 w-4"})})]})]})})]},d._id))})]})})})}function T2(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function hfe({isOpen:e,onClose:r,onSubmit:s,request:n,isLoading:a=!1,serverError:l=null,successData:d=null}){const[h,f]=v.useState({adminNotes:"",sendWhatsApp:!0,alternativePhone:"",alternativeEmail:"",contactPreference:["REGISTERED"]}),[x,p]=v.useState({});v.useEffect(()=>{e&&(f({adminNotes:"",sendWhatsApp:!0,alternativePhone:"",alternativeEmail:"",contactPreference:["REGISTERED"]}),p({}))},[e]);const b=D=>D&&D.replace(/\D/g,"").length!==10?"Phone number must be exactly 10 digits":null,S=D=>D?/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(D)?null:"Please enter a valid email address":null,T=!!(h.alternativePhone.trim()||h.alternativeEmail.trim()),A=D=>{const I=h.contactPreference;if(I.includes(D)){const L=I.filter(_=>_!==D);if(L.length===0){p(_=>({..._,contactPreference:"At least one contact must be selected"}));return}f(_=>({..._,contactPreference:L})),p(_=>({..._,contactPreference:null}))}else f(L=>({...L,contactPreference:[...I,D]})),p(L=>({...L,contactPreference:null}))},P=D=>{D.preventDefault(),p({});const I={};if(h.alternativePhone.trim()){const _=b(h.alternativePhone.trim());_&&(I.alternativePhone=_)}if(h.alternativeEmail.trim()){const _=S(h.alternativeEmail.trim());_&&(I.alternativeEmail=_)}if(h.contactPreference.length===0&&(I.contactPreference="Please select at least one contact to send the payment link"),h.contactPreference.includes("ALTERNATIVE")&&!T&&(I.contactPreference="Please provide alternative phone or email to send to alternative contact"),Object.keys(I).length>0){p(I);return}const L={adminNotes:h.adminNotes.trim()||void 0,sendWhatsApp:h.sendWhatsApp,contactPreference:h.contactPreference};h.alternativePhone.trim()&&(L.alternativePhone=h.alternativePhone.replace(/\D/g,"")),h.alternativeEmail.trim()&&(L.alternativeEmail=h.alternativeEmail.toLowerCase().trim()),s(L)};return n?d?t.jsx(Pt,{isOpen:e,onClose:r,title:"Request Approved",size:"md",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(ar,{className:"h-8 w-8 text-green-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Approved!"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Payment link has been generated and sent."})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Order ID:"}),t.jsx("span",{className:"text-sm font-mono font-medium",children:d.serviceOrder?.orderId})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Amount:"}),t.jsx("span",{className:"text-sm font-medium",children:T2(d.serviceOrder?.totalAmount||n.totalAmount)})]})]}),d.paymentLink&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Link"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:d.paymentLink,readOnly:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm"}),t.jsx("button",{onClick:()=>navigator.clipboard.writeText(d.paymentLink),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 text-sm",children:"Copy"})]})]}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx("button",{onClick:r,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})}):t.jsx(Pt,{isOpen:e,onClose:r,title:"Approve Service Request",size:"md",children:t.jsxs("form",{onSubmit:P,className:"space-y-6",children:[l&&t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5 flex-shrink-0"}),t.jsx("p",{children:l})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-gray-900",children:n.name||"N/A"}),t.jsx("p",{className:"text-sm text-gray-500",children:n.phone})]}),t.jsx("div",{className:"flex items-center gap-1",children:n.userExists?t.jsxs(t.Fragment,{children:[t.jsx(Vu,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{className:"text-xs text-green-600",children:"Existing"})]}):t.jsxs(t.Fragment,{children:[t.jsx(nm,{className:"h-4 w-4 text-amber-500"}),t.jsx("span",{className:"text-xs text-amber-600",children:"New"})]})})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[t.jsxs("p",{className:"text-sm text-gray-500 mb-2 flex items-center gap-1",children:[t.jsx($a,{className:"h-4 w-4"}),"Services"]}),t.jsx("div",{className:"space-y-1",children:n.services?.map((D,I)=>t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-700",children:D.serviceName||D.serviceId?.name}),t.jsx("span",{className:"text-gray-900 font-medium",children:T2(D.price)})]},I))}),t.jsxs("div",{className:"border-t border-gray-200 pt-2 mt-2 flex items-center justify-between",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Total"}),t.jsx("span",{className:"font-bold text-gray-900",children:T2(n.totalAmount)})]})]})]}),n.userNote&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Note"}),t.jsx("p",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg border border-blue-100",children:n.userNote})]}),t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(zu,{className:"h-5 w-5 text-gray-700"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Payment Link Delivery"})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:t.jsxs("p",{className:"text-xs text-blue-800",children:[t.jsx("strong",{children:"Tip:"})," You can send payment links to alternative contacts in addition to or instead of the registered contact. Simply provide an alternative phone or email below."]})}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Alternative Phone Number ",t.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(hs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:h.alternativePhone,onChange:D=>{f(I=>({...I,alternativePhone:D.target.value})),p(I=>({...I,alternativePhone:null}))},maxLength:10,placeholder:"9876543210",className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${x.alternativePhone?"border-red-300 bg-red-50":"border-gray-300"}`})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"10-digit Indian phone number without country code"}),x.alternativePhone&&t.jsxs("p",{className:"flex items-center gap-1 text-xs text-red-600 mt-1",children:[t.jsx(Rt,{className:"h-3 w-3"}),x.alternativePhone]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Alternative Email ",t.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Ji,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"email",value:h.alternativeEmail,onChange:D=>{f(I=>({...I,alternativeEmail:D.target.value})),p(I=>({...I,alternativeEmail:null}))},placeholder:"alternative@example.com",className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${x.alternativeEmail?"border-red-300 bg-red-50":"border-gray-300"}`})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Payment link will be sent to this email address"}),x.alternativeEmail&&t.jsxs("p",{className:"flex items-center gap-1 text-xs text-red-600 mt-1",children:[t.jsx(Rt,{className:"h-3 w-3"}),x.alternativeEmail]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Send Payment Link To: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:`flex items-start gap-3 p-3 border rounded-lg cursor-pointer transition-colors ${h.contactPreference.includes("REGISTERED")?"bg-blue-50 border-blue-300":"bg-white border-gray-300 hover:bg-gray-50"}`,children:[t.jsx("input",{type:"checkbox",checked:h.contactPreference.includes("REGISTERED"),onChange:()=>A("REGISTERED"),className:"w-4 h-4 text-blue-600 rounded focus:ring-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Registered contact"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[n.phone&&`WhatsApp: ${n.phone}`,n.email&&`, Email: ${n.email}`]})]})]}),t.jsxs("label",{className:`flex items-start gap-3 p-3 border rounded-lg transition-colors ${T?h.contactPreference.includes("ALTERNATIVE")?"bg-blue-50 border-blue-300 cursor-pointer":"bg-white border-gray-300 hover:bg-gray-50 cursor-pointer":"opacity-50 cursor-not-allowed bg-gray-100 border-gray-200"}`,children:[t.jsx("input",{type:"checkbox",checked:h.contactPreference.includes("ALTERNATIVE"),onChange:()=>A("ALTERNATIVE"),disabled:!T,className:"w-4 h-4 text-blue-600 rounded focus:ring-0 mt-0.5 disabled:cursor-not-allowed"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Alternative contact"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:T?`${h.alternativePhone?"WhatsApp: "+h.alternativePhone:""}${h.alternativePhone&&h.alternativeEmail?", ":""}${h.alternativeEmail?"Email: "+h.alternativeEmail:""}`:"Provide phone or email above to enable"})]})]})]}),x.contactPreference&&t.jsxs("p",{className:"flex items-center gap-1 text-xs text-red-600 mt-2",children:[t.jsx(Tt,{className:"h-3 w-3"}),x.contactPreference]})]}),t.jsx("div",{className:"pt-2 border-t border-gray-200",children:t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:h.sendWhatsApp,onChange:D=>f({...h,sendWhatsApp:D.target.checked}),className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Send payment link via WhatsApp"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Automatically send WhatsApp message to selected contacts"})]})]})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Admin Notes ",t.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),t.jsx("textarea",{value:h.adminNotes,onChange:D=>f({...h,adminNotes:D.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none",placeholder:"Optional notes for internal reference"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:r,disabled:a,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:a?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Approving..."]}):"Approve & Generate Link"})]})]})}):null}function LO(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function mfe({isOpen:e,onClose:r,onSubmit:s,request:n,isLoading:a=!1,serverError:l=null}){const[d,h]=v.useState({reason:"",adminNotes:""}),[f,x]=v.useState({});v.useEffect(()=>{e&&(h({reason:"",adminNotes:""}),x({}))},[e]);const p=()=>{const S={};return d.reason.trim()||(S.reason="Please provide a reason for rejection"),x(S),Object.keys(S).length===0},b=S=>{S.preventDefault(),p()&&s({reason:d.reason.trim(),adminNotes:d.adminNotes.trim()||void 0})};return n?t.jsx(Pt,{isOpen:e,onClose:r,title:"Reject Service Request",size:"md",children:t.jsxs("form",{onSubmit:b,className:"space-y-6",children:[l&&t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5 flex-shrink-0"}),t.jsx("p",{children:l})]}),t.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx(Rt,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-red-800",children:"Rejecting this request"}),t.jsx("p",{className:"text-sm text-red-600 mt-1",children:"This action cannot be undone. The user will not be able to proceed with this request."})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-gray-900",children:n.name||"N/A"}),t.jsx("p",{className:"text-sm text-gray-500",children:n.phone})]})}),t.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[t.jsxs("p",{className:"text-sm text-gray-500 mb-2 flex items-center gap-1",children:[t.jsx($a,{className:"h-4 w-4"}),"Requested Services"]}),t.jsx("div",{className:"space-y-1",children:n.services?.map((S,T)=>t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-700",children:S.serviceName||S.serviceId?.name}),t.jsx("span",{className:"text-gray-900 font-medium",children:LO(S.price)})]},T))}),t.jsxs("div",{className:"border-t border-gray-200 pt-2 mt-2 flex items-center justify-between",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Total"}),t.jsx("span",{className:"font-bold text-gray-900",children:LO(n.totalAmount)})]})]})]}),n.userNote&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Note"}),t.jsx("p",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg border border-blue-100",children:n.userNote})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rejection Reason ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:d.reason,onChange:S=>{h({...d,reason:S.target.value}),f.reason&&x({...f,reason:null})},rows:3,className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none ${f.reason?"border-red-500":"border-gray-300"}`,placeholder:"Explain why this request is being rejected"}),f.reason&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.reason}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This reason may be shared with the user"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Notes"}),t.jsx("textarea",{value:d.adminNotes,onChange:S=>h({...d,adminNotes:S.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none",placeholder:"Optional internal notes (not shared with user)"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:r,disabled:a,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:a?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Rejecting..."]}):"Reject Request"})]})]})}):null}function FO(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function D2(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function ffe(e){const r={PENDING:"bg-yellow-100 text-yellow-700",APPROVED:"bg-green-100 text-green-700",REJECTED:"bg-red-100 text-red-700"};return r[e]||r.PENDING}function gfe({isOpen:e,onClose:r,request:s}){return s?t.jsx(Pt,{isOpen:e,onClose:r,title:"Request Details",size:"xl",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsx("div",{children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${ffe(s.status)}`,children:s.status}),s.userExists?t.jsxs("span",{className:"flex items-center gap-1 text-sm text-green-600",children:[t.jsx(Vu,{className:"h-4 w-4"}),"Existing User"]}):t.jsxs("span",{className:"flex items-center gap-1 text-sm text-amber-600",children:[t.jsx(nm,{className:"h-4 w-4"}),"New User"]})]})}),t.jsx("div",{className:"text-right",children:t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:FO(s.totalAmount)})})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Customer Information"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(gr,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),t.jsx("p",{className:"font-medium text-gray-900",children:s.name||"N/A"})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(hs,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),t.jsx("p",{className:"font-medium text-gray-900",children:s.phone})]})]}),s.email&&t.jsxs("div",{className:"flex items-center gap-3 col-span-2",children:[t.jsx(Ji,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),t.jsx("p",{className:"font-medium text-gray-900",children:s.email})]})]})]})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[t.jsx($a,{className:"h-4 w-4"}),"Requested Services (",s.services?.length||0,")"]}),t.jsx("div",{className:"space-y-2",children:s.services?.map((n,a)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:n.serviceName||n.serviceId?.name}),n.serviceId?.durationInDays&&t.jsxs("p",{className:"text-sm text-gray-500",children:[n.serviceId.durationInDays," days"]})]}),t.jsx("p",{className:"font-semibold text-gray-900",children:FO(n.price)})]},a))})]}),s.userNote&&t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[t.jsx(UP,{className:"h-4 w-4"}),"User Note"]}),t.jsx("p",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg border border-blue-100",children:s.userNote})]}),s.status==="REJECTED"&&t.jsx("div",{className:"border-t border-gray-200 pt-4",children:t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-sm font-medium text-red-800 mb-2 flex items-center gap-2",children:[t.jsx(Tt,{className:"h-4 w-4"}),"Rejection Details"]}),s.rejectionReason&&t.jsx("p",{className:"text-sm text-red-700",children:s.rejectionReason}),s.reviewedBy&&t.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Rejected by: ",s.reviewedBy.name||s.reviewedBy.username]}),s.reviewedAt&&t.jsxs("p",{className:"text-xs text-red-600",children:["Rejected at: ",D2(s.reviewedAt)]})]})}),s.status==="APPROVED"&&s.serviceOrderId&&t.jsx("div",{className:"border-t border-gray-200 pt-4",children:t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[t.jsx("h3",{className:"text-sm font-medium text-green-800 mb-2",children:"Approved"}),t.jsxs("p",{className:"text-sm text-green-700",children:["Order ID: ",s.serviceOrderId.orderId||s.serviceOrderId]}),s.reviewedBy&&t.jsxs("p",{className:"text-xs text-green-600 mt-2",children:["Approved by: ",s.reviewedBy.name||s.reviewedBy.username]}),s.reviewedAt&&t.jsxs("p",{className:"text-xs text-green-600",children:["Approved at: ",D2(s.reviewedAt)]})]})}),t.jsx("div",{className:"border-t border-gray-200 pt-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[t.jsx(dr,{className:"h-4 w-4"}),t.jsx("span",{children:"Requested:"}),t.jsx("span",{className:"text-gray-900",children:D2(s.createdAt)})]})}),t.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:t.jsx("button",{onClick:r,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})}):null}function xfe(){const{hasRole:e}=vn(),r=e(["SUPER_ADMIN","ADMIN"]),{requests:s,pendingCount:n,pagination:a,filters:l,isLoading:d,error:h,getRequestById:f,approveRequest:x,rejectRequest:p,updateFilters:b,updateSearch:S,resetFilters:T,changePage:A,clearError:P}=ife(),[D,I]=v.useState(!1),[L,_]=v.useState(!1),[$,F]=v.useState(!1),[B,M]=v.useState(null),[V,z]=v.useState(!1),[H,U]=v.useState(null),[G,Q]=v.useState(null),ce=v.useCallback(async re=>{const X=await f(re._id);X.success&&(M(X.data),I(!0))},[f]),ne=v.useCallback(re=>{M(re),U(null),Q(null),_(!0)},[]),J=v.useCallback(re=>{M(re),U(null),F(!0)},[]),W=v.useCallback(async re=>{if(B){z(!0),U(null);try{const X=await x(B._id,re);X.success?Q(X.data):U(X.error)}finally{z(!1)}}},[B,x]),le=v.useCallback(async re=>{if(B){z(!0),U(null);try{const X=await p(B._id,re);X.success?(F(!1),M(null)):U(X.error)}finally{z(!1)}}},[B,p]),ge=v.useCallback(()=>{_(!1),M(null),U(null),Q(null)},[]);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Service Requests"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Review and manage service requests from users"})]}),n>0&&t.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-100 text-amber-800 rounded-lg",children:[t.jsx("span",{className:"font-bold text-lg",children:n}),t.jsx("span",{className:"text-sm font-medium",children:"pending requests"})]})]}),h&&t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5 flex-shrink-0"}),t.jsx("p",{className:"flex-1",children:h}),t.jsx("button",{onClick:P,className:"text-red-500 hover:text-red-700 font-medium",children:"Dismiss"})]}),t.jsx(lfe,{filters:l,onFilterChange:b,onSearchChange:S,onReset:T,pendingCount:n,disabled:d}),t.jsx(ufe,{requests:s,isLoading:d,canReview:r,onView:ce,onApprove:ne,onReject:J}),a.totalPages>0&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsx(vr,{currentPage:a.currentPage,totalPages:a.totalPages,totalItems:a.totalCount,itemsPerPage:a.limit,onPageChange:A,itemLabel:"requests"})}),t.jsx(gfe,{isOpen:D,onClose:()=>{I(!1),M(null)},request:B}),t.jsx(hfe,{isOpen:L,onClose:ge,onSubmit:W,request:B,isLoading:V,serverError:H,successData:G}),t.jsx(mfe,{isOpen:$,onClose:()=>{F(!1),M(null),U(null)},onSubmit:le,request:B,isLoading:V,serverError:H})]})}const ru={BASE:"/web/user-subscriptions",CHECK_STATUS:"/web/user-subscriptions/check-status"},pfe=e=>{const r=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&r.append(s,n)}),r.toString()},o0={getAll:async(e={})=>{const r=pfe(e),s=r?`${ru.BASE}?${r}`:ru.BASE;console.log("[UserSubscriptionService] Fetching subscriptions with params:",e);const n=await Se(je.get(s));return n.success?console.log("[UserSubscriptionService] Fetched subscriptions:",n.data.subscriptions?.length):console.error("[UserSubscriptionService] Failed to fetch subscriptions:",n.message),n},getById:async e=>{console.log("[UserSubscriptionService] Fetching subscription:",e);const r=await Se(je.get(`${ru.BASE}/${e}`));return r.success?console.log("[UserSubscriptionService] Fetched subscription:",r.data.subscription?._id):console.error("[UserSubscriptionService] Failed to fetch subscription:",r.message),r},checkStatus:async e=>{console.log("[UserSubscriptionService] Checking status for:",e.phone);const r=await Se(je.post(ru.CHECK_STATUS,e));return r.success?console.log("[UserSubscriptionService] Status checked:",r.data.hasActiveSubscription):console.error("[UserSubscriptionService] Failed to check status:",r.message),r},cancel:async(e,r)=>{console.log("[UserSubscriptionService] Cancelling subscription:",e);const s=await Se(je.post(`${ru.BASE}/${e}/cancel`,r));return s.success?console.log("[UserSubscriptionService] Subscription cancelled successfully"):console.error("[UserSubscriptionService] Failed to cancel subscription:",s.message),s},updateNotes:async(e,r)=>{console.log("[UserSubscriptionService] Updating notes for subscription:",e);const s=await Se(je.patch(`${ru.BASE}/${e}/notes`,r));return s.success?console.log("[UserSubscriptionService] Notes updated successfully"):console.error("[UserSubscriptionService] Failed to update notes:",s.message),s}},yfe=["ACTIVE","EXPIRED","CANCELLED","REFUNDED"],bfe=[{value:"createdAt",label:"Created Date"},{value:"startDate",label:"Start Date"},{value:"endDate",label:"End Date"},{value:"amountPaid",label:"Amount"}],BO={search:"",status:"",serviceId:"",phone:"",sortBy:"createdAt",sortOrder:"desc"};function vfe(e={}){const[r,s]=v.useState([]),[n,a]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[l,d]=v.useState({...BO,...e}),[h,f]=v.useState(!1),[x,p]=v.useState(null),b=v.useRef(null),S=v.useCallback(async(M=n.currentPage)=>{f(!0),p(null);try{const V={page:M,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.status&&{status:l.status},...l.serviceId&&{serviceId:l.serviceId},...l.phone&&{phone:l.phone}},z=await o0.getAll(V);z.success?(s(z.data.subscriptions||[]),a(z.data.pagination||n)):(p(z.message),s([]))}catch{p("Failed to fetch subscriptions"),s([])}finally{f(!1)}},[l,n.limit,n.currentPage]),T=v.useCallback(async M=>{try{const V=await o0.getById(M);return V.success?{success:!0,data:V.data.subscription}:{success:!1,error:V.message}}catch{return{success:!1,error:"Failed to fetch subscription details"}}},[]),A=v.useCallback(async M=>{try{const V=await o0.checkStatus(M);return V.success?{success:!0,data:V.data}:{success:!1,error:V.message}}catch{return{success:!1,error:"Failed to check subscription status"}}},[]),P=v.useCallback(async(M,V)=>{f(!0),p(null);try{const z=await o0.cancel(M,V);return z.success?(s(H=>H.map(U=>U._id===M?{...U,status:"CANCELLED",...z.data.subscription}:U)),{success:!0,data:z.data}):{success:!1,error:z.message}}catch{return{success:!1,error:"Failed to cancel subscription"}}finally{f(!1)}},[]),D=v.useCallback(async(M,V)=>{f(!0),p(null);try{const z=await o0.updateNotes(M,V);return z.success?(s(H=>H.map(U=>U._id===M?{...U,...z.data.subscription}:U)),{success:!0,data:z.data}):{success:!1,error:z.message}}catch{return{success:!1,error:"Failed to update notes"}}finally{f(!1)}},[]),I=v.useCallback(M=>{d(V=>({...V,...M}))},[]),L=v.useCallback(M=>{b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{d(V=>({...V,search:M}))},300)},[]),_=v.useCallback(()=>{d({...BO,...e})},[e]),$=v.useCallback(M=>{S(M)},[S]),F=v.useCallback(M=>{a(V=>({...V,limit:M}))},[]),B=v.useCallback(()=>{p(null)},[]);return v.useEffect(()=>{S(1)},[l]),v.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),{subscriptions:r,pagination:n,filters:l,isLoading:h,error:x,fetchSubscriptions:S,getSubscriptionById:T,checkStatus:A,cancelSubscription:P,updateNotes:D,updateFilters:I,updateSearch:L,resetFilters:_,changePage:$,changeLimit:F,clearError:B}}function Nfe({filters:e,onFilterChange:r,onSearchChange:s,onReset:n,disabled:a=!1}){const[l,d]=v.useState(e.search||""),[h,f]=v.useState([]);v.useEffect(()=>{(async()=>{try{const A=await Hc.getAll({limit:100});A.success&&f(A.data.services||[])}catch(A){console.error("Failed to fetch services:",A)}})()},[]);const x=T=>{const A=T.target.value;d(A),s(A)},p=(T,A)=>{r({[T]:A})},b=()=>{d(""),n()},S=e.status||e.serviceId||e.phone;return t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search by phone...",value:l,onChange:x,disabled:a,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),l&&t.jsx("button",{onClick:()=>{d(""),s("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(ss,{className:"h-4 w-4"})})]}),t.jsxs("select",{value:e.status,onChange:T=>p("status",T.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"All Status"}),yfe.map(T=>t.jsx("option",{value:T,children:T.charAt(0)+T.slice(1).toLowerCase()},T))]}),t.jsxs("select",{value:e.serviceId,onChange:T=>p("serviceId",T.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"All Services"}),h.map(T=>t.jsx("option",{value:T._id,children:T.name},T._id))]}),t.jsx("select",{value:e.sortBy,onChange:T=>p("sortBy",T.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:bfe.map(T=>t.jsxs("option",{value:T.value,children:["Sort: ",T.label]},T.value))}),t.jsxs("select",{value:e.sortOrder,onChange:T=>p("sortOrder",T.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[t.jsx("option",{value:"desc",children:"Newest First"}),t.jsx("option",{value:"asc",children:"Oldest First"})]}),(S||l)&&t.jsxs("button",{onClick:b,disabled:a,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[t.jsx(Xi,{className:"h-4 w-4"}),"Reset"]})]})})}function jfe(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function UO(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function wfe(e){const r={ACTIVE:"bg-green-100 text-green-700",EXPIRED:"bg-gray-100 text-gray-600",CANCELLED:"bg-red-100 text-red-700",REFUNDED:"bg-purple-100 text-purple-700"};return r[e]||r.ACTIVE}function Sfe(e){if(!e)return null;const n=new Date(e)-new Date;return Math.ceil(n/(1e3*60*60*24))}function Cfe({subscriptions:e,isLoading:r,canCancel:s,canEditNotes:n,onView:a,onCancel:l,onEditNotes:d}){return r?t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx(st,{className:"h-8 w-8 animate-spin text-gray-800"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading subscriptions..."})]})}):e.length===0?t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:t.jsxs("div",{className:"text-center text-gray-500",children:[t.jsx("p",{className:"text-lg font-medium",children:"No subscriptions found"}),t.jsx("p",{className:"text-sm mt-1",children:"User subscriptions will appear here after successful payments."})]})}):t.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"User"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Service"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Amount"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Duration"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Valid Until"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:e.map(h=>{const f=h.status==="ACTIVE"?Sfe(h.endDate):null;return t.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 ${h.status==="CANCELLED"?"bg-red-50/30":""}`,children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:h.userId?.name||"N/A"}),t.jsx("p",{className:"text-sm text-gray-500",children:h.phone}),h.userId?.email&&t.jsx("p",{className:"text-xs text-gray-400 truncate",children:h.userId.email})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("p",{className:"font-medium text-gray-900 truncate max-w-[150px]",children:h.serviceId?.name||"N/A"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"font-medium text-gray-900",children:jfe(h.amountPaid)})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("span",{className:"text-sm text-gray-600",children:[h.durationInDays," days"]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"space-y-1",children:[t.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${wfe(h.status)}`,children:h.status}),f!==null&&f>0&&t.jsxs("p",{className:"text-xs text-gray-500",children:[f," days left"]}),f!==null&&f<=0&&h.status==="ACTIVE"&&t.jsx("p",{className:"text-xs text-amber-600",children:"Expiring soon"})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{className:"text-gray-900",children:UO(h.endDate)}),t.jsxs("p",{className:"text-gray-500 text-xs",children:["From ",UO(h.startDate)]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx("button",{onClick:()=>a(h),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:t.jsx(Or,{className:"h-4 w-4"})}),n&&t.jsx("button",{onClick:()=>d(h),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit Notes",children:t.jsx(Es,{className:"h-4 w-4"})}),h.status==="ACTIVE"&&s&&t.jsx("button",{onClick:()=>l(h),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Cancel Subscription",children:t.jsx(Rt,{className:"h-4 w-4"})})]})})]},h._id)})})]})})})}function Afe(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function Efe(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function Tfe({isOpen:e,onClose:r,onSubmit:s,subscription:n,isLoading:a=!1,serverError:l=null}){const[d,h]=v.useState(""),[f,x]=v.useState(null);v.useEffect(()=>{e&&(h(""),x(null))},[e]);const p=b=>{if(b.preventDefault(),!d.trim()){x("Please provide a reason for cancellation");return}s({reason:d.trim()})};return n?t.jsx(Pt,{isOpen:e,onClose:r,title:"Cancel Subscription",size:"md",children:t.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l&&t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5 flex-shrink-0"}),t.jsx("p",{children:l})]}),t.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx(Rt,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-red-800",children:"Cancel this subscription?"}),t.jsx("p",{className:"text-sm text-red-600 mt-1",children:"This action will immediately end the user's access to this service."})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(gr,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:n.userId?.name||"N/A"}),t.jsx("p",{className:"text-sm text-gray-500",children:n.phone})]})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-3 flex items-center gap-3",children:[t.jsx($a,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-gray-900",children:n.serviceId?.name||"N/A"}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Valid until ",Efe(n.endDate)]})]}),t.jsx("p",{className:"font-semibold text-gray-900",children:Afe(n.amountPaid)})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Cancellation Reason ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:d,onChange:b=>{h(b.target.value),f&&x(null)},rows:3,className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none ${f?"border-red-500":"border-gray-300"}`,placeholder:"Enter the reason for cancellation"}),f&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:f})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:r,disabled:a,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Keep Active"}),t.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:a?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Cancelling..."]}):"Cancel Subscription"})]})]})}):null}function Dfe({isOpen:e,onClose:r,onSubmit:s,subscription:n,isLoading:a=!1,serverError:l=null}){const[d,h]=v.useState("");v.useEffect(()=>{e&&n&&h(n.adminNotes||"")},[e,n]);const f=x=>{x.preventDefault(),s({adminNotes:d.trim()})};return n?t.jsx(Pt,{isOpen:e,onClose:r,title:"Edit Admin Notes",size:"md",children:t.jsxs("form",{onSubmit:f,className:"space-y-6",children:[l&&t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5 flex-shrink-0"}),t.jsx("p",{children:l})]}),t.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:n.userId?.name||n.phone}),t.jsx("p",{className:"text-sm text-gray-500",children:n.serviceId?.name||"N/A"})]}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.status==="ACTIVE"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:n.status})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Notes"}),t.jsx("textarea",{value:d,onChange:x=>h(x.target.value),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none",placeholder:"Add internal notes about this subscription..."}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"These notes are only visible to admins"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:r,disabled:a,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center gap-2",children:a?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):"Save Notes"})]})]})}):null}function zO(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function c0(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function Ofe(e){const r={ACTIVE:"bg-green-100 text-green-700",EXPIRED:"bg-gray-100 text-gray-600",CANCELLED:"bg-red-100 text-red-700",REFUNDED:"bg-purple-100 text-purple-700"};return r[e]||r.ACTIVE}function Pfe(e){if(!e)return null;const n=new Date(e)-new Date;return Math.ceil(n/(1e3*60*60*24))}function kfe({isOpen:e,onClose:r,subscription:s}){if(!s)return null;const n=s.status==="ACTIVE"?Pfe(s.endDate):null;return t.jsx(Pt,{isOpen:e,onClose:r,title:"Subscription Details",size:"xl",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Ofe(s.status)}`,children:s.status}),n!==null&&n>0&&t.jsxs("span",{className:"text-sm text-gray-500",children:[n," days remaining"]})]}),t.jsx("div",{className:"text-right",children:t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:zO(s.amountPaid)})})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"User Information"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(gr,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),t.jsx("p",{className:"font-medium text-gray-900",children:s.userId?.name||"N/A"})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(hs,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),t.jsx("p",{className:"font-medium text-gray-900",children:s.phone})]})]}),s.userId?.email&&t.jsxs("div",{className:"flex items-center gap-3 col-span-2",children:[t.jsx(Ji,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),t.jsx("p",{className:"font-medium text-gray-900",children:s.userId.email})]})]})]})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[t.jsx($a,{className:"h-4 w-4"}),"Service Details"]}),t.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:s.serviceId?.name||"N/A"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s.durationInDays," days subscription"]})]}),t.jsx("p",{className:"font-bold text-gray-900",children:zO(s.serviceId?.price||s.amountPaid)})]})})]}),s.serviceOrderId&&t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[t.jsx(bp,{className:"h-4 w-4"}),"Order Information"]}),t.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:t.jsx("div",{className:"grid grid-cols-2 gap-4 text-sm",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"Order ID"}),t.jsx("p",{className:"font-mono font-medium text-gray-900",children:s.serviceOrderId.orderId||s.serviceOrderId})]})})})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[t.jsx(Xt,{className:"h-4 w-4"}),"Timeline"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"Start Date"}),t.jsx("p",{className:"font-medium text-gray-900",children:c0(s.startDate)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"End Date"}),t.jsx("p",{className:"font-medium text-gray-900",children:c0(s.endDate)})]}),s.activatedAt&&t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"Activated At"}),t.jsx("p",{className:"font-medium text-gray-900",children:c0(s.activatedAt)})]}),s.cancelledAt&&t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"Cancelled At"}),t.jsx("p",{className:"font-medium text-red-600",children:c0(s.cancelledAt)})]})]})]}),s.status==="CANCELLED"&&s.cancellationReason&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[t.jsx("h3",{className:"text-sm font-medium text-red-800 mb-2",children:"Cancellation Reason"}),t.jsx("p",{className:"text-sm text-red-700",children:s.cancellationReason}),s.cancelledBy&&t.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Cancelled by: ",s.cancelledBy.name||s.cancelledBy.username]})]}),s.adminNotes&&t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[t.jsx(ad,{className:"h-4 w-4"}),"Admin Notes"]}),t.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:s.adminNotes})]}),t.jsx("div",{className:"border-t border-gray-200 pt-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[t.jsx(dr,{className:"h-4 w-4"}),t.jsx("span",{children:"Created:"}),t.jsx("span",{className:"text-gray-900",children:c0(s.createdAt)})]})}),t.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:t.jsx("button",{onClick:r,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})})}function _fe(){const{hasRole:e}=vn(),r=e(["SUPER_ADMIN","ADMIN"]),s=e(["SUPER_ADMIN","ADMIN"]),{subscriptions:n,pagination:a,filters:l,isLoading:d,error:h,getSubscriptionById:f,cancelSubscription:x,updateNotes:p,updateFilters:b,updateSearch:S,resetFilters:T,changePage:A,clearError:P}=vfe(),[D,I]=v.useState(!1),[L,_]=v.useState(!1),[$,F]=v.useState(!1),[B,M]=v.useState(null),[V,z]=v.useState(!1),[H,U]=v.useState(null),G=v.useCallback(async W=>{const le=await f(W._id);le.success&&(M(le.data),I(!0))},[f]),Q=v.useCallback(W=>{M(W),U(null),_(!0)},[]),ce=v.useCallback(W=>{M(W),U(null),F(!0)},[]),ne=v.useCallback(async W=>{if(B){z(!0),U(null);try{const le=await x(B._id,W);le.success?(_(!1),M(null)):U(le.error)}finally{z(!1)}}},[B,x]),J=v.useCallback(async W=>{if(B){z(!0),U(null);try{const le=await p(B._id,W);le.success?(F(!1),M(null)):U(le.error)}finally{z(!1)}}},[B,p]);return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Subscriptions"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"View and manage user service subscriptions"})]})}),h&&t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5 flex-shrink-0"}),t.jsx("p",{className:"flex-1",children:h}),t.jsx("button",{onClick:P,className:"text-red-500 hover:text-red-700 font-medium",children:"Dismiss"})]}),t.jsx(Nfe,{filters:l,onFilterChange:b,onSearchChange:S,onReset:T,disabled:d}),t.jsx(Cfe,{subscriptions:n,isLoading:d,canCancel:r,canEditNotes:s,onView:G,onCancel:Q,onEditNotes:ce}),a.totalPages>0&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:t.jsx(vr,{currentPage:a.currentPage,totalPages:a.totalPages,totalItems:a.totalCount,itemsPerPage:a.limit,onPageChange:A,itemLabel:"subscriptions"})}),t.jsx(kfe,{isOpen:D,onClose:()=>{I(!1),M(null)},subscription:B}),t.jsx(Tfe,{isOpen:L,onClose:()=>{_(!1),M(null),U(null)},onSubmit:ne,subscription:B,isLoading:V,serverError:H}),t.jsx(Dfe,{isOpen:$,onClose:()=>{F(!1),M(null),U(null)},onSubmit:J,subscription:B,isLoading:V,serverError:H})]})}function Ife(){const[e,r]=v.useState(!1),[s,n]=v.useState([]),[a,l]=v.useState({name:"Premium Coaching - Direct",description:"Instant access premium coaching service for testing direct purchase flow",shortDescription:"Instant access coaching",price:999,compareAtPrice:1499,durationInDays:30,category:"COACHING",perks:["Immediate activation","Direct payment link","No approval needed"],displayOrder:1,isFeatured:!0,isActive:!0,requiresApproval:!1}),[d,h]=v.useState({name:"VIP Consultation - Admin Approved",description:"Exclusive VIP consultation requiring admin approval before purchase",shortDescription:"Admin-approved VIP service",price:2999,compareAtPrice:3999,durationInDays:60,category:"CONSULTATION",perks:["Admin review required","Payment link sent after approval","Premium access"],displayOrder:2,isFeatured:!0,isActive:!0,requiresApproval:!0}),f=async(A,P)=>{r(!0);const D=Date.now();try{const I=await fetch("http://192.168.29.69:5000/api/web/services",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(A)}),L=await I.json(),_=Date.now()-D,$={id:Date.now(),type:P,timestamp:new Date().toISOString(),duration:`${_}ms`,status:I.ok?"success":"error",statusCode:I.status,data:L};return n(F=>[$,...F]),I.ok?(ot.success(` ${P} created successfully!`),{success:!0,data:L}):(ot.error(` Failed to create ${P}`),{success:!1,error:L})}catch(I){const L=Date.now()-D,_={id:Date.now(),type:P,timestamp:new Date().toISOString(),duration:`${L}ms`,status:"error",error:I.message};return n($=>[_,...$]),ot.error(` Network error: ${I.message}`),{success:!1,error:I}}finally{r(!1)}},x=async()=>{await f(a,"Direct Purchase Service")},p=async()=>{await f(d,"Admin Approval Service")},b=async()=>{ot.info(" Running both test flows..."),await x(),await new Promise(A=>setTimeout(A,1e3)),await p(),ot.success(" All tests completed!")},S=()=>{n([]),ot.info(" Test results cleared")},T=A=>{switch(A){case"success":return t.jsx(ar,{className:"w-5 h-5 text-green-500"});case"error":return t.jsx(Tt,{className:"w-5 h-5 text-red-500"});default:return t.jsx(dr,{className:"w-5 h-5 text-yellow-500"})}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Service Flow Testing"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Test direct purchase and admin-approved service creation flows"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200 rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-green-500 rounded-lg",children:t.jsx(YV,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-gray-900",children:"Direct Purchase"}),t.jsx("p",{className:"text-xs text-gray-600",children:"Instant payment flow"})]})]}),t.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[t.jsxs("p",{className:"text-gray-700",children:[t.jsx("span",{className:"font-semibold",children:"Price:"})," ",a.price]}),t.jsxs("p",{className:"text-gray-700",children:[t.jsx("span",{className:"font-semibold",children:"Duration:"})," ",a.durationInDays," days"]}),t.jsxs("p",{className:"text-gray-700",children:[t.jsx("span",{className:"font-semibold",children:"Requires Approval:"}),"  No"]})]}),t.jsx("button",{onClick:x,disabled:e,className:"w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:e?"Testing...":"Test Direct Purchase"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 border-2 border-amber-200 rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-amber-500 rounded-lg",children:t.jsx(dr,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-gray-900",children:"Admin Approval"}),t.jsx("p",{className:"text-xs text-gray-600",children:"Request & approve flow"})]})]}),t.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[t.jsxs("p",{className:"text-gray-700",children:[t.jsx("span",{className:"font-semibold",children:"Price:"})," ",d.price]}),t.jsxs("p",{className:"text-gray-700",children:[t.jsx("span",{className:"font-semibold",children:"Duration:"})," ",d.durationInDays," days"]}),t.jsxs("p",{className:"text-gray-700",children:[t.jsx("span",{className:"font-semibold",children:"Requires Approval:"}),"  Yes"]})]}),t.jsx("button",{onClick:p,disabled:e,className:"w-full px-4 py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:e?"Testing...":"Test Admin Approval"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200 rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-purple-500 rounded-lg",children:t.jsx(ms,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-gray-900",children:"Run All Tests"}),t.jsx("p",{className:"text-xs text-gray-600",children:"Sequential test run"})]})]}),t.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[t.jsx("p",{className:"text-gray-700",children:" Creates direct purchase service"}),t.jsx("p",{className:"text-gray-700",children:" Creates admin approval service"}),t.jsx("p",{className:"text-gray-700",children:" Logs all results below"})]}),t.jsx("button",{onClick:b,disabled:e,className:"w-full px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:e?"Running Tests...":"Run Both Tests"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Test Results"}),t.jsxs("p",{className:"text-sm text-gray-600",children:[s.length," test",s.length!==1?"s":""," run"]})]}),s.length>0&&t.jsx("button",{onClick:S,className:"px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Clear Results"})]}),t.jsx("div",{className:"p-4",children:s.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Tt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500",children:"No test results yet"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Run a test to see results here"})]}):t.jsx("div",{className:"space-y-4",children:s.map(A=>t.jsxs("div",{className:`border-2 rounded-lg p-4 ${A.status==="success"?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[T(A.status),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:A.type}),t.jsxs("p",{className:"text-xs text-gray-600",children:[new Date(A.timestamp).toLocaleString(),"  ",A.duration]})]})]}),t.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${A.status==="success"?"bg-green-200 text-green-800":"bg-red-200 text-red-800"}`,children:A.statusCode||A.status.toUpperCase()})]}),t.jsxs("details",{className:"mt-3",children:[t.jsx("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-gray-900",children:"View Response Data"}),t.jsx("pre",{className:"mt-2 p-3 bg-gray-900 text-green-400 rounded-lg text-xs overflow-x-auto",children:JSON.stringify(A.data||A.error,null,2)})]}),A.data?.data?.service&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Created Service"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"ID:"})," ",t.jsx("span",{className:"font-mono text-gray-900",children:A.data.data.service._id})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Name:"})," ",t.jsx("span",{className:"text-gray-900",children:A.data.data.service.name})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Price:"})," ",t.jsxs("span",{className:"text-gray-900",children:["",A.data.data.service.price]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Requires Approval:"})," ",t.jsx("span",{className:"text-gray-900",children:A.data.data.service.requiresApproval?" Yes":" No"})]})]})]})]},A.id))})})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[t.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-4",children:" Testing Guide"}),t.jsxs("div",{className:"space-y-4 text-sm text-blue-900",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-2",children:"Direct Purchase Flow:"}),t.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800 ml-2",children:[t.jsxs("li",{children:["Service with ",t.jsx("code",{className:"px-1 py-0.5 bg-blue-100 rounded",children:"requiresApproval: false"})]}),t.jsx("li",{children:"Users can purchase immediately with payment link"}),t.jsx("li",{children:"No admin intervention required"}),t.jsx("li",{children:"Instant subscription activation"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-2",children:"Admin Approval Flow:"}),t.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800 ml-2",children:[t.jsxs("li",{children:["Service with ",t.jsx("code",{className:"px-1 py-0.5 bg-blue-100 rounded",children:"requiresApproval: true"})]}),t.jsx("li",{children:"Users submit service request"}),t.jsx("li",{children:"Admin reviews and approves/rejects"}),t.jsx("li",{children:"Payment link sent after approval"}),t.jsx("li",{children:"Subscription activated after payment"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-2",children:"What This Tests:"}),t.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800 ml-2",children:[t.jsxs("li",{children:["Service creation endpoint (",t.jsx("code",{className:"px-1 py-0.5 bg-blue-100 rounded",children:"POST /web/services"}),")"]}),t.jsx("li",{children:"Both purchase flow configurations"}),t.jsx("li",{children:"Response time and status codes"}),t.jsx("li",{children:"Data validation and error handling"})]})]})]})]})]})}const VO={featureKey:"",name:"",description:"",price:"",compareAtPrice:"",durationInDays:"30",isLifetime:!1,isBundle:!1,includedFeatures:[],perks:[""],displayOrder:"1",isFeatured:!1,isActive:!0},$O=["SOS","CONNECT","CHALLENGE"],qO=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0});function Rfe(){const[e,r]=v.useState([]),[s,n]=v.useState([]),[a,l]=v.useState(VO),[d,h]=v.useState({}),[f,x]=v.useState({search:"",isActive:"all"}),[p,b]=v.useState("individual"),[S,T]=v.useState(!1),[A,P]=v.useState(!1),[D,I]=v.useState(!1),[L,_]=v.useState(null),[$,F]=v.useState(null),[B,M]=v.useState(null),V=async()=>{T(!0);const se={};p==="deleted"&&(se.includeDeleted=!0);const oe=await Vi.getAll(se);oe.success?(r(oe.data?.individualFeatures||[]),n(oe.data?.bundles||[])):ot.error(oe.message||"Failed to fetch pricing"),T(!1)};v.useEffect(()=>{V()},[p]);const z=()=>{const se={};a.featureKey.trim()||(se.featureKey="Feature key is required"),a.name.trim()?(a.name.length<3||a.name.length>100)&&(se.name="Name must be 3-100 characters"):se.name="Name is required";const oe=parseFloat(a.price);if(a.price===""||isNaN(oe)?se.price="Price is required":oe<0&&(se.price="Price must be a positive number"),!a.isLifetime){const he=parseInt(a.durationInDays,10);a.durationInDays===""||isNaN(he)?se.durationInDays="Duration is required":he<1&&(se.durationInDays="Duration must be at least 1 day")}return a.isBundle&&a.includedFeatures.length<2&&(se.includedFeatures="Bundle must include at least 2 features"),h(se),Object.keys(se).length===0},H=()=>{const se={featureKey:a.featureKey.trim().toUpperCase(),name:a.name.trim(),price:parseFloat(a.price),isBundle:a.isBundle,isActive:a.isActive,isFeatured:a.isFeatured,displayOrder:parseInt(a.displayOrder,10)||1};a.isLifetime?(se.durationInDays=0,se.isLifetime=!0):(se.durationInDays=parseInt(a.durationInDays,10),se.isLifetime=!1),a.description.trim()&&(se.description=a.description.trim()),a.compareAtPrice!==""&&(se.compareAtPrice=parseFloat(a.compareAtPrice)),a.isBundle&&a.includedFeatures.length>0&&(se.includedFeatures=a.includedFeatures);const oe=a.perks.filter(he=>he.trim());return oe.length>0&&(se.perks=oe),se},U=async se=>{if(se.preventDefault(),!z())return;P(!0);const oe=H();let he;if(L?he=await Vi.update(L._id,oe):he=await Vi.create(oe),he.success)ot.success(L?"Pricing updated successfully":"Pricing created successfully"),I(!1),ne(),V();else if(he.error&&Array.isArray(he.error)&&he.error.length>0){const Ve=he.error.map(Ce=>Ce.message||Ce.msg||Ce).join(", ");ot.error(Ve)}else ot.error(he.message||"Failed to save pricing");P(!1)},G=async()=>{if(!$)return;const se=await Vi.delete($);se.success?(ot.success("Pricing deleted successfully"),F(null),V()):ot.error(se.message||"Failed to delete pricing")},Q=async()=>{if(!B)return;const se=await Vi.restore(B);se.success?(ot.success("Pricing restored successfully"),M(null),V()):ot.error(se.message||"Failed to restore pricing")},ce=se=>{_(se),l({featureKey:se.featureKey||"",name:se.name||"",description:se.description||"",price:se.price?.toString()||"",compareAtPrice:se.compareAtPrice?.toString()||"",durationInDays:se.durationInDays?.toString()||"30",isLifetime:se.isLifetime||se.durationInDays===0,isBundle:se.isBundle||!1,includedFeatures:se.includedFeatures||[],perks:se.perks&&se.perks.length>0?se.perks:[""],displayOrder:se.displayOrder?.toString()||"1",isFeatured:se.isFeatured||!1,isActive:se.isActive??!0}),h({}),I(!0)},ne=()=>{l(VO),_(null),h({})},J=(se,oe)=>{l(he=>{const Ve=[...he.perks];return Ve[se]=oe,{...he,perks:Ve}})},W=()=>{l(se=>({...se,perks:[...se.perks,""]}))},le=se=>{l(oe=>({...oe,perks:oe.perks.filter((he,Ve)=>Ve!==se)}))},ge=se=>{l(oe=>{const he=oe.includedFeatures.includes(se)?oe.includedFeatures.filter(Ve=>Ve!==se):[...oe.includedFeatures,se];return{...oe,includedFeatures:he}})},re=()=>{V()},X=se=>{if(!f.search.trim())return se;const oe=f.search.toLowerCase();return se.filter(he=>he.name.toLowerCase().includes(oe)||he.featureKey.toLowerCase().includes(oe))},ae=()=>p==="individual"?X(e.filter(se=>!se.deletedAt)):p==="bundles"?X(s.filter(se=>!se.deletedAt)):[],ve=(se,oe=!1)=>t.jsx("div",{className:`bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden ${se.isActive?"":"opacity-60"}`,children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[se.isBundle?t.jsx($a,{className:"h-5 w-5 text-purple-500"}):t.jsx(Tn,{className:"h-5 w-5 text-yellow-500"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:se.name}),t.jsx("p",{className:"text-xs text-gray-500 font-mono",children:se.featureKey})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[se.isFeatured&&t.jsx(hi,{className:"h-4 w-4 text-yellow-500 fill-yellow-500"}),se.isActive?t.jsx(qc,{variant:"success",size:"sm",children:"Active"}):t.jsx(qc,{variant:"danger",size:"sm",children:"Inactive"})]})]}),se.description&&t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:se.description}),t.jsxs("div",{className:"flex items-baseline gap-2 mb-4",children:[t.jsx("span",{className:"text-2xl font-bold text-gray-900",children:qO.format(se.price)}),se.compareAtPrice&&se.compareAtPrice>se.price&&t.jsx("span",{className:"text-sm text-gray-400 line-through",children:qO.format(se.compareAtPrice)})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[t.jsx(dr,{className:"h-4 w-4"}),t.jsx("span",{children:se.isLifetime||se.durationInDays===0?"Lifetime Access":`${se.durationInDays} days`})]}),se.isBundle&&se.includedFeatures&&se.includedFeatures.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Includes:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:se.includedFeatures.map(he=>t.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:he},he))})]}),se.perks&&se.perks.length>0&&t.jsx("div",{className:"mb-4",children:t.jsxs("ul",{className:"space-y-1",children:[se.perks.slice(0,3).map((he,Ve)=>t.jsxs("li",{className:"text-sm text-gray-600 flex items-start gap-2",children:[t.jsx("span",{className:"text-green-500 mt-0.5",children:""}),he]},Ve)),se.perks.length>3&&t.jsxs("li",{className:"text-xs text-gray-400",children:["+",se.perks.length-3," more"]})]})}),t.jsx("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-100",children:oe?t.jsxs("button",{onClick:()=>M(se._id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-green-600 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[t.jsx(Xi,{className:"h-4 w-4"}),"Restore"]}):t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>ce(se),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[t.jsx(Es,{className:"h-4 w-4"}),"Edit"]}),t.jsxs("button",{onClick:()=>F(se._id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:[t.jsx(ir,{className:"h-4 w-4"}),"Delete"]})]})})]})},se._id),fe=ae();return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Feature Pricing"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage pricing for feature access (SOS, Connect, Challenge, etc.)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:re,disabled:S,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-60",children:[t.jsx(ms,{className:`h-4 w-4 ${S?"animate-spin":""}`}),"Refresh"]}),t.jsxs("button",{onClick:()=>{ne(),I(!0)},className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800",children:[t.jsx(fr,{className:"h-4 w-4"}),"Add Pricing"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-2 shadow-sm flex gap-2",children:[t.jsxs("button",{onClick:()=>b("individual"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold transition-colors ${p==="individual"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`,children:[t.jsx(Tn,{className:"h-4 w-4 inline mr-2"}),"Individual Features",e.filter(se=>!se.deletedAt).length>0&&t.jsx("span",{className:"ml-2 px-2 py-0.5 bg-white/20 rounded-full text-xs",children:e.filter(se=>!se.deletedAt).length})]}),t.jsxs("button",{onClick:()=>b("bundles"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold transition-colors ${p==="bundles"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`,children:[t.jsx($a,{className:"h-4 w-4 inline mr-2"}),"Bundles",s.filter(se=>!se.deletedAt).length>0&&t.jsx("span",{className:"ml-2 px-2 py-0.5 bg-white/20 rounded-full text-xs",children:s.filter(se=>!se.deletedAt).length})]})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:t.jsx("div",{className:"flex gap-3",children:t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:f.search,onChange:se=>x({...f,search:se.target.value}),placeholder:"Search by name or feature key...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]})})}),S?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(st,{className:"h-8 w-8 animate-spin text-gray-400"})}):fe.length===0?t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:t.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[p==="individual"?t.jsx(Tn,{className:"h-12 w-12 text-gray-300 mb-4"}):t.jsx($a,{className:"h-12 w-12 text-gray-300 mb-4"}),t.jsx("p",{className:"text-lg font-medium",children:"No pricing found"}),t.jsx("p",{className:"text-sm",children:f.search?"Try a different search term":"Add your first pricing option to get started"})]})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:fe.map(se=>ve(se))}),t.jsx(Pt,{isOpen:D,onClose:()=>{I(!1),ne()},title:L?"Edit Pricing":"Add Pricing",size:"lg",children:t.jsxs("form",{onSubmit:U,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pricing Type"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{type:"button",onClick:()=>l({...a,isBundle:!1}),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-colors ${a.isBundle?"border-gray-200 hover:border-gray-300":"border-gray-900 bg-gray-50"}`,children:[t.jsx(Tn,{className:`h-5 w-5 ${a.isBundle?"text-gray-400":"text-yellow-500"}`}),t.jsx("span",{className:a.isBundle?"":"font-semibold",children:"Individual Feature"})]}),t.jsxs("button",{type:"button",onClick:()=>l({...a,isBundle:!0}),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-colors ${a.isBundle?"border-gray-900 bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:[t.jsx($a,{className:`h-5 w-5 ${a.isBundle?"text-purple-500":"text-gray-400"}`}),t.jsx("span",{className:a.isBundle?"font-semibold":"",children:"Bundle"})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Feature Key ",t.jsx("span",{className:"text-red-500",children:"*"})]}),a.isBundle?t.jsx("input",{type:"text",value:a.featureKey,onChange:se=>l({...a,featureKey:se.target.value.toUpperCase()}),placeholder:"e.g., SOS_CONNECT_BUNDLE",disabled:!!L,className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none uppercase ${d.featureKey?"border-red-500":"border-gray-300"} ${L?"bg-gray-100":""}`}):t.jsxs("select",{value:a.featureKey,onChange:se=>l({...a,featureKey:se.target.value}),disabled:!!L,className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${d.featureKey?"border-red-500":"border-gray-300"} ${L?"bg-gray-100":""}`,children:[t.jsx("option",{value:"",children:"Select a feature"}),$O.map(se=>t.jsx("option",{value:se,children:se},se))]}),d.featureKey&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.featureKey})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Display Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:a.name,onChange:se=>l({...a,name:se.target.value}),placeholder:"e.g., SOS Tab Access",className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${d.name?"border-red-500":"border-gray-300"}`}),d.name&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:se=>l({...a,description:se.target.value}),placeholder:"Brief description of what's included",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none"})]}),a.isBundle&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Included Features ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"space-y-2 p-4 bg-gray-50 rounded-lg border border-gray-200",children:$O.map(se=>t.jsxs("label",{className:"flex items-center gap-3 text-sm",children:[t.jsx("input",{type:"checkbox",checked:a.includedFeatures.includes(se),onChange:()=>ge(se),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),t.jsx("span",{className:"text-gray-700",children:se})]},se))}),d.includedFeatures&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.includedFeatures})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price () ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",min:"0",value:a.price,onChange:se=>l({...a,price:se.target.value}),placeholder:"e.g., 199",className:`w-full px-4 py-2 pl-8 border rounded-lg focus:border-gray-800 outline-none ${d.price?"border-red-500":"border-gray-300"}`}),t.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:""})]}),d.price&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.price})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compare at Price ()"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",min:"0",value:a.compareAtPrice,onChange:se=>l({...a,compareAtPrice:se.target.value}),placeholder:"e.g., 299 (optional)",className:"w-full px-4 py-2 pl-8 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),t.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:""})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Show as original price for discount display"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Access Duration"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:a.isLifetime,onChange:se=>l({...a,isLifetime:se.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Lifetime Access"})]}),!a.isLifetime&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",min:"1",value:a.durationInDays,onChange:se=>l({...a,durationInDays:se.target.value}),className:`w-24 px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${d.durationInDays?"border-red-500":"border-gray-300"}`}),t.jsx("span",{className:"text-sm text-gray-500",children:"days"})]})]}),d.durationInDays&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.durationInDays})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Perks / Benefits"}),t.jsxs("div",{className:"space-y-2",children:[a.perks.map((se,oe)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:se,onChange:he=>J(oe,he.target.value),placeholder:`Perk ${oe+1}`,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),a.perks.length>1&&t.jsx("button",{type:"button",onClick:()=>le(oe),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:t.jsx(ir,{className:"h-4 w-4"})})]},oe)),t.jsx("button",{type:"button",onClick:W,className:"text-sm text-blue-600 hover:text-blue-700",children:"+ Add another perk"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Order"}),t.jsx("input",{type:"number",min:"1",value:a.displayOrder,onChange:se=>l({...a,displayOrder:se.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lower numbers appear first"})]}),t.jsxs("div",{className:"flex flex-col gap-3 pt-6",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:a.isFeatured,onChange:se=>l({...a,isFeatured:se.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Featured (show star icon)"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:a.isActive,onChange:se=>l({...a,isActive:se.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Active (available for purchase)"})]})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:()=>{I(!1),ne()},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:A,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[A?t.jsx(st,{className:"h-4 w-4 animate-spin"}):t.jsx(kl,{className:"h-4 w-4"}),L?"Update Pricing":"Create Pricing"]})]})]})}),t.jsx(xs,{isOpen:!!$,title:"Delete Pricing?",message:"This pricing option will be removed. You can restore it later if needed.",confirmText:"Delete",cancelText:"Cancel",isDestructive:!0,onConfirm:G,onCancel:()=>F(null)}),t.jsx(xs,{isOpen:!!B,title:"Restore Pricing?",message:"This pricing option will be restored and made available again.",confirmText:"Restore",cancelText:"Cancel",isDestructive:!1,onConfirm:Q,onCancel:()=>M(null)})]})}function Mfe({request:e,onClose:r,onSuccess:s}){const[n,a]=v.useState({individualFeatures:[],bundles:[]}),l=e.requestedFeatures?.map(H=>H.featureKey)||[],[d,h]=v.useState({features:l,paymentAmount:e.paymentAmount||"",durationInDays:30,couponCode:e.couponCode||"",adminNotes:"",sendWhatsApp:!0}),[f,x]=v.useState(!1),[p,b]=v.useState(!0),[S,T]=v.useState(""),[A,P]=v.useState(null),[D,I]=v.useState(""),[L,_]=v.useState(!1);v.useEffect(()=>{(async()=>{b(!0);try{const U=await Vi.getAll();if(U.success){a({individualFeatures:U.data.individualFeatures||[],bundles:U.data.bundles||[]});const G=[...U.data.individualFeatures||[],...U.data.bundles||[]],Q=$(l,G);Q>0&&h(ce=>({...ce,paymentAmount:Q}))}else T("Failed to load feature pricing")}catch{T("An error occurred while loading pricing")}finally{b(!1)}})()},[e]);const $=(H,U)=>{if(!H||H.length===0)return 0;const G=U.filter(ce=>!ce.isBundle);let Q=0;return H.forEach(ce=>{const ne=G.find(J=>J.featureKey===ce);ne&&(Q+=ne.price)}),Q},F=H=>{h(U=>{const G=U.features.includes(H)?U.features.filter(ne=>ne!==H):[...U.features,H],Q=[...n.individualFeatures,...n.bundles],ce=$(G,Q);return{...U,features:G,paymentAmount:ce}}),P(null),I("")},B=async()=>{if(!d.couponCode.trim()){I("Please enter a coupon code");return}if(d.features.length===0){I("Please select at least one feature first");return}_(!0),I("");try{const U=Number(d.paymentAmount);P({originalAmount:U,discountPercent:10,discountAmount:Math.round(U*.1),finalAmount:Math.round(U*.9)}),h(G=>({...G,paymentAmount:Math.round(U*.9)}))}catch{I("Failed to validate coupon"),P(null)}finally{_(!1)}},M=()=>{const H=[...n.individualFeatures,...n.bundles],U=$(d.features,H);h(G=>({...G,couponCode:"",paymentAmount:U})),P(null),I("")},V=async()=>{if(d.features.length===0){T("Please select at least one feature to grant");return}if(!d.paymentAmount||d.paymentAmount<0){T("Please enter a valid payment amount");return}if(!d.durationInDays||d.durationInDays<0){T("Please enter a valid duration");return}x(!0),T("");try{const H={features:d.features,paymentAmount:Number(d.paymentAmount),durationInDays:Number(d.durationInDays),adminNotes:d.adminNotes.trim()||void 0,sendWhatsApp:d.sendWhatsApp};d.couponCode.trim()&&(H.couponCode=d.couponCode.trim().toUpperCase());const U=await A0.approve(e._id,H);U.success?(s(),r()):T(U.message||"Failed to approve request")}catch{T("An error occurred while approving the request")}finally{x(!1)}},z=n.individualFeatures||[];return t.jsx(Pt,{isOpen:!0,onClose:r,title:"Approve Feature Request",size:"lg",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Applicant Information"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(gr,{className:"h-4 w-4 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Name"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.name})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(hs,{className:"h-4 w-4 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.phone})]})]})]}),e.existingUserId&&t.jsxs("div",{className:"mt-4 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(tn,{className:"h-4 w-4 text-purple-600"}),t.jsx("p",{className:"font-semibold text-purple-900",children:"Existing User"})]}),t.jsxs("p",{className:"text-sm text-purple-700",children:["User ID: ",t.jsx("span",{className:"font-mono",children:e.existingUserId._id||e.existingUserId})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Features to Grant ",t.jsx("span",{className:"text-red-500",children:"*"})]}),p?t.jsx("div",{className:"flex items-center justify-center py-4",children:t.jsx(st,{className:"h-5 w-5 animate-spin text-gray-400"})}):t.jsx("div",{className:"space-y-2",children:z.length===0?t.jsx("p",{className:"text-sm text-gray-500 py-4 text-center",children:"No feature pricing available. Please add feature pricing first."}):z.map(H=>t.jsxs("label",{className:`flex items-center justify-between p-3 border rounded-lg cursor-pointer transition-colors ${d.features.includes(H.featureKey)?"bg-blue-50 border-blue-300":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"checkbox",checked:d.features.includes(H.featureKey),onChange:()=>F(H.featureKey),disabled:f,className:"w-4 h-4 text-blue-600 rounded focus:ring-0"}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Tn,{className:"h-4 w-4 text-yellow-500"}),t.jsx("span",{className:"font-medium text-gray-900",children:H.name}),l.includes(H.featureKey)&&t.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:"Requested"})]}),H.description&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:H.description})]})]}),t.jsxs("span",{className:"font-semibold text-gray-900",children:["",H.price?.toLocaleString("en-IN")]})]},H._id))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Access Duration (Days) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"flex gap-2",children:t.jsxs("select",{value:d.durationInDays,onChange:H=>h(U=>({...U,durationInDays:Number(H.target.value)})),disabled:f,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",children:[t.jsx("option",{value:7,children:"7 days"}),t.jsx("option",{value:15,children:"15 days"}),t.jsx("option",{value:30,children:"30 days"}),t.jsx("option",{value:90,children:"90 days"}),t.jsx("option",{value:365,children:"365 days (1 year)"}),t.jsx("option",{value:0,children:"Lifetime"})]})}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:d.durationInDays===0?"Lifetime access (never expires)":`Access expires after ${d.durationInDays} days`})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Coupon Code ",t.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(on,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:d.couponCode,onChange:H=>{h(U=>({...U,couponCode:H.target.value.toUpperCase()})),P(null),I("")},disabled:f,placeholder:"Enter coupon code",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 uppercase"})]}),A?t.jsxs("button",{type:"button",onClick:M,disabled:f,className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 transition-colors disabled:opacity-50 flex items-center gap-2",children:[t.jsx(Rt,{className:"h-4 w-4"}),"Clear"]}):t.jsx("button",{type:"button",onClick:B,disabled:f||L||!d.couponCode.trim()||d.features.length===0,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:L?t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"h-4 w-4 animate-spin"}),"Checking..."]}):"Apply"})]}),D&&t.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600",children:[t.jsx(Rt,{className:"h-4 w-4"}),t.jsx("p",{className:"text-sm",children:D})]}),A&&t.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(ar,{className:"h-5 w-5 text-green-600 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-semibold text-green-900",children:"Coupon Applied!"}),t.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Original Price:"}),t.jsxs("span",{className:"text-gray-900",children:["",A.originalAmount?.toLocaleString("en-IN")]})]}),t.jsxs("div",{className:"flex justify-between text-green-700",children:[t.jsxs("span",{children:["Discount (",A.discountPercent,"%):"]}),t.jsxs("span",{children:["-",A.discountAmount?.toLocaleString("en-IN")]})]}),t.jsxs("div",{className:"flex justify-between font-semibold pt-1 border-t border-green-200",children:[t.jsx("span",{className:"text-green-900",children:"Final Amount:"}),t.jsxs("span",{className:"text-green-900",children:["",A.finalAmount?.toLocaleString("en-IN")]})]})]})]})]})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Amount () ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",min:"0",step:"1",value:d.paymentAmount,onChange:H=>h(U=>({...U,paymentAmount:H.target.value})),disabled:f,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"Enter payment amount"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"You can adjust the amount for discounts or special pricing"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin Notes ",t.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),t.jsx("textarea",{value:d.adminNotes,onChange:H=>h(U=>({...U,adminNotes:H.target.value})),disabled:f,maxLength:500,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Internal notes (not visible to user)"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[d.adminNotes.length,"/500 characters"]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"checkbox",id:"sendWhatsApp",checked:d.sendWhatsApp,onChange:H=>h(U=>({...U,sendWhatsApp:H.target.checked})),disabled:f,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),t.jsx("label",{htmlFor:"sendWhatsApp",className:"text-sm font-medium text-gray-700",children:"Send payment link via WhatsApp"})]}),S&&t.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5"}),t.jsx("p",{className:"text-sm",children:S})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{onClick:r,disabled:f,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{onClick:V,disabled:f||p,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[f&&t.jsx(st,{className:"h-4 w-4 animate-spin"}),f?"Approving...":"Approve & Send Link"]})]})]})})}function Lfe({request:e,onClose:r,onSuccess:s}){const[n,a]=v.useState({rejectionReason:"",adminNotes:""}),[l,d]=v.useState(!1),[h,f]=v.useState(""),x=async()=>{if(!n.rejectionReason.trim()){f("Rejection reason is required");return}d(!0),f("");try{const p=await A0.reject(e._id,{rejectionReason:n.rejectionReason.trim(),adminNotes:n.adminNotes.trim()||void 0});p.success?(s(),r()):f(p.message||"Failed to reject request")}catch{f("An error occurred while rejecting the request")}finally{d(!1)}};return t.jsx(Pt,{isOpen:!0,onClose:r,title:"Reject Feature Request",size:"md",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx(Rt,{className:"h-5 w-5 text-red-600 mt-0.5 shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-red-900",children:"Confirm Rejection"}),t.jsx("p",{className:"text-sm text-red-700 mt-1",children:"This action will reject the feature access request. The user will be notified with the rejection reason you provide."})]})]}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Applicant Information"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(gr,{className:"h-4 w-4 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Name"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.name})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(hs,{className:"h-4 w-4 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.phone})]})]}),e.requestedFeatures&&e.requestedFeatures.length>0&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Requested Features"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:e.requestedFeatures.map((p,b)=>t.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:p.featureKey},b))})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rejection Reason ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:n.rejectionReason,onChange:p=>a(b=>({...b,rejectionReason:p.target.value})),disabled:l,maxLength:500,rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Enter the reason for rejection (this will be shown to the user)",required:!0}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[n.rejectionReason.length,"/500 characters  This will be visible to the user"]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin Notes ",t.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional, Internal Only)"})]}),t.jsx("textarea",{value:n.adminNotes,onChange:p=>a(b=>({...b,adminNotes:p.target.value})),disabled:l,maxLength:500,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Internal notes (not visible to user)"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[n.adminNotes.length,"/500 characters  Internal use only"]})]}),h&&t.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5"}),t.jsx("p",{className:"text-sm",children:h})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{onClick:r,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{onClick:x,disabled:l,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[l&&t.jsx(st,{className:"h-4 w-4 animate-spin"}),l?"Rejecting...":"Reject Request"]})]})]})})}const O2=e=>e?new Date(e).toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",HO={PENDING:{label:"Pending Review",bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-300",icon:Xt},APPROVED:{label:"Approved",bg:"bg-green-100",text:"text-green-700",border:"border-green-300",icon:ar},PAYMENT_SENT:{label:"Payment Link Sent",bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300",icon:sm},COMPLETED:{label:"Completed",bg:"bg-green-100",text:"text-green-700",border:"border-green-300",icon:ar},REJECTED:{label:"Rejected",bg:"bg-red-100",text:"text-red-700",border:"border-red-300",icon:Rt}};function Ffe({request:e,onClose:r,onApprove:s,onReject:n,onResendLink:a}){const l=HO[e.status]||HO.PENDING,d=l.icon;return t.jsx(Pt,{isOpen:!0,onClose:r,title:"Feature Request Details",size:"xl",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg border ${l.bg} ${l.text} ${l.border}`,children:[t.jsx(d,{className:"h-5 w-5"}),t.jsx("span",{className:"font-semibold",children:l.label})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[e.status==="PENDING"&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>{r(),s(e)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[t.jsx(ar,{className:"h-4 w-4"}),"Approve"]}),t.jsxs("button",{onClick:()=>{r(),n(e)},className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[t.jsx(Rt,{className:"h-4 w-4"}),"Reject"]})]}),e.status==="PAYMENT_SENT"&&t.jsxs("button",{onClick:()=>{a(e)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(zu,{className:"h-4 w-4"}),"Resend Link"]})]})]}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-4",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[t.jsx(gr,{className:"h-5 w-5"}),"Applicant Information"]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-white rounded-lg",children:t.jsx(gr,{className:"h-5 w-5 text-gray-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Full Name"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.name})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-white rounded-lg",children:t.jsx(hs,{className:"h-5 w-5 text-gray-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Phone Number"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.phone})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-white rounded-lg",children:t.jsx(Xt,{className:"h-5 w-5 text-gray-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Submitted On"}),t.jsx("p",{className:"font-medium text-gray-900",children:O2(e.createdAt)})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-white rounded-lg",children:t.jsx(Xt,{className:"h-5 w-5 text-gray-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Last Updated"}),t.jsx("p",{className:"font-medium text-gray-900",children:O2(e.updatedAt)})]})]})]})]}),e.existingUserId&&t.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(tn,{className:"h-5 w-5 text-purple-600"}),t.jsx("h3",{className:"font-semibold text-purple-900",children:"Existing User"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-purple-700",children:"Name"}),t.jsx("p",{className:"font-medium text-purple-900",children:e.existingUserId.name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-purple-700",children:"User ID"}),t.jsx("p",{className:"font-mono text-sm text-purple-900",children:e.existingUserId._id||e.existingUserId})]})]})]}),e.requestedFeatures&&e.requestedFeatures.length>0&&t.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Tn,{className:"h-5 w-5 text-yellow-500"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Requested Features"})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:e.requestedFeatures.map((h,f)=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-white border border-blue-200 text-blue-700 rounded-lg font-medium text-sm",children:[t.jsx(Tn,{className:"h-3 w-3"}),h.featureKey]},f))})]}),e.requestedBundleId&&t.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Tn,{className:"h-5 w-5 text-purple-600"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Requested Bundle"})]}),t.jsxs("div",{className:"p-3 bg-white rounded-lg border border-purple-200",children:[t.jsx("p",{className:"font-semibold text-gray-900",children:e.requestedBundleId.name}),e.requestedBundleId.description&&t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.requestedBundleId.description}),t.jsxs("p",{className:"text-sm text-purple-700 font-medium mt-2",children:["",e.requestedBundleId.price?.toLocaleString("en-IN")]})]})]}),e.approvedFeatures&&e.approvedFeatures.length>0&&t.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ar,{className:"h-5 w-5 text-green-600"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Approved Features"})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:e.approvedFeatures.map((h,f)=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-white border border-green-200 text-green-700 rounded-lg font-medium text-sm",children:[t.jsx(ar,{className:"h-3 w-3"}),h]},f))}),e.durationInDays!==void 0&&t.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-green-700",children:[t.jsx(dr,{className:"h-4 w-4"}),t.jsxs("span",{children:["Duration: ",e.durationInDays===0?"Lifetime":`${e.durationInDays} days`]})]})]}),(e.couponCode||e.discountAmount>0)&&t.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(on,{className:"h-5 w-5 text-green-600"}),t.jsx("h3",{className:"font-semibold text-green-900",children:"Discount Applied"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.couponCode&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-green-700",children:"Coupon Code"}),t.jsx("p",{className:"font-mono font-semibold text-green-900 uppercase",children:e.couponCode})]}),e.discountAmount>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-green-700",children:"Discount Amount"}),t.jsxs("p",{className:"font-semibold text-green-900",children:["",e.discountAmount?.toLocaleString("en-IN")]})]}),e.discountPercent>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-green-700",children:"Discount Rate"}),t.jsxs("p",{className:"font-semibold text-green-900 flex items-center gap-1",children:[t.jsx(yu,{className:"h-4 w-4"}),e.discountPercent,"% off"]})]})]}),e.originalAmount&&e.paymentAmount&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-green-200",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-green-700",children:"Original Price:"}),t.jsxs("span",{className:"text-gray-600",children:["",e.originalAmount?.toLocaleString("en-IN")]})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-green-700",children:"Discount:"}),t.jsxs("span",{className:"text-green-600 font-medium",children:["",e.discountAmount?.toLocaleString("en-IN")]})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold mt-1 pt-1 border-t border-green-200",children:[t.jsx("span",{className:"text-green-900",children:"Final Amount:"}),t.jsxs("span",{className:"text-green-900",children:["",e.paymentAmount?.toLocaleString("en-IN")]})]})]})]}),(e.status==="PAYMENT_SENT"||e.status==="COMPLETED")&&t.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(jj,{className:"h-5 w-5 text-blue-600"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Payment Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Payment Amount"}),t.jsxs("p",{className:"font-semibold text-gray-900",children:["",e.paymentAmount?.toLocaleString("en-IN")]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Order ID"}),t.jsx("p",{className:"font-mono text-sm text-gray-900",children:e.orderId||"N/A"})]})]}),e.paymentUrl&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Payment Link"}),t.jsxs("a",{href:e.paymentUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 text-sm font-medium",children:[t.jsx(sm,{className:"h-4 w-4"}),e.paymentUrl]})]})]}),e.reviewedBy&&t.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(jp,{className:"h-5 w-5 text-gray-600"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Review Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Reviewed By"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.reviewedBy.name||e.reviewedBy.username})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Reviewed On"}),t.jsx("p",{className:"font-medium text-gray-900",children:O2(e.reviewedAt)})]})]}),e.adminNotes&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Admin Notes"}),t.jsx("p",{className:"text-sm text-gray-700 bg-white p-3 rounded border border-gray-200",children:e.adminNotes})]}),e.rejectionReason&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Rejection Reason"}),t.jsx("p",{className:"text-sm text-red-700 bg-red-50 p-3 rounded border border-red-200",children:e.rejectionReason})]})]}),t.jsx("div",{className:"pt-4 border-t border-gray-200",children:t.jsxs("p",{className:"text-xs text-gray-500",children:["Request ID: ",t.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-gray-700",children:e._id})]})})]})})}const GO={PENDING:{label:"Pending",bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-300"},APPROVED:{label:"Approved",bg:"bg-green-100",text:"text-green-700",border:"border-green-300"},PAYMENT_SENT:{label:"Payment Link Sent",bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"},COMPLETED:{label:"Completed",bg:"bg-green-100",text:"text-green-700",border:"border-green-300"},REJECTED:{label:"Rejected",bg:"bg-red-100",text:"text-red-700",border:"border-red-300"}},Bfe=["SOS","CONNECT","CHALLENGE"];function Ufe(){const[e,r]=v.useState([]),[s,n]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:20,hasNextPage:!1,hasPrevPage:!1}),[a,l]=v.useState({page:1,limit:20,status:"",featureKey:"",search:"",sortBy:"createdAt",sortOrder:"desc"}),[d,h]=v.useState(!0),[f,x]=v.useState(null),[p,b]=v.useState(!1),[S,T]=v.useState(!1),[A,P]=v.useState(!1),[D,I]=v.useState(null),L=v.useCallback(async()=>{h(!0),x(null);try{const Q=await A0.getAll(a);Q.success?(r(Q.data.requests||[]),n(Q.data.pagination||s)):(x(Q.message||"Failed to fetch feature requests"),r([]))}catch{x("An error occurred while fetching requests"),r([])}finally{h(!1)}},[a]);v.useEffect(()=>{L()},[L]);const _=(Q,ce)=>{l(ne=>({...ne,[Q]:ce,page:1}))},$=Q=>{l(ce=>({...ce,page:Q}))},F=Q=>{_("search",Q)},B=Q=>{I(Q),P(!0)},M=Q=>{I(Q),b(!0)},V=Q=>{I(Q),T(!0)},z=async Q=>{if(window.confirm("Resend payment link via WhatsApp?"))try{const ce=await A0.resendPaymentLink(Q._id);ce.success?(ot.success("Payment link resent successfully"),L()):ot.error(ce.message||"Failed to resend payment link")}catch{ot.error("An error occurred while resending the link")}},H=()=>{L()},U=Q=>Q?new Date(Q).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A",G=Q=>{const ce=GO[Q]||GO.PENDING;return t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold border ${ce.bg} ${ce.text} ${ce.border}`,children:ce.label})};return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Feature Requests"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage and review feature access requests"})]}),t.jsxs("button",{onClick:L,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50",children:[t.jsx(ms,{className:`h-4 w-4 ${d?"animate-spin":""}`}),"Refresh"]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[t.jsx(Fn,{className:"h-5 w-5"}),"Filters"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(br,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search by phone or name...",value:a.search,onChange:Q=>F(Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("select",{value:a.status,onChange:Q=>_("status",Q.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"PENDING",children:"Pending"}),t.jsx("option",{value:"APPROVED",children:"Approved"}),t.jsx("option",{value:"PAYMENT_SENT",children:"Payment Link Sent"}),t.jsx("option",{value:"COMPLETED",children:"Completed"}),t.jsx("option",{value:"REJECTED",children:"Rejected"})]}),t.jsxs("select",{value:a.featureKey,onChange:Q=>_("featureKey",Q.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Features"}),Bfe.map(Q=>t.jsx("option",{value:Q,children:Q},Q))]}),t.jsxs("select",{value:`${a.sortBy}-${a.sortOrder}`,onChange:Q=>{const[ce,ne]=Q.target.value.split("-");l(J=>({...J,sortBy:ce,sortOrder:ne}))},className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"createdAt-desc",children:"Newest First"}),t.jsx("option",{value:"createdAt-asc",children:"Oldest First"}),t.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),t.jsx("option",{value:"name-desc",children:"Name (Z-A)"})]})]})]}),f&&t.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[t.jsx(Tt,{className:"h-5 w-5"}),f]}),d&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 flex items-center justify-center",children:[t.jsx(st,{className:"h-8 w-8 animate-spin text-gray-800"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading requests..."})]}),!d&&e.length===0&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(Tn,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No feature requests found"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a.search||a.status||a.featureKey?"Try adjusting your filters":"New requests will appear here"})]}),!d&&e.length>0&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Applicant"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Requested Features"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Submitted On"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:e.map(Q=>t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(gr,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"font-medium text-gray-900",children:Q.name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(hs,{className:"h-3.5 w-3.5 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-600",children:Q.phone})]}),Q.existingUserId&&t.jsx("span",{className:"inline-flex items-center w-fit px-2 py-0.5 rounded-md text-xs font-medium bg-purple-100 text-purple-700 border border-purple-200",children:"Existing User"})]})}),t.jsx("td",{className:"px-6 py-4",children:Q.requestedFeatures&&Q.requestedFeatures.length>0?t.jsx("div",{className:"flex flex-wrap gap-1",children:Q.requestedFeatures.map((ce,ne)=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-700 border border-blue-200",children:[t.jsx(Tn,{className:"h-3 w-3"}),ce.featureKey]},ne))}):Q.requestedBundleId?t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Tn,{className:"h-4 w-4 text-purple-500"}),t.jsx("span",{className:"font-medium text-gray-900",children:Q.requestedBundleId.name||"Bundle"})]}):t.jsx("span",{className:"text-sm text-gray-500",children:"No features selected"})}),t.jsx("td",{className:"px-6 py-4",children:G(Q.status)}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.jsx(Xt,{className:"h-4 w-4"}),U(Q.createdAt)]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx("button",{onClick:()=>B(Q),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:t.jsx(Or,{className:"h-4 w-4"})}),Q.status==="PENDING"&&t.jsx("button",{onClick:()=>M(Q),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve Request",children:t.jsx(ar,{className:"h-4 w-4"})}),Q.status==="PENDING"&&t.jsx("button",{onClick:()=>V(Q),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject Request",children:t.jsx(Rt,{className:"h-4 w-4"})}),Q.status==="PAYMENT_SENT"&&t.jsx("button",{onClick:()=>z(Q),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Resend Payment Link",children:t.jsx(zu,{className:"h-4 w-4"})})]})})]},Q._id))})]})}),t.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:t.jsx(vr,{currentPage:s.currentPage,totalPages:s.totalPages,onPageChange:$,totalCount:s.totalCount,itemsPerPage:s.limit})})]}),p&&D&&t.jsx(Mfe,{request:D,onClose:()=>{b(!1),I(null)},onSuccess:H}),S&&D&&t.jsx(Lfe,{request:D,onClose:()=>{T(!1),I(null)},onSuccess:H}),A&&D&&t.jsx(Ffe,{request:D,onClose:()=>{P(!1),I(null)},onApprove:M,onReject:V,onResendLink:z})]})}const YO={PENDING:{label:"Pending",bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-300"},APPROVED:{label:"Approved",bg:"bg-green-100",text:"text-green-700",border:"border-green-300"},REJECTED:{label:"Rejected",bg:"bg-red-100",text:"text-red-700",border:"border-red-300"}};function ZS({status:e}){const r=YO[e]||YO.PENDING;return t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold border ${r.bg} ${r.text} ${r.border}`,children:r.label})}function b9({stats:e,isLoading:r}){const s=[{label:"Total Requests",value:e?.totalRequests||0,icon:tn,bg:"bg-blue-50",iconBg:"bg-blue-100",iconColor:"text-blue-600",textColor:"text-blue-900"},{label:"Pending",value:e?.pendingCount||0,icon:dr,bg:"bg-yellow-50",iconBg:"bg-yellow-100",iconColor:"text-yellow-600",textColor:"text-yellow-900"},{label:"Approved",value:e?.approvedCount||0,icon:ar,bg:"bg-green-50",iconBg:"bg-green-100",iconColor:"text-green-600",textColor:"text-green-900"},{label:"Rejected",value:e?.rejectedCount||0,icon:Rt,bg:"bg-red-50",iconBg:"bg-red-100",iconColor:"text-red-600",textColor:"text-red-900"}];return t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.map(n=>t.jsx("div",{className:`${n.bg} rounded-xl p-4 border border-gray-100`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`${n.iconBg} p-2 rounded-lg`,children:t.jsx(n.icon,{className:`h-5 w-5 ${n.iconColor}`})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:n.label}),r?t.jsx("div",{className:"h-6 w-12 bg-gray-200 rounded animate-pulse mt-1"}):t.jsx("p",{className:`text-xl font-bold ${n.textColor}`,children:n.value.toLocaleString("en-IN")})]})]})},n.label))})}function v9({request:e,onClose:r,onApprove:s,title:n="Approve Request"}){const[a,l]=v.useState(""),[d,h]=v.useState(!1),[f,x]=v.useState(""),p=async()=>{h(!0),x("");try{await s(e._id,{notes:a.trim()||void 0}),r()}catch(b){x(b.message||"Failed to approve request")}finally{h(!1)}};return t.jsx(Pt,{isOpen:!0,onClose:r,title:n,size:"md",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[t.jsx(ar,{className:"h-5 w-5 text-green-600 mt-0.5 shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-green-900",children:"Confirm Approval"}),t.jsx("p",{className:"text-sm text-green-700 mt-1",children:"This action will approve the registration request. The user may be notified about the approval."})]})]}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Applicant Information"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(gr,{className:"h-4 w-4 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Name"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.name})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(hs,{className:"h-4 w-4 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.phone})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ji,{className:"h-4 w-4 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.email})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin Notes ",t.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),t.jsx("textarea",{value:a,onChange:b=>l(b.target.value),disabled:d,maxLength:1e3,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Add any notes about this approval (optional)"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.length,"/1000 characters"]})]}),f&&t.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5"}),t.jsx("p",{className:"text-sm",children:f})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{onClick:r,disabled:d,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{onClick:p,disabled:d,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[d&&t.jsx(st,{className:"h-4 w-4 animate-spin"}),d?"Approving...":"Approve Request"]})]})]})})}function N9({request:e,onClose:r,onReject:s,title:n="Reject Request"}){const[a,l]=v.useState(""),[d,h]=v.useState(!1),[f,x]=v.useState(""),p=async()=>{if(!a.trim()){x("Rejection notes are required");return}h(!0),x("");try{await s(e._id,{notes:a.trim()}),r()}catch(b){x(b.message||"Failed to reject request")}finally{h(!1)}};return t.jsx(Pt,{isOpen:!0,onClose:r,title:n,size:"md",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx(Rt,{className:"h-5 w-5 text-red-600 mt-0.5 shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-red-900",children:"Confirm Rejection"}),t.jsx("p",{className:"text-sm text-red-700 mt-1",children:"This action will reject the registration request. Please provide a reason for the rejection."})]})]}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Applicant Information"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(gr,{className:"h-4 w-4 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Name"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.name})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(hs,{className:"h-4 w-4 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.phone})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ji,{className:"h-4 w-4 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.email})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rejection Notes ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:a,onChange:b=>{l(b.target.value),f&&x("")},disabled:d,maxLength:1e3,rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Enter the reason for rejection (required)",required:!0}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.length,"/1000 characters"]})]}),f&&t.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[t.jsx(Tt,{className:"h-5 w-5"}),t.jsx("p",{className:"text-sm",children:f})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{onClick:r,disabled:d,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{onClick:p,disabled:d,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[d&&t.jsx(st,{className:"h-4 w-4 animate-spin"}),d?"Rejecting...":"Reject Request"]})]})]})})}function j9({request:e,onClose:r,onApprove:s,onReject:n,title:a="Request Details"}){const l=d=>d?new Date(d).toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return t.jsx(Pt,{isOpen:!0,onClose:r,title:a,size:"lg",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Status"}),t.jsx(ZS,{status:e.status})]}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Applicant Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(gr,{className:"h-5 w-5 text-gray-400 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Name"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.name})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(hs,{className:"h-5 w-5 text-gray-400 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.phone})]})]}),t.jsxs("div",{className:"flex items-start gap-3 md:col-span-2",children:[t.jsx(Ji,{className:"h-5 w-5 text-gray-400 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.email})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Xt,{className:"h-5 w-5 text-gray-400 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Submitted At"}),t.jsx("p",{className:"font-medium text-gray-900",children:l(e.submittedAt||e.createdAt)})]})]})]})]}),(e.status==="APPROVED"||e.status==="REJECTED")&&t.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg space-y-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900 border-b border-blue-200 pb-2",children:"Admin Review"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(gr,{className:"h-5 w-5 text-blue-500 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Reviewed By"}),t.jsx("p",{className:"font-medium text-gray-900",children:e.reviewedBy?.name||e.reviewedBy||"Admin"})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(dr,{className:"h-5 w-5 text-blue-500 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Reviewed At"}),t.jsx("p",{className:"font-medium text-gray-900",children:l(e.reviewedAt)})]})]}),e.notes&&t.jsxs("div",{className:"flex items-start gap-3 md:col-span-2",children:[t.jsx(ad,{className:"h-5 w-5 text-blue-500 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Notes"}),t.jsx("p",{className:"font-medium text-gray-900 whitespace-pre-wrap",children:e.notes})]})]})]})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"}),e.status==="PENDING"&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>s(e),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[t.jsx(ar,{className:"h-4 w-4"}),"Approve"]}),t.jsxs("button",{onClick:()=>n(e),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[t.jsx(Rt,{className:"h-4 w-4"}),"Reject"]})]})]})]})})}function zfe(){const[e,r]=v.useState([]),[s,n]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:20,hasNextPage:!1,hasPrevPage:!1}),[a,l]=v.useState({page:1,limit:20,status:"",search:"",sortBy:"submittedAt",sortOrder:"desc"}),[d,h]=v.useState(!0),[f,x]=v.useState(null),[p,b]=v.useState(null),[S,T]=v.useState(!0),[A,P]=v.useState(!1),[D,I]=v.useState(!1),[L,_]=v.useState(!1),[$,F]=v.useState(null),B=v.useCallback(async()=>{h(!0),x(null);try{const W=await d0.getAll(a);W.success?(r(W.data.requests||[]),n(W.data.pagination||s)):(x(W.message||"Failed to fetch requests"),r([]))}catch{x("An error occurred while fetching requests"),r([])}finally{h(!1)}},[a]),M=v.useCallback(async()=>{T(!0);try{const W=await d0.getStats();W.success&&b(W.data)}catch(W){console.error("Failed to fetch stats:",W)}finally{T(!1)}},[]);v.useEffect(()=>{B()},[B]),v.useEffect(()=>{M()},[M]);const V=(W,le)=>{l(ge=>({...ge,[W]:le,page:1}))},z=W=>{l(le=>({...le,page:W}))},H=W=>{V("search",W)},U=W=>{F(W),_(!0)},G=W=>{F(W),P(!0)},Q=W=>{F(W),I(!0)},ce=async(W,le)=>{const ge=await d0.approve(W,le);if(ge.success)B(),M();else throw new Error(ge.message||"Failed to approve request")},ne=async(W,le)=>{const ge=await d0.reject(W,le);if(ge.success)B(),M();else throw new Error(ge.message||"Failed to reject request")},J=W=>W?new Date(W).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A";return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Motivata Blend Requests"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage and review Motivata Blend registration requests"})]}),t.jsxs("button",{onClick:()=>{B(),M()},disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50",children:[t.jsx(ms,{className:`h-4 w-4 ${d?"animate-spin":""}`}),"Refresh"]})]}),t.jsx(b9,{stats:p,isLoading:S}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[t.jsx(Fn,{className:"h-5 w-5"}),"Filters"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(br,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search by name, phone, or email...",value:a.search,onChange:W=>H(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("select",{value:a.status,onChange:W=>V("status",W.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"PENDING",children:"Pending"}),t.jsx("option",{value:"APPROVED",children:"Approved"}),t.jsx("option",{value:"REJECTED",children:"Rejected"})]}),t.jsxs("select",{value:`${a.sortBy}-${a.sortOrder}`,onChange:W=>{const[le,ge]=W.target.value.split("-");l(re=>({...re,sortBy:le,sortOrder:ge}))},className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"submittedAt-desc",children:"Newest First"}),t.jsx("option",{value:"submittedAt-asc",children:"Oldest First"}),t.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),t.jsx("option",{value:"name-desc",children:"Name (Z-A)"})]})]})]}),f&&t.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[t.jsx(Tt,{className:"h-5 w-5"}),f]}),d&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 flex items-center justify-center",children:[t.jsx(st,{className:"h-8 w-8 animate-spin text-gray-800"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading requests..."})]}),!d&&e.length===0&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(gr,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No requests found"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a.search||a.status?"Try adjusting your filters":"New requests will appear here"})]}),!d&&e.length>0&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Applicant"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Contact"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Submitted On"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:e.map(W=>t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(gr,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"font-medium text-gray-900",children:W.name})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(hs,{className:"h-3.5 w-3.5 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-600",children:W.phone})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ji,{className:"h-3.5 w-3.5 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-600",children:W.email})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx(ZS,{status:W.status})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.jsx(Xt,{className:"h-4 w-4"}),J(W.submittedAt||W.createdAt)]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx("button",{onClick:()=>U(W),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:t.jsx(Or,{className:"h-4 w-4"})}),W.status==="PENDING"&&t.jsx("button",{onClick:()=>G(W),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve Request",children:t.jsx(ar,{className:"h-4 w-4"})}),W.status==="PENDING"&&t.jsx("button",{onClick:()=>Q(W),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject Request",children:t.jsx(Rt,{className:"h-4 w-4"})})]})})]},W._id))})]})}),t.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:t.jsx(vr,{currentPage:s.currentPage,totalPages:s.totalPages,onPageChange:z,totalCount:s.totalCount,itemsPerPage:s.limit})})]}),A&&$&&t.jsx(v9,{request:$,onClose:()=>{P(!1),F(null)},onApprove:ce,title:"Approve Motivata Blend Request"}),D&&$&&t.jsx(N9,{request:$,onClose:()=>{I(!1),F(null)},onReject:ne,title:"Reject Motivata Blend Request"}),L&&$&&t.jsx(j9,{request:$,onClose:()=>{_(!1),F(null)},onApprove:G,onReject:Q,title:"Motivata Blend Request Details"})]})}function Vfe(){const[e,r]=v.useState([]),[s,n]=v.useState({currentPage:1,totalPages:0,totalCount:0,limit:20,hasNextPage:!1,hasPrevPage:!1}),[a,l]=v.useState({page:1,limit:20,status:"",search:"",sortBy:"submittedAt",sortOrder:"desc"}),[d,h]=v.useState(!0),[f,x]=v.useState(null),[p,b]=v.useState(null),[S,T]=v.useState(!0),[A,P]=v.useState(!1),[D,I]=v.useState(!1),[L,_]=v.useState(!1),[$,F]=v.useState(null),B=v.useCallback(async()=>{h(!0),x(null);try{const W=await u0.getAll(a);W.success?(r(W.data.requests||[]),n(W.data.pagination||s)):(x(W.message||"Failed to fetch requests"),r([]))}catch{x("An error occurred while fetching requests"),r([])}finally{h(!1)}},[a]),M=v.useCallback(async()=>{T(!0);try{const W=await u0.getStats();W.success&&b(W.data)}catch(W){console.error("Failed to fetch stats:",W)}finally{T(!1)}},[]);v.useEffect(()=>{B()},[B]),v.useEffect(()=>{M()},[M]);const V=(W,le)=>{l(ge=>({...ge,[W]:le,page:1}))},z=W=>{l(le=>({...le,page:W}))},H=W=>{V("search",W)},U=W=>{F(W),_(!0)},G=W=>{F(W),P(!0)},Q=W=>{F(W),I(!0)},ce=async(W,le)=>{const ge=await u0.approve(W,le);if(ge.success)B(),M();else throw new Error(ge.message||"Failed to approve request")},ne=async(W,le)=>{const ge=await u0.reject(W,le);if(ge.success)B(),M();else throw new Error(ge.message||"Failed to reject request")},J=W=>W?new Date(W).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A";return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Round Table Requests"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage and review Round Table registration requests"})]}),t.jsxs("button",{onClick:()=>{B(),M()},disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50",children:[t.jsx(ms,{className:`h-4 w-4 ${d?"animate-spin":""}`}),"Refresh"]})]}),t.jsx(b9,{stats:p,isLoading:S}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[t.jsx(Fn,{className:"h-5 w-5"}),"Filters"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(br,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search by name, phone, or email...",value:a.search,onChange:W=>H(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),t.jsxs("select",{value:a.status,onChange:W=>V("status",W.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"PENDING",children:"Pending"}),t.jsx("option",{value:"APPROVED",children:"Approved"}),t.jsx("option",{value:"REJECTED",children:"Rejected"})]}),t.jsxs("select",{value:`${a.sortBy}-${a.sortOrder}`,onChange:W=>{const[le,ge]=W.target.value.split("-");l(re=>({...re,sortBy:le,sortOrder:ge}))},className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[t.jsx("option",{value:"submittedAt-desc",children:"Newest First"}),t.jsx("option",{value:"submittedAt-asc",children:"Oldest First"}),t.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),t.jsx("option",{value:"name-desc",children:"Name (Z-A)"})]})]})]}),f&&t.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[t.jsx(Tt,{className:"h-5 w-5"}),f]}),d&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 flex items-center justify-center",children:[t.jsx(st,{className:"h-8 w-8 animate-spin text-gray-800"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading requests..."})]}),!d&&e.length===0&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[t.jsx(gr,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No requests found"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a.search||a.status?"Try adjusting your filters":"New requests will appear here"})]}),!d&&e.length>0&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Applicant"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Contact"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),t.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Submitted On"}),t.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),t.jsx("tbody",{children:e.map(W=>t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(gr,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"font-medium text-gray-900",children:W.name})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(hs,{className:"h-3.5 w-3.5 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-600",children:W.phone})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ji,{className:"h-3.5 w-3.5 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-600",children:W.email})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx(ZS,{status:W.status})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.jsx(Xt,{className:"h-4 w-4"}),J(W.submittedAt||W.createdAt)]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx("button",{onClick:()=>U(W),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:t.jsx(Or,{className:"h-4 w-4"})}),W.status==="PENDING"&&t.jsx("button",{onClick:()=>G(W),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve Request",children:t.jsx(ar,{className:"h-4 w-4"})}),W.status==="PENDING"&&t.jsx("button",{onClick:()=>Q(W),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject Request",children:t.jsx(Rt,{className:"h-4 w-4"})})]})})]},W._id))})]})}),t.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:t.jsx(vr,{currentPage:s.currentPage,totalPages:s.totalPages,onPageChange:z,totalCount:s.totalCount,itemsPerPage:s.limit})})]}),A&&$&&t.jsx(v9,{request:$,onClose:()=>{P(!1),F(null)},onApprove:ce,title:"Approve Round Table Request"}),D&&$&&t.jsx(N9,{request:$,onClose:()=>{I(!1),F(null)},onReject:ne,title:"Reject Round Table Request"}),L&&$&&t.jsx(j9,{request:$,onClose:()=>{_(!1),F(null)},onApprove:G,onReject:Q,title:"Round Table Request Details"})]})}function $fe(){return t.jsx(hB,{children:t.jsx(ZU,{children:t.jsxs($F,{children:[t.jsx(tr,{path:"/login",element:t.jsx(JU,{children:t.jsx(R$,{})})}),t.jsxs(tr,{element:t.jsx(QU,{children:t.jsx(I$,{})}),children:[t.jsx(tr,{path:"/dashboard",element:t.jsx(yue,{})}),t.jsx(tr,{path:"/events",element:t.jsx(Rue,{})}),t.jsx(tr,{path:"/enrollments",element:t.jsx(Mue,{})}),t.jsx(tr,{path:"/coupons",element:t.jsx(Uue,{})}),t.jsx(tr,{path:"/users",element:t.jsx(Gue,{})}),t.jsx(tr,{path:"/admins",element:t.jsx(ihe,{})}),t.jsx(tr,{path:"/payments",element:t.jsx(lhe,{})}),t.jsx(tr,{path:"/cash-tickets",element:t.jsx(whe,{})}),t.jsx(tr,{path:"/vouchers",element:t.jsx(Dhe,{})}),t.jsx(tr,{path:"/sessions",element:t.jsx(Uhe,{})}),t.jsx(tr,{path:"/quizes",element:t.jsx(Qhe,{})}),t.jsx(tr,{path:"/challenges",element:t.jsx(i0e,{})}),t.jsx(tr,{path:"/polls",element:t.jsx(x0e,{})}),t.jsx(tr,{path:"/stories",element:t.jsx(I0e,{})}),t.jsx(tr,{path:"/memberships",element:t.jsx(vme,{})}),t.jsx(tr,{path:"/membership-requests",element:t.jsx(Sme,{})}),t.jsx(tr,{path:"/settings",element:t.jsx(kme,{})}),t.jsx(tr,{path:"/feature-access",element:t.jsx(_me,{})}),t.jsx(tr,{path:"/clubs",element:t.jsx(Cme,{})}),t.jsx(tr,{path:"/club-join-requests",element:t.jsx(Tme,{})}),t.jsx(tr,{path:"/admin-club-posts",element:t.jsx(Pme,{})}),t.jsx(tr,{path:"/scan-qr",element:t.jsx(ome,{})}),t.jsx(tr,{path:"/ticket-reshare",element:t.jsx(fme,{})}),t.jsx(tr,{path:"/services",element:t.jsx(Vme,{})}),t.jsx(tr,{path:"/service-orders",element:t.jsx(rfe,{})}),t.jsx(tr,{path:"/service-requests",element:t.jsx(xfe,{})}),t.jsx(tr,{path:"/user-subscriptions",element:t.jsx(_fe,{})}),t.jsx(tr,{path:"/test-services",element:t.jsx(Ife,{})}),t.jsx(tr,{path:"/feature-pricing",element:t.jsx(Rfe,{})}),t.jsx(tr,{path:"/feature-requests",element:t.jsx(Ufe,{})}),t.jsx(tr,{path:"/motivata-blend-requests",element:t.jsx(zfe,{})}),t.jsx(tr,{path:"/round-table-requests",element:t.jsx(Vfe,{})})]}),t.jsx(tr,{path:"/",element:t.jsx(rx,{to:"/dashboard",replace:!0})}),t.jsx(tr,{path:"*",element:t.jsx(rx,{to:"/dashboard",replace:!0})})]})})})}XL.createRoot(document.getElementById("root")).render(t.jsx(v.StrictMode,{children:t.jsx($fe,{})}));
