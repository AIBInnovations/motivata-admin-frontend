function x_(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in e)){const o=Object.getOwnPropertyDescriptor(a,l);o&&Object.defineProperty(e,l,o.get?o:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(l){if(l.ep)return;l.ep=!0;const o=r(l);fetch(l.href,o)}})();var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var px={exports:{}},It={};var e4;function aL(){if(e4)return It;e4=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),C=Symbol.iterator;function O(K){return K===null||typeof K!="object"?null:(K=C&&K[C]||K["@@iterator"],typeof K=="function"?K:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,k={};function I(K,ee,ge){this.props=K,this.context=ee,this.refs=k,this.updater=ge||_}I.prototype.isReactComponent={},I.prototype.setState=function(K,ee){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ee,"setState")},I.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function F(){}F.prototype=I.prototype;function R(K,ee,ge){this.props=K,this.context=ee,this.refs=k,this.updater=ge||_}var Y=R.prototype=new F;Y.constructor=R,P(Y,I.prototype),Y.isPureReactComponent=!0;var j=Array.isArray;function z(){}var L={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function V(K,ee,ge){var le=ge.ref;return{$$typeof:e,type:K,key:ee,ref:le!==void 0?le:null,props:ge}}function W(K,ee){return V(K.type,ee,K.props)}function H(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function $(K){var ee={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ge){return ee[ge]})}var ce=/\/+/g;function me(K,ee){return typeof K=="object"&&K!==null&&K.key!=null?$(""+K.key):ee.toString(36)}function ae(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(z,z):(K.status="pending",K.then(function(ee){K.status==="pending"&&(K.status="fulfilled",K.value=ee)},function(ee){K.status==="pending"&&(K.status="rejected",K.reason=ee)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function J(K,ee,ge,le,Ce){var ie=typeof K;(ie==="undefined"||ie==="boolean")&&(K=null);var de=!1;if(K===null)de=!0;else switch(ie){case"bigint":case"string":case"number":de=!0;break;case"object":switch(K.$$typeof){case e:case t:de=!0;break;case x:return de=K._init,J(de(K._payload),ee,ge,le,Ce)}}if(de)return Ce=Ce(K),de=le===""?"."+me(K,0):le,j(Ce)?(ge="",de!=null&&(ge=de.replace(ce,"$&/")+"/"),J(Ce,ee,ge,"",function(Xe){return Xe})):Ce!=null&&(H(Ce)&&(Ce=W(Ce,ge+(Ce.key==null||K&&K.key===Ce.key?"":(""+Ce.key).replace(ce,"$&/")+"/")+de)),ee.push(Ce)),1;de=0;var $e=le===""?".":le+":";if(j(K))for(var be=0;be<K.length;be++)le=K[be],ie=$e+me(le,be),de+=J(le,ee,ge,ie,Ce);else if(be=O(K),typeof be=="function")for(K=be.call(K),be=0;!(le=K.next()).done;)le=le.value,ie=$e+me(le,be++),de+=J(le,ee,ge,ie,Ce);else if(ie==="object"){if(typeof K.then=="function")return J(ae(K),ee,ge,le,Ce);throw ee=String(K),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return de}function se(K,ee,ge){if(K==null)return K;var le=[],Ce=0;return J(K,le,"","",function(ie){return ee.call(ge,ie,Ce++)}),le}function Ee(K){if(K._status===-1){var ee=K._result;ee=ee(),ee.then(function(ge){(K._status===0||K._status===-1)&&(K._status=1,K._result=ge)},function(ge){(K._status===0||K._status===-1)&&(K._status=2,K._result=ge)}),K._status===-1&&(K._status=0,K._result=ee)}if(K._status===1)return K._result.default;throw K._result}var we=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},te={map:se,forEach:function(K,ee,ge){se(K,function(){ee.apply(this,arguments)},ge)},count:function(K){var ee=0;return se(K,function(){ee++}),ee},toArray:function(K){return se(K,function(ee){return ee})||[]},only:function(K){if(!H(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return It.Activity=E,It.Children=te,It.Component=I,It.Fragment=r,It.Profiler=l,It.PureComponent=R,It.StrictMode=a,It.Suspense=g,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,It.__COMPILER_RUNTIME={__proto__:null,c:function(K){return L.H.useMemoCache(K)}},It.cache=function(K){return function(){return K.apply(null,arguments)}},It.cacheSignal=function(){return null},It.cloneElement=function(K,ee,ge){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var le=P({},K.props),Ce=K.key;if(ee!=null)for(ie in ee.key!==void 0&&(Ce=""+ee.key),ee)!q.call(ee,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&ee.ref===void 0||(le[ie]=ee[ie]);var ie=arguments.length-2;if(ie===1)le.children=ge;else if(1<ie){for(var de=Array(ie),$e=0;$e<ie;$e++)de[$e]=arguments[$e+2];le.children=de}return V(K.type,Ce,le)},It.createContext=function(K){return K={$$typeof:d,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:o,_context:K},K},It.createElement=function(K,ee,ge){var le,Ce={},ie=null;if(ee!=null)for(le in ee.key!==void 0&&(ie=""+ee.key),ee)q.call(ee,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(Ce[le]=ee[le]);var de=arguments.length-2;if(de===1)Ce.children=ge;else if(1<de){for(var $e=Array(de),be=0;be<de;be++)$e[be]=arguments[be+2];Ce.children=$e}if(K&&K.defaultProps)for(le in de=K.defaultProps,de)Ce[le]===void 0&&(Ce[le]=de[le]);return V(K,ie,Ce)},It.createRef=function(){return{current:null}},It.forwardRef=function(K){return{$$typeof:h,render:K}},It.isValidElement=H,It.lazy=function(K){return{$$typeof:x,_payload:{_status:-1,_result:K},_init:Ee}},It.memo=function(K,ee){return{$$typeof:p,type:K,compare:ee===void 0?null:ee}},It.startTransition=function(K){var ee=L.T,ge={};L.T=ge;try{var le=K(),Ce=L.S;Ce!==null&&Ce(ge,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(z,we)}catch(ie){we(ie)}finally{ee!==null&&ge.types!==null&&(ee.types=ge.types),L.T=ee}},It.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},It.use=function(K){return L.H.use(K)},It.useActionState=function(K,ee,ge){return L.H.useActionState(K,ee,ge)},It.useCallback=function(K,ee){return L.H.useCallback(K,ee)},It.useContext=function(K){return L.H.useContext(K)},It.useDebugValue=function(){},It.useDeferredValue=function(K,ee){return L.H.useDeferredValue(K,ee)},It.useEffect=function(K,ee){return L.H.useEffect(K,ee)},It.useEffectEvent=function(K){return L.H.useEffectEvent(K)},It.useId=function(){return L.H.useId()},It.useImperativeHandle=function(K,ee,ge){return L.H.useImperativeHandle(K,ee,ge)},It.useInsertionEffect=function(K,ee){return L.H.useInsertionEffect(K,ee)},It.useLayoutEffect=function(K,ee){return L.H.useLayoutEffect(K,ee)},It.useMemo=function(K,ee){return L.H.useMemo(K,ee)},It.useOptimistic=function(K,ee){return L.H.useOptimistic(K,ee)},It.useReducer=function(K,ee,ge){return L.H.useReducer(K,ee,ge)},It.useRef=function(K){return L.H.useRef(K)},It.useState=function(K){return L.H.useState(K)},It.useSyncExternalStore=function(K,ee,ge){return L.H.useSyncExternalStore(K,ee,ge)},It.useTransition=function(){return L.H.useTransition()},It.version="19.2.0",It}var t4;function cd(){return t4||(t4=1,px.exports=aL()),px.exports}var N=cd();const n=Bl(N),nL=x_({__proto__:null,default:n},[N]);var yx={exports:{}},hm={},xx={exports:{}},bx={};var r4;function sL(){return r4||(r4=1,(function(e){function t(J,se){var Ee=J.length;J.push(se);e:for(;0<Ee;){var we=Ee-1>>>1,te=J[we];if(0<l(te,se))J[we]=se,J[Ee]=te,Ee=we;else break e}}function r(J){return J.length===0?null:J[0]}function a(J){if(J.length===0)return null;var se=J[0],Ee=J.pop();if(Ee!==se){J[0]=Ee;e:for(var we=0,te=J.length,K=te>>>1;we<K;){var ee=2*(we+1)-1,ge=J[ee],le=ee+1,Ce=J[le];if(0>l(ge,Ee))le<te&&0>l(Ce,ge)?(J[we]=Ce,J[le]=Ee,we=le):(J[we]=ge,J[ee]=Ee,we=ee);else if(le<te&&0>l(Ce,Ee))J[we]=Ce,J[le]=Ee,we=le;else break e}}return se}function l(J,se){var Ee=J.sortIndex-se.sortIndex;return Ee!==0?Ee:J.id-se.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var d=Date,h=d.now();e.unstable_now=function(){return d.now()-h}}var g=[],p=[],x=1,E=null,C=3,O=!1,_=!1,P=!1,k=!1,I=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function Y(J){for(var se=r(p);se!==null;){if(se.callback===null)a(p);else if(se.startTime<=J)a(p),se.sortIndex=se.expirationTime,t(g,se);else break;se=r(p)}}function j(J){if(P=!1,Y(J),!_)if(r(g)!==null)_=!0,z||(z=!0,$());else{var se=r(p);se!==null&&ae(j,se.startTime-J)}}var z=!1,L=-1,q=5,V=-1;function W(){return k?!0:!(e.unstable_now()-V<q)}function H(){if(k=!1,z){var J=e.unstable_now();V=J;var se=!0;try{e:{_=!1,P&&(P=!1,F(L),L=-1),O=!0;var Ee=C;try{t:{for(Y(J),E=r(g);E!==null&&!(E.expirationTime>J&&W());){var we=E.callback;if(typeof we=="function"){E.callback=null,C=E.priorityLevel;var te=we(E.expirationTime<=J);if(J=e.unstable_now(),typeof te=="function"){E.callback=te,Y(J),se=!0;break t}E===r(g)&&a(g),Y(J)}else a(g);E=r(g)}if(E!==null)se=!0;else{var K=r(p);K!==null&&ae(j,K.startTime-J),se=!1}}break e}finally{E=null,C=Ee,O=!1}se=void 0}}finally{se?$():z=!1}}}var $;if(typeof R=="function")$=function(){R(H)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,me=ce.port2;ce.port1.onmessage=H,$=function(){me.postMessage(null)}}else $=function(){I(H,0)};function ae(J,se){L=I(function(){J(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_next=function(J){switch(C){case 1:case 2:case 3:var se=3;break;default:se=C}var Ee=C;C=se;try{return J()}finally{C=Ee}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(J,se){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Ee=C;C=J;try{return se()}finally{C=Ee}},e.unstable_scheduleCallback=function(J,se,Ee){var we=e.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?we+Ee:we):Ee=we,J){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Ee+te,J={id:x++,callback:se,priorityLevel:J,startTime:Ee,expirationTime:te,sortIndex:-1},Ee>we?(J.sortIndex=Ee,t(p,J),r(g)===null&&J===r(p)&&(P?(F(L),L=-1):P=!0,ae(j,Ee-we))):(J.sortIndex=te,t(g,J),_||O||(_=!0,z||(z=!0,$()))),J},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(J){var se=C;return function(){var Ee=C;C=se;try{return J.apply(this,arguments)}finally{C=Ee}}}})(bx)),bx}var a4;function lL(){return a4||(a4=1,xx.exports=sL()),xx.exports}var vx={exports:{}},cn={};var n4;function iL(){if(n4)return cn;n4=1;var e=cd();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(g,p,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:g,containerInfo:p,implementation:x}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,cn.createPortal=function(g,p){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(g,p,null,x)},cn.flushSync=function(g){var p=d.T,x=a.p;try{if(d.T=null,a.p=2,g)return g()}finally{d.T=p,a.p=x,a.d.f()}},cn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(g,p))},cn.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},cn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var x=p.as,E=h(x,p.crossOrigin),C=typeof p.integrity=="string"?p.integrity:void 0,O=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;x==="style"?a.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:C,fetchPriority:O}):x==="script"&&a.d.X(g,{crossOrigin:E,integrity:C,fetchPriority:O,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},cn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var x=h(p.as,p.crossOrigin);a.d.M(g,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(g)},cn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var x=p.as,E=h(x,p.crossOrigin);a.d.L(g,x,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},cn.preloadModule=function(g,p){if(typeof g=="string")if(p){var x=h(p.as,p.crossOrigin);a.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(g)},cn.requestFormReset=function(g){a.d.r(g)},cn.unstable_batchedUpdates=function(g,p){return g(p)},cn.useFormState=function(g,p,x){return d.H.useFormState(g,p,x)},cn.useFormStatus=function(){return d.H.useHostTransitionStatus()},cn.version="19.2.0",cn}var s4;function b_(){if(s4)return vx.exports;s4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),vx.exports=iL(),vx.exports}var l4;function oL(){if(l4)return hm;l4=1;var e=lL(),t=cd(),r=b_();function a(s){var c="https://react.dev/errors/"+s;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var c=s,f=s;if(s.alternate)for(;c.return;)c=c.return;else{s=c;do c=s,(c.flags&4098)!==0&&(f=c.return),s=c.return;while(s)}return c.tag===3?f:null}function d(s){if(s.tag===13){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function h(s){if(s.tag===31){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function g(s){if(o(s)!==s)throw Error(a(188))}function p(s){var c=s.alternate;if(!c){if(c=o(s),c===null)throw Error(a(188));return c!==s?null:s}for(var f=s,v=c;;){var A=f.return;if(A===null)break;var D=A.alternate;if(D===null){if(v=A.return,v!==null){f=v;continue}break}if(A.child===D.child){for(D=A.child;D;){if(D===f)return g(A),s;if(D===v)return g(A),c;D=D.sibling}throw Error(a(188))}if(f.return!==v.return)f=A,v=D;else{for(var U=!1,Q=A.child;Q;){if(Q===f){U=!0,f=A,v=D;break}if(Q===v){U=!0,v=A,f=D;break}Q=Q.sibling}if(!U){for(Q=D.child;Q;){if(Q===f){U=!0,f=D,v=A;break}if(Q===v){U=!0,v=D,f=A;break}Q=Q.sibling}if(!U)throw Error(a(189))}}if(f.alternate!==v)throw Error(a(190))}if(f.tag!==3)throw Error(a(188));return f.stateNode.current===f?s:c}function x(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s;for(s=s.child;s!==null;){if(c=x(s),c!==null)return c;s=s.sibling}return null}var E=Object.assign,C=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),R=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function $(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var ce=Symbol.for("react.client.reference");function me(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ce?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case P:return"Fragment";case I:return"Profiler";case k:return"StrictMode";case j:return"Suspense";case z:return"SuspenseList";case V:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case R:return s.displayName||"Context";case F:return(s._context.displayName||"Context")+".Consumer";case Y:var c=s.render;return s=s.displayName,s||(s=c.displayName||c.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return c=s.displayName||null,c!==null?c:me(s.type)||"Memo";case q:c=s._payload,s=s._init;try{return me(s(c))}catch{}}return null}var ae=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},we=[],te=-1;function K(s){return{current:s}}function ee(s){0>te||(s.current=we[te],we[te]=null,te--)}function ge(s,c){te++,we[te]=s.current,s.current=c}var le=K(null),Ce=K(null),ie=K(null),de=K(null);function $e(s,c){switch(ge(ie,c),ge(Ce,s),ge(le,null),c.nodeType){case 9:case 11:s=(s=c.documentElement)&&(s=s.namespaceURI)?N3(s):0;break;default:if(s=c.tagName,c=c.namespaceURI)c=N3(c),s=S3(c,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(le),ge(le,s)}function be(){ee(le),ee(Ce),ee(ie)}function Xe(s){s.memoizedState!==null&&ge(de,s);var c=le.current,f=S3(c,s.type);c!==f&&(ge(Ce,s),ge(le,f))}function at(s){Ce.current===s&&(ee(le),ee(Ce)),de.current===s&&(ee(de),um._currentValue=Ee)}var Le,ve;function Ue(s){if(Le===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Le=c&&c[1]||"",ve=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Le+s+ve}var oe=!1;function qe(s,c){if(!s||oe)return"";oe=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(c){var Ye=function(){throw Error()};if(Object.defineProperty(Ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ye,[])}catch(Be){var ke=Be}Reflect.construct(s,[],Ye)}else{try{Ye.call()}catch(Be){ke=Be}s.call(Ye.prototype)}}else{try{throw Error()}catch(Be){ke=Be}(Ye=s())&&typeof Ye.catch=="function"&&Ye.catch(function(){})}}catch(Be){if(Be&&ke&&typeof Be.stack=="string")return[Be.stack,ke.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=v.DetermineComponentFrameRoot(),U=D[0],Q=D[1];if(U&&Q){var ue=U.split(`
`),_e=Q.split(`
`);for(A=v=0;v<ue.length&&!ue[v].includes("DetermineComponentFrameRoot");)v++;for(;A<_e.length&&!_e[A].includes("DetermineComponentFrameRoot");)A++;if(v===ue.length||A===_e.length)for(v=ue.length-1,A=_e.length-1;1<=v&&0<=A&&ue[v]!==_e[A];)A--;for(;1<=v&&0<=A;v--,A--)if(ue[v]!==_e[A]){if(v!==1||A!==1)do if(v--,A--,0>A||ue[v]!==_e[A]){var He=`
`+ue[v].replace(" at new "," at ");return s.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",s.displayName)),He}while(1<=v&&0<=A);break}}}finally{oe=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?Ue(f):""}function Ne(s,c){switch(s.tag){case 26:case 27:case 5:return Ue(s.type);case 16:return Ue("Lazy");case 13:return s.child!==c&&c!==null?Ue("Suspense Fallback"):Ue("Suspense");case 19:return Ue("SuspenseList");case 0:case 15:return qe(s.type,!1);case 11:return qe(s.type.render,!1);case 1:return qe(s.type,!0);case 31:return Ue("Activity");default:return""}}function tt(s){try{var c="",f=null;do c+=Ne(s,f),f=s,s=s.return;while(s);return c}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var it=Object.prototype.hasOwnProperty,pt=e.unstable_scheduleCallback,We=e.unstable_cancelCallback,lt=e.unstable_shouldYield,Fe=e.unstable_requestPaint,mt=e.unstable_now,$t=e.unstable_getCurrentPriorityLevel,er=e.unstable_ImmediatePriority,tr=e.unstable_UserBlockingPriority,ut=e.unstable_NormalPriority,At=e.unstable_LowPriority,vr=e.unstable_IdlePriority,ur=e.log,ea=e.unstable_setDisableYieldValue,kt=null,xe=null;function Qe(s){if(typeof ur=="function"&&ea(s),xe&&typeof xe.setStrictMode=="function")try{xe.setStrictMode(kt,s)}catch{}}var st=Math.clz32?Math.clz32:$a,Tt=Math.log,dr=Math.LN2;function $a(s){return s>>>=0,s===0?32:31-(Tt(s)/dr|0)|0}var ta=256,bt=262144,Je=4194304;function Lt(s){var c=s&42;if(c!==0)return c;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Lr(s,c,f){var v=s.pendingLanes;if(v===0)return 0;var A=0,D=s.suspendedLanes,U=s.pingedLanes;s=s.warmLanes;var Q=v&134217727;return Q!==0?(v=Q&~D,v!==0?A=Lt(v):(U&=Q,U!==0?A=Lt(U):f||(f=Q&~s,f!==0&&(A=Lt(f))))):(Q=v&~D,Q!==0?A=Lt(Q):U!==0?A=Lt(U):f||(f=v&~s,f!==0&&(A=Lt(f)))),A===0?0:c!==0&&c!==A&&(c&D)===0&&(D=A&-A,f=c&-c,D>=f||D===32&&(f&4194048)!==0)?c:A}function fe(s,c){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&c)===0}function De(s,c){switch(s){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ot(){var s=Je;return Je<<=1,(Je&62914560)===0&&(Je=4194304),s}function Ja(s){for(var c=[],f=0;31>f;f++)c.push(s);return c}function ds(s,c){s.pendingLanes|=c,c!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Nn(s,c,f,v,A,D){var U=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var Q=s.entanglements,ue=s.expirationTimes,_e=s.hiddenUpdates;for(f=U&~f;0<f;){var He=31-st(f),Ye=1<<He;Q[He]=0,ue[He]=-1;var ke=_e[He];if(ke!==null)for(_e[He]=null,He=0;He<ke.length;He++){var Be=ke[He];Be!==null&&(Be.lane&=-536870913)}f&=~Ye}v!==0&&Vc(s,v,0),D!==0&&A===0&&s.tag!==0&&(s.suspendedLanes|=D&~(U&~c))}function Vc(s,c,f){s.pendingLanes|=c,s.suspendedLanes&=~c;var v=31-st(c);s.entangledLanes|=c,s.entanglements[v]=s.entanglements[v]|1073741824|f&261930}function Sn(s,c){var f=s.entangledLanes|=c;for(s=s.entanglements;f;){var v=31-st(f),A=1<<v;A&c|s[v]&c&&(s[v]|=c),f&=~A}}function Fl(s,c){var f=c&-c;return f=(f&42)!==0?1:Ea(f),(f&(s.suspendedLanes|c))!==0?0:f}function Ea(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Vn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function qa(){var s=se.p;return s!==0?s:(s=window.event,s===void 0?32:Y3(s.type))}function ct(s,c){var f=se.p;try{return se.p=s,c()}finally{se.p=f}}var Ga=Math.random().toString(36).slice(2),$r="__reactFiber$"+Ga,rr="__reactProps$"+Ga,hn="__reactContainer$"+Ga,fl="__reactEvents$"+Ga,Ii="__reactListeners$"+Ga,Cn="__reactHandles$"+Ga,Hc="__reactResources$"+Ga,hl="__reactMarker$"+Ga;function en(s){delete s[$r],delete s[rr],delete s[fl],delete s[Ii],delete s[Cn]}function Br(s){var c=s[$r];if(c)return c;for(var f=s.parentNode;f;){if(c=f[hn]||f[$r]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(s=k3(s);s!==null;){if(f=s[$r])return f;s=k3(s)}return c}s=f,f=s.parentNode}return null}function Qt(s){if(s=s[$r]||s[hn]){var c=s.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return s}return null}function Ve(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s.stateNode;throw Error(a(33))}function gt(s){var c=s[Hc];return c||(c=s[Hc]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function kr(s){s[hl]=!0}var Ke=new Set,Yf={};function mr(s,c){Hn(s,c),Hn(s+"Capture",c)}function Hn(s,c){for(Yf[s]=c,s=0;s<c.length;s++)Ke.add(c[s])}var w1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ar={},Jt={};function qt(s){return it.call(Jt,s)?!0:it.call(ar,s)?!1:w1.test(s)?Jt[s]=!0:(ar[s]=!0,!1)}function Ri(s,c,f){if(qt(c))if(f===null)s.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(c);return;case"boolean":var v=c.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){s.removeAttribute(c);return}}s.setAttribute(c,""+f)}}function Li(s,c,f){if(f===null)s.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttribute(c,""+f)}}function $n(s,c,f,v){if(v===null)s.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(c,f,""+v)}}function nr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Vs(s){var c=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function N1(s,c,f){var v=Object.getOwnPropertyDescriptor(s.constructor.prototype,c);if(!s.hasOwnProperty(c)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var A=v.get,D=v.set;return Object.defineProperty(s,c,{configurable:!0,get:function(){return A.call(this)},set:function(U){f=""+U,D.call(this,U)}}),Object.defineProperty(s,c,{enumerable:v.enumerable}),{getValue:function(){return f},setValue:function(U){f=""+U},stopTracking:function(){s._valueTracker=null,delete s[c]}}}}function Fr(s){if(!s._valueTracker){var c=Vs(s)?"checked":"value";s._valueTracker=N1(s,c,""+s[c])}}function Hs(s){if(!s)return!1;var c=s._valueTracker;if(!c)return!0;var f=c.getValue(),v="";return s&&(v=Vs(s)?s.checked?"true":"false":s.value),s=v,s!==f?(c.setValue(s),!0):!1}function $c(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Bi=/[\n"\\]/g;function Ht(s){return s.replace(Bi,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function wa(s,c,f,v,A,D,U,Q){s.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?s.type=U:s.removeAttribute("type"),c!=null?U==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+nr(c)):s.value!==""+nr(c)&&(s.value=""+nr(c)):U!=="submit"&&U!=="reset"||s.removeAttribute("value"),c!=null?re(s,U,nr(c)):f!=null?re(s,U,nr(f)):v!=null&&s.removeAttribute("value"),A==null&&D!=null&&(s.defaultChecked=!!D),A!=null&&(s.checked=A&&typeof A!="function"&&typeof A!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?s.name=""+nr(Q):s.removeAttribute("name")}function Te(s,c,f,v,A,D,U,Q){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(s.type=D),c!=null||f!=null){if(!(D!=="submit"&&D!=="reset"||c!=null)){Fr(s);return}f=f!=null?""+nr(f):"",c=c!=null?""+nr(c):f,Q||c===s.value||(s.value=c),s.defaultValue=c}v=v??A,v=typeof v!="function"&&typeof v!="symbol"&&!!v,s.checked=Q?s.checked:!!v,s.defaultChecked=!!v,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(s.name=U),Fr(s)}function re(s,c,f){c==="number"&&$c(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function yt(s,c,f,v){if(s=s.options,c){c={};for(var A=0;A<f.length;A++)c["$"+f[A]]=!0;for(f=0;f<s.length;f++)A=c.hasOwnProperty("$"+s[f].value),s[f].selected!==A&&(s[f].selected=A),A&&v&&(s[f].defaultSelected=!0)}else{for(f=""+nr(f),c=null,A=0;A<s.length;A++){if(s[A].value===f){s[A].selected=!0,v&&(s[A].defaultSelected=!0);return}c!==null||s[A].disabled||(c=s[A])}c!==null&&(c.selected=!0)}}function fa(s,c,f){if(c!=null&&(c=""+nr(c),c!==s.value&&(s.value=c),f==null)){s.defaultValue!==c&&(s.defaultValue=c);return}s.defaultValue=f!=null?""+nr(f):""}function gn(s,c,f,v){if(c==null){if(v!=null){if(f!=null)throw Error(a(92));if(ae(v)){if(1<v.length)throw Error(a(93));v=v[0]}f=v}f==null&&(f=""),c=f}f=nr(c),s.defaultValue=f,v=s.textContent,v===f&&v!==""&&v!==null&&(s.value=v),Fr(s)}function Fi(s,c){if(c){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=c;return}}s.textContent=c}var Ad=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pn(s,c,f){var v=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?v?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="":v?s.setProperty(c,f):typeof f!="number"||f===0||Ad.has(c)?c==="float"?s.cssFloat=f:s[c]=(""+f).trim():s[c]=f+"px"}function wt(s,c,f){if(c!=null&&typeof c!="object")throw Error(a(62));if(s=s.style,f!=null){for(var v in f)!f.hasOwnProperty(v)||c!=null&&c.hasOwnProperty(v)||(v.indexOf("--")===0?s.setProperty(v,""):v==="float"?s.cssFloat="":s[v]="");for(var A in c)v=c[A],c.hasOwnProperty(A)&&f[A]!==v&&pn(s,A,v)}else for(var D in c)c.hasOwnProperty(D)&&pn(s,D,c[D])}function Ar(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),S1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ui(s){return S1.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function An(){}var Ho=null;function Td(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ur=null,ms=null;function $s(s){var c=Qt(s);if(c&&(s=c.stateNode)){var f=s[rr]||null;e:switch(s=c.stateNode,c.type){case"input":if(wa(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Ht(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var v=f[c];if(v!==s&&v.form===s.form){var A=v[rr]||null;if(!A)throw Error(a(90));wa(v,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(c=0;c<f.length;c++)v=f[c],v.form===s.form&&Hs(v)}break e;case"textarea":fa(s,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&yt(s,!!f.multiple,c,!1)}}}var St=!1;function Wf(s,c,f){if(St)return s(c,f);St=!0;try{var v=s(c);return v}finally{if(St=!1,(Ur!==null||ms!==null)&&(j0(),Ur&&(c=Ur,s=ms,ms=Ur=null,$s(c),s)))for(c=0;c<s.length;c++)$s(s[c])}}function Dt(s,c){var f=s.stateNode;if(f===null)return null;var v=f[rr]||null;if(v===null)return null;f=v[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(s=s.type,v=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!v;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(a(231,c,typeof f));return f}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Od=!1;if(Tr)try{var Ul={};Object.defineProperty(Ul,"passive",{get:function(){Od=!0}}),window.addEventListener("test",Ul,Ul),window.removeEventListener("test",Ul,Ul)}catch{Od=!1}var qs=null,Gs=null,qc=null;function ji(){if(qc)return qc;var s,c=Gs,f=c.length,v,A="value"in qs?qs.value:qs.textContent,D=A.length;for(s=0;s<f&&c[s]===A[s];s++);var U=f-s;for(v=1;v<=U&&c[f-v]===A[D-v];v++);return qc=A.slice(s,1<v?1-v:void 0)}function gl(s){var c=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&c===13&&(s=13)):s=c,s===10&&(s=13),32<=s||s===13?s:0}function pl(){return!0}function _d(){return!1}function Na(s){function c(f,v,A,D,U){this._reactName=f,this._targetInst=A,this.type=v,this.nativeEvent=D,this.target=U,this.currentTarget=null;for(var Q in s)s.hasOwnProperty(Q)&&(f=s[Q],this[Q]=f?f(D):D[Q]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?pl:_d,this.isPropagationStopped=_d,this}return E(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=pl)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=pl)},persist:function(){},isPersistent:pl}),c}var qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ra=Na(qn),zi=E({},qn,{view:0,detail:0}),Kf=Na(zi),Gc,Dd,$o,Yc=E({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==$o&&($o&&s.type==="mousemove"?(Gc=s.screenX-$o.screenX,Dd=s.screenY-$o.screenY):Dd=Gc=0,$o=s),Gc)},movementY:function(s){return"movementY"in s?s.movementY:Dd}}),or=Na(Yc),Zf=E({},Yc,{dataTransfer:0}),Xc=Na(Zf),yl=E({},zi,{relatedTarget:0}),kd=Na(yl),Ie=E({},qn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ut=Na(Ie),La=E({},qn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Wc=Na(La),Qf=E({},qn,{data:0}),Jf=Na(Qf),C1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ha(s){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(s):(s=Pd[s])?!!c[s]:!1}function qo(){return ha}var qr=E({},zi,{key:function(s){if(s.key){var c=C1[s.key]||s.key;if(c!=="Unidentified")return c}return s.type==="keypress"?(s=gl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?A1[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qo,charCode:function(s){return s.type==="keypress"?gl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?gl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Kc=Na(qr),jl=E({},Yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fr=Na(jl),Ct=E({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qo}),T1=Na(Ct),Or=E({},qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),zl=Na(Or),Vi=E({},Yc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),O1=Na(Vi),fs=E({},qn,{newState:0,oldState:0}),Md=Na(fs),e0=[9,13,27,32],Go=Tr&&"CompositionEvent"in window,Hi=null;Tr&&"documentMode"in document&&(Hi=document.documentMode);var t0=Tr&&"TextEvent"in window&&!Hi,r0=Tr&&(!Go||Hi&&8<Hi&&11>=Hi),Vl=" ",Zc=!1;function a0(s,c){switch(s){case"keyup":return e0.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $i(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var qi=!1;function xl(s,c){switch(s){case"compositionend":return $i(c);case"keypress":return c.which!==32?null:(Zc=!0,Vl);case"textInput":return s=c.data,s===Vl&&Zc?null:s;default:return null}}function Qc(s,c){if(qi)return s==="compositionend"||!Go&&a0(s,c)?(s=ji(),qc=Gs=qs=null,qi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return r0&&c.locale!=="ko"?null:c.data;default:return null}}var Tn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Id(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c==="input"?!!Tn[s.type]:c==="textarea"}function Gn(s,c,f,v){Ur?ms?ms.push(v):ms=[v]:Ur=v,c=Y0(c,"onChange"),0<c.length&&(f=new Ra("onChange","change",null,f,v),s.push({event:f,listeners:c}))}var Yo=null,Hl=null;function _1(s){y3(s,0)}function Xo(s){var c=Ve(s);if(Hs(c))return s}function Yn(s,c){if(s==="change")return c}var n0=!1;if(Tr){var Wo;if(Tr){var $l="oninput"in document;if(!$l){var Xt=document.createElement("div");Xt.setAttribute("oninput","return;"),$l=typeof Xt.oninput=="function"}Wo=$l}else Wo=!1;n0=Wo&&(!document.documentMode||9<document.documentMode)}function Ko(){Yo&&(Yo.detachEvent("onpropertychange",G),Hl=Yo=null)}function G(s){if(s.propertyName==="value"&&Xo(Hl)){var c=[];Gn(c,Hl,s,Td(s)),Wf(_1,c)}}function i(s,c,f){s==="focusin"?(Ko(),Yo=c,Hl=f,Yo.attachEvent("onpropertychange",G)):s==="focusout"&&Ko()}function u(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Xo(Hl)}function m(s,c){if(s==="click")return Xo(c)}function y(s,c){if(s==="input"||s==="change")return Xo(c)}function b(s,c){return s===c&&(s!==0||1/s===1/c)||s!==s&&c!==c}var w=typeof Object.is=="function"?Object.is:b;function S(s,c){if(w(s,c))return!0;if(typeof s!="object"||s===null||typeof c!="object"||c===null)return!1;var f=Object.keys(s),v=Object.keys(c);if(f.length!==v.length)return!1;for(v=0;v<f.length;v++){var A=f[v];if(!it.call(c,A)||!w(s[A],c[A]))return!1}return!0}function T(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function M(s,c){var f=T(s);s=0;for(var v;f;){if(f.nodeType===3){if(v=s+f.textContent.length,s<=c&&v>=c)return{node:f,offset:c-s};s=v}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=T(f)}}function B(s,c){return s&&c?s===c?!0:s&&s.nodeType===3?!1:c&&c.nodeType===3?B(s,c.parentNode):"contains"in s?s.contains(c):s.compareDocumentPosition?!!(s.compareDocumentPosition(c)&16):!1:!1}function X(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var c=$c(s.document);c instanceof s.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)s=c.contentWindow;else break;c=$c(s.document)}return c}function Z(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c&&(c==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||c==="textarea"||s.contentEditable==="true")}var ne=Tr&&"documentMode"in document&&11>=document.documentMode,he=null,pe=null,Ae=null,Pe=!1;function rt(s,c,f){var v=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Pe||he==null||he!==$c(v)||(v=he,"selectionStart"in v&&Z(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Ae&&S(Ae,v)||(Ae=v,v=Y0(pe,"onSelect"),0<v.length&&(c=new Ra("onSelect","select",null,c,f),s.push({event:c,listeners:v}),c.target=he)))}function et(s,c){var f={};return f[s.toLowerCase()]=c.toLowerCase(),f["Webkit"+s]="webkit"+c,f["Moz"+s]="moz"+c,f}var Ze={animationend:et("Animation","AnimationEnd"),animationiteration:et("Animation","AnimationIteration"),animationstart:et("Animation","AnimationStart"),transitionrun:et("Transition","TransitionRun"),transitionstart:et("Transition","TransitionStart"),transitioncancel:et("Transition","TransitionCancel"),transitionend:et("Transition","TransitionEnd")},zt={},Pt={};Tr&&(Pt=document.createElement("div").style,"AnimationEvent"in window||(delete Ze.animationend.animation,delete Ze.animationiteration.animation,delete Ze.animationstart.animation),"TransitionEvent"in window||delete Ze.transitionend.transition);function sa(s){if(zt[s])return zt[s];if(!Ze[s])return s;var c=Ze[s],f;for(f in c)if(c.hasOwnProperty(f)&&f in Pt)return zt[s]=c[f];return s}var On=sa("animationend"),tn=sa("animationiteration"),hr=sa("animationstart"),Ba=sa("transitionrun"),yn=sa("transitionstart"),Gi=sa("transitioncancel"),ql=sa("transitionend"),s0=new Map,Rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rd.push("scrollEnd");function Ys(s,c){s0.set(s,c),mr(c,[s])}var l0=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},hs=[],Jc=0,D1=0;function i0(){for(var s=Jc,c=D1=Jc=0;c<s;){var f=hs[c];hs[c++]=null;var v=hs[c];hs[c++]=null;var A=hs[c];hs[c++]=null;var D=hs[c];if(hs[c++]=null,v!==null&&A!==null){var U=v.pending;U===null?A.next=A:(A.next=U.next,U.next=A),v.pending=A}D!==0&&QN(f,A,D)}}function o0(s,c,f,v){hs[Jc++]=s,hs[Jc++]=c,hs[Jc++]=f,hs[Jc++]=v,D1|=v,s.lanes|=v,s=s.alternate,s!==null&&(s.lanes|=v)}function k1(s,c,f,v){return o0(s,c,f,v),c0(s)}function Zo(s,c){return o0(s,null,null,c),c0(s)}function QN(s,c,f){s.lanes|=f;var v=s.alternate;v!==null&&(v.lanes|=f);for(var A=!1,D=s.return;D!==null;)D.childLanes|=f,v=D.alternate,v!==null&&(v.childLanes|=f),D.tag===22&&(s=D.stateNode,s===null||s._visibility&1||(A=!0)),s=D,D=D.return;return s.tag===3?(D=s.stateNode,A&&c!==null&&(A=31-st(f),s=D.hiddenUpdates,v=s[A],v===null?s[A]=[c]:v.push(c),c.lane=f|536870912),D):null}function c0(s){if(50<am)throw am=0,jy=null,Error(a(185));for(var c=s.return;c!==null;)s=c,c=s.return;return s.tag===3?s.stateNode:null}var eu={};function jR(s,c,f,v){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(s,c,f,v){return new jR(s,c,f,v)}function P1(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Gl(s,c){var f=s.alternate;return f===null?(f=Xn(s.tag,c,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=c,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,c=s.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function JN(s,c){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=c,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,c=f.dependencies,s.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),s}function u0(s,c,f,v,A,D){var U=0;if(v=s,typeof s=="function")P1(s)&&(U=1);else if(typeof s=="string")U=q9(s,f,le.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case V:return s=Xn(31,f,c,A),s.elementType=V,s.lanes=D,s;case P:return Qo(f.children,A,D,c);case k:U=8,A|=24;break;case I:return s=Xn(12,f,c,A|2),s.elementType=I,s.lanes=D,s;case j:return s=Xn(13,f,c,A),s.elementType=j,s.lanes=D,s;case z:return s=Xn(19,f,c,A),s.elementType=z,s.lanes=D,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:U=10;break e;case F:U=9;break e;case Y:U=11;break e;case L:U=14;break e;case q:U=16,v=null;break e}U=29,f=Error(a(130,s===null?"null":typeof s,"")),v=null}return c=Xn(U,f,c,A),c.elementType=s,c.type=v,c.lanes=D,c}function Qo(s,c,f,v){return s=Xn(7,s,v,c),s.lanes=f,s}function M1(s,c,f){return s=Xn(6,s,null,c),s.lanes=f,s}function eS(s){var c=Xn(18,null,null,0);return c.stateNode=s,c}function I1(s,c,f){return c=Xn(4,s.children!==null?s.children:[],s.key,c),c.lanes=f,c.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},c}var tS=new WeakMap;function gs(s,c){if(typeof s=="object"&&s!==null){var f=tS.get(s);return f!==void 0?f:(c={value:s,source:c,stack:tt(c)},tS.set(s,c),c)}return{value:s,source:c,stack:tt(c)}}var tu=[],ru=0,d0=null,Ld=0,ps=[],ys=0,Yi=null,bl=1,vl="";function Yl(s,c){tu[ru++]=Ld,tu[ru++]=d0,d0=s,Ld=c}function rS(s,c,f){ps[ys++]=bl,ps[ys++]=vl,ps[ys++]=Yi,Yi=s;var v=bl;s=vl;var A=32-st(v)-1;v&=~(1<<A),f+=1;var D=32-st(c)+A;if(30<D){var U=A-A%5;D=(v&(1<<U)-1).toString(32),v>>=U,A-=U,bl=1<<32-st(c)+A|f<<A|v,vl=D+s}else bl=1<<D|f<<A|v,vl=s}function R1(s){s.return!==null&&(Yl(s,1),rS(s,1,0))}function L1(s){for(;s===d0;)d0=tu[--ru],tu[ru]=null,Ld=tu[--ru],tu[ru]=null;for(;s===Yi;)Yi=ps[--ys],ps[ys]=null,vl=ps[--ys],ps[ys]=null,bl=ps[--ys],ps[ys]=null}function aS(s,c){ps[ys++]=bl,ps[ys++]=vl,ps[ys++]=Yi,bl=c.id,vl=c.overflow,Yi=s}var rn=null,jr=null,Zt=!1,Xi=null,xs=!1,B1=Error(a(519));function Wi(s){var c=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bd(gs(c,s)),B1}function nS(s){var c=s.stateNode,f=s.type,v=s.memoizedProps;switch(c[$r]=s,c[rr]=v,f){case"dialog":Yt("cancel",c),Yt("close",c);break;case"iframe":case"object":case"embed":Yt("load",c);break;case"video":case"audio":for(f=0;f<sm.length;f++)Yt(sm[f],c);break;case"source":Yt("error",c);break;case"img":case"image":case"link":Yt("error",c),Yt("load",c);break;case"details":Yt("toggle",c);break;case"input":Yt("invalid",c),Te(c,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":Yt("invalid",c);break;case"textarea":Yt("invalid",c),gn(c,v.value,v.defaultValue,v.children)}f=v.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||v.suppressHydrationWarning===!0||E3(c.textContent,f)?(v.popover!=null&&(Yt("beforetoggle",c),Yt("toggle",c)),v.onScroll!=null&&Yt("scroll",c),v.onScrollEnd!=null&&Yt("scrollend",c),v.onClick!=null&&(c.onclick=An),c=!0):c=!1,c||Wi(s,!0)}function sS(s){for(rn=s.return;rn;)switch(rn.tag){case 5:case 31:case 13:xs=!1;return;case 27:case 3:xs=!0;return;default:rn=rn.return}}function au(s){if(s!==rn)return!1;if(!Zt)return sS(s),Zt=!0,!1;var c=s.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||tx(s.type,s.memoizedProps)),f=!f),f&&jr&&Wi(s),sS(s),c===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(317));jr=D3(s)}else if(c===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(317));jr=D3(s)}else c===27?(c=jr,co(s.type)?(s=lx,lx=null,jr=s):jr=c):jr=rn?vs(s.stateNode.nextSibling):null;return!0}function Jo(){jr=rn=null,Zt=!1}function F1(){var s=Xi;return s!==null&&(Pn===null?Pn=s:Pn.push.apply(Pn,s),Xi=null),s}function Bd(s){Xi===null?Xi=[s]:Xi.push(s)}var U1=K(null),ec=null,Xl=null;function Ki(s,c,f){ge(U1,c._currentValue),c._currentValue=f}function Wl(s){s._currentValue=U1.current,ee(U1)}function j1(s,c,f){for(;s!==null;){var v=s.alternate;if((s.childLanes&c)!==c?(s.childLanes|=c,v!==null&&(v.childLanes|=c)):v!==null&&(v.childLanes&c)!==c&&(v.childLanes|=c),s===f)break;s=s.return}}function z1(s,c,f,v){var A=s.child;for(A!==null&&(A.return=s);A!==null;){var D=A.dependencies;if(D!==null){var U=A.child;D=D.firstContext;e:for(;D!==null;){var Q=D;D=A;for(var ue=0;ue<c.length;ue++)if(Q.context===c[ue]){D.lanes|=f,Q=D.alternate,Q!==null&&(Q.lanes|=f),j1(D.return,f,s),v||(U=null);break e}D=Q.next}}else if(A.tag===18){if(U=A.return,U===null)throw Error(a(341));U.lanes|=f,D=U.alternate,D!==null&&(D.lanes|=f),j1(U,f,s),U=null}else U=A.child;if(U!==null)U.return=A;else for(U=A;U!==null;){if(U===s){U=null;break}if(A=U.sibling,A!==null){A.return=U.return,U=A;break}U=U.return}A=U}}function nu(s,c,f,v){s=null;for(var A=c,D=!1;A!==null;){if(!D){if((A.flags&524288)!==0)D=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var U=A.alternate;if(U===null)throw Error(a(387));if(U=U.memoizedProps,U!==null){var Q=A.type;w(A.pendingProps.value,U.value)||(s!==null?s.push(Q):s=[Q])}}else if(A===de.current){if(U=A.alternate,U===null)throw Error(a(387));U.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(s!==null?s.push(um):s=[um])}A=A.return}s!==null&&z1(c,s,f,v),c.flags|=262144}function m0(s){for(s=s.firstContext;s!==null;){if(!w(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function tc(s){ec=s,Xl=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function an(s){return lS(ec,s)}function f0(s,c){return ec===null&&tc(s),lS(s,c)}function lS(s,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},Xl===null){if(s===null)throw Error(a(308));Xl=c,s.dependencies={lanes:0,firstContext:c},s.flags|=524288}else Xl=Xl.next=c;return f}var zR=typeof AbortController<"u"?AbortController:function(){var s=[],c=this.signal={aborted:!1,addEventListener:function(f,v){s.push(v)}};this.abort=function(){c.aborted=!0,s.forEach(function(f){return f()})}},VR=e.unstable_scheduleCallback,HR=e.unstable_NormalPriority,Sa={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function V1(){return{controller:new zR,data:new Map,refCount:0}}function Fd(s){s.refCount--,s.refCount===0&&VR(HR,function(){s.controller.abort()})}var Ud=null,H1=0,su=0,lu=null;function $R(s,c){if(Ud===null){var f=Ud=[];H1=0,su=Gy(),lu={status:"pending",value:void 0,then:function(v){f.push(v)}}}return H1++,c.then(iS,iS),c}function iS(){if(--H1===0&&Ud!==null){lu!==null&&(lu.status="fulfilled");var s=Ud;Ud=null,su=0,lu=null;for(var c=0;c<s.length;c++)(0,s[c])()}}function qR(s,c){var f=[],v={status:"pending",value:null,reason:null,then:function(A){f.push(A)}};return s.then(function(){v.status="fulfilled",v.value=c;for(var A=0;A<f.length;A++)(0,f[A])(c)},function(A){for(v.status="rejected",v.reason=A,A=0;A<f.length;A++)(0,f[A])(void 0)}),v}var oS=J.S;J.S=function(s,c){qC=mt(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&$R(s,c),oS!==null&&oS(s,c)};var rc=K(null);function $1(){var s=rc.current;return s!==null?s:_r.pooledCache}function h0(s,c){c===null?ge(rc,rc.current):ge(rc,c.pool)}function cS(){var s=$1();return s===null?null:{parent:Sa._currentValue,pool:s}}var iu=Error(a(460)),q1=Error(a(474)),g0=Error(a(542)),p0={then:function(){}};function uS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function dS(s,c,f){switch(f=s[f],f===void 0?s.push(c):f!==c&&(c.then(An,An),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,fS(s),s;default:if(typeof c.status=="string")c.then(An,An);else{if(s=_r,s!==null&&100<s.shellSuspendCounter)throw Error(a(482));s=c,s.status="pending",s.then(function(v){if(c.status==="pending"){var A=c;A.status="fulfilled",A.value=v}},function(v){if(c.status==="pending"){var A=c;A.status="rejected",A.reason=v}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,fS(s),s}throw nc=c,iu}}function ac(s){try{var c=s._init;return c(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(nc=f,iu):f}}var nc=null;function mS(){if(nc===null)throw Error(a(459));var s=nc;return nc=null,s}function fS(s){if(s===iu||s===g0)throw Error(a(483))}var ou=null,jd=0;function y0(s){var c=jd;return jd+=1,ou===null&&(ou=[]),dS(ou,s,c)}function zd(s,c){c=c.props.ref,s.ref=c!==void 0?c:null}function x0(s,c){throw c.$$typeof===C?Error(a(525)):(s=Object.prototype.toString.call(c),Error(a(31,s==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":s)))}function hS(s){function c(Se,ye){if(s){var Oe=Se.deletions;Oe===null?(Se.deletions=[ye],Se.flags|=16):Oe.push(ye)}}function f(Se,ye){if(!s)return null;for(;ye!==null;)c(Se,ye),ye=ye.sibling;return null}function v(Se){for(var ye=new Map;Se!==null;)Se.key!==null?ye.set(Se.key,Se):ye.set(Se.index,Se),Se=Se.sibling;return ye}function A(Se,ye){return Se=Gl(Se,ye),Se.index=0,Se.sibling=null,Se}function D(Se,ye,Oe){return Se.index=Oe,s?(Oe=Se.alternate,Oe!==null?(Oe=Oe.index,Oe<ye?(Se.flags|=67108866,ye):Oe):(Se.flags|=67108866,ye)):(Se.flags|=1048576,ye)}function U(Se){return s&&Se.alternate===null&&(Se.flags|=67108866),Se}function Q(Se,ye,Oe,Ge){return ye===null||ye.tag!==6?(ye=M1(Oe,Se.mode,Ge),ye.return=Se,ye):(ye=A(ye,Oe),ye.return=Se,ye)}function ue(Se,ye,Oe,Ge){var Nt=Oe.type;return Nt===P?He(Se,ye,Oe.props.children,Ge,Oe.key):ye!==null&&(ye.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===q&&ac(Nt)===ye.type)?(ye=A(ye,Oe.props),zd(ye,Oe),ye.return=Se,ye):(ye=u0(Oe.type,Oe.key,Oe.props,null,Se.mode,Ge),zd(ye,Oe),ye.return=Se,ye)}function _e(Se,ye,Oe,Ge){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Oe.containerInfo||ye.stateNode.implementation!==Oe.implementation?(ye=I1(Oe,Se.mode,Ge),ye.return=Se,ye):(ye=A(ye,Oe.children||[]),ye.return=Se,ye)}function He(Se,ye,Oe,Ge,Nt){return ye===null||ye.tag!==7?(ye=Qo(Oe,Se.mode,Ge,Nt),ye.return=Se,ye):(ye=A(ye,Oe),ye.return=Se,ye)}function Ye(Se,ye,Oe){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=M1(""+ye,Se.mode,Oe),ye.return=Se,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case O:return Oe=u0(ye.type,ye.key,ye.props,null,Se.mode,Oe),zd(Oe,ye),Oe.return=Se,Oe;case _:return ye=I1(ye,Se.mode,Oe),ye.return=Se,ye;case q:return ye=ac(ye),Ye(Se,ye,Oe)}if(ae(ye)||$(ye))return ye=Qo(ye,Se.mode,Oe,null),ye.return=Se,ye;if(typeof ye.then=="function")return Ye(Se,y0(ye),Oe);if(ye.$$typeof===R)return Ye(Se,f0(Se,ye),Oe);x0(Se,ye)}return null}function ke(Se,ye,Oe,Ge){var Nt=ye!==null?ye.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Nt!==null?null:Q(Se,ye,""+Oe,Ge);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case O:return Oe.key===Nt?ue(Se,ye,Oe,Ge):null;case _:return Oe.key===Nt?_e(Se,ye,Oe,Ge):null;case q:return Oe=ac(Oe),ke(Se,ye,Oe,Ge)}if(ae(Oe)||$(Oe))return Nt!==null?null:He(Se,ye,Oe,Ge,null);if(typeof Oe.then=="function")return ke(Se,ye,y0(Oe),Ge);if(Oe.$$typeof===R)return ke(Se,ye,f0(Se,Oe),Ge);x0(Se,Oe)}return null}function Be(Se,ye,Oe,Ge,Nt){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Se=Se.get(Oe)||null,Q(ye,Se,""+Ge,Nt);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case O:return Se=Se.get(Ge.key===null?Oe:Ge.key)||null,ue(ye,Se,Ge,Nt);case _:return Se=Se.get(Ge.key===null?Oe:Ge.key)||null,_e(ye,Se,Ge,Nt);case q:return Ge=ac(Ge),Be(Se,ye,Oe,Ge,Nt)}if(ae(Ge)||$(Ge))return Se=Se.get(Oe)||null,He(ye,Se,Ge,Nt,null);if(typeof Ge.then=="function")return Be(Se,ye,Oe,y0(Ge),Nt);if(Ge.$$typeof===R)return Be(Se,ye,Oe,f0(ye,Ge),Nt);x0(ye,Ge)}return null}function ht(Se,ye,Oe,Ge){for(var Nt=null,sr=null,vt=ye,jt=ye=0,Kt=null;vt!==null&&jt<Oe.length;jt++){vt.index>jt?(Kt=vt,vt=null):Kt=vt.sibling;var lr=ke(Se,vt,Oe[jt],Ge);if(lr===null){vt===null&&(vt=Kt);break}s&&vt&&lr.alternate===null&&c(Se,vt),ye=D(lr,ye,jt),sr===null?Nt=lr:sr.sibling=lr,sr=lr,vt=Kt}if(jt===Oe.length)return f(Se,vt),Zt&&Yl(Se,jt),Nt;if(vt===null){for(;jt<Oe.length;jt++)vt=Ye(Se,Oe[jt],Ge),vt!==null&&(ye=D(vt,ye,jt),sr===null?Nt=vt:sr.sibling=vt,sr=vt);return Zt&&Yl(Se,jt),Nt}for(vt=v(vt);jt<Oe.length;jt++)Kt=Be(vt,Se,jt,Oe[jt],Ge),Kt!==null&&(s&&Kt.alternate!==null&&vt.delete(Kt.key===null?jt:Kt.key),ye=D(Kt,ye,jt),sr===null?Nt=Kt:sr.sibling=Kt,sr=Kt);return s&&vt.forEach(function(go){return c(Se,go)}),Zt&&Yl(Se,jt),Nt}function Ot(Se,ye,Oe,Ge){if(Oe==null)throw Error(a(151));for(var Nt=null,sr=null,vt=ye,jt=ye=0,Kt=null,lr=Oe.next();vt!==null&&!lr.done;jt++,lr=Oe.next()){vt.index>jt?(Kt=vt,vt=null):Kt=vt.sibling;var go=ke(Se,vt,lr.value,Ge);if(go===null){vt===null&&(vt=Kt);break}s&&vt&&go.alternate===null&&c(Se,vt),ye=D(go,ye,jt),sr===null?Nt=go:sr.sibling=go,sr=go,vt=Kt}if(lr.done)return f(Se,vt),Zt&&Yl(Se,jt),Nt;if(vt===null){for(;!lr.done;jt++,lr=Oe.next())lr=Ye(Se,lr.value,Ge),lr!==null&&(ye=D(lr,ye,jt),sr===null?Nt=lr:sr.sibling=lr,sr=lr);return Zt&&Yl(Se,jt),Nt}for(vt=v(vt);!lr.done;jt++,lr=Oe.next())lr=Be(vt,Se,jt,lr.value,Ge),lr!==null&&(s&&lr.alternate!==null&&vt.delete(lr.key===null?jt:lr.key),ye=D(lr,ye,jt),sr===null?Nt=lr:sr.sibling=lr,sr=lr);return s&&vt.forEach(function(rL){return c(Se,rL)}),Zt&&Yl(Se,jt),Nt}function Nr(Se,ye,Oe,Ge){if(typeof Oe=="object"&&Oe!==null&&Oe.type===P&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case O:e:{for(var Nt=Oe.key;ye!==null;){if(ye.key===Nt){if(Nt=Oe.type,Nt===P){if(ye.tag===7){f(Se,ye.sibling),Ge=A(ye,Oe.props.children),Ge.return=Se,Se=Ge;break e}}else if(ye.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===q&&ac(Nt)===ye.type){f(Se,ye.sibling),Ge=A(ye,Oe.props),zd(Ge,Oe),Ge.return=Se,Se=Ge;break e}f(Se,ye);break}else c(Se,ye);ye=ye.sibling}Oe.type===P?(Ge=Qo(Oe.props.children,Se.mode,Ge,Oe.key),Ge.return=Se,Se=Ge):(Ge=u0(Oe.type,Oe.key,Oe.props,null,Se.mode,Ge),zd(Ge,Oe),Ge.return=Se,Se=Ge)}return U(Se);case _:e:{for(Nt=Oe.key;ye!==null;){if(ye.key===Nt)if(ye.tag===4&&ye.stateNode.containerInfo===Oe.containerInfo&&ye.stateNode.implementation===Oe.implementation){f(Se,ye.sibling),Ge=A(ye,Oe.children||[]),Ge.return=Se,Se=Ge;break e}else{f(Se,ye);break}else c(Se,ye);ye=ye.sibling}Ge=I1(Oe,Se.mode,Ge),Ge.return=Se,Se=Ge}return U(Se);case q:return Oe=ac(Oe),Nr(Se,ye,Oe,Ge)}if(ae(Oe))return ht(Se,ye,Oe,Ge);if($(Oe)){if(Nt=$(Oe),typeof Nt!="function")throw Error(a(150));return Oe=Nt.call(Oe),Ot(Se,ye,Oe,Ge)}if(typeof Oe.then=="function")return Nr(Se,ye,y0(Oe),Ge);if(Oe.$$typeof===R)return Nr(Se,ye,f0(Se,Oe),Ge);x0(Se,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint"?(Oe=""+Oe,ye!==null&&ye.tag===6?(f(Se,ye.sibling),Ge=A(ye,Oe),Ge.return=Se,Se=Ge):(f(Se,ye),Ge=M1(Oe,Se.mode,Ge),Ge.return=Se,Se=Ge),U(Se)):f(Se,ye)}return function(Se,ye,Oe,Ge){try{jd=0;var Nt=Nr(Se,ye,Oe,Ge);return ou=null,Nt}catch(vt){if(vt===iu||vt===g0)throw vt;var sr=Xn(29,vt,null,Se.mode);return sr.lanes=Ge,sr.return=Se,sr}finally{}}}var sc=hS(!0),gS=hS(!1),Zi=!1;function G1(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Y1(s,c){s=s.updateQueue,c.updateQueue===s&&(c.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Qi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ji(s,c,f){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,(cr&2)!==0){var A=v.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),v.pending=c,c=c0(s),QN(s,null,f),c}return o0(s,v,c,f),c0(s)}function Vd(s,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var v=c.lanes;v&=s.pendingLanes,f|=v,c.lanes=f,Sn(s,f)}}function X1(s,c){var f=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,f===v)){var A=null,D=null;if(f=f.firstBaseUpdate,f!==null){do{var U={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};D===null?A=D=U:D=D.next=U,f=f.next}while(f!==null);D===null?A=D=c:D=D.next=c}else A=D=c;f={baseState:v.baseState,firstBaseUpdate:A,lastBaseUpdate:D,shared:v.shared,callbacks:v.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=c:s.next=c,f.lastBaseUpdate=c}var W1=!1;function Hd(){if(W1){var s=lu;if(s!==null)throw s}}function $d(s,c,f,v){W1=!1;var A=s.updateQueue;Zi=!1;var D=A.firstBaseUpdate,U=A.lastBaseUpdate,Q=A.shared.pending;if(Q!==null){A.shared.pending=null;var ue=Q,_e=ue.next;ue.next=null,U===null?D=_e:U.next=_e,U=ue;var He=s.alternate;He!==null&&(He=He.updateQueue,Q=He.lastBaseUpdate,Q!==U&&(Q===null?He.firstBaseUpdate=_e:Q.next=_e,He.lastBaseUpdate=ue))}if(D!==null){var Ye=A.baseState;U=0,He=_e=ue=null,Q=D;do{var ke=Q.lane&-536870913,Be=ke!==Q.lane;if(Be?(Wt&ke)===ke:(v&ke)===ke){ke!==0&&ke===su&&(W1=!0),He!==null&&(He=He.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var ht=s,Ot=Q;ke=c;var Nr=f;switch(Ot.tag){case 1:if(ht=Ot.payload,typeof ht=="function"){Ye=ht.call(Nr,Ye,ke);break e}Ye=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=Ot.payload,ke=typeof ht=="function"?ht.call(Nr,Ye,ke):ht,ke==null)break e;Ye=E({},Ye,ke);break e;case 2:Zi=!0}}ke=Q.callback,ke!==null&&(s.flags|=64,Be&&(s.flags|=8192),Be=A.callbacks,Be===null?A.callbacks=[ke]:Be.push(ke))}else Be={lane:ke,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},He===null?(_e=He=Be,ue=Ye):He=He.next=Be,U|=ke;if(Q=Q.next,Q===null){if(Q=A.shared.pending,Q===null)break;Be=Q,Q=Be.next,Be.next=null,A.lastBaseUpdate=Be,A.shared.pending=null}}while(!0);He===null&&(ue=Ye),A.baseState=ue,A.firstBaseUpdate=_e,A.lastBaseUpdate=He,D===null&&(A.shared.lanes=0),no|=U,s.lanes=U,s.memoizedState=Ye}}function pS(s,c){if(typeof s!="function")throw Error(a(191,s));s.call(c)}function yS(s,c){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)pS(f[s],c)}var cu=K(null),b0=K(0);function xS(s,c){s=ni,ge(b0,s),ge(cu,c),ni=s|c.baseLanes}function K1(){ge(b0,ni),ge(cu,cu.current)}function Z1(){ni=b0.current,ee(cu),ee(b0)}var Wn=K(null),bs=null;function eo(s){var c=s.alternate;ge(ga,ga.current&1),ge(Wn,s),bs===null&&(c===null||cu.current!==null||c.memoizedState!==null)&&(bs=s)}function Q1(s){ge(ga,ga.current),ge(Wn,s),bs===null&&(bs=s)}function bS(s){s.tag===22?(ge(ga,ga.current),ge(Wn,s),bs===null&&(bs=s)):to()}function to(){ge(ga,ga.current),ge(Wn,Wn.current)}function Kn(s){ee(Wn),bs===s&&(bs=null),ee(ga)}var ga=K(0);function v0(s){for(var c=s;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||nx(f)||sx(f)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Kl=0,Bt=null,Er=null,Ca=null,E0=!1,uu=!1,lc=!1,w0=0,qd=0,du=null,GR=0;function la(){throw Error(a(321))}function J1(s,c){if(c===null)return!1;for(var f=0;f<c.length&&f<s.length;f++)if(!w(s[f],c[f]))return!1;return!0}function ey(s,c,f,v,A,D){return Kl=D,Bt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,J.H=s===null||s.memoizedState===null?rC:gy,lc=!1,D=f(v,A),lc=!1,uu&&(D=ES(c,f,v,A)),vS(s),D}function vS(s){J.H=Xd;var c=Er!==null&&Er.next!==null;if(Kl=0,Ca=Er=Bt=null,E0=!1,qd=0,du=null,c)throw Error(a(300));s===null||Aa||(s=s.dependencies,s!==null&&m0(s)&&(Aa=!0))}function ES(s,c,f,v){Bt=s;var A=0;do{if(uu&&(du=null),qd=0,uu=!1,25<=A)throw Error(a(301));if(A+=1,Ca=Er=null,s.updateQueue!=null){var D=s.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}J.H=aC,D=c(f,v)}while(uu);return D}function YR(){var s=J.H,c=s.useState()[0];return c=typeof c.then=="function"?Gd(c):c,s=s.useState()[0],(Er!==null?Er.memoizedState:null)!==s&&(Bt.flags|=1024),c}function ty(){var s=w0!==0;return w0=0,s}function ry(s,c,f){c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~f}function ay(s){if(E0){for(s=s.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}E0=!1}Kl=0,Ca=Er=Bt=null,uu=!1,qd=w0=0,du=null}function xn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ca===null?Bt.memoizedState=Ca=s:Ca=Ca.next=s,Ca}function pa(){if(Er===null){var s=Bt.alternate;s=s!==null?s.memoizedState:null}else s=Er.next;var c=Ca===null?Bt.memoizedState:Ca.next;if(c!==null)Ca=c,Er=s;else{if(s===null)throw Bt.alternate===null?Error(a(467)):Error(a(310));Er=s,s={memoizedState:Er.memoizedState,baseState:Er.baseState,baseQueue:Er.baseQueue,queue:Er.queue,next:null},Ca===null?Bt.memoizedState=Ca=s:Ca=Ca.next=s}return Ca}function N0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gd(s){var c=qd;return qd+=1,du===null&&(du=[]),s=dS(du,s,c),c=Bt,(Ca===null?c.memoizedState:Ca.next)===null&&(c=c.alternate,J.H=c===null||c.memoizedState===null?rC:gy),s}function S0(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Gd(s);if(s.$$typeof===R)return an(s)}throw Error(a(438,String(s)))}function ny(s){var c=null,f=Bt.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var v=Bt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(c={data:v.data.map(function(A){return A.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=N0(),Bt.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(s),v=0;v<s;v++)f[v]=W;return c.index++,f}function Zl(s,c){return typeof c=="function"?c(s):c}function C0(s){var c=pa();return sy(c,Er,s)}function sy(s,c,f){var v=s.queue;if(v===null)throw Error(a(311));v.lastRenderedReducer=f;var A=s.baseQueue,D=v.pending;if(D!==null){if(A!==null){var U=A.next;A.next=D.next,D.next=U}c.baseQueue=A=D,v.pending=null}if(D=s.baseState,A===null)s.memoizedState=D;else{c=A.next;var Q=U=null,ue=null,_e=c,He=!1;do{var Ye=_e.lane&-536870913;if(Ye!==_e.lane?(Wt&Ye)===Ye:(Kl&Ye)===Ye){var ke=_e.revertLane;if(ke===0)ue!==null&&(ue=ue.next={lane:0,revertLane:0,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),Ye===su&&(He=!0);else if((Kl&ke)===ke){_e=_e.next,ke===su&&(He=!0);continue}else Ye={lane:0,revertLane:_e.revertLane,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},ue===null?(Q=ue=Ye,U=D):ue=ue.next=Ye,Bt.lanes|=ke,no|=ke;Ye=_e.action,lc&&f(D,Ye),D=_e.hasEagerState?_e.eagerState:f(D,Ye)}else ke={lane:Ye,revertLane:_e.revertLane,gesture:_e.gesture,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},ue===null?(Q=ue=ke,U=D):ue=ue.next=ke,Bt.lanes|=Ye,no|=Ye;_e=_e.next}while(_e!==null&&_e!==c);if(ue===null?U=D:ue.next=Q,!w(D,s.memoizedState)&&(Aa=!0,He&&(f=lu,f!==null)))throw f;s.memoizedState=D,s.baseState=U,s.baseQueue=ue,v.lastRenderedState=D}return A===null&&(v.lanes=0),[s.memoizedState,v.dispatch]}function ly(s){var c=pa(),f=c.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=s;var v=f.dispatch,A=f.pending,D=c.memoizedState;if(A!==null){f.pending=null;var U=A=A.next;do D=s(D,U.action),U=U.next;while(U!==A);w(D,c.memoizedState)||(Aa=!0),c.memoizedState=D,c.baseQueue===null&&(c.baseState=D),f.lastRenderedState=D}return[D,v]}function wS(s,c,f){var v=Bt,A=pa(),D=Zt;if(D){if(f===void 0)throw Error(a(407));f=f()}else f=c();var U=!w((Er||A).memoizedState,f);if(U&&(A.memoizedState=f,Aa=!0),A=A.queue,cy(CS.bind(null,v,A,s),[s]),A.getSnapshot!==c||U||Ca!==null&&Ca.memoizedState.tag&1){if(v.flags|=2048,mu(9,{destroy:void 0},SS.bind(null,v,A,f,c),null),_r===null)throw Error(a(349));D||(Kl&127)!==0||NS(v,c,f)}return f}function NS(s,c,f){s.flags|=16384,s={getSnapshot:c,value:f},c=Bt.updateQueue,c===null?(c=N0(),Bt.updateQueue=c,c.stores=[s]):(f=c.stores,f===null?c.stores=[s]:f.push(s))}function SS(s,c,f,v){c.value=f,c.getSnapshot=v,AS(c)&&TS(s)}function CS(s,c,f){return f(function(){AS(c)&&TS(s)})}function AS(s){var c=s.getSnapshot;s=s.value;try{var f=c();return!w(s,f)}catch{return!0}}function TS(s){var c=Zo(s,2);c!==null&&Mn(c,s,2)}function iy(s){var c=xn();if(typeof s=="function"){var f=s;if(s=f(),lc){Qe(!0);try{f()}finally{Qe(!1)}}}return c.memoizedState=c.baseState=s,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zl,lastRenderedState:s},c}function OS(s,c,f,v){return s.baseState=f,sy(s,Er,typeof v=="function"?v:Zl)}function XR(s,c,f,v,A){if(O0(s))throw Error(a(485));if(s=c.action,s!==null){var D={payload:A,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){D.listeners.push(U)}};J.T!==null?f(!0):D.isTransition=!1,v(D),f=c.pending,f===null?(D.next=c.pending=D,_S(c,D)):(D.next=f.next,c.pending=f.next=D)}}function _S(s,c){var f=c.action,v=c.payload,A=s.state;if(c.isTransition){var D=J.T,U={};J.T=U;try{var Q=f(A,v),ue=J.S;ue!==null&&ue(U,Q),DS(s,c,Q)}catch(_e){oy(s,c,_e)}finally{D!==null&&U.types!==null&&(D.types=U.types),J.T=D}}else try{D=f(A,v),DS(s,c,D)}catch(_e){oy(s,c,_e)}}function DS(s,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(v){kS(s,c,v)},function(v){return oy(s,c,v)}):kS(s,c,f)}function kS(s,c,f){c.status="fulfilled",c.value=f,PS(c),s.state=f,c=s.pending,c!==null&&(f=c.next,f===c?s.pending=null:(f=f.next,c.next=f,_S(s,f)))}function oy(s,c,f){var v=s.pending;if(s.pending=null,v!==null){v=v.next;do c.status="rejected",c.reason=f,PS(c),c=c.next;while(c!==v)}s.action=null}function PS(s){s=s.listeners;for(var c=0;c<s.length;c++)(0,s[c])()}function MS(s,c){return c}function IS(s,c){if(Zt){var f=_r.formState;if(f!==null){e:{var v=Bt;if(Zt){if(jr){t:{for(var A=jr,D=xs;A.nodeType!==8;){if(!D){A=null;break t}if(A=vs(A.nextSibling),A===null){A=null;break t}}D=A.data,A=D==="F!"||D==="F"?A:null}if(A){jr=vs(A.nextSibling),v=A.data==="F!";break e}}Wi(v)}v=!1}v&&(c=f[0])}}return f=xn(),f.memoizedState=f.baseState=c,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:MS,lastRenderedState:c},f.queue=v,f=JS.bind(null,Bt,v),v.dispatch=f,v=iy(!1),D=hy.bind(null,Bt,!1,v.queue),v=xn(),A={state:c,dispatch:null,action:s,pending:null},v.queue=A,f=XR.bind(null,Bt,A,D,f),A.dispatch=f,v.memoizedState=s,[c,f,!1]}function RS(s){var c=pa();return LS(c,Er,s)}function LS(s,c,f){if(c=sy(s,c,MS)[0],s=C0(Zl)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var v=Gd(c)}catch(U){throw U===iu?g0:U}else v=c;c=pa();var A=c.queue,D=A.dispatch;return f!==c.memoizedState&&(Bt.flags|=2048,mu(9,{destroy:void 0},WR.bind(null,A,f),null)),[v,D,s]}function WR(s,c){s.action=c}function BS(s){var c=pa(),f=Er;if(f!==null)return LS(c,f,s);pa(),c=c.memoizedState,f=pa();var v=f.queue.dispatch;return f.memoizedState=s,[c,v,!1]}function mu(s,c,f,v){return s={tag:s,create:f,deps:v,inst:c,next:null},c=Bt.updateQueue,c===null&&(c=N0(),Bt.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=s.next=s:(v=f.next,f.next=s,s.next=v,c.lastEffect=s),s}function FS(){return pa().memoizedState}function A0(s,c,f,v){var A=xn();Bt.flags|=s,A.memoizedState=mu(1|c,{destroy:void 0},f,v===void 0?null:v)}function T0(s,c,f,v){var A=pa();v=v===void 0?null:v;var D=A.memoizedState.inst;Er!==null&&v!==null&&J1(v,Er.memoizedState.deps)?A.memoizedState=mu(c,D,f,v):(Bt.flags|=s,A.memoizedState=mu(1|c,D,f,v))}function US(s,c){A0(8390656,8,s,c)}function cy(s,c){T0(2048,8,s,c)}function KR(s){Bt.flags|=4;var c=Bt.updateQueue;if(c===null)c=N0(),Bt.updateQueue=c,c.events=[s];else{var f=c.events;f===null?c.events=[s]:f.push(s)}}function jS(s){var c=pa().memoizedState;return KR({ref:c,nextImpl:s}),function(){if((cr&2)!==0)throw Error(a(440));return c.impl.apply(void 0,arguments)}}function zS(s,c){return T0(4,2,s,c)}function VS(s,c){return T0(4,4,s,c)}function HS(s,c){if(typeof c=="function"){s=s();var f=c(s);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return s=s(),c.current=s,function(){c.current=null}}function $S(s,c,f){f=f!=null?f.concat([s]):null,T0(4,4,HS.bind(null,c,s),f)}function uy(){}function qS(s,c){var f=pa();c=c===void 0?null:c;var v=f.memoizedState;return c!==null&&J1(c,v[1])?v[0]:(f.memoizedState=[s,c],s)}function GS(s,c){var f=pa();c=c===void 0?null:c;var v=f.memoizedState;if(c!==null&&J1(c,v[1]))return v[0];if(v=s(),lc){Qe(!0);try{s()}finally{Qe(!1)}}return f.memoizedState=[v,c],v}function dy(s,c,f){return f===void 0||(Kl&1073741824)!==0&&(Wt&261930)===0?s.memoizedState=c:(s.memoizedState=f,s=YC(),Bt.lanes|=s,no|=s,f)}function YS(s,c,f,v){return w(f,c)?f:cu.current!==null?(s=dy(s,f,v),w(s,c)||(Aa=!0),s):(Kl&42)===0||(Kl&1073741824)!==0&&(Wt&261930)===0?(Aa=!0,s.memoizedState=f):(s=YC(),Bt.lanes|=s,no|=s,c)}function XS(s,c,f,v,A){var D=se.p;se.p=D!==0&&8>D?D:8;var U=J.T,Q={};J.T=Q,hy(s,!1,c,f);try{var ue=A(),_e=J.S;if(_e!==null&&_e(Q,ue),ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var He=qR(ue,v);Yd(s,c,He,Jn(s))}else Yd(s,c,v,Jn(s))}catch(Ye){Yd(s,c,{then:function(){},status:"rejected",reason:Ye},Jn())}finally{se.p=D,U!==null&&Q.types!==null&&(U.types=Q.types),J.T=U}}function ZR(){}function my(s,c,f,v){if(s.tag!==5)throw Error(a(476));var A=WS(s).queue;XS(s,A,c,Ee,f===null?ZR:function(){return KS(s),f(v)})}function WS(s){var c=s.memoizedState;if(c!==null)return c;c={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zl,lastRenderedState:Ee},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zl,lastRenderedState:f},next:null},s.memoizedState=c,s=s.alternate,s!==null&&(s.memoizedState=c),c}function KS(s){var c=WS(s);c.next===null&&(c=s.alternate.memoizedState),Yd(s,c.next.queue,{},Jn())}function fy(){return an(um)}function ZS(){return pa().memoizedState}function QS(){return pa().memoizedState}function QR(s){for(var c=s.return;c!==null;){switch(c.tag){case 24:case 3:var f=Jn();s=Qi(f);var v=Ji(c,s,f);v!==null&&(Mn(v,c,f),Vd(v,c,f)),c={cache:V1()},s.payload=c;return}c=c.return}}function JR(s,c,f){var v=Jn();f={lane:v,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},O0(s)?eC(c,f):(f=k1(s,c,f,v),f!==null&&(Mn(f,s,v),tC(f,c,v)))}function JS(s,c,f){var v=Jn();Yd(s,c,f,v)}function Yd(s,c,f,v){var A={lane:v,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(O0(s))eC(c,A);else{var D=s.alternate;if(s.lanes===0&&(D===null||D.lanes===0)&&(D=c.lastRenderedReducer,D!==null))try{var U=c.lastRenderedState,Q=D(U,f);if(A.hasEagerState=!0,A.eagerState=Q,w(Q,U))return o0(s,c,A,0),_r===null&&i0(),!1}catch{}finally{}if(f=k1(s,c,A,v),f!==null)return Mn(f,s,v),tC(f,c,v),!0}return!1}function hy(s,c,f,v){if(v={lane:2,revertLane:Gy(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},O0(s)){if(c)throw Error(a(479))}else c=k1(s,f,v,2),c!==null&&Mn(c,s,2)}function O0(s){var c=s.alternate;return s===Bt||c!==null&&c===Bt}function eC(s,c){uu=E0=!0;var f=s.pending;f===null?c.next=c:(c.next=f.next,f.next=c),s.pending=c}function tC(s,c,f){if((f&4194048)!==0){var v=c.lanes;v&=s.pendingLanes,f|=v,c.lanes=f,Sn(s,f)}}var Xd={readContext:an,use:S0,useCallback:la,useContext:la,useEffect:la,useImperativeHandle:la,useLayoutEffect:la,useInsertionEffect:la,useMemo:la,useReducer:la,useRef:la,useState:la,useDebugValue:la,useDeferredValue:la,useTransition:la,useSyncExternalStore:la,useId:la,useHostTransitionStatus:la,useFormState:la,useActionState:la,useOptimistic:la,useMemoCache:la,useCacheRefresh:la};Xd.useEffectEvent=la;var rC={readContext:an,use:S0,useCallback:function(s,c){return xn().memoizedState=[s,c===void 0?null:c],s},useContext:an,useEffect:US,useImperativeHandle:function(s,c,f){f=f!=null?f.concat([s]):null,A0(4194308,4,HS.bind(null,c,s),f)},useLayoutEffect:function(s,c){return A0(4194308,4,s,c)},useInsertionEffect:function(s,c){A0(4,2,s,c)},useMemo:function(s,c){var f=xn();c=c===void 0?null:c;var v=s();if(lc){Qe(!0);try{s()}finally{Qe(!1)}}return f.memoizedState=[v,c],v},useReducer:function(s,c,f){var v=xn();if(f!==void 0){var A=f(c);if(lc){Qe(!0);try{f(c)}finally{Qe(!1)}}}else A=c;return v.memoizedState=v.baseState=A,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:A},v.queue=s,s=s.dispatch=JR.bind(null,Bt,s),[v.memoizedState,s]},useRef:function(s){var c=xn();return s={current:s},c.memoizedState=s},useState:function(s){s=iy(s);var c=s.queue,f=JS.bind(null,Bt,c);return c.dispatch=f,[s.memoizedState,f]},useDebugValue:uy,useDeferredValue:function(s,c){var f=xn();return dy(f,s,c)},useTransition:function(){var s=iy(!1);return s=XS.bind(null,Bt,s.queue,!0,!1),xn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,c,f){var v=Bt,A=xn();if(Zt){if(f===void 0)throw Error(a(407));f=f()}else{if(f=c(),_r===null)throw Error(a(349));(Wt&127)!==0||NS(v,c,f)}A.memoizedState=f;var D={value:f,getSnapshot:c};return A.queue=D,US(CS.bind(null,v,D,s),[s]),v.flags|=2048,mu(9,{destroy:void 0},SS.bind(null,v,D,f,c),null),f},useId:function(){var s=xn(),c=_r.identifierPrefix;if(Zt){var f=vl,v=bl;f=(v&~(1<<32-st(v)-1)).toString(32)+f,c="_"+c+"R_"+f,f=w0++,0<f&&(c+="H"+f.toString(32)),c+="_"}else f=GR++,c="_"+c+"r_"+f.toString(32)+"_";return s.memoizedState=c},useHostTransitionStatus:fy,useFormState:IS,useActionState:IS,useOptimistic:function(s){var c=xn();c.memoizedState=c.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=hy.bind(null,Bt,!0,f),f.dispatch=c,[s,c]},useMemoCache:ny,useCacheRefresh:function(){return xn().memoizedState=QR.bind(null,Bt)},useEffectEvent:function(s){var c=xn(),f={impl:s};return c.memoizedState=f,function(){if((cr&2)!==0)throw Error(a(440));return f.impl.apply(void 0,arguments)}}},gy={readContext:an,use:S0,useCallback:qS,useContext:an,useEffect:cy,useImperativeHandle:$S,useInsertionEffect:zS,useLayoutEffect:VS,useMemo:GS,useReducer:C0,useRef:FS,useState:function(){return C0(Zl)},useDebugValue:uy,useDeferredValue:function(s,c){var f=pa();return YS(f,Er.memoizedState,s,c)},useTransition:function(){var s=C0(Zl)[0],c=pa().memoizedState;return[typeof s=="boolean"?s:Gd(s),c]},useSyncExternalStore:wS,useId:ZS,useHostTransitionStatus:fy,useFormState:RS,useActionState:RS,useOptimistic:function(s,c){var f=pa();return OS(f,Er,s,c)},useMemoCache:ny,useCacheRefresh:QS};gy.useEffectEvent=jS;var aC={readContext:an,use:S0,useCallback:qS,useContext:an,useEffect:cy,useImperativeHandle:$S,useInsertionEffect:zS,useLayoutEffect:VS,useMemo:GS,useReducer:ly,useRef:FS,useState:function(){return ly(Zl)},useDebugValue:uy,useDeferredValue:function(s,c){var f=pa();return Er===null?dy(f,s,c):YS(f,Er.memoizedState,s,c)},useTransition:function(){var s=ly(Zl)[0],c=pa().memoizedState;return[typeof s=="boolean"?s:Gd(s),c]},useSyncExternalStore:wS,useId:ZS,useHostTransitionStatus:fy,useFormState:BS,useActionState:BS,useOptimistic:function(s,c){var f=pa();return Er!==null?OS(f,Er,s,c):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:ny,useCacheRefresh:QS};aC.useEffectEvent=jS;function py(s,c,f,v){c=s.memoizedState,f=f(v,c),f=f==null?c:E({},c,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var yy={enqueueSetState:function(s,c,f){s=s._reactInternals;var v=Jn(),A=Qi(v);A.payload=c,f!=null&&(A.callback=f),c=Ji(s,A,v),c!==null&&(Mn(c,s,v),Vd(c,s,v))},enqueueReplaceState:function(s,c,f){s=s._reactInternals;var v=Jn(),A=Qi(v);A.tag=1,A.payload=c,f!=null&&(A.callback=f),c=Ji(s,A,v),c!==null&&(Mn(c,s,v),Vd(c,s,v))},enqueueForceUpdate:function(s,c){s=s._reactInternals;var f=Jn(),v=Qi(f);v.tag=2,c!=null&&(v.callback=c),c=Ji(s,v,f),c!==null&&(Mn(c,s,f),Vd(c,s,f))}};function nC(s,c,f,v,A,D,U){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,D,U):c.prototype&&c.prototype.isPureReactComponent?!S(f,v)||!S(A,D):!0}function sC(s,c,f,v){s=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,v),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,v),c.state!==s&&yy.enqueueReplaceState(c,c.state,null)}function ic(s,c){var f=c;if("ref"in c){f={};for(var v in c)v!=="ref"&&(f[v]=c[v])}if(s=s.defaultProps){f===c&&(f=E({},f));for(var A in s)f[A]===void 0&&(f[A]=s[A])}return f}function lC(s){l0(s)}function iC(s){console.error(s)}function oC(s){l0(s)}function _0(s,c){try{var f=s.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(v){setTimeout(function(){throw v})}}function cC(s,c,f){try{var v=s.onCaughtError;v(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function xy(s,c,f){return f=Qi(f),f.tag=3,f.payload={element:null},f.callback=function(){_0(s,c)},f}function uC(s){return s=Qi(s),s.tag=3,s}function dC(s,c,f,v){var A=f.type.getDerivedStateFromError;if(typeof A=="function"){var D=v.value;s.payload=function(){return A(D)},s.callback=function(){cC(c,f,v)}}var U=f.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(s.callback=function(){cC(c,f,v),typeof A!="function"&&(so===null?so=new Set([this]):so.add(this));var Q=v.stack;this.componentDidCatch(v.value,{componentStack:Q!==null?Q:""})})}function e9(s,c,f,v,A){if(f.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(c=f.alternate,c!==null&&nu(c,f,A,!0),f=Wn.current,f!==null){switch(f.tag){case 31:case 13:return bs===null?z0():f.alternate===null&&ia===0&&(ia=3),f.flags&=-257,f.flags|=65536,f.lanes=A,v===p0?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([v]):c.add(v),Hy(s,v,A)),!1;case 22:return f.flags|=65536,v===p0?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([v])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([v]):f.add(v)),Hy(s,v,A)),!1}throw Error(a(435,f.tag))}return Hy(s,v,A),z0(),!1}if(Zt)return c=Wn.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=A,v!==B1&&(s=Error(a(422),{cause:v}),Bd(gs(s,f)))):(v!==B1&&(c=Error(a(423),{cause:v}),Bd(gs(c,f))),s=s.current.alternate,s.flags|=65536,A&=-A,s.lanes|=A,v=gs(v,f),A=xy(s.stateNode,v,A),X1(s,A),ia!==4&&(ia=2)),!1;var D=Error(a(520),{cause:v});if(D=gs(D,f),rm===null?rm=[D]:rm.push(D),ia!==4&&(ia=2),c===null)return!0;v=gs(v,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,s=A&-A,f.lanes|=s,s=xy(f.stateNode,v,s),X1(f,s),!1;case 1:if(c=f.type,D=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(so===null||!so.has(D))))return f.flags|=65536,A&=-A,f.lanes|=A,A=uC(A),dC(A,s,f,v),X1(f,A),!1}f=f.return}while(f!==null);return!1}var by=Error(a(461)),Aa=!1;function nn(s,c,f,v){c.child=s===null?gS(c,null,f,v):sc(c,s.child,f,v)}function mC(s,c,f,v,A){f=f.render;var D=c.ref;if("ref"in v){var U={};for(var Q in v)Q!=="ref"&&(U[Q]=v[Q])}else U=v;return tc(c),v=ey(s,c,f,U,D,A),Q=ty(),s!==null&&!Aa?(ry(s,c,A),Ql(s,c,A)):(Zt&&Q&&R1(c),c.flags|=1,nn(s,c,v,A),c.child)}function fC(s,c,f,v,A){if(s===null){var D=f.type;return typeof D=="function"&&!P1(D)&&D.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=D,hC(s,c,D,v,A)):(s=u0(f.type,null,v,c,c.mode,A),s.ref=c.ref,s.return=c,c.child=s)}if(D=s.child,!Ty(s,A)){var U=D.memoizedProps;if(f=f.compare,f=f!==null?f:S,f(U,v)&&s.ref===c.ref)return Ql(s,c,A)}return c.flags|=1,s=Gl(D,v),s.ref=c.ref,s.return=c,c.child=s}function hC(s,c,f,v,A){if(s!==null){var D=s.memoizedProps;if(S(D,v)&&s.ref===c.ref)if(Aa=!1,c.pendingProps=v=D,Ty(s,A))(s.flags&131072)!==0&&(Aa=!0);else return c.lanes=s.lanes,Ql(s,c,A)}return vy(s,c,f,v,A)}function gC(s,c,f,v){var A=v.children,D=s!==null?s.memoizedState:null;if(s===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((c.flags&128)!==0){if(D=D!==null?D.baseLanes|f:f,s!==null){for(v=c.child=s.child,A=0;v!==null;)A=A|v.lanes|v.childLanes,v=v.sibling;v=A&~D}else v=0,c.child=null;return pC(s,c,D,f,v)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},s!==null&&h0(c,D!==null?D.cachePool:null),D!==null?xS(c,D):K1(),bS(c);else return v=c.lanes=536870912,pC(s,c,D!==null?D.baseLanes|f:f,f,v)}else D!==null?(h0(c,D.cachePool),xS(c,D),to(),c.memoizedState=null):(s!==null&&h0(c,null),K1(),to());return nn(s,c,A,f),c.child}function Wd(s,c){return s!==null&&s.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function pC(s,c,f,v,A){var D=$1();return D=D===null?null:{parent:Sa._currentValue,pool:D},c.memoizedState={baseLanes:f,cachePool:D},s!==null&&h0(c,null),K1(),bS(c),s!==null&&nu(s,c,v,!0),c.childLanes=A,null}function D0(s,c){return c=P0({mode:c.mode,children:c.children},s.mode),c.ref=s.ref,s.child=c,c.return=s,c}function yC(s,c,f){return sc(c,s.child,null,f),s=D0(c,c.pendingProps),s.flags|=2,Kn(c),c.memoizedState=null,s}function t9(s,c,f){var v=c.pendingProps,A=(c.flags&128)!==0;if(c.flags&=-129,s===null){if(Zt){if(v.mode==="hidden")return s=D0(c,v),c.lanes=536870912,Wd(null,s);if(Q1(c),(s=jr)?(s=_3(s,xs),s=s!==null&&s.data==="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:Yi!==null?{id:bl,overflow:vl}:null,retryLane:536870912,hydrationErrors:null},f=eS(s),f.return=c,c.child=f,rn=c,jr=null)):s=null,s===null)throw Wi(c);return c.lanes=536870912,null}return D0(c,v)}var D=s.memoizedState;if(D!==null){var U=D.dehydrated;if(Q1(c),A)if(c.flags&256)c.flags&=-257,c=yC(s,c,f);else if(c.memoizedState!==null)c.child=s.child,c.flags|=128,c=null;else throw Error(a(558));else if(Aa||nu(s,c,f,!1),A=(f&s.childLanes)!==0,Aa||A){if(v=_r,v!==null&&(U=Fl(v,f),U!==0&&U!==D.retryLane))throw D.retryLane=U,Zo(s,U),Mn(v,s,U),by;z0(),c=yC(s,c,f)}else s=D.treeContext,jr=vs(U.nextSibling),rn=c,Zt=!0,Xi=null,xs=!1,s!==null&&aS(c,s),c=D0(c,v),c.flags|=4096;return c}return s=Gl(s.child,{mode:v.mode,children:v.children}),s.ref=c.ref,c.child=s,s.return=c,s}function k0(s,c){var f=c.ref;if(f===null)s!==null&&s.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(a(284));(s===null||s.ref!==f)&&(c.flags|=4194816)}}function vy(s,c,f,v,A){return tc(c),f=ey(s,c,f,v,void 0,A),v=ty(),s!==null&&!Aa?(ry(s,c,A),Ql(s,c,A)):(Zt&&v&&R1(c),c.flags|=1,nn(s,c,f,A),c.child)}function xC(s,c,f,v,A,D){return tc(c),c.updateQueue=null,f=ES(c,v,f,A),vS(s),v=ty(),s!==null&&!Aa?(ry(s,c,D),Ql(s,c,D)):(Zt&&v&&R1(c),c.flags|=1,nn(s,c,f,D),c.child)}function bC(s,c,f,v,A){if(tc(c),c.stateNode===null){var D=eu,U=f.contextType;typeof U=="object"&&U!==null&&(D=an(U)),D=new f(v,D),c.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=yy,c.stateNode=D,D._reactInternals=c,D=c.stateNode,D.props=v,D.state=c.memoizedState,D.refs={},G1(c),U=f.contextType,D.context=typeof U=="object"&&U!==null?an(U):eu,D.state=c.memoizedState,U=f.getDerivedStateFromProps,typeof U=="function"&&(py(c,f,U,v),D.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(U=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),U!==D.state&&yy.enqueueReplaceState(D,D.state,null),$d(c,v,D,A),Hd(),D.state=c.memoizedState),typeof D.componentDidMount=="function"&&(c.flags|=4194308),v=!0}else if(s===null){D=c.stateNode;var Q=c.memoizedProps,ue=ic(f,Q);D.props=ue;var _e=D.context,He=f.contextType;U=eu,typeof He=="object"&&He!==null&&(U=an(He));var Ye=f.getDerivedStateFromProps;He=typeof Ye=="function"||typeof D.getSnapshotBeforeUpdate=="function",Q=c.pendingProps!==Q,He||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(Q||_e!==U)&&sC(c,D,v,U),Zi=!1;var ke=c.memoizedState;D.state=ke,$d(c,v,D,A),Hd(),_e=c.memoizedState,Q||ke!==_e||Zi?(typeof Ye=="function"&&(py(c,f,Ye,v),_e=c.memoizedState),(ue=Zi||nC(c,f,ue,v,ke,_e,U))?(He||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(c.flags|=4194308)):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=v,c.memoizedState=_e),D.props=v,D.state=_e,D.context=U,v=ue):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),v=!1)}else{D=c.stateNode,Y1(s,c),U=c.memoizedProps,He=ic(f,U),D.props=He,Ye=c.pendingProps,ke=D.context,_e=f.contextType,ue=eu,typeof _e=="object"&&_e!==null&&(ue=an(_e)),Q=f.getDerivedStateFromProps,(_e=typeof Q=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(U!==Ye||ke!==ue)&&sC(c,D,v,ue),Zi=!1,ke=c.memoizedState,D.state=ke,$d(c,v,D,A),Hd();var Be=c.memoizedState;U!==Ye||ke!==Be||Zi||s!==null&&s.dependencies!==null&&m0(s.dependencies)?(typeof Q=="function"&&(py(c,f,Q,v),Be=c.memoizedState),(He=Zi||nC(c,f,He,v,ke,Be,ue)||s!==null&&s.dependencies!==null&&m0(s.dependencies))?(_e||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(v,Be,ue),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(v,Be,ue)),typeof D.componentDidUpdate=="function"&&(c.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof D.componentDidUpdate!="function"||U===s.memoizedProps&&ke===s.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||U===s.memoizedProps&&ke===s.memoizedState||(c.flags|=1024),c.memoizedProps=v,c.memoizedState=Be),D.props=v,D.state=Be,D.context=ue,v=He):(typeof D.componentDidUpdate!="function"||U===s.memoizedProps&&ke===s.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||U===s.memoizedProps&&ke===s.memoizedState||(c.flags|=1024),v=!1)}return D=v,k0(s,c),v=(c.flags&128)!==0,D||v?(D=c.stateNode,f=v&&typeof f.getDerivedStateFromError!="function"?null:D.render(),c.flags|=1,s!==null&&v?(c.child=sc(c,s.child,null,A),c.child=sc(c,null,f,A)):nn(s,c,f,A),c.memoizedState=D.state,s=c.child):s=Ql(s,c,A),s}function vC(s,c,f,v){return Jo(),c.flags|=256,nn(s,c,f,v),c.child}var Ey={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wy(s){return{baseLanes:s,cachePool:cS()}}function Ny(s,c,f){return s=s!==null?s.childLanes&~f:0,c&&(s|=Qn),s}function EC(s,c,f){var v=c.pendingProps,A=!1,D=(c.flags&128)!==0,U;if((U=D)||(U=s!==null&&s.memoizedState===null?!1:(ga.current&2)!==0),U&&(A=!0,c.flags&=-129),U=(c.flags&32)!==0,c.flags&=-33,s===null){if(Zt){if(A?eo(c):to(),(s=jr)?(s=_3(s,xs),s=s!==null&&s.data!=="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:Yi!==null?{id:bl,overflow:vl}:null,retryLane:536870912,hydrationErrors:null},f=eS(s),f.return=c,c.child=f,rn=c,jr=null)):s=null,s===null)throw Wi(c);return sx(s)?c.lanes=32:c.lanes=536870912,null}var Q=v.children;return v=v.fallback,A?(to(),A=c.mode,Q=P0({mode:"hidden",children:Q},A),v=Qo(v,A,f,null),Q.return=c,v.return=c,Q.sibling=v,c.child=Q,v=c.child,v.memoizedState=wy(f),v.childLanes=Ny(s,U,f),c.memoizedState=Ey,Wd(null,v)):(eo(c),Sy(c,Q))}var ue=s.memoizedState;if(ue!==null&&(Q=ue.dehydrated,Q!==null)){if(D)c.flags&256?(eo(c),c.flags&=-257,c=Cy(s,c,f)):c.memoizedState!==null?(to(),c.child=s.child,c.flags|=128,c=null):(to(),Q=v.fallback,A=c.mode,v=P0({mode:"visible",children:v.children},A),Q=Qo(Q,A,f,null),Q.flags|=2,v.return=c,Q.return=c,v.sibling=Q,c.child=v,sc(c,s.child,null,f),v=c.child,v.memoizedState=wy(f),v.childLanes=Ny(s,U,f),c.memoizedState=Ey,c=Wd(null,v));else if(eo(c),sx(Q)){if(U=Q.nextSibling&&Q.nextSibling.dataset,U)var _e=U.dgst;U=_e,v=Error(a(419)),v.stack="",v.digest=U,Bd({value:v,source:null,stack:null}),c=Cy(s,c,f)}else if(Aa||nu(s,c,f,!1),U=(f&s.childLanes)!==0,Aa||U){if(U=_r,U!==null&&(v=Fl(U,f),v!==0&&v!==ue.retryLane))throw ue.retryLane=v,Zo(s,v),Mn(U,s,v),by;nx(Q)||z0(),c=Cy(s,c,f)}else nx(Q)?(c.flags|=192,c.child=s.child,c=null):(s=ue.treeContext,jr=vs(Q.nextSibling),rn=c,Zt=!0,Xi=null,xs=!1,s!==null&&aS(c,s),c=Sy(c,v.children),c.flags|=4096);return c}return A?(to(),Q=v.fallback,A=c.mode,ue=s.child,_e=ue.sibling,v=Gl(ue,{mode:"hidden",children:v.children}),v.subtreeFlags=ue.subtreeFlags&65011712,_e!==null?Q=Gl(_e,Q):(Q=Qo(Q,A,f,null),Q.flags|=2),Q.return=c,v.return=c,v.sibling=Q,c.child=v,Wd(null,v),v=c.child,Q=s.child.memoizedState,Q===null?Q=wy(f):(A=Q.cachePool,A!==null?(ue=Sa._currentValue,A=A.parent!==ue?{parent:ue,pool:ue}:A):A=cS(),Q={baseLanes:Q.baseLanes|f,cachePool:A}),v.memoizedState=Q,v.childLanes=Ny(s,U,f),c.memoizedState=Ey,Wd(s.child,v)):(eo(c),f=s.child,s=f.sibling,f=Gl(f,{mode:"visible",children:v.children}),f.return=c,f.sibling=null,s!==null&&(U=c.deletions,U===null?(c.deletions=[s],c.flags|=16):U.push(s)),c.child=f,c.memoizedState=null,f)}function Sy(s,c){return c=P0({mode:"visible",children:c},s.mode),c.return=s,s.child=c}function P0(s,c){return s=Xn(22,s,null,c),s.lanes=0,s}function Cy(s,c,f){return sc(c,s.child,null,f),s=Sy(c,c.pendingProps.children),s.flags|=2,c.memoizedState=null,s}function wC(s,c,f){s.lanes|=c;var v=s.alternate;v!==null&&(v.lanes|=c),j1(s.return,c,f)}function Ay(s,c,f,v,A,D){var U=s.memoizedState;U===null?s.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:v,tail:f,tailMode:A,treeForkCount:D}:(U.isBackwards=c,U.rendering=null,U.renderingStartTime=0,U.last=v,U.tail=f,U.tailMode=A,U.treeForkCount=D)}function NC(s,c,f){var v=c.pendingProps,A=v.revealOrder,D=v.tail;v=v.children;var U=ga.current,Q=(U&2)!==0;if(Q?(U=U&1|2,c.flags|=128):U&=1,ge(ga,U),nn(s,c,v,f),v=Zt?Ld:0,!Q&&s!==null&&(s.flags&128)!==0)e:for(s=c.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&wC(s,f,c);else if(s.tag===19)wC(s,f,c);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===c)break e;for(;s.sibling===null;){if(s.return===null||s.return===c)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(A){case"forwards":for(f=c.child,A=null;f!==null;)s=f.alternate,s!==null&&v0(s)===null&&(A=f),f=f.sibling;f=A,f===null?(A=c.child,c.child=null):(A=f.sibling,f.sibling=null),Ay(c,!1,A,f,D,v);break;case"backwards":case"unstable_legacy-backwards":for(f=null,A=c.child,c.child=null;A!==null;){if(s=A.alternate,s!==null&&v0(s)===null){c.child=A;break}s=A.sibling,A.sibling=f,f=A,A=s}Ay(c,!0,f,null,D,v);break;case"together":Ay(c,!1,null,null,void 0,v);break;default:c.memoizedState=null}return c.child}function Ql(s,c,f){if(s!==null&&(c.dependencies=s.dependencies),no|=c.lanes,(f&c.childLanes)===0)if(s!==null){if(nu(s,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(s!==null&&c.child!==s.child)throw Error(a(153));if(c.child!==null){for(s=c.child,f=Gl(s,s.pendingProps),c.child=f,f.return=c;s.sibling!==null;)s=s.sibling,f=f.sibling=Gl(s,s.pendingProps),f.return=c;f.sibling=null}return c.child}function Ty(s,c){return(s.lanes&c)!==0?!0:(s=s.dependencies,!!(s!==null&&m0(s)))}function r9(s,c,f){switch(c.tag){case 3:$e(c,c.stateNode.containerInfo),Ki(c,Sa,s.memoizedState.cache),Jo();break;case 27:case 5:Xe(c);break;case 4:$e(c,c.stateNode.containerInfo);break;case 10:Ki(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,Q1(c),null;break;case 13:var v=c.memoizedState;if(v!==null)return v.dehydrated!==null?(eo(c),c.flags|=128,null):(f&c.child.childLanes)!==0?EC(s,c,f):(eo(c),s=Ql(s,c,f),s!==null?s.sibling:null);eo(c);break;case 19:var A=(s.flags&128)!==0;if(v=(f&c.childLanes)!==0,v||(nu(s,c,f,!1),v=(f&c.childLanes)!==0),A){if(v)return NC(s,c,f);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ge(ga,ga.current),v)break;return null;case 22:return c.lanes=0,gC(s,c,f,c.pendingProps);case 24:Ki(c,Sa,s.memoizedState.cache)}return Ql(s,c,f)}function SC(s,c,f){if(s!==null)if(s.memoizedProps!==c.pendingProps)Aa=!0;else{if(!Ty(s,f)&&(c.flags&128)===0)return Aa=!1,r9(s,c,f);Aa=(s.flags&131072)!==0}else Aa=!1,Zt&&(c.flags&1048576)!==0&&rS(c,Ld,c.index);switch(c.lanes=0,c.tag){case 16:e:{var v=c.pendingProps;if(s=ac(c.elementType),c.type=s,typeof s=="function")P1(s)?(v=ic(s,v),c.tag=1,c=bC(null,c,s,v,f)):(c.tag=0,c=vy(null,c,s,v,f));else{if(s!=null){var A=s.$$typeof;if(A===Y){c.tag=11,c=mC(null,c,s,v,f);break e}else if(A===L){c.tag=14,c=fC(null,c,s,v,f);break e}}throw c=me(s)||s,Error(a(306,c,""))}}return c;case 0:return vy(s,c,c.type,c.pendingProps,f);case 1:return v=c.type,A=ic(v,c.pendingProps),bC(s,c,v,A,f);case 3:e:{if($e(c,c.stateNode.containerInfo),s===null)throw Error(a(387));v=c.pendingProps;var D=c.memoizedState;A=D.element,Y1(s,c),$d(c,v,null,f);var U=c.memoizedState;if(v=U.cache,Ki(c,Sa,v),v!==D.cache&&z1(c,[Sa],f,!0),Hd(),v=U.element,D.isDehydrated)if(D={element:v,isDehydrated:!1,cache:U.cache},c.updateQueue.baseState=D,c.memoizedState=D,c.flags&256){c=vC(s,c,v,f);break e}else if(v!==A){A=gs(Error(a(424)),c),Bd(A),c=vC(s,c,v,f);break e}else{switch(s=c.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(jr=vs(s.firstChild),rn=c,Zt=!0,Xi=null,xs=!0,f=gS(c,null,v,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Jo(),v===A){c=Ql(s,c,f);break e}nn(s,c,v,f)}c=c.child}return c;case 26:return k0(s,c),s===null?(f=R3(c.type,null,c.pendingProps,null))?c.memoizedState=f:Zt||(f=c.type,s=c.pendingProps,v=X0(ie.current).createElement(f),v[$r]=c,v[rr]=s,sn(v,f,s),kr(v),c.stateNode=v):c.memoizedState=R3(c.type,s.memoizedProps,c.pendingProps,s.memoizedState),null;case 27:return Xe(c),s===null&&Zt&&(v=c.stateNode=P3(c.type,c.pendingProps,ie.current),rn=c,xs=!0,A=jr,co(c.type)?(lx=A,jr=vs(v.firstChild)):jr=A),nn(s,c,c.pendingProps.children,f),k0(s,c),s===null&&(c.flags|=4194304),c.child;case 5:return s===null&&Zt&&((A=v=jr)&&(v=P9(v,c.type,c.pendingProps,xs),v!==null?(c.stateNode=v,rn=c,jr=vs(v.firstChild),xs=!1,A=!0):A=!1),A||Wi(c)),Xe(c),A=c.type,D=c.pendingProps,U=s!==null?s.memoizedProps:null,v=D.children,tx(A,D)?v=null:U!==null&&tx(A,U)&&(c.flags|=32),c.memoizedState!==null&&(A=ey(s,c,YR,null,null,f),um._currentValue=A),k0(s,c),nn(s,c,v,f),c.child;case 6:return s===null&&Zt&&((s=f=jr)&&(f=M9(f,c.pendingProps,xs),f!==null?(c.stateNode=f,rn=c,jr=null,s=!0):s=!1),s||Wi(c)),null;case 13:return EC(s,c,f);case 4:return $e(c,c.stateNode.containerInfo),v=c.pendingProps,s===null?c.child=sc(c,null,v,f):nn(s,c,v,f),c.child;case 11:return mC(s,c,c.type,c.pendingProps,f);case 7:return nn(s,c,c.pendingProps,f),c.child;case 8:return nn(s,c,c.pendingProps.children,f),c.child;case 12:return nn(s,c,c.pendingProps.children,f),c.child;case 10:return v=c.pendingProps,Ki(c,c.type,v.value),nn(s,c,v.children,f),c.child;case 9:return A=c.type._context,v=c.pendingProps.children,tc(c),A=an(A),v=v(A),c.flags|=1,nn(s,c,v,f),c.child;case 14:return fC(s,c,c.type,c.pendingProps,f);case 15:return hC(s,c,c.type,c.pendingProps,f);case 19:return NC(s,c,f);case 31:return t9(s,c,f);case 22:return gC(s,c,f,c.pendingProps);case 24:return tc(c),v=an(Sa),s===null?(A=$1(),A===null&&(A=_r,D=V1(),A.pooledCache=D,D.refCount++,D!==null&&(A.pooledCacheLanes|=f),A=D),c.memoizedState={parent:v,cache:A},G1(c),Ki(c,Sa,A)):((s.lanes&f)!==0&&(Y1(s,c),$d(c,null,null,f),Hd()),A=s.memoizedState,D=c.memoizedState,A.parent!==v?(A={parent:v,cache:v},c.memoizedState=A,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=A),Ki(c,Sa,v)):(v=D.cache,Ki(c,Sa,v),v!==A.cache&&z1(c,[Sa],f,!0))),nn(s,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(a(156,c.tag))}function Jl(s){s.flags|=4}function Oy(s,c,f,v,A){if((c=(s.mode&32)!==0)&&(c=!1),c){if(s.flags|=16777216,(A&335544128)===A)if(s.stateNode.complete)s.flags|=8192;else if(ZC())s.flags|=8192;else throw nc=p0,q1}else s.flags&=-16777217}function CC(s,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!j3(c))if(ZC())s.flags|=8192;else throw nc=p0,q1}function M0(s,c){c!==null&&(s.flags|=4),s.flags&16384&&(c=s.tag!==22?ot():536870912,s.lanes|=c,pu|=c)}function Kd(s,c){if(!Zt)switch(s.tailMode){case"hidden":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?c||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function zr(s){var c=s.alternate!==null&&s.alternate.child===s.child,f=0,v=0;if(c)for(var A=s.child;A!==null;)f|=A.lanes|A.childLanes,v|=A.subtreeFlags&65011712,v|=A.flags&65011712,A.return=s,A=A.sibling;else for(A=s.child;A!==null;)f|=A.lanes|A.childLanes,v|=A.subtreeFlags,v|=A.flags,A.return=s,A=A.sibling;return s.subtreeFlags|=v,s.childLanes=f,c}function a9(s,c,f){var v=c.pendingProps;switch(L1(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zr(c),null;case 1:return zr(c),null;case 3:return f=c.stateNode,v=null,s!==null&&(v=s.memoizedState.cache),c.memoizedState.cache!==v&&(c.flags|=2048),Wl(Sa),be(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(au(c)?Jl(c):s===null||s.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,F1())),zr(c),null;case 26:var A=c.type,D=c.memoizedState;return s===null?(Jl(c),D!==null?(zr(c),CC(c,D)):(zr(c),Oy(c,A,null,v,f))):D?D!==s.memoizedState?(Jl(c),zr(c),CC(c,D)):(zr(c),c.flags&=-16777217):(s=s.memoizedProps,s!==v&&Jl(c),zr(c),Oy(c,A,s,v,f)),null;case 27:if(at(c),f=ie.current,A=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==v&&Jl(c);else{if(!v){if(c.stateNode===null)throw Error(a(166));return zr(c),null}s=le.current,au(c)?nS(c):(s=P3(A,v,f),c.stateNode=s,Jl(c))}return zr(c),null;case 5:if(at(c),A=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==v&&Jl(c);else{if(!v){if(c.stateNode===null)throw Error(a(166));return zr(c),null}if(D=le.current,au(c))nS(c);else{var U=X0(ie.current);switch(D){case 1:D=U.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:D=U.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":D=U.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":D=U.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":D=U.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild);break;case"select":D=typeof v.is=="string"?U.createElement("select",{is:v.is}):U.createElement("select"),v.multiple?D.multiple=!0:v.size&&(D.size=v.size);break;default:D=typeof v.is=="string"?U.createElement(A,{is:v.is}):U.createElement(A)}}D[$r]=c,D[rr]=v;e:for(U=c.child;U!==null;){if(U.tag===5||U.tag===6)D.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===c)break e;for(;U.sibling===null;){if(U.return===null||U.return===c)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}c.stateNode=D;e:switch(sn(D,A,v),A){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&Jl(c)}}return zr(c),Oy(c,c.type,s===null?null:s.memoizedProps,c.pendingProps,f),null;case 6:if(s&&c.stateNode!=null)s.memoizedProps!==v&&Jl(c);else{if(typeof v!="string"&&c.stateNode===null)throw Error(a(166));if(s=ie.current,au(c)){if(s=c.stateNode,f=c.memoizedProps,v=null,A=rn,A!==null)switch(A.tag){case 27:case 5:v=A.memoizedProps}s[$r]=c,s=!!(s.nodeValue===f||v!==null&&v.suppressHydrationWarning===!0||E3(s.nodeValue,f)),s||Wi(c,!0)}else s=X0(s).createTextNode(v),s[$r]=c,c.stateNode=s}return zr(c),null;case 31:if(f=c.memoizedState,s===null||s.memoizedState!==null){if(v=au(c),f!==null){if(s===null){if(!v)throw Error(a(318));if(s=c.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(557));s[$r]=c}else Jo(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;zr(c),s=!1}else f=F1(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return c.flags&256?(Kn(c),c):(Kn(c),null);if((c.flags&128)!==0)throw Error(a(558))}return zr(c),null;case 13:if(v=c.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(A=au(c),v!==null&&v.dehydrated!==null){if(s===null){if(!A)throw Error(a(318));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(a(317));A[$r]=c}else Jo(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;zr(c),A=!1}else A=F1(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=A),A=!0;if(!A)return c.flags&256?(Kn(c),c):(Kn(c),null)}return Kn(c),(c.flags&128)!==0?(c.lanes=f,c):(f=v!==null,s=s!==null&&s.memoizedState!==null,f&&(v=c.child,A=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(A=v.alternate.memoizedState.cachePool.pool),D=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(D=v.memoizedState.cachePool.pool),D!==A&&(v.flags|=2048)),f!==s&&f&&(c.child.flags|=8192),M0(c,c.updateQueue),zr(c),null);case 4:return be(),s===null&&Ky(c.stateNode.containerInfo),zr(c),null;case 10:return Wl(c.type),zr(c),null;case 19:if(ee(ga),v=c.memoizedState,v===null)return zr(c),null;if(A=(c.flags&128)!==0,D=v.rendering,D===null)if(A)Kd(v,!1);else{if(ia!==0||s!==null&&(s.flags&128)!==0)for(s=c.child;s!==null;){if(D=v0(s),D!==null){for(c.flags|=128,Kd(v,!1),s=D.updateQueue,c.updateQueue=s,M0(c,s),c.subtreeFlags=0,s=f,f=c.child;f!==null;)JN(f,s),f=f.sibling;return ge(ga,ga.current&1|2),Zt&&Yl(c,v.treeForkCount),c.child}s=s.sibling}v.tail!==null&&mt()>F0&&(c.flags|=128,A=!0,Kd(v,!1),c.lanes=4194304)}else{if(!A)if(s=v0(D),s!==null){if(c.flags|=128,A=!0,s=s.updateQueue,c.updateQueue=s,M0(c,s),Kd(v,!0),v.tail===null&&v.tailMode==="hidden"&&!D.alternate&&!Zt)return zr(c),null}else 2*mt()-v.renderingStartTime>F0&&f!==536870912&&(c.flags|=128,A=!0,Kd(v,!1),c.lanes=4194304);v.isBackwards?(D.sibling=c.child,c.child=D):(s=v.last,s!==null?s.sibling=D:c.child=D,v.last=D)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=mt(),s.sibling=null,f=ga.current,ge(ga,A?f&1|2:f&1),Zt&&Yl(c,v.treeForkCount),s):(zr(c),null);case 22:case 23:return Kn(c),Z1(),v=c.memoizedState!==null,s!==null?s.memoizedState!==null!==v&&(c.flags|=8192):v&&(c.flags|=8192),v?(f&536870912)!==0&&(c.flags&128)===0&&(zr(c),c.subtreeFlags&6&&(c.flags|=8192)):zr(c),f=c.updateQueue,f!==null&&M0(c,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==f&&(c.flags|=2048),s!==null&&ee(rc),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Wl(Sa),zr(c),null;case 25:return null;case 30:return null}throw Error(a(156,c.tag))}function n9(s,c){switch(L1(c),c.tag){case 1:return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 3:return Wl(Sa),be(),s=c.flags,(s&65536)!==0&&(s&128)===0?(c.flags=s&-65537|128,c):null;case 26:case 27:case 5:return at(c),null;case 31:if(c.memoizedState!==null){if(Kn(c),c.alternate===null)throw Error(a(340));Jo()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 13:if(Kn(c),s=c.memoizedState,s!==null&&s.dehydrated!==null){if(c.alternate===null)throw Error(a(340));Jo()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 19:return ee(ga),null;case 4:return be(),null;case 10:return Wl(c.type),null;case 22:case 23:return Kn(c),Z1(),s!==null&&ee(rc),s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 24:return Wl(Sa),null;case 25:return null;default:return null}}function AC(s,c){switch(L1(c),c.tag){case 3:Wl(Sa),be();break;case 26:case 27:case 5:at(c);break;case 4:be();break;case 31:c.memoizedState!==null&&Kn(c);break;case 13:Kn(c);break;case 19:ee(ga);break;case 10:Wl(c.type);break;case 22:case 23:Kn(c),Z1(),s!==null&&ee(rc);break;case 24:Wl(Sa)}}function Zd(s,c){try{var f=c.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var A=v.next;f=A;do{if((f.tag&s)===s){v=void 0;var D=f.create,U=f.inst;v=D(),U.destroy=v}f=f.next}while(f!==A)}}catch(Q){pr(c,c.return,Q)}}function ro(s,c,f){try{var v=c.updateQueue,A=v!==null?v.lastEffect:null;if(A!==null){var D=A.next;v=D;do{if((v.tag&s)===s){var U=v.inst,Q=U.destroy;if(Q!==void 0){U.destroy=void 0,A=c;var ue=f,_e=Q;try{_e()}catch(He){pr(A,ue,He)}}}v=v.next}while(v!==D)}}catch(He){pr(c,c.return,He)}}function TC(s){var c=s.updateQueue;if(c!==null){var f=s.stateNode;try{yS(c,f)}catch(v){pr(s,s.return,v)}}}function OC(s,c,f){f.props=ic(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(v){pr(s,c,v)}}function Qd(s,c){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var v=s.stateNode;break;case 30:v=s.stateNode;break;default:v=s.stateNode}typeof f=="function"?s.refCleanup=f(v):f.current=v}}catch(A){pr(s,c,A)}}function El(s,c){var f=s.ref,v=s.refCleanup;if(f!==null)if(typeof v=="function")try{v()}catch(A){pr(s,c,A)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(A){pr(s,c,A)}else f.current=null}function _C(s){var c=s.type,f=s.memoizedProps,v=s.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&v.focus();break e;case"img":f.src?v.src=f.src:f.srcSet&&(v.srcset=f.srcSet)}}catch(A){pr(s,s.return,A)}}function _y(s,c,f){try{var v=s.stateNode;A9(v,s.type,f,c),v[rr]=c}catch(A){pr(s,s.return,A)}}function DC(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&co(s.type)||s.tag===4}function Dy(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||DC(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&co(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ky(s,c,f){var v=s.tag;if(v===5||v===6)s=s.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(s),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=An));else if(v!==4&&(v===27&&co(s.type)&&(f=s.stateNode,c=null),s=s.child,s!==null))for(ky(s,c,f),s=s.sibling;s!==null;)ky(s,c,f),s=s.sibling}function I0(s,c,f){var v=s.tag;if(v===5||v===6)s=s.stateNode,c?f.insertBefore(s,c):f.appendChild(s);else if(v!==4&&(v===27&&co(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(I0(s,c,f),s=s.sibling;s!==null;)I0(s,c,f),s=s.sibling}function kC(s){var c=s.stateNode,f=s.memoizedProps;try{for(var v=s.type,A=c.attributes;A.length;)c.removeAttributeNode(A[0]);sn(c,v,f),c[$r]=s,c[rr]=f}catch(D){pr(s,s.return,D)}}var ei=!1,Ta=!1,Py=!1,PC=typeof WeakSet=="function"?WeakSet:Set,Ya=null;function s9(s,c){if(s=s.containerInfo,Jy=th,s=X(s),Z(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var v=f.getSelection&&f.getSelection();if(v&&v.rangeCount!==0){f=v.anchorNode;var A=v.anchorOffset,D=v.focusNode;v=v.focusOffset;try{f.nodeType,D.nodeType}catch{f=null;break e}var U=0,Q=-1,ue=-1,_e=0,He=0,Ye=s,ke=null;t:for(;;){for(var Be;Ye!==f||A!==0&&Ye.nodeType!==3||(Q=U+A),Ye!==D||v!==0&&Ye.nodeType!==3||(ue=U+v),Ye.nodeType===3&&(U+=Ye.nodeValue.length),(Be=Ye.firstChild)!==null;)ke=Ye,Ye=Be;for(;;){if(Ye===s)break t;if(ke===f&&++_e===A&&(Q=U),ke===D&&++He===v&&(ue=U),(Be=Ye.nextSibling)!==null)break;Ye=ke,ke=Ye.parentNode}Ye=Be}f=Q===-1||ue===-1?null:{start:Q,end:ue}}else f=null}f=f||{start:0,end:0}}else f=null;for(ex={focusedElem:s,selectionRange:f},th=!1,Ya=c;Ya!==null;)if(c=Ya,s=c.child,(c.subtreeFlags&1028)!==0&&s!==null)s.return=c,Ya=s;else for(;Ya!==null;){switch(c=Ya,D=c.alternate,s=c.flags,c.tag){case 0:if((s&4)!==0&&(s=c.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)A=s[f],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&D!==null){s=void 0,f=c,A=D.memoizedProps,D=D.memoizedState,v=f.stateNode;try{var ht=ic(f.type,A);s=v.getSnapshotBeforeUpdate(ht,D),v.__reactInternalSnapshotBeforeUpdate=s}catch(Ot){pr(f,f.return,Ot)}}break;case 3:if((s&1024)!==0){if(s=c.stateNode.containerInfo,f=s.nodeType,f===9)ax(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":ax(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(a(163))}if(s=c.sibling,s!==null){s.return=c.return,Ya=s;break}Ya=c.return}}function MC(s,c,f){var v=f.flags;switch(f.tag){case 0:case 11:case 15:ri(s,f),v&4&&Zd(5,f);break;case 1:if(ri(s,f),v&4)if(s=f.stateNode,c===null)try{s.componentDidMount()}catch(U){pr(f,f.return,U)}else{var A=ic(f.type,c.memoizedProps);c=c.memoizedState;try{s.componentDidUpdate(A,c,s.__reactInternalSnapshotBeforeUpdate)}catch(U){pr(f,f.return,U)}}v&64&&TC(f),v&512&&Qd(f,f.return);break;case 3:if(ri(s,f),v&64&&(s=f.updateQueue,s!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{yS(s,c)}catch(U){pr(f,f.return,U)}}break;case 27:c===null&&v&4&&kC(f);case 26:case 5:ri(s,f),c===null&&v&4&&_C(f),v&512&&Qd(f,f.return);break;case 12:ri(s,f);break;case 31:ri(s,f),v&4&&LC(s,f);break;case 13:ri(s,f),v&4&&BC(s,f),v&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=h9.bind(null,f),I9(s,f))));break;case 22:if(v=f.memoizedState!==null||ei,!v){c=c!==null&&c.memoizedState!==null||Ta,A=ei;var D=Ta;ei=v,(Ta=c)&&!D?ai(s,f,(f.subtreeFlags&8772)!==0):ri(s,f),ei=A,Ta=D}break;case 30:break;default:ri(s,f)}}function IC(s){var c=s.alternate;c!==null&&(s.alternate=null,IC(c)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(c=s.stateNode,c!==null&&en(c)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Gr=null,_n=!1;function ti(s,c,f){for(f=f.child;f!==null;)RC(s,c,f),f=f.sibling}function RC(s,c,f){if(xe&&typeof xe.onCommitFiberUnmount=="function")try{xe.onCommitFiberUnmount(kt,f)}catch{}switch(f.tag){case 26:Ta||El(f,c),ti(s,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Ta||El(f,c);var v=Gr,A=_n;co(f.type)&&(Gr=f.stateNode,_n=!1),ti(s,c,f),im(f.stateNode),Gr=v,_n=A;break;case 5:Ta||El(f,c);case 6:if(v=Gr,A=_n,Gr=null,ti(s,c,f),Gr=v,_n=A,Gr!==null)if(_n)try{(Gr.nodeType===9?Gr.body:Gr.nodeName==="HTML"?Gr.ownerDocument.body:Gr).removeChild(f.stateNode)}catch(D){pr(f,c,D)}else try{Gr.removeChild(f.stateNode)}catch(D){pr(f,c,D)}break;case 18:Gr!==null&&(_n?(s=Gr,T3(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),Su(s)):T3(Gr,f.stateNode));break;case 4:v=Gr,A=_n,Gr=f.stateNode.containerInfo,_n=!0,ti(s,c,f),Gr=v,_n=A;break;case 0:case 11:case 14:case 15:ro(2,f,c),Ta||ro(4,f,c),ti(s,c,f);break;case 1:Ta||(El(f,c),v=f.stateNode,typeof v.componentWillUnmount=="function"&&OC(f,c,v)),ti(s,c,f);break;case 21:ti(s,c,f);break;case 22:Ta=(v=Ta)||f.memoizedState!==null,ti(s,c,f),Ta=v;break;default:ti(s,c,f)}}function LC(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Su(s)}catch(f){pr(c,c.return,f)}}}function BC(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Su(s)}catch(f){pr(c,c.return,f)}}function l9(s){switch(s.tag){case 31:case 13:case 19:var c=s.stateNode;return c===null&&(c=s.stateNode=new PC),c;case 22:return s=s.stateNode,c=s._retryCache,c===null&&(c=s._retryCache=new PC),c;default:throw Error(a(435,s.tag))}}function R0(s,c){var f=l9(s);c.forEach(function(v){if(!f.has(v)){f.add(v);var A=g9.bind(null,s,v);v.then(A,A)}})}function Dn(s,c){var f=c.deletions;if(f!==null)for(var v=0;v<f.length;v++){var A=f[v],D=s,U=c,Q=U;e:for(;Q!==null;){switch(Q.tag){case 27:if(co(Q.type)){Gr=Q.stateNode,_n=!1;break e}break;case 5:Gr=Q.stateNode,_n=!1;break e;case 3:case 4:Gr=Q.stateNode.containerInfo,_n=!0;break e}Q=Q.return}if(Gr===null)throw Error(a(160));RC(D,U,A),Gr=null,_n=!1,D=A.alternate,D!==null&&(D.return=null),A.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)FC(c,s),c=c.sibling}var Xs=null;function FC(s,c){var f=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Dn(c,s),kn(s),v&4&&(ro(3,s,s.return),Zd(3,s),ro(5,s,s.return));break;case 1:Dn(c,s),kn(s),v&512&&(Ta||f===null||El(f,f.return)),v&64&&ei&&(s=s.updateQueue,s!==null&&(v=s.callbacks,v!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?v:f.concat(v))));break;case 26:var A=Xs;if(Dn(c,s),kn(s),v&512&&(Ta||f===null||El(f,f.return)),v&4){var D=f!==null?f.memoizedState:null;if(v=s.memoizedState,f===null)if(v===null)if(s.stateNode===null){e:{v=s.type,f=s.memoizedProps,A=A.ownerDocument||A;t:switch(v){case"title":D=A.getElementsByTagName("title")[0],(!D||D[hl]||D[$r]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=A.createElement(v),A.head.insertBefore(D,A.querySelector("head > title"))),sn(D,v,f),D[$r]=s,kr(D),v=D;break e;case"link":var U=F3("link","href",A).get(v+(f.href||""));if(U){for(var Q=0;Q<U.length;Q++)if(D=U[Q],D.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&D.getAttribute("rel")===(f.rel==null?null:f.rel)&&D.getAttribute("title")===(f.title==null?null:f.title)&&D.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){U.splice(Q,1);break t}}D=A.createElement(v),sn(D,v,f),A.head.appendChild(D);break;case"meta":if(U=F3("meta","content",A).get(v+(f.content||""))){for(Q=0;Q<U.length;Q++)if(D=U[Q],D.getAttribute("content")===(f.content==null?null:""+f.content)&&D.getAttribute("name")===(f.name==null?null:f.name)&&D.getAttribute("property")===(f.property==null?null:f.property)&&D.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&D.getAttribute("charset")===(f.charSet==null?null:f.charSet)){U.splice(Q,1);break t}}D=A.createElement(v),sn(D,v,f),A.head.appendChild(D);break;default:throw Error(a(468,v))}D[$r]=s,kr(D),v=D}s.stateNode=v}else U3(A,s.type,s.stateNode);else s.stateNode=B3(A,v,s.memoizedProps);else D!==v?(D===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):D.count--,v===null?U3(A,s.type,s.stateNode):B3(A,v,s.memoizedProps)):v===null&&s.stateNode!==null&&_y(s,s.memoizedProps,f.memoizedProps)}break;case 27:Dn(c,s),kn(s),v&512&&(Ta||f===null||El(f,f.return)),f!==null&&v&4&&_y(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Dn(c,s),kn(s),v&512&&(Ta||f===null||El(f,f.return)),s.flags&32){A=s.stateNode;try{Fi(A,"")}catch(ht){pr(s,s.return,ht)}}v&4&&s.stateNode!=null&&(A=s.memoizedProps,_y(s,A,f!==null?f.memoizedProps:A)),v&1024&&(Py=!0);break;case 6:if(Dn(c,s),kn(s),v&4){if(s.stateNode===null)throw Error(a(162));v=s.memoizedProps,f=s.stateNode;try{f.nodeValue=v}catch(ht){pr(s,s.return,ht)}}break;case 3:if(Z0=null,A=Xs,Xs=W0(c.containerInfo),Dn(c,s),Xs=A,kn(s),v&4&&f!==null&&f.memoizedState.isDehydrated)try{Su(c.containerInfo)}catch(ht){pr(s,s.return,ht)}Py&&(Py=!1,UC(s));break;case 4:v=Xs,Xs=W0(s.stateNode.containerInfo),Dn(c,s),kn(s),Xs=v;break;case 12:Dn(c,s),kn(s);break;case 31:Dn(c,s),kn(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,R0(s,v)));break;case 13:Dn(c,s),kn(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(B0=mt()),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,R0(s,v)));break;case 22:A=s.memoizedState!==null;var ue=f!==null&&f.memoizedState!==null,_e=ei,He=Ta;if(ei=_e||A,Ta=He||ue,Dn(c,s),Ta=He,ei=_e,kn(s),v&8192)e:for(c=s.stateNode,c._visibility=A?c._visibility&-2:c._visibility|1,A&&(f===null||ue||ei||Ta||oc(s)),f=null,c=s;;){if(c.tag===5||c.tag===26){if(f===null){ue=f=c;try{if(D=ue.stateNode,A)U=D.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{Q=ue.stateNode;var Ye=ue.memoizedProps.style,ke=Ye!=null&&Ye.hasOwnProperty("display")?Ye.display:null;Q.style.display=ke==null||typeof ke=="boolean"?"":(""+ke).trim()}}catch(ht){pr(ue,ue.return,ht)}}}else if(c.tag===6){if(f===null){ue=c;try{ue.stateNode.nodeValue=A?"":ue.memoizedProps}catch(ht){pr(ue,ue.return,ht)}}}else if(c.tag===18){if(f===null){ue=c;try{var Be=ue.stateNode;A?O3(Be,!0):O3(ue.stateNode,!1)}catch(ht){pr(ue,ue.return,ht)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===s)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}v&4&&(v=s.updateQueue,v!==null&&(f=v.retryQueue,f!==null&&(v.retryQueue=null,R0(s,f))));break;case 19:Dn(c,s),kn(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,R0(s,v)));break;case 30:break;case 21:break;default:Dn(c,s),kn(s)}}function kn(s){var c=s.flags;if(c&2){try{for(var f,v=s.return;v!==null;){if(DC(v)){f=v;break}v=v.return}if(f==null)throw Error(a(160));switch(f.tag){case 27:var A=f.stateNode,D=Dy(s);I0(s,D,A);break;case 5:var U=f.stateNode;f.flags&32&&(Fi(U,""),f.flags&=-33);var Q=Dy(s);I0(s,Q,U);break;case 3:case 4:var ue=f.stateNode.containerInfo,_e=Dy(s);ky(s,_e,ue);break;default:throw Error(a(161))}}catch(He){pr(s,s.return,He)}s.flags&=-3}c&4096&&(s.flags&=-4097)}function UC(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var c=s;UC(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),s=s.sibling}}function ri(s,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)MC(s,c.alternate,c),c=c.sibling}function oc(s){for(s=s.child;s!==null;){var c=s;switch(c.tag){case 0:case 11:case 14:case 15:ro(4,c,c.return),oc(c);break;case 1:El(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&OC(c,c.return,f),oc(c);break;case 27:im(c.stateNode);case 26:case 5:El(c,c.return),oc(c);break;case 22:c.memoizedState===null&&oc(c);break;case 30:oc(c);break;default:oc(c)}s=s.sibling}}function ai(s,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var v=c.alternate,A=s,D=c,U=D.flags;switch(D.tag){case 0:case 11:case 15:ai(A,D,f),Zd(4,D);break;case 1:if(ai(A,D,f),v=D,A=v.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(_e){pr(v,v.return,_e)}if(v=D,A=v.updateQueue,A!==null){var Q=v.stateNode;try{var ue=A.shared.hiddenCallbacks;if(ue!==null)for(A.shared.hiddenCallbacks=null,A=0;A<ue.length;A++)pS(ue[A],Q)}catch(_e){pr(v,v.return,_e)}}f&&U&64&&TC(D),Qd(D,D.return);break;case 27:kC(D);case 26:case 5:ai(A,D,f),f&&v===null&&U&4&&_C(D),Qd(D,D.return);break;case 12:ai(A,D,f);break;case 31:ai(A,D,f),f&&U&4&&LC(A,D);break;case 13:ai(A,D,f),f&&U&4&&BC(A,D);break;case 22:D.memoizedState===null&&ai(A,D,f),Qd(D,D.return);break;case 30:break;default:ai(A,D,f)}c=c.sibling}}function My(s,c){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(s=c.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&Fd(f))}function Iy(s,c){s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Fd(s))}function Ws(s,c,f,v){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)jC(s,c,f,v),c=c.sibling}function jC(s,c,f,v){var A=c.flags;switch(c.tag){case 0:case 11:case 15:Ws(s,c,f,v),A&2048&&Zd(9,c);break;case 1:Ws(s,c,f,v);break;case 3:Ws(s,c,f,v),A&2048&&(s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Fd(s)));break;case 12:if(A&2048){Ws(s,c,f,v),s=c.stateNode;try{var D=c.memoizedProps,U=D.id,Q=D.onPostCommit;typeof Q=="function"&&Q(U,c.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ue){pr(c,c.return,ue)}}else Ws(s,c,f,v);break;case 31:Ws(s,c,f,v);break;case 13:Ws(s,c,f,v);break;case 23:break;case 22:D=c.stateNode,U=c.alternate,c.memoizedState!==null?D._visibility&2?Ws(s,c,f,v):Jd(s,c):D._visibility&2?Ws(s,c,f,v):(D._visibility|=2,fu(s,c,f,v,(c.subtreeFlags&10256)!==0||!1)),A&2048&&My(U,c);break;case 24:Ws(s,c,f,v),A&2048&&Iy(c.alternate,c);break;default:Ws(s,c,f,v)}}function fu(s,c,f,v,A){for(A=A&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var D=s,U=c,Q=f,ue=v,_e=U.flags;switch(U.tag){case 0:case 11:case 15:fu(D,U,Q,ue,A),Zd(8,U);break;case 23:break;case 22:var He=U.stateNode;U.memoizedState!==null?He._visibility&2?fu(D,U,Q,ue,A):Jd(D,U):(He._visibility|=2,fu(D,U,Q,ue,A)),A&&_e&2048&&My(U.alternate,U);break;case 24:fu(D,U,Q,ue,A),A&&_e&2048&&Iy(U.alternate,U);break;default:fu(D,U,Q,ue,A)}c=c.sibling}}function Jd(s,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=s,v=c,A=v.flags;switch(v.tag){case 22:Jd(f,v),A&2048&&My(v.alternate,v);break;case 24:Jd(f,v),A&2048&&Iy(v.alternate,v);break;default:Jd(f,v)}c=c.sibling}}var em=8192;function hu(s,c,f){if(s.subtreeFlags&em)for(s=s.child;s!==null;)zC(s,c,f),s=s.sibling}function zC(s,c,f){switch(s.tag){case 26:hu(s,c,f),s.flags&em&&s.memoizedState!==null&&G9(f,Xs,s.memoizedState,s.memoizedProps);break;case 5:hu(s,c,f);break;case 3:case 4:var v=Xs;Xs=W0(s.stateNode.containerInfo),hu(s,c,f),Xs=v;break;case 22:s.memoizedState===null&&(v=s.alternate,v!==null&&v.memoizedState!==null?(v=em,em=16777216,hu(s,c,f),em=v):hu(s,c,f));break;default:hu(s,c,f)}}function VC(s){var c=s.alternate;if(c!==null&&(s=c.child,s!==null)){c.child=null;do c=s.sibling,s.sibling=null,s=c;while(s!==null)}}function tm(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var v=c[f];Ya=v,$C(v,s)}VC(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)HC(s),s=s.sibling}function HC(s){switch(s.tag){case 0:case 11:case 15:tm(s),s.flags&2048&&ro(9,s,s.return);break;case 3:tm(s);break;case 12:tm(s);break;case 22:var c=s.stateNode;s.memoizedState!==null&&c._visibility&2&&(s.return===null||s.return.tag!==13)?(c._visibility&=-3,L0(s)):tm(s);break;default:tm(s)}}function L0(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var v=c[f];Ya=v,$C(v,s)}VC(s)}for(s=s.child;s!==null;){switch(c=s,c.tag){case 0:case 11:case 15:ro(8,c,c.return),L0(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,L0(c));break;default:L0(c)}s=s.sibling}}function $C(s,c){for(;Ya!==null;){var f=Ya;switch(f.tag){case 0:case 11:case 15:ro(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var v=f.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Fd(f.memoizedState.cache)}if(v=f.child,v!==null)v.return=f,Ya=v;else e:for(f=s;Ya!==null;){v=Ya;var A=v.sibling,D=v.return;if(IC(v),v===f){Ya=null;break e}if(A!==null){A.return=D,Ya=A;break e}Ya=D}}}var i9={getCacheForType:function(s){var c=an(Sa),f=c.data.get(s);return f===void 0&&(f=s(),c.data.set(s,f)),f},cacheSignal:function(){return an(Sa).controller.signal}},o9=typeof WeakMap=="function"?WeakMap:Map,cr=0,_r=null,Gt=null,Wt=0,gr=0,Zn=null,ao=!1,gu=!1,Ry=!1,ni=0,ia=0,no=0,cc=0,Ly=0,Qn=0,pu=0,rm=null,Pn=null,By=!1,B0=0,qC=0,F0=1/0,U0=null,so=null,Fa=0,lo=null,yu=null,si=0,Fy=0,Uy=null,GC=null,am=0,jy=null;function Jn(){return(cr&2)!==0&&Wt!==0?Wt&-Wt:J.T!==null?Gy():qa()}function YC(){if(Qn===0)if((Wt&536870912)===0||Zt){var s=bt;bt<<=1,(bt&3932160)===0&&(bt=262144),Qn=s}else Qn=536870912;return s=Wn.current,s!==null&&(s.flags|=32),Qn}function Mn(s,c,f){(s===_r&&(gr===2||gr===9)||s.cancelPendingCommit!==null)&&(xu(s,0),io(s,Wt,Qn,!1)),ds(s,f),((cr&2)===0||s!==_r)&&(s===_r&&((cr&2)===0&&(cc|=f),ia===4&&io(s,Wt,Qn,!1)),wl(s))}function XC(s,c,f){if((cr&6)!==0)throw Error(a(327));var v=!f&&(c&127)===0&&(c&s.expiredLanes)===0||fe(s,c),A=v?d9(s,c):Vy(s,c,!0),D=v;do{if(A===0){gu&&!v&&io(s,c,0,!1);break}else{if(f=s.current.alternate,D&&!c9(f)){A=Vy(s,c,!1),D=!1;continue}if(A===2){if(D=c,s.errorRecoveryDisabledLanes&D)var U=0;else U=s.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){c=U;e:{var Q=s;A=rm;var ue=Q.current.memoizedState.isDehydrated;if(ue&&(xu(Q,U).flags|=256),U=Vy(Q,U,!1),U!==2){if(Ry&&!ue){Q.errorRecoveryDisabledLanes|=D,cc|=D,A=4;break e}D=Pn,Pn=A,D!==null&&(Pn===null?Pn=D:Pn.push.apply(Pn,D))}A=U}if(D=!1,A!==2)continue}}if(A===1){xu(s,0),io(s,c,0,!0);break}e:{switch(v=s,D=A,D){case 0:case 1:throw Error(a(345));case 4:if((c&4194048)!==c)break;case 6:io(v,c,Qn,!ao);break e;case 2:Pn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((c&62914560)===c&&(A=B0+300-mt(),10<A)){if(io(v,c,Qn,!ao),Lr(v,0,!0)!==0)break e;si=c,v.timeoutHandle=C3(WC.bind(null,v,f,Pn,U0,By,c,Qn,cc,pu,ao,D,"Throttled",-0,0),A);break e}WC(v,f,Pn,U0,By,c,Qn,cc,pu,ao,D,null,-0,0)}}break}while(!0);wl(s)}function WC(s,c,f,v,A,D,U,Q,ue,_e,He,Ye,ke,Be){if(s.timeoutHandle=-1,Ye=c.subtreeFlags,Ye&8192||(Ye&16785408)===16785408){Ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:An},zC(c,D,Ye);var ht=(D&62914560)===D?B0-mt():(D&4194048)===D?qC-mt():0;if(ht=Y9(Ye,ht),ht!==null){si=D,s.cancelPendingCommit=ht(a3.bind(null,s,c,D,f,v,A,U,Q,ue,He,Ye,null,ke,Be)),io(s,D,U,!_e);return}}a3(s,c,D,f,v,A,U,Q,ue)}function c9(s){for(var c=s;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var v=0;v<f.length;v++){var A=f[v],D=A.getSnapshot;A=A.value;try{if(!w(D(),A))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function io(s,c,f,v){c&=~Ly,c&=~cc,s.suspendedLanes|=c,s.pingedLanes&=~c,v&&(s.warmLanes|=c),v=s.expirationTimes;for(var A=c;0<A;){var D=31-st(A),U=1<<D;v[D]=-1,A&=~U}f!==0&&Vc(s,f,c)}function j0(){return(cr&6)===0?(nm(0),!1):!0}function zy(){if(Gt!==null){if(gr===0)var s=Gt.return;else s=Gt,Xl=ec=null,ay(s),ou=null,jd=0,s=Gt;for(;s!==null;)AC(s.alternate,s),s=s.return;Gt=null}}function xu(s,c){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,_9(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),si=0,zy(),_r=s,Gt=f=Gl(s.current,null),Wt=c,gr=0,Zn=null,ao=!1,gu=fe(s,c),Ry=!1,pu=Qn=Ly=cc=no=ia=0,Pn=rm=null,By=!1,(c&8)!==0&&(c|=c&32);var v=s.entangledLanes;if(v!==0)for(s=s.entanglements,v&=c;0<v;){var A=31-st(v),D=1<<A;c|=s[A],v&=~D}return ni=c,i0(),f}function KC(s,c){Bt=null,J.H=Xd,c===iu||c===g0?(c=mS(),gr=3):c===q1?(c=mS(),gr=4):gr=c===by?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Zn=c,Gt===null&&(ia=1,_0(s,gs(c,s.current)))}function ZC(){var s=Wn.current;return s===null?!0:(Wt&4194048)===Wt?bs===null:(Wt&62914560)===Wt||(Wt&536870912)!==0?s===bs:!1}function QC(){var s=J.H;return J.H=Xd,s===null?Xd:s}function JC(){var s=J.A;return J.A=i9,s}function z0(){ia=4,ao||(Wt&4194048)!==Wt&&Wn.current!==null||(gu=!0),(no&134217727)===0&&(cc&134217727)===0||_r===null||io(_r,Wt,Qn,!1)}function Vy(s,c,f){var v=cr;cr|=2;var A=QC(),D=JC();(_r!==s||Wt!==c)&&(U0=null,xu(s,c)),c=!1;var U=ia;e:do try{if(gr!==0&&Gt!==null){var Q=Gt,ue=Zn;switch(gr){case 8:zy(),U=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(c=!0);var _e=gr;if(gr=0,Zn=null,bu(s,Q,ue,_e),f&&gu){U=0;break e}break;default:_e=gr,gr=0,Zn=null,bu(s,Q,ue,_e)}}u9(),U=ia;break}catch(He){KC(s,He)}while(!0);return c&&s.shellSuspendCounter++,Xl=ec=null,cr=v,J.H=A,J.A=D,Gt===null&&(_r=null,Wt=0,i0()),U}function u9(){for(;Gt!==null;)e3(Gt)}function d9(s,c){var f=cr;cr|=2;var v=QC(),A=JC();_r!==s||Wt!==c?(U0=null,F0=mt()+500,xu(s,c)):gu=fe(s,c);e:do try{if(gr!==0&&Gt!==null){c=Gt;var D=Zn;t:switch(gr){case 1:gr=0,Zn=null,bu(s,c,D,1);break;case 2:case 9:if(uS(D)){gr=0,Zn=null,t3(c);break}c=function(){gr!==2&&gr!==9||_r!==s||(gr=7),wl(s)},D.then(c,c);break e;case 3:gr=7;break e;case 4:gr=5;break e;case 7:uS(D)?(gr=0,Zn=null,t3(c)):(gr=0,Zn=null,bu(s,c,D,7));break;case 5:var U=null;switch(Gt.tag){case 26:U=Gt.memoizedState;case 5:case 27:var Q=Gt;if(U?j3(U):Q.stateNode.complete){gr=0,Zn=null;var ue=Q.sibling;if(ue!==null)Gt=ue;else{var _e=Q.return;_e!==null?(Gt=_e,V0(_e)):Gt=null}break t}}gr=0,Zn=null,bu(s,c,D,5);break;case 6:gr=0,Zn=null,bu(s,c,D,6);break;case 8:zy(),ia=6;break e;default:throw Error(a(462))}}m9();break}catch(He){KC(s,He)}while(!0);return Xl=ec=null,J.H=v,J.A=A,cr=f,Gt!==null?0:(_r=null,Wt=0,i0(),ia)}function m9(){for(;Gt!==null&&!lt();)e3(Gt)}function e3(s){var c=SC(s.alternate,s,ni);s.memoizedProps=s.pendingProps,c===null?V0(s):Gt=c}function t3(s){var c=s,f=c.alternate;switch(c.tag){case 15:case 0:c=xC(f,c,c.pendingProps,c.type,void 0,Wt);break;case 11:c=xC(f,c,c.pendingProps,c.type.render,c.ref,Wt);break;case 5:ay(c);default:AC(f,c),c=Gt=JN(c,ni),c=SC(f,c,ni)}s.memoizedProps=s.pendingProps,c===null?V0(s):Gt=c}function bu(s,c,f,v){Xl=ec=null,ay(c),ou=null,jd=0;var A=c.return;try{if(e9(s,A,c,f,Wt)){ia=1,_0(s,gs(f,s.current)),Gt=null;return}}catch(D){if(A!==null)throw Gt=A,D;ia=1,_0(s,gs(f,s.current)),Gt=null;return}c.flags&32768?(Zt||v===1?s=!0:gu||(Wt&536870912)!==0?s=!1:(ao=s=!0,(v===2||v===9||v===3||v===6)&&(v=Wn.current,v!==null&&v.tag===13&&(v.flags|=16384))),r3(c,s)):V0(c)}function V0(s){var c=s;do{if((c.flags&32768)!==0){r3(c,ao);return}s=c.return;var f=a9(c.alternate,c,ni);if(f!==null){Gt=f;return}if(c=c.sibling,c!==null){Gt=c;return}Gt=c=s}while(c!==null);ia===0&&(ia=5)}function r3(s,c){do{var f=n9(s.alternate,s);if(f!==null){f.flags&=32767,Gt=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(s=s.sibling,s!==null)){Gt=s;return}Gt=s=f}while(s!==null);ia=6,Gt=null}function a3(s,c,f,v,A,D,U,Q,ue){s.cancelPendingCommit=null;do H0();while(Fa!==0);if((cr&6)!==0)throw Error(a(327));if(c!==null){if(c===s.current)throw Error(a(177));if(D=c.lanes|c.childLanes,D|=D1,Nn(s,f,D,U,Q,ue),s===_r&&(Gt=_r=null,Wt=0),yu=c,lo=s,si=f,Fy=D,Uy=A,GC=v,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,p9(ut,function(){return o3(),null})):(s.callbackNode=null,s.callbackPriority=0),v=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||v){v=J.T,J.T=null,A=se.p,se.p=2,U=cr,cr|=4;try{s9(s,c,f)}finally{cr=U,se.p=A,J.T=v}}Fa=1,n3(),s3(),l3()}}function n3(){if(Fa===1){Fa=0;var s=lo,c=yu,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=J.T,J.T=null;var v=se.p;se.p=2;var A=cr;cr|=4;try{FC(c,s);var D=ex,U=X(s.containerInfo),Q=D.focusedElem,ue=D.selectionRange;if(U!==Q&&Q&&Q.ownerDocument&&B(Q.ownerDocument.documentElement,Q)){if(ue!==null&&Z(Q)){var _e=ue.start,He=ue.end;if(He===void 0&&(He=_e),"selectionStart"in Q)Q.selectionStart=_e,Q.selectionEnd=Math.min(He,Q.value.length);else{var Ye=Q.ownerDocument||document,ke=Ye&&Ye.defaultView||window;if(ke.getSelection){var Be=ke.getSelection(),ht=Q.textContent.length,Ot=Math.min(ue.start,ht),Nr=ue.end===void 0?Ot:Math.min(ue.end,ht);!Be.extend&&Ot>Nr&&(U=Nr,Nr=Ot,Ot=U);var Se=M(Q,Ot),ye=M(Q,Nr);if(Se&&ye&&(Be.rangeCount!==1||Be.anchorNode!==Se.node||Be.anchorOffset!==Se.offset||Be.focusNode!==ye.node||Be.focusOffset!==ye.offset)){var Oe=Ye.createRange();Oe.setStart(Se.node,Se.offset),Be.removeAllRanges(),Ot>Nr?(Be.addRange(Oe),Be.extend(ye.node,ye.offset)):(Oe.setEnd(ye.node,ye.offset),Be.addRange(Oe))}}}}for(Ye=[],Be=Q;Be=Be.parentNode;)Be.nodeType===1&&Ye.push({element:Be,left:Be.scrollLeft,top:Be.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<Ye.length;Q++){var Ge=Ye[Q];Ge.element.scrollLeft=Ge.left,Ge.element.scrollTop=Ge.top}}th=!!Jy,ex=Jy=null}finally{cr=A,se.p=v,J.T=f}}s.current=c,Fa=2}}function s3(){if(Fa===2){Fa=0;var s=lo,c=yu,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=J.T,J.T=null;var v=se.p;se.p=2;var A=cr;cr|=4;try{MC(s,c.alternate,c)}finally{cr=A,se.p=v,J.T=f}}Fa=3}}function l3(){if(Fa===4||Fa===3){Fa=0,Fe();var s=lo,c=yu,f=si,v=GC;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Fa=5:(Fa=0,yu=lo=null,i3(s,s.pendingLanes));var A=s.pendingLanes;if(A===0&&(so=null),Vn(f),c=c.stateNode,xe&&typeof xe.onCommitFiberRoot=="function")try{xe.onCommitFiberRoot(kt,c,void 0,(c.current.flags&128)===128)}catch{}if(v!==null){c=J.T,A=se.p,se.p=2,J.T=null;try{for(var D=s.onRecoverableError,U=0;U<v.length;U++){var Q=v[U];D(Q.value,{componentStack:Q.stack})}}finally{J.T=c,se.p=A}}(si&3)!==0&&H0(),wl(s),A=s.pendingLanes,(f&261930)!==0&&(A&42)!==0?s===jy?am++:(am=0,jy=s):am=0,nm(0)}}function i3(s,c){(s.pooledCacheLanes&=c)===0&&(c=s.pooledCache,c!=null&&(s.pooledCache=null,Fd(c)))}function H0(){return n3(),s3(),l3(),o3()}function o3(){if(Fa!==5)return!1;var s=lo,c=Fy;Fy=0;var f=Vn(si),v=J.T,A=se.p;try{se.p=32>f?32:f,J.T=null,f=Uy,Uy=null;var D=lo,U=si;if(Fa=0,yu=lo=null,si=0,(cr&6)!==0)throw Error(a(331));var Q=cr;if(cr|=4,HC(D.current),jC(D,D.current,U,f),cr=Q,nm(0,!1),xe&&typeof xe.onPostCommitFiberRoot=="function")try{xe.onPostCommitFiberRoot(kt,D)}catch{}return!0}finally{se.p=A,J.T=v,i3(s,c)}}function c3(s,c,f){c=gs(f,c),c=xy(s.stateNode,c,2),s=Ji(s,c,2),s!==null&&(ds(s,2),wl(s))}function pr(s,c,f){if(s.tag===3)c3(s,s,f);else for(;c!==null;){if(c.tag===3){c3(c,s,f);break}else if(c.tag===1){var v=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(so===null||!so.has(v))){s=gs(f,s),f=uC(2),v=Ji(c,f,2),v!==null&&(dC(f,v,c,s),ds(v,2),wl(v));break}}c=c.return}}function Hy(s,c,f){var v=s.pingCache;if(v===null){v=s.pingCache=new o9;var A=new Set;v.set(c,A)}else A=v.get(c),A===void 0&&(A=new Set,v.set(c,A));A.has(f)||(Ry=!0,A.add(f),s=f9.bind(null,s,c,f),c.then(s,s))}function f9(s,c,f){var v=s.pingCache;v!==null&&v.delete(c),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,_r===s&&(Wt&f)===f&&(ia===4||ia===3&&(Wt&62914560)===Wt&&300>mt()-B0?(cr&2)===0&&xu(s,0):Ly|=f,pu===Wt&&(pu=0)),wl(s)}function u3(s,c){c===0&&(c=ot()),s=Zo(s,c),s!==null&&(ds(s,c),wl(s))}function h9(s){var c=s.memoizedState,f=0;c!==null&&(f=c.retryLane),u3(s,f)}function g9(s,c){var f=0;switch(s.tag){case 31:case 13:var v=s.stateNode,A=s.memoizedState;A!==null&&(f=A.retryLane);break;case 19:v=s.stateNode;break;case 22:v=s.stateNode._retryCache;break;default:throw Error(a(314))}v!==null&&v.delete(c),u3(s,f)}function p9(s,c){return pt(s,c)}var $0=null,vu=null,$y=!1,q0=!1,qy=!1,oo=0;function wl(s){s!==vu&&s.next===null&&(vu===null?$0=vu=s:vu=vu.next=s),q0=!0,$y||($y=!0,x9())}function nm(s,c){if(!qy&&q0){qy=!0;do for(var f=!1,v=$0;v!==null;){if(s!==0){var A=v.pendingLanes;if(A===0)var D=0;else{var U=v.suspendedLanes,Q=v.pingedLanes;D=(1<<31-st(42|s)+1)-1,D&=A&~(U&~Q),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(f=!0,h3(v,D))}else D=Wt,D=Lr(v,v===_r?D:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(D&3)===0||fe(v,D)||(f=!0,h3(v,D));v=v.next}while(f);qy=!1}}function y9(){d3()}function d3(){q0=$y=!1;var s=0;oo!==0&&O9()&&(s=oo);for(var c=mt(),f=null,v=$0;v!==null;){var A=v.next,D=m3(v,c);D===0?(v.next=null,f===null?$0=A:f.next=A,A===null&&(vu=f)):(f=v,(s!==0||(D&3)!==0)&&(q0=!0)),v=A}Fa!==0&&Fa!==5||nm(s),oo!==0&&(oo=0)}function m3(s,c){for(var f=s.suspendedLanes,v=s.pingedLanes,A=s.expirationTimes,D=s.pendingLanes&-62914561;0<D;){var U=31-st(D),Q=1<<U,ue=A[U];ue===-1?((Q&f)===0||(Q&v)!==0)&&(A[U]=De(Q,c)):ue<=c&&(s.expiredLanes|=Q),D&=~Q}if(c=_r,f=Wt,f=Lr(s,s===c?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v=s.callbackNode,f===0||s===c&&(gr===2||gr===9)||s.cancelPendingCommit!==null)return v!==null&&v!==null&&We(v),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||fe(s,f)){if(c=f&-f,c===s.callbackPriority)return c;switch(v!==null&&We(v),Vn(f)){case 2:case 8:f=tr;break;case 32:f=ut;break;case 268435456:f=vr;break;default:f=ut}return v=f3.bind(null,s),f=pt(f,v),s.callbackPriority=c,s.callbackNode=f,c}return v!==null&&v!==null&&We(v),s.callbackPriority=2,s.callbackNode=null,2}function f3(s,c){if(Fa!==0&&Fa!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(H0()&&s.callbackNode!==f)return null;var v=Wt;return v=Lr(s,s===_r?v:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v===0?null:(XC(s,v,c),m3(s,mt()),s.callbackNode!=null&&s.callbackNode===f?f3.bind(null,s):null)}function h3(s,c){if(H0())return null;XC(s,c,!0)}function x9(){D9(function(){(cr&6)!==0?pt(er,y9):d3()})}function Gy(){if(oo===0){var s=su;s===0&&(s=ta,ta<<=1,(ta&261888)===0&&(ta=256)),oo=s}return oo}function g3(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ui(""+s)}function p3(s,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,s.id&&f.setAttribute("form",s.id),c.parentNode.insertBefore(f,c),s=new FormData(s),f.parentNode.removeChild(f),s}function b9(s,c,f,v,A){if(c==="submit"&&f&&f.stateNode===A){var D=g3((A[rr]||null).action),U=v.submitter;U&&(c=(c=U[rr]||null)?g3(c.formAction):U.getAttribute("formAction"),c!==null&&(D=c,U=null));var Q=new Ra("action","action",null,v,A);s.push({event:Q,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(oo!==0){var ue=U?p3(A,U):new FormData(A);my(f,{pending:!0,data:ue,method:A.method,action:D},null,ue)}}else typeof D=="function"&&(Q.preventDefault(),ue=U?p3(A,U):new FormData(A),my(f,{pending:!0,data:ue,method:A.method,action:D},D,ue))},currentTarget:A}]})}}for(var Yy=0;Yy<Rd.length;Yy++){var Xy=Rd[Yy],v9=Xy.toLowerCase(),E9=Xy[0].toUpperCase()+Xy.slice(1);Ys(v9,"on"+E9)}Ys(On,"onAnimationEnd"),Ys(tn,"onAnimationIteration"),Ys(hr,"onAnimationStart"),Ys("dblclick","onDoubleClick"),Ys("focusin","onFocus"),Ys("focusout","onBlur"),Ys(Ba,"onTransitionRun"),Ys(yn,"onTransitionStart"),Ys(Gi,"onTransitionCancel"),Ys(ql,"onTransitionEnd"),Hn("onMouseEnter",["mouseout","mouseover"]),Hn("onMouseLeave",["mouseout","mouseover"]),Hn("onPointerEnter",["pointerout","pointerover"]),Hn("onPointerLeave",["pointerout","pointerover"]),mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sm));function y3(s,c){c=(c&4)!==0;for(var f=0;f<s.length;f++){var v=s[f],A=v.event;v=v.listeners;e:{var D=void 0;if(c)for(var U=v.length-1;0<=U;U--){var Q=v[U],ue=Q.instance,_e=Q.currentTarget;if(Q=Q.listener,ue!==D&&A.isPropagationStopped())break e;D=Q,A.currentTarget=_e;try{D(A)}catch(He){l0(He)}A.currentTarget=null,D=ue}else for(U=0;U<v.length;U++){if(Q=v[U],ue=Q.instance,_e=Q.currentTarget,Q=Q.listener,ue!==D&&A.isPropagationStopped())break e;D=Q,A.currentTarget=_e;try{D(A)}catch(He){l0(He)}A.currentTarget=null,D=ue}}}}function Yt(s,c){var f=c[fl];f===void 0&&(f=c[fl]=new Set);var v=s+"__bubble";f.has(v)||(x3(c,s,2,!1),f.add(v))}function Wy(s,c,f){var v=0;c&&(v|=4),x3(f,s,v,c)}var G0="_reactListening"+Math.random().toString(36).slice(2);function Ky(s){if(!s[G0]){s[G0]=!0,Ke.forEach(function(f){f!=="selectionchange"&&(w9.has(f)||Wy(f,!1,s),Wy(f,!0,s))});var c=s.nodeType===9?s:s.ownerDocument;c===null||c[G0]||(c[G0]=!0,Wy("selectionchange",!1,c))}}function x3(s,c,f,v){switch(Y3(c)){case 2:var A=K9;break;case 8:A=Z9;break;default:A=dx}f=A.bind(null,c,f,s),A=void 0,!Od||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(A=!0),v?A!==void 0?s.addEventListener(c,f,{capture:!0,passive:A}):s.addEventListener(c,f,!0):A!==void 0?s.addEventListener(c,f,{passive:A}):s.addEventListener(c,f,!1)}function Zy(s,c,f,v,A){var D=v;if((c&1)===0&&(c&2)===0&&v!==null)e:for(;;){if(v===null)return;var U=v.tag;if(U===3||U===4){var Q=v.stateNode.containerInfo;if(Q===A)break;if(U===4)for(U=v.return;U!==null;){var ue=U.tag;if((ue===3||ue===4)&&U.stateNode.containerInfo===A)return;U=U.return}for(;Q!==null;){if(U=Br(Q),U===null)return;if(ue=U.tag,ue===5||ue===6||ue===26||ue===27){v=D=U;continue e}Q=Q.parentNode}}v=v.return}Wf(function(){var _e=D,He=Td(f),Ye=[];e:{var ke=s0.get(s);if(ke!==void 0){var Be=Ra,ht=s;switch(s){case"keypress":if(gl(f)===0)break e;case"keydown":case"keyup":Be=Kc;break;case"focusin":ht="focus",Be=kd;break;case"focusout":ht="blur",Be=kd;break;case"beforeblur":case"afterblur":Be=kd;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=or;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=Xc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=T1;break;case On:case tn:case hr:Be=Ut;break;case ql:Be=zl;break;case"scroll":case"scrollend":Be=Kf;break;case"wheel":Be=O1;break;case"copy":case"cut":case"paste":Be=Wc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=fr;break;case"toggle":case"beforetoggle":Be=Md}var Ot=(c&4)!==0,Nr=!Ot&&(s==="scroll"||s==="scrollend"),Se=Ot?ke!==null?ke+"Capture":null:ke;Ot=[];for(var ye=_e,Oe;ye!==null;){var Ge=ye;if(Oe=Ge.stateNode,Ge=Ge.tag,Ge!==5&&Ge!==26&&Ge!==27||Oe===null||Se===null||(Ge=Dt(ye,Se),Ge!=null&&Ot.push(lm(ye,Ge,Oe))),Nr)break;ye=ye.return}0<Ot.length&&(ke=new Be(ke,ht,null,f,He),Ye.push({event:ke,listeners:Ot}))}}if((c&7)===0){e:{if(ke=s==="mouseover"||s==="pointerover",Be=s==="mouseout"||s==="pointerout",ke&&f!==Ho&&(ht=f.relatedTarget||f.fromElement)&&(Br(ht)||ht[hn]))break e;if((Be||ke)&&(ke=He.window===He?He:(ke=He.ownerDocument)?ke.defaultView||ke.parentWindow:window,Be?(ht=f.relatedTarget||f.toElement,Be=_e,ht=ht?Br(ht):null,ht!==null&&(Nr=o(ht),Ot=ht.tag,ht!==Nr||Ot!==5&&Ot!==27&&Ot!==6)&&(ht=null)):(Be=null,ht=_e),Be!==ht)){if(Ot=or,Ge="onMouseLeave",Se="onMouseEnter",ye="mouse",(s==="pointerout"||s==="pointerover")&&(Ot=fr,Ge="onPointerLeave",Se="onPointerEnter",ye="pointer"),Nr=Be==null?ke:Ve(Be),Oe=ht==null?ke:Ve(ht),ke=new Ot(Ge,ye+"leave",Be,f,He),ke.target=Nr,ke.relatedTarget=Oe,Ge=null,Br(He)===_e&&(Ot=new Ot(Se,ye+"enter",ht,f,He),Ot.target=Oe,Ot.relatedTarget=Nr,Ge=Ot),Nr=Ge,Be&&ht)t:{for(Ot=N9,Se=Be,ye=ht,Oe=0,Ge=Se;Ge;Ge=Ot(Ge))Oe++;Ge=0;for(var Nt=ye;Nt;Nt=Ot(Nt))Ge++;for(;0<Oe-Ge;)Se=Ot(Se),Oe--;for(;0<Ge-Oe;)ye=Ot(ye),Ge--;for(;Oe--;){if(Se===ye||ye!==null&&Se===ye.alternate){Ot=Se;break t}Se=Ot(Se),ye=Ot(ye)}Ot=null}else Ot=null;Be!==null&&b3(Ye,ke,Be,Ot,!1),ht!==null&&Nr!==null&&b3(Ye,Nr,ht,Ot,!0)}}e:{if(ke=_e?Ve(_e):window,Be=ke.nodeName&&ke.nodeName.toLowerCase(),Be==="select"||Be==="input"&&ke.type==="file")var sr=Yn;else if(Id(ke))if(n0)sr=y;else{sr=u;var vt=i}else Be=ke.nodeName,!Be||Be.toLowerCase()!=="input"||ke.type!=="checkbox"&&ke.type!=="radio"?_e&&Ar(_e.elementType)&&(sr=Yn):sr=m;if(sr&&(sr=sr(s,_e))){Gn(Ye,sr,f,He);break e}vt&&vt(s,ke,_e),s==="focusout"&&_e&&ke.type==="number"&&_e.memoizedProps.value!=null&&re(ke,"number",ke.value)}switch(vt=_e?Ve(_e):window,s){case"focusin":(Id(vt)||vt.contentEditable==="true")&&(he=vt,pe=_e,Ae=null);break;case"focusout":Ae=pe=he=null;break;case"mousedown":Pe=!0;break;case"contextmenu":case"mouseup":case"dragend":Pe=!1,rt(Ye,f,He);break;case"selectionchange":if(ne)break;case"keydown":case"keyup":rt(Ye,f,He)}var jt;if(Go)e:{switch(s){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else qi?a0(s,f)&&(Kt="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(Kt="onCompositionStart");Kt&&(r0&&f.locale!=="ko"&&(qi||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&qi&&(jt=ji()):(qs=He,Gs="value"in qs?qs.value:qs.textContent,qi=!0)),vt=Y0(_e,Kt),0<vt.length&&(Kt=new Jf(Kt,s,null,f,He),Ye.push({event:Kt,listeners:vt}),jt?Kt.data=jt:(jt=$i(f),jt!==null&&(Kt.data=jt)))),(jt=t0?xl(s,f):Qc(s,f))&&(Kt=Y0(_e,"onBeforeInput"),0<Kt.length&&(vt=new Jf("onBeforeInput","beforeinput",null,f,He),Ye.push({event:vt,listeners:Kt}),vt.data=jt)),b9(Ye,s,_e,f,He)}y3(Ye,c)})}function lm(s,c,f){return{instance:s,listener:c,currentTarget:f}}function Y0(s,c){for(var f=c+"Capture",v=[];s!==null;){var A=s,D=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||D===null||(A=Dt(s,f),A!=null&&v.unshift(lm(s,A,D)),A=Dt(s,c),A!=null&&v.push(lm(s,A,D))),s.tag===3)return v;s=s.return}return[]}function N9(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function b3(s,c,f,v,A){for(var D=c._reactName,U=[];f!==null&&f!==v;){var Q=f,ue=Q.alternate,_e=Q.stateNode;if(Q=Q.tag,ue!==null&&ue===v)break;Q!==5&&Q!==26&&Q!==27||_e===null||(ue=_e,A?(_e=Dt(f,D),_e!=null&&U.unshift(lm(f,_e,ue))):A||(_e=Dt(f,D),_e!=null&&U.push(lm(f,_e,ue)))),f=f.return}U.length!==0&&s.push({event:c,listeners:U})}var S9=/\r\n?/g,C9=/\u0000|\uFFFD/g;function v3(s){return(typeof s=="string"?s:""+s).replace(S9,`
`).replace(C9,"")}function E3(s,c){return c=v3(c),v3(s)===c}function wr(s,c,f,v,A,D){switch(f){case"children":typeof v=="string"?c==="body"||c==="textarea"&&v===""||Fi(s,v):(typeof v=="number"||typeof v=="bigint")&&c!=="body"&&Fi(s,""+v);break;case"className":Li(s,"class",v);break;case"tabIndex":Li(s,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Li(s,f,v);break;case"style":wt(s,v,D);break;case"data":if(c!=="object"){Li(s,"data",v);break}case"src":case"href":if(v===""&&(c!=="a"||f!=="href")){s.removeAttribute(f);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(f);break}v=Ui(""+v),s.setAttribute(f,v);break;case"action":case"formAction":if(typeof v=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(f==="formAction"?(c!=="input"&&wr(s,c,"name",A.name,A,null),wr(s,c,"formEncType",A.formEncType,A,null),wr(s,c,"formMethod",A.formMethod,A,null),wr(s,c,"formTarget",A.formTarget,A,null)):(wr(s,c,"encType",A.encType,A,null),wr(s,c,"method",A.method,A,null),wr(s,c,"target",A.target,A,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(f);break}v=Ui(""+v),s.setAttribute(f,v);break;case"onClick":v!=null&&(s.onclick=An);break;case"onScroll":v!=null&&Yt("scroll",s);break;case"onScrollEnd":v!=null&&Yt("scrollend",s);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(a(61));if(f=v.__html,f!=null){if(A.children!=null)throw Error(a(60));s.innerHTML=f}}break;case"multiple":s.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":s.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){s.removeAttribute("xlink:href");break}f=Ui(""+v),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(f,""+v):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":v===!0?s.setAttribute(f,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(f,v):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?s.setAttribute(f,v):s.removeAttribute(f);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?s.removeAttribute(f):s.setAttribute(f,v);break;case"popover":Yt("beforetoggle",s),Yt("toggle",s),Ri(s,"popover",v);break;case"xlinkActuate":$n(s,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":$n(s,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":$n(s,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":$n(s,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":$n(s,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":$n(s,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":$n(s,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":$n(s,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":$n(s,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Ri(s,"is",v);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Xf.get(f)||f,Ri(s,f,v))}}function Qy(s,c,f,v,A,D){switch(f){case"style":wt(s,v,D);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(a(61));if(f=v.__html,f!=null){if(A.children!=null)throw Error(a(60));s.innerHTML=f}}break;case"children":typeof v=="string"?Fi(s,v):(typeof v=="number"||typeof v=="bigint")&&Fi(s,""+v);break;case"onScroll":v!=null&&Yt("scroll",s);break;case"onScrollEnd":v!=null&&Yt("scrollend",s);break;case"onClick":v!=null&&(s.onclick=An);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yf.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(A=f.endsWith("Capture"),c=f.slice(2,A?f.length-7:void 0),D=s[rr]||null,D=D!=null?D[f]:null,typeof D=="function"&&s.removeEventListener(c,D,A),typeof v=="function")){typeof D!="function"&&D!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(c,v,A);break e}f in s?s[f]=v:v===!0?s.setAttribute(f,""):Ri(s,f,v)}}}function sn(s,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",s),Yt("load",s);var v=!1,A=!1,D;for(D in f)if(f.hasOwnProperty(D)){var U=f[D];if(U!=null)switch(D){case"src":v=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,c));default:wr(s,c,D,U,f,null)}}A&&wr(s,c,"srcSet",f.srcSet,f,null),v&&wr(s,c,"src",f.src,f,null);return;case"input":Yt("invalid",s);var Q=D=U=A=null,ue=null,_e=null;for(v in f)if(f.hasOwnProperty(v)){var He=f[v];if(He!=null)switch(v){case"name":A=He;break;case"type":U=He;break;case"checked":ue=He;break;case"defaultChecked":_e=He;break;case"value":D=He;break;case"defaultValue":Q=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(a(137,c));break;default:wr(s,c,v,He,f,null)}}Te(s,D,Q,ue,_e,U,A,!1);return;case"select":Yt("invalid",s),v=U=D=null;for(A in f)if(f.hasOwnProperty(A)&&(Q=f[A],Q!=null))switch(A){case"value":D=Q;break;case"defaultValue":U=Q;break;case"multiple":v=Q;default:wr(s,c,A,Q,f,null)}c=D,f=U,s.multiple=!!v,c!=null?yt(s,!!v,c,!1):f!=null&&yt(s,!!v,f,!0);return;case"textarea":Yt("invalid",s),D=A=v=null;for(U in f)if(f.hasOwnProperty(U)&&(Q=f[U],Q!=null))switch(U){case"value":v=Q;break;case"defaultValue":A=Q;break;case"children":D=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(a(91));break;default:wr(s,c,U,Q,f,null)}gn(s,v,A,D);return;case"option":for(ue in f)if(f.hasOwnProperty(ue)&&(v=f[ue],v!=null))switch(ue){case"selected":s.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:wr(s,c,ue,v,f,null)}return;case"dialog":Yt("beforetoggle",s),Yt("toggle",s),Yt("cancel",s),Yt("close",s);break;case"iframe":case"object":Yt("load",s);break;case"video":case"audio":for(v=0;v<sm.length;v++)Yt(sm[v],s);break;case"image":Yt("error",s),Yt("load",s);break;case"details":Yt("toggle",s);break;case"embed":case"source":case"link":Yt("error",s),Yt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in f)if(f.hasOwnProperty(_e)&&(v=f[_e],v!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,c));default:wr(s,c,_e,v,f,null)}return;default:if(Ar(c)){for(He in f)f.hasOwnProperty(He)&&(v=f[He],v!==void 0&&Qy(s,c,He,v,f,void 0));return}}for(Q in f)f.hasOwnProperty(Q)&&(v=f[Q],v!=null&&wr(s,c,Q,v,f,null))}function A9(s,c,f,v){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,D=null,U=null,Q=null,ue=null,_e=null,He=null;for(Be in f){var Ye=f[Be];if(f.hasOwnProperty(Be)&&Ye!=null)switch(Be){case"checked":break;case"value":break;case"defaultValue":ue=Ye;default:v.hasOwnProperty(Be)||wr(s,c,Be,null,v,Ye)}}for(var ke in v){var Be=v[ke];if(Ye=f[ke],v.hasOwnProperty(ke)&&(Be!=null||Ye!=null))switch(ke){case"type":D=Be;break;case"name":A=Be;break;case"checked":_e=Be;break;case"defaultChecked":He=Be;break;case"value":U=Be;break;case"defaultValue":Q=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(a(137,c));break;default:Be!==Ye&&wr(s,c,ke,Be,v,Ye)}}wa(s,U,Q,ue,_e,He,D,A);return;case"select":Be=U=Q=ke=null;for(D in f)if(ue=f[D],f.hasOwnProperty(D)&&ue!=null)switch(D){case"value":break;case"multiple":Be=ue;default:v.hasOwnProperty(D)||wr(s,c,D,null,v,ue)}for(A in v)if(D=v[A],ue=f[A],v.hasOwnProperty(A)&&(D!=null||ue!=null))switch(A){case"value":ke=D;break;case"defaultValue":Q=D;break;case"multiple":U=D;default:D!==ue&&wr(s,c,A,D,v,ue)}c=Q,f=U,v=Be,ke!=null?yt(s,!!f,ke,!1):!!v!=!!f&&(c!=null?yt(s,!!f,c,!0):yt(s,!!f,f?[]:"",!1));return;case"textarea":Be=ke=null;for(Q in f)if(A=f[Q],f.hasOwnProperty(Q)&&A!=null&&!v.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:wr(s,c,Q,null,v,A)}for(U in v)if(A=v[U],D=f[U],v.hasOwnProperty(U)&&(A!=null||D!=null))switch(U){case"value":ke=A;break;case"defaultValue":Be=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:A!==D&&wr(s,c,U,A,v,D)}fa(s,ke,Be);return;case"option":for(var ht in f)if(ke=f[ht],f.hasOwnProperty(ht)&&ke!=null&&!v.hasOwnProperty(ht))switch(ht){case"selected":s.selected=!1;break;default:wr(s,c,ht,null,v,ke)}for(ue in v)if(ke=v[ue],Be=f[ue],v.hasOwnProperty(ue)&&ke!==Be&&(ke!=null||Be!=null))switch(ue){case"selected":s.selected=ke&&typeof ke!="function"&&typeof ke!="symbol";break;default:wr(s,c,ue,ke,v,Be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ot in f)ke=f[Ot],f.hasOwnProperty(Ot)&&ke!=null&&!v.hasOwnProperty(Ot)&&wr(s,c,Ot,null,v,ke);for(_e in v)if(ke=v[_e],Be=f[_e],v.hasOwnProperty(_e)&&ke!==Be&&(ke!=null||Be!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(a(137,c));break;default:wr(s,c,_e,ke,v,Be)}return;default:if(Ar(c)){for(var Nr in f)ke=f[Nr],f.hasOwnProperty(Nr)&&ke!==void 0&&!v.hasOwnProperty(Nr)&&Qy(s,c,Nr,void 0,v,ke);for(He in v)ke=v[He],Be=f[He],!v.hasOwnProperty(He)||ke===Be||ke===void 0&&Be===void 0||Qy(s,c,He,ke,v,Be);return}}for(var Se in f)ke=f[Se],f.hasOwnProperty(Se)&&ke!=null&&!v.hasOwnProperty(Se)&&wr(s,c,Se,null,v,ke);for(Ye in v)ke=v[Ye],Be=f[Ye],!v.hasOwnProperty(Ye)||ke===Be||ke==null&&Be==null||wr(s,c,Ye,ke,v,Be)}function w3(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function T9(){if(typeof performance.getEntriesByType=="function"){for(var s=0,c=0,f=performance.getEntriesByType("resource"),v=0;v<f.length;v++){var A=f[v],D=A.transferSize,U=A.initiatorType,Q=A.duration;if(D&&Q&&w3(U)){for(U=0,Q=A.responseEnd,v+=1;v<f.length;v++){var ue=f[v],_e=ue.startTime;if(_e>Q)break;var He=ue.transferSize,Ye=ue.initiatorType;He&&w3(Ye)&&(ue=ue.responseEnd,U+=He*(ue<Q?1:(Q-_e)/(ue-_e)))}if(--v,c+=8*(D+U)/(A.duration/1e3),s++,10<s)break}}if(0<s)return c/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Jy=null,ex=null;function X0(s){return s.nodeType===9?s:s.ownerDocument}function N3(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function S3(s,c){if(s===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&c==="foreignObject"?0:s}function tx(s,c){return s==="textarea"||s==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var rx=null;function O9(){var s=window.event;return s&&s.type==="popstate"?s===rx?!1:(rx=s,!0):(rx=null,!1)}var C3=typeof setTimeout=="function"?setTimeout:void 0,_9=typeof clearTimeout=="function"?clearTimeout:void 0,A3=typeof Promise=="function"?Promise:void 0,D9=typeof queueMicrotask=="function"?queueMicrotask:typeof A3<"u"?function(s){return A3.resolve(null).then(s).catch(k9)}:C3;function k9(s){setTimeout(function(){throw s})}function co(s){return s==="head"}function T3(s,c){var f=c,v=0;do{var A=f.nextSibling;if(s.removeChild(f),A&&A.nodeType===8)if(f=A.data,f==="/$"||f==="/&"){if(v===0){s.removeChild(A),Su(c);return}v--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")v++;else if(f==="html")im(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,im(f);for(var D=f.firstChild;D;){var U=D.nextSibling,Q=D.nodeName;D[hl]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&D.rel.toLowerCase()==="stylesheet"||f.removeChild(D),D=U}}else f==="body"&&im(s.ownerDocument.body);f=A}while(f);Su(c)}function O3(s,c){var f=s;s=0;do{var v=f.nextSibling;if(f.nodeType===1?c?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(c?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),v&&v.nodeType===8)if(f=v.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=v}while(f)}function ax(s){var c=s.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":ax(f),en(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function P9(s,c,f,v){for(;s.nodeType===1;){var A=f;if(s.nodeName.toLowerCase()!==c.toLowerCase()){if(!v&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(v){if(!s[hl])switch(c){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(D=s.getAttribute("rel"),D==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(D!==A.rel||s.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||s.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||s.getAttribute("title")!==(A.title==null?null:A.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(D=s.getAttribute("src"),(D!==(A.src==null?null:A.src)||s.getAttribute("type")!==(A.type==null?null:A.type)||s.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&D&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(c==="input"&&s.type==="hidden"){var D=A.name==null?null:""+A.name;if(A.type==="hidden"&&s.getAttribute("name")===D)return s}else return s;if(s=vs(s.nextSibling),s===null)break}return null}function M9(s,c,f){if(c==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=vs(s.nextSibling),s===null))return null;return s}function _3(s,c){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=vs(s.nextSibling),s===null))return null;return s}function nx(s){return s.data==="$?"||s.data==="$~"}function sx(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function I9(s,c){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=c;else if(s.data!=="$?"||f.readyState!=="loading")c();else{var v=function(){c(),f.removeEventListener("DOMContentLoaded",v)};f.addEventListener("DOMContentLoaded",v),s._reactRetry=v}}function vs(s){for(;s!=null;s=s.nextSibling){var c=s.nodeType;if(c===1||c===3)break;if(c===8){if(c=s.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return s}var lx=null;function D3(s){s=s.nextSibling;for(var c=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(c===0)return vs(s.nextSibling);c--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||c++}s=s.nextSibling}return null}function k3(s){s=s.previousSibling;for(var c=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(c===0)return s;c--}else f!=="/$"&&f!=="/&"||c++}s=s.previousSibling}return null}function P3(s,c,f){switch(c=X0(f),s){case"html":if(s=c.documentElement,!s)throw Error(a(452));return s;case"head":if(s=c.head,!s)throw Error(a(453));return s;case"body":if(s=c.body,!s)throw Error(a(454));return s;default:throw Error(a(451))}}function im(s){for(var c=s.attributes;c.length;)s.removeAttributeNode(c[0]);en(s)}var Es=new Map,M3=new Set;function W0(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var li=se.d;se.d={f:R9,r:L9,D:B9,C:F9,L:U9,m:j9,X:V9,S:z9,M:H9};function R9(){var s=li.f(),c=j0();return s||c}function L9(s){var c=Qt(s);c!==null&&c.tag===5&&c.type==="form"?KS(c):li.r(s)}var Eu=typeof document>"u"?null:document;function I3(s,c,f){var v=Eu;if(v&&typeof c=="string"&&c){var A=Ht(c);A='link[rel="'+s+'"][href="'+A+'"]',typeof f=="string"&&(A+='[crossorigin="'+f+'"]'),M3.has(A)||(M3.add(A),s={rel:s,crossOrigin:f,href:c},v.querySelector(A)===null&&(c=v.createElement("link"),sn(c,"link",s),kr(c),v.head.appendChild(c)))}}function B9(s){li.D(s),I3("dns-prefetch",s,null)}function F9(s,c){li.C(s,c),I3("preconnect",s,c)}function U9(s,c,f){li.L(s,c,f);var v=Eu;if(v&&s&&c){var A='link[rel="preload"][as="'+Ht(c)+'"]';c==="image"&&f&&f.imageSrcSet?(A+='[imagesrcset="'+Ht(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(A+='[imagesizes="'+Ht(f.imageSizes)+'"]')):A+='[href="'+Ht(s)+'"]';var D=A;switch(c){case"style":D=wu(s);break;case"script":D=Nu(s)}Es.has(D)||(s=E({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:s,as:c},f),Es.set(D,s),v.querySelector(A)!==null||c==="style"&&v.querySelector(om(D))||c==="script"&&v.querySelector(cm(D))||(c=v.createElement("link"),sn(c,"link",s),kr(c),v.head.appendChild(c)))}}function j9(s,c){li.m(s,c);var f=Eu;if(f&&s){var v=c&&typeof c.as=="string"?c.as:"script",A='link[rel="modulepreload"][as="'+Ht(v)+'"][href="'+Ht(s)+'"]',D=A;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=Nu(s)}if(!Es.has(D)&&(s=E({rel:"modulepreload",href:s},c),Es.set(D,s),f.querySelector(A)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(cm(D)))return}v=f.createElement("link"),sn(v,"link",s),kr(v),f.head.appendChild(v)}}}function z9(s,c,f){li.S(s,c,f);var v=Eu;if(v&&s){var A=gt(v).hoistableStyles,D=wu(s);c=c||"default";var U=A.get(D);if(!U){var Q={loading:0,preload:null};if(U=v.querySelector(om(D)))Q.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":c},f),(f=Es.get(D))&&ix(s,f);var ue=U=v.createElement("link");kr(ue),sn(ue,"link",s),ue._p=new Promise(function(_e,He){ue.onload=_e,ue.onerror=He}),ue.addEventListener("load",function(){Q.loading|=1}),ue.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,K0(U,c,v)}U={type:"stylesheet",instance:U,count:1,state:Q},A.set(D,U)}}}function V9(s,c){li.X(s,c);var f=Eu;if(f&&s){var v=gt(f).hoistableScripts,A=Nu(s),D=v.get(A);D||(D=f.querySelector(cm(A)),D||(s=E({src:s,async:!0},c),(c=Es.get(A))&&ox(s,c),D=f.createElement("script"),kr(D),sn(D,"link",s),f.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},v.set(A,D))}}function H9(s,c){li.M(s,c);var f=Eu;if(f&&s){var v=gt(f).hoistableScripts,A=Nu(s),D=v.get(A);D||(D=f.querySelector(cm(A)),D||(s=E({src:s,async:!0,type:"module"},c),(c=Es.get(A))&&ox(s,c),D=f.createElement("script"),kr(D),sn(D,"link",s),f.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},v.set(A,D))}}function R3(s,c,f,v){var A=(A=ie.current)?W0(A):null;if(!A)throw Error(a(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=wu(f.href),f=gt(A).hoistableStyles,v=f.get(c),v||(v={type:"style",instance:null,count:0,state:null},f.set(c,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=wu(f.href);var D=gt(A).hoistableStyles,U=D.get(s);if(U||(A=A.ownerDocument||A,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(s,U),(D=A.querySelector(om(s)))&&!D._p&&(U.instance=D,U.state.loading=5),Es.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Es.set(s,f),D||$9(A,s,f,U.state))),c&&v===null)throw Error(a(528,""));return U}if(c&&v!==null)throw Error(a(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Nu(f),f=gt(A).hoistableScripts,v=f.get(c),v||(v={type:"script",instance:null,count:0,state:null},f.set(c,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,s))}}function wu(s){return'href="'+Ht(s)+'"'}function om(s){return'link[rel="stylesheet"]['+s+"]"}function L3(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function $9(s,c,f,v){s.querySelector('link[rel="preload"][as="style"]['+c+"]")?v.loading=1:(c=s.createElement("link"),v.preload=c,c.addEventListener("load",function(){return v.loading|=1}),c.addEventListener("error",function(){return v.loading|=2}),sn(c,"link",f),kr(c),s.head.appendChild(c))}function Nu(s){return'[src="'+Ht(s)+'"]'}function cm(s){return"script[async]"+s}function B3(s,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var v=s.querySelector('style[data-href~="'+Ht(f.href)+'"]');if(v)return c.instance=v,kr(v),v;var A=E({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return v=(s.ownerDocument||s).createElement("style"),kr(v),sn(v,"style",A),K0(v,f.precedence,s),c.instance=v;case"stylesheet":A=wu(f.href);var D=s.querySelector(om(A));if(D)return c.state.loading|=4,c.instance=D,kr(D),D;v=L3(f),(A=Es.get(A))&&ix(v,A),D=(s.ownerDocument||s).createElement("link"),kr(D);var U=D;return U._p=new Promise(function(Q,ue){U.onload=Q,U.onerror=ue}),sn(D,"link",v),c.state.loading|=4,K0(D,f.precedence,s),c.instance=D;case"script":return D=Nu(f.src),(A=s.querySelector(cm(D)))?(c.instance=A,kr(A),A):(v=f,(A=Es.get(D))&&(v=E({},f),ox(v,A)),s=s.ownerDocument||s,A=s.createElement("script"),kr(A),sn(A,"link",v),s.head.appendChild(A),c.instance=A);case"void":return null;default:throw Error(a(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(v=c.instance,c.state.loading|=4,K0(v,f.precedence,s));return c.instance}function K0(s,c,f){for(var v=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=v.length?v[v.length-1]:null,D=A,U=0;U<v.length;U++){var Q=v[U];if(Q.dataset.precedence===c)D=Q;else if(D!==A)break}D?D.parentNode.insertBefore(s,D.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(s,c.firstChild))}function ix(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.title==null&&(s.title=c.title)}function ox(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.integrity==null&&(s.integrity=c.integrity)}var Z0=null;function F3(s,c,f){if(Z0===null){var v=new Map,A=Z0=new Map;A.set(f,v)}else A=Z0,v=A.get(f),v||(v=new Map,A.set(f,v));if(v.has(s))return v;for(v.set(s,null),f=f.getElementsByTagName(s),A=0;A<f.length;A++){var D=f[A];if(!(D[hl]||D[$r]||s==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var U=D.getAttribute(c)||"";U=s+U;var Q=v.get(U);Q?Q.push(D):v.set(U,[D])}}return v}function U3(s,c,f){s=s.ownerDocument||s,s.head.insertBefore(f,c==="title"?s.querySelector("head > title"):null)}function q9(s,c,f){if(f===1||c.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return s=c.disabled,typeof c.precedence=="string"&&s==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function j3(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function G9(s,c,f,v){if(f.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var A=wu(v.href),D=c.querySelector(om(A));if(D){c=D._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(s.count++,s=Q0.bind(s),c.then(s,s)),f.state.loading|=4,f.instance=D,kr(D);return}D=c.ownerDocument||c,v=L3(v),(A=Es.get(A))&&ix(v,A),D=D.createElement("link"),kr(D);var U=D;U._p=new Promise(function(Q,ue){U.onload=Q,U.onerror=ue}),sn(D,"link",v),f.instance=D}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=Q0.bind(s),c.addEventListener("load",f),c.addEventListener("error",f))}}var cx=0;function Y9(s,c){return s.stylesheets&&s.count===0&&eh(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var v=setTimeout(function(){if(s.stylesheets&&eh(s,s.stylesheets),s.unsuspend){var D=s.unsuspend;s.unsuspend=null,D()}},6e4+c);0<s.imgBytes&&cx===0&&(cx=62500*T9());var A=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&eh(s,s.stylesheets),s.unsuspend)){var D=s.unsuspend;s.unsuspend=null,D()}},(s.imgBytes>cx?50:800)+c);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(v),clearTimeout(A)}}:null}function Q0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)eh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var J0=null;function eh(s,c){s.stylesheets=null,s.unsuspend!==null&&(s.count++,J0=new Map,c.forEach(X9,s),J0=null,Q0.call(s))}function X9(s,c){if(!(c.state.loading&4)){var f=J0.get(s);if(f)var v=f.get(null);else{f=new Map,J0.set(s,f);for(var A=s.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<A.length;D++){var U=A[D];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(f.set(U.dataset.precedence,U),v=U)}v&&f.set(null,v)}A=c.instance,U=A.getAttribute("data-precedence"),D=f.get(U)||v,D===v&&f.set(null,A),f.set(U,A),this.count++,v=Q0.bind(this),A.addEventListener("load",v),A.addEventListener("error",v),D?D.parentNode.insertBefore(A,D.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(A,s.firstChild)),c.state.loading|=4}}var um={$$typeof:R,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function W9(s,c,f,v,A,D,U,Q,ue){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ja(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ja(0),this.hiddenUpdates=Ja(null),this.identifierPrefix=v,this.onUncaughtError=A,this.onCaughtError=D,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function z3(s,c,f,v,A,D,U,Q,ue,_e,He,Ye){return s=new W9(s,c,f,U,ue,_e,He,Ye,Q),c=1,D===!0&&(c|=24),D=Xn(3,null,null,c),s.current=D,D.stateNode=s,c=V1(),c.refCount++,s.pooledCache=c,c.refCount++,D.memoizedState={element:v,isDehydrated:f,cache:c},G1(D),s}function V3(s){return s?(s=eu,s):eu}function H3(s,c,f,v,A,D){A=V3(A),v.context===null?v.context=A:v.pendingContext=A,v=Qi(c),v.payload={element:f},D=D===void 0?null:D,D!==null&&(v.callback=D),f=Ji(s,v,c),f!==null&&(Mn(f,s,c),Vd(f,s,c))}function $3(s,c){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<c?f:c}}function ux(s,c){$3(s,c),(s=s.alternate)&&$3(s,c)}function q3(s){if(s.tag===13||s.tag===31){var c=Zo(s,67108864);c!==null&&Mn(c,s,67108864),ux(s,67108864)}}function G3(s){if(s.tag===13||s.tag===31){var c=Jn();c=Ea(c);var f=Zo(s,c);f!==null&&Mn(f,s,c),ux(s,c)}}var th=!0;function K9(s,c,f,v){var A=J.T;J.T=null;var D=se.p;try{se.p=2,dx(s,c,f,v)}finally{se.p=D,J.T=A}}function Z9(s,c,f,v){var A=J.T;J.T=null;var D=se.p;try{se.p=8,dx(s,c,f,v)}finally{se.p=D,J.T=A}}function dx(s,c,f,v){if(th){var A=mx(v);if(A===null)Zy(s,c,v,rh,f),X3(s,v);else if(J9(A,s,c,f,v))v.stopPropagation();else if(X3(s,v),c&4&&-1<Q9.indexOf(s)){for(;A!==null;){var D=Qt(A);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var U=Lt(D.pendingLanes);if(U!==0){var Q=D;for(Q.pendingLanes|=2,Q.entangledLanes|=2;U;){var ue=1<<31-st(U);Q.entanglements[1]|=ue,U&=~ue}wl(D),(cr&6)===0&&(F0=mt()+500,nm(0))}}break;case 31:case 13:Q=Zo(D,2),Q!==null&&Mn(Q,D,2),j0(),ux(D,2)}if(D=mx(v),D===null&&Zy(s,c,v,rh,f),D===A)break;A=D}A!==null&&v.stopPropagation()}else Zy(s,c,v,null,f)}}function mx(s){return s=Td(s),fx(s)}var rh=null;function fx(s){if(rh=null,s=Br(s),s!==null){var c=o(s);if(c===null)s=null;else{var f=c.tag;if(f===13){if(s=d(c),s!==null)return s;s=null}else if(f===31){if(s=h(c),s!==null)return s;s=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;s=null}else c!==s&&(s=null)}}return rh=s,null}function Y3(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($t()){case er:return 2;case tr:return 8;case ut:case At:return 32;case vr:return 268435456;default:return 32}default:return 32}}var hx=!1,uo=null,mo=null,fo=null,dm=new Map,mm=new Map,ho=[],Q9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X3(s,c){switch(s){case"focusin":case"focusout":uo=null;break;case"dragenter":case"dragleave":mo=null;break;case"mouseover":case"mouseout":fo=null;break;case"pointerover":case"pointerout":dm.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":mm.delete(c.pointerId)}}function fm(s,c,f,v,A,D){return s===null||s.nativeEvent!==D?(s={blockedOn:c,domEventName:f,eventSystemFlags:v,nativeEvent:D,targetContainers:[A]},c!==null&&(c=Qt(c),c!==null&&q3(c)),s):(s.eventSystemFlags|=v,c=s.targetContainers,A!==null&&c.indexOf(A)===-1&&c.push(A),s)}function J9(s,c,f,v,A){switch(c){case"focusin":return uo=fm(uo,s,c,f,v,A),!0;case"dragenter":return mo=fm(mo,s,c,f,v,A),!0;case"mouseover":return fo=fm(fo,s,c,f,v,A),!0;case"pointerover":var D=A.pointerId;return dm.set(D,fm(dm.get(D)||null,s,c,f,v,A)),!0;case"gotpointercapture":return D=A.pointerId,mm.set(D,fm(mm.get(D)||null,s,c,f,v,A)),!0}return!1}function W3(s){var c=Br(s.target);if(c!==null){var f=o(c);if(f!==null){if(c=f.tag,c===13){if(c=d(f),c!==null){s.blockedOn=c,ct(s.priority,function(){G3(f)});return}}else if(c===31){if(c=h(f),c!==null){s.blockedOn=c,ct(s.priority,function(){G3(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ah(s){if(s.blockedOn!==null)return!1;for(var c=s.targetContainers;0<c.length;){var f=mx(s.nativeEvent);if(f===null){f=s.nativeEvent;var v=new f.constructor(f.type,f);Ho=v,f.target.dispatchEvent(v),Ho=null}else return c=Qt(f),c!==null&&q3(c),s.blockedOn=f,!1;c.shift()}return!0}function K3(s,c,f){ah(s)&&f.delete(c)}function eL(){hx=!1,uo!==null&&ah(uo)&&(uo=null),mo!==null&&ah(mo)&&(mo=null),fo!==null&&ah(fo)&&(fo=null),dm.forEach(K3),mm.forEach(K3)}function nh(s,c){s.blockedOn===c&&(s.blockedOn=null,hx||(hx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eL)))}var sh=null;function Z3(s){sh!==s&&(sh=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){sh===s&&(sh=null);for(var c=0;c<s.length;c+=3){var f=s[c],v=s[c+1],A=s[c+2];if(typeof v!="function"){if(fx(v||f)===null)continue;break}var D=Qt(f);D!==null&&(s.splice(c,3),c-=3,my(D,{pending:!0,data:A,method:f.method,action:v},v,A))}}))}function Su(s){function c(ue){return nh(ue,s)}uo!==null&&nh(uo,s),mo!==null&&nh(mo,s),fo!==null&&nh(fo,s),dm.forEach(c),mm.forEach(c);for(var f=0;f<ho.length;f++){var v=ho[f];v.blockedOn===s&&(v.blockedOn=null)}for(;0<ho.length&&(f=ho[0],f.blockedOn===null);)W3(f),f.blockedOn===null&&ho.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(v=0;v<f.length;v+=3){var A=f[v],D=f[v+1],U=A[rr]||null;if(typeof D=="function")U||Z3(f);else if(U){var Q=null;if(D&&D.hasAttribute("formAction")){if(A=D,U=D[rr]||null)Q=U.formAction;else if(fx(A)!==null)continue}else Q=U.action;typeof Q=="function"?f[v+1]=Q:(f.splice(v,3),v-=3),Z3(f)}}}function Q3(){function s(D){D.canIntercept&&D.info==="react-transition"&&D.intercept({handler:function(){return new Promise(function(U){return A=U})},focusReset:"manual",scroll:"manual"})}function c(){A!==null&&(A(),A=null),v||setTimeout(f,20)}function f(){if(!v&&!navigation.transition){var D=navigation.currentEntry;D&&D.url!=null&&navigation.navigate(D.url,{state:D.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,A=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(f,100),function(){v=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),A!==null&&(A(),A=null)}}}function gx(s){this._internalRoot=s}lh.prototype.render=gx.prototype.render=function(s){var c=this._internalRoot;if(c===null)throw Error(a(409));var f=c.current,v=Jn();H3(f,v,s,c,null,null)},lh.prototype.unmount=gx.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var c=s.containerInfo;H3(s.current,2,null,s,null,null),j0(),c[hn]=null}};function lh(s){this._internalRoot=s}lh.prototype.unstable_scheduleHydration=function(s){if(s){var c=qa();s={blockedOn:null,target:s,priority:c};for(var f=0;f<ho.length&&c!==0&&c<ho[f].priority;f++);ho.splice(f,0,s),f===0&&W3(s)}};var J3=t.version;if(J3!=="19.2.0")throw Error(a(527,J3,"19.2.0"));se.findDOMNode=function(s){var c=s._reactInternals;if(c===void 0)throw typeof s.render=="function"?Error(a(188)):(s=Object.keys(s).join(","),Error(a(268,s)));return s=p(c),s=s!==null?x(s):null,s=s===null?null:s.stateNode,s};var tL={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{kt=ih.inject(tL),xe=ih}catch{}}return hm.createRoot=function(s,c){if(!l(s))throw Error(a(299));var f=!1,v="",A=lC,D=iC,U=oC;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(D=c.onCaughtError),c.onRecoverableError!==void 0&&(U=c.onRecoverableError)),c=z3(s,1,!1,null,null,f,v,null,A,D,U,Q3),s[hn]=c.current,Ky(s),new gx(c)},hm.hydrateRoot=function(s,c,f){if(!l(s))throw Error(a(299));var v=!1,A="",D=lC,U=iC,Q=oC,ue=null;return f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(A=f.identifierPrefix),f.onUncaughtError!==void 0&&(D=f.onUncaughtError),f.onCaughtError!==void 0&&(U=f.onCaughtError),f.onRecoverableError!==void 0&&(Q=f.onRecoverableError),f.formState!==void 0&&(ue=f.formState)),c=z3(s,1,!0,c,f??null,v,A,ue,D,U,Q,Q3),c.context=V3(null),f=c.current,v=Jn(),v=Ea(v),A=Qi(v),A.callback=null,Ji(f,A,v),f=v,c.current.lanes=f,ds(c,f),wl(c),s[hn]=c.current,Ky(s),new lh(c)},hm.version="19.2.0",hm}var i4;function cL(){if(i4)return yx.exports;i4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),yx.exports=oL(),yx.exports}var uL=cL();var o4="popstate";function dL(e={}){function t(a,l){let{pathname:o,search:d,hash:h}=a.location;return Pv("",{pathname:o,search:d,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(a,l){return typeof l=="string"?l:Vm(l)}return fL(t,r,null,e)}function Zr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Is(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function mL(){return Math.random().toString(36).substring(2,10)}function c4(e,t){return{usr:e.state,key:e.key,idx:t}}function Pv(e,t,r=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ud(t):t,state:r,key:t&&t.key||a||mL()}}function Vm({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ud(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function fL(e,t,r,a={}){let{window:l=document.defaultView,v5Compat:o=!1}=a,d=l.history,h="POP",g=null,p=x();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function x(){return(d.state||{idx:null}).idx}function E(){h="POP";let k=x(),I=k==null?null:k-p;p=k,g&&g({action:h,location:P.location,delta:I})}function C(k,I){h="PUSH";let F=Pv(P.location,k,I);p=x()+1;let R=c4(F,p),Y=P.createHref(F);try{d.pushState(R,"",Y)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;l.location.assign(Y)}o&&g&&g({action:h,location:P.location,delta:1})}function O(k,I){h="REPLACE";let F=Pv(P.location,k,I);p=x();let R=c4(F,p),Y=P.createHref(F);d.replaceState(R,"",Y),o&&g&&g({action:h,location:P.location,delta:0})}function _(k){return hL(k)}let P={get action(){return h},get location(){return e(l,d)},listen(k){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(o4,E),g=k,()=>{l.removeEventListener(o4,E),g=null}},createHref(k){return t(l,k)},createURL:_,encodeLocation(k){let I=_(k);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:C,replace:O,go(k){return d.go(k)}};return P}function hL(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Zr(r,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:Vm(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function v_(e,t,r="/"){return gL(e,t,r,!1)}function gL(e,t,r,a){let l=typeof t=="string"?ud(t):t,o=pi(l.pathname||"/",r);if(o==null)return null;let d=E_(e);pL(d);let h=null;for(let g=0;h==null&&g<d.length;++g){let p=TL(o);h=CL(d[g],p,a)}return h}function E_(e,t=[],r=[],a="",l=!1){let o=(d,h,g=l,p)=>{let x={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:h,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(a)&&g)return;Zr(x.relativePath.startsWith(a),`Absolute route path "${x.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(a.length)}let E=fi([a,x.relativePath]),C=r.concat(x);d.children&&d.children.length>0&&(Zr(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),E_(d.children,t,C,E,g)),!(d.path==null&&!d.index)&&t.push({path:E,score:NL(E,d.index),routesMeta:C})};return e.forEach((d,h)=>{if(d.path===""||!d.path?.includes("?"))o(d,h);else for(let g of w_(d.path))o(d,h,!0,g)}),t}function w_(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,l=r.endsWith("?"),o=r.replace(/\?$/,"");if(a.length===0)return l?[o,""]:[o];let d=w_(a.join("/")),h=[];return h.push(...d.map(g=>g===""?o:[o,g].join("/"))),l&&h.push(...d),h.map(g=>e.startsWith("/")&&g===""?"/":g)}function pL(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:SL(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var yL=/^:[\w-]+$/,xL=3,bL=2,vL=1,EL=10,wL=-2,u4=e=>e==="*";function NL(e,t){let r=e.split("/"),a=r.length;return r.some(u4)&&(a+=wL),t&&(a+=bL),r.filter(l=>!u4(l)).reduce((l,o)=>l+(yL.test(o)?xL:o===""?vL:EL),a)}function SL(e,t){return e.length===t.length&&e.slice(0,-1).every((a,l)=>a===t[l])?e[e.length-1]-t[t.length-1]:0}function CL(e,t,r=!1){let{routesMeta:a}=e,l={},o="/",d=[];for(let h=0;h<a.length;++h){let g=a[h],p=h===a.length-1,x=o==="/"?t:t.slice(o.length)||"/",E=ug({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},x),C=g.route;if(!E&&p&&r&&!a[a.length-1].route.index&&(E=ug({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!E)return null;Object.assign(l,E.params),d.push({params:l,pathname:fi([o,E.pathname]),pathnameBase:PL(fi([o,E.pathnameBase])),route:C}),E.pathnameBase!=="/"&&(o=fi([o,E.pathnameBase]))}return d}function ug(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=AL(e.path,e.caseSensitive,e.end),l=t.match(r);if(!l)return null;let o=l[0],d=o.replace(/(.)\/+$/,"$1"),h=l.slice(1);return{params:a.reduce((p,{paramName:x,isOptional:E},C)=>{if(x==="*"){let _=h[C]||"";d=o.slice(0,o.length-_.length).replace(/(.)\/+$/,"$1")}const O=h[C];return E&&!O?p[x]=void 0:p[x]=(O||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:d,pattern:e}}function AL(e,t=!1,r=!0){Is(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,h,g)=>(a.push({paramName:h,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),a]}function TL(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Is(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function pi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}var OL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_L=e=>OL.test(e);function DL(e,t="/"){let{pathname:r,search:a="",hash:l=""}=typeof e=="string"?ud(e):e,o;if(r)if(_L(r))o=r;else{if(r.includes("//")){let d=r;r=r.replace(/\/\/+/g,"/"),Is(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${r}`)}r.startsWith("/")?o=d4(r.substring(1),"/"):o=d4(r,t)}else o=t;return{pathname:o,search:ML(a),hash:IL(l)}}function d4(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function Ex(e,t,r,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kL(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function f2(e){let t=kL(e);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function h2(e,t,r,a=!1){let l;typeof e=="string"?l=ud(e):(l={...e},Zr(!l.pathname||!l.pathname.includes("?"),Ex("?","pathname","search",l)),Zr(!l.pathname||!l.pathname.includes("#"),Ex("#","pathname","hash",l)),Zr(!l.search||!l.search.includes("#"),Ex("#","search","hash",l)));let o=e===""||l.pathname==="",d=o?"/":l.pathname,h;if(d==null)h=r;else{let E=t.length-1;if(!a&&d.startsWith("..")){let C=d.split("/");for(;C[0]==="..";)C.shift(),E-=1;l.pathname=C.join("/")}h=E>=0?t[E]:"/"}let g=DL(l,h),p=d&&d!=="/"&&d.endsWith("/"),x=(o||d===".")&&r.endsWith("/");return!g.pathname.endsWith("/")&&(p||x)&&(g.pathname+="/"),g}var fi=e=>e.join("/").replace(/\/\/+/g,"/"),PL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ML=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,IL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function RL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var N_=["POST","PUT","PATCH","DELETE"];new Set(N_);var LL=["GET",...N_];new Set(LL);var dd=N.createContext(null);dd.displayName="DataRouter";var vp=N.createContext(null);vp.displayName="DataRouterState";N.createContext(!1);var S_=N.createContext({isTransitioning:!1});S_.displayName="ViewTransition";var BL=N.createContext(new Map);BL.displayName="Fetchers";var FL=N.createContext(null);FL.displayName="Await";var cl=N.createContext(null);cl.displayName="Navigation";var hf=N.createContext(null);hf.displayName="Location";var ul=N.createContext({outlet:null,matches:[],isDataRoute:!1});ul.displayName="Route";var g2=N.createContext(null);g2.displayName="RouteError";function UL(e,{relative:t}={}){Zr(md(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=N.useContext(cl),{hash:l,pathname:o,search:d}=gf(e,{relative:t}),h=o;return r!=="/"&&(h=o==="/"?r:fi([r,o])),a.createHref({pathname:h,search:d,hash:l})}function md(){return N.useContext(hf)!=null}function Fs(){return Zr(md(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(hf).location}var C_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function A_(e){N.useContext(cl).static||N.useLayoutEffect(e)}function Ep(){let{isDataRoute:e}=N.useContext(ul);return e?eB():jL()}function jL(){Zr(md(),"useNavigate() may be used only in the context of a <Router> component.");let e=N.useContext(dd),{basename:t,navigator:r}=N.useContext(cl),{matches:a}=N.useContext(ul),{pathname:l}=Fs(),o=JSON.stringify(f2(a)),d=N.useRef(!1);return A_(()=>{d.current=!0}),N.useCallback((g,p={})=>{if(Is(d.current,C_),!d.current)return;if(typeof g=="number"){r.go(g);return}let x=h2(g,JSON.parse(o),l,p.relative==="path");e==null&&t!=="/"&&(x.pathname=x.pathname==="/"?t:fi([t,x.pathname])),(p.replace?r.replace:r.push)(x,p.state,p)},[t,r,o,l,e])}var zL=N.createContext(null);function VL(e){let t=N.useContext(ul).outlet;return N.useMemo(()=>t&&N.createElement(zL.Provider,{value:e},t),[t,e])}function gf(e,{relative:t}={}){let{matches:r}=N.useContext(ul),{pathname:a}=Fs(),l=JSON.stringify(f2(r));return N.useMemo(()=>h2(e,JSON.parse(l),a,t==="path"),[e,l,a,t])}function HL(e,t){return T_(e,t)}function T_(e,t,r,a,l){Zr(md(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=N.useContext(cl),{matches:d}=N.useContext(ul),h=d[d.length-1],g=h?h.params:{},p=h?h.pathname:"/",x=h?h.pathnameBase:"/",E=h&&h.route;{let F=E&&E.path||"";O_(p,!E||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let C=Fs(),O;if(t){let F=typeof t=="string"?ud(t):t;Zr(x==="/"||F.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${F.pathname}" was given in the \`location\` prop.`),O=F}else O=C;let _=O.pathname||"/",P=_;if(x!=="/"){let F=x.replace(/^\//,"").split("/");P="/"+_.replace(/^\//,"").split("/").slice(F.length).join("/")}let k=v_(e,{pathname:P});Is(E||k!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),Is(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=XL(k&&k.map(F=>Object.assign({},F,{params:Object.assign({},g,F.params),pathname:fi([x,o.encodeLocation?o.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?x:fi([x,o.encodeLocation?o.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),d,r,a,l);return t&&I?N.createElement(hf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},I):I}function $L(){let e=JL(),t=RL(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},o={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:o},"ErrorBoundary")," or"," ",N.createElement("code",{style:o},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:l},r):null,d)}var qL=N.createElement($L,null),GL=class extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?N.createElement(ul.Provider,{value:this.props.routeContext},N.createElement(g2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function YL({routeContext:e,match:t,children:r}){let a=N.useContext(dd);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(ul.Provider,{value:e},r)}function XL(e,t=[],r=null,a=null,l=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,d=r?.errors;if(d!=null){let x=o.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);Zr(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),o=o.slice(0,Math.min(o.length,x+1))}let h=!1,g=-1;if(r)for(let x=0;x<o.length;x++){let E=o[x];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=x),E.route.id){let{loaderData:C,errors:O}=r,_=E.route.loader&&!C.hasOwnProperty(E.route.id)&&(!O||O[E.route.id]===void 0);if(E.route.lazy||_){h=!0,g>=0?o=o.slice(0,g+1):o=[o[0]];break}}}let p=r&&a?(x,E)=>{a(x,{location:r.location,params:r.matches?.[0]?.params??{},errorInfo:E})}:void 0;return o.reduceRight((x,E,C)=>{let O,_=!1,P=null,k=null;r&&(O=d&&E.route.id?d[E.route.id]:void 0,P=E.route.errorElement||qL,h&&(g<0&&C===0?(O_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,k=null):g===C&&(_=!0,k=E.route.hydrateFallbackElement||null)));let I=t.concat(o.slice(0,C+1)),F=()=>{let R;return O?R=P:_?R=k:E.route.Component?R=N.createElement(E.route.Component,null):E.route.element?R=E.route.element:R=x,N.createElement(YL,{match:E,routeContext:{outlet:x,matches:I,isDataRoute:r!=null},children:R})};return r&&(E.route.ErrorBoundary||E.route.errorElement||C===0)?N.createElement(GL,{location:r.location,revalidation:r.revalidation,component:P,error:O,children:F(),routeContext:{outlet:null,matches:I,isDataRoute:!0},onError:p}):F()},null)}function p2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WL(e){let t=N.useContext(dd);return Zr(t,p2(e)),t}function KL(e){let t=N.useContext(vp);return Zr(t,p2(e)),t}function ZL(e){let t=N.useContext(ul);return Zr(t,p2(e)),t}function y2(e){let t=ZL(e),r=t.matches[t.matches.length-1];return Zr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function QL(){return y2("useRouteId")}function JL(){let e=N.useContext(g2),t=KL("useRouteError"),r=y2("useRouteError");return e!==void 0?e:t.errors?.[r]}function eB(){let{router:e}=WL("useNavigate"),t=y2("useNavigate"),r=N.useRef(!1);return A_(()=>{r.current=!0}),N.useCallback(async(l,o={})=>{Is(r.current,C_),r.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:t,...o}))},[e,t])}var m4={};function O_(e,t,r){!t&&!m4[e]&&(m4[e]=!0,Is(!1,r))}N.memo(tB);function tB({routes:e,future:t,state:r,unstable_onError:a}){return T_(e,void 0,r,a,t)}function dg({to:e,replace:t,state:r,relative:a}){Zr(md(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=N.useContext(cl);Is(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=N.useContext(ul),{pathname:d}=Fs(),h=Ep(),g=h2(e,f2(o),d,a==="path"),p=JSON.stringify(g);return N.useEffect(()=>{h(JSON.parse(p),{replace:t,state:r,relative:a})},[h,p,a,t,r]),null}function rB(e){return VL(e.context)}function Yr(e){Zr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aB({basename:e="/",children:t=null,location:r,navigationType:a="POP",navigator:l,static:o=!1}){Zr(!md(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),h=N.useMemo(()=>({basename:d,navigator:l,static:o,future:{}}),[d,l,o]);typeof r=="string"&&(r=ud(r));let{pathname:g="/",search:p="",hash:x="",state:E=null,key:C="default"}=r,O=N.useMemo(()=>{let _=pi(g,d);return _==null?null:{location:{pathname:_,search:p,hash:x,state:E,key:C},navigationType:a}},[d,g,p,x,E,C,a]);return Is(O!=null,`<Router basename="${d}"> is not able to match the URL "${g}${p}${x}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:N.createElement(cl.Provider,{value:h},N.createElement(hf.Provider,{children:t,value:O}))}function nB({children:e,location:t}){return HL(Mv(e),t)}function Mv(e,t=[]){let r=[];return N.Children.forEach(e,(a,l)=>{if(!N.isValidElement(a))return;let o=[...t,l];if(a.type===N.Fragment){r.push.apply(r,Mv(a.props.children,o));return}Zr(a.type===Yr,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zr(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||o.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Mv(a.props.children,o)),r.push(d)}),r}var Yh="get",Xh="application/x-www-form-urlencoded";function wp(e){return e!=null&&typeof e.tagName=="string"}function sB(e){return wp(e)&&e.tagName.toLowerCase()==="button"}function lB(e){return wp(e)&&e.tagName.toLowerCase()==="form"}function iB(e){return wp(e)&&e.tagName.toLowerCase()==="input"}function oB(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function cB(e,t){return e.button===0&&(!t||t==="_self")&&!oB(e)}var ch=null;function uB(){if(ch===null)try{new FormData(document.createElement("form"),0),ch=!1}catch{ch=!0}return ch}var dB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wx(e){return e!=null&&!dB.has(e)?(Is(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xh}"`),null):e}function mB(e,t){let r,a,l,o,d;if(lB(e)){let h=e.getAttribute("action");a=h?pi(h,t):null,r=e.getAttribute("method")||Yh,l=wx(e.getAttribute("enctype"))||Xh,o=new FormData(e)}else if(sB(e)||iB(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=e.getAttribute("formaction")||h.getAttribute("action");if(a=g?pi(g,t):null,r=e.getAttribute("formmethod")||h.getAttribute("method")||Yh,l=wx(e.getAttribute("formenctype"))||wx(h.getAttribute("enctype"))||Xh,o=new FormData(h,e),!uB()){let{name:p,type:x,value:E}=e;if(x==="image"){let C=p?`${p}.`:"";o.append(`${C}x`,"0"),o.append(`${C}y`,"0")}else p&&o.append(p,E)}}else{if(wp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Yh,a=null,l=Xh,d=e}return o&&l==="text/plain"&&(d=o,o=void 0),{action:a,method:r.toLowerCase(),encType:l,formData:o,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function x2(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function fB(e,t,r){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a.pathname==="/"?a.pathname=`_root.${r}`:t&&pi(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function hB(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gB(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function pB(e,t,r){let a=await Promise.all(e.map(async l=>{let o=t.routes[l.route.id];if(o){let d=await hB(o,r);return d.links?d.links():[]}return[]}));return vB(a.flat(1).filter(gB).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function f4(e,t,r,a,l,o){let d=(g,p)=>r[p]?g.route.id!==r[p].route.id:!0,h=(g,p)=>r[p].pathname!==g.pathname||r[p].route.path?.endsWith("*")&&r[p].params["*"]!==g.params["*"];return o==="assets"?t.filter((g,p)=>d(g,p)||h(g,p)):o==="data"?t.filter((g,p)=>{let x=a.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(d(g,p)||h(g,p))return!0;if(g.route.shouldRevalidate){let E=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function yB(e,t,{includeHydrateFallback:r}={}){return xB(e.map(a=>{let l=t.routes[a.route.id];if(!l)return[];let o=[l.module];return l.clientActionModule&&(o=o.concat(l.clientActionModule)),l.clientLoaderModule&&(o=o.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(o=o.concat(l.hydrateFallbackModule)),l.imports&&(o=o.concat(l.imports)),o}).flat(1))}function xB(e){return[...new Set(e)]}function bB(e){let t={},r=Object.keys(e).sort();for(let a of r)t[a]=e[a];return t}function vB(e,t){let r=new Set;return new Set(t),e.reduce((a,l)=>{let o=JSON.stringify(bB(l));return r.has(o)||(r.add(o),a.push({key:o,link:l})),a},[])}function __(){let e=N.useContext(dd);return x2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function EB(){let e=N.useContext(vp);return x2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var b2=N.createContext(void 0);b2.displayName="FrameworkContext";function D_(){let e=N.useContext(b2);return x2(e,"You must render this element inside a <HydratedRouter> element"),e}function wB(e,t){let r=N.useContext(b2),[a,l]=N.useState(!1),[o,d]=N.useState(!1),{onFocus:h,onBlur:g,onMouseEnter:p,onMouseLeave:x,onTouchStart:E}=t,C=N.useRef(null);N.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let P=I=>{I.forEach(F=>{d(F.isIntersecting)})},k=new IntersectionObserver(P,{threshold:.5});return C.current&&k.observe(C.current),()=>{k.disconnect()}}},[e]),N.useEffect(()=>{if(a){let P=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(P)}}},[a]);let O=()=>{l(!0)},_=()=>{l(!1),d(!1)};return r?e!=="intent"?[o,C,{}]:[o,C,{onFocus:gm(h,O),onBlur:gm(g,_),onMouseEnter:gm(p,O),onMouseLeave:gm(x,_),onTouchStart:gm(E,O)}]:[!1,C,{}]}function gm(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function NB({page:e,...t}){let{router:r}=__(),a=N.useMemo(()=>v_(r.routes,e,r.basename),[r.routes,e,r.basename]);return a?N.createElement(CB,{page:e,matches:a,...t}):null}function SB(e){let{manifest:t,routeModules:r}=D_(),[a,l]=N.useState([]);return N.useEffect(()=>{let o=!1;return pB(e,t,r).then(d=>{o||l(d)}),()=>{o=!0}},[e,t,r]),a}function CB({page:e,matches:t,...r}){let a=Fs(),{manifest:l,routeModules:o}=D_(),{basename:d}=__(),{loaderData:h,matches:g}=EB(),p=N.useMemo(()=>f4(e,t,g,l,a,"data"),[e,t,g,l,a]),x=N.useMemo(()=>f4(e,t,g,l,a,"assets"),[e,t,g,l,a]),E=N.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let _=new Set,P=!1;if(t.forEach(I=>{let F=l.routes[I.route.id];!F||!F.hasLoader||(!p.some(R=>R.route.id===I.route.id)&&I.route.id in h&&o[I.route.id]?.shouldRevalidate||F.hasClientLoader?P=!0:_.add(I.route.id))}),_.size===0)return[];let k=fB(e,d,"data");return P&&_.size>0&&k.searchParams.set("_routes",t.filter(I=>_.has(I.route.id)).map(I=>I.route.id).join(",")),[k.pathname+k.search]},[d,h,a,l,p,t,e,o]),C=N.useMemo(()=>yB(x,l),[x,l]),O=SB(x);return N.createElement(N.Fragment,null,E.map(_=>N.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...r})),C.map(_=>N.createElement("link",{key:_,rel:"modulepreload",href:_,...r})),O.map(({key:_,link:P})=>N.createElement("link",{key:_,nonce:r.nonce,...P})))}function AB(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var k_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{k_&&(window.__reactRouterVersion="7.9.6")}catch{}function TB({basename:e,children:t,window:r}){let a=N.useRef();a.current==null&&(a.current=dL({window:r,v5Compat:!0}));let l=a.current,[o,d]=N.useState({action:l.action,location:l.location}),h=N.useCallback(g=>{N.startTransition(()=>d(g))},[d]);return N.useLayoutEffect(()=>l.listen(h),[l,h]),N.createElement(aB,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:l})}var P_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,v2=N.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:l,reloadDocument:o,replace:d,state:h,target:g,to:p,preventScrollReset:x,viewTransition:E,...C},O){let{basename:_}=N.useContext(cl),P=typeof p=="string"&&P_.test(p),k,I=!1;if(typeof p=="string"&&P&&(k=p,k_))try{let V=new URL(window.location.href),W=p.startsWith("//")?new URL(V.protocol+p):new URL(p),H=pi(W.pathname,_);W.origin===V.origin&&H!=null?p=H+W.search+W.hash:I=!0}catch{Is(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=UL(p,{relative:l}),[R,Y,j]=wB(a,C),z=kB(p,{replace:d,state:h,target:g,preventScrollReset:x,relative:l,viewTransition:E});function L(V){t&&t(V),V.defaultPrevented||z(V)}let q=N.createElement("a",{...C,...j,href:k||F,onClick:I||o?t:L,ref:AB(O,Y),target:g,"data-discover":!P&&r==="render"?"true":void 0});return R&&!P?N.createElement(N.Fragment,null,q,N.createElement(NB,{page:F})):q});v2.displayName="Link";var OB=N.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:l=!1,style:o,to:d,viewTransition:h,children:g,...p},x){let E=gf(d,{relative:p.relative}),C=Fs(),O=N.useContext(vp),{navigator:_,basename:P}=N.useContext(cl),k=O!=null&&LB(E)&&h===!0,I=_.encodeLocation?_.encodeLocation(E).pathname:E.pathname,F=C.pathname,R=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;r||(F=F.toLowerCase(),R=R?R.toLowerCase():null,I=I.toLowerCase()),R&&P&&(R=pi(R,P)||R);const Y=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let j=F===I||!l&&F.startsWith(I)&&F.charAt(Y)==="/",z=R!=null&&(R===I||!l&&R.startsWith(I)&&R.charAt(I.length)==="/"),L={isActive:j,isPending:z,isTransitioning:k},q=j?t:void 0,V;typeof a=="function"?V=a(L):V=[a,j?"active":null,z?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let W=typeof o=="function"?o(L):o;return N.createElement(v2,{...p,"aria-current":q,className:V,ref:x,style:W,to:d,viewTransition:h},typeof g=="function"?g(L):g)});OB.displayName="NavLink";var _B=N.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:l,state:o,method:d=Yh,action:h,onSubmit:g,relative:p,preventScrollReset:x,viewTransition:E,...C},O)=>{let _=IB(),P=RB(h,{relative:p}),k=d.toLowerCase()==="get"?"get":"post",I=typeof h=="string"&&P_.test(h),F=R=>{if(g&&g(R),R.defaultPrevented)return;R.preventDefault();let Y=R.nativeEvent.submitter,j=Y?.getAttribute("formmethod")||d;_(Y||R.currentTarget,{fetcherKey:t,method:j,navigate:r,replace:l,state:o,relative:p,preventScrollReset:x,viewTransition:E})};return N.createElement("form",{ref:O,method:k,action:P,onSubmit:a?g:F,...C,"data-discover":!I&&e==="render"?"true":void 0})});_B.displayName="Form";function DB(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function M_(e){let t=N.useContext(dd);return Zr(t,DB(e)),t}function kB(e,{target:t,replace:r,state:a,preventScrollReset:l,relative:o,viewTransition:d}={}){let h=Ep(),g=Fs(),p=gf(e,{relative:o});return N.useCallback(x=>{if(cB(x,t)){x.preventDefault();let E=r!==void 0?r:Vm(g)===Vm(p);h(e,{replace:E,state:a,preventScrollReset:l,relative:o,viewTransition:d})}},[g,h,p,r,a,t,e,l,o,d])}var PB=0,MB=()=>`__${String(++PB)}__`;function IB(){let{router:e}=M_("useSubmit"),{basename:t}=N.useContext(cl),r=QL();return N.useCallback(async(a,l={})=>{let{action:o,method:d,encType:h,formData:g,body:p}=mB(a,t);if(l.navigate===!1){let x=l.fetcherKey||MB();await e.fetch(x,r,l.action||o,{preventScrollReset:l.preventScrollReset,formData:g,body:p,formMethod:l.method||d,formEncType:l.encType||h,flushSync:l.flushSync})}else await e.navigate(l.action||o,{preventScrollReset:l.preventScrollReset,formData:g,body:p,formMethod:l.method||d,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,r])}function RB(e,{relative:t}={}){let{basename:r}=N.useContext(cl),a=N.useContext(ul);Zr(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),o={...gf(e||".",{relative:t})},d=Fs();if(e==null){o.search=d.search;let h=new URLSearchParams(o.search),g=h.getAll("index");if(g.some(x=>x==="")){h.delete("index"),g.filter(E=>E).forEach(E=>h.append("index",E));let x=h.toString();o.search=x?`?${x}`:""}}return(!e||e===".")&&l.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:fi([r,o.pathname])),Vm(o)}function LB(e,{relative:t}={}){let r=N.useContext(S_);Zr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=M_("useViewTransitionState"),l=gf(e,{relative:t});if(!r.isTransitioning)return!1;let o=pi(r.currentLocation.pathname,a)||r.currentLocation.pathname,d=pi(r.nextLocation.pathname,a)||r.nextLocation.pathname;return ug(l.pathname,d)!=null||ug(l.pathname,o)!=null}var E2=b_();function I_(e,t){return function(){return e.apply(t,arguments)}}const{toString:BB}=Object.prototype,{getPrototypeOf:w2}=Object,{iterator:Np,toStringTag:R_}=Symbol,Sp=(e=>t=>{const r=BB.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),dl=e=>(e=e.toLowerCase(),t=>Sp(t)===e),Cp=e=>t=>typeof t===e,{isArray:fd}=Array,Gu=Cp("undefined");function pf(e){return e!==null&&!Gu(e)&&e.constructor!==null&&!Gu(e.constructor)&&Un(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const L_=dl("ArrayBuffer");function FB(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&L_(e.buffer),t}const UB=Cp("string"),Un=Cp("function"),B_=Cp("number"),yf=e=>e!==null&&typeof e=="object",jB=e=>e===!0||e===!1,Wh=e=>{if(Sp(e)!=="object")return!1;const t=w2(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(R_ in e)&&!(Np in e)},zB=e=>{if(!yf(e)||pf(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},VB=dl("Date"),HB=dl("File"),$B=dl("Blob"),qB=dl("FileList"),GB=e=>yf(e)&&Un(e.pipe),YB=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Un(e.append)&&((t=Sp(e))==="formdata"||t==="object"&&Un(e.toString)&&e.toString()==="[object FormData]"))},XB=dl("URLSearchParams"),[WB,KB,ZB,QB]=["ReadableStream","Request","Response","Headers"].map(dl),JB=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xf(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let a,l;if(typeof e!="object"&&(e=[e]),fd(e))for(a=0,l=e.length;a<l;a++)t.call(null,e[a],a,e);else{if(pf(e))return;const o=r?Object.getOwnPropertyNames(e):Object.keys(e),d=o.length;let h;for(a=0;a<d;a++)h=o[a],t.call(null,e[h],h,e)}}function F_(e,t){if(pf(e))return null;t=t.toLowerCase();const r=Object.keys(e);let a=r.length,l;for(;a-- >0;)if(l=r[a],t===l.toLowerCase())return l;return null}const Ec=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,U_=e=>!Gu(e)&&e!==Ec;function Iv(){const{caseless:e,skipUndefined:t}=U_(this)&&this||{},r={},a=(l,o)=>{const d=e&&F_(r,o)||o;Wh(r[d])&&Wh(l)?r[d]=Iv(r[d],l):Wh(l)?r[d]=Iv({},l):fd(l)?r[d]=l.slice():(!t||!Gu(l))&&(r[d]=l)};for(let l=0,o=arguments.length;l<o;l++)arguments[l]&&xf(arguments[l],a);return r}const eF=(e,t,r,{allOwnKeys:a}={})=>(xf(t,(l,o)=>{r&&Un(l)?e[o]=I_(l,r):e[o]=l},{allOwnKeys:a}),e),tF=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),rF=(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},aF=(e,t,r,a)=>{let l,o,d;const h={};if(t=t||{},e==null)return t;do{for(l=Object.getOwnPropertyNames(e),o=l.length;o-- >0;)d=l[o],(!a||a(d,e,t))&&!h[d]&&(t[d]=e[d],h[d]=!0);e=r!==!1&&w2(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},nF=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const a=e.indexOf(t,r);return a!==-1&&a===r},sF=e=>{if(!e)return null;if(fd(e))return e;let t=e.length;if(!B_(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},lF=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&w2(Uint8Array)),iF=(e,t)=>{const a=(e&&e[Np]).call(e);let l;for(;(l=a.next())&&!l.done;){const o=l.value;t.call(e,o[0],o[1])}},oF=(e,t)=>{let r;const a=[];for(;(r=e.exec(t))!==null;)a.push(r);return a},cF=dl("HTMLFormElement"),uF=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,l){return a.toUpperCase()+l}),h4=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),dF=dl("RegExp"),j_=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),a={};xf(r,(l,o)=>{let d;(d=t(l,o,e))!==!1&&(a[o]=d||l)}),Object.defineProperties(e,a)},mF=e=>{j_(e,(t,r)=>{if(Un(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=e[r];if(Un(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},fF=(e,t)=>{const r={},a=l=>{l.forEach(o=>{r[o]=!0})};return fd(e)?a(e):a(String(e).split(t)),r},hF=()=>{},gF=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function pF(e){return!!(e&&Un(e.append)&&e[R_]==="FormData"&&e[Np])}const yF=e=>{const t=new Array(10),r=(a,l)=>{if(yf(a)){if(t.indexOf(a)>=0)return;if(pf(a))return a;if(!("toJSON"in a)){t[l]=a;const o=fd(a)?[]:{};return xf(a,(d,h)=>{const g=r(d,l+1);!Gu(g)&&(o[h]=g)}),t[l]=void 0,o}}return a};return r(e,0)},xF=dl("AsyncFunction"),bF=e=>e&&(yf(e)||Un(e))&&Un(e.then)&&Un(e.catch),z_=((e,t)=>e?setImmediate:t?((r,a)=>(Ec.addEventListener("message",({source:l,data:o})=>{l===Ec&&o===r&&a.length&&a.shift()()},!1),l=>{a.push(l),Ec.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Un(Ec.postMessage)),vF=typeof queueMicrotask<"u"?queueMicrotask.bind(Ec):typeof process<"u"&&process.nextTick||z_,EF=e=>e!=null&&Un(e[Np]),Re={isArray:fd,isArrayBuffer:L_,isBuffer:pf,isFormData:YB,isArrayBufferView:FB,isString:UB,isNumber:B_,isBoolean:jB,isObject:yf,isPlainObject:Wh,isEmptyObject:zB,isReadableStream:WB,isRequest:KB,isResponse:ZB,isHeaders:QB,isUndefined:Gu,isDate:VB,isFile:HB,isBlob:$B,isRegExp:dF,isFunction:Un,isStream:GB,isURLSearchParams:XB,isTypedArray:lF,isFileList:qB,forEach:xf,merge:Iv,extend:eF,trim:JB,stripBOM:tF,inherits:rF,toFlatObject:aF,kindOf:Sp,kindOfTest:dl,endsWith:nF,toArray:sF,forEachEntry:iF,matchAll:oF,isHTMLForm:cF,hasOwnProperty:h4,hasOwnProp:h4,reduceDescriptors:j_,freezeMethods:mF,toObjectSet:fF,toCamelCase:uF,noop:hF,toFiniteNumber:gF,findKey:F_,global:Ec,isContextDefined:U_,isSpecCompliantForm:pF,toJSONObject:yF,isAsyncFn:xF,isThenable:bF,setImmediate:z_,asap:vF,isIterable:EF};function Ft(e,t,r,a,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),l&&(this.response=l,this.status=l.status?l.status:null)}Re.inherits(Ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Re.toJSONObject(this.config),code:this.code,status:this.status}}});const V_=Ft.prototype,H_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{H_[e]={value:e}});Object.defineProperties(Ft,H_);Object.defineProperty(V_,"isAxiosError",{value:!0});Ft.from=(e,t,r,a,l,o)=>{const d=Object.create(V_);Re.toFlatObject(e,d,function(x){return x!==Error.prototype},p=>p!=="isAxiosError");const h=e&&e.message?e.message:"Error",g=t==null&&e?e.code:t;return Ft.call(d,h,g,r,a,l),e&&d.cause==null&&Object.defineProperty(d,"cause",{value:e,configurable:!0}),d.name=e&&e.name||"Error",o&&Object.assign(d,o),d};const wF=null;function Rv(e){return Re.isPlainObject(e)||Re.isArray(e)}function $_(e){return Re.endsWith(e,"[]")?e.slice(0,-2):e}function g4(e,t,r){return e?e.concat(t).map(function(l,o){return l=$_(l),!r&&o?"["+l+"]":l}).join(r?".":""):t}function NF(e){return Re.isArray(e)&&!e.some(Rv)}const SF=Re.toFlatObject(Re,{},null,function(t){return/^is[A-Z]/.test(t)});function Ap(e,t,r){if(!Re.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Re.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(P,k){return!Re.isUndefined(k[P])});const a=r.metaTokens,l=r.visitor||x,o=r.dots,d=r.indexes,g=(r.Blob||typeof Blob<"u"&&Blob)&&Re.isSpecCompliantForm(t);if(!Re.isFunction(l))throw new TypeError("visitor must be a function");function p(_){if(_===null)return"";if(Re.isDate(_))return _.toISOString();if(Re.isBoolean(_))return _.toString();if(!g&&Re.isBlob(_))throw new Ft("Blob is not supported. Use a Buffer instead.");return Re.isArrayBuffer(_)||Re.isTypedArray(_)?g&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function x(_,P,k){let I=_;if(_&&!k&&typeof _=="object"){if(Re.endsWith(P,"{}"))P=a?P:P.slice(0,-2),_=JSON.stringify(_);else if(Re.isArray(_)&&NF(_)||(Re.isFileList(_)||Re.endsWith(P,"[]"))&&(I=Re.toArray(_)))return P=$_(P),I.forEach(function(R,Y){!(Re.isUndefined(R)||R===null)&&t.append(d===!0?g4([P],Y,o):d===null?P:P+"[]",p(R))}),!1}return Rv(_)?!0:(t.append(g4(k,P,o),p(_)),!1)}const E=[],C=Object.assign(SF,{defaultVisitor:x,convertValue:p,isVisitable:Rv});function O(_,P){if(!Re.isUndefined(_)){if(E.indexOf(_)!==-1)throw Error("Circular reference detected in "+P.join("."));E.push(_),Re.forEach(_,function(I,F){(!(Re.isUndefined(I)||I===null)&&l.call(t,I,Re.isString(F)?F.trim():F,P,C))===!0&&O(I,P?P.concat(F):[F])}),E.pop()}}if(!Re.isObject(e))throw new TypeError("data must be an object");return O(e),t}function p4(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function N2(e,t){this._pairs=[],e&&Ap(e,this,t)}const q_=N2.prototype;q_.append=function(t,r){this._pairs.push([t,r])};q_.toString=function(t){const r=t?function(a){return t.call(this,a,p4)}:p4;return this._pairs.map(function(l){return r(l[0])+"="+r(l[1])},"").join("&")};function CF(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function G_(e,t,r){if(!t)return e;const a=r&&r.encode||CF;Re.isFunction(r)&&(r={serialize:r});const l=r&&r.serialize;let o;if(l?o=l(t,r):o=Re.isURLSearchParams(t)?t.toString():new N2(t,r).toString(a),o){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class y4{constructor(){this.handlers=[]}use(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Re.forEach(this.handlers,function(a){a!==null&&t(a)})}}const Y_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},AF=typeof URLSearchParams<"u"?URLSearchParams:N2,TF=typeof FormData<"u"?FormData:null,OF=typeof Blob<"u"?Blob:null,_F={isBrowser:!0,classes:{URLSearchParams:AF,FormData:TF,Blob:OF},protocols:["http","https","file","blob","url","data"]},S2=typeof window<"u"&&typeof document<"u",Lv=typeof navigator=="object"&&navigator||void 0,DF=S2&&(!Lv||["ReactNative","NativeScript","NS"].indexOf(Lv.product)<0),kF=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",PF=S2&&window.location.href||"http://localhost",MF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:S2,hasStandardBrowserEnv:DF,hasStandardBrowserWebWorkerEnv:kF,navigator:Lv,origin:PF},Symbol.toStringTag,{value:"Module"})),mn={...MF,..._F};function IF(e,t){return Ap(e,new mn.classes.URLSearchParams,{visitor:function(r,a,l,o){return mn.isNode&&Re.isBuffer(r)?(this.append(a,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function RF(e){return Re.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function LF(e){const t={},r=Object.keys(e);let a;const l=r.length;let o;for(a=0;a<l;a++)o=r[a],t[o]=e[o];return t}function X_(e){function t(r,a,l,o){let d=r[o++];if(d==="__proto__")return!0;const h=Number.isFinite(+d),g=o>=r.length;return d=!d&&Re.isArray(l)?l.length:d,g?(Re.hasOwnProp(l,d)?l[d]=[l[d],a]:l[d]=a,!h):((!l[d]||!Re.isObject(l[d]))&&(l[d]=[]),t(r,a,l[d],o)&&Re.isArray(l[d])&&(l[d]=LF(l[d])),!h)}if(Re.isFormData(e)&&Re.isFunction(e.entries)){const r={};return Re.forEachEntry(e,(a,l)=>{t(RF(a),l,r,0)}),r}return null}function BF(e,t,r){if(Re.isString(e))try{return(t||JSON.parse)(e),Re.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(e)}const bf={transitional:Y_,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const a=r.getContentType()||"",l=a.indexOf("application/json")>-1,o=Re.isObject(t);if(o&&Re.isHTMLForm(t)&&(t=new FormData(t)),Re.isFormData(t))return l?JSON.stringify(X_(t)):t;if(Re.isArrayBuffer(t)||Re.isBuffer(t)||Re.isStream(t)||Re.isFile(t)||Re.isBlob(t)||Re.isReadableStream(t))return t;if(Re.isArrayBufferView(t))return t.buffer;if(Re.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let h;if(o){if(a.indexOf("application/x-www-form-urlencoded")>-1)return IF(t,this.formSerializer).toString();if((h=Re.isFileList(t))||a.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return Ap(h?{"files[]":t}:t,g&&new g,this.formSerializer)}}return o||l?(r.setContentType("application/json",!1),BF(t)):t}],transformResponse:[function(t){const r=this.transitional||bf.transitional,a=r&&r.forcedJSONParsing,l=this.responseType==="json";if(Re.isResponse(t)||Re.isReadableStream(t))return t;if(t&&Re.isString(t)&&(a&&!this.responseType||l)){const d=!(r&&r.silentJSONParsing)&&l;try{return JSON.parse(t,this.parseReviver)}catch(h){if(d)throw h.name==="SyntaxError"?Ft.from(h,Ft.ERR_BAD_RESPONSE,this,null,this.response):h}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mn.classes.FormData,Blob:mn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Re.forEach(["delete","get","head","post","put","patch"],e=>{bf.headers[e]={}});const FF=Re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),UF=e=>{const t={};let r,a,l;return e&&e.split(`
`).forEach(function(d){l=d.indexOf(":"),r=d.substring(0,l).trim().toLowerCase(),a=d.substring(l+1).trim(),!(!r||t[r]&&FF[r])&&(r==="set-cookie"?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t},x4=Symbol("internals");function pm(e){return e&&String(e).trim().toLowerCase()}function Kh(e){return e===!1||e==null?e:Re.isArray(e)?e.map(Kh):String(e)}function jF(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(e);)t[a[1]]=a[2];return t}const zF=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Nx(e,t,r,a,l){if(Re.isFunction(a))return a.call(this,t,r);if(l&&(t=r),!!Re.isString(t)){if(Re.isString(a))return t.indexOf(a)!==-1;if(Re.isRegExp(a))return a.test(t)}}function VF(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,a)=>r.toUpperCase()+a)}function HF(e,t){const r=Re.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(l,o,d){return this[a].call(this,t,l,o,d)},configurable:!0})})}let jn=class{constructor(t){t&&this.set(t)}set(t,r,a){const l=this;function o(h,g,p){const x=pm(g);if(!x)throw new Error("header name must be a non-empty string");const E=Re.findKey(l,x);(!E||l[E]===void 0||p===!0||p===void 0&&l[E]!==!1)&&(l[E||g]=Kh(h))}const d=(h,g)=>Re.forEach(h,(p,x)=>o(p,x,g));if(Re.isPlainObject(t)||t instanceof this.constructor)d(t,r);else if(Re.isString(t)&&(t=t.trim())&&!zF(t))d(UF(t),r);else if(Re.isObject(t)&&Re.isIterable(t)){let h={},g,p;for(const x of t){if(!Re.isArray(x))throw TypeError("Object iterator must return a key-value pair");h[p=x[0]]=(g=h[p])?Re.isArray(g)?[...g,x[1]]:[g,x[1]]:x[1]}d(h,r)}else t!=null&&o(r,t,a);return this}get(t,r){if(t=pm(t),t){const a=Re.findKey(this,t);if(a){const l=this[a];if(!r)return l;if(r===!0)return jF(l);if(Re.isFunction(r))return r.call(this,l,a);if(Re.isRegExp(r))return r.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=pm(t),t){const a=Re.findKey(this,t);return!!(a&&this[a]!==void 0&&(!r||Nx(this,this[a],a,r)))}return!1}delete(t,r){const a=this;let l=!1;function o(d){if(d=pm(d),d){const h=Re.findKey(a,d);h&&(!r||Nx(a,a[h],h,r))&&(delete a[h],l=!0)}}return Re.isArray(t)?t.forEach(o):o(t),l}clear(t){const r=Object.keys(this);let a=r.length,l=!1;for(;a--;){const o=r[a];(!t||Nx(this,this[o],o,t,!0))&&(delete this[o],l=!0)}return l}normalize(t){const r=this,a={};return Re.forEach(this,(l,o)=>{const d=Re.findKey(a,o);if(d){r[d]=Kh(l),delete r[o];return}const h=t?VF(o):String(o).trim();h!==o&&delete r[o],r[h]=Kh(l),a[h]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Re.forEach(this,(a,l)=>{a!=null&&a!==!1&&(r[l]=t&&Re.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const a=new this(t);return r.forEach(l=>a.set(l)),a}static accessor(t){const a=(this[x4]=this[x4]={accessors:{}}).accessors,l=this.prototype;function o(d){const h=pm(d);a[h]||(HF(l,d),a[h]=!0)}return Re.isArray(t)?t.forEach(o):o(t),this}};jn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Re.reduceDescriptors(jn.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[r]=a}}});Re.freezeMethods(jn);function Sx(e,t){const r=this||bf,a=t||r,l=jn.from(a.headers);let o=a.data;return Re.forEach(e,function(h){o=h.call(r,o,l.normalize(),t?t.status:void 0)}),l.normalize(),o}function W_(e){return!!(e&&e.__CANCEL__)}function hd(e,t,r){Ft.call(this,e??"canceled",Ft.ERR_CANCELED,t,r),this.name="CanceledError"}Re.inherits(hd,Ft,{__CANCEL__:!0});function K_(e,t,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?e(r):t(new Ft("Request failed with status code "+r.status,[Ft.ERR_BAD_REQUEST,Ft.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function $F(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function qF(e,t){e=e||10;const r=new Array(e),a=new Array(e);let l=0,o=0,d;return t=t!==void 0?t:1e3,function(g){const p=Date.now(),x=a[o];d||(d=p),r[l]=g,a[l]=p;let E=o,C=0;for(;E!==l;)C+=r[E++],E=E%e;if(l=(l+1)%e,l===o&&(o=(o+1)%e),p-d<t)return;const O=x&&p-x;return O?Math.round(C*1e3/O):void 0}}function GF(e,t){let r=0,a=1e3/t,l,o;const d=(p,x=Date.now())=>{r=x,l=null,o&&(clearTimeout(o),o=null),e(...p)};return[(...p)=>{const x=Date.now(),E=x-r;E>=a?d(p,x):(l=p,o||(o=setTimeout(()=>{o=null,d(l)},a-E)))},()=>l&&d(l)]}const mg=(e,t,r=3)=>{let a=0;const l=qF(50,250);return GF(o=>{const d=o.loaded,h=o.lengthComputable?o.total:void 0,g=d-a,p=l(g),x=d<=h;a=d;const E={loaded:d,total:h,progress:h?d/h:void 0,bytes:g,rate:p||void 0,estimated:p&&h&&x?(h-d)/p:void 0,event:o,lengthComputable:h!=null,[t?"download":"upload"]:!0};e(E)},r)},b4=(e,t)=>{const r=e!=null;return[a=>t[0]({lengthComputable:r,total:e,loaded:a}),t[1]]},v4=e=>(...t)=>Re.asap(()=>e(...t)),YF=mn.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,mn.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(mn.origin),mn.navigator&&/(msie|trident)/i.test(mn.navigator.userAgent)):()=>!0,XF=mn.hasStandardBrowserEnv?{write(e,t,r,a,l,o,d){if(typeof document>"u")return;const h=[`${e}=${encodeURIComponent(t)}`];Re.isNumber(r)&&h.push(`expires=${new Date(r).toUTCString()}`),Re.isString(a)&&h.push(`path=${a}`),Re.isString(l)&&h.push(`domain=${l}`),o===!0&&h.push("secure"),Re.isString(d)&&h.push(`SameSite=${d}`),document.cookie=h.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function WF(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function KF(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Z_(e,t,r){let a=!WF(t);return e&&(a||r==!1)?KF(e,t):t}const E4=e=>e instanceof jn?{...e}:e;function Mc(e,t){t=t||{};const r={};function a(p,x,E,C){return Re.isPlainObject(p)&&Re.isPlainObject(x)?Re.merge.call({caseless:C},p,x):Re.isPlainObject(x)?Re.merge({},x):Re.isArray(x)?x.slice():x}function l(p,x,E,C){if(Re.isUndefined(x)){if(!Re.isUndefined(p))return a(void 0,p,E,C)}else return a(p,x,E,C)}function o(p,x){if(!Re.isUndefined(x))return a(void 0,x)}function d(p,x){if(Re.isUndefined(x)){if(!Re.isUndefined(p))return a(void 0,p)}else return a(void 0,x)}function h(p,x,E){if(E in t)return a(p,x);if(E in e)return a(void 0,p)}const g={url:o,method:o,data:o,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:h,headers:(p,x,E)=>l(E4(p),E4(x),E,!0)};return Re.forEach(Object.keys({...e,...t}),function(x){const E=g[x]||l,C=E(e[x],t[x],x);Re.isUndefined(C)&&E!==h||(r[x]=C)}),r}const Q_=e=>{const t=Mc({},e);let{data:r,withXSRFToken:a,xsrfHeaderName:l,xsrfCookieName:o,headers:d,auth:h}=t;if(t.headers=d=jn.from(d),t.url=G_(Z_(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),h&&d.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),Re.isFormData(r)){if(mn.hasStandardBrowserEnv||mn.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(Re.isFunction(r.getHeaders)){const g=r.getHeaders(),p=["content-type","content-length"];Object.entries(g).forEach(([x,E])=>{p.includes(x.toLowerCase())&&d.set(x,E)})}}if(mn.hasStandardBrowserEnv&&(a&&Re.isFunction(a)&&(a=a(t)),a||a!==!1&&YF(t.url))){const g=l&&o&&XF.read(o);g&&d.set(l,g)}return t},ZF=typeof XMLHttpRequest<"u",QF=ZF&&function(e){return new Promise(function(r,a){const l=Q_(e);let o=l.data;const d=jn.from(l.headers).normalize();let{responseType:h,onUploadProgress:g,onDownloadProgress:p}=l,x,E,C,O,_;function P(){O&&O(),_&&_(),l.cancelToken&&l.cancelToken.unsubscribe(x),l.signal&&l.signal.removeEventListener("abort",x)}let k=new XMLHttpRequest;k.open(l.method.toUpperCase(),l.url,!0),k.timeout=l.timeout;function I(){if(!k)return;const R=jn.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),j={data:!h||h==="text"||h==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:R,config:e,request:k};K_(function(L){r(L),P()},function(L){a(L),P()},j),k=null}"onloadend"in k?k.onloadend=I:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(I)},k.onabort=function(){k&&(a(new Ft("Request aborted",Ft.ECONNABORTED,e,k)),k=null)},k.onerror=function(Y){const j=Y&&Y.message?Y.message:"Network Error",z=new Ft(j,Ft.ERR_NETWORK,e,k);z.event=Y||null,a(z),k=null},k.ontimeout=function(){let Y=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const j=l.transitional||Y_;l.timeoutErrorMessage&&(Y=l.timeoutErrorMessage),a(new Ft(Y,j.clarifyTimeoutError?Ft.ETIMEDOUT:Ft.ECONNABORTED,e,k)),k=null},o===void 0&&d.setContentType(null),"setRequestHeader"in k&&Re.forEach(d.toJSON(),function(Y,j){k.setRequestHeader(j,Y)}),Re.isUndefined(l.withCredentials)||(k.withCredentials=!!l.withCredentials),h&&h!=="json"&&(k.responseType=l.responseType),p&&([C,_]=mg(p,!0),k.addEventListener("progress",C)),g&&k.upload&&([E,O]=mg(g),k.upload.addEventListener("progress",E),k.upload.addEventListener("loadend",O)),(l.cancelToken||l.signal)&&(x=R=>{k&&(a(!R||R.type?new hd(null,e,k):R),k.abort(),k=null)},l.cancelToken&&l.cancelToken.subscribe(x),l.signal&&(l.signal.aborted?x():l.signal.addEventListener("abort",x)));const F=$F(l.url);if(F&&mn.protocols.indexOf(F)===-1){a(new Ft("Unsupported protocol "+F+":",Ft.ERR_BAD_REQUEST,e));return}k.send(o||null)})},JF=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let a=new AbortController,l;const o=function(p){if(!l){l=!0,h();const x=p instanceof Error?p:this.reason;a.abort(x instanceof Ft?x:new hd(x instanceof Error?x.message:x))}};let d=t&&setTimeout(()=>{d=null,o(new Ft(`timeout ${t} of ms exceeded`,Ft.ETIMEDOUT))},t);const h=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(o):p.removeEventListener("abort",o)}),e=null)};e.forEach(p=>p.addEventListener("abort",o));const{signal:g}=a;return g.unsubscribe=()=>Re.asap(h),g}},eU=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let a=0,l;for(;a<r;)l=a+t,yield e.slice(a,l),a=l},tU=async function*(e,t){for await(const r of rU(e))yield*eU(r,t)},rU=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:a}=await t.read();if(r)break;yield a}}finally{await t.cancel()}},w4=(e,t,r,a)=>{const l=tU(e,t);let o=0,d,h=g=>{d||(d=!0,a&&a(g))};return new ReadableStream({async pull(g){try{const{done:p,value:x}=await l.next();if(p){h(),g.close();return}let E=x.byteLength;if(r){let C=o+=E;r(C)}g.enqueue(new Uint8Array(x))}catch(p){throw h(p),p}},cancel(g){return h(g),l.return()}},{highWaterMark:2})},N4=64*1024,{isFunction:uh}=Re,aU=(({Request:e,Response:t})=>({Request:e,Response:t}))(Re.global),{ReadableStream:S4,TextEncoder:C4}=Re.global,A4=(e,...t)=>{try{return!!e(...t)}catch{return!1}},nU=e=>{e=Re.merge.call({skipUndefined:!0},aU,e);const{fetch:t,Request:r,Response:a}=e,l=t?uh(t):typeof fetch=="function",o=uh(r),d=uh(a);if(!l)return!1;const h=l&&uh(S4),g=l&&(typeof C4=="function"?(_=>P=>_.encode(P))(new C4):async _=>new Uint8Array(await new r(_).arrayBuffer())),p=o&&h&&A4(()=>{let _=!1;const P=new r(mn.origin,{body:new S4,method:"POST",get duplex(){return _=!0,"half"}}).headers.has("Content-Type");return _&&!P}),x=d&&h&&A4(()=>Re.isReadableStream(new a("").body)),E={stream:x&&(_=>_.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(_=>{!E[_]&&(E[_]=(P,k)=>{let I=P&&P[_];if(I)return I.call(P);throw new Ft(`Response type '${_}' is not supported`,Ft.ERR_NOT_SUPPORT,k)})});const C=async _=>{if(_==null)return 0;if(Re.isBlob(_))return _.size;if(Re.isSpecCompliantForm(_))return(await new r(mn.origin,{method:"POST",body:_}).arrayBuffer()).byteLength;if(Re.isArrayBufferView(_)||Re.isArrayBuffer(_))return _.byteLength;if(Re.isURLSearchParams(_)&&(_=_+""),Re.isString(_))return(await g(_)).byteLength},O=async(_,P)=>{const k=Re.toFiniteNumber(_.getContentLength());return k??C(P)};return async _=>{let{url:P,method:k,data:I,signal:F,cancelToken:R,timeout:Y,onDownloadProgress:j,onUploadProgress:z,responseType:L,headers:q,withCredentials:V="same-origin",fetchOptions:W}=Q_(_),H=t||fetch;L=L?(L+"").toLowerCase():"text";let $=JF([F,R&&R.toAbortSignal()],Y),ce=null;const me=$&&$.unsubscribe&&(()=>{$.unsubscribe()});let ae;try{if(z&&p&&k!=="get"&&k!=="head"&&(ae=await O(q,I))!==0){let K=new r(P,{method:"POST",body:I,duplex:"half"}),ee;if(Re.isFormData(I)&&(ee=K.headers.get("content-type"))&&q.setContentType(ee),K.body){const[ge,le]=b4(ae,mg(v4(z)));I=w4(K.body,N4,ge,le)}}Re.isString(V)||(V=V?"include":"omit");const J=o&&"credentials"in r.prototype,se={...W,signal:$,method:k.toUpperCase(),headers:q.normalize().toJSON(),body:I,duplex:"half",credentials:J?V:void 0};ce=o&&new r(P,se);let Ee=await(o?H(ce,W):H(P,se));const we=x&&(L==="stream"||L==="response");if(x&&(j||we&&me)){const K={};["status","statusText","headers"].forEach(Ce=>{K[Ce]=Ee[Ce]});const ee=Re.toFiniteNumber(Ee.headers.get("content-length")),[ge,le]=j&&b4(ee,mg(v4(j),!0))||[];Ee=new a(w4(Ee.body,N4,ge,()=>{le&&le(),me&&me()}),K)}L=L||"text";let te=await E[Re.findKey(E,L)||"text"](Ee,_);return!we&&me&&me(),await new Promise((K,ee)=>{K_(K,ee,{data:te,headers:jn.from(Ee.headers),status:Ee.status,statusText:Ee.statusText,config:_,request:ce})})}catch(J){throw me&&me(),J&&J.name==="TypeError"&&/Load failed|fetch/i.test(J.message)?Object.assign(new Ft("Network Error",Ft.ERR_NETWORK,_,ce),{cause:J.cause||J}):Ft.from(J,J&&J.code,_,ce)}}},sU=new Map,J_=e=>{let t=e&&e.env||{};const{fetch:r,Request:a,Response:l}=t,o=[a,l,r];let d=o.length,h=d,g,p,x=sU;for(;h--;)g=o[h],p=x.get(g),p===void 0&&x.set(g,p=h?new Map:nU(t)),x=p;return p};J_();const C2={http:wF,xhr:QF,fetch:{get:J_}};Re.forEach(C2,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const T4=e=>`- ${e}`,lU=e=>Re.isFunction(e)||e===null||e===!1;function iU(e,t){e=Re.isArray(e)?e:[e];const{length:r}=e;let a,l;const o={};for(let d=0;d<r;d++){a=e[d];let h;if(l=a,!lU(a)&&(l=C2[(h=String(a)).toLowerCase()],l===void 0))throw new Ft(`Unknown adapter '${h}'`);if(l&&(Re.isFunction(l)||(l=l.get(t))))break;o[h||"#"+d]=l}if(!l){const d=Object.entries(o).map(([g,p])=>`adapter ${g} `+(p===!1?"is not supported by the environment":"is not available in the build"));let h=r?d.length>1?`since :
`+d.map(T4).join(`
`):" "+T4(d[0]):"as no adapter specified";throw new Ft("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return l}const eD={getAdapter:iU,adapters:C2};function Cx(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hd(null,e)}function O4(e){return Cx(e),e.headers=jn.from(e.headers),e.data=Sx.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),eD.getAdapter(e.adapter||bf.adapter,e)(e).then(function(a){return Cx(e),a.data=Sx.call(e,e.transformResponse,a),a.headers=jn.from(a.headers),a},function(a){return W_(a)||(Cx(e),a&&a.response&&(a.response.data=Sx.call(e,e.transformResponse,a.response),a.response.headers=jn.from(a.response.headers))),Promise.reject(a)})}const tD="1.13.2",Tp={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Tp[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const _4={};Tp.transitional=function(t,r,a){function l(o,d){return"[Axios v"+tD+"] Transitional option '"+o+"'"+d+(a?". "+a:"")}return(o,d,h)=>{if(t===!1)throw new Ft(l(d," has been removed"+(r?" in "+r:"")),Ft.ERR_DEPRECATED);return r&&!_4[d]&&(_4[d]=!0,console.warn(l(d," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,d,h):!0}};Tp.spelling=function(t){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function oU(e,t,r){if(typeof e!="object")throw new Ft("options must be an object",Ft.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let l=a.length;for(;l-- >0;){const o=a[l],d=t[o];if(d){const h=e[o],g=h===void 0||d(h,o,e);if(g!==!0)throw new Ft("option "+o+" must be "+g,Ft.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ft("Unknown option "+o,Ft.ERR_BAD_OPTION)}}const Zh={assertOptions:oU,validators:Tp},Nl=Zh.validators;let Ac=class{constructor(t){this.defaults=t||{},this.interceptors={request:new y4,response:new y4}}async request(t,r){try{return await this._request(t,r)}catch(a){if(a instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const o=l.stack?l.stack.replace(/^.+\n/,""):"";try{a.stack?o&&!String(a.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+o):a.stack=o}catch{}}throw a}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Mc(this.defaults,r);const{transitional:a,paramsSerializer:l,headers:o}=r;a!==void 0&&Zh.assertOptions(a,{silentJSONParsing:Nl.transitional(Nl.boolean),forcedJSONParsing:Nl.transitional(Nl.boolean),clarifyTimeoutError:Nl.transitional(Nl.boolean)},!1),l!=null&&(Re.isFunction(l)?r.paramsSerializer={serialize:l}:Zh.assertOptions(l,{encode:Nl.function,serialize:Nl.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Zh.assertOptions(r,{baseUrl:Nl.spelling("baseURL"),withXsrfToken:Nl.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let d=o&&Re.merge(o.common,o[r.method]);o&&Re.forEach(["delete","get","head","post","put","patch","common"],_=>{delete o[_]}),r.headers=jn.concat(d,o);const h=[];let g=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(r)===!1||(g=g&&P.synchronous,h.unshift(P.fulfilled,P.rejected))});const p=[];this.interceptors.response.forEach(function(P){p.push(P.fulfilled,P.rejected)});let x,E=0,C;if(!g){const _=[O4.bind(this),void 0];for(_.unshift(...h),_.push(...p),C=_.length,x=Promise.resolve(r);E<C;)x=x.then(_[E++],_[E++]);return x}C=h.length;let O=r;for(;E<C;){const _=h[E++],P=h[E++];try{O=_(O)}catch(k){P.call(this,k);break}}try{x=O4.call(this,O)}catch(_){return Promise.reject(_)}for(E=0,C=p.length;E<C;)x=x.then(p[E++],p[E++]);return x}getUri(t){t=Mc(this.defaults,t);const r=Z_(t.baseURL,t.url,t.allowAbsoluteUrls);return G_(r,t.params,t.paramsSerializer)}};Re.forEach(["delete","get","head","options"],function(t){Ac.prototype[t]=function(r,a){return this.request(Mc(a||{},{method:t,url:r,data:(a||{}).data}))}});Re.forEach(["post","put","patch"],function(t){function r(a){return function(o,d,h){return this.request(Mc(h||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:o,data:d}))}}Ac.prototype[t]=r(),Ac.prototype[t+"Form"]=r(!0)});let cU=class rD{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const a=this;this.promise.then(l=>{if(!a._listeners)return;let o=a._listeners.length;for(;o-- >0;)a._listeners[o](l);a._listeners=null}),this.promise.then=l=>{let o;const d=new Promise(h=>{a.subscribe(h),o=h}).then(l);return d.cancel=function(){a.unsubscribe(o)},d},t(function(o,d,h){a.reason||(a.reason=new hd(o,d,h),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=a=>{t.abort(a)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new rD(function(l){t=l}),cancel:t}}};function uU(e){return function(r){return e.apply(null,r)}}function dU(e){return Re.isObject(e)&&e.isAxiosError===!0}const Bv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Bv).forEach(([e,t])=>{Bv[t]=e});function aD(e){const t=new Ac(e),r=I_(Ac.prototype.request,t);return Re.extend(r,Ac.prototype,t,{allOwnKeys:!0}),Re.extend(r,t,null,{allOwnKeys:!0}),r.create=function(l){return aD(Mc(e,l))},r}const ma=aD(bf);ma.Axios=Ac;ma.CanceledError=hd;ma.CancelToken=cU;ma.isCancel=W_;ma.VERSION=tD;ma.toFormData=Ap;ma.AxiosError=Ft;ma.Cancel=ma.CanceledError;ma.all=function(t){return Promise.all(t)};ma.spread=uU;ma.isAxiosError=dU;ma.mergeConfig=Mc;ma.AxiosHeaders=jn;ma.formToJSON=e=>X_(Re.isHTMLForm(e)?new FormData(e):e);ma.getAdapter=eD.getAdapter;ma.HttpStatusCode=Bv;ma.default=ma;const{Axios:Mme,AxiosError:Ime,CanceledError:Rme,isCancel:Lme,CancelToken:Bme,VERSION:Fme,all:Ume,Cancel:jme,isAxiosError:zme,spread:Vme,toFormData:Hme,AxiosHeaders:$me,HttpStatusCode:qme,formToJSON:Gme,getAdapter:Yme,mergeConfig:Xme}=ma,dn={ACCESS_TOKEN:"accessToken",REFRESH_TOKEN:"refreshToken",ADMIN_DATA:"adminData",REMEMBER_ME:"rememberMe"},Lm=()=>localStorage.getItem(dn.REMEMBER_ME)==="true"?localStorage:sessionStorage,el={getAccessToken:()=>{const e=Lm().getItem(dn.ACCESS_TOKEN);return console.log("[Storage] Getting access token:",e?"exists":"null"),e},getRefreshToken:()=>{const e=Lm().getItem(dn.REFRESH_TOKEN);return console.log("[Storage] Getting refresh token:",e?"exists":"null"),e},setTokens:({accessToken:e,refreshToken:t},r=!1)=>{console.log("[Storage] Setting tokens, rememberMe:",r),localStorage.setItem(dn.REMEMBER_ME,String(r));const a=r?localStorage:sessionStorage;e&&a.setItem(dn.ACCESS_TOKEN,e),t&&a.setItem(dn.REFRESH_TOKEN,t)},setAccessToken:e=>{console.log("[Storage] Updating access token"),Lm().setItem(dn.ACCESS_TOKEN,e)},clearTokens:()=>{console.log("[Storage] Clearing all tokens"),localStorage.removeItem(dn.ACCESS_TOKEN),localStorage.removeItem(dn.REFRESH_TOKEN),localStorage.removeItem(dn.REMEMBER_ME),sessionStorage.removeItem(dn.ACCESS_TOKEN),sessionStorage.removeItem(dn.REFRESH_TOKEN)},hasTokens:()=>!!el.getAccessToken()&&!!el.getRefreshToken()},No={getAdmin:()=>{try{const e=Lm().getItem(dn.ADMIN_DATA),t=e?JSON.parse(e):null;return console.log("[Storage] Getting admin data:",t?t.email:"null"),t}catch(e){return console.error("[Storage] Error parsing admin data:",e),null}},setAdmin:e=>{console.log("[Storage] Setting admin data:",e?.email),Lm().setItem(dn.ADMIN_DATA,JSON.stringify(e))},clearAdmin:()=>{console.log("[Storage] Clearing admin data"),localStorage.removeItem(dn.ADMIN_DATA),sessionStorage.removeItem(dn.ADMIN_DATA)}},Fv=()=>{console.log("[Storage] Clearing all auth data"),el.clearTokens(),No.clearAdmin()},A2="https://motivata.synquic.com/api";console.log("[API] Initializing with base URL:",A2);const ci=ma.create({baseURL:A2,timeout:3e4,headers:{"Content-Type":"application/json"}});let dh=!1,Qh=[];const D4=(e,t=null)=>{console.log("[API] Processing queued requests:",Qh.length),Qh.forEach(r=>{e?r.reject(e):r.resolve(t)}),Qh=[]},fg=e=>{if(!e||typeof e!="object")return e;if(Array.isArray(e))return e.map(fg);const t=["password","currentPassword","newPassword","refreshToken","accessToken"],r={...e};return Object.keys(r).forEach(a=>{t.includes(a)?r[a]="***MASKED***":typeof r[a]=="object"&&r[a]!==null&&(r[a]=fg(r[a]))}),r};ci.interceptors.request.use(e=>{const t=el.getAccessToken();return t&&(e.headers.Authorization=`Bearer ${t}`),console.log(`[API] Request: ${e.method?.toUpperCase()} ${e.url}`,{hasAuth:!!t,body:e.data?fg(e.data):null,params:e.params||null}),e},e=>(console.error("[API] Request error:",e.message),Promise.reject(e)));ci.interceptors.response.use(e=>(console.log(`[API] Response: ${e.status} ${e.config.url}`,{message:e.data?.message,data:e.data?.data?fg(e.data.data):null}),e),async e=>{const t=e.config;if(console.error("[API] Response error:",{status:e.response?.status,url:t?.url,message:e.response?.data?.message||e.message}),e.response?.status===401&&!t._retry&&!t.url?.includes("/auth/refresh-token")&&!t.url?.includes("/auth/login")){if(console.log("[API] Token expired, attempting refresh..."),dh)return console.log("[API] Refresh in progress, queueing request"),new Promise((a,l)=>{Qh.push({resolve:a,reject:l})}).then(a=>(t.headers.Authorization=`Bearer ${a}`,ci(t))).catch(a=>Promise.reject(a));t._retry=!0,dh=!0;const r=el.getRefreshToken();if(!r)return console.log("[API] No refresh token available, clearing auth"),dh=!1,Fv(),window.location.href="/login",Promise.reject(e);try{console.log("[API] Refreshing access token...");const a=await ma.post(`${A2}/web/auth/refresh-token`,{refreshToken:r}),{accessToken:l}=a.data.data;return console.log("[API] Token refresh successful"),el.setAccessToken(l),D4(null,l),t.headers.Authorization=`Bearer ${l}`,ci(t)}catch(a){return console.error("[API] Token refresh failed:",a.response?.data?.message),D4(a,null),Fv(),window.location.href="/login",Promise.reject(a)}finally{dh=!1}}return Promise.reject(e)});const ze=async e=>{try{const t=await e;return{success:!0,data:t.data.data,message:t.data.message,error:null,status:t.data.status||t.status}}catch(t){const r={success:!1,data:null,message:t.response?.data?.message||"An unexpected error occurred",error:t.response?.data?.error||t.message,status:t.response?.status||500};return console.error("[API] Handled error:",r),r}},je={get:(e,t={})=>ci.get(e,t),post:(e,t={},r={})=>ci.post(e,t,r),put:(e,t={},r={})=>ci.put(e,t,r),delete:(e,t={})=>ci.delete(e,t),patch:(e,t={},r={})=>ci.patch(e,t,r)},uc={LOGIN:"/web/auth/login",REGISTER:"/web/auth/register",LOGOUT:"/web/auth/logout",REFRESH_TOKEN:"/web/auth/refresh-token",PROFILE:"/web/auth/profile",CHANGE_PASSWORD:"/web/auth/change-password"},po={login:async(e,t=!1)=>{console.log("[Auth] Attempting login for:",e.username);const r=await ze(je.post(uc.LOGIN,{username:e.username,password:e.password}));if(r.success&&r.data){const{admin:a,tokens:l}=r.data;el.setTokens({accessToken:l.accessToken,refreshToken:l.refreshToken},t),No.setAdmin(a),console.log("[Auth] Login successful for:",a.username),console.log("[Auth] Admin role:",a.role)}else console.error("[Auth] Login failed:",r.message);return r},register:async(e,t=!1)=>{console.log("[Auth] Attempting registration for:",e.username);const r=await ze(je.post(uc.REGISTER,e));if(r.success&&r.data){const{admin:a,tokens:l}=r.data;el.setTokens({accessToken:l.accessToken,refreshToken:l.refreshToken},t),No.setAdmin(a),console.log("[Auth] Registration successful for:",a.username)}else console.error("[Auth] Registration failed:",r.message);return r},logout:async()=>{console.log("[Auth] Attempting logout");try{await ze(je.post(uc.LOGOUT)),console.log("[Auth] Server logout successful")}catch(e){console.warn("[Auth] Server logout failed, clearing local data anyway:",e.message)}return Fv(),console.log("[Auth] Local auth data cleared"),{success:!0,message:"Logged out successfully"}},getProfile:async()=>{console.log("[Auth] Fetching profile");const e=await ze(je.get(uc.PROFILE));return e.success&&e.data&&(No.setAdmin(e.data.admin),console.log("[Auth] Profile fetched for:",e.data.admin.username)),e},updateProfile:async e=>{console.log("[Auth] Updating profile");const t=await ze(je.put(uc.PROFILE,e));return t.success&&t.data&&(No.setAdmin(t.data.admin),console.log("[Auth] Profile updated successfully")),t},changePassword:async e=>{console.log("[Auth] Changing password");const t=await ze(je.put(uc.CHANGE_PASSWORD,e));return t.success?console.log("[Auth] Password changed successfully"):console.error("[Auth] Password change failed:",t.message),t},refreshToken:async()=>{const e=el.getRefreshToken();if(!e)return console.log("[Auth] No refresh token available"),{success:!1,accessToken:null,error:"No refresh token"};console.log("[Auth] Refreshing access token");const t=await ze(je.post(uc.REFRESH_TOKEN,{refreshToken:e}));return t.success&&t.data?(el.setAccessToken(t.data.accessToken),console.log("[Auth] Token refreshed successfully"),{success:!0,accessToken:t.data.accessToken,error:null}):(console.error("[Auth] Token refresh failed:",t.message),{success:!1,accessToken:null,error:t.message})},isAuthenticated:()=>{const e=el.hasTokens();return console.log("[Auth] Checking authentication:",e),e},getStoredAdmin:()=>No.getAdmin(),hasRole:e=>{const t=No.getAdmin();return t?(Array.isArray(e)?e:[e]).includes(t.role):!1},hasAccess:e=>{const t=No.getAdmin();return t&&t.access?.includes(e)||!1}},nD=N.createContext(null),mU=({children:e})=>{const[t,r]=N.useState(null),[a,l]=N.useState(!1),[o,d]=N.useState(!0),[h,g]=N.useState(null);N.useEffect(()=>{(async()=>{console.log("[AuthContext] Initializing auth state...");try{if(po.isAuthenticated()){console.log("[AuthContext] Found stored tokens, fetching profile...");const Y=await po.getProfile();Y.success?(r(Y.data.admin),l(!0),console.log("[AuthContext] Auth initialized successfully")):(console.log("[AuthContext] Profile fetch failed, token may be expired"),l(!1),r(null))}else console.log("[AuthContext] No stored tokens found"),l(!1),r(null)}catch(Y){console.error("[AuthContext] Error initializing auth:",Y),l(!1),r(null)}finally{d(!1)}})()},[]);const p=N.useCallback(async(R,Y=!1)=>{console.log("[AuthContext] Login attempt"),g(null),d(!0);try{const j=await po.login(R,Y);return j.success?(r(j.data.admin),l(!0),console.log("[AuthContext] Login successful"),{success:!0,data:j.data}):(g(j.message),console.error("[AuthContext] Login failed:",j.message),{success:!1,error:j.message})}catch(j){const z="An unexpected error occurred during login";return g(z),console.error("[AuthContext] Login error:",j),{success:!1,error:z}}finally{d(!1)}},[]),x=N.useCallback(async(R,Y=!1)=>{console.log("[AuthContext] Register attempt"),g(null),d(!0);try{const j=await po.register(R,Y);return j.success?(r(j.data.admin),l(!0),console.log("[AuthContext] Registration successful"),{success:!0,data:j.data}):(g(j.message),console.error("[AuthContext] Registration failed:",j.message),{success:!1,error:j.message})}catch(j){const z="An unexpected error occurred during registration";return g(z),console.error("[AuthContext] Registration error:",j),{success:!1,error:z}}finally{d(!1)}},[]),E=N.useCallback(async()=>{console.log("[AuthContext] Logout attempt"),d(!0);try{return await po.logout(),r(null),l(!1),g(null),console.log("[AuthContext] Logout successful"),{success:!0}}catch(R){return console.error("[AuthContext] Logout error:",R),r(null),l(!1),{success:!0}}finally{d(!1)}},[]),C=N.useCallback(async()=>{console.log("[AuthContext] Refreshing profile");try{const R=await po.getProfile();return R.success?(r(R.data.admin),console.log("[AuthContext] Profile refreshed"),{success:!0,data:R.data.admin}):(console.error("[AuthContext] Profile refresh failed:",R.message),{success:!1,error:R.message})}catch(R){return console.error("[AuthContext] Profile refresh error:",R),{success:!1,error:"Failed to refresh profile"}}},[]),O=N.useCallback(async R=>{console.log("[AuthContext] Updating profile"),g(null);try{const Y=await po.updateProfile(R);return Y.success?(r(Y.data.admin),console.log("[AuthContext] Profile updated"),{success:!0,data:Y.data.admin}):(g(Y.message),{success:!1,error:Y.message})}catch{const j="Failed to update profile";return g(j),{success:!1,error:j}}},[]),_=N.useCallback(async R=>{console.log("[AuthContext] Changing password"),g(null);try{const Y=await po.changePassword(R);return Y.success?(console.log("[AuthContext] Password changed"),{success:!0}):(g(Y.message),{success:!1,error:Y.message})}catch{const j="Failed to change password";return g(j),{success:!1,error:j}}},[]),P=N.useCallback(()=>{g(null)},[]),k=N.useCallback(R=>t?(Array.isArray(R)?R:[R]).includes(t.role):!1,[t]),I=N.useCallback(R=>t&&t.access?.includes(R)||!1,[t]),F={admin:t,isAuthenticated:a,isLoading:o,error:h,login:p,register:x,logout:E,refreshProfile:C,updateProfile:O,changePassword:_,clearError:P,hasRole:k,hasAccess:I};return n.createElement(nD.Provider,{value:F},e)},Us=()=>{const e=N.useContext(nD);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},sD=()=>n.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-100"},n.createElement("div",{className:"flex flex-col items-center gap-4"},n.createElement("div",{className:"w-12 h-12 border-4 border-gray-800 border-t-transparent rounded-full animate-spin"}),n.createElement("p",{className:"text-gray-600"},"Loading..."))),k4=()=>n.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-100"},n.createElement("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center max-w-md"},n.createElement("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},n.createElement("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}))),n.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Access Denied"),n.createElement("p",{className:"text-gray-600 mb-6"},"You don't have permission to access this page."),n.createElement("a",{href:"/dashboard",className:"inline-block px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Go to Dashboard"))),fU=({children:e,allowedRoles:t=[],requiredAccess:r=[],redirectTo:a="/login"})=>{const{isAuthenticated:l,isLoading:o,admin:d,hasRole:h,hasAccess:g}=Us(),p=Fs();return console.log("[ProtectedRoute] Checking access:",{isAuthenticated:l,isLoading:o,path:p.pathname,adminRole:d?.role}),o?(console.log("[ProtectedRoute] Loading auth state..."),n.createElement(sD,null)):l?t.length>0&&!h(t)?(console.log("[ProtectedRoute] Access denied - role mismatch:",{required:t,actual:d?.role}),n.createElement(k4,null)):r.length>0&&!r.every(E=>g(E))?(console.log("[ProtectedRoute] Access denied - missing permissions:",{required:r,actual:d?.access}),n.createElement(k4,null)):(console.log("[ProtectedRoute] Access granted"),e):(console.log("[ProtectedRoute] Not authenticated, redirecting to:",a),n.createElement(dg,{to:a,state:{from:p},replace:!0}))},hU=({children:e,redirectTo:t="/dashboard"})=>{const{isAuthenticated:r,isLoading:a}=Us(),l=Fs();if(console.log("[PublicRoute] Checking:",{isAuthenticated:r,isLoading:a}),a)return n.createElement(sD,null);if(r){const o=l.state?.from?.pathname||t;return console.log("[PublicRoute] Already authenticated, redirecting to:",o),n.createElement(dg,{to:o,replace:!0})}return e};const gU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pU=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),P4=e=>{const t=pU(e);return t.charAt(0).toUpperCase()+t.slice(1)},lD=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),yU=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var xU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const bU=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:l="",children:o,iconNode:d,...h},g)=>N.createElement("svg",{ref:g,...xU,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:lD("lucide",l),...!o&&!yU(h)&&{"aria-hidden":"true"},...h},[...d.map(([p,x])=>N.createElement(p,x)),...Array.isArray(o)?o:[o]]));const nt=(e,t)=>{const r=N.forwardRef(({className:a,...l},o)=>N.createElement(bU,{ref:o,iconNode:t,className:lD(`lucide-${gU(P4(e))}`,`lucide-${e}`,a),...l}));return r.displayName=P4(e),r};const vU=[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"1qyhux"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]],EU=nt("armchair",vU);const wU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],NU=nt("arrow-left",wU);const SU=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],M4=nt("award",SU);const CU=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],AU=nt("banknote",CU);const TU=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],hg=nt("bell",TU);const OU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],_U=nt("calendar-check",OU);const DU=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],Ax=nt("calendar-range",DU);const kU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]],mh=nt("calendar-x",kU);const PU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Qr=nt("calendar",PU);const MU=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ll=nt("chart-column",MU);const IU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ds=nt("check",IU);const RU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ml=nt("chevron-down",RU);const LU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],iD=nt("chevron-right",LU);const BU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],oD=nt("chevron-left",BU);const FU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],UU=nt("chevron-up",FU);const jU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ir=nt("circle-alert",jU);const zU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_i=nt("circle-check-big",zU);const VU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Hm=nt("circle-check",VU);const HU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Jh=nt("circle-question-mark",HU);const $U=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ns=nt("circle-x",$U);const qU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],eg=nt("clipboard-list",qU);const GU=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Pa=nt("clock",GU);const YU=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],gg=nt("copy",YU);const XU=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],WU=nt("credit-card",XU);const KU=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ZU=nt("crown",KU);const QU=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],JU=nt("dollar-sign",QU);const ej=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],tj=nt("download",ej);const rj=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Op=nt("external-link",rj);const aj=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],cD=nt("eye-off",aj);const nj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],da=nt("eye",nj);const sj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],lj=nt("file-play",sj);const ij=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Uv=nt("file-spreadsheet",ij);const oj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],pg=nt("file-text",oj);const cj=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Il=nt("funnel",cj);const uj=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],dj=nt("gift",uj);const mj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],jv=nt("globe",mj);const fj=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],_p=nt("grip-vertical",fj);const hj=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],T2=nt("hash",hj);const gj=[["path",{d:"M15 15.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"nrt1m3"}],["path",{d:"M21 12.17V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6",key:"99hgts"}],["path",{d:"m6 21 5-5",key:"1wyjai"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],pj=nt("image-play",gj);const yj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ic=nt("image",yj);const xj=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],uD=nt("indian-rupee",xj);const bj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],vj=nt("info",bj);const Ej=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],wj=nt("layout-dashboard",Ej);const Nj=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],dD=nt("layout-grid",Nj);const Sj=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Cj=nt("link",Sj);const Aj=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],yg=nt("list-checks",Aj);const Tj=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],O2=nt("list",Tj);const Oj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],xt=nt("loader-circle",Oj);const _j=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Dj=nt("lock",_j);const kj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Pj=nt("log-out",kj);const Mj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ij=nt("mail",Mj);const Rj=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],_2=nt("map-pin",Rj);const Lj=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],zv=nt("message-circle",Lj);const Bj=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Fj=nt("message-square",Bj);const Uj=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],I4=nt("pen-line",Uj);const jj=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],mD=nt("pen",jj);const zj=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Vj=nt("percent",zj);const Hj=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Yu=nt("phone",Hj);const $j=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],fD=nt("play",$j);const qj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Mr=nt("plus",qj);const Gj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],os=nt("refresh-cw",Gj);const Yj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],xg=nt("rotate-ccw",Yj);const Xj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Wj=nt("save",Xj);const Kj=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],Zj=nt("scan-line",Kj);const Qj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ya=nt("search",Qj);const Jj=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],ez=nt("settings-2",Jj);const tz=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rz=nt("settings",tz);const az=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],nz=nt("share-2",az);const sz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],lz=nt("shield-check",sz);const iz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],oz=nt("shield",iz);const cz=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],uz=nt("sliders-horizontal",cz);const dz=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mz=nt("square-check-big",dz);const fz=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],bn=nt("square-pen",fz);const hz=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],gz=nt("star",hz);const pz=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Xu=nt("tag",pz);const yz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Wu=nt("target",yz);const xz=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],bz=nt("text-align-start",xz);const vz=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],Mu=nt("ticket",vz);const Ez=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Rl=nt("toggle-left",Ez);const wz=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],yi=nt("toggle-right",wz);const Nz=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],xr=nt("trash-2",Nz);const Sz=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Cz=nt("trash",Sz);const Az=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],hD=nt("trending-up",Az);const Tz=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Dp=nt("triangle-alert",Tz);const Oz=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Vu=nt("trophy",Oz);const _z=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],gD=nt("upload",_z);const Dz=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],kz=nt("user-cog",Dz);const Pz=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],pD=nt("user-plus",Pz);const Mz=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],xi=nt("user",Mz);const Iz=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],Rz=nt("users-round",Iz);const Lz=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Oo=nt("users",Lz);const Bz=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],hi=nt("video",Bz);const Fz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ia=nt("x",Fz);const Uz=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],yD=nt("zap",Uz),xD="/assets/Motivata-Dba061jL.png",jz="/assets/logo2-NMKQARNi.png";function zz({activeMenu:e,collapsed:t,isOpen:r,onClose:a}){const l=Ep(),{logout:o,admin:d}=Us(),h=()=>{o(),l("/login")},g=[{id:"dashboard",label:"Dashboard",icon:wj,path:"/dashboard",color:"blue"},{id:"events",label:"Events",icon:Qr,path:"/events",color:"purple"},{id:"users",label:"Users",icon:kz,path:"/users",color:"green"},{id:"admins",label:"Admins",icon:lz,path:"/admins",color:"orange"},{id:"cashtickets",label:"Cash Tickets",icon:AU,path:"/cash-tickets",color:"cyan"},{id:"vouchers",label:"Vouchers",icon:dj,path:"/vouchers",color:"pink"},{id:"sessions",label:"Sessions",icon:hi,path:"/sessions",color:"indigo"},{id:"quizes",label:"Quizes",icon:eg,path:"/quizes",color:"amber"},{id:"challenges",label:"Challenges",icon:Vu,path:"/challenges",color:"emerald"},{id:"polls",label:"Polls",icon:ll,path:"/polls",color:"rose"},{id:"stories",label:"Stories",icon:pj,path:"/stories",color:"sky"},{id:"memberships",label:"Memberships",icon:ZU,path:"/memberships",color:"slate"},{id:"settings",label:"Settings",icon:rz,path:"/settings",color:"gray"},{id:"clubs",label:"Clubs",icon:Rz,path:"/clubs",color:"fuchsia"},{id:"scan-qr",label:"Scan QR",icon:Zj,path:"/scan-qr",color:"teal"},{id:"ticket-reshare",label:"Ticket Reshare",icon:nz,path:"/ticket-reshare",color:"violet"}],p=d?.name||d?.username||"Admin",x=d?.email||"admin@motivata.com",E=d?.role||"Administrator",C=O=>O.split(" ").map(_=>_[0]).join("").toUpperCase().slice(0,2);return n.createElement("aside",{className:`
        ${t?"lg:w-20":"lg:w-72"}
        fixed lg:static inset-y-0 left-0 z-50
        w-72
        ${r?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        bg-gradient-to-b from-white to-gray-50/50
        border-r border-gray-200
        shadow-2xl lg:shadow-none
        flex flex-col
        transition-all duration-300 ease-in-out
        h-screen
        overflow-hidden
      `},n.createElement("div",{className:"p-5 lg:p-6 border-b border-gray-200/80 shrink-0 bg-white/80 backdrop-blur-sm"},n.createElement("div",{className:"flex items-start justify-between"},n.createElement("div",{className:`flex flex-col ${t?"items-center":"items-start"} min-w-0 flex-1`},n.createElement("img",{src:t?jz:xD,alt:"Motivata",className:`${t?"h-12 w-12":"h-16"} object-contain`}),!t&&n.createElement("p",{className:"text-xs text-gray-500 font-medium -mt-1 ml-4"},"Admin Panel")),n.createElement("button",{onClick:a,className:"lg:hidden p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-all active:scale-95","aria-label":"Close sidebar"},n.createElement(Ia,{className:"h-5 w-5"})))),n.createElement("nav",{className:"flex-1 p-3 lg:p-4 overflow-y-auto overflow-x-hidden custom-scrollbar"},n.createElement("ul",{className:"space-y-1"},g.map(O=>{const _=e===O.id;return n.createElement("li",{key:O.id},n.createElement(v2,{to:O.path,className:`
                    w-full flex items-center gap-3 px-3 py-3 rounded-xl
                    transition-all duration-200 group relative
                    ${_?"bg-gradient-to-r from-gray-800 to-gray-900 text-white shadow-lg shadow-gray-500/30":"text-gray-700 hover:bg-gray-100/80 hover:translate-x-1"}
                    ${t?"lg:justify-center lg:px-2":""}
                  `,title:t?O.label:""},n.createElement(O.icon,{className:`
                      h-5 w-5 shrink-0 transition-transform duration-200
                      ${_?"scale-110":"group-hover:scale-110"}
                    `}),!t&&n.createElement("span",{className:"font-semibold text-sm truncate"},O.label)))}))),n.createElement("div",{className:"border-t border-gray-200/80 shrink-0 bg-white/50 backdrop-blur-sm"},n.createElement("div",{className:`p-4 ${t?"lg:p-2":""}`},n.createElement("div",{className:`
              flex items-center gap-3 p-3 rounded-xl
              bg-gradient-to-br from-gray-50 to-gray-100/50
              border border-gray-200/50
              transition-all duration-200 hover:shadow-md
              ${t?"lg:justify-center lg:p-2":""}
            `,title:t?`${p} - ${E}`:""},n.createElement("div",{className:"relative shrink-0"},n.createElement("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-800 via-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-sm shadow-md ring-2 ring-white"},C(p)),n.createElement("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white shadow-sm"})),!t&&n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("p",{className:"text-sm font-bold text-gray-900 truncate"},p),n.createElement("p",{className:"text-xs text-gray-600 truncate"},x),n.createElement("div",{className:"flex items-center gap-1 mt-1"},n.createElement("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-[10px] font-semibold bg-blue-100 text-gray-900 border border-blue-200"},E))))),n.createElement("div",{className:"p-4 pt-0"},n.createElement("button",{onClick:h,className:`
              w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl
              bg-gradient-to-r from-red-50 to-red-100/50
              text-red-600 font-semibold text-sm
              border border-red-200
              hover:from-red-100 hover:to-red-200/50
              hover:border-red-300 hover:shadow-md
              active:scale-[0.98]
              transition-all duration-200
              group
              ${t?"lg:px-2":""}
            `,title:"Logout"},n.createElement(Pj,{className:"h-4 w-4 shrink-0 group-hover:scale-110 transition-transform"}),!t&&n.createElement("span",null,"Logout")))))}function Vz({toggleSidebar:e}){const[t,r]=N.useState(!1),[a,l]=N.useState("");return n.createElement("header",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 px-4 lg:px-6 py-3 lg:py-4 flex items-center justify-between flex-shrink-0 sticky top-0 z-30 shadow-sm"},n.createElement("div",{className:"flex items-center gap-3 lg:gap-4 flex-1"},n.createElement("button",{onClick:e,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all hover:scale-105 active:scale-95 group","aria-label":"Toggle Sidebar"},n.createElement("div",{className:"relative h-6 w-6"},n.createElement("span",{className:"absolute left-0 top-1 w-6 h-0.5 bg-gray-600 rounded transition-all group-hover:w-5"}),n.createElement("span",{className:"absolute left-0 top-3 w-6 h-0.5 bg-gray-600 rounded"}),n.createElement("span",{className:"absolute left-0 top-5 w-6 h-0.5 bg-gray-600 rounded transition-all group-hover:w-4"}))),n.createElement("div",{className:"hidden lg:block"},n.createElement("h1",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Welcome back"),n.createElement("p",{className:"text-xs text-gray-500"},new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})))),n.createElement("div",{className:"flex items-center gap-2"},n.createElement("div",{className:"relative hidden md:block"},n.createElement(ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),n.createElement("input",{type:"text",placeholder:"Search anything...",value:a,onChange:o=>l(o.target.value),className:"pl-10 pr-4 py-2 w-64 lg:w-80 bg-gray-50 border border-gray-200 rounded-lg focus:border-gray-800 outline-none text-sm transition-all placeholder:text-gray-400"}),a&&n.createElement("button",{onClick:()=>l(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-0.5 hover:bg-gray-200 rounded"},n.createElement(Ia,{className:"h-3.5 w-3.5 text-gray-400"}))),n.createElement("button",{onClick:()=>r(!t),className:"md:hidden p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all active:scale-95","aria-label":"Search"},n.createElement(ya,{className:"h-5 w-5"})),n.createElement("button",{className:"relative p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all hover:scale-105 active:scale-95 group","aria-label":"Notifications",title:"Notifications"},n.createElement(hg,{className:"h-5 w-5 group-hover:animate-pulse"}),n.createElement("span",{className:"absolute top-1.5 right-1.5 h-2 w-2 bg-red-500 rounded-full ring-2 ring-white"}),n.createElement("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center ring-2 ring-white"},"3"))),t&&n.createElement("div",{className:"md:hidden fixed inset-x-0 top-[57px] bg-white border-b border-gray-200 p-4 shadow-lg z-40 animate-in slide-in-from-top"},n.createElement("div",{className:"relative"},n.createElement(ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.createElement("input",{type:"text",placeholder:"Search anything...",autoFocus:!0,value:a,onChange:o=>l(o.target.value),className:"w-full pl-10 pr-10 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:border-gray-800 outline-none text-sm"}),n.createElement("button",{onClick:()=>{r(!1),l("")},className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 rounded"},n.createElement(Ia,{className:"h-4 w-4 text-gray-400"})))))}function Hz(){const[e,t]=N.useState(!1),[r,a]=N.useState(!1),l=Fs(),o=()=>{window.innerWidth<1024?a(!r):t(!e)},d=()=>a(!1);N.useEffect(()=>{a(!1)},[l.pathname]),N.useEffect(()=>{const p=()=>{window.innerWidth>=1024&&a(!1)};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const h={"/dashboard":"dashboard","/events":"events","/enrollments":"enrollments","/coupons":"coupons","/users":"users","/admins":"admins","/payments":"payments","/cash-tickets":"cashtickets","/vouchers":"vouchers","/sessions":"sessions","/quizes":"quizes","/challenges":"challenges","/polls":"polls","/stories":"stories","/memberships":"memberships","/settings":"settings","/clubs":"clubs","/scan-qr":"scan-qr","/ticket-reshare":"ticket-reshare"},g=()=>h[l.pathname]||"dashboard";return n.createElement("div",{className:"h-screen bg-gradient-to-br from-gray-50 via-gray-50 to-blue-50/30 flex overflow-hidden"},r&&n.createElement("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden transition-opacity",onClick:d}),n.createElement(zz,{activeMenu:g(),collapsed:e,isOpen:r,onClose:d}),n.createElement("div",{className:"flex-1 flex flex-col overflow-hidden"},n.createElement(Vz,{toggleSidebar:o}),n.createElement("main",{className:"flex-1 overflow-auto custom-scrollbar"},n.createElement("div",{className:"p-4 sm:p-6 lg:p-8 max-w-[1920px] mx-auto"},n.createElement(rB,null)))))}function $z(){const[e,t]=N.useState(""),[r,a]=N.useState(""),[l,o]=N.useState(!1),[d,h]=N.useState(!1),[g,p]=N.useState(!1),[x,E]=N.useState(""),C=Ep(),O=Fs(),{login:_}=Us(),P=O.state?.from?.pathname||"/dashboard",k=async I=>{if(I.preventDefault(),E(""),!e.trim()){E("Username is required");return}if(!r.trim()){E("Password is required");return}console.log("[Login] Attempting login for:",e),p(!0);try{const F=await _({username:e,password:r},d);F.success?(console.log("[Login] Login successful, redirecting to:",P),C(P,{replace:!0})):(console.error("[Login] Login failed:",F.error),F.error?.includes("deactivated")?E("Your account has been deactivated. Please contact an administrator."):F.error?.includes("Invalid")?E("Invalid username or password. Please try again."):E(F.error||"Login failed. Please try again."))}catch(F){console.error("[Login] Unexpected error:",F),E("An unexpected error occurred. Please try again.")}finally{p(!1)}};return n.createElement("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4"},n.createElement("div",{className:"w-full max-w-md"},n.createElement("div",{className:"text-center mb-8"},n.createElement("img",{src:xD,alt:"Motivata",className:"h-16 mx-auto mb-4"}),n.createElement("p",{className:"text-gray-600"},"Sign in to your account")),n.createElement("div",{className:"bg-white rounded-xl shadow-lg p-8"},x&&n.createElement("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},n.createElement(Ir,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),n.createElement("p",{className:"text-sm text-red-700"},x)),n.createElement("form",{onSubmit:k,className:"space-y-6"},n.createElement("div",null,n.createElement("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2"},"Username"),n.createElement("div",{className:"relative"},n.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},n.createElement(xi,{className:"h-5 w-5 text-gray-400"})),n.createElement("input",{id:"username",type:"text",value:e,onChange:I=>t(I.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-all disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter your username",disabled:g,autoComplete:"username"}))),n.createElement("div",null,n.createElement("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2"},"Password"),n.createElement("div",{className:"relative"},n.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},n.createElement(Dj,{className:"h-5 w-5 text-gray-400"})),n.createElement("input",{id:"password",type:l?"text":"password",value:r,onChange:I=>a(I.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-all disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter your password",disabled:g,autoComplete:"current-password"}),n.createElement("button",{type:"button",onClick:()=>o(!l),className:"absolute inset-y-0 right-0 pr-3 flex items-center disabled:cursor-not-allowed",disabled:g,tabIndex:-1},l?n.createElement(cD,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):n.createElement(da,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})))),n.createElement("div",{className:"flex items-center justify-between"},n.createElement("label",{className:"flex items-center cursor-pointer"},n.createElement("input",{type:"checkbox",checked:d,onChange:I=>h(I.target.checked),className:"h-4 w-4 text-gray-800 border-gray-300 rounded focus:ring-gray-700 cursor-pointer",disabled:g}),n.createElement("span",{className:"ml-2 text-sm text-gray-600"},"Remember me")),n.createElement("a",{href:"#",className:"text-sm text-gray-800 hover:text-black font-medium"},"Forgot password?")),n.createElement("button",{type:"submit",disabled:g,className:"w-full bg-gray-800 text-white py-3 px-4 rounded-lg font-medium hover:bg-gray-900 focus:ring-4 focus:ring-gray-300 transition-all disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2"},g?n.createElement(n.Fragment,null,n.createElement(xt,{className:"h-5 w-5 animate-spin"}),"Signing in..."):"Log In")))))}var bD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},R4=n.createContext&&n.createContext(bD),qz=["attr","size","title"];function Gz(e,t){if(e==null)return{};var r=Yz(e,t),a,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)a=o[l],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Yz(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function bg(){return bg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},bg.apply(this,arguments)}function L4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function vg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L4(Object(r),!0).forEach(function(a){Xz(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Xz(e,t,r){return t=Wz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wz(e){var t=Kz(e,"string");return typeof t=="symbol"?t:t+""}function Kz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vD(e){return e&&e.map((t,r)=>n.createElement(t.tag,vg({key:r},t.attr),vD(t.child)))}function Vt(e){return t=>n.createElement(Zz,bg({attr:vg({},e.attr)},t),vD(e.child))}function Zz(e){var t=r=>{var{attr:a,size:l,title:o}=e,d=Gz(e,qz),h=l||r.size||"1em",g;return r.className&&(g=r.className),e.className&&(g=(g?g+" ":"")+e.className),n.createElement("svg",bg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,d,{className:g,style:vg(vg({color:e.color||r.color},r.style),e.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&n.createElement("title",null,o),e.children)};return R4!==void 0?n.createElement(R4.Consumer,null,r=>t(r)):t(bD)}function Qz(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},child:[]},{tag:"path",attr:{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},child:[]}]})(e)}function Jz(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"},child:[]}]})(e)}function B4(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"},child:[]}]})(e)}function Ku(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(e)}function F4(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"},child:[]}]})(e)}function eV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"},child:[]}]})(e)}function tV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"},child:[]}]})(e)}function rV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(e)}function ED(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"},child:[]}]})(e)}function aV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"},child:[]}]})(e)}function U4(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(e)}function nV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M8 5v14l11-7z"},child:[]}]})(e)}function sV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"},child:[]}]})(e)}function lV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(e)}function iV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"},child:[]}]})(e)}function Bm(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 21h-2v-2h2v2zm-2-7h-2v5h2v-5zm8-2h-2v4h2v-4zm-2-2h-2v2h2v-2zM7 12H5v2h2v-2zm-2-2H3v2h2v-2zm7-5h2V3h-2v2zm-7.5-.5v3h3v-3h-3zM9 9H3V3h6v6zm-4.5 7.5v3h3v-3h-3zM9 21H3v-6h6v6zm7.5-16.5v3h3v-3h-3zM21 9h-6V3h6v6zm-2 10v-3h-4v2h2v3h4v-2h-2zm-2-7h-4v2h4v-2zm-4-2H7v2h2v2h2v-2h2v-2zm1-1V7h-2V5h-2v4h4zM6.75 5.25h-1.5v1.5h1.5v-1.5zm0 12h-1.5v1.5h1.5v-1.5zm12-12h-1.5v1.5h1.5v-1.5z"},child:[]}]})(e)}function fh(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.5 6.5v3h-3v-3h3M11 5H5v6h6V5zm-1.5 9.5v3h-3v-3h3M11 13H5v6h6v-6zm6.5-6.5v3h-3v-3h3M19 5h-6v6h6V5zm-6 8h1.5v1.5H13V13zm1.5 1.5H16V16h-1.5v-1.5zM16 13h1.5v1.5H16V13zm-3 3h1.5v1.5H13V16zm1.5 1.5H16V19h-1.5v-1.5zM16 16h1.5v1.5H16V16zm1.5-1.5H19V16h-1.5v-1.5zm0 3H19V19h-1.5v-1.5zM22 7h-2V4h-3V2h5v5zm0 15v-5h-2v3h-3v2h5zM2 22h5v-2H4v-3H2v5zM2 2v5h2V4h3V2H2z"},child:[]}]})(e)}function Tx(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(e)}function oV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"},child:[]}]})(e)}function Eg(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(e)}function cV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m21.16 7.26-1.41-1.41-3.56 3.55 1.41 1.41s3.45-3.52 3.56-3.55zM11 3h2v5h-2zM6.4 10.81 7.81 9.4 4.26 5.84 2.84 7.26c.11.03 3.56 3.55 3.56 3.55zM20 12h-5c0 1.66-1.34 3-3 3s-3-1.34-3-3H4c-1.1 0-2 .9-2 2v5c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2z"},child:[]}]})(e)}function uV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M16 7h-1l-1-1h-4L9 7H8c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-4 7c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},child:[]},{tag:"path",attr:{d:"m8.57.51 4.48 4.48V2.04c4.72.47 8.48 4.23 8.95 8.95h2C23.34 3.02 15.49-1.59 8.57.51zM10.95 21.96c-4.72-.47-8.48-4.23-8.95-8.95H0c.66 7.97 8.51 12.58 15.43 10.48l-4.48-4.48v2.95z"},child:[]}]})(e)}function j4(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.79 21 3 11.21v2c0 .53.21 1.04.59 1.41l7.79 7.79c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83L12.79 21z"},child:[]},{tag:"path",attr:{d:"M11.38 17.41c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83L12.63.58A2.04 2.04 0 0 0 11.21 0H5C3.9 0 3 .9 3 2v6.21c0 .53.21 1.04.59 1.41l7.79 7.79zM7.25 3a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5z"},child:[]}]})(e)}function dV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(e)}function mV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"},child:[]}]})(e)}function fV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}function wD(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(e)}function z4(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M22 10V6a2 2 0 0 0-2-2H4c-1.1 0-1.99.89-1.99 2v4c1.1 0 1.99.9 1.99 2s-.89 2-2 2v4c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-4c-1.1 0-2-.9-2-2s.9-2 2-2zm-9 7.5h-2v-2h2v2zm0-4.5h-2v-2h2v2zm0-4.5h-2v-2h2v2z"},child:[]}]})(e)}function hV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},child:[]}]})(e)}function ND(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(r=ND(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function ba(){for(var e,t,r=0,a="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=ND(e))&&(a&&(a+=" "),a+=t);return a}function gV(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}gV(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var D2=e=>typeof e=="number"&&!isNaN(e),$m=e=>typeof e=="string",SD=e=>typeof e=="function",pV=e=>$m(e)||D2(e),yV=e=>N.isValidElement(e)||$m(e)||SD(e)||D2(e),xV=1,CD=()=>`${xV++}`,_l=new Map,Vv=[],V4=new Set,AD=()=>_l.size>0,bV=(e,{containerId:t})=>{var r;return(r=_l.get(t||1))==null?void 0:r.toasts.get(e)};function vV(e,t){var r;if(t)return!!((r=_l.get(t))!=null&&r.isToastActive(e));let a=!1;return _l.forEach(l=>{l.isToastActive(e)&&(a=!0)}),a}function EV(e){if(!AD()){Vv=Vv.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||pV(e))_l.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=_l.get(e.containerId);t?t.removeToast(e.id):_l.forEach(r=>{r.removeToast(e.id)})}}var wV=(e={})=>{_l.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function NV(e,t){yV(e)&&(AD()||Vv.push({content:e,options:t}),_l.forEach(r=>{r.buildToast(e,t)}))}function TD(e,t){_l.forEach(r=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===r.id)&&r.toggle(e,t?.id)})}function SV(e){return V4.add(e),()=>{V4.delete(e)}}function CV(e){return e&&($m(e.toastId)||D2(e.toastId))?e.toastId:CD()}function vf(e,t){return NV(e,t),t.toastId}function kp(e,t){return{...t,type:t&&t.type||e,toastId:CV(t)}}function Pp(e){return(t,r)=>vf(t,kp(e,r))}function Et(e,t){return vf(e,kp("default",t))}Et.loading=(e,t)=>vf(e,kp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function AV(e,{pending:t,error:r,success:a},l){let o;t&&(o=$m(t)?Et.loading(t,l):Et.loading(t.render,{...l,...t}));let d={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},h=(p,x,E)=>{if(x==null){Et.dismiss(o);return}let C={type:p,...d,...l,data:E},O=$m(x)?{render:x}:x;return o?Et.update(o,{...C,...O}):Et(O.render,{...C,...O}),E},g=SD(e)?e():e;return g.then(p=>h("success",a,p)).catch(p=>h("error",r,p)),g}Et.promise=AV;Et.success=Pp("success");Et.info=Pp("info");Et.error=Pp("error");Et.warning=Pp("warning");Et.warn=Et.warning;Et.dark=(e,t)=>vf(e,kp("default",{theme:"dark",...t}));function TV(e){EV(e)}Et.dismiss=TV;Et.clearWaitingQueue=wV;Et.isActive=vV;Et.update=(e,t={})=>{let r=bV(e,t);if(r){let{props:a,content:l}=r,o={delay:100,...a,...t,toastId:t.toastId||e,updateId:CD()};o.toastId!==e&&(o.staleId=e);let d=o.render||l;delete o.render,vf(d,o)}};Et.done=e=>{Et.update(e,{progress:1})};Et.onChange=SV;Et.play=e=>TD(!0,e);Et.pause=e=>TD(!1,e);var Ox={exports:{}},ym={};var H4;function OV(){if(H4)return ym;H4=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,l,o){var d=null;if(o!==void 0&&(d=""+o),l.key!==void 0&&(d=""+l.key),"key"in l){o={};for(var h in l)h!=="key"&&(o[h]=l[h])}else o=l;return l=o.ref,{$$typeof:e,type:a,key:d,ref:l!==void 0?l:null,props:o}}return ym.Fragment=t,ym.jsx=r,ym.jsxs=r,ym}var $4;function _V(){return $4||($4=1,Ox.exports=OV()),Ox.exports}var Hv=_V();const OD=N.createContext({});function DV(e){const t=N.useRef(null);return t.current===null&&(t.current=e()),t.current}const k2=typeof window<"u",kV=k2?N.useLayoutEffect:N.useEffect,P2=N.createContext(null);function M2(e,t){e.indexOf(t)===-1&&e.push(t)}function I2(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const bi=(e,t,r)=>r>t?t:r<e?e:r;let R2=()=>{};const vi={},_D=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function DD(e){return typeof e=="object"&&e!==null}const kD=e=>/^0[^.\s]+$/u.test(e);function L2(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ms=e=>e,PV=(e,t)=>r=>t(e(r)),Ef=(...e)=>e.reduce(PV),qm=(e,t,r)=>{const a=t-e;return a===0?1:(r-e)/a};class B2{constructor(){this.subscriptions=[]}add(t){return M2(this.subscriptions,t),()=>I2(this.subscriptions,t)}notify(t,r,a){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](t,r,a);else for(let o=0;o<l;o++){const d=this.subscriptions[o];d&&d(t,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Dl=e=>e*1e3,ks=e=>e/1e3;function PD(e,t){return t?e*(1e3/t):0}const MD=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,MV=1e-7,IV=12;function RV(e,t,r,a,l){let o,d,h=0;do d=t+(r-t)/2,o=MD(d,a,l)-e,o>0?r=d:t=d;while(Math.abs(o)>MV&&++h<IV);return d}function wf(e,t,r,a){if(e===t&&r===a)return Ms;const l=o=>RV(o,0,1,e,r);return o=>o===0||o===1?o:MD(l(o),t,a)}const ID=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,RD=e=>t=>1-e(1-t),LD=wf(.33,1.53,.69,.99),F2=RD(LD),BD=ID(F2),FD=e=>(e*=2)<1?.5*F2(e):.5*(2-Math.pow(2,-10*(e-1))),U2=e=>1-Math.sin(Math.acos(e)),UD=RD(U2),jD=ID(U2),LV=wf(.42,0,1,1),BV=wf(0,0,.58,1),zD=wf(.42,0,.58,1),FV=e=>Array.isArray(e)&&typeof e[0]!="number",VD=e=>Array.isArray(e)&&typeof e[0]=="number",UV={linear:Ms,easeIn:LV,easeInOut:zD,easeOut:BV,circIn:U2,circInOut:jD,circOut:UD,backIn:F2,backInOut:BD,backOut:LD,anticipate:FD},jV=e=>typeof e=="string",q4=e=>{if(VD(e)){R2(e.length===4);const[t,r,a,l]=e;return wf(t,r,a,l)}else if(jV(e))return UV[e];return e},hh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function zV(e,t){let r=new Set,a=new Set,l=!1,o=!1;const d=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function g(x){d.has(x)&&(p.schedule(x),e()),x(h)}const p={schedule:(x,E=!1,C=!1)=>{const _=C&&l?r:a;return E&&d.add(x),_.has(x)||_.add(x),x},cancel:x=>{a.delete(x),d.delete(x)},process:x=>{if(h=x,l){o=!0;return}l=!0,[r,a]=[a,r],r.forEach(g),r.clear(),l=!1,o&&(o=!1,p.process(x))}};return p}const VV=40;function HD(e,t){let r=!1,a=!0;const l={delta:0,timestamp:0,isProcessing:!1},o=()=>r=!0,d=hh.reduce((R,Y)=>(R[Y]=zV(o),R),{}),{setup:h,read:g,resolveKeyframes:p,preUpdate:x,update:E,preRender:C,render:O,postRender:_}=d,P=()=>{const R=vi.useManualTiming?l.timestamp:performance.now();r=!1,vi.useManualTiming||(l.delta=a?1e3/60:Math.max(Math.min(R-l.timestamp,VV),1)),l.timestamp=R,l.isProcessing=!0,h.process(l),g.process(l),p.process(l),x.process(l),E.process(l),C.process(l),O.process(l),_.process(l),l.isProcessing=!1,r&&t&&(a=!1,e(P))},k=()=>{r=!0,a=!0,l.isProcessing||e(P)};return{schedule:hh.reduce((R,Y)=>{const j=d[Y];return R[Y]=(z,L=!1,q=!1)=>(r||k(),j.schedule(z,L,q)),R},{}),cancel:R=>{for(let Y=0;Y<hh.length;Y++)d[hh[Y]].cancel(R)},state:l,steps:d}}const{schedule:Wr,cancel:Do,state:on,steps:_x}=HD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ms,!0);let tg;function HV(){tg=void 0}const Ln={now:()=>(tg===void 0&&Ln.set(on.isProcessing||vi.useManualTiming?on.timestamp:performance.now()),tg),set:e=>{tg=e,queueMicrotask(HV)}},$D=e=>t=>typeof t=="string"&&t.startsWith(e),j2=$D("--"),$V=$D("var(--"),z2=e=>$V(e)?qV.test(e.split("/*")[0].trim()):!1,qV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,gd={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Gm={...gd,transform:e=>bi(0,1,e)},gh={...gd,default:1},Fm=e=>Math.round(e*1e5)/1e5,V2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function GV(e){return e==null}const YV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,H2=(e,t)=>r=>!!(typeof r=="string"&&YV.test(r)&&r.startsWith(e)||t&&!GV(r)&&Object.prototype.hasOwnProperty.call(r,t)),qD=(e,t,r)=>a=>{if(typeof a!="string")return a;const[l,o,d,h]=a.match(V2);return{[e]:parseFloat(l),[t]:parseFloat(o),[r]:parseFloat(d),alpha:h!==void 0?parseFloat(h):1}},XV=e=>bi(0,255,e),Dx={...gd,transform:e=>Math.round(XV(e))},wc={test:H2("rgb","red"),parse:qD("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:a=1})=>"rgba("+Dx.transform(e)+", "+Dx.transform(t)+", "+Dx.transform(r)+", "+Fm(Gm.transform(a))+")"};function WV(e){let t="",r="",a="",l="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),a=e.substring(5,7),l=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),a=e.substring(3,4),l=e.substring(4,5),t+=t,r+=r,a+=a,l+=l),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:l?parseInt(l,16)/255:1}}const $v={test:H2("#"),parse:WV,transform:wc.transform},Nf=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),So=Nf("deg"),kl=Nf("%"),_t=Nf("px"),KV=Nf("vh"),ZV=Nf("vw"),G4={...kl,parse:e=>kl.parse(e)/100,transform:e=>kl.transform(e*100)},Iu={test:H2("hsl","hue"),parse:qD("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:a=1})=>"hsla("+Math.round(e)+", "+kl.transform(Fm(t))+", "+kl.transform(Fm(r))+", "+Fm(Gm.transform(a))+")"},_a={test:e=>wc.test(e)||$v.test(e)||Iu.test(e),parse:e=>wc.test(e)?wc.parse(e):Iu.test(e)?Iu.parse(e):$v.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?wc.transform(e):Iu.transform(e),getAnimatableNone:e=>{const t=_a.parse(e);return t.alpha=0,_a.transform(t)}},QV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function JV(e){return isNaN(e)&&typeof e=="string"&&(e.match(V2)?.length||0)+(e.match(QV)?.length||0)>0}const GD="number",YD="color",eH="var",tH="var(",Y4="${}",rH=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ym(e){const t=e.toString(),r=[],a={color:[],number:[],var:[]},l=[];let o=0;const h=t.replace(rH,g=>(_a.test(g)?(a.color.push(o),l.push(YD),r.push(_a.parse(g))):g.startsWith(tH)?(a.var.push(o),l.push(eH),r.push(g)):(a.number.push(o),l.push(GD),r.push(parseFloat(g))),++o,Y4)).split(Y4);return{values:r,split:h,indexes:a,types:l}}function XD(e){return Ym(e).values}function WD(e){const{split:t,types:r}=Ym(e),a=t.length;return l=>{let o="";for(let d=0;d<a;d++)if(o+=t[d],l[d]!==void 0){const h=r[d];h===GD?o+=Fm(l[d]):h===YD?o+=_a.transform(l[d]):o+=l[d]}return o}}const aH=e=>typeof e=="number"?0:_a.test(e)?_a.getAnimatableNone(e):e;function nH(e){const t=XD(e);return WD(e)(t.map(aH))}const ko={test:JV,parse:XD,createTransformer:WD,getAnimatableNone:nH};function kx(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function sH({hue:e,saturation:t,lightness:r,alpha:a}){e/=360,t/=100,r/=100;let l=0,o=0,d=0;if(!t)l=o=d=r;else{const h=r<.5?r*(1+t):r+t-r*t,g=2*r-h;l=kx(g,h,e+1/3),o=kx(g,h,e),d=kx(g,h,e-1/3)}return{red:Math.round(l*255),green:Math.round(o*255),blue:Math.round(d*255),alpha:a}}function wg(e,t){return r=>r>0?t:e}const ra=(e,t,r)=>e+(t-e)*r,Px=(e,t,r)=>{const a=e*e,l=r*(t*t-a)+a;return l<0?0:Math.sqrt(l)},lH=[$v,wc,Iu],iH=e=>lH.find(t=>t.test(e));function X4(e){const t=iH(e);if(!t)return!1;let r=t.parse(e);return t===Iu&&(r=sH(r)),r}const W4=(e,t)=>{const r=X4(e),a=X4(t);if(!r||!a)return wg(e,t);const l={...r};return o=>(l.red=Px(r.red,a.red,o),l.green=Px(r.green,a.green,o),l.blue=Px(r.blue,a.blue,o),l.alpha=ra(r.alpha,a.alpha,o),wc.transform(l))},qv=new Set(["none","hidden"]);function oH(e,t){return qv.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function cH(e,t){return r=>ra(e,t,r)}function $2(e){return typeof e=="number"?cH:typeof e=="string"?z2(e)?wg:_a.test(e)?W4:mH:Array.isArray(e)?KD:typeof e=="object"?_a.test(e)?W4:uH:wg}function KD(e,t){const r=[...e],a=r.length,l=e.map((o,d)=>$2(o)(o,t[d]));return o=>{for(let d=0;d<a;d++)r[d]=l[d](o);return r}}function uH(e,t){const r={...e,...t},a={};for(const l in r)e[l]!==void 0&&t[l]!==void 0&&(a[l]=$2(e[l])(e[l],t[l]));return l=>{for(const o in a)r[o]=a[o](l);return r}}function dH(e,t){const r=[],a={color:0,var:0,number:0};for(let l=0;l<t.values.length;l++){const o=t.types[l],d=e.indexes[o][a[o]],h=e.values[d]??0;r[l]=h,a[o]++}return r}const mH=(e,t)=>{const r=ko.createTransformer(t),a=Ym(e),l=Ym(t);return a.indexes.var.length===l.indexes.var.length&&a.indexes.color.length===l.indexes.color.length&&a.indexes.number.length>=l.indexes.number.length?qv.has(e)&&!l.values.length||qv.has(t)&&!a.values.length?oH(e,t):Ef(KD(dH(a,l),l.values),r):wg(e,t)};function ZD(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?ra(e,t,r):$2(e)(e,t)}const fH=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Wr.update(t,r),stop:()=>Do(t),now:()=>on.isProcessing?on.timestamp:Ln.now()}},QD=(e,t,r=10)=>{let a="";const l=Math.max(Math.round(t/r),2);for(let o=0;o<l;o++)a+=Math.round(e(o/(l-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},Ng=2e4;function q2(e){let t=0;const r=50;let a=e.next(t);for(;!a.done&&t<Ng;)t+=r,a=e.next(t);return t>=Ng?1/0:t}function hH(e,t=100,r){const a=r({...e,keyframes:[0,t]}),l=Math.min(q2(a),Ng);return{type:"keyframes",ease:o=>a.next(l*o).value/t,duration:ks(l)}}const gH=5;function JD(e,t,r){const a=Math.max(t-gH,0);return PD(r-e(a),t-a)}const ca={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Mx=.001;function pH({duration:e=ca.duration,bounce:t=ca.bounce,velocity:r=ca.velocity,mass:a=ca.mass}){let l,o,d=1-t;d=bi(ca.minDamping,ca.maxDamping,d),e=bi(ca.minDuration,ca.maxDuration,ks(e)),d<1?(l=p=>{const x=p*d,E=x*e,C=x-r,O=Gv(p,d),_=Math.exp(-E);return Mx-C/O*_},o=p=>{const E=p*d*e,C=E*r+r,O=Math.pow(d,2)*Math.pow(p,2)*e,_=Math.exp(-E),P=Gv(Math.pow(p,2),d);return(-l(p)+Mx>0?-1:1)*((C-O)*_)/P}):(l=p=>{const x=Math.exp(-p*e),E=(p-r)*e+1;return-Mx+x*E},o=p=>{const x=Math.exp(-p*e),E=(r-p)*(e*e);return x*E});const h=5/e,g=xH(l,o,h);if(e=Dl(e),isNaN(g))return{stiffness:ca.stiffness,damping:ca.damping,duration:e};{const p=Math.pow(g,2)*a;return{stiffness:p,damping:d*2*Math.sqrt(a*p),duration:e}}}const yH=12;function xH(e,t,r){let a=r;for(let l=1;l<yH;l++)a=a-e(a)/t(a);return a}function Gv(e,t){return e*Math.sqrt(1-t*t)}const bH=["duration","bounce"],vH=["stiffness","damping","mass"];function K4(e,t){return t.some(r=>e[r]!==void 0)}function EH(e){let t={velocity:ca.velocity,stiffness:ca.stiffness,damping:ca.damping,mass:ca.mass,isResolvedFromDuration:!1,...e};if(!K4(e,vH)&&K4(e,bH))if(e.visualDuration){const r=e.visualDuration,a=2*Math.PI/(r*1.2),l=a*a,o=2*bi(.05,1,1-(e.bounce||0))*Math.sqrt(l);t={...t,mass:ca.mass,stiffness:l,damping:o}}else{const r=pH(e);t={...t,...r,mass:ca.mass},t.isResolvedFromDuration=!0}return t}function Sg(e=ca.visualDuration,t=ca.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:a,restDelta:l}=r;const o=r.keyframes[0],d=r.keyframes[r.keyframes.length-1],h={done:!1,value:o},{stiffness:g,damping:p,mass:x,duration:E,velocity:C,isResolvedFromDuration:O}=EH({...r,velocity:-ks(r.velocity||0)}),_=C||0,P=p/(2*Math.sqrt(g*x)),k=d-o,I=ks(Math.sqrt(g/x)),F=Math.abs(k)<5;a||(a=F?ca.restSpeed.granular:ca.restSpeed.default),l||(l=F?ca.restDelta.granular:ca.restDelta.default);let R;if(P<1){const j=Gv(I,P);R=z=>{const L=Math.exp(-P*I*z);return d-L*((_+P*I*k)/j*Math.sin(j*z)+k*Math.cos(j*z))}}else if(P===1)R=j=>d-Math.exp(-I*j)*(k+(_+I*k)*j);else{const j=I*Math.sqrt(P*P-1);R=z=>{const L=Math.exp(-P*I*z),q=Math.min(j*z,300);return d-L*((_+P*I*k)*Math.sinh(q)+j*k*Math.cosh(q))/j}}const Y={calculatedDuration:O&&E||null,next:j=>{const z=R(j);if(O)h.done=j>=E;else{let L=j===0?_:0;P<1&&(L=j===0?Dl(_):JD(R,j,z));const q=Math.abs(L)<=a,V=Math.abs(d-z)<=l;h.done=q&&V}return h.value=h.done?d:z,h},toString:()=>{const j=Math.min(q2(Y),Ng),z=QD(L=>Y.next(j*L).value,j,30);return j+"ms "+z},toTransition:()=>{}};return Y}Sg.applyToOptions=e=>{const t=hH(e,100,Sg);return e.ease=t.ease,e.duration=Dl(t.duration),e.type="keyframes",e};function Yv({keyframes:e,velocity:t=0,power:r=.8,timeConstant:a=325,bounceDamping:l=10,bounceStiffness:o=500,modifyTarget:d,min:h,max:g,restDelta:p=.5,restSpeed:x}){const E=e[0],C={done:!1,value:E},O=q=>h!==void 0&&q<h||g!==void 0&&q>g,_=q=>h===void 0?g:g===void 0||Math.abs(h-q)<Math.abs(g-q)?h:g;let P=r*t;const k=E+P,I=d===void 0?k:d(k);I!==k&&(P=I-E);const F=q=>-P*Math.exp(-q/a),R=q=>I+F(q),Y=q=>{const V=F(q),W=R(q);C.done=Math.abs(V)<=p,C.value=C.done?I:W};let j,z;const L=q=>{O(C.value)&&(j=q,z=Sg({keyframes:[C.value,_(C.value)],velocity:JD(R,q,C.value),damping:l,stiffness:o,restDelta:p,restSpeed:x}))};return L(0),{calculatedDuration:null,next:q=>{let V=!1;return!z&&j===void 0&&(V=!0,Y(q),L(q)),j!==void 0&&q>=j?z.next(q-j):(!V&&Y(q),C)}}}function wH(e,t,r){const a=[],l=r||vi.mix||ZD,o=e.length-1;for(let d=0;d<o;d++){let h=l(e[d],e[d+1]);if(t){const g=Array.isArray(t)?t[d]||Ms:t;h=Ef(g,h)}a.push(h)}return a}function NH(e,t,{clamp:r=!0,ease:a,mixer:l}={}){const o=e.length;if(R2(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const d=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const h=wH(t,a,l),g=h.length,p=x=>{if(d&&x<e[0])return t[0];let E=0;if(g>1)for(;E<e.length-2&&!(x<e[E+1]);E++);const C=qm(e[E],e[E+1],x);return h[E](C)};return r?x=>p(bi(e[0],e[o-1],x)):p}function SH(e,t){const r=e[e.length-1];for(let a=1;a<=t;a++){const l=qm(0,t,a);e.push(ra(r,1,l))}}function CH(e){const t=[0];return SH(t,e.length-1),t}function AH(e,t){return e.map(r=>r*t)}function TH(e,t){return e.map(()=>t||zD).splice(0,e.length-1)}function Um({duration:e=300,keyframes:t,times:r,ease:a="easeInOut"}){const l=FV(a)?a.map(q4):q4(a),o={done:!1,value:t[0]},d=AH(r&&r.length===t.length?r:CH(t),e),h=NH(d,t,{ease:Array.isArray(l)?l:TH(t,l)});return{calculatedDuration:e,next:g=>(o.value=h(g),o.done=g>=e,o)}}const OH=e=>e!==null;function G2(e,{repeat:t,repeatType:r="loop"},a,l=1){const o=e.filter(OH),h=l<0||t&&r!=="loop"&&t%2===1?0:o.length-1;return!h||a===void 0?o[h]:a}const _H={decay:Yv,inertia:Yv,tween:Um,keyframes:Um,spring:Sg};function ek(e){typeof e.type=="string"&&(e.type=_H[e.type])}class Y2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const DH=e=>e/100;class X2 extends Y2{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==Ln.now()&&this.tick(Ln.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;ek(t);const{type:r=Um,repeat:a=0,repeatDelay:l=0,repeatType:o,velocity:d=0}=t;let{keyframes:h}=t;const g=r||Um;g!==Um&&typeof h[0]!="number"&&(this.mixKeyframes=Ef(DH,ZD(h[0],h[1])),h=[0,100]);const p=g({...t,keyframes:h});o==="mirror"&&(this.mirroredGenerator=g({...t,keyframes:[...h].reverse(),velocity:-d})),p.calculatedDuration===null&&(p.calculatedDuration=q2(p));const{calculatedDuration:x}=p;this.calculatedDuration=x,this.resolvedDuration=x+l,this.totalDuration=this.resolvedDuration*(a+1)-l,this.generator=p}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:a,totalDuration:l,mixKeyframes:o,mirroredGenerator:d,resolvedDuration:h,calculatedDuration:g}=this;if(this.startTime===null)return a.next(0);const{delay:p=0,keyframes:x,repeat:E,repeatType:C,repeatDelay:O,type:_,onUpdate:P,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-l/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const I=this.currentTime-p*(this.playbackSpeed>=0?1:-1),F=this.playbackSpeed>=0?I<0:I>l;this.currentTime=Math.max(I,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let R=this.currentTime,Y=a;if(E){const q=Math.min(this.currentTime,l)/h;let V=Math.floor(q),W=q%1;!W&&q>=1&&(W=1),W===1&&V--,V=Math.min(V,E+1),!!(V%2)&&(C==="reverse"?(W=1-W,O&&(W-=O/h)):C==="mirror"&&(Y=d)),R=bi(0,1,W)*h}const j=F?{done:!1,value:x[0]}:Y.next(R);o&&(j.value=o(j.value));let{done:z}=j;!F&&g!==null&&(z=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return L&&_!==Yv&&(j.value=G2(x,this.options,k,this.speed)),P&&P(j.value),L&&this.finish(),j}then(t,r){return this.finished.then(t,r)}get duration(){return ks(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ks(t)}get time(){return ks(this.currentTime)}set time(t){t=Dl(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ln.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=ks(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=fH,startTime:r}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),this.options.onPlay?.();const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ln.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function kH(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Nc=e=>e*180/Math.PI,Xv=e=>{const t=Nc(Math.atan2(e[1],e[0]));return Wv(t)},PH={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Xv,rotateZ:Xv,skewX:e=>Nc(Math.atan(e[1])),skewY:e=>Nc(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Wv=e=>(e=e%360,e<0&&(e+=360),e),Z4=Xv,Q4=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),J4=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),MH={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Q4,scaleY:J4,scale:e=>(Q4(e)+J4(e))/2,rotateX:e=>Wv(Nc(Math.atan2(e[6],e[5]))),rotateY:e=>Wv(Nc(Math.atan2(-e[2],e[0]))),rotateZ:Z4,rotate:Z4,skewX:e=>Nc(Math.atan(e[4])),skewY:e=>Nc(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Kv(e){return e.includes("scale")?1:0}function Zv(e,t){if(!e||e==="none")return Kv(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,l;if(r)a=MH,l=r;else{const h=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=PH,l=h}if(!l)return Kv(t);const o=a[t],d=l[1].split(",").map(RH);return typeof o=="function"?o(d):d[o]}const IH=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Zv(r,t)};function RH(e){return parseFloat(e.trim())}const pd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yd=new Set(pd),eA=e=>e===gd||e===_t,LH=new Set(["x","y","z"]),BH=pd.filter(e=>!LH.has(e));function FH(e){const t=[];return BH.forEach(r=>{const a=e.getValue(r);a!==void 0&&(t.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),t}const Tc={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Zv(t,"x"),y:(e,{transform:t})=>Zv(t,"y")};Tc.translateX=Tc.x;Tc.translateY=Tc.y;const Oc=new Set;let Qv=!1,Jv=!1,eE=!1;function tk(){if(Jv){const e=Array.from(Oc).filter(a=>a.needsMeasurement),t=new Set(e.map(a=>a.element)),r=new Map;t.forEach(a=>{const l=FH(a);l.length&&(r.set(a,l),a.render())}),e.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const l=r.get(a);l&&l.forEach(([o,d])=>{a.getValue(o)?.set(d)})}),e.forEach(a=>a.measureEndState()),e.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}Jv=!1,Qv=!1,Oc.forEach(e=>e.complete(eE)),Oc.clear()}function rk(){Oc.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Jv=!0)})}function UH(){eE=!0,rk(),tk(),eE=!1}class W2{constructor(t,r,a,l,o,d=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=a,this.motionValue=l,this.element=o,this.isAsync=d}scheduleResolve(){this.state="scheduled",this.isAsync?(Oc.add(this),Qv||(Qv=!0,Wr.read(rk),Wr.resolveKeyframes(tk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:a,motionValue:l}=this;if(t[0]===null){const o=l?.get(),d=t[t.length-1];if(o!==void 0)t[0]=o;else if(a&&r){const h=a.readValue(r,d);h!=null&&(t[0]=h)}t[0]===void 0&&(t[0]=d),l&&o===void 0&&l.set(t[0])}kH(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Oc.delete(this)}cancel(){this.state==="scheduled"&&(Oc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const jH=e=>e.startsWith("--");function zH(e,t,r){jH(t)?e.style.setProperty(t,r):e.style[t]=r}const VH=L2(()=>window.ScrollTimeline!==void 0),HH={};function $H(e,t){const r=L2(e);return()=>HH[t]??r()}const ak=$H(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Pm=([e,t,r,a])=>`cubic-bezier(${e}, ${t}, ${r}, ${a})`,tA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Pm([0,.65,.55,1]),circOut:Pm([.55,0,1,.45]),backIn:Pm([.31,.01,.66,-.59]),backOut:Pm([.33,1.53,.69,.99])};function nk(e,t){if(e)return typeof e=="function"?ak()?QD(e,t):"ease-out":VD(e)?Pm(e):Array.isArray(e)?e.map(r=>nk(r,t)||tA.easeOut):tA[e]}function qH(e,t,r,{delay:a=0,duration:l=300,repeat:o=0,repeatType:d="loop",ease:h="easeOut",times:g}={},p=void 0){const x={[t]:r};g&&(x.offset=g);const E=nk(h,l);Array.isArray(E)&&(x.easing=E);const C={delay:a,duration:l,easing:Array.isArray(E)?"linear":E,fill:"both",iterations:o+1,direction:d==="reverse"?"alternate":"normal"};return p&&(C.pseudoElement=p),e.animate(x,C)}function sk(e){return typeof e=="function"&&"applyToOptions"in e}function GH({type:e,...t}){return sk(e)&&ak()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class YH extends Y2{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:a,keyframes:l,pseudoElement:o,allowFlatten:d=!1,finalKeyframe:h,onComplete:g}=t;this.isPseudoElement=!!o,this.allowFlatten=d,this.options=t,R2(typeof t.type!="string");const p=GH(t);this.animation=qH(r,a,l,p,o),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const x=G2(l,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(x):zH(r,a,x),this.animation.cancel()}g?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return ks(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ks(t)}get time(){return ks(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Dl(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&VH()?(this.animation.timeline=t,Ms):r(this)}}const lk={anticipate:FD,backInOut:BD,circInOut:jD};function XH(e){return e in lk}function WH(e){typeof e.ease=="string"&&XH(e.ease)&&(e.ease=lk[e.ease])}const rA=10;class KH extends YH{constructor(t){WH(t),ek(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:a,onComplete:l,element:o,...d}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const h=new X2({...d,autoplay:!1}),g=Dl(this.finishedTime??this.time);r.setWithVelocity(h.sample(g-rA).value,h.sample(g).value,rA),h.stop()}}const aA=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ko.test(e)||e==="0")&&!e.startsWith("url("));function ZH(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function QH(e,t,r,a){const l=e[0];if(l===null)return!1;if(t==="display"||t==="visibility")return!0;const o=e[e.length-1],d=aA(l,t),h=aA(o,t);return!d||!h?!1:ZH(e)||(r==="spring"||sk(r))&&a}function tE(e){e.duration=0,e.type="keyframes"}const JH=new Set(["opacity","clipPath","filter","transform"]),e$=L2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function t$(e){const{motionValue:t,name:r,repeatDelay:a,repeatType:l,damping:o,type:d}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:g,transformTemplate:p}=t.owner.getProps();return e$()&&r&&JH.has(r)&&(r!=="transform"||!p)&&!g&&!a&&l!=="mirror"&&o!==0&&d!=="inertia"}const r$=40;class a$ extends Y2{constructor({autoplay:t=!0,delay:r=0,type:a="keyframes",repeat:l=0,repeatDelay:o=0,repeatType:d="loop",keyframes:h,name:g,motionValue:p,element:x,...E}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ln.now();const C={autoplay:t,delay:r,type:a,repeat:l,repeatDelay:o,repeatType:d,name:g,motionValue:p,element:x,...E},O=x?.KeyframeResolver||W2;this.keyframeResolver=new O(h,(_,P,k)=>this.onKeyframesResolved(_,P,C,!k),g,p,x),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,a,l){this.keyframeResolver=void 0;const{name:o,type:d,velocity:h,delay:g,isHandoff:p,onUpdate:x}=a;this.resolvedAt=Ln.now(),QH(t,o,d,h)||((vi.instantAnimations||!g)&&x?.(G2(t,a,r)),t[0]=t[t.length-1],tE(a),a.repeat=0);const C={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>r$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...a,keyframes:t},O=!p&&t$(C)?new KH({...C,element:C.motionValue.owner.current}):new X2(C);O.finished.then(()=>this.notifyFinished()).catch(Ms),this.pendingTimeline&&(this.stopTimeline=O.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=O}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),UH()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const n$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function s$(e){const t=n$.exec(e);if(!t)return[,];const[,r,a,l]=t;return[`--${r??a}`,l]}function ik(e,t,r=1){const[a,l]=s$(e);if(!a)return;const o=window.getComputedStyle(t).getPropertyValue(a);if(o){const d=o.trim();return _D(d)?parseFloat(d):d}return z2(l)?ik(l,t,r+1):l}function K2(e,t){return e?.[t]??e?.default??e}const ok=new Set(["width","height","top","left","right","bottom",...pd]),l$={test:e=>e==="auto",parse:e=>e},ck=e=>t=>t.test(e),uk=[gd,_t,kl,So,ZV,KV,l$],nA=e=>uk.find(ck(e));function i$(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||kD(e):!0}const o$=new Set(["brightness","contrast","saturate","opacity"]);function c$(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[a]=r.match(V2)||[];if(!a)return e;const l=r.replace(a,"");let o=o$.has(t)?1:0;return a!==r&&(o*=100),t+"("+o+l+")"}const u$=/\b([a-z-]*)\(.*?\)/gu,rE={...ko,getAnimatableNone:e=>{const t=e.match(u$);return t?t.map(c$).join(" "):e}},sA={...gd,transform:Math.round},d$={rotate:So,rotateX:So,rotateY:So,rotateZ:So,scale:gh,scaleX:gh,scaleY:gh,scaleZ:gh,skew:So,skewX:So,skewY:So,distance:_t,translateX:_t,translateY:_t,translateZ:_t,x:_t,y:_t,z:_t,perspective:_t,transformPerspective:_t,opacity:Gm,originX:G4,originY:G4,originZ:_t},Z2={borderWidth:_t,borderTopWidth:_t,borderRightWidth:_t,borderBottomWidth:_t,borderLeftWidth:_t,borderRadius:_t,radius:_t,borderTopLeftRadius:_t,borderTopRightRadius:_t,borderBottomRightRadius:_t,borderBottomLeftRadius:_t,width:_t,maxWidth:_t,height:_t,maxHeight:_t,top:_t,right:_t,bottom:_t,left:_t,padding:_t,paddingTop:_t,paddingRight:_t,paddingBottom:_t,paddingLeft:_t,margin:_t,marginTop:_t,marginRight:_t,marginBottom:_t,marginLeft:_t,backgroundPositionX:_t,backgroundPositionY:_t,...d$,zIndex:sA,fillOpacity:Gm,strokeOpacity:Gm,numOctaves:sA},m$={...Z2,color:_a,backgroundColor:_a,outlineColor:_a,fill:_a,stroke:_a,borderColor:_a,borderTopColor:_a,borderRightColor:_a,borderBottomColor:_a,borderLeftColor:_a,filter:rE,WebkitFilter:rE},dk=e=>m$[e];function mk(e,t){let r=dk(e);return r!==rE&&(r=ko),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const f$=new Set(["auto","none","0"]);function h$(e,t,r){let a=0,l;for(;a<e.length&&!l;){const o=e[a];typeof o=="string"&&!f$.has(o)&&Ym(o).values.length&&(l=e[a]),a++}if(l&&r)for(const o of t)e[o]=mk(r,l)}class g$ extends W2{constructor(t,r,a,l,o){super(t,r,a,l,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:a}=this;if(!r||!r.current)return;super.readKeyframes();for(let g=0;g<t.length;g++){let p=t[g];if(typeof p=="string"&&(p=p.trim(),z2(p))){const x=ik(p,r.current);x!==void 0&&(t[g]=x),g===t.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!ok.has(a)||t.length!==2)return;const[l,o]=t,d=nA(l),h=nA(o);if(d!==h)if(eA(d)&&eA(h))for(let g=0;g<t.length;g++){const p=t[g];typeof p=="string"&&(t[g]=parseFloat(p))}else Tc[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,a=[];for(let l=0;l<t.length;l++)(t[l]===null||i$(t[l]))&&a.push(l);a.length&&h$(t,a,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Tc[a](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const l=r[r.length-1];l!==void 0&&t.getValue(a,l).jump(l,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const l=t.getValue(r);l&&l.jump(this.measuredOrigin,!1);const o=a.length-1,d=a[o];a[o]=Tc[r](t.measureViewportBox(),window.getComputedStyle(t.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,g])=>{t.getValue(h).set(g)}),this.resolveNoneKeyframes()}}function p$(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let a=document;const l=r?.[e]??a.querySelectorAll(e);return l?Array.from(l):[]}return Array.from(e)}const fk=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function y$(e){return DD(e)&&"offsetHeight"in e}const lA=30,x$=e=>!isNaN(parseFloat(e));class b${constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{const l=Ln.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Ln.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=x$(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new B2);const a=this.events[t].add(r);return t==="change"?()=>{a(),Wr.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,a){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ln.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>lA)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,lA);return PD(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zu(e,t){return new b$(e,t)}const{schedule:Q2}=HD(queueMicrotask,!1),Qs={x:!1,y:!1};function hk(){return Qs.x||Qs.y}function v$(e){return e==="x"||e==="y"?Qs[e]?null:(Qs[e]=!0,()=>{Qs[e]=!1}):Qs.x||Qs.y?null:(Qs.x=Qs.y=!0,()=>{Qs.x=Qs.y=!1})}function gk(e,t){const r=p$(e),a=new AbortController,l={passive:!0,...t,signal:a.signal};return[r,l,()=>a.abort()]}function iA(e){return!(e.pointerType==="touch"||hk())}function E$(e,t,r={}){const[a,l,o]=gk(e,r),d=h=>{if(!iA(h))return;const{target:g}=h,p=t(g,h);if(typeof p!="function"||!g)return;const x=E=>{iA(E)&&(p(E),g.removeEventListener("pointerleave",x))};g.addEventListener("pointerleave",x,l)};return a.forEach(h=>{h.addEventListener("pointerenter",d,l)}),o}const pk=(e,t)=>t?e===t?!0:pk(e,t.parentElement):!1,J2=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,w$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function N$(e){return w$.has(e.tagName)||e.tabIndex!==-1}const rg=new WeakSet;function oA(e){return t=>{t.key==="Enter"&&e(t)}}function Ix(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const S$=(e,t)=>{const r=e.currentTarget;if(!r)return;const a=oA(()=>{if(rg.has(r))return;Ix(r,"down");const l=oA(()=>{Ix(r,"up")}),o=()=>Ix(r,"cancel");r.addEventListener("keyup",l,t),r.addEventListener("blur",o,t)});r.addEventListener("keydown",a,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",a),t)};function cA(e){return J2(e)&&!hk()}function C$(e,t,r={}){const[a,l,o]=gk(e,r),d=h=>{const g=h.currentTarget;if(!cA(h))return;rg.add(g);const p=t(g,h),x=(O,_)=>{window.removeEventListener("pointerup",E),window.removeEventListener("pointercancel",C),rg.has(g)&&rg.delete(g),cA(O)&&typeof p=="function"&&p(O,{success:_})},E=O=>{x(O,g===window||g===document||r.useGlobalTarget||pk(g,O.target))},C=O=>{x(O,!1)};window.addEventListener("pointerup",E,l),window.addEventListener("pointercancel",C,l)};return a.forEach(h=>{(r.useGlobalTarget?window:h).addEventListener("pointerdown",d,l),y$(h)&&(h.addEventListener("focus",p=>S$(p,l)),!N$(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function yk(e){return DD(e)&&"ownerSVGElement"in e}function A$(e){return yk(e)&&e.tagName==="svg"}const fn=e=>!!(e&&e.getVelocity),T$=[...uk,_a,ko],O$=e=>T$.find(ck(e)),xk=N.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function _$(e=!0){const t=N.useContext(P2);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:a,register:l}=t,o=N.useId();N.useEffect(()=>{if(e)return l(o)},[e]);const d=N.useCallback(()=>e&&a&&a(o),[o,a,e]);return!r&&a?[!1,d]:[!0]}const bk=N.createContext({strict:!1}),uA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qu={};for(const e in uA)Qu[e]={isEnabled:t=>uA[e].some(r=>!!t[r])};function D$(e){for(const t in e)Qu[t]={...Qu[t],...e[t]}}const k$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cg(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||k$.has(e)}let vk=e=>!Cg(e);function P$(e){typeof e=="function"&&(vk=t=>t.startsWith("on")?!Cg(t):e(t))}try{P$(require("@emotion/is-prop-valid").default)}catch{}function M$(e,t,r){const a={};for(const l in e)l==="values"&&typeof e.values=="object"||(vk(l)||r===!0&&Cg(l)||!t&&!Cg(l)||e.draggable&&l.startsWith("onDrag"))&&(a[l]=e[l]);return a}const Mp=N.createContext({});function Ip(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Xm(e){return typeof e=="string"||Array.isArray(e)}const ew=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tw=["initial",...ew];function Rp(e){return Ip(e.animate)||tw.some(t=>Xm(e[t]))}function Ek(e){return!!(Rp(e)||e.variants)}function I$(e,t){if(Rp(e)){const{initial:r,animate:a}=e;return{initial:r===!1||Xm(r)?r:void 0,animate:Xm(a)?a:void 0}}return e.inherit!==!1?t:{}}function R$(e){const{initial:t,animate:r}=I$(e,N.useContext(Mp));return N.useMemo(()=>({initial:t,animate:r}),[dA(t),dA(r)])}function dA(e){return Array.isArray(e)?e.join(" "):e}const Wm={};function L$(e){for(const t in e)Wm[t]=e[t],j2(t)&&(Wm[t].isCSSVariable=!0)}function wk(e,{layout:t,layoutId:r}){return yd.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Wm[e]||e==="opacity")}const B$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},F$=pd.length;function U$(e,t,r){let a="",l=!0;for(let o=0;o<F$;o++){const d=pd[o],h=e[d];if(h===void 0)continue;let g=!0;if(typeof h=="number"?g=h===(d.startsWith("scale")?1:0):g=parseFloat(h)===0,!g||r){const p=fk(h,Z2[d]);if(!g){l=!1;const x=B$[d]||d;a+=`${x}(${p}) `}r&&(t[d]=p)}}return a=a.trim(),r?a=r(t,l?"":a):l&&(a="none"),a}function rw(e,t,r){const{style:a,vars:l,transformOrigin:o}=e;let d=!1,h=!1;for(const g in t){const p=t[g];if(yd.has(g)){d=!0;continue}else if(j2(g)){l[g]=p;continue}else{const x=fk(p,Z2[g]);g.startsWith("origin")?(h=!0,o[g]=x):a[g]=x}}if(t.transform||(d||r?a.transform=U$(t,e.transform,r):a.transform&&(a.transform="none")),h){const{originX:g="50%",originY:p="50%",originZ:x=0}=o;a.transformOrigin=`${g} ${p} ${x}`}}const aw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Nk(e,t,r){for(const a in t)!fn(t[a])&&!wk(a,r)&&(e[a]=t[a])}function j$({transformTemplate:e},t){return N.useMemo(()=>{const r=aw();return rw(r,t,e),Object.assign({},r.vars,r.style)},[t])}function z$(e,t){const r=e.style||{},a={};return Nk(a,r,e),Object.assign(a,j$(e,t)),a}function V$(e,t){const r={},a=z$(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=a,r}const H$={offset:"stroke-dashoffset",array:"stroke-dasharray"},$$={offset:"strokeDashoffset",array:"strokeDasharray"};function q$(e,t,r=1,a=0,l=!0){e.pathLength=1;const o=l?H$:$$;e[o.offset]=_t.transform(-a);const d=_t.transform(t),h=_t.transform(r);e[o.array]=`${d} ${h}`}function Sk(e,{attrX:t,attrY:r,attrScale:a,pathLength:l,pathSpacing:o=1,pathOffset:d=0,...h},g,p,x){if(rw(e,h,p),g){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:E,style:C}=e;E.transform&&(C.transform=E.transform,delete E.transform),(C.transform||E.transformOrigin)&&(C.transformOrigin=E.transformOrigin??"50% 50%",delete E.transformOrigin),C.transform&&(C.transformBox=x?.transformBox??"fill-box",delete E.transformBox),t!==void 0&&(E.x=t),r!==void 0&&(E.y=r),a!==void 0&&(E.scale=a),l!==void 0&&q$(E,l,o,d,!1)}const Ck=()=>({...aw(),attrs:{}}),Ak=e=>typeof e=="string"&&e.toLowerCase()==="svg";function G$(e,t,r,a){const l=N.useMemo(()=>{const o=Ck();return Sk(o,t,Ak(a),e.transformTemplate,e.style),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};Nk(o,e.style,e),l.style={...o,...l.style}}return l}const Y$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nw(e){return typeof e!="string"||e.includes("-")?!1:!!(Y$.indexOf(e)>-1||/[A-Z]/u.test(e))}function X$(e,t,r,{latestValues:a},l,o=!1){const h=(nw(e)?G$:V$)(t,a,l,e),g=M$(t,typeof e=="string",o),p=e!==N.Fragment?{...g,...h,ref:r}:{},{children:x}=t,E=N.useMemo(()=>fn(x)?x.get():x,[x]);return N.createElement(e,{...p,children:E})}function mA(e){const t=[{},{}];return e?.values.forEach((r,a)=>{t[0][a]=r.get(),t[1][a]=r.getVelocity()}),t}function sw(e,t,r,a){if(typeof t=="function"){const[l,o]=mA(a);t=t(r!==void 0?r:e.custom,l,o)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[l,o]=mA(a);t=t(r!==void 0?r:e.custom,l,o)}return t}function ag(e){return fn(e)?e.get():e}function W$({scrapeMotionValuesFromProps:e,createRenderState:t},r,a,l){return{latestValues:K$(r,a,l,e),renderState:t()}}function K$(e,t,r,a){const l={},o=a(e,{});for(const C in o)l[C]=ag(o[C]);let{initial:d,animate:h}=e;const g=Rp(e),p=Ek(e);t&&p&&!g&&e.inherit!==!1&&(d===void 0&&(d=t.initial),h===void 0&&(h=t.animate));let x=r?r.initial===!1:!1;x=x||d===!1;const E=x?h:d;if(E&&typeof E!="boolean"&&!Ip(E)){const C=Array.isArray(E)?E:[E];for(let O=0;O<C.length;O++){const _=sw(e,C[O]);if(_){const{transitionEnd:P,transition:k,...I}=_;for(const F in I){let R=I[F];if(Array.isArray(R)){const Y=x?R.length-1:0;R=R[Y]}R!==null&&(l[F]=R)}for(const F in P)l[F]=P[F]}}}return l}const Tk=e=>(t,r)=>{const a=N.useContext(Mp),l=N.useContext(P2),o=()=>W$(e,t,a,l);return r?o():DV(o)};function lw(e,t,r){const{style:a}=e,l={};for(const o in a)(fn(a[o])||t.style&&fn(t.style[o])||wk(o,e)||r?.getValue(o)?.liveStyle!==void 0)&&(l[o]=a[o]);return l}const Z$=Tk({scrapeMotionValuesFromProps:lw,createRenderState:aw});function Ok(e,t,r){const a=lw(e,t,r);for(const l in e)if(fn(e[l])||fn(t[l])){const o=pd.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;a[o]=e[l]}return a}const Q$=Tk({scrapeMotionValuesFromProps:Ok,createRenderState:Ck}),J$=Symbol.for("motionComponentSymbol");function Ru(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function eq(e,t,r){return N.useCallback(a=>{a&&e.onMount&&e.onMount(a),t&&(a?t.mount(a):t.unmount()),r&&(typeof r=="function"?r(a):Ru(r)&&(r.current=a))},[t])}const iw=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),tq="framerAppearId",_k="data-"+iw(tq),Dk=N.createContext({});function rq(e,t,r,a,l){const{visualElement:o}=N.useContext(Mp),d=N.useContext(bk),h=N.useContext(P2),g=N.useContext(xk).reducedMotion,p=N.useRef(null);a=a||d.renderer,!p.current&&a&&(p.current=a(e,{visualState:t,parent:o,props:r,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:g}));const x=p.current,E=N.useContext(Dk);x&&!x.projection&&l&&(x.type==="html"||x.type==="svg")&&aq(p.current,r,l,E);const C=N.useRef(!1);N.useInsertionEffect(()=>{x&&C.current&&x.update(r,h)});const O=r[_k],_=N.useRef(!!O&&!window.MotionHandoffIsComplete?.(O)&&window.MotionHasOptimisedAnimation?.(O));return kV(()=>{x&&(C.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),x.scheduleRenderMicrotask(),_.current&&x.animationState&&x.animationState.animateChanges())}),N.useEffect(()=>{x&&(!_.current&&x.animationState&&x.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(O)}),_.current=!1),x.enteringChildren=void 0)}),x}function aq(e,t,r,a){const{layoutId:l,layout:o,drag:d,dragConstraints:h,layoutScroll:g,layoutRoot:p,layoutCrossfade:x}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:kk(e.parent)),e.projection.setOptions({layoutId:l,layout:o,alwaysMeasureLayout:!!d||h&&Ru(h),visualElement:e,animationType:typeof o=="string"?o:"both",initialPromotionConfig:a,crossfade:x,layoutScroll:g,layoutRoot:p})}function kk(e){if(e)return e.options.allowProjection!==!1?e.projection:kk(e.parent)}function Rx(e,{forwardMotionProps:t=!1}={},r,a){r&&D$(r);const l=nw(e)?Q$:Z$;function o(h,g){let p;const x={...N.useContext(xk),...h,layoutId:nq(h)},{isStatic:E}=x,C=R$(h),O=l(h,E);if(!E&&k2){sq();const _=lq(x);p=_.MeasureLayout,C.visualElement=rq(e,O,x,a,_.ProjectionNode)}return Hv.jsxs(Mp.Provider,{value:C,children:[p&&C.visualElement?Hv.jsx(p,{visualElement:C.visualElement,...x}):null,X$(e,h,eq(O,C.visualElement,g),O,E,t)]})}o.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const d=N.forwardRef(o);return d[J$]=e,d}function nq({layoutId:e}){const t=N.useContext(OD).id;return t&&e!==void 0?t+"-"+e:e}function sq(e,t){N.useContext(bk).strict}function lq(e){const{drag:t,layout:r}=Qu;if(!t&&!r)return{};const a={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function iq(e,t){if(typeof Proxy>"u")return Rx;const r=new Map,a=(o,d)=>Rx(o,d,e,t),l=(o,d)=>a(o,d);return new Proxy(l,{get:(o,d)=>d==="create"?a:(r.has(d)||r.set(d,Rx(d,void 0,e,t)),r.get(d))})}function Pk({top:e,left:t,right:r,bottom:a}){return{x:{min:t,max:r},y:{min:e,max:a}}}function oq({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function cq(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),a=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}function Lx(e){return e===void 0||e===1}function aE({scale:e,scaleX:t,scaleY:r}){return!Lx(e)||!Lx(t)||!Lx(r)}function pc(e){return aE(e)||Mk(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Mk(e){return fA(e.x)||fA(e.y)}function fA(e){return e&&e!=="0%"}function Ag(e,t,r){const a=e-r,l=t*a;return r+l}function hA(e,t,r,a,l){return l!==void 0&&(e=Ag(e,l,a)),Ag(e,r,a)+t}function nE(e,t=0,r=1,a,l){e.min=hA(e.min,t,r,a,l),e.max=hA(e.max,t,r,a,l)}function Ik(e,{x:t,y:r}){nE(e.x,t.translate,t.scale,t.originPoint),nE(e.y,r.translate,r.scale,r.originPoint)}const gA=.999999999999,pA=1.0000000000001;function uq(e,t,r,a=!1){const l=r.length;if(!l)return;t.x=t.y=1;let o,d;for(let h=0;h<l;h++){o=r[h],d=o.projectionDelta;const{visualElement:g}=o.options;g&&g.props.style&&g.props.style.display==="contents"||(a&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Bu(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),d&&(t.x*=d.x.scale,t.y*=d.y.scale,Ik(e,d)),a&&pc(o.latestValues)&&Bu(e,o.latestValues))}t.x<pA&&t.x>gA&&(t.x=1),t.y<pA&&t.y>gA&&(t.y=1)}function Lu(e,t){e.min=e.min+t,e.max=e.max+t}function yA(e,t,r,a,l=.5){const o=ra(e.min,e.max,l);nE(e,t,r,o,a)}function Bu(e,t){yA(e.x,t.x,t.scaleX,t.scale,t.originX),yA(e.y,t.y,t.scaleY,t.scale,t.originY)}function Rk(e,t){return Pk(cq(e.getBoundingClientRect(),t))}function dq(e,t,r){const a=Rk(e,r),{scroll:l}=t;return l&&(Lu(a.x,l.offset.x),Lu(a.y,l.offset.y)),a}const xA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fu=()=>({x:xA(),y:xA()}),bA=()=>({min:0,max:0}),Ua=()=>({x:bA(),y:bA()}),sE={current:null},Lk={current:!1};function mq(){if(Lk.current=!0,!!k2)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>sE.current=e.matches;e.addEventListener("change",t),t()}else sE.current=!1}const fq=new WeakMap;function hq(e,t,r){for(const a in t){const l=t[a],o=r[a];if(fn(l))e.addValue(a,l);else if(fn(o))e.addValue(a,Zu(l,{owner:e}));else if(o!==l)if(e.hasValue(a)){const d=e.getValue(a);d.liveStyle===!0?d.jump(l):d.hasAnimated||d.set(l)}else{const d=e.getStaticValue(a);e.addValue(a,Zu(d!==void 0?d:l,{owner:e}))}}for(const a in r)t[a]===void 0&&e.removeValue(a);return t}const vA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class gq{scrapeMotionValuesFromProps(t,r,a){return{}}constructor({parent:t,props:r,presenceContext:a,reducedMotionConfig:l,blockInitialAnimation:o,visualState:d},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=W2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const C=Ln.now();this.renderScheduledAt<C&&(this.renderScheduledAt=C,Wr.render(this.render,!1,!0))};const{latestValues:g,renderState:p}=d;this.latestValues=g,this.baseTarget={...g},this.initialValues=r.initial?{...g}:{},this.renderState=p,this.parent=t,this.props=r,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=l,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=Rp(r),this.isVariantNode=Ek(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:x,...E}=this.scrapeMotionValuesFromProps(r,{},this);for(const C in E){const O=E[C];g[C]!==void 0&&fn(O)&&O.set(g[C])}}mount(t){this.current=t,fq.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),Lk.current||mq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sE.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Do(this.notifyUpdate),Do(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=yd.has(t);a&&this.onBindTransform&&this.onBindTransform();const l=r.on("change",d=>{this.latestValues[t]=d,this.props.onUpdate&&Wr.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{l(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Qu){const r=Qu[t];if(!r)continue;const{isEnabled:a,Feature:l}=r;if(!this.features[t]&&l&&a(this.props)&&(this.features[t]=new l(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ua()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<vA.length;a++){const l=vA[a];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const o="on"+l,d=t[o];d&&(this.propEventSubscriptions[l]=this.on(l,d))}this.prevMotionValues=hq(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const a=this.values.get(t);r!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&r!==void 0&&(a=Zu(r===null?void 0:r,{owner:this}),this.addValue(t,a)),a}readValue(t,r){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(_D(a)||kD(a))?a=parseFloat(a):!O$(a)&&ko.test(r)&&(a=mk(t,r)),this.setBaseTarget(t,fn(a)?a.get():a)),fn(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const o=sw(this.props,r,this.presenceContext?.custom);o&&(a=o[t])}if(r&&a!==void 0)return a;const l=this.getBaseTargetFromProps(this.props,t);return l!==void 0&&!fn(l)?l:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new B2),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){Q2.render(this.render)}}class Bk extends gq{constructor(){super(...arguments),this.KeyframeResolver=g$}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:a}){delete r[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;fn(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Fk(e,{style:t,vars:r},a,l){const o=e.style;let d;for(d in t)o[d]=t[d];l?.applyProjectionStyles(o,a);for(d in r)o.setProperty(d,r[d])}function pq(e){return window.getComputedStyle(e)}class yq extends Bk{constructor(){super(...arguments),this.type="html",this.renderInstance=Fk}readValueFromInstance(t,r){if(yd.has(r))return this.projection?.isProjecting?Kv(r):IH(t,r);{const a=pq(t),l=(j2(r)?a.getPropertyValue(r):a[r])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:r}){return Rk(t,r)}build(t,r,a){rw(t,r,a.transformTemplate)}scrapeMotionValuesFromProps(t,r,a){return lw(t,r,a)}}const Uk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function xq(e,t,r,a){Fk(e,t,void 0,a);for(const l in t.attrs)e.setAttribute(Uk.has(l)?l:iw(l),t.attrs[l])}class bq extends Bk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ua}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(yd.has(r)){const a=dk(r);return a&&a.default||0}return r=Uk.has(r)?r:iw(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,a){return Ok(t,r,a)}build(t,r,a){Sk(t,r,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,r,a,l){xq(t,r,a,l)}mount(t){this.isSVGTag=Ak(t.tagName),super.mount(t)}}const vq=(e,t)=>nw(e)?new bq(t):new yq(t,{allowProjection:e!==N.Fragment});function Hu(e,t,r){const a=e.getProps();return sw(a,t,r!==void 0?r:a.custom,e)}const lE=e=>Array.isArray(e);function Eq(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Zu(r))}function wq(e){return lE(e)?e[e.length-1]||0:e}function Nq(e,t){const r=Hu(e,t);let{transitionEnd:a={},transition:l={},...o}=r||{};o={...o,...a};for(const d in o){const h=wq(o[d]);Eq(e,d,h)}}function Sq(e){return!!(fn(e)&&e.add)}function iE(e,t){const r=e.getValue("willChange");if(Sq(r))return r.add(t);if(!r&&vi.WillChange){const a=new vi.WillChange("auto");e.addValue("willChange",a),a.add(t)}}function jk(e){return e.props[_k]}const Cq=e=>e!==null;function Aq(e,{repeat:t,repeatType:r="loop"},a){const l=e.filter(Cq),o=t&&r!=="loop"&&t%2===1?0:l.length-1;return l[o]}const Tq={type:"spring",stiffness:500,damping:25,restSpeed:10},Oq=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),_q={type:"keyframes",duration:.8},Dq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kq=(e,{keyframes:t})=>t.length>2?_q:yd.has(e)?e.startsWith("scale")?Oq(t[1]):Tq:Dq;function Pq({when:e,delay:t,delayChildren:r,staggerChildren:a,staggerDirection:l,repeat:o,repeatType:d,repeatDelay:h,from:g,elapsed:p,...x}){return!!Object.keys(x).length}const ow=(e,t,r,a={},l,o)=>d=>{const h=K2(a,e)||{},g=h.delay||a.delay||0;let{elapsed:p=0}=a;p=p-Dl(g);const x={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...h,delay:-p,onUpdate:C=>{t.set(C),h.onUpdate&&h.onUpdate(C)},onComplete:()=>{d(),h.onComplete&&h.onComplete()},name:e,motionValue:t,element:o?void 0:l};Pq(h)||Object.assign(x,kq(e,x)),x.duration&&(x.duration=Dl(x.duration)),x.repeatDelay&&(x.repeatDelay=Dl(x.repeatDelay)),x.from!==void 0&&(x.keyframes[0]=x.from);let E=!1;if((x.type===!1||x.duration===0&&!x.repeatDelay)&&(tE(x),x.delay===0&&(E=!0)),(vi.instantAnimations||vi.skipAnimations)&&(E=!0,tE(x),x.delay=0),x.allowFlatten=!h.type&&!h.ease,E&&!o&&t.get()!==void 0){const C=Aq(x.keyframes,h);if(C!==void 0){Wr.update(()=>{x.onUpdate(C),x.onComplete()});return}}return h.isSync?new X2(x):new a$(x)};function Mq({protectedKeys:e,needsAnimating:t},r){const a=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,a}function zk(e,t,{delay:r=0,transitionOverride:a,type:l}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:d,...h}=t;a&&(o=a);const g=[],p=l&&e.animationState&&e.animationState.getState()[l];for(const x in h){const E=e.getValue(x,e.latestValues[x]??null),C=h[x];if(C===void 0||p&&Mq(p,x))continue;const O={delay:r,...K2(o||{},x)},_=E.get();if(_!==void 0&&!E.isAnimating&&!Array.isArray(C)&&C===_&&!O.velocity)continue;let P=!1;if(window.MotionHandoffAnimation){const I=jk(e);if(I){const F=window.MotionHandoffAnimation(I,x,Wr);F!==null&&(O.startTime=F,P=!0)}}iE(e,x),E.start(ow(x,E,C,e.shouldReduceMotion&&ok.has(x)?{type:!1}:O,e,P));const k=E.animation;k&&g.push(k)}return d&&Promise.all(g).then(()=>{Wr.update(()=>{d&&Nq(e,d)})}),g}function Vk(e,t,r,a=0,l=1){const o=Array.from(e).sort((p,x)=>p.sortNodePosition(x)).indexOf(t),d=e.size,h=(d-1)*a;return typeof r=="function"?r(o,d):l===1?o*a:h-o*a}function oE(e,t,r={}){const a=Hu(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:l=e.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(l=r.transitionOverride);const o=a?()=>Promise.all(zk(e,a,r)):()=>Promise.resolve(),d=e.variantChildren&&e.variantChildren.size?(g=0)=>{const{delayChildren:p=0,staggerChildren:x,staggerDirection:E}=l;return Iq(e,t,g,p,x,E,r)}:()=>Promise.resolve(),{when:h}=l;if(h){const[g,p]=h==="beforeChildren"?[o,d]:[d,o];return g().then(()=>p())}else return Promise.all([o(),d(r.delay)])}function Iq(e,t,r=0,a=0,l=0,o=1,d){const h=[];for(const g of e.variantChildren)g.notify("AnimationStart",t),h.push(oE(g,t,{...d,delay:r+(typeof a=="function"?0:a)+Vk(e.variantChildren,g,a,l,o)}).then(()=>g.notify("AnimationComplete",t)));return Promise.all(h)}function Rq(e,t,r={}){e.notify("AnimationStart",t);let a;if(Array.isArray(t)){const l=t.map(o=>oE(e,o,r));a=Promise.all(l)}else if(typeof t=="string")a=oE(e,t,r);else{const l=typeof t=="function"?Hu(e,t,r.custom):t;a=Promise.all(zk(e,l,r))}return a.then(()=>{e.notify("AnimationComplete",t)})}function Hk(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let a=0;a<r;a++)if(t[a]!==e[a])return!1;return!0}const Lq=tw.length;function $k(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?$k(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<Lq;r++){const a=tw[r],l=e.props[a];(Xm(l)||l===!1)&&(t[a]=l)}return t}const Bq=[...ew].reverse(),Fq=ew.length;function Uq(e){return t=>Promise.all(t.map(({animation:r,options:a})=>Rq(e,r,a)))}function jq(e){let t=Uq(e),r=EA(),a=!0;const l=g=>(p,x)=>{const E=Hu(e,x,g==="exit"?e.presenceContext?.custom:void 0);if(E){const{transition:C,transitionEnd:O,..._}=E;p={...p,..._,...O}}return p};function o(g){t=g(e)}function d(g){const{props:p}=e,x=$k(e.parent)||{},E=[],C=new Set;let O={},_=1/0;for(let k=0;k<Fq;k++){const I=Bq[k],F=r[I],R=p[I]!==void 0?p[I]:x[I],Y=Xm(R),j=I===g?F.isActive:null;j===!1&&(_=k);let z=R===x[I]&&R!==p[I]&&Y;if(z&&a&&e.manuallyAnimateOnMount&&(z=!1),F.protectedKeys={...O},!F.isActive&&j===null||!R&&!F.prevProp||Ip(R)||typeof R=="boolean")continue;const L=zq(F.prevProp,R);let q=L||I===g&&F.isActive&&!z&&Y||k>_&&Y,V=!1;const W=Array.isArray(R)?R:[R];let H=W.reduce(l(I),{});j===!1&&(H={});const{prevResolvedValues:$={}}=F,ce={...$,...H},me=se=>{q=!0,C.has(se)&&(V=!0,C.delete(se)),F.needsAnimating[se]=!0;const Ee=e.getValue(se);Ee&&(Ee.liveStyle=!1)};for(const se in ce){const Ee=H[se],we=$[se];if(O.hasOwnProperty(se))continue;let te=!1;lE(Ee)&&lE(we)?te=!Hk(Ee,we):te=Ee!==we,te?Ee!=null?me(se):C.add(se):Ee!==void 0&&C.has(se)?me(se):F.protectedKeys[se]=!0}F.prevProp=R,F.prevResolvedValues=H,F.isActive&&(O={...O,...H}),a&&e.blockInitialAnimation&&(q=!1);const ae=z&&L;q&&(!ae||V)&&E.push(...W.map(se=>{const Ee={type:I};if(typeof se=="string"&&a&&!ae&&e.manuallyAnimateOnMount&&e.parent){const{parent:we}=e,te=Hu(we,se);if(we.enteringChildren&&te){const{delayChildren:K}=te.transition||{};Ee.delay=Vk(we.enteringChildren,e,K)}}return{animation:se,options:Ee}}))}if(C.size){const k={};if(typeof p.initial!="boolean"){const I=Hu(e,Array.isArray(p.initial)?p.initial[0]:p.initial);I&&I.transition&&(k.transition=I.transition)}C.forEach(I=>{const F=e.getBaseTarget(I),R=e.getValue(I);R&&(R.liveStyle=!0),k[I]=F??null}),E.push({animation:k})}let P=!!E.length;return a&&(p.initial===!1||p.initial===p.animate)&&!e.manuallyAnimateOnMount&&(P=!1),a=!1,P?t(E):Promise.resolve()}function h(g,p){if(r[g].isActive===p)return Promise.resolve();e.variantChildren?.forEach(E=>E.animationState?.setActive(g,p)),r[g].isActive=p;const x=d(g);for(const E in r)r[E].protectedKeys={};return x}return{animateChanges:d,setActive:h,setAnimateFunction:o,getState:()=>r,reset:()=>{r=EA()}}}function zq(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Hk(t,e):!1}function dc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function EA(){return{animate:dc(!0),whileInView:dc(),whileHover:dc(),whileTap:dc(),whileDrag:dc(),whileFocus:dc(),exit:dc()}}class Lo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Vq extends Lo{constructor(t){super(t),t.animationState||(t.animationState=jq(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ip(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Hq=0;class $q extends Lo{constructor(){super(...arguments),this.id=Hq++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const l=this.node.animationState.setActive("exit",!t);r&&!t&&l.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const qq={animation:{Feature:Vq},exit:{Feature:$q}};function Km(e,t,r,a={passive:!0}){return e.addEventListener(t,r,a),()=>e.removeEventListener(t,r)}function Sf(e){return{point:{x:e.pageX,y:e.pageY}}}const Gq=e=>t=>J2(t)&&e(t,Sf(t));function jm(e,t,r,a){return Km(e,t,Gq(r),a)}const qk=1e-4,Yq=1-qk,Xq=1+qk,Gk=.01,Wq=0-Gk,Kq=0+Gk;function vn(e){return e.max-e.min}function Zq(e,t,r){return Math.abs(e-t)<=r}function wA(e,t,r,a=.5){e.origin=a,e.originPoint=ra(t.min,t.max,e.origin),e.scale=vn(r)/vn(t),e.translate=ra(r.min,r.max,e.origin)-e.originPoint,(e.scale>=Yq&&e.scale<=Xq||isNaN(e.scale))&&(e.scale=1),(e.translate>=Wq&&e.translate<=Kq||isNaN(e.translate))&&(e.translate=0)}function zm(e,t,r,a){wA(e.x,t.x,r.x,a?a.originX:void 0),wA(e.y,t.y,r.y,a?a.originY:void 0)}function NA(e,t,r){e.min=r.min+t.min,e.max=e.min+vn(t)}function Qq(e,t,r){NA(e.x,t.x,r.x),NA(e.y,t.y,r.y)}function SA(e,t,r){e.min=t.min-r.min,e.max=e.min+vn(t)}function Tg(e,t,r){SA(e.x,t.x,r.x),SA(e.y,t.y,r.y)}function Ts(e){return[e("x"),e("y")]}const Yk=({current:e})=>e?e.ownerDocument.defaultView:null,CA=(e,t)=>Math.abs(e-t);function Jq(e,t){const r=CA(e.x,t.x),a=CA(e.y,t.y);return Math.sqrt(r**2+a**2)}class Xk{constructor(t,r,{transformPagePoint:a,contextWindow:l=window,dragSnapToOrigin:o=!1,distanceThreshold:d=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Fx(this.lastMoveEventInfo,this.history),O=this.startEvent!==null,_=Jq(C.offset,{x:0,y:0})>=this.distanceThreshold;if(!O&&!_)return;const{point:P}=C,{timestamp:k}=on;this.history.push({...P,timestamp:k});const{onStart:I,onMove:F}=this.handlers;O||(I&&I(this.lastMoveEvent,C),this.startEvent=this.lastMoveEvent),F&&F(this.lastMoveEvent,C)},this.handlePointerMove=(C,O)=>{this.lastMoveEvent=C,this.lastMoveEventInfo=Bx(O,this.transformPagePoint),Wr.update(this.updatePoint,!0)},this.handlePointerUp=(C,O)=>{this.end();const{onEnd:_,onSessionEnd:P,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=Fx(C.type==="pointercancel"?this.lastMoveEventInfo:Bx(O,this.transformPagePoint),this.history);this.startEvent&&_&&_(C,I),P&&P(C,I)},!J2(t))return;this.dragSnapToOrigin=o,this.handlers=r,this.transformPagePoint=a,this.distanceThreshold=d,this.contextWindow=l||window;const h=Sf(t),g=Bx(h,this.transformPagePoint),{point:p}=g,{timestamp:x}=on;this.history=[{...p,timestamp:x}];const{onSessionStart:E}=r;E&&E(t,Fx(g,this.history)),this.removeListeners=Ef(jm(this.contextWindow,"pointermove",this.handlePointerMove),jm(this.contextWindow,"pointerup",this.handlePointerUp),jm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Do(this.updatePoint)}}function Bx(e,t){return t?{point:t(e.point)}:e}function AA(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Fx({point:e},t){return{point:e,delta:AA(e,Wk(t)),offset:AA(e,eG(t)),velocity:tG(t,.1)}}function eG(e){return e[0]}function Wk(e){return e[e.length-1]}function tG(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,a=null;const l=Wk(e);for(;r>=0&&(a=e[r],!(l.timestamp-a.timestamp>Dl(t)));)r--;if(!a)return{x:0,y:0};const o=ks(l.timestamp-a.timestamp);if(o===0)return{x:0,y:0};const d={x:(l.x-a.x)/o,y:(l.y-a.y)/o};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function rG(e,{min:t,max:r},a){return t!==void 0&&e<t?e=a?ra(t,e,a.min):Math.max(e,t):r!==void 0&&e>r&&(e=a?ra(r,e,a.max):Math.min(e,r)),e}function TA(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function aG(e,{top:t,left:r,bottom:a,right:l}){return{x:TA(e.x,r,l),y:TA(e.y,t,a)}}function OA(e,t){let r=t.min-e.min,a=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,a]=[a,r]),{min:r,max:a}}function nG(e,t){return{x:OA(e.x,t.x),y:OA(e.y,t.y)}}function sG(e,t){let r=.5;const a=vn(e),l=vn(t);return l>a?r=qm(t.min,t.max-a,e.min):a>l&&(r=qm(e.min,e.max-l,t.min)),bi(0,1,r)}function lG(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const cE=.35;function iG(e=cE){return e===!1?e=0:e===!0&&(e=cE),{x:_A(e,"left","right"),y:_A(e,"top","bottom")}}function _A(e,t,r){return{min:DA(e,t),max:DA(e,r)}}function DA(e,t){return typeof e=="number"?e:e[t]||0}const oG=new WeakMap;class cG{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ua(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:a}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const o=E=>{const{dragSnapToOrigin:C}=this.getProps();C?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Sf(E).point)},d=(E,C)=>{const{drag:O,dragPropagation:_,onDragStart:P}=this.getProps();if(O&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=v$(O),!this.openDragLock))return;this.latestPointerEvent=E,this.latestPanInfo=C,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ts(I=>{let F=this.getAxisMotionValue(I).get()||0;if(kl.test(F)){const{projection:R}=this.visualElement;if(R&&R.layout){const Y=R.layout.layoutBox[I];Y&&(F=vn(Y)*(parseFloat(F)/100))}}this.originPoint[I]=F}),P&&Wr.postRender(()=>P(E,C)),iE(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},h=(E,C)=>{this.latestPointerEvent=E,this.latestPanInfo=C;const{dragPropagation:O,dragDirectionLock:_,onDirectionLock:P,onDrag:k}=this.getProps();if(!O&&!this.openDragLock)return;const{offset:I}=C;if(_&&this.currentDirection===null){this.currentDirection=uG(I),this.currentDirection!==null&&P&&P(this.currentDirection);return}this.updateAxis("x",C.point,I),this.updateAxis("y",C.point,I),this.visualElement.render(),k&&k(E,C)},g=(E,C)=>{this.latestPointerEvent=E,this.latestPanInfo=C,this.stop(E,C),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>Ts(E=>this.getAnimationState(E)==="paused"&&this.getAxisMotionValue(E).animation?.play()),{dragSnapToOrigin:x}=this.getProps();this.panSession=new Xk(t,{onSessionStart:o,onStart:d,onMove:h,onSessionEnd:g,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:x,distanceThreshold:a,contextWindow:Yk(this.visualElement)})}stop(t,r){const a=t||this.latestPointerEvent,l=r||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!l||!a)return;const{velocity:d}=l;this.startAnimation(d);const{onDragEnd:h}=this.getProps();h&&Wr.postRender(()=>h(a,l))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,a){const{drag:l}=this.getProps();if(!a||!ph(t,l,this.currentDirection))return;const o=this.getAxisMotionValue(t);let d=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(d=rG(d,this.constraints[t],this.elastic[t])),o.set(d)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,l=this.constraints;t&&Ru(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=aG(a.layoutBox,t):this.constraints=!1,this.elastic=iG(r),l!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Ts(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=lG(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Ru(t))return!1;const a=t.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const o=dq(a,l.root,this.visualElement.getTransformPagePoint());let d=nG(l.layout.layoutBox,o);if(r){const h=r(oq(d));this.hasMutatedConstraints=!!h,h&&(d=Pk(h))}return d}startAnimation(t){const{drag:r,dragMomentum:a,dragElastic:l,dragTransition:o,dragSnapToOrigin:d,onDragTransitionEnd:h}=this.getProps(),g=this.constraints||{},p=Ts(x=>{if(!ph(x,r,this.currentDirection))return;let E=g&&g[x]||{};d&&(E={min:0,max:0});const C=l?200:1e6,O=l?40:1e7,_={type:"inertia",velocity:a?t[x]:0,bounceStiffness:C,bounceDamping:O,timeConstant:750,restDelta:1,restSpeed:10,...o,...E};return this.startAxisValueAnimation(x,_)});return Promise.all(p).then(h)}startAxisValueAnimation(t,r){const a=this.getAxisMotionValue(t);return iE(this.visualElement,t),a.start(ow(t,a,0,r,this.visualElement,!1))}stopAnimation(){Ts(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ts(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),l=a[r];return l||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){Ts(r=>{const{drag:a}=this.getProps();if(!ph(r,a,this.currentDirection))return;const{projection:l}=this.visualElement,o=this.getAxisMotionValue(r);if(l&&l.layout){const{min:d,max:h}=l.layout.layoutBox[r];o.set(t[r]-ra(d,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!Ru(r)||!a||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};Ts(d=>{const h=this.getAxisMotionValue(d);if(h&&this.constraints!==!1){const g=h.get();l[d]=sG({min:g,max:g},this.constraints[d])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),Ts(d=>{if(!ph(d,t,null))return;const h=this.getAxisMotionValue(d),{min:g,max:p}=this.constraints[d];h.set(ra(g,p,l[d]))})}addListeners(){if(!this.visualElement.current)return;oG.set(this.visualElement,this);const t=this.visualElement.current,r=jm(t,"pointerdown",g=>{const{drag:p,dragListener:x=!0}=this.getProps();p&&x&&this.start(g)}),a=()=>{const{dragConstraints:g}=this.getProps();Ru(g)&&g.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,o=l.addEventListener("measure",a);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),Wr.read(a);const d=Km(window,"resize",()=>this.scalePositionWithinConstraints()),h=l.addEventListener("didUpdate",(({delta:g,hasLayoutChanged:p})=>{this.isDragging&&p&&(Ts(x=>{const E=this.getAxisMotionValue(x);E&&(this.originPoint[x]+=g[x].translate,E.set(E.get()+g[x].translate))}),this.visualElement.render())}));return()=>{d(),r(),o(),h&&h()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:l=!1,dragConstraints:o=!1,dragElastic:d=cE,dragMomentum:h=!0}=t;return{...t,drag:r,dragDirectionLock:a,dragPropagation:l,dragConstraints:o,dragElastic:d,dragMomentum:h}}}function ph(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function uG(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class dG extends Lo{constructor(t){super(t),this.removeGroupControls=Ms,this.removeListeners=Ms,this.controls=new cG(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ms}unmount(){this.removeGroupControls(),this.removeListeners()}}const kA=e=>(t,r)=>{e&&Wr.postRender(()=>e(t,r))};class mG extends Lo{constructor(){super(...arguments),this.removePointerDownListener=Ms}onPointerDown(t){this.session=new Xk(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Yk(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:a,onPanEnd:l}=this.node.getProps();return{onSessionStart:kA(t),onStart:kA(r),onMove:a,onEnd:(o,d)=>{delete this.session,l&&Wr.postRender(()=>l(o,d))}}}mount(){this.removePointerDownListener=jm(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ng={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function PA(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const xm={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(_t.test(e))e=parseFloat(e);else return e;const r=PA(e,t.target.x),a=PA(e,t.target.y);return`${r}% ${a}%`}},fG={correct:(e,{treeScale:t,projectionDelta:r})=>{const a=e,l=ko.parse(e);if(l.length>5)return a;const o=ko.createTransformer(e),d=typeof l[0]!="number"?1:0,h=r.x.scale*t.x,g=r.y.scale*t.y;l[0+d]/=h,l[1+d]/=g;const p=ra(h,g,.5);return typeof l[2+d]=="number"&&(l[2+d]/=p),typeof l[3+d]=="number"&&(l[3+d]/=p),o(l)}};let Ux=!1;class hG extends N.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a,layoutId:l}=this.props,{projection:o}=t;L$(gG),o&&(r.group&&r.group.add(o),a&&a.register&&l&&a.register(o),Ux&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),ng.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:a,drag:l,isPresent:o}=this.props,{projection:d}=a;return d&&(d.isPresent=o,Ux=!0,l||t.layoutDependency!==r||r===void 0||t.isPresent!==o?d.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?d.promote():d.relegate()||Wr.postRender(()=>{const h=d.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Q2.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:l}=t;Ux=!0,l&&(l.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(l),a&&a.deregister&&a.deregister(l))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Kk(e){const[t,r]=_$(),a=N.useContext(OD);return Hv.jsx(hG,{...e,layoutGroup:a,switchLayoutGroup:N.useContext(Dk),isPresent:t,safeToRemove:r})}const gG={borderRadius:{...xm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xm,borderTopRightRadius:xm,borderBottomLeftRadius:xm,borderBottomRightRadius:xm,boxShadow:fG};function pG(e,t,r){const a=fn(e)?e:Zu(e);return a.start(ow("",a,t,r)),a.animation}const yG=(e,t)=>e.depth-t.depth;class xG{constructor(){this.children=[],this.isDirty=!1}add(t){M2(this.children,t),this.isDirty=!0}remove(t){I2(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(yG),this.isDirty=!1,this.children.forEach(t)}}function bG(e,t){const r=Ln.now(),a=({timestamp:l})=>{const o=l-r;o>=t&&(Do(a),e(o-t))};return Wr.setup(a,!0),()=>Do(a)}const Zk=["TopLeft","TopRight","BottomLeft","BottomRight"],vG=Zk.length,MA=e=>typeof e=="string"?parseFloat(e):e,IA=e=>typeof e=="number"||_t.test(e);function EG(e,t,r,a,l,o){l?(e.opacity=ra(0,r.opacity??1,wG(a)),e.opacityExit=ra(t.opacity??1,0,NG(a))):o&&(e.opacity=ra(t.opacity??1,r.opacity??1,a));for(let d=0;d<vG;d++){const h=`border${Zk[d]}Radius`;let g=RA(t,h),p=RA(r,h);if(g===void 0&&p===void 0)continue;g||(g=0),p||(p=0),g===0||p===0||IA(g)===IA(p)?(e[h]=Math.max(ra(MA(g),MA(p),a),0),(kl.test(p)||kl.test(g))&&(e[h]+="%")):e[h]=p}(t.rotate||r.rotate)&&(e.rotate=ra(t.rotate||0,r.rotate||0,a))}function RA(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const wG=Qk(0,.5,UD),NG=Qk(.5,.95,Ms);function Qk(e,t,r){return a=>a<e?0:a>t?1:r(qm(e,t,a))}function LA(e,t){e.min=t.min,e.max=t.max}function Ks(e,t){LA(e.x,t.x),LA(e.y,t.y)}function BA(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function FA(e,t,r,a,l){return e-=t,e=Ag(e,1/r,a),l!==void 0&&(e=Ag(e,1/l,a)),e}function SG(e,t=0,r=1,a=.5,l,o=e,d=e){if(kl.test(t)&&(t=parseFloat(t),t=ra(d.min,d.max,t/100)-d.min),typeof t!="number")return;let h=ra(o.min,o.max,a);e===o&&(h-=t),e.min=FA(e.min,t,r,h,l),e.max=FA(e.max,t,r,h,l)}function UA(e,t,[r,a,l],o,d){SG(e,t[r],t[a],t[l],t.scale,o,d)}const CG=["x","scaleX","originX"],AG=["y","scaleY","originY"];function jA(e,t,r,a){UA(e.x,t,CG,r?r.x:void 0,a?a.x:void 0),UA(e.y,t,AG,r?r.y:void 0,a?a.y:void 0)}function zA(e){return e.translate===0&&e.scale===1}function Jk(e){return zA(e.x)&&zA(e.y)}function VA(e,t){return e.min===t.min&&e.max===t.max}function TG(e,t){return VA(e.x,t.x)&&VA(e.y,t.y)}function HA(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function eP(e,t){return HA(e.x,t.x)&&HA(e.y,t.y)}function $A(e){return vn(e.x)/vn(e.y)}function qA(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class OG{constructor(){this.members=[]}add(t){M2(this.members,t),t.scheduleRender()}remove(t){if(I2(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(l=>t===l);if(r===0)return!1;let a;for(let l=r;l>=0;l--){const o=this.members[l];if(o.isPresent!==!1){a=o;break}}return a?(this.promote(a),!0):!1}promote(t,r){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,r&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:l}=t.options;l===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:a}=t;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _G(e,t,r){let a="";const l=e.x.translate/t.x,o=e.y.translate/t.y,d=r?.z||0;if((l||o||d)&&(a=`translate3d(${l}px, ${o}px, ${d}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:p,rotate:x,rotateX:E,rotateY:C,skewX:O,skewY:_}=r;p&&(a=`perspective(${p}px) ${a}`),x&&(a+=`rotate(${x}deg) `),E&&(a+=`rotateX(${E}deg) `),C&&(a+=`rotateY(${C}deg) `),O&&(a+=`skewX(${O}deg) `),_&&(a+=`skewY(${_}deg) `)}const h=e.x.scale*t.x,g=e.y.scale*t.y;return(h!==1||g!==1)&&(a+=`scale(${h}, ${g})`),a||"none"}const jx=["","X","Y","Z"],DG=1e3;let kG=0;function zx(e,t,r,a){const{latestValues:l}=t;l[e]&&(r[e]=l[e],t.setStaticValue(e,0),a&&(a[e]=0))}function tP(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=jk(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:l,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Wr,!(l||o))}const{parent:a}=e;a&&!a.hasCheckedOptimisedAppear&&tP(a)}function rP({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:a,resetTransform:l}){return class{constructor(d={},h=t?.()){this.id=kG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(IG),this.nodes.forEach(FG),this.nodes.forEach(UG),this.nodes.forEach(RG)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new xG)}addEventListener(d,h){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new B2),this.eventHandlers.get(d).add(h)}notifyListeners(d,...h){const g=this.eventHandlers.get(d);g&&g.notify(...h)}hasListeners(d){return this.eventHandlers.has(d)}mount(d){if(this.instance)return;this.isSVG=yk(d)&&!A$(d),this.instance=d;const{layoutId:h,layout:g,visualElement:p}=this.options;if(p&&!p.current&&p.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(g||h)&&(this.isLayoutDirty=!0),e){let x,E=0;const C=()=>this.root.updateBlockedByResize=!1;Wr.read(()=>{E=window.innerWidth}),e(d,()=>{const O=window.innerWidth;O!==E&&(E=O,this.root.updateBlockedByResize=!0,x&&x(),x=bG(C,250),ng.hasAnimatedSinceResize&&(ng.hasAnimatedSinceResize=!1,this.nodes.forEach(XA)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||g)&&this.addEventListener("didUpdate",({delta:x,hasLayoutChanged:E,hasRelativeLayoutChanged:C,layout:O})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||p.getDefaultTransition()||$G,{onLayoutAnimationStart:P,onLayoutAnimationComplete:k}=p.getProps(),I=!this.targetLayout||!eP(this.targetLayout,O),F=!E&&C;if(this.options.layoutRoot||this.resumeFrom||F||E&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...K2(_,"layout"),onPlay:P,onComplete:k};(p.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(x,F)}else E||XA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=O})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Do(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(jG),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&tP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let x=0;x<this.path.length;x++){const E=this.path[x];E.shouldResetTransform=!0,E.updateScroll("snapshot"),E.options.layoutRoot&&E.willUpdate(!1)}const{layoutId:h,layout:g}=this.options;if(h===void 0&&!g)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(GA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(YA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(BG),this.nodes.forEach(PG),this.nodes.forEach(MG)):this.nodes.forEach(YA),this.clearAllSnapshots();const h=Ln.now();on.delta=bi(0,1e3/60,h-on.timestamp),on.timestamp=h,on.isProcessing=!0,_x.update.process(on),_x.preRender.process(on),_x.render.process(on),on.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Q2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(LG),this.sharedNodes.forEach(zG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Wr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Wr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!vn(this.snapshot.measuredBox.x)&&!vn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ua(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(h=!1),h&&this.instance){const g=a(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:g,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!l)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!Jk(this.projectionDelta),g=this.getTransformTemplate(),p=g?g(this.latestValues,""):void 0,x=p!==this.prevTransformTemplateValue;d&&this.instance&&(h||pc(this.latestValues)||x)&&(l(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const h=this.measurePageBox();let g=this.removeElementScroll(h);return d&&(g=this.removeTransform(g)),qG(g),{animationId:this.root.animationId,measuredBox:h,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:d}=this.options;if(!d)return Ua();const h=d.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(GG))){const{scroll:p}=this.root;p&&(Lu(h.x,p.offset.x),Lu(h.y,p.offset.y))}return h}removeElementScroll(d){const h=Ua();if(Ks(h,d),this.scroll?.wasRoot)return h;for(let g=0;g<this.path.length;g++){const p=this.path[g],{scroll:x,options:E}=p;p!==this.root&&x&&E.layoutScroll&&(x.wasRoot&&Ks(h,d),Lu(h.x,x.offset.x),Lu(h.y,x.offset.y))}return h}applyTransform(d,h=!1){const g=Ua();Ks(g,d);for(let p=0;p<this.path.length;p++){const x=this.path[p];!h&&x.options.layoutScroll&&x.scroll&&x!==x.root&&Bu(g,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),pc(x.latestValues)&&Bu(g,x.latestValues)}return pc(this.latestValues)&&Bu(g,this.latestValues),g}removeTransform(d){const h=Ua();Ks(h,d);for(let g=0;g<this.path.length;g++){const p=this.path[g];if(!p.instance||!pc(p.latestValues))continue;aE(p.latestValues)&&p.updateSnapshot();const x=Ua(),E=p.measurePageBox();Ks(x,E),jA(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,x)}return pc(this.latestValues)&&jA(h,this.latestValues),h}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==on.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==h;if(!(d||g&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:x,layoutId:E}=this.options;if(!this.layout||!(x||E))return;this.resolvedRelativeTargetAt=on.timestamp;const C=this.getClosestProjectingParent();C&&this.linkedParentVersion!==C.layoutVersion&&!C.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(C&&C.layout?this.createRelativeTarget(C,this.layout.layoutBox,C.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ua(),this.targetWithTransforms=Ua()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Qq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ks(this.target,this.layout.layoutBox),Ik(this.target,this.targetDelta)):Ks(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,C&&!!C.resumingFrom==!!this.resumingFrom&&!C.options.layoutScroll&&C.target&&this.animationProgress!==1?this.createRelativeTarget(C,this.target,C.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||aE(this.parent.latestValues)||Mk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(d,h,g){this.relativeParent=d,this.linkedParentVersion=d.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ua(),this.relativeTargetOrigin=Ua(),Tg(this.relativeTargetOrigin,h,g),Ks(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const d=this.getLead(),h=!!this.resumingFrom||this!==d;let g=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(g=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===on.timestamp&&(g=!1),g)return;const{layout:p,layoutId:x}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||x))return;Ks(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,C=this.treeScale.y;uq(this.layoutCorrected,this.treeScale,this.path,h),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=Ua());const{target:O}=d;if(!O){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(BA(this.prevProjectionDelta.x,this.projectionDelta.x),BA(this.prevProjectionDelta.y,this.projectionDelta.y)),zm(this.projectionDelta,this.layoutCorrected,O,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==C||!qA(this.projectionDelta.x,this.prevProjectionDelta.x)||!qA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",O))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){if(this.options.visualElement?.scheduleRender(),d){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Fu(),this.projectionDelta=Fu(),this.projectionDeltaWithTransform=Fu()}setAnimationOrigin(d,h=!1){const g=this.snapshot,p=g?g.latestValues:{},x={...this.latestValues},E=Fu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const C=Ua(),O=g?g.source:void 0,_=this.layout?this.layout.source:void 0,P=O!==_,k=this.getStack(),I=!k||k.members.length<=1,F=!!(P&&!I&&this.options.crossfade===!0&&!this.path.some(HG));this.animationProgress=0;let R;this.mixTargetDelta=Y=>{const j=Y/1e3;WA(E.x,d.x,j),WA(E.y,d.y,j),this.setTargetDelta(E),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Tg(C,this.layout.layoutBox,this.relativeParent.layout.layoutBox),VG(this.relativeTarget,this.relativeTargetOrigin,C,j),R&&TG(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Ua()),Ks(R,this.relativeTarget)),P&&(this.animationValues=x,EG(x,p,this.latestValues,j,F,I)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Do(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Wr.update(()=>{ng.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Zu(0)),this.currentAnimation=pG(this.motionValue,[0,1e3],{...d,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),d.onUpdate&&d.onUpdate(h)},onStop:()=>{},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(DG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:h,target:g,layout:p,latestValues:x}=d;if(!(!h||!g||!p)){if(this!==d&&this.layout&&p&&aP(this.options.animationType,this.layout.layoutBox,p.layoutBox)){g=this.target||Ua();const E=vn(this.layout.layoutBox.x);g.x.min=d.target.x.min,g.x.max=g.x.min+E;const C=vn(this.layout.layoutBox.y);g.y.min=d.target.y.min,g.y.max=g.y.min+C}Ks(h,g),Bu(h,x),zm(this.projectionDeltaWithTransform,this.layoutCorrected,h,x)}}registerSharedNode(d,h){this.sharedNodes.has(d)||this.sharedNodes.set(d,new OG),this.sharedNodes.get(d).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){const{layoutId:d}=this.options;return d?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:d}=this.options;return d?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:h,preserveFollowOpacity:g}={}){const p=this.getStack();p&&p.promote(this,g),d&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let h=!1;const{latestValues:g}=d;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(h=!0),!h)return;const p={};g.z&&zx("z",d,p,this.animationValues);for(let x=0;x<jx.length;x++)zx(`rotate${jx[x]}`,d,p,this.animationValues),zx(`skew${jx[x]}`,d,p,this.animationValues);d.render();for(const x in p)d.setStaticValue(x,p[x]),this.animationValues&&(this.animationValues[x]=p[x]);d.scheduleRender()}applyProjectionStyles(d,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){d.visibility="hidden";return}const g=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,d.visibility="",d.opacity="",d.pointerEvents=ag(h?.pointerEvents)||"",d.transform=g?g(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(d.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,d.pointerEvents=ag(h?.pointerEvents)||""),this.hasProjected&&!pc(this.latestValues)&&(d.transform=g?g({},""):"none",this.hasProjected=!1);return}d.visibility="";const x=p.animationValues||p.latestValues;this.applyTransformsToTarget();let E=_G(this.projectionDeltaWithTransform,this.treeScale,x);g&&(E=g(x,E)),d.transform=E;const{x:C,y:O}=this.projectionDelta;d.transformOrigin=`${C.origin*100}% ${O.origin*100}% 0`,p.animationValues?d.opacity=p===this?x.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:d.opacity=p===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const _ in Wm){if(x[_]===void 0)continue;const{correct:P,applyTo:k,isCSSVariable:I}=Wm[_],F=E==="none"?x[_]:P(x[_],p);if(k){const R=k.length;for(let Y=0;Y<R;Y++)d[k[Y]]=F}else I?this.options.visualElement.renderState.vars[_]=F:d[_]=F}this.options.layoutId&&(d.pointerEvents=p===this?ag(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>d.currentAnimation?.stop()),this.root.nodes.forEach(GA),this.root.sharedNodes.clear()}}}function PG(e){e.updateLayout()}function MG(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:l}=e.options,o=t.source!==e.layout.source;l==="size"?Ts(x=>{const E=o?t.measuredBox[x]:t.layoutBox[x],C=vn(E);E.min=r[x].min,E.max=E.min+C}):aP(l,t.layoutBox,r)&&Ts(x=>{const E=o?t.measuredBox[x]:t.layoutBox[x],C=vn(r[x]);E.max=E.min+C,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[x].max=e.relativeTarget[x].min+C)});const d=Fu();zm(d,r,t.layoutBox);const h=Fu();o?zm(h,e.applyTransform(a,!0),t.measuredBox):zm(h,r,t.layoutBox);const g=!Jk(d);let p=!1;if(!e.resumeFrom){const x=e.getClosestProjectingParent();if(x&&!x.resumeFrom){const{snapshot:E,layout:C}=x;if(E&&C){const O=Ua();Tg(O,t.layoutBox,E.layoutBox);const _=Ua();Tg(_,r,C.layoutBox),eP(O,_)||(p=!0),x.options.layoutRoot&&(e.relativeTarget=_,e.relativeTargetOrigin=O,e.relativeParent=x)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:h,layoutDelta:d,hasLayoutChanged:g,hasRelativeLayoutChanged:p})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function IG(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function RG(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function LG(e){e.clearSnapshot()}function GA(e){e.clearMeasurements()}function YA(e){e.isLayoutDirty=!1}function BG(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function XA(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function FG(e){e.resolveTargetDelta()}function UG(e){e.calcProjection()}function jG(e){e.resetSkewAndRotation()}function zG(e){e.removeLeadSnapshot()}function WA(e,t,r){e.translate=ra(t.translate,0,r),e.scale=ra(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function KA(e,t,r,a){e.min=ra(t.min,r.min,a),e.max=ra(t.max,r.max,a)}function VG(e,t,r,a){KA(e.x,t.x,r.x,a),KA(e.y,t.y,r.y,a)}function HG(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const $G={duration:.45,ease:[.4,0,.1,1]},ZA=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),QA=ZA("applewebkit/")&&!ZA("chrome/")?Math.round:Ms;function JA(e){e.min=QA(e.min),e.max=QA(e.max)}function qG(e){JA(e.x),JA(e.y)}function aP(e,t,r){return e==="position"||e==="preserve-aspect"&&!Zq($A(t),$A(r),.2)}function GG(e){return e!==e.root&&e.scroll?.wasRoot}const YG=rP({attachResizeListener:(e,t)=>Km(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Vx={current:void 0},nP=rP({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Vx.current){const e=new YG({});e.mount(window),e.setOptions({layoutScroll:!0}),Vx.current=e}return Vx.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),XG={pan:{Feature:mG},drag:{Feature:dG,ProjectionNode:nP,MeasureLayout:Kk}};function e5(e,t,r){const{props:a}=e;e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",r==="Start");const l="onHover"+r,o=a[l];o&&Wr.postRender(()=>o(t,Sf(t)))}class WG extends Lo{mount(){const{current:t}=this.node;t&&(this.unmount=E$(t,(r,a)=>(e5(this.node,a,"Start"),l=>e5(this.node,l,"End"))))}unmount(){}}class KG extends Lo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ef(Km(this.node.current,"focus",()=>this.onFocus()),Km(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function t5(e,t,r){const{props:a}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&a.whileTap&&e.animationState.setActive("whileTap",r==="Start");const l="onTap"+(r==="End"?"":r),o=a[l];o&&Wr.postRender(()=>o(t,Sf(t)))}class ZG extends Lo{mount(){const{current:t}=this.node;t&&(this.unmount=C$(t,(r,a)=>(t5(this.node,a,"Start"),(l,{success:o})=>t5(this.node,l,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const uE=new WeakMap,Hx=new WeakMap,QG=e=>{const t=uE.get(e.target);t&&t(e)},JG=e=>{e.forEach(QG)};function eY({root:e,...t}){const r=e||document;Hx.has(r)||Hx.set(r,{});const a=Hx.get(r),l=JSON.stringify(t);return a[l]||(a[l]=new IntersectionObserver(JG,{root:e,...t})),a[l]}function tY(e,t,r){const a=eY(t);return uE.set(e,r),a.observe(e),()=>{uE.delete(e),a.unobserve(e)}}const rY={some:0,all:1};class aY extends Lo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:a,amount:l="some",once:o}=t,d={root:r?r.current:void 0,rootMargin:a,threshold:typeof l=="number"?l:rY[l]},h=g=>{const{isIntersecting:p}=g;if(this.isInView===p||(this.isInView=p,o&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:x,onViewportLeave:E}=this.node.getProps(),C=p?x:E;C&&C(g)};return tY(this.node.current,d,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(nY(t,r))&&this.startObserver()}unmount(){}}function nY({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const sY={inView:{Feature:aY},tap:{Feature:ZG},focus:{Feature:KG},hover:{Feature:WG}},lY={layout:{ProjectionNode:nP,MeasureLayout:Kk}},iY={...qq,...sY,...XG,...lY},sP=iq(iY,vq),oY=[{value:"lifetime",label:"All Time",icon:""},{value:"last12Months",label:"12 Months",icon:"12M"},{value:"last6Months",label:"6 Months",icon:"6M"},{value:"last3Months",label:"3 Months",icon:"3M"},{value:"lastMonth",label:"Last Month",icon:"1M"},{value:"thisMonth",label:"This Month",icon:"TM"}],cY=({selected:e,onChange:t})=>n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-2"},n.createElement("div",{className:"flex flex-wrap gap-2"},oY.map(r=>n.createElement(sP.button,{key:r.value,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(r.value),className:`
              px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200
              ${e===r.value?"bg-gray-800 text-white shadow-md":"bg-gray-50 text-gray-700 hover:bg-gray-100"}
            `},n.createElement("span",{className:"hidden sm:inline"},r.label),n.createElement("span",{className:"sm:hidden font-semibold"},r.icon)))));function uY(e){return Vt({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"},child:[]}]})(e)}function dY(e){return Vt({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"},child:[]},{tag:"path",attr:{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"},child:[]}]})(e)}const Da=({title:e,value:t,subtitle:r,icon:a,trend:l,trendDirection:o="neutral",bgColor:d="bg-white",iconColor:h="text-gray-800",children:g,loading:p=!1})=>{const x={up:"text-green-600 bg-green-50",down:"text-red-600 bg-red-50",neutral:"text-gray-600 bg-gray-50"};return p?n.createElement("div",{className:`${d} rounded-lg shadow-sm border border-gray-100 p-4 animate-pulse`},n.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-3"}),n.createElement("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),n.createElement("div",{className:"h-2 bg-gray-200 rounded w-1/3"})):n.createElement(sP.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`${d} rounded-lg shadow-sm hover:shadow-md transition-all duration-200 border border-gray-100 p-4`},n.createElement("div",{className:"flex items-start justify-between mb-2"},n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("p",{className:"text-xs font-medium text-gray-600 mb-1 uppercase tracking-wide"},e),n.createElement("h3",{className:"text-xl font-bold text-gray-900 truncate"},t),r&&n.createElement("p",{className:"text-xs text-gray-500 mt-0.5 truncate"},r)),a&&n.createElement("div",{className:`${h} bg-opacity-10 p-2 rounded-lg flex-shrink-0 ml-2`},a)),l&&n.createElement("div",{className:"flex items-center gap-2"},n.createElement("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${x[o]}`},l),n.createElement("span",{className:"text-xs text-gray-500"},"vs last period")),g&&n.createElement("div",{className:"mt-4 pt-4 border-t border-gray-100"},g))},mY=async()=>ze(je.get("/web/analytics/dashboard")),Js=e=>!e&&e!==0?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Cr=e=>!e&&e!==0?"0":e>=1e7?`${(e/1e7).toFixed(1)}Cr`:e>=1e5?`${(e/1e5).toFixed(1)}L`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString(),fY=e=>{if(!e)return"N/A";const t=new Date(e);return new Intl.DateTimeFormat("en-IN",{day:"numeric",month:"short",year:"numeric"}).format(t)},hY=({data:e,loading:t})=>{if(!e)return n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},[1,2,3,4].map(o=>n.createElement(Da,{key:o,loading:!0})));const{email:r,whatsapp:a,totalCommunications:l}=e;return n.createElement("div",{className:"space-y-4"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("h2",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Communication Analytics"),n.createElement("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-green-50 px-2 py-1 rounded-full border border-green-200"},n.createElement("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),n.createElement("span",null,"Real-time"))),n.createElement("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3"},n.createElement(Da,{title:"Total Communications",value:Cr(l),subtitle:"All channels combined",icon:n.createElement(uY,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:t}),n.createElement(Da,{title:"Email Messages",value:Cr(r.total),subtitle:`${r.successRate} success rate`,icon:n.createElement(dY,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:t}),n.createElement(Da,{title:"WhatsApp Messages",value:Cr(a.total),subtitle:`${a.successRate} success rate`,icon:n.createElement("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})),iconColor:"text-green-600",loading:t}),n.createElement(Da,{title:"Overall Success Rate",value:l>0?((r.successful+a.successful)/l*100).toFixed(1)+"%":"0%",subtitle:"Across all channels",icon:n.createElement(Ku,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:t})))};function gY(e){return Vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 32C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48H48zm0 32h106c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H38c-3.3 0-6-2.7-6-6V80c0-8.8 7.2-16 16-16zm426 96H38c-3.3 0-6-2.7-6-6v-36c0-3.3 2.7-6 6-6h138l30.2-45.3c1.1-1.7 3-2.7 5-2.7H464c8.8 0 16 7.2 16 16v74c0 3.3-2.7 6-6 6zM256 424c-66.2 0-120-53.8-120-120s53.8-120 120-120 120 53.8 120 120-53.8 120-120 120zm0-208c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm-48 104c-8.8 0-16-7.2-16-16 0-35.3 28.7-64 64-64 8.8 0 16 7.2 16 16s-7.2 16-16 16c-17.6 0-32 14.4-32 32 0 8.8-7.2 16-16 16z"},child:[]}]})(e)}function lP(e){return Vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(e)}function pY(e){return Vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 174.8l-39.6-39.6c-9.4-9.4-24.6-9.4-33.9 0L192 374.7 80.6 263.2c-9.4-9.4-24.6-9.4-33.9 0L7 302.9c-9.4 9.4-9.4 24.6 0 34L175 505c9.4 9.4 24.6 9.4 33.9 0l296-296.2c9.4-9.5 9.4-24.7.1-34zm-324.3 106c6.2 6.3 16.4 6.3 22.6 0l208-208.2c6.2-6.3 6.2-16.4 0-22.6L366.1 4.7c-6.2-6.3-16.4-6.3-22.6 0L192 156.2l-55.4-55.5c-6.2-6.3-16.4-6.3-22.6 0L68.7 146c-6.2 6.3-6.2 16.4 0 22.6l112 112.2z"},child:[]}]})(e)}function dE(e){return Vt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"},child:[]}]})(e)}function mE(e){return Vt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function bm(e){return Vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M223.75 130.75L154.62 15.54A31.997 31.997 0 0 0 127.18 0H16.03C3.08 0-4.5 14.57 2.92 25.18l111.27 158.96c29.72-27.77 67.52-46.83 109.56-53.39zM495.97 0H384.82c-11.24 0-21.66 5.9-27.44 15.54l-69.13 115.21c42.04 6.56 79.84 25.62 109.56 53.38L509.08 25.18C516.5 14.57 508.92 0 495.97 0zM256 160c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm92.52 157.26l-37.93 36.96 8.97 52.22c1.6 9.36-8.26 16.51-16.65 12.09L256 393.88l-46.9 24.65c-8.4 4.45-18.25-2.74-16.65-12.09l8.97-52.22-37.93-36.96c-6.82-6.64-3.05-18.23 6.35-19.59l52.43-7.64 23.43-47.52c2.11-4.28 6.19-6.39 10.28-6.39 4.11 0 8.22 2.14 10.33 6.39l23.43 47.52 52.43 7.64c9.4 1.36 13.17 12.95 6.35 19.59z"},child:[]}]})(e)}function Og(e){return Vt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M128 160h320v192H128V160zm400 96c0 26.51 21.49 48 48 48v96c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48v-96c26.51 0 48-21.49 48-48s-21.49-48-48-48v-96c0-26.51 21.49-48 48-48h480c26.51 0 48 21.49 48 48v96c-26.51 0-48 21.49-48 48zm-48-104c0-13.255-10.745-24-24-24H120c-13.255 0-24 10.745-24 24v208c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V152z"},child:[]}]})(e)}function yY(e){return Vt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function iP(e){return Vt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}const xY=({usersData:e,adminsData:t,loading:r})=>n.createElement("div",{className:"space-y-4"},n.createElement("h2",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Users & Admins"),n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4"},e&&n.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},n.createElement("div",{className:"flex items-start justify-between mb-3"},n.createElement("div",null,n.createElement("h3",{className:"text-xs font-medium text-gray-600 mb-1"},"Total Users"),n.createElement("p",{className:"text-3xl font-bold text-gray-900"},Cr(e.total))),n.createElement("div",{className:"p-2 bg-blue-50 rounded-lg"},n.createElement(iP,{className:"w-6 h-6 text-gray-800"}))),e.growth&&n.createElement("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-50 border border-green-200 mb-3"},n.createElement("span",{className:"text-xs font-bold text-green-700"},e.growth),n.createElement("span",{className:"text-xs text-gray-600"},"growth")),n.createElement("div",{className:"grid grid-cols-2 gap-2 mt-3"},n.createElement("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-3 rounded-lg border border-green-100"},n.createElement("div",{className:"flex items-center gap-1.5 mb-1"},n.createElement(yY,{className:"w-3 h-3 text-green-600"}),n.createElement("p",{className:"text-xs font-medium text-gray-600"},"This Month")),n.createElement("p",{className:"text-xl font-bold text-green-700"},Cr(e.thisMonth))),n.createElement("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200"},n.createElement("p",{className:"text-xs font-medium text-gray-600 mb-1"},"Last Month"),n.createElement("p",{className:"text-xl font-bold text-gray-900"},Cr(e.lastMonth))))),t&&n.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},n.createElement("div",{className:"flex items-start justify-between mb-3"},n.createElement("div",null,n.createElement("h3",{className:"text-xs font-medium text-gray-600 mb-1"},"Total Admins"),n.createElement("p",{className:"text-3xl font-bold text-gray-900"},Cr(t.total))),n.createElement("div",{className:"p-2 bg-purple-50 rounded-lg"},n.createElement(Qz,{className:"w-6 h-6 text-purple-600"}))),n.createElement("div",{className:"flex items-center gap-2 mb-3"},n.createElement("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-50 border border-green-200"},n.createElement(aV,{className:"w-3 h-3 text-green-600"}),n.createElement("span",{className:"text-xs font-bold text-gray-900"},t.active),n.createElement("span",{className:"text-xs text-gray-600"},"active")),n.createElement("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gray-100 border border-gray-200"},n.createElement("span",{className:"text-xs font-bold text-gray-900"},t.inactive),n.createElement("span",{className:"text-xs text-gray-600"},"inactive"))),t.byRole&&Object.keys(t.byRole).length>0&&n.createElement("div",{className:"space-y-1.5 mt-3 pt-3 border-t border-gray-200"},n.createElement("p",{className:"text-xs font-semibold text-gray-600 uppercase mb-1.5"},"By Role"),Object.entries(t.byRole).map(([a,l])=>n.createElement("div",{key:a,className:"flex items-center justify-between text-xs p-2 rounded-lg bg-purple-50 hover:bg-purple-100 transition-colors"},n.createElement("span",{className:"font-medium text-gray-900 capitalize"},a.replace("_"," ")),n.createElement("span",{className:"font-bold text-purple-700"},l)))))));var bY=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function cw(e){if(typeof e!="string")return!1;var t=bY;return t.includes(e)}var vY=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],EY=new Set(vY);function oP(e){return typeof e!="string"?!1:EY.has(e)}function cP(e){return typeof e=="string"&&e.startsWith("data-")}function Ju(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(oP(r)||cP(r))&&(t[r]=e[r]);return t}function fE(e){if(e==null)return null;if(N.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Ju(t)}return typeof e=="object"&&!Array.isArray(e)?Ju(e):null}function Rs(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(oP(r)||cP(r)||cw(r))&&(t[r]=e[r]);return t}var wY=["children","width","height","viewBox","className","style","title","desc"];function hE(){return hE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},hE.apply(null,arguments)}function NY(e,t){if(e==null)return{};var r,a,l=SY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function SY(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var uw=N.forwardRef((e,t)=>{var{children:r,width:a,height:l,viewBox:o,className:d,style:h,title:g,desc:p}=e,x=NY(e,wY),E=o||{width:a,height:l,x:0,y:0},C=ba("recharts-surface",d);return N.createElement("svg",hE({},Rs(x),{className:C,width:a,height:l,style:h,viewBox:"".concat(E.x," ").concat(E.y," ").concat(E.width," ").concat(E.height),ref:t}),N.createElement("title",null,g),N.createElement("desc",null,p),r)}),CY=["children","className"];function gE(){return gE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},gE.apply(null,arguments)}function AY(e,t){if(e==null)return{};var r,a,l=TY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function TY(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Po=N.forwardRef((e,t)=>{var{children:r,className:a}=e,l=AY(e,CY),o=ba("recharts-layer",a);return N.createElement("g",gE({className:o},Rs(l),{ref:t}),r)}),uP=N.createContext(null),OY=()=>N.useContext(uP);function Pr(e){return function(){return e}}const dP=Math.cos,_g=Math.sin,ml=Math.sqrt,Dg=Math.PI,Lp=2*Dg,pE=Math.PI,yE=2*pE,yc=1e-6,_Y=yE-yc;function mP(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function DY(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return mP;const r=10**t;return function(a){this._+=a[0];for(let l=1,o=a.length;l<o;++l)this._+=Math.round(arguments[l]*r)/r+a[l]}}class kY{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?mP:DY(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,l){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+l}`}bezierCurveTo(t,r,a,l,o,d){this._append`C${+t},${+r},${+a},${+l},${this._x1=+o},${this._y1=+d}`}arcTo(t,r,a,l,o){if(t=+t,r=+r,a=+a,l=+l,o=+o,o<0)throw new Error(`negative radius: ${o}`);let d=this._x1,h=this._y1,g=a-t,p=l-r,x=d-t,E=h-r,C=x*x+E*E;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(C>yc)if(!(Math.abs(E*g-p*x)>yc)||!o)this._append`L${this._x1=t},${this._y1=r}`;else{let O=a-d,_=l-h,P=g*g+p*p,k=O*O+_*_,I=Math.sqrt(P),F=Math.sqrt(C),R=o*Math.tan((pE-Math.acos((P+C-k)/(2*I*F)))/2),Y=R/F,j=R/I;Math.abs(Y-1)>yc&&this._append`L${t+Y*x},${r+Y*E}`,this._append`A${o},${o},0,0,${+(E*O>x*_)},${this._x1=t+j*g},${this._y1=r+j*p}`}}arc(t,r,a,l,o,d){if(t=+t,r=+r,a=+a,d=!!d,a<0)throw new Error(`negative radius: ${a}`);let h=a*Math.cos(l),g=a*Math.sin(l),p=t+h,x=r+g,E=1^d,C=d?l-o:o-l;this._x1===null?this._append`M${p},${x}`:(Math.abs(this._x1-p)>yc||Math.abs(this._y1-x)>yc)&&this._append`L${p},${x}`,a&&(C<0&&(C=C%yE+yE),C>_Y?this._append`A${a},${a},0,1,${E},${t-h},${r-g}A${a},${a},0,1,${E},${this._x1=p},${this._y1=x}`:C>yc&&this._append`A${a},${a},0,${+(C>=pE)},${E},${this._x1=t+a*Math.cos(o)},${this._y1=r+a*Math.sin(o)}`)}rect(t,r,a,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+l}h${-a}Z`}toString(){return this._}}function dw(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new kY(t)}function mw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fP(e){this._context=e}fP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Bp(e){return new fP(e)}function hP(e){return e[0]}function gP(e){return e[1]}function pP(e,t){var r=Pr(!0),a=null,l=Bp,o=null,d=dw(h);e=typeof e=="function"?e:e===void 0?hP:Pr(e),t=typeof t=="function"?t:t===void 0?gP:Pr(t);function h(g){var p,x=(g=mw(g)).length,E,C=!1,O;for(a==null&&(o=l(O=d())),p=0;p<=x;++p)!(p<x&&r(E=g[p],p,g))===C&&((C=!C)?o.lineStart():o.lineEnd()),C&&o.point(+e(E,p,g),+t(E,p,g));if(O)return o=null,O+""||null}return h.x=function(g){return arguments.length?(e=typeof g=="function"?g:Pr(+g),h):e},h.y=function(g){return arguments.length?(t=typeof g=="function"?g:Pr(+g),h):t},h.defined=function(g){return arguments.length?(r=typeof g=="function"?g:Pr(!!g),h):r},h.curve=function(g){return arguments.length?(l=g,a!=null&&(o=l(a)),h):l},h.context=function(g){return arguments.length?(g==null?a=o=null:o=l(a=g),h):a},h}function yh(e,t,r){var a=null,l=Pr(!0),o=null,d=Bp,h=null,g=dw(p);e=typeof e=="function"?e:e===void 0?hP:Pr(+e),t=typeof t=="function"?t:Pr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?gP:Pr(+r);function p(E){var C,O,_,P=(E=mw(E)).length,k,I=!1,F,R=new Array(P),Y=new Array(P);for(o==null&&(h=d(F=g())),C=0;C<=P;++C){if(!(C<P&&l(k=E[C],C,E))===I)if(I=!I)O=C,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),_=C-1;_>=O;--_)h.point(R[_],Y[_]);h.lineEnd(),h.areaEnd()}I&&(R[C]=+e(k,C,E),Y[C]=+t(k,C,E),h.point(a?+a(k,C,E):R[C],r?+r(k,C,E):Y[C]))}if(F)return h=null,F+""||null}function x(){return pP().defined(l).curve(d).context(o)}return p.x=function(E){return arguments.length?(e=typeof E=="function"?E:Pr(+E),a=null,p):e},p.x0=function(E){return arguments.length?(e=typeof E=="function"?E:Pr(+E),p):e},p.x1=function(E){return arguments.length?(a=E==null?null:typeof E=="function"?E:Pr(+E),p):a},p.y=function(E){return arguments.length?(t=typeof E=="function"?E:Pr(+E),r=null,p):t},p.y0=function(E){return arguments.length?(t=typeof E=="function"?E:Pr(+E),p):t},p.y1=function(E){return arguments.length?(r=E==null?null:typeof E=="function"?E:Pr(+E),p):r},p.lineX0=p.lineY0=function(){return x().x(e).y(t)},p.lineY1=function(){return x().x(e).y(r)},p.lineX1=function(){return x().x(a).y(t)},p.defined=function(E){return arguments.length?(l=typeof E=="function"?E:Pr(!!E),p):l},p.curve=function(E){return arguments.length?(d=E,o!=null&&(h=d(o)),p):d},p.context=function(E){return arguments.length?(E==null?o=h=null:h=d(o=E),p):o},p}class yP{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function PY(e){return new yP(e,!0)}function MY(e){return new yP(e,!1)}const fw={draw(e,t){const r=ml(t/Dg);e.moveTo(r,0),e.arc(0,0,r,0,Lp)}},IY={draw(e,t){const r=ml(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},xP=ml(1/3),RY=xP*2,LY={draw(e,t){const r=ml(t/RY),a=r*xP;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},BY={draw(e,t){const r=ml(t),a=-r/2;e.rect(a,a,r,r)}},FY=.8908130915292852,bP=_g(Dg/10)/_g(7*Dg/10),UY=_g(Lp/10)*bP,jY=-dP(Lp/10)*bP,zY={draw(e,t){const r=ml(t*FY),a=UY*r,l=jY*r;e.moveTo(0,-r),e.lineTo(a,l);for(let o=1;o<5;++o){const d=Lp*o/5,h=dP(d),g=_g(d);e.lineTo(g*r,-h*r),e.lineTo(h*a-g*l,g*a+h*l)}e.closePath()}},$x=ml(3),VY={draw(e,t){const r=-ml(t/($x*3));e.moveTo(0,r*2),e.lineTo(-$x*r,-r),e.lineTo($x*r,-r),e.closePath()}},ws=-.5,Ns=ml(3)/2,xE=1/ml(12),HY=(xE/2+1)*3,$Y={draw(e,t){const r=ml(t/HY),a=r/2,l=r*xE,o=a,d=r*xE+r,h=-o,g=d;e.moveTo(a,l),e.lineTo(o,d),e.lineTo(h,g),e.lineTo(ws*a-Ns*l,Ns*a+ws*l),e.lineTo(ws*o-Ns*d,Ns*o+ws*d),e.lineTo(ws*h-Ns*g,Ns*h+ws*g),e.lineTo(ws*a+Ns*l,ws*l-Ns*a),e.lineTo(ws*o+Ns*d,ws*d-Ns*o),e.lineTo(ws*h+Ns*g,ws*g-Ns*h),e.closePath()}};function qY(e,t){let r=null,a=dw(l);e=typeof e=="function"?e:Pr(e||fw),t=typeof t=="function"?t:Pr(t===void 0?64:+t);function l(){let o;if(r||(r=o=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),o)return r=null,o+""||null}return l.type=function(o){return arguments.length?(e=typeof o=="function"?o:Pr(o),l):e},l.size=function(o){return arguments.length?(t=typeof o=="function"?o:Pr(+o),l):t},l.context=function(o){return arguments.length?(r=o??null,l):r},l}function kg(){}function Pg(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function vP(e){this._context=e}vP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Pg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Pg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function GY(e){return new vP(e)}function EP(e){this._context=e}EP.prototype={areaStart:kg,areaEnd:kg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Pg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function YY(e){return new EP(e)}function wP(e){this._context=e}wP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:Pg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function XY(e){return new wP(e)}function NP(e){this._context=e}NP.prototype={areaStart:kg,areaEnd:kg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function WY(e){return new NP(e)}function r5(e){return e<0?-1:1}function a5(e,t,r){var a=e._x1-e._x0,l=t-e._x1,o=(e._y1-e._y0)/(a||l<0&&-0),d=(r-e._y1)/(l||a<0&&-0),h=(o*l+d*a)/(a+l);return(r5(o)+r5(d))*Math.min(Math.abs(o),Math.abs(d),.5*Math.abs(h))||0}function n5(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function qx(e,t,r){var a=e._x0,l=e._y0,o=e._x1,d=e._y1,h=(o-a)/3;e._context.bezierCurveTo(a+h,l+h*t,o-h,d-h*r,o,d)}function Mg(e){this._context=e}Mg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qx(this,this._t0,n5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,qx(this,n5(this,r=a5(this,e,t)),r);break;default:qx(this,this._t0,r=a5(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function SP(e){this._context=new CP(e)}(SP.prototype=Object.create(Mg.prototype)).point=function(e,t){Mg.prototype.point.call(this,t,e)};function CP(e){this._context=e}CP.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,l,o){this._context.bezierCurveTo(t,e,a,r,o,l)}};function KY(e){return new Mg(e)}function ZY(e){return new SP(e)}function AP(e){this._context=e}AP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=s5(e),l=s5(t),o=0,d=1;d<r;++o,++d)this._context.bezierCurveTo(a[0][o],l[0][o],a[1][o],l[1][o],e[d],t[d]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function s5(e){var t,r=e.length-1,a,l=new Array(r),o=new Array(r),d=new Array(r);for(l[0]=0,o[0]=2,d[0]=e[0]+2*e[1],t=1;t<r-1;++t)l[t]=1,o[t]=4,d[t]=4*e[t]+2*e[t+1];for(l[r-1]=2,o[r-1]=7,d[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=l[t]/o[t-1],o[t]-=a,d[t]-=a*d[t-1];for(l[r-1]=d[r-1]/o[r-1],t=r-2;t>=0;--t)l[t]=(d[t]-l[t+1])/o[t];for(o[r-1]=(e[r]+l[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-l[t+1];return[l,o]}function QY(e){return new AP(e)}function Fp(e,t){this._context=e,this._t=t}Fp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function JY(e){return new Fp(e,.5)}function eX(e){return new Fp(e,0)}function tX(e){return new Fp(e,1)}function ed(e,t){if((d=e.length)>1)for(var r=1,a,l,o=e[t[0]],d,h=o.length;r<d;++r)for(l=o,o=e[t[r]],a=0;a<h;++a)o[a][1]+=o[a][0]=isNaN(l[a][1])?l[a][0]:l[a][1]}function bE(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function rX(e,t){return e[t]}function aX(e){const t=[];return t.key=e,t}function nX(){var e=Pr([]),t=bE,r=ed,a=rX;function l(o){var d=Array.from(e.apply(this,arguments),aX),h,g=d.length,p=-1,x;for(const E of o)for(h=0,++p;h<g;++h)(d[h][p]=[0,+a(E,d[h].key,p,o)]).data=E;for(h=0,x=mw(t(d));h<g;++h)d[x[h]].index=h;return r(d,x),d}return l.keys=function(o){return arguments.length?(e=typeof o=="function"?o:Pr(Array.from(o)),l):e},l.value=function(o){return arguments.length?(a=typeof o=="function"?o:Pr(+o),l):a},l.order=function(o){return arguments.length?(t=o==null?bE:typeof o=="function"?o:Pr(Array.from(o)),l):t},l.offset=function(o){return arguments.length?(r=o??ed,l):r},l}function sX(e,t){if((a=e.length)>0){for(var r,a,l=0,o=e[0].length,d;l<o;++l){for(d=r=0;r<a;++r)d+=e[r][l][1]||0;if(d)for(r=0;r<a;++r)e[r][l][1]/=d}ed(e,t)}}function lX(e,t){if((l=e.length)>0){for(var r=0,a=e[t[0]],l,o=a.length;r<o;++r){for(var d=0,h=0;d<l;++d)h+=e[d][r][1]||0;a[r][1]+=a[r][0]=-h/2}ed(e,t)}}function iX(e,t){if(!(!((d=e.length)>0)||!((o=(l=e[t[0]]).length)>0))){for(var r=0,a=1,l,o,d;a<o;++a){for(var h=0,g=0,p=0;h<d;++h){for(var x=e[t[h]],E=x[a][1]||0,C=x[a-1][1]||0,O=(E-C)/2,_=0;_<h;++_){var P=e[t[_]],k=P[a][1]||0,I=P[a-1][1]||0;O+=k-I}g+=E,p+=O*E}l[a-1][1]+=l[a-1][0]=r,g&&(r-=p/g)}l[a-1][1]+=l[a-1][0]=r,ed(e,t)}}var Gx={},Yx={},l5;function oX(){return l5||(l5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Yx)),Yx}var Xx={},i5;function TP(){return i5||(i5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Xx)),Xx}var Wx={},o5;function hw(){return o5||(o5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(Wx)),Wx}var Kx={},Zx={},c5;function cX(){return c5||(c5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const a=String(r);return a==="0"&&Object.is(Number(r),-0)?"-0":a}e.toString=t})(Zx)),Zx}var u5;function gw(){return u5||(u5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cX(),r=hw();function a(l){if(Array.isArray(l))return l.map(r.toKey);if(typeof l=="symbol")return[l];l=t.toString(l);const o=[],d=l.length;if(d===0)return o;let h=0,g="",p="",x=!1;for(l.charCodeAt(0)===46&&(o.push(""),h++);h<d;){const E=l[h];p?E==="\\"&&h+1<d?(h++,g+=l[h]):E===p?p="":g+=E:x?E==='"'||E==="'"?p=E:E==="]"?(x=!1,o.push(g),g=""):g+=E:E==="["?(x=!0,g&&(o.push(g),g="")):E==="."?g&&(o.push(g),g=""):g+=E,h++}return g&&o.push(g),o}e.toPath=a})(Kx)),Kx}var d5;function pw(){return d5||(d5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oX(),r=TP(),a=hw(),l=gw();function o(h,g,p){if(h==null)return p;switch(typeof g){case"string":{if(t.isUnsafeProperty(g))return p;const x=h[g];return x===void 0?r.isDeepKey(g)?o(h,l.toPath(g),p):p:x}case"number":case"symbol":{typeof g=="number"&&(g=a.toKey(g));const x=h[g];return x===void 0?p:x}default:{if(Array.isArray(g))return d(h,g,p);if(Object.is(g?.valueOf(),-0)?g="-0":g=String(g),t.isUnsafeProperty(g))return p;const x=h[g];return x===void 0?p:x}}}function d(h,g,p){if(g.length===0)return p;let x=h;for(let E=0;E<g.length;E++){if(x==null||t.isUnsafeProperty(g[E]))return p;x=x[g[E]]}return x===void 0?p:x}e.get=o})(Gx)),Gx}var Qx,m5;function uX(){return m5||(m5=1,Qx=pw().get),Qx}var dX=uX();const Zm=Bl(dX);var Bn=e=>e===0?0:e>0?1:-1,Ei=e=>typeof e=="number"&&e!=+e,wi=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Mt=e=>(typeof e=="number"||e instanceof Number)&&!Ei(e),Ni=e=>Mt(e)||typeof e=="string",mX=0,Qm=e=>{var t=++mX;return"".concat(e||"").concat(t)},ls=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Mt(t)&&typeof t!="string")return a;var o;if(wi(t)){if(r==null)return a;var d=t.indexOf("%");o=r*parseFloat(t.slice(0,d))/100}else o=+t;return Ei(o)&&(o=a),l&&r!=null&&o>r&&(o=r),o},OP=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},a=0;a<t;a++)if(!r[e[a]])r[e[a]]=!0;else return!0;return!1};function tl(e,t,r){return Mt(e)&&Mt(t)?e+r*(t-e):t}function fX(e,t,r){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):Zm(a,t))===r)}var cs=e=>e===null||typeof e>"u",Cf=e=>cs(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function hX(e){return e!=null}function Af(){}var gX=["type","size","sizeType"];function vE(){return vE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},vE.apply(null,arguments)}function f5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function h5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f5(Object(r),!0).forEach(function(a){pX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f5(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pX(e,t,r){return(t=yX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yX(e){var t=xX(e,"string");return typeof t=="symbol"?t:t+""}function xX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bX(e,t){if(e==null)return{};var r,a,l=vX(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function vX(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var _P={symbolCircle:fw,symbolCross:IY,symbolDiamond:LY,symbolSquare:BY,symbolStar:zY,symbolTriangle:VY,symbolWye:$Y},EX=Math.PI/180,wX=e=>{var t="symbol".concat(Cf(e));return _P[t]||fw},NX=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*EX;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},SX=(e,t)=>{_P["symbol".concat(Cf(e))]=t},yw=e=>{var{type:t="circle",size:r=64,sizeType:a="area"}=e,l=bX(e,gX),o=h5(h5({},l),{},{type:t,size:r,sizeType:a}),d="circle";typeof t=="string"&&(d=t);var h=()=>{var C=wX(d),O=qY().type(C).size(NX(r,a,d)),_=O();if(_!==null)return _},{className:g,cx:p,cy:x}=o,E=Rs(o);return Mt(p)&&Mt(x)&&Mt(r)?N.createElement("path",vE({},E,{className:ba("recharts-symbols",g),transform:"translate(".concat(p,", ").concat(x,")"),d:h()})):null};yw.registerSymbol=SX;var DP=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,CX=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(N.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var a={};return Object.keys(r).forEach(l=>{cw(l)&&(a[l]=(o=>r[l](r,o)))}),a},AX=(e,t,r)=>a=>(e(t,r,a),null),kP=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(l=>{var o=e[l];cw(l)&&typeof o=="function"&&(a||(a={}),a[l]=AX(o,t,r))}),a};function g5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function TX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g5(Object(r),!0).forEach(function(a){OX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g5(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function OX(e,t,r){return(t=_X(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _X(e){var t=DX(e,"string");return typeof t=="symbol"?t:t+""}function DX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function js(e,t){var r=TX({},e),a=t,l=Object.keys(t),o=l.reduce((d,h)=>(d[h]===void 0&&a[h]!==void 0&&(d[h]=a[h]),d),r);return o}function Ig(){return Ig=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ig.apply(null,arguments)}function p5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function kX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p5(Object(r),!0).forEach(function(a){PX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p5(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function PX(e,t,r){return(t=MX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MX(e){var t=IX(e,"string");return typeof t=="symbol"?t:t+""}function IX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Os=32,RX={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function LX(e){var{data:t,iconType:r,inactiveColor:a}=e,l=Os/2,o=Os/6,d=Os/3,h=t.inactive?a:t.color,g=r??t.type;if(g==="none")return null;if(g==="plainline"){var p;return N.createElement("line",{strokeWidth:4,fill:"none",stroke:h,strokeDasharray:(p=t.payload)===null||p===void 0?void 0:p.strokeDasharray,x1:0,y1:l,x2:Os,y2:l,className:"recharts-legend-icon"})}if(g==="line")return N.createElement("path",{strokeWidth:4,fill:"none",stroke:h,d:"M0,".concat(l,"h").concat(d,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*d,",").concat(l,`
            H`).concat(Os,"M").concat(2*d,",").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(d,",").concat(l),className:"recharts-legend-icon"});if(g==="rect")return N.createElement("path",{stroke:"none",fill:h,d:"M0,".concat(Os/8,"h").concat(Os,"v").concat(Os*3/4,"h").concat(-Os,"z"),className:"recharts-legend-icon"});if(N.isValidElement(t.legendIcon)){var x=kX({},t);return delete x.legendIcon,N.cloneElement(t.legendIcon,x)}return N.createElement(yw,{fill:h,cx:l,cy:l,size:Os,sizeType:"diameter",type:g})}function BX(e){var{payload:t,iconSize:r,layout:a,formatter:l,inactiveColor:o,iconType:d}=e,h={x:0,y:0,width:Os,height:Os},g={display:a==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((x,E)=>{var C=x.formatter||l,O=ba({"recharts-legend-item":!0,["legend-item-".concat(E)]:!0,inactive:x.inactive});if(x.type==="none")return null;var _=x.inactive?o:x.color,P=C?C(x.value,x,E):x.value;return N.createElement("li",Ig({className:O,style:g,key:"legend-item-".concat(E)},kP(e,x,E)),N.createElement(uw,{width:r,height:r,viewBox:h,style:p,"aria-label":"".concat(P," legend icon")},N.createElement(LX,{data:x,iconType:d,inactiveColor:o})),N.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},P))})}var FX=e=>{var t=js(e,RX),{payload:r,layout:a,align:l}=t;if(!r||!r.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?l:"left"};return N.createElement("ul",{className:"recharts-default-legend",style:o},N.createElement(BX,Ig({},t,{payload:r})))},Jx={},eb={},y5;function UX(){return y5||(y5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){const l=new Map;for(let o=0;o<r.length;o++){const d=r[o],h=a(d);l.has(h)||l.set(h,d)}return Array.from(l.values())}e.uniqBy=t})(eb)),eb}var tb={},x5;function PP(){return x5||(x5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(tb)),tb}var rb={},ab={},nb={},b5;function jX(){return b5||(b5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(nb)),nb}var v5;function xw(){return v5||(v5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jX();function r(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=r})(ab)),ab}var sb={},E5;function zX(){return E5||(E5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(sb)),sb}var w5;function VX(){return w5||(w5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xw(),r=zX();function a(l){return r.isObjectLike(l)&&t.isArrayLike(l)}e.isArrayLikeObject=a})(rb)),rb}var lb={},ib={},N5;function HX(){return N5||(N5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pw();function r(a){return function(l){return t.get(l,a)}}e.property=r})(ib)),ib}var ob={},cb={},ub={},db={},S5;function MP(){return S5||(S5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(db)),db}var mb={},C5;function IP(){return C5||(C5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(mb)),mb}var fb={},A5;function RP(){return A5||(A5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){return r===a||Number.isNaN(r)&&Number.isNaN(a)}e.eq=t})(fb)),fb}var T5;function $X(){return T5||(T5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MP(),r=IP(),a=RP();function l(x,E,C){return typeof C!="function"?l(x,E,()=>{}):o(x,E,function O(_,P,k,I,F,R){const Y=C(_,P,k,I,F,R);return Y!==void 0?!!Y:o(_,P,O,R)},new Map)}function o(x,E,C,O){if(E===x)return!0;switch(typeof E){case"object":return d(x,E,C,O);case"function":return Object.keys(E).length>0?o(x,{...E},C,O):a.eq(x,E);default:return t.isObject(x)?typeof E=="string"?E==="":!0:a.eq(x,E)}}function d(x,E,C,O){if(E==null)return!0;if(Array.isArray(E))return g(x,E,C,O);if(E instanceof Map)return h(x,E,C,O);if(E instanceof Set)return p(x,E,C,O);const _=Object.keys(E);if(x==null)return _.length===0;if(_.length===0)return!0;if(O?.has(E))return O.get(E)===x;O?.set(E,x);try{for(let P=0;P<_.length;P++){const k=_[P];if(!r.isPrimitive(x)&&!(k in x)||E[k]===void 0&&x[k]!==void 0||E[k]===null&&x[k]!==null||!C(x[k],E[k],k,x,E,O))return!1}return!0}finally{O?.delete(E)}}function h(x,E,C,O){if(E.size===0)return!0;if(!(x instanceof Map))return!1;for(const[_,P]of E.entries()){const k=x.get(_);if(C(k,P,_,x,E,O)===!1)return!1}return!0}function g(x,E,C,O){if(E.length===0)return!0;if(!Array.isArray(x))return!1;const _=new Set;for(let P=0;P<E.length;P++){const k=E[P];let I=!1;for(let F=0;F<x.length;F++){if(_.has(F))continue;const R=x[F];let Y=!1;if(C(R,k,P,x,E,O)&&(Y=!0),Y){_.add(F),I=!0;break}}if(!I)return!1}return!0}function p(x,E,C,O){return E.size===0?!0:x instanceof Set?g([...x],[...E],C,O):!1}e.isMatchWith=l,e.isSetMatch=p})(ub)),ub}var O5;function LP(){return O5||(O5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$X();function r(a,l){return t.isMatchWith(a,l,()=>{})}e.isMatch=r})(cb)),cb}var hb={},gb={},pb={},_5;function qX(){return _5||(_5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(a=>Object.prototype.propertyIsEnumerable.call(r,a))}e.getSymbols=t})(pb)),pb}var yb={},D5;function BP(){return D5||(D5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(yb)),yb}var xb={},k5;function FP(){return k5||(k5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",a="[object Number]",l="[object Boolean]",o="[object Arguments]",d="[object Symbol]",h="[object Date]",g="[object Map]",p="[object Set]",x="[object Array]",E="[object Function]",C="[object ArrayBuffer]",O="[object Object]",_="[object Error]",P="[object DataView]",k="[object Uint8Array]",I="[object Uint8ClampedArray]",F="[object Uint16Array]",R="[object Uint32Array]",Y="[object BigUint64Array]",j="[object Int8Array]",z="[object Int16Array]",L="[object Int32Array]",q="[object BigInt64Array]",V="[object Float32Array]",W="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=C,e.arrayTag=x,e.bigInt64ArrayTag=q,e.bigUint64ArrayTag=Y,e.booleanTag=l,e.dataViewTag=P,e.dateTag=h,e.errorTag=_,e.float32ArrayTag=V,e.float64ArrayTag=W,e.functionTag=E,e.int16ArrayTag=z,e.int32ArrayTag=L,e.int8ArrayTag=j,e.mapTag=g,e.numberTag=a,e.objectTag=O,e.regexpTag=t,e.setTag=p,e.stringTag=r,e.symbolTag=d,e.uint16ArrayTag=F,e.uint32ArrayTag=R,e.uint8ArrayTag=k,e.uint8ClampedArrayTag=I})(xb)),xb}var bb={},P5;function GX(){return P5||(P5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(bb)),bb}var M5;function UP(){return M5||(M5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qX(),r=BP(),a=FP(),l=IP(),o=GX();function d(x,E){return h(x,void 0,x,new Map,E)}function h(x,E,C,O=new Map,_=void 0){const P=_?.(x,E,C,O);if(P!==void 0)return P;if(l.isPrimitive(x))return x;if(O.has(x))return O.get(x);if(Array.isArray(x)){const k=new Array(x.length);O.set(x,k);for(let I=0;I<x.length;I++)k[I]=h(x[I],I,C,O,_);return Object.hasOwn(x,"index")&&(k.index=x.index),Object.hasOwn(x,"input")&&(k.input=x.input),k}if(x instanceof Date)return new Date(x.getTime());if(x instanceof RegExp){const k=new RegExp(x.source,x.flags);return k.lastIndex=x.lastIndex,k}if(x instanceof Map){const k=new Map;O.set(x,k);for(const[I,F]of x)k.set(I,h(F,I,C,O,_));return k}if(x instanceof Set){const k=new Set;O.set(x,k);for(const I of x)k.add(h(I,void 0,C,O,_));return k}if(typeof Buffer<"u"&&Buffer.isBuffer(x))return x.subarray();if(o.isTypedArray(x)){const k=new(Object.getPrototypeOf(x)).constructor(x.length);O.set(x,k);for(let I=0;I<x.length;I++)k[I]=h(x[I],I,C,O,_);return k}if(x instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&x instanceof SharedArrayBuffer)return x.slice(0);if(x instanceof DataView){const k=new DataView(x.buffer.slice(0),x.byteOffset,x.byteLength);return O.set(x,k),g(k,x,C,O,_),k}if(typeof File<"u"&&x instanceof File){const k=new File([x],x.name,{type:x.type});return O.set(x,k),g(k,x,C,O,_),k}if(typeof Blob<"u"&&x instanceof Blob){const k=new Blob([x],{type:x.type});return O.set(x,k),g(k,x,C,O,_),k}if(x instanceof Error){const k=new x.constructor;return O.set(x,k),k.message=x.message,k.name=x.name,k.stack=x.stack,k.cause=x.cause,g(k,x,C,O,_),k}if(x instanceof Boolean){const k=new Boolean(x.valueOf());return O.set(x,k),g(k,x,C,O,_),k}if(x instanceof Number){const k=new Number(x.valueOf());return O.set(x,k),g(k,x,C,O,_),k}if(x instanceof String){const k=new String(x.valueOf());return O.set(x,k),g(k,x,C,O,_),k}if(typeof x=="object"&&p(x)){const k=Object.create(Object.getPrototypeOf(x));return O.set(x,k),g(k,x,C,O,_),k}return x}function g(x,E,C=x,O,_){const P=[...Object.keys(E),...t.getSymbols(E)];for(let k=0;k<P.length;k++){const I=P[k],F=Object.getOwnPropertyDescriptor(x,I);(F==null||F.writable)&&(x[I]=h(E[I],I,C,O,_))}}function p(x){switch(r.getTag(x)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=d,e.cloneDeepWithImpl=h,e.copyProperties=g})(gb)),gb}var I5;function YX(){return I5||(I5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UP();function r(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=r})(hb)),hb}var R5;function XX(){return R5||(R5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LP(),r=YX();function a(l){return l=r.cloneDeep(l),o=>t.isMatch(o,l)}e.matches=a})(ob)),ob}var vb={},Eb={},wb={},L5;function WX(){return L5||(L5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UP(),r=FP();function a(l,o){return t.cloneDeepWith(l,(d,h,g,p)=>{const x=o?.(d,h,g,p);if(x!==void 0)return x;if(typeof l=="object")switch(Object.prototype.toString.call(l)){case r.numberTag:case r.stringTag:case r.booleanTag:{const E=new l.constructor(l?.valueOf());return t.copyProperties(E,l),E}case r.argumentsTag:{const E={};return t.copyProperties(E,l),E.length=l.length,E[Symbol.iterator]=l[Symbol.iterator],E}default:return}})}e.cloneDeepWith=a})(wb)),wb}var B5;function KX(){return B5||(B5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WX();function r(a){return t.cloneDeepWith(a)}e.cloneDeep=r})(Eb)),Eb}var Nb={},Sb={},F5;function jP(){return F5||(F5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(a,l=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<l;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=r})(Sb)),Sb}var Cb={},U5;function ZX(){return U5||(U5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BP();function r(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=r})(Cb)),Cb}var j5;function QX(){return j5||(j5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TP(),r=jP(),a=ZX(),l=gw();function o(d,h){let g;if(Array.isArray(h)?g=h:typeof h=="string"&&t.isDeepKey(h)&&d?.[h]==null?g=l.toPath(h):g=[h],g.length===0)return!1;let p=d;for(let x=0;x<g.length;x++){const E=g[x];if((p==null||!Object.hasOwn(p,E))&&!((Array.isArray(p)||a.isArguments(p))&&r.isIndex(E)&&E<p.length))return!1;p=p[E]}return!0}e.has=o})(Nb)),Nb}var z5;function JX(){return z5||(z5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LP(),r=hw(),a=KX(),l=pw(),o=QX();function d(h,g){switch(typeof h){case"object":{Object.is(h?.valueOf(),-0)&&(h="-0");break}case"number":{h=r.toKey(h);break}}return g=a.cloneDeep(g),function(p){const x=l.get(p,h);return x===void 0?o.has(p,h):g===void 0?x===void 0:t.isMatch(x,g)}}e.matchesProperty=d})(vb)),vb}var V5;function eW(){return V5||(V5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PP(),r=HX(),a=XX(),l=JX();function o(d){if(d==null)return t.identity;switch(typeof d){case"function":return d;case"object":return Array.isArray(d)&&d.length===2?l.matchesProperty(d[0],d[1]):a.matches(d);case"string":case"symbol":case"number":return r.property(d)}}e.iteratee=o})(lb)),lb}var H5;function tW(){return H5||(H5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UX(),r=PP(),a=VX(),l=eW();function o(d,h=r.identity){return a.isArrayLikeObject(d)?t.uniqBy(Array.from(d),l.iteratee(h)):[]}e.uniqBy=o})(Jx)),Jx}var Ab,$5;function rW(){return $5||($5=1,Ab=tW().uniqBy),Ab}var aW=rW();const q5=Bl(aW);function zP(e,t,r){return t===!0?q5(e,r):typeof t=="function"?q5(e,t):e}var Tb={exports:{}},Ob={},_b={exports:{}},Db={};var G5;function nW(){if(G5)return Db;G5=1;var e=cd();function t(E,C){return E===C&&(E!==0||1/E===1/C)||E!==E&&C!==C}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,l=e.useEffect,o=e.useLayoutEffect,d=e.useDebugValue;function h(E,C){var O=C(),_=a({inst:{value:O,getSnapshot:C}}),P=_[0].inst,k=_[1];return o(function(){P.value=O,P.getSnapshot=C,g(P)&&k({inst:P})},[E,O,C]),l(function(){return g(P)&&k({inst:P}),E(function(){g(P)&&k({inst:P})})},[E]),d(O),O}function g(E){var C=E.getSnapshot;E=E.value;try{var O=C();return!r(E,O)}catch{return!0}}function p(E,C){return C()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:h;return Db.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:x,Db}var Y5;function sW(){return Y5||(Y5=1,_b.exports=nW()),_b.exports}var X5;function lW(){if(X5)return Ob;X5=1;var e=cd(),t=sW();function r(p,x){return p===x&&(p!==0||1/p===1/x)||p!==p&&x!==x}var a=typeof Object.is=="function"?Object.is:r,l=t.useSyncExternalStore,o=e.useRef,d=e.useEffect,h=e.useMemo,g=e.useDebugValue;return Ob.useSyncExternalStoreWithSelector=function(p,x,E,C,O){var _=o(null);if(_.current===null){var P={hasValue:!1,value:null};_.current=P}else P=_.current;_=h(function(){function I(z){if(!F){if(F=!0,R=z,z=C(z),O!==void 0&&P.hasValue){var L=P.value;if(O(L,z))return Y=L}return Y=z}if(L=Y,a(R,z))return L;var q=C(z);return O!==void 0&&O(L,q)?(R=z,L):(R=z,Y=q)}var F=!1,R,Y,j=E===void 0?null:E;return[function(){return I(x())},j===null?void 0:function(){return I(j())}]},[x,E,C,O]);var k=l(p,_[0],_[1]);return d(function(){P.hasValue=!0,P.value=k},[k]),g(k),k},Ob}var W5;function iW(){return W5||(W5=1,Tb.exports=lW()),Tb.exports}var oW=iW(),bw=N.createContext(null),cW=e=>e,va=()=>{var e=N.useContext(bw);return e?e.store.dispatch:cW},sg=()=>{},uW=()=>sg,dW=(e,t)=>e===t;function Rt(e){var t=N.useContext(bw);return oW.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:uW,t?t.store.getState:sg,t?t.store.getState:sg,t?e:sg,dW)}function mW(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function fW(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function hW(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${r}]`)}}var K5=e=>Array.isArray(e)?e:[e];function gW(e){const t=Array.isArray(e[0])?e[0]:e;return hW(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function pW(e,t){const r=[],{length:a}=e;for(let l=0;l<a;l++)r.push(e[l].apply(null,t));return r}var yW=class{constructor(e){this.value=e}deref(){return this.value}},xW=typeof WeakRef<"u"?WeakRef:yW,bW=0,Z5=1;function xh(){return{s:bW,v:void 0,o:null,p:null}}function VP(e,t={}){let r=xh();const{resultEqualityCheck:a}=t;let l,o=0;function d(){let h=r;const{length:g}=arguments;for(let E=0,C=g;E<C;E++){const O=arguments[E];if(typeof O=="function"||typeof O=="object"&&O!==null){let _=h.o;_===null&&(h.o=_=new WeakMap);const P=_.get(O);P===void 0?(h=xh(),_.set(O,h)):h=P}else{let _=h.p;_===null&&(h.p=_=new Map);const P=_.get(O);P===void 0?(h=xh(),_.set(O,h)):h=P}}const p=h;let x;if(h.s===Z5)x=h.v;else if(x=e.apply(null,arguments),o++,a){const E=l?.deref?.()??l;E!=null&&a(E,x)&&(x=E,o!==0&&o--),l=typeof x=="object"&&x!==null||typeof x=="function"?new xW(x):x}return p.s=Z5,p.v=x,x}return d.clearCache=()=>{r=xh(),d.resetResultsCount()},d.resultsCount=()=>o,d.resetResultsCount=()=>{o=0},d}function vW(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...l)=>{let o=0,d=0,h,g={},p=l.pop();typeof p=="object"&&(g=p,p=l.pop()),mW(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);const x={...r,...g},{memoize:E,memoizeOptions:C=[],argsMemoize:O=VP,argsMemoizeOptions:_=[]}=x,P=K5(C),k=K5(_),I=gW(l),F=E(function(){return o++,p.apply(null,arguments)},...P),R=O(function(){d++;const j=pW(I,arguments);return h=F.apply(null,j),h},...k);return Object.assign(R,{resultFunc:p,memoizedResultFunc:F,dependencies:I,dependencyRecomputations:()=>d,resetDependencyRecomputations:()=>{d=0},lastResult:()=>h,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:E,argsMemoize:O})};return Object.assign(a,{withTypes:()=>a}),a}var Me=vW(VP),EW=Object.assign((e,t=Me)=>{fW(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),a=r.map(o=>e[o]);return t(a,(...o)=>o.reduce((d,h,g)=>(d[r[g]]=h,d),{}))},{withTypes:()=>EW}),kb={},Pb={},Mb={},Q5;function wW(){return Q5||(Q5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const r=(a,l,o)=>{if(a!==l){const d=t(a),h=t(l);if(d===h&&d===0){if(a<l)return o==="desc"?1:-1;if(a>l)return o==="desc"?-1:1}return o==="desc"?h-d:d-h}return 0};e.compareValues=r})(Mb)),Mb}var Ib={},Rb={},J5;function HP(){return J5||(J5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Rb)),Rb}var eT;function NW(){return eT||(eT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HP(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function l(o,d){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(a.test(o)||!r.test(o))||d!=null&&Object.hasOwn(d,o)}e.isKey=l})(Ib)),Ib}var tT;function SW(){return tT||(tT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wW(),r=NW(),a=gw();function l(o,d,h,g){if(o==null)return[];h=g?void 0:h,Array.isArray(o)||(o=Object.values(o)),Array.isArray(d)||(d=d==null?[null]:[d]),d.length===0&&(d=[null]),Array.isArray(h)||(h=h==null?[]:[h]),h=h.map(O=>String(O));const p=(O,_)=>{let P=O;for(let k=0;k<_.length&&P!=null;++k)P=P[_[k]];return P},x=(O,_)=>_==null||O==null?_:typeof O=="object"&&"key"in O?Object.hasOwn(_,O.key)?_[O.key]:p(_,O.path):typeof O=="function"?O(_):Array.isArray(O)?p(_,O):typeof _=="object"?_[O]:_,E=d.map(O=>(Array.isArray(O)&&O.length===1&&(O=O[0]),O==null||typeof O=="function"||Array.isArray(O)||r.isKey(O)?O:{key:O,path:a.toPath(O)}));return o.map(O=>({original:O,criteria:E.map(_=>x(_,O))})).slice().sort((O,_)=>{for(let P=0;P<E.length;P++){const k=t.compareValues(O.criteria[P],_.criteria[P],h[P]);if(k!==0)return k}return 0}).map(O=>O.original)}e.orderBy=l})(Pb)),Pb}var Lb={},rT;function CW(){return rT||(rT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a=1){const l=[],o=Math.floor(a),d=(h,g)=>{for(let p=0;p<h.length;p++){const x=h[p];Array.isArray(x)&&g<o?d(x,g+1):l.push(x)}};return d(r,0),l}e.flatten=t})(Lb)),Lb}var Bb={},aT;function $P(){return aT||(aT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jP(),r=xw(),a=MP(),l=RP();function o(d,h,g){return a.isObject(g)&&(typeof h=="number"&&r.isArrayLike(g)&&t.isIndex(h)&&h<g.length||typeof h=="string"&&h in g)?l.eq(g[h],d):!1}e.isIterateeCall=o})(Bb)),Bb}var nT;function AW(){return nT||(nT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SW(),r=CW(),a=$P();function l(o,...d){const h=d.length;return h>1&&a.isIterateeCall(o,d[0],d[1])?d=[]:h>2&&a.isIterateeCall(d[0],d[1],d[2])&&(d=[d[0]]),t.orderBy(o,r.flatten(d),["asc"])}e.sortBy=l})(kb)),kb}var Fb,sT;function TW(){return sT||(sT=1,Fb=AW().sortBy),Fb}var OW=TW();const Up=Bl(OW);var qP=e=>e.legend.settings,_W=e=>e.legend.size,DW=e=>e.legend.payload,kW=Me([DW,qP],(e,t)=>{var{itemSorter:r}=t,a=e.flat(1);return r?Up(a,r):a});function PW(){return Rt(kW)}var bh=1;function GP(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=N.useState({height:0,left:0,top:0,width:0}),a=N.useCallback(l=>{if(l!=null){var o=l.getBoundingClientRect(),d={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(d.height-t.height)>bh||Math.abs(d.left-t.left)>bh||Math.abs(d.top-t.top)>bh||Math.abs(d.width-t.width)>bh)&&r({height:d.height,left:d.left,top:d.top,width:d.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function ln(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var MW=typeof Symbol=="function"&&Symbol.observable||"@@observable",lT=MW,Ub=()=>Math.random().toString(36).substring(7).split("").join("."),IW={INIT:`@@redux/INIT${Ub()}`,REPLACE:`@@redux/REPLACE${Ub()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ub()}`},Rg=IW;function vw(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function YP(e,t,r){if(typeof e!="function")throw new Error(ln(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ln(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ln(1));return r(YP)(e,t)}let a=e,l=t,o=new Map,d=o,h=0,g=!1;function p(){d===o&&(d=new Map,o.forEach((k,I)=>{d.set(I,k)}))}function x(){if(g)throw new Error(ln(3));return l}function E(k){if(typeof k!="function")throw new Error(ln(4));if(g)throw new Error(ln(5));let I=!0;p();const F=h++;return d.set(F,k),function(){if(I){if(g)throw new Error(ln(6));I=!1,p(),d.delete(F),o=null}}}function C(k){if(!vw(k))throw new Error(ln(7));if(typeof k.type>"u")throw new Error(ln(8));if(typeof k.type!="string")throw new Error(ln(17));if(g)throw new Error(ln(9));try{g=!0,l=a(l,k)}finally{g=!1}return(o=d).forEach(F=>{F()}),k}function O(k){if(typeof k!="function")throw new Error(ln(10));a=k,C({type:Rg.REPLACE})}function _(){const k=E;return{subscribe(I){if(typeof I!="object"||I===null)throw new Error(ln(11));function F(){const Y=I;Y.next&&Y.next(x())}return F(),{unsubscribe:k(F)}},[lT](){return this}}}return C({type:Rg.INIT}),{dispatch:C,subscribe:E,getState:x,replaceReducer:O,[lT]:_}}function RW(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Rg.INIT})>"u")throw new Error(ln(12));if(typeof r(void 0,{type:Rg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ln(13))})}function XP(e){const t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const d=t[o];typeof e[d]=="function"&&(r[d]=e[d])}const a=Object.keys(r);let l;try{RW(r)}catch(o){l=o}return function(d={},h){if(l)throw l;let g=!1;const p={};for(let x=0;x<a.length;x++){const E=a[x],C=r[E],O=d[E],_=C(O,h);if(typeof _>"u")throw h&&h.type,new Error(ln(14));p[E]=_,g=g||_!==O}return g=g||a.length!==Object.keys(d).length,g?p:d}}function Lg(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function LW(...e){return t=>(r,a)=>{const l=t(r,a);let o=()=>{throw new Error(ln(15))};const d={getState:l.getState,dispatch:(g,...p)=>o(g,...p)},h=e.map(g=>g(d));return o=Lg(...h)(l.dispatch),{...l,dispatch:o}}}function WP(e){return vw(e)&&"type"in e&&typeof e.type=="string"}var KP=Symbol.for("immer-nothing"),iT=Symbol.for("immer-draftable"),wn=Symbol.for("immer-state");function rl(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ss=Object,td=ss.getPrototypeOf,Bg="constructor",jp="prototype",EE="configurable",Fg="enumerable",lg="writable",Jm="value",Si=e=>!!e&&!!e[wn];function ol(e){return e?ZP(e)||zp(e)||!!e[iT]||!!e[Bg]?.[iT]||Vp(e)||Hp(e):!1}var BW=ss[jp][Bg].toString(),oT=new WeakMap;function ZP(e){if(!e||!Ew(e))return!1;const t=td(e);if(t===null||t===ss[jp])return!0;const r=ss.hasOwnProperty.call(t,Bg)&&t[Bg];if(r===Object)return!0;if(!Pu(r))return!1;let a=oT.get(r);return a===void 0&&(a=Function.toString.call(r),oT.set(r,a)),a===BW}function Tf(e,t,r=!0){Of(e)===0?(r?Reflect.ownKeys(e):ss.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((a,l)=>t(l,a,e))}function Of(e){const t=e[wn];return t?t.type_:zp(e)?1:Vp(e)?2:Hp(e)?3:0}var cT=(e,t,r=Of(e))=>r===2?e.has(t):ss[jp].hasOwnProperty.call(e,t),wE=(e,t,r=Of(e))=>r===2?e.get(t):e[t],Ug=(e,t,r,a=Of(e))=>{a===2?e.set(t,r):a===3?e.add(r):e[t]=r};function FW(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var zp=Array.isArray,Vp=e=>e instanceof Map,Hp=e=>e instanceof Set,Ew=e=>typeof e=="object",Pu=e=>typeof e=="function",jb=e=>typeof e=="boolean",oi=e=>e.copy_||e.base_,ww=e=>e.modified_?e.copy_:e.base_;function NE(e,t){if(Vp(e))return new Map(e);if(Hp(e))return new Set(e);if(zp(e))return Array[jp].slice.call(e);const r=ZP(e);if(t===!0||t==="class_only"&&!r){const a=ss.getOwnPropertyDescriptors(e);delete a[wn];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const d=l[o],h=a[d];h[lg]===!1&&(h[lg]=!0,h[EE]=!0),(h.get||h.set)&&(a[d]={[EE]:!0,[lg]:!0,[Fg]:h[Fg],[Jm]:e[d]})}return ss.create(td(e),a)}else{const a=td(e);if(a!==null&&r)return{...e};const l=ss.create(a);return ss.assign(l,e)}}function Nw(e,t=!1){return $p(e)||Si(e)||!ol(e)||(Of(e)>1&&ss.defineProperties(e,{set:vh,add:vh,clear:vh,delete:vh}),ss.freeze(e),t&&Tf(e,(r,a)=>{Nw(a,!0)},!1)),e}function UW(){rl(2)}var vh={[Jm]:UW};function $p(e){return e===null||!Ew(e)?!0:ss.isFrozen(e)}var jg="MapSet",SE="Patches",QP={};function rd(e){const t=QP[e];return t||rl(0,e),t}var jW=e=>!!QP[e],ef,JP=()=>ef,zW=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:jW(jg)?rd(jg):void 0});function uT(e,t){t&&(e.patchPlugin_=rd(SE),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function CE(e){AE(e),e.drafts_.forEach(VW),e.drafts_=null}function AE(e){e===ef&&(ef=e.parent_)}var dT=e=>ef=zW(ef,e);function VW(e){const t=e[wn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function mT(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[wn].modified_&&(CE(t),rl(4)),ol(e)&&(e=fT(t,e));const{patchPlugin_:l}=t;l&&l.generateReplacementPatches_(r[wn].base_,e,t)}else e=fT(t,r);return HW(t,e,!0),CE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==KP?e:void 0}function fT(e,t){if($p(t))return t;const r=t[wn];if(!r)return Sw(t,e.handledSet_,e);if(!qp(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:a}=r;if(a)for(;a.length>0;)a.pop()(e);rM(r,e)}return r.copy_}function HW(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Nw(t,r)}function eM(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var qp=(e,t)=>e.scope_===t,$W=[];function tM(e,t,r,a){const l=oi(e),o=e.type_;if(a!==void 0&&wE(l,a,o)===t){Ug(l,a,r,o);return}if(!e.draftLocations_){const h=e.draftLocations_=new Map;Tf(l,(g,p)=>{if(Si(p)){const x=h.get(p)||[];x.push(g),h.set(p,x)}})}const d=e.draftLocations_.get(t)??$W;for(const h of d)Ug(l,h,r,o)}function qW(e,t,r){e.callbacks_.push(function(l){const o=t;if(!o||!qp(o,l))return;l.mapSetPlugin_?.fixSetContents(o);const d=ww(o);tM(e,o.draft_??o,d,r),rM(o,l)})}function rM(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:a}=t;if(a){const l=a.getPath(e);l&&a.generatePatches_(e,l,t)}eM(e)}}function GW(e,t,r){const{scope_:a}=e;if(Si(r)){const l=r[wn];qp(l,a)&&l.callbacks_.push(function(){ig(e);const d=ww(l);tM(e,r,d,t)})}else ol(r)&&e.callbacks_.push(function(){const o=oi(e);wE(o,t,e.type_)===r&&a.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Sw(wE(e.copy_,t,e.type_),a.handledSet_,a)})}function Sw(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Si(e)||t.has(e)||!ol(e)||$p(e)||(t.add(e),Tf(e,(a,l)=>{if(Si(l)){const o=l[wn];if(qp(o,r)){const d=ww(o);Ug(e,a,d,e.type_),eM(o)}}else ol(l)&&Sw(l,t,r)})),e}function YW(e,t){const r=zp(e),a={type_:r?1:0,scope_:t?t.scope_:JP(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let l=a,o=Cw;r&&(l=[a],o=tf);const{revoke:d,proxy:h}=Proxy.revocable(l,o);return a.draft_=h,a.revoke_=d,[h,a]}var Cw={get(e,t){if(t===wn)return e;const r=oi(e);if(!cT(r,t,e.type_))return XW(e,r,t);const a=r[t];if(e.finalized_||!ol(a))return a;if(a===zb(e.base_,t)){ig(e);const l=e.type_===1?+t:t,o=OE(e.scope_,a,e,l);return e.copy_[l]=o}return a},has(e,t){return t in oi(e)},ownKeys(e){return Reflect.ownKeys(oi(e))},set(e,t,r){const a=aM(oi(e),t);if(a?.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const l=zb(oi(e),t),o=l?.[wn];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(FW(r,l)&&(r!==void 0||cT(e.base_,t,e.type_)))return!0;ig(e),TE(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),GW(e,t,r)),!0},deleteProperty(e,t){return ig(e),zb(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),TE(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=oi(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{[lg]:!0,[EE]:e.type_!==1||t!=="length",[Fg]:a[Fg],[Jm]:r[t]}},defineProperty(){rl(11)},getPrototypeOf(e){return td(e.base_)},setPrototypeOf(){rl(12)}},tf={};Tf(Cw,(e,t)=>{tf[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});tf.deleteProperty=function(e,t){return tf.set.call(this,e,t,void 0)};tf.set=function(e,t,r){return Cw.set.call(this,e[0],t,r,e[0])};function zb(e,t){const r=e[wn];return(r?oi(r):e)[t]}function XW(e,t,r){const a=aM(t,r);return a?Jm in a?a[Jm]:a.get?.call(e.draft_):void 0}function aM(e,t){if(!(t in e))return;let r=td(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=td(r)}}function TE(e){e.modified_||(e.modified_=!0,e.parent_&&TE(e.parent_))}function ig(e){e.copy_||(e.assigned_=new Map,e.copy_=NE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var WW=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,a,l)=>{if(Pu(r)&&!Pu(a)){const d=a;a=r;const h=this;return function(p=d,...x){return h.produce(p,E=>a.call(this,E,...x))}}Pu(a)||rl(6),l!==void 0&&!Pu(l)&&rl(7);let o;if(ol(r)){const d=dT(this),h=OE(d,r,void 0);let g=!0;try{o=a(h),g=!1}finally{g?CE(d):AE(d)}return uT(d,l),mT(o,d)}else if(!r||!Ew(r)){if(o=a(r),o===void 0&&(o=r),o===KP&&(o=void 0),this.autoFreeze_&&Nw(o,!0),l){const d=[],h=[];rd(SE).generateReplacementPatches_(r,o,{patches_:d,inversePatches_:h}),l(d,h)}return o}else rl(1,r)},this.produceWithPatches=(r,a)=>{if(Pu(r))return(h,...g)=>this.produceWithPatches(h,p=>r(p,...g));let l,o;return[this.produce(r,a,(h,g)=>{l=h,o=g}),l,o]},jb(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),jb(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),jb(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ol(t)||rl(8),Si(t)&&(t=il(t));const r=dT(this),a=OE(r,t,void 0);return a[wn].isManual_=!0,AE(r),a}finishDraft(t,r){const a=t&&t[wn];(!a||!a.isManual_)&&rl(9);const{scope_:l}=a;return uT(l,r),mT(void 0,l)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let a;for(a=r.length-1;a>=0;a--){const o=r[a];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}a>-1&&(r=r.slice(a+1));const l=rd(SE).applyPatches_;return Si(t)?l(t,r):this.produce(t,o=>l(o,r))}};function OE(e,t,r,a){const[l,o]=Vp(t)?rd(jg).proxyMap_(t,r):Hp(t)?rd(jg).proxySet_(t,r):YW(t,r);return(r?.scope_??JP()).drafts_.push(l),o.callbacks_=r?.callbacks_??[],o.key_=a,r&&a!==void 0?qW(r,o,a):o.callbacks_.push(function(g){g.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:p}=g;o.modified_&&p&&p.generatePatches_(o,[],g)}),l}function il(e){return Si(e)||rl(10,e),nM(e)}function nM(e){if(!ol(e)||$p(e))return e;const t=e[wn];let r,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=NE(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else r=NE(e,!0);return Tf(r,(l,o)=>{Ug(r,l,nM(o))},a),t&&(t.finalized_=!1),r}var KW=new WW,sM=KW.produce;function lM(e){return({dispatch:r,getState:a})=>l=>o=>typeof o=="function"?o(r,a,e):l(o)}var ZW=lM(),QW=lM,JW=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Lg:Lg.apply(null,arguments)};function Ls(e,t){function r(...a){if(t){let l=t(...a);if(!l)throw new Error(is(0));return{type:e,payload:l.payload,..."meta"in l&&{meta:l.meta},..."error"in l&&{error:l.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>WP(a)&&a.type===e,r}var iM=class Mm extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Mm.prototype)}static get[Symbol.species](){return Mm}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Mm(...t[0].concat(this)):new Mm(...t.concat(this))}};function hT(e){return ol(e)?sM(e,()=>{}):e}function Eh(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function eK(e){return typeof e=="boolean"}var tK=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:l=!0,actionCreatorCheck:o=!0}=t??{};let d=new iM;return r&&(eK(r)?d.push(ZW):d.push(QW(r.extraArgument))),d},oM="RTK_autoBatch",Xr=()=>e=>({payload:e,meta:{[oM]:!0}}),gT=e=>t=>{setTimeout(t,e)},cM=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let l=!0,o=!1,d=!1;const h=new Set,g=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:gT(10):e.type==="callback"?e.queueNotification:gT(e.timeout),p=()=>{d=!1,o&&(o=!1,h.forEach(x=>x()))};return Object.assign({},a,{subscribe(x){const E=()=>l&&x(),C=a.subscribe(E);return h.add(x),()=>{C(),h.delete(x)}},dispatch(x){try{return l=!x?.meta?.[oM],o=!l,o&&(d||(d=!0,g(p))),a.dispatch(x)}finally{l=!0}}})},rK=e=>function(r){const{autoBatch:a=!0}=r??{};let l=new iM(e);return a&&l.push(cM(typeof a=="object"?a:void 0)),l};function aK(e){const t=tK(),{reducer:r=void 0,middleware:a,devTools:l=!0,preloadedState:o=void 0,enhancers:d=void 0}=e||{};let h;if(typeof r=="function")h=r;else if(vw(r))h=XP(r);else throw new Error(is(1));let g;typeof a=="function"?g=a(t):g=t();let p=Lg;l&&(p=JW({trace:!1,...typeof l=="object"&&l}));const x=LW(...g),E=rK(x);let C=typeof d=="function"?d(E):E();const O=p(...C);return YP(h,o,O)}function uM(e){const t={},r=[];let a;const l={addCase(o,d){const h=typeof o=="string"?o:o.type;if(!h)throw new Error(is(28));if(h in t)throw new Error(is(29));return t[h]=d,l},addAsyncThunk(o,d){return d.pending&&(t[o.pending.type]=d.pending),d.rejected&&(t[o.rejected.type]=d.rejected),d.fulfilled&&(t[o.fulfilled.type]=d.fulfilled),d.settled&&r.push({matcher:o.settled,reducer:d.settled}),l},addMatcher(o,d){return r.push({matcher:o,reducer:d}),l},addDefaultCase(o){return a=o,l}};return e(l),[t,r,a]}function nK(e){return typeof e=="function"}function sK(e,t){let[r,a,l]=uM(t),o;if(nK(e))o=()=>hT(e());else{const h=hT(e);o=()=>h}function d(h=o(),g){let p=[r[g.type],...a.filter(({matcher:x})=>x(g)).map(({reducer:x})=>x)];return p.filter(x=>!!x).length===0&&(p=[l]),p.reduce((x,E)=>{if(E)if(Si(x)){const O=E(x,g);return O===void 0?x:O}else{if(ol(x))return sM(x,C=>E(C,g));{const C=E(x,g);if(C===void 0){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return C}}return x},h)}return d.getInitialState=o,d}var lK="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",iK=(e=21)=>{let t="",r=e;for(;r--;)t+=lK[Math.random()*64|0];return t},oK=Symbol.for("rtk-slice-createasyncthunk");function cK(e,t){return`${e}/${t}`}function uK({creators:e}={}){const t=e?.asyncThunk?.[oK];return function(a){const{name:l,reducerPath:o=l}=a;if(!l)throw new Error(is(11));const d=(typeof a.reducers=="function"?a.reducers(mK()):a.reducers)||{},h=Object.keys(d),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(R,Y){const j=typeof R=="string"?R:R.type;if(!j)throw new Error(is(12));if(j in g.sliceCaseReducersByType)throw new Error(is(13));return g.sliceCaseReducersByType[j]=Y,p},addMatcher(R,Y){return g.sliceMatchers.push({matcher:R,reducer:Y}),p},exposeAction(R,Y){return g.actionCreators[R]=Y,p},exposeCaseReducer(R,Y){return g.sliceCaseReducersByName[R]=Y,p}};h.forEach(R=>{const Y=d[R],j={reducerName:R,type:cK(l,R),createNotation:typeof a.reducers=="function"};hK(Y)?pK(j,Y,p,t):fK(j,Y,p)});function x(){const[R={},Y=[],j=void 0]=typeof a.extraReducers=="function"?uM(a.extraReducers):[a.extraReducers],z={...R,...g.sliceCaseReducersByType};return sK(a.initialState,L=>{for(let q in z)L.addCase(q,z[q]);for(let q of g.sliceMatchers)L.addMatcher(q.matcher,q.reducer);for(let q of Y)L.addMatcher(q.matcher,q.reducer);j&&L.addDefaultCase(j)})}const E=R=>R,C=new Map,O=new WeakMap;let _;function P(R,Y){return _||(_=x()),_(R,Y)}function k(){return _||(_=x()),_.getInitialState()}function I(R,Y=!1){function j(L){let q=L[R];return typeof q>"u"&&Y&&(q=Eh(O,j,k)),q}function z(L=E){const q=Eh(C,Y,()=>new WeakMap);return Eh(q,L,()=>{const V={};for(const[W,H]of Object.entries(a.selectors??{}))V[W]=dK(H,L,()=>Eh(O,L,k),Y);return V})}return{reducerPath:R,getSelectors:z,get selectors(){return z(j)},selectSlice:j}}const F={name:l,reducer:P,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:k,...I(o),injectInto(R,{reducerPath:Y,...j}={}){const z=Y??o;return R.inject({reducerPath:z,reducer:P},j),{...F,...I(z,!0)}}};return F}}function dK(e,t,r,a){function l(o,...d){let h=t(o);return typeof h>"u"&&a&&(h=r()),e(h,...d)}return l.unwrapped=e,l}var zn=uK();function mK(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function fK({type:e,reducerName:t,createNotation:r},a,l){let o,d;if("reducer"in a){if(r&&!gK(a))throw new Error(is(17));o=a.reducer,d=a.prepare}else o=a;l.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,d?Ls(e,d):Ls(e))}function hK(e){return e._reducerDefinitionType==="asyncThunk"}function gK(e){return e._reducerDefinitionType==="reducerWithPrepare"}function pK({type:e,reducerName:t},r,a,l){if(!l)throw new Error(is(18));const{payloadCreator:o,fulfilled:d,pending:h,rejected:g,settled:p,options:x}=r,E=l(e,o,x);a.exposeAction(t,E),d&&a.addCase(E.fulfilled,d),h&&a.addCase(E.pending,h),g&&a.addCase(E.rejected,g),p&&a.addMatcher(E.settled,p),a.exposeCaseReducer(t,{fulfilled:d||wh,pending:h||wh,rejected:g||wh,settled:p||wh})}function wh(){}var yK="task",dM="listener",mM="completed",Aw="cancelled",xK=`task-${Aw}`,bK=`task-${mM}`,_E=`${dM}-${Aw}`,vK=`${dM}-${mM}`,Gp=class{constructor(e){this.code=e,this.message=`${yK} ${Aw} (reason: ${e})`}name="TaskAbortError";message},Tw=(e,t)=>{if(typeof e!="function")throw new TypeError(is(32))},zg=()=>{},fM=(e,t=zg)=>(e.catch(t),e),hM=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),_c=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Dc=e=>{if(e.aborted){const{reason:t}=e;throw new Gp(t)}};function gM(e,t){let r=zg;return new Promise((a,l)=>{const o=()=>l(new Gp(e.reason));if(e.aborted){o();return}r=hM(e,o),t.finally(()=>r()).then(a,l)}).finally(()=>{r=zg})}var EK=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Gp?"cancelled":"rejected",error:r}}finally{t?.()}},Vg=e=>t=>fM(gM(e,t).then(r=>(Dc(e),r))),pM=e=>{const t=Vg(e);return r=>t(new Promise(a=>setTimeout(a,r)))},{assign:$u}=Object,pT={},Yp="listenerMiddleware",wK=(e,t)=>{const r=a=>hM(e,()=>_c(a,e.reason));return(a,l)=>{Tw(a);const o=new AbortController;r(o);const d=EK(async()=>{Dc(e),Dc(o.signal);const h=await a({pause:Vg(o.signal),delay:pM(o.signal),signal:o.signal});return Dc(o.signal),h},()=>_c(o,bK));return l?.autoJoin&&t.push(d.catch(zg)),{result:Vg(e)(d),cancel(){_c(o,xK)}}}},NK=(e,t)=>{const r=async(a,l)=>{Dc(t);let o=()=>{};const h=[new Promise((g,p)=>{let x=e({predicate:a,effect:(E,C)=>{C.unsubscribe(),g([E,C.getState(),C.getOriginalState()])}});o=()=>{x(),p()}})];l!=null&&h.push(new Promise(g=>setTimeout(g,l,null)));try{const g=await gM(t,Promise.race(h));return Dc(t),g}finally{o()}};return(a,l)=>fM(r(a,l))},yM=e=>{let{type:t,actionCreator:r,matcher:a,predicate:l,effect:o}=e;if(t)l=Ls(t).match;else if(r)t=r.type,l=r.match;else if(a)l=a;else if(!l)throw new Error(is(21));return Tw(o),{predicate:l,type:t,effect:o}},xM=$u(e=>{const{type:t,predicate:r,effect:a}=yM(e);return{id:iK(),effect:a,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(is(22))}}},{withTypes:()=>xM}),yT=(e,t)=>{const{type:r,effect:a,predicate:l}=yM(t);return Array.from(e.values()).find(o=>(typeof r=="string"?o.type===r:o.predicate===l)&&o.effect===a)},DE=e=>{e.pending.forEach(t=>{_c(t,_E)})},SK=(e,t)=>()=>{for(const r of t.keys())DE(r);e.clear()},xT=(e,t,r)=>{try{e(t,r)}catch(a){setTimeout(()=>{throw a},0)}},bM=$u(Ls(`${Yp}/add`),{withTypes:()=>bM}),CK=Ls(`${Yp}/removeAll`),vM=$u(Ls(`${Yp}/remove`),{withTypes:()=>vM}),AK=(...e)=>{console.error(`${Yp}/error`,...e)},_f=(e={})=>{const t=new Map,r=new Map,a=O=>{const _=r.get(O)??0;r.set(O,_+1)},l=O=>{const _=r.get(O)??1;_===1?r.delete(O):r.set(O,_-1)},{extra:o,onError:d=AK}=e;Tw(d);const h=O=>(O.unsubscribe=()=>t.delete(O.id),t.set(O.id,O),_=>{O.unsubscribe(),_?.cancelActive&&DE(O)}),g=O=>{const _=yT(t,O)??xM(O);return h(_)};$u(g,{withTypes:()=>g});const p=O=>{const _=yT(t,O);return _&&(_.unsubscribe(),O.cancelActive&&DE(_)),!!_};$u(p,{withTypes:()=>p});const x=async(O,_,P,k)=>{const I=new AbortController,F=NK(g,I.signal),R=[];try{O.pending.add(I),a(O),await Promise.resolve(O.effect(_,$u({},P,{getOriginalState:k,condition:(Y,j)=>F(Y,j).then(Boolean),take:F,delay:pM(I.signal),pause:Vg(I.signal),extra:o,signal:I.signal,fork:wK(I.signal,R),unsubscribe:O.unsubscribe,subscribe:()=>{t.set(O.id,O)},cancelActiveListeners:()=>{O.pending.forEach((Y,j,z)=>{Y!==I&&(_c(Y,_E),z.delete(Y))})},cancel:()=>{_c(I,_E),O.pending.delete(I)},throwIfCancelled:()=>{Dc(I.signal)}})))}catch(Y){Y instanceof Gp||xT(d,Y,{raisedBy:"effect"})}finally{await Promise.all(R),_c(I,vK),l(O),O.pending.delete(I)}},E=SK(t,r);return{middleware:O=>_=>P=>{if(!WP(P))return _(P);if(bM.match(P))return g(P.payload);if(CK.match(P)){E();return}if(vM.match(P))return p(P.payload);let k=O.getState();const I=()=>{if(k===pT)throw new Error(is(23));return k};let F;try{if(F=_(P),t.size>0){const R=O.getState(),Y=Array.from(t.values());for(const j of Y){let z=!1;try{z=j.predicate(P,R,k)}catch(L){z=!1,xT(d,L,{raisedBy:"predicate"})}z&&x(j,P,O,I)}}}finally{k=pT}return F},startListening:g,stopListening:p,clearListeners:E}};function is(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var TK={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},EM=zn({name:"chartLayout",initialState:TK,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,a,l,o;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(a=t.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(l=t.payload.bottom)!==null&&l!==void 0?l:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:OK,setLayout:_K,setChartSize:DK,setScale:kK}=EM.actions,PK=EM.reducer;function wM(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function bT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Uu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bT(Object(r),!0).forEach(function(a){MK(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function MK(e,t,r){return(t=IK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IK(e){var t=RK(e,"string");return typeof t=="symbol"?t:t+""}function RK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xa(e,t,r){return cs(e)||cs(t)?r:Ni(t)?Zm(e,t,r):typeof t=="function"?t(e):r}var LK=(e,t,r)=>{if(t&&r){var{width:a,height:l}=r,{align:o,verticalAlign:d,layout:h}=t;if((h==="vertical"||h==="horizontal"&&d==="middle")&&o!=="center"&&Mt(e[o]))return Uu(Uu({},e),{},{[o]:e[o]+(a||0)});if((h==="horizontal"||h==="vertical"&&o==="center")&&d!=="middle"&&Mt(e[d]))return Uu(Uu({},e),{},{[d]:e[d]+(l||0)})}return e},Uc=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",vT=1e-4,BK=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,a=e.range(),l=Math.min(a[0],a[1])-vT,o=Math.max(a[0],a[1])+vT,d=e(t[0]),h=e(t[r-1]);(d<l||d>o||h<l||h>o)&&e.domain([t[0],t[r-1]])}},FK=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var l=0,o=0,d=0;d<t;++d){var h=Ei(e[d][r][1])?e[d][r][0]:e[d][r][1];h>=0?(e[d][r][0]=l,e[d][r][1]=l+h,l=e[d][r][1]):(e[d][r][0]=o,e[d][r][1]=o+h,o=e[d][r][1])}},UK=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var l=0,o=0;o<t;++o){var d=Ei(e[o][r][1])?e[o][r][0]:e[o][r][1];d>=0?(e[o][r][0]=l,e[o][r][1]=l+d,l=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},jK={sign:FK,expand:sX,none:ed,silhouette:lX,wiggle:iX,positive:UK},zK=(e,t,r)=>{var a=jK[r],l=nX().keys(t).value((o,d)=>Number(xa(o,d,0))).order(bE).offset(a);return l(e)},VK=e=>{var t=e.flat(2).filter(Mt);return[Math.min(...t),Math.max(...t)]},HK=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],$K=(e,t,r)=>{if(e!=null)return HK(Object.keys(e).reduce((a,l)=>{var o=e[l],{stackedData:d}=o,h=d.reduce((g,p)=>{var x=wM(p,t,r),E=VK(x);return[Math.min(g[0],E[0]),Math.max(g[1],E[1])]},[1/0,-1/0]);return[Math.min(h[0],a[0]),Math.max(h[1],a[1])]},[1/0,-1/0]))},ET=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,wT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,NT=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();return a}if(e&&t&&t.length>=2){for(var l=Up(t,x=>x.coordinate),o=1/0,d=1,h=l.length;d<h;d++){var g=l[d],p=l[d-1];o=Math.min((g.coordinate||0)-(p.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0};function ST(e){var{tooltipEntrySettings:t,dataKey:r,payload:a,value:l,name:o}=e;return Uu(Uu({},t),{},{dataKey:r,payload:a,value:l,name:o})}function NM(e,t){if(e)return String(e);if(typeof t=="string")return t}var qK=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},GK=(e,t)=>t==="centric"?e.angle:e.radius,Di=e=>e.layout.width,ki=e=>e.layout.height,YK=e=>e.layout.scale,SM=e=>e.layout.margin,Xp=Me(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Wp=Me(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),CM="data-recharts-item-index",AM="data-recharts-item-data-key",Df=60;function CT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Nh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CT(Object(r),!0).forEach(function(a){XK(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function XK(e,t,r){return(t=WK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WK(e){var t=KK(e,"string");return typeof t=="symbol"?t:t+""}function KK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZK=e=>e.brush.height;function QK(e){var t=Wp(e);return t.reduce((r,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:Df;return r+l}return r},0)}function JK(e){var t=Wp(e);return t.reduce((r,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:Df;return r+l}return r},0)}function eZ(e){var t=Xp(e);return t.reduce((r,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?r+a.height:r,0)}function tZ(e){var t=Xp(e);return t.reduce((r,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?r+a.height:r,0)}var Za=Me([Di,ki,SM,ZK,QK,JK,eZ,tZ,qP,_W],(e,t,r,a,l,o,d,h,g,p)=>{var x={left:(r.left||0)+l,right:(r.right||0)+o},E={top:(r.top||0)+d,bottom:(r.bottom||0)+h},C=Nh(Nh({},E),x),O=C.bottom;C.bottom+=a,C=LK(C,g,p);var _=e-C.left-C.right,P=t-C.top-C.bottom;return Nh(Nh({brushBottom:O},C),{},{width:Math.max(_,0),height:Math.max(P,0)})}),rZ=Me(Za,e=>({x:e.left,y:e.top,width:e.width,height:e.height}));Me(Di,ki,(e,t)=>({x:0,y:0,width:e,height:t}));var aZ=N.createContext(null),Bo=()=>N.useContext(aZ)!=null,Kp=e=>e.brush,Zp=Me([Kp,Za,SM],(e,t,r)=>({height:e.height,x:Mt(e.x)?e.x:t.left,y:Mt(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:Mt(e.width)?e.width:t.width})),Vb={},Hb={},$b={},AT;function nZ(){return AT||(AT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a,{signal:l,edges:o}={}){let d,h=null;const g=o!=null&&o.includes("leading"),p=o==null||o.includes("trailing"),x=()=>{h!==null&&(r.apply(d,h),d=void 0,h=null)},E=()=>{p&&x(),P()};let C=null;const O=()=>{C!=null&&clearTimeout(C),C=setTimeout(()=>{C=null,E()},a)},_=()=>{C!==null&&(clearTimeout(C),C=null)},P=()=>{_(),d=void 0,h=null},k=()=>{x()},I=function(...F){if(l?.aborted)return;d=this,h=F;const R=C==null;O(),g&&R&&x()};return I.schedule=O,I.cancel=P,I.flush=k,l?.addEventListener("abort",P,{once:!0}),I}e.debounce=t})($b)),$b}var TT;function sZ(){return TT||(TT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nZ();function r(a,l=0,o={}){typeof o!="object"&&(o={});const{leading:d=!1,trailing:h=!0,maxWait:g}=o,p=Array(2);d&&(p[0]="leading"),h&&(p[1]="trailing");let x,E=null;const C=t.debounce(function(...P){x=a.apply(this,P),E=null},l,{edges:p}),O=function(...P){return g!=null&&(E===null&&(E=Date.now()),Date.now()-E>=g)?(x=a.apply(this,P),E=Date.now(),C.cancel(),C.schedule(),x):(C.apply(this,P),x)},_=()=>(C.flush(),x);return O.cancel=C.cancel,O.flush=_,O}e.debounce=r})(Hb)),Hb}var OT;function lZ(){return OT||(OT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sZ();function r(a,l=0,o={}){const{leading:d=!0,trailing:h=!0}=o;return t.debounce(a,l,{leading:d,maxWait:l,trailing:h})}e.throttle=r})(Vb)),Vb}var qb,_T;function iZ(){return _T||(_T=1,qb=lZ().throttle),qb}var oZ=iZ();const cZ=Bl(oZ);var DT=function(t,r){for(var a=arguments.length,l=new Array(a>2?a-2:0),o=2;o<a;o++)l[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=0;console.warn(r.replace(/%s/g,()=>l[d++]))}},TM=(e,t,r)=>{var{width:a="100%",height:l="100%",aspect:o,maxHeight:d}=r,h=wi(a)?e:Number(a),g=wi(l)?t:Number(l);return o&&o>0&&(h?g=h/o:g&&(h=g*o),d&&g!=null&&g>d&&(g=d)),{calculatedWidth:h,calculatedHeight:g}},uZ={width:0,height:0,overflow:"visible"},dZ={width:0,overflowX:"visible"},mZ={height:0,overflowY:"visible"},fZ={},hZ=e=>{var{width:t,height:r}=e,a=wi(t),l=wi(r);return a&&l?uZ:a?dZ:l?mZ:fZ};function gZ(e){var{width:t,height:r,aspect:a}=e,l=t,o=r;return l===void 0&&o===void 0?(l="100%",o="100%"):l===void 0?l=a&&a>0?void 0:"100%":o===void 0&&(o=a&&a>0?void 0:"100%"),{width:l,height:o}}function Ka(e){return Number.isFinite(e)}function Mo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function kE(){return kE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},kE.apply(null,arguments)}function kT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function PT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kT(Object(r),!0).forEach(function(a){pZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pZ(e,t,r){return(t=yZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yZ(e){var t=xZ(e,"string");return typeof t=="symbol"?t:t+""}function xZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OM=N.createContext({width:-1,height:-1});function bZ(e){return Mo(e.width)&&Mo(e.height)}function _M(e){var{children:t,width:r,height:a}=e,l=N.useMemo(()=>({width:r,height:a}),[r,a]);return bZ(l)?N.createElement(OM.Provider,{value:l},t):null}var Ow=()=>N.useContext(OM),vZ=N.forwardRef((e,t)=>{var{aspect:r,initialDimension:a={width:-1,height:-1},width:l,height:o,minWidth:d=0,minHeight:h,maxHeight:g,children:p,debounce:x=0,id:E,className:C,onResize:O,style:_={}}=e,P=N.useRef(null),k=N.useRef();k.current=O,N.useImperativeHandle(t,()=>P.current);var[I,F]=N.useState({containerWidth:a.width,containerHeight:a.height}),R=N.useCallback((q,V)=>{F(W=>{var H=Math.round(q),$=Math.round(V);return W.containerWidth===H&&W.containerHeight===$?W:{containerWidth:H,containerHeight:$}})},[]);N.useEffect(()=>{if(P.current==null||typeof ResizeObserver>"u")return Af;var q=$=>{var ce,{width:me,height:ae}=$[0].contentRect;R(me,ae),(ce=k.current)===null||ce===void 0||ce.call(k,me,ae)};x>0&&(q=cZ(q,x,{trailing:!0,leading:!1}));var V=new ResizeObserver(q),{width:W,height:H}=P.current.getBoundingClientRect();return R(W,H),V.observe(P.current),()=>{V.disconnect()}},[R,x]);var{containerWidth:Y,containerHeight:j}=I;DT(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:z,calculatedHeight:L}=TM(Y,j,{width:l,height:o,aspect:r,maxHeight:g});return DT(z!=null&&z>0||L!=null&&L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,L,l,o,d,h,r),N.createElement("div",{id:E?"".concat(E):void 0,className:ba("recharts-responsive-container",C),style:PT(PT({},_),{},{width:l,height:o,minWidth:d,minHeight:h,maxHeight:g}),ref:P},N.createElement("div",{style:hZ({width:l,height:o})},N.createElement(_M,{width:z,height:L},p)))}),PE=N.forwardRef((e,t)=>{var r=Ow();if(Mo(r.width)&&Mo(r.height))return e.children;var{width:a,height:l}=gZ({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:d}=TM(void 0,void 0,{width:a,height:l,aspect:e.aspect,maxHeight:e.maxHeight});return Mt(o)&&Mt(d)?N.createElement(_M,{width:o,height:d},e.children):N.createElement(vZ,kE({},e,{width:a,height:l,ref:t}))});function DM(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Qp=()=>{var e,t=Bo(),r=Rt(rZ),a=Rt(Zp),l=(e=Rt(Kp))===null||e===void 0?void 0:e.padding;return!t||!a||!l?r:{width:a.width-l.left-l.right,height:a.height-l.top-l.bottom,x:l.left,y:l.top}},EZ={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},wZ=()=>{var e;return(e=Rt(Za))!==null&&e!==void 0?e:EZ},kM=()=>Rt(Di),PM=()=>Rt(ki),NZ=()=>Rt(e=>e.layout.margin),Rr=e=>e.layout.layoutType,_w=()=>Rt(Rr),SZ=()=>{var e=_w();return e!==void 0},Jp=e=>{var t=va(),r=Bo(),{width:a,height:l}=e,o=Ow(),d=a,h=l;return o&&(d=o.width>0?o.width:a,h=o.height>0?o.height:l),N.useEffect(()=>{!r&&Mo(d)&&Mo(h)&&t(DK({width:d,height:h}))},[t,r,d,h]),null},MM=Symbol.for("immer-nothing"),MT=Symbol.for("immer-draftable"),us=Symbol.for("immer-state");function al(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var rf=Object.getPrototypeOf;function ad(e){return!!e&&!!e[us]}function Rc(e){return e?IM(e)||Array.isArray(e)||!!e[MT]||!!e.constructor?.[MT]||kf(e)||t1(e):!1}var CZ=Object.prototype.constructor.toString(),IT=new WeakMap;function IM(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let a=IT.get(r);return a===void 0&&(a=Function.toString.call(r),IT.set(r,a)),a===CZ}function Hg(e,t,r=!0){e1(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((a,l)=>t(l,a,e))}function e1(e){const t=e[us];return t?t.type_:Array.isArray(e)?1:kf(e)?2:t1(e)?3:0}function ME(e,t){return e1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function RM(e,t,r){const a=e1(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function AZ(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function kf(e){return e instanceof Map}function t1(e){return e instanceof Set}function xc(e){return e.copy_||e.base_}function IE(e,t){if(kf(e))return new Map(e);if(t1(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=IM(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[us];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const d=l[o],h=a[d];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(a[d]={configurable:!0,writable:!0,enumerable:h.enumerable,value:e[d]})}return Object.create(rf(e),a)}else{const a=rf(e);if(a!==null&&r)return{...e};const l=Object.create(a);return Object.assign(l,e)}}function Dw(e,t=!1){return r1(e)||ad(e)||!Rc(e)||(e1(e)>1&&Object.defineProperties(e,{set:Sh,add:Sh,clear:Sh,delete:Sh}),Object.freeze(e),t&&Object.values(e).forEach(r=>Dw(r,!0))),e}function TZ(){al(2)}var Sh={value:TZ};function r1(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var OZ={};function Lc(e){const t=OZ[e];return t||al(0,e),t}var af;function LM(){return af}function _Z(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function RT(e,t){t&&(Lc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function RE(e){LE(e),e.drafts_.forEach(DZ),e.drafts_=null}function LE(e){e===af&&(af=e.parent_)}function LT(e){return af=_Z(af,e)}function DZ(e){const t=e[us];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function BT(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[us].modified_&&(RE(t),al(4)),Rc(e)&&(e=$g(t,e),t.parent_||qg(t,e)),t.patches_&&Lc("Patches").generateReplacementPatches_(r[us].base_,e,t.patches_,t.inversePatches_)):e=$g(t,r,[]),RE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==MM?e:void 0}function $g(e,t,r){if(r1(t))return t;const a=e.immer_.shouldUseStrictIteration(),l=t[us];if(!l)return Hg(t,(o,d)=>FT(e,l,t,o,d,r),a),t;if(l.scope_!==e)return t;if(!l.modified_)return qg(e,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const o=l.copy_;let d=o,h=!1;l.type_===3&&(d=new Set(o),o.clear(),h=!0),Hg(d,(g,p)=>FT(e,l,o,g,p,r,h),a),qg(e,o,!1),r&&e.patches_&&Lc("Patches").generatePatches_(l,r,e.patches_,e.inversePatches_)}return l.copy_}function FT(e,t,r,a,l,o,d){if(l==null||typeof l!="object"&&!d)return;const h=r1(l);if(!(h&&!d)){if(ad(l)){const g=o&&t&&t.type_!==3&&!ME(t.assigned_,a)?o.concat(a):void 0,p=$g(e,l,g);if(RM(r,a,p),ad(p))e.canAutoFreeze_=!1;else return}else d&&r.add(l);if(Rc(l)&&!h){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[a]===l&&h)return;$g(e,l),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(kf(r)?r.has(a):Object.prototype.propertyIsEnumerable.call(r,a))&&qg(e,l)}}}function qg(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Dw(t,r)}function kZ(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:LM(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=a,o=kw;r&&(l=[a],o=nf);const{revoke:d,proxy:h}=Proxy.revocable(l,o);return a.draft_=h,a.revoke_=d,h}var kw={get(e,t){if(t===us)return e;const r=xc(e);if(!ME(r,t))return PZ(e,r,t);const a=r[t];return e.finalized_||!Rc(a)?a:a===Gb(e.base_,t)?(Yb(e),e.copy_[t]=FE(a,e)):a},has(e,t){return t in xc(e)},ownKeys(e){return Reflect.ownKeys(xc(e))},set(e,t,r){const a=BM(xc(e),t);if(a?.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const l=Gb(xc(e),t),o=l?.[us];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(AZ(r,l)&&(r!==void 0||ME(e.base_,t)))return!0;Yb(e),BE(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Gb(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Yb(e),BE(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=xc(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){al(11)},getPrototypeOf(e){return rf(e.base_)},setPrototypeOf(){al(12)}},nf={};Hg(kw,(e,t)=>{nf[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});nf.deleteProperty=function(e,t){return nf.set.call(this,e,t,void 0)};nf.set=function(e,t,r){return kw.set.call(this,e[0],t,r,e[0])};function Gb(e,t){const r=e[us];return(r?xc(r):e)[t]}function PZ(e,t,r){const a=BM(t,r);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function BM(e,t){if(!(t in e))return;let r=rf(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=rf(r)}}function BE(e){e.modified_||(e.modified_=!0,e.parent_&&BE(e.parent_))}function Yb(e){e.copy_||(e.copy_=IE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var MZ=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const d=this;return function(g=o,...p){return d.produce(g,x=>r.call(this,x,...p))}}typeof r!="function"&&al(6),a!==void 0&&typeof a!="function"&&al(7);let l;if(Rc(t)){const o=LT(this),d=FE(t,void 0);let h=!0;try{l=r(d),h=!1}finally{h?RE(o):LE(o)}return RT(o,a),BT(l,o)}else if(!t||typeof t!="object"){if(l=r(t),l===void 0&&(l=t),l===MM&&(l=void 0),this.autoFreeze_&&Dw(l,!0),a){const o=[],d=[];Lc("Patches").generateReplacementPatches_(t,l,o,d),a(o,d)}return l}else al(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(d,...h)=>this.produceWithPatches(d,g=>t(g,...h));let a,l;return[this.produce(t,r,(d,h)=>{a=d,l=h}),a,l]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Rc(e)||al(8),ad(e)&&(e=IZ(e));const t=LT(this),r=FE(e,void 0);return r[us].isManual_=!0,LE(t),r}finishDraft(e,t){const r=e&&e[us];(!r||!r.isManual_)&&al(9);const{scope_:a}=r;return RT(a,t),BT(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const l=t[r];if(l.path.length===0&&l.op==="replace"){e=l.value;break}}r>-1&&(t=t.slice(r+1));const a=Lc("Patches").applyPatches_;return ad(e)?a(e,t):this.produce(e,l=>a(l,t))}};function FE(e,t){const r=kf(e)?Lc("MapSet").proxyMap_(e,t):t1(e)?Lc("MapSet").proxySet_(e,t):kZ(e,t);return(t?t.scope_:LM()).drafts_.push(r),r}function IZ(e){return ad(e)||al(10,e),FM(e)}function FM(e){if(!Rc(e)||r1(e))return e;const t=e[us];let r,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=IE(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else r=IE(e,!0);return Hg(r,(l,o)=>{RM(r,l,FM(o))},a),t&&(t.finalized_=!1),r}var RZ=new MZ;RZ.produce;var LZ={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},UM=zn({name:"legend",initialState:LZ,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Xr()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:a}=t.payload,l=il(e).payload.indexOf(r);l>-1&&(e.payload[l]=a)},prepare:Xr()},removeLegendPayload:{reducer(e,t){var r=il(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Xr()}}}),{setLegendSize:UT,setLegendSettings:BZ,addLegendPayload:FZ,replaceLegendPayload:UZ,removeLegendPayload:jZ}=UM.actions,zZ=UM.reducer,VZ=["contextPayload"];function UE(){return UE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},UE.apply(null,arguments)}function jT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function nd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jT(Object(r),!0).forEach(function(a){HZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function HZ(e,t,r){return(t=$Z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Z(e){var t=qZ(e,"string");return typeof t=="symbol"?t:t+""}function qZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GZ(e,t){if(e==null)return{};var r,a,l=YZ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function YZ(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function XZ(e){return e.value}function WZ(e){var{contextPayload:t}=e,r=GZ(e,VZ),a=zP(t,e.payloadUniqBy,XZ),l=nd(nd({},r),{},{payload:a});return N.isValidElement(e.content)?N.cloneElement(e.content,l):typeof e.content=="function"?N.createElement(e.content,l):N.createElement(FX,l)}function KZ(e,t,r,a,l,o){var{layout:d,align:h,verticalAlign:g}=t,p,x;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(h==="center"&&d==="vertical"?p={left:((a||0)-o.width)/2}:p=h==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(g==="middle"?x={top:((l||0)-o.height)/2}:x=g==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),nd(nd({},p),x)}function ZZ(e){var t=va();return N.useEffect(()=>{t(BZ(e))},[t,e]),null}function QZ(e){var t=va();return N.useEffect(()=>(t(UT(e)),()=>{t(UT({width:0,height:0}))}),[t,e]),null}function JZ(e,t,r,a){return e==="vertical"&&Mt(t)?{height:t}:e==="horizontal"?{width:r||a}:null}var eQ={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function jM(e){var t=js(e,eQ),r=PW(),a=OY(),l=NZ(),{width:o,height:d,wrapperStyle:h,portal:g}=t,[p,x]=GP([r]),E=kM(),C=PM();if(E==null||C==null)return null;var O=E-(l?.left||0)-(l?.right||0),_=JZ(t.layout,d,o,O),P=g?h:nd(nd({position:"absolute",width:_?.width||o||"auto",height:_?.height||d||"auto"},KZ(h,t,l,E,C,p)),h),k=g??a;if(k==null||r==null)return null;var I=N.createElement("div",{className:"recharts-legend-wrapper",style:P,ref:x},N.createElement(ZZ,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!g&&N.createElement(QZ,{width:p.width,height:p.height}),N.createElement(WZ,UE({},t,_,{margin:l,chartWidth:E,chartHeight:C,contextPayload:r})));return E2.createPortal(I,k)}jM.displayName="Legend";function jE(){return jE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},jE.apply(null,arguments)}function zT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Xb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zT(Object(r),!0).forEach(function(a){tQ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tQ(e,t,r){return(t=rQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rQ(e){var t=aQ(e,"string");return typeof t=="symbol"?t:t+""}function aQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nQ(e){return Array.isArray(e)&&Ni(e[0])&&Ni(e[1])?e.join(" ~ "):e}var sQ=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:a={},labelStyle:l={},payload:o,formatter:d,itemSorter:h,wrapperClassName:g,labelClassName:p,label:x,labelFormatter:E,accessibilityLayer:C=!1}=e,O=()=>{if(o&&o.length){var j={padding:0,margin:0},z=(h?Up(o,h):o).map((L,q)=>{if(L.type==="none")return null;var V=L.formatter||d||nQ,{value:W,name:H}=L,$=W,ce=H;if(V){var me=V(W,H,L,q,o);if(Array.isArray(me))[$,ce]=me;else if(me!=null)$=me;else return null}var ae=Xb({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},a);return N.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(q),style:ae},Ni(ce)?N.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,Ni(ce)?N.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,N.createElement("span",{className:"recharts-tooltip-item-value"},$),N.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return N.createElement("ul",{className:"recharts-tooltip-item-list",style:j},z)}return null},_=Xb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),P=Xb({margin:0},l),k=!cs(x),I=k?x:"",F=ba("recharts-default-tooltip",g),R=ba("recharts-tooltip-label",p);k&&E&&o!==void 0&&o!==null&&(I=E(x,o));var Y=C?{role:"status","aria-live":"assertive"}:{};return N.createElement("div",jE({className:F,style:_},Y),N.createElement("p",{className:R,style:P},N.isValidElement(I)?I:"".concat(I)),O())},vm="recharts-tooltip-wrapper",lQ={visibility:"hidden"};function iQ(e){var{coordinate:t,translateX:r,translateY:a}=e;return ba(vm,{["".concat(vm,"-right")]:Mt(r)&&t&&Mt(t.x)&&r>=t.x,["".concat(vm,"-left")]:Mt(r)&&t&&Mt(t.x)&&r<t.x,["".concat(vm,"-bottom")]:Mt(a)&&t&&Mt(t.y)&&a>=t.y,["".concat(vm,"-top")]:Mt(a)&&t&&Mt(t.y)&&a<t.y})}function VT(e){var{allowEscapeViewBox:t,coordinate:r,key:a,offsetTopLeft:l,position:o,reverseDirection:d,tooltipDimension:h,viewBox:g,viewBoxDimension:p}=e;if(o&&Mt(o[a]))return o[a];var x=r[a]-h-(l>0?l:0),E=r[a]+l;if(t[a])return d[a]?x:E;var C=g[a];if(C==null)return 0;if(d[a]){var O=x,_=C;return O<_?Math.max(E,C):Math.max(x,C)}if(p==null)return 0;var P=E+h,k=C+p;return P>k?Math.max(x,C):Math.max(E,C)}function oQ(e){var{translateX:t,translateY:r,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function cQ(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:a,position:l,reverseDirection:o,tooltipBox:d,useTranslate3d:h,viewBox:g}=e,p,x,E;return d.height>0&&d.width>0&&r?(x=VT({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:l,reverseDirection:o,tooltipDimension:d.width,viewBox:g,viewBoxDimension:g.width}),E=VT({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:l,reverseDirection:o,tooltipDimension:d.height,viewBox:g,viewBoxDimension:g.height}),p=oQ({translateX:x,translateY:E,useTranslate3d:h})):p=lQ,{cssProperties:p,cssClasses:iQ({translateX:x,translateY:E,coordinate:r})}}function HT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Ch(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HT(Object(r),!0).forEach(function(a){zE(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zE(e,t,r){return(t=uQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uQ(e){var t=dQ(e,"string");return typeof t=="symbol"?t:t+""}function dQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class mQ extends N.PureComponent{constructor(){super(...arguments),zE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),zE(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,a,l,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&r!==void 0?r:0,y:(l=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&l!==void 0?l:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:a,animationEasing:l,children:o,coordinate:d,hasPayload:h,isAnimationActive:g,offset:p,position:x,reverseDirection:E,useTranslate3d:C,viewBox:O,wrapperStyle:_,lastBoundingBox:P,innerRef:k,hasPortalFromProps:I}=this.props,{cssClasses:F,cssProperties:R}=cQ({allowEscapeViewBox:r,coordinate:d,offsetTopLeft:p,position:x,reverseDirection:E,tooltipBox:{height:P.height,width:P.width},useTranslate3d:C,viewBox:O}),Y=I?{}:Ch(Ch({transition:g&&t?"transform ".concat(a,"ms ").concat(l):void 0},R),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&h?"visible":"hidden",position:"absolute",top:0,left:0}),j=Ch(Ch({},Y),{},{visibility:!this.state.dismissed&&t&&h?"visible":"hidden"},_);return N.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:F,style:j,ref:k},o)}}var zM=()=>{var e;return(e=Rt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function VE(){return VE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},VE.apply(null,arguments)}function $T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function qT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$T(Object(r),!0).forEach(function(a){fQ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$T(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fQ(e,t,r){return(t=hQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hQ(e){var t=gQ(e,"string");return typeof t=="symbol"?t:t+""}function gQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GT={curveBasisClosed:YY,curveBasisOpen:XY,curveBasis:GY,curveBumpX:PY,curveBumpY:MY,curveLinearClosed:WY,curveLinear:Bp,curveMonotoneX:KY,curveMonotoneY:ZY,curveNatural:QY,curveStep:JY,curveStepAfter:tX,curveStepBefore:eX},Gg=e=>Ka(e.x)&&Ka(e.y),YT=e=>e.base!=null&&Gg(e.base)&&Gg(e),Em=e=>e.x,wm=e=>e.y,pQ=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Cf(e));return(r==="curveMonotone"||r==="curveBump")&&t?GT["".concat(r).concat(t==="vertical"?"Y":"X")]:GT[r]||Bp},yQ=e=>{var{type:t="linear",points:r=[],baseLine:a,layout:l,connectNulls:o=!1}=e,d=pQ(t,l),h=o?r.filter(Gg):r,g;if(Array.isArray(a)){var p=r.map((O,_)=>qT(qT({},O),{},{base:a[_]}));l==="vertical"?g=yh().y(wm).x1(Em).x0(O=>O.base.x):g=yh().x(Em).y1(wm).y0(O=>O.base.y);var x=g.defined(YT).curve(d),E=o?p.filter(YT):p;return x(E)}l==="vertical"&&Mt(a)?g=yh().y(wm).x1(Em).x0(a):Mt(a)?g=yh().x(Em).y1(wm).y0(a):g=pP().x(Em).y(wm);var C=g.defined(Gg).curve(d);return C(h)},Pw=e=>{var{className:t,points:r,path:a,pathRef:l}=e;if((!r||!r.length)&&!a)return null;var o=r&&r.length?yQ(e):a;return N.createElement("path",VE({},Ju(e),CX(e),{className:ba("recharts-curve",t),d:o===null?void 0:o,ref:l}))},xQ=["x","y","top","left","width","height","className"];function HE(){return HE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},HE.apply(null,arguments)}function XT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function bQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XT(Object(r),!0).forEach(function(a){vQ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vQ(e,t,r){return(t=EQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EQ(e){var t=wQ(e,"string");return typeof t=="symbol"?t:t+""}function wQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NQ(e,t){if(e==null)return{};var r,a,l=SQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function SQ(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var CQ=(e,t,r,a,l,o)=>"M".concat(e,",").concat(l,"v").concat(a,"M").concat(o,",").concat(t,"h").concat(r),AQ=e=>{var{x:t=0,y:r=0,top:a=0,left:l=0,width:o=0,height:d=0,className:h}=e,g=NQ(e,xQ),p=bQ({x:t,y:r,top:a,left:l,width:o,height:d},g);return!Mt(t)||!Mt(r)||!Mt(o)||!Mt(d)||!Mt(a)||!Mt(l)?null:N.createElement("path",HE({},Rs(p),{className:ba("recharts-cross",h),d:CQ(t,r,o,d,a,l)}))};function TQ(e,t,r,a){var l=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-l:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-l,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function WT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function KT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WT(Object(r),!0).forEach(function(a){OQ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function OQ(e,t,r){return(t=_Q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Q(e){var t=DQ(e,"string");return typeof t=="symbol"?t:t+""}function DQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kQ=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),VM=(e,t,r)=>e.map(a=>"".concat(kQ(a)," ").concat(t,"ms ").concat(r)).join(","),PQ=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,a)=>r.filter(l=>a.includes(l))),sf=(e,t)=>Object.keys(t).reduce((r,a)=>KT(KT({},r),{},{[a]:e(a,t[a])}),{});function ZT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function ja(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZT(Object(r),!0).forEach(function(a){MQ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function MQ(e,t,r){return(t=IQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IQ(e){var t=RQ(e,"string");return typeof t=="symbol"?t:t+""}function RQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yg=(e,t,r)=>e+(t-e)*r,$E=e=>{var{from:t,to:r}=e;return t!==r},HM=(e,t,r)=>{var a=sf((l,o)=>{if($E(o)){var[d,h]=e(o.from,o.to,o.velocity);return ja(ja({},o),{},{from:d,velocity:h})}return o},t);return r<1?sf((l,o)=>$E(o)?ja(ja({},o),{},{velocity:Yg(o.velocity,a[l].velocity,r),from:Yg(o.from,a[l].from,r)}):o,t):HM(e,a,r-1)};function LQ(e,t,r,a,l,o){var d,h=a.reduce((C,O)=>ja(ja({},C),{},{[O]:{from:e[O],velocity:0,to:t[O]}}),{}),g=()=>sf((C,O)=>O.from,h),p=()=>!Object.values(h).filter($E).length,x=null,E=C=>{d||(d=C);var O=C-d,_=O/r.dt;h=HM(r,h,_),l(ja(ja(ja({},e),t),g())),d=C,p()||(x=o.setTimeout(E))};return()=>(x=o.setTimeout(E),()=>{var C;(C=x)===null||C===void 0||C()})}function BQ(e,t,r,a,l,o,d){var h=null,g=l.reduce((E,C)=>ja(ja({},E),{},{[C]:[e[C],t[C]]}),{}),p,x=E=>{p||(p=E);var C=(E-p)/a,O=sf((P,k)=>Yg(...k,r(C)),g);if(o(ja(ja(ja({},e),t),O)),C<1)h=d.setTimeout(x);else{var _=sf((P,k)=>Yg(...k,r(1)),g);o(ja(ja(ja({},e),t),_))}};return()=>(h=d.setTimeout(x),()=>{var E;(E=h)===null||E===void 0||E()})}const FQ=(e,t,r,a,l,o)=>{var d=PQ(e,t);return r==null?()=>(l(ja(ja({},e),t)),()=>{}):r.isStepper===!0?LQ(e,t,r,d,l,o):BQ(e,t,r,a,d,l,o)};var Xg=1e-4,$M=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],qM=(e,t)=>e.map((r,a)=>r*t**a).reduce((r,a)=>r+a),QT=(e,t)=>r=>{var a=$M(e,t);return qM(a,r)},UQ=(e,t)=>r=>{var a=$M(e,t),l=[...a.map((o,d)=>o*d).slice(1),0];return qM(l,r)},jQ=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var l,o=r[0].split("(");if(o[0]==="cubic-bezier"&&((l=o[1])===null||l===void 0?void 0:l.split(")")[0].split(",").length)===4){var d=o[1].split(")")[0].split(",").map(h=>parseFloat(h));return[d[0],d[1],d[2],d[3]]}}}return r.length===4?r:[0,0,1,1]},zQ=(e,t,r,a)=>{var l=QT(e,r),o=QT(t,a),d=UQ(e,r),h=p=>p>1?1:p<0?0:p,g=p=>{for(var x=p>1?1:p,E=x,C=0;C<8;++C){var O=l(E)-x,_=d(E);if(Math.abs(O-x)<Xg||_<Xg)return o(E);E=h(E-O/_)}return o(E)};return g.isStepper=!1,g},JT=function(){return zQ(...jQ(...arguments))},VQ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:a=8,dt:l=17}=t,o=(d,h,g)=>{var p=-(d-h)*r,x=g*a,E=g+(p-x)*l/1e3,C=g*l/1e3+d;return Math.abs(C-h)<Xg&&Math.abs(E)<Xg?[h,0]:[C,E]};return o.isStepper=!0,o.dt=l,o},HQ=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return JT(e);case"spring":return VQ();default:if(e.split("(")[0]==="cubic-bezier")return JT(e)}return typeof e=="function"?e:null};function $Q(e){var t,r=()=>null,a=!1,l=null,o=d=>{if(!a){if(Array.isArray(d)){if(!d.length)return;var h=d,[g,...p]=h;if(typeof g=="number"){l=e.setTimeout(o.bind(null,p),g);return}o(g),l=e.setTimeout(o.bind(null,p));return}typeof d=="string"&&(t=d,r(t)),typeof d=="object"&&(t=d,r(t)),typeof d=="function"&&d()}};return{stop:()=>{a=!0},start:d=>{a=!1,l&&(l(),l=null),o(d)},subscribe:d=>(r=d,()=>{r=()=>null}),getTimeoutController:()=>e}}class qQ{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),l=null,o=d=>{d-a>=r?t(d):typeof requestAnimationFrame=="function"&&(l=requestAnimationFrame(o))};return l=requestAnimationFrame(o),()=>{l!=null&&cancelAnimationFrame(l)}}}function GQ(){return $Q(new qQ)}var YQ=N.createContext(GQ);function XQ(e,t){var r=N.useContext(YQ);return N.useMemo(()=>t??r(e),[e,t,r])}var WQ=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),a1={devToolsEnabled:!1,isSsr:WQ()},KQ={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},e6={t:0},Wb={t:1};function Mw(e){var t=js(e,KQ),{isActive:r,canBegin:a,duration:l,easing:o,begin:d,onAnimationEnd:h,onAnimationStart:g,children:p}=t,x=r==="auto"?!a1.isSsr:r,E=XQ(t.animationId,t.animationManager),[C,O]=N.useState(x?e6:Wb),_=N.useRef(null);return N.useEffect(()=>{x||O(Wb)},[x]),N.useEffect(()=>{if(!x||!a)return Af;var P=FQ(e6,Wb,HQ(o),l,O,E.getTimeoutController()),k=()=>{_.current=P()};return E.start([g,d,k,l,h]),()=>{E.stop(),_.current&&_.current(),h()}},[x,a,l,o,d,g,h,E]),p(C.t)}function Iw(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=N.useRef(Qm(t)),a=N.useRef(e);return a.current!==e&&(r.current=Qm(t),a.current=e),r.current}var ZQ=["radius"],QQ=["radius"];function t6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function r6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t6(Object(r),!0).forEach(function(a){JQ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function JQ(e,t,r){return(t=eJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eJ(e){var t=tJ(e,"string");return typeof t=="symbol"?t:t+""}function tJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wg(){return Wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Wg.apply(null,arguments)}function a6(e,t){if(e==null)return{};var r,a,l=rJ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function rJ(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var n6=(e,t,r,a,l)=>{var o=Math.min(Math.abs(r)/2,Math.abs(a)/2),d=a>=0?1:-1,h=r>=0?1:-1,g=a>=0&&r>=0||a<0&&r<0?1:0,p;if(o>0&&l instanceof Array){for(var x=[0,0,0,0],E=0,C=4;E<C;E++)x[E]=l[E]>o?o:l[E];p="M".concat(e,",").concat(t+d*x[0]),x[0]>0&&(p+="A ".concat(x[0],",").concat(x[0],",0,0,").concat(g,",").concat(e+h*x[0],",").concat(t)),p+="L ".concat(e+r-h*x[1],",").concat(t),x[1]>0&&(p+="A ".concat(x[1],",").concat(x[1],",0,0,").concat(g,`,
        `).concat(e+r,",").concat(t+d*x[1])),p+="L ".concat(e+r,",").concat(t+a-d*x[2]),x[2]>0&&(p+="A ".concat(x[2],",").concat(x[2],",0,0,").concat(g,`,
        `).concat(e+r-h*x[2],",").concat(t+a)),p+="L ".concat(e+h*x[3],",").concat(t+a),x[3]>0&&(p+="A ".concat(x[3],",").concat(x[3],",0,0,").concat(g,`,
        `).concat(e,",").concat(t+a-d*x[3])),p+="Z"}else if(o>0&&l===+l&&l>0){var O=Math.min(o,l);p="M ".concat(e,",").concat(t+d*O,`
            A `).concat(O,",").concat(O,",0,0,").concat(g,",").concat(e+h*O,",").concat(t,`
            L `).concat(e+r-h*O,",").concat(t,`
            A `).concat(O,",").concat(O,",0,0,").concat(g,",").concat(e+r,",").concat(t+d*O,`
            L `).concat(e+r,",").concat(t+a-d*O,`
            A `).concat(O,",").concat(O,",0,0,").concat(g,",").concat(e+r-h*O,",").concat(t+a,`
            L `).concat(e+h*O,",").concat(t+a,`
            A `).concat(O,",").concat(O,",0,0,").concat(g,",").concat(e,",").concat(t+a-d*O," Z")}else p="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return p},s6={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},GM=e=>{var t=js(e,s6),r=N.useRef(null),[a,l]=N.useState(-1);N.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var se=r.current.getTotalLength();se&&l(se)}catch{}},[]);var{x:o,y:d,width:h,height:g,radius:p,className:x}=t,{animationEasing:E,animationDuration:C,animationBegin:O,isAnimationActive:_,isUpdateAnimationActive:P}=t,k=N.useRef(h),I=N.useRef(g),F=N.useRef(o),R=N.useRef(d),Y=N.useMemo(()=>({x:o,y:d,width:h,height:g,radius:p}),[o,d,h,g,p]),j=Iw(Y,"rectangle-");if(o!==+o||d!==+d||h!==+h||g!==+g||h===0||g===0)return null;var z=ba("recharts-rectangle",x);if(!P){var L=Rs(t),{radius:q}=L,V=a6(L,ZQ);return N.createElement("path",Wg({},V,{radius:typeof p=="number"?p:void 0,className:z,d:n6(o,d,h,g,p)}))}var W=k.current,H=I.current,$=F.current,ce=R.current,me="0px ".concat(a===-1?1:a,"px"),ae="".concat(a,"px 0px"),J=VM(["strokeDasharray"],C,typeof E=="string"?E:s6.animationEasing);return N.createElement(Mw,{animationId:j,key:j,canBegin:a>0,duration:C,easing:E,isActive:P,begin:O},se=>{var Ee=tl(W,h,se),we=tl(H,g,se),te=tl($,o,se),K=tl(ce,d,se);r.current&&(k.current=Ee,I.current=we,F.current=te,R.current=K);var ee;_?se>0?ee={transition:J,strokeDasharray:ae}:ee={strokeDasharray:me}:ee={strokeDasharray:ae};var ge=Rs(t),{radius:le}=ge,Ce=a6(ge,QQ);return N.createElement("path",Wg({},Ce,{radius:typeof p=="number"?p:void 0,className:z,d:n6(te,K,Ee,we,p),ref:r,style:r6(r6({},ee),t.style)}))})};function l6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function i6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l6(Object(r),!0).forEach(function(a){aJ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function aJ(e,t,r){return(t=nJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nJ(e){var t=sJ(e,"string");return typeof t=="symbol"?t:t+""}function sJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kg=Math.PI/180,lJ=e=>e*180/Math.PI,ka=(e,t,r,a)=>({x:e+Math.cos(-Kg*a)*r,y:t+Math.sin(-Kg*a)*r}),YM=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},iJ=(e,t)=>{var{x:r,y:a}=e,{x:l,y:o}=t;return Math.sqrt((r-l)**2+(a-o)**2)},oJ=(e,t)=>{var{x:r,y:a}=e,{cx:l,cy:o}=t,d=iJ({x:r,y:a},{x:l,y:o});if(d<=0)return{radius:d,angle:0};var h=(r-l)/d,g=Math.acos(h);return a>o&&(g=2*Math.PI-g),{radius:d,angle:lJ(g),angleInRadian:g}},cJ=e=>{var{startAngle:t,endAngle:r}=e,a=Math.floor(t/360),l=Math.floor(r/360),o=Math.min(a,l);return{startAngle:t-o*360,endAngle:r-o*360}},uJ=(e,t)=>{var{startAngle:r,endAngle:a}=t,l=Math.floor(r/360),o=Math.floor(a/360),d=Math.min(l,o);return e+d*360},dJ=(e,t)=>{var{chartX:r,chartY:a}=e,{radius:l,angle:o}=oJ({x:r,y:a},t),{innerRadius:d,outerRadius:h}=t;if(l<d||l>h||l===0)return null;var{startAngle:g,endAngle:p}=cJ(t),x=o,E;if(g<=p){for(;x>p;)x-=360;for(;x<g;)x+=360;E=x>=g&&x<=p}else{for(;x>g;)x-=360;for(;x<p;)x+=360;E=x>=p&&x<=g}return E?i6(i6({},t),{},{radius:l,angle:uJ(x,t)}):null};function XM(e){var{cx:t,cy:r,radius:a,startAngle:l,endAngle:o}=e,d=ka(t,r,a,l),h=ka(t,r,a,o);return{points:[d,h],cx:t,cy:r,radius:a,startAngle:l,endAngle:o}}function qE(){return qE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},qE.apply(null,arguments)}var mJ=(e,t)=>{var r=Bn(t-e),a=Math.min(Math.abs(t-e),359.999);return r*a},Ah=e=>{var{cx:t,cy:r,radius:a,angle:l,sign:o,isExternal:d,cornerRadius:h,cornerIsExternal:g}=e,p=h*(d?1:-1)+a,x=Math.asin(h/p)/Kg,E=g?l:l+o*x,C=ka(t,r,p,E),O=ka(t,r,a,E),_=g?l-o*x:l,P=ka(t,r,p*Math.cos(x*Kg),_);return{center:C,circleTangency:O,lineTangency:P,theta:x}},WM=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:l,startAngle:o,endAngle:d}=e,h=mJ(o,d),g=o+h,p=ka(t,r,l,o),x=ka(t,r,l,g),E="M ".concat(p.x,",").concat(p.y,`
    A `).concat(l,",").concat(l,`,0,
    `).concat(+(Math.abs(h)>180),",").concat(+(o>g),`,
    `).concat(x.x,",").concat(x.y,`
  `);if(a>0){var C=ka(t,r,a,o),O=ka(t,r,a,g);E+="L ".concat(O.x,",").concat(O.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(h)>180),",").concat(+(o<=g),`,
            `).concat(C.x,",").concat(C.y," Z")}else E+="L ".concat(t,",").concat(r," Z");return E},fJ=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:l,cornerRadius:o,forceCornerRadius:d,cornerIsExternal:h,startAngle:g,endAngle:p}=e,x=Bn(p-g),{circleTangency:E,lineTangency:C,theta:O}=Ah({cx:t,cy:r,radius:l,angle:g,sign:x,cornerRadius:o,cornerIsExternal:h}),{circleTangency:_,lineTangency:P,theta:k}=Ah({cx:t,cy:r,radius:l,angle:p,sign:-x,cornerRadius:o,cornerIsExternal:h}),I=h?Math.abs(g-p):Math.abs(g-p)-O-k;if(I<0)return d?"M ".concat(C.x,",").concat(C.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):WM({cx:t,cy:r,innerRadius:a,outerRadius:l,startAngle:g,endAngle:p});var F="M ".concat(C.x,",").concat(C.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(x<0),",").concat(E.x,",").concat(E.y,`
    A`).concat(l,",").concat(l,",0,").concat(+(I>180),",").concat(+(x<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(x<0),",").concat(P.x,",").concat(P.y,`
  `);if(a>0){var{circleTangency:R,lineTangency:Y,theta:j}=Ah({cx:t,cy:r,radius:a,angle:g,sign:x,isExternal:!0,cornerRadius:o,cornerIsExternal:h}),{circleTangency:z,lineTangency:L,theta:q}=Ah({cx:t,cy:r,radius:a,angle:p,sign:-x,isExternal:!0,cornerRadius:o,cornerIsExternal:h}),V=h?Math.abs(g-p):Math.abs(g-p)-j-q;if(V<0&&o===0)return"".concat(F,"L").concat(t,",").concat(r,"Z");F+="L".concat(L.x,",").concat(L.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(x<0),",").concat(z.x,",").concat(z.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(V>180),",").concat(+(x>0),",").concat(R.x,",").concat(R.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(x<0),",").concat(Y.x,",").concat(Y.y,"Z")}else F+="L".concat(t,",").concat(r,"Z");return F},hJ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},KM=e=>{var t=js(e,hJ),{cx:r,cy:a,innerRadius:l,outerRadius:o,cornerRadius:d,forceCornerRadius:h,cornerIsExternal:g,startAngle:p,endAngle:x,className:E}=t;if(o<l||p===x)return null;var C=ba("recharts-sector",E),O=o-l,_=ls(d,O,0,!0),P;return _>0&&Math.abs(p-x)<360?P=fJ({cx:r,cy:a,innerRadius:l,outerRadius:o,cornerRadius:Math.min(_,O/2),forceCornerRadius:h,cornerIsExternal:g,startAngle:p,endAngle:x}):P=WM({cx:r,cy:a,innerRadius:l,outerRadius:o,startAngle:p,endAngle:x}),N.createElement("path",qE({},Rs(t),{className:C,d:P}))};function gJ(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(DP(t)){if(e==="centric"){var{cx:a,cy:l,innerRadius:o,outerRadius:d,angle:h}=t,g=ka(a,l,o,h),p=ka(a,l,d,h);return[{x:g.x,y:g.y},{x:p.x,y:p.y}]}return XM(t)}}var Kb={},Zb={},Qb={},o6;function pJ(){return o6||(o6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HP();function r(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=r})(Qb)),Qb}var c6;function yJ(){return c6||(c6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pJ();function r(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=r})(Zb)),Zb}var u6;function xJ(){return u6||(u6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$P(),r=yJ();function a(l,o,d){d&&typeof d!="number"&&t.isIterateeCall(l,o,d)&&(o=d=void 0),l=r.toFinite(l),o===void 0?(o=l,l=0):o=r.toFinite(o),d=d===void 0?l<o?1:-1:r.toFinite(d);const h=Math.max(Math.ceil((o-l)/(d||1)),0),g=new Array(h);for(let p=0;p<h;p++)g[p]=l,l+=d;return g}e.range=a})(Kb)),Kb}var Jb,d6;function bJ(){return d6||(d6=1,Jb=xJ().range),Jb}var vJ=bJ();const ZM=Bl(vJ);function _o(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function EJ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Rw(e){let t,r,a;e.length!==2?(t=_o,r=(h,g)=>_o(e(h),g),a=(h,g)=>e(h)-g):(t=e===_o||e===EJ?e:wJ,r=e,a=e);function l(h,g,p=0,x=h.length){if(p<x){if(t(g,g)!==0)return x;do{const E=p+x>>>1;r(h[E],g)<0?p=E+1:x=E}while(p<x)}return p}function o(h,g,p=0,x=h.length){if(p<x){if(t(g,g)!==0)return x;do{const E=p+x>>>1;r(h[E],g)<=0?p=E+1:x=E}while(p<x)}return p}function d(h,g,p=0,x=h.length){const E=l(h,g,p,x-1);return E>p&&a(h[E-1],g)>-a(h[E],g)?E-1:E}return{left:l,center:d,right:o}}function wJ(){return 0}function QM(e){return e===null?NaN:+e}function*NJ(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const SJ=Rw(_o),Pf=SJ.right;Rw(QM).center;class m6 extends Map{constructor(t,r=TJ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,l]of t)this.set(a,l)}get(t){return super.get(f6(this,t))}has(t){return super.has(f6(this,t))}set(t,r){return super.set(CJ(this,t),r)}delete(t){return super.delete(AJ(this,t))}}function f6({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function CJ({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function AJ({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function TJ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function OJ(e=_o){if(e===_o)return JM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function JM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const _J=Math.sqrt(50),DJ=Math.sqrt(10),kJ=Math.sqrt(2);function Zg(e,t,r){const a=(t-e)/Math.max(0,r),l=Math.floor(Math.log10(a)),o=a/Math.pow(10,l),d=o>=_J?10:o>=DJ?5:o>=kJ?2:1;let h,g,p;return l<0?(p=Math.pow(10,-l)/d,h=Math.round(e*p),g=Math.round(t*p),h/p<e&&++h,g/p>t&&--g,p=-p):(p=Math.pow(10,l)*d,h=Math.round(e/p),g=Math.round(t/p),h*p<e&&++h,g*p>t&&--g),g<h&&.5<=r&&r<2?Zg(e,t,r*2):[h,g,p]}function GE(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[l,o,d]=a?Zg(t,e,r):Zg(e,t,r);if(!(o>=l))return[];const h=o-l+1,g=new Array(h);if(a)if(d<0)for(let p=0;p<h;++p)g[p]=(o-p)/-d;else for(let p=0;p<h;++p)g[p]=(o-p)*d;else if(d<0)for(let p=0;p<h;++p)g[p]=(l+p)/-d;else for(let p=0;p<h;++p)g[p]=(l+p)*d;return g}function YE(e,t,r){return t=+t,e=+e,r=+r,Zg(e,t,r)[2]}function XE(e,t,r){t=+t,e=+e,r=+r;const a=t<e,l=a?YE(t,e,r):YE(e,t,r);return(a?-1:1)*(l<0?1/-l:l)}function h6(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function g6(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function e7(e,t,r=0,a=1/0,l){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(l=l===void 0?JM:OJ(l);a>r;){if(a-r>600){const g=a-r+1,p=t-r+1,x=Math.log(g),E=.5*Math.exp(2*x/3),C=.5*Math.sqrt(x*E*(g-E)/g)*(p-g/2<0?-1:1),O=Math.max(r,Math.floor(t-p*E/g+C)),_=Math.min(a,Math.floor(t+(g-p)*E/g+C));e7(e,t,O,_,l)}const o=e[t];let d=r,h=a;for(Nm(e,r,t),l(e[a],o)>0&&Nm(e,r,a);d<h;){for(Nm(e,d,h),++d,--h;l(e[d],o)<0;)++d;for(;l(e[h],o)>0;)--h}l(e[r],o)===0?Nm(e,r,h):(++h,Nm(e,h,a)),h<=t&&(r=h+1),t<=h&&(a=h-1)}return e}function Nm(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function PJ(e,t,r){if(e=Float64Array.from(NJ(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return g6(e);if(t>=1)return h6(e);var a,l=(a-1)*t,o=Math.floor(l),d=h6(e7(e,o).subarray(0,o+1)),h=g6(e.subarray(o+1));return d+(h-d)*(l-o)}}function MJ(e,t,r=QM){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,l=(a-1)*t,o=Math.floor(l),d=+r(e[o],o,e),h=+r(e[o+1],o+1,e);return d+(h-d)*(l-o)}}function IJ(e,t,r){e=+e,t=+t,r=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+r;for(var a=-1,l=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(l);++a<l;)o[a]=e+a*r;return o}function zs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Pi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const WE=Symbol("implicit");function Lw(){var e=new m6,t=[],r=[],a=WE;function l(o){let d=e.get(o);if(d===void 0){if(a!==WE)return a;e.set(o,d=t.push(o)-1)}return r[d%r.length]}return l.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new m6;for(const d of o)e.has(d)||e.set(d,t.push(d)-1);return l},l.range=function(o){return arguments.length?(r=Array.from(o),l):r.slice()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return Lw(t,r).unknown(a)},zs.apply(l,arguments),l}function Bw(){var e=Lw().unknown(void 0),t=e.domain,r=e.range,a=0,l=1,o,d,h=!1,g=0,p=0,x=.5;delete e.unknown;function E(){var C=t().length,O=l<a,_=O?l:a,P=O?a:l;o=(P-_)/Math.max(1,C-g+p*2),h&&(o=Math.floor(o)),_+=(P-_-o*(C-g))*x,d=o*(1-g),h&&(_=Math.round(_),d=Math.round(d));var k=IJ(C).map(function(I){return _+o*I});return r(O?k.reverse():k)}return e.domain=function(C){return arguments.length?(t(C),E()):t()},e.range=function(C){return arguments.length?([a,l]=C,a=+a,l=+l,E()):[a,l]},e.rangeRound=function(C){return[a,l]=C,a=+a,l=+l,h=!0,E()},e.bandwidth=function(){return d},e.step=function(){return o},e.round=function(C){return arguments.length?(h=!!C,E()):h},e.padding=function(C){return arguments.length?(g=Math.min(1,p=+C),E()):g},e.paddingInner=function(C){return arguments.length?(g=Math.min(1,C),E()):g},e.paddingOuter=function(C){return arguments.length?(p=+C,E()):p},e.align=function(C){return arguments.length?(x=Math.max(0,Math.min(1,C)),E()):x},e.copy=function(){return Bw(t(),[a,l]).round(h).paddingInner(g).paddingOuter(p).align(x)},zs.apply(E(),arguments)}function t7(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t7(t())},e}function RJ(){return t7(Bw.apply(null,arguments).paddingInner(1))}function Fw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function r7(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function Mf(){}var lf=.7,Qg=1/lf,qu="\\s*([+-]?\\d+)\\s*",of="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",LJ=/^#([0-9a-f]{3,8})$/,BJ=new RegExp(`^rgb\\(${qu},${qu},${qu}\\)$`),FJ=new RegExp(`^rgb\\(${Pl},${Pl},${Pl}\\)$`),UJ=new RegExp(`^rgba\\(${qu},${qu},${qu},${of}\\)$`),jJ=new RegExp(`^rgba\\(${Pl},${Pl},${Pl},${of}\\)$`),zJ=new RegExp(`^hsl\\(${of},${Pl},${Pl}\\)$`),VJ=new RegExp(`^hsla\\(${of},${Pl},${Pl},${of}\\)$`),p6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fw(Mf,cf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:y6,formatHex:y6,formatHex8:HJ,formatHsl:$J,formatRgb:x6,toString:x6});function y6(){return this.rgb().formatHex()}function HJ(){return this.rgb().formatHex8()}function $J(){return a7(this).formatHsl()}function x6(){return this.rgb().formatRgb()}function cf(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=LJ.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?b6(t):r===3?new Fn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Th(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Th(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=BJ.exec(e))?new Fn(t[1],t[2],t[3],1):(t=FJ.exec(e))?new Fn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=UJ.exec(e))?Th(t[1],t[2],t[3],t[4]):(t=jJ.exec(e))?Th(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=zJ.exec(e))?w6(t[1],t[2]/100,t[3]/100,1):(t=VJ.exec(e))?w6(t[1],t[2]/100,t[3]/100,t[4]):p6.hasOwnProperty(e)?b6(p6[e]):e==="transparent"?new Fn(NaN,NaN,NaN,0):null}function b6(e){return new Fn(e>>16&255,e>>8&255,e&255,1)}function Th(e,t,r,a){return a<=0&&(e=t=r=NaN),new Fn(e,t,r,a)}function qJ(e){return e instanceof Mf||(e=cf(e)),e?(e=e.rgb(),new Fn(e.r,e.g,e.b,e.opacity)):new Fn}function KE(e,t,r,a){return arguments.length===1?qJ(e):new Fn(e,t,r,a??1)}function Fn(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}Fw(Fn,KE,r7(Mf,{brighter(e){return e=e==null?Qg:Math.pow(Qg,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?lf:Math.pow(lf,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fn(kc(this.r),kc(this.g),kc(this.b),Jg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:v6,formatHex:v6,formatHex8:GJ,formatRgb:E6,toString:E6}));function v6(){return`#${Sc(this.r)}${Sc(this.g)}${Sc(this.b)}`}function GJ(){return`#${Sc(this.r)}${Sc(this.g)}${Sc(this.b)}${Sc((isNaN(this.opacity)?1:this.opacity)*255)}`}function E6(){const e=Jg(this.opacity);return`${e===1?"rgb(":"rgba("}${kc(this.r)}, ${kc(this.g)}, ${kc(this.b)}${e===1?")":`, ${e})`}`}function Jg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function kc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Sc(e){return e=kc(e),(e<16?"0":"")+e.toString(16)}function w6(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new nl(e,t,r,a)}function a7(e){if(e instanceof nl)return new nl(e.h,e.s,e.l,e.opacity);if(e instanceof Mf||(e=cf(e)),!e)return new nl;if(e instanceof nl)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,l=Math.min(t,r,a),o=Math.max(t,r,a),d=NaN,h=o-l,g=(o+l)/2;return h?(t===o?d=(r-a)/h+(r<a)*6:r===o?d=(a-t)/h+2:d=(t-r)/h+4,h/=g<.5?o+l:2-o-l,d*=60):h=g>0&&g<1?0:d,new nl(d,h,g,e.opacity)}function YJ(e,t,r,a){return arguments.length===1?a7(e):new nl(e,t,r,a??1)}function nl(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}Fw(nl,YJ,r7(Mf,{brighter(e){return e=e==null?Qg:Math.pow(Qg,e),new nl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?lf:Math.pow(lf,e),new nl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,l=2*r-a;return new Fn(ev(e>=240?e-240:e+120,l,a),ev(e,l,a),ev(e<120?e+240:e-120,l,a),this.opacity)},clamp(){return new nl(N6(this.h),Oh(this.s),Oh(this.l),Jg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Jg(this.opacity);return`${e===1?"hsl(":"hsla("}${N6(this.h)}, ${Oh(this.s)*100}%, ${Oh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function N6(e){return e=(e||0)%360,e<0?e+360:e}function Oh(e){return Math.max(0,Math.min(1,e||0))}function ev(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Uw=e=>()=>e;function XJ(e,t){return function(r){return e+r*t}}function WJ(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function KJ(e){return(e=+e)==1?n7:function(t,r){return r-t?WJ(t,r,e):Uw(isNaN(t)?r:t)}}function n7(e,t){var r=t-e;return r?XJ(e,r):Uw(isNaN(e)?t:e)}const S6=(function e(t){var r=KJ(t);function a(l,o){var d=r((l=KE(l)).r,(o=KE(o)).r),h=r(l.g,o.g),g=r(l.b,o.b),p=n7(l.opacity,o.opacity);return function(x){return l.r=d(x),l.g=h(x),l.b=g(x),l.opacity=p(x),l+""}}return a.gamma=e,a})(1);function ZJ(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),l;return function(o){for(l=0;l<r;++l)a[l]=e[l]*(1-o)+t[l]*o;return a}}function QJ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function JJ(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,l=new Array(a),o=new Array(r),d;for(d=0;d<a;++d)l[d]=xd(e[d],t[d]);for(;d<r;++d)o[d]=t[d];return function(h){for(d=0;d<a;++d)o[d]=l[d](h);return o}}function eee(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function ep(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function tee(e,t){var r={},a={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?r[l]=xd(e[l],t[l]):a[l]=t[l];return function(o){for(l in r)a[l]=r[l](o);return a}}var ZE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tv=new RegExp(ZE.source,"g");function ree(e){return function(){return e}}function aee(e){return function(t){return e(t)+""}}function nee(e,t){var r=ZE.lastIndex=tv.lastIndex=0,a,l,o,d=-1,h=[],g=[];for(e=e+"",t=t+"";(a=ZE.exec(e))&&(l=tv.exec(t));)(o=l.index)>r&&(o=t.slice(r,o),h[d]?h[d]+=o:h[++d]=o),(a=a[0])===(l=l[0])?h[d]?h[d]+=l:h[++d]=l:(h[++d]=null,g.push({i:d,x:ep(a,l)})),r=tv.lastIndex;return r<t.length&&(o=t.slice(r),h[d]?h[d]+=o:h[++d]=o),h.length<2?g[0]?aee(g[0].x):ree(t):(t=g.length,function(p){for(var x=0,E;x<t;++x)h[(E=g[x]).i]=E.x(p);return h.join("")})}function xd(e,t){var r=typeof t,a;return t==null||r==="boolean"?Uw(t):(r==="number"?ep:r==="string"?(a=cf(t))?(t=a,S6):nee:t instanceof cf?S6:t instanceof Date?eee:QJ(t)?ZJ:Array.isArray(t)?JJ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?tee:ep)(e,t)}function jw(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function see(e,t){t===void 0&&(t=e,e=xd);for(var r=0,a=t.length-1,l=t[0],o=new Array(a<0?0:a);r<a;)o[r]=e(l,l=t[++r]);return function(d){var h=Math.max(0,Math.min(a-1,Math.floor(d*=a)));return o[h](d-h)}}function lee(e){return function(){return e}}function tp(e){return+e}var C6=[0,1];function En(e){return e}function QE(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:lee(isNaN(t)?NaN:.5)}function iee(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function oee(e,t,r){var a=e[0],l=e[1],o=t[0],d=t[1];return l<a?(a=QE(l,a),o=r(d,o)):(a=QE(a,l),o=r(o,d)),function(h){return o(a(h))}}function cee(e,t,r){var a=Math.min(e.length,t.length)-1,l=new Array(a),o=new Array(a),d=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++d<a;)l[d]=QE(e[d],e[d+1]),o[d]=r(t[d],t[d+1]);return function(h){var g=Pf(e,h,1,a)-1;return o[g](l[g](h))}}function If(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function n1(){var e=C6,t=C6,r=xd,a,l,o,d=En,h,g,p;function x(){var C=Math.min(e.length,t.length);return d!==En&&(d=iee(e[0],e[C-1])),h=C>2?cee:oee,g=p=null,E}function E(C){return C==null||isNaN(C=+C)?o:(g||(g=h(e.map(a),t,r)))(a(d(C)))}return E.invert=function(C){return d(l((p||(p=h(t,e.map(a),ep)))(C)))},E.domain=function(C){return arguments.length?(e=Array.from(C,tp),x()):e.slice()},E.range=function(C){return arguments.length?(t=Array.from(C),x()):t.slice()},E.rangeRound=function(C){return t=Array.from(C),r=jw,x()},E.clamp=function(C){return arguments.length?(d=C?!0:En,x()):d!==En},E.interpolate=function(C){return arguments.length?(r=C,x()):r},E.unknown=function(C){return arguments.length?(o=C,E):o},function(C,O){return a=C,l=O,x()}}function zw(){return n1()(En,En)}function uee(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function rp(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function sd(e){return e=rp(Math.abs(e)),e?e[1]:NaN}function dee(e,t){return function(r,a){for(var l=r.length,o=[],d=0,h=e[0],g=0;l>0&&h>0&&(g+h+1>a&&(h=Math.max(1,a-g)),o.push(r.substring(l-=h,l+h)),!((g+=h+1)>a));)h=e[d=(d+1)%e.length];return o.reverse().join(t)}}function mee(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var fee=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function uf(e){if(!(t=fee.exec(e)))throw new Error("invalid format: "+e);var t;return new Vw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}uf.prototype=Vw.prototype;function Vw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Vw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hee(e){e:for(var t=e.length,r=1,a=-1,l;r<t;++r)switch(e[r]){case".":a=l=r;break;case"0":a===0&&(a=r),l=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(l+1):e}var s7;function gee(e,t){var r=rp(e,t);if(!r)return e+"";var a=r[0],l=r[1],o=l-(s7=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,d=a.length;return o===d?a:o>d?a+new Array(o-d+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+rp(e,Math.max(0,t+o-1))[0]}function A6(e,t){var r=rp(e,t);if(!r)return e+"";var a=r[0],l=r[1];return l<0?"0."+new Array(-l).join("0")+a:a.length>l+1?a.slice(0,l+1)+"."+a.slice(l+1):a+new Array(l-a.length+2).join("0")}const T6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:uee,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>A6(e*100,t),r:A6,s:gee,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function O6(e){return e}var _6=Array.prototype.map,D6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function pee(e){var t=e.grouping===void 0||e.thousands===void 0?O6:dee(_6.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?O6:mee(_6.call(e.numerals,String)),d=e.percent===void 0?"%":e.percent+"",h=e.minus===void 0?"":e.minus+"",g=e.nan===void 0?"NaN":e.nan+"";function p(E){E=uf(E);var C=E.fill,O=E.align,_=E.sign,P=E.symbol,k=E.zero,I=E.width,F=E.comma,R=E.precision,Y=E.trim,j=E.type;j==="n"?(F=!0,j="g"):T6[j]||(R===void 0&&(R=12),Y=!0,j="g"),(k||C==="0"&&O==="=")&&(k=!0,C="0",O="=");var z=P==="$"?r:P==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",L=P==="$"?a:/[%p]/.test(j)?d:"",q=T6[j],V=/[defgprs%]/.test(j);R=R===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,R)):Math.max(0,Math.min(20,R));function W(H){var $=z,ce=L,me,ae,J;if(j==="c")ce=q(H)+ce,H="";else{H=+H;var se=H<0||1/H<0;if(H=isNaN(H)?g:q(Math.abs(H),R),Y&&(H=hee(H)),se&&+H==0&&_!=="+"&&(se=!1),$=(se?_==="("?_:h:_==="-"||_==="("?"":_)+$,ce=(j==="s"?D6[8+s7/3]:"")+ce+(se&&_==="("?")":""),V){for(me=-1,ae=H.length;++me<ae;)if(J=H.charCodeAt(me),48>J||J>57){ce=(J===46?l+H.slice(me+1):H.slice(me))+ce,H=H.slice(0,me);break}}}F&&!k&&(H=t(H,1/0));var Ee=$.length+H.length+ce.length,we=Ee<I?new Array(I-Ee+1).join(C):"";switch(F&&k&&(H=t(we+H,we.length?I-ce.length:1/0),we=""),O){case"<":H=$+H+ce+we;break;case"=":H=$+we+H+ce;break;case"^":H=we.slice(0,Ee=we.length>>1)+$+H+ce+we.slice(Ee);break;default:H=we+$+H+ce;break}return o(H)}return W.toString=function(){return E+""},W}function x(E,C){var O=p((E=uf(E),E.type="f",E)),_=Math.max(-8,Math.min(8,Math.floor(sd(C)/3)))*3,P=Math.pow(10,-_),k=D6[8+_/3];return function(I){return O(P*I)+k}}return{format:p,formatPrefix:x}}var _h,Hw,l7;yee({thousands:",",grouping:[3],currency:["$",""]});function yee(e){return _h=pee(e),Hw=_h.format,l7=_h.formatPrefix,_h}function xee(e){return Math.max(0,-sd(Math.abs(e)))}function bee(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sd(t)/3)))*3-sd(Math.abs(e)))}function vee(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,sd(t)-sd(e))+1}function i7(e,t,r,a){var l=XE(e,t,r),o;switch(a=uf(a??",f"),a.type){case"s":{var d=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(o=bee(l,d))&&(a.precision=o),l7(a,d)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(o=vee(l,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=o-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(o=xee(l))&&(a.precision=o-(a.type==="%")*2);break}}return Hw(a)}function Fo(e){var t=e.domain;return e.ticks=function(r){var a=t();return GE(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var l=t();return i7(l[0],l[l.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),l=0,o=a.length-1,d=a[l],h=a[o],g,p,x=10;for(h<d&&(p=d,d=h,h=p,p=l,l=o,o=p);x-- >0;){if(p=YE(d,h,r),p===g)return a[l]=d,a[o]=h,t(a);if(p>0)d=Math.floor(d/p)*p,h=Math.ceil(h/p)*p;else if(p<0)d=Math.ceil(d*p)/p,h=Math.floor(h*p)/p;else break;g=p}return e},e}function o7(){var e=zw();return e.copy=function(){return If(e,o7())},zs.apply(e,arguments),Fo(e)}function c7(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,tp),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return c7(e).unknown(t)},e=arguments.length?Array.from(e,tp):[0,1],Fo(r)}function u7(e,t){e=e.slice();var r=0,a=e.length-1,l=e[r],o=e[a],d;return o<l&&(d=r,r=a,a=d,d=l,l=o,o=d),e[r]=t.floor(l),e[a]=t.ceil(o),e}function k6(e){return Math.log(e)}function P6(e){return Math.exp(e)}function Eee(e){return-Math.log(-e)}function wee(e){return-Math.exp(-e)}function Nee(e){return isFinite(e)?+("1e"+e):e<0?0:e}function See(e){return e===10?Nee:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Cee(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function M6(e){return(t,r)=>-e(-t,r)}function $w(e){const t=e(k6,P6),r=t.domain;let a=10,l,o;function d(){return l=Cee(a),o=See(a),r()[0]<0?(l=M6(l),o=M6(o),e(Eee,wee)):e(k6,P6),t}return t.base=function(h){return arguments.length?(a=+h,d()):a},t.domain=function(h){return arguments.length?(r(h),d()):r()},t.ticks=h=>{const g=r();let p=g[0],x=g[g.length-1];const E=x<p;E&&([p,x]=[x,p]);let C=l(p),O=l(x),_,P;const k=h==null?10:+h;let I=[];if(!(a%1)&&O-C<k){if(C=Math.floor(C),O=Math.ceil(O),p>0){for(;C<=O;++C)for(_=1;_<a;++_)if(P=C<0?_/o(-C):_*o(C),!(P<p)){if(P>x)break;I.push(P)}}else for(;C<=O;++C)for(_=a-1;_>=1;--_)if(P=C>0?_/o(-C):_*o(C),!(P<p)){if(P>x)break;I.push(P)}I.length*2<k&&(I=GE(p,x,k))}else I=GE(C,O,Math.min(O-C,k)).map(o);return E?I.reverse():I},t.tickFormat=(h,g)=>{if(h==null&&(h=10),g==null&&(g=a===10?"s":","),typeof g!="function"&&(!(a%1)&&(g=uf(g)).precision==null&&(g.trim=!0),g=Hw(g)),h===1/0)return g;const p=Math.max(1,a*h/t.ticks().length);return x=>{let E=x/o(Math.round(l(x)));return E*a<a-.5&&(E*=a),E<=p?g(x):""}},t.nice=()=>r(u7(r(),{floor:h=>o(Math.floor(l(h))),ceil:h=>o(Math.ceil(l(h)))})),t}function d7(){const e=$w(n1()).domain([1,10]);return e.copy=()=>If(e,d7()).base(e.base()),zs.apply(e,arguments),e}function I6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function R6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function qw(e){var t=1,r=e(I6(t),R6(t));return r.constant=function(a){return arguments.length?e(I6(t=+a),R6(t)):t},Fo(r)}function m7(){var e=qw(n1());return e.copy=function(){return If(e,m7()).constant(e.constant())},zs.apply(e,arguments)}function L6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Aee(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Tee(e){return e<0?-e*e:e*e}function Gw(e){var t=e(En,En),r=1;function a(){return r===1?e(En,En):r===.5?e(Aee,Tee):e(L6(r),L6(1/r))}return t.exponent=function(l){return arguments.length?(r=+l,a()):r},Fo(t)}function Yw(){var e=Gw(n1());return e.copy=function(){return If(e,Yw()).exponent(e.exponent())},zs.apply(e,arguments),e}function Oee(){return Yw.apply(null,arguments).exponent(.5)}function B6(e){return Math.sign(e)*e*e}function _ee(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function f7(){var e=zw(),t=[0,1],r=!1,a;function l(o){var d=_ee(e(o));return isNaN(d)?a:r?Math.round(d):d}return l.invert=function(o){return e.invert(B6(o))},l.domain=function(o){return arguments.length?(e.domain(o),l):e.domain()},l.range=function(o){return arguments.length?(e.range((t=Array.from(o,tp)).map(B6)),l):t.slice()},l.rangeRound=function(o){return l.range(o).round(!0)},l.round=function(o){return arguments.length?(r=!!o,l):r},l.clamp=function(o){return arguments.length?(e.clamp(o),l):e.clamp()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return f7(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},zs.apply(l,arguments),Fo(l)}function h7(){var e=[],t=[],r=[],a;function l(){var d=0,h=Math.max(1,t.length);for(r=new Array(h-1);++d<h;)r[d-1]=MJ(e,d/h);return o}function o(d){return d==null||isNaN(d=+d)?a:t[Pf(r,d)]}return o.invertExtent=function(d){var h=t.indexOf(d);return h<0?[NaN,NaN]:[h>0?r[h-1]:e[0],h<r.length?r[h]:e[e.length-1]]},o.domain=function(d){if(!arguments.length)return e.slice();e=[];for(let h of d)h!=null&&!isNaN(h=+h)&&e.push(h);return e.sort(_o),l()},o.range=function(d){return arguments.length?(t=Array.from(d),l()):t.slice()},o.unknown=function(d){return arguments.length?(a=d,o):a},o.quantiles=function(){return r.slice()},o.copy=function(){return h7().domain(e).range(t).unknown(a)},zs.apply(o,arguments)}function g7(){var e=0,t=1,r=1,a=[.5],l=[0,1],o;function d(g){return g!=null&&g<=g?l[Pf(a,g,0,r)]:o}function h(){var g=-1;for(a=new Array(r);++g<r;)a[g]=((g+1)*t-(g-r)*e)/(r+1);return d}return d.domain=function(g){return arguments.length?([e,t]=g,e=+e,t=+t,h()):[e,t]},d.range=function(g){return arguments.length?(r=(l=Array.from(g)).length-1,h()):l.slice()},d.invertExtent=function(g){var p=l.indexOf(g);return p<0?[NaN,NaN]:p<1?[e,a[0]]:p>=r?[a[r-1],t]:[a[p-1],a[p]]},d.unknown=function(g){return arguments.length&&(o=g),d},d.thresholds=function(){return a.slice()},d.copy=function(){return g7().domain([e,t]).range(l).unknown(o)},zs.apply(Fo(d),arguments)}function p7(){var e=[.5],t=[0,1],r,a=1;function l(o){return o!=null&&o<=o?t[Pf(e,o,0,a)]:r}return l.domain=function(o){return arguments.length?(e=Array.from(o),a=Math.min(e.length,t.length-1),l):e.slice()},l.range=function(o){return arguments.length?(t=Array.from(o),a=Math.min(e.length,t.length-1),l):t.slice()},l.invertExtent=function(o){var d=t.indexOf(o);return[e[d-1],e[d]]},l.unknown=function(o){return arguments.length?(r=o,l):r},l.copy=function(){return p7().domain(e).range(t).unknown(r)},zs.apply(l,arguments)}const rv=new Date,av=new Date;function za(e,t,r,a){function l(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return l.floor=o=>(e(o=new Date(+o)),o),l.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),l.round=o=>{const d=l(o),h=l.ceil(o);return o-d<h-o?d:h},l.offset=(o,d)=>(t(o=new Date(+o),d==null?1:Math.floor(d)),o),l.range=(o,d,h)=>{const g=[];if(o=l.ceil(o),h=h==null?1:Math.floor(h),!(o<d)||!(h>0))return g;let p;do g.push(p=new Date(+o)),t(o,h),e(o);while(p<o&&o<d);return g},l.filter=o=>za(d=>{if(d>=d)for(;e(d),!o(d);)d.setTime(d-1)},(d,h)=>{if(d>=d)if(h<0)for(;++h<=0;)for(;t(d,-1),!o(d););else for(;--h>=0;)for(;t(d,1),!o(d););}),r&&(l.count=(o,d)=>(rv.setTime(+o),av.setTime(+d),e(rv),e(av),Math.floor(r(rv,av))),l.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?l.filter(a?d=>a(d)%o===0:d=>l.count(0,d)%o===0):l)),l}const ap=za(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ap.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?za(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):ap);ap.range;const di=1e3,Ps=di*60,mi=Ps*60,Ci=mi*24,Xw=Ci*7,F6=Ci*30,nv=Ci*365,Cc=za(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*di)},(e,t)=>(t-e)/di,e=>e.getUTCSeconds());Cc.range;const Ww=za(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*di)},(e,t)=>{e.setTime(+e+t*Ps)},(e,t)=>(t-e)/Ps,e=>e.getMinutes());Ww.range;const Kw=za(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ps)},(e,t)=>(t-e)/Ps,e=>e.getUTCMinutes());Kw.range;const Zw=za(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*di-e.getMinutes()*Ps)},(e,t)=>{e.setTime(+e+t*mi)},(e,t)=>(t-e)/mi,e=>e.getHours());Zw.range;const Qw=za(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*mi)},(e,t)=>(t-e)/mi,e=>e.getUTCHours());Qw.range;const Rf=za(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ps)/Ci,e=>e.getDate()-1);Rf.range;const s1=za(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ci,e=>e.getUTCDate()-1);s1.range;const y7=za(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ci,e=>Math.floor(e/Ci));y7.range;function jc(e){return za(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ps)/Xw)}const l1=jc(0),np=jc(1),Dee=jc(2),kee=jc(3),ld=jc(4),Pee=jc(5),Mee=jc(6);l1.range;np.range;Dee.range;kee.range;ld.range;Pee.range;Mee.range;function zc(e){return za(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Xw)}const i1=zc(0),sp=zc(1),Iee=zc(2),Ree=zc(3),id=zc(4),Lee=zc(5),Bee=zc(6);i1.range;sp.range;Iee.range;Ree.range;id.range;Lee.range;Bee.range;const Jw=za(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Jw.range;const eN=za(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());eN.range;const Ai=za(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ai.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:za(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ai.range;const Ti=za(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ti.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:za(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ti.range;function x7(e,t,r,a,l,o){const d=[[Cc,1,di],[Cc,5,5*di],[Cc,15,15*di],[Cc,30,30*di],[o,1,Ps],[o,5,5*Ps],[o,15,15*Ps],[o,30,30*Ps],[l,1,mi],[l,3,3*mi],[l,6,6*mi],[l,12,12*mi],[a,1,Ci],[a,2,2*Ci],[r,1,Xw],[t,1,F6],[t,3,3*F6],[e,1,nv]];function h(p,x,E){const C=x<p;C&&([p,x]=[x,p]);const O=E&&typeof E.range=="function"?E:g(p,x,E),_=O?O.range(p,+x+1):[];return C?_.reverse():_}function g(p,x,E){const C=Math.abs(x-p)/E,O=Rw(([,,k])=>k).right(d,C);if(O===d.length)return e.every(XE(p/nv,x/nv,E));if(O===0)return ap.every(Math.max(XE(p,x,E),1));const[_,P]=d[C/d[O-1][2]<d[O][2]/C?O-1:O];return _.every(P)}return[h,g]}const[Fee,Uee]=x7(Ti,eN,i1,y7,Qw,Kw),[jee,zee]=x7(Ai,Jw,l1,Rf,Zw,Ww);function sv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function lv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Sm(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Vee(e){var t=e.dateTime,r=e.date,a=e.time,l=e.periods,o=e.days,d=e.shortDays,h=e.months,g=e.shortMonths,p=Cm(l),x=Am(l),E=Cm(o),C=Am(o),O=Cm(d),_=Am(d),P=Cm(h),k=Am(h),I=Cm(g),F=Am(g),R={a:se,A:Ee,b:we,B:te,c:null,d:$6,e:$6,f:dte,g:Ete,G:Nte,H:ote,I:cte,j:ute,L:b7,m:mte,M:fte,p:K,q:ee,Q:Y6,s:X6,S:hte,u:gte,U:pte,V:yte,w:xte,W:bte,x:null,X:null,y:vte,Y:wte,Z:Ste,"%":G6},Y={a:ge,A:le,b:Ce,B:ie,c:null,d:q6,e:q6,f:Ote,g:Fte,G:jte,H:Cte,I:Ate,j:Tte,L:E7,m:_te,M:Dte,p:de,q:$e,Q:Y6,s:X6,S:kte,u:Pte,U:Mte,V:Ite,w:Rte,W:Lte,x:null,X:null,y:Bte,Y:Ute,Z:zte,"%":G6},j={a:W,A:H,b:$,B:ce,c:me,d:V6,e:V6,f:nte,g:z6,G:j6,H:H6,I:H6,j:ete,L:ate,m:Jee,M:tte,p:V,q:Qee,Q:lte,s:ite,S:rte,u:Yee,U:Xee,V:Wee,w:Gee,W:Kee,x:ae,X:J,y:z6,Y:j6,Z:Zee,"%":ste};R.x=z(r,R),R.X=z(a,R),R.c=z(t,R),Y.x=z(r,Y),Y.X=z(a,Y),Y.c=z(t,Y);function z(be,Xe){return function(at){var Le=[],ve=-1,Ue=0,oe=be.length,qe,Ne,tt;for(at instanceof Date||(at=new Date(+at));++ve<oe;)be.charCodeAt(ve)===37&&(Le.push(be.slice(Ue,ve)),(Ne=U6[qe=be.charAt(++ve)])!=null?qe=be.charAt(++ve):Ne=qe==="e"?" ":"0",(tt=Xe[qe])&&(qe=tt(at,Ne)),Le.push(qe),Ue=ve+1);return Le.push(be.slice(Ue,ve)),Le.join("")}}function L(be,Xe){return function(at){var Le=Sm(1900,void 0,1),ve=q(Le,be,at+="",0),Ue,oe;if(ve!=at.length)return null;if("Q"in Le)return new Date(Le.Q);if("s"in Le)return new Date(Le.s*1e3+("L"in Le?Le.L:0));if(Xe&&!("Z"in Le)&&(Le.Z=0),"p"in Le&&(Le.H=Le.H%12+Le.p*12),Le.m===void 0&&(Le.m="q"in Le?Le.q:0),"V"in Le){if(Le.V<1||Le.V>53)return null;"w"in Le||(Le.w=1),"Z"in Le?(Ue=lv(Sm(Le.y,0,1)),oe=Ue.getUTCDay(),Ue=oe>4||oe===0?sp.ceil(Ue):sp(Ue),Ue=s1.offset(Ue,(Le.V-1)*7),Le.y=Ue.getUTCFullYear(),Le.m=Ue.getUTCMonth(),Le.d=Ue.getUTCDate()+(Le.w+6)%7):(Ue=sv(Sm(Le.y,0,1)),oe=Ue.getDay(),Ue=oe>4||oe===0?np.ceil(Ue):np(Ue),Ue=Rf.offset(Ue,(Le.V-1)*7),Le.y=Ue.getFullYear(),Le.m=Ue.getMonth(),Le.d=Ue.getDate()+(Le.w+6)%7)}else("W"in Le||"U"in Le)&&("w"in Le||(Le.w="u"in Le?Le.u%7:"W"in Le?1:0),oe="Z"in Le?lv(Sm(Le.y,0,1)).getUTCDay():sv(Sm(Le.y,0,1)).getDay(),Le.m=0,Le.d="W"in Le?(Le.w+6)%7+Le.W*7-(oe+5)%7:Le.w+Le.U*7-(oe+6)%7);return"Z"in Le?(Le.H+=Le.Z/100|0,Le.M+=Le.Z%100,lv(Le)):sv(Le)}}function q(be,Xe,at,Le){for(var ve=0,Ue=Xe.length,oe=at.length,qe,Ne;ve<Ue;){if(Le>=oe)return-1;if(qe=Xe.charCodeAt(ve++),qe===37){if(qe=Xe.charAt(ve++),Ne=j[qe in U6?Xe.charAt(ve++):qe],!Ne||(Le=Ne(be,at,Le))<0)return-1}else if(qe!=at.charCodeAt(Le++))return-1}return Le}function V(be,Xe,at){var Le=p.exec(Xe.slice(at));return Le?(be.p=x.get(Le[0].toLowerCase()),at+Le[0].length):-1}function W(be,Xe,at){var Le=O.exec(Xe.slice(at));return Le?(be.w=_.get(Le[0].toLowerCase()),at+Le[0].length):-1}function H(be,Xe,at){var Le=E.exec(Xe.slice(at));return Le?(be.w=C.get(Le[0].toLowerCase()),at+Le[0].length):-1}function $(be,Xe,at){var Le=I.exec(Xe.slice(at));return Le?(be.m=F.get(Le[0].toLowerCase()),at+Le[0].length):-1}function ce(be,Xe,at){var Le=P.exec(Xe.slice(at));return Le?(be.m=k.get(Le[0].toLowerCase()),at+Le[0].length):-1}function me(be,Xe,at){return q(be,t,Xe,at)}function ae(be,Xe,at){return q(be,r,Xe,at)}function J(be,Xe,at){return q(be,a,Xe,at)}function se(be){return d[be.getDay()]}function Ee(be){return o[be.getDay()]}function we(be){return g[be.getMonth()]}function te(be){return h[be.getMonth()]}function K(be){return l[+(be.getHours()>=12)]}function ee(be){return 1+~~(be.getMonth()/3)}function ge(be){return d[be.getUTCDay()]}function le(be){return o[be.getUTCDay()]}function Ce(be){return g[be.getUTCMonth()]}function ie(be){return h[be.getUTCMonth()]}function de(be){return l[+(be.getUTCHours()>=12)]}function $e(be){return 1+~~(be.getUTCMonth()/3)}return{format:function(be){var Xe=z(be+="",R);return Xe.toString=function(){return be},Xe},parse:function(be){var Xe=L(be+="",!1);return Xe.toString=function(){return be},Xe},utcFormat:function(be){var Xe=z(be+="",Y);return Xe.toString=function(){return be},Xe},utcParse:function(be){var Xe=L(be+="",!0);return Xe.toString=function(){return be},Xe}}}var U6={"-":"",_:" ",0:"0"},Qa=/^\s*\d+/,Hee=/^%/,$ee=/[\\^$*+?|[\]().{}]/g;function ir(e,t,r){var a=e<0?"-":"",l=(a?-e:e)+"",o=l.length;return a+(o<r?new Array(r-o+1).join(t)+l:l)}function qee(e){return e.replace($ee,"\\$&")}function Cm(e){return new RegExp("^(?:"+e.map(qee).join("|")+")","i")}function Am(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Gee(e,t,r){var a=Qa.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function Yee(e,t,r){var a=Qa.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function Xee(e,t,r){var a=Qa.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function Wee(e,t,r){var a=Qa.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function Kee(e,t,r){var a=Qa.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function j6(e,t,r){var a=Qa.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function z6(e,t,r){var a=Qa.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function Zee(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function Qee(e,t,r){var a=Qa.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function Jee(e,t,r){var a=Qa.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function V6(e,t,r){var a=Qa.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function ete(e,t,r){var a=Qa.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function H6(e,t,r){var a=Qa.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function tte(e,t,r){var a=Qa.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function rte(e,t,r){var a=Qa.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function ate(e,t,r){var a=Qa.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function nte(e,t,r){var a=Qa.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function ste(e,t,r){var a=Hee.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function lte(e,t,r){var a=Qa.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function ite(e,t,r){var a=Qa.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function $6(e,t){return ir(e.getDate(),t,2)}function ote(e,t){return ir(e.getHours(),t,2)}function cte(e,t){return ir(e.getHours()%12||12,t,2)}function ute(e,t){return ir(1+Rf.count(Ai(e),e),t,3)}function b7(e,t){return ir(e.getMilliseconds(),t,3)}function dte(e,t){return b7(e,t)+"000"}function mte(e,t){return ir(e.getMonth()+1,t,2)}function fte(e,t){return ir(e.getMinutes(),t,2)}function hte(e,t){return ir(e.getSeconds(),t,2)}function gte(e){var t=e.getDay();return t===0?7:t}function pte(e,t){return ir(l1.count(Ai(e)-1,e),t,2)}function v7(e){var t=e.getDay();return t>=4||t===0?ld(e):ld.ceil(e)}function yte(e,t){return e=v7(e),ir(ld.count(Ai(e),e)+(Ai(e).getDay()===4),t,2)}function xte(e){return e.getDay()}function bte(e,t){return ir(np.count(Ai(e)-1,e),t,2)}function vte(e,t){return ir(e.getFullYear()%100,t,2)}function Ete(e,t){return e=v7(e),ir(e.getFullYear()%100,t,2)}function wte(e,t){return ir(e.getFullYear()%1e4,t,4)}function Nte(e,t){var r=e.getDay();return e=r>=4||r===0?ld(e):ld.ceil(e),ir(e.getFullYear()%1e4,t,4)}function Ste(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ir(t/60|0,"0",2)+ir(t%60,"0",2)}function q6(e,t){return ir(e.getUTCDate(),t,2)}function Cte(e,t){return ir(e.getUTCHours(),t,2)}function Ate(e,t){return ir(e.getUTCHours()%12||12,t,2)}function Tte(e,t){return ir(1+s1.count(Ti(e),e),t,3)}function E7(e,t){return ir(e.getUTCMilliseconds(),t,3)}function Ote(e,t){return E7(e,t)+"000"}function _te(e,t){return ir(e.getUTCMonth()+1,t,2)}function Dte(e,t){return ir(e.getUTCMinutes(),t,2)}function kte(e,t){return ir(e.getUTCSeconds(),t,2)}function Pte(e){var t=e.getUTCDay();return t===0?7:t}function Mte(e,t){return ir(i1.count(Ti(e)-1,e),t,2)}function w7(e){var t=e.getUTCDay();return t>=4||t===0?id(e):id.ceil(e)}function Ite(e,t){return e=w7(e),ir(id.count(Ti(e),e)+(Ti(e).getUTCDay()===4),t,2)}function Rte(e){return e.getUTCDay()}function Lte(e,t){return ir(sp.count(Ti(e)-1,e),t,2)}function Bte(e,t){return ir(e.getUTCFullYear()%100,t,2)}function Fte(e,t){return e=w7(e),ir(e.getUTCFullYear()%100,t,2)}function Ute(e,t){return ir(e.getUTCFullYear()%1e4,t,4)}function jte(e,t){var r=e.getUTCDay();return e=r>=4||r===0?id(e):id.ceil(e),ir(e.getUTCFullYear()%1e4,t,4)}function zte(){return"+0000"}function G6(){return"%"}function Y6(e){return+e}function X6(e){return Math.floor(+e/1e3)}var Cu,N7,S7;Vte({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Vte(e){return Cu=Vee(e),N7=Cu.format,Cu.parse,S7=Cu.utcFormat,Cu.utcParse,Cu}function Hte(e){return new Date(e)}function $te(e){return e instanceof Date?+e:+new Date(+e)}function tN(e,t,r,a,l,o,d,h,g,p){var x=zw(),E=x.invert,C=x.domain,O=p(".%L"),_=p(":%S"),P=p("%I:%M"),k=p("%I %p"),I=p("%a %d"),F=p("%b %d"),R=p("%B"),Y=p("%Y");function j(z){return(g(z)<z?O:h(z)<z?_:d(z)<z?P:o(z)<z?k:a(z)<z?l(z)<z?I:F:r(z)<z?R:Y)(z)}return x.invert=function(z){return new Date(E(z))},x.domain=function(z){return arguments.length?C(Array.from(z,$te)):C().map(Hte)},x.ticks=function(z){var L=C();return e(L[0],L[L.length-1],z??10)},x.tickFormat=function(z,L){return L==null?j:p(L)},x.nice=function(z){var L=C();return(!z||typeof z.range!="function")&&(z=t(L[0],L[L.length-1],z??10)),z?C(u7(L,z)):x},x.copy=function(){return If(x,tN(e,t,r,a,l,o,d,h,g,p))},x}function qte(){return zs.apply(tN(jee,zee,Ai,Jw,l1,Rf,Zw,Ww,Cc,N7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Gte(){return zs.apply(tN(Fee,Uee,Ti,eN,i1,s1,Qw,Kw,Cc,S7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function o1(){var e=0,t=1,r,a,l,o,d=En,h=!1,g;function p(E){return E==null||isNaN(E=+E)?g:d(l===0?.5:(E=(o(E)-r)*l,h?Math.max(0,Math.min(1,E)):E))}p.domain=function(E){return arguments.length?([e,t]=E,r=o(e=+e),a=o(t=+t),l=r===a?0:1/(a-r),p):[e,t]},p.clamp=function(E){return arguments.length?(h=!!E,p):h},p.interpolator=function(E){return arguments.length?(d=E,p):d};function x(E){return function(C){var O,_;return arguments.length?([O,_]=C,d=E(O,_),p):[d(0),d(1)]}}return p.range=x(xd),p.rangeRound=x(jw),p.unknown=function(E){return arguments.length?(g=E,p):g},function(E){return o=E,r=E(e),a=E(t),l=r===a?0:1/(a-r),p}}function Uo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function C7(){var e=Fo(o1()(En));return e.copy=function(){return Uo(e,C7())},Pi.apply(e,arguments)}function A7(){var e=$w(o1()).domain([1,10]);return e.copy=function(){return Uo(e,A7()).base(e.base())},Pi.apply(e,arguments)}function T7(){var e=qw(o1());return e.copy=function(){return Uo(e,T7()).constant(e.constant())},Pi.apply(e,arguments)}function rN(){var e=Gw(o1());return e.copy=function(){return Uo(e,rN()).exponent(e.exponent())},Pi.apply(e,arguments)}function Yte(){return rN.apply(null,arguments).exponent(.5)}function O7(){var e=[],t=En;function r(a){if(a!=null&&!isNaN(a=+a))return t((Pf(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let l of a)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(_o),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,l)=>t(l/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(l,o)=>PJ(e,o/a))},r.copy=function(){return O7(t).domain(e)},Pi.apply(r,arguments)}function c1(){var e=0,t=.5,r=1,a=1,l,o,d,h,g,p=En,x,E=!1,C;function O(P){return isNaN(P=+P)?C:(P=.5+((P=+x(P))-o)*(a*P<a*o?h:g),p(E?Math.max(0,Math.min(1,P)):P))}O.domain=function(P){return arguments.length?([e,t,r]=P,l=x(e=+e),o=x(t=+t),d=x(r=+r),h=l===o?0:.5/(o-l),g=o===d?0:.5/(d-o),a=o<l?-1:1,O):[e,t,r]},O.clamp=function(P){return arguments.length?(E=!!P,O):E},O.interpolator=function(P){return arguments.length?(p=P,O):p};function _(P){return function(k){var I,F,R;return arguments.length?([I,F,R]=k,p=see(P,[I,F,R]),O):[p(0),p(.5),p(1)]}}return O.range=_(xd),O.rangeRound=_(jw),O.unknown=function(P){return arguments.length?(C=P,O):C},function(P){return x=P,l=P(e),o=P(t),d=P(r),h=l===o?0:.5/(o-l),g=o===d?0:.5/(d-o),a=o<l?-1:1,O}}function _7(){var e=Fo(c1()(En));return e.copy=function(){return Uo(e,_7())},Pi.apply(e,arguments)}function D7(){var e=$w(c1()).domain([.1,1,10]);return e.copy=function(){return Uo(e,D7()).base(e.base())},Pi.apply(e,arguments)}function k7(){var e=qw(c1());return e.copy=function(){return Uo(e,k7()).constant(e.constant())},Pi.apply(e,arguments)}function aN(){var e=Gw(c1());return e.copy=function(){return Uo(e,aN()).exponent(e.exponent())},Pi.apply(e,arguments)}function Xte(){return aN.apply(null,arguments).exponent(.5)}const Im=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Bw,scaleDiverging:_7,scaleDivergingLog:D7,scaleDivergingPow:aN,scaleDivergingSqrt:Xte,scaleDivergingSymlog:k7,scaleIdentity:c7,scaleImplicit:WE,scaleLinear:o7,scaleLog:d7,scaleOrdinal:Lw,scalePoint:RJ,scalePow:Yw,scaleQuantile:h7,scaleQuantize:g7,scaleRadial:f7,scaleSequential:C7,scaleSequentialLog:A7,scaleSequentialPow:rN,scaleSequentialQuantile:O7,scaleSequentialSqrt:Yte,scaleSequentialSymlog:T7,scaleSqrt:Oee,scaleSymlog:m7,scaleThreshold:p7,scaleTime:qte,scaleUtc:Gte,tickFormat:i7},Symbol.toStringTag,{value:"Module"}));var jo=e=>e.chartData,nN=Me([jo],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),P7=(e,t,r,a)=>a?nN(e):jo(e);function Io(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Ka(t)&&Ka(r))return!0}return!1}function W6(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function M7(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,a]=e,l,o;if(Ka(r))l=r;else if(typeof r=="function")return;if(Ka(a))o=a;else if(typeof a=="function")return;var d=[l,o];if(Io(d))return d}}function Wte(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,r);if(Io(a))return W6(a,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[l,o]=e,d,h;if(l==="auto")t!=null&&(d=Math.min(...t));else if(Mt(l))d=l;else if(typeof l=="function")try{t!=null&&(d=l(t?.[0]))}catch{}else if(typeof l=="string"&&ET.test(l)){var g=ET.exec(l);if(g==null||t==null)d=void 0;else{var p=+g[1];d=t[0]-p}}else d=t?.[0];if(o==="auto")t!=null&&(h=Math.max(...t));else if(Mt(o))h=o;else if(typeof o=="function")try{t!=null&&(h=o(t?.[1]))}catch{}else if(typeof o=="string"&&wT.test(o)){var x=wT.exec(o);if(x==null||t==null)h=void 0;else{var E=+x[1];h=t[1]+E}}else h=t?.[1];var C=[d,h];if(Io(C))return t==null?C:W6(C,t,r)}}}var bd=1e9,Kte={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},lN,Kr=!0,Bs="[DecimalError] ",Pc=Bs+"Invalid argument: ",sN=Bs+"Exponent out of range: ",vd=Math.floor,bc=Math.pow,Zte=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,as,Xa=1e7,Hr=7,I7=9007199254740991,lp=vd(I7/Hr),ft={};ft.absoluteValue=ft.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ft.comparedTo=ft.cmp=function(e){var t,r,a,l,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(a=o.d.length,l=e.d.length,t=0,r=a<l?a:l;t<r;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return a===l?0:a>l^o.s<0?1:-1};ft.decimalPlaces=ft.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Hr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ft.dividedBy=ft.div=function(e){return gi(this,new this.constructor(e))};ft.dividedToIntegerBy=ft.idiv=function(e){var t=this,r=t.constructor;return Dr(gi(t,new r(e),0,1),r.precision)};ft.equals=ft.eq=function(e){return!this.cmp(e)};ft.exponent=function(){return Ma(this)};ft.greaterThan=ft.gt=function(e){return this.cmp(e)>0};ft.greaterThanOrEqualTo=ft.gte=function(e){return this.cmp(e)>=0};ft.isInteger=ft.isint=function(){return this.e>this.d.length-2};ft.isNegative=ft.isneg=function(){return this.s<0};ft.isPositive=ft.ispos=function(){return this.s>0};ft.isZero=function(){return this.s===0};ft.lessThan=ft.lt=function(e){return this.cmp(e)<0};ft.lessThanOrEqualTo=ft.lte=function(e){return this.cmp(e)<1};ft.logarithm=ft.log=function(e){var t,r=this,a=r.constructor,l=a.precision,o=l+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(as))throw Error(Bs+"NaN");if(r.s<1)throw Error(Bs+(r.s?"NaN":"-Infinity"));return r.eq(as)?new a(0):(Kr=!1,t=gi(df(r,o),df(e,o),o),Kr=!0,Dr(t,l))};ft.minus=ft.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?B7(t,e):R7(t,(e.s=-e.s,e))};ft.modulo=ft.mod=function(e){var t,r=this,a=r.constructor,l=a.precision;if(e=new a(e),!e.s)throw Error(Bs+"NaN");return r.s?(Kr=!1,t=gi(r,e,0,1).times(e),Kr=!0,r.minus(t)):Dr(new a(r),l)};ft.naturalExponential=ft.exp=function(){return L7(this)};ft.naturalLogarithm=ft.ln=function(){return df(this)};ft.negated=ft.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ft.plus=ft.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?R7(t,e):B7(t,(e.s=-e.s,e))};ft.precision=ft.sd=function(e){var t,r,a,l=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Pc+e);if(t=Ma(l)+1,a=l.d.length-1,r=a*Hr+1,a=l.d[a],a){for(;a%10==0;a/=10)r--;for(a=l.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};ft.squareRoot=ft.sqrt=function(){var e,t,r,a,l,o,d,h=this,g=h.constructor;if(h.s<1){if(!h.s)return new g(0);throw Error(Bs+"NaN")}for(e=Ma(h),Kr=!1,l=Math.sqrt(+h),l==0||l==1/0?(t=Tl(h.d),(t.length+e)%2==0&&(t+="0"),l=Math.sqrt(t),e=vd((e+1)/2)-(e<0||e%2),l==1/0?t="5e"+e:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new g(t)):a=new g(l.toString()),r=g.precision,l=d=r+3;;)if(o=a,a=o.plus(gi(h,o,d+2)).times(.5),Tl(o.d).slice(0,d)===(t=Tl(a.d)).slice(0,d)){if(t=t.slice(d-3,d+1),l==d&&t=="4999"){if(Dr(o,r+1,0),o.times(o).eq(h)){a=o;break}}else if(t!="9999")break;d+=4}return Kr=!0,Dr(a,r)};ft.times=ft.mul=function(e){var t,r,a,l,o,d,h,g,p,x=this,E=x.constructor,C=x.d,O=(e=new E(e)).d;if(!x.s||!e.s)return new E(0);for(e.s*=x.s,r=x.e+e.e,g=C.length,p=O.length,g<p&&(o=C,C=O,O=o,d=g,g=p,p=d),o=[],d=g+p,a=d;a--;)o.push(0);for(a=p;--a>=0;){for(t=0,l=g+a;l>a;)h=o[l]+O[a]*C[l-a-1]+t,o[l--]=h%Xa|0,t=h/Xa|0;o[l]=(o[l]+t)%Xa|0}for(;!o[--d];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,Kr?Dr(e,E.precision):e};ft.toDecimalPlaces=ft.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(Ll(e,0,bd),t===void 0?t=a.rounding:Ll(t,0,8),Dr(r,e+Ma(r)+1,t))};ft.toExponential=function(e,t){var r,a=this,l=a.constructor;return e===void 0?r=Bc(a,!0):(Ll(e,0,bd),t===void 0?t=l.rounding:Ll(t,0,8),a=Dr(new l(a),e+1,t),r=Bc(a,!0,e+1)),r};ft.toFixed=function(e,t){var r,a,l=this,o=l.constructor;return e===void 0?Bc(l):(Ll(e,0,bd),t===void 0?t=o.rounding:Ll(t,0,8),a=Dr(new o(l),e+Ma(l)+1,t),r=Bc(a.abs(),!1,e+Ma(a)+1),l.isneg()&&!l.isZero()?"-"+r:r)};ft.toInteger=ft.toint=function(){var e=this,t=e.constructor;return Dr(new t(e),Ma(e)+1,t.rounding)};ft.toNumber=function(){return+this};ft.toPower=ft.pow=function(e){var t,r,a,l,o,d,h=this,g=h.constructor,p=12,x=+(e=new g(e));if(!e.s)return new g(as);if(h=new g(h),!h.s){if(e.s<1)throw Error(Bs+"Infinity");return h}if(h.eq(as))return h;if(a=g.precision,e.eq(as))return Dr(h,a);if(t=e.e,r=e.d.length-1,d=t>=r,o=h.s,d){if((r=x<0?-x:x)<=I7){for(l=new g(as),t=Math.ceil(a/Hr+4),Kr=!1;r%2&&(l=l.times(h),Z6(l.d,t)),r=vd(r/2),r!==0;)h=h.times(h),Z6(h.d,t);return Kr=!0,e.s<0?new g(as).div(l):Dr(l,a)}}else if(o<0)throw Error(Bs+"NaN");return o=o<0&&e.d[Math.max(t,r)]&1?-1:1,h.s=1,Kr=!1,l=e.times(df(h,a+p)),Kr=!0,l=L7(l),l.s=o,l};ft.toPrecision=function(e,t){var r,a,l=this,o=l.constructor;return e===void 0?(r=Ma(l),a=Bc(l,r<=o.toExpNeg||r>=o.toExpPos)):(Ll(e,1,bd),t===void 0?t=o.rounding:Ll(t,0,8),l=Dr(new o(l),e,t),r=Ma(l),a=Bc(l,e<=r||r<=o.toExpNeg,e)),a};ft.toSignificantDigits=ft.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Ll(e,1,bd),t===void 0?t=a.rounding:Ll(t,0,8)),Dr(new a(r),e,t)};ft.toString=ft.valueOf=ft.val=ft.toJSON=ft[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ma(e),r=e.constructor;return Bc(e,t<=r.toExpNeg||t>=r.toExpPos)};function R7(e,t){var r,a,l,o,d,h,g,p,x=e.constructor,E=x.precision;if(!e.s||!t.s)return t.s||(t=new x(e)),Kr?Dr(t,E):t;if(g=e.d,p=t.d,d=e.e,l=t.e,g=g.slice(),o=d-l,o){for(o<0?(a=g,o=-o,h=p.length):(a=p,l=d,h=g.length),d=Math.ceil(E/Hr),h=d>h?d+1:h+1,o>h&&(o=h,a.length=1),a.reverse();o--;)a.push(0);a.reverse()}for(h=g.length,o=p.length,h-o<0&&(o=h,a=p,p=g,g=a),r=0;o;)r=(g[--o]=g[o]+p[o]+r)/Xa|0,g[o]%=Xa;for(r&&(g.unshift(r),++l),h=g.length;g[--h]==0;)g.pop();return t.d=g,t.e=l,Kr?Dr(t,E):t}function Ll(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Pc+e)}function Tl(e){var t,r,a,l=e.length-1,o="",d=e[0];if(l>0){for(o+=d,t=1;t<l;t++)a=e[t]+"",r=Hr-a.length,r&&(o+=Co(r)),o+=a;d=e[t],a=d+"",r=Hr-a.length,r&&(o+=Co(r))}else if(d===0)return"0";for(;d%10===0;)d/=10;return o+d}var gi=(function(){function e(a,l){var o,d=0,h=a.length;for(a=a.slice();h--;)o=a[h]*l+d,a[h]=o%Xa|0,d=o/Xa|0;return d&&a.unshift(d),a}function t(a,l,o,d){var h,g;if(o!=d)g=o>d?1:-1;else for(h=g=0;h<o;h++)if(a[h]!=l[h]){g=a[h]>l[h]?1:-1;break}return g}function r(a,l,o){for(var d=0;o--;)a[o]-=d,d=a[o]<l[o]?1:0,a[o]=d*Xa+a[o]-l[o];for(;!a[0]&&a.length>1;)a.shift()}return function(a,l,o,d){var h,g,p,x,E,C,O,_,P,k,I,F,R,Y,j,z,L,q,V=a.constructor,W=a.s==l.s?1:-1,H=a.d,$=l.d;if(!a.s)return new V(a);if(!l.s)throw Error(Bs+"Division by zero");for(g=a.e-l.e,L=$.length,j=H.length,O=new V(W),_=O.d=[],p=0;$[p]==(H[p]||0);)++p;if($[p]>(H[p]||0)&&--g,o==null?F=o=V.precision:d?F=o+(Ma(a)-Ma(l))+1:F=o,F<0)return new V(0);if(F=F/Hr+2|0,p=0,L==1)for(x=0,$=$[0],F++;(p<j||x)&&F--;p++)R=x*Xa+(H[p]||0),_[p]=R/$|0,x=R%$|0;else{for(x=Xa/($[0]+1)|0,x>1&&($=e($,x),H=e(H,x),L=$.length,j=H.length),Y=L,P=H.slice(0,L),k=P.length;k<L;)P[k++]=0;q=$.slice(),q.unshift(0),z=$[0],$[1]>=Xa/2&&++z;do x=0,h=t($,P,L,k),h<0?(I=P[0],L!=k&&(I=I*Xa+(P[1]||0)),x=I/z|0,x>1?(x>=Xa&&(x=Xa-1),E=e($,x),C=E.length,k=P.length,h=t(E,P,C,k),h==1&&(x--,r(E,L<C?q:$,C))):(x==0&&(h=x=1),E=$.slice()),C=E.length,C<k&&E.unshift(0),r(P,E,k),h==-1&&(k=P.length,h=t($,P,L,k),h<1&&(x++,r(P,L<k?q:$,k))),k=P.length):h===0&&(x++,P=[0]),_[p++]=x,h&&P[0]?P[k++]=H[Y]||0:(P=[H[Y]],k=1);while((Y++<j||P[0]!==void 0)&&F--)}return _[0]||_.shift(),O.e=g,Dr(O,d?o+Ma(O)+1:o)}})();function L7(e,t){var r,a,l,o,d,h,g=0,p=0,x=e.constructor,E=x.precision;if(Ma(e)>16)throw Error(sN+Ma(e));if(!e.s)return new x(as);for(Kr=!1,h=E,d=new x(.03125);e.abs().gte(.1);)e=e.times(d),p+=5;for(a=Math.log(bc(2,p))/Math.LN10*2+5|0,h+=a,r=l=o=new x(as),x.precision=h;;){if(l=Dr(l.times(e),h),r=r.times(++g),d=o.plus(gi(l,r,h)),Tl(d.d).slice(0,h)===Tl(o.d).slice(0,h)){for(;p--;)o=Dr(o.times(o),h);return x.precision=E,t==null?(Kr=!0,Dr(o,E)):o}o=d}}function Ma(e){for(var t=e.e*Hr,r=e.d[0];r>=10;r/=10)t++;return t}function iv(e,t,r){if(t>e.LN10.sd())throw Kr=!0,r&&(e.precision=r),Error(Bs+"LN10 precision limit exceeded");return Dr(new e(e.LN10),t)}function Co(e){for(var t="";e--;)t+="0";return t}function df(e,t){var r,a,l,o,d,h,g,p,x,E=1,C=10,O=e,_=O.d,P=O.constructor,k=P.precision;if(O.s<1)throw Error(Bs+(O.s?"NaN":"-Infinity"));if(O.eq(as))return new P(0);if(t==null?(Kr=!1,p=k):p=t,O.eq(10))return t==null&&(Kr=!0),iv(P,p);if(p+=C,P.precision=p,r=Tl(_),a=r.charAt(0),o=Ma(O),Math.abs(o)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)O=O.times(e),r=Tl(O.d),a=r.charAt(0),E++;o=Ma(O),a>1?(O=new P("0."+r),o++):O=new P(a+"."+r.slice(1))}else return g=iv(P,p+2,k).times(o+""),O=df(new P(a+"."+r.slice(1)),p-C).plus(g),P.precision=k,t==null?(Kr=!0,Dr(O,k)):O;for(h=d=O=gi(O.minus(as),O.plus(as),p),x=Dr(O.times(O),p),l=3;;){if(d=Dr(d.times(x),p),g=h.plus(gi(d,new P(l),p)),Tl(g.d).slice(0,p)===Tl(h.d).slice(0,p))return h=h.times(2),o!==0&&(h=h.plus(iv(P,p+2,k).times(o+""))),h=gi(h,new P(E),p),P.precision=k,t==null?(Kr=!0,Dr(h,k)):h;h=g,l+=2}}function K6(e,t){var r,a,l;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(l=t.length;t.charCodeAt(l-1)===48;)--l;if(t=t.slice(a,l),t){if(l-=a,r=r-a-1,e.e=vd(r/Hr),e.d=[],a=(r+1)%Hr,r<0&&(a+=Hr),a<l){for(a&&e.d.push(+t.slice(0,a)),l-=Hr;a<l;)e.d.push(+t.slice(a,a+=Hr));t=t.slice(a),a=Hr-t.length}else a-=l;for(;a--;)t+="0";if(e.d.push(+t),Kr&&(e.e>lp||e.e<-lp))throw Error(sN+r)}else e.s=0,e.e=0,e.d=[0];return e}function Dr(e,t,r){var a,l,o,d,h,g,p,x,E=e.d;for(d=1,o=E[0];o>=10;o/=10)d++;if(a=t-d,a<0)a+=Hr,l=t,p=E[x=0];else{if(x=Math.ceil((a+1)/Hr),o=E.length,x>=o)return e;for(p=o=E[x],d=1;o>=10;o/=10)d++;a%=Hr,l=a-Hr+d}if(r!==void 0&&(o=bc(10,d-l-1),h=p/o%10|0,g=t<0||E[x+1]!==void 0||p%o,g=r<4?(h||g)&&(r==0||r==(e.s<0?3:2)):h>5||h==5&&(r==4||g||r==6&&(a>0?l>0?p/bc(10,d-l):0:E[x-1])%10&1||r==(e.s<0?8:7))),t<1||!E[0])return g?(o=Ma(e),E.length=1,t=t-o-1,E[0]=bc(10,(Hr-t%Hr)%Hr),e.e=vd(-t/Hr)||0):(E.length=1,E[0]=e.e=e.s=0),e;if(a==0?(E.length=x,o=1,x--):(E.length=x+1,o=bc(10,Hr-a),E[x]=l>0?(p/bc(10,d-l)%bc(10,l)|0)*o:0),g)for(;;)if(x==0){(E[0]+=o)==Xa&&(E[0]=1,++e.e);break}else{if(E[x]+=o,E[x]!=Xa)break;E[x--]=0,o=1}for(a=E.length;E[--a]===0;)E.pop();if(Kr&&(e.e>lp||e.e<-lp))throw Error(sN+Ma(e));return e}function B7(e,t){var r,a,l,o,d,h,g,p,x,E,C=e.constructor,O=C.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new C(e),Kr?Dr(t,O):t;if(g=e.d,E=t.d,a=t.e,p=e.e,g=g.slice(),d=p-a,d){for(x=d<0,x?(r=g,d=-d,h=E.length):(r=E,a=p,h=g.length),l=Math.max(Math.ceil(O/Hr),h)+2,d>l&&(d=l,r.length=1),r.reverse(),l=d;l--;)r.push(0);r.reverse()}else{for(l=g.length,h=E.length,x=l<h,x&&(h=l),l=0;l<h;l++)if(g[l]!=E[l]){x=g[l]<E[l];break}d=0}for(x&&(r=g,g=E,E=r,t.s=-t.s),h=g.length,l=E.length-h;l>0;--l)g[h++]=0;for(l=E.length;l>d;){if(g[--l]<E[l]){for(o=l;o&&g[--o]===0;)g[o]=Xa-1;--g[o],g[l]+=Xa}g[l]-=E[l]}for(;g[--h]===0;)g.pop();for(;g[0]===0;g.shift())--a;return g[0]?(t.d=g,t.e=a,Kr?Dr(t,O):t):new C(0)}function Bc(e,t,r){var a,l=Ma(e),o=Tl(e.d),d=o.length;return t?(r&&(a=r-d)>0?o=o.charAt(0)+"."+o.slice(1)+Co(a):d>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(l<0?"e":"e+")+l):l<0?(o="0."+Co(-l-1)+o,r&&(a=r-d)>0&&(o+=Co(a))):l>=d?(o+=Co(l+1-d),r&&(a=r-l-1)>0&&(o=o+"."+Co(a))):((a=l+1)<d&&(o=o.slice(0,a)+"."+o.slice(a)),r&&(a=r-d)>0&&(l+1===d&&(o+="."),o+=Co(a))),e.s<0?"-"+o:o}function Z6(e,t){if(e.length>t)return e.length=t,!0}function F7(e){var t,r,a;function l(o){var d=this;if(!(d instanceof l))return new l(o);if(d.constructor=l,o instanceof l){d.s=o.s,d.e=o.e,d.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Pc+o);if(o>0)d.s=1;else if(o<0)o=-o,d.s=-1;else{d.s=0,d.e=0,d.d=[0];return}if(o===~~o&&o<1e7){d.e=0,d.d=[o];return}return K6(d,o.toString())}else if(typeof o!="string")throw Error(Pc+o);if(o.charCodeAt(0)===45?(o=o.slice(1),d.s=-1):d.s=1,Zte.test(o))K6(d,o);else throw Error(Pc+o)}if(l.prototype=ft,l.ROUND_UP=0,l.ROUND_DOWN=1,l.ROUND_CEIL=2,l.ROUND_FLOOR=3,l.ROUND_HALF_UP=4,l.ROUND_HALF_DOWN=5,l.ROUND_HALF_EVEN=6,l.ROUND_HALF_CEIL=7,l.ROUND_HALF_FLOOR=8,l.clone=F7,l.config=l.set=Qte,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return l.config(e),l}function Qte(e){if(!e||typeof e!="object")throw Error(Bs+"Object expected");var t,r,a,l=["precision",1,bd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<l.length;t+=3)if((a=e[r=l[t]])!==void 0)if(vd(a)===a&&a>=l[t+1]&&a<=l[t+2])this[r]=a;else throw Error(Pc+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(Pc+r+": "+a);return this}var lN=F7(Kte);as=new lN(1);const yr=lN;var Jte=e=>e,U7={},j7=e=>e===U7,Q6=e=>function t(){return arguments.length===0||arguments.length===1&&j7(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},z7=(e,t)=>e===1?t:Q6(function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];var o=a.filter(d=>d!==U7).length;return o>=e?t(...a):z7(e-o,Q6(function(){for(var d=arguments.length,h=new Array(d),g=0;g<d;g++)h[g]=arguments[g];var p=a.map(x=>j7(x)?h.shift():x);return t(...p,...h)}))}),ere=e=>z7(e.length,e),JE=(e,t)=>{for(var r=[],a=e;a<t;++a)r[a-e]=a;return r},tre=ere((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),rre=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return Jte;var l=r.reverse(),o=l[0],d=l.slice(1);return function(){return d.reduce((h,g)=>g(h),o(...arguments))}},e2=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function V7(e){var t;return e===0?t=1:t=Math.floor(new yr(e).abs().log(10).toNumber())+1,t}function H7(e,t,r){for(var a=new yr(e),l=0,o=[];a.lt(t)&&l<1e5;)o.push(a.toNumber()),a=a.add(r),l++;return o}var $7=e=>{var[t,r]=e,[a,l]=[t,r];return t>r&&([a,l]=[r,t]),[a,l]},q7=(e,t,r)=>{if(e.lte(0))return new yr(0);var a=V7(e.toNumber()),l=new yr(10).pow(a),o=e.div(l),d=a!==1?.05:.1,h=new yr(Math.ceil(o.div(d).toNumber())).add(r).mul(d),g=h.mul(l);return t?new yr(g.toNumber()):new yr(Math.ceil(g.toNumber()))},are=(e,t,r)=>{var a=new yr(1),l=new yr(e);if(!l.isint()&&r){var o=Math.abs(e);o<1?(a=new yr(10).pow(V7(e)-1),l=new yr(Math.floor(l.div(a).toNumber())).mul(a)):o>1&&(l=new yr(Math.floor(e)))}else e===0?l=new yr(Math.floor((t-1)/2)):r||(l=new yr(Math.floor(e)));var d=Math.floor((t-1)/2),h=rre(tre(g=>l.add(new yr(g-d).mul(a)).toNumber()),JE);return h(0,t)},G7=function(t,r,a,l){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(a-1)))return{step:new yr(0),tickMin:new yr(0),tickMax:new yr(0)};var d=q7(new yr(r).sub(t).div(a-1),l,o),h;t<=0&&r>=0?h=new yr(0):(h=new yr(t).add(r).div(2),h=h.sub(new yr(h).mod(d)));var g=Math.ceil(h.sub(t).div(d).toNumber()),p=Math.ceil(new yr(r).sub(h).div(d).toNumber()),x=g+p+1;return x>a?G7(t,r,a,l,o+1):(x<a&&(p=r>0?p+(a-x):p,g=r>0?g:g+(a-x)),{step:d,tickMin:h.sub(new yr(g).mul(d)),tickMax:h.add(new yr(p).mul(d))})},nre=function(t){var[r,a]=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=Math.max(l,2),[h,g]=$7([r,a]);if(h===-1/0||g===1/0){var p=g===1/0?[h,...JE(0,l-1).map(()=>1/0)]:[...JE(0,l-1).map(()=>-1/0),g];return r>a?e2(p):p}if(h===g)return are(h,l,o);var{step:x,tickMin:E,tickMax:C}=G7(h,g,d,o,0),O=H7(E,C.add(new yr(.1).mul(x)),x);return r>a?e2(O):O},sre=function(t,r){var[a,l]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[d,h]=$7([a,l]);if(d===-1/0||h===1/0)return[a,l];if(d===h)return[d];var g=Math.max(r,2),p=q7(new yr(h).sub(d).div(g-1),o,0),x=[...H7(new yr(d),new yr(h),p),h];return o===!1&&(x=x.map(E=>Math.round(E))),a>l?e2(x):x},lre=e=>e.rootProps.barCategoryGap,Lf=e=>e.rootProps.stackOffset,Y7=e=>e.rootProps.reverseStackOrder,iN=e=>e.options.chartName,oN=e=>e.rootProps.syncId,X7=e=>e.rootProps.syncMethod,cN=e=>e.options.eventEmitter,sl={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ui={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},rs={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},u1=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},ire={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ui.angleAxisId,includeHidden:!1,name:void 0,reversed:ui.reversed,scale:ui.scale,tick:ui.tick,tickCount:void 0,ticks:void 0,type:ui.type,unit:void 0},ore={allowDataOverflow:rs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:rs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:rs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:rs.scale,tick:rs.tick,tickCount:rs.tickCount,ticks:void 0,type:rs.type,unit:void 0},cre={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ui.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ui.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ui.scale,tick:ui.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},ure={allowDataOverflow:rs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:rs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:rs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:rs.scale,tick:rs.tick,tickCount:rs.tickCount,ticks:void 0,type:"category",unit:void 0},uN=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?cre:ire,dN=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?ure:ore,d1=e=>e.polarOptions,mN=Me([Di,ki,Za],YM),W7=Me([d1,mN],(e,t)=>{if(e!=null)return ls(e.innerRadius,t,0)}),K7=Me([d1,mN],(e,t)=>{if(e!=null)return ls(e.outerRadius,t,t*.8)}),dre=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},Z7=Me([d1],dre);Me([uN,Z7],u1);var Q7=Me([mN,W7,K7],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Me([dN,Q7],u1);var J7=Me([Rr,d1,W7,K7,Di,ki],(e,t,r,a,l,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||a==null)){var{cx:d,cy:h,startAngle:g,endAngle:p}=t;return{cx:ls(d,l,l/2),cy:ls(h,o,o/2),innerRadius:r,outerRadius:a,startAngle:g,endAngle:p,clockWise:!1}}}),Jr=(e,t)=>t,Bf=(e,t,r)=>r;function eI(e){return e?.id}function tI(e,t,r){var{chartData:a=[]}=t,{allowDuplicatedCategory:l,dataKey:o}=r,d=new Map;return e.forEach(h=>{var g,p=(g=h.data)!==null&&g!==void 0?g:a;if(!(p==null||p.length===0)){var x=eI(h);p.forEach((E,C)=>{var O=o==null||l?C:String(xa(E,o,null)),_=xa(E,h.dataKey,0),P;d.has(O)?P=d.get(O):P={},Object.assign(P,{[x]:_}),d.set(O,P)})}}),Array.from(d.values())}function fN(e){return e.stackId!=null&&e.dataKey!=null}var m1=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function f1(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function mre(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Va=e=>{var t=Rr(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Ed=e=>e.tooltip.settings.axisId;function J6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function ip(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J6(Object(r),!0).forEach(function(a){fre(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fre(e,t,r){return(t=hre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hre(e){var t=gre(e,"string");return typeof t=="symbol"?t:t+""}function gre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t2=[0,"auto"],pre={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},yre=(e,t)=>e.cartesianAxis.xAxis[t],zo=(e,t)=>{var r=yre(e,t);return r??pre},xre={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:t2,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Df},bre=(e,t)=>e.cartesianAxis.yAxis[t],Vo=(e,t)=>{var r=bre(e,t);return r??xre},vre={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},hN=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??vre},na=(e,t,r)=>{switch(t){case"xAxis":return zo(e,r);case"yAxis":return Vo(e,r);case"zAxis":return hN(e,r);case"angleAxis":return uN(e,r);case"radiusAxis":return dN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Ere=(e,t,r)=>{switch(t){case"xAxis":return zo(e,r);case"yAxis":return Vo(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Ff=(e,t,r)=>{switch(t){case"xAxis":return zo(e,r);case"yAxis":return Vo(e,r);case"angleAxis":return uN(e,r);case"radiusAxis":return dN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},rI=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function gN(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var wre=e=>e.graphicalItems.cartesianItems,Nre=Me([Jr,Bf],gN),pN=(e,t,r)=>e.filter(r).filter(a=>t?.includeHidden===!0?!0:!a.hide),Uf=Me([wre,na,Nre],pN,{memoizeOptions:{resultEqualityCheck:f1}}),aI=Me([Uf],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(fN)),nI=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Sre=Me([Uf],nI),yN=e=>e.map(t=>t.data).filter(Boolean).flat(1),Cre=Me([Uf],yN,{memoizeOptions:{resultEqualityCheck:f1}}),xN=(e,t)=>{var{chartData:r=[],dataStartIndex:a,dataEndIndex:l}=t;return e.length>0?e:r.slice(a,l+1)},bN=Me([Cre,P7],xN),vN=(e,t,r)=>t?.dataKey!=null?e.map(a=>({value:xa(a,t.dataKey)})):r.length>0?r.map(a=>a.dataKey).flatMap(a=>e.map(l=>({value:xa(l,a)}))):e.map(a=>({value:a})),h1=Me([bN,na,Uf],vN);function sI(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function og(e){if(Ni(e)||e instanceof Date){var t=Number(e);if(Ka(t))return t}}function e8(e){if(Array.isArray(e)){var t=[og(e[0]),og(e[1])];return Io(t)?t:void 0}var r=og(e);if(r!=null)return[r,r]}function Oi(e){return e.map(og).filter(hX)}function Are(e,t,r){return!r||typeof t!="number"||Ei(t)?[]:r.length?Oi(r.flatMap(a=>{var l=xa(e,a.dataKey),o,d;if(Array.isArray(l)?[o,d]=l:o=d=l,!(!Ka(o)||!Ka(d)))return[t-o,t+d]})):[]}var Ha=e=>{var t=Va(e),r=Ed(e);return Ff(e,t,r)},jf=Me([Ha],e=>e?.dataKey),Tre=Me([aI,P7,Ha],tI),lI=(e,t,r,a)=>{var l={},o=t.reduce((d,h)=>(h.stackId==null||(d[h.stackId]==null&&(d[h.stackId]=[]),d[h.stackId].push(h)),d),l);return Object.fromEntries(Object.entries(o).map(d=>{var[h,g]=d,p=a?[...g].reverse():g,x=p.map(eI);return[h,{stackedData:zK(e,x,r),graphicalItems:p}]}))},Ore=Me([Tre,aI,Lf,Y7],lI),iI=(e,t,r,a)=>{var{dataStartIndex:l,dataEndIndex:o}=t;if(a==null&&r!=="zAxis"){var d=$K(e,l,o);if(!(d!=null&&d[0]===0&&d[1]===0))return d}},_re=Me([na],e=>e.allowDataOverflow),EN=e=>{var t;if(e==null||!("domain"in e))return t2;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Oi(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:t2},wN=Me([na],EN),NN=Me([wN,_re],M7),Dre=Me([Ore,jo,Jr,NN],iI,{memoizeOptions:{resultEqualityCheck:m1}}),g1=e=>e.errorBars,kre=(e,t,r)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>sI(r,a)),op=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var l=r.filter(Boolean);if(l.length!==0){var o=l.flat(),d=Math.min(...o),h=Math.max(...o);return[d,h]}},SN=(e,t,r,a,l)=>{var o,d;if(r.length>0&&e.forEach(h=>{r.forEach(g=>{var p,x,E=(p=a[g.id])===null||p===void 0?void 0:p.filter(I=>sI(l,I)),C=xa(h,(x=t.dataKey)!==null&&x!==void 0?x:g.dataKey),O=Are(h,C,E);if(O.length>=2){var _=Math.min(...O),P=Math.max(...O);(o==null||_<o)&&(o=_),(d==null||P>d)&&(d=P)}var k=e8(C);k!=null&&(o=o==null?k[0]:Math.min(o,k[0]),d=d==null?k[1]:Math.max(d,k[1]))})}),t?.dataKey!=null&&e.forEach(h=>{var g=e8(xa(h,t.dataKey));g!=null&&(o=o==null?g[0]:Math.min(o,g[0]),d=d==null?g[1]:Math.max(d,g[1]))}),Ka(o)&&Ka(d))return[o,d]},Pre=Me([bN,na,Sre,g1,Jr],SN,{memoizeOptions:{resultEqualityCheck:m1}});function Mre(e){var{value:t}=e;if(Ni(t)||t instanceof Date)return t}var Ire=(e,t,r)=>{var a=e.map(Mre).filter(l=>l!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&OP(a))?ZM(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},oI=e=>e.referenceElements.dots,wd=(e,t,r)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===r:a.yAxisId===r),Rre=Me([oI,Jr,Bf],wd),cI=e=>e.referenceElements.areas,Lre=Me([cI,Jr,Bf],wd),uI=e=>e.referenceElements.lines,Bre=Me([uI,Jr,Bf],wd),dI=(e,t)=>{var r=Oi(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Fre=Me(Rre,Jr,dI),mI=(e,t)=>{var r=Oi(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Ure=Me([Lre,Jr],mI);function jre(e){var t;if(e.x!=null)return Oi([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.x);return r==null||r.length===0?[]:Oi(r)}function zre(e){var t;if(e.y!=null)return Oi([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.y);return r==null||r.length===0?[]:Oi(r)}var fI=(e,t)=>{var r=e.flatMap(a=>t==="xAxis"?jre(a):zre(a));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Vre=Me([Bre,Jr],fI),Hre=Me(Fre,Vre,Ure,(e,t,r)=>op(e,r,t)),CN=(e,t,r,a,l,o,d,h)=>{if(r!=null)return r;var g=d==="vertical"&&h==="xAxis"||d==="horizontal"&&h==="yAxis",p=g?op(a,o,l):op(o,l);return Wte(t,p,e.allowDataOverflow)},$re=Me([na,wN,NN,Dre,Pre,Hre,Rr,Jr],CN,{memoizeOptions:{resultEqualityCheck:m1}}),qre=[0,1],AN=(e,t,r,a,l,o,d)=>{if(!((e==null||r==null||r.length===0)&&d===void 0)){var{dataKey:h,type:g}=e,p=Uc(t,o);if(p&&h==null){var x;return ZM(0,(x=r?.length)!==null&&x!==void 0?x:0)}return g==="category"?Ire(a,e,p):l==="expand"?qre:d}},TN=Me([na,Rr,bN,h1,Lf,Jr,$re],AN),hI=(e,t,r,a,l)=>{if(e!=null){var{scale:o,type:d}=e;if(o==="auto")return t==="radial"&&l==="radiusAxis"?"band":t==="radial"&&l==="angleAxis"?"linear":d==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?"point":d==="category"?"band":"linear";if(typeof o=="string"){var h="scale".concat(Cf(o));return h in Im?h:"point"}}},Nd=Me([na,Rr,rI,iN,Jr],hI);function Gre(e){if(e!=null){if(e in Im)return Im[e]();var t="scale".concat(Cf(e));if(t in Im)return Im[t]()}}function ON(e,t,r,a){if(!(r==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(a);var l=Gre(t);if(l!=null){var o=l.domain(r).range(a);return BK(o),o}}}var _N=(e,t,r)=>{var a=EN(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&Io(e))return nre(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Io(e))return sre(e,t.tickCount,t.allowDecimals)}},DN=Me([TN,Ff,Nd],_N),kN=(e,t,r,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&Io(t)&&Array.isArray(r)&&r.length>0){var l=t[0],o=r[0],d=t[1],h=r[r.length-1];return[Math.min(l,o),Math.max(d,h)]}return t},Yre=Me([na,TN,DN,Jr],kN),Xre=Me(h1,na,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,a=Array.from(Oi(e.map(h=>h.value))).sort((h,g)=>h-g);if(a.length<2)return 1/0;var l=a[a.length-1]-a[0];if(l===0)return 1/0;for(var o=0;o<a.length-1;o++){var d=a[o+1]-a[o];r=Math.min(r,d)}return r/l}}),gI=Me(Xre,Rr,lre,Za,(e,t,r,a)=>a,(e,t,r,a,l)=>{if(!Ka(e))return 0;var o=t==="vertical"?a.height:a.width;if(l==="gap")return e*o/2;if(l==="no-gap"){var d=ls(r,e*o),h=e*o/2;return h-d-(h-d)/o*d}return 0}),Wre=(e,t)=>{var r=zo(e,t);return r==null||typeof r.padding!="string"?0:gI(e,"xAxis",t,r.padding)},Kre=(e,t)=>{var r=Vo(e,t);return r==null||typeof r.padding!="string"?0:gI(e,"yAxis",t,r.padding)},Zre=Me(zo,Wre,(e,t)=>{var r,a;if(e==null)return{left:0,right:0};var{padding:l}=e;return typeof l=="string"?{left:t,right:t}:{left:((r=l.left)!==null&&r!==void 0?r:0)+t,right:((a=l.right)!==null&&a!==void 0?a:0)+t}}),Qre=Me(Vo,Kre,(e,t)=>{var r,a;if(e==null)return{top:0,bottom:0};var{padding:l}=e;return typeof l=="string"?{top:t,bottom:t}:{top:((r=l.top)!==null&&r!==void 0?r:0)+t,bottom:((a=l.bottom)!==null&&a!==void 0?a:0)+t}}),Jre=Me([Za,Zre,Zp,Kp,(e,t,r)=>r],(e,t,r,a,l)=>{var{padding:o}=a;return l?[o.left,r.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),eae=Me([Za,Rr,Qre,Zp,Kp,(e,t,r)=>r],(e,t,r,a,l,o)=>{var{padding:d}=l;return o?[a.height-d.bottom,d.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),zf=(e,t,r,a)=>{var l;switch(t){case"xAxis":return Jre(e,r,a);case"yAxis":return eae(e,r,a);case"zAxis":return(l=hN(e,r))===null||l===void 0?void 0:l.range;case"angleAxis":return Z7(e);case"radiusAxis":return Q7(e,r);default:return}},pI=Me([na,zf],u1),p1=Me([na,Nd,Yre,pI],ON);Me([Uf,g1,Jr],kre);function yI(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var y1=(e,t)=>t,x1=(e,t,r)=>r,tae=Me(Xp,y1,x1,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(yI)),rae=Me(Wp,y1,x1,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(yI)),xI=(e,t)=>({width:e.width,height:t.height}),aae=(e,t)=>{var r=typeof t.width=="number"?t.width:Df;return{width:r,height:e.height}};Me(Za,zo,xI);var nae=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},sae=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},lae=Me(ki,Za,tae,y1,x1,(e,t,r,a,l)=>{var o={},d;return r.forEach(h=>{var g=xI(t,h);d==null&&(d=nae(t,a,e));var p=a==="top"&&!l||a==="bottom"&&l;o[h.id]=d-Number(p)*g.height,d+=(p?-1:1)*g.height}),o}),iae=Me(Di,Za,rae,y1,x1,(e,t,r,a,l)=>{var o={},d;return r.forEach(h=>{var g=aae(t,h);d==null&&(d=sae(t,a,e));var p=a==="left"&&!l||a==="right"&&l;o[h.id]=d-Number(p)*g.width,d+=(p?-1:1)*g.width}),o}),oae=(e,t)=>{var r=zo(e,t);if(r!=null)return lae(e,r.orientation,r.mirror)};Me([Za,zo,oae,(e,t)=>t],(e,t,r,a)=>{if(t!=null){var l=r?.[a];return l==null?{x:e.left,y:0}:{x:e.left,y:l}}});var cae=(e,t)=>{var r=Vo(e,t);if(r!=null)return iae(e,r.orientation,r.mirror)};Me([Za,Vo,cae,(e,t)=>t],(e,t,r,a)=>{if(t!=null){var l=r?.[a];return l==null?{x:0,y:e.top}:{x:l,y:e.top}}});Me(Za,Vo,(e,t)=>{var r=typeof t.width=="number"?t.width:Df;return{width:r,height:e.height}});var bI=(e,t,r,a)=>{if(r!=null){var{allowDuplicatedCategory:l,type:o,dataKey:d}=r,h=Uc(e,a),g=t.map(p=>p.value);if(d&&h&&o==="category"&&l&&OP(g))return g}},PN=Me([Rr,h1,na,Jr],bI),vI=(e,t,r,a)=>{if(!(r==null||r.dataKey==null)){var{type:l,scale:o}=r,d=Uc(e,a);if(d&&(l==="number"||o!=="auto"))return t.map(h=>h.value)}},MN=Me([Rr,h1,Ff,Jr],vI);Me([Rr,Ere,Nd,p1,PN,MN,zf,DN,Jr],(e,t,r,a,l,o,d,h,g)=>{if(t!=null){var p=Uc(e,g);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:g,categoricalDomain:o,duplicateDomain:l,isCategorical:p,niceTicks:h,range:d,realScaleType:r,scale:a}}});var uae=(e,t,r,a,l,o,d,h,g)=>{if(!(t==null||a==null)){var p=Uc(e,g),{type:x,ticks:E,tickCount:C}=t,O=r==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,_=x==="category"&&a.bandwidth?a.bandwidth()/O:0;_=g==="angleAxis"&&o!=null&&o.length>=2?Bn(o[0]-o[1])*2*_:_;var P=E||l;if(P){var k=P.map((I,F)=>{var R=d?d.indexOf(I):I;return{index:F,coordinate:a(R)+_,value:I,offset:_}});return k.filter(I=>Ka(I.coordinate))}return p&&h?h.map((I,F)=>({coordinate:a(I)+_,value:I,index:F,offset:_})).filter(I=>Ka(I.coordinate)):a.ticks?a.ticks(C).map(I=>({coordinate:a(I)+_,value:I,offset:_})):a.domain().map((I,F)=>({coordinate:a(I)+_,value:d?d[I]:I,index:F,offset:_}))}};Me([Rr,Ff,Nd,p1,DN,zf,PN,MN,Jr],uae);var dae=(e,t,r,a,l,o,d)=>{if(!(t==null||r==null||a==null||a[0]===a[1])){var h=Uc(e,d),{tickCount:g}=t,p=0;return p=d==="angleAxis"&&a?.length>=2?Bn(a[0]-a[1])*2*p:p,h&&o?o.map((x,E)=>({coordinate:r(x)+p,value:x,index:E,offset:p})):r.ticks?r.ticks(g).map(x=>({coordinate:r(x)+p,value:x,offset:p})):r.domain().map((x,E)=>({coordinate:r(x)+p,value:l?l[x]:x,index:E,offset:p}))}};Me([Rr,Ff,p1,zf,PN,MN,Jr],dae);Me(na,p1,(e,t)=>{if(!(e==null||t==null))return ip(ip({},e),{},{scale:t})});var mae=Me([na,Nd,TN,pI],ON);Me((e,t,r)=>hN(e,r),mae,(e,t)=>{if(!(e==null||t==null))return ip(ip({},e),{},{scale:t})});var fae=Me([Rr,Xp,Wp],(e,t,r)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),EI=e=>e.options.defaultTooltipEventType,wI=e=>e.options.validateTooltipEventTypes;function NI(e,t,r){if(e==null)return t;var a=e?"axis":"item";return r==null?t:r.includes(a)?a:t}function IN(e,t){var r=EI(e),a=wI(e);return NI(t,r,a)}function hae(e){return Rt(t=>IN(t,e))}var SI=(e,t)=>{var r,a=Number(t);if(!(Ei(a)||t==null))return a>=0?e==null||(r=e[a])===null||r===void 0?void 0:r.value:void 0},gae=e=>e.tooltip.settings,To={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},pae={itemInteraction:{click:To,hover:To},axisInteraction:{click:To,hover:To},keyboardInteraction:To,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},CI=zn({name:"tooltip",initialState:pae,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Xr()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:a}=t.payload,l=il(e).tooltipItemPayloads.indexOf(r);l>-1&&(e.tooltipItemPayloads[l]=a)},prepare:Xr()},removeTooltipEntrySettings:{reducer(e,t){var r=il(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Xr()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:yae,replaceTooltipEntrySettings:xae,removeTooltipEntrySettings:bae,setTooltipSettingsState:vae,setActiveMouseOverItemIndex:AI,mouseLeaveItem:Eae,mouseLeaveChart:TI,setActiveClickItemIndex:wae,setMouseOverAxisIndex:OI,setMouseClickAxisIndex:Nae,setSyncInteraction:r2,setKeyboardInteraction:a2}=CI.actions,Sae=CI.reducer;function t8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Dh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t8(Object(r),!0).forEach(function(a){Cae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Cae(e,t,r){return(t=Aae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aae(e){var t=Tae(e,"string");return typeof t=="symbol"?t:t+""}function Tae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oae(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function _ae(e){return e.index!=null}var _I=(e,t,r,a)=>{if(t==null)return To;var l=Oae(e,t,r);if(l==null)return To;if(l.active)return l;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(_ae(l)){if(o)return Dh(Dh({},l),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a,graphicalItemId:void 0};return Dh(Dh({},To),{},{coordinate:l.coordinate})};function Dae(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function kae(e,t){var r=Dae(e),a=t[0],l=t[1];if(r===void 0)return!1;var o=Math.min(a,l),d=Math.max(a,l);return r>=o&&r<=d}function Pae(e,t,r){if(r==null||t==null)return!0;var a=xa(e,t);return a==null||!Io(r)?!0:kae(a,r)}var RN=(e,t,r,a)=>{var l=e?.index;if(l==null)return null;var o=Number(l);if(!Ka(o))return l;var d=0,h=1/0;t.length>0&&(h=t.length-1);var g=Math.max(d,Math.min(o,h)),p=t[g];return p==null||Pae(p,r,a)?String(g):null},DI=(e,t,r,a,l,o,d,h)=>{if(!(o==null||h==null)){var g=d[0],p=g==null?void 0:h(g.positions,o);if(p!=null)return p;var x=l?.[Number(o)];if(x)switch(r){case"horizontal":return{x:x.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:x.coordinate}}}},kI=(e,t,r,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var l;return r==="hover"?l=e.itemInteraction.hover.dataKey:l=e.itemInteraction.click.dataKey,l==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(o=>{var d;return((d=o.settings)===null||d===void 0?void 0:d.dataKey)===l})},Vf=e=>e.options.tooltipPayloadSearcher,Sd=e=>e.tooltip;function r8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function a8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r8(Object(r),!0).forEach(function(a){Mae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Mae(e,t,r){return(t=Iae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iae(e){var t=Rae(e,"string");return typeof t=="symbol"?t:t+""}function Rae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lae(e,t){return e??t}var PI=(e,t,r,a,l,o,d)=>{if(!(t==null||o==null)){var{chartData:h,computedData:g,dataStartIndex:p,dataEndIndex:x}=r,E=[];return e.reduce((C,O)=>{var _,{dataDefinedOnItem:P,settings:k}=O,I=Lae(P,h),F=Array.isArray(I)?wM(I,p,x):I,R=(_=k?.dataKey)!==null&&_!==void 0?_:a,Y=k?.nameKey,j;if(a&&Array.isArray(F)&&!Array.isArray(F[0])&&d==="axis"?j=fX(F,a,l):j=o(F,t,g,Y),Array.isArray(j))j.forEach(L=>{var q=a8(a8({},k),{},{name:L.name,unit:L.unit,color:void 0,fill:void 0});C.push(ST({tooltipEntrySettings:q,dataKey:L.dataKey,payload:L.payload,value:xa(L.payload,L.dataKey),name:L.name}))});else{var z;C.push(ST({tooltipEntrySettings:k,dataKey:R,payload:j,value:xa(j,R),name:(z=xa(j,Y))!==null&&z!==void 0?z:k?.name}))}return C},E)}},LN=Me([Ha,Rr,rI,iN,Va],hI),Bae=Me([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Fae=Me([Va,Ed],gN),Hf=Me([Bae,Ha,Fae],pN,{memoizeOptions:{resultEqualityCheck:f1}}),Uae=Me([Hf],e=>e.filter(fN)),jae=Me([Hf],yN,{memoizeOptions:{resultEqualityCheck:f1}}),Cd=Me([jae,jo],xN),zae=Me([Uae,jo,Ha],tI),BN=Me([Cd,Ha,Hf],vN),MI=Me([Ha],EN),Vae=Me([Ha],e=>e.allowDataOverflow),II=Me([MI,Vae],M7),Hae=Me([Hf],e=>e.filter(fN)),$ae=Me([zae,Hae,Lf,Y7],lI),qae=Me([$ae,jo,Va,II],iI),Gae=Me([Hf],nI),Yae=Me([Cd,Ha,Gae,g1,Va],SN,{memoizeOptions:{resultEqualityCheck:m1}}),Xae=Me([oI,Va,Ed],wd),Wae=Me([Xae,Va],dI),Kae=Me([cI,Va,Ed],wd),Zae=Me([Kae,Va],mI),Qae=Me([uI,Va,Ed],wd),Jae=Me([Qae,Va],fI),ene=Me([Wae,Jae,Zae],op),tne=Me([Ha,MI,II,qae,Yae,ene,Rr,Va],CN),$f=Me([Ha,Rr,Cd,BN,Lf,Va,tne],AN),rne=Me([$f,Ha,LN],_N),ane=Me([Ha,$f,rne,Va],kN),RI=e=>{var t=Va(e),r=Ed(e),a=!1;return zf(e,t,r,a)},LI=Me([Ha,RI],u1),BI=Me([Ha,LN,ane,LI],ON),nne=Me([Rr,BN,Ha,Va],bI),sne=Me([Rr,BN,Ha,Va],vI),lne=(e,t,r,a,l,o,d,h)=>{if(t){var{type:g}=t,p=Uc(e,h);if(a){var x=r==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,E=g==="category"&&a.bandwidth?a.bandwidth()/x:0;return E=h==="angleAxis"&&l!=null&&l?.length>=2?Bn(l[0]-l[1])*2*E:E,p&&d?d.map((C,O)=>({coordinate:a(C)+E,value:C,index:O,offset:E})):a.domain().map((C,O)=>({coordinate:a(C)+E,value:o?o[C]:C,index:O,offset:E}))}}},Mi=Me([Rr,Ha,LN,BI,RI,nne,sne,Va],lne),FN=Me([EI,wI,gae],(e,t,r)=>NI(r.shared,e,t)),FI=e=>e.tooltip.settings.trigger,UN=e=>e.tooltip.settings.defaultIndex,qf=Me([Sd,FN,FI,UN],_I),mf=Me([qf,Cd,jf,$f],RN),UI=Me([Mi,mf],SI),jI=Me([qf],e=>{if(e)return e.dataKey}),ine=Me([qf],e=>{if(e)return e.graphicalItemId}),zI=Me([Sd,FN,FI,UN],kI),one=Me([Di,ki,Rr,Za,Mi,UN,zI,Vf],DI),cne=Me([qf,one],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),une=Me([qf],e=>e.active),dne=Me([zI,mf,jo,jf,UI,Vf,FN],PI);Me([dne],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function n8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function s8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n8(Object(r),!0).forEach(function(a){mne(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function mne(e,t,r){return(t=fne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fne(e){var t=hne(e,"string");return typeof t=="symbol"?t:t+""}function hne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gne=()=>Rt(Ha),pne=()=>{var e=gne(),t=Rt(Mi),r=Rt(BI);return NT(!e||!r?void 0:s8(s8({},e),{},{scale:r}),t)};function l8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Au(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l8(Object(r),!0).forEach(function(a){yne(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function yne(e,t,r){return(t=xne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xne(e){var t=bne(e,"string");return typeof t=="symbol"?t:t+""}function bne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vne=(e,t,r,a)=>{var l=t.find(o=>o&&o.index===r);if(l){if(e==="horizontal")return{x:l.coordinate,y:a.chartY};if(e==="vertical")return{x:a.chartX,y:l.coordinate}}return{x:0,y:0}},Ene=(e,t,r,a)=>{var l=t.find(p=>p&&p.index===r);if(l){if(e==="centric"){var o=l.coordinate,{radius:d}=a;return Au(Au(Au({},a),ka(a.cx,a.cy,d,o)),{},{angle:o,radius:d})}var h=l.coordinate,{angle:g}=a;return Au(Au(Au({},a),ka(a.cx,a.cy,h,g)),{},{angle:g,radius:h})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function wne(e,t){var{chartX:r,chartY:a}=e;return r>=t.left&&r<=t.left+t.width&&a>=t.top&&a<=t.top+t.height}var VI=(e,t,r,a,l)=>{var o,d=-1,h=(o=t?.length)!==null&&o!==void 0?o:0;if(h<=1||e==null)return 0;if(a==="angleAxis"&&l!=null&&Math.abs(Math.abs(l[1]-l[0])-360)<=1e-6)for(var g=0;g<h;g++){var p=g>0?r[g-1].coordinate:r[h-1].coordinate,x=r[g].coordinate,E=g>=h-1?r[0].coordinate:r[g+1].coordinate,C=void 0;if(Bn(x-p)!==Bn(E-x)){var O=[];if(Bn(E-x)===Bn(l[1]-l[0])){C=E;var _=x+l[1]-l[0];O[0]=Math.min(_,(_+p)/2),O[1]=Math.max(_,(_+p)/2)}else{C=p;var P=E+l[1]-l[0];O[0]=Math.min(x,(P+x)/2),O[1]=Math.max(x,(P+x)/2)}var k=[Math.min(x,(C+x)/2),Math.max(x,(C+x)/2)];if(e>k[0]&&e<=k[1]||e>=O[0]&&e<=O[1]){({index:d}=r[g]);break}}else{var I=Math.min(p,E),F=Math.max(p,E);if(e>(I+x)/2&&e<=(F+x)/2){({index:d}=r[g]);break}}}else if(t){for(var R=0;R<h;R++)if(R===0&&e<=(t[R].coordinate+t[R+1].coordinate)/2||R>0&&R<h-1&&e>(t[R].coordinate+t[R-1].coordinate)/2&&e<=(t[R].coordinate+t[R+1].coordinate)/2||R===h-1&&e>(t[R].coordinate+t[R-1].coordinate)/2){({index:d}=t[R]);break}}return d},Nne=()=>Rt(iN),jN=(e,t)=>t,HI=(e,t,r)=>r,zN=(e,t,r,a)=>a,Sne=Me(Mi,e=>Up(e,t=>t.coordinate)),VN=Me([Sd,jN,HI,zN],_I),HN=Me([VN,Cd,jf,$f],RN),Cne=(e,t,r)=>{if(t!=null){var a=Sd(e);return t==="axis"?r==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:r==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},$I=Me([Sd,jN,HI,zN],kI),cp=Me([Di,ki,Rr,Za,Mi,zN,$I,Vf],DI),Ane=Me([VN,cp],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),qI=Me([Mi,HN],SI),Tne=Me([$I,HN,jo,jf,qI,Vf,jN],PI),One=Me([VN,HN],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),_ne=(e,t,r,a,l,o,d)=>{if(!(!e||!r||!a||!l)&&wne(e,d)){var h=qK(e,t),g=VI(h,o,l,r,a),p=vne(t,l,g,e);return{activeIndex:String(g),activeCoordinate:p}}},Dne=(e,t,r,a,l,o,d)=>{if(!(!e||!a||!l||!o||!r)){var h=dJ(e,r);if(h){var g=GK(h,t),p=VI(g,d,o,a,l),x=Ene(t,o,p,h);return{activeIndex:String(p),activeCoordinate:x}}}},kne=(e,t,r,a,l,o,d,h)=>{if(!(!e||!t||!a||!l||!o))return t==="horizontal"||t==="vertical"?_ne(e,t,a,l,o,d,h):Dne(e,t,r,a,l,o,d)},Pne=Me(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var a=e[t];if(a!=null)return r?a.panoramaElementId:a.elementId}}),Mne=Me(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(a=>parseInt(a,10)).concat(Object.values(sl)),r=Array.from(new Set(t));return r.sort((a,l)=>a-l)},{memoizeOptions:{resultEqualityCheck:mre}});function i8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function o8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i8(Object(r),!0).forEach(function(a){Ine(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ine(e,t,r){return(t=Rne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rne(e){var t=Lne(e,"string");return typeof t=="symbol"?t:t+""}function Lne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bne={},Fne={zIndexMap:Object.values(sl).reduce((e,t)=>o8(o8({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),Bne)},Une=new Set(Object.values(sl));function jne(e){return Une.has(e)}var GI=zn({name:"zIndex",initialState:Fne,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Xr()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!jne(r)&&delete e.zIndexMap[r])},prepare:Xr()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:a,isPanorama:l}=t.payload;e.zIndexMap[r]?l?e.zIndexMap[r].panoramaElementId=a:e.zIndexMap[r].elementId=a:e.zIndexMap[r]={consumers:0,elementId:l?void 0:a,panoramaElementId:l?a:void 0}},prepare:Xr()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Xr()}}}),{registerZIndexPortal:zne,unregisterZIndexPortal:Vne,registerZIndexPortalId:Hne,unregisterZIndexPortalId:$ne}=GI.actions,qne=GI.reducer;function Gf(e){var{zIndex:t,children:r}=e,a=SZ(),l=a&&t!==void 0&&t!==0,o=Bo(),d=va();N.useLayoutEffect(()=>l?(d(zne({zIndex:t})),()=>{d(Vne({zIndex:t}))}):Af,[d,t,l]);var h=Rt(p=>Pne(p,t,o));if(!l)return r;if(!h)return null;var g=document.getElementById(h);return g?E2.createPortal(r,g):null}function n2(){return n2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n2.apply(null,arguments)}function c8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function kh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c8(Object(r),!0).forEach(function(a){Gne(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Gne(e,t,r){return(t=Yne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yne(e){var t=Xne(e,"string");return typeof t=="symbol"?t:t+""}function Xne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wne(e){var{cursor:t,cursorComp:r,cursorProps:a}=e;return N.isValidElement(t)?N.cloneElement(t,a):N.createElement(r,a)}function Kne(e){var t,{coordinate:r,payload:a,index:l,offset:o,tooltipAxisBandSize:d,layout:h,cursor:g,tooltipEventType:p,chartName:x}=e,E=r,C=a,O=l;if(!g||!E||x!=="ScatterChart"&&p!=="axis")return null;var _,P,k;if(x==="ScatterChart")_=E,P=AQ,k=sl.cursorLine;else if(x==="BarChart")_=TQ(h,E,o,d),P=GM,k=sl.cursorRectangle;else if(h==="radial"&&DP(E)){var{cx:I,cy:F,radius:R,startAngle:Y,endAngle:j}=XM(E);_={cx:I,cy:F,startAngle:Y,endAngle:j,innerRadius:R,outerRadius:R},P=KM,k=sl.cursorLine}else _={points:gJ(h,E,o)},P=Pw,k=sl.cursorLine;var z=typeof g=="object"&&"className"in g?g.className:void 0,L=kh(kh(kh(kh({stroke:"#ccc",pointerEvents:"none"},o),_),fE(g)),{},{payload:C,payloadIndex:O,className:ba("recharts-tooltip-cursor",z)});return N.createElement(Gf,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:k},N.createElement(Wne,{cursor:g,cursorComp:P,cursorProps:L}))}function Zne(e){var t=pne(),r=wZ(),a=_w(),l=Nne();return t==null||r==null||a==null||l==null?null:N.createElement(Kne,n2({},e,{offset:r,layout:a,tooltipAxisBandSize:t,chartName:l}))}var YI=N.createContext(null),Qne=()=>N.useContext(YI),ov={exports:{}},u8;function Jne(){return u8||(u8=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function l(g,p,x){this.fn=g,this.context=p,this.once=x||!1}function o(g,p,x,E,C){if(typeof x!="function")throw new TypeError("The listener must be a function");var O=new l(x,E||g,C),_=r?r+p:p;return g._events[_]?g._events[_].fn?g._events[_]=[g._events[_],O]:g._events[_].push(O):(g._events[_]=O,g._eventsCount++),g}function d(g,p){--g._eventsCount===0?g._events=new a:delete g._events[p]}function h(){this._events=new a,this._eventsCount=0}h.prototype.eventNames=function(){var p=[],x,E;if(this._eventsCount===0)return p;for(E in x=this._events)t.call(x,E)&&p.push(r?E.slice(1):E);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(x)):p},h.prototype.listeners=function(p){var x=r?r+p:p,E=this._events[x];if(!E)return[];if(E.fn)return[E.fn];for(var C=0,O=E.length,_=new Array(O);C<O;C++)_[C]=E[C].fn;return _},h.prototype.listenerCount=function(p){var x=r?r+p:p,E=this._events[x];return E?E.fn?1:E.length:0},h.prototype.emit=function(p,x,E,C,O,_){var P=r?r+p:p;if(!this._events[P])return!1;var k=this._events[P],I=arguments.length,F,R;if(k.fn){switch(k.once&&this.removeListener(p,k.fn,void 0,!0),I){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,x),!0;case 3:return k.fn.call(k.context,x,E),!0;case 4:return k.fn.call(k.context,x,E,C),!0;case 5:return k.fn.call(k.context,x,E,C,O),!0;case 6:return k.fn.call(k.context,x,E,C,O,_),!0}for(R=1,F=new Array(I-1);R<I;R++)F[R-1]=arguments[R];k.fn.apply(k.context,F)}else{var Y=k.length,j;for(R=0;R<Y;R++)switch(k[R].once&&this.removeListener(p,k[R].fn,void 0,!0),I){case 1:k[R].fn.call(k[R].context);break;case 2:k[R].fn.call(k[R].context,x);break;case 3:k[R].fn.call(k[R].context,x,E);break;case 4:k[R].fn.call(k[R].context,x,E,C);break;default:if(!F)for(j=1,F=new Array(I-1);j<I;j++)F[j-1]=arguments[j];k[R].fn.apply(k[R].context,F)}}return!0},h.prototype.on=function(p,x,E){return o(this,p,x,E,!1)},h.prototype.once=function(p,x,E){return o(this,p,x,E,!0)},h.prototype.removeListener=function(p,x,E,C){var O=r?r+p:p;if(!this._events[O])return this;if(!x)return d(this,O),this;var _=this._events[O];if(_.fn)_.fn===x&&(!C||_.once)&&(!E||_.context===E)&&d(this,O);else{for(var P=0,k=[],I=_.length;P<I;P++)(_[P].fn!==x||C&&!_[P].once||E&&_[P].context!==E)&&k.push(_[P]);k.length?this._events[O]=k.length===1?k[0]:k:d(this,O)}return this},h.prototype.removeAllListeners=function(p){var x;return p?(x=r?r+p:p,this._events[x]&&d(this,x)):(this._events=new a,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=r,h.EventEmitter=h,e.exports=h})(ov)),ov.exports}var ese=Jne();const tse=Bl(ese);var ff=new tse,s2="recharts.syncEvent.tooltip",d8="recharts.syncEvent.brush";function rse(e,t){if(t){var r=Number.parseInt(t,10);if(!Ei(r))return e?.[r]}}var ase={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},XI=zn({name:"options",initialState:ase,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),nse=XI.reducer,{createEventEmitter:sse}=XI.actions;function lse(e){return e.tooltip.syncInteraction}var ise={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},WI=zn({name:"chartData",initialState:ise,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:a}=t.payload;r!=null&&(e.dataStartIndex=r),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:m8,setDataStartEndIndexes:ose,setComputedData:Zme}=WI.actions,cse=WI.reducer,use=["x","y"];function f8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Tu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f8(Object(r),!0).forEach(function(a){dse(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dse(e,t,r){return(t=mse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mse(e){var t=fse(e,"string");return typeof t=="symbol"?t:t+""}function fse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hse(e,t){if(e==null)return{};var r,a,l=gse(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function gse(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function pse(){var e=Rt(oN),t=Rt(cN),r=va(),a=Rt(X7),l=Rt(Mi),o=_w(),d=Qp(),h=Rt(g=>g.rootProps.className);N.useEffect(()=>{if(e==null)return Af;var g=(p,x,E)=>{if(t!==E&&e===p){if(a==="index"){var C;if(d&&x!==null&&x!==void 0&&(C=x.payload)!==null&&C!==void 0&&C.coordinate&&x.payload.sourceViewBox){var O=x.payload.coordinate,{x:_,y:P}=O,k=hse(O,use),{x:I,y:F,width:R,height:Y}=x.payload.sourceViewBox,j=Tu(Tu({},k),{},{x:d.x+(R?(_-I)/R:0)*d.width,y:d.y+(Y?(P-F)/Y:0)*d.height});r(Tu(Tu({},x),{},{payload:Tu(Tu({},x.payload),{},{coordinate:j})}))}else r(x);return}if(l!=null){var z;if(typeof a=="function"){var L={activeTooltipIndex:x.payload.index==null?void 0:Number(x.payload.index),isTooltipActive:x.payload.active,activeIndex:x.payload.index==null?void 0:Number(x.payload.index),activeLabel:x.payload.label,activeDataKey:x.payload.dataKey,activeCoordinate:x.payload.coordinate},q=a(l,L);z=l[q]}else a==="value"&&(z=l.find(J=>String(J.value)===x.payload.label));var{coordinate:V}=x.payload;if(z==null||x.payload.active===!1||V==null||d==null){r(r2({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:W,y:H}=V,$=Math.min(W,d.x+d.width),ce=Math.min(H,d.y+d.height),me={x:o==="horizontal"?z.coordinate:$,y:o==="horizontal"?ce:z.coordinate},ae=r2({active:x.payload.active,coordinate:me,dataKey:x.payload.dataKey,index:String(z.index),label:x.payload.label,sourceViewBox:x.payload.sourceViewBox,graphicalItemId:x.payload.graphicalItemId});r(ae)}}};return ff.on(s2,g),()=>{ff.off(s2,g)}},[h,r,t,e,a,l,o,d])}function yse(){var e=Rt(oN),t=Rt(cN),r=va();N.useEffect(()=>{if(e==null)return Af;var a=(l,o,d)=>{t!==d&&e===l&&r(ose(o))};return ff.on(d8,a),()=>{ff.off(d8,a)}},[r,t,e])}function xse(){var e=va();N.useEffect(()=>{e(sse())},[e]),pse(),yse()}function bse(e,t,r,a,l,o){var d=Rt(O=>Cne(O,e,t)),h=Rt(cN),g=Rt(oN),p=Rt(X7),x=Rt(lse),E=x?.active,C=Qp();N.useEffect(()=>{if(!E&&g!=null&&h!=null){var O=r2({active:o,coordinate:r,dataKey:d,index:l,label:typeof a=="number"?String(a):a,sourceViewBox:C,graphicalItemId:void 0});ff.emit(s2,g,O,h)}},[E,r,d,l,a,h,g,p,o,C])}function h8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function g8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h8(Object(r),!0).forEach(function(a){vse(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vse(e,t,r){return(t=Ese(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ese(e){var t=wse(e,"string");return typeof t=="symbol"?t:t+""}function wse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nse(e){return e.dataKey}function Sse(e,t){return N.isValidElement(e)?N.cloneElement(e,t):typeof e=="function"?N.createElement(e,t):N.createElement(sQ,t)}var p8=[],Cse={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function l2(e){var t,r,a=js(e,Cse),{active:l,allowEscapeViewBox:o,animationDuration:d,animationEasing:h,content:g,filterNull:p,isAnimationActive:x,offset:E,payloadUniqBy:C,position:O,reverseDirection:_,useTranslate3d:P,wrapperStyle:k,cursor:I,shared:F,trigger:R,defaultIndex:Y,portal:j,axisId:z}=a,L=va(),q=typeof Y=="number"?String(Y):Y;N.useEffect(()=>{L(vae({shared:F,trigger:R,axisId:z,active:l,defaultIndex:q}))},[L,F,R,z,l,q]);var V=Qp(),W=zM(),H=hae(F),{activeIndex:$,isActive:ce}=(t=Rt(de=>One(de,H,R,q)))!==null&&t!==void 0?t:{},me=Rt(de=>Tne(de,H,R,q)),ae=Rt(de=>qI(de,H,R,q)),J=Rt(de=>Ane(de,H,R,q)),se=me,Ee=Qne(),we=(r=l??ce)!==null&&r!==void 0?r:!1,[te,K]=GP([se,we]),ee=H==="axis"?ae:void 0;bse(H,R,J,ee,$,we);var ge=j??Ee;if(ge==null||V==null||H==null)return null;var le=se??p8;we||(le=p8),p&&le.length&&(le=zP(le.filter(de=>de.value!=null&&(de.hide!==!0||a.includeHidden)),C,Nse));var Ce=le.length>0,ie=N.createElement(mQ,{allowEscapeViewBox:o,animationDuration:d,animationEasing:h,isAnimationActive:x,active:we,coordinate:J,hasPayload:Ce,offset:E,position:O,reverseDirection:_,useTranslate3d:P,viewBox:V,wrapperStyle:k,lastBoundingBox:te,innerRef:K,hasPortalFromProps:!!j},Sse(g,g8(g8({},a),{},{payload:le,label:ee,active:we,activeIndex:$,coordinate:J,accessibilityLayer:W})));return N.createElement(N.Fragment,null,E2.createPortal(ie,ge),we&&N.createElement(Zne,{cursor:I,tooltipEventType:H,coordinate:J,payload:le,index:$}))}var od=e=>null;od.displayName="Cell";function Ase(e,t,r){return(t=Tse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tse(e){var t=Ose(e,"string");return typeof t=="symbol"?t:t+""}function Ose(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class _se{constructor(t){Ase(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;a!=null&&this.cache.delete(a)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function y8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Dse(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y8(Object(r),!0).forEach(function(a){kse(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kse(e,t,r){return(t=Pse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pse(e){var t=Mse(e,"string");return typeof t=="symbol"?t:t+""}function Mse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ise={cacheSize:2e3,enableCache:!0},KI=Dse({},Ise),x8=new _se(KI.cacheSize),Rse={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},b8="recharts_measurement_span";function Lse(e,t){var r=t.fontSize||"",a=t.fontFamily||"",l=t.fontWeight||"",o=t.fontStyle||"",d=t.letterSpacing||"",h=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(a,"|").concat(l,"|").concat(o,"|").concat(d,"|").concat(h)}var v8=(e,t)=>{try{var r=document.getElementById(b8);r||(r=document.createElement("span"),r.setAttribute("id",b8),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Rse,t),r.textContent="".concat(e);var a=r.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},E8=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||a1.isSsr)return{width:0,height:0};if(!KI.enableCache)return v8(t,r);var a=Lse(t,r),l=x8.get(a);if(l)return l;var o=v8(t,r);return x8.set(a,o),o},w8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,N8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Bse=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Fse=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ZI={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Use=Object.keys(ZI),ju="NaN";function jse(e,t){return e*ZI[t]}class Rn{static parse(t){var r,[,a,l]=(r=Fse.exec(t))!==null&&r!==void 0?r:[];return new Rn(parseFloat(a),l??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Ei(t)&&(this.unit=""),r!==""&&!Bse.test(r)&&(this.num=NaN,this.unit=""),Use.includes(r)&&(this.num=jse(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Rn(NaN,""):new Rn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Rn(NaN,""):new Rn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Rn(NaN,""):new Rn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Rn(NaN,""):new Rn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ei(this.num)}}function QI(e){if(e.includes(ju))return ju;for(var t=e;t.includes("*")||t.includes("/");){var r,[,a,l,o]=(r=w8.exec(t))!==null&&r!==void 0?r:[],d=Rn.parse(a??""),h=Rn.parse(o??""),g=l==="*"?d.multiply(h):d.divide(h);if(g.isNaN())return ju;t=t.replace(w8,g.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var p,[,x,E,C]=(p=N8.exec(t))!==null&&p!==void 0?p:[],O=Rn.parse(x??""),_=Rn.parse(C??""),P=E==="+"?O.add(_):O.subtract(_);if(P.isNaN())return ju;t=t.replace(N8,P.toString())}return t}var S8=/\(([^()]*)\)/;function zse(e){for(var t=e,r;(r=S8.exec(t))!=null;){var[,a]=r;t=t.replace(S8,QI(a))}return t}function Vse(e){var t=e.replace(/\s+/g,"");return t=zse(t),t=QI(t),t}function Hse(e){try{return Vse(e)}catch{return ju}}function cv(e){var t=Hse(e.slice(5,-1));return t===ju?"":t}var $se=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],qse=["dx","dy","angle","className","breakAll"];function i2(){return i2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i2.apply(null,arguments)}function C8(e,t){if(e==null)return{};var r,a,l=Gse(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Gse(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var JI=/[ \f\n\r\t\v\u2028\u2029]+/,eR=e=>{var{children:t,breakAll:r,style:a}=e;try{var l=[];cs(t)||(r?l=t.toString().split(""):l=t.toString().split(JI));var o=l.map(h=>({word:h,width:E8(h,a).width})),d=r?0:E8("",a).width;return{wordsWithComputedWidth:o,spaceWidth:d}}catch{return null}};function Yse(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var tR=(e,t,r,a)=>e.reduce((l,o)=>{var{word:d,width:h}=o,g=l[l.length-1];if(g&&h!=null&&(t==null||a||g.width+h+r<Number(t)))g.words.push(d),g.width+=h+r;else{var p={words:[d],width:h};l.push(p)}return l},[]),rR=e=>e.reduce((t,r)=>t.width>r.width?t:r),Xse="",A8=(e,t,r,a,l,o,d,h)=>{var g=e.slice(0,t),p=eR({breakAll:r,style:a,children:g+Xse});if(!p)return[!1,[]];var x=tR(p.wordsWithComputedWidth,o,d,h),E=x.length>l||rR(x).width>Number(o);return[E,x]},Wse=(e,t,r,a,l)=>{var{maxLines:o,children:d,style:h,breakAll:g}=e,p=Mt(o),x=String(d),E=tR(t,a,r,l);if(!p||l)return E;var C=E.length>o||rR(E).width>Number(a);if(!C)return E;for(var O=0,_=x.length-1,P=0,k;O<=_&&P<=x.length-1;){var I=Math.floor((O+_)/2),F=I-1,[R,Y]=A8(x,F,g,h,o,a,r,l),[j]=A8(x,I,g,h,o,a,r,l);if(!R&&!j&&(O=I+1),R&&j&&(_=I-1),!R&&j){k=Y;break}P++}return k||E},T8=e=>{var t=cs(e)?[]:e.toString().split(JI);return[{words:t,width:void 0}]},Kse=e=>{var{width:t,scaleToFit:r,children:a,style:l,breakAll:o,maxLines:d}=e;if((t||r)&&!a1.isSsr){var h,g,p=eR({breakAll:o,children:a,style:l});if(p){var{wordsWithComputedWidth:x,spaceWidth:E}=p;h=x,g=E}else return T8(a);return Wse({breakAll:o,children:a,maxLines:d,style:l},h,g,t,!!r)}return T8(a)},aR="#808080",Zse={angle:0,breakAll:!1,capHeight:"0.71em",fill:aR,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},$N=N.forwardRef((e,t)=>{var r=js(e,Zse),{x:a,y:l,lineHeight:o,capHeight:d,fill:h,scaleToFit:g,textAnchor:p,verticalAnchor:x}=r,E=C8(r,$se),C=N.useMemo(()=>Kse({breakAll:E.breakAll,children:E.children,maxLines:E.maxLines,scaleToFit:g,style:E.style,width:E.width}),[E.breakAll,E.children,E.maxLines,g,E.style,E.width]),{dx:O,dy:_,angle:P,className:k,breakAll:I}=E,F=C8(E,qse);if(!Ni(a)||!Ni(l)||C.length===0)return null;var R=Number(a)+(Mt(O)?O:0),Y=Number(l)+(Mt(_)?_:0);if(!Ka(R)||!Ka(Y))return null;var j;switch(x){case"start":j=cv("calc(".concat(d,")"));break;case"middle":j=cv("calc(".concat((C.length-1)/2," * -").concat(o," + (").concat(d," / 2))"));break;default:j=cv("calc(".concat(C.length-1," * -").concat(o,")"));break}var z=[];if(g){var L=C[0].width,{width:q}=E;z.push("scale(".concat(Mt(q)&&Mt(L)?q/L:1,")"))}return P&&z.push("rotate(".concat(P,", ").concat(R,", ").concat(Y,")")),z.length&&(F.transform=z.join(" ")),N.createElement("text",i2({},Rs(F),{ref:t,x:R,y:Y,className:ba("recharts-text",k),textAnchor:p,fill:h.includes("url")?aR:h}),C.map((V,W)=>{var H=V.words.join(I?"":" ");return N.createElement("tspan",{x:R,dy:W===0?j:o,key:"".concat(H,"-").concat(W)},H)}))});$N.displayName="Text";var Qse=["labelRef"];function Jse(e,t){if(e==null)return{};var r,a,l=ele(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function ele(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function O8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Oa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O8(Object(r),!0).forEach(function(a){tle(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tle(e,t,r){return(t=rle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rle(e){var t=ale(e,"string");return typeof t=="symbol"?t:t+""}function ale(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function up(){return up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},up.apply(null,arguments)}var nle=N.createContext(null),sle=()=>{var e=N.useContext(nle),t=Qp();return e||DM(t)},lle=N.createContext(null),ile=()=>{var e=N.useContext(lle),t=Rt(J7);return e||t},ole=e=>{var{value:t,formatter:r}=e,a=cs(e.children)?t:e.children;return typeof r=="function"?r(a):a},cle=e=>e!=null&&typeof e=="function",ule=(e,t)=>{var r=Bn(t-e),a=Math.min(Math.abs(t-e),360);return r*a},dle=(e,t,r,a,l)=>{var{offset:o,className:d}=e,{cx:h,cy:g,innerRadius:p,outerRadius:x,startAngle:E,endAngle:C,clockWise:O}=l,_=(p+x)/2,P=ule(E,C),k=P>=0?1:-1,I,F;switch(t){case"insideStart":I=E+k*o,F=O;break;case"insideEnd":I=C-k*o,F=!O;break;case"end":I=C+k*o,F=O;break;default:throw new Error("Unsupported position ".concat(t))}F=P<=0?F:!F;var R=ka(h,g,_,I),Y=ka(h,g,_,I+(F?1:-1)*359),j="M".concat(R.x,",").concat(R.y,`
    A`).concat(_,",").concat(_,",0,1,").concat(F?0:1,`,
    `).concat(Y.x,",").concat(Y.y),z=cs(e.id)?Qm("recharts-radial-line-"):e.id;return N.createElement("text",up({},a,{dominantBaseline:"central",className:ba("recharts-radial-bar-label",d)}),N.createElement("defs",null,N.createElement("path",{id:z,d:j})),N.createElement("textPath",{xlinkHref:"#".concat(z)},r))},mle=(e,t,r)=>{var{cx:a,cy:l,innerRadius:o,outerRadius:d,startAngle:h,endAngle:g}=e,p=(h+g)/2;if(r==="outside"){var{x,y:E}=ka(a,l,d+t,p);return{x,y:E,textAnchor:x>=a?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"end"};var C=(o+d)/2,{x:O,y:_}=ka(a,l,C,p);return{x:O,y:_,textAnchor:"middle",verticalAnchor:"middle"}},o2=e=>"cx"in e&&Mt(e.cx),fle=(e,t)=>{var{parentViewBox:r,offset:a,position:l}=e,o;r!=null&&!o2(r)&&(o=r);var{x:d,y:h,upperWidth:g,lowerWidth:p,height:x}=t,E=d,C=d+(g-p)/2,O=(E+C)/2,_=(g+p)/2,P=E+g/2,k=x>=0?1:-1,I=k*a,F=k>0?"end":"start",R=k>0?"start":"end",Y=g>=0?1:-1,j=Y*a,z=Y>0?"end":"start",L=Y>0?"start":"end";if(l==="top"){var q={x:E+g/2,y:h-I,textAnchor:"middle",verticalAnchor:F};return Oa(Oa({},q),o?{height:Math.max(h-o.y,0),width:g}:{})}if(l==="bottom"){var V={x:C+p/2,y:h+x+I,textAnchor:"middle",verticalAnchor:R};return Oa(Oa({},V),o?{height:Math.max(o.y+o.height-(h+x),0),width:p}:{})}if(l==="left"){var W={x:O-j,y:h+x/2,textAnchor:z,verticalAnchor:"middle"};return Oa(Oa({},W),o?{width:Math.max(W.x-o.x,0),height:x}:{})}if(l==="right"){var H={x:O+_+j,y:h+x/2,textAnchor:L,verticalAnchor:"middle"};return Oa(Oa({},H),o?{width:Math.max(o.x+o.width-H.x,0),height:x}:{})}var $=o?{width:_,height:x}:{};return l==="insideLeft"?Oa({x:O+j,y:h+x/2,textAnchor:L,verticalAnchor:"middle"},$):l==="insideRight"?Oa({x:O+_-j,y:h+x/2,textAnchor:z,verticalAnchor:"middle"},$):l==="insideTop"?Oa({x:E+g/2,y:h+I,textAnchor:"middle",verticalAnchor:R},$):l==="insideBottom"?Oa({x:C+p/2,y:h+x-I,textAnchor:"middle",verticalAnchor:F},$):l==="insideTopLeft"?Oa({x:E+j,y:h+I,textAnchor:L,verticalAnchor:R},$):l==="insideTopRight"?Oa({x:E+g-j,y:h+I,textAnchor:z,verticalAnchor:R},$):l==="insideBottomLeft"?Oa({x:C+j,y:h+x-I,textAnchor:L,verticalAnchor:F},$):l==="insideBottomRight"?Oa({x:C+p-j,y:h+x-I,textAnchor:z,verticalAnchor:F},$):l&&typeof l=="object"&&(Mt(l.x)||wi(l.x))&&(Mt(l.y)||wi(l.y))?Oa({x:d+ls(l.x,_),y:h+ls(l.y,x),textAnchor:"end",verticalAnchor:"end"},$):Oa({x:P,y:h+x/2,textAnchor:"middle",verticalAnchor:"middle"},$)},hle={angle:0,offset:5,zIndex:sl.label,position:"middle",textBreakAll:!1};function nR(e){var t=js(e,hle),{viewBox:r,position:a,value:l,children:o,content:d,className:h="",textBreakAll:g,labelRef:p}=t,x=ile(),E=sle(),C=a==="center"?E:x??E,O,_,P;if(r==null?O=C:o2(r)?O=r:O=DM(r),!O||cs(l)&&cs(o)&&!N.isValidElement(d)&&typeof d!="function")return null;var k=Oa(Oa({},t),{},{viewBox:O});if(N.isValidElement(d)){var{labelRef:I}=k,F=Jse(k,Qse);return N.cloneElement(d,F)}if(typeof d=="function"){if(_=N.createElement(d,k),N.isValidElement(_))return _}else _=ole(t);var R=Rs(t);if(o2(O)){if(a==="insideStart"||a==="insideEnd"||a==="end")return dle(t,a,_,R,O);P=mle(O,t.offset,t.position)}else P=fle(t,O);return N.createElement(Gf,{zIndex:t.zIndex},N.createElement($N,up({ref:p,className:ba("recharts-label",h)},R,P,{textAnchor:Yse(R.textAnchor)?R.textAnchor:P.textAnchor,breakAll:g}),_))}nR.displayName="Label";var uv={},dv={},_8;function gle(){return _8||(_8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(dv)),dv}var mv={},D8;function ple(){return D8||(D8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(mv)),mv}var k8;function yle(){return k8||(k8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gle(),r=ple(),a=xw();function l(o){if(a.isArrayLike(o))return t.last(r.toArray(o))}e.last=l})(uv)),uv}var fv,P8;function xle(){return P8||(P8=1,fv=yle().last),fv}var ble=xle();const vle=Bl(ble);var Ele=["valueAccessor"],wle=["dataKey","clockWise","id","textBreakAll","zIndex"];function dp(){return dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},dp.apply(null,arguments)}function M8(e,t){if(e==null)return{};var r,a,l=Nle(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Nle(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Sle=e=>Array.isArray(e.value)?vle(e.value):e.value,sR=N.createContext(void 0);sR.Provider;var lR=N.createContext(void 0),Cle=lR.Provider;function Ale(){return N.useContext(sR)}function Tle(){return N.useContext(lR)}function cg(e){var{valueAccessor:t=Sle}=e,r=M8(e,Ele),{dataKey:a,clockWise:l,id:o,textBreakAll:d,zIndex:h}=r,g=M8(r,wle),p=Ale(),x=Tle(),E=p||x;return!E||!E.length?null:N.createElement(Gf,{zIndex:h??sl.label},N.createElement(Po,{className:"recharts-label-list"},E.map((C,O)=>{var _,P=cs(a)?t(C,O):xa(C&&C.payload,a),k=cs(o)?{}:{id:"".concat(o,"-").concat(O)};return N.createElement(nR,dp({key:"label-".concat(O)},Rs(C),g,k,{fill:(_=r.fill)!==null&&_!==void 0?_:C.fill,parentViewBox:C.parentViewBox,value:P,textBreakAll:d,viewBox:C.viewBox,index:O,zIndex:0}))})))}cg.displayName="LabelList";function Ole(e){var{label:t}=e;return t?t===!0?N.createElement(cg,{key:"labelList-implicit"}):N.isValidElement(t)||cle(t)?N.createElement(cg,{key:"labelList-implicit",content:t}):typeof t=="object"?N.createElement(cg,dp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var iR=e=>e.graphicalItems.polarItems,_le=Me([Jr,Bf],gN),b1=Me([iR,na,_le],pN),Dle=Me([b1],yN),v1=Me([Dle,nN],xN),kle=Me([v1,na,b1],vN);Me([v1,na,b1],(e,t,r)=>r.length>0?e.flatMap(a=>r.flatMap(l=>{var o,d=xa(a,(o=t.dataKey)!==null&&o!==void 0?o:l.dataKey);return{value:d,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(a=>({value:xa(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})));var I8=()=>{},Ple=Me([v1,na,b1,g1,Jr],SN),Mle=Me([na,wN,NN,I8,Ple,I8,Rr,Jr],CN),oR=Me([na,Rr,v1,kle,Lf,Jr,Mle],AN),Ile=Me([oR,na,Nd],_N);Me([na,oR,Ile,Jr],kN);var Rle={radiusAxis:{},angleAxis:{}},cR=zn({name:"polarAxis",initialState:Rle,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Qme,removeRadiusAxis:Jme,addAngleAxis:efe,removeAngleAxis:tfe}=cR.actions,Lle=cR.reducer;function R8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function L8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R8(Object(r),!0).forEach(function(a){Ble(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ble(e,t,r){return(t=Fle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fle(e){var t=Ule(e,"string");return typeof t=="symbol"?t:t+""}function Ule(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jle=(e,t)=>t,qN=Me([iR,jle],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),zle=[],GN=(e,t,r)=>r?.length===0?zle:r,uR=Me([nN,qN,GN],(e,t,r)=>{var{chartData:a}=e;if(t!=null){var l;if(t?.data!=null&&t.data.length>0?l=t.data:l=a,(!l||!l.length)&&r!=null&&(l=r.map(o=>L8(L8({},t.presentationProps),o.props))),l!=null)return l}}),Vle=Me([uR,qN,GN],(e,t,r)=>{if(!(e==null||t==null))return e.map((a,l)=>{var o,d=xa(a,t.nameKey,t.name),h;return r!=null&&(o=r[l])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?h=r[l].props.fill:typeof a=="object"&&a!=null&&"fill"in a?h=a.fill:h=t.fill,{value:NM(d,t.dataKey),color:h,payload:a,type:t.legendType}})}),Hle=Me([uR,qN,GN,Za],(e,t,r,a)=>{if(!(t==null||e==null))return Gie({offset:a,pieSettings:t,displayedData:e,cells:r})}),hv={exports:{}},Sr={};var B8;function $le(){if(B8)return Sr;B8=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.for("react.view_transition"),O=Symbol.for("react.client.reference");function _(P){if(typeof P=="object"&&P!==null){var k=P.$$typeof;switch(k){case e:switch(P=P.type,P){case r:case l:case a:case g:case p:case C:return P;default:switch(P=P&&P.$$typeof,P){case d:case h:case E:case x:return P;case o:return P;default:return k}}case t:return k}}}return Sr.ContextConsumer=o,Sr.ContextProvider=d,Sr.Element=e,Sr.ForwardRef=h,Sr.Fragment=r,Sr.Lazy=E,Sr.Memo=x,Sr.Portal=t,Sr.Profiler=l,Sr.StrictMode=a,Sr.Suspense=g,Sr.SuspenseList=p,Sr.isContextConsumer=function(P){return _(P)===o},Sr.isContextProvider=function(P){return _(P)===d},Sr.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===e},Sr.isForwardRef=function(P){return _(P)===h},Sr.isFragment=function(P){return _(P)===r},Sr.isLazy=function(P){return _(P)===E},Sr.isMemo=function(P){return _(P)===x},Sr.isPortal=function(P){return _(P)===t},Sr.isProfiler=function(P){return _(P)===l},Sr.isStrictMode=function(P){return _(P)===a},Sr.isSuspense=function(P){return _(P)===g},Sr.isSuspenseList=function(P){return _(P)===p},Sr.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===r||P===l||P===a||P===g||P===p||typeof P=="object"&&P!==null&&(P.$$typeof===E||P.$$typeof===x||P.$$typeof===d||P.$$typeof===o||P.$$typeof===h||P.$$typeof===O||P.getModuleId!==void 0)},Sr.typeOf=_,Sr}var F8;function qle(){return F8||(F8=1,hv.exports=$le()),hv.exports}var Gle=qle(),U8=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",j8=null,gv=null,dR=e=>{if(e===j8&&Array.isArray(gv))return gv;var t=[];return N.Children.forEach(e,r=>{cs(r)||(Gle.isFragment(r)?t=t.concat(dR(r.props.children)):t.push(r))}),gv=t,j8=e,t};function mR(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(l=>U8(l)):a=[U8(t)],dR(e).forEach(l=>{var o=Zm(l,"type.displayName")||Zm(l,"type.name");o&&a.indexOf(o)!==-1&&r.push(l)}),r}var pv={},z8;function Yle(){return z8||(z8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const l=r[Symbol.toStringTag];return l==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${l}]`}let a=r;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(r)===a}e.isPlainObject=t})(pv)),pv}var yv,V8;function Xle(){return V8||(V8=1,yv=Yle().isPlainObject),yv}var Wle=Xle();const Kle=Bl(Wle);function H8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function $8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H8(Object(r),!0).forEach(function(a){Zle(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Zle(e,t,r){return(t=Qle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qle(e){var t=Jle(e,"string");return typeof t=="symbol"?t:t+""}function Jle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mp(){return mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},mp.apply(null,arguments)}var q8=(e,t,r,a,l)=>{var o=r-a,d;return d="M ".concat(e,",").concat(t),d+="L ".concat(e+r,",").concat(t),d+="L ".concat(e+r-o/2,",").concat(t+l),d+="L ".concat(e+r-o/2-a,",").concat(t+l),d+="L ".concat(e,",").concat(t," Z"),d},eie={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tie=e=>{var t=js(e,eie),{x:r,y:a,upperWidth:l,lowerWidth:o,height:d,className:h}=t,{animationEasing:g,animationDuration:p,animationBegin:x,isUpdateAnimationActive:E}=t,C=N.useRef(null),[O,_]=N.useState(-1),P=N.useRef(l),k=N.useRef(o),I=N.useRef(d),F=N.useRef(r),R=N.useRef(a),Y=Iw(e,"trapezoid-");if(N.useEffect(()=>{if(C.current&&C.current.getTotalLength)try{var me=C.current.getTotalLength();me&&_(me)}catch{}},[]),r!==+r||a!==+a||l!==+l||o!==+o||d!==+d||l===0&&o===0||d===0)return null;var j=ba("recharts-trapezoid",h);if(!E)return N.createElement("g",null,N.createElement("path",mp({},Rs(t),{className:j,d:q8(r,a,l,o,d)})));var z=P.current,L=k.current,q=I.current,V=F.current,W=R.current,H="0px ".concat(O===-1?1:O,"px"),$="".concat(O,"px 0px"),ce=VM(["strokeDasharray"],p,g);return N.createElement(Mw,{animationId:Y,key:Y,canBegin:O>0,duration:p,easing:g,isActive:E,begin:x},me=>{var ae=tl(z,l,me),J=tl(L,o,me),se=tl(q,d,me),Ee=tl(V,r,me),we=tl(W,a,me);C.current&&(P.current=ae,k.current=J,I.current=se,F.current=Ee,R.current=we);var te=me>0?{transition:ce,strokeDasharray:$}:{strokeDasharray:H};return N.createElement("path",mp({},Rs(t),{className:j,d:q8(Ee,we,ae,J,se),ref:C,style:$8($8({},te),t.style)}))})},rie=["option","shapeType","propTransformer","activeClassName"];function aie(e,t){if(e==null)return{};var r,a,l=nie(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function nie(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function G8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function fp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G8(Object(r),!0).forEach(function(a){sie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function sie(e,t,r){return(t=lie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lie(e){var t=iie(e,"string");return typeof t=="symbol"?t:t+""}function iie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oie(e,t){return fp(fp({},t),e)}function cie(e,t){return e==="symbols"}function Y8(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return N.createElement(GM,r);case"trapezoid":return N.createElement(tie,r);case"sector":return N.createElement(KM,r);case"symbols":if(cie(t))return N.createElement(yw,r);break;case"curve":return N.createElement(Pw,r);default:return null}}function uie(e){return N.isValidElement(e)?e.props:e}function die(e){var{option:t,shapeType:r,propTransformer:a=oie,activeClassName:l="recharts-active-shape"}=e,o=aie(e,rie),d;if(N.isValidElement(t))d=N.cloneElement(t,fp(fp({},o),uie(t)));else if(typeof t=="function")d=t(o,o.index);else if(Kle(t)&&typeof t!="boolean"){var h=a(t,o);d=N.createElement(Y8,{shapeType:r,elementProps:h})}else{var g=o;d=N.createElement(Y8,{shapeType:r,elementProps:g})}return o.isActive?N.createElement(Po,{className:l},d):d}var mie=(e,t,r)=>{var a=va();return(l,o)=>d=>{e?.(l,o,d),a(AI({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:r}))}},fie=e=>{var t=va();return(r,a)=>l=>{e?.(r,a,l),t(Eae())}},hie=(e,t,r)=>{var a=va();return(l,o)=>d=>{e?.(l,o,d),a(wae({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:r}))}};function gie(e){var{tooltipEntrySettings:t}=e,r=va(),a=Bo(),l=N.useRef(null);return N.useLayoutEffect(()=>{a||(l.current===null?r(yae(t)):l.current!==t&&r(xae({prev:l.current,next:t})),l.current=t)},[t,r,a]),N.useLayoutEffect(()=>()=>{l.current&&(r(bae(l.current)),l.current=null)},[r]),null}function pie(e){var{legendPayload:t}=e,r=va(),a=Rt(Rr),l=N.useRef(null);return N.useLayoutEffect(()=>{a!=="centric"&&a!=="radial"||(l.current===null?r(FZ(t)):l.current!==t&&r(UZ({prev:l.current,next:t})),l.current=t)},[r,a,t]),N.useLayoutEffect(()=>()=>{l.current&&(r(jZ(l.current)),l.current=null)},[r]),null}var xv,yie=()=>{var[e]=N.useState(()=>Qm("uid-"));return e},xie=(xv=nL.useId)!==null&&xv!==void 0?xv:yie;function fR(e,t){var r=xie();return t||(e?"".concat(e,"-").concat(r):r)}var bie=N.createContext(void 0),vie=e=>{var{id:t,type:r,children:a}=e,l=fR("recharts-".concat(r),t);return N.createElement(bie.Provider,{value:l},a(l))},Eie={cartesianItems:[],polarItems:[]},hR=zn({name:"graphicalItems",initialState:Eie,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Xr()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:a}=t.payload,l=il(e).cartesianItems.indexOf(r);l>-1&&(e.cartesianItems[l]=a)},prepare:Xr()},removeCartesianGraphicalItem:{reducer(e,t){var r=il(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Xr()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Xr()},removePolarGraphicalItem:{reducer(e,t){var r=il(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Xr()}}}),{addCartesianGraphicalItem:rfe,replaceCartesianGraphicalItem:afe,removeCartesianGraphicalItem:nfe,addPolarGraphicalItem:wie,removePolarGraphicalItem:Nie}=hR.actions,Sie=hR.reducer;function Cie(e){var t=va();return N.useLayoutEffect(()=>(t(wie(e)),()=>{t(Nie(e))}),[t,e]),null}var Aie=["key"],Tie=["onMouseEnter","onClick","onMouseLeave"],Oie=["id"],_ie=["id"];function X8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function ua(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X8(Object(r),!0).forEach(function(a){Die(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Die(e,t,r){return(t=kie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kie(e){var t=Pie(e,"string");return typeof t=="symbol"?t:t+""}function Pie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ro(){return Ro=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ro.apply(null,arguments)}function E1(e,t){if(e==null)return{};var r,a,l=Mie(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Mie(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Iie(e){var t=N.useMemo(()=>mR(e.children,od),[e.children]),r=Rt(a=>Vle(a,e.id,t));return r==null?null:N.createElement(pie,{legendPayload:r})}var Rie=N.memo(e=>{var{dataKey:t,nameKey:r,sectors:a,stroke:l,strokeWidth:o,fill:d,name:h,hide:g,tooltipType:p}=e,x={dataDefinedOnItem:a.map(E=>E.tooltipPayload),positions:a.map(E=>E.tooltipPosition),settings:{stroke:l,strokeWidth:o,fill:d,dataKey:t,nameKey:r,name:NM(h,t),hide:g,type:p,color:d,unit:""}};return N.createElement(gie,{tooltipEntrySettings:x})}),Lie=(e,t)=>e>t?"start":e<t?"end":"middle",Bie=(e,t,r)=>ls(typeof t=="function"?t(e):t,r,r*.8),Fie=(e,t,r)=>{var{top:a,left:l,width:o,height:d}=t,h=YM(o,d),g=l+ls(e.cx,o,o/2),p=a+ls(e.cy,d,d/2),x=ls(e.innerRadius,h,0),E=Bie(r,e.outerRadius,h),C=e.maxRadius||Math.sqrt(o*o+d*d)/2;return{cx:g,cy:p,innerRadius:x,outerRadius:E,maxRadius:C}},Uie=(e,t)=>{var r=Bn(t-e),a=Math.min(Math.abs(t-e),360);return r*a};function jie(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var zie=(e,t)=>{if(N.isValidElement(e))return N.cloneElement(e,t);if(typeof e=="function")return e(t);var r=ba("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:a}=t,l=E1(t,Aie);return N.createElement(Pw,Ro({},l,{type:"linear",className:r}))},Vie=(e,t,r)=>{if(N.isValidElement(e))return N.cloneElement(e,t);var a=r;if(typeof e=="function"&&(a=e(t),N.isValidElement(a)))return a;var l=ba("recharts-pie-label-text",jie(e));return N.createElement($N,Ro({},t,{alignmentBaseline:"middle",className:l}),a)};function Hie(e){var{sectors:t,props:r,showLabels:a}=e,{label:l,labelLine:o,dataKey:d}=r;if(!a||!l||!t)return null;var h=Ju(r),g=fE(l),p=fE(o),x=typeof l=="object"&&"offsetRadius"in l&&typeof l.offsetRadius=="number"&&l.offsetRadius||20,E=t.map((C,O)=>{var _=(C.startAngle+C.endAngle)/2,P=ka(C.cx,C.cy,C.outerRadius+x,_),k=ua(ua(ua(ua({},h),C),{},{stroke:"none"},g),{},{index:O,textAnchor:Lie(P.x,C.cx)},P),I=ua(ua(ua(ua({},h),C),{},{fill:"none",stroke:C.fill},p),{},{index:O,points:[ka(C.cx,C.cy,C.outerRadius,_),P],key:"line"});return N.createElement(Gf,{zIndex:sl.label,key:"label-".concat(C.startAngle,"-").concat(C.endAngle,"-").concat(C.midAngle,"-").concat(O)},N.createElement(Po,null,o&&zie(o,I),Vie(l,k,xa(C,d))))});return N.createElement(Po,{className:"recharts-pie-labels"},E)}function $ie(e){var{sectors:t,props:r,showLabels:a}=e,{label:l}=r;return typeof l=="object"&&l!=null&&"position"in l?N.createElement(Ole,{label:l}):N.createElement(Hie,{sectors:t,props:r,showLabels:a})}function qie(e){var{sectors:t,activeShape:r,inactiveShape:a,allOtherPieProps:l,shape:o,id:d}=e,h=Rt(mf),g=Rt(jI),p=Rt(ine),{onMouseEnter:x,onClick:E,onMouseLeave:C}=l,O=E1(l,Tie),_=mie(x,l.dataKey,d),P=fie(C),k=hie(E,l.dataKey,d);return t==null||t.length===0?null:N.createElement(N.Fragment,null,t.map((I,F)=>{if(I?.startAngle===0&&I?.endAngle===0&&t.length!==1)return null;var R=p==null||p===d,Y=String(F)===h&&(g==null||l.dataKey===g)&&R,j=h?a:null,z=r&&Y?r:j,L=ua(ua({},I),{},{stroke:I.stroke,tabIndex:-1,[CM]:F,[AM]:l.dataKey});return N.createElement(Po,Ro({key:"sector-".concat(I?.startAngle,"-").concat(I?.endAngle,"-").concat(I.midAngle,"-").concat(F),tabIndex:-1,className:"recharts-pie-sector"},kP(O,I,F),{onMouseEnter:_(I,F),onMouseLeave:P(I,F),onClick:k(I,F)}),N.createElement(die,Ro({option:o??z,index:F,shapeType:"sector",isActive:Y},L)))}))}function Gie(e){var t,{pieSettings:r,displayedData:a,cells:l,offset:o}=e,{cornerRadius:d,startAngle:h,endAngle:g,dataKey:p,nameKey:x,tooltipType:E}=r,C=Math.abs(r.minAngle),O=Uie(h,g),_=Math.abs(O),P=a.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,k=a.filter(z=>xa(z,p,0)!==0).length,I=(_>=360?k:k-1)*P,F=_-k*C-I,R=a.reduce((z,L)=>{var q=xa(L,p,0);return z+(Mt(q)?q:0)},0),Y;if(R>0){var j;Y=a.map((z,L)=>{var q=xa(z,p,0),V=xa(z,x,L),W=Fie(r,o,z),H=(Mt(q)?q:0)/R,$,ce=ua(ua({},z),l&&l[L]&&l[L].props);L?$=j.endAngle+Bn(O)*P*(q!==0?1:0):$=h;var me=$+Bn(O)*((q!==0?C:0)+H*F),ae=($+me)/2,J=(W.innerRadius+W.outerRadius)/2,se=[{name:V,value:q,payload:ce,dataKey:p,type:E}],Ee=ka(W.cx,W.cy,J,ae);return j=ua(ua(ua(ua({},r.presentationProps),{},{percent:H,cornerRadius:typeof d=="string"?parseFloat(d):d,name:V,tooltipPayload:se,midAngle:ae,middleRadius:J,tooltipPosition:Ee},ce),W),{},{value:q,dataKey:p,startAngle:$,endAngle:me,payload:ce,paddingAngle:Bn(O)*P}),j})}return Y}function Yie(e){var{showLabels:t,sectors:r,children:a}=e,l=N.useMemo(()=>!t||!r?[]:r.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[r,t]);return N.createElement(Cle,{value:t?l:void 0},a)}function Xie(e){var{props:t,previousSectorsRef:r,id:a}=e,{sectors:l,isAnimationActive:o,animationBegin:d,animationDuration:h,animationEasing:g,activeShape:p,inactiveShape:x,onAnimationStart:E,onAnimationEnd:C}=t,O=Iw(t,"recharts-pie-"),_=r.current,[P,k]=N.useState(!1),I=N.useCallback(()=>{typeof C=="function"&&C(),k(!1)},[C]),F=N.useCallback(()=>{typeof E=="function"&&E(),k(!0)},[E]);return N.createElement(Yie,{showLabels:!P,sectors:l},N.createElement(Mw,{animationId:O,begin:d,duration:h,isActive:o,easing:g,onAnimationStart:F,onAnimationEnd:I,key:O},R=>{var Y=[],j=l&&l[0],z=j?.startAngle;return l?.forEach((L,q)=>{var V=_&&_[q],W=q>0?Zm(L,"paddingAngle",0):0;if(V){var H=tl(V.endAngle-V.startAngle,L.endAngle-L.startAngle,R),$=ua(ua({},L),{},{startAngle:z+W,endAngle:z+H+W});Y.push($),z=$.endAngle}else{var{endAngle:ce,startAngle:me}=L,ae=tl(0,ce-me,R),J=ua(ua({},L),{},{startAngle:z+W,endAngle:z+ae+W});Y.push(J),z=J.endAngle}}),r.current=Y,N.createElement(Po,null,N.createElement(qie,{sectors:Y,activeShape:p,inactiveShape:x,allOtherPieProps:t,shape:t.shape,id:a}))}),N.createElement($ie,{showLabels:!P,sectors:l,props:t}),t.children)}var Wie={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:sl.area};function Kie(e){var{id:t}=e,r=E1(e,Oie),{hide:a,className:l,rootTabIndex:o}=e,d=N.useMemo(()=>mR(e.children,od),[e.children]),h=Rt(x=>Hle(x,t,d)),g=N.useRef(null),p=ba("recharts-pie",l);return a||h==null?(g.current=null,N.createElement(Po,{tabIndex:o,className:p})):N.createElement(Gf,{zIndex:e.zIndex},N.createElement(Rie,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:h,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),N.createElement(Po,{tabIndex:o,className:p},N.createElement(Xie,{props:ua(ua({},r),{},{sectors:h}),previousSectorsRef:g,id:t})))}function hp(e){var t=js(e,Wie),{id:r}=t,a=E1(t,_ie),l=Ju(a);return N.createElement(vie,{id:r,type:"pie"},o=>N.createElement(N.Fragment,null,N.createElement(Cie,{type:"pie",id:o,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:l,maxRadius:t.maxRadius}),N.createElement(Iie,Ro({},a,{id:o})),N.createElement(Kie,Ro({},a,{id:o}))))}hp.displayName="Pie";function W8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function K8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W8(Object(r),!0).forEach(function(a){Zie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Zie(e,t,r){return(t=Qie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qie(e){var t=Jie(e,"string");return typeof t=="symbol"?t:t+""}function Jie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eoe={xAxis:{},yAxis:{},zAxis:{}},gR=zn({name:"cartesianAxis",initialState:eoe,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Xr()},replaceXAxis:{reducer(e,t){var{prev:r,next:a}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==a.id&&delete e.xAxis[r.id],e.xAxis[a.id]=a)},prepare:Xr()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Xr()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Xr()},replaceYAxis:{reducer(e,t){var{prev:r,next:a}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==a.id&&delete e.yAxis[r.id],e.yAxis[a.id]=a)},prepare:Xr()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Xr()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Xr()},replaceZAxis:{reducer(e,t){var{prev:r,next:a}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==a.id&&delete e.zAxis[r.id],e.zAxis[a.id]=a)},prepare:Xr()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Xr()},updateYAxisWidth(e,t){var{id:r,width:a}=t.payload,l=e.yAxis[r];if(l){var o=l.widthHistory||[];if(o.length===3&&o[0]===o[2]&&a===o[1]&&a!==l.width&&Math.abs(a-o[0])<=1)return;var d=[...o,a].slice(-3);e.yAxis[r]=K8(K8({},e.yAxis[r]),{},{width:a,widthHistory:d})}}}}),{addXAxis:sfe,replaceXAxis:lfe,removeXAxis:ife,addYAxis:ofe,replaceYAxis:cfe,removeYAxis:ufe,addZAxis:dfe,replaceZAxis:mfe,removeZAxis:ffe,updateYAxisWidth:hfe}=gR.actions,toe=gR.reducer,roe=Me([Za],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),aoe=Me([roe,Di,ki],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),noe=()=>Rt(aoe),soe={},pR=zn({name:"errorBars",initialState:soe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]||(e[r]=[]),e[r].push(a)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:a,next:l}=t.payload;e[r]&&(e[r]=e[r].map(o=>o.dataKey===a.dataKey&&o.direction===a.direction?l:o))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]&&(e[r]=e[r].filter(l=>l.dataKey!==a.dataKey||l.direction!==a.direction))}}}),{addErrorBar:gfe,replaceErrorBar:pfe,removeErrorBar:yfe}=pR.actions,loe=pR.reducer,bv={exports:{}},vv={};var Z8;function ioe(){if(Z8)return vv;Z8=1;var e=cd();function t(g,p){return g===p&&(g!==0||1/g===1/p)||g!==g&&p!==p}var r=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,l=e.useRef,o=e.useEffect,d=e.useMemo,h=e.useDebugValue;return vv.useSyncExternalStoreWithSelector=function(g,p,x,E,C){var O=l(null);if(O.current===null){var _={hasValue:!1,value:null};O.current=_}else _=O.current;O=d(function(){function k(j){if(!I){if(I=!0,F=j,j=E(j),C!==void 0&&_.hasValue){var z=_.value;if(C(z,j))return R=z}return R=j}if(z=R,r(F,j))return z;var L=E(j);return C!==void 0&&C(z,L)?(F=j,z):(F=j,R=L)}var I=!1,F,R,Y=x===void 0?null:x;return[function(){return k(p())},Y===null?void 0:function(){return k(Y())}]},[p,x,E,C]);var P=a(g,O[0],O[1]);return o(function(){_.hasValue=!0,_.value=P},[P]),h(P),P},vv}var Q8;function ooe(){return Q8||(Q8=1,bv.exports=ioe()),bv.exports}ooe();function coe(e){e()}function uoe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){coe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const l=t={callback:r,next:null,prev:t};return l.prev?l.prev.next=l:e=l,function(){!a||e===null||(a=!1,l.next?l.next.prev=l.prev:t=l.prev,l.prev?l.prev.next=l.next:e=l.next)}}}}var J8={notify(){},get:()=>[]};function doe(e,t){let r,a=J8,l=0,o=!1;function d(P){x();const k=a.subscribe(P);let I=!1;return()=>{I||(I=!0,k(),E())}}function h(){a.notify()}function g(){_.onStateChange&&_.onStateChange()}function p(){return o}function x(){l++,r||(r=e.subscribe(g),a=uoe())}function E(){l--,r&&l===0&&(r(),r=void 0,a.clear(),a=J8)}function C(){o||(o=!0,x())}function O(){o&&(o=!1,E())}const _={addNestedSub:d,notifyNestedSubs:h,handleChangeWrapper:g,isSubscribed:p,trySubscribe:C,tryUnsubscribe:O,getListeners:()=>a};return _}var moe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",foe=moe(),hoe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",goe=hoe(),poe=()=>foe||goe?N.useLayoutEffect:N.useEffect,yoe=poe();function eO(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function xoe(e,t){if(eO(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(let l=0;l<r.length;l++)if(!Object.prototype.hasOwnProperty.call(t,r[l])||!eO(e[r[l]],t[r[l]]))return!1;return!0}var boe=Symbol.for("react-redux-context"),voe=typeof globalThis<"u"?globalThis:{};function Eoe(){if(!N.createContext)return{};const e=voe[boe]??=new Map;let t=e.get(N.createContext);return t||(t=N.createContext(null),e.set(N.createContext,t)),t}var woe=Eoe();function Noe(e){const{children:t,context:r,serverState:a,store:l}=e,o=N.useMemo(()=>{const g=doe(l);return{store:l,subscription:g,getServerState:a?()=>a:void 0}},[l,a]),d=N.useMemo(()=>l.getState(),[l]);yoe(()=>{const{subscription:g}=o;return g.onStateChange=g.notifyNestedSubs,g.trySubscribe(),d!==l.getState()&&g.notifyNestedSubs(),()=>{g.tryUnsubscribe(),g.onStateChange=void 0}},[o,d]);const h=r||woe;return N.createElement(h.Provider,{value:o},t)}var Soe=Noe,Coe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function Aoe(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Toe(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var a of r)if(Coe.has(a)){if(e[a]==null&&t[a]==null)continue;if(!xoe(e[a],t[a]))return!1}else if(!Aoe(e[a],t[a]))return!1;return!0}var Ooe=e=>{var{chartData:t}=e,r=va(),a=Bo();return N.useEffect(()=>a?()=>{}:(r(m8(t)),()=>{r(m8(void 0))}),[t,r,a]),null},tO={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},yR=zn({name:"brush",initialState:tO,reducers:{setBrushSettings(e,t){return t.payload==null?tO:t.payload}}}),{setBrushSettings:xfe}=yR.actions,_oe=yR.reducer,Doe={dots:[],areas:[],lines:[]},xR=zn({name:"referenceElements",initialState:Doe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=il(e).dots.findIndex(a=>a===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=il(e).areas.findIndex(a=>a===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=il(e).lines.findIndex(a=>a===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:bfe,removeDot:vfe,addArea:Efe,removeArea:wfe,addLine:Nfe,removeLine:Sfe}=xR.actions,koe=xR.reducer,Poe=N.createContext(void 0),Moe=e=>{var{children:t}=e,[r]=N.useState("".concat(Qm("recharts"),"-clip")),a=noe();if(a==null)return null;var{x:l,y:o,width:d,height:h}=a;return N.createElement(Poe.Provider,{value:r},N.createElement("defs",null,N.createElement("clipPath",{id:r},N.createElement("rect",{x:l,y:o,height:h,width:d}))),t)},Ioe=(e,t)=>t,YN=Me([Ioe,Rr,J7,Va,LI,Mi,Sne,Za],kne),XN=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/a)}},bR=Ls("mouseClick"),vR=_f();vR.startListening({actionCreator:bR,effect:(e,t)=>{var r=e.payload,a=YN(t.getState(),XN(r));a?.activeIndex!=null&&t.dispatch(Nae({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var c2=Ls("mouseMove"),ER=_f(),Ph=null;ER.startListening({actionCreator:c2,effect:(e,t)=>{var r=e.payload;Ph!==null&&cancelAnimationFrame(Ph);var a=XN(r);Ph=requestAnimationFrame(()=>{var l=t.getState(),o=IN(l,l.tooltip.settings.shared);if(o==="axis"){var d=YN(l,a);d?.activeIndex!=null?t.dispatch(OI({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate})):t.dispatch(TI())}Ph=null})}});var rO={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},wR=zn({name:"rootProps",initialState:rO,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:rO.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Roe=wR.reducer,{updateOptions:Loe}=wR.actions,NR=zn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Boe}=NR.actions,Foe=NR.reducer,SR=Ls("keyDown"),CR=Ls("focus"),WN=_f();WN.startListening({actionCreator:SR,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=r.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var d=RN(l,Cd(r),jf(r),$f(r)),h=d==null?-1:Number(d);if(!(!Number.isFinite(h)||h<0)){var g=Mi(r);if(o==="Enter"){var p=cp(r,"axis","hover",String(l.index));t.dispatch(a2({active:!l.active,activeIndex:l.index,activeDataKey:l.dataKey,activeCoordinate:p}));return}var x=fae(r),E=x==="left-to-right"?1:-1,C=o==="ArrowRight"?1:-1,O=h+C*E;if(!(g==null||O>=g.length||O<0)){var _=cp(r,"axis","hover",String(O));t.dispatch(a2({active:!0,activeIndex:O.toString(),activeDataKey:void 0,activeCoordinate:_}))}}}}}});WN.startListening({actionCreator:CR,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=r.tooltip;if(!l.active&&l.index==null){var o="0",d=cp(r,"axis","hover",String(o));t.dispatch(a2({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:d}))}}}});var As=Ls("externalEvent"),AR=_f(),Ev=new Map;AR.startListening({actionCreator:As,effect:(e,t)=>{var{handler:r,reactEvent:a}=e.payload;if(r!=null){a.persist();var l=a.type,o=Ev.get(l);o!==void 0&&cancelAnimationFrame(o);var d=requestAnimationFrame(()=>{try{var h=t.getState(),g={activeCoordinate:cne(h),activeDataKey:jI(h),activeIndex:mf(h),activeLabel:UI(h),activeTooltipIndex:mf(h),isTooltipActive:une(h)};r(g,a)}finally{Ev.delete(l)}});Ev.set(l,d)}}});var Uoe=Me([Sd],e=>e.tooltipItemPayloads),joe=Me([Uoe,Vf,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,a)=>{var l=e.find(h=>h.settings.dataKey===a);if(l!=null){var{positions:o}=l;if(o!=null){var d=t(o,r);return d}}}),TR=Ls("touchMove"),OR=_f();OR.startListening({actionCreator:TR,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var a=t.getState(),l=IN(a,a.tooltip.settings.shared);if(l==="axis"){var o=YN(a,XN({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));o?.activeIndex!=null&&t.dispatch(OI({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(l==="item"){var d,h=r.touches[0];if(document.elementFromPoint==null)return;var g=document.elementFromPoint(h.clientX,h.clientY);if(!g||!g.getAttribute)return;var p=g.getAttribute(CM),x=(d=g.getAttribute(AM))!==null&&d!==void 0?d:void 0,E=joe(t.getState(),p,x);t.dispatch(AI({activeDataKey:x,activeIndex:p,activeCoordinate:E}))}}}});var zoe=XP({brush:_oe,cartesianAxis:toe,chartData:cse,errorBars:loe,graphicalItems:Sie,layout:PK,legend:zZ,options:nse,polarAxis:Lle,polarOptions:Foe,referenceElements:koe,rootProps:Roe,tooltip:Sae,zIndex:qne}),Voe=function(t){return aK({reducer:zoe,preloadedState:t,middleware:r=>{var a;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([vR.middleware,ER.middleware,WN.middleware,AR.middleware,OR.middleware])},enhancers:r=>{var a=r;return typeof r=="function"&&(a=r()),a.concat(cM({type:"raf"}))},devTools:a1.devToolsEnabled})};function Hoe(e){var{preloadedState:t,children:r,reduxStoreName:a}=e,l=Bo(),o=N.useRef(null);if(l)return r;o.current==null&&(o.current=Voe(t));var d=bw;return N.createElement(Soe,{context:d,store:o.current},r)}function $oe(e){var{layout:t,margin:r}=e,a=va(),l=Bo();return N.useEffect(()=>{l||(a(_K(t)),a(OK(r)))},[a,l,t,r]),null}var qoe=N.memo($oe,Toe);function Goe(e){var t=va();return N.useEffect(()=>{t(Loe(e))},[t,e]),null}function aO(e){var{zIndex:t,isPanorama:r}=e,a=r?"recharts-zindex-panorama-":"recharts-zindex-",l=fR("".concat(a).concat(t)),o=va();return N.useLayoutEffect(()=>(o(Hne({zIndex:t,elementId:l,isPanorama:r})),()=>{o($ne({zIndex:t,isPanorama:r}))}),[o,t,l,r]),N.createElement("g",{tabIndex:-1,id:l})}function nO(e){var{children:t,isPanorama:r}=e,a=Rt(Mne);if(!a||a.length===0)return t;var l=a.filter(d=>d<0),o=a.filter(d=>d>0);return N.createElement(N.Fragment,null,l.map(d=>N.createElement(aO,{key:d,zIndex:d,isPanorama:r})),t,o.map(d=>N.createElement(aO,{key:d,zIndex:d,isPanorama:r})))}var Yoe=["children"];function Xoe(e,t){if(e==null)return{};var r,a,l=Woe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Woe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function gp(){return gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},gp.apply(null,arguments)}var Koe={width:"100%",height:"100%",display:"block"},Zoe=N.forwardRef((e,t)=>{var r=kM(),a=PM(),l=zM();if(!Mo(r)||!Mo(a))return null;var{children:o,otherAttributes:d,title:h,desc:g}=e,p,x;return d!=null&&(typeof d.tabIndex=="number"?p=d.tabIndex:p=l?0:void 0,typeof d.role=="string"?x=d.role:x=l?"application":void 0),N.createElement(uw,gp({},d,{title:h,desc:g,role:x,tabIndex:p,width:r,height:a,style:Koe,ref:t}),o)}),Qoe=e=>{var{children:t}=e,r=Rt(Zp);if(!r)return null;var{width:a,height:l,y:o,x:d}=r;return N.createElement(uw,{width:a,height:l,x:d,y:o},t)},sO=N.forwardRef((e,t)=>{var{children:r}=e,a=Xoe(e,Yoe),l=Bo();return l?N.createElement(Qoe,null,N.createElement(nO,{isPanorama:!0},r)):N.createElement(Zoe,gp({ref:t},a),N.createElement(nO,{isPanorama:!1},r))});function Joe(){var e=va(),[t,r]=N.useState(null),a=Rt(YK);return N.useEffect(()=>{if(t!=null){var l=t.getBoundingClientRect(),o=l.width/t.offsetWidth;Ka(o)&&o!==a&&e(kK(o))}},[t,e,a]),r}function lO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function ece(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lO(Object(r),!0).forEach(function(a){tce(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tce(e,t,r){return(t=rce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rce(e){var t=ace(e,"string");return typeof t=="symbol"?t:t+""}function ace(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fc(){return Fc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Fc.apply(null,arguments)}var nce=()=>(xse(),null);function pp(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var sce=N.forwardRef((e,t)=>{var r,a,l=N.useRef(null),[o,d]=N.useState({containerWidth:pp((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:pp((a=e.style)===null||a===void 0?void 0:a.height)}),h=N.useCallback((p,x)=>{d(E=>{var C=Math.round(p),O=Math.round(x);return E.containerWidth===C&&E.containerHeight===O?E:{containerWidth:C,containerHeight:O}})},[]),g=N.useCallback(p=>{if(typeof t=="function"&&t(p),p!=null&&typeof ResizeObserver<"u"){var{width:x,height:E}=p.getBoundingClientRect();h(x,E);var C=_=>{var{width:P,height:k}=_[0].contentRect;h(P,k)},O=new ResizeObserver(C);O.observe(p),l.current=O}},[t,h]);return N.useEffect(()=>()=>{var p=l.current;p?.disconnect()},[h]),N.createElement(N.Fragment,null,N.createElement(Jp,{width:o.containerWidth,height:o.containerHeight}),N.createElement("div",Fc({ref:g},e)))}),lce=N.forwardRef((e,t)=>{var{width:r,height:a}=e,[l,o]=N.useState({containerWidth:pp(r),containerHeight:pp(a)}),d=N.useCallback((g,p)=>{o(x=>{var E=Math.round(g),C=Math.round(p);return x.containerWidth===E&&x.containerHeight===C?x:{containerWidth:E,containerHeight:C}})},[]),h=N.useCallback(g=>{if(typeof t=="function"&&t(g),g!=null){var{width:p,height:x}=g.getBoundingClientRect();d(p,x)}},[t,d]);return N.createElement(N.Fragment,null,N.createElement(Jp,{width:l.containerWidth,height:l.containerHeight}),N.createElement("div",Fc({ref:h},e)))}),ice=N.forwardRef((e,t)=>{var{width:r,height:a}=e;return N.createElement(N.Fragment,null,N.createElement(Jp,{width:r,height:a}),N.createElement("div",Fc({ref:t},e)))}),oce=N.forwardRef((e,t)=>{var{width:r,height:a}=e;return wi(r)||wi(a)?N.createElement(lce,Fc({},e,{ref:t})):N.createElement(ice,Fc({},e,{ref:t}))});function cce(e){return e===!0?sce:oce}var uce=N.forwardRef((e,t)=>{var{children:r,className:a,height:l,onClick:o,onContextMenu:d,onDoubleClick:h,onMouseDown:g,onMouseEnter:p,onMouseLeave:x,onMouseMove:E,onMouseUp:C,onTouchEnd:O,onTouchMove:_,onTouchStart:P,style:k,width:I,responsive:F,dispatchTouchEvents:R=!0}=e,Y=N.useRef(null),j=va(),[z,L]=N.useState(null),[q,V]=N.useState(null),W=Joe(),H=Ow(),$=H?.width>0?H.width:I,ce=H?.height>0?H.height:l,me=N.useCallback(be=>{W(be),typeof t=="function"&&t(be),L(be),V(be),be!=null&&(Y.current=be)},[W,t,L,V]),ae=N.useCallback(be=>{j(bR(be)),j(As({handler:o,reactEvent:be}))},[j,o]),J=N.useCallback(be=>{j(c2(be)),j(As({handler:p,reactEvent:be}))},[j,p]),se=N.useCallback(be=>{j(TI()),j(As({handler:x,reactEvent:be}))},[j,x]),Ee=N.useCallback(be=>{j(c2(be)),j(As({handler:E,reactEvent:be}))},[j,E]),we=N.useCallback(()=>{j(CR())},[j]),te=N.useCallback(be=>{j(SR(be.key))},[j]),K=N.useCallback(be=>{j(As({handler:d,reactEvent:be}))},[j,d]),ee=N.useCallback(be=>{j(As({handler:h,reactEvent:be}))},[j,h]),ge=N.useCallback(be=>{j(As({handler:g,reactEvent:be}))},[j,g]),le=N.useCallback(be=>{j(As({handler:C,reactEvent:be}))},[j,C]),Ce=N.useCallback(be=>{j(As({handler:P,reactEvent:be}))},[j,P]),ie=N.useCallback(be=>{R&&j(TR(be)),j(As({handler:_,reactEvent:be}))},[j,R,_]),de=N.useCallback(be=>{j(As({handler:O,reactEvent:be}))},[j,O]),$e=cce(F);return N.createElement(YI.Provider,{value:z},N.createElement(uP.Provider,{value:q},N.createElement($e,{width:$??k?.width,height:ce??k?.height,className:ba("recharts-wrapper",a),style:ece({position:"relative",cursor:"default",width:$,height:ce},k),onClick:ae,onContextMenu:K,onDoubleClick:ee,onFocus:we,onKeyDown:te,onMouseDown:ge,onMouseEnter:J,onMouseLeave:se,onMouseMove:Ee,onMouseUp:le,onTouchEnd:de,onTouchMove:ie,onTouchStart:Ce,ref:me},N.createElement(nce,null),r)))}),dce=["width","height","responsive","children","className","style","compact","title","desc"];function mce(e,t){if(e==null)return{};var r,a,l=fce(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function fce(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var hce=N.forwardRef((e,t)=>{var{width:r,height:a,responsive:l,children:o,className:d,style:h,compact:g,title:p,desc:x}=e,E=mce(e,dce),C=Ju(E);return g?N.createElement(N.Fragment,null,N.createElement(Jp,{width:r,height:a}),N.createElement(sO,{otherAttributes:C,title:p,desc:x},o)):N.createElement(uce,{className:d,style:h,width:r,height:a,responsive:l??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},N.createElement(sO,{otherAttributes:C,title:p,desc:x,ref:t},N.createElement(Moe,null,o)))});function gce(e){var t=va();return N.useEffect(()=>{t(Boe(e))},[t,e]),null}var pce=["layout"];function u2(){return u2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},u2.apply(null,arguments)}function yce(e,t){if(e==null)return{};var r,a,l=xce(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function xce(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var bce={top:5,right:5,bottom:5,left:5},_R={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:bce,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},vce=N.forwardRef(function(t,r){var a,l=js(t.categoricalChartProps,_R),{layout:o}=l,d=yce(l,pce),{chartName:h,defaultTooltipEventType:g,validateTooltipEventTypes:p,tooltipPayloadSearcher:x}=t,E={chartName:h,defaultTooltipEventType:g,validateTooltipEventTypes:p,tooltipPayloadSearcher:x,eventEmitter:void 0};return N.createElement(Hoe,{preloadedState:{options:E},reduxStoreName:(a=l.id)!==null&&a!==void 0?a:h},N.createElement(Ooe,{chartData:l.data}),N.createElement(qoe,{layout:o,margin:l.margin}),N.createElement(Goe,{baseValue:void 0,accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className,reverseStackOrder:l.reverseStackOrder}),N.createElement(gce,{cx:l.cx,cy:l.cy,startAngle:l.startAngle,endAngle:l.endAngle,innerRadius:l.innerRadius,outerRadius:l.outerRadius}),N.createElement(hce,u2({},d,{ref:r})))});function iO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function oO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iO(Object(r),!0).forEach(function(a){Ece(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ece(e,t,r){return(t=wce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wce(e){var t=Nce(e,"string");return typeof t=="symbol"?t:t+""}function Nce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sce=["item"],Cce=oO(oO({},_R),{},{layout:"centric",startAngle:0,endAngle:360}),d2=N.forwardRef((e,t)=>{var r=js(e,Cce);return N.createElement(vce,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Sce,tooltipPayloadSearcher:rse,categoricalChartProps:r,ref:t})});const Mh=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],Ace=({data:e,loading:t})=>{if(!e)return n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},n.createElement(Da,{loading:!0}),n.createElement(Da,{loading:!0}));const{totalPayments:r,totalRevenue:a,averageOrderValue:l,totalDiscount:o,paymentMethods:d=[],topCoupons:h=[]}=e,g=d.map(x=>({name:x._id,value:x.revenue,count:x.count})),p=({active:x,payload:E})=>x&&E&&E.length?n.createElement("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200"},n.createElement("p",{className:"text-sm font-semibold text-gray-900"},E[0].name),n.createElement("p",{className:"text-sm text-gray-600"},"Revenue: ",n.createElement("span",{className:"font-bold text-green-600"},Js(E[0].value))),E[0].payload.count&&n.createElement("p",{className:"text-sm text-gray-600"},"Orders: ",n.createElement("span",{className:"font-bold"},E[0].payload.count))):null;return n.createElement("div",{className:"space-y-4"},n.createElement("h2",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Revenue & Payments"),n.createElement("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4"},n.createElement("div",{className:"xl:col-span-1 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-1 gap-3"},n.createElement(Da,{title:"Total Revenue",value:Js(a),subtitle:`From ${Cr(r)} transactions`,icon:n.createElement(ED,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:t}),n.createElement(Da,{title:"Total Payments",value:Cr(r),subtitle:"Successful transactions",icon:n.createElement(tV,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:t}),n.createElement(Da,{title:"Average Order Value",value:Js(l),subtitle:"Per transaction",icon:n.createElement(Og,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:t}),n.createElement(Da,{title:"Total Discounts",value:Js(o),subtitle:"Coupons & offers applied",icon:n.createElement(j4,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:t})),g.length>0&&n.createElement("div",{className:"xl:col-span-2 bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},n.createElement("h3",{className:"text-sm font-bold text-gray-900 mb-3"},"Payment Distribution"),n.createElement(PE,{width:"100%",height:240},n.createElement(d2,null,n.createElement(hp,{data:g,cx:"50%",cy:"50%",labelLine:!1,label:({name:x,percent:E})=>`${x} (${(E*100).toFixed(0)}%)`,outerRadius:70,fill:"#8884d8",dataKey:"value"},g.map((x,E)=>n.createElement(od,{key:`cell-${E}`,fill:Mh[E%Mh.length]}))),n.createElement(l2,{content:n.createElement(p,null)}),n.createElement(jM,null))),n.createElement("div",{className:"mt-3 pt-3 border-t border-gray-200"},n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2"},g.map((x,E)=>n.createElement("div",{key:x.name,className:"flex items-center justify-between text-xs p-2 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement("div",{className:"w-2.5 h-2.5 rounded-full shrink-0",style:{backgroundColor:Mh[E%Mh.length]}}),n.createElement("span",{className:"font-semibold text-gray-900"},x.name)),n.createElement("div",{className:"text-right"},n.createElement("p",{className:"font-bold text-gray-900"},Js(x.value)),n.createElement("p",{className:"text-xs text-gray-500"},x.count," orders")))))))),h.length>0&&n.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},n.createElement("h3",{className:"text-sm font-bold text-gray-900 mb-3"},"Top Performing Coupons"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},h.map((x,E)=>n.createElement("div",{key:x._id,className:"relative p-3 rounded-lg border-2 border-dashed border-gray-200 hover:border-blue-400 hover:bg-blue-50/30 transition-all group"},n.createElement("div",{className:"flex items-center justify-between mb-2"},n.createElement("div",{className:"flex items-center gap-1.5"},n.createElement("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 text-white font-bold px-2 py-0.5 rounded text-xs shadow-sm"},"#",E+1),n.createElement("span",{className:"font-bold text-sm text-gray-900 group-hover:text-gray-900 transition-colors truncate"},x._id)),n.createElement(j4,{className:"text-orange-500 w-4 h-4 group-hover:scale-110 transition-transform shrink-0"})),n.createElement("div",{className:"grid grid-cols-2 gap-2 text-xs"},n.createElement("div",{className:"bg-white/50 p-2 rounded-lg"},n.createElement("p",{className:"text-xs text-gray-600 mb-0.5"},"Usage Count"),n.createElement("p",{className:"font-bold text-gray-900"},Cr(x.usageCount))),n.createElement("div",{className:"bg-white/50 p-2 rounded-lg"},n.createElement("p",{className:"text-xs text-gray-600 mb-0.5"},"Total Discount"),n.createElement("p",{className:"font-bold text-green-600"},Js(x.totalDiscount)))))))))},cO={TECHNOLOGY:"#3B82F6",ENTERTAINMENT:"#EC4899",EDUCATION:"#10B981",BUSINESS:"#F59E0B",OTHER:"#6B7280"},uO={OFFLINE:"#EF4444",ONLINE:"#10B981",HYBRID:"#8B5CF6"},Tce=({data:e,enrollmentsData:t,cashTicketsData:r,loading:a})=>{if(!e)return n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},n.createElement(Da,{loading:!0}));const{total:l,live:o,upcoming:d,past:h,byCategory:g={},byMode:p={}}=e,x=Object.entries(g).map(([O,_])=>({name:O,value:_})),E=Object.entries(p).map(([O,_])=>({name:O,value:_})),C=({active:O,payload:_})=>O&&_&&_.length?n.createElement("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200"},n.createElement("p",{className:"text-sm font-semibold text-gray-900"},_[0].name),n.createElement("p",{className:"text-sm text-gray-600"},"Events: ",n.createElement("span",{className:"font-bold text-gray-800"},_[0].value))):null;return n.createElement("div",{className:"space-y-4"},n.createElement("h2",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Events Overview"),n.createElement("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4"},n.createElement("div",{className:"space-y-3"},n.createElement(Da,{title:"Total Events",value:Cr(l),subtitle:"All time events",icon:n.createElement(F4,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:a}),n.createElement(Da,{title:"Live Events",value:Cr(o),subtitle:"Currently ongoing",icon:n.createElement(nV,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:a}),n.createElement(Da,{title:"Upcoming Events",value:Cr(d),subtitle:"Scheduled ahead",icon:n.createElement(cV,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:a}),n.createElement(Da,{title:"Past Events",value:Cr(h),subtitle:"Completed events",icon:n.createElement(eV,{className:"w-6 h-6"}),iconColor:"text-gray-600",loading:a})),x.length>0&&n.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},n.createElement("h3",{className:"text-sm font-bold text-gray-900 mb-3"},"Events by Category"),n.createElement(PE,{width:"100%",height:220},n.createElement(d2,null,n.createElement(hp,{data:x,cx:"50%",cy:"50%",labelLine:!1,label:({name:O,percent:_})=>`${O.slice(0,3)} (${(_*100).toFixed(0)}%)`,outerRadius:60,fill:"#8884d8",dataKey:"value"},x.map((O,_)=>n.createElement(od,{key:`cell-${_}`,fill:cO[O.name]||"#6B7280"}))),n.createElement(l2,{content:n.createElement(C,null)}))),n.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-2 gap-2"},x.map(O=>n.createElement("div",{key:O.name,className:"flex items-center gap-2 text-xs"},n.createElement("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:cO[O.name]||"#6B7280"}}),n.createElement("span",{className:"font-semibold text-gray-900 truncate"},O.name),n.createElement("span",{className:"text-gray-600 ml-auto"},O.value))))),E.length>0&&n.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},n.createElement("h3",{className:"text-sm font-bold text-gray-900 mb-3"},"Events by Mode"),n.createElement(PE,{width:"100%",height:220},n.createElement(d2,null,n.createElement(hp,{data:E,cx:"50%",cy:"50%",labelLine:!1,label:({name:O,percent:_})=>`${O} (${(_*100).toFixed(0)}%)`,outerRadius:60,fill:"#8884d8",dataKey:"value"},E.map((O,_)=>n.createElement(od,{key:`cell-${_}`,fill:uO[O.name]||"#6B7280"}))),n.createElement(l2,{content:n.createElement(C,null)}))),n.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-2"},E.map(O=>n.createElement("div",{key:O.name,className:"flex items-center justify-between text-sm p-2 rounded-lg bg-gray-50"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:uO[O.name]||"#6B7280"}}),n.createElement("span",{className:"font-semibold text-gray-900"},O.name)),n.createElement("span",{className:"font-bold text-gray-900"},O.value)))))),t&&n.createElement("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4"},n.createElement(Da,{title:"Total Enrollments",value:Cr(t.totalEnrollments),subtitle:"Online + Cash combined",icon:n.createElement(iP,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:a}),n.createElement(Da,{title:"Online Enrollments",value:Cr(t.onlineEnrollments),subtitle:`${Cr(t.onlineTickets)} tickets sold`,icon:n.createElement(dE,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:a}),n.createElement(Da,{title:"Cash Enrollments",value:Cr(t.cashEnrollments),subtitle:"Offline redemptions",icon:n.createElement(F4,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:a}),r&&n.createElement(Da,{title:"Cash Tickets",value:Cr(r.totalMinted),subtitle:`${r.redeemed} redeemed, ${r.pending} pending`,icon:n.createElement(mE,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:a})))},Oce=({data:e,loading:t})=>{const[r,a]=N.useState("totalRevenue"),[l,o]=N.useState("desc");if(!e||e.length===0)return n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},n.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},"Admin Performance"),n.createElement("p",{className:"text-gray-500 text-center py-8"},"No admin performance data available"));const d=[...e].sort((x,E)=>{const C=x[r],O=E[r];return l==="asc"?C-O:O-C}),h=x=>{r===x?o(l==="asc"?"desc":"asc"):(a(x),o("desc"))},g=x=>({SUPER_ADMIN:"bg-purple-100 text-purple-800",ADMIN:"bg-blue-100 text-blue-800",MANAGEMENT_STAFF:"bg-green-100 text-green-800"})[x]||"bg-gray-100 text-gray-800",p=(x,E)=>E?(x/E*100).toFixed(1):0;return t?n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},n.createElement("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6 animate-pulse"}),n.createElement("div",{className:"space-y-4"},[1,2,3].map(x=>n.createElement("div",{key:x,className:"h-20 bg-gray-100 rounded animate-pulse"})))):n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},n.createElement("div",{className:"flex items-center justify-between mb-6"},n.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Admin Performance"),n.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600"},n.createElement(bm,{className:"text-yellow-500"}),n.createElement("span",null,"Top ",d.length," performers"))),n.createElement("div",{className:"hidden lg:block overflow-x-auto"},n.createElement("table",{className:"w-full"},n.createElement("thead",null,n.createElement("tr",{className:"border-b border-gray-200"},n.createElement("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm"},"Rank"),n.createElement("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm"},"Admin"),n.createElement("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm"},"Role"),n.createElement("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm cursor-pointer hover:text-gray-800",onClick:()=>h("totalTickets"),title:"Total cash tickets issued by this admin"},n.createElement("div",{className:"flex flex-col items-end"},n.createElement("span",null,"Tickets Issued ",r==="totalTickets"&&(l==="asc"?"":"")),n.createElement("span",{className:"text-xs font-normal text-gray-400"},"Cash tickets"))),n.createElement("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm cursor-pointer hover:text-gray-800",onClick:()=>h("redeemedTickets"),title:"Tickets redeemed by this admin"},n.createElement("div",{className:"flex flex-col items-end"},n.createElement("span",null,"Redeemed ",r==="redeemedTickets"&&(l==="asc"?"":"")),n.createElement("span",{className:"text-xs font-normal text-gray-400"},"Tickets verified"))),n.createElement("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm",title:"Pending tickets"},n.createElement("div",{className:"flex flex-col items-end"},n.createElement("span",null,"Pending"),n.createElement("span",{className:"text-xs font-normal text-gray-400"},"Tickets"))),n.createElement("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm cursor-pointer hover:text-gray-800",onClick:()=>h("totalRevenue"),title:"Revenue from redeemed tickets"},n.createElement("div",{className:"flex flex-col items-end"},n.createElement("span",null,"Revenue ",r==="totalRevenue"&&(l==="asc"?"":"")),n.createElement("span",{className:"text-xs font-normal text-gray-400"},"From redemptions"))))),n.createElement("tbody",null,d.map((x,E)=>n.createElement("tr",{key:x.adminId,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},n.createElement("td",{className:"py-4 px-4"},n.createElement("div",{className:"flex items-center gap-2"},E===0&&n.createElement(bm,{className:"text-yellow-500 w-5 h-5"}),E===1&&n.createElement(bm,{className:"text-gray-400 w-5 h-5"}),E===2&&n.createElement(bm,{className:"text-orange-600 w-5 h-5"}),n.createElement("span",{className:"font-semibold text-gray-900"},"#",E+1))),n.createElement("td",{className:"py-4 px-4"},n.createElement("div",null,n.createElement("p",{className:"font-semibold text-gray-900"},x.adminName),n.createElement("p",{className:"text-xs text-gray-500"},"@",x.adminUsername))),n.createElement("td",{className:"py-4 px-4"},n.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g(x.adminRole)}`},x.adminRole.replace("_"," "))),n.createElement("td",{className:"py-4 px-4 text-right"},n.createElement("span",{className:"font-semibold text-blue-600"},Cr(x.totalTickets))),n.createElement("td",{className:"py-4 px-4 text-right"},n.createElement("div",null,n.createElement("span",{className:"font-semibold text-green-600"},Cr(x.redeemedTickets)),n.createElement("p",{className:"text-xs text-gray-500"},p(x.redeemedTickets,x.totalTickets),"% rate"))),n.createElement("td",{className:"py-4 px-4 text-right"},n.createElement("span",{className:"font-semibold text-orange-600"},Cr(x.pendingTickets))),n.createElement("td",{className:"py-4 px-4 text-right"},n.createElement("span",{className:"font-bold text-gray-900"},Js(x.totalRevenue)))))))),n.createElement("div",{className:"lg:hidden space-y-4"},d.map((x,E)=>n.createElement("div",{key:x.adminId,className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"},n.createElement("div",{className:"flex items-start justify-between mb-3"},n.createElement("div",{className:"flex items-center gap-2"},E<3&&n.createElement(bm,{className:E===0?"text-yellow-500":E===1?"text-gray-400":"text-orange-600"}),n.createElement("div",null,n.createElement("p",{className:"font-semibold text-gray-900"},x.adminName),n.createElement("p",{className:"text-xs text-gray-500"},"@",x.adminUsername))),n.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g(x.adminRole)}`},x.adminRole.replace("_"," "))),n.createElement("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg"},n.createElement("p",{className:"text-xs text-blue-600 font-medium mb-1"},"Cash Tickets Issued"),n.createElement("p",{className:"font-bold text-blue-800 text-lg"},Cr(x.totalTickets))),n.createElement("div",{className:"p-2 bg-gray-50 rounded-lg"},n.createElement("p",{className:"text-xs text-gray-600 font-medium mb-2"},"Ticket Redemptions"),n.createElement("div",{className:"grid grid-cols-3 gap-2 text-sm"},n.createElement("div",null,n.createElement("p",{className:"text-xs text-gray-500"},"Redeemed"),n.createElement("p",{className:"font-semibold text-green-600"},Cr(x.redeemedTickets))),n.createElement("div",null,n.createElement("p",{className:"text-xs text-gray-500"},"Pending"),n.createElement("p",{className:"font-semibold text-orange-600"},Cr(x.pendingTickets))),n.createElement("div",null,n.createElement("p",{className:"text-xs text-gray-500"},"Rate"),n.createElement("p",{className:"font-semibold text-gray-800"},p(x.redeemedTickets,x.totalTickets),"%")))),n.createElement("div",{className:"mt-3 pt-3 border-t border-gray-100"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("span",{className:"text-gray-600 text-sm flex items-center gap-1"},n.createElement(ED,{className:"text-purple-600"})," Revenue"),n.createElement("span",{className:"font-bold text-gray-900"},Js(x.totalRevenue))))))))},dO=({events:e,loading:t})=>{if(!e||e.length===0)return n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},n.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},"Top Performing Events"),n.createElement("p",{className:"text-gray-500 text-center py-8"},"No event data available"));if(t)return n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},n.createElement("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6 animate-pulse"}),n.createElement("div",{className:"space-y-4"},[1,2,3].map(l=>n.createElement("div",{key:l,className:"h-32 bg-gray-100 rounded animate-pulse"}))));const r=l=>({TECHNOLOGY:"bg-blue-100 text-blue-800",ENTERTAINMENT:"bg-pink-100 text-pink-800",EDUCATION:"bg-green-100 text-green-800",BUSINESS:"bg-yellow-100 text-yellow-800",OTHER:"bg-gray-100 text-gray-800"})[l]||"bg-gray-100 text-gray-800",a=l=>{switch(l){case"ONLINE":return n.createElement(dE,{className:"w-4 h-4 text-green-600"});case"OFFLINE":return n.createElement(mE,{className:"w-4 h-4 text-red-600"});case"HYBRID":return n.createElement(Og,{className:"w-4 h-4 text-purple-600"});default:return n.createElement(Og,{className:"w-4 h-4 text-gray-600"})}};return n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},n.createElement("div",{className:"flex items-center justify-between mb-6"},n.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Top Performing Events"),n.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600"},n.createElement(hV,{className:"text-yellow-500"}),n.createElement("span",null,"Top ",e.length," events"))),n.createElement("div",{className:"space-y-4"},e.map((l,o)=>n.createElement("div",{key:l.eventId,className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200 hover:border-blue-300"},n.createElement("div",{className:"flex items-start justify-between mb-3"},n.createElement("div",{className:"flex-1"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},o<3&&n.createElement("span",{className:`
                        w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold
                        ${o===0?"bg-yellow-500 text-white":""}
                        ${o===1?"bg-gray-400 text-white":""}
                        ${o===2?"bg-orange-600 text-white":""}
                      `},o+1),n.createElement("h3",{className:"font-bold text-lg text-gray-900"},l.eventName)),n.createElement("div",{className:"flex flex-wrap items-center gap-3 text-sm text-gray-600"},n.createElement("span",{className:"flex items-center gap-1"},n.createElement(Jz,{className:"w-4 h-4"}),fY(l.eventDate)),l.eventCity&&n.createElement("span",{className:"flex items-center gap-1"},n.createElement(lV,{className:"w-4 h-4"}),l.eventCity),n.createElement("span",{className:"flex items-center gap-1"},a(l.eventMode),l.eventMode))),n.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${r(l.eventCategory)}`},l.eventCategory)),n.createElement("div",{className:"grid grid-cols-2 gap-4 mb-3"},n.createElement("div",{className:"bg-blue-50 rounded-lg p-3"},n.createElement("p",{className:"text-xs text-gray-800 font-medium mb-1"},"Total Revenue"),n.createElement("p",{className:"text-lg font-bold text-blue-900"},Js(l.totalRevenue))),n.createElement("div",{className:"bg-green-50 rounded-lg p-3"},n.createElement("p",{className:"text-xs text-green-600 font-medium mb-1"},"Total Tickets"),n.createElement("p",{className:"text-lg font-bold text-green-900"},Cr(l.totalTickets)))),n.createElement("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t border-gray-100"},n.createElement("div",null,n.createElement("p",{className:"text-xs text-gray-600 font-medium mb-2 flex items-center gap-1"},n.createElement(dE,{className:"text-gray-800"}),"Online Sales"),n.createElement("div",{className:"space-y-1 text-sm"},n.createElement("div",{className:"flex justify-between"},n.createElement("span",{className:"text-gray-600"},"Tickets:"),n.createElement("span",{className:"font-semibold text-gray-900"},Cr(l.onlineTickets))),n.createElement("div",{className:"flex justify-between"},n.createElement("span",{className:"text-gray-600"},"Revenue:"),n.createElement("span",{className:"font-semibold text-gray-800"},Js(l.onlineRevenue))))),n.createElement("div",null,n.createElement("p",{className:"text-xs text-gray-600 font-medium mb-2 flex items-center gap-1"},n.createElement(mE,{className:"text-red-600"}),"Offline Sales"),n.createElement("div",{className:"space-y-1 text-sm"},n.createElement("div",{className:"flex justify-between"},n.createElement("span",{className:"text-gray-600"},"Tickets:"),n.createElement("span",{className:"font-semibold text-gray-900"},Cr(l.offlineTickets))),n.createElement("div",{className:"flex justify-between"},n.createElement("span",{className:"text-gray-600"},"Revenue:"),n.createElement("span",{className:"font-semibold text-green-600"},Js(l.offlineRevenue))))))))))};function _ce(){const[e,t]=N.useState("lifetime"),[r,a]=N.useState(null),[l,o]=N.useState(!0),[d,h]=N.useState(null),g=async()=>{o(!0);try{const C=await mY();if(C.success)a(C.data),h(new Date),console.log("[Dashboard] Data loaded successfully");else{const O=C.message||"Failed to load dashboard statistics";Et.error(O),console.error("[Dashboard] Error:",C.error),C.error&&console.error("[Dashboard] Backend Error Details:",{status:C.status,message:C.message,error:C.error})}}catch(C){Et.error("An unexpected error occurred while loading dashboard"),console.error("[Dashboard] Exception:",C)}finally{o(!1)}};N.useEffect(()=>{g()},[]);const p=()=>{Et.info("Refreshing dashboard data..."),g()},x=()=>{Et.info("Export functionality coming soon!")},E=C=>C?C[e]||C.lifetime||C:null;return n.createElement(n.Fragment,null,n.createElement("div",{className:"space-y-4"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},n.createElement("div",null,n.createElement("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 tracking-tight"},"Dashboard"),n.createElement("p",{className:"text-xs text-gray-600 mt-1"},"Comprehensive insights and analytics",d&&n.createElement("span",{className:"ml-2"}," Updated ",d.toLocaleTimeString()))),n.createElement("div",{className:"flex items-center gap-2"},n.createElement("button",{onClick:p,disabled:l,className:"flex items-center gap-1.5 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm text-sm",title:"Refresh dashboard data"},n.createElement(wD,{className:`w-4 h-4 ${l?"animate-spin":""}`}),n.createElement("span",{className:"hidden sm:inline font-medium"},"Refresh")),n.createElement("button",{onClick:x,className:"flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white rounded-lg hover:from-gray-900 hover:to-black transition-all shadow-sm text-sm",title:"Export dashboard data"},n.createElement(dV,{className:"w-4 h-4"}),n.createElement("span",{className:"hidden sm:inline font-medium"},"Export")))),r&&n.createElement(cY,{selected:e,onChange:t}),!l&&!r&&n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center"},n.createElement("div",{className:"max-w-md mx-auto"},n.createElement("div",{className:"text-red-500 text-6xl mb-4"},""),n.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-2"},"Failed to Load Dashboard"),n.createElement("p",{className:"text-gray-600 mb-6"},"There was an error loading the analytics data. This is likely a backend issue."),n.createElement("button",{onClick:p,className:"px-6 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Try Again"))),r?.payments&&n.createElement(Ace,{data:E(r.payments),loading:l}),(r?.users||r?.admins)&&n.createElement(xY,{usersData:r.users,adminsData:r.admins,loading:l}),r?.events&&n.createElement(Tce,{data:r.events,enrollmentsData:E(r.enrollments),cashTicketsData:E(r.cashTickets),loading:l}),r?.communications&&n.createElement(hY,{data:E(r.communications),loading:l}),r?.topPerformingEvents&&r.topPerformingEvents.length>0&&n.createElement(dO,{events:r.topPerformingEvents,loading:l}),r?.eventStats&&E(r.eventStats)?.length>0&&n.createElement("div",{className:"space-y-4"},n.createElement("h2",{className:"text-2xl font-bold text-gray-900 tracking-tight"},"Events Performance (",e.replace(/([A-Z])/g," $1").trim(),")"),n.createElement(dO,{events:E(r.eventStats),loading:l})),r?.adminPerformance&&r.adminPerformance.length>0&&n.createElement(Oce,{data:r.adminPerformance,loading:l}),n.createElement("div",{className:"text-center text-xs text-gray-500 py-6 border-t border-gray-200"},r?.generatedAt&&n.createElement("p",null,"Statistics generated at: ",new Date(r.generatedAt).toLocaleString()))))}const un={BASE:"/web/events",DROPDOWN:"/web/events/dropdown",DELETED:"/web/events/deleted",UPDATE_EXPIRED:"/web/events/update-expired",FEATURED:"/web/events/featured"},Ih=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([r,a])=>{a!=null&&a!==""&&t.append(r,a)}),t.toString()},_s={getAll:async(e={})=>{const t=Ih(e),r=t?`${un.BASE}?${t}`:un.BASE;console.log("[EventService] Fetching events with params:",e);const a=await ze(je.get(r));return a.success?console.log("[EventService] Fetched events:",a.data.events?.length):console.error("[EventService] Failed to fetch events:",a.message),a},getById:async e=>{console.log("[EventService] Fetching event:",e);const t=await ze(je.get(`${un.BASE}/${e}`));return t.success?console.log("[EventService] Fetched event:",t.data.event?.name):console.error("[EventService] Failed to fetch event:",t.message),t},create:async e=>{console.log("[EventService] Creating event:",e.name);const t=await ze(je.post(un.BASE,e));return t.success?console.log("[EventService] Created event:",t.data.event?._id):console.error("[EventService] Failed to create event:",t.message),t},update:async(e,t)=>{console.log("[EventService] Updating event:",e);const r=await ze(je.put(`${un.BASE}/${e}`,t));return r.success?console.log("[EventService] Updated event:",r.data.event?.name):console.error("[EventService] Failed to update event:",r.message),r},delete:async e=>{console.log("[EventService] Deleting event:",e);const t=await ze(je.delete(`${un.BASE}/${e}`));return t.success?console.log("[EventService] Deleted event successfully"):console.error("[EventService] Failed to delete event:",t.message),t},restore:async e=>{console.log("[EventService] Restoring event:",e);const t=await ze(je.post(`${un.BASE}/${e}/restore`));return t.success?console.log("[EventService] Restored event successfully"):console.error("[EventService] Failed to restore event:",t.message),t},permanentDelete:async e=>{console.log("[EventService] Permanently deleting event:",e);const t=await ze(je.delete(`${un.BASE}/${e}/permanent`));return t.success?console.log("[EventService] Permanently deleted event successfully"):console.error("[EventService] Failed to permanently delete event:",t.message),t},getDeleted:async(e={})=>{const t=Ih(e),r=t?`${un.DELETED}?${t}`:un.DELETED;console.log("[EventService] Fetching deleted events");const a=await ze(je.get(r));return a.success?console.log("[EventService] Fetched deleted events:",a.data.events?.length):console.error("[EventService] Failed to fetch deleted events:",a.message),a},getDropdownEvents:async(e={})=>{const t=Ih(e),r=t?`${un.DROPDOWN}?${t}`:un.DROPDOWN;console.log("[EventService] Fetching dropdown events with params:",e);const a=await ze(je.get(r));return a.success?console.log("[EventService] Fetched events:",a.data.events?.length):console.error("[EventService] Failed to fetch events:",a.message),a},getTicketStats:async e=>{console.log("[EventService] Fetching ticket stats for event:",e);const t=await ze(je.get(`${un.BASE}/${e}/ticket-stats`));return t.success?console.log("[EventService] Fetched ticket stats"):console.error("[EventService] Failed to fetch ticket stats:",t.message),t},updateExpired:async()=>{console.log("[EventService] Updating expired events");const e=await ze(je.post(un.UPDATE_EXPIRED));return e.success?console.log("[EventService] Updated expired events:",e.data.updatedCount):console.error("[EventService] Failed to update expired events:",e.message),e},getFeaturedEvents:async(e={})=>{const t=Ih(e),r=t?`${un.FEATURED}?${t}`:un.FEATURED;console.log("[EventService] Fetching featured events");const a=await ze(je.get(r));return a.success?console.log("[EventService] Fetched featured events:",a.data.events?.length):console.error("[EventService] Failed to fetch featured events:",a.message),a}},DR=["TECHNOLOGY","EDUCATION","MEDICAL","COMEDY","ENTERTAINMENT","BUSINESS","SPORTS","ARTS","MUSIC","FOOD","LIFESTYLE","OTHER"],kR=["ONLINE","OFFLINE","HYBRID"],Dce=[{value:"createdAt",label:"Created Date"},{value:"name",label:"Name"},{value:"startDate",label:"Start Date"},{value:"endDate",label:"End Date"},{value:"price",label:"Price"}],mO={search:"",category:"",mode:"",city:"",isLive:"",featured:"",minPrice:"",maxPrice:"",startDateFrom:"",startDateTo:"",sortBy:"createdAt",sortOrder:"desc"};function kce(e={}){const[t,r]=N.useState([]),[a,l]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[o,d]=N.useState({...mO,...e}),[h,g]=N.useState(!1),[p,x]=N.useState(null),[E,C]=N.useState([]),[O,_]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[P,k]=N.useState(!1),I=N.useRef(null),F=N.useCallback(async(we=a.currentPage)=>{g(!0),x(null);try{const te={page:we,limit:a.limit,sortBy:o.sortBy,sortOrder:o.sortOrder,...o.search&&{search:o.search},...o.category&&{category:o.category},...o.mode&&{mode:o.mode},...o.city&&{city:o.city},...o.isLive!==""&&{isLive:o.isLive},...o.featured!==""&&{featured:o.featured},...o.minPrice&&{minPrice:o.minPrice},...o.maxPrice&&{maxPrice:o.maxPrice},...o.startDateFrom&&{startDateFrom:o.startDateFrom},...o.startDateTo&&{startDateTo:o.startDateTo}},K=await _s.getAll(te);K.success?(r(K.data.events||[]),l(K.data.pagination||a)):(x(K.message),r([]))}catch{x("Failed to fetch events"),r([])}finally{g(!1)}},[o,a.limit,a.currentPage]),R=N.useCallback(async(we=O.currentPage)=>{g(!0),x(null);try{const te=await _s.getDeleted({page:we,limit:O.limit});te.success?(C(te.data.events||[]),_(K=>({...K,...te.data.pagination}))):(x(te.message),C([]))}catch{x("Failed to fetch deleted events"),C([])}finally{g(!1)}},[O.currentPage,O.limit]),Y=N.useCallback(async we=>{try{const te=await _s.getById(we);return te.success?{success:!0,data:te.data.event}:{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to fetch event details"}}},[]),j=N.useCallback(async we=>{g(!0),x(null);try{const te=await _s.create(we);return te.success?(await F(1),{success:!0,data:te.data}):{success:!1,error:te.message,validationErrors:Array.isArray(te.error)?te.error:te.data?.errors}}catch{return{success:!1,error:"Failed to create event"}}finally{g(!1)}},[F]),z=N.useCallback(async(we,te)=>{g(!0),x(null);try{const K=await _s.update(we,te);return K.success?(r(ee=>ee.map(ge=>ge._id===we?{...ge,...K.data.event}:ge)),{success:!0,data:K.data}):{success:!1,error:K.message,validationErrors:Array.isArray(K.error)?K.error:K.data?.errors}}catch{return{success:!1,error:"Failed to update event"}}finally{g(!1)}},[]),L=N.useCallback(async we=>{g(!0),x(null);try{const te=await _s.delete(we);return te.success?(r(K=>K.filter(ee=>ee._id!==we)),l(K=>({...K,totalCount:K.totalCount-1,totalPages:Math.ceil((K.totalCount-1)/K.limit)})),{success:!0}):{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to delete event"}}finally{g(!1)}},[]),q=N.useCallback(async we=>{g(!0),x(null);try{const te=await _s.restore(we);return te.success?(C(K=>K.filter(ee=>ee._id!==we)),_(K=>({...K,totalCount:K.totalCount-1,totalPages:Math.ceil((K.totalCount-1)/K.limit)})),{success:!0}):{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to restore event"}}finally{g(!1)}},[]),V=N.useCallback(async we=>{g(!0),x(null);try{const te=await _s.permanentDelete(we);return te.success?(C(K=>K.filter(ee=>ee._id!==we)),_(K=>({...K,totalCount:K.totalCount-1,totalPages:Math.ceil((K.totalCount-1)/K.limit)})),{success:!0}):{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to permanently delete event"}}finally{g(!1)}},[]),W=N.useCallback(async we=>{try{const te=await _s.getTicketStats(we);return te.success?{success:!0,data:te.data.stats}:{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to fetch ticket statistics"}}},[]),H=N.useCallback(async()=>{g(!0),x(null);try{const we=await _s.updateExpired();return we.success?(await F(a.currentPage),{success:!0,updatedCount:we.data.updatedCount}):{success:!1,error:we.message}}catch{return{success:!1,error:"Failed to update expired events"}}finally{g(!1)}},[F,a.currentPage]),$=N.useCallback(we=>{d(te=>({...te,...we}))},[]),ce=N.useCallback(we=>{I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{d(te=>({...te,search:we}))},300)},[]),me=N.useCallback(()=>{d({...mO,...e})},[e]),ae=N.useCallback(we=>{P?R(we):F(we)},[P,F,R]),J=N.useCallback(we=>{l(te=>({...te,limit:we})),_(te=>({...te,limit:we}))},[]),se=N.useCallback(()=>{k(we=>!we)},[]),Ee=N.useCallback(()=>{x(null)},[]);return N.useEffect(()=>{P||F(1)},[o,P]),N.useEffect(()=>{P&&R(1)},[P]),N.useEffect(()=>()=>{I.current&&clearTimeout(I.current)},[]),{events:P?E:t,pagination:P?O:a,filters:o,isLoading:h,error:p,showDeleted:P,fetchEvents:F,fetchDeletedEvents:R,getEventById:Y,createEvent:j,updateEvent:z,deleteEvent:L,restoreEvent:q,permanentDeleteEvent:V,getTicketStats:W,updateExpiredEvents:H,updateFilters:$,updateSearch:ce,resetFilters:me,changePage:ae,changeLimit:J,toggleShowDeleted:se,clearError:Ee}}function br({isOpen:e,onClose:t,title:r,children:a,size:l="md",showCloseButton:o=!0,closeOnOverlayClick:d=!0}){const h={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl"},g=N.useCallback(x=>{x.key==="Escape"&&t()},[t]);if(N.useEffect(()=>(e&&(document.addEventListener("keydown",g),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",g),document.body.style.overflow="unset"}),[e,g]),!e)return null;const p=x=>{x.target===x.currentTarget&&d&&t()};return n.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:p},n.createElement("div",{className:`w-full ${h[l]} bg-white rounded-xl shadow-xl transform transition-all`,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},n.createElement("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200"},n.createElement("h2",{id:"modal-title",className:"text-lg font-semibold text-gray-900"},r),o&&n.createElement("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal"},n.createElement(Ia,{className:"h-5 w-5"}))),n.createElement("div",{className:"px-6 py-4 max-h-[calc(100vh-200px)] overflow-y-auto"},a)))}const Pce={UPLOAD:"/web/assets/upload",DELETE:"/web/assets",DOWNLOAD_URL:"/app/assets/download-url"},PR=async(e,t={})=>{const{folder:r="assets",onProgress:a}=t,l=new FormData;(Array.isArray(e)?e:[e]).forEach(d=>{l.append("files",d)}),r&&l.append("folder",r);try{const d=await je.post(Pce.UPLOAD,l,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:h=>{if(a&&h.total){const g=Math.round(h.loaded*100/h.total);a(g)}}});return{success:!0,data:d.data.data||d.data,message:d.data.message||"Upload successful",error:null}}catch(d){return console.error("[AssetService] Upload error:",d),{success:!1,data:null,message:d.response?.data?.message||"Upload failed",error:d.response?.data?.error||d.message}}},Mce=async(e,t={})=>{const r=await PR(e,t);if(r.success&&r.data?.uploaded?.length>0){const a=r.data.uploaded[0];return{success:!0,url:a.publicUrl,downloadUrl:a.downloadUrl,data:a,error:null}}return{success:!1,url:null,downloadUrl:null,data:null,error:r.error||"Upload failed",message:r.message}},Ice=async(e,t={})=>{const r=await PR(e,t);return r.success&&r.data?.uploaded?.length>0?{success:!0,urls:r.data.uploaded.map(a=>a.publicUrl),downloadUrls:r.data.uploaded.map(a=>a.downloadUrl),data:r.data.uploaded,totalUploaded:r.data.totalUploaded,totalFailed:r.data.totalFailed,error:null}:{success:!1,urls:[],downloadUrls:[],data:[],totalUploaded:0,totalFailed:e.length,error:r.error||"Upload failed",message:r.message}},MR=(e,t={})=>{const{allowedTypes:r=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"],maxSize:a=10*1024*1024}=t;return e?r.length>0&&!r.includes(e.type)?{valid:!1,error:`Invalid file type. Allowed: ${r.map(o=>o.split("/")[1]).join(", ")}`}:e.size>a?{valid:!1,error:`File too large. Maximum size: ${(a/1048576).toFixed(1)}MB`}:{valid:!0,error:null}:{valid:!1,error:"No file provided"}},Rce=(e,t={})=>{const r=[],a=[];return e.forEach((l,o)=>{const d=MR(l,t);d.valid?a.push(l):r.push(`${l.name}: ${d.error}`)}),{valid:r.length===0,errors:r,validFiles:a}},Lce=e=>{if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+r[a]};function Ol({onUpload:e,value:t="",values:r=[],multiple:a=!1,accept:l,maxSize:o=10*1024*1024,folder:d="assets",disabled:h=!1,error:g,label:p,required:x=!1,placeholder:E="Drop files here or click to upload",onRemove:C,showUrlInput:O=!0,type:_="image"}){const[P,k]=N.useState(!1),[I,F]=N.useState(!1),[R,Y]=N.useState(0),[j,z]=N.useState(null),[L,q]=N.useState(!1),[V,W]=N.useState(""),H=N.useRef(null),$=()=>{if(l)return l;switch(_){case"video":return"video/*";case"any":return"image/*,video/*";default:return"image/*"}},ce=()=>{switch(_){case"video":return["video/mp4","video/webm","video/ogg","video/quicktime"];case"any":return["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","video/mp4","video/webm","video/ogg","video/quicktime"];default:return["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"]}},me=N.useCallback(ie=>{ie.preventDefault(),!h&&!I&&k(!0)},[h,I]),ae=N.useCallback(ie=>{ie.preventDefault(),k(!1)},[]),J=N.useCallback(ie=>{if(ie.preventDefault(),k(!1),h||I)return;const de=Array.from(ie.dataTransfer.files);de.length>0&&Ee(a?de:[de[0]])},[h,I,a]),se=ie=>{const de=Array.from(ie.target.files);de.length>0&&Ee(a?de:[de[0]]),ie.target.value=""},Ee=async ie=>{z(null),Y(0);const de=ce();if(a){const $e=Rce(ie,{allowedTypes:de,maxSize:o});if(!$e.valid){z($e.errors.join(", "));return}await te($e.validFiles)}else{const $e=MR(ie[0],{allowedTypes:de,maxSize:o});if(!$e.valid){z($e.error);return}await we(ie[0])}},we=async ie=>{F(!0),Y(0);try{const de=await Mce(ie,{folder:d,onProgress:Y});de.success&&de.url?(e(de.url),Y(100)):z(de.message||de.error||"Upload failed")}catch(de){z(de.message||"Upload failed")}finally{F(!1)}},te=async ie=>{F(!0),Y(0);try{const de=await Ice(ie,{folder:d,onProgress:Y});de.success&&de.urls.length>0?(e([...r,...de.urls]),Y(100)):z(de.message||de.error||"Upload failed")}catch(de){z(de.message||"Upload failed")}finally{F(!1)}},K=()=>{if(V.trim()){if(!/^https?:\/\/.+/.test(V.trim())){z("Invalid URL format");return}e(a?[...r,V.trim()]:V.trim()),W(""),q(!1),z(null)}},ee=ie=>{if(C)C(ie);else if(a){const de=r.filter(($e,be)=>be!==ie);e(de)}},ge=()=>{e("")},le=ie=>/\.(mp4|webm|ogg|mov)(\?.*)?$/i.test(ie)||_==="video",Ce=(ie,de=null)=>{const $e=le(ie);return n.createElement("div",{key:de!==null?de:"single",className:"relative group flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200"},$e?n.createElement("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0"},n.createElement(lj,{className:"h-6 w-6 text-gray-500"})):n.createElement("img",{src:ie,alt:`Preview ${de!==null?de+1:""}`,className:"w-16 h-16 object-cover rounded flex-shrink-0",onError:be=>{be.target.style.display="none",be.target.nextSibling?.classList.remove("hidden")}}),n.createElement("div",{className:"hidden w-16 h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0"},n.createElement(Ic,{className:"h-6 w-6 text-gray-400"})),n.createElement("span",{className:"flex-1 text-sm text-gray-600 truncate"},ie),!h&&n.createElement("button",{type:"button",onClick:()=>de!==null?ee(de):ge(),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors"},n.createElement(Ia,{className:"h-4 w-4"})))};return a&&r.length>0,n.createElement("div",{className:"space-y-2"},p&&n.createElement("label",{className:"block text-sm font-medium text-gray-700"},p,x&&n.createElement("span",{className:"text-red-500 ml-1"},"*")),!a&&t&&Ce(t),a&&r.length>0&&n.createElement("div",{className:"space-y-2 mb-3"},r.map((ie,de)=>Ce(ie,de))),(a||!t)&&n.createElement("div",{onDragOver:me,onDragLeave:ae,onDrop:J,onClick:()=>!h&&!I&&H.current?.click(),className:`
            relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer
            transition-all duration-200
            ${P?"border-gray-800 bg-gray-50":"border-gray-300 hover:border-gray-400"}
            ${h||I?"opacity-50 cursor-not-allowed":""}
            ${g||j?"border-red-300 bg-red-50/50":""}
          `},n.createElement("input",{ref:H,type:"file",accept:$(),multiple:a,onChange:se,disabled:h||I,className:"hidden"}),I?n.createElement("div",{className:"space-y-3"},n.createElement(xt,{className:"h-8 w-8 mx-auto text-gray-400 animate-spin"}),n.createElement("div",{className:"space-y-1"},n.createElement("p",{className:"text-sm text-gray-600"},"Uploading..."),n.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2 max-w-xs mx-auto"},n.createElement("div",{className:"bg-gray-800 h-2 rounded-full transition-all duration-300",style:{width:`${R}%`}})),n.createElement("p",{className:"text-xs text-gray-500"},R,"%"))):n.createElement("div",{className:"space-y-2"},n.createElement("div",{className:"mx-auto w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center"},n.createElement(gD,{className:"h-5 w-5 text-gray-500"})),n.createElement("div",null,n.createElement("p",{className:"text-sm text-gray-600"},E),n.createElement("p",{className:"text-xs text-gray-400 mt-1"},_==="video"?"MP4, WebM, OGG":_==="any"?"Images or videos":"PNG, JPG, GIF, WebP, SVG"," ","up to ",Lce(o))))),(g||j)&&n.createElement("div",{className:"flex items-center gap-2 text-sm text-red-500"},n.createElement(Ir,{className:"h-4 w-4 flex-shrink-0"}),n.createElement("span",null,g||j)),O&&!h&&n.createElement("div",{className:"pt-2"},L?n.createElement("div",{className:"flex gap-2"},n.createElement("input",{type:"url",value:V,onChange:ie=>W(ie.target.value),placeholder:"Enter URL manually",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none",onKeyDown:ie=>{ie.key==="Enter"&&(ie.preventDefault(),K()),ie.key==="Escape"&&(q(!1),W(""))}}),n.createElement("button",{type:"button",onClick:K,disabled:!V.trim(),className:"px-3 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 text-sm"},n.createElement(Ds,{className:"h-4 w-4"})),n.createElement("button",{type:"button",onClick:()=>{q(!1),W("")},className:"px-3 py-2 border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors text-sm"},n.createElement(Ia,{className:"h-4 w-4"}))):n.createElement("button",{type:"button",onClick:()=>q(!0),className:"text-sm text-gray-500 hover:text-gray-700 transition-colors"},"Or enter URL manually")))}const Rh={SEAT_ARRANGEMENT:"/web/events"},vc={createSeatArrangement:async(e,t)=>(console.log("[SeatArrangementService] Creating seat arrangement for event:",e),ze(je.post(`${Rh.SEAT_ARRANGEMENT}/${e}/seat-arrangement`,t))),getSeatArrangement:async e=>(console.log("[SeatArrangementService] Fetching seat arrangement for event:",e),ze(je.get(`${Rh.SEAT_ARRANGEMENT}/${e}/seat-arrangement`))),updateSeatArrangement:async(e,t)=>(console.log("[SeatArrangementService] Updating seat arrangement for event:",e),ze(je.put(`${Rh.SEAT_ARRANGEMENT}/${e}/seat-arrangement`,t))),deleteSeatArrangement:async e=>(console.log("[SeatArrangementService] Deleting seat arrangement for event:",e),ze(je.delete(`${Rh.SEAT_ARRANGEMENT}/${e}/seat-arrangement`))),generateSeatLabels:e=>{const t=[],r=/^([A-Z]+)(\d+)-([A-Z]+)(\d+)$/i,a=e.match(r);if(a){const[,d,h,g,p]=a,x=d.toUpperCase().charCodeAt(0),E=g.toUpperCase().charCodeAt(0);for(let C=x;C<=E;C++){const O=String.fromCharCode(C),_=parseInt(p),P=C===x?parseInt(h):1;for(let k=P;k<=_;k++)t.push(`${O}${k}`)}return t}const l=/^(\d+)-(\d+)$/,o=e.match(l);if(o){const[,d,h]=o;for(let g=parseInt(d);g<=parseInt(h);g++)t.push(String(g));return t}return e.includes(",")?e.split(",").map(d=>d.trim()).filter(Boolean):[e.trim()]},parseSeatLabels:e=>{if(!e||!e.trim())return[];const t=new Set;return e.split(/[\n;]/).map(a=>a.trim()).filter(Boolean).forEach(a=>{a.split(",").map(o=>o.trim()).filter(Boolean).forEach(o=>{/^[A-Z]?\d+-[A-Z]?\d+$/i.test(o)||/^[A-Z]+\d+-[A-Z]+\d+$/i.test(o)?vc.generateSeatLabels(o).forEach(g=>t.add(g)):t.add(o)})}),Array.from(t).map(a=>({label:a}))}},fO=(e=null,t=null)=>({name:e?.name||"",description:e?.description||"",imageUrls:e?.imageUrls||[],thumbnail:{imageUrl:e?.thumbnail?.imageUrl||"",videoUrl:e?.thumbnail?.videoUrl||""},mode:e?.mode||"",city:e?.city||"",gmapLink:e?.gmapLink||"",category:e?.category||"",startDate:e?.startDate?hO(e.startDate):"",endDate:e?.endDate?hO(e.endDate):"",price:e?.price??"",compareAtPrice:e?.compareAtPrice??"",availableSeats:e?.availableSeats??"",usePricingTiers:e?.pricingTiers?.length>0,pricingTiers:e?.pricingTiers||[],isLive:e?.isLive??!1,featured:e?.featured??!1,useSeatArrangement:!!t,seatArrangement:{imageUrl:t?.imageUrl||"",seatLabelsInput:t?.seats?.map(r=>r.label).join(", ")||"",seats:t?.seats||[]}});function hO(e){return e?new Date(e).toISOString().slice(0,16):""}const Bce=(e,t=!1)=>{const r={};if(e.name.trim()?e.name.length>200&&(r.name="Name must be 200 characters or less"):r.name="Name is required",e.description.trim()?e.description.length>5e3&&(r.description="Description must be 5000 characters or less"):r.description="Description is required",e.mode||(r.mode="Mode is required"),(e.mode==="OFFLINE"||e.mode==="HYBRID")&&!e.city.trim()&&(r.city="City is required for offline or hybrid events"),e.gmapLink&&e.gmapLink.trim()){const a=/^https?:\/\/(www\.)?(google\.[a-z.]+\/maps|maps\.google\.[a-z.]+|goo\.gl\/maps|maps\.app\.goo\.gl)\/.+/i;/^https?:\/\/.+/.test(e.gmapLink.trim())?a.test(e.gmapLink.trim())||(r.gmapLink="Please provide a valid Google Maps link"):r.gmapLink="Please provide a valid URL"}if(e.category||(r.category="Category is required"),e.startDate?t||new Date(e.startDate)<=new Date&&(r.startDate="Start date must be in the future"):r.startDate="Start date is required",!e.endDate)r.endDate="End date is required";else if(e.startDate){const a=new Date(e.startDate);new Date(e.endDate)<=a&&(r.endDate="End date must be after start date")}if(!e.usePricingTiers)e.price===""||e.price===null||e.price===void 0?r.price="Price is required":(isNaN(e.price)||Number(e.price)<0)&&(r.price="Price must be a valid positive number"),e.compareAtPrice!==""&&e.compareAtPrice!==null&&e.compareAtPrice!==void 0&&(isNaN(e.compareAtPrice)||Number(e.compareAtPrice)<0?r.compareAtPrice="Compare at price must be a valid positive number":Number(e.compareAtPrice)<Number(e.price)&&(r.compareAtPrice="Compare at price must be greater than or equal to price"));else if(e.pricingTiers.length===0)r.pricingTiers="At least one pricing tier is required";else{const a=[];e.pricingTiers.forEach((l,o)=>{const d={};l.name?.trim()||(d.name="Tier name is required"),l.price===""||l.price===null||l.price===void 0?d.price="Tier price is required":(isNaN(l.price)||Number(l.price)<0)&&(d.price="Invalid price"),Object.keys(d).length>0&&(a[o]=d)}),a.some(l=>l)&&(r.tierErrors=a)}if(e.availableSeats!==""&&e.availableSeats!==null&&e.availableSeats!==void 0&&(isNaN(e.availableSeats)||Number(e.availableSeats)<0)&&(r.availableSeats="Available seats must be a valid positive number"),e.imageUrls.length>0){const a=/^https?:\/\/.+/;e.imageUrls.forEach((l,o)=>{l&&!a.test(l)&&(r.imageUrls||(r.imageUrls={}),r.imageUrls[o]="Invalid URL format")})}return e.thumbnail.imageUrl&&!/^https?:\/\/.+/.test(e.thumbnail.imageUrl)&&(r.thumbnailImage="Invalid thumbnail image URL"),e.thumbnail.videoUrl&&!/^https?:\/\/.+/.test(e.thumbnail.videoUrl)&&(r.thumbnailVideo="Invalid thumbnail video URL"),e.useSeatArrangement&&(e.mode==="OFFLINE"||e.mode==="HYBRID")&&(e.seatArrangement.imageUrl?/^https?:\/\/.+/.test(e.seatArrangement.imageUrl)||(r["seatArrangement.imageUrl"]="Invalid seating map image URL"):r["seatArrangement.imageUrl"]="Seating map image is required",(!e.seatArrangement.seats||e.seatArrangement.seats.length===0)&&(r["seatArrangement.seats"]="At least one seat must be defined")),{isValid:Object.keys(r).length===0,errors:r}},gO=()=>({name:"",price:"",compareAtPrice:"",shortDescription:"",notes:"",ticketQuantity:1});function pO({isOpen:e,onClose:t,onSubmit:r,event:a=null,seatArrangement:l=null,isLoading:o=!1,serverError:d=null,validationErrors:h=null}){const g=!!a,[p,x]=N.useState(fO(a,l)),[E,C]=N.useState({});N.useEffect(()=>{e&&(x(fO(a,l)),C({}))},[e,a,l]),N.useEffect(()=>{if(h&&Array.isArray(h)){const W={};h.forEach(H=>{H.field&&(W[H.field]=H.message)}),C(H=>({...H,...W}))}},[h]);const O=W=>{const{name:H,value:$,type:ce}=W.target,me=ce==="number"?$===""?"":Number($):$;x(ae=>({...ae,[H]:me})),E[H]&&C(ae=>({...ae,[H]:null}))},_=(W,H)=>{x(ce=>({...ce,thumbnail:{...ce.thumbnail,[W]:H}}));const $=W==="imageUrl"?"thumbnailImage":"thumbnailVideo";E[$]&&C(ce=>({...ce,[$]:null}))},P=W=>{x(H=>({...H,imageUrls:H.imageUrls.filter(($,ce)=>ce!==W)}))},k=()=>{x(W=>({...W,usePricingTiers:!W.usePricingTiers,pricingTiers:W.usePricingTiers?[]:[gO()],price:W.usePricingTiers?"":W.price,compareAtPrice:W.usePricingTiers?"":W.compareAtPrice}))},I=()=>{x(W=>({...W,pricingTiers:[...W.pricingTiers,gO()]}))},F=W=>{x(H=>({...H,pricingTiers:H.pricingTiers.filter(($,ce)=>ce!==W)}))},R=(W,H,$)=>{x(ce=>({...ce,pricingTiers:ce.pricingTiers.map((me,ae)=>ae===W?{...me,[H]:H==="price"||H==="compareAtPrice"||H==="ticketQuantity"?$===""?"":Number($):$}:me)})),E.tierErrors?.[W]?.[H]&&C(ce=>{const me=[...ce.tierErrors||[]];return me[W]&&delete me[W][H],{...ce,tierErrors:me}})},Y=()=>{x(W=>({...W,useSeatArrangement:!W.useSeatArrangement,seatArrangement:W.useSeatArrangement?W.seatArrangement:{imageUrl:"",seatLabelsInput:"",seats:[]}}))},j=(W,H)=>{x($=>({...$,seatArrangement:{...$.seatArrangement,[W]:H}})),E[`seatArrangement.${W}`]&&C($=>({...$,[`seatArrangement.${W}`]:null}))},z=()=>{const W=p.seatArrangement.seatLabelsInput;if(!W.trim()){x($=>({...$,seatArrangement:{...$.seatArrangement,seats:[]}}));return}const H=vc.parseSeatLabels(W);x($=>({...$,seatArrangement:{...$.seatArrangement,seats:H}}))},L=W=>{x(H=>({...H,seatArrangement:{...H.seatArrangement,seats:H.seatArrangement.seats.filter(($,ce)=>ce!==W)}}))},q=async W=>{W.preventDefault();const H=Bce(p,g);if(!H.isValid){C(H.errors);return}const $={name:p.name.trim(),description:p.description.trim(),mode:p.mode,category:p.category,startDate:new Date(p.startDate).toISOString(),endDate:new Date(p.endDate).toISOString()};p.city.trim()&&($.city=p.city.trim()),p.gmapLink.trim()&&($.gmapLink=p.gmapLink.trim()),p.imageUrls.length>0&&($.imageUrls=p.imageUrls.filter(ce=>ce.trim())),(p.thumbnail.imageUrl||p.thumbnail.videoUrl)&&($.thumbnail={},p.thumbnail.imageUrl&&($.thumbnail.imageUrl=p.thumbnail.imageUrl.trim()),p.thumbnail.videoUrl&&($.thumbnail.videoUrl=p.thumbnail.videoUrl.trim())),p.usePricingTiers&&p.pricingTiers.length>0?$.pricingTiers=p.pricingTiers.map(ce=>({name:ce.name.trim(),price:Number(ce.price),...ce.compareAtPrice!==""&&{compareAtPrice:Number(ce.compareAtPrice)},...ce.shortDescription&&{shortDescription:ce.shortDescription.trim()},...ce.notes&&{notes:ce.notes.trim()},ticketQuantity:Number(ce.ticketQuantity)||1})):($.price=Number(p.price),p.compareAtPrice!==""&&($.compareAtPrice=Number(p.compareAtPrice))),p.availableSeats!==""&&($.availableSeats=Number(p.availableSeats)),g&&($.isLive=p.isLive,$.featured=p.featured),p.useSeatArrangement&&($.seatArrangement={imageUrl:p.seatArrangement.imageUrl,seats:p.seatArrangement.seats}),await r($)},V=()=>{o||t()};return n.createElement(br,{isOpen:e,onClose:V,title:g?"Edit Event":"Create Event",size:"2xl",closeOnOverlayClick:!o},n.createElement("form",{onSubmit:q,className:"space-y-6"},d&&n.createElement("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},d),n.createElement("div",{className:"space-y-4"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Basic Information"),n.createElement("div",null,n.createElement("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1"},"Event Name ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",id:"name",name:"name",value:p.name,onChange:O,disabled:o,maxLength:200,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${E.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter event name"}),E.name&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},E.name)),n.createElement("div",null,n.createElement("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1"},"Description ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("textarea",{id:"description",name:"description",value:p.description,onChange:O,disabled:o,rows:4,maxLength:5e3,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none ${E.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter event description"}),n.createElement("div",{className:"flex justify-between mt-1"},E.description?n.createElement("p",{className:"text-sm text-red-500"},E.description):n.createElement("span",null),n.createElement("span",{className:"text-xs text-gray-500"},p.description.length,"/5000"))),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{htmlFor:"mode",className:"block text-sm font-medium text-gray-700 mb-1"},"Mode ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("select",{id:"mode",name:"mode",value:p.mode,onChange:O,disabled:o,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${E.mode?"border-red-500":"border-gray-300"}`},n.createElement("option",{value:""},"Select mode"),kR.map(W=>n.createElement("option",{key:W,value:W},W))),E.mode&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},E.mode)),n.createElement("div",null,n.createElement("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1"},"Category ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("select",{id:"category",name:"category",value:p.category,onChange:O,disabled:o,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${E.category?"border-red-500":"border-gray-300"}`},n.createElement("option",{value:""},"Select category"),DR.map(W=>n.createElement("option",{key:W,value:W},W.charAt(0)+W.slice(1).toLowerCase()))),E.category&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},E.category))),(p.mode==="OFFLINE"||p.mode==="HYBRID")&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1"},"City ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",id:"city",name:"city",value:p.city,onChange:O,disabled:o,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${E.city?"border-red-500":"border-gray-300"}`,placeholder:"Enter city"}),E.city&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},E.city)),n.createElement("div",null,n.createElement("label",{htmlFor:"gmapLink",className:"block text-sm font-medium text-gray-700 mb-1"},n.createElement("span",{className:"flex items-center gap-1"},n.createElement(_2,{className:"h-4 w-4"}),"Google Maps Link")),n.createElement("input",{type:"url",id:"gmapLink",name:"gmapLink",value:p.gmapLink,onChange:O,disabled:o,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${E.gmapLink?"border-red-500":"border-gray-300"}`,placeholder:"https://maps.app.goo.gl/..."}),E.gmapLink&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},E.gmapLink)))),n.createElement("div",{className:"space-y-4"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Date and Time"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1"},"Start Date & Time ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"datetime-local",id:"startDate",name:"startDate",value:p.startDate,onChange:O,disabled:o,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${E.startDate?"border-red-500":"border-gray-300"}`}),E.startDate&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},E.startDate)),n.createElement("div",null,n.createElement("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1"},"End Date & Time ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"datetime-local",id:"endDate",name:"endDate",value:p.endDate,onChange:O,disabled:o,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${E.endDate?"border-red-500":"border-gray-300"}`}),E.endDate&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},E.endDate)))),n.createElement("div",{className:"space-y-4"},n.createElement("div",{className:"flex items-center justify-between border-b pb-2"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Pricing"),n.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},n.createElement("input",{type:"checkbox",checked:p.usePricingTiers,onChange:k,disabled:o,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),n.createElement("span",{className:"text-sm text-gray-600"},"Use pricing tiers"))),p.usePricingTiers?n.createElement("div",{className:"space-y-4"},E.pricingTiers&&n.createElement("p",{className:"text-sm text-red-500"},E.pricingTiers),p.pricingTiers.map((W,H)=>n.createElement("div",{key:H,className:"p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-3"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("span",{className:"font-medium text-gray-700"},"Tier ",H+1),p.pricingTiers.length>1&&n.createElement("button",{type:"button",onClick:()=>F(H),disabled:o,className:"p-1 text-red-500 hover:bg-red-50 rounded transition-colors"},n.createElement(xr,{className:"h-4 w-4"}))),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Tier Name ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",value:W.name,onChange:$=>R(H,"name",$.target.value),disabled:o,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${E.tierErrors?.[H]?.name?"border-red-500":"border-gray-300"}`,placeholder:"e.g., General Admission"}),E.tierErrors?.[H]?.name&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},E.tierErrors[H].name)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Price ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"number",value:W.price,onChange:$=>R(H,"price",$.target.value),disabled:o,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${E.tierErrors?.[H]?.price?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),E.tierErrors?.[H]?.price&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},E.tierErrors[H].price)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Compare at Price"),n.createElement("input",{type:"number",value:W.compareAtPrice,onChange:$=>R(H,"compareAtPrice",$.target.value),disabled:o,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"0.00"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Ticket Quantity"),n.createElement("input",{type:"number",value:W.ticketQuantity,onChange:$=>R(H,"ticketQuantity",$.target.value),disabled:o,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"1"})),n.createElement("div",{className:"md:col-span-2"},n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Short Description"),n.createElement("input",{type:"text",value:W.shortDescription,onChange:$=>R(H,"shortDescription",$.target.value),disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"Brief description of this tier"})),n.createElement("div",{className:"md:col-span-2"},n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Notes"),n.createElement("textarea",{value:W.notes,onChange:$=>R(H,"notes",$.target.value),disabled:o,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Additional notes"}))))),n.createElement("button",{type:"button",onClick:I,disabled:o,className:"flex items-center gap-2 px-4 py-2 text-gray-800 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50"},n.createElement(Mr,{className:"h-4 w-4"}),"Add Pricing Tier"),n.createElement("div",{className:"w-full md:w-1/3"},n.createElement("label",{htmlFor:"availableSeats",className:"block text-sm font-medium text-gray-700 mb-1"},"Total Available Seats"),n.createElement("input",{type:"number",id:"availableSeats",name:"availableSeats",value:p.availableSeats,onChange:O,disabled:o,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${E.availableSeats?"border-red-500":"border-gray-300"}`,placeholder:"Unlimited"}),E.availableSeats&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},E.availableSeats))):n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1"},"Price ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"number",id:"price",name:"price",value:p.price,onChange:O,disabled:o,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${E.price?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),E.price&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},E.price)),n.createElement("div",null,n.createElement("label",{htmlFor:"compareAtPrice",className:"block text-sm font-medium text-gray-700 mb-1"},"Compare at Price"),n.createElement("input",{type:"number",id:"compareAtPrice",name:"compareAtPrice",value:p.compareAtPrice,onChange:O,disabled:o,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${E.compareAtPrice?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),E.compareAtPrice&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},E.compareAtPrice)),n.createElement("div",null,n.createElement("label",{htmlFor:"availableSeats",className:"block text-sm font-medium text-gray-700 mb-1"},"Available Seats"),n.createElement("input",{type:"number",id:"availableSeats",name:"availableSeats",value:p.availableSeats,onChange:O,disabled:o,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${E.availableSeats?"border-red-500":"border-gray-300"}`,placeholder:"Unlimited"}),E.availableSeats&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},E.availableSeats)))),n.createElement("div",{className:"space-y-4"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Media"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement(Ol,{label:"Thumbnail Image",value:p.thumbnail.imageUrl,onUpload:W=>_("imageUrl",W),disabled:o,error:E.thumbnailImage,type:"image",folder:"events/thumbnails",placeholder:"Drop image here or click to upload"}),n.createElement(Ol,{label:"Thumbnail Video",value:p.thumbnail.videoUrl,onUpload:W=>_("videoUrl",W),disabled:o,error:E.thumbnailVideo,type:"video",folder:"events/videos",placeholder:"Drop video here or click to upload"})),n.createElement(Ol,{label:"Image Gallery",values:p.imageUrls,onUpload:W=>x(H=>({...H,imageUrls:W})),onRemove:W=>P(W),multiple:!0,disabled:o,error:E.imageUrls?"Some image URLs are invalid":null,type:"image",folder:"events/gallery",placeholder:"Drop images here or click to upload"})),(p.mode==="OFFLINE"||p.mode==="HYBRID")&&n.createElement("div",{className:"space-y-4"},n.createElement("div",{className:"flex items-center justify-between border-b pb-2"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2"},n.createElement(EU,{className:"h-5 w-5"}),"Seat Arrangement"),n.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},n.createElement("input",{type:"checkbox",checked:p.useSeatArrangement,onChange:Y,disabled:o,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),n.createElement("span",{className:"text-sm text-gray-600"},"Enable seat selection"))),p.useSeatArrangement&&n.createElement("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200"},n.createElement("div",{className:"flex items-start gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg"},n.createElement(vj,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),n.createElement("div",{className:"text-sm text-blue-700"},n.createElement("p",{className:"font-medium"},"Seat arrangement will be created after the event is saved."),n.createElement("p",{className:"text-xs mt-1"},'Upload a seating map image and define seat labels using patterns like "A1-A10" or "1-50", separated by commas.'))),n.createElement(Ol,{label:"Seating Map Image",value:p.seatArrangement.imageUrl,onUpload:W=>j("imageUrl",W),disabled:o,error:E["seatArrangement.imageUrl"],type:"image",folder:"events/seat-maps",placeholder:"Upload seating arrangement diagram",required:!0}),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Seat Labels ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("div",{className:"flex gap-2"},n.createElement("input",{type:"text",value:p.seatArrangement.seatLabelsInput,onChange:W=>j("seatLabelsInput",W.target.value),disabled:o,className:`flex-1 px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${E["seatArrangement.seats"]?"border-red-500":"border-gray-300"}`,placeholder:"A1-A10, B1-B10, 1-50"}),n.createElement("button",{type:"button",onClick:z,disabled:o||!p.seatArrangement.seatLabelsInput.trim(),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50"},"Generate")),n.createElement("p",{className:"mt-1 text-xs text-gray-500"},'Use patterns: "A1-A10" for A1, A2...A10 | "1-50" for 1, 2...50 | Comma separated for multiple ranges'),E["seatArrangement.seats"]&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},E["seatArrangement.seats"])),p.seatArrangement.seats.length>0&&n.createElement("div",null,n.createElement("div",{className:"flex items-center justify-between mb-2"},n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Generated Seats (",p.seatArrangement.seats.length,")"),n.createElement("button",{type:"button",onClick:()=>x(W=>({...W,seatArrangement:{...W.seatArrangement,seats:[],seatLabelsInput:""}})),disabled:o,className:"text-xs text-red-500 hover:text-red-700"},"Clear all")),n.createElement("div",{className:"max-h-40 overflow-y-auto p-3 bg-white border border-gray-200 rounded-lg"},n.createElement("div",{className:"flex flex-wrap gap-2"},p.seatArrangement.seats.map((W,H)=>n.createElement("span",{key:H,className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 text-sm rounded-md border border-gray-200"},W.label,n.createElement("button",{type:"button",onClick:()=>L(H),disabled:o,className:"text-gray-400 hover:text-red-500"},n.createElement(Ia,{className:"h-3 w-3"}))))))))),n.createElement("div",{className:"space-y-4"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Status"),n.createElement("div",{className:"flex flex-wrap gap-6"},n.createElement("label",{className:"flex items-center gap-3 cursor-pointer"},n.createElement("div",{className:"relative"},n.createElement("input",{type:"checkbox",checked:p.isLive,onChange:W=>x(H=>({...H,isLive:W.target.checked})),disabled:o,className:"sr-only peer"}),n.createElement("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-green-500 peer-disabled:opacity-50 transition-colors"}),n.createElement("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})),n.createElement("div",null,n.createElement("span",{className:"text-sm font-medium text-gray-900"},"Live"),n.createElement("p",{className:"text-xs text-gray-500"},"Event is visible to users"))),n.createElement("label",{className:"flex items-center gap-3 cursor-pointer"},n.createElement("div",{className:"relative"},n.createElement("input",{type:"checkbox",checked:p.featured,onChange:W=>x(H=>({...H,featured:W.target.checked})),disabled:o,className:"sr-only peer"}),n.createElement("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-purple-500 peer-disabled:opacity-50 transition-colors"}),n.createElement("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})),n.createElement("div",null,n.createElement("span",{className:"text-sm font-medium text-gray-900"},"Featured"),n.createElement("p",{className:"text-xs text-gray-500"},"Highlight in featured sections"))))),n.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:V,disabled:o,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),n.createElement("button",{type:"submit",disabled:o,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},o&&n.createElement(xt,{className:"h-4 w-4 animate-spin"}),g?"Update Event":"Create Event"))))}function Tm(e){return e?new Date(e).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"N/A"}function Lh(e){return e==null?"Free":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e)}function Fce(e){const t={TECHNOLOGY:"bg-blue-100 text-gray-900",EDUCATION:"bg-indigo-100 text-indigo-700",MEDICAL:"bg-green-100 text-green-700",COMEDY:"bg-yellow-100 text-yellow-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",BUSINESS:"bg-gray-100 text-gray-700",SPORTS:"bg-orange-100 text-orange-700",ARTS:"bg-purple-100 text-purple-700",MUSIC:"bg-red-100 text-red-700",FOOD:"bg-amber-100 text-amber-700",LIFESTYLE:"bg-teal-100 text-teal-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function Uce(e){return{ONLINE:"bg-green-100 text-green-700",OFFLINE:"bg-blue-100 text-gray-900",HYBRID:"bg-purple-100 text-purple-700"}[e]||"bg-gray-100 text-gray-700"}function jce(e){return e==="ONLINE"||e==="HYBRID"?jv:_2}function zce({isOpen:e,onClose:t,event:r}){const[a,l]=N.useState(0);if(N.useEffect(()=>{e&&r&&l(0)},[e,r]),!r)return null;const o=jce(r.mode),d=r.pricingTiers&&r.pricingTiers.length>0;return n.createElement(br,{isOpen:e,onClose:t,title:"Event Details",size:"2xl"},n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"flex items-start justify-between gap-4"},n.createElement("div",{className:"flex-1"},n.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-2"},r.name),n.createElement("div",{className:"flex flex-wrap items-center gap-2"},n.createElement("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Fce(r.category)}`},r.category),n.createElement("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Uce(r.mode)}`},r.mode),r.isLive?n.createElement("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700"},"Live"):n.createElement("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-600"},"Not Live"),r.featured&&n.createElement("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-700"},"Featured"),r.isDeleted&&n.createElement("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-700"},"Deleted")))),(r.thumbnail?.imageUrl||r.imageUrls?.length>0)&&n.createElement("div",{className:"space-y-2"},n.createElement("div",{className:"relative aspect-video bg-gray-100 rounded-lg overflow-hidden"},r.thumbnail?.imageUrl||r.imageUrls?.length>0?n.createElement("img",{src:r.imageUrls?.[a]||r.thumbnail?.imageUrl,alt:r.name,className:"w-full h-full object-cover",onError:h=>{h.target.src="https://via.placeholder.com/800x450?text=No+Image"}}):n.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400"},"No image available"),r.thumbnail?.videoUrl&&n.createElement("a",{href:r.thumbnail.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-3 right-3 flex items-center gap-2 px-3 py-2 bg-black/70 text-white rounded-lg hover:bg-black/80 transition-colors"},n.createElement(fD,{className:"h-4 w-4"}),"Watch Video")),r.imageUrls&&r.imageUrls.length>1&&n.createElement("div",{className:"flex gap-2 overflow-x-auto pb-2"},r.imageUrls.map((h,g)=>n.createElement("button",{key:g,onClick:()=>l(g),className:`flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-colors ${a===g?"border-blue-500":"border-transparent"}`},n.createElement("img",{src:h,alt:`${r.name} ${g+1}`,className:"w-full h-full object-cover",onError:p=>{p.target.style.display="none"}}))))),n.createElement("div",null,n.createElement("h3",{className:"text-sm font-medium text-gray-500 mb-2"},"Description"),n.createElement("p",{className:"text-gray-700 whitespace-pre-wrap"},r.description)),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},n.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},n.createElement(Qr,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm font-medium"},"Date & Time")),n.createElement("div",{className:"space-y-1"},n.createElement("p",{className:"text-sm"},n.createElement("span",{className:"text-gray-500"},"Starts:")," ",n.createElement("span",{className:"text-gray-900 font-medium"},Tm(r.startDate))),n.createElement("p",{className:"text-sm"},n.createElement("span",{className:"text-gray-500"},"Ends:")," ",n.createElement("span",{className:"text-gray-900 font-medium"},Tm(r.endDate))))),n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},n.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},n.createElement(o,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm font-medium"},"Location")),n.createElement("p",{className:"text-gray-900 font-medium"},r.mode==="ONLINE"?"Online Event":r.city||"Location not specified"),n.createElement("p",{className:"text-sm text-gray-500 capitalize"},r.mode?.toLowerCase()," event"))),n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},n.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-3"},n.createElement(JU,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm font-medium"},"Pricing")),d?n.createElement("div",{className:"space-y-3"},r.pricingTiers.map((h,g)=>n.createElement("div",{key:g,className:"flex items-start justify-between p-3 bg-white rounded-lg border border-gray-200"},n.createElement("div",null,n.createElement("p",{className:"font-medium text-gray-900"},h.name),h.shortDescription&&n.createElement("p",{className:"text-sm text-gray-500"},h.shortDescription),h.notes&&n.createElement("p",{className:"text-xs text-gray-400 mt-1"},h.notes),h.ticketQuantity>1&&n.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Includes ",h.ticketQuantity," tickets")),n.createElement("div",{className:"text-right"},n.createElement("p",{className:"font-semibold text-gray-900"},Lh(h.price)),h.compareAtPrice&&n.createElement("p",{className:"text-sm text-gray-400 line-through"},Lh(h.compareAtPrice)))))):n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",null,n.createElement("p",{className:"text-2xl font-bold text-gray-900"},Lh(r.price)),r.compareAtPrice&&n.createElement("p",{className:"text-sm text-gray-400 line-through"},Lh(r.compareAtPrice))))),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},n.createElement("p",{className:"text-gray-500 mb-1"},"Created By"),n.createElement("p",{className:"text-gray-900 font-medium"},r.createdBy?.name||"Unknown",r.createdBy?.email&&n.createElement("span",{className:"text-gray-500 font-normal"}," (",r.createdBy.email,")")),n.createElement("p",{className:"text-gray-500 text-xs mt-1"},Tm(r.createdAt))),r.updatedBy&&n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},n.createElement("p",{className:"text-gray-500 mb-1"},"Last Updated By"),n.createElement("p",{className:"text-gray-900 font-medium"},r.updatedBy?.name||"Unknown"),n.createElement("p",{className:"text-gray-500 text-xs mt-1"},Tm(r.updatedAt))),r.isDeleted&&r.deletedBy&&n.createElement("div",{className:"p-4 bg-red-50 rounded-lg"},n.createElement("p",{className:"text-red-500 mb-1"},"Deleted By"),n.createElement("p",{className:"text-red-700 font-medium"},r.deletedBy?.name||"Unknown"),n.createElement("p",{className:"text-red-500 text-xs mt-1"},Tm(r.deletedAt)))),n.createElement("div",{className:"pt-4 border-t border-gray-200"},n.createElement("p",{className:"text-xs text-gray-400"},"Event ID: ",n.createElement("code",{className:"bg-gray-100 px-1 py-0.5 rounded"},r._id)))))}function Vce({filters:e,onFilterChange:t,onSearchChange:r,onReset:a,showDeleted:l,onToggleDeleted:o,disabled:d=!1}){const[h,g]=N.useState(!1),[p,x]=N.useState(e.search||""),E=P=>{const k=P.target.value;x(k),r(k)},C=(P,k)=>{t({[P]:k})},O=()=>{x(""),g(!1),a()},_=e.category||e.mode||e.city||e.isLive!==""||e.featured!==""||e.minPrice||e.maxPrice||e.startDateFrom||e.startDateTo;return n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4"},n.createElement("div",{className:"flex flex-wrap items-center gap-3"},n.createElement("div",{className:"relative flex-1 min-w-[240px]"},n.createElement(ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),n.createElement("input",{type:"text",placeholder:"Search events...",value:p,onChange:E,disabled:d,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),p&&n.createElement("button",{onClick:()=>{x(""),r("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},n.createElement(Ia,{className:"h-4 w-4"}))),n.createElement("select",{value:e.category,onChange:P=>C("category",P.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},n.createElement("option",{value:""},"All Categories"),DR.map(P=>n.createElement("option",{key:P,value:P},P.charAt(0)+P.slice(1).toLowerCase()))),n.createElement("select",{value:e.mode,onChange:P=>C("mode",P.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},n.createElement("option",{value:""},"All Modes"),kR.map(P=>n.createElement("option",{key:P,value:P},P))),n.createElement("select",{value:e.isLive,onChange:P=>C("isLive",P.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},n.createElement("option",{value:""},"All Status"),n.createElement("option",{value:"true"},"Live Only"),n.createElement("option",{value:"false"},"Not Live")),n.createElement("select",{value:e.featured,onChange:P=>C("featured",P.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},n.createElement("option",{value:""},"All Events"),n.createElement("option",{value:"true"},"Featured Only"),n.createElement("option",{value:"false"},"Not Featured")),n.createElement("select",{value:e.sortBy,onChange:P=>C("sortBy",P.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},Dce.map(P=>n.createElement("option",{key:P.value,value:P.value},"Sort: ",P.label))),n.createElement("select",{value:e.sortOrder,onChange:P=>C("sortOrder",P.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},n.createElement("option",{value:"desc"},"Newest First"),n.createElement("option",{value:"asc"},"Oldest First")),n.createElement("button",{onClick:()=>g(!h),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${h||_?"bg-gray-100 border-gray-400 text-gray-900":"border-gray-300 text-gray-600 hover:bg-gray-50"}`},n.createElement(Il,{className:"h-4 w-4"}),n.createElement("span",null,"Filters"),_&&n.createElement("span",{className:"flex items-center justify-center w-5 h-5 text-xs bg-gray-800 text-white rounded-full"},"!"),h?n.createElement(UU,{className:"h-4 w-4"}):n.createElement(Ml,{className:"h-4 w-4"})),(_||p)&&n.createElement("button",{onClick:O,disabled:d,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50"},n.createElement(xg,{className:"h-4 w-4"}),"Reset")),h&&n.createElement("div",{className:"pt-4 border-t border-gray-200 space-y-4"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"City"),n.createElement("input",{type:"text",placeholder:"Filter by city",value:e.city,onChange:P=>C("city",P.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Min Price"),n.createElement("input",{type:"number",placeholder:"0",value:e.minPrice,onChange:P=>C("minPrice",P.target.value),disabled:d,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Max Price"),n.createElement("input",{type:"number",placeholder:"Any",value:e.maxPrice,onChange:P=>C("maxPrice",P.target.value),disabled:d,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})),n.createElement("div",{className:"hidden lg:block"}),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Start Date From"),n.createElement("input",{type:"date",value:e.startDateFrom,onChange:P=>C("startDateFrom",P.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Start Date To"),n.createElement("input",{type:"date",value:e.startDateTo,onChange:P=>C("startDateTo",P.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})))),n.createElement("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200"},n.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},n.createElement("input",{type:"checkbox",checked:l,onChange:o,disabled:d,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),n.createElement("span",{className:"text-sm text-gray-600"},"Show deleted events")),l&&n.createElement("span",{className:"text-sm text-amber-600 bg-amber-50 px-2 py-1 rounded"},"Viewing deleted events")))}function yO(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function Hce(e,t){if(t&&t.length>0){const r=t.map(o=>o.price),a=Math.min(...r),l=Math.max(...r);return a===l?Bh(a):`${Bh(a)} - ${Bh(l)}`}return e==null?"Free":Bh(e)}function Bh(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function $ce(e){const t={TECHNOLOGY:"bg-blue-100 text-gray-900",EDUCATION:"bg-indigo-100 text-indigo-700",MEDICAL:"bg-green-100 text-green-700",COMEDY:"bg-yellow-100 text-yellow-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",BUSINESS:"bg-gray-100 text-gray-700",SPORTS:"bg-orange-100 text-orange-700",ARTS:"bg-purple-100 text-purple-700",MUSIC:"bg-red-100 text-red-700",FOOD:"bg-amber-100 text-amber-700",LIFESTYLE:"bg-teal-100 text-teal-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function qce({events:e,showDeleted:t,isLoading:r,canEdit:a,canDelete:l,canPermanentDelete:o,onView:d,onEdit:h,onDelete:g,onRestore:p,onPermanentDelete:x}){return r?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8"},n.createElement("div",{className:"flex items-center justify-center"},n.createElement(xt,{className:"h-8 w-8 animate-spin text-gray-800"}),n.createElement("span",{className:"ml-3 text-gray-600"},"Loading events..."))):e.length===0?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8"},n.createElement("div",{className:"text-center text-gray-500"},n.createElement("p",{className:"text-lg font-medium"},"No events found"),n.createElement("p",{className:"text-sm mt-1"},t?"No deleted events to display.":"Try adjusting your filters or create a new event."))):n.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"w-full"},n.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},n.createElement("tr",null,n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Event"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Category"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Mode"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Date"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Price"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),n.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),n.createElement("tbody",null,e.map(E=>n.createElement("tr",{key:E._id,className:`border-b border-gray-100 hover:bg-gray-50 ${E.isDeleted?"bg-red-50/50":""}`},n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center gap-4"},n.createElement("div",{className:"relative w-16 h-12 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0"},E.featured&&n.createElement("div",{className:"absolute top-0 left-0 z-10"},n.createElement("div",{className:"bg-purple-600 text-white text-[8px] font-semibold px-1.5 py-0.5 rounded-br-md shadow-sm"},"Featured")),E.thumbnail?.imageUrl||E.imageUrls?.[0]?n.createElement("img",{src:E.thumbnail?.imageUrl||E.imageUrls?.[0],alt:E.name,className:"w-full h-full object-cover",onError:C=>{C.target.style.display="none"}}):n.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs"},"No image")),n.createElement("div",{className:"min-w-0"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement("p",{className:"font-medium text-gray-900 truncate max-w-[200px]"},E.name),E.featured&&n.createElement("span",{className:"hidden sm:inline-flex px-1.5 py-0.5 rounded text-[10px] font-medium bg-purple-100 text-purple-700"},"Featured")),E.city&&n.createElement("p",{className:"text-sm text-gray-500 truncate"},E.city)))),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${$ce(E.category)}`},E.category)),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:"text-sm text-gray-600"},E.mode)),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"text-sm"},n.createElement("p",{className:"text-gray-900"},yO(E.startDate)),n.createElement("p",{className:"text-gray-500 text-xs"},"to ",yO(E.endDate)))),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:"text-sm font-medium text-gray-900"},Hce(E.price,E.pricingTiers))),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex flex-col gap-1"},E.isDeleted?n.createElement("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700"},"Deleted"):E.isLive?n.createElement("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700"},"Live"):n.createElement("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"},"Not Live"))),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center justify-end gap-1"},n.createElement("button",{onClick:()=>d(E),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details"},n.createElement(da,{className:"h-4 w-4"})),t?n.createElement(n.Fragment,null,a&&n.createElement("button",{onClick:()=>p(E),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Restore Event"},n.createElement(xg,{className:"h-4 w-4"})),o&&n.createElement("button",{onClick:()=>x(E),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Permanently Delete"},n.createElement(Cz,{className:"h-4 w-4"}))):n.createElement(n.Fragment,null,a&&n.createElement("button",{onClick:()=>h(E),className:"p-2 text-gray-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Event"},n.createElement(bn,{className:"h-4 w-4"})),l&&n.createElement("button",{onClick:()=>g(E),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Event"},n.createElement(xr,{className:"h-4 w-4"})))))))))))}function Wa({isOpen:e,onClose:t,onConfirm:r,title:a="Confirm Action",message:l="Are you sure you want to proceed?",confirmText:o="Confirm",cancelText:d="Cancel",variant:h="danger",isLoading:g=!1}){const x={danger:{icon:"bg-red-100 text-red-600",button:"bg-red-600 hover:bg-red-700 focus:ring-red-500"},warning:{icon:"bg-yellow-100 text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"},primary:{icon:"bg-blue-100 text-gray-800",button:"bg-gray-800 hover:bg-gray-900 focus:ring-blue-500"}}[h],E=async()=>{await r()};return n.createElement(br,{isOpen:e,onClose:t,title:a,size:"sm",closeOnOverlayClick:!g},n.createElement("div",{className:"flex flex-col items-center text-center"},n.createElement("div",{className:`w-12 h-12 rounded-full ${x.icon} flex items-center justify-center mb-4`},n.createElement(Dp,{className:"h-6 w-6"})),n.createElement("p",{className:"text-gray-600 mb-6"},l),n.createElement("div",{className:"flex gap-3 w-full"},n.createElement("button",{onClick:t,disabled:g,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},d),n.createElement("button",{onClick:E,disabled:g,className:`flex-1 px-4 py-2 text-white rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 ${x.button} flex items-center justify-center gap-2`},g&&n.createElement(xt,{className:"h-4 w-4 animate-spin"}),o))))}function aa({currentPage:e,totalPages:t,totalItems:r,itemsPerPage:a,onPageChange:l,itemLabel:o="items",maxVisiblePages:d=5}){if(t<=0)return null;const h=r>0?(e-1)*a+1:0,g=Math.min(e*a,r),p=P=>{const k=[];let I=Math.max(1,e-Math.floor(P/2)),F=Math.min(t,I+P-1);F-I+1<P&&(I=Math.max(1,F-P+1));for(let R=I;R<=F;R++)k.push(R);return k},x=p(d),E=p(3),C=()=>{e>1&&l(e-1)},O=()=>{e<t&&l(e+1)},_=(P,k=!1)=>n.createElement(n.Fragment,null,P[0]>1&&n.createElement(n.Fragment,null,n.createElement("button",{onClick:()=>l(1),className:`${k?"w-7 h-7 text-xs":"w-8 h-8 text-sm"} rounded-lg text-gray-600 hover:bg-gray-100 transition-all`},"1"),P[0]>2&&n.createElement("span",{className:`${k?"w-7 h-7":"w-8 h-8"} flex items-center justify-center text-gray-400 text-sm`},"...")),P.map(I=>n.createElement("button",{key:I,onClick:()=>l(I),className:`${k?"w-7 h-7 text-xs":"w-8 h-8 text-sm"} rounded-lg transition-all ${e===I?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-100"}`},I)),P[P.length-1]<t&&n.createElement(n.Fragment,null,P[P.length-1]<t-1&&n.createElement("span",{className:`${k?"w-7 h-7":"w-8 h-8"} flex items-center justify-center text-gray-400 text-sm`},"..."),n.createElement("button",{onClick:()=>l(t),className:`${k?"w-7 h-7 text-xs":"w-8 h-8 text-sm"} rounded-lg text-gray-600 hover:bg-gray-100 transition-all`},t)));return n.createElement("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 px-4 sm:px-6 py-3 sm:py-4 border-t border-gray-200"},n.createElement("p",{className:"text-xs sm:text-sm text-gray-600 order-2 sm:order-1"},n.createElement("span",{className:"hidden sm:inline"},"Showing "),h,"-",g," of ",r," ",o),n.createElement("div",{className:"flex items-center gap-1 sm:gap-2 order-1 sm:order-2"},n.createElement("button",{onClick:C,disabled:e===1,className:`p-1.5 sm:p-2 rounded-lg transition-all ${e===1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,"aria-label":"Previous page"},n.createElement(oD,{className:"h-4 w-4 sm:h-5 sm:w-5"})),n.createElement("div",{className:"hidden sm:flex items-center gap-1"},_(x,!1)),n.createElement("div",{className:"flex sm:hidden items-center gap-1"},_(E,!0)),n.createElement("button",{onClick:O,disabled:e===t,className:`p-1.5 sm:p-2 rounded-lg transition-all ${e===t?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,"aria-label":"Next page"},n.createElement(iD,{className:"h-4 w-4 sm:h-5 sm:w-5"}))))}function Gce(){const{hasRole:e}=Us(),t=e(["SUPER_ADMIN","ADMIN"]),r=e(["SUPER_ADMIN","ADMIN"]),a=e(["SUPER_ADMIN","ADMIN"]),l=e(["SUPER_ADMIN"]),{events:o,pagination:d,filters:h,isLoading:g,error:p,showDeleted:x,getEventById:E,createEvent:C,updateEvent:O,deleteEvent:_,restoreEvent:P,permanentDeleteEvent:k,getTicketStats:I,updateExpiredEvents:F,updateFilters:R,updateSearch:Y,resetFilters:j,changePage:z,toggleShowDeleted:L,clearError:q}=kce(),[V,W]=N.useState(!1),[H,$]=N.useState(!1),[ce,me]=N.useState(!1),[ae,J]=N.useState(!1),[se,Ee]=N.useState(!1),[we,te]=N.useState(!1),[K,ee]=N.useState(null),[ge,le]=N.useState(null),[Ce,ie]=N.useState(null),[de,$e]=N.useState(!1),[be,Xe]=N.useState(!1),[at,Le]=N.useState(null),[ve,Ue]=N.useState(null),oe=N.useCallback(async ut=>{ee(ut),ie(null),me(!0)},[]),qe=N.useCallback(async ut=>{$e(!0);try{const At=await I(ut);At.success&&ie(At.data)}finally{$e(!1)}},[I]),Ne=N.useCallback(async ut=>{const At=await E(ut._id);if(At.success){ee(At.data),Le(null),Ue(null);try{const vr=await vc.getSeatArrangement(ut._id);vr.success&&vr.data?.arrangement?le(vr.data.arrangement):le(null)}catch{le(null)}$(!0)}else Le(At.error)},[E]),tt=N.useCallback(()=>{ee(null),Le(null),Ue(null),W(!0)},[]),it=N.useCallback(ut=>{ee(ut),J(!0)},[]),pt=N.useCallback(ut=>{ee(ut),Ee(!0)},[]),We=N.useCallback(ut=>{ee(ut),te(!0)},[]),lt=N.useCallback(async ut=>{Xe(!0),Le(null),Ue(null);const{seatArrangement:At,...vr}=ut;try{const ur=await C(vr);if(ur.success){if(At&&At.seats?.length>0){const ea=ur.data._id,kt={imageUrl:At.imageUrl,seats:At.seats.map(Qe=>({label:Qe.label}))},xe=await vc.createSeatArrangement(ea,kt);xe.success||(console.error("Failed to create seat arrangement:",xe.error),Le(`Event created, but seat arrangement failed: ${xe.error}`))}W(!1)}else Le(ur.error),Ue(ur.validationErrors)}finally{Xe(!1)}},[C]),Fe=N.useCallback(async ut=>{if(!K)return;Xe(!0),Le(null),Ue(null);const{seatArrangement:At,...vr}=ut;try{const ur=await O(K._id,vr);if(ur.success){const ea=At&&At.seats?.length>0,kt=!!ge;if(ea&&!kt){const xe={imageUrl:At.imageUrl,seats:At.seats.map(st=>({label:st.label}))},Qe=await vc.createSeatArrangement(K._id,xe);Qe.success||console.error("Failed to create seat arrangement:",Qe.error)}else if(ea&&kt){const xe={imageUrl:At.imageUrl,seats:At.seats.map(st=>({label:st.label}))},Qe=await vc.updateSeatArrangement(K._id,xe);Qe.success||console.error("Failed to update seat arrangement:",Qe.error)}else if(!ea&&kt){const xe=await vc.deleteSeatArrangement(K._id);xe.success||console.error("Failed to delete seat arrangement:",xe.error)}$(!1),ee(null),le(null)}else Le(ur.error),Ue(ur.validationErrors)}finally{Xe(!1)}},[K,ge,O]),mt=N.useCallback(async()=>{if(K){Xe(!0);try{const ut=await _(K._id);ut.success?(J(!1),ee(null)):Le(ut.error)}finally{Xe(!1)}}},[K,_]),$t=N.useCallback(async()=>{if(K){Xe(!0);try{const ut=await P(K._id);ut.success?(Ee(!1),ee(null)):Le(ut.error)}finally{Xe(!1)}}},[K,P]),er=N.useCallback(async()=>{if(K){Xe(!0);try{const ut=await k(K._id);ut.success?(te(!1),ee(null)):Le(ut.error)}finally{Xe(!1)}}},[K,k]),tr=N.useCallback(async()=>{const ut=await F();ut.success&&ut.updatedCount>0&&console.log(`Updated ${ut.updatedCount} expired events`)},[F]);return n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},n.createElement("div",null,n.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Events"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Manage your events, pricing, and ticket availability")),n.createElement("div",{className:"flex items-center gap-3"},n.createElement("button",{onClick:tr,disabled:g,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Mark expired events as not live"},n.createElement(os,{className:`h-4 w-4 ${g?"animate-spin":""}`}),n.createElement("span",{className:"hidden sm:inline"},"Update Expired")),t&&n.createElement("button",{onClick:tt,className:"flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-900 transition-colors"},n.createElement(Mr,{className:"h-5 w-5"}),n.createElement("span",null,"Create Event")))),p&&n.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},n.createElement(Ir,{className:"h-5 w-5 flex-shrink-0"}),n.createElement("p",{className:"flex-1"},p),n.createElement("button",{onClick:q,className:"text-red-500 hover:text-red-700 font-medium"},"Dismiss")),n.createElement(Vce,{filters:h,onFilterChange:R,onSearchChange:Y,onReset:j,showDeleted:x,onToggleDeleted:L,disabled:g}),n.createElement(qce,{events:o,showDeleted:x,isLoading:g,canEdit:r,canDelete:a,canPermanentDelete:l,onView:oe,onEdit:Ne,onDelete:it,onRestore:pt,onPermanentDelete:We}),d.totalPages>0&&n.createElement("div",{className:"bg-white rounded-xl shadow-sm"},n.createElement(aa,{currentPage:d.currentPage,totalPages:d.totalPages,totalItems:d.totalCount,itemsPerPage:d.limit,onPageChange:z,itemLabel:"events"})),n.createElement(pO,{isOpen:V,onClose:()=>W(!1),onSubmit:lt,event:null,isLoading:be,serverError:at,validationErrors:ve}),n.createElement(pO,{isOpen:H,onClose:()=>{$(!1),ee(null),le(null)},onSubmit:Fe,event:K,seatArrangement:ge,isLoading:be,serverError:at,validationErrors:ve}),n.createElement(zce,{isOpen:ce,onClose:()=>{me(!1),ee(null),ie(null)},event:K,ticketStats:Ce,isLoadingStats:de,onFetchStats:qe}),n.createElement(Wa,{isOpen:ae,onClose:()=>{J(!1),ee(null)},onConfirm:mt,title:"Delete Event",message:`Are you sure you want to delete "${K?.name}"? This event will be moved to the deleted items and can be restored later.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:be}),n.createElement(Wa,{isOpen:se,onClose:()=>{Ee(!1),ee(null)},onConfirm:$t,title:"Restore Event",message:`Are you sure you want to restore "${K?.name}"? This event will be available again in the events list.`,confirmText:"Restore",cancelText:"Cancel",variant:"primary",isLoading:be}),n.createElement(Wa,{isOpen:we,onClose:()=>{te(!1),ee(null)},onConfirm:er,title:"Permanently Delete Event",message:`Are you sure you want to permanently delete "${K?.name}"? This action cannot be undone and all associated data will be lost.`,confirmText:"Delete Permanently",cancelText:"Cancel",variant:"danger",isLoading:be}))}function Yce(){const[e,t]=N.useState(1),[r,a]=N.useState(""),[l,o]=N.useState(""),[d,h]=N.useState(""),g=10,p={confirmed:"bg-green-100 text-green-700",pending:"bg-yellow-100 text-yellow-700",cancelled:"bg-red-100 text-red-700"},[x,E]=N.useState([{id:1,userName:"John Doe",email:"john.doe@email.com",phone:"+91 9876543210",eventName:"Tech Conference 2025",enrollmentDate:"2025-02-15",status:"confirmed"},{id:2,userName:"Jane Smith",email:"jane.smith@email.com",phone:"+91 9876543211",eventName:"Medical Summit 2025",enrollmentDate:"2025-02-18",status:"pending"},{id:3,userName:"Mike Johnson",email:"mike.j@email.com",phone:"+91 9876543212",eventName:"Comedy Night Live",enrollmentDate:"2025-02-20",status:"confirmed"},{id:4,userName:"Sarah Wilson",email:"sarah.w@email.com",phone:"+91 9876543213",eventName:"Rock Music Festival",enrollmentDate:"2025-02-22",status:"cancelled"},{id:5,userName:"David Brown",email:"david.b@email.com",phone:"+91 9876543214",eventName:"AI Workshop 2025",enrollmentDate:"2025-02-25",status:"confirmed"},{id:6,userName:"Emily Davis",email:"emily.d@email.com",phone:"+91 9876543215",eventName:"Health Awareness Camp",enrollmentDate:"2025-02-28",status:"pending"},{id:7,userName:"Chris Martin",email:"chris.m@email.com",phone:"+91 9876543216",eventName:"Stand-up Comedy Show",enrollmentDate:"2025-03-01",status:"confirmed"},{id:8,userName:"Lisa Anderson",email:"lisa.a@email.com",phone:"+91 9876543217",eventName:"Jazz Night",enrollmentDate:"2025-03-05",status:"confirmed"},{id:9,userName:"Robert Taylor",email:"robert.t@email.com",phone:"+91 9876543218",eventName:"Tech Conference 2025",enrollmentDate:"2025-03-08",status:"pending"},{id:10,userName:"Amanda White",email:"amanda.w@email.com",phone:"+91 9876543219",eventName:"Medical Summit 2025",enrollmentDate:"2025-03-10",status:"confirmed"},{id:11,userName:"Kevin Lee",email:"kevin.l@email.com",phone:"+91 9876543220",eventName:"Rock Music Festival",enrollmentDate:"2025-03-12",status:"cancelled"},{id:12,userName:"Michelle Garcia",email:"michelle.g@email.com",phone:"+91 9876543221",eventName:"Comedy Night Live",enrollmentDate:"2025-03-15",status:"confirmed"}]),C=[...new Set(x.map(L=>L.eventName))],O=["confirmed","pending","cancelled"],_=L=>{window.confirm("Are you sure you want to delete this enrollment?")&&E(x.filter(q=>q.id!==L))},P=x.filter(L=>{const q=L.userName.toLowerCase().includes(r.toLowerCase())||L.email.toLowerCase().includes(r.toLowerCase()),V=l?L.status===l:!0,W=d?L.eventName===d:!0;return q&&V&&W}),k=Math.ceil(P.length/g),I=(e-1)*g,F=I+g,R=P.slice(I,F),Y=(L,q)=>{L(q),t(1)},j=()=>{e>1&&t(e-1)},z=()=>{e<k&&t(e+1)};return n.createElement("div",null,n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6"},n.createElement("div",{className:"flex flex-wrap items-center gap-4"},n.createElement("div",{className:"relative w-80"},n.createElement(ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),n.createElement("input",{type:"text",placeholder:"Search by name or email...",value:r,onChange:L=>Y(a,L.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),n.createElement("select",{value:l,onChange:L=>Y(o,L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white"},n.createElement("option",{value:""},"All Status"),O.map(L=>n.createElement("option",{key:L,value:L,className:"capitalize"},L.charAt(0).toUpperCase()+L.slice(1)))),n.createElement("select",{value:d,onChange:L=>Y(h,L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white"},n.createElement("option",{value:""},"All Events"),C.map(L=>n.createElement("option",{key:L,value:L},L))))),n.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden"},n.createElement("table",{className:"w-full"},n.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},n.createElement("tr",null,n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"User"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Event"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Phone"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Enrollment Date"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),n.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),n.createElement("tbody",null,R.map(L=>n.createElement("tr",{key:L.id,className:"border-b border-gray-100 hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4"},n.createElement("div",null,n.createElement("p",{className:"font-medium text-gray-900"},L.userName),n.createElement("p",{className:"text-sm text-gray-500"},L.email))),n.createElement("td",{className:"px-6 py-4 text-gray-600"},L.eventName),n.createElement("td",{className:"px-6 py-4 text-gray-600"},L.phone),n.createElement("td",{className:"px-6 py-4 text-gray-600"},L.enrollmentDate),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-medium capitalize ${p[L.status]}`},L.status)),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center justify-end gap-2"},n.createElement("button",{className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-all",title:"View Details"},n.createElement(da,{className:"h-5 w-5"})),n.createElement("button",{onClick:()=>_(L.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete"},n.createElement(xr,{className:"h-5 w-5"})))))))),n.createElement("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200"},n.createElement("p",{className:"text-sm text-gray-600"},"Showing ",P.length>0?I+1:0," to"," ",Math.min(F,P.length)," of ",P.length," enrollments"),n.createElement("div",{className:"flex items-center gap-2"},n.createElement("button",{onClick:j,disabled:e===1,className:`p-2 rounded-lg transition-all ${e===1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`},n.createElement(oD,{className:"h-5 w-5"})),Array.from({length:k},(L,q)=>q+1).map(L=>n.createElement("button",{key:L,onClick:()=>t(L),className:`w-8 h-8 rounded-lg transition-all ${e===L?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-100"}`},L)),n.createElement("button",{onClick:z,disabled:e===k,className:`p-2 rounded-lg transition-all ${e===k?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`},n.createElement(iD,{className:"h-5 w-5"}))))))}function Xce(){return n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-6"},n.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-4"},"Coupons"),n.createElement("p",{className:"text-gray-600"},"Manage your discount coupons here."))}const mc={LIST:"/app/auth/users",GET_BY_ID:e=>`/app/auth/users/${e}`,UPDATE:e=>`/app/auth/users/${e}`,DELETE:e=>`/app/auth/users/${e}`,RESTORE:e=>`/app/auth/users/${e}/restore`,PERMANENT_DELETE:e=>`/app/auth/users/${e}/permanent`},Ou={getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.search&&t.append("search",e.search),e.includeDeleted&&t.append("includeDeleted",e.includeDeleted);const r=t.toString(),a=r?`${mc.LIST}?${r}`:mc.LIST;console.log("[UserService] Fetching users with params:",e);const l=await ze(je.get(a));return l.success?console.log("[UserService] Fetched users:",l.data.users?.length):console.error("[UserService] Failed to fetch users:",l.message),l},getById:async e=>{console.log("[UserService] Fetching user by ID:",e);const t=await ze(je.get(mc.GET_BY_ID(e)));return t.success?console.log("[UserService] Fetched user:",t.data.user?.name):console.error("[UserService] Failed to fetch user:",t.message),t},update:async(e,t)=>{console.log("[UserService] Updating user:",e);const r=await ze(je.put(mc.UPDATE(e),t));return r.success?console.log("[UserService] User updated successfully"):console.error("[UserService] Failed to update user:",r.message),r},delete:async e=>{console.log("[UserService] Soft deleting user:",e);const t=await ze(je.delete(mc.DELETE(e)));return t.success?console.log("[UserService] User soft deleted successfully"):console.error("[UserService] Failed to delete user:",t.message),t},restore:async e=>{console.log("[UserService] Restoring user:",e);const t=await ze(je.post(mc.RESTORE(e)));return t.success?console.log("[UserService] User restored successfully"):console.error("[UserService] Failed to restore user:",t.message),t},permanentDelete:async e=>{console.log("[UserService] Permanently deleting user:",e);const t=await ze(je.delete(mc.PERMANENT_DELETE(e)));return t.success?console.log("[UserService] User permanently deleted"):console.error("[UserService] Failed to permanently delete user:",t.message),t}};function Wce(e={}){const[t,r]=N.useState([]),[a,l]=N.useState({total:0,page:1,limit:10,totalPages:0}),[o,d]=N.useState({search:"",includeDeleted:!1,...e}),[h,g]=N.useState(!1),[p,x]=N.useState(null),E=N.useCallback(async(z=a.page)=>{g(!0),x(null);try{const L={page:z,limit:a.limit,...o.search&&{search:o.search},...o.includeDeleted&&{includeDeleted:o.includeDeleted}},q=await Ou.getAll(L);q.success?(r(q.data.users),l(q.data.pagination)):(x(q.message),r([]))}catch{x("Failed to fetch users"),r([])}finally{g(!1)}},[o,a.limit]),C=N.useCallback(async z=>{try{const L=await Ou.getById(z);return L.success?{success:!0,data:L.data.user}:{success:!1,error:L.message}}catch{return{success:!1,error:"Failed to fetch user details"}}},[]),O=N.useCallback(async(z,L)=>{g(!0),x(null);try{const q=await Ou.update(z,L);return q.success?(r(V=>V.map(W=>W._id===z?{...W,...q.data.user}:W)),{success:!0,data:q.data}):{success:!1,error:q.message,validationErrors:q.data?.errors}}catch{return{success:!1,error:"Failed to update user"}}finally{g(!1)}},[]),_=N.useCallback(async z=>{g(!0),x(null);try{const L=await Ou.delete(z);return L.success?(o.includeDeleted?r(q=>q.map(V=>V._id===z?{...V,isDeleted:!0}:V)):(r(q=>q.filter(V=>V._id!==z)),l(q=>({...q,total:q.total-1,totalPages:Math.ceil((q.total-1)/q.limit)}))),{success:!0}):{success:!1,error:L.message}}catch{return{success:!1,error:"Failed to delete user"}}finally{g(!1)}},[o.includeDeleted]),P=N.useCallback(async z=>{g(!0),x(null);try{const L=await Ou.restore(z);return L.success?(r(q=>q.map(V=>V._id===z?{...V,isDeleted:!1,deletedAt:null}:V)),{success:!0}):{success:!1,error:L.message}}catch{return{success:!1,error:"Failed to restore user"}}finally{g(!1)}},[]),k=N.useCallback(async z=>{g(!0),x(null);try{const L=await Ou.permanentDelete(z);return L.success?(r(q=>q.filter(V=>V._id!==z)),l(q=>({...q,total:q.total-1,totalPages:Math.ceil((q.total-1)/q.limit)})),{success:!0}):{success:!1,error:L.message}}catch{return{success:!1,error:"Failed to permanently delete user"}}finally{g(!1)}},[]),I=N.useCallback(z=>{d(L=>({...L,...z}))},[]),F=N.useCallback(()=>{d({search:"",includeDeleted:!1,...e})},[e]),R=N.useCallback(z=>{E(z)},[E]),Y=N.useCallback(z=>{l(L=>({...L,limit:z}))},[]),j=N.useCallback(()=>{x(null)},[]);return N.useEffect(()=>{E(1)},[o]),{users:t,pagination:a,filters:o,isLoading:h,error:p,fetchUsers:E,getUserById:C,updateUser:O,deleteUser:_,restoreUser:P,permanentDeleteUser:k,updateFilters:I,resetFilters:F,changePage:R,changeLimit:Y,clearError:j}}const xO=(e=null)=>({name:e?.name||"",email:e?.email||"",phone:e?.phone||""}),Kce=e=>{const t={};if(e.name.trim()?(e.name.length<2||e.name.length>100)&&(t.name="Name must be between 2 and 100 characters"):t.name="Name is required",e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(t.email="Invalid email format"):t.email="Email is required",!e.phone.trim())t.phone="Phone is required";else{const r=e.phone.replace(/[^0-9]/g,"");(r.length<10||r.length>15)&&(t.phone="Phone must be 10-15 digits")}return{isValid:Object.keys(t).length===0,errors:t}};function Zce({isOpen:e,onClose:t,onSubmit:r,user:a=null,isLoading:l=!1,serverError:o=null,validationErrors:d=null}){const[h,g]=N.useState(xO(a)),[p,x]=N.useState({});N.useEffect(()=>{e&&(g(xO(a)),x({}))},[e,a]),N.useEffect(()=>{if(d&&Array.isArray(d)){const _={};d.forEach(P=>{P.field&&(_[P.field]=P.message)}),x(P=>({...P,..._}))}},[d]);const E=_=>{const{name:P,value:k}=_.target;g(I=>({...I,[P]:k})),p[P]&&x(I=>({...I,[P]:null}))},C=async _=>{_.preventDefault();const P=Kce(h);if(!P.isValid){x(P.errors);return}const k={...h};k.phone=k.phone.replace(/[^0-9]/g,""),await r(k)},O=()=>{l||t()};return n.createElement(br,{isOpen:e,onClose:O,title:"Edit User",size:"md",closeOnOverlayClick:!l},n.createElement("form",{onSubmit:C},o&&n.createElement("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},o),n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1"},"Name ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",id:"name",name:"name",value:h.name,onChange:E,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter user name"}),p.name&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},p.name)),n.createElement("div",null,n.createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1"},"Email ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"email",id:"email",name:"email",value:h.email,onChange:E,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),p.email&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},p.email)),n.createElement("div",null,n.createElement("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1"},"Phone ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"tel",id:"phone",name:"phone",value:h.phone,onChange:E,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.phone?"border-red-500":"border-gray-300"}`,placeholder:"Enter phone number"}),p.phone&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},p.phone))),n.createElement("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:O,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),n.createElement("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},l&&n.createElement(xt,{className:"h-4 w-4 animate-spin"}),"Update User"))))}const wv=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Qce=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-";function Jce({isOpen:e,onClose:t,user:r,isLoading:a=!1}){return!r&&!a?null:n.createElement(br,{isOpen:e,onClose:t,title:"User Details",size:"lg"},a?n.createElement("div",{className:"py-12 flex flex-col items-center justify-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading user details...")):r?n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"flex items-start gap-4 pb-4 border-b border-gray-200"},n.createElement("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center shrink-0"},n.createElement("span",{className:"text-xl font-semibold text-gray-800"},r.name?.charAt(0)?.toUpperCase()||"?")),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900 truncate"},r.name),n.createElement("div",{className:"flex flex-wrap items-center gap-2 mt-1"},r.isDeleted&&n.createElement("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-xs font-medium flex items-center gap-1"},n.createElement(Ir,{className:"h-3 w-3"}),"Deleted")))),n.createElement("div",{className:"space-y-3"},n.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Contact Information"),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(Ij,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Email")),n.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},r.email||"-")),n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(Yu,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Phone")),n.createElement("p",{className:"text-sm font-medium text-gray-900"},r.phone||"-")))),n.createElement("div",{className:"space-y-3"},n.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Activity"),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(Pa,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Last Login")),n.createElement("p",{className:"text-sm font-medium text-gray-900"},r.lastLogin?wv(r.lastLogin):"Never")),n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(Qr,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Joined")),n.createElement("p",{className:"text-sm font-medium text-gray-900"},wv(r.createdAt))))),r.enrollments&&r.enrollments.length>0?n.createElement("div",{className:"space-y-3"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Enrollments (",r.enrollments.length,")")),n.createElement("div",{className:"space-y-2 max-h-64 overflow-y-auto"},r.enrollments.map((l,o)=>n.createElement("div",{key:l._id||o,className:"bg-gray-50 rounded-lg p-3 flex items-center gap-3"},n.createElement("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center shrink-0"},n.createElement(M4,{className:"h-4 w-4 text-gray-800"})),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},l.event?.name||l.event||"Unknown Event"),n.createElement("p",{className:"text-xs text-gray-500"},"Enrolled: ",Qce(l.enrolledAt))),l.certificate&&n.createElement("a",{href:l.certificate,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-gray-800 hover:text-gray-900 hover:underline shrink-0"},"View Certificate"))))):n.createElement("div",{className:"bg-gray-50 rounded-lg p-4 text-center"},n.createElement(M4,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),n.createElement("p",{className:"text-sm text-gray-500"},"No enrollments yet")),r.isDeleted&&r.deletedAt&&n.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 text-red-700"},n.createElement(Ir,{className:"h-4 w-4 shrink-0"}),n.createElement("p",{className:"text-sm"},"This user was deleted on ",wv(r.deletedAt)))),n.createElement("div",{className:"pt-4 border-t border-gray-200"},n.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"},"Close"))):n.createElement("div",{className:"py-12 text-center text-gray-500"},n.createElement("p",null,"No user data available")))}function eue(){const{hasRole:e}=Us(),{users:t,pagination:r,filters:a,isLoading:l,error:o,getUserById:d,updateUser:h,deleteUser:g,restoreUser:p,permanentDeleteUser:x,updateFilters:E,changePage:C,clearError:O}=Wce(),_=e(["SUPER_ADMIN","ADMIN"]),[P,k]=N.useState(!1),[I,F]=N.useState(!1),[R,Y]=N.useState(!1),[j,z]=N.useState(!1),[L,q]=N.useState(!1),[V,W]=N.useState(null),[H,$]=N.useState(null),[ce,me]=N.useState(!1),[ae,J]=N.useState(null),[se,Ee]=N.useState(null),[we,te]=N.useState(!1),[K,ee]=N.useState("");N.useEffect(()=>{const oe=setTimeout(()=>{K!==a.search&&E({search:K})},300);return()=>clearTimeout(oe)},[K,a.search,E]);const ge=async oe=>{F(!0),me(!0),$(null);const qe=await d(oe._id);qe.success?$(qe.data):$(oe),me(!1)},le=oe=>{_&&(W(oe),J(null),Ee(null),k(!0))},Ce=async oe=>{te(!0),J(null),Ee(null);const qe=await h(V._id,oe);qe.success?(k(!1),W(null)):(J(qe.error),Ee(qe.validationErrors)),te(!1)},ie=oe=>{_&&(W(oe),Y(!0))},de=async()=>{const oe=await g(V._id);Y(!1),W(null),oe.success||console.error("Delete failed:",oe.error)},$e=oe=>{_&&(W(oe),z(!0))},be=async()=>{const oe=await p(V._id);z(!1),W(null),oe.success||console.error("Restore failed:",oe.error)},Xe=oe=>{_&&(W(oe),q(!0))},at=async()=>{const oe=await x(V._id);q(!1),W(null),oe.success||console.error("Permanent delete failed:",oe.error)},Le=()=>{E({includeDeleted:!a.includeDeleted})},ve=()=>{k(!1),W(null),J(null),Ee(null)},Ue=()=>{F(!1),$(null)};return n.createElement("div",{className:"space-y-4 sm:space-y-6"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},n.createElement("div",null,n.createElement("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900"},"Users Management"),n.createElement("p",{className:"text-sm sm:text-base text-gray-600 mt-1"},"Manage and monitor user accounts"))),n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 border border-gray-200"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4"},n.createElement("div",{className:"relative flex-1 max-w-md"},n.createElement(ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),n.createElement("input",{type:"text",placeholder:"Search by name, email, or phone...",value:K,onChange:oe=>ee(oe.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:border-gray-800 outline-none text-sm"})),_&&n.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},n.createElement("input",{type:"checkbox",checked:a.includeDeleted,onChange:Le,className:"w-4 h-4 text-gray-800 border-gray-300 rounded focus:ring-0"}),n.createElement("span",{className:"text-sm text-gray-600"},"Show deleted users")))),o&&n.createElement("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6 flex items-center justify-between"},n.createElement("div",{className:"flex items-center gap-2 text-red-700"},n.createElement(Dp,{className:"h-5 w-5"}),n.createElement("span",null,o)),n.createElement("button",{onClick:O,className:"text-red-700 hover:text-red-900"},"Dismiss")),n.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200"},l&&t.length===0?n.createElement("div",{className:"py-12 flex flex-col items-center justify-center"},n.createElement(xt,{className:"h-8 w-8 text-blue-600 animate-spin"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading users...")):t.length===0?n.createElement("div",{className:"py-12 text-center text-gray-500"},n.createElement("p",null,"No users found"),a.search&&n.createElement("p",{className:"text-sm mt-1"},"Try adjusting your search criteria")):n.createElement(n.Fragment,null,n.createElement("div",{className:"hidden lg:block overflow-x-auto"},n.createElement("table",{className:"w-full"},n.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},n.createElement("tr",null,n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"User"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Phone"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Last Login"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),n.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),n.createElement("tbody",null,t.map(oe=>n.createElement("tr",{key:oe._id,className:`border-b border-gray-100 hover:bg-gray-50 transition-colors ${oe.isDeleted?"bg-red-50/50":""}`},n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center gap-3"},n.createElement("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-700 to-gray-800 rounded-full flex items-center justify-center flex-shrink-0"},n.createElement("span",{className:"text-white font-semibold text-sm"},oe.name?.charAt(0)?.toUpperCase()||"?")),n.createElement("div",{className:"min-w-0"},n.createElement("p",{className:"font-medium text-gray-900 truncate"},oe.name),n.createElement("p",{className:"text-sm text-gray-500 truncate"},oe.email)))),n.createElement("td",{className:"px-6 py-4 text-gray-600"},oe.phone||"-"),n.createElement("td",{className:"px-6 py-4 text-gray-600 text-sm"},oe.lastLogin?new Date(oe.lastLogin).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"Never"),n.createElement("td",{className:"px-6 py-4"},oe.isDeleted?n.createElement("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700"},"Deleted"):n.createElement("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700"},"Active")),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center justify-end gap-2"},n.createElement("button",{onClick:()=>ge(oe),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-all",title:"View Details"},n.createElement(da,{className:"h-5 w-5"})),_&&n.createElement(n.Fragment,null,oe.isDeleted?n.createElement(n.Fragment,null,n.createElement("button",{onClick:()=>$e(oe),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Restore User"},n.createElement(xg,{className:"h-5 w-5"})),n.createElement("button",{onClick:()=>Xe(oe),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Permanently Delete"},n.createElement(xr,{className:"h-5 w-5"}))):n.createElement(n.Fragment,null,n.createElement("button",{onClick:()=>le(oe),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit"},n.createElement(bn,{className:"h-5 w-5"})),n.createElement("button",{onClick:()=>ie(oe),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete"},n.createElement(xr,{className:"h-5 w-5"}))))))))))),n.createElement("div",{className:"lg:hidden divide-y divide-gray-200"},t.map(oe=>n.createElement("div",{key:oe._id,className:`p-4 hover:bg-gray-50 transition-colors ${oe.isDeleted?"bg-red-50/50":""}`},n.createElement("div",{className:"flex items-start gap-3 mb-3"},n.createElement("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-700 to-gray-800 rounded-full flex items-center justify-center flex-shrink-0"},n.createElement("span",{className:"text-white font-semibold"},oe.name?.charAt(0)?.toUpperCase()||"?")),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("p",{className:"font-semibold text-gray-900 truncate"},oe.name),n.createElement("p",{className:"text-sm text-gray-500 truncate"},oe.email),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},oe.phone||"No phone")),n.createElement("div",null,oe.isDeleted?n.createElement("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700"},"Deleted"):n.createElement("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700"},"Active"))),n.createElement("div",{className:"flex items-center justify-between text-sm"},n.createElement("span",{className:"text-gray-500"},"Last login:"," ",oe.lastLogin?new Date(oe.lastLogin).toLocaleDateString("en-IN",{day:"numeric",month:"short"}):"Never"),n.createElement("div",{className:"flex items-center gap-1"},n.createElement("button",{onClick:()=>ge(oe),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-all",title:"View Details"},n.createElement(da,{className:"h-5 w-5"})),_&&n.createElement(n.Fragment,null,oe.isDeleted?n.createElement(n.Fragment,null,n.createElement("button",{onClick:()=>$e(oe),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Restore"},n.createElement(xg,{className:"h-5 w-5"})),n.createElement("button",{onClick:()=>Xe(oe),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Forever"},n.createElement(xr,{className:"h-5 w-5"}))):n.createElement(n.Fragment,null,n.createElement("button",{onClick:()=>le(oe),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit"},n.createElement(bn,{className:"h-5 w-5"})),n.createElement("button",{onClick:()=>ie(oe),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete"},n.createElement(xr,{className:"h-5 w-5"}))))))))),n.createElement(aa,{currentPage:r.page,totalPages:r.totalPages,totalItems:r.total,itemsPerPage:r.limit,onPageChange:C,itemLabel:"users"}))),n.createElement(Zce,{isOpen:P,onClose:ve,onSubmit:Ce,user:V,isLoading:we,serverError:ae,validationErrors:se}),n.createElement(Jce,{isOpen:I,onClose:Ue,user:H,isLoading:ce}),n.createElement(Wa,{isOpen:R,onClose:()=>Y(!1),onConfirm:de,title:"Delete User",message:`Are you sure you want to delete "${V?.name}"? This action can be undone by restoring the user.`,confirmText:"Delete",variant:"danger",isLoading:l}),n.createElement(Wa,{isOpen:j,onClose:()=>z(!1),onConfirm:be,title:"Restore User",message:`Are you sure you want to restore "${V?.name}"?`,confirmText:"Restore",variant:"primary",isLoading:l}),n.createElement(Wa,{isOpen:L,onClose:()=>q(!1),onConfirm:at,title:"Permanently Delete User",message:`Are you sure you want to PERMANENTLY delete "${V?.name}"? This action CANNOT be undone and all user data will be lost forever.`,confirmText:"Delete Forever",variant:"danger",isLoading:l}))}const Sl={CREATE:"/web/auth/create",LIST:"/web/auth/admins",GET_BY_ID:e=>`/web/auth/admins/${e}`,UPDATE:e=>`/web/auth/admins/${e}`,DELETE:e=>`/web/auth/admins/${e}`,GET_ALLOWED_EVENTS:e=>`/web/auth/admins/${e}/allowed-events`,UPDATE_ALLOWED_EVENTS:e=>`/web/auth/admins/${e}/allowed-events`,ADD_ALLOWED_EVENT:(e,t)=>`/web/auth/admins/${e}/allowed-events/${t}`,REMOVE_ALLOWED_EVENT:(e,t)=>`/web/auth/admins/${e}/allowed-events/${t}`},Om={create:async e=>{console.log("[AdminService] Creating admin:",e.username);const t=await ze(je.post(Sl.CREATE,e));return t.success?console.log("[AdminService] Admin created successfully:",t.data.admin._id):console.error("[AdminService] Failed to create admin:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.status&&t.append("status",e.status),e.role&&t.append("role",e.role),e.search&&t.append("search",e.search);const r=t.toString(),a=r?`${Sl.LIST}?${r}`:Sl.LIST;console.log("[AdminService] Fetching admins with params:",e);const l=await ze(je.get(a));return l.success?console.log("[AdminService] Fetched admins:",l.data.admins?.length):console.error("[AdminService] Failed to fetch admins:",l.message),l},getById:async e=>{console.log("[AdminService] Fetching admin by ID:",e);const t=await ze(je.get(Sl.GET_BY_ID(e)));return t.success?console.log("[AdminService] Fetched admin:",t.data.admin.username):console.error("[AdminService] Failed to fetch admin:",t.message),t},update:async(e,t)=>{console.log("[AdminService] Updating admin:",e);const r=await ze(je.put(Sl.UPDATE(e),t));return r.success?console.log("[AdminService] Admin updated successfully"):console.error("[AdminService] Failed to update admin:",r.message),r},delete:async e=>{console.log("[AdminService] Deleting admin:",e);const t=await ze(je.delete(Sl.DELETE(e)));return t.success?console.log("[AdminService] Admin deleted successfully"):console.error("[AdminService] Failed to delete admin:",t.message),t},getAllowedEvents:async e=>{console.log("[AdminService] Fetching allowed events for admin:",e);const t=await ze(je.get(Sl.GET_ALLOWED_EVENTS(e)));return t.success?console.log("[AdminService] Fetched allowed events:",t.data.allowedEvents?.length):console.error("[AdminService] Failed to fetch allowed events:",t.message),t},updateAllowedEvents:async(e,t)=>{console.log("[AdminService] Updating allowed events for admin:",e);const r=await ze(je.put(Sl.UPDATE_ALLOWED_EVENTS(e),{allowedEvents:t}));return r.success?console.log("[AdminService] Allowed events updated successfully"):console.error("[AdminService] Failed to update allowed events:",r.message),r},addAllowedEvent:async(e,t)=>{console.log("[AdminService] Adding event to allowed events:",t);const r=await ze(je.post(Sl.ADD_ALLOWED_EVENT(e,t)));return r.success?console.log("[AdminService] Event added to allowed events"):console.error("[AdminService] Failed to add event:",r.message),r},removeAllowedEvent:async(e,t)=>{console.log("[AdminService] Removing event from allowed events:",t);const r=await ze(je.delete(Sl.REMOVE_ALLOWED_EVENT(e,t)));return r.success?console.log("[AdminService] Event removed from allowed events"):console.error("[AdminService] Failed to remove event:",r.message),r}};function tue(e={}){const[t,r]=N.useState([]),[a,l]=N.useState({total:0,page:1,limit:10,totalPages:0}),[o,d]=N.useState({search:"",status:"",role:"",...e}),[h,g]=N.useState(!1),[p,x]=N.useState(null),E=N.useCallback(async(j=a.page)=>{g(!0),x(null);try{const z={page:j,limit:a.limit,...o.search&&{search:o.search},...o.status&&{status:o.status},...o.role&&{role:o.role}},L=await Om.getAll(z);L.success?(r(L.data.admins),l(L.data.pagination)):(x(L.message),r([]))}catch{x("Failed to fetch admins"),r([])}finally{g(!1)}},[o,a.limit]),C=N.useCallback(async j=>{g(!0),x(null);try{const z=await Om.create(j);return z.success?(await E(1),{success:!0,data:z.data}):{success:!1,error:z.message,validationErrors:z.error}}catch{return{success:!1,error:"Failed to create admin"}}finally{g(!1)}},[E]),O=N.useCallback(async(j,z)=>{g(!0),x(null);try{const L=await Om.update(j,z);return L.success?(r(q=>q.map(V=>V._id===j?{...V,...L.data.admin}:V)),{success:!0,data:L.data}):{success:!1,error:L.message,validationErrors:L.error}}catch{return{success:!1,error:"Failed to update admin"}}finally{g(!1)}},[]),_=N.useCallback(async j=>{g(!0),x(null);try{const z=await Om.delete(j);return z.success?(r(L=>L.filter(q=>q._id!==j)),l(L=>({...L,total:L.total-1,totalPages:Math.ceil((L.total-1)/L.limit)})),{success:!0}):{success:!1,error:z.message}}catch{return{success:!1,error:"Failed to delete admin"}}finally{g(!1)}},[]),P=N.useCallback(async j=>{try{const z=await Om.getById(j);return z.success?{success:!0,data:z.data.admin}:{success:!1,error:z.message}}catch{return{success:!1,error:"Failed to fetch admin details"}}},[]),k=N.useCallback(j=>{d(z=>({...z,...j}))},[]),I=N.useCallback(()=>{d({search:"",status:"",role:"",...e})},[e]),F=N.useCallback(j=>{E(j)},[E]),R=N.useCallback(j=>{l(z=>({...z,limit:j}))},[]),Y=N.useCallback(()=>{x(null)},[]);return N.useEffect(()=>{E(1)},[o]),{admins:t,pagination:a,filters:o,isLoading:h,error:p,fetchAdmins:E,createAdmin:C,updateAdmin:O,deleteAdmin:_,getAdminById:P,updateFilters:k,resetFilters:I,changePage:F,changeLimit:R,clearError:Y}}function rue(e={}){const{autoFetch:t=!0,isLive:r}=e,[a,l]=N.useState([]),[o,d]=N.useState(!1),[h,g]=N.useState(null),[p,x]=N.useState(""),E=N.useRef(null),C=N.useRef({data:null,timestamp:null}),O=300*1e3,_=N.useCallback(async(F="",R=!0)=>{if(R&&!F&&C.current.data&&Date.now()-C.current.timestamp<O){l(C.current.data);return}d(!0),g(null);try{const Y={};r!==void 0&&(Y.isLive=r),F&&(Y.search=F);const j=await _s.getDropdownEvents(Y);if(j.success){const z=j.data.events||[];l(z),F||(C.current={data:z,timestamp:Date.now()})}else g(j.message),l([])}catch{g("Failed to fetch events"),l([])}finally{d(!1)}},[r]),P=N.useCallback(F=>{if(x(F),E.current&&clearTimeout(E.current),!F.trim()){C.current.data?l(C.current.data):_("",!0);return}E.current=setTimeout(()=>{_(F,!1)},300)},[_]),k=N.useCallback(()=>{C.current={data:null,timestamp:null},_("",!1)},[_]),I=N.useCallback(()=>{g(null)},[]);return N.useEffect(()=>{t&&_("",!0)},[t,_]),N.useEffect(()=>()=>{E.current&&clearTimeout(E.current)},[]),{events:a,isLoading:o,error:h,searchQuery:p,fetchEvents:_,searchEvents:P,refreshEvents:k,clearError:I}}const aue=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",bO={TECHNOLOGY:"bg-blue-100 text-gray-900",MUSIC:"bg-purple-100 text-purple-700",SPORTS:"bg-green-100 text-green-700",BUSINESS:"bg-yellow-100 text-yellow-700",EDUCATION:"bg-indigo-100 text-indigo-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",DEFAULT:"bg-gray-100 text-gray-700"};function IR({selectedIds:e=[],onChange:t,disabled:r=!1,placeholder:a="Select events...",error:l}){const[o,d]=N.useState(!1),[h,g]=N.useState(""),p=N.useRef(null),x=N.useRef(null),{events:E,isLoading:C,error:O,searchEvents:_}=rue({autoFetch:!0}),P=N.useMemo(()=>{if(!h.trim())return E;const H=h.toLowerCase();return E.filter($=>$.name.toLowerCase().includes(H)||$.category?.toLowerCase().includes(H))},[E,h]),k=N.useMemo(()=>E.filter(H=>e.includes(H._id)),[E,e]);N.useEffect(()=>{const H=$=>{p.current&&!p.current.contains($.target)&&d(!1)};return document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[]);const I=N.useCallback(H=>{const $=H.target.value;g($),_($)},[_]),F=N.useCallback(H=>{if(r)return;const $=e.includes(H)?e.filter(ce=>ce!==H):[...e,H];t($)},[e,t,r]),R=N.useCallback((H,$)=>{$.stopPropagation(),!r&&t(e.filter(ce=>ce!==H))},[e,t,r]),Y=N.useCallback(()=>{if(r)return;const H=P.map(ce=>ce._id),$=[...new Set([...e,...H])];t($)},[P,e,t,r]),j=N.useCallback(()=>{r||t([])},[t,r]),z=N.useCallback(()=>{r||(d(!0),setTimeout(()=>x.current?.focus(),0))},[r]),L=N.useCallback(H=>{H.key==="Escape"&&d(!1)},[]),q=H=>bO[H]||bO.DEFAULT,V=l||O,W=2;return n.createElement("div",{ref:p,className:"relative",onKeyDown:L},n.createElement("div",{onClick:z,className:`min-h-[42px] px-2 sm:px-3 py-2 border rounded-lg cursor-pointer transition-colors ${r?"bg-gray-100 cursor-not-allowed":o?"border-gray-800":V?"border-red-500":"border-gray-300 hover:border-gray-400"}`},n.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap"},k.length>0?n.createElement(n.Fragment,null,k.slice(0,W).map(H=>n.createElement("span",{key:H._id,className:"inline-flex items-center gap-1 px-1.5 sm:px-2 py-0.5 sm:py-1 bg-blue-100 text-blue-800 text-xs sm:text-sm rounded-md"},n.createElement("span",{className:"truncate max-w-[80px] sm:max-w-[120px]"},H.name),!r&&n.createElement("button",{type:"button",onClick:$=>R(H._id,$),className:"hover:bg-blue-200 rounded p-0.5"},n.createElement(Ia,{className:"h-3 w-3"})))),k.length>W&&n.createElement("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 bg-gray-100 text-gray-600 text-xs sm:text-sm rounded-md"},"+",k.length-W," more")):n.createElement("span",{className:"text-gray-400 text-sm"},a),n.createElement(Ml,{className:`h-4 w-4 sm:h-5 sm:w-5 text-gray-400 ml-auto shrink-0 transition-transform ${o?"rotate-180":""}`}))),V&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500 flex items-center gap-1"},n.createElement(Ir,{className:"h-3 w-3 sm:h-4 sm:w-4"}),V),o&&!r&&n.createElement("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg"},n.createElement("div",{className:"p-2 border-b border-gray-200"},n.createElement("div",{className:"relative"},n.createElement(ya,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.createElement("input",{ref:x,type:"text",value:h,onChange:I,placeholder:"Search events...",className:"w-full pl-8 sm:pl-9 pr-4 py-2 border border-gray-300 rounded-md focus:border-gray-800 outline-none text-sm"}),C&&n.createElement(xt,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 animate-spin"}))),n.createElement("div",{className:"px-2 py-1.5 border-b border-gray-200 flex items-center justify-between bg-gray-50"},n.createElement("span",{className:"text-xs text-gray-500"},e.length,"/",E.length),n.createElement("div",{className:"flex gap-2"},n.createElement("button",{type:"button",onClick:Y,className:"text-xs text-gray-800 hover:text-black font-medium"},"Select all"),n.createElement("span",{className:"text-gray-300"},"|"),n.createElement("button",{type:"button",onClick:j,className:"text-xs text-red-600 hover:text-red-800 font-medium"},"Clear"))),n.createElement("div",{className:"max-h-48 sm:max-h-60 overflow-y-auto"},P.length===0?n.createElement("div",{className:"px-4 py-6 sm:py-8 text-center text-gray-500 text-sm"},C?n.createElement("div",{className:"flex flex-col items-center gap-2"},n.createElement(xt,{className:"h-5 w-5 sm:h-6 sm:w-6 animate-spin"}),n.createElement("span",null,"Loading events...")):h?n.createElement("span",null,'No events found for "',h,'"'):n.createElement("span",null,"No events available")):P.map(H=>{const $=e.includes(H._id);return n.createElement("div",{key:H._id,onClick:()=>F(H._id),className:`px-2 sm:px-3 py-2 sm:py-2.5 cursor-pointer flex items-start gap-2 sm:gap-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 ${$?"bg-blue-50":""}`},n.createElement("div",{className:`shrink-0 w-4 h-4 sm:w-5 sm:h-5 rounded border-2 flex items-center justify-center mt-0.5 ${$?"bg-gray-800 border-gray-800":"border-gray-300"}`},$&&n.createElement(Ds,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-white"})),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap"},n.createElement("p",{className:"font-medium text-gray-900 text-sm truncate"},H.name),H.isLive&&n.createElement("span",{className:"shrink-0 px-1 sm:px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded"},"Live")),n.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 mt-1 flex-wrap"},H.category&&n.createElement("span",{className:`px-1 sm:px-1.5 py-0.5 text-xs rounded ${q(H.category)}`},H.category),H.startDate&&n.createElement("span",{className:"flex items-center gap-1 text-xs text-gray-500"},n.createElement(Qr,{className:"h-3 w-3"}),aue(H.startDate)))))})),e.length>0&&n.createElement("div",{className:"px-2 sm:px-3 py-2 border-t border-gray-200 bg-gray-50"},n.createElement("p",{className:"text-xs sm:text-sm text-gray-600"},n.createElement("span",{className:"font-medium"},e.length)," event",e.length!==1?"s":""," selected"))))}const nue=[{value:"MANAGEMENT_STAFF",label:"Management Staff"},{value:"ADMIN",label:"Admin"},{value:"SUPER_ADMIN",label:"Super Admin"}],sue=[{value:"ACTIVATED",label:"Active"},{value:"DEACTIVATED",label:"Inactive"}],lue=[{value:"events",label:"Events"},{value:"enrollments",label:"Enrollments"},{value:"payments",label:"Payments"},{value:"users",label:"Users"},{value:"coupons",label:"Coupons"}],iue=e=>!e||!Array.isArray(e)?[]:e.map(t=>typeof t=="string"?t:t._id).filter(Boolean),vO=(e=null)=>({name:e?.name||"",username:e?.username||"",email:e?.email||"",phone:e?.phone||"",password:"",role:e?.role||"MANAGEMENT_STAFF",status:e?.status||"ACTIVATED",access:e?.access||[],allowedEvents:iue(e?.allowedEvents),maxCashTicketsAllowed:e?.maxCashTicketsAllowed||""}),oue=(e,t=!1)=>{const r={};if(e.name.trim()?(e.name.length<2||e.name.length>100)&&(r.name="Name must be between 2 and 100 characters"):r.name="Name is required",e.username.trim()?e.username.length<3||e.username.length>50?r.username="Username must be between 3 and 50 characters":/^[a-zA-Z0-9_]+$/.test(e.username)||(r.username="Username can only contain letters, numbers, and underscores"):r.username="Username is required",e.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&(r.email="Invalid email format"),e.phone.trim()){const a=e.phone.replace(/[^0-9]/g,"");a.length>0&&(a.length<10||a.length>15)&&(r.phone="Phone must be 10-15 digits")}if(t||(e.password?e.password.length<8&&(r.password="Password must be at least 8 characters"):r.password="Password is required"),e.maxCashTicketsAllowed!==""&&e.maxCashTicketsAllowed!==null&&e.maxCashTicketsAllowed!==void 0){const a=parseInt(e.maxCashTicketsAllowed,10);isNaN(a)?r.maxCashTicketsAllowed="Must be a valid number":a<0&&(r.maxCashTicketsAllowed="Cannot be negative")}return{isValid:Object.keys(r).length===0,errors:r}};function cue({isOpen:e,onClose:t,onSubmit:r,admin:a=null,isLoading:l=!1,serverError:o=null,validationErrors:d=null}){const h=!!a,[g,p]=N.useState(vO(a)),[x,E]=N.useState({}),[C,O]=N.useState(!1);N.useEffect(()=>{e&&(p(vO(a)),E({}))},[e,a]),N.useEffect(()=>{if(d&&Array.isArray(d)){const j={};d.forEach(z=>{z.field&&(j[z.field]=z.message)}),E(z=>({...z,...j}))}},[d]);const _=j=>{const{name:z,value:L}=j.target;p(q=>{const V={...q,[z]:L};return z==="role"&&L==="SUPER_ADMIN"&&(V.allowedEvents=[]),z==="role"&&(L==="ADMIN"||L==="SUPER_ADMIN")&&(V.maxCashTicketsAllowed=""),V}),x[z]&&E(q=>({...q,[z]:null}))},P=g.role!=="SUPER_ADMIN",k=g.role==="MANAGEMENT_STAFF",I=j=>{p(z=>({...z,access:z.access.includes(j)?z.access.filter(L=>L!==j):[...z.access,j]}))},F=j=>{p(z=>({...z,allowedEvents:j}))},R=async j=>{j.preventDefault();const z=oue(g,h);if(!z.isValid){E(z.errors);return}const L={...g};L.phone=L.phone.replace(/[^0-9]/g,""),h&&!L.password&&delete L.password,h||delete L.status,L.maxCashTicketsAllowed===""||L.maxCashTicketsAllowed===null||L.maxCashTicketsAllowed===void 0?delete L.maxCashTicketsAllowed:L.maxCashTicketsAllowed=parseInt(L.maxCashTicketsAllowed,10),await r(L)},Y=()=>{l||t()};return n.createElement(br,{isOpen:e,onClose:Y,title:h?"Edit Admin":"Create New Admin",size:"xl",closeOnOverlayClick:!l},n.createElement("form",{onSubmit:R},o&&n.createElement("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},o),n.createElement("div",{className:"space-y-4"},n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1"},"Name ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",id:"name",name:"name",value:g.name,onChange:_,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${x.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter admin name"}),x.name&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},x.name)),n.createElement("div",null,n.createElement("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1"},"Username ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",id:"username",name:"username",value:g.username,onChange:_,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${x.username?"border-red-500":"border-gray-300"}`,placeholder:"Enter username"}),x.username&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},x.username)),n.createElement("div",null,n.createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1"},"Email"," ",n.createElement("span",{className:"text-gray-400 text-xs ml-1"},"(optional)")),n.createElement("input",{type:"email",id:"email",name:"email",value:g.email,onChange:_,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${x.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),x.email&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},x.email)),n.createElement("div",null,n.createElement("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1"},"Phone"," ",n.createElement("span",{className:"text-gray-400 text-xs ml-1"},"(optional)")),n.createElement("input",{type:"tel",id:"phone",name:"phone",value:g.phone,onChange:_,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${x.phone?"border-red-500":"border-gray-300"}`,placeholder:"Enter phone number"}),x.phone&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},x.phone)),n.createElement("div",null,n.createElement("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1"},"Password ",!h&&n.createElement("span",{className:"text-red-500"},"*"),h&&n.createElement("span",{className:"text-gray-400 text-xs ml-1"},"(leave empty to keep current)")),n.createElement("div",{className:"relative"},n.createElement("input",{type:C?"text":"password",id:"password",name:"password",value:g.password,onChange:_,disabled:l,className:`w-full px-3 py-2 pr-10 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${x.password?"border-red-500":"border-gray-300"}`,placeholder:h?"New password (optional)":"Enter password"}),n.createElement("button",{type:"button",onClick:()=>O(!C),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},C?n.createElement(cD,{className:"h-4 w-4 sm:h-5 sm:w-5"}):n.createElement(da,{className:"h-4 w-4 sm:h-5 sm:w-5"}))),x.password&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},x.password)),n.createElement("div",null,n.createElement("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1"},"Role"),n.createElement("select",{id:"role",name:"role",value:g.role,onChange:_,disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100 text-sm sm:text-base"},nue.map(j=>n.createElement("option",{key:j.value,value:j.value},j.label)))),h&&n.createElement("div",null,n.createElement("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),n.createElement("select",{id:"status",name:"status",value:g.status,onChange:_,disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100 text-sm sm:text-base"},sue.map(j=>n.createElement("option",{key:j.value,value:j.value},j.label)))),k&&n.createElement("div",null,n.createElement("label",{htmlFor:"maxCashTicketsAllowed",className:"block text-sm font-medium text-gray-700 mb-1"},"Max Cash Tickets Allowed"),n.createElement("input",{type:"number",id:"maxCashTicketsAllowed",name:"maxCashTicketsAllowed",value:g.maxCashTicketsAllowed,onChange:_,disabled:l,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${x.maxCashTicketsAllowed?"border-red-500":"border-gray-300"}`,placeholder:"Enter max tickets or leave empty"}),x.maxCashTicketsAllowed&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},x.maxCashTicketsAllowed),n.createElement("p",{className:"mt-1 text-xs text-gray-500"},"Limit the total number of cash tickets this admin can generate. Leave empty for unlimited."),n.createElement("p",{className:"text-gray-400 text-xs"},"optional, leave empty for unlimited"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Access Permissions"),n.createElement("div",{className:"flex flex-wrap gap-2"},lue.map(j=>n.createElement("label",{key:j.value,className:`inline-flex items-center px-3 py-2 rounded-lg border cursor-pointer transition-colors ${g.access.includes(j.value)?"bg-blue-50 border-blue-500 text-gray-900":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"} ${l?"opacity-50 cursor-not-allowed":""}`},n.createElement("input",{type:"checkbox",checked:g.access.includes(j.value),onChange:()=>I(j.value),disabled:l,className:"sr-only"}),n.createElement("span",{className:"text-sm"},j.label))))),P&&n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Allowed Events",n.createElement("span",{className:"text-gray-400 text-xs ml-2 font-normal"},"(Events this admin can access)")),n.createElement(IR,{selectedIds:g.allowedEvents,onChange:F,disabled:l,placeholder:"Search and select events..."})),!P&&n.createElement("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg"},n.createElement("p",{className:"text-sm text-gray-900"},"Super Admins have access to all events by default."))),n.createElement("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:Y,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),n.createElement("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},l&&n.createElement(xt,{className:"h-4 w-4 animate-spin"}),h?"Update Admin":"Create Admin"))))}const uue={SUPER_ADMIN:{label:"Super Admin",color:"bg-red-100 text-red-700"},ADMIN:{label:"Admin",color:"bg-purple-100 text-purple-700"},MANAGEMENT_STAFF:{label:"Management",color:"bg-blue-100 text-blue-700"}},due={ACTIVATED:{label:"Active",color:"bg-green-100 text-green-700"},DEACTIVATED:{label:"Inactive",color:"bg-gray-100 text-gray-700"}},mue=[{value:"",label:"All Roles"},{value:"SUPER_ADMIN",label:"Super Admin"},{value:"ADMIN",label:"Admin"},{value:"MANAGEMENT_STAFF",label:"Management Staff"}],fue=[{value:"",label:"All Status"},{value:"ACTIVATED",label:"Active"},{value:"DEACTIVATED",label:"Inactive"}];function hue(){const{admin:e}=Us(),{admins:t,pagination:r,filters:a,isLoading:l,error:o,fetchAdmins:d,createAdmin:h,updateAdmin:g,deleteAdmin:p,updateFilters:x,changePage:E,clearError:C}=tue(),[O,_]=N.useState(!1),[P,k]=N.useState(!1),[I,F]=N.useState(null),[R,Y]=N.useState(!1),[j,z]=N.useState(null),[L,q]=N.useState(null),[V,W]=N.useState(a.search),H=N.useCallback(de=>{W(de);const $e=setTimeout(()=>{x({search:de})},300);return()=>clearTimeout($e)},[x]),$=N.useCallback(de=>{x({role:de})},[x]),ce=N.useCallback(de=>{x({status:de})},[x]),me=N.useCallback(()=>{F(null),z(null),q(null),_(!0)},[]),ae=N.useCallback(de=>{F(de),z(null),q(null),_(!0)},[]),J=N.useCallback(()=>{_(!1),F(null),z(null),q(null)},[]),se=N.useCallback(de=>{F(de),k(!0)},[]),Ee=N.useCallback(()=>{k(!1),F(null)},[]),we=N.useCallback(async de=>{Y(!0),z(null),q(null);try{let $e;I?$e=await g(I._id,de):$e=await h(de),$e.success?J():(z($e.error),$e.validationErrors&&q($e.validationErrors))}catch{z("An unexpected error occurred")}finally{Y(!1)}},[I,h,g,J]),te=N.useCallback(async()=>{if(I){Y(!0);try{const de=await p(I._id);de.success?Ee():alert(de.error||"Failed to delete admin")}catch{alert("An unexpected error occurred")}finally{Y(!1)}}},[I,p,Ee]),K=N.useCallback(de=>{if(!de)return"-";const $e=de.replace(/\D/g,"");return $e.length===10?`+91 ${$e.slice(0,5)} ${$e.slice(5)}`:de},[]),ee=N.useCallback(de=>uue[de]||{label:de,color:"bg-gray-100 text-gray-700"},[]),ge=N.useCallback(de=>due[de]||{label:de,color:"bg-gray-100 text-gray-700"},[]),le=N.useCallback(de=>e?._id!==de._id,[e]),Ce=N.useMemo(()=>{if(l||o||t.length>0)return null;const de=a.search||a.role||a.status;return n.createElement("tr",null,n.createElement("td",{colSpan:"5",className:"px-4 sm:px-6 py-12 text-center"},n.createElement("div",{className:"flex flex-col items-center"},n.createElement(Ir,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-300 mb-4"}),n.createElement("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-1"},de?"No admins found":"No admins yet"),n.createElement("p",{className:"text-sm text-gray-500 mb-4 px-4"},de?"Try adjusting your search or filter criteria":"Get started by creating a new admin"),!de&&n.createElement("button",{onClick:me,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center gap-2 text-sm"},n.createElement(Mr,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Create Admin"))))},[l,o,t.length,a,me]),ie=de=>{const $e=ee(de.role),be=ge(de.status),Xe=e?._id===de._id;return n.createElement("div",{key:de._id,className:`p-4 border-b border-gray-100 ${Xe?"bg-blue-50/30":""}`},n.createElement("div",{className:"flex items-start justify-between gap-3"},n.createElement("div",{className:"flex items-center gap-3 min-w-0 flex-1"},n.createElement("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0"},n.createElement("span",{className:"text-purple-600 font-medium"},de.name?.charAt(0)?.toUpperCase()||"?")),n.createElement("div",{className:"min-w-0 flex-1"},n.createElement("p",{className:"font-medium text-gray-900 truncate"},de.name,Xe&&n.createElement("span",{className:"ml-2 text-xs text-blue-600"},"(You)")),n.createElement("p",{className:"text-sm text-gray-500 truncate"},"@",de.username))),n.createElement("div",{className:"flex items-center gap-1 flex-shrink-0"},n.createElement("button",{onClick:()=>ae(de),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit"},n.createElement(bn,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>se(de),disabled:!le(de),className:`p-2 rounded-lg transition-all ${le(de)?"text-red-600 hover:bg-red-50":"text-gray-300 cursor-not-allowed"}`,title:le(de)?"Delete":"Can't delete your own account"},n.createElement(xr,{className:"h-4 w-4"})))),n.createElement("div",{className:"mt-3 flex flex-wrap items-center gap-2"},n.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${$e.color}`},$e.label),n.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${be.color}`},be.label),n.createElement("span",{className:"text-xs text-gray-500"},K(de.phone)),de.role==="MANAGEMENT_STAFF"&&de.maxCashTicketsAllowed!=null&&n.createElement("span",{className:"text-xs text-gray-500"},"Max Tickets: ",de.maxCashTicketsAllowed)))};return n.createElement("div",{className:"px-2 sm:px-0"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4 sm:mb-6"},n.createElement("div",null,n.createElement("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900"},"Admin Management"),n.createElement("p",{className:"text-sm text-gray-500 mt-0.5 sm:mt-1"},"Manage admin users and their permissions")),n.createElement("button",{onClick:me,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center justify-center gap-2 text-sm sm:text-base w-full sm:w-auto"},n.createElement(Mr,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Create Admin")),n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-3 sm:p-4 mb-4 sm:mb-6"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-stretch sm:items-center gap-3 sm:gap-4"},n.createElement("div",{className:"relative flex-1 sm:flex-none sm:w-64 lg:w-80"},n.createElement(ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),n.createElement("input",{type:"text",placeholder:"Search by name, username, or phone...",value:V,onChange:de=>H(de.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none text-sm"})),n.createElement("div",{className:"flex items-center gap-2 sm:gap-4"},n.createElement("select",{value:a.role,onChange:de=>$(de.target.value),className:"flex-1 sm:flex-none px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white text-sm"},mue.map(de=>n.createElement("option",{key:de.value,value:de.value},de.label))),n.createElement("select",{value:a.status,onChange:de=>ce(de.target.value),className:"flex-1 sm:flex-none px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white text-sm"},fue.map(de=>n.createElement("option",{key:de.value,value:de.value},de.label))),n.createElement("button",{onClick:()=>d(r.page),disabled:l,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 flex-shrink-0",title:"Refresh"},n.createElement(os,{className:`h-4 w-4 sm:h-5 sm:w-5 ${l?"animate-spin":""}`}))))),o&&n.createElement("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 sm:p-4 mb-4 sm:mb-6 flex items-center gap-3"},n.createElement(Ir,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),n.createElement("p",{className:"text-sm text-red-700 flex-1"},o),n.createElement("button",{onClick:C,className:"text-red-500 hover:text-red-700 text-sm font-medium flex-shrink-0"},"Dismiss")),n.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden"},n.createElement("div",{className:"hidden md:block overflow-x-auto"},n.createElement("table",{className:"w-full"},n.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},n.createElement("tr",null,n.createElement("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600"},"Admin"),n.createElement("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600"},"Phone"),n.createElement("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600"},"Role"),n.createElement("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600"},"Status"),n.createElement("th",{className:"text-right px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600"},"Actions"))),n.createElement("tbody",null,l&&t.length===0&&n.createElement("tr",null,n.createElement("td",{colSpan:"5",className:"px-6 py-12 text-center"},n.createElement(xt,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-2"}),n.createElement("p",{className:"text-gray-500"},"Loading admins..."))),Ce,t.map(de=>{const $e=ee(de.role),be=ge(de.status),Xe=e?._id===de._id;return n.createElement("tr",{key:de._id,className:`border-b border-gray-100 hover:bg-gray-50 ${Xe?"bg-blue-50/30":""}`},n.createElement("td",{className:"px-4 lg:px-6 py-3 lg:py-4"},n.createElement("div",{className:"flex items-center gap-3"},n.createElement("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0"},n.createElement("span",{className:"text-purple-600 font-medium text-sm lg:text-base"},de.name?.charAt(0)?.toUpperCase()||"?")),n.createElement("div",{className:"min-w-0"},n.createElement("p",{className:"font-medium text-gray-900 text-sm lg:text-base truncate"},de.name,Xe&&n.createElement("span",{className:"ml-2 text-xs text-blue-600"},"(You)")),n.createElement("p",{className:"text-xs lg:text-sm text-gray-500 truncate"},"@",de.username)))),n.createElement("td",{className:"px-4 lg:px-6 py-3 lg:py-4 text-sm text-gray-600"},K(de.phone)),n.createElement("td",{className:"px-4 lg:px-6 py-3 lg:py-4"},n.createElement("div",{className:"flex flex-col gap-1"},n.createElement("span",{className:`px-2 lg:px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap ${$e.color} inline-flex items-center w-fit`},$e.label),de.role==="MANAGEMENT_STAFF"&&de.maxCashTicketsAllowed!=null&&n.createElement("span",{className:"text-xs text-gray-500"},"Max: ",de.maxCashTicketsAllowed," tickets"))),n.createElement("td",{className:"px-4 lg:px-6 py-3 lg:py-4"},n.createElement("span",{className:`px-2 lg:px-3 py-1 rounded-full text-xs font-medium ${be.color}`},be.label)),n.createElement("td",{className:"px-4 lg:px-6 py-3 lg:py-4"},n.createElement("div",{className:"flex items-center justify-end gap-1 lg:gap-2"},n.createElement("button",{onClick:()=>ae(de),className:"p-1.5 lg:p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit"},n.createElement(bn,{className:"h-4 w-4 lg:h-5 lg:w-5"})),n.createElement("button",{onClick:()=>se(de),disabled:!le(de),className:`p-1.5 lg:p-2 rounded-lg transition-all ${le(de)?"text-red-600 hover:bg-red-50":"text-gray-300 cursor-not-allowed"}`,title:le(de)?"Delete":"Can't delete your own account"},n.createElement(xr,{className:"h-4 w-4 lg:h-5 lg:w-5"})))))})))),n.createElement("div",{className:"md:hidden"},l&&t.length===0&&n.createElement("div",{className:"px-4 py-12 text-center"},n.createElement(xt,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-2"}),n.createElement("p",{className:"text-gray-500 text-sm"},"Loading admins...")),!l&&!o&&t.length===0&&n.createElement("div",{className:"px-4 py-12 text-center"},n.createElement(Ir,{className:"h-10 w-10 text-gray-300 mx-auto mb-4"}),n.createElement("h3",{className:"text-base font-medium text-gray-900 mb-1"},a.search||a.role||a.status?"No admins found":"No admins yet"),n.createElement("p",{className:"text-sm text-gray-500 mb-4"},a.search||a.role||a.status?"Try adjusting your search or filter criteria":"Get started by creating a new admin"),!(a.search||a.role||a.status)&&n.createElement("button",{onClick:me,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors inline-flex items-center gap-2 text-sm"},n.createElement(Mr,{className:"h-4 w-4"}),"Create Admin")),t.map(ie)),r.totalPages>0&&n.createElement(aa,{currentPage:r.page,totalPages:r.totalPages,totalItems:r.total,itemsPerPage:r.limit,onPageChange:E,itemLabel:"admins"})),n.createElement(cue,{isOpen:O,onClose:J,onSubmit:we,admin:I,isLoading:R,serverError:j,validationErrors:L}),n.createElement(Wa,{isOpen:P,onClose:Ee,onConfirm:te,title:"Delete Admin",message:`Are you sure you want to delete "${I?.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:R}))}function gue(){return n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-6"},n.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-4"},"Payment History"),n.createElement("p",{className:"text-gray-600"},"View payment history here."))}const Cl={BASE:"/web/offline-cash",ALLOWED_EVENTS:"/web/offline-cash/allowed-events",GET_BY_ID:e=>`/web/offline-cash/${e}`,DELETE:e=>`/web/offline-cash/${e}`,EVENT_ENROLLMENTS:e=>`/web/offline-cash/event/${e}/enrollments`,DIRECT_TICKET:"/web/offline-cash/direct-ticket",DIRECT_TICKET_BULK:"/web/offline-cash/direct-ticket-bulk"},Ao={getAllowedEvents:async(e={})=>{const t=new URLSearchParams;e.search&&t.append("search",e.search),e.isLive!==void 0&&t.append("isLive",e.isLive);const r=t.toString(),a=r?`${Cl.ALLOWED_EVENTS}?${r}`:Cl.ALLOWED_EVENTS;console.log("[OfflineCashService] Fetching allowed events with params:",e);const l=await ze(je.get(a));return l.success?console.log("[OfflineCashService] Fetched allowed events:",l.data.events?.length):console.error("[OfflineCashService] Failed to fetch allowed events:",l.message),l},create:async e=>{console.log("[OfflineCashService] Creating offline cash record for phone:",e.phone);const t=await ze(je.post(Cl.BASE,e));return t.success?console.log("[OfflineCashService] Record created successfully, link:",t.data.link):console.error("[OfflineCashService] Failed to create record:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.eventId&&t.append("eventId",e.eventId),e.redeemed!==void 0&&e.redeemed!==""&&t.append("redeemed",e.redeemed),e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit);const r=t.toString(),a=r?`${Cl.BASE}?${r}`:Cl.BASE;console.log("[OfflineCashService] Fetching offline cash records with params:",e);const l=await ze(je.get(a));return l.success?console.log("[OfflineCashService] Fetched records:",l.data.records?.length):console.error("[OfflineCashService] Failed to fetch records:",l.message),l},getById:async e=>{console.log("[OfflineCashService] Fetching record by ID:",e);const t=await ze(je.get(Cl.GET_BY_ID(e)));return t.success?console.log("[OfflineCashService] Fetched record:",t.data._id):console.error("[OfflineCashService] Failed to fetch record:",t.message),t},delete:async e=>{console.log("[OfflineCashService] Deleting record:",e);const t=await ze(je.delete(Cl.DELETE(e)));return t.success?console.log("[OfflineCashService] Record deleted successfully"):console.error("[OfflineCashService] Failed to delete record:",t.message),t},getEventEnrollments:async(e,t={})=>{const r=new URLSearchParams;t.status&&r.append("status",t.status),t.page&&r.append("page",t.page),t.limit&&r.append("limit",t.limit);const a=r.toString(),l=Cl.EVENT_ENROLLMENTS(e),o=a?`${l}?${a}`:l;console.log("[OfflineCashService] Fetching event enrollments:",e,t);const d=await ze(je.get(o));return d.success?console.log("[OfflineCashService] Fetched enrollments:",d.data.enrollments?.length):console.error("[OfflineCashService] Failed to fetch enrollments:",d.message),d},createDirectTicket:async e=>{console.log("[OfflineCashService] Creating direct ticket for phone:",e.phone);const t=await ze(je.post(Cl.DIRECT_TICKET,e));return t.success?console.log("[OfflineCashService] Direct ticket created:",t.data.enrollment?.id):console.error("[OfflineCashService] Failed to create direct ticket:",t.message),t},createDirectTicketBulk:async(e,t)=>{console.log("[OfflineCashService] Creating bulk direct tickets for event:",t.eventId);const r=new FormData;r.append("file",e),r.append("eventId",t.eventId),t.priceCharged!==void 0&&t.priceCharged!==""&&r.append("priceCharged",t.priceCharged),t.notes&&r.append("notes",t.notes);try{const a=await je.post(Cl.DIRECT_TICKET_BULK,r,{headers:{"Content-Type":"multipart/form-data"}});return console.log("[OfflineCashService] Bulk direct tickets result:",{total:a.data?.data?.summary?.total,successful:a.data?.data?.summary?.successful,rejected:a.data?.data?.summary?.rejected}),{success:!0,data:a.data.data,message:a.data.message,error:null,status:a.data.status||a.status}}catch(a){const l={success:!1,data:null,message:a.response?.data?.message||"Failed to process bulk direct tickets",error:a.response?.data?.error||a.message,status:a.response?.status||500};return console.error("[OfflineCashService] Bulk direct tickets failed:",l),l}}};function pue(e={}){const[t,r]=N.useState([]),[a,l]=N.useState({total:0,page:1,limit:20,totalPages:0}),[o,d]=N.useState({eventId:"",redeemed:"",...e}),[h,g]=N.useState(!1),[p,x]=N.useState(null),[E,C]=N.useState([]),[O,_]=N.useState(!1),[P,k]=N.useState(null),I=N.useRef(null),F=N.useCallback(async(ae="")=>{_(!0),k(null);try{const J={};ae&&(J.search=ae);const se=await Ao.getAllowedEvents(J);se.success?C(se.data.events||[]):(k(se.message),C([]))}catch{k("Failed to fetch allowed events"),C([])}finally{_(!1)}},[]),R=N.useCallback(ae=>{I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{F(ae)},300)},[F]),Y=N.useCallback(async(ae=a.page)=>{g(!0),x(null);try{const J={page:ae,limit:a.limit,...o.eventId&&{eventId:o.eventId},...o.redeemed!==""&&{redeemed:o.redeemed}},se=await Ao.getAll(J);se.success?(r(se.data.records||[]),l({total:se.data.pagination?.total||0,page:se.data.pagination?.page||1,limit:se.data.pagination?.limit||20,totalPages:se.data.pagination?.pages||0})):(x(se.message),r([]))}catch{x("Failed to fetch cash ticket records"),r([])}finally{g(!1)}},[o,a.limit]),j=N.useCallback(async ae=>{g(!0),x(null);try{const J=await Ao.create(ae);return J.success?(await Y(1),{success:!0,data:J.data}):J.status===409&&J.error?.existingLink?{success:!1,error:J.message,existingLink:J.error.existingLink,signature:J.error.signature}:{success:!1,error:J.message,validationErrors:J.error}}catch{return{success:!1,error:"Failed to create cash ticket"}}finally{g(!1)}},[Y]),z=N.useCallback(async ae=>{try{const J=await Ao.getById(ae);return J.success?{success:!0,data:J.data}:{success:!1,error:J.message}}catch{return{success:!1,error:"Failed to fetch record details"}}},[]),L=N.useCallback(async ae=>{g(!0),x(null);try{const J=await Ao.delete(ae);return J.success?(r(se=>se.filter(Ee=>Ee._id!==ae)),l(se=>({...se,total:se.total-1,totalPages:Math.ceil((se.total-1)/se.limit)})),{success:!0}):{success:!1,error:J.message}}catch{return{success:!1,error:"Failed to delete record"}}finally{g(!1)}},[]),q=N.useCallback(async(ae,J={})=>{try{const se=await Ao.getEventEnrollments(ae,J);return se.success?{success:!0,data:{enrollments:se.data.enrollments||[],pagination:se.data.pagination}}:{success:!1,error:se.message}}catch{return{success:!1,error:"Failed to fetch enrollments"}}},[]),V=N.useCallback(ae=>{d(J=>({...J,...ae}))},[]),W=N.useCallback(()=>{d({eventId:"",redeemed:"",...e})},[e]),H=N.useCallback(ae=>{Y(ae)},[Y]),$=N.useCallback(ae=>{l(J=>({...J,limit:ae}))},[]),ce=N.useCallback(()=>{x(null)},[]),me=N.useCallback(()=>{k(null)},[]);return N.useEffect(()=>{Y(1)},[o]),N.useEffect(()=>{F()},[F]),N.useEffect(()=>()=>{I.current&&clearTimeout(I.current)},[]),{records:t,pagination:a,filters:o,isLoading:h,error:p,allowedEvents:E,eventsLoading:O,eventsError:P,fetchRecords:Y,createRecord:j,getRecordById:z,deleteRecord:L,getEventEnrollments:q,fetchAllowedEvents:F,searchEvents:R,updateFilters:V,resetFilters:W,changePage:H,changeLimit:$,clearError:ce,clearEventsError:me}}const yue=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",xue=e=>e==null?"":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),EO={TECHNOLOGY:"bg-blue-100 text-gray-900",MUSIC:"bg-purple-100 text-purple-700",SPORTS:"bg-green-100 text-green-700",BUSINESS:"bg-yellow-100 text-yellow-700",EDUCATION:"bg-indigo-100 text-indigo-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",DEFAULT:"bg-gray-100 text-gray-700"};function KN({selectedId:e="",onChange:t,events:r=[],isLoading:a=!1,onSearch:l,disabled:o=!1,placeholder:d="Select an event...",error:h}){const[g,p]=N.useState(!1),[x,E]=N.useState(""),[C,O]=N.useState(-1),_=N.useRef(null),P=N.useRef(null),k=N.useRef(null),I=N.useMemo(()=>{if(!x.trim())return r;const V=x.toLowerCase();return r.filter(W=>W.name.toLowerCase().includes(V)||W.category?.toLowerCase().includes(V))},[r,x]),F=N.useMemo(()=>r.find(V=>V._id===e),[r,e]);N.useEffect(()=>{const V=W=>{_.current&&!_.current.contains(W.target)&&(p(!1),E(""),O(-1))};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]);const R=N.useCallback(V=>{const W=V.target.value;E(W),O(-1),l&&l(W)},[l]),Y=N.useCallback(V=>{o||(t(V._id,V),p(!1),E(""),O(-1))},[t,o]),j=N.useCallback(V=>{V.stopPropagation(),!o&&t("",null)},[t,o]),z=N.useCallback(()=>{o||(p(!0),setTimeout(()=>P.current?.focus(),0))},[o]),L=N.useCallback(V=>{if(!g){(V.key==="Enter"||V.key===" "||V.key==="ArrowDown")&&(V.preventDefault(),p(!0));return}switch(V.key){case"Escape":p(!1),E(""),O(-1);break;case"ArrowDown":V.preventDefault(),O(W=>W<I.length-1?W+1:W);break;case"ArrowUp":V.preventDefault(),O(W=>W>0?W-1:0);break;case"Enter":V.preventDefault(),C>=0&&I[C]&&Y(I[C]);break}},[g,I,C,Y]);N.useEffect(()=>{if(C>=0&&k.current){const V=k.current.children[C];V&&V.scrollIntoView({block:"nearest"})}},[C]);const q=V=>EO[V]||EO.DEFAULT;return n.createElement("div",{ref:_,className:"relative",onKeyDown:L},n.createElement("div",{onClick:z,className:`min-h-[42px] px-2 sm:px-3 py-2 border rounded-lg cursor-pointer transition-colors ${o?"bg-gray-100 cursor-not-allowed":g?"border-gray-800":h?"border-red-500":"border-gray-300 hover:border-gray-400"}`,tabIndex:o?-1:0,role:"combobox","aria-expanded":g,"aria-haspopup":"listbox"},n.createElement("div",{className:"flex items-center gap-2"},F?n.createElement("div",{className:"flex-1 flex items-center gap-2 min-w-0"},n.createElement("span",{className:"truncate text-sm font-medium text-gray-900"},F.name),F.isLive&&n.createElement("span",{className:"shrink-0 px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded"},"Live"),!o&&n.createElement("button",{type:"button",onClick:j,className:"shrink-0 p-0.5 hover:bg-gray-200 rounded"},n.createElement(Ia,{className:"h-4 w-4 text-gray-500"}))):n.createElement("span",{className:"flex-1 text-gray-400 text-sm"},d),n.createElement(Ml,{className:`h-4 w-4 sm:h-5 sm:w-5 text-gray-400 shrink-0 transition-transform ${g?"rotate-180":""}`}))),h&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500 flex items-center gap-1"},n.createElement(Ir,{className:"h-3 w-3 sm:h-4 sm:w-4"}),h),g&&!o&&n.createElement("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg"},n.createElement("div",{className:"p-2 border-b border-gray-200"},n.createElement("div",{className:"relative"},n.createElement(ya,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.createElement("input",{ref:P,type:"text",value:x,onChange:R,placeholder:"Search events...",className:"w-full pl-8 sm:pl-9 pr-4 py-2 border border-gray-300 rounded-md focus:border-gray-800 outline-none text-sm"}),a&&n.createElement(xt,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 animate-spin"}))),n.createElement("div",{className:"px-2 py-1.5 border-b border-gray-200 bg-gray-50"},n.createElement("span",{className:"text-xs text-gray-500"},I.length," event",I.length!==1?"s":""," available")),n.createElement("div",{ref:k,className:"max-h-60 sm:max-h-72 overflow-y-auto",role:"listbox"},I.length===0?n.createElement("div",{className:"px-4 py-6 sm:py-8 text-center text-gray-500 text-sm"},a?n.createElement("div",{className:"flex flex-col items-center gap-2"},n.createElement(xt,{className:"h-5 w-5 sm:h-6 sm:w-6 animate-spin"}),n.createElement("span",null,"Loading events...")):x?n.createElement("span",null,'No events found for "',x,'"'):n.createElement("span",null,"No events available")):I.map((V,W)=>{const H=V._id===e,$=W===C;return n.createElement("div",{key:V._id,onClick:()=>Y(V),className:`px-2 sm:px-3 py-2 sm:py-3 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors ${H?"bg-blue-50":$?"bg-gray-100":"hover:bg-gray-50"}`,role:"option","aria-selected":H},n.createElement("div",{className:"flex items-start gap-2 sm:gap-3"},n.createElement("div",{className:`shrink-0 w-4 h-4 sm:w-5 sm:h-5 rounded-full border-2 flex items-center justify-center mt-0.5 ${H?"bg-gray-800 border-gray-800":"border-gray-300"}`},H&&n.createElement(Ds,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-white"})),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap"},n.createElement("p",{className:"font-medium text-gray-900 text-sm truncate"},V.name),V.isLive&&n.createElement("span",{className:"shrink-0 px-1 sm:px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded"},"Live")),n.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 mt-1 flex-wrap"},V.category&&n.createElement("span",{className:`px-1 sm:px-1.5 py-0.5 text-xs rounded ${q(V.category)}`},V.category),V.startDate&&n.createElement("span",{className:"flex items-center gap-1 text-xs text-gray-500"},n.createElement(Qr,{className:"h-3 w-3"}),yue(V.startDate)),V.price!==void 0&&n.createElement("span",{className:"text-xs text-gray-600 font-medium"},xue(V.price))))))}))))}const bue=e=>e==null?"":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),vue=e=>{const t={};if(e.eventId||(t.eventId="Event is required"),!e.phone.trim())t.phone="Phone number is required";else{const r=e.phone.replace(/[^0-9]/g,"");(r.length<10||r.length>15)&&(t.phone="Phone must be 10-15 digits")}return!e.ticketCount||e.ticketCount<1?t.ticketCount="At least 1 ticket is required":e.ticketCount>100&&(t.ticketCount="Maximum 100 tickets allowed"),e.priceCharged&&e.priceCharged<0&&(t.priceCharged="Price cannot be negative"),{isValid:Object.keys(t).length===0,errors:t}},Nv=()=>({eventId:"",phone:"",ticketCount:1,priceCharged:"",notes:""});function Eue({isOpen:e,onClose:t,onSubmit:r,isLoading:a=!1,serverError:l=null,existingLinkData:o=null,allowedEvents:d=[],eventsLoading:h=!1,onSearchEvents:g}){const[p,x]=N.useState(Nv()),[E,C]=N.useState({}),[O,_]=N.useState(null),[P,k]=N.useState(null),[I,F]=N.useState(!1);N.useEffect(()=>{e&&(x(Nv()),C({}),_(null),k(null),F(!1))},[e]),N.useEffect(()=>{o&&k({link:o.existingLink,isExisting:!0})},[o]);const R=N.useCallback(W=>{const{name:H,value:$,type:ce}=W.target;let me=$;ce==="number"&&(me=$===""?"":Number($)),x(ae=>({...ae,[H]:me})),E[H]&&C(ae=>({...ae,[H]:null}))},[E]),Y=N.useCallback((W,H)=>{x($=>({...$,eventId:W})),_(H),H?.price&&x($=>({...$,eventId:W,priceCharged:$.priceCharged||H.price*($.ticketCount||1)})),E.eventId&&C($=>({...$,eventId:null}))},[E.eventId]),j=N.useCallback(W=>{const H=W.target.value===""?"":Number(W.target.value);x($=>{const ce={...$,ticketCount:H};return O?.price&&H&&(ce.priceCharged=O.price*H),ce}),E.ticketCount&&C($=>({...$,ticketCount:null}))},[O,E.ticketCount]),z=N.useCallback(async()=>{if(P?.link)try{await navigator.clipboard.writeText(P.link),F(!0),setTimeout(()=>F(!1),2e3)}catch(W){console.error("[CashTicketForm] Failed to copy:",W)}},[P]),L=async W=>{W.preventDefault();const H=vue(p);if(!H.isValid){C(H.errors);return}const $={eventId:p.eventId,phone:p.phone.replace(/[^0-9]/g,""),ticketCount:Number(p.ticketCount)};p.priceCharged!==""&&p.priceCharged!==null&&($.priceCharged=Number(p.priceCharged)),p.notes.trim()&&($.notes=p.notes.trim());const ce=await r($);ce?.success&&ce.data&&k({link:ce.data.link,isExisting:!1,ticketCount:ce.data.ticketCount,event:ce.data.event,phone:ce.data.phone})},q=N.useCallback(()=>{a||t()},[a,t]),V=N.useCallback(()=>{x(Nv()),_(null),k(null),F(!1),C({})},[]);return n.createElement(br,{isOpen:e,onClose:q,title:P?"Ticket Link Generated":"Generate Cash Ticket Link",size:"xl",closeOnOverlayClick:!a},P?n.createElement("div",{className:"space-y-4"},P.isExisting&&n.createElement("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-2"},n.createElement(Ir,{className:"h-5 w-5 text-yellow-600 shrink-0 mt-0.5"}),n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-yellow-800"},"Existing Link Found"),n.createElement("p",{className:"text-sm text-yellow-700 mt-0.5"},"An unredeemed ticket link already exists for this phone and event."))),!P.isExisting&&n.createElement("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg"},n.createElement("p",{className:"text-sm font-medium text-green-800"},"Success!"),n.createElement("p",{className:"text-sm text-green-700 mt-0.5"},"Cash ticket link has been generated successfully.")),P.event&&n.createElement("div",{className:"p-3 bg-gray-50 rounded-lg space-y-1"},n.createElement("p",{className:"text-sm"},n.createElement("span",{className:"text-gray-500"},"Event:")," ",n.createElement("span",{className:"font-medium text-gray-900"},P.event.name)),n.createElement("p",{className:"text-sm"},n.createElement("span",{className:"text-gray-500"},"Phone:")," ",n.createElement("span",{className:"font-medium text-gray-900"},P.phone)),n.createElement("p",{className:"text-sm"},n.createElement("span",{className:"text-gray-500"},"Tickets:")," ",n.createElement("span",{className:"font-medium text-gray-900"},P.ticketCount))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Redemption Link"),n.createElement("div",{className:"flex gap-2"},n.createElement("input",{type:"text",value:P.link,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-700 truncate"}),n.createElement("button",{type:"button",onClick:z,className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 shrink-0 ${I?"bg-green-600 text-white":"bg-gray-800 text-white hover:bg-gray-900"}`},I?n.createElement(n.Fragment,null,n.createElement(Ds,{className:"h-4 w-4"}),n.createElement("span",{className:"hidden sm:inline"},"Copied!")):n.createElement(n.Fragment,null,n.createElement(gg,{className:"h-4 w-4"}),n.createElement("span",{className:"hidden sm:inline"},"Copy"))),n.createElement("a",{href:P.link,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 shrink-0"},n.createElement(Op,{className:"h-4 w-4"}),n.createElement("span",{className:"hidden sm:inline"},"Open")))),n.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:q,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Close"),n.createElement("button",{type:"button",onClick:V,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Create Another"))):n.createElement("form",{onSubmit:L,className:"space-y-4"},l&&n.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},n.createElement(Ir,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),n.createElement("p",{className:"text-sm text-red-700"},l)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Event ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement(KN,{selectedId:p.eventId,onChange:Y,events:d,isLoading:h,onSearch:g,disabled:a,placeholder:"Search and select an event...",error:E.eventId})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Phone Number ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"tel",name:"phone",value:p.phone,onChange:R,disabled:a,placeholder:"Enter customer phone number",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${E.phone?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),E.phone&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},E.phone)),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Number of Tickets ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"number",name:"ticketCount",value:p.ticketCount,onChange:j,disabled:a,min:"1",max:"100",placeholder:"1",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${E.ticketCount?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),E.ticketCount&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},E.ticketCount)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Price Charged (INR) ",n.createElement("span",{className:"text-gray-400"},"(Optional)")),n.createElement("input",{type:"number",name:"priceCharged",value:p.priceCharged,onChange:R,disabled:a,min:"0",placeholder:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${E.priceCharged?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),E.priceCharged&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},E.priceCharged),O?.price&&n.createElement("p",{className:"mt-1 text-xs text-gray-500"},"Base price: ",bue(O.price),"/ticket"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Notes ",n.createElement("span",{className:"text-gray-400"},"(Optional)")),n.createElement("textarea",{name:"notes",value:p.notes,onChange:R,disabled:a,rows:2,placeholder:"Add any notes about this transaction",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-colors resize-none ${a?"bg-gray-100":""}`})),n.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:q,disabled:a,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),n.createElement("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},a&&n.createElement(xt,{className:"h-4 w-4 animate-spin"}),"Generate Link"))))}const Fh=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",wue=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);function Uh({icon:e,label:t,value:r,className:a=""}){return n.createElement("div",{className:`flex items-start gap-3 ${a}`},n.createElement("div",{className:"shrink-0 w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center"},n.createElement(e,{className:"h-4 w-4 text-gray-600"})),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("p",{className:"text-xs text-gray-500"},t),n.createElement("p",{className:"text-sm font-medium text-gray-900 break-words"},r||"-")))}function Nue({isOpen:e,onClose:t,record:r,isLoading:a=!1}){const[l,o]=N.useState(!1);N.useEffect(()=>{e||o(!1)},[e]);const d=N.useCallback(async()=>{if(r?.link)try{await navigator.clipboard.writeText(r.link),o(!0),setTimeout(()=>o(!1),2e3)}catch(h){console.error("[CashTicketDetailsModal] Failed to copy:",h)}},[r?.link]);return n.createElement(br,{isOpen:e,onClose:t,title:"Cash Ticket Details",size:"lg"},a?n.createElement("div",{className:"flex flex-col items-center justify-center py-12"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading details...")):r?n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ${r.redeemed?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`},r.redeemed?n.createElement(n.Fragment,null,n.createElement(_i,{className:"h-4 w-4"}),"Redeemed"):n.createElement(n.Fragment,null,n.createElement(Pa,{className:"h-4 w-4"}),"Pending Redemption")),r.redeemedAt&&n.createElement("span",{className:"text-xs text-gray-500"},Fh(r.redeemedAt))),n.createElement("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100"},n.createElement("div",{className:"flex items-start gap-3"},n.createElement("div",{className:"shrink-0 w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},n.createElement(Qr,{className:"h-5 w-5 text-gray-800"})),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("p",{className:"text-xs text-gray-800 font-medium"},"Event"),n.createElement("p",{className:"text-base font-semibold text-gray-900 truncate"},r.eventId?.name||"Unknown Event"),r.eventId?.startDate&&n.createElement("p",{className:"text-xs text-gray-500 mt-1"},Fh(r.eventId.startDate),r.eventId?.endDate&&` - ${Fh(r.eventId.endDate)}`)))),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},n.createElement(Uh,{icon:Yu,label:"Phone Number",value:r.generatedFor}),n.createElement(Uh,{icon:Mu,label:"Ticket Count",value:`${r.ticketCount} ticket${r.ticketCount!==1?"s":""}`}),n.createElement(Uh,{icon:WU,label:"Price Charged",value:wue(r.priceCharged)}),n.createElement(Uh,{icon:Pa,label:"Created At",value:Fh(r.createdAt)})),r.generatedBy&&n.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},n.createElement("p",{className:"text-xs text-gray-500 mb-1"},"Generated By"),n.createElement("div",{className:"flex items-center gap-2"},n.createElement("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center"},n.createElement(xi,{className:"h-4 w-4 text-gray-600"})),n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-900"},r.generatedBy.name||"Unknown"),n.createElement("p",{className:"text-xs text-gray-500"},r.generatedBy.email)))),r.notes&&n.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},n.createElement("div",{className:"flex items-center gap-2 mb-2"},n.createElement(pg,{className:"h-4 w-4 text-gray-500"}),n.createElement("p",{className:"text-xs text-gray-500 font-medium"},"Notes")),n.createElement("p",{className:"text-sm text-gray-700"},r.notes)),!r.redeemed&&r.link&&n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Redemption Link"),n.createElement("div",{className:"flex gap-2"},n.createElement("input",{type:"text",value:r.link,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-700 truncate"}),n.createElement("button",{type:"button",onClick:d,className:`px-3 py-2 rounded-lg transition-colors flex items-center gap-1.5 shrink-0 ${l?"bg-green-600 text-white":"bg-gray-800 text-white hover:bg-gray-900"}`},l?n.createElement(n.Fragment,null,n.createElement(Ds,{className:"h-4 w-4"}),n.createElement("span",{className:"hidden sm:inline text-sm"},"Copied!")):n.createElement(n.Fragment,null,n.createElement(gg,{className:"h-4 w-4"}),n.createElement("span",{className:"hidden sm:inline text-sm"},"Copy"))),n.createElement("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-1.5 shrink-0"},n.createElement(Op,{className:"h-4 w-4"}),n.createElement("span",{className:"hidden sm:inline text-sm"},"Open")))),r.signature&&n.createElement("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200"},n.createElement("span",{className:"text-xs text-gray-400"},"Signature"),n.createElement("code",{className:"text-xs font-mono text-gray-500 bg-gray-100 px-2 py-1 rounded"},r.signature)),n.createElement("div",{className:"pt-4 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:t,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium"},"Close"))):n.createElement("div",{className:"flex flex-col items-center justify-center py-12"},n.createElement(ns,{className:"h-12 w-12 text-gray-300"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No record data available")))}const Sue=e=>{const t={};if(e.eventId||(t.eventId="Event is required"),!e.phone.trim())t.phone="Phone number is required";else{const r=e.phone.replace(/[^0-9]/g,"");(r.length<10||r.length>15)&&(t.phone="Phone must be 10-15 digits")}return e.name.trim()?(e.name.trim().length<2||e.name.trim().length>100)&&(t.name="Name must be 2-100 characters"):t.name="Name is required",e.priceCharged!==""&&e.priceCharged<0&&(t.priceCharged="Price cannot be negative"),{isValid:Object.keys(t).length===0,errors:t}},Sv=()=>({eventId:"",phone:"",name:"",priceCharged:"",notes:""});function Cue({isOpen:e,onClose:t,onSubmit:r,isLoading:a=!1,serverError:l=null,allowedEvents:o=[],eventsLoading:d=!1,onSearchEvents:h}){const[g,p]=N.useState(Sv()),[x,E]=N.useState({}),[C,O]=N.useState(null),[_,P]=N.useState(null);N.useEffect(()=>{e&&(p(Sv()),E({}),O(null),P(null))},[e]);const k=N.useCallback(j=>{const{name:z,value:L,type:q}=j.target;let V=L;q==="number"&&(V=L===""?"":Number(L)),p(W=>({...W,[z]:V})),x[z]&&E(W=>({...W,[z]:null}))},[x]),I=N.useCallback((j,z)=>{p(L=>({...L,eventId:j})),O(z),z?.price&&p(L=>({...L,eventId:j,priceCharged:L.priceCharged||z.price})),x.eventId&&E(L=>({...L,eventId:null}))},[x.eventId]),F=async j=>{j.preventDefault();const z=Sue(g);if(!z.isValid){E(z.errors);return}const L={eventId:g.eventId,phone:g.phone.replace(/[^0-9]/g,""),name:g.name.trim()};g.priceCharged!==""&&g.priceCharged!==null&&(L.priceCharged=Number(g.priceCharged)),g.notes.trim()&&(L.notes=g.notes.trim());const q=await r(L);q?.success&&q.data&&P({enrollment:q.data.enrollment,event:q.data.event})},R=N.useCallback(()=>{a||t()},[a,t]),Y=N.useCallback(()=>{p(Sv()),O(null),P(null),E({})},[]);return n.createElement(br,{isOpen:e,onClose:R,title:_?"Direct Ticket Created":"Create Direct Ticket",size:"xl",closeOnOverlayClick:!a},_?n.createElement("div",{className:"space-y-4"},n.createElement("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg flex items-start gap-2"},n.createElement(Ds,{className:"h-5 w-5 text-green-600 shrink-0 mt-0.5"}),n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-green-800"},"Success"),n.createElement("p",{className:"text-sm text-green-700 mt-0.5"},"Direct ticket created and sent via WhatsApp."))),n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement(Mu,{className:"h-5 w-5 text-gray-500"}),n.createElement("span",{className:"font-medium text-gray-900"},_.event?.name)),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement(xi,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-gray-600"},_.enrollment?.name)),n.createElement("div",{className:"flex items-center gap-2"},n.createElement(Yu,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-gray-600"},_.enrollment?.phone)))),n.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:R,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Close"),n.createElement("button",{type:"button",onClick:Y,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Create Another"))):n.createElement("form",{onSubmit:F,className:"space-y-4"},l&&n.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},n.createElement(Ir,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),n.createElement("p",{className:"text-sm text-red-700"},l)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Event ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement(KN,{selectedId:g.eventId,onChange:I,events:o,isLoading:d,onSearch:h,disabled:a,placeholder:"Search and select an event...",error:x.eventId})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Attendee Name ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",name:"name",value:g.name,onChange:k,disabled:a,placeholder:"Enter attendee name",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${x.name?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),x.name&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},x.name)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Phone Number ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"tel",name:"phone",value:g.phone,onChange:k,disabled:a,placeholder:"Enter phone number",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${x.phone?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),x.phone&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},x.phone)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Price Charged (INR) ",n.createElement("span",{className:"text-gray-400"},"(Optional)")),n.createElement("input",{type:"number",name:"priceCharged",value:g.priceCharged,onChange:k,disabled:a,min:"0",placeholder:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${x.priceCharged?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),x.priceCharged&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},x.priceCharged),C?.price&&n.createElement("p",{className:"mt-1 text-xs text-gray-500"},"Event base price: ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(C.price))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Notes ",n.createElement("span",{className:"text-gray-400"},"(Optional)")),n.createElement("textarea",{name:"notes",value:g.notes,onChange:k,disabled:a,rows:2,maxLength:500,placeholder:"Add any notes",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-colors resize-none ${a?"bg-gray-100":""}`})),n.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:R,disabled:a,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),n.createElement("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},a&&n.createElement(xt,{className:"h-4 w-4 animate-spin"}),"Create Ticket"))))}const Aue=e=>{if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+r[a]},Tue=e=>{const t={};return e.eventId||(t.eventId="Event is required"),e.file||(t.file="Excel file is required"),e.priceCharged!==""&&e.priceCharged<0&&(t.priceCharged="Price cannot be negative"),{isValid:Object.keys(t).length===0,errors:t}},Cv=()=>({eventId:"",file:null,priceCharged:"",notes:""}),Oue=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"],_ue=".xlsx,.xls,.csv";function Due({isOpen:e,onClose:t,onSubmit:r,isLoading:a=!1,serverError:l=null,allowedEvents:o=[],eventsLoading:d=!1,onSearchEvents:h}){const[g,p]=N.useState(Cv()),[x,E]=N.useState({}),[C,O]=N.useState(null),[_,P]=N.useState(null),[k,I]=N.useState(!1),F=N.useRef(null);N.useEffect(()=>{e&&(p(Cv()),E({}),O(null),P(null),I(!1))},[e]);const R=N.useCallback(J=>{const{name:se,value:Ee,type:we}=J.target;let te=Ee;we==="number"&&(te=Ee===""?"":Number(Ee)),p(K=>({...K,[se]:te})),x[se]&&E(K=>({...K,[se]:null}))},[x]),Y=N.useCallback((J,se)=>{p(Ee=>({...Ee,eventId:J})),O(se),se?.price&&p(Ee=>({...Ee,eventId:J,priceCharged:Ee.priceCharged||se.price})),x.eventId&&E(Ee=>({...Ee,eventId:null}))},[x.eventId]),j=J=>Oue.includes(J.type)||J.name.endsWith(".xlsx")||J.name.endsWith(".xls")||J.name.endsWith(".csv"),z=N.useCallback(J=>{if(J){if(!j(J)){E(se=>({...se,file:"Invalid file type. Please upload an Excel file (.xlsx, .xls) or CSV."}));return}if(J.size>10*1024*1024){E(se=>({...se,file:"File size exceeds 10MB limit."}));return}p(se=>({...se,file:J})),E(se=>({...se,file:null}))}},[]),L=J=>{const se=J.target.files?.[0];z(se),J.target.value=""},q=J=>{J.preventDefault(),a||I(!0)},V=J=>{J.preventDefault(),I(!1)},W=J=>{if(J.preventDefault(),I(!1),a)return;const se=J.dataTransfer.files?.[0];z(se)},H=()=>{p(J=>({...J,file:null}))},$=async J=>{J.preventDefault();const se=Tue(g);if(!se.isValid){E(se.errors);return}const Ee={eventId:g.eventId};g.priceCharged!==""&&g.priceCharged!==null&&(Ee.priceCharged=Number(g.priceCharged)),g.notes.trim()&&(Ee.notes=g.notes.trim());const we=await r(g.file,Ee);we?.success&&we.data&&P(we.data)},ce=()=>{if(_?.rejectionFile?.base64)try{const J=atob(_.rejectionFile.base64),se=new Array(J.length);for(let ee=0;ee<J.length;ee++)se[ee]=J.charCodeAt(ee);const Ee=new Uint8Array(se),we=new Blob([Ee],{type:_.rejectionFile.mimeType}),te=window.URL.createObjectURL(we),K=document.createElement("a");K.href=te,K.download=_.rejectionFile.filename,document.body.appendChild(K),K.click(),document.body.removeChild(K),window.URL.revokeObjectURL(te)}catch(J){console.error("[DirectTicketBulk] Failed to download rejections:",J)}},me=N.useCallback(()=>{a||t()},[a,t]),ae=N.useCallback(()=>{p(Cv()),O(null),P(null),E({})},[]);return n.createElement(br,{isOpen:e,onClose:me,title:_?"Bulk Upload Complete":"Bulk Direct Ticket Upload",size:"xl",closeOnOverlayClick:!a},_?n.createElement("div",{className:"space-y-4"},n.createElement("div",{className:"grid grid-cols-3 gap-3"},n.createElement("div",{className:"p-3 bg-gray-50 rounded-lg text-center"},n.createElement("div",{className:"text-2xl font-bold text-gray-900"},_.summary?.total||0),n.createElement("div",{className:"text-xs text-gray-500"},"Total")),n.createElement("div",{className:"p-3 bg-green-50 rounded-lg text-center"},n.createElement("div",{className:"text-2xl font-bold text-green-700"},_.summary?.successful||0),n.createElement("div",{className:"text-xs text-green-600"},"Successful")),n.createElement("div",{className:"p-3 bg-red-50 rounded-lg text-center"},n.createElement("div",{className:"text-2xl font-bold text-red-700"},_.summary?.rejected||0),n.createElement("div",{className:"text-xs text-red-600"},"Rejected"))),_.event&&n.createElement("div",{className:"p-3 bg-gray-50 rounded-lg flex items-center gap-2"},n.createElement(Uv,{className:"h-5 w-5 text-gray-500"}),n.createElement("span",{className:"font-medium text-gray-900"},_.event.name)),_.successful?.length>0&&n.createElement("div",{className:"space-y-2"},n.createElement("div",{className:"flex items-center gap-2 text-sm font-medium text-green-700"},n.createElement(Hm,{className:"h-4 w-4"}),"Successful (",_.successful.length,")"),n.createElement("div",{className:"max-h-32 overflow-y-auto border border-gray-200 rounded-lg"},n.createElement("table",{className:"w-full text-sm"},n.createElement("thead",{className:"bg-gray-50 sticky top-0"},n.createElement("tr",null,n.createElement("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Row"),n.createElement("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Phone"),n.createElement("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Name"))),n.createElement("tbody",{className:"divide-y divide-gray-100"},_.successful.slice(0,50).map((J,se)=>n.createElement("tr",{key:se,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-3 py-1.5 text-gray-600"},J.rowNumber),n.createElement("td",{className:"px-3 py-1.5 text-gray-900"},J.phone),n.createElement("td",{className:"px-3 py-1.5 text-gray-900"},J.name))),_.successful.length>50&&n.createElement("tr",null,n.createElement("td",{colSpan:3,className:"px-3 py-2 text-center text-gray-500 text-xs"},"... and ",_.successful.length-50," more")))))),_.rejected?.length>0&&n.createElement("div",{className:"space-y-2"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center gap-2 text-sm font-medium text-red-700"},n.createElement(ns,{className:"h-4 w-4"}),"Rejected (",_.rejected.length,")"),_.rejectionFile&&n.createElement("button",{type:"button",onClick:ce,className:"flex items-center gap-1 px-2 py-1 text-xs text-gray-600 bg-gray-100 hover:bg-gray-200 rounded transition-colors"},n.createElement(tj,{className:"h-3 w-3"}),"Download")),n.createElement("div",{className:"max-h-32 overflow-y-auto border border-gray-200 rounded-lg"},n.createElement("table",{className:"w-full text-sm"},n.createElement("thead",{className:"bg-gray-50 sticky top-0"},n.createElement("tr",null,n.createElement("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Row"),n.createElement("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Phone"),n.createElement("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Reason"))),n.createElement("tbody",{className:"divide-y divide-gray-100"},_.rejected.slice(0,20).map((J,se)=>n.createElement("tr",{key:se,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-3 py-1.5 text-gray-600"},J.rowNumber),n.createElement("td",{className:"px-3 py-1.5 text-gray-900"},J.phone||"-"),n.createElement("td",{className:"px-3 py-1.5 text-red-600 text-xs"},J.reason))),_.rejected.length>20&&n.createElement("tr",null,n.createElement("td",{colSpan:3,className:"px-3 py-2 text-center text-gray-500 text-xs"},"... and ",_.rejected.length-20," more (download for full list)")))))),n.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:me,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Close"),n.createElement("button",{type:"button",onClick:ae,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Upload Another"))):n.createElement("form",{onSubmit:$,className:"space-y-4"},l&&n.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},n.createElement(Ir,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),n.createElement("p",{className:"text-sm text-red-700"},l)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Event ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement(KN,{selectedId:g.eventId,onChange:Y,events:o,isLoading:d,onSearch:h,disabled:a,placeholder:"Search and select an event...",error:x.eventId})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Excel File ",n.createElement("span",{className:"text-red-500"},"*")),g.file?n.createElement("div",{className:"flex items-center gap-3 p-3 bg-gray-50 border border-gray-200 rounded-lg"},n.createElement(Uv,{className:"h-8 w-8 text-green-600 shrink-0"}),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},g.file.name),n.createElement("p",{className:"text-xs text-gray-500"},Aue(g.file.size))),n.createElement("button",{type:"button",onClick:H,disabled:a,className:"p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors disabled:opacity-50"},n.createElement(Ia,{className:"h-4 w-4"}))):n.createElement("div",{onDragOver:q,onDragLeave:V,onDrop:W,onClick:()=>!a&&F.current?.click(),className:`
                  relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer
                  transition-all duration-200
                  ${k?"border-gray-800 bg-gray-50":"border-gray-300 hover:border-gray-400"}
                  ${a?"opacity-50 cursor-not-allowed":""}
                  ${x.file?"border-red-300 bg-red-50/50":""}
                `},n.createElement("input",{ref:F,type:"file",accept:_ue,onChange:L,disabled:a,className:"hidden"}),n.createElement("div",{className:"space-y-2"},n.createElement("div",{className:"mx-auto w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center"},n.createElement(gD,{className:"h-5 w-5 text-gray-500"})),n.createElement("div",null,n.createElement("p",{className:"text-sm text-gray-600"},"Drop Excel file here or click to upload"),n.createElement("p",{className:"text-xs text-gray-400 mt-1"},"XLSX, XLS, or CSV (max 10MB)")))),x.file&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},x.file),n.createElement("div",{className:"mt-2 text-xs text-gray-500 space-y-1"},n.createElement("p",null,"Excel should have columns: ",n.createElement("span",{className:"font-medium"},"phone")," and ",n.createElement("span",{className:"font-medium"},"name")),n.createElement("p",{className:"text-gray-400"},"Column order doesn't matter. Accepts: Phone, phone number, Name, full name, etc."))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Price Charged Per Ticket (INR) ",n.createElement("span",{className:"text-gray-400"},"(Optional)")),n.createElement("input",{type:"number",name:"priceCharged",value:g.priceCharged,onChange:R,disabled:a,min:"0",placeholder:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${x.priceCharged?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),x.priceCharged&&n.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},x.priceCharged),C?.price&&n.createElement("p",{className:"mt-1 text-xs text-gray-500"},"Event base price: ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(C.price))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Notes ",n.createElement("span",{className:"text-gray-400"},"(Optional, applies to all)")),n.createElement("textarea",{name:"notes",value:g.notes,onChange:R,disabled:a,rows:2,maxLength:500,placeholder:"Add notes for all tickets",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-colors resize-none ${a?"bg-gray-100":""}`})),n.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:me,disabled:a,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),n.createElement("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},a&&n.createElement(xt,{className:"h-4 w-4 animate-spin"}),"Upload & Process"))))}const wO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",NO=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),jh={redeemed:"bg-green-100 text-green-700",pending:"bg-yellow-100 text-yellow-700"};function kue(){const{admin:e}=Us(),{records:t,pagination:r,filters:a,isLoading:l,error:o,allowedEvents:d,eventsLoading:h,fetchRecords:g,createRecord:p,getRecordById:x,deleteRecord:E,searchEvents:C,updateFilters:O,changePage:_,clearError:P}=pue(),k=N.useMemo(()=>e?.role==="ADMIN"||e?.role==="SUPER_ADMIN",[e?.role]),I=N.useMemo(()=>e?.role==="MANAGEMENT_STAFF"?t.filter(Je=>Je.generatedBy?._id===e._id):t,[t,e?.role,e?._id]),[F,R]=N.useState(!1),[Y,j]=N.useState(!1),[z,L]=N.useState(!1),[q,V]=N.useState(!1),[W,H]=N.useState(!1),[$,ce]=N.useState(null),[me,ae]=N.useState(!1),[J,se]=N.useState(!1),[Ee,we]=N.useState(null),[te,K]=N.useState(null),[ee,ge]=N.useState(!1),[le,Ce]=N.useState(null),[ie,de]=N.useState(!1),[$e,be]=N.useState(null),[Xe,at]=N.useState(null),[Le,ve]=N.useState(!1),[Ue,oe]=N.useState(a.eventId||""),[qe,Ne]=N.useState(a.redeemed||""),tt=N.useCallback(()=>{we(null),K(null),R(!0)},[]),it=N.useCallback(()=>{R(!1),we(null),K(null)},[]),pt=N.useCallback(()=>{Ce(null),V(!0)},[]),We=N.useCallback(()=>{V(!1),Ce(null)},[]),lt=N.useCallback(async Je=>{ge(!0),Ce(null);try{const Lt=await Ao.createDirectTicket(Je);return Lt.success?(console.log("[CashTickets] Direct ticket created:",Lt.data?.enrollment?.id),g(1),{success:!0,data:Lt.data}):(console.error("[CashTickets] Direct ticket failed:",Lt.message),Ce(Lt.message||"Failed to create direct ticket"),{success:!1})}catch(Lt){return console.error("[CashTickets] Direct ticket error:",Lt),Ce("An unexpected error occurred"),{success:!1}}finally{ge(!1)}},[g]),Fe=N.useCallback(()=>{be(null),H(!0)},[]),mt=N.useCallback(()=>{H(!1),be(null)},[]),$t=N.useCallback(async(Je,Lt)=>{de(!0),be(null);try{const Lr=await Ao.createDirectTicketBulk(Je,Lt);return Lr.success?(console.log("[CashTickets] Bulk direct tickets processed:",Lr.data?.summary),g(1),{success:!0,data:Lr.data}):(console.error("[CashTickets] Bulk direct tickets failed:",Lr.message),be(Lr.message||"Failed to process bulk upload"),{success:!1})}catch(Lr){return console.error("[CashTickets] Bulk direct tickets error:",Lr),be("An unexpected error occurred"),{success:!1}}finally{de(!1)}},[g]),er=N.useCallback(async Je=>{se(!0),we(null),K(null);try{const Lt=await p(Je);return Lt.success?Lt:Lt.existingLink?(K({existingLink:Lt.existingLink,signature:Lt.signature}),{success:!1}):(we(Lt.error||"Failed to create cash ticket"),{success:!1})}catch{return we("An unexpected error occurred"),{success:!1}}finally{se(!1)}},[p]),tr=N.useCallback(async Je=>{ce(Je),j(!0),ae(!0);try{const Lt=await x(Je._id);Lt.success&&ce(Lt.data)}catch(Lt){console.error("[CashTickets] Failed to fetch details:",Lt)}finally{ae(!1)}},[x]),ut=N.useCallback(()=>{j(!1),ce(null)},[]),At=N.useCallback(Je=>{ce(Je),L(!0)},[]),vr=N.useCallback(()=>{L(!1),ce(null)},[]),ur=N.useCallback(async()=>{if($){se(!0);try{const Je=await E($._id);Je.success?vr():alert(Je.error||"Failed to delete record")}catch{alert("An unexpected error occurred")}finally{se(!1)}}},[$,E,vr]),ea=N.useCallback(async(Je,Lt)=>{try{await navigator.clipboard.writeText(Je),at(Lt),setTimeout(()=>at(null),2e3)}catch(Lr){console.error("[CashTickets] Failed to copy:",Lr)}},[]),kt=N.useCallback(()=>{O({eventId:Ue,redeemed:qe}),ve(!1)},[Ue,qe,O]),xe=N.useCallback(()=>{oe(""),Ne(""),O({eventId:"",redeemed:""}),ve(!1)},[O]),Qe=N.useCallback(()=>{g(r.page)},[g,r.page]),st=N.useMemo(()=>a.eventId||a.redeemed!=="",[a]),Tt=N.useMemo(()=>I.reduce((Je,Lt)=>Je+(Lt.ticketCount||0),0),[I]),dr=N.useMemo(()=>e?.role==="MANAGEMENT_STAFF"&&e?.maxCashTicketsAllowed!=null,[e?.role,e?.maxCashTicketsAllowed]),$a=N.useMemo(()=>dr?Math.min(100,Tt/e.maxCashTicketsAllowed*100):0,[dr,Tt,e?.maxCashTicketsAllowed]),ta=$a>=80,bt=Tt>=e?.maxCashTicketsAllowed;return n.createElement("div",{className:"space-y-4 sm:space-y-6"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},n.createElement("div",null,n.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900"},"Cash Tickets"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Generate and manage offline cash payment ticket links")),n.createElement("div",{className:"flex flex-wrap items-center gap-2"},n.createElement("button",{onClick:tt,disabled:bt,className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-colors font-medium ${bt?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-800 text-white hover:bg-gray-900"}`,title:bt?"Ticket limit reached":"Generate new ticket link"},n.createElement(Mr,{className:"h-5 w-5"}),n.createElement("span",{className:"hidden sm:inline"},"Generate Link"),n.createElement("span",{className:"sm:hidden"},"Link")),n.createElement("button",{onClick:pt,disabled:bt,className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-colors font-medium ${bt?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-700 text-white hover:bg-gray-800"}`,title:bt?"Ticket limit reached":"Create direct ticket"},n.createElement(pD,{className:"h-5 w-5"}),n.createElement("span",{className:"hidden sm:inline"},"Direct Ticket"),n.createElement("span",{className:"sm:hidden"},"Direct")),n.createElement("button",{onClick:Fe,disabled:bt,className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-colors font-medium ${bt?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700"}`,title:bt?"Ticket limit reached":"Bulk upload direct tickets"},n.createElement(Uv,{className:"h-5 w-5"}),n.createElement("span",{className:"hidden sm:inline"},"Direct Ticket Bulk"),n.createElement("span",{className:"sm:hidden"},"Bulk")))),dr&&n.createElement("div",{className:`p-4 rounded-xl border ${bt?"bg-red-50 border-red-200":ta?"bg-yellow-50 border-yellow-200":"bg-blue-50 border-blue-200"}`},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},n.createElement("div",{className:"flex-1"},n.createElement("div",{className:"flex items-center gap-2 mb-2"},n.createElement(Mu,{className:`h-5 w-5 ${bt?"text-red-600":ta?"text-yellow-600":"text-gray-800"}`}),n.createElement("h3",{className:`font-medium ${bt?"text-red-800":ta?"text-yellow-800":"text-blue-800"}`},"Ticket Generation Limit")),n.createElement("p",{className:`text-sm ${bt?"text-red-700":ta?"text-yellow-700":"text-blue-700"}`},bt?n.createElement(n.Fragment,null,"You have reached your maximum ticket limit. Contact your administrator to increase your limit."):n.createElement(n.Fragment,null,"You have created"," ",n.createElement("span",{className:"font-semibold"},Tt," of ",e.maxCashTicketsAllowed)," ","tickets (",e.maxCashTicketsAllowed-Tt," remaining)"))),n.createElement("div",{className:"flex items-center gap-3"},n.createElement("div",{className:"text-right"},n.createElement("div",{className:`text-2xl font-bold ${bt?"text-red-700":ta?"text-yellow-700":"text-blue-700"}`},Tt),n.createElement("div",{className:`text-xs ${bt?"text-red-600":ta?"text-yellow-600":"text-gray-800"}`},"of ",e.maxCashTicketsAllowed)))),n.createElement("div",{className:"mt-3"},n.createElement("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden"},n.createElement("div",{className:`h-full transition-all duration-300 ${bt?"bg-red-600":ta?"bg-yellow-500":"bg-blue-600"}`,style:{width:`${$a}%`}})))),o&&n.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},n.createElement(Ir,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),n.createElement("div",{className:"flex-1"},n.createElement("p",{className:"text-sm font-medium text-red-800"},"Error loading records"),n.createElement("p",{className:"text-sm text-red-700 mt-0.5"},o)),n.createElement("button",{onClick:P,className:"shrink-0 text-red-600 hover:text-red-800"},"")),n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},n.createElement("button",{onClick:()=>ve(!Le),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${st?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},n.createElement(Il,{className:"h-4 w-4"}),n.createElement("span",null,"Filters"),st&&n.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(a.eventId?1:0)+(a.redeemed!==""?1:0)),n.createElement(Ml,{className:`h-4 w-4 transition-transform ${Le?"rotate-180":""}`})),n.createElement("button",{onClick:Qe,disabled:l,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},n.createElement(os,{className:`h-4 w-4 ${l?"animate-spin":""}`}),n.createElement("span",{className:"hidden sm:inline"},"Refresh")),n.createElement("div",{className:"ml-auto text-sm text-gray-500"},r.total," record",r.total!==1?"s":""," total")),Le&&n.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Event"),n.createElement("select",{value:Ue,onChange:Je=>oe(Je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"All Events"),d.map(Je=>n.createElement("option",{key:Je._id,value:Je._id},Je.name)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),n.createElement("select",{value:qe,onChange:Je=>Ne(Je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"All Status"),n.createElement("option",{value:"false"},"Pending"),n.createElement("option",{value:"true"},"Redeemed"))),n.createElement("div",{className:"flex items-end gap-2 sm:col-span-2 lg:col-span-1"},n.createElement("button",{onClick:kt,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),n.createElement("button",{onClick:xe,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),n.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"w-full"},n.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},n.createElement("tr",null,n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Event"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Phone"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Details"),k&&n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Created By"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),n.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),n.createElement("tbody",null,l&&I.length===0?n.createElement("tr",null,n.createElement("td",{colSpan:k?6:5,className:"px-6 py-12 text-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading records..."))):I.length===0?n.createElement("tr",null,n.createElement("td",{colSpan:k?6:5,className:"px-6 py-12 text-center"},n.createElement(Mu,{className:"h-12 w-12 text-gray-300 mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No records found"),n.createElement("button",{onClick:tt,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Generate your first ticket link"))):I.map(Je=>n.createElement("tr",{key:Je._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center shrink-0"},n.createElement(Qr,{className:"h-4 w-4 text-gray-800"})),n.createElement("span",{className:"font-medium text-gray-900 truncate max-w-[200px]"},Je.eventId?.name||"Unknown Event"))),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center gap-2 text-gray-600"},n.createElement(Yu,{className:"h-4 w-4 text-gray-400"}),Je.generatedFor)),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex flex-col"},n.createElement("span",{className:"text-gray-900 font-medium"},Je.ticketCount," x ",NO(Je.priceCharged)),n.createElement("span",{className:"text-xs text-gray-500 mt-0.5"},wO(Je.createdAt)))),k&&n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex flex-col"},n.createElement("span",{className:"text-gray-900 font-medium"},Je.generatedBy?.name||"-"),(Je.generatedBy?.email||Je.generatedBy?.phone)&&n.createElement("span",{className:"text-xs text-gray-500 mt-0.5"},Je.generatedBy?.email||Je.generatedBy?.phone))),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Je.redeemed?jh.redeemed:jh.pending}`},Je.redeemed?"Redeemed":"Pending")),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center justify-end gap-1"},!Je.redeemed&&Je.link&&n.createElement("button",{onClick:()=>ea(Je.link,Je._id),className:`p-2 rounded-lg transition-colors ${Xe===Je._id?"text-green-600 bg-green-50":"text-gray-600 hover:bg-gray-100"}`,title:"Copy link"},Xe===Je._id?n.createElement(Ds,{className:"h-4 w-4"}):n.createElement(gg,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>tr(Je),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},n.createElement(da,{className:"h-4 w-4"})),!Je.redeemed&&n.createElement("button",{onClick:()=>At(Je),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},n.createElement(xr,{className:"h-4 w-4"}))))))))),r.totalPages>0&&n.createElement(aa,{currentPage:r.page,totalPages:r.totalPages,totalItems:r.total,itemsPerPage:r.limit,onPageChange:_,itemLabel:"records"})),n.createElement("div",{className:"md:hidden space-y-4"},l&&I.length===0?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading records...")):I.length===0?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},n.createElement(Mu,{className:"h-12 w-12 text-gray-300 mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No records found"),n.createElement("button",{onClick:tt,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Generate your first ticket link")):n.createElement(n.Fragment,null,I.map(Je=>n.createElement("div",{key:Je._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},n.createElement("div",{className:"flex items-start justify-between gap-3"},n.createElement("div",{className:"flex items-center gap-2 min-w-0"},n.createElement("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center shrink-0"},n.createElement(Qr,{className:"h-5 w-5 text-gray-800"})),n.createElement("div",{className:"min-w-0"},n.createElement("p",{className:"font-medium text-gray-900 truncate"},Je.eventId?.name||"Unknown Event"),n.createElement("p",{className:"text-xs text-gray-500"},wO(Je.createdAt)))),n.createElement("span",{className:`shrink-0 px-2.5 py-1 rounded-full text-xs font-medium ${Je.redeemed?jh.redeemed:jh.pending}`},Je.redeemed?"Redeemed":"Pending")),n.createElement("div",{className:"grid grid-cols-2 gap-3 text-sm"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement(Yu,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-gray-600"},Je.generatedFor)),n.createElement("div",{className:"flex items-center gap-2"},n.createElement(Mu,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-gray-600"},Je.ticketCount," x ",NO(Je.priceCharged)))),k&&n.createElement("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100"},n.createElement("span",{className:"text-sm text-gray-500"},"Created By"),n.createElement("div",{className:"flex flex-col items-end"},n.createElement("span",{className:"text-sm font-medium text-gray-900"},Je.generatedBy?.name||"-"),(Je.generatedBy?.email||Je.generatedBy?.phone)&&n.createElement("span",{className:"text-xs text-gray-500"},Je.generatedBy?.email||Je.generatedBy?.phone))),n.createElement("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100"},!Je.redeemed&&Je.link&&n.createElement("button",{onClick:()=>ea(Je.link,Je._id),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Xe===Je._id?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},Xe===Je._id?n.createElement(n.Fragment,null,n.createElement(Ds,{className:"h-4 w-4"}),"Copied!"):n.createElement(n.Fragment,null,n.createElement(gg,{className:"h-4 w-4"}),"Copy Link")),n.createElement("button",{onClick:()=>tr(Je),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},n.createElement(da,{className:"h-4 w-4"}),"Details"),!Je.redeemed&&n.createElement("button",{onClick:()=>At(Je),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},n.createElement(xr,{className:"h-4 w-4"}))))),r.totalPages>0&&n.createElement("div",{className:"bg-white rounded-xl shadow-sm"},n.createElement(aa,{currentPage:r.page,totalPages:r.totalPages,totalItems:r.total,itemsPerPage:r.limit,onPageChange:_,itemLabel:"records"})))),n.createElement(Eue,{isOpen:F,onClose:it,onSubmit:er,isLoading:J,serverError:Ee,existingLinkData:te,allowedEvents:d,eventsLoading:h,onSearchEvents:C}),n.createElement(Nue,{isOpen:Y,onClose:ut,record:$,isLoading:me}),n.createElement(Wa,{isOpen:z,onClose:vr,onConfirm:ur,title:"Delete Cash Ticket",message:`Are you sure you want to delete this cash ticket for ${$?.generatedFor}? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:J}),n.createElement(Cue,{isOpen:q,onClose:We,onSubmit:lt,isLoading:ee,serverError:le,allowedEvents:d,eventsLoading:h,onSearchEvents:C}),n.createElement(Due,{isOpen:W,onClose:mt,onSubmit:$t,isLoading:ie,serverError:$e,allowedEvents:d,eventsLoading:h,onSearchEvents:C}))}const Zs={BASE:"/web/vouchers",GET_BY_ID:e=>`/web/vouchers/${e}`,UPDATE:e=>`/web/vouchers/${e}`,DELETE:e=>`/web/vouchers/${e}`,ENABLE:e=>`/web/vouchers/${e}/enable`,DISABLE:e=>`/web/vouchers/${e}/disable`,DELETED:"/web/vouchers/deleted",RESTORE:e=>`/web/vouchers/${e}/restore`,PERMANENT_DELETE:e=>`/web/vouchers/${e}/permanent`},fc={create:async e=>{console.log("[VoucherService] Creating voucher with code:",e.code);const t=await ze(je.post(Zs.BASE,e));return t.success?console.log("[VoucherService] Voucher created successfully:",t.data.voucher?._id):console.error("[VoucherService] Failed to create voucher:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.isActive!==void 0&&e.isActive!==""&&t.append("isActive",e.isActive),e.search&&t.append("search",e.search);const r=t.toString(),a=r?`${Zs.BASE}?${r}`:Zs.BASE;console.log("[VoucherService] Fetching vouchers with params:",e);const l=await ze(je.get(a));return l.success?console.log("[VoucherService] Fetched vouchers:",l.data.vouchers?.length):console.error("[VoucherService] Failed to fetch vouchers:",l.message),l},getById:async e=>{console.log("[VoucherService] Fetching voucher by ID:",e);const t=await ze(je.get(Zs.GET_BY_ID(e)));return t.success?console.log("[VoucherService] Fetched voucher:",t.data.voucher?._id):console.error("[VoucherService] Failed to fetch voucher:",t.message),t},update:async(e,t)=>{console.log("[VoucherService] Updating voucher:",e);const r=await ze(je.put(Zs.UPDATE(e),t));return r.success?console.log("[VoucherService] Voucher updated successfully"):console.error("[VoucherService] Failed to update voucher:",r.message),r},enable:async e=>{console.log("[VoucherService] Enabling voucher:",e);const t=await ze(je.post(Zs.ENABLE(e)));return t.success?console.log("[VoucherService] Voucher enabled successfully"):console.error("[VoucherService] Failed to enable voucher:",t.message),t},disable:async e=>{console.log("[VoucherService] Disabling voucher:",e);const t=await ze(je.post(Zs.DISABLE(e)));return t.success?console.log("[VoucherService] Voucher disabled successfully"):console.error("[VoucherService] Failed to disable voucher:",t.message),t},delete:async e=>{console.log("[VoucherService] Deleting voucher:",e);const t=await ze(je.delete(Zs.DELETE(e)));return t.success?console.log("[VoucherService] Voucher deleted successfully"):console.error("[VoucherService] Failed to delete voucher:",t.message),t},getDeleted:async()=>{console.log("[VoucherService] Fetching deleted vouchers");const e=await ze(je.get(Zs.DELETED));return e.success?console.log("[VoucherService] Fetched deleted vouchers:",e.data.vouchers?.length):console.error("[VoucherService] Failed to fetch deleted vouchers:",e.message),e},restore:async e=>{console.log("[VoucherService] Restoring voucher:",e);const t=await ze(je.post(Zs.RESTORE(e)));return t.success?console.log("[VoucherService] Voucher restored successfully"):console.error("[VoucherService] Failed to restore voucher:",t.message),t},permanentDelete:async e=>{console.log("[VoucherService] Permanently deleting voucher:",e);const t=await ze(je.delete(Zs.PERMANENT_DELETE(e)));return t.success?console.log("[VoucherService] Voucher permanently deleted"):console.error("[VoucherService] Failed to permanently delete voucher:",t.message),t}};function Pue(e={}){const[t,r]=N.useState([]),[a,l]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[o,d]=N.useState({search:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e}),[h,g]=N.useState(!1),[p,x]=N.useState(null),E=N.useRef(null),C=N.useCallback(async(q=a.currentPage)=>{g(!0),x(null);try{const V={page:q,limit:a.limit,sortBy:o.sortBy,sortOrder:o.sortOrder,...o.search&&{search:o.search},...o.isActive!==""&&{isActive:o.isActive}},W=await fc.getAll(V);W.success?(r(W.data.vouchers||[]),l({currentPage:W.data.pagination?.currentPage||1,totalPages:W.data.pagination?.totalPages||0,totalCount:W.data.pagination?.totalCount||0,limit:W.data.pagination?.limit||10})):(x(W.message),r([]))}catch{x("Failed to fetch vouchers"),r([])}finally{g(!1)}},[o,a.limit]),O=N.useCallback(async q=>{try{const V=await fc.create(q);return V.success?(await C(1),{success:!0,data:V.data}):{success:!1,error:V.message,validationErrors:V.error}}catch{return{success:!1,error:"Failed to create voucher"}}},[C]),_=N.useCallback(async q=>{try{const V=await fc.getById(q);return V.success?{success:!0,data:V.data.voucher}:{success:!1,error:V.message}}catch{return{success:!1,error:"Failed to fetch voucher details"}}},[]),P=N.useCallback(async(q,V)=>{try{const W=await fc.update(q,V);return W.success?(r(H=>H.map($=>$._id===q?{...$,...W.data.voucher}:$)),{success:!0,data:W.data}):{success:!1,error:W.message,validationErrors:W.error}}catch{return{success:!1,error:"Failed to update voucher"}}},[]),k=N.useCallback(async(q,V)=>{try{const W=V?await fc.disable(q):await fc.enable(q);return W.success?(r(H=>H.map($=>$._id===q?{...$,isActive:!V}:$)),{success:!0}):{success:!1,error:W.message}}catch{return{success:!1,error:"Failed to update voucher status"}}},[]),I=N.useCallback(async q=>{try{const V=await fc.delete(q);return V.success?(r(W=>W.filter(H=>H._id!==q)),l(W=>({...W,totalCount:W.totalCount-1,totalPages:Math.ceil((W.totalCount-1)/W.limit)})),{success:!0}):{success:!1,error:V.message}}catch{return{success:!1,error:"Failed to delete voucher"}}},[]),F=N.useCallback(q=>{E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{d(V=>({...V,search:q}))},300)},[]),R=N.useCallback(q=>{d(V=>({...V,...q}))},[]),Y=N.useCallback(()=>{d({search:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),j=N.useCallback(q=>{C(q)},[C]),z=N.useCallback(q=>{l(V=>({...V,limit:q}))},[]),L=N.useCallback(()=>{x(null)},[]);return N.useEffect(()=>{C(1)},[o]),N.useEffect(()=>()=>{E.current&&clearTimeout(E.current)},[]),{vouchers:t,pagination:a,filters:o,isLoading:h,error:p,fetchVouchers:C,createVoucher:O,getVoucherById:_,updateVoucher:P,toggleVoucherStatus:k,deleteVoucher:I,searchVouchers:F,updateFilters:R,resetFilters:Y,changePage:j,changeLimit:z,clearError:L}}const SO=()=>({title:"",description:"",code:"",maxUsage:"",events:[],isActive:!0});function Mue({isOpen:e,onClose:t,onSubmit:r,isLoading:a=!1,serverError:l=null,voucherToEdit:o=null}){const[d,h]=N.useState(SO()),[g,p]=N.useState({}),x=!!o;N.useEffect(()=>{e&&(h(o?{title:o.title||"",description:o.description||"",code:o.code||"",maxUsage:o.maxUsage?.toString()||"",events:o.events?.map(k=>k._id||k)||[],isActive:o.isActive??!0}:SO()),p({}))},[e,o]);const E=k=>{const I={};if(k.title.trim()?k.title.length>100&&(I.title="Title must be less than 100 characters"):I.title="Title is required",k.description.trim()?k.description.length>500&&(I.description="Description must be less than 500 characters"):I.description="Description is required",k.code.trim()?/^[A-Z0-9_-]+$/i.test(k.code)?k.code.length>20&&(I.code="Code must be less than 20 characters"):I.code="Code can only contain letters, numbers, hyphens, and underscores":I.code="Voucher code is required",!k.maxUsage)I.maxUsage="Maximum usage is required";else{const F=parseInt(k.maxUsage,10);isNaN(F)||F<1?I.maxUsage="Maximum usage must be at least 1":F>1e6&&(I.maxUsage="Maximum usage cannot exceed 1,000,000")}return{isValid:Object.keys(I).length===0,errors:I}},C=(k,I)=>{h(F=>({...F,[k]:I})),g[k]&&p(F=>{const R={...F};return delete R[k],R})},O=k=>{C("code",k.toUpperCase())},_=k=>{C("events",k)},P=async k=>{k.preventDefault();const{isValid:I,errors:F}=E(d);if(!I){p(F);return}const R={title:d.title.trim(),description:d.description.trim(),code:d.code.trim().toUpperCase(),maxUsage:parseInt(d.maxUsage,10),isActive:d.isActive};d.events.length>0&&(R.events=d.events),(await r(R))?.success&&t()};return n.createElement(br,{isOpen:e,onClose:t,title:x?"Edit Voucher":"Create Voucher",size:"lg"},n.createElement("form",{onSubmit:P,className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Title ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",value:d.title,onChange:k=>C("title",k.target.value),placeholder:"e.g., Festival Food Court Discount",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.title?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.title&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.title)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Description ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("textarea",{value:d.description,onChange:k=>C("description",k.target.value),placeholder:"e.g., Get Rs.200 off at the food court for first 1500 buyers",rows:3,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${g.description?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.description&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.description)),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Voucher Code ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",value:d.code,onChange:k=>O(k.target.value),placeholder:"e.g., FESTIVAL200",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none font-mono uppercase transition-colors ${g.code?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.code&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.code)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Maximum Usage ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"number",value:d.maxUsage,onChange:k=>C("maxUsage",k.target.value),placeholder:"e.g., 1500",min:"1",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.maxUsage?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.maxUsage&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.maxUsage))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Linked Events",n.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),n.createElement(IR,{selectedIds:d.events,onChange:_,disabled:a,placeholder:"Select events to link this voucher..."}),n.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Leave empty to make the voucher available for all events")),n.createElement("div",{className:"flex items-center gap-3"},n.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},n.createElement("input",{type:"checkbox",checked:d.isActive,onChange:k=>C("isActive",k.target.checked),disabled:a,className:"sr-only peer"}),n.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800"})),n.createElement("span",{className:"text-sm text-gray-700"},d.isActive?"Active":"Disabled")),l&&n.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},n.createElement(Ir,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),n.createElement("p",{className:"text-sm text-red-700"},l)),n.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:t,disabled:a,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50"},"Cancel"),n.createElement("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50"},a?n.createElement(n.Fragment,null,n.createElement(xt,{className:"h-4 w-4 animate-spin"}),n.createElement("span",null,x?"Updating...":"Creating...")):n.createElement("span",null,x?"Update Voucher":"Create Voucher")))))}const CO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Iue=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,Rue=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500";function Lue({isOpen:e,onClose:t,voucher:r,isLoading:a=!1}){if(!r&&!a)return null;const l=r?Iue(r.usageCount||0,r.maxUsage):0;return n.createElement(br,{isOpen:e,onClose:t,title:"Voucher Details",size:"lg"},a?n.createElement("div",{className:"py-12 flex flex-col items-center justify-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading voucher details...")):r?n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"flex items-start justify-between gap-4 pb-4 border-b border-gray-200"},n.createElement("div",null,n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},r.title),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},r.description)),n.createElement("span",{className:`shrink-0 px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1.5 ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isActive?n.createElement(_i,{className:"h-4 w-4"}):n.createElement(ns,{className:"h-4 w-4"}),r.isActive?"Active":"Disabled")),n.createElement("div",{className:"bg-blue-50 rounded-lg p-4"},n.createElement("div",{className:"flex items-center gap-3"},n.createElement("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},n.createElement(Xu,{className:"h-5 w-5 text-gray-800"})),n.createElement("div",null,n.createElement("p",{className:"text-xs text-gray-800 font-medium uppercase"},"Voucher Code"),n.createElement("p",{className:"text-xl font-bold text-blue-900 font-mono tracking-wider"},r.code)))),n.createElement("div",null,n.createElement("div",{className:"flex items-center justify-between mb-2"},n.createElement("span",{className:"text-sm font-medium text-gray-700"},"Usage Progress"),n.createElement("span",{className:"text-sm text-gray-500"},r.usageCount||0," / ",r.maxUsage," claimed")),n.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},n.createElement("div",{className:`h-3 rounded-full transition-all ${Rue(l)}`,style:{width:`${l}%`}})),n.createElement("p",{className:"text-xs text-gray-500 mt-1"},l,"% used (",r.maxUsage-(r.usageCount||0)," remaining)")),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(T2,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Maximum Usage")),n.createElement("p",{className:"text-lg font-semibold text-gray-900"},r.maxUsage?.toLocaleString("en-IN"))),n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(Oo,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Times Used")),n.createElement("p",{className:"text-lg font-semibold text-gray-900"},(r.usageCount||0).toLocaleString("en-IN"))),n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(Pa,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Created")),n.createElement("p",{className:"text-sm font-medium text-gray-900"},CO(r.createdAt))),n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(Pa,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Last Updated")),n.createElement("p",{className:"text-sm font-medium text-gray-900"},CO(r.updatedAt)))),r.createdBy&&n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(xi,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Created By")),n.createElement("p",{className:"text-sm font-medium text-gray-900"},r.createdBy.name||r.createdBy.email),r.createdBy.email&&r.createdBy.name&&n.createElement("p",{className:"text-xs text-gray-500"},r.createdBy.email)),r.events&&r.events.length>0&&n.createElement("div",null,n.createElement("div",{className:"flex items-center gap-2 mb-2"},n.createElement(Qr,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-sm font-medium text-gray-700"},"Linked Events")),n.createElement("div",{className:"flex flex-wrap gap-2"},r.events.map(o=>n.createElement("span",{key:o._id||o,className:"px-3 py-1.5 bg-blue-100 text-gray-900 rounded-full text-sm font-medium"},o.name||o)))),r.claimedPhones&&r.claimedPhones.length>0&&n.createElement("div",{className:"pt-4 border-t border-gray-200"},n.createElement("p",{className:"text-sm text-gray-500"},n.createElement("span",{className:"font-medium"},r.claimedPhones.length)," phone number",r.claimedPhones.length!==1?"s":""," have claimed this voucher")),n.createElement("div",{className:"pt-4 border-t border-gray-200"},n.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"},"Close"))):n.createElement("div",{className:"py-12 text-center text-gray-500"},n.createElement("p",null,"No voucher data available")))}const AO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",TO=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,OO=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500",zh={active:"bg-green-100 text-green-700",disabled:"bg-gray-100 text-gray-600"};function Bue(){const{vouchers:e,pagination:t,filters:r,isLoading:a,error:l,fetchVouchers:o,createVoucher:d,getVoucherById:h,updateVoucher:g,toggleVoucherStatus:p,deleteVoucher:x,searchVouchers:E,updateFilters:C,resetFilters:O,changePage:_,clearError:P}=Pue(),[k,I]=N.useState(!1),[F,R]=N.useState(!1),[Y,j]=N.useState(!1),[z,L]=N.useState(null),[q,V]=N.useState(null),[W,H]=N.useState(!1),[$,ce]=N.useState(!1),[me,ae]=N.useState(null),[J,se]=N.useState(!1),[Ee,we]=N.useState(r.search||""),[te,K]=N.useState(r.isActive||""),ee=N.useCallback(()=>{ae(null),V(null),I(!0)},[]),ge=N.useCallback(async Ne=>{ae(null),H(!0);try{const tt=await h(Ne._id);tt.success?(V(tt.data),I(!0)):alert(tt.error||"Failed to load voucher details")}catch{alert("An unexpected error occurred")}finally{H(!1)}},[h]),le=N.useCallback(()=>{I(!1),ae(null),V(null)},[]),Ce=N.useCallback(async Ne=>{ce(!0),ae(null);try{let tt;return q?tt=await g(q._id,Ne):tt=await d(Ne),tt.success?tt:(ae(tt.error||"Failed to save voucher"),{success:!1})}catch{return ae("An unexpected error occurred"),{success:!1}}finally{ce(!1)}},[d,g,q]),ie=N.useCallback(async Ne=>{L(Ne),R(!0),H(!0);try{const tt=await h(Ne._id);tt.success&&L(tt.data)}catch(tt){console.error("[Vouchers] Failed to fetch details:",tt)}finally{H(!1)}},[h]),de=N.useCallback(()=>{R(!1),L(null)},[]),$e=N.useCallback(async Ne=>{ce(!0);try{const tt=await p(Ne._id,Ne.isActive);tt.success||alert(tt.error||"Failed to update voucher status")}catch{alert("An unexpected error occurred")}finally{ce(!1)}},[p]),be=N.useCallback(Ne=>{L(Ne),j(!0)},[]),Xe=N.useCallback(()=>{j(!1),L(null)},[]),at=N.useCallback(async()=>{if(z){ce(!0);try{const Ne=await x(z._id);Ne.success?Xe():alert(Ne.error||"Failed to delete voucher")}catch{alert("An unexpected error occurred")}finally{ce(!1)}}},[z,x,Xe]),Le=N.useCallback(Ne=>{const tt=Ne.target.value;we(tt),E(tt)},[E]),ve=N.useCallback(()=>{C({search:Ee,isActive:te}),se(!1)},[Ee,te,C]),Ue=N.useCallback(()=>{we(""),K(""),O(),se(!1)},[O]),oe=N.useCallback(()=>{o(t.currentPage)},[o,t.currentPage]),qe=N.useMemo(()=>r.search||r.isActive!=="",[r]);return n.createElement("div",{className:"space-y-4 sm:space-y-6"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},n.createElement("div",null,n.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900"},"Vouchers"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Create and manage discount vouchers")),n.createElement("button",{onClick:ee,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},n.createElement(Mr,{className:"h-5 w-5"}),n.createElement("span",null,"Create Voucher"))),l&&n.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},n.createElement(Ir,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),n.createElement("div",{className:"flex-1"},n.createElement("p",{className:"text-sm font-medium text-red-800"},"Error loading vouchers"),n.createElement("p",{className:"text-sm text-red-700 mt-0.5"},l)),n.createElement("button",{onClick:P,className:"shrink-0 text-red-600 hover:text-red-800"},"")),n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},n.createElement("div",{className:"relative flex-1 max-w-md"},n.createElement(ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.createElement("input",{type:"text",value:Ee,onChange:Le,placeholder:"Search vouchers...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),n.createElement("button",{onClick:()=>se(!J),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${qe?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},n.createElement(Il,{className:"h-4 w-4"}),n.createElement("span",null,"Filters"),qe&&n.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(r.search?1:0)+(r.isActive!==""?1:0)),n.createElement(Ml,{className:`h-4 w-4 transition-transform ${J?"rotate-180":""}`})),n.createElement("button",{onClick:oe,disabled:a,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},n.createElement(os,{className:`h-4 w-4 ${a?"animate-spin":""}`}),n.createElement("span",{className:"hidden sm:inline"},"Refresh")),n.createElement("div",{className:"ml-auto text-sm text-gray-500"},t.totalCount," voucher",t.totalCount!==1?"s":""," total")),J&&n.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),n.createElement("select",{value:te,onChange:Ne=>K(Ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"All Status"),n.createElement("option",{value:"true"},"Active"),n.createElement("option",{value:"false"},"Disabled"))),n.createElement("div",{className:"flex items-end gap-2 sm:col-span-1 lg:col-span-2"},n.createElement("button",{onClick:ve,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),n.createElement("button",{onClick:Ue,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),n.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"w-full"},n.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},n.createElement("tr",null,n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Code"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Title"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Usage"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Events"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Created"),n.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),n.createElement("tbody",null,a&&e.length===0?n.createElement("tr",null,n.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading vouchers..."))):e.length===0?n.createElement("tr",null,n.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},n.createElement(Xu,{className:"h-12 w-12 text-gray-300 mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No vouchers found"),n.createElement("button",{onClick:ee,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first voucher"))):e.map(Ne=>{const tt=TO(Ne.usageCount||0,Ne.maxUsage);return n.createElement("tr",{key:Ne._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:"px-2.5 py-1 bg-gray-100 text-gray-700 rounded font-mono text-sm font-medium"},Ne.code)),n.createElement("td",{className:"px-6 py-4"},n.createElement("p",{className:"font-medium text-gray-900 truncate max-w-[200px]"},Ne.title)),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"w-32"},n.createElement("div",{className:"flex items-center justify-between text-xs mb-1"},n.createElement("span",{className:"text-gray-600"},Ne.usageCount||0," / ",Ne.maxUsage),n.createElement("span",{className:"text-gray-400"},tt,"%")),n.createElement("div",{className:"w-full bg-gray-200 rounded-full h-1.5"},n.createElement("div",{className:`h-1.5 rounded-full ${OO(tt)}`,style:{width:`${tt}%`}})))),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Ne.isActive?zh.active:zh.disabled}`},Ne.isActive?"Active":"Disabled")),n.createElement("td",{className:"px-6 py-4"},Ne.events&&Ne.events.length>0?n.createElement("div",{className:"flex items-center gap-1"},n.createElement(Qr,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-sm text-gray-600"},Ne.events.length," event",Ne.events.length!==1?"s":"")):n.createElement("span",{className:"text-sm text-gray-400"},"All events")),n.createElement("td",{className:"px-6 py-4 text-sm text-gray-500"},AO(Ne.createdAt)),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center justify-end gap-1"},n.createElement("button",{onClick:()=>$e(Ne),disabled:$,className:`p-2 rounded-lg transition-colors ${Ne.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:Ne.isActive?"Disable voucher":"Enable voucher"},Ne.isActive?n.createElement(yi,{className:"h-5 w-5"}):n.createElement(Rl,{className:"h-5 w-5"})),n.createElement("button",{onClick:()=>ie(Ne),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},n.createElement(da,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>ge(Ne),disabled:W,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit voucher"},n.createElement(bn,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>be(Ne),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},n.createElement(xr,{className:"h-4 w-4"})))))})))),t.totalPages>0&&n.createElement(aa,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:_,itemLabel:"vouchers"})),n.createElement("div",{className:"md:hidden space-y-4"},a&&e.length===0?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading vouchers...")):e.length===0?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},n.createElement(Xu,{className:"h-12 w-12 text-gray-300 mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No vouchers found"),n.createElement("button",{onClick:ee,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first voucher")):n.createElement(n.Fragment,null,e.map(Ne=>{const tt=TO(Ne.usageCount||0,Ne.maxUsage);return n.createElement("div",{key:Ne._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},n.createElement("div",{className:"flex items-start justify-between gap-3"},n.createElement("div",{className:"min-w-0"},n.createElement("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 rounded font-mono text-sm font-medium"},Ne.code),n.createElement("p",{className:"font-medium text-gray-900 mt-2 truncate"},Ne.title),n.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},AO(Ne.createdAt))),n.createElement("span",{className:`shrink-0 px-2.5 py-1 rounded-full text-xs font-medium ${Ne.isActive?zh.active:zh.disabled}`},Ne.isActive?"Active":"Disabled")),n.createElement("div",null,n.createElement("div",{className:"flex items-center justify-between text-xs mb-1"},n.createElement("span",{className:"text-gray-600"},Ne.usageCount||0," / ",Ne.maxUsage," claimed"),n.createElement("span",{className:"text-gray-400"},tt,"%")),n.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},n.createElement("div",{className:`h-2 rounded-full ${OO(tt)}`,style:{width:`${tt}%`}}))),Ne.events&&Ne.events.length>0&&n.createElement("div",{className:"flex items-center gap-1 text-sm text-gray-600"},n.createElement(Qr,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",null,Ne.events.length," event",Ne.events.length!==1?"s":"")),n.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},n.createElement("button",{onClick:()=>$e(Ne),disabled:$,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Ne.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},Ne.isActive?n.createElement(n.Fragment,null,n.createElement(yi,{className:"h-4 w-4"}),"On"):n.createElement(n.Fragment,null,n.createElement(Rl,{className:"h-4 w-4"}),"Off")),n.createElement("button",{onClick:()=>ie(Ne),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},n.createElement(da,{className:"h-4 w-4"}),"Details"),n.createElement("button",{onClick:()=>ge(Ne),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors"},n.createElement(bn,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>be(Ne),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},n.createElement(xr,{className:"h-4 w-4"}))))}),t.totalPages>0&&n.createElement("div",{className:"bg-white rounded-xl shadow-sm"},n.createElement(aa,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:_,itemLabel:"vouchers"})))),n.createElement(Mue,{isOpen:k,onClose:le,onSubmit:Ce,isLoading:$,serverError:me,voucherToEdit:q}),n.createElement(Lue,{isOpen:F,onClose:de,voucher:z,isLoading:W}),n.createElement(Wa,{isOpen:Y,onClose:Xe,onConfirm:at,title:"Delete Voucher",message:`Are you sure you want to delete the voucher "${z?.code}"? This action can be undone by restoring from deleted vouchers.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:$}))}const es={BASE:"/web/sessions",GET_BY_ID:e=>`/web/sessions/${e}`,UPDATE:e=>`/web/sessions/${e}`,DELETE:e=>`/web/sessions/${e}`,TOGGLE_LIVE:e=>`/web/sessions/${e}/toggle-live`,DELETED:"/web/sessions/deleted",RESTORE:e=>`/web/sessions/${e}/restore`,PERMANENT_DELETE:e=>`/web/sessions/${e}/permanent`,BOOKINGS:"/web/sessions/bookings",UPDATE_BOOKING:e=>`/web/sessions/bookings/${e}`},yo={create:async e=>{console.log("[SessionService] Creating session:",e.title);const t=await ze(je.post(es.BASE,e));return t.success?console.log("[SessionService] Session created successfully:",t.data.session?._id):console.error("[SessionService] Failed to create session:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.isLive!==void 0&&e.isLive!==""&&t.append("isLive",e.isLive),e.sessionType&&t.append("sessionType",e.sessionType),e.search&&t.append("search",e.search);const r=t.toString(),a=r?`${es.BASE}?${r}`:es.BASE;console.log("[SessionService] Fetching sessions with params:",e);const l=await ze(je.get(a));return l.success?console.log("[SessionService] Fetched sessions:",l.data.sessions?.length):console.error("[SessionService] Failed to fetch sessions:",l.message),l},getById:async e=>{console.log("[SessionService] Fetching session by ID:",e);const t=await ze(je.get(es.GET_BY_ID(e)));return t.success?console.log("[SessionService] Fetched session:",t.data.session?._id):console.error("[SessionService] Failed to fetch session:",t.message),t},update:async(e,t)=>{console.log("[SessionService] Updating session:",e);const r=await ze(je.put(es.UPDATE(e),t));return r.success?console.log("[SessionService] Session updated successfully"):console.error("[SessionService] Failed to update session:",r.message),r},toggleLive:async e=>{console.log("[SessionService] Toggling session live status:",e);const t=await ze(je.patch(es.TOGGLE_LIVE(e)));return t.success?console.log("[SessionService] Session live status toggled successfully"):console.error("[SessionService] Failed to toggle session live status:",t.message),t},delete:async e=>{console.log("[SessionService] Deleting session:",e);const t=await ze(je.delete(es.DELETE(e)));return t.success?console.log("[SessionService] Session deleted successfully"):console.error("[SessionService] Failed to delete session:",t.message),t},getDeleted:async()=>{console.log("[SessionService] Fetching deleted sessions");const e=await ze(je.get(es.DELETED));return e.success?console.log("[SessionService] Fetched deleted sessions:",e.data.sessions?.length):console.error("[SessionService] Failed to fetch deleted sessions:",e.message),e},restore:async e=>{console.log("[SessionService] Restoring session:",e);const t=await ze(je.post(es.RESTORE(e)));return t.success?console.log("[SessionService] Session restored successfully"):console.error("[SessionService] Failed to restore session:",t.message),t},permanentDelete:async e=>{console.log("[SessionService] Permanently deleting session:",e);const t=await ze(je.delete(es.PERMANENT_DELETE(e)));return t.success?console.log("[SessionService] Session permanently deleted"):console.error("[SessionService] Failed to permanently delete session:",t.message),t},getBookings:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.status&&t.append("status",e.status),e.sessionId&&t.append("sessionId",e.sessionId);const r=t.toString(),a=r?`${es.BOOKINGS}?${r}`:es.BOOKINGS;console.log("[SessionService] Fetching bookings with params:",e);const l=await ze(je.get(a));return l.success?console.log("[SessionService] Fetched bookings:",l.data.bookings?.length):console.error("[SessionService] Failed to fetch bookings:",l.message),l},updateBooking:async(e,t)=>{console.log("[SessionService] Updating booking:",e,"with status:",t.status);const r=await ze(je.put(es.UPDATE_BOOKING(e),t));return r.success?console.log("[SessionService] Booking updated successfully"):console.error("[SessionService] Failed to update booking:",r.message),r}};function Fue(e={}){const[t,r]=N.useState([]),[a,l]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[o,d]=N.useState({search:"",isLive:"",sessionType:"",category:"",sortBy:"createdAt",sortOrder:"desc",...e}),[h,g]=N.useState(!1),[p,x]=N.useState(null),[E,C]=N.useState([]),[O,_]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[P,k]=N.useState({status:"",sessionId:""}),[I,F]=N.useState(!1),[R,Y]=N.useState(null),j=N.useRef(null),z=N.useCallback(async(le=a.currentPage)=>{g(!0),x(null);try{const Ce={page:le,limit:a.limit,sortBy:o.sortBy,sortOrder:o.sortOrder,...o.search&&{search:o.search},...o.isLive!==""&&{isLive:o.isLive},...o.sessionType&&{sessionType:o.sessionType},...o.category&&{category:o.category}};console.log("[useSessions] Fetching sessions with params:",Ce);const ie=await yo.getAll(Ce);ie.success?(r(ie.data.sessions||[]),l({currentPage:ie.data.pagination?.currentPage||1,totalPages:ie.data.pagination?.totalPages||0,totalCount:ie.data.pagination?.totalCount||0,limit:ie.data.pagination?.limit||10})):(x(ie.message),r([]))}catch{x("Failed to fetch sessions"),r([])}finally{g(!1)}},[o,a.limit]),L=N.useCallback(async le=>{try{const Ce=await yo.create(le);return Ce.success?(await z(1),{success:!0,data:Ce.data}):{success:!1,error:Ce.message,validationErrors:Ce.error}}catch{return{success:!1,error:"Failed to create session"}}},[z]),q=N.useCallback(async le=>{try{const Ce=await yo.getById(le);return Ce.success?{success:!0,data:Ce.data.session}:{success:!1,error:Ce.message}}catch{return{success:!1,error:"Failed to fetch session details"}}},[]),V=N.useCallback(async(le,Ce)=>{try{const ie=await yo.update(le,Ce);return ie.success?(r(de=>de.map($e=>$e._id===le?{...$e,...ie.data.session}:$e)),{success:!0,data:ie.data}):{success:!1,error:ie.message,validationErrors:ie.error}}catch{return{success:!1,error:"Failed to update session"}}},[]),W=N.useCallback(async(le,Ce)=>{try{const ie=await yo.toggleLive(le);return ie.success?(r(de=>de.map($e=>$e._id===le?{...$e,isLive:!Ce}:$e)),{success:!0}):{success:!1,error:ie.message}}catch{return{success:!1,error:"Failed to update session status"}}},[]),H=N.useCallback(async le=>{try{const Ce=await yo.delete(le);return Ce.success?(r(ie=>ie.filter(de=>de._id!==le)),l(ie=>({...ie,totalCount:ie.totalCount-1,totalPages:Math.ceil((ie.totalCount-1)/ie.limit)})),{success:!0}):{success:!1,error:Ce.message}}catch{return{success:!1,error:"Failed to delete session"}}},[]),$=N.useCallback(le=>{j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{d(Ce=>({...Ce,search:le}))},300)},[]),ce=N.useCallback(le=>{d(Ce=>({...Ce,...le}))},[]),me=N.useCallback(()=>{d({search:"",isLive:"",sessionType:"",category:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),ae=N.useCallback(le=>{z(le)},[z]),J=N.useCallback(le=>{l(Ce=>({...Ce,limit:le}))},[]),se=N.useCallback(()=>{x(null)},[]),Ee=N.useCallback(async(le=O.currentPage)=>{F(!0),Y(null);try{const Ce={page:le,limit:O.limit,...P.status&&{status:P.status},...P.sessionId&&{sessionId:P.sessionId}};console.log("[useSessions] Fetching bookings with params:",Ce);const ie=await yo.getBookings(Ce);ie.success?(C(ie.data.bookings||[]),_({currentPage:ie.data.pagination?.currentPage||1,totalPages:ie.data.pagination?.totalPages||0,totalCount:ie.data.pagination?.totalCount||0,limit:ie.data.pagination?.limit||10}),console.log("[useSessions] Fetched bookings:",ie.data.bookings?.length)):(console.error("[useSessions] Failed to fetch bookings:",ie.message),Y(ie.message||"Failed to fetch bookings"),C([]))}catch(Ce){console.error("[useSessions] Error fetching bookings:",Ce),Y("Failed to fetch bookings"),C([])}finally{F(!1)}},[P,O.limit]),we=N.useCallback(async(le,Ce)=>{try{console.log("[useSessions] Updating booking:",le,"with data:",Ce);const ie=await yo.updateBooking(le,Ce);return ie.success?(console.log("[useSessions] Booking updated successfully"),C(de=>de.map($e=>$e._id===le?{...$e,...ie.data.booking}:$e)),{success:!0,data:ie.data}):(console.error("[useSessions] Failed to update booking:",ie.message),{success:!1,error:ie.message})}catch(ie){return console.error("[useSessions] Error updating booking:",ie),{success:!1,error:"Failed to update booking"}}},[]),te=N.useCallback(le=>{k(Ce=>({...Ce,...le}))},[]),K=N.useCallback(()=>{k({status:"",sessionId:""})},[]),ee=N.useCallback(le=>{Ee(le)},[Ee]),ge=N.useCallback(()=>{Y(null)},[]);return N.useEffect(()=>{z(1)},[o]),N.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]),{sessions:t,pagination:a,filters:o,isLoading:h,error:p,fetchSessions:z,createSession:L,getSessionById:q,updateSession:V,toggleSessionLive:W,deleteSession:H,searchSessions:$,updateFilters:ce,resetFilters:me,changePage:ae,changeLimit:J,clearError:se,bookings:E,bookingPagination:O,bookingFilters:P,isLoadingBookings:I,bookingError:R,fetchBookings:Ee,updateBooking:we,updateBookingFilters:te,resetBookingFilters:K,changeBookingPage:ee,clearBookingError:ge}}const Uue=[{value:"therapeutic",label:"Therapeutic"},{value:"mental_wellness",label:"Mental Wellness"},{value:"career",label:"Career"},{value:"relationships",label:"Relationships"},{value:"lifestyle",label:"Lifestyle"},{value:"other",label:"Other"}],_O=()=>({title:"",shortDescription:"",longDescription:"",price:"",compareAtPrice:"",duration:"",sessionType:"OTO",category:"mental_wellness",isLive:!1,host:"",hostEmail:"",hostPhone:"",availableSlots:"",calendlyLink:"",sessionDate:"",imageUrl:"",tags:[]});function jue({isOpen:e,onClose:t,onSubmit:r,isLoading:a=!1,serverError:l=null,sessionToEdit:o=null}){const[d,h]=N.useState(_O()),[g,p]=N.useState({}),x=!!o,[E,C]=N.useState("");N.useEffect(()=>{e&&(h(o?{title:o.title||"",shortDescription:o.shortDescription||"",longDescription:o.longDescription||"",price:o.price?.toString()||"",compareAtPrice:o.compareAtPrice?.toString()||"",duration:o.duration?.toString()||"",sessionType:o.sessionType||"OTO",category:o.category||"mental_wellness",isLive:o.isLive??!1,host:o.host||"",hostEmail:o.hostEmail||"",hostPhone:o.hostPhone||"",availableSlots:o.availableSlots?.toString()||"",calendlyLink:o.calendlyLink||"",sessionDate:o.sessionDate?new Date(o.sessionDate).toISOString().slice(0,16):"",imageUrl:o.imageUrl||"",tags:o.tags||[]}:_O()),p({}),C(""))},[e,o]);const O=k=>{const I={};if(k.title.trim()?k.title.length>200&&(I.title="Title must be less than 200 characters"):I.title="Title is required",k.shortDescription.trim()?k.shortDescription.length>500&&(I.shortDescription="Short description must be less than 500 characters"):I.shortDescription="Short description is required",k.longDescription.trim()?k.longDescription.length>5e3&&(I.longDescription="Long description must be less than 5000 characters"):I.longDescription="Long description is required",!k.price)I.price="Price is required";else{const F=parseFloat(k.price);(isNaN(F)||F<0)&&(I.price="Price must be a positive number")}if(k.compareAtPrice){const F=parseFloat(k.compareAtPrice),R=parseFloat(k.price);isNaN(F)||F<0?I.compareAtPrice="Compare at price must be a positive number":!isNaN(R)&&F<R&&(I.compareAtPrice="Compare at price must be greater than or equal to price")}if(!k.duration)I.duration="Duration is required";else{const F=parseInt(k.duration,10);isNaN(F)||F<1?I.duration="Duration must be at least 1 minute":F>480&&(I.duration="Duration cannot exceed 480 minutes (8 hours)")}if(k.host.trim()?k.host.length>100&&(I.host="Host name must be less than 100 characters"):I.host="Host name is required",k.hostEmail&&k.hostEmail.trim()&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k.hostEmail.trim())||(I.hostEmail="Please provide a valid email address")),k.hostPhone&&k.hostPhone.trim()&&(/^[\d\s+\-()]+$/.test(k.hostPhone.trim())?k.hostPhone.trim().length<10&&(I.hostPhone="Phone number must be at least 10 digits"):I.hostPhone="Please provide a valid phone number"),k.sessionType==="OTM"&&k.availableSlots){const F=parseInt(k.availableSlots,10);(isNaN(F)||F<1)&&(I.availableSlots="Available slots must be at least 1")}return k.calendlyLink.trim()?/^https?:\/\/.+/.test(k.calendlyLink)||(I.calendlyLink="Please provide a valid URL"):I.calendlyLink="Calendly link is required",k.imageUrl&&!/^https?:\/\/.+/.test(k.imageUrl)&&(I.imageUrl="Please provide a valid image URL"),{isValid:Object.keys(I).length===0,errors:I}},_=(k,I)=>{h(F=>({...F,[k]:I})),g[k]&&p(F=>{const R={...F};return delete R[k],R})},P=async k=>{k.preventDefault();const{isValid:I,errors:F}=O(d);if(!I){p(F);return}const R={title:d.title.trim(),shortDescription:d.shortDescription.trim(),longDescription:d.longDescription.trim(),price:parseFloat(d.price),duration:parseInt(d.duration,10),sessionType:d.sessionType,category:d.category,isLive:d.isLive,host:d.host.trim()};d.compareAtPrice&&(R.compareAtPrice=parseFloat(d.compareAtPrice)),d.availableSlots&&(R.availableSlots=parseInt(d.availableSlots,10)),R.calendlyLink=d.calendlyLink.trim(),d.sessionDate&&(R.sessionDate=new Date(d.sessionDate).toISOString()),d.imageUrl.trim()&&(R.imageUrl=d.imageUrl.trim()),d.hostEmail.trim()&&(R.hostEmail=d.hostEmail.trim()),d.hostPhone.trim()&&(R.hostPhone=d.hostPhone.trim()),d.tags.length>0&&(R.tags=d.tags),(await r(R))?.success&&t()};return n.createElement(br,{isOpen:e,onClose:t,title:x?"Edit Session":"Create Session",size:"xl"},n.createElement("form",{onSubmit:P,className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Title ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",value:d.title,onChange:k=>_("title",k.target.value),placeholder:"e.g., One-on-One Career Coaching",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.title?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.title&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.title)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Short Description ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("textarea",{value:d.shortDescription,onChange:k=>_("shortDescription",k.target.value),placeholder:"Brief overview of the session...",rows:2,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${g.shortDescription?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.shortDescription&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.shortDescription)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Long Description ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("textarea",{value:d.longDescription,onChange:k=>_("longDescription",k.target.value),placeholder:"Detailed description of what participants will learn...",rows:4,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${g.longDescription?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.longDescription&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.longDescription)),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Price () ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"number",value:d.price,onChange:k=>_("price",k.target.value),placeholder:"e.g., 999",min:"0",step:"0.01",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.price?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.price&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.price)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Compare at Price ()"),n.createElement("input",{type:"number",value:d.compareAtPrice,onChange:k=>_("compareAtPrice",k.target.value),placeholder:"e.g., 1499",min:"0",step:"0.01",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.compareAtPrice?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.compareAtPrice&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.compareAtPrice)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Duration (mins) ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"number",value:d.duration,onChange:k=>_("duration",k.target.value),placeholder:"e.g., 60",min:"1",max:"480",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.duration?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.duration&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.duration))),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Session Type ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("select",{value:d.sessionType,onChange:k=>_("sessionType",k.target.value),disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${a?"bg-gray-100":""}`},n.createElement("option",{value:"OTO"},"One-to-One (OTO)"),n.createElement("option",{value:"OTM"},"One-to-Many (OTM)"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Category ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("select",{value:d.category,onChange:k=>_("category",k.target.value),disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${a?"bg-gray-100":""}`},Uue.map(k=>n.createElement("option",{key:k.value,value:k.value},k.label))))),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Host Name ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",value:d.host,onChange:k=>_("host",k.target.value),placeholder:"e.g., John Doe",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.host?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.host&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.host)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Host Email",n.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),n.createElement("input",{type:"email",value:d.hostEmail,onChange:k=>_("hostEmail",k.target.value),placeholder:"host@example.com",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.hostEmail?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.hostEmail&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.hostEmail)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Host Phone",n.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),n.createElement("input",{type:"tel",value:d.hostPhone,onChange:k=>_("hostPhone",k.target.value),placeholder:"+91 9876543210",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.hostPhone?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.hostPhone&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.hostPhone))),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Available Slots",d.sessionType==="OTM"&&n.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(for group sessions)")),n.createElement("input",{type:"number",value:d.availableSlots,onChange:k=>_("availableSlots",k.target.value),placeholder:d.sessionType==="OTO"?"1":"e.g., 50",min:"1",disabled:a||d.sessionType==="OTO",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.availableSlots?"border-red-500":"border-gray-300"} ${a||d.sessionType==="OTO"?"bg-gray-100":""}`}),g.availableSlots&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.availableSlots),d.sessionType==="OTO"&&n.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Fixed to 1 for one-to-one sessions")),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Session Date",n.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),n.createElement("input",{type:"datetime-local",value:d.sessionDate,onChange:k=>_("sessionDate",k.target.value),disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${a?"bg-gray-100":""}`}))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Calendly Link ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"url",value:d.calendlyLink,onChange:k=>_("calendlyLink",k.target.value),placeholder:"https://calendly.com/your-link",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.calendlyLink?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.calendlyLink&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.calendlyLink)),n.createElement(Ol,{label:"Session Image",value:d.imageUrl,onUpload:k=>_("imageUrl",k),disabled:a,error:g.imageUrl,type:"image",folder:"sessions",placeholder:"Drop image here or click to upload"}),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Tags",n.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),n.createElement("div",{className:"flex gap-2"},n.createElement("input",{type:"text",value:E,onChange:k=>C(k.target.value),onKeyDown:k=>{if(k.key==="Enter"){k.preventDefault();const I=E.trim().toLowerCase();I&&!d.tags.includes(I)&&(_("tags",[...d.tags,I]),C(""))}},placeholder:"Type a tag and press Enter",disabled:a,className:`flex-1 px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${a?"bg-gray-100":""}`}),n.createElement("button",{type:"button",onClick:()=>{const k=E.trim().toLowerCase();k&&!d.tags.includes(k)&&(_("tags",[...d.tags,k]),C(""))},disabled:a||!E.trim(),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50"},n.createElement(Mr,{className:"h-4 w-4"}))),d.tags.length>0&&n.createElement("div",{className:"flex flex-wrap gap-2 mt-2"},d.tags.map((k,I)=>n.createElement("span",{key:I,className:"inline-flex items-center gap-1 px-2.5 py-1 bg-gray-100 text-gray-700 rounded-full text-sm"},k,n.createElement("button",{type:"button",onClick:()=>{_("tags",d.tags.filter((F,R)=>R!==I))},disabled:a,className:"text-gray-500 hover:text-gray-700"},n.createElement(Ia,{className:"h-3 w-3"})))))),n.createElement("div",{className:"flex items-center gap-3"},n.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},n.createElement("input",{type:"checkbox",checked:d.isLive,onChange:k=>_("isLive",k.target.checked),disabled:a,className:"sr-only peer"}),n.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})),n.createElement("span",{className:"text-sm text-gray-700"},d.isLive?"Live (Available for booking)":"Not Live")),l&&n.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},n.createElement(Ir,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),n.createElement("p",{className:"text-sm text-red-700"},l)),n.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200 sticky bottom-0 bg-white"},n.createElement("button",{type:"button",onClick:t,disabled:a,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50"},"Cancel"),n.createElement("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50"},a?n.createElement(n.Fragment,null,n.createElement(xt,{className:"h-4 w-4 animate-spin"}),n.createElement("span",null,x?"Updating...":"Creating...")):n.createElement("span",null,x?"Update Session":"Create Session")))))}const Av=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",DO=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),zue=e=>{if(!e)return"-";if(e<60)return`${e} min`;const t=Math.floor(e/60),r=e%60;return r>0?`${t}h ${r}m`:`${t}h`},Vue=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,Hue=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500";function $ue({isOpen:e,onClose:t,session:r,isLoading:a=!1}){if(!r&&!a)return null;const l=r?.bookedSlots||0,o=r?.availableSlots,d=Vue(l,o),h=r?.discountPercent||0;return n.createElement(br,{isOpen:e,onClose:t,title:"Session Details",size:"lg"},a?n.createElement("div",{className:"py-12 flex flex-col items-center justify-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading session details...")):r?n.createElement("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-2"},n.createElement("div",{className:"flex items-start justify-between gap-4 pb-4 border-b border-gray-200"},n.createElement("div",{className:"flex-1"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${r.sessionType==="OTO"?"bg-purple-100 text-purple-700":"bg-blue-100 text-gray-900"}`},r.sessionType==="OTO"?"One-to-One":"One-to-Many")),n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},r.title),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},r.shortDescription)),n.createElement("span",{className:`shrink-0 px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1.5 ${r.isLive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isLive?n.createElement(_i,{className:"h-4 w-4"}):n.createElement(ns,{className:"h-4 w-4"}),r.isLive?"Live":"Not Live")),r.imageUrl&&n.createElement("div",{className:"rounded-lg overflow-hidden bg-gray-100"},n.createElement("img",{src:r.imageUrl,alt:r.title,className:"w-full h-48 object-cover",onError:g=>{g.target.style.display="none"}})),n.createElement("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center gap-3"},n.createElement("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},n.createElement(uD,{className:"h-5 w-5 text-gray-800"})),n.createElement("div",null,n.createElement("p",{className:"text-xs text-gray-800 font-medium uppercase"},"Price"),n.createElement("div",{className:"flex items-center gap-2"},n.createElement("p",{className:"text-2xl font-bold text-blue-900"},DO(r.price)),r.compareAtPrice&&r.compareAtPrice>r.price&&n.createElement("p",{className:"text-sm text-gray-500 line-through"},DO(r.compareAtPrice))))),h>0&&n.createElement("div",{className:"flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full"},n.createElement(Vj,{className:"h-4 w-4"}),n.createElement("span",{className:"font-semibold"},h,"% OFF")))),n.createElement("div",null,n.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-2"},"Description"),n.createElement("p",{className:"text-sm text-gray-600 whitespace-pre-wrap"},r.longDescription)),r.sessionType==="OTM"&&o&&n.createElement("div",null,n.createElement("div",{className:"flex items-center justify-between mb-2"},n.createElement("span",{className:"text-sm font-medium text-gray-700"},"Booking Progress"),n.createElement("span",{className:"text-sm text-gray-500"},l," / ",o," booked")),n.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},n.createElement("div",{className:`h-3 rounded-full transition-all ${Hue(d)}`,style:{width:`${d}%`}})),n.createElement("p",{className:"text-xs text-gray-500 mt-1"},d,"% filled (",o-l," slots remaining)")),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(Pa,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Duration")),n.createElement("p",{className:"text-lg font-semibold text-gray-900"},zue(r.duration))),n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(xi,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Host")),n.createElement("p",{className:"text-lg font-semibold text-gray-900"},r.host)),r.sessionDate&&n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(Qr,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Session Date")),n.createElement("p",{className:"text-sm font-medium text-gray-900"},Av(r.sessionDate))),o&&n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(Oo,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},r.sessionType==="OTO"?"Slot":"Available Slots")),n.createElement("p",{className:"text-lg font-semibold text-gray-900"},o-l," remaining")),n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(Pa,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Created")),n.createElement("p",{className:"text-sm font-medium text-gray-900"},Av(r.createdAt))),n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(Pa,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Last Updated")),n.createElement("p",{className:"text-sm font-medium text-gray-900"},Av(r.updatedAt)))),r.calendlyLink&&n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(Cj,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Booking Link")),n.createElement("a",{href:r.calendlyLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-800 hover:text-black hover:underline break-all"},r.calendlyLink)),r.createdBy&&n.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(xi,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Created By")),n.createElement("p",{className:"text-sm font-medium text-gray-900"},r.createdBy.name||r.createdBy.email),r.createdBy.email&&r.createdBy.name&&n.createElement("p",{className:"text-xs text-gray-500"},r.createdBy.email)),n.createElement("div",{className:"pt-4 border-t border-gray-200 sticky bottom-0 bg-white"},n.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"},"Close"))):n.createElement("div",{className:"py-12 text-center text-gray-500"},n.createElement("p",null,"No session data available")))}const _m=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),kO=e=>{if(!e)return"-";if(e<60)return`${e}m`;const t=Math.floor(e/60),r=e%60;return r>0?`${t}h ${r}m`:`${t}h`},que=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,Gue=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500",Vh={live:"bg-green-100 text-green-700",notLive:"bg-gray-100 text-gray-600"},PO={OTO:"bg-purple-100 text-purple-700",OTM:"bg-gray-100 text-gray-700"},MO=[{value:"therapeutic",label:"Therapeutic"},{value:"mental_wellness",label:"Mental Wellness"},{value:"career",label:"Career"},{value:"relationships",label:"Relationships"},{value:"lifestyle",label:"Lifestyle"},{value:"other",label:"Other"}],IO={therapeutic:"bg-blue-100 text-blue-700",mental_wellness:"bg-green-100 text-green-700",career:"bg-amber-100 text-amber-700",relationships:"bg-pink-100 text-pink-700",lifestyle:"bg-indigo-100 text-indigo-700",other:"bg-gray-100 text-gray-700"},Hh={pending:{color:"bg-amber-100 text-amber-700",label:"Pending"},confirmed:{color:"bg-blue-100 text-blue-700",label:"Confirmed"},completed:{color:"bg-green-100 text-green-700",label:"Completed"},cancelled:{color:"bg-red-100 text-red-700",label:"Cancelled"},no_show:{color:"bg-gray-100 text-gray-700",label:"No Show"}},RO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",Yue=e=>e?new Date(e).toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";function Xue(){const{sessions:e,pagination:t,filters:r,isLoading:a,error:l,fetchSessions:o,createSession:d,getSessionById:h,updateSession:g,toggleSessionLive:p,deleteSession:x,searchSessions:E,updateFilters:C,resetFilters:O,changePage:_,clearError:P,bookings:k,bookingPagination:I,bookingFilters:F,isLoadingBookings:R,bookingError:Y,fetchBookings:j,updateBooking:z,updateBookingFilters:L,resetBookingFilters:q,changeBookingPage:V,clearBookingError:W}=Fue(),[H,$]=N.useState(!1),[ce,me]=N.useState(!1),[ae,J]=N.useState(!1),[se,Ee]=N.useState(null),[we,te]=N.useState(null),[K,ee]=N.useState(!1),[ge,le]=N.useState(!1),[Ce,ie]=N.useState(null),[de,$e]=N.useState("sessions"),[be,Xe]=N.useState(!1),[at,Le]=N.useState(r.search||""),[ve,Ue]=N.useState(r.isLive||""),[oe,qe]=N.useState(r.sessionType||""),[Ne,tt]=N.useState(r.category||""),[it,pt]=N.useState(F.status||""),[We,lt]=N.useState(F.sessionId||""),[Fe,mt]=N.useState(null),[$t,er]=N.useState(!1),tr=N.useCallback(()=>{ie(null),te(null),$(!0)},[]),ut=N.useCallback(async De=>{ie(null),ee(!0);try{const ot=await h(De._id);ot.success?(te(ot.data),$(!0)):alert(ot.error||"Failed to load session details")}catch{alert("An unexpected error occurred")}finally{ee(!1)}},[h]),At=N.useCallback(()=>{$(!1),ie(null),te(null)},[]),vr=N.useCallback(async De=>{le(!0),ie(null);try{let ot;return we?ot=await g(we._id,De):ot=await d(De),ot.success?ot:(ie(ot.error||"Failed to save session"),{success:!1})}catch{return ie("An unexpected error occurred"),{success:!1}}finally{le(!1)}},[d,g,we]),ur=N.useCallback(async De=>{Ee(De),me(!0),ee(!0);try{const ot=await h(De._id);ot.success&&Ee(ot.data)}catch(ot){console.error("[Sessions] Failed to fetch details:",ot)}finally{ee(!1)}},[h]),ea=N.useCallback(()=>{me(!1),Ee(null)},[]),kt=N.useCallback(async De=>{le(!0);try{const ot=await p(De._id,De.isLive);ot.success||alert(ot.error||"Failed to update session status")}catch{alert("An unexpected error occurred")}finally{le(!1)}},[p]),xe=N.useCallback(De=>{Ee(De),J(!0)},[]),Qe=N.useCallback(()=>{J(!1),Ee(null)},[]),st=N.useCallback(async()=>{if(se){le(!0);try{const De=await x(se._id);De.success?Qe():alert(De.error||"Failed to delete session")}catch{alert("An unexpected error occurred")}finally{le(!1)}}},[se,x,Qe]),Tt=N.useCallback(De=>{const ot=De.target.value;Le(ot),E(ot)},[E]),dr=N.useCallback(()=>{C({search:at,isLive:ve,sessionType:oe,category:Ne}),Xe(!1)},[at,ve,oe,Ne,C]),$a=N.useCallback(()=>{Le(""),Ue(""),qe(""),tt(""),O(),Xe(!1)},[O]),ta=N.useCallback(()=>{L({status:it,sessionId:We}),Xe(!1)},[it,We,L]),bt=N.useCallback(()=>{pt(""),lt(""),q(),Xe(!1)},[q]),Je=N.useCallback(async(De,ot)=>{er(!0);try{const Ja=await z(De,{status:ot});Ja.success||alert(Ja.error||"Failed to update booking status")}catch(Ja){console.error("[Sessions] Error updating booking:",Ja),alert("An unexpected error occurred")}finally{er(!1),mt(null)}},[z]),Lt=N.useCallback(()=>{de==="sessions"?o(t.currentPage):j(I.currentPage)},[de,o,j,t.currentPage,I.currentPage]),Lr=N.useMemo(()=>r.search||r.isLive!==""||r.sessionType||r.category,[r]),fe=N.useMemo(()=>F.status||F.sessionId,[F]);return N.useEffect(()=>{de==="bookings"&&j(1)},[de]),N.useEffect(()=>{de==="bookings"&&j(1)},[F]),n.createElement("div",{className:"space-y-4 sm:space-y-6"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},n.createElement("div",null,n.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900"},"Sessions"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Create and manage coaching sessions and bookings")),de==="sessions"&&n.createElement("button",{onClick:tr,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},n.createElement(Mr,{className:"h-5 w-5"}),n.createElement("span",null,"Create Session"))),n.createElement("div",{className:"bg-white rounded-xl shadow-sm"},n.createElement("div",{className:"flex border-b border-gray-200"},n.createElement("button",{onClick:()=>$e("sessions"),className:`flex-1 sm:flex-none px-6 py-3 text-sm font-medium transition-colors relative ${de==="sessions"?"text-gray-900":"text-gray-500 hover:text-gray-700"}`},n.createElement("div",{className:"flex items-center justify-center gap-2"},n.createElement(hi,{className:"h-4 w-4"}),n.createElement("span",null,"Sessions"),n.createElement("span",{className:"px-2 py-0.5 text-xs bg-gray-100 rounded-full"},t.totalCount)),de==="sessions"&&n.createElement("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-800"})),n.createElement("button",{onClick:()=>$e("bookings"),className:`flex-1 sm:flex-none px-6 py-3 text-sm font-medium transition-colors relative ${de==="bookings"?"text-gray-900":"text-gray-500 hover:text-gray-700"}`},n.createElement("div",{className:"flex items-center justify-center gap-2"},n.createElement(_U,{className:"h-4 w-4"}),n.createElement("span",null,"Bookings"),n.createElement("span",{className:"px-2 py-0.5 text-xs bg-gray-100 rounded-full"},I.totalCount)),de==="bookings"&&n.createElement("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-800"})))),(l||Y)&&n.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},n.createElement(Ir,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),n.createElement("div",{className:"flex-1"},n.createElement("p",{className:"text-sm font-medium text-red-800"},"Error loading ",l?"sessions":"bookings"),n.createElement("p",{className:"text-sm text-red-700 mt-0.5"},l||Y)),n.createElement("button",{onClick:l?P:W,className:"shrink-0 text-red-600 hover:text-red-800"},"")),n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},de==="sessions"?n.createElement(n.Fragment,null,n.createElement("div",{className:"relative flex-1 max-w-md"},n.createElement(ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.createElement("input",{type:"text",value:at,onChange:Tt,placeholder:"Search sessions...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),n.createElement("button",{onClick:()=>Xe(!be),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${Lr?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},n.createElement(Il,{className:"h-4 w-4"}),n.createElement("span",null,"Filters"),Lr&&n.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(r.search?1:0)+(r.isLive!==""?1:0)+(r.sessionType?1:0)+(r.category?1:0)),n.createElement(Ml,{className:`h-4 w-4 transition-transform ${be?"rotate-180":""}`}))):n.createElement(n.Fragment,null,n.createElement("button",{onClick:()=>Xe(!be),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${fe?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},n.createElement(Il,{className:"h-4 w-4"}),n.createElement("span",null,"Filters"),fe&&n.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(F.status?1:0)+(F.sessionId?1:0)),n.createElement(Ml,{className:`h-4 w-4 transition-transform ${be?"rotate-180":""}`}))),n.createElement("button",{onClick:Lt,disabled:a||R,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},n.createElement(os,{className:`h-4 w-4 ${a||R?"animate-spin":""}`}),n.createElement("span",{className:"hidden sm:inline"},"Refresh")),n.createElement("div",{className:"ml-auto text-sm text-gray-500"},de==="sessions"?n.createElement(n.Fragment,null,t.totalCount," session",t.totalCount!==1?"s":""," total"):n.createElement(n.Fragment,null,I.totalCount," booking",I.totalCount!==1?"s":""," total"))),be&&de==="sessions"&&n.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),n.createElement("select",{value:ve,onChange:De=>Ue(De.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"All Status"),n.createElement("option",{value:"true"},"Live"),n.createElement("option",{value:"false"},"Not Live"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Session Type"),n.createElement("select",{value:oe,onChange:De=>qe(De.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"All Types"),n.createElement("option",{value:"OTO"},"One-to-One (OTO)"),n.createElement("option",{value:"OTM"},"One-to-Many (OTM)"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Category"),n.createElement("select",{value:Ne,onChange:De=>tt(De.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"All Categories"),MO.map(De=>n.createElement("option",{key:De.value,value:De.value},De.label)))),n.createElement("div",{className:"flex items-end gap-2 sm:col-span-2"},n.createElement("button",{onClick:dr,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),n.createElement("button",{onClick:$a,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset")))),be&&de==="bookings"&&n.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Booking Status"),n.createElement("select",{value:it,onChange:De=>pt(De.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"All Status"),n.createElement("option",{value:"pending"},"Pending"),n.createElement("option",{value:"confirmed"},"Confirmed"),n.createElement("option",{value:"completed"},"Completed"),n.createElement("option",{value:"cancelled"},"Cancelled"),n.createElement("option",{value:"no_show"},"No Show"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Session"),n.createElement("select",{value:We,onChange:De=>lt(De.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"All Sessions"),e.map(De=>n.createElement("option",{key:De._id,value:De._id},De.title)))),n.createElement("div",{className:"flex items-end gap-2 sm:col-span-2"},n.createElement("button",{onClick:ta,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),n.createElement("button",{onClick:bt,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),de==="sessions"&&n.createElement(n.Fragment,null,n.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"w-full"},n.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},n.createElement("tr",null,n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Session"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Type"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Category"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Price"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Duration"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Host"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),n.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),n.createElement("tbody",null,a&&e.length===0?n.createElement("tr",null,n.createElement("td",{colSpan:8,className:"px-6 py-12 text-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading sessions..."))):e.length===0?n.createElement("tr",null,n.createElement("td",{colSpan:8,className:"px-6 py-12 text-center"},n.createElement(hi,{className:"h-12 w-12 text-gray-300 mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No sessions found"),n.createElement("button",{onClick:tr,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first session"))):e.map(De=>n.createElement("tr",{key:De._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"max-w-[200px]"},n.createElement("p",{className:"font-medium text-gray-900 truncate"},De.title),n.createElement("p",{className:"text-xs text-gray-500 truncate mt-0.5"},De.shortDescription))),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${PO[De.sessionType]}`},De.sessionType==="OTO"?"OTO":"OTM")),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${IO[De.category]||IO.other}`},MO.find(ot=>ot.value===De.category)?.label||"Other")),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center gap-1"},n.createElement("span",{className:"font-semibold text-gray-900"},_m(De.price)),De.compareAtPrice&&De.compareAtPrice>De.price&&n.createElement("span",{className:"text-xs text-gray-400 line-through"},_m(De.compareAtPrice)))),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center gap-1 text-gray-600"},n.createElement(Pa,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm"},kO(De.duration)))),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement("div",{className:"w-7 h-7 bg-gray-200 rounded-full flex items-center justify-center"},n.createElement(xi,{className:"h-4 w-4 text-gray-500"})),n.createElement("span",{className:"text-sm text-gray-700 truncate max-w-[100px]"},De.host))),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${De.isLive?Vh.live:Vh.notLive}`},De.isLive?"Live":"Not Live")),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center justify-end gap-1"},n.createElement("button",{onClick:()=>kt(De),disabled:ge,className:`p-2 rounded-lg transition-colors ${De.isLive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:De.isLive?"Set Not Live":"Set Live"},De.isLive?n.createElement(yi,{className:"h-5 w-5"}):n.createElement(Rl,{className:"h-5 w-5"})),n.createElement("button",{onClick:()=>ur(De),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},n.createElement(da,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>ut(De),disabled:K,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit session"},n.createElement(bn,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>xe(De),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},n.createElement(xr,{className:"h-4 w-4"}))))))))),t.totalPages>0&&n.createElement(aa,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:_,itemLabel:"sessions"})),n.createElement("div",{className:"md:hidden space-y-4"},a&&e.length===0?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading sessions...")):e.length===0?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},n.createElement(hi,{className:"h-12 w-12 text-gray-300 mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No sessions found"),n.createElement("button",{onClick:tr,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first session")):n.createElement(n.Fragment,null,e.map(De=>{const ot=que(De.bookedSlots||0,De.availableSlots);return n.createElement("div",{key:De._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},n.createElement("div",{className:"flex items-start justify-between gap-3"},n.createElement("div",{className:"min-w-0 flex-1"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${PO[De.sessionType]}`},De.sessionType),n.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${De.isLive?Vh.live:Vh.notLive}`},De.isLive?"Live":"Not Live")),n.createElement("p",{className:"font-medium text-gray-900 truncate"},De.title),n.createElement("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2"},De.shortDescription))),n.createElement("div",{className:"grid grid-cols-3 gap-2 text-center"},n.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},n.createElement("p",{className:"text-xs text-gray-500"},"Price"),n.createElement("p",{className:"font-semibold text-gray-900 text-sm"},_m(De.price))),n.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},n.createElement("p",{className:"text-xs text-gray-500"},"Duration"),n.createElement("p",{className:"font-semibold text-gray-900 text-sm"},kO(De.duration))),n.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},n.createElement("p",{className:"text-xs text-gray-500"},"Host"),n.createElement("p",{className:"font-semibold text-gray-900 text-sm truncate"},De.host))),De.sessionType==="OTM"&&De.availableSlots&&n.createElement("div",null,n.createElement("div",{className:"flex items-center justify-between text-xs mb-1"},n.createElement("span",{className:"text-gray-600"},De.bookedSlots||0," / ",De.availableSlots," booked"),n.createElement("span",{className:"text-gray-400"},ot,"%")),n.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},n.createElement("div",{className:`h-2 rounded-full ${Gue(ot)}`,style:{width:`${ot}%`}}))),n.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},n.createElement("button",{onClick:()=>kt(De),disabled:ge,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${De.isLive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},De.isLive?n.createElement(n.Fragment,null,n.createElement(yi,{className:"h-4 w-4"}),"Live"):n.createElement(n.Fragment,null,n.createElement(Rl,{className:"h-4 w-4"}),"Off")),n.createElement("button",{onClick:()=>ur(De),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},n.createElement(da,{className:"h-4 w-4"}),"Details"),n.createElement("button",{onClick:()=>ut(De),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors"},n.createElement(bn,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>xe(De),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},n.createElement(xr,{className:"h-4 w-4"}))))}),t.totalPages>0&&n.createElement("div",{className:"bg-white rounded-xl shadow-sm"},n.createElement(aa,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:_,itemLabel:"sessions"}))))),de==="bookings"&&n.createElement(n.Fragment,null,n.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"w-full"},n.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},n.createElement("tr",null,n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"User"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Session"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Scheduled Date"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Amount"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Booked On"),n.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),n.createElement("tbody",null,R&&k.length===0?n.createElement("tr",null,n.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading bookings..."))):k.length===0?n.createElement("tr",null,n.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},n.createElement(mh,{className:"h-12 w-12 text-gray-300 mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No bookings found"))):k.map(De=>n.createElement("tr",{key:De._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center"},n.createElement(xi,{className:"h-4 w-4 text-gray-500"})),n.createElement("div",{className:"min-w-0"},n.createElement("p",{className:"font-medium text-gray-900 truncate max-w-[150px]"},De.userId?.name||"Unknown User"),n.createElement("p",{className:"text-xs text-gray-500 truncate max-w-[150px]"},De.userId?.email||"-")))),n.createElement("td",{className:"px-6 py-4"},n.createElement("p",{className:"font-medium text-gray-900 truncate max-w-[180px]"},De.sessionId?.title||"Unknown Session"),n.createElement("p",{className:"text-xs text-gray-500"},De.sessionId?.sessionType||"-")),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center gap-1 text-gray-600"},n.createElement(Qr,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm"},Yue(De.scheduledSlot)))),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:"font-semibold text-gray-900"},_m(De.amountPaid))),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Hh[De.status]?.color||"bg-gray-100 text-gray-700"}`},Hh[De.status]?.label||De.status)),n.createElement("td",{className:"px-6 py-4 text-sm text-gray-500"},RO(De.createdAt)),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center justify-end gap-1"},De.status==="pending"&&n.createElement(n.Fragment,null,n.createElement("button",{onClick:()=>Je(De._id,"confirmed"),disabled:$t,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Confirm"},n.createElement(Ds,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>Je(De._id,"cancelled"),disabled:$t,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Cancel"},n.createElement(Ia,{className:"h-4 w-4"}))),De.status==="confirmed"&&n.createElement(n.Fragment,null,n.createElement("button",{onClick:()=>Je(De._id,"completed"),disabled:$t,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Mark Completed"},n.createElement(Ds,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>Je(De._id,"no_show"),disabled:$t,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",title:"No Show"},n.createElement(mh,{className:"h-4 w-4"})))))))))),I.totalPages>0&&n.createElement(aa,{currentPage:I.currentPage,totalPages:I.totalPages,totalItems:I.totalCount,itemsPerPage:I.limit,onPageChange:V,itemLabel:"bookings"})),n.createElement("div",{className:"md:hidden space-y-4"},R&&k.length===0?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading bookings...")):k.length===0?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},n.createElement(mh,{className:"h-12 w-12 text-gray-300 mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No bookings found")):n.createElement(n.Fragment,null,k.map(De=>n.createElement("div",{key:De._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},n.createElement("div",{className:"flex items-start justify-between gap-3"},n.createElement("div",{className:"min-w-0 flex-1"},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Hh[De.status]?.color||"bg-gray-100 text-gray-700"}`},Hh[De.status]?.label||De.status)),n.createElement("p",{className:"font-medium text-gray-900 truncate"},De.userId?.name||"Unknown User"),n.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},De.userId?.email||"-"))),n.createElement("div",{className:"p-2 bg-gray-50 rounded-lg"},n.createElement("p",{className:"text-xs text-gray-500"},"Session"),n.createElement("p",{className:"font-medium text-gray-900 text-sm truncate"},De.sessionId?.title||"Unknown Session")),n.createElement("div",{className:"grid grid-cols-2 gap-2 text-center"},n.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},n.createElement("p",{className:"text-xs text-gray-500"},"Scheduled"),n.createElement("p",{className:"font-semibold text-gray-900 text-sm"},RO(De.scheduledSlot))),n.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},n.createElement("p",{className:"text-xs text-gray-500"},"Amount"),n.createElement("p",{className:"font-semibold text-gray-900 text-sm"},_m(De.amountPaid)))),(De.status==="pending"||De.status==="confirmed")&&n.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},De.status==="pending"&&n.createElement(n.Fragment,null,n.createElement("button",{onClick:()=>Je(De._id,"confirmed"),disabled:$t,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors"},n.createElement(Ds,{className:"h-4 w-4"}),"Confirm"),n.createElement("button",{onClick:()=>Je(De._id,"cancelled"),disabled:$t,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors"},n.createElement(Ia,{className:"h-4 w-4"}),"Cancel")),De.status==="confirmed"&&n.createElement(n.Fragment,null,n.createElement("button",{onClick:()=>Je(De._id,"completed"),disabled:$t,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors"},n.createElement(Ds,{className:"h-4 w-4"}),"Complete"),n.createElement("button",{onClick:()=>Je(De._id,"no_show"),disabled:$t,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},n.createElement(mh,{className:"h-4 w-4"}),"No Show"))))),I.totalPages>0&&n.createElement("div",{className:"bg-white rounded-xl shadow-sm"},n.createElement(aa,{currentPage:I.currentPage,totalPages:I.totalPages,totalItems:I.totalCount,itemsPerPage:I.limit,onPageChange:V,itemLabel:"bookings"}))))),n.createElement(jue,{isOpen:H,onClose:At,onSubmit:vr,isLoading:ge,serverError:Ce,sessionToEdit:we}),n.createElement($ue,{isOpen:ce,onClose:ea,session:se,isLoading:K}),n.createElement(Wa,{isOpen:ae,onClose:Qe,onConfirm:st,title:"Delete Session",message:`Are you sure you want to delete the session "${se?.title}"? This action can be undone by restoring from deleted sessions.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:ge}))}const Dm={BASE:"/web/sos/quizzes",GET_BY_ID:e=>`/web/sos/quizzes/${e}`,UPDATE:e=>`/web/sos/quizzes/${e}`,DELETE:e=>`/web/sos/quizzes/${e}`},km={getAll:async(e={})=>{const{page:t=1,limit:r=10,sortBy:a="createdAt",sortOrder:l="desc",programId:o="",dayNumber:d="",isActive:h=""}=e,g=new URLSearchParams;g.append("page",t.toString()),g.append("limit",r.toString()),g.append("sortBy",a),g.append("sortOrder",l),o&&g.append("programId",o),d&&g.append("dayNumber",d.toString()),h!==""&&g.append("isActive",h);const p=`${Dm.BASE}?${g.toString()}`;return console.log("[SOSQuizService] Fetching quizzes:",p),ze(je.get(p))},getById:async e=>e?(console.log("[SOSQuizService] Fetching quiz:",e),ze(je.get(Dm.GET_BY_ID(e)))):(console.error("[SOSQuizService] getById: No ID provided"),{success:!1,error:"Quiz ID is required"}),create:async e=>(console.log("[SOSQuizService] Creating quiz:",e.title,"for program:",e.programId,"day:",e.dayNumber),e.programId?e.dayNumber?ze(je.post(Dm.BASE,e)):(console.error("[SOSQuizService] create: No dayNumber provided"),{success:!1,error:"Day number is required"}):(console.error("[SOSQuizService] create: No programId provided"),{success:!1,error:"Program ID is required"})),update:async(e,t)=>{if(!e)return console.error("[SOSQuizService] update: No ID provided"),{success:!1,error:"Quiz ID is required"};console.log("[SOSQuizService] Updating quiz:",e);const{programId:r,dayNumber:a,...l}=t;return(r||a)&&console.warn("[SOSQuizService] Ignoring programId and dayNumber in update - these cannot be changed"),ze(je.put(Dm.UPDATE(e),l))},delete:async e=>e?(console.log("[SOSQuizService] Deleting quiz:",e),ze(je.delete(Dm.DELETE(e)))):(console.error("[SOSQuizService] delete: No ID provided"),{success:!1,error:"Quiz ID is required"}),buildQuestion:e=>{const{questionText:t,questionType:r,options:a=[],points:l=5}=e,o={questionText:t,questionType:r,points:l};return(r==="scale"||r==="single-choice"||r==="multiple-choice")&&(o.options=a.map((d,h)=>({text:d.text,value:d.value??h+1}))),o}};function Wue(e={}){const[t,r]=N.useState([]),[a,l]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[o,d]=N.useState({programId:"",dayNumber:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e}),[h,g]=N.useState(!1),[p,x]=N.useState(null),E=N.useRef(null),C=N.useCallback(async(L=a.currentPage)=>{g(!0),x(null);try{const q={page:L,limit:a.limit,sortBy:o.sortBy,sortOrder:o.sortOrder,...o.programId&&{programId:o.programId},...o.dayNumber&&{dayNumber:o.dayNumber},...o.isActive!==""&&{isActive:o.isActive}};console.log("[useSOSQuizzes] Fetching quizzes with params:",q);const V=await km.getAll(q);V.success?(r(V.data.quizzes||[]),l({currentPage:V.data.pagination?.currentPage||1,totalPages:V.data.pagination?.totalPages||0,totalCount:V.data.pagination?.totalCount||0,limit:V.data.pagination?.limit||10}),console.log("[useSOSQuizzes] Fetched quizzes:",V.data.quizzes?.length)):(console.error("[useSOSQuizzes] Failed to fetch quizzes:",V.message),x(V.message||"Failed to fetch quizzes"),r([]))}catch(q){console.error("[useSOSQuizzes] Error fetching quizzes:",q),x("Failed to fetch quizzes"),r([])}finally{g(!1)}},[o,a.limit]),O=N.useCallback(async L=>{try{console.log("[useSOSQuizzes] Creating quiz:",L.title,"for program:",L.programId);const q=await km.create(L);return q.success?(console.log("[useSOSQuizzes] Quiz created successfully"),await C(1),{success:!0,data:q.data}):(console.error("[useSOSQuizzes] Failed to create quiz:",q.message),{success:!1,error:q.message,validationErrors:q.error})}catch(q){return console.error("[useSOSQuizzes] Error creating quiz:",q),{success:!1,error:"Failed to create quiz"}}},[C]),_=N.useCallback(async L=>{try{console.log("[useSOSQuizzes] Fetching quiz by ID:",L);const q=await km.getById(L);return q.success?{success:!0,data:q.data.quiz}:(console.error("[useSOSQuizzes] Failed to fetch quiz:",q.message),{success:!1,error:q.message})}catch(q){return console.error("[useSOSQuizzes] Error fetching quiz:",q),{success:!1,error:"Failed to fetch quiz details"}}},[]),P=N.useCallback(async(L,q)=>{try{console.log("[useSOSQuizzes] Updating quiz:",L);const V=await km.update(L,q);return V.success?(console.log("[useSOSQuizzes] Quiz updated successfully"),r(W=>W.map(H=>H._id===L?{...H,...V.data.quiz}:H)),{success:!0,data:V.data}):(console.error("[useSOSQuizzes] Failed to update quiz:",V.message),{success:!1,error:V.message,validationErrors:V.error})}catch(V){return console.error("[useSOSQuizzes] Error updating quiz:",V),{success:!1,error:"Failed to update quiz"}}},[]),k=N.useCallback(async L=>{try{console.log("[useSOSQuizzes] Deleting quiz:",L);const q=await km.delete(L);return q.success?(console.log("[useSOSQuizzes] Quiz deleted successfully"),r(V=>V.filter(W=>W._id!==L)),l(V=>({...V,totalCount:V.totalCount-1,totalPages:Math.ceil((V.totalCount-1)/V.limit)})),{success:!0}):(console.error("[useSOSQuizzes] Failed to delete quiz:",q.message),{success:!1,error:q.message})}catch(q){return console.error("[useSOSQuizzes] Error deleting quiz:",q),{success:!1,error:"Failed to delete quiz"}}},[]),I=N.useCallback(L=>{E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{d(q=>({...q,programId:L}))},300)},[]),F=N.useCallback(L=>{d(q=>({...q,...L}))},[]),R=N.useCallback(()=>{d({programId:"",dayNumber:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),Y=N.useCallback(L=>{C(L)},[C]),j=N.useCallback(L=>{l(q=>({...q,limit:L}))},[]),z=N.useCallback(()=>{x(null)},[]);return N.useEffect(()=>{C(1)},[o]),N.useEffect(()=>()=>{E.current&&clearTimeout(E.current)},[]),{quizzes:t,pagination:a,filters:o,isLoading:h,error:p,fetchQuizzes:C,createQuiz:O,getQuizById:_,updateQuiz:P,deleteQuiz:k,filterByProgram:I,updateFilters:F,resetFilters:R,changePage:Y,changeLimit:j,clearError:z}}const xo={BASE:"/web/sos/programs",GET_BY_ID:e=>`/web/sos/programs/${e}`,UPDATE:e=>`/web/sos/programs/${e}`,DELETE:e=>`/web/sos/programs/${e}`,TOGGLE_STATUS:e=>`/web/sos/programs/${e}/toggle-status`,STATS:e=>`/web/sos/programs/${e}/stats`,QUIZZES:e=>`/web/sos/programs/${e}/quizzes`},bo={getAll:async(e={})=>{const{page:t=1,limit:r=10,sortBy:a="createdAt",sortOrder:l="desc",type:o="",isActive:d="",search:h=""}=e,g=new URLSearchParams;g.append("page",t.toString()),g.append("limit",r.toString()),g.append("sortBy",a),g.append("sortOrder",l),o&&g.append("type",o),d!==""&&g.append("isActive",d),h&&g.append("search",h);const p=`${xo.BASE}?${g.toString()}`;return console.log("[SOSProgramService] Fetching programs:",p),ze(je.get(p))},getById:async e=>e?(console.log("[SOSProgramService] Fetching program:",e),ze(je.get(xo.GET_BY_ID(e)))):(console.error("[SOSProgramService] getById: No ID provided"),{success:!1,error:"Program ID is required"}),create:async e=>(console.log("[SOSProgramService] Creating program:",e.title),ze(je.post(xo.BASE,e))),update:async(e,t)=>e?(console.log("[SOSProgramService] Updating program:",e),ze(je.put(xo.UPDATE(e),t))):(console.error("[SOSProgramService] update: No ID provided"),{success:!1,error:"Program ID is required"}),delete:async e=>e?(console.log("[SOSProgramService] Deleting program:",e),ze(je.delete(xo.DELETE(e)))):(console.error("[SOSProgramService] delete: No ID provided"),{success:!1,error:"Program ID is required"}),toggleStatus:async e=>e?(console.log("[SOSProgramService] Toggling status for program:",e),ze(je.patch(xo.TOGGLE_STATUS(e)))):(console.error("[SOSProgramService] toggleStatus: No ID provided"),{success:!1,error:"Program ID is required"}),getStats:async e=>e?(console.log("[SOSProgramService] Fetching stats for program:",e),ze(je.get(xo.STATS(e)))):(console.error("[SOSProgramService] getStats: No ID provided"),{success:!1,error:"Program ID is required"}),getQuizzes:async e=>e?(console.log("[SOSProgramService] Fetching quizzes for program:",e),ze(je.get(xo.QUIZZES(e)))):(console.error("[SOSProgramService] getQuizzes: No ID provided"),{success:!1,error:"Program ID is required"})};function Kue(e={}){const[t,r]=N.useState([]),[a,l]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[o,d]=N.useState({search:"",type:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e}),[h,g]=N.useState(!1),[p,x]=N.useState(null),E=N.useRef(null),C=N.useCallback(async(W=a.currentPage)=>{g(!0),x(null);try{const H={page:W,limit:a.limit,sortBy:o.sortBy,sortOrder:o.sortOrder,...o.search&&{search:o.search},...o.type&&{type:o.type},...o.isActive!==""&&{isActive:o.isActive}};console.log("[useSOSPrograms] Fetching programs with params:",H);const $=await bo.getAll(H);$.success?(r($.data.programs||[]),l({currentPage:$.data.pagination?.currentPage||1,totalPages:$.data.pagination?.totalPages||0,totalCount:$.data.pagination?.totalCount||0,limit:$.data.pagination?.limit||10}),console.log("[useSOSPrograms] Fetched programs:",$.data.programs?.length)):(console.error("[useSOSPrograms] Failed to fetch programs:",$.message),x($.message||"Failed to fetch programs"),r([]))}catch(H){console.error("[useSOSPrograms] Error fetching programs:",H),x("Failed to fetch programs"),r([])}finally{g(!1)}},[o,a.limit]),O=N.useCallback(async W=>{try{console.log("[useSOSPrograms] Creating program:",W.title);const H=await bo.create(W);return H.success?(console.log("[useSOSPrograms] Program created successfully"),await C(1),{success:!0,data:H.data}):(console.error("[useSOSPrograms] Failed to create program:",H.message),{success:!1,error:H.message,validationErrors:H.error})}catch(H){return console.error("[useSOSPrograms] Error creating program:",H),{success:!1,error:"Failed to create program"}}},[C]),_=N.useCallback(async W=>{try{console.log("[useSOSPrograms] Fetching program by ID:",W);const H=await bo.getById(W);return H.success?{success:!0,data:H.data.program}:(console.error("[useSOSPrograms] Failed to fetch program:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useSOSPrograms] Error fetching program:",H),{success:!1,error:"Failed to fetch program details"}}},[]),P=N.useCallback(async W=>{try{console.log("[useSOSPrograms] Fetching stats for program:",W);const H=await bo.getStats(W);return H.success?{success:!0,data:H.data}:(console.error("[useSOSPrograms] Failed to fetch program stats:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useSOSPrograms] Error fetching program stats:",H),{success:!1,error:"Failed to fetch program statistics"}}},[]),k=N.useCallback(async W=>{try{console.log("[useSOSPrograms] Fetching quizzes for program:",W);const H=await bo.getQuizzes(W);return H.success?{success:!0,data:H.data}:(console.error("[useSOSPrograms] Failed to fetch program quizzes:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useSOSPrograms] Error fetching program quizzes:",H),{success:!1,error:"Failed to fetch program quizzes"}}},[]),I=N.useCallback(async(W,H)=>{try{console.log("[useSOSPrograms] Updating program:",W);const $=await bo.update(W,H);return $.success?(console.log("[useSOSPrograms] Program updated successfully"),r(ce=>ce.map(me=>me._id===W?{...me,...$.data.program}:me)),{success:!0,data:$.data}):(console.error("[useSOSPrograms] Failed to update program:",$.message),{success:!1,error:$.message,validationErrors:$.error})}catch($){return console.error("[useSOSPrograms] Error updating program:",$),{success:!1,error:"Failed to update program"}}},[]),F=N.useCallback(async(W,H)=>{try{console.log("[useSOSPrograms] Toggling status for program:",W);const $=await bo.toggleStatus(W);return $.success?(console.log("[useSOSPrograms] Program status toggled successfully"),r(ce=>ce.map(me=>me._id===W?{...me,isActive:!H}:me)),{success:!0}):(console.error("[useSOSPrograms] Failed to toggle program status:",$.message),{success:!1,error:$.message})}catch($){return console.error("[useSOSPrograms] Error toggling program status:",$),{success:!1,error:"Failed to update program status"}}},[]),R=N.useCallback(async W=>{try{console.log("[useSOSPrograms] Deleting program:",W);const H=await bo.delete(W);return H.success?(console.log("[useSOSPrograms] Program deleted successfully"),r($=>$.filter(ce=>ce._id!==W)),l($=>({...$,totalCount:$.totalCount-1,totalPages:Math.ceil(($.totalCount-1)/$.limit)})),{success:!0}):(console.error("[useSOSPrograms] Failed to delete program:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useSOSPrograms] Error deleting program:",H),{success:!1,error:"Failed to delete program"}}},[]),Y=N.useCallback(W=>{E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{d(H=>({...H,search:W}))},300)},[]),j=N.useCallback(W=>{d(H=>({...H,...W}))},[]),z=N.useCallback(()=>{d({search:"",type:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),L=N.useCallback(W=>{C(W)},[C]),q=N.useCallback(W=>{l(H=>({...H,limit:W}))},[]),V=N.useCallback(()=>{x(null)},[]);return N.useEffect(()=>{C(1)},[o]),N.useEffect(()=>()=>{E.current&&clearTimeout(E.current)},[]),{programs:t,pagination:a,filters:o,isLoading:h,error:p,fetchPrograms:C,createProgram:O,getProgramById:_,getProgramStats:P,getProgramQuizzes:k,updateProgram:I,toggleProgramStatus:F,deleteProgram:R,searchPrograms:Y,updateFilters:j,resetFilters:z,changePage:L,changeLimit:q,clearError:V}}const LO=()=>({programId:"",dayNumber:"",title:"",description:"",questions:[],isActive:!0}),Zue=()=>({questionText:"",questionType:"single-choice",options:[{text:"",value:1},{text:"",value:2}],points:5}),Que=[{value:"scale",label:"Scale (1-5)",description:"Rating scale from 1 to 5"},{value:"single-choice",label:"Single Choice",description:"Choose one option"},{value:"multiple-choice",label:"Multiple Choice",description:"Select multiple options"},{value:"boolean",label:"Yes/No",description:"True or false question"},{value:"text",label:"Text",description:"Free text response"}];function Jue({isOpen:e,onClose:t,onSubmit:r,isLoading:a=!1,serverError:l=null,quizToEdit:o=null,programs:d=[],selectedProgram:h=null}){const[g,p]=N.useState(LO()),[x,E]=N.useState({}),[C,O]=N.useState("basic"),_=!!o,P=d.find(V=>V._id===g.programId)||h;N.useEffect(()=>{e&&(p(o?{programId:o.programId?._id||o.programId||"",dayNumber:o.dayNumber?.toString()||"",title:o.title||"",description:o.description||"",questions:o.questions?.map(V=>({questionText:V.questionText||"",questionType:V.questionType||"single-choice",options:V.options||[{text:"",value:1},{text:"",value:2}],points:V.points||5}))||[],isActive:o.isActive??!0}:{...LO(),programId:h?._id||""}),E({}),O("basic"))},[e,o,h]);const k=V=>{const W={};if(!_&&!V.programId&&(W.programId="Please select a program"),!_)if(!V.dayNumber)W.dayNumber="Day number is required";else{const H=parseInt(V.dayNumber,10);isNaN(H)||H<1?W.dayNumber="Day number must be at least 1":P&&H>P.durationDays&&(W.dayNumber=`Day number cannot exceed program duration (${P.durationDays} days)`)}if(V.title.trim()?V.title.length>200&&(W.title="Title must be less than 200 characters"):W.title="Title is required",V.questions.length===0)W.questions="At least one question is required";else{const H=[];V.questions.forEach(($,ce)=>{const me={};$.questionText.trim()||(me.questionText="Question text is required"),($.questionType==="scale"||$.questionType==="single-choice"||$.questionType==="multiple-choice")&&$.options&&($.options.some(J=>!J.text.trim())&&(me.options="All options must have text"),$.options.length<2&&(me.options="At least 2 options are required")),Object.keys(me).length>0&&(H[ce]=me)}),(H.length>0||Object.keys(H).some($=>H[$]))&&(W.questionErrors=H)}return{isValid:Object.keys(W).length===0,errors:W}},I=(V,W)=>{p(H=>({...H,[V]:W})),x[V]&&E(H=>{const $={...H};return delete $[V],$})},F=()=>{p(V=>({...V,questions:[...V.questions,Zue()]}))},R=V=>{p(W=>({...W,questions:W.questions.filter((H,$)=>$!==V)}))},Y=(V,W,H)=>{p($=>({...$,questions:$.questions.map((ce,me)=>{if(me!==V)return ce;const ae={...ce,[W]:H};return W==="questionType"&&(H==="scale"?ae.options=[{text:"Very Bad",value:1},{text:"Bad",value:2},{text:"Neutral",value:3},{text:"Good",value:4},{text:"Very Good",value:5}]:H==="single-choice"||H==="multiple-choice"?ae.options=[{text:"",value:1},{text:"",value:2}]:(H==="boolean"||H==="text")&&(ae.options=[])),ae})}))},j=V=>{p(W=>({...W,questions:W.questions.map((H,$)=>$!==V?H:{...H,options:[...H.options,{text:"",value:H.options.length+1}]})}))},z=(V,W)=>{p(H=>({...H,questions:H.questions.map(($,ce)=>ce!==V?$:{...$,options:$.options.filter((me,ae)=>ae!==W).map((me,ae)=>({...me,value:ae+1}))})}))},L=(V,W,H)=>{p($=>({...$,questions:$.questions.map((ce,me)=>me!==V?ce:{...ce,options:ce.options.map((ae,J)=>J!==W?ae:{...ae,text:H})})}))},q=async V=>{V.preventDefault();const{isValid:W,errors:H}=k(g);if(!W){E(H),(H.questions||H.questionErrors)&&O("questions");return}const $={title:g.title.trim(),description:g.description.trim(),questions:g.questions.map(me=>({questionText:me.questionText.trim(),questionType:me.questionType,points:me.points,...me.questionType==="scale"||me.questionType==="single-choice"||me.questionType==="multiple-choice"?{options:me.options.map(ae=>({text:ae.text.trim(),value:ae.value}))}:{}})),isActive:g.isActive};_||($.programId=g.programId,$.dayNumber=parseInt(g.dayNumber,10)),console.log("[SOSQuizForm] Submitting data:",$),(await r($))?.success&&t()};return n.createElement(br,{isOpen:e,onClose:t,title:_?"Edit SOS Quiz":"Create SOS Quiz",size:"xl"},n.createElement("form",{onSubmit:q,className:"space-y-4"},n.createElement("div",{className:"flex border-b border-gray-200"},n.createElement("button",{type:"button",onClick:()=>O("basic"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${C==="basic"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`},"Basic Info"),n.createElement("button",{type:"button",onClick:()=>O("questions"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${C==="questions"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`},"Questions (",g.questions.length,")")),n.createElement("div",{className:"max-h-[60vh] overflow-y-auto pr-2"},C==="basic"?n.createElement("div",{className:"space-y-4"},!_&&n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Program ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("select",{value:g.programId,onChange:V=>I("programId",V.target.value),disabled:a||h,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${x.programId?"border-red-500":"border-gray-300"} ${a||h?"bg-gray-100":""}`},n.createElement("option",{value:""},"Select a program"),d.map(V=>n.createElement("option",{key:V._id,value:V._id},V.title," (",V.durationDays," days)"))),x.programId&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},x.programId)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Day Number ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"number",value:g.dayNumber,onChange:V=>I("dayNumber",V.target.value),placeholder:"e.g., 1",min:"1",max:P?.durationDays||365,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${x.dayNumber?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),x.dayNumber&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},x.dayNumber),P&&n.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Program duration: ",P.durationDays," days"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Quiz Title ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",value:g.title,onChange:V=>I("title",V.target.value),placeholder:"e.g., Day 1: Introduction to Mindfulness",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${x.title?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),x.title&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},x.title)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Description",n.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),n.createElement("textarea",{value:g.description,onChange:V=>I("description",V.target.value),placeholder:"Brief description of this day's activities...",rows:3,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors border-gray-300 ${a?"bg-gray-100":""}`})),n.createElement("div",{className:"flex items-center gap-3"},n.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},n.createElement("input",{type:"checkbox",checked:g.isActive,onChange:V=>I("isActive",V.target.checked),disabled:a,className:"sr-only peer"}),n.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})),n.createElement("span",{className:"text-sm text-gray-700"},g.isActive?"Active":"Inactive"))):n.createElement("div",{className:"space-y-4"},x.questions&&n.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg"},n.createElement("p",{className:"text-sm text-red-700"},x.questions)),g.questions.length===0?n.createElement("div",{className:"p-8 text-center border-2 border-dashed border-gray-200 rounded-lg"},n.createElement("p",{className:"text-gray-500 mb-3"},"No questions added yet"),n.createElement("button",{type:"button",onClick:F,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},n.createElement(Mr,{className:"h-4 w-4"}),"Add Question")):n.createElement(n.Fragment,null,g.questions.map((V,W)=>n.createElement("div",{key:W,className:"p-4 border border-gray-200 rounded-lg space-y-3"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement(_p,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"font-medium text-gray-700"},"Question ",W+1)),n.createElement("button",{type:"button",onClick:()=>R(W),className:"p-1 text-red-500 hover:bg-red-50 rounded"},n.createElement(xr,{className:"h-4 w-4"}))),n.createElement("div",null,n.createElement("input",{type:"text",value:V.questionText,onChange:H=>Y(W,"questionText",H.target.value),placeholder:"Enter your question...",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${x.questionErrors?.[W]?.questionText?"border-red-500":"border-gray-300"}`}),x.questionErrors?.[W]?.questionText&&n.createElement("p",{className:"text-red-600 text-xs mt-1"},x.questionErrors[W].questionText)),n.createElement("div",{className:"grid grid-cols-2 gap-3"},n.createElement("div",null,n.createElement("label",{className:"block text-xs font-medium text-gray-600 mb-1"},"Type"),n.createElement("select",{value:V.questionType,onChange:H=>Y(W,"questionType",H.target.value),disabled:a,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},Que.map(H=>n.createElement("option",{key:H.value,value:H.value},H.label)))),n.createElement("div",null,n.createElement("label",{className:"block text-xs font-medium text-gray-600 mb-1"},"Points"),n.createElement("input",{type:"number",value:V.points,onChange:H=>Y(W,"points",parseInt(H.target.value)||0),min:"0",max:"100",disabled:a,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}))),(V.questionType==="scale"||V.questionType==="single-choice"||V.questionType==="multiple-choice")&&n.createElement("div",{className:"space-y-2"},n.createElement("label",{className:"block text-xs font-medium text-gray-600"},"Options"),V.options.map((H,$)=>n.createElement("div",{key:$,className:"flex items-center gap-2"},n.createElement("span",{className:"text-xs text-gray-400 w-6"},$+1,"."),n.createElement("input",{type:"text",value:H.text,onChange:ce=>L(W,$,ce.target.value),placeholder:`Option ${$+1}`,disabled:a||V.questionType==="scale",className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),(V.questionType==="single-choice"||V.questionType==="multiple-choice")&&V.options.length>2&&n.createElement("button",{type:"button",onClick:()=>z(W,$),className:"p-1 text-red-500 hover:bg-red-50 rounded"},n.createElement(xr,{className:"h-3 w-3"})))),(V.questionType==="single-choice"||V.questionType==="multiple-choice")&&n.createElement("button",{type:"button",onClick:()=>j(W),className:"text-xs text-gray-600 hover:text-gray-800 flex items-center gap-1"},n.createElement(Mr,{className:"h-3 w-3"}),"Add Option"),x.questionErrors?.[W]?.options&&n.createElement("p",{className:"text-red-600 text-xs"},x.questionErrors[W].options)))),n.createElement("button",{type:"button",onClick:F,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2"},n.createElement(Mr,{className:"h-4 w-4"}),"Add Question")))),l&&n.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},n.createElement(Ir,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),n.createElement("p",{className:"text-sm text-red-700"},l)),n.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:t,disabled:a,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50"},"Cancel"),n.createElement("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50"},a?n.createElement(n.Fragment,null,n.createElement(xt,{className:"h-4 w-4 animate-spin"}),n.createElement("span",null,_?"Updating...":"Creating...")):n.createElement("span",null,_?"Update Quiz":"Create Quiz")))))}const BO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",ede={scale:"Scale (1-5)","single-choice":"Single Choice","multiple-choice":"Multiple Choice",boolean:"Yes/No",text:"Text Response"},tde={scale:Wu,"single-choice":O2,"multiple-choice":mz,boolean:Rl,text:bz};function rde({isOpen:e,onClose:t,quiz:r,isLoading:a=!1}){if(!e)return null;const l=r?.questions?.reduce((o,d)=>o+(d.points||0),0)||0;return n.createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto"},n.createElement("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:t}),n.createElement("div",{className:"relative min-h-full flex items-center justify-center p-4"},n.createElement("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden"},n.createElement("div",{className:"flex items-center justify-between p-6 border-b border-gray-200"},n.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Quiz Details"),n.createElement("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"},n.createElement(Ia,{className:"h-5 w-5"}))),n.createElement("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},a?n.createElement("div",{className:"flex flex-col items-center justify-center py-12"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading quiz details...")):r?n.createElement("div",{className:"space-y-6"},n.createElement("div",null,n.createElement("div",{className:"flex items-center gap-2 mb-2"},n.createElement("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isActive?"Active":"Inactive"),r.dayNumber&&n.createElement("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700"},"Day ",r.dayNumber)),n.createElement("h3",{className:"text-xl font-semibold text-gray-900"},r.title)),r.programId&&n.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},n.createElement("p",{className:"text-xs text-gray-500 mb-1"},"Program"),n.createElement("p",{className:"font-medium text-gray-900"},r.programId.title||r.programId)),r.description&&n.createElement("div",null,n.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-1"},"Description"),n.createElement("p",{className:"text-gray-600 whitespace-pre-wrap"},r.description)),n.createElement("div",{className:"grid grid-cols-3 gap-4"},n.createElement("div",{className:"bg-blue-50 rounded-lg p-4 text-center"},n.createElement(Jh,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),n.createElement("p",{className:"text-2xl font-bold text-blue-700"},r.questions?.length||r.questionCount||0),n.createElement("p",{className:"text-xs text-blue-600"},"Questions")),n.createElement("div",{className:"bg-amber-50 rounded-lg p-4 text-center"},n.createElement(Wu,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),n.createElement("p",{className:"text-2xl font-bold text-amber-700"},l),n.createElement("p",{className:"text-xs text-amber-600"},"Total Points")),n.createElement("div",{className:"bg-gray-50 rounded-lg p-4 text-center"},n.createElement(Qr,{className:"h-5 w-5 text-gray-500 mx-auto mb-1"}),n.createElement("p",{className:"text-lg font-semibold text-gray-900"},"Day ",r.dayNumber||"-"),n.createElement("p",{className:"text-xs text-gray-500"},"Program Day"))),r.questions&&r.questions.length>0&&n.createElement("div",null,n.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},n.createElement(Jh,{className:"h-4 w-4"}),"Questions"),n.createElement("div",{className:"space-y-3"},r.questions.map((o,d)=>{const h=tde[o.questionType]||Jh;return n.createElement("div",{key:d,className:"p-3 border border-gray-200 rounded-lg"},n.createElement("div",{className:"flex items-start gap-3"},n.createElement("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-xs font-medium text-gray-600"},d+1),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("p",{className:"text-gray-900 font-medium"},o.questionText),n.createElement("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500"},n.createElement("span",{className:"flex items-center gap-1"},n.createElement(h,{className:"h-3 w-3"}),ede[o.questionType]||o.questionType),n.createElement("span",{className:"flex items-center gap-1"},n.createElement(Wu,{className:"h-3 w-3"}),o.points," pts")),o.options&&o.options.length>0&&n.createElement("div",{className:"mt-2 space-y-1"},o.options.map((g,p)=>n.createElement("div",{key:p,className:"flex items-center gap-2 text-sm text-gray-600"},n.createElement("span",{className:`w-4 h-4 border border-gray-300 flex-shrink-0 ${o.questionType==="multiple-choice"?"rounded":"rounded-full"}`}),n.createElement("span",null,g.text,o.questionType==="scale"&&n.createElement("span",{className:"text-gray-400 ml-1"},"(",g.value,")"))))),o.questionType==="boolean"&&n.createElement("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600"},n.createElement("span",{className:"flex items-center gap-1"},n.createElement(_i,{className:"h-4 w-4 text-green-500"}),"Yes"),n.createElement("span",{className:"flex items-center gap-1"},n.createElement(ns,{className:"h-4 w-4 text-red-500"}),"No")),o.questionType==="text"&&n.createElement("div",{className:"mt-2 text-sm text-gray-500 italic"},"Free text response"))))}))),n.createElement("div",{className:"pt-4 border-t border-gray-200"},n.createElement("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500"},n.createElement("span",null,"Created: ",BO(r.createdAt)),r.updatedAt&&r.updatedAt!==r.createdAt&&n.createElement("span",null,"Updated: ",BO(r.updatedAt))))):n.createElement("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500"},n.createElement("p",null,"No quiz data available"))),n.createElement("div",{className:"p-4 border-t border-gray-200 bg-gray-50"},n.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},"Close")))))}const FO=()=>({title:"",description:"",type:"ISOS",durationDays:"",imageUrl:"",isActive:!1}),UO=[{value:"GSOS",label:"General SOS (GSOS)",description:"Single day quick programs"},{value:"ISOS",label:"Intensive SOS (ISOS)",description:"Multi-day structured programs (7D, 15D, 30D)"}];function ade({isOpen:e,onClose:t,onSubmit:r,isLoading:a=!1,serverError:l=null,programToEdit:o=null}){const[d,h]=N.useState(FO()),[g,p]=N.useState({}),x=!!o;N.useEffect(()=>{e&&(h(o?{title:o.title||"",description:o.description||"",type:o.type||"ISOS",durationDays:o.durationDays?.toString()||"",imageUrl:o.imageUrl||"",isActive:o.isActive??!1}:FO()),p({}))},[e,o]);const E=_=>{const P={};if(_.title.trim()?_.title.length>200&&(P.title="Title must be less than 200 characters"):P.title="Title is required",_.description.trim()?_.description.length>2e3&&(P.description="Description must be less than 2000 characters"):P.description="Description is required",!_.durationDays)P.durationDays="Duration is required";else{const k=parseInt(_.durationDays,10);isNaN(k)||k<1?P.durationDays="Duration must be at least 1 day":k>365&&(P.durationDays="Duration cannot exceed 365 days"),_.type==="GSOS"&&k!==1&&(P.durationDays="General SOS programs should be 1 day")}return _.imageUrl&&!/^https?:\/\/.+/.test(_.imageUrl)&&(P.imageUrl="Please provide a valid image URL"),{isValid:Object.keys(P).length===0,errors:P}},C=(_,P)=>{h(k=>{const I={...k,[_]:P};return _==="type"&&P==="GSOS"&&(I.durationDays="1"),I}),g[_]&&p(k=>{const I={...k};return delete I[_],I})},O=async _=>{_.preventDefault();const{isValid:P,errors:k}=E(d);if(!P){p(k);return}const I={title:d.title.trim(),description:d.description.trim(),type:d.type,durationDays:parseInt(d.durationDays,10),isActive:d.isActive};d.imageUrl.trim()&&(I.imageUrl=d.imageUrl.trim()),console.log("[SOSProgramForm] Submitting data:",I),(await r(I))?.success&&t()};return n.createElement(br,{isOpen:e,onClose:t,title:x?"Edit SOS Program":"Create SOS Program",size:"lg"},n.createElement("form",{onSubmit:O,className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Program Title ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",value:d.title,onChange:_=>C("title",_.target.value),placeholder:"e.g., 7-Day Anxiety Relief Program",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.title?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.title&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.title)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Description ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("textarea",{value:d.description,onChange:_=>C("description",_.target.value),placeholder:"Describe what participants will achieve through this program...",rows:4,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${g.description?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.description&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.description)),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Program Type ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("select",{value:d.type,onChange:_=>C("type",_.target.value),disabled:a||x,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${a||x?"bg-gray-100":""}`},UO.map(_=>n.createElement("option",{key:_.value,value:_.value},_.label))),x&&n.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Type cannot be changed after creation"),n.createElement("p",{className:"text-xs text-gray-500 mt-1"},UO.find(_=>_.value===d.type)?.description)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Duration (Days) ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"number",value:d.durationDays,onChange:_=>C("durationDays",_.target.value),placeholder:"e.g., 7",min:"1",max:"365",disabled:a||x||d.type==="GSOS",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.durationDays?"border-red-500":"border-gray-300"} ${a||x||d.type==="GSOS"?"bg-gray-100":""}`}),g.durationDays&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.durationDays),x&&n.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Duration cannot be changed after creation"),d.type==="GSOS"&&!x&&n.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Fixed to 1 day for General SOS"))),n.createElement(Ol,{label:"Program Image",value:d.imageUrl,onUpload:_=>C("imageUrl",_),disabled:a,error:g.imageUrl,type:"image",folder:"sos-programs",placeholder:"Drop image here or click to upload"}),n.createElement("div",{className:"flex items-center gap-3"},n.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},n.createElement("input",{type:"checkbox",checked:d.isActive,onChange:_=>C("isActive",_.target.checked),disabled:a,className:"sr-only peer"}),n.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})),n.createElement("span",{className:"text-sm text-gray-700"},d.isActive?"Active (Visible to users)":"Inactive")),l&&n.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},n.createElement(Ir,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),n.createElement("p",{className:"text-sm text-red-700"},l)),n.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200 sticky bottom-0 bg-white"},n.createElement("button",{type:"button",onClick:t,disabled:a,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50"},"Cancel"),n.createElement("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50"},a?n.createElement(n.Fragment,null,n.createElement(xt,{className:"h-4 w-4 animate-spin"}),n.createElement("span",null,x?"Updating...":"Creating...")):n.createElement("span",null,x?"Update Program":"Create Program")))))}const Tv=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",nde={GSOS:"bg-blue-100 text-blue-700",ISOS:"bg-purple-100 text-purple-700"},jO={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-600"};function sde({isOpen:e,onClose:t,program:r,isLoading:a=!1,onFetchStats:l}){const[o,d]=N.useState(null),[h,g]=N.useState(!1),[p,x]=N.useState(null);return N.useEffect(()=>{(async()=>{if(!(!e||!r?._id||!l)){g(!0),x(null);try{const C=await l(r._id);C.success?d(C.data.stats):x(C.error||"Failed to load statistics")}catch(C){console.error("[SOSProgramDetailsModal] Error fetching stats:",C),x("Failed to load statistics")}finally{g(!1)}}})()},[e,r?._id,l]),N.useEffect(()=>{e||(d(null),x(null))},[e]),e?n.createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto"},n.createElement("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:t}),n.createElement("div",{className:"relative min-h-full flex items-center justify-center p-4"},n.createElement("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden"},n.createElement("div",{className:"flex items-center justify-between p-6 border-b border-gray-200"},n.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Program Details"),n.createElement("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"},n.createElement(Ia,{className:"h-5 w-5"}))),n.createElement("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},a?n.createElement("div",{className:"flex flex-col items-center justify-center py-12"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading program details...")):r?n.createElement("div",{className:"space-y-6"},n.createElement("div",null,n.createElement("div",{className:"flex items-center gap-2 mb-2"},n.createElement("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${nde[r.type]}`},r.type==="GSOS"?"General SOS":"Intensive SOS"),n.createElement("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${r.isActive?jO.active:jO.inactive}`},r.isActive?"Active":"Inactive")),n.createElement("h3",{className:"text-xl font-semibold text-gray-900"},r.title)),r.description&&n.createElement("div",null,n.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-1"},"Description"),n.createElement("p",{className:"text-gray-600 whitespace-pre-wrap"},r.description)),n.createElement("div",{className:"grid grid-cols-2 gap-4"},n.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},n.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},n.createElement(Qr,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm"},"Duration")),n.createElement("p",{className:"font-semibold text-gray-900"},r.durationDays," ",r.durationDays===1?"Day":"Days")),n.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},n.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},n.createElement(Pa,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm"},"Created")),n.createElement("p",{className:"font-semibold text-gray-900"},Tv(r.createdAt)))),n.createElement("div",null,n.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},n.createElement(ll,{className:"h-4 w-4"}),"Statistics"),h?n.createElement("div",{className:"flex items-center justify-center py-8 bg-gray-50 rounded-lg"},n.createElement(xt,{className:"h-6 w-6 text-gray-400 animate-spin"}),n.createElement("span",{className:"ml-2 text-sm text-gray-500"},"Loading statistics...")):p?n.createElement("div",{className:"p-4 bg-red-50 rounded-lg text-sm text-red-600"},p):o?n.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3"},n.createElement("div",{className:"bg-blue-50 rounded-lg p-3 text-center"},n.createElement(Oo,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),n.createElement("p",{className:"text-2xl font-bold text-blue-700"},o.totalEnrolled||0),n.createElement("p",{className:"text-xs text-blue-600"},"Total Enrolled")),n.createElement("div",{className:"bg-amber-50 rounded-lg p-3 text-center"},n.createElement(Pa,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),n.createElement("p",{className:"text-2xl font-bold text-amber-700"},o.inProgress||0),n.createElement("p",{className:"text-xs text-amber-600"},"In Progress")),n.createElement("div",{className:"bg-green-50 rounded-lg p-3 text-center"},n.createElement(Hm,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),n.createElement("p",{className:"text-2xl font-bold text-green-700"},o.completed||0),n.createElement("p",{className:"text-xs text-green-600"},"Completed")),n.createElement("div",{className:"bg-red-50 rounded-lg p-3 text-center"},n.createElement(ns,{className:"h-5 w-5 text-red-600 mx-auto mb-1"}),n.createElement("p",{className:"text-2xl font-bold text-red-700"},o.abandoned||0),n.createElement("p",{className:"text-xs text-red-600"},"Abandoned"))):n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg text-sm text-gray-500 text-center"},"No statistics available"),o&&n.createElement("div",{className:"grid grid-cols-3 gap-3 mt-3"},n.createElement("div",{className:"bg-gray-50 rounded-lg p-3 text-center"},n.createElement(hD,{className:"h-4 w-4 text-gray-500 mx-auto mb-1"}),n.createElement("p",{className:"text-lg font-semibold text-gray-900"},o.completionRate||0,"%"),n.createElement("p",{className:"text-xs text-gray-500"},"Completion Rate")),n.createElement("div",{className:"bg-gray-50 rounded-lg p-3 text-center"},n.createElement(pg,{className:"h-4 w-4 text-gray-500 mx-auto mb-1"}),n.createElement("p",{className:"text-lg font-semibold text-gray-900"},o.quizCount||0,"/",r.durationDays),n.createElement("p",{className:"text-xs text-gray-500"},"Quizzes Created")),n.createElement("div",{className:"bg-gray-50 rounded-lg p-3 text-center"},n.createElement(Wu,{className:"h-4 w-4 text-gray-500 mx-auto mb-1"}),n.createElement("p",{className:"text-lg font-semibold text-gray-900"},o.averageScore?.toFixed(1)||"-"),n.createElement("p",{className:"text-xs text-gray-500"},"Avg. Score")))),r.imageUrl&&n.createElement("div",null,n.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-2"},"Program Image"),n.createElement("div",{className:"relative rounded-lg overflow-hidden bg-gray-100 aspect-video"},n.createElement("img",{src:r.imageUrl,alt:r.title,className:"w-full h-full object-cover",onError:E=>{E.target.style.display="none",E.target.parentElement.innerHTML='<div class="flex items-center justify-center h-full text-gray-400 text-sm">Failed to load image</div>'}}))),n.createElement("div",{className:"pt-4 border-t border-gray-200"},n.createElement("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500"},n.createElement("span",null,"Created: ",Tv(r.createdAt)),r.updatedAt&&r.updatedAt!==r.createdAt&&n.createElement("span",null,"Updated: ",Tv(r.updatedAt)),r.createdBy?.name&&n.createElement("span",null,"By: ",r.createdBy.name)))):n.createElement("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500"},n.createElement("p",null,"No program data available"))),n.createElement("div",{className:"p-4 border-t border-gray-200 bg-gray-50"},n.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},"Close"))))):null}const vo={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-600"},zO={GSOS:"bg-blue-100 text-blue-700",ISOS:"bg-purple-100 text-purple-700"};function lde(){const[e,t]=N.useState("quizzes"),{quizzes:r,pagination:a,filters:l,isLoading:o,error:d,fetchQuizzes:h,createQuiz:g,getQuizById:p,updateQuiz:x,deleteQuiz:E,filterByProgram:C,updateFilters:O,resetFilters:_,changePage:P,clearError:k}=Wue(),{programs:I,pagination:F,filters:R,isLoading:Y,error:j,fetchPrograms:z,createProgram:L,getProgramById:q,getProgramStats:V,updateProgram:W,toggleProgramStatus:H,deleteProgram:$,searchPrograms:ce,updateFilters:me,resetFilters:ae,changePage:J,clearError:se}=Kue(),[Ee,we]=N.useState(!1),[te,K]=N.useState(!1),[ee,ge]=N.useState(!1),[le,Ce]=N.useState(null),[ie,de]=N.useState(null),[$e,be]=N.useState(!1),[Xe,at]=N.useState(!1),[Le,ve]=N.useState(!1),[Ue,oe]=N.useState(!1),[qe,Ne]=N.useState(null),[tt,it]=N.useState(null),[pt,We]=N.useState(!1),[lt,Fe]=N.useState(!1),[mt,$t]=N.useState(null),[er,tr]=N.useState(!1),[ut,At]=N.useState(l.programId||""),[vr,ur]=N.useState(l.isActive||""),[ea,kt]=N.useState(!1),[xe,Qe]=N.useState(R.search||""),[st,Tt]=N.useState(R.type||""),[dr,$a]=N.useState(R.isActive||"");N.useEffect(()=>{z(1)},[]);const ta=N.useCallback(()=>{$t(null),de(null),we(!0)},[]),bt=N.useCallback(async Ve=>{$t(null),be(!0);try{const gt=await p(Ve._id);gt.success?(de(gt.data),we(!0)):alert(gt.error||"Failed to load quiz details")}catch(gt){console.error("[Quizes] Failed to load quiz for edit:",gt),alert("An unexpected error occurred")}finally{be(!1)}},[p]),Je=N.useCallback(()=>{we(!1),$t(null),de(null)},[]),Lt=N.useCallback(async Ve=>{Fe(!0),$t(null);try{let gt;return ie?gt=await x(ie._id,Ve):gt=await g(Ve),gt.success?gt:($t(gt.error||"Failed to save quiz"),{success:!1})}catch(gt){return console.error("[Quizes] Form submission error:",gt),$t("An unexpected error occurred"),{success:!1}}finally{Fe(!1)}},[g,x,ie]),Lr=N.useCallback(async Ve=>{Ce(Ve),K(!0),be(!0);try{const gt=await p(Ve._id);gt.success&&Ce(gt.data)}catch(gt){console.error("[Quizes] Failed to fetch details:",gt)}finally{be(!1)}},[p]),fe=N.useCallback(()=>{K(!1),Ce(null)},[]),De=N.useCallback(Ve=>{Ce(Ve),ge(!0)},[]),ot=N.useCallback(()=>{ge(!1),Ce(null)},[]),Ja=N.useCallback(async()=>{if(le){Fe(!0);try{const Ve=await E(le._id);Ve.success?ot():alert(Ve.error||"Failed to delete quiz")}catch(Ve){console.error("[Quizes] Delete error:",Ve),alert("An unexpected error occurred")}finally{Fe(!1)}}},[le,E,ot]),ds=N.useCallback(()=>{O({programId:ut,isActive:vr}),tr(!1)},[ut,vr,O]),Nn=N.useCallback(()=>{At(""),ur(""),_(),tr(!1)},[_]),Vc=N.useCallback(()=>{h(a.currentPage)},[h,a.currentPage]),Sn=N.useCallback(()=>{$t(null),it(null),at(!0)},[]),Fl=N.useCallback(async Ve=>{$t(null),We(!0);try{const gt=await q(Ve._id);gt.success?(it(gt.data),at(!0)):alert(gt.error||"Failed to load program details")}catch(gt){console.error("[Quizes] Failed to load program for edit:",gt),alert("An unexpected error occurred")}finally{We(!1)}},[q]),Ea=N.useCallback(()=>{at(!1),$t(null),it(null)},[]),Vn=N.useCallback(async Ve=>{Fe(!0),$t(null);try{let gt;return tt?gt=await W(tt._id,Ve):gt=await L(Ve),gt.success?gt:($t(gt.error||"Failed to save program"),{success:!1})}catch(gt){return console.error("[Quizes] Form submission error:",gt),$t("An unexpected error occurred"),{success:!1}}finally{Fe(!1)}},[L,W,tt]),qa=N.useCallback(async Ve=>{Ne(Ve),ve(!0),We(!0);try{const gt=await q(Ve._id);gt.success&&Ne(gt.data)}catch(gt){console.error("[Quizes] Failed to fetch program details:",gt)}finally{We(!1)}},[q]),ct=N.useCallback(()=>{ve(!1),Ne(null)},[]),Ga=N.useCallback(async Ve=>{Fe(!0);try{const gt=await H(Ve._id,Ve.isActive);gt.success||alert(gt.error||"Failed to update program status")}catch(gt){console.error("[Quizes] Toggle status error:",gt),alert("An unexpected error occurred")}finally{Fe(!1)}},[H]),$r=N.useCallback(Ve=>{Ne(Ve),oe(!0)},[]),rr=N.useCallback(()=>{oe(!1),Ne(null)},[]),hn=N.useCallback(async()=>{if(qe){Fe(!0);try{const Ve=await $(qe._id);Ve.success?rr():alert(Ve.error||"Failed to delete program")}catch(Ve){console.error("[Quizes] Delete error:",Ve),alert("An unexpected error occurred")}finally{Fe(!1)}}},[qe,$,rr]),fl=N.useCallback(Ve=>{const gt=Ve.target.value;Qe(gt),ce(gt)},[ce]),Ii=N.useCallback(()=>{me({search:xe,type:st,isActive:dr}),kt(!1)},[xe,st,dr,me]),Cn=N.useCallback(()=>{Qe(""),Tt(""),$a(""),ae(),kt(!1)},[ae]),Hc=N.useCallback(()=>{z(F.currentPage)},[z,F.currentPage]),hl=N.useMemo(()=>l.programId||l.isActive!=="",[l]),en=N.useMemo(()=>R.search||R.type||R.isActive!=="",[R]),Br=N.useCallback(Ve=>Ve?typeof Ve=="object"&&Ve.title?Ve.title:I.find(kr=>kr._id===Ve)?.title||Ve:"-",[I]),Qt=N.useCallback(Ve=>Ve.questions?.reduce((gt,kr)=>gt+(kr.points||0),0)||Ve.totalPoints||0,[]);return n.createElement("div",{className:"space-y-4 sm:space-y-6"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},n.createElement("div",null,n.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900"},"SOS Management"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Manage SOS programs and their daily quizzes")),n.createElement("button",{onClick:e==="quizzes"?ta:Sn,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},n.createElement(Mr,{className:"h-5 w-5"}),n.createElement("span",null,e==="quizzes"?"Create Quiz":"Create Program"))),n.createElement("div",{className:"bg-white rounded-xl shadow-sm"},n.createElement("div",{className:"border-b border-gray-200"},n.createElement("nav",{className:"flex -mb-px"},n.createElement("button",{onClick:()=>t("programs"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="programs"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`},n.createElement(Vu,{className:"h-4 w-4 inline-block mr-2"}),"Programs (",F.totalCount||0,")"),n.createElement("button",{onClick:()=>t("quizzes"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="quizzes"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`},n.createElement(eg,{className:"h-4 w-4 inline-block mr-2"}),"Quizzes (",a.totalCount||0,")")))),(e==="quizzes"?d:j)&&n.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},n.createElement(Ir,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),n.createElement("div",{className:"flex-1"},n.createElement("p",{className:"text-sm font-medium text-red-800"},"Error loading ",e==="quizzes"?"quizzes":"programs"),n.createElement("p",{className:"text-sm text-red-700 mt-0.5"},e==="quizzes"?d:j)),n.createElement("button",{onClick:e==="quizzes"?k:se,className:"shrink-0 text-red-600 hover:text-red-800"},"")),e==="programs"&&n.createElement(n.Fragment,null,n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},n.createElement("div",{className:"relative flex-1 max-w-md"},n.createElement(ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.createElement("input",{type:"text",value:xe,onChange:fl,placeholder:"Search programs...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),n.createElement("button",{onClick:()=>kt(!ea),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${en?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},n.createElement(Il,{className:"h-4 w-4"}),n.createElement("span",null,"Filters"),en&&n.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(R.search?1:0)+(R.type?1:0)+(R.isActive!==""?1:0)),n.createElement(Ml,{className:`h-4 w-4 transition-transform ${ea?"rotate-180":""}`})),n.createElement("button",{onClick:Hc,disabled:Y,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},n.createElement(os,{className:`h-4 w-4 ${Y?"animate-spin":""}`}),n.createElement("span",{className:"hidden sm:inline"},"Refresh")),n.createElement("div",{className:"ml-auto text-sm text-gray-500"},F.totalCount," program",F.totalCount!==1?"s":""," total")),ea&&n.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Type"),n.createElement("select",{value:st,onChange:Ve=>Tt(Ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"All Types"),n.createElement("option",{value:"GSOS"},"General SOS (GSOS)"),n.createElement("option",{value:"ISOS"},"Intensive SOS (ISOS)"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),n.createElement("select",{value:dr,onChange:Ve=>$a(Ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"All Status"),n.createElement("option",{value:"true"},"Active"),n.createElement("option",{value:"false"},"Inactive"))),n.createElement("div",{className:"flex items-end gap-2 sm:col-span-2"},n.createElement("button",{onClick:Ii,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),n.createElement("button",{onClick:Cn,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),n.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"w-full"},n.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},n.createElement("tr",null,n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Program"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Type"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Duration"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),n.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),n.createElement("tbody",null,Y&&I.length===0?n.createElement("tr",null,n.createElement("td",{colSpan:5,className:"px-6 py-12 text-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading programs..."))):I.length===0?n.createElement("tr",null,n.createElement("td",{colSpan:5,className:"px-6 py-12 text-center"},n.createElement(Vu,{className:"h-12 w-12 text-gray-300 mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No programs found"),n.createElement("button",{onClick:Sn,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first program"))):I.map(Ve=>n.createElement("tr",{key:Ve._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"max-w-[300px]"},n.createElement("p",{className:"font-medium text-gray-900 truncate"},Ve.title),Ve.description&&n.createElement("p",{className:"text-xs text-gray-500 truncate mt-0.5"},Ve.description))),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${zO[Ve.type]}`},Ve.type==="GSOS"?"General":"Intensive")),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center gap-2 text-gray-600"},n.createElement(Qr,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm"},Ve.durationDays," ",Ve.durationDays===1?"day":"days"))),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Ve.isActive?vo.active:vo.inactive}`},Ve.isActive?"Active":"Inactive")),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center justify-end gap-1"},n.createElement("button",{onClick:()=>Ga(Ve),disabled:lt,className:`p-2 rounded-lg transition-colors ${Ve.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:Ve.isActive?"Set Inactive":"Set Active"},Ve.isActive?n.createElement(yi,{className:"h-5 w-5"}):n.createElement(Rl,{className:"h-5 w-5"})),n.createElement("button",{onClick:()=>qa(Ve),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},n.createElement(da,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>Fl(Ve),disabled:pt,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit program"},n.createElement(bn,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>$r(Ve),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},n.createElement(xr,{className:"h-4 w-4"}))))))))),F.totalPages>0&&n.createElement(aa,{currentPage:F.currentPage,totalPages:F.totalPages,totalItems:F.totalCount,itemsPerPage:F.limit,onPageChange:J,itemLabel:"programs"})),n.createElement("div",{className:"md:hidden space-y-4"},Y&&I.length===0?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading programs...")):I.length===0?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},n.createElement(Vu,{className:"h-12 w-12 text-gray-300 mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No programs found"),n.createElement("button",{onClick:Sn,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first program")):n.createElement(n.Fragment,null,I.map(Ve=>n.createElement("div",{key:Ve._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},n.createElement("div",{className:"flex items-start justify-between gap-3"},n.createElement("div",{className:"min-w-0 flex-1"},n.createElement("div",{className:"flex items-center gap-2 flex-wrap mb-1"},n.createElement("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${zO[Ve.type]}`},Ve.type),n.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ve.isActive?vo.active:vo.inactive}`},Ve.isActive?"Active":"Inactive")),n.createElement("p",{className:"font-medium text-gray-900 truncate"},Ve.title))),n.createElement("div",{className:"grid grid-cols-2 gap-2 text-center"},n.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},n.createElement("p",{className:"text-xs text-gray-500"},"Duration"),n.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Ve.durationDays," days")),n.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},n.createElement("p",{className:"text-xs text-gray-500"},"Type"),n.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Ve.type==="GSOS"?"General":"Intensive"))),n.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},n.createElement("button",{onClick:()=>Ga(Ve),disabled:lt,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Ve.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},Ve.isActive?n.createElement(n.Fragment,null,n.createElement(yi,{className:"h-4 w-4"}),"Active"):n.createElement(n.Fragment,null,n.createElement(Rl,{className:"h-4 w-4"}),"Inactive")),n.createElement("button",{onClick:()=>qa(Ve),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},n.createElement(da,{className:"h-4 w-4"}),"Details"),n.createElement("button",{onClick:()=>Fl(Ve),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors"},n.createElement(bn,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>$r(Ve),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},n.createElement(xr,{className:"h-4 w-4"}))))),F.totalPages>0&&n.createElement("div",{className:"bg-white rounded-xl shadow-sm"},n.createElement(aa,{currentPage:F.currentPage,totalPages:F.totalPages,totalItems:F.totalCount,itemsPerPage:F.limit,onPageChange:J,itemLabel:"programs"}))))),e==="quizzes"&&n.createElement(n.Fragment,null,n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},n.createElement("div",{className:"relative flex-1 max-w-md"},n.createElement("select",{value:ut,onChange:Ve=>{At(Ve.target.value),C(Ve.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"All Programs"),I.map(Ve=>n.createElement("option",{key:Ve._id,value:Ve._id},Ve.title," (",Ve.durationDays," days)")))),n.createElement("button",{onClick:()=>tr(!er),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${hl?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},n.createElement(Il,{className:"h-4 w-4"}),n.createElement("span",null,"Filters"),hl&&n.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(l.programId?1:0)+(l.isActive!==""?1:0)),n.createElement(Ml,{className:`h-4 w-4 transition-transform ${er?"rotate-180":""}`})),n.createElement("button",{onClick:Vc,disabled:o,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},n.createElement(os,{className:`h-4 w-4 ${o?"animate-spin":""}`}),n.createElement("span",{className:"hidden sm:inline"},"Refresh")),n.createElement("div",{className:"ml-auto text-sm text-gray-500"},a.totalCount," quiz",a.totalCount!==1?"zes":""," total")),er&&n.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),n.createElement("select",{value:vr,onChange:Ve=>ur(Ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"All Status"),n.createElement("option",{value:"true"},"Active"),n.createElement("option",{value:"false"},"Inactive"))),n.createElement("div",{className:"flex items-end gap-2 sm:col-span-2 lg:col-span-3"},n.createElement("button",{onClick:ds,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),n.createElement("button",{onClick:Nn,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),n.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"w-full"},n.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},n.createElement("tr",null,n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Quiz"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Program"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Day"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Questions"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Points"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),n.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),n.createElement("tbody",null,o&&r.length===0?n.createElement("tr",null,n.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading quizzes..."))):r.length===0?n.createElement("tr",null,n.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},n.createElement(eg,{className:"h-12 w-12 text-gray-300 mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No quizzes found"),n.createElement("button",{onClick:ta,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first quiz"))):r.map(Ve=>n.createElement("tr",{key:Ve._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"max-w-[200px]"},n.createElement("p",{className:"font-medium text-gray-900 truncate"},Ve.title),Ve.description&&n.createElement("p",{className:"text-xs text-gray-500 truncate mt-0.5"},Ve.description))),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:"text-sm text-gray-700 truncate max-w-[150px] block"},Br(Ve.programId))),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center gap-1.5 text-gray-600"},n.createElement(Qr,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm font-medium"},"Day ",Ve.dayNumber||"-"))),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center gap-1.5"},n.createElement(Jh,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-sm text-gray-700"},Ve.questions?.length||Ve.questionCount||0))),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center gap-1.5"},n.createElement(Wu,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"text-sm text-gray-700"},Qt(Ve)))),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Ve.isActive?vo.active:vo.inactive}`},Ve.isActive?"Active":"Inactive")),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center justify-end gap-1"},n.createElement("button",{onClick:()=>Lr(Ve),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},n.createElement(da,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>bt(Ve),disabled:$e,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit quiz"},n.createElement(bn,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>De(Ve),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},n.createElement(xr,{className:"h-4 w-4"}))))))))),a.totalPages>0&&n.createElement(aa,{currentPage:a.currentPage,totalPages:a.totalPages,totalItems:a.totalCount,itemsPerPage:a.limit,onPageChange:P,itemLabel:"quizzes"})),n.createElement("div",{className:"md:hidden space-y-4"},o&&r.length===0?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading quizzes...")):r.length===0?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},n.createElement(eg,{className:"h-12 w-12 text-gray-300 mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No quizzes found"),n.createElement("button",{onClick:ta,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first quiz")):n.createElement(n.Fragment,null,r.map(Ve=>n.createElement("div",{key:Ve._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},n.createElement("div",{className:"flex items-start justify-between gap-3"},n.createElement("div",{className:"min-w-0 flex-1"},n.createElement("div",{className:"flex items-center gap-2 flex-wrap mb-1"},n.createElement("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-700"},"Day ",Ve.dayNumber||"-"),n.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ve.isActive?vo.active:vo.inactive}`},Ve.isActive?"Active":"Inactive")),n.createElement("p",{className:"font-medium text-gray-900 truncate"},Ve.title),n.createElement("p",{className:"text-xs text-gray-500 mt-0.5 truncate"},Br(Ve.programId)))),n.createElement("div",{className:"grid grid-cols-2 gap-2 text-center"},n.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},n.createElement("p",{className:"text-xs text-gray-500"},"Questions"),n.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Ve.questions?.length||Ve.questionCount||0)),n.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},n.createElement("p",{className:"text-xs text-gray-500"},"Total Points"),n.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Qt(Ve)))),n.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},n.createElement("button",{onClick:()=>Lr(Ve),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},n.createElement(da,{className:"h-4 w-4"}),"Details"),n.createElement("button",{onClick:()=>bt(Ve),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors"},n.createElement(bn,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>De(Ve),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},n.createElement(xr,{className:"h-4 w-4"}))))),a.totalPages>0&&n.createElement("div",{className:"bg-white rounded-xl shadow-sm"},n.createElement(aa,{currentPage:a.currentPage,totalPages:a.totalPages,totalItems:a.totalCount,itemsPerPage:a.limit,onPageChange:P,itemLabel:"quizzes"}))))),n.createElement(Jue,{isOpen:Ee,onClose:Je,onSubmit:Lt,isLoading:lt,serverError:mt,quizToEdit:ie,programs:I}),n.createElement(rde,{isOpen:te,onClose:fe,quiz:le,isLoading:$e}),n.createElement(Wa,{isOpen:ee,onClose:ot,onConfirm:Ja,title:"Delete Quiz",message:`Are you sure you want to delete the quiz "${le?.title}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:lt}),n.createElement(ade,{isOpen:Xe,onClose:Ea,onSubmit:Vn,isLoading:lt,serverError:mt,programToEdit:tt}),n.createElement(sde,{isOpen:Le,onClose:ct,program:qe,isLoading:pt,onFetchStats:V}),n.createElement(Wa,{isOpen:Ue,onClose:rr,onConfirm:hn,title:"Delete Program",message:`Are you sure you want to delete the program "${qe?.title}"? This will also affect all associated quizzes and user progress.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:lt}))}const Eo={BASE:"/web/challenges",GET_BY_ID:e=>`/web/challenges/${e}`,UPDATE:e=>`/web/challenges/${e}`,DELETE:e=>`/web/challenges/${e}`,TOGGLE_STATUS:e=>`/web/challenges/${e}/toggle-status`,STATS:e=>`/web/challenges/${e}/stats`,PARTICIPANTS:e=>`/web/challenges/${e}/participants`},wo={getAll:async(e={})=>{const{page:t=1,limit:r=10,sortBy:a="createdAt",sortOrder:l="desc",isActive:o="",search:d="",category:h="",difficulty:g=""}=e,p=new URLSearchParams;p.append("page",t.toString()),p.append("limit",r.toString()),p.append("sortBy",a),p.append("sortOrder",l),o!==""&&p.append("isActive",o),d&&p.append("search",d),h&&p.append("category",h),g&&p.append("difficulty",g);const x=`${Eo.BASE}?${p.toString()}`;return console.log("[ChallengeService] Fetching challenges:",x),ze(je.get(x))},getById:async e=>e?(console.log("[ChallengeService] Fetching challenge:",e),ze(je.get(Eo.GET_BY_ID(e)))):(console.error("[ChallengeService] getById: No ID provided"),{success:!1,error:"Challenge ID is required"}),create:async e=>(console.log("[ChallengeService] Creating challenge:",e.title),!e.tasks||e.tasks.length===0?(console.error("[ChallengeService] create: No tasks provided"),{success:!1,error:"At least one task is required"}):ze(je.post(Eo.BASE,e))),update:async(e,t)=>e?(console.log("[ChallengeService] Updating challenge:",e),ze(je.put(Eo.UPDATE(e),t))):(console.error("[ChallengeService] update: No ID provided"),{success:!1,error:"Challenge ID is required"}),delete:async e=>e?(console.log("[ChallengeService] Deleting challenge:",e),ze(je.delete(Eo.DELETE(e)))):(console.error("[ChallengeService] delete: No ID provided"),{success:!1,error:"Challenge ID is required"}),toggleStatus:async e=>e?(console.log("[ChallengeService] Toggling status for challenge:",e),ze(je.patch(Eo.TOGGLE_STATUS(e)))):(console.error("[ChallengeService] toggleStatus: No ID provided"),{success:!1,error:"Challenge ID is required"}),getStats:async e=>e?(console.log("[ChallengeService] Fetching stats for challenge:",e),ze(je.get(Eo.STATS(e)))):(console.error("[ChallengeService] getStats: No ID provided"),{success:!1,error:"Challenge ID is required"}),getParticipants:async(e,t={})=>{if(!e)return console.error("[ChallengeService] getParticipants: No ID provided"),{success:!1,error:"Challenge ID is required"};const{page:r=1,limit:a=10,status:l=""}=t,o=new URLSearchParams;o.append("page",r.toString()),o.append("limit",a.toString()),l&&o.append("status",l);const d=`${Eo.PARTICIPANTS(e)}?${o.toString()}`;return console.log("[ChallengeService] Fetching participants:",d),ze(je.get(d))},buildTask:e=>{const{title:t,description:r=""}=e;return{title:t,description:r}}};function ide(e={}){const[t,r]=N.useState([]),[a,l]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[o,d]=N.useState({search:"",isActive:"",category:"",difficulty:"",sortBy:"createdAt",sortOrder:"desc",...e}),[h,g]=N.useState(!1),[p,x]=N.useState(null),E=N.useRef(null),C=N.useCallback(async(W=a.currentPage)=>{g(!0),x(null);try{const H={page:W,limit:a.limit,sortBy:o.sortBy,sortOrder:o.sortOrder,...o.search&&{search:o.search},...o.isActive!==""&&{isActive:o.isActive},...o.category&&{category:o.category},...o.difficulty&&{difficulty:o.difficulty}};console.log("[useChallenges] Fetching challenges with params:",H);const $=await wo.getAll(H);$.success?(r($.data.challenges||[]),l({currentPage:$.data.pagination?.currentPage||1,totalPages:$.data.pagination?.totalPages||0,totalCount:$.data.pagination?.totalCount||0,limit:$.data.pagination?.limit||10}),console.log("[useChallenges] Fetched challenges:",$.data.challenges?.length)):(console.error("[useChallenges] Failed to fetch challenges:",$.message),x($.message||"Failed to fetch challenges"),r([]))}catch(H){console.error("[useChallenges] Error fetching challenges:",H),x("Failed to fetch challenges"),r([])}finally{g(!1)}},[o,a.limit]),O=N.useCallback(async W=>{try{console.log("[useChallenges] Creating challenge:",W.title);const H=await wo.create(W);return H.success?(console.log("[useChallenges] Challenge created successfully"),await C(1),{success:!0,data:H.data}):(console.error("[useChallenges] Failed to create challenge:",H.message),{success:!1,error:H.message,validationErrors:H.error})}catch(H){return console.error("[useChallenges] Error creating challenge:",H),{success:!1,error:"Failed to create challenge"}}},[C]),_=N.useCallback(async W=>{try{console.log("[useChallenges] Fetching challenge by ID:",W);const H=await wo.getById(W);return H.success?{success:!0,data:H.data.challenge}:(console.error("[useChallenges] Failed to fetch challenge:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useChallenges] Error fetching challenge:",H),{success:!1,error:"Failed to fetch challenge details"}}},[]),P=N.useCallback(async W=>{try{console.log("[useChallenges] Fetching stats for challenge:",W);const H=await wo.getStats(W);return H.success?{success:!0,data:H.data}:(console.error("[useChallenges] Failed to fetch challenge stats:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useChallenges] Error fetching challenge stats:",H),{success:!1,error:"Failed to fetch challenge statistics"}}},[]),k=N.useCallback(async(W,H={})=>{try{console.log("[useChallenges] Fetching participants for challenge:",W);const $=await wo.getParticipants(W,H);return $.success?{success:!0,data:$.data}:(console.error("[useChallenges] Failed to fetch participants:",$.message),{success:!1,error:$.message})}catch($){return console.error("[useChallenges] Error fetching participants:",$),{success:!1,error:"Failed to fetch challenge participants"}}},[]),I=N.useCallback(async(W,H)=>{try{console.log("[useChallenges] Updating challenge:",W);const $=await wo.update(W,H);return $.success?(console.log("[useChallenges] Challenge updated successfully"),r(ce=>ce.map(me=>me._id===W?{...me,...$.data.challenge}:me)),{success:!0,data:$.data}):(console.error("[useChallenges] Failed to update challenge:",$.message),{success:!1,error:$.message,validationErrors:$.error})}catch($){return console.error("[useChallenges] Error updating challenge:",$),{success:!1,error:"Failed to update challenge"}}},[]),F=N.useCallback(async(W,H)=>{try{console.log("[useChallenges] Toggling status for challenge:",W);const $=await wo.toggleStatus(W);return $.success?(console.log("[useChallenges] Challenge status toggled successfully"),r(ce=>ce.map(me=>me._id===W?{...me,isActive:!H}:me)),{success:!0}):(console.error("[useChallenges] Failed to toggle challenge status:",$.message),{success:!1,error:$.message})}catch($){return console.error("[useChallenges] Error toggling challenge status:",$),{success:!1,error:"Failed to update challenge status"}}},[]),R=N.useCallback(async W=>{try{console.log("[useChallenges] Deleting challenge:",W);const H=await wo.delete(W);return H.success?(console.log("[useChallenges] Challenge deleted successfully"),r($=>$.filter(ce=>ce._id!==W)),l($=>({...$,totalCount:$.totalCount-1,totalPages:Math.ceil(($.totalCount-1)/$.limit)})),{success:!0}):(console.error("[useChallenges] Failed to delete challenge:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useChallenges] Error deleting challenge:",H),{success:!1,error:"Failed to delete challenge"}}},[]),Y=N.useCallback(W=>{E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{d(H=>({...H,search:W}))},300)},[]),j=N.useCallback(W=>{d(H=>({...H,...W}))},[]),z=N.useCallback(()=>{d({search:"",isActive:"",category:"",difficulty:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),L=N.useCallback(W=>{C(W)},[C]),q=N.useCallback(W=>{l(H=>({...H,limit:W}))},[]),V=N.useCallback(()=>{x(null)},[]);return N.useEffect(()=>{C(1)},[o]),N.useEffect(()=>()=>{E.current&&clearTimeout(E.current)},[]),{challenges:t,pagination:a,filters:o,isLoading:h,error:p,fetchChallenges:C,createChallenge:O,getChallengeById:_,getChallengeStats:P,getChallengeParticipants:k,updateChallenge:I,toggleChallengeStatus:F,deleteChallenge:R,searchChallenges:Y,updateFilters:j,resetFilters:z,changePage:L,changeLimit:q,clearError:V}}const ode=[{value:"health",label:"Health"},{value:"fitness",label:"Fitness"},{value:"mindfulness",label:"Mindfulness"},{value:"productivity",label:"Productivity"},{value:"social",label:"Social"},{value:"creativity",label:"Creativity"},{value:"learning",label:"Learning"},{value:"wellness",label:"Wellness"},{value:"habit",label:"Habit"},{value:"other",label:"Other"}],cde=[{value:"easy",label:"Easy",description:"Suitable for beginners"},{value:"medium",label:"Medium",description:"Moderate effort required"},{value:"hard",label:"Hard",description:"Challenging for experienced users"}],VO=()=>({title:"",description:"",category:"",difficulty:"medium",tasks:[],durationDays:"",imageUrl:"",isActive:!1}),ude=()=>({title:"",description:""});function dde({isOpen:e,onClose:t,onSubmit:r,isLoading:a=!1,serverError:l=null,challengeToEdit:o=null}){const[d,h]=N.useState(VO()),[g,p]=N.useState({}),[x,E]=N.useState("basic"),C=!!o;N.useEffect(()=>{e&&(h(o?{title:o.title||"",description:o.description||"",category:o.category||"",difficulty:o.difficulty||"medium",tasks:o.tasks?.map(R=>({title:R.title||"",description:R.description||""}))||[],durationDays:o.durationDays?.toString()||"",imageUrl:o.imageUrl||"",isActive:o.isActive??!1}:VO()),p({}),E("basic"))},[e,o]);const O=R=>{const Y={};if(R.title.trim()?R.title.length>200&&(Y.title="Title must be less than 200 characters"):Y.title="Title is required",R.description.trim()?R.description.length>2e3&&(Y.description="Description must be less than 2000 characters"):Y.description="Description is required",R.category||(Y.category="Category is required"),R.durationDays){const j=parseInt(R.durationDays,10);isNaN(j)||j<1?Y.durationDays="Duration must be at least 1 day":j>365&&(Y.durationDays="Duration cannot exceed 365 days")}if(R.imageUrl&&!/^https?:\/\/.+/.test(R.imageUrl)&&(Y.imageUrl="Please provide a valid image URL"),R.tasks.length===0)Y.tasks="At least one task is required";else{const j=[];R.tasks.forEach((z,L)=>{const q={};z.title.trim()||(q.title="Task title is required"),Object.keys(q).length>0&&(j[L]=q)}),(j.length>0||Object.keys(j).some(z=>j[z]))&&(Y.taskErrors=j)}return{isValid:Object.keys(Y).length===0,errors:Y}},_=(R,Y)=>{h(j=>({...j,[R]:Y})),g[R]&&p(j=>{const z={...j};return delete z[R],z})},P=()=>{h(R=>({...R,tasks:[...R.tasks,ude()]}))},k=R=>{h(Y=>({...Y,tasks:Y.tasks.filter((j,z)=>z!==R)}))},I=(R,Y,j)=>{h(z=>({...z,tasks:z.tasks.map((L,q)=>q!==R?L:{...L,[Y]:j})}))},F=async R=>{R.preventDefault();const{isValid:Y,errors:j}=O(d);if(!Y){p(j),(j.tasks||j.taskErrors)&&E("tasks");return}const z={title:d.title.trim(),description:d.description.trim(),category:d.category,difficulty:d.difficulty,tasks:d.tasks.map((q,V)=>({title:q.title.trim(),description:q.description.trim(),order:V})),isActive:d.isActive};d.durationDays&&(z.durationDays=parseInt(d.durationDays,10)),d.imageUrl.trim()&&(z.imageUrl=d.imageUrl.trim()),console.log("[ChallengeForm] Submitting data:",z),(await r(z))?.success&&t()};return n.createElement(br,{isOpen:e,onClose:t,title:C?"Edit Challenge":"Create Challenge",size:"xl"},n.createElement("form",{onSubmit:F,className:"space-y-4"},n.createElement("div",{className:"flex border-b border-gray-200"},n.createElement("button",{type:"button",onClick:()=>E("basic"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${x==="basic"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`},"Basic Info"),n.createElement("button",{type:"button",onClick:()=>E("tasks"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${x==="tasks"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`},"Tasks (",d.tasks.length,")")),n.createElement("div",{className:"max-h-[60vh] overflow-y-auto pr-2"},x==="basic"?n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Challenge Title ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",value:d.title,onChange:R=>_("title",R.target.value),placeholder:"e.g., 30-Day Fitness Challenge",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.title?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.title&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.title)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Description ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("textarea",{value:d.description,onChange:R=>_("description",R.target.value),placeholder:"Describe what participants will achieve through this challenge...",rows:4,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${g.description?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.description&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.description)),n.createElement("div",{className:"grid grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Category ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("select",{value:d.category,onChange:R=>_("category",R.target.value),disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.category?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`},n.createElement("option",{value:""},"Select a category"),ode.map(R=>n.createElement("option",{key:R.value,value:R.value},R.label))),g.category&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.category)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Difficulty"),n.createElement("select",{value:d.difficulty,onChange:R=>_("difficulty",R.target.value),disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${a?"bg-gray-100":""}`},cde.map(R=>n.createElement("option",{key:R.value,value:R.value},R.label))))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Duration (Days)",n.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),n.createElement("input",{type:"number",value:d.durationDays,onChange:R=>_("durationDays",R.target.value),placeholder:"e.g., 30",min:"1",max:"365",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.durationDays?"border-red-500":"border-gray-300"} ${a?"bg-gray-100":""}`}),g.durationDays&&n.createElement("p",{className:"text-red-600 text-sm mt-1"},g.durationDays),n.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Duration of the challenge in days. Leave empty for no time limit.")),n.createElement(Ol,{label:"Challenge Image",value:d.imageUrl,onUpload:R=>_("imageUrl",R),disabled:a,error:g.imageUrl,type:"image",folder:"challenges",placeholder:"Drop image here or click to upload"}),n.createElement("div",{className:"flex items-center gap-3"},n.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},n.createElement("input",{type:"checkbox",checked:d.isActive,onChange:R=>_("isActive",R.target.checked),disabled:a,className:"sr-only peer"}),n.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})),n.createElement("span",{className:"text-sm text-gray-700"},d.isActive?"Active (Visible to users)":"Inactive"))):n.createElement("div",{className:"space-y-4"},g.tasks&&n.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg"},n.createElement("p",{className:"text-sm text-red-700"},g.tasks)),d.tasks.length===0?n.createElement("div",{className:"p-8 text-center border-2 border-dashed border-gray-200 rounded-lg"},n.createElement("p",{className:"text-gray-500 mb-3"},"No tasks added yet"),n.createElement("button",{type:"button",onClick:P,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},n.createElement(Mr,{className:"h-4 w-4"}),"Add Task")):n.createElement(n.Fragment,null,d.tasks.map((R,Y)=>n.createElement("div",{key:Y,className:"p-4 border border-gray-200 rounded-lg space-y-3"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement(_p,{className:"h-4 w-4 text-gray-400"}),n.createElement("span",{className:"font-medium text-gray-700"},"Task ",Y+1)),n.createElement("button",{type:"button",onClick:()=>k(Y),className:"p-1 text-red-500 hover:bg-red-50 rounded"},n.createElement(xr,{className:"h-4 w-4"}))),n.createElement("div",null,n.createElement("label",{className:"block text-xs font-medium text-gray-600 mb-1"},"Title ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",value:R.title,onChange:j=>I(Y,"title",j.target.value),placeholder:"e.g., Do 20 pushups",disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${g.taskErrors?.[Y]?.title?"border-red-500":"border-gray-300"}`}),g.taskErrors?.[Y]?.title&&n.createElement("p",{className:"text-red-600 text-xs mt-1"},g.taskErrors[Y].title)),n.createElement("div",null,n.createElement("label",{className:"block text-xs font-medium text-gray-600 mb-1"},"Description",n.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),n.createElement("textarea",{value:R.description,onChange:j=>I(Y,"description",j.target.value),placeholder:"Additional details about this task...",rows:2,disabled:a,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none transition-colors"})))),n.createElement("button",{type:"button",onClick:P,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2"},n.createElement(Mr,{className:"h-4 w-4"}),"Add Task")))),l&&n.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},n.createElement(Ir,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),n.createElement("p",{className:"text-sm text-red-700"},l)),n.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:t,disabled:a,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50"},"Cancel"),n.createElement("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50"},a?n.createElement(n.Fragment,null,n.createElement(xt,{className:"h-4 w-4 animate-spin"}),n.createElement("span",null,C?"Updating...":"Creating...")):n.createElement("span",null,C?"Update Challenge":"Create Challenge")))))}const HO=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"-",Ov={easy:{color:"bg-green-100 text-green-700",label:"Easy"},medium:{color:"bg-amber-100 text-amber-700",label:"Medium"},hard:{color:"bg-red-100 text-red-700",label:"Hard"}},$O=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-";function mde({isOpen:e,onClose:t,challenge:r,isLoading:a=!1,onFetchStats:l}){const[o,d]=N.useState(null),[h,g]=N.useState(!1),[p,x]=N.useState(null);return N.useEffect(()=>{(async()=>{if(!(!e||!r?._id||!l)){g(!0),x(null);try{const C=await l(r._id);C.success?d(C.data.stats||C.data):x(C.error||"Failed to load statistics")}catch(C){console.error("[ChallengeDetailsModal] Error fetching stats:",C),x("Failed to load statistics")}finally{g(!1)}}})()},[e,r?._id,l]),N.useEffect(()=>{e||(d(null),x(null))},[e]),e?n.createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto"},n.createElement("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:t}),n.createElement("div",{className:"relative min-h-full flex items-center justify-center p-4"},n.createElement("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden"},n.createElement("div",{className:"flex items-center justify-between p-6 border-b border-gray-200"},n.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Challenge Details"),n.createElement("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"},n.createElement(Ia,{className:"h-5 w-5"}))),n.createElement("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},a?n.createElement("div",{className:"flex flex-col items-center justify-center py-12"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading challenge details...")):r?n.createElement("div",{className:"space-y-6"},n.createElement("div",null,n.createElement("div",{className:"flex items-center gap-2 mb-2"},n.createElement("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isActive?"Active":"Inactive"),r.category&&n.createElement("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700"},HO(r.category)),r.difficulty&&n.createElement("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${Ov[r.difficulty]?.color||"bg-gray-100 text-gray-700"}`},Ov[r.difficulty]?.label||r.difficulty),r.durationDays&&n.createElement("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700"},r.durationDays," Days")),n.createElement("h3",{className:"text-xl font-semibold text-gray-900"},r.title)),r.description&&n.createElement("div",null,n.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-1"},"Description"),n.createElement("p",{className:"text-gray-600 whitespace-pre-wrap"},r.description)),n.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4"},n.createElement("div",{className:"bg-blue-50 rounded-lg p-4 text-center"},n.createElement(yg,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),n.createElement("p",{className:"text-2xl font-bold text-blue-700"},r.tasks?.length||0),n.createElement("p",{className:"text-xs text-blue-600"},"Tasks")),n.createElement("div",{className:"bg-purple-50 rounded-lg p-4 text-center"},n.createElement(Xu,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),n.createElement("p",{className:"text-lg font-semibold text-purple-700"},HO(r.category)),n.createElement("p",{className:"text-xs text-purple-600"},"Category")),n.createElement("div",{className:"bg-amber-50 rounded-lg p-4 text-center"},n.createElement(yD,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),n.createElement("p",{className:"text-lg font-semibold text-amber-700"},Ov[r.difficulty]?.label||"Medium"),n.createElement("p",{className:"text-xs text-amber-600"},"Difficulty")),n.createElement("div",{className:"bg-gray-50 rounded-lg p-4 text-center"},n.createElement(Qr,{className:"h-5 w-5 text-gray-500 mx-auto mb-1"}),n.createElement("p",{className:"text-lg font-semibold text-gray-900"},r.durationDays?`${r.durationDays}d`:"No Limit"),n.createElement("p",{className:"text-xs text-gray-500"},"Duration"))),r.tasks&&r.tasks.length>0&&n.createElement("div",null,n.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},n.createElement(yg,{className:"h-4 w-4"}),"Tasks (",r.tasks.length,")"),n.createElement("div",{className:"space-y-2"},r.tasks.map((E,C)=>n.createElement("div",{key:C,className:"p-3 border border-gray-200 rounded-lg"},n.createElement("div",{className:"flex items-start gap-3"},n.createElement("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-xs font-medium text-gray-600"},C+1),n.createElement("div",null,n.createElement("p",{className:"font-medium text-gray-900"},E.title),E.description&&n.createElement("p",{className:"text-sm text-gray-500 mt-1"},E.description))))))),n.createElement("div",null,n.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},n.createElement(ll,{className:"h-4 w-4"}),"Statistics"),h?n.createElement("div",{className:"flex items-center justify-center py-8 bg-gray-50 rounded-lg"},n.createElement(xt,{className:"h-6 w-6 text-gray-400 animate-spin"}),n.createElement("span",{className:"ml-2 text-sm text-gray-500"},"Loading statistics...")):p?n.createElement("div",{className:"p-4 bg-red-50 rounded-lg text-sm text-red-600"},p):o?n.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3"},n.createElement("div",{className:"bg-blue-50 rounded-lg p-3 text-center"},n.createElement(Oo,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),n.createElement("p",{className:"text-2xl font-bold text-blue-700"},o.totalParticipants||0),n.createElement("p",{className:"text-xs text-blue-600"},"Participants")),n.createElement("div",{className:"bg-amber-50 rounded-lg p-3 text-center"},n.createElement(Pa,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),n.createElement("p",{className:"text-2xl font-bold text-amber-700"},o.activeParticipants||0),n.createElement("p",{className:"text-xs text-amber-600"},"Active")),n.createElement("div",{className:"bg-green-50 rounded-lg p-3 text-center"},n.createElement(Hm,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),n.createElement("p",{className:"text-2xl font-bold text-green-700"},o.completedParticipants||0),n.createElement("p",{className:"text-xs text-green-600"},"Completed")),n.createElement("div",{className:"bg-purple-50 rounded-lg p-3 text-center"},n.createElement(Wu,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),n.createElement("p",{className:"text-2xl font-bold text-purple-700"},o.averageTasksCompleted||0),n.createElement("p",{className:"text-xs text-purple-600"},"Avg. Tasks Done"))):n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg text-sm text-gray-500 text-center"},"No statistics available")),r.imageUrl&&n.createElement("div",null,n.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-2"},"Challenge Image"),n.createElement("div",{className:"relative rounded-lg overflow-hidden bg-gray-100 aspect-video"},n.createElement("img",{src:r.imageUrl,alt:r.title,className:"w-full h-full object-cover",onError:E=>{E.target.style.display="none",E.target.parentElement.innerHTML='<div class="flex items-center justify-center h-full text-gray-400 text-sm">Failed to load image</div>'}}))),n.createElement("div",{className:"pt-4 border-t border-gray-200"},n.createElement("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500"},n.createElement("span",null,"Created: ",$O(r.createdAt)),r.updatedAt&&r.updatedAt!==r.createdAt&&n.createElement("span",null,"Updated: ",$O(r.updatedAt)),r.createdBy?.name&&n.createElement("span",null,"By: ",r.createdBy.name)))):n.createElement("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500"},n.createElement("p",null,"No challenge data available"))),n.createElement("div",{className:"p-4 border-t border-gray-200 bg-gray-50"},n.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},"Close"))))):null}const qO=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"-",fde=[{value:"health",label:"Health"},{value:"fitness",label:"Fitness"},{value:"mindfulness",label:"Mindfulness"},{value:"productivity",label:"Productivity"},{value:"social",label:"Social"},{value:"creativity",label:"Creativity"},{value:"learning",label:"Learning"},{value:"wellness",label:"Wellness"},{value:"habit",label:"Habit"},{value:"other",label:"Other"}],$h={easy:{color:"bg-green-100 text-green-700",label:"Easy"},medium:{color:"bg-amber-100 text-amber-700",label:"Medium"},hard:{color:"bg-red-100 text-red-700",label:"Hard"}},qh={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-600"};function hde(){const{challenges:e,pagination:t,filters:r,isLoading:a,error:l,fetchChallenges:o,createChallenge:d,getChallengeById:h,getChallengeStats:g,updateChallenge:p,toggleChallengeStatus:x,deleteChallenge:E,searchChallenges:C,updateFilters:O,resetFilters:_,changePage:P,clearError:k}=ide(),[I,F]=N.useState(!1),[R,Y]=N.useState(!1),[j,z]=N.useState(!1),[L,q]=N.useState(null),[V,W]=N.useState(null),[H,$]=N.useState(!1),[ce,me]=N.useState(!1),[ae,J]=N.useState(null),[se,Ee]=N.useState(!1),[we,te]=N.useState(r.search||""),[K,ee]=N.useState(r.isActive||""),[ge,le]=N.useState(r.category||""),[Ce,ie]=N.useState(r.difficulty||""),de=N.useCallback(()=>{J(null),W(null),F(!0)},[]),$e=N.useCallback(async Fe=>{J(null),$(!0);try{const mt=await h(Fe._id);mt.success?(W(mt.data),F(!0)):alert(mt.error||"Failed to load challenge details")}catch(mt){console.error("[Challenges] Failed to load challenge for edit:",mt),alert("An unexpected error occurred")}finally{$(!1)}},[h]),be=N.useCallback(()=>{F(!1),J(null),W(null)},[]),Xe=N.useCallback(async Fe=>{me(!0),J(null);try{let mt;return V?mt=await p(V._id,Fe):mt=await d(Fe),mt.success?mt:(J(mt.error||"Failed to save challenge"),{success:!1})}catch(mt){return console.error("[Challenges] Form submission error:",mt),J("An unexpected error occurred"),{success:!1}}finally{me(!1)}},[d,p,V]),at=N.useCallback(async Fe=>{q(Fe),Y(!0),$(!0);try{const mt=await h(Fe._id);mt.success&&q(mt.data)}catch(mt){console.error("[Challenges] Failed to fetch details:",mt)}finally{$(!1)}},[h]),Le=N.useCallback(()=>{Y(!1),q(null)},[]),ve=N.useCallback(async Fe=>{me(!0);try{const mt=await x(Fe._id,Fe.isActive);mt.success||alert(mt.error||"Failed to update challenge status")}catch(mt){console.error("[Challenges] Toggle status error:",mt),alert("An unexpected error occurred")}finally{me(!1)}},[x]),Ue=N.useCallback(Fe=>{q(Fe),z(!0)},[]),oe=N.useCallback(()=>{z(!1),q(null)},[]),qe=N.useCallback(async()=>{if(L){me(!0);try{const Fe=await E(L._id);Fe.success?oe():alert(Fe.error||"Failed to delete challenge")}catch(Fe){console.error("[Challenges] Delete error:",Fe),alert("An unexpected error occurred")}finally{me(!1)}}},[L,E,oe]),Ne=N.useCallback(Fe=>{const mt=Fe.target.value;te(mt),C(mt)},[C]),tt=N.useCallback(()=>{O({search:we,isActive:K,category:ge,difficulty:Ce}),Ee(!1)},[we,K,ge,Ce,O]),it=N.useCallback(()=>{te(""),ee(""),le(""),ie(""),_(),Ee(!1)},[_]),pt=N.useCallback(()=>{o(t.currentPage)},[o,t.currentPage]),We=N.useMemo(()=>r.search||r.isActive!==""||r.category||r.difficulty,[r]),lt=N.useMemo(()=>{let Fe=0;return r.search&&Fe++,r.isActive!==""&&Fe++,r.category&&Fe++,r.difficulty&&Fe++,Fe},[r]);return n.createElement("div",{className:"space-y-4 sm:space-y-6"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},n.createElement("div",null,n.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900"},"Challenges"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Create and manage task-based challenges for users")),n.createElement("button",{onClick:de,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},n.createElement(Mr,{className:"h-5 w-5"}),n.createElement("span",null,"Create Challenge"))),l&&n.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},n.createElement(Ir,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),n.createElement("div",{className:"flex-1"},n.createElement("p",{className:"text-sm font-medium text-red-800"},"Error loading challenges"),n.createElement("p",{className:"text-sm text-red-700 mt-0.5"},l)),n.createElement("button",{onClick:k,className:"shrink-0 text-red-600 hover:text-red-800"},"")),n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},n.createElement("div",{className:"relative flex-1 max-w-md"},n.createElement(ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.createElement("input",{type:"text",value:we,onChange:Ne,placeholder:"Search challenges...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),n.createElement("button",{onClick:()=>Ee(!se),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${We?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},n.createElement(Il,{className:"h-4 w-4"}),n.createElement("span",null,"Filters"),We&&n.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},lt),n.createElement(Ml,{className:`h-4 w-4 transition-transform ${se?"rotate-180":""}`})),n.createElement("button",{onClick:pt,disabled:a,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},n.createElement(os,{className:`h-4 w-4 ${a?"animate-spin":""}`}),n.createElement("span",{className:"hidden sm:inline"},"Refresh")),n.createElement("div",{className:"ml-auto text-sm text-gray-500"},t.totalCount," challenge",t.totalCount!==1?"s":""," total")),se&&n.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Category"),n.createElement("select",{value:ge,onChange:Fe=>le(Fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"All Categories"),fde.map(Fe=>n.createElement("option",{key:Fe.value,value:Fe.value},Fe.label)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Difficulty"),n.createElement("select",{value:Ce,onChange:Fe=>ie(Fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"All Difficulties"),n.createElement("option",{value:"easy"},"Easy"),n.createElement("option",{value:"medium"},"Medium"),n.createElement("option",{value:"hard"},"Hard"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),n.createElement("select",{value:K,onChange:Fe=>ee(Fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"All Status"),n.createElement("option",{value:"true"},"Active"),n.createElement("option",{value:"false"},"Inactive"))),n.createElement("div",{className:"flex items-end gap-2"},n.createElement("button",{onClick:tt,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),n.createElement("button",{onClick:it,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),n.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"w-full"},n.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},n.createElement("tr",null,n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Challenge"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Tasks"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Category"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Difficulty"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Duration"),n.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),n.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),n.createElement("tbody",null,a&&e.length===0?n.createElement("tr",null,n.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading challenges..."))):e.length===0?n.createElement("tr",null,n.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},n.createElement(Vu,{className:"h-12 w-12 text-gray-300 mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No challenges found"),n.createElement("button",{onClick:de,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first challenge"))):e.map(Fe=>n.createElement("tr",{key:Fe._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"max-w-[300px]"},n.createElement("p",{className:"font-medium text-gray-900 truncate"},Fe.title),Fe.description&&n.createElement("p",{className:"text-xs text-gray-500 truncate mt-0.5"},Fe.description))),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center gap-2 text-gray-600"},n.createElement(yg,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm"},Fe.tasks?.length||Fe.taskCount||0," tasks"))),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700"},n.createElement(Xu,{className:"h-3 w-3"}),qO(Fe.category))),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${$h[Fe.difficulty]?.color||"bg-gray-100 text-gray-700"}`},n.createElement(yD,{className:"h-3 w-3"}),$h[Fe.difficulty]?.label||"Medium")),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center gap-2 text-gray-600"},n.createElement(Qr,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm"},Fe.durationDays?`${Fe.durationDays} days`:"No limit"))),n.createElement("td",{className:"px-6 py-4"},n.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Fe.isActive?qh.active:qh.inactive}`},Fe.isActive?"Active":"Inactive")),n.createElement("td",{className:"px-6 py-4"},n.createElement("div",{className:"flex items-center justify-end gap-1"},n.createElement("button",{onClick:()=>ve(Fe),disabled:ce,className:`p-2 rounded-lg transition-colors ${Fe.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:Fe.isActive?"Set Inactive":"Set Active"},Fe.isActive?n.createElement(yi,{className:"h-5 w-5"}):n.createElement(Rl,{className:"h-5 w-5"})),n.createElement("button",{onClick:()=>at(Fe),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},n.createElement(da,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>$e(Fe),disabled:H,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit challenge"},n.createElement(bn,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>Ue(Fe),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},n.createElement(xr,{className:"h-4 w-4"}))))))))),t.totalPages>0&&n.createElement(aa,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:P,itemLabel:"challenges"})),n.createElement("div",{className:"md:hidden space-y-4"},a&&e.length===0?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},n.createElement(xt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading challenges...")):e.length===0?n.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},n.createElement(Vu,{className:"h-12 w-12 text-gray-300 mx-auto"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No challenges found"),n.createElement("button",{onClick:de,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first challenge")):n.createElement(n.Fragment,null,e.map(Fe=>n.createElement("div",{key:Fe._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},n.createElement("div",{className:"flex items-start justify-between gap-3"},n.createElement("div",{className:"min-w-0 flex-1"},n.createElement("div",{className:"flex items-center gap-2 flex-wrap mb-1"},n.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Fe.isActive?qh.active:qh.inactive}`},Fe.isActive?"Active":"Inactive"),Fe.category&&n.createElement("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-700"},qO(Fe.category)),Fe.difficulty&&n.createElement("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${$h[Fe.difficulty]?.color||"bg-gray-100 text-gray-700"}`},$h[Fe.difficulty]?.label||"Medium"),Fe.durationDays&&n.createElement("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700"},Fe.durationDays," days")),n.createElement("p",{className:"font-medium text-gray-900 truncate"},Fe.title),Fe.description&&n.createElement("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2"},Fe.description))),n.createElement("div",{className:"grid grid-cols-2 gap-2 text-center"},n.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},n.createElement("div",{className:"flex items-center justify-center gap-1 text-gray-500"},n.createElement(yg,{className:"h-3 w-3"}),n.createElement("p",{className:"text-xs"},"Tasks")),n.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Fe.tasks?.length||Fe.taskCount||0)),n.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},n.createElement("div",{className:"flex items-center justify-center gap-1 text-gray-500"},n.createElement(Qr,{className:"h-3 w-3"}),n.createElement("p",{className:"text-xs"},"Duration")),n.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Fe.durationDays?`${Fe.durationDays}d`:"No limit"))),n.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},n.createElement("button",{onClick:()=>ve(Fe),disabled:ce,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Fe.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},Fe.isActive?n.createElement(n.Fragment,null,n.createElement(yi,{className:"h-4 w-4"}),"Active"):n.createElement(n.Fragment,null,n.createElement(Rl,{className:"h-4 w-4"}),"Inactive")),n.createElement("button",{onClick:()=>at(Fe),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},n.createElement(da,{className:"h-4 w-4"}),"Details"),n.createElement("button",{onClick:()=>$e(Fe),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors"},n.createElement(bn,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>Ue(Fe),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},n.createElement(xr,{className:"h-4 w-4"}))))),t.totalPages>0&&n.createElement("div",{className:"bg-white rounded-xl shadow-sm"},n.createElement(aa,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:P,itemLabel:"challenges"})))),n.createElement(dde,{isOpen:I,onClose:be,onSubmit:Xe,isLoading:ce,serverError:ae,challengeToEdit:V}),n.createElement(mde,{isOpen:R,onClose:Le,challenge:L,isLoading:H,onFetchStats:g}),n.createElement(Wa,{isOpen:j,onClose:oe,onConfirm:qe,title:"Delete Challenge",message:`Are you sure you want to delete the challenge "${L?.title}"? This will also affect all participant progress.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:ce}))}const _u={BASE:"/web/polls",BY_EVENT:"/web/polls/event"},Du={create:async e=>{console.log("[PollService] Creating poll for event:",e.eventId);const t=await ze(je.post(_u.BASE,e));return t.success?console.log("[PollService] Created poll:",t.data?._id):console.error("[PollService] Failed to create poll:",t.message),t},getByEventId:async e=>{console.log("[PollService] Fetching poll for event:",e);const t=await ze(je.get(`${_u.BY_EVENT}/${e}`));return t.success?console.log("[PollService] Fetched poll:",t.data?._id):console.error("[PollService] Failed to fetch poll:",t.message),t},update:async(e,t)=>{console.log("[PollService] Updating poll:",e);const r=await ze(je.put(`${_u.BASE}/${e}`,t));return r.success?console.log("[PollService] Updated poll successfully"):console.error("[PollService] Failed to update poll:",r.message),r},delete:async e=>{console.log("[PollService] Deleting poll:",e);const t=await ze(je.delete(`${_u.BASE}/${e}`));return t.success?console.log("[PollService] Deleted poll successfully"):console.error("[PollService] Failed to delete poll:",t.message),t},getStats:async e=>{console.log("[PollService] Fetching stats for poll:",e);const t=await ze(je.get(`${_u.BASE}/${e}/stats`));return t.success?console.log("[PollService] Fetched poll stats, total submissions:",t.data?.totalSubmissions):console.error("[PollService] Failed to fetch poll stats:",t.message),t},notifyUsers:async e=>{console.log("[PollService] Sending notification for poll:",e);const t=await ze(je.post(`${_u.BASE}/${e}/notify`));return t.success?console.log("[PollService] Notification sent, success:",t.data?.successCount,"failed:",t.data?.failureCount):console.error("[PollService] Failed to send notification:",t.message),t}},GO=(e=null)=>({questions:e?.questions?.length>0?e.questions.map(t=>({questionText:t.questionText||"",options:t.options?.length>0?[...t.options]:["",""]})):[{questionText:"",options:["",""]}],isActive:e?.isActive??!0}),gde=e=>{const t={};if(!e.questions||e.questions.length===0)return t.questions="At least one question is required",{isValid:!1,errors:t};const r=[];return e.questions.forEach((a,l)=>{const o={};a.questionText?.trim()?a.questionText.length>500&&(o.questionText="Question text must be 500 characters or less"):o.questionText="Question text is required";const d=a.options?.filter(g=>g?.trim())||[];d.length<2&&(o.options="At least 2 options are required"),new Set(d.map(g=>g.trim().toLowerCase())).size!==d.length&&(o.options="Options must be unique"),Object.keys(o).length>0&&(r[l]=o)}),r.some(a=>a)&&(t.questionErrors=r),{isValid:Object.keys(t).length===0,errors:t}};function YO({isOpen:e,onClose:t,onSubmit:r,poll:a=null,event:l=null,isLoading:o=!1,serverError:d=null}){const h=!!a,[g,p]=N.useState(GO(a)),[x,E]=N.useState({});N.useEffect(()=>{e&&(p(GO(a)),E({}),console.log("[PollForm] Form initialized:",{isEditMode:h,poll:a}))},[e,a]);const C=(j,z)=>{p(L=>({...L,questions:L.questions.map((q,V)=>V===j?{...q,questionText:z}:q)})),x.questionErrors?.[j]?.questionText&&E(L=>{const q={...L};return q.questionErrors?.[j]&&delete q.questionErrors[j].questionText,q})},O=(j,z,L)=>{p(q=>({...q,questions:q.questions.map((V,W)=>W===j?{...V,options:V.options.map((H,$)=>$===z?L:H)}:V)})),x.questionErrors?.[j]?.options&&E(q=>{const V={...q};return V.questionErrors?.[j]&&delete V.questionErrors[j].options,V})},_=j=>{p(z=>({...z,questions:z.questions.map((L,q)=>q===j?{...L,options:[...L.options,""]}:L)}))},P=(j,z)=>{p(L=>({...L,questions:L.questions.map((q,V)=>V===j?{...q,options:q.options.filter((W,H)=>H!==z)}:q)}))},k=()=>{p(j=>({...j,questions:[...j.questions,{questionText:"",options:["",""]}]}))},I=j=>{p(z=>({...z,questions:z.questions.filter((L,q)=>q!==j)}))},F=()=>{p(j=>({...j,isActive:!j.isActive}))},R=async j=>{j.preventDefault();const z=gde(g);if(!z.isValid){E(z.errors),console.log("[PollForm] Validation failed:",z.errors);return}const L={questions:g.questions.map(q=>({questionText:q.questionText.trim(),options:q.options.filter(V=>V?.trim()).map(V=>V.trim())}))};!h&&l?L.eventId=l._id:h&&(L.isActive=g.isActive),console.log("[PollForm] Submitting:",L),await r(L)},Y=()=>{o||t()};return n.createElement(br,{isOpen:e,onClose:Y,title:h?"Edit Poll":"Create Poll",size:"2xl",closeOnOverlayClick:!o},n.createElement("form",{onSubmit:R,className:"space-y-6"},l&&n.createElement("div",{className:"p-3 bg-blue-50 border border-blue-200 text-blue-800 rounded-lg"},n.createElement("p",{className:"text-sm"},n.createElement("span",{className:"font-medium"},"Event:")," ",l.name)),d&&n.createElement("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},d),x.questions&&n.createElement("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},x.questions),n.createElement("div",{className:"space-y-4"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Questions"),n.createElement("span",{className:"text-sm text-gray-500"},g.questions.length," question(s)")),g.questions.map((j,z)=>n.createElement("div",{key:z,className:"p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-4"},n.createElement("div",{className:"flex items-start gap-3"},n.createElement("div",{className:"flex items-center gap-2 text-gray-400 mt-2"},n.createElement(_p,{className:"h-4 w-4"}),n.createElement("span",{className:"font-medium text-sm text-gray-500"},"Q",z+1)),n.createElement("div",{className:"flex-1"},n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Question Text ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("input",{type:"text",value:j.questionText,onChange:L=>C(z,L.target.value),disabled:o,maxLength:500,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${x.questionErrors?.[z]?.questionText?"border-red-500":"border-gray-300"}`,placeholder:"Enter your question"}),x.questionErrors?.[z]?.questionText&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},x.questionErrors[z].questionText)),g.questions.length>1&&n.createElement("button",{type:"button",onClick:()=>I(z),disabled:o,className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors mt-6",title:"Remove question"},n.createElement(xr,{className:"h-4 w-4"}))),n.createElement("div",{className:"ml-10 space-y-2"},n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Options ",n.createElement("span",{className:"text-red-500"},"*"),n.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(min 2)")),x.questionErrors?.[z]?.options&&n.createElement("p",{className:"text-sm text-red-500"},x.questionErrors[z].options),j.options.map((L,q)=>n.createElement("div",{key:q,className:"flex items-center gap-2"},n.createElement("span",{className:"text-sm text-gray-400 w-6"},q+1,"."),n.createElement("input",{type:"text",value:L,onChange:V=>O(z,q,V.target.value),disabled:o,maxLength:200,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:`Option ${q+1}`}),j.options.length>2&&n.createElement("button",{type:"button",onClick:()=>P(z,q),disabled:o,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Remove option"},n.createElement(xr,{className:"h-4 w-4"})))),n.createElement("button",{type:"button",onClick:()=>_(z),disabled:o||j.options.length>=10,className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50"},n.createElement(Mr,{className:"h-3 w-3"}),"Add Option")))),n.createElement("button",{type:"button",onClick:k,disabled:o||g.questions.length>=20,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 text-gray-600 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors disabled:opacity-50"},n.createElement(Mr,{className:"h-4 w-4"}),"Add Question")),h&&n.createElement("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200"},n.createElement("div",null,n.createElement("p",{className:"font-medium text-gray-900"},"Poll Status"),n.createElement("p",{className:"text-sm text-gray-500"},g.isActive?"Poll is accepting submissions":"Poll is closed for submissions")),n.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},n.createElement("input",{type:"checkbox",checked:g.isActive,onChange:F,disabled:o,className:"sr-only peer"}),n.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"}))),n.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:Y,disabled:o,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),n.createElement("button",{type:"submit",disabled:o,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},o&&n.createElement(xt,{className:"h-4 w-4 animate-spin"}),h?"Update Poll":"Create Poll"))))}function pde(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function yde(e){return e==="ONLINE"||e==="HYBRID"?jv:_2}function xde(e){const t={TECHNOLOGY:"bg-blue-100 text-blue-700",EDUCATION:"bg-indigo-100 text-indigo-700",MEDICAL:"bg-green-100 text-green-700",COMEDY:"bg-yellow-100 text-yellow-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",BUSINESS:"bg-gray-100 text-gray-700",SPORTS:"bg-orange-100 text-orange-700",ARTS:"bg-purple-100 text-purple-700",MUSIC:"bg-red-100 text-red-700",FOOD:"bg-amber-100 text-amber-700",LIFESTYLE:"bg-teal-100 text-teal-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function bde({event:e,poll:t,isLoadingPoll:r=!1,isNotifying:a=!1,canEdit:l=!0,canDelete:o=!0,onCreatePoll:d,onEditPoll:h,onDeletePoll:g,onViewStats:p,onViewPoll:x,onNotifyUsers:E}){const C=!!t,O=yde(e.mode);return n.createElement("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all overflow-hidden flex flex-col"},n.createElement("div",{className:"relative h-36 bg-gradient-to-br from-gray-100 to-gray-200"},e.thumbnail?.imageUrl||e.imageUrls?.[0]?n.createElement("img",{src:e.thumbnail?.imageUrl||e.imageUrls?.[0],alt:e.name,className:"w-full h-full object-cover",onError:_=>{_.target.style.display="none"}}):n.createElement("div",{className:"w-full h-full flex items-center justify-center bg-linear-to-br from-gray-50 to-gray-100"},n.createElement(Qr,{className:"h-12 w-12 text-gray-300"})),n.createElement("div",{className:"absolute top-2 right-2"},r?n.createElement("span",{className:"px-2.5 py-1 text-xs font-medium bg-white/90 text-gray-600 rounded-full shadow-sm animate-pulse"},"Loading..."):C?n.createElement("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm ${t.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"}`},t.isActive?"Poll Active":"Poll Closed"):n.createElement("span",{className:"px-2.5 py-1 text-xs font-semibold bg-yellow-500 text-white rounded-full shadow-sm"},"No Poll")),n.createElement("div",{className:"absolute top-2 left-2"},n.createElement("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm ${e.isLive?"bg-green-500 text-white":"bg-gray-500 text-white"}`},e.isLive?"Live":"Not Live"))),n.createElement("div",{className:"p-4 flex-1 flex flex-col"},n.createElement("div",{className:"mb-3"},n.createElement("h3",{className:"font-semibold text-gray-900 line-clamp-1 text-base",title:e.name},e.name),n.createElement("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap"},n.createElement("span",{className:`px-2 py-0.5 text-xs font-medium rounded-md ${xde(e.category)}`},e.category),n.createElement("span",{className:"text-xs text-gray-500 flex items-center gap-1"},n.createElement(O,{className:"h-3 w-3"}),e.mode))),n.createElement("div",{className:"space-y-2 mb-4"},n.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600"},n.createElement(Qr,{className:"h-4 w-4 text-gray-400 shrink-0"}),n.createElement("span",null,pde(e.startDate))),C&&n.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600"},n.createElement(zv,{className:"h-4 w-4 text-gray-400 shrink-0"}),n.createElement("span",null,t.questions?.length||0," question",t.questions?.length!==1?"s":""))),n.createElement("div",{className:"mt-auto pt-3 border-t border-gray-100"},C?n.createElement("div",{className:"space-y-2"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement("button",{onClick:()=>x(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",title:"View Poll"},n.createElement(da,{className:"h-4 w-4"}),"View"),n.createElement("button",{onClick:()=>p(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-blue-700 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors",title:"View Statistics"},n.createElement(ll,{className:"h-4 w-4"}),"Stats")),(l||o)&&n.createElement("div",{className:"flex items-center gap-2"},l&&n.createElement("button",{onClick:()=>h(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",title:"Edit Poll"},n.createElement(mD,{className:"h-4 w-4"}),"Edit"),o&&n.createElement("button",{onClick:()=>g(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-red-200",title:"Delete Poll"},n.createElement(xr,{className:"h-4 w-4"}),"Delete")),l&&n.createElement("button",{onClick:()=>E(e,t),disabled:a,className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-amber-700 bg-amber-50 hover:bg-amber-100 rounded-lg transition-colors border border-amber-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Send push notification to enrolled users"},n.createElement(hg,{className:`h-4 w-4 ${a?"animate-pulse":""}`}),a?"Sending...":"Notify Users")):l&&n.createElement("button",{onClick:()=>d(e),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-gray-800 hover:bg-gray-900 rounded-lg transition-colors"},n.createElement(Mr,{className:"h-4 w-4"}),"Create Poll"))))}function XO(e){return e?new Date(e).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"N/A"}function vde({isOpen:e,onClose:t,poll:r,event:a}){return r?n.createElement(br,{isOpen:e,onClose:t,title:"Poll Details",size:"2xl"},n.createElement("div",{className:"space-y-6"},a&&n.createElement("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200"},n.createElement("div",{className:"flex items-start gap-3"},n.createElement(Qr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.createElement("div",null,n.createElement("p",{className:"font-medium text-blue-900"},a.name),n.createElement("p",{className:"text-sm text-blue-700 mt-1"},a.category,"  ",a.mode)))),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"},n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},n.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},n.createElement(_i,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm font-medium"},"Status")),n.createElement("span",{className:`inline-flex px-2 py-1 text-sm font-medium rounded-full ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isActive?"Active":"Closed")),n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},n.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},n.createElement(zv,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm font-medium"},"Questions")),n.createElement("p",{className:"text-lg font-bold text-gray-900"},r.questions?.length||0)),n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},n.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},n.createElement(Pa,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm font-medium"},"Created")),n.createElement("p",{className:"text-sm text-gray-900"},XO(r.createdAt)))),n.createElement("div",{className:"space-y-4"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Questions & Options"),r.questions?.length===0?n.createElement("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg text-center"},n.createElement(zv,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),n.createElement("p",{className:"text-gray-600 font-medium"},"No questions"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"This poll has no questions configured.")):r.questions?.map((l,o)=>n.createElement("div",{key:o,className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm"},n.createElement("div",{className:"flex items-start gap-3 mb-3"},n.createElement("span",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 text-gray-600 font-semibold text-sm rounded-lg"},o+1),n.createElement("h4",{className:"font-medium text-gray-900 pt-1"},l.questionText)),n.createElement("div",{className:"ml-11 space-y-2"},n.createElement("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2"},"Options (",l.options?.length||0,")"),l.options?.map((d,h)=>n.createElement("div",{key:h,className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg"},n.createElement("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center bg-white border border-gray-200 text-gray-500 text-xs font-medium rounded-full"},String.fromCharCode(65+h)),n.createElement("span",{className:"text-sm text-gray-700"},d))))))),n.createElement("div",{className:"pt-4 border-t border-gray-200"},n.createElement("p",{className:"text-xs text-gray-400"},"Poll ID: ",n.createElement("code",{className:"bg-gray-100 px-1 py-0.5 rounded"},r._id)),r.updatedAt&&r.updatedAt!==r.createdAt&&n.createElement("p",{className:"text-xs text-gray-400 mt-1"},"Last updated: ",XO(r.updatedAt))),n.createElement("div",{className:"flex justify-end pt-4 border-t border-gray-200"},n.createElement("button",{onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Close")))):null}function Ede({percentage:e,color:t="blue"}){const r={blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",orange:"bg-orange-500",pink:"bg-pink-500",cyan:"bg-cyan-500",indigo:"bg-indigo-500",amber:"bg-amber-500"};return n.createElement("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden"},n.createElement("div",{className:`h-full ${r[t]||r.blue} rounded-full transition-all duration-500 ease-out`,style:{width:`${Math.min(100,e)}%`}}))}const wde=e=>{const t=["blue","green","purple","orange","pink","cyan","indigo","amber"];return t[e%t.length]};function Nde({isOpen:e,onClose:t,poll:r,stats:a,isLoading:l=!1,error:o=null,onFetchStats:d}){return N.useEffect(()=>{e&&r&&d&&(console.log("[PollStatsModal] Fetching stats for poll:",r._id),d(r._id))},[e,r,d]),r?n.createElement(br,{isOpen:e,onClose:t,title:"Poll Statistics",size:"2xl"},n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},n.createElement("div",{className:"flex items-center justify-between mb-2"},n.createElement("h3",{className:"font-semibold text-gray-900"},"Poll Overview"),n.createElement("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isActive?"Active":"Closed")),n.createElement("p",{className:"text-sm text-gray-600"},r.questions?.length||0," question(s)")),o&&n.createElement("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},n.createElement("p",{className:"text-sm"},o)),l&&n.createElement("div",{className:"flex flex-col items-center justify-center py-12"},n.createElement(xt,{className:"h-8 w-8 animate-spin text-gray-400"}),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading statistics...")),!l&&a&&n.createElement(n.Fragment,null,n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"},n.createElement("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200"},n.createElement("div",{className:"flex items-center gap-3"},n.createElement("div",{className:"p-2 bg-blue-100 rounded-lg"},n.createElement(Oo,{className:"h-5 w-5 text-blue-600"})),n.createElement("div",null,n.createElement("p",{className:"text-2xl font-bold text-blue-900"},a.totalSubmissions||0),n.createElement("p",{className:"text-sm text-blue-700"},"Total Submissions")))),n.createElement("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200"},n.createElement("div",{className:"flex items-center gap-3"},n.createElement("div",{className:"p-2 bg-green-100 rounded-lg"},n.createElement(_i,{className:"h-5 w-5 text-green-600"})),n.createElement("div",null,n.createElement("p",{className:"text-2xl font-bold text-green-900"},a.questions?.length||0),n.createElement("p",{className:"text-sm text-green-700"},"Questions")))),n.createElement("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200"},n.createElement("div",{className:"flex items-center gap-3"},n.createElement("div",{className:"p-2 bg-purple-100 rounded-lg"},n.createElement(ll,{className:"h-5 w-5 text-purple-600"})),n.createElement("div",null,n.createElement("p",{className:"text-2xl font-bold text-purple-900"},a.questions?.reduce((h,g)=>h+(g.options?.length||0),0)||0),n.createElement("p",{className:"text-sm text-purple-700"},"Total Options"))))),a.totalSubmissions===0&&n.createElement("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg text-center"},n.createElement(ll,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),n.createElement("p",{className:"text-gray-600 font-medium"},"No submissions yet"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Statistics will appear once users start submitting their answers.")),a.totalSubmissions>0&&a.questions?.map((h,g)=>n.createElement("div",{key:g,className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm"},n.createElement("div",{className:"flex items-start gap-3 mb-4"},n.createElement("span",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 text-gray-600 font-semibold text-sm rounded-lg"},g+1),n.createElement("h4",{className:"font-medium text-gray-900 pt-1"},h.questionText)),n.createElement("div",{className:"space-y-3 ml-11"},h.options?.map((p,x)=>n.createElement("div",{key:x,className:"space-y-1"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("span",{className:"text-sm text-gray-700"},p.optionText),n.createElement("div",{className:"flex items-center gap-2"},n.createElement("span",{className:"text-sm font-medium text-gray-900"},p.count||0),n.createElement("span",{className:"text-sm text-gray-500"},"(",(p.percentage||0).toFixed(1),"%)"))),n.createElement(Ede,{percentage:p.percentage||0,color:wde(x)}))))))),!l&&!a&&!o&&n.createElement("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg text-center"},n.createElement(ll,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),n.createElement("p",{className:"text-gray-600 font-medium"},"No statistics available"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Statistics could not be loaded for this poll.")),n.createElement("div",{className:"flex justify-end pt-4 border-t border-gray-200"},n.createElement("button",{onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Close")))):null}function Sde(){const{hasRole:e}=Us(),t=e(["SUPER_ADMIN","ADMIN"]),r=e(["SUPER_ADMIN","ADMIN"]),a=e(["SUPER_ADMIN","ADMIN"]),[l,o]=N.useState([]),[d,h]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:12}),[g,p]=N.useState(!1),[x,E]=N.useState(null),[C,O]=N.useState({}),[_,P]=N.useState({}),[k,I]=N.useState({}),[F,R]=N.useState(""),[Y,j]=N.useState(!1),[z,L]=N.useState("all"),[q,V]=N.useState("grid"),[W,H]=N.useState(!1),[$,ce]=N.useState(!1),[me,ae]=N.useState(!1),[J,se]=N.useState(!1),[Ee,we]=N.useState(!1),[te,K]=N.useState(null),[ee,ge]=N.useState(null),[le,Ce]=N.useState(null),[ie,de]=N.useState(!1),[$e,be]=N.useState(null),[Xe,at]=N.useState(!1),[Le,ve]=N.useState(null),[Ue,oe]=N.useState(null),qe=N.useRef(null),Ne=N.useCallback(async(xe=1)=>{p(!0),E(null);try{const Qe={page:xe,limit:d.limit,sortBy:"createdAt",sortOrder:"desc"};F.trim()&&(Qe.search=F.trim()),console.log("[Polls] Fetching events with params:",Qe);const st=await _s.getAll(Qe);if(st.success){o(st.data.events||[]),h({currentPage:st.data.pagination?.currentPage||1,totalPages:st.data.pagination?.totalPages||0,totalCount:st.data.pagination?.totalCount||0,limit:st.data.pagination?.limit||12});const Tt=(st.data.events||[]).map(dr=>dr._id);tt(Tt)}else E(st.message||"Failed to fetch events"),console.error("[Polls] Failed to fetch events:",st.message)}catch(Qe){E("An unexpected error occurred"),console.error("[Polls] Error fetching events:",Qe)}finally{p(!1)}},[F,d.limit]),tt=N.useCallback(async xe=>{const Qe=xe.map(async st=>{if(C[st]===void 0){P(Tt=>({...Tt,[st]:!0}));try{const Tt=await Du.getByEventId(st);Tt.success?O(dr=>({...dr,[st]:Tt.data})):O(dr=>({...dr,[st]:null}))}catch(Tt){console.error(`[Polls] Error fetching poll for event ${st}:`,Tt),O(dr=>({...dr,[st]:null}))}finally{P(Tt=>({...Tt,[st]:!1}))}}});await Promise.all(Qe)},[C]);N.useEffect(()=>{Ne(1)},[]);const it=N.useCallback(xe=>{R(xe),qe.current&&clearTimeout(qe.current),qe.current=setTimeout(()=>{Ne(1)},300)},[Ne]),pt=N.useCallback(xe=>{Ne(xe),window.scrollTo({top:0,behavior:"smooth"})},[Ne]),We=N.useCallback(()=>{O({}),Ne(d.currentPage)},[Ne,d.currentPage]),lt=l.filter(xe=>{if(z==="all")return!0;const Qe=C[xe._id]!==null&&C[xe._id]!==void 0;return z==="with-poll"?Qe:z==="without-poll"?!Qe:!0}),Fe=N.useCallback(xe=>{K(xe),ge(null),ve(null),H(!0),console.log("[Polls] Opening create modal for event:",xe.name)},[]),mt=N.useCallback((xe,Qe)=>{K(xe),ge(Qe),ve(null),ce(!0),console.log("[Polls] Opening edit modal for poll:",Qe._id)},[]),$t=N.useCallback((xe,Qe)=>{K(xe),ge(Qe),ae(!0),console.log("[Polls] Opening details modal for poll:",Qe._id)},[]),er=N.useCallback((xe,Qe)=>{K(xe),ge(Qe),Ce(null),be(null),se(!0),console.log("[Polls] Opening stats modal for poll:",Qe._id)},[]),tr=N.useCallback(async xe=>{de(!0),be(null);try{const Qe=await Du.getStats(xe);Qe.success?Ce(Qe.data):be(Qe.message||"Failed to fetch statistics")}catch(Qe){be("An unexpected error occurred"),console.error("[Polls] Error fetching stats:",Qe)}finally{de(!1)}},[]),ut=N.useCallback((xe,Qe)=>{K(xe),ge(Qe),we(!0),console.log("[Polls] Opening delete dialog for poll:",Qe._id)},[]),At=N.useCallback(async(xe,Qe)=>{if(Qe?._id){I(st=>({...st,[Qe._id]:!0})),oe(null),E(null);try{console.log("[Polls] Sending notification for poll:",Qe._id);const st=await Du.notifyUsers(Qe._id);if(st.success){const{successCount:Tt,failureCount:dr,message:$a}=st.data||{};oe($a||`Notification sent to ${Tt} user${Tt!==1?"s":""}${dr>0?` (${dr} failed)`:""}`),console.log("[Polls] Notification sent successfully")}else E(st.message||"Failed to send notification"),console.error("[Polls] Failed to send notification:",st.message)}catch(st){E("An unexpected error occurred while sending notification"),console.error("[Polls] Error sending notification:",st)}finally{I(st=>({...st,[Qe._id]:!1}))}}},[]),vr=N.useCallback(async xe=>{at(!0),ve(null);try{console.log("[Polls] Creating poll:",xe);const Qe=await Du.create(xe);Qe.success?(H(!1),O(st=>({...st,[xe.eventId]:Qe.data})),console.log("[Polls] Poll created successfully")):(ve(Qe.message||"Failed to create poll"),console.error("[Polls] Failed to create poll:",Qe.message))}catch(Qe){ve("An unexpected error occurred"),console.error("[Polls] Error creating poll:",Qe)}finally{at(!1)}},[]),ur=N.useCallback(async xe=>{if(ee){at(!0),ve(null);try{console.log("[Polls] Updating poll:",ee._id,xe);const Qe=await Du.update(ee._id,xe);Qe.success?(ce(!1),te&&O(st=>({...st,[te._id]:Qe.data})),K(null),ge(null),console.log("[Polls] Poll updated successfully")):(ve(Qe.message||"Failed to update poll"),console.error("[Polls] Failed to update poll:",Qe.message))}catch(Qe){ve("An unexpected error occurred"),console.error("[Polls] Error updating poll:",Qe)}finally{at(!1)}}},[ee,te]),ea=N.useCallback(async()=>{if(ee){at(!0);try{console.log("[Polls] Deleting poll:",ee._id);const xe=await Du.delete(ee._id);xe.success?(we(!1),te&&O(Qe=>({...Qe,[te._id]:null})),K(null),ge(null),console.log("[Polls] Poll deleted successfully")):(E(xe.message||"Failed to delete poll"),console.error("[Polls] Failed to delete poll:",xe.message))}catch(xe){E("An unexpected error occurred"),console.error("[Polls] Error deleting poll:",xe)}finally{at(!1)}}},[ee,te]),kt=N.useCallback(()=>E(null),[]);return n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},n.createElement("div",null,n.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Polls"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Create and manage polls for your events")),n.createElement("div",{className:"flex items-center gap-3"},n.createElement("button",{onClick:We,disabled:g,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Refresh events and polls"},n.createElement(os,{className:`h-4 w-4 ${g?"animate-spin":""}`}),n.createElement("span",{className:"hidden sm:inline"},"Refresh")),n.createElement("div",{className:"flex items-center bg-white border border-gray-300 rounded-lg overflow-hidden"},n.createElement("button",{onClick:()=>V("grid"),className:`p-2 transition-colors ${q==="grid"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"Grid view"},n.createElement(dD,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>V("list"),className:`p-2 transition-colors ${q==="list"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"List view"},n.createElement(O2,{className:"h-4 w-4"}))))),x&&n.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},n.createElement(Ir,{className:"h-5 w-5 shrink-0"}),n.createElement("p",{className:"flex-1"},x),n.createElement("button",{onClick:kt,className:"text-red-500 hover:text-red-700 font-medium"},"Dismiss")),Ue&&n.createElement("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg"},n.createElement(hg,{className:"h-5 w-5 shrink-0"}),n.createElement("p",{className:"flex-1"},Ue),n.createElement("button",{onClick:()=>oe(null),className:"text-green-500 hover:text-green-700 font-medium"},"Dismiss")),n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},n.createElement("div",{className:"flex flex-col sm:flex-row gap-4"},n.createElement("div",{className:"flex-1 relative"},n.createElement(ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.createElement("input",{type:"text",value:F,onChange:xe=>it(xe.target.value),placeholder:"Search events...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),F&&n.createElement("button",{onClick:()=>{R(""),Ne(1)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},n.createElement(Ia,{className:"h-4 w-4"}))),n.createElement("button",{onClick:()=>j(!Y),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${Y||z!=="all"?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`},n.createElement(Il,{className:"h-4 w-4"}),n.createElement("span",null,"Filters"),z!=="all"&&n.createElement("span",{className:"w-2 h-2 bg-white rounded-full"}))),Y&&n.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},n.createElement("div",{className:"flex flex-wrap items-center gap-3"},n.createElement("span",{className:"text-sm text-gray-500"},"Poll Status:"),n.createElement("div",{className:"flex gap-2"},[{value:"all",label:"All Events"},{value:"with-poll",label:"With Poll"},{value:"without-poll",label:"Without Poll"}].map(xe=>n.createElement("button",{key:xe.value,onClick:()=>L(xe.value),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${z===xe.value?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},xe.label))),z!=="all"&&n.createElement("button",{onClick:()=>L("all"),className:"text-sm text-gray-500 hover:text-gray-700"},"Reset")))),g&&l.length===0?n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},[...Array(8)].map((xe,Qe)=>n.createElement("div",{key:Qe,className:"bg-white rounded-xl border border-gray-200 overflow-hidden animate-pulse"},n.createElement("div",{className:"h-32 bg-gray-200"}),n.createElement("div",{className:"p-4 space-y-3"},n.createElement("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),n.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),n.createElement("div",{className:"h-8 bg-gray-200 rounded"}))))):lt.length===0?n.createElement("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center"},n.createElement("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center"},n.createElement(ya,{className:"h-8 w-8 text-gray-400"})),n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No events found"),n.createElement("p",{className:"text-gray-500 max-w-md mx-auto"},F||z!=="all"?"Try adjusting your search or filter criteria.":"Create an event first to add polls.")):q==="grid"?n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},lt.map(xe=>n.createElement(bde,{key:xe._id,event:xe,poll:C[xe._id],isLoadingPoll:_[xe._id],isNotifying:k[C[xe._id]?._id],canEdit:r,canDelete:a,onCreatePoll:Fe,onEditPoll:mt,onDeletePoll:ut,onViewStats:er,onViewPoll:$t,onNotifyUsers:At}))):n.createElement("div",{className:"space-y-3"},lt.map(xe=>n.createElement("div",{key:xe._id,className:"bg-white rounded-xl border border-gray-200 p-4 flex items-center gap-4"},n.createElement("div",{className:"shrink-0 w-20 h-20 rounded-lg overflow-hidden bg-gray-100"},xe.thumbnail?.imageUrl||xe.imageUrls?.[0]?n.createElement("img",{src:xe.thumbnail?.imageUrl||xe.imageUrls?.[0],alt:xe.name,className:"w-full h-full object-cover"}):n.createElement("div",{className:"w-full h-full flex items-center justify-center"},n.createElement("span",{className:"text-gray-300 text-2xl"},"E"))),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("h3",{className:"font-semibold text-gray-900 truncate"},xe.name),n.createElement("p",{className:"text-sm text-gray-500"},xe.category,"  ",xe.mode),n.createElement("div",{className:"flex items-center gap-2 mt-1"},C[xe._id]?n.createElement("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${C[xe._id].isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},C[xe._id].isActive?"Poll Active":"Poll Closed"):n.createElement("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-yellow-100 text-yellow-700"},"No Poll"))),n.createElement("div",{className:"flex items-center gap-2"},C[xe._id]?n.createElement(n.Fragment,null,n.createElement("button",{onClick:()=>er(xe,C[xe._id]),className:"px-3 py-1.5 text-sm text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors"},"Stats"),r&&n.createElement(n.Fragment,null,n.createElement("button",{onClick:()=>mt(xe,C[xe._id]),className:"px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors"},"Edit"),n.createElement("button",{onClick:()=>At(xe,C[xe._id]),disabled:k[C[xe._id]?._id],className:"flex items-center gap-1 px-3 py-1.5 text-sm text-amber-600 bg-amber-50 hover:bg-amber-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Send push notification to enrolled users"},n.createElement(hg,{className:`h-4 w-4 ${k[C[xe._id]?._id]?"animate-pulse":""}`}),k[C[xe._id]?._id]?"Sending...":"Notify")),a&&n.createElement("button",{onClick:()=>ut(xe,C[xe._id]),className:"px-3 py-1.5 text-sm text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors"},"Delete")):t&&n.createElement("button",{onClick:()=>Fe(xe),className:"px-3 py-1.5 text-sm text-white bg-gray-800 hover:bg-gray-900 rounded-lg transition-colors"},"Create Poll"))))),d.totalPages>1&&n.createElement("div",{className:"bg-white rounded-xl shadow-sm"},n.createElement(aa,{currentPage:d.currentPage,totalPages:d.totalPages,totalItems:d.totalCount,itemsPerPage:d.limit,onPageChange:pt,itemLabel:"events"})),n.createElement(YO,{isOpen:W,onClose:()=>{H(!1),K(null)},onSubmit:vr,poll:null,event:te,isLoading:Xe,serverError:Le}),n.createElement(YO,{isOpen:$,onClose:()=>{ce(!1),K(null),ge(null)},onSubmit:ur,poll:ee,event:te,isLoading:Xe,serverError:Le}),n.createElement(vde,{isOpen:me,onClose:()=>{ae(!1),K(null),ge(null)},poll:ee,event:te}),n.createElement(Nde,{isOpen:J,onClose:()=>{se(!1),K(null),ge(null),Ce(null)},poll:ee,stats:le,isLoading:ie,error:$e,onFetchStats:tr}),n.createElement(Wa,{isOpen:Ee,onClose:()=>{we(!1),K(null),ge(null)},onConfirm:ea,title:"Delete Poll",message:`Are you sure you want to delete the poll for "${te?.name}"? This will also delete all associated submissions. This action cannot be undone.`,confirmText:"Delete Poll",cancelText:"Cancel",variant:"danger",isLoading:Xe}))}const Ss={BASE:"/web/stories",STATS:"/web/stories/stats",TTL_OPTIONS:"/web/stories/ttl-options",REORDER:"/web/stories/reorder"},Al={create:async e=>(console.log("[StoryService] Creating story"),ze(je.post(Ss.BASE,e))),getAll:async(e={})=>{console.log("[StoryService] Fetching stories:",e);const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.includeExpired!==void 0&&t.append("includeExpired",e.includeExpired);const r=`${Ss.BASE}?${t.toString()}`;return ze(je.get(r))},getById:async e=>(console.log("[StoryService] Fetching story:",e),ze(je.get(`${Ss.BASE}/${e}`))),update:async(e,t)=>(console.log("[StoryService] Updating story:",e),ze(je.put(`${Ss.BASE}/${e}`,t))),toggleActive:async e=>(console.log("[StoryService] Toggling story status:",e),ze(je.patch(`${Ss.BASE}/${e}/toggle`))),delete:async(e,t=!1)=>{console.log("[StoryService] Deleting story:",e);const r=t?`${Ss.BASE}/${e}?deleteMedia=true`:`${Ss.BASE}/${e}`;return ze(je.delete(r))},permanentDelete:async(e,t=!0)=>{console.log("[StoryService] Permanently deleting story:",e);const r=t?`${Ss.BASE}/${e}/permanent`:`${Ss.BASE}/${e}/permanent?deleteMedia=false`;return ze(je.delete(r))},reorder:async e=>(console.log("[StoryService] Reordering stories"),ze(je.put(Ss.REORDER,{order:e}))),getStats:async()=>(console.log("[StoryService] Fetching story stats"),ze(je.get(Ss.STATS))),getTtlOptions:async()=>(console.log("[StoryService] Fetching TTL options"),ze(je.get(Ss.TTL_OPTIONS)))},RR=[{value:"1_hour",label:"1 hour"},{value:"6_hours",label:"6 hours"},{value:"12_hours",label:"12 hours"},{value:"1_day",label:"1 day"},{value:"3_days",label:"3 days"},{value:"7_days",label:"7 days"},{value:"30_days",label:"30 days"},{value:"forever",label:"Forever"}],Cde=[{value:"image",label:"Image"},{value:"video",label:"Video"}],Ade=[{value:"createdAt",label:"Created Date"},{value:"displayOrder",label:"Display Order"},{value:"viewCount",label:"View Count"},{value:"expiresAt",label:"Expiry Date"}],WO={search:"",mediaType:"",isActive:"",includeExpired:!1,sortBy:"displayOrder",sortOrder:"asc"};function Tde(e={}){const[t,r]=N.useState([]),[a,l]=N.useState({page:1,totalPages:0,total:0,limit:20}),[o,d]=N.useState({...WO,...e}),[h,g]=N.useState(!1),[p,x]=N.useState(null),[E,C]=N.useState(null),[O,_]=N.useState(!1),[P,k]=N.useState(RR),I=N.useRef(null),F=N.useCallback(async(te=a.page)=>{console.log("[useStoriesManagement] Fetching stories"),g(!0),x(null);try{const K={page:te,limit:a.limit,includeExpired:o.includeExpired},ee=await Al.getAll(K);if(ee.success){let ge=ee.data.stories||[];if(o.mediaType&&(ge=ge.filter(le=>le.mediaType===o.mediaType)),o.isActive!==""){const le=o.isActive==="true";ge=ge.filter(Ce=>Ce.isActive===le)}if(o.search){const le=o.search.toLowerCase();ge=ge.filter(Ce=>Ce.title?.toLowerCase().includes(le)||Ce.mediaType?.toLowerCase().includes(le))}ge.sort((le,Ce)=>{const ie=le[o.sortBy],de=Ce[o.sortBy],$e=o.sortOrder==="asc"?1:-1;return typeof ie=="string"?ie.localeCompare(de)*$e:ie instanceof Date||o.sortBy.includes("At")?(new Date(ie)-new Date(de))*$e:((ie||0)-(de||0))*$e}),r(ge),l(le=>({...le,...ee.data.pagination}))}else x(ee.message),r([])}catch(K){console.error("[useStoriesManagement] Error fetching stories:",K),x("Failed to fetch stories"),r([])}finally{g(!1)}},[o,a.limit,a.page]),R=N.useCallback(async()=>{console.log("[useStoriesManagement] Fetching stats"),_(!0);try{const te=await Al.getStats();te.success&&C(te.data)}catch(te){console.error("[useStoriesManagement] Error fetching stats:",te)}finally{_(!1)}},[]),Y=N.useCallback(async()=>{try{const te=await Al.getTtlOptions();te.success&&te.data.options&&k(te.data.options)}catch(te){console.error("[useStoriesManagement] Error fetching TTL options:",te)}},[]),j=N.useCallback(async te=>{try{const K=await Al.getById(te);return K.success?{success:!0,data:K.data}:{success:!1,error:K.message}}catch{return{success:!1,error:"Failed to fetch story details"}}},[]),z=N.useCallback(async te=>{console.log("[useStoriesManagement] Creating story"),g(!0),x(null);try{const K=await Al.create(te);return K.success?(await F(1),await R(),{success:!0,data:K.data}):{success:!1,error:K.message,validationErrors:K.data?.errors}}catch{return{success:!1,error:"Failed to create story"}}finally{g(!1)}},[F,R]),L=N.useCallback(async(te,K)=>{console.log("[useStoriesManagement] Updating story:",te),g(!0),x(null);try{const ee=await Al.update(te,K);return ee.success?(r(ge=>ge.map(le=>le._id===te?{...le,...ee.data}:le)),{success:!0,data:ee.data}):{success:!1,error:ee.message,validationErrors:ee.data?.errors}}catch{return{success:!1,error:"Failed to update story"}}finally{g(!1)}},[]),q=N.useCallback(async te=>{console.log("[useStoriesManagement] Toggling story status:",te);try{const K=await Al.toggleActive(te);return K.success?(r(ee=>ee.map(ge=>ge._id===te?{...ge,isActive:K.data.isActive}:ge)),{success:!0,data:K.data}):{success:!1,error:K.message}}catch{return{success:!1,error:"Failed to toggle story status"}}},[]),V=N.useCallback(async(te,K=!1)=>{console.log("[useStoriesManagement] Deleting story:",te),g(!0),x(null);try{const ee=await Al.delete(te,K);return ee.success?(r(ge=>ge.filter(le=>le._id!==te)),l(ge=>({...ge,total:ge.total-1,totalPages:Math.ceil((ge.total-1)/ge.limit)})),await R(),{success:!0}):{success:!1,error:ee.message}}catch{return{success:!1,error:"Failed to delete story"}}finally{g(!1)}},[R]),W=N.useCallback(async(te,K=!0)=>{console.log("[useStoriesManagement] Permanently deleting story:",te),g(!0),x(null);try{const ee=await Al.permanentDelete(te,K);return ee.success?(r(ge=>ge.filter(le=>le._id!==te)),l(ge=>({...ge,total:ge.total-1,totalPages:Math.ceil((ge.total-1)/ge.limit)})),await R(),{success:!0}):{success:!1,error:ee.message}}catch{return{success:!1,error:"Failed to permanently delete story"}}finally{g(!1)}},[R]),H=N.useCallback(async te=>{console.log("[useStoriesManagement] Reordering stories");try{const K=await Al.reorder(te);return K.success?(r(ee=>{const ge=new Map(te.map(le=>[le.storyId,le.displayOrder]));return[...ee].map(le=>({...le,displayOrder:ge.get(le._id)??le.displayOrder})).sort((le,Ce)=>le.displayOrder-Ce.displayOrder)}),{success:!0}):{success:!1,error:K.message}}catch{return{success:!1,error:"Failed to reorder stories"}}},[]),$=N.useCallback(te=>{d(K=>({...K,...te}))},[]),ce=N.useCallback(te=>{I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{d(K=>({...K,search:te}))},300)},[]),me=N.useCallback(()=>{d({...WO,...e})},[e]),ae=N.useCallback(te=>{F(te)},[F]),J=N.useCallback(te=>{l(K=>({...K,limit:te}))},[]),se=N.useCallback(()=>{d(te=>({...te,includeExpired:!te.includeExpired}))},[]),Ee=N.useCallback(()=>{x(null)},[]),we=N.useCallback(()=>{F(1),R()},[F,R]);return N.useEffect(()=>{F(1)},[o]),N.useEffect(()=>{R(),Y()},[R,Y]),N.useEffect(()=>()=>{I.current&&clearTimeout(I.current)},[]),{stories:t,pagination:a,filters:o,isLoading:h,error:p,stats:E,isLoadingStats:O,ttlOptions:P,fetchStories:F,fetchStats:R,getStoryById:j,createStory:z,updateStory:L,toggleStoryActive:q,deleteStory:V,permanentDeleteStory:W,reorderStories:H,updateFilters:$,updateSearch:ce,resetFilters:me,toggleIncludeExpired:se,changePage:ae,changeLimit:J,clearError:Ee,refresh:we}}const KO=(e=null)=>({mediaUrl:e?.mediaUrl||"",mediaType:e?.mediaType||"image",title:e?.title||"",cloudinaryPublicId:e?.cloudinaryPublicId||"",ttl:e?.ttl||"1_day",displayOrder:e?.displayOrder??0,isActive:e?.isActive??!0}),Ode=(e,t=!1)=>{const r={};if(e.mediaUrl?.trim()?/^https?:\/\/.+/.test(e.mediaUrl)||(r.mediaUrl="Invalid media URL"):r.mediaUrl="Media is required",e.mediaType?["image","video"].includes(e.mediaType)||(r.mediaType="Invalid media type"):r.mediaType="Media type is required",e.title&&e.title.length>500&&(r.title="Title must be 500 characters or less"),e.ttl||(r.ttl="Time to live is required"),e.displayOrder!==void 0&&e.displayOrder!==""){const a=parseInt(e.displayOrder,10);(isNaN(a)||a<0)&&(r.displayOrder="Display order must be a non-negative number")}return{isValid:Object.keys(r).length===0,errors:r}},_de=e=>e&&/\.(mp4|webm|ogg|mov|avi)(\?.*)?$/i.test(e)?"video":"image",Dde=e=>{if(!e||!e.includes("cloudinary.com"))return"";const t=e.match(/\/upload\/(?:v\d+\/)?(.+?)(?:\.[^.]+)?$/);return t?t[1]:""};function ZO({isOpen:e,onClose:t,onSubmit:r,story:a=null,ttlOptions:l=RR,isLoading:o=!1,serverError:d=null}){const h=!!a,[g,p]=N.useState(KO(a)),[x,E]=N.useState({});N.useEffect(()=>{e&&(p(KO(a)),E({}),console.log("[StoryForm] Form initialized:",{isEditMode:h,story:a?._id}))},[e,a]);const C=(I,F)=>{p(R=>({...R,[I]:F})),x[I]&&E(R=>{const Y={...R};return delete Y[I],Y})},O=I=>{const F=_de(I),R=Dde(I);p(Y=>({...Y,mediaUrl:I,mediaType:F,cloudinaryPublicId:R})),x.mediaUrl&&E(Y=>{const j={...Y};return delete j.mediaUrl,j})},_=()=>{p(I=>({...I,isActive:!I.isActive}))},P=async I=>{I.preventDefault();const F=Ode(g,h);if(!F.isValid){E(F.errors),console.log("[StoryForm] Validation failed:",F.errors);return}const R={mediaUrl:g.mediaUrl.trim(),mediaType:g.mediaType,ttl:g.ttl,displayOrder:parseInt(g.displayOrder,10)||0};g.title?.trim()&&(R.title=g.title.trim()),g.cloudinaryPublicId&&(R.cloudinaryPublicId=g.cloudinaryPublicId),h&&(R.isActive=g.isActive),console.log("[StoryForm] Submitting:",{isEditMode:h,storyId:a?._id}),await r(R)},k=()=>{o||t()};return n.createElement(br,{isOpen:e,onClose:k,title:h?"Edit Story":"Create Story",size:"xl",closeOnOverlayClick:!o},n.createElement("form",{onSubmit:P,className:"space-y-6"},d&&n.createElement("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},d),n.createElement("div",null,n.createElement(Ol,{label:"Media",required:!0,value:g.mediaUrl,onUpload:O,folder:"stories",type:"any",maxSize:50*1024*1024,placeholder:"Upload image or video for story",error:x.mediaUrl,disabled:o,showUrlInput:!0})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Media Type ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("div",{className:"flex gap-3"},n.createElement("button",{type:"button",onClick:()=>C("mediaType","image"),disabled:o,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${g.mediaType==="image"?"border-gray-800 bg-gray-800 text-white":"border-gray-300 text-gray-600 hover:border-gray-400"} disabled:opacity-50`},n.createElement(Ic,{className:"h-5 w-5"}),n.createElement("span",{className:"font-medium"},"Image")),n.createElement("button",{type:"button",onClick:()=>C("mediaType","video"),disabled:o,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${g.mediaType==="video"?"border-gray-800 bg-gray-800 text-white":"border-gray-300 text-gray-600 hover:border-gray-400"} disabled:opacity-50`},n.createElement(hi,{className:"h-5 w-5"}),n.createElement("span",{className:"font-medium"},"Video"))),x.mediaType&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},x.mediaType)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Title / Caption",n.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),n.createElement("textarea",{value:g.title,onChange:I=>C("title",I.target.value),disabled:o,maxLength:500,rows:3,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none disabled:bg-gray-100 ${x.title?"border-red-500":"border-gray-300"}`,placeholder:"Add a caption for this story..."}),n.createElement("div",{className:"flex justify-between mt-1"},x.title?n.createElement("p",{className:"text-sm text-red-500"},x.title):n.createElement("span",null),n.createElement("span",{className:"text-xs text-gray-400"},g.title.length,"/500"))),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},n.createElement(Pa,{className:"inline h-4 w-4 mr-1"}),"Time to Live ",n.createElement("span",{className:"text-red-500"},"*")),n.createElement("select",{value:g.ttl,onChange:I=>C("ttl",I.target.value),disabled:o,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${x.ttl?"border-red-500":"border-gray-300"}`},l.map(I=>n.createElement("option",{key:I.value,value:I.value},I.label))),x.ttl&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},x.ttl)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},n.createElement(T2,{className:"inline h-4 w-4 mr-1"}),"Display Order"),n.createElement("input",{type:"number",value:g.displayOrder,onChange:I=>C("displayOrder",I.target.value),disabled:o,min:0,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${x.displayOrder?"border-red-500":"border-gray-300"}`,placeholder:"0"}),x.displayOrder&&n.createElement("p",{className:"mt-1 text-sm text-red-500"},x.displayOrder),n.createElement("p",{className:"mt-1 text-xs text-gray-400"},"Lower numbers appear first"))),h&&n.createElement("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200"},n.createElement("div",null,n.createElement("p",{className:"font-medium text-gray-900"},"Story Status"),n.createElement("p",{className:"text-sm text-gray-500"},g.isActive?"Story is visible to users":"Story is hidden from users")),n.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},n.createElement("input",{type:"checkbox",checked:g.isActive,onChange:_,disabled:o,className:"sr-only peer"}),n.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"}))),n.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:k,disabled:o,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),n.createElement("button",{type:"submit",disabled:o,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},o&&n.createElement(xt,{className:"h-4 w-4 animate-spin"}),h?"Update Story":"Create Story"))))}function kde(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function Pde(e){if(!e)return"N/A";const a=new Date(e)-new Date;if(a<0)return"Expired";const l=Math.floor(a/(1e3*60*60)),o=Math.floor(l/24);return o>0?`${o}d ${l%24}h left`:l>0?`${l}h left`:`${Math.floor(a/(1e3*60))}m left`}function Mde(e){return{"1_hour":"1 hour","6_hours":"6 hours","12_hours":"12 hours","1_day":"1 day","3_days":"3 days","7_days":"7 days","30_days":"30 days",forever:"Forever"}[e]||e}function Ide(e,t){return t==="forever"||!e?!1:new Date(e)<new Date}function Rde({story:e,canEdit:t=!0,canDelete:r=!0,isToggling:a=!1,onView:l,onEdit:o,onDelete:d,onToggleActive:h,draggable:g=!1,dragHandleProps:p={}}){const x=Ide(e.expiresAt,e.ttl),E=e.mediaType==="video";return n.createElement("div",{className:`bg-white rounded-xl border shadow-sm hover:shadow-md transition-all overflow-hidden flex flex-col ${x?"border-orange-200 bg-orange-50/30":"border-gray-200"}`},n.createElement("div",{className:"relative h-48 sm:h-56 bg-gradient-to-br from-gray-100 to-gray-200"},E?n.createElement("div",{className:"w-full h-full relative"},n.createElement("video",{src:e.mediaUrl,className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata",onError:C=>{C.target.style.display="none",C.target.nextElementSibling?.classList.remove("hidden")}}),n.createElement("div",{className:"hidden w-full h-full flex items-center justify-center bg-gray-100"},n.createElement(hi,{className:"h-12 w-12 text-gray-300"})),n.createElement("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20"},n.createElement("div",{className:"w-14 h-14 rounded-full bg-white/90 flex items-center justify-center shadow-lg"},n.createElement(fD,{className:"h-6 w-6 text-gray-800 ml-1"})))):n.createElement(n.Fragment,null,n.createElement("img",{src:e.mediaUrl,alt:e.title||"Story",className:"w-full h-full object-cover",onError:C=>{C.target.style.display="none",C.target.nextElementSibling?.classList.remove("hidden")}}),n.createElement("div",{className:"hidden w-full h-full flex items-center justify-center bg-gray-100"},n.createElement(Ic,{className:"h-12 w-12 text-gray-300"}))),g&&n.createElement("div",{...p,className:"absolute top-2 left-2 p-1.5 bg-white/90 rounded-lg shadow-sm cursor-grab active:cursor-grabbing"},n.createElement(_p,{className:"h-4 w-4 text-gray-500"})),n.createElement("div",{className:"absolute top-2 right-2 flex flex-col gap-1"},n.createElement("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm ${e.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"}`},e.isActive?"Active":"Inactive"),x&&n.createElement("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm bg-orange-500 text-white flex items-center gap-1"},n.createElement(Dp,{className:"h-3 w-3"}),"Expired")),n.createElement("div",{className:"absolute bottom-2 left-2"},n.createElement("span",{className:"px-2.5 py-1 text-xs font-medium bg-black/60 text-white rounded-full flex items-center gap-1"},E?n.createElement(hi,{className:"h-3 w-3"}):n.createElement(Ic,{className:"h-3 w-3"}),e.mediaType)),n.createElement("div",{className:"absolute bottom-2 right-2"},n.createElement("span",{className:"px-2.5 py-1 text-xs font-medium bg-black/60 text-white rounded-full flex items-center gap-1"},n.createElement(da,{className:"h-3 w-3"}),e.viewCount||0))),n.createElement("div",{className:"p-4 flex-1 flex flex-col"},e.title&&n.createElement("h3",{className:"font-semibold text-gray-900 line-clamp-2 text-sm mb-2",title:e.title},e.title),n.createElement("div",{className:"space-y-1.5 mb-3 text-xs text-gray-500"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement(Pa,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}),n.createElement("span",null,"TTL: ",Mde(e.ttl))),e.ttl!=="forever"&&e.expiresAt&&n.createElement("div",{className:"flex items-center gap-2"},n.createElement(Pa,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}),n.createElement("span",{className:x?"text-orange-600 font-medium":""},x?"Expired":Pde(e.expiresAt))),n.createElement("div",{className:"flex items-center gap-2 text-gray-400"},n.createElement("span",null,"Created: ",kde(e.createdAt))),n.createElement("div",{className:"flex items-center gap-2 text-gray-400"},n.createElement("span",null,"Order: #",e.displayOrder))),n.createElement("div",{className:"mt-auto pt-3 border-t border-gray-100 space-y-2"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement("button",{onClick:()=>l(e),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",title:"View Story"},n.createElement(da,{className:"h-4 w-4"}),n.createElement("span",{className:"hidden sm:inline"},"View")),t&&n.createElement("button",{onClick:()=>o(e),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",title:"Edit Story"},n.createElement(mD,{className:"h-4 w-4"}),n.createElement("span",{className:"hidden sm:inline"},"Edit")),r&&n.createElement("button",{onClick:()=>d(e),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-red-200",title:"Delete Story"},n.createElement(xr,{className:"h-4 w-4"}),n.createElement("span",{className:"hidden sm:inline"},"Delete"))),t&&n.createElement("button",{onClick:()=>h(e),disabled:a,className:`w-full flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-lg transition-colors border disabled:opacity-50 ${e.isActive?"text-orange-600 bg-orange-50 hover:bg-orange-100 border-orange-200":"text-green-600 bg-green-50 hover:bg-green-100 border-green-200"}`,title:e.isActive?"Deactivate Story":"Activate Story"},e.isActive?n.createElement(n.Fragment,null,n.createElement(yi,{className:"h-4 w-4"}),a?"Processing...":"Deactivate"):n.createElement(n.Fragment,null,n.createElement(Rl,{className:"h-4 w-4"}),a?"Processing...":"Activate")))))}function QO(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function Lde(e){if(!e)return"N/A";const a=new Date(e)-new Date;if(a<0)return"Expired";const l=Math.floor(a/(1e3*60*60)),o=Math.floor(l/24);if(o>0)return`${o} day${o>1?"s":""} ${l%24} hour${l%24!==1?"s":""} remaining`;if(l>0)return`${l} hour${l!==1?"s":""} remaining`;const d=Math.floor(a/(1e3*60));return`${d} minute${d!==1?"s":""} remaining`}function Bde(e){return{"1_hour":"1 hour","6_hours":"6 hours","12_hours":"12 hours","1_day":"1 day","3_days":"3 days","7_days":"7 days","30_days":"30 days",forever:"Forever"}[e]||e}function Fde(e,t){return t==="forever"||!e?!1:new Date(e)<new Date}function Gh({label:e,value:t,icon:r,variant:a="default"}){const l={default:"bg-gray-50 border-gray-200 text-gray-600",success:"bg-green-50 border-green-200 text-green-600",warning:"bg-orange-50 border-orange-200 text-orange-600",danger:"bg-red-50 border-red-200 text-red-600",info:"bg-blue-50 border-blue-200 text-blue-600"};return n.createElement("div",{className:`p-3 rounded-lg border ${l[a]}`},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement(r,{className:"h-4 w-4"}),n.createElement("span",{className:"text-xs font-medium uppercase tracking-wide"},e)),n.createElement("p",{className:"text-lg font-semibold text-gray-900"},t))}function Ude({isOpen:e,onClose:t,story:r}){if(!r)return null;const a=Fde(r.expiresAt,r.ttl),l=r.mediaType==="video";return n.createElement(br,{isOpen:e,onClose:t,title:"Story Details",size:"2xl"},n.createElement("div",{className:"space-y-6"},a&&n.createElement("div",{className:"p-3 bg-orange-50 border border-orange-200 text-orange-700 rounded-lg flex items-center gap-2"},n.createElement(Dp,{className:"h-5 w-5 shrink-0"}),n.createElement("span",{className:"font-medium"},"This story has expired")),n.createElement("div",{className:"relative rounded-xl overflow-hidden bg-gray-100"},l?n.createElement("div",{className:"relative aspect-[9/16] sm:aspect-video max-h-96 mx-auto bg-black"},n.createElement("video",{src:r.mediaUrl,controls:!0,className:"w-full h-full object-contain",preload:"metadata"},"Your browser does not support the video tag.")):n.createElement("div",{className:"relative max-h-96 flex items-center justify-center bg-gray-900"},n.createElement("img",{src:r.mediaUrl,alt:r.title||"Story",className:"max-h-96 w-auto object-contain",onError:o=>{o.target.src="",o.target.alt="Failed to load image"}})),n.createElement("a",{href:r.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 p-2 bg-white/90 rounded-lg shadow-sm hover:bg-white transition-colors",title:"Open in new tab"},n.createElement(Op,{className:"h-4 w-4 text-gray-600"}))),r.title&&n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},n.createElement("p",{className:"text-sm font-medium text-gray-500 mb-1"},"Caption"),n.createElement("p",{className:"text-gray-900 whitespace-pre-wrap"},r.title)),n.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3"},n.createElement(Gh,{label:"Status",value:r.isActive?"Active":"Inactive",icon:r.isActive?_i:ns,variant:r.isActive?"success":"default"}),n.createElement(Gh,{label:"Views",value:r.viewCount||0,icon:da,variant:"info"}),n.createElement(Gh,{label:"Type",value:r.mediaType,icon:l?hi:Ic,variant:"default"}),n.createElement(Gh,{label:"Order",value:`#${r.displayOrder}`,icon:T2,variant:"default"})),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},n.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},n.createElement(Pa,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm font-medium"},"Time to Live")),n.createElement("p",{className:"text-gray-900 font-semibold"},Bde(r.ttl))),n.createElement("div",{className:`p-4 rounded-lg border ${a?"bg-orange-50 border-orange-200":"bg-gray-50 border-gray-200"}`},n.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},n.createElement(Pa,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm font-medium"},a?"Expired":"Expires")),n.createElement("p",{className:`font-semibold ${a?"text-orange-700":"text-gray-900"}`},r.ttl==="forever"?"Never":a?QO(r.expiresAt):Lde(r.expiresAt))),n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},n.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},n.createElement(Qr,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm font-medium"},"Created")),n.createElement("p",{className:"text-gray-900 font-semibold"},QO(r.createdAt))),r.createdBy&&n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},n.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},n.createElement(xi,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm font-medium"},"Created By")),n.createElement("p",{className:"text-gray-900 font-semibold"},typeof r.createdBy=="object"?r.createdBy.name||r.createdBy.username:r.createdBy))),n.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},n.createElement("p",{className:"text-sm font-medium text-gray-500 mb-3"},"Technical Details"),n.createElement("div",{className:"space-y-2 text-sm"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1"},n.createElement("span",{className:"text-gray-500 shrink-0 sm:w-32"},"Story ID:"),n.createElement("code",{className:"text-gray-700 bg-gray-200 px-2 py-0.5 rounded text-xs break-all"},r._id)),r.cloudinaryPublicId&&n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1"},n.createElement("span",{className:"text-gray-500 shrink-0 sm:w-32"},"Public ID:"),n.createElement("code",{className:"text-gray-700 bg-gray-200 px-2 py-0.5 rounded text-xs break-all"},r.cloudinaryPublicId)),n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1"},n.createElement("span",{className:"text-gray-500 shrink-0 sm:w-32"},"Media URL:"),n.createElement("a",{href:r.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-xs break-all"},r.mediaUrl)))),n.createElement("div",{className:"pt-4 border-t border-gray-200"},n.createElement("button",{onClick:t,className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Close"))))}function jde({filters:e,onFilterChange:t,onSearchChange:r,onReset:a,includeExpired:l=!1,onToggleExpired:o,disabled:d=!1}){const[h,g]=N.useState(!1),p=e.search||e.mediaType||e.isActive!==""||l||e.sortBy!=="displayOrder"||e.sortOrder!=="asc",x=P=>{r(P.target.value)},E=P=>{t({mediaType:P===e.mediaType?"":P})},C=P=>{t({isActive:P===e.isActive?"":P})},O=(P,k)=>{t({[P]:k})},_=()=>{a(),g(!1)};return n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},n.createElement("div",{className:"flex flex-col sm:flex-row gap-3"},n.createElement("div",{className:"flex-1 relative"},n.createElement(ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.createElement("input",{type:"text",value:e.search,onChange:x,disabled:d,placeholder:"Search stories by title...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:opacity-50 disabled:bg-gray-100"}),e.search&&n.createElement("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600"},n.createElement(Ia,{className:"h-4 w-4"}))),n.createElement("button",{onClick:()=>g(!h),disabled:d,className:`flex items-center justify-center gap-2 px-4 py-2.5 border rounded-lg transition-colors whitespace-nowrap ${h||p?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"} disabled:opacity-50`},n.createElement(Il,{className:"h-4 w-4"}),n.createElement("span",{className:"hidden sm:inline"},"Filters"),p&&n.createElement("span",{className:"w-2 h-2 rounded-full bg-white"}))),h&&n.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Media Type"),n.createElement("div",{className:"flex flex-wrap gap-2"},Cde.map(P=>n.createElement("button",{key:P.value,onClick:()=>E(P.value),disabled:d,className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg transition-colors ${e.mediaType===P.value?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"} disabled:opacity-50`},P.value==="image"?n.createElement(Ic,{className:"h-3.5 w-3.5"}):n.createElement(hi,{className:"h-3.5 w-3.5"}),P.label)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Status"),n.createElement("div",{className:"flex flex-wrap gap-2"},n.createElement("button",{onClick:()=>C("true"),disabled:d,className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${e.isActive==="true"?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"} disabled:opacity-50`},"Active"),n.createElement("button",{onClick:()=>C("false"),disabled:d,className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${e.isActive==="false"?"bg-gray-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"} disabled:opacity-50`},"Inactive"))),n.createElement("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement(Pa,{className:"h-4 w-4 text-gray-500"}),n.createElement("span",{className:"text-sm font-medium text-gray-700"},"Include Expired Stories")),n.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},n.createElement("input",{type:"checkbox",checked:l,onChange:o,disabled:d,className:"sr-only peer"}),n.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800 peer-disabled:opacity-50"}))),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},n.createElement(uz,{className:"inline h-4 w-4 mr-1"}),"Sort By"),n.createElement("select",{value:e.sortBy,onChange:P=>O("sortBy",P.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:opacity-50"},Ade.map(P=>n.createElement("option",{key:P.value,value:P.value},P.label)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Order"),n.createElement("select",{value:e.sortOrder,onChange:P=>O("sortOrder",P.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:opacity-50"},n.createElement("option",{value:"asc"},"Ascending"),n.createElement("option",{value:"desc"},"Descending")))),p&&n.createElement("button",{onClick:_,disabled:d,className:"flex items-center gap-2 text-sm text-gray-500 hover:text-gray-700 transition-colors disabled:opacity-50"},n.createElement(Ia,{className:"h-4 w-4"}),"Reset all filters")))}function _v({label:e,value:t,icon:r,color:a="gray",description:l}){const o={gray:"bg-gray-50 border-gray-200 text-gray-600",blue:"bg-blue-50 border-blue-200 text-blue-600",green:"bg-green-50 border-green-200 text-green-600",orange:"bg-orange-50 border-orange-200 text-orange-600",red:"bg-red-50 border-red-200 text-red-600",purple:"bg-purple-50 border-purple-200 text-purple-600"};return n.createElement("div",{className:`p-4 rounded-xl border ${o[a]}`},n.createElement("div",{className:"flex items-center gap-3"},n.createElement("div",{className:`p-2 rounded-lg ${o[a]}`},n.createElement(r,{className:"h-5 w-5"})),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500"},e),n.createElement("p",{className:"text-2xl font-bold text-gray-900"},t),l&&n.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},l))))}function zde({isOpen:e,onClose:t,stats:r,isLoading:a=!1}){return n.createElement(br,{isOpen:e,onClose:t,title:"Story Statistics",size:"xl"},a?n.createElement("div",{className:"flex flex-col items-center justify-center py-12"},n.createElement(xt,{className:"h-8 w-8 text-gray-400 animate-spin mb-3"}),n.createElement("p",{className:"text-gray-500"},"Loading statistics...")):r?n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"p-4 bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl text-white"},n.createElement("div",{className:"flex items-center gap-3 mb-4"},n.createElement(ll,{className:"h-6 w-6"}),n.createElement("h3",{className:"text-lg font-semibold"},"Overview")),n.createElement("div",{className:"grid grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("p",{className:"text-gray-400 text-sm"},"Total Stories"),n.createElement("p",{className:"text-3xl font-bold"},r.totalStories||0)),n.createElement("div",null,n.createElement("p",{className:"text-gray-400 text-sm"},"Total Views"),n.createElement("p",{className:"text-3xl font-bold"},r.totalViews||0)))),n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},n.createElement(_v,{label:"Active Stories",value:r.activeStories||0,icon:_i,color:"green",description:"Currently visible to users"}),n.createElement(_v,{label:"Inactive Stories",value:r.inactiveStories||0,icon:ns,color:"gray",description:"Hidden from users"}),n.createElement(_v,{label:"Expired Stories",value:r.expiredStories||0,icon:Pa,color:"orange",description:"Past their TTL"})),n.createElement("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-xl"},n.createElement("div",{className:"flex items-center gap-3"},n.createElement("div",{className:"p-2 bg-purple-100 rounded-lg"},n.createElement(hD,{className:"h-5 w-5 text-purple-600"})),n.createElement("div",null,n.createElement("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500"},"Average Views per Story"),n.createElement("p",{className:"text-2xl font-bold text-gray-900"},r.averageViews?r.averageViews.toFixed(1):"0")))),n.createElement("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-200"},n.createElement("h4",{className:"font-semibold text-gray-900 mb-3"},"Summary"),n.createElement("ul",{className:"space-y-2 text-sm text-gray-600"},n.createElement("li",{className:"flex items-center gap-2"},n.createElement("span",{className:"w-2 h-2 rounded-full bg-green-500"}),r.activeStories||0," stories are currently active and visible"),n.createElement("li",{className:"flex items-center gap-2"},n.createElement("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),r.expiredStories||0," stories have expired based on their TTL"),n.createElement("li",{className:"flex items-center gap-2"},n.createElement("span",{className:"w-2 h-2 rounded-full bg-gray-500"}),r.inactiveStories||0," stories are manually deactivated"),n.createElement("li",{className:"flex items-center gap-2"},n.createElement("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Stories have been viewed ",r.totalViews||0," times in total")))):n.createElement("div",{className:"flex flex-col items-center justify-center py-12"},n.createElement(ll,{className:"h-12 w-12 text-gray-300 mb-3"}),n.createElement("p",{className:"text-gray-500"},"No statistics available")),n.createElement("div",{className:"pt-4 mt-6 border-t border-gray-200"},n.createElement("button",{onClick:t,className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Close")))}function Vde(){const{hasRole:e}=Us(),t=e(["SUPER_ADMIN","ADMIN"]),r=e(["SUPER_ADMIN","ADMIN"]),a=e(["SUPER_ADMIN","ADMIN"]),{stories:l,pagination:o,filters:d,isLoading:h,error:g,stats:p,isLoadingStats:x,ttlOptions:E,createStory:C,updateStory:O,toggleStoryActive:_,deleteStory:P,updateFilters:k,updateSearch:I,resetFilters:F,toggleIncludeExpired:R,changePage:Y,clearError:j,refresh:z}=Tde(),[L,q]=N.useState("grid"),[V,W]=N.useState(!1),[H,$]=N.useState(!1),[ce,me]=N.useState(!1),[ae,J]=N.useState(!1),[se,Ee]=N.useState(!1),[we,te]=N.useState(null),[K,ee]=N.useState(!1),[ge,le]=N.useState(!1),[Ce,ie]=N.useState(null),[de,$e]=N.useState({}),[be,Xe]=N.useState(null),at=N.useCallback(()=>{te(null),ie(null),W(!0),console.log("[Stories] Opening create modal")},[]),Le=N.useCallback(lt=>{te(lt),ie(null),$(!0),console.log("[Stories] Opening edit modal for story:",lt._id)},[]),ve=N.useCallback(lt=>{te(lt),me(!0),console.log("[Stories] Opening details modal for story:",lt._id)},[]),Ue=N.useCallback(()=>{J(!0),console.log("[Stories] Opening stats modal")},[]),oe=N.useCallback(lt=>{te(lt),ee(!1),Ee(!0),console.log("[Stories] Opening delete dialog for story:",lt._id)},[]),qe=N.useCallback(async lt=>{$e(Fe=>({...Fe,[lt._id]:!0}));try{const Fe=await _(lt._id);Fe.success&&(Xe(`Story ${Fe.data.isActive?"activated":"deactivated"} successfully`),setTimeout(()=>Xe(null),3e3))}finally{$e(Fe=>({...Fe,[lt._id]:!1}))}},[_]),Ne=N.useCallback(async lt=>{le(!0),ie(null);try{console.log("[Stories] Creating story");const Fe=await C(lt);Fe.success?(W(!1),Xe("Story created successfully"),setTimeout(()=>Xe(null),3e3),console.log("[Stories] Story created successfully")):(ie(Fe.error||"Failed to create story"),console.error("[Stories] Failed to create story:",Fe.error))}catch(Fe){ie("An unexpected error occurred"),console.error("[Stories] Error creating story:",Fe)}finally{le(!1)}},[C]),tt=N.useCallback(async lt=>{if(we){le(!0),ie(null);try{console.log("[Stories] Updating story:",we._id);const Fe=await O(we._id,lt);Fe.success?($(!1),te(null),Xe("Story updated successfully"),setTimeout(()=>Xe(null),3e3),console.log("[Stories] Story updated successfully")):(ie(Fe.error||"Failed to update story"),console.error("[Stories] Failed to update story:",Fe.error))}catch(Fe){ie("An unexpected error occurred"),console.error("[Stories] Error updating story:",Fe)}finally{le(!1)}}},[we,O]),it=N.useCallback(async()=>{if(we){le(!0);try{console.log("[Stories] Deleting story:",we._id);const lt=await P(we._id,K);lt.success?(Ee(!1),te(null),Xe("Story deleted successfully"),setTimeout(()=>Xe(null),3e3),console.log("[Stories] Story deleted successfully")):console.error("[Stories] Failed to delete story:",lt.error)}catch(lt){console.error("[Stories] Error deleting story:",lt)}finally{le(!1)}}},[we,K,P]),pt=N.useCallback(lt=>{Y(lt),window.scrollTo({top:0,behavior:"smooth"})},[Y]),We=N.useCallback(()=>{z(),console.log("[Stories] Refreshing stories")},[z]);return n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},n.createElement("div",null,n.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Stories"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Upload and manage stories visible to all users")),n.createElement("div",{className:"flex items-center gap-3 flex-wrap"},n.createElement("button",{onClick:Ue,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",title:"View statistics"},n.createElement(ll,{className:"h-4 w-4"}),n.createElement("span",{className:"hidden sm:inline"},"Stats")),n.createElement("button",{onClick:We,disabled:h,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Refresh stories"},n.createElement(os,{className:`h-4 w-4 ${h?"animate-spin":""}`}),n.createElement("span",{className:"hidden sm:inline"},"Refresh")),n.createElement("div",{className:"flex items-center bg-white border border-gray-300 rounded-lg overflow-hidden"},n.createElement("button",{onClick:()=>q("grid"),className:`p-2 transition-colors ${L==="grid"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"Grid view"},n.createElement(dD,{className:"h-4 w-4"})),n.createElement("button",{onClick:()=>q("list"),className:`p-2 transition-colors ${L==="list"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"List view"},n.createElement(O2,{className:"h-4 w-4"}))),t&&n.createElement("button",{onClick:at,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},n.createElement(Mr,{className:"h-4 w-4"}),n.createElement("span",null,"New Story")))),g&&n.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},n.createElement(Ir,{className:"h-5 w-5 shrink-0"}),n.createElement("p",{className:"flex-1"},g),n.createElement("button",{onClick:j,className:"text-red-500 hover:text-red-700 font-medium"},"Dismiss")),be&&n.createElement("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg"},n.createElement(_i,{className:"h-5 w-5 shrink-0"}),n.createElement("p",{className:"flex-1"},be),n.createElement("button",{onClick:()=>Xe(null),className:"text-green-500 hover:text-green-700 font-medium"},"Dismiss")),n.createElement(jde,{filters:d,onFilterChange:k,onSearchChange:I,onReset:F,includeExpired:d.includeExpired,onToggleExpired:R,disabled:h}),h&&l.length===0?n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},[...Array(8)].map((lt,Fe)=>n.createElement("div",{key:Fe,className:"bg-white rounded-xl border border-gray-200 overflow-hidden animate-pulse"},n.createElement("div",{className:"h-48 bg-gray-200"}),n.createElement("div",{className:"p-4 space-y-3"},n.createElement("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),n.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),n.createElement("div",{className:"h-3 bg-gray-200 rounded w-2/3"}),n.createElement("div",{className:"h-8 bg-gray-200 rounded"}))))):l.length===0?n.createElement("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center"},n.createElement("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center"},n.createElement(Ic,{className:"h-8 w-8 text-gray-400"})),n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No stories found"),n.createElement("p",{className:"text-gray-500 max-w-md mx-auto mb-6"},d.search||d.mediaType||d.isActive!==""||d.includeExpired?"Try adjusting your search or filter criteria.":"Create your first story to get started."),t&&!d.search&&n.createElement("button",{onClick:at,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},n.createElement(Mr,{className:"h-4 w-4"}),"Create Story")):L==="grid"?n.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},l.map(lt=>n.createElement(Rde,{key:lt._id,story:lt,canEdit:r,canDelete:a,isToggling:de[lt._id],onView:ve,onEdit:Le,onDelete:oe,onToggleActive:qe}))):n.createElement("div",{className:"space-y-3"},l.map(lt=>n.createElement("div",{key:lt._id,className:"bg-white rounded-xl border border-gray-200 p-4 flex flex-col sm:flex-row items-start sm:items-center gap-4"},n.createElement("div",{className:"shrink-0 w-full sm:w-24 h-32 sm:h-24 rounded-lg overflow-hidden bg-gray-100 relative"},lt.mediaType==="video"?n.createElement("video",{src:lt.mediaUrl,className:"w-full h-full object-cover",muted:!0,preload:"metadata"}):n.createElement("img",{src:lt.mediaUrl,alt:lt.title||"Story",className:"w-full h-full object-cover"}),n.createElement("span",{className:`absolute top-2 right-2 px-2 py-0.5 text-xs font-medium rounded-full ${lt.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},lt.isActive?"Active":"Inactive")),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("h3",{className:"font-semibold text-gray-900 truncate"},lt.title||"Untitled Story"),n.createElement("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-sm text-gray-500"},n.createElement("span",{className:"capitalize"},lt.mediaType),n.createElement("span",null,"TTL: ",lt.ttl?.replace("_"," ")),n.createElement("span",null,lt.viewCount||0," views"))),n.createElement("div",{className:"flex items-center gap-2 w-full sm:w-auto"},n.createElement("button",{onClick:()=>ve(lt),className:"flex-1 sm:flex-none px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors"},"View"),r&&n.createElement("button",{onClick:()=>Le(lt),className:"flex-1 sm:flex-none px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors"},"Edit"),a&&n.createElement("button",{onClick:()=>oe(lt),className:"flex-1 sm:flex-none px-3 py-1.5 text-sm text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors"},"Delete"))))),o.totalPages>1&&n.createElement("div",{className:"bg-white rounded-xl shadow-sm"},n.createElement(aa,{currentPage:o.page,totalPages:o.totalPages,totalItems:o.total,itemsPerPage:o.limit,onPageChange:pt,itemLabel:"stories"})),n.createElement(ZO,{isOpen:V,onClose:()=>{W(!1),ie(null)},onSubmit:Ne,story:null,ttlOptions:E,isLoading:ge,serverError:Ce}),n.createElement(ZO,{isOpen:H,onClose:()=>{$(!1),te(null),ie(null)},onSubmit:tt,story:we,ttlOptions:E,isLoading:ge,serverError:Ce}),n.createElement(Ude,{isOpen:ce,onClose:()=>{me(!1),te(null)},story:we}),n.createElement(zde,{isOpen:ae,onClose:()=>J(!1),stats:p,isLoading:x}),n.createElement(Wa,{isOpen:se,onClose:()=>{Ee(!1),te(null),ee(!1)},onConfirm:it,title:"Delete Story",message:n.createElement("div",{className:"space-y-3"},n.createElement("p",null,"Are you sure you want to delete this story? This action cannot be undone."),n.createElement("label",{className:"flex items-center gap-2 text-sm"},n.createElement("input",{type:"checkbox",checked:K,onChange:lt=>ee(lt.target.checked),className:"rounded border-gray-300"}),n.createElement("span",null,"Also delete media from cloud storage"))),confirmText:"Delete Story",cancelText:"Cancel",variant:"danger",isLoading:ge}))}var dt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(dt||(dt={}));var JO=new Map([[dt.QR_CODE,"QR_CODE"],[dt.AZTEC,"AZTEC"],[dt.CODABAR,"CODABAR"],[dt.CODE_39,"CODE_39"],[dt.CODE_93,"CODE_93"],[dt.CODE_128,"CODE_128"],[dt.DATA_MATRIX,"DATA_MATRIX"],[dt.MAXICODE,"MAXICODE"],[dt.ITF,"ITF"],[dt.EAN_13,"EAN_13"],[dt.EAN_8,"EAN_8"],[dt.PDF_417,"PDF_417"],[dt.RSS_14,"RSS_14"],[dt.RSS_EXPANDED,"RSS_EXPANDED"],[dt.UPC_A,"UPC_A"],[dt.UPC_E,"UPC_E"],[dt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),e_;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(e_||(e_={}));function Hde(e){return Object.values(dt).includes(e)}var yp;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(yp||(yp={}));var $de=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[yp.SCAN_TYPE_CAMERA,yp.SCAN_TYPE_FILE],e})(),LR=(function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!JO.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,JO.get(t))},e})(),t_=(function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e})(),m2;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(m2||(m2={}));var qde=(function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:m2.UNKWOWN_ERROR}},e})(),Gde=(function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e})();function ii(e){return typeof e>"u"||e===null}var zu=(function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),BR=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var a=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(a,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(l),d=Object.keys(t),h=0,g=d;h<g.length;h++){var p=g[h];if(o.has(p))return r.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},e})(),Rm={exports:{}},Yde=Rm.exports,r_;function Xde(){return r_||(r_=1,(function(e,t){(function(r,a){a(t)})(Yde,(function(r){function a(G){return G==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,i){G.__proto__=i}||function(G,i){for(var u in i)i.hasOwnProperty(u)&&(G[u]=i[u])};function o(G,i){l(G,i);function u(){this.constructor=G}G.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}function d(G,i){var u=Object.setPrototypeOf;u?u(G,i):G.__proto__=i}function h(G,i){i===void 0&&(i=G.constructor);var u=Error.captureStackTrace;u&&u(G,i)}var g=(function(G){o(i,G);function i(u){var m=this.constructor,y=G.call(this,u)||this;return Object.defineProperty(y,"name",{value:m.name,enumerable:!1}),d(y,m.prototype),h(y),y}return i})(Error);class p extends g{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}p.kind="Exception";class x extends p{}x.kind="ArgumentException";class E extends p{}E.kind="IllegalArgumentException";class C{constructor(i){if(this.binarizer=i,i===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,u){return this.binarizer.getBlackRow(i,u)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,u,m,y){const b=this.binarizer.getLuminanceSource().crop(i,u,m,y);return new C(this.binarizer.createBinarizer(b))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new C(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new C(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class O extends p{static getChecksumInstance(){return new O}}O.kind="ChecksumException";class _{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class P{static arraycopy(i,u,m,y,b){for(;b--;)m[y++]=i[u++]}static currentTimeMillis(){return Date.now()}}class k extends p{}k.kind="IndexOutOfBoundsException";class I extends k{constructor(i=void 0,u=void 0){super(u),this.index=i,this.message=u}}I.kind="ArrayIndexOutOfBoundsException";class F{static fill(i,u){for(let m=0,y=i.length;m<y;m++)i[m]=u}static fillWithin(i,u,m,y){F.rangeCheck(i.length,u,m);for(let b=u;b<m;b++)i[b]=y}static rangeCheck(i,u,m){if(u>m)throw new E("fromIndex("+u+") > toIndex("+m+")");if(u<0)throw new I(u);if(m>i)throw new I(m)}static asList(...i){return i}static create(i,u,m){return Array.from({length:i}).map(b=>Array.from({length:u}).fill(m))}static createInt32Array(i,u,m){return Array.from({length:i}).map(b=>Int32Array.from({length:u}).fill(m))}static equals(i,u){if(!i||!u||!i.length||!u.length||i.length!==u.length)return!1;for(let m=0,y=i.length;m<y;m++)if(i[m]!==u[m])return!1;return!0}static hashCode(i){if(i===null)return 0;let u=1;for(const m of i)u=31*u+m;return u}static fillUint8Array(i,u){for(let m=0;m!==i.length;m++)i[m]=u}static copyOf(i,u){return i.slice(0,u)}static copyOfUint8Array(i,u){if(i.length<=u){const m=new Uint8Array(u);return m.set(i),m}return i.slice(0,u)}static copyOfRange(i,u,m){const y=m-u,b=new Int32Array(y);return P.arraycopy(i,u,b,0,y),b}static binarySearch(i,u,m){m===void 0&&(m=F.numberComparator);let y=0,b=i.length-1;for(;y<=b;){const w=b+y>>1,S=m(u,i[w]);if(S>0)y=w+1;else if(S<0)b=w-1;else return w}return-y-1}static numberComparator(i,u){return i-u}}class R{static numberOfTrailingZeros(i){let u;if(i===0)return 32;let m=31;return u=i<<16,u!==0&&(m-=16,i=u),u=i<<8,u!==0&&(m-=8,i=u),u=i<<4,u!==0&&(m-=4,i=u),u=i<<2,u!==0&&(m-=2,i=u),m-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let u=1;return i>>>16||(u+=16,i<<=16),i>>>24||(u+=8,i<<=8),i>>>28||(u+=4,i<<=4),i>>>30||(u+=2,i<<=2),u-=i>>>31,u}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,u){return Math.trunc(i/u)}static parseInt(i,u=void 0){return parseInt(i,u)}}R.MIN_VALUE_32_BITS=-2147483648,R.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Y{constructor(i,u){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,u==null?this.bits=Y.makeArray(i):this.bits=u)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const u=Y.makeArray(i);P.arraycopy(this.bits,0,u,0,this.bits.length),this.bits=u}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const u=this.size;if(i>=u)return u;const m=this.bits;let y=Math.floor(i/32),b=m[y];b&=~((1<<(i&31))-1);const w=m.length;for(;b===0;){if(++y===w)return u;b=m[y]}const S=y*32+R.numberOfTrailingZeros(b);return S>u?u:S}getNextUnset(i){const u=this.size;if(i>=u)return u;const m=this.bits;let y=Math.floor(i/32),b=~m[y];b&=~((1<<(i&31))-1);const w=m.length;for(;b===0;){if(++y===w)return u;b=~m[y]}const S=y*32+R.numberOfTrailingZeros(b);return S>u?u:S}setBulk(i,u){this.bits[Math.floor(i/32)]=u}setRange(i,u){if(u<i||i<0||u>this.size)throw new E;if(u===i)return;u--;const m=Math.floor(i/32),y=Math.floor(u/32),b=this.bits;for(let w=m;w<=y;w++){const S=w>m?0:i&31,M=(2<<(w<y?31:u&31))-(1<<S);b[w]|=M}}clear(){const i=this.bits.length,u=this.bits;for(let m=0;m<i;m++)u[m]=0}isRange(i,u,m){if(u<i||i<0||u>this.size)throw new E;if(u===i)return!0;u--;const y=Math.floor(i/32),b=Math.floor(u/32),w=this.bits;for(let S=y;S<=b;S++){const T=S>y?0:i&31,B=(2<<(S<b?31:u&31))-(1<<T)&4294967295;if((w[S]&B)!==(m?B:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,u){if(u<0||u>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+u);for(let m=u;m>0;m--)this.appendBit((i>>m-1&1)===1)}appendBitArray(i){const u=i.size;this.ensureCapacity(this.size+u);for(let m=0;m<u;m++)this.appendBit(i.get(m))}xor(i){if(this.size!==i.size)throw new E("Sizes don't match");const u=this.bits;for(let m=0,y=u.length;m<y;m++)u[m]^=i.bits[m]}toBytes(i,u,m,y){for(let b=0;b<y;b++){let w=0;for(let S=0;S<8;S++)this.get(i)&&(w|=1<<7-S),i++;u[m+b]=w}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),u=Math.floor((this.size-1)/32),m=u+1,y=this.bits;for(let b=0;b<m;b++){let w=y[b];w=w>>1&1431655765|(w&1431655765)<<1,w=w>>2&858993459|(w&858993459)<<2,w=w>>4&252645135|(w&252645135)<<4,w=w>>8&16711935|(w&16711935)<<8,w=w>>16&65535|(w&65535)<<16,i[u-b]=w}if(this.size!==m*32){const b=m*32-this.size;let w=i[0]>>>b;for(let S=1;S<m;S++){const T=i[S];w|=T<<32-b,i[S-1]=w,w=T>>>b}i[m-1]=w}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof Y))return!1;const u=i;return this.size===u.size&&F.equals(this.bits,u.bits)}hashCode(){return 31*this.size+F.hashCode(this.bits)}toString(){let i="";for(let u=0,m=this.size;u<m;u++)(u&7)===0&&(i+=" "),i+=this.get(u)?"X":".";return i}clone(){return new Y(this.size,this.bits.slice())}}var j;(function(G){G[G.OTHER=0]="OTHER",G[G.PURE_BARCODE=1]="PURE_BARCODE",G[G.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",G[G.TRY_HARDER=3]="TRY_HARDER",G[G.CHARACTER_SET=4]="CHARACTER_SET",G[G.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",G[G.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",G[G.ASSUME_GS1=7]="ASSUME_GS1",G[G.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",G[G.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",G[G.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(j||(j={}));var z=j;class L extends p{static getFormatInstance(){return new L}}L.kind="FormatException";var q;(function(G){G[G.Cp437=0]="Cp437",G[G.ISO8859_1=1]="ISO8859_1",G[G.ISO8859_2=2]="ISO8859_2",G[G.ISO8859_3=3]="ISO8859_3",G[G.ISO8859_4=4]="ISO8859_4",G[G.ISO8859_5=5]="ISO8859_5",G[G.ISO8859_6=6]="ISO8859_6",G[G.ISO8859_7=7]="ISO8859_7",G[G.ISO8859_8=8]="ISO8859_8",G[G.ISO8859_9=9]="ISO8859_9",G[G.ISO8859_10=10]="ISO8859_10",G[G.ISO8859_11=11]="ISO8859_11",G[G.ISO8859_13=12]="ISO8859_13",G[G.ISO8859_14=13]="ISO8859_14",G[G.ISO8859_15=14]="ISO8859_15",G[G.ISO8859_16=15]="ISO8859_16",G[G.SJIS=16]="SJIS",G[G.Cp1250=17]="Cp1250",G[G.Cp1251=18]="Cp1251",G[G.Cp1252=19]="Cp1252",G[G.Cp1256=20]="Cp1256",G[G.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",G[G.UTF8=22]="UTF8",G[G.ASCII=23]="ASCII",G[G.Big5=24]="Big5",G[G.GB18030=25]="GB18030",G[G.EUC_KR=26]="EUC_KR"})(q||(q={}));class V{constructor(i,u,m,...y){this.valueIdentifier=i,this.name=m,typeof u=="number"?this.values=Int32Array.from([u]):this.values=u,this.otherEncodingNames=y,V.VALUE_IDENTIFIER_TO_ECI.set(i,this),V.NAME_TO_ECI.set(m,this);const b=this.values;for(let w=0,S=b.length;w!==S;w++){const T=b[w];V.VALUES_TO_ECI.set(T,this)}for(const w of y)V.NAME_TO_ECI.set(w,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new L("incorect value");const u=V.VALUES_TO_ECI.get(i);if(u===void 0)throw new L("incorect value");return u}static getCharacterSetECIByName(i){const u=V.NAME_TO_ECI.get(i);if(u===void 0)throw new L("incorect value");return u}equals(i){if(!(i instanceof V))return!1;const u=i;return this.getName()===u.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(q.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(q.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(q.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(q.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(q.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(q.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(q.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(q.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(q.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(q.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(q.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(q.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(q.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(q.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(q.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(q.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(q.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(q.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(q.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(q.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(q.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(q.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(q.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(q.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(q.Big5,28,"Big5"),V.GB18030=new V(q.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(q.EUC_KR,30,"EUC_KR","EUC-KR");class W extends p{}W.kind="UnsupportedOperationException";class H{static decode(i,u){const m=this.encodingName(u);return this.customDecoder?this.customDecoder(i,m):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(m)?this.decodeFallback(i,m):new TextDecoder(m).decode(i)}static shouldDecodeOnFallback(i){return!H.isBrowser()&&i==="ISO-8859-1"}static encode(i,u){const m=this.encodingName(u);return this.customEncoder?this.customEncoder(i,m):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof V?i:V.getCharacterSetECIByName(i)}static decodeFallback(i,u){const m=this.encodingCharacterSet(u);if(H.isDecodeFallbackSupported(m)){let y="";for(let b=0,w=i.length;b<w;b++){let S=i[b].toString(16);S.length<2&&(S="0"+S),y+="%"+S}return decodeURIComponent(y)}if(m.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new W(`Encoding ${this.encodingName(u)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(V.UTF8)||i.equals(V.ISO8859_1)||i.equals(V.ASCII)}static encodeFallback(i){const m=btoa(unescape(encodeURIComponent(i))).split(""),y=[];for(let b=0;b<m.length;b++)y.push(m[b].charCodeAt(0));return new Uint8Array(y)}}class ${static castAsNonUtf8Char(i,u=null){const m=u?u.getName():this.ISO88591;return H.decode(new Uint8Array([i]),m)}static guessEncoding(i,u){if(u!=null&&u.get(z.CHARACTER_SET)!==void 0)return u.get(z.CHARACTER_SET).toString();const m=i.length;let y=!0,b=!0,w=!0,S=0,T=0,M=0,B=0,X=0,Z=0,ne=0,he=0,pe=0,Ae=0,Pe=0;const rt=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let et=0;et<m&&(y||b||w);et++){const Ze=i[et]&255;w&&(S>0?(Ze&128)===0?w=!1:S--:(Ze&128)!==0&&((Ze&64)===0?w=!1:(S++,(Ze&32)===0?T++:(S++,(Ze&16)===0?M++:(S++,(Ze&8)===0?B++:w=!1))))),y&&(Ze>127&&Ze<160?y=!1:Ze>159&&(Ze<192||Ze===215||Ze===247)&&Pe++),b&&(X>0?Ze<64||Ze===127||Ze>252?b=!1:X--:Ze===128||Ze===160||Ze>239?b=!1:Ze>160&&Ze<224?(Z++,he=0,ne++,ne>pe&&(pe=ne)):Ze>127?(X++,ne=0,he++,he>Ae&&(Ae=he)):(ne=0,he=0))}return w&&S>0&&(w=!1),b&&X>0&&(b=!1),w&&(rt||T+M+B>0)?$.UTF8:b&&($.ASSUME_SHIFT_JIS||pe>=3||Ae>=3)?$.SHIFT_JIS:y&&b?pe===2&&Z===2||Pe*10>=m?$.SHIFT_JIS:$.ISO88591:y?$.ISO88591:b?$.SHIFT_JIS:w?$.UTF8:$.PLATFORM_DEFAULT_ENCODING}static format(i,...u){let m=-1;function y(w,S,T,M,B,X){if(w==="%%")return"%";if(u[++m]===void 0)return;w=M?parseInt(M.substr(1)):void 0;let Z=B?parseInt(B.substr(1)):void 0,ne;switch(X){case"s":ne=u[m];break;case"c":ne=u[m][0];break;case"f":ne=parseFloat(u[m]).toFixed(w);break;case"p":ne=parseFloat(u[m]).toPrecision(w);break;case"e":ne=parseFloat(u[m]).toExponential(w);break;case"x":ne=parseInt(u[m]).toString(Z||16);break;case"d":ne=parseFloat(parseInt(u[m],Z||10).toPrecision(w)).toFixed(0);break}ne=typeof ne=="object"?JSON.stringify(ne):(+ne).toString(Z);let he=parseInt(T),pe=T&&T[0]+""=="0"?"0":" ";for(;ne.length<he;)ne=S!==void 0?ne+pe:pe+ne;return ne}let b=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(b,y)}static getBytes(i,u){return H.encode(i,u)}static getCharCode(i,u=0){return i.charCodeAt(u)}static getCharAt(i){return String.fromCharCode(i)}}$.SHIFT_JIS=V.SJIS.getName(),$.GB2312="GB2312",$.ISO88591=V.ISO8859_1.getName(),$.EUC_JP="EUC_JP",$.UTF8=V.UTF8.getName(),$.PLATFORM_DEFAULT_ENCODING=$.UTF8,$.ASSUME_SHIFT_JIS=!1;class ce{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=$.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,u,m){for(let y=u;u<u+m;y++)this.append(i[y]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,u){this.value=this.value.substr(0,i)+u+this.value.substr(i+1)}substring(i,u){return this.value.substring(i,u)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,u){this.value=this.value.substr(0,i)+u+this.value.substr(i+u.length)}}class me{constructor(i,u,m,y){if(this.width=i,this.height=u,this.rowSize=m,this.bits=y,u==null&&(u=i),this.height=u,i<1||u<1)throw new E("Both dimensions must be greater than 0");m==null&&(m=Math.floor((i+31)/32)),this.rowSize=m,y==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const u=i.length,m=i[0].length,y=new me(m,u);for(let b=0;b<u;b++){const w=i[b];for(let S=0;S<m;S++)w[S]&&y.set(S,b)}return y}static parseFromString(i,u,m){if(i===null)throw new E("stringRepresentation cannot be null");const y=new Array(i.length);let b=0,w=0,S=-1,T=0,M=0;for(;M<i.length;)if(i.charAt(M)===`
`||i.charAt(M)==="\r"){if(b>w){if(S===-1)S=b-w;else if(b-w!==S)throw new E("row lengths do not match");w=b,T++}M++}else if(i.substring(M,M+u.length)===u)M+=u.length,y[b]=!0,b++;else if(i.substring(M,M+m.length)===m)M+=m.length,y[b]=!1,b++;else throw new E("illegal character encountered: "+i.substring(M));if(b>w){if(S===-1)S=b-w;else if(b-w!==S)throw new E("row lengths do not match");T++}const B=new me(S,T);for(let X=0;X<b;X++)y[X]&&B.set(Math.floor(X%S),Math.floor(X/S));return B}get(i,u){const m=u*this.rowSize+Math.floor(i/32);return(this.bits[m]>>>(i&31)&1)!==0}set(i,u){const m=u*this.rowSize+Math.floor(i/32);this.bits[m]|=1<<(i&31)&4294967295}unset(i,u){const m=u*this.rowSize+Math.floor(i/32);this.bits[m]&=~(1<<(i&31)&4294967295)}flip(i,u){const m=u*this.rowSize+Math.floor(i/32);this.bits[m]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new E("input matrix dimensions do not match");const u=new Y(Math.floor(this.width/32)+1),m=this.rowSize,y=this.bits;for(let b=0,w=this.height;b<w;b++){const S=b*m,T=i.getRow(b,u).getBitArray();for(let M=0;M<m;M++)y[S+M]^=T[M]}}clear(){const i=this.bits,u=i.length;for(let m=0;m<u;m++)i[m]=0}setRegion(i,u,m,y){if(u<0||i<0)throw new E("Left and top must be nonnegative");if(y<1||m<1)throw new E("Height and width must be at least 1");const b=i+m,w=u+y;if(w>this.height||b>this.width)throw new E("The region must fit inside the matrix");const S=this.rowSize,T=this.bits;for(let M=u;M<w;M++){const B=M*S;for(let X=i;X<b;X++)T[B+Math.floor(X/32)]|=1<<(X&31)&4294967295}}getRow(i,u){u==null||u.getSize()<this.width?u=new Y(this.width):u.clear();const m=this.rowSize,y=this.bits,b=i*m;for(let w=0;w<m;w++)u.setBulk(w*32,y[b+w]);return u}setRow(i,u){P.arraycopy(u.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),u=this.getHeight();let m=new Y(i),y=new Y(i);for(let b=0,w=Math.floor((u+1)/2);b<w;b++)m=this.getRow(b,m),y=this.getRow(u-1-b,y),m.reverse(),y.reverse(),this.setRow(b,y),this.setRow(u-1-b,m)}getEnclosingRectangle(){const i=this.width,u=this.height,m=this.rowSize,y=this.bits;let b=i,w=u,S=-1,T=-1;for(let M=0;M<u;M++)for(let B=0;B<m;B++){const X=y[M*m+B];if(X!==0){if(M<w&&(w=M),M>T&&(T=M),B*32<b){let Z=0;for(;(X<<31-Z&4294967295)===0;)Z++;B*32+Z<b&&(b=B*32+Z)}if(B*32+31>S){let Z=31;for(;!(X>>>Z);)Z--;B*32+Z>S&&(S=B*32+Z)}}}return S<b||T<w?null:Int32Array.from([b,w,S-b+1,T-w+1])}getTopLeftOnBit(){const i=this.rowSize,u=this.bits;let m=0;for(;m<u.length&&u[m]===0;)m++;if(m===u.length)return null;const y=m/i;let b=m%i*32;const w=u[m];let S=0;for(;(w<<31-S&4294967295)===0;)S++;return b+=S,Int32Array.from([b,y])}getBottomRightOnBit(){const i=this.rowSize,u=this.bits;let m=u.length-1;for(;m>=0&&u[m]===0;)m--;if(m<0)return null;const y=Math.floor(m/i);let b=Math.floor(m%i)*32;const w=u[m];let S=31;for(;!(w>>>S);)S--;return b+=S,Int32Array.from([b,y])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof me))return!1;const u=i;return this.width===u.width&&this.height===u.height&&this.rowSize===u.rowSize&&F.equals(this.bits,u.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+F.hashCode(this.bits),i}toString(i="X ",u="  ",m=`
`){return this.buildToString(i,u,m)}buildToString(i,u,m){let y=new ce;for(let b=0,w=this.height;b<w;b++){for(let S=0,T=this.width;S<T;S++)y.append(this.get(S,b)?i:u);y.append(m)}return y.toString()}clone(){return new me(this.width,this.height,this.rowSize,this.bits.slice())}}class ae extends p{static getNotFoundInstance(){return new ae}}ae.kind="NotFoundException";class J extends _{constructor(i){super(i),this.luminances=J.EMPTY,this.buckets=new Int32Array(J.LUMINANCE_BUCKETS)}getBlackRow(i,u){const m=this.getLuminanceSource(),y=m.getWidth();u==null||u.getSize()<y?u=new Y(y):u.clear(),this.initArrays(y);const b=m.getRow(i,this.luminances),w=this.buckets;for(let T=0;T<y;T++)w[(b[T]&255)>>J.LUMINANCE_SHIFT]++;const S=J.estimateBlackPoint(w);if(y<3)for(let T=0;T<y;T++)(b[T]&255)<S&&u.set(T);else{let T=b[0]&255,M=b[1]&255;for(let B=1;B<y-1;B++){const X=b[B+1]&255;(M*4-T-X)/2<S&&u.set(B),T=M,M=X}}return u}getBlackMatrix(){const i=this.getLuminanceSource(),u=i.getWidth(),m=i.getHeight(),y=new me(u,m);this.initArrays(u);const b=this.buckets;for(let T=1;T<5;T++){const M=Math.floor(m*T/5),B=i.getRow(M,this.luminances),X=Math.floor(u*4/5);for(let Z=Math.floor(u/5);Z<X;Z++){const ne=B[Z]&255;b[ne>>J.LUMINANCE_SHIFT]++}}const w=J.estimateBlackPoint(b),S=i.getMatrix();for(let T=0;T<m;T++){const M=T*u;for(let B=0;B<u;B++)(S[M+B]&255)<w&&y.set(B,T)}return y}createBinarizer(i){return new J(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const u=this.buckets;for(let m=0;m<J.LUMINANCE_BUCKETS;m++)u[m]=0}static estimateBlackPoint(i){const u=i.length;let m=0,y=0,b=0;for(let B=0;B<u;B++)i[B]>b&&(y=B,b=i[B]),i[B]>m&&(m=i[B]);let w=0,S=0;for(let B=0;B<u;B++){const X=B-y,Z=i[B]*X*X;Z>S&&(w=B,S=Z)}if(y>w){const B=y;y=w,w=B}if(w-y<=u/16)throw new ae;let T=w-1,M=-1;for(let B=w-1;B>y;B--){const X=B-y,Z=X*X*(w-B)*(m-i[B]);Z>M&&(T=B,M=Z)}return T<<J.LUMINANCE_SHIFT}}J.LUMINANCE_BITS=5,J.LUMINANCE_SHIFT=8-J.LUMINANCE_BITS,J.LUMINANCE_BUCKETS=1<<J.LUMINANCE_BITS,J.EMPTY=Uint8ClampedArray.from([0]);class se extends J{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),u=i.getWidth(),m=i.getHeight();if(u>=se.MINIMUM_DIMENSION&&m>=se.MINIMUM_DIMENSION){const y=i.getMatrix();let b=u>>se.BLOCK_SIZE_POWER;(u&se.BLOCK_SIZE_MASK)!==0&&b++;let w=m>>se.BLOCK_SIZE_POWER;(m&se.BLOCK_SIZE_MASK)!==0&&w++;const S=se.calculateBlackPoints(y,b,w,u,m),T=new me(u,m);se.calculateThresholdForBlock(y,b,w,u,m,S,T),this.matrix=T}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new se(i)}static calculateThresholdForBlock(i,u,m,y,b,w,S){const T=b-se.BLOCK_SIZE,M=y-se.BLOCK_SIZE;for(let B=0;B<m;B++){let X=B<<se.BLOCK_SIZE_POWER;X>T&&(X=T);const Z=se.cap(B,2,m-3);for(let ne=0;ne<u;ne++){let he=ne<<se.BLOCK_SIZE_POWER;he>M&&(he=M);const pe=se.cap(ne,2,u-3);let Ae=0;for(let rt=-2;rt<=2;rt++){const et=w[Z+rt];Ae+=et[pe-2]+et[pe-1]+et[pe]+et[pe+1]+et[pe+2]}const Pe=Ae/25;se.thresholdBlock(i,he,X,Pe,y,S)}}}static cap(i,u,m){return i<u?u:i>m?m:i}static thresholdBlock(i,u,m,y,b,w){for(let S=0,T=m*b+u;S<se.BLOCK_SIZE;S++,T+=b)for(let M=0;M<se.BLOCK_SIZE;M++)(i[T+M]&255)<=y&&w.set(u+M,m+S)}static calculateBlackPoints(i,u,m,y,b){const w=b-se.BLOCK_SIZE,S=y-se.BLOCK_SIZE,T=new Array(m);for(let M=0;M<m;M++){T[M]=new Int32Array(u);let B=M<<se.BLOCK_SIZE_POWER;B>w&&(B=w);for(let X=0;X<u;X++){let Z=X<<se.BLOCK_SIZE_POWER;Z>S&&(Z=S);let ne=0,he=255,pe=0;for(let Pe=0,rt=B*y+Z;Pe<se.BLOCK_SIZE;Pe++,rt+=y){for(let et=0;et<se.BLOCK_SIZE;et++){const Ze=i[rt+et]&255;ne+=Ze,Ze<he&&(he=Ze),Ze>pe&&(pe=Ze)}if(pe-he>se.MIN_DYNAMIC_RANGE)for(Pe++,rt+=y;Pe<se.BLOCK_SIZE;Pe++,rt+=y)for(let et=0;et<se.BLOCK_SIZE;et++)ne+=i[rt+et]&255}let Ae=ne>>se.BLOCK_SIZE_POWER*2;if(pe-he<=se.MIN_DYNAMIC_RANGE&&(Ae=he/2,M>0&&X>0)){const Pe=(T[M-1][X]+2*T[M][X-1]+T[M-1][X-1])/4;he<Pe&&(Ae=Pe)}T[M][X]=Ae}}return T}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class Ee{constructor(i,u){this.width=i,this.height=u}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,u,m,y){throw new W("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new W("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new W("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let u=new ce;for(let m=0;m<this.height;m++){const y=this.getRow(m,i);for(let b=0;b<this.width;b++){const w=y[b]&255;let S;w<64?S="#":w<128?S="+":w<192?S=".":S=" ",u.append(S)}u.append(`
`)}return u.toString()}}class we extends Ee{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,u){const m=this.delegate.getRow(i,u),y=this.getWidth();for(let b=0;b<y;b++)m[b]=255-(m[b]&255);return m}getMatrix(){const i=this.delegate.getMatrix(),u=this.getWidth()*this.getHeight(),m=new Uint8ClampedArray(u);for(let y=0;y<u;y++)m[y]=255-(i[y]&255);return m}isCropSupported(){return this.delegate.isCropSupported()}crop(i,u,m,y){return new we(this.delegate.crop(i,u,m,y))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new we(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new we(this.delegate.rotateCounterClockwise45())}}class te extends Ee{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=te.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const u=i.getContext("2d").getImageData(0,0,i.width,i.height);return te.toGrayscaleBuffer(u.data,i.width,i.height)}static toGrayscaleBuffer(i,u,m){const y=new Uint8ClampedArray(u*m);for(let b=0,w=0,S=i.length;b<S;b+=4,w++){let T;if(i[b+3]===0)T=255;else{const B=i[b],X=i[b+1],Z=i[b+2];T=306*B+601*X+117*Z+512>>10}y[w]=T}return y}getRow(i,u){if(i<0||i>=this.getHeight())throw new E("Requested row is outside the image: "+i);const m=this.getWidth(),y=i*m;return u===null?u=this.buffer.slice(y,y+m):(u.length<m&&(u=new Uint8ClampedArray(m)),u.set(this.buffer.slice(y,y+m))),u}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,u,m,y){return super.crop(i,u,m,y),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const u=this.getTempCanvasElement(),m=u.getContext("2d"),y=i*te.DEGREE_TO_RADIANS,b=this.canvas.width,w=this.canvas.height,S=Math.ceil(Math.abs(Math.cos(y))*b+Math.abs(Math.sin(y))*w),T=Math.ceil(Math.abs(Math.sin(y))*b+Math.abs(Math.cos(y))*w);return u.width=S,u.height=T,m.translate(S/2,T/2),m.rotate(y),m.drawImage(this.canvas,b/-2,w/-2),this.buffer=te.makeBufferFromCanvasImageData(u),this}invert(){return new we(this)}}te.DEGREE_TO_RADIANS=Math.PI/180;class K{constructor(i,u,m){this.deviceId=i,this.label=u,this.kind="videoinput",this.groupId=m||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ee=(globalThis||oh||self||window||void 0)&&(globalThis||oh||self||window||void 0).__awaiter||function(G,i,u,m){function y(b){return b instanceof u?b:new u(function(w){w(b)})}return new(u||(u=Promise))(function(b,w){function S(B){try{M(m.next(B))}catch(X){w(X)}}function T(B){try{M(m.throw(B))}catch(X){w(X)}}function M(B){B.done?b(B.value):y(B.value).then(S,T)}M((m=m.apply(G,i||[])).next())})};class ge{constructor(i,u=500,m){this.reader=i,this.timeBetweenScansMillis=u,this._hints=m,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return ee(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),u=[];for(const m of i){const y=m.kind==="video"?"videoinput":m.kind;if(y!=="videoinput")continue;const b=m.deviceId||m.id,w=m.label||`Video device ${u.length+1}`,S=m.groupId,T={deviceId:b,label:w,kind:y,groupId:S};u.push(T)}return u})}getVideoInputDevices(){return ee(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(u=>new K(u.deviceId,u.label))})}findDeviceById(i){return ee(this,void 0,void 0,function*(){const u=yield this.listVideoInputDevices();return u?u.find(m=>m.deviceId===i):null})}decodeFromInputVideoDevice(i,u){return ee(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,u)})}decodeOnceFromVideoDevice(i,u){return ee(this,void 0,void 0,function*(){this.reset();let m;i?m={deviceId:{exact:i}}:m={facingMode:"environment"};const y={video:m};return yield this.decodeOnceFromConstraints(y,u)})}decodeOnceFromConstraints(i,u){return ee(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(m,u)})}decodeOnceFromStream(i,u){return ee(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(i,u);return yield this.decodeOnce(m)})}decodeFromInputVideoDeviceContinuously(i,u,m){return ee(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,u,m)})}decodeFromVideoDevice(i,u,m){return ee(this,void 0,void 0,function*(){let y;i?y={deviceId:{exact:i}}:y={facingMode:"environment"};const b={video:y};return yield this.decodeFromConstraints(b,u,m)})}decodeFromConstraints(i,u,m){return ee(this,void 0,void 0,function*(){const y=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(y,u,m)})}decodeFromStream(i,u,m){return ee(this,void 0,void 0,function*(){this.reset();const y=yield this.attachStreamToVideo(i,u);return yield this.decodeContinuously(y,m)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,u){return ee(this,void 0,void 0,function*(){const m=this.prepareVideoElement(u);return this.addVideoSource(m,i),this.videoElement=m,this.stream=i,yield this.playVideoOnLoadAsync(m),m})}playVideoOnLoadAsync(i){return new Promise((u,m)=>this.playVideoOnLoad(i,()=>u()))}playVideoOnLoad(i,u){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",u),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return ee(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,u){const m=document.getElementById(i);if(!m)throw new x(`element with id '${i}' not found`);if(m.nodeName.toLowerCase()!==u.toLowerCase())throw new x(`element with id '${i}' must be an ${u} element`);return m}decodeFromImage(i,u){if(!i&&!u)throw new x("either imageElement with a src set or an url must be provided");return u&&!i?this.decodeFromImageUrl(u):this.decodeFromImageElement(i)}decodeFromVideo(i,u){if(!i&&!u)throw new x("Either an element with a src set or an URL must be provided");return u&&!i?this.decodeFromVideoUrl(u):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,u,m){if(i===void 0&&u===void 0)throw new x("Either an element with a src set or an URL must be provided");return u&&!i?this.decodeFromVideoUrlContinuously(u,m):this.decodeFromVideoElementContinuously(i,m)}decodeFromImageElement(i){if(!i)throw new x("An image element must be provided.");this.reset();const u=this.prepareImageElement(i);this.imageElement=u;let m;return this.isImageLoaded(u)?m=this.decodeOnce(u,!1,!0):m=this._decodeOnLoadImage(u),m}decodeFromVideoElement(i){const u=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(u)}decodeFromVideoElementContinuously(i,u){const m=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(m,u)}_decodeFromVideoElementSetup(i){if(!i)throw new x("A video element must be provided.");this.reset();const u=this.prepareVideoElement(i);return this.videoElement=u,u}decodeFromImageUrl(i){if(!i)throw new x("An URL must be provided.");this.reset();const u=this.prepareImageElement();this.imageElement=u;const m=this._decodeOnLoadImage(u);return u.src=i,m}decodeFromVideoUrl(i){if(!i)throw new x("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),m=this.decodeFromVideoElement(u);return u.src=i,m}decodeFromVideoUrlContinuously(i,u){if(!i)throw new x("An URL must be provided.");this.reset();const m=this.prepareVideoElement(),y=this.decodeFromVideoElementContinuously(m,u);return m.src=i,y}_decodeOnLoadImage(i){return new Promise((u,m)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(u,m),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return ee(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,u){return ee(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,u)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let u;return typeof i>"u"&&(u=document.createElement("img"),u.width=200,u.height=200),typeof i=="string"&&(u=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(u=i),u}prepareVideoElement(i){let u;return!i&&typeof document<"u"&&(u=document.createElement("video"),u.width=200,u.height=200),typeof i=="string"&&(u=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(u=i),u.setAttribute("autoplay","true"),u.setAttribute("muted","true"),u.setAttribute("playsinline","true"),u}decodeOnce(i,u=!0,m=!0){this._stopAsyncDecode=!1;const y=(b,w)=>{if(this._stopAsyncDecode){w(new ae("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const S=this.decode(i);b(S)}catch(S){const T=u&&S instanceof ae,B=(S instanceof O||S instanceof L)&&m;if(T||B)return setTimeout(y,this._timeBetweenDecodingAttempts,b,w);w(S)}};return new Promise((b,w)=>y(b,w))}decodeContinuously(i,u){this._stopContinuousDecode=!1;const m=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const y=this.decode(i);u(y,null),setTimeout(m,this.timeBetweenScansMillis)}catch(y){u(null,y);const b=y instanceof O||y instanceof L,w=y instanceof ae;(b||w)&&setTimeout(m,this._timeBetweenDecodingAttempts)}};m()}decode(i){const u=this.createBinaryBitmap(i);return this.decodeBitmap(u)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,u,m){u||(u={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),m||(m=this.captureCanvasContext),m.drawImage(i,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}drawImageOnCanvas(i,u,m=this.captureCanvasContext){u||(u={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),m||(m=this.captureCanvasContext),m.drawImage(i,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const u=this.getCaptureCanvas(i),m=new te(u),y=new se(m);return new C(y)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const m=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=m}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const u=this.createCaptureCanvas(i);this.captureCanvas=u}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const u=document.createElement("canvas");let m,y;return typeof i<"u"&&(i instanceof HTMLVideoElement?(m=i.videoWidth,y=i.videoHeight):i instanceof HTMLImageElement&&(m=i.naturalWidth||i.width,y=i.naturalHeight||i.height)),u.style.width=m+"px",u.style.height=y+"px",u.width=m,u.height=y,u}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,u){try{i.srcObject=u}catch{i.src=URL.createObjectURL(u)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class le{constructor(i,u,m=u==null?0:8*u.length,y,b,w=P.currentTimeMillis()){this.text=i,this.rawBytes=u,this.numBits=m,this.resultPoints=y,this.format=b,this.timestamp=w,this.text=i,this.rawBytes=u,m==null?this.numBits=u==null?0:8*u.length:this.numBits=m,this.resultPoints=y,this.format=b,this.resultMetadata=null,w==null?this.timestamp=P.currentTimeMillis():this.timestamp=w}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,u){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,u)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const u=this.resultPoints;if(u===null)this.resultPoints=i;else if(i!==null&&i.length>0){const m=new Array(u.length+i.length);P.arraycopy(u,0,m,0,u.length),P.arraycopy(i,0,m,u.length,i.length),this.resultPoints=m}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ce;(function(G){G[G.AZTEC=0]="AZTEC",G[G.CODABAR=1]="CODABAR",G[G.CODE_39=2]="CODE_39",G[G.CODE_93=3]="CODE_93",G[G.CODE_128=4]="CODE_128",G[G.DATA_MATRIX=5]="DATA_MATRIX",G[G.EAN_8=6]="EAN_8",G[G.EAN_13=7]="EAN_13",G[G.ITF=8]="ITF",G[G.MAXICODE=9]="MAXICODE",G[G.PDF_417=10]="PDF_417",G[G.QR_CODE=11]="QR_CODE",G[G.RSS_14=12]="RSS_14",G[G.RSS_EXPANDED=13]="RSS_EXPANDED",G[G.UPC_A=14]="UPC_A",G[G.UPC_E=15]="UPC_E",G[G.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ce||(Ce={}));var ie=Ce,de;(function(G){G[G.OTHER=0]="OTHER",G[G.ORIENTATION=1]="ORIENTATION",G[G.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",G[G.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",G[G.ISSUE_NUMBER=4]="ISSUE_NUMBER",G[G.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",G[G.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",G[G.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",G[G.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",G[G.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",G[G.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(de||(de={}));var $e=de;class be{constructor(i,u,m,y,b=-1,w=-1){this.rawBytes=i,this.text=u,this.byteSegments=m,this.ecLevel=y,this.structuredAppendSequenceNumber=b,this.structuredAppendParity=w,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Xe{exp(i){return this.expTable[i]}log(i){if(i===0)throw new E;return this.logTable[i]}static addOrSubtract(i,u){return i^u}}class at{constructor(i,u){if(u.length===0)throw new E;this.field=i;const m=u.length;if(m>1&&u[0]===0){let y=1;for(;y<m&&u[y]===0;)y++;y===m?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(m-y),P.arraycopy(u,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const u=this.coefficients;let m;if(i===1){m=0;for(let w=0,S=u.length;w!==S;w++){const T=u[w];m=Xe.addOrSubtract(m,T)}return m}m=u[0];const y=u.length,b=this.field;for(let w=1;w<y;w++)m=Xe.addOrSubtract(b.multiply(i,m),u[w]);return m}addOrSubtract(i){if(!this.field.equals(i.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let u=this.coefficients,m=i.coefficients;if(u.length>m.length){const w=u;u=m,m=w}let y=new Int32Array(m.length);const b=m.length-u.length;P.arraycopy(m,0,y,0,b);for(let w=b;w<m.length;w++)y[w]=Xe.addOrSubtract(u[w-b],m[w]);return new at(this.field,y)}multiply(i){if(!this.field.equals(i.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const u=this.coefficients,m=u.length,y=i.coefficients,b=y.length,w=new Int32Array(m+b-1),S=this.field;for(let T=0;T<m;T++){const M=u[T];for(let B=0;B<b;B++)w[T+B]=Xe.addOrSubtract(w[T+B],S.multiply(M,y[B]))}return new at(S,w)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const u=this.coefficients.length,m=this.field,y=new Int32Array(u),b=this.coefficients;for(let w=0;w<u;w++)y[w]=m.multiply(b[w],i);return new at(m,y)}multiplyByMonomial(i,u){if(i<0)throw new E;if(u===0)return this.field.getZero();const m=this.coefficients,y=m.length,b=new Int32Array(y+i),w=this.field;for(let S=0;S<y;S++)b[S]=w.multiply(m[S],u);return new at(w,b)}divide(i){if(!this.field.equals(i.field))throw new E("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new E("Divide by 0");const u=this.field;let m=u.getZero(),y=this;const b=i.getCoefficient(i.getDegree()),w=u.inverse(b);for(;y.getDegree()>=i.getDegree()&&!y.isZero();){const S=y.getDegree()-i.getDegree(),T=u.multiply(y.getCoefficient(y.getDegree()),w),M=i.multiplyByMonomial(S,T),B=u.buildMonomial(S,T);m=m.addOrSubtract(B),y=y.addOrSubtract(M)}return[m,y]}toString(){let i="";for(let u=this.getDegree();u>=0;u--){let m=this.getCoefficient(u);if(m!==0){if(m<0?(i+=" - ",m=-m):i.length>0&&(i+=" + "),u===0||m!==1){const y=this.field.log(m);y===0?i+="1":y===1?i+="a":(i+="a^",i+=y)}u!==0&&(u===1?i+="x":(i+="x^",i+=u))}}return i}}class Le extends p{}Le.kind="ArithmeticException";class ve extends Xe{constructor(i,u,m){super(),this.primitive=i,this.size=u,this.generatorBase=m;const y=new Int32Array(u);let b=1;for(let S=0;S<u;S++)y[S]=b,b*=2,b>=u&&(b^=i,b&=u-1);this.expTable=y;const w=new Int32Array(u);for(let S=0;S<u-1;S++)w[y[S]]=S;this.logTable=w,this.zero=new at(this,Int32Array.from([0])),this.one=new at(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,u){if(i<0)throw new E;if(u===0)return this.zero;const m=new Int32Array(i+1);return m[0]=u,new at(this,m)}inverse(i){if(i===0)throw new Le;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,u){return i===0||u===0?0:this.expTable[(this.logTable[i]+this.logTable[u])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+R.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}ve.AZTEC_DATA_12=new ve(4201,4096,1),ve.AZTEC_DATA_10=new ve(1033,1024,1),ve.AZTEC_DATA_6=new ve(67,64,1),ve.AZTEC_PARAM=new ve(19,16,1),ve.QR_CODE_FIELD_256=new ve(285,256,0),ve.DATA_MATRIX_FIELD_256=new ve(301,256,1),ve.AZTEC_DATA_8=ve.DATA_MATRIX_FIELD_256,ve.MAXICODE_FIELD_64=ve.AZTEC_DATA_6;class Ue extends p{}Ue.kind="ReedSolomonException";class oe extends p{}oe.kind="IllegalStateException";class qe{constructor(i){this.field=i}decode(i,u){const m=this.field,y=new at(m,i),b=new Int32Array(u);let w=!0;for(let ne=0;ne<u;ne++){const he=y.evaluateAt(m.exp(ne+m.getGeneratorBase()));b[b.length-1-ne]=he,he!==0&&(w=!1)}if(w)return;const S=new at(m,b),T=this.runEuclideanAlgorithm(m.buildMonomial(u,1),S,u),M=T[0],B=T[1],X=this.findErrorLocations(M),Z=this.findErrorMagnitudes(B,X);for(let ne=0;ne<X.length;ne++){const he=i.length-1-m.log(X[ne]);if(he<0)throw new Ue("Bad error location");i[he]=ve.addOrSubtract(i[he],Z[ne])}}runEuclideanAlgorithm(i,u,m){if(i.getDegree()<u.getDegree()){const ne=i;i=u,u=ne}const y=this.field;let b=i,w=u,S=y.getZero(),T=y.getOne();for(;w.getDegree()>=(m/2|0);){let ne=b,he=S;if(b=w,S=T,b.isZero())throw new Ue("r_{i-1} was zero");w=ne;let pe=y.getZero();const Ae=b.getCoefficient(b.getDegree()),Pe=y.inverse(Ae);for(;w.getDegree()>=b.getDegree()&&!w.isZero();){const rt=w.getDegree()-b.getDegree(),et=y.multiply(w.getCoefficient(w.getDegree()),Pe);pe=pe.addOrSubtract(y.buildMonomial(rt,et)),w=w.addOrSubtract(b.multiplyByMonomial(rt,et))}if(T=pe.multiply(S).addOrSubtract(he),w.getDegree()>=b.getDegree())throw new oe("Division algorithm failed to reduce polynomial?")}const M=T.getCoefficient(0);if(M===0)throw new Ue("sigmaTilde(0) was zero");const B=y.inverse(M),X=T.multiplyScalar(B),Z=w.multiplyScalar(B);return[X,Z]}findErrorLocations(i){const u=i.getDegree();if(u===1)return Int32Array.from([i.getCoefficient(1)]);const m=new Int32Array(u);let y=0;const b=this.field;for(let w=1;w<b.getSize()&&y<u;w++)i.evaluateAt(w)===0&&(m[y]=b.inverse(w),y++);if(y!==u)throw new Ue("Error locator degree does not match number of roots");return m}findErrorMagnitudes(i,u){const m=u.length,y=new Int32Array(m),b=this.field;for(let w=0;w<m;w++){const S=b.inverse(u[w]);let T=1;for(let M=0;M<m;M++)if(w!==M){const B=b.multiply(u[M],S),X=(B&1)===0?B|1:B&-2;T=b.multiply(T,X)}y[w]=b.multiply(i.evaluateAt(S),b.inverse(T)),b.getGeneratorBase()!==0&&(y[w]=b.multiply(y[w],S))}return y}}var Ne;(function(G){G[G.UPPER=0]="UPPER",G[G.LOWER=1]="LOWER",G[G.MIXED=2]="MIXED",G[G.DIGIT=3]="DIGIT",G[G.PUNCT=4]="PUNCT",G[G.BINARY=5]="BINARY"})(Ne||(Ne={}));class tt{decode(i){this.ddata=i;let u=i.getBits(),m=this.extractBits(u),y=this.correctBits(m),b=tt.convertBoolArrayToByteArray(y),w=tt.getEncodedData(y),S=new be(b,w,null,null);return S.setNumBits(y.length),S}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let u=i.length,m=Ne.UPPER,y=Ne.UPPER,b="",w=0;for(;w<u;)if(y===Ne.BINARY){if(u-w<5)break;let S=tt.readCode(i,w,5);if(w+=5,S===0){if(u-w<11)break;S=tt.readCode(i,w,11)+31,w+=11}for(let T=0;T<S;T++){if(u-w<8){w=u;break}const M=tt.readCode(i,w,8);b+=$.castAsNonUtf8Char(M),w+=8}y=m}else{let S=y===Ne.DIGIT?4:5;if(u-w<S)break;let T=tt.readCode(i,w,S);w+=S;let M=tt.getCharacter(y,T);M.startsWith("CTRL_")?(m=y,y=tt.getTable(M.charAt(5)),M.charAt(6)==="L"&&(m=y)):(b+=M,y=m)}return b}static getTable(i){switch(i){case"L":return Ne.LOWER;case"P":return Ne.PUNCT;case"M":return Ne.MIXED;case"D":return Ne.DIGIT;case"B":return Ne.BINARY;case"U":default:return Ne.UPPER}}static getCharacter(i,u){switch(i){case Ne.UPPER:return tt.UPPER_TABLE[u];case Ne.LOWER:return tt.LOWER_TABLE[u];case Ne.MIXED:return tt.MIXED_TABLE[u];case Ne.PUNCT:return tt.PUNCT_TABLE[u];case Ne.DIGIT:return tt.DIGIT_TABLE[u];default:throw new oe("Bad table")}}correctBits(i){let u,m;this.ddata.getNbLayers()<=2?(m=6,u=ve.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(m=8,u=ve.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(m=10,u=ve.AZTEC_DATA_10):(m=12,u=ve.AZTEC_DATA_12);let y=this.ddata.getNbDatablocks(),b=i.length/m;if(b<y)throw new L;let w=i.length%m,S=new Int32Array(b);for(let Z=0;Z<b;Z++,w+=m)S[Z]=tt.readCode(i,w,m);try{new qe(u).decode(S,b-y)}catch(Z){throw new L(Z)}let T=(1<<m)-1,M=0;for(let Z=0;Z<y;Z++){let ne=S[Z];if(ne===0||ne===T)throw new L;(ne===1||ne===T-1)&&M++}let B=new Array(y*m-M),X=0;for(let Z=0;Z<y;Z++){let ne=S[Z];if(ne===1||ne===T-1)B.fill(ne>1,X,X+m-1),X+=m-1;else for(let he=m-1;he>=0;--he)B[X++]=(ne&1<<he)!==0}return B}extractBits(i){let u=this.ddata.isCompact(),m=this.ddata.getNbLayers(),y=(u?11:14)+m*4,b=new Int32Array(y),w=new Array(this.totalBitsInLayer(m,u));if(u)for(let S=0;S<b.length;S++)b[S]=S;else{let S=y+1+2*R.truncDivision(R.truncDivision(y,2)-1,15),T=y/2,M=R.truncDivision(S,2);for(let B=0;B<T;B++){let X=B+R.truncDivision(B,15);b[T-B-1]=M-X-1,b[T+B]=M+X+1}}for(let S=0,T=0;S<m;S++){let M=(m-S)*4+(u?9:12),B=S*2,X=y-1-B;for(let Z=0;Z<M;Z++){let ne=Z*2;for(let he=0;he<2;he++)w[T+ne+he]=i.get(b[B+he],b[B+Z]),w[T+2*M+ne+he]=i.get(b[B+Z],b[X-he]),w[T+4*M+ne+he]=i.get(b[X-he],b[X-Z]),w[T+6*M+ne+he]=i.get(b[X-Z],b[B+he])}T+=M*8}return w}static readCode(i,u,m){let y=0;for(let b=u;b<u+m;b++)y<<=1,i[b]&&(y|=1);return y}static readByte(i,u){let m=i.length-u;return m>=8?tt.readCode(i,u,8):tt.readCode(i,u,m)<<8-m}static convertBoolArrayToByteArray(i){let u=new Uint8Array((i.length+7)/8);for(let m=0;m<u.length;m++)u[m]=tt.readByte(i,8*m);return u}totalBitsInLayer(i,u){return((u?88:112)+16*i)*i}}tt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],tt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],tt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],tt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],tt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class it{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,u,m,y){const b=i-m,w=u-y;return Math.sqrt(b*b+w*w)}static sum(i){let u=0;for(let m=0,y=i.length;m!==y;m++){const b=i[m];u+=b}return u}}class pt{static floatToIntBits(i){return i}}pt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class We{constructor(i,u){this.x=i,this.y=u}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof We){const u=i;return this.x===u.x&&this.y===u.y}return!1}hashCode(){return 31*pt.floatToIntBits(this.x)+pt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const u=this.distance(i[0],i[1]),m=this.distance(i[1],i[2]),y=this.distance(i[0],i[2]);let b,w,S;if(m>=u&&m>=y?(w=i[0],b=i[1],S=i[2]):y>=m&&y>=u?(w=i[1],b=i[0],S=i[2]):(w=i[2],b=i[0],S=i[1]),this.crossProductZ(b,w,S)<0){const T=b;b=S,S=T}i[0]=b,i[1]=w,i[2]=S}static distance(i,u){return it.distance(i.x,i.y,u.x,u.y)}static crossProductZ(i,u,m){const y=u.x,b=u.y;return(m.x-y)*(i.y-b)-(m.y-b)*(i.x-y)}}class lt{constructor(i,u){this.bits=i,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class Fe extends lt{constructor(i,u,m,y,b){super(i,u),this.compact=m,this.nbDatablocks=y,this.nbLayers=b}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class mt{constructor(i,u,m,y){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),u==null&&(u=mt.INIT_SIZE),m==null&&(m=i.getWidth()/2|0),y==null&&(y=i.getHeight()/2|0);const b=u/2|0;if(this.leftInit=m-b,this.rightInit=m+b,this.upInit=y-b,this.downInit=y+b,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ae}detect(){let i=this.leftInit,u=this.rightInit,m=this.upInit,y=this.downInit,b=!1,w=!0,S=!1,T=!1,M=!1,B=!1,X=!1;const Z=this.width,ne=this.height;for(;w;){w=!1;let he=!0;for(;(he||!T)&&u<Z;)he=this.containsBlackPoint(m,y,u,!1),he?(u++,w=!0,T=!0):T||u++;if(u>=Z){b=!0;break}let pe=!0;for(;(pe||!M)&&y<ne;)pe=this.containsBlackPoint(i,u,y,!0),pe?(y++,w=!0,M=!0):M||y++;if(y>=ne){b=!0;break}let Ae=!0;for(;(Ae||!B)&&i>=0;)Ae=this.containsBlackPoint(m,y,i,!1),Ae?(i--,w=!0,B=!0):B||i--;if(i<0){b=!0;break}let Pe=!0;for(;(Pe||!X)&&m>=0;)Pe=this.containsBlackPoint(i,u,m,!0),Pe?(m--,w=!0,X=!0):X||m--;if(m<0){b=!0;break}w&&(S=!0)}if(!b&&S){const he=u-i;let pe=null;for(let et=1;pe===null&&et<he;et++)pe=this.getBlackPointOnSegment(i,y-et,i+et,y);if(pe==null)throw new ae;let Ae=null;for(let et=1;Ae===null&&et<he;et++)Ae=this.getBlackPointOnSegment(i,m+et,i+et,m);if(Ae==null)throw new ae;let Pe=null;for(let et=1;Pe===null&&et<he;et++)Pe=this.getBlackPointOnSegment(u,m+et,u-et,m);if(Pe==null)throw new ae;let rt=null;for(let et=1;rt===null&&et<he;et++)rt=this.getBlackPointOnSegment(u,y-et,u-et,y);if(rt==null)throw new ae;return this.centerEdges(rt,pe,Pe,Ae)}else throw new ae}getBlackPointOnSegment(i,u,m,y){const b=it.round(it.distance(i,u,m,y)),w=(m-i)/b,S=(y-u)/b,T=this.image;for(let M=0;M<b;M++){const B=it.round(i+M*w),X=it.round(u+M*S);if(T.get(B,X))return new We(B,X)}return null}centerEdges(i,u,m,y){const b=i.getX(),w=i.getY(),S=u.getX(),T=u.getY(),M=m.getX(),B=m.getY(),X=y.getX(),Z=y.getY(),ne=mt.CORR;return b<this.width/2?[new We(X-ne,Z+ne),new We(S+ne,T+ne),new We(M-ne,B-ne),new We(b+ne,w-ne)]:[new We(X+ne,Z+ne),new We(S+ne,T-ne),new We(M-ne,B+ne),new We(b-ne,w-ne)]}containsBlackPoint(i,u,m,y){const b=this.image;if(y){for(let w=i;w<=u;w++)if(b.get(w,m))return!0}else for(let w=i;w<=u;w++)if(b.get(m,w))return!0;return!1}}mt.INIT_SIZE=10,mt.CORR=1;class $t{static checkAndNudgePoints(i,u){const m=i.getWidth(),y=i.getHeight();let b=!0;for(let w=0;w<u.length&&b;w+=2){const S=Math.floor(u[w]),T=Math.floor(u[w+1]);if(S<-1||S>m||T<-1||T>y)throw new ae;b=!1,S===-1?(u[w]=0,b=!0):S===m&&(u[w]=m-1,b=!0),T===-1?(u[w+1]=0,b=!0):T===y&&(u[w+1]=y-1,b=!0)}b=!0;for(let w=u.length-2;w>=0&&b;w-=2){const S=Math.floor(u[w]),T=Math.floor(u[w+1]);if(S<-1||S>m||T<-1||T>y)throw new ae;b=!1,S===-1?(u[w]=0,b=!0):S===m&&(u[w]=m-1,b=!0),T===-1?(u[w+1]=0,b=!0):T===y&&(u[w+1]=y-1,b=!0)}}}class er{constructor(i,u,m,y,b,w,S,T,M){this.a11=i,this.a21=u,this.a31=m,this.a12=y,this.a22=b,this.a32=w,this.a13=S,this.a23=T,this.a33=M}static quadrilateralToQuadrilateral(i,u,m,y,b,w,S,T,M,B,X,Z,ne,he,pe,Ae){const Pe=er.quadrilateralToSquare(i,u,m,y,b,w,S,T);return er.squareToQuadrilateral(M,B,X,Z,ne,he,pe,Ae).times(Pe)}transformPoints(i){const u=i.length,m=this.a11,y=this.a12,b=this.a13,w=this.a21,S=this.a22,T=this.a23,M=this.a31,B=this.a32,X=this.a33;for(let Z=0;Z<u;Z+=2){const ne=i[Z],he=i[Z+1],pe=b*ne+T*he+X;i[Z]=(m*ne+w*he+M)/pe,i[Z+1]=(y*ne+S*he+B)/pe}}transformPointsWithValues(i,u){const m=this.a11,y=this.a12,b=this.a13,w=this.a21,S=this.a22,T=this.a23,M=this.a31,B=this.a32,X=this.a33,Z=i.length;for(let ne=0;ne<Z;ne++){const he=i[ne],pe=u[ne],Ae=b*he+T*pe+X;i[ne]=(m*he+w*pe+M)/Ae,u[ne]=(y*he+S*pe+B)/Ae}}static squareToQuadrilateral(i,u,m,y,b,w,S,T){const M=i-m+b-S,B=u-y+w-T;if(M===0&&B===0)return new er(m-i,b-m,i,y-u,w-y,u,0,0,1);{const X=m-b,Z=S-b,ne=y-w,he=T-w,pe=X*he-Z*ne,Ae=(M*he-Z*B)/pe,Pe=(X*B-M*ne)/pe;return new er(m-i+Ae*m,S-i+Pe*S,i,y-u+Ae*y,T-u+Pe*T,u,Ae,Pe,1)}}static quadrilateralToSquare(i,u,m,y,b,w,S,T){return er.squareToQuadrilateral(i,u,m,y,b,w,S,T).buildAdjoint()}buildAdjoint(){return new er(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new er(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class tr extends $t{sampleGrid(i,u,m,y,b,w,S,T,M,B,X,Z,ne,he,pe,Ae,Pe,rt,et){const Ze=er.quadrilateralToQuadrilateral(y,b,w,S,T,M,B,X,Z,ne,he,pe,Ae,Pe,rt,et);return this.sampleGridWithTransform(i,u,m,Ze)}sampleGridWithTransform(i,u,m,y){if(u<=0||m<=0)throw new ae;const b=new me(u,m),w=new Float32Array(2*u);for(let S=0;S<m;S++){const T=w.length,M=S+.5;for(let B=0;B<T;B+=2)w[B]=B/2+.5,w[B+1]=M;y.transformPoints(w),$t.checkAndNudgePoints(i,w);try{for(let B=0;B<T;B+=2)i.get(Math.floor(w[B]),Math.floor(w[B+1]))&&b.set(B/2,S)}catch{throw new ae}}return b}}class ut{static setGridSampler(i){ut.gridSampler=i}static getInstance(){return ut.gridSampler}}ut.gridSampler=new tr;class At{constructor(i,u){this.x=i,this.y=u}toResultPoint(){return new We(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class vr{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let u=this.getMatrixCenter(),m=this.getBullsEyeCorners(u);if(i){let w=m[0];m[0]=m[2],m[2]=w}this.extractParameters(m);let y=this.sampleGrid(this.image,m[this.shift%4],m[(this.shift+1)%4],m[(this.shift+2)%4],m[(this.shift+3)%4]),b=this.getMatrixCornerPoints(m);return new Fe(y,b,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new ae;let u=2*this.nbCenterLayers,m=new Int32Array([this.sampleLine(i[0],i[1],u),this.sampleLine(i[1],i[2],u),this.sampleLine(i[2],i[3],u),this.sampleLine(i[3],i[0],u)]);this.shift=this.getRotation(m,u);let y=0;for(let w=0;w<4;w++){let S=m[(this.shift+w)%4];this.compact?(y<<=7,y+=S>>1&127):(y<<=10,y+=(S>>2&992)+(S>>1&31))}let b=this.getCorrectedParameterData(y,this.compact);this.compact?(this.nbLayers=(b>>6)+1,this.nbDataBlocks=(b&63)+1):(this.nbLayers=(b>>11)+1,this.nbDataBlocks=(b&2047)+1)}getRotation(i,u){let m=0;i.forEach((y,b,w)=>{let S=(y>>u-2<<1)+(y&1);m=(m<<3)+S}),m=((m&1)<<11)+(m>>1);for(let y=0;y<4;y++)if(R.bitCount(m^this.EXPECTED_CORNER_BITS[y])<=2)return y;throw new ae}getCorrectedParameterData(i,u){let m,y;u?(m=7,y=2):(m=10,y=4);let b=m-y,w=new Int32Array(m);for(let T=m-1;T>=0;--T)w[T]=i&15,i>>=4;try{new qe(ve.AZTEC_PARAM).decode(w,b)}catch{throw new ae}let S=0;for(let T=0;T<y;T++)S=(S<<4)+w[T];return S}getBullsEyeCorners(i){let u=i,m=i,y=i,b=i,w=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let X=this.getFirstDifferent(u,w,1,-1),Z=this.getFirstDifferent(m,w,1,1),ne=this.getFirstDifferent(y,w,-1,1),he=this.getFirstDifferent(b,w,-1,-1);if(this.nbCenterLayers>2){let pe=this.distancePoint(he,X)*this.nbCenterLayers/(this.distancePoint(b,u)*(this.nbCenterLayers+2));if(pe<.75||pe>1.25||!this.isWhiteOrBlackRectangle(X,Z,ne,he))break}u=X,m=Z,y=ne,b=he,w=!w}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ae;this.compact=this.nbCenterLayers===5;let S=new We(u.getX()+.5,u.getY()-.5),T=new We(m.getX()+.5,m.getY()+.5),M=new We(y.getX()-.5,y.getY()+.5),B=new We(b.getX()-.5,b.getY()-.5);return this.expandSquare([S,T,M,B],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,u,m,y;try{let S=new mt(this.image).detect();i=S[0],u=S[1],m=S[2],y=S[3]}catch{let T=this.image.getWidth()/2,M=this.image.getHeight()/2;i=this.getFirstDifferent(new At(T+7,M-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new At(T+7,M+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new At(T-7,M+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new At(T-7,M-7),!1,-1,-1).toResultPoint()}let b=it.round((i.getX()+y.getX()+u.getX()+m.getX())/4),w=it.round((i.getY()+y.getY()+u.getY()+m.getY())/4);try{let S=new mt(this.image,15,b,w).detect();i=S[0],u=S[1],m=S[2],y=S[3]}catch{i=this.getFirstDifferent(new At(b+7,w-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new At(b+7,w+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new At(b-7,w+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new At(b-7,w-7),!1,-1,-1).toResultPoint()}return b=it.round((i.getX()+y.getX()+u.getX()+m.getX())/4),w=it.round((i.getY()+y.getY()+u.getY()+m.getY())/4),new At(b,w)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,u,m,y,b){let w=ut.getInstance(),S=this.getDimension(),T=S/2-this.nbCenterLayers,M=S/2+this.nbCenterLayers;return w.sampleGrid(i,S,S,T,T,M,T,M,M,T,M,u.getX(),u.getY(),m.getX(),m.getY(),y.getX(),y.getY(),b.getX(),b.getY())}sampleLine(i,u,m){let y=0,b=this.distanceResultPoint(i,u),w=b/m,S=i.getX(),T=i.getY(),M=w*(u.getX()-i.getX())/b,B=w*(u.getY()-i.getY())/b;for(let X=0;X<m;X++)this.image.get(it.round(S+X*M),it.round(T+X*B))&&(y|=1<<m-X-1);return y}isWhiteOrBlackRectangle(i,u,m,y){let b=3;i=new At(i.getX()-b,i.getY()+b),u=new At(u.getX()-b,u.getY()-b),m=new At(m.getX()+b,m.getY()-b),y=new At(y.getX()+b,y.getY()+b);let w=this.getColor(y,i);if(w===0)return!1;let S=this.getColor(i,u);return S!==w||(S=this.getColor(u,m),S!==w)?!1:(S=this.getColor(m,y),S===w)}getColor(i,u){let m=this.distancePoint(i,u),y=(u.getX()-i.getX())/m,b=(u.getY()-i.getY())/m,w=0,S=i.getX(),T=i.getY(),M=this.image.get(i.getX(),i.getY()),B=Math.ceil(m);for(let Z=0;Z<B;Z++)S+=y,T+=b,this.image.get(it.round(S),it.round(T))!==M&&w++;let X=w/m;return X>.1&&X<.9?0:X<=.1===M?1:-1}getFirstDifferent(i,u,m,y){let b=i.getX()+m,w=i.getY()+y;for(;this.isValid(b,w)&&this.image.get(b,w)===u;)b+=m,w+=y;for(b-=m,w-=y;this.isValid(b,w)&&this.image.get(b,w)===u;)b+=m;for(b-=m;this.isValid(b,w)&&this.image.get(b,w)===u;)w+=y;return w-=y,new At(b,w)}expandSquare(i,u,m){let y=m/(2*u),b=i[0].getX()-i[2].getX(),w=i[0].getY()-i[2].getY(),S=(i[0].getX()+i[2].getX())/2,T=(i[0].getY()+i[2].getY())/2,M=new We(S+y*b,T+y*w),B=new We(S-y*b,T-y*w);b=i[1].getX()-i[3].getX(),w=i[1].getY()-i[3].getY(),S=(i[1].getX()+i[3].getX())/2,T=(i[1].getY()+i[3].getY())/2;let X=new We(S+y*b,T+y*w),Z=new We(S-y*b,T-y*w);return[M,X,B,Z]}isValid(i,u){return i>=0&&i<this.image.getWidth()&&u>0&&u<this.image.getHeight()}isValidPoint(i){let u=it.round(i.getX()),m=it.round(i.getY());return this.isValid(u,m)}distancePoint(i,u){return it.distance(i.getX(),i.getY(),u.getX(),u.getY())}distanceResultPoint(i,u){return it.distance(i.getX(),i.getY(),u.getX(),u.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(R.truncDivision(this.nbLayers-4,8)+1)+15}}class ur{decode(i,u=null){let m=null,y=new vr(i.getBlackMatrix()),b=null,w=null;try{let B=y.detectMirror(!1);b=B.getPoints(),this.reportFoundResultPoints(u,b),w=new tt().decode(B)}catch(B){m=B}if(w==null)try{let B=y.detectMirror(!0);b=B.getPoints(),this.reportFoundResultPoints(u,b),w=new tt().decode(B)}catch(B){throw m??B}let S=new le(w.getText(),w.getRawBytes(),w.getNumBits(),b,ie.AZTEC,P.currentTimeMillis()),T=w.getByteSegments();T!=null&&S.putMetadata($e.BYTE_SEGMENTS,T);let M=w.getECLevel();return M!=null&&S.putMetadata($e.ERROR_CORRECTION_LEVEL,M),S}reportFoundResultPoints(i,u){if(i!=null){let m=i.get(z.NEED_RESULT_POINT_CALLBACK);m!=null&&u.forEach((y,b,w)=>{m.foundPossibleResultPoint(y)})}}reset(){}}class ea extends ge{constructor(i=500){super(new ur,i)}}class kt{decode(i,u){try{return this.doDecode(i,u)}catch{if(u&&u.get(z.TRY_HARDER)===!0&&i.isRotateSupported()){const b=i.rotateCounterClockwise(),w=this.doDecode(b,u),S=w.getResultMetadata();let T=270;S!==null&&S.get($e.ORIENTATION)===!0&&(T=T+S.get($e.ORIENTATION)%360),w.putMetadata($e.ORIENTATION,T);const M=w.getResultPoints();if(M!==null){const B=b.getHeight();for(let X=0;X<M.length;X++)M[X]=new We(B-M[X].getY()-1,M[X].getX())}return w}else throw new ae}}reset(){}doDecode(i,u){const m=i.getWidth(),y=i.getHeight();let b=new Y(m);const w=u&&u.get(z.TRY_HARDER)===!0,S=Math.max(1,y>>(w?8:5));let T;w?T=y:T=15;const M=Math.trunc(y/2);for(let B=0;B<T;B++){const X=Math.trunc((B+1)/2),Z=(B&1)===0,ne=M+S*(Z?X:-X);if(ne<0||ne>=y)break;try{b=i.getBlackRow(ne,b)}catch{continue}for(let he=0;he<2;he++){if(he===1&&(b.reverse(),u&&u.get(z.NEED_RESULT_POINT_CALLBACK)===!0)){const pe=new Map;u.forEach((Ae,Pe)=>pe.set(Pe,Ae)),pe.delete(z.NEED_RESULT_POINT_CALLBACK),u=pe}try{const pe=this.decodeRow(ne,b,u);if(he===1){pe.putMetadata($e.ORIENTATION,180);const Ae=pe.getResultPoints();Ae!==null&&(Ae[0]=new We(m-Ae[0].getX()-1,Ae[0].getY()),Ae[1]=new We(m-Ae[1].getX()-1,Ae[1].getY()))}return pe}catch{}}}throw new ae}static recordPattern(i,u,m){const y=m.length;for(let M=0;M<y;M++)m[M]=0;const b=i.getSize();if(u>=b)throw new ae;let w=!i.get(u),S=0,T=u;for(;T<b;){if(i.get(T)!==w)m[S]++;else{if(++S===y)break;m[S]=1,w=!w}T++}if(!(S===y||S===y-1&&T===b))throw new ae}static recordPatternInReverse(i,u,m){let y=m.length,b=i.get(u);for(;u>0&&y>=0;)i.get(--u)!==b&&(y--,b=!b);if(y>=0)throw new ae;kt.recordPattern(i,u+1,m)}static patternMatchVariance(i,u,m){const y=i.length;let b=0,w=0;for(let M=0;M<y;M++)b+=i[M],w+=u[M];if(b<w)return Number.POSITIVE_INFINITY;const S=b/w;m*=S;let T=0;for(let M=0;M<y;M++){const B=i[M],X=u[M]*S,Z=B>X?B-X:X-B;if(Z>m)return Number.POSITIVE_INFINITY;T+=Z}return T/b}}class xe extends kt{static findStartPattern(i){const u=i.getSize(),m=i.getNextSet(0);let y=0,b=Int32Array.from([0,0,0,0,0,0]),w=m,S=!1;const T=6;for(let M=m;M<u;M++)if(i.get(M)!==S)b[y]++;else{if(y===T-1){let B=xe.MAX_AVG_VARIANCE,X=-1;for(let Z=xe.CODE_START_A;Z<=xe.CODE_START_C;Z++){const ne=kt.patternMatchVariance(b,xe.CODE_PATTERNS[Z],xe.MAX_INDIVIDUAL_VARIANCE);ne<B&&(B=ne,X=Z)}if(X>=0&&i.isRange(Math.max(0,w-(M-w)/2),w,!1))return Int32Array.from([w,M,X]);w+=b[0]+b[1],b=b.slice(2,b.length-1),b[y-1]=0,b[y]=0,y--}else y++;b[y]=1,S=!S}throw new ae}static decodeCode(i,u,m){kt.recordPattern(i,m,u);let y=xe.MAX_AVG_VARIANCE,b=-1;for(let w=0;w<xe.CODE_PATTERNS.length;w++){const S=xe.CODE_PATTERNS[w],T=this.patternMatchVariance(u,S,xe.MAX_INDIVIDUAL_VARIANCE);T<y&&(y=T,b=w)}if(b>=0)return b;throw new ae}decodeRow(i,u,m){const y=m&&m.get(z.ASSUME_GS1)===!0,b=xe.findStartPattern(u),w=b[2];let S=0;const T=new Uint8Array(20);T[S++]=w;let M;switch(w){case xe.CODE_START_A:M=xe.CODE_CODE_A;break;case xe.CODE_START_B:M=xe.CODE_CODE_B;break;case xe.CODE_START_C:M=xe.CODE_CODE_C;break;default:throw new L}let B=!1,X=!1,Z="",ne=b[0],he=b[1];const pe=Int32Array.from([0,0,0,0,0,0]);let Ae=0,Pe=0,rt=w,et=0,Ze=!0,zt=!1,Pt=!1;for(;!B;){const ql=X;switch(X=!1,Ae=Pe,Pe=xe.decodeCode(u,pe,he),T[S++]=Pe,Pe!==xe.CODE_STOP&&(Ze=!0),Pe!==xe.CODE_STOP&&(et++,rt+=et*Pe),ne=he,he+=pe.reduce((s0,Rd)=>s0+Rd,0),Pe){case xe.CODE_START_A:case xe.CODE_START_B:case xe.CODE_START_C:throw new L}switch(M){case xe.CODE_CODE_A:if(Pe<64)Pt===zt?Z+=String.fromCharCode(32+Pe):Z+=String.fromCharCode(32+Pe+128),Pt=!1;else if(Pe<96)Pt===zt?Z+=String.fromCharCode(Pe-64):Z+=String.fromCharCode(Pe+64),Pt=!1;else switch(Pe!==xe.CODE_STOP&&(Ze=!1),Pe){case xe.CODE_FNC_1:y&&(Z.length===0?Z+="]C1":Z+="");break;case xe.CODE_FNC_2:case xe.CODE_FNC_3:break;case xe.CODE_FNC_4_A:!zt&&Pt?(zt=!0,Pt=!1):zt&&Pt?(zt=!1,Pt=!1):Pt=!0;break;case xe.CODE_SHIFT:X=!0,M=xe.CODE_CODE_B;break;case xe.CODE_CODE_B:M=xe.CODE_CODE_B;break;case xe.CODE_CODE_C:M=xe.CODE_CODE_C;break;case xe.CODE_STOP:B=!0;break}break;case xe.CODE_CODE_B:if(Pe<96)Pt===zt?Z+=String.fromCharCode(32+Pe):Z+=String.fromCharCode(32+Pe+128),Pt=!1;else switch(Pe!==xe.CODE_STOP&&(Ze=!1),Pe){case xe.CODE_FNC_1:y&&(Z.length===0?Z+="]C1":Z+="");break;case xe.CODE_FNC_2:case xe.CODE_FNC_3:break;case xe.CODE_FNC_4_B:!zt&&Pt?(zt=!0,Pt=!1):zt&&Pt?(zt=!1,Pt=!1):Pt=!0;break;case xe.CODE_SHIFT:X=!0,M=xe.CODE_CODE_A;break;case xe.CODE_CODE_A:M=xe.CODE_CODE_A;break;case xe.CODE_CODE_C:M=xe.CODE_CODE_C;break;case xe.CODE_STOP:B=!0;break}break;case xe.CODE_CODE_C:if(Pe<100)Pe<10&&(Z+="0"),Z+=Pe;else switch(Pe!==xe.CODE_STOP&&(Ze=!1),Pe){case xe.CODE_FNC_1:y&&(Z.length===0?Z+="]C1":Z+="");break;case xe.CODE_CODE_A:M=xe.CODE_CODE_A;break;case xe.CODE_CODE_B:M=xe.CODE_CODE_B;break;case xe.CODE_STOP:B=!0;break}break}ql&&(M=M===xe.CODE_CODE_A?xe.CODE_CODE_B:xe.CODE_CODE_A)}const sa=he-ne;if(he=u.getNextUnset(he),!u.isRange(he,Math.min(u.getSize(),he+(he-ne)/2),!1))throw new ae;if(rt-=et*Ae,rt%103!==Ae)throw new O;const On=Z.length;if(On===0)throw new ae;On>0&&Ze&&(M===xe.CODE_CODE_C?Z=Z.substring(0,On-2):Z=Z.substring(0,On-1));const tn=(b[1]+b[0])/2,hr=ne+sa/2,Ba=T.length,yn=new Uint8Array(Ba);for(let ql=0;ql<Ba;ql++)yn[ql]=T[ql];const Gi=[new We(tn,i),new We(hr,i)];return new le(Z,yn,0,Gi,ie.CODE_128,new Date().getTime())}}xe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],xe.MAX_AVG_VARIANCE=.25,xe.MAX_INDIVIDUAL_VARIANCE=.7,xe.CODE_SHIFT=98,xe.CODE_CODE_C=99,xe.CODE_CODE_B=100,xe.CODE_CODE_A=101,xe.CODE_FNC_1=102,xe.CODE_FNC_2=97,xe.CODE_FNC_3=96,xe.CODE_FNC_4_A=101,xe.CODE_FNC_4_B=100,xe.CODE_START_A=103,xe.CODE_START_B=104,xe.CODE_START_C=105,xe.CODE_STOP=106;class Qe extends kt{constructor(i=!1,u=!1){super(),this.usingCheckDigit=i,this.extendedMode=u,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,u,m){let y=this.counters;y.fill(0),this.decodeRowResult="";let b=Qe.findAsteriskPattern(u,y),w=u.getNextSet(b[1]),S=u.getSize(),T,M;do{Qe.recordPattern(u,w,y);let pe=Qe.toNarrowWidePattern(y);if(pe<0)throw new ae;T=Qe.patternToChar(pe),this.decodeRowResult+=T,M=w;for(let Ae of y)w+=Ae;w=u.getNextSet(w)}while(T!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let B=0;for(let pe of y)B+=pe;let X=w-M-B;if(w!==S&&X*2<B)throw new ae;if(this.usingCheckDigit){let pe=this.decodeRowResult.length-1,Ae=0;for(let Pe=0;Pe<pe;Pe++)Ae+=Qe.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Pe));if(this.decodeRowResult.charAt(pe)!==Qe.ALPHABET_STRING.charAt(Ae%43))throw new O;this.decodeRowResult=this.decodeRowResult.substring(0,pe)}if(this.decodeRowResult.length===0)throw new ae;let Z;this.extendedMode?Z=Qe.decodeExtended(this.decodeRowResult):Z=this.decodeRowResult;let ne=(b[1]+b[0])/2,he=M+B/2;return new le(Z,null,0,[new We(ne,i),new We(he,i)],ie.CODE_39,new Date().getTime())}static findAsteriskPattern(i,u){let m=i.getSize(),y=i.getNextSet(0),b=0,w=y,S=!1,T=u.length;for(let M=y;M<m;M++)if(i.get(M)!==S)u[b]++;else{if(b===T-1){if(this.toNarrowWidePattern(u)===Qe.ASTERISK_ENCODING&&i.isRange(Math.max(0,w-Math.floor((M-w)/2)),w,!1))return[w,M];w+=u[0]+u[1],u.copyWithin(0,2,2+b-1),u[b-1]=0,u[b]=0,b--}else b++;u[b]=1,S=!S}throw new ae}static toNarrowWidePattern(i){let u=i.length,m=0,y;do{let b=2147483647;for(let T of i)T<b&&T>m&&(b=T);m=b,y=0;let w=0,S=0;for(let T=0;T<u;T++){let M=i[T];M>m&&(S|=1<<u-1-T,y++,w+=M)}if(y===3){for(let T=0;T<u&&y>0;T++){let M=i[T];if(M>m&&(y--,M*2>=w))return-1}return S}}while(y>3);return-1}static patternToChar(i){for(let u=0;u<Qe.CHARACTER_ENCODINGS.length;u++)if(Qe.CHARACTER_ENCODINGS[u]===i)return Qe.ALPHABET_STRING.charAt(u);if(i===Qe.ASTERISK_ENCODING)return"*";throw new ae}static decodeExtended(i){let u=i.length,m="";for(let y=0;y<u;y++){let b=i.charAt(y);if(b==="+"||b==="$"||b==="%"||b==="/"){let w=i.charAt(y+1),S="\0";switch(b){case"+":if(w>="A"&&w<="Z")S=String.fromCharCode(w.charCodeAt(0)+32);else throw new L;break;case"$":if(w>="A"&&w<="Z")S=String.fromCharCode(w.charCodeAt(0)-64);else throw new L;break;case"%":if(w>="A"&&w<="E")S=String.fromCharCode(w.charCodeAt(0)-38);else if(w>="F"&&w<="J")S=String.fromCharCode(w.charCodeAt(0)-11);else if(w>="K"&&w<="O")S=String.fromCharCode(w.charCodeAt(0)+16);else if(w>="P"&&w<="T")S=String.fromCharCode(w.charCodeAt(0)+43);else if(w==="U")S="\0";else if(w==="V")S="@";else if(w==="W")S="`";else if(w==="X"||w==="Y"||w==="Z")S="";else throw new L;break;case"/":if(w>="A"&&w<="O")S=String.fromCharCode(w.charCodeAt(0)-32);else if(w==="Z")S=":";else throw new L;break}m+=S,y++}else m+=b}return m}}Qe.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Qe.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Qe.ASTERISK_ENCODING=148;class st extends kt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,u,m){let y=this.decodeStart(u),b=this.decodeEnd(u),w=new ce;st.decodeMiddle(u,y[1],b[0],w);let S=w.toString(),T=null;m!=null&&(T=m.get(z.ALLOWED_LENGTHS)),T==null&&(T=st.DEFAULT_ALLOWED_LENGTHS);let M=S.length,B=!1,X=0;for(let he of T){if(M===he){B=!0;break}he>X&&(X=he)}if(!B&&M>X&&(B=!0),!B)throw new L;const Z=[new We(y[1],i),new We(b[0],i)];return new le(S,null,0,Z,ie.ITF,new Date().getTime())}static decodeMiddle(i,u,m,y){let b=new Int32Array(10),w=new Int32Array(5),S=new Int32Array(5);for(b.fill(0),w.fill(0),S.fill(0);u<m;){kt.recordPattern(i,u,b);for(let M=0;M<5;M++){let B=2*M;w[M]=b[B],S[M]=b[B+1]}let T=st.decodeDigit(w);y.append(T.toString()),T=this.decodeDigit(S),y.append(T.toString()),b.forEach(function(M){u+=M})}}decodeStart(i){let u=st.skipWhiteSpace(i),m=st.findGuardPattern(i,u,st.START_PATTERN);return this.narrowLineWidth=(m[1]-m[0])/4,this.validateQuietZone(i,m[0]),m}validateQuietZone(i,u){let m=this.narrowLineWidth*10;m=m<u?m:u;for(let y=u-1;m>0&&y>=0&&!i.get(y);y--)m--;if(m!==0)throw new ae}static skipWhiteSpace(i){const u=i.getSize(),m=i.getNextSet(0);if(m===u)throw new ae;return m}decodeEnd(i){i.reverse();try{let u=st.skipWhiteSpace(i),m;try{m=st.findGuardPattern(i,u,st.END_PATTERN_REVERSED[0])}catch(b){b instanceof ae&&(m=st.findGuardPattern(i,u,st.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,m[0]);let y=m[0];return m[0]=i.getSize()-m[1],m[1]=i.getSize()-y,m}finally{i.reverse()}}static findGuardPattern(i,u,m){let y=m.length,b=new Int32Array(y),w=i.getSize(),S=!1,T=0,M=u;b.fill(0);for(let B=u;B<w;B++)if(i.get(B)!==S)b[T]++;else{if(T===y-1){if(kt.patternMatchVariance(b,m,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE)return[M,B];M+=b[0]+b[1],P.arraycopy(b,2,b,0,T-1),b[T-1]=0,b[T]=0,T--}else T++;b[T]=1,S=!S}throw new ae}static decodeDigit(i){let u=st.MAX_AVG_VARIANCE,m=-1,y=st.PATTERNS.length;for(let b=0;b<y;b++){let w=st.PATTERNS[b],S=kt.patternMatchVariance(i,w,st.MAX_INDIVIDUAL_VARIANCE);S<u?(u=S,m=b):S===u&&(m=-1)}if(m>=0)return m%10;throw new ae}}st.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],st.MAX_AVG_VARIANCE=.38,st.MAX_INDIVIDUAL_VARIANCE=.5,st.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],st.START_PATTERN=Int32Array.from([1,1,1,1]),st.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Tt extends kt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let u=!1,m,y=0,b=Int32Array.from([0,0,0]);for(;!u;){b=Int32Array.from([0,0,0]),m=Tt.findGuardPattern(i,y,!1,this.START_END_PATTERN,b);let w=m[0];y=m[1];let S=w-(y-w);S>=0&&(u=i.isRange(S,w,!1))}return m}static checkChecksum(i){return Tt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let u=i.length;if(u===0)return!1;let m=parseInt(i.charAt(u-1),10);return Tt.getStandardUPCEANChecksum(i.substring(0,u-1))===m}static getStandardUPCEANChecksum(i){let u=i.length,m=0;for(let y=u-1;y>=0;y-=2){let b=i.charAt(y).charCodeAt(0)-48;if(b<0||b>9)throw new L;m+=b}m*=3;for(let y=u-2;y>=0;y-=2){let b=i.charAt(y).charCodeAt(0)-48;if(b<0||b>9)throw new L;m+=b}return(1e3-m)%10}static decodeEnd(i,u){return Tt.findGuardPattern(i,u,!1,Tt.START_END_PATTERN,new Int32Array(Tt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,u,m,y){return this.findGuardPattern(i,u,m,y,new Int32Array(y.length))}static findGuardPattern(i,u,m,y,b){let w=i.getSize();u=m?i.getNextUnset(u):i.getNextSet(u);let S=0,T=u,M=y.length,B=m;for(let X=u;X<w;X++)if(i.get(X)!==B)b[S]++;else{if(S===M-1){if(kt.patternMatchVariance(b,y,Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return Int32Array.from([T,X]);T+=b[0]+b[1];let Z=b.slice(2,b.length-1);for(let ne=0;ne<S-1;ne++)b[ne]=Z[ne];b[S-1]=0,b[S]=0,S--}else S++;b[S]=1,B=!B}throw new ae}static decodeDigit(i,u,m,y){this.recordPattern(i,m,u);let b=this.MAX_AVG_VARIANCE,w=-1,S=y.length;for(let T=0;T<S;T++){let M=y[T],B=kt.patternMatchVariance(u,M,Tt.MAX_INDIVIDUAL_VARIANCE);B<b&&(b=B,w=T)}if(w>=0)return w;throw new ae}}Tt.MAX_AVG_VARIANCE=.48,Tt.MAX_INDIVIDUAL_VARIANCE=.7,Tt.START_END_PATTERN=Int32Array.from([1,1,1]),Tt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Tt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Tt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class dr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,u,m){let y=this.decodeRowStringBuffer,b=this.decodeMiddle(u,m,y),w=y.toString(),S=dr.parseExtensionString(w),T=[new We((m[0]+m[1])/2,i),new We(b,i)],M=new le(w,null,0,T,ie.UPC_EAN_EXTENSION,new Date().getTime());return S!=null&&M.putAllMetadata(S),M}decodeMiddle(i,u,m){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let b=i.getSize(),w=u[1],S=0;for(let M=0;M<5&&w<b;M++){let B=Tt.decodeDigit(i,y,w,Tt.L_AND_G_PATTERNS);m+=String.fromCharCode(48+B%10);for(let X of y)w+=X;B>=10&&(S|=1<<4-M),M!==4&&(w=i.getNextSet(w),w=i.getNextUnset(w))}if(m.length!==5)throw new ae;let T=this.determineCheckDigit(S);if(dr.extensionChecksum(m.toString())!==T)throw new ae;return w}static extensionChecksum(i){let u=i.length,m=0;for(let y=u-2;y>=0;y-=2)m+=i.charAt(y).charCodeAt(0)-48;m*=3;for(let y=u-1;y>=0;y-=2)m+=i.charAt(y).charCodeAt(0)-48;return m*=3,m%10}determineCheckDigit(i){for(let u=0;u<10;u++)if(i===this.CHECK_DIGIT_ENCODINGS[u])return u;throw new ae}static parseExtensionString(i){if(i.length!==5)return null;let u=dr.parseExtension5String(i);return u==null?null:new Map([[$e.SUGGESTED_PRICE,u]])}static parseExtension5String(i){let u;switch(i.charAt(0)){case"0":u="";break;case"5":u="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}u="";break;default:u="";break}let m=parseInt(i.substring(1)),y=(m/100).toString(),b=m%100,w=b<10?"0"+b:b.toString();return u+y+"."+w}}class $a{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,u,m){let y=this.decodeRowStringBuffer,b=this.decodeMiddle(u,m,y),w=y.toString(),S=$a.parseExtensionString(w),T=[new We((m[0]+m[1])/2,i),new We(b,i)],M=new le(w,null,0,T,ie.UPC_EAN_EXTENSION,new Date().getTime());return S!=null&&M.putAllMetadata(S),M}decodeMiddle(i,u,m){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let b=i.getSize(),w=u[1],S=0;for(let T=0;T<2&&w<b;T++){let M=Tt.decodeDigit(i,y,w,Tt.L_AND_G_PATTERNS);m+=String.fromCharCode(48+M%10);for(let B of y)w+=B;M>=10&&(S|=1<<1-T),T!==1&&(w=i.getNextSet(w),w=i.getNextUnset(w))}if(m.length!==2)throw new ae;if(parseInt(m.toString())%4!==S)throw new ae;return w}static parseExtensionString(i){return i.length!==2?null:new Map([[$e.ISSUE_NUMBER,parseInt(i)]])}}class ta{static decodeRow(i,u,m){let y=Tt.findGuardPattern(u,m,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new dr().decodeRow(i,u,y)}catch{return new $a().decodeRow(i,u,y)}}}ta.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class bt extends Tt{constructor(){super(),this.decodeRowStringBuffer="",bt.L_AND_G_PATTERNS=bt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let u=bt.L_PATTERNS[i-10],m=new Int32Array(u.length);for(let y=0;y<u.length;y++)m[y]=u[u.length-y-1];bt.L_AND_G_PATTERNS[i]=m}}decodeRow(i,u,m){let y=bt.findStartGuardPattern(u),b=m==null?null:m.get(z.NEED_RESULT_POINT_CALLBACK);if(b!=null){const Ze=new We((y[0]+y[1])/2,i);b.foundPossibleResultPoint(Ze)}let w=this.decodeMiddle(u,y,this.decodeRowStringBuffer),S=w.rowOffset,T=w.resultString;if(b!=null){const Ze=new We(S,i);b.foundPossibleResultPoint(Ze)}let M=this.decodeEnd(u,S);if(b!=null){const Ze=new We((M[0]+M[1])/2,i);b.foundPossibleResultPoint(Ze)}let B=M[1],X=B+(B-M[0]);if(X>=u.getSize()||!u.isRange(B,X,!1))throw new ae;let Z=T.toString();if(Z.length<8)throw new L;if(!bt.checkChecksum(Z))throw new O;let ne=(y[1]+y[0])/2,he=(M[1]+M[0])/2,pe=this.getBarcodeFormat(),Ae=[new We(ne,i),new We(he,i)],Pe=new le(Z,null,0,Ae,pe,new Date().getTime()),rt=0;try{let Ze=ta.decodeRow(i,u,M[1]);Pe.putMetadata($e.UPC_EAN_EXTENSION,Ze.getText()),Pe.putAllMetadata(Ze.getResultMetadata()),Pe.addResultPoints(Ze.getResultPoints()),rt=Ze.getText().length}catch{}let et=m==null?null:m.get(z.ALLOWED_EAN_EXTENSIONS);if(et!=null){let Ze=!1;for(let zt in et)if(rt.toString()===zt){Ze=!0;break}if(!Ze)throw new ae}return Pe}decodeEnd(i,u){return bt.findGuardPattern(i,u,!1,bt.START_END_PATTERN,new Int32Array(bt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return bt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let u=i.length;if(u===0)return!1;let m=parseInt(i.charAt(u-1),10);return bt.getStandardUPCEANChecksum(i.substring(0,u-1))===m}static getStandardUPCEANChecksum(i){let u=i.length,m=0;for(let y=u-1;y>=0;y-=2){let b=i.charAt(y).charCodeAt(0)-48;if(b<0||b>9)throw new L;m+=b}m*=3;for(let y=u-2;y>=0;y-=2){let b=i.charAt(y).charCodeAt(0)-48;if(b<0||b>9)throw new L;m+=b}return(1e3-m)%10}}class Je extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,u,m){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let b=i.getSize(),w=u[1],S=0;for(let M=0;M<6&&w<b;M++){let B=bt.decodeDigit(i,y,w,bt.L_AND_G_PATTERNS);m+=String.fromCharCode(48+B%10);for(let X of y)w+=X;B>=10&&(S|=1<<5-M)}m=Je.determineFirstDigit(m,S),w=bt.findGuardPattern(i,w,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let M=0;M<6&&w<b;M++){let B=bt.decodeDigit(i,y,w,bt.L_PATTERNS);m+=String.fromCharCode(48+B);for(let X of y)w+=X}return{rowOffset:w,resultString:m}}getBarcodeFormat(){return ie.EAN_13}static determineFirstDigit(i,u){for(let m=0;m<10;m++)if(u===this.FIRST_DIGIT_ENCODINGS[m])return i=String.fromCharCode(48+m)+i,i;throw new ae}}Je.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Lt extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,u,m){const y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let b=i.getSize(),w=u[1];for(let T=0;T<4&&w<b;T++){let M=bt.decodeDigit(i,y,w,bt.L_PATTERNS);m+=String.fromCharCode(48+M);for(let B of y)w+=B}w=bt.findGuardPattern(i,w,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<4&&w<b;T++){let M=bt.decodeDigit(i,y,w,bt.L_PATTERNS);m+=String.fromCharCode(48+M);for(let B of y)w+=B}return{rowOffset:w,resultString:m}}getBarcodeFormat(){return ie.EAN_8}}class Lr extends bt{constructor(){super(...arguments),this.ean13Reader=new Je}getBarcodeFormat(){return ie.UPC_A}decode(i,u){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,u,m){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,u,m))}decodeMiddle(i,u,m){return this.ean13Reader.decodeMiddle(i,u,m)}maybeReturnResult(i){let u=i.getText();if(u.charAt(0)==="0"){let m=new le(u.substring(1),null,null,i.getResultPoints(),ie.UPC_A);return i.getResultMetadata()!=null&&m.putAllMetadata(i.getResultMetadata()),m}else throw new ae}reset(){this.ean13Reader.reset()}}class fe extends bt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,u,m){const y=this.decodeMiddleCounters.map(M=>M);y[0]=0,y[1]=0,y[2]=0,y[3]=0;const b=i.getSize();let w=u[1],S=0;for(let M=0;M<6&&w<b;M++){const B=fe.decodeDigit(i,y,w,fe.L_AND_G_PATTERNS);m+=String.fromCharCode(48+B%10);for(let X of y)w+=X;B>=10&&(S|=1<<5-M)}let T=fe.determineNumSysAndCheckDigit(m,S);return{rowOffset:w,resultString:T}}decodeEnd(i,u){return fe.findGuardPatternWithoutCounters(i,u,!0,fe.MIDDLE_END_PATTERN)}checkChecksum(i){return bt.checkChecksum(fe.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,u){for(let m=0;m<=1;m++)for(let y=0;y<10;y++)if(u===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[m][y]){let b=String.fromCharCode(48+m),w=String.fromCharCode(48+y);return b+i+w}throw ae.getNotFoundInstance()}getBarcodeFormat(){return ie.UPC_E}static convertUPCEtoUPCA(i){const u=i.slice(1,7).split("").map(b=>b.charCodeAt(0)),m=new ce;m.append(i.charAt(0));let y=u[5];switch(y){case 0:case 1:case 2:m.appendChars(u,0,2),m.append(y),m.append("0000"),m.appendChars(u,2,3);break;case 3:m.appendChars(u,0,3),m.append("00000"),m.appendChars(u,3,2);break;case 4:m.appendChars(u,0,4),m.append("00000"),m.append(u[4]);break;default:m.appendChars(u,0,5),m.append("0000"),m.append(y);break}return i.length>=8&&m.append(i.charAt(7)),m.toString()}}fe.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),fe.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class De extends kt{constructor(i){super();let u=i==null?null:i.get(z.POSSIBLE_FORMATS),m=[];a(u)?(m.push(new Je),m.push(new Lr),m.push(new Lt),m.push(new fe)):(u.indexOf(ie.EAN_13)>-1&&m.push(new Je),u.indexOf(ie.UPC_A)>-1&&m.push(new Lr),u.indexOf(ie.EAN_8)>-1&&m.push(new Lt),u.indexOf(ie.UPC_E)>-1&&m.push(new fe)),this.readers=m}decodeRow(i,u,m){for(let y of this.readers)try{const b=y.decodeRow(i,u,m),w=b.getBarcodeFormat()===ie.EAN_13&&b.getText().charAt(0)==="0",S=m==null?null:m.get(z.POSSIBLE_FORMATS),T=S==null||S.includes(ie.UPC_A);if(w&&T){const M=b.getRawBytes(),B=new le(b.getText().substring(1),M,M?M.length:null,b.getResultPoints(),ie.UPC_A);return B.putAllMetadata(b.getResultMetadata()),B}return b}catch{}throw new ae}reset(){for(let i of this.readers)i.reset()}}class ot extends kt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,u){for(let m=0;m<u.length;m++)if(kt.patternMatchVariance(i,u[m],ot.MAX_INDIVIDUAL_VARIANCE)<ot.MAX_AVG_VARIANCE)return m;throw new ae}static count(i){return it.sum(new Int32Array(i))}static increment(i,u){let m=0,y=u[0];for(let b=1;b<i.length;b++)u[b]>y&&(y=u[b],m=b);i[m]++}static decrement(i,u){let m=0,y=u[0];for(let b=1;b<i.length;b++)u[b]<y&&(y=u[b],m=b);i[m]--}static isFinderPattern(i){let u=i[0]+i[1],m=u+i[2]+i[3],y=u/m;if(y>=ot.MIN_FINDER_PATTERN_RATIO&&y<=ot.MAX_FINDER_PATTERN_RATIO){let b=Number.MAX_SAFE_INTEGER,w=Number.MIN_SAFE_INTEGER;for(let S of i)S>w&&(w=S),S<b&&(b=S);return w<10*b}return!1}}ot.MAX_AVG_VARIANCE=.2,ot.MAX_INDIVIDUAL_VARIANCE=.45,ot.MIN_FINDER_PATTERN_RATIO=9.5/12,ot.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ja{constructor(i,u){this.value=i,this.checksumPortion=u}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof Ja))return!1;const u=i;return this.value===u.value&&this.checksumPortion===u.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ds{constructor(i,u,m,y,b){this.value=i,this.startEnd=u,this.value=i,this.startEnd=u,this.resultPoints=new Array,this.resultPoints.push(new We(m,b)),this.resultPoints.push(new We(y,b))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof ds))return!1;const u=i;return this.value===u.value}hashCode(){return this.value}}class Nn{constructor(){}static getRSSvalue(i,u,m){let y=0;for(let T of i)y+=T;let b=0,w=0,S=i.length;for(let T=0;T<S-1;T++){let M;for(M=1,w|=1<<T;M<i[T];M++,w&=~(1<<T)){let B=Nn.combins(y-M-1,S-T-2);if(m&&w===0&&y-M-(S-T-1)>=S-T-1&&(B-=Nn.combins(y-M-(S-T),S-T-2)),S-T-1>1){let X=0;for(let Z=y-M-(S-T-2);Z>u;Z--)X+=Nn.combins(y-M-Z-1,S-T-3);B-=X*(S-1-T)}else y-M>u&&B--;b+=B}y-=M}return b}static combins(i,u){let m,y;i-u>u?(y=u,m=i-u):(y=i-u,m=u);let b=1,w=1;for(let S=i;S>m;S--)b*=S,w<=y&&(b/=w,w++);for(;w<=y;)b/=w,w++;return b}}class Vc{static buildBitArray(i){let u=i.length*2-1;i[i.length-1].getRightChar()==null&&(u-=1);let m=12*u,y=new Y(m),b=0,S=i[0].getRightChar().getValue();for(let T=11;T>=0;--T)(S&1<<T)!=0&&y.set(b),b++;for(let T=1;T<i.length;++T){let M=i[T],B=M.getLeftChar().getValue();for(let X=11;X>=0;--X)(B&1<<X)!=0&&y.set(b),b++;if(M.getRightChar()!=null){let X=M.getRightChar().getValue();for(let Z=11;Z>=0;--Z)(X&1<<Z)!=0&&y.set(b),b++}}return y}}class Sn{constructor(i,u){u?this.decodedInformation=null:(this.finished=i,this.decodedInformation=u)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Fl{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class Ea extends Fl{constructor(i,u){super(i),this.value=u}getValue(){return this.value}isFNC1(){return this.value===Ea.FNC1}}Ea.FNC1="$";class Vn extends Fl{constructor(i,u,m){super(i),m?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=u}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class qa extends Fl{constructor(i,u,m){if(super(i),u<0||u>10||m<0||m>10)throw new L;this.firstDigit=u,this.secondDigit=m}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===qa.FNC1}isSecondDigitFNC1(){return this.secondDigit===qa.FNC1}isAnyFNC1(){return this.firstDigit===qa.FNC1||this.secondDigit===qa.FNC1}}qa.FNC1=10;class ct{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new ae;let u=i.substring(0,2);for(let b of ct.TWO_DIGIT_DATA_LENGTH)if(b[0]===u)return b[1]===ct.VARIABLE_LENGTH?ct.processVariableAI(2,b[2],i):ct.processFixedAI(2,b[1],i);if(i.length<3)throw new ae;let m=i.substring(0,3);for(let b of ct.THREE_DIGIT_DATA_LENGTH)if(b[0]===m)return b[1]===ct.VARIABLE_LENGTH?ct.processVariableAI(3,b[2],i):ct.processFixedAI(3,b[1],i);for(let b of ct.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(b[0]===m)return b[1]===ct.VARIABLE_LENGTH?ct.processVariableAI(4,b[2],i):ct.processFixedAI(4,b[1],i);if(i.length<4)throw new ae;let y=i.substring(0,4);for(let b of ct.FOUR_DIGIT_DATA_LENGTH)if(b[0]===y)return b[1]===ct.VARIABLE_LENGTH?ct.processVariableAI(4,b[2],i):ct.processFixedAI(4,b[1],i);throw new ae}static processFixedAI(i,u,m){if(m.length<i)throw new ae;let y=m.substring(0,i);if(m.length<i+u)throw new ae;let b=m.substring(i,i+u),w=m.substring(i+u),S="("+y+")"+b,T=ct.parseFieldsInGeneralPurpose(w);return T==null?S:S+T}static processVariableAI(i,u,m){let y=m.substring(0,i),b;m.length<i+u?b=m.length:b=i+u;let w=m.substring(i,b),S=m.substring(b),T="("+y+")"+w,M=ct.parseFieldsInGeneralPurpose(S);return M==null?T:T+M}}ct.VARIABLE_LENGTH=[],ct.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ct.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ct.VARIABLE_LENGTH,20],["22",ct.VARIABLE_LENGTH,29],["30",ct.VARIABLE_LENGTH,8],["37",ct.VARIABLE_LENGTH,8],["90",ct.VARIABLE_LENGTH,30],["91",ct.VARIABLE_LENGTH,30],["92",ct.VARIABLE_LENGTH,30],["93",ct.VARIABLE_LENGTH,30],["94",ct.VARIABLE_LENGTH,30],["95",ct.VARIABLE_LENGTH,30],["96",ct.VARIABLE_LENGTH,30],["97",ct.VARIABLE_LENGTH,3],["98",ct.VARIABLE_LENGTH,30],["99",ct.VARIABLE_LENGTH,30]],ct.THREE_DIGIT_DATA_LENGTH=[["240",ct.VARIABLE_LENGTH,30],["241",ct.VARIABLE_LENGTH,30],["242",ct.VARIABLE_LENGTH,6],["250",ct.VARIABLE_LENGTH,30],["251",ct.VARIABLE_LENGTH,30],["253",ct.VARIABLE_LENGTH,17],["254",ct.VARIABLE_LENGTH,20],["400",ct.VARIABLE_LENGTH,30],["401",ct.VARIABLE_LENGTH,30],["402",17],["403",ct.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ct.VARIABLE_LENGTH,20],["421",ct.VARIABLE_LENGTH,15],["422",3],["423",ct.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ct.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ct.VARIABLE_LENGTH,15],["391",ct.VARIABLE_LENGTH,18],["392",ct.VARIABLE_LENGTH,15],["393",ct.VARIABLE_LENGTH,18],["703",ct.VARIABLE_LENGTH,30]],ct.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ct.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ct.VARIABLE_LENGTH,20],["8003",ct.VARIABLE_LENGTH,30],["8004",ct.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ct.VARIABLE_LENGTH,30],["8008",ct.VARIABLE_LENGTH,12],["8018",18],["8020",ct.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ct.VARIABLE_LENGTH,70],["8200",ct.VARIABLE_LENGTH,70]];class Ga{constructor(i){this.buffer=new ce,this.information=i}decodeAllCodes(i,u){let m=u,y=null;do{let b=this.decodeGeneralPurposeField(m,y),w=ct.parseFieldsInGeneralPurpose(b.getNewString());if(w!=null&&i.append(w),b.isRemaining()?y=""+b.getRemainingValue():y=null,m===b.getNewPosition())break;m=b.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let u=i;u<i+3;++u)if(this.information.get(u))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let b=this.extractNumericValueFromBitArray(i,4);return b===0?new qa(this.information.getSize(),qa.FNC1,qa.FNC1):new qa(this.information.getSize(),b-1,qa.FNC1)}let u=this.extractNumericValueFromBitArray(i,7),m=(u-8)/11,y=(u-8)%11;return new qa(i+7,m,y)}extractNumericValueFromBitArray(i,u){return Ga.extractNumericValueFromBitArray(this.information,i,u)}static extractNumericValueFromBitArray(i,u,m){let y=0;for(let b=0;b<m;++b)i.get(u+b)&&(y|=1<<m-b-1);return y}decodeGeneralPurposeField(i,u){this.buffer.setLengthToZero(),u!=null&&this.buffer.append(u),this.current.setPosition(i);let m=this.parseBlocks();return m!=null&&m.isRemaining()?new Vn(this.current.getPosition(),this.buffer.toString(),m.getRemainingValue()):new Vn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,u;do{let m=this.current.getPosition();if(this.current.isAlpha()?(u=this.parseAlphaBlock(),i=u.isFinished()):this.current.isIsoIec646()?(u=this.parseIsoIec646Block(),i=u.isFinished()):(u=this.parseNumericBlock(),i=u.isFinished()),!(m!==this.current.getPosition())&&!i)break}while(!i);return u.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let u;return i.isSecondDigitFNC1()?u=new Vn(this.current.getPosition(),this.buffer.toString()):u=new Vn(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new Sn(!0,u)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let u=new Vn(this.current.getPosition(),this.buffer.toString());return new Sn(!0,u)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Sn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let u=new Vn(this.current.getPosition(),this.buffer.toString());return new Sn(!0,u)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Sn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let u=new Vn(this.current.getPosition(),this.buffer.toString());return new Sn(!0,u)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Sn(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(i,5);if(u>=5&&u<16)return!0;if(i+7>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(i,7);if(m>=64&&m<116)return!0;if(i+8>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(i,8);return y>=232&&y<253}decodeIsoIec646(i){let u=this.extractNumericValueFromBitArray(i,5);if(u===15)return new Ea(i+5,Ea.FNC1);if(u>=5&&u<15)return new Ea(i+5,"0"+(u-5));let m=this.extractNumericValueFromBitArray(i,7);if(m>=64&&m<90)return new Ea(i+7,""+(m+1));if(m>=90&&m<116)return new Ea(i+7,""+(m+7));let y=this.extractNumericValueFromBitArray(i,8),b;switch(y){case 232:b="!";break;case 233:b='"';break;case 234:b="%";break;case 235:b="&";break;case 236:b="'";break;case 237:b="(";break;case 238:b=")";break;case 239:b="*";break;case 240:b="+";break;case 241:b=",";break;case 242:b="-";break;case 243:b=".";break;case 244:b="/";break;case 245:b=":";break;case 246:b=";";break;case 247:b="<";break;case 248:b="=";break;case 249:b=">";break;case 250:b="?";break;case 251:b="_";break;case 252:b=" ";break;default:throw new L}return new Ea(i+8,b)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(i,5);if(u>=5&&u<16)return!0;if(i+6>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(i,6);return m>=16&&m<63}decodeAlphanumeric(i){let u=this.extractNumericValueFromBitArray(i,5);if(u===15)return new Ea(i+5,Ea.FNC1);if(u>=5&&u<15)return new Ea(i+5,"0"+(u-5));let m=this.extractNumericValueFromBitArray(i,6);if(m>=32&&m<58)return new Ea(i+6,""+(m+33));let y;switch(m){case 58:y="*";break;case 59:y=",";break;case 60:y="-";break;case 61:y=".";break;case 62:y="/";break;default:throw new oe("Decoding invalid alphanumeric value: "+m)}return new Ea(i+6,y)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let u=0;u<5&&u+i<this.information.getSize();++u)if(u===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+u))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let u=i;u<i+3;++u)if(this.information.get(u))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let u=0;u<4&&u+i<this.information.getSize();++u)if(this.information.get(i+u))return!1;return!0}}class $r{constructor(i){this.information=i,this.generalDecoder=new Ga(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class rr extends $r{constructor(i){super(i)}encodeCompressedGtin(i,u){i.append("(01)");let m=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,u,m)}encodeCompressedGtinWithoutAI(i,u,m){for(let y=0;y<4;++y){let b=this.getGeneralDecoder().extractNumericValueFromBitArray(u+10*y,10);b/100===0&&i.append("0"),b/10===0&&i.append("0"),i.append(b)}rr.appendCheckDigit(i,m)}static appendCheckDigit(i,u){let m=0;for(let y=0;y<13;y++){let b=i.charAt(y+u).charCodeAt(0)-48;m+=(y&1)===0?3*b:b}m=10-m%10,m===10&&(m=0),i.append(m)}}rr.GTIN_SIZE=40;class hn extends rr{constructor(i){super(i)}parseInformation(){let i=new ce;i.append("(01)");let u=i.length(),m=this.getGeneralDecoder().extractNumericValueFromBitArray(hn.HEADER_SIZE,4);return i.append(m),this.encodeCompressedGtinWithoutAI(i,hn.HEADER_SIZE+4,u),this.getGeneralDecoder().decodeAllCodes(i,hn.HEADER_SIZE+44)}}hn.HEADER_SIZE=4;class fl extends $r{constructor(i){super(i)}parseInformation(){let i=new ce;return this.getGeneralDecoder().decodeAllCodes(i,fl.HEADER_SIZE)}}fl.HEADER_SIZE=5;class Ii extends rr{constructor(i){super(i)}encodeCompressedWeight(i,u,m){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(u,m);this.addWeightCode(i,y);let b=this.checkWeight(y),w=1e5;for(let S=0;S<5;++S)b/w===0&&i.append("0"),w/=10;i.append(b)}}class Cn extends Ii{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Cn.HEADER_SIZE+Ii.GTIN_SIZE+Cn.WEIGHT_SIZE)throw new ae;let i=new ce;return this.encodeCompressedGtin(i,Cn.HEADER_SIZE),this.encodeCompressedWeight(i,Cn.HEADER_SIZE+Ii.GTIN_SIZE,Cn.WEIGHT_SIZE),i.toString()}}Cn.HEADER_SIZE=5,Cn.WEIGHT_SIZE=15;class Hc extends Cn{constructor(i){super(i)}addWeightCode(i,u){i.append("(3103)")}checkWeight(i){return i}}class hl extends Cn{constructor(i){super(i)}addWeightCode(i,u){u<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class en extends rr{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<en.HEADER_SIZE+rr.GTIN_SIZE)throw new ae;let i=new ce;this.encodeCompressedGtin(i,en.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(en.HEADER_SIZE+rr.GTIN_SIZE,en.LAST_DIGIT_SIZE);i.append("(392"),i.append(u),i.append(")");let m=this.getGeneralDecoder().decodeGeneralPurposeField(en.HEADER_SIZE+rr.GTIN_SIZE+en.LAST_DIGIT_SIZE,null);return i.append(m.getNewString()),i.toString()}}en.HEADER_SIZE=8,en.LAST_DIGIT_SIZE=2;class Br extends rr{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Br.HEADER_SIZE+rr.GTIN_SIZE)throw new ae;let i=new ce;this.encodeCompressedGtin(i,Br.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(Br.HEADER_SIZE+rr.GTIN_SIZE,Br.LAST_DIGIT_SIZE);i.append("(393"),i.append(u),i.append(")");let m=this.getGeneralDecoder().extractNumericValueFromBitArray(Br.HEADER_SIZE+rr.GTIN_SIZE+Br.LAST_DIGIT_SIZE,Br.FIRST_THREE_DIGITS_SIZE);m/100==0&&i.append("0"),m/10==0&&i.append("0"),i.append(m);let y=this.getGeneralDecoder().decodeGeneralPurposeField(Br.HEADER_SIZE+rr.GTIN_SIZE+Br.LAST_DIGIT_SIZE+Br.FIRST_THREE_DIGITS_SIZE,null);return i.append(y.getNewString()),i.toString()}}Br.HEADER_SIZE=8,Br.LAST_DIGIT_SIZE=2,Br.FIRST_THREE_DIGITS_SIZE=10;class Qt extends Ii{constructor(i,u,m){super(i),this.dateCode=m,this.firstAIdigits=u}parseInformation(){if(this.getInformation().getSize()!=Qt.HEADER_SIZE+Qt.GTIN_SIZE+Qt.WEIGHT_SIZE+Qt.DATE_SIZE)throw new ae;let i=new ce;return this.encodeCompressedGtin(i,Qt.HEADER_SIZE),this.encodeCompressedWeight(i,Qt.HEADER_SIZE+Qt.GTIN_SIZE,Qt.WEIGHT_SIZE),this.encodeCompressedDate(i,Qt.HEADER_SIZE+Qt.GTIN_SIZE+Qt.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,u){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(u,Qt.DATE_SIZE);if(m==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let y=m%32;m/=32;let b=m%12+1;m/=12;let w=m;w/10==0&&i.append("0"),i.append(w),b/10==0&&i.append("0"),i.append(b),y/10==0&&i.append("0"),i.append(y)}addWeightCode(i,u){i.append("("),i.append(this.firstAIdigits),i.append(u/1e5),i.append(")")}checkWeight(i){return i%1e5}}Qt.HEADER_SIZE=8,Qt.WEIGHT_SIZE=20,Qt.DATE_SIZE=16;function Ve(G){try{if(G.get(1))return new hn(G);if(!G.get(2))return new fl(G);switch(Ga.extractNumericValueFromBitArray(G,1,4)){case 4:return new Hc(G);case 5:return new hl(G)}switch(Ga.extractNumericValueFromBitArray(G,1,5)){case 12:return new en(G);case 13:return new Br(G)}switch(Ga.extractNumericValueFromBitArray(G,1,7)){case 56:return new Qt(G,"310","11");case 57:return new Qt(G,"320","11");case 58:return new Qt(G,"310","13");case 59:return new Qt(G,"320","13");case 60:return new Qt(G,"310","15");case 61:return new Qt(G,"320","15");case 62:return new Qt(G,"310","17");case 63:return new Qt(G,"320","17")}}catch(i){throw console.log(i),new oe("unknown decoder: "+G)}}class gt{constructor(i,u,m,y){this.leftchar=i,this.rightchar=u,this.finderpattern=m,this.maybeLast=y}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,u){return i instanceof gt?gt.equalsOrNull(i.leftchar,u.leftchar)&&gt.equalsOrNull(i.rightchar,u.rightchar)&&gt.equalsOrNull(i.finderpattern,u.finderpattern):!1}static equalsOrNull(i,u){return i===null?u===null:gt.equals(i,u)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class kr{constructor(i,u,m){this.pairs=i,this.rowNumber=u,this.wasReversed=m}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,u){return i instanceof kr?this.checkEqualitity(i,u)&&i.wasReversed===u.wasReversed:!1}checkEqualitity(i,u){if(!i||!u)return;let m;return i.forEach((y,b)=>{u.forEach(w=>{y.getLeftChar().getValue()===w.getLeftChar().getValue()&&y.getRightChar().getValue()===w.getRightChar().getValue()&&y.getFinderPatter().getValue()===w.getFinderPatter().getValue()&&(m=!0)})}),m}}class Ke extends ot{constructor(i){super(...arguments),this.pairs=new Array(Ke.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,u,m){this.pairs.length=0,this.startFromEven=!1;try{return Ke.constructResult(this.decodeRow2pairs(i,u))}catch(y){this.verbose&&console.log(y)}return this.pairs.length=0,this.startFromEven=!0,Ke.constructResult(this.decodeRow2pairs(i,u))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,u){let m=!1;for(;!m;)try{this.pairs.push(this.retrieveNextPair(u,this.pairs,i))}catch(b){if(b instanceof ae){if(!this.pairs.length)throw new ae;m=!0}}if(this.checkChecksum())return this.pairs;let y;if(this.rows.length?y=!0:y=!1,this.storeRow(i,!1),y){let b=this.checkRowsBoolean(!1);if(b!=null||(b=this.checkRowsBoolean(!0),b!=null))return b}throw new ae}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let u=null;try{u=this.checkRows(new Array,0)}catch(m){this.verbose&&console.log(m)}return i&&(this.rows=this.rows.reverse()),u}checkRows(i,u){for(let m=u;m<this.rows.length;m++){let y=this.rows[m];this.pairs.length=0;for(let w of i)this.pairs.push(w.getPairs());if(this.pairs.push(y.getPairs()),!Ke.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let b=new Array(i);b.push(y);try{return this.checkRows(b,m+1)}catch(w){this.verbose&&console.log(w)}}throw new ae}static isValidSequence(i){for(let u of Ke.FINDER_PATTERN_SEQUENCES){if(i.length>u.length)continue;let m=!0;for(let y=0;y<i.length;y++)if(i[y].getFinderPattern().getValue()!=u[y]){m=!1;break}if(m)return!0}return!1}storeRow(i,u){let m=0,y=!1,b=!1;for(;m<this.rows.length;){let w=this.rows[m];if(w.getRowNumber()>i){b=w.isEquivalent(this.pairs);break}y=w.isEquivalent(this.pairs),m++}b||y||Ke.isPartialRow(this.pairs,this.rows)||(this.rows.push(m,new kr(this.pairs,i,u)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,u){for(let m of u)if(m.getPairs().length!==i.length){for(let y of m.getPairs())for(let b of i)if(gt.equals(y,b))break}}static isPartialRow(i,u){for(let m of u){let y=!0;for(let b of i){let w=!1;for(let S of m.getPairs())if(b.equals(S)){w=!0;break}if(!w){y=!1;break}}if(y)return!0}return!1}getRows(){return this.rows}static constructResult(i){let u=Vc.buildBitArray(i),y=Ve(u).parseInformation(),b=i[0].getFinderPattern().getResultPoints(),w=i[i.length-1].getFinderPattern().getResultPoints(),S=[b[0],b[1],w[0],w[1]];return new le(y,null,null,S,ie.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),u=i.getLeftChar(),m=i.getRightChar();if(m==null)return!1;let y=m.getChecksumPortion(),b=2;for(let S=1;S<this.pairs.size();++S){let T=this.pairs.get(S);y+=T.getLeftChar().getChecksumPortion(),b++;let M=T.getRightChar();M!=null&&(y+=M.getChecksumPortion(),b++)}return y%=211,211*(b-4)+y==u.getValue()}static getNextSecondBar(i,u){let m;return i.get(u)?(m=i.getNextUnset(u),m=i.getNextSet(m)):(m=i.getNextSet(u),m=i.getNextUnset(m)),m}retrieveNextPair(i,u,m){let y=u.length%2==0;this.startFromEven&&(y=!y);let b,w=!0,S=-1;do this.findNextPair(i,u,S),b=this.parseFoundFinderPattern(i,m,y),b==null?S=Ke.getNextSecondBar(i,this.startEnd[0]):w=!1;while(w);let T=this.decodeDataCharacter(i,b,y,!0);if(!this.isEmptyPair(u)&&u[u.length-1].mustBeLast())throw new ae;let M;try{M=this.decodeDataCharacter(i,b,y,!1)}catch(B){M=null,this.verbose&&console.log(B)}return new gt(T,M,b,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,u,m){let y=this.getDecodeFinderCounters();y[0]=0,y[1]=0,y[2]=0,y[3]=0;let b=i.getSize(),w;m>=0?w=m:this.isEmptyPair(u)?w=0:w=u[u.length-1].getFinderPattern().getStartEnd()[1];let S=u.length%2!=0;this.startFromEven&&(S=!S);let T=!1;for(;w<b&&(T=!i.get(w),!!T);)w++;let M=0,B=w;for(let X=w;X<b;X++)if(i.get(X)!=T)y[M]++;else{if(M==3){if(S&&Ke.reverseCounters(y),Ke.isFinderPattern(y)){this.startEnd[0]=B,this.startEnd[1]=X;return}S&&Ke.reverseCounters(y),B+=y[0]+y[1],y[0]=y[2],y[1]=y[3],y[2]=0,y[3]=0,M--}else M++;y[M]=1,T=!T}throw new ae}static reverseCounters(i){let u=i.length;for(let m=0;m<u/2;++m){let y=i[m];i[m]=i[u-m-1],i[u-m-1]=y}}parseFoundFinderPattern(i,u,m){let y,b,w;if(m){let M=this.startEnd[0]-1;for(;M>=0&&!i.get(M);)M--;M++,y=this.startEnd[0]-M,b=M,w=this.startEnd[1]}else b=this.startEnd[0],w=i.getNextUnset(this.startEnd[1]+1),y=w-this.startEnd[1];let S=this.getDecodeFinderCounters();P.arraycopy(S,0,S,1,S.length-1),S[0]=y;let T;try{T=this.parseFinderValue(S,Ke.FINDER_PATTERNS)}catch{return null}return new ds(T,[b,w],b,w,u)}decodeDataCharacter(i,u,m,y){let b=this.getDataCharacterCounters();for(let hr=0;hr<b.length;hr++)b[hr]=0;if(y)Ke.recordPatternInReverse(i,u.getStartEnd()[0],b);else{Ke.recordPattern(i,u.getStartEnd()[1],b);for(let hr=0,Ba=b.length-1;hr<Ba;hr++,Ba--){let yn=b[hr];b[hr]=b[Ba],b[Ba]=yn}}let w=17,S=it.sum(new Int32Array(b))/w,T=(u.getStartEnd()[1]-u.getStartEnd()[0])/15;if(Math.abs(S-T)/T>.3)throw new ae;let M=this.getOddCounts(),B=this.getEvenCounts(),X=this.getOddRoundingErrors(),Z=this.getEvenRoundingErrors();for(let hr=0;hr<b.length;hr++){let Ba=1*b[hr]/S,yn=Ba+.5;if(yn<1){if(Ba<.3)throw new ae;yn=1}else if(yn>8){if(Ba>8.7)throw new ae;yn=8}let Gi=hr/2;(hr&1)==0?(M[Gi]=yn,X[Gi]=Ba-yn):(B[Gi]=yn,Z[Gi]=Ba-yn)}this.adjustOddEvenCounts(w);let ne=4*u.getValue()+(m?0:2)+(y?0:1)-1,he=0,pe=0;for(let hr=M.length-1;hr>=0;hr--){if(Ke.isNotA1left(u,m,y)){let Ba=Ke.WEIGHTS[ne][2*hr];pe+=M[hr]*Ba}he+=M[hr]}let Ae=0;for(let hr=B.length-1;hr>=0;hr--)if(Ke.isNotA1left(u,m,y)){let Ba=Ke.WEIGHTS[ne][2*hr+1];Ae+=B[hr]*Ba}let Pe=pe+Ae;if((he&1)!=0||he>13||he<4)throw new ae;let rt=(13-he)/2,et=Ke.SYMBOL_WIDEST[rt],Ze=9-et,zt=Nn.getRSSvalue(M,et,!0),Pt=Nn.getRSSvalue(B,Ze,!1),sa=Ke.EVEN_TOTAL_SUBSET[rt],On=Ke.GSUM[rt],tn=zt*sa+Pt+On;return new Ja(tn,Pe)}static isNotA1left(i,u,m){return!(i.getValue()==0&&u&&m)}adjustOddEvenCounts(i){let u=it.sum(new Int32Array(this.getOddCounts())),m=it.sum(new Int32Array(this.getEvenCounts())),y=!1,b=!1;u>13?b=!0:u<4&&(y=!0);let w=!1,S=!1;m>13?S=!0:m<4&&(w=!0);let T=u+m-i,M=(u&1)==1,B=(m&1)==0;if(T==1)if(M){if(B)throw new ae;b=!0}else{if(!B)throw new ae;S=!0}else if(T==-1)if(M){if(B)throw new ae;y=!0}else{if(!B)throw new ae;w=!0}else if(T==0){if(M){if(!B)throw new ae;u<m?(y=!0,S=!0):(b=!0,w=!0)}else if(B)throw new ae}else throw new ae;if(y){if(b)throw new ae;Ke.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(b&&Ke.decrement(this.getOddCounts(),this.getOddRoundingErrors()),w){if(S)throw new ae;Ke.increment(this.getEvenCounts(),this.getOddRoundingErrors())}S&&Ke.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ke.SYMBOL_WIDEST=[7,5,4,3,1],Ke.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ke.GSUM=[0,348,1388,2948,3988],Ke.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ke.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ke.FINDER_PAT_A=0,Ke.FINDER_PAT_B=1,Ke.FINDER_PAT_C=2,Ke.FINDER_PAT_D=3,Ke.FINDER_PAT_E=4,Ke.FINDER_PAT_F=5,Ke.FINDER_PATTERN_SEQUENCES=[[Ke.FINDER_PAT_A,Ke.FINDER_PAT_A],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_B,Ke.FINDER_PAT_B],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_C,Ke.FINDER_PAT_B,Ke.FINDER_PAT_D],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_E,Ke.FINDER_PAT_B,Ke.FINDER_PAT_D,Ke.FINDER_PAT_C],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_E,Ke.FINDER_PAT_B,Ke.FINDER_PAT_D,Ke.FINDER_PAT_D,Ke.FINDER_PAT_F],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_E,Ke.FINDER_PAT_B,Ke.FINDER_PAT_D,Ke.FINDER_PAT_E,Ke.FINDER_PAT_F,Ke.FINDER_PAT_F],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_A,Ke.FINDER_PAT_B,Ke.FINDER_PAT_B,Ke.FINDER_PAT_C,Ke.FINDER_PAT_C,Ke.FINDER_PAT_D,Ke.FINDER_PAT_D],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_A,Ke.FINDER_PAT_B,Ke.FINDER_PAT_B,Ke.FINDER_PAT_C,Ke.FINDER_PAT_C,Ke.FINDER_PAT_D,Ke.FINDER_PAT_E,Ke.FINDER_PAT_E],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_A,Ke.FINDER_PAT_B,Ke.FINDER_PAT_B,Ke.FINDER_PAT_C,Ke.FINDER_PAT_C,Ke.FINDER_PAT_D,Ke.FINDER_PAT_E,Ke.FINDER_PAT_F,Ke.FINDER_PAT_F],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_A,Ke.FINDER_PAT_B,Ke.FINDER_PAT_B,Ke.FINDER_PAT_C,Ke.FINDER_PAT_D,Ke.FINDER_PAT_D,Ke.FINDER_PAT_E,Ke.FINDER_PAT_E,Ke.FINDER_PAT_F,Ke.FINDER_PAT_F]],Ke.MAX_PAIRS=11;class Yf extends Ja{constructor(i,u,m){super(i,u),this.count=0,this.finderPattern=m}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class mr extends ot{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,u,m){const y=this.decodePair(u,!1,i,m);mr.addOrTally(this.possibleLeftPairs,y),u.reverse();let b=this.decodePair(u,!0,i,m);mr.addOrTally(this.possibleRightPairs,b),u.reverse();for(let w of this.possibleLeftPairs)if(w.getCount()>1){for(let S of this.possibleRightPairs)if(S.getCount()>1&&mr.checkChecksum(w,S))return mr.constructResult(w,S)}throw new ae}static addOrTally(i,u){if(u==null)return;let m=!1;for(let y of i)if(y.getValue()===u.getValue()){y.incrementCount(),m=!0;break}m||i.push(u)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,u){let m=4537077*i.getValue()+u.getValue(),y=new String(m).toString(),b=new ce;for(let M=13-y.length;M>0;M--)b.append("0");b.append(y);let w=0;for(let M=0;M<13;M++){let B=b.charAt(M).charCodeAt(0)-48;w+=(M&1)===0?3*B:B}w=10-w%10,w===10&&(w=0),b.append(w.toString());let S=i.getFinderPattern().getResultPoints(),T=u.getFinderPattern().getResultPoints();return new le(b.toString(),null,0,[S[0],S[1],T[0],T[1]],ie.RSS_14,new Date().getTime())}static checkChecksum(i,u){let m=(i.getChecksumPortion()+16*u.getChecksumPortion())%79,y=9*i.getFinderPattern().getValue()+u.getFinderPattern().getValue();return y>72&&y--,y>8&&y--,m===y}decodePair(i,u,m,y){try{let b=this.findFinderPattern(i,u),w=this.parseFoundFinderPattern(i,m,u,b),S=y==null?null:y.get(z.NEED_RESULT_POINT_CALLBACK);if(S!=null){let B=(b[0]+b[1])/2;u&&(B=i.getSize()-1-B),S.foundPossibleResultPoint(new We(B,m))}let T=this.decodeDataCharacter(i,w,!0),M=this.decodeDataCharacter(i,w,!1);return new Yf(1597*T.getValue()+M.getValue(),T.getChecksumPortion()+4*M.getChecksumPortion(),w)}catch{return null}}decodeDataCharacter(i,u,m){let y=this.getDataCharacterCounters();for(let Ae=0;Ae<y.length;Ae++)y[Ae]=0;if(m)kt.recordPatternInReverse(i,u.getStartEnd()[0],y);else{kt.recordPattern(i,u.getStartEnd()[1]+1,y);for(let Ae=0,Pe=y.length-1;Ae<Pe;Ae++,Pe--){let rt=y[Ae];y[Ae]=y[Pe],y[Pe]=rt}}let b=m?16:15,w=it.sum(new Int32Array(y))/b,S=this.getOddCounts(),T=this.getEvenCounts(),M=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let Ae=0;Ae<y.length;Ae++){let Pe=y[Ae]/w,rt=Math.floor(Pe+.5);rt<1?rt=1:rt>8&&(rt=8);let et=Math.floor(Ae/2);(Ae&1)===0?(S[et]=rt,M[et]=Pe-rt):(T[et]=rt,B[et]=Pe-rt)}this.adjustOddEvenCounts(m,b);let X=0,Z=0;for(let Ae=S.length-1;Ae>=0;Ae--)Z*=9,Z+=S[Ae],X+=S[Ae];let ne=0,he=0;for(let Ae=T.length-1;Ae>=0;Ae--)ne*=9,ne+=T[Ae],he+=T[Ae];let pe=Z+3*ne;if(m){if((X&1)!==0||X>12||X<4)throw new ae;let Ae=(12-X)/2,Pe=mr.OUTSIDE_ODD_WIDEST[Ae],rt=9-Pe,et=Nn.getRSSvalue(S,Pe,!1),Ze=Nn.getRSSvalue(T,rt,!0),zt=mr.OUTSIDE_EVEN_TOTAL_SUBSET[Ae],Pt=mr.OUTSIDE_GSUM[Ae];return new Ja(et*zt+Ze+Pt,pe)}else{if((he&1)!==0||he>10||he<4)throw new ae;let Ae=(10-he)/2,Pe=mr.INSIDE_ODD_WIDEST[Ae],rt=9-Pe,et=Nn.getRSSvalue(S,Pe,!0),Ze=Nn.getRSSvalue(T,rt,!1),zt=mr.INSIDE_ODD_TOTAL_SUBSET[Ae],Pt=mr.INSIDE_GSUM[Ae];return new Ja(Ze*zt+et+Pt,pe)}}findFinderPattern(i,u){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let y=i.getSize(),b=!1,w=0;for(;w<y&&(b=!i.get(w),u!==b);)w++;let S=0,T=w;for(let M=w;M<y;M++)if(i.get(M)!==b)m[S]++;else{if(S===3){if(ot.isFinderPattern(m))return[T,M];T+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,S--}else S++;m[S]=1,b=!b}throw new ae}parseFoundFinderPattern(i,u,m,y){let b=i.get(y[0]),w=y[0]-1;for(;w>=0&&b!==i.get(w);)w--;w++;const S=y[0]-w,T=this.getDecodeFinderCounters(),M=new Int32Array(T.length);P.arraycopy(T,0,M,1,T.length-1),M[0]=S;const B=this.parseFinderValue(M,mr.FINDER_PATTERNS);let X=w,Z=y[1];return m&&(X=i.getSize()-1-X,Z=i.getSize()-1-Z),new ds(B,[w,y[1]],X,Z,u)}adjustOddEvenCounts(i,u){let m=it.sum(new Int32Array(this.getOddCounts())),y=it.sum(new Int32Array(this.getEvenCounts())),b=!1,w=!1,S=!1,T=!1;i?(m>12?w=!0:m<4&&(b=!0),y>12?T=!0:y<4&&(S=!0)):(m>11?w=!0:m<5&&(b=!0),y>10?T=!0:y<4&&(S=!0));let M=m+y-u,B=(m&1)===(i?1:0),X=(y&1)===1;if(M===1)if(B){if(X)throw new ae;w=!0}else{if(!X)throw new ae;T=!0}else if(M===-1)if(B){if(X)throw new ae;b=!0}else{if(!X)throw new ae;S=!0}else if(M===0){if(B){if(!X)throw new ae;m<y?(b=!0,T=!0):(w=!0,S=!0)}else if(X)throw new ae}else throw new ae;if(b){if(w)throw new ae;ot.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(w&&ot.decrement(this.getOddCounts(),this.getOddRoundingErrors()),S){if(T)throw new ae;ot.increment(this.getEvenCounts(),this.getOddRoundingErrors())}T&&ot.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}mr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],mr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],mr.OUTSIDE_GSUM=[0,161,961,2015,2715],mr.INSIDE_GSUM=[0,336,1036,1516],mr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],mr.INSIDE_ODD_WIDEST=[2,4,6,8],mr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Hn extends kt{constructor(i,u){super(),this.readers=[],this.verbose=u===!0;const m=i?i.get(z.POSSIBLE_FORMATS):null,y=i&&i.get(z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;m?((m.includes(ie.EAN_13)||m.includes(ie.UPC_A)||m.includes(ie.EAN_8)||m.includes(ie.UPC_E))&&this.readers.push(new De(i)),m.includes(ie.CODE_39)&&this.readers.push(new Qe(y)),m.includes(ie.CODE_128)&&this.readers.push(new xe),m.includes(ie.ITF)&&this.readers.push(new st),m.includes(ie.RSS_14)&&this.readers.push(new mr),m.includes(ie.RSS_EXPANDED)&&this.readers.push(new Ke(this.verbose))):(this.readers.push(new De(i)),this.readers.push(new Qe),this.readers.push(new De(i)),this.readers.push(new xe),this.readers.push(new st),this.readers.push(new mr),this.readers.push(new Ke(this.verbose)))}decodeRow(i,u,m){for(let y=0;y<this.readers.length;y++)try{return this.readers[y].decodeRow(i,u,m)}catch{}throw new ae}reset(){this.readers.forEach(i=>i.reset())}}class w1 extends ge{constructor(i=500,u){super(new Hn(u),i,u)}}class ar{constructor(i,u,m){this.ecCodewords=i,this.ecBlocks=[u],m&&this.ecBlocks.push(m)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Jt{constructor(i,u){this.count=i,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class qt{constructor(i,u,m,y,b,w){this.versionNumber=i,this.symbolSizeRows=u,this.symbolSizeColumns=m,this.dataRegionSizeRows=y,this.dataRegionSizeColumns=b,this.ecBlocks=w;let S=0;const T=w.getECCodewords(),M=w.getECBlocks();for(let B of M)S+=B.getCount()*(B.getDataCodewords()+T);this.totalCodewords=S}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,u){if((i&1)!==0||(u&1)!==0)throw new L;for(let m of qt.VERSIONS)if(m.symbolSizeRows===i&&m.symbolSizeColumns===u)return m;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new qt(1,10,10,8,8,new ar(5,new Jt(1,3))),new qt(2,12,12,10,10,new ar(7,new Jt(1,5))),new qt(3,14,14,12,12,new ar(10,new Jt(1,8))),new qt(4,16,16,14,14,new ar(12,new Jt(1,12))),new qt(5,18,18,16,16,new ar(14,new Jt(1,18))),new qt(6,20,20,18,18,new ar(18,new Jt(1,22))),new qt(7,22,22,20,20,new ar(20,new Jt(1,30))),new qt(8,24,24,22,22,new ar(24,new Jt(1,36))),new qt(9,26,26,24,24,new ar(28,new Jt(1,44))),new qt(10,32,32,14,14,new ar(36,new Jt(1,62))),new qt(11,36,36,16,16,new ar(42,new Jt(1,86))),new qt(12,40,40,18,18,new ar(48,new Jt(1,114))),new qt(13,44,44,20,20,new ar(56,new Jt(1,144))),new qt(14,48,48,22,22,new ar(68,new Jt(1,174))),new qt(15,52,52,24,24,new ar(42,new Jt(2,102))),new qt(16,64,64,14,14,new ar(56,new Jt(2,140))),new qt(17,72,72,16,16,new ar(36,new Jt(4,92))),new qt(18,80,80,18,18,new ar(48,new Jt(4,114))),new qt(19,88,88,20,20,new ar(56,new Jt(4,144))),new qt(20,96,96,22,22,new ar(68,new Jt(4,174))),new qt(21,104,104,24,24,new ar(56,new Jt(6,136))),new qt(22,120,120,18,18,new ar(68,new Jt(6,175))),new qt(23,132,132,20,20,new ar(62,new Jt(8,163))),new qt(24,144,144,22,22,new ar(62,new Jt(8,156),new Jt(2,155))),new qt(25,8,18,6,16,new ar(7,new Jt(1,5))),new qt(26,8,32,6,14,new ar(11,new Jt(1,10))),new qt(27,12,26,10,24,new ar(14,new Jt(1,16))),new qt(28,12,36,10,16,new ar(18,new Jt(1,22))),new qt(29,16,36,14,16,new ar(24,new Jt(1,32))),new qt(30,16,48,14,22,new ar(28,new Jt(1,49)))]}}qt.VERSIONS=qt.buildVersions();class Ri{constructor(i){const u=i.getHeight();if(u<8||u>144||(u&1)!==0)throw new L;this.version=Ri.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new me(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const u=i.getHeight(),m=i.getWidth();return qt.getVersionForDimensions(u,m)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let u=0,m=4,y=0;const b=this.mappingBitMatrix.getHeight(),w=this.mappingBitMatrix.getWidth();let S=!1,T=!1,M=!1,B=!1;do if(m===b&&y===0&&!S)i[u++]=this.readCorner1(b,w)&255,m-=2,y+=2,S=!0;else if(m===b-2&&y===0&&(w&3)!==0&&!T)i[u++]=this.readCorner2(b,w)&255,m-=2,y+=2,T=!0;else if(m===b+4&&y===2&&(w&7)===0&&!M)i[u++]=this.readCorner3(b,w)&255,m-=2,y+=2,M=!0;else if(m===b-2&&y===0&&(w&7)===4&&!B)i[u++]=this.readCorner4(b,w)&255,m-=2,y+=2,B=!0;else{do m<b&&y>=0&&!this.readMappingMatrix.get(y,m)&&(i[u++]=this.readUtah(m,y,b,w)&255),m-=2,y+=2;while(m>=0&&y<w);m+=1,y+=3;do m>=0&&y<w&&!this.readMappingMatrix.get(y,m)&&(i[u++]=this.readUtah(m,y,b,w)&255),m+=2,y-=2;while(m<b&&y>=0);m+=3,y+=1}while(m<b||y<w);if(u!==this.version.getTotalCodewords())throw new L;return i}readModule(i,u,m,y){return i<0&&(i+=m,u+=4-(m+4&7)),u<0&&(u+=y,i+=4-(y+4&7)),this.readMappingMatrix.set(u,i),this.mappingBitMatrix.get(u,i)}readUtah(i,u,m,y){let b=0;return this.readModule(i-2,u-2,m,y)&&(b|=1),b<<=1,this.readModule(i-2,u-1,m,y)&&(b|=1),b<<=1,this.readModule(i-1,u-2,m,y)&&(b|=1),b<<=1,this.readModule(i-1,u-1,m,y)&&(b|=1),b<<=1,this.readModule(i-1,u,m,y)&&(b|=1),b<<=1,this.readModule(i,u-2,m,y)&&(b|=1),b<<=1,this.readModule(i,u-1,m,y)&&(b|=1),b<<=1,this.readModule(i,u,m,y)&&(b|=1),b}readCorner1(i,u){let m=0;return this.readModule(i-1,0,i,u)&&(m|=1),m<<=1,this.readModule(i-1,1,i,u)&&(m|=1),m<<=1,this.readModule(i-1,2,i,u)&&(m|=1),m<<=1,this.readModule(0,u-2,i,u)&&(m|=1),m<<=1,this.readModule(0,u-1,i,u)&&(m|=1),m<<=1,this.readModule(1,u-1,i,u)&&(m|=1),m<<=1,this.readModule(2,u-1,i,u)&&(m|=1),m<<=1,this.readModule(3,u-1,i,u)&&(m|=1),m}readCorner2(i,u){let m=0;return this.readModule(i-3,0,i,u)&&(m|=1),m<<=1,this.readModule(i-2,0,i,u)&&(m|=1),m<<=1,this.readModule(i-1,0,i,u)&&(m|=1),m<<=1,this.readModule(0,u-4,i,u)&&(m|=1),m<<=1,this.readModule(0,u-3,i,u)&&(m|=1),m<<=1,this.readModule(0,u-2,i,u)&&(m|=1),m<<=1,this.readModule(0,u-1,i,u)&&(m|=1),m<<=1,this.readModule(1,u-1,i,u)&&(m|=1),m}readCorner3(i,u){let m=0;return this.readModule(i-1,0,i,u)&&(m|=1),m<<=1,this.readModule(i-1,u-1,i,u)&&(m|=1),m<<=1,this.readModule(0,u-3,i,u)&&(m|=1),m<<=1,this.readModule(0,u-2,i,u)&&(m|=1),m<<=1,this.readModule(0,u-1,i,u)&&(m|=1),m<<=1,this.readModule(1,u-3,i,u)&&(m|=1),m<<=1,this.readModule(1,u-2,i,u)&&(m|=1),m<<=1,this.readModule(1,u-1,i,u)&&(m|=1),m}readCorner4(i,u){let m=0;return this.readModule(i-3,0,i,u)&&(m|=1),m<<=1,this.readModule(i-2,0,i,u)&&(m|=1),m<<=1,this.readModule(i-1,0,i,u)&&(m|=1),m<<=1,this.readModule(0,u-2,i,u)&&(m|=1),m<<=1,this.readModule(0,u-1,i,u)&&(m|=1),m<<=1,this.readModule(1,u-1,i,u)&&(m|=1),m<<=1,this.readModule(2,u-1,i,u)&&(m|=1),m<<=1,this.readModule(3,u-1,i,u)&&(m|=1),m}extractDataRegion(i){const u=this.version.getSymbolSizeRows(),m=this.version.getSymbolSizeColumns();if(i.getHeight()!==u)throw new E("Dimension of bitMatrix must match the version size");const y=this.version.getDataRegionSizeRows(),b=this.version.getDataRegionSizeColumns(),w=u/y|0,S=m/b|0,T=w*y,M=S*b,B=new me(M,T);for(let X=0;X<w;++X){const Z=X*y;for(let ne=0;ne<S;++ne){const he=ne*b;for(let pe=0;pe<y;++pe){const Ae=X*(y+2)+1+pe,Pe=Z+pe;for(let rt=0;rt<b;++rt){const et=ne*(b+2)+1+rt;if(i.get(et,Ae)){const Ze=he+rt;B.set(Ze,Pe)}}}}}return B}}class Li{constructor(i,u){this.numDataCodewords=i,this.codewords=u}static getDataBlocks(i,u){const m=u.getECBlocks();let y=0;const b=m.getECBlocks();for(let pe of b)y+=pe.getCount();const w=new Array(y);let S=0;for(let pe of b)for(let Ae=0;Ae<pe.getCount();Ae++){const Pe=pe.getDataCodewords(),rt=m.getECCodewords()+Pe;w[S++]=new Li(Pe,new Uint8Array(rt))}const M=w[0].codewords.length-m.getECCodewords(),B=M-1;let X=0;for(let pe=0;pe<B;pe++)for(let Ae=0;Ae<S;Ae++)w[Ae].codewords[pe]=i[X++];const Z=u.getVersionNumber()===24,ne=Z?8:S;for(let pe=0;pe<ne;pe++)w[pe].codewords[M-1]=i[X++];const he=w[0].codewords.length;for(let pe=M;pe<he;pe++)for(let Ae=0;Ae<S;Ae++){const Pe=Z?(Ae+8)%S:Ae,rt=Z&&Pe>7?pe-1:pe;w[Pe].codewords[rt]=i[X++]}if(X!==i.length)throw new E;return w}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class $n{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new E(""+i);let u=0,m=this.bitOffset,y=this.byteOffset;const b=this.bytes;if(m>0){const w=8-m,S=i<w?i:w,T=w-S,M=255>>8-S<<T;u=(b[y]&M)>>T,i-=S,m+=S,m===8&&(m=0,y++)}if(i>0){for(;i>=8;)u=u<<8|b[y]&255,y++,i-=8;if(i>0){const w=8-i,S=255>>w<<w;u=u<<i|(b[y]&S)>>w,m+=i}}return this.bitOffset=m,this.byteOffset=y,u}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var nr;(function(G){G[G.PAD_ENCODE=0]="PAD_ENCODE",G[G.ASCII_ENCODE=1]="ASCII_ENCODE",G[G.C40_ENCODE=2]="C40_ENCODE",G[G.TEXT_ENCODE=3]="TEXT_ENCODE",G[G.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",G[G.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",G[G.BASE256_ENCODE=6]="BASE256_ENCODE"})(nr||(nr={}));class Vs{static decode(i){const u=new $n(i),m=new ce,y=new ce,b=new Array;let w=nr.ASCII_ENCODE;do if(w===nr.ASCII_ENCODE)w=this.decodeAsciiSegment(u,m,y);else{switch(w){case nr.C40_ENCODE:this.decodeC40Segment(u,m);break;case nr.TEXT_ENCODE:this.decodeTextSegment(u,m);break;case nr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(u,m);break;case nr.EDIFACT_ENCODE:this.decodeEdifactSegment(u,m);break;case nr.BASE256_ENCODE:this.decodeBase256Segment(u,m,b);break;default:throw new L}w=nr.ASCII_ENCODE}while(w!==nr.PAD_ENCODE&&u.available()>0);return y.length()>0&&m.append(y.toString()),new be(i,m.toString(),b.length===0?null:b,null)}static decodeAsciiSegment(i,u,m){let y=!1;do{let b=i.readBits(8);if(b===0)throw new L;if(b<=128)return y&&(b+=128),u.append(String.fromCharCode(b-1)),nr.ASCII_ENCODE;if(b===129)return nr.PAD_ENCODE;if(b<=229){const w=b-130;w<10&&u.append("0"),u.append(""+w)}else switch(b){case 230:return nr.C40_ENCODE;case 231:return nr.BASE256_ENCODE;case 232:u.append("");break;case 233:case 234:break;case 235:y=!0;break;case 236:u.append("[)>05"),m.insert(0,"");break;case 237:u.append("[)>06"),m.insert(0,"");break;case 238:return nr.ANSIX12_ENCODE;case 239:return nr.TEXT_ENCODE;case 240:return nr.EDIFACT_ENCODE;case 241:break;default:if(b!==254||i.available()!==0)throw new L;break}}while(i.available()>0);return nr.ASCII_ENCODE}static decodeC40Segment(i,u){let m=!1;const y=[];let b=0;do{if(i.available()===8)return;const w=i.readBits(8);if(w===254)return;this.parseTwoBytes(w,i.readBits(8),y);for(let S=0;S<3;S++){const T=y[S];switch(b){case 0:if(T<3)b=T+1;else if(T<this.C40_BASIC_SET_CHARS.length){const M=this.C40_BASIC_SET_CHARS[T];m?(u.append(String.fromCharCode(M.charCodeAt(0)+128)),m=!1):u.append(M)}else throw new L;break;case 1:m?(u.append(String.fromCharCode(T+128)),m=!1):u.append(String.fromCharCode(T)),b=0;break;case 2:if(T<this.C40_SHIFT2_SET_CHARS.length){const M=this.C40_SHIFT2_SET_CHARS[T];m?(u.append(String.fromCharCode(M.charCodeAt(0)+128)),m=!1):u.append(M)}else switch(T){case 27:u.append("");break;case 30:m=!0;break;default:throw new L}b=0;break;case 3:m?(u.append(String.fromCharCode(T+224)),m=!1):u.append(String.fromCharCode(T+96)),b=0;break;default:throw new L}}}while(i.available()>0)}static decodeTextSegment(i,u){let m=!1,y=[],b=0;do{if(i.available()===8)return;const w=i.readBits(8);if(w===254)return;this.parseTwoBytes(w,i.readBits(8),y);for(let S=0;S<3;S++){const T=y[S];switch(b){case 0:if(T<3)b=T+1;else if(T<this.TEXT_BASIC_SET_CHARS.length){const M=this.TEXT_BASIC_SET_CHARS[T];m?(u.append(String.fromCharCode(M.charCodeAt(0)+128)),m=!1):u.append(M)}else throw new L;break;case 1:m?(u.append(String.fromCharCode(T+128)),m=!1):u.append(String.fromCharCode(T)),b=0;break;case 2:if(T<this.TEXT_SHIFT2_SET_CHARS.length){const M=this.TEXT_SHIFT2_SET_CHARS[T];m?(u.append(String.fromCharCode(M.charCodeAt(0)+128)),m=!1):u.append(M)}else switch(T){case 27:u.append("");break;case 30:m=!0;break;default:throw new L}b=0;break;case 3:if(T<this.TEXT_SHIFT3_SET_CHARS.length){const M=this.TEXT_SHIFT3_SET_CHARS[T];m?(u.append(String.fromCharCode(M.charCodeAt(0)+128)),m=!1):u.append(M),b=0}else throw new L;break;default:throw new L}}}while(i.available()>0)}static decodeAnsiX12Segment(i,u){const m=[];do{if(i.available()===8)return;const y=i.readBits(8);if(y===254)return;this.parseTwoBytes(y,i.readBits(8),m);for(let b=0;b<3;b++){const w=m[b];switch(w){case 0:u.append("\r");break;case 1:u.append("*");break;case 2:u.append(">");break;case 3:u.append(" ");break;default:if(w<14)u.append(String.fromCharCode(w+44));else if(w<40)u.append(String.fromCharCode(w+51));else throw new L;break}}}while(i.available()>0)}static parseTwoBytes(i,u,m){let y=(i<<8)+u-1,b=Math.floor(y/1600);m[0]=b,y-=b*1600,b=Math.floor(y/40),m[1]=b,m[2]=y-b*40}static decodeEdifactSegment(i,u){do{if(i.available()<=16)return;for(let m=0;m<4;m++){let y=i.readBits(6);if(y===31){const b=8-i.getBitOffset();b!==8&&i.readBits(b);return}(y&32)===0&&(y|=64),u.append(String.fromCharCode(y))}}while(i.available()>0)}static decodeBase256Segment(i,u,m){let y=1+i.getByteOffset();const b=this.unrandomize255State(i.readBits(8),y++);let w;if(b===0?w=i.available()/8|0:b<250?w=b:w=250*(b-249)+this.unrandomize255State(i.readBits(8),y++),w<0)throw new L;const S=new Uint8Array(w);for(let T=0;T<w;T++){if(i.available()<8)throw new L;S[T]=this.unrandomize255State(i.readBits(8),y++)}m.push(S);try{u.append(H.decode(S,$.ISO88591))}catch(T){throw new oe("Platform does not support required encoding: "+T.message)}}static unrandomize255State(i,u){const m=149*u%255+1,y=i-m;return y>=0?y:y+256}}Vs.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Vs.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Vs.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Vs.TEXT_SHIFT2_SET_CHARS=Vs.C40_SHIFT2_SET_CHARS,Vs.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class N1{constructor(){this.rsDecoder=new qe(ve.DATA_MATRIX_FIELD_256)}decode(i){const u=new Ri(i),m=u.getVersion(),y=u.readCodewords(),b=Li.getDataBlocks(y,m);let w=0;for(let M of b)w+=M.getNumDataCodewords();const S=new Uint8Array(w),T=b.length;for(let M=0;M<T;M++){const B=b[M],X=B.getCodewords(),Z=B.getNumDataCodewords();this.correctErrors(X,Z);for(let ne=0;ne<Z;ne++)S[ne*T+M]=X[ne]}return Vs.decode(S)}correctErrors(i,u){const m=new Int32Array(i);try{this.rsDecoder.decode(m,i.length-u)}catch{throw new O}for(let y=0;y<u;y++)i[y]=m[y]}}class Fr{constructor(i){this.image=i,this.rectangleDetector=new mt(this.image)}detect(){const i=this.rectangleDetector.detect();let u=this.detectSolid1(i);if(u=this.detectSolid2(u),u[3]=this.correctTopRight(u),!u[3])throw new ae;u=this.shiftToModuleCenter(u);const m=u[0],y=u[1],b=u[2],w=u[3];let S=this.transitionsBetween(m,w)+1,T=this.transitionsBetween(b,w)+1;(S&1)===1&&(S+=1),(T&1)===1&&(T+=1),4*S<7*T&&4*T<7*S&&(S=T=Math.max(S,T));let M=Fr.sampleGrid(this.image,m,y,b,w,S,T);return new lt(M,[m,y,b,w])}static shiftPoint(i,u,m){let y=(u.getX()-i.getX())/(m+1),b=(u.getY()-i.getY())/(m+1);return new We(i.getX()+y,i.getY()+b)}static moveAway(i,u,m){let y=i.getX(),b=i.getY();return y<u?y-=1:y+=1,b<m?b-=1:b+=1,new We(y,b)}detectSolid1(i){let u=i[0],m=i[1],y=i[3],b=i[2],w=this.transitionsBetween(u,m),S=this.transitionsBetween(m,y),T=this.transitionsBetween(y,b),M=this.transitionsBetween(b,u),B=w,X=[b,u,m,y];return B>S&&(B=S,X[0]=u,X[1]=m,X[2]=y,X[3]=b),B>T&&(B=T,X[0]=m,X[1]=y,X[2]=b,X[3]=u),B>M&&(X[0]=y,X[1]=b,X[2]=u,X[3]=m),X}detectSolid2(i){let u=i[0],m=i[1],y=i[2],b=i[3],w=this.transitionsBetween(u,b),S=Fr.shiftPoint(m,y,(w+1)*4),T=Fr.shiftPoint(y,m,(w+1)*4),M=this.transitionsBetween(S,u),B=this.transitionsBetween(T,b);return M<B?(i[0]=u,i[1]=m,i[2]=y,i[3]=b):(i[0]=m,i[1]=y,i[2]=b,i[3]=u),i}correctTopRight(i){let u=i[0],m=i[1],y=i[2],b=i[3],w=this.transitionsBetween(u,b),S=this.transitionsBetween(m,b),T=Fr.shiftPoint(u,m,(S+1)*4),M=Fr.shiftPoint(y,m,(w+1)*4);w=this.transitionsBetween(T,b),S=this.transitionsBetween(M,b);let B=new We(b.getX()+(y.getX()-m.getX())/(w+1),b.getY()+(y.getY()-m.getY())/(w+1)),X=new We(b.getX()+(u.getX()-m.getX())/(S+1),b.getY()+(u.getY()-m.getY())/(S+1));if(!this.isValid(B))return this.isValid(X)?X:null;if(!this.isValid(X))return B;let Z=this.transitionsBetween(T,B)+this.transitionsBetween(M,B),ne=this.transitionsBetween(T,X)+this.transitionsBetween(M,X);return Z>ne?B:X}shiftToModuleCenter(i){let u=i[0],m=i[1],y=i[2],b=i[3],w=this.transitionsBetween(u,b)+1,S=this.transitionsBetween(y,b)+1,T=Fr.shiftPoint(u,m,S*4),M=Fr.shiftPoint(y,m,w*4);w=this.transitionsBetween(T,b)+1,S=this.transitionsBetween(M,b)+1,(w&1)===1&&(w+=1),(S&1)===1&&(S+=1);let B=(u.getX()+m.getX()+y.getX()+b.getX())/4,X=(u.getY()+m.getY()+y.getY()+b.getY())/4;u=Fr.moveAway(u,B,X),m=Fr.moveAway(m,B,X),y=Fr.moveAway(y,B,X),b=Fr.moveAway(b,B,X);let Z,ne;return T=Fr.shiftPoint(u,m,S*4),T=Fr.shiftPoint(T,b,w*4),Z=Fr.shiftPoint(m,u,S*4),Z=Fr.shiftPoint(Z,y,w*4),M=Fr.shiftPoint(y,b,S*4),M=Fr.shiftPoint(M,m,w*4),ne=Fr.shiftPoint(b,y,S*4),ne=Fr.shiftPoint(ne,u,w*4),[T,Z,M,ne]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,u,m,y,b,w,S){return ut.getInstance().sampleGrid(i,w,S,.5,.5,w-.5,.5,w-.5,S-.5,.5,S-.5,u.getX(),u.getY(),b.getX(),b.getY(),y.getX(),y.getY(),m.getX(),m.getY())}transitionsBetween(i,u){let m=Math.trunc(i.getX()),y=Math.trunc(i.getY()),b=Math.trunc(u.getX()),w=Math.trunc(u.getY()),S=Math.abs(w-y)>Math.abs(b-m);if(S){let pe=m;m=y,y=pe,pe=b,b=w,w=pe}let T=Math.abs(b-m),M=Math.abs(w-y),B=-T/2,X=y<w?1:-1,Z=m<b?1:-1,ne=0,he=this.image.get(S?y:m,S?m:y);for(let pe=m,Ae=y;pe!==b;pe+=Z){let Pe=this.image.get(S?Ae:pe,S?pe:Ae);if(Pe!==he&&(ne++,he=Pe),B+=M,B>0){if(Ae===w)break;Ae+=X,B-=T}}return ne}}class Hs{constructor(){this.decoder=new N1}decode(i,u=null){let m,y;if(u!=null&&u.has(z.PURE_BARCODE)){const M=Hs.extractPureBits(i.getBlackMatrix());m=this.decoder.decode(M),y=Hs.NO_POINTS}else{const M=new Fr(i.getBlackMatrix()).detect();m=this.decoder.decode(M.getBits()),y=M.getPoints()}const b=m.getRawBytes(),w=new le(m.getText(),b,8*b.length,y,ie.DATA_MATRIX,P.currentTimeMillis()),S=m.getByteSegments();S!=null&&w.putMetadata($e.BYTE_SEGMENTS,S);const T=m.getECLevel();return T!=null&&w.putMetadata($e.ERROR_CORRECTION_LEVEL,T),w}reset(){}static extractPureBits(i){const u=i.getTopLeftOnBit(),m=i.getBottomRightOnBit();if(u==null||m==null)throw new ae;const y=this.moduleSize(u,i);let b=u[1];const w=m[1];let S=u[0];const M=(m[0]-S+1)/y,B=(w-b+1)/y;if(M<=0||B<=0)throw new ae;const X=y/2;b+=X,S+=X;const Z=new me(M,B);for(let ne=0;ne<B;ne++){const he=b+ne*y;for(let pe=0;pe<M;pe++)i.get(S+pe*y,he)&&Z.set(pe,ne)}return Z}static moduleSize(i,u){const m=u.getWidth();let y=i[0];const b=i[1];for(;y<m&&u.get(y,b);)y++;if(y===m)throw new ae;const w=y-i[0];if(w===0)throw new ae;return w}}Hs.NO_POINTS=[];class $c extends ge{constructor(i=500){super(new Hs,i)}}var Bi;(function(G){G[G.L=0]="L",G[G.M=1]="M",G[G.Q=2]="Q",G[G.H=3]="H"})(Bi||(Bi={}));class Ht{constructor(i,u,m){this.value=i,this.stringValue=u,this.bits=m,Ht.FOR_BITS.set(m,this),Ht.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return Ht.L;case"M":return Ht.M;case"Q":return Ht.Q;case"H":return Ht.H;default:throw new x(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof Ht))return!1;const u=i;return this.value===u.value}static forBits(i){if(i<0||i>=Ht.FOR_BITS.size)throw new E;return Ht.FOR_BITS.get(i)}}Ht.FOR_BITS=new Map,Ht.FOR_VALUE=new Map,Ht.L=new Ht(Bi.L,"L",1),Ht.M=new Ht(Bi.M,"M",0),Ht.Q=new Ht(Bi.Q,"Q",3),Ht.H=new Ht(Bi.H,"H",2);class wa{constructor(i){this.errorCorrectionLevel=Ht.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,u){return R.bitCount(i^u)}static decodeFormatInformation(i,u){const m=wa.doDecodeFormatInformation(i,u);return m!==null?m:wa.doDecodeFormatInformation(i^wa.FORMAT_INFO_MASK_QR,u^wa.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,u){let m=Number.MAX_SAFE_INTEGER,y=0;for(const b of wa.FORMAT_INFO_DECODE_LOOKUP){const w=b[0];if(w===i||w===u)return new wa(b[1]);let S=wa.numBitsDiffering(i,w);S<m&&(y=b[1],m=S),i!==u&&(S=wa.numBitsDiffering(u,w),S<m&&(y=b[1],m=S))}return m<=3?new wa(y):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof wa))return!1;const u=i;return this.errorCorrectionLevel===u.errorCorrectionLevel&&this.dataMask===u.dataMask}}wa.FORMAT_INFO_MASK_QR=21522,wa.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Te{constructor(i,...u){this.ecCodewordsPerBlock=i,this.ecBlocks=u}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const u=this.ecBlocks;for(const m of u)i+=m.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class re{constructor(i,u){this.count=i,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class yt{constructor(i,u,...m){this.versionNumber=i,this.alignmentPatternCenters=u,this.ecBlocks=m;let y=0;const b=m[0].getECCodewordsPerBlock(),w=m[0].getECBlocks();for(const S of w)y+=S.getCount()*(S.getDataCodewords()+b);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new L;try{return this.getVersionForNumber((i-17)/4)}catch{throw new L}}static getVersionForNumber(i){if(i<1||i>40)throw new E;return yt.VERSIONS[i-1]}static decodeVersionInformation(i){let u=Number.MAX_SAFE_INTEGER,m=0;for(let y=0;y<yt.VERSION_DECODE_INFO.length;y++){const b=yt.VERSION_DECODE_INFO[y];if(b===i)return yt.getVersionForNumber(y+7);const w=wa.numBitsDiffering(i,b);w<u&&(m=y+7,u=w)}return u<=3?yt.getVersionForNumber(m):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),u=new me(i);u.setRegion(0,0,9,9),u.setRegion(i-8,0,8,9),u.setRegion(0,i-8,9,8);const m=this.alignmentPatternCenters.length;for(let y=0;y<m;y++){const b=this.alignmentPatternCenters[y]-2;for(let w=0;w<m;w++)y===0&&(w===0||w===m-1)||y===m-1&&w===0||u.setRegion(this.alignmentPatternCenters[w]-2,b,5,5)}return u.setRegion(6,9,1,i-17),u.setRegion(9,6,i-17,1),this.versionNumber>6&&(u.setRegion(i-11,0,3,6),u.setRegion(0,i-11,6,3)),u}toString(){return""+this.versionNumber}}yt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),yt.VERSIONS=[new yt(1,new Int32Array(0),new Te(7,new re(1,19)),new Te(10,new re(1,16)),new Te(13,new re(1,13)),new Te(17,new re(1,9))),new yt(2,Int32Array.from([6,18]),new Te(10,new re(1,34)),new Te(16,new re(1,28)),new Te(22,new re(1,22)),new Te(28,new re(1,16))),new yt(3,Int32Array.from([6,22]),new Te(15,new re(1,55)),new Te(26,new re(1,44)),new Te(18,new re(2,17)),new Te(22,new re(2,13))),new yt(4,Int32Array.from([6,26]),new Te(20,new re(1,80)),new Te(18,new re(2,32)),new Te(26,new re(2,24)),new Te(16,new re(4,9))),new yt(5,Int32Array.from([6,30]),new Te(26,new re(1,108)),new Te(24,new re(2,43)),new Te(18,new re(2,15),new re(2,16)),new Te(22,new re(2,11),new re(2,12))),new yt(6,Int32Array.from([6,34]),new Te(18,new re(2,68)),new Te(16,new re(4,27)),new Te(24,new re(4,19)),new Te(28,new re(4,15))),new yt(7,Int32Array.from([6,22,38]),new Te(20,new re(2,78)),new Te(18,new re(4,31)),new Te(18,new re(2,14),new re(4,15)),new Te(26,new re(4,13),new re(1,14))),new yt(8,Int32Array.from([6,24,42]),new Te(24,new re(2,97)),new Te(22,new re(2,38),new re(2,39)),new Te(22,new re(4,18),new re(2,19)),new Te(26,new re(4,14),new re(2,15))),new yt(9,Int32Array.from([6,26,46]),new Te(30,new re(2,116)),new Te(22,new re(3,36),new re(2,37)),new Te(20,new re(4,16),new re(4,17)),new Te(24,new re(4,12),new re(4,13))),new yt(10,Int32Array.from([6,28,50]),new Te(18,new re(2,68),new re(2,69)),new Te(26,new re(4,43),new re(1,44)),new Te(24,new re(6,19),new re(2,20)),new Te(28,new re(6,15),new re(2,16))),new yt(11,Int32Array.from([6,30,54]),new Te(20,new re(4,81)),new Te(30,new re(1,50),new re(4,51)),new Te(28,new re(4,22),new re(4,23)),new Te(24,new re(3,12),new re(8,13))),new yt(12,Int32Array.from([6,32,58]),new Te(24,new re(2,92),new re(2,93)),new Te(22,new re(6,36),new re(2,37)),new Te(26,new re(4,20),new re(6,21)),new Te(28,new re(7,14),new re(4,15))),new yt(13,Int32Array.from([6,34,62]),new Te(26,new re(4,107)),new Te(22,new re(8,37),new re(1,38)),new Te(24,new re(8,20),new re(4,21)),new Te(22,new re(12,11),new re(4,12))),new yt(14,Int32Array.from([6,26,46,66]),new Te(30,new re(3,115),new re(1,116)),new Te(24,new re(4,40),new re(5,41)),new Te(20,new re(11,16),new re(5,17)),new Te(24,new re(11,12),new re(5,13))),new yt(15,Int32Array.from([6,26,48,70]),new Te(22,new re(5,87),new re(1,88)),new Te(24,new re(5,41),new re(5,42)),new Te(30,new re(5,24),new re(7,25)),new Te(24,new re(11,12),new re(7,13))),new yt(16,Int32Array.from([6,26,50,74]),new Te(24,new re(5,98),new re(1,99)),new Te(28,new re(7,45),new re(3,46)),new Te(24,new re(15,19),new re(2,20)),new Te(30,new re(3,15),new re(13,16))),new yt(17,Int32Array.from([6,30,54,78]),new Te(28,new re(1,107),new re(5,108)),new Te(28,new re(10,46),new re(1,47)),new Te(28,new re(1,22),new re(15,23)),new Te(28,new re(2,14),new re(17,15))),new yt(18,Int32Array.from([6,30,56,82]),new Te(30,new re(5,120),new re(1,121)),new Te(26,new re(9,43),new re(4,44)),new Te(28,new re(17,22),new re(1,23)),new Te(28,new re(2,14),new re(19,15))),new yt(19,Int32Array.from([6,30,58,86]),new Te(28,new re(3,113),new re(4,114)),new Te(26,new re(3,44),new re(11,45)),new Te(26,new re(17,21),new re(4,22)),new Te(26,new re(9,13),new re(16,14))),new yt(20,Int32Array.from([6,34,62,90]),new Te(28,new re(3,107),new re(5,108)),new Te(26,new re(3,41),new re(13,42)),new Te(30,new re(15,24),new re(5,25)),new Te(28,new re(15,15),new re(10,16))),new yt(21,Int32Array.from([6,28,50,72,94]),new Te(28,new re(4,116),new re(4,117)),new Te(26,new re(17,42)),new Te(28,new re(17,22),new re(6,23)),new Te(30,new re(19,16),new re(6,17))),new yt(22,Int32Array.from([6,26,50,74,98]),new Te(28,new re(2,111),new re(7,112)),new Te(28,new re(17,46)),new Te(30,new re(7,24),new re(16,25)),new Te(24,new re(34,13))),new yt(23,Int32Array.from([6,30,54,78,102]),new Te(30,new re(4,121),new re(5,122)),new Te(28,new re(4,47),new re(14,48)),new Te(30,new re(11,24),new re(14,25)),new Te(30,new re(16,15),new re(14,16))),new yt(24,Int32Array.from([6,28,54,80,106]),new Te(30,new re(6,117),new re(4,118)),new Te(28,new re(6,45),new re(14,46)),new Te(30,new re(11,24),new re(16,25)),new Te(30,new re(30,16),new re(2,17))),new yt(25,Int32Array.from([6,32,58,84,110]),new Te(26,new re(8,106),new re(4,107)),new Te(28,new re(8,47),new re(13,48)),new Te(30,new re(7,24),new re(22,25)),new Te(30,new re(22,15),new re(13,16))),new yt(26,Int32Array.from([6,30,58,86,114]),new Te(28,new re(10,114),new re(2,115)),new Te(28,new re(19,46),new re(4,47)),new Te(28,new re(28,22),new re(6,23)),new Te(30,new re(33,16),new re(4,17))),new yt(27,Int32Array.from([6,34,62,90,118]),new Te(30,new re(8,122),new re(4,123)),new Te(28,new re(22,45),new re(3,46)),new Te(30,new re(8,23),new re(26,24)),new Te(30,new re(12,15),new re(28,16))),new yt(28,Int32Array.from([6,26,50,74,98,122]),new Te(30,new re(3,117),new re(10,118)),new Te(28,new re(3,45),new re(23,46)),new Te(30,new re(4,24),new re(31,25)),new Te(30,new re(11,15),new re(31,16))),new yt(29,Int32Array.from([6,30,54,78,102,126]),new Te(30,new re(7,116),new re(7,117)),new Te(28,new re(21,45),new re(7,46)),new Te(30,new re(1,23),new re(37,24)),new Te(30,new re(19,15),new re(26,16))),new yt(30,Int32Array.from([6,26,52,78,104,130]),new Te(30,new re(5,115),new re(10,116)),new Te(28,new re(19,47),new re(10,48)),new Te(30,new re(15,24),new re(25,25)),new Te(30,new re(23,15),new re(25,16))),new yt(31,Int32Array.from([6,30,56,82,108,134]),new Te(30,new re(13,115),new re(3,116)),new Te(28,new re(2,46),new re(29,47)),new Te(30,new re(42,24),new re(1,25)),new Te(30,new re(23,15),new re(28,16))),new yt(32,Int32Array.from([6,34,60,86,112,138]),new Te(30,new re(17,115)),new Te(28,new re(10,46),new re(23,47)),new Te(30,new re(10,24),new re(35,25)),new Te(30,new re(19,15),new re(35,16))),new yt(33,Int32Array.from([6,30,58,86,114,142]),new Te(30,new re(17,115),new re(1,116)),new Te(28,new re(14,46),new re(21,47)),new Te(30,new re(29,24),new re(19,25)),new Te(30,new re(11,15),new re(46,16))),new yt(34,Int32Array.from([6,34,62,90,118,146]),new Te(30,new re(13,115),new re(6,116)),new Te(28,new re(14,46),new re(23,47)),new Te(30,new re(44,24),new re(7,25)),new Te(30,new re(59,16),new re(1,17))),new yt(35,Int32Array.from([6,30,54,78,102,126,150]),new Te(30,new re(12,121),new re(7,122)),new Te(28,new re(12,47),new re(26,48)),new Te(30,new re(39,24),new re(14,25)),new Te(30,new re(22,15),new re(41,16))),new yt(36,Int32Array.from([6,24,50,76,102,128,154]),new Te(30,new re(6,121),new re(14,122)),new Te(28,new re(6,47),new re(34,48)),new Te(30,new re(46,24),new re(10,25)),new Te(30,new re(2,15),new re(64,16))),new yt(37,Int32Array.from([6,28,54,80,106,132,158]),new Te(30,new re(17,122),new re(4,123)),new Te(28,new re(29,46),new re(14,47)),new Te(30,new re(49,24),new re(10,25)),new Te(30,new re(24,15),new re(46,16))),new yt(38,Int32Array.from([6,32,58,84,110,136,162]),new Te(30,new re(4,122),new re(18,123)),new Te(28,new re(13,46),new re(32,47)),new Te(30,new re(48,24),new re(14,25)),new Te(30,new re(42,15),new re(32,16))),new yt(39,Int32Array.from([6,26,54,82,110,138,166]),new Te(30,new re(20,117),new re(4,118)),new Te(28,new re(40,47),new re(7,48)),new Te(30,new re(43,24),new re(22,25)),new Te(30,new re(10,15),new re(67,16))),new yt(40,Int32Array.from([6,30,58,86,114,142,170]),new Te(30,new re(19,118),new re(6,119)),new Te(28,new re(18,47),new re(31,48)),new Te(30,new re(34,24),new re(34,25)),new Te(30,new re(20,15),new re(61,16)))];var fa;(function(G){G[G.DATA_MASK_000=0]="DATA_MASK_000",G[G.DATA_MASK_001=1]="DATA_MASK_001",G[G.DATA_MASK_010=2]="DATA_MASK_010",G[G.DATA_MASK_011=3]="DATA_MASK_011",G[G.DATA_MASK_100=4]="DATA_MASK_100",G[G.DATA_MASK_101=5]="DATA_MASK_101",G[G.DATA_MASK_110=6]="DATA_MASK_110",G[G.DATA_MASK_111=7]="DATA_MASK_111"})(fa||(fa={}));class gn{constructor(i,u){this.value=i,this.isMasked=u}unmaskBitMatrix(i,u){for(let m=0;m<u;m++)for(let y=0;y<u;y++)this.isMasked(m,y)&&i.flip(y,m)}}gn.values=new Map([[fa.DATA_MASK_000,new gn(fa.DATA_MASK_000,(G,i)=>(G+i&1)===0)],[fa.DATA_MASK_001,new gn(fa.DATA_MASK_001,(G,i)=>(G&1)===0)],[fa.DATA_MASK_010,new gn(fa.DATA_MASK_010,(G,i)=>i%3===0)],[fa.DATA_MASK_011,new gn(fa.DATA_MASK_011,(G,i)=>(G+i)%3===0)],[fa.DATA_MASK_100,new gn(fa.DATA_MASK_100,(G,i)=>(Math.floor(G/2)+Math.floor(i/3)&1)===0)],[fa.DATA_MASK_101,new gn(fa.DATA_MASK_101,(G,i)=>G*i%6===0)],[fa.DATA_MASK_110,new gn(fa.DATA_MASK_110,(G,i)=>G*i%6<3)],[fa.DATA_MASK_111,new gn(fa.DATA_MASK_111,(G,i)=>(G+i+G*i%3&1)===0)]]);class Fi{constructor(i){const u=i.getHeight();if(u<21||(u&3)!==1)throw new L;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let b=0;b<6;b++)i=this.copyBit(b,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let b=5;b>=0;b--)i=this.copyBit(8,b,i);const u=this.bitMatrix.getHeight();let m=0;const y=u-7;for(let b=u-1;b>=y;b--)m=this.copyBit(8,b,m);for(let b=u-8;b<u;b++)m=this.copyBit(b,8,m);if(this.parsedFormatInfo=wa.decodeFormatInformation(i,m),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),u=Math.floor((i-17)/4);if(u<=6)return yt.getVersionForNumber(u);let m=0;const y=i-11;for(let w=5;w>=0;w--)for(let S=i-9;S>=y;S--)m=this.copyBit(S,w,m);let b=yt.decodeVersionInformation(m);if(b!==null&&b.getDimensionForVersion()===i)return this.parsedVersion=b,b;m=0;for(let w=5;w>=0;w--)for(let S=i-9;S>=y;S--)m=this.copyBit(w,S,m);if(b=yt.decodeVersionInformation(m),b!==null&&b.getDimensionForVersion()===i)return this.parsedVersion=b,b;throw new L}copyBit(i,u,m){return(this.isMirror?this.bitMatrix.get(u,i):this.bitMatrix.get(i,u))?m<<1|1:m<<1}readCodewords(){const i=this.readFormatInformation(),u=this.readVersion(),m=gn.values.get(i.getDataMask()),y=this.bitMatrix.getHeight();m.unmaskBitMatrix(this.bitMatrix,y);const b=u.buildFunctionPattern();let w=!0;const S=new Uint8Array(u.getTotalCodewords());let T=0,M=0,B=0;for(let X=y-1;X>0;X-=2){X===6&&X--;for(let Z=0;Z<y;Z++){const ne=w?y-1-Z:Z;for(let he=0;he<2;he++)b.get(X-he,ne)||(B++,M<<=1,this.bitMatrix.get(X-he,ne)&&(M|=1),B===8&&(S[T++]=M,B=0,M=0))}w=!w}if(T!==u.getTotalCodewords())throw new L;return S}remask(){if(this.parsedFormatInfo===null)return;const i=gn.values[this.parsedFormatInfo.getDataMask()],u=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,u)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let u=0,m=i.getWidth();u<m;u++)for(let y=u+1,b=i.getHeight();y<b;y++)i.get(u,y)!==i.get(y,u)&&(i.flip(y,u),i.flip(u,y))}}class Ad{constructor(i,u){this.numDataCodewords=i,this.codewords=u}static getDataBlocks(i,u,m){if(i.length!==u.getTotalCodewords())throw new E;const y=u.getECBlocksForLevel(m);let b=0;const w=y.getECBlocks();for(const he of w)b+=he.getCount();const S=new Array(b);let T=0;for(const he of w)for(let pe=0;pe<he.getCount();pe++){const Ae=he.getDataCodewords(),Pe=y.getECCodewordsPerBlock()+Ae;S[T++]=new Ad(Ae,new Uint8Array(Pe))}const M=S[0].codewords.length;let B=S.length-1;for(;B>=0&&S[B].codewords.length!==M;)B--;B++;const X=M-y.getECCodewordsPerBlock();let Z=0;for(let he=0;he<X;he++)for(let pe=0;pe<T;pe++)S[pe].codewords[he]=i[Z++];for(let he=B;he<T;he++)S[he].codewords[X]=i[Z++];const ne=S[0].codewords.length;for(let he=X;he<ne;he++)for(let pe=0;pe<T;pe++){const Ae=pe<B?he:he+1;S[pe].codewords[Ae]=i[Z++]}return S}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var pn;(function(G){G[G.TERMINATOR=0]="TERMINATOR",G[G.NUMERIC=1]="NUMERIC",G[G.ALPHANUMERIC=2]="ALPHANUMERIC",G[G.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",G[G.BYTE=4]="BYTE",G[G.ECI=5]="ECI",G[G.KANJI=6]="KANJI",G[G.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",G[G.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",G[G.HANZI=9]="HANZI"})(pn||(pn={}));class wt{constructor(i,u,m,y){this.value=i,this.stringValue=u,this.characterCountBitsForVersions=m,this.bits=y,wt.FOR_BITS.set(y,this),wt.FOR_VALUE.set(i,this)}static forBits(i){const u=wt.FOR_BITS.get(i);if(u===void 0)throw new E;return u}getCharacterCountBits(i){const u=i.getVersionNumber();let m;return u<=9?m=0:u<=26?m=1:m=2,this.characterCountBitsForVersions[m]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof wt))return!1;const u=i;return this.value===u.value}toString(){return this.stringValue}}wt.FOR_BITS=new Map,wt.FOR_VALUE=new Map,wt.TERMINATOR=new wt(pn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),wt.NUMERIC=new wt(pn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),wt.ALPHANUMERIC=new wt(pn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),wt.STRUCTURED_APPEND=new wt(pn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),wt.BYTE=new wt(pn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),wt.ECI=new wt(pn.ECI,"ECI",Int32Array.from([0,0,0]),7),wt.KANJI=new wt(pn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),wt.FNC1_FIRST_POSITION=new wt(pn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),wt.FNC1_SECOND_POSITION=new wt(pn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),wt.HANZI=new wt(pn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ar{static decode(i,u,m,y){const b=new $n(i);let w=new ce;const S=new Array;let T=-1,M=-1;try{let B=null,X=!1,Z;do{if(b.available()<4)Z=wt.TERMINATOR;else{const ne=b.readBits(4);Z=wt.forBits(ne)}switch(Z){case wt.TERMINATOR:break;case wt.FNC1_FIRST_POSITION:case wt.FNC1_SECOND_POSITION:X=!0;break;case wt.STRUCTURED_APPEND:if(b.available()<16)throw new L;T=b.readBits(8),M=b.readBits(8);break;case wt.ECI:const ne=Ar.parseECIValue(b);if(B=V.getCharacterSetECIByValue(ne),B===null)throw new L;break;case wt.HANZI:const he=b.readBits(4),pe=b.readBits(Z.getCharacterCountBits(u));he===Ar.GB2312_SUBSET&&Ar.decodeHanziSegment(b,w,pe);break;default:const Ae=b.readBits(Z.getCharacterCountBits(u));switch(Z){case wt.NUMERIC:Ar.decodeNumericSegment(b,w,Ae);break;case wt.ALPHANUMERIC:Ar.decodeAlphanumericSegment(b,w,Ae,X);break;case wt.BYTE:Ar.decodeByteSegment(b,w,Ae,B,S,y);break;case wt.KANJI:Ar.decodeKanjiSegment(b,w,Ae);break;default:throw new L}break}}while(Z!==wt.TERMINATOR)}catch{throw new L}return new be(i,w.toString(),S.length===0?null:S,m===null?null:m.toString(),T,M)}static decodeHanziSegment(i,u,m){if(m*13>i.available())throw new L;const y=new Uint8Array(2*m);let b=0;for(;m>0;){const w=i.readBits(13);let S=w/96<<8&4294967295|w%96;S<959?S+=41377:S+=42657,y[b]=S>>8&255,y[b+1]=S&255,b+=2,m--}try{u.append(H.decode(y,$.GB2312))}catch(w){throw new L(w)}}static decodeKanjiSegment(i,u,m){if(m*13>i.available())throw new L;const y=new Uint8Array(2*m);let b=0;for(;m>0;){const w=i.readBits(13);let S=w/192<<8&4294967295|w%192;S<7936?S+=33088:S+=49472,y[b]=S>>8,y[b+1]=S,b+=2,m--}try{u.append(H.decode(y,$.SHIFT_JIS))}catch(w){throw new L(w)}}static decodeByteSegment(i,u,m,y,b,w){if(8*m>i.available())throw new L;const S=new Uint8Array(m);for(let M=0;M<m;M++)S[M]=i.readBits(8);let T;y===null?T=$.guessEncoding(S,w):T=y.getName();try{u.append(H.decode(S,T))}catch(M){throw new L(M)}b.push(S)}static toAlphaNumericChar(i){if(i>=Ar.ALPHANUMERIC_CHARS.length)throw new L;return Ar.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,u,m,y){const b=u.length();for(;m>1;){if(i.available()<11)throw new L;const w=i.readBits(11);u.append(Ar.toAlphaNumericChar(Math.floor(w/45))),u.append(Ar.toAlphaNumericChar(w%45)),m-=2}if(m===1){if(i.available()<6)throw new L;u.append(Ar.toAlphaNumericChar(i.readBits(6)))}if(y)for(let w=b;w<u.length();w++)u.charAt(w)==="%"&&(w<u.length()-1&&u.charAt(w+1)==="%"?u.deleteCharAt(w+1):u.setCharAt(w,""))}static decodeNumericSegment(i,u,m){for(;m>=3;){if(i.available()<10)throw new L;const y=i.readBits(10);if(y>=1e3)throw new L;u.append(Ar.toAlphaNumericChar(Math.floor(y/100))),u.append(Ar.toAlphaNumericChar(Math.floor(y/10)%10)),u.append(Ar.toAlphaNumericChar(y%10)),m-=3}if(m===2){if(i.available()<7)throw new L;const y=i.readBits(7);if(y>=100)throw new L;u.append(Ar.toAlphaNumericChar(Math.floor(y/10))),u.append(Ar.toAlphaNumericChar(y%10))}else if(m===1){if(i.available()<4)throw new L;const y=i.readBits(4);if(y>=10)throw new L;u.append(Ar.toAlphaNumericChar(y))}}static parseECIValue(i){const u=i.readBits(8);if((u&128)===0)return u&127;if((u&192)===128){const m=i.readBits(8);return(u&63)<<8&4294967295|m}if((u&224)===192){const m=i.readBits(16);return(u&31)<<16&4294967295|m}throw new L}}Ar.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ar.GB2312_SUBSET=1;class Xf{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const u=i[0];i[0]=i[2],i[2]=u}}class S1{constructor(){this.rsDecoder=new qe(ve.QR_CODE_FIELD_256)}decodeBooleanArray(i,u){return this.decodeBitMatrix(me.parseFromBooleanArray(i),u)}decodeBitMatrix(i,u){const m=new Fi(i);let y=null;try{return this.decodeBitMatrixParser(m,u)}catch(b){y=b}try{m.remask(),m.setMirror(!0),m.readVersion(),m.readFormatInformation(),m.mirror();const b=this.decodeBitMatrixParser(m,u);return b.setOther(new Xf(!0)),b}catch(b){throw y!==null?y:b}}decodeBitMatrixParser(i,u){const m=i.readVersion(),y=i.readFormatInformation().getErrorCorrectionLevel(),b=i.readCodewords(),w=Ad.getDataBlocks(b,m,y);let S=0;for(const B of w)S+=B.getNumDataCodewords();const T=new Uint8Array(S);let M=0;for(const B of w){const X=B.getCodewords(),Z=B.getNumDataCodewords();this.correctErrors(X,Z);for(let ne=0;ne<Z;ne++)T[M++]=X[ne]}return Ar.decode(T,m,y,u)}correctErrors(i,u){const m=new Int32Array(i);try{this.rsDecoder.decode(m,i.length-u)}catch{throw new O}for(let y=0;y<u;y++)i[y]=m[y]}}class Ui extends We{constructor(i,u,m){super(i,u),this.estimatedModuleSize=m}aboutEquals(i,u,m){if(Math.abs(u-this.getY())<=i&&Math.abs(m-this.getX())<=i){const y=Math.abs(i-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(i,u,m){const y=(this.getX()+u)/2,b=(this.getY()+i)/2,w=(this.estimatedModuleSize+m)/2;return new Ui(y,b,w)}}class An{constructor(i,u,m,y,b,w,S){this.image=i,this.startX=u,this.startY=m,this.width=y,this.height=b,this.moduleSize=w,this.resultPointCallback=S,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,u=this.height,m=this.width,y=i+m,b=this.startY+u/2,w=new Int32Array(3),S=this.image;for(let T=0;T<u;T++){const M=b+((T&1)===0?Math.floor((T+1)/2):-Math.floor((T+1)/2));w[0]=0,w[1]=0,w[2]=0;let B=i;for(;B<y&&!S.get(B,M);)B++;let X=0;for(;B<y;){if(S.get(B,M))if(X===1)w[1]++;else if(X===2){if(this.foundPatternCross(w)){const Z=this.handlePossibleCenter(w,M,B);if(Z!==null)return Z}w[0]=w[2],w[1]=1,w[2]=0,X=1}else w[++X]++;else X===1&&X++,w[X]++;B++}if(this.foundPatternCross(w)){const Z=this.handlePossibleCenter(w,M,y);if(Z!==null)return Z}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ae}static centerFromEnd(i,u){return u-i[2]-i[1]/2}foundPatternCross(i){const u=this.moduleSize,m=u/2;for(let y=0;y<3;y++)if(Math.abs(u-i[y])>=m)return!1;return!0}crossCheckVertical(i,u,m,y){const b=this.image,w=b.getHeight(),S=this.crossCheckStateCount;S[0]=0,S[1]=0,S[2]=0;let T=i;for(;T>=0&&b.get(u,T)&&S[1]<=m;)S[1]++,T--;if(T<0||S[1]>m)return NaN;for(;T>=0&&!b.get(u,T)&&S[0]<=m;)S[0]++,T--;if(S[0]>m)return NaN;for(T=i+1;T<w&&b.get(u,T)&&S[1]<=m;)S[1]++,T++;if(T===w||S[1]>m)return NaN;for(;T<w&&!b.get(u,T)&&S[2]<=m;)S[2]++,T++;if(S[2]>m)return NaN;const M=S[0]+S[1]+S[2];return 5*Math.abs(M-y)>=2*y?NaN:this.foundPatternCross(S)?An.centerFromEnd(S,T):NaN}handlePossibleCenter(i,u,m){const y=i[0]+i[1]+i[2],b=An.centerFromEnd(i,m),w=this.crossCheckVertical(u,b,2*i[1],y);if(!isNaN(w)){const S=(i[0]+i[1]+i[2])/3;for(const M of this.possibleCenters)if(M.aboutEquals(S,w,b))return M.combineEstimate(w,b,S);const T=new Ui(b,w,S);this.possibleCenters.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return null}}class Ho extends We{constructor(i,u,m,y){super(i,u),this.estimatedModuleSize=m,this.count=y,y===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,u,m){if(Math.abs(u-this.getY())<=i&&Math.abs(m-this.getX())<=i){const y=Math.abs(i-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(i,u,m){const y=this.count+1,b=(this.count*this.getX()+u)/y,w=(this.count*this.getY()+i)/y,S=(this.count*this.estimatedModuleSize+m)/y;return new Ho(b,w,S,y)}}class Td{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ur{constructor(i,u){this.image=i,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=u}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const u=i!=null&&i.get(z.TRY_HARDER)!==void 0,m=i!=null&&i.get(z.PURE_BARCODE)!==void 0,y=this.image,b=y.getHeight(),w=y.getWidth();let S=Math.floor(3*b/(4*Ur.MAX_MODULES));(S<Ur.MIN_SKIP||u)&&(S=Ur.MIN_SKIP);let T=!1;const M=new Int32Array(5);for(let X=S-1;X<b&&!T;X+=S){M[0]=0,M[1]=0,M[2]=0,M[3]=0,M[4]=0;let Z=0;for(let ne=0;ne<w;ne++)if(y.get(ne,X))(Z&1)===1&&Z++,M[Z]++;else if((Z&1)===0)if(Z===4)if(Ur.foundPatternCross(M)){if(this.handlePossibleCenter(M,X,ne,m)===!0)if(S=2,this.hasSkipped===!0)T=this.haveMultiplyConfirmedCenters();else{const pe=this.findRowSkip();pe>M[2]&&(X+=pe-M[2]-S,ne=w-1)}else{M[0]=M[2],M[1]=M[3],M[2]=M[4],M[3]=1,M[4]=0,Z=3;continue}Z=0,M[0]=0,M[1]=0,M[2]=0,M[3]=0,M[4]=0}else M[0]=M[2],M[1]=M[3],M[2]=M[4],M[3]=1,M[4]=0,Z=3;else M[++Z]++;else M[Z]++;Ur.foundPatternCross(M)&&this.handlePossibleCenter(M,X,w,m)===!0&&(S=M[0],this.hasSkipped&&(T=this.haveMultiplyConfirmedCenters()))}const B=this.selectBestPatterns();return We.orderBestPatterns(B),new Td(B)}static centerFromEnd(i,u){return u-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let u=0;for(let b=0;b<5;b++){const w=i[b];if(w===0)return!1;u+=w}if(u<7)return!1;const m=u/7,y=m/2;return Math.abs(m-i[0])<y&&Math.abs(m-i[1])<y&&Math.abs(3*m-i[2])<3*y&&Math.abs(m-i[3])<y&&Math.abs(m-i[4])<y}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,u,m,y){const b=this.getCrossCheckStateCount();let w=0;const S=this.image;for(;i>=w&&u>=w&&S.get(u-w,i-w);)b[2]++,w++;if(i<w||u<w)return!1;for(;i>=w&&u>=w&&!S.get(u-w,i-w)&&b[1]<=m;)b[1]++,w++;if(i<w||u<w||b[1]>m)return!1;for(;i>=w&&u>=w&&S.get(u-w,i-w)&&b[0]<=m;)b[0]++,w++;if(b[0]>m)return!1;const T=S.getHeight(),M=S.getWidth();for(w=1;i+w<T&&u+w<M&&S.get(u+w,i+w);)b[2]++,w++;if(i+w>=T||u+w>=M)return!1;for(;i+w<T&&u+w<M&&!S.get(u+w,i+w)&&b[3]<m;)b[3]++,w++;if(i+w>=T||u+w>=M||b[3]>=m)return!1;for(;i+w<T&&u+w<M&&S.get(u+w,i+w)&&b[4]<m;)b[4]++,w++;if(b[4]>=m)return!1;const B=b[0]+b[1]+b[2]+b[3]+b[4];return Math.abs(B-y)<2*y&&Ur.foundPatternCross(b)}crossCheckVertical(i,u,m,y){const b=this.image,w=b.getHeight(),S=this.getCrossCheckStateCount();let T=i;for(;T>=0&&b.get(u,T);)S[2]++,T--;if(T<0)return NaN;for(;T>=0&&!b.get(u,T)&&S[1]<=m;)S[1]++,T--;if(T<0||S[1]>m)return NaN;for(;T>=0&&b.get(u,T)&&S[0]<=m;)S[0]++,T--;if(S[0]>m)return NaN;for(T=i+1;T<w&&b.get(u,T);)S[2]++,T++;if(T===w)return NaN;for(;T<w&&!b.get(u,T)&&S[3]<m;)S[3]++,T++;if(T===w||S[3]>=m)return NaN;for(;T<w&&b.get(u,T)&&S[4]<m;)S[4]++,T++;if(S[4]>=m)return NaN;const M=S[0]+S[1]+S[2]+S[3]+S[4];return 5*Math.abs(M-y)>=2*y?NaN:Ur.foundPatternCross(S)?Ur.centerFromEnd(S,T):NaN}crossCheckHorizontal(i,u,m,y){const b=this.image,w=b.getWidth(),S=this.getCrossCheckStateCount();let T=i;for(;T>=0&&b.get(T,u);)S[2]++,T--;if(T<0)return NaN;for(;T>=0&&!b.get(T,u)&&S[1]<=m;)S[1]++,T--;if(T<0||S[1]>m)return NaN;for(;T>=0&&b.get(T,u)&&S[0]<=m;)S[0]++,T--;if(S[0]>m)return NaN;for(T=i+1;T<w&&b.get(T,u);)S[2]++,T++;if(T===w)return NaN;for(;T<w&&!b.get(T,u)&&S[3]<m;)S[3]++,T++;if(T===w||S[3]>=m)return NaN;for(;T<w&&b.get(T,u)&&S[4]<m;)S[4]++,T++;if(S[4]>=m)return NaN;const M=S[0]+S[1]+S[2]+S[3]+S[4];return 5*Math.abs(M-y)>=y?NaN:Ur.foundPatternCross(S)?Ur.centerFromEnd(S,T):NaN}handlePossibleCenter(i,u,m,y){const b=i[0]+i[1]+i[2]+i[3]+i[4];let w=Ur.centerFromEnd(i,m),S=this.crossCheckVertical(u,Math.floor(w),i[2],b);if(!isNaN(S)&&(w=this.crossCheckHorizontal(Math.floor(w),Math.floor(S),i[2],b),!isNaN(w)&&(!y||this.crossCheckDiagonal(Math.floor(S),Math.floor(w),i[2],b)))){const T=b/7;let M=!1;const B=this.possibleCenters;for(let X=0,Z=B.length;X<Z;X++){const ne=B[X];if(ne.aboutEquals(T,S,w)){B[X]=ne.combineEstimate(S,w,T),M=!0;break}}if(!M){const X=new Ho(w,S,T);B.push(X),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(X)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let u=null;for(const m of this.possibleCenters)if(m.getCount()>=Ur.CENTER_QUORUM)if(u==null)u=m;else return this.hasSkipped=!0,Math.floor((Math.abs(u.getX()-m.getX())-Math.abs(u.getY()-m.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,u=0;const m=this.possibleCenters.length;for(const w of this.possibleCenters)w.getCount()>=Ur.CENTER_QUORUM&&(i++,u+=w.getEstimatedModuleSize());if(i<3)return!1;const y=u/m;let b=0;for(const w of this.possibleCenters)b+=Math.abs(w.getEstimatedModuleSize()-y);return b<=.05*u}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new ae;const u=this.possibleCenters;let m;if(i>3){let y=0,b=0;for(const T of this.possibleCenters){const M=T.getEstimatedModuleSize();y+=M,b+=M*M}m=y/i;let w=Math.sqrt(b/i-m*m);u.sort((T,M)=>{const B=Math.abs(M.getEstimatedModuleSize()-m),X=Math.abs(T.getEstimatedModuleSize()-m);return B<X?-1:B>X?1:0});const S=Math.max(.2*m,w);for(let T=0;T<u.length&&u.length>3;T++){const M=u[T];Math.abs(M.getEstimatedModuleSize()-m)>S&&(u.splice(T,1),T--)}}if(u.length>3){let y=0;for(const b of u)y+=b.getEstimatedModuleSize();m=y/u.length,u.sort((b,w)=>{if(w.getCount()===b.getCount()){const S=Math.abs(w.getEstimatedModuleSize()-m),T=Math.abs(b.getEstimatedModuleSize()-m);return S<T?1:S>T?-1:0}else return w.getCount()-b.getCount()}),u.splice(3)}return[u[0],u[1],u[2]]}}Ur.CENTER_QUORUM=2,Ur.MIN_SKIP=3,Ur.MAX_MODULES=57;class ms{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(z.NEED_RESULT_POINT_CALLBACK);const m=new Ur(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(m)}processFinderPatternInfo(i){const u=i.getTopLeft(),m=i.getTopRight(),y=i.getBottomLeft(),b=this.calculateModuleSize(u,m,y);if(b<1)throw new ae("No pattern found in proccess finder.");const w=ms.computeDimension(u,m,y,b),S=yt.getProvisionalVersionForDimension(w),T=S.getDimensionForVersion()-7;let M=null;if(S.getAlignmentPatternCenters().length>0){const ne=m.getX()-u.getX()+y.getX(),he=m.getY()-u.getY()+y.getY(),pe=1-3/T,Ae=Math.floor(u.getX()+pe*(ne-u.getX())),Pe=Math.floor(u.getY()+pe*(he-u.getY()));for(let rt=4;rt<=16;rt<<=1)try{M=this.findAlignmentInRegion(b,Ae,Pe,rt);break}catch(et){if(!(et instanceof ae))throw et}}const B=ms.createTransform(u,m,y,M,w),X=ms.sampleGrid(this.image,B,w);let Z;return M===null?Z=[y,u,m]:Z=[y,u,m,M],new lt(X,Z)}static createTransform(i,u,m,y,b){const w=b-3.5;let S,T,M,B;return y!==null?(S=y.getX(),T=y.getY(),M=w-3,B=M):(S=u.getX()-i.getX()+m.getX(),T=u.getY()-i.getY()+m.getY(),M=w,B=w),er.quadrilateralToQuadrilateral(3.5,3.5,w,3.5,M,B,3.5,w,i.getX(),i.getY(),u.getX(),u.getY(),S,T,m.getX(),m.getY())}static sampleGrid(i,u,m){return ut.getInstance().sampleGridWithTransform(i,m,m,u)}static computeDimension(i,u,m,y){const b=it.round(We.distance(i,u)/y),w=it.round(We.distance(i,m)/y);let S=Math.floor((b+w)/2)+7;switch(S&3){case 0:S++;break;case 2:S--;break;case 3:throw new ae("Dimensions could be not found.")}return S}calculateModuleSize(i,u,m){return(this.calculateModuleSizeOneWay(i,u)+this.calculateModuleSizeOneWay(i,m))/2}calculateModuleSizeOneWay(i,u){const m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(u.getX()),Math.floor(u.getY())),y=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(u.getX()),Math.floor(u.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(m)?y/7:isNaN(y)?m/7:(m+y)/14}sizeOfBlackWhiteBlackRunBothWays(i,u,m,y){let b=this.sizeOfBlackWhiteBlackRun(i,u,m,y),w=1,S=i-(m-i);S<0?(w=i/(i-S),S=0):S>=this.image.getWidth()&&(w=(this.image.getWidth()-1-i)/(S-i),S=this.image.getWidth()-1);let T=Math.floor(u-(y-u)*w);return w=1,T<0?(w=u/(u-T),T=0):T>=this.image.getHeight()&&(w=(this.image.getHeight()-1-u)/(T-u),T=this.image.getHeight()-1),S=Math.floor(i+(S-i)*w),b+=this.sizeOfBlackWhiteBlackRun(i,u,S,T),b-1}sizeOfBlackWhiteBlackRun(i,u,m,y){const b=Math.abs(y-u)>Math.abs(m-i);if(b){let ne=i;i=u,u=ne,ne=m,m=y,y=ne}const w=Math.abs(m-i),S=Math.abs(y-u);let T=-w/2;const M=i<m?1:-1,B=u<y?1:-1;let X=0;const Z=m+M;for(let ne=i,he=u;ne!==Z;ne+=M){const pe=b?he:ne,Ae=b?ne:he;if(X===1===this.image.get(pe,Ae)){if(X===2)return it.distance(ne,he,i,u);X++}if(T+=S,T>0){if(he===y)break;he+=B,T-=w}}return X===2?it.distance(m+M,y,i,u):NaN}findAlignmentInRegion(i,u,m,y){const b=Math.floor(y*i),w=Math.max(0,u-b),S=Math.min(this.image.getWidth()-1,u+b);if(S-w<i*3)throw new ae("Alignment top exceeds estimated module size.");const T=Math.max(0,m-b),M=Math.min(this.image.getHeight()-1,m+b);if(M-T<i*3)throw new ae("Alignment bottom exceeds estimated module size.");return new An(this.image,w,T,S-w,M-T,i,this.resultPointCallback).find()}}class $s{constructor(){this.decoder=new S1}getDecoder(){return this.decoder}decode(i,u){let m,y;if(u!=null&&u.get(z.PURE_BARCODE)!==void 0){const T=$s.extractPureBits(i.getBlackMatrix());m=this.decoder.decodeBitMatrix(T,u),y=$s.NO_POINTS}else{const T=new ms(i.getBlackMatrix()).detect(u);m=this.decoder.decodeBitMatrix(T.getBits(),u),y=T.getPoints()}m.getOther()instanceof Xf&&m.getOther().applyMirroredCorrection(y);const b=new le(m.getText(),m.getRawBytes(),void 0,y,ie.QR_CODE,void 0),w=m.getByteSegments();w!==null&&b.putMetadata($e.BYTE_SEGMENTS,w);const S=m.getECLevel();return S!==null&&b.putMetadata($e.ERROR_CORRECTION_LEVEL,S),m.hasStructuredAppend()&&(b.putMetadata($e.STRUCTURED_APPEND_SEQUENCE,m.getStructuredAppendSequenceNumber()),b.putMetadata($e.STRUCTURED_APPEND_PARITY,m.getStructuredAppendParity())),b}reset(){}static extractPureBits(i){const u=i.getTopLeftOnBit(),m=i.getBottomRightOnBit();if(u===null||m===null)throw new ae;const y=this.moduleSize(u,i);let b=u[1],w=m[1],S=u[0],T=m[0];if(S>=T||b>=w)throw new ae;if(w-b!==T-S&&(T=S+(w-b),T>=i.getWidth()))throw new ae;const M=Math.round((T-S+1)/y),B=Math.round((w-b+1)/y);if(M<=0||B<=0)throw new ae;if(B!==M)throw new ae;const X=Math.floor(y/2);b+=X,S+=X;const Z=S+Math.floor((M-1)*y)-T;if(Z>0){if(Z>X)throw new ae;S-=Z}const ne=b+Math.floor((B-1)*y)-w;if(ne>0){if(ne>X)throw new ae;b-=ne}const he=new me(M,B);for(let pe=0;pe<B;pe++){const Ae=b+Math.floor(pe*y);for(let Pe=0;Pe<M;Pe++)i.get(S+Math.floor(Pe*y),Ae)&&he.set(Pe,pe)}return he}static moduleSize(i,u){const m=u.getHeight(),y=u.getWidth();let b=i[0],w=i[1],S=!0,T=0;for(;b<y&&w<m;){if(S!==u.get(b,w)){if(++T===5)break;S=!S}b++,w++}if(b===y||w===m)throw new ae;return(b-i[0])/7}}$s.NO_POINTS=new Array;class St{PDF417Common(){}static getBitCountSum(i){return it.sum(i)}static toIntArray(i){if(i==null||!i.length)return St.EMPTY_INT_ARRAY;const u=new Int32Array(i.length);let m=0;for(const y of i)u[m++]=y;return u}static getCodeword(i){const u=F.binarySearch(St.SYMBOL_TABLE,i&262143);return u<0?-1:(St.CODEWORD_TABLE[u]-1)%St.NUMBER_OF_CODEWORDS}}St.NUMBER_OF_CODEWORDS=929,St.MAX_CODEWORDS_IN_BARCODE=St.NUMBER_OF_CODEWORDS-1,St.MIN_ROWS_IN_BARCODE=3,St.MAX_ROWS_IN_BARCODE=90,St.MODULES_IN_CODEWORD=17,St.MODULES_IN_STOP_PATTERN=18,St.BARS_IN_MODULE=8,St.EMPTY_INT_ARRAY=new Int32Array([]),St.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),St.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Wf{constructor(i,u){this.bits=i,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class Dt{static detectMultiple(i,u,m){let y=i.getBlackMatrix(),b=Dt.detect(m,y);return b.length||(y=y.clone(),y.rotate180(),b=Dt.detect(m,y)),new Wf(y,b)}static detect(i,u){const m=new Array;let y=0,b=0,w=!1;for(;y<u.getHeight();){const S=Dt.findVertices(u,y,b);if(S[0]==null&&S[3]==null){if(!w)break;w=!1,b=0;for(const T of m)T[1]!=null&&(y=Math.trunc(Math.max(y,T[1].getY()))),T[3]!=null&&(y=Math.max(y,Math.trunc(T[3].getY())));y+=Dt.ROW_STEP;continue}if(w=!0,m.push(S),!i)break;S[2]!=null?(b=Math.trunc(S[2].getX()),y=Math.trunc(S[2].getY())):(b=Math.trunc(S[4].getX()),y=Math.trunc(S[4].getY()))}return m}static findVertices(i,u,m){const y=i.getHeight(),b=i.getWidth(),w=new Array(8);return Dt.copyToResult(w,Dt.findRowsWithPattern(i,y,b,u,m,Dt.START_PATTERN),Dt.INDEXES_START_PATTERN),w[4]!=null&&(m=Math.trunc(w[4].getX()),u=Math.trunc(w[4].getY())),Dt.copyToResult(w,Dt.findRowsWithPattern(i,y,b,u,m,Dt.STOP_PATTERN),Dt.INDEXES_STOP_PATTERN),w}static copyToResult(i,u,m){for(let y=0;y<m.length;y++)i[m[y]]=u[y]}static findRowsWithPattern(i,u,m,y,b,w){const S=new Array(4);let T=!1;const M=new Int32Array(w.length);for(;y<u;y+=Dt.ROW_STEP){let X=Dt.findGuardPattern(i,b,y,m,!1,w,M);if(X!=null){for(;y>0;){const Z=Dt.findGuardPattern(i,b,--y,m,!1,w,M);if(Z!=null)X=Z;else{y++;break}}S[0]=new We(X[0],y),S[1]=new We(X[1],y),T=!0;break}}let B=y+1;if(T){let X=0,Z=Int32Array.from([Math.trunc(S[0].getX()),Math.trunc(S[1].getX())]);for(;B<u;B++){const ne=Dt.findGuardPattern(i,Z[0],B,m,!1,w,M);if(ne!=null&&Math.abs(Z[0]-ne[0])<Dt.MAX_PATTERN_DRIFT&&Math.abs(Z[1]-ne[1])<Dt.MAX_PATTERN_DRIFT)Z=ne,X=0;else{if(X>Dt.SKIPPED_ROW_COUNT_MAX)break;X++}}B-=X+1,S[2]=new We(Z[0],B),S[3]=new We(Z[1],B)}return B-y<Dt.BARCODE_MIN_HEIGHT&&F.fill(S,null),S}static findGuardPattern(i,u,m,y,b,w,S){F.fillWithin(S,0,S.length,0);let T=u,M=0;for(;i.get(T,m)&&T>0&&M++<Dt.MAX_PIXEL_DRIFT;)T--;let B=T,X=0,Z=w.length;for(let ne=b;B<y;B++)if(i.get(B,m)!==ne)S[X]++;else{if(X===Z-1){if(Dt.patternMatchVariance(S,w,Dt.MAX_INDIVIDUAL_VARIANCE)<Dt.MAX_AVG_VARIANCE)return new Int32Array([T,B]);T+=S[0]+S[1],P.arraycopy(S,2,S,0,X-1),S[X-1]=0,S[X]=0,X--}else X++;S[X]=1,ne=!ne}return X===Z-1&&Dt.patternMatchVariance(S,w,Dt.MAX_INDIVIDUAL_VARIANCE)<Dt.MAX_AVG_VARIANCE?new Int32Array([T,B-1]):null}static patternMatchVariance(i,u,m){let y=i.length,b=0,w=0;for(let M=0;M<y;M++)b+=i[M],w+=u[M];if(b<w)return 1/0;let S=b/w;m*=S;let T=0;for(let M=0;M<y;M++){let B=i[M],X=u[M]*S,Z=B>X?B-X:X-B;if(Z>m)return 1/0;T+=Z}return T/b}}Dt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Dt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Dt.MAX_AVG_VARIANCE=.42,Dt.MAX_INDIVIDUAL_VARIANCE=.8,Dt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Dt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Dt.MAX_PIXEL_DRIFT=3,Dt.MAX_PATTERN_DRIFT=5,Dt.SKIPPED_ROW_COUNT_MAX=25,Dt.ROW_STEP=5,Dt.BARCODE_MIN_HEIGHT=10;class Tr{constructor(i,u){if(u.length===0)throw new E;this.field=i;let m=u.length;if(m>1&&u[0]===0){let y=1;for(;y<m&&u[y]===0;)y++;y===m?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(m-y),P.arraycopy(u,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let y=0;for(let b of this.coefficients)y=this.field.add(y,b);return y}let u=this.coefficients[0],m=this.coefficients.length;for(let y=1;y<m;y++)u=this.field.add(this.field.multiply(i,u),this.coefficients[y]);return u}add(i){if(!this.field.equals(i.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let u=this.coefficients,m=i.coefficients;if(u.length>m.length){let w=u;u=m,m=w}let y=new Int32Array(m.length),b=m.length-u.length;P.arraycopy(m,0,y,0,b);for(let w=b;w<m.length;w++)y[w]=this.field.add(u[w-b],m[w]);return new Tr(this.field,y)}subtract(i){if(!this.field.equals(i.field))throw new E("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof Tr?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new Tr(this.field,new Int32Array([0]));let u=this.coefficients,m=u.length,y=i.coefficients,b=y.length,w=new Int32Array(m+b-1);for(let S=0;S<m;S++){let T=u[S];for(let M=0;M<b;M++)w[S+M]=this.field.add(w[S+M],this.field.multiply(T,y[M]))}return new Tr(this.field,w)}negative(){let i=this.coefficients.length,u=new Int32Array(i);for(let m=0;m<i;m++)u[m]=this.field.subtract(0,this.coefficients[m]);return new Tr(this.field,u)}multiplyScalar(i){if(i===0)return new Tr(this.field,new Int32Array([0]));if(i===1)return this;let u=this.coefficients.length,m=new Int32Array(u);for(let y=0;y<u;y++)m[y]=this.field.multiply(this.coefficients[y],i);return new Tr(this.field,m)}multiplyByMonomial(i,u){if(i<0)throw new E;if(u===0)return new Tr(this.field,new Int32Array([0]));let m=this.coefficients.length,y=new Int32Array(m+i);for(let b=0;b<m;b++)y[b]=this.field.multiply(this.coefficients[b],u);return new Tr(this.field,y)}toString(){let i=new ce;for(let u=this.getDegree();u>=0;u--){let m=this.getCoefficient(u);m!==0&&(m<0?(i.append(" - "),m=-m):i.length()>0&&i.append(" + "),(u===0||m!==1)&&i.append(m),u!==0&&(u===1?i.append("x"):(i.append("x^"),i.append(u))))}return i.toString()}}class Od{add(i,u){return(i+u)%this.modulus}subtract(i,u){return(this.modulus+i-u)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new E;return this.logTable[i]}inverse(i){if(i===0)throw new Le;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,u){return i===0||u===0?0:this.expTable[(this.logTable[i]+this.logTable[u])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class Ul extends Od{constructor(i,u){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let m=1;for(let y=0;y<i;y++)this.expTable[y]=m,m=m*u%i;for(let y=0;y<i-1;y++)this.logTable[this.expTable[y]]=y;this.zero=new Tr(this,new Int32Array([0])),this.one=new Tr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,u){if(i<0)throw new E;if(u===0)return this.zero;let m=new Int32Array(i+1);return m[0]=u,new Tr(this,m)}}Ul.PDF417_GF=new Ul(St.NUMBER_OF_CODEWORDS,3);class qs{constructor(){this.field=Ul.PDF417_GF}decode(i,u,m){let y=new Tr(this.field,i),b=new Int32Array(u),w=!1;for(let he=u;he>0;he--){let pe=y.evaluateAt(this.field.exp(he));b[u-he]=pe,pe!==0&&(w=!0)}if(!w)return 0;let S=this.field.getOne();if(m!=null)for(const he of m){let pe=this.field.exp(i.length-1-he),Ae=new Tr(this.field,new Int32Array([this.field.subtract(0,pe),1]));S=S.multiply(Ae)}let T=new Tr(this.field,b),M=this.runEuclideanAlgorithm(this.field.buildMonomial(u,1),T,u),B=M[0],X=M[1],Z=this.findErrorLocations(B),ne=this.findErrorMagnitudes(X,B,Z);for(let he=0;he<Z.length;he++){let pe=i.length-1-this.field.log(Z[he]);if(pe<0)throw O.getChecksumInstance();i[pe]=this.field.subtract(i[pe],ne[he])}return Z.length}runEuclideanAlgorithm(i,u,m){if(i.getDegree()<u.getDegree()){let Z=i;i=u,u=Z}let y=i,b=u,w=this.field.getZero(),S=this.field.getOne();for(;b.getDegree()>=Math.round(m/2);){let Z=y,ne=w;if(y=b,w=S,y.isZero())throw O.getChecksumInstance();b=Z;let he=this.field.getZero(),pe=y.getCoefficient(y.getDegree()),Ae=this.field.inverse(pe);for(;b.getDegree()>=y.getDegree()&&!b.isZero();){let Pe=b.getDegree()-y.getDegree(),rt=this.field.multiply(b.getCoefficient(b.getDegree()),Ae);he=he.add(this.field.buildMonomial(Pe,rt)),b=b.subtract(y.multiplyByMonomial(Pe,rt))}S=he.multiply(w).subtract(ne).negative()}let T=S.getCoefficient(0);if(T===0)throw O.getChecksumInstance();let M=this.field.inverse(T),B=S.multiply(M),X=b.multiply(M);return[B,X]}findErrorLocations(i){let u=i.getDegree(),m=new Int32Array(u),y=0;for(let b=1;b<this.field.getSize()&&y<u;b++)i.evaluateAt(b)===0&&(m[y]=this.field.inverse(b),y++);if(y!==u)throw O.getChecksumInstance();return m}findErrorMagnitudes(i,u,m){let y=u.getDegree(),b=new Int32Array(y);for(let M=1;M<=y;M++)b[y-M]=this.field.multiply(M,u.getCoefficient(M));let w=new Tr(this.field,b),S=m.length,T=new Int32Array(S);for(let M=0;M<S;M++){let B=this.field.inverse(m[M]),X=this.field.subtract(0,i.evaluateAt(B)),Z=this.field.inverse(w.evaluateAt(B));T[M]=this.field.multiply(X,Z)}return T}}class Gs{constructor(i,u,m,y,b){i instanceof Gs?this.constructor_2(i):this.constructor_1(i,u,m,y,b)}constructor_1(i,u,m,y,b){const w=u==null||m==null,S=y==null||b==null;if(w&&S)throw new ae;w?(u=new We(0,y.getY()),m=new We(0,b.getY())):S&&(y=new We(i.getWidth()-1,u.getY()),b=new We(i.getWidth()-1,m.getY())),this.image=i,this.topLeft=u,this.bottomLeft=m,this.topRight=y,this.bottomRight=b,this.minX=Math.trunc(Math.min(u.getX(),m.getX())),this.maxX=Math.trunc(Math.max(y.getX(),b.getX())),this.minY=Math.trunc(Math.min(u.getY(),y.getY())),this.maxY=Math.trunc(Math.max(m.getY(),b.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,u){return i==null?u:u==null?i:new Gs(i.image,i.topLeft,i.bottomLeft,u.topRight,u.bottomRight)}addMissingRows(i,u,m){let y=this.topLeft,b=this.bottomLeft,w=this.topRight,S=this.bottomRight;if(i>0){let T=m?this.topLeft:this.topRight,M=Math.trunc(T.getY()-i);M<0&&(M=0);let B=new We(T.getX(),M);m?y=B:w=B}if(u>0){let T=m?this.bottomLeft:this.bottomRight,M=Math.trunc(T.getY()+u);M>=this.image.getHeight()&&(M=this.image.getHeight()-1);let B=new We(T.getX(),M);m?b=B:S=B}return new Gs(this.image,y,b,w,S)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class qc{constructor(i,u,m,y){this.columnCount=i,this.errorCorrectionLevel=y,this.rowCountUpperPart=u,this.rowCountLowerPart=m,this.rowCount=u+m}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ji{constructor(){this.buffer=""}static form(i,u){let m=-1;function y(w,S,T,M,B,X){if(w==="%%")return"%";if(u[++m]===void 0)return;w=M?parseInt(M.substr(1)):void 0;let Z=B?parseInt(B.substr(1)):void 0,ne;switch(X){case"s":ne=u[m];break;case"c":ne=u[m][0];break;case"f":ne=parseFloat(u[m]).toFixed(w);break;case"p":ne=parseFloat(u[m]).toPrecision(w);break;case"e":ne=parseFloat(u[m]).toExponential(w);break;case"x":ne=parseInt(u[m]).toString(Z||16);break;case"d":ne=parseFloat(parseInt(u[m],Z||10).toPrecision(w)).toFixed(0);break}ne=typeof ne=="object"?JSON.stringify(ne):(+ne).toString(Z);let he=parseInt(T),pe=T&&T[0]+""=="0"?"0":" ";for(;ne.length<he;)ne=S!==void 0?ne+pe:pe+ne;return ne}let b=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(b,y)}format(i,...u){this.buffer+=ji.form(i,u)}toString(){return this.buffer}}class gl{constructor(i){this.boundingBox=new Gs(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let u=this.getCodeword(i);if(u!=null)return u;for(let m=1;m<gl.MAX_NEARBY_DISTANCE;m++){let y=this.imageRowToCodewordIndex(i)-m;if(y>=0&&(u=this.codewords[y],u!=null)||(y=this.imageRowToCodewordIndex(i)+m,y<this.codewords.length&&(u=this.codewords[y],u!=null)))return u}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,u){this.codewords[this.imageRowToCodewordIndex(i)]=u}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new ji;let u=0;for(const m of this.codewords){if(m==null){i.format("%3d:    |   %n",u++);continue}i.format("%3d: %3d|%3d%n",u++,m.getRowNumber(),m.getValue())}return i.toString()}}gl.MAX_NEARBY_DISTANCE=5;class pl{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let u=this.values.get(i);u==null&&(u=0),u++,this.values.set(i,u)}getValue(){let i=-1,u=new Array;for(const[m,y]of this.values.entries()){const b={getKey:()=>m,getValue:()=>y};b.getValue()>i?(i=b.getValue(),u=[],u.push(b.getKey())):b.getValue()===i&&u.push(b.getKey())}return St.toIntArray(u)}getConfidence(i){return this.values.get(i)}}class _d extends gl{constructor(i,u){super(i),this._isLeft=u}setRowNumbers(){for(let i of this.getCodewords())i?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let u=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(u,i);let m=this.getBoundingBox(),y=this._isLeft?m.getTopLeft():m.getTopRight(),b=this._isLeft?m.getBottomLeft():m.getBottomRight(),w=this.imageRowToCodewordIndex(Math.trunc(y.getY())),S=this.imageRowToCodewordIndex(Math.trunc(b.getY())),T=-1,M=1,B=0;for(let X=w;X<S;X++){if(u[X]==null)continue;let Z=u[X],ne=Z.getRowNumber()-T;if(ne===0)B++;else if(ne===1)M=Math.max(M,B),B=1,T=Z.getRowNumber();else if(ne<0||Z.getRowNumber()>=i.getRowCount()||ne>X)u[X]=null;else{let he;M>2?he=(M-2)*ne:he=ne;let pe=he>=X;for(let Ae=1;Ae<=he&&!pe;Ae++)pe=u[X-Ae]!=null;pe?u[X]=null:(T=Z.getRowNumber(),B=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let u=new Int32Array(i.getRowCount());for(let m of this.getCodewords())if(m!=null){let y=m.getRowNumber();if(y>=u.length)continue;u[y]++}return u}adjustIncompleteIndicatorColumnRowNumbers(i){let u=this.getBoundingBox(),m=this._isLeft?u.getTopLeft():u.getTopRight(),y=this._isLeft?u.getBottomLeft():u.getBottomRight(),b=this.imageRowToCodewordIndex(Math.trunc(m.getY())),w=this.imageRowToCodewordIndex(Math.trunc(y.getY())),S=this.getCodewords(),T=-1;for(let M=b;M<w;M++){if(S[M]==null)continue;let B=S[M];B.setRowNumberAsRowIndicatorColumn();let X=B.getRowNumber()-T;X===0||(X===1?T=B.getRowNumber():B.getRowNumber()>=i.getRowCount()?S[M]=null:T=B.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),u=new pl,m=new pl,y=new pl,b=new pl;for(let S of i){if(S==null)continue;S.setRowNumberAsRowIndicatorColumn();let T=S.getValue()%30,M=S.getRowNumber();switch(this._isLeft||(M+=2),M%3){case 0:m.setValue(T*3+1);break;case 1:b.setValue(T/3),y.setValue(T%3);break;case 2:u.setValue(T+1);break}}if(u.getValue().length===0||m.getValue().length===0||y.getValue().length===0||b.getValue().length===0||u.getValue()[0]<1||m.getValue()[0]+y.getValue()[0]<St.MIN_ROWS_IN_BARCODE||m.getValue()[0]+y.getValue()[0]>St.MAX_ROWS_IN_BARCODE)return null;let w=new qc(u.getValue()[0],m.getValue()[0],y.getValue()[0],b.getValue()[0]);return this.removeIncorrectCodewords(i,w),w}removeIncorrectCodewords(i,u){for(let m=0;m<i.length;m++){let y=i[m];if(i[m]==null)continue;let b=y.getValue()%30,w=y.getRowNumber();if(w>u.getRowCount()){i[m]=null;continue}switch(this._isLeft||(w+=2),w%3){case 0:b*3+1!==u.getRowCountUpperPart()&&(i[m]=null);break;case 1:(Math.trunc(b/3)!==u.getErrorCorrectionLevel()||b%3!==u.getRowCountLowerPart())&&(i[m]=null);break;case 2:b+1!==u.getColumnCount()&&(i[m]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Na{constructor(i,u){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=u,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=St.MAX_CODEWORDS_IN_BARCODE,u;do u=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<u);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let u=1;u<this.barcodeColumnCount+1;u++){let m=this.detectionResultColumns[u].getCodewords();for(let y=0;y<m.length;y++)m[y]!=null&&(m[y].hasValidRowNumber()||this.adjustRowNumbers(u,y,m))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<i.length;m++)if(i[m]!=null&&u[m]!=null&&i[m].getRowNumber()===u[m].getRowNumber())for(let y=1;y<=this.barcodeColumnCount;y++){let b=this.detectionResultColumns[y].getCodewords()[m];b!=null&&(b.setRowNumber(i[m].getRowNumber()),b.hasValidRowNumber()||(this.detectionResultColumns[y].getCodewords()[m]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<u.length;m++){if(u[m]==null)continue;let y=u[m].getRowNumber(),b=0;for(let w=this.barcodeColumnCount+1;w>0&&b<this.ADJUST_ROW_NUMBER_SKIP;w--){let S=this.detectionResultColumns[w].getCodewords()[m];S!=null&&(b=Na.adjustRowNumberIfValid(y,b,S),S.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,u=this.detectionResultColumns[0].getCodewords();for(let m=0;m<u.length;m++){if(u[m]==null)continue;let y=u[m].getRowNumber(),b=0;for(let w=1;w<this.barcodeColumnCount+1&&b<this.ADJUST_ROW_NUMBER_SKIP;w++){let S=this.detectionResultColumns[w].getCodewords()[m];S!=null&&(b=Na.adjustRowNumberIfValid(y,b,S),S.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,u,m){return m==null||m.hasValidRowNumber()||(m.isValidRowNumber(i)?(m.setRowNumber(i),u=0):++u),u}adjustRowNumbers(i,u,m){if(!this.detectionResultColumns[i-1])return;let y=m[u],b=this.detectionResultColumns[i-1].getCodewords(),w=b;this.detectionResultColumns[i+1]!=null&&(w=this.detectionResultColumns[i+1].getCodewords());let S=new Array(14);S[2]=b[u],S[3]=w[u],u>0&&(S[0]=m[u-1],S[4]=b[u-1],S[5]=w[u-1]),u>1&&(S[8]=m[u-2],S[10]=b[u-2],S[11]=w[u-2]),u<m.length-1&&(S[1]=m[u+1],S[6]=b[u+1],S[7]=w[u+1]),u<m.length-2&&(S[9]=m[u+2],S[12]=b[u+2],S[13]=w[u+2]);for(let T of S)if(Na.adjustRowNumber(y,T))return}static adjustRowNumber(i,u){return u==null?!1:u.hasValidRowNumber()&&u.getBucket()===i.getBucket()?(i.setRowNumber(u.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,u){this.detectionResultColumns[i]=u}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let u=new ji;for(let m=0;m<i.getCodewords().length;m++){u.format("CW %3d:",m);for(let y=0;y<this.barcodeColumnCount+2;y++){if(this.detectionResultColumns[y]==null){u.format("    |   ");continue}let b=this.detectionResultColumns[y].getCodewords()[m];if(b==null){u.format("    |   ");continue}u.format(" %3d|%3d",b.getRowNumber(),b.getValue())}u.format("%n")}return u.toString()}}class qn{constructor(i,u,m,y){this.rowNumber=qn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(u),this.bucket=Math.trunc(m),this.value=Math.trunc(y)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==qn.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}qn.BARCODE_ROW_UNKNOWN=-1;class Ra{static initialize(){for(let i=0;i<St.SYMBOL_TABLE.length;i++){let u=St.SYMBOL_TABLE[i],m=u&1;for(let y=0;y<St.BARS_IN_MODULE;y++){let b=0;for(;(u&1)===m;)b+=1,u>>=1;m=u&1,Ra.RATIOS_TABLE[i]||(Ra.RATIOS_TABLE[i]=new Array(St.BARS_IN_MODULE)),Ra.RATIOS_TABLE[i][St.BARS_IN_MODULE-y-1]=Math.fround(b/St.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let u=Ra.getDecodedCodewordValue(Ra.sampleBitCounts(i));return u!==-1?u:Ra.getClosestDecodedValue(i)}static sampleBitCounts(i){let u=it.sum(i),m=new Int32Array(St.BARS_IN_MODULE),y=0,b=0;for(let w=0;w<St.MODULES_IN_CODEWORD;w++){let S=u/(2*St.MODULES_IN_CODEWORD)+w*u/St.MODULES_IN_CODEWORD;b+i[y]<=S&&(b+=i[y],y++),m[y]++}return m}static getDecodedCodewordValue(i){let u=Ra.getBitValue(i);return St.getCodeword(u)===-1?-1:u}static getBitValue(i){let u=0;for(let m=0;m<i.length;m++)for(let y=0;y<i[m];y++)u=u<<1|(m%2===0?1:0);return Math.trunc(u)}static getClosestDecodedValue(i){let u=it.sum(i),m=new Array(St.BARS_IN_MODULE);if(u>1)for(let w=0;w<m.length;w++)m[w]=Math.fround(i[w]/u);let y=pt.MAX_VALUE,b=-1;this.bSymbolTableReady||Ra.initialize();for(let w=0;w<Ra.RATIOS_TABLE.length;w++){let S=0,T=Ra.RATIOS_TABLE[w];for(let M=0;M<St.BARS_IN_MODULE;M++){let B=Math.fround(T[M]-m[M]);if(S+=Math.fround(B*B),S>=y)break}S<y&&(y=S,b=St.SYMBOL_TABLE[w])}return b}}Ra.bSymbolTableReady=!1,Ra.RATIOS_TABLE=new Array(St.SYMBOL_TABLE.length).map(G=>new Array(St.BARS_IN_MODULE));class zi{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Kf{static parseLong(i,u=void 0){return parseInt(i,u)}}class Gc extends p{}Gc.kind="NullPointerException";class Dd{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,u,m){if(i==null)throw new Gc;if(u<0||u>i.length||m<0||u+m>i.length||u+m<0)throw new k;if(m===0)return;for(let y=0;y<m;y++)this.write(i[u+y])}flush(){}close(){}}class $o extends p{}class Yc extends Dd{constructor(i=32){if(super(),this.count=0,i<0)throw new E("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let m=this.buf.length<<1;if(m-i<0&&(m=i),m<0){if(i<0)throw new $o;m=R.MAX_VALUE}this.buf=F.copyOfUint8Array(this.buf,m)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,u,m){if(u<0||u>i.length||m<0||u+m-i.length>0)throw new k;this.ensureCapacity(this.count+m),P.arraycopy(i,u,this.buf,this.count,m),this.count+=m}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return F.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var or;(function(G){G[G.ALPHA=0]="ALPHA",G[G.LOWER=1]="LOWER",G[G.MIXED=2]="MIXED",G[G.PUNCT=3]="PUNCT",G[G.ALPHA_SHIFT=4]="ALPHA_SHIFT",G[G.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(or||(or={}));function Zf(){if(typeof window<"u")return window.BigInt||null;if(typeof oh<"u")return oh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Xc;function yl(G){if(typeof Xc>"u"&&(Xc=Zf()),Xc===null)throw new Error("BigInt is not supported!");return Xc(G)}function kd(){let G=[];G[0]=yl(1);let i=yl(900);G[1]=i;for(let u=2;u<16;u++)G[u]=G[u-1]*i;return G}class Ie{static decode(i,u){let m=new ce(""),y=V.ISO8859_1;m.enableDecoding(y);let b=1,w=i[b++],S=new zi;for(;b<i[0];){switch(w){case Ie.TEXT_COMPACTION_MODE_LATCH:b=Ie.textCompaction(i,b,m);break;case Ie.BYTE_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH_6:b=Ie.byteCompaction(w,i,y,b,m);break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(i[b++]);break;case Ie.NUMERIC_COMPACTION_MODE_LATCH:b=Ie.numericCompaction(i,b,m);break;case Ie.ECI_CHARSET:V.getCharacterSetECIByValue(i[b++]);break;case Ie.ECI_GENERAL_PURPOSE:b+=2;break;case Ie.ECI_USER_DEFINED:b++;break;case Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:b=Ie.decodeMacroBlock(i,b,S);break;case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ie.MACRO_PDF417_TERMINATOR:throw new L;default:b--,b=Ie.textCompaction(i,b,m);break}if(b<i.length)w=i[b++];else throw L.getFormatInstance()}if(m.length()===0)throw L.getFormatInstance();let T=new be(null,m.toString(),null,u);return T.setOther(S),T}static decodeMacroBlock(i,u,m){if(u+Ie.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw L.getFormatInstance();let y=new Int32Array(Ie.NUMBER_OF_SEQUENCE_CODEWORDS);for(let S=0;S<Ie.NUMBER_OF_SEQUENCE_CODEWORDS;S++,u++)y[S]=i[u];m.setSegmentIndex(R.parseInt(Ie.decodeBase900toBase10(y,Ie.NUMBER_OF_SEQUENCE_CODEWORDS)));let b=new ce;u=Ie.textCompaction(i,u,b),m.setFileId(b.toString());let w=-1;for(i[u]===Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(w=u+1);u<i[0];)switch(i[u]){case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(u++,i[u]){case Ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let S=new ce;u=Ie.textCompaction(i,u+1,S),m.setFileName(S.toString());break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let T=new ce;u=Ie.textCompaction(i,u+1,T),m.setSender(T.toString());break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let M=new ce;u=Ie.textCompaction(i,u+1,M),m.setAddressee(M.toString());break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let B=new ce;u=Ie.numericCompaction(i,u+1,B),m.setSegmentCount(R.parseInt(B.toString()));break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let X=new ce;u=Ie.numericCompaction(i,u+1,X),m.setTimestamp(Kf.parseLong(X.toString()));break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Z=new ce;u=Ie.numericCompaction(i,u+1,Z),m.setChecksum(R.parseInt(Z.toString()));break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ne=new ce;u=Ie.numericCompaction(i,u+1,ne),m.setFileSize(Kf.parseLong(ne.toString()));break;default:throw L.getFormatInstance()}break;case Ie.MACRO_PDF417_TERMINATOR:u++,m.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(w!==-1){let S=u-w;m.isLastSegment()&&S--,m.setOptionalData(F.copyOfRange(i,w,w+S))}return u}static textCompaction(i,u,m){let y=new Int32Array((i[0]-u)*2),b=new Int32Array((i[0]-u)*2),w=0,S=!1;for(;u<i[0]&&!S;){let T=i[u++];if(T<Ie.TEXT_COMPACTION_MODE_LATCH)y[w]=T/30,y[w+1]=T%30,w+=2;else switch(T){case Ie.TEXT_COMPACTION_MODE_LATCH:y[w++]=Ie.TEXT_COMPACTION_MODE_LATCH;break;case Ie.BYTE_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH_6:case Ie.NUMERIC_COMPACTION_MODE_LATCH:case Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ie.MACRO_PDF417_TERMINATOR:u--,S=!0;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y[w]=Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,T=i[u++],b[w]=T,w++;break}}return Ie.decodeTextCompaction(y,b,w,m),u}static decodeTextCompaction(i,u,m,y){let b=or.ALPHA,w=or.ALPHA,S=0;for(;S<m;){let T=i[S],M="";switch(b){case or.ALPHA:if(T<26)M=String.fromCharCode(65+T);else switch(T){case 26:M=" ";break;case Ie.LL:b=or.LOWER;break;case Ie.ML:b=or.MIXED;break;case Ie.PS:w=b,b=or.PUNCT_SHIFT;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(u[S]);break;case Ie.TEXT_COMPACTION_MODE_LATCH:b=or.ALPHA;break}break;case or.LOWER:if(T<26)M=String.fromCharCode(97+T);else switch(T){case 26:M=" ";break;case Ie.AS:w=b,b=or.ALPHA_SHIFT;break;case Ie.ML:b=or.MIXED;break;case Ie.PS:w=b,b=or.PUNCT_SHIFT;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(u[S]);break;case Ie.TEXT_COMPACTION_MODE_LATCH:b=or.ALPHA;break}break;case or.MIXED:if(T<Ie.PL)M=Ie.MIXED_CHARS[T];else switch(T){case Ie.PL:b=or.PUNCT;break;case 26:M=" ";break;case Ie.LL:b=or.LOWER;break;case Ie.AL:b=or.ALPHA;break;case Ie.PS:w=b,b=or.PUNCT_SHIFT;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(u[S]);break;case Ie.TEXT_COMPACTION_MODE_LATCH:b=or.ALPHA;break}break;case or.PUNCT:if(T<Ie.PAL)M=Ie.PUNCT_CHARS[T];else switch(T){case Ie.PAL:b=or.ALPHA;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(u[S]);break;case Ie.TEXT_COMPACTION_MODE_LATCH:b=or.ALPHA;break}break;case or.ALPHA_SHIFT:if(b=w,T<26)M=String.fromCharCode(65+T);else switch(T){case 26:M=" ";break;case Ie.TEXT_COMPACTION_MODE_LATCH:b=or.ALPHA;break}break;case or.PUNCT_SHIFT:if(b=w,T<Ie.PAL)M=Ie.PUNCT_CHARS[T];else switch(T){case Ie.PAL:b=or.ALPHA;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(u[S]);break;case Ie.TEXT_COMPACTION_MODE_LATCH:b=or.ALPHA;break}break}M!==""&&y.append(M),S++}}static byteCompaction(i,u,m,y,b){let w=new Yc,S=0,T=0,M=!1;switch(i){case Ie.BYTE_COMPACTION_MODE_LATCH:let B=new Int32Array(6),X=u[y++];for(;y<u[0]&&!M;)switch(B[S++]=X,T=900*T+X,X=u[y++],X){case Ie.TEXT_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH:case Ie.NUMERIC_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH_6:case Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ie.MACRO_PDF417_TERMINATOR:y--,M=!0;break;default:if(S%5===0&&S>0){for(let Z=0;Z<6;++Z)w.write(Number(yl(T)>>yl(8*(5-Z))));T=0,S=0}break}y===u[0]&&X<Ie.TEXT_COMPACTION_MODE_LATCH&&(B[S++]=X);for(let Z=0;Z<S;Z++)w.write(B[Z]);break;case Ie.BYTE_COMPACTION_MODE_LATCH_6:for(;y<u[0]&&!M;){let Z=u[y++];if(Z<Ie.TEXT_COMPACTION_MODE_LATCH)S++,T=900*T+Z;else switch(Z){case Ie.TEXT_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH:case Ie.NUMERIC_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH_6:case Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ie.MACRO_PDF417_TERMINATOR:y--,M=!0;break}if(S%5===0&&S>0){for(let ne=0;ne<6;++ne)w.write(Number(yl(T)>>yl(8*(5-ne))));T=0,S=0}}break}return b.append(H.decode(w.toByteArray(),m)),y}static numericCompaction(i,u,m){let y=0,b=!1,w=new Int32Array(Ie.MAX_NUMERIC_CODEWORDS);for(;u<i[0]&&!b;){let S=i[u++];if(u===i[0]&&(b=!0),S<Ie.TEXT_COMPACTION_MODE_LATCH)w[y]=S,y++;else switch(S){case Ie.TEXT_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH_6:case Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ie.MACRO_PDF417_TERMINATOR:u--,b=!0;break}(y%Ie.MAX_NUMERIC_CODEWORDS===0||S===Ie.NUMERIC_COMPACTION_MODE_LATCH||b)&&y>0&&(m.append(Ie.decodeBase900toBase10(w,y)),y=0)}return u}static decodeBase900toBase10(i,u){let m=yl(0);for(let b=0;b<u;b++)m+=Ie.EXP900[u-b-1]*yl(i[b]);let y=m.toString();if(y.charAt(0)!=="1")throw new L;return y.substring(1)}}Ie.TEXT_COMPACTION_MODE_LATCH=900,Ie.BYTE_COMPACTION_MODE_LATCH=901,Ie.NUMERIC_COMPACTION_MODE_LATCH=902,Ie.BYTE_COMPACTION_MODE_LATCH_6=924,Ie.ECI_USER_DEFINED=925,Ie.ECI_GENERAL_PURPOSE=926,Ie.ECI_CHARSET=927,Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Ie.MACRO_PDF417_TERMINATOR=922,Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Ie.MAX_NUMERIC_CODEWORDS=15,Ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Ie.PL=25,Ie.LL=27,Ie.AS=27,Ie.ML=28,Ie.AL=28,Ie.PS=29,Ie.PAL=29,Ie.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Ie.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Ie.EXP900=Zf()?kd():[],Ie.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ut{constructor(){}static decode(i,u,m,y,b,w,S){let T=new Gs(i,u,m,y,b),M=null,B=null,X;for(let he=!0;;he=!1){if(u!=null&&(M=Ut.getRowIndicatorColumn(i,T,u,!0,w,S)),y!=null&&(B=Ut.getRowIndicatorColumn(i,T,y,!1,w,S)),X=Ut.merge(M,B),X==null)throw ae.getNotFoundInstance();let pe=X.getBoundingBox();if(he&&pe!=null&&(pe.getMinY()<T.getMinY()||pe.getMaxY()>T.getMaxY()))T=pe;else break}X.setBoundingBox(T);let Z=X.getBarcodeColumnCount()+1;X.setDetectionResultColumn(0,M),X.setDetectionResultColumn(Z,B);let ne=M!=null;for(let he=1;he<=Z;he++){let pe=ne?he:Z-he;if(X.getDetectionResultColumn(pe)!==void 0)continue;let Ae;pe===0||pe===Z?Ae=new _d(T,pe===0):Ae=new gl(T),X.setDetectionResultColumn(pe,Ae);let Pe=-1,rt=Pe;for(let et=T.getMinY();et<=T.getMaxY();et++){if(Pe=Ut.getStartColumn(X,pe,et,ne),Pe<0||Pe>T.getMaxX()){if(rt===-1)continue;Pe=rt}let Ze=Ut.detectCodeword(i,T.getMinX(),T.getMaxX(),ne,Pe,et,w,S);Ze!=null&&(Ae.setCodeword(et,Ze),rt=Pe,w=Math.min(w,Ze.getWidth()),S=Math.max(S,Ze.getWidth()))}}return Ut.createDecoderResult(X)}static merge(i,u){if(i==null&&u==null)return null;let m=Ut.getBarcodeMetadata(i,u);if(m==null)return null;let y=Gs.merge(Ut.adjustBoundingBox(i),Ut.adjustBoundingBox(u));return new Na(m,y)}static adjustBoundingBox(i){if(i==null)return null;let u=i.getRowHeights();if(u==null)return null;let m=Ut.getMax(u),y=0;for(let S of u)if(y+=m-S,S>0)break;let b=i.getCodewords();for(let S=0;y>0&&b[S]==null;S++)y--;let w=0;for(let S=u.length-1;S>=0&&(w+=m-u[S],!(u[S]>0));S--);for(let S=b.length-1;w>0&&b[S]==null;S--)w--;return i.getBoundingBox().addMissingRows(y,w,i.isLeft())}static getMax(i){let u=-1;for(let m of i)u=Math.max(u,m);return u}static getBarcodeMetadata(i,u){let m;if(i==null||(m=i.getBarcodeMetadata())==null)return u==null?null:u.getBarcodeMetadata();let y;return u==null||(y=u.getBarcodeMetadata())==null?m:m.getColumnCount()!==y.getColumnCount()&&m.getErrorCorrectionLevel()!==y.getErrorCorrectionLevel()&&m.getRowCount()!==y.getRowCount()?null:m}static getRowIndicatorColumn(i,u,m,y,b,w){let S=new _d(u,y);for(let T=0;T<2;T++){let M=T===0?1:-1,B=Math.trunc(Math.trunc(m.getX()));for(let X=Math.trunc(Math.trunc(m.getY()));X<=u.getMaxY()&&X>=u.getMinY();X+=M){let Z=Ut.detectCodeword(i,0,i.getWidth(),y,B,X,b,w);Z!=null&&(S.setCodeword(X,Z),y?B=Z.getStartX():B=Z.getEndX())}}return S}static adjustCodewordCount(i,u){let m=u[0][1],y=m.getValue(),b=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-Ut.getNumberOfECCodeWords(i.getBarcodeECLevel());if(y.length===0){if(b<1||b>St.MAX_CODEWORDS_IN_BARCODE)throw ae.getNotFoundInstance();m.setValue(b)}else y[0]!==b&&m.setValue(b)}static createDecoderResult(i){let u=Ut.createBarcodeMatrix(i);Ut.adjustCodewordCount(i,u);let m=new Array,y=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),b=[],w=new Array;for(let T=0;T<i.getBarcodeRowCount();T++)for(let M=0;M<i.getBarcodeColumnCount();M++){let B=u[T][M+1].getValue(),X=T*i.getBarcodeColumnCount()+M;B.length===0?m.push(X):B.length===1?y[X]=B[0]:(w.push(X),b.push(B))}let S=new Array(b.length);for(let T=0;T<S.length;T++)S[T]=b[T];return Ut.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),y,St.toIntArray(m),St.toIntArray(w),S)}static createDecoderResultFromAmbiguousValues(i,u,m,y,b){let w=new Int32Array(y.length),S=100;for(;S-- >0;){for(let T=0;T<w.length;T++)u[y[T]]=b[T][w[T]];try{return Ut.decodeCodewords(u,i,m)}catch(T){if(!(T instanceof O))throw T}if(w.length===0)throw O.getChecksumInstance();for(let T=0;T<w.length;T++)if(w[T]<b[T].length-1){w[T]++;break}else if(w[T]=0,T===w.length-1)throw O.getChecksumInstance()}throw O.getChecksumInstance()}static createBarcodeMatrix(i){let u=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let y=0;y<u.length;y++)for(let b=0;b<u[y].length;b++)u[y][b]=new pl;let m=0;for(let y of i.getDetectionResultColumns()){if(y!=null){for(let b of y.getCodewords())if(b!=null){let w=b.getRowNumber();if(w>=0){if(w>=u.length)continue;u[w][m].setValue(b.getValue())}}}m++}return u}static isValidBarcodeColumn(i,u){return u>=0&&u<=i.getBarcodeColumnCount()+1}static getStartColumn(i,u,m,y){let b=y?1:-1,w=null;if(Ut.isValidBarcodeColumn(i,u-b)&&(w=i.getDetectionResultColumn(u-b).getCodeword(m)),w!=null)return y?w.getEndX():w.getStartX();if(w=i.getDetectionResultColumn(u).getCodewordNearby(m),w!=null)return y?w.getStartX():w.getEndX();if(Ut.isValidBarcodeColumn(i,u-b)&&(w=i.getDetectionResultColumn(u-b).getCodewordNearby(m)),w!=null)return y?w.getEndX():w.getStartX();let S=0;for(;Ut.isValidBarcodeColumn(i,u-b);){u-=b;for(let T of i.getDetectionResultColumn(u).getCodewords())if(T!=null)return(y?T.getEndX():T.getStartX())+b*S*(T.getEndX()-T.getStartX());S++}return y?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,u,m,y,b,w,S,T){b=Ut.adjustCodewordStartColumn(i,u,m,y,b,w);let M=Ut.getModuleBitCount(i,u,m,y,b,w);if(M==null)return null;let B,X=it.sum(M);if(y)B=b+X;else{for(let he=0;he<M.length/2;he++){let pe=M[he];M[he]=M[M.length-1-he],M[M.length-1-he]=pe}B=b,b=B-X}if(!Ut.checkCodewordSkew(X,S,T))return null;let Z=Ra.getDecodedValue(M),ne=St.getCodeword(Z);return ne===-1?null:new qn(b,B,Ut.getCodewordBucketNumber(Z),ne)}static getModuleBitCount(i,u,m,y,b,w){let S=b,T=new Int32Array(8),M=0,B=y?1:-1,X=y;for(;(y?S<m:S>=u)&&M<T.length;)i.get(S,w)===X?(T[M]++,S+=B):(M++,X=!X);return M===T.length||S===(y?m:u)&&M===T.length-1?T:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,u,m,y,b,w){let S=b,T=y?-1:1;for(let M=0;M<2;M++){for(;(y?S>=u:S<m)&&y===i.get(S,w);){if(Math.abs(b-S)>Ut.CODEWORD_SKEW_SIZE)return b;S+=T}T=-T,y=!y}return S}static checkCodewordSkew(i,u,m){return u-Ut.CODEWORD_SKEW_SIZE<=i&&i<=m+Ut.CODEWORD_SKEW_SIZE}static decodeCodewords(i,u,m){if(i.length===0)throw L.getFormatInstance();let y=1<<u+1,b=Ut.correctErrors(i,m,y);Ut.verifyCodewordCount(i,y);let w=Ie.decode(i,""+u);return w.setErrorsCorrected(b),w.setErasures(m.length),w}static correctErrors(i,u,m){if(u!=null&&u.length>m/2+Ut.MAX_ERRORS||m<0||m>Ut.MAX_EC_CODEWORDS)throw O.getChecksumInstance();return Ut.errorCorrection.decode(i,m,u)}static verifyCodewordCount(i,u){if(i.length<4)throw L.getFormatInstance();let m=i[0];if(m>i.length)throw L.getFormatInstance();if(m===0)if(u<i.length)i[0]=i.length-u;else throw L.getFormatInstance()}static getBitCountForCodeword(i){let u=new Int32Array(8),m=0,y=u.length-1;for(;!((i&1)!==m&&(m=i&1,y--,y<0));)u[y]++,i>>=1;return u}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return Ut.getCodewordBucketNumber(Ut.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let u=new ji;for(let m=0;m<i.length;m++){u.format("Row %2d: ",m);for(let y=0;y<i[m].length;y++){let b=i[m][y];b.getValue().length===0?u.format("        ",null):u.format("%4d(%2d)",b.getValue()[0],b.getConfidence(b.getValue()[0]))}u.format("%n")}return u.toString()}}Ut.CODEWORD_SKEW_SIZE=2,Ut.MAX_ERRORS=3,Ut.MAX_EC_CODEWORDS=512,Ut.errorCorrection=new qs;class La{decode(i,u=null){let m=La.decode(i,u,!1);if(m==null||m.length===0||m[0]==null)throw ae.getNotFoundInstance();return m[0]}decodeMultiple(i,u=null){try{return La.decode(i,u,!0)}catch(m){throw m instanceof L||m instanceof O?ae.getNotFoundInstance():m}}static decode(i,u,m){const y=new Array,b=Dt.detectMultiple(i,u,m);for(const w of b.getPoints()){const S=Ut.decode(b.getBits(),w[4],w[5],w[6],w[7],La.getMinCodewordWidth(w),La.getMaxCodewordWidth(w)),T=new le(S.getText(),S.getRawBytes(),void 0,w,ie.PDF_417);T.putMetadata($e.ERROR_CORRECTION_LEVEL,S.getECLevel());const M=S.getOther();M!=null&&T.putMetadata($e.PDF417_EXTRA_METADATA,M),y.push(T)}return y.map(w=>w)}static getMaxWidth(i,u){return i==null||u==null?0:Math.trunc(Math.abs(i.getX()-u.getX()))}static getMinWidth(i,u){return i==null||u==null?R.MAX_VALUE:Math.trunc(Math.abs(i.getX()-u.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(La.getMaxWidth(i[0],i[4]),La.getMaxWidth(i[6],i[2])*St.MODULES_IN_CODEWORD/St.MODULES_IN_STOP_PATTERN),Math.max(La.getMaxWidth(i[1],i[5]),La.getMaxWidth(i[7],i[3])*St.MODULES_IN_CODEWORD/St.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(La.getMinWidth(i[0],i[4]),La.getMinWidth(i[6],i[2])*St.MODULES_IN_CODEWORD/St.MODULES_IN_STOP_PATTERN),Math.min(La.getMinWidth(i[1],i[5]),La.getMinWidth(i[7],i[3])*St.MODULES_IN_CODEWORD/St.MODULES_IN_STOP_PATTERN)))}reset(){}}class Wc extends p{}Wc.kind="ReaderException";class Qf{constructor(i,u){this.verbose=i===!0,u&&this.setHints(u)}decode(i,u){return u&&this.setHints(u),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const u=!a(i)&&i.get(z.TRY_HARDER)===!0,m=a(i)?null:i.get(z.POSSIBLE_FORMATS),y=new Array;if(!a(m)){const b=m.some(w=>w===ie.UPC_A||w===ie.UPC_E||w===ie.EAN_13||w===ie.EAN_8||w===ie.CODABAR||w===ie.CODE_39||w===ie.CODE_93||w===ie.CODE_128||w===ie.ITF||w===ie.RSS_14||w===ie.RSS_EXPANDED);b&&!u&&y.push(new Hn(i,this.verbose)),m.includes(ie.QR_CODE)&&y.push(new $s),m.includes(ie.DATA_MATRIX)&&y.push(new Hs),m.includes(ie.AZTEC)&&y.push(new ur),m.includes(ie.PDF_417)&&y.push(new La),b&&u&&y.push(new Hn(i,this.verbose))}y.length===0&&(u||y.push(new Hn(i,this.verbose)),y.push(new $s),y.push(new Hs),y.push(new ur),y.push(new La),u&&y.push(new Hn(i,this.verbose))),this.readers=y}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new Wc("No readers where selected, nothing can be read.");for(const u of this.readers)try{return u.decode(i,this.hints)}catch(m){if(m instanceof Wc)continue}throw new ae("No MultiFormat Readers were able to detect the code.")}}class Jf extends ge{constructor(i=null,u=500){const m=new Qf;m.setHints(i),super(m,u)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class C1 extends ge{constructor(i=500){super(new La,i)}}class A1 extends ge{constructor(i=500){super(new $s,i)}}var Pd;(function(G){G[G.ERROR_CORRECTION=0]="ERROR_CORRECTION",G[G.CHARACTER_SET=1]="CHARACTER_SET",G[G.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",G[G.MIN_SIZE=3]="MIN_SIZE",G[G.MAX_SIZE=4]="MAX_SIZE",G[G.MARGIN=5]="MARGIN",G[G.PDF417_COMPACT=6]="PDF417_COMPACT",G[G.PDF417_COMPACTION=7]="PDF417_COMPACTION",G[G.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",G[G.AZTEC_LAYERS=9]="AZTEC_LAYERS",G[G.QR_VERSION=10]="QR_VERSION"})(Pd||(Pd={}));var ha=Pd;class qo{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new at(i,Int32Array.from([1])))}buildGenerator(i){const u=this.cachedGenerators;if(i>=u.length){let m=u[u.length-1];const y=this.field;for(let b=u.length;b<=i;b++){const w=m.multiply(new at(y,Int32Array.from([1,y.exp(b-1+y.getGeneratorBase())])));u.push(w),m=w}}return u[i]}encode(i,u){if(u===0)throw new E("No error correction bytes");const m=i.length-u;if(m<=0)throw new E("No data bytes provided");const y=this.buildGenerator(u),b=new Int32Array(m);P.arraycopy(i,0,b,0,m);let w=new at(this.field,b);w=w.multiplyByMonomial(u,1);const T=w.divide(y)[1].getCoefficients(),M=u-T.length;for(let B=0;B<M;B++)i[m+B]=0;P.arraycopy(T,0,i,m+M,T.length)}}class qr{constructor(){}static applyMaskPenaltyRule1(i){return qr.applyMaskPenaltyRule1Internal(i,!0)+qr.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let u=0;const m=i.getArray(),y=i.getWidth(),b=i.getHeight();for(let w=0;w<b-1;w++){const S=m[w];for(let T=0;T<y-1;T++){const M=S[T];M===S[T+1]&&M===m[w+1][T]&&M===m[w+1][T+1]&&u++}}return qr.N2*u}static applyMaskPenaltyRule3(i){let u=0;const m=i.getArray(),y=i.getWidth(),b=i.getHeight();for(let w=0;w<b;w++)for(let S=0;S<y;S++){const T=m[w];S+6<y&&T[S]===1&&T[S+1]===0&&T[S+2]===1&&T[S+3]===1&&T[S+4]===1&&T[S+5]===0&&T[S+6]===1&&(qr.isWhiteHorizontal(T,S-4,S)||qr.isWhiteHorizontal(T,S+7,S+11))&&u++,w+6<b&&m[w][S]===1&&m[w+1][S]===0&&m[w+2][S]===1&&m[w+3][S]===1&&m[w+4][S]===1&&m[w+5][S]===0&&m[w+6][S]===1&&(qr.isWhiteVertical(m,S,w-4,w)||qr.isWhiteVertical(m,S,w+7,w+11))&&u++}return u*qr.N3}static isWhiteHorizontal(i,u,m){u=Math.max(u,0),m=Math.min(m,i.length);for(let y=u;y<m;y++)if(i[y]===1)return!1;return!0}static isWhiteVertical(i,u,m,y){m=Math.max(m,0),y=Math.min(y,i.length);for(let b=m;b<y;b++)if(i[b][u]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let u=0;const m=i.getArray(),y=i.getWidth(),b=i.getHeight();for(let T=0;T<b;T++){const M=m[T];for(let B=0;B<y;B++)M[B]===1&&u++}const w=i.getHeight()*i.getWidth();return Math.floor(Math.abs(u*2-w)*10/w)*qr.N4}static getDataMaskBit(i,u,m){let y,b;switch(i){case 0:y=m+u&1;break;case 1:y=m&1;break;case 2:y=u%3;break;case 3:y=(m+u)%3;break;case 4:y=Math.floor(m/2)+Math.floor(u/3)&1;break;case 5:b=m*u,y=(b&1)+b%3;break;case 6:b=m*u,y=(b&1)+b%3&1;break;case 7:b=m*u,y=b%3+(m+u&1)&1;break;default:throw new E("Invalid mask pattern: "+i)}return y===0}static applyMaskPenaltyRule1Internal(i,u){let m=0;const y=u?i.getHeight():i.getWidth(),b=u?i.getWidth():i.getHeight(),w=i.getArray();for(let S=0;S<y;S++){let T=0,M=-1;for(let B=0;B<b;B++){const X=u?w[S][B]:w[B][S];X===M?T++:(T>=5&&(m+=qr.N1+(T-5)),T=1,M=X)}T>=5&&(m+=qr.N1+(T-5))}return m}}qr.N1=3,qr.N2=3,qr.N3=40,qr.N4=10;class Kc{constructor(i,u){this.width=i,this.height=u;const m=new Array(u);for(let y=0;y!==u;y++)m[y]=new Uint8Array(i);this.bytes=m}getHeight(){return this.height}getWidth(){return this.width}get(i,u){return this.bytes[u][i]}getArray(){return this.bytes}setNumber(i,u,m){this.bytes[u][i]=m}setBoolean(i,u,m){this.bytes[u][i]=m?1:0}clear(i){for(const u of this.bytes)F.fill(u,i)}equals(i){if(!(i instanceof Kc))return!1;const u=i;if(this.width!==u.width||this.height!==u.height)return!1;for(let m=0,y=this.height;m<y;++m){const b=this.bytes[m],w=u.bytes[m];for(let S=0,T=this.width;S<T;++S)if(b[S]!==w[S])return!1}return!0}toString(){const i=new ce;for(let u=0,m=this.height;u<m;++u){const y=this.bytes[u];for(let b=0,w=this.width;b<w;++b)switch(y[b]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class jl{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new ce;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<jl.NUM_MASK_PATTERNS}}jl.NUM_MASK_PATTERNS=8;class fr extends p{}fr.kind="WriterException";class Ct{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,u,m,y,b){Ct.clearMatrix(b),Ct.embedBasicPatterns(m,b),Ct.embedTypeInfo(u,y,b),Ct.maybeEmbedVersionInfo(m,b),Ct.embedDataBits(i,y,b)}static embedBasicPatterns(i,u){Ct.embedPositionDetectionPatternsAndSeparators(u),Ct.embedDarkDotAtLeftBottomCorner(u),Ct.maybeEmbedPositionAdjustmentPatterns(i,u),Ct.embedTimingPatterns(u)}static embedTypeInfo(i,u,m){const y=new Y;Ct.makeTypeInfoBits(i,u,y);for(let b=0,w=y.getSize();b<w;++b){const S=y.get(y.getSize()-1-b),T=Ct.TYPE_INFO_COORDINATES[b],M=T[0],B=T[1];if(m.setBoolean(M,B,S),b<8){const X=m.getWidth()-b-1;m.setBoolean(X,8,S)}else{const Z=m.getHeight()-7+(b-8);m.setBoolean(8,Z,S)}}}static maybeEmbedVersionInfo(i,u){if(i.getVersionNumber()<7)return;const m=new Y;Ct.makeVersionInfoBits(i,m);let y=17;for(let b=0;b<6;++b)for(let w=0;w<3;++w){const S=m.get(y);y--,u.setBoolean(b,u.getHeight()-11+w,S),u.setBoolean(u.getHeight()-11+w,b,S)}}static embedDataBits(i,u,m){let y=0,b=-1,w=m.getWidth()-1,S=m.getHeight()-1;for(;w>0;){for(w===6&&(w-=1);S>=0&&S<m.getHeight();){for(let T=0;T<2;++T){const M=w-T;if(!Ct.isEmpty(m.get(M,S)))continue;let B;y<i.getSize()?(B=i.get(y),++y):B=!1,u!==255&&qr.getDataMaskBit(u,M,S)&&(B=!B),m.setBoolean(M,S,B)}S+=b}b=-b,S+=b,w-=2}if(y!==i.getSize())throw new fr("Not all bits consumed: "+y+"/"+i.getSize())}static findMSBSet(i){return 32-R.numberOfLeadingZeros(i)}static calculateBCHCode(i,u){if(u===0)throw new E("0 polynomial");const m=Ct.findMSBSet(u);for(i<<=m-1;Ct.findMSBSet(i)>=m;)i^=u<<Ct.findMSBSet(i)-m;return i}static makeTypeInfoBits(i,u,m){if(!jl.isValidMaskPattern(u))throw new fr("Invalid mask pattern");const y=i.getBits()<<3|u;m.appendBits(y,5);const b=Ct.calculateBCHCode(y,Ct.TYPE_INFO_POLY);m.appendBits(b,10);const w=new Y;if(w.appendBits(Ct.TYPE_INFO_MASK_PATTERN,15),m.xor(w),m.getSize()!==15)throw new fr("should not happen but we got: "+m.getSize())}static makeVersionInfoBits(i,u){u.appendBits(i.getVersionNumber(),6);const m=Ct.calculateBCHCode(i.getVersionNumber(),Ct.VERSION_INFO_POLY);if(u.appendBits(m,12),u.getSize()!==18)throw new fr("should not happen but we got: "+u.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let u=8;u<i.getWidth()-8;++u){const m=(u+1)%2;Ct.isEmpty(i.get(u,6))&&i.setNumber(u,6,m),Ct.isEmpty(i.get(6,u))&&i.setNumber(6,u,m)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new fr;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,u,m){for(let y=0;y<8;++y){if(!Ct.isEmpty(m.get(i+y,u)))throw new fr;m.setNumber(i+y,u,0)}}static embedVerticalSeparationPattern(i,u,m){for(let y=0;y<7;++y){if(!Ct.isEmpty(m.get(i,u+y)))throw new fr;m.setNumber(i,u+y,0)}}static embedPositionAdjustmentPattern(i,u,m){for(let y=0;y<5;++y){const b=Ct.POSITION_ADJUSTMENT_PATTERN[y];for(let w=0;w<5;++w)m.setNumber(i+w,u+y,b[w])}}static embedPositionDetectionPattern(i,u,m){for(let y=0;y<7;++y){const b=Ct.POSITION_DETECTION_PATTERN[y];for(let w=0;w<7;++w)m.setNumber(i+w,u+y,b[w])}}static embedPositionDetectionPatternsAndSeparators(i){const u=Ct.POSITION_DETECTION_PATTERN[0].length;Ct.embedPositionDetectionPattern(0,0,i),Ct.embedPositionDetectionPattern(i.getWidth()-u,0,i),Ct.embedPositionDetectionPattern(0,i.getWidth()-u,i);const m=8;Ct.embedHorizontalSeparationPattern(0,m-1,i),Ct.embedHorizontalSeparationPattern(i.getWidth()-m,m-1,i),Ct.embedHorizontalSeparationPattern(0,i.getWidth()-m,i);const y=7;Ct.embedVerticalSeparationPattern(y,0,i),Ct.embedVerticalSeparationPattern(i.getHeight()-y-1,0,i),Ct.embedVerticalSeparationPattern(y,i.getHeight()-y,i)}static maybeEmbedPositionAdjustmentPatterns(i,u){if(i.getVersionNumber()<2)return;const m=i.getVersionNumber()-1,y=Ct.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[m];for(let b=0,w=y.length;b!==w;b++){const S=y[b];if(S>=0)for(let T=0;T!==w;T++){const M=y[T];M>=0&&Ct.isEmpty(u.get(M,S))&&Ct.embedPositionAdjustmentPattern(M-2,S-2,u)}}}}Ct.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ct.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ct.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ct.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ct.VERSION_INFO_POLY=7973,Ct.TYPE_INFO_POLY=1335,Ct.TYPE_INFO_MASK_PATTERN=21522;class T1{constructor(i,u){this.dataBytes=i,this.errorCorrectionBytes=u}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Or{constructor(){}static calculateMaskPenalty(i){return qr.applyMaskPenaltyRule1(i)+qr.applyMaskPenaltyRule2(i)+qr.applyMaskPenaltyRule3(i)+qr.applyMaskPenaltyRule4(i)}static encode(i,u,m=null){let y=Or.DEFAULT_BYTE_MODE_ENCODING;const b=m!==null&&m.get(ha.CHARACTER_SET)!==void 0;b&&(y=m.get(ha.CHARACTER_SET).toString());const w=this.chooseMode(i,y),S=new Y;if(w===wt.BYTE&&(b||Or.DEFAULT_BYTE_MODE_ENCODING!==y)){const et=V.getCharacterSetECIByName(y);et!==void 0&&this.appendECI(et,S)}this.appendModeInfo(w,S);const T=new Y;this.appendBytes(i,w,T,y);let M;if(m!==null&&m.get(ha.QR_VERSION)!==void 0){const et=Number.parseInt(m.get(ha.QR_VERSION).toString(),10);M=yt.getVersionForNumber(et);const Ze=this.calculateBitsNeeded(w,S,T,M);if(!this.willFit(Ze,M,u))throw new fr("Data too big for requested version")}else M=this.recommendVersion(u,w,S,T);const B=new Y;B.appendBitArray(S);const X=w===wt.BYTE?T.getSizeInBytes():i.length;this.appendLengthInfo(X,M,w,B),B.appendBitArray(T);const Z=M.getECBlocksForLevel(u),ne=M.getTotalCodewords()-Z.getTotalECCodewords();this.terminateBits(ne,B);const he=this.interleaveWithECBytes(B,M.getTotalCodewords(),ne,Z.getNumBlocks()),pe=new jl;pe.setECLevel(u),pe.setMode(w),pe.setVersion(M);const Ae=M.getDimensionForVersion(),Pe=new Kc(Ae,Ae),rt=this.chooseMaskPattern(he,u,M,Pe);return pe.setMaskPattern(rt),Ct.buildMatrix(he,u,M,rt,Pe),pe.setMatrix(Pe),pe}static recommendVersion(i,u,m,y){const b=this.calculateBitsNeeded(u,m,y,yt.getVersionForNumber(1)),w=this.chooseVersion(b,i),S=this.calculateBitsNeeded(u,m,y,w);return this.chooseVersion(S,i)}static calculateBitsNeeded(i,u,m,y){return u.getSize()+i.getCharacterCountBits(y)+m.getSize()}static getAlphanumericCode(i){return i<Or.ALPHANUMERIC_TABLE.length?Or.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,u=null){if(V.SJIS.getName()===u&&this.isOnlyDoubleByteKanji(i))return wt.KANJI;let m=!1,y=!1;for(let b=0,w=i.length;b<w;++b){const S=i.charAt(b);if(Or.isDigit(S))m=!0;else if(this.getAlphanumericCode(S.charCodeAt(0))!==-1)y=!0;else return wt.BYTE}return y?wt.ALPHANUMERIC:m?wt.NUMERIC:wt.BYTE}static isOnlyDoubleByteKanji(i){let u;try{u=H.encode(i,V.SJIS)}catch{return!1}const m=u.length;if(m%2!==0)return!1;for(let y=0;y<m;y+=2){const b=u[y]&255;if((b<129||b>159)&&(b<224||b>235))return!1}return!0}static chooseMaskPattern(i,u,m,y){let b=Number.MAX_SAFE_INTEGER,w=-1;for(let S=0;S<jl.NUM_MASK_PATTERNS;S++){Ct.buildMatrix(i,u,m,S,y);let T=this.calculateMaskPenalty(y);T<b&&(b=T,w=S)}return w}static chooseVersion(i,u){for(let m=1;m<=40;m++){const y=yt.getVersionForNumber(m);if(Or.willFit(i,y,u))return y}throw new fr("Data too big")}static willFit(i,u,m){const y=u.getTotalCodewords(),w=u.getECBlocksForLevel(m).getTotalECCodewords(),S=y-w,T=(i+7)/8;return S>=T}static terminateBits(i,u){const m=i*8;if(u.getSize()>m)throw new fr("data bits cannot fit in the QR Code"+u.getSize()+" > "+m);for(let w=0;w<4&&u.getSize()<m;++w)u.appendBit(!1);const y=u.getSize()&7;if(y>0)for(let w=y;w<8;w++)u.appendBit(!1);const b=i-u.getSizeInBytes();for(let w=0;w<b;++w)u.appendBits((w&1)===0?236:17,8);if(u.getSize()!==m)throw new fr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,u,m,y,b,w){if(y>=m)throw new fr("Block ID too large");const S=i%m,T=m-S,M=Math.floor(i/m),B=M+1,X=Math.floor(u/m),Z=X+1,ne=M-X,he=B-Z;if(ne!==he)throw new fr("EC bytes mismatch");if(m!==T+S)throw new fr("RS blocks mismatch");if(i!==(X+ne)*T+(Z+he)*S)throw new fr("Total bytes mismatch");y<T?(b[0]=X,w[0]=ne):(b[0]=Z,w[0]=he)}static interleaveWithECBytes(i,u,m,y){if(i.getSizeInBytes()!==m)throw new fr("Number of bits and data bytes does not match");let b=0,w=0,S=0;const T=new Array;for(let B=0;B<y;++B){const X=new Int32Array(1),Z=new Int32Array(1);Or.getNumDataBytesAndNumECBytesForBlockID(u,m,y,B,X,Z);const ne=X[0],he=new Uint8Array(ne);i.toBytes(8*b,he,0,ne);const pe=Or.generateECBytes(he,Z[0]);T.push(new T1(he,pe)),w=Math.max(w,ne),S=Math.max(S,pe.length),b+=X[0]}if(m!==b)throw new fr("Data bytes does not match offset");const M=new Y;for(let B=0;B<w;++B)for(const X of T){const Z=X.getDataBytes();B<Z.length&&M.appendBits(Z[B],8)}for(let B=0;B<S;++B)for(const X of T){const Z=X.getErrorCorrectionBytes();B<Z.length&&M.appendBits(Z[B],8)}if(u!==M.getSizeInBytes())throw new fr("Interleaving error: "+u+" and "+M.getSizeInBytes()+" differ.");return M}static generateECBytes(i,u){const m=i.length,y=new Int32Array(m+u);for(let w=0;w<m;w++)y[w]=i[w]&255;new qo(ve.QR_CODE_FIELD_256).encode(y,u);const b=new Uint8Array(u);for(let w=0;w<u;w++)b[w]=y[m+w];return b}static appendModeInfo(i,u){u.appendBits(i.getBits(),4)}static appendLengthInfo(i,u,m,y){const b=m.getCharacterCountBits(u);if(i>=1<<b)throw new fr(i+" is bigger than "+((1<<b)-1));y.appendBits(i,b)}static appendBytes(i,u,m,y){switch(u){case wt.NUMERIC:Or.appendNumericBytes(i,m);break;case wt.ALPHANUMERIC:Or.appendAlphanumericBytes(i,m);break;case wt.BYTE:Or.append8BitBytes(i,m,y);break;case wt.KANJI:Or.appendKanjiBytes(i,m);break;default:throw new fr("Invalid mode: "+u)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const u=Or.getDigit(i);return u>=0&&u<=9}static appendNumericBytes(i,u){const m=i.length;let y=0;for(;y<m;){const b=Or.getDigit(i.charAt(y));if(y+2<m){const w=Or.getDigit(i.charAt(y+1)),S=Or.getDigit(i.charAt(y+2));u.appendBits(b*100+w*10+S,10),y+=3}else if(y+1<m){const w=Or.getDigit(i.charAt(y+1));u.appendBits(b*10+w,7),y+=2}else u.appendBits(b,4),y++}}static appendAlphanumericBytes(i,u){const m=i.length;let y=0;for(;y<m;){const b=Or.getAlphanumericCode(i.charCodeAt(y));if(b===-1)throw new fr;if(y+1<m){const w=Or.getAlphanumericCode(i.charCodeAt(y+1));if(w===-1)throw new fr;u.appendBits(b*45+w,11),y+=2}else u.appendBits(b,6),y++}}static append8BitBytes(i,u,m){let y;try{y=H.encode(i,m)}catch(b){throw new fr(b)}for(let b=0,w=y.length;b!==w;b++){const S=y[b];u.appendBits(S,8)}}static appendKanjiBytes(i,u){let m;try{m=H.encode(i,V.SJIS)}catch(b){throw new fr(b)}const y=m.length;for(let b=0;b<y;b+=2){const w=m[b]&255,S=m[b+1]&255,T=w<<8&4294967295|S;let M=-1;if(T>=33088&&T<=40956?M=T-33088:T>=57408&&T<=60351&&(M=T-49472),M===-1)throw new fr("Invalid byte sequence");const B=(M>>8)*192+(M&255);u.appendBits(B,13)}}static appendECI(i,u){u.appendBits(wt.ECI.getBits(),4),u.appendBits(i.getValue(),8)}}Or.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Or.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class zl{write(i,u,m,y=null){if(i.length===0)throw new E("Found empty contents");if(u<0||m<0)throw new E("Requested dimensions are too small: "+u+"x"+m);let b=Ht.L,w=zl.QUIET_ZONE_SIZE;y!==null&&(y.get(ha.ERROR_CORRECTION)!==void 0&&(b=Ht.fromString(y.get(ha.ERROR_CORRECTION).toString())),y.get(ha.MARGIN)!==void 0&&(w=Number.parseInt(y.get(ha.MARGIN).toString(),10)));const S=Or.encode(i,b,y);return this.renderResult(S,u,m,w)}writeToDom(i,u,m,y,b=null){typeof i=="string"&&(i=document.querySelector(i));const w=this.write(u,m,y,b);i&&i.appendChild(w)}renderResult(i,u,m,y){const b=i.getMatrix();if(b===null)throw new oe;const w=b.getWidth(),S=b.getHeight(),T=w+y*2,M=S+y*2,B=Math.max(u,T),X=Math.max(m,M),Z=Math.min(Math.floor(B/T),Math.floor(X/M)),ne=Math.floor((B-w*Z)/2),he=Math.floor((X-S*Z)/2),pe=this.createSVGElement(B,X);for(let Ae=0,Pe=he;Ae<S;Ae++,Pe+=Z)for(let rt=0,et=ne;rt<w;rt++,et+=Z)if(b.get(rt,Ae)===1){const Ze=this.createSvgRectElement(et,Pe,Z,Z);pe.appendChild(Ze)}return pe}createSVGElement(i,u){const m=document.createElementNS(zl.SVG_NS,"svg");return m.setAttributeNS(null,"height",i.toString()),m.setAttributeNS(null,"width",u.toString()),m}createSvgRectElement(i,u,m,y){const b=document.createElementNS(zl.SVG_NS,"rect");return b.setAttributeNS(null,"x",i.toString()),b.setAttributeNS(null,"y",u.toString()),b.setAttributeNS(null,"height",m.toString()),b.setAttributeNS(null,"width",y.toString()),b.setAttributeNS(null,"fill","#000000"),b}}zl.QUIET_ZONE_SIZE=4,zl.SVG_NS="http://www.w3.org/2000/svg";class Vi{encode(i,u,m,y,b){if(i.length===0)throw new E("Found empty contents");if(u!==ie.QR_CODE)throw new E("Can only encode QR_CODE, but got "+u);if(m<0||y<0)throw new E(`Requested dimensions are too small: ${m}x${y}`);let w=Ht.L,S=Vi.QUIET_ZONE_SIZE;b!==null&&(b.get(ha.ERROR_CORRECTION)!==void 0&&(w=Ht.fromString(b.get(ha.ERROR_CORRECTION).toString())),b.get(ha.MARGIN)!==void 0&&(S=Number.parseInt(b.get(ha.MARGIN).toString(),10)));const T=Or.encode(i,w,b);return Vi.renderResult(T,m,y,S)}static renderResult(i,u,m,y){const b=i.getMatrix();if(b===null)throw new oe;const w=b.getWidth(),S=b.getHeight(),T=w+y*2,M=S+y*2,B=Math.max(u,T),X=Math.max(m,M),Z=Math.min(Math.floor(B/T),Math.floor(X/M)),ne=Math.floor((B-w*Z)/2),he=Math.floor((X-S*Z)/2),pe=new me(B,X);for(let Ae=0,Pe=he;Ae<S;Ae++,Pe+=Z)for(let rt=0,et=ne;rt<w;rt++,et+=Z)b.get(rt,Ae)===1&&pe.setRegion(et,Pe,Z,Z);return pe}}Vi.QUIET_ZONE_SIZE=4;class O1{encode(i,u,m,y,b){let w;switch(u){case ie.QR_CODE:w=new Vi;break;default:throw new E("No encoder available for format "+u)}return w.encode(i,u,m,y,b)}}class fs extends Ee{constructor(i,u,m,y,b,w,S,T){if(super(w,S),this.yuvData=i,this.dataWidth=u,this.dataHeight=m,this.left=y,this.top=b,y+w>u||b+S>m)throw new E("Crop rectangle does not fit within image data.");T&&this.reverseHorizontal(w,S)}getRow(i,u){if(i<0||i>=this.getHeight())throw new E("Requested row is outside the image: "+i);const m=this.getWidth();(u==null||u.length<m)&&(u=new Uint8ClampedArray(m));const y=(i+this.top)*this.dataWidth+this.left;return P.arraycopy(this.yuvData,y,u,0,m),u}getMatrix(){const i=this.getWidth(),u=this.getHeight();if(i===this.dataWidth&&u===this.dataHeight)return this.yuvData;const m=i*u,y=new Uint8ClampedArray(m);let b=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return P.arraycopy(this.yuvData,b,y,0,m),y;for(let w=0;w<u;w++){const S=w*i;P.arraycopy(this.yuvData,b,y,S,i),b+=this.dataWidth}return y}isCropSupported(){return!0}crop(i,u,m,y){return new fs(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+u,m,y,!1)}renderThumbnail(){const i=this.getWidth()/fs.THUMBNAIL_SCALE_FACTOR,u=this.getHeight()/fs.THUMBNAIL_SCALE_FACTOR,m=new Int32Array(i*u),y=this.yuvData;let b=this.top*this.dataWidth+this.left;for(let w=0;w<u;w++){const S=w*i;for(let T=0;T<i;T++){const M=y[b+T*fs.THUMBNAIL_SCALE_FACTOR]&255;m[S+T]=4278190080|M*65793}b+=this.dataWidth*fs.THUMBNAIL_SCALE_FACTOR}return m}getThumbnailWidth(){return this.getWidth()/fs.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/fs.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,u){const m=this.yuvData;for(let y=0,b=this.top*this.dataWidth+this.left;y<u;y++,b+=this.dataWidth){const w=b+i/2;for(let S=b,T=b+i-1;S<w;S++,T--){const M=m[S];m[S]=m[T],m[T]=M}}}invert(){return new we(this)}}fs.THUMBNAIL_SCALE_FACTOR=2;class Md extends Ee{constructor(i,u,m,y,b,w,S){if(super(u,m),this.dataWidth=y,this.dataHeight=b,this.left=w,this.top=S,i.BYTES_PER_ELEMENT===4){const T=u*m,M=new Uint8ClampedArray(T);for(let B=0;B<T;B++){const X=i[B],Z=X>>16&255,ne=X>>7&510,he=X&255;M[B]=(Z+ne+he)/4&255}this.luminances=M}else this.luminances=i;if(y===void 0&&(this.dataWidth=u),b===void 0&&(this.dataHeight=m),w===void 0&&(this.left=0),S===void 0&&(this.top=0),this.left+u>this.dataWidth||this.top+m>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(i,u){if(i<0||i>=this.getHeight())throw new E("Requested row is outside the image: "+i);const m=this.getWidth();(u==null||u.length<m)&&(u=new Uint8ClampedArray(m));const y=(i+this.top)*this.dataWidth+this.left;return P.arraycopy(this.luminances,y,u,0,m),u}getMatrix(){const i=this.getWidth(),u=this.getHeight();if(i===this.dataWidth&&u===this.dataHeight)return this.luminances;const m=i*u,y=new Uint8ClampedArray(m);let b=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return P.arraycopy(this.luminances,b,y,0,m),y;for(let w=0;w<u;w++){const S=w*i;P.arraycopy(this.luminances,b,y,S,i),b+=this.dataWidth}return y}isCropSupported(){return!0}crop(i,u,m,y){return new Md(this.luminances,m,y,this.dataWidth,this.dataHeight,this.left+i,this.top+u)}invert(){return new we(this)}}class e0 extends V{static forName(i){return this.getCharacterSetECIByName(i)}}class Go{}Go.ISO_8859_1=V.ISO8859_1;class Hi{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class t0{static singletonList(i){return[i]}static min(i,u){return i.sort(u)[0]}}class r0{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Vl extends r0{constructor(i,u,m){super(i),this.value=u,this.bitCount=m}appendTo(i,u){i.appendBits(this.value,this.bitCount)}add(i,u){return new Vl(this,i,u)}addBinaryShift(i,u){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Vl(this,i,u)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+R.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Zc extends Vl{constructor(i,u,m){super(i,0,0),this.binaryShiftStart=u,this.binaryShiftByteCount=m}appendTo(i,u){for(let m=0;m<this.binaryShiftByteCount;m++)(m===0||m===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):m===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(u[this.binaryShiftStart+m],8)}addBinaryShift(i,u){return new Zc(this,i,u)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function a0(G,i,u){return new Zc(G,i,u)}function $i(G,i,u){return new Vl(G,i,u)}const qi=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],xl=0,Qc=1,Tn=2,Id=3,Gn=4,Yo=new Vl(null,0,0),Hl=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function _1(G){for(let i of G)F.fill(i,-1);return G[xl][Gn]=0,G[Qc][Gn]=0,G[Qc][xl]=28,G[Id][Gn]=0,G[Tn][Gn]=0,G[Tn][xl]=15,G}const Xo=_1(F.createInt32Array(6,6));class Yn{constructor(i,u,m,y){this.token=i,this.mode=u,this.binaryShiftByteCount=m,this.bitCount=y}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,u){let m=this.bitCount,y=this.token;if(i!==this.mode){let w=Hl[this.mode][i];y=$i(y,w&65535,w>>16),m+=w>>16}let b=i===Tn?4:5;return y=$i(y,u,b),new Yn(y,i,0,m+b)}shiftAndAppend(i,u){let m=this.token,y=this.mode===Tn?4:5;return m=$i(m,Xo[this.mode][i],y),m=$i(m,u,5),new Yn(m,this.mode,0,this.bitCount+y+5)}addBinaryShiftChar(i){let u=this.token,m=this.mode,y=this.bitCount;if(this.mode===Gn||this.mode===Tn){let S=Hl[m][xl];u=$i(u,S&65535,S>>16),y+=S>>16,m=xl}let b=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,w=new Yn(u,m,this.binaryShiftByteCount+1,y+b);return w.binaryShiftByteCount===2078&&(w=w.endBinaryShift(i+1)),w}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let u=this.token;return u=a0(u,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Yn(u,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let u=this.bitCount+(Hl[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?u+=Yn.calculateBinaryShiftCost(i)-Yn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(u+=10),u<=i.bitCount}toBitArray(i){let u=[];for(let y=this.endBinaryShift(i.length).token;y!==null;y=y.getPrevious())u.unshift(y);let m=new Y;for(const y of u)y.appendTo(m,i);return m}toString(){return $.format("%s bits=%d bytes=%d",qi[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Yn.INITIAL_STATE=new Yn(Yo,xl,0,0);function n0(G){const i=$.getCharCode(" "),u=$.getCharCode("."),m=$.getCharCode(",");G[xl][i]=1;const y=$.getCharCode("Z"),b=$.getCharCode("A");for(let Z=b;Z<=y;Z++)G[xl][Z]=Z-b+2;G[Qc][i]=1;const w=$.getCharCode("z"),S=$.getCharCode("a");for(let Z=S;Z<=w;Z++)G[Qc][Z]=Z-S+2;G[Tn][i]=1;const T=$.getCharCode("9"),M=$.getCharCode("0");for(let Z=M;Z<=T;Z++)G[Tn][Z]=Z-M+2;G[Tn][m]=12,G[Tn][u]=13;const B=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let Z=0;Z<B.length;Z++)G[Id][$.getCharCode(B[Z])]=Z;const X=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Z=0;Z<X.length;Z++)$.getCharCode(X[Z])>0&&(G[Gn][$.getCharCode(X[Z])]=Z);return G}const Wo=n0(F.createInt32Array(5,256));class $l{constructor(i){this.text=i}encode(){const i=$.getCharCode(" "),u=$.getCharCode(`
`);let m=t0.singletonList(Yn.INITIAL_STATE);for(let b=0;b<this.text.length;b++){let w,S=b+1<this.text.length?this.text[b+1]:0;switch(this.text[b]){case $.getCharCode("\r"):w=S===u?2:0;break;case $.getCharCode("."):w=S===i?3:0;break;case $.getCharCode(","):w=S===i?4:0;break;case $.getCharCode(":"):w=S===i?5:0;break;default:w=0}w>0?(m=$l.updateStateListForPair(m,b,w),b++):m=this.updateStateListForChar(m,b)}return t0.min(m,(b,w)=>b.getBitCount()-w.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,u){const m=[];for(let y of i)this.updateStateForChar(y,u,m);return $l.simplifyStates(m)}updateStateForChar(i,u,m){let y=this.text[u]&255,b=Wo[i.getMode()][y]>0,w=null;for(let S=0;S<=Gn;S++){let T=Wo[S][y];if(T>0){if(w==null&&(w=i.endBinaryShift(u)),!b||S===i.getMode()||S===Tn){const M=w.latchAndAppend(S,T);m.push(M)}if(!b&&Xo[i.getMode()][S]>=0){const M=w.shiftAndAppend(S,T);m.push(M)}}}if(i.getBinaryShiftByteCount()>0||Wo[i.getMode()][y]===0){let S=i.addBinaryShiftChar(u);m.push(S)}}static updateStateListForPair(i,u,m){const y=[];for(let b of i)this.updateStateForPair(b,u,m,y);return this.simplifyStates(y)}static updateStateForPair(i,u,m,y){let b=i.endBinaryShift(u);if(y.push(b.latchAndAppend(Gn,m)),i.getMode()!==Gn&&y.push(b.shiftAndAppend(Gn,m)),m===3||m===4){let w=b.latchAndAppend(Tn,16-m).latchAndAppend(Tn,1);y.push(w)}if(i.getBinaryShiftByteCount()>0){let w=i.addBinaryShiftChar(u).addBinaryShiftChar(u+1);y.push(w)}}static simplifyStates(i){let u=[];for(const m of i){let y=!0;for(const b of u){if(b.isBetterThanOrEqualTo(m)){y=!1;break}m.isBetterThanOrEqualTo(b)&&(u=u.filter(w=>w!==b))}y&&u.push(m)}return u}}class Xt{constructor(){}static encodeBytes(i){return Xt.encode(i,Xt.DEFAULT_EC_PERCENT,Xt.DEFAULT_AZTEC_LAYERS)}static encode(i,u,m){let y=new $l(i).encode(),b=R.truncDivision(y.getSize()*u,100)+11,w=y.getSize()+b,S,T,M,B,X;if(m!==Xt.DEFAULT_AZTEC_LAYERS){if(S=m<0,T=Math.abs(m),T>(S?Xt.MAX_NB_BITS_COMPACT:Xt.MAX_NB_BITS))throw new E($.format("Illegal value %s for layers",m));M=Xt.totalBitsInLayer(T,S),B=Xt.WORD_SIZE[T];let Ze=M-M%B;if(X=Xt.stuffBits(y,B),X.getSize()+b>Ze)throw new E("Data to large for user specified layer");if(S&&X.getSize()>B*64)throw new E("Data to large for user specified layer")}else{B=0,X=null;for(let Ze=0;;Ze++){if(Ze>Xt.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(S=Ze<=3,T=S?Ze+1:Ze,M=Xt.totalBitsInLayer(T,S),w>M)continue;(X==null||B!==Xt.WORD_SIZE[T])&&(B=Xt.WORD_SIZE[T],X=Xt.stuffBits(y,B));let zt=M-M%B;if(!(S&&X.getSize()>B*64)&&X.getSize()+b<=zt)break}}let Z=Xt.generateCheckWords(X,M,B),ne=X.getSize()/B,he=Xt.generateModeMessage(S,T,ne),pe=(S?11:14)+T*4,Ae=new Int32Array(pe),Pe;if(S){Pe=pe;for(let Ze=0;Ze<Ae.length;Ze++)Ae[Ze]=Ze}else{Pe=pe+1+2*R.truncDivision(R.truncDivision(pe,2)-1,15);let Ze=R.truncDivision(pe,2),zt=R.truncDivision(Pe,2);for(let Pt=0;Pt<Ze;Pt++){let sa=Pt+R.truncDivision(Pt,15);Ae[Ze-Pt-1]=zt-sa-1,Ae[Ze+Pt]=zt+sa+1}}let rt=new me(Pe);for(let Ze=0,zt=0;Ze<T;Ze++){let Pt=(T-Ze)*4+(S?9:12);for(let sa=0;sa<Pt;sa++){let On=sa*2;for(let tn=0;tn<2;tn++)Z.get(zt+On+tn)&&rt.set(Ae[Ze*2+tn],Ae[Ze*2+sa]),Z.get(zt+Pt*2+On+tn)&&rt.set(Ae[Ze*2+sa],Ae[pe-1-Ze*2-tn]),Z.get(zt+Pt*4+On+tn)&&rt.set(Ae[pe-1-Ze*2-tn],Ae[pe-1-Ze*2-sa]),Z.get(zt+Pt*6+On+tn)&&rt.set(Ae[pe-1-Ze*2-sa],Ae[Ze*2+tn])}zt+=Pt*8}if(Xt.drawModeMessage(rt,S,Pe,he),S)Xt.drawBullsEye(rt,R.truncDivision(Pe,2),5);else{Xt.drawBullsEye(rt,R.truncDivision(Pe,2),7);for(let Ze=0,zt=0;Ze<R.truncDivision(pe,2)-1;Ze+=15,zt+=16)for(let Pt=R.truncDivision(Pe,2)&1;Pt<Pe;Pt+=2)rt.set(R.truncDivision(Pe,2)-zt,Pt),rt.set(R.truncDivision(Pe,2)+zt,Pt),rt.set(Pt,R.truncDivision(Pe,2)-zt),rt.set(Pt,R.truncDivision(Pe,2)+zt)}let et=new Hi;return et.setCompact(S),et.setSize(Pe),et.setLayers(T),et.setCodeWords(ne),et.setMatrix(rt),et}static drawBullsEye(i,u,m){for(let y=0;y<m;y+=2)for(let b=u-y;b<=u+y;b++)i.set(b,u-y),i.set(b,u+y),i.set(u-y,b),i.set(u+y,b);i.set(u-m,u-m),i.set(u-m+1,u-m),i.set(u-m,u-m+1),i.set(u+m,u-m),i.set(u+m,u-m+1),i.set(u+m,u+m-1)}static generateModeMessage(i,u,m){let y=new Y;return i?(y.appendBits(u-1,2),y.appendBits(m-1,6),y=Xt.generateCheckWords(y,28,4)):(y.appendBits(u-1,5),y.appendBits(m-1,11),y=Xt.generateCheckWords(y,40,4)),y}static drawModeMessage(i,u,m,y){let b=R.truncDivision(m,2);if(u)for(let w=0;w<7;w++){let S=b-3+w;y.get(w)&&i.set(S,b-5),y.get(w+7)&&i.set(b+5,S),y.get(20-w)&&i.set(S,b+5),y.get(27-w)&&i.set(b-5,S)}else for(let w=0;w<10;w++){let S=b-5+w+R.truncDivision(w,5);y.get(w)&&i.set(S,b-7),y.get(w+10)&&i.set(b+7,S),y.get(29-w)&&i.set(S,b+7),y.get(39-w)&&i.set(b-7,S)}}static generateCheckWords(i,u,m){let y=i.getSize()/m,b=new qo(Xt.getGF(m)),w=R.truncDivision(u,m),S=Xt.bitsToWords(i,m,w);b.encode(S,w-y);let T=u%m,M=new Y;M.appendBits(0,T);for(const B of Array.from(S))M.appendBits(B,m);return M}static bitsToWords(i,u,m){let y=new Int32Array(m),b,w;for(b=0,w=i.getSize()/u;b<w;b++){let S=0;for(let T=0;T<u;T++)S|=i.get(b*u+T)?1<<u-T-1:0;y[b]=S}return y}static getGF(i){switch(i){case 4:return ve.AZTEC_PARAM;case 6:return ve.AZTEC_DATA_6;case 8:return ve.AZTEC_DATA_8;case 10:return ve.AZTEC_DATA_10;case 12:return ve.AZTEC_DATA_12;default:throw new E("Unsupported word size "+i)}}static stuffBits(i,u){let m=new Y,y=i.getSize(),b=(1<<u)-2;for(let w=0;w<y;w+=u){let S=0;for(let T=0;T<u;T++)(w+T>=y||i.get(w+T))&&(S|=1<<u-1-T);(S&b)===b?(m.appendBits(S&b,u),w--):(S&b)===0?(m.appendBits(S|1,u),w--):m.appendBits(S,u)}return m}static totalBitsInLayer(i,u){return((u?88:112)+16*i)*i}}Xt.DEFAULT_EC_PERCENT=33,Xt.DEFAULT_AZTEC_LAYERS=0,Xt.MAX_NB_BITS=32,Xt.MAX_NB_BITS_COMPACT=4,Xt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ko{encode(i,u,m,y){return this.encodeWithHints(i,u,m,y,null)}encodeWithHints(i,u,m,y,b){let w=Go.ISO_8859_1,S=Xt.DEFAULT_EC_PERCENT,T=Xt.DEFAULT_AZTEC_LAYERS;return b!=null&&(b.has(ha.CHARACTER_SET)&&(w=e0.forName(b.get(ha.CHARACTER_SET).toString())),b.has(ha.ERROR_CORRECTION)&&(S=R.parseInt(b.get(ha.ERROR_CORRECTION).toString())),b.has(ha.AZTEC_LAYERS)&&(T=R.parseInt(b.get(ha.AZTEC_LAYERS).toString()))),Ko.encodeLayers(i,u,m,y,w,S,T)}static encodeLayers(i,u,m,y,b,w,S){if(u!==ie.AZTEC)throw new E("Can only encode AZTEC, but got "+u);let T=Xt.encode($.getBytes(i,b),w,S);return Ko.renderResult(T,m,y)}static renderResult(i,u,m){let y=i.getMatrix();if(y==null)throw new oe;let b=y.getWidth(),w=y.getHeight(),S=Math.max(u,b),T=Math.max(m,w),M=Math.min(S/b,T/w),B=(S-b*M)/2,X=(T-w*M)/2,Z=new me(S,T);for(let ne=0,he=X;ne<w;ne++,he+=M)for(let pe=0,Ae=B;pe<b;pe++,Ae+=M)y.get(pe,ne)&&Z.setRegion(Ae,he,M,M);return Z}}r.AbstractExpandedDecoder=$r,r.ArgumentException=x,r.ArithmeticException=Le,r.AztecCode=Hi,r.AztecCodeReader=ur,r.AztecCodeWriter=Ko,r.AztecDecoder=tt,r.AztecDetector=vr,r.AztecDetectorResult=Fe,r.AztecEncoder=Xt,r.AztecHighLevelEncoder=$l,r.AztecPoint=At,r.BarcodeFormat=ie,r.Binarizer=_,r.BinaryBitmap=C,r.BitArray=Y,r.BitMatrix=me,r.BitSource=$n,r.BrowserAztecCodeReader=ea,r.BrowserBarcodeReader=w1,r.BrowserCodeReader=ge,r.BrowserDatamatrixCodeReader=$c,r.BrowserMultiFormatReader=Jf,r.BrowserPDF417Reader=C1,r.BrowserQRCodeReader=A1,r.BrowserQRCodeSvgWriter=zl,r.CharacterSetECI=V,r.ChecksumException=O,r.Code128Reader=xe,r.Code39Reader=Qe,r.DataMatrixDecodedBitStreamParser=Vs,r.DataMatrixReader=Hs,r.DecodeHintType=z,r.DecoderResult=be,r.DefaultGridSampler=tr,r.DetectorResult=lt,r.EAN13Reader=Je,r.EncodeHintType=ha,r.Exception=p,r.FormatException=L,r.GenericGF=ve,r.GenericGFPoly=at,r.GlobalHistogramBinarizer=J,r.GridSampler=$t,r.GridSamplerInstance=ut,r.HTMLCanvasElementLuminanceSource=te,r.HybridBinarizer=se,r.ITFReader=st,r.IllegalArgumentException=E,r.IllegalStateException=oe,r.InvertedLuminanceSource=we,r.LuminanceSource=Ee,r.MathUtils=it,r.MultiFormatOneDReader=Hn,r.MultiFormatReader=Qf,r.MultiFormatWriter=O1,r.NotFoundException=ae,r.OneDReader=kt,r.PDF417DecodedBitStreamParser=Ie,r.PDF417DecoderErrorCorrection=qs,r.PDF417Reader=La,r.PDF417ResultMetadata=zi,r.PerspectiveTransform=er,r.PlanarYUVLuminanceSource=fs,r.QRCodeByteMatrix=Kc,r.QRCodeDataMask=gn,r.QRCodeDecodedBitStreamParser=Ar,r.QRCodeDecoderErrorCorrectionLevel=Ht,r.QRCodeDecoderFormatInformation=wa,r.QRCodeEncoder=Or,r.QRCodeEncoderQRCode=jl,r.QRCodeMaskUtil=qr,r.QRCodeMatrixUtil=Ct,r.QRCodeMode=wt,r.QRCodeReader=$s,r.QRCodeVersion=yt,r.QRCodeWriter=Vi,r.RGBLuminanceSource=Md,r.RSS14Reader=mr,r.RSSExpandedReader=Ke,r.ReaderException=Wc,r.ReedSolomonDecoder=qe,r.ReedSolomonEncoder=qo,r.ReedSolomonException=Ue,r.Result=le,r.ResultMetadataType=$e,r.ResultPoint=We,r.StringUtils=$,r.UnsupportedOperationException=W,r.VideoInputDevice=K,r.WhiteRectangleDetector=mt,r.WriterException=fr,r.ZXingArrays=F,r.ZXingCharset=e0,r.ZXingInteger=R,r.ZXingStandardCharsets=Go,r.ZXingStringBuilder=ce,r.ZXingStringEncoding=H,r.ZXingSystem=P,r.createAbstractExpandedDecoder=Ve,Object.defineProperty(r,"__esModule",{value:!0})}))})(Rm,Rm.exports)),Rm.exports}var Vr=Xde();const Wde=Bl(Vr),Kde=x_({__proto__:null,default:Wde},[Vr]);var a_=(function(){function e(t,r,a){if(this.formatMap=new Map([[dt.QR_CODE,Vr.BarcodeFormat.QR_CODE],[dt.AZTEC,Vr.BarcodeFormat.AZTEC],[dt.CODABAR,Vr.BarcodeFormat.CODABAR],[dt.CODE_39,Vr.BarcodeFormat.CODE_39],[dt.CODE_93,Vr.BarcodeFormat.CODE_93],[dt.CODE_128,Vr.BarcodeFormat.CODE_128],[dt.DATA_MATRIX,Vr.BarcodeFormat.DATA_MATRIX],[dt.MAXICODE,Vr.BarcodeFormat.MAXICODE],[dt.ITF,Vr.BarcodeFormat.ITF],[dt.EAN_13,Vr.BarcodeFormat.EAN_13],[dt.EAN_8,Vr.BarcodeFormat.EAN_8],[dt.PDF_417,Vr.BarcodeFormat.PDF_417],[dt.RSS_14,Vr.BarcodeFormat.RSS_14],[dt.RSS_EXPANDED,Vr.BarcodeFormat.RSS_EXPANDED],[dt.UPC_A,Vr.BarcodeFormat.UPC_A],[dt.UPC_E,Vr.BarcodeFormat.UPC_E],[dt.UPC_EAN_EXTENSION,Vr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Kde)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=a;var l=this.createZXingFormats(t),o=new Map;o.set(Vr.DecodeHintType.POSSIBLE_FORMATS,l),o.set(Vr.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(a,l){try{a(r.decode(t))}catch(o){l(o)}})},e.prototype.decode=function(t){var r=new Vr.MultiFormatReader(this.verbose,this.hints),a=new Vr.HTMLCanvasElementLuminanceSource(t),l=new Vr.BinaryBitmap(new Vr.HybridBinarizer(a)),o=r.decode(l);return{text:o.text,format:LR.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,a,l){t.set(r,a)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],a=0,l=t;a<l.length;a++){var o=l[a];this.formatMap.has(o)?r.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),Zde=function(e,t,r,a){function l(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function h(x){try{p(a.next(x))}catch(E){d(E)}}function g(x){try{p(a.throw(x))}catch(E){d(E)}}function p(x){x.done?o(x.value):l(x.value).then(h,g)}p((a=a.apply(e,t||[])).next())})},Qde=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,l,o,d;return d={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(p){return function(x){return g([p,x])}}function g(p){if(a)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(r=0)),r;)try{if(a=1,l&&(o=p[0]&2?l.return:p[0]?l.throw||((o=l.return)&&o.call(l),0):l.next)&&!(o=o.call(l,p[1])).done)return o;switch(l=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],l=0}finally{a=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},n_=(function(){function e(t,r,a){if(this.formatMap=new Map([[dt.QR_CODE,"qr_code"],[dt.AZTEC,"aztec"],[dt.CODABAR,"codabar"],[dt.CODE_39,"code_39"],[dt.CODE_93,"code_93"],[dt.CODE_128,"code_128"],[dt.DATA_MATRIX,"data_matrix"],[dt.ITF,"itf"],[dt.EAN_13,"ean_13"],[dt.EAN_8,"ean_8"],[dt.PDF_417,"pdf417"],[dt.UPC_A,"upc_a"],[dt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=a;var l=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return Zde(this,void 0,void 0,function(){var r,a;return Qde(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=l.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return a=this.selectLargestBarcode(r),[2,{text:a.rawValue,format:LR.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,a=0,l=0,o=t;l<o.length;l++){var d=o[l],h=d.boundingBox.width*d.boundingBox.height;h>a&&(a=h,r=d)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],a=0,l=t;a<l.length;a++){var o=l[a];this.formatMap.has(o)?r.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,a,l){t.set(r,a)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),s_=function(e,t,r,a){function l(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function h(x){try{p(a.next(x))}catch(E){d(E)}}function g(x){try{p(a.throw(x))}catch(E){d(E)}}function p(x){x.done?o(x.value):l(x.value).then(h,g)}p((a=a.apply(e,t||[])).next())})},l_=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,l,o,d;return d={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(p){return function(x){return g([p,x])}}function g(p){if(a)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(r=0)),r;)try{if(a=1,l&&(o=p[0]&2?l.return:p[0]?l.throw||((o=l.return)&&o.call(l),0):l.next)&&!(o=o.call(l,p[1])).done)return o;switch(l=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],l=0}finally{a=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Jde=(function(){function e(t,r,a,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=a,r&&n_.isSupported()?(this.primaryDecoder=new n_(t,a,l),this.secondaryDecoder=new a_(t,a,l)):this.primaryDecoder=new a_(t,a,l)}return e.prototype.decodeAsync=function(t){return s_(this,void 0,void 0,function(){var r;return l_(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,a.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return s_(this,void 0,void 0,function(){var r,a;return l_(this,function(l){switch(l.label){case 0:r=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,l.sent()];case 3:if(a=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw a;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,a=this.executionResults;r<a.length;r++){var l=a[r];t+=l}var o=t/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),ZN=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(a[o]=l[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}})(),xp=function(e,t,r,a){function l(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function h(x){try{p(a.next(x))}catch(E){d(E)}}function g(x){try{p(a.throw(x))}catch(E){d(E)}}function p(x){x.done?o(x.value):l(x.value).then(h,g)}p((a=a.apply(e,t||[])).next())})},bp=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,l,o,d;return d={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(p){return function(x){return g([p,x])}}function g(p){if(a)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(r=0)),r;)try{if(a=1,l&&(o=p[0]&2?l.return:p[0]?l.throw||((o=l.return)&&o.call(l),0):l.next)&&!(o=o.call(l,p[1])).done)return o;switch(l=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],l=0}finally{a=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},FR=(function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var a={advanced:[r]};return this.track.applyConstraints(a)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e})(),eme=(function(e){ZN(t,e);function t(r,a){return e.call(this,r,a)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var a={};a[this.name]=r;var l={advanced:[a]};return this.track.applyConstraints(l)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),a=r[this.name];return{min:a.min,max:a.max,step:a.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(FR),tme=(function(e){ZN(t,e);function t(r){return e.call(this,"zoom",r)||this}return t})(eme),rme=(function(e){ZN(t,e);function t(r){return e.call(this,"torch",r)||this}return t})(FR),ame=(function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new tme(this.track)},e.prototype.torchFeature=function(){return new rme(this.track)},e})(),nme=(function(){function e(t,r,a){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=a,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var a=t.surface.clientWidth,l=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(a,l),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,a,l){return xp(this,void 0,void 0,function(){var o,d;return bp(this,function(h){switch(h.label){case 0:return o=new e(t,r,l),a.aspectRatio?(d={aspectRatio:a.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(d)]):[3,2];case 1:h.sent(),h.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,a=function(){setTimeout(t,200),r.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return xp(this,void 0,void 0,function(){return bp(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,a){var l=t.mediaStream.getVideoTracks(),o=l.length,d=0;t.mediaStream.getVideoTracks().forEach(function(h){t.mediaStream.removeTrack(h),h.stop(),++d,d>=o&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new ame(this.getFirstTrackOrFail())},e})(),sme=(function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,a){return xp(this,void 0,void 0,function(){return bp(this,function(l){return[2,nme.create(t,this.mediaStream,r,a)]})})},e.create=function(t){return xp(this,void 0,void 0,function(){var r,a;return bp(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return a=l.sent(),[2,new e(a)]}})})},e})(),i_=function(e,t,r,a){function l(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function h(x){try{p(a.next(x))}catch(E){d(E)}}function g(x){try{p(a.throw(x))}catch(E){d(E)}}function p(x){x.done?o(x.value):l(x.value).then(h,g)}p((a=a.apply(e,t||[])).next())})},o_=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,l,o,d;return d={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(p){return function(x){return g([p,x])}}function g(p){if(a)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(r=0)),r;)try{if(a=1,l&&(o=p[0]&2?l.return:p[0]?l.throw||((o=l.return)&&o.call(l),0):l.next)&&!(o=o.call(l,p[1])).done)return o;switch(l=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],l=0}finally{a=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},lme=(function(){function e(){}return e.failIfNotSupported=function(){return i_(this,void 0,void 0,function(){return o_(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return i_(this,void 0,void 0,function(){return o_(this,function(r){return[2,sme.create(t)]})})},e})(),ime=function(e,t,r,a){function l(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function h(x){try{p(a.next(x))}catch(E){d(E)}}function g(x){try{p(a.throw(x))}catch(E){d(E)}}function p(x){x.done?o(x.value):l(x.value).then(h,g)}p((a=a.apply(e,t||[])).next())})},ome=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,l,o,d;return d={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(p){return function(x){return g([p,x])}}function g(p){if(a)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(r=0)),r;)try{if(a=1,l&&(o=p[0]&2?l.return:p[0]?l.throw||((o=l.return)&&o.call(l),0):l.next)&&!(o=o.call(l,p[1])).done)return o;switch(l=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],l=0}finally{a=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},cme=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=zu.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=zu.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return ime(this,void 0,void 0,function(){var t,r,a,l,o,d,h;return ome(this,function(g){switch(g.label){case 0:return t=function(p){for(var x=p.getVideoTracks(),E=0,C=x;E<C.length;E++){var O=C[E];O.enabled=!1,O.stop(),p.removeTrack(O)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(a=g.sent(),l=[],o=0,d=a;o<d.length;o++)h=d[o],h.kind==="videoinput"&&l.push({id:h.deviceId,label:h.label});return t(r),[2,l]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var a=function(o){for(var d=[],h=0,g=o;h<g.length;h++){var p=g[h];p.kind==="video"&&d.push({id:p.id,label:p.label})}t(d)},l=MediaStreamTrack;l.getSources(a)})},e})(),oa;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(oa||(oa={}));var ume=(function(){function e(){this.state=oa.NOT_STARTED,this.onGoingTransactionNewState=oa.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===oa.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=oa.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===oa.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=oa.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==oa.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case oa.UNKNOWN:throw"Transition from unknown is not allowed";case oa.NOT_STARTED:this.failIfNewStateIs(t,[oa.PAUSED]);break;case oa.SCANNING:break;case oa.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var a=0,l=r;a<l.length;a++){var o=l[a];if(t===o)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e})(),dme=(function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===oa.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==oa.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===oa.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===oa.PAUSED},e})(),mme=(function(){function e(){}return e.create=function(){return new dme(new ume)},e})(),fme=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(a[o]=l[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}})(),ts=(function(e){fme(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})($de),hme=(function(){function e(t,r){this.logger=r,this.fps=ts.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=ts.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?BR.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!ii(this.qrbox)},e.create=function(t,r){return new e(t,r)},e})(),Dv=(function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var a;typeof r=="boolean"?this.verbose=r===!0:r&&(a=r,this.verbose=a.verbose===!0,a.experimentalFeatures),this.logger=new Gde(this.verbose),this.qrcode=new Jde(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(a),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=mme.create()}return e.prototype.start=function(t,r,a,l){var o=this;if(!t)throw"cameraIdOrConfig is required";if(!a||typeof a!="function")throw"qrCodeSuccessCallback is required and should be a function.";var d;l?d=l:d=this.verbose?this.logger.log:function(){};var h=hme.create(r,this.logger);this.clearElement();var g=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=g,x=document.getElementById(this.elementId);x.clientWidth?x.clientWidth:ts.DEFAULT_WIDTH,x.style.position="relative",this.shouldScan=!0,this.element=x;var E=this,C=this.stateManagerProxy.startTransition(oa.SCANNING);return new Promise(function(O,_){var P=p?h.videoConstraints:E.createVideoConstraints(t);if(!P){C.cancel(),_("videoConstraints should be defined");return}var k={};(!p||h.aspectRatio)&&(k.aspectRatio=h.aspectRatio);var I={onRenderSurfaceReady:function(F,R){E.setupUi(F,R,h),E.isScanning=!0,E.foreverScan(h,a,d)}};lme.failIfNotSupported().then(function(F){F.create(P).then(function(R){return R.render(o.element,k,I).then(function(Y){E.renderedCamera=Y,C.execute(),O(null)}).catch(function(Y){C.cancel(),_(Y)})}).catch(function(R){C.cancel(),_(zu.errorGettingUserMedia(R))})}).catch(function(F){C.cancel(),_(zu.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(oa.PAUSED),this.showPausedState(),(ii(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(oa.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(oa.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var a=function(){if(t.element){var o=document.getElementById(ts.SHADED_REGION_ELEMENT_ID);o&&t.element.removeChild(o)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),a(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),r.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(a){return a.decodedText})},e.prototype.scanFileV2=function(t,r){var a=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ii(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,o){a.possiblyCloseLastScanImageFile(),a.clearElement(),a.lastScanImageFile=URL.createObjectURL(t);var d=new Image;d.onload=function(){var h=d.width,g=d.height,p=document.getElementById(a.elementId),x=p.clientWidth?p.clientWidth:ts.DEFAULT_WIDTH,E=Math.max(p.clientHeight?p.clientHeight:g,ts.FILE_SCAN_MIN_HEIGHT),C=a.computeCanvasDrawConfig(h,g,x,E);if(r){var O=a.createCanvasElement(x,E,"qr-canvas-visible");O.style.display="inline-block",p.appendChild(O);var _=O.getContext("2d");if(!_)throw"Unable to get 2d context from canvas";_.canvas.width=x,_.canvas.height=E,_.drawImage(d,0,0,h,g,C.x,C.y,C.width,C.height)}var P=ts.FILE_SCAN_HIDDEN_CANVAS_PADDING,k=Math.max(d.width,C.width),I=Math.max(d.height,C.height),F=k+2*P,R=I+2*P,Y=a.createCanvasElement(F,R);p.appendChild(Y);var j=Y.getContext("2d");if(!j)throw"Unable to get 2d context from canvas";j.canvas.width=F,j.canvas.height=R,j.drawImage(d,0,0,h,g,P,P,k,I);try{a.qrcode.decodeRobustlyAsync(Y).then(function(z){l(t_.createFromQrcodeResult(z))}).catch(o)}catch(z){o("QR code parse error, error = ".concat(z))}},d.onerror=o,d.onabort=o,d.onstalled=o,d.onsuspend=o,d.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return cme.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!BR.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[dt.QR_CODE,dt.AZTEC,dt.CODABAR,dt.CODE_39,dt.CODE_93,dt.CODE_128,dt.DATA_MATRIX,dt.MAXICODE,dt.ITF,dt.EAN_13,dt.EAN_8,dt.PDF_417,dt.RSS_14,dt.RSS_EXPANDED,dt.UPC_A,dt.UPC_E,dt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var a=[],l=0,o=t.formatsToSupport;l<o.length;l++){var d=o[l];Hde(d)?a.push(d):this.logger.warn("Invalid format: ".concat(d," passed in config, ignoring."))}if(a.length===0)throw"None of formatsToSupport match supported values.";return a},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(ii(t))return!0;if(!ii(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(ii(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return ii(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,a){var l=this,o=a.qrbox;this.validateQrboxConfig(o);var d=this.toQrdimensions(t,r,o),h=function(p){if(p<ts.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ts.MIN_QR_BOX_SIZE,"px.")},g=function(p){return p>t&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=t),p};h(d.width),h(d.height),d.width=g(d.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,a){if(typeof a=="number")return{width:a,height:a};if(typeof a=="function")try{return a(t,r)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return a},e.prototype.setupUi=function(t,r,a){a.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,a);var l=ii(a.qrbox)?{width:t,height:r}:a.qrbox;this.validateQrboxConfig(l);var o=this.toQrdimensions(t,r,l);o.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=a.isShadedBoxEnabled()&&o.height<=r,h={x:0,y:0,width:t,height:r},g=d?this.getShadedRegionBounds(t,r,o):h,p=this.createCanvasElement(g.width,g.height),x={willReadFrequently:!0},E=p.getContext("2d",x);E.canvas.width=g.width,E.canvas.height=g.height,this.element.append(p),d&&this.possiblyInsertShadingElement(this.element,t,r,o),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=E,this.canvasElement=p},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=zu.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var a=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return t(l.text,t_.createFromQrcodeResult(l)),a.possiblyUpdateShaders(!0),!0}).catch(function(l){a.possiblyUpdateShaders(!1);var o=zu.codeParseError(l);return r(o,qde.createFrom(o)),!1})},e.prototype.foreverScan=function(t,r,a){var l=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),d=o.videoWidth/o.clientWidth,h=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*d,p=this.qrRegion.height*h,x=this.qrRegion.x*d,E=this.qrRegion.y*h;this.context.drawImage(o,x,E,g,p,0,0,this.qrRegion.width,this.qrRegion.height);var C=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(t,r,a)},l.getTimeoutFps(t.fps))};this.scanContext(r,a).then(function(O){!O&&t.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(r,a).finally(function(){C()})):C()}).catch(function(O){l.logger.logError("Error happend while scanning context",O),C()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",a="deviceId",l={user:!0,environment:!0},o="exact",d=function(_){if(_ in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(_,"'")},h=Object.keys(t);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var g=Object.keys(t)[0];if(g!==r&&g!==a)throw"Only '".concat(r,"' and '").concat(a,"' ")+" are supported for 'cameraIdOrConfig'";if(g===r){var p=t.facingMode;if(typeof p=="string"){if(d(p))return{facingMode:p}}else if(typeof p=="object")if(o in p){if(d(p["".concat(o)]))return{facingMode:{exact:p["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var x=typeof p;throw"Invalid type of 'facingMode' = ".concat(x)}}else{var E=t.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(o in E)return{deviceId:{exact:E["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var C=typeof E;throw"Invalid type of 'deviceId' = ".concat(C)}}}var O=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(O)},e.prototype.computeCanvasDrawConfig=function(t,r,a,l){if(t<=a&&r<=l){var o=(a-t)/2,d=(l-r)/2;return{x:o,y:d,width:t,height:r}}else{var h=t,g=r;return t>a&&(r=a/t*r,t=a),r>l&&(t=l/r*t,r=l),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(g)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,a,l)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?ts.BORDER_SHADER_MATCH_COLOR:ts.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,a){var l=t,o=r,d=document.createElement("canvas");return d.style.width="".concat(l,"px"),d.style.height="".concat(o,"px"),d.style.display="none",d.id=ii(a)?"qr-canvas":a,d},e.prototype.getShadedRegionBounds=function(t,r,a){if(a.width>t||a.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-a.width)/2,y:(r-a.height)/2,width:a.width,height:a.height}},e.prototype.possiblyInsertShadingElement=function(t,r,a,l){if(!(r-l.width<1||a-l.height<1)){var o=document.createElement("div");o.style.position="absolute";var d=(r-l.width)/2,h=(a-l.height)/2;if(o.style.borderLeft="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(ts.SHADED_REGION_ELEMENT_ID),r-l.width<11||a-l.height<11)this.hasBorderShaders=!1;else{var g=5,p=40;this.insertShaderBorders(o,p,g,-g,null,0,!0),this.insertShaderBorders(o,p,g,-g,null,0,!1),this.insertShaderBorders(o,p,g,null,-g,0,!0),this.insertShaderBorders(o,p,g,null,-g,0,!1),this.insertShaderBorders(o,g,p+g,-g,null,-g,!0),this.insertShaderBorders(o,g,p+g,null,-g,-g,!0),this.insertShaderBorders(o,g,p+g,-g,null,-g,!1),this.insertShaderBorders(o,g,p+g,null,-g,-g,!1),this.hasBorderShaders=!0}t.append(o)}},e.prototype.insertShaderBorders=function(t,r,a,l,o,d,h){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=ts.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(r,"px"),g.style.height="".concat(a,"px"),l!==null&&(g.style.top="".concat(l,"px")),o!==null&&(g.style.bottom="".concat(o,"px")),h?g.style.left="".concat(d,"px"):g.style.right="".concat(d,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),t.appendChild(g)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e})(),c_;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(c_||(c_={}));class gme extends N.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Scanner Error:",t,r)}render(){return this.state.hasError?n.createElement("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-center"},n.createElement("p",{className:"text-red-800 font-semibold"},"Scanner Error"),n.createElement("p",{className:"text-sm text-red-600 mt-2"},"Please refresh the page to try again."),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"},"Refresh Page")):this.props.children}}const UR=N.memo(({scannerContainerId:e})=>{const t=N.useRef(null),r=N.useRef(null);return N.useEffect(()=>(console.log("[ScannerContainer] Mounted ONCE",{scannerContainerId:e,containerExists:!!document.getElementById(e)}),()=>{console.log("[ScannerContainer] Unmounting (should only happen on page leave)",{scannerContainerId:e})}),[e]),n.createElement("div",{id:e,ref:t,className:"relative w-full aspect-square max-w-[90vw] sm:max-w-lg lg:max-w-xl mx-auto rounded-xl overflow-hidden bg-gray-100 border-2 border-dashed border-gray-300",style:{minHeight:"min(80vw, 400px)"}},n.createElement("div",{ref:r,"data-placeholder":"true",className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500 p-4 z-10 bg-gray-100"},n.createElement(lP,{className:"w-10 h-10 sm:w-12 sm:h-12 mb-3"}),n.createElement("p",{className:"text-sm font-medium text-center"},"Camera Preview"),n.createElement("p",{className:"text-xs text-gray-400 mt-1 text-center"},"Tap the button below to start scanning")))},()=>!0);UR.displayName="ScannerContainer";function pme(){const[e,t]=N.useState(!1),[r,a]=N.useState(null),[l,o]=N.useState("unknown"),[d,h]=N.useState([]),[g,p]=N.useState(null),[x,E]=N.useState(!1),[C,O]=N.useState([]),[_,P]=N.useState(""),[k,I]=N.useState(!0),[F,R]=N.useState(!1),[Y,j]=N.useState(null),[z,L]=N.useState(!1),[q,V]=N.useState(null),[W,H]=N.useState(!1),$=N.useRef(null),ce=N.useRef(`qr-scanner-${Date.now()}`).current,me=N.useRef(!1),ae=N.useRef(!0),J=N.useRef(0);N.useEffect(()=>{console.log("[ScanQR] State changed:",{isScanning:e,isLoading:x,permissionStatus:l,availableCameras:d.length,hasScanner:!!$.current})},[e,x,l,d]),N.useEffect(()=>{console.log("[ScanQR] Component mounted",{scannerContainerId:ce});const ve=window.location.protocol==="https:"||window.location.hostname==="localhost";I(ve);const Ue=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return R(Ue),ae.current=!0,()=>{if(console.log("[ScanQR] Component unmounting",{scannerContainerId:ce,hasScanner:!!$.current,isCleaningUp:me.current}),ae.current=!1,$.current&&!me.current){me.current=!0;const oe=$.current;try{const qe=oe.getState();console.log("[ScanQR] Unmount cleanup - scanner state:",qe),qe===2&&oe.stop().catch(Ne=>{console.log("[ScanQR] Unmount stop error:",Ne.message)})}catch(qe){console.log("[ScanQR] Unmount cleanup error:",qe.message)}$.current=null,setTimeout(()=>{const qe=document.getElementById(ce);console.log("[ScanQR] Clearing container after unmount:",{containerExists:!!qe,children:qe?.children.length||0}),qe&&(qe.innerHTML="")},0)}}},[ce]);const se=async()=>{try{const ve=await Dv.getCameras();if(ve&&ve.length>0){h(ve);const Ue=ve.find(oe=>{const qe=oe.label.toLowerCase();return qe.includes("back")||qe.includes("rear")||qe.includes("environment")||qe.includes("0")});return p(Ue?.id||ve[0].id),o("granted"),!0}else return P("No cameras found on this device."),o("error"),!1}catch(ve){return console.error("Error getting cameras:",ve),Ee(ve),!1}},Ee=ve=>{console.error("Camera error:",ve);const Ue=ve.name||"",oe=ve.message||"";Ue==="NotAllowedError"||oe.includes("Permission")?(o("denied"),P(F?"Camera permission denied. On mobile, please go to your browser settings, find this site, and allow camera access.":"Camera permission was denied. Please allow camera access in your browser settings.")):Ue==="NotFoundError"||oe.includes("not found")?(o("error"),P("No camera found on this device.")):Ue==="NotReadableError"||oe.includes("in use")?(o("error"),P("Camera is already in use by another application. Please close other apps using the camera.")):Ue==="SecurityError"?(o("error"),P("Camera access blocked due to security settings. Please use HTTPS.")):Ue==="AbortError"?(o("error"),P("Camera access was interrupted. Please try again.")):(o("error"),P(oe||"Failed to access camera. Please try again."))},we=async()=>{if(E(!0),o("checking"),P(""),F&&!k)return o("error"),P("Camera access requires HTTPS on mobile devices. Please access this site via HTTPS."),E(!1),!1;if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return o("error"),P("Your browser does not support camera access. Please try a different browser."),E(!1),!1;try{let ve;try{ve=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}}})}catch(oe){console.log("Environment camera failed, trying any camera:",oe),ve=await navigator.mediaDevices.getUserMedia({video:!0})}return ve.getTracks().forEach(oe=>oe.stop()),await se()?(Et.success("Camera access granted!"),!0):!1}catch(ve){return console.error("Camera permission error:",ve),Ee(ve),ve.name==="NotAllowedError"?Et.error("Camera permission denied."):Et.error("Failed to access camera."),!1}finally{E(!1)}},te=async()=>{if(console.log("[startScanner] Called",{availableCameras:d.length,isScanning:e,isLoading:x,hasExistingScanner:!!$.current}),d.length===0){if(!await we())return;await new Promise(Ue=>setTimeout(Ue,100))}E(!0),a(null);try{const ve=document.getElementById(ce);if(console.log("[startScanner] Container check",{containerExists:!!ve,containerChildren:ve?.children.length||0,containerHTML:ve?.innerHTML.substring(0,100)}),!ve){Et.error("Scanner container not ready. Please try again."),E(!1);return}$.current&&!me.current&&(console.log("[startScanner] Stopping existing scanner"),await K(),await new Promise(it=>setTimeout(it,300)));const Ue=ve.querySelectorAll("video, canvas, #qr-shaded-region");if(console.log("[startScanner] Clearing leftover elements",{count:Ue.length,types:Array.from(Ue).map(it=>it.tagName)}),Ue.forEach(it=>{try{it.parentNode===ve&&(console.log("[startScanner] Removing element:",it.tagName,it.id),it.remove())}catch(pt){console.log("[startScanner] Error removing leftover element:",pt.message)}}),!ae.current){console.log("[startScanner] Component unmounted, aborting"),E(!1);return}console.log("[startScanner] Creating new Html5Qrcode instance");const oe=new Dv(ce);$.current=oe;const qe={fps:10,qrbox:F?{width:200,height:200}:{width:250,height:250},aspectRatio:1,disableFlip:!1},Ne=g||{facingMode:"environment"};if(console.log("[startScanner] Starting scanner with config",{cameraConfig:Ne,config:qe}),await oe.start(Ne,qe,Ce,ie),console.log("[startScanner] Scanner started successfully",{containerChildren:ve.children.length,hasVideo:!!ve.querySelector("video"),hasCanvas:!!ve.querySelector("canvas")}),!ae.current){console.log("[startScanner] Component unmounted after start, stopping"),await oe.stop().catch(()=>{});return}const tt=ve.querySelector('[data-placeholder="true"]');tt&&(console.log("[startScanner] Hiding placeholder via DOM"),tt.style.display="none"),ve.classList.remove("bg-gray-100"),ve.classList.add("bg-black"),J.current=0,t(!0),o("granted"),Et.info("Scanner started. Point camera at a QR code."),console.log("[startScanner]  Scanner ready - point camera at QR code")}catch(ve){if(console.error("Error starting scanner:",ve),g&&ve.message?.includes("Unable to start"))try{const Ue=new Dv(ce);$.current=Ue,await Ue.start({facingMode:"environment"},{fps:10,qrbox:{width:200,height:200}},Ce,ie),t(!0),o("granted"),Et.info("Scanner started.");return}catch(Ue){console.error("Fallback also failed:",Ue)}Ee(ve),Et.error("Failed to start scanner.")}finally{E(!1)}},K=async()=>{if(console.log("[stopScanner] Called",{hasScanner:!!$.current,isCleaningUp:me.current,isMounted:ae.current}),!$.current||me.current){console.log("[stopScanner] Early return - no scanner or already cleaning"),t(!1);return}me.current=!0;try{const ve=$.current,Ue=ve.getState();console.log("[stopScanner] Scanner state:",Ue),Ue===2&&(console.log("[stopScanner] Stopping scanner..."),await ve.stop(),console.log("[stopScanner] Scanner stopped successfully"),ae.current&&await new Promise(oe=>setTimeout(oe,200)))}catch(ve){console.error("[stopScanner] Error stopping scanner:",ve);try{const Ue=document.getElementById(ce);if(Ue){const oe=Ue.querySelector("video");oe&&oe.srcObject&&(console.log("[stopScanner] Manually stopping video tracks"),oe.srcObject.getTracks().forEach(qe=>qe.stop()))}}catch(Ue){console.log("[stopScanner] Could not stop video tracks:",Ue.message)}}finally{console.log("[stopScanner] Cleanup - setting refs to null"),$.current=null,me.current=!1;const ve=document.getElementById(ce);if(ve){const Ue=ve.querySelector('[data-placeholder="true"]');Ue&&(console.log("[stopScanner] Showing placeholder via DOM"),Ue.style.display="flex"),ve.classList.remove("bg-black"),ve.classList.add("bg-gray-100")}ae.current&&t(!1)}},ee=async ve=>{const{enrollmentId:Ue,eventId:oe,phone:qe,userId:Ne}=ve,tt=new URLSearchParams({enrollmentId:Ue,eventId:oe,phone:qe,...Ne&&{userId:Ne}}),it=await fetch(`https://motivata.synquic.com/api/app/tickets/qr-scan?${tt}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),pt=await it.json();if(console.log("[validateRegularTicket] API Response:",pt),!it.ok){const We=pt.message?.toLowerCase().includes("already been scanned");let lt=null;if(We&&pt.message){const Fe=pt.message.match(/scanned at (.+)$/i);Fe&&Fe[1]&&(lt=Fe[1])}return{...pt,status:it.status,ticketType:"regular",data:{...pt.data,isValid:!We,isAlreadyScanned:We,scannedAt:lt}}}return{...pt,status:it.status,ticketType:"regular",data:{...pt.data,isValid:!0,isAlreadyScanned:!1}}},ge=async ve=>{const{enrollmentId:Ue,eventId:oe,phone:qe,userId:Ne}=ve,tt=new URLSearchParams({enrollmentId:Ue,eventId:oe,phone:qe,...Ne&&{userId:Ne}}),it=await fetch(`https://motivata.synquic.com/api/app/tickets/cash/qr-scan?${tt}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),pt=await it.json();return console.log("[validateCashTicket] API Response:",pt),{...pt,status:it.status,ticketType:"cash"}},le=async ve=>{H(!0);try{console.log("[validateTicket] Trying regular ticket endpoint...");const Ue=await ee(ve);return Ue.status===200||Ue.data?.isAlreadyScanned?(console.log("[validateTicket] Regular ticket validated"),Ue):Ue.status===404?(console.log("[validateTicket] Regular ticket not found, trying cash ticket..."),await ge(ve)):Ue}catch(Ue){return console.error("[validateTicket] API Error:",Ue),{status:500,message:"Failed to validate ticket",error:Ue.message,data:null}}finally{H(!1)}},Ce=async(ve,Ue)=>{console.log("[onScanSuccess] QR Code scanned:",ve),a(ve);let oe=null;try{const pt=new URL(ve),We={};pt.searchParams.forEach((lt,Fe)=>{We[Fe]=lt}),oe={type:"url",fullUrl:ve,protocol:pt.protocol,host:pt.host,pathname:pt.pathname,parameters:We,hash:pt.hash||null},console.log("[onScanSuccess]  URL detected!"),console.log("[onScanSuccess] Full URL:",ve),console.log("[onScanSuccess] Protocol:",pt.protocol),console.log("[onScanSuccess] Host:",pt.host),console.log("[onScanSuccess] Pathname:",pt.pathname),console.log("[onScanSuccess] Parameters:",We),Object.keys(We).length>0?(console.log("[onScanSuccess]  Extracted Parameters:"),Object.entries(We).forEach(([lt,Fe])=>{console.log(`   ${lt}: ${Fe}`)})):console.log("[onScanSuccess]  No parameters found in URL"),pt.hash&&console.log("[onScanSuccess] Hash:",pt.hash)}catch{console.log("[onScanSuccess]  Not a URL, just plain text:",ve),oe={type:"text",text:ve}}j(oe);let qe=null;const Ne=oe.parameters||{},tt=Ne.enrollmentId||Ne.id,it=tt&&Ne.eventId&&Ne.phone;oe.type==="url"&&it?(console.log("[onScanSuccess] Validating ticket with API...",{enrollmentId:tt,eventId:Ne.eventId,phone:Ne.phone,userId:Ne.userId}),Et.info(" Validating ticket..."),qe=await le({enrollmentId:tt,eventId:Ne.eventId,phone:Ne.phone,userId:Ne.userId}),console.log("[onScanSuccess] Full API Response:",JSON.stringify(qe,null,2)),V(qe),qe.status===200||qe.data?.isAlreadyScanned?(console.log("[onScanSuccess] API Data:",{message:qe.message,isValid:qe.data?.isValid,isAlreadyScanned:qe.data?.isAlreadyScanned,ticketType:qe.ticketType,enrollment:qe.data?.enrollment?.name}),qe.data?.isAlreadyScanned===!0?(console.log("[onScanSuccess]  Ticket already scanned!"),Et.warning(" This ticket was already scanned!",{autoClose:5e3}),navigator.vibrate&&navigator.vibrate([100,50,100,50,100]),L(!0)):qe.data?.isValid===!0?(console.log("[onScanSuccess]  First time scan - Valid!"),Et.success(" Ticket Verified - First Scan!"),navigator.vibrate&&navigator.vibrate([200,100,200]),L(!0)):(console.log("[onScanSuccess]  Invalid ticket!"),Et.error(" Invalid Ticket!"),navigator.vibrate&&navigator.vibrate([300,100,300]),L(!1))):(console.log("[onScanSuccess]  API Error or Invalid Response"),Et.error(" Failed to validate ticket!"),navigator.vibrate&&navigator.vibrate([300,100,300]),L(!1))):(L(!0),Et.success(" QR Code Scanned!"),navigator.vibrate&&navigator.vibrate([200,100,200])),O(pt=>[{text:ve,timestamp:new Date,format:Ue?.result?.format?.formatName||"QR_CODE"},...pt.slice(0,9)]),K()},ie=ve=>{J.current+=1,J.current%10===0&&console.log(`[onScanFailure] Scanner active, attempts: ${J.current}`),ve&&!ve.includes("No MultiFormat Readers")&&!ve.includes("NotFoundException")&&console.log("[onScanFailure] Error:",ve)},de=async()=>{if(d.length<=1)return;const Ue=(d.findIndex(qe=>qe.id===g)+1)%d.length,oe=d[Ue];await K(),p(oe.id),setTimeout(()=>te(),200),Et.info(`Switched to ${oe.label||"Camera "+(Ue+1)}`)},$e=async ve=>{try{await navigator.clipboard.writeText(ve),Et.success("Copied to clipboard!")}catch{try{const oe=document.createElement("textarea");oe.value=ve,document.body.appendChild(oe),oe.select(),document.execCommand("copy"),document.body.removeChild(oe),Et.success("Copied to clipboard!")}catch{Et.error("Failed to copy")}}},be=ve=>{try{return new URL(ve),!0}catch{return!1}},Xe=ve=>{be(ve)?window.open(ve,"_blank","noopener,noreferrer"):$e(ve)},at=l==="denied"||l==="error",Le=!at;return n.createElement("div",{className:"space-y-4 sm:space-y-6"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},n.createElement("div",null,n.createElement("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 tracking-tight"},"Scan QR Code"),n.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Scan QR codes using your device camera"))),F&&!k&&n.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex items-start gap-3"},n.createElement(U4,{className:"w-6 h-6 text-yellow-600 shrink-0 mt-0.5"}),n.createElement("div",null,n.createElement("h3",{className:"font-semibold text-yellow-800"},"HTTPS Required"),n.createElement("p",{className:"text-sm text-yellow-700 mt-1"},"Camera access on mobile requires a secure connection (HTTPS). Please access this site via HTTPS to use the scanner."))),n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6"},n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6"},n.createElement("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},n.createElement(fh,{className:"w-6 h-6 text-blue-600"}),"Scanner"),at&&n.createElement("div",{className:"text-center py-6 sm:py-8"},n.createElement("div",{className:`w-14 h-14 sm:w-16 sm:h-16 ${l==="denied"?"bg-red-100":"bg-orange-100"} rounded-full flex items-center justify-center mx-auto mb-4`},n.createElement(gY,{className:`w-7 h-7 sm:w-8 sm:h-8 ${l==="denied"?"text-red-500":"text-orange-500"}`})),n.createElement("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-2"},l==="denied"?"Camera Access Denied":"Camera Error"),n.createElement("p",{className:"text-gray-600 mb-4 text-sm max-w-sm mx-auto px-2"},_||"Unable to access camera. Please check your permissions and try again."),n.createElement("button",{onClick:we,disabled:x||F&&!k,className:"px-5 sm:px-6 py-2.5 sm:py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-2 mx-auto text-sm sm:text-base"},x?n.createElement(n.Fragment,null,n.createElement("div",{className:"w-4 h-4 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.createElement("span",null,"Requesting...")):n.createElement(n.Fragment,null,n.createElement(lP,{className:"w-4 h-4"}),n.createElement("span",null,"Request Camera Access"))),l==="denied"&&n.createElement("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg max-w-xs mx-auto"},n.createElement("p",{className:"text-xs text-gray-600"},F?"Go to your browser settings  Site settings  Camera  Allow for this site.":"Click the camera icon in your browser's address bar to allow access."))),Le&&n.createElement(gme,null,n.createElement("div",{className:"space-y-4"},n.createElement(UR,{scannerContainerId:ce}),n.createElement("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-3"},e?n.createElement(n.Fragment,null,n.createElement("button",{onClick:K,className:"flex items-center gap-2 px-5 sm:px-6 py-2.5 sm:py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm sm:text-base"},n.createElement(fV,{className:"w-5 h-5"}),n.createElement("span",null,"Stop")),d.length>1&&n.createElement("button",{onClick:de,className:"flex items-center gap-2 px-4 py-2.5 sm:py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm sm:text-base",title:"Switch Camera"},n.createElement(uV,{className:"w-5 h-5"}),n.createElement("span",{className:"hidden sm:inline"},"Switch Camera"))):n.createElement("button",{onClick:te,disabled:x||F&&!k,className:"flex items-center gap-2 px-5 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all disabled:opacity-50 shadow-lg shadow-blue-500/30 text-sm sm:text-base"},x?n.createElement(n.Fragment,null,n.createElement("div",{className:"w-4 h-4 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.createElement("span",null,"Starting...")):n.createElement(n.Fragment,null,n.createElement(fh,{className:"w-5 h-5"}),n.createElement("span",null,"Start Scanner")))),d.length>1&&!e&&n.createElement("div",{className:"flex items-center justify-center gap-2"},n.createElement("label",{className:"text-sm text-gray-600"},"Camera:"),n.createElement("select",{value:g||"",onChange:ve=>p(ve.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 max-w-[200px]"},d.map((ve,Ue)=>n.createElement("option",{key:ve.id,value:ve.id},ve.label||`Camera ${Ue+1}`))))))),n.createElement("div",{className:"space-y-4 sm:space-y-6"},z&&Y&&(()=>{const ve=q?.data?.isAlreadyScanned===!0;return n.createElement("div",{className:`rounded-xl shadow-lg border-2 p-6 sm:p-8 ${ve?"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-400":"bg-gradient-to-br from-green-50 to-emerald-50 border-green-300"}`},n.createElement("div",{className:"text-center mb-6"},ve?n.createElement(n.Fragment,null,n.createElement("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-yellow-500 rounded-full mb-4 animate-pulse"},n.createElement(U4,{className:"w-12 h-12 text-white"})),n.createElement("h2",{className:"text-2xl sm:text-3xl font-bold text-yellow-800 mb-2"}," ALREADY SCANNED"),n.createElement("p",{className:"text-yellow-700 font-medium"},"This ticket was previously scanned"),q.data.scannedAt&&n.createElement("p",{className:"text-sm text-yellow-600 mt-2"},"Previously scanned: ",new Date(q.data.scannedAt).toLocaleString())):n.createElement(n.Fragment,null,n.createElement("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-500 rounded-full mb-4 animate-pulse"},n.createElement(Ku,{className:"w-12 h-12 text-white"})),n.createElement("h2",{className:"text-2xl sm:text-3xl font-bold text-green-800 mb-2"}," VERIFIED - FIRST SCAN"),n.createElement("p",{className:"text-green-700 font-medium"},"Person is Allowed & Authenticated"))),q?.data&&(q.data.user||q.data.enrollment)&&(()=>{const Ue=q.ticketType==="cash",oe=Ue?q.data.enrollment?.name:q.data.user?.name,qe=Ue?q.data.enrollment?.phone:q.data.ticket?.phone||q.data.user?.phone,Ne=Ue?q.data.enrollment?.event:q.data.event;return n.createElement("div",{className:"bg-white rounded-lg p-4 sm:p-6 mb-4 shadow-sm"},n.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},n.createElement(Ku,{className:"w-5 h-5 text-blue-600"}),"Attendee Information",q.ticketType&&n.createElement("span",{className:"text-xs font-normal bg-gray-100 px-2 py-1 rounded"},q.ticketType==="cash"?"Cash Ticket":"Online Ticket")),n.createElement("div",{className:"space-y-3"},oe&&n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-blue-50 rounded-lg"},n.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Name:"),n.createElement("span",{className:"text-base sm:text-lg font-bold text-gray-900 bg-white px-4 py-2 rounded border border-blue-200"},oe)),qe&&n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg"},n.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Phone:"),n.createElement("span",{className:"text-sm sm:text-base font-mono text-gray-900 bg-white px-3 py-1 rounded border border-gray-200"},qe)),Ne&&n.createElement(n.Fragment,null,n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg"},n.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Event:"),n.createElement("span",{className:"text-sm sm:text-base font-semibold text-gray-900 bg-white px-3 py-1 rounded border border-gray-200"},Ne.name)),Ne.startDate&&Ne.endDate&&n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg"},n.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Event Date:"),n.createElement("span",{className:"text-xs sm:text-sm text-gray-900 bg-white px-3 py-1 rounded border border-gray-200"},new Date(Ne.startDate).toLocaleDateString()," - ",new Date(Ne.endDate).toLocaleDateString())))))})(),q?.data&&(q.data.voucher?n.createElement("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 sm:p-6 mb-4 shadow-sm border border-purple-200"},n.createElement("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2"},n.createElement(B4,{className:"w-5 h-5 text-purple-600"}),"Redeemed Voucher"),n.createElement("div",{className:"space-y-3"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-white rounded-lg border border-purple-100"},n.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Voucher Code:"),n.createElement("span",{className:"text-base sm:text-lg font-bold text-purple-700 bg-purple-100 px-4 py-2 rounded border border-purple-200 font-mono"},q.data.voucher.code)),q.data.voucher.title&&n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-white rounded-lg border border-purple-100"},n.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Title:"),n.createElement("span",{className:"text-sm sm:text-base font-semibold text-gray-900"},q.data.voucher.title)),q.data.voucher.description&&n.createElement("div",{className:"p-3 bg-white rounded-lg border border-purple-100"},n.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide block mb-2"},"Description:"),n.createElement("p",{className:"text-sm text-gray-700"},q.data.voucher.description)))):n.createElement("div",{className:"bg-gray-50 rounded-lg p-4 sm:p-6 mb-4 shadow-sm border border-gray-200"},n.createElement("div",{className:"flex items-center gap-3"},n.createElement(B4,{className:"w-6 h-6 text-gray-400"}),n.createElement("div",null,n.createElement("h3",{className:"text-base font-semibold text-gray-600"},"No Food Voucher"),n.createElement("p",{className:"text-sm text-gray-500"},"This attendee has not redeemed any voucher"))))),!q?.data?.enrollment&&!q?.data?.user&&Y.type==="url"&&Object.keys(Y.parameters).length>0&&n.createElement("div",{className:"bg-white rounded-lg p-4 sm:p-6 mb-4 shadow-sm"},n.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},n.createElement(Tx,{className:"w-5 h-5 text-blue-600"}),"Ticket Information"),n.createElement("div",{className:"space-y-3"},Object.entries(Y.parameters).map(([Ue,oe])=>n.createElement("div",{key:Ue,className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},n.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},Ue.replace(/_/g," "),":"),n.createElement("span",{className:"text-sm sm:text-base font-mono text-gray-900 bg-white px-3 py-1 rounded border border-gray-200"},oe))))),Y.type==="url"&&n.createElement("div",{className:"bg-blue-50 rounded-lg p-4 mb-4"},n.createElement("p",{className:"text-xs text-blue-700 font-semibold mb-1"},"SCANNED URL:"),n.createElement("p",{className:"text-sm text-blue-900 break-all font-mono"},Y.fullUrl)),Y.type==="text"&&n.createElement("div",{className:"bg-white rounded-lg p-4 sm:p-6 mb-4 shadow-sm"},n.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-3"},"Scanned Content:"),n.createElement("p",{className:"text-gray-900 break-all font-mono text-sm bg-gray-50 p-3 rounded border border-gray-200"},Y.text)),n.createElement("div",{className:"flex flex-wrap gap-3 justify-center"},n.createElement("button",{onClick:()=>{a(null),j(null),L(!1),V(null),te()},className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all shadow-md hover:shadow-lg font-semibold"},n.createElement(fh,{className:"w-5 h-5"}),"Scan Next Person"),n.createElement("button",{onClick:()=>$e(r),className:"flex items-center gap-2 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors shadow-md"},n.createElement(Tx,{className:"w-5 h-5"}),"Copy Data")))})(),n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6"},n.createElement("h2",{className:"text-lg font-bold text-gray-900 mb-4"},"Scan History"),C.length===0?n.createElement("div",{className:"text-center py-6 sm:py-8 text-gray-500"},n.createElement(fh,{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-2 opacity-30"}),n.createElement("p",{className:"text-sm"},"No scans yet. Start scanning to see history.")):n.createElement("div",{className:"space-y-2 sm:space-y-3 max-h-60 sm:max-h-80 overflow-y-auto"},C.map((ve,Ue)=>n.createElement("div",{key:Ue,className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer group active:bg-gray-200",onClick:()=>Xe(ve.text)},n.createElement("div",{className:"flex items-start justify-between gap-2"},n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("p",{className:"text-sm text-gray-900 break-all font-mono truncate group-hover:text-blue-600"},ve.text),n.createElement("p",{className:"text-xs text-gray-500 mt-1"},ve.timestamp.toLocaleTimeString(),"  ",ve.format)),n.createElement("button",{onClick:oe=>{oe.stopPropagation(),$e(ve.text)},className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded transition-colors"},n.createElement(Tx,{className:"w-4 h-4"}))))))),n.createElement("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200"},n.createElement("h3",{className:"font-semibold text-blue-900 mb-2"},"Tips for better scanning:"),n.createElement("ul",{className:"text-sm text-blue-800 space-y-1"},n.createElement("li",null," Hold your device steady"),n.createElement("li",null," Ensure good lighting"),n.createElement("li",null," Position QR code within the frame"),n.createElement("li",null," Keep the QR code flat and clear"),F&&n.createElement("li",null," Try switching to back camera if using front"))))))}const yme=async(e,t={})=>ze(je.get(`/web/tickets/reshare/list/${e}`,{params:{page:t.page||1,limit:t.limit||20,search:t.search||void 0,enrollmentType:t.enrollmentType||void 0,scannedStatus:t.scannedStatus||void 0}})),xme=async(e,t,r={})=>ze(je.post(`/web/tickets/reshare/${e}/${t}`,{phone:r.phone,sendVia:r.sendVia||"both"})),bme=async(e,t="whatsapp")=>ze(je.post("/web/tickets/reshare/bulk",{tickets:e,sendVia:t})),vme=async()=>ze(je.get("/web/events")),u_=[{value:"",label:"All Types"},{value:"ONLINE",label:"Online"},{value:"CASH",label:"Cash"}],d_=[{value:"",label:"All Status"},{value:"false",label:"Not Scanned"},{value:"true",label:"Scanned"}],m_=[{value:"both",label:"WhatsApp & Email"},{value:"whatsapp",label:"WhatsApp Only"},{value:"email",label:"Email Only"}],Eme=()=>{const[e,t]=N.useState([]),[r,a]=N.useState(""),[l,o]=N.useState(null),[d,h]=N.useState([]),[g,p]=N.useState(null),[x,E]=N.useState(!1),[C,O]=N.useState(!0),[_,P]=N.useState({currentPage:1,totalPages:1,totalCount:0,limit:20}),[k,I]=N.useState({search:"",enrollmentType:"",scannedStatus:""}),[F,R]=N.useState([]),[Y,j]=N.useState(!1),[z,L]=N.useState({}),[q,V]=N.useState(!1);N.useEffect(()=>{W()},[]),N.useEffect(()=>{r?H():(h([]),p(null),o(null))},[r,_.currentPage,k]),N.useEffect(()=>{R([]),j(!1)},[d]);const W=async()=>{O(!0);try{const ee=await vme();if(ee.success){const ge=ee.data?.events||ee.data||[];t(Array.isArray(ge)?ge:[])}else Et.error(ee.message||"Failed to load events")}catch(ee){console.error("Error fetching events:",ee),Et.error("Failed to load events")}finally{O(!1)}},H=N.useCallback(async()=>{if(r){E(!0);try{const ee=await yme(r,{page:_.currentPage,limit:_.limit,search:k.search||void 0,enrollmentType:k.enrollmentType||void 0,scannedStatus:k.scannedStatus||void 0});ee.success?(h(ee.data.ticketHolders||[]),o(ee.data.event||null),p(ee.data.statistics||null),P(ge=>({...ge,...ee.data.pagination}))):(Et.error(ee.message||"Failed to load ticket holders"),h([]))}catch(ee){console.error("Error fetching ticket holders:",ee),Et.error("Failed to load ticket holders"),h([])}finally{E(!1)}}},[r,_.currentPage,_.limit,k]);return{events:e,selectedEventId:r,eventData:l,ticketHolders:d,statistics:g,pagination:_,filters:k,loading:x,eventsLoading:C,reshareLoading:z,bulkReshareLoading:q,selectedTickets:F,selectAll:Y,isTicketSelected:ee=>F.some(ge=>ge.enrollmentType===ee.enrollmentType&&ge.enrollmentId===ee.enrollmentId),handleEventChange:ee=>{a(ee),P(ge=>({...ge,currentPage:1})),I({search:"",enrollmentType:"",scannedStatus:""})},handleFilterChange:(ee,ge)=>{I(le=>({...le,[ee]:ge})),P(le=>({...le,currentPage:1}))},handleSearch:ee=>{I(ge=>({...ge,search:ee})),P(ge=>({...ge,currentPage:1}))},handlePageChange:ee=>{P(ge=>({...ge,currentPage:ee}))},handleTicketSelect:ee=>{const ge=`${ee.enrollmentType}-${ee.enrollmentId}`;R(le=>le.find(ie=>`${ie.enrollmentType}-${ie.enrollmentId}`===ge)?le.filter(ie=>`${ie.enrollmentType}-${ie.enrollmentId}`!==ge):[...le,ee])},handleSelectAll:()=>{R(Y?[]:[...d]),j(!Y)},handleReshareTicket:async(ee,ge="both")=>{const le=`${ee.enrollmentType}-${ee.enrollmentId}`;L(Ce=>({...Ce,[le]:!0}));try{const Ce=await xme(ee.enrollmentType,ee.enrollmentId,{phone:ee.phone||ee.user?.phone,sendVia:ge});Ce.success?(Et.success("Ticket reshared successfully!"),H()):Et.error(Ce.message||"Failed to reshare ticket")}catch(Ce){console.error("Error resharing ticket:",Ce),Et.error("Failed to reshare ticket")}finally{L(Ce=>({...Ce,[le]:!1}))}},handleBulkReshare:async(ee="whatsapp")=>{if(F.length===0){Et.warning("Please select tickets to reshare");return}if(F.length>50){Et.warning("Maximum 50 tickets can be reshared at once");return}V(!0);try{const ge=F.map(Ce=>({enrollmentType:Ce.enrollmentType,enrollmentId:Ce.enrollmentId,phone:Ce.phone||Ce.user?.phone})),le=await bme(ge,ee);if(le.success){const{summary:Ce}=le.data;Ce.failed>0?Et.warning(`Reshared ${Ce.success} tickets. ${Ce.failed} failed.`):Et.success(`Successfully reshared ${Ce.success} tickets!`),R([]),j(!1),H()}else Et.error(le.message||"Bulk reshare failed")}catch(ge){console.error("Error in bulk reshare:",ge),Et.error("Bulk reshare failed")}finally{V(!1)}},refresh:()=>{r&&H()}}};function wme(){const{events:e,selectedEventId:t,ticketHolders:r,statistics:a,pagination:l,filters:o,loading:d,eventsLoading:h,reshareLoading:g,bulkReshareLoading:p,selectedTickets:x,selectAll:E,isTicketSelected:C,handleEventChange:O,handleFilterChange:_,handleSearch:P,handlePageChange:k,handleTicketSelect:I,handleSelectAll:F,handleReshareTicket:R,handleBulkReshare:Y,refresh:j}=Eme(),[z,L]=N.useState(""),[q,V]=N.useState(!1),[W,H]=N.useState("whatsapp"),[$,ce]=N.useState(null),[me,ae]=N.useState("both");N.useEffect(()=>{const te=setTimeout(()=>{z!==o.search&&P(z)},500);return()=>clearTimeout(te)},[z]);const J=te=>te?new Date(te).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",se=te=>!te&&te!==0?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(te),Ee=te=>{ce(te),ae("both")},we=async()=>{$&&(await R($,me),ce(null))};return n.createElement("div",{className:"space-y-4"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},n.createElement("div",null,n.createElement("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 tracking-tight"},"Ticket Reshare"),n.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Regenerate and reshare ticket QR codes to users")),n.createElement("button",{onClick:j,disabled:d||!t,className:"flex items-center gap-1.5 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm text-sm"},n.createElement(wD,{className:`w-4 h-4 ${d?"animate-spin":""}`}),n.createElement("span",{className:"hidden sm:inline font-medium"},"Refresh"))),n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},n.createElement("label",{className:"block text-sm font-semibold text-gray-700 mb-2"},"Select Event"),n.createElement("select",{value:t,onChange:te=>O(te.target.value),disabled:h,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 bg-white disabled:bg-gray-100"},n.createElement("option",{value:""},h?"Loading events...":"-- Select an Event --"),e.map(te=>n.createElement("option",{key:te._id,value:te._id},te.name," - ",J(te.startDate))))),t&&n.createElement(n.Fragment,null,a&&n.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3"},n.createElement(ku,{label:"Total",value:a.total,color:"blue",icon:n.createElement(Og,null)}),n.createElement(ku,{label:"Online",value:a.online,color:"purple",icon:n.createElement(z4,null)}),n.createElement(ku,{label:"Cash",value:a.cash,color:"green",icon:n.createElement(z4,null)}),n.createElement(ku,{label:"Scanned",value:a.scanned,color:"emerald",icon:n.createElement(Ku,null)}),n.createElement(ku,{label:"Not Scanned",value:a.notScanned,color:"orange",icon:n.createElement(Bm,null)}),n.createElement(ku,{label:"Cancelled",value:a.cancelled,color:"red",icon:n.createElement(mV,null)})),n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},n.createElement("div",{className:"flex flex-col lg:flex-row gap-3"},n.createElement("div",{className:"flex-1 relative"},n.createElement(rV,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.createElement("input",{type:"text",placeholder:"Search by phone, name, or email...",value:z,onChange:te=>L(te.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})),n.createElement("button",{onClick:()=>V(!q),className:"lg:hidden flex items-center gap-2 px-4 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50"},n.createElement(oV,{className:"w-5 h-5"}),"Filters"),n.createElement("div",{className:"hidden lg:flex items-center gap-3"},n.createElement("select",{value:o.enrollmentType,onChange:te=>_("enrollmentType",te.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},u_.map(te=>n.createElement("option",{key:te.value,value:te.value},te.label))),n.createElement("select",{value:o.scannedStatus,onChange:te=>_("scannedStatus",te.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},d_.map(te=>n.createElement("option",{key:te.value,value:te.value},te.label))))),q&&n.createElement("div",{className:"lg:hidden mt-3 pt-3 border-t border-gray-200 grid grid-cols-2 gap-3"},n.createElement("select",{value:o.enrollmentType,onChange:te=>_("enrollmentType",te.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-sm"},u_.map(te=>n.createElement("option",{key:te.value,value:te.value},te.label))),n.createElement("select",{value:o.scannedStatus,onChange:te=>_("scannedStatus",te.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-sm"},d_.map(te=>n.createElement("option",{key:te.value,value:te.value},te.label))))),x.length>0&&n.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement(pY,{className:"text-blue-600 w-5 h-5"}),n.createElement("span",{className:"font-semibold text-blue-900"},x.length," ticket(s) selected")),n.createElement("div",{className:"flex items-center gap-2 w-full sm:w-auto"},n.createElement("select",{value:W,onChange:te=>H(te.target.value),className:"flex-1 sm:flex-none px-3 py-2 border border-blue-300 rounded-lg bg-white text-sm focus:ring-2 focus:ring-blue-500"},m_.map(te=>n.createElement("option",{key:te.value,value:te.value},te.label))),n.createElement("button",{onClick:()=>Y(W),disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm font-medium"},p?n.createElement("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.createElement(Eg,{className:"w-4 h-4"}),"Reshare Selected"))),n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},n.createElement("div",{className:"hidden lg:block"},n.createElement("div",{className:"bg-gray-50 border-b border-gray-200 px-4 py-3"},n.createElement("div",{className:"flex items-center gap-4"},n.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},n.createElement("input",{type:"checkbox",checked:E,onChange:F,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.createElement("span",{className:"text-sm font-medium text-gray-700"},"Select All")),n.createElement("span",{className:"text-sm text-gray-500"},l.totalCount," ticket holder(s)")))),d&&n.createElement("div",{className:"p-8 text-center"},n.createElement("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),n.createElement("p",{className:"text-gray-600"},"Loading ticket holders...")),!d&&r.length===0&&n.createElement("div",{className:"p-12 text-center"},n.createElement(Bm,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},"No Ticket Holders Found"),n.createElement("p",{className:"text-gray-600"},o.search||o.enrollmentType||o.scannedStatus?"Try adjusting your filters":"No tickets have been issued for this event yet")),!d&&r.length>0&&n.createElement(n.Fragment,null,n.createElement("div",{className:"hidden lg:block overflow-x-auto"},n.createElement("table",{className:"w-full"},n.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},n.createElement("tr",null,n.createElement("th",{className:"w-12 px-4 py-3"}),n.createElement("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700"},"User Details"),n.createElement("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700"},"Type"),n.createElement("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700"},"Tier / Price"),n.createElement("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700"},"Scan Status"),n.createElement("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700"},"Created"),n.createElement("th",{className:"text-right px-4 py-3 text-sm font-semibold text-gray-700"},"Action"))),n.createElement("tbody",{className:"divide-y divide-gray-100"},r.map(te=>n.createElement(Nme,{key:`${te.enrollmentType}-${te.enrollmentId}`,ticket:te,isSelected:C(te),onSelect:()=>I(te),onReshare:()=>Ee(te),isResharing:g[`${te.enrollmentType}-${te.enrollmentId}`],formatDate:J,formatCurrency:se}))))),n.createElement("div",{className:"lg:hidden divide-y divide-gray-100"},n.createElement("div",{className:"px-4 py-3 bg-gray-50 flex items-center justify-between"},n.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},n.createElement("input",{type:"checkbox",checked:E,onChange:F,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.createElement("span",{className:"text-sm font-medium text-gray-700"},"Select All")),n.createElement("span",{className:"text-sm text-gray-500"},l.totalCount," total")),r.map(te=>n.createElement(Sme,{key:`${te.enrollmentType}-${te.enrollmentId}`,ticket:te,isSelected:C(te),onSelect:()=>I(te),onReshare:()=>Ee(te),isResharing:g[`${te.enrollmentType}-${te.enrollmentId}`],formatDate:J,formatCurrency:se})))),!d&&l.totalPages>1&&n.createElement("div",{className:"border-t border-gray-200 px-4 py-3 flex flex-col sm:flex-row items-center justify-between gap-3"},n.createElement("p",{className:"text-sm text-gray-600"},"Page ",l.currentPage," of ",l.totalPages," (",l.totalCount," items)"),n.createElement("div",{className:"flex items-center gap-2"},n.createElement("button",{onClick:()=>k(l.currentPage-1),disabled:l.currentPage===1,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},"Previous"),n.createElement("div",{className:"hidden sm:flex items-center gap-1"},Array.from({length:Math.min(5,l.totalPages)},(te,K)=>{let ee;return l.totalPages<=5||l.currentPage<=3?ee=K+1:l.currentPage>=l.totalPages-2?ee=l.totalPages-4+K:ee=l.currentPage-2+K,n.createElement("button",{key:ee,onClick:()=>k(ee),className:`w-8 h-8 text-sm rounded-lg ${l.currentPage===ee?"bg-gray-900 text-white":"border border-gray-300 hover:bg-gray-50"}`},ee)})),n.createElement("button",{onClick:()=>k(l.currentPage+1),disabled:l.currentPage===l.totalPages,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},"Next"))))),!t&&!h&&n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center"},n.createElement(Bm,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),n.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-2"},"Select an Event"),n.createElement("p",{className:"text-gray-600"},"Choose an event from the dropdown above to view and manage ticket holders")),$&&n.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},n.createElement("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6"},n.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-2"},"Confirm Reshare"),n.createElement("p",{className:"text-gray-600 mb-4"},"This will reset the scan status and send a new QR code to:"),n.createElement("div",{className:"bg-gray-50 rounded-lg p-3 mb-4"},n.createElement("p",{className:"font-semibold text-gray-900"},$.user?.name||$.name||"Unknown"),n.createElement("p",{className:"text-sm text-gray-600"},$.phone||$.user?.phone),$.user?.email&&n.createElement("p",{className:"text-sm text-gray-600"},$.user?.email)),n.createElement("div",{className:"mb-4"},n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Send via"),n.createElement("select",{value:me,onChange:te=>ae(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},m_.map(te=>n.createElement("option",{key:te.value,value:te.value},te.label)))),n.createElement("div",{className:"flex items-center gap-3"},n.createElement("button",{onClick:()=>ce(null),className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium"},"Cancel"),n.createElement("button",{onClick:we,disabled:g[`${$.enrollmentType}-${$.enrollmentId}`],className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50"},g[`${$.enrollmentType}-${$.enrollmentId}`]?n.createElement("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.createElement(Eg,{className:"w-4 h-4"}),"Reshare")))))}function ku({label:e,value:t,color:r,icon:a}){const l={blue:"bg-blue-50 text-blue-600 border-blue-200",purple:"bg-purple-50 text-purple-600 border-purple-200",green:"bg-green-50 text-green-600 border-green-200",emerald:"bg-emerald-50 text-emerald-600 border-emerald-200",orange:"bg-orange-50 text-orange-600 border-orange-200",red:"bg-red-50 text-red-600 border-red-200"};return n.createElement("div",{className:`rounded-lg border p-3 ${l[r]||l.blue}`},n.createElement("div",{className:"flex items-center gap-2 mb-1"},n.createElement("span",{className:"w-4 h-4"},a),n.createElement("span",{className:"text-xs font-medium opacity-80"},e)),n.createElement("p",{className:"text-xl font-bold"},t||0))}function Nme({ticket:e,isSelected:t,onSelect:r,onReshare:a,isResharing:l,formatDate:o,formatCurrency:d}){const h=e.user?.name||e.name||"Unknown",g=e.phone||e.user?.phone||"N/A",p=e.user?.email||"N/A",x=e.enrollmentType==="ONLINE"?e.ticketPrice:e.priceCharged;return n.createElement("tr",{className:"hover:bg-gray-50 transition-colors"},n.createElement("td",{className:"px-4 py-3"},n.createElement("input",{type:"checkbox",checked:t,onChange:r,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})),n.createElement("td",{className:"px-4 py-3"},n.createElement("div",null,n.createElement("p",{className:"font-semibold text-gray-900"},h),n.createElement("div",{className:"flex items-center gap-3 text-sm text-gray-600"},n.createElement("span",{className:"flex items-center gap-1"},n.createElement(iV,{className:"w-3.5 h-3.5"}),g),p!=="N/A"&&n.createElement("span",{className:"flex items-center gap-1 truncate max-w-[200px]"},n.createElement(sV,{className:"w-3.5 h-3.5"}),p)))),n.createElement("td",{className:"px-4 py-3"},n.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.enrollmentType==="ONLINE"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`},e.enrollmentType)),n.createElement("td",{className:"px-4 py-3"},n.createElement("div",null,e.tierName&&n.createElement("p",{className:"text-sm font-medium text-gray-900"},e.tierName),n.createElement("p",{className:"text-sm text-gray-600"},d(x)))),n.createElement("td",{className:"px-4 py-3 text-center"},e.isTicketScanned?n.createElement("div",{className:"inline-flex flex-col items-center"},n.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},n.createElement(Ku,{className:"w-3.5 h-3.5"}),"Scanned"),e.ticketScannedAt&&n.createElement("span",{className:"text-xs text-gray-500 mt-1"},o(e.ticketScannedAt))):n.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800"},n.createElement(Bm,{className:"w-3.5 h-3.5"}),"Not Scanned")),n.createElement("td",{className:"px-4 py-3"},n.createElement("span",{className:"text-sm text-gray-600"},o(e.createdAt))),n.createElement("td",{className:"px-4 py-3 text-right"},n.createElement("button",{onClick:a,disabled:l||e.status==="CANCELLED",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},l?n.createElement("div",{className:"w-3.5 h-3.5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.createElement(Eg,{className:"w-3.5 h-3.5"}),"Reshare")))}function Sme({ticket:e,isSelected:t,onSelect:r,onReshare:a,isResharing:l,formatDate:o,formatCurrency:d}){const h=e.user?.name||e.name||"Unknown",g=e.phone||e.user?.phone||"N/A";e.user?.email;const p=e.enrollmentType==="ONLINE"?e.ticketPrice:e.priceCharged;return n.createElement("div",{className:"p-4 hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex items-start gap-3"},n.createElement("input",{type:"checkbox",checked:t,onChange:r,className:"w-4 h-4 mt-1 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("div",{className:"flex items-start justify-between gap-2 mb-2"},n.createElement("div",null,n.createElement("p",{className:"font-semibold text-gray-900"},h),n.createElement("p",{className:"text-sm text-gray-600"},g)),n.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium shrink-0 ${e.enrollmentType==="ONLINE"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`},e.enrollmentType)),n.createElement("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3"},n.createElement("div",null,n.createElement("p",{className:"text-gray-500 text-xs"},"Price"),n.createElement("p",{className:"font-medium text-gray-900"},d(p))),e.tierName&&n.createElement("div",null,n.createElement("p",{className:"text-gray-500 text-xs"},"Tier"),n.createElement("p",{className:"font-medium text-gray-900"},e.tierName))),n.createElement("div",{className:"flex items-center justify-between"},e.isTicketScanned?n.createElement("div",null,n.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},n.createElement(Ku,{className:"w-3.5 h-3.5"}),"Scanned"),e.ticketScannedAt&&n.createElement("p",{className:"text-xs text-gray-500 mt-1"},o(e.ticketScannedAt))):n.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800"},n.createElement(Bm,{className:"w-3.5 h-3.5"}),"Not Scanned"),n.createElement("button",{onClick:a,disabled:l||e.status==="CANCELLED",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},l?n.createElement("div",{className:"w-3.5 h-3.5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.createElement(Eg,{className:"w-3.5 h-3.5"}),"Reshare")))))}const In={PLANS:"/web/membership-plans",USER_MEMBERSHIPS:"/web/user-memberships"},Cs={createPlan:async e=>(console.log("[MembershipService] Creating membership plan"),ze(je.post(In.PLANS,e))),getPlans:async(e={})=>(console.log("[MembershipService] Fetching membership plans with params:",e),ze(je.get(In.PLANS,{params:e}))),getPlanById:async e=>(console.log("[MembershipService] Fetching membership plan:",e),ze(je.get(`${In.PLANS}/${e}`))),updatePlan:async(e,t)=>(console.log("[MembershipService] Updating membership plan:",e),ze(je.put(`${In.PLANS}/${e}`,t))),deletePlan:async e=>(console.log("[MembershipService] Deleting membership plan:",e),ze(je.delete(`${In.PLANS}/${e}`))),restorePlan:async e=>(console.log("[MembershipService] Restoring membership plan:",e),ze(je.post(`${In.PLANS}/${e}/restore`))),createUserMembership:async e=>(console.log("[MembershipService] Creating user membership for phone:",e?.phone),ze(je.post(In.USER_MEMBERSHIPS,e))),getUserMemberships:async(e={})=>(console.log("[MembershipService] Fetching user memberships with params:",e),ze(je.get(In.USER_MEMBERSHIPS,{params:e}))),checkMembershipStatus:async e=>(console.log("[MembershipService] Checking membership status for phone:",e),ze(je.post(`${In.USER_MEMBERSHIPS}/check-status`,{phone:e}))),getUserMembershipById:async e=>(console.log("[MembershipService] Fetching user membership:",e),ze(je.get(`${In.USER_MEMBERSHIPS}/${e}`))),extendUserMembership:async(e,t)=>(console.log("[MembershipService] Extending membership:",e,"by",t,"days"),ze(je.post(`${In.USER_MEMBERSHIPS}/${e}/extend`,{additionalDays:t}))),cancelUserMembership:async(e,t)=>(console.log("[MembershipService] Cancelling membership:",e),ze(je.post(`${In.USER_MEMBERSHIPS}/${e}/cancel`,{reason:t}))),updateAdminNotes:async(e,t)=>(console.log("[MembershipService] Updating admin notes for membership:",e),ze(je.patch(`${In.USER_MEMBERSHIPS}/${e}/notes`,{adminNotes:t}))),deleteUserMembership:async e=>(console.log("[MembershipService] Deleting user membership:",e),ze(je.delete(`${In.USER_MEMBERSHIPS}/${e}`)))},kv={name:"",description:"",price:"",compareAtPrice:"",durationInDays:"",perks:[],perkInput:"",displayOrder:"",isFeatured:!1,isActive:!0,maxPurchases:""},Cme={currentPage:1,totalPages:0,totalCount:0,limit:9},Ame={currentPage:1,totalPages:0,totalCount:0,limit:10};function Tme(){const{hasRole:e}=Us(),t=e(["SUPER_ADMIN","ADMIN"]),[r,a]=N.useState("plans"),[l,o]=N.useState([]),[d,h]=N.useState(kv),[g,p]=N.useState({search:"",status:"all",featured:"all"}),[x,E]=N.useState(Cme),[C,O]=N.useState(!1),[_,P]=N.useState(!1),[k,I]=N.useState(null),[F,R]=N.useState(null),[Y,j]=N.useState(!1),[z,L]=N.useState(null),[q,V]=N.useState([]),[W,H]=N.useState([]),[$,ce]=N.useState({phone:"",membershipPlanId:"",amountPaid:"",adminNotes:""}),[me,ae]=N.useState({phone:"",status:"all",paymentStatus:"all",purchaseMethod:"all"}),[J,se]=N.useState(Ame),[Ee,we]=N.useState(!1),[te,K]=N.useState(null),[ee,ge]=N.useState(!1),[le,Ce]=N.useState(null),[ie,de]=N.useState(!1),[$e,be]=N.useState(null),[Xe,at]=N.useState(""),[Le,ve]=N.useState(""),[Ue,oe]=N.useState(""),[qe,Ne]=N.useState(!1),[tt,it]=N.useState(!1),[pt,We]=N.useState(!1),[lt,Fe]=N.useState(!1),[mt,$t]=N.useState(null),er=N.useMemo(()=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}),[]),tr=async(fe=1)=>{O(!0),I(null);const De={page:fe,limit:x.limit,sortBy:"displayOrder",sortOrder:"asc"};g.search.trim()&&(De.search=g.search.trim()),g.status!=="all"&&(De.isActive=g.status==="active"),g.featured!=="all"&&(De.isFeatured=g.featured==="featured");const ot=await Cs.getPlans(De);ot.success?(o(ot.data?.plans||[]),V(ot.data?.plans||q),E({currentPage:ot.data?.pagination?.currentPage||fe,totalPages:ot.data?.pagination?.totalPages||0,totalCount:ot.data?.pagination?.totalCount||0,limit:ot.data?.pagination?.limit||x.limit})):I(ot.message||"Failed to load plans"),O(!1)},ut=async(fe=1)=>{we(!0),K(null);const De={page:fe,limit:J.limit,sortBy:"createdAt",sortOrder:"desc"};me.phone.trim()&&(De.phone=me.phone.trim()),me.status!=="all"&&(De.status=me.status),me.paymentStatus!=="all"&&(De.paymentStatus=me.paymentStatus),me.purchaseMethod!=="all"&&(De.purchaseMethod=me.purchaseMethod);const ot=await Cs.getUserMemberships(De);ot.success?(H(ot.data?.memberships||[]),se({currentPage:ot.data?.pagination?.currentPage||fe,totalPages:ot.data?.pagination?.totalPages||0,totalCount:ot.data?.pagination?.totalCount||0,limit:ot.data?.pagination?.limit||J.limit})):K(ot.message||"Failed to load memberships"),we(!1)};N.useEffect(()=>{tr(1),ut(1)},[]);const At=()=>h(kv),vr=fe=>({name:fe.name.trim(),description:fe.description.trim(),price:fe.price?Number(fe.price):0,compareAtPrice:fe.compareAtPrice?Number(fe.compareAtPrice):void 0,durationInDays:fe.durationInDays?Number(fe.durationInDays):0,perks:fe.perks,displayOrder:fe.displayOrder?Number(fe.displayOrder):void 0,isFeatured:fe.isFeatured,isActive:fe.isActive,maxPurchases:fe.maxPurchases?Number(fe.maxPurchases):void 0}),ur=()=>{const fe=d.perkInput.trim();!fe||d.perks.includes(fe)||h(De=>({...De,perks:[...De.perks,fe],perkInput:""}))},ea=fe=>{h(De=>({...De,perks:De.perks.filter(ot=>ot!==fe)}))},kt=async fe=>{if(fe.preventDefault(),!t)return;P(!0),I(null);const De=await Cs.createPlan(vr(d));De.success?(At(),tr(1)):I(De.message||"Failed to create plan"),P(!1)},xe=fe=>{R(fe),h({...kv,...fe,price:fe.price??"",compareAtPrice:fe.compareAtPrice??"",durationInDays:fe.durationInDays??"",displayOrder:fe.displayOrder??"",maxPurchases:fe.maxPurchases??"",perks:fe.perks||[],perkInput:""}),j(!0)},Qe=async fe=>{if(fe.preventDefault(),!F)return;P(!0),I(null);const De=await Cs.updatePlan(F._id,vr(d));De.success?(j(!1),R(null),At(),tr(x.currentPage)):I(De.message||"Failed to update plan"),P(!1)},st=async()=>{z&&(Ne(!0),await Cs.deletePlan(z),Ne(!1),L(null),tr(x.currentPage))},Tt=async fe=>{Ne(!0),await Cs.restorePlan(fe),Ne(!1),tr(x.currentPage)},dr=async fe=>{if(fe.preventDefault(),!t)return;ge(!0),K(null);const De={phone:$.phone.trim(),membershipPlanId:$.membershipPlanId,amountPaid:$.amountPaid?Number($.amountPaid):void 0,adminNotes:$.adminNotes.trim()||void 0},ot=await Cs.createUserMembership(De);ot.success?(ce({phone:"",membershipPlanId:"",amountPaid:"",adminNotes:""}),ut(1)):K(ot.message||"Failed to create membership"),ge(!1)},$a=async()=>{if(!me.phone.trim()){Ce(null);return}de(!0);const fe=await Cs.checkMembershipStatus(me.phone.trim());Ce(fe.success?fe.data:{hasActiveMembership:!1,error:fe.message}),de(!1)},ta=async fe=>{fe.preventDefault(),!(!$e||!Xe)&&(Ne(!0),await Cs.extendUserMembership($e._id,Number(Xe)),Ne(!1),it(!1),at(""),be(null),ut(J.currentPage))},bt=async fe=>{fe.preventDefault(),!(!$e||!Le.trim())&&(Ne(!0),await Cs.cancelUserMembership($e._id,Le.trim()),Ne(!1),We(!1),ve(""),be(null),ut(J.currentPage))},Je=async fe=>{fe.preventDefault(),$e&&(Ne(!0),await Cs.updateAdminNotes($e._id,Ue.trim()),Ne(!1),Fe(!1),oe(""),be(null),ut(J.currentPage))},Lt=async()=>{mt&&(Ne(!0),await Cs.deleteUserMembership(mt),Ne(!1),$t(null),ut(J.currentPage))},Lr=({plan:fe})=>n.createElement("div",{className:"flex flex-wrap items-center gap-2"},n.createElement("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${fe.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},fe.isActive?"Active":"Inactive"),fe.isFeatured&&n.createElement("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-amber-100 text-amber-700 flex items-center gap-1"},n.createElement(gz,{className:"h-3 w-3"}),"Featured"),fe.isDeleted&&n.createElement("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-700"},"Deleted"));return n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},n.createElement("div",null,n.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Memberships"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Create plans and manage member subscriptions.")),n.createElement("button",{onClick:()=>{tr(x.currentPage),ut(J.currentPage)},className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"},n.createElement(os,{className:"h-4 w-4"}),"Refresh")),n.createElement("div",{className:"bg-white border border-gray-200 rounded-xl p-2 shadow-sm flex gap-2"},n.createElement("button",{onClick:()=>a("plans"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold ${r==="plans"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`},"Membership Plans"),n.createElement("button",{onClick:()=>a("memberships"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold ${r==="memberships"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`},"Member Subscriptions")),r==="plans"?n.createElement("div",{className:"space-y-6",id:"plans-tab-content"},n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},n.createElement("div",{className:"flex items-start justify-between gap-3"},n.createElement("div",null,n.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Create membership plan"),n.createElement("p",{className:"text-sm text-gray-500"},"Set pricing, perks, and visibility.")),k&&n.createElement("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 text-red-700 rounded-lg"},n.createElement(ns,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm"},k))),n.createElement("form",{onSubmit:kt,className:"mt-5 grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement("input",{type:"text",value:d.name,onChange:fe=>h({...d,name:fe.target.value}),required:!0,placeholder:"Plan name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("input",{type:"number",min:"1",value:d.durationInDays,onChange:fe=>h({...d,durationInDays:fe.target.value}),required:!0,placeholder:"Duration in days",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("input",{type:"number",min:"0",value:d.price,onChange:fe=>h({...d,price:fe.target.value}),required:!0,placeholder:"Price (INR)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("input",{type:"number",min:"0",value:d.compareAtPrice,onChange:fe=>h({...d,compareAtPrice:fe.target.value}),placeholder:"Compare at price (optional)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("textarea",{value:d.description,onChange:fe=>h({...d,description:fe.target.value}),rows:3,placeholder:"Description",className:"md:col-span-2 w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("input",{type:"number",min:"1",value:d.displayOrder,onChange:fe=>h({...d,displayOrder:fe.target.value}),placeholder:"Display order",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("input",{type:"number",min:"0",value:d.maxPurchases,onChange:fe=>h({...d,maxPurchases:fe.target.value}),placeholder:"Max purchases (optional)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("div",{className:"md:col-span-2 flex flex-wrap gap-4"},n.createElement("label",{className:"flex items-center gap-2 text-sm text-gray-700"},n.createElement("input",{type:"checkbox",checked:d.isActive,onChange:fe=>h({...d,isActive:fe.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),"Active"),n.createElement("label",{className:"flex items-center gap-2 text-sm text-gray-700"},n.createElement("input",{type:"checkbox",checked:d.isFeatured,onChange:fe=>h({...d,isFeatured:fe.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),"Featured")),n.createElement("div",{className:"md:col-span-2 space-y-2"},n.createElement("div",{className:"flex flex-col sm:flex-row gap-3"},n.createElement("input",{type:"text",value:d.perkInput,onChange:fe=>h({...d,perkInput:fe.target.value}),onKeyDown:fe=>{fe.key==="Enter"&&(fe.preventDefault(),ur())},placeholder:"Add perk",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("button",{type:"button",onClick:ur,className:"inline-flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800"},n.createElement(Mr,{className:"h-4 w-4"}),"Add perk")),d.perks.length>0&&n.createElement("div",{className:"flex flex-wrap gap-2"},d.perks.map(fe=>n.createElement("span",{key:fe,className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gray-100 text-gray-800 text-sm"},fe,n.createElement("button",{type:"button",onClick:()=>ea(fe),className:"text-gray-500 hover:text-gray-700"},"x"))))),n.createElement("div",{className:"md:col-span-2 flex justify-end"},n.createElement("button",{type:"submit",disabled:_,className:"inline-flex items-center gap-2 px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60"},_?n.createElement(xt,{className:"h-4 w-4 animate-spin"}):n.createElement(Mr,{className:"h-4 w-4"}),"Create plan")))),n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200"},n.createElement("div",{className:"p-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3"},n.createElement("div",{className:"flex-1 relative"},n.createElement(ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.createElement("input",{type:"text",value:g.search,onChange:fe=>p({...g,search:fe.target.value}),onKeyDown:fe=>fe.key==="Enter"&&tr(1),onBlur:()=>tr(1),placeholder:"Search plans",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),n.createElement("div",{className:"flex gap-2"},n.createElement("select",{value:g.status,onChange:fe=>p({...g,status:fe.target.value}),onBlur:()=>tr(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none"},n.createElement("option",{value:"all"},"All status"),n.createElement("option",{value:"active"},"Active"),n.createElement("option",{value:"inactive"},"Inactive")),n.createElement("select",{value:g.featured,onChange:fe=>p({...g,featured:fe.target.value}),onBlur:()=>tr(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none"},n.createElement("option",{value:"all"},"All visibility"),n.createElement("option",{value:"featured"},"Featured"),n.createElement("option",{value:"standard"},"Standard")),n.createElement("button",{onClick:()=>{p({search:"",status:"all",featured:"all"}),tr(1)},className:"px-3 py-2 text-sm text-gray-600 bg-gray-100 border border-gray-200 rounded-lg hover:bg-gray-200"},"Reset"))),C?n.createElement("div",{className:"p-6 flex items-center justify-center gap-2 text-gray-600"},n.createElement(xt,{className:"h-5 w-5 animate-spin"}),"Loading plans..."):l.length===0?n.createElement("div",{className:"p-6 text-center text-gray-500"},"No membership plans found."):n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 p-4"},l.map(fe=>n.createElement("div",{key:fe._id,className:"border border-gray-200 rounded-xl p-4 flex flex-col gap-3 hover:shadow-sm transition"},n.createElement("div",{className:"flex items-start justify-between gap-2"},n.createElement("div",null,n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},fe.name),n.createElement("p",{className:"text-sm text-gray-500 line-clamp-2"},fe.description),n.createElement(Lr,{plan:fe})),n.createElement("div",{className:"text-right"},n.createElement("p",{className:"text-xl font-bold text-gray-900"},er.format(fe.price||0)),fe.compareAtPrice&&n.createElement("p",{className:"text-xs text-gray-500 line-through"},er.format(fe.compareAtPrice)))),n.createElement("div",{className:"text-sm text-gray-600 flex items-center gap-2"},n.createElement(Xu,{className:"h-4 w-4"}),"Display order: ",fe.displayOrder??"-"),n.createElement("div",{className:"text-sm text-gray-600 flex items-center gap-2"},n.createElement(Ax,{className:"h-4 w-4"}),fe.durationInDays," days - ",fe.currentPurchases??0,fe.maxPurchases?` / ${fe.maxPurchases}`:""," purchases"),fe.perks?.length>0&&n.createElement("div",{className:"flex flex-wrap gap-2"},fe.perks.map(De=>n.createElement("span",{key:De,className:"px-2 py-1 text-xs rounded-lg bg-gray-100 text-gray-800"},De))),n.createElement("div",{className:"flex items-center gap-3 pt-2"},n.createElement("button",{onClick:()=>xe(fe),className:"flex-1 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg hover:bg-gray-800"},"Edit"),fe.isDeleted?n.createElement("button",{onClick:()=>Tt(fe._id),disabled:qe,className:"px-3 py-2 text-sm text-emerald-600 bg-emerald-50 border border-emerald-200 rounded-lg hover:bg-emerald-100 disabled:opacity-60"},"Restore"):n.createElement("button",{onClick:()=>L(fe._id),className:"px-3 py-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100"},"Delete"))))),x.totalPages>1&&n.createElement(aa,{currentPage:x.currentPage,totalPages:x.totalPages,totalItems:x.totalCount,itemsPerPage:x.limit,onPageChange:fe=>tr(fe),itemLabel:"plans"}))):n.createElement("div",{className:"space-y-6",id:"memberships-tab-content"},n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4"},n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-3"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement(Yu,{className:"h-5 w-5 text-gray-800"}),n.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Check membership status")),n.createElement("div",{className:"flex flex-col sm:flex-row gap-3"},n.createElement("input",{type:"text",value:me.phone,onChange:fe=>ae({...me,phone:fe.target.value}),placeholder:"Phone number",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("button",{onClick:$a,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800"},ie?n.createElement(xt,{className:"h-4 w-4 animate-spin"}):n.createElement(ya,{className:"h-4 w-4"}),"Check")),le&&n.createElement("div",{className:"p-3 rounded-lg border border-gray-200 bg-gray-50 space-y-1"},n.createElement("div",{className:"flex items-center gap-2 font-semibold text-gray-900"},le.hasActiveMembership?n.createElement(Hm,{className:"h-4 w-4 text-green-600"}):n.createElement(ns,{className:"h-4 w-4 text-red-600"}),le.hasActiveMembership?"Active membership found":"No active membership"),le.membership&&n.createElement("div",{className:"text-sm text-gray-600 space-y-1"},n.createElement("p",null,"Plan: ",le.membership.membershipPlanId?.name),n.createElement("p",null,"Valid till:"," ",le.membership.endDate?new Date(le.membership.endDate).toLocaleDateString():"-"),n.createElement("p",null,"Days remaining: ",le.membership.daysRemaining??"-")),le.error&&n.createElement("p",{className:"text-sm text-red-600"},le.error))),n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-3"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement(pD,{className:"h-5 w-5 text-gray-800"}),n.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Create membership manually")),te&&n.createElement("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 text-red-700 rounded-lg"},n.createElement(ns,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm"},te)),n.createElement("form",{onSubmit:dr,className:"space-y-3"},n.createElement("input",{type:"text",value:$.phone,onChange:fe=>ce({...$,phone:fe.target.value}),required:!0,placeholder:"Phone number",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("select",{value:$.membershipPlanId,onChange:fe=>ce({...$,membershipPlanId:fe.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none"},n.createElement("option",{value:""},"Select plan"),q.map(fe=>n.createElement("option",{key:fe._id,value:fe._id},fe.name," - ",er.format(fe.price||0)))),n.createElement("input",{type:"number",min:"0",value:$.amountPaid,onChange:fe=>ce({...$,amountPaid:fe.target.value}),placeholder:"Amount paid (optional)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("textarea",{rows:3,value:$.adminNotes,onChange:fe=>ce({...$,adminNotes:fe.target.value}),placeholder:"Admin notes",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("div",{className:"flex justify-end"},n.createElement("button",{type:"submit",disabled:ee,className:"inline-flex items-center gap-2 px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60"},ee?n.createElement(xt,{className:"h-4 w-4 animate-spin"}):n.createElement(Mr,{className:"h-4 w-4"}),"Create membership"))))),n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200"},n.createElement("div",{className:"p-4 flex flex-col lg:flex-row gap-3 lg:items-center lg:justify-between"},n.createElement("div",{className:"flex-1 relative"},n.createElement(ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.createElement("input",{type:"text",value:me.phone,onChange:fe=>ae({...me,phone:fe.target.value}),onKeyDown:fe=>fe.key==="Enter"&&ut(1),placeholder:"Search by phone",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),n.createElement("div",{className:"flex gap-2"},n.createElement("select",{value:me.status,onChange:fe=>ae({...me,status:fe.target.value}),onBlur:()=>ut(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none"},n.createElement("option",{value:"all"},"All status"),n.createElement("option",{value:"ACTIVE"},"Active"),n.createElement("option",{value:"CANCELLED"},"Cancelled"),n.createElement("option",{value:"EXPIRED"},"Expired")),n.createElement("select",{value:me.paymentStatus,onChange:fe=>ae({...me,paymentStatus:fe.target.value}),onBlur:()=>ut(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none"},n.createElement("option",{value:"all"},"All payments"),n.createElement("option",{value:"SUCCESS"},"Success"),n.createElement("option",{value:"PENDING"},"Pending"),n.createElement("option",{value:"FAILED"},"Failed")),n.createElement("select",{value:me.purchaseMethod,onChange:fe=>ae({...me,purchaseMethod:fe.target.value}),onBlur:()=>ut(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none"},n.createElement("option",{value:"all"},"All methods"),n.createElement("option",{value:"ADMIN"},"Admin"),n.createElement("option",{value:"IN_APP"},"In app"),n.createElement("option",{value:"WEBSITE"},"Website")),n.createElement("button",{onClick:()=>{ae({phone:"",status:"all",paymentStatus:"all",purchaseMethod:"all"}),ut(1)},className:"px-3 py-2 text-sm text-gray-600 bg-gray-100 border border-gray-200 rounded-lg hover:bg-gray-200"},"Reset"),n.createElement("button",{onClick:()=>ut(1),className:"px-3 py-2 text-sm text-white bg-gray-900 rounded-lg hover:bg-gray-800 flex items-center gap-2"},n.createElement(ya,{className:"h-4 w-4"}),"Apply"))),Ee?n.createElement("div",{className:"p-6 flex items-center justify-center gap-2 text-gray-600"},n.createElement(xt,{className:"h-5 w-5 animate-spin"}),"Loading memberships..."):W.length===0?n.createElement("div",{className:"p-6 text-center text-gray-500"},"No memberships found."):n.createElement("div",{className:"divide-y divide-gray-200"},W.map(fe=>n.createElement("div",{key:fe._id,className:"p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3"},n.createElement("div",{className:"space-y-1"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement("h3",{className:"text-base font-semibold text-gray-900"},fe.membershipPlanId?.name||"Membership"),fe.isCurrentlyActive&&n.createElement("span",{className:"px-2 py-0.5 text-xs rounded-full bg-emerald-100 text-emerald-700"},"Active now")),n.createElement("p",{className:"text-sm text-gray-600"},fe.phone),n.createElement("p",{className:"text-sm text-gray-600 flex items-center gap-2"},n.createElement(Ax,{className:"h-4 w-4 text-gray-500"}),fe.startDate?new Date(fe.startDate).toLocaleDateString():"-"," -"," ",fe.endDate?new Date(fe.endDate).toLocaleDateString():"-"),n.createElement("p",{className:"text-sm text-gray-600 flex items-center gap-2"},n.createElement(uD,{className:"h-4 w-4 text-gray-500"}),er.format(fe.amountPaid||fe.membershipPlanId?.price||0)),n.createElement("p",{className:"text-sm text-gray-600 flex items-center gap-2"},n.createElement(pg,{className:"h-4 w-4 text-gray-500"}),fe.adminNotes||"No notes"),n.createElement("div",{className:"flex flex-wrap gap-2 pt-1"},n.createElement("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${fe.status==="ACTIVE"?"bg-green-100 text-green-700":fe.status==="CANCELLED"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`},fe.status),n.createElement("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${fe.paymentStatus==="SUCCESS"?"bg-emerald-100 text-emerald-700":fe.paymentStatus==="FAILED"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`},fe.paymentStatus),n.createElement("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-blue-100 text-blue-700"},fe.purchaseMethod||"IN_APP"))),n.createElement("div",{className:"flex flex-wrap items-center gap-2"},n.createElement("button",{onClick:()=>{be(fe),at(""),it(!0)},className:"px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"},"Extend"),n.createElement("button",{onClick:()=>{be(fe),ve(""),We(!0)},className:"px-3 py-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100"},"Cancel"),n.createElement("button",{onClick:()=>{be(fe),oe(fe.adminNotes||""),Fe(!0)},className:"px-3 py-2 text-sm text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50"},"Notes"),n.createElement("button",{onClick:()=>$t(fe._id),className:"px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"},"Delete"))))),J.totalPages>1&&n.createElement(aa,{currentPage:J.currentPage,totalPages:J.totalPages,totalItems:J.totalCount,itemsPerPage:J.limit,onPageChange:fe=>ut(fe),itemLabel:"memberships"}))),n.createElement(br,{isOpen:Y,onClose:()=>{j(!1),R(null),At()},title:"Edit membership plan",size:"lg"},n.createElement("form",{onSubmit:Qe,className:"space-y-3"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},n.createElement("input",{type:"text",value:d.name,onChange:fe=>h({...d,name:fe.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Plan name"}),n.createElement("input",{type:"number",min:"1",value:d.durationInDays,onChange:fe=>h({...d,durationInDays:fe.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Duration in days"}),n.createElement("input",{type:"number",min:"0",value:d.price,onChange:fe=>h({...d,price:fe.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Price"}),n.createElement("input",{type:"number",min:"0",value:d.compareAtPrice,onChange:fe=>h({...d,compareAtPrice:fe.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Compare at price"}),n.createElement("input",{type:"number",min:"1",value:d.displayOrder,onChange:fe=>h({...d,displayOrder:fe.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Display order"}),n.createElement("input",{type:"number",min:"0",value:d.maxPurchases,onChange:fe=>h({...d,maxPurchases:fe.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Max purchases"})),n.createElement("textarea",{rows:3,value:d.description,onChange:fe=>h({...d,description:fe.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Description"}),n.createElement("div",{className:"flex items-center gap-4"},n.createElement("label",{className:"flex items-center gap-2 text-sm text-gray-700"},n.createElement("input",{type:"checkbox",checked:d.isActive,onChange:fe=>h({...d,isActive:fe.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),"Active"),n.createElement("label",{className:"flex items-center gap-2 text-sm text-gray-700"},n.createElement("input",{type:"checkbox",checked:d.isFeatured,onChange:fe=>h({...d,isFeatured:fe.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),"Featured")),n.createElement("div",{className:"space-y-2"},n.createElement("div",{className:"flex flex-col sm:flex-row gap-3"},n.createElement("input",{type:"text",value:d.perkInput,onChange:fe=>h({...d,perkInput:fe.target.value}),onKeyDown:fe=>{fe.key==="Enter"&&(fe.preventDefault(),ur())},placeholder:"Add perk",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("button",{type:"button",onClick:ur,className:"inline-flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800"},n.createElement(Mr,{className:"h-4 w-4"}),"Add perk")),d.perks.length>0&&n.createElement("div",{className:"flex flex-wrap gap-2"},d.perks.map(fe=>n.createElement("span",{key:fe,className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gray-100 text-gray-800 text-sm"},fe,n.createElement("button",{type:"button",onClick:()=>ea(fe),className:"text-gray-500 hover:text-gray-700"},"x"))))),n.createElement("div",{className:"flex items-center justify-end gap-2"},n.createElement("button",{type:"button",onClick:()=>{j(!1),R(null),At()},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"},"Close"),n.createElement("button",{type:"submit",disabled:_,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60"},_?n.createElement(xt,{className:"h-4 w-4 animate-spin"}):n.createElement(Hm,{className:"h-4 w-4"}),"Save changes")))),n.createElement(br,{isOpen:tt,onClose:()=>{it(!1),be(null),at("")},title:"Extend membership"},n.createElement("form",{onSubmit:ta,className:"space-y-3"},n.createElement("p",{className:"text-sm text-gray-600"},"Extend ",$e?.membershipPlanId?.name," for ",$e?.phone),n.createElement("input",{type:"number",min:"1",value:Xe,onChange:fe=>at(fe.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Additional days"}),n.createElement("div",{className:"flex items-center justify-end gap-2"},n.createElement("button",{type:"button",onClick:()=>{it(!1),be(null),at("")},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"},"Close"),n.createElement("button",{type:"submit",disabled:qe,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60"},qe?n.createElement(xt,{className:"h-4 w-4 animate-spin"}):n.createElement(Ax,{className:"h-4 w-4"}),"Extend")))),n.createElement(br,{isOpen:pt,onClose:()=>{We(!1),be(null),ve("")},title:"Cancel membership"},n.createElement("form",{onSubmit:bt,className:"space-y-3"},n.createElement("textarea",{rows:3,value:Le,onChange:fe=>ve(fe.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Cancellation reason"}),n.createElement("div",{className:"flex items-center justify-end gap-2"},n.createElement("button",{type:"button",onClick:()=>{We(!1),be(null),ve("")},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"},"Close"),n.createElement("button",{type:"submit",disabled:qe,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-60"},qe?n.createElement(xt,{className:"h-4 w-4 animate-spin"}):n.createElement(ns,{className:"h-4 w-4"}),"Cancel membership")))),n.createElement(br,{isOpen:lt,onClose:()=>{Fe(!1),be(null),oe("")},title:"Update admin notes",size:"lg"},n.createElement("form",{onSubmit:Je,className:"space-y-3"},n.createElement("textarea",{rows:4,value:Ue,onChange:fe=>oe(fe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Add admin notes"}),n.createElement("div",{className:"flex items-center justify-end gap-2"},n.createElement("button",{type:"button",onClick:()=>{Fe(!1),be(null),oe("")},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"},"Close"),n.createElement("button",{type:"submit",disabled:qe,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60"},qe?n.createElement(xt,{className:"h-4 w-4 animate-spin"}):n.createElement(pg,{className:"h-4 w-4"}),"Save notes")))),n.createElement(Wa,{isOpen:!!z,onClose:()=>L(null),onConfirm:st,title:"Delete membership plan",message:"Users will not be able to purchase this plan after deletion.",confirmText:"Delete plan",variant:"danger",isLoading:qe}),n.createElement(Wa,{isOpen:!!mt,onClose:()=>$t(null),onConfirm:Lt,title:"Delete membership",message:"This will remove the membership record. This action cannot be undone.",confirmText:"Delete membership",variant:"danger",isLoading:qe}))}const hc={CLUBS:"/web/clubs",CONNECT_CLUBS:"/app/connect/clubs"},gc={createClub:async e=>(console.log("[ClubsService] Creating club"),ze(je.post(hc.CLUBS,e))),getClubs:async(e={})=>(console.log("[ClubsService] Fetching clubs with params:",e),ze(je.get(hc.CLUBS,{params:e}))),getClubById:async e=>(console.log("[ClubsService] Fetching club:",e),ze(je.get(`${hc.CLUBS}/${e}`))),updateClub:async(e,t)=>(console.log("[ClubsService] Updating club:",e),ze(je.put(`${hc.CLUBS}/${e}`,t))),deleteClub:async e=>(console.log("[ClubsService] Deleting club:",e),ze(je.delete(`${hc.CLUBS}/${e}`))),getClubStats:async e=>(console.log("[ClubsService] Fetching club stats:",e),ze(je.get(`${hc.CLUBS}/${e}/stats`))),getClubMembers:async(e,t={})=>(console.log("[ClubsService] Fetching club members:",e),ze(je.get(`${hc.CONNECT_CLUBS}/${e}/members`,{params:t})))},f_={name:"",description:"",thumbnail:""},h_={currentPage:1,totalPages:0,totalCount:0,limit:10};function Ome(){const{hasRole:e}=Us(),t=e(["SUPER_ADMIN","ADMIN"]),[r,a]=N.useState("clubs"),[l,o]=N.useState([]),[d,h]=N.useState(f_),[g,p]=N.useState({search:""}),[x,E]=N.useState({...h_,limit:12}),[C,O]=N.useState(!1),[_,P]=N.useState(!1),[k,I]=N.useState(null),[F,R]=N.useState(null),[Y,j]=N.useState(!1),[z,L]=N.useState(null),[q,V]=N.useState(null),[W,H]=N.useState(!1),[$,ce]=N.useState(!1),[me,ae]=N.useState(null),[J,se]=N.useState([]),[Ee,we]=N.useState(h_),[te,K]=N.useState(!1),[ee,ge]=N.useState(null),le=async(oe=1)=>{O(!0),I(null);const qe={page:oe,limit:x.limit,sortBy:"createdAt",sortOrder:"desc"};g.search.trim()&&(qe.search=g.search.trim());const Ne=await gc.getClubs(qe);if(Ne.success){const tt=Ne.data?.clubs||[],it=await Promise.all(tt.map(async pt=>{try{const We=await gc.getClubStats(pt._id);if(console.log("[Clubs] Stats result for",pt.name,":",We),We.success&&We.data){const lt=We.data.stats||We.data;return console.log("[Clubs] Extracted stats:",lt),{...pt,memberCount:lt.totalMembers??pt.memberCount,postCount:lt.totalPosts??pt.postCount}}}catch(We){console.error("[Clubs] Stats fetch error for",pt.name,":",We)}return pt}));o(it),E({currentPage:Ne.data?.pagination?.currentPage||oe,totalPages:Ne.data?.pagination?.totalPages||0,totalCount:Ne.data?.pagination?.totalCount||0,limit:Ne.data?.pagination?.limit||x.limit})}else I(Ne.message||"Failed to load clubs");O(!1)},Ce=async(oe=1)=>{if(!me)return;K(!0),ge(null);const qe={page:oe,limit:Ee.limit},Ne=await gc.getClubMembers(me._id,qe);Ne.success?(se(Ne.data?.members||[]),we({currentPage:Ne.data?.pagination?.currentPage||oe,totalPages:Ne.data?.pagination?.totalPages||0,totalCount:Ne.data?.pagination?.totalCount||0,limit:Ne.data?.pagination?.limit||Ee.limit})):ge(Ne.message||"Failed to load members"),K(!1)};N.useEffect(()=>{le(1)},[]),N.useEffect(()=>{r==="members"&&me&&Ce(1)},[r,me]);const ie=()=>h(f_),de=async oe=>{if(oe.preventDefault(),!t)return;P(!0),I(null);const qe={name:d.name.trim(),description:d.description.trim(),thumbnail:d.thumbnail.trim()||void 0},Ne=await gc.createClub(qe);Ne.success?(ie(),le(1)):I(Ne.message||"Failed to create club"),P(!1)},$e=oe=>{R(oe),h({name:oe.name||"",description:oe.description||"",thumbnail:oe.thumbnail||""}),j(!0)},be=async oe=>{if(oe.preventDefault(),!F)return;P(!0),I(null);const qe={name:d.name.trim(),description:d.description.trim(),thumbnail:d.thumbnail.trim()||void 0},Ne=await gc.updateClub(F._id,qe);Ne.success?(j(!1),R(null),ie(),le(x.currentPage)):I(Ne.message||"Failed to update club"),P(!1)},Xe=async()=>{z&&(ce(!0),await gc.deleteClub(z),ce(!1),L(null),le(x.currentPage))},at=async oe=>{ce(!0);const qe=await gc.getClubStats(oe._id);qe.success&&(V(qe.data?.stats||null),H(!0)),ce(!1)},Le=oe=>{ae(oe),a("members")},ve=()=>{ae(null),a("clubs"),se([])},Ue=oe=>oe?new Date(oe).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-";return n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},n.createElement("div",null,me?n.createElement("div",{className:"flex items-center gap-3"},n.createElement("button",{onClick:ve,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors"},n.createElement(NU,{className:"h-5 w-5 text-gray-600"})),n.createElement("div",null,n.createElement("h1",{className:"text-2xl font-bold text-gray-900"},me.name),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},me.memberCount||0," members - ",me.postCount||0," posts"))):n.createElement("div",null,n.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Clubs & Connect"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Manage clubs and members."))),n.createElement("button",{onClick:()=>{r==="clubs"?le(x.currentPage):r==="members"&&Ce(Ee.currentPage)},className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"},n.createElement(os,{className:"h-4 w-4"}),"Refresh")),n.createElement("div",{className:"bg-white border border-gray-200 rounded-xl p-2 shadow-sm flex gap-2"},n.createElement("button",{onClick:()=>{me?ve():a("clubs")},className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold ${r==="clubs"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`},"Clubs"),n.createElement("button",{onClick:()=>a("members"),disabled:!me,className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold ${r==="members"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"} ${me?"":"opacity-50 cursor-not-allowed"}`},"Members")),r==="clubs"&&n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},n.createElement("div",{className:"flex items-start justify-between gap-3"},n.createElement("div",null,n.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Create new club"),n.createElement("p",{className:"text-sm text-gray-500"},"Add a new community for users to join.")),k&&n.createElement("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 text-red-700 rounded-lg"},n.createElement(ns,{className:"h-4 w-4"}),n.createElement("span",{className:"text-sm"},k))),n.createElement("form",{onSubmit:de,className:"mt-5 space-y-4"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement("input",{type:"text",value:d.name,onChange:oe=>h({...d,name:oe.target.value}),required:!0,placeholder:"Club name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("textarea",{value:d.description,onChange:oe=>h({...d,description:oe.target.value}),rows:2,placeholder:"Description",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),n.createElement(Ol,{label:"Club Thumbnail",value:d.thumbnail,onUpload:oe=>h({...d,thumbnail:oe}),folder:"clubs",type:"image",placeholder:"Drop club thumbnail here or click to upload",disabled:_}),n.createElement("div",{className:"flex justify-end"},n.createElement("button",{type:"submit",disabled:_,className:"inline-flex items-center gap-2 px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60"},_?n.createElement(xt,{className:"h-4 w-4 animate-spin"}):n.createElement(Mr,{className:"h-4 w-4"}),"Create club")))),n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200"},n.createElement("div",{className:"p-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3"},n.createElement("div",{className:"flex-1 relative"},n.createElement(ya,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.createElement("input",{type:"text",value:g.search,onChange:oe=>p({...g,search:oe.target.value}),onKeyDown:oe=>oe.key==="Enter"&&le(1),onBlur:()=>le(1),placeholder:"Search clubs",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),n.createElement("button",{onClick:()=>{p({search:""}),le(1)},className:"px-3 py-2 text-sm text-gray-600 bg-gray-100 border border-gray-200 rounded-lg hover:bg-gray-200"},"Reset")),C?n.createElement("div",{className:"p-6 flex items-center justify-center gap-2 text-gray-600"},n.createElement(xt,{className:"h-5 w-5 animate-spin"}),"Loading clubs..."):l.length===0?n.createElement("div",{className:"p-6 text-center text-gray-500"},"No clubs found."):n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 p-4"},l.map(oe=>n.createElement("div",{key:oe._id,className:"border border-gray-200 rounded-xl overflow-hidden hover:shadow-md transition"},n.createElement("div",{className:"h-32 bg-gradient-to-br from-gray-100 to-gray-200 relative"},oe.thumbnail?n.createElement("img",{src:oe.thumbnail,alt:oe.name,className:"w-full h-full object-cover"}):n.createElement("div",{className:"w-full h-full flex items-center justify-center"},n.createElement(Oo,{className:"h-12 w-12 text-gray-400"})),oe.isDeleted&&n.createElement("span",{className:"absolute top-2 right-2 px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-700"},"Deleted")),n.createElement("div",{className:"p-4 space-y-3"},n.createElement("div",null,n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},oe.name),n.createElement("p",{className:"text-sm text-gray-500 line-clamp-2"},oe.description||"No description")),n.createElement("div",{className:"flex items-center gap-4 text-sm text-gray-600"},n.createElement("span",{className:"flex items-center gap-1"},n.createElement(Oo,{className:"h-4 w-4"}),oe.memberCount||0," members"),n.createElement("span",{className:"flex items-center gap-1"},n.createElement(Fj,{className:"h-4 w-4"}),oe.postCount||0," posts")),n.createElement("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100"},n.createElement("button",{onClick:()=>Le(oe),className:"flex-1 px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 flex items-center justify-center gap-1"},n.createElement(Oo,{className:"h-4 w-4"}),"View Members"),n.createElement("button",{onClick:()=>at(oe),className:"px-3 py-2 text-sm text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100"},n.createElement(ll,{className:"h-4 w-4"}))),n.createElement("div",{className:"flex items-center gap-2"},n.createElement("button",{onClick:()=>$e(oe),className:"flex-1 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg hover:bg-gray-800 flex items-center justify-center gap-1"},n.createElement(I4,{className:"h-4 w-4"}),"Edit"),n.createElement("button",{onClick:()=>L(oe._id),className:"px-3 py-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100"},n.createElement(xr,{className:"h-4 w-4"}))))))),x.totalPages>1&&n.createElement(aa,{currentPage:x.currentPage,totalPages:x.totalPages,totalItems:x.totalCount,itemsPerPage:x.limit,onPageChange:oe=>le(oe),itemLabel:"clubs"}))),r==="members"&&me&&n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200"},n.createElement("div",{className:"p-4 border-b border-gray-200"},n.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Club Members"),n.createElement("p",{className:"text-sm text-gray-500"},Ee.totalCount," members in this club")),te?n.createElement("div",{className:"p-6 flex items-center justify-center gap-2 text-gray-600"},n.createElement(xt,{className:"h-5 w-5 animate-spin"}),"Loading members..."):ee?n.createElement("div",{className:"p-6 text-center text-red-500"},ee):J.length===0?n.createElement("div",{className:"p-6 text-center text-gray-500"},"No members in this club."):n.createElement("div",{className:"divide-y divide-gray-200"},J.map(oe=>n.createElement("div",{key:oe.id,className:"p-4 flex items-center justify-between gap-4"},n.createElement("div",{className:"flex items-center gap-3"},n.createElement("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-800 to-gray-600 flex items-center justify-center text-white font-bold text-sm"},oe.name?.charAt(0)?.toUpperCase()||"U"),n.createElement("div",null,n.createElement("h3",{className:"text-sm font-semibold text-gray-900"},oe.name||"Unknown"),n.createElement("p",{className:"text-xs text-gray-500"},oe.email||oe.phone||"-"))),n.createElement("div",{className:"flex items-center gap-4 text-sm text-gray-600"},n.createElement("span",null,oe.followerCount||0," followers"),n.createElement("span",{className:"text-xs text-gray-400"},"Joined ",Ue(oe.joinedAt)))))),Ee.totalPages>1&&n.createElement(aa,{currentPage:Ee.currentPage,totalPages:Ee.totalPages,totalItems:Ee.totalCount,itemsPerPage:Ee.limit,onPageChange:oe=>Ce(oe),itemLabel:"members"})),n.createElement(br,{isOpen:Y,onClose:()=>{j(!1),R(null),ie()},title:"Edit club",size:"lg"},n.createElement("form",{onSubmit:be,className:"space-y-4"},n.createElement("input",{type:"text",value:d.name,onChange:oe=>h({...d,name:oe.target.value}),required:!0,placeholder:"Club name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("textarea",{value:d.description,onChange:oe=>h({...d,description:oe.target.value}),rows:3,placeholder:"Description",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement(Ol,{label:"Club Thumbnail",value:d.thumbnail,onUpload:oe=>h({...d,thumbnail:oe}),folder:"clubs",type:"image",placeholder:"Drop club thumbnail here or click to upload",disabled:_}),n.createElement("div",{className:"flex items-center justify-end gap-2"},n.createElement("button",{type:"button",onClick:()=>{j(!1),R(null),ie()},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"},"Cancel"),n.createElement("button",{type:"submit",disabled:_,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60"},_?n.createElement(xt,{className:"h-4 w-4 animate-spin"}):n.createElement(I4,{className:"h-4 w-4"}),"Save changes")))),n.createElement(br,{isOpen:W,onClose:()=>{H(!1),V(null)},title:"Club Statistics",size:"lg"},q&&n.createElement("div",{className:"space-y-4"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},q.clubName),n.createElement("div",{className:"grid grid-cols-2 gap-4"},n.createElement("div",{className:"p-4 bg-blue-50 rounded-lg"},n.createElement("p",{className:"text-2xl font-bold text-blue-700"},q.totalMembers||0),n.createElement("p",{className:"text-sm text-blue-600"},"Total Members")),n.createElement("div",{className:"p-4 bg-green-50 rounded-lg"},n.createElement("p",{className:"text-2xl font-bold text-green-700"},q.totalPosts||0),n.createElement("p",{className:"text-sm text-green-600"},"Total Posts")),n.createElement("div",{className:"p-4 bg-purple-50 rounded-lg col-span-2"},n.createElement("p",{className:"text-2xl font-bold text-purple-700"},q.recentPosts||0),n.createElement("p",{className:"text-sm text-purple-600"},"Recent Posts"))),q.topPosters?.length>0&&n.createElement("div",null,n.createElement("h4",{className:"text-sm font-semibold text-gray-700 mb-2"},"Top Posters"),n.createElement("div",{className:"space-y-2"},q.topPosters.map((oe,qe)=>n.createElement("div",{key:oe.userId,className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement("span",{className:"w-6 h-6 rounded-full bg-gray-800 text-white text-xs flex items-center justify-center font-bold"},qe+1),n.createElement("span",{className:"text-sm font-medium text-gray-900"},oe.name)),n.createElement("span",{className:"text-sm text-gray-600"},oe.postCount," posts"))))))),n.createElement(Wa,{isOpen:!!z,onClose:()=>L(null),onConfirm:Xe,title:"Delete club",message:"This will delete the club and all associated data (members, posts). This action cannot be undone.",confirmText:"Delete club",variant:"danger",isLoading:$}))}const g_={APP_VERSION:"/web/settings/app-version"},p_={getAppVersion:async()=>(console.log("[SettingsService] Fetching app version settings"),ze(je.get(g_.APP_VERSION))),updateAppVersion:async e=>(console.log("[SettingsService] Updating app version settings"),ze(je.put(g_.APP_VERSION,e)))},y_={currentVersion:"",minimumVersion:"",forceUpdate:!1,updateUrl:""};function _me(){const[e,t]=N.useState(y_),[r,a]=N.useState(y_),[l,o]=N.useState(!1),[d,h]=N.useState(!1),[g,p]=N.useState(null),[x,E]=N.useState(null),C=N.useMemo(()=>e.currentVersion!==r.currentVersion||e.minimumVersion!==r.minimumVersion||e.forceUpdate!==r.forceUpdate||e.updateUrl!==r.updateUrl,[e,r]),O=async()=>{o(!0),p(null),E(null);const k=await p_.getAppVersion();if(k.success){const I=k.data?.appVersion||{},F={currentVersion:I.currentVersion||"",minimumVersion:I.minimumVersion||"",forceUpdate:I.forceUpdate||!1,updateUrl:I.updateUrl||""};t(F),a(F)}else p(k.message||"Failed to fetch app version settings");o(!1)};N.useEffect(()=>{O()},[]);const _=async k=>{k.preventDefault(),h(!0),p(null),E(null);const I={currentVersion:e.currentVersion.trim(),minimumVersion:e.minimumVersion.trim(),forceUpdate:!!e.forceUpdate,updateUrl:e.updateUrl.trim()},F=await p_.updateAppVersion(I);if(F.success){const R={currentVersion:I.currentVersion,minimumVersion:I.minimumVersion,forceUpdate:I.forceUpdate,updateUrl:I.updateUrl};a(R),t(R),E("App version settings updated successfully")}else p(F.message||"Failed to update app version settings");h(!1)},P=()=>{t(r),E(null),p(null)};return n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},n.createElement("div",null,n.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Settings"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Control app versioning and force updates for mobile clients.")),n.createElement("button",{onClick:O,disabled:l,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-60"},n.createElement(os,{className:`h-4 w-4 ${l?"animate-spin":""}`}),"Refresh")),n.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},n.createElement("div",{className:"flex items-start gap-3 mb-4"},n.createElement("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-800"},n.createElement(ez,{className:"h-5 w-5"})),n.createElement("div",null,n.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"App Version Control"),n.createElement("p",{className:"text-sm text-gray-500"},"Configure latest and minimum supported app versions. Users below minimum will be forced to update."))),g&&n.createElement("div",{className:"mb-4 px-4 py-3 rounded-lg border border-red-200 bg-red-50 text-red-700 text-sm"},g),x&&n.createElement("div",{className:"mb-4 px-4 py-3 rounded-lg border border-emerald-200 bg-emerald-50 text-emerald-700 text-sm"},x),n.createElement("form",{onSubmit:_,className:"space-y-4"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement("div",{className:"space-y-1"},n.createElement("label",{className:"text-sm font-medium text-gray-700"},"Current Version"),n.createElement("input",{type:"text",value:e.currentVersion,onChange:k=>t({...e,currentVersion:k.target.value}),placeholder:"e.g. 2.5.0",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("p",{className:"text-xs text-gray-500"},"Latest version available on the store.")),n.createElement("div",{className:"space-y-1"},n.createElement("label",{className:"text-sm font-medium text-gray-700"},"Minimum Version"),n.createElement("input",{type:"text",value:e.minimumVersion,onChange:k=>t({...e,minimumVersion:k.target.value}),placeholder:"e.g. 2.3.0",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("p",{className:"text-xs text-gray-500"},"Users below this version will see a force update prompt."))),n.createElement("div",{className:"space-y-1"},n.createElement("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2"},n.createElement(oz,{className:"h-4 w-4 text-gray-600"}),"Force Update"),n.createElement("div",{className:"flex items-center gap-3"},n.createElement("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700"},n.createElement("input",{type:"checkbox",checked:e.forceUpdate,onChange:k=>t({...e,forceUpdate:k.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),"Require update for users below minimum version"))),n.createElement("div",{className:"space-y-1"},n.createElement("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2"},n.createElement(Op,{className:"h-4 w-4 text-gray-600"}),"Update URL"),n.createElement("input",{type:"url",value:e.updateUrl,onChange:k=>t({...e,updateUrl:k.target.value}),placeholder:"https://play.google.com/store/apps/details?id=...",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),n.createElement("p",{className:"text-xs text-gray-500"},"Link to the app page on the store.")),n.createElement("div",{className:"flex items-center justify-end gap-3 pt-2"},n.createElement("button",{type:"button",onClick:P,disabled:!C||d,className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50"},"Reset"),n.createElement("button",{type:"submit",disabled:d||l||!C,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60"},d?n.createElement(xt,{className:"h-4 w-4 animate-spin"}):n.createElement(Wj,{className:"h-4 w-4"}),"Save Changes")))))}function Dme(){return n.createElement(TB,null,n.createElement(mU,null,n.createElement(nB,null,n.createElement(Yr,{path:"/login",element:n.createElement(hU,null,n.createElement($z,null))}),n.createElement(Yr,{element:n.createElement(fU,null,n.createElement(Hz,null))},n.createElement(Yr,{path:"/dashboard",element:n.createElement(_ce,null)}),n.createElement(Yr,{path:"/events",element:n.createElement(Gce,null)}),n.createElement(Yr,{path:"/enrollments",element:n.createElement(Yce,null)}),n.createElement(Yr,{path:"/coupons",element:n.createElement(Xce,null)}),n.createElement(Yr,{path:"/users",element:n.createElement(eue,null)}),n.createElement(Yr,{path:"/admins",element:n.createElement(hue,null)}),n.createElement(Yr,{path:"/payments",element:n.createElement(gue,null)}),n.createElement(Yr,{path:"/cash-tickets",element:n.createElement(kue,null)}),n.createElement(Yr,{path:"/vouchers",element:n.createElement(Bue,null)}),n.createElement(Yr,{path:"/sessions",element:n.createElement(Xue,null)}),n.createElement(Yr,{path:"/quizes",element:n.createElement(lde,null)}),n.createElement(Yr,{path:"/challenges",element:n.createElement(hde,null)}),n.createElement(Yr,{path:"/polls",element:n.createElement(Sde,null)}),n.createElement(Yr,{path:"/stories",element:n.createElement(Vde,null)}),n.createElement(Yr,{path:"/memberships",element:n.createElement(Tme,null)}),n.createElement(Yr,{path:"/settings",element:n.createElement(_me,null)}),n.createElement(Yr,{path:"/clubs",element:n.createElement(Ome,null)}),n.createElement(Yr,{path:"/scan-qr",element:n.createElement(pme,null)}),n.createElement(Yr,{path:"/ticket-reshare",element:n.createElement(wme,null)})),n.createElement(Yr,{path:"/",element:n.createElement(dg,{to:"/dashboard",replace:!0})}),n.createElement(Yr,{path:"*",element:n.createElement(dg,{to:"/dashboard",replace:!0})}))))}uL.createRoot(document.getElementById("root")).render(n.createElement(N.StrictMode,null,n.createElement(Dme,null)));
