function KD(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const l in n)if(l!=="default"&&!(l in e)){const i=Object.getOwnPropertyDescriptor(n,l);i&&Object.defineProperty(e,l,i.get?i:{enumerable:!0,get:()=>n[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(l){if(l.ep)return;l.ep=!0;const i=r(l);fetch(l.href,i)}})();var Ng=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _x={exports:{}},Mt={};var p3;function BL(){if(p3)return Mt;p3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),u=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),C=Symbol.iterator;function T(K){return K===null||typeof K!="object"?null:(K=C&&K[C]||K["@@iterator"],typeof K=="function"?K:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,k={};function R(K,te,ge){this.props=K,this.context=te,this.refs=k,this.updater=ge||D}R.prototype.isReactComponent={},R.prototype.setState=function(K,te){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,te,"setState")},R.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function B(){}B.prototype=R.prototype;function M(K,te,ge){this.props=K,this.context=te,this.refs=k,this.updater=ge||D}var G=M.prototype=new B;G.constructor=M,P(G,R.prototype),G.isPureReactComponent=!0;var F=Array.isArray;function U(){}var L={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function j(K,te,ge){var oe=ge.ref;return{$$typeof:e,type:K,key:te,ref:oe!==void 0?oe:null,props:ge}}function Y(K,te){return j(K.type,te,K.props)}function H(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function q(K){var te={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ge){return te[ge]})}var le=/\/+/g;function ue(K,te){return typeof K=="object"&&K!==null&&K.key!=null?q(""+K.key):te.toString(36)}function re(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(U,U):(K.status="pending",K.then(function(te){K.status==="pending"&&(K.status="fulfilled",K.value=te)},function(te){K.status==="pending"&&(K.status="rejected",K.reason=te)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function J(K,te,ge,oe,Ne){var ie=typeof K;(ie==="undefined"||ie==="boolean")&&(K=null);var me=!1;if(K===null)me=!0;else switch(ie){case"bigint":case"string":case"number":me=!0;break;case"object":switch(K.$$typeof){case e:case t:me=!0;break;case y:return me=K._init,J(me(K._payload),te,ge,oe,Ne)}}if(me)return Ne=Ne(K),me=oe===""?"."+ue(K,0):oe,F(Ne)?(ge="",me!=null&&(ge=me.replace(le,"$&/")+"/"),J(Ne,te,ge,"",function(We){return We})):Ne!=null&&(H(Ne)&&(Ne=Y(Ne,ge+(Ne.key==null||K&&K.key===Ne.key?"":(""+Ne.key).replace(le,"$&/")+"/")+me)),te.push(Ne)),1;me=0;var $e=oe===""?".":oe+":";if(F(K))for(var ve=0;ve<K.length;ve++)oe=K[ve],ie=$e+ue(oe,ve),me+=J(oe,te,ge,ie,Ne);else if(ve=T(K),typeof ve=="function")for(K=ve.call(K),ve=0;!(oe=K.next()).done;)oe=oe.value,ie=$e+ue(oe,ve++),me+=J(oe,te,ge,ie,Ne);else if(ie==="object"){if(typeof K.then=="function")return J(re(K),te,ge,oe,Ne);throw te=String(K),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return me}function ae(K,te,ge){if(K==null)return K;var oe=[],Ne=0;return J(K,oe,"","",function(ie){return te.call(ge,ie,Ne++)}),oe}function pe(K){if(K._status===-1){var te=K._result;te=te(),te.then(function(ge){(K._status===0||K._status===-1)&&(K._status=1,K._result=ge)},function(ge){(K._status===0||K._status===-1)&&(K._status=2,K._result=ge)}),K._status===-1&&(K._status=0,K._result=te)}if(K._status===1)return K._result.default;throw K._result}var xe=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},ee={map:ae,forEach:function(K,te,ge){ae(K,function(){te.apply(this,arguments)},ge)},count:function(K){var te=0;return ae(K,function(){te++}),te},toArray:function(K){return ae(K,function(te){return te})||[]},only:function(K){if(!H(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return Mt.Activity=v,Mt.Children=ee,Mt.Component=R,Mt.Fragment=r,Mt.Profiler=l,Mt.PureComponent=M,Mt.StrictMode=n,Mt.Suspense=h,Mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Mt.__COMPILER_RUNTIME={__proto__:null,c:function(K){return L.H.useMemoCache(K)}},Mt.cache=function(K){return function(){return K.apply(null,arguments)}},Mt.cacheSignal=function(){return null},Mt.cloneElement=function(K,te,ge){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var oe=P({},K.props),Ne=K.key;if(te!=null)for(ie in te.key!==void 0&&(Ne=""+te.key),te)!V.call(te,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&te.ref===void 0||(oe[ie]=te[ie]);var ie=arguments.length-2;if(ie===1)oe.children=ge;else if(1<ie){for(var me=Array(ie),$e=0;$e<ie;$e++)me[$e]=arguments[$e+2];oe.children=me}return j(K.type,Ne,oe)},Mt.createContext=function(K){return K={$$typeof:u,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:i,_context:K},K},Mt.createElement=function(K,te,ge){var oe,Ne={},ie=null;if(te!=null)for(oe in te.key!==void 0&&(ie=""+te.key),te)V.call(te,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(Ne[oe]=te[oe]);var me=arguments.length-2;if(me===1)Ne.children=ge;else if(1<me){for(var $e=Array(me),ve=0;ve<me;ve++)$e[ve]=arguments[ve+2];Ne.children=$e}if(K&&K.defaultProps)for(oe in me=K.defaultProps,me)Ne[oe]===void 0&&(Ne[oe]=me[oe]);return j(K,ie,Ne)},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(K){return{$$typeof:g,render:K}},Mt.isValidElement=H,Mt.lazy=function(K){return{$$typeof:y,_payload:{_status:-1,_result:K},_init:pe}},Mt.memo=function(K,te){return{$$typeof:p,type:K,compare:te===void 0?null:te}},Mt.startTransition=function(K){var te=L.T,ge={};L.T=ge;try{var oe=K(),Ne=L.S;Ne!==null&&Ne(ge,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(U,xe)}catch(ie){xe(ie)}finally{te!==null&&ge.types!==null&&(te.types=ge.types),L.T=te}},Mt.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Mt.use=function(K){return L.H.use(K)},Mt.useActionState=function(K,te,ge){return L.H.useActionState(K,te,ge)},Mt.useCallback=function(K,te){return L.H.useCallback(K,te)},Mt.useContext=function(K){return L.H.useContext(K)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(K,te){return L.H.useDeferredValue(K,te)},Mt.useEffect=function(K,te){return L.H.useEffect(K,te)},Mt.useEffectEvent=function(K){return L.H.useEffectEvent(K)},Mt.useId=function(){return L.H.useId()},Mt.useImperativeHandle=function(K,te,ge){return L.H.useImperativeHandle(K,te,ge)},Mt.useInsertionEffect=function(K,te){return L.H.useInsertionEffect(K,te)},Mt.useLayoutEffect=function(K,te){return L.H.useLayoutEffect(K,te)},Mt.useMemo=function(K,te){return L.H.useMemo(K,te)},Mt.useOptimistic=function(K,te){return L.H.useOptimistic(K,te)},Mt.useReducer=function(K,te,ge){return L.H.useReducer(K,te,ge)},Mt.useRef=function(K){return L.H.useRef(K)},Mt.useState=function(K){return L.H.useState(K)},Mt.useSyncExternalStore=function(K,te,ge){return L.H.useSyncExternalStore(K,te,ge)},Mt.useTransition=function(){return L.H.useTransition()},Mt.version="19.2.0",Mt}var y3;function hd(){return y3||(y3=1,_x.exports=BL()),_x.exports}var w=hd();const a=jl(w),FL=KD({__proto__:null,default:a},[w]);var kx={exports:{}},Nm={},Px={exports:{}},Ix={};var x3;function UL(){return x3||(x3=1,(function(e){function t(J,ae){var pe=J.length;J.push(ae);e:for(;0<pe;){var xe=pe-1>>>1,ee=J[xe];if(0<l(ee,ae))J[xe]=ae,J[pe]=ee,pe=xe;else break e}}function r(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var ae=J[0],pe=J.pop();if(pe!==ae){J[0]=pe;e:for(var xe=0,ee=J.length,K=ee>>>1;xe<K;){var te=2*(xe+1)-1,ge=J[te],oe=te+1,Ne=J[oe];if(0>l(ge,pe))oe<ee&&0>l(Ne,ge)?(J[xe]=Ne,J[oe]=pe,xe=oe):(J[xe]=ge,J[te]=pe,xe=te);else if(oe<ee&&0>l(Ne,pe))J[xe]=Ne,J[oe]=pe,xe=oe;else break e}}return ae}function l(J,ae){var pe=J.sortIndex-ae.sortIndex;return pe!==0?pe:J.id-ae.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var u=Date,g=u.now();e.unstable_now=function(){return u.now()-g}}var h=[],p=[],y=1,v=null,C=3,T=!1,D=!1,P=!1,k=!1,R=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function G(J){for(var ae=r(p);ae!==null;){if(ae.callback===null)n(p);else if(ae.startTime<=J)n(p),ae.sortIndex=ae.expirationTime,t(h,ae);else break;ae=r(p)}}function F(J){if(P=!1,G(J),!D)if(r(h)!==null)D=!0,U||(U=!0,q());else{var ae=r(p);ae!==null&&re(F,ae.startTime-J)}}var U=!1,L=-1,V=5,j=-1;function Y(){return k?!0:!(e.unstable_now()-j<V)}function H(){if(k=!1,U){var J=e.unstable_now();j=J;var ae=!0;try{e:{D=!1,P&&(P=!1,B(L),L=-1),T=!0;var pe=C;try{t:{for(G(J),v=r(h);v!==null&&!(v.expirationTime>J&&Y());){var xe=v.callback;if(typeof xe=="function"){v.callback=null,C=v.priorityLevel;var ee=xe(v.expirationTime<=J);if(J=e.unstable_now(),typeof ee=="function"){v.callback=ee,G(J),ae=!0;break t}v===r(h)&&n(h),G(J)}else n(h);v=r(h)}if(v!==null)ae=!0;else{var K=r(p);K!==null&&re(F,K.startTime-J),ae=!1}}break e}finally{v=null,C=pe,T=!1}ae=void 0}}finally{ae?q():U=!1}}}var q;if(typeof M=="function")q=function(){M(H)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ue=le.port2;le.port1.onmessage=H,q=function(){ue.postMessage(null)}}else q=function(){R(H,0)};function re(J,ae){L=R(function(){J(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_next=function(J){switch(C){case 1:case 2:case 3:var ae=3;break;default:ae=C}var pe=C;C=ae;try{return J()}finally{C=pe}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(J,ae){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var pe=C;C=J;try{return ae()}finally{C=pe}},e.unstable_scheduleCallback=function(J,ae,pe){var xe=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?xe+pe:xe):pe=xe,J){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=pe+ee,J={id:y++,callback:ae,priorityLevel:J,startTime:pe,expirationTime:ee,sortIndex:-1},pe>xe?(J.sortIndex=pe,t(p,J),r(h)===null&&J===r(p)&&(P?(B(L),L=-1):P=!0,re(F,pe-xe))):(J.sortIndex=ee,t(h,J),D||T||(D=!0,U||(U=!0,q()))),J},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(J){var ae=C;return function(){var pe=C;C=ae;try{return J.apply(this,arguments)}finally{C=pe}}}})(Ix)),Ix}var b3;function jL(){return b3||(b3=1,Px.exports=UL()),Px.exports}var Mx={exports:{}},un={};var v3;function zL(){if(v3)return un;v3=1;var e=hd();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function i(h,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:h,containerInfo:p,implementation:y}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,un.createPortal=function(h,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return i(h,p,null,y)},un.flushSync=function(h){var p=u.T,y=n.p;try{if(u.T=null,n.p=2,h)return h()}finally{u.T=p,n.p=y,n.d.f()}},un.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(h,p))},un.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},un.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var y=p.as,v=g(y,p.crossOrigin),C=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?n.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:C,fetchPriority:T}):y==="script"&&n.d.X(h,{crossOrigin:v,integrity:C,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},un.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=g(p.as,p.crossOrigin);n.d.M(h,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(h)},un.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=g(y,p.crossOrigin);n.d.L(h,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},un.preloadModule=function(h,p){if(typeof h=="string")if(p){var y=g(p.as,p.crossOrigin);n.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(h)},un.requestFormReset=function(h){n.d.r(h)},un.unstable_batchedUpdates=function(h,p){return h(p)},un.useFormState=function(h,p,y){return u.H.useFormState(h,p,y)},un.useFormStatus=function(){return u.H.useHostTransitionStatus()},un.version="19.2.0",un}var E3;function ZD(){if(E3)return Mx.exports;E3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Mx.exports=zL(),Mx.exports}var w3;function VL(){if(w3)return Nm;w3=1;var e=jL(),t=hd(),r=ZD();function n(s){var c="https://react.dev/errors/"+s;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function i(s){var c=s,f=s;if(s.alternate)for(;c.return;)c=c.return;else{s=c;do c=s,(c.flags&4098)!==0&&(f=c.return),s=c.return;while(s)}return c.tag===3?f:null}function u(s){if(s.tag===13){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function g(s){if(s.tag===31){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function h(s){if(i(s)!==s)throw Error(n(188))}function p(s){var c=s.alternate;if(!c){if(c=i(s),c===null)throw Error(n(188));return c!==s?null:s}for(var f=s,E=c;;){var A=f.return;if(A===null)break;var _=A.alternate;if(_===null){if(E=A.return,E!==null){f=E;continue}break}if(A.child===_.child){for(_=A.child;_;){if(_===f)return h(A),s;if(_===E)return h(A),c;_=_.sibling}throw Error(n(188))}if(f.return!==E.return)f=A,E=_;else{for(var $=!1,Q=A.child;Q;){if(Q===f){$=!0,f=A,E=_;break}if(Q===E){$=!0,E=A,f=_;break}Q=Q.sibling}if(!$){for(Q=_.child;Q;){if(Q===f){$=!0,f=_,E=A;break}if(Q===E){$=!0,E=_,f=A;break}Q=Q.sibling}if(!$)throw Error(n(189))}}if(f.alternate!==E)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?s:c}function y(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s;for(s=s.child;s!==null;){if(c=y(s),c!==null)return c;s=s.sibling}return null}var v=Object.assign,C=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),M=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var le=Symbol.for("react.client.reference");function ue(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===le?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case P:return"Fragment";case R:return"Profiler";case k:return"StrictMode";case F:return"Suspense";case U:return"SuspenseList";case j:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case D:return"Portal";case M:return s.displayName||"Context";case B:return(s._context.displayName||"Context")+".Consumer";case G:var c=s.render;return s=s.displayName,s||(s=c.displayName||c.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return c=s.displayName||null,c!==null?c:ue(s.type)||"Memo";case V:c=s._payload,s=s._init;try{return ue(s(c))}catch{}}return null}var re=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},xe=[],ee=-1;function K(s){return{current:s}}function te(s){0>ee||(s.current=xe[ee],xe[ee]=null,ee--)}function ge(s,c){ee++,xe[ee]=s.current,s.current=c}var oe=K(null),Ne=K(null),ie=K(null),me=K(null);function $e(s,c){switch(ge(ie,c),ge(Ne,s),ge(oe,null),c.nodeType){case 9:case 11:s=(s=c.documentElement)&&(s=s.namespaceURI)?U4(s):0;break;default:if(s=c.tagName,c=c.namespaceURI)c=U4(c),s=j4(c,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}te(oe),ge(oe,s)}function ve(){te(oe),te(Ne),te(ie)}function We(s){s.memoizedState!==null&&ge(me,s);var c=oe.current,f=j4(c,s.type);c!==f&&(ge(Ne,s),ge(oe,f))}function nt(s){Ne.current===s&&(te(oe),te(Ne)),me.current===s&&(te(me),bm._currentValue=pe)}var Be,Ee;function je(s){if(Be===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Be=c&&c[1]||"",Ee=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Be+s+Ee}var ce=!1;function qe(s,c){if(!s||ce)return"";ce=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(c){var Xe=function(){throw Error()};if(Object.defineProperty(Xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xe,[])}catch(Fe){var _e=Fe}Reflect.construct(s,[],Xe)}else{try{Xe.call()}catch(Fe){_e=Fe}s.call(Xe.prototype)}}else{try{throw Error()}catch(Fe){_e=Fe}(Xe=s())&&typeof Xe.catch=="function"&&Xe.catch(function(){})}}catch(Fe){if(Fe&&_e&&typeof Fe.stack=="string")return[Fe.stack,_e.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=E.DetermineComponentFrameRoot(),$=_[0],Q=_[1];if($&&Q){var de=$.split(`
`),De=Q.split(`
`);for(A=E=0;E<de.length&&!de[E].includes("DetermineComponentFrameRoot");)E++;for(;A<De.length&&!De[A].includes("DetermineComponentFrameRoot");)A++;if(E===de.length||A===De.length)for(E=de.length-1,A=De.length-1;1<=E&&0<=A&&de[E]!==De[A];)A--;for(;1<=E&&0<=A;E--,A--)if(de[E]!==De[A]){if(E!==1||A!==1)do if(E--,A--,0>A||de[E]!==De[A]){var He=`
`+de[E].replace(" at new "," at ");return s.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",s.displayName)),He}while(1<=E&&0<=A);break}}}finally{ce=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?je(f):""}function Se(s,c){switch(s.tag){case 26:case 27:case 5:return je(s.type);case 16:return je("Lazy");case 13:return s.child!==c&&c!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return qe(s.type,!1);case 11:return qe(s.type.render,!1);case 1:return qe(s.type,!0);case 31:return je("Activity");default:return""}}function rt(s){try{var c="",f=null;do c+=Se(s,f),f=s,s=s.return;while(s);return c}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}var it=Object.prototype.hasOwnProperty,pt=e.unstable_scheduleCallback,Ke=e.unstable_cancelCallback,lt=e.unstable_shouldYield,Ue=e.unstable_requestPaint,mt=e.unstable_now,$t=e.unstable_getCurrentPriorityLevel,ir=e.unstable_ImmediatePriority,Br=e.unstable_UserBlockingPriority,ut=e.unstable_NormalPriority,Tt=e.unstable_LowPriority,Cr=e.unstable_IdlePriority,xr=e.log,ia=e.unstable_setDisableYieldValue,kt=null,be=null;function Je(s){if(typeof xr=="function"&&ia(s),be&&typeof be.setStrictMode=="function")try{be.setStrictMode(kt,s)}catch{}}var st=Math.clz32?Math.clz32:qa,At=Math.log,dr=Math.LN2;function qa(s){return s>>>=0,s===0?32:31-(At(s)/dr|0)|0}var aa=256,we=262144,Ge=4194304;function xt(s){var c=s&42;if(c!==0)return c;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function na(s,c,f){var E=s.pendingLanes;if(E===0)return 0;var A=0,_=s.suspendedLanes,$=s.pingedLanes;s=s.warmLanes;var Q=E&134217727;return Q!==0?(E=Q&~_,E!==0?A=xt(E):($&=Q,$!==0?A=xt($):f||(f=Q&~s,f!==0&&(A=xt(f))))):(Q=E&~_,Q!==0?A=xt(Q):$!==0?A=xt($):f||(f=E&~s,f!==0&&(A=xt(f)))),A===0?0:c!==0&&c!==A&&(c&_)===0&&(_=A&-A,f=c&-c,_>=f||_===32&&(f&4194048)!==0)?c:A}function oa(s,c){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&c)===0}function ze(s,c){switch(s){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nt(){var s=Ge;return Ge<<=1,(Ge&62914560)===0&&(Ge=4194304),s}function Ja(s){for(var c=[],f=0;31>f;f++)c.push(s);return c}function gs(s,c){s.pendingLanes|=c,c!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function An(s,c,f,E,A,_){var $=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var Q=s.entanglements,de=s.expirationTimes,De=s.hiddenUpdates;for(f=$&~f;0<f;){var He=31-st(f),Xe=1<<He;Q[He]=0,de[He]=-1;var _e=De[He];if(_e!==null)for(De[He]=null,He=0;He<_e.length;He++){var Fe=_e[He];Fe!==null&&(Fe.lane&=-536870913)}f&=~Xe}E!==0&&qc(s,E,0),_!==0&&A===0&&s.tag!==0&&(s.suspendedLanes|=_&~($&~c))}function qc(s,c,f){s.pendingLanes|=c,s.suspendedLanes&=~c;var E=31-st(c);s.entangledLanes|=c,s.entanglements[E]=s.entanglements[E]|1073741824|f&261930}function Tn(s,c){var f=s.entangledLanes|=c;for(s=s.entanglements;f;){var E=31-st(f),A=1<<E;A&c|s[E]&c&&(s[E]|=c),f&=~A}}function zl(s,c){var f=c&-c;return f=(f&42)!==0?1:Na(f),(f&(s.suspendedLanes|c))!==0?0:f}function Na(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Gn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ga(){var s=ae.p;return s!==0?s:(s=window.event,s===void 0?32:c3(s.type))}function ot(s,c){var f=ae.p;try{return ae.p=s,c()}finally{ae.p=f}}var Ya=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Ya,tr="__reactProps$"+Ya,pn="__reactContainer$"+Ya,hl="__reactEvents$"+Ya,Li="__reactListeners$"+Ya,On="__reactHandles$"+Ya,Gc="__reactResources$"+Ya,pl="__reactMarker$"+Ya;function en(s){delete s[Yr],delete s[tr],delete s[hl],delete s[Li],delete s[On]}function Fr(s){var c=s[Yr];if(c)return c;for(var f=s.parentNode;f;){if(c=f[pn]||f[Yr]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(s=Y4(s);s!==null;){if(f=s[Yr])return f;s=Y4(s)}return c}s=f,f=s.parentNode}return null}function Jt(s){if(s=s[Yr]||s[pn]){var c=s.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return s}return null}function Ve(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s.stateNode;throw Error(n(33))}function ht(s){var c=s[Gc];return c||(c=s[Gc]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Pr(s){s[pl]=!0}var Ze=new Set,o0={};function mr(s,c){Yn(s,c),Yn(s+"Capture",c)}function Yn(s,c){for(o0[s]=c,s=0;s<c.length;s++)Ze.add(c[s])}var Ly=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rr={},er={};function qt(s){return it.call(er,s)?!0:it.call(rr,s)?!1:Ly.test(s)?er[s]=!0:(rr[s]=!0,!1)}function Bi(s,c,f){if(qt(c))if(f===null)s.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(c);return;case"boolean":var E=c.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){s.removeAttribute(c);return}}s.setAttribute(c,""+f)}}function Fi(s,c,f){if(f===null)s.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttribute(c,""+f)}}function Xn(s,c,f,E){if(E===null)s.removeAttribute(f);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(c,f,""+E)}}function ar(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Hs(s){var c=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function By(s,c,f){var E=Object.getOwnPropertyDescriptor(s.constructor.prototype,c);if(!s.hasOwnProperty(c)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var A=E.get,_=E.set;return Object.defineProperty(s,c,{configurable:!0,get:function(){return A.call(this)},set:function($){f=""+$,_.call(this,$)}}),Object.defineProperty(s,c,{enumerable:E.enumerable}),{getValue:function(){return f},setValue:function($){f=""+$},stopTracking:function(){s._valueTracker=null,delete s[c]}}}}function Ur(s){if(!s._valueTracker){var c=Hs(s)?"checked":"value";s._valueTracker=By(s,c,""+s[c])}}function $s(s){if(!s)return!1;var c=s._valueTracker;if(!c)return!0;var f=c.getValue(),E="";return s&&(E=Hs(s)?s.checked?"true":"false":s.value),s=E,s!==f?(c.setValue(s),!0):!1}function Yc(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ui=/[\n"\\]/g;function Ht(s){return s.replace(Ui,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Sa(s,c,f,E,A,_,$,Q){s.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?s.type=$:s.removeAttribute("type"),c!=null?$==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+ar(c)):s.value!==""+ar(c)&&(s.value=""+ar(c)):$!=="submit"&&$!=="reset"||s.removeAttribute("value"),c!=null?ne(s,$,ar(c)):f!=null?ne(s,$,ar(f)):E!=null&&s.removeAttribute("value"),A==null&&_!=null&&(s.defaultChecked=!!_),A!=null&&(s.checked=A&&typeof A!="function"&&typeof A!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?s.name=""+ar(Q):s.removeAttribute("name")}function Te(s,c,f,E,A,_,$,Q){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),c!=null||f!=null){if(!(_!=="submit"&&_!=="reset"||c!=null)){Ur(s);return}f=f!=null?""+ar(f):"",c=c!=null?""+ar(c):f,Q||c===s.value||(s.value=c),s.defaultValue=c}E=E??A,E=typeof E!="function"&&typeof E!="symbol"&&!!E,s.checked=Q?s.checked:!!E,s.defaultChecked=!!E,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(s.name=$),Ur(s)}function ne(s,c,f){c==="number"&&Yc(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function yt(s,c,f,E){if(s=s.options,c){c={};for(var A=0;A<f.length;A++)c["$"+f[A]]=!0;for(f=0;f<s.length;f++)A=c.hasOwnProperty("$"+s[f].value),s[f].selected!==A&&(s[f].selected=A),A&&E&&(s[f].defaultSelected=!0)}else{for(f=""+ar(f),c=null,A=0;A<s.length;A++){if(s[A].value===f){s[A].selected=!0,E&&(s[A].defaultSelected=!0);return}c!==null||s[A].disabled||(c=s[A])}c!==null&&(c.selected=!0)}}function pa(s,c,f){if(c!=null&&(c=""+ar(c),c!==s.value&&(s.value=c),f==null)){s.defaultValue!==c&&(s.defaultValue=c);return}s.defaultValue=f!=null?""+ar(f):""}function yn(s,c,f,E){if(c==null){if(E!=null){if(f!=null)throw Error(n(92));if(re(E)){if(1<E.length)throw Error(n(93));E=E[0]}f=E}f==null&&(f=""),c=f}f=ar(c),s.defaultValue=f,E=s.textContent,E===f&&E!==""&&E!==null&&(s.value=E),Ur(s)}function ji(s,c){if(c){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=c;return}}s.textContent=c}var Rd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xn(s,c,f){var E=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?E?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="":E?s.setProperty(c,f):typeof f!="number"||f===0||Rd.has(c)?c==="float"?s.cssFloat=f:s[c]=(""+f).trim():s[c]=f+"px"}function Et(s,c,f){if(c!=null&&typeof c!="object")throw Error(n(62));if(s=s.style,f!=null){for(var E in f)!f.hasOwnProperty(E)||c!=null&&c.hasOwnProperty(E)||(E.indexOf("--")===0?s.setProperty(E,""):E==="float"?s.cssFloat="":s[E]="");for(var A in c)E=c[A],c.hasOwnProperty(A)&&f[A]!==E&&xn(s,A,E)}else for(var _ in c)c.hasOwnProperty(_)&&xn(s,_,c[_])}function Ar(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var c0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zi(s){return Fy.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Dn(){}var qo=null;function Ld(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var jr=null,hs=null;function qs(s){var c=Jt(s);if(c&&(s=c.stateNode)){var f=s[tr]||null;e:switch(s=c.stateNode,c.type){case"input":if(Sa(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Ht(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var E=f[c];if(E!==s&&E.form===s.form){var A=E[tr]||null;if(!A)throw Error(n(90));Sa(E,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(c=0;c<f.length;c++)E=f[c],E.form===s.form&&$s(E)}break e;case"textarea":pa(s,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&yt(s,!!f.multiple,c,!1)}}}var St=!1;function u0(s,c,f){if(St)return s(c,f);St=!0;try{var E=s(c);return E}finally{if(St=!1,(jr!==null||hs!==null)&&(tg(),jr&&(c=jr,s=hs,hs=jr=null,qs(c),s)))for(c=0;c<s.length;c++)qs(s[c])}}function _t(s,c){var f=s.stateNode;if(f===null)return null;var E=f[tr]||null;if(E===null)return null;f=E[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(s=s.type,E=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!E;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(n(231,c,typeof f));return f}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bd=!1;if(Tr)try{var Vl={};Object.defineProperty(Vl,"passive",{get:function(){Bd=!0}}),window.addEventListener("test",Vl,Vl),window.removeEventListener("test",Vl,Vl)}catch{Bd=!1}var Gs=null,Ys=null,Xc=null;function Vi(){if(Xc)return Xc;var s,c=Ys,f=c.length,E,A="value"in Gs?Gs.value:Gs.textContent,_=A.length;for(s=0;s<f&&c[s]===A[s];s++);var $=f-s;for(E=1;E<=$&&c[f-E]===A[_-E];E++);return Xc=A.slice(s,1<E?1-E:void 0)}function yl(s){var c=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&c===13&&(s=13)):s=c,s===10&&(s=13),32<=s||s===13?s:0}function xl(){return!0}function Fd(){return!1}function Ca(s){function c(f,E,A,_,$){this._reactName=f,this._targetInst=A,this.type=E,this.nativeEvent=_,this.target=$,this.currentTarget=null;for(var Q in s)s.hasOwnProperty(Q)&&(f=s[Q],this[Q]=f?f(_):_[Q]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?xl:Fd,this.isPropagationStopped=Fd,this}return v(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=xl)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=xl)},persist:function(){},isPersistent:xl}),c}var Wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ra=Ca(Wn),Hi=v({},Wn,{view:0,detail:0}),d0=Ca(Hi),Wc,Ud,Go,Kc=v({},Hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Go&&(Go&&s.type==="mousemove"?(Wc=s.screenX-Go.screenX,Ud=s.screenY-Go.screenY):Ud=Wc=0,Go=s),Wc)},movementY:function(s){return"movementY"in s?s.movementY:Ud}}),or=Ca(Kc),m0=v({},Kc,{dataTransfer:0}),Zc=Ca(m0),bl=v({},Hi,{relatedTarget:0}),jd=Ca(bl),Re=v({},Wn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ft=Ca(Re),La=v({},Wn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Qc=Ca(La),f0=v({},Wn,{data:0}),g0=Ca(f0),Uy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ya(s){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(s):(s=zd[s])?!!c[s]:!1}function Yo(){return ya}var Xr=v({},Hi,{key:function(s){if(s.key){var c=Uy[s.key]||s.key;if(c!=="Unidentified")return c}return s.type==="keypress"?(s=yl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?jy[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yo,charCode:function(s){return s.type==="keypress"?yl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?yl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Jc=Ca(Xr),Hl=v({},Kc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fr=Ca(Hl),Ct=v({},Hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yo}),zy=Ca(Ct),Or=v({},Wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$l=Ca(Or),$i=v({},Kc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Vy=Ca($i),ps=v({},Wn,{newState:0,oldState:0}),Vd=Ca(ps),h0=[9,13,27,32],Xo=Tr&&"CompositionEvent"in window,qi=null;Tr&&"documentMode"in document&&(qi=document.documentMode);var p0=Tr&&"TextEvent"in window&&!qi,y0=Tr&&(!Xo||qi&&8<qi&&11>=qi),ql=" ",eu=!1;function x0(s,c){switch(s){case"keyup":return h0.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gi(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Yi=!1;function vl(s,c){switch(s){case"compositionend":return Gi(c);case"keypress":return c.which!==32?null:(eu=!0,ql);case"textInput":return s=c.data,s===ql&&eu?null:s;default:return null}}function tu(s,c){if(Yi)return s==="compositionend"||!Xo&&x0(s,c)?(s=Vi(),Xc=Ys=Gs=null,Yi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return y0&&c.locale!=="ko"?null:c.data;default:return null}}var _n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hd(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c==="input"?!!_n[s.type]:c==="textarea"}function Kn(s,c,f,E){jr?hs?hs.push(E):hs=[E]:jr=E,c=og(c,"onChange"),0<c.length&&(f=new Ra("onChange","change",null,f,E),s.push({event:f,listeners:c}))}var Wo=null,Gl=null;function Hy(s){I4(s,0)}function Ko(s){var c=Ve(s);if($s(c))return s}function Zn(s,c){if(s==="change")return c}var b0=!1;if(Tr){var Zo;if(Tr){var Yl="oninput"in document;if(!Yl){var Wt=document.createElement("div");Wt.setAttribute("oninput","return;"),Yl=typeof Wt.oninput=="function"}Zo=Yl}else Zo=!1;b0=Zo&&(!document.documentMode||9<document.documentMode)}function Qo(){Wo&&(Wo.detachEvent("onpropertychange",X),Gl=Wo=null)}function X(s){if(s.propertyName==="value"&&Ko(Gl)){var c=[];Kn(c,Gl,s,Ld(s)),u0(Hy,c)}}function o(s,c,f){s==="focusin"?(Qo(),Wo=c,Gl=f,Wo.attachEvent("onpropertychange",X)):s==="focusout"&&Qo()}function d(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ko(Gl)}function m(s,c){if(s==="click")return Ko(c)}function x(s,c){if(s==="input"||s==="change")return Ko(c)}function b(s,c){return s===c&&(s!==0||1/s===1/c)||s!==s&&c!==c}var N=typeof Object.is=="function"?Object.is:b;function S(s,c){if(N(s,c))return!0;if(typeof s!="object"||s===null||typeof c!="object"||c===null)return!1;var f=Object.keys(s),E=Object.keys(c);if(f.length!==E.length)return!1;for(E=0;E<f.length;E++){var A=f[E];if(!it.call(c,A)||!N(s[A],c[A]))return!1}return!0}function O(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function I(s,c){var f=O(s);s=0;for(var E;f;){if(f.nodeType===3){if(E=s+f.textContent.length,s<=c&&E>=c)return{node:f,offset:c-s};s=E}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=O(f)}}function z(s,c){return s&&c?s===c?!0:s&&s.nodeType===3?!1:c&&c.nodeType===3?z(s,c.parentNode):"contains"in s?s.contains(c):s.compareDocumentPosition?!!(s.compareDocumentPosition(c)&16):!1:!1}function W(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var c=Yc(s.document);c instanceof s.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)s=c.contentWindow;else break;c=Yc(s.document)}return c}function Z(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c&&(c==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||c==="textarea"||s.contentEditable==="true")}var se=Tr&&"documentMode"in document&&11>=document.documentMode,fe=null,he=null,Ae=null,Ie=!1;function at(s,c,f){var E=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Ie||fe==null||fe!==Yc(E)||(E=fe,"selectionStart"in E&&Z(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Ae&&S(Ae,E)||(Ae=E,E=og(he,"onSelect"),0<E.length&&(c=new Ra("onSelect","select",null,c,f),s.push({event:c,listeners:E}),c.target=fe)))}function et(s,c){var f={};return f[s.toLowerCase()]=c.toLowerCase(),f["Webkit"+s]="webkit"+c,f["Moz"+s]="moz"+c,f}var Qe={animationend:et("Animation","AnimationEnd"),animationiteration:et("Animation","AnimationIteration"),animationstart:et("Animation","AnimationStart"),transitionrun:et("Transition","TransitionRun"),transitionstart:et("Transition","TransitionStart"),transitioncancel:et("Transition","TransitionCancel"),transitionend:et("Transition","TransitionEnd")},zt={},Pt={};Tr&&(Pt=document.createElement("div").style,"AnimationEvent"in window||(delete Qe.animationend.animation,delete Qe.animationiteration.animation,delete Qe.animationstart.animation),"TransitionEvent"in window||delete Qe.transitionend.transition);function ca(s){if(zt[s])return zt[s];if(!Qe[s])return s;var c=Qe[s],f;for(f in c)if(c.hasOwnProperty(f)&&f in Pt)return zt[s]=c[f];return s}var kn=ca("animationend"),tn=ca("animationiteration"),gr=ca("animationstart"),Ba=ca("transitionrun"),bn=ca("transitionstart"),Xi=ca("transitioncancel"),Xl=ca("transitionend"),v0=new Map,$d="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$d.push("scrollEnd");function Xs(s,c){v0.set(s,c),mr(c,[s])}var E0=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ys=[],ru=0,$y=0;function w0(){for(var s=ru,c=$y=ru=0;c<s;){var f=ys[c];ys[c++]=null;var E=ys[c];ys[c++]=null;var A=ys[c];ys[c++]=null;var _=ys[c];if(ys[c++]=null,E!==null&&A!==null){var $=E.pending;$===null?A.next=A:(A.next=$.next,$.next=A),E.pending=A}_!==0&&gS(f,A,_)}}function N0(s,c,f,E){ys[ru++]=s,ys[ru++]=c,ys[ru++]=f,ys[ru++]=E,$y|=E,s.lanes|=E,s=s.alternate,s!==null&&(s.lanes|=E)}function qy(s,c,f,E){return N0(s,c,f,E),S0(s)}function Jo(s,c){return N0(s,null,null,c),S0(s)}function gS(s,c,f){s.lanes|=f;var E=s.alternate;E!==null&&(E.lanes|=f);for(var A=!1,_=s.return;_!==null;)_.childLanes|=f,E=_.alternate,E!==null&&(E.childLanes|=f),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(A=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,A&&c!==null&&(A=31-st(f),s=_.hiddenUpdates,E=s[A],E===null?s[A]=[c]:E.push(c),c.lane=f|536870912),_):null}function S0(s){if(50<mm)throw mm=0,ex=null,Error(n(185));for(var c=s.return;c!==null;)s=c,c=s.return;return s.tag===3?s.stateNode:null}var au={};function v9(s,c,f,E){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(s,c,f,E){return new v9(s,c,f,E)}function Gy(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Wl(s,c){var f=s.alternate;return f===null?(f=Qn(s.tag,c,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=c,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,c=s.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function hS(s,c){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=c,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,c=f.dependencies,s.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),s}function C0(s,c,f,E,A,_){var $=0;if(E=s,typeof s=="function")Gy(s)&&($=1);else if(typeof s=="string")$=CL(s,f,oe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case j:return s=Qn(31,f,c,A),s.elementType=j,s.lanes=_,s;case P:return ec(f.children,A,_,c);case k:$=8,A|=24;break;case R:return s=Qn(12,f,c,A|2),s.elementType=R,s.lanes=_,s;case F:return s=Qn(13,f,c,A),s.elementType=F,s.lanes=_,s;case U:return s=Qn(19,f,c,A),s.elementType=U,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case M:$=10;break e;case B:$=9;break e;case G:$=11;break e;case L:$=14;break e;case V:$=16,E=null;break e}$=29,f=Error(n(130,s===null?"null":typeof s,"")),E=null}return c=Qn($,f,c,A),c.elementType=s,c.type=E,c.lanes=_,c}function ec(s,c,f,E){return s=Qn(7,s,E,c),s.lanes=f,s}function Yy(s,c,f){return s=Qn(6,s,null,c),s.lanes=f,s}function pS(s){var c=Qn(18,null,null,0);return c.stateNode=s,c}function Xy(s,c,f){return c=Qn(4,s.children!==null?s.children:[],s.key,c),c.lanes=f,c.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},c}var yS=new WeakMap;function xs(s,c){if(typeof s=="object"&&s!==null){var f=yS.get(s);return f!==void 0?f:(c={value:s,source:c,stack:rt(c)},yS.set(s,c),c)}return{value:s,source:c,stack:rt(c)}}var nu=[],su=0,A0=null,qd=0,bs=[],vs=0,Wi=null,El=1,wl="";function Kl(s,c){nu[su++]=qd,nu[su++]=A0,A0=s,qd=c}function xS(s,c,f){bs[vs++]=El,bs[vs++]=wl,bs[vs++]=Wi,Wi=s;var E=El;s=wl;var A=32-st(E)-1;E&=~(1<<A),f+=1;var _=32-st(c)+A;if(30<_){var $=A-A%5;_=(E&(1<<$)-1).toString(32),E>>=$,A-=$,El=1<<32-st(c)+A|f<<A|E,wl=_+s}else El=1<<_|f<<A|E,wl=s}function Wy(s){s.return!==null&&(Kl(s,1),xS(s,1,0))}function Ky(s){for(;s===A0;)A0=nu[--su],nu[su]=null,qd=nu[--su],nu[su]=null;for(;s===Wi;)Wi=bs[--vs],bs[vs]=null,wl=bs[--vs],bs[vs]=null,El=bs[--vs],bs[vs]=null}function bS(s,c){bs[vs++]=El,bs[vs++]=wl,bs[vs++]=Wi,El=c.id,wl=c.overflow,Wi=s}var rn=null,zr=null,Qt=!1,Ki=null,Es=!1,Zy=Error(n(519));function Zi(s){var c=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gd(xs(c,s)),Zy}function vS(s){var c=s.stateNode,f=s.type,E=s.memoizedProps;switch(c[Yr]=s,c[tr]=E,f){case"dialog":Yt("cancel",c),Yt("close",c);break;case"iframe":case"object":case"embed":Yt("load",c);break;case"video":case"audio":for(f=0;f<gm.length;f++)Yt(gm[f],c);break;case"source":Yt("error",c);break;case"img":case"image":case"link":Yt("error",c),Yt("load",c);break;case"details":Yt("toggle",c);break;case"input":Yt("invalid",c),Te(c,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0);break;case"select":Yt("invalid",c);break;case"textarea":Yt("invalid",c),yn(c,E.value,E.defaultValue,E.children)}f=E.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||E.suppressHydrationWarning===!0||B4(c.textContent,f)?(E.popover!=null&&(Yt("beforetoggle",c),Yt("toggle",c)),E.onScroll!=null&&Yt("scroll",c),E.onScrollEnd!=null&&Yt("scrollend",c),E.onClick!=null&&(c.onclick=Dn),c=!0):c=!1,c||Zi(s,!0)}function ES(s){for(rn=s.return;rn;)switch(rn.tag){case 5:case 31:case 13:Es=!1;return;case 27:case 3:Es=!0;return;default:rn=rn.return}}function lu(s){if(s!==rn)return!1;if(!Qt)return ES(s),Qt=!0,!1;var c=s.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||hx(s.type,s.memoizedProps)),f=!f),f&&zr&&Zi(s),ES(s),c===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));zr=G4(s)}else if(c===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));zr=G4(s)}else c===27?(c=zr,mo(s.type)?(s=vx,vx=null,zr=s):zr=c):zr=rn?Ns(s.stateNode.nextSibling):null;return!0}function tc(){zr=rn=null,Qt=!1}function Qy(){var s=Ki;return s!==null&&(Rn===null?Rn=s:Rn.push.apply(Rn,s),Ki=null),s}function Gd(s){Ki===null?Ki=[s]:Ki.push(s)}var Jy=K(null),rc=null,Zl=null;function Qi(s,c,f){ge(Jy,c._currentValue),c._currentValue=f}function Ql(s){s._currentValue=Jy.current,te(Jy)}function e1(s,c,f){for(;s!==null;){var E=s.alternate;if((s.childLanes&c)!==c?(s.childLanes|=c,E!==null&&(E.childLanes|=c)):E!==null&&(E.childLanes&c)!==c&&(E.childLanes|=c),s===f)break;s=s.return}}function t1(s,c,f,E){var A=s.child;for(A!==null&&(A.return=s);A!==null;){var _=A.dependencies;if(_!==null){var $=A.child;_=_.firstContext;e:for(;_!==null;){var Q=_;_=A;for(var de=0;de<c.length;de++)if(Q.context===c[de]){_.lanes|=f,Q=_.alternate,Q!==null&&(Q.lanes|=f),e1(_.return,f,s),E||($=null);break e}_=Q.next}}else if(A.tag===18){if($=A.return,$===null)throw Error(n(341));$.lanes|=f,_=$.alternate,_!==null&&(_.lanes|=f),e1($,f,s),$=null}else $=A.child;if($!==null)$.return=A;else for($=A;$!==null;){if($===s){$=null;break}if(A=$.sibling,A!==null){A.return=$.return,$=A;break}$=$.return}A=$}}function iu(s,c,f,E){s=null;for(var A=c,_=!1;A!==null;){if(!_){if((A.flags&524288)!==0)_=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var $=A.alternate;if($===null)throw Error(n(387));if($=$.memoizedProps,$!==null){var Q=A.type;N(A.pendingProps.value,$.value)||(s!==null?s.push(Q):s=[Q])}}else if(A===me.current){if($=A.alternate,$===null)throw Error(n(387));$.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(s!==null?s.push(bm):s=[bm])}A=A.return}s!==null&&t1(c,s,f,E),c.flags|=262144}function T0(s){for(s=s.firstContext;s!==null;){if(!N(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ac(s){rc=s,Zl=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function an(s){return wS(rc,s)}function O0(s,c){return rc===null&&ac(s),wS(s,c)}function wS(s,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},Zl===null){if(s===null)throw Error(n(308));Zl=c,s.dependencies={lanes:0,firstContext:c},s.flags|=524288}else Zl=Zl.next=c;return f}var E9=typeof AbortController<"u"?AbortController:function(){var s=[],c=this.signal={aborted:!1,addEventListener:function(f,E){s.push(E)}};this.abort=function(){c.aborted=!0,s.forEach(function(f){return f()})}},w9=e.unstable_scheduleCallback,N9=e.unstable_NormalPriority,Aa={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function r1(){return{controller:new E9,data:new Map,refCount:0}}function Yd(s){s.refCount--,s.refCount===0&&w9(N9,function(){s.controller.abort()})}var Xd=null,a1=0,ou=0,cu=null;function S9(s,c){if(Xd===null){var f=Xd=[];a1=0,ou=lx(),cu={status:"pending",value:void 0,then:function(E){f.push(E)}}}return a1++,c.then(NS,NS),c}function NS(){if(--a1===0&&Xd!==null){cu!==null&&(cu.status="fulfilled");var s=Xd;Xd=null,ou=0,cu=null;for(var c=0;c<s.length;c++)(0,s[c])()}}function C9(s,c){var f=[],E={status:"pending",value:null,reason:null,then:function(A){f.push(A)}};return s.then(function(){E.status="fulfilled",E.value=c;for(var A=0;A<f.length;A++)(0,f[A])(c)},function(A){for(E.status="rejected",E.reason=A,A=0;A<f.length;A++)(0,f[A])(void 0)}),E}var SS=J.S;J.S=function(s,c){i4=mt(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&S9(s,c),SS!==null&&SS(s,c)};var nc=K(null);function n1(){var s=nc.current;return s!==null?s:Dr.pooledCache}function D0(s,c){c===null?ge(nc,nc.current):ge(nc,c.pool)}function CS(){var s=n1();return s===null?null:{parent:Aa._currentValue,pool:s}}var uu=Error(n(460)),s1=Error(n(474)),_0=Error(n(542)),k0={then:function(){}};function AS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function TS(s,c,f){switch(f=s[f],f===void 0?s.push(c):f!==c&&(c.then(Dn,Dn),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,DS(s),s;default:if(typeof c.status=="string")c.then(Dn,Dn);else{if(s=Dr,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=c,s.status="pending",s.then(function(E){if(c.status==="pending"){var A=c;A.status="fulfilled",A.value=E}},function(E){if(c.status==="pending"){var A=c;A.status="rejected",A.reason=E}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,DS(s),s}throw lc=c,uu}}function sc(s){try{var c=s._init;return c(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(lc=f,uu):f}}var lc=null;function OS(){if(lc===null)throw Error(n(459));var s=lc;return lc=null,s}function DS(s){if(s===uu||s===_0)throw Error(n(483))}var du=null,Wd=0;function P0(s){var c=Wd;return Wd+=1,du===null&&(du=[]),TS(du,s,c)}function Kd(s,c){c=c.props.ref,s.ref=c!==void 0?c:null}function I0(s,c){throw c.$$typeof===C?Error(n(525)):(s=Object.prototype.toString.call(c),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":s)))}function _S(s){function c(Ce,ye){if(s){var Oe=Ce.deletions;Oe===null?(Ce.deletions=[ye],Ce.flags|=16):Oe.push(ye)}}function f(Ce,ye){if(!s)return null;for(;ye!==null;)c(Ce,ye),ye=ye.sibling;return null}function E(Ce){for(var ye=new Map;Ce!==null;)Ce.key!==null?ye.set(Ce.key,Ce):ye.set(Ce.index,Ce),Ce=Ce.sibling;return ye}function A(Ce,ye){return Ce=Wl(Ce,ye),Ce.index=0,Ce.sibling=null,Ce}function _(Ce,ye,Oe){return Ce.index=Oe,s?(Oe=Ce.alternate,Oe!==null?(Oe=Oe.index,Oe<ye?(Ce.flags|=67108866,ye):Oe):(Ce.flags|=67108866,ye)):(Ce.flags|=1048576,ye)}function $(Ce){return s&&Ce.alternate===null&&(Ce.flags|=67108866),Ce}function Q(Ce,ye,Oe,Ye){return ye===null||ye.tag!==6?(ye=Yy(Oe,Ce.mode,Ye),ye.return=Ce,ye):(ye=A(ye,Oe),ye.return=Ce,ye)}function de(Ce,ye,Oe,Ye){var wt=Oe.type;return wt===P?He(Ce,ye,Oe.props.children,Ye,Oe.key):ye!==null&&(ye.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===V&&sc(wt)===ye.type)?(ye=A(ye,Oe.props),Kd(ye,Oe),ye.return=Ce,ye):(ye=C0(Oe.type,Oe.key,Oe.props,null,Ce.mode,Ye),Kd(ye,Oe),ye.return=Ce,ye)}function De(Ce,ye,Oe,Ye){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Oe.containerInfo||ye.stateNode.implementation!==Oe.implementation?(ye=Xy(Oe,Ce.mode,Ye),ye.return=Ce,ye):(ye=A(ye,Oe.children||[]),ye.return=Ce,ye)}function He(Ce,ye,Oe,Ye,wt){return ye===null||ye.tag!==7?(ye=ec(Oe,Ce.mode,Ye,wt),ye.return=Ce,ye):(ye=A(ye,Oe),ye.return=Ce,ye)}function Xe(Ce,ye,Oe){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=Yy(""+ye,Ce.mode,Oe),ye.return=Ce,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case T:return Oe=C0(ye.type,ye.key,ye.props,null,Ce.mode,Oe),Kd(Oe,ye),Oe.return=Ce,Oe;case D:return ye=Xy(ye,Ce.mode,Oe),ye.return=Ce,ye;case V:return ye=sc(ye),Xe(Ce,ye,Oe)}if(re(ye)||q(ye))return ye=ec(ye,Ce.mode,Oe,null),ye.return=Ce,ye;if(typeof ye.then=="function")return Xe(Ce,P0(ye),Oe);if(ye.$$typeof===M)return Xe(Ce,O0(Ce,ye),Oe);I0(Ce,ye)}return null}function _e(Ce,ye,Oe,Ye){var wt=ye!==null?ye.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return wt!==null?null:Q(Ce,ye,""+Oe,Ye);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case T:return Oe.key===wt?de(Ce,ye,Oe,Ye):null;case D:return Oe.key===wt?De(Ce,ye,Oe,Ye):null;case V:return Oe=sc(Oe),_e(Ce,ye,Oe,Ye)}if(re(Oe)||q(Oe))return wt!==null?null:He(Ce,ye,Oe,Ye,null);if(typeof Oe.then=="function")return _e(Ce,ye,P0(Oe),Ye);if(Oe.$$typeof===M)return _e(Ce,ye,O0(Ce,Oe),Ye);I0(Ce,Oe)}return null}function Fe(Ce,ye,Oe,Ye,wt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ce=Ce.get(Oe)||null,Q(ye,Ce,""+Ye,wt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case T:return Ce=Ce.get(Ye.key===null?Oe:Ye.key)||null,de(ye,Ce,Ye,wt);case D:return Ce=Ce.get(Ye.key===null?Oe:Ye.key)||null,De(ye,Ce,Ye,wt);case V:return Ye=sc(Ye),Fe(Ce,ye,Oe,Ye,wt)}if(re(Ye)||q(Ye))return Ce=Ce.get(Oe)||null,He(ye,Ce,Ye,wt,null);if(typeof Ye.then=="function")return Fe(Ce,ye,Oe,P0(Ye),wt);if(Ye.$$typeof===M)return Fe(Ce,ye,Oe,O0(ye,Ye),wt);I0(ye,Ye)}return null}function gt(Ce,ye,Oe,Ye){for(var wt=null,nr=null,bt=ye,Ut=ye=0,Zt=null;bt!==null&&Ut<Oe.length;Ut++){bt.index>Ut?(Zt=bt,bt=null):Zt=bt.sibling;var sr=_e(Ce,bt,Oe[Ut],Ye);if(sr===null){bt===null&&(bt=Zt);break}s&&bt&&sr.alternate===null&&c(Ce,bt),ye=_(sr,ye,Ut),nr===null?wt=sr:nr.sibling=sr,nr=sr,bt=Zt}if(Ut===Oe.length)return f(Ce,bt),Qt&&Kl(Ce,Ut),wt;if(bt===null){for(;Ut<Oe.length;Ut++)bt=Xe(Ce,Oe[Ut],Ye),bt!==null&&(ye=_(bt,ye,Ut),nr===null?wt=bt:nr.sibling=bt,nr=bt);return Qt&&Kl(Ce,Ut),wt}for(bt=E(bt);Ut<Oe.length;Ut++)Zt=Fe(bt,Ce,Ut,Oe[Ut],Ye),Zt!==null&&(s&&Zt.alternate!==null&&bt.delete(Zt.key===null?Ut:Zt.key),ye=_(Zt,ye,Ut),nr===null?wt=Zt:nr.sibling=Zt,nr=Zt);return s&&bt.forEach(function(yo){return c(Ce,yo)}),Qt&&Kl(Ce,Ut),wt}function Ot(Ce,ye,Oe,Ye){if(Oe==null)throw Error(n(151));for(var wt=null,nr=null,bt=ye,Ut=ye=0,Zt=null,sr=Oe.next();bt!==null&&!sr.done;Ut++,sr=Oe.next()){bt.index>Ut?(Zt=bt,bt=null):Zt=bt.sibling;var yo=_e(Ce,bt,sr.value,Ye);if(yo===null){bt===null&&(bt=Zt);break}s&&bt&&yo.alternate===null&&c(Ce,bt),ye=_(yo,ye,Ut),nr===null?wt=yo:nr.sibling=yo,nr=yo,bt=Zt}if(sr.done)return f(Ce,bt),Qt&&Kl(Ce,Ut),wt;if(bt===null){for(;!sr.done;Ut++,sr=Oe.next())sr=Xe(Ce,sr.value,Ye),sr!==null&&(ye=_(sr,ye,Ut),nr===null?wt=sr:nr.sibling=sr,nr=sr);return Qt&&Kl(Ce,Ut),wt}for(bt=E(bt);!sr.done;Ut++,sr=Oe.next())sr=Fe(bt,Ce,Ut,sr.value,Ye),sr!==null&&(s&&sr.alternate!==null&&bt.delete(sr.key===null?Ut:sr.key),ye=_(sr,ye,Ut),nr===null?wt=sr:nr.sibling=sr,nr=sr);return s&&bt.forEach(function(LL){return c(Ce,LL)}),Qt&&Kl(Ce,Ut),wt}function Er(Ce,ye,Oe,Ye){if(typeof Oe=="object"&&Oe!==null&&Oe.type===P&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case T:e:{for(var wt=Oe.key;ye!==null;){if(ye.key===wt){if(wt=Oe.type,wt===P){if(ye.tag===7){f(Ce,ye.sibling),Ye=A(ye,Oe.props.children),Ye.return=Ce,Ce=Ye;break e}}else if(ye.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===V&&sc(wt)===ye.type){f(Ce,ye.sibling),Ye=A(ye,Oe.props),Kd(Ye,Oe),Ye.return=Ce,Ce=Ye;break e}f(Ce,ye);break}else c(Ce,ye);ye=ye.sibling}Oe.type===P?(Ye=ec(Oe.props.children,Ce.mode,Ye,Oe.key),Ye.return=Ce,Ce=Ye):(Ye=C0(Oe.type,Oe.key,Oe.props,null,Ce.mode,Ye),Kd(Ye,Oe),Ye.return=Ce,Ce=Ye)}return $(Ce);case D:e:{for(wt=Oe.key;ye!==null;){if(ye.key===wt)if(ye.tag===4&&ye.stateNode.containerInfo===Oe.containerInfo&&ye.stateNode.implementation===Oe.implementation){f(Ce,ye.sibling),Ye=A(ye,Oe.children||[]),Ye.return=Ce,Ce=Ye;break e}else{f(Ce,ye);break}else c(Ce,ye);ye=ye.sibling}Ye=Xy(Oe,Ce.mode,Ye),Ye.return=Ce,Ce=Ye}return $(Ce);case V:return Oe=sc(Oe),Er(Ce,ye,Oe,Ye)}if(re(Oe))return gt(Ce,ye,Oe,Ye);if(q(Oe)){if(wt=q(Oe),typeof wt!="function")throw Error(n(150));return Oe=wt.call(Oe),Ot(Ce,ye,Oe,Ye)}if(typeof Oe.then=="function")return Er(Ce,ye,P0(Oe),Ye);if(Oe.$$typeof===M)return Er(Ce,ye,O0(Ce,Oe),Ye);I0(Ce,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint"?(Oe=""+Oe,ye!==null&&ye.tag===6?(f(Ce,ye.sibling),Ye=A(ye,Oe),Ye.return=Ce,Ce=Ye):(f(Ce,ye),Ye=Yy(Oe,Ce.mode,Ye),Ye.return=Ce,Ce=Ye),$(Ce)):f(Ce,ye)}return function(Ce,ye,Oe,Ye){try{Wd=0;var wt=Er(Ce,ye,Oe,Ye);return du=null,wt}catch(bt){if(bt===uu||bt===_0)throw bt;var nr=Qn(29,bt,null,Ce.mode);return nr.lanes=Ye,nr.return=Ce,nr}finally{}}}var ic=_S(!0),kS=_S(!1),Ji=!1;function l1(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function i1(s,c){s=s.updateQueue,c.updateQueue===s&&(c.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function eo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function to(s,c,f){var E=s.updateQueue;if(E===null)return null;if(E=E.shared,(cr&2)!==0){var A=E.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),E.pending=c,c=S0(s),gS(s,null,f),c}return N0(s,E,c,f),S0(s)}function Zd(s,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var E=c.lanes;E&=s.pendingLanes,f|=E,c.lanes=f,Tn(s,f)}}function o1(s,c){var f=s.updateQueue,E=s.alternate;if(E!==null&&(E=E.updateQueue,f===E)){var A=null,_=null;if(f=f.firstBaseUpdate,f!==null){do{var $={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};_===null?A=_=$:_=_.next=$,f=f.next}while(f!==null);_===null?A=_=c:_=_.next=c}else A=_=c;f={baseState:E.baseState,firstBaseUpdate:A,lastBaseUpdate:_,shared:E.shared,callbacks:E.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=c:s.next=c,f.lastBaseUpdate=c}var c1=!1;function Qd(){if(c1){var s=cu;if(s!==null)throw s}}function Jd(s,c,f,E){c1=!1;var A=s.updateQueue;Ji=!1;var _=A.firstBaseUpdate,$=A.lastBaseUpdate,Q=A.shared.pending;if(Q!==null){A.shared.pending=null;var de=Q,De=de.next;de.next=null,$===null?_=De:$.next=De,$=de;var He=s.alternate;He!==null&&(He=He.updateQueue,Q=He.lastBaseUpdate,Q!==$&&(Q===null?He.firstBaseUpdate=De:Q.next=De,He.lastBaseUpdate=de))}if(_!==null){var Xe=A.baseState;$=0,He=De=de=null,Q=_;do{var _e=Q.lane&-536870913,Fe=_e!==Q.lane;if(Fe?(Kt&_e)===_e:(E&_e)===_e){_e!==0&&_e===ou&&(c1=!0),He!==null&&(He=He.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var gt=s,Ot=Q;_e=c;var Er=f;switch(Ot.tag){case 1:if(gt=Ot.payload,typeof gt=="function"){Xe=gt.call(Er,Xe,_e);break e}Xe=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=Ot.payload,_e=typeof gt=="function"?gt.call(Er,Xe,_e):gt,_e==null)break e;Xe=v({},Xe,_e);break e;case 2:Ji=!0}}_e=Q.callback,_e!==null&&(s.flags|=64,Fe&&(s.flags|=8192),Fe=A.callbacks,Fe===null?A.callbacks=[_e]:Fe.push(_e))}else Fe={lane:_e,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},He===null?(De=He=Fe,de=Xe):He=He.next=Fe,$|=_e;if(Q=Q.next,Q===null){if(Q=A.shared.pending,Q===null)break;Fe=Q,Q=Fe.next,Fe.next=null,A.lastBaseUpdate=Fe,A.shared.pending=null}}while(!0);He===null&&(de=Xe),A.baseState=de,A.firstBaseUpdate=De,A.lastBaseUpdate=He,_===null&&(A.shared.lanes=0),lo|=$,s.lanes=$,s.memoizedState=Xe}}function PS(s,c){if(typeof s!="function")throw Error(n(191,s));s.call(c)}function IS(s,c){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)PS(f[s],c)}var mu=K(null),M0=K(0);function MS(s,c){s=ii,ge(M0,s),ge(mu,c),ii=s|c.baseLanes}function u1(){ge(M0,ii),ge(mu,mu.current)}function d1(){ii=M0.current,te(mu),te(M0)}var Jn=K(null),ws=null;function ro(s){var c=s.alternate;ge(xa,xa.current&1),ge(Jn,s),ws===null&&(c===null||mu.current!==null||c.memoizedState!==null)&&(ws=s)}function m1(s){ge(xa,xa.current),ge(Jn,s),ws===null&&(ws=s)}function RS(s){s.tag===22?(ge(xa,xa.current),ge(Jn,s),ws===null&&(ws=s)):ao()}function ao(){ge(xa,xa.current),ge(Jn,Jn.current)}function es(s){te(Jn),ws===s&&(ws=null),te(xa)}var xa=K(0);function R0(s){for(var c=s;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||xx(f)||bx(f)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Jl=0,Lt=null,br=null,Ta=null,L0=!1,fu=!1,oc=!1,B0=0,em=0,gu=null,A9=0;function ua(){throw Error(n(321))}function f1(s,c){if(c===null)return!1;for(var f=0;f<c.length&&f<s.length;f++)if(!N(s[f],c[f]))return!1;return!0}function g1(s,c,f,E,A,_){return Jl=_,Lt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,J.H=s===null||s.memoizedState===null?xC:D1,oc=!1,_=f(E,A),oc=!1,fu&&(_=BS(c,f,E,A)),LS(s),_}function LS(s){J.H=am;var c=br!==null&&br.next!==null;if(Jl=0,Ta=br=Lt=null,L0=!1,em=0,gu=null,c)throw Error(n(300));s===null||Oa||(s=s.dependencies,s!==null&&T0(s)&&(Oa=!0))}function BS(s,c,f,E){Lt=s;var A=0;do{if(fu&&(gu=null),em=0,fu=!1,25<=A)throw Error(n(301));if(A+=1,Ta=br=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}J.H=bC,_=c(f,E)}while(fu);return _}function T9(){var s=J.H,c=s.useState()[0];return c=typeof c.then=="function"?tm(c):c,s=s.useState()[0],(br!==null?br.memoizedState:null)!==s&&(Lt.flags|=1024),c}function h1(){var s=B0!==0;return B0=0,s}function p1(s,c,f){c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~f}function y1(s){if(L0){for(s=s.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}L0=!1}Jl=0,Ta=br=Lt=null,fu=!1,em=B0=0,gu=null}function vn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ta===null?Lt.memoizedState=Ta=s:Ta=Ta.next=s,Ta}function ba(){if(br===null){var s=Lt.alternate;s=s!==null?s.memoizedState:null}else s=br.next;var c=Ta===null?Lt.memoizedState:Ta.next;if(c!==null)Ta=c,br=s;else{if(s===null)throw Lt.alternate===null?Error(n(467)):Error(n(310));br=s,s={memoizedState:br.memoizedState,baseState:br.baseState,baseQueue:br.baseQueue,queue:br.queue,next:null},Ta===null?Lt.memoizedState=Ta=s:Ta=Ta.next=s}return Ta}function F0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tm(s){var c=em;return em+=1,gu===null&&(gu=[]),s=TS(gu,s,c),c=Lt,(Ta===null?c.memoizedState:Ta.next)===null&&(c=c.alternate,J.H=c===null||c.memoizedState===null?xC:D1),s}function U0(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return tm(s);if(s.$$typeof===M)return an(s)}throw Error(n(438,String(s)))}function x1(s){var c=null,f=Lt.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var E=Lt.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(c={data:E.data.map(function(A){return A.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=F0(),Lt.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(s),E=0;E<s;E++)f[E]=Y;return c.index++,f}function ei(s,c){return typeof c=="function"?c(s):c}function j0(s){var c=ba();return b1(c,br,s)}function b1(s,c,f){var E=s.queue;if(E===null)throw Error(n(311));E.lastRenderedReducer=f;var A=s.baseQueue,_=E.pending;if(_!==null){if(A!==null){var $=A.next;A.next=_.next,_.next=$}c.baseQueue=A=_,E.pending=null}if(_=s.baseState,A===null)s.memoizedState=_;else{c=A.next;var Q=$=null,de=null,De=c,He=!1;do{var Xe=De.lane&-536870913;if(Xe!==De.lane?(Kt&Xe)===Xe:(Jl&Xe)===Xe){var _e=De.revertLane;if(_e===0)de!==null&&(de=de.next={lane:0,revertLane:0,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),Xe===ou&&(He=!0);else if((Jl&_e)===_e){De=De.next,_e===ou&&(He=!0);continue}else Xe={lane:0,revertLane:De.revertLane,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},de===null?(Q=de=Xe,$=_):de=de.next=Xe,Lt.lanes|=_e,lo|=_e;Xe=De.action,oc&&f(_,Xe),_=De.hasEagerState?De.eagerState:f(_,Xe)}else _e={lane:Xe,revertLane:De.revertLane,gesture:De.gesture,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},de===null?(Q=de=_e,$=_):de=de.next=_e,Lt.lanes|=Xe,lo|=Xe;De=De.next}while(De!==null&&De!==c);if(de===null?$=_:de.next=Q,!N(_,s.memoizedState)&&(Oa=!0,He&&(f=cu,f!==null)))throw f;s.memoizedState=_,s.baseState=$,s.baseQueue=de,E.lastRenderedState=_}return A===null&&(E.lanes=0),[s.memoizedState,E.dispatch]}function v1(s){var c=ba(),f=c.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=s;var E=f.dispatch,A=f.pending,_=c.memoizedState;if(A!==null){f.pending=null;var $=A=A.next;do _=s(_,$.action),$=$.next;while($!==A);N(_,c.memoizedState)||(Oa=!0),c.memoizedState=_,c.baseQueue===null&&(c.baseState=_),f.lastRenderedState=_}return[_,E]}function FS(s,c,f){var E=Lt,A=ba(),_=Qt;if(_){if(f===void 0)throw Error(n(407));f=f()}else f=c();var $=!N((br||A).memoizedState,f);if($&&(A.memoizedState=f,Oa=!0),A=A.queue,N1(zS.bind(null,E,A,s),[s]),A.getSnapshot!==c||$||Ta!==null&&Ta.memoizedState.tag&1){if(E.flags|=2048,hu(9,{destroy:void 0},jS.bind(null,E,A,f,c),null),Dr===null)throw Error(n(349));_||(Jl&127)!==0||US(E,c,f)}return f}function US(s,c,f){s.flags|=16384,s={getSnapshot:c,value:f},c=Lt.updateQueue,c===null?(c=F0(),Lt.updateQueue=c,c.stores=[s]):(f=c.stores,f===null?c.stores=[s]:f.push(s))}function jS(s,c,f,E){c.value=f,c.getSnapshot=E,VS(c)&&HS(s)}function zS(s,c,f){return f(function(){VS(c)&&HS(s)})}function VS(s){var c=s.getSnapshot;s=s.value;try{var f=c();return!N(s,f)}catch{return!0}}function HS(s){var c=Jo(s,2);c!==null&&Ln(c,s,2)}function E1(s){var c=vn();if(typeof s=="function"){var f=s;if(s=f(),oc){Je(!0);try{f()}finally{Je(!1)}}}return c.memoizedState=c.baseState=s,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:s},c}function $S(s,c,f,E){return s.baseState=f,b1(s,br,typeof E=="function"?E:ei)}function O9(s,c,f,E,A){if(H0(s))throw Error(n(485));if(s=c.action,s!==null){var _={payload:A,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){_.listeners.push($)}};J.T!==null?f(!0):_.isTransition=!1,E(_),f=c.pending,f===null?(_.next=c.pending=_,qS(c,_)):(_.next=f.next,c.pending=f.next=_)}}function qS(s,c){var f=c.action,E=c.payload,A=s.state;if(c.isTransition){var _=J.T,$={};J.T=$;try{var Q=f(A,E),de=J.S;de!==null&&de($,Q),GS(s,c,Q)}catch(De){w1(s,c,De)}finally{_!==null&&$.types!==null&&(_.types=$.types),J.T=_}}else try{_=f(A,E),GS(s,c,_)}catch(De){w1(s,c,De)}}function GS(s,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(E){YS(s,c,E)},function(E){return w1(s,c,E)}):YS(s,c,f)}function YS(s,c,f){c.status="fulfilled",c.value=f,XS(c),s.state=f,c=s.pending,c!==null&&(f=c.next,f===c?s.pending=null:(f=f.next,c.next=f,qS(s,f)))}function w1(s,c,f){var E=s.pending;if(s.pending=null,E!==null){E=E.next;do c.status="rejected",c.reason=f,XS(c),c=c.next;while(c!==E)}s.action=null}function XS(s){s=s.listeners;for(var c=0;c<s.length;c++)(0,s[c])()}function WS(s,c){return c}function KS(s,c){if(Qt){var f=Dr.formState;if(f!==null){e:{var E=Lt;if(Qt){if(zr){t:{for(var A=zr,_=Es;A.nodeType!==8;){if(!_){A=null;break t}if(A=Ns(A.nextSibling),A===null){A=null;break t}}_=A.data,A=_==="F!"||_==="F"?A:null}if(A){zr=Ns(A.nextSibling),E=A.data==="F!";break e}}Zi(E)}E=!1}E&&(c=f[0])}}return f=vn(),f.memoizedState=f.baseState=c,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:WS,lastRenderedState:c},f.queue=E,f=hC.bind(null,Lt,E),E.dispatch=f,E=E1(!1),_=O1.bind(null,Lt,!1,E.queue),E=vn(),A={state:c,dispatch:null,action:s,pending:null},E.queue=A,f=O9.bind(null,Lt,A,_,f),A.dispatch=f,E.memoizedState=s,[c,f,!1]}function ZS(s){var c=ba();return QS(c,br,s)}function QS(s,c,f){if(c=b1(s,c,WS)[0],s=j0(ei)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var E=tm(c)}catch($){throw $===uu?_0:$}else E=c;c=ba();var A=c.queue,_=A.dispatch;return f!==c.memoizedState&&(Lt.flags|=2048,hu(9,{destroy:void 0},D9.bind(null,A,f),null)),[E,_,s]}function D9(s,c){s.action=c}function JS(s){var c=ba(),f=br;if(f!==null)return QS(c,f,s);ba(),c=c.memoizedState,f=ba();var E=f.queue.dispatch;return f.memoizedState=s,[c,E,!1]}function hu(s,c,f,E){return s={tag:s,create:f,deps:E,inst:c,next:null},c=Lt.updateQueue,c===null&&(c=F0(),Lt.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=s.next=s:(E=f.next,f.next=s,s.next=E,c.lastEffect=s),s}function eC(){return ba().memoizedState}function z0(s,c,f,E){var A=vn();Lt.flags|=s,A.memoizedState=hu(1|c,{destroy:void 0},f,E===void 0?null:E)}function V0(s,c,f,E){var A=ba();E=E===void 0?null:E;var _=A.memoizedState.inst;br!==null&&E!==null&&f1(E,br.memoizedState.deps)?A.memoizedState=hu(c,_,f,E):(Lt.flags|=s,A.memoizedState=hu(1|c,_,f,E))}function tC(s,c){z0(8390656,8,s,c)}function N1(s,c){V0(2048,8,s,c)}function _9(s){Lt.flags|=4;var c=Lt.updateQueue;if(c===null)c=F0(),Lt.updateQueue=c,c.events=[s];else{var f=c.events;f===null?c.events=[s]:f.push(s)}}function rC(s){var c=ba().memoizedState;return _9({ref:c,nextImpl:s}),function(){if((cr&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}function aC(s,c){return V0(4,2,s,c)}function nC(s,c){return V0(4,4,s,c)}function sC(s,c){if(typeof c=="function"){s=s();var f=c(s);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return s=s(),c.current=s,function(){c.current=null}}function lC(s,c,f){f=f!=null?f.concat([s]):null,V0(4,4,sC.bind(null,c,s),f)}function S1(){}function iC(s,c){var f=ba();c=c===void 0?null:c;var E=f.memoizedState;return c!==null&&f1(c,E[1])?E[0]:(f.memoizedState=[s,c],s)}function oC(s,c){var f=ba();c=c===void 0?null:c;var E=f.memoizedState;if(c!==null&&f1(c,E[1]))return E[0];if(E=s(),oc){Je(!0);try{s()}finally{Je(!1)}}return f.memoizedState=[E,c],E}function C1(s,c,f){return f===void 0||(Jl&1073741824)!==0&&(Kt&261930)===0?s.memoizedState=c:(s.memoizedState=f,s=c4(),Lt.lanes|=s,lo|=s,f)}function cC(s,c,f,E){return N(f,c)?f:mu.current!==null?(s=C1(s,f,E),N(s,c)||(Oa=!0),s):(Jl&42)===0||(Jl&1073741824)!==0&&(Kt&261930)===0?(Oa=!0,s.memoizedState=f):(s=c4(),Lt.lanes|=s,lo|=s,c)}function uC(s,c,f,E,A){var _=ae.p;ae.p=_!==0&&8>_?_:8;var $=J.T,Q={};J.T=Q,O1(s,!1,c,f);try{var de=A(),De=J.S;if(De!==null&&De(Q,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var He=C9(de,E);rm(s,c,He,as(s))}else rm(s,c,E,as(s))}catch(Xe){rm(s,c,{then:function(){},status:"rejected",reason:Xe},as())}finally{ae.p=_,$!==null&&Q.types!==null&&($.types=Q.types),J.T=$}}function k9(){}function A1(s,c,f,E){if(s.tag!==5)throw Error(n(476));var A=dC(s).queue;uC(s,A,c,pe,f===null?k9:function(){return mC(s),f(E)})}function dC(s){var c=s.memoizedState;if(c!==null)return c;c={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:pe},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:f},next:null},s.memoizedState=c,s=s.alternate,s!==null&&(s.memoizedState=c),c}function mC(s){var c=dC(s);c.next===null&&(c=s.alternate.memoizedState),rm(s,c.next.queue,{},as())}function T1(){return an(bm)}function fC(){return ba().memoizedState}function gC(){return ba().memoizedState}function P9(s){for(var c=s.return;c!==null;){switch(c.tag){case 24:case 3:var f=as();s=eo(f);var E=to(c,s,f);E!==null&&(Ln(E,c,f),Zd(E,c,f)),c={cache:r1()},s.payload=c;return}c=c.return}}function I9(s,c,f){var E=as();f={lane:E,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},H0(s)?pC(c,f):(f=qy(s,c,f,E),f!==null&&(Ln(f,s,E),yC(f,c,E)))}function hC(s,c,f){var E=as();rm(s,c,f,E)}function rm(s,c,f,E){var A={lane:E,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(H0(s))pC(c,A);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=c.lastRenderedReducer,_!==null))try{var $=c.lastRenderedState,Q=_($,f);if(A.hasEagerState=!0,A.eagerState=Q,N(Q,$))return N0(s,c,A,0),Dr===null&&w0(),!1}catch{}finally{}if(f=qy(s,c,A,E),f!==null)return Ln(f,s,E),yC(f,c,E),!0}return!1}function O1(s,c,f,E){if(E={lane:2,revertLane:lx(),gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},H0(s)){if(c)throw Error(n(479))}else c=qy(s,f,E,2),c!==null&&Ln(c,s,2)}function H0(s){var c=s.alternate;return s===Lt||c!==null&&c===Lt}function pC(s,c){fu=L0=!0;var f=s.pending;f===null?c.next=c:(c.next=f.next,f.next=c),s.pending=c}function yC(s,c,f){if((f&4194048)!==0){var E=c.lanes;E&=s.pendingLanes,f|=E,c.lanes=f,Tn(s,f)}}var am={readContext:an,use:U0,useCallback:ua,useContext:ua,useEffect:ua,useImperativeHandle:ua,useLayoutEffect:ua,useInsertionEffect:ua,useMemo:ua,useReducer:ua,useRef:ua,useState:ua,useDebugValue:ua,useDeferredValue:ua,useTransition:ua,useSyncExternalStore:ua,useId:ua,useHostTransitionStatus:ua,useFormState:ua,useActionState:ua,useOptimistic:ua,useMemoCache:ua,useCacheRefresh:ua};am.useEffectEvent=ua;var xC={readContext:an,use:U0,useCallback:function(s,c){return vn().memoizedState=[s,c===void 0?null:c],s},useContext:an,useEffect:tC,useImperativeHandle:function(s,c,f){f=f!=null?f.concat([s]):null,z0(4194308,4,sC.bind(null,c,s),f)},useLayoutEffect:function(s,c){return z0(4194308,4,s,c)},useInsertionEffect:function(s,c){z0(4,2,s,c)},useMemo:function(s,c){var f=vn();c=c===void 0?null:c;var E=s();if(oc){Je(!0);try{s()}finally{Je(!1)}}return f.memoizedState=[E,c],E},useReducer:function(s,c,f){var E=vn();if(f!==void 0){var A=f(c);if(oc){Je(!0);try{f(c)}finally{Je(!1)}}}else A=c;return E.memoizedState=E.baseState=A,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:A},E.queue=s,s=s.dispatch=I9.bind(null,Lt,s),[E.memoizedState,s]},useRef:function(s){var c=vn();return s={current:s},c.memoizedState=s},useState:function(s){s=E1(s);var c=s.queue,f=hC.bind(null,Lt,c);return c.dispatch=f,[s.memoizedState,f]},useDebugValue:S1,useDeferredValue:function(s,c){var f=vn();return C1(f,s,c)},useTransition:function(){var s=E1(!1);return s=uC.bind(null,Lt,s.queue,!0,!1),vn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,c,f){var E=Lt,A=vn();if(Qt){if(f===void 0)throw Error(n(407));f=f()}else{if(f=c(),Dr===null)throw Error(n(349));(Kt&127)!==0||US(E,c,f)}A.memoizedState=f;var _={value:f,getSnapshot:c};return A.queue=_,tC(zS.bind(null,E,_,s),[s]),E.flags|=2048,hu(9,{destroy:void 0},jS.bind(null,E,_,f,c),null),f},useId:function(){var s=vn(),c=Dr.identifierPrefix;if(Qt){var f=wl,E=El;f=(E&~(1<<32-st(E)-1)).toString(32)+f,c="_"+c+"R_"+f,f=B0++,0<f&&(c+="H"+f.toString(32)),c+="_"}else f=A9++,c="_"+c+"r_"+f.toString(32)+"_";return s.memoizedState=c},useHostTransitionStatus:T1,useFormState:KS,useActionState:KS,useOptimistic:function(s){var c=vn();c.memoizedState=c.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=O1.bind(null,Lt,!0,f),f.dispatch=c,[s,c]},useMemoCache:x1,useCacheRefresh:function(){return vn().memoizedState=P9.bind(null,Lt)},useEffectEvent:function(s){var c=vn(),f={impl:s};return c.memoizedState=f,function(){if((cr&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},D1={readContext:an,use:U0,useCallback:iC,useContext:an,useEffect:N1,useImperativeHandle:lC,useInsertionEffect:aC,useLayoutEffect:nC,useMemo:oC,useReducer:j0,useRef:eC,useState:function(){return j0(ei)},useDebugValue:S1,useDeferredValue:function(s,c){var f=ba();return cC(f,br.memoizedState,s,c)},useTransition:function(){var s=j0(ei)[0],c=ba().memoizedState;return[typeof s=="boolean"?s:tm(s),c]},useSyncExternalStore:FS,useId:fC,useHostTransitionStatus:T1,useFormState:ZS,useActionState:ZS,useOptimistic:function(s,c){var f=ba();return $S(f,br,s,c)},useMemoCache:x1,useCacheRefresh:gC};D1.useEffectEvent=rC;var bC={readContext:an,use:U0,useCallback:iC,useContext:an,useEffect:N1,useImperativeHandle:lC,useInsertionEffect:aC,useLayoutEffect:nC,useMemo:oC,useReducer:v1,useRef:eC,useState:function(){return v1(ei)},useDebugValue:S1,useDeferredValue:function(s,c){var f=ba();return br===null?C1(f,s,c):cC(f,br.memoizedState,s,c)},useTransition:function(){var s=v1(ei)[0],c=ba().memoizedState;return[typeof s=="boolean"?s:tm(s),c]},useSyncExternalStore:FS,useId:fC,useHostTransitionStatus:T1,useFormState:JS,useActionState:JS,useOptimistic:function(s,c){var f=ba();return br!==null?$S(f,br,s,c):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:x1,useCacheRefresh:gC};bC.useEffectEvent=rC;function _1(s,c,f,E){c=s.memoizedState,f=f(E,c),f=f==null?c:v({},c,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var k1={enqueueSetState:function(s,c,f){s=s._reactInternals;var E=as(),A=eo(E);A.payload=c,f!=null&&(A.callback=f),c=to(s,A,E),c!==null&&(Ln(c,s,E),Zd(c,s,E))},enqueueReplaceState:function(s,c,f){s=s._reactInternals;var E=as(),A=eo(E);A.tag=1,A.payload=c,f!=null&&(A.callback=f),c=to(s,A,E),c!==null&&(Ln(c,s,E),Zd(c,s,E))},enqueueForceUpdate:function(s,c){s=s._reactInternals;var f=as(),E=eo(f);E.tag=2,c!=null&&(E.callback=c),c=to(s,E,f),c!==null&&(Ln(c,s,f),Zd(c,s,f))}};function vC(s,c,f,E,A,_,$){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(E,_,$):c.prototype&&c.prototype.isPureReactComponent?!S(f,E)||!S(A,_):!0}function EC(s,c,f,E){s=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,E),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,E),c.state!==s&&k1.enqueueReplaceState(c,c.state,null)}function cc(s,c){var f=c;if("ref"in c){f={};for(var E in c)E!=="ref"&&(f[E]=c[E])}if(s=s.defaultProps){f===c&&(f=v({},f));for(var A in s)f[A]===void 0&&(f[A]=s[A])}return f}function wC(s){E0(s)}function NC(s){console.error(s)}function SC(s){E0(s)}function $0(s,c){try{var f=s.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(E){setTimeout(function(){throw E})}}function CC(s,c,f){try{var E=s.onCaughtError;E(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function P1(s,c,f){return f=eo(f),f.tag=3,f.payload={element:null},f.callback=function(){$0(s,c)},f}function AC(s){return s=eo(s),s.tag=3,s}function TC(s,c,f,E){var A=f.type.getDerivedStateFromError;if(typeof A=="function"){var _=E.value;s.payload=function(){return A(_)},s.callback=function(){CC(c,f,E)}}var $=f.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(s.callback=function(){CC(c,f,E),typeof A!="function"&&(io===null?io=new Set([this]):io.add(this));var Q=E.stack;this.componentDidCatch(E.value,{componentStack:Q!==null?Q:""})})}function M9(s,c,f,E,A){if(f.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(c=f.alternate,c!==null&&iu(c,f,A,!0),f=Jn.current,f!==null){switch(f.tag){case 31:case 13:return ws===null?rg():f.alternate===null&&da===0&&(da=3),f.flags&=-257,f.flags|=65536,f.lanes=A,E===k0?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([E]):c.add(E),ax(s,E,A)),!1;case 22:return f.flags|=65536,E===k0?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([E])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([E]):f.add(E)),ax(s,E,A)),!1}throw Error(n(435,f.tag))}return ax(s,E,A),rg(),!1}if(Qt)return c=Jn.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=A,E!==Zy&&(s=Error(n(422),{cause:E}),Gd(xs(s,f)))):(E!==Zy&&(c=Error(n(423),{cause:E}),Gd(xs(c,f))),s=s.current.alternate,s.flags|=65536,A&=-A,s.lanes|=A,E=xs(E,f),A=P1(s.stateNode,E,A),o1(s,A),da!==4&&(da=2)),!1;var _=Error(n(520),{cause:E});if(_=xs(_,f),dm===null?dm=[_]:dm.push(_),da!==4&&(da=2),c===null)return!0;E=xs(E,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,s=A&-A,f.lanes|=s,s=P1(f.stateNode,E,s),o1(f,s),!1;case 1:if(c=f.type,_=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(io===null||!io.has(_))))return f.flags|=65536,A&=-A,f.lanes|=A,A=AC(A),TC(A,s,f,E),o1(f,A),!1}f=f.return}while(f!==null);return!1}var I1=Error(n(461)),Oa=!1;function nn(s,c,f,E){c.child=s===null?kS(c,null,f,E):ic(c,s.child,f,E)}function OC(s,c,f,E,A){f=f.render;var _=c.ref;if("ref"in E){var $={};for(var Q in E)Q!=="ref"&&($[Q]=E[Q])}else $=E;return ac(c),E=g1(s,c,f,$,_,A),Q=h1(),s!==null&&!Oa?(p1(s,c,A),ti(s,c,A)):(Qt&&Q&&Wy(c),c.flags|=1,nn(s,c,E,A),c.child)}function DC(s,c,f,E,A){if(s===null){var _=f.type;return typeof _=="function"&&!Gy(_)&&_.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=_,_C(s,c,_,E,A)):(s=C0(f.type,null,E,c,c.mode,A),s.ref=c.ref,s.return=c,c.child=s)}if(_=s.child,!z1(s,A)){var $=_.memoizedProps;if(f=f.compare,f=f!==null?f:S,f($,E)&&s.ref===c.ref)return ti(s,c,A)}return c.flags|=1,s=Wl(_,E),s.ref=c.ref,s.return=c,c.child=s}function _C(s,c,f,E,A){if(s!==null){var _=s.memoizedProps;if(S(_,E)&&s.ref===c.ref)if(Oa=!1,c.pendingProps=E=_,z1(s,A))(s.flags&131072)!==0&&(Oa=!0);else return c.lanes=s.lanes,ti(s,c,A)}return M1(s,c,f,E,A)}function kC(s,c,f,E){var A=E.children,_=s!==null?s.memoizedState:null;if(s===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.mode==="hidden"){if((c.flags&128)!==0){if(_=_!==null?_.baseLanes|f:f,s!==null){for(E=c.child=s.child,A=0;E!==null;)A=A|E.lanes|E.childLanes,E=E.sibling;E=A&~_}else E=0,c.child=null;return PC(s,c,_,f,E)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},s!==null&&D0(c,_!==null?_.cachePool:null),_!==null?MS(c,_):u1(),RS(c);else return E=c.lanes=536870912,PC(s,c,_!==null?_.baseLanes|f:f,f,E)}else _!==null?(D0(c,_.cachePool),MS(c,_),ao(),c.memoizedState=null):(s!==null&&D0(c,null),u1(),ao());return nn(s,c,A,f),c.child}function nm(s,c){return s!==null&&s.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function PC(s,c,f,E,A){var _=n1();return _=_===null?null:{parent:Aa._currentValue,pool:_},c.memoizedState={baseLanes:f,cachePool:_},s!==null&&D0(c,null),u1(),RS(c),s!==null&&iu(s,c,E,!0),c.childLanes=A,null}function q0(s,c){return c=Y0({mode:c.mode,children:c.children},s.mode),c.ref=s.ref,s.child=c,c.return=s,c}function IC(s,c,f){return ic(c,s.child,null,f),s=q0(c,c.pendingProps),s.flags|=2,es(c),c.memoizedState=null,s}function R9(s,c,f){var E=c.pendingProps,A=(c.flags&128)!==0;if(c.flags&=-129,s===null){if(Qt){if(E.mode==="hidden")return s=q0(c,E),c.lanes=536870912,nm(null,s);if(m1(c),(s=zr)?(s=q4(s,Es),s=s!==null&&s.data==="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:Wi!==null?{id:El,overflow:wl}:null,retryLane:536870912,hydrationErrors:null},f=pS(s),f.return=c,c.child=f,rn=c,zr=null)):s=null,s===null)throw Zi(c);return c.lanes=536870912,null}return q0(c,E)}var _=s.memoizedState;if(_!==null){var $=_.dehydrated;if(m1(c),A)if(c.flags&256)c.flags&=-257,c=IC(s,c,f);else if(c.memoizedState!==null)c.child=s.child,c.flags|=128,c=null;else throw Error(n(558));else if(Oa||iu(s,c,f,!1),A=(f&s.childLanes)!==0,Oa||A){if(E=Dr,E!==null&&($=zl(E,f),$!==0&&$!==_.retryLane))throw _.retryLane=$,Jo(s,$),Ln(E,s,$),I1;rg(),c=IC(s,c,f)}else s=_.treeContext,zr=Ns($.nextSibling),rn=c,Qt=!0,Ki=null,Es=!1,s!==null&&bS(c,s),c=q0(c,E),c.flags|=4096;return c}return s=Wl(s.child,{mode:E.mode,children:E.children}),s.ref=c.ref,c.child=s,s.return=c,s}function G0(s,c){var f=c.ref;if(f===null)s!==null&&s.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(s===null||s.ref!==f)&&(c.flags|=4194816)}}function M1(s,c,f,E,A){return ac(c),f=g1(s,c,f,E,void 0,A),E=h1(),s!==null&&!Oa?(p1(s,c,A),ti(s,c,A)):(Qt&&E&&Wy(c),c.flags|=1,nn(s,c,f,A),c.child)}function MC(s,c,f,E,A,_){return ac(c),c.updateQueue=null,f=BS(c,E,f,A),LS(s),E=h1(),s!==null&&!Oa?(p1(s,c,_),ti(s,c,_)):(Qt&&E&&Wy(c),c.flags|=1,nn(s,c,f,_),c.child)}function RC(s,c,f,E,A){if(ac(c),c.stateNode===null){var _=au,$=f.contextType;typeof $=="object"&&$!==null&&(_=an($)),_=new f(E,_),c.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=k1,c.stateNode=_,_._reactInternals=c,_=c.stateNode,_.props=E,_.state=c.memoizedState,_.refs={},l1(c),$=f.contextType,_.context=typeof $=="object"&&$!==null?an($):au,_.state=c.memoizedState,$=f.getDerivedStateFromProps,typeof $=="function"&&(_1(c,f,$,E),_.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||($=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),$!==_.state&&k1.enqueueReplaceState(_,_.state,null),Jd(c,E,_,A),Qd(),_.state=c.memoizedState),typeof _.componentDidMount=="function"&&(c.flags|=4194308),E=!0}else if(s===null){_=c.stateNode;var Q=c.memoizedProps,de=cc(f,Q);_.props=de;var De=_.context,He=f.contextType;$=au,typeof He=="object"&&He!==null&&($=an(He));var Xe=f.getDerivedStateFromProps;He=typeof Xe=="function"||typeof _.getSnapshotBeforeUpdate=="function",Q=c.pendingProps!==Q,He||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(Q||De!==$)&&EC(c,_,E,$),Ji=!1;var _e=c.memoizedState;_.state=_e,Jd(c,E,_,A),Qd(),De=c.memoizedState,Q||_e!==De||Ji?(typeof Xe=="function"&&(_1(c,f,Xe,E),De=c.memoizedState),(de=Ji||vC(c,f,de,E,_e,De,$))?(He||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(c.flags|=4194308)):(typeof _.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=E,c.memoizedState=De),_.props=E,_.state=De,_.context=$,E=de):(typeof _.componentDidMount=="function"&&(c.flags|=4194308),E=!1)}else{_=c.stateNode,i1(s,c),$=c.memoizedProps,He=cc(f,$),_.props=He,Xe=c.pendingProps,_e=_.context,De=f.contextType,de=au,typeof De=="object"&&De!==null&&(de=an(De)),Q=f.getDerivedStateFromProps,(De=typeof Q=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||($!==Xe||_e!==de)&&EC(c,_,E,de),Ji=!1,_e=c.memoizedState,_.state=_e,Jd(c,E,_,A),Qd();var Fe=c.memoizedState;$!==Xe||_e!==Fe||Ji||s!==null&&s.dependencies!==null&&T0(s.dependencies)?(typeof Q=="function"&&(_1(c,f,Q,E),Fe=c.memoizedState),(He=Ji||vC(c,f,He,E,_e,Fe,de)||s!==null&&s.dependencies!==null&&T0(s.dependencies))?(De||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(E,Fe,de),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(E,Fe,de)),typeof _.componentDidUpdate=="function"&&(c.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof _.componentDidUpdate!="function"||$===s.memoizedProps&&_e===s.memoizedState||(c.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||$===s.memoizedProps&&_e===s.memoizedState||(c.flags|=1024),c.memoizedProps=E,c.memoizedState=Fe),_.props=E,_.state=Fe,_.context=de,E=He):(typeof _.componentDidUpdate!="function"||$===s.memoizedProps&&_e===s.memoizedState||(c.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||$===s.memoizedProps&&_e===s.memoizedState||(c.flags|=1024),E=!1)}return _=E,G0(s,c),E=(c.flags&128)!==0,_||E?(_=c.stateNode,f=E&&typeof f.getDerivedStateFromError!="function"?null:_.render(),c.flags|=1,s!==null&&E?(c.child=ic(c,s.child,null,A),c.child=ic(c,null,f,A)):nn(s,c,f,A),c.memoizedState=_.state,s=c.child):s=ti(s,c,A),s}function LC(s,c,f,E){return tc(),c.flags|=256,nn(s,c,f,E),c.child}var R1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function L1(s){return{baseLanes:s,cachePool:CS()}}function B1(s,c,f){return s=s!==null?s.childLanes&~f:0,c&&(s|=rs),s}function BC(s,c,f){var E=c.pendingProps,A=!1,_=(c.flags&128)!==0,$;if(($=_)||($=s!==null&&s.memoizedState===null?!1:(xa.current&2)!==0),$&&(A=!0,c.flags&=-129),$=(c.flags&32)!==0,c.flags&=-33,s===null){if(Qt){if(A?ro(c):ao(),(s=zr)?(s=q4(s,Es),s=s!==null&&s.data!=="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:Wi!==null?{id:El,overflow:wl}:null,retryLane:536870912,hydrationErrors:null},f=pS(s),f.return=c,c.child=f,rn=c,zr=null)):s=null,s===null)throw Zi(c);return bx(s)?c.lanes=32:c.lanes=536870912,null}var Q=E.children;return E=E.fallback,A?(ao(),A=c.mode,Q=Y0({mode:"hidden",children:Q},A),E=ec(E,A,f,null),Q.return=c,E.return=c,Q.sibling=E,c.child=Q,E=c.child,E.memoizedState=L1(f),E.childLanes=B1(s,$,f),c.memoizedState=R1,nm(null,E)):(ro(c),F1(c,Q))}var de=s.memoizedState;if(de!==null&&(Q=de.dehydrated,Q!==null)){if(_)c.flags&256?(ro(c),c.flags&=-257,c=U1(s,c,f)):c.memoizedState!==null?(ao(),c.child=s.child,c.flags|=128,c=null):(ao(),Q=E.fallback,A=c.mode,E=Y0({mode:"visible",children:E.children},A),Q=ec(Q,A,f,null),Q.flags|=2,E.return=c,Q.return=c,E.sibling=Q,c.child=E,ic(c,s.child,null,f),E=c.child,E.memoizedState=L1(f),E.childLanes=B1(s,$,f),c.memoizedState=R1,c=nm(null,E));else if(ro(c),bx(Q)){if($=Q.nextSibling&&Q.nextSibling.dataset,$)var De=$.dgst;$=De,E=Error(n(419)),E.stack="",E.digest=$,Gd({value:E,source:null,stack:null}),c=U1(s,c,f)}else if(Oa||iu(s,c,f,!1),$=(f&s.childLanes)!==0,Oa||$){if($=Dr,$!==null&&(E=zl($,f),E!==0&&E!==de.retryLane))throw de.retryLane=E,Jo(s,E),Ln($,s,E),I1;xx(Q)||rg(),c=U1(s,c,f)}else xx(Q)?(c.flags|=192,c.child=s.child,c=null):(s=de.treeContext,zr=Ns(Q.nextSibling),rn=c,Qt=!0,Ki=null,Es=!1,s!==null&&bS(c,s),c=F1(c,E.children),c.flags|=4096);return c}return A?(ao(),Q=E.fallback,A=c.mode,de=s.child,De=de.sibling,E=Wl(de,{mode:"hidden",children:E.children}),E.subtreeFlags=de.subtreeFlags&65011712,De!==null?Q=Wl(De,Q):(Q=ec(Q,A,f,null),Q.flags|=2),Q.return=c,E.return=c,E.sibling=Q,c.child=E,nm(null,E),E=c.child,Q=s.child.memoizedState,Q===null?Q=L1(f):(A=Q.cachePool,A!==null?(de=Aa._currentValue,A=A.parent!==de?{parent:de,pool:de}:A):A=CS(),Q={baseLanes:Q.baseLanes|f,cachePool:A}),E.memoizedState=Q,E.childLanes=B1(s,$,f),c.memoizedState=R1,nm(s.child,E)):(ro(c),f=s.child,s=f.sibling,f=Wl(f,{mode:"visible",children:E.children}),f.return=c,f.sibling=null,s!==null&&($=c.deletions,$===null?(c.deletions=[s],c.flags|=16):$.push(s)),c.child=f,c.memoizedState=null,f)}function F1(s,c){return c=Y0({mode:"visible",children:c},s.mode),c.return=s,s.child=c}function Y0(s,c){return s=Qn(22,s,null,c),s.lanes=0,s}function U1(s,c,f){return ic(c,s.child,null,f),s=F1(c,c.pendingProps.children),s.flags|=2,c.memoizedState=null,s}function FC(s,c,f){s.lanes|=c;var E=s.alternate;E!==null&&(E.lanes|=c),e1(s.return,c,f)}function j1(s,c,f,E,A,_){var $=s.memoizedState;$===null?s.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:E,tail:f,tailMode:A,treeForkCount:_}:($.isBackwards=c,$.rendering=null,$.renderingStartTime=0,$.last=E,$.tail=f,$.tailMode=A,$.treeForkCount=_)}function UC(s,c,f){var E=c.pendingProps,A=E.revealOrder,_=E.tail;E=E.children;var $=xa.current,Q=($&2)!==0;if(Q?($=$&1|2,c.flags|=128):$&=1,ge(xa,$),nn(s,c,E,f),E=Qt?qd:0,!Q&&s!==null&&(s.flags&128)!==0)e:for(s=c.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&FC(s,f,c);else if(s.tag===19)FC(s,f,c);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===c)break e;for(;s.sibling===null;){if(s.return===null||s.return===c)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(A){case"forwards":for(f=c.child,A=null;f!==null;)s=f.alternate,s!==null&&R0(s)===null&&(A=f),f=f.sibling;f=A,f===null?(A=c.child,c.child=null):(A=f.sibling,f.sibling=null),j1(c,!1,A,f,_,E);break;case"backwards":case"unstable_legacy-backwards":for(f=null,A=c.child,c.child=null;A!==null;){if(s=A.alternate,s!==null&&R0(s)===null){c.child=A;break}s=A.sibling,A.sibling=f,f=A,A=s}j1(c,!0,f,null,_,E);break;case"together":j1(c,!1,null,null,void 0,E);break;default:c.memoizedState=null}return c.child}function ti(s,c,f){if(s!==null&&(c.dependencies=s.dependencies),lo|=c.lanes,(f&c.childLanes)===0)if(s!==null){if(iu(s,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(s!==null&&c.child!==s.child)throw Error(n(153));if(c.child!==null){for(s=c.child,f=Wl(s,s.pendingProps),c.child=f,f.return=c;s.sibling!==null;)s=s.sibling,f=f.sibling=Wl(s,s.pendingProps),f.return=c;f.sibling=null}return c.child}function z1(s,c){return(s.lanes&c)!==0?!0:(s=s.dependencies,!!(s!==null&&T0(s)))}function L9(s,c,f){switch(c.tag){case 3:$e(c,c.stateNode.containerInfo),Qi(c,Aa,s.memoizedState.cache),tc();break;case 27:case 5:We(c);break;case 4:$e(c,c.stateNode.containerInfo);break;case 10:Qi(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,m1(c),null;break;case 13:var E=c.memoizedState;if(E!==null)return E.dehydrated!==null?(ro(c),c.flags|=128,null):(f&c.child.childLanes)!==0?BC(s,c,f):(ro(c),s=ti(s,c,f),s!==null?s.sibling:null);ro(c);break;case 19:var A=(s.flags&128)!==0;if(E=(f&c.childLanes)!==0,E||(iu(s,c,f,!1),E=(f&c.childLanes)!==0),A){if(E)return UC(s,c,f);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ge(xa,xa.current),E)break;return null;case 22:return c.lanes=0,kC(s,c,f,c.pendingProps);case 24:Qi(c,Aa,s.memoizedState.cache)}return ti(s,c,f)}function jC(s,c,f){if(s!==null)if(s.memoizedProps!==c.pendingProps)Oa=!0;else{if(!z1(s,f)&&(c.flags&128)===0)return Oa=!1,L9(s,c,f);Oa=(s.flags&131072)!==0}else Oa=!1,Qt&&(c.flags&1048576)!==0&&xS(c,qd,c.index);switch(c.lanes=0,c.tag){case 16:e:{var E=c.pendingProps;if(s=sc(c.elementType),c.type=s,typeof s=="function")Gy(s)?(E=cc(s,E),c.tag=1,c=RC(null,c,s,E,f)):(c.tag=0,c=M1(null,c,s,E,f));else{if(s!=null){var A=s.$$typeof;if(A===G){c.tag=11,c=OC(null,c,s,E,f);break e}else if(A===L){c.tag=14,c=DC(null,c,s,E,f);break e}}throw c=ue(s)||s,Error(n(306,c,""))}}return c;case 0:return M1(s,c,c.type,c.pendingProps,f);case 1:return E=c.type,A=cc(E,c.pendingProps),RC(s,c,E,A,f);case 3:e:{if($e(c,c.stateNode.containerInfo),s===null)throw Error(n(387));E=c.pendingProps;var _=c.memoizedState;A=_.element,i1(s,c),Jd(c,E,null,f);var $=c.memoizedState;if(E=$.cache,Qi(c,Aa,E),E!==_.cache&&t1(c,[Aa],f,!0),Qd(),E=$.element,_.isDehydrated)if(_={element:E,isDehydrated:!1,cache:$.cache},c.updateQueue.baseState=_,c.memoizedState=_,c.flags&256){c=LC(s,c,E,f);break e}else if(E!==A){A=xs(Error(n(424)),c),Gd(A),c=LC(s,c,E,f);break e}else{switch(s=c.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(zr=Ns(s.firstChild),rn=c,Qt=!0,Ki=null,Es=!0,f=kS(c,null,E,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(tc(),E===A){c=ti(s,c,f);break e}nn(s,c,E,f)}c=c.child}return c;case 26:return G0(s,c),s===null?(f=Z4(c.type,null,c.pendingProps,null))?c.memoizedState=f:Qt||(f=c.type,s=c.pendingProps,E=cg(ie.current).createElement(f),E[Yr]=c,E[tr]=s,sn(E,f,s),Pr(E),c.stateNode=E):c.memoizedState=Z4(c.type,s.memoizedProps,c.pendingProps,s.memoizedState),null;case 27:return We(c),s===null&&Qt&&(E=c.stateNode=X4(c.type,c.pendingProps,ie.current),rn=c,Es=!0,A=zr,mo(c.type)?(vx=A,zr=Ns(E.firstChild)):zr=A),nn(s,c,c.pendingProps.children,f),G0(s,c),s===null&&(c.flags|=4194304),c.child;case 5:return s===null&&Qt&&((A=E=zr)&&(E=mL(E,c.type,c.pendingProps,Es),E!==null?(c.stateNode=E,rn=c,zr=Ns(E.firstChild),Es=!1,A=!0):A=!1),A||Zi(c)),We(c),A=c.type,_=c.pendingProps,$=s!==null?s.memoizedProps:null,E=_.children,hx(A,_)?E=null:$!==null&&hx(A,$)&&(c.flags|=32),c.memoizedState!==null&&(A=g1(s,c,T9,null,null,f),bm._currentValue=A),G0(s,c),nn(s,c,E,f),c.child;case 6:return s===null&&Qt&&((s=f=zr)&&(f=fL(f,c.pendingProps,Es),f!==null?(c.stateNode=f,rn=c,zr=null,s=!0):s=!1),s||Zi(c)),null;case 13:return BC(s,c,f);case 4:return $e(c,c.stateNode.containerInfo),E=c.pendingProps,s===null?c.child=ic(c,null,E,f):nn(s,c,E,f),c.child;case 11:return OC(s,c,c.type,c.pendingProps,f);case 7:return nn(s,c,c.pendingProps,f),c.child;case 8:return nn(s,c,c.pendingProps.children,f),c.child;case 12:return nn(s,c,c.pendingProps.children,f),c.child;case 10:return E=c.pendingProps,Qi(c,c.type,E.value),nn(s,c,E.children,f),c.child;case 9:return A=c.type._context,E=c.pendingProps.children,ac(c),A=an(A),E=E(A),c.flags|=1,nn(s,c,E,f),c.child;case 14:return DC(s,c,c.type,c.pendingProps,f);case 15:return _C(s,c,c.type,c.pendingProps,f);case 19:return UC(s,c,f);case 31:return R9(s,c,f);case 22:return kC(s,c,f,c.pendingProps);case 24:return ac(c),E=an(Aa),s===null?(A=n1(),A===null&&(A=Dr,_=r1(),A.pooledCache=_,_.refCount++,_!==null&&(A.pooledCacheLanes|=f),A=_),c.memoizedState={parent:E,cache:A},l1(c),Qi(c,Aa,A)):((s.lanes&f)!==0&&(i1(s,c),Jd(c,null,null,f),Qd()),A=s.memoizedState,_=c.memoizedState,A.parent!==E?(A={parent:E,cache:E},c.memoizedState=A,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=A),Qi(c,Aa,E)):(E=_.cache,Qi(c,Aa,E),E!==A.cache&&t1(c,[Aa],f,!0))),nn(s,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function ri(s){s.flags|=4}function V1(s,c,f,E,A){if((c=(s.mode&32)!==0)&&(c=!1),c){if(s.flags|=16777216,(A&335544128)===A)if(s.stateNode.complete)s.flags|=8192;else if(f4())s.flags|=8192;else throw lc=k0,s1}else s.flags&=-16777217}function zC(s,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!r3(c))if(f4())s.flags|=8192;else throw lc=k0,s1}function X0(s,c){c!==null&&(s.flags|=4),s.flags&16384&&(c=s.tag!==22?Nt():536870912,s.lanes|=c,bu|=c)}function sm(s,c){if(!Qt)switch(s.tailMode){case"hidden":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var E=null;f!==null;)f.alternate!==null&&(E=f),f=f.sibling;E===null?c||s.tail===null?s.tail=null:s.tail.sibling=null:E.sibling=null}}function Vr(s){var c=s.alternate!==null&&s.alternate.child===s.child,f=0,E=0;if(c)for(var A=s.child;A!==null;)f|=A.lanes|A.childLanes,E|=A.subtreeFlags&65011712,E|=A.flags&65011712,A.return=s,A=A.sibling;else for(A=s.child;A!==null;)f|=A.lanes|A.childLanes,E|=A.subtreeFlags,E|=A.flags,A.return=s,A=A.sibling;return s.subtreeFlags|=E,s.childLanes=f,c}function B9(s,c,f){var E=c.pendingProps;switch(Ky(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(c),null;case 1:return Vr(c),null;case 3:return f=c.stateNode,E=null,s!==null&&(E=s.memoizedState.cache),c.memoizedState.cache!==E&&(c.flags|=2048),Ql(Aa),ve(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(lu(c)?ri(c):s===null||s.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Qy())),Vr(c),null;case 26:var A=c.type,_=c.memoizedState;return s===null?(ri(c),_!==null?(Vr(c),zC(c,_)):(Vr(c),V1(c,A,null,E,f))):_?_!==s.memoizedState?(ri(c),Vr(c),zC(c,_)):(Vr(c),c.flags&=-16777217):(s=s.memoizedProps,s!==E&&ri(c),Vr(c),V1(c,A,s,E,f)),null;case 27:if(nt(c),f=ie.current,A=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==E&&ri(c);else{if(!E){if(c.stateNode===null)throw Error(n(166));return Vr(c),null}s=oe.current,lu(c)?vS(c):(s=X4(A,E,f),c.stateNode=s,ri(c))}return Vr(c),null;case 5:if(nt(c),A=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==E&&ri(c);else{if(!E){if(c.stateNode===null)throw Error(n(166));return Vr(c),null}if(_=oe.current,lu(c))vS(c);else{var $=cg(ie.current);switch(_){case 1:_=$.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:_=$.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":_=$.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":_=$.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":_=$.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof E.is=="string"?$.createElement("select",{is:E.is}):$.createElement("select"),E.multiple?_.multiple=!0:E.size&&(_.size=E.size);break;default:_=typeof E.is=="string"?$.createElement(A,{is:E.is}):$.createElement(A)}}_[Yr]=c,_[tr]=E;e:for($=c.child;$!==null;){if($.tag===5||$.tag===6)_.appendChild($.stateNode);else if($.tag!==4&&$.tag!==27&&$.child!==null){$.child.return=$,$=$.child;continue}if($===c)break e;for(;$.sibling===null;){if($.return===null||$.return===c)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}c.stateNode=_;e:switch(sn(_,A,E),A){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}E&&ri(c)}}return Vr(c),V1(c,c.type,s===null?null:s.memoizedProps,c.pendingProps,f),null;case 6:if(s&&c.stateNode!=null)s.memoizedProps!==E&&ri(c);else{if(typeof E!="string"&&c.stateNode===null)throw Error(n(166));if(s=ie.current,lu(c)){if(s=c.stateNode,f=c.memoizedProps,E=null,A=rn,A!==null)switch(A.tag){case 27:case 5:E=A.memoizedProps}s[Yr]=c,s=!!(s.nodeValue===f||E!==null&&E.suppressHydrationWarning===!0||B4(s.nodeValue,f)),s||Zi(c,!0)}else s=cg(s).createTextNode(E),s[Yr]=c,c.stateNode=s}return Vr(c),null;case 31:if(f=c.memoizedState,s===null||s.memoizedState!==null){if(E=lu(c),f!==null){if(s===null){if(!E)throw Error(n(318));if(s=c.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(557));s[Yr]=c}else tc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Vr(c),s=!1}else f=Qy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return c.flags&256?(es(c),c):(es(c),null);if((c.flags&128)!==0)throw Error(n(558))}return Vr(c),null;case 13:if(E=c.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(A=lu(c),E!==null&&E.dehydrated!==null){if(s===null){if(!A)throw Error(n(318));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[Yr]=c}else tc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Vr(c),A=!1}else A=Qy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=A),A=!0;if(!A)return c.flags&256?(es(c),c):(es(c),null)}return es(c),(c.flags&128)!==0?(c.lanes=f,c):(f=E!==null,s=s!==null&&s.memoizedState!==null,f&&(E=c.child,A=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(A=E.alternate.memoizedState.cachePool.pool),_=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(_=E.memoizedState.cachePool.pool),_!==A&&(E.flags|=2048)),f!==s&&f&&(c.child.flags|=8192),X0(c,c.updateQueue),Vr(c),null);case 4:return ve(),s===null&&ux(c.stateNode.containerInfo),Vr(c),null;case 10:return Ql(c.type),Vr(c),null;case 19:if(te(xa),E=c.memoizedState,E===null)return Vr(c),null;if(A=(c.flags&128)!==0,_=E.rendering,_===null)if(A)sm(E,!1);else{if(da!==0||s!==null&&(s.flags&128)!==0)for(s=c.child;s!==null;){if(_=R0(s),_!==null){for(c.flags|=128,sm(E,!1),s=_.updateQueue,c.updateQueue=s,X0(c,s),c.subtreeFlags=0,s=f,f=c.child;f!==null;)hS(f,s),f=f.sibling;return ge(xa,xa.current&1|2),Qt&&Kl(c,E.treeForkCount),c.child}s=s.sibling}E.tail!==null&&mt()>J0&&(c.flags|=128,A=!0,sm(E,!1),c.lanes=4194304)}else{if(!A)if(s=R0(_),s!==null){if(c.flags|=128,A=!0,s=s.updateQueue,c.updateQueue=s,X0(c,s),sm(E,!0),E.tail===null&&E.tailMode==="hidden"&&!_.alternate&&!Qt)return Vr(c),null}else 2*mt()-E.renderingStartTime>J0&&f!==536870912&&(c.flags|=128,A=!0,sm(E,!1),c.lanes=4194304);E.isBackwards?(_.sibling=c.child,c.child=_):(s=E.last,s!==null?s.sibling=_:c.child=_,E.last=_)}return E.tail!==null?(s=E.tail,E.rendering=s,E.tail=s.sibling,E.renderingStartTime=mt(),s.sibling=null,f=xa.current,ge(xa,A?f&1|2:f&1),Qt&&Kl(c,E.treeForkCount),s):(Vr(c),null);case 22:case 23:return es(c),d1(),E=c.memoizedState!==null,s!==null?s.memoizedState!==null!==E&&(c.flags|=8192):E&&(c.flags|=8192),E?(f&536870912)!==0&&(c.flags&128)===0&&(Vr(c),c.subtreeFlags&6&&(c.flags|=8192)):Vr(c),f=c.updateQueue,f!==null&&X0(c,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),E=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(E=c.memoizedState.cachePool.pool),E!==f&&(c.flags|=2048),s!==null&&te(nc),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Ql(Aa),Vr(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function F9(s,c){switch(Ky(c),c.tag){case 1:return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 3:return Ql(Aa),ve(),s=c.flags,(s&65536)!==0&&(s&128)===0?(c.flags=s&-65537|128,c):null;case 26:case 27:case 5:return nt(c),null;case 31:if(c.memoizedState!==null){if(es(c),c.alternate===null)throw Error(n(340));tc()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 13:if(es(c),s=c.memoizedState,s!==null&&s.dehydrated!==null){if(c.alternate===null)throw Error(n(340));tc()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 19:return te(xa),null;case 4:return ve(),null;case 10:return Ql(c.type),null;case 22:case 23:return es(c),d1(),s!==null&&te(nc),s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 24:return Ql(Aa),null;case 25:return null;default:return null}}function VC(s,c){switch(Ky(c),c.tag){case 3:Ql(Aa),ve();break;case 26:case 27:case 5:nt(c);break;case 4:ve();break;case 31:c.memoizedState!==null&&es(c);break;case 13:es(c);break;case 19:te(xa);break;case 10:Ql(c.type);break;case 22:case 23:es(c),d1(),s!==null&&te(nc);break;case 24:Ql(Aa)}}function lm(s,c){try{var f=c.updateQueue,E=f!==null?f.lastEffect:null;if(E!==null){var A=E.next;f=A;do{if((f.tag&s)===s){E=void 0;var _=f.create,$=f.inst;E=_(),$.destroy=E}f=f.next}while(f!==A)}}catch(Q){pr(c,c.return,Q)}}function no(s,c,f){try{var E=c.updateQueue,A=E!==null?E.lastEffect:null;if(A!==null){var _=A.next;E=_;do{if((E.tag&s)===s){var $=E.inst,Q=$.destroy;if(Q!==void 0){$.destroy=void 0,A=c;var de=f,De=Q;try{De()}catch(He){pr(A,de,He)}}}E=E.next}while(E!==_)}}catch(He){pr(c,c.return,He)}}function HC(s){var c=s.updateQueue;if(c!==null){var f=s.stateNode;try{IS(c,f)}catch(E){pr(s,s.return,E)}}}function $C(s,c,f){f.props=cc(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(E){pr(s,c,E)}}function im(s,c){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var E=s.stateNode;break;case 30:E=s.stateNode;break;default:E=s.stateNode}typeof f=="function"?s.refCleanup=f(E):f.current=E}}catch(A){pr(s,c,A)}}function Nl(s,c){var f=s.ref,E=s.refCleanup;if(f!==null)if(typeof E=="function")try{E()}catch(A){pr(s,c,A)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(A){pr(s,c,A)}else f.current=null}function qC(s){var c=s.type,f=s.memoizedProps,E=s.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&E.focus();break e;case"img":f.src?E.src=f.src:f.srcSet&&(E.srcset=f.srcSet)}}catch(A){pr(s,s.return,A)}}function H1(s,c,f){try{var E=s.stateNode;lL(E,s.type,f,c),E[tr]=c}catch(A){pr(s,s.return,A)}}function GC(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&mo(s.type)||s.tag===4}function $1(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||GC(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&mo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function q1(s,c,f){var E=s.tag;if(E===5||E===6)s=s.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(s),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Dn));else if(E!==4&&(E===27&&mo(s.type)&&(f=s.stateNode,c=null),s=s.child,s!==null))for(q1(s,c,f),s=s.sibling;s!==null;)q1(s,c,f),s=s.sibling}function W0(s,c,f){var E=s.tag;if(E===5||E===6)s=s.stateNode,c?f.insertBefore(s,c):f.appendChild(s);else if(E!==4&&(E===27&&mo(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(W0(s,c,f),s=s.sibling;s!==null;)W0(s,c,f),s=s.sibling}function YC(s){var c=s.stateNode,f=s.memoizedProps;try{for(var E=s.type,A=c.attributes;A.length;)c.removeAttributeNode(A[0]);sn(c,E,f),c[Yr]=s,c[tr]=f}catch(_){pr(s,s.return,_)}}var ai=!1,Da=!1,G1=!1,XC=typeof WeakSet=="function"?WeakSet:Set,Xa=null;function U9(s,c){if(s=s.containerInfo,fx=pg,s=W(s),Z(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var E=f.getSelection&&f.getSelection();if(E&&E.rangeCount!==0){f=E.anchorNode;var A=E.anchorOffset,_=E.focusNode;E=E.focusOffset;try{f.nodeType,_.nodeType}catch{f=null;break e}var $=0,Q=-1,de=-1,De=0,He=0,Xe=s,_e=null;t:for(;;){for(var Fe;Xe!==f||A!==0&&Xe.nodeType!==3||(Q=$+A),Xe!==_||E!==0&&Xe.nodeType!==3||(de=$+E),Xe.nodeType===3&&($+=Xe.nodeValue.length),(Fe=Xe.firstChild)!==null;)_e=Xe,Xe=Fe;for(;;){if(Xe===s)break t;if(_e===f&&++De===A&&(Q=$),_e===_&&++He===E&&(de=$),(Fe=Xe.nextSibling)!==null)break;Xe=_e,_e=Xe.parentNode}Xe=Fe}f=Q===-1||de===-1?null:{start:Q,end:de}}else f=null}f=f||{start:0,end:0}}else f=null;for(gx={focusedElem:s,selectionRange:f},pg=!1,Xa=c;Xa!==null;)if(c=Xa,s=c.child,(c.subtreeFlags&1028)!==0&&s!==null)s.return=c,Xa=s;else for(;Xa!==null;){switch(c=Xa,_=c.alternate,s=c.flags,c.tag){case 0:if((s&4)!==0&&(s=c.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)A=s[f],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,f=c,A=_.memoizedProps,_=_.memoizedState,E=f.stateNode;try{var gt=cc(f.type,A);s=E.getSnapshotBeforeUpdate(gt,_),E.__reactInternalSnapshotBeforeUpdate=s}catch(Ot){pr(f,f.return,Ot)}}break;case 3:if((s&1024)!==0){if(s=c.stateNode.containerInfo,f=s.nodeType,f===9)yx(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":yx(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=c.sibling,s!==null){s.return=c.return,Xa=s;break}Xa=c.return}}function WC(s,c,f){var E=f.flags;switch(f.tag){case 0:case 11:case 15:si(s,f),E&4&&lm(5,f);break;case 1:if(si(s,f),E&4)if(s=f.stateNode,c===null)try{s.componentDidMount()}catch($){pr(f,f.return,$)}else{var A=cc(f.type,c.memoizedProps);c=c.memoizedState;try{s.componentDidUpdate(A,c,s.__reactInternalSnapshotBeforeUpdate)}catch($){pr(f,f.return,$)}}E&64&&HC(f),E&512&&im(f,f.return);break;case 3:if(si(s,f),E&64&&(s=f.updateQueue,s!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{IS(s,c)}catch($){pr(f,f.return,$)}}break;case 27:c===null&&E&4&&YC(f);case 26:case 5:si(s,f),c===null&&E&4&&qC(f),E&512&&im(f,f.return);break;case 12:si(s,f);break;case 31:si(s,f),E&4&&QC(s,f);break;case 13:si(s,f),E&4&&JC(s,f),E&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=X9.bind(null,f),gL(s,f))));break;case 22:if(E=f.memoizedState!==null||ai,!E){c=c!==null&&c.memoizedState!==null||Da,A=ai;var _=Da;ai=E,(Da=c)&&!_?li(s,f,(f.subtreeFlags&8772)!==0):si(s,f),ai=A,Da=_}break;case 30:break;default:si(s,f)}}function KC(s){var c=s.alternate;c!==null&&(s.alternate=null,KC(c)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(c=s.stateNode,c!==null&&en(c)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Wr=null,Pn=!1;function ni(s,c,f){for(f=f.child;f!==null;)ZC(s,c,f),f=f.sibling}function ZC(s,c,f){if(be&&typeof be.onCommitFiberUnmount=="function")try{be.onCommitFiberUnmount(kt,f)}catch{}switch(f.tag){case 26:Da||Nl(f,c),ni(s,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Da||Nl(f,c);var E=Wr,A=Pn;mo(f.type)&&(Wr=f.stateNode,Pn=!1),ni(s,c,f),pm(f.stateNode),Wr=E,Pn=A;break;case 5:Da||Nl(f,c);case 6:if(E=Wr,A=Pn,Wr=null,ni(s,c,f),Wr=E,Pn=A,Wr!==null)if(Pn)try{(Wr.nodeType===9?Wr.body:Wr.nodeName==="HTML"?Wr.ownerDocument.body:Wr).removeChild(f.stateNode)}catch(_){pr(f,c,_)}else try{Wr.removeChild(f.stateNode)}catch(_){pr(f,c,_)}break;case 18:Wr!==null&&(Pn?(s=Wr,H4(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),Tu(s)):H4(Wr,f.stateNode));break;case 4:E=Wr,A=Pn,Wr=f.stateNode.containerInfo,Pn=!0,ni(s,c,f),Wr=E,Pn=A;break;case 0:case 11:case 14:case 15:no(2,f,c),Da||no(4,f,c),ni(s,c,f);break;case 1:Da||(Nl(f,c),E=f.stateNode,typeof E.componentWillUnmount=="function"&&$C(f,c,E)),ni(s,c,f);break;case 21:ni(s,c,f);break;case 22:Da=(E=Da)||f.memoizedState!==null,ni(s,c,f),Da=E;break;default:ni(s,c,f)}}function QC(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Tu(s)}catch(f){pr(c,c.return,f)}}}function JC(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Tu(s)}catch(f){pr(c,c.return,f)}}function j9(s){switch(s.tag){case 31:case 13:case 19:var c=s.stateNode;return c===null&&(c=s.stateNode=new XC),c;case 22:return s=s.stateNode,c=s._retryCache,c===null&&(c=s._retryCache=new XC),c;default:throw Error(n(435,s.tag))}}function K0(s,c){var f=j9(s);c.forEach(function(E){if(!f.has(E)){f.add(E);var A=W9.bind(null,s,E);E.then(A,A)}})}function In(s,c){var f=c.deletions;if(f!==null)for(var E=0;E<f.length;E++){var A=f[E],_=s,$=c,Q=$;e:for(;Q!==null;){switch(Q.tag){case 27:if(mo(Q.type)){Wr=Q.stateNode,Pn=!1;break e}break;case 5:Wr=Q.stateNode,Pn=!1;break e;case 3:case 4:Wr=Q.stateNode.containerInfo,Pn=!0;break e}Q=Q.return}if(Wr===null)throw Error(n(160));ZC(_,$,A),Wr=null,Pn=!1,_=A.alternate,_!==null&&(_.return=null),A.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)e4(c,s),c=c.sibling}var Ws=null;function e4(s,c){var f=s.alternate,E=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:In(c,s),Mn(s),E&4&&(no(3,s,s.return),lm(3,s),no(5,s,s.return));break;case 1:In(c,s),Mn(s),E&512&&(Da||f===null||Nl(f,f.return)),E&64&&ai&&(s=s.updateQueue,s!==null&&(E=s.callbacks,E!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?E:f.concat(E))));break;case 26:var A=Ws;if(In(c,s),Mn(s),E&512&&(Da||f===null||Nl(f,f.return)),E&4){var _=f!==null?f.memoizedState:null;if(E=s.memoizedState,f===null)if(E===null)if(s.stateNode===null){e:{E=s.type,f=s.memoizedProps,A=A.ownerDocument||A;t:switch(E){case"title":_=A.getElementsByTagName("title")[0],(!_||_[pl]||_[Yr]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=A.createElement(E),A.head.insertBefore(_,A.querySelector("head > title"))),sn(_,E,f),_[Yr]=s,Pr(_),E=_;break e;case"link":var $=e3("link","href",A).get(E+(f.href||""));if($){for(var Q=0;Q<$.length;Q++)if(_=$[Q],_.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&_.getAttribute("rel")===(f.rel==null?null:f.rel)&&_.getAttribute("title")===(f.title==null?null:f.title)&&_.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){$.splice(Q,1);break t}}_=A.createElement(E),sn(_,E,f),A.head.appendChild(_);break;case"meta":if($=e3("meta","content",A).get(E+(f.content||""))){for(Q=0;Q<$.length;Q++)if(_=$[Q],_.getAttribute("content")===(f.content==null?null:""+f.content)&&_.getAttribute("name")===(f.name==null?null:f.name)&&_.getAttribute("property")===(f.property==null?null:f.property)&&_.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&_.getAttribute("charset")===(f.charSet==null?null:f.charSet)){$.splice(Q,1);break t}}_=A.createElement(E),sn(_,E,f),A.head.appendChild(_);break;default:throw Error(n(468,E))}_[Yr]=s,Pr(_),E=_}s.stateNode=E}else t3(A,s.type,s.stateNode);else s.stateNode=J4(A,E,s.memoizedProps);else _!==E?(_===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):_.count--,E===null?t3(A,s.type,s.stateNode):J4(A,E,s.memoizedProps)):E===null&&s.stateNode!==null&&H1(s,s.memoizedProps,f.memoizedProps)}break;case 27:In(c,s),Mn(s),E&512&&(Da||f===null||Nl(f,f.return)),f!==null&&E&4&&H1(s,s.memoizedProps,f.memoizedProps);break;case 5:if(In(c,s),Mn(s),E&512&&(Da||f===null||Nl(f,f.return)),s.flags&32){A=s.stateNode;try{ji(A,"")}catch(gt){pr(s,s.return,gt)}}E&4&&s.stateNode!=null&&(A=s.memoizedProps,H1(s,A,f!==null?f.memoizedProps:A)),E&1024&&(G1=!0);break;case 6:if(In(c,s),Mn(s),E&4){if(s.stateNode===null)throw Error(n(162));E=s.memoizedProps,f=s.stateNode;try{f.nodeValue=E}catch(gt){pr(s,s.return,gt)}}break;case 3:if(mg=null,A=Ws,Ws=ug(c.containerInfo),In(c,s),Ws=A,Mn(s),E&4&&f!==null&&f.memoizedState.isDehydrated)try{Tu(c.containerInfo)}catch(gt){pr(s,s.return,gt)}G1&&(G1=!1,t4(s));break;case 4:E=Ws,Ws=ug(s.stateNode.containerInfo),In(c,s),Mn(s),Ws=E;break;case 12:In(c,s),Mn(s);break;case 31:In(c,s),Mn(s),E&4&&(E=s.updateQueue,E!==null&&(s.updateQueue=null,K0(s,E)));break;case 13:In(c,s),Mn(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Q0=mt()),E&4&&(E=s.updateQueue,E!==null&&(s.updateQueue=null,K0(s,E)));break;case 22:A=s.memoizedState!==null;var de=f!==null&&f.memoizedState!==null,De=ai,He=Da;if(ai=De||A,Da=He||de,In(c,s),Da=He,ai=De,Mn(s),E&8192)e:for(c=s.stateNode,c._visibility=A?c._visibility&-2:c._visibility|1,A&&(f===null||de||ai||Da||uc(s)),f=null,c=s;;){if(c.tag===5||c.tag===26){if(f===null){de=f=c;try{if(_=de.stateNode,A)$=_.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{Q=de.stateNode;var Xe=de.memoizedProps.style,_e=Xe!=null&&Xe.hasOwnProperty("display")?Xe.display:null;Q.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(gt){pr(de,de.return,gt)}}}else if(c.tag===6){if(f===null){de=c;try{de.stateNode.nodeValue=A?"":de.memoizedProps}catch(gt){pr(de,de.return,gt)}}}else if(c.tag===18){if(f===null){de=c;try{var Fe=de.stateNode;A?$4(Fe,!0):$4(de.stateNode,!1)}catch(gt){pr(de,de.return,gt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===s)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}E&4&&(E=s.updateQueue,E!==null&&(f=E.retryQueue,f!==null&&(E.retryQueue=null,K0(s,f))));break;case 19:In(c,s),Mn(s),E&4&&(E=s.updateQueue,E!==null&&(s.updateQueue=null,K0(s,E)));break;case 30:break;case 21:break;default:In(c,s),Mn(s)}}function Mn(s){var c=s.flags;if(c&2){try{for(var f,E=s.return;E!==null;){if(GC(E)){f=E;break}E=E.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var A=f.stateNode,_=$1(s);W0(s,_,A);break;case 5:var $=f.stateNode;f.flags&32&&(ji($,""),f.flags&=-33);var Q=$1(s);W0(s,Q,$);break;case 3:case 4:var de=f.stateNode.containerInfo,De=$1(s);q1(s,De,de);break;default:throw Error(n(161))}}catch(He){pr(s,s.return,He)}s.flags&=-3}c&4096&&(s.flags&=-4097)}function t4(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var c=s;t4(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),s=s.sibling}}function si(s,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)WC(s,c.alternate,c),c=c.sibling}function uc(s){for(s=s.child;s!==null;){var c=s;switch(c.tag){case 0:case 11:case 14:case 15:no(4,c,c.return),uc(c);break;case 1:Nl(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&$C(c,c.return,f),uc(c);break;case 27:pm(c.stateNode);case 26:case 5:Nl(c,c.return),uc(c);break;case 22:c.memoizedState===null&&uc(c);break;case 30:uc(c);break;default:uc(c)}s=s.sibling}}function li(s,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var E=c.alternate,A=s,_=c,$=_.flags;switch(_.tag){case 0:case 11:case 15:li(A,_,f),lm(4,_);break;case 1:if(li(A,_,f),E=_,A=E.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(De){pr(E,E.return,De)}if(E=_,A=E.updateQueue,A!==null){var Q=E.stateNode;try{var de=A.shared.hiddenCallbacks;if(de!==null)for(A.shared.hiddenCallbacks=null,A=0;A<de.length;A++)PS(de[A],Q)}catch(De){pr(E,E.return,De)}}f&&$&64&&HC(_),im(_,_.return);break;case 27:YC(_);case 26:case 5:li(A,_,f),f&&E===null&&$&4&&qC(_),im(_,_.return);break;case 12:li(A,_,f);break;case 31:li(A,_,f),f&&$&4&&QC(A,_);break;case 13:li(A,_,f),f&&$&4&&JC(A,_);break;case 22:_.memoizedState===null&&li(A,_,f),im(_,_.return);break;case 30:break;default:li(A,_,f)}c=c.sibling}}function Y1(s,c){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(s=c.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&Yd(f))}function X1(s,c){s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Yd(s))}function Ks(s,c,f,E){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)r4(s,c,f,E),c=c.sibling}function r4(s,c,f,E){var A=c.flags;switch(c.tag){case 0:case 11:case 15:Ks(s,c,f,E),A&2048&&lm(9,c);break;case 1:Ks(s,c,f,E);break;case 3:Ks(s,c,f,E),A&2048&&(s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Yd(s)));break;case 12:if(A&2048){Ks(s,c,f,E),s=c.stateNode;try{var _=c.memoizedProps,$=_.id,Q=_.onPostCommit;typeof Q=="function"&&Q($,c.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(de){pr(c,c.return,de)}}else Ks(s,c,f,E);break;case 31:Ks(s,c,f,E);break;case 13:Ks(s,c,f,E);break;case 23:break;case 22:_=c.stateNode,$=c.alternate,c.memoizedState!==null?_._visibility&2?Ks(s,c,f,E):om(s,c):_._visibility&2?Ks(s,c,f,E):(_._visibility|=2,pu(s,c,f,E,(c.subtreeFlags&10256)!==0||!1)),A&2048&&Y1($,c);break;case 24:Ks(s,c,f,E),A&2048&&X1(c.alternate,c);break;default:Ks(s,c,f,E)}}function pu(s,c,f,E,A){for(A=A&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var _=s,$=c,Q=f,de=E,De=$.flags;switch($.tag){case 0:case 11:case 15:pu(_,$,Q,de,A),lm(8,$);break;case 23:break;case 22:var He=$.stateNode;$.memoizedState!==null?He._visibility&2?pu(_,$,Q,de,A):om(_,$):(He._visibility|=2,pu(_,$,Q,de,A)),A&&De&2048&&Y1($.alternate,$);break;case 24:pu(_,$,Q,de,A),A&&De&2048&&X1($.alternate,$);break;default:pu(_,$,Q,de,A)}c=c.sibling}}function om(s,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=s,E=c,A=E.flags;switch(E.tag){case 22:om(f,E),A&2048&&Y1(E.alternate,E);break;case 24:om(f,E),A&2048&&X1(E.alternate,E);break;default:om(f,E)}c=c.sibling}}var cm=8192;function yu(s,c,f){if(s.subtreeFlags&cm)for(s=s.child;s!==null;)a4(s,c,f),s=s.sibling}function a4(s,c,f){switch(s.tag){case 26:yu(s,c,f),s.flags&cm&&s.memoizedState!==null&&AL(f,Ws,s.memoizedState,s.memoizedProps);break;case 5:yu(s,c,f);break;case 3:case 4:var E=Ws;Ws=ug(s.stateNode.containerInfo),yu(s,c,f),Ws=E;break;case 22:s.memoizedState===null&&(E=s.alternate,E!==null&&E.memoizedState!==null?(E=cm,cm=16777216,yu(s,c,f),cm=E):yu(s,c,f));break;default:yu(s,c,f)}}function n4(s){var c=s.alternate;if(c!==null&&(s=c.child,s!==null)){c.child=null;do c=s.sibling,s.sibling=null,s=c;while(s!==null)}}function um(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var E=c[f];Xa=E,l4(E,s)}n4(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)s4(s),s=s.sibling}function s4(s){switch(s.tag){case 0:case 11:case 15:um(s),s.flags&2048&&no(9,s,s.return);break;case 3:um(s);break;case 12:um(s);break;case 22:var c=s.stateNode;s.memoizedState!==null&&c._visibility&2&&(s.return===null||s.return.tag!==13)?(c._visibility&=-3,Z0(s)):um(s);break;default:um(s)}}function Z0(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var E=c[f];Xa=E,l4(E,s)}n4(s)}for(s=s.child;s!==null;){switch(c=s,c.tag){case 0:case 11:case 15:no(8,c,c.return),Z0(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,Z0(c));break;default:Z0(c)}s=s.sibling}}function l4(s,c){for(;Xa!==null;){var f=Xa;switch(f.tag){case 0:case 11:case 15:no(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var E=f.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Yd(f.memoizedState.cache)}if(E=f.child,E!==null)E.return=f,Xa=E;else e:for(f=s;Xa!==null;){E=Xa;var A=E.sibling,_=E.return;if(KC(E),E===f){Xa=null;break e}if(A!==null){A.return=_,Xa=A;break e}Xa=_}}}var z9={getCacheForType:function(s){var c=an(Aa),f=c.data.get(s);return f===void 0&&(f=s(),c.data.set(s,f)),f},cacheSignal:function(){return an(Aa).controller.signal}},V9=typeof WeakMap=="function"?WeakMap:Map,cr=0,Dr=null,Gt=null,Kt=0,hr=0,ts=null,so=!1,xu=!1,W1=!1,ii=0,da=0,lo=0,dc=0,K1=0,rs=0,bu=0,dm=null,Rn=null,Z1=!1,Q0=0,i4=0,J0=1/0,eg=null,io=null,Fa=0,oo=null,vu=null,oi=0,Q1=0,J1=null,o4=null,mm=0,ex=null;function as(){return(cr&2)!==0&&Kt!==0?Kt&-Kt:J.T!==null?lx():Ga()}function c4(){if(rs===0)if((Kt&536870912)===0||Qt){var s=we;we<<=1,(we&3932160)===0&&(we=262144),rs=s}else rs=536870912;return s=Jn.current,s!==null&&(s.flags|=32),rs}function Ln(s,c,f){(s===Dr&&(hr===2||hr===9)||s.cancelPendingCommit!==null)&&(Eu(s,0),co(s,Kt,rs,!1)),gs(s,f),((cr&2)===0||s!==Dr)&&(s===Dr&&((cr&2)===0&&(dc|=f),da===4&&co(s,Kt,rs,!1)),Sl(s))}function u4(s,c,f){if((cr&6)!==0)throw Error(n(327));var E=!f&&(c&127)===0&&(c&s.expiredLanes)===0||oa(s,c),A=E?q9(s,c):rx(s,c,!0),_=E;do{if(A===0){xu&&!E&&co(s,c,0,!1);break}else{if(f=s.current.alternate,_&&!H9(f)){A=rx(s,c,!1),_=!1;continue}if(A===2){if(_=c,s.errorRecoveryDisabledLanes&_)var $=0;else $=s.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){c=$;e:{var Q=s;A=dm;var de=Q.current.memoizedState.isDehydrated;if(de&&(Eu(Q,$).flags|=256),$=rx(Q,$,!1),$!==2){if(W1&&!de){Q.errorRecoveryDisabledLanes|=_,dc|=_,A=4;break e}_=Rn,Rn=A,_!==null&&(Rn===null?Rn=_:Rn.push.apply(Rn,_))}A=$}if(_=!1,A!==2)continue}}if(A===1){Eu(s,0),co(s,c,0,!0);break}e:{switch(E=s,_=A,_){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:co(E,c,rs,!so);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(A=Q0+300-mt(),10<A)){if(co(E,c,rs,!so),na(E,0,!0)!==0)break e;oi=c,E.timeoutHandle=z4(d4.bind(null,E,f,Rn,eg,Z1,c,rs,dc,bu,so,_,"Throttled",-0,0),A);break e}d4(E,f,Rn,eg,Z1,c,rs,dc,bu,so,_,null,-0,0)}}break}while(!0);Sl(s)}function d4(s,c,f,E,A,_,$,Q,de,De,He,Xe,_e,Fe){if(s.timeoutHandle=-1,Xe=c.subtreeFlags,Xe&8192||(Xe&16785408)===16785408){Xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dn},a4(c,_,Xe);var gt=(_&62914560)===_?Q0-mt():(_&4194048)===_?i4-mt():0;if(gt=TL(Xe,gt),gt!==null){oi=_,s.cancelPendingCommit=gt(b4.bind(null,s,c,_,f,E,A,$,Q,de,He,Xe,null,_e,Fe)),co(s,_,$,!De);return}}b4(s,c,_,f,E,A,$,Q,de)}function H9(s){for(var c=s;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var E=0;E<f.length;E++){var A=f[E],_=A.getSnapshot;A=A.value;try{if(!N(_(),A))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function co(s,c,f,E){c&=~K1,c&=~dc,s.suspendedLanes|=c,s.pingedLanes&=~c,E&&(s.warmLanes|=c),E=s.expirationTimes;for(var A=c;0<A;){var _=31-st(A),$=1<<_;E[_]=-1,A&=~$}f!==0&&qc(s,f,c)}function tg(){return(cr&6)===0?(fm(0),!1):!0}function tx(){if(Gt!==null){if(hr===0)var s=Gt.return;else s=Gt,Zl=rc=null,y1(s),du=null,Wd=0,s=Gt;for(;s!==null;)VC(s.alternate,s),s=s.return;Gt=null}}function Eu(s,c){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,cL(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),oi=0,tx(),Dr=s,Gt=f=Wl(s.current,null),Kt=c,hr=0,ts=null,so=!1,xu=oa(s,c),W1=!1,bu=rs=K1=dc=lo=da=0,Rn=dm=null,Z1=!1,(c&8)!==0&&(c|=c&32);var E=s.entangledLanes;if(E!==0)for(s=s.entanglements,E&=c;0<E;){var A=31-st(E),_=1<<A;c|=s[A],E&=~_}return ii=c,w0(),f}function m4(s,c){Lt=null,J.H=am,c===uu||c===_0?(c=OS(),hr=3):c===s1?(c=OS(),hr=4):hr=c===I1?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ts=c,Gt===null&&(da=1,$0(s,xs(c,s.current)))}function f4(){var s=Jn.current;return s===null?!0:(Kt&4194048)===Kt?ws===null:(Kt&62914560)===Kt||(Kt&536870912)!==0?s===ws:!1}function g4(){var s=J.H;return J.H=am,s===null?am:s}function h4(){var s=J.A;return J.A=z9,s}function rg(){da=4,so||(Kt&4194048)!==Kt&&Jn.current!==null||(xu=!0),(lo&134217727)===0&&(dc&134217727)===0||Dr===null||co(Dr,Kt,rs,!1)}function rx(s,c,f){var E=cr;cr|=2;var A=g4(),_=h4();(Dr!==s||Kt!==c)&&(eg=null,Eu(s,c)),c=!1;var $=da;e:do try{if(hr!==0&&Gt!==null){var Q=Gt,de=ts;switch(hr){case 8:tx(),$=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(c=!0);var De=hr;if(hr=0,ts=null,wu(s,Q,de,De),f&&xu){$=0;break e}break;default:De=hr,hr=0,ts=null,wu(s,Q,de,De)}}$9(),$=da;break}catch(He){m4(s,He)}while(!0);return c&&s.shellSuspendCounter++,Zl=rc=null,cr=E,J.H=A,J.A=_,Gt===null&&(Dr=null,Kt=0,w0()),$}function $9(){for(;Gt!==null;)p4(Gt)}function q9(s,c){var f=cr;cr|=2;var E=g4(),A=h4();Dr!==s||Kt!==c?(eg=null,J0=mt()+500,Eu(s,c)):xu=oa(s,c);e:do try{if(hr!==0&&Gt!==null){c=Gt;var _=ts;t:switch(hr){case 1:hr=0,ts=null,wu(s,c,_,1);break;case 2:case 9:if(AS(_)){hr=0,ts=null,y4(c);break}c=function(){hr!==2&&hr!==9||Dr!==s||(hr=7),Sl(s)},_.then(c,c);break e;case 3:hr=7;break e;case 4:hr=5;break e;case 7:AS(_)?(hr=0,ts=null,y4(c)):(hr=0,ts=null,wu(s,c,_,7));break;case 5:var $=null;switch(Gt.tag){case 26:$=Gt.memoizedState;case 5:case 27:var Q=Gt;if($?r3($):Q.stateNode.complete){hr=0,ts=null;var de=Q.sibling;if(de!==null)Gt=de;else{var De=Q.return;De!==null?(Gt=De,ag(De)):Gt=null}break t}}hr=0,ts=null,wu(s,c,_,5);break;case 6:hr=0,ts=null,wu(s,c,_,6);break;case 8:tx(),da=6;break e;default:throw Error(n(462))}}G9();break}catch(He){m4(s,He)}while(!0);return Zl=rc=null,J.H=E,J.A=A,cr=f,Gt!==null?0:(Dr=null,Kt=0,w0(),da)}function G9(){for(;Gt!==null&&!lt();)p4(Gt)}function p4(s){var c=jC(s.alternate,s,ii);s.memoizedProps=s.pendingProps,c===null?ag(s):Gt=c}function y4(s){var c=s,f=c.alternate;switch(c.tag){case 15:case 0:c=MC(f,c,c.pendingProps,c.type,void 0,Kt);break;case 11:c=MC(f,c,c.pendingProps,c.type.render,c.ref,Kt);break;case 5:y1(c);default:VC(f,c),c=Gt=hS(c,ii),c=jC(f,c,ii)}s.memoizedProps=s.pendingProps,c===null?ag(s):Gt=c}function wu(s,c,f,E){Zl=rc=null,y1(c),du=null,Wd=0;var A=c.return;try{if(M9(s,A,c,f,Kt)){da=1,$0(s,xs(f,s.current)),Gt=null;return}}catch(_){if(A!==null)throw Gt=A,_;da=1,$0(s,xs(f,s.current)),Gt=null;return}c.flags&32768?(Qt||E===1?s=!0:xu||(Kt&536870912)!==0?s=!1:(so=s=!0,(E===2||E===9||E===3||E===6)&&(E=Jn.current,E!==null&&E.tag===13&&(E.flags|=16384))),x4(c,s)):ag(c)}function ag(s){var c=s;do{if((c.flags&32768)!==0){x4(c,so);return}s=c.return;var f=B9(c.alternate,c,ii);if(f!==null){Gt=f;return}if(c=c.sibling,c!==null){Gt=c;return}Gt=c=s}while(c!==null);da===0&&(da=5)}function x4(s,c){do{var f=F9(s.alternate,s);if(f!==null){f.flags&=32767,Gt=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(s=s.sibling,s!==null)){Gt=s;return}Gt=s=f}while(s!==null);da=6,Gt=null}function b4(s,c,f,E,A,_,$,Q,de){s.cancelPendingCommit=null;do ng();while(Fa!==0);if((cr&6)!==0)throw Error(n(327));if(c!==null){if(c===s.current)throw Error(n(177));if(_=c.lanes|c.childLanes,_|=$y,An(s,f,_,$,Q,de),s===Dr&&(Gt=Dr=null,Kt=0),vu=c,oo=s,oi=f,Q1=_,J1=A,o4=E,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,K9(ut,function(){return S4(),null})):(s.callbackNode=null,s.callbackPriority=0),E=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||E){E=J.T,J.T=null,A=ae.p,ae.p=2,$=cr,cr|=4;try{U9(s,c,f)}finally{cr=$,ae.p=A,J.T=E}}Fa=1,v4(),E4(),w4()}}function v4(){if(Fa===1){Fa=0;var s=oo,c=vu,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=J.T,J.T=null;var E=ae.p;ae.p=2;var A=cr;cr|=4;try{e4(c,s);var _=gx,$=W(s.containerInfo),Q=_.focusedElem,de=_.selectionRange;if($!==Q&&Q&&Q.ownerDocument&&z(Q.ownerDocument.documentElement,Q)){if(de!==null&&Z(Q)){var De=de.start,He=de.end;if(He===void 0&&(He=De),"selectionStart"in Q)Q.selectionStart=De,Q.selectionEnd=Math.min(He,Q.value.length);else{var Xe=Q.ownerDocument||document,_e=Xe&&Xe.defaultView||window;if(_e.getSelection){var Fe=_e.getSelection(),gt=Q.textContent.length,Ot=Math.min(de.start,gt),Er=de.end===void 0?Ot:Math.min(de.end,gt);!Fe.extend&&Ot>Er&&($=Er,Er=Ot,Ot=$);var Ce=I(Q,Ot),ye=I(Q,Er);if(Ce&&ye&&(Fe.rangeCount!==1||Fe.anchorNode!==Ce.node||Fe.anchorOffset!==Ce.offset||Fe.focusNode!==ye.node||Fe.focusOffset!==ye.offset)){var Oe=Xe.createRange();Oe.setStart(Ce.node,Ce.offset),Fe.removeAllRanges(),Ot>Er?(Fe.addRange(Oe),Fe.extend(ye.node,ye.offset)):(Oe.setEnd(ye.node,ye.offset),Fe.addRange(Oe))}}}}for(Xe=[],Fe=Q;Fe=Fe.parentNode;)Fe.nodeType===1&&Xe.push({element:Fe,left:Fe.scrollLeft,top:Fe.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<Xe.length;Q++){var Ye=Xe[Q];Ye.element.scrollLeft=Ye.left,Ye.element.scrollTop=Ye.top}}pg=!!fx,gx=fx=null}finally{cr=A,ae.p=E,J.T=f}}s.current=c,Fa=2}}function E4(){if(Fa===2){Fa=0;var s=oo,c=vu,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=J.T,J.T=null;var E=ae.p;ae.p=2;var A=cr;cr|=4;try{WC(s,c.alternate,c)}finally{cr=A,ae.p=E,J.T=f}}Fa=3}}function w4(){if(Fa===4||Fa===3){Fa=0,Ue();var s=oo,c=vu,f=oi,E=o4;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Fa=5:(Fa=0,vu=oo=null,N4(s,s.pendingLanes));var A=s.pendingLanes;if(A===0&&(io=null),Gn(f),c=c.stateNode,be&&typeof be.onCommitFiberRoot=="function")try{be.onCommitFiberRoot(kt,c,void 0,(c.current.flags&128)===128)}catch{}if(E!==null){c=J.T,A=ae.p,ae.p=2,J.T=null;try{for(var _=s.onRecoverableError,$=0;$<E.length;$++){var Q=E[$];_(Q.value,{componentStack:Q.stack})}}finally{J.T=c,ae.p=A}}(oi&3)!==0&&ng(),Sl(s),A=s.pendingLanes,(f&261930)!==0&&(A&42)!==0?s===ex?mm++:(mm=0,ex=s):mm=0,fm(0)}}function N4(s,c){(s.pooledCacheLanes&=c)===0&&(c=s.pooledCache,c!=null&&(s.pooledCache=null,Yd(c)))}function ng(){return v4(),E4(),w4(),S4()}function S4(){if(Fa!==5)return!1;var s=oo,c=Q1;Q1=0;var f=Gn(oi),E=J.T,A=ae.p;try{ae.p=32>f?32:f,J.T=null,f=J1,J1=null;var _=oo,$=oi;if(Fa=0,vu=oo=null,oi=0,(cr&6)!==0)throw Error(n(331));var Q=cr;if(cr|=4,s4(_.current),r4(_,_.current,$,f),cr=Q,fm(0,!1),be&&typeof be.onPostCommitFiberRoot=="function")try{be.onPostCommitFiberRoot(kt,_)}catch{}return!0}finally{ae.p=A,J.T=E,N4(s,c)}}function C4(s,c,f){c=xs(f,c),c=P1(s.stateNode,c,2),s=to(s,c,2),s!==null&&(gs(s,2),Sl(s))}function pr(s,c,f){if(s.tag===3)C4(s,s,f);else for(;c!==null;){if(c.tag===3){C4(c,s,f);break}else if(c.tag===1){var E=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(io===null||!io.has(E))){s=xs(f,s),f=AC(2),E=to(c,f,2),E!==null&&(TC(f,E,c,s),gs(E,2),Sl(E));break}}c=c.return}}function ax(s,c,f){var E=s.pingCache;if(E===null){E=s.pingCache=new V9;var A=new Set;E.set(c,A)}else A=E.get(c),A===void 0&&(A=new Set,E.set(c,A));A.has(f)||(W1=!0,A.add(f),s=Y9.bind(null,s,c,f),c.then(s,s))}function Y9(s,c,f){var E=s.pingCache;E!==null&&E.delete(c),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Dr===s&&(Kt&f)===f&&(da===4||da===3&&(Kt&62914560)===Kt&&300>mt()-Q0?(cr&2)===0&&Eu(s,0):K1|=f,bu===Kt&&(bu=0)),Sl(s)}function A4(s,c){c===0&&(c=Nt()),s=Jo(s,c),s!==null&&(gs(s,c),Sl(s))}function X9(s){var c=s.memoizedState,f=0;c!==null&&(f=c.retryLane),A4(s,f)}function W9(s,c){var f=0;switch(s.tag){case 31:case 13:var E=s.stateNode,A=s.memoizedState;A!==null&&(f=A.retryLane);break;case 19:E=s.stateNode;break;case 22:E=s.stateNode._retryCache;break;default:throw Error(n(314))}E!==null&&E.delete(c),A4(s,f)}function K9(s,c){return pt(s,c)}var sg=null,Nu=null,nx=!1,lg=!1,sx=!1,uo=0;function Sl(s){s!==Nu&&s.next===null&&(Nu===null?sg=Nu=s:Nu=Nu.next=s),lg=!0,nx||(nx=!0,Q9())}function fm(s,c){if(!sx&&lg){sx=!0;do for(var f=!1,E=sg;E!==null;){if(s!==0){var A=E.pendingLanes;if(A===0)var _=0;else{var $=E.suspendedLanes,Q=E.pingedLanes;_=(1<<31-st(42|s)+1)-1,_&=A&~($&~Q),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(f=!0,_4(E,_))}else _=Kt,_=na(E,E===Dr?_:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(_&3)===0||oa(E,_)||(f=!0,_4(E,_));E=E.next}while(f);sx=!1}}function Z9(){T4()}function T4(){lg=nx=!1;var s=0;uo!==0&&oL()&&(s=uo);for(var c=mt(),f=null,E=sg;E!==null;){var A=E.next,_=O4(E,c);_===0?(E.next=null,f===null?sg=A:f.next=A,A===null&&(Nu=f)):(f=E,(s!==0||(_&3)!==0)&&(lg=!0)),E=A}Fa!==0&&Fa!==5||fm(s),uo!==0&&(uo=0)}function O4(s,c){for(var f=s.suspendedLanes,E=s.pingedLanes,A=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var $=31-st(_),Q=1<<$,de=A[$];de===-1?((Q&f)===0||(Q&E)!==0)&&(A[$]=ze(Q,c)):de<=c&&(s.expiredLanes|=Q),_&=~Q}if(c=Dr,f=Kt,f=na(s,s===c?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),E=s.callbackNode,f===0||s===c&&(hr===2||hr===9)||s.cancelPendingCommit!==null)return E!==null&&E!==null&&Ke(E),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||oa(s,f)){if(c=f&-f,c===s.callbackPriority)return c;switch(E!==null&&Ke(E),Gn(f)){case 2:case 8:f=Br;break;case 32:f=ut;break;case 268435456:f=Cr;break;default:f=ut}return E=D4.bind(null,s),f=pt(f,E),s.callbackPriority=c,s.callbackNode=f,c}return E!==null&&E!==null&&Ke(E),s.callbackPriority=2,s.callbackNode=null,2}function D4(s,c){if(Fa!==0&&Fa!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(ng()&&s.callbackNode!==f)return null;var E=Kt;return E=na(s,s===Dr?E:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),E===0?null:(u4(s,E,c),O4(s,mt()),s.callbackNode!=null&&s.callbackNode===f?D4.bind(null,s):null)}function _4(s,c){if(ng())return null;u4(s,c,!0)}function Q9(){uL(function(){(cr&6)!==0?pt(ir,Z9):T4()})}function lx(){if(uo===0){var s=ou;s===0&&(s=aa,aa<<=1,(aa&261888)===0&&(aa=256)),uo=s}return uo}function k4(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:zi(""+s)}function P4(s,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,s.id&&f.setAttribute("form",s.id),c.parentNode.insertBefore(f,c),s=new FormData(s),f.parentNode.removeChild(f),s}function J9(s,c,f,E,A){if(c==="submit"&&f&&f.stateNode===A){var _=k4((A[tr]||null).action),$=E.submitter;$&&(c=(c=$[tr]||null)?k4(c.formAction):$.getAttribute("formAction"),c!==null&&(_=c,$=null));var Q=new Ra("action","action",null,E,A);s.push({event:Q,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(uo!==0){var de=$?P4(A,$):new FormData(A);A1(f,{pending:!0,data:de,method:A.method,action:_},null,de)}}else typeof _=="function"&&(Q.preventDefault(),de=$?P4(A,$):new FormData(A),A1(f,{pending:!0,data:de,method:A.method,action:_},_,de))},currentTarget:A}]})}}for(var ix=0;ix<$d.length;ix++){var ox=$d[ix],eL=ox.toLowerCase(),tL=ox[0].toUpperCase()+ox.slice(1);Xs(eL,"on"+tL)}Xs(kn,"onAnimationEnd"),Xs(tn,"onAnimationIteration"),Xs(gr,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(Ba,"onTransitionRun"),Xs(bn,"onTransitionStart"),Xs(Xi,"onTransitionCancel"),Xs(Xl,"onTransitionEnd"),Yn("onMouseEnter",["mouseout","mouseover"]),Yn("onMouseLeave",["mouseout","mouseover"]),Yn("onPointerEnter",["pointerout","pointerover"]),Yn("onPointerLeave",["pointerout","pointerover"]),mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gm));function I4(s,c){c=(c&4)!==0;for(var f=0;f<s.length;f++){var E=s[f],A=E.event;E=E.listeners;e:{var _=void 0;if(c)for(var $=E.length-1;0<=$;$--){var Q=E[$],de=Q.instance,De=Q.currentTarget;if(Q=Q.listener,de!==_&&A.isPropagationStopped())break e;_=Q,A.currentTarget=De;try{_(A)}catch(He){E0(He)}A.currentTarget=null,_=de}else for($=0;$<E.length;$++){if(Q=E[$],de=Q.instance,De=Q.currentTarget,Q=Q.listener,de!==_&&A.isPropagationStopped())break e;_=Q,A.currentTarget=De;try{_(A)}catch(He){E0(He)}A.currentTarget=null,_=de}}}}function Yt(s,c){var f=c[hl];f===void 0&&(f=c[hl]=new Set);var E=s+"__bubble";f.has(E)||(M4(c,s,2,!1),f.add(E))}function cx(s,c,f){var E=0;c&&(E|=4),M4(f,s,E,c)}var ig="_reactListening"+Math.random().toString(36).slice(2);function ux(s){if(!s[ig]){s[ig]=!0,Ze.forEach(function(f){f!=="selectionchange"&&(rL.has(f)||cx(f,!1,s),cx(f,!0,s))});var c=s.nodeType===9?s:s.ownerDocument;c===null||c[ig]||(c[ig]=!0,cx("selectionchange",!1,c))}}function M4(s,c,f,E){switch(c3(c)){case 2:var A=_L;break;case 8:A=kL;break;default:A=Cx}f=A.bind(null,c,f,s),A=void 0,!Bd||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(A=!0),E?A!==void 0?s.addEventListener(c,f,{capture:!0,passive:A}):s.addEventListener(c,f,!0):A!==void 0?s.addEventListener(c,f,{passive:A}):s.addEventListener(c,f,!1)}function dx(s,c,f,E,A){var _=E;if((c&1)===0&&(c&2)===0&&E!==null)e:for(;;){if(E===null)return;var $=E.tag;if($===3||$===4){var Q=E.stateNode.containerInfo;if(Q===A)break;if($===4)for($=E.return;$!==null;){var de=$.tag;if((de===3||de===4)&&$.stateNode.containerInfo===A)return;$=$.return}for(;Q!==null;){if($=Fr(Q),$===null)return;if(de=$.tag,de===5||de===6||de===26||de===27){E=_=$;continue e}Q=Q.parentNode}}E=E.return}u0(function(){var De=_,He=Ld(f),Xe=[];e:{var _e=v0.get(s);if(_e!==void 0){var Fe=Ra,gt=s;switch(s){case"keypress":if(yl(f)===0)break e;case"keydown":case"keyup":Fe=Jc;break;case"focusin":gt="focus",Fe=jd;break;case"focusout":gt="blur",Fe=jd;break;case"beforeblur":case"afterblur":Fe=jd;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fe=or;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fe=Zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fe=zy;break;case kn:case tn:case gr:Fe=Ft;break;case Xl:Fe=$l;break;case"scroll":case"scrollend":Fe=d0;break;case"wheel":Fe=Vy;break;case"copy":case"cut":case"paste":Fe=Qc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fe=fr;break;case"toggle":case"beforetoggle":Fe=Vd}var Ot=(c&4)!==0,Er=!Ot&&(s==="scroll"||s==="scrollend"),Ce=Ot?_e!==null?_e+"Capture":null:_e;Ot=[];for(var ye=De,Oe;ye!==null;){var Ye=ye;if(Oe=Ye.stateNode,Ye=Ye.tag,Ye!==5&&Ye!==26&&Ye!==27||Oe===null||Ce===null||(Ye=_t(ye,Ce),Ye!=null&&Ot.push(hm(ye,Ye,Oe))),Er)break;ye=ye.return}0<Ot.length&&(_e=new Fe(_e,gt,null,f,He),Xe.push({event:_e,listeners:Ot}))}}if((c&7)===0){e:{if(_e=s==="mouseover"||s==="pointerover",Fe=s==="mouseout"||s==="pointerout",_e&&f!==qo&&(gt=f.relatedTarget||f.fromElement)&&(Fr(gt)||gt[pn]))break e;if((Fe||_e)&&(_e=He.window===He?He:(_e=He.ownerDocument)?_e.defaultView||_e.parentWindow:window,Fe?(gt=f.relatedTarget||f.toElement,Fe=De,gt=gt?Fr(gt):null,gt!==null&&(Er=i(gt),Ot=gt.tag,gt!==Er||Ot!==5&&Ot!==27&&Ot!==6)&&(gt=null)):(Fe=null,gt=De),Fe!==gt)){if(Ot=or,Ye="onMouseLeave",Ce="onMouseEnter",ye="mouse",(s==="pointerout"||s==="pointerover")&&(Ot=fr,Ye="onPointerLeave",Ce="onPointerEnter",ye="pointer"),Er=Fe==null?_e:Ve(Fe),Oe=gt==null?_e:Ve(gt),_e=new Ot(Ye,ye+"leave",Fe,f,He),_e.target=Er,_e.relatedTarget=Oe,Ye=null,Fr(He)===De&&(Ot=new Ot(Ce,ye+"enter",gt,f,He),Ot.target=Oe,Ot.relatedTarget=Er,Ye=Ot),Er=Ye,Fe&&gt)t:{for(Ot=aL,Ce=Fe,ye=gt,Oe=0,Ye=Ce;Ye;Ye=Ot(Ye))Oe++;Ye=0;for(var wt=ye;wt;wt=Ot(wt))Ye++;for(;0<Oe-Ye;)Ce=Ot(Ce),Oe--;for(;0<Ye-Oe;)ye=Ot(ye),Ye--;for(;Oe--;){if(Ce===ye||ye!==null&&Ce===ye.alternate){Ot=Ce;break t}Ce=Ot(Ce),ye=Ot(ye)}Ot=null}else Ot=null;Fe!==null&&R4(Xe,_e,Fe,Ot,!1),gt!==null&&Er!==null&&R4(Xe,Er,gt,Ot,!0)}}e:{if(_e=De?Ve(De):window,Fe=_e.nodeName&&_e.nodeName.toLowerCase(),Fe==="select"||Fe==="input"&&_e.type==="file")var nr=Zn;else if(Hd(_e))if(b0)nr=x;else{nr=d;var bt=o}else Fe=_e.nodeName,!Fe||Fe.toLowerCase()!=="input"||_e.type!=="checkbox"&&_e.type!=="radio"?De&&Ar(De.elementType)&&(nr=Zn):nr=m;if(nr&&(nr=nr(s,De))){Kn(Xe,nr,f,He);break e}bt&&bt(s,_e,De),s==="focusout"&&De&&_e.type==="number"&&De.memoizedProps.value!=null&&ne(_e,"number",_e.value)}switch(bt=De?Ve(De):window,s){case"focusin":(Hd(bt)||bt.contentEditable==="true")&&(fe=bt,he=De,Ae=null);break;case"focusout":Ae=he=fe=null;break;case"mousedown":Ie=!0;break;case"contextmenu":case"mouseup":case"dragend":Ie=!1,at(Xe,f,He);break;case"selectionchange":if(se)break;case"keydown":case"keyup":at(Xe,f,He)}var Ut;if(Xo)e:{switch(s){case"compositionstart":var Zt="onCompositionStart";break e;case"compositionend":Zt="onCompositionEnd";break e;case"compositionupdate":Zt="onCompositionUpdate";break e}Zt=void 0}else Yi?x0(s,f)&&(Zt="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(Zt="onCompositionStart");Zt&&(y0&&f.locale!=="ko"&&(Yi||Zt!=="onCompositionStart"?Zt==="onCompositionEnd"&&Yi&&(Ut=Vi()):(Gs=He,Ys="value"in Gs?Gs.value:Gs.textContent,Yi=!0)),bt=og(De,Zt),0<bt.length&&(Zt=new g0(Zt,s,null,f,He),Xe.push({event:Zt,listeners:bt}),Ut?Zt.data=Ut:(Ut=Gi(f),Ut!==null&&(Zt.data=Ut)))),(Ut=p0?vl(s,f):tu(s,f))&&(Zt=og(De,"onBeforeInput"),0<Zt.length&&(bt=new g0("onBeforeInput","beforeinput",null,f,He),Xe.push({event:bt,listeners:Zt}),bt.data=Ut)),J9(Xe,s,De,f,He)}I4(Xe,c)})}function hm(s,c,f){return{instance:s,listener:c,currentTarget:f}}function og(s,c){for(var f=c+"Capture",E=[];s!==null;){var A=s,_=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||_===null||(A=_t(s,f),A!=null&&E.unshift(hm(s,A,_)),A=_t(s,c),A!=null&&E.push(hm(s,A,_))),s.tag===3)return E;s=s.return}return[]}function aL(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function R4(s,c,f,E,A){for(var _=c._reactName,$=[];f!==null&&f!==E;){var Q=f,de=Q.alternate,De=Q.stateNode;if(Q=Q.tag,de!==null&&de===E)break;Q!==5&&Q!==26&&Q!==27||De===null||(de=De,A?(De=_t(f,_),De!=null&&$.unshift(hm(f,De,de))):A||(De=_t(f,_),De!=null&&$.push(hm(f,De,de)))),f=f.return}$.length!==0&&s.push({event:c,listeners:$})}var nL=/\r\n?/g,sL=/\u0000|\uFFFD/g;function L4(s){return(typeof s=="string"?s:""+s).replace(nL,`
`).replace(sL,"")}function B4(s,c){return c=L4(c),L4(s)===c}function vr(s,c,f,E,A,_){switch(f){case"children":typeof E=="string"?c==="body"||c==="textarea"&&E===""||ji(s,E):(typeof E=="number"||typeof E=="bigint")&&c!=="body"&&ji(s,""+E);break;case"className":Fi(s,"class",E);break;case"tabIndex":Fi(s,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":Fi(s,f,E);break;case"style":Et(s,E,_);break;case"data":if(c!=="object"){Fi(s,"data",E);break}case"src":case"href":if(E===""&&(c!=="a"||f!=="href")){s.removeAttribute(f);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){s.removeAttribute(f);break}E=zi(""+E),s.setAttribute(f,E);break;case"action":case"formAction":if(typeof E=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(f==="formAction"?(c!=="input"&&vr(s,c,"name",A.name,A,null),vr(s,c,"formEncType",A.formEncType,A,null),vr(s,c,"formMethod",A.formMethod,A,null),vr(s,c,"formTarget",A.formTarget,A,null)):(vr(s,c,"encType",A.encType,A,null),vr(s,c,"method",A.method,A,null),vr(s,c,"target",A.target,A,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){s.removeAttribute(f);break}E=zi(""+E),s.setAttribute(f,E);break;case"onClick":E!=null&&(s.onclick=Dn);break;case"onScroll":E!=null&&Yt("scroll",s);break;case"onScrollEnd":E!=null&&Yt("scrollend",s);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(f=E.__html,f!=null){if(A.children!=null)throw Error(n(60));s.innerHTML=f}}break;case"multiple":s.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":s.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){s.removeAttribute("xlink:href");break}f=zi(""+E),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?s.setAttribute(f,""+E):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":E===!0?s.setAttribute(f,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?s.setAttribute(f,E):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?s.setAttribute(f,E):s.removeAttribute(f);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?s.removeAttribute(f):s.setAttribute(f,E);break;case"popover":Yt("beforetoggle",s),Yt("toggle",s),Bi(s,"popover",E);break;case"xlinkActuate":Xn(s,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":Xn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":Xn(s,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":Xn(s,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":Xn(s,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":Xn(s,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":Xn(s,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":Xn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":Xn(s,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":Bi(s,"is",E);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=c0.get(f)||f,Bi(s,f,E))}}function mx(s,c,f,E,A,_){switch(f){case"style":Et(s,E,_);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(f=E.__html,f!=null){if(A.children!=null)throw Error(n(60));s.innerHTML=f}}break;case"children":typeof E=="string"?ji(s,E):(typeof E=="number"||typeof E=="bigint")&&ji(s,""+E);break;case"onScroll":E!=null&&Yt("scroll",s);break;case"onScrollEnd":E!=null&&Yt("scrollend",s);break;case"onClick":E!=null&&(s.onclick=Dn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!o0.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(A=f.endsWith("Capture"),c=f.slice(2,A?f.length-7:void 0),_=s[tr]||null,_=_!=null?_[f]:null,typeof _=="function"&&s.removeEventListener(c,_,A),typeof E=="function")){typeof _!="function"&&_!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(c,E,A);break e}f in s?s[f]=E:E===!0?s.setAttribute(f,""):Bi(s,f,E)}}}function sn(s,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",s),Yt("load",s);var E=!1,A=!1,_;for(_ in f)if(f.hasOwnProperty(_)){var $=f[_];if($!=null)switch(_){case"src":E=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:vr(s,c,_,$,f,null)}}A&&vr(s,c,"srcSet",f.srcSet,f,null),E&&vr(s,c,"src",f.src,f,null);return;case"input":Yt("invalid",s);var Q=_=$=A=null,de=null,De=null;for(E in f)if(f.hasOwnProperty(E)){var He=f[E];if(He!=null)switch(E){case"name":A=He;break;case"type":$=He;break;case"checked":de=He;break;case"defaultChecked":De=He;break;case"value":_=He;break;case"defaultValue":Q=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(n(137,c));break;default:vr(s,c,E,He,f,null)}}Te(s,_,Q,de,De,$,A,!1);return;case"select":Yt("invalid",s),E=$=_=null;for(A in f)if(f.hasOwnProperty(A)&&(Q=f[A],Q!=null))switch(A){case"value":_=Q;break;case"defaultValue":$=Q;break;case"multiple":E=Q;default:vr(s,c,A,Q,f,null)}c=_,f=$,s.multiple=!!E,c!=null?yt(s,!!E,c,!1):f!=null&&yt(s,!!E,f,!0);return;case"textarea":Yt("invalid",s),_=A=E=null;for($ in f)if(f.hasOwnProperty($)&&(Q=f[$],Q!=null))switch($){case"value":E=Q;break;case"defaultValue":A=Q;break;case"children":_=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(91));break;default:vr(s,c,$,Q,f,null)}yn(s,E,A,_);return;case"option":for(de in f)if(f.hasOwnProperty(de)&&(E=f[de],E!=null))switch(de){case"selected":s.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:vr(s,c,de,E,f,null)}return;case"dialog":Yt("beforetoggle",s),Yt("toggle",s),Yt("cancel",s),Yt("close",s);break;case"iframe":case"object":Yt("load",s);break;case"video":case"audio":for(E=0;E<gm.length;E++)Yt(gm[E],s);break;case"image":Yt("error",s),Yt("load",s);break;case"details":Yt("toggle",s);break;case"embed":case"source":case"link":Yt("error",s),Yt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(De in f)if(f.hasOwnProperty(De)&&(E=f[De],E!=null))switch(De){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:vr(s,c,De,E,f,null)}return;default:if(Ar(c)){for(He in f)f.hasOwnProperty(He)&&(E=f[He],E!==void 0&&mx(s,c,He,E,f,void 0));return}}for(Q in f)f.hasOwnProperty(Q)&&(E=f[Q],E!=null&&vr(s,c,Q,E,f,null))}function lL(s,c,f,E){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,_=null,$=null,Q=null,de=null,De=null,He=null;for(Fe in f){var Xe=f[Fe];if(f.hasOwnProperty(Fe)&&Xe!=null)switch(Fe){case"checked":break;case"value":break;case"defaultValue":de=Xe;default:E.hasOwnProperty(Fe)||vr(s,c,Fe,null,E,Xe)}}for(var _e in E){var Fe=E[_e];if(Xe=f[_e],E.hasOwnProperty(_e)&&(Fe!=null||Xe!=null))switch(_e){case"type":_=Fe;break;case"name":A=Fe;break;case"checked":De=Fe;break;case"defaultChecked":He=Fe;break;case"value":$=Fe;break;case"defaultValue":Q=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(n(137,c));break;default:Fe!==Xe&&vr(s,c,_e,Fe,E,Xe)}}Sa(s,$,Q,de,De,He,_,A);return;case"select":Fe=$=Q=_e=null;for(_ in f)if(de=f[_],f.hasOwnProperty(_)&&de!=null)switch(_){case"value":break;case"multiple":Fe=de;default:E.hasOwnProperty(_)||vr(s,c,_,null,E,de)}for(A in E)if(_=E[A],de=f[A],E.hasOwnProperty(A)&&(_!=null||de!=null))switch(A){case"value":_e=_;break;case"defaultValue":Q=_;break;case"multiple":$=_;default:_!==de&&vr(s,c,A,_,E,de)}c=Q,f=$,E=Fe,_e!=null?yt(s,!!f,_e,!1):!!E!=!!f&&(c!=null?yt(s,!!f,c,!0):yt(s,!!f,f?[]:"",!1));return;case"textarea":Fe=_e=null;for(Q in f)if(A=f[Q],f.hasOwnProperty(Q)&&A!=null&&!E.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:vr(s,c,Q,null,E,A)}for($ in E)if(A=E[$],_=f[$],E.hasOwnProperty($)&&(A!=null||_!=null))switch($){case"value":_e=A;break;case"defaultValue":Fe=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:A!==_&&vr(s,c,$,A,E,_)}pa(s,_e,Fe);return;case"option":for(var gt in f)if(_e=f[gt],f.hasOwnProperty(gt)&&_e!=null&&!E.hasOwnProperty(gt))switch(gt){case"selected":s.selected=!1;break;default:vr(s,c,gt,null,E,_e)}for(de in E)if(_e=E[de],Fe=f[de],E.hasOwnProperty(de)&&_e!==Fe&&(_e!=null||Fe!=null))switch(de){case"selected":s.selected=_e&&typeof _e!="function"&&typeof _e!="symbol";break;default:vr(s,c,de,_e,E,Fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ot in f)_e=f[Ot],f.hasOwnProperty(Ot)&&_e!=null&&!E.hasOwnProperty(Ot)&&vr(s,c,Ot,null,E,_e);for(De in E)if(_e=E[De],Fe=f[De],E.hasOwnProperty(De)&&_e!==Fe&&(_e!=null||Fe!=null))switch(De){case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(n(137,c));break;default:vr(s,c,De,_e,E,Fe)}return;default:if(Ar(c)){for(var Er in f)_e=f[Er],f.hasOwnProperty(Er)&&_e!==void 0&&!E.hasOwnProperty(Er)&&mx(s,c,Er,void 0,E,_e);for(He in E)_e=E[He],Fe=f[He],!E.hasOwnProperty(He)||_e===Fe||_e===void 0&&Fe===void 0||mx(s,c,He,_e,E,Fe);return}}for(var Ce in f)_e=f[Ce],f.hasOwnProperty(Ce)&&_e!=null&&!E.hasOwnProperty(Ce)&&vr(s,c,Ce,null,E,_e);for(Xe in E)_e=E[Xe],Fe=f[Xe],!E.hasOwnProperty(Xe)||_e===Fe||_e==null&&Fe==null||vr(s,c,Xe,_e,E,Fe)}function F4(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function iL(){if(typeof performance.getEntriesByType=="function"){for(var s=0,c=0,f=performance.getEntriesByType("resource"),E=0;E<f.length;E++){var A=f[E],_=A.transferSize,$=A.initiatorType,Q=A.duration;if(_&&Q&&F4($)){for($=0,Q=A.responseEnd,E+=1;E<f.length;E++){var de=f[E],De=de.startTime;if(De>Q)break;var He=de.transferSize,Xe=de.initiatorType;He&&F4(Xe)&&(de=de.responseEnd,$+=He*(de<Q?1:(Q-De)/(de-De)))}if(--E,c+=8*(_+$)/(A.duration/1e3),s++,10<s)break}}if(0<s)return c/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var fx=null,gx=null;function cg(s){return s.nodeType===9?s:s.ownerDocument}function U4(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function j4(s,c){if(s===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&c==="foreignObject"?0:s}function hx(s,c){return s==="textarea"||s==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var px=null;function oL(){var s=window.event;return s&&s.type==="popstate"?s===px?!1:(px=s,!0):(px=null,!1)}var z4=typeof setTimeout=="function"?setTimeout:void 0,cL=typeof clearTimeout=="function"?clearTimeout:void 0,V4=typeof Promise=="function"?Promise:void 0,uL=typeof queueMicrotask=="function"?queueMicrotask:typeof V4<"u"?function(s){return V4.resolve(null).then(s).catch(dL)}:z4;function dL(s){setTimeout(function(){throw s})}function mo(s){return s==="head"}function H4(s,c){var f=c,E=0;do{var A=f.nextSibling;if(s.removeChild(f),A&&A.nodeType===8)if(f=A.data,f==="/$"||f==="/&"){if(E===0){s.removeChild(A),Tu(c);return}E--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")E++;else if(f==="html")pm(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,pm(f);for(var _=f.firstChild;_;){var $=_.nextSibling,Q=_.nodeName;_[pl]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&_.rel.toLowerCase()==="stylesheet"||f.removeChild(_),_=$}}else f==="body"&&pm(s.ownerDocument.body);f=A}while(f);Tu(c)}function $4(s,c){var f=s;s=0;do{var E=f.nextSibling;if(f.nodeType===1?c?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(c?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),E&&E.nodeType===8)if(f=E.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=E}while(f)}function yx(s){var c=s.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":yx(f),en(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function mL(s,c,f,E){for(;s.nodeType===1;){var A=f;if(s.nodeName.toLowerCase()!==c.toLowerCase()){if(!E&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(E){if(!s[pl])switch(c){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==A.rel||s.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||s.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||s.getAttribute("title")!==(A.title==null?null:A.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(A.src==null?null:A.src)||s.getAttribute("type")!==(A.type==null?null:A.type)||s.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(c==="input"&&s.type==="hidden"){var _=A.name==null?null:""+A.name;if(A.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=Ns(s.nextSibling),s===null)break}return null}function fL(s,c,f){if(c==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=Ns(s.nextSibling),s===null))return null;return s}function q4(s,c){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Ns(s.nextSibling),s===null))return null;return s}function xx(s){return s.data==="$?"||s.data==="$~"}function bx(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function gL(s,c){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=c;else if(s.data!=="$?"||f.readyState!=="loading")c();else{var E=function(){c(),f.removeEventListener("DOMContentLoaded",E)};f.addEventListener("DOMContentLoaded",E),s._reactRetry=E}}function Ns(s){for(;s!=null;s=s.nextSibling){var c=s.nodeType;if(c===1||c===3)break;if(c===8){if(c=s.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return s}var vx=null;function G4(s){s=s.nextSibling;for(var c=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(c===0)return Ns(s.nextSibling);c--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||c++}s=s.nextSibling}return null}function Y4(s){s=s.previousSibling;for(var c=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(c===0)return s;c--}else f!=="/$"&&f!=="/&"||c++}s=s.previousSibling}return null}function X4(s,c,f){switch(c=cg(f),s){case"html":if(s=c.documentElement,!s)throw Error(n(452));return s;case"head":if(s=c.head,!s)throw Error(n(453));return s;case"body":if(s=c.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function pm(s){for(var c=s.attributes;c.length;)s.removeAttributeNode(c[0]);en(s)}var Ss=new Map,W4=new Set;function ug(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ci=ae.d;ae.d={f:hL,r:pL,D:yL,C:xL,L:bL,m:vL,X:wL,S:EL,M:NL};function hL(){var s=ci.f(),c=tg();return s||c}function pL(s){var c=Jt(s);c!==null&&c.tag===5&&c.type==="form"?mC(c):ci.r(s)}var Su=typeof document>"u"?null:document;function K4(s,c,f){var E=Su;if(E&&typeof c=="string"&&c){var A=Ht(c);A='link[rel="'+s+'"][href="'+A+'"]',typeof f=="string"&&(A+='[crossorigin="'+f+'"]'),W4.has(A)||(W4.add(A),s={rel:s,crossOrigin:f,href:c},E.querySelector(A)===null&&(c=E.createElement("link"),sn(c,"link",s),Pr(c),E.head.appendChild(c)))}}function yL(s){ci.D(s),K4("dns-prefetch",s,null)}function xL(s,c){ci.C(s,c),K4("preconnect",s,c)}function bL(s,c,f){ci.L(s,c,f);var E=Su;if(E&&s&&c){var A='link[rel="preload"][as="'+Ht(c)+'"]';c==="image"&&f&&f.imageSrcSet?(A+='[imagesrcset="'+Ht(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(A+='[imagesizes="'+Ht(f.imageSizes)+'"]')):A+='[href="'+Ht(s)+'"]';var _=A;switch(c){case"style":_=Cu(s);break;case"script":_=Au(s)}Ss.has(_)||(s=v({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:s,as:c},f),Ss.set(_,s),E.querySelector(A)!==null||c==="style"&&E.querySelector(ym(_))||c==="script"&&E.querySelector(xm(_))||(c=E.createElement("link"),sn(c,"link",s),Pr(c),E.head.appendChild(c)))}}function vL(s,c){ci.m(s,c);var f=Su;if(f&&s){var E=c&&typeof c.as=="string"?c.as:"script",A='link[rel="modulepreload"][as="'+Ht(E)+'"][href="'+Ht(s)+'"]',_=A;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Au(s)}if(!Ss.has(_)&&(s=v({rel:"modulepreload",href:s},c),Ss.set(_,s),f.querySelector(A)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(xm(_)))return}E=f.createElement("link"),sn(E,"link",s),Pr(E),f.head.appendChild(E)}}}function EL(s,c,f){ci.S(s,c,f);var E=Su;if(E&&s){var A=ht(E).hoistableStyles,_=Cu(s);c=c||"default";var $=A.get(_);if(!$){var Q={loading:0,preload:null};if($=E.querySelector(ym(_)))Q.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":c},f),(f=Ss.get(_))&&Ex(s,f);var de=$=E.createElement("link");Pr(de),sn(de,"link",s),de._p=new Promise(function(De,He){de.onload=De,de.onerror=He}),de.addEventListener("load",function(){Q.loading|=1}),de.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,dg($,c,E)}$={type:"stylesheet",instance:$,count:1,state:Q},A.set(_,$)}}}function wL(s,c){ci.X(s,c);var f=Su;if(f&&s){var E=ht(f).hoistableScripts,A=Au(s),_=E.get(A);_||(_=f.querySelector(xm(A)),_||(s=v({src:s,async:!0},c),(c=Ss.get(A))&&wx(s,c),_=f.createElement("script"),Pr(_),sn(_,"link",s),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},E.set(A,_))}}function NL(s,c){ci.M(s,c);var f=Su;if(f&&s){var E=ht(f).hoistableScripts,A=Au(s),_=E.get(A);_||(_=f.querySelector(xm(A)),_||(s=v({src:s,async:!0,type:"module"},c),(c=Ss.get(A))&&wx(s,c),_=f.createElement("script"),Pr(_),sn(_,"link",s),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},E.set(A,_))}}function Z4(s,c,f,E){var A=(A=ie.current)?ug(A):null;if(!A)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=Cu(f.href),f=ht(A).hoistableStyles,E=f.get(c),E||(E={type:"style",instance:null,count:0,state:null},f.set(c,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=Cu(f.href);var _=ht(A).hoistableStyles,$=_.get(s);if($||(A=A.ownerDocument||A,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,$),(_=A.querySelector(ym(s)))&&!_._p&&($.instance=_,$.state.loading=5),Ss.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Ss.set(s,f),_||SL(A,s,f,$.state))),c&&E===null)throw Error(n(528,""));return $}if(c&&E!==null)throw Error(n(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Au(f),f=ht(A).hoistableScripts,E=f.get(c),E||(E={type:"script",instance:null,count:0,state:null},f.set(c,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function Cu(s){return'href="'+Ht(s)+'"'}function ym(s){return'link[rel="stylesheet"]['+s+"]"}function Q4(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function SL(s,c,f,E){s.querySelector('link[rel="preload"][as="style"]['+c+"]")?E.loading=1:(c=s.createElement("link"),E.preload=c,c.addEventListener("load",function(){return E.loading|=1}),c.addEventListener("error",function(){return E.loading|=2}),sn(c,"link",f),Pr(c),s.head.appendChild(c))}function Au(s){return'[src="'+Ht(s)+'"]'}function xm(s){return"script[async]"+s}function J4(s,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var E=s.querySelector('style[data-href~="'+Ht(f.href)+'"]');if(E)return c.instance=E,Pr(E),E;var A=v({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return E=(s.ownerDocument||s).createElement("style"),Pr(E),sn(E,"style",A),dg(E,f.precedence,s),c.instance=E;case"stylesheet":A=Cu(f.href);var _=s.querySelector(ym(A));if(_)return c.state.loading|=4,c.instance=_,Pr(_),_;E=Q4(f),(A=Ss.get(A))&&Ex(E,A),_=(s.ownerDocument||s).createElement("link"),Pr(_);var $=_;return $._p=new Promise(function(Q,de){$.onload=Q,$.onerror=de}),sn(_,"link",E),c.state.loading|=4,dg(_,f.precedence,s),c.instance=_;case"script":return _=Au(f.src),(A=s.querySelector(xm(_)))?(c.instance=A,Pr(A),A):(E=f,(A=Ss.get(_))&&(E=v({},f),wx(E,A)),s=s.ownerDocument||s,A=s.createElement("script"),Pr(A),sn(A,"link",E),s.head.appendChild(A),c.instance=A);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(E=c.instance,c.state.loading|=4,dg(E,f.precedence,s));return c.instance}function dg(s,c,f){for(var E=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=E.length?E[E.length-1]:null,_=A,$=0;$<E.length;$++){var Q=E[$];if(Q.dataset.precedence===c)_=Q;else if(_!==A)break}_?_.parentNode.insertBefore(s,_.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(s,c.firstChild))}function Ex(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.title==null&&(s.title=c.title)}function wx(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.integrity==null&&(s.integrity=c.integrity)}var mg=null;function e3(s,c,f){if(mg===null){var E=new Map,A=mg=new Map;A.set(f,E)}else A=mg,E=A.get(f),E||(E=new Map,A.set(f,E));if(E.has(s))return E;for(E.set(s,null),f=f.getElementsByTagName(s),A=0;A<f.length;A++){var _=f[A];if(!(_[pl]||_[Yr]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var $=_.getAttribute(c)||"";$=s+$;var Q=E.get($);Q?Q.push(_):E.set($,[_])}}return E}function t3(s,c,f){s=s.ownerDocument||s,s.head.insertBefore(f,c==="title"?s.querySelector("head > title"):null)}function CL(s,c,f){if(f===1||c.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return s=c.disabled,typeof c.precedence=="string"&&s==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function r3(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function AL(s,c,f,E){if(f.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var A=Cu(E.href),_=c.querySelector(ym(A));if(_){c=_._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(s.count++,s=fg.bind(s),c.then(s,s)),f.state.loading|=4,f.instance=_,Pr(_);return}_=c.ownerDocument||c,E=Q4(E),(A=Ss.get(A))&&Ex(E,A),_=_.createElement("link"),Pr(_);var $=_;$._p=new Promise(function(Q,de){$.onload=Q,$.onerror=de}),sn(_,"link",E),f.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=fg.bind(s),c.addEventListener("load",f),c.addEventListener("error",f))}}var Nx=0;function TL(s,c){return s.stylesheets&&s.count===0&&hg(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var E=setTimeout(function(){if(s.stylesheets&&hg(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+c);0<s.imgBytes&&Nx===0&&(Nx=62500*iL());var A=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&hg(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>Nx?50:800)+c);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(E),clearTimeout(A)}}:null}function fg(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var gg=null;function hg(s,c){s.stylesheets=null,s.unsuspend!==null&&(s.count++,gg=new Map,c.forEach(OL,s),gg=null,fg.call(s))}function OL(s,c){if(!(c.state.loading&4)){var f=gg.get(s);if(f)var E=f.get(null);else{f=new Map,gg.set(s,f);for(var A=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<A.length;_++){var $=A[_];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(f.set($.dataset.precedence,$),E=$)}E&&f.set(null,E)}A=c.instance,$=A.getAttribute("data-precedence"),_=f.get($)||E,_===E&&f.set(null,A),f.set($,A),this.count++,E=fg.bind(this),A.addEventListener("load",E),A.addEventListener("error",E),_?_.parentNode.insertBefore(A,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(A,s.firstChild)),c.state.loading|=4}}var bm={$$typeof:M,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function DL(s,c,f,E,A,_,$,Q,de){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ja(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ja(0),this.hiddenUpdates=Ja(null),this.identifierPrefix=E,this.onUncaughtError=A,this.onCaughtError=_,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=de,this.incompleteTransitions=new Map}function a3(s,c,f,E,A,_,$,Q,de,De,He,Xe){return s=new DL(s,c,f,$,de,De,He,Xe,Q),c=1,_===!0&&(c|=24),_=Qn(3,null,null,c),s.current=_,_.stateNode=s,c=r1(),c.refCount++,s.pooledCache=c,c.refCount++,_.memoizedState={element:E,isDehydrated:f,cache:c},l1(_),s}function n3(s){return s?(s=au,s):au}function s3(s,c,f,E,A,_){A=n3(A),E.context===null?E.context=A:E.pendingContext=A,E=eo(c),E.payload={element:f},_=_===void 0?null:_,_!==null&&(E.callback=_),f=to(s,E,c),f!==null&&(Ln(f,s,c),Zd(f,s,c))}function l3(s,c){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<c?f:c}}function Sx(s,c){l3(s,c),(s=s.alternate)&&l3(s,c)}function i3(s){if(s.tag===13||s.tag===31){var c=Jo(s,67108864);c!==null&&Ln(c,s,67108864),Sx(s,67108864)}}function o3(s){if(s.tag===13||s.tag===31){var c=as();c=Na(c);var f=Jo(s,c);f!==null&&Ln(f,s,c),Sx(s,c)}}var pg=!0;function _L(s,c,f,E){var A=J.T;J.T=null;var _=ae.p;try{ae.p=2,Cx(s,c,f,E)}finally{ae.p=_,J.T=A}}function kL(s,c,f,E){var A=J.T;J.T=null;var _=ae.p;try{ae.p=8,Cx(s,c,f,E)}finally{ae.p=_,J.T=A}}function Cx(s,c,f,E){if(pg){var A=Ax(E);if(A===null)dx(s,c,E,yg,f),u3(s,E);else if(IL(A,s,c,f,E))E.stopPropagation();else if(u3(s,E),c&4&&-1<PL.indexOf(s)){for(;A!==null;){var _=Jt(A);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var $=xt(_.pendingLanes);if($!==0){var Q=_;for(Q.pendingLanes|=2,Q.entangledLanes|=2;$;){var de=1<<31-st($);Q.entanglements[1]|=de,$&=~de}Sl(_),(cr&6)===0&&(J0=mt()+500,fm(0))}}break;case 31:case 13:Q=Jo(_,2),Q!==null&&Ln(Q,_,2),tg(),Sx(_,2)}if(_=Ax(E),_===null&&dx(s,c,E,yg,f),_===A)break;A=_}A!==null&&E.stopPropagation()}else dx(s,c,E,null,f)}}function Ax(s){return s=Ld(s),Tx(s)}var yg=null;function Tx(s){if(yg=null,s=Fr(s),s!==null){var c=i(s);if(c===null)s=null;else{var f=c.tag;if(f===13){if(s=u(c),s!==null)return s;s=null}else if(f===31){if(s=g(c),s!==null)return s;s=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;s=null}else c!==s&&(s=null)}}return yg=s,null}function c3(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($t()){case ir:return 2;case Br:return 8;case ut:case Tt:return 32;case Cr:return 268435456;default:return 32}default:return 32}}var Ox=!1,fo=null,go=null,ho=null,vm=new Map,Em=new Map,po=[],PL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u3(s,c){switch(s){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":go=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":vm.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Em.delete(c.pointerId)}}function wm(s,c,f,E,A,_){return s===null||s.nativeEvent!==_?(s={blockedOn:c,domEventName:f,eventSystemFlags:E,nativeEvent:_,targetContainers:[A]},c!==null&&(c=Jt(c),c!==null&&i3(c)),s):(s.eventSystemFlags|=E,c=s.targetContainers,A!==null&&c.indexOf(A)===-1&&c.push(A),s)}function IL(s,c,f,E,A){switch(c){case"focusin":return fo=wm(fo,s,c,f,E,A),!0;case"dragenter":return go=wm(go,s,c,f,E,A),!0;case"mouseover":return ho=wm(ho,s,c,f,E,A),!0;case"pointerover":var _=A.pointerId;return vm.set(_,wm(vm.get(_)||null,s,c,f,E,A)),!0;case"gotpointercapture":return _=A.pointerId,Em.set(_,wm(Em.get(_)||null,s,c,f,E,A)),!0}return!1}function d3(s){var c=Fr(s.target);if(c!==null){var f=i(c);if(f!==null){if(c=f.tag,c===13){if(c=u(f),c!==null){s.blockedOn=c,ot(s.priority,function(){o3(f)});return}}else if(c===31){if(c=g(f),c!==null){s.blockedOn=c,ot(s.priority,function(){o3(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function xg(s){if(s.blockedOn!==null)return!1;for(var c=s.targetContainers;0<c.length;){var f=Ax(s.nativeEvent);if(f===null){f=s.nativeEvent;var E=new f.constructor(f.type,f);qo=E,f.target.dispatchEvent(E),qo=null}else return c=Jt(f),c!==null&&i3(c),s.blockedOn=f,!1;c.shift()}return!0}function m3(s,c,f){xg(s)&&f.delete(c)}function ML(){Ox=!1,fo!==null&&xg(fo)&&(fo=null),go!==null&&xg(go)&&(go=null),ho!==null&&xg(ho)&&(ho=null),vm.forEach(m3),Em.forEach(m3)}function bg(s,c){s.blockedOn===c&&(s.blockedOn=null,Ox||(Ox=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ML)))}var vg=null;function f3(s){vg!==s&&(vg=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){vg===s&&(vg=null);for(var c=0;c<s.length;c+=3){var f=s[c],E=s[c+1],A=s[c+2];if(typeof E!="function"){if(Tx(E||f)===null)continue;break}var _=Jt(f);_!==null&&(s.splice(c,3),c-=3,A1(_,{pending:!0,data:A,method:f.method,action:E},E,A))}}))}function Tu(s){function c(de){return bg(de,s)}fo!==null&&bg(fo,s),go!==null&&bg(go,s),ho!==null&&bg(ho,s),vm.forEach(c),Em.forEach(c);for(var f=0;f<po.length;f++){var E=po[f];E.blockedOn===s&&(E.blockedOn=null)}for(;0<po.length&&(f=po[0],f.blockedOn===null);)d3(f),f.blockedOn===null&&po.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(E=0;E<f.length;E+=3){var A=f[E],_=f[E+1],$=A[tr]||null;if(typeof _=="function")$||f3(f);else if($){var Q=null;if(_&&_.hasAttribute("formAction")){if(A=_,$=_[tr]||null)Q=$.formAction;else if(Tx(A)!==null)continue}else Q=$.action;typeof Q=="function"?f[E+1]=Q:(f.splice(E,3),E-=3),f3(f)}}}function g3(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function($){return A=$})},focusReset:"manual",scroll:"manual"})}function c(){A!==null&&(A(),A=null),E||setTimeout(f,20)}function f(){if(!E&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var E=!1,A=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(f,100),function(){E=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),A!==null&&(A(),A=null)}}}function Dx(s){this._internalRoot=s}Eg.prototype.render=Dx.prototype.render=function(s){var c=this._internalRoot;if(c===null)throw Error(n(409));var f=c.current,E=as();s3(f,E,s,c,null,null)},Eg.prototype.unmount=Dx.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var c=s.containerInfo;s3(s.current,2,null,s,null,null),tg(),c[pn]=null}};function Eg(s){this._internalRoot=s}Eg.prototype.unstable_scheduleHydration=function(s){if(s){var c=Ga();s={blockedOn:null,target:s,priority:c};for(var f=0;f<po.length&&c!==0&&c<po[f].priority;f++);po.splice(f,0,s),f===0&&d3(s)}};var h3=t.version;if(h3!=="19.2.0")throw Error(n(527,h3,"19.2.0"));ae.findDOMNode=function(s){var c=s._reactInternals;if(c===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=p(c),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var RL={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wg.isDisabled&&wg.supportsFiber)try{kt=wg.inject(RL),be=wg}catch{}}return Nm.createRoot=function(s,c){if(!l(s))throw Error(n(299));var f=!1,E="",A=wC,_=NC,$=SC;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(E=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(_=c.onCaughtError),c.onRecoverableError!==void 0&&($=c.onRecoverableError)),c=a3(s,1,!1,null,null,f,E,null,A,_,$,g3),s[pn]=c.current,ux(s),new Dx(c)},Nm.hydrateRoot=function(s,c,f){if(!l(s))throw Error(n(299));var E=!1,A="",_=wC,$=NC,Q=SC,de=null;return f!=null&&(f.unstable_strictMode===!0&&(E=!0),f.identifierPrefix!==void 0&&(A=f.identifierPrefix),f.onUncaughtError!==void 0&&(_=f.onUncaughtError),f.onCaughtError!==void 0&&($=f.onCaughtError),f.onRecoverableError!==void 0&&(Q=f.onRecoverableError),f.formState!==void 0&&(de=f.formState)),c=a3(s,1,!0,c,f??null,E,A,de,_,$,Q,g3),c.context=n3(null),f=c.current,E=as(),E=Na(E),A=eo(E),A.callback=null,to(f,A,E),f=E,c.current.lanes=f,gs(c,f),Sl(c),s[pn]=c.current,ux(s),new Eg(c)},Nm.version="19.2.0",Nm}var N3;function HL(){if(N3)return kx.exports;N3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),kx.exports=VL(),kx.exports}var $L=HL();var S3="popstate";function qL(e={}){function t(n,l){let{pathname:i,search:u,hash:g}=n.location;return Yv("",{pathname:i,search:u,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(n,l){return typeof l=="string"?l:tf(l)}return YL(t,r,null,e)}function Jr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Rs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function GL(){return Math.random().toString(36).substring(2,10)}function C3(e,t){return{usr:e.state,key:e.key,idx:t}}function Yv(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?pd(t):t,state:r,key:t&&t.key||n||GL()}}function tf({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function pd(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function YL(e,t,r,n={}){let{window:l=document.defaultView,v5Compat:i=!1}=n,u=l.history,g="POP",h=null,p=y();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function y(){return(u.state||{idx:null}).idx}function v(){g="POP";let k=y(),R=k==null?null:k-p;p=k,h&&h({action:g,location:P.location,delta:R})}function C(k,R){g="PUSH";let B=Yv(P.location,k,R);p=y()+1;let M=C3(B,p),G=P.createHref(B);try{u.pushState(M,"",G)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;l.location.assign(G)}i&&h&&h({action:g,location:P.location,delta:1})}function T(k,R){g="REPLACE";let B=Yv(P.location,k,R);p=y();let M=C3(B,p),G=P.createHref(B);u.replaceState(M,"",G),i&&h&&h({action:g,location:P.location,delta:0})}function D(k){return XL(k)}let P={get action(){return g},get location(){return e(l,u)},listen(k){if(h)throw new Error("A history only accepts one active listener");return l.addEventListener(S3,v),h=k,()=>{l.removeEventListener(S3,v),h=null}},createHref(k){return t(l,k)},createURL:D,encodeLocation(k){let R=D(k);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:C,replace:T,go(k){return u.go(k)}};return P}function XL(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Jr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:tf(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function QD(e,t,r="/"){return WL(e,t,r,!1)}function WL(e,t,r,n){let l=typeof t=="string"?pd(t):t,i=bi(l.pathname||"/",r);if(i==null)return null;let u=JD(e);KL(u);let g=null;for(let h=0;g==null&&h<u.length;++h){let p=iB(i);g=sB(u[h],p,n)}return g}function JD(e,t=[],r=[],n="",l=!1){let i=(u,g,h=l,p)=>{let y={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:g,route:u};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(n)&&h)return;Jr(y.relativePath.startsWith(n),`Absolute route path "${y.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(n.length)}let v=pi([n,y.relativePath]),C=r.concat(y);u.children&&u.children.length>0&&(Jr(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),JD(u.children,t,C,v,h)),!(u.path==null&&!u.index)&&t.push({path:v,score:aB(v,u.index),routesMeta:C})};return e.forEach((u,g)=>{if(u.path===""||!u.path?.includes("?"))i(u,g);else for(let h of e_(u.path))i(u,g,!0,h)}),t}function e_(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,l=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return l?[i,""]:[i];let u=e_(n.join("/")),g=[];return g.push(...u.map(h=>h===""?i:[i,h].join("/"))),l&&g.push(...u),g.map(h=>e.startsWith("/")&&h===""?"/":h)}function KL(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:nB(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var ZL=/^:[\w-]+$/,QL=3,JL=2,eB=1,tB=10,rB=-2,A3=e=>e==="*";function aB(e,t){let r=e.split("/"),n=r.length;return r.some(A3)&&(n+=rB),t&&(n+=JL),r.filter(l=>!A3(l)).reduce((l,i)=>l+(ZL.test(i)?QL:i===""?eB:tB),n)}function nB(e,t){return e.length===t.length&&e.slice(0,-1).every((n,l)=>n===t[l])?e[e.length-1]-t[t.length-1]:0}function sB(e,t,r=!1){let{routesMeta:n}=e,l={},i="/",u=[];for(let g=0;g<n.length;++g){let h=n[g],p=g===n.length-1,y=i==="/"?t:t.slice(i.length)||"/",v=Th({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},y),C=h.route;if(!v&&p&&r&&!n[n.length-1].route.index&&(v=Th({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},y)),!v)return null;Object.assign(l,v.params),u.push({params:l,pathname:pi([i,v.pathname]),pathnameBase:mB(pi([i,v.pathnameBase])),route:C}),v.pathnameBase!=="/"&&(i=pi([i,v.pathnameBase]))}return u}function Th(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=lB(e.path,e.caseSensitive,e.end),l=t.match(r);if(!l)return null;let i=l[0],u=i.replace(/(.)\/+$/,"$1"),g=l.slice(1);return{params:n.reduce((p,{paramName:y,isOptional:v},C)=>{if(y==="*"){let D=g[C]||"";u=i.slice(0,i.length-D.length).replace(/(.)\/+$/,"$1")}const T=g[C];return v&&!T?p[y]=void 0:p[y]=(T||"").replace(/%2F/g,"/"),p},{}),pathname:i,pathnameBase:u,pattern:e}}function lB(e,t=!1,r=!0){Rs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,g,h)=>(n.push({paramName:g,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),n]}function iB(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Rs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function bi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var oB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cB=e=>oB.test(e);function uB(e,t="/"){let{pathname:r,search:n="",hash:l=""}=typeof e=="string"?pd(e):e,i;if(r)if(cB(r))i=r;else{if(r.includes("//")){let u=r;r=r.replace(/\/\/+/g,"/"),Rs(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${r}`)}r.startsWith("/")?i=T3(r.substring(1),"/"):i=T3(r,t)}else i=t;return{pathname:i,search:fB(n),hash:gB(l)}}function T3(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function Rx(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dB(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function T2(e){let t=dB(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function O2(e,t,r,n=!1){let l;typeof e=="string"?l=pd(e):(l={...e},Jr(!l.pathname||!l.pathname.includes("?"),Rx("?","pathname","search",l)),Jr(!l.pathname||!l.pathname.includes("#"),Rx("#","pathname","hash",l)),Jr(!l.search||!l.search.includes("#"),Rx("#","search","hash",l)));let i=e===""||l.pathname==="",u=i?"/":l.pathname,g;if(u==null)g=r;else{let v=t.length-1;if(!n&&u.startsWith("..")){let C=u.split("/");for(;C[0]==="..";)C.shift(),v-=1;l.pathname=C.join("/")}g=v>=0?t[v]:"/"}let h=uB(l,g),p=u&&u!=="/"&&u.endsWith("/"),y=(i||u===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(p||y)&&(h.pathname+="/"),h}var pi=e=>e.join("/").replace(/\/\/+/g,"/"),mB=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),fB=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,gB=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function hB(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var t_=["POST","PUT","PATCH","DELETE"];new Set(t_);var pB=["GET",...t_];new Set(pB);var yd=w.createContext(null);yd.displayName="DataRouter";var Mp=w.createContext(null);Mp.displayName="DataRouterState";w.createContext(!1);var r_=w.createContext({isTransitioning:!1});r_.displayName="ViewTransition";var yB=w.createContext(new Map);yB.displayName="Fetchers";var xB=w.createContext(null);xB.displayName="Await";var dl=w.createContext(null);dl.displayName="Navigation";var Of=w.createContext(null);Of.displayName="Location";var ml=w.createContext({outlet:null,matches:[],isDataRoute:!1});ml.displayName="Route";var D2=w.createContext(null);D2.displayName="RouteError";function bB(e,{relative:t}={}){Jr(xd(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=w.useContext(dl),{hash:l,pathname:i,search:u}=Df(e,{relative:t}),g=i;return r!=="/"&&(g=i==="/"?r:pi([r,i])),n.createHref({pathname:g,search:u,hash:l})}function xd(){return w.useContext(Of)!=null}function Us(){return Jr(xd(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Of).location}var a_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function n_(e){w.useContext(dl).static||w.useLayoutEffect(e)}function Rp(){let{isDataRoute:e}=w.useContext(ml);return e?MB():vB()}function vB(){Jr(xd(),"useNavigate() may be used only in the context of a <Router> component.");let e=w.useContext(yd),{basename:t,navigator:r}=w.useContext(dl),{matches:n}=w.useContext(ml),{pathname:l}=Us(),i=JSON.stringify(T2(n)),u=w.useRef(!1);return n_(()=>{u.current=!0}),w.useCallback((h,p={})=>{if(Rs(u.current,a_),!u.current)return;if(typeof h=="number"){r.go(h);return}let y=O2(h,JSON.parse(i),l,p.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:pi([t,y.pathname])),(p.replace?r.replace:r.push)(y,p.state,p)},[t,r,i,l,e])}var EB=w.createContext(null);function wB(e){let t=w.useContext(ml).outlet;return w.useMemo(()=>t&&w.createElement(EB.Provider,{value:e},t),[t,e])}function Df(e,{relative:t}={}){let{matches:r}=w.useContext(ml),{pathname:n}=Us(),l=JSON.stringify(T2(r));return w.useMemo(()=>O2(e,JSON.parse(l),n,t==="path"),[e,l,n,t])}function NB(e,t){return s_(e,t)}function s_(e,t,r,n,l){Jr(xd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=w.useContext(dl),{matches:u}=w.useContext(ml),g=u[u.length-1],h=g?g.params:{},p=g?g.pathname:"/",y=g?g.pathnameBase:"/",v=g&&g.route;{let B=v&&v.path||"";l_(p,!v||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let C=Us(),T;if(t){let B=typeof t=="string"?pd(t):t;Jr(y==="/"||B.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${B.pathname}" was given in the \`location\` prop.`),T=B}else T=C;let D=T.pathname||"/",P=D;if(y!=="/"){let B=y.replace(/^\//,"").split("/");P="/"+D.replace(/^\//,"").split("/").slice(B.length).join("/")}let k=QD(e,{pathname:P});Rs(v||k!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Rs(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=OB(k&&k.map(B=>Object.assign({},B,{params:Object.assign({},h,B.params),pathname:pi([y,i.encodeLocation?i.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?y:pi([y,i.encodeLocation?i.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),u,r,n,l);return t&&R?w.createElement(Of.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},R):R}function SB(){let e=IB(),t=hB(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:i},"ErrorBoundary")," or"," ",w.createElement("code",{style:i},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:l},r):null,u)}var CB=w.createElement(SB,null),AB=class extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?w.createElement(ml.Provider,{value:this.props.routeContext},w.createElement(D2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function TB({routeContext:e,match:t,children:r}){let n=w.useContext(yd);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(ml.Provider,{value:e},r)}function OB(e,t=[],r=null,n=null,l=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,u=r?.errors;if(u!=null){let y=i.findIndex(v=>v.route.id&&u?.[v.route.id]!==void 0);Jr(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),i=i.slice(0,Math.min(i.length,y+1))}let g=!1,h=-1;if(r)for(let y=0;y<i.length;y++){let v=i[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(h=y),v.route.id){let{loaderData:C,errors:T}=r,D=v.route.loader&&!C.hasOwnProperty(v.route.id)&&(!T||T[v.route.id]===void 0);if(v.route.lazy||D){g=!0,h>=0?i=i.slice(0,h+1):i=[i[0]];break}}}let p=r&&n?(y,v)=>{n(y,{location:r.location,params:r.matches?.[0]?.params??{},errorInfo:v})}:void 0;return i.reduceRight((y,v,C)=>{let T,D=!1,P=null,k=null;r&&(T=u&&v.route.id?u[v.route.id]:void 0,P=v.route.errorElement||CB,g&&(h<0&&C===0?(l_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,k=null):h===C&&(D=!0,k=v.route.hydrateFallbackElement||null)));let R=t.concat(i.slice(0,C+1)),B=()=>{let M;return T?M=P:D?M=k:v.route.Component?M=w.createElement(v.route.Component,null):v.route.element?M=v.route.element:M=y,w.createElement(TB,{match:v,routeContext:{outlet:y,matches:R,isDataRoute:r!=null},children:M})};return r&&(v.route.ErrorBoundary||v.route.errorElement||C===0)?w.createElement(AB,{location:r.location,revalidation:r.revalidation,component:P,error:T,children:B(),routeContext:{outlet:null,matches:R,isDataRoute:!0},onError:p}):B()},null)}function _2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DB(e){let t=w.useContext(yd);return Jr(t,_2(e)),t}function _B(e){let t=w.useContext(Mp);return Jr(t,_2(e)),t}function kB(e){let t=w.useContext(ml);return Jr(t,_2(e)),t}function k2(e){let t=kB(e),r=t.matches[t.matches.length-1];return Jr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function PB(){return k2("useRouteId")}function IB(){let e=w.useContext(D2),t=_B("useRouteError"),r=k2("useRouteError");return e!==void 0?e:t.errors?.[r]}function MB(){let{router:e}=DB("useNavigate"),t=k2("useNavigate"),r=w.useRef(!1);return n_(()=>{r.current=!0}),w.useCallback(async(l,i={})=>{Rs(r.current,a_),r.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:t,...i}))},[e,t])}var O3={};function l_(e,t,r){!t&&!O3[e]&&(O3[e]=!0,Rs(!1,r))}w.memo(RB);function RB({routes:e,future:t,state:r,unstable_onError:n}){return s_(e,void 0,r,n,t)}function Oh({to:e,replace:t,state:r,relative:n}){Jr(xd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=w.useContext(dl);Rs(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=w.useContext(ml),{pathname:u}=Us(),g=Rp(),h=O2(e,T2(i),u,n==="path"),p=JSON.stringify(h);return w.useEffect(()=>{g(JSON.parse(p),{replace:t,state:r,relative:n})},[g,p,n,t,r]),null}function LB(e){return wB(e.context)}function Nr(e){Jr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BB({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:l,static:i=!1}){Jr(!xd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),g=w.useMemo(()=>({basename:u,navigator:l,static:i,future:{}}),[u,l,i]);typeof r=="string"&&(r=pd(r));let{pathname:h="/",search:p="",hash:y="",state:v=null,key:C="default"}=r,T=w.useMemo(()=>{let D=bi(h,u);return D==null?null:{location:{pathname:D,search:p,hash:y,state:v,key:C},navigationType:n}},[u,h,p,y,v,C,n]);return Rs(T!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:w.createElement(dl.Provider,{value:g},w.createElement(Of.Provider,{children:t,value:T}))}function FB({children:e,location:t}){return NB(Xv(e),t)}function Xv(e,t=[]){let r=[];return w.Children.forEach(e,(n,l)=>{if(!w.isValidElement(n))return;let i=[...t,l];if(n.type===w.Fragment){r.push.apply(r,Xv(n.props.children,i));return}Jr(n.type===Nr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Jr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let u={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=Xv(n.props.children,i)),r.push(u)}),r}var uh="get",dh="application/x-www-form-urlencoded";function Lp(e){return e!=null&&typeof e.tagName=="string"}function UB(e){return Lp(e)&&e.tagName.toLowerCase()==="button"}function jB(e){return Lp(e)&&e.tagName.toLowerCase()==="form"}function zB(e){return Lp(e)&&e.tagName.toLowerCase()==="input"}function VB(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function HB(e,t){return e.button===0&&(!t||t==="_self")&&!VB(e)}var Sg=null;function $B(){if(Sg===null)try{new FormData(document.createElement("form"),0),Sg=!1}catch{Sg=!0}return Sg}var qB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lx(e){return e!=null&&!qB.has(e)?(Rs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dh}"`),null):e}function GB(e,t){let r,n,l,i,u;if(jB(e)){let g=e.getAttribute("action");n=g?bi(g,t):null,r=e.getAttribute("method")||uh,l=Lx(e.getAttribute("enctype"))||dh,i=new FormData(e)}else if(UB(e)||zB(e)&&(e.type==="submit"||e.type==="image")){let g=e.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||g.getAttribute("action");if(n=h?bi(h,t):null,r=e.getAttribute("formmethod")||g.getAttribute("method")||uh,l=Lx(e.getAttribute("formenctype"))||Lx(g.getAttribute("enctype"))||dh,i=new FormData(g,e),!$B()){let{name:p,type:y,value:v}=e;if(y==="image"){let C=p?`${p}.`:"";i.append(`${C}x`,"0"),i.append(`${C}y`,"0")}else p&&i.append(p,v)}}else{if(Lp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=uh,n=null,l=dh,u=e}return i&&l==="text/plain"&&(u=i,i=void 0),{action:n,method:r.toLowerCase(),encType:l,formData:i,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function P2(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function YB(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&bi(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function XB(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WB(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function KB(e,t,r){let n=await Promise.all(e.map(async l=>{let i=t.routes[l.route.id];if(i){let u=await XB(i,r);return u.links?u.links():[]}return[]}));return eF(n.flat(1).filter(WB).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function D3(e,t,r,n,l,i){let u=(h,p)=>r[p]?h.route.id!==r[p].route.id:!0,g=(h,p)=>r[p].pathname!==h.pathname||r[p].route.path?.endsWith("*")&&r[p].params["*"]!==h.params["*"];return i==="assets"?t.filter((h,p)=>u(h,p)||g(h,p)):i==="data"?t.filter((h,p)=>{let y=n.routes[h.route.id];if(!y||!y.hasLoader)return!1;if(u(h,p)||g(h,p))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function ZB(e,t,{includeHydrateFallback:r}={}){return QB(e.map(n=>{let l=t.routes[n.route.id];if(!l)return[];let i=[l.module];return l.clientActionModule&&(i=i.concat(l.clientActionModule)),l.clientLoaderModule&&(i=i.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(i=i.concat(l.hydrateFallbackModule)),l.imports&&(i=i.concat(l.imports)),i}).flat(1))}function QB(e){return[...new Set(e)]}function JB(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function eF(e,t){let r=new Set;return new Set(t),e.reduce((n,l)=>{let i=JSON.stringify(JB(l));return r.has(i)||(r.add(i),n.push({key:i,link:l})),n},[])}function i_(){let e=w.useContext(yd);return P2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function tF(){let e=w.useContext(Mp);return P2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var I2=w.createContext(void 0);I2.displayName="FrameworkContext";function o_(){let e=w.useContext(I2);return P2(e,"You must render this element inside a <HydratedRouter> element"),e}function rF(e,t){let r=w.useContext(I2),[n,l]=w.useState(!1),[i,u]=w.useState(!1),{onFocus:g,onBlur:h,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=t,C=w.useRef(null);w.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let P=R=>{R.forEach(B=>{u(B.isIntersecting)})},k=new IntersectionObserver(P,{threshold:.5});return C.current&&k.observe(C.current),()=>{k.disconnect()}}},[e]),w.useEffect(()=>{if(n){let P=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(P)}}},[n]);let T=()=>{l(!0)},D=()=>{l(!1),u(!1)};return r?e!=="intent"?[i,C,{}]:[i,C,{onFocus:Sm(g,T),onBlur:Sm(h,D),onMouseEnter:Sm(p,T),onMouseLeave:Sm(y,D),onTouchStart:Sm(v,T)}]:[!1,C,{}]}function Sm(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function aF({page:e,...t}){let{router:r}=i_(),n=w.useMemo(()=>QD(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?w.createElement(sF,{page:e,matches:n,...t}):null}function nF(e){let{manifest:t,routeModules:r}=o_(),[n,l]=w.useState([]);return w.useEffect(()=>{let i=!1;return KB(e,t,r).then(u=>{i||l(u)}),()=>{i=!0}},[e,t,r]),n}function sF({page:e,matches:t,...r}){let n=Us(),{manifest:l,routeModules:i}=o_(),{basename:u}=i_(),{loaderData:g,matches:h}=tF(),p=w.useMemo(()=>D3(e,t,h,l,n,"data"),[e,t,h,l,n]),y=w.useMemo(()=>D3(e,t,h,l,n,"assets"),[e,t,h,l,n]),v=w.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let D=new Set,P=!1;if(t.forEach(R=>{let B=l.routes[R.route.id];!B||!B.hasLoader||(!p.some(M=>M.route.id===R.route.id)&&R.route.id in g&&i[R.route.id]?.shouldRevalidate||B.hasClientLoader?P=!0:D.add(R.route.id))}),D.size===0)return[];let k=YB(e,u,"data");return P&&D.size>0&&k.searchParams.set("_routes",t.filter(R=>D.has(R.route.id)).map(R=>R.route.id).join(",")),[k.pathname+k.search]},[u,g,n,l,p,t,e,i]),C=w.useMemo(()=>ZB(y,l),[y,l]),T=nF(y);return w.createElement(w.Fragment,null,v.map(D=>w.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...r})),C.map(D=>w.createElement("link",{key:D,rel:"modulepreload",href:D,...r})),T.map(({key:D,link:P})=>w.createElement("link",{key:D,nonce:r.nonce,...P})))}function lF(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var c_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{c_&&(window.__reactRouterVersion="7.9.6")}catch{}function iF({basename:e,children:t,window:r}){let n=w.useRef();n.current==null&&(n.current=qL({window:r,v5Compat:!0}));let l=n.current,[i,u]=w.useState({action:l.action,location:l.location}),g=w.useCallback(h=>{w.startTransition(()=>u(h))},[u]);return w.useLayoutEffect(()=>l.listen(g),[l,g]),w.createElement(BB,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:l})}var u_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M2=w.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:l,reloadDocument:i,replace:u,state:g,target:h,to:p,preventScrollReset:y,viewTransition:v,...C},T){let{basename:D}=w.useContext(dl),P=typeof p=="string"&&u_.test(p),k,R=!1;if(typeof p=="string"&&P&&(k=p,c_))try{let j=new URL(window.location.href),Y=p.startsWith("//")?new URL(j.protocol+p):new URL(p),H=bi(Y.pathname,D);Y.origin===j.origin&&H!=null?p=H+Y.search+Y.hash:R=!0}catch{Rs(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=bB(p,{relative:l}),[M,G,F]=rF(n,C),U=dF(p,{replace:u,state:g,target:h,preventScrollReset:y,relative:l,viewTransition:v});function L(j){t&&t(j),j.defaultPrevented||U(j)}let V=w.createElement("a",{...C,...F,href:k||B,onClick:R||i?t:L,ref:lF(T,G),target:h,"data-discover":!P&&r==="render"?"true":void 0});return M&&!P?w.createElement(w.Fragment,null,V,w.createElement(aF,{page:B})):V});M2.displayName="Link";var oF=w.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:l=!1,style:i,to:u,viewTransition:g,children:h,...p},y){let v=Df(u,{relative:p.relative}),C=Us(),T=w.useContext(Mp),{navigator:D,basename:P}=w.useContext(dl),k=T!=null&&pF(v)&&g===!0,R=D.encodeLocation?D.encodeLocation(v).pathname:v.pathname,B=C.pathname,M=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;r||(B=B.toLowerCase(),M=M?M.toLowerCase():null,R=R.toLowerCase()),M&&P&&(M=bi(M,P)||M);const G=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let F=B===R||!l&&B.startsWith(R)&&B.charAt(G)==="/",U=M!=null&&(M===R||!l&&M.startsWith(R)&&M.charAt(R.length)==="/"),L={isActive:F,isPending:U,isTransitioning:k},V=F?t:void 0,j;typeof n=="function"?j=n(L):j=[n,F?"active":null,U?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let Y=typeof i=="function"?i(L):i;return w.createElement(M2,{...p,"aria-current":V,className:j,ref:y,style:Y,to:u,viewTransition:g},typeof h=="function"?h(L):h)});oF.displayName="NavLink";var cF=w.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:l,state:i,method:u=uh,action:g,onSubmit:h,relative:p,preventScrollReset:y,viewTransition:v,...C},T)=>{let D=gF(),P=hF(g,{relative:p}),k=u.toLowerCase()==="get"?"get":"post",R=typeof g=="string"&&u_.test(g),B=M=>{if(h&&h(M),M.defaultPrevented)return;M.preventDefault();let G=M.nativeEvent.submitter,F=G?.getAttribute("formmethod")||u;D(G||M.currentTarget,{fetcherKey:t,method:F,navigate:r,replace:l,state:i,relative:p,preventScrollReset:y,viewTransition:v})};return w.createElement("form",{ref:T,method:k,action:P,onSubmit:n?h:B,...C,"data-discover":!R&&e==="render"?"true":void 0})});cF.displayName="Form";function uF(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d_(e){let t=w.useContext(yd);return Jr(t,uF(e)),t}function dF(e,{target:t,replace:r,state:n,preventScrollReset:l,relative:i,viewTransition:u}={}){let g=Rp(),h=Us(),p=Df(e,{relative:i});return w.useCallback(y=>{if(HB(y,t)){y.preventDefault();let v=r!==void 0?r:tf(h)===tf(p);g(e,{replace:v,state:n,preventScrollReset:l,relative:i,viewTransition:u})}},[h,g,p,r,n,t,e,l,i,u])}var mF=0,fF=()=>`__${String(++mF)}__`;function gF(){let{router:e}=d_("useSubmit"),{basename:t}=w.useContext(dl),r=PB();return w.useCallback(async(n,l={})=>{let{action:i,method:u,encType:g,formData:h,body:p}=GB(n,t);if(l.navigate===!1){let y=l.fetcherKey||fF();await e.fetch(y,r,l.action||i,{preventScrollReset:l.preventScrollReset,formData:h,body:p,formMethod:l.method||u,formEncType:l.encType||g,flushSync:l.flushSync})}else await e.navigate(l.action||i,{preventScrollReset:l.preventScrollReset,formData:h,body:p,formMethod:l.method||u,formEncType:l.encType||g,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,r])}function hF(e,{relative:t}={}){let{basename:r}=w.useContext(dl),n=w.useContext(ml);Jr(n,"useFormAction must be used inside a RouteContext");let[l]=n.matches.slice(-1),i={...Df(e||".",{relative:t})},u=Us();if(e==null){i.search=u.search;let g=new URLSearchParams(i.search),h=g.getAll("index");if(h.some(y=>y==="")){g.delete("index"),h.filter(v=>v).forEach(v=>g.append("index",v));let y=g.toString();i.search=y?`?${y}`:""}}return(!e||e===".")&&l.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:pi([r,i.pathname])),tf(i)}function pF(e,{relative:t}={}){let r=w.useContext(r_);Jr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=d_("useViewTransitionState"),l=Df(e,{relative:t});if(!r.isTransitioning)return!1;let i=bi(r.currentLocation.pathname,n)||r.currentLocation.pathname,u=bi(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Th(l.pathname,u)!=null||Th(l.pathname,i)!=null}var R2=ZD();function m_(e,t){return function(){return e.apply(t,arguments)}}const{toString:yF}=Object.prototype,{getPrototypeOf:L2}=Object,{iterator:Bp,toStringTag:f_}=Symbol,Fp=(e=>t=>{const r=yF.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),fl=e=>(e=e.toLowerCase(),t=>Fp(t)===e),Up=e=>t=>typeof t===e,{isArray:bd}=Array,Zu=Up("undefined");function _f(e){return e!==null&&!Zu(e)&&e.constructor!==null&&!Zu(e.constructor)&&Vn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const g_=fl("ArrayBuffer");function xF(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&g_(e.buffer),t}const bF=Up("string"),Vn=Up("function"),h_=Up("number"),kf=e=>e!==null&&typeof e=="object",vF=e=>e===!0||e===!1,mh=e=>{if(Fp(e)!=="object")return!1;const t=L2(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(f_ in e)&&!(Bp in e)},EF=e=>{if(!kf(e)||_f(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},wF=fl("Date"),NF=fl("File"),SF=fl("Blob"),CF=fl("FileList"),AF=e=>kf(e)&&Vn(e.pipe),TF=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Vn(e.append)&&((t=Fp(e))==="formdata"||t==="object"&&Vn(e.toString)&&e.toString()==="[object FormData]"))},OF=fl("URLSearchParams"),[DF,_F,kF,PF]=["ReadableStream","Request","Response","Headers"].map(fl),IF=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Pf(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,l;if(typeof e!="object"&&(e=[e]),bd(e))for(n=0,l=e.length;n<l;n++)t.call(null,e[n],n,e);else{if(_f(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),u=i.length;let g;for(n=0;n<u;n++)g=i[n],t.call(null,e[g],g,e)}}function p_(e,t){if(_f(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,l;for(;n-- >0;)if(l=r[n],t===l.toLowerCase())return l;return null}const Sc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,y_=e=>!Zu(e)&&e!==Sc;function Wv(){const{caseless:e,skipUndefined:t}=y_(this)&&this||{},r={},n=(l,i)=>{const u=e&&p_(r,i)||i;mh(r[u])&&mh(l)?r[u]=Wv(r[u],l):mh(l)?r[u]=Wv({},l):bd(l)?r[u]=l.slice():(!t||!Zu(l))&&(r[u]=l)};for(let l=0,i=arguments.length;l<i;l++)arguments[l]&&Pf(arguments[l],n);return r}const MF=(e,t,r,{allOwnKeys:n}={})=>(Pf(t,(l,i)=>{r&&Vn(l)?e[i]=m_(l,r):e[i]=l},{allOwnKeys:n}),e),RF=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),LF=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},BF=(e,t,r,n)=>{let l,i,u;const g={};if(t=t||{},e==null)return t;do{for(l=Object.getOwnPropertyNames(e),i=l.length;i-- >0;)u=l[i],(!n||n(u,e,t))&&!g[u]&&(t[u]=e[u],g[u]=!0);e=r!==!1&&L2(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},FF=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},UF=e=>{if(!e)return null;if(bd(e))return e;let t=e.length;if(!h_(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},jF=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&L2(Uint8Array)),zF=(e,t)=>{const n=(e&&e[Bp]).call(e);let l;for(;(l=n.next())&&!l.done;){const i=l.value;t.call(e,i[0],i[1])}},VF=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},HF=fl("HTMLFormElement"),$F=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,l){return n.toUpperCase()+l}),_3=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),qF=fl("RegExp"),x_=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Pf(r,(l,i)=>{let u;(u=t(l,i,e))!==!1&&(n[i]=u||l)}),Object.defineProperties(e,n)},GF=e=>{x_(e,(t,r)=>{if(Vn(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Vn(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},YF=(e,t)=>{const r={},n=l=>{l.forEach(i=>{r[i]=!0})};return bd(e)?n(e):n(String(e).split(t)),r},XF=()=>{},WF=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function KF(e){return!!(e&&Vn(e.append)&&e[f_]==="FormData"&&e[Bp])}const ZF=e=>{const t=new Array(10),r=(n,l)=>{if(kf(n)){if(t.indexOf(n)>=0)return;if(_f(n))return n;if(!("toJSON"in n)){t[l]=n;const i=bd(n)?[]:{};return Pf(n,(u,g)=>{const h=r(u,l+1);!Zu(h)&&(i[g]=h)}),t[l]=void 0,i}}return n};return r(e,0)},QF=fl("AsyncFunction"),JF=e=>e&&(kf(e)||Vn(e))&&Vn(e.then)&&Vn(e.catch),b_=((e,t)=>e?setImmediate:t?((r,n)=>(Sc.addEventListener("message",({source:l,data:i})=>{l===Sc&&i===r&&n.length&&n.shift()()},!1),l=>{n.push(l),Sc.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Vn(Sc.postMessage)),eU=typeof queueMicrotask<"u"?queueMicrotask.bind(Sc):typeof process<"u"&&process.nextTick||b_,tU=e=>e!=null&&Vn(e[Bp]),Le={isArray:bd,isArrayBuffer:g_,isBuffer:_f,isFormData:TF,isArrayBufferView:xF,isString:bF,isNumber:h_,isBoolean:vF,isObject:kf,isPlainObject:mh,isEmptyObject:EF,isReadableStream:DF,isRequest:_F,isResponse:kF,isHeaders:PF,isUndefined:Zu,isDate:wF,isFile:NF,isBlob:SF,isRegExp:qF,isFunction:Vn,isStream:AF,isURLSearchParams:OF,isTypedArray:jF,isFileList:CF,forEach:Pf,merge:Wv,extend:MF,trim:IF,stripBOM:RF,inherits:LF,toFlatObject:BF,kindOf:Fp,kindOfTest:fl,endsWith:FF,toArray:UF,forEachEntry:zF,matchAll:VF,isHTMLForm:HF,hasOwnProperty:_3,hasOwnProp:_3,reduceDescriptors:x_,freezeMethods:GF,toObjectSet:YF,toCamelCase:$F,noop:XF,toFiniteNumber:WF,findKey:p_,global:Sc,isContextDefined:y_,isSpecCompliantForm:KF,toJSONObject:ZF,isAsyncFn:QF,isThenable:JF,setImmediate:b_,asap:eU,isIterable:tU};function Bt(e,t,r,n,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),l&&(this.response=l,this.status=l.status?l.status:null)}Le.inherits(Bt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Le.toJSONObject(this.config),code:this.code,status:this.status}}});const v_=Bt.prototype,E_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{E_[e]={value:e}});Object.defineProperties(Bt,E_);Object.defineProperty(v_,"isAxiosError",{value:!0});Bt.from=(e,t,r,n,l,i)=>{const u=Object.create(v_);Le.toFlatObject(e,u,function(y){return y!==Error.prototype},p=>p!=="isAxiosError");const g=e&&e.message?e.message:"Error",h=t==null&&e?e.code:t;return Bt.call(u,g,h,r,n,l),e&&u.cause==null&&Object.defineProperty(u,"cause",{value:e,configurable:!0}),u.name=e&&e.name||"Error",i&&Object.assign(u,i),u};const rU=null;function Kv(e){return Le.isPlainObject(e)||Le.isArray(e)}function w_(e){return Le.endsWith(e,"[]")?e.slice(0,-2):e}function k3(e,t,r){return e?e.concat(t).map(function(l,i){return l=w_(l),!r&&i?"["+l+"]":l}).join(r?".":""):t}function aU(e){return Le.isArray(e)&&!e.some(Kv)}const nU=Le.toFlatObject(Le,{},null,function(t){return/^is[A-Z]/.test(t)});function jp(e,t,r){if(!Le.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Le.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(P,k){return!Le.isUndefined(k[P])});const n=r.metaTokens,l=r.visitor||y,i=r.dots,u=r.indexes,h=(r.Blob||typeof Blob<"u"&&Blob)&&Le.isSpecCompliantForm(t);if(!Le.isFunction(l))throw new TypeError("visitor must be a function");function p(D){if(D===null)return"";if(Le.isDate(D))return D.toISOString();if(Le.isBoolean(D))return D.toString();if(!h&&Le.isBlob(D))throw new Bt("Blob is not supported. Use a Buffer instead.");return Le.isArrayBuffer(D)||Le.isTypedArray(D)?h&&typeof Blob=="function"?new Blob([D]):Buffer.from(D):D}function y(D,P,k){let R=D;if(D&&!k&&typeof D=="object"){if(Le.endsWith(P,"{}"))P=n?P:P.slice(0,-2),D=JSON.stringify(D);else if(Le.isArray(D)&&aU(D)||(Le.isFileList(D)||Le.endsWith(P,"[]"))&&(R=Le.toArray(D)))return P=w_(P),R.forEach(function(M,G){!(Le.isUndefined(M)||M===null)&&t.append(u===!0?k3([P],G,i):u===null?P:P+"[]",p(M))}),!1}return Kv(D)?!0:(t.append(k3(k,P,i),p(D)),!1)}const v=[],C=Object.assign(nU,{defaultVisitor:y,convertValue:p,isVisitable:Kv});function T(D,P){if(!Le.isUndefined(D)){if(v.indexOf(D)!==-1)throw Error("Circular reference detected in "+P.join("."));v.push(D),Le.forEach(D,function(R,B){(!(Le.isUndefined(R)||R===null)&&l.call(t,R,Le.isString(B)?B.trim():B,P,C))===!0&&T(R,P?P.concat(B):[B])}),v.pop()}}if(!Le.isObject(e))throw new TypeError("data must be an object");return T(e),t}function P3(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function B2(e,t){this._pairs=[],e&&jp(e,this,t)}const N_=B2.prototype;N_.append=function(t,r){this._pairs.push([t,r])};N_.toString=function(t){const r=t?function(n){return t.call(this,n,P3)}:P3;return this._pairs.map(function(l){return r(l[0])+"="+r(l[1])},"").join("&")};function sU(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function S_(e,t,r){if(!t)return e;const n=r&&r.encode||sU;Le.isFunction(r)&&(r={serialize:r});const l=r&&r.serialize;let i;if(l?i=l(t,r):i=Le.isURLSearchParams(t)?t.toString():new B2(t,r).toString(n),i){const u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class I3{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Le.forEach(this.handlers,function(n){n!==null&&t(n)})}}const C_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lU=typeof URLSearchParams<"u"?URLSearchParams:B2,iU=typeof FormData<"u"?FormData:null,oU=typeof Blob<"u"?Blob:null,cU={isBrowser:!0,classes:{URLSearchParams:lU,FormData:iU,Blob:oU},protocols:["http","https","file","blob","url","data"]},F2=typeof window<"u"&&typeof document<"u",Zv=typeof navigator=="object"&&navigator||void 0,uU=F2&&(!Zv||["ReactNative","NativeScript","NS"].indexOf(Zv.product)<0),dU=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",mU=F2&&window.location.href||"http://localhost",fU=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:F2,hasStandardBrowserEnv:uU,hasStandardBrowserWebWorkerEnv:dU,navigator:Zv,origin:mU},Symbol.toStringTag,{value:"Module"})),fn={...fU,...cU};function gU(e,t){return jp(e,new fn.classes.URLSearchParams,{visitor:function(r,n,l,i){return fn.isNode&&Le.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function hU(e){return Le.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function pU(e){const t={},r=Object.keys(e);let n;const l=r.length;let i;for(n=0;n<l;n++)i=r[n],t[i]=e[i];return t}function A_(e){function t(r,n,l,i){let u=r[i++];if(u==="__proto__")return!0;const g=Number.isFinite(+u),h=i>=r.length;return u=!u&&Le.isArray(l)?l.length:u,h?(Le.hasOwnProp(l,u)?l[u]=[l[u],n]:l[u]=n,!g):((!l[u]||!Le.isObject(l[u]))&&(l[u]=[]),t(r,n,l[u],i)&&Le.isArray(l[u])&&(l[u]=pU(l[u])),!g)}if(Le.isFormData(e)&&Le.isFunction(e.entries)){const r={};return Le.forEachEntry(e,(n,l)=>{t(hU(n),l,r,0)}),r}return null}function yU(e,t,r){if(Le.isString(e))try{return(t||JSON.parse)(e),Le.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const If={transitional:C_,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",l=n.indexOf("application/json")>-1,i=Le.isObject(t);if(i&&Le.isHTMLForm(t)&&(t=new FormData(t)),Le.isFormData(t))return l?JSON.stringify(A_(t)):t;if(Le.isArrayBuffer(t)||Le.isBuffer(t)||Le.isStream(t)||Le.isFile(t)||Le.isBlob(t)||Le.isReadableStream(t))return t;if(Le.isArrayBufferView(t))return t.buffer;if(Le.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let g;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return gU(t,this.formSerializer).toString();if((g=Le.isFileList(t))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return jp(g?{"files[]":t}:t,h&&new h,this.formSerializer)}}return i||l?(r.setContentType("application/json",!1),yU(t)):t}],transformResponse:[function(t){const r=this.transitional||If.transitional,n=r&&r.forcedJSONParsing,l=this.responseType==="json";if(Le.isResponse(t)||Le.isReadableStream(t))return t;if(t&&Le.isString(t)&&(n&&!this.responseType||l)){const u=!(r&&r.silentJSONParsing)&&l;try{return JSON.parse(t,this.parseReviver)}catch(g){if(u)throw g.name==="SyntaxError"?Bt.from(g,Bt.ERR_BAD_RESPONSE,this,null,this.response):g}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fn.classes.FormData,Blob:fn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Le.forEach(["delete","get","head","post","put","patch"],e=>{If.headers[e]={}});const xU=Le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bU=e=>{const t={};let r,n,l;return e&&e.split(`
`).forEach(function(u){l=u.indexOf(":"),r=u.substring(0,l).trim().toLowerCase(),n=u.substring(l+1).trim(),!(!r||t[r]&&xU[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},M3=Symbol("internals");function Cm(e){return e&&String(e).trim().toLowerCase()}function fh(e){return e===!1||e==null?e:Le.isArray(e)?e.map(fh):String(e)}function vU(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const EU=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Bx(e,t,r,n,l){if(Le.isFunction(n))return n.call(this,t,r);if(l&&(t=r),!!Le.isString(t)){if(Le.isString(n))return t.indexOf(n)!==-1;if(Le.isRegExp(n))return n.test(t)}}function wU(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function NU(e,t){const r=Le.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(l,i,u){return this[n].call(this,t,l,i,u)},configurable:!0})})}let Hn=class{constructor(t){t&&this.set(t)}set(t,r,n){const l=this;function i(g,h,p){const y=Cm(h);if(!y)throw new Error("header name must be a non-empty string");const v=Le.findKey(l,y);(!v||l[v]===void 0||p===!0||p===void 0&&l[v]!==!1)&&(l[v||h]=fh(g))}const u=(g,h)=>Le.forEach(g,(p,y)=>i(p,y,h));if(Le.isPlainObject(t)||t instanceof this.constructor)u(t,r);else if(Le.isString(t)&&(t=t.trim())&&!EU(t))u(bU(t),r);else if(Le.isObject(t)&&Le.isIterable(t)){let g={},h,p;for(const y of t){if(!Le.isArray(y))throw TypeError("Object iterator must return a key-value pair");g[p=y[0]]=(h=g[p])?Le.isArray(h)?[...h,y[1]]:[h,y[1]]:y[1]}u(g,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=Cm(t),t){const n=Le.findKey(this,t);if(n){const l=this[n];if(!r)return l;if(r===!0)return vU(l);if(Le.isFunction(r))return r.call(this,l,n);if(Le.isRegExp(r))return r.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Cm(t),t){const n=Le.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Bx(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let l=!1;function i(u){if(u=Cm(u),u){const g=Le.findKey(n,u);g&&(!r||Bx(n,n[g],g,r))&&(delete n[g],l=!0)}}return Le.isArray(t)?t.forEach(i):i(t),l}clear(t){const r=Object.keys(this);let n=r.length,l=!1;for(;n--;){const i=r[n];(!t||Bx(this,this[i],i,t,!0))&&(delete this[i],l=!0)}return l}normalize(t){const r=this,n={};return Le.forEach(this,(l,i)=>{const u=Le.findKey(n,i);if(u){r[u]=fh(l),delete r[i];return}const g=t?wU(i):String(i).trim();g!==i&&delete r[i],r[g]=fh(l),n[g]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Le.forEach(this,(n,l)=>{n!=null&&n!==!1&&(r[l]=t&&Le.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(l=>n.set(l)),n}static accessor(t){const n=(this[M3]=this[M3]={accessors:{}}).accessors,l=this.prototype;function i(u){const g=Cm(u);n[g]||(NU(l,u),n[g]=!0)}return Le.isArray(t)?t.forEach(i):i(t),this}};Hn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Le.reduceDescriptors(Hn.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Le.freezeMethods(Hn);function Fx(e,t){const r=this||If,n=t||r,l=Hn.from(n.headers);let i=n.data;return Le.forEach(e,function(g){i=g.call(r,i,l.normalize(),t?t.status:void 0)}),l.normalize(),i}function T_(e){return!!(e&&e.__CANCEL__)}function vd(e,t,r){Bt.call(this,e??"canceled",Bt.ERR_CANCELED,t,r),this.name="CanceledError"}Le.inherits(vd,Bt,{__CANCEL__:!0});function O_(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Bt("Request failed with status code "+r.status,[Bt.ERR_BAD_REQUEST,Bt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function SU(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function CU(e,t){e=e||10;const r=new Array(e),n=new Array(e);let l=0,i=0,u;return t=t!==void 0?t:1e3,function(h){const p=Date.now(),y=n[i];u||(u=p),r[l]=h,n[l]=p;let v=i,C=0;for(;v!==l;)C+=r[v++],v=v%e;if(l=(l+1)%e,l===i&&(i=(i+1)%e),p-u<t)return;const T=y&&p-y;return T?Math.round(C*1e3/T):void 0}}function AU(e,t){let r=0,n=1e3/t,l,i;const u=(p,y=Date.now())=>{r=y,l=null,i&&(clearTimeout(i),i=null),e(...p)};return[(...p)=>{const y=Date.now(),v=y-r;v>=n?u(p,y):(l=p,i||(i=setTimeout(()=>{i=null,u(l)},n-v)))},()=>l&&u(l)]}const Dh=(e,t,r=3)=>{let n=0;const l=CU(50,250);return AU(i=>{const u=i.loaded,g=i.lengthComputable?i.total:void 0,h=u-n,p=l(h),y=u<=g;n=u;const v={loaded:u,total:g,progress:g?u/g:void 0,bytes:h,rate:p||void 0,estimated:p&&g&&y?(g-u)/p:void 0,event:i,lengthComputable:g!=null,[t?"download":"upload"]:!0};e(v)},r)},R3=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},L3=e=>(...t)=>Le.asap(()=>e(...t)),TU=fn.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,fn.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(fn.origin),fn.navigator&&/(msie|trident)/i.test(fn.navigator.userAgent)):()=>!0,OU=fn.hasStandardBrowserEnv?{write(e,t,r,n,l,i,u){if(typeof document>"u")return;const g=[`${e}=${encodeURIComponent(t)}`];Le.isNumber(r)&&g.push(`expires=${new Date(r).toUTCString()}`),Le.isString(n)&&g.push(`path=${n}`),Le.isString(l)&&g.push(`domain=${l}`),i===!0&&g.push("secure"),Le.isString(u)&&g.push(`SameSite=${u}`),document.cookie=g.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function DU(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function _U(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function D_(e,t,r){let n=!DU(t);return e&&(n||r==!1)?_U(e,t):t}const B3=e=>e instanceof Hn?{...e}:e;function Lc(e,t){t=t||{};const r={};function n(p,y,v,C){return Le.isPlainObject(p)&&Le.isPlainObject(y)?Le.merge.call({caseless:C},p,y):Le.isPlainObject(y)?Le.merge({},y):Le.isArray(y)?y.slice():y}function l(p,y,v,C){if(Le.isUndefined(y)){if(!Le.isUndefined(p))return n(void 0,p,v,C)}else return n(p,y,v,C)}function i(p,y){if(!Le.isUndefined(y))return n(void 0,y)}function u(p,y){if(Le.isUndefined(y)){if(!Le.isUndefined(p))return n(void 0,p)}else return n(void 0,y)}function g(p,y,v){if(v in t)return n(p,y);if(v in e)return n(void 0,p)}const h={url:i,method:i,data:i,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:g,headers:(p,y,v)=>l(B3(p),B3(y),v,!0)};return Le.forEach(Object.keys({...e,...t}),function(y){const v=h[y]||l,C=v(e[y],t[y],y);Le.isUndefined(C)&&v!==g||(r[y]=C)}),r}const __=e=>{const t=Lc({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:l,xsrfCookieName:i,headers:u,auth:g}=t;if(t.headers=u=Hn.from(u),t.url=S_(D_(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),g&&u.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),Le.isFormData(r)){if(fn.hasStandardBrowserEnv||fn.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(Le.isFunction(r.getHeaders)){const h=r.getHeaders(),p=["content-type","content-length"];Object.entries(h).forEach(([y,v])=>{p.includes(y.toLowerCase())&&u.set(y,v)})}}if(fn.hasStandardBrowserEnv&&(n&&Le.isFunction(n)&&(n=n(t)),n||n!==!1&&TU(t.url))){const h=l&&i&&OU.read(i);h&&u.set(l,h)}return t},kU=typeof XMLHttpRequest<"u",PU=kU&&function(e){return new Promise(function(r,n){const l=__(e);let i=l.data;const u=Hn.from(l.headers).normalize();let{responseType:g,onUploadProgress:h,onDownloadProgress:p}=l,y,v,C,T,D;function P(){T&&T(),D&&D(),l.cancelToken&&l.cancelToken.unsubscribe(y),l.signal&&l.signal.removeEventListener("abort",y)}let k=new XMLHttpRequest;k.open(l.method.toUpperCase(),l.url,!0),k.timeout=l.timeout;function R(){if(!k)return;const M=Hn.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),F={data:!g||g==="text"||g==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:M,config:e,request:k};O_(function(L){r(L),P()},function(L){n(L),P()},F),k=null}"onloadend"in k?k.onloadend=R:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(R)},k.onabort=function(){k&&(n(new Bt("Request aborted",Bt.ECONNABORTED,e,k)),k=null)},k.onerror=function(G){const F=G&&G.message?G.message:"Network Error",U=new Bt(F,Bt.ERR_NETWORK,e,k);U.event=G||null,n(U),k=null},k.ontimeout=function(){let G=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const F=l.transitional||C_;l.timeoutErrorMessage&&(G=l.timeoutErrorMessage),n(new Bt(G,F.clarifyTimeoutError?Bt.ETIMEDOUT:Bt.ECONNABORTED,e,k)),k=null},i===void 0&&u.setContentType(null),"setRequestHeader"in k&&Le.forEach(u.toJSON(),function(G,F){k.setRequestHeader(F,G)}),Le.isUndefined(l.withCredentials)||(k.withCredentials=!!l.withCredentials),g&&g!=="json"&&(k.responseType=l.responseType),p&&([C,D]=Dh(p,!0),k.addEventListener("progress",C)),h&&k.upload&&([v,T]=Dh(h),k.upload.addEventListener("progress",v),k.upload.addEventListener("loadend",T)),(l.cancelToken||l.signal)&&(y=M=>{k&&(n(!M||M.type?new vd(null,e,k):M),k.abort(),k=null)},l.cancelToken&&l.cancelToken.subscribe(y),l.signal&&(l.signal.aborted?y():l.signal.addEventListener("abort",y)));const B=SU(l.url);if(B&&fn.protocols.indexOf(B)===-1){n(new Bt("Unsupported protocol "+B+":",Bt.ERR_BAD_REQUEST,e));return}k.send(i||null)})},IU=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,l;const i=function(p){if(!l){l=!0,g();const y=p instanceof Error?p:this.reason;n.abort(y instanceof Bt?y:new vd(y instanceof Error?y.message:y))}};let u=t&&setTimeout(()=>{u=null,i(new Bt(`timeout ${t} of ms exceeded`,Bt.ETIMEDOUT))},t);const g=()=>{e&&(u&&clearTimeout(u),u=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(i):p.removeEventListener("abort",i)}),e=null)};e.forEach(p=>p.addEventListener("abort",i));const{signal:h}=n;return h.unsubscribe=()=>Le.asap(g),h}},MU=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,l;for(;n<r;)l=n+t,yield e.slice(n,l),n=l},RU=async function*(e,t){for await(const r of LU(e))yield*MU(r,t)},LU=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},F3=(e,t,r,n)=>{const l=RU(e,t);let i=0,u,g=h=>{u||(u=!0,n&&n(h))};return new ReadableStream({async pull(h){try{const{done:p,value:y}=await l.next();if(p){g(),h.close();return}let v=y.byteLength;if(r){let C=i+=v;r(C)}h.enqueue(new Uint8Array(y))}catch(p){throw g(p),p}},cancel(h){return g(h),l.return()}},{highWaterMark:2})},U3=64*1024,{isFunction:Cg}=Le,BU=(({Request:e,Response:t})=>({Request:e,Response:t}))(Le.global),{ReadableStream:j3,TextEncoder:z3}=Le.global,V3=(e,...t)=>{try{return!!e(...t)}catch{return!1}},FU=e=>{e=Le.merge.call({skipUndefined:!0},BU,e);const{fetch:t,Request:r,Response:n}=e,l=t?Cg(t):typeof fetch=="function",i=Cg(r),u=Cg(n);if(!l)return!1;const g=l&&Cg(j3),h=l&&(typeof z3=="function"?(D=>P=>D.encode(P))(new z3):async D=>new Uint8Array(await new r(D).arrayBuffer())),p=i&&g&&V3(()=>{let D=!1;const P=new r(fn.origin,{body:new j3,method:"POST",get duplex(){return D=!0,"half"}}).headers.has("Content-Type");return D&&!P}),y=u&&g&&V3(()=>Le.isReadableStream(new n("").body)),v={stream:y&&(D=>D.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(D=>{!v[D]&&(v[D]=(P,k)=>{let R=P&&P[D];if(R)return R.call(P);throw new Bt(`Response type '${D}' is not supported`,Bt.ERR_NOT_SUPPORT,k)})});const C=async D=>{if(D==null)return 0;if(Le.isBlob(D))return D.size;if(Le.isSpecCompliantForm(D))return(await new r(fn.origin,{method:"POST",body:D}).arrayBuffer()).byteLength;if(Le.isArrayBufferView(D)||Le.isArrayBuffer(D))return D.byteLength;if(Le.isURLSearchParams(D)&&(D=D+""),Le.isString(D))return(await h(D)).byteLength},T=async(D,P)=>{const k=Le.toFiniteNumber(D.getContentLength());return k??C(P)};return async D=>{let{url:P,method:k,data:R,signal:B,cancelToken:M,timeout:G,onDownloadProgress:F,onUploadProgress:U,responseType:L,headers:V,withCredentials:j="same-origin",fetchOptions:Y}=__(D),H=t||fetch;L=L?(L+"").toLowerCase():"text";let q=IU([B,M&&M.toAbortSignal()],G),le=null;const ue=q&&q.unsubscribe&&(()=>{q.unsubscribe()});let re;try{if(U&&p&&k!=="get"&&k!=="head"&&(re=await T(V,R))!==0){let K=new r(P,{method:"POST",body:R,duplex:"half"}),te;if(Le.isFormData(R)&&(te=K.headers.get("content-type"))&&V.setContentType(te),K.body){const[ge,oe]=R3(re,Dh(L3(U)));R=F3(K.body,U3,ge,oe)}}Le.isString(j)||(j=j?"include":"omit");const J=i&&"credentials"in r.prototype,ae={...Y,signal:q,method:k.toUpperCase(),headers:V.normalize().toJSON(),body:R,duplex:"half",credentials:J?j:void 0};le=i&&new r(P,ae);let pe=await(i?H(le,Y):H(P,ae));const xe=y&&(L==="stream"||L==="response");if(y&&(F||xe&&ue)){const K={};["status","statusText","headers"].forEach(Ne=>{K[Ne]=pe[Ne]});const te=Le.toFiniteNumber(pe.headers.get("content-length")),[ge,oe]=F&&R3(te,Dh(L3(F),!0))||[];pe=new n(F3(pe.body,U3,ge,()=>{oe&&oe(),ue&&ue()}),K)}L=L||"text";let ee=await v[Le.findKey(v,L)||"text"](pe,D);return!xe&&ue&&ue(),await new Promise((K,te)=>{O_(K,te,{data:ee,headers:Hn.from(pe.headers),status:pe.status,statusText:pe.statusText,config:D,request:le})})}catch(J){throw ue&&ue(),J&&J.name==="TypeError"&&/Load failed|fetch/i.test(J.message)?Object.assign(new Bt("Network Error",Bt.ERR_NETWORK,D,le),{cause:J.cause||J}):Bt.from(J,J&&J.code,D,le)}}},UU=new Map,k_=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:l}=t,i=[n,l,r];let u=i.length,g=u,h,p,y=UU;for(;g--;)h=i[g],p=y.get(h),p===void 0&&y.set(h,p=g?new Map:FU(t)),y=p;return p};k_();const U2={http:rU,xhr:PU,fetch:{get:k_}};Le.forEach(U2,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const H3=e=>`- ${e}`,jU=e=>Le.isFunction(e)||e===null||e===!1;function zU(e,t){e=Le.isArray(e)?e:[e];const{length:r}=e;let n,l;const i={};for(let u=0;u<r;u++){n=e[u];let g;if(l=n,!jU(n)&&(l=U2[(g=String(n)).toLowerCase()],l===void 0))throw new Bt(`Unknown adapter '${g}'`);if(l&&(Le.isFunction(l)||(l=l.get(t))))break;i[g||"#"+u]=l}if(!l){const u=Object.entries(i).map(([h,p])=>`adapter ${h} `+(p===!1?"is not supported by the environment":"is not available in the build"));let g=r?u.length>1?`since :
`+u.map(H3).join(`
`):" "+H3(u[0]):"as no adapter specified";throw new Bt("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return l}const P_={getAdapter:zU,adapters:U2};function Ux(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new vd(null,e)}function $3(e){return Ux(e),e.headers=Hn.from(e.headers),e.data=Fx.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),P_.getAdapter(e.adapter||If.adapter,e)(e).then(function(n){return Ux(e),n.data=Fx.call(e,e.transformResponse,n),n.headers=Hn.from(n.headers),n},function(n){return T_(n)||(Ux(e),n&&n.response&&(n.response.data=Fx.call(e,e.transformResponse,n.response),n.response.headers=Hn.from(n.response.headers))),Promise.reject(n)})}const I_="1.13.2",zp={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{zp[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const q3={};zp.transitional=function(t,r,n){function l(i,u){return"[Axios v"+I_+"] Transitional option '"+i+"'"+u+(n?". "+n:"")}return(i,u,g)=>{if(t===!1)throw new Bt(l(u," has been removed"+(r?" in "+r:"")),Bt.ERR_DEPRECATED);return r&&!q3[u]&&(q3[u]=!0,console.warn(l(u," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,u,g):!0}};zp.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function VU(e,t,r){if(typeof e!="object")throw new Bt("options must be an object",Bt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let l=n.length;for(;l-- >0;){const i=n[l],u=t[i];if(u){const g=e[i],h=g===void 0||u(g,i,e);if(h!==!0)throw new Bt("option "+i+" must be "+h,Bt.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Bt("Unknown option "+i,Bt.ERR_BAD_OPTION)}}const gh={assertOptions:VU,validators:zp},Cl=gh.validators;let Dc=class{constructor(t){this.defaults=t||{},this.interceptors={request:new I3,response:new I3}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const i=l.stack?l.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Lc(this.defaults,r);const{transitional:n,paramsSerializer:l,headers:i}=r;n!==void 0&&gh.assertOptions(n,{silentJSONParsing:Cl.transitional(Cl.boolean),forcedJSONParsing:Cl.transitional(Cl.boolean),clarifyTimeoutError:Cl.transitional(Cl.boolean)},!1),l!=null&&(Le.isFunction(l)?r.paramsSerializer={serialize:l}:gh.assertOptions(l,{encode:Cl.function,serialize:Cl.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),gh.assertOptions(r,{baseUrl:Cl.spelling("baseURL"),withXsrfToken:Cl.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let u=i&&Le.merge(i.common,i[r.method]);i&&Le.forEach(["delete","get","head","post","put","patch","common"],D=>{delete i[D]}),r.headers=Hn.concat(u,i);const g=[];let h=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(r)===!1||(h=h&&P.synchronous,g.unshift(P.fulfilled,P.rejected))});const p=[];this.interceptors.response.forEach(function(P){p.push(P.fulfilled,P.rejected)});let y,v=0,C;if(!h){const D=[$3.bind(this),void 0];for(D.unshift(...g),D.push(...p),C=D.length,y=Promise.resolve(r);v<C;)y=y.then(D[v++],D[v++]);return y}C=g.length;let T=r;for(;v<C;){const D=g[v++],P=g[v++];try{T=D(T)}catch(k){P.call(this,k);break}}try{y=$3.call(this,T)}catch(D){return Promise.reject(D)}for(v=0,C=p.length;v<C;)y=y.then(p[v++],p[v++]);return y}getUri(t){t=Lc(this.defaults,t);const r=D_(t.baseURL,t.url,t.allowAbsoluteUrls);return S_(r,t.params,t.paramsSerializer)}};Le.forEach(["delete","get","head","options"],function(t){Dc.prototype[t]=function(r,n){return this.request(Lc(n||{},{method:t,url:r,data:(n||{}).data}))}});Le.forEach(["post","put","patch"],function(t){function r(n){return function(i,u,g){return this.request(Lc(g||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:u}))}}Dc.prototype[t]=r(),Dc.prototype[t+"Form"]=r(!0)});let HU=class M_{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(l=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](l);n._listeners=null}),this.promise.then=l=>{let i;const u=new Promise(g=>{n.subscribe(g),i=g}).then(l);return u.cancel=function(){n.unsubscribe(i)},u},t(function(i,u,g){n.reason||(n.reason=new vd(i,u,g),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new M_(function(l){t=l}),cancel:t}}};function $U(e){return function(r){return e.apply(null,r)}}function qU(e){return Le.isObject(e)&&e.isAxiosError===!0}const Qv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Qv).forEach(([e,t])=>{Qv[t]=e});function R_(e){const t=new Dc(e),r=m_(Dc.prototype.request,t);return Le.extend(r,Dc.prototype,t,{allOwnKeys:!0}),Le.extend(r,t,null,{allOwnKeys:!0}),r.create=function(l){return R_(Lc(e,l))},r}const ha=R_(If);ha.Axios=Dc;ha.CanceledError=vd;ha.CancelToken=HU;ha.isCancel=T_;ha.VERSION=I_;ha.toFormData=jp;ha.AxiosError=Bt;ha.Cancel=ha.CanceledError;ha.all=function(t){return Promise.all(t)};ha.spread=$U;ha.isAxiosError=qU;ha.mergeConfig=Lc;ha.AxiosHeaders=Hn;ha.formToJSON=e=>A_(Le.isHTMLForm(e)?new FormData(e):e);ha.getAdapter=P_.getAdapter;ha.HttpStatusCode=Qv;ha.default=ha;const{Axios:h0e,AxiosError:p0e,CanceledError:y0e,isCancel:x0e,CancelToken:b0e,VERSION:v0e,all:E0e,Cancel:w0e,isAxiosError:N0e,spread:S0e,toFormData:C0e,AxiosHeaders:A0e,HttpStatusCode:T0e,formToJSON:O0e,getAdapter:D0e,mergeConfig:_0e}=ha,mn={ACCESS_TOKEN:"accessToken",REFRESH_TOKEN:"refreshToken",ADMIN_DATA:"adminData",REMEMBER_ME:"rememberMe"},Wm=()=>localStorage.getItem(mn.REMEMBER_ME)==="true"?localStorage:sessionStorage,tl={getAccessToken:()=>{const e=Wm().getItem(mn.ACCESS_TOKEN);return console.log("[Storage] Getting access token:",e?"exists":"null"),e},getRefreshToken:()=>{const e=Wm().getItem(mn.REFRESH_TOKEN);return console.log("[Storage] Getting refresh token:",e?"exists":"null"),e},setTokens:({accessToken:e,refreshToken:t},r=!1)=>{console.log("[Storage] Setting tokens, rememberMe:",r),localStorage.setItem(mn.REMEMBER_ME,String(r));const n=r?localStorage:sessionStorage;e&&n.setItem(mn.ACCESS_TOKEN,e),t&&n.setItem(mn.REFRESH_TOKEN,t)},setAccessToken:e=>{console.log("[Storage] Updating access token"),Wm().setItem(mn.ACCESS_TOKEN,e)},clearTokens:()=>{console.log("[Storage] Clearing all tokens"),localStorage.removeItem(mn.ACCESS_TOKEN),localStorage.removeItem(mn.REFRESH_TOKEN),localStorage.removeItem(mn.REMEMBER_ME),sessionStorage.removeItem(mn.ACCESS_TOKEN),sessionStorage.removeItem(mn.REFRESH_TOKEN)},hasTokens:()=>!!tl.getAccessToken()&&!!tl.getRefreshToken()},Co={getAdmin:()=>{try{const e=Wm().getItem(mn.ADMIN_DATA),t=e?JSON.parse(e):null;return console.log("[Storage] Getting admin data:",t?t.email:"null"),t}catch(e){return console.error("[Storage] Error parsing admin data:",e),null}},setAdmin:e=>{console.log("[Storage] Setting admin data:",e?.email),Wm().setItem(mn.ADMIN_DATA,JSON.stringify(e))},clearAdmin:()=>{console.log("[Storage] Clearing admin data"),localStorage.removeItem(mn.ADMIN_DATA),sessionStorage.removeItem(mn.ADMIN_DATA)}},Jv=()=>{console.log("[Storage] Clearing all auth data"),tl.clearTokens(),Co.clearAdmin()},j2="https://motivata.synquic.com/api";console.log("[API] Initializing with base URL:",j2);const mi=ha.create({baseURL:j2,timeout:3e4,headers:{"Content-Type":"application/json"}});let Ag=!1,hh=[];const G3=(e,t=null)=>{console.log("[API] Processing queued requests:",hh.length),hh.forEach(r=>{e?r.reject(e):r.resolve(t)}),hh=[]},_h=e=>{if(!e||typeof e!="object")return e;if(Array.isArray(e))return e.map(_h);const t=["password","currentPassword","newPassword","refreshToken","accessToken"],r={...e};return Object.keys(r).forEach(n=>{t.includes(n)?r[n]="***MASKED***":typeof r[n]=="object"&&r[n]!==null&&(r[n]=_h(r[n]))}),r};mi.interceptors.request.use(e=>{const t=tl.getAccessToken();return t&&(e.headers.Authorization=`Bearer ${t}`),console.log(`[API] Request: ${e.method?.toUpperCase()} ${e.url}`,{hasAuth:!!t,body:e.data?_h(e.data):null,params:e.params||null}),e},e=>(console.error("[API] Request error:",e.message),Promise.reject(e)));mi.interceptors.response.use(e=>(console.log(`[API] Response: ${e.status} ${e.config.url}`,{message:e.data?.message,data:e.data?.data?_h(e.data.data):null}),e),async e=>{const t=e.config;if(console.error("[API] Response error:",{status:e.response?.status,url:t?.url,message:e.response?.data?.message||e.message}),e.response?.status===401&&!t._retry&&!t.url?.includes("/auth/refresh-token")&&!t.url?.includes("/auth/login")){if(console.log("[API] Token expired, attempting refresh..."),Ag)return console.log("[API] Refresh in progress, queueing request"),new Promise((n,l)=>{hh.push({resolve:n,reject:l})}).then(n=>(t.headers.Authorization=`Bearer ${n}`,mi(t))).catch(n=>Promise.reject(n));t._retry=!0,Ag=!0;const r=tl.getRefreshToken();if(!r)return console.log("[API] No refresh token available, clearing auth"),Ag=!1,Jv(),window.location.href="/login",Promise.reject(e);try{console.log("[API] Refreshing access token...");const n=await ha.post(`${j2}/web/auth/refresh-token`,{refreshToken:r}),{accessToken:l}=n.data.data;return console.log("[API] Token refresh successful"),tl.setAccessToken(l),G3(null,l),t.headers.Authorization=`Bearer ${l}`,mi(t)}catch(n){return console.error("[API] Token refresh failed:",n.response?.data?.message),G3(n,null),Jv(),window.location.href="/login",Promise.reject(n)}finally{Ag=!1}}return Promise.reject(e)});const Pe=async e=>{try{const t=await e;return{success:!0,data:t.data.data,message:t.data.message,error:null,status:t.data.status||t.status}}catch(t){const r={success:!1,data:null,message:t.response?.data?.message||"An unexpected error occurred",error:t.response?.data?.error||t.message,status:t.response?.status||500};return console.error("[API] Handled error:",r),r}},ke={get:(e,t={})=>mi.get(e,t),post:(e,t={},r={})=>mi.post(e,t,r),put:(e,t={},r={})=>mi.put(e,t,r),delete:(e,t={})=>mi.delete(e,t),patch:(e,t={},r={})=>mi.patch(e,t,r)},mc={LOGIN:"/web/auth/login",REGISTER:"/web/auth/register",LOGOUT:"/web/auth/logout",REFRESH_TOKEN:"/web/auth/refresh-token",PROFILE:"/web/auth/profile",CHANGE_PASSWORD:"/web/auth/change-password"},xo={login:async(e,t=!1)=>{console.log("[Auth] Attempting login for:",e.username);const r=await Pe(ke.post(mc.LOGIN,{username:e.username,password:e.password}));if(r.success&&r.data){const{admin:n,tokens:l}=r.data;tl.setTokens({accessToken:l.accessToken,refreshToken:l.refreshToken},t),Co.setAdmin(n),console.log("[Auth] Login successful for:",n.username),console.log("[Auth] Admin role:",n.role)}else console.error("[Auth] Login failed:",r.message);return r},register:async(e,t=!1)=>{console.log("[Auth] Attempting registration for:",e.username);const r=await Pe(ke.post(mc.REGISTER,e));if(r.success&&r.data){const{admin:n,tokens:l}=r.data;tl.setTokens({accessToken:l.accessToken,refreshToken:l.refreshToken},t),Co.setAdmin(n),console.log("[Auth] Registration successful for:",n.username)}else console.error("[Auth] Registration failed:",r.message);return r},logout:async()=>{console.log("[Auth] Attempting logout");try{await Pe(ke.post(mc.LOGOUT)),console.log("[Auth] Server logout successful")}catch(e){console.warn("[Auth] Server logout failed, clearing local data anyway:",e.message)}return Jv(),console.log("[Auth] Local auth data cleared"),{success:!0,message:"Logged out successfully"}},getProfile:async()=>{console.log("[Auth] Fetching profile");const e=await Pe(ke.get(mc.PROFILE));return e.success&&e.data&&(Co.setAdmin(e.data.admin),console.log("[Auth] Profile fetched for:",e.data.admin.username)),e},updateProfile:async e=>{console.log("[Auth] Updating profile");const t=await Pe(ke.put(mc.PROFILE,e));return t.success&&t.data&&(Co.setAdmin(t.data.admin),console.log("[Auth] Profile updated successfully")),t},changePassword:async e=>{console.log("[Auth] Changing password");const t=await Pe(ke.put(mc.CHANGE_PASSWORD,e));return t.success?console.log("[Auth] Password changed successfully"):console.error("[Auth] Password change failed:",t.message),t},refreshToken:async()=>{const e=tl.getRefreshToken();if(!e)return console.log("[Auth] No refresh token available"),{success:!1,accessToken:null,error:"No refresh token"};console.log("[Auth] Refreshing access token");const t=await Pe(ke.post(mc.REFRESH_TOKEN,{refreshToken:e}));return t.success&&t.data?(tl.setAccessToken(t.data.accessToken),console.log("[Auth] Token refreshed successfully"),{success:!0,accessToken:t.data.accessToken,error:null}):(console.error("[Auth] Token refresh failed:",t.message),{success:!1,accessToken:null,error:t.message})},isAuthenticated:()=>{const e=tl.hasTokens();return console.log("[Auth] Checking authentication:",e),e},getStoredAdmin:()=>Co.getAdmin(),hasRole:e=>{const t=Co.getAdmin();return t?(Array.isArray(e)?e:[e]).includes(t.role):!1},hasAccess:e=>{const t=Co.getAdmin();return t&&t.access?.includes(e)||!1}},L_=w.createContext(null),GU=({children:e})=>{const[t,r]=w.useState(null),[n,l]=w.useState(!1),[i,u]=w.useState(!0),[g,h]=w.useState(null);w.useEffect(()=>{(async()=>{console.log("[AuthContext] Initializing auth state...");try{if(xo.isAuthenticated()){console.log("[AuthContext] Found stored tokens, fetching profile...");const G=await xo.getProfile();G.success?(r(G.data.admin),l(!0),console.log("[AuthContext] Auth initialized successfully")):(console.log("[AuthContext] Profile fetch failed, token may be expired"),l(!1),r(null))}else console.log("[AuthContext] No stored tokens found"),l(!1),r(null)}catch(G){console.error("[AuthContext] Error initializing auth:",G),l(!1),r(null)}finally{u(!1)}})()},[]);const p=w.useCallback(async(M,G=!1)=>{console.log("[AuthContext] Login attempt"),h(null),u(!0);try{const F=await xo.login(M,G);return F.success?(r(F.data.admin),l(!0),console.log("[AuthContext] Login successful"),{success:!0,data:F.data}):(h(F.message),console.error("[AuthContext] Login failed:",F.message),{success:!1,error:F.message})}catch(F){const U="An unexpected error occurred during login";return h(U),console.error("[AuthContext] Login error:",F),{success:!1,error:U}}finally{u(!1)}},[]),y=w.useCallback(async(M,G=!1)=>{console.log("[AuthContext] Register attempt"),h(null),u(!0);try{const F=await xo.register(M,G);return F.success?(r(F.data.admin),l(!0),console.log("[AuthContext] Registration successful"),{success:!0,data:F.data}):(h(F.message),console.error("[AuthContext] Registration failed:",F.message),{success:!1,error:F.message})}catch(F){const U="An unexpected error occurred during registration";return h(U),console.error("[AuthContext] Registration error:",F),{success:!1,error:U}}finally{u(!1)}},[]),v=w.useCallback(async()=>{console.log("[AuthContext] Logout attempt"),u(!0);try{return await xo.logout(),r(null),l(!1),h(null),console.log("[AuthContext] Logout successful"),{success:!0}}catch(M){return console.error("[AuthContext] Logout error:",M),r(null),l(!1),{success:!0}}finally{u(!1)}},[]),C=w.useCallback(async()=>{console.log("[AuthContext] Refreshing profile");try{const M=await xo.getProfile();return M.success?(r(M.data.admin),console.log("[AuthContext] Profile refreshed"),{success:!0,data:M.data.admin}):(console.error("[AuthContext] Profile refresh failed:",M.message),{success:!1,error:M.message})}catch(M){return console.error("[AuthContext] Profile refresh error:",M),{success:!1,error:"Failed to refresh profile"}}},[]),T=w.useCallback(async M=>{console.log("[AuthContext] Updating profile"),h(null);try{const G=await xo.updateProfile(M);return G.success?(r(G.data.admin),console.log("[AuthContext] Profile updated"),{success:!0,data:G.data.admin}):(h(G.message),{success:!1,error:G.message})}catch{const F="Failed to update profile";return h(F),{success:!1,error:F}}},[]),D=w.useCallback(async M=>{console.log("[AuthContext] Changing password"),h(null);try{const G=await xo.changePassword(M);return G.success?(console.log("[AuthContext] Password changed"),{success:!0}):(h(G.message),{success:!1,error:G.message})}catch{const F="Failed to change password";return h(F),{success:!1,error:F}}},[]),P=w.useCallback(()=>{h(null)},[]),k=w.useCallback(M=>t?(Array.isArray(M)?M:[M]).includes(t.role):!1,[t]),R=w.useCallback(M=>t&&t.access?.includes(M)||!1,[t]),B={admin:t,isAuthenticated:n,isLoading:i,error:g,login:p,register:y,logout:v,refreshProfile:C,updateProfile:T,changePassword:D,clearError:P,hasRole:k,hasAccess:R};return a.createElement(L_.Provider,{value:B},e)},hn=()=>{const e=w.useContext(L_);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},B_=()=>a.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-100"},a.createElement("div",{className:"flex flex-col items-center gap-4"},a.createElement("div",{className:"w-12 h-12 border-4 border-gray-800 border-t-transparent rounded-full animate-spin"}),a.createElement("p",{className:"text-gray-600"},"Loading..."))),Y3=()=>a.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-100"},a.createElement("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center max-w-md"},a.createElement("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},a.createElement("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}))),a.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Access Denied"),a.createElement("p",{className:"text-gray-600 mb-6"},"You don't have permission to access this page."),a.createElement("a",{href:"/dashboard",className:"inline-block px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Go to Dashboard"))),YU=({children:e,allowedRoles:t=[],requiredAccess:r=[],redirectTo:n="/login"})=>{const{isAuthenticated:l,isLoading:i,admin:u,hasRole:g,hasAccess:h}=hn(),p=Us();return console.log("[ProtectedRoute] Checking access:",{isAuthenticated:l,isLoading:i,path:p.pathname,adminRole:u?.role}),i?(console.log("[ProtectedRoute] Loading auth state..."),a.createElement(B_,null)):l?t.length>0&&!g(t)?(console.log("[ProtectedRoute] Access denied - role mismatch:",{required:t,actual:u?.role}),a.createElement(Y3,null)):r.length>0&&!r.every(v=>h(v))?(console.log("[ProtectedRoute] Access denied - missing permissions:",{required:r,actual:u?.access}),a.createElement(Y3,null)):(console.log("[ProtectedRoute] Access granted"),e):(console.log("[ProtectedRoute] Not authenticated, redirecting to:",n),a.createElement(Oh,{to:n,state:{from:p},replace:!0}))},XU=({children:e,redirectTo:t="/dashboard"})=>{const{isAuthenticated:r,isLoading:n}=hn(),l=Us();if(console.log("[PublicRoute] Checking:",{isAuthenticated:r,isLoading:n}),n)return a.createElement(B_,null);if(r){const i=l.state?.from?.pathname||t;return console.log("[PublicRoute] Already authenticated, redirecting to:",i),a.createElement(Oh,{to:i,replace:!0})}return e};const WU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),KU=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),X3=e=>{const t=KU(e);return t.charAt(0).toUpperCase()+t.slice(1)},F_=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),ZU=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var QU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const JU=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:l="",children:i,iconNode:u,...g},h)=>w.createElement("svg",{ref:h,...QU,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:F_("lucide",l),...!i&&!ZU(g)&&{"aria-hidden":"true"},...g},[...u.map(([p,y])=>w.createElement(p,y)),...Array.isArray(i)?i:[i]]));const tt=(e,t)=>{const r=w.forwardRef(({className:n,...l},i)=>w.createElement(JU,{ref:i,iconNode:t,className:F_(`lucide-${WU(X3(e))}`,`lucide-${e}`,n),...l}));return r.displayName=X3(e),r};const ej=[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"1qyhux"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]],tj=tt("armchair",ej);const rj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],aj=tt("arrow-left",rj);const nj=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],W3=tt("award",nj);const sj=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],lj=tt("banknote",sj);const ij=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],kh=tt("bell",ij);const oj=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],cj=tt("briefcase",oj);const uj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],dj=tt("calendar-check",uj);const mj=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],K3=tt("calendar-range",mj);const fj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]],Tg=tt("calendar-x",fj);const gj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],qr=tt("calendar",gj);const hj=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ol=tt("chart-column",hj);const pj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],En=tt("check",pj);const yj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ll=tt("chevron-down",yj);const xj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],U_=tt("chevron-right",xj);const bj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],j_=tt("chevron-left",bj);const vj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ej=tt("chevron-up",vj);const wj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Xt=tt("circle-alert",wj);const Nj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],js=tt("circle-check-big",Nj);const Sj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],rf=tt("circle-check",Sj);const Cj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ph=tt("circle-question-mark",Cj);const Aj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Sn=tt("circle-x",Aj);const Tj=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],yh=tt("clipboard-list",Tj);const Oj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ea=tt("clock",Oj);const Dj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Qu=tt("copy",Dj);const _j=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Vp=tt("credit-card",_j);const kj=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Pj=tt("crown",kj);const Ij=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Mj=tt("dollar-sign",Ij);const Rj=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Lj=tt("download",Rj);const Bj=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ed=tt("external-link",Bj);const Fj=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],z_=tt("eye-off",Fj);const Uj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mr=tt("eye",Uj);const jj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],zj=tt("file-play",jj);const Vj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],eE=tt("file-spreadsheet",Vj);const Hj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ju=tt("file-text",Hj);const $j=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Bl=tt("funnel",$j);const qj=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Gj=tt("gift",qj);const Yj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],tE=tt("globe",Yj);const Xj=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Hp=tt("grip-vertical",Xj);const Wj=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],z2=tt("hash",Wj);const Kj=[["path",{d:"M15 15.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"nrt1m3"}],["path",{d:"M21 12.17V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6",key:"99hgts"}],["path",{d:"m6 21 5-5",key:"1wyjai"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],Zj=tt("image-play",Kj);const Qj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Bc=tt("image",Qj);const Jj=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],V2=tt("indian-rupee",Jj);const ez=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],tz=tt("info",ez);const rz=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],az=tt("layout-dashboard",rz);const nz=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],V_=tt("layout-grid",nz);const sz=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],lz=tt("link",sz);const iz=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],Ph=tt("list-checks",iz);const oz=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],H2=tt("list",oz);const cz=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ct=tt("loader-circle",cz);const uz=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],dz=tt("lock",uz);const mz=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],fz=tt("log-out",mz);const gz=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],$2=tt("mail",gz);const hz=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],q2=tt("map-pin",hz);const pz=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],af=tt("message-circle",pz);const yz=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],H_=tt("message-square",yz);const xz=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],wd=tt("package",xz);const bz=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Z3=tt("pen-line",bz);const vz=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],$_=tt("pen",vz);const Ez=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],wz=tt("percent",Ez);const Nz=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],vi=tt("phone",Nz);const Sz=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],q_=tt("play",Sz);const Cz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kr=tt("plus",Cz);const Az=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$n=tt("refresh-cw",Az);const Tz=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ko=tt("rotate-ccw",Tz);const Oz=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Dz=tt("save",Oz);const _z=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],kz=tt("scan-line",_z);const Pz=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ta=tt("search",Pz);const Iz=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Mz=tt("settings-2",Iz);const Rz=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Lz=tt("settings",Rz);const Bz=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Fz=tt("share-2",Bz);const Uz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],jz=tt("shield-check",Uz);const zz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Vz=tt("shield",zz);const Hz=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],$z=tt("sliders-horizontal",Hz);const qz=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Gz=tt("square-check-big",qz);const Yz=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],cn=tt("square-pen",Yz);const Xz=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],G_=tt("star",Xz);const Wz=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ed=tt("tag",Wz);const Kz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],td=tt("target",Kz);const Zz=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],Qz=tt("text-align-start",Zz);const Jz=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],Fu=tt("ticket",Jz);const eV=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Fl=tt("toggle-left",eV);const tV=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Ei=tt("toggle-right",tV);const rV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ur=tt("trash-2",rV);const aV=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],nV=tt("trash",aV);const sV=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Y_=tt("trending-up",sV);const lV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$p=tt("triangle-alert",lV);const iV=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Yu=tt("trophy",iV);const oV=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],X_=tt("upload",oV);const cV=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Nd=tt("user-check",cV);const uV=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],dV=tt("user-cog",uV);const mV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],W_=tt("user-plus",mV);const fV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Mf=tt("user-x",fV);const gV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ds=tt("user",gV);const hV=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],pV=tt("users-round",hV);const yV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],kl=tt("users",yV);const xV=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],yi=tt("video",xV);const bV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Gr=tt("x",bV);const vV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],K_=tt("zap",vV),Z_="/assets/Motivata-Dba061jL.png",EV="/assets/logo2-NMKQARNi.png";function wV({activeMenu:e,collapsed:t,isOpen:r,onClose:n}){const l=Rp(),{logout:i,admin:u}=hn(),g=()=>{i(),l("/login")},h=[{id:"dashboard",label:"Dashboard",icon:az,path:"/dashboard",color:"blue"},{id:"events",label:"Events",icon:qr,path:"/events",color:"purple"},{id:"users",label:"Users",icon:dV,path:"/users",color:"green"},{id:"admins",label:"Admins",icon:jz,path:"/admins",color:"orange"},{id:"cashtickets",label:"Cash Tickets",icon:lj,path:"/cash-tickets",color:"cyan"},{id:"vouchers",label:"Vouchers",icon:Gj,path:"/vouchers",color:"pink"},{id:"sessions",label:"Sessions",icon:yi,path:"/sessions",color:"indigo"},{id:"quizes",label:"Quizes",icon:yh,path:"/quizes",color:"amber"},{id:"challenges",label:"Challenges",icon:Yu,path:"/challenges",color:"emerald"},{id:"polls",label:"Polls",icon:ol,path:"/polls",color:"rose"},{id:"stories",label:"Stories",icon:Zj,path:"/stories",color:"sky"},{id:"memberships",label:"Memberships",icon:Pj,path:"/memberships",color:"slate"},{id:"settings",label:"Settings",icon:Lz,path:"/settings",color:"gray"},{id:"clubs",label:"Clubs",icon:pV,path:"/clubs",color:"fuchsia"},{id:"scan-qr",label:"Scan QR",icon:kz,path:"/scan-qr",color:"teal"},{id:"ticket-reshare",label:"Ticket Reshare",icon:Fz,path:"/ticket-reshare",color:"violet"},{id:"services",label:"Services",icon:cj,path:"/services",color:"blue"},{id:"service-orders",label:"Service Orders",icon:Vp,path:"/service-orders",color:"green"},{id:"service-requests",label:"Service Requests",icon:Ju,path:"/service-requests",color:"amber"},{id:"user-subscriptions",label:"Subscriptions",icon:Nd,path:"/user-subscriptions",color:"purple"}],p=u?.name||u?.username||"Admin",y=u?.email||"admin@motivata.com",v=u?.role||"Administrator",C=T=>T.split(" ").map(D=>D[0]).join("").toUpperCase().slice(0,2);return a.createElement("aside",{className:`
        ${t?"lg:w-20":"lg:w-72"}
        fixed lg:static inset-y-0 left-0 z-50
        w-72
        ${r?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        bg-gradient-to-b from-white to-gray-50/50
        border-r border-gray-200
        shadow-2xl lg:shadow-none
        flex flex-col
        transition-all duration-300 ease-in-out
        h-screen
        overflow-hidden
      `},a.createElement("div",{className:"p-5 lg:p-6 border-b border-gray-200/80 shrink-0 bg-white/80 backdrop-blur-sm"},a.createElement("div",{className:"flex items-start justify-between"},a.createElement("div",{className:`flex flex-col ${t?"items-center":"items-start"} min-w-0 flex-1`},a.createElement("img",{src:t?EV:Z_,alt:"Motivata",className:`${t?"h-12 w-12":"h-16"} object-contain`}),!t&&a.createElement("p",{className:"text-xs text-gray-500 font-medium -mt-1 ml-4"},"Admin Panel")),a.createElement("button",{onClick:n,className:"lg:hidden p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-all active:scale-95","aria-label":"Close sidebar"},a.createElement(Gr,{className:"h-5 w-5"})))),a.createElement("nav",{className:"flex-1 p-3 lg:p-4 overflow-y-auto overflow-x-hidden custom-scrollbar"},a.createElement("ul",{className:"space-y-1"},h.map(T=>{const D=e===T.id;return a.createElement("li",{key:T.id},a.createElement(M2,{to:T.path,className:`
                    w-full flex items-center gap-3 px-3 py-3 rounded-xl
                    transition-all duration-200 group relative
                    ${D?"bg-gradient-to-r from-gray-800 to-gray-900 text-white shadow-lg shadow-gray-500/30":"text-gray-700 hover:bg-gray-100/80 hover:translate-x-1"}
                    ${t?"lg:justify-center lg:px-2":""}
                  `,title:t?T.label:""},a.createElement(T.icon,{className:`
                      h-5 w-5 shrink-0 transition-transform duration-200
                      ${D?"scale-110":"group-hover:scale-110"}
                    `}),!t&&a.createElement("span",{className:"font-semibold text-sm truncate"},T.label)))}))),a.createElement("div",{className:"border-t border-gray-200/80 shrink-0 bg-white/50 backdrop-blur-sm"},a.createElement("div",{className:`p-4 ${t?"lg:p-2":""}`},a.createElement("div",{className:`
              flex items-center gap-3 p-3 rounded-xl
              bg-gradient-to-br from-gray-50 to-gray-100/50
              border border-gray-200/50
              transition-all duration-200 hover:shadow-md
              ${t?"lg:justify-center lg:p-2":""}
            `,title:t?`${p} - ${v}`:""},a.createElement("div",{className:"relative shrink-0"},a.createElement("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-800 via-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-sm shadow-md ring-2 ring-white"},C(p)),a.createElement("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white shadow-sm"})),!t&&a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-sm font-bold text-gray-900 truncate"},p),a.createElement("p",{className:"text-xs text-gray-600 truncate"},y),a.createElement("div",{className:"flex items-center gap-1 mt-1"},a.createElement("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-[10px] font-semibold bg-blue-100 text-gray-900 border border-blue-200"},v))))),a.createElement("div",{className:"p-4 pt-0"},a.createElement("button",{onClick:g,className:`
              w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl
              bg-gradient-to-r from-red-50 to-red-100/50
              text-red-600 font-semibold text-sm
              border border-red-200
              hover:from-red-100 hover:to-red-200/50
              hover:border-red-300 hover:shadow-md
              active:scale-[0.98]
              transition-all duration-200
              group
              ${t?"lg:px-2":""}
            `,title:"Logout"},a.createElement(fz,{className:"h-4 w-4 shrink-0 group-hover:scale-110 transition-transform"}),!t&&a.createElement("span",null,"Logout")))))}function NV({toggleSidebar:e}){const[t,r]=w.useState(!1),[n,l]=w.useState("");return a.createElement("header",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 px-4 lg:px-6 py-3 lg:py-4 flex items-center justify-between flex-shrink-0 sticky top-0 z-30 shadow-sm"},a.createElement("div",{className:"flex items-center gap-3 lg:gap-4 flex-1"},a.createElement("button",{onClick:e,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all hover:scale-105 active:scale-95 group","aria-label":"Toggle Sidebar"},a.createElement("div",{className:"relative h-6 w-6"},a.createElement("span",{className:"absolute left-0 top-1 w-6 h-0.5 bg-gray-600 rounded transition-all group-hover:w-5"}),a.createElement("span",{className:"absolute left-0 top-3 w-6 h-0.5 bg-gray-600 rounded"}),a.createElement("span",{className:"absolute left-0 top-5 w-6 h-0.5 bg-gray-600 rounded transition-all group-hover:w-4"}))),a.createElement("div",{className:"hidden lg:block"},a.createElement("h1",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Welcome back"),a.createElement("p",{className:"text-xs text-gray-500"},new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})))),a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"relative hidden md:block"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),a.createElement("input",{type:"text",placeholder:"Search anything...",value:n,onChange:i=>l(i.target.value),className:"pl-10 pr-4 py-2 w-64 lg:w-80 bg-gray-50 border border-gray-200 rounded-lg focus:border-gray-800 outline-none text-sm transition-all placeholder:text-gray-400"}),n&&a.createElement("button",{onClick:()=>l(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-0.5 hover:bg-gray-200 rounded"},a.createElement(Gr,{className:"h-3.5 w-3.5 text-gray-400"}))),a.createElement("button",{onClick:()=>r(!t),className:"md:hidden p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all active:scale-95","aria-label":"Search"},a.createElement(ta,{className:"h-5 w-5"})),a.createElement("button",{className:"relative p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all hover:scale-105 active:scale-95 group","aria-label":"Notifications",title:"Notifications"},a.createElement(kh,{className:"h-5 w-5 group-hover:animate-pulse"}),a.createElement("span",{className:"absolute top-1.5 right-1.5 h-2 w-2 bg-red-500 rounded-full ring-2 ring-white"}),a.createElement("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center ring-2 ring-white"},"3"))),t&&a.createElement("div",{className:"md:hidden fixed inset-x-0 top-[57px] bg-white border-b border-gray-200 p-4 shadow-lg z-40 animate-in slide-in-from-top"},a.createElement("div",{className:"relative"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",placeholder:"Search anything...",autoFocus:!0,value:n,onChange:i=>l(i.target.value),className:"w-full pl-10 pr-10 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:border-gray-800 outline-none text-sm"}),a.createElement("button",{onClick:()=>{r(!1),l("")},className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 rounded"},a.createElement(Gr,{className:"h-4 w-4 text-gray-400"})))))}function SV(){const[e,t]=w.useState(!1),[r,n]=w.useState(!1),l=Us(),i=()=>{window.innerWidth<1024?n(!r):t(!e)},u=()=>n(!1);w.useEffect(()=>{n(!1)},[l.pathname]),w.useEffect(()=>{const p=()=>{window.innerWidth>=1024&&n(!1)};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const g={"/dashboard":"dashboard","/events":"events","/enrollments":"enrollments","/coupons":"coupons","/users":"users","/admins":"admins","/payments":"payments","/cash-tickets":"cashtickets","/vouchers":"vouchers","/sessions":"sessions","/quizes":"quizes","/challenges":"challenges","/polls":"polls","/stories":"stories","/memberships":"memberships","/settings":"settings","/clubs":"clubs","/scan-qr":"scan-qr","/ticket-reshare":"ticket-reshare","/services":"services","/service-orders":"service-orders","/service-requests":"service-requests","/user-subscriptions":"user-subscriptions"},h=()=>g[l.pathname]||"dashboard";return a.createElement("div",{className:"h-screen bg-gradient-to-br from-gray-50 via-gray-50 to-blue-50/30 flex overflow-hidden"},r&&a.createElement("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden transition-opacity",onClick:u}),a.createElement(wV,{activeMenu:h(),collapsed:e,isOpen:r,onClose:u}),a.createElement("div",{className:"flex-1 flex flex-col overflow-hidden"},a.createElement(NV,{toggleSidebar:i}),a.createElement("main",{className:"flex-1 overflow-auto custom-scrollbar"},a.createElement("div",{className:"p-4 sm:p-6 lg:p-8 max-w-[1920px] mx-auto"},a.createElement(LB,null)))))}function CV(){const[e,t]=w.useState(""),[r,n]=w.useState(""),[l,i]=w.useState(!1),[u,g]=w.useState(!1),[h,p]=w.useState(!1),[y,v]=w.useState(""),C=Rp(),T=Us(),{login:D}=hn(),P=T.state?.from?.pathname||"/dashboard",k=async R=>{if(R.preventDefault(),v(""),!e.trim()){v("Username is required");return}if(!r.trim()){v("Password is required");return}console.log("[Login] Attempting login for:",e),p(!0);try{const B=await D({username:e,password:r},u);B.success?(console.log("[Login] Login successful, redirecting to:",P),C(P,{replace:!0})):(console.error("[Login] Login failed:",B.error),B.error?.includes("deactivated")?v("Your account has been deactivated. Please contact an administrator."):B.error?.includes("Invalid")?v("Invalid username or password. Please try again."):v(B.error||"Login failed. Please try again."))}catch(B){console.error("[Login] Unexpected error:",B),v("An unexpected error occurred. Please try again.")}finally{p(!1)}};return a.createElement("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4"},a.createElement("div",{className:"w-full max-w-md"},a.createElement("div",{className:"text-center mb-8"},a.createElement("img",{src:Z_,alt:"Motivata",className:"h-16 mx-auto mb-4"}),a.createElement("p",{className:"text-gray-600"},"Sign in to your account")),a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-8"},y&&a.createElement("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},a.createElement(Xt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},y)),a.createElement("form",{onSubmit:k,className:"space-y-6"},a.createElement("div",null,a.createElement("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2"},"Username"),a.createElement("div",{className:"relative"},a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},a.createElement(ds,{className:"h-5 w-5 text-gray-400"})),a.createElement("input",{id:"username",type:"text",value:e,onChange:R=>t(R.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-all disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter your username",disabled:h,autoComplete:"username"}))),a.createElement("div",null,a.createElement("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2"},"Password"),a.createElement("div",{className:"relative"},a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},a.createElement(dz,{className:"h-5 w-5 text-gray-400"})),a.createElement("input",{id:"password",type:l?"text":"password",value:r,onChange:R=>n(R.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-all disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter your password",disabled:h,autoComplete:"current-password"}),a.createElement("button",{type:"button",onClick:()=>i(!l),className:"absolute inset-y-0 right-0 pr-3 flex items-center disabled:cursor-not-allowed",disabled:h,tabIndex:-1},l?a.createElement(z_,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):a.createElement(Mr,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})))),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("label",{className:"flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:u,onChange:R=>g(R.target.checked),className:"h-4 w-4 text-gray-800 border-gray-300 rounded focus:ring-gray-700 cursor-pointer",disabled:h}),a.createElement("span",{className:"ml-2 text-sm text-gray-600"},"Remember me")),a.createElement("a",{href:"#",className:"text-sm text-gray-800 hover:text-black font-medium"},"Forgot password?")),a.createElement("button",{type:"submit",disabled:h,className:"w-full bg-gray-800 text-white py-3 px-4 rounded-lg font-medium hover:bg-gray-900 focus:ring-4 focus:ring-gray-300 transition-all disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2"},h?a.createElement(a.Fragment,null,a.createElement(ct,{className:"h-5 w-5 animate-spin"}),"Signing in..."):"Log In")))))}var Q_={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Q3=a.createContext&&a.createContext(Q_),AV=["attr","size","title"];function TV(e,t){if(e==null)return{};var r=OV(e,t),n,l;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)n=i[l],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function OV(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ih(){return Ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ih.apply(this,arguments)}function J3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Mh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J3(Object(r),!0).forEach(function(n){DV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DV(e,t,r){return t=_V(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _V(e){var t=kV(e,"string");return typeof t=="symbol"?t:t+""}function kV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J_(e){return e&&e.map((t,r)=>a.createElement(t.tag,Mh({key:r},t.attr),J_(t.child)))}function Vt(e){return t=>a.createElement(PV,Ih({attr:Mh({},e.attr)},t),J_(e.child))}function PV(e){var t=r=>{var{attr:n,size:l,title:i}=e,u=TV(e,AV),g=l||r.size||"1em",h;return r.className&&(h=r.className),e.className&&(h=(h?h+" ":"")+e.className),a.createElement("svg",Ih({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,u,{className:h,style:Mh(Mh({color:e.color||r.color},r.style),e.style),height:g,width:g,xmlns:"http://www.w3.org/2000/svg"}),i&&a.createElement("title",null,i),e.children)};return Q3!==void 0?a.createElement(Q3.Consumer,null,r=>t(r)):t(Q_)}function IV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},child:[]},{tag:"path",attr:{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},child:[]}]})(e)}function MV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"},child:[]}]})(e)}function eA(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"},child:[]}]})(e)}function rd(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(e)}function tA(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"},child:[]}]})(e)}function RV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"},child:[]}]})(e)}function LV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"},child:[]}]})(e)}function BV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(e)}function ek(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"},child:[]}]})(e)}function FV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"},child:[]}]})(e)}function rA(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(e)}function UV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M8 5v14l11-7z"},child:[]}]})(e)}function jV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"},child:[]}]})(e)}function zV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(e)}function VV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"},child:[]}]})(e)}function Km(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 21h-2v-2h2v2zm-2-7h-2v5h2v-5zm8-2h-2v4h2v-4zm-2-2h-2v2h2v-2zM7 12H5v2h2v-2zm-2-2H3v2h2v-2zm7-5h2V3h-2v2zm-7.5-.5v3h3v-3h-3zM9 9H3V3h6v6zm-4.5 7.5v3h3v-3h-3zM9 21H3v-6h6v6zm7.5-16.5v3h3v-3h-3zM21 9h-6V3h6v6zm-2 10v-3h-4v2h2v3h4v-2h-2zm-2-7h-4v2h4v-2zm-4-2H7v2h2v2h2v-2h2v-2zm1-1V7h-2V5h-2v4h4zM6.75 5.25h-1.5v1.5h1.5v-1.5zm0 12h-1.5v1.5h1.5v-1.5zm12-12h-1.5v1.5h1.5v-1.5z"},child:[]}]})(e)}function Og(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.5 6.5v3h-3v-3h3M11 5H5v6h6V5zm-1.5 9.5v3h-3v-3h3M11 13H5v6h6v-6zm6.5-6.5v3h-3v-3h3M19 5h-6v6h6V5zm-6 8h1.5v1.5H13V13zm1.5 1.5H16V16h-1.5v-1.5zM16 13h1.5v1.5H16V13zm-3 3h1.5v1.5H13V16zm1.5 1.5H16V19h-1.5v-1.5zM16 16h1.5v1.5H16V16zm1.5-1.5H19V16h-1.5v-1.5zm0 3H19V19h-1.5v-1.5zM22 7h-2V4h-3V2h5v5zm0 15v-5h-2v3h-3v2h5zM2 22h5v-2H4v-3H2v5zM2 2v5h2V4h3V2H2z"},child:[]}]})(e)}function jx(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(e)}function HV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"},child:[]}]})(e)}function Rh(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(e)}function $V(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m21.16 7.26-1.41-1.41-3.56 3.55 1.41 1.41s3.45-3.52 3.56-3.55zM11 3h2v5h-2zM6.4 10.81 7.81 9.4 4.26 5.84 2.84 7.26c.11.03 3.56 3.55 3.56 3.55zM20 12h-5c0 1.66-1.34 3-3 3s-3-1.34-3-3H4c-1.1 0-2 .9-2 2v5c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2z"},child:[]}]})(e)}function qV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M16 7h-1l-1-1h-4L9 7H8c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-4 7c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},child:[]},{tag:"path",attr:{d:"m8.57.51 4.48 4.48V2.04c4.72.47 8.48 4.23 8.95 8.95h2C23.34 3.02 15.49-1.59 8.57.51zM10.95 21.96c-4.72-.47-8.48-4.23-8.95-8.95H0c.66 7.97 8.51 12.58 15.43 10.48l-4.48-4.48v2.95z"},child:[]}]})(e)}function aA(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.79 21 3 11.21v2c0 .53.21 1.04.59 1.41l7.79 7.79c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83L12.79 21z"},child:[]},{tag:"path",attr:{d:"M11.38 17.41c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83L12.63.58A2.04 2.04 0 0 0 11.21 0H5C3.9 0 3 .9 3 2v6.21c0 .53.21 1.04.59 1.41l7.79 7.79zM7.25 3a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5z"},child:[]}]})(e)}function GV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(e)}function YV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"},child:[]}]})(e)}function XV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}function tk(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(e)}function nA(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M22 10V6a2 2 0 0 0-2-2H4c-1.1 0-1.99.89-1.99 2v4c1.1 0 1.99.9 1.99 2s-.89 2-2 2v4c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-4c-1.1 0-2-.9-2-2s.9-2 2-2zm-9 7.5h-2v-2h2v2zm0-4.5h-2v-2h2v2zm0-4.5h-2v-2h2v2z"},child:[]}]})(e)}function WV(e){return Vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},child:[]}]})(e)}function rk(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(r=rk(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ea(){for(var e,t,r=0,n="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=rk(e))&&(n&&(n+=" "),n+=t);return n}function KV(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}KV(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var G2=e=>typeof e=="number"&&!isNaN(e),nf=e=>typeof e=="string",ak=e=>typeof e=="function",ZV=e=>nf(e)||G2(e),QV=e=>w.isValidElement(e)||nf(e)||ak(e)||G2(e),JV=1,nk=()=>`${JV++}`,Pl=new Map,rE=[],sA=new Set,sk=()=>Pl.size>0,eH=(e,{containerId:t})=>{var r;return(r=Pl.get(t||1))==null?void 0:r.toasts.get(e)};function tH(e,t){var r;if(t)return!!((r=Pl.get(t))!=null&&r.isToastActive(e));let n=!1;return Pl.forEach(l=>{l.isToastActive(e)&&(n=!0)}),n}function rH(e){if(!sk()){rE=rE.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||ZV(e))Pl.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Pl.get(e.containerId);t?t.removeToast(e.id):Pl.forEach(r=>{r.removeToast(e.id)})}}var aH=(e={})=>{Pl.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function nH(e,t){QV(e)&&(sk()||rE.push({content:e,options:t}),Pl.forEach(r=>{r.buildToast(e,t)}))}function lk(e,t){Pl.forEach(r=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===r.id)&&r.toggle(e,t?.id)})}function sH(e){return sA.add(e),()=>{sA.delete(e)}}function lH(e){return e&&(nf(e.toastId)||G2(e.toastId))?e.toastId:nk()}function Rf(e,t){return nH(e,t),t.toastId}function qp(e,t){return{...t,type:t&&t.type||e,toastId:lH(t)}}function Gp(e){return(t,r)=>Rf(t,qp(e,r))}function vt(e,t){return Rf(e,qp("default",t))}vt.loading=(e,t)=>Rf(e,qp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function iH(e,{pending:t,error:r,success:n},l){let i;t&&(i=nf(t)?vt.loading(t,l):vt.loading(t.render,{...l,...t}));let u={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},g=(p,y,v)=>{if(y==null){vt.dismiss(i);return}let C={type:p,...u,...l,data:v},T=nf(y)?{render:y}:y;return i?vt.update(i,{...C,...T}):vt(T.render,{...C,...T}),v},h=ak(e)?e():e;return h.then(p=>g("success",n,p)).catch(p=>g("error",r,p)),h}vt.promise=iH;vt.success=Gp("success");vt.info=Gp("info");vt.error=Gp("error");vt.warning=Gp("warning");vt.warn=vt.warning;vt.dark=(e,t)=>Rf(e,qp("default",{theme:"dark",...t}));function oH(e){rH(e)}vt.dismiss=oH;vt.clearWaitingQueue=aH;vt.isActive=tH;vt.update=(e,t={})=>{let r=eH(e,t);if(r){let{props:n,content:l}=r,i={delay:100,...n,...t,toastId:t.toastId||e,updateId:nk()};i.toastId!==e&&(i.staleId=e);let u=i.render||l;delete i.render,Rf(u,i)}};vt.done=e=>{vt.update(e,{progress:1})};vt.onChange=sH;vt.play=e=>lk(!0,e);vt.pause=e=>lk(!1,e);var zx={exports:{}},Am={};var lA;function cH(){if(lA)return Am;lA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,l,i){var u=null;if(i!==void 0&&(u=""+i),l.key!==void 0&&(u=""+l.key),"key"in l){i={};for(var g in l)g!=="key"&&(i[g]=l[g])}else i=l;return l=i.ref,{$$typeof:e,type:n,key:u,ref:l!==void 0?l:null,props:i}}return Am.Fragment=t,Am.jsx=r,Am.jsxs=r,Am}var iA;function uH(){return iA||(iA=1,zx.exports=cH()),zx.exports}var aE=uH();const ik=w.createContext({});function dH(e){const t=w.useRef(null);return t.current===null&&(t.current=e()),t.current}const Y2=typeof window<"u",mH=Y2?w.useLayoutEffect:w.useEffect,X2=w.createContext(null);function W2(e,t){e.indexOf(t)===-1&&e.push(t)}function K2(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const wi=(e,t,r)=>r>t?t:r<e?e:r;let Z2=()=>{};const Ni={},ok=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function ck(e){return typeof e=="object"&&e!==null}const uk=e=>/^0[^.\s]+$/u.test(e);function Q2(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ms=e=>e,fH=(e,t)=>r=>t(e(r)),Lf=(...e)=>e.reduce(fH),sf=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class J2{constructor(){this.subscriptions=[]}add(t){return W2(this.subscriptions,t),()=>K2(this.subscriptions,t)}notify(t,r,n){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](t,r,n);else for(let i=0;i<l;i++){const u=this.subscriptions[i];u&&u(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Il=e=>e*1e3,Ps=e=>e/1e3;function dk(e,t){return t?e*(1e3/t):0}const mk=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,gH=1e-7,hH=12;function pH(e,t,r,n,l){let i,u,g=0;do u=t+(r-t)/2,i=mk(u,n,l)-e,i>0?r=u:t=u;while(Math.abs(i)>gH&&++g<hH);return u}function Bf(e,t,r,n){if(e===t&&r===n)return Ms;const l=i=>pH(i,0,1,e,r);return i=>i===0||i===1?i:mk(l(i),t,n)}const fk=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,gk=e=>t=>1-e(1-t),hk=Bf(.33,1.53,.69,.99),ew=gk(hk),pk=fk(ew),yk=e=>(e*=2)<1?.5*ew(e):.5*(2-Math.pow(2,-10*(e-1))),tw=e=>1-Math.sin(Math.acos(e)),xk=gk(tw),bk=fk(tw),yH=Bf(.42,0,1,1),xH=Bf(0,0,.58,1),vk=Bf(.42,0,.58,1),bH=e=>Array.isArray(e)&&typeof e[0]!="number",Ek=e=>Array.isArray(e)&&typeof e[0]=="number",vH={linear:Ms,easeIn:yH,easeInOut:vk,easeOut:xH,circIn:tw,circInOut:bk,circOut:xk,backIn:ew,backInOut:pk,backOut:hk,anticipate:yk},EH=e=>typeof e=="string",oA=e=>{if(Ek(e)){Z2(e.length===4);const[t,r,n,l]=e;return Bf(t,r,n,l)}else if(EH(e))return vH[e];return e},Dg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function wH(e,t){let r=new Set,n=new Set,l=!1,i=!1;const u=new WeakSet;let g={delta:0,timestamp:0,isProcessing:!1};function h(y){u.has(y)&&(p.schedule(y),e()),y(g)}const p={schedule:(y,v=!1,C=!1)=>{const D=C&&l?r:n;return v&&u.add(y),D.has(y)||D.add(y),y},cancel:y=>{n.delete(y),u.delete(y)},process:y=>{if(g=y,l){i=!0;return}l=!0,[r,n]=[n,r],r.forEach(h),r.clear(),l=!1,i&&(i=!1,p.process(y))}};return p}const NH=40;function wk(e,t){let r=!1,n=!0;const l={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,u=Dg.reduce((M,G)=>(M[G]=wH(i),M),{}),{setup:g,read:h,resolveKeyframes:p,preUpdate:y,update:v,preRender:C,render:T,postRender:D}=u,P=()=>{const M=Ni.useManualTiming?l.timestamp:performance.now();r=!1,Ni.useManualTiming||(l.delta=n?1e3/60:Math.max(Math.min(M-l.timestamp,NH),1)),l.timestamp=M,l.isProcessing=!0,g.process(l),h.process(l),p.process(l),y.process(l),v.process(l),C.process(l),T.process(l),D.process(l),l.isProcessing=!1,r&&t&&(n=!1,e(P))},k=()=>{r=!0,n=!0,l.isProcessing||e(P)};return{schedule:Dg.reduce((M,G)=>{const F=u[G];return M[G]=(U,L=!1,V=!1)=>(r||k(),F.schedule(U,L,V)),M},{}),cancel:M=>{for(let G=0;G<Dg.length;G++)u[Dg[G]].cancel(M)},state:l,steps:u}}const{schedule:Zr,cancel:Po,state:on,steps:Vx}=wk(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ms,!0);let xh;function SH(){xh=void 0}const Un={now:()=>(xh===void 0&&Un.set(on.isProcessing||Ni.useManualTiming?on.timestamp:performance.now()),xh),set:e=>{xh=e,queueMicrotask(SH)}},Nk=e=>t=>typeof t=="string"&&t.startsWith(e),rw=Nk("--"),CH=Nk("var(--"),aw=e=>CH(e)?AH.test(e.split("/*")[0].trim()):!1,AH=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Sd={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},lf={...Sd,transform:e=>wi(0,1,e)},_g={...Sd,default:1},Zm=e=>Math.round(e*1e5)/1e5,nw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function TH(e){return e==null}const OH=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,sw=(e,t)=>r=>!!(typeof r=="string"&&OH.test(r)&&r.startsWith(e)||t&&!TH(r)&&Object.prototype.hasOwnProperty.call(r,t)),Sk=(e,t,r)=>n=>{if(typeof n!="string")return n;const[l,i,u,g]=n.match(nw);return{[e]:parseFloat(l),[t]:parseFloat(i),[r]:parseFloat(u),alpha:g!==void 0?parseFloat(g):1}},DH=e=>wi(0,255,e),Hx={...Sd,transform:e=>Math.round(DH(e))},Cc={test:sw("rgb","red"),parse:Sk("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Hx.transform(e)+", "+Hx.transform(t)+", "+Hx.transform(r)+", "+Zm(lf.transform(n))+")"};function _H(e){let t="",r="",n="",l="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),l=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),l=e.substring(4,5),t+=t,r+=r,n+=n,l+=l),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:l?parseInt(l,16)/255:1}}const nE={test:sw("#"),parse:_H,transform:Cc.transform},Ff=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ao=Ff("deg"),Ml=Ff("%"),Dt=Ff("px"),kH=Ff("vh"),PH=Ff("vw"),cA={...Ml,parse:e=>Ml.parse(e)/100,transform:e=>Ml.transform(e*100)},Uu={test:sw("hsl","hue"),parse:Sk("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Ml.transform(Zm(t))+", "+Ml.transform(Zm(r))+", "+Zm(lf.transform(n))+")"},ka={test:e=>Cc.test(e)||nE.test(e)||Uu.test(e),parse:e=>Cc.test(e)?Cc.parse(e):Uu.test(e)?Uu.parse(e):nE.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Cc.transform(e):Uu.transform(e),getAnimatableNone:e=>{const t=ka.parse(e);return t.alpha=0,ka.transform(t)}},IH=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function MH(e){return isNaN(e)&&typeof e=="string"&&(e.match(nw)?.length||0)+(e.match(IH)?.length||0)>0}const Ck="number",Ak="color",RH="var",LH="var(",uA="${}",BH=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function of(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},l=[];let i=0;const g=t.replace(BH,h=>(ka.test(h)?(n.color.push(i),l.push(Ak),r.push(ka.parse(h))):h.startsWith(LH)?(n.var.push(i),l.push(RH),r.push(h)):(n.number.push(i),l.push(Ck),r.push(parseFloat(h))),++i,uA)).split(uA);return{values:r,split:g,indexes:n,types:l}}function Tk(e){return of(e).values}function Ok(e){const{split:t,types:r}=of(e),n=t.length;return l=>{let i="";for(let u=0;u<n;u++)if(i+=t[u],l[u]!==void 0){const g=r[u];g===Ck?i+=Zm(l[u]):g===Ak?i+=ka.transform(l[u]):i+=l[u]}return i}}const FH=e=>typeof e=="number"?0:ka.test(e)?ka.getAnimatableNone(e):e;function UH(e){const t=Tk(e);return Ok(e)(t.map(FH))}const Io={test:MH,parse:Tk,createTransformer:Ok,getAnimatableNone:UH};function $x(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function jH({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let l=0,i=0,u=0;if(!t)l=i=u=r;else{const g=r<.5?r*(1+t):r+t-r*t,h=2*r-g;l=$x(h,g,e+1/3),i=$x(h,g,e),u=$x(h,g,e-1/3)}return{red:Math.round(l*255),green:Math.round(i*255),blue:Math.round(u*255),alpha:n}}function Lh(e,t){return r=>r>0?t:e}const sa=(e,t,r)=>e+(t-e)*r,qx=(e,t,r)=>{const n=e*e,l=r*(t*t-n)+n;return l<0?0:Math.sqrt(l)},zH=[nE,Cc,Uu],VH=e=>zH.find(t=>t.test(e));function dA(e){const t=VH(e);if(!t)return!1;let r=t.parse(e);return t===Uu&&(r=jH(r)),r}const mA=(e,t)=>{const r=dA(e),n=dA(t);if(!r||!n)return Lh(e,t);const l={...r};return i=>(l.red=qx(r.red,n.red,i),l.green=qx(r.green,n.green,i),l.blue=qx(r.blue,n.blue,i),l.alpha=sa(r.alpha,n.alpha,i),Cc.transform(l))},sE=new Set(["none","hidden"]);function HH(e,t){return sE.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function $H(e,t){return r=>sa(e,t,r)}function lw(e){return typeof e=="number"?$H:typeof e=="string"?aw(e)?Lh:ka.test(e)?mA:YH:Array.isArray(e)?Dk:typeof e=="object"?ka.test(e)?mA:qH:Lh}function Dk(e,t){const r=[...e],n=r.length,l=e.map((i,u)=>lw(i)(i,t[u]));return i=>{for(let u=0;u<n;u++)r[u]=l[u](i);return r}}function qH(e,t){const r={...e,...t},n={};for(const l in r)e[l]!==void 0&&t[l]!==void 0&&(n[l]=lw(e[l])(e[l],t[l]));return l=>{for(const i in n)r[i]=n[i](l);return r}}function GH(e,t){const r=[],n={color:0,var:0,number:0};for(let l=0;l<t.values.length;l++){const i=t.types[l],u=e.indexes[i][n[i]],g=e.values[u]??0;r[l]=g,n[i]++}return r}const YH=(e,t)=>{const r=Io.createTransformer(t),n=of(e),l=of(t);return n.indexes.var.length===l.indexes.var.length&&n.indexes.color.length===l.indexes.color.length&&n.indexes.number.length>=l.indexes.number.length?sE.has(e)&&!l.values.length||sE.has(t)&&!n.values.length?HH(e,t):Lf(Dk(GH(n,l),l.values),r):Lh(e,t)};function _k(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?sa(e,t,r):lw(e)(e,t)}const XH=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Zr.update(t,r),stop:()=>Po(t),now:()=>on.isProcessing?on.timestamp:Un.now()}},kk=(e,t,r=10)=>{let n="";const l=Math.max(Math.round(t/r),2);for(let i=0;i<l;i++)n+=Math.round(e(i/(l-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Bh=2e4;function iw(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Bh;)t+=r,n=e.next(t);return t>=Bh?1/0:t}function WH(e,t=100,r){const n=r({...e,keyframes:[0,t]}),l=Math.min(iw(n),Bh);return{type:"keyframes",ease:i=>n.next(l*i).value/t,duration:Ps(l)}}const KH=5;function Pk(e,t,r){const n=Math.max(t-KH,0);return dk(r-e(n),t-n)}const fa={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Gx=.001;function ZH({duration:e=fa.duration,bounce:t=fa.bounce,velocity:r=fa.velocity,mass:n=fa.mass}){let l,i,u=1-t;u=wi(fa.minDamping,fa.maxDamping,u),e=wi(fa.minDuration,fa.maxDuration,Ps(e)),u<1?(l=p=>{const y=p*u,v=y*e,C=y-r,T=lE(p,u),D=Math.exp(-v);return Gx-C/T*D},i=p=>{const v=p*u*e,C=v*r+r,T=Math.pow(u,2)*Math.pow(p,2)*e,D=Math.exp(-v),P=lE(Math.pow(p,2),u);return(-l(p)+Gx>0?-1:1)*((C-T)*D)/P}):(l=p=>{const y=Math.exp(-p*e),v=(p-r)*e+1;return-Gx+y*v},i=p=>{const y=Math.exp(-p*e),v=(r-p)*(e*e);return y*v});const g=5/e,h=JH(l,i,g);if(e=Il(e),isNaN(h))return{stiffness:fa.stiffness,damping:fa.damping,duration:e};{const p=Math.pow(h,2)*n;return{stiffness:p,damping:u*2*Math.sqrt(n*p),duration:e}}}const QH=12;function JH(e,t,r){let n=r;for(let l=1;l<QH;l++)n=n-e(n)/t(n);return n}function lE(e,t){return e*Math.sqrt(1-t*t)}const e$=["duration","bounce"],t$=["stiffness","damping","mass"];function fA(e,t){return t.some(r=>e[r]!==void 0)}function r$(e){let t={velocity:fa.velocity,stiffness:fa.stiffness,damping:fa.damping,mass:fa.mass,isResolvedFromDuration:!1,...e};if(!fA(e,t$)&&fA(e,e$))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),l=n*n,i=2*wi(.05,1,1-(e.bounce||0))*Math.sqrt(l);t={...t,mass:fa.mass,stiffness:l,damping:i}}else{const r=ZH(e);t={...t,...r,mass:fa.mass},t.isResolvedFromDuration=!0}return t}function Fh(e=fa.visualDuration,t=fa.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:l}=r;const i=r.keyframes[0],u=r.keyframes[r.keyframes.length-1],g={done:!1,value:i},{stiffness:h,damping:p,mass:y,duration:v,velocity:C,isResolvedFromDuration:T}=r$({...r,velocity:-Ps(r.velocity||0)}),D=C||0,P=p/(2*Math.sqrt(h*y)),k=u-i,R=Ps(Math.sqrt(h/y)),B=Math.abs(k)<5;n||(n=B?fa.restSpeed.granular:fa.restSpeed.default),l||(l=B?fa.restDelta.granular:fa.restDelta.default);let M;if(P<1){const F=lE(R,P);M=U=>{const L=Math.exp(-P*R*U);return u-L*((D+P*R*k)/F*Math.sin(F*U)+k*Math.cos(F*U))}}else if(P===1)M=F=>u-Math.exp(-R*F)*(k+(D+R*k)*F);else{const F=R*Math.sqrt(P*P-1);M=U=>{const L=Math.exp(-P*R*U),V=Math.min(F*U,300);return u-L*((D+P*R*k)*Math.sinh(V)+F*k*Math.cosh(V))/F}}const G={calculatedDuration:T&&v||null,next:F=>{const U=M(F);if(T)g.done=F>=v;else{let L=F===0?D:0;P<1&&(L=F===0?Il(D):Pk(M,F,U));const V=Math.abs(L)<=n,j=Math.abs(u-U)<=l;g.done=V&&j}return g.value=g.done?u:U,g},toString:()=>{const F=Math.min(iw(G),Bh),U=kk(L=>G.next(F*L).value,F,30);return F+"ms "+U},toTransition:()=>{}};return G}Fh.applyToOptions=e=>{const t=WH(e,100,Fh);return e.ease=t.ease,e.duration=Il(t.duration),e.type="keyframes",e};function iE({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:l=10,bounceStiffness:i=500,modifyTarget:u,min:g,max:h,restDelta:p=.5,restSpeed:y}){const v=e[0],C={done:!1,value:v},T=V=>g!==void 0&&V<g||h!==void 0&&V>h,D=V=>g===void 0?h:h===void 0||Math.abs(g-V)<Math.abs(h-V)?g:h;let P=r*t;const k=v+P,R=u===void 0?k:u(k);R!==k&&(P=R-v);const B=V=>-P*Math.exp(-V/n),M=V=>R+B(V),G=V=>{const j=B(V),Y=M(V);C.done=Math.abs(j)<=p,C.value=C.done?R:Y};let F,U;const L=V=>{T(C.value)&&(F=V,U=Fh({keyframes:[C.value,D(C.value)],velocity:Pk(M,V,C.value),damping:l,stiffness:i,restDelta:p,restSpeed:y}))};return L(0),{calculatedDuration:null,next:V=>{let j=!1;return!U&&F===void 0&&(j=!0,G(V),L(V)),F!==void 0&&V>=F?U.next(V-F):(!j&&G(V),C)}}}function a$(e,t,r){const n=[],l=r||Ni.mix||_k,i=e.length-1;for(let u=0;u<i;u++){let g=l(e[u],e[u+1]);if(t){const h=Array.isArray(t)?t[u]||Ms:t;g=Lf(h,g)}n.push(g)}return n}function n$(e,t,{clamp:r=!0,ease:n,mixer:l}={}){const i=e.length;if(Z2(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const u=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const g=a$(t,n,l),h=g.length,p=y=>{if(u&&y<e[0])return t[0];let v=0;if(h>1)for(;v<e.length-2&&!(y<e[v+1]);v++);const C=sf(e[v],e[v+1],y);return g[v](C)};return r?y=>p(wi(e[0],e[i-1],y)):p}function s$(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const l=sf(0,t,n);e.push(sa(r,1,l))}}function l$(e){const t=[0];return s$(t,e.length-1),t}function i$(e,t){return e.map(r=>r*t)}function o$(e,t){return e.map(()=>t||vk).splice(0,e.length-1)}function Qm({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const l=bH(n)?n.map(oA):oA(n),i={done:!1,value:t[0]},u=i$(r&&r.length===t.length?r:l$(t),e),g=n$(u,t,{ease:Array.isArray(l)?l:o$(t,l)});return{calculatedDuration:e,next:h=>(i.value=g(h),i.done=h>=e,i)}}const c$=e=>e!==null;function ow(e,{repeat:t,repeatType:r="loop"},n,l=1){const i=e.filter(c$),g=l<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!g||n===void 0?i[g]:n}const u$={decay:iE,inertia:iE,tween:Qm,keyframes:Qm,spring:Fh};function Ik(e){typeof e.type=="string"&&(e.type=u$[e.type])}class cw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const d$=e=>e/100;class uw extends cw{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==Un.now()&&this.tick(Un.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Ik(t);const{type:r=Qm,repeat:n=0,repeatDelay:l=0,repeatType:i,velocity:u=0}=t;let{keyframes:g}=t;const h=r||Qm;h!==Qm&&typeof g[0]!="number"&&(this.mixKeyframes=Lf(d$,_k(g[0],g[1])),g=[0,100]);const p=h({...t,keyframes:g});i==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...g].reverse(),velocity:-u})),p.calculatedDuration===null&&(p.calculatedDuration=iw(p));const{calculatedDuration:y}=p;this.calculatedDuration=y,this.resolvedDuration=y+l,this.totalDuration=this.resolvedDuration*(n+1)-l,this.generator=p}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:l,mixKeyframes:i,mirroredGenerator:u,resolvedDuration:g,calculatedDuration:h}=this;if(this.startTime===null)return n.next(0);const{delay:p=0,keyframes:y,repeat:v,repeatType:C,repeatDelay:T,type:D,onUpdate:P,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-l/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const R=this.currentTime-p*(this.playbackSpeed>=0?1:-1),B=this.playbackSpeed>=0?R<0:R>l;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let M=this.currentTime,G=n;if(v){const V=Math.min(this.currentTime,l)/g;let j=Math.floor(V),Y=V%1;!Y&&V>=1&&(Y=1),Y===1&&j--,j=Math.min(j,v+1),!!(j%2)&&(C==="reverse"?(Y=1-Y,T&&(Y-=T/g)):C==="mirror"&&(G=u)),M=wi(0,1,Y)*g}const F=B?{done:!1,value:y[0]}:G.next(M);i&&(F.value=i(F.value));let{done:U}=F;!B&&h!==null&&(U=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&U);return L&&D!==iE&&(F.value=ow(y,this.options,k,this.speed)),P&&P(F.value),L&&this.finish(),F}then(t,r){return this.finished.then(t,r)}get duration(){return Ps(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ps(t)}get time(){return Ps(this.currentTime)}set time(t){t=Il(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Un.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Ps(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=XH,startTime:r}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Un.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function m$(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Ac=e=>e*180/Math.PI,oE=e=>{const t=Ac(Math.atan2(e[1],e[0]));return cE(t)},f$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:oE,rotateZ:oE,skewX:e=>Ac(Math.atan(e[1])),skewY:e=>Ac(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},cE=e=>(e=e%360,e<0&&(e+=360),e),gA=oE,hA=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),pA=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),g$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:hA,scaleY:pA,scale:e=>(hA(e)+pA(e))/2,rotateX:e=>cE(Ac(Math.atan2(e[6],e[5]))),rotateY:e=>cE(Ac(Math.atan2(-e[2],e[0]))),rotateZ:gA,rotate:gA,skewX:e=>Ac(Math.atan(e[4])),skewY:e=>Ac(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function uE(e){return e.includes("scale")?1:0}function dE(e,t){if(!e||e==="none")return uE(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,l;if(r)n=g$,l=r;else{const g=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=f$,l=g}if(!l)return uE(t);const i=n[t],u=l[1].split(",").map(p$);return typeof i=="function"?i(u):u[i]}const h$=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return dE(r,t)};function p$(e){return parseFloat(e.trim())}const Cd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ad=new Set(Cd),yA=e=>e===Sd||e===Dt,y$=new Set(["x","y","z"]),x$=Cd.filter(e=>!y$.has(e));function b$(e){const t=[];return x$.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const _c={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>dE(t,"x"),y:(e,{transform:t})=>dE(t,"y")};_c.translateX=_c.x;_c.translateY=_c.y;const kc=new Set;let mE=!1,fE=!1,gE=!1;function Mk(){if(fE){const e=Array.from(kc).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const l=b$(n);l.length&&(r.set(n,l),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const l=r.get(n);l&&l.forEach(([i,u])=>{n.getValue(i)?.set(u)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}fE=!1,mE=!1,kc.forEach(e=>e.complete(gE)),kc.clear()}function Rk(){kc.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(fE=!0)})}function v$(){gE=!0,Rk(),Mk(),gE=!1}class dw{constructor(t,r,n,l,i,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=l,this.element=i,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(kc.add(this),mE||(mE=!0,Zr.read(Rk),Zr.resolveKeyframes(Mk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:l}=this;if(t[0]===null){const i=l?.get(),u=t[t.length-1];if(i!==void 0)t[0]=i;else if(n&&r){const g=n.readValue(r,u);g!=null&&(t[0]=g)}t[0]===void 0&&(t[0]=u),l&&i===void 0&&l.set(t[0])}m$(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),kc.delete(this)}cancel(){this.state==="scheduled"&&(kc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const E$=e=>e.startsWith("--");function w$(e,t,r){E$(t)?e.style.setProperty(t,r):e.style[t]=r}const N$=Q2(()=>window.ScrollTimeline!==void 0),S$={};function C$(e,t){const r=Q2(e);return()=>S$[t]??r()}const Lk=C$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),qm=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,xA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qm([0,.65,.55,1]),circOut:qm([.55,0,1,.45]),backIn:qm([.31,.01,.66,-.59]),backOut:qm([.33,1.53,.69,.99])};function Bk(e,t){if(e)return typeof e=="function"?Lk()?kk(e,t):"ease-out":Ek(e)?qm(e):Array.isArray(e)?e.map(r=>Bk(r,t)||xA.easeOut):xA[e]}function A$(e,t,r,{delay:n=0,duration:l=300,repeat:i=0,repeatType:u="loop",ease:g="easeOut",times:h}={},p=void 0){const y={[t]:r};h&&(y.offset=h);const v=Bk(g,l);Array.isArray(v)&&(y.easing=v);const C={delay:n,duration:l,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:i+1,direction:u==="reverse"?"alternate":"normal"};return p&&(C.pseudoElement=p),e.animate(y,C)}function Fk(e){return typeof e=="function"&&"applyToOptions"in e}function T$({type:e,...t}){return Fk(e)&&Lk()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class O$ extends cw{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:l,pseudoElement:i,allowFlatten:u=!1,finalKeyframe:g,onComplete:h}=t;this.isPseudoElement=!!i,this.allowFlatten=u,this.options=t,Z2(typeof t.type!="string");const p=T$(t);this.animation=A$(r,n,l,p,i),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const y=ow(l,this.options,g,this.speed);this.updateMotionValue?this.updateMotionValue(y):w$(r,n,y),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Ps(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ps(t)}get time(){return Ps(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Il(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&N$()?(this.animation.timeline=t,Ms):r(this)}}const Uk={anticipate:yk,backInOut:pk,circInOut:bk};function D$(e){return e in Uk}function _$(e){typeof e.ease=="string"&&D$(e.ease)&&(e.ease=Uk[e.ease])}const bA=10;class k$ extends O${constructor(t){_$(t),Ik(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:l,element:i,...u}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const g=new uw({...u,autoplay:!1}),h=Il(this.finishedTime??this.time);r.setWithVelocity(g.sample(h-bA).value,g.sample(h).value,bA),g.stop()}}const vA=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Io.test(e)||e==="0")&&!e.startsWith("url("));function P$(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function I$(e,t,r,n){const l=e[0];if(l===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],u=vA(l,t),g=vA(i,t);return!u||!g?!1:P$(e)||(r==="spring"||Fk(r))&&n}function hE(e){e.duration=0,e.type="keyframes"}const M$=new Set(["opacity","clipPath","filter","transform"]),R$=Q2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function L$(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:l,damping:i,type:u}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:p}=t.owner.getProps();return R$()&&r&&M$.has(r)&&(r!=="transform"||!p)&&!h&&!n&&l!=="mirror"&&i!==0&&u!=="inertia"}const B$=40;class F$ extends cw{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:l=0,repeatDelay:i=0,repeatType:u="loop",keyframes:g,name:h,motionValue:p,element:y,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Un.now();const C={autoplay:t,delay:r,type:n,repeat:l,repeatDelay:i,repeatType:u,name:h,motionValue:p,element:y,...v},T=y?.KeyframeResolver||dw;this.keyframeResolver=new T(g,(D,P,k)=>this.onKeyframesResolved(D,P,C,!k),h,p,y),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,n,l){this.keyframeResolver=void 0;const{name:i,type:u,velocity:g,delay:h,isHandoff:p,onUpdate:y}=n;this.resolvedAt=Un.now(),I$(t,i,u,g)||((Ni.instantAnimations||!h)&&y?.(ow(t,n,r)),t[0]=t[t.length-1],hE(n),n.repeat=0);const C={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>B$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},T=!p&&L$(C)?new k$({...C,element:C.motionValue.owner.current}):new uw(C);T.finished.then(()=>this.notifyFinished()).catch(Ms),this.pendingTimeline&&(this.stopTimeline=T.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=T}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),v$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const U$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function j$(e){const t=U$.exec(e);if(!t)return[,];const[,r,n,l]=t;return[`--${r??n}`,l]}function jk(e,t,r=1){const[n,l]=j$(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const u=i.trim();return ok(u)?parseFloat(u):u}return aw(l)?jk(l,t,r+1):l}function mw(e,t){return e?.[t]??e?.default??e}const zk=new Set(["width","height","top","left","right","bottom",...Cd]),z$={test:e=>e==="auto",parse:e=>e},Vk=e=>t=>t.test(e),Hk=[Sd,Dt,Ml,Ao,PH,kH,z$],EA=e=>Hk.find(Vk(e));function V$(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||uk(e):!0}const H$=new Set(["brightness","contrast","saturate","opacity"]);function $$(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(nw)||[];if(!n)return e;const l=r.replace(n,"");let i=H$.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+l+")"}const q$=/\b([a-z-]*)\(.*?\)/gu,pE={...Io,getAnimatableNone:e=>{const t=e.match(q$);return t?t.map($$).join(" "):e}},wA={...Sd,transform:Math.round},G$={rotate:Ao,rotateX:Ao,rotateY:Ao,rotateZ:Ao,scale:_g,scaleX:_g,scaleY:_g,scaleZ:_g,skew:Ao,skewX:Ao,skewY:Ao,distance:Dt,translateX:Dt,translateY:Dt,translateZ:Dt,x:Dt,y:Dt,z:Dt,perspective:Dt,transformPerspective:Dt,opacity:lf,originX:cA,originY:cA,originZ:Dt},fw={borderWidth:Dt,borderTopWidth:Dt,borderRightWidth:Dt,borderBottomWidth:Dt,borderLeftWidth:Dt,borderRadius:Dt,radius:Dt,borderTopLeftRadius:Dt,borderTopRightRadius:Dt,borderBottomRightRadius:Dt,borderBottomLeftRadius:Dt,width:Dt,maxWidth:Dt,height:Dt,maxHeight:Dt,top:Dt,right:Dt,bottom:Dt,left:Dt,padding:Dt,paddingTop:Dt,paddingRight:Dt,paddingBottom:Dt,paddingLeft:Dt,margin:Dt,marginTop:Dt,marginRight:Dt,marginBottom:Dt,marginLeft:Dt,backgroundPositionX:Dt,backgroundPositionY:Dt,...G$,zIndex:wA,fillOpacity:lf,strokeOpacity:lf,numOctaves:wA},Y$={...fw,color:ka,backgroundColor:ka,outlineColor:ka,fill:ka,stroke:ka,borderColor:ka,borderTopColor:ka,borderRightColor:ka,borderBottomColor:ka,borderLeftColor:ka,filter:pE,WebkitFilter:pE},$k=e=>Y$[e];function qk(e,t){let r=$k(e);return r!==pE&&(r=Io),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const X$=new Set(["auto","none","0"]);function W$(e,t,r){let n=0,l;for(;n<e.length&&!l;){const i=e[n];typeof i=="string"&&!X$.has(i)&&of(i).values.length&&(l=e[n]),n++}if(l&&r)for(const i of t)e[i]=qk(r,l)}class K$ extends dw{constructor(t,r,n,l,i){super(t,r,n,l,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let h=0;h<t.length;h++){let p=t[h];if(typeof p=="string"&&(p=p.trim(),aw(p))){const y=jk(p,r.current);y!==void 0&&(t[h]=y),h===t.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!zk.has(n)||t.length!==2)return;const[l,i]=t,u=EA(l),g=EA(i);if(u!==g)if(yA(u)&&yA(g))for(let h=0;h<t.length;h++){const p=t[h];typeof p=="string"&&(t[h]=parseFloat(p))}else _c[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let l=0;l<t.length;l++)(t[l]===null||V$(t[l]))&&n.push(l);n.length&&W$(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_c[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const l=r[r.length-1];l!==void 0&&t.getValue(n,l).jump(l,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const l=t.getValue(r);l&&l.jump(this.measuredOrigin,!1);const i=n.length-1,u=n[i];n[i]=_c[r](t.measureViewportBox(),window.getComputedStyle(t.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([g,h])=>{t.getValue(g).set(h)}),this.resolveNoneKeyframes()}}function Z$(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const l=r?.[e]??n.querySelectorAll(e);return l?Array.from(l):[]}return Array.from(e)}const Gk=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Q$(e){return ck(e)&&"offsetHeight"in e}const NA=30,J$=e=>!isNaN(parseFloat(e));class eq{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const l=Un.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Un.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=J$(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new J2);const n=this.events[t].add(r);return t==="change"?()=>{n(),Zr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Un.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>NA)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,NA);return dk(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ad(e,t){return new eq(e,t)}const{schedule:gw}=wk(queueMicrotask,!1),Js={x:!1,y:!1};function Yk(){return Js.x||Js.y}function tq(e){return e==="x"||e==="y"?Js[e]?null:(Js[e]=!0,()=>{Js[e]=!1}):Js.x||Js.y?null:(Js.x=Js.y=!0,()=>{Js.x=Js.y=!1})}function Xk(e,t){const r=Z$(e),n=new AbortController,l={passive:!0,...t,signal:n.signal};return[r,l,()=>n.abort()]}function SA(e){return!(e.pointerType==="touch"||Yk())}function rq(e,t,r={}){const[n,l,i]=Xk(e,r),u=g=>{if(!SA(g))return;const{target:h}=g,p=t(h,g);if(typeof p!="function"||!h)return;const y=v=>{SA(v)&&(p(v),h.removeEventListener("pointerleave",y))};h.addEventListener("pointerleave",y,l)};return n.forEach(g=>{g.addEventListener("pointerenter",u,l)}),i}const Wk=(e,t)=>t?e===t?!0:Wk(e,t.parentElement):!1,hw=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,aq=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nq(e){return aq.has(e.tagName)||e.tabIndex!==-1}const bh=new WeakSet;function CA(e){return t=>{t.key==="Enter"&&e(t)}}function Yx(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const sq=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=CA(()=>{if(bh.has(r))return;Yx(r,"down");const l=CA(()=>{Yx(r,"up")}),i=()=>Yx(r,"cancel");r.addEventListener("keyup",l,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function AA(e){return hw(e)&&!Yk()}function lq(e,t,r={}){const[n,l,i]=Xk(e,r),u=g=>{const h=g.currentTarget;if(!AA(g))return;bh.add(h);const p=t(h,g),y=(T,D)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",C),bh.has(h)&&bh.delete(h),AA(T)&&typeof p=="function"&&p(T,{success:D})},v=T=>{y(T,h===window||h===document||r.useGlobalTarget||Wk(h,T.target))},C=T=>{y(T,!1)};window.addEventListener("pointerup",v,l),window.addEventListener("pointercancel",C,l)};return n.forEach(g=>{(r.useGlobalTarget?window:g).addEventListener("pointerdown",u,l),Q$(g)&&(g.addEventListener("focus",p=>sq(p,l)),!nq(g)&&!g.hasAttribute("tabindex")&&(g.tabIndex=0))}),i}function Kk(e){return ck(e)&&"ownerSVGElement"in e}function iq(e){return Kk(e)&&e.tagName==="svg"}const gn=e=>!!(e&&e.getVelocity),oq=[...Hk,ka,Io],cq=e=>oq.find(Vk(e)),Zk=w.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function uq(e=!0){const t=w.useContext(X2);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:l}=t,i=w.useId();w.useEffect(()=>{if(e)return l(i)},[e]);const u=w.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,u]:[!0]}const Qk=w.createContext({strict:!1}),TA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},nd={};for(const e in TA)nd[e]={isEnabled:t=>TA[e].some(r=>!!t[r])};function dq(e){for(const t in e)nd[t]={...nd[t],...e[t]}}const mq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Uh(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||mq.has(e)}let Jk=e=>!Uh(e);function fq(e){typeof e=="function"&&(Jk=t=>t.startsWith("on")?!Uh(t):e(t))}try{fq(require("@emotion/is-prop-valid").default)}catch{}function gq(e,t,r){const n={};for(const l in e)l==="values"&&typeof e.values=="object"||(Jk(l)||r===!0&&Uh(l)||!t&&!Uh(l)||e.draggable&&l.startsWith("onDrag"))&&(n[l]=e[l]);return n}const Yp=w.createContext({});function Xp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function cf(e){return typeof e=="string"||Array.isArray(e)}const pw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yw=["initial",...pw];function Wp(e){return Xp(e.animate)||yw.some(t=>cf(e[t]))}function eP(e){return!!(Wp(e)||e.variants)}function hq(e,t){if(Wp(e)){const{initial:r,animate:n}=e;return{initial:r===!1||cf(r)?r:void 0,animate:cf(n)?n:void 0}}return e.inherit!==!1?t:{}}function pq(e){const{initial:t,animate:r}=hq(e,w.useContext(Yp));return w.useMemo(()=>({initial:t,animate:r}),[OA(t),OA(r)])}function OA(e){return Array.isArray(e)?e.join(" "):e}const uf={};function yq(e){for(const t in e)uf[t]=e[t],rw(t)&&(uf[t].isCSSVariable=!0)}function tP(e,{layout:t,layoutId:r}){return Ad.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!uf[e]||e==="opacity")}const xq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},bq=Cd.length;function vq(e,t,r){let n="",l=!0;for(let i=0;i<bq;i++){const u=Cd[i],g=e[u];if(g===void 0)continue;let h=!0;if(typeof g=="number"?h=g===(u.startsWith("scale")?1:0):h=parseFloat(g)===0,!h||r){const p=Gk(g,fw[u]);if(!h){l=!1;const y=xq[u]||u;n+=`${y}(${p}) `}r&&(t[u]=p)}}return n=n.trim(),r?n=r(t,l?"":n):l&&(n="none"),n}function xw(e,t,r){const{style:n,vars:l,transformOrigin:i}=e;let u=!1,g=!1;for(const h in t){const p=t[h];if(Ad.has(h)){u=!0;continue}else if(rw(h)){l[h]=p;continue}else{const y=Gk(p,fw[h]);h.startsWith("origin")?(g=!0,i[h]=y):n[h]=y}}if(t.transform||(u||r?n.transform=vq(t,e.transform,r):n.transform&&(n.transform="none")),g){const{originX:h="50%",originY:p="50%",originZ:y=0}=i;n.transformOrigin=`${h} ${p} ${y}`}}const bw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function rP(e,t,r){for(const n in t)!gn(t[n])&&!tP(n,r)&&(e[n]=t[n])}function Eq({transformTemplate:e},t){return w.useMemo(()=>{const r=bw();return xw(r,t,e),Object.assign({},r.vars,r.style)},[t])}function wq(e,t){const r=e.style||{},n={};return rP(n,r,e),Object.assign(n,Eq(e,t)),n}function Nq(e,t){const r={},n=wq(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const Sq={offset:"stroke-dashoffset",array:"stroke-dasharray"},Cq={offset:"strokeDashoffset",array:"strokeDasharray"};function Aq(e,t,r=1,n=0,l=!0){e.pathLength=1;const i=l?Sq:Cq;e[i.offset]=Dt.transform(-n);const u=Dt.transform(t),g=Dt.transform(r);e[i.array]=`${u} ${g}`}function aP(e,{attrX:t,attrY:r,attrScale:n,pathLength:l,pathSpacing:i=1,pathOffset:u=0,...g},h,p,y){if(xw(e,g,p),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:v,style:C}=e;v.transform&&(C.transform=v.transform,delete v.transform),(C.transform||v.transformOrigin)&&(C.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),C.transform&&(C.transformBox=y?.transformBox??"fill-box",delete v.transformBox),t!==void 0&&(v.x=t),r!==void 0&&(v.y=r),n!==void 0&&(v.scale=n),l!==void 0&&Aq(v,l,i,u,!1)}const nP=()=>({...bw(),attrs:{}}),sP=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Tq(e,t,r,n){const l=w.useMemo(()=>{const i=nP();return aP(i,t,sP(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};rP(i,e.style,e),l.style={...i,...l.style}}return l}const Oq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function vw(e){return typeof e!="string"||e.includes("-")?!1:!!(Oq.indexOf(e)>-1||/[A-Z]/u.test(e))}function Dq(e,t,r,{latestValues:n},l,i=!1){const g=(vw(e)?Tq:Nq)(t,n,l,e),h=gq(t,typeof e=="string",i),p=e!==w.Fragment?{...h,...g,ref:r}:{},{children:y}=t,v=w.useMemo(()=>gn(y)?y.get():y,[y]);return w.createElement(e,{...p,children:v})}function DA(e){const t=[{},{}];return e?.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function Ew(e,t,r,n){if(typeof t=="function"){const[l,i]=DA(n);t=t(r!==void 0?r:e.custom,l,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[l,i]=DA(n);t=t(r!==void 0?r:e.custom,l,i)}return t}function vh(e){return gn(e)?e.get():e}function _q({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,l){return{latestValues:kq(r,n,l,e),renderState:t()}}function kq(e,t,r,n){const l={},i=n(e,{});for(const C in i)l[C]=vh(i[C]);let{initial:u,animate:g}=e;const h=Wp(e),p=eP(e);t&&p&&!h&&e.inherit!==!1&&(u===void 0&&(u=t.initial),g===void 0&&(g=t.animate));let y=r?r.initial===!1:!1;y=y||u===!1;const v=y?g:u;if(v&&typeof v!="boolean"&&!Xp(v)){const C=Array.isArray(v)?v:[v];for(let T=0;T<C.length;T++){const D=Ew(e,C[T]);if(D){const{transitionEnd:P,transition:k,...R}=D;for(const B in R){let M=R[B];if(Array.isArray(M)){const G=y?M.length-1:0;M=M[G]}M!==null&&(l[B]=M)}for(const B in P)l[B]=P[B]}}}return l}const lP=e=>(t,r)=>{const n=w.useContext(Yp),l=w.useContext(X2),i=()=>_q(e,t,n,l);return r?i():dH(i)};function ww(e,t,r){const{style:n}=e,l={};for(const i in n)(gn(n[i])||t.style&&gn(t.style[i])||tP(i,e)||r?.getValue(i)?.liveStyle!==void 0)&&(l[i]=n[i]);return l}const Pq=lP({scrapeMotionValuesFromProps:ww,createRenderState:bw});function iP(e,t,r){const n=ww(e,t,r);for(const l in e)if(gn(e[l])||gn(t[l])){const i=Cd.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;n[i]=e[l]}return n}const Iq=lP({scrapeMotionValuesFromProps:iP,createRenderState:nP}),Mq=Symbol.for("motionComponentSymbol");function ju(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Rq(e,t,r){return w.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):ju(r)&&(r.current=n))},[t])}const Nw=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Lq="framerAppearId",oP="data-"+Nw(Lq),cP=w.createContext({});function Bq(e,t,r,n,l){const{visualElement:i}=w.useContext(Yp),u=w.useContext(Qk),g=w.useContext(X2),h=w.useContext(Zk).reducedMotion,p=w.useRef(null);n=n||u.renderer,!p.current&&n&&(p.current=n(e,{visualState:t,parent:i,props:r,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:h}));const y=p.current,v=w.useContext(cP);y&&!y.projection&&l&&(y.type==="html"||y.type==="svg")&&Fq(p.current,r,l,v);const C=w.useRef(!1);w.useInsertionEffect(()=>{y&&C.current&&y.update(r,g)});const T=r[oP],D=w.useRef(!!T&&!window.MotionHandoffIsComplete?.(T)&&window.MotionHasOptimisedAnimation?.(T));return mH(()=>{y&&(C.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),D.current&&y.animationState&&y.animationState.animateChanges())}),w.useEffect(()=>{y&&(!D.current&&y.animationState&&y.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(T)}),D.current=!1),y.enteringChildren=void 0)}),y}function Fq(e,t,r,n){const{layoutId:l,layout:i,drag:u,dragConstraints:g,layoutScroll:h,layoutRoot:p,layoutCrossfade:y}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:uP(e.parent)),e.projection.setOptions({layoutId:l,layout:i,alwaysMeasureLayout:!!u||g&&ju(g),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:y,layoutScroll:h,layoutRoot:p})}function uP(e){if(e)return e.options.allowProjection!==!1?e.projection:uP(e.parent)}function Xx(e,{forwardMotionProps:t=!1}={},r,n){r&&dq(r);const l=vw(e)?Iq:Pq;function i(g,h){let p;const y={...w.useContext(Zk),...g,layoutId:Uq(g)},{isStatic:v}=y,C=pq(g),T=l(g,v);if(!v&&Y2){jq();const D=zq(y);p=D.MeasureLayout,C.visualElement=Bq(e,T,y,n,D.ProjectionNode)}return aE.jsxs(Yp.Provider,{value:C,children:[p&&C.visualElement?aE.jsx(p,{visualElement:C.visualElement,...y}):null,Dq(e,g,Rq(T,C.visualElement,h),T,v,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const u=w.forwardRef(i);return u[Mq]=e,u}function Uq({layoutId:e}){const t=w.useContext(ik).id;return t&&e!==void 0?t+"-"+e:e}function jq(e,t){w.useContext(Qk).strict}function zq(e){const{drag:t,layout:r}=nd;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function Vq(e,t){if(typeof Proxy>"u")return Xx;const r=new Map,n=(i,u)=>Xx(i,u,e,t),l=(i,u)=>n(i,u);return new Proxy(l,{get:(i,u)=>u==="create"?n:(r.has(u)||r.set(u,Xx(u,void 0,e,t)),r.get(u))})}function dP({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function Hq({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function $q(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Wx(e){return e===void 0||e===1}function yE({scale:e,scaleX:t,scaleY:r}){return!Wx(e)||!Wx(t)||!Wx(r)}function xc(e){return yE(e)||mP(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function mP(e){return _A(e.x)||_A(e.y)}function _A(e){return e&&e!=="0%"}function jh(e,t,r){const n=e-r,l=t*n;return r+l}function kA(e,t,r,n,l){return l!==void 0&&(e=jh(e,l,n)),jh(e,r,n)+t}function xE(e,t=0,r=1,n,l){e.min=kA(e.min,t,r,n,l),e.max=kA(e.max,t,r,n,l)}function fP(e,{x:t,y:r}){xE(e.x,t.translate,t.scale,t.originPoint),xE(e.y,r.translate,r.scale,r.originPoint)}const PA=.999999999999,IA=1.0000000000001;function qq(e,t,r,n=!1){const l=r.length;if(!l)return;t.x=t.y=1;let i,u;for(let g=0;g<l;g++){i=r[g],u=i.projectionDelta;const{visualElement:h}=i.options;h&&h.props.style&&h.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Vu(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),u&&(t.x*=u.x.scale,t.y*=u.y.scale,fP(e,u)),n&&xc(i.latestValues)&&Vu(e,i.latestValues))}t.x<IA&&t.x>PA&&(t.x=1),t.y<IA&&t.y>PA&&(t.y=1)}function zu(e,t){e.min=e.min+t,e.max=e.max+t}function MA(e,t,r,n,l=.5){const i=sa(e.min,e.max,l);xE(e,t,r,i,n)}function Vu(e,t){MA(e.x,t.x,t.scaleX,t.scale,t.originX),MA(e.y,t.y,t.scaleY,t.scale,t.originY)}function gP(e,t){return dP($q(e.getBoundingClientRect(),t))}function Gq(e,t,r){const n=gP(e,r),{scroll:l}=t;return l&&(zu(n.x,l.offset.x),zu(n.y,l.offset.y)),n}const RA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Hu=()=>({x:RA(),y:RA()}),LA=()=>({min:0,max:0}),Ua=()=>({x:LA(),y:LA()}),bE={current:null},hP={current:!1};function Yq(){if(hP.current=!0,!!Y2)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>bE.current=e.matches;e.addEventListener("change",t),t()}else bE.current=!1}const Xq=new WeakMap;function Wq(e,t,r){for(const n in t){const l=t[n],i=r[n];if(gn(l))e.addValue(n,l);else if(gn(i))e.addValue(n,ad(l,{owner:e}));else if(i!==l)if(e.hasValue(n)){const u=e.getValue(n);u.liveStyle===!0?u.jump(l):u.hasAnimated||u.set(l)}else{const u=e.getStaticValue(n);e.addValue(n,ad(u!==void 0?u:l,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const BA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Kq{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:l,blockInitialAnimation:i,visualState:u},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const C=Un.now();this.renderScheduledAt<C&&(this.renderScheduledAt=C,Zr.render(this.render,!1,!0))};const{latestValues:h,renderState:p}=u;this.latestValues=h,this.baseTarget={...h},this.initialValues=r.initial?{...h}:{},this.renderState=p,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=l,this.options=g,this.blockInitialAnimation=!!i,this.isControllingVariants=Wp(r),this.isVariantNode=eP(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:y,...v}=this.scrapeMotionValuesFromProps(r,{},this);for(const C in v){const T=v[C];h[C]!==void 0&&gn(T)&&T.set(h[C])}}mount(t){this.current=t,Xq.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),hP.current||Yq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:bE.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Po(this.notifyUpdate),Po(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Ad.has(t);n&&this.onBindTransform&&this.onBindTransform();const l=r.on("change",u=>{this.latestValues[t]=u,this.props.onUpdate&&Zr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{l(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in nd){const r=nd[t];if(!r)continue;const{isEnabled:n,Feature:l}=r;if(!this.features[t]&&l&&n(this.props)&&(this.features[t]=new l(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ua()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<BA.length;n++){const l=BA[n];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const i="on"+l,u=t[i];u&&(this.propEventSubscriptions[l]=this.on(l,u))}this.prevMotionValues=Wq(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=ad(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(ok(n)||uk(n))?n=parseFloat(n):!cq(n)&&Io.test(r)&&(n=qk(t,r)),this.setBaseTarget(t,gn(n)?n.get():n)),gn(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const i=Ew(this.props,r,this.presenceContext?.custom);i&&(n=i[t])}if(r&&n!==void 0)return n;const l=this.getBaseTargetFromProps(this.props,t);return l!==void 0&&!gn(l)?l:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new J2),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){gw.render(this.render)}}class pP extends Kq{constructor(){super(...arguments),this.KeyframeResolver=K$}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;gn(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function yP(e,{style:t,vars:r},n,l){const i=e.style;let u;for(u in t)i[u]=t[u];l?.applyProjectionStyles(i,n);for(u in r)i.setProperty(u,r[u])}function Zq(e){return window.getComputedStyle(e)}class Qq extends pP{constructor(){super(...arguments),this.type="html",this.renderInstance=yP}readValueFromInstance(t,r){if(Ad.has(r))return this.projection?.isProjecting?uE(r):h$(t,r);{const n=Zq(t),l=(rw(r)?n.getPropertyValue(r):n[r])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:r}){return gP(t,r)}build(t,r,n){xw(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return ww(t,r,n)}}const xP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Jq(e,t,r,n){yP(e,t,void 0,n);for(const l in t.attrs)e.setAttribute(xP.has(l)?l:Nw(l),t.attrs[l])}class eG extends pP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ua}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Ad.has(r)){const n=$k(r);return n&&n.default||0}return r=xP.has(r)?r:Nw(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return iP(t,r,n)}build(t,r,n){aP(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,l){Jq(t,r,n,l)}mount(t){this.isSVGTag=sP(t.tagName),super.mount(t)}}const tG=(e,t)=>vw(e)?new eG(t):new Qq(t,{allowProjection:e!==w.Fragment});function Xu(e,t,r){const n=e.getProps();return Ew(n,t,r!==void 0?r:n.custom,e)}const vE=e=>Array.isArray(e);function rG(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,ad(r))}function aG(e){return vE(e)?e[e.length-1]||0:e}function nG(e,t){const r=Xu(e,t);let{transitionEnd:n={},transition:l={},...i}=r||{};i={...i,...n};for(const u in i){const g=aG(i[u]);rG(e,u,g)}}function sG(e){return!!(gn(e)&&e.add)}function EE(e,t){const r=e.getValue("willChange");if(sG(r))return r.add(t);if(!r&&Ni.WillChange){const n=new Ni.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function bP(e){return e.props[oP]}const lG=e=>e!==null;function iG(e,{repeat:t,repeatType:r="loop"},n){const l=e.filter(lG),i=t&&r!=="loop"&&t%2===1?0:l.length-1;return l[i]}const oG={type:"spring",stiffness:500,damping:25,restSpeed:10},cG=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),uG={type:"keyframes",duration:.8},dG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mG=(e,{keyframes:t})=>t.length>2?uG:Ad.has(e)?e.startsWith("scale")?cG(t[1]):oG:dG;function fG({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:l,repeat:i,repeatType:u,repeatDelay:g,from:h,elapsed:p,...y}){return!!Object.keys(y).length}const Sw=(e,t,r,n={},l,i)=>u=>{const g=mw(n,e)||{},h=g.delay||n.delay||0;let{elapsed:p=0}=n;p=p-Il(h);const y={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...g,delay:-p,onUpdate:C=>{t.set(C),g.onUpdate&&g.onUpdate(C)},onComplete:()=>{u(),g.onComplete&&g.onComplete()},name:e,motionValue:t,element:i?void 0:l};fG(g)||Object.assign(y,mG(e,y)),y.duration&&(y.duration=Il(y.duration)),y.repeatDelay&&(y.repeatDelay=Il(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let v=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(hE(y),y.delay===0&&(v=!0)),(Ni.instantAnimations||Ni.skipAnimations)&&(v=!0,hE(y),y.delay=0),y.allowFlatten=!g.type&&!g.ease,v&&!i&&t.get()!==void 0){const C=iG(y.keyframes,g);if(C!==void 0){Zr.update(()=>{y.onUpdate(C),y.onComplete()});return}}return g.isSync?new uw(y):new F$(y)};function gG({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function vP(e,t,{delay:r=0,transitionOverride:n,type:l}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:u,...g}=t;n&&(i=n);const h=[],p=l&&e.animationState&&e.animationState.getState()[l];for(const y in g){const v=e.getValue(y,e.latestValues[y]??null),C=g[y];if(C===void 0||p&&gG(p,y))continue;const T={delay:r,...mw(i||{},y)},D=v.get();if(D!==void 0&&!v.isAnimating&&!Array.isArray(C)&&C===D&&!T.velocity)continue;let P=!1;if(window.MotionHandoffAnimation){const R=bP(e);if(R){const B=window.MotionHandoffAnimation(R,y,Zr);B!==null&&(T.startTime=B,P=!0)}}EE(e,y),v.start(Sw(y,v,C,e.shouldReduceMotion&&zk.has(y)?{type:!1}:T,e,P));const k=v.animation;k&&h.push(k)}return u&&Promise.all(h).then(()=>{Zr.update(()=>{u&&nG(e,u)})}),h}function EP(e,t,r,n=0,l=1){const i=Array.from(e).sort((p,y)=>p.sortNodePosition(y)).indexOf(t),u=e.size,g=(u-1)*n;return typeof r=="function"?r(i,u):l===1?i*n:g-i*n}function wE(e,t,r={}){const n=Xu(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:l=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(l=r.transitionOverride);const i=n?()=>Promise.all(vP(e,n,r)):()=>Promise.resolve(),u=e.variantChildren&&e.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:y,staggerDirection:v}=l;return hG(e,t,h,p,y,v,r)}:()=>Promise.resolve(),{when:g}=l;if(g){const[h,p]=g==="beforeChildren"?[i,u]:[u,i];return h().then(()=>p())}else return Promise.all([i(),u(r.delay)])}function hG(e,t,r=0,n=0,l=0,i=1,u){const g=[];for(const h of e.variantChildren)h.notify("AnimationStart",t),g.push(wE(h,t,{...u,delay:r+(typeof n=="function"?0:n)+EP(e.variantChildren,h,n,l,i)}).then(()=>h.notify("AnimationComplete",t)));return Promise.all(g)}function pG(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const l=t.map(i=>wE(e,i,r));n=Promise.all(l)}else if(typeof t=="string")n=wE(e,t,r);else{const l=typeof t=="function"?Xu(e,t,r.custom):t;n=Promise.all(vP(e,l,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function wP(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const yG=yw.length;function NP(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?NP(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<yG;r++){const n=yw[r],l=e.props[n];(cf(l)||l===!1)&&(t[n]=l)}return t}const xG=[...pw].reverse(),bG=pw.length;function vG(e){return t=>Promise.all(t.map(({animation:r,options:n})=>pG(e,r,n)))}function EG(e){let t=vG(e),r=FA(),n=!0;const l=h=>(p,y)=>{const v=Xu(e,y,h==="exit"?e.presenceContext?.custom:void 0);if(v){const{transition:C,transitionEnd:T,...D}=v;p={...p,...D,...T}}return p};function i(h){t=h(e)}function u(h){const{props:p}=e,y=NP(e.parent)||{},v=[],C=new Set;let T={},D=1/0;for(let k=0;k<bG;k++){const R=xG[k],B=r[R],M=p[R]!==void 0?p[R]:y[R],G=cf(M),F=R===h?B.isActive:null;F===!1&&(D=k);let U=M===y[R]&&M!==p[R]&&G;if(U&&n&&e.manuallyAnimateOnMount&&(U=!1),B.protectedKeys={...T},!B.isActive&&F===null||!M&&!B.prevProp||Xp(M)||typeof M=="boolean")continue;const L=wG(B.prevProp,M);let V=L||R===h&&B.isActive&&!U&&G||k>D&&G,j=!1;const Y=Array.isArray(M)?M:[M];let H=Y.reduce(l(R),{});F===!1&&(H={});const{prevResolvedValues:q={}}=B,le={...q,...H},ue=ae=>{V=!0,C.has(ae)&&(j=!0,C.delete(ae)),B.needsAnimating[ae]=!0;const pe=e.getValue(ae);pe&&(pe.liveStyle=!1)};for(const ae in le){const pe=H[ae],xe=q[ae];if(T.hasOwnProperty(ae))continue;let ee=!1;vE(pe)&&vE(xe)?ee=!wP(pe,xe):ee=pe!==xe,ee?pe!=null?ue(ae):C.add(ae):pe!==void 0&&C.has(ae)?ue(ae):B.protectedKeys[ae]=!0}B.prevProp=M,B.prevResolvedValues=H,B.isActive&&(T={...T,...H}),n&&e.blockInitialAnimation&&(V=!1);const re=U&&L;V&&(!re||j)&&v.push(...Y.map(ae=>{const pe={type:R};if(typeof ae=="string"&&n&&!re&&e.manuallyAnimateOnMount&&e.parent){const{parent:xe}=e,ee=Xu(xe,ae);if(xe.enteringChildren&&ee){const{delayChildren:K}=ee.transition||{};pe.delay=EP(xe.enteringChildren,e,K)}}return{animation:ae,options:pe}}))}if(C.size){const k={};if(typeof p.initial!="boolean"){const R=Xu(e,Array.isArray(p.initial)?p.initial[0]:p.initial);R&&R.transition&&(k.transition=R.transition)}C.forEach(R=>{const B=e.getBaseTarget(R),M=e.getValue(R);M&&(M.liveStyle=!0),k[R]=B??null}),v.push({animation:k})}let P=!!v.length;return n&&(p.initial===!1||p.initial===p.animate)&&!e.manuallyAnimateOnMount&&(P=!1),n=!1,P?t(v):Promise.resolve()}function g(h,p){if(r[h].isActive===p)return Promise.resolve();e.variantChildren?.forEach(v=>v.animationState?.setActive(h,p)),r[h].isActive=p;const y=u(h);for(const v in r)r[v].protectedKeys={};return y}return{animateChanges:u,setActive:g,setAnimateFunction:i,getState:()=>r,reset:()=>{r=FA()}}}function wG(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!wP(t,e):!1}function fc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function FA(){return{animate:fc(!0),whileInView:fc(),whileHover:fc(),whileTap:fc(),whileDrag:fc(),whileFocus:fc(),exit:fc()}}class Fo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class NG extends Fo{constructor(t){super(t),t.animationState||(t.animationState=EG(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Xp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let SG=0;class CG extends Fo{constructor(){super(...arguments),this.id=SG++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const l=this.node.animationState.setActive("exit",!t);r&&!t&&l.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const AG={animation:{Feature:NG},exit:{Feature:CG}};function df(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function Uf(e){return{point:{x:e.pageX,y:e.pageY}}}const TG=e=>t=>hw(t)&&e(t,Uf(t));function Jm(e,t,r,n){return df(e,t,TG(r),n)}const SP=1e-4,OG=1-SP,DG=1+SP,CP=.01,_G=0-CP,kG=0+CP;function wn(e){return e.max-e.min}function PG(e,t,r){return Math.abs(e-t)<=r}function UA(e,t,r,n=.5){e.origin=n,e.originPoint=sa(t.min,t.max,e.origin),e.scale=wn(r)/wn(t),e.translate=sa(r.min,r.max,e.origin)-e.originPoint,(e.scale>=OG&&e.scale<=DG||isNaN(e.scale))&&(e.scale=1),(e.translate>=_G&&e.translate<=kG||isNaN(e.translate))&&(e.translate=0)}function ef(e,t,r,n){UA(e.x,t.x,r.x,n?n.originX:void 0),UA(e.y,t.y,r.y,n?n.originY:void 0)}function jA(e,t,r){e.min=r.min+t.min,e.max=e.min+wn(t)}function IG(e,t,r){jA(e.x,t.x,r.x),jA(e.y,t.y,r.y)}function zA(e,t,r){e.min=t.min-r.min,e.max=e.min+wn(t)}function zh(e,t,r){zA(e.x,t.x,r.x),zA(e.y,t.y,r.y)}function Ds(e){return[e("x"),e("y")]}const AP=({current:e})=>e?e.ownerDocument.defaultView:null,VA=(e,t)=>Math.abs(e-t);function MG(e,t){const r=VA(e.x,t.x),n=VA(e.y,t.y);return Math.sqrt(r**2+n**2)}class TP{constructor(t,r,{transformPagePoint:n,contextWindow:l=window,dragSnapToOrigin:i=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Zx(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,D=MG(C.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!D)return;const{point:P}=C,{timestamp:k}=on;this.history.push({...P,timestamp:k});const{onStart:R,onMove:B}=this.handlers;T||(R&&R(this.lastMoveEvent,C),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,C)},this.handlePointerMove=(C,T)=>{this.lastMoveEvent=C,this.lastMoveEventInfo=Kx(T,this.transformPagePoint),Zr.update(this.updatePoint,!0)},this.handlePointerUp=(C,T)=>{this.end();const{onEnd:D,onSessionEnd:P,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=Zx(C.type==="pointercancel"?this.lastMoveEventInfo:Kx(T,this.transformPagePoint),this.history);this.startEvent&&D&&D(C,R),P&&P(C,R)},!hw(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=u,this.contextWindow=l||window;const g=Uf(t),h=Kx(g,this.transformPagePoint),{point:p}=h,{timestamp:y}=on;this.history=[{...p,timestamp:y}];const{onSessionStart:v}=r;v&&v(t,Zx(h,this.history)),this.removeListeners=Lf(Jm(this.contextWindow,"pointermove",this.handlePointerMove),Jm(this.contextWindow,"pointerup",this.handlePointerUp),Jm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Po(this.updatePoint)}}function Kx(e,t){return t?{point:t(e.point)}:e}function HA(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Zx({point:e},t){return{point:e,delta:HA(e,OP(t)),offset:HA(e,RG(t)),velocity:LG(t,.1)}}function RG(e){return e[0]}function OP(e){return e[e.length-1]}function LG(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const l=OP(e);for(;r>=0&&(n=e[r],!(l.timestamp-n.timestamp>Il(t)));)r--;if(!n)return{x:0,y:0};const i=Ps(l.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const u={x:(l.x-n.x)/i,y:(l.y-n.y)/i};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function BG(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?sa(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?sa(r,e,n.max):Math.min(e,r)),e}function $A(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function FG(e,{top:t,left:r,bottom:n,right:l}){return{x:$A(e.x,r,l),y:$A(e.y,t,n)}}function qA(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function UG(e,t){return{x:qA(e.x,t.x),y:qA(e.y,t.y)}}function jG(e,t){let r=.5;const n=wn(e),l=wn(t);return l>n?r=sf(t.min,t.max-n,e.min):n>l&&(r=sf(e.min,e.max-l,t.min)),wi(0,1,r)}function zG(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const NE=.35;function VG(e=NE){return e===!1?e=0:e===!0&&(e=NE),{x:GA(e,"left","right"),y:GA(e,"top","bottom")}}function GA(e,t,r){return{min:YA(e,t),max:YA(e,r)}}function YA(e,t){return typeof e=="number"?e:e[t]||0}const HG=new WeakMap;class $G{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ua(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const i=v=>{const{dragSnapToOrigin:C}=this.getProps();C?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Uf(v).point)},u=(v,C)=>{const{drag:T,dragPropagation:D,onDragStart:P}=this.getProps();if(T&&!D&&(this.openDragLock&&this.openDragLock(),this.openDragLock=tq(T),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=C,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ds(R=>{let B=this.getAxisMotionValue(R).get()||0;if(Ml.test(B)){const{projection:M}=this.visualElement;if(M&&M.layout){const G=M.layout.layoutBox[R];G&&(B=wn(G)*(parseFloat(B)/100))}}this.originPoint[R]=B}),P&&Zr.postRender(()=>P(v,C)),EE(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},g=(v,C)=>{this.latestPointerEvent=v,this.latestPanInfo=C;const{dragPropagation:T,dragDirectionLock:D,onDirectionLock:P,onDrag:k}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:R}=C;if(D&&this.currentDirection===null){this.currentDirection=qG(R),this.currentDirection!==null&&P&&P(this.currentDirection);return}this.updateAxis("x",C.point,R),this.updateAxis("y",C.point,R),this.visualElement.render(),k&&k(v,C)},h=(v,C)=>{this.latestPointerEvent=v,this.latestPanInfo=C,this.stop(v,C),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>Ds(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:y}=this.getProps();this.panSession=new TP(t,{onSessionStart:i,onStart:u,onMove:g,onSessionEnd:h,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:n,contextWindow:AP(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,l=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!l||!n)return;const{velocity:u}=l;this.startAnimation(u);const{onDragEnd:g}=this.getProps();g&&Zr.postRender(()=>g(n,l))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:l}=this.getProps();if(!n||!kg(t,l,this.currentDirection))return;const i=this.getAxisMotionValue(t);let u=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(u=BG(u,this.constraints[t],this.elastic[t])),i.set(u)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,l=this.constraints;t&&ju(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=FG(n.layoutBox,t):this.constraints=!1,this.elastic=VG(r),l!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ds(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=zG(n.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!ju(t))return!1;const n=t.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const i=Gq(n,l.root,this.visualElement.getTransformPagePoint());let u=UG(l.layout.layoutBox,i);if(r){const g=r(Hq(u));this.hasMutatedConstraints=!!g,g&&(u=dP(g))}return u}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:l,dragTransition:i,dragSnapToOrigin:u,onDragTransitionEnd:g}=this.getProps(),h=this.constraints||{},p=Ds(y=>{if(!kg(y,r,this.currentDirection))return;let v=h&&h[y]||{};u&&(v={min:0,max:0});const C=l?200:1e6,T=l?40:1e7,D={type:"inertia",velocity:n?t[y]:0,bounceStiffness:C,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...i,...v};return this.startAxisValueAnimation(y,D)});return Promise.all(p).then(g)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return EE(this.visualElement,t),n.start(Sw(t,n,0,r,this.visualElement,!1))}stopAnimation(){Ds(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ds(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),l=n[r];return l||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Ds(r=>{const{drag:n}=this.getProps();if(!kg(r,n,this.currentDirection))return;const{projection:l}=this.visualElement,i=this.getAxisMotionValue(r);if(l&&l.layout){const{min:u,max:g}=l.layout.layoutBox[r];i.set(t[r]-sa(u,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!ju(r)||!n||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};Ds(u=>{const g=this.getAxisMotionValue(u);if(g&&this.constraints!==!1){const h=g.get();l[u]=jG({min:h,max:h},this.constraints[u])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ds(u=>{if(!kg(u,t,null))return;const g=this.getAxisMotionValue(u),{min:h,max:p}=this.constraints[u];g.set(sa(h,p,l[u]))})}addListeners(){if(!this.visualElement.current)return;HG.set(this.visualElement,this);const t=this.visualElement.current,r=Jm(t,"pointerdown",h=>{const{drag:p,dragListener:y=!0}=this.getProps();p&&y&&this.start(h)}),n=()=>{const{dragConstraints:h}=this.getProps();ju(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,i=l.addEventListener("measure",n);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),Zr.read(n);const u=df(window,"resize",()=>this.scalePositionWithinConstraints()),g=l.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:p})=>{this.isDragging&&p&&(Ds(y=>{const v=this.getAxisMotionValue(y);v&&(this.originPoint[y]+=h[y].translate,v.set(v.get()+h[y].translate))}),this.visualElement.render())}));return()=>{u(),r(),i(),g&&g()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:l=!1,dragConstraints:i=!1,dragElastic:u=NE,dragMomentum:g=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:l,dragConstraints:i,dragElastic:u,dragMomentum:g}}}function kg(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function qG(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class GG extends Fo{constructor(t){super(t),this.removeGroupControls=Ms,this.removeListeners=Ms,this.controls=new $G(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ms}unmount(){this.removeGroupControls(),this.removeListeners()}}const XA=e=>(t,r)=>{e&&Zr.postRender(()=>e(t,r))};class YG extends Fo{constructor(){super(...arguments),this.removePointerDownListener=Ms}onPointerDown(t){this.session=new TP(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:AP(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:l}=this.node.getProps();return{onSessionStart:XA(t),onStart:XA(r),onMove:n,onEnd:(i,u)=>{delete this.session,l&&Zr.postRender(()=>l(i,u))}}}mount(){this.removePointerDownListener=Jm(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Eh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WA(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Tm={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Dt.test(e))e=parseFloat(e);else return e;const r=WA(e,t.target.x),n=WA(e,t.target.y);return`${r}% ${n}%`}},XG={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,l=Io.parse(e);if(l.length>5)return n;const i=Io.createTransformer(e),u=typeof l[0]!="number"?1:0,g=r.x.scale*t.x,h=r.y.scale*t.y;l[0+u]/=g,l[1+u]/=h;const p=sa(g,h,.5);return typeof l[2+u]=="number"&&(l[2+u]/=p),typeof l[3+u]=="number"&&(l[3+u]/=p),i(l)}};let Qx=!1;class WG extends w.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:l}=this.props,{projection:i}=t;yq(KG),i&&(r.group&&r.group.add(i),n&&n.register&&l&&n.register(i),Qx&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Eh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:l,isPresent:i}=this.props,{projection:u}=n;return u&&(u.isPresent=i,Qx=!0,l||t.layoutDependency!==r||r===void 0||t.isPresent!==i?u.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?u.promote():u.relegate()||Zr.postRender(()=>{const g=u.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),gw.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:l}=t;Qx=!0,l&&(l.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(l),n&&n.deregister&&n.deregister(l))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function DP(e){const[t,r]=uq(),n=w.useContext(ik);return aE.jsx(WG,{...e,layoutGroup:n,switchLayoutGroup:w.useContext(cP),isPresent:t,safeToRemove:r})}const KG={borderRadius:{...Tm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tm,borderTopRightRadius:Tm,borderBottomLeftRadius:Tm,borderBottomRightRadius:Tm,boxShadow:XG};function ZG(e,t,r){const n=gn(e)?e:ad(e);return n.start(Sw("",n,t,r)),n.animation}const QG=(e,t)=>e.depth-t.depth;class JG{constructor(){this.children=[],this.isDirty=!1}add(t){W2(this.children,t),this.isDirty=!0}remove(t){K2(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(QG),this.isDirty=!1,this.children.forEach(t)}}function eY(e,t){const r=Un.now(),n=({timestamp:l})=>{const i=l-r;i>=t&&(Po(n),e(i-t))};return Zr.setup(n,!0),()=>Po(n)}const _P=["TopLeft","TopRight","BottomLeft","BottomRight"],tY=_P.length,KA=e=>typeof e=="string"?parseFloat(e):e,ZA=e=>typeof e=="number"||Dt.test(e);function rY(e,t,r,n,l,i){l?(e.opacity=sa(0,r.opacity??1,aY(n)),e.opacityExit=sa(t.opacity??1,0,nY(n))):i&&(e.opacity=sa(t.opacity??1,r.opacity??1,n));for(let u=0;u<tY;u++){const g=`border${_P[u]}Radius`;let h=QA(t,g),p=QA(r,g);if(h===void 0&&p===void 0)continue;h||(h=0),p||(p=0),h===0||p===0||ZA(h)===ZA(p)?(e[g]=Math.max(sa(KA(h),KA(p),n),0),(Ml.test(p)||Ml.test(h))&&(e[g]+="%")):e[g]=p}(t.rotate||r.rotate)&&(e.rotate=sa(t.rotate||0,r.rotate||0,n))}function QA(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const aY=kP(0,.5,xk),nY=kP(.5,.95,Ms);function kP(e,t,r){return n=>n<e?0:n>t?1:r(sf(e,t,n))}function JA(e,t){e.min=t.min,e.max=t.max}function Zs(e,t){JA(e.x,t.x),JA(e.y,t.y)}function e5(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function t5(e,t,r,n,l){return e-=t,e=jh(e,1/r,n),l!==void 0&&(e=jh(e,1/l,n)),e}function sY(e,t=0,r=1,n=.5,l,i=e,u=e){if(Ml.test(t)&&(t=parseFloat(t),t=sa(u.min,u.max,t/100)-u.min),typeof t!="number")return;let g=sa(i.min,i.max,n);e===i&&(g-=t),e.min=t5(e.min,t,r,g,l),e.max=t5(e.max,t,r,g,l)}function r5(e,t,[r,n,l],i,u){sY(e,t[r],t[n],t[l],t.scale,i,u)}const lY=["x","scaleX","originX"],iY=["y","scaleY","originY"];function a5(e,t,r,n){r5(e.x,t,lY,r?r.x:void 0,n?n.x:void 0),r5(e.y,t,iY,r?r.y:void 0,n?n.y:void 0)}function n5(e){return e.translate===0&&e.scale===1}function PP(e){return n5(e.x)&&n5(e.y)}function s5(e,t){return e.min===t.min&&e.max===t.max}function oY(e,t){return s5(e.x,t.x)&&s5(e.y,t.y)}function l5(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function IP(e,t){return l5(e.x,t.x)&&l5(e.y,t.y)}function i5(e){return wn(e.x)/wn(e.y)}function o5(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class cY{constructor(){this.members=[]}add(t){W2(this.members,t),t.scheduleRender()}remove(t){if(K2(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(l=>t===l);if(r===0)return!1;let n;for(let l=r;l>=0;l--){const i=this.members[l];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:l}=t.options;l===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function uY(e,t,r){let n="";const l=e.x.translate/t.x,i=e.y.translate/t.y,u=r?.z||0;if((l||i||u)&&(n=`translate3d(${l}px, ${i}px, ${u}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:p,rotate:y,rotateX:v,rotateY:C,skewX:T,skewY:D}=r;p&&(n=`perspective(${p}px) ${n}`),y&&(n+=`rotate(${y}deg) `),v&&(n+=`rotateX(${v}deg) `),C&&(n+=`rotateY(${C}deg) `),T&&(n+=`skewX(${T}deg) `),D&&(n+=`skewY(${D}deg) `)}const g=e.x.scale*t.x,h=e.y.scale*t.y;return(g!==1||h!==1)&&(n+=`scale(${g}, ${h})`),n||"none"}const Jx=["","X","Y","Z"],dY=1e3;let mY=0;function eb(e,t,r,n){const{latestValues:l}=t;l[e]&&(r[e]=l[e],t.setStaticValue(e,0),n&&(n[e]=0))}function MP(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=bP(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:l,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Zr,!(l||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&MP(n)}function RP({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:l}){return class{constructor(u={},g=t?.()){this.id=mY++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(hY),this.nodes.forEach(bY),this.nodes.forEach(vY),this.nodes.forEach(pY)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new JG)}addEventListener(u,g){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new J2),this.eventHandlers.get(u).add(g)}notifyListeners(u,...g){const h=this.eventHandlers.get(u);h&&h.notify(...g)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=Kk(u)&&!iq(u),this.instance=u;const{layoutId:g,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||g)&&(this.isLayoutDirty=!0),e){let y,v=0;const C=()=>this.root.updateBlockedByResize=!1;Zr.read(()=>{v=window.innerWidth}),e(u,()=>{const T=window.innerWidth;T!==v&&(v=T,this.root.updateBlockedByResize=!0,y&&y(),y=eY(C,250),Eh.hasAnimatedSinceResize&&(Eh.hasAnimatedSinceResize=!1,this.nodes.forEach(d5)))})}g&&this.root.registerSharedNode(g,this),this.options.animate!==!1&&p&&(g||h)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:v,hasRelativeLayoutChanged:C,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const D=this.options.transition||p.getDefaultTransition()||CY,{onLayoutAnimationStart:P,onLayoutAnimationComplete:k}=p.getProps(),R=!this.targetLayout||!IP(this.targetLayout,T),B=!v&&C;if(this.options.layoutRoot||this.resumeFrom||B||v&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...mw(D,"layout"),onPlay:P,onComplete:k};(p.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(y,B)}else v||d5(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Po(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(EY),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&MP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const v=this.path[y];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:g,layout:h}=this.options;if(g===void 0&&!h)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(c5);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(u5);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(xY),this.nodes.forEach(fY),this.nodes.forEach(gY)):this.nodes.forEach(u5),this.clearAllSnapshots();const g=Un.now();on.delta=wi(0,1e3/60,g-on.timestamp),on.timestamp=g,on.isProcessing=!0,Vx.update.process(on),Vx.preRender.process(on),Vx.render.process(on),on.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,gw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yY),this.sharedNodes.forEach(wY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Zr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Zr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!wn(this.snapshot.measuredBox.x)&&!wn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ua(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let g=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(g=!1),g&&this.instance){const h=n(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:h,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!l)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,g=this.projectionDelta&&!PP(this.projectionDelta),h=this.getTransformTemplate(),p=h?h(this.latestValues,""):void 0,y=p!==this.prevTransformTemplateValue;u&&this.instance&&(g||xc(this.latestValues)||y)&&(l(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const g=this.measurePageBox();let h=this.removeElementScroll(g);return u&&(h=this.removeTransform(h)),AY(h),{animationId:this.root.animationId,measuredBox:g,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return Ua();const g=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(TY))){const{scroll:p}=this.root;p&&(zu(g.x,p.offset.x),zu(g.y,p.offset.y))}return g}removeElementScroll(u){const g=Ua();if(Zs(g,u),this.scroll?.wasRoot)return g;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:y,options:v}=p;p!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&Zs(g,u),zu(g.x,y.offset.x),zu(g.y,y.offset.y))}return g}applyTransform(u,g=!1){const h=Ua();Zs(h,u);for(let p=0;p<this.path.length;p++){const y=this.path[p];!g&&y.options.layoutScroll&&y.scroll&&y!==y.root&&Vu(h,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),xc(y.latestValues)&&Vu(h,y.latestValues)}return xc(this.latestValues)&&Vu(h,this.latestValues),h}removeTransform(u){const g=Ua();Zs(g,u);for(let h=0;h<this.path.length;h++){const p=this.path[h];if(!p.instance||!xc(p.latestValues))continue;yE(p.latestValues)&&p.updateSnapshot();const y=Ua(),v=p.measurePageBox();Zs(y,v),a5(g,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,y)}return xc(this.latestValues)&&a5(g,this.latestValues),g}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==on.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const g=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=g.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=g.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=g.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==g;if(!(u||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:v}=this.options;if(!this.layout||!(y||v))return;this.resolvedRelativeTargetAt=on.timestamp;const C=this.getClosestProjectingParent();C&&this.linkedParentVersion!==C.layoutVersion&&!C.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(C&&C.layout?this.createRelativeTarget(C,this.layout.layoutBox,C.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ua(),this.targetWithTransforms=Ua()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),IG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zs(this.target,this.layout.layoutBox),fP(this.target,this.targetDelta)):Zs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,C&&!!C.resumingFrom==!!this.resumingFrom&&!C.options.layoutScroll&&C.target&&this.animationProgress!==1?this.createRelativeTarget(C,this.target,C.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||yE(this.parent.latestValues)||mP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,g,h){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ua(),this.relativeTargetOrigin=Ua(),zh(this.relativeTargetOrigin,g,h),Zs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const u=this.getLead(),g=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),g&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===on.timestamp&&(h=!1),h)return;const{layout:p,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||y))return;Zs(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,C=this.treeScale.y;qq(this.layoutCorrected,this.treeScale,this.path,g),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Ua());const{target:T}=u;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(e5(this.prevProjectionDelta.x,this.projectionDelta.x),e5(this.prevProjectionDelta.y,this.projectionDelta.y)),ef(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==C||!o5(this.projectionDelta.x,this.prevProjectionDelta.x)||!o5(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Hu(),this.projectionDelta=Hu(),this.projectionDeltaWithTransform=Hu()}setAnimationOrigin(u,g=!1){const h=this.snapshot,p=h?h.latestValues:{},y={...this.latestValues},v=Hu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const C=Ua(),T=h?h.source:void 0,D=this.layout?this.layout.source:void 0,P=T!==D,k=this.getStack(),R=!k||k.members.length<=1,B=!!(P&&!R&&this.options.crossfade===!0&&!this.path.some(SY));this.animationProgress=0;let M;this.mixTargetDelta=G=>{const F=G/1e3;m5(v.x,u.x,F),m5(v.y,u.y,F),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zh(C,this.layout.layoutBox,this.relativeParent.layout.layoutBox),NY(this.relativeTarget,this.relativeTargetOrigin,C,F),M&&oY(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Ua()),Zs(M,this.relativeTarget)),P&&(this.animationValues=y,rY(y,p,this.latestValues,F,B,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Po(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Zr.update(()=>{Eh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ad(0)),this.currentAnimation=ZG(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),u.onUpdate&&u.onUpdate(g)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(dY),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:g,target:h,layout:p,latestValues:y}=u;if(!(!g||!h||!p)){if(this!==u&&this.layout&&p&&LP(this.options.animationType,this.layout.layoutBox,p.layoutBox)){h=this.target||Ua();const v=wn(this.layout.layoutBox.x);h.x.min=u.target.x.min,h.x.max=h.x.min+v;const C=wn(this.layout.layoutBox.y);h.y.min=u.target.y.min,h.y.max=h.y.min+C}Zs(g,h),Vu(g,y),ef(this.projectionDeltaWithTransform,this.layoutCorrected,g,y)}}registerSharedNode(u,g){this.sharedNodes.has(u)||this.sharedNodes.set(u,new cY),this.sharedNodes.get(u).add(g);const p=g.options.initialPromotionConfig;g.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(g):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:g,preserveFollowOpacity:h}={}){const p=this.getStack();p&&p.promote(this,h),u&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let g=!1;const{latestValues:h}=u;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(g=!0),!g)return;const p={};h.z&&eb("z",u,p,this.animationValues);for(let y=0;y<Jx.length;y++)eb(`rotate${Jx[y]}`,u,p,this.animationValues),eb(`skew${Jx[y]}`,u,p,this.animationValues);u.render();for(const y in p)u.setStaticValue(y,p[y]),this.animationValues&&(this.animationValues[y]=p[y]);u.scheduleRender()}applyProjectionStyles(u,g){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=vh(g?.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=vh(g?.pointerEvents)||""),this.hasProjected&&!xc(this.latestValues)&&(u.transform=h?h({},""):"none",this.hasProjected=!1);return}u.visibility="";const y=p.animationValues||p.latestValues;this.applyTransformsToTarget();let v=uY(this.projectionDeltaWithTransform,this.treeScale,y);h&&(v=h(y,v)),u.transform=v;const{x:C,y:T}=this.projectionDelta;u.transformOrigin=`${C.origin*100}% ${T.origin*100}% 0`,p.animationValues?u.opacity=p===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:u.opacity=p===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const D in uf){if(y[D]===void 0)continue;const{correct:P,applyTo:k,isCSSVariable:R}=uf[D],B=v==="none"?y[D]:P(y[D],p);if(k){const M=k.length;for(let G=0;G<M;G++)u[k[G]]=B}else R?this.options.visualElement.renderState.vars[D]=B:u[D]=B}this.options.layoutId&&(u.pointerEvents=p===this?vh(g?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(c5),this.root.sharedNodes.clear()}}}function fY(e){e.updateLayout()}function gY(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=e.layout,{animationType:l}=e.options,i=t.source!==e.layout.source;l==="size"?Ds(y=>{const v=i?t.measuredBox[y]:t.layoutBox[y],C=wn(v);v.min=r[y].min,v.max=v.min+C}):LP(l,t.layoutBox,r)&&Ds(y=>{const v=i?t.measuredBox[y]:t.layoutBox[y],C=wn(r[y]);v.max=v.min+C,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[y].max=e.relativeTarget[y].min+C)});const u=Hu();ef(u,r,t.layoutBox);const g=Hu();i?ef(g,e.applyTransform(n,!0),t.measuredBox):ef(g,r,t.layoutBox);const h=!PP(u);let p=!1;if(!e.resumeFrom){const y=e.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:C}=y;if(v&&C){const T=Ua();zh(T,t.layoutBox,v.layoutBox);const D=Ua();zh(D,r,C.layoutBox),IP(T,D)||(p=!0),y.options.layoutRoot&&(e.relativeTarget=D,e.relativeTargetOrigin=T,e.relativeParent=y)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:g,layoutDelta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:p})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function hY(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function pY(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function yY(e){e.clearSnapshot()}function c5(e){e.clearMeasurements()}function u5(e){e.isLayoutDirty=!1}function xY(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function d5(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function bY(e){e.resolveTargetDelta()}function vY(e){e.calcProjection()}function EY(e){e.resetSkewAndRotation()}function wY(e){e.removeLeadSnapshot()}function m5(e,t,r){e.translate=sa(t.translate,0,r),e.scale=sa(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function f5(e,t,r,n){e.min=sa(t.min,r.min,n),e.max=sa(t.max,r.max,n)}function NY(e,t,r,n){f5(e.x,t.x,r.x,n),f5(e.y,t.y,r.y,n)}function SY(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const CY={duration:.45,ease:[.4,0,.1,1]},g5=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),h5=g5("applewebkit/")&&!g5("chrome/")?Math.round:Ms;function p5(e){e.min=h5(e.min),e.max=h5(e.max)}function AY(e){p5(e.x),p5(e.y)}function LP(e,t,r){return e==="position"||e==="preserve-aspect"&&!PG(i5(t),i5(r),.2)}function TY(e){return e!==e.root&&e.scroll?.wasRoot}const OY=RP({attachResizeListener:(e,t)=>df(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tb={current:void 0},BP=RP({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!tb.current){const e=new OY({});e.mount(window),e.setOptions({layoutScroll:!0}),tb.current=e}return tb.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),DY={pan:{Feature:YG},drag:{Feature:GG,ProjectionNode:BP,MeasureLayout:DP}};function y5(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const l="onHover"+r,i=n[l];i&&Zr.postRender(()=>i(t,Uf(t)))}class _Y extends Fo{mount(){const{current:t}=this.node;t&&(this.unmount=rq(t,(r,n)=>(y5(this.node,n,"Start"),l=>y5(this.node,l,"End"))))}unmount(){}}class kY extends Fo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Lf(df(this.node.current,"focus",()=>this.onFocus()),df(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function x5(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const l="onTap"+(r==="End"?"":r),i=n[l];i&&Zr.postRender(()=>i(t,Uf(t)))}class PY extends Fo{mount(){const{current:t}=this.node;t&&(this.unmount=lq(t,(r,n)=>(x5(this.node,n,"Start"),(l,{success:i})=>x5(this.node,l,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const SE=new WeakMap,rb=new WeakMap,IY=e=>{const t=SE.get(e.target);t&&t(e)},MY=e=>{e.forEach(IY)};function RY({root:e,...t}){const r=e||document;rb.has(r)||rb.set(r,{});const n=rb.get(r),l=JSON.stringify(t);return n[l]||(n[l]=new IntersectionObserver(MY,{root:e,...t})),n[l]}function LY(e,t,r){const n=RY(t);return SE.set(e,r),n.observe(e),()=>{SE.delete(e),n.unobserve(e)}}const BY={some:0,all:1};class FY extends Fo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:l="some",once:i}=t,u={root:r?r.current:void 0,rootMargin:n,threshold:typeof l=="number"?l:BY[l]},g=h=>{const{isIntersecting:p}=h;if(this.isInView===p||(this.isInView=p,i&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:y,onViewportLeave:v}=this.node.getProps(),C=p?y:v;C&&C(h)};return LY(this.node.current,u,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(UY(t,r))&&this.startObserver()}unmount(){}}function UY({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const jY={inView:{Feature:FY},tap:{Feature:PY},focus:{Feature:kY},hover:{Feature:_Y}},zY={layout:{ProjectionNode:BP,MeasureLayout:DP}},VY={...AG,...jY,...DY,...zY},FP=Vq(VY,tG),HY=[{value:"lifetime",label:"All Time",icon:""},{value:"last12Months",label:"12 Months",icon:"12M"},{value:"last6Months",label:"6 Months",icon:"6M"},{value:"last3Months",label:"3 Months",icon:"3M"},{value:"lastMonth",label:"Last Month",icon:"1M"},{value:"thisMonth",label:"This Month",icon:"TM"}],$Y=({selected:e,onChange:t})=>a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-2"},a.createElement("div",{className:"flex flex-wrap gap-2"},HY.map(r=>a.createElement(FP.button,{key:r.value,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(r.value),className:`
              px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200
              ${e===r.value?"bg-gray-800 text-white shadow-md":"bg-gray-50 text-gray-700 hover:bg-gray-100"}
            `},a.createElement("span",{className:"hidden sm:inline"},r.label),a.createElement("span",{className:"sm:hidden font-semibold"},r.icon)))));function qY(e){return Vt({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"},child:[]}]})(e)}function GY(e){return Vt({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"},child:[]},{tag:"path",attr:{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"},child:[]}]})(e)}const Pa=({title:e,value:t,subtitle:r,icon:n,trend:l,trendDirection:i="neutral",bgColor:u="bg-white",iconColor:g="text-gray-800",children:h,loading:p=!1})=>{const y={up:"text-green-600 bg-green-50",down:"text-red-600 bg-red-50",neutral:"text-gray-600 bg-gray-50"};return p?a.createElement("div",{className:`${u} rounded-lg shadow-sm border border-gray-100 p-4 animate-pulse`},a.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-3"}),a.createElement("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),a.createElement("div",{className:"h-2 bg-gray-200 rounded w-1/3"})):a.createElement(FP.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`${u} rounded-lg shadow-sm hover:shadow-md transition-all duration-200 border border-gray-100 p-4`},a.createElement("div",{className:"flex items-start justify-between mb-2"},a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-xs font-medium text-gray-600 mb-1 uppercase tracking-wide"},e),a.createElement("h3",{className:"text-xl font-bold text-gray-900 truncate"},t),r&&a.createElement("p",{className:"text-xs text-gray-500 mt-0.5 truncate"},r)),n&&a.createElement("div",{className:`${g} bg-opacity-10 p-2 rounded-lg flex-shrink-0 ml-2`},n)),l&&a.createElement("div",{className:"flex items-center gap-2"},a.createElement("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${y[i]}`},l),a.createElement("span",{className:"text-xs text-gray-500"},"vs last period")),h&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-100"},h))},YY=async()=>Pe(ke.get("/web/analytics/dashboard")),el=e=>!e&&e!==0?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Sr=e=>!e&&e!==0?"0":e>=1e7?`${(e/1e7).toFixed(1)}Cr`:e>=1e5?`${(e/1e5).toFixed(1)}L`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString(),XY=e=>{if(!e)return"N/A";const t=new Date(e);return new Intl.DateTimeFormat("en-IN",{day:"numeric",month:"short",year:"numeric"}).format(t)},WY=({data:e,loading:t})=>{if(!e)return a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},[1,2,3,4].map(i=>a.createElement(Pa,{key:i,loading:!0})));const{email:r,whatsapp:n,totalCommunications:l}=e;return a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("h2",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Communication Analytics"),a.createElement("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-green-50 px-2 py-1 rounded-full border border-green-200"},a.createElement("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),a.createElement("span",null,"Real-time"))),a.createElement("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3"},a.createElement(Pa,{title:"Total Communications",value:Sr(l),subtitle:"All channels combined",icon:a.createElement(qY,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:t}),a.createElement(Pa,{title:"Email Messages",value:Sr(r.total),subtitle:`${r.successRate} success rate`,icon:a.createElement(GY,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:t}),a.createElement(Pa,{title:"WhatsApp Messages",value:Sr(n.total),subtitle:`${n.successRate} success rate`,icon:a.createElement("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})),iconColor:"text-green-600",loading:t}),a.createElement(Pa,{title:"Overall Success Rate",value:l>0?((r.successful+n.successful)/l*100).toFixed(1)+"%":"0%",subtitle:"Across all channels",icon:a.createElement(rd,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:t})))};function KY(e){return Vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 32C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48H48zm0 32h106c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H38c-3.3 0-6-2.7-6-6V80c0-8.8 7.2-16 16-16zm426 96H38c-3.3 0-6-2.7-6-6v-36c0-3.3 2.7-6 6-6h138l30.2-45.3c1.1-1.7 3-2.7 5-2.7H464c8.8 0 16 7.2 16 16v74c0 3.3-2.7 6-6 6zM256 424c-66.2 0-120-53.8-120-120s53.8-120 120-120 120 53.8 120 120-53.8 120-120 120zm0-208c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm-48 104c-8.8 0-16-7.2-16-16 0-35.3 28.7-64 64-64 8.8 0 16 7.2 16 16s-7.2 16-16 16c-17.6 0-32 14.4-32 32 0 8.8-7.2 16-16 16z"},child:[]}]})(e)}function UP(e){return Vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(e)}function ZY(e){return Vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 174.8l-39.6-39.6c-9.4-9.4-24.6-9.4-33.9 0L192 374.7 80.6 263.2c-9.4-9.4-24.6-9.4-33.9 0L7 302.9c-9.4 9.4-9.4 24.6 0 34L175 505c9.4 9.4 24.6 9.4 33.9 0l296-296.2c9.4-9.5 9.4-24.7.1-34zm-324.3 106c6.2 6.3 16.4 6.3 22.6 0l208-208.2c6.2-6.3 6.2-16.4 0-22.6L366.1 4.7c-6.2-6.3-16.4-6.3-22.6 0L192 156.2l-55.4-55.5c-6.2-6.3-16.4-6.3-22.6 0L68.7 146c-6.2 6.3-6.2 16.4 0 22.6l112 112.2z"},child:[]}]})(e)}function CE(e){return Vt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"},child:[]}]})(e)}function AE(e){return Vt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function Om(e){return Vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M223.75 130.75L154.62 15.54A31.997 31.997 0 0 0 127.18 0H16.03C3.08 0-4.5 14.57 2.92 25.18l111.27 158.96c29.72-27.77 67.52-46.83 109.56-53.39zM495.97 0H384.82c-11.24 0-21.66 5.9-27.44 15.54l-69.13 115.21c42.04 6.56 79.84 25.62 109.56 53.38L509.08 25.18C516.5 14.57 508.92 0 495.97 0zM256 160c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm92.52 157.26l-37.93 36.96 8.97 52.22c1.6 9.36-8.26 16.51-16.65 12.09L256 393.88l-46.9 24.65c-8.4 4.45-18.25-2.74-16.65-12.09l8.97-52.22-37.93-36.96c-6.82-6.64-3.05-18.23 6.35-19.59l52.43-7.64 23.43-47.52c2.11-4.28 6.19-6.39 10.28-6.39 4.11 0 8.22 2.14 10.33 6.39l23.43 47.52 52.43 7.64c9.4 1.36 13.17 12.95 6.35 19.59z"},child:[]}]})(e)}function Vh(e){return Vt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M128 160h320v192H128V160zm400 96c0 26.51 21.49 48 48 48v96c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48v-96c26.51 0 48-21.49 48-48s-21.49-48-48-48v-96c0-26.51 21.49-48 48-48h480c26.51 0 48 21.49 48 48v96c-26.51 0-48 21.49-48 48zm-48-104c0-13.255-10.745-24-24-24H120c-13.255 0-24 10.745-24 24v208c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V152z"},child:[]}]})(e)}function QY(e){return Vt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function jP(e){return Vt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}const JY=({usersData:e,adminsData:t,loading:r})=>a.createElement("div",{className:"space-y-4"},a.createElement("h2",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Users & Admins"),a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4"},e&&a.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},a.createElement("div",{className:"flex items-start justify-between mb-3"},a.createElement("div",null,a.createElement("h3",{className:"text-xs font-medium text-gray-600 mb-1"},"Total Users"),a.createElement("p",{className:"text-3xl font-bold text-gray-900"},Sr(e.total))),a.createElement("div",{className:"p-2 bg-blue-50 rounded-lg"},a.createElement(jP,{className:"w-6 h-6 text-gray-800"}))),e.growth&&a.createElement("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-50 border border-green-200 mb-3"},a.createElement("span",{className:"text-xs font-bold text-green-700"},e.growth),a.createElement("span",{className:"text-xs text-gray-600"},"growth")),a.createElement("div",{className:"grid grid-cols-2 gap-2 mt-3"},a.createElement("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-3 rounded-lg border border-green-100"},a.createElement("div",{className:"flex items-center gap-1.5 mb-1"},a.createElement(QY,{className:"w-3 h-3 text-green-600"}),a.createElement("p",{className:"text-xs font-medium text-gray-600"},"This Month")),a.createElement("p",{className:"text-xl font-bold text-green-700"},Sr(e.thisMonth))),a.createElement("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200"},a.createElement("p",{className:"text-xs font-medium text-gray-600 mb-1"},"Last Month"),a.createElement("p",{className:"text-xl font-bold text-gray-900"},Sr(e.lastMonth))))),t&&a.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},a.createElement("div",{className:"flex items-start justify-between mb-3"},a.createElement("div",null,a.createElement("h3",{className:"text-xs font-medium text-gray-600 mb-1"},"Total Admins"),a.createElement("p",{className:"text-3xl font-bold text-gray-900"},Sr(t.total))),a.createElement("div",{className:"p-2 bg-purple-50 rounded-lg"},a.createElement(IV,{className:"w-6 h-6 text-purple-600"}))),a.createElement("div",{className:"flex items-center gap-2 mb-3"},a.createElement("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-50 border border-green-200"},a.createElement(FV,{className:"w-3 h-3 text-green-600"}),a.createElement("span",{className:"text-xs font-bold text-gray-900"},t.active),a.createElement("span",{className:"text-xs text-gray-600"},"active")),a.createElement("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gray-100 border border-gray-200"},a.createElement("span",{className:"text-xs font-bold text-gray-900"},t.inactive),a.createElement("span",{className:"text-xs text-gray-600"},"inactive"))),t.byRole&&Object.keys(t.byRole).length>0&&a.createElement("div",{className:"space-y-1.5 mt-3 pt-3 border-t border-gray-200"},a.createElement("p",{className:"text-xs font-semibold text-gray-600 uppercase mb-1.5"},"By Role"),Object.entries(t.byRole).map(([n,l])=>a.createElement("div",{key:n,className:"flex items-center justify-between text-xs p-2 rounded-lg bg-purple-50 hover:bg-purple-100 transition-colors"},a.createElement("span",{className:"font-medium text-gray-900 capitalize"},n.replace("_"," ")),a.createElement("span",{className:"font-bold text-purple-700"},l)))))));var eX=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Cw(e){if(typeof e!="string")return!1;var t=eX;return t.includes(e)}var tX=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],rX=new Set(tX);function zP(e){return typeof e!="string"?!1:rX.has(e)}function VP(e){return typeof e=="string"&&e.startsWith("data-")}function sd(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(zP(r)||VP(r))&&(t[r]=e[r]);return t}function TE(e){if(e==null)return null;if(w.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return sd(t)}return typeof e=="object"&&!Array.isArray(e)?sd(e):null}function Ls(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(zP(r)||VP(r)||Cw(r))&&(t[r]=e[r]);return t}var aX=["children","width","height","viewBox","className","style","title","desc"];function OE(){return OE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OE.apply(null,arguments)}function nX(e,t){if(e==null)return{};var r,n,l=sX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function sX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Aw=w.forwardRef((e,t)=>{var{children:r,width:n,height:l,viewBox:i,className:u,style:g,title:h,desc:p}=e,y=nX(e,aX),v=i||{width:n,height:l,x:0,y:0},C=Ea("recharts-surface",u);return w.createElement("svg",OE({},Ls(y),{className:C,width:n,height:l,style:g,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height),ref:t}),w.createElement("title",null,h),w.createElement("desc",null,p),r)}),lX=["children","className"];function DE(){return DE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DE.apply(null,arguments)}function iX(e,t){if(e==null)return{};var r,n,l=oX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function oX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Mo=w.forwardRef((e,t)=>{var{children:r,className:n}=e,l=iX(e,lX),i=Ea("recharts-layer",n);return w.createElement("g",DE({className:i},Ls(l),{ref:t}),r)}),HP=w.createContext(null),cX=()=>w.useContext(HP);function Ir(e){return function(){return e}}const $P=Math.cos,Hh=Math.sin,gl=Math.sqrt,$h=Math.PI,Kp=2*$h,_E=Math.PI,kE=2*_E,bc=1e-6,uX=kE-bc;function qP(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function dX(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return qP;const r=10**t;return function(n){this._+=n[0];for(let l=1,i=n.length;l<i;++l)this._+=Math.round(arguments[l]*r)/r+n[l]}}class mX{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?qP:dX(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,l){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+l}`}bezierCurveTo(t,r,n,l,i,u){this._append`C${+t},${+r},${+n},${+l},${this._x1=+i},${this._y1=+u}`}arcTo(t,r,n,l,i){if(t=+t,r=+r,n=+n,l=+l,i=+i,i<0)throw new Error(`negative radius: ${i}`);let u=this._x1,g=this._y1,h=n-t,p=l-r,y=u-t,v=g-r,C=y*y+v*v;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(C>bc)if(!(Math.abs(v*h-p*y)>bc)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let T=n-u,D=l-g,P=h*h+p*p,k=T*T+D*D,R=Math.sqrt(P),B=Math.sqrt(C),M=i*Math.tan((_E-Math.acos((P+C-k)/(2*R*B)))/2),G=M/B,F=M/R;Math.abs(G-1)>bc&&this._append`L${t+G*y},${r+G*v}`,this._append`A${i},${i},0,0,${+(v*T>y*D)},${this._x1=t+F*h},${this._y1=r+F*p}`}}arc(t,r,n,l,i,u){if(t=+t,r=+r,n=+n,u=!!u,n<0)throw new Error(`negative radius: ${n}`);let g=n*Math.cos(l),h=n*Math.sin(l),p=t+g,y=r+h,v=1^u,C=u?l-i:i-l;this._x1===null?this._append`M${p},${y}`:(Math.abs(this._x1-p)>bc||Math.abs(this._y1-y)>bc)&&this._append`L${p},${y}`,n&&(C<0&&(C=C%kE+kE),C>uX?this._append`A${n},${n},0,1,${v},${t-g},${r-h}A${n},${n},0,1,${v},${this._x1=p},${this._y1=y}`:C>bc&&this._append`A${n},${n},0,${+(C>=_E)},${v},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+l}h${-n}Z`}toString(){return this._}}function Tw(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new mX(t)}function Ow(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function GP(e){this._context=e}GP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Zp(e){return new GP(e)}function YP(e){return e[0]}function XP(e){return e[1]}function WP(e,t){var r=Ir(!0),n=null,l=Zp,i=null,u=Tw(g);e=typeof e=="function"?e:e===void 0?YP:Ir(e),t=typeof t=="function"?t:t===void 0?XP:Ir(t);function g(h){var p,y=(h=Ow(h)).length,v,C=!1,T;for(n==null&&(i=l(T=u())),p=0;p<=y;++p)!(p<y&&r(v=h[p],p,h))===C&&((C=!C)?i.lineStart():i.lineEnd()),C&&i.point(+e(v,p,h),+t(v,p,h));if(T)return i=null,T+""||null}return g.x=function(h){return arguments.length?(e=typeof h=="function"?h:Ir(+h),g):e},g.y=function(h){return arguments.length?(t=typeof h=="function"?h:Ir(+h),g):t},g.defined=function(h){return arguments.length?(r=typeof h=="function"?h:Ir(!!h),g):r},g.curve=function(h){return arguments.length?(l=h,n!=null&&(i=l(n)),g):l},g.context=function(h){return arguments.length?(h==null?n=i=null:i=l(n=h),g):n},g}function Pg(e,t,r){var n=null,l=Ir(!0),i=null,u=Zp,g=null,h=Tw(p);e=typeof e=="function"?e:e===void 0?YP:Ir(+e),t=typeof t=="function"?t:Ir(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?XP:Ir(+r);function p(v){var C,T,D,P=(v=Ow(v)).length,k,R=!1,B,M=new Array(P),G=new Array(P);for(i==null&&(g=u(B=h())),C=0;C<=P;++C){if(!(C<P&&l(k=v[C],C,v))===R)if(R=!R)T=C,g.areaStart(),g.lineStart();else{for(g.lineEnd(),g.lineStart(),D=C-1;D>=T;--D)g.point(M[D],G[D]);g.lineEnd(),g.areaEnd()}R&&(M[C]=+e(k,C,v),G[C]=+t(k,C,v),g.point(n?+n(k,C,v):M[C],r?+r(k,C,v):G[C]))}if(B)return g=null,B+""||null}function y(){return WP().defined(l).curve(u).context(i)}return p.x=function(v){return arguments.length?(e=typeof v=="function"?v:Ir(+v),n=null,p):e},p.x0=function(v){return arguments.length?(e=typeof v=="function"?v:Ir(+v),p):e},p.x1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:Ir(+v),p):n},p.y=function(v){return arguments.length?(t=typeof v=="function"?v:Ir(+v),r=null,p):t},p.y0=function(v){return arguments.length?(t=typeof v=="function"?v:Ir(+v),p):t},p.y1=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:Ir(+v),p):r},p.lineX0=p.lineY0=function(){return y().x(e).y(t)},p.lineY1=function(){return y().x(e).y(r)},p.lineX1=function(){return y().x(n).y(t)},p.defined=function(v){return arguments.length?(l=typeof v=="function"?v:Ir(!!v),p):l},p.curve=function(v){return arguments.length?(u=v,i!=null&&(g=u(i)),p):u},p.context=function(v){return arguments.length?(v==null?i=g=null:g=u(i=v),p):i},p}class KP{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function fX(e){return new KP(e,!0)}function gX(e){return new KP(e,!1)}const Dw={draw(e,t){const r=gl(t/$h);e.moveTo(r,0),e.arc(0,0,r,0,Kp)}},hX={draw(e,t){const r=gl(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},ZP=gl(1/3),pX=ZP*2,yX={draw(e,t){const r=gl(t/pX),n=r*ZP;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},xX={draw(e,t){const r=gl(t),n=-r/2;e.rect(n,n,r,r)}},bX=.8908130915292852,QP=Hh($h/10)/Hh(7*$h/10),vX=Hh(Kp/10)*QP,EX=-$P(Kp/10)*QP,wX={draw(e,t){const r=gl(t*bX),n=vX*r,l=EX*r;e.moveTo(0,-r),e.lineTo(n,l);for(let i=1;i<5;++i){const u=Kp*i/5,g=$P(u),h=Hh(u);e.lineTo(h*r,-g*r),e.lineTo(g*n-h*l,h*n+g*l)}e.closePath()}},ab=gl(3),NX={draw(e,t){const r=-gl(t/(ab*3));e.moveTo(0,r*2),e.lineTo(-ab*r,-r),e.lineTo(ab*r,-r),e.closePath()}},Cs=-.5,As=gl(3)/2,PE=1/gl(12),SX=(PE/2+1)*3,CX={draw(e,t){const r=gl(t/SX),n=r/2,l=r*PE,i=n,u=r*PE+r,g=-i,h=u;e.moveTo(n,l),e.lineTo(i,u),e.lineTo(g,h),e.lineTo(Cs*n-As*l,As*n+Cs*l),e.lineTo(Cs*i-As*u,As*i+Cs*u),e.lineTo(Cs*g-As*h,As*g+Cs*h),e.lineTo(Cs*n+As*l,Cs*l-As*n),e.lineTo(Cs*i+As*u,Cs*u-As*i),e.lineTo(Cs*g+As*h,Cs*h-As*g),e.closePath()}};function AX(e,t){let r=null,n=Tw(l);e=typeof e=="function"?e:Ir(e||Dw),t=typeof t=="function"?t:Ir(t===void 0?64:+t);function l(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return l.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ir(i),l):e},l.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ir(+i),l):t},l.context=function(i){return arguments.length?(r=i??null,l):r},l}function qh(){}function Gh(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function JP(e){this._context=e}JP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Gh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Gh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function TX(e){return new JP(e)}function e7(e){this._context=e}e7.prototype={areaStart:qh,areaEnd:qh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Gh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function OX(e){return new e7(e)}function t7(e){this._context=e}t7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Gh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function DX(e){return new t7(e)}function r7(e){this._context=e}r7.prototype={areaStart:qh,areaEnd:qh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function _X(e){return new r7(e)}function b5(e){return e<0?-1:1}function v5(e,t,r){var n=e._x1-e._x0,l=t-e._x1,i=(e._y1-e._y0)/(n||l<0&&-0),u=(r-e._y1)/(l||n<0&&-0),g=(i*l+u*n)/(n+l);return(b5(i)+b5(u))*Math.min(Math.abs(i),Math.abs(u),.5*Math.abs(g))||0}function E5(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function nb(e,t,r){var n=e._x0,l=e._y0,i=e._x1,u=e._y1,g=(i-n)/3;e._context.bezierCurveTo(n+g,l+g*t,i-g,u-g*r,i,u)}function Yh(e){this._context=e}Yh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:nb(this,this._t0,E5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,nb(this,E5(this,r=v5(this,e,t)),r);break;default:nb(this,this._t0,r=v5(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function a7(e){this._context=new n7(e)}(a7.prototype=Object.create(Yh.prototype)).point=function(e,t){Yh.prototype.point.call(this,t,e)};function n7(e){this._context=e}n7.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,l,i){this._context.bezierCurveTo(t,e,n,r,i,l)}};function kX(e){return new Yh(e)}function PX(e){return new a7(e)}function s7(e){this._context=e}s7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=w5(e),l=w5(t),i=0,u=1;u<r;++i,++u)this._context.bezierCurveTo(n[0][i],l[0][i],n[1][i],l[1][i],e[u],t[u]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function w5(e){var t,r=e.length-1,n,l=new Array(r),i=new Array(r),u=new Array(r);for(l[0]=0,i[0]=2,u[0]=e[0]+2*e[1],t=1;t<r-1;++t)l[t]=1,i[t]=4,u[t]=4*e[t]+2*e[t+1];for(l[r-1]=2,i[r-1]=7,u[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=l[t]/i[t-1],i[t]-=n,u[t]-=n*u[t-1];for(l[r-1]=u[r-1]/i[r-1],t=r-2;t>=0;--t)l[t]=(u[t]-l[t+1])/i[t];for(i[r-1]=(e[r]+l[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-l[t+1];return[l,i]}function IX(e){return new s7(e)}function Qp(e,t){this._context=e,this._t=t}Qp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function MX(e){return new Qp(e,.5)}function RX(e){return new Qp(e,0)}function LX(e){return new Qp(e,1)}function ld(e,t){if((u=e.length)>1)for(var r=1,n,l,i=e[t[0]],u,g=i.length;r<u;++r)for(l=i,i=e[t[r]],n=0;n<g;++n)i[n][1]+=i[n][0]=isNaN(l[n][1])?l[n][0]:l[n][1]}function IE(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function BX(e,t){return e[t]}function FX(e){const t=[];return t.key=e,t}function UX(){var e=Ir([]),t=IE,r=ld,n=BX;function l(i){var u=Array.from(e.apply(this,arguments),FX),g,h=u.length,p=-1,y;for(const v of i)for(g=0,++p;g<h;++g)(u[g][p]=[0,+n(v,u[g].key,p,i)]).data=v;for(g=0,y=Ow(t(u));g<h;++g)u[y[g]].index=g;return r(u,y),u}return l.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ir(Array.from(i)),l):e},l.value=function(i){return arguments.length?(n=typeof i=="function"?i:Ir(+i),l):n},l.order=function(i){return arguments.length?(t=i==null?IE:typeof i=="function"?i:Ir(Array.from(i)),l):t},l.offset=function(i){return arguments.length?(r=i??ld,l):r},l}function jX(e,t){if((n=e.length)>0){for(var r,n,l=0,i=e[0].length,u;l<i;++l){for(u=r=0;r<n;++r)u+=e[r][l][1]||0;if(u)for(r=0;r<n;++r)e[r][l][1]/=u}ld(e,t)}}function zX(e,t){if((l=e.length)>0){for(var r=0,n=e[t[0]],l,i=n.length;r<i;++r){for(var u=0,g=0;u<l;++u)g+=e[u][r][1]||0;n[r][1]+=n[r][0]=-g/2}ld(e,t)}}function VX(e,t){if(!(!((u=e.length)>0)||!((i=(l=e[t[0]]).length)>0))){for(var r=0,n=1,l,i,u;n<i;++n){for(var g=0,h=0,p=0;g<u;++g){for(var y=e[t[g]],v=y[n][1]||0,C=y[n-1][1]||0,T=(v-C)/2,D=0;D<g;++D){var P=e[t[D]],k=P[n][1]||0,R=P[n-1][1]||0;T+=k-R}h+=v,p+=T*v}l[n-1][1]+=l[n-1][0]=r,h&&(r-=p/h)}l[n-1][1]+=l[n-1][0]=r,ld(e,t)}}var sb={},lb={},N5;function HX(){return N5||(N5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(lb)),lb}var ib={},S5;function l7(){return S5||(S5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(ib)),ib}var ob={},C5;function _w(){return C5||(C5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(ob)),ob}var cb={},ub={},A5;function $X(){return A5||(A5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(ub)),ub}var T5;function kw(){return T5||(T5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$X(),r=_w();function n(l){if(Array.isArray(l))return l.map(r.toKey);if(typeof l=="symbol")return[l];l=t.toString(l);const i=[],u=l.length;if(u===0)return i;let g=0,h="",p="",y=!1;for(l.charCodeAt(0)===46&&(i.push(""),g++);g<u;){const v=l[g];p?v==="\\"&&g+1<u?(g++,h+=l[g]):v===p?p="":h+=v:y?v==='"'||v==="'"?p=v:v==="]"?(y=!1,i.push(h),h=""):h+=v:v==="["?(y=!0,h&&(i.push(h),h="")):v==="."?h&&(i.push(h),h=""):h+=v,g++}return h&&i.push(h),i}e.toPath=n})(cb)),cb}var O5;function Pw(){return O5||(O5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HX(),r=l7(),n=_w(),l=kw();function i(g,h,p){if(g==null)return p;switch(typeof h){case"string":{if(t.isUnsafeProperty(h))return p;const y=g[h];return y===void 0?r.isDeepKey(h)?i(g,l.toPath(h),p):p:y}case"number":case"symbol":{typeof h=="number"&&(h=n.toKey(h));const y=g[h];return y===void 0?p:y}default:{if(Array.isArray(h))return u(g,h,p);if(Object.is(h?.valueOf(),-0)?h="-0":h=String(h),t.isUnsafeProperty(h))return p;const y=g[h];return y===void 0?p:y}}}function u(g,h,p){if(h.length===0)return p;let y=g;for(let v=0;v<h.length;v++){if(y==null||t.isUnsafeProperty(h[v]))return p;y=y[h[v]]}return y===void 0?p:y}e.get=i})(sb)),sb}var db,D5;function qX(){return D5||(D5=1,db=Pw().get),db}var GX=qX();const mf=jl(GX);var jn=e=>e===0?0:e>0?1:-1,Si=e=>typeof e=="number"&&e!=+e,Ci=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,It=e=>(typeof e=="number"||e instanceof Number)&&!Si(e),Ai=e=>It(e)||typeof e=="string",YX=0,ff=e=>{var t=++YX;return"".concat(e||"").concat(t)},cs=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!It(t)&&typeof t!="string")return n;var i;if(Ci(t)){if(r==null)return n;var u=t.indexOf("%");i=r*parseFloat(t.slice(0,u))/100}else i=+t;return Si(i)&&(i=n),l&&r!=null&&i>r&&(i=r),i},i7=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function rl(e,t,r){return It(e)&&It(t)?e+r*(t-e):t}function XX(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):mf(n,t))===r)}var ms=e=>e===null||typeof e>"u",jf=e=>ms(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function WX(e){return e!=null}function zf(){}var KX=["type","size","sizeType"];function ME(){return ME=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ME.apply(null,arguments)}function _5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function k5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_5(Object(r),!0).forEach(function(n){ZX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZX(e,t,r){return(t=QX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QX(e){var t=JX(e,"string");return typeof t=="symbol"?t:t+""}function JX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eW(e,t){if(e==null)return{};var r,n,l=tW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function tW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var o7={symbolCircle:Dw,symbolCross:hX,symbolDiamond:yX,symbolSquare:xX,symbolStar:wX,symbolTriangle:NX,symbolWye:CX},rW=Math.PI/180,aW=e=>{var t="symbol".concat(jf(e));return o7[t]||Dw},nW=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*rW;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},sW=(e,t)=>{o7["symbol".concat(jf(e))]=t},Iw=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,l=eW(e,KX),i=k5(k5({},l),{},{type:t,size:r,sizeType:n}),u="circle";typeof t=="string"&&(u=t);var g=()=>{var C=aW(u),T=AX().type(C).size(nW(r,n,u)),D=T();if(D!==null)return D},{className:h,cx:p,cy:y}=i,v=Ls(i);return It(p)&&It(y)&&It(r)?w.createElement("path",ME({},v,{className:Ea("recharts-symbols",h),transform:"translate(".concat(p,", ").concat(y,")"),d:g()})):null};Iw.registerSymbol=sW;var c7=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,lW=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(w.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(l=>{Cw(l)&&(n[l]=(i=>r[l](r,i)))}),n},iW=(e,t,r)=>n=>(e(t,r,n),null),u7=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(l=>{var i=e[l];Cw(l)&&typeof i=="function"&&(n||(n={}),n[l]=iW(i,t,r))}),n};function P5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function oW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P5(Object(r),!0).forEach(function(n){cW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cW(e,t,r){return(t=uW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uW(e){var t=dW(e,"string");return typeof t=="symbol"?t:t+""}function dW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zs(e,t){var r=oW({},e),n=t,l=Object.keys(t),i=l.reduce((u,g)=>(u[g]===void 0&&n[g]!==void 0&&(u[g]=n[g]),u),r);return i}function Xh(){return Xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xh.apply(null,arguments)}function I5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function mW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I5(Object(r),!0).forEach(function(n){fW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fW(e,t,r){return(t=gW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gW(e){var t=hW(e,"string");return typeof t=="symbol"?t:t+""}function hW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _s=32,pW={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function yW(e){var{data:t,iconType:r,inactiveColor:n}=e,l=_s/2,i=_s/6,u=_s/3,g=t.inactive?n:t.color,h=r??t.type;if(h==="none")return null;if(h==="plainline"){var p;return w.createElement("line",{strokeWidth:4,fill:"none",stroke:g,strokeDasharray:(p=t.payload)===null||p===void 0?void 0:p.strokeDasharray,x1:0,y1:l,x2:_s,y2:l,className:"recharts-legend-icon"})}if(h==="line")return w.createElement("path",{strokeWidth:4,fill:"none",stroke:g,d:"M0,".concat(l,"h").concat(u,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*u,",").concat(l,`
            H`).concat(_s,"M").concat(2*u,",").concat(l,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(u,",").concat(l),className:"recharts-legend-icon"});if(h==="rect")return w.createElement("path",{stroke:"none",fill:g,d:"M0,".concat(_s/8,"h").concat(_s,"v").concat(_s*3/4,"h").concat(-_s,"z"),className:"recharts-legend-icon"});if(w.isValidElement(t.legendIcon)){var y=mW({},t);return delete y.legendIcon,w.cloneElement(t.legendIcon,y)}return w.createElement(Iw,{fill:g,cx:l,cy:l,size:_s,sizeType:"diameter",type:h})}function xW(e){var{payload:t,iconSize:r,layout:n,formatter:l,inactiveColor:i,iconType:u}=e,g={x:0,y:0,width:_s,height:_s},h={display:n==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((y,v)=>{var C=y.formatter||l,T=Ea({"recharts-legend-item":!0,["legend-item-".concat(v)]:!0,inactive:y.inactive});if(y.type==="none")return null;var D=y.inactive?i:y.color,P=C?C(y.value,y,v):y.value;return w.createElement("li",Xh({className:T,style:h,key:"legend-item-".concat(v)},u7(e,y,v)),w.createElement(Aw,{width:r,height:r,viewBox:g,style:p,"aria-label":"".concat(P," legend icon")},w.createElement(yW,{data:y,iconType:u,inactiveColor:i})),w.createElement("span",{className:"recharts-legend-item-text",style:{color:D}},P))})}var bW=e=>{var t=zs(e,pW),{payload:r,layout:n,align:l}=t;if(!r||!r.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?l:"left"};return w.createElement("ul",{className:"recharts-default-legend",style:i},w.createElement(xW,Xh({},t,{payload:r})))},mb={},fb={},M5;function vW(){return M5||(M5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const l=new Map;for(let i=0;i<r.length;i++){const u=r[i],g=n(u);l.has(g)||l.set(g,u)}return Array.from(l.values())}e.uniqBy=t})(fb)),fb}var gb={},R5;function d7(){return R5||(R5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(gb)),gb}var hb={},pb={},yb={},L5;function EW(){return L5||(L5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(yb)),yb}var B5;function Mw(){return B5||(B5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EW();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(pb)),pb}var xb={},F5;function wW(){return F5||(F5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(xb)),xb}var U5;function NW(){return U5||(U5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mw(),r=wW();function n(l){return r.isObjectLike(l)&&t.isArrayLike(l)}e.isArrayLikeObject=n})(hb)),hb}var bb={},vb={},j5;function SW(){return j5||(j5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pw();function r(n){return function(l){return t.get(l,n)}}e.property=r})(vb)),vb}var Eb={},wb={},Nb={},Sb={},z5;function m7(){return z5||(z5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Sb)),Sb}var Cb={},V5;function f7(){return V5||(V5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Cb)),Cb}var Ab={},H5;function g7(){return H5||(H5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Ab)),Ab}var $5;function CW(){return $5||($5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=m7(),r=f7(),n=g7();function l(y,v,C){return typeof C!="function"?l(y,v,()=>{}):i(y,v,function T(D,P,k,R,B,M){const G=C(D,P,k,R,B,M);return G!==void 0?!!G:i(D,P,T,M)},new Map)}function i(y,v,C,T){if(v===y)return!0;switch(typeof v){case"object":return u(y,v,C,T);case"function":return Object.keys(v).length>0?i(y,{...v},C,T):n.eq(y,v);default:return t.isObject(y)?typeof v=="string"?v==="":!0:n.eq(y,v)}}function u(y,v,C,T){if(v==null)return!0;if(Array.isArray(v))return h(y,v,C,T);if(v instanceof Map)return g(y,v,C,T);if(v instanceof Set)return p(y,v,C,T);const D=Object.keys(v);if(y==null)return D.length===0;if(D.length===0)return!0;if(T?.has(v))return T.get(v)===y;T?.set(v,y);try{for(let P=0;P<D.length;P++){const k=D[P];if(!r.isPrimitive(y)&&!(k in y)||v[k]===void 0&&y[k]!==void 0||v[k]===null&&y[k]!==null||!C(y[k],v[k],k,y,v,T))return!1}return!0}finally{T?.delete(v)}}function g(y,v,C,T){if(v.size===0)return!0;if(!(y instanceof Map))return!1;for(const[D,P]of v.entries()){const k=y.get(D);if(C(k,P,D,y,v,T)===!1)return!1}return!0}function h(y,v,C,T){if(v.length===0)return!0;if(!Array.isArray(y))return!1;const D=new Set;for(let P=0;P<v.length;P++){const k=v[P];let R=!1;for(let B=0;B<y.length;B++){if(D.has(B))continue;const M=y[B];let G=!1;if(C(M,k,P,y,v,T)&&(G=!0),G){D.add(B),R=!0;break}}if(!R)return!1}return!0}function p(y,v,C,T){return v.size===0?!0:y instanceof Set?h([...y],[...v],C,T):!1}e.isMatchWith=l,e.isSetMatch=p})(Nb)),Nb}var q5;function h7(){return q5||(q5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CW();function r(n,l){return t.isMatchWith(n,l,()=>{})}e.isMatch=r})(wb)),wb}var Tb={},Ob={},Db={},G5;function AW(){return G5||(G5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Db)),Db}var _b={},Y5;function p7(){return Y5||(Y5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(_b)),_b}var kb={},X5;function y7(){return X5||(X5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",l="[object Boolean]",i="[object Arguments]",u="[object Symbol]",g="[object Date]",h="[object Map]",p="[object Set]",y="[object Array]",v="[object Function]",C="[object ArrayBuffer]",T="[object Object]",D="[object Error]",P="[object DataView]",k="[object Uint8Array]",R="[object Uint8ClampedArray]",B="[object Uint16Array]",M="[object Uint32Array]",G="[object BigUint64Array]",F="[object Int8Array]",U="[object Int16Array]",L="[object Int32Array]",V="[object BigInt64Array]",j="[object Float32Array]",Y="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=C,e.arrayTag=y,e.bigInt64ArrayTag=V,e.bigUint64ArrayTag=G,e.booleanTag=l,e.dataViewTag=P,e.dateTag=g,e.errorTag=D,e.float32ArrayTag=j,e.float64ArrayTag=Y,e.functionTag=v,e.int16ArrayTag=U,e.int32ArrayTag=L,e.int8ArrayTag=F,e.mapTag=h,e.numberTag=n,e.objectTag=T,e.regexpTag=t,e.setTag=p,e.stringTag=r,e.symbolTag=u,e.uint16ArrayTag=B,e.uint32ArrayTag=M,e.uint8ArrayTag=k,e.uint8ClampedArrayTag=R})(kb)),kb}var Pb={},W5;function TW(){return W5||(W5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Pb)),Pb}var K5;function x7(){return K5||(K5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AW(),r=p7(),n=y7(),l=f7(),i=TW();function u(y,v){return g(y,void 0,y,new Map,v)}function g(y,v,C,T=new Map,D=void 0){const P=D?.(y,v,C,T);if(P!==void 0)return P;if(l.isPrimitive(y))return y;if(T.has(y))return T.get(y);if(Array.isArray(y)){const k=new Array(y.length);T.set(y,k);for(let R=0;R<y.length;R++)k[R]=g(y[R],R,C,T,D);return Object.hasOwn(y,"index")&&(k.index=y.index),Object.hasOwn(y,"input")&&(k.input=y.input),k}if(y instanceof Date)return new Date(y.getTime());if(y instanceof RegExp){const k=new RegExp(y.source,y.flags);return k.lastIndex=y.lastIndex,k}if(y instanceof Map){const k=new Map;T.set(y,k);for(const[R,B]of y)k.set(R,g(B,R,C,T,D));return k}if(y instanceof Set){const k=new Set;T.set(y,k);for(const R of y)k.add(g(R,void 0,C,T,D));return k}if(typeof Buffer<"u"&&Buffer.isBuffer(y))return y.subarray();if(i.isTypedArray(y)){const k=new(Object.getPrototypeOf(y)).constructor(y.length);T.set(y,k);for(let R=0;R<y.length;R++)k[R]=g(y[R],R,C,T,D);return k}if(y instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&y instanceof SharedArrayBuffer)return y.slice(0);if(y instanceof DataView){const k=new DataView(y.buffer.slice(0),y.byteOffset,y.byteLength);return T.set(y,k),h(k,y,C,T,D),k}if(typeof File<"u"&&y instanceof File){const k=new File([y],y.name,{type:y.type});return T.set(y,k),h(k,y,C,T,D),k}if(typeof Blob<"u"&&y instanceof Blob){const k=new Blob([y],{type:y.type});return T.set(y,k),h(k,y,C,T,D),k}if(y instanceof Error){const k=new y.constructor;return T.set(y,k),k.message=y.message,k.name=y.name,k.stack=y.stack,k.cause=y.cause,h(k,y,C,T,D),k}if(y instanceof Boolean){const k=new Boolean(y.valueOf());return T.set(y,k),h(k,y,C,T,D),k}if(y instanceof Number){const k=new Number(y.valueOf());return T.set(y,k),h(k,y,C,T,D),k}if(y instanceof String){const k=new String(y.valueOf());return T.set(y,k),h(k,y,C,T,D),k}if(typeof y=="object"&&p(y)){const k=Object.create(Object.getPrototypeOf(y));return T.set(y,k),h(k,y,C,T,D),k}return y}function h(y,v,C=y,T,D){const P=[...Object.keys(v),...t.getSymbols(v)];for(let k=0;k<P.length;k++){const R=P[k],B=Object.getOwnPropertyDescriptor(y,R);(B==null||B.writable)&&(y[R]=g(v[R],R,C,T,D))}}function p(y){switch(r.getTag(y)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=u,e.cloneDeepWithImpl=g,e.copyProperties=h})(Ob)),Ob}var Z5;function OW(){return Z5||(Z5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x7();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Tb)),Tb}var Q5;function DW(){return Q5||(Q5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h7(),r=OW();function n(l){return l=r.cloneDeep(l),i=>t.isMatch(i,l)}e.matches=n})(Eb)),Eb}var Ib={},Mb={},Rb={},J5;function _W(){return J5||(J5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x7(),r=y7();function n(l,i){return t.cloneDeepWith(l,(u,g,h,p)=>{const y=i?.(u,g,h,p);if(y!==void 0)return y;if(typeof l=="object")switch(Object.prototype.toString.call(l)){case r.numberTag:case r.stringTag:case r.booleanTag:{const v=new l.constructor(l?.valueOf());return t.copyProperties(v,l),v}case r.argumentsTag:{const v={};return t.copyProperties(v,l),v.length=l.length,v[Symbol.iterator]=l[Symbol.iterator],v}default:return}})}e.cloneDeepWith=n})(Rb)),Rb}var e6;function kW(){return e6||(e6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_W();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Mb)),Mb}var Lb={},Bb={},t6;function b7(){return t6||(t6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,l=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<l;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(Bb)),Bb}var Fb={},r6;function PW(){return r6||(r6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=p7();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Fb)),Fb}var a6;function IW(){return a6||(a6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l7(),r=b7(),n=PW(),l=kw();function i(u,g){let h;if(Array.isArray(g)?h=g:typeof g=="string"&&t.isDeepKey(g)&&u?.[g]==null?h=l.toPath(g):h=[g],h.length===0)return!1;let p=u;for(let y=0;y<h.length;y++){const v=h[y];if((p==null||!Object.hasOwn(p,v))&&!((Array.isArray(p)||n.isArguments(p))&&r.isIndex(v)&&v<p.length))return!1;p=p[v]}return!0}e.has=i})(Lb)),Lb}var n6;function MW(){return n6||(n6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h7(),r=_w(),n=kW(),l=Pw(),i=IW();function u(g,h){switch(typeof g){case"object":{Object.is(g?.valueOf(),-0)&&(g="-0");break}case"number":{g=r.toKey(g);break}}return h=n.cloneDeep(h),function(p){const y=l.get(p,g);return y===void 0?i.has(p,g):h===void 0?y===void 0:t.isMatch(y,h)}}e.matchesProperty=u})(Ib)),Ib}var s6;function RW(){return s6||(s6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d7(),r=SW(),n=DW(),l=MW();function i(u){if(u==null)return t.identity;switch(typeof u){case"function":return u;case"object":return Array.isArray(u)&&u.length===2?l.matchesProperty(u[0],u[1]):n.matches(u);case"string":case"symbol":case"number":return r.property(u)}}e.iteratee=i})(bb)),bb}var l6;function LW(){return l6||(l6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vW(),r=d7(),n=NW(),l=RW();function i(u,g=r.identity){return n.isArrayLikeObject(u)?t.uniqBy(Array.from(u),l.iteratee(g)):[]}e.uniqBy=i})(mb)),mb}var Ub,i6;function BW(){return i6||(i6=1,Ub=LW().uniqBy),Ub}var FW=BW();const o6=jl(FW);function v7(e,t,r){return t===!0?o6(e,r):typeof t=="function"?o6(e,t):e}var jb={exports:{}},zb={},Vb={exports:{}},Hb={};var c6;function UW(){if(c6)return Hb;c6=1;var e=hd();function t(v,C){return v===C&&(v!==0||1/v===1/C)||v!==v&&C!==C}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,l=e.useEffect,i=e.useLayoutEffect,u=e.useDebugValue;function g(v,C){var T=C(),D=n({inst:{value:T,getSnapshot:C}}),P=D[0].inst,k=D[1];return i(function(){P.value=T,P.getSnapshot=C,h(P)&&k({inst:P})},[v,T,C]),l(function(){return h(P)&&k({inst:P}),v(function(){h(P)&&k({inst:P})})},[v]),u(T),T}function h(v){var C=v.getSnapshot;v=v.value;try{var T=C();return!r(v,T)}catch{return!0}}function p(v,C){return C()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:g;return Hb.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,Hb}var u6;function jW(){return u6||(u6=1,Vb.exports=UW()),Vb.exports}var d6;function zW(){if(d6)return zb;d6=1;var e=hd(),t=jW();function r(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var n=typeof Object.is=="function"?Object.is:r,l=t.useSyncExternalStore,i=e.useRef,u=e.useEffect,g=e.useMemo,h=e.useDebugValue;return zb.useSyncExternalStoreWithSelector=function(p,y,v,C,T){var D=i(null);if(D.current===null){var P={hasValue:!1,value:null};D.current=P}else P=D.current;D=g(function(){function R(U){if(!B){if(B=!0,M=U,U=C(U),T!==void 0&&P.hasValue){var L=P.value;if(T(L,U))return G=L}return G=U}if(L=G,n(M,U))return L;var V=C(U);return T!==void 0&&T(L,V)?(M=U,L):(M=U,G=V)}var B=!1,M,G,F=v===void 0?null:v;return[function(){return R(y())},F===null?void 0:function(){return R(F())}]},[y,v,C,T]);var k=l(p,D[0],D[1]);return u(function(){P.hasValue=!0,P.value=k},[k]),h(k),k},zb}var m6;function VW(){return m6||(m6=1,jb.exports=zW()),jb.exports}var HW=VW(),Rw=w.createContext(null),$W=e=>e,wa=()=>{var e=w.useContext(Rw);return e?e.store.dispatch:$W},wh=()=>{},qW=()=>wh,GW=(e,t)=>e===t;function Rt(e){var t=w.useContext(Rw);return HW.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:qW,t?t.store.getState:wh,t?t.store.getState:wh,t?e:wh,GW)}function YW(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function XW(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function WW(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var f6=e=>Array.isArray(e)?e:[e];function KW(e){const t=Array.isArray(e[0])?e[0]:e;return WW(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function ZW(e,t){const r=[],{length:n}=e;for(let l=0;l<n;l++)r.push(e[l].apply(null,t));return r}var QW=class{constructor(e){this.value=e}deref(){return this.value}},JW=typeof WeakRef<"u"?WeakRef:QW,eK=0,g6=1;function Ig(){return{s:eK,v:void 0,o:null,p:null}}function E7(e,t={}){let r=Ig();const{resultEqualityCheck:n}=t;let l,i=0;function u(){let g=r;const{length:h}=arguments;for(let v=0,C=h;v<C;v++){const T=arguments[v];if(typeof T=="function"||typeof T=="object"&&T!==null){let D=g.o;D===null&&(g.o=D=new WeakMap);const P=D.get(T);P===void 0?(g=Ig(),D.set(T,g)):g=P}else{let D=g.p;D===null&&(g.p=D=new Map);const P=D.get(T);P===void 0?(g=Ig(),D.set(T,g)):g=P}}const p=g;let y;if(g.s===g6)y=g.v;else if(y=e.apply(null,arguments),i++,n){const v=l?.deref?.()??l;v!=null&&n(v,y)&&(y=v,i!==0&&i--),l=typeof y=="object"&&y!==null||typeof y=="function"?new JW(y):y}return p.s=g6,p.v=y,y}return u.clearCache=()=>{r=Ig(),u.resetResultsCount()},u.resultsCount=()=>i,u.resetResultsCount=()=>{i=0},u}function tK(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...l)=>{let i=0,u=0,g,h={},p=l.pop();typeof p=="object"&&(h=p,p=l.pop()),YW(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);const y={...r,...h},{memoize:v,memoizeOptions:C=[],argsMemoize:T=E7,argsMemoizeOptions:D=[]}=y,P=f6(C),k=f6(D),R=KW(l),B=v(function(){return i++,p.apply(null,arguments)},...P),M=T(function(){u++;const F=ZW(R,arguments);return g=B.apply(null,F),g},...k);return Object.assign(M,{resultFunc:p,memoizedResultFunc:B,dependencies:R,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>g,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:v,argsMemoize:T})};return Object.assign(n,{withTypes:()=>n}),n}var Me=tK(E7),rK=Object.assign((e,t=Me)=>{XW(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((u,g,h)=>(u[r[h]]=g,u),{}))},{withTypes:()=>rK}),$b={},qb={},Gb={},h6;function aK(){return h6||(h6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,l,i)=>{if(n!==l){const u=t(n),g=t(l);if(u===g&&u===0){if(n<l)return i==="desc"?1:-1;if(n>l)return i==="desc"?-1:1}return i==="desc"?g-u:u-g}return 0};e.compareValues=r})(Gb)),Gb}var Yb={},Xb={},p6;function w7(){return p6||(p6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Xb)),Xb}var y6;function nK(){return y6||(y6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w7(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function l(i,u){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||u!=null&&Object.hasOwn(u,i)}e.isKey=l})(Yb)),Yb}var x6;function sK(){return x6||(x6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aK(),r=nK(),n=kw();function l(i,u,g,h){if(i==null)return[];g=h?void 0:g,Array.isArray(i)||(i=Object.values(i)),Array.isArray(u)||(u=u==null?[null]:[u]),u.length===0&&(u=[null]),Array.isArray(g)||(g=g==null?[]:[g]),g=g.map(T=>String(T));const p=(T,D)=>{let P=T;for(let k=0;k<D.length&&P!=null;++k)P=P[D[k]];return P},y=(T,D)=>D==null||T==null?D:typeof T=="object"&&"key"in T?Object.hasOwn(D,T.key)?D[T.key]:p(D,T.path):typeof T=="function"?T(D):Array.isArray(T)?p(D,T):typeof D=="object"?D[T]:D,v=u.map(T=>(Array.isArray(T)&&T.length===1&&(T=T[0]),T==null||typeof T=="function"||Array.isArray(T)||r.isKey(T)?T:{key:T,path:n.toPath(T)}));return i.map(T=>({original:T,criteria:v.map(D=>y(D,T))})).slice().sort((T,D)=>{for(let P=0;P<v.length;P++){const k=t.compareValues(T.criteria[P],D.criteria[P],g[P]);if(k!==0)return k}return 0}).map(T=>T.original)}e.orderBy=l})(qb)),qb}var Wb={},b6;function lK(){return b6||(b6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const l=[],i=Math.floor(n),u=(g,h)=>{for(let p=0;p<g.length;p++){const y=g[p];Array.isArray(y)&&h<i?u(y,h+1):l.push(y)}};return u(r,0),l}e.flatten=t})(Wb)),Wb}var Kb={},v6;function N7(){return v6||(v6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=b7(),r=Mw(),n=m7(),l=g7();function i(u,g,h){return n.isObject(h)&&(typeof g=="number"&&r.isArrayLike(h)&&t.isIndex(g)&&g<h.length||typeof g=="string"&&g in h)?l.eq(h[g],u):!1}e.isIterateeCall=i})(Kb)),Kb}var E6;function iK(){return E6||(E6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sK(),r=lK(),n=N7();function l(i,...u){const g=u.length;return g>1&&n.isIterateeCall(i,u[0],u[1])?u=[]:g>2&&n.isIterateeCall(u[0],u[1],u[2])&&(u=[u[0]]),t.orderBy(i,r.flatten(u),["asc"])}e.sortBy=l})($b)),$b}var Zb,w6;function oK(){return w6||(w6=1,Zb=iK().sortBy),Zb}var cK=oK();const Jp=jl(cK);var S7=e=>e.legend.settings,uK=e=>e.legend.size,dK=e=>e.legend.payload,mK=Me([dK,S7],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Jp(n,r):n});function fK(){return Rt(mK)}var Mg=1;function C7(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=w.useState({height:0,left:0,top:0,width:0}),n=w.useCallback(l=>{if(l!=null){var i=l.getBoundingClientRect(),u={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(u.height-t.height)>Mg||Math.abs(u.left-t.left)>Mg||Math.abs(u.top-t.top)>Mg||Math.abs(u.width-t.width)>Mg)&&r({height:u.height,left:u.left,top:u.top,width:u.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function ln(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var gK=typeof Symbol=="function"&&Symbol.observable||"@@observable",N6=gK,Qb=()=>Math.random().toString(36).substring(7).split("").join("."),hK={INIT:`@@redux/INIT${Qb()}`,REPLACE:`@@redux/REPLACE${Qb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Qb()}`},Wh=hK;function Lw(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function A7(e,t,r){if(typeof e!="function")throw new Error(ln(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ln(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ln(1));return r(A7)(e,t)}let n=e,l=t,i=new Map,u=i,g=0,h=!1;function p(){u===i&&(u=new Map,i.forEach((k,R)=>{u.set(R,k)}))}function y(){if(h)throw new Error(ln(3));return l}function v(k){if(typeof k!="function")throw new Error(ln(4));if(h)throw new Error(ln(5));let R=!0;p();const B=g++;return u.set(B,k),function(){if(R){if(h)throw new Error(ln(6));R=!1,p(),u.delete(B),i=null}}}function C(k){if(!Lw(k))throw new Error(ln(7));if(typeof k.type>"u")throw new Error(ln(8));if(typeof k.type!="string")throw new Error(ln(17));if(h)throw new Error(ln(9));try{h=!0,l=n(l,k)}finally{h=!1}return(i=u).forEach(B=>{B()}),k}function T(k){if(typeof k!="function")throw new Error(ln(10));n=k,C({type:Wh.REPLACE})}function D(){const k=v;return{subscribe(R){if(typeof R!="object"||R===null)throw new Error(ln(11));function B(){const G=R;G.next&&G.next(y())}return B(),{unsubscribe:k(B)}},[N6](){return this}}}return C({type:Wh.INIT}),{dispatch:C,subscribe:v,getState:y,replaceReducer:T,[N6]:D}}function pK(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Wh.INIT})>"u")throw new Error(ln(12));if(typeof r(void 0,{type:Wh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ln(13))})}function T7(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const u=t[i];typeof e[u]=="function"&&(r[u]=e[u])}const n=Object.keys(r);let l;try{pK(r)}catch(i){l=i}return function(u={},g){if(l)throw l;let h=!1;const p={};for(let y=0;y<n.length;y++){const v=n[y],C=r[v],T=u[v],D=C(T,g);if(typeof D>"u")throw g&&g.type,new Error(ln(14));p[v]=D,h=h||D!==T}return h=h||n.length!==Object.keys(u).length,h?p:u}}function Kh(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function yK(...e){return t=>(r,n)=>{const l=t(r,n);let i=()=>{throw new Error(ln(15))};const u={getState:l.getState,dispatch:(h,...p)=>i(h,...p)},g=e.map(h=>h(u));return i=Kh(...g)(l.dispatch),{...l,dispatch:i}}}function O7(e){return Lw(e)&&"type"in e&&typeof e.type=="string"}var D7=Symbol.for("immer-nothing"),S6=Symbol.for("immer-draftable"),Cn=Symbol.for("immer-state");function al(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var os=Object,id=os.getPrototypeOf,Zh="constructor",ey="prototype",RE="configurable",Qh="enumerable",Nh="writable",gf="value",Ti=e=>!!e&&!!e[Cn];function ul(e){return e?_7(e)||ty(e)||!!e[S6]||!!e[Zh]?.[S6]||ry(e)||ay(e):!1}var xK=os[ey][Zh].toString(),C6=new WeakMap;function _7(e){if(!e||!Bw(e))return!1;const t=id(e);if(t===null||t===os[ey])return!0;const r=os.hasOwnProperty.call(t,Zh)&&t[Zh];if(r===Object)return!0;if(!Bu(r))return!1;let n=C6.get(r);return n===void 0&&(n=Function.toString.call(r),C6.set(r,n)),n===xK}function Vf(e,t,r=!0){Hf(e)===0?(r?Reflect.ownKeys(e):os.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((n,l)=>t(l,n,e))}function Hf(e){const t=e[Cn];return t?t.type_:ty(e)?1:ry(e)?2:ay(e)?3:0}var A6=(e,t,r=Hf(e))=>r===2?e.has(t):os[ey].hasOwnProperty.call(e,t),LE=(e,t,r=Hf(e))=>r===2?e.get(t):e[t],Jh=(e,t,r,n=Hf(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function bK(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var ty=Array.isArray,ry=e=>e instanceof Map,ay=e=>e instanceof Set,Bw=e=>typeof e=="object",Bu=e=>typeof e=="function",Jb=e=>typeof e=="boolean",di=e=>e.copy_||e.base_,Fw=e=>e.modified_?e.copy_:e.base_;function BE(e,t){if(ry(e))return new Map(e);if(ay(e))return new Set(e);if(ty(e))return Array[ey].slice.call(e);const r=_7(e);if(t===!0||t==="class_only"&&!r){const n=os.getOwnPropertyDescriptors(e);delete n[Cn];let l=Reflect.ownKeys(n);for(let i=0;i<l.length;i++){const u=l[i],g=n[u];g[Nh]===!1&&(g[Nh]=!0,g[RE]=!0),(g.get||g.set)&&(n[u]={[RE]:!0,[Nh]:!0,[Qh]:g[Qh],[gf]:e[u]})}return os.create(id(e),n)}else{const n=id(e);if(n!==null&&r)return{...e};const l=os.create(n);return os.assign(l,e)}}function Uw(e,t=!1){return ny(e)||Ti(e)||!ul(e)||(Hf(e)>1&&os.defineProperties(e,{set:Rg,add:Rg,clear:Rg,delete:Rg}),os.freeze(e),t&&Vf(e,(r,n)=>{Uw(n,!0)},!1)),e}function vK(){al(2)}var Rg={[gf]:vK};function ny(e){return e===null||!Bw(e)?!0:os.isFrozen(e)}var ep="MapSet",FE="Patches",k7={};function od(e){const t=k7[e];return t||al(0,e),t}var EK=e=>!!k7[e],hf,P7=()=>hf,wK=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:EK(ep)?od(ep):void 0});function T6(e,t){t&&(e.patchPlugin_=od(FE),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function UE(e){jE(e),e.drafts_.forEach(NK),e.drafts_=null}function jE(e){e===hf&&(hf=e.parent_)}var O6=e=>hf=wK(hf,e);function NK(e){const t=e[Cn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function D6(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Cn].modified_&&(UE(t),al(4)),ul(e)&&(e=_6(t,e));const{patchPlugin_:l}=t;l&&l.generateReplacementPatches_(r[Cn].base_,e,t)}else e=_6(t,r);return SK(t,e,!0),UE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==D7?e:void 0}function _6(e,t){if(ny(t))return t;const r=t[Cn];if(!r)return jw(t,e.handledSet_,e);if(!sy(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);R7(r,e)}return r.copy_}function SK(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Uw(t,r)}function I7(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var sy=(e,t)=>e.scope_===t,CK=[];function M7(e,t,r,n){const l=di(e),i=e.type_;if(n!==void 0&&LE(l,n,i)===t){Jh(l,n,r,i);return}if(!e.draftLocations_){const g=e.draftLocations_=new Map;Vf(l,(h,p)=>{if(Ti(p)){const y=g.get(p)||[];y.push(h),g.set(p,y)}})}const u=e.draftLocations_.get(t)??CK;for(const g of u)Jh(l,g,r,i)}function AK(e,t,r){e.callbacks_.push(function(l){const i=t;if(!i||!sy(i,l))return;l.mapSetPlugin_?.fixSetContents(i);const u=Fw(i);M7(e,i.draft_??i,u,r),R7(i,l)})}function R7(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=t;if(n){const l=n.getPath(e);l&&n.generatePatches_(e,l,t)}I7(e)}}function TK(e,t,r){const{scope_:n}=e;if(Ti(r)){const l=r[Cn];sy(l,n)&&l.callbacks_.push(function(){Sh(e);const u=Fw(l);M7(e,r,u,t)})}else ul(r)&&e.callbacks_.push(function(){const i=di(e);LE(i,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&jw(LE(e.copy_,t,e.type_),n.handledSet_,n)})}function jw(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Ti(e)||t.has(e)||!ul(e)||ny(e)||(t.add(e),Vf(e,(n,l)=>{if(Ti(l)){const i=l[Cn];if(sy(i,r)){const u=Fw(i);Jh(e,n,u,e.type_),I7(i)}}else ul(l)&&jw(l,t,r)})),e}function OK(e,t){const r=ty(e),n={type_:r?1:0,scope_:t?t.scope_:P7(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let l=n,i=zw;r&&(l=[n],i=pf);const{revoke:u,proxy:g}=Proxy.revocable(l,i);return n.draft_=g,n.revoke_=u,[g,n]}var zw={get(e,t){if(t===Cn)return e;const r=di(e);if(!A6(r,t,e.type_))return DK(e,r,t);const n=r[t];if(e.finalized_||!ul(n))return n;if(n===ev(e.base_,t)){Sh(e);const l=e.type_===1?+t:t,i=VE(e.scope_,n,e,l);return e.copy_[l]=i}return n},has(e,t){return t in di(e)},ownKeys(e){return Reflect.ownKeys(di(e))},set(e,t,r){const n=L7(di(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const l=ev(di(e),t),i=l?.[Cn];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(bK(r,l)&&(r!==void 0||A6(e.base_,t,e.type_)))return!0;Sh(e),zE(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),TK(e,t,r)),!0},deleteProperty(e,t){return Sh(e),ev(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),zE(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=di(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[Nh]:!0,[RE]:e.type_!==1||t!=="length",[Qh]:n[Qh],[gf]:r[t]}},defineProperty(){al(11)},getPrototypeOf(e){return id(e.base_)},setPrototypeOf(){al(12)}},pf={};Vf(zw,(e,t)=>{pf[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});pf.deleteProperty=function(e,t){return pf.set.call(this,e,t,void 0)};pf.set=function(e,t,r){return zw.set.call(this,e[0],t,r,e[0])};function ev(e,t){const r=e[Cn];return(r?di(r):e)[t]}function DK(e,t,r){const n=L7(t,r);return n?gf in n?n[gf]:n.get?.call(e.draft_):void 0}function L7(e,t){if(!(t in e))return;let r=id(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=id(r)}}function zE(e){e.modified_||(e.modified_=!0,e.parent_&&zE(e.parent_))}function Sh(e){e.copy_||(e.assigned_=new Map,e.copy_=BE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var _K=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,l)=>{if(Bu(r)&&!Bu(n)){const u=n;n=r;const g=this;return function(p=u,...y){return g.produce(p,v=>n.call(this,v,...y))}}Bu(n)||al(6),l!==void 0&&!Bu(l)&&al(7);let i;if(ul(r)){const u=O6(this),g=VE(u,r,void 0);let h=!0;try{i=n(g),h=!1}finally{h?UE(u):jE(u)}return T6(u,l),D6(i,u)}else if(!r||!Bw(r)){if(i=n(r),i===void 0&&(i=r),i===D7&&(i=void 0),this.autoFreeze_&&Uw(i,!0),l){const u=[],g=[];od(FE).generateReplacementPatches_(r,i,{patches_:u,inversePatches_:g}),l(u,g)}return i}else al(1,r)},this.produceWithPatches=(r,n)=>{if(Bu(r))return(g,...h)=>this.produceWithPatches(g,p=>r(p,...h));let l,i;return[this.produce(r,n,(g,h)=>{l=g,i=h}),l,i]},Jb(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Jb(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Jb(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ul(t)||al(8),Ti(t)&&(t=cl(t));const r=O6(this),n=VE(r,t,void 0);return n[Cn].isManual_=!0,jE(r),n}finishDraft(t,r){const n=t&&t[Cn];(!n||!n.isManual_)&&al(9);const{scope_:l}=n;return T6(l,r),D6(void 0,l)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const i=r[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(r=r.slice(n+1));const l=od(FE).applyPatches_;return Ti(t)?l(t,r):this.produce(t,i=>l(i,r))}};function VE(e,t,r,n){const[l,i]=ry(t)?od(ep).proxyMap_(t,r):ay(t)?od(ep).proxySet_(t,r):OK(t,r);return(r?.scope_??P7()).drafts_.push(l),i.callbacks_=r?.callbacks_??[],i.key_=n,r&&n!==void 0?AK(r,i,n):i.callbacks_.push(function(h){h.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:p}=h;i.modified_&&p&&p.generatePatches_(i,[],h)}),l}function cl(e){return Ti(e)||al(10,e),B7(e)}function B7(e){if(!ul(e)||ny(e))return e;const t=e[Cn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=BE(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=BE(e,!0);return Vf(r,(l,i)=>{Jh(r,l,B7(i))},n),t&&(t.finalized_=!1),r}var kK=new _K,F7=kK.produce;function U7(e){return({dispatch:r,getState:n})=>l=>i=>typeof i=="function"?i(r,n,e):l(i)}var PK=U7(),IK=U7,MK=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Kh:Kh.apply(null,arguments)};function Bs(e,t){function r(...n){if(t){let l=t(...n);if(!l)throw new Error(us(0));return{type:e,payload:l.payload,..."meta"in l&&{meta:l.meta},..."error"in l&&{error:l.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>O7(n)&&n.type===e,r}var j7=class Gm extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Gm.prototype)}static get[Symbol.species](){return Gm}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Gm(...t[0].concat(this)):new Gm(...t.concat(this))}};function k6(e){return ul(e)?F7(e,()=>{}):e}function Lg(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function RK(e){return typeof e=="boolean"}var LK=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:l=!0,actionCreatorCheck:i=!0}=t??{};let u=new j7;return r&&(RK(r)?u.push(PK):u.push(IK(r.extraArgument))),u},z7="RTK_autoBatch",Kr=()=>e=>({payload:e,meta:{[z7]:!0}}),P6=e=>t=>{setTimeout(t,e)},V7=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let l=!0,i=!1,u=!1;const g=new Set,h=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:P6(10):e.type==="callback"?e.queueNotification:P6(e.timeout),p=()=>{u=!1,i&&(i=!1,g.forEach(y=>y()))};return Object.assign({},n,{subscribe(y){const v=()=>l&&y(),C=n.subscribe(v);return g.add(y),()=>{C(),g.delete(y)}},dispatch(y){try{return l=!y?.meta?.[z7],i=!l,i&&(u||(u=!0,h(p))),n.dispatch(y)}finally{l=!0}}})},BK=e=>function(r){const{autoBatch:n=!0}=r??{};let l=new j7(e);return n&&l.push(V7(typeof n=="object"?n:void 0)),l};function FK(e){const t=LK(),{reducer:r=void 0,middleware:n,devTools:l=!0,preloadedState:i=void 0,enhancers:u=void 0}=e||{};let g;if(typeof r=="function")g=r;else if(Lw(r))g=T7(r);else throw new Error(us(1));let h;typeof n=="function"?h=n(t):h=t();let p=Kh;l&&(p=MK({trace:!1,...typeof l=="object"&&l}));const y=yK(...h),v=BK(y);let C=typeof u=="function"?u(v):v();const T=p(...C);return A7(g,i,T)}function H7(e){const t={},r=[];let n;const l={addCase(i,u){const g=typeof i=="string"?i:i.type;if(!g)throw new Error(us(28));if(g in t)throw new Error(us(29));return t[g]=u,l},addAsyncThunk(i,u){return u.pending&&(t[i.pending.type]=u.pending),u.rejected&&(t[i.rejected.type]=u.rejected),u.fulfilled&&(t[i.fulfilled.type]=u.fulfilled),u.settled&&r.push({matcher:i.settled,reducer:u.settled}),l},addMatcher(i,u){return r.push({matcher:i,reducer:u}),l},addDefaultCase(i){return n=i,l}};return e(l),[t,r,n]}function UK(e){return typeof e=="function"}function jK(e,t){let[r,n,l]=H7(t),i;if(UK(e))i=()=>k6(e());else{const g=k6(e);i=()=>g}function u(g=i(),h){let p=[r[h.type],...n.filter(({matcher:y})=>y(h)).map(({reducer:y})=>y)];return p.filter(y=>!!y).length===0&&(p=[l]),p.reduce((y,v)=>{if(v)if(Ti(y)){const T=v(y,h);return T===void 0?y:T}else{if(ul(y))return F7(y,C=>v(C,h));{const C=v(y,h);if(C===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return C}}return y},g)}return u.getInitialState=i,u}var zK="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",VK=(e=21)=>{let t="",r=e;for(;r--;)t+=zK[Math.random()*64|0];return t},HK=Symbol.for("rtk-slice-createasyncthunk");function $K(e,t){return`${e}/${t}`}function qK({creators:e}={}){const t=e?.asyncThunk?.[HK];return function(n){const{name:l,reducerPath:i=l}=n;if(!l)throw new Error(us(11));const u=(typeof n.reducers=="function"?n.reducers(YK()):n.reducers)||{},g=Object.keys(u),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(M,G){const F=typeof M=="string"?M:M.type;if(!F)throw new Error(us(12));if(F in h.sliceCaseReducersByType)throw new Error(us(13));return h.sliceCaseReducersByType[F]=G,p},addMatcher(M,G){return h.sliceMatchers.push({matcher:M,reducer:G}),p},exposeAction(M,G){return h.actionCreators[M]=G,p},exposeCaseReducer(M,G){return h.sliceCaseReducersByName[M]=G,p}};g.forEach(M=>{const G=u[M],F={reducerName:M,type:$K(l,M),createNotation:typeof n.reducers=="function"};WK(G)?ZK(F,G,p,t):XK(F,G,p)});function y(){const[M={},G=[],F=void 0]=typeof n.extraReducers=="function"?H7(n.extraReducers):[n.extraReducers],U={...M,...h.sliceCaseReducersByType};return jK(n.initialState,L=>{for(let V in U)L.addCase(V,U[V]);for(let V of h.sliceMatchers)L.addMatcher(V.matcher,V.reducer);for(let V of G)L.addMatcher(V.matcher,V.reducer);F&&L.addDefaultCase(F)})}const v=M=>M,C=new Map,T=new WeakMap;let D;function P(M,G){return D||(D=y()),D(M,G)}function k(){return D||(D=y()),D.getInitialState()}function R(M,G=!1){function F(L){let V=L[M];return typeof V>"u"&&G&&(V=Lg(T,F,k)),V}function U(L=v){const V=Lg(C,G,()=>new WeakMap);return Lg(V,L,()=>{const j={};for(const[Y,H]of Object.entries(n.selectors??{}))j[Y]=GK(H,L,()=>Lg(T,L,k),G);return j})}return{reducerPath:M,getSelectors:U,get selectors(){return U(F)},selectSlice:F}}const B={name:l,reducer:P,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:k,...R(i),injectInto(M,{reducerPath:G,...F}={}){const U=G??i;return M.inject({reducerPath:U,reducer:P},F),{...B,...R(U,!0)}}};return B}}function GK(e,t,r,n){function l(i,...u){let g=t(i);return typeof g>"u"&&n&&(g=r()),e(g,...u)}return l.unwrapped=e,l}var qn=qK();function YK(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function XK({type:e,reducerName:t,createNotation:r},n,l){let i,u;if("reducer"in n){if(r&&!KK(n))throw new Error(us(17));i=n.reducer,u=n.prepare}else i=n;l.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,u?Bs(e,u):Bs(e))}function WK(e){return e._reducerDefinitionType==="asyncThunk"}function KK(e){return e._reducerDefinitionType==="reducerWithPrepare"}function ZK({type:e,reducerName:t},r,n,l){if(!l)throw new Error(us(18));const{payloadCreator:i,fulfilled:u,pending:g,rejected:h,settled:p,options:y}=r,v=l(e,i,y);n.exposeAction(t,v),u&&n.addCase(v.fulfilled,u),g&&n.addCase(v.pending,g),h&&n.addCase(v.rejected,h),p&&n.addMatcher(v.settled,p),n.exposeCaseReducer(t,{fulfilled:u||Bg,pending:g||Bg,rejected:h||Bg,settled:p||Bg})}function Bg(){}var QK="task",$7="listener",q7="completed",Vw="cancelled",JK=`task-${Vw}`,eZ=`task-${q7}`,HE=`${$7}-${Vw}`,tZ=`${$7}-${q7}`,ly=class{constructor(e){this.code=e,this.message=`${QK} ${Vw} (reason: ${e})`}name="TaskAbortError";message},Hw=(e,t)=>{if(typeof e!="function")throw new TypeError(us(32))},tp=()=>{},G7=(e,t=tp)=>(e.catch(t),e),Y7=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Pc=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ic=e=>{if(e.aborted){const{reason:t}=e;throw new ly(t)}};function X7(e,t){let r=tp;return new Promise((n,l)=>{const i=()=>l(new ly(e.reason));if(e.aborted){i();return}r=Y7(e,i),t.finally(()=>r()).then(n,l)}).finally(()=>{r=tp})}var rZ=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof ly?"cancelled":"rejected",error:r}}finally{t?.()}},rp=e=>t=>G7(X7(e,t).then(r=>(Ic(e),r))),W7=e=>{const t=rp(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Wu}=Object,I6={},iy="listenerMiddleware",aZ=(e,t)=>{const r=n=>Y7(e,()=>Pc(n,e.reason));return(n,l)=>{Hw(n);const i=new AbortController;r(i);const u=rZ(async()=>{Ic(e),Ic(i.signal);const g=await n({pause:rp(i.signal),delay:W7(i.signal),signal:i.signal});return Ic(i.signal),g},()=>Pc(i,eZ));return l?.autoJoin&&t.push(u.catch(tp)),{result:rp(e)(u),cancel(){Pc(i,JK)}}}},nZ=(e,t)=>{const r=async(n,l)=>{Ic(t);let i=()=>{};const g=[new Promise((h,p)=>{let y=e({predicate:n,effect:(v,C)=>{C.unsubscribe(),h([v,C.getState(),C.getOriginalState()])}});i=()=>{y(),p()}})];l!=null&&g.push(new Promise(h=>setTimeout(h,l,null)));try{const h=await X7(t,Promise.race(g));return Ic(t),h}finally{i()}};return(n,l)=>G7(r(n,l))},K7=e=>{let{type:t,actionCreator:r,matcher:n,predicate:l,effect:i}=e;if(t)l=Bs(t).match;else if(r)t=r.type,l=r.match;else if(n)l=n;else if(!l)throw new Error(us(21));return Hw(i),{predicate:l,type:t,effect:i}},Z7=Wu(e=>{const{type:t,predicate:r,effect:n}=K7(e);return{id:VK(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(us(22))}}},{withTypes:()=>Z7}),M6=(e,t)=>{const{type:r,effect:n,predicate:l}=K7(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===l)&&i.effect===n)},$E=e=>{e.pending.forEach(t=>{Pc(t,HE)})},sZ=(e,t)=>()=>{for(const r of t.keys())$E(r);e.clear()},R6=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Q7=Wu(Bs(`${iy}/add`),{withTypes:()=>Q7}),lZ=Bs(`${iy}/removeAll`),J7=Wu(Bs(`${iy}/remove`),{withTypes:()=>J7}),iZ=(...e)=>{console.error(`${iy}/error`,...e)},$f=(e={})=>{const t=new Map,r=new Map,n=T=>{const D=r.get(T)??0;r.set(T,D+1)},l=T=>{const D=r.get(T)??1;D===1?r.delete(T):r.set(T,D-1)},{extra:i,onError:u=iZ}=e;Hw(u);const g=T=>(T.unsubscribe=()=>t.delete(T.id),t.set(T.id,T),D=>{T.unsubscribe(),D?.cancelActive&&$E(T)}),h=T=>{const D=M6(t,T)??Z7(T);return g(D)};Wu(h,{withTypes:()=>h});const p=T=>{const D=M6(t,T);return D&&(D.unsubscribe(),T.cancelActive&&$E(D)),!!D};Wu(p,{withTypes:()=>p});const y=async(T,D,P,k)=>{const R=new AbortController,B=nZ(h,R.signal),M=[];try{T.pending.add(R),n(T),await Promise.resolve(T.effect(D,Wu({},P,{getOriginalState:k,condition:(G,F)=>B(G,F).then(Boolean),take:B,delay:W7(R.signal),pause:rp(R.signal),extra:i,signal:R.signal,fork:aZ(R.signal,M),unsubscribe:T.unsubscribe,subscribe:()=>{t.set(T.id,T)},cancelActiveListeners:()=>{T.pending.forEach((G,F,U)=>{G!==R&&(Pc(G,HE),U.delete(G))})},cancel:()=>{Pc(R,HE),T.pending.delete(R)},throwIfCancelled:()=>{Ic(R.signal)}})))}catch(G){G instanceof ly||R6(u,G,{raisedBy:"effect"})}finally{await Promise.all(M),Pc(R,tZ),l(T),T.pending.delete(R)}},v=sZ(t,r);return{middleware:T=>D=>P=>{if(!O7(P))return D(P);if(Q7.match(P))return h(P.payload);if(lZ.match(P)){v();return}if(J7.match(P))return p(P.payload);let k=T.getState();const R=()=>{if(k===I6)throw new Error(us(23));return k};let B;try{if(B=D(P),t.size>0){const M=T.getState(),G=Array.from(t.values());for(const F of G){let U=!1;try{U=F.predicate(P,M,k)}catch(L){U=!1,R6(u,L,{raisedBy:"predicate"})}U&&y(F,P,T,R)}}}finally{k=I6}return B},startListening:h,stopListening:p,clearListeners:v}};function us(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var oZ={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},eI=qn({name:"chartLayout",initialState:oZ,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,l,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(l=t.payload.bottom)!==null&&l!==void 0?l:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:cZ,setLayout:uZ,setChartSize:dZ,setScale:mZ}=eI.actions,fZ=eI.reducer;function tI(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function L6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function $u(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L6(Object(r),!0).forEach(function(n){gZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gZ(e,t,r){return(t=hZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hZ(e){var t=pZ(e,"string");return typeof t=="symbol"?t:t+""}function pZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function va(e,t,r){return ms(e)||ms(t)?r:Ai(t)?mf(e,t,r):typeof t=="function"?t(e):r}var yZ=(e,t,r)=>{if(t&&r){var{width:n,height:l}=r,{align:i,verticalAlign:u,layout:g}=t;if((g==="vertical"||g==="horizontal"&&u==="middle")&&i!=="center"&&It(e[i]))return $u($u({},e),{},{[i]:e[i]+(n||0)});if((g==="horizontal"||g==="vertical"&&i==="center")&&u!=="middle"&&It(e[u]))return $u($u({},e),{},{[u]:e[u]+(l||0)})}return e},Vc=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",B6=1e-4,xZ=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),l=Math.min(n[0],n[1])-B6,i=Math.max(n[0],n[1])+B6,u=e(t[0]),g=e(t[r-1]);(u<l||u>i||g<l||g>i)&&e.domain([t[0],t[r-1]])}},bZ=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var l=0,i=0,u=0;u<t;++u){var g=Si(e[u][r][1])?e[u][r][0]:e[u][r][1];g>=0?(e[u][r][0]=l,e[u][r][1]=l+g,l=e[u][r][1]):(e[u][r][0]=i,e[u][r][1]=i+g,i=e[u][r][1])}},vZ=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var l=0,i=0;i<t;++i){var u=Si(e[i][r][1])?e[i][r][0]:e[i][r][1];u>=0?(e[i][r][0]=l,e[i][r][1]=l+u,l=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},EZ={sign:bZ,expand:jX,none:ld,silhouette:zX,wiggle:VX,positive:vZ},wZ=(e,t,r)=>{var n=EZ[r],l=UX().keys(t).value((i,u)=>Number(va(i,u,0))).order(IE).offset(n);return l(e)},NZ=e=>{var t=e.flat(2).filter(It);return[Math.min(...t),Math.max(...t)]},SZ=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],CZ=(e,t,r)=>{if(e!=null)return SZ(Object.keys(e).reduce((n,l)=>{var i=e[l],{stackedData:u}=i,g=u.reduce((h,p)=>{var y=tI(p,t,r),v=NZ(y);return[Math.min(h[0],v[0]),Math.max(h[1],v[1])]},[1/0,-1/0]);return[Math.min(g[0],n[0]),Math.max(g[1],n[1])]},[1/0,-1/0]))},F6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,U6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,j6=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();return n}if(e&&t&&t.length>=2){for(var l=Jp(t,y=>y.coordinate),i=1/0,u=1,g=l.length;u<g;u++){var h=l[u],p=l[u-1];i=Math.min((h.coordinate||0)-(p.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function z6(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:l,name:i}=e;return $u($u({},t),{},{dataKey:r,payload:n,value:l,name:i})}function rI(e,t){if(e)return String(e);if(typeof t=="string")return t}var AZ=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},TZ=(e,t)=>t==="centric"?e.angle:e.radius,Pi=e=>e.layout.width,Ii=e=>e.layout.height,OZ=e=>e.layout.scale,aI=e=>e.layout.margin,oy=Me(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),cy=Me(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),nI="data-recharts-item-index",sI="data-recharts-item-data-key",qf=60;function V6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Fg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V6(Object(r),!0).forEach(function(n){DZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DZ(e,t,r){return(t=_Z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Z(e){var t=kZ(e,"string");return typeof t=="symbol"?t:t+""}function kZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PZ=e=>e.brush.height;function IZ(e){var t=cy(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var l=typeof n.width=="number"?n.width:qf;return r+l}return r},0)}function MZ(e){var t=cy(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var l=typeof n.width=="number"?n.width:qf;return r+l}return r},0)}function RZ(e){var t=oy(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function LZ(e){var t=oy(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Za=Me([Pi,Ii,aI,PZ,IZ,MZ,RZ,LZ,S7,uK],(e,t,r,n,l,i,u,g,h,p)=>{var y={left:(r.left||0)+l,right:(r.right||0)+i},v={top:(r.top||0)+u,bottom:(r.bottom||0)+g},C=Fg(Fg({},v),y),T=C.bottom;C.bottom+=n,C=yZ(C,h,p);var D=e-C.left-C.right,P=t-C.top-C.bottom;return Fg(Fg({brushBottom:T},C),{},{width:Math.max(D,0),height:Math.max(P,0)})}),BZ=Me(Za,e=>({x:e.left,y:e.top,width:e.width,height:e.height}));Me(Pi,Ii,(e,t)=>({x:0,y:0,width:e,height:t}));var FZ=w.createContext(null),Uo=()=>w.useContext(FZ)!=null,uy=e=>e.brush,dy=Me([uy,Za,aI],(e,t,r)=>({height:e.height,x:It(e.x)?e.x:t.left,y:It(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:It(e.width)?e.width:t.width})),tv={},rv={},av={},H6;function UZ(){return H6||(H6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:l,edges:i}={}){let u,g=null;const h=i!=null&&i.includes("leading"),p=i==null||i.includes("trailing"),y=()=>{g!==null&&(r.apply(u,g),u=void 0,g=null)},v=()=>{p&&y(),P()};let C=null;const T=()=>{C!=null&&clearTimeout(C),C=setTimeout(()=>{C=null,v()},n)},D=()=>{C!==null&&(clearTimeout(C),C=null)},P=()=>{D(),u=void 0,g=null},k=()=>{y()},R=function(...B){if(l?.aborted)return;u=this,g=B;const M=C==null;T(),h&&M&&y()};return R.schedule=T,R.cancel=P,R.flush=k,l?.addEventListener("abort",P,{once:!0}),R}e.debounce=t})(av)),av}var $6;function jZ(){return $6||($6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UZ();function r(n,l=0,i={}){typeof i!="object"&&(i={});const{leading:u=!1,trailing:g=!0,maxWait:h}=i,p=Array(2);u&&(p[0]="leading"),g&&(p[1]="trailing");let y,v=null;const C=t.debounce(function(...P){y=n.apply(this,P),v=null},l,{edges:p}),T=function(...P){return h!=null&&(v===null&&(v=Date.now()),Date.now()-v>=h)?(y=n.apply(this,P),v=Date.now(),C.cancel(),C.schedule(),y):(C.apply(this,P),y)},D=()=>(C.flush(),y);return T.cancel=C.cancel,T.flush=D,T}e.debounce=r})(rv)),rv}var q6;function zZ(){return q6||(q6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jZ();function r(n,l=0,i={}){const{leading:u=!0,trailing:g=!0}=i;return t.debounce(n,l,{leading:u,maxWait:l,trailing:g})}e.throttle=r})(tv)),tv}var nv,G6;function VZ(){return G6||(G6=1,nv=zZ().throttle),nv}var HZ=VZ();const $Z=jl(HZ);var Y6=function(t,r){for(var n=arguments.length,l=new Array(n>2?n-2:0),i=2;i<n;i++)l[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=0;console.warn(r.replace(/%s/g,()=>l[u++]))}},lI=(e,t,r)=>{var{width:n="100%",height:l="100%",aspect:i,maxHeight:u}=r,g=Ci(n)?e:Number(n),h=Ci(l)?t:Number(l);return i&&i>0&&(g?h=g/i:h&&(g=h*i),u&&h!=null&&h>u&&(h=u)),{calculatedWidth:g,calculatedHeight:h}},qZ={width:0,height:0,overflow:"visible"},GZ={width:0,overflowX:"visible"},YZ={height:0,overflowY:"visible"},XZ={},WZ=e=>{var{width:t,height:r}=e,n=Ci(t),l=Ci(r);return n&&l?qZ:n?GZ:l?YZ:XZ};function KZ(e){var{width:t,height:r,aspect:n}=e,l=t,i=r;return l===void 0&&i===void 0?(l="100%",i="100%"):l===void 0?l=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:l,height:i}}function Ka(e){return Number.isFinite(e)}function Ro(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function qE(){return qE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qE.apply(null,arguments)}function X6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function W6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X6(Object(r),!0).forEach(function(n){ZZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZZ(e,t,r){return(t=QZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QZ(e){var t=JZ(e,"string");return typeof t=="symbol"?t:t+""}function JZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iI=w.createContext({width:-1,height:-1});function eQ(e){return Ro(e.width)&&Ro(e.height)}function oI(e){var{children:t,width:r,height:n}=e,l=w.useMemo(()=>({width:r,height:n}),[r,n]);return eQ(l)?w.createElement(iI.Provider,{value:l},t):null}var $w=()=>w.useContext(iI),tQ=w.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:l,height:i,minWidth:u=0,minHeight:g,maxHeight:h,children:p,debounce:y=0,id:v,className:C,onResize:T,style:D={}}=e,P=w.useRef(null),k=w.useRef();k.current=T,w.useImperativeHandle(t,()=>P.current);var[R,B]=w.useState({containerWidth:n.width,containerHeight:n.height}),M=w.useCallback((V,j)=>{B(Y=>{var H=Math.round(V),q=Math.round(j);return Y.containerWidth===H&&Y.containerHeight===q?Y:{containerWidth:H,containerHeight:q}})},[]);w.useEffect(()=>{if(P.current==null||typeof ResizeObserver>"u")return zf;var V=q=>{var le,{width:ue,height:re}=q[0].contentRect;M(ue,re),(le=k.current)===null||le===void 0||le.call(k,ue,re)};y>0&&(V=$Z(V,y,{trailing:!0,leading:!1}));var j=new ResizeObserver(V),{width:Y,height:H}=P.current.getBoundingClientRect();return M(Y,H),j.observe(P.current),()=>{j.disconnect()}},[M,y]);var{containerWidth:G,containerHeight:F}=R;Y6(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:U,calculatedHeight:L}=lI(G,F,{width:l,height:i,aspect:r,maxHeight:h});return Y6(U!=null&&U>0||L!=null&&L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,U,L,l,i,u,g,r),w.createElement("div",{id:v?"".concat(v):void 0,className:Ea("recharts-responsive-container",C),style:W6(W6({},D),{},{width:l,height:i,minWidth:u,minHeight:g,maxHeight:h}),ref:P},w.createElement("div",{style:WZ({width:l,height:i})},w.createElement(oI,{width:U,height:L},p)))}),GE=w.forwardRef((e,t)=>{var r=$w();if(Ro(r.width)&&Ro(r.height))return e.children;var{width:n,height:l}=KZ({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:u}=lI(void 0,void 0,{width:n,height:l,aspect:e.aspect,maxHeight:e.maxHeight});return It(i)&&It(u)?w.createElement(oI,{width:i,height:u},e.children):w.createElement(tQ,qE({},e,{width:n,height:l,ref:t}))});function cI(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var my=()=>{var e,t=Uo(),r=Rt(BZ),n=Rt(dy),l=(e=Rt(uy))===null||e===void 0?void 0:e.padding;return!t||!n||!l?r:{width:n.width-l.left-l.right,height:n.height-l.top-l.bottom,x:l.left,y:l.top}},rQ={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},aQ=()=>{var e;return(e=Rt(Za))!==null&&e!==void 0?e:rQ},uI=()=>Rt(Pi),dI=()=>Rt(Ii),nQ=()=>Rt(e=>e.layout.margin),Lr=e=>e.layout.layoutType,qw=()=>Rt(Lr),sQ=()=>{var e=qw();return e!==void 0},fy=e=>{var t=wa(),r=Uo(),{width:n,height:l}=e,i=$w(),u=n,g=l;return i&&(u=i.width>0?i.width:n,g=i.height>0?i.height:l),w.useEffect(()=>{!r&&Ro(u)&&Ro(g)&&t(dZ({width:u,height:g}))},[t,r,u,g]),null},mI=Symbol.for("immer-nothing"),K6=Symbol.for("immer-draftable"),fs=Symbol.for("immer-state");function nl(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var yf=Object.getPrototypeOf;function cd(e){return!!e&&!!e[fs]}function Fc(e){return e?fI(e)||Array.isArray(e)||!!e[K6]||!!e.constructor?.[K6]||Gf(e)||hy(e):!1}var lQ=Object.prototype.constructor.toString(),Z6=new WeakMap;function fI(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=Z6.get(r);return n===void 0&&(n=Function.toString.call(r),Z6.set(r,n)),n===lQ}function ap(e,t,r=!0){gy(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((n,l)=>t(l,n,e))}function gy(e){const t=e[fs];return t?t.type_:Array.isArray(e)?1:Gf(e)?2:hy(e)?3:0}function YE(e,t){return gy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function gI(e,t,r){const n=gy(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function iQ(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Gf(e){return e instanceof Map}function hy(e){return e instanceof Set}function vc(e){return e.copy_||e.base_}function XE(e,t){if(Gf(e))return new Map(e);if(hy(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=fI(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[fs];let l=Reflect.ownKeys(n);for(let i=0;i<l.length;i++){const u=l[i],g=n[u];g.writable===!1&&(g.writable=!0,g.configurable=!0),(g.get||g.set)&&(n[u]={configurable:!0,writable:!0,enumerable:g.enumerable,value:e[u]})}return Object.create(yf(e),n)}else{const n=yf(e);if(n!==null&&r)return{...e};const l=Object.create(n);return Object.assign(l,e)}}function Gw(e,t=!1){return py(e)||cd(e)||!Fc(e)||(gy(e)>1&&Object.defineProperties(e,{set:Ug,add:Ug,clear:Ug,delete:Ug}),Object.freeze(e),t&&Object.values(e).forEach(r=>Gw(r,!0))),e}function oQ(){nl(2)}var Ug={value:oQ};function py(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var cQ={};function Uc(e){const t=cQ[e];return t||nl(0,e),t}var xf;function hI(){return xf}function uQ(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Q6(e,t){t&&(Uc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function WE(e){KE(e),e.drafts_.forEach(dQ),e.drafts_=null}function KE(e){e===xf&&(xf=e.parent_)}function J6(e){return xf=uQ(xf,e)}function dQ(e){const t=e[fs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function eT(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[fs].modified_&&(WE(t),nl(4)),Fc(e)&&(e=np(t,e),t.parent_||sp(t,e)),t.patches_&&Uc("Patches").generateReplacementPatches_(r[fs].base_,e,t.patches_,t.inversePatches_)):e=np(t,r,[]),WE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==mI?e:void 0}function np(e,t,r){if(py(t))return t;const n=e.immer_.shouldUseStrictIteration(),l=t[fs];if(!l)return ap(t,(i,u)=>tT(e,l,t,i,u,r),n),t;if(l.scope_!==e)return t;if(!l.modified_)return sp(e,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const i=l.copy_;let u=i,g=!1;l.type_===3&&(u=new Set(i),i.clear(),g=!0),ap(u,(h,p)=>tT(e,l,i,h,p,r,g),n),sp(e,i,!1),r&&e.patches_&&Uc("Patches").generatePatches_(l,r,e.patches_,e.inversePatches_)}return l.copy_}function tT(e,t,r,n,l,i,u){if(l==null||typeof l!="object"&&!u)return;const g=py(l);if(!(g&&!u)){if(cd(l)){const h=i&&t&&t.type_!==3&&!YE(t.assigned_,n)?i.concat(n):void 0,p=np(e,l,h);if(gI(r,n,p),cd(p))e.canAutoFreeze_=!1;else return}else u&&r.add(l);if(Fc(l)&&!g){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===l&&g)return;np(e,l),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Gf(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&sp(e,l)}}}function sp(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Gw(t,r)}function mQ(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:hI(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=n,i=Yw;r&&(l=[n],i=bf);const{revoke:u,proxy:g}=Proxy.revocable(l,i);return n.draft_=g,n.revoke_=u,g}var Yw={get(e,t){if(t===fs)return e;const r=vc(e);if(!YE(r,t))return fQ(e,r,t);const n=r[t];return e.finalized_||!Fc(n)?n:n===sv(e.base_,t)?(lv(e),e.copy_[t]=QE(n,e)):n},has(e,t){return t in vc(e)},ownKeys(e){return Reflect.ownKeys(vc(e))},set(e,t,r){const n=pI(vc(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const l=sv(vc(e),t),i=l?.[fs];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(iQ(r,l)&&(r!==void 0||YE(e.base_,t)))return!0;lv(e),ZE(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return sv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,lv(e),ZE(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=vc(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){nl(11)},getPrototypeOf(e){return yf(e.base_)},setPrototypeOf(){nl(12)}},bf={};ap(Yw,(e,t)=>{bf[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});bf.deleteProperty=function(e,t){return bf.set.call(this,e,t,void 0)};bf.set=function(e,t,r){return Yw.set.call(this,e[0],t,r,e[0])};function sv(e,t){const r=e[fs];return(r?vc(r):e)[t]}function fQ(e,t,r){const n=pI(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function pI(e,t){if(!(t in e))return;let r=yf(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=yf(r)}}function ZE(e){e.modified_||(e.modified_=!0,e.parent_&&ZE(e.parent_))}function lv(e){e.copy_||(e.copy_=XE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var gQ=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const u=this;return function(h=i,...p){return u.produce(h,y=>r.call(this,y,...p))}}typeof r!="function"&&nl(6),n!==void 0&&typeof n!="function"&&nl(7);let l;if(Fc(t)){const i=J6(this),u=QE(t,void 0);let g=!0;try{l=r(u),g=!1}finally{g?WE(i):KE(i)}return Q6(i,n),eT(l,i)}else if(!t||typeof t!="object"){if(l=r(t),l===void 0&&(l=t),l===mI&&(l=void 0),this.autoFreeze_&&Gw(l,!0),n){const i=[],u=[];Uc("Patches").generateReplacementPatches_(t,l,i,u),n(i,u)}return l}else nl(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(u,...g)=>this.produceWithPatches(u,h=>t(h,...g));let n,l;return[this.produce(t,r,(u,g)=>{n=u,l=g}),n,l]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Fc(e)||nl(8),cd(e)&&(e=hQ(e));const t=J6(this),r=QE(e,void 0);return r[fs].isManual_=!0,KE(t),r}finishDraft(e,t){const r=e&&e[fs];(!r||!r.isManual_)&&nl(9);const{scope_:n}=r;return Q6(n,t),eT(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const l=t[r];if(l.path.length===0&&l.op==="replace"){e=l.value;break}}r>-1&&(t=t.slice(r+1));const n=Uc("Patches").applyPatches_;return cd(e)?n(e,t):this.produce(e,l=>n(l,t))}};function QE(e,t){const r=Gf(e)?Uc("MapSet").proxyMap_(e,t):hy(e)?Uc("MapSet").proxySet_(e,t):mQ(e,t);return(t?t.scope_:hI()).drafts_.push(r),r}function hQ(e){return cd(e)||nl(10,e),yI(e)}function yI(e){if(!Fc(e)||py(e))return e;const t=e[fs];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=XE(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=XE(e,!0);return ap(r,(l,i)=>{gI(r,l,yI(i))},n),t&&(t.finalized_=!1),r}var pQ=new gQ;pQ.produce;var yQ={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},xI=qn({name:"legend",initialState:yQ,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Kr()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,l=cl(e).payload.indexOf(r);l>-1&&(e.payload[l]=n)},prepare:Kr()},removeLegendPayload:{reducer(e,t){var r=cl(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Kr()}}}),{setLegendSize:rT,setLegendSettings:xQ,addLegendPayload:bQ,replaceLegendPayload:vQ,removeLegendPayload:EQ}=xI.actions,wQ=xI.reducer,NQ=["contextPayload"];function JE(){return JE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JE.apply(null,arguments)}function aT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function ud(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aT(Object(r),!0).forEach(function(n){SQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SQ(e,t,r){return(t=CQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CQ(e){var t=AQ(e,"string");return typeof t=="symbol"?t:t+""}function AQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TQ(e,t){if(e==null)return{};var r,n,l=OQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function OQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function DQ(e){return e.value}function _Q(e){var{contextPayload:t}=e,r=TQ(e,NQ),n=v7(t,e.payloadUniqBy,DQ),l=ud(ud({},r),{},{payload:n});return w.isValidElement(e.content)?w.cloneElement(e.content,l):typeof e.content=="function"?w.createElement(e.content,l):w.createElement(bW,l)}function kQ(e,t,r,n,l,i){var{layout:u,align:g,verticalAlign:h}=t,p,y;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(g==="center"&&u==="vertical"?p={left:((n||0)-i.width)/2}:p=g==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(h==="middle"?y={top:((l||0)-i.height)/2}:y=h==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),ud(ud({},p),y)}function PQ(e){var t=wa();return w.useEffect(()=>{t(xQ(e))},[t,e]),null}function IQ(e){var t=wa();return w.useEffect(()=>(t(rT(e)),()=>{t(rT({width:0,height:0}))}),[t,e]),null}function MQ(e,t,r,n){return e==="vertical"&&It(t)?{height:t}:e==="horizontal"?{width:r||n}:null}var RQ={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function bI(e){var t=zs(e,RQ),r=fK(),n=cX(),l=nQ(),{width:i,height:u,wrapperStyle:g,portal:h}=t,[p,y]=C7([r]),v=uI(),C=dI();if(v==null||C==null)return null;var T=v-(l?.left||0)-(l?.right||0),D=MQ(t.layout,u,i,T),P=h?g:ud(ud({position:"absolute",width:D?.width||i||"auto",height:D?.height||u||"auto"},kQ(g,t,l,v,C,p)),g),k=h??n;if(k==null||r==null)return null;var R=w.createElement("div",{className:"recharts-legend-wrapper",style:P,ref:y},w.createElement(PQ,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!h&&w.createElement(IQ,{width:p.width,height:p.height}),w.createElement(_Q,JE({},t,D,{margin:l,chartWidth:v,chartHeight:C,contextPayload:r})));return R2.createPortal(R,k)}bI.displayName="Legend";function e2(){return e2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e2.apply(null,arguments)}function nT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function iv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nT(Object(r),!0).forEach(function(n){LQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LQ(e,t,r){return(t=BQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BQ(e){var t=FQ(e,"string");return typeof t=="symbol"?t:t+""}function FQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UQ(e){return Array.isArray(e)&&Ai(e[0])&&Ai(e[1])?e.join(" ~ "):e}var jQ=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:l={},payload:i,formatter:u,itemSorter:g,wrapperClassName:h,labelClassName:p,label:y,labelFormatter:v,accessibilityLayer:C=!1}=e,T=()=>{if(i&&i.length){var F={padding:0,margin:0},U=(g?Jp(i,g):i).map((L,V)=>{if(L.type==="none")return null;var j=L.formatter||u||UQ,{value:Y,name:H}=L,q=Y,le=H;if(j){var ue=j(Y,H,L,V,i);if(Array.isArray(ue))[q,le]=ue;else if(ue!=null)q=ue;else return null}var re=iv({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},n);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(V),style:re},Ai(le)?w.createElement("span",{className:"recharts-tooltip-item-name"},le):null,Ai(le)?w.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,w.createElement("span",{className:"recharts-tooltip-item-value"},q),w.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:F},U)}return null},D=iv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),P=iv({margin:0},l),k=!ms(y),R=k?y:"",B=Ea("recharts-default-tooltip",h),M=Ea("recharts-tooltip-label",p);k&&v&&i!==void 0&&i!==null&&(R=v(y,i));var G=C?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",e2({className:B,style:D},G),w.createElement("p",{className:M,style:P},w.isValidElement(R)?R:"".concat(R)),T())},Dm="recharts-tooltip-wrapper",zQ={visibility:"hidden"};function VQ(e){var{coordinate:t,translateX:r,translateY:n}=e;return Ea(Dm,{["".concat(Dm,"-right")]:It(r)&&t&&It(t.x)&&r>=t.x,["".concat(Dm,"-left")]:It(r)&&t&&It(t.x)&&r<t.x,["".concat(Dm,"-bottom")]:It(n)&&t&&It(t.y)&&n>=t.y,["".concat(Dm,"-top")]:It(n)&&t&&It(t.y)&&n<t.y})}function sT(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:l,position:i,reverseDirection:u,tooltipDimension:g,viewBox:h,viewBoxDimension:p}=e;if(i&&It(i[n]))return i[n];var y=r[n]-g-(l>0?l:0),v=r[n]+l;if(t[n])return u[n]?y:v;var C=h[n];if(C==null)return 0;if(u[n]){var T=y,D=C;return T<D?Math.max(v,C):Math.max(y,C)}if(p==null)return 0;var P=v+g,k=C+p;return P>k?Math.max(y,C):Math.max(v,C)}function HQ(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function $Q(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:l,reverseDirection:i,tooltipBox:u,useTranslate3d:g,viewBox:h}=e,p,y,v;return u.height>0&&u.width>0&&r?(y=sT({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:l,reverseDirection:i,tooltipDimension:u.width,viewBox:h,viewBoxDimension:h.width}),v=sT({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:l,reverseDirection:i,tooltipDimension:u.height,viewBox:h,viewBoxDimension:h.height}),p=HQ({translateX:y,translateY:v,useTranslate3d:g})):p=zQ,{cssProperties:p,cssClasses:VQ({translateX:y,translateY:v,coordinate:r})}}function lT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function jg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lT(Object(r),!0).forEach(function(n){t2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t2(e,t,r){return(t=qQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qQ(e){var t=GQ(e,"string");return typeof t=="symbol"?t:t+""}function GQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class YQ extends w.PureComponent{constructor(){super(...arguments),t2(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),t2(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,l,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(l=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&l!==void 0?l:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:l,children:i,coordinate:u,hasPayload:g,isAnimationActive:h,offset:p,position:y,reverseDirection:v,useTranslate3d:C,viewBox:T,wrapperStyle:D,lastBoundingBox:P,innerRef:k,hasPortalFromProps:R}=this.props,{cssClasses:B,cssProperties:M}=$Q({allowEscapeViewBox:r,coordinate:u,offsetTopLeft:p,position:y,reverseDirection:v,tooltipBox:{height:P.height,width:P.width},useTranslate3d:C,viewBox:T}),G=R?{}:jg(jg({transition:h&&t?"transform ".concat(n,"ms ").concat(l):void 0},M),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&g?"visible":"hidden",position:"absolute",top:0,left:0}),F=jg(jg({},G),{},{visibility:!this.state.dismissed&&t&&g?"visible":"hidden"},D);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:B,style:F,ref:k},i)}}var vI=()=>{var e;return(e=Rt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function r2(){return r2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r2.apply(null,arguments)}function iT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function oT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iT(Object(r),!0).forEach(function(n){XQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XQ(e,t,r){return(t=WQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WQ(e){var t=KQ(e,"string");return typeof t=="symbol"?t:t+""}function KQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cT={curveBasisClosed:OX,curveBasisOpen:DX,curveBasis:TX,curveBumpX:fX,curveBumpY:gX,curveLinearClosed:_X,curveLinear:Zp,curveMonotoneX:kX,curveMonotoneY:PX,curveNatural:IX,curveStep:MX,curveStepAfter:LX,curveStepBefore:RX},lp=e=>Ka(e.x)&&Ka(e.y),uT=e=>e.base!=null&&lp(e.base)&&lp(e),_m=e=>e.x,km=e=>e.y,ZQ=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(jf(e));return(r==="curveMonotone"||r==="curveBump")&&t?cT["".concat(r).concat(t==="vertical"?"Y":"X")]:cT[r]||Zp},QQ=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:l,connectNulls:i=!1}=e,u=ZQ(t,l),g=i?r.filter(lp):r,h;if(Array.isArray(n)){var p=r.map((T,D)=>oT(oT({},T),{},{base:n[D]}));l==="vertical"?h=Pg().y(km).x1(_m).x0(T=>T.base.x):h=Pg().x(_m).y1(km).y0(T=>T.base.y);var y=h.defined(uT).curve(u),v=i?p.filter(uT):p;return y(v)}l==="vertical"&&It(n)?h=Pg().y(km).x1(_m).x0(n):It(n)?h=Pg().x(_m).y1(km).y0(n):h=WP().x(_m).y(km);var C=h.defined(lp).curve(u);return C(g)},Xw=e=>{var{className:t,points:r,path:n,pathRef:l}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?QQ(e):n;return w.createElement("path",r2({},sd(e),lW(e),{className:Ea("recharts-curve",t),d:i===null?void 0:i,ref:l}))},JQ=["x","y","top","left","width","height","className"];function a2(){return a2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a2.apply(null,arguments)}function dT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function eJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dT(Object(r),!0).forEach(function(n){tJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tJ(e,t,r){return(t=rJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rJ(e){var t=aJ(e,"string");return typeof t=="symbol"?t:t+""}function aJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nJ(e,t){if(e==null)return{};var r,n,l=sJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function sJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var lJ=(e,t,r,n,l,i)=>"M".concat(e,",").concat(l,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),iJ=e=>{var{x:t=0,y:r=0,top:n=0,left:l=0,width:i=0,height:u=0,className:g}=e,h=nJ(e,JQ),p=eJ({x:t,y:r,top:n,left:l,width:i,height:u},h);return!It(t)||!It(r)||!It(i)||!It(u)||!It(n)||!It(l)?null:w.createElement("path",a2({},Ls(p),{className:Ea("recharts-cross",g),d:lJ(t,r,i,u,n,l)}))};function oJ(e,t,r,n){var l=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-l:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-l,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function mT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function fT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mT(Object(r),!0).forEach(function(n){cJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cJ(e,t,r){return(t=uJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uJ(e){var t=dJ(e,"string");return typeof t=="symbol"?t:t+""}function dJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mJ=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),EI=(e,t,r)=>e.map(n=>"".concat(mJ(n)," ").concat(t,"ms ").concat(r)).join(","),fJ=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(l=>n.includes(l))),vf=(e,t)=>Object.keys(t).reduce((r,n)=>fT(fT({},r),{},{[n]:e(n,t[n])}),{});function gT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function ja(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gT(Object(r),!0).forEach(function(n){gJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gJ(e,t,r){return(t=hJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hJ(e){var t=pJ(e,"string");return typeof t=="symbol"?t:t+""}function pJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ip=(e,t,r)=>e+(t-e)*r,n2=e=>{var{from:t,to:r}=e;return t!==r},wI=(e,t,r)=>{var n=vf((l,i)=>{if(n2(i)){var[u,g]=e(i.from,i.to,i.velocity);return ja(ja({},i),{},{from:u,velocity:g})}return i},t);return r<1?vf((l,i)=>n2(i)?ja(ja({},i),{},{velocity:ip(i.velocity,n[l].velocity,r),from:ip(i.from,n[l].from,r)}):i,t):wI(e,n,r-1)};function yJ(e,t,r,n,l,i){var u,g=n.reduce((C,T)=>ja(ja({},C),{},{[T]:{from:e[T],velocity:0,to:t[T]}}),{}),h=()=>vf((C,T)=>T.from,g),p=()=>!Object.values(g).filter(n2).length,y=null,v=C=>{u||(u=C);var T=C-u,D=T/r.dt;g=wI(r,g,D),l(ja(ja(ja({},e),t),h())),u=C,p()||(y=i.setTimeout(v))};return()=>(y=i.setTimeout(v),()=>{var C;(C=y)===null||C===void 0||C()})}function xJ(e,t,r,n,l,i,u){var g=null,h=l.reduce((v,C)=>ja(ja({},v),{},{[C]:[e[C],t[C]]}),{}),p,y=v=>{p||(p=v);var C=(v-p)/n,T=vf((P,k)=>ip(...k,r(C)),h);if(i(ja(ja(ja({},e),t),T)),C<1)g=u.setTimeout(y);else{var D=vf((P,k)=>ip(...k,r(1)),h);i(ja(ja(ja({},e),t),D))}};return()=>(g=u.setTimeout(y),()=>{var v;(v=g)===null||v===void 0||v()})}const bJ=(e,t,r,n,l,i)=>{var u=fJ(e,t);return r==null?()=>(l(ja(ja({},e),t)),()=>{}):r.isStepper===!0?yJ(e,t,r,u,l,i):xJ(e,t,r,n,u,l,i)};var op=1e-4,NI=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],SI=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),hT=(e,t)=>r=>{var n=NI(e,t);return SI(n,r)},vJ=(e,t)=>r=>{var n=NI(e,t),l=[...n.map((i,u)=>i*u).slice(1),0];return SI(l,r)},EJ=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var l,i=r[0].split("(");if(i[0]==="cubic-bezier"&&((l=i[1])===null||l===void 0?void 0:l.split(")")[0].split(",").length)===4){var u=i[1].split(")")[0].split(",").map(g=>parseFloat(g));return[u[0],u[1],u[2],u[3]]}}}return r.length===4?r:[0,0,1,1]},wJ=(e,t,r,n)=>{var l=hT(e,r),i=hT(t,n),u=vJ(e,r),g=p=>p>1?1:p<0?0:p,h=p=>{for(var y=p>1?1:p,v=y,C=0;C<8;++C){var T=l(v)-y,D=u(v);if(Math.abs(T-y)<op||D<op)return i(v);v=g(v-T/D)}return i(v)};return h.isStepper=!1,h},pT=function(){return wJ(...EJ(...arguments))},NJ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:l=17}=t,i=(u,g,h)=>{var p=-(u-g)*r,y=h*n,v=h+(p-y)*l/1e3,C=h*l/1e3+u;return Math.abs(C-g)<op&&Math.abs(v)<op?[g,0]:[C,v]};return i.isStepper=!0,i.dt=l,i},SJ=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return pT(e);case"spring":return NJ();default:if(e.split("(")[0]==="cubic-bezier")return pT(e)}return typeof e=="function"?e:null};function CJ(e){var t,r=()=>null,n=!1,l=null,i=u=>{if(!n){if(Array.isArray(u)){if(!u.length)return;var g=u,[h,...p]=g;if(typeof h=="number"){l=e.setTimeout(i.bind(null,p),h);return}i(h),l=e.setTimeout(i.bind(null,p));return}typeof u=="string"&&(t=u,r(t)),typeof u=="object"&&(t=u,r(t)),typeof u=="function"&&u()}};return{stop:()=>{n=!0},start:u=>{n=!1,l&&(l(),l=null),i(u)},subscribe:u=>(r=u,()=>{r=()=>null}),getTimeoutController:()=>e}}class AJ{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),l=null,i=u=>{u-n>=r?t(u):typeof requestAnimationFrame=="function"&&(l=requestAnimationFrame(i))};return l=requestAnimationFrame(i),()=>{l!=null&&cancelAnimationFrame(l)}}}function TJ(){return CJ(new AJ)}var OJ=w.createContext(TJ);function DJ(e,t){var r=w.useContext(OJ);return w.useMemo(()=>t??r(e),[e,t,r])}var _J=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),yy={devToolsEnabled:!1,isSsr:_J()},kJ={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},yT={t:0},ov={t:1};function Ww(e){var t=zs(e,kJ),{isActive:r,canBegin:n,duration:l,easing:i,begin:u,onAnimationEnd:g,onAnimationStart:h,children:p}=t,y=r==="auto"?!yy.isSsr:r,v=DJ(t.animationId,t.animationManager),[C,T]=w.useState(y?yT:ov),D=w.useRef(null);return w.useEffect(()=>{y||T(ov)},[y]),w.useEffect(()=>{if(!y||!n)return zf;var P=bJ(yT,ov,SJ(i),l,T,v.getTimeoutController()),k=()=>{D.current=P()};return v.start([h,u,k,l,g]),()=>{v.stop(),D.current&&D.current(),g()}},[y,n,l,i,u,h,g,v]),p(C.t)}function Kw(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=w.useRef(ff(t)),n=w.useRef(e);return n.current!==e&&(r.current=ff(t),n.current=e),r.current}var PJ=["radius"],IJ=["radius"];function xT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function bT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xT(Object(r),!0).forEach(function(n){MJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MJ(e,t,r){return(t=RJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RJ(e){var t=LJ(e,"string");return typeof t=="symbol"?t:t+""}function LJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cp(){return cp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cp.apply(null,arguments)}function vT(e,t){if(e==null)return{};var r,n,l=BJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function BJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ET=(e,t,r,n,l)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),u=n>=0?1:-1,g=r>=0?1:-1,h=n>=0&&r>=0||n<0&&r<0?1:0,p;if(i>0&&l instanceof Array){for(var y=[0,0,0,0],v=0,C=4;v<C;v++)y[v]=l[v]>i?i:l[v];p="M".concat(e,",").concat(t+u*y[0]),y[0]>0&&(p+="A ".concat(y[0],",").concat(y[0],",0,0,").concat(h,",").concat(e+g*y[0],",").concat(t)),p+="L ".concat(e+r-g*y[1],",").concat(t),y[1]>0&&(p+="A ".concat(y[1],",").concat(y[1],",0,0,").concat(h,`,
        `).concat(e+r,",").concat(t+u*y[1])),p+="L ".concat(e+r,",").concat(t+n-u*y[2]),y[2]>0&&(p+="A ".concat(y[2],",").concat(y[2],",0,0,").concat(h,`,
        `).concat(e+r-g*y[2],",").concat(t+n)),p+="L ".concat(e+g*y[3],",").concat(t+n),y[3]>0&&(p+="A ".concat(y[3],",").concat(y[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(t+n-u*y[3])),p+="Z"}else if(i>0&&l===+l&&l>0){var T=Math.min(i,l);p="M ".concat(e,",").concat(t+u*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+g*T,",").concat(t,`
            L `).concat(e+r-g*T,",").concat(t,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+r,",").concat(t+u*T,`
            L `).concat(e+r,",").concat(t+n-u*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+r-g*T,",").concat(t+n,`
            L `).concat(e+g*T,",").concat(t+n,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e,",").concat(t+n-u*T," Z")}else p="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return p},wT={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},CI=e=>{var t=zs(e,wT),r=w.useRef(null),[n,l]=w.useState(-1);w.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ae=r.current.getTotalLength();ae&&l(ae)}catch{}},[]);var{x:i,y:u,width:g,height:h,radius:p,className:y}=t,{animationEasing:v,animationDuration:C,animationBegin:T,isAnimationActive:D,isUpdateAnimationActive:P}=t,k=w.useRef(g),R=w.useRef(h),B=w.useRef(i),M=w.useRef(u),G=w.useMemo(()=>({x:i,y:u,width:g,height:h,radius:p}),[i,u,g,h,p]),F=Kw(G,"rectangle-");if(i!==+i||u!==+u||g!==+g||h!==+h||g===0||h===0)return null;var U=Ea("recharts-rectangle",y);if(!P){var L=Ls(t),{radius:V}=L,j=vT(L,PJ);return w.createElement("path",cp({},j,{radius:typeof p=="number"?p:void 0,className:U,d:ET(i,u,g,h,p)}))}var Y=k.current,H=R.current,q=B.current,le=M.current,ue="0px ".concat(n===-1?1:n,"px"),re="".concat(n,"px 0px"),J=EI(["strokeDasharray"],C,typeof v=="string"?v:wT.animationEasing);return w.createElement(Ww,{animationId:F,key:F,canBegin:n>0,duration:C,easing:v,isActive:P,begin:T},ae=>{var pe=rl(Y,g,ae),xe=rl(H,h,ae),ee=rl(q,i,ae),K=rl(le,u,ae);r.current&&(k.current=pe,R.current=xe,B.current=ee,M.current=K);var te;D?ae>0?te={transition:J,strokeDasharray:re}:te={strokeDasharray:ue}:te={strokeDasharray:re};var ge=Ls(t),{radius:oe}=ge,Ne=vT(ge,IJ);return w.createElement("path",cp({},Ne,{radius:typeof p=="number"?p:void 0,className:U,d:ET(ee,K,pe,xe,p),ref:r,style:bT(bT({},te),t.style)}))})};function NT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function ST(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NT(Object(r),!0).forEach(function(n){FJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FJ(e,t,r){return(t=UJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UJ(e){var t=jJ(e,"string");return typeof t=="symbol"?t:t+""}function jJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var up=Math.PI/180,zJ=e=>e*180/Math.PI,Ia=(e,t,r,n)=>({x:e+Math.cos(-up*n)*r,y:t+Math.sin(-up*n)*r}),AI=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},VJ=(e,t)=>{var{x:r,y:n}=e,{x:l,y:i}=t;return Math.sqrt((r-l)**2+(n-i)**2)},HJ=(e,t)=>{var{x:r,y:n}=e,{cx:l,cy:i}=t,u=VJ({x:r,y:n},{x:l,y:i});if(u<=0)return{radius:u,angle:0};var g=(r-l)/u,h=Math.acos(g);return n>i&&(h=2*Math.PI-h),{radius:u,angle:zJ(h),angleInRadian:h}},$J=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),l=Math.floor(r/360),i=Math.min(n,l);return{startAngle:t-i*360,endAngle:r-i*360}},qJ=(e,t)=>{var{startAngle:r,endAngle:n}=t,l=Math.floor(r/360),i=Math.floor(n/360),u=Math.min(l,i);return e+u*360},GJ=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:l,angle:i}=HJ({x:r,y:n},t),{innerRadius:u,outerRadius:g}=t;if(l<u||l>g||l===0)return null;var{startAngle:h,endAngle:p}=$J(t),y=i,v;if(h<=p){for(;y>p;)y-=360;for(;y<h;)y+=360;v=y>=h&&y<=p}else{for(;y>h;)y-=360;for(;y<p;)y+=360;v=y>=p&&y<=h}return v?ST(ST({},t),{},{radius:l,angle:qJ(y,t)}):null};function TI(e){var{cx:t,cy:r,radius:n,startAngle:l,endAngle:i}=e,u=Ia(t,r,n,l),g=Ia(t,r,n,i);return{points:[u,g],cx:t,cy:r,radius:n,startAngle:l,endAngle:i}}function s2(){return s2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s2.apply(null,arguments)}var YJ=(e,t)=>{var r=jn(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},zg=e=>{var{cx:t,cy:r,radius:n,angle:l,sign:i,isExternal:u,cornerRadius:g,cornerIsExternal:h}=e,p=g*(u?1:-1)+n,y=Math.asin(g/p)/up,v=h?l:l+i*y,C=Ia(t,r,p,v),T=Ia(t,r,n,v),D=h?l-i*y:l,P=Ia(t,r,p*Math.cos(y*up),D);return{center:C,circleTangency:T,lineTangency:P,theta:y}},OI=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:l,startAngle:i,endAngle:u}=e,g=YJ(i,u),h=i+g,p=Ia(t,r,l,i),y=Ia(t,r,l,h),v="M ".concat(p.x,",").concat(p.y,`
    A `).concat(l,",").concat(l,`,0,
    `).concat(+(Math.abs(g)>180),",").concat(+(i>h),`,
    `).concat(y.x,",").concat(y.y,`
  `);if(n>0){var C=Ia(t,r,n,i),T=Ia(t,r,n,h);v+="L ".concat(T.x,",").concat(T.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(g)>180),",").concat(+(i<=h),`,
            `).concat(C.x,",").concat(C.y," Z")}else v+="L ".concat(t,",").concat(r," Z");return v},XJ=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:l,cornerRadius:i,forceCornerRadius:u,cornerIsExternal:g,startAngle:h,endAngle:p}=e,y=jn(p-h),{circleTangency:v,lineTangency:C,theta:T}=zg({cx:t,cy:r,radius:l,angle:h,sign:y,cornerRadius:i,cornerIsExternal:g}),{circleTangency:D,lineTangency:P,theta:k}=zg({cx:t,cy:r,radius:l,angle:p,sign:-y,cornerRadius:i,cornerIsExternal:g}),R=g?Math.abs(h-p):Math.abs(h-p)-T-k;if(R<0)return u?"M ".concat(C.x,",").concat(C.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):OI({cx:t,cy:r,innerRadius:n,outerRadius:l,startAngle:h,endAngle:p});var B="M ".concat(C.x,",").concat(C.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(y<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(l,",").concat(l,",0,").concat(+(R>180),",").concat(+(y<0),",").concat(D.x,",").concat(D.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(y<0),",").concat(P.x,",").concat(P.y,`
  `);if(n>0){var{circleTangency:M,lineTangency:G,theta:F}=zg({cx:t,cy:r,radius:n,angle:h,sign:y,isExternal:!0,cornerRadius:i,cornerIsExternal:g}),{circleTangency:U,lineTangency:L,theta:V}=zg({cx:t,cy:r,radius:n,angle:p,sign:-y,isExternal:!0,cornerRadius:i,cornerIsExternal:g}),j=g?Math.abs(h-p):Math.abs(h-p)-F-V;if(j<0&&i===0)return"".concat(B,"L").concat(t,",").concat(r,"Z");B+="L".concat(L.x,",").concat(L.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(y<0),",").concat(U.x,",").concat(U.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(j>180),",").concat(+(y>0),",").concat(M.x,",").concat(M.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(y<0),",").concat(G.x,",").concat(G.y,"Z")}else B+="L".concat(t,",").concat(r,"Z");return B},WJ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},DI=e=>{var t=zs(e,WJ),{cx:r,cy:n,innerRadius:l,outerRadius:i,cornerRadius:u,forceCornerRadius:g,cornerIsExternal:h,startAngle:p,endAngle:y,className:v}=t;if(i<l||p===y)return null;var C=Ea("recharts-sector",v),T=i-l,D=cs(u,T,0,!0),P;return D>0&&Math.abs(p-y)<360?P=XJ({cx:r,cy:n,innerRadius:l,outerRadius:i,cornerRadius:Math.min(D,T/2),forceCornerRadius:g,cornerIsExternal:h,startAngle:p,endAngle:y}):P=OI({cx:r,cy:n,innerRadius:l,outerRadius:i,startAngle:p,endAngle:y}),w.createElement("path",s2({},Ls(t),{className:C,d:P}))};function KJ(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(c7(t)){if(e==="centric"){var{cx:n,cy:l,innerRadius:i,outerRadius:u,angle:g}=t,h=Ia(n,l,i,g),p=Ia(n,l,u,g);return[{x:h.x,y:h.y},{x:p.x,y:p.y}]}return TI(t)}}var cv={},uv={},dv={},CT;function ZJ(){return CT||(CT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w7();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(dv)),dv}var AT;function QJ(){return AT||(AT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZJ();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(uv)),uv}var TT;function JJ(){return TT||(TT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N7(),r=QJ();function n(l,i,u){u&&typeof u!="number"&&t.isIterateeCall(l,i,u)&&(i=u=void 0),l=r.toFinite(l),i===void 0?(i=l,l=0):i=r.toFinite(i),u=u===void 0?l<i?1:-1:r.toFinite(u);const g=Math.max(Math.ceil((i-l)/(u||1)),0),h=new Array(g);for(let p=0;p<g;p++)h[p]=l,l+=u;return h}e.range=n})(cv)),cv}var mv,OT;function eee(){return OT||(OT=1,mv=JJ().range),mv}var tee=eee();const _I=jl(tee);function _o(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ree(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Zw(e){let t,r,n;e.length!==2?(t=_o,r=(g,h)=>_o(e(g),h),n=(g,h)=>e(g)-h):(t=e===_o||e===ree?e:aee,r=e,n=e);function l(g,h,p=0,y=g.length){if(p<y){if(t(h,h)!==0)return y;do{const v=p+y>>>1;r(g[v],h)<0?p=v+1:y=v}while(p<y)}return p}function i(g,h,p=0,y=g.length){if(p<y){if(t(h,h)!==0)return y;do{const v=p+y>>>1;r(g[v],h)<=0?p=v+1:y=v}while(p<y)}return p}function u(g,h,p=0,y=g.length){const v=l(g,h,p,y-1);return v>p&&n(g[v-1],h)>-n(g[v],h)?v-1:v}return{left:l,center:u,right:i}}function aee(){return 0}function kI(e){return e===null?NaN:+e}function*nee(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const see=Zw(_o),Yf=see.right;Zw(kI).center;class DT extends Map{constructor(t,r=oee){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,l]of t)this.set(n,l)}get(t){return super.get(_T(this,t))}has(t){return super.has(_T(this,t))}set(t,r){return super.set(lee(this,t),r)}delete(t){return super.delete(iee(this,t))}}function _T({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function lee({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function iee({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function oee(e){return e!==null&&typeof e=="object"?e.valueOf():e}function cee(e=_o){if(e===_o)return PI;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function PI(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const uee=Math.sqrt(50),dee=Math.sqrt(10),mee=Math.sqrt(2);function dp(e,t,r){const n=(t-e)/Math.max(0,r),l=Math.floor(Math.log10(n)),i=n/Math.pow(10,l),u=i>=uee?10:i>=dee?5:i>=mee?2:1;let g,h,p;return l<0?(p=Math.pow(10,-l)/u,g=Math.round(e*p),h=Math.round(t*p),g/p<e&&++g,h/p>t&&--h,p=-p):(p=Math.pow(10,l)*u,g=Math.round(e/p),h=Math.round(t/p),g*p<e&&++g,h*p>t&&--h),h<g&&.5<=r&&r<2?dp(e,t,r*2):[g,h,p]}function l2(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[l,i,u]=n?dp(t,e,r):dp(e,t,r);if(!(i>=l))return[];const g=i-l+1,h=new Array(g);if(n)if(u<0)for(let p=0;p<g;++p)h[p]=(i-p)/-u;else for(let p=0;p<g;++p)h[p]=(i-p)*u;else if(u<0)for(let p=0;p<g;++p)h[p]=(l+p)/-u;else for(let p=0;p<g;++p)h[p]=(l+p)*u;return h}function i2(e,t,r){return t=+t,e=+e,r=+r,dp(e,t,r)[2]}function o2(e,t,r){t=+t,e=+e,r=+r;const n=t<e,l=n?i2(t,e,r):i2(e,t,r);return(n?-1:1)*(l<0?1/-l:l)}function kT(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function PT(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function II(e,t,r=0,n=1/0,l){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(l=l===void 0?PI:cee(l);n>r;){if(n-r>600){const h=n-r+1,p=t-r+1,y=Math.log(h),v=.5*Math.exp(2*y/3),C=.5*Math.sqrt(y*v*(h-v)/h)*(p-h/2<0?-1:1),T=Math.max(r,Math.floor(t-p*v/h+C)),D=Math.min(n,Math.floor(t+(h-p)*v/h+C));II(e,t,T,D,l)}const i=e[t];let u=r,g=n;for(Pm(e,r,t),l(e[n],i)>0&&Pm(e,r,n);u<g;){for(Pm(e,u,g),++u,--g;l(e[u],i)<0;)++u;for(;l(e[g],i)>0;)--g}l(e[r],i)===0?Pm(e,r,g):(++g,Pm(e,g,n)),g<=t&&(r=g+1),t<=g&&(n=g-1)}return e}function Pm(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function fee(e,t,r){if(e=Float64Array.from(nee(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return PT(e);if(t>=1)return kT(e);var n,l=(n-1)*t,i=Math.floor(l),u=kT(II(e,i).subarray(0,i+1)),g=PT(e.subarray(i+1));return u+(g-u)*(l-i)}}function gee(e,t,r=kI){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,l=(n-1)*t,i=Math.floor(l),u=+r(e[i],i,e),g=+r(e[i+1],i+1,e);return u+(g-u)*(l-i)}}function hee(e,t,r){e=+e,t=+t,r=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+r;for(var n=-1,l=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(l);++n<l;)i[n]=e+n*r;return i}function Vs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Mi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const c2=Symbol("implicit");function Qw(){var e=new DT,t=[],r=[],n=c2;function l(i){let u=e.get(i);if(u===void 0){if(n!==c2)return n;e.set(i,u=t.push(i)-1)}return r[u%r.length]}return l.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new DT;for(const u of i)e.has(u)||e.set(u,t.push(u)-1);return l},l.range=function(i){return arguments.length?(r=Array.from(i),l):r.slice()},l.unknown=function(i){return arguments.length?(n=i,l):n},l.copy=function(){return Qw(t,r).unknown(n)},Vs.apply(l,arguments),l}function Jw(){var e=Qw().unknown(void 0),t=e.domain,r=e.range,n=0,l=1,i,u,g=!1,h=0,p=0,y=.5;delete e.unknown;function v(){var C=t().length,T=l<n,D=T?l:n,P=T?n:l;i=(P-D)/Math.max(1,C-h+p*2),g&&(i=Math.floor(i)),D+=(P-D-i*(C-h))*y,u=i*(1-h),g&&(D=Math.round(D),u=Math.round(u));var k=hee(C).map(function(R){return D+i*R});return r(T?k.reverse():k)}return e.domain=function(C){return arguments.length?(t(C),v()):t()},e.range=function(C){return arguments.length?([n,l]=C,n=+n,l=+l,v()):[n,l]},e.rangeRound=function(C){return[n,l]=C,n=+n,l=+l,g=!0,v()},e.bandwidth=function(){return u},e.step=function(){return i},e.round=function(C){return arguments.length?(g=!!C,v()):g},e.padding=function(C){return arguments.length?(h=Math.min(1,p=+C),v()):h},e.paddingInner=function(C){return arguments.length?(h=Math.min(1,C),v()):h},e.paddingOuter=function(C){return arguments.length?(p=+C,v()):p},e.align=function(C){return arguments.length?(y=Math.max(0,Math.min(1,C)),v()):y},e.copy=function(){return Jw(t(),[n,l]).round(g).paddingInner(h).paddingOuter(p).align(y)},Vs.apply(v(),arguments)}function MI(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return MI(t())},e}function pee(){return MI(Jw.apply(null,arguments).paddingInner(1))}function eN(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function RI(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Xf(){}var Ef=.7,mp=1/Ef,Ku="\\s*([+-]?\\d+)\\s*",wf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yee=/^#([0-9a-f]{3,8})$/,xee=new RegExp(`^rgb\\(${Ku},${Ku},${Ku}\\)$`),bee=new RegExp(`^rgb\\(${Rl},${Rl},${Rl}\\)$`),vee=new RegExp(`^rgba\\(${Ku},${Ku},${Ku},${wf}\\)$`),Eee=new RegExp(`^rgba\\(${Rl},${Rl},${Rl},${wf}\\)$`),wee=new RegExp(`^hsl\\(${wf},${Rl},${Rl}\\)$`),Nee=new RegExp(`^hsla\\(${wf},${Rl},${Rl},${wf}\\)$`),IT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eN(Xf,Nf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:MT,formatHex:MT,formatHex8:See,formatHsl:Cee,formatRgb:RT,toString:RT});function MT(){return this.rgb().formatHex()}function See(){return this.rgb().formatHex8()}function Cee(){return LI(this).formatHsl()}function RT(){return this.rgb().formatRgb()}function Nf(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=yee.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?LT(t):r===3?new zn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Vg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Vg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=xee.exec(e))?new zn(t[1],t[2],t[3],1):(t=bee.exec(e))?new zn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vee.exec(e))?Vg(t[1],t[2],t[3],t[4]):(t=Eee.exec(e))?Vg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=wee.exec(e))?UT(t[1],t[2]/100,t[3]/100,1):(t=Nee.exec(e))?UT(t[1],t[2]/100,t[3]/100,t[4]):IT.hasOwnProperty(e)?LT(IT[e]):e==="transparent"?new zn(NaN,NaN,NaN,0):null}function LT(e){return new zn(e>>16&255,e>>8&255,e&255,1)}function Vg(e,t,r,n){return n<=0&&(e=t=r=NaN),new zn(e,t,r,n)}function Aee(e){return e instanceof Xf||(e=Nf(e)),e?(e=e.rgb(),new zn(e.r,e.g,e.b,e.opacity)):new zn}function u2(e,t,r,n){return arguments.length===1?Aee(e):new zn(e,t,r,n??1)}function zn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}eN(zn,u2,RI(Xf,{brighter(e){return e=e==null?mp:Math.pow(mp,e),new zn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ef:Math.pow(Ef,e),new zn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new zn(Mc(this.r),Mc(this.g),Mc(this.b),fp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:BT,formatHex:BT,formatHex8:Tee,formatRgb:FT,toString:FT}));function BT(){return`#${Tc(this.r)}${Tc(this.g)}${Tc(this.b)}`}function Tee(){return`#${Tc(this.r)}${Tc(this.g)}${Tc(this.b)}${Tc((isNaN(this.opacity)?1:this.opacity)*255)}`}function FT(){const e=fp(this.opacity);return`${e===1?"rgb(":"rgba("}${Mc(this.r)}, ${Mc(this.g)}, ${Mc(this.b)}${e===1?")":`, ${e})`}`}function fp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Tc(e){return e=Mc(e),(e<16?"0":"")+e.toString(16)}function UT(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new sl(e,t,r,n)}function LI(e){if(e instanceof sl)return new sl(e.h,e.s,e.l,e.opacity);if(e instanceof Xf||(e=Nf(e)),!e)return new sl;if(e instanceof sl)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,l=Math.min(t,r,n),i=Math.max(t,r,n),u=NaN,g=i-l,h=(i+l)/2;return g?(t===i?u=(r-n)/g+(r<n)*6:r===i?u=(n-t)/g+2:u=(t-r)/g+4,g/=h<.5?i+l:2-i-l,u*=60):g=h>0&&h<1?0:u,new sl(u,g,h,e.opacity)}function Oee(e,t,r,n){return arguments.length===1?LI(e):new sl(e,t,r,n??1)}function sl(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}eN(sl,Oee,RI(Xf,{brighter(e){return e=e==null?mp:Math.pow(mp,e),new sl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ef:Math.pow(Ef,e),new sl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,l=2*r-n;return new zn(fv(e>=240?e-240:e+120,l,n),fv(e,l,n),fv(e<120?e+240:e-120,l,n),this.opacity)},clamp(){return new sl(jT(this.h),Hg(this.s),Hg(this.l),fp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fp(this.opacity);return`${e===1?"hsl(":"hsla("}${jT(this.h)}, ${Hg(this.s)*100}%, ${Hg(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jT(e){return e=(e||0)%360,e<0?e+360:e}function Hg(e){return Math.max(0,Math.min(1,e||0))}function fv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const tN=e=>()=>e;function Dee(e,t){return function(r){return e+r*t}}function _ee(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function kee(e){return(e=+e)==1?BI:function(t,r){return r-t?_ee(t,r,e):tN(isNaN(t)?r:t)}}function BI(e,t){var r=t-e;return r?Dee(e,r):tN(isNaN(e)?t:e)}const zT=(function e(t){var r=kee(t);function n(l,i){var u=r((l=u2(l)).r,(i=u2(i)).r),g=r(l.g,i.g),h=r(l.b,i.b),p=BI(l.opacity,i.opacity);return function(y){return l.r=u(y),l.g=g(y),l.b=h(y),l.opacity=p(y),l+""}}return n.gamma=e,n})(1);function Pee(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),l;return function(i){for(l=0;l<r;++l)n[l]=e[l]*(1-i)+t[l]*i;return n}}function Iee(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Mee(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,l=new Array(n),i=new Array(r),u;for(u=0;u<n;++u)l[u]=Td(e[u],t[u]);for(;u<r;++u)i[u]=t[u];return function(g){for(u=0;u<n;++u)i[u]=l[u](g);return i}}function Ree(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function gp(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Lee(e,t){var r={},n={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?r[l]=Td(e[l],t[l]):n[l]=t[l];return function(i){for(l in r)n[l]=r[l](i);return n}}var d2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gv=new RegExp(d2.source,"g");function Bee(e){return function(){return e}}function Fee(e){return function(t){return e(t)+""}}function Uee(e,t){var r=d2.lastIndex=gv.lastIndex=0,n,l,i,u=-1,g=[],h=[];for(e=e+"",t=t+"";(n=d2.exec(e))&&(l=gv.exec(t));)(i=l.index)>r&&(i=t.slice(r,i),g[u]?g[u]+=i:g[++u]=i),(n=n[0])===(l=l[0])?g[u]?g[u]+=l:g[++u]=l:(g[++u]=null,h.push({i:u,x:gp(n,l)})),r=gv.lastIndex;return r<t.length&&(i=t.slice(r),g[u]?g[u]+=i:g[++u]=i),g.length<2?h[0]?Fee(h[0].x):Bee(t):(t=h.length,function(p){for(var y=0,v;y<t;++y)g[(v=h[y]).i]=v.x(p);return g.join("")})}function Td(e,t){var r=typeof t,n;return t==null||r==="boolean"?tN(t):(r==="number"?gp:r==="string"?(n=Nf(t))?(t=n,zT):Uee:t instanceof Nf?zT:t instanceof Date?Ree:Iee(t)?Pee:Array.isArray(t)?Mee:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Lee:gp)(e,t)}function rN(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function jee(e,t){t===void 0&&(t=e,e=Td);for(var r=0,n=t.length-1,l=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(l,l=t[++r]);return function(u){var g=Math.max(0,Math.min(n-1,Math.floor(u*=n)));return i[g](u-g)}}function zee(e){return function(){return e}}function hp(e){return+e}var VT=[0,1];function Nn(e){return e}function m2(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:zee(isNaN(t)?NaN:.5)}function Vee(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Hee(e,t,r){var n=e[0],l=e[1],i=t[0],u=t[1];return l<n?(n=m2(l,n),i=r(u,i)):(n=m2(n,l),i=r(i,u)),function(g){return i(n(g))}}function $ee(e,t,r){var n=Math.min(e.length,t.length)-1,l=new Array(n),i=new Array(n),u=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<n;)l[u]=m2(e[u],e[u+1]),i[u]=r(t[u],t[u+1]);return function(g){var h=Yf(e,g,1,n)-1;return i[h](l[h](g))}}function Wf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function xy(){var e=VT,t=VT,r=Td,n,l,i,u=Nn,g,h,p;function y(){var C=Math.min(e.length,t.length);return u!==Nn&&(u=Vee(e[0],e[C-1])),g=C>2?$ee:Hee,h=p=null,v}function v(C){return C==null||isNaN(C=+C)?i:(h||(h=g(e.map(n),t,r)))(n(u(C)))}return v.invert=function(C){return u(l((p||(p=g(t,e.map(n),gp)))(C)))},v.domain=function(C){return arguments.length?(e=Array.from(C,hp),y()):e.slice()},v.range=function(C){return arguments.length?(t=Array.from(C),y()):t.slice()},v.rangeRound=function(C){return t=Array.from(C),r=rN,y()},v.clamp=function(C){return arguments.length?(u=C?!0:Nn,y()):u!==Nn},v.interpolate=function(C){return arguments.length?(r=C,y()):r},v.unknown=function(C){return arguments.length?(i=C,v):i},function(C,T){return n=C,l=T,y()}}function aN(){return xy()(Nn,Nn)}function qee(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function pp(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function dd(e){return e=pp(Math.abs(e)),e?e[1]:NaN}function Gee(e,t){return function(r,n){for(var l=r.length,i=[],u=0,g=e[0],h=0;l>0&&g>0&&(h+g+1>n&&(g=Math.max(1,n-h)),i.push(r.substring(l-=g,l+g)),!((h+=g+1)>n));)g=e[u=(u+1)%e.length];return i.reverse().join(t)}}function Yee(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Xee=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sf(e){if(!(t=Xee.exec(e)))throw new Error("invalid format: "+e);var t;return new nN({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Sf.prototype=nN.prototype;function nN(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}nN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Wee(e){e:for(var t=e.length,r=1,n=-1,l;r<t;++r)switch(e[r]){case".":n=l=r;break;case"0":n===0&&(n=r),l=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(l+1):e}var FI;function Kee(e,t){var r=pp(e,t);if(!r)return e+"";var n=r[0],l=r[1],i=l-(FI=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,u=n.length;return i===u?n:i>u?n+new Array(i-u+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+pp(e,Math.max(0,t+i-1))[0]}function HT(e,t){var r=pp(e,t);if(!r)return e+"";var n=r[0],l=r[1];return l<0?"0."+new Array(-l).join("0")+n:n.length>l+1?n.slice(0,l+1)+"."+n.slice(l+1):n+new Array(l-n.length+2).join("0")}const $T={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:qee,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>HT(e*100,t),r:HT,s:Kee,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function qT(e){return e}var GT=Array.prototype.map,YT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Zee(e){var t=e.grouping===void 0||e.thousands===void 0?qT:Gee(GT.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?qT:Yee(GT.call(e.numerals,String)),u=e.percent===void 0?"%":e.percent+"",g=e.minus===void 0?"":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function p(v){v=Sf(v);var C=v.fill,T=v.align,D=v.sign,P=v.symbol,k=v.zero,R=v.width,B=v.comma,M=v.precision,G=v.trim,F=v.type;F==="n"?(B=!0,F="g"):$T[F]||(M===void 0&&(M=12),G=!0,F="g"),(k||C==="0"&&T==="=")&&(k=!0,C="0",T="=");var U=P==="$"?r:P==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",L=P==="$"?n:/[%p]/.test(F)?u:"",V=$T[F],j=/[defgprs%]/.test(F);M=M===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function Y(H){var q=U,le=L,ue,re,J;if(F==="c")le=V(H)+le,H="";else{H=+H;var ae=H<0||1/H<0;if(H=isNaN(H)?h:V(Math.abs(H),M),G&&(H=Wee(H)),ae&&+H==0&&D!=="+"&&(ae=!1),q=(ae?D==="("?D:g:D==="-"||D==="("?"":D)+q,le=(F==="s"?YT[8+FI/3]:"")+le+(ae&&D==="("?")":""),j){for(ue=-1,re=H.length;++ue<re;)if(J=H.charCodeAt(ue),48>J||J>57){le=(J===46?l+H.slice(ue+1):H.slice(ue))+le,H=H.slice(0,ue);break}}}B&&!k&&(H=t(H,1/0));var pe=q.length+H.length+le.length,xe=pe<R?new Array(R-pe+1).join(C):"";switch(B&&k&&(H=t(xe+H,xe.length?R-le.length:1/0),xe=""),T){case"<":H=q+H+le+xe;break;case"=":H=q+xe+H+le;break;case"^":H=xe.slice(0,pe=xe.length>>1)+q+H+le+xe.slice(pe);break;default:H=xe+q+H+le;break}return i(H)}return Y.toString=function(){return v+""},Y}function y(v,C){var T=p((v=Sf(v),v.type="f",v)),D=Math.max(-8,Math.min(8,Math.floor(dd(C)/3)))*3,P=Math.pow(10,-D),k=YT[8+D/3];return function(R){return T(P*R)+k}}return{format:p,formatPrefix:y}}var $g,sN,UI;Qee({thousands:",",grouping:[3],currency:["$",""]});function Qee(e){return $g=Zee(e),sN=$g.format,UI=$g.formatPrefix,$g}function Jee(e){return Math.max(0,-dd(Math.abs(e)))}function ete(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(dd(t)/3)))*3-dd(Math.abs(e)))}function tte(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,dd(t)-dd(e))+1}function jI(e,t,r,n){var l=o2(e,t,r),i;switch(n=Sf(n??",f"),n.type){case"s":{var u=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=ete(l,u))&&(n.precision=i),UI(n,u)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=tte(l,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Jee(l))&&(n.precision=i-(n.type==="%")*2);break}}return sN(n)}function jo(e){var t=e.domain;return e.ticks=function(r){var n=t();return l2(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var l=t();return jI(l[0],l[l.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),l=0,i=n.length-1,u=n[l],g=n[i],h,p,y=10;for(g<u&&(p=u,u=g,g=p,p=l,l=i,i=p);y-- >0;){if(p=i2(u,g,r),p===h)return n[l]=u,n[i]=g,t(n);if(p>0)u=Math.floor(u/p)*p,g=Math.ceil(g/p)*p;else if(p<0)u=Math.ceil(u*p)/p,g=Math.floor(g*p)/p;else break;h=p}return e},e}function zI(){var e=aN();return e.copy=function(){return Wf(e,zI())},Vs.apply(e,arguments),jo(e)}function VI(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,hp),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return VI(e).unknown(t)},e=arguments.length?Array.from(e,hp):[0,1],jo(r)}function HI(e,t){e=e.slice();var r=0,n=e.length-1,l=e[r],i=e[n],u;return i<l&&(u=r,r=n,n=u,u=l,l=i,i=u),e[r]=t.floor(l),e[n]=t.ceil(i),e}function XT(e){return Math.log(e)}function WT(e){return Math.exp(e)}function rte(e){return-Math.log(-e)}function ate(e){return-Math.exp(-e)}function nte(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ste(e){return e===10?nte:e===Math.E?Math.exp:t=>Math.pow(e,t)}function lte(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function KT(e){return(t,r)=>-e(-t,r)}function lN(e){const t=e(XT,WT),r=t.domain;let n=10,l,i;function u(){return l=lte(n),i=ste(n),r()[0]<0?(l=KT(l),i=KT(i),e(rte,ate)):e(XT,WT),t}return t.base=function(g){return arguments.length?(n=+g,u()):n},t.domain=function(g){return arguments.length?(r(g),u()):r()},t.ticks=g=>{const h=r();let p=h[0],y=h[h.length-1];const v=y<p;v&&([p,y]=[y,p]);let C=l(p),T=l(y),D,P;const k=g==null?10:+g;let R=[];if(!(n%1)&&T-C<k){if(C=Math.floor(C),T=Math.ceil(T),p>0){for(;C<=T;++C)for(D=1;D<n;++D)if(P=C<0?D/i(-C):D*i(C),!(P<p)){if(P>y)break;R.push(P)}}else for(;C<=T;++C)for(D=n-1;D>=1;--D)if(P=C>0?D/i(-C):D*i(C),!(P<p)){if(P>y)break;R.push(P)}R.length*2<k&&(R=l2(p,y,k))}else R=l2(C,T,Math.min(T-C,k)).map(i);return v?R.reverse():R},t.tickFormat=(g,h)=>{if(g==null&&(g=10),h==null&&(h=n===10?"s":","),typeof h!="function"&&(!(n%1)&&(h=Sf(h)).precision==null&&(h.trim=!0),h=sN(h)),g===1/0)return h;const p=Math.max(1,n*g/t.ticks().length);return y=>{let v=y/i(Math.round(l(y)));return v*n<n-.5&&(v*=n),v<=p?h(y):""}},t.nice=()=>r(HI(r(),{floor:g=>i(Math.floor(l(g))),ceil:g=>i(Math.ceil(l(g)))})),t}function $I(){const e=lN(xy()).domain([1,10]);return e.copy=()=>Wf(e,$I()).base(e.base()),Vs.apply(e,arguments),e}function ZT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function QT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function iN(e){var t=1,r=e(ZT(t),QT(t));return r.constant=function(n){return arguments.length?e(ZT(t=+n),QT(t)):t},jo(r)}function qI(){var e=iN(xy());return e.copy=function(){return Wf(e,qI()).constant(e.constant())},Vs.apply(e,arguments)}function JT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ite(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ote(e){return e<0?-e*e:e*e}function oN(e){var t=e(Nn,Nn),r=1;function n(){return r===1?e(Nn,Nn):r===.5?e(ite,ote):e(JT(r),JT(1/r))}return t.exponent=function(l){return arguments.length?(r=+l,n()):r},jo(t)}function cN(){var e=oN(xy());return e.copy=function(){return Wf(e,cN()).exponent(e.exponent())},Vs.apply(e,arguments),e}function cte(){return cN.apply(null,arguments).exponent(.5)}function e8(e){return Math.sign(e)*e*e}function ute(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function GI(){var e=aN(),t=[0,1],r=!1,n;function l(i){var u=ute(e(i));return isNaN(u)?n:r?Math.round(u):u}return l.invert=function(i){return e.invert(e8(i))},l.domain=function(i){return arguments.length?(e.domain(i),l):e.domain()},l.range=function(i){return arguments.length?(e.range((t=Array.from(i,hp)).map(e8)),l):t.slice()},l.rangeRound=function(i){return l.range(i).round(!0)},l.round=function(i){return arguments.length?(r=!!i,l):r},l.clamp=function(i){return arguments.length?(e.clamp(i),l):e.clamp()},l.unknown=function(i){return arguments.length?(n=i,l):n},l.copy=function(){return GI(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Vs.apply(l,arguments),jo(l)}function YI(){var e=[],t=[],r=[],n;function l(){var u=0,g=Math.max(1,t.length);for(r=new Array(g-1);++u<g;)r[u-1]=gee(e,u/g);return i}function i(u){return u==null||isNaN(u=+u)?n:t[Yf(r,u)]}return i.invertExtent=function(u){var g=t.indexOf(u);return g<0?[NaN,NaN]:[g>0?r[g-1]:e[0],g<r.length?r[g]:e[e.length-1]]},i.domain=function(u){if(!arguments.length)return e.slice();e=[];for(let g of u)g!=null&&!isNaN(g=+g)&&e.push(g);return e.sort(_o),l()},i.range=function(u){return arguments.length?(t=Array.from(u),l()):t.slice()},i.unknown=function(u){return arguments.length?(n=u,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return YI().domain(e).range(t).unknown(n)},Vs.apply(i,arguments)}function XI(){var e=0,t=1,r=1,n=[.5],l=[0,1],i;function u(h){return h!=null&&h<=h?l[Yf(n,h,0,r)]:i}function g(){var h=-1;for(n=new Array(r);++h<r;)n[h]=((h+1)*t-(h-r)*e)/(r+1);return u}return u.domain=function(h){return arguments.length?([e,t]=h,e=+e,t=+t,g()):[e,t]},u.range=function(h){return arguments.length?(r=(l=Array.from(h)).length-1,g()):l.slice()},u.invertExtent=function(h){var p=l.indexOf(h);return p<0?[NaN,NaN]:p<1?[e,n[0]]:p>=r?[n[r-1],t]:[n[p-1],n[p]]},u.unknown=function(h){return arguments.length&&(i=h),u},u.thresholds=function(){return n.slice()},u.copy=function(){return XI().domain([e,t]).range(l).unknown(i)},Vs.apply(jo(u),arguments)}function WI(){var e=[.5],t=[0,1],r,n=1;function l(i){return i!=null&&i<=i?t[Yf(e,i,0,n)]:r}return l.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),l):e.slice()},l.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),l):t.slice()},l.invertExtent=function(i){var u=t.indexOf(i);return[e[u-1],e[u]]},l.unknown=function(i){return arguments.length?(r=i,l):r},l.copy=function(){return WI().domain(e).range(t).unknown(r)},Vs.apply(l,arguments)}const hv=new Date,pv=new Date;function Va(e,t,r,n){function l(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return l.floor=i=>(e(i=new Date(+i)),i),l.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),l.round=i=>{const u=l(i),g=l.ceil(i);return i-u<g-i?u:g},l.offset=(i,u)=>(t(i=new Date(+i),u==null?1:Math.floor(u)),i),l.range=(i,u,g)=>{const h=[];if(i=l.ceil(i),g=g==null?1:Math.floor(g),!(i<u)||!(g>0))return h;let p;do h.push(p=new Date(+i)),t(i,g),e(i);while(p<i&&i<u);return h},l.filter=i=>Va(u=>{if(u>=u)for(;e(u),!i(u);)u.setTime(u-1)},(u,g)=>{if(u>=u)if(g<0)for(;++g<=0;)for(;t(u,-1),!i(u););else for(;--g>=0;)for(;t(u,1),!i(u););}),r&&(l.count=(i,u)=>(hv.setTime(+i),pv.setTime(+u),e(hv),e(pv),Math.floor(r(hv,pv))),l.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?l.filter(n?u=>n(u)%i===0:u=>l.count(0,u)%i===0):l)),l}const yp=Va(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);yp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Va(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):yp);yp.range;const gi=1e3,Is=gi*60,hi=Is*60,Oi=hi*24,uN=Oi*7,t8=Oi*30,yv=Oi*365,Oc=Va(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*gi)},(e,t)=>(t-e)/gi,e=>e.getUTCSeconds());Oc.range;const dN=Va(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gi)},(e,t)=>{e.setTime(+e+t*Is)},(e,t)=>(t-e)/Is,e=>e.getMinutes());dN.range;const mN=Va(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Is)},(e,t)=>(t-e)/Is,e=>e.getUTCMinutes());mN.range;const fN=Va(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gi-e.getMinutes()*Is)},(e,t)=>{e.setTime(+e+t*hi)},(e,t)=>(t-e)/hi,e=>e.getHours());fN.range;const gN=Va(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*hi)},(e,t)=>(t-e)/hi,e=>e.getUTCHours());gN.range;const Kf=Va(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Is)/Oi,e=>e.getDate()-1);Kf.range;const by=Va(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Oi,e=>e.getUTCDate()-1);by.range;const KI=Va(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Oi,e=>Math.floor(e/Oi));KI.range;function Hc(e){return Va(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Is)/uN)}const vy=Hc(0),xp=Hc(1),dte=Hc(2),mte=Hc(3),md=Hc(4),fte=Hc(5),gte=Hc(6);vy.range;xp.range;dte.range;mte.range;md.range;fte.range;gte.range;function $c(e){return Va(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/uN)}const Ey=$c(0),bp=$c(1),hte=$c(2),pte=$c(3),fd=$c(4),yte=$c(5),xte=$c(6);Ey.range;bp.range;hte.range;pte.range;fd.range;yte.range;xte.range;const hN=Va(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());hN.range;const pN=Va(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());pN.range;const Di=Va(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Di.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Va(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Di.range;const _i=Va(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());_i.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Va(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});_i.range;function ZI(e,t,r,n,l,i){const u=[[Oc,1,gi],[Oc,5,5*gi],[Oc,15,15*gi],[Oc,30,30*gi],[i,1,Is],[i,5,5*Is],[i,15,15*Is],[i,30,30*Is],[l,1,hi],[l,3,3*hi],[l,6,6*hi],[l,12,12*hi],[n,1,Oi],[n,2,2*Oi],[r,1,uN],[t,1,t8],[t,3,3*t8],[e,1,yv]];function g(p,y,v){const C=y<p;C&&([p,y]=[y,p]);const T=v&&typeof v.range=="function"?v:h(p,y,v),D=T?T.range(p,+y+1):[];return C?D.reverse():D}function h(p,y,v){const C=Math.abs(y-p)/v,T=Zw(([,,k])=>k).right(u,C);if(T===u.length)return e.every(o2(p/yv,y/yv,v));if(T===0)return yp.every(Math.max(o2(p,y,v),1));const[D,P]=u[C/u[T-1][2]<u[T][2]/C?T-1:T];return D.every(P)}return[g,h]}const[bte,vte]=ZI(_i,pN,Ey,KI,gN,mN),[Ete,wte]=ZI(Di,hN,vy,Kf,fN,dN);function xv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function bv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Im(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Nte(e){var t=e.dateTime,r=e.date,n=e.time,l=e.periods,i=e.days,u=e.shortDays,g=e.months,h=e.shortMonths,p=Mm(l),y=Rm(l),v=Mm(i),C=Rm(i),T=Mm(u),D=Rm(u),P=Mm(g),k=Rm(g),R=Mm(h),B=Rm(h),M={a:ae,A:pe,b:xe,B:ee,c:null,d:i8,e:i8,f:Gte,g:rre,G:nre,H:Hte,I:$te,j:qte,L:QI,m:Yte,M:Xte,p:K,q:te,Q:u8,s:d8,S:Wte,u:Kte,U:Zte,V:Qte,w:Jte,W:ere,x:null,X:null,y:tre,Y:are,Z:sre,"%":c8},G={a:ge,A:oe,b:Ne,B:ie,c:null,d:o8,e:o8,f:cre,g:bre,G:Ere,H:lre,I:ire,j:ore,L:eM,m:ure,M:dre,p:me,q:$e,Q:u8,s:d8,S:mre,u:fre,U:gre,V:hre,w:pre,W:yre,x:null,X:null,y:xre,Y:vre,Z:wre,"%":c8},F={a:Y,A:H,b:q,B:le,c:ue,d:s8,e:s8,f:Ute,g:n8,G:a8,H:l8,I:l8,j:Rte,L:Fte,m:Mte,M:Lte,p:j,q:Ite,Q:zte,s:Vte,S:Bte,u:Ote,U:Dte,V:_te,w:Tte,W:kte,x:re,X:J,y:n8,Y:a8,Z:Pte,"%":jte};M.x=U(r,M),M.X=U(n,M),M.c=U(t,M),G.x=U(r,G),G.X=U(n,G),G.c=U(t,G);function U(ve,We){return function(nt){var Be=[],Ee=-1,je=0,ce=ve.length,qe,Se,rt;for(nt instanceof Date||(nt=new Date(+nt));++Ee<ce;)ve.charCodeAt(Ee)===37&&(Be.push(ve.slice(je,Ee)),(Se=r8[qe=ve.charAt(++Ee)])!=null?qe=ve.charAt(++Ee):Se=qe==="e"?" ":"0",(rt=We[qe])&&(qe=rt(nt,Se)),Be.push(qe),je=Ee+1);return Be.push(ve.slice(je,Ee)),Be.join("")}}function L(ve,We){return function(nt){var Be=Im(1900,void 0,1),Ee=V(Be,ve,nt+="",0),je,ce;if(Ee!=nt.length)return null;if("Q"in Be)return new Date(Be.Q);if("s"in Be)return new Date(Be.s*1e3+("L"in Be?Be.L:0));if(We&&!("Z"in Be)&&(Be.Z=0),"p"in Be&&(Be.H=Be.H%12+Be.p*12),Be.m===void 0&&(Be.m="q"in Be?Be.q:0),"V"in Be){if(Be.V<1||Be.V>53)return null;"w"in Be||(Be.w=1),"Z"in Be?(je=bv(Im(Be.y,0,1)),ce=je.getUTCDay(),je=ce>4||ce===0?bp.ceil(je):bp(je),je=by.offset(je,(Be.V-1)*7),Be.y=je.getUTCFullYear(),Be.m=je.getUTCMonth(),Be.d=je.getUTCDate()+(Be.w+6)%7):(je=xv(Im(Be.y,0,1)),ce=je.getDay(),je=ce>4||ce===0?xp.ceil(je):xp(je),je=Kf.offset(je,(Be.V-1)*7),Be.y=je.getFullYear(),Be.m=je.getMonth(),Be.d=je.getDate()+(Be.w+6)%7)}else("W"in Be||"U"in Be)&&("w"in Be||(Be.w="u"in Be?Be.u%7:"W"in Be?1:0),ce="Z"in Be?bv(Im(Be.y,0,1)).getUTCDay():xv(Im(Be.y,0,1)).getDay(),Be.m=0,Be.d="W"in Be?(Be.w+6)%7+Be.W*7-(ce+5)%7:Be.w+Be.U*7-(ce+6)%7);return"Z"in Be?(Be.H+=Be.Z/100|0,Be.M+=Be.Z%100,bv(Be)):xv(Be)}}function V(ve,We,nt,Be){for(var Ee=0,je=We.length,ce=nt.length,qe,Se;Ee<je;){if(Be>=ce)return-1;if(qe=We.charCodeAt(Ee++),qe===37){if(qe=We.charAt(Ee++),Se=F[qe in r8?We.charAt(Ee++):qe],!Se||(Be=Se(ve,nt,Be))<0)return-1}else if(qe!=nt.charCodeAt(Be++))return-1}return Be}function j(ve,We,nt){var Be=p.exec(We.slice(nt));return Be?(ve.p=y.get(Be[0].toLowerCase()),nt+Be[0].length):-1}function Y(ve,We,nt){var Be=T.exec(We.slice(nt));return Be?(ve.w=D.get(Be[0].toLowerCase()),nt+Be[0].length):-1}function H(ve,We,nt){var Be=v.exec(We.slice(nt));return Be?(ve.w=C.get(Be[0].toLowerCase()),nt+Be[0].length):-1}function q(ve,We,nt){var Be=R.exec(We.slice(nt));return Be?(ve.m=B.get(Be[0].toLowerCase()),nt+Be[0].length):-1}function le(ve,We,nt){var Be=P.exec(We.slice(nt));return Be?(ve.m=k.get(Be[0].toLowerCase()),nt+Be[0].length):-1}function ue(ve,We,nt){return V(ve,t,We,nt)}function re(ve,We,nt){return V(ve,r,We,nt)}function J(ve,We,nt){return V(ve,n,We,nt)}function ae(ve){return u[ve.getDay()]}function pe(ve){return i[ve.getDay()]}function xe(ve){return h[ve.getMonth()]}function ee(ve){return g[ve.getMonth()]}function K(ve){return l[+(ve.getHours()>=12)]}function te(ve){return 1+~~(ve.getMonth()/3)}function ge(ve){return u[ve.getUTCDay()]}function oe(ve){return i[ve.getUTCDay()]}function Ne(ve){return h[ve.getUTCMonth()]}function ie(ve){return g[ve.getUTCMonth()]}function me(ve){return l[+(ve.getUTCHours()>=12)]}function $e(ve){return 1+~~(ve.getUTCMonth()/3)}return{format:function(ve){var We=U(ve+="",M);return We.toString=function(){return ve},We},parse:function(ve){var We=L(ve+="",!1);return We.toString=function(){return ve},We},utcFormat:function(ve){var We=U(ve+="",G);return We.toString=function(){return ve},We},utcParse:function(ve){var We=L(ve+="",!0);return We.toString=function(){return ve},We}}}var r8={"-":"",_:" ",0:"0"},Qa=/^\s*\d+/,Ste=/^%/,Cte=/[\\^$*+?|[\]().{}]/g;function lr(e,t,r){var n=e<0?"-":"",l=(n?-e:e)+"",i=l.length;return n+(i<r?new Array(r-i+1).join(t)+l:l)}function Ate(e){return e.replace(Cte,"\\$&")}function Mm(e){return new RegExp("^(?:"+e.map(Ate).join("|")+")","i")}function Rm(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Tte(e,t,r){var n=Qa.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Ote(e,t,r){var n=Qa.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Dte(e,t,r){var n=Qa.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function _te(e,t,r){var n=Qa.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function kte(e,t,r){var n=Qa.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function a8(e,t,r){var n=Qa.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function n8(e,t,r){var n=Qa.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Pte(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Ite(e,t,r){var n=Qa.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Mte(e,t,r){var n=Qa.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function s8(e,t,r){var n=Qa.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Rte(e,t,r){var n=Qa.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function l8(e,t,r){var n=Qa.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Lte(e,t,r){var n=Qa.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Bte(e,t,r){var n=Qa.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Fte(e,t,r){var n=Qa.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Ute(e,t,r){var n=Qa.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function jte(e,t,r){var n=Ste.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function zte(e,t,r){var n=Qa.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Vte(e,t,r){var n=Qa.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function i8(e,t){return lr(e.getDate(),t,2)}function Hte(e,t){return lr(e.getHours(),t,2)}function $te(e,t){return lr(e.getHours()%12||12,t,2)}function qte(e,t){return lr(1+Kf.count(Di(e),e),t,3)}function QI(e,t){return lr(e.getMilliseconds(),t,3)}function Gte(e,t){return QI(e,t)+"000"}function Yte(e,t){return lr(e.getMonth()+1,t,2)}function Xte(e,t){return lr(e.getMinutes(),t,2)}function Wte(e,t){return lr(e.getSeconds(),t,2)}function Kte(e){var t=e.getDay();return t===0?7:t}function Zte(e,t){return lr(vy.count(Di(e)-1,e),t,2)}function JI(e){var t=e.getDay();return t>=4||t===0?md(e):md.ceil(e)}function Qte(e,t){return e=JI(e),lr(md.count(Di(e),e)+(Di(e).getDay()===4),t,2)}function Jte(e){return e.getDay()}function ere(e,t){return lr(xp.count(Di(e)-1,e),t,2)}function tre(e,t){return lr(e.getFullYear()%100,t,2)}function rre(e,t){return e=JI(e),lr(e.getFullYear()%100,t,2)}function are(e,t){return lr(e.getFullYear()%1e4,t,4)}function nre(e,t){var r=e.getDay();return e=r>=4||r===0?md(e):md.ceil(e),lr(e.getFullYear()%1e4,t,4)}function sre(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+lr(t/60|0,"0",2)+lr(t%60,"0",2)}function o8(e,t){return lr(e.getUTCDate(),t,2)}function lre(e,t){return lr(e.getUTCHours(),t,2)}function ire(e,t){return lr(e.getUTCHours()%12||12,t,2)}function ore(e,t){return lr(1+by.count(_i(e),e),t,3)}function eM(e,t){return lr(e.getUTCMilliseconds(),t,3)}function cre(e,t){return eM(e,t)+"000"}function ure(e,t){return lr(e.getUTCMonth()+1,t,2)}function dre(e,t){return lr(e.getUTCMinutes(),t,2)}function mre(e,t){return lr(e.getUTCSeconds(),t,2)}function fre(e){var t=e.getUTCDay();return t===0?7:t}function gre(e,t){return lr(Ey.count(_i(e)-1,e),t,2)}function tM(e){var t=e.getUTCDay();return t>=4||t===0?fd(e):fd.ceil(e)}function hre(e,t){return e=tM(e),lr(fd.count(_i(e),e)+(_i(e).getUTCDay()===4),t,2)}function pre(e){return e.getUTCDay()}function yre(e,t){return lr(bp.count(_i(e)-1,e),t,2)}function xre(e,t){return lr(e.getUTCFullYear()%100,t,2)}function bre(e,t){return e=tM(e),lr(e.getUTCFullYear()%100,t,2)}function vre(e,t){return lr(e.getUTCFullYear()%1e4,t,4)}function Ere(e,t){var r=e.getUTCDay();return e=r>=4||r===0?fd(e):fd.ceil(e),lr(e.getUTCFullYear()%1e4,t,4)}function wre(){return"+0000"}function c8(){return"%"}function u8(e){return+e}function d8(e){return Math.floor(+e/1e3)}var Ou,rM,aM;Nre({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Nre(e){return Ou=Nte(e),rM=Ou.format,Ou.parse,aM=Ou.utcFormat,Ou.utcParse,Ou}function Sre(e){return new Date(e)}function Cre(e){return e instanceof Date?+e:+new Date(+e)}function yN(e,t,r,n,l,i,u,g,h,p){var y=aN(),v=y.invert,C=y.domain,T=p(".%L"),D=p(":%S"),P=p("%I:%M"),k=p("%I %p"),R=p("%a %d"),B=p("%b %d"),M=p("%B"),G=p("%Y");function F(U){return(h(U)<U?T:g(U)<U?D:u(U)<U?P:i(U)<U?k:n(U)<U?l(U)<U?R:B:r(U)<U?M:G)(U)}return y.invert=function(U){return new Date(v(U))},y.domain=function(U){return arguments.length?C(Array.from(U,Cre)):C().map(Sre)},y.ticks=function(U){var L=C();return e(L[0],L[L.length-1],U??10)},y.tickFormat=function(U,L){return L==null?F:p(L)},y.nice=function(U){var L=C();return(!U||typeof U.range!="function")&&(U=t(L[0],L[L.length-1],U??10)),U?C(HI(L,U)):y},y.copy=function(){return Wf(y,yN(e,t,r,n,l,i,u,g,h,p))},y}function Are(){return Vs.apply(yN(Ete,wte,Di,hN,vy,Kf,fN,dN,Oc,rM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Tre(){return Vs.apply(yN(bte,vte,_i,pN,Ey,by,gN,mN,Oc,aM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function wy(){var e=0,t=1,r,n,l,i,u=Nn,g=!1,h;function p(v){return v==null||isNaN(v=+v)?h:u(l===0?.5:(v=(i(v)-r)*l,g?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t]=v,r=i(e=+e),n=i(t=+t),l=r===n?0:1/(n-r),p):[e,t]},p.clamp=function(v){return arguments.length?(g=!!v,p):g},p.interpolator=function(v){return arguments.length?(u=v,p):u};function y(v){return function(C){var T,D;return arguments.length?([T,D]=C,u=v(T,D),p):[u(0),u(1)]}}return p.range=y(Td),p.rangeRound=y(rN),p.unknown=function(v){return arguments.length?(h=v,p):h},function(v){return i=v,r=v(e),n=v(t),l=r===n?0:1/(n-r),p}}function zo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function nM(){var e=jo(wy()(Nn));return e.copy=function(){return zo(e,nM())},Mi.apply(e,arguments)}function sM(){var e=lN(wy()).domain([1,10]);return e.copy=function(){return zo(e,sM()).base(e.base())},Mi.apply(e,arguments)}function lM(){var e=iN(wy());return e.copy=function(){return zo(e,lM()).constant(e.constant())},Mi.apply(e,arguments)}function xN(){var e=oN(wy());return e.copy=function(){return zo(e,xN()).exponent(e.exponent())},Mi.apply(e,arguments)}function Ore(){return xN.apply(null,arguments).exponent(.5)}function iM(){var e=[],t=Nn;function r(n){if(n!=null&&!isNaN(n=+n))return t((Yf(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let l of n)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(_o),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,l)=>t(l/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(l,i)=>fee(e,i/n))},r.copy=function(){return iM(t).domain(e)},Mi.apply(r,arguments)}function Ny(){var e=0,t=.5,r=1,n=1,l,i,u,g,h,p=Nn,y,v=!1,C;function T(P){return isNaN(P=+P)?C:(P=.5+((P=+y(P))-i)*(n*P<n*i?g:h),p(v?Math.max(0,Math.min(1,P)):P))}T.domain=function(P){return arguments.length?([e,t,r]=P,l=y(e=+e),i=y(t=+t),u=y(r=+r),g=l===i?0:.5/(i-l),h=i===u?0:.5/(u-i),n=i<l?-1:1,T):[e,t,r]},T.clamp=function(P){return arguments.length?(v=!!P,T):v},T.interpolator=function(P){return arguments.length?(p=P,T):p};function D(P){return function(k){var R,B,M;return arguments.length?([R,B,M]=k,p=jee(P,[R,B,M]),T):[p(0),p(.5),p(1)]}}return T.range=D(Td),T.rangeRound=D(rN),T.unknown=function(P){return arguments.length?(C=P,T):C},function(P){return y=P,l=P(e),i=P(t),u=P(r),g=l===i?0:.5/(i-l),h=i===u?0:.5/(u-i),n=i<l?-1:1,T}}function oM(){var e=jo(Ny()(Nn));return e.copy=function(){return zo(e,oM())},Mi.apply(e,arguments)}function cM(){var e=lN(Ny()).domain([.1,1,10]);return e.copy=function(){return zo(e,cM()).base(e.base())},Mi.apply(e,arguments)}function uM(){var e=iN(Ny());return e.copy=function(){return zo(e,uM()).constant(e.constant())},Mi.apply(e,arguments)}function bN(){var e=oN(Ny());return e.copy=function(){return zo(e,bN()).exponent(e.exponent())},Mi.apply(e,arguments)}function Dre(){return bN.apply(null,arguments).exponent(.5)}const Ym=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Jw,scaleDiverging:oM,scaleDivergingLog:cM,scaleDivergingPow:bN,scaleDivergingSqrt:Dre,scaleDivergingSymlog:uM,scaleIdentity:VI,scaleImplicit:c2,scaleLinear:zI,scaleLog:$I,scaleOrdinal:Qw,scalePoint:pee,scalePow:cN,scaleQuantile:YI,scaleQuantize:XI,scaleRadial:GI,scaleSequential:nM,scaleSequentialLog:sM,scaleSequentialPow:xN,scaleSequentialQuantile:iM,scaleSequentialSqrt:Ore,scaleSequentialSymlog:lM,scaleSqrt:cte,scaleSymlog:qI,scaleThreshold:WI,scaleTime:Are,scaleUtc:Tre,tickFormat:jI},Symbol.toStringTag,{value:"Module"}));var Vo=e=>e.chartData,vN=Me([Vo],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),dM=(e,t,r,n)=>n?vN(e):Vo(e);function Lo(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Ka(t)&&Ka(r))return!0}return!1}function m8(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function mM(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,l,i;if(Ka(r))l=r;else if(typeof r=="function")return;if(Ka(n))i=n;else if(typeof n=="function")return;var u=[l,i];if(Lo(u))return u}}function _re(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Lo(n))return m8(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[l,i]=e,u,g;if(l==="auto")t!=null&&(u=Math.min(...t));else if(It(l))u=l;else if(typeof l=="function")try{t!=null&&(u=l(t?.[0]))}catch{}else if(typeof l=="string"&&F6.test(l)){var h=F6.exec(l);if(h==null||t==null)u=void 0;else{var p=+h[1];u=t[0]-p}}else u=t?.[0];if(i==="auto")t!=null&&(g=Math.max(...t));else if(It(i))g=i;else if(typeof i=="function")try{t!=null&&(g=i(t?.[1]))}catch{}else if(typeof i=="string"&&U6.test(i)){var y=U6.exec(i);if(y==null||t==null)g=void 0;else{var v=+y[1];g=t[1]+v}}else g=t?.[1];var C=[u,g];if(Lo(C))return t==null?C:m8(C,t,r)}}}var Od=1e9,kre={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},wN,Qr=!0,Fs="[DecimalError] ",Rc=Fs+"Invalid argument: ",EN=Fs+"Exponent out of range: ",Dd=Math.floor,Ec=Math.pow,Pre=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,is,Wa=1e7,$r=7,fM=9007199254740991,vp=Dd(fM/$r),ft={};ft.absoluteValue=ft.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ft.comparedTo=ft.cmp=function(e){var t,r,n,l,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,l=e.d.length,t=0,r=n<l?n:l;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===l?0:n>l^i.s<0?1:-1};ft.decimalPlaces=ft.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*$r;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ft.dividedBy=ft.div=function(e){return xi(this,new this.constructor(e))};ft.dividedToIntegerBy=ft.idiv=function(e){var t=this,r=t.constructor;return _r(xi(t,new r(e),0,1),r.precision)};ft.equals=ft.eq=function(e){return!this.cmp(e)};ft.exponent=function(){return Ma(this)};ft.greaterThan=ft.gt=function(e){return this.cmp(e)>0};ft.greaterThanOrEqualTo=ft.gte=function(e){return this.cmp(e)>=0};ft.isInteger=ft.isint=function(){return this.e>this.d.length-2};ft.isNegative=ft.isneg=function(){return this.s<0};ft.isPositive=ft.ispos=function(){return this.s>0};ft.isZero=function(){return this.s===0};ft.lessThan=ft.lt=function(e){return this.cmp(e)<0};ft.lessThanOrEqualTo=ft.lte=function(e){return this.cmp(e)<1};ft.logarithm=ft.log=function(e){var t,r=this,n=r.constructor,l=n.precision,i=l+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(is))throw Error(Fs+"NaN");if(r.s<1)throw Error(Fs+(r.s?"NaN":"-Infinity"));return r.eq(is)?new n(0):(Qr=!1,t=xi(Cf(r,i),Cf(e,i),i),Qr=!0,_r(t,l))};ft.minus=ft.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?pM(t,e):gM(t,(e.s=-e.s,e))};ft.modulo=ft.mod=function(e){var t,r=this,n=r.constructor,l=n.precision;if(e=new n(e),!e.s)throw Error(Fs+"NaN");return r.s?(Qr=!1,t=xi(r,e,0,1).times(e),Qr=!0,r.minus(t)):_r(new n(r),l)};ft.naturalExponential=ft.exp=function(){return hM(this)};ft.naturalLogarithm=ft.ln=function(){return Cf(this)};ft.negated=ft.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ft.plus=ft.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?gM(t,e):pM(t,(e.s=-e.s,e))};ft.precision=ft.sd=function(e){var t,r,n,l=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Rc+e);if(t=Ma(l)+1,n=l.d.length-1,r=n*$r+1,n=l.d[n],n){for(;n%10==0;n/=10)r--;for(n=l.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};ft.squareRoot=ft.sqrt=function(){var e,t,r,n,l,i,u,g=this,h=g.constructor;if(g.s<1){if(!g.s)return new h(0);throw Error(Fs+"NaN")}for(e=Ma(g),Qr=!1,l=Math.sqrt(+g),l==0||l==1/0?(t=_l(g.d),(t.length+e)%2==0&&(t+="0"),l=Math.sqrt(t),e=Dd((e+1)/2)-(e<0||e%2),l==1/0?t="5e"+e:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new h(t)):n=new h(l.toString()),r=h.precision,l=u=r+3;;)if(i=n,n=i.plus(xi(g,i,u+2)).times(.5),_l(i.d).slice(0,u)===(t=_l(n.d)).slice(0,u)){if(t=t.slice(u-3,u+1),l==u&&t=="4999"){if(_r(i,r+1,0),i.times(i).eq(g)){n=i;break}}else if(t!="9999")break;u+=4}return Qr=!0,_r(n,r)};ft.times=ft.mul=function(e){var t,r,n,l,i,u,g,h,p,y=this,v=y.constructor,C=y.d,T=(e=new v(e)).d;if(!y.s||!e.s)return new v(0);for(e.s*=y.s,r=y.e+e.e,h=C.length,p=T.length,h<p&&(i=C,C=T,T=i,u=h,h=p,p=u),i=[],u=h+p,n=u;n--;)i.push(0);for(n=p;--n>=0;){for(t=0,l=h+n;l>n;)g=i[l]+T[n]*C[l-n-1]+t,i[l--]=g%Wa|0,t=g/Wa|0;i[l]=(i[l]+t)%Wa|0}for(;!i[--u];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Qr?_r(e,v.precision):e};ft.toDecimalPlaces=ft.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ul(e,0,Od),t===void 0?t=n.rounding:Ul(t,0,8),_r(r,e+Ma(r)+1,t))};ft.toExponential=function(e,t){var r,n=this,l=n.constructor;return e===void 0?r=jc(n,!0):(Ul(e,0,Od),t===void 0?t=l.rounding:Ul(t,0,8),n=_r(new l(n),e+1,t),r=jc(n,!0,e+1)),r};ft.toFixed=function(e,t){var r,n,l=this,i=l.constructor;return e===void 0?jc(l):(Ul(e,0,Od),t===void 0?t=i.rounding:Ul(t,0,8),n=_r(new i(l),e+Ma(l)+1,t),r=jc(n.abs(),!1,e+Ma(n)+1),l.isneg()&&!l.isZero()?"-"+r:r)};ft.toInteger=ft.toint=function(){var e=this,t=e.constructor;return _r(new t(e),Ma(e)+1,t.rounding)};ft.toNumber=function(){return+this};ft.toPower=ft.pow=function(e){var t,r,n,l,i,u,g=this,h=g.constructor,p=12,y=+(e=new h(e));if(!e.s)return new h(is);if(g=new h(g),!g.s){if(e.s<1)throw Error(Fs+"Infinity");return g}if(g.eq(is))return g;if(n=h.precision,e.eq(is))return _r(g,n);if(t=e.e,r=e.d.length-1,u=t>=r,i=g.s,u){if((r=y<0?-y:y)<=fM){for(l=new h(is),t=Math.ceil(n/$r+4),Qr=!1;r%2&&(l=l.times(g),g8(l.d,t)),r=Dd(r/2),r!==0;)g=g.times(g),g8(g.d,t);return Qr=!0,e.s<0?new h(is).div(l):_r(l,n)}}else if(i<0)throw Error(Fs+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,g.s=1,Qr=!1,l=e.times(Cf(g,n+p)),Qr=!0,l=hM(l),l.s=i,l};ft.toPrecision=function(e,t){var r,n,l=this,i=l.constructor;return e===void 0?(r=Ma(l),n=jc(l,r<=i.toExpNeg||r>=i.toExpPos)):(Ul(e,1,Od),t===void 0?t=i.rounding:Ul(t,0,8),l=_r(new i(l),e,t),r=Ma(l),n=jc(l,e<=r||r<=i.toExpNeg,e)),n};ft.toSignificantDigits=ft.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ul(e,1,Od),t===void 0?t=n.rounding:Ul(t,0,8)),_r(new n(r),e,t)};ft.toString=ft.valueOf=ft.val=ft.toJSON=ft[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ma(e),r=e.constructor;return jc(e,t<=r.toExpNeg||t>=r.toExpPos)};function gM(e,t){var r,n,l,i,u,g,h,p,y=e.constructor,v=y.precision;if(!e.s||!t.s)return t.s||(t=new y(e)),Qr?_r(t,v):t;if(h=e.d,p=t.d,u=e.e,l=t.e,h=h.slice(),i=u-l,i){for(i<0?(n=h,i=-i,g=p.length):(n=p,l=u,g=h.length),u=Math.ceil(v/$r),g=u>g?u+1:g+1,i>g&&(i=g,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(g=h.length,i=p.length,g-i<0&&(i=g,n=p,p=h,h=n),r=0;i;)r=(h[--i]=h[i]+p[i]+r)/Wa|0,h[i]%=Wa;for(r&&(h.unshift(r),++l),g=h.length;h[--g]==0;)h.pop();return t.d=h,t.e=l,Qr?_r(t,v):t}function Ul(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Rc+e)}function _l(e){var t,r,n,l=e.length-1,i="",u=e[0];if(l>0){for(i+=u,t=1;t<l;t++)n=e[t]+"",r=$r-n.length,r&&(i+=To(r)),i+=n;u=e[t],n=u+"",r=$r-n.length,r&&(i+=To(r))}else if(u===0)return"0";for(;u%10===0;)u/=10;return i+u}var xi=(function(){function e(n,l){var i,u=0,g=n.length;for(n=n.slice();g--;)i=n[g]*l+u,n[g]=i%Wa|0,u=i/Wa|0;return u&&n.unshift(u),n}function t(n,l,i,u){var g,h;if(i!=u)h=i>u?1:-1;else for(g=h=0;g<i;g++)if(n[g]!=l[g]){h=n[g]>l[g]?1:-1;break}return h}function r(n,l,i){for(var u=0;i--;)n[i]-=u,u=n[i]<l[i]?1:0,n[i]=u*Wa+n[i]-l[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,l,i,u){var g,h,p,y,v,C,T,D,P,k,R,B,M,G,F,U,L,V,j=n.constructor,Y=n.s==l.s?1:-1,H=n.d,q=l.d;if(!n.s)return new j(n);if(!l.s)throw Error(Fs+"Division by zero");for(h=n.e-l.e,L=q.length,F=H.length,T=new j(Y),D=T.d=[],p=0;q[p]==(H[p]||0);)++p;if(q[p]>(H[p]||0)&&--h,i==null?B=i=j.precision:u?B=i+(Ma(n)-Ma(l))+1:B=i,B<0)return new j(0);if(B=B/$r+2|0,p=0,L==1)for(y=0,q=q[0],B++;(p<F||y)&&B--;p++)M=y*Wa+(H[p]||0),D[p]=M/q|0,y=M%q|0;else{for(y=Wa/(q[0]+1)|0,y>1&&(q=e(q,y),H=e(H,y),L=q.length,F=H.length),G=L,P=H.slice(0,L),k=P.length;k<L;)P[k++]=0;V=q.slice(),V.unshift(0),U=q[0],q[1]>=Wa/2&&++U;do y=0,g=t(q,P,L,k),g<0?(R=P[0],L!=k&&(R=R*Wa+(P[1]||0)),y=R/U|0,y>1?(y>=Wa&&(y=Wa-1),v=e(q,y),C=v.length,k=P.length,g=t(v,P,C,k),g==1&&(y--,r(v,L<C?V:q,C))):(y==0&&(g=y=1),v=q.slice()),C=v.length,C<k&&v.unshift(0),r(P,v,k),g==-1&&(k=P.length,g=t(q,P,L,k),g<1&&(y++,r(P,L<k?V:q,k))),k=P.length):g===0&&(y++,P=[0]),D[p++]=y,g&&P[0]?P[k++]=H[G]||0:(P=[H[G]],k=1);while((G++<F||P[0]!==void 0)&&B--)}return D[0]||D.shift(),T.e=h,_r(T,u?i+Ma(T)+1:i)}})();function hM(e,t){var r,n,l,i,u,g,h=0,p=0,y=e.constructor,v=y.precision;if(Ma(e)>16)throw Error(EN+Ma(e));if(!e.s)return new y(is);for(Qr=!1,g=v,u=new y(.03125);e.abs().gte(.1);)e=e.times(u),p+=5;for(n=Math.log(Ec(2,p))/Math.LN10*2+5|0,g+=n,r=l=i=new y(is),y.precision=g;;){if(l=_r(l.times(e),g),r=r.times(++h),u=i.plus(xi(l,r,g)),_l(u.d).slice(0,g)===_l(i.d).slice(0,g)){for(;p--;)i=_r(i.times(i),g);return y.precision=v,t==null?(Qr=!0,_r(i,v)):i}i=u}}function Ma(e){for(var t=e.e*$r,r=e.d[0];r>=10;r/=10)t++;return t}function vv(e,t,r){if(t>e.LN10.sd())throw Qr=!0,r&&(e.precision=r),Error(Fs+"LN10 precision limit exceeded");return _r(new e(e.LN10),t)}function To(e){for(var t="";e--;)t+="0";return t}function Cf(e,t){var r,n,l,i,u,g,h,p,y,v=1,C=10,T=e,D=T.d,P=T.constructor,k=P.precision;if(T.s<1)throw Error(Fs+(T.s?"NaN":"-Infinity"));if(T.eq(is))return new P(0);if(t==null?(Qr=!1,p=k):p=t,T.eq(10))return t==null&&(Qr=!0),vv(P,p);if(p+=C,P.precision=p,r=_l(D),n=r.charAt(0),i=Ma(T),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)T=T.times(e),r=_l(T.d),n=r.charAt(0),v++;i=Ma(T),n>1?(T=new P("0."+r),i++):T=new P(n+"."+r.slice(1))}else return h=vv(P,p+2,k).times(i+""),T=Cf(new P(n+"."+r.slice(1)),p-C).plus(h),P.precision=k,t==null?(Qr=!0,_r(T,k)):T;for(g=u=T=xi(T.minus(is),T.plus(is),p),y=_r(T.times(T),p),l=3;;){if(u=_r(u.times(y),p),h=g.plus(xi(u,new P(l),p)),_l(h.d).slice(0,p)===_l(g.d).slice(0,p))return g=g.times(2),i!==0&&(g=g.plus(vv(P,p+2,k).times(i+""))),g=xi(g,new P(v),p),P.precision=k,t==null?(Qr=!0,_r(g,k)):g;g=h,l+=2}}function f8(e,t){var r,n,l;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(l=t.length;t.charCodeAt(l-1)===48;)--l;if(t=t.slice(n,l),t){if(l-=n,r=r-n-1,e.e=Dd(r/$r),e.d=[],n=(r+1)%$r,r<0&&(n+=$r),n<l){for(n&&e.d.push(+t.slice(0,n)),l-=$r;n<l;)e.d.push(+t.slice(n,n+=$r));t=t.slice(n),n=$r-t.length}else n-=l;for(;n--;)t+="0";if(e.d.push(+t),Qr&&(e.e>vp||e.e<-vp))throw Error(EN+r)}else e.s=0,e.e=0,e.d=[0];return e}function _r(e,t,r){var n,l,i,u,g,h,p,y,v=e.d;for(u=1,i=v[0];i>=10;i/=10)u++;if(n=t-u,n<0)n+=$r,l=t,p=v[y=0];else{if(y=Math.ceil((n+1)/$r),i=v.length,y>=i)return e;for(p=i=v[y],u=1;i>=10;i/=10)u++;n%=$r,l=n-$r+u}if(r!==void 0&&(i=Ec(10,u-l-1),g=p/i%10|0,h=t<0||v[y+1]!==void 0||p%i,h=r<4?(g||h)&&(r==0||r==(e.s<0?3:2)):g>5||g==5&&(r==4||h||r==6&&(n>0?l>0?p/Ec(10,u-l):0:v[y-1])%10&1||r==(e.s<0?8:7))),t<1||!v[0])return h?(i=Ma(e),v.length=1,t=t-i-1,v[0]=Ec(10,($r-t%$r)%$r),e.e=Dd(-t/$r)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(n==0?(v.length=y,i=1,y--):(v.length=y+1,i=Ec(10,$r-n),v[y]=l>0?(p/Ec(10,u-l)%Ec(10,l)|0)*i:0),h)for(;;)if(y==0){(v[0]+=i)==Wa&&(v[0]=1,++e.e);break}else{if(v[y]+=i,v[y]!=Wa)break;v[y--]=0,i=1}for(n=v.length;v[--n]===0;)v.pop();if(Qr&&(e.e>vp||e.e<-vp))throw Error(EN+Ma(e));return e}function pM(e,t){var r,n,l,i,u,g,h,p,y,v,C=e.constructor,T=C.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new C(e),Qr?_r(t,T):t;if(h=e.d,v=t.d,n=t.e,p=e.e,h=h.slice(),u=p-n,u){for(y=u<0,y?(r=h,u=-u,g=v.length):(r=v,n=p,g=h.length),l=Math.max(Math.ceil(T/$r),g)+2,u>l&&(u=l,r.length=1),r.reverse(),l=u;l--;)r.push(0);r.reverse()}else{for(l=h.length,g=v.length,y=l<g,y&&(g=l),l=0;l<g;l++)if(h[l]!=v[l]){y=h[l]<v[l];break}u=0}for(y&&(r=h,h=v,v=r,t.s=-t.s),g=h.length,l=v.length-g;l>0;--l)h[g++]=0;for(l=v.length;l>u;){if(h[--l]<v[l]){for(i=l;i&&h[--i]===0;)h[i]=Wa-1;--h[i],h[l]+=Wa}h[l]-=v[l]}for(;h[--g]===0;)h.pop();for(;h[0]===0;h.shift())--n;return h[0]?(t.d=h,t.e=n,Qr?_r(t,T):t):new C(0)}function jc(e,t,r){var n,l=Ma(e),i=_l(e.d),u=i.length;return t?(r&&(n=r-u)>0?i=i.charAt(0)+"."+i.slice(1)+To(n):u>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(l<0?"e":"e+")+l):l<0?(i="0."+To(-l-1)+i,r&&(n=r-u)>0&&(i+=To(n))):l>=u?(i+=To(l+1-u),r&&(n=r-l-1)>0&&(i=i+"."+To(n))):((n=l+1)<u&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-u)>0&&(l+1===u&&(i+="."),i+=To(n))),e.s<0?"-"+i:i}function g8(e,t){if(e.length>t)return e.length=t,!0}function yM(e){var t,r,n;function l(i){var u=this;if(!(u instanceof l))return new l(i);if(u.constructor=l,i instanceof l){u.s=i.s,u.e=i.e,u.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Rc+i);if(i>0)u.s=1;else if(i<0)i=-i,u.s=-1;else{u.s=0,u.e=0,u.d=[0];return}if(i===~~i&&i<1e7){u.e=0,u.d=[i];return}return f8(u,i.toString())}else if(typeof i!="string")throw Error(Rc+i);if(i.charCodeAt(0)===45?(i=i.slice(1),u.s=-1):u.s=1,Pre.test(i))f8(u,i);else throw Error(Rc+i)}if(l.prototype=ft,l.ROUND_UP=0,l.ROUND_DOWN=1,l.ROUND_CEIL=2,l.ROUND_FLOOR=3,l.ROUND_HALF_UP=4,l.ROUND_HALF_DOWN=5,l.ROUND_HALF_EVEN=6,l.ROUND_HALF_CEIL=7,l.ROUND_HALF_FLOOR=8,l.clone=yM,l.config=l.set=Ire,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return l.config(e),l}function Ire(e){if(!e||typeof e!="object")throw Error(Fs+"Object expected");var t,r,n,l=["precision",1,Od,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<l.length;t+=3)if((n=e[r=l[t]])!==void 0)if(Dd(n)===n&&n>=l[t+1]&&n<=l[t+2])this[r]=n;else throw Error(Rc+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Rc+r+": "+n);return this}var wN=yM(kre);is=new wN(1);const yr=wN;var Mre=e=>e,xM={},bM=e=>e===xM,h8=e=>function t(){return arguments.length===0||arguments.length===1&&bM(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},vM=(e,t)=>e===1?t:h8(function(){for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];var i=n.filter(u=>u!==xM).length;return i>=e?t(...n):vM(e-i,h8(function(){for(var u=arguments.length,g=new Array(u),h=0;h<u;h++)g[h]=arguments[h];var p=n.map(y=>bM(y)?g.shift():y);return t(...p,...g)}))}),Rre=e=>vM(e.length,e),f2=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Lre=Rre((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),Bre=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Mre;var l=r.reverse(),i=l[0],u=l.slice(1);return function(){return u.reduce((g,h)=>h(g),i(...arguments))}},g2=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function EM(e){var t;return e===0?t=1:t=Math.floor(new yr(e).abs().log(10).toNumber())+1,t}function wM(e,t,r){for(var n=new yr(e),l=0,i=[];n.lt(t)&&l<1e5;)i.push(n.toNumber()),n=n.add(r),l++;return i}var NM=e=>{var[t,r]=e,[n,l]=[t,r];return t>r&&([n,l]=[r,t]),[n,l]},SM=(e,t,r)=>{if(e.lte(0))return new yr(0);var n=EM(e.toNumber()),l=new yr(10).pow(n),i=e.div(l),u=n!==1?.05:.1,g=new yr(Math.ceil(i.div(u).toNumber())).add(r).mul(u),h=g.mul(l);return t?new yr(h.toNumber()):new yr(Math.ceil(h.toNumber()))},Fre=(e,t,r)=>{var n=new yr(1),l=new yr(e);if(!l.isint()&&r){var i=Math.abs(e);i<1?(n=new yr(10).pow(EM(e)-1),l=new yr(Math.floor(l.div(n).toNumber())).mul(n)):i>1&&(l=new yr(Math.floor(e)))}else e===0?l=new yr(Math.floor((t-1)/2)):r||(l=new yr(Math.floor(e)));var u=Math.floor((t-1)/2),g=Bre(Lre(h=>l.add(new yr(h-u).mul(n)).toNumber()),f2);return g(0,t)},CM=function(t,r,n,l){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new yr(0),tickMin:new yr(0),tickMax:new yr(0)};var u=SM(new yr(r).sub(t).div(n-1),l,i),g;t<=0&&r>=0?g=new yr(0):(g=new yr(t).add(r).div(2),g=g.sub(new yr(g).mod(u)));var h=Math.ceil(g.sub(t).div(u).toNumber()),p=Math.ceil(new yr(r).sub(g).div(u).toNumber()),y=h+p+1;return y>n?CM(t,r,n,l,i+1):(y<n&&(p=r>0?p+(n-y):p,h=r>0?h:h+(n-y)),{step:u,tickMin:g.sub(new yr(h).mul(u)),tickMax:g.add(new yr(p).mul(u))})},Ure=function(t){var[r,n]=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=Math.max(l,2),[g,h]=NM([r,n]);if(g===-1/0||h===1/0){var p=h===1/0?[g,...f2(0,l-1).map(()=>1/0)]:[...f2(0,l-1).map(()=>-1/0),h];return r>n?g2(p):p}if(g===h)return Fre(g,l,i);var{step:y,tickMin:v,tickMax:C}=CM(g,h,u,i,0),T=wM(v,C.add(new yr(.1).mul(y)),y);return r>n?g2(T):T},jre=function(t,r){var[n,l]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[u,g]=NM([n,l]);if(u===-1/0||g===1/0)return[n,l];if(u===g)return[u];var h=Math.max(r,2),p=SM(new yr(g).sub(u).div(h-1),i,0),y=[...wM(new yr(u),new yr(g),p),g];return i===!1&&(y=y.map(v=>Math.round(v))),n>l?g2(y):y},zre=e=>e.rootProps.barCategoryGap,Zf=e=>e.rootProps.stackOffset,AM=e=>e.rootProps.reverseStackOrder,NN=e=>e.options.chartName,SN=e=>e.rootProps.syncId,TM=e=>e.rootProps.syncMethod,CN=e=>e.options.eventEmitter,ll={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},fi={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ls={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Sy=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Vre={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:fi.angleAxisId,includeHidden:!1,name:void 0,reversed:fi.reversed,scale:fi.scale,tick:fi.tick,tickCount:void 0,ticks:void 0,type:fi.type,unit:void 0},Hre={allowDataOverflow:ls.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ls.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ls.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ls.scale,tick:ls.tick,tickCount:ls.tickCount,ticks:void 0,type:ls.type,unit:void 0},$re={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:fi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fi.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fi.scale,tick:fi.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},qre={allowDataOverflow:ls.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ls.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ls.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ls.scale,tick:ls.tick,tickCount:ls.tickCount,ticks:void 0,type:"category",unit:void 0},AN=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?$re:Vre,TN=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?qre:Hre,Cy=e=>e.polarOptions,ON=Me([Pi,Ii,Za],AI),OM=Me([Cy,ON],(e,t)=>{if(e!=null)return cs(e.innerRadius,t,0)}),DM=Me([Cy,ON],(e,t)=>{if(e!=null)return cs(e.outerRadius,t,t*.8)}),Gre=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},_M=Me([Cy],Gre);Me([AN,_M],Sy);var kM=Me([ON,OM,DM],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Me([TN,kM],Sy);var PM=Me([Lr,Cy,OM,DM,Pi,Ii],(e,t,r,n,l,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:u,cy:g,startAngle:h,endAngle:p}=t;return{cx:cs(u,l,l/2),cy:cs(g,i,i/2),innerRadius:r,outerRadius:n,startAngle:h,endAngle:p,clockWise:!1}}}),ra=(e,t)=>t,Qf=(e,t,r)=>r;function IM(e){return e?.id}function MM(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:l,dataKey:i}=r,u=new Map;return e.forEach(g=>{var h,p=(h=g.data)!==null&&h!==void 0?h:n;if(!(p==null||p.length===0)){var y=IM(g);p.forEach((v,C)=>{var T=i==null||l?C:String(va(v,i,null)),D=va(v,g.dataKey,0),P;u.has(T)?P=u.get(T):P={},Object.assign(P,{[y]:D}),u.set(T,P)})}}),Array.from(u.values())}function DN(e){return e.stackId!=null&&e.dataKey!=null}var Ay=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Ty(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Yre(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Ha=e=>{var t=Lr(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},_d=e=>e.tooltip.settings.axisId;function p8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Ep(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p8(Object(r),!0).forEach(function(n){Xre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xre(e,t,r){return(t=Wre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wre(e){var t=Kre(e,"string");return typeof t=="symbol"?t:t+""}function Kre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h2=[0,"auto"],Zre={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Qre=(e,t)=>e.cartesianAxis.xAxis[t],Ho=(e,t)=>{var r=Qre(e,t);return r??Zre},Jre={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:h2,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:qf},eae=(e,t)=>e.cartesianAxis.yAxis[t],$o=(e,t)=>{var r=eae(e,t);return r??Jre},tae={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},_N=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??tae},la=(e,t,r)=>{switch(t){case"xAxis":return Ho(e,r);case"yAxis":return $o(e,r);case"zAxis":return _N(e,r);case"angleAxis":return AN(e,r);case"radiusAxis":return TN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},rae=(e,t,r)=>{switch(t){case"xAxis":return Ho(e,r);case"yAxis":return $o(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Jf=(e,t,r)=>{switch(t){case"xAxis":return Ho(e,r);case"yAxis":return $o(e,r);case"angleAxis":return AN(e,r);case"radiusAxis":return TN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},RM=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function kN(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var aae=e=>e.graphicalItems.cartesianItems,nae=Me([ra,Qf],kN),PN=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),e0=Me([aae,la,nae],PN,{memoizeOptions:{resultEqualityCheck:Ty}}),LM=Me([e0],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(DN)),BM=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),sae=Me([e0],BM),IN=e=>e.map(t=>t.data).filter(Boolean).flat(1),lae=Me([e0],IN,{memoizeOptions:{resultEqualityCheck:Ty}}),MN=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:l}=t;return e.length>0?e:r.slice(n,l+1)},RN=Me([lae,dM],MN),LN=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:va(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(l=>({value:va(l,n)}))):e.map(n=>({value:n})),Oy=Me([RN,la,e0],LN);function FM(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Ch(e){if(Ai(e)||e instanceof Date){var t=Number(e);if(Ka(t))return t}}function y8(e){if(Array.isArray(e)){var t=[Ch(e[0]),Ch(e[1])];return Lo(t)?t:void 0}var r=Ch(e);if(r!=null)return[r,r]}function ki(e){return e.map(Ch).filter(WX)}function iae(e,t,r){return!r||typeof t!="number"||Si(t)?[]:r.length?ki(r.flatMap(n=>{var l=va(e,n.dataKey),i,u;if(Array.isArray(l)?[i,u]=l:i=u=l,!(!Ka(i)||!Ka(u)))return[t-i,t+u]})):[]}var $a=e=>{var t=Ha(e),r=_d(e);return Jf(e,t,r)},t0=Me([$a],e=>e?.dataKey),oae=Me([LM,dM,$a],MM),UM=(e,t,r,n)=>{var l={},i=t.reduce((u,g)=>(g.stackId==null||(u[g.stackId]==null&&(u[g.stackId]=[]),u[g.stackId].push(g)),u),l);return Object.fromEntries(Object.entries(i).map(u=>{var[g,h]=u,p=n?[...h].reverse():h,y=p.map(IM);return[g,{stackedData:wZ(e,y,r),graphicalItems:p}]}))},cae=Me([oae,LM,Zf,AM],UM),jM=(e,t,r,n)=>{var{dataStartIndex:l,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var u=CZ(e,l,i);if(!(u!=null&&u[0]===0&&u[1]===0))return u}},uae=Me([la],e=>e.allowDataOverflow),BN=e=>{var t;if(e==null||!("domain"in e))return h2;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=ki(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:h2},FN=Me([la],BN),UN=Me([FN,uae],mM),dae=Me([cae,Vo,ra,UN],jM,{memoizeOptions:{resultEqualityCheck:Ay}}),Dy=e=>e.errorBars,mae=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>FM(r,n)),wp=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var l=r.filter(Boolean);if(l.length!==0){var i=l.flat(),u=Math.min(...i),g=Math.max(...i);return[u,g]}},jN=(e,t,r,n,l)=>{var i,u;if(r.length>0&&e.forEach(g=>{r.forEach(h=>{var p,y,v=(p=n[h.id])===null||p===void 0?void 0:p.filter(R=>FM(l,R)),C=va(g,(y=t.dataKey)!==null&&y!==void 0?y:h.dataKey),T=iae(g,C,v);if(T.length>=2){var D=Math.min(...T),P=Math.max(...T);(i==null||D<i)&&(i=D),(u==null||P>u)&&(u=P)}var k=y8(C);k!=null&&(i=i==null?k[0]:Math.min(i,k[0]),u=u==null?k[1]:Math.max(u,k[1]))})}),t?.dataKey!=null&&e.forEach(g=>{var h=y8(va(g,t.dataKey));h!=null&&(i=i==null?h[0]:Math.min(i,h[0]),u=u==null?h[1]:Math.max(u,h[1]))}),Ka(i)&&Ka(u))return[i,u]},fae=Me([RN,la,sae,Dy,ra],jN,{memoizeOptions:{resultEqualityCheck:Ay}});function gae(e){var{value:t}=e;if(Ai(t)||t instanceof Date)return t}var hae=(e,t,r)=>{var n=e.map(gae).filter(l=>l!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&i7(n))?_I(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},zM=e=>e.referenceElements.dots,kd=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),pae=Me([zM,ra,Qf],kd),VM=e=>e.referenceElements.areas,yae=Me([VM,ra,Qf],kd),HM=e=>e.referenceElements.lines,xae=Me([HM,ra,Qf],kd),$M=(e,t)=>{var r=ki(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},bae=Me(pae,ra,$M),qM=(e,t)=>{var r=ki(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},vae=Me([yae,ra],qM);function Eae(e){var t;if(e.x!=null)return ki([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:ki(r)}function wae(e){var t;if(e.y!=null)return ki([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:ki(r)}var GM=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?Eae(n):wae(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Nae=Me([xae,ra],GM),Sae=Me(bae,Nae,vae,(e,t,r)=>wp(e,r,t)),zN=(e,t,r,n,l,i,u,g)=>{if(r!=null)return r;var h=u==="vertical"&&g==="xAxis"||u==="horizontal"&&g==="yAxis",p=h?wp(n,i,l):wp(i,l);return _re(t,p,e.allowDataOverflow)},Cae=Me([la,FN,UN,dae,fae,Sae,Lr,ra],zN,{memoizeOptions:{resultEqualityCheck:Ay}}),Aae=[0,1],VN=(e,t,r,n,l,i,u)=>{if(!((e==null||r==null||r.length===0)&&u===void 0)){var{dataKey:g,type:h}=e,p=Vc(t,i);if(p&&g==null){var y;return _I(0,(y=r?.length)!==null&&y!==void 0?y:0)}return h==="category"?hae(n,e,p):l==="expand"?Aae:u}},HN=Me([la,Lr,RN,Oy,Zf,ra,Cae],VN),YM=(e,t,r,n,l)=>{if(e!=null){var{scale:i,type:u}=e;if(i==="auto")return t==="radial"&&l==="radiusAxis"?"band":t==="radial"&&l==="angleAxis"?"linear":u==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":u==="category"?"band":"linear";if(typeof i=="string"){var g="scale".concat(jf(i));return g in Ym?g:"point"}}},Pd=Me([la,Lr,RM,NN,ra],YM);function Tae(e){if(e!=null){if(e in Ym)return Ym[e]();var t="scale".concat(jf(e));if(t in Ym)return Ym[t]()}}function $N(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var l=Tae(t);if(l!=null){var i=l.domain(r).range(n);return xZ(i),i}}}var qN=(e,t,r)=>{var n=BN(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Lo(e))return Ure(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Lo(e))return jre(e,t.tickCount,t.allowDecimals)}},GN=Me([HN,Jf,Pd],qN),YN=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&Lo(t)&&Array.isArray(r)&&r.length>0){var l=t[0],i=r[0],u=t[1],g=r[r.length-1];return[Math.min(l,i),Math.max(u,g)]}return t},Oae=Me([la,HN,GN,ra],YN),Dae=Me(Oy,la,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ki(e.map(g=>g.value))).sort((g,h)=>g-h);if(n.length<2)return 1/0;var l=n[n.length-1]-n[0];if(l===0)return 1/0;for(var i=0;i<n.length-1;i++){var u=n[i+1]-n[i];r=Math.min(r,u)}return r/l}}),XM=Me(Dae,Lr,zre,Za,(e,t,r,n)=>n,(e,t,r,n,l)=>{if(!Ka(e))return 0;var i=t==="vertical"?n.height:n.width;if(l==="gap")return e*i/2;if(l==="no-gap"){var u=cs(r,e*i),g=e*i/2;return g-u-(g-u)/i*u}return 0}),_ae=(e,t)=>{var r=Ho(e,t);return r==null||typeof r.padding!="string"?0:XM(e,"xAxis",t,r.padding)},kae=(e,t)=>{var r=$o(e,t);return r==null||typeof r.padding!="string"?0:XM(e,"yAxis",t,r.padding)},Pae=Me(Ho,_ae,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:l}=e;return typeof l=="string"?{left:t,right:t}:{left:((r=l.left)!==null&&r!==void 0?r:0)+t,right:((n=l.right)!==null&&n!==void 0?n:0)+t}}),Iae=Me($o,kae,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:l}=e;return typeof l=="string"?{top:t,bottom:t}:{top:((r=l.top)!==null&&r!==void 0?r:0)+t,bottom:((n=l.bottom)!==null&&n!==void 0?n:0)+t}}),Mae=Me([Za,Pae,dy,uy,(e,t,r)=>r],(e,t,r,n,l)=>{var{padding:i}=n;return l?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),Rae=Me([Za,Lr,Iae,dy,uy,(e,t,r)=>r],(e,t,r,n,l,i)=>{var{padding:u}=l;return i?[n.height-u.bottom,u.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),r0=(e,t,r,n)=>{var l;switch(t){case"xAxis":return Mae(e,r,n);case"yAxis":return Rae(e,r,n);case"zAxis":return(l=_N(e,r))===null||l===void 0?void 0:l.range;case"angleAxis":return _M(e);case"radiusAxis":return kM(e,r);default:return}},WM=Me([la,r0],Sy),_y=Me([la,Pd,Oae,WM],$N);Me([e0,Dy,ra],mae);function KM(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var ky=(e,t)=>t,Py=(e,t,r)=>r,Lae=Me(oy,ky,Py,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(KM)),Bae=Me(cy,ky,Py,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(KM)),ZM=(e,t)=>({width:e.width,height:t.height}),Fae=(e,t)=>{var r=typeof t.width=="number"?t.width:qf;return{width:r,height:e.height}};Me(Za,Ho,ZM);var Uae=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},jae=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},zae=Me(Ii,Za,Lae,ky,Py,(e,t,r,n,l)=>{var i={},u;return r.forEach(g=>{var h=ZM(t,g);u==null&&(u=Uae(t,n,e));var p=n==="top"&&!l||n==="bottom"&&l;i[g.id]=u-Number(p)*h.height,u+=(p?-1:1)*h.height}),i}),Vae=Me(Pi,Za,Bae,ky,Py,(e,t,r,n,l)=>{var i={},u;return r.forEach(g=>{var h=Fae(t,g);u==null&&(u=jae(t,n,e));var p=n==="left"&&!l||n==="right"&&l;i[g.id]=u-Number(p)*h.width,u+=(p?-1:1)*h.width}),i}),Hae=(e,t)=>{var r=Ho(e,t);if(r!=null)return zae(e,r.orientation,r.mirror)};Me([Za,Ho,Hae,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var l=r?.[n];return l==null?{x:e.left,y:0}:{x:e.left,y:l}}});var $ae=(e,t)=>{var r=$o(e,t);if(r!=null)return Vae(e,r.orientation,r.mirror)};Me([Za,$o,$ae,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var l=r?.[n];return l==null?{x:0,y:e.top}:{x:l,y:e.top}}});Me(Za,$o,(e,t)=>{var r=typeof t.width=="number"?t.width:qf;return{width:r,height:e.height}});var QM=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:l,type:i,dataKey:u}=r,g=Vc(e,n),h=t.map(p=>p.value);if(u&&g&&i==="category"&&l&&i7(h))return h}},XN=Me([Lr,Oy,la,ra],QM),JM=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:l,scale:i}=r,u=Vc(e,n);if(u&&(l==="number"||i!=="auto"))return t.map(g=>g.value)}},WN=Me([Lr,Oy,Jf,ra],JM);Me([Lr,rae,Pd,_y,XN,WN,r0,GN,ra],(e,t,r,n,l,i,u,g,h)=>{if(t!=null){var p=Vc(e,h);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:h,categoricalDomain:i,duplicateDomain:l,isCategorical:p,niceTicks:g,range:u,realScaleType:r,scale:n}}});var qae=(e,t,r,n,l,i,u,g,h)=>{if(!(t==null||n==null)){var p=Vc(e,h),{type:y,ticks:v,tickCount:C}=t,T=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,D=y==="category"&&n.bandwidth?n.bandwidth()/T:0;D=h==="angleAxis"&&i!=null&&i.length>=2?jn(i[0]-i[1])*2*D:D;var P=v||l;if(P){var k=P.map((R,B)=>{var M=u?u.indexOf(R):R;return{index:B,coordinate:n(M)+D,value:R,offset:D}});return k.filter(R=>Ka(R.coordinate))}return p&&g?g.map((R,B)=>({coordinate:n(R)+D,value:R,index:B,offset:D})).filter(R=>Ka(R.coordinate)):n.ticks?n.ticks(C).map(R=>({coordinate:n(R)+D,value:R,offset:D})):n.domain().map((R,B)=>({coordinate:n(R)+D,value:u?u[R]:R,index:B,offset:D}))}};Me([Lr,Jf,Pd,_y,GN,r0,XN,WN,ra],qae);var Gae=(e,t,r,n,l,i,u)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var g=Vc(e,u),{tickCount:h}=t,p=0;return p=u==="angleAxis"&&n?.length>=2?jn(n[0]-n[1])*2*p:p,g&&i?i.map((y,v)=>({coordinate:r(y)+p,value:y,index:v,offset:p})):r.ticks?r.ticks(h).map(y=>({coordinate:r(y)+p,value:y,offset:p})):r.domain().map((y,v)=>({coordinate:r(y)+p,value:l?l[y]:y,index:v,offset:p}))}};Me([Lr,Jf,_y,r0,XN,WN,ra],Gae);Me(la,_y,(e,t)=>{if(!(e==null||t==null))return Ep(Ep({},e),{},{scale:t})});var Yae=Me([la,Pd,HN,WM],$N);Me((e,t,r)=>_N(e,r),Yae,(e,t)=>{if(!(e==null||t==null))return Ep(Ep({},e),{},{scale:t})});var Xae=Me([Lr,oy,cy],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),eR=e=>e.options.defaultTooltipEventType,tR=e=>e.options.validateTooltipEventTypes;function rR(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function KN(e,t){var r=eR(e),n=tR(e);return rR(t,r,n)}function Wae(e){return Rt(t=>KN(t,e))}var aR=(e,t)=>{var r,n=Number(t);if(!(Si(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Kae=e=>e.tooltip.settings,Do={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Zae={itemInteraction:{click:Do,hover:Do},axisInteraction:{click:Do,hover:Do},keyboardInteraction:Do,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},nR=qn({name:"tooltip",initialState:Zae,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Kr()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,l=cl(e).tooltipItemPayloads.indexOf(r);l>-1&&(e.tooltipItemPayloads[l]=n)},prepare:Kr()},removeTooltipEntrySettings:{reducer(e,t){var r=cl(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Kr()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Qae,replaceTooltipEntrySettings:Jae,removeTooltipEntrySettings:ene,setTooltipSettingsState:tne,setActiveMouseOverItemIndex:sR,mouseLeaveItem:rne,mouseLeaveChart:lR,setActiveClickItemIndex:ane,setMouseOverAxisIndex:iR,setMouseClickAxisIndex:nne,setSyncInteraction:p2,setKeyboardInteraction:y2}=nR.actions,sne=nR.reducer;function x8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function qg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x8(Object(r),!0).forEach(function(n){lne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lne(e,t,r){return(t=ine(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ine(e){var t=one(e,"string");return typeof t=="symbol"?t:t+""}function one(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cne(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function une(e){return e.index!=null}var oR=(e,t,r,n)=>{if(t==null)return Do;var l=cne(e,t,r);if(l==null)return Do;if(l.active)return l;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(une(l)){if(i)return qg(qg({},l),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return qg(qg({},Do),{},{coordinate:l.coordinate})};function dne(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function mne(e,t){var r=dne(e),n=t[0],l=t[1];if(r===void 0)return!1;var i=Math.min(n,l),u=Math.max(n,l);return r>=i&&r<=u}function fne(e,t,r){if(r==null||t==null)return!0;var n=va(e,t);return n==null||!Lo(r)?!0:mne(n,r)}var ZN=(e,t,r,n)=>{var l=e?.index;if(l==null)return null;var i=Number(l);if(!Ka(i))return l;var u=0,g=1/0;t.length>0&&(g=t.length-1);var h=Math.max(u,Math.min(i,g)),p=t[h];return p==null||fne(p,r,n)?String(h):null},cR=(e,t,r,n,l,i,u,g)=>{if(!(i==null||g==null)){var h=u[0],p=h==null?void 0:g(h.positions,i);if(p!=null)return p;var y=l?.[Number(i)];if(y)switch(r){case"horizontal":return{x:y.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:y.coordinate}}}},uR=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var l;return r==="hover"?l=e.itemInteraction.hover.dataKey:l=e.itemInteraction.click.dataKey,l==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var u;return((u=i.settings)===null||u===void 0?void 0:u.dataKey)===l})},a0=e=>e.options.tooltipPayloadSearcher,Id=e=>e.tooltip;function b8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function v8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b8(Object(r),!0).forEach(function(n){gne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gne(e,t,r){return(t=hne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hne(e){var t=pne(e,"string");return typeof t=="symbol"?t:t+""}function pne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yne(e,t){return e??t}var dR=(e,t,r,n,l,i,u)=>{if(!(t==null||i==null)){var{chartData:g,computedData:h,dataStartIndex:p,dataEndIndex:y}=r,v=[];return e.reduce((C,T)=>{var D,{dataDefinedOnItem:P,settings:k}=T,R=yne(P,g),B=Array.isArray(R)?tI(R,p,y):R,M=(D=k?.dataKey)!==null&&D!==void 0?D:n,G=k?.nameKey,F;if(n&&Array.isArray(B)&&!Array.isArray(B[0])&&u==="axis"?F=XX(B,n,l):F=i(B,t,h,G),Array.isArray(F))F.forEach(L=>{var V=v8(v8({},k),{},{name:L.name,unit:L.unit,color:void 0,fill:void 0});C.push(z6({tooltipEntrySettings:V,dataKey:L.dataKey,payload:L.payload,value:va(L.payload,L.dataKey),name:L.name}))});else{var U;C.push(z6({tooltipEntrySettings:k,dataKey:M,payload:F,value:va(F,M),name:(U=va(F,G))!==null&&U!==void 0?U:k?.name}))}return C},v)}},QN=Me([$a,Lr,RM,NN,Ha],YM),xne=Me([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),bne=Me([Ha,_d],kN),n0=Me([xne,$a,bne],PN,{memoizeOptions:{resultEqualityCheck:Ty}}),vne=Me([n0],e=>e.filter(DN)),Ene=Me([n0],IN,{memoizeOptions:{resultEqualityCheck:Ty}}),Md=Me([Ene,Vo],MN),wne=Me([vne,Vo,$a],MM),JN=Me([Md,$a,n0],LN),mR=Me([$a],BN),Nne=Me([$a],e=>e.allowDataOverflow),fR=Me([mR,Nne],mM),Sne=Me([n0],e=>e.filter(DN)),Cne=Me([wne,Sne,Zf,AM],UM),Ane=Me([Cne,Vo,Ha,fR],jM),Tne=Me([n0],BM),One=Me([Md,$a,Tne,Dy,Ha],jN,{memoizeOptions:{resultEqualityCheck:Ay}}),Dne=Me([zM,Ha,_d],kd),_ne=Me([Dne,Ha],$M),kne=Me([VM,Ha,_d],kd),Pne=Me([kne,Ha],qM),Ine=Me([HM,Ha,_d],kd),Mne=Me([Ine,Ha],GM),Rne=Me([_ne,Mne,Pne],wp),Lne=Me([$a,mR,fR,Ane,One,Rne,Lr,Ha],zN),s0=Me([$a,Lr,Md,JN,Zf,Ha,Lne],VN),Bne=Me([s0,$a,QN],qN),Fne=Me([$a,s0,Bne,Ha],YN),gR=e=>{var t=Ha(e),r=_d(e),n=!1;return r0(e,t,r,n)},hR=Me([$a,gR],Sy),pR=Me([$a,QN,Fne,hR],$N),Une=Me([Lr,JN,$a,Ha],QM),jne=Me([Lr,JN,$a,Ha],JM),zne=(e,t,r,n,l,i,u,g)=>{if(t){var{type:h}=t,p=Vc(e,g);if(n){var y=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,v=h==="category"&&n.bandwidth?n.bandwidth()/y:0;return v=g==="angleAxis"&&l!=null&&l?.length>=2?jn(l[0]-l[1])*2*v:v,p&&u?u.map((C,T)=>({coordinate:n(C)+v,value:C,index:T,offset:v})):n.domain().map((C,T)=>({coordinate:n(C)+v,value:i?i[C]:C,index:T,offset:v}))}}},Ri=Me([Lr,$a,QN,pR,gR,Une,jne,Ha],zne),eS=Me([eR,tR,Kae],(e,t,r)=>rR(r.shared,e,t)),yR=e=>e.tooltip.settings.trigger,tS=e=>e.tooltip.settings.defaultIndex,l0=Me([Id,eS,yR,tS],oR),Af=Me([l0,Md,t0,s0],ZN),xR=Me([Ri,Af],aR),bR=Me([l0],e=>{if(e)return e.dataKey}),Vne=Me([l0],e=>{if(e)return e.graphicalItemId}),vR=Me([Id,eS,yR,tS],uR),Hne=Me([Pi,Ii,Lr,Za,Ri,tS,vR,a0],cR),$ne=Me([l0,Hne],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),qne=Me([l0],e=>e.active),Gne=Me([vR,Af,Vo,t0,xR,a0,eS],dR);Me([Gne],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function E8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function w8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E8(Object(r),!0).forEach(function(n){Yne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yne(e,t,r){return(t=Xne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xne(e){var t=Wne(e,"string");return typeof t=="symbol"?t:t+""}function Wne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kne=()=>Rt($a),Zne=()=>{var e=Kne(),t=Rt(Ri),r=Rt(pR);return j6(!e||!r?void 0:w8(w8({},e),{},{scale:r}),t)};function N8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Du(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N8(Object(r),!0).forEach(function(n){Qne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qne(e,t,r){return(t=Jne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jne(e){var t=ese(e,"string");return typeof t=="symbol"?t:t+""}function ese(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tse=(e,t,r,n)=>{var l=t.find(i=>i&&i.index===r);if(l){if(e==="horizontal")return{x:l.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:l.coordinate}}return{x:0,y:0}},rse=(e,t,r,n)=>{var l=t.find(p=>p&&p.index===r);if(l){if(e==="centric"){var i=l.coordinate,{radius:u}=n;return Du(Du(Du({},n),Ia(n.cx,n.cy,u,i)),{},{angle:i,radius:u})}var g=l.coordinate,{angle:h}=n;return Du(Du(Du({},n),Ia(n.cx,n.cy,g,h)),{},{angle:h,radius:g})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function ase(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var ER=(e,t,r,n,l)=>{var i,u=-1,g=(i=t?.length)!==null&&i!==void 0?i:0;if(g<=1||e==null)return 0;if(n==="angleAxis"&&l!=null&&Math.abs(Math.abs(l[1]-l[0])-360)<=1e-6)for(var h=0;h<g;h++){var p=h>0?r[h-1].coordinate:r[g-1].coordinate,y=r[h].coordinate,v=h>=g-1?r[0].coordinate:r[h+1].coordinate,C=void 0;if(jn(y-p)!==jn(v-y)){var T=[];if(jn(v-y)===jn(l[1]-l[0])){C=v;var D=y+l[1]-l[0];T[0]=Math.min(D,(D+p)/2),T[1]=Math.max(D,(D+p)/2)}else{C=p;var P=v+l[1]-l[0];T[0]=Math.min(y,(P+y)/2),T[1]=Math.max(y,(P+y)/2)}var k=[Math.min(y,(C+y)/2),Math.max(y,(C+y)/2)];if(e>k[0]&&e<=k[1]||e>=T[0]&&e<=T[1]){({index:u}=r[h]);break}}else{var R=Math.min(p,v),B=Math.max(p,v);if(e>(R+y)/2&&e<=(B+y)/2){({index:u}=r[h]);break}}}else if(t){for(var M=0;M<g;M++)if(M===0&&e<=(t[M].coordinate+t[M+1].coordinate)/2||M>0&&M<g-1&&e>(t[M].coordinate+t[M-1].coordinate)/2&&e<=(t[M].coordinate+t[M+1].coordinate)/2||M===g-1&&e>(t[M].coordinate+t[M-1].coordinate)/2){({index:u}=t[M]);break}}return u},nse=()=>Rt(NN),rS=(e,t)=>t,wR=(e,t,r)=>r,aS=(e,t,r,n)=>n,sse=Me(Ri,e=>Jp(e,t=>t.coordinate)),nS=Me([Id,rS,wR,aS],oR),sS=Me([nS,Md,t0,s0],ZN),lse=(e,t,r)=>{if(t!=null){var n=Id(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},NR=Me([Id,rS,wR,aS],uR),Np=Me([Pi,Ii,Lr,Za,Ri,aS,NR,a0],cR),ise=Me([nS,Np],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),SR=Me([Ri,sS],aR),ose=Me([NR,sS,Vo,t0,SR,a0,rS],dR),cse=Me([nS,sS],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),use=(e,t,r,n,l,i,u)=>{if(!(!e||!r||!n||!l)&&ase(e,u)){var g=AZ(e,t),h=ER(g,i,l,r,n),p=tse(t,l,h,e);return{activeIndex:String(h),activeCoordinate:p}}},dse=(e,t,r,n,l,i,u)=>{if(!(!e||!n||!l||!i||!r)){var g=GJ(e,r);if(g){var h=TZ(g,t),p=ER(h,u,i,n,l),y=rse(t,i,p,g);return{activeIndex:String(p),activeCoordinate:y}}}},mse=(e,t,r,n,l,i,u,g)=>{if(!(!e||!t||!n||!l||!i))return t==="horizontal"||t==="vertical"?use(e,t,n,l,i,u,g):dse(e,t,r,n,l,i,u)},fse=Me(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),gse=Me(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(ll)),r=Array.from(new Set(t));return r.sort((n,l)=>n-l)},{memoizeOptions:{resultEqualityCheck:Yre}});function S8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function C8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S8(Object(r),!0).forEach(function(n){hse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hse(e,t,r){return(t=pse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pse(e){var t=yse(e,"string");return typeof t=="symbol"?t:t+""}function yse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xse={},bse={zIndexMap:Object.values(ll).reduce((e,t)=>C8(C8({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),xse)},vse=new Set(Object.values(ll));function Ese(e){return vse.has(e)}var CR=qn({name:"zIndex",initialState:bse,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Kr()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!Ese(r)&&delete e.zIndexMap[r])},prepare:Kr()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:l}=t.payload;e.zIndexMap[r]?l?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:l?void 0:n,panoramaElementId:l?n:void 0}},prepare:Kr()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Kr()}}}),{registerZIndexPortal:wse,unregisterZIndexPortal:Nse,registerZIndexPortalId:Sse,unregisterZIndexPortalId:Cse}=CR.actions,Ase=CR.reducer;function i0(e){var{zIndex:t,children:r}=e,n=sQ(),l=n&&t!==void 0&&t!==0,i=Uo(),u=wa();w.useLayoutEffect(()=>l?(u(wse({zIndex:t})),()=>{u(Nse({zIndex:t}))}):zf,[u,t,l]);var g=Rt(p=>fse(p,t,i));if(!l)return r;if(!g)return null;var h=document.getElementById(g);return h?R2.createPortal(r,h):null}function x2(){return x2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x2.apply(null,arguments)}function A8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Gg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A8(Object(r),!0).forEach(function(n){Tse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tse(e,t,r){return(t=Ose(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ose(e){var t=Dse(e,"string");return typeof t=="symbol"?t:t+""}function Dse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _se(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return w.isValidElement(t)?w.cloneElement(t,n):w.createElement(r,n)}function kse(e){var t,{coordinate:r,payload:n,index:l,offset:i,tooltipAxisBandSize:u,layout:g,cursor:h,tooltipEventType:p,chartName:y}=e,v=r,C=n,T=l;if(!h||!v||y!=="ScatterChart"&&p!=="axis")return null;var D,P,k;if(y==="ScatterChart")D=v,P=iJ,k=ll.cursorLine;else if(y==="BarChart")D=oJ(g,v,i,u),P=CI,k=ll.cursorRectangle;else if(g==="radial"&&c7(v)){var{cx:R,cy:B,radius:M,startAngle:G,endAngle:F}=TI(v);D={cx:R,cy:B,startAngle:G,endAngle:F,innerRadius:M,outerRadius:M},P=DI,k=ll.cursorLine}else D={points:KJ(g,v,i)},P=Xw,k=ll.cursorLine;var U=typeof h=="object"&&"className"in h?h.className:void 0,L=Gg(Gg(Gg(Gg({stroke:"#ccc",pointerEvents:"none"},i),D),TE(h)),{},{payload:C,payloadIndex:T,className:Ea("recharts-tooltip-cursor",U)});return w.createElement(i0,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:k},w.createElement(_se,{cursor:h,cursorComp:P,cursorProps:L}))}function Pse(e){var t=Zne(),r=aQ(),n=qw(),l=nse();return t==null||r==null||n==null||l==null?null:w.createElement(kse,x2({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:l}))}var AR=w.createContext(null),Ise=()=>w.useContext(AR),Ev={exports:{}},T8;function Mse(){return T8||(T8=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function l(h,p,y){this.fn=h,this.context=p,this.once=y||!1}function i(h,p,y,v,C){if(typeof y!="function")throw new TypeError("The listener must be a function");var T=new l(y,v||h,C),D=r?r+p:p;return h._events[D]?h._events[D].fn?h._events[D]=[h._events[D],T]:h._events[D].push(T):(h._events[D]=T,h._eventsCount++),h}function u(h,p){--h._eventsCount===0?h._events=new n:delete h._events[p]}function g(){this._events=new n,this._eventsCount=0}g.prototype.eventNames=function(){var p=[],y,v;if(this._eventsCount===0)return p;for(v in y=this._events)t.call(y,v)&&p.push(r?v.slice(1):v);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(y)):p},g.prototype.listeners=function(p){var y=r?r+p:p,v=this._events[y];if(!v)return[];if(v.fn)return[v.fn];for(var C=0,T=v.length,D=new Array(T);C<T;C++)D[C]=v[C].fn;return D},g.prototype.listenerCount=function(p){var y=r?r+p:p,v=this._events[y];return v?v.fn?1:v.length:0},g.prototype.emit=function(p,y,v,C,T,D){var P=r?r+p:p;if(!this._events[P])return!1;var k=this._events[P],R=arguments.length,B,M;if(k.fn){switch(k.once&&this.removeListener(p,k.fn,void 0,!0),R){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,y),!0;case 3:return k.fn.call(k.context,y,v),!0;case 4:return k.fn.call(k.context,y,v,C),!0;case 5:return k.fn.call(k.context,y,v,C,T),!0;case 6:return k.fn.call(k.context,y,v,C,T,D),!0}for(M=1,B=new Array(R-1);M<R;M++)B[M-1]=arguments[M];k.fn.apply(k.context,B)}else{var G=k.length,F;for(M=0;M<G;M++)switch(k[M].once&&this.removeListener(p,k[M].fn,void 0,!0),R){case 1:k[M].fn.call(k[M].context);break;case 2:k[M].fn.call(k[M].context,y);break;case 3:k[M].fn.call(k[M].context,y,v);break;case 4:k[M].fn.call(k[M].context,y,v,C);break;default:if(!B)for(F=1,B=new Array(R-1);F<R;F++)B[F-1]=arguments[F];k[M].fn.apply(k[M].context,B)}}return!0},g.prototype.on=function(p,y,v){return i(this,p,y,v,!1)},g.prototype.once=function(p,y,v){return i(this,p,y,v,!0)},g.prototype.removeListener=function(p,y,v,C){var T=r?r+p:p;if(!this._events[T])return this;if(!y)return u(this,T),this;var D=this._events[T];if(D.fn)D.fn===y&&(!C||D.once)&&(!v||D.context===v)&&u(this,T);else{for(var P=0,k=[],R=D.length;P<R;P++)(D[P].fn!==y||C&&!D[P].once||v&&D[P].context!==v)&&k.push(D[P]);k.length?this._events[T]=k.length===1?k[0]:k:u(this,T)}return this},g.prototype.removeAllListeners=function(p){var y;return p?(y=r?r+p:p,this._events[y]&&u(this,y)):(this._events=new n,this._eventsCount=0),this},g.prototype.off=g.prototype.removeListener,g.prototype.addListener=g.prototype.on,g.prefixed=r,g.EventEmitter=g,e.exports=g})(Ev)),Ev.exports}var Rse=Mse();const Lse=jl(Rse);var Tf=new Lse,b2="recharts.syncEvent.tooltip",O8="recharts.syncEvent.brush";function Bse(e,t){if(t){var r=Number.parseInt(t,10);if(!Si(r))return e?.[r]}}var Fse={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},TR=qn({name:"options",initialState:Fse,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Use=TR.reducer,{createEventEmitter:jse}=TR.actions;function zse(e){return e.tooltip.syncInteraction}var Vse={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},OR=qn({name:"chartData",initialState:Vse,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:D8,setDataStartEndIndexes:Hse,setComputedData:I0e}=OR.actions,$se=OR.reducer,qse=["x","y"];function _8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function _u(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_8(Object(r),!0).forEach(function(n){Gse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gse(e,t,r){return(t=Yse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yse(e){var t=Xse(e,"string");return typeof t=="symbol"?t:t+""}function Xse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wse(e,t){if(e==null)return{};var r,n,l=Kse(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Kse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Zse(){var e=Rt(SN),t=Rt(CN),r=wa(),n=Rt(TM),l=Rt(Ri),i=qw(),u=my(),g=Rt(h=>h.rootProps.className);w.useEffect(()=>{if(e==null)return zf;var h=(p,y,v)=>{if(t!==v&&e===p){if(n==="index"){var C;if(u&&y!==null&&y!==void 0&&(C=y.payload)!==null&&C!==void 0&&C.coordinate&&y.payload.sourceViewBox){var T=y.payload.coordinate,{x:D,y:P}=T,k=Wse(T,qse),{x:R,y:B,width:M,height:G}=y.payload.sourceViewBox,F=_u(_u({},k),{},{x:u.x+(M?(D-R)/M:0)*u.width,y:u.y+(G?(P-B)/G:0)*u.height});r(_u(_u({},y),{},{payload:_u(_u({},y.payload),{},{coordinate:F})}))}else r(y);return}if(l!=null){var U;if(typeof n=="function"){var L={activeTooltipIndex:y.payload.index==null?void 0:Number(y.payload.index),isTooltipActive:y.payload.active,activeIndex:y.payload.index==null?void 0:Number(y.payload.index),activeLabel:y.payload.label,activeDataKey:y.payload.dataKey,activeCoordinate:y.payload.coordinate},V=n(l,L);U=l[V]}else n==="value"&&(U=l.find(J=>String(J.value)===y.payload.label));var{coordinate:j}=y.payload;if(U==null||y.payload.active===!1||j==null||u==null){r(p2({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:Y,y:H}=j,q=Math.min(Y,u.x+u.width),le=Math.min(H,u.y+u.height),ue={x:i==="horizontal"?U.coordinate:q,y:i==="horizontal"?le:U.coordinate},re=p2({active:y.payload.active,coordinate:ue,dataKey:y.payload.dataKey,index:String(U.index),label:y.payload.label,sourceViewBox:y.payload.sourceViewBox,graphicalItemId:y.payload.graphicalItemId});r(re)}}};return Tf.on(b2,h),()=>{Tf.off(b2,h)}},[g,r,t,e,n,l,i,u])}function Qse(){var e=Rt(SN),t=Rt(CN),r=wa();w.useEffect(()=>{if(e==null)return zf;var n=(l,i,u)=>{t!==u&&e===l&&r(Hse(i))};return Tf.on(O8,n),()=>{Tf.off(O8,n)}},[r,t,e])}function Jse(){var e=wa();w.useEffect(()=>{e(jse())},[e]),Zse(),Qse()}function ele(e,t,r,n,l,i){var u=Rt(T=>lse(T,e,t)),g=Rt(CN),h=Rt(SN),p=Rt(TM),y=Rt(zse),v=y?.active,C=my();w.useEffect(()=>{if(!v&&h!=null&&g!=null){var T=p2({active:i,coordinate:r,dataKey:u,index:l,label:typeof n=="number"?String(n):n,sourceViewBox:C,graphicalItemId:void 0});Tf.emit(b2,h,T,g)}},[v,r,u,l,n,g,h,p,i,C])}function k8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function P8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k8(Object(r),!0).forEach(function(n){tle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tle(e,t,r){return(t=rle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rle(e){var t=ale(e,"string");return typeof t=="symbol"?t:t+""}function ale(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nle(e){return e.dataKey}function sle(e,t){return w.isValidElement(e)?w.cloneElement(e,t):typeof e=="function"?w.createElement(e,t):w.createElement(jQ,t)}var I8=[],lle={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function v2(e){var t,r,n=zs(e,lle),{active:l,allowEscapeViewBox:i,animationDuration:u,animationEasing:g,content:h,filterNull:p,isAnimationActive:y,offset:v,payloadUniqBy:C,position:T,reverseDirection:D,useTranslate3d:P,wrapperStyle:k,cursor:R,shared:B,trigger:M,defaultIndex:G,portal:F,axisId:U}=n,L=wa(),V=typeof G=="number"?String(G):G;w.useEffect(()=>{L(tne({shared:B,trigger:M,axisId:U,active:l,defaultIndex:V}))},[L,B,M,U,l,V]);var j=my(),Y=vI(),H=Wae(B),{activeIndex:q,isActive:le}=(t=Rt(me=>cse(me,H,M,V)))!==null&&t!==void 0?t:{},ue=Rt(me=>ose(me,H,M,V)),re=Rt(me=>SR(me,H,M,V)),J=Rt(me=>ise(me,H,M,V)),ae=ue,pe=Ise(),xe=(r=l??le)!==null&&r!==void 0?r:!1,[ee,K]=C7([ae,xe]),te=H==="axis"?re:void 0;ele(H,M,J,te,q,xe);var ge=F??pe;if(ge==null||j==null||H==null)return null;var oe=ae??I8;xe||(oe=I8),p&&oe.length&&(oe=v7(oe.filter(me=>me.value!=null&&(me.hide!==!0||n.includeHidden)),C,nle));var Ne=oe.length>0,ie=w.createElement(YQ,{allowEscapeViewBox:i,animationDuration:u,animationEasing:g,isAnimationActive:y,active:xe,coordinate:J,hasPayload:Ne,offset:v,position:T,reverseDirection:D,useTranslate3d:P,viewBox:j,wrapperStyle:k,lastBoundingBox:ee,innerRef:K,hasPortalFromProps:!!F},sle(h,P8(P8({},n),{},{payload:oe,label:te,active:xe,activeIndex:q,coordinate:J,accessibilityLayer:Y})));return w.createElement(w.Fragment,null,R2.createPortal(ie,ge),xe&&w.createElement(Pse,{cursor:R,tooltipEventType:H,coordinate:J,payload:oe,index:q}))}var gd=e=>null;gd.displayName="Cell";function ile(e,t,r){return(t=ole(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ole(e){var t=cle(e,"string");return typeof t=="symbol"?t:t+""}function cle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ule{constructor(t){ile(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function M8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function dle(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M8(Object(r),!0).forEach(function(n){mle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mle(e,t,r){return(t=fle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fle(e){var t=gle(e,"string");return typeof t=="symbol"?t:t+""}function gle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hle={cacheSize:2e3,enableCache:!0},DR=dle({},hle),R8=new ule(DR.cacheSize),ple={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},L8="recharts_measurement_span";function yle(e,t){var r=t.fontSize||"",n=t.fontFamily||"",l=t.fontWeight||"",i=t.fontStyle||"",u=t.letterSpacing||"",g=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(l,"|").concat(i,"|").concat(u,"|").concat(g)}var B8=(e,t)=>{try{var r=document.getElementById(L8);r||(r=document.createElement("span"),r.setAttribute("id",L8),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,ple,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},F8=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||yy.isSsr)return{width:0,height:0};if(!DR.enableCache)return B8(t,r);var n=yle(t,r),l=R8.get(n);if(l)return l;var i=B8(t,r);return R8.set(n,i),i},U8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,j8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,xle=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ble=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_R={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vle=Object.keys(_R),qu="NaN";function Ele(e,t){return e*_R[t]}class Fn{static parse(t){var r,[,n,l]=(r=ble.exec(t))!==null&&r!==void 0?r:[];return new Fn(parseFloat(n),l??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Si(t)&&(this.unit=""),r!==""&&!xle.test(r)&&(this.num=NaN,this.unit=""),vle.includes(r)&&(this.num=Ele(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Si(this.num)}}function kR(e){if(e.includes(qu))return qu;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,l,i]=(r=U8.exec(t))!==null&&r!==void 0?r:[],u=Fn.parse(n??""),g=Fn.parse(i??""),h=l==="*"?u.multiply(g):u.divide(g);if(h.isNaN())return qu;t=t.replace(U8,h.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var p,[,y,v,C]=(p=j8.exec(t))!==null&&p!==void 0?p:[],T=Fn.parse(y??""),D=Fn.parse(C??""),P=v==="+"?T.add(D):T.subtract(D);if(P.isNaN())return qu;t=t.replace(j8,P.toString())}return t}var z8=/\(([^()]*)\)/;function wle(e){for(var t=e,r;(r=z8.exec(t))!=null;){var[,n]=r;t=t.replace(z8,kR(n))}return t}function Nle(e){var t=e.replace(/\s+/g,"");return t=wle(t),t=kR(t),t}function Sle(e){try{return Nle(e)}catch{return qu}}function wv(e){var t=Sle(e.slice(5,-1));return t===qu?"":t}var Cle=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Ale=["dx","dy","angle","className","breakAll"];function E2(){return E2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E2.apply(null,arguments)}function V8(e,t){if(e==null)return{};var r,n,l=Tle(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Tle(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var PR=/[ \f\n\r\t\v\u2028\u2029]+/,IR=e=>{var{children:t,breakAll:r,style:n}=e;try{var l=[];ms(t)||(r?l=t.toString().split(""):l=t.toString().split(PR));var i=l.map(g=>({word:g,width:F8(g,n).width})),u=r?0:F8("",n).width;return{wordsWithComputedWidth:i,spaceWidth:u}}catch{return null}};function Ole(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var MR=(e,t,r,n)=>e.reduce((l,i)=>{var{word:u,width:g}=i,h=l[l.length-1];if(h&&g!=null&&(t==null||n||h.width+g+r<Number(t)))h.words.push(u),h.width+=g+r;else{var p={words:[u],width:g};l.push(p)}return l},[]),RR=e=>e.reduce((t,r)=>t.width>r.width?t:r),Dle="",H8=(e,t,r,n,l,i,u,g)=>{var h=e.slice(0,t),p=IR({breakAll:r,style:n,children:h+Dle});if(!p)return[!1,[]];var y=MR(p.wordsWithComputedWidth,i,u,g),v=y.length>l||RR(y).width>Number(i);return[v,y]},_le=(e,t,r,n,l)=>{var{maxLines:i,children:u,style:g,breakAll:h}=e,p=It(i),y=String(u),v=MR(t,n,r,l);if(!p||l)return v;var C=v.length>i||RR(v).width>Number(n);if(!C)return v;for(var T=0,D=y.length-1,P=0,k;T<=D&&P<=y.length-1;){var R=Math.floor((T+D)/2),B=R-1,[M,G]=H8(y,B,h,g,i,n,r,l),[F]=H8(y,R,h,g,i,n,r,l);if(!M&&!F&&(T=R+1),M&&F&&(D=R-1),!M&&F){k=G;break}P++}return k||v},$8=e=>{var t=ms(e)?[]:e.toString().split(PR);return[{words:t,width:void 0}]},kle=e=>{var{width:t,scaleToFit:r,children:n,style:l,breakAll:i,maxLines:u}=e;if((t||r)&&!yy.isSsr){var g,h,p=IR({breakAll:i,children:n,style:l});if(p){var{wordsWithComputedWidth:y,spaceWidth:v}=p;g=y,h=v}else return $8(n);return _le({breakAll:i,children:n,maxLines:u,style:l},g,h,t,!!r)}return $8(n)},LR="#808080",Ple={angle:0,breakAll:!1,capHeight:"0.71em",fill:LR,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},lS=w.forwardRef((e,t)=>{var r=zs(e,Ple),{x:n,y:l,lineHeight:i,capHeight:u,fill:g,scaleToFit:h,textAnchor:p,verticalAnchor:y}=r,v=V8(r,Cle),C=w.useMemo(()=>kle({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:h,style:v.style,width:v.width}),[v.breakAll,v.children,v.maxLines,h,v.style,v.width]),{dx:T,dy:D,angle:P,className:k,breakAll:R}=v,B=V8(v,Ale);if(!Ai(n)||!Ai(l)||C.length===0)return null;var M=Number(n)+(It(T)?T:0),G=Number(l)+(It(D)?D:0);if(!Ka(M)||!Ka(G))return null;var F;switch(y){case"start":F=wv("calc(".concat(u,")"));break;case"middle":F=wv("calc(".concat((C.length-1)/2," * -").concat(i," + (").concat(u," / 2))"));break;default:F=wv("calc(".concat(C.length-1," * -").concat(i,")"));break}var U=[];if(h){var L=C[0].width,{width:V}=v;U.push("scale(".concat(It(V)&&It(L)?V/L:1,")"))}return P&&U.push("rotate(".concat(P,", ").concat(M,", ").concat(G,")")),U.length&&(B.transform=U.join(" ")),w.createElement("text",E2({},Ls(B),{ref:t,x:M,y:G,className:Ea("recharts-text",k),textAnchor:p,fill:g.includes("url")?LR:g}),C.map((j,Y)=>{var H=j.words.join(R?"":" ");return w.createElement("tspan",{x:M,dy:Y===0?F:i,key:"".concat(H,"-").concat(Y)},H)}))});lS.displayName="Text";var Ile=["labelRef"];function Mle(e,t){if(e==null)return{};var r,n,l=Rle(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Rle(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function q8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function _a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q8(Object(r),!0).forEach(function(n){Lle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lle(e,t,r){return(t=Ble(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ble(e){var t=Fle(e,"string");return typeof t=="symbol"?t:t+""}function Fle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sp(){return Sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sp.apply(null,arguments)}var Ule=w.createContext(null),jle=()=>{var e=w.useContext(Ule),t=my();return e||cI(t)},zle=w.createContext(null),Vle=()=>{var e=w.useContext(zle),t=Rt(PM);return e||t},Hle=e=>{var{value:t,formatter:r}=e,n=ms(e.children)?t:e.children;return typeof r=="function"?r(n):n},$le=e=>e!=null&&typeof e=="function",qle=(e,t)=>{var r=jn(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Gle=(e,t,r,n,l)=>{var{offset:i,className:u}=e,{cx:g,cy:h,innerRadius:p,outerRadius:y,startAngle:v,endAngle:C,clockWise:T}=l,D=(p+y)/2,P=qle(v,C),k=P>=0?1:-1,R,B;switch(t){case"insideStart":R=v+k*i,B=T;break;case"insideEnd":R=C-k*i,B=!T;break;case"end":R=C+k*i,B=T;break;default:throw new Error("Unsupported position ".concat(t))}B=P<=0?B:!B;var M=Ia(g,h,D,R),G=Ia(g,h,D,R+(B?1:-1)*359),F="M".concat(M.x,",").concat(M.y,`
    A`).concat(D,",").concat(D,",0,1,").concat(B?0:1,`,
    `).concat(G.x,",").concat(G.y),U=ms(e.id)?ff("recharts-radial-line-"):e.id;return w.createElement("text",Sp({},n,{dominantBaseline:"central",className:Ea("recharts-radial-bar-label",u)}),w.createElement("defs",null,w.createElement("path",{id:U,d:F})),w.createElement("textPath",{xlinkHref:"#".concat(U)},r))},Yle=(e,t,r)=>{var{cx:n,cy:l,innerRadius:i,outerRadius:u,startAngle:g,endAngle:h}=e,p=(g+h)/2;if(r==="outside"){var{x:y,y:v}=Ia(n,l,u+t,p);return{x:y,y:v,textAnchor:y>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:l,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:l,textAnchor:"middle",verticalAnchor:"end"};var C=(i+u)/2,{x:T,y:D}=Ia(n,l,C,p);return{x:T,y:D,textAnchor:"middle",verticalAnchor:"middle"}},w2=e=>"cx"in e&&It(e.cx),Xle=(e,t)=>{var{parentViewBox:r,offset:n,position:l}=e,i;r!=null&&!w2(r)&&(i=r);var{x:u,y:g,upperWidth:h,lowerWidth:p,height:y}=t,v=u,C=u+(h-p)/2,T=(v+C)/2,D=(h+p)/2,P=v+h/2,k=y>=0?1:-1,R=k*n,B=k>0?"end":"start",M=k>0?"start":"end",G=h>=0?1:-1,F=G*n,U=G>0?"end":"start",L=G>0?"start":"end";if(l==="top"){var V={x:v+h/2,y:g-R,textAnchor:"middle",verticalAnchor:B};return _a(_a({},V),i?{height:Math.max(g-i.y,0),width:h}:{})}if(l==="bottom"){var j={x:C+p/2,y:g+y+R,textAnchor:"middle",verticalAnchor:M};return _a(_a({},j),i?{height:Math.max(i.y+i.height-(g+y),0),width:p}:{})}if(l==="left"){var Y={x:T-F,y:g+y/2,textAnchor:U,verticalAnchor:"middle"};return _a(_a({},Y),i?{width:Math.max(Y.x-i.x,0),height:y}:{})}if(l==="right"){var H={x:T+D+F,y:g+y/2,textAnchor:L,verticalAnchor:"middle"};return _a(_a({},H),i?{width:Math.max(i.x+i.width-H.x,0),height:y}:{})}var q=i?{width:D,height:y}:{};return l==="insideLeft"?_a({x:T+F,y:g+y/2,textAnchor:L,verticalAnchor:"middle"},q):l==="insideRight"?_a({x:T+D-F,y:g+y/2,textAnchor:U,verticalAnchor:"middle"},q):l==="insideTop"?_a({x:v+h/2,y:g+R,textAnchor:"middle",verticalAnchor:M},q):l==="insideBottom"?_a({x:C+p/2,y:g+y-R,textAnchor:"middle",verticalAnchor:B},q):l==="insideTopLeft"?_a({x:v+F,y:g+R,textAnchor:L,verticalAnchor:M},q):l==="insideTopRight"?_a({x:v+h-F,y:g+R,textAnchor:U,verticalAnchor:M},q):l==="insideBottomLeft"?_a({x:C+F,y:g+y-R,textAnchor:L,verticalAnchor:B},q):l==="insideBottomRight"?_a({x:C+p-F,y:g+y-R,textAnchor:U,verticalAnchor:B},q):l&&typeof l=="object"&&(It(l.x)||Ci(l.x))&&(It(l.y)||Ci(l.y))?_a({x:u+cs(l.x,D),y:g+cs(l.y,y),textAnchor:"end",verticalAnchor:"end"},q):_a({x:P,y:g+y/2,textAnchor:"middle",verticalAnchor:"middle"},q)},Wle={angle:0,offset:5,zIndex:ll.label,position:"middle",textBreakAll:!1};function BR(e){var t=zs(e,Wle),{viewBox:r,position:n,value:l,children:i,content:u,className:g="",textBreakAll:h,labelRef:p}=t,y=Vle(),v=jle(),C=n==="center"?v:y??v,T,D,P;if(r==null?T=C:w2(r)?T=r:T=cI(r),!T||ms(l)&&ms(i)&&!w.isValidElement(u)&&typeof u!="function")return null;var k=_a(_a({},t),{},{viewBox:T});if(w.isValidElement(u)){var{labelRef:R}=k,B=Mle(k,Ile);return w.cloneElement(u,B)}if(typeof u=="function"){if(D=w.createElement(u,k),w.isValidElement(D))return D}else D=Hle(t);var M=Ls(t);if(w2(T)){if(n==="insideStart"||n==="insideEnd"||n==="end")return Gle(t,n,D,M,T);P=Yle(T,t.offset,t.position)}else P=Xle(t,T);return w.createElement(i0,{zIndex:t.zIndex},w.createElement(lS,Sp({ref:p,className:Ea("recharts-label",g)},M,P,{textAnchor:Ole(M.textAnchor)?M.textAnchor:P.textAnchor,breakAll:h}),D))}BR.displayName="Label";var Nv={},Sv={},G8;function Kle(){return G8||(G8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Sv)),Sv}var Cv={},Y8;function Zle(){return Y8||(Y8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Cv)),Cv}var X8;function Qle(){return X8||(X8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kle(),r=Zle(),n=Mw();function l(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=l})(Nv)),Nv}var Av,W8;function Jle(){return W8||(W8=1,Av=Qle().last),Av}var eie=Jle();const tie=jl(eie);var rie=["valueAccessor"],aie=["dataKey","clockWise","id","textBreakAll","zIndex"];function Cp(){return Cp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cp.apply(null,arguments)}function K8(e,t){if(e==null)return{};var r,n,l=nie(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function nie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var sie=e=>Array.isArray(e.value)?tie(e.value):e.value,FR=w.createContext(void 0);FR.Provider;var UR=w.createContext(void 0),lie=UR.Provider;function iie(){return w.useContext(FR)}function oie(){return w.useContext(UR)}function Ah(e){var{valueAccessor:t=sie}=e,r=K8(e,rie),{dataKey:n,clockWise:l,id:i,textBreakAll:u,zIndex:g}=r,h=K8(r,aie),p=iie(),y=oie(),v=p||y;return!v||!v.length?null:w.createElement(i0,{zIndex:g??ll.label},w.createElement(Mo,{className:"recharts-label-list"},v.map((C,T)=>{var D,P=ms(n)?t(C,T):va(C&&C.payload,n),k=ms(i)?{}:{id:"".concat(i,"-").concat(T)};return w.createElement(BR,Cp({key:"label-".concat(T)},Ls(C),h,k,{fill:(D=r.fill)!==null&&D!==void 0?D:C.fill,parentViewBox:C.parentViewBox,value:P,textBreakAll:u,viewBox:C.viewBox,index:T,zIndex:0}))})))}Ah.displayName="LabelList";function cie(e){var{label:t}=e;return t?t===!0?w.createElement(Ah,{key:"labelList-implicit"}):w.isValidElement(t)||$le(t)?w.createElement(Ah,{key:"labelList-implicit",content:t}):typeof t=="object"?w.createElement(Ah,Cp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var jR=e=>e.graphicalItems.polarItems,uie=Me([ra,Qf],kN),Iy=Me([jR,la,uie],PN),die=Me([Iy],IN),My=Me([die,vN],MN),mie=Me([My,la,Iy],LN);Me([My,la,Iy],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(l=>{var i,u=va(n,(i=t.dataKey)!==null&&i!==void 0?i:l.dataKey);return{value:u,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(n=>({value:va(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var Z8=()=>{},fie=Me([My,la,Iy,Dy,ra],jN),gie=Me([la,FN,UN,Z8,fie,Z8,Lr,ra],zN),zR=Me([la,Lr,My,mie,Zf,ra,gie],VN),hie=Me([zR,la,Pd],qN);Me([la,zR,hie,ra],YN);var pie={radiusAxis:{},angleAxis:{}},VR=qn({name:"polarAxis",initialState:pie,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:M0e,removeRadiusAxis:R0e,addAngleAxis:L0e,removeAngleAxis:B0e}=VR.actions,yie=VR.reducer;function Q8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function J8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q8(Object(r),!0).forEach(function(n){xie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xie(e,t,r){return(t=bie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bie(e){var t=vie(e,"string");return typeof t=="symbol"?t:t+""}function vie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Eie=(e,t)=>t,iS=Me([jR,Eie],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),wie=[],oS=(e,t,r)=>r?.length===0?wie:r,HR=Me([vN,iS,oS],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var l;if(t?.data!=null&&t.data.length>0?l=t.data:l=n,(!l||!l.length)&&r!=null&&(l=r.map(i=>J8(J8({},t.presentationProps),i.props))),l!=null)return l}}),Nie=Me([HR,iS,oS],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,l)=>{var i,u=va(n,t.nameKey,t.name),g;return r!=null&&(i=r[l])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?g=r[l].props.fill:typeof n=="object"&&n!=null&&"fill"in n?g=n.fill:g=t.fill,{value:rI(u,t.dataKey),color:g,payload:n,type:t.legendType}})}),Sie=Me([HR,iS,oS,Za],(e,t,r,n)=>{if(!(t==null||e==null))return Toe({offset:n,pieSettings:t,displayedData:e,cells:r})}),Tv={exports:{}},wr={};var eO;function Cie(){if(eO)return wr;eO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),u=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),C=Symbol.for("react.view_transition"),T=Symbol.for("react.client.reference");function D(P){if(typeof P=="object"&&P!==null){var k=P.$$typeof;switch(k){case e:switch(P=P.type,P){case r:case l:case n:case h:case p:case C:return P;default:switch(P=P&&P.$$typeof,P){case u:case g:case v:case y:return P;case i:return P;default:return k}}case t:return k}}}return wr.ContextConsumer=i,wr.ContextProvider=u,wr.Element=e,wr.ForwardRef=g,wr.Fragment=r,wr.Lazy=v,wr.Memo=y,wr.Portal=t,wr.Profiler=l,wr.StrictMode=n,wr.Suspense=h,wr.SuspenseList=p,wr.isContextConsumer=function(P){return D(P)===i},wr.isContextProvider=function(P){return D(P)===u},wr.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===e},wr.isForwardRef=function(P){return D(P)===g},wr.isFragment=function(P){return D(P)===r},wr.isLazy=function(P){return D(P)===v},wr.isMemo=function(P){return D(P)===y},wr.isPortal=function(P){return D(P)===t},wr.isProfiler=function(P){return D(P)===l},wr.isStrictMode=function(P){return D(P)===n},wr.isSuspense=function(P){return D(P)===h},wr.isSuspenseList=function(P){return D(P)===p},wr.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===r||P===l||P===n||P===h||P===p||typeof P=="object"&&P!==null&&(P.$$typeof===v||P.$$typeof===y||P.$$typeof===u||P.$$typeof===i||P.$$typeof===g||P.$$typeof===T||P.getModuleId!==void 0)},wr.typeOf=D,wr}var tO;function Aie(){return tO||(tO=1,Tv.exports=Cie()),Tv.exports}var Tie=Aie(),rO=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",aO=null,Ov=null,$R=e=>{if(e===aO&&Array.isArray(Ov))return Ov;var t=[];return w.Children.forEach(e,r=>{ms(r)||(Tie.isFragment(r)?t=t.concat($R(r.props.children)):t.push(r))}),Ov=t,aO=e,t};function qR(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(l=>rO(l)):n=[rO(t)],$R(e).forEach(l=>{var i=mf(l,"type.displayName")||mf(l,"type.name");i&&n.indexOf(i)!==-1&&r.push(l)}),r}var Dv={},nO;function Oie(){return nO||(nO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const l=r[Symbol.toStringTag];return l==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${l}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(Dv)),Dv}var _v,sO;function Die(){return sO||(sO=1,_v=Oie().isPlainObject),_v}var _ie=Die();const kie=jl(_ie);function lO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function iO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lO(Object(r),!0).forEach(function(n){Pie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pie(e,t,r){return(t=Iie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iie(e){var t=Mie(e,"string");return typeof t=="symbol"?t:t+""}function Mie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ap(){return Ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ap.apply(null,arguments)}var oO=(e,t,r,n,l)=>{var i=r-n,u;return u="M ".concat(e,",").concat(t),u+="L ".concat(e+r,",").concat(t),u+="L ".concat(e+r-i/2,",").concat(t+l),u+="L ".concat(e+r-i/2-n,",").concat(t+l),u+="L ".concat(e,",").concat(t," Z"),u},Rie={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Lie=e=>{var t=zs(e,Rie),{x:r,y:n,upperWidth:l,lowerWidth:i,height:u,className:g}=t,{animationEasing:h,animationDuration:p,animationBegin:y,isUpdateAnimationActive:v}=t,C=w.useRef(null),[T,D]=w.useState(-1),P=w.useRef(l),k=w.useRef(i),R=w.useRef(u),B=w.useRef(r),M=w.useRef(n),G=Kw(e,"trapezoid-");if(w.useEffect(()=>{if(C.current&&C.current.getTotalLength)try{var ue=C.current.getTotalLength();ue&&D(ue)}catch{}},[]),r!==+r||n!==+n||l!==+l||i!==+i||u!==+u||l===0&&i===0||u===0)return null;var F=Ea("recharts-trapezoid",g);if(!v)return w.createElement("g",null,w.createElement("path",Ap({},Ls(t),{className:F,d:oO(r,n,l,i,u)})));var U=P.current,L=k.current,V=R.current,j=B.current,Y=M.current,H="0px ".concat(T===-1?1:T,"px"),q="".concat(T,"px 0px"),le=EI(["strokeDasharray"],p,h);return w.createElement(Ww,{animationId:G,key:G,canBegin:T>0,duration:p,easing:h,isActive:v,begin:y},ue=>{var re=rl(U,l,ue),J=rl(L,i,ue),ae=rl(V,u,ue),pe=rl(j,r,ue),xe=rl(Y,n,ue);C.current&&(P.current=re,k.current=J,R.current=ae,B.current=pe,M.current=xe);var ee=ue>0?{transition:le,strokeDasharray:q}:{strokeDasharray:H};return w.createElement("path",Ap({},Ls(t),{className:F,d:oO(pe,xe,re,J,ae),ref:C,style:iO(iO({},ee),t.style)}))})},Bie=["option","shapeType","propTransformer","activeClassName"];function Fie(e,t){if(e==null)return{};var r,n,l=Uie(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Uie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function cO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Tp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cO(Object(r),!0).forEach(function(n){jie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jie(e,t,r){return(t=zie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zie(e){var t=Vie(e,"string");return typeof t=="symbol"?t:t+""}function Vie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hie(e,t){return Tp(Tp({},t),e)}function $ie(e,t){return e==="symbols"}function uO(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return w.createElement(CI,r);case"trapezoid":return w.createElement(Lie,r);case"sector":return w.createElement(DI,r);case"symbols":if($ie(t))return w.createElement(Iw,r);break;case"curve":return w.createElement(Xw,r);default:return null}}function qie(e){return w.isValidElement(e)?e.props:e}function Gie(e){var{option:t,shapeType:r,propTransformer:n=Hie,activeClassName:l="recharts-active-shape"}=e,i=Fie(e,Bie),u;if(w.isValidElement(t))u=w.cloneElement(t,Tp(Tp({},i),qie(t)));else if(typeof t=="function")u=t(i,i.index);else if(kie(t)&&typeof t!="boolean"){var g=n(t,i);u=w.createElement(uO,{shapeType:r,elementProps:g})}else{var h=i;u=w.createElement(uO,{shapeType:r,elementProps:h})}return i.isActive?w.createElement(Mo,{className:l},u):u}var Yie=(e,t,r)=>{var n=wa();return(l,i)=>u=>{e?.(l,i,u),n(sR({activeIndex:String(i),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:r}))}},Xie=e=>{var t=wa();return(r,n)=>l=>{e?.(r,n,l),t(rne())}},Wie=(e,t,r)=>{var n=wa();return(l,i)=>u=>{e?.(l,i,u),n(ane({activeIndex:String(i),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:r}))}};function Kie(e){var{tooltipEntrySettings:t}=e,r=wa(),n=Uo(),l=w.useRef(null);return w.useLayoutEffect(()=>{n||(l.current===null?r(Qae(t)):l.current!==t&&r(Jae({prev:l.current,next:t})),l.current=t)},[t,r,n]),w.useLayoutEffect(()=>()=>{l.current&&(r(ene(l.current)),l.current=null)},[r]),null}function Zie(e){var{legendPayload:t}=e,r=wa(),n=Rt(Lr),l=w.useRef(null);return w.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(l.current===null?r(bQ(t)):l.current!==t&&r(vQ({prev:l.current,next:t})),l.current=t)},[r,n,t]),w.useLayoutEffect(()=>()=>{l.current&&(r(EQ(l.current)),l.current=null)},[r]),null}var kv,Qie=()=>{var[e]=w.useState(()=>ff("uid-"));return e},Jie=(kv=FL.useId)!==null&&kv!==void 0?kv:Qie;function GR(e,t){var r=Jie();return t||(e?"".concat(e,"-").concat(r):r)}var eoe=w.createContext(void 0),toe=e=>{var{id:t,type:r,children:n}=e,l=GR("recharts-".concat(r),t);return w.createElement(eoe.Provider,{value:l},n(l))},roe={cartesianItems:[],polarItems:[]},YR=qn({name:"graphicalItems",initialState:roe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Kr()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,l=cl(e).cartesianItems.indexOf(r);l>-1&&(e.cartesianItems[l]=n)},prepare:Kr()},removeCartesianGraphicalItem:{reducer(e,t){var r=cl(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Kr()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Kr()},removePolarGraphicalItem:{reducer(e,t){var r=cl(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Kr()}}}),{addCartesianGraphicalItem:F0e,replaceCartesianGraphicalItem:U0e,removeCartesianGraphicalItem:j0e,addPolarGraphicalItem:aoe,removePolarGraphicalItem:noe}=YR.actions,soe=YR.reducer;function loe(e){var t=wa();return w.useLayoutEffect(()=>(t(aoe(e)),()=>{t(noe(e))}),[t,e]),null}var ioe=["key"],ooe=["onMouseEnter","onClick","onMouseLeave"],coe=["id"],uoe=["id"];function dO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function ga(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dO(Object(r),!0).forEach(function(n){doe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function doe(e,t,r){return(t=moe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function moe(e){var t=foe(e,"string");return typeof t=="symbol"?t:t+""}function foe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bo(){return Bo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bo.apply(null,arguments)}function Ry(e,t){if(e==null)return{};var r,n,l=goe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function goe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function hoe(e){var t=w.useMemo(()=>qR(e.children,gd),[e.children]),r=Rt(n=>Nie(n,e.id,t));return r==null?null:w.createElement(Zie,{legendPayload:r})}var poe=w.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:l,strokeWidth:i,fill:u,name:g,hide:h,tooltipType:p}=e,y={dataDefinedOnItem:n.map(v=>v.tooltipPayload),positions:n.map(v=>v.tooltipPosition),settings:{stroke:l,strokeWidth:i,fill:u,dataKey:t,nameKey:r,name:rI(g,t),hide:h,type:p,color:u,unit:""}};return w.createElement(Kie,{tooltipEntrySettings:y})}),yoe=(e,t)=>e>t?"start":e<t?"end":"middle",xoe=(e,t,r)=>cs(typeof t=="function"?t(e):t,r,r*.8),boe=(e,t,r)=>{var{top:n,left:l,width:i,height:u}=t,g=AI(i,u),h=l+cs(e.cx,i,i/2),p=n+cs(e.cy,u,u/2),y=cs(e.innerRadius,g,0),v=xoe(r,e.outerRadius,g),C=e.maxRadius||Math.sqrt(i*i+u*u)/2;return{cx:h,cy:p,innerRadius:y,outerRadius:v,maxRadius:C}},voe=(e,t)=>{var r=jn(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function Eoe(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var woe=(e,t)=>{if(w.isValidElement(e))return w.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Ea("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,l=Ry(t,ioe);return w.createElement(Xw,Bo({},l,{type:"linear",className:r}))},Noe=(e,t,r)=>{if(w.isValidElement(e))return w.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),w.isValidElement(n)))return n;var l=Ea("recharts-pie-label-text",Eoe(e));return w.createElement(lS,Bo({},t,{alignmentBaseline:"middle",className:l}),n)};function Soe(e){var{sectors:t,props:r,showLabels:n}=e,{label:l,labelLine:i,dataKey:u}=r;if(!n||!l||!t)return null;var g=sd(r),h=TE(l),p=TE(i),y=typeof l=="object"&&"offsetRadius"in l&&typeof l.offsetRadius=="number"&&l.offsetRadius||20,v=t.map((C,T)=>{var D=(C.startAngle+C.endAngle)/2,P=Ia(C.cx,C.cy,C.outerRadius+y,D),k=ga(ga(ga(ga({},g),C),{},{stroke:"none"},h),{},{index:T,textAnchor:yoe(P.x,C.cx)},P),R=ga(ga(ga(ga({},g),C),{},{fill:"none",stroke:C.fill},p),{},{index:T,points:[Ia(C.cx,C.cy,C.outerRadius,D),P],key:"line"});return w.createElement(i0,{zIndex:ll.label,key:"label-".concat(C.startAngle,"-").concat(C.endAngle,"-").concat(C.midAngle,"-").concat(T)},w.createElement(Mo,null,i&&woe(i,R),Noe(l,k,va(C,u))))});return w.createElement(Mo,{className:"recharts-pie-labels"},v)}function Coe(e){var{sectors:t,props:r,showLabels:n}=e,{label:l}=r;return typeof l=="object"&&l!=null&&"position"in l?w.createElement(cie,{label:l}):w.createElement(Soe,{sectors:t,props:r,showLabels:n})}function Aoe(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:l,shape:i,id:u}=e,g=Rt(Af),h=Rt(bR),p=Rt(Vne),{onMouseEnter:y,onClick:v,onMouseLeave:C}=l,T=Ry(l,ooe),D=Yie(y,l.dataKey,u),P=Xie(C),k=Wie(v,l.dataKey,u);return t==null||t.length===0?null:w.createElement(w.Fragment,null,t.map((R,B)=>{if(R?.startAngle===0&&R?.endAngle===0&&t.length!==1)return null;var M=p==null||p===u,G=String(B)===g&&(h==null||l.dataKey===h)&&M,F=g?n:null,U=r&&G?r:F,L=ga(ga({},R),{},{stroke:R.stroke,tabIndex:-1,[nI]:B,[sI]:l.dataKey});return w.createElement(Mo,Bo({key:"sector-".concat(R?.startAngle,"-").concat(R?.endAngle,"-").concat(R.midAngle,"-").concat(B),tabIndex:-1,className:"recharts-pie-sector"},u7(T,R,B),{onMouseEnter:D(R,B),onMouseLeave:P(R,B),onClick:k(R,B)}),w.createElement(Gie,Bo({option:i??U,index:B,shapeType:"sector",isActive:G},L)))}))}function Toe(e){var t,{pieSettings:r,displayedData:n,cells:l,offset:i}=e,{cornerRadius:u,startAngle:g,endAngle:h,dataKey:p,nameKey:y,tooltipType:v}=r,C=Math.abs(r.minAngle),T=voe(g,h),D=Math.abs(T),P=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,k=n.filter(U=>va(U,p,0)!==0).length,R=(D>=360?k:k-1)*P,B=D-k*C-R,M=n.reduce((U,L)=>{var V=va(L,p,0);return U+(It(V)?V:0)},0),G;if(M>0){var F;G=n.map((U,L)=>{var V=va(U,p,0),j=va(U,y,L),Y=boe(r,i,U),H=(It(V)?V:0)/M,q,le=ga(ga({},U),l&&l[L]&&l[L].props);L?q=F.endAngle+jn(T)*P*(V!==0?1:0):q=g;var ue=q+jn(T)*((V!==0?C:0)+H*B),re=(q+ue)/2,J=(Y.innerRadius+Y.outerRadius)/2,ae=[{name:j,value:V,payload:le,dataKey:p,type:v}],pe=Ia(Y.cx,Y.cy,J,re);return F=ga(ga(ga(ga({},r.presentationProps),{},{percent:H,cornerRadius:typeof u=="string"?parseFloat(u):u,name:j,tooltipPayload:ae,midAngle:re,middleRadius:J,tooltipPosition:pe},le),Y),{},{value:V,dataKey:p,startAngle:q,endAngle:ue,payload:le,paddingAngle:jn(T)*P}),F})}return G}function Ooe(e){var{showLabels:t,sectors:r,children:n}=e,l=w.useMemo(()=>!t||!r?[]:r.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[r,t]);return w.createElement(lie,{value:t?l:void 0},n)}function Doe(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:l,isAnimationActive:i,animationBegin:u,animationDuration:g,animationEasing:h,activeShape:p,inactiveShape:y,onAnimationStart:v,onAnimationEnd:C}=t,T=Kw(t,"recharts-pie-"),D=r.current,[P,k]=w.useState(!1),R=w.useCallback(()=>{typeof C=="function"&&C(),k(!1)},[C]),B=w.useCallback(()=>{typeof v=="function"&&v(),k(!0)},[v]);return w.createElement(Ooe,{showLabels:!P,sectors:l},w.createElement(Ww,{animationId:T,begin:u,duration:g,isActive:i,easing:h,onAnimationStart:B,onAnimationEnd:R,key:T},M=>{var G=[],F=l&&l[0],U=F?.startAngle;return l?.forEach((L,V)=>{var j=D&&D[V],Y=V>0?mf(L,"paddingAngle",0):0;if(j){var H=rl(j.endAngle-j.startAngle,L.endAngle-L.startAngle,M),q=ga(ga({},L),{},{startAngle:U+Y,endAngle:U+H+Y});G.push(q),U=q.endAngle}else{var{endAngle:le,startAngle:ue}=L,re=rl(0,le-ue,M),J=ga(ga({},L),{},{startAngle:U+Y,endAngle:U+re+Y});G.push(J),U=J.endAngle}}),r.current=G,w.createElement(Mo,null,w.createElement(Aoe,{sectors:G,activeShape:p,inactiveShape:y,allOtherPieProps:t,shape:t.shape,id:n}))}),w.createElement(Coe,{showLabels:!P,sectors:l,props:t}),t.children)}var _oe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ll.area};function koe(e){var{id:t}=e,r=Ry(e,coe),{hide:n,className:l,rootTabIndex:i}=e,u=w.useMemo(()=>qR(e.children,gd),[e.children]),g=Rt(y=>Sie(y,t,u)),h=w.useRef(null),p=Ea("recharts-pie",l);return n||g==null?(h.current=null,w.createElement(Mo,{tabIndex:i,className:p})):w.createElement(i0,{zIndex:e.zIndex},w.createElement(poe,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:g,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),w.createElement(Mo,{tabIndex:i,className:p},w.createElement(Doe,{props:ga(ga({},r),{},{sectors:g}),previousSectorsRef:h,id:t})))}function Op(e){var t=zs(e,_oe),{id:r}=t,n=Ry(t,uoe),l=sd(n);return w.createElement(toe,{id:r,type:"pie"},i=>w.createElement(w.Fragment,null,w.createElement(loe,{type:"pie",id:i,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:l,maxRadius:t.maxRadius}),w.createElement(hoe,Bo({},n,{id:i})),w.createElement(koe,Bo({},n,{id:i}))))}Op.displayName="Pie";function mO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function fO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mO(Object(r),!0).forEach(function(n){Poe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Poe(e,t,r){return(t=Ioe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ioe(e){var t=Moe(e,"string");return typeof t=="symbol"?t:t+""}function Moe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Roe={xAxis:{},yAxis:{},zAxis:{}},XR=qn({name:"cartesianAxis",initialState:Roe,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Kr()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Kr()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Kr()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Kr()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Kr()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Kr()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Kr()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Kr()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Kr()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,l=e.yAxis[r];if(l){var i=l.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==l.width&&Math.abs(n-i[0])<=1)return;var u=[...i,n].slice(-3);e.yAxis[r]=fO(fO({},e.yAxis[r]),{},{width:n,widthHistory:u})}}}}),{addXAxis:z0e,replaceXAxis:V0e,removeXAxis:H0e,addYAxis:$0e,replaceYAxis:q0e,removeYAxis:G0e,addZAxis:Y0e,replaceZAxis:X0e,removeZAxis:W0e,updateYAxisWidth:K0e}=XR.actions,Loe=XR.reducer,Boe=Me([Za],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Foe=Me([Boe,Pi,Ii],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Uoe=()=>Rt(Foe),joe={},WR=qn({name:"errorBars",initialState:joe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:l}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?l:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(l=>l.dataKey!==n.dataKey||l.direction!==n.direction))}}}),{addErrorBar:Z0e,replaceErrorBar:Q0e,removeErrorBar:J0e}=WR.actions,zoe=WR.reducer,Pv={exports:{}},Iv={};var gO;function Voe(){if(gO)return Iv;gO=1;var e=hd();function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,l=e.useRef,i=e.useEffect,u=e.useMemo,g=e.useDebugValue;return Iv.useSyncExternalStoreWithSelector=function(h,p,y,v,C){var T=l(null);if(T.current===null){var D={hasValue:!1,value:null};T.current=D}else D=T.current;T=u(function(){function k(F){if(!R){if(R=!0,B=F,F=v(F),C!==void 0&&D.hasValue){var U=D.value;if(C(U,F))return M=U}return M=F}if(U=M,r(B,F))return U;var L=v(F);return C!==void 0&&C(U,L)?(B=F,U):(B=F,M=L)}var R=!1,B,M,G=y===void 0?null:y;return[function(){return k(p())},G===null?void 0:function(){return k(G())}]},[p,y,v,C]);var P=n(h,T[0],T[1]);return i(function(){D.hasValue=!0,D.value=P},[P]),g(P),P},Iv}var hO;function Hoe(){return hO||(hO=1,Pv.exports=Voe()),Pv.exports}Hoe();function $oe(e){e()}function qoe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){$oe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const l=t={callback:r,next:null,prev:t};return l.prev?l.prev.next=l:e=l,function(){!n||e===null||(n=!1,l.next?l.next.prev=l.prev:t=l.prev,l.prev?l.prev.next=l.next:e=l.next)}}}}var pO={notify(){},get:()=>[]};function Goe(e,t){let r,n=pO,l=0,i=!1;function u(P){y();const k=n.subscribe(P);let R=!1;return()=>{R||(R=!0,k(),v())}}function g(){n.notify()}function h(){D.onStateChange&&D.onStateChange()}function p(){return i}function y(){l++,r||(r=e.subscribe(h),n=qoe())}function v(){l--,r&&l===0&&(r(),r=void 0,n.clear(),n=pO)}function C(){i||(i=!0,y())}function T(){i&&(i=!1,v())}const D={addNestedSub:u,notifyNestedSubs:g,handleChangeWrapper:h,isSubscribed:p,trySubscribe:C,tryUnsubscribe:T,getListeners:()=>n};return D}var Yoe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Xoe=Yoe(),Woe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Koe=Woe(),Zoe=()=>Xoe||Koe?w.useLayoutEffect:w.useEffect,Qoe=Zoe();function yO(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Joe(e,t){if(yO(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let l=0;l<r.length;l++)if(!Object.prototype.hasOwnProperty.call(t,r[l])||!yO(e[r[l]],t[r[l]]))return!1;return!0}var ece=Symbol.for("react-redux-context"),tce=typeof globalThis<"u"?globalThis:{};function rce(){if(!w.createContext)return{};const e=tce[ece]??=new Map;let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var ace=rce();function nce(e){const{children:t,context:r,serverState:n,store:l}=e,i=w.useMemo(()=>{const h=Goe(l);return{store:l,subscription:h,getServerState:n?()=>n:void 0}},[l,n]),u=w.useMemo(()=>l.getState(),[l]);Qoe(()=>{const{subscription:h}=i;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),u!==l.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[i,u]);const g=r||ace;return w.createElement(g.Provider,{value:i},t)}var sce=nce,lce=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function ice(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function oce(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(lce.has(n)){if(e[n]==null&&t[n]==null)continue;if(!Joe(e[n],t[n]))return!1}else if(!ice(e[n],t[n]))return!1;return!0}var cce=e=>{var{chartData:t}=e,r=wa(),n=Uo();return w.useEffect(()=>n?()=>{}:(r(D8(t)),()=>{r(D8(void 0))}),[t,r,n]),null},xO={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},KR=qn({name:"brush",initialState:xO,reducers:{setBrushSettings(e,t){return t.payload==null?xO:t.payload}}}),{setBrushSettings:ege}=KR.actions,uce=KR.reducer,dce={dots:[],areas:[],lines:[]},ZR=qn({name:"referenceElements",initialState:dce,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=cl(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=cl(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=cl(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:tge,removeDot:rge,addArea:age,removeArea:nge,addLine:sge,removeLine:lge}=ZR.actions,mce=ZR.reducer,fce=w.createContext(void 0),gce=e=>{var{children:t}=e,[r]=w.useState("".concat(ff("recharts"),"-clip")),n=Uoe();if(n==null)return null;var{x:l,y:i,width:u,height:g}=n;return w.createElement(fce.Provider,{value:r},w.createElement("defs",null,w.createElement("clipPath",{id:r},w.createElement("rect",{x:l,y:i,height:g,width:u}))),t)},hce=(e,t)=>t,cS=Me([hce,Lr,PM,Ha,hR,Ri,sse,Za],mse),uS=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},QR=Bs("mouseClick"),JR=$f();JR.startListening({actionCreator:QR,effect:(e,t)=>{var r=e.payload,n=cS(t.getState(),uS(r));n?.activeIndex!=null&&t.dispatch(nne({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var N2=Bs("mouseMove"),e9=$f(),Yg=null;e9.startListening({actionCreator:N2,effect:(e,t)=>{var r=e.payload;Yg!==null&&cancelAnimationFrame(Yg);var n=uS(r);Yg=requestAnimationFrame(()=>{var l=t.getState(),i=KN(l,l.tooltip.settings.shared);if(i==="axis"){var u=cS(l,n);u?.activeIndex!=null?t.dispatch(iR({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate})):t.dispatch(lR())}Yg=null})}});var bO={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},t9=qn({name:"rootProps",initialState:bO,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:bO.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),pce=t9.reducer,{updateOptions:yce}=t9.actions,r9=qn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:xce}=r9.actions,bce=r9.reducer,a9=Bs("keyDown"),n9=Bs("focus"),dS=$f();dS.startListening({actionCreator:a9,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:l}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var u=ZN(l,Md(r),t0(r),s0(r)),g=u==null?-1:Number(u);if(!(!Number.isFinite(g)||g<0)){var h=Ri(r);if(i==="Enter"){var p=Np(r,"axis","hover",String(l.index));t.dispatch(y2({active:!l.active,activeIndex:l.index,activeDataKey:l.dataKey,activeCoordinate:p}));return}var y=Xae(r),v=y==="left-to-right"?1:-1,C=i==="ArrowRight"?1:-1,T=g+C*v;if(!(h==null||T>=h.length||T<0)){var D=Np(r,"axis","hover",String(T));t.dispatch(y2({active:!0,activeIndex:T.toString(),activeDataKey:void 0,activeCoordinate:D}))}}}}}});dS.startListening({actionCreator:n9,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:l}=r.tooltip;if(!l.active&&l.index==null){var i="0",u=Np(r,"axis","hover",String(i));t.dispatch(y2({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:u}))}}}});var Os=Bs("externalEvent"),s9=$f(),Mv=new Map;s9.startListening({actionCreator:Os,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var l=n.type,i=Mv.get(l);i!==void 0&&cancelAnimationFrame(i);var u=requestAnimationFrame(()=>{try{var g=t.getState(),h={activeCoordinate:$ne(g),activeDataKey:bR(g),activeIndex:Af(g),activeLabel:xR(g),activeTooltipIndex:Af(g),isTooltipActive:qne(g)};r(h,n)}finally{Mv.delete(l)}});Mv.set(l,u)}}});var vce=Me([Id],e=>e.tooltipItemPayloads),Ece=Me([vce,a0,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var l=e.find(g=>g.settings.dataKey===n);if(l!=null){var{positions:i}=l;if(i!=null){var u=t(i,r);return u}}}),l9=Bs("touchMove"),i9=$f();i9.startListening({actionCreator:l9,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),l=KN(n,n.tooltip.settings.shared);if(l==="axis"){var i=cS(n,uS({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));i?.activeIndex!=null&&t.dispatch(iR({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(l==="item"){var u,g=r.touches[0];if(document.elementFromPoint==null)return;var h=document.elementFromPoint(g.clientX,g.clientY);if(!h||!h.getAttribute)return;var p=h.getAttribute(nI),y=(u=h.getAttribute(sI))!==null&&u!==void 0?u:void 0,v=Ece(t.getState(),p,y);t.dispatch(sR({activeDataKey:y,activeIndex:p,activeCoordinate:v}))}}}});var wce=T7({brush:uce,cartesianAxis:Loe,chartData:$se,errorBars:zoe,graphicalItems:soe,layout:fZ,legend:wQ,options:Use,polarAxis:yie,polarOptions:bce,referenceElements:mce,rootProps:pce,tooltip:sne,zIndex:Ase}),Nce=function(t){return FK({reducer:wce,preloadedState:t,middleware:r=>{var n;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([JR.middleware,e9.middleware,dS.middleware,s9.middleware,i9.middleware])},enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(V7({type:"raf"}))},devTools:yy.devToolsEnabled})};function Sce(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,l=Uo(),i=w.useRef(null);if(l)return r;i.current==null&&(i.current=Nce(t));var u=Rw;return w.createElement(sce,{context:u,store:i.current},r)}function Cce(e){var{layout:t,margin:r}=e,n=wa(),l=Uo();return w.useEffect(()=>{l||(n(uZ(t)),n(cZ(r)))},[n,l,t,r]),null}var Ace=w.memo(Cce,oce);function Tce(e){var t=wa();return w.useEffect(()=>{t(yce(e))},[t,e]),null}function vO(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",l=GR("".concat(n).concat(t)),i=wa();return w.useLayoutEffect(()=>(i(Sse({zIndex:t,elementId:l,isPanorama:r})),()=>{i(Cse({zIndex:t,isPanorama:r}))}),[i,t,l,r]),w.createElement("g",{tabIndex:-1,id:l})}function EO(e){var{children:t,isPanorama:r}=e,n=Rt(gse);if(!n||n.length===0)return t;var l=n.filter(u=>u<0),i=n.filter(u=>u>0);return w.createElement(w.Fragment,null,l.map(u=>w.createElement(vO,{key:u,zIndex:u,isPanorama:r})),t,i.map(u=>w.createElement(vO,{key:u,zIndex:u,isPanorama:r})))}var Oce=["children"];function Dce(e,t){if(e==null)return{};var r,n,l=_ce(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function _ce(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Dp(){return Dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dp.apply(null,arguments)}var kce={width:"100%",height:"100%",display:"block"},Pce=w.forwardRef((e,t)=>{var r=uI(),n=dI(),l=vI();if(!Ro(r)||!Ro(n))return null;var{children:i,otherAttributes:u,title:g,desc:h}=e,p,y;return u!=null&&(typeof u.tabIndex=="number"?p=u.tabIndex:p=l?0:void 0,typeof u.role=="string"?y=u.role:y=l?"application":void 0),w.createElement(Aw,Dp({},u,{title:g,desc:h,role:y,tabIndex:p,width:r,height:n,style:kce,ref:t}),i)}),Ice=e=>{var{children:t}=e,r=Rt(dy);if(!r)return null;var{width:n,height:l,y:i,x:u}=r;return w.createElement(Aw,{width:n,height:l,x:u,y:i},t)},wO=w.forwardRef((e,t)=>{var{children:r}=e,n=Dce(e,Oce),l=Uo();return l?w.createElement(Ice,null,w.createElement(EO,{isPanorama:!0},r)):w.createElement(Pce,Dp({ref:t},n),w.createElement(EO,{isPanorama:!1},r))});function Mce(){var e=wa(),[t,r]=w.useState(null),n=Rt(OZ);return w.useEffect(()=>{if(t!=null){var l=t.getBoundingClientRect(),i=l.width/t.offsetWidth;Ka(i)&&i!==n&&e(mZ(i))}},[t,e,n]),r}function NO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Rce(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NO(Object(r),!0).forEach(function(n){Lce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lce(e,t,r){return(t=Bce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bce(e){var t=Fce(e,"string");return typeof t=="symbol"?t:t+""}function Fce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zc(){return zc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zc.apply(null,arguments)}var Uce=()=>(Jse(),null);function _p(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var jce=w.forwardRef((e,t)=>{var r,n,l=w.useRef(null),[i,u]=w.useState({containerWidth:_p((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:_p((n=e.style)===null||n===void 0?void 0:n.height)}),g=w.useCallback((p,y)=>{u(v=>{var C=Math.round(p),T=Math.round(y);return v.containerWidth===C&&v.containerHeight===T?v:{containerWidth:C,containerHeight:T}})},[]),h=w.useCallback(p=>{if(typeof t=="function"&&t(p),p!=null&&typeof ResizeObserver<"u"){var{width:y,height:v}=p.getBoundingClientRect();g(y,v);var C=D=>{var{width:P,height:k}=D[0].contentRect;g(P,k)},T=new ResizeObserver(C);T.observe(p),l.current=T}},[t,g]);return w.useEffect(()=>()=>{var p=l.current;p?.disconnect()},[g]),w.createElement(w.Fragment,null,w.createElement(fy,{width:i.containerWidth,height:i.containerHeight}),w.createElement("div",zc({ref:h},e)))}),zce=w.forwardRef((e,t)=>{var{width:r,height:n}=e,[l,i]=w.useState({containerWidth:_p(r),containerHeight:_p(n)}),u=w.useCallback((h,p)=>{i(y=>{var v=Math.round(h),C=Math.round(p);return y.containerWidth===v&&y.containerHeight===C?y:{containerWidth:v,containerHeight:C}})},[]),g=w.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null){var{width:p,height:y}=h.getBoundingClientRect();u(p,y)}},[t,u]);return w.createElement(w.Fragment,null,w.createElement(fy,{width:l.containerWidth,height:l.containerHeight}),w.createElement("div",zc({ref:g},e)))}),Vce=w.forwardRef((e,t)=>{var{width:r,height:n}=e;return w.createElement(w.Fragment,null,w.createElement(fy,{width:r,height:n}),w.createElement("div",zc({ref:t},e)))}),Hce=w.forwardRef((e,t)=>{var{width:r,height:n}=e;return Ci(r)||Ci(n)?w.createElement(zce,zc({},e,{ref:t})):w.createElement(Vce,zc({},e,{ref:t}))});function $ce(e){return e===!0?jce:Hce}var qce=w.forwardRef((e,t)=>{var{children:r,className:n,height:l,onClick:i,onContextMenu:u,onDoubleClick:g,onMouseDown:h,onMouseEnter:p,onMouseLeave:y,onMouseMove:v,onMouseUp:C,onTouchEnd:T,onTouchMove:D,onTouchStart:P,style:k,width:R,responsive:B,dispatchTouchEvents:M=!0}=e,G=w.useRef(null),F=wa(),[U,L]=w.useState(null),[V,j]=w.useState(null),Y=Mce(),H=$w(),q=H?.width>0?H.width:R,le=H?.height>0?H.height:l,ue=w.useCallback(ve=>{Y(ve),typeof t=="function"&&t(ve),L(ve),j(ve),ve!=null&&(G.current=ve)},[Y,t,L,j]),re=w.useCallback(ve=>{F(QR(ve)),F(Os({handler:i,reactEvent:ve}))},[F,i]),J=w.useCallback(ve=>{F(N2(ve)),F(Os({handler:p,reactEvent:ve}))},[F,p]),ae=w.useCallback(ve=>{F(lR()),F(Os({handler:y,reactEvent:ve}))},[F,y]),pe=w.useCallback(ve=>{F(N2(ve)),F(Os({handler:v,reactEvent:ve}))},[F,v]),xe=w.useCallback(()=>{F(n9())},[F]),ee=w.useCallback(ve=>{F(a9(ve.key))},[F]),K=w.useCallback(ve=>{F(Os({handler:u,reactEvent:ve}))},[F,u]),te=w.useCallback(ve=>{F(Os({handler:g,reactEvent:ve}))},[F,g]),ge=w.useCallback(ve=>{F(Os({handler:h,reactEvent:ve}))},[F,h]),oe=w.useCallback(ve=>{F(Os({handler:C,reactEvent:ve}))},[F,C]),Ne=w.useCallback(ve=>{F(Os({handler:P,reactEvent:ve}))},[F,P]),ie=w.useCallback(ve=>{M&&F(l9(ve)),F(Os({handler:D,reactEvent:ve}))},[F,M,D]),me=w.useCallback(ve=>{F(Os({handler:T,reactEvent:ve}))},[F,T]),$e=$ce(B);return w.createElement(AR.Provider,{value:U},w.createElement(HP.Provider,{value:V},w.createElement($e,{width:q??k?.width,height:le??k?.height,className:Ea("recharts-wrapper",n),style:Rce({position:"relative",cursor:"default",width:q,height:le},k),onClick:re,onContextMenu:K,onDoubleClick:te,onFocus:xe,onKeyDown:ee,onMouseDown:ge,onMouseEnter:J,onMouseLeave:ae,onMouseMove:pe,onMouseUp:oe,onTouchEnd:me,onTouchMove:ie,onTouchStart:Ne,ref:ue},w.createElement(Uce,null),r)))}),Gce=["width","height","responsive","children","className","style","compact","title","desc"];function Yce(e,t){if(e==null)return{};var r,n,l=Xce(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Xce(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Wce=w.forwardRef((e,t)=>{var{width:r,height:n,responsive:l,children:i,className:u,style:g,compact:h,title:p,desc:y}=e,v=Yce(e,Gce),C=sd(v);return h?w.createElement(w.Fragment,null,w.createElement(fy,{width:r,height:n}),w.createElement(wO,{otherAttributes:C,title:p,desc:y},i)):w.createElement(qce,{className:u,style:g,width:r,height:n,responsive:l??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},w.createElement(wO,{otherAttributes:C,title:p,desc:y,ref:t},w.createElement(gce,null,i)))});function Kce(e){var t=wa();return w.useEffect(()=>{t(xce(e))},[t,e]),null}var Zce=["layout"];function S2(){return S2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S2.apply(null,arguments)}function Qce(e,t){if(e==null)return{};var r,n,l=Jce(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Jce(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var eue={top:5,right:5,bottom:5,left:5},o9={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:eue,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},tue=w.forwardRef(function(t,r){var n,l=zs(t.categoricalChartProps,o9),{layout:i}=l,u=Qce(l,Zce),{chartName:g,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:y}=t,v={chartName:g,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:y,eventEmitter:void 0};return w.createElement(Sce,{preloadedState:{options:v},reduxStoreName:(n=l.id)!==null&&n!==void 0?n:g},w.createElement(cce,{chartData:l.data}),w.createElement(Ace,{layout:i,margin:l.margin}),w.createElement(Tce,{baseValue:void 0,accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className,reverseStackOrder:l.reverseStackOrder}),w.createElement(Kce,{cx:l.cx,cy:l.cy,startAngle:l.startAngle,endAngle:l.endAngle,innerRadius:l.innerRadius,outerRadius:l.outerRadius}),w.createElement(Wce,S2({},u,{ref:r})))});function SO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function CO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SO(Object(r),!0).forEach(function(n){rue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rue(e,t,r){return(t=aue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aue(e){var t=nue(e,"string");return typeof t=="symbol"?t:t+""}function nue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sue=["item"],lue=CO(CO({},o9),{},{layout:"centric",startAngle:0,endAngle:360}),C2=w.forwardRef((e,t)=>{var r=zs(e,lue);return w.createElement(tue,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:sue,tooltipPayloadSearcher:Bse,categoricalChartProps:r,ref:t})});const Xg=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],iue=({data:e,loading:t})=>{if(!e)return a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},a.createElement(Pa,{loading:!0}),a.createElement(Pa,{loading:!0}));const{totalPayments:r,totalRevenue:n,averageOrderValue:l,totalDiscount:i,paymentMethods:u=[],topCoupons:g=[]}=e,h=u.map(y=>({name:y._id,value:y.revenue,count:y.count})),p=({active:y,payload:v})=>y&&v&&v.length?a.createElement("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200"},a.createElement("p",{className:"text-sm font-semibold text-gray-900"},v[0].name),a.createElement("p",{className:"text-sm text-gray-600"},"Revenue: ",a.createElement("span",{className:"font-bold text-green-600"},el(v[0].value))),v[0].payload.count&&a.createElement("p",{className:"text-sm text-gray-600"},"Orders: ",a.createElement("span",{className:"font-bold"},v[0].payload.count))):null;return a.createElement("div",{className:"space-y-4"},a.createElement("h2",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Revenue & Payments"),a.createElement("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4"},a.createElement("div",{className:"xl:col-span-1 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-1 gap-3"},a.createElement(Pa,{title:"Total Revenue",value:el(n),subtitle:`From ${Sr(r)} transactions`,icon:a.createElement(ek,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:t}),a.createElement(Pa,{title:"Total Payments",value:Sr(r),subtitle:"Successful transactions",icon:a.createElement(LV,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:t}),a.createElement(Pa,{title:"Average Order Value",value:el(l),subtitle:"Per transaction",icon:a.createElement(Vh,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:t}),a.createElement(Pa,{title:"Total Discounts",value:el(i),subtitle:"Coupons & offers applied",icon:a.createElement(aA,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:t})),h.length>0&&a.createElement("div",{className:"xl:col-span-2 bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},a.createElement("h3",{className:"text-sm font-bold text-gray-900 mb-3"},"Payment Distribution"),a.createElement(GE,{width:"100%",height:240},a.createElement(C2,null,a.createElement(Op,{data:h,cx:"50%",cy:"50%",labelLine:!1,label:({name:y,percent:v})=>`${y} (${(v*100).toFixed(0)}%)`,outerRadius:70,fill:"#8884d8",dataKey:"value"},h.map((y,v)=>a.createElement(gd,{key:`cell-${v}`,fill:Xg[v%Xg.length]}))),a.createElement(v2,{content:a.createElement(p,null)}),a.createElement(bI,null))),a.createElement("div",{className:"mt-3 pt-3 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2"},h.map((y,v)=>a.createElement("div",{key:y.name,className:"flex items-center justify-between text-xs p-2 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"w-2.5 h-2.5 rounded-full shrink-0",style:{backgroundColor:Xg[v%Xg.length]}}),a.createElement("span",{className:"font-semibold text-gray-900"},y.name)),a.createElement("div",{className:"text-right"},a.createElement("p",{className:"font-bold text-gray-900"},el(y.value)),a.createElement("p",{className:"text-xs text-gray-500"},y.count," orders")))))))),g.length>0&&a.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},a.createElement("h3",{className:"text-sm font-bold text-gray-900 mb-3"},"Top Performing Coupons"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},g.map((y,v)=>a.createElement("div",{key:y._id,className:"relative p-3 rounded-lg border-2 border-dashed border-gray-200 hover:border-blue-400 hover:bg-blue-50/30 transition-all group"},a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("div",{className:"flex items-center gap-1.5"},a.createElement("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 text-white font-bold px-2 py-0.5 rounded text-xs shadow-sm"},"#",v+1),a.createElement("span",{className:"font-bold text-sm text-gray-900 group-hover:text-gray-900 transition-colors truncate"},y._id)),a.createElement(aA,{className:"text-orange-500 w-4 h-4 group-hover:scale-110 transition-transform shrink-0"})),a.createElement("div",{className:"grid grid-cols-2 gap-2 text-xs"},a.createElement("div",{className:"bg-white/50 p-2 rounded-lg"},a.createElement("p",{className:"text-xs text-gray-600 mb-0.5"},"Usage Count"),a.createElement("p",{className:"font-bold text-gray-900"},Sr(y.usageCount))),a.createElement("div",{className:"bg-white/50 p-2 rounded-lg"},a.createElement("p",{className:"text-xs text-gray-600 mb-0.5"},"Total Discount"),a.createElement("p",{className:"font-bold text-green-600"},el(y.totalDiscount)))))))))},AO={TECHNOLOGY:"#3B82F6",ENTERTAINMENT:"#EC4899",EDUCATION:"#10B981",BUSINESS:"#F59E0B",OTHER:"#6B7280"},TO={OFFLINE:"#EF4444",ONLINE:"#10B981",HYBRID:"#8B5CF6"},oue=({data:e,enrollmentsData:t,cashTicketsData:r,loading:n})=>{if(!e)return a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},a.createElement(Pa,{loading:!0}));const{total:l,live:i,upcoming:u,past:g,byCategory:h={},byMode:p={}}=e,y=Object.entries(h).map(([T,D])=>({name:T,value:D})),v=Object.entries(p).map(([T,D])=>({name:T,value:D})),C=({active:T,payload:D})=>T&&D&&D.length?a.createElement("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200"},a.createElement("p",{className:"text-sm font-semibold text-gray-900"},D[0].name),a.createElement("p",{className:"text-sm text-gray-600"},"Events: ",a.createElement("span",{className:"font-bold text-gray-800"},D[0].value))):null;return a.createElement("div",{className:"space-y-4"},a.createElement("h2",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Events Overview"),a.createElement("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4"},a.createElement("div",{className:"space-y-3"},a.createElement(Pa,{title:"Total Events",value:Sr(l),subtitle:"All time events",icon:a.createElement(tA,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:n}),a.createElement(Pa,{title:"Live Events",value:Sr(i),subtitle:"Currently ongoing",icon:a.createElement(UV,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:n}),a.createElement(Pa,{title:"Upcoming Events",value:Sr(u),subtitle:"Scheduled ahead",icon:a.createElement($V,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:n}),a.createElement(Pa,{title:"Past Events",value:Sr(g),subtitle:"Completed events",icon:a.createElement(RV,{className:"w-6 h-6"}),iconColor:"text-gray-600",loading:n})),y.length>0&&a.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},a.createElement("h3",{className:"text-sm font-bold text-gray-900 mb-3"},"Events by Category"),a.createElement(GE,{width:"100%",height:220},a.createElement(C2,null,a.createElement(Op,{data:y,cx:"50%",cy:"50%",labelLine:!1,label:({name:T,percent:D})=>`${T.slice(0,3)} (${(D*100).toFixed(0)}%)`,outerRadius:60,fill:"#8884d8",dataKey:"value"},y.map((T,D)=>a.createElement(gd,{key:`cell-${D}`,fill:AO[T.name]||"#6B7280"}))),a.createElement(v2,{content:a.createElement(C,null)}))),a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-2 gap-2"},y.map(T=>a.createElement("div",{key:T.name,className:"flex items-center gap-2 text-xs"},a.createElement("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:AO[T.name]||"#6B7280"}}),a.createElement("span",{className:"font-semibold text-gray-900 truncate"},T.name),a.createElement("span",{className:"text-gray-600 ml-auto"},T.value))))),v.length>0&&a.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},a.createElement("h3",{className:"text-sm font-bold text-gray-900 mb-3"},"Events by Mode"),a.createElement(GE,{width:"100%",height:220},a.createElement(C2,null,a.createElement(Op,{data:v,cx:"50%",cy:"50%",labelLine:!1,label:({name:T,percent:D})=>`${T} (${(D*100).toFixed(0)}%)`,outerRadius:60,fill:"#8884d8",dataKey:"value"},v.map((T,D)=>a.createElement(gd,{key:`cell-${D}`,fill:TO[T.name]||"#6B7280"}))),a.createElement(v2,{content:a.createElement(C,null)}))),a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-2"},v.map(T=>a.createElement("div",{key:T.name,className:"flex items-center justify-between text-sm p-2 rounded-lg bg-gray-50"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:TO[T.name]||"#6B7280"}}),a.createElement("span",{className:"font-semibold text-gray-900"},T.name)),a.createElement("span",{className:"font-bold text-gray-900"},T.value)))))),t&&a.createElement("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4"},a.createElement(Pa,{title:"Total Enrollments",value:Sr(t.totalEnrollments),subtitle:"Online + Cash combined",icon:a.createElement(jP,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:n}),a.createElement(Pa,{title:"Online Enrollments",value:Sr(t.onlineEnrollments),subtitle:`${Sr(t.onlineTickets)} tickets sold`,icon:a.createElement(CE,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:n}),a.createElement(Pa,{title:"Cash Enrollments",value:Sr(t.cashEnrollments),subtitle:"Offline redemptions",icon:a.createElement(tA,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:n}),r&&a.createElement(Pa,{title:"Cash Tickets",value:Sr(r.totalMinted),subtitle:`${r.redeemed} redeemed, ${r.pending} pending`,icon:a.createElement(AE,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:n})))},cue=({data:e,loading:t})=>{const[r,n]=w.useState("totalRevenue"),[l,i]=w.useState("desc");if(!e||e.length===0)return a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},a.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},"Admin Performance"),a.createElement("p",{className:"text-gray-500 text-center py-8"},"No admin performance data available"));const u=[...e].sort((y,v)=>{const C=y[r],T=v[r];return l==="asc"?C-T:T-C}),g=y=>{r===y?i(l==="asc"?"desc":"asc"):(n(y),i("desc"))},h=y=>({SUPER_ADMIN:"bg-purple-100 text-purple-800",ADMIN:"bg-blue-100 text-blue-800",MANAGEMENT_STAFF:"bg-green-100 text-green-800"})[y]||"bg-gray-100 text-gray-800",p=(y,v)=>v?(y/v*100).toFixed(1):0;return t?a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},a.createElement("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6 animate-pulse"}),a.createElement("div",{className:"space-y-4"},[1,2,3].map(y=>a.createElement("div",{key:y,className:"h-20 bg-gray-100 rounded animate-pulse"})))):a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},a.createElement("div",{className:"flex items-center justify-between mb-6"},a.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Admin Performance"),a.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600"},a.createElement(Om,{className:"text-yellow-500"}),a.createElement("span",null,"Top ",u.length," performers"))),a.createElement("div",{className:"hidden lg:block overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",null,a.createElement("tr",{className:"border-b border-gray-200"},a.createElement("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm"},"Rank"),a.createElement("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm"},"Admin"),a.createElement("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm"},"Role"),a.createElement("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm cursor-pointer hover:text-gray-800",onClick:()=>g("totalTickets"),title:"Total cash tickets issued by this admin"},a.createElement("div",{className:"flex flex-col items-end"},a.createElement("span",null,"Tickets Issued ",r==="totalTickets"&&(l==="asc"?"":"")),a.createElement("span",{className:"text-xs font-normal text-gray-400"},"Cash tickets"))),a.createElement("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm cursor-pointer hover:text-gray-800",onClick:()=>g("redeemedTickets"),title:"Tickets redeemed by this admin"},a.createElement("div",{className:"flex flex-col items-end"},a.createElement("span",null,"Redeemed ",r==="redeemedTickets"&&(l==="asc"?"":"")),a.createElement("span",{className:"text-xs font-normal text-gray-400"},"Tickets verified"))),a.createElement("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm",title:"Pending tickets"},a.createElement("div",{className:"flex flex-col items-end"},a.createElement("span",null,"Pending"),a.createElement("span",{className:"text-xs font-normal text-gray-400"},"Tickets"))),a.createElement("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm cursor-pointer hover:text-gray-800",onClick:()=>g("totalRevenue"),title:"Revenue from redeemed tickets"},a.createElement("div",{className:"flex flex-col items-end"},a.createElement("span",null,"Revenue ",r==="totalRevenue"&&(l==="asc"?"":"")),a.createElement("span",{className:"text-xs font-normal text-gray-400"},"From redemptions"))))),a.createElement("tbody",null,u.map((y,v)=>a.createElement("tr",{key:y.adminId,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"py-4 px-4"},a.createElement("div",{className:"flex items-center gap-2"},v===0&&a.createElement(Om,{className:"text-yellow-500 w-5 h-5"}),v===1&&a.createElement(Om,{className:"text-gray-400 w-5 h-5"}),v===2&&a.createElement(Om,{className:"text-orange-600 w-5 h-5"}),a.createElement("span",{className:"font-semibold text-gray-900"},"#",v+1))),a.createElement("td",{className:"py-4 px-4"},a.createElement("div",null,a.createElement("p",{className:"font-semibold text-gray-900"},y.adminName),a.createElement("p",{className:"text-xs text-gray-500"},"@",y.adminUsername))),a.createElement("td",{className:"py-4 px-4"},a.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h(y.adminRole)}`},y.adminRole.replace("_"," "))),a.createElement("td",{className:"py-4 px-4 text-right"},a.createElement("span",{className:"font-semibold text-blue-600"},Sr(y.totalTickets))),a.createElement("td",{className:"py-4 px-4 text-right"},a.createElement("div",null,a.createElement("span",{className:"font-semibold text-green-600"},Sr(y.redeemedTickets)),a.createElement("p",{className:"text-xs text-gray-500"},p(y.redeemedTickets,y.totalTickets),"% rate"))),a.createElement("td",{className:"py-4 px-4 text-right"},a.createElement("span",{className:"font-semibold text-orange-600"},Sr(y.pendingTickets))),a.createElement("td",{className:"py-4 px-4 text-right"},a.createElement("span",{className:"font-bold text-gray-900"},el(y.totalRevenue)))))))),a.createElement("div",{className:"lg:hidden space-y-4"},u.map((y,v)=>a.createElement("div",{key:y.adminId,className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"},a.createElement("div",{className:"flex items-start justify-between mb-3"},a.createElement("div",{className:"flex items-center gap-2"},v<3&&a.createElement(Om,{className:v===0?"text-yellow-500":v===1?"text-gray-400":"text-orange-600"}),a.createElement("div",null,a.createElement("p",{className:"font-semibold text-gray-900"},y.adminName),a.createElement("p",{className:"text-xs text-gray-500"},"@",y.adminUsername))),a.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h(y.adminRole)}`},y.adminRole.replace("_"," "))),a.createElement("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg"},a.createElement("p",{className:"text-xs text-blue-600 font-medium mb-1"},"Cash Tickets Issued"),a.createElement("p",{className:"font-bold text-blue-800 text-lg"},Sr(y.totalTickets))),a.createElement("div",{className:"p-2 bg-gray-50 rounded-lg"},a.createElement("p",{className:"text-xs text-gray-600 font-medium mb-2"},"Ticket Redemptions"),a.createElement("div",{className:"grid grid-cols-3 gap-2 text-sm"},a.createElement("div",null,a.createElement("p",{className:"text-xs text-gray-500"},"Redeemed"),a.createElement("p",{className:"font-semibold text-green-600"},Sr(y.redeemedTickets))),a.createElement("div",null,a.createElement("p",{className:"text-xs text-gray-500"},"Pending"),a.createElement("p",{className:"font-semibold text-orange-600"},Sr(y.pendingTickets))),a.createElement("div",null,a.createElement("p",{className:"text-xs text-gray-500"},"Rate"),a.createElement("p",{className:"font-semibold text-gray-800"},p(y.redeemedTickets,y.totalTickets),"%")))),a.createElement("div",{className:"mt-3 pt-3 border-t border-gray-100"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-gray-600 text-sm flex items-center gap-1"},a.createElement(ek,{className:"text-purple-600"})," Revenue"),a.createElement("span",{className:"font-bold text-gray-900"},el(y.totalRevenue))))))))},OO=({events:e,loading:t})=>{if(!e||e.length===0)return a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},a.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},"Top Performing Events"),a.createElement("p",{className:"text-gray-500 text-center py-8"},"No event data available"));if(t)return a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},a.createElement("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6 animate-pulse"}),a.createElement("div",{className:"space-y-4"},[1,2,3].map(l=>a.createElement("div",{key:l,className:"h-32 bg-gray-100 rounded animate-pulse"}))));const r=l=>({TECHNOLOGY:"bg-blue-100 text-blue-800",ENTERTAINMENT:"bg-pink-100 text-pink-800",EDUCATION:"bg-green-100 text-green-800",BUSINESS:"bg-yellow-100 text-yellow-800",OTHER:"bg-gray-100 text-gray-800"})[l]||"bg-gray-100 text-gray-800",n=l=>{switch(l){case"ONLINE":return a.createElement(CE,{className:"w-4 h-4 text-green-600"});case"OFFLINE":return a.createElement(AE,{className:"w-4 h-4 text-red-600"});case"HYBRID":return a.createElement(Vh,{className:"w-4 h-4 text-purple-600"});default:return a.createElement(Vh,{className:"w-4 h-4 text-gray-600"})}};return a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},a.createElement("div",{className:"flex items-center justify-between mb-6"},a.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Top Performing Events"),a.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600"},a.createElement(WV,{className:"text-yellow-500"}),a.createElement("span",null,"Top ",e.length," events"))),a.createElement("div",{className:"space-y-4"},e.map((l,i)=>a.createElement("div",{key:l.eventId,className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200 hover:border-blue-300"},a.createElement("div",{className:"flex items-start justify-between mb-3"},a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},i<3&&a.createElement("span",{className:`
                        w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold
                        ${i===0?"bg-yellow-500 text-white":""}
                        ${i===1?"bg-gray-400 text-white":""}
                        ${i===2?"bg-orange-600 text-white":""}
                      `},i+1),a.createElement("h3",{className:"font-bold text-lg text-gray-900"},l.eventName)),a.createElement("div",{className:"flex flex-wrap items-center gap-3 text-sm text-gray-600"},a.createElement("span",{className:"flex items-center gap-1"},a.createElement(MV,{className:"w-4 h-4"}),XY(l.eventDate)),l.eventCity&&a.createElement("span",{className:"flex items-center gap-1"},a.createElement(zV,{className:"w-4 h-4"}),l.eventCity),a.createElement("span",{className:"flex items-center gap-1"},n(l.eventMode),l.eventMode))),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${r(l.eventCategory)}`},l.eventCategory)),a.createElement("div",{className:"grid grid-cols-2 gap-4 mb-3"},a.createElement("div",{className:"bg-blue-50 rounded-lg p-3"},a.createElement("p",{className:"text-xs text-gray-800 font-medium mb-1"},"Total Revenue"),a.createElement("p",{className:"text-lg font-bold text-blue-900"},el(l.totalRevenue))),a.createElement("div",{className:"bg-green-50 rounded-lg p-3"},a.createElement("p",{className:"text-xs text-green-600 font-medium mb-1"},"Total Tickets"),a.createElement("p",{className:"text-lg font-bold text-green-900"},Sr(l.totalTickets)))),a.createElement("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t border-gray-100"},a.createElement("div",null,a.createElement("p",{className:"text-xs text-gray-600 font-medium mb-2 flex items-center gap-1"},a.createElement(CE,{className:"text-gray-800"}),"Online Sales"),a.createElement("div",{className:"space-y-1 text-sm"},a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Tickets:"),a.createElement("span",{className:"font-semibold text-gray-900"},Sr(l.onlineTickets))),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Revenue:"),a.createElement("span",{className:"font-semibold text-gray-800"},el(l.onlineRevenue))))),a.createElement("div",null,a.createElement("p",{className:"text-xs text-gray-600 font-medium mb-2 flex items-center gap-1"},a.createElement(AE,{className:"text-red-600"}),"Offline Sales"),a.createElement("div",{className:"space-y-1 text-sm"},a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Tickets:"),a.createElement("span",{className:"font-semibold text-gray-900"},Sr(l.offlineTickets))),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Revenue:"),a.createElement("span",{className:"font-semibold text-green-600"},el(l.offlineRevenue))))))))))};function uue(){const[e,t]=w.useState("lifetime"),[r,n]=w.useState(null),[l,i]=w.useState(!0),[u,g]=w.useState(null),h=async()=>{i(!0);try{const C=await YY();if(C.success)n(C.data),g(new Date),console.log("[Dashboard] Data loaded successfully");else{const T=C.message||"Failed to load dashboard statistics";vt.error(T),console.error("[Dashboard] Error:",C.error),C.error&&console.error("[Dashboard] Backend Error Details:",{status:C.status,message:C.message,error:C.error})}}catch(C){vt.error("An unexpected error occurred while loading dashboard"),console.error("[Dashboard] Exception:",C)}finally{i(!1)}};w.useEffect(()=>{h()},[]);const p=()=>{vt.info("Refreshing dashboard data..."),h()},y=()=>{vt.info("Export functionality coming soon!")},v=C=>C?C[e]||C.lifetime||C:null;return a.createElement(a.Fragment,null,a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 tracking-tight"},"Dashboard"),a.createElement("p",{className:"text-xs text-gray-600 mt-1"},"Comprehensive insights and analytics",u&&a.createElement("span",{className:"ml-2"}," Updated ",u.toLocaleTimeString()))),a.createElement("div",{className:"flex items-center gap-2"},a.createElement("button",{onClick:p,disabled:l,className:"flex items-center gap-1.5 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm text-sm",title:"Refresh dashboard data"},a.createElement(tk,{className:`w-4 h-4 ${l?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline font-medium"},"Refresh")),a.createElement("button",{onClick:y,className:"flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white rounded-lg hover:from-gray-900 hover:to-black transition-all shadow-sm text-sm",title:"Export dashboard data"},a.createElement(GV,{className:"w-4 h-4"}),a.createElement("span",{className:"hidden sm:inline font-medium"},"Export")))),r&&a.createElement($Y,{selected:e,onChange:t}),!l&&!r&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center"},a.createElement("div",{className:"max-w-md mx-auto"},a.createElement("div",{className:"text-red-500 text-6xl mb-4"},""),a.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-2"},"Failed to Load Dashboard"),a.createElement("p",{className:"text-gray-600 mb-6"},"There was an error loading the analytics data. This is likely a backend issue."),a.createElement("button",{onClick:p,className:"px-6 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Try Again"))),r?.payments&&a.createElement(iue,{data:v(r.payments),loading:l}),(r?.users||r?.admins)&&a.createElement(JY,{usersData:r.users,adminsData:r.admins,loading:l}),r?.events&&a.createElement(oue,{data:r.events,enrollmentsData:v(r.enrollments),cashTicketsData:v(r.cashTickets),loading:l}),r?.communications&&a.createElement(WY,{data:v(r.communications),loading:l}),r?.topPerformingEvents&&r.topPerformingEvents.length>0&&a.createElement(OO,{events:r.topPerformingEvents,loading:l}),r?.eventStats&&v(r.eventStats)?.length>0&&a.createElement("div",{className:"space-y-4"},a.createElement("h2",{className:"text-2xl font-bold text-gray-900 tracking-tight"},"Events Performance (",e.replace(/([A-Z])/g," $1").trim(),")"),a.createElement(OO,{events:v(r.eventStats),loading:l})),r?.adminPerformance&&r.adminPerformance.length>0&&a.createElement(cue,{data:r.adminPerformance,loading:l}),a.createElement("div",{className:"text-center text-xs text-gray-500 py-6 border-t border-gray-200"},r?.generatedAt&&a.createElement("p",null,"Statistics generated at: ",new Date(r.generatedAt).toLocaleString()))))}const dn={BASE:"/web/events",DROPDOWN:"/web/events/dropdown",DELETED:"/web/events/deleted",UPDATE_EXPIRED:"/web/events/update-expired",FEATURED:"/web/events/featured"},Wg=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([r,n])=>{n!=null&&n!==""&&t.append(r,n)}),t.toString()},ks={getAll:async(e={})=>{const t=Wg(e),r=t?`${dn.BASE}?${t}`:dn.BASE;console.log("[EventService] Fetching events with params:",e);const n=await Pe(ke.get(r));return n.success?console.log("[EventService] Fetched events:",n.data.events?.length):console.error("[EventService] Failed to fetch events:",n.message),n},getById:async e=>{console.log("[EventService] Fetching event:",e);const t=await Pe(ke.get(`${dn.BASE}/${e}`));return t.success?console.log("[EventService] Fetched event:",t.data.event?.name):console.error("[EventService] Failed to fetch event:",t.message),t},create:async e=>{console.log("[EventService] Creating event:",e.name);const t=await Pe(ke.post(dn.BASE,e));return t.success?console.log("[EventService] Created event:",t.data.event?._id):console.error("[EventService] Failed to create event:",t.message),t},update:async(e,t)=>{console.log("[EventService] Updating event:",e);const r=await Pe(ke.put(`${dn.BASE}/${e}`,t));return r.success?console.log("[EventService] Updated event:",r.data.event?.name):console.error("[EventService] Failed to update event:",r.message),r},delete:async e=>{console.log("[EventService] Deleting event:",e);const t=await Pe(ke.delete(`${dn.BASE}/${e}`));return t.success?console.log("[EventService] Deleted event successfully"):console.error("[EventService] Failed to delete event:",t.message),t},restore:async e=>{console.log("[EventService] Restoring event:",e);const t=await Pe(ke.post(`${dn.BASE}/${e}/restore`));return t.success?console.log("[EventService] Restored event successfully"):console.error("[EventService] Failed to restore event:",t.message),t},permanentDelete:async e=>{console.log("[EventService] Permanently deleting event:",e);const t=await Pe(ke.delete(`${dn.BASE}/${e}/permanent`));return t.success?console.log("[EventService] Permanently deleted event successfully"):console.error("[EventService] Failed to permanently delete event:",t.message),t},getDeleted:async(e={})=>{const t=Wg(e),r=t?`${dn.DELETED}?${t}`:dn.DELETED;console.log("[EventService] Fetching deleted events");const n=await Pe(ke.get(r));return n.success?console.log("[EventService] Fetched deleted events:",n.data.events?.length):console.error("[EventService] Failed to fetch deleted events:",n.message),n},getDropdownEvents:async(e={})=>{const t=Wg(e),r=t?`${dn.DROPDOWN}?${t}`:dn.DROPDOWN;console.log("[EventService] Fetching dropdown events with params:",e);const n=await Pe(ke.get(r));return n.success?console.log("[EventService] Fetched events:",n.data.events?.length):console.error("[EventService] Failed to fetch events:",n.message),n},getTicketStats:async e=>{console.log("[EventService] Fetching ticket stats for event:",e);const t=await Pe(ke.get(`${dn.BASE}/${e}/ticket-stats`));return t.success?console.log("[EventService] Fetched ticket stats"):console.error("[EventService] Failed to fetch ticket stats:",t.message),t},updateExpired:async()=>{console.log("[EventService] Updating expired events");const e=await Pe(ke.post(dn.UPDATE_EXPIRED));return e.success?console.log("[EventService] Updated expired events:",e.data.updatedCount):console.error("[EventService] Failed to update expired events:",e.message),e},getFeaturedEvents:async(e={})=>{const t=Wg(e),r=t?`${dn.FEATURED}?${t}`:dn.FEATURED;console.log("[EventService] Fetching featured events");const n=await Pe(ke.get(r));return n.success?console.log("[EventService] Fetched featured events:",n.data.events?.length):console.error("[EventService] Failed to fetch featured events:",n.message),n}},c9=["TECHNOLOGY","EDUCATION","MEDICAL","COMEDY","ENTERTAINMENT","BUSINESS","SPORTS","ARTS","MUSIC","FOOD","LIFESTYLE","OTHER"],u9=["ONLINE","OFFLINE","HYBRID"],due=[{value:"createdAt",label:"Created Date"},{value:"name",label:"Name"},{value:"startDate",label:"Start Date"},{value:"endDate",label:"End Date"},{value:"price",label:"Price"}],DO={search:"",category:"",mode:"",city:"",isLive:"",featured:"",minPrice:"",maxPrice:"",startDateFrom:"",startDateTo:"",sortBy:"createdAt",sortOrder:"desc"};function mue(e={}){const[t,r]=w.useState([]),[n,l]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[i,u]=w.useState({...DO,...e}),[g,h]=w.useState(!1),[p,y]=w.useState(null),[v,C]=w.useState([]),[T,D]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[P,k]=w.useState(!1),R=w.useRef(null),B=w.useCallback(async(xe=n.currentPage)=>{h(!0),y(null);try{const ee={page:xe,limit:n.limit,sortBy:i.sortBy,sortOrder:i.sortOrder,...i.search&&{search:i.search},...i.category&&{category:i.category},...i.mode&&{mode:i.mode},...i.city&&{city:i.city},...i.isLive!==""&&{isLive:i.isLive},...i.featured!==""&&{featured:i.featured},...i.minPrice&&{minPrice:i.minPrice},...i.maxPrice&&{maxPrice:i.maxPrice},...i.startDateFrom&&{startDateFrom:i.startDateFrom},...i.startDateTo&&{startDateTo:i.startDateTo}},K=await ks.getAll(ee);K.success?(r(K.data.events||[]),l(K.data.pagination||n)):(y(K.message),r([]))}catch{y("Failed to fetch events"),r([])}finally{h(!1)}},[i,n.limit,n.currentPage]),M=w.useCallback(async(xe=T.currentPage)=>{h(!0),y(null);try{const ee=await ks.getDeleted({page:xe,limit:T.limit});ee.success?(C(ee.data.events||[]),D(K=>({...K,...ee.data.pagination}))):(y(ee.message),C([]))}catch{y("Failed to fetch deleted events"),C([])}finally{h(!1)}},[T.currentPage,T.limit]),G=w.useCallback(async xe=>{try{const ee=await ks.getById(xe);return ee.success?{success:!0,data:ee.data.event}:{success:!1,error:ee.message}}catch{return{success:!1,error:"Failed to fetch event details"}}},[]),F=w.useCallback(async xe=>{h(!0),y(null);try{const ee=await ks.create(xe);return ee.success?(await B(1),{success:!0,data:ee.data}):{success:!1,error:ee.message,validationErrors:Array.isArray(ee.error)?ee.error:ee.data?.errors}}catch{return{success:!1,error:"Failed to create event"}}finally{h(!1)}},[B]),U=w.useCallback(async(xe,ee)=>{h(!0),y(null);try{const K=await ks.update(xe,ee);return K.success?(r(te=>te.map(ge=>ge._id===xe?{...ge,...K.data.event}:ge)),{success:!0,data:K.data}):{success:!1,error:K.message,validationErrors:Array.isArray(K.error)?K.error:K.data?.errors}}catch{return{success:!1,error:"Failed to update event"}}finally{h(!1)}},[]),L=w.useCallback(async xe=>{h(!0),y(null);try{const ee=await ks.delete(xe);return ee.success?(r(K=>K.filter(te=>te._id!==xe)),l(K=>({...K,totalCount:K.totalCount-1,totalPages:Math.ceil((K.totalCount-1)/K.limit)})),{success:!0}):{success:!1,error:ee.message}}catch{return{success:!1,error:"Failed to delete event"}}finally{h(!1)}},[]),V=w.useCallback(async xe=>{h(!0),y(null);try{const ee=await ks.restore(xe);return ee.success?(C(K=>K.filter(te=>te._id!==xe)),D(K=>({...K,totalCount:K.totalCount-1,totalPages:Math.ceil((K.totalCount-1)/K.limit)})),{success:!0}):{success:!1,error:ee.message}}catch{return{success:!1,error:"Failed to restore event"}}finally{h(!1)}},[]),j=w.useCallback(async xe=>{h(!0),y(null);try{const ee=await ks.permanentDelete(xe);return ee.success?(C(K=>K.filter(te=>te._id!==xe)),D(K=>({...K,totalCount:K.totalCount-1,totalPages:Math.ceil((K.totalCount-1)/K.limit)})),{success:!0}):{success:!1,error:ee.message}}catch{return{success:!1,error:"Failed to permanently delete event"}}finally{h(!1)}},[]),Y=w.useCallback(async xe=>{try{const ee=await ks.getTicketStats(xe);return ee.success?{success:!0,data:ee.data.stats}:{success:!1,error:ee.message}}catch{return{success:!1,error:"Failed to fetch ticket statistics"}}},[]),H=w.useCallback(async()=>{h(!0),y(null);try{const xe=await ks.updateExpired();return xe.success?(await B(n.currentPage),{success:!0,updatedCount:xe.data.updatedCount}):{success:!1,error:xe.message}}catch{return{success:!1,error:"Failed to update expired events"}}finally{h(!1)}},[B,n.currentPage]),q=w.useCallback(xe=>{u(ee=>({...ee,...xe}))},[]),le=w.useCallback(xe=>{R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{u(ee=>({...ee,search:xe}))},300)},[]),ue=w.useCallback(()=>{u({...DO,...e})},[e]),re=w.useCallback(xe=>{P?M(xe):B(xe)},[P,B,M]),J=w.useCallback(xe=>{l(ee=>({...ee,limit:xe})),D(ee=>({...ee,limit:xe}))},[]),ae=w.useCallback(()=>{k(xe=>!xe)},[]),pe=w.useCallback(()=>{y(null)},[]);return w.useEffect(()=>{P||B(1)},[i,P]),w.useEffect(()=>{P&&M(1)},[P]),w.useEffect(()=>()=>{R.current&&clearTimeout(R.current)},[]),{events:P?v:t,pagination:P?T:n,filters:i,isLoading:g,error:p,showDeleted:P,fetchEvents:B,fetchDeletedEvents:M,getEventById:G,createEvent:F,updateEvent:U,deleteEvent:L,restoreEvent:V,permanentDeleteEvent:j,getTicketStats:Y,updateExpiredEvents:H,updateFilters:q,updateSearch:le,resetFilters:ue,changePage:re,changeLimit:J,toggleShowDeleted:ae,clearError:pe}}function jt({isOpen:e,onClose:t,title:r,children:n,size:l="md",showCloseButton:i=!0,closeOnOverlayClick:u=!0}){const g={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl"},h=w.useCallback(y=>{y.key==="Escape"&&t()},[t]);if(w.useEffect(()=>(e&&(document.addEventListener("keydown",h),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",h),document.body.style.overflow="unset"}),[e,h]),!e)return null;const p=y=>{y.target===y.currentTarget&&u&&t()};return a.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:p},a.createElement("div",{className:`w-full ${g[l]} bg-white rounded-xl shadow-xl transform transition-all`,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},a.createElement("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200"},a.createElement("h2",{id:"modal-title",className:"text-lg font-semibold text-gray-900"},r),i&&a.createElement("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal"},a.createElement(Gr,{className:"h-5 w-5"}))),a.createElement("div",{className:"px-6 py-4 max-h-[calc(100vh-200px)] overflow-y-auto"},n)))}const fue={UPLOAD:"/web/assets/upload",DELETE:"/web/assets",DOWNLOAD_URL:"/app/assets/download-url"},d9=async(e,t={})=>{const{folder:r="assets",onProgress:n}=t,l=new FormData;(Array.isArray(e)?e:[e]).forEach(u=>{l.append("files",u)}),r&&l.append("folder",r);try{const u=await ke.post(fue.UPLOAD,l,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:g=>{if(n&&g.total){const h=Math.round(g.loaded*100/g.total);n(h)}}});return{success:!0,data:u.data.data||u.data,message:u.data.message||"Upload successful",error:null}}catch(u){return console.error("[AssetService] Upload error:",u),{success:!1,data:null,message:u.response?.data?.message||"Upload failed",error:u.response?.data?.error||u.message}}},gue=async(e,t={})=>{const r=await d9(e,t);if(r.success&&r.data?.uploaded?.length>0){const n=r.data.uploaded[0];return{success:!0,url:n.publicUrl,downloadUrl:n.downloadUrl,data:n,error:null}}return{success:!1,url:null,downloadUrl:null,data:null,error:r.error||"Upload failed",message:r.message}},hue=async(e,t={})=>{const r=await d9(e,t);return r.success&&r.data?.uploaded?.length>0?{success:!0,urls:r.data.uploaded.map(n=>n.publicUrl),downloadUrls:r.data.uploaded.map(n=>n.downloadUrl),data:r.data.uploaded,totalUploaded:r.data.totalUploaded,totalFailed:r.data.totalFailed,error:null}:{success:!1,urls:[],downloadUrls:[],data:[],totalUploaded:0,totalFailed:e.length,error:r.error||"Upload failed",message:r.message}},m9=(e,t={})=>{const{allowedTypes:r=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"],maxSize:n=10*1024*1024}=t;return e?r.length>0&&!r.includes(e.type)?{valid:!1,error:`Invalid file type. Allowed: ${r.map(i=>i.split("/")[1]).join(", ")}`}:e.size>n?{valid:!1,error:`File too large. Maximum size: ${(n/1048576).toFixed(1)}MB`}:{valid:!0,error:null}:{valid:!1,error:"No file provided"}},pue=(e,t={})=>{const r=[],n=[];return e.forEach((l,i)=>{const u=m9(l,t);u.valid?n.push(l):r.push(`${l.name}: ${u.error}`)}),{valid:r.length===0,errors:r,validFiles:n}},yue=e=>{if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(2))+" "+r[n]};function il({onUpload:e,value:t="",values:r=[],multiple:n=!1,accept:l,maxSize:i=10*1024*1024,folder:u="assets",disabled:g=!1,error:h,label:p,required:y=!1,placeholder:v="Drop files here or click to upload",onRemove:C,showUrlInput:T=!0,type:D="image"}){const[P,k]=w.useState(!1),[R,B]=w.useState(!1),[M,G]=w.useState(0),[F,U]=w.useState(null),[L,V]=w.useState(!1),[j,Y]=w.useState(""),H=w.useRef(null),q=()=>{if(l)return l;switch(D){case"video":return"video/*";case"any":return"image/*,video/*";default:return"image/*"}},le=()=>{switch(D){case"video":return["video/mp4","video/webm","video/ogg","video/quicktime"];case"any":return["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","video/mp4","video/webm","video/ogg","video/quicktime"];default:return["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"]}},ue=w.useCallback(ie=>{ie.preventDefault(),!g&&!R&&k(!0)},[g,R]),re=w.useCallback(ie=>{ie.preventDefault(),k(!1)},[]),J=w.useCallback(ie=>{if(ie.preventDefault(),k(!1),g||R)return;const me=Array.from(ie.dataTransfer.files);me.length>0&&pe(n?me:[me[0]])},[g,R,n]),ae=ie=>{const me=Array.from(ie.target.files);me.length>0&&pe(n?me:[me[0]]),ie.target.value=""},pe=async ie=>{U(null),G(0);const me=le();if(n){const $e=pue(ie,{allowedTypes:me,maxSize:i});if(!$e.valid){U($e.errors.join(", "));return}await ee($e.validFiles)}else{const $e=m9(ie[0],{allowedTypes:me,maxSize:i});if(!$e.valid){U($e.error);return}await xe(ie[0])}},xe=async ie=>{B(!0),G(0);try{const me=await gue(ie,{folder:u,onProgress:G});me.success&&me.url?(e(me.url),G(100)):U(me.message||me.error||"Upload failed")}catch(me){U(me.message||"Upload failed")}finally{B(!1)}},ee=async ie=>{B(!0),G(0);try{const me=await hue(ie,{folder:u,onProgress:G});me.success&&me.urls.length>0?(e([...r,...me.urls]),G(100)):U(me.message||me.error||"Upload failed")}catch(me){U(me.message||"Upload failed")}finally{B(!1)}},K=()=>{if(j.trim()){if(!/^https?:\/\/.+/.test(j.trim())){U("Invalid URL format");return}e(n?[...r,j.trim()]:j.trim()),Y(""),V(!1),U(null)}},te=ie=>{if(C)C(ie);else if(n){const me=r.filter(($e,ve)=>ve!==ie);e(me)}},ge=()=>{e("")},oe=ie=>/\.(mp4|webm|ogg|mov)(\?.*)?$/i.test(ie)||D==="video",Ne=(ie,me=null)=>{const $e=oe(ie);return a.createElement("div",{key:me!==null?me:"single",className:"relative group flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200"},$e?a.createElement("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0"},a.createElement(zj,{className:"h-6 w-6 text-gray-500"})):a.createElement("img",{src:ie,alt:`Preview ${me!==null?me+1:""}`,className:"w-16 h-16 object-cover rounded flex-shrink-0",onError:ve=>{ve.target.style.display="none",ve.target.nextSibling?.classList.remove("hidden")}}),a.createElement("div",{className:"hidden w-16 h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0"},a.createElement(Bc,{className:"h-6 w-6 text-gray-400"})),a.createElement("span",{className:"flex-1 text-sm text-gray-600 truncate"},ie),!g&&a.createElement("button",{type:"button",onClick:()=>me!==null?te(me):ge(),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors"},a.createElement(Gr,{className:"h-4 w-4"})))};return n&&r.length>0,a.createElement("div",{className:"space-y-2"},p&&a.createElement("label",{className:"block text-sm font-medium text-gray-700"},p,y&&a.createElement("span",{className:"text-red-500 ml-1"},"*")),!n&&t&&Ne(t),n&&r.length>0&&a.createElement("div",{className:"space-y-2 mb-3"},r.map((ie,me)=>Ne(ie,me))),(n||!t)&&a.createElement("div",{onDragOver:ue,onDragLeave:re,onDrop:J,onClick:()=>!g&&!R&&H.current?.click(),className:`
            relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer
            transition-all duration-200
            ${P?"border-gray-800 bg-gray-50":"border-gray-300 hover:border-gray-400"}
            ${g||R?"opacity-50 cursor-not-allowed":""}
            ${h||F?"border-red-300 bg-red-50/50":""}
          `},a.createElement("input",{ref:H,type:"file",accept:q(),multiple:n,onChange:ae,disabled:g||R,className:"hidden"}),R?a.createElement("div",{className:"space-y-3"},a.createElement(ct,{className:"h-8 w-8 mx-auto text-gray-400 animate-spin"}),a.createElement("div",{className:"space-y-1"},a.createElement("p",{className:"text-sm text-gray-600"},"Uploading..."),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2 max-w-xs mx-auto"},a.createElement("div",{className:"bg-gray-800 h-2 rounded-full transition-all duration-300",style:{width:`${M}%`}})),a.createElement("p",{className:"text-xs text-gray-500"},M,"%"))):a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"mx-auto w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center"},a.createElement(X_,{className:"h-5 w-5 text-gray-500"})),a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-600"},v),a.createElement("p",{className:"text-xs text-gray-400 mt-1"},D==="video"?"MP4, WebM, OGG":D==="any"?"Images or videos":"PNG, JPG, GIF, WebP, SVG"," ","up to ",yue(i))))),(h||F)&&a.createElement("div",{className:"flex items-center gap-2 text-sm text-red-500"},a.createElement(Xt,{className:"h-4 w-4 flex-shrink-0"}),a.createElement("span",null,h||F)),T&&!g&&a.createElement("div",{className:"pt-2"},L?a.createElement("div",{className:"flex gap-2"},a.createElement("input",{type:"url",value:j,onChange:ie=>Y(ie.target.value),placeholder:"Enter URL manually",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none",onKeyDown:ie=>{ie.key==="Enter"&&(ie.preventDefault(),K()),ie.key==="Escape"&&(V(!1),Y(""))}}),a.createElement("button",{type:"button",onClick:K,disabled:!j.trim(),className:"px-3 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 text-sm"},a.createElement(En,{className:"h-4 w-4"})),a.createElement("button",{type:"button",onClick:()=>{V(!1),Y("")},className:"px-3 py-2 border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors text-sm"},a.createElement(Gr,{className:"h-4 w-4"}))):a.createElement("button",{type:"button",onClick:()=>V(!0),className:"text-sm text-gray-500 hover:text-gray-700 transition-colors"},"Or enter URL manually")))}const Kg={SEAT_ARRANGEMENT:"/web/events"},wc={createSeatArrangement:async(e,t)=>(console.log("[SeatArrangementService] Creating seat arrangement for event:",e),Pe(ke.post(`${Kg.SEAT_ARRANGEMENT}/${e}/seat-arrangement`,t))),getSeatArrangement:async e=>(console.log("[SeatArrangementService] Fetching seat arrangement for event:",e),Pe(ke.get(`${Kg.SEAT_ARRANGEMENT}/${e}/seat-arrangement`))),updateSeatArrangement:async(e,t)=>(console.log("[SeatArrangementService] Updating seat arrangement for event:",e),Pe(ke.put(`${Kg.SEAT_ARRANGEMENT}/${e}/seat-arrangement`,t))),deleteSeatArrangement:async e=>(console.log("[SeatArrangementService] Deleting seat arrangement for event:",e),Pe(ke.delete(`${Kg.SEAT_ARRANGEMENT}/${e}/seat-arrangement`))),generateSeatLabels:e=>{const t=[],r=/^([A-Z]+)(\d+)-([A-Z]+)(\d+)$/i,n=e.match(r);if(n){const[,u,g,h,p]=n,y=u.toUpperCase().charCodeAt(0),v=h.toUpperCase().charCodeAt(0);for(let C=y;C<=v;C++){const T=String.fromCharCode(C),D=parseInt(p),P=C===y?parseInt(g):1;for(let k=P;k<=D;k++)t.push(`${T}${k}`)}return t}const l=/^(\d+)-(\d+)$/,i=e.match(l);if(i){const[,u,g]=i;for(let h=parseInt(u);h<=parseInt(g);h++)t.push(String(h));return t}return e.includes(",")?e.split(",").map(u=>u.trim()).filter(Boolean):[e.trim()]},parseSeatLabels:e=>{if(!e||!e.trim())return[];const t=new Set;return e.split(/[\n;]/).map(n=>n.trim()).filter(Boolean).forEach(n=>{n.split(",").map(i=>i.trim()).filter(Boolean).forEach(i=>{/^[A-Z]?\d+-[A-Z]?\d+$/i.test(i)||/^[A-Z]+\d+-[A-Z]+\d+$/i.test(i)?wc.generateSeatLabels(i).forEach(h=>t.add(h)):t.add(i)})}),Array.from(t).map(n=>({label:n}))}},_O=(e=null,t=null)=>({name:e?.name||"",description:e?.description||"",imageUrls:e?.imageUrls||[],thumbnail:{imageUrl:e?.thumbnail?.imageUrl||"",videoUrl:e?.thumbnail?.videoUrl||""},mode:e?.mode||"",city:e?.city||"",gmapLink:e?.gmapLink||"",category:e?.category||"",startDate:e?.startDate?kO(e.startDate):"",endDate:e?.endDate?kO(e.endDate):"",price:e?.price??"",compareAtPrice:e?.compareAtPrice??"",availableSeats:e?.availableSeats??"",usePricingTiers:e?.pricingTiers?.length>0,pricingTiers:e?.pricingTiers||[],isLive:e?.isLive??!1,featured:e?.featured??!1,useSeatArrangement:!!t,seatArrangement:{imageUrl:t?.imageUrl||"",seatLabelsInput:t?.seats?.map(r=>r.label).join(", ")||"",seats:t?.seats||[]}});function kO(e){return e?new Date(e).toISOString().slice(0,16):""}const xue=(e,t=!1)=>{const r={};if(e.name.trim()?e.name.length>200&&(r.name="Name must be 200 characters or less"):r.name="Name is required",e.description.trim()?e.description.length>5e3&&(r.description="Description must be 5000 characters or less"):r.description="Description is required",e.mode||(r.mode="Mode is required"),(e.mode==="OFFLINE"||e.mode==="HYBRID")&&!e.city.trim()&&(r.city="City is required for offline or hybrid events"),e.gmapLink&&e.gmapLink.trim()){const n=/^https?:\/\/(www\.)?(google\.[a-z.]+\/maps|maps\.google\.[a-z.]+|goo\.gl\/maps|maps\.app\.goo\.gl)\/.+/i;/^https?:\/\/.+/.test(e.gmapLink.trim())?n.test(e.gmapLink.trim())||(r.gmapLink="Please provide a valid Google Maps link"):r.gmapLink="Please provide a valid URL"}if(e.category||(r.category="Category is required"),e.startDate?t||new Date(e.startDate)<=new Date&&(r.startDate="Start date must be in the future"):r.startDate="Start date is required",!e.endDate)r.endDate="End date is required";else if(e.startDate){const n=new Date(e.startDate);new Date(e.endDate)<=n&&(r.endDate="End date must be after start date")}if(!e.usePricingTiers)e.price===""||e.price===null||e.price===void 0?r.price="Price is required":(isNaN(e.price)||Number(e.price)<0)&&(r.price="Price must be a valid positive number"),e.compareAtPrice!==""&&e.compareAtPrice!==null&&e.compareAtPrice!==void 0&&(isNaN(e.compareAtPrice)||Number(e.compareAtPrice)<0?r.compareAtPrice="Compare at price must be a valid positive number":Number(e.compareAtPrice)<Number(e.price)&&(r.compareAtPrice="Compare at price must be greater than or equal to price"));else if(e.pricingTiers.length===0)r.pricingTiers="At least one pricing tier is required";else{const n=[];e.pricingTiers.forEach((l,i)=>{const u={};l.name?.trim()||(u.name="Tier name is required"),l.price===""||l.price===null||l.price===void 0?u.price="Tier price is required":(isNaN(l.price)||Number(l.price)<0)&&(u.price="Invalid price"),Object.keys(u).length>0&&(n[i]=u)}),n.some(l=>l)&&(r.tierErrors=n)}if(e.availableSeats!==""&&e.availableSeats!==null&&e.availableSeats!==void 0&&(isNaN(e.availableSeats)||Number(e.availableSeats)<0)&&(r.availableSeats="Available seats must be a valid positive number"),e.imageUrls.length>0){const n=/^https?:\/\/.+/;e.imageUrls.forEach((l,i)=>{l&&!n.test(l)&&(r.imageUrls||(r.imageUrls={}),r.imageUrls[i]="Invalid URL format")})}return e.thumbnail.imageUrl&&!/^https?:\/\/.+/.test(e.thumbnail.imageUrl)&&(r.thumbnailImage="Invalid thumbnail image URL"),e.thumbnail.videoUrl&&!/^https?:\/\/.+/.test(e.thumbnail.videoUrl)&&(r.thumbnailVideo="Invalid thumbnail video URL"),e.useSeatArrangement&&(e.mode==="OFFLINE"||e.mode==="HYBRID")&&(e.seatArrangement.imageUrl?/^https?:\/\/.+/.test(e.seatArrangement.imageUrl)||(r["seatArrangement.imageUrl"]="Invalid seating map image URL"):r["seatArrangement.imageUrl"]="Seating map image is required",(!e.seatArrangement.seats||e.seatArrangement.seats.length===0)&&(r["seatArrangement.seats"]="At least one seat must be defined")),{isValid:Object.keys(r).length===0,errors:r}},PO=()=>({name:"",price:"",compareAtPrice:"",shortDescription:"",notes:"",ticketQuantity:1});function IO({isOpen:e,onClose:t,onSubmit:r,event:n=null,seatArrangement:l=null,isLoading:i=!1,serverError:u=null,validationErrors:g=null}){const h=!!n,[p,y]=w.useState(_O(n,l)),[v,C]=w.useState({});w.useEffect(()=>{e&&(y(_O(n,l)),C({}))},[e,n,l]),w.useEffect(()=>{if(g&&Array.isArray(g)){const Y={};g.forEach(H=>{H.field&&(Y[H.field]=H.message)}),C(H=>({...H,...Y}))}},[g]);const T=Y=>{const{name:H,value:q,type:le}=Y.target,ue=le==="number"?q===""?"":Number(q):q;y(re=>({...re,[H]:ue})),v[H]&&C(re=>({...re,[H]:null}))},D=(Y,H)=>{y(le=>({...le,thumbnail:{...le.thumbnail,[Y]:H}}));const q=Y==="imageUrl"?"thumbnailImage":"thumbnailVideo";v[q]&&C(le=>({...le,[q]:null}))},P=Y=>{y(H=>({...H,imageUrls:H.imageUrls.filter((q,le)=>le!==Y)}))},k=()=>{y(Y=>({...Y,usePricingTiers:!Y.usePricingTiers,pricingTiers:Y.usePricingTiers?[]:[PO()],price:Y.usePricingTiers?"":Y.price,compareAtPrice:Y.usePricingTiers?"":Y.compareAtPrice}))},R=()=>{y(Y=>({...Y,pricingTiers:[...Y.pricingTiers,PO()]}))},B=Y=>{y(H=>({...H,pricingTiers:H.pricingTiers.filter((q,le)=>le!==Y)}))},M=(Y,H,q)=>{y(le=>({...le,pricingTiers:le.pricingTiers.map((ue,re)=>re===Y?{...ue,[H]:H==="price"||H==="compareAtPrice"||H==="ticketQuantity"?q===""?"":Number(q):q}:ue)})),v.tierErrors?.[Y]?.[H]&&C(le=>{const ue=[...le.tierErrors||[]];return ue[Y]&&delete ue[Y][H],{...le,tierErrors:ue}})},G=()=>{y(Y=>({...Y,useSeatArrangement:!Y.useSeatArrangement,seatArrangement:Y.useSeatArrangement?Y.seatArrangement:{imageUrl:"",seatLabelsInput:"",seats:[]}}))},F=(Y,H)=>{y(q=>({...q,seatArrangement:{...q.seatArrangement,[Y]:H}})),v[`seatArrangement.${Y}`]&&C(q=>({...q,[`seatArrangement.${Y}`]:null}))},U=()=>{const Y=p.seatArrangement.seatLabelsInput;if(!Y.trim()){y(q=>({...q,seatArrangement:{...q.seatArrangement,seats:[]}}));return}const H=wc.parseSeatLabels(Y);y(q=>({...q,seatArrangement:{...q.seatArrangement,seats:H}}))},L=Y=>{y(H=>({...H,seatArrangement:{...H.seatArrangement,seats:H.seatArrangement.seats.filter((q,le)=>le!==Y)}}))},V=async Y=>{Y.preventDefault();const H=xue(p,h);if(!H.isValid){C(H.errors);return}const q={name:p.name.trim(),description:p.description.trim(),mode:p.mode,category:p.category,startDate:new Date(p.startDate).toISOString(),endDate:new Date(p.endDate).toISOString()};p.city.trim()&&(q.city=p.city.trim()),p.gmapLink.trim()&&(q.gmapLink=p.gmapLink.trim()),p.imageUrls.length>0&&(q.imageUrls=p.imageUrls.filter(le=>le.trim())),(p.thumbnail.imageUrl||p.thumbnail.videoUrl)&&(q.thumbnail={},p.thumbnail.imageUrl&&(q.thumbnail.imageUrl=p.thumbnail.imageUrl.trim()),p.thumbnail.videoUrl&&(q.thumbnail.videoUrl=p.thumbnail.videoUrl.trim())),p.usePricingTiers&&p.pricingTiers.length>0?q.pricingTiers=p.pricingTiers.map(le=>({name:le.name.trim(),price:Number(le.price),...le.compareAtPrice!==""&&{compareAtPrice:Number(le.compareAtPrice)},...le.shortDescription&&{shortDescription:le.shortDescription.trim()},...le.notes&&{notes:le.notes.trim()},ticketQuantity:Number(le.ticketQuantity)||1})):(q.price=Number(p.price),p.compareAtPrice!==""&&(q.compareAtPrice=Number(p.compareAtPrice))),p.availableSeats!==""&&(q.availableSeats=Number(p.availableSeats)),h&&(q.isLive=p.isLive,q.featured=p.featured),p.useSeatArrangement&&(q.seatArrangement={imageUrl:p.seatArrangement.imageUrl,seats:p.seatArrangement.seats}),await r(q)},j=()=>{i||t()};return a.createElement(jt,{isOpen:e,onClose:j,title:h?"Edit Event":"Create Event",size:"2xl",closeOnOverlayClick:!i},a.createElement("form",{onSubmit:V,className:"space-y-6"},u&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},u),a.createElement("div",{className:"space-y-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Basic Information"),a.createElement("div",null,a.createElement("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1"},"Event Name ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",id:"name",name:"name",value:p.name,onChange:T,disabled:i,maxLength:200,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter event name"}),v.name&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},v.name)),a.createElement("div",null,a.createElement("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1"},"Description ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("textarea",{id:"description",name:"description",value:p.description,onChange:T,disabled:i,rows:4,maxLength:5e3,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none ${v.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter event description"}),a.createElement("div",{className:"flex justify-between mt-1"},v.description?a.createElement("p",{className:"text-sm text-red-500"},v.description):a.createElement("span",null),a.createElement("span",{className:"text-xs text-gray-500"},p.description.length,"/5000"))),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{htmlFor:"mode",className:"block text-sm font-medium text-gray-700 mb-1"},"Mode ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{id:"mode",name:"mode",value:p.mode,onChange:T,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.mode?"border-red-500":"border-gray-300"}`},a.createElement("option",{value:""},"Select mode"),u9.map(Y=>a.createElement("option",{key:Y,value:Y},Y))),v.mode&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},v.mode)),a.createElement("div",null,a.createElement("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1"},"Category ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{id:"category",name:"category",value:p.category,onChange:T,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.category?"border-red-500":"border-gray-300"}`},a.createElement("option",{value:""},"Select category"),c9.map(Y=>a.createElement("option",{key:Y,value:Y},Y.charAt(0)+Y.slice(1).toLowerCase()))),v.category&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},v.category))),(p.mode==="OFFLINE"||p.mode==="HYBRID")&&a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1"},"City ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",id:"city",name:"city",value:p.city,onChange:T,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.city?"border-red-500":"border-gray-300"}`,placeholder:"Enter city"}),v.city&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},v.city)),a.createElement("div",null,a.createElement("label",{htmlFor:"gmapLink",className:"block text-sm font-medium text-gray-700 mb-1"},a.createElement("span",{className:"flex items-center gap-1"},a.createElement(q2,{className:"h-4 w-4"}),"Google Maps Link")),a.createElement("input",{type:"url",id:"gmapLink",name:"gmapLink",value:p.gmapLink,onChange:T,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.gmapLink?"border-red-500":"border-gray-300"}`,placeholder:"https://maps.app.goo.gl/..."}),v.gmapLink&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},v.gmapLink)))),a.createElement("div",{className:"space-y-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Date and Time"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1"},"Start Date & Time ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"datetime-local",id:"startDate",name:"startDate",value:p.startDate,onChange:T,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.startDate?"border-red-500":"border-gray-300"}`}),v.startDate&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},v.startDate)),a.createElement("div",null,a.createElement("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1"},"End Date & Time ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"datetime-local",id:"endDate",name:"endDate",value:p.endDate,onChange:T,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.endDate?"border-red-500":"border-gray-300"}`}),v.endDate&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},v.endDate)))),a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"flex items-center justify-between border-b pb-2"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Pricing"),a.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:p.usePricingTiers,onChange:k,disabled:i,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),a.createElement("span",{className:"text-sm text-gray-600"},"Use pricing tiers"))),p.usePricingTiers?a.createElement("div",{className:"space-y-4"},v.pricingTiers&&a.createElement("p",{className:"text-sm text-red-500"},v.pricingTiers),p.pricingTiers.map((Y,H)=>a.createElement("div",{key:H,className:"p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-3"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"font-medium text-gray-700"},"Tier ",H+1),p.pricingTiers.length>1&&a.createElement("button",{type:"button",onClick:()=>B(H),disabled:i,className:"p-1 text-red-500 hover:bg-red-50 rounded transition-colors"},a.createElement(ur,{className:"h-4 w-4"}))),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Tier Name ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:Y.name,onChange:q=>M(H,"name",q.target.value),disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.tierErrors?.[H]?.name?"border-red-500":"border-gray-300"}`,placeholder:"e.g., General Admission"}),v.tierErrors?.[H]?.name&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},v.tierErrors[H].name)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Price ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",value:Y.price,onChange:q=>M(H,"price",q.target.value),disabled:i,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.tierErrors?.[H]?.price?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),v.tierErrors?.[H]?.price&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},v.tierErrors[H].price)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Compare at Price"),a.createElement("input",{type:"number",value:Y.compareAtPrice,onChange:q=>M(H,"compareAtPrice",q.target.value),disabled:i,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"0.00"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Ticket Quantity"),a.createElement("input",{type:"number",value:Y.ticketQuantity,onChange:q=>M(H,"ticketQuantity",q.target.value),disabled:i,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"1"})),a.createElement("div",{className:"md:col-span-2"},a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Short Description"),a.createElement("input",{type:"text",value:Y.shortDescription,onChange:q=>M(H,"shortDescription",q.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"Brief description of this tier"})),a.createElement("div",{className:"md:col-span-2"},a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Notes"),a.createElement("textarea",{value:Y.notes,onChange:q=>M(H,"notes",q.target.value),disabled:i,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Additional notes"}))))),a.createElement("button",{type:"button",onClick:R,disabled:i,className:"flex items-center gap-2 px-4 py-2 text-gray-800 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50"},a.createElement(kr,{className:"h-4 w-4"}),"Add Pricing Tier"),a.createElement("div",{className:"w-full md:w-1/3"},a.createElement("label",{htmlFor:"availableSeats",className:"block text-sm font-medium text-gray-700 mb-1"},"Total Available Seats"),a.createElement("input",{type:"number",id:"availableSeats",name:"availableSeats",value:p.availableSeats,onChange:T,disabled:i,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.availableSeats?"border-red-500":"border-gray-300"}`,placeholder:"Unlimited"}),v.availableSeats&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},v.availableSeats))):a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},a.createElement("div",null,a.createElement("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1"},"Price ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",id:"price",name:"price",value:p.price,onChange:T,disabled:i,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.price?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),v.price&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},v.price)),a.createElement("div",null,a.createElement("label",{htmlFor:"compareAtPrice",className:"block text-sm font-medium text-gray-700 mb-1"},"Compare at Price"),a.createElement("input",{type:"number",id:"compareAtPrice",name:"compareAtPrice",value:p.compareAtPrice,onChange:T,disabled:i,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.compareAtPrice?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),v.compareAtPrice&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},v.compareAtPrice)),a.createElement("div",null,a.createElement("label",{htmlFor:"availableSeats",className:"block text-sm font-medium text-gray-700 mb-1"},"Available Seats"),a.createElement("input",{type:"number",id:"availableSeats",name:"availableSeats",value:p.availableSeats,onChange:T,disabled:i,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.availableSeats?"border-red-500":"border-gray-300"}`,placeholder:"Unlimited"}),v.availableSeats&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},v.availableSeats)))),a.createElement("div",{className:"space-y-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Media"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement(il,{label:"Thumbnail Image",value:p.thumbnail.imageUrl,onUpload:Y=>D("imageUrl",Y),disabled:i,error:v.thumbnailImage,type:"image",folder:"events/thumbnails",placeholder:"Drop image here or click to upload"}),a.createElement(il,{label:"Thumbnail Video",value:p.thumbnail.videoUrl,onUpload:Y=>D("videoUrl",Y),disabled:i,error:v.thumbnailVideo,type:"video",folder:"events/videos",placeholder:"Drop video here or click to upload"})),a.createElement(il,{label:"Image Gallery",values:p.imageUrls,onUpload:Y=>y(H=>({...H,imageUrls:Y})),onRemove:Y=>P(Y),multiple:!0,disabled:i,error:v.imageUrls?"Some image URLs are invalid":null,type:"image",folder:"events/gallery",placeholder:"Drop images here or click to upload"})),(p.mode==="OFFLINE"||p.mode==="HYBRID")&&a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"flex items-center justify-between border-b pb-2"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2"},a.createElement(tj,{className:"h-5 w-5"}),"Seat Arrangement"),a.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:p.useSeatArrangement,onChange:G,disabled:i,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),a.createElement("span",{className:"text-sm text-gray-600"},"Enable seat selection"))),p.useSeatArrangement&&a.createElement("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",{className:"flex items-start gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg"},a.createElement(tz,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),a.createElement("div",{className:"text-sm text-blue-700"},a.createElement("p",{className:"font-medium"},"Seat arrangement will be created after the event is saved."),a.createElement("p",{className:"text-xs mt-1"},'Upload a seating map image and define seat labels using patterns like "A1-A10" or "1-50", separated by commas.'))),a.createElement(il,{label:"Seating Map Image",value:p.seatArrangement.imageUrl,onUpload:Y=>F("imageUrl",Y),disabled:i,error:v["seatArrangement.imageUrl"],type:"image",folder:"events/seat-maps",placeholder:"Upload seating arrangement diagram",required:!0}),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Seat Labels ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("div",{className:"flex gap-2"},a.createElement("input",{type:"text",value:p.seatArrangement.seatLabelsInput,onChange:Y=>F("seatLabelsInput",Y.target.value),disabled:i,className:`flex-1 px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v["seatArrangement.seats"]?"border-red-500":"border-gray-300"}`,placeholder:"A1-A10, B1-B10, 1-50"}),a.createElement("button",{type:"button",onClick:U,disabled:i||!p.seatArrangement.seatLabelsInput.trim(),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50"},"Generate")),a.createElement("p",{className:"mt-1 text-xs text-gray-500"},'Use patterns: "A1-A10" for A1, A2...A10 | "1-50" for 1, 2...50 | Comma separated for multiple ranges'),v["seatArrangement.seats"]&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},v["seatArrangement.seats"])),p.seatArrangement.seats.length>0&&a.createElement("div",null,a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Generated Seats (",p.seatArrangement.seats.length,")"),a.createElement("button",{type:"button",onClick:()=>y(Y=>({...Y,seatArrangement:{...Y.seatArrangement,seats:[],seatLabelsInput:""}})),disabled:i,className:"text-xs text-red-500 hover:text-red-700"},"Clear all")),a.createElement("div",{className:"max-h-40 overflow-y-auto p-3 bg-white border border-gray-200 rounded-lg"},a.createElement("div",{className:"flex flex-wrap gap-2"},p.seatArrangement.seats.map((Y,H)=>a.createElement("span",{key:H,className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 text-sm rounded-md border border-gray-200"},Y.label,a.createElement("button",{type:"button",onClick:()=>L(H),disabled:i,className:"text-gray-400 hover:text-red-500"},a.createElement(Gr,{className:"h-3 w-3"}))))))))),a.createElement("div",{className:"space-y-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Status"),a.createElement("div",{className:"flex flex-wrap gap-6"},a.createElement("label",{className:"flex items-center gap-3 cursor-pointer"},a.createElement("div",{className:"relative"},a.createElement("input",{type:"checkbox",checked:p.isLive,onChange:Y=>y(H=>({...H,isLive:Y.target.checked})),disabled:i,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-green-500 peer-disabled:opacity-50 transition-colors"}),a.createElement("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})),a.createElement("div",null,a.createElement("span",{className:"text-sm font-medium text-gray-900"},"Live"),a.createElement("p",{className:"text-xs text-gray-500"},"Event is visible to users"))),a.createElement("label",{className:"flex items-center gap-3 cursor-pointer"},a.createElement("div",{className:"relative"},a.createElement("input",{type:"checkbox",checked:p.featured,onChange:Y=>y(H=>({...H,featured:Y.target.checked})),disabled:i,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-purple-500 peer-disabled:opacity-50 transition-colors"}),a.createElement("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})),a.createElement("div",null,a.createElement("span",{className:"text-sm font-medium text-gray-900"},"Featured"),a.createElement("p",{className:"text-xs text-gray-500"},"Highlight in featured sections"))))),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:j,disabled:i,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},i&&a.createElement(ct,{className:"h-4 w-4 animate-spin"}),h?"Update Event":"Create Event"))))}function Lm(e){return e?new Date(e).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"N/A"}function Zg(e){return e==null?"Free":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e)}function bue(e){const t={TECHNOLOGY:"bg-blue-100 text-gray-900",EDUCATION:"bg-indigo-100 text-indigo-700",MEDICAL:"bg-green-100 text-green-700",COMEDY:"bg-yellow-100 text-yellow-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",BUSINESS:"bg-gray-100 text-gray-700",SPORTS:"bg-orange-100 text-orange-700",ARTS:"bg-purple-100 text-purple-700",MUSIC:"bg-red-100 text-red-700",FOOD:"bg-amber-100 text-amber-700",LIFESTYLE:"bg-teal-100 text-teal-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function vue(e){return{ONLINE:"bg-green-100 text-green-700",OFFLINE:"bg-blue-100 text-gray-900",HYBRID:"bg-purple-100 text-purple-700"}[e]||"bg-gray-100 text-gray-700"}function Eue(e){return e==="ONLINE"||e==="HYBRID"?tE:q2}function wue({isOpen:e,onClose:t,event:r}){const[n,l]=w.useState(0);if(w.useEffect(()=>{e&&r&&l(0)},[e,r]),!r)return null;const i=Eue(r.mode),u=r.pricingTiers&&r.pricingTiers.length>0;return a.createElement(jt,{isOpen:e,onClose:t,title:"Event Details",size:"2xl"},a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex items-start justify-between gap-4"},a.createElement("div",{className:"flex-1"},a.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-2"},r.name),a.createElement("div",{className:"flex flex-wrap items-center gap-2"},a.createElement("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${bue(r.category)}`},r.category),a.createElement("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${vue(r.mode)}`},r.mode),r.isLive?a.createElement("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700"},"Live"):a.createElement("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-600"},"Not Live"),r.featured&&a.createElement("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-700"},"Featured"),r.isDeleted&&a.createElement("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-700"},"Deleted")))),(r.thumbnail?.imageUrl||r.imageUrls?.length>0)&&a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"relative aspect-video bg-gray-100 rounded-lg overflow-hidden"},r.thumbnail?.imageUrl||r.imageUrls?.length>0?a.createElement("img",{src:r.imageUrls?.[n]||r.thumbnail?.imageUrl,alt:r.name,className:"w-full h-full object-cover",onError:g=>{g.target.src="https://via.placeholder.com/800x450?text=No+Image"}}):a.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400"},"No image available"),r.thumbnail?.videoUrl&&a.createElement("a",{href:r.thumbnail.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-3 right-3 flex items-center gap-2 px-3 py-2 bg-black/70 text-white rounded-lg hover:bg-black/80 transition-colors"},a.createElement(q_,{className:"h-4 w-4"}),"Watch Video")),r.imageUrls&&r.imageUrls.length>1&&a.createElement("div",{className:"flex gap-2 overflow-x-auto pb-2"},r.imageUrls.map((g,h)=>a.createElement("button",{key:h,onClick:()=>l(h),className:`flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-colors ${n===h?"border-blue-500":"border-transparent"}`},a.createElement("img",{src:g,alt:`${r.name} ${h+1}`,className:"w-full h-full object-cover",onError:p=>{p.target.style.display="none"}}))))),a.createElement("div",null,a.createElement("h3",{className:"text-sm font-medium text-gray-500 mb-2"},"Description"),a.createElement("p",{className:"text-gray-700 whitespace-pre-wrap"},r.description)),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},a.createElement(qr,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Date & Time")),a.createElement("div",{className:"space-y-1"},a.createElement("p",{className:"text-sm"},a.createElement("span",{className:"text-gray-500"},"Starts:")," ",a.createElement("span",{className:"text-gray-900 font-medium"},Lm(r.startDate))),a.createElement("p",{className:"text-sm"},a.createElement("span",{className:"text-gray-500"},"Ends:")," ",a.createElement("span",{className:"text-gray-900 font-medium"},Lm(r.endDate))))),a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},a.createElement(i,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Location")),a.createElement("p",{className:"text-gray-900 font-medium"},r.mode==="ONLINE"?"Online Event":r.city||"Location not specified"),a.createElement("p",{className:"text-sm text-gray-500 capitalize"},r.mode?.toLowerCase()," event"))),a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-3"},a.createElement(Mj,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Pricing")),u?a.createElement("div",{className:"space-y-3"},r.pricingTiers.map((g,h)=>a.createElement("div",{key:h,className:"flex items-start justify-between p-3 bg-white rounded-lg border border-gray-200"},a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900"},g.name),g.shortDescription&&a.createElement("p",{className:"text-sm text-gray-500"},g.shortDescription),g.notes&&a.createElement("p",{className:"text-xs text-gray-400 mt-1"},g.notes),g.ticketQuantity>1&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Includes ",g.ticketQuantity," tickets")),a.createElement("div",{className:"text-right"},a.createElement("p",{className:"font-semibold text-gray-900"},Zg(g.price)),g.compareAtPrice&&a.createElement("p",{className:"text-sm text-gray-400 line-through"},Zg(g.compareAtPrice)))))):a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("p",{className:"text-2xl font-bold text-gray-900"},Zg(r.price)),r.compareAtPrice&&a.createElement("p",{className:"text-sm text-gray-400 line-through"},Zg(r.compareAtPrice))))),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},a.createElement("p",{className:"text-gray-500 mb-1"},"Created By"),a.createElement("p",{className:"text-gray-900 font-medium"},r.createdBy?.name||"Unknown",r.createdBy?.email&&a.createElement("span",{className:"text-gray-500 font-normal"}," (",r.createdBy.email,")")),a.createElement("p",{className:"text-gray-500 text-xs mt-1"},Lm(r.createdAt))),r.updatedBy&&a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},a.createElement("p",{className:"text-gray-500 mb-1"},"Last Updated By"),a.createElement("p",{className:"text-gray-900 font-medium"},r.updatedBy?.name||"Unknown"),a.createElement("p",{className:"text-gray-500 text-xs mt-1"},Lm(r.updatedAt))),r.isDeleted&&r.deletedBy&&a.createElement("div",{className:"p-4 bg-red-50 rounded-lg"},a.createElement("p",{className:"text-red-500 mb-1"},"Deleted By"),a.createElement("p",{className:"text-red-700 font-medium"},r.deletedBy?.name||"Unknown"),a.createElement("p",{className:"text-red-500 text-xs mt-1"},Lm(r.deletedAt)))),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("p",{className:"text-xs text-gray-400"},"Event ID: ",a.createElement("code",{className:"bg-gray-100 px-1 py-0.5 rounded"},r._id)))))}function Nue({filters:e,onFilterChange:t,onSearchChange:r,onReset:n,showDeleted:l,onToggleDeleted:i,disabled:u=!1}){const[g,h]=w.useState(!1),[p,y]=w.useState(e.search||""),v=P=>{const k=P.target.value;y(k),r(k)},C=(P,k)=>{t({[P]:k})},T=()=>{y(""),h(!1),n()},D=e.category||e.mode||e.city||e.isLive!==""||e.featured!==""||e.minPrice||e.maxPrice||e.startDateFrom||e.startDateTo;return a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4"},a.createElement("div",{className:"flex flex-wrap items-center gap-3"},a.createElement("div",{className:"relative flex-1 min-w-[240px]"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.createElement("input",{type:"text",placeholder:"Search events...",value:p,onChange:v,disabled:u,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),p&&a.createElement("button",{onClick:()=>{y(""),r("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},a.createElement(Gr,{className:"h-4 w-4"}))),a.createElement("select",{value:e.category,onChange:P=>C("category",P.target.value),disabled:u,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Categories"),c9.map(P=>a.createElement("option",{key:P,value:P},P.charAt(0)+P.slice(1).toLowerCase()))),a.createElement("select",{value:e.mode,onChange:P=>C("mode",P.target.value),disabled:u,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Modes"),u9.map(P=>a.createElement("option",{key:P,value:P},P))),a.createElement("select",{value:e.isLive,onChange:P=>C("isLive",P.target.value),disabled:u,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"true"},"Live Only"),a.createElement("option",{value:"false"},"Not Live")),a.createElement("select",{value:e.featured,onChange:P=>C("featured",P.target.value),disabled:u,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Events"),a.createElement("option",{value:"true"},"Featured Only"),a.createElement("option",{value:"false"},"Not Featured")),a.createElement("select",{value:e.sortBy,onChange:P=>C("sortBy",P.target.value),disabled:u,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},due.map(P=>a.createElement("option",{key:P.value,value:P.value},"Sort: ",P.label))),a.createElement("select",{value:e.sortOrder,onChange:P=>C("sortOrder",P.target.value),disabled:u,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:"desc"},"Newest First"),a.createElement("option",{value:"asc"},"Oldest First")),a.createElement("button",{onClick:()=>h(!g),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${g||D?"bg-gray-100 border-gray-400 text-gray-900":"border-gray-300 text-gray-600 hover:bg-gray-50"}`},a.createElement(Bl,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),D&&a.createElement("span",{className:"flex items-center justify-center w-5 h-5 text-xs bg-gray-800 text-white rounded-full"},"!"),g?a.createElement(Ej,{className:"h-4 w-4"}):a.createElement(Ll,{className:"h-4 w-4"})),(D||p)&&a.createElement("button",{onClick:T,disabled:u,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50"},a.createElement(ko,{className:"h-4 w-4"}),"Reset")),g&&a.createElement("div",{className:"pt-4 border-t border-gray-200 space-y-4"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"City"),a.createElement("input",{type:"text",placeholder:"Filter by city",value:e.city,onChange:P=>C("city",P.target.value),disabled:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Min Price"),a.createElement("input",{type:"number",placeholder:"0",value:e.minPrice,onChange:P=>C("minPrice",P.target.value),disabled:u,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Max Price"),a.createElement("input",{type:"number",placeholder:"Any",value:e.maxPrice,onChange:P=>C("maxPrice",P.target.value),disabled:u,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})),a.createElement("div",{className:"hidden lg:block"}),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Start Date From"),a.createElement("input",{type:"date",value:e.startDateFrom,onChange:P=>C("startDateFrom",P.target.value),disabled:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Start Date To"),a.createElement("input",{type:"date",value:e.startDateTo,onChange:P=>C("startDateTo",P.target.value),disabled:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})))),a.createElement("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200"},a.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:l,onChange:i,disabled:u,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),a.createElement("span",{className:"text-sm text-gray-600"},"Show deleted events")),l&&a.createElement("span",{className:"text-sm text-amber-600 bg-amber-50 px-2 py-1 rounded"},"Viewing deleted events")))}function MO(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function Sue(e,t){if(t&&t.length>0){const r=t.map(i=>i.price),n=Math.min(...r),l=Math.max(...r);return n===l?Qg(n):`${Qg(n)} - ${Qg(l)}`}return e==null?"Free":Qg(e)}function Qg(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function Cue(e){const t={TECHNOLOGY:"bg-blue-100 text-gray-900",EDUCATION:"bg-indigo-100 text-indigo-700",MEDICAL:"bg-green-100 text-green-700",COMEDY:"bg-yellow-100 text-yellow-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",BUSINESS:"bg-gray-100 text-gray-700",SPORTS:"bg-orange-100 text-orange-700",ARTS:"bg-purple-100 text-purple-700",MUSIC:"bg-red-100 text-red-700",FOOD:"bg-amber-100 text-amber-700",LIFESTYLE:"bg-teal-100 text-teal-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function Aue({events:e,showDeleted:t,isLoading:r,canEdit:n,canDelete:l,canPermanentDelete:i,onView:u,onEdit:g,onDelete:h,onRestore:p,onPermanentDelete:y}){return r?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8"},a.createElement("div",{className:"flex items-center justify-center"},a.createElement(ct,{className:"h-8 w-8 animate-spin text-gray-800"}),a.createElement("span",{className:"ml-3 text-gray-600"},"Loading events..."))):e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8"},a.createElement("div",{className:"text-center text-gray-500"},a.createElement("p",{className:"text-lg font-medium"},"No events found"),a.createElement("p",{className:"text-sm mt-1"},t?"No deleted events to display.":"Try adjusting your filters or create a new event."))):a.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Event"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Category"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Mode"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Date"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Price"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,e.map(v=>a.createElement("tr",{key:v._id,className:`border-b border-gray-100 hover:bg-gray-50 ${v.isDeleted?"bg-red-50/50":""}`},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-4"},a.createElement("div",{className:"relative w-16 h-12 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0"},v.featured&&a.createElement("div",{className:"absolute top-0 left-0 z-10"},a.createElement("div",{className:"bg-purple-600 text-white text-[8px] font-semibold px-1.5 py-0.5 rounded-br-md shadow-sm"},"Featured")),v.thumbnail?.imageUrl||v.imageUrls?.[0]?a.createElement("img",{src:v.thumbnail?.imageUrl||v.imageUrls?.[0],alt:v.name,className:"w-full h-full object-cover",onError:C=>{C.target.style.display="none"}}):a.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs"},"No image")),a.createElement("div",{className:"min-w-0"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("p",{className:"font-medium text-gray-900 truncate max-w-[200px]"},v.name),v.featured&&a.createElement("span",{className:"hidden sm:inline-flex px-1.5 py-0.5 rounded text-[10px] font-medium bg-purple-100 text-purple-700"},"Featured")),v.city&&a.createElement("p",{className:"text-sm text-gray-500 truncate"},v.city)))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Cue(v.category)}`},v.category)),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"text-sm text-gray-600"},v.mode)),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"text-sm"},a.createElement("p",{className:"text-gray-900"},MO(v.startDate)),a.createElement("p",{className:"text-gray-500 text-xs"},"to ",MO(v.endDate)))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"text-sm font-medium text-gray-900"},Sue(v.price,v.pricingTiers))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex flex-col gap-1"},v.isDeleted?a.createElement("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700"},"Deleted"):v.isLive?a.createElement("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700"},"Live"):a.createElement("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"},"Not Live"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>u(v),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details"},a.createElement(Mr,{className:"h-4 w-4"})),t?a.createElement(a.Fragment,null,n&&a.createElement("button",{onClick:()=>p(v),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Restore Event"},a.createElement(ko,{className:"h-4 w-4"})),i&&a.createElement("button",{onClick:()=>y(v),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Permanently Delete"},a.createElement(nV,{className:"h-4 w-4"}))):a.createElement(a.Fragment,null,n&&a.createElement("button",{onClick:()=>g(v),className:"p-2 text-gray-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Event"},a.createElement(cn,{className:"h-4 w-4"})),l&&a.createElement("button",{onClick:()=>h(v),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Event"},a.createElement(ur,{className:"h-4 w-4"})))))))))))}function za({isOpen:e,onClose:t,onConfirm:r,title:n="Confirm Action",message:l="Are you sure you want to proceed?",confirmText:i="Confirm",cancelText:u="Cancel",variant:g="danger",isLoading:h=!1}){const y={danger:{icon:"bg-red-100 text-red-600",button:"bg-red-600 hover:bg-red-700 focus:ring-red-500"},warning:{icon:"bg-yellow-100 text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"},primary:{icon:"bg-blue-100 text-gray-800",button:"bg-gray-800 hover:bg-gray-900 focus:ring-blue-500"}}[g],v=async()=>{await r()};return a.createElement(jt,{isOpen:e,onClose:t,title:n,size:"sm",closeOnOverlayClick:!h},a.createElement("div",{className:"flex flex-col items-center text-center"},a.createElement("div",{className:`w-12 h-12 rounded-full ${y.icon} flex items-center justify-center mb-4`},a.createElement($p,{className:"h-6 w-6"})),a.createElement("p",{className:"text-gray-600 mb-6"},l),a.createElement("div",{className:"flex gap-3 w-full"},a.createElement("button",{onClick:t,disabled:h,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},u),a.createElement("button",{onClick:v,disabled:h,className:`flex-1 px-4 py-2 text-white rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 ${y.button} flex items-center justify-center gap-2`},h&&a.createElement(ct,{className:"h-4 w-4 animate-spin"}),i))))}function Rr({currentPage:e,totalPages:t,totalItems:r,itemsPerPage:n,onPageChange:l,itemLabel:i="items",maxVisiblePages:u=5}){if(t<=0)return null;const g=r>0?(e-1)*n+1:0,h=Math.min(e*n,r),p=P=>{const k=[];let R=Math.max(1,e-Math.floor(P/2)),B=Math.min(t,R+P-1);B-R+1<P&&(R=Math.max(1,B-P+1));for(let M=R;M<=B;M++)k.push(M);return k},y=p(u),v=p(3),C=()=>{e>1&&l(e-1)},T=()=>{e<t&&l(e+1)},D=(P,k=!1)=>a.createElement(a.Fragment,null,P[0]>1&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>l(1),className:`${k?"w-7 h-7 text-xs":"w-8 h-8 text-sm"} rounded-lg text-gray-600 hover:bg-gray-100 transition-all`},"1"),P[0]>2&&a.createElement("span",{className:`${k?"w-7 h-7":"w-8 h-8"} flex items-center justify-center text-gray-400 text-sm`},"...")),P.map(R=>a.createElement("button",{key:R,onClick:()=>l(R),className:`${k?"w-7 h-7 text-xs":"w-8 h-8 text-sm"} rounded-lg transition-all ${e===R?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-100"}`},R)),P[P.length-1]<t&&a.createElement(a.Fragment,null,P[P.length-1]<t-1&&a.createElement("span",{className:`${k?"w-7 h-7":"w-8 h-8"} flex items-center justify-center text-gray-400 text-sm`},"..."),a.createElement("button",{onClick:()=>l(t),className:`${k?"w-7 h-7 text-xs":"w-8 h-8 text-sm"} rounded-lg text-gray-600 hover:bg-gray-100 transition-all`},t)));return a.createElement("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 px-4 sm:px-6 py-3 sm:py-4 border-t border-gray-200"},a.createElement("p",{className:"text-xs sm:text-sm text-gray-600 order-2 sm:order-1"},a.createElement("span",{className:"hidden sm:inline"},"Showing "),g,"-",h," of ",r," ",i),a.createElement("div",{className:"flex items-center gap-1 sm:gap-2 order-1 sm:order-2"},a.createElement("button",{onClick:C,disabled:e===1,className:`p-1.5 sm:p-2 rounded-lg transition-all ${e===1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,"aria-label":"Previous page"},a.createElement(j_,{className:"h-4 w-4 sm:h-5 sm:w-5"})),a.createElement("div",{className:"hidden sm:flex items-center gap-1"},D(y,!1)),a.createElement("div",{className:"flex sm:hidden items-center gap-1"},D(v,!0)),a.createElement("button",{onClick:T,disabled:e===t,className:`p-1.5 sm:p-2 rounded-lg transition-all ${e===t?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,"aria-label":"Next page"},a.createElement(U_,{className:"h-4 w-4 sm:h-5 sm:w-5"}))))}function Tue(){const{hasRole:e}=hn(),t=e(["SUPER_ADMIN","ADMIN"]),r=e(["SUPER_ADMIN","ADMIN"]),n=e(["SUPER_ADMIN","ADMIN"]),l=e(["SUPER_ADMIN"]),{events:i,pagination:u,filters:g,isLoading:h,error:p,showDeleted:y,getEventById:v,createEvent:C,updateEvent:T,deleteEvent:D,restoreEvent:P,permanentDeleteEvent:k,getTicketStats:R,updateExpiredEvents:B,updateFilters:M,updateSearch:G,resetFilters:F,changePage:U,toggleShowDeleted:L,clearError:V}=mue(),[j,Y]=w.useState(!1),[H,q]=w.useState(!1),[le,ue]=w.useState(!1),[re,J]=w.useState(!1),[ae,pe]=w.useState(!1),[xe,ee]=w.useState(!1),[K,te]=w.useState(null),[ge,oe]=w.useState(null),[Ne,ie]=w.useState(null),[me,$e]=w.useState(!1),[ve,We]=w.useState(!1),[nt,Be]=w.useState(null),[Ee,je]=w.useState(null),ce=w.useCallback(async ut=>{te(ut),ie(null),ue(!0)},[]),qe=w.useCallback(async ut=>{$e(!0);try{const Tt=await R(ut);Tt.success&&ie(Tt.data)}finally{$e(!1)}},[R]),Se=w.useCallback(async ut=>{const Tt=await v(ut._id);if(Tt.success){te(Tt.data),Be(null),je(null);try{const Cr=await wc.getSeatArrangement(ut._id);Cr.success&&Cr.data?.arrangement?oe(Cr.data.arrangement):oe(null)}catch{oe(null)}q(!0)}else Be(Tt.error)},[v]),rt=w.useCallback(()=>{te(null),Be(null),je(null),Y(!0)},[]),it=w.useCallback(ut=>{te(ut),J(!0)},[]),pt=w.useCallback(ut=>{te(ut),pe(!0)},[]),Ke=w.useCallback(ut=>{te(ut),ee(!0)},[]),lt=w.useCallback(async ut=>{We(!0),Be(null),je(null);const{seatArrangement:Tt,...Cr}=ut;try{const xr=await C(Cr);if(xr.success){if(Tt&&Tt.seats?.length>0){const ia=xr.data._id,kt={imageUrl:Tt.imageUrl,seats:Tt.seats.map(Je=>({label:Je.label}))},be=await wc.createSeatArrangement(ia,kt);be.success||(console.error("Failed to create seat arrangement:",be.error),Be(`Event created, but seat arrangement failed: ${be.error}`))}Y(!1)}else Be(xr.error),je(xr.validationErrors)}finally{We(!1)}},[C]),Ue=w.useCallback(async ut=>{if(!K)return;We(!0),Be(null),je(null);const{seatArrangement:Tt,...Cr}=ut;try{const xr=await T(K._id,Cr);if(xr.success){const ia=Tt&&Tt.seats?.length>0,kt=!!ge;if(ia&&!kt){const be={imageUrl:Tt.imageUrl,seats:Tt.seats.map(st=>({label:st.label}))},Je=await wc.createSeatArrangement(K._id,be);Je.success||console.error("Failed to create seat arrangement:",Je.error)}else if(ia&&kt){const be={imageUrl:Tt.imageUrl,seats:Tt.seats.map(st=>({label:st.label}))},Je=await wc.updateSeatArrangement(K._id,be);Je.success||console.error("Failed to update seat arrangement:",Je.error)}else if(!ia&&kt){const be=await wc.deleteSeatArrangement(K._id);be.success||console.error("Failed to delete seat arrangement:",be.error)}q(!1),te(null),oe(null)}else Be(xr.error),je(xr.validationErrors)}finally{We(!1)}},[K,ge,T]),mt=w.useCallback(async()=>{if(K){We(!0);try{const ut=await D(K._id);ut.success?(J(!1),te(null)):Be(ut.error)}finally{We(!1)}}},[K,D]),$t=w.useCallback(async()=>{if(K){We(!0);try{const ut=await P(K._id);ut.success?(pe(!1),te(null)):Be(ut.error)}finally{We(!1)}}},[K,P]),ir=w.useCallback(async()=>{if(K){We(!0);try{const ut=await k(K._id);ut.success?(ee(!1),te(null)):Be(ut.error)}finally{We(!1)}}},[K,k]),Br=w.useCallback(async()=>{const ut=await B();ut.success&&ut.updatedCount>0&&console.log(`Updated ${ut.updatedCount} expired events`)},[B]);return a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Events"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Manage your events, pricing, and ticket availability")),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("button",{onClick:Br,disabled:h,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Mark expired events as not live"},a.createElement($n,{className:`h-4 w-4 ${h?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Update Expired")),t&&a.createElement("button",{onClick:rt,className:"flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-900 transition-colors"},a.createElement(kr,{className:"h-5 w-5"}),a.createElement("span",null,"Create Event")))),p&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Xt,{className:"h-5 w-5 flex-shrink-0"}),a.createElement("p",{className:"flex-1"},p),a.createElement("button",{onClick:V,className:"text-red-500 hover:text-red-700 font-medium"},"Dismiss")),a.createElement(Nue,{filters:g,onFilterChange:M,onSearchChange:G,onReset:F,showDeleted:y,onToggleDeleted:L,disabled:h}),a.createElement(Aue,{events:i,showDeleted:y,isLoading:h,canEdit:r,canDelete:n,canPermanentDelete:l,onView:ce,onEdit:Se,onDelete:it,onRestore:pt,onPermanentDelete:Ke}),u.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Rr,{currentPage:u.currentPage,totalPages:u.totalPages,totalItems:u.totalCount,itemsPerPage:u.limit,onPageChange:U,itemLabel:"events"})),a.createElement(IO,{isOpen:j,onClose:()=>Y(!1),onSubmit:lt,event:null,isLoading:ve,serverError:nt,validationErrors:Ee}),a.createElement(IO,{isOpen:H,onClose:()=>{q(!1),te(null),oe(null)},onSubmit:Ue,event:K,seatArrangement:ge,isLoading:ve,serverError:nt,validationErrors:Ee}),a.createElement(wue,{isOpen:le,onClose:()=>{ue(!1),te(null),ie(null)},event:K,ticketStats:Ne,isLoadingStats:me,onFetchStats:qe}),a.createElement(za,{isOpen:re,onClose:()=>{J(!1),te(null)},onConfirm:mt,title:"Delete Event",message:`Are you sure you want to delete "${K?.name}"? This event will be moved to the deleted items and can be restored later.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:ve}),a.createElement(za,{isOpen:ae,onClose:()=>{pe(!1),te(null)},onConfirm:$t,title:"Restore Event",message:`Are you sure you want to restore "${K?.name}"? This event will be available again in the events list.`,confirmText:"Restore",cancelText:"Cancel",variant:"primary",isLoading:ve}),a.createElement(za,{isOpen:xe,onClose:()=>{ee(!1),te(null)},onConfirm:ir,title:"Permanently Delete Event",message:`Are you sure you want to permanently delete "${K?.name}"? This action cannot be undone and all associated data will be lost.`,confirmText:"Delete Permanently",cancelText:"Cancel",variant:"danger",isLoading:ve}))}function Oue(){const[e,t]=w.useState(1),[r,n]=w.useState(""),[l,i]=w.useState(""),[u,g]=w.useState(""),h=10,p={confirmed:"bg-green-100 text-green-700",pending:"bg-yellow-100 text-yellow-700",cancelled:"bg-red-100 text-red-700"},[y,v]=w.useState([{id:1,userName:"John Doe",email:"john.doe@email.com",phone:"+91 9876543210",eventName:"Tech Conference 2025",enrollmentDate:"2025-02-15",status:"confirmed"},{id:2,userName:"Jane Smith",email:"jane.smith@email.com",phone:"+91 9876543211",eventName:"Medical Summit 2025",enrollmentDate:"2025-02-18",status:"pending"},{id:3,userName:"Mike Johnson",email:"mike.j@email.com",phone:"+91 9876543212",eventName:"Comedy Night Live",enrollmentDate:"2025-02-20",status:"confirmed"},{id:4,userName:"Sarah Wilson",email:"sarah.w@email.com",phone:"+91 9876543213",eventName:"Rock Music Festival",enrollmentDate:"2025-02-22",status:"cancelled"},{id:5,userName:"David Brown",email:"david.b@email.com",phone:"+91 9876543214",eventName:"AI Workshop 2025",enrollmentDate:"2025-02-25",status:"confirmed"},{id:6,userName:"Emily Davis",email:"emily.d@email.com",phone:"+91 9876543215",eventName:"Health Awareness Camp",enrollmentDate:"2025-02-28",status:"pending"},{id:7,userName:"Chris Martin",email:"chris.m@email.com",phone:"+91 9876543216",eventName:"Stand-up Comedy Show",enrollmentDate:"2025-03-01",status:"confirmed"},{id:8,userName:"Lisa Anderson",email:"lisa.a@email.com",phone:"+91 9876543217",eventName:"Jazz Night",enrollmentDate:"2025-03-05",status:"confirmed"},{id:9,userName:"Robert Taylor",email:"robert.t@email.com",phone:"+91 9876543218",eventName:"Tech Conference 2025",enrollmentDate:"2025-03-08",status:"pending"},{id:10,userName:"Amanda White",email:"amanda.w@email.com",phone:"+91 9876543219",eventName:"Medical Summit 2025",enrollmentDate:"2025-03-10",status:"confirmed"},{id:11,userName:"Kevin Lee",email:"kevin.l@email.com",phone:"+91 9876543220",eventName:"Rock Music Festival",enrollmentDate:"2025-03-12",status:"cancelled"},{id:12,userName:"Michelle Garcia",email:"michelle.g@email.com",phone:"+91 9876543221",eventName:"Comedy Night Live",enrollmentDate:"2025-03-15",status:"confirmed"}]),C=[...new Set(y.map(L=>L.eventName))],T=["confirmed","pending","cancelled"],D=L=>{window.confirm("Are you sure you want to delete this enrollment?")&&v(y.filter(V=>V.id!==L))},P=y.filter(L=>{const V=L.userName.toLowerCase().includes(r.toLowerCase())||L.email.toLowerCase().includes(r.toLowerCase()),j=l?L.status===l:!0,Y=u?L.eventName===u:!0;return V&&j&&Y}),k=Math.ceil(P.length/h),R=(e-1)*h,B=R+h,M=P.slice(R,B),G=(L,V)=>{L(V),t(1)},F=()=>{e>1&&t(e-1)},U=()=>{e<k&&t(e+1)};return a.createElement("div",null,a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6"},a.createElement("div",{className:"flex flex-wrap items-center gap-4"},a.createElement("div",{className:"relative w-80"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.createElement("input",{type:"text",placeholder:"Search by name or email...",value:r,onChange:L=>G(n,L.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),a.createElement("select",{value:l,onChange:L=>G(i,L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white"},a.createElement("option",{value:""},"All Status"),T.map(L=>a.createElement("option",{key:L,value:L,className:"capitalize"},L.charAt(0).toUpperCase()+L.slice(1)))),a.createElement("select",{value:u,onChange:L=>G(g,L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white"},a.createElement("option",{value:""},"All Events"),C.map(L=>a.createElement("option",{key:L,value:L},L))))),a.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"User"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Event"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Phone"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Enrollment Date"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,M.map(L=>a.createElement("tr",{key:L.id,className:"border-b border-gray-100 hover:bg-gray-50"},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900"},L.userName),a.createElement("p",{className:"text-sm text-gray-500"},L.email))),a.createElement("td",{className:"px-6 py-4 text-gray-600"},L.eventName),a.createElement("td",{className:"px-6 py-4 text-gray-600"},L.phone),a.createElement("td",{className:"px-6 py-4 text-gray-600"},L.enrollmentDate),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-medium capitalize ${p[L.status]}`},L.status)),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-2"},a.createElement("button",{className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-all",title:"View Details"},a.createElement(Mr,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>D(L.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete"},a.createElement(ur,{className:"h-5 w-5"})))))))),a.createElement("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200"},a.createElement("p",{className:"text-sm text-gray-600"},"Showing ",P.length>0?R+1:0," to"," ",Math.min(B,P.length)," of ",P.length," enrollments"),a.createElement("div",{className:"flex items-center gap-2"},a.createElement("button",{onClick:F,disabled:e===1,className:`p-2 rounded-lg transition-all ${e===1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`},a.createElement(j_,{className:"h-5 w-5"})),Array.from({length:k},(L,V)=>V+1).map(L=>a.createElement("button",{key:L,onClick:()=>t(L),className:`w-8 h-8 rounded-lg transition-all ${e===L?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-100"}`},L)),a.createElement("button",{onClick:U,disabled:e===k,className:`p-2 rounded-lg transition-all ${e===k?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`},a.createElement(U_,{className:"h-5 w-5"}))))))}function Due(){return a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-6"},a.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-4"},"Coupons"),a.createElement("p",{className:"text-gray-600"},"Manage your discount coupons here."))}const gc={LIST:"/app/auth/users",GET_BY_ID:e=>`/app/auth/users/${e}`,UPDATE:e=>`/app/auth/users/${e}`,DELETE:e=>`/app/auth/users/${e}`,RESTORE:e=>`/app/auth/users/${e}/restore`,PERMANENT_DELETE:e=>`/app/auth/users/${e}/permanent`},ku={getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.search&&t.append("search",e.search),e.includeDeleted&&t.append("includeDeleted",e.includeDeleted);const r=t.toString(),n=r?`${gc.LIST}?${r}`:gc.LIST;console.log("[UserService] Fetching users with params:",e);const l=await Pe(ke.get(n));return l.success?console.log("[UserService] Fetched users:",l.data.users?.length):console.error("[UserService] Failed to fetch users:",l.message),l},getById:async e=>{console.log("[UserService] Fetching user by ID:",e);const t=await Pe(ke.get(gc.GET_BY_ID(e)));return t.success?console.log("[UserService] Fetched user:",t.data.user?.name):console.error("[UserService] Failed to fetch user:",t.message),t},update:async(e,t)=>{console.log("[UserService] Updating user:",e);const r=await Pe(ke.put(gc.UPDATE(e),t));return r.success?console.log("[UserService] User updated successfully"):console.error("[UserService] Failed to update user:",r.message),r},delete:async e=>{console.log("[UserService] Soft deleting user:",e);const t=await Pe(ke.delete(gc.DELETE(e)));return t.success?console.log("[UserService] User soft deleted successfully"):console.error("[UserService] Failed to delete user:",t.message),t},restore:async e=>{console.log("[UserService] Restoring user:",e);const t=await Pe(ke.post(gc.RESTORE(e)));return t.success?console.log("[UserService] User restored successfully"):console.error("[UserService] Failed to restore user:",t.message),t},permanentDelete:async e=>{console.log("[UserService] Permanently deleting user:",e);const t=await Pe(ke.delete(gc.PERMANENT_DELETE(e)));return t.success?console.log("[UserService] User permanently deleted"):console.error("[UserService] Failed to permanently delete user:",t.message),t}};function _ue(e={}){const[t,r]=w.useState([]),[n,l]=w.useState({total:0,page:1,limit:10,totalPages:0}),[i,u]=w.useState({search:"",includeDeleted:!1,...e}),[g,h]=w.useState(!1),[p,y]=w.useState(null),v=w.useCallback(async(U=n.page)=>{h(!0),y(null);try{const L={page:U,limit:n.limit,...i.search&&{search:i.search},...i.includeDeleted&&{includeDeleted:i.includeDeleted}},V=await ku.getAll(L);V.success?(r(V.data.users),l(V.data.pagination)):(y(V.message),r([]))}catch{y("Failed to fetch users"),r([])}finally{h(!1)}},[i,n.limit]),C=w.useCallback(async U=>{try{const L=await ku.getById(U);return L.success?{success:!0,data:L.data.user}:{success:!1,error:L.message}}catch{return{success:!1,error:"Failed to fetch user details"}}},[]),T=w.useCallback(async(U,L)=>{h(!0),y(null);try{const V=await ku.update(U,L);return V.success?(r(j=>j.map(Y=>Y._id===U?{...Y,...V.data.user}:Y)),{success:!0,data:V.data}):{success:!1,error:V.message,validationErrors:V.data?.errors}}catch{return{success:!1,error:"Failed to update user"}}finally{h(!1)}},[]),D=w.useCallback(async U=>{h(!0),y(null);try{const L=await ku.delete(U);return L.success?(i.includeDeleted?r(V=>V.map(j=>j._id===U?{...j,isDeleted:!0}:j)):(r(V=>V.filter(j=>j._id!==U)),l(V=>({...V,total:V.total-1,totalPages:Math.ceil((V.total-1)/V.limit)}))),{success:!0}):{success:!1,error:L.message}}catch{return{success:!1,error:"Failed to delete user"}}finally{h(!1)}},[i.includeDeleted]),P=w.useCallback(async U=>{h(!0),y(null);try{const L=await ku.restore(U);return L.success?(r(V=>V.map(j=>j._id===U?{...j,isDeleted:!1,deletedAt:null}:j)),{success:!0}):{success:!1,error:L.message}}catch{return{success:!1,error:"Failed to restore user"}}finally{h(!1)}},[]),k=w.useCallback(async U=>{h(!0),y(null);try{const L=await ku.permanentDelete(U);return L.success?(r(V=>V.filter(j=>j._id!==U)),l(V=>({...V,total:V.total-1,totalPages:Math.ceil((V.total-1)/V.limit)})),{success:!0}):{success:!1,error:L.message}}catch{return{success:!1,error:"Failed to permanently delete user"}}finally{h(!1)}},[]),R=w.useCallback(U=>{u(L=>({...L,...U}))},[]),B=w.useCallback(()=>{u({search:"",includeDeleted:!1,...e})},[e]),M=w.useCallback(U=>{v(U)},[v]),G=w.useCallback(U=>{l(L=>({...L,limit:U}))},[]),F=w.useCallback(()=>{y(null)},[]);return w.useEffect(()=>{v(1)},[i]),{users:t,pagination:n,filters:i,isLoading:g,error:p,fetchUsers:v,getUserById:C,updateUser:T,deleteUser:D,restoreUser:P,permanentDeleteUser:k,updateFilters:R,resetFilters:B,changePage:M,changeLimit:G,clearError:F}}const RO=(e=null)=>({name:e?.name||"",email:e?.email||"",phone:e?.phone||""}),kue=e=>{const t={};if(e.name.trim()?(e.name.length<2||e.name.length>100)&&(t.name="Name must be between 2 and 100 characters"):t.name="Name is required",e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(t.email="Invalid email format"):t.email="Email is required",!e.phone.trim())t.phone="Phone is required";else{const r=e.phone.replace(/[^0-9]/g,"");(r.length<10||r.length>15)&&(t.phone="Phone must be 10-15 digits")}return{isValid:Object.keys(t).length===0,errors:t}};function Pue({isOpen:e,onClose:t,onSubmit:r,user:n=null,isLoading:l=!1,serverError:i=null,validationErrors:u=null}){const[g,h]=w.useState(RO(n)),[p,y]=w.useState({});w.useEffect(()=>{e&&(h(RO(n)),y({}))},[e,n]),w.useEffect(()=>{if(u&&Array.isArray(u)){const D={};u.forEach(P=>{P.field&&(D[P.field]=P.message)}),y(P=>({...P,...D}))}},[u]);const v=D=>{const{name:P,value:k}=D.target;h(R=>({...R,[P]:k})),p[P]&&y(R=>({...R,[P]:null}))},C=async D=>{D.preventDefault();const P=kue(g);if(!P.isValid){y(P.errors);return}const k={...g};k.phone=k.phone.replace(/[^0-9]/g,""),await r(k)},T=()=>{l||t()};return a.createElement(jt,{isOpen:e,onClose:T,title:"Edit User",size:"md",closeOnOverlayClick:!l},a.createElement("form",{onSubmit:C},i&&a.createElement("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},i),a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1"},"Name ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",id:"name",name:"name",value:g.name,onChange:v,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter user name"}),p.name&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},p.name)),a.createElement("div",null,a.createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1"},"Email ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"email",id:"email",name:"email",value:g.email,onChange:v,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),p.email&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},p.email)),a.createElement("div",null,a.createElement("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1"},"Phone ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"tel",id:"phone",name:"phone",value:g.phone,onChange:v,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.phone?"border-red-500":"border-gray-300"}`,placeholder:"Enter phone number"}),p.phone&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},p.phone))),a.createElement("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:T,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},l&&a.createElement(ct,{className:"h-4 w-4 animate-spin"}),"Update User"))))}const Rv=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Iue=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-";function Mue({isOpen:e,onClose:t,user:r,isLoading:n=!1}){return!r&&!n?null:a.createElement(jt,{isOpen:e,onClose:t,title:"User Details",size:"lg"},n?a.createElement("div",{className:"py-12 flex flex-col items-center justify-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading user details...")):r?a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex items-start gap-4 pb-4 border-b border-gray-200"},a.createElement("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center shrink-0"},a.createElement("span",{className:"text-xl font-semibold text-gray-800"},r.name?.charAt(0)?.toUpperCase()||"?")),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900 truncate"},r.name),a.createElement("div",{className:"flex flex-wrap items-center gap-2 mt-1"},r.isDeleted&&a.createElement("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-xs font-medium flex items-center gap-1"},a.createElement(Xt,{className:"h-3 w-3"}),"Deleted")))),a.createElement("div",{className:"space-y-3"},a.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Contact Information"),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement($2,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Email")),a.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},r.email||"-")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(vi,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Phone")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},r.phone||"-")))),a.createElement("div",{className:"space-y-3"},a.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Activity"),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(ea,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Last Login")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},r.lastLogin?Rv(r.lastLogin):"Never")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(qr,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Joined")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},Rv(r.createdAt))))),r.enrollments&&r.enrollments.length>0?a.createElement("div",{className:"space-y-3"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Enrollments (",r.enrollments.length,")")),a.createElement("div",{className:"space-y-2 max-h-64 overflow-y-auto"},r.enrollments.map((l,i)=>a.createElement("div",{key:l._id||i,className:"bg-gray-50 rounded-lg p-3 flex items-center gap-3"},a.createElement("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center shrink-0"},a.createElement(W3,{className:"h-4 w-4 text-gray-800"})),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},l.event?.name||l.event||"Unknown Event"),a.createElement("p",{className:"text-xs text-gray-500"},"Enrolled: ",Iue(l.enrolledAt))),l.certificate&&a.createElement("a",{href:l.certificate,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-gray-800 hover:text-gray-900 hover:underline shrink-0"},"View Certificate"))))):a.createElement("div",{className:"bg-gray-50 rounded-lg p-4 text-center"},a.createElement(W3,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),a.createElement("p",{className:"text-sm text-gray-500"},"No enrollments yet")),r.isDeleted&&r.deletedAt&&a.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 text-red-700"},a.createElement(Xt,{className:"h-4 w-4 shrink-0"}),a.createElement("p",{className:"text-sm"},"This user was deleted on ",Rv(r.deletedAt)))),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"},"Close"))):a.createElement("div",{className:"py-12 text-center text-gray-500"},a.createElement("p",null,"No user data available")))}function Rue(){const{hasRole:e}=hn(),{users:t,pagination:r,filters:n,isLoading:l,error:i,getUserById:u,updateUser:g,deleteUser:h,restoreUser:p,permanentDeleteUser:y,updateFilters:v,changePage:C,clearError:T}=_ue(),D=e(["SUPER_ADMIN","ADMIN"]),[P,k]=w.useState(!1),[R,B]=w.useState(!1),[M,G]=w.useState(!1),[F,U]=w.useState(!1),[L,V]=w.useState(!1),[j,Y]=w.useState(null),[H,q]=w.useState(null),[le,ue]=w.useState(!1),[re,J]=w.useState(null),[ae,pe]=w.useState(null),[xe,ee]=w.useState(!1),[K,te]=w.useState("");w.useEffect(()=>{const ce=setTimeout(()=>{K!==n.search&&v({search:K})},300);return()=>clearTimeout(ce)},[K,n.search,v]);const ge=async ce=>{B(!0),ue(!0),q(null);const qe=await u(ce._id);qe.success?q(qe.data):q(ce),ue(!1)},oe=ce=>{D&&(Y(ce),J(null),pe(null),k(!0))},Ne=async ce=>{ee(!0),J(null),pe(null);const qe=await g(j._id,ce);qe.success?(k(!1),Y(null)):(J(qe.error),pe(qe.validationErrors)),ee(!1)},ie=ce=>{D&&(Y(ce),G(!0))},me=async()=>{const ce=await h(j._id);G(!1),Y(null),ce.success||console.error("Delete failed:",ce.error)},$e=ce=>{D&&(Y(ce),U(!0))},ve=async()=>{const ce=await p(j._id);U(!1),Y(null),ce.success||console.error("Restore failed:",ce.error)},We=ce=>{D&&(Y(ce),V(!0))},nt=async()=>{const ce=await y(j._id);V(!1),Y(null),ce.success||console.error("Permanent delete failed:",ce.error)},Be=()=>{v({includeDeleted:!n.includeDeleted})},Ee=()=>{k(!1),Y(null),J(null),pe(null)},je=()=>{B(!1),q(null)};return a.createElement("div",{className:"space-y-4 sm:space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900"},"Users Management"),a.createElement("p",{className:"text-sm sm:text-base text-gray-600 mt-1"},"Manage and monitor user accounts"))),a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 border border-gray-200"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4"},a.createElement("div",{className:"relative flex-1 max-w-md"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.createElement("input",{type:"text",placeholder:"Search by name, email, or phone...",value:K,onChange:ce=>te(ce.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:border-gray-800 outline-none text-sm"})),D&&a.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:n.includeDeleted,onChange:Be,className:"w-4 h-4 text-gray-800 border-gray-300 rounded focus:ring-0"}),a.createElement("span",{className:"text-sm text-gray-600"},"Show deleted users")))),i&&a.createElement("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6 flex items-center justify-between"},a.createElement("div",{className:"flex items-center gap-2 text-red-700"},a.createElement($p,{className:"h-5 w-5"}),a.createElement("span",null,i)),a.createElement("button",{onClick:T,className:"text-red-700 hover:text-red-900"},"Dismiss")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200"},l&&t.length===0?a.createElement("div",{className:"py-12 flex flex-col items-center justify-center"},a.createElement(ct,{className:"h-8 w-8 text-blue-600 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading users...")):t.length===0?a.createElement("div",{className:"py-12 text-center text-gray-500"},a.createElement("p",null,"No users found"),n.search&&a.createElement("p",{className:"text-sm mt-1"},"Try adjusting your search criteria")):a.createElement(a.Fragment,null,a.createElement("div",{className:"hidden lg:block overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"User"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Phone"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Last Login"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,t.map(ce=>a.createElement("tr",{key:ce._id,className:`border-b border-gray-100 hover:bg-gray-50 transition-colors ${ce.isDeleted?"bg-red-50/50":""}`},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-700 to-gray-800 rounded-full flex items-center justify-center flex-shrink-0"},a.createElement("span",{className:"text-white font-semibold text-sm"},ce.name?.charAt(0)?.toUpperCase()||"?")),a.createElement("div",{className:"min-w-0"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},ce.name),a.createElement("p",{className:"text-sm text-gray-500 truncate"},ce.email)))),a.createElement("td",{className:"px-6 py-4 text-gray-600"},ce.phone||"-"),a.createElement("td",{className:"px-6 py-4 text-gray-600 text-sm"},ce.lastLogin?new Date(ce.lastLogin).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"Never"),a.createElement("td",{className:"px-6 py-4"},ce.isDeleted?a.createElement("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700"},"Deleted"):a.createElement("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700"},"Active")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-2"},a.createElement("button",{onClick:()=>ge(ce),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-all",title:"View Details"},a.createElement(Mr,{className:"h-5 w-5"})),D&&a.createElement(a.Fragment,null,ce.isDeleted?a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>$e(ce),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Restore User"},a.createElement(ko,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>We(ce),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Permanently Delete"},a.createElement(ur,{className:"h-5 w-5"}))):a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>oe(ce),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit"},a.createElement(cn,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>ie(ce),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete"},a.createElement(ur,{className:"h-5 w-5"}))))))))))),a.createElement("div",{className:"lg:hidden divide-y divide-gray-200"},t.map(ce=>a.createElement("div",{key:ce._id,className:`p-4 hover:bg-gray-50 transition-colors ${ce.isDeleted?"bg-red-50/50":""}`},a.createElement("div",{className:"flex items-start gap-3 mb-3"},a.createElement("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-700 to-gray-800 rounded-full flex items-center justify-center flex-shrink-0"},a.createElement("span",{className:"text-white font-semibold"},ce.name?.charAt(0)?.toUpperCase()||"?")),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"font-semibold text-gray-900 truncate"},ce.name),a.createElement("p",{className:"text-sm text-gray-500 truncate"},ce.email),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},ce.phone||"No phone")),a.createElement("div",null,ce.isDeleted?a.createElement("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700"},"Deleted"):a.createElement("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700"},"Active"))),a.createElement("div",{className:"flex items-center justify-between text-sm"},a.createElement("span",{className:"text-gray-500"},"Last login:"," ",ce.lastLogin?new Date(ce.lastLogin).toLocaleDateString("en-IN",{day:"numeric",month:"short"}):"Never"),a.createElement("div",{className:"flex items-center gap-1"},a.createElement("button",{onClick:()=>ge(ce),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-all",title:"View Details"},a.createElement(Mr,{className:"h-5 w-5"})),D&&a.createElement(a.Fragment,null,ce.isDeleted?a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>$e(ce),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Restore"},a.createElement(ko,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>We(ce),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Forever"},a.createElement(ur,{className:"h-5 w-5"}))):a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>oe(ce),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit"},a.createElement(cn,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>ie(ce),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete"},a.createElement(ur,{className:"h-5 w-5"}))))))))),a.createElement(Rr,{currentPage:r.page,totalPages:r.totalPages,totalItems:r.total,itemsPerPage:r.limit,onPageChange:C,itemLabel:"users"}))),a.createElement(Pue,{isOpen:P,onClose:Ee,onSubmit:Ne,user:j,isLoading:xe,serverError:re,validationErrors:ae}),a.createElement(Mue,{isOpen:R,onClose:je,user:H,isLoading:le}),a.createElement(za,{isOpen:M,onClose:()=>G(!1),onConfirm:me,title:"Delete User",message:`Are you sure you want to delete "${j?.name}"? This action can be undone by restoring the user.`,confirmText:"Delete",variant:"danger",isLoading:l}),a.createElement(za,{isOpen:F,onClose:()=>U(!1),onConfirm:ve,title:"Restore User",message:`Are you sure you want to restore "${j?.name}"?`,confirmText:"Restore",variant:"primary",isLoading:l}),a.createElement(za,{isOpen:L,onClose:()=>V(!1),onConfirm:nt,title:"Permanently Delete User",message:`Are you sure you want to PERMANENTLY delete "${j?.name}"? This action CANNOT be undone and all user data will be lost forever.`,confirmText:"Delete Forever",variant:"danger",isLoading:l}))}const Al={CREATE:"/web/auth/create",LIST:"/web/auth/admins",GET_BY_ID:e=>`/web/auth/admins/${e}`,UPDATE:e=>`/web/auth/admins/${e}`,DELETE:e=>`/web/auth/admins/${e}`,GET_ALLOWED_EVENTS:e=>`/web/auth/admins/${e}/allowed-events`,UPDATE_ALLOWED_EVENTS:e=>`/web/auth/admins/${e}/allowed-events`,ADD_ALLOWED_EVENT:(e,t)=>`/web/auth/admins/${e}/allowed-events/${t}`,REMOVE_ALLOWED_EVENT:(e,t)=>`/web/auth/admins/${e}/allowed-events/${t}`},Bm={create:async e=>{console.log("[AdminService] Creating admin:",e.username);const t=await Pe(ke.post(Al.CREATE,e));return t.success?console.log("[AdminService] Admin created successfully:",t.data.admin._id):console.error("[AdminService] Failed to create admin:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.status&&t.append("status",e.status),e.role&&t.append("role",e.role),e.search&&t.append("search",e.search);const r=t.toString(),n=r?`${Al.LIST}?${r}`:Al.LIST;console.log("[AdminService] Fetching admins with params:",e);const l=await Pe(ke.get(n));return l.success?console.log("[AdminService] Fetched admins:",l.data.admins?.length):console.error("[AdminService] Failed to fetch admins:",l.message),l},getById:async e=>{console.log("[AdminService] Fetching admin by ID:",e);const t=await Pe(ke.get(Al.GET_BY_ID(e)));return t.success?console.log("[AdminService] Fetched admin:",t.data.admin.username):console.error("[AdminService] Failed to fetch admin:",t.message),t},update:async(e,t)=>{console.log("[AdminService] Updating admin:",e);const r=await Pe(ke.put(Al.UPDATE(e),t));return r.success?console.log("[AdminService] Admin updated successfully"):console.error("[AdminService] Failed to update admin:",r.message),r},delete:async e=>{console.log("[AdminService] Deleting admin:",e);const t=await Pe(ke.delete(Al.DELETE(e)));return t.success?console.log("[AdminService] Admin deleted successfully"):console.error("[AdminService] Failed to delete admin:",t.message),t},getAllowedEvents:async e=>{console.log("[AdminService] Fetching allowed events for admin:",e);const t=await Pe(ke.get(Al.GET_ALLOWED_EVENTS(e)));return t.success?console.log("[AdminService] Fetched allowed events:",t.data.allowedEvents?.length):console.error("[AdminService] Failed to fetch allowed events:",t.message),t},updateAllowedEvents:async(e,t)=>{console.log("[AdminService] Updating allowed events for admin:",e);const r=await Pe(ke.put(Al.UPDATE_ALLOWED_EVENTS(e),{allowedEvents:t}));return r.success?console.log("[AdminService] Allowed events updated successfully"):console.error("[AdminService] Failed to update allowed events:",r.message),r},addAllowedEvent:async(e,t)=>{console.log("[AdminService] Adding event to allowed events:",t);const r=await Pe(ke.post(Al.ADD_ALLOWED_EVENT(e,t)));return r.success?console.log("[AdminService] Event added to allowed events"):console.error("[AdminService] Failed to add event:",r.message),r},removeAllowedEvent:async(e,t)=>{console.log("[AdminService] Removing event from allowed events:",t);const r=await Pe(ke.delete(Al.REMOVE_ALLOWED_EVENT(e,t)));return r.success?console.log("[AdminService] Event removed from allowed events"):console.error("[AdminService] Failed to remove event:",r.message),r}};function Lue(e={}){const[t,r]=w.useState([]),[n,l]=w.useState({total:0,page:1,limit:10,totalPages:0}),[i,u]=w.useState({search:"",status:"",role:"",...e}),[g,h]=w.useState(!1),[p,y]=w.useState(null),v=w.useCallback(async(F=n.page)=>{h(!0),y(null);try{const U={page:F,limit:n.limit,...i.search&&{search:i.search},...i.status&&{status:i.status},...i.role&&{role:i.role}},L=await Bm.getAll(U);L.success?(r(L.data.admins),l(L.data.pagination)):(y(L.message),r([]))}catch{y("Failed to fetch admins"),r([])}finally{h(!1)}},[i,n.limit]),C=w.useCallback(async F=>{h(!0),y(null);try{const U=await Bm.create(F);return U.success?(await v(1),{success:!0,data:U.data}):{success:!1,error:U.message,validationErrors:U.error}}catch{return{success:!1,error:"Failed to create admin"}}finally{h(!1)}},[v]),T=w.useCallback(async(F,U)=>{h(!0),y(null);try{const L=await Bm.update(F,U);return L.success?(r(V=>V.map(j=>j._id===F?{...j,...L.data.admin}:j)),{success:!0,data:L.data}):{success:!1,error:L.message,validationErrors:L.error}}catch{return{success:!1,error:"Failed to update admin"}}finally{h(!1)}},[]),D=w.useCallback(async F=>{h(!0),y(null);try{const U=await Bm.delete(F);return U.success?(r(L=>L.filter(V=>V._id!==F)),l(L=>({...L,total:L.total-1,totalPages:Math.ceil((L.total-1)/L.limit)})),{success:!0}):{success:!1,error:U.message}}catch{return{success:!1,error:"Failed to delete admin"}}finally{h(!1)}},[]),P=w.useCallback(async F=>{try{const U=await Bm.getById(F);return U.success?{success:!0,data:U.data.admin}:{success:!1,error:U.message}}catch{return{success:!1,error:"Failed to fetch admin details"}}},[]),k=w.useCallback(F=>{u(U=>({...U,...F}))},[]),R=w.useCallback(()=>{u({search:"",status:"",role:"",...e})},[e]),B=w.useCallback(F=>{v(F)},[v]),M=w.useCallback(F=>{l(U=>({...U,limit:F}))},[]),G=w.useCallback(()=>{y(null)},[]);return w.useEffect(()=>{v(1)},[i]),{admins:t,pagination:n,filters:i,isLoading:g,error:p,fetchAdmins:v,createAdmin:C,updateAdmin:T,deleteAdmin:D,getAdminById:P,updateFilters:k,resetFilters:R,changePage:B,changeLimit:M,clearError:G}}function Bue(e={}){const{autoFetch:t=!0,isLive:r}=e,[n,l]=w.useState([]),[i,u]=w.useState(!1),[g,h]=w.useState(null),[p,y]=w.useState(""),v=w.useRef(null),C=w.useRef({data:null,timestamp:null}),T=300*1e3,D=w.useCallback(async(B="",M=!0)=>{if(M&&!B&&C.current.data&&Date.now()-C.current.timestamp<T){l(C.current.data);return}u(!0),h(null);try{const G={};r!==void 0&&(G.isLive=r),B&&(G.search=B);const F=await ks.getDropdownEvents(G);if(F.success){const U=F.data.events||[];l(U),B||(C.current={data:U,timestamp:Date.now()})}else h(F.message),l([])}catch{h("Failed to fetch events"),l([])}finally{u(!1)}},[r]),P=w.useCallback(B=>{if(y(B),v.current&&clearTimeout(v.current),!B.trim()){C.current.data?l(C.current.data):D("",!0);return}v.current=setTimeout(()=>{D(B,!1)},300)},[D]),k=w.useCallback(()=>{C.current={data:null,timestamp:null},D("",!1)},[D]),R=w.useCallback(()=>{h(null)},[]);return w.useEffect(()=>{t&&D("",!0)},[t,D]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{events:n,isLoading:i,error:g,searchQuery:p,fetchEvents:D,searchEvents:P,refreshEvents:k,clearError:R}}const Fue=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",LO={TECHNOLOGY:"bg-blue-100 text-gray-900",MUSIC:"bg-purple-100 text-purple-700",SPORTS:"bg-green-100 text-green-700",BUSINESS:"bg-yellow-100 text-yellow-700",EDUCATION:"bg-indigo-100 text-indigo-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",DEFAULT:"bg-gray-100 text-gray-700"};function f9({selectedIds:e=[],onChange:t,disabled:r=!1,placeholder:n="Select events...",error:l}){const[i,u]=w.useState(!1),[g,h]=w.useState(""),p=w.useRef(null),y=w.useRef(null),{events:v,isLoading:C,error:T,searchEvents:D}=Bue({autoFetch:!0}),P=w.useMemo(()=>{if(!g.trim())return v;const H=g.toLowerCase();return v.filter(q=>q.name.toLowerCase().includes(H)||q.category?.toLowerCase().includes(H))},[v,g]),k=w.useMemo(()=>v.filter(H=>e.includes(H._id)),[v,e]);w.useEffect(()=>{const H=q=>{p.current&&!p.current.contains(q.target)&&u(!1)};return document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[]);const R=w.useCallback(H=>{const q=H.target.value;h(q),D(q)},[D]),B=w.useCallback(H=>{if(r)return;const q=e.includes(H)?e.filter(le=>le!==H):[...e,H];t(q)},[e,t,r]),M=w.useCallback((H,q)=>{q.stopPropagation(),!r&&t(e.filter(le=>le!==H))},[e,t,r]),G=w.useCallback(()=>{if(r)return;const H=P.map(le=>le._id),q=[...new Set([...e,...H])];t(q)},[P,e,t,r]),F=w.useCallback(()=>{r||t([])},[t,r]),U=w.useCallback(()=>{r||(u(!0),setTimeout(()=>y.current?.focus(),0))},[r]),L=w.useCallback(H=>{H.key==="Escape"&&u(!1)},[]),V=H=>LO[H]||LO.DEFAULT,j=l||T,Y=2;return a.createElement("div",{ref:p,className:"relative",onKeyDown:L},a.createElement("div",{onClick:U,className:`min-h-[42px] px-2 sm:px-3 py-2 border rounded-lg cursor-pointer transition-colors ${r?"bg-gray-100 cursor-not-allowed":i?"border-gray-800":j?"border-red-500":"border-gray-300 hover:border-gray-400"}`},a.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap"},k.length>0?a.createElement(a.Fragment,null,k.slice(0,Y).map(H=>a.createElement("span",{key:H._id,className:"inline-flex items-center gap-1 px-1.5 sm:px-2 py-0.5 sm:py-1 bg-blue-100 text-blue-800 text-xs sm:text-sm rounded-md"},a.createElement("span",{className:"truncate max-w-[80px] sm:max-w-[120px]"},H.name),!r&&a.createElement("button",{type:"button",onClick:q=>M(H._id,q),className:"hover:bg-blue-200 rounded p-0.5"},a.createElement(Gr,{className:"h-3 w-3"})))),k.length>Y&&a.createElement("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 bg-gray-100 text-gray-600 text-xs sm:text-sm rounded-md"},"+",k.length-Y," more")):a.createElement("span",{className:"text-gray-400 text-sm"},n),a.createElement(Ll,{className:`h-4 w-4 sm:h-5 sm:w-5 text-gray-400 ml-auto shrink-0 transition-transform ${i?"rotate-180":""}`}))),j&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500 flex items-center gap-1"},a.createElement(Xt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),j),i&&!r&&a.createElement("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg"},a.createElement("div",{className:"p-2 border-b border-gray-200"},a.createElement("div",{className:"relative"},a.createElement(ta,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{ref:y,type:"text",value:g,onChange:R,placeholder:"Search events...",className:"w-full pl-8 sm:pl-9 pr-4 py-2 border border-gray-300 rounded-md focus:border-gray-800 outline-none text-sm"}),C&&a.createElement(ct,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 animate-spin"}))),a.createElement("div",{className:"px-2 py-1.5 border-b border-gray-200 flex items-center justify-between bg-gray-50"},a.createElement("span",{className:"text-xs text-gray-500"},e.length,"/",v.length),a.createElement("div",{className:"flex gap-2"},a.createElement("button",{type:"button",onClick:G,className:"text-xs text-gray-800 hover:text-black font-medium"},"Select all"),a.createElement("span",{className:"text-gray-300"},"|"),a.createElement("button",{type:"button",onClick:F,className:"text-xs text-red-600 hover:text-red-800 font-medium"},"Clear"))),a.createElement("div",{className:"max-h-48 sm:max-h-60 overflow-y-auto"},P.length===0?a.createElement("div",{className:"px-4 py-6 sm:py-8 text-center text-gray-500 text-sm"},C?a.createElement("div",{className:"flex flex-col items-center gap-2"},a.createElement(ct,{className:"h-5 w-5 sm:h-6 sm:w-6 animate-spin"}),a.createElement("span",null,"Loading events...")):g?a.createElement("span",null,'No events found for "',g,'"'):a.createElement("span",null,"No events available")):P.map(H=>{const q=e.includes(H._id);return a.createElement("div",{key:H._id,onClick:()=>B(H._id),className:`px-2 sm:px-3 py-2 sm:py-2.5 cursor-pointer flex items-start gap-2 sm:gap-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 ${q?"bg-blue-50":""}`},a.createElement("div",{className:`shrink-0 w-4 h-4 sm:w-5 sm:h-5 rounded border-2 flex items-center justify-center mt-0.5 ${q?"bg-gray-800 border-gray-800":"border-gray-300"}`},q&&a.createElement(En,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-white"})),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap"},a.createElement("p",{className:"font-medium text-gray-900 text-sm truncate"},H.name),H.isLive&&a.createElement("span",{className:"shrink-0 px-1 sm:px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded"},"Live")),a.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 mt-1 flex-wrap"},H.category&&a.createElement("span",{className:`px-1 sm:px-1.5 py-0.5 text-xs rounded ${V(H.category)}`},H.category),H.startDate&&a.createElement("span",{className:"flex items-center gap-1 text-xs text-gray-500"},a.createElement(qr,{className:"h-3 w-3"}),Fue(H.startDate)))))})),e.length>0&&a.createElement("div",{className:"px-2 sm:px-3 py-2 border-t border-gray-200 bg-gray-50"},a.createElement("p",{className:"text-xs sm:text-sm text-gray-600"},a.createElement("span",{className:"font-medium"},e.length)," event",e.length!==1?"s":""," selected"))))}const Uue=[{value:"MANAGEMENT_STAFF",label:"Management Staff"},{value:"ADMIN",label:"Admin"},{value:"SUPER_ADMIN",label:"Super Admin"}],jue=[{value:"ACTIVATED",label:"Active"},{value:"DEACTIVATED",label:"Inactive"}],zue=[{value:"events",label:"Events"},{value:"enrollments",label:"Enrollments"},{value:"payments",label:"Payments"},{value:"users",label:"Users"},{value:"coupons",label:"Coupons"}],Vue=e=>!e||!Array.isArray(e)?[]:e.map(t=>typeof t=="string"?t:t._id).filter(Boolean),BO=(e=null)=>({name:e?.name||"",username:e?.username||"",email:e?.email||"",phone:e?.phone||"",password:"",role:e?.role||"MANAGEMENT_STAFF",status:e?.status||"ACTIVATED",access:e?.access||[],allowedEvents:Vue(e?.allowedEvents),maxCashTicketsAllowed:e?.maxCashTicketsAllowed||""}),Hue=(e,t=!1)=>{const r={};if(e.name.trim()?(e.name.length<2||e.name.length>100)&&(r.name="Name must be between 2 and 100 characters"):r.name="Name is required",e.username.trim()?e.username.length<3||e.username.length>50?r.username="Username must be between 3 and 50 characters":/^[a-zA-Z0-9_]+$/.test(e.username)||(r.username="Username can only contain letters, numbers, and underscores"):r.username="Username is required",e.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&(r.email="Invalid email format"),e.phone.trim()){const n=e.phone.replace(/[^0-9]/g,"");n.length>0&&(n.length<10||n.length>15)&&(r.phone="Phone must be 10-15 digits")}if(t||(e.password?e.password.length<8&&(r.password="Password must be at least 8 characters"):r.password="Password is required"),e.maxCashTicketsAllowed!==""&&e.maxCashTicketsAllowed!==null&&e.maxCashTicketsAllowed!==void 0){const n=parseInt(e.maxCashTicketsAllowed,10);isNaN(n)?r.maxCashTicketsAllowed="Must be a valid number":n<0&&(r.maxCashTicketsAllowed="Cannot be negative")}return{isValid:Object.keys(r).length===0,errors:r}};function $ue({isOpen:e,onClose:t,onSubmit:r,admin:n=null,isLoading:l=!1,serverError:i=null,validationErrors:u=null}){const g=!!n,[h,p]=w.useState(BO(n)),[y,v]=w.useState({}),[C,T]=w.useState(!1);w.useEffect(()=>{e&&(p(BO(n)),v({}))},[e,n]),w.useEffect(()=>{if(u&&Array.isArray(u)){const F={};u.forEach(U=>{U.field&&(F[U.field]=U.message)}),v(U=>({...U,...F}))}},[u]);const D=F=>{const{name:U,value:L}=F.target;p(V=>{const j={...V,[U]:L};return U==="role"&&L==="SUPER_ADMIN"&&(j.allowedEvents=[]),U==="role"&&(L==="ADMIN"||L==="SUPER_ADMIN")&&(j.maxCashTicketsAllowed=""),j}),y[U]&&v(V=>({...V,[U]:null}))},P=h.role!=="SUPER_ADMIN",k=h.role==="MANAGEMENT_STAFF",R=F=>{p(U=>({...U,access:U.access.includes(F)?U.access.filter(L=>L!==F):[...U.access,F]}))},B=F=>{p(U=>({...U,allowedEvents:F}))},M=async F=>{F.preventDefault();const U=Hue(h,g);if(!U.isValid){v(U.errors);return}const L={...h};L.phone=L.phone.replace(/[^0-9]/g,""),g&&!L.password&&delete L.password,g||delete L.status,L.maxCashTicketsAllowed===""||L.maxCashTicketsAllowed===null||L.maxCashTicketsAllowed===void 0?delete L.maxCashTicketsAllowed:L.maxCashTicketsAllowed=parseInt(L.maxCashTicketsAllowed,10),await r(L)},G=()=>{l||t()};return a.createElement(jt,{isOpen:e,onClose:G,title:g?"Edit Admin":"Create New Admin",size:"xl",closeOnOverlayClick:!l},a.createElement("form",{onSubmit:M},i&&a.createElement("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},i),a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1"},"Name ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",id:"name",name:"name",value:h.name,onChange:D,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${y.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter admin name"}),y.name&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.name)),a.createElement("div",null,a.createElement("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1"},"Username ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",id:"username",name:"username",value:h.username,onChange:D,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${y.username?"border-red-500":"border-gray-300"}`,placeholder:"Enter username"}),y.username&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.username)),a.createElement("div",null,a.createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1"},"Email"," ",a.createElement("span",{className:"text-gray-400 text-xs ml-1"},"(optional)")),a.createElement("input",{type:"email",id:"email",name:"email",value:h.email,onChange:D,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${y.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),y.email&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.email)),a.createElement("div",null,a.createElement("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1"},"Phone"," ",a.createElement("span",{className:"text-gray-400 text-xs ml-1"},"(optional)")),a.createElement("input",{type:"tel",id:"phone",name:"phone",value:h.phone,onChange:D,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${y.phone?"border-red-500":"border-gray-300"}`,placeholder:"Enter phone number"}),y.phone&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.phone)),a.createElement("div",null,a.createElement("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1"},"Password ",!g&&a.createElement("span",{className:"text-red-500"},"*"),g&&a.createElement("span",{className:"text-gray-400 text-xs ml-1"},"(leave empty to keep current)")),a.createElement("div",{className:"relative"},a.createElement("input",{type:C?"text":"password",id:"password",name:"password",value:h.password,onChange:D,disabled:l,className:`w-full px-3 py-2 pr-10 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${y.password?"border-red-500":"border-gray-300"}`,placeholder:g?"New password (optional)":"Enter password"}),a.createElement("button",{type:"button",onClick:()=>T(!C),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},C?a.createElement(z_,{className:"h-4 w-4 sm:h-5 sm:w-5"}):a.createElement(Mr,{className:"h-4 w-4 sm:h-5 sm:w-5"}))),y.password&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.password)),a.createElement("div",null,a.createElement("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1"},"Role"),a.createElement("select",{id:"role",name:"role",value:h.role,onChange:D,disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100 text-sm sm:text-base"},Uue.map(F=>a.createElement("option",{key:F.value,value:F.value},F.label)))),g&&a.createElement("div",null,a.createElement("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),a.createElement("select",{id:"status",name:"status",value:h.status,onChange:D,disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100 text-sm sm:text-base"},jue.map(F=>a.createElement("option",{key:F.value,value:F.value},F.label)))),k&&a.createElement("div",null,a.createElement("label",{htmlFor:"maxCashTicketsAllowed",className:"block text-sm font-medium text-gray-700 mb-1"},"Max Cash Tickets Allowed"),a.createElement("input",{type:"number",id:"maxCashTicketsAllowed",name:"maxCashTicketsAllowed",value:h.maxCashTicketsAllowed,onChange:D,disabled:l,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${y.maxCashTicketsAllowed?"border-red-500":"border-gray-300"}`,placeholder:"Enter max tickets or leave empty"}),y.maxCashTicketsAllowed&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.maxCashTicketsAllowed),a.createElement("p",{className:"mt-1 text-xs text-gray-500"},"Limit the total number of cash tickets this admin can generate. Leave empty for unlimited."),a.createElement("p",{className:"text-gray-400 text-xs"},"optional, leave empty for unlimited"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Access Permissions"),a.createElement("div",{className:"flex flex-wrap gap-2"},zue.map(F=>a.createElement("label",{key:F.value,className:`inline-flex items-center px-3 py-2 rounded-lg border cursor-pointer transition-colors ${h.access.includes(F.value)?"bg-blue-50 border-blue-500 text-gray-900":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"} ${l?"opacity-50 cursor-not-allowed":""}`},a.createElement("input",{type:"checkbox",checked:h.access.includes(F.value),onChange:()=>R(F.value),disabled:l,className:"sr-only"}),a.createElement("span",{className:"text-sm"},F.label))))),P&&a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Allowed Events",a.createElement("span",{className:"text-gray-400 text-xs ml-2 font-normal"},"(Events this admin can access)")),a.createElement(f9,{selectedIds:h.allowedEvents,onChange:B,disabled:l,placeholder:"Search and select events..."})),!P&&a.createElement("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg"},a.createElement("p",{className:"text-sm text-gray-900"},"Super Admins have access to all events by default."))),a.createElement("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:G,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},l&&a.createElement(ct,{className:"h-4 w-4 animate-spin"}),g?"Update Admin":"Create Admin"))))}const que={SUPER_ADMIN:{label:"Super Admin",color:"bg-red-100 text-red-700"},ADMIN:{label:"Admin",color:"bg-purple-100 text-purple-700"},MANAGEMENT_STAFF:{label:"Management",color:"bg-blue-100 text-blue-700"}},Gue={ACTIVATED:{label:"Active",color:"bg-green-100 text-green-700"},DEACTIVATED:{label:"Inactive",color:"bg-gray-100 text-gray-700"}},Yue=[{value:"",label:"All Roles"},{value:"SUPER_ADMIN",label:"Super Admin"},{value:"ADMIN",label:"Admin"},{value:"MANAGEMENT_STAFF",label:"Management Staff"}],Xue=[{value:"",label:"All Status"},{value:"ACTIVATED",label:"Active"},{value:"DEACTIVATED",label:"Inactive"}];function Wue(){const{admin:e}=hn(),{admins:t,pagination:r,filters:n,isLoading:l,error:i,fetchAdmins:u,createAdmin:g,updateAdmin:h,deleteAdmin:p,updateFilters:y,changePage:v,clearError:C}=Lue(),[T,D]=w.useState(!1),[P,k]=w.useState(!1),[R,B]=w.useState(null),[M,G]=w.useState(!1),[F,U]=w.useState(null),[L,V]=w.useState(null),[j,Y]=w.useState(n.search),H=w.useCallback(me=>{Y(me);const $e=setTimeout(()=>{y({search:me})},300);return()=>clearTimeout($e)},[y]),q=w.useCallback(me=>{y({role:me})},[y]),le=w.useCallback(me=>{y({status:me})},[y]),ue=w.useCallback(()=>{B(null),U(null),V(null),D(!0)},[]),re=w.useCallback(me=>{B(me),U(null),V(null),D(!0)},[]),J=w.useCallback(()=>{D(!1),B(null),U(null),V(null)},[]),ae=w.useCallback(me=>{B(me),k(!0)},[]),pe=w.useCallback(()=>{k(!1),B(null)},[]),xe=w.useCallback(async me=>{G(!0),U(null),V(null);try{let $e;R?$e=await h(R._id,me):$e=await g(me),$e.success?J():(U($e.error),$e.validationErrors&&V($e.validationErrors))}catch{U("An unexpected error occurred")}finally{G(!1)}},[R,g,h,J]),ee=w.useCallback(async()=>{if(R){G(!0);try{const me=await p(R._id);me.success?pe():alert(me.error||"Failed to delete admin")}catch{alert("An unexpected error occurred")}finally{G(!1)}}},[R,p,pe]),K=w.useCallback(me=>{if(!me)return"-";const $e=me.replace(/\D/g,"");return $e.length===10?`+91 ${$e.slice(0,5)} ${$e.slice(5)}`:me},[]),te=w.useCallback(me=>que[me]||{label:me,color:"bg-gray-100 text-gray-700"},[]),ge=w.useCallback(me=>Gue[me]||{label:me,color:"bg-gray-100 text-gray-700"},[]),oe=w.useCallback(me=>e?._id!==me._id,[e]),Ne=w.useMemo(()=>{if(l||i||t.length>0)return null;const me=n.search||n.role||n.status;return a.createElement("tr",null,a.createElement("td",{colSpan:"5",className:"px-4 sm:px-6 py-12 text-center"},a.createElement("div",{className:"flex flex-col items-center"},a.createElement(Xt,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-300 mb-4"}),a.createElement("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-1"},me?"No admins found":"No admins yet"),a.createElement("p",{className:"text-sm text-gray-500 mb-4 px-4"},me?"Try adjusting your search or filter criteria":"Get started by creating a new admin"),!me&&a.createElement("button",{onClick:ue,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center gap-2 text-sm"},a.createElement(kr,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Create Admin"))))},[l,i,t.length,n,ue]),ie=me=>{const $e=te(me.role),ve=ge(me.status),We=e?._id===me._id;return a.createElement("div",{key:me._id,className:`p-4 border-b border-gray-100 ${We?"bg-blue-50/30":""}`},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"flex items-center gap-3 min-w-0 flex-1"},a.createElement("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0"},a.createElement("span",{className:"text-purple-600 font-medium"},me.name?.charAt(0)?.toUpperCase()||"?")),a.createElement("div",{className:"min-w-0 flex-1"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},me.name,We&&a.createElement("span",{className:"ml-2 text-xs text-blue-600"},"(You)")),a.createElement("p",{className:"text-sm text-gray-500 truncate"},"@",me.username))),a.createElement("div",{className:"flex items-center gap-1 flex-shrink-0"},a.createElement("button",{onClick:()=>re(me),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit"},a.createElement(cn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>ae(me),disabled:!oe(me),className:`p-2 rounded-lg transition-all ${oe(me)?"text-red-600 hover:bg-red-50":"text-gray-300 cursor-not-allowed"}`,title:oe(me)?"Delete":"Can't delete your own account"},a.createElement(ur,{className:"h-4 w-4"})))),a.createElement("div",{className:"mt-3 flex flex-wrap items-center gap-2"},a.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${$e.color}`},$e.label),a.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${ve.color}`},ve.label),a.createElement("span",{className:"text-xs text-gray-500"},K(me.phone)),me.role==="MANAGEMENT_STAFF"&&me.maxCashTicketsAllowed!=null&&a.createElement("span",{className:"text-xs text-gray-500"},"Max Tickets: ",me.maxCashTicketsAllowed)))};return a.createElement("div",{className:"px-2 sm:px-0"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4 sm:mb-6"},a.createElement("div",null,a.createElement("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900"},"Admin Management"),a.createElement("p",{className:"text-sm text-gray-500 mt-0.5 sm:mt-1"},"Manage admin users and their permissions")),a.createElement("button",{onClick:ue,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center justify-center gap-2 text-sm sm:text-base w-full sm:w-auto"},a.createElement(kr,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Create Admin")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-3 sm:p-4 mb-4 sm:mb-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-stretch sm:items-center gap-3 sm:gap-4"},a.createElement("div",{className:"relative flex-1 sm:flex-none sm:w-64 lg:w-80"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),a.createElement("input",{type:"text",placeholder:"Search by name, username, or phone...",value:j,onChange:me=>H(me.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none text-sm"})),a.createElement("div",{className:"flex items-center gap-2 sm:gap-4"},a.createElement("select",{value:n.role,onChange:me=>q(me.target.value),className:"flex-1 sm:flex-none px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white text-sm"},Yue.map(me=>a.createElement("option",{key:me.value,value:me.value},me.label))),a.createElement("select",{value:n.status,onChange:me=>le(me.target.value),className:"flex-1 sm:flex-none px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white text-sm"},Xue.map(me=>a.createElement("option",{key:me.value,value:me.value},me.label))),a.createElement("button",{onClick:()=>u(r.page),disabled:l,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 flex-shrink-0",title:"Refresh"},a.createElement($n,{className:`h-4 w-4 sm:h-5 sm:w-5 ${l?"animate-spin":""}`}))))),i&&a.createElement("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 sm:p-4 mb-4 sm:mb-6 flex items-center gap-3"},a.createElement(Xt,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),a.createElement("p",{className:"text-sm text-red-700 flex-1"},i),a.createElement("button",{onClick:C,className:"text-red-500 hover:text-red-700 text-sm font-medium flex-shrink-0"},"Dismiss")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"hidden md:block overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600"},"Admin"),a.createElement("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600"},"Phone"),a.createElement("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600"},"Role"),a.createElement("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,l&&t.length===0&&a.createElement("tr",null,a.createElement("td",{colSpan:"5",className:"px-6 py-12 text-center"},a.createElement(ct,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-2"}),a.createElement("p",{className:"text-gray-500"},"Loading admins..."))),Ne,t.map(me=>{const $e=te(me.role),ve=ge(me.status),We=e?._id===me._id;return a.createElement("tr",{key:me._id,className:`border-b border-gray-100 hover:bg-gray-50 ${We?"bg-blue-50/30":""}`},a.createElement("td",{className:"px-4 lg:px-6 py-3 lg:py-4"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0"},a.createElement("span",{className:"text-purple-600 font-medium text-sm lg:text-base"},me.name?.charAt(0)?.toUpperCase()||"?")),a.createElement("div",{className:"min-w-0"},a.createElement("p",{className:"font-medium text-gray-900 text-sm lg:text-base truncate"},me.name,We&&a.createElement("span",{className:"ml-2 text-xs text-blue-600"},"(You)")),a.createElement("p",{className:"text-xs lg:text-sm text-gray-500 truncate"},"@",me.username)))),a.createElement("td",{className:"px-4 lg:px-6 py-3 lg:py-4 text-sm text-gray-600"},K(me.phone)),a.createElement("td",{className:"px-4 lg:px-6 py-3 lg:py-4"},a.createElement("div",{className:"flex flex-col gap-1"},a.createElement("span",{className:`px-2 lg:px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap ${$e.color} inline-flex items-center w-fit`},$e.label),me.role==="MANAGEMENT_STAFF"&&me.maxCashTicketsAllowed!=null&&a.createElement("span",{className:"text-xs text-gray-500"},"Max: ",me.maxCashTicketsAllowed," tickets"))),a.createElement("td",{className:"px-4 lg:px-6 py-3 lg:py-4"},a.createElement("span",{className:`px-2 lg:px-3 py-1 rounded-full text-xs font-medium ${ve.color}`},ve.label)),a.createElement("td",{className:"px-4 lg:px-6 py-3 lg:py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1 lg:gap-2"},a.createElement("button",{onClick:()=>re(me),className:"p-1.5 lg:p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit"},a.createElement(cn,{className:"h-4 w-4 lg:h-5 lg:w-5"})),a.createElement("button",{onClick:()=>ae(me),disabled:!oe(me),className:`p-1.5 lg:p-2 rounded-lg transition-all ${oe(me)?"text-red-600 hover:bg-red-50":"text-gray-300 cursor-not-allowed"}`,title:oe(me)?"Delete":"Can't delete your own account"},a.createElement(ur,{className:"h-4 w-4 lg:h-5 lg:w-5"})))))})))),a.createElement("div",{className:"md:hidden"},l&&t.length===0&&a.createElement("div",{className:"px-4 py-12 text-center"},a.createElement(ct,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-2"}),a.createElement("p",{className:"text-gray-500 text-sm"},"Loading admins...")),!l&&!i&&t.length===0&&a.createElement("div",{className:"px-4 py-12 text-center"},a.createElement(Xt,{className:"h-10 w-10 text-gray-300 mx-auto mb-4"}),a.createElement("h3",{className:"text-base font-medium text-gray-900 mb-1"},n.search||n.role||n.status?"No admins found":"No admins yet"),a.createElement("p",{className:"text-sm text-gray-500 mb-4"},n.search||n.role||n.status?"Try adjusting your search or filter criteria":"Get started by creating a new admin"),!(n.search||n.role||n.status)&&a.createElement("button",{onClick:ue,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors inline-flex items-center gap-2 text-sm"},a.createElement(kr,{className:"h-4 w-4"}),"Create Admin")),t.map(ie)),r.totalPages>0&&a.createElement(Rr,{currentPage:r.page,totalPages:r.totalPages,totalItems:r.total,itemsPerPage:r.limit,onPageChange:v,itemLabel:"admins"})),a.createElement($ue,{isOpen:T,onClose:J,onSubmit:xe,admin:R,isLoading:M,serverError:F,validationErrors:L}),a.createElement(za,{isOpen:P,onClose:pe,onConfirm:ee,title:"Delete Admin",message:`Are you sure you want to delete "${R?.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:M}))}function Kue(){return a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-6"},a.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-4"},"Payment History"),a.createElement("p",{className:"text-gray-600"},"View payment history here."))}const Tl={BASE:"/web/offline-cash",ALLOWED_EVENTS:"/web/offline-cash/allowed-events",GET_BY_ID:e=>`/web/offline-cash/${e}`,DELETE:e=>`/web/offline-cash/${e}`,EVENT_ENROLLMENTS:e=>`/web/offline-cash/event/${e}/enrollments`,DIRECT_TICKET:"/web/offline-cash/direct-ticket",DIRECT_TICKET_BULK:"/web/offline-cash/direct-ticket-bulk"},Oo={getAllowedEvents:async(e={})=>{const t=new URLSearchParams;e.search&&t.append("search",e.search),e.isLive!==void 0&&t.append("isLive",e.isLive);const r=t.toString(),n=r?`${Tl.ALLOWED_EVENTS}?${r}`:Tl.ALLOWED_EVENTS;console.log("[OfflineCashService] Fetching allowed events with params:",e);const l=await Pe(ke.get(n));return l.success?console.log("[OfflineCashService] Fetched allowed events:",l.data.events?.length):console.error("[OfflineCashService] Failed to fetch allowed events:",l.message),l},create:async e=>{console.log("[OfflineCashService] Creating offline cash record for phone:",e.phone);const t=await Pe(ke.post(Tl.BASE,e));return t.success?console.log("[OfflineCashService] Record created successfully, link:",t.data.link):console.error("[OfflineCashService] Failed to create record:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.eventId&&t.append("eventId",e.eventId),e.redeemed!==void 0&&e.redeemed!==""&&t.append("redeemed",e.redeemed),e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit);const r=t.toString(),n=r?`${Tl.BASE}?${r}`:Tl.BASE;console.log("[OfflineCashService] Fetching offline cash records with params:",e);const l=await Pe(ke.get(n));return l.success?console.log("[OfflineCashService] Fetched records:",l.data.records?.length):console.error("[OfflineCashService] Failed to fetch records:",l.message),l},getById:async e=>{console.log("[OfflineCashService] Fetching record by ID:",e);const t=await Pe(ke.get(Tl.GET_BY_ID(e)));return t.success?console.log("[OfflineCashService] Fetched record:",t.data._id):console.error("[OfflineCashService] Failed to fetch record:",t.message),t},delete:async e=>{console.log("[OfflineCashService] Deleting record:",e);const t=await Pe(ke.delete(Tl.DELETE(e)));return t.success?console.log("[OfflineCashService] Record deleted successfully"):console.error("[OfflineCashService] Failed to delete record:",t.message),t},getEventEnrollments:async(e,t={})=>{const r=new URLSearchParams;t.status&&r.append("status",t.status),t.page&&r.append("page",t.page),t.limit&&r.append("limit",t.limit);const n=r.toString(),l=Tl.EVENT_ENROLLMENTS(e),i=n?`${l}?${n}`:l;console.log("[OfflineCashService] Fetching event enrollments:",e,t);const u=await Pe(ke.get(i));return u.success?console.log("[OfflineCashService] Fetched enrollments:",u.data.enrollments?.length):console.error("[OfflineCashService] Failed to fetch enrollments:",u.message),u},createDirectTicket:async e=>{console.log("[OfflineCashService] Creating direct ticket for phone:",e.phone);const t=await Pe(ke.post(Tl.DIRECT_TICKET,e));return t.success?console.log("[OfflineCashService] Direct ticket created:",t.data.enrollment?.id):console.error("[OfflineCashService] Failed to create direct ticket:",t.message),t},createDirectTicketBulk:async(e,t)=>{console.log("[OfflineCashService] Creating bulk direct tickets for event:",t.eventId);const r=new FormData;r.append("file",e),r.append("eventId",t.eventId),t.priceCharged!==void 0&&t.priceCharged!==""&&r.append("priceCharged",t.priceCharged),t.notes&&r.append("notes",t.notes);try{const n=await ke.post(Tl.DIRECT_TICKET_BULK,r,{headers:{"Content-Type":"multipart/form-data"}});return console.log("[OfflineCashService] Bulk direct tickets result:",{total:n.data?.data?.summary?.total,successful:n.data?.data?.summary?.successful,rejected:n.data?.data?.summary?.rejected}),{success:!0,data:n.data.data,message:n.data.message,error:null,status:n.data.status||n.status}}catch(n){const l={success:!1,data:null,message:n.response?.data?.message||"Failed to process bulk direct tickets",error:n.response?.data?.error||n.message,status:n.response?.status||500};return console.error("[OfflineCashService] Bulk direct tickets failed:",l),l}}};function Zue(e={}){const[t,r]=w.useState([]),[n,l]=w.useState({total:0,page:1,limit:20,totalPages:0}),[i,u]=w.useState({eventId:"",redeemed:"",...e}),[g,h]=w.useState(!1),[p,y]=w.useState(null),[v,C]=w.useState([]),[T,D]=w.useState(!1),[P,k]=w.useState(null),R=w.useRef(null),B=w.useCallback(async(re="")=>{D(!0),k(null);try{const J={};re&&(J.search=re);const ae=await Oo.getAllowedEvents(J);ae.success?C(ae.data.events||[]):(k(ae.message),C([]))}catch{k("Failed to fetch allowed events"),C([])}finally{D(!1)}},[]),M=w.useCallback(re=>{R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{B(re)},300)},[B]),G=w.useCallback(async(re=n.page)=>{h(!0),y(null);try{const J={page:re,limit:n.limit,...i.eventId&&{eventId:i.eventId},...i.redeemed!==""&&{redeemed:i.redeemed}},ae=await Oo.getAll(J);ae.success?(r(ae.data.records||[]),l({total:ae.data.pagination?.total||0,page:ae.data.pagination?.page||1,limit:ae.data.pagination?.limit||20,totalPages:ae.data.pagination?.pages||0})):(y(ae.message),r([]))}catch{y("Failed to fetch cash ticket records"),r([])}finally{h(!1)}},[i,n.limit]),F=w.useCallback(async re=>{h(!0),y(null);try{const J=await Oo.create(re);return J.success?(await G(1),{success:!0,data:J.data}):J.status===409&&J.error?.existingLink?{success:!1,error:J.message,existingLink:J.error.existingLink,signature:J.error.signature}:{success:!1,error:J.message,validationErrors:J.error}}catch{return{success:!1,error:"Failed to create cash ticket"}}finally{h(!1)}},[G]),U=w.useCallback(async re=>{try{const J=await Oo.getById(re);return J.success?{success:!0,data:J.data}:{success:!1,error:J.message}}catch{return{success:!1,error:"Failed to fetch record details"}}},[]),L=w.useCallback(async re=>{h(!0),y(null);try{const J=await Oo.delete(re);return J.success?(r(ae=>ae.filter(pe=>pe._id!==re)),l(ae=>({...ae,total:ae.total-1,totalPages:Math.ceil((ae.total-1)/ae.limit)})),{success:!0}):{success:!1,error:J.message}}catch{return{success:!1,error:"Failed to delete record"}}finally{h(!1)}},[]),V=w.useCallback(async(re,J={})=>{try{const ae=await Oo.getEventEnrollments(re,J);return ae.success?{success:!0,data:{enrollments:ae.data.enrollments||[],pagination:ae.data.pagination}}:{success:!1,error:ae.message}}catch{return{success:!1,error:"Failed to fetch enrollments"}}},[]),j=w.useCallback(re=>{u(J=>({...J,...re}))},[]),Y=w.useCallback(()=>{u({eventId:"",redeemed:"",...e})},[e]),H=w.useCallback(re=>{G(re)},[G]),q=w.useCallback(re=>{l(J=>({...J,limit:re}))},[]),le=w.useCallback(()=>{y(null)},[]),ue=w.useCallback(()=>{k(null)},[]);return w.useEffect(()=>{G(1)},[i]),w.useEffect(()=>{B()},[B]),w.useEffect(()=>()=>{R.current&&clearTimeout(R.current)},[]),{records:t,pagination:n,filters:i,isLoading:g,error:p,allowedEvents:v,eventsLoading:T,eventsError:P,fetchRecords:G,createRecord:F,getRecordById:U,deleteRecord:L,getEventEnrollments:V,fetchAllowedEvents:B,searchEvents:M,updateFilters:j,resetFilters:Y,changePage:H,changeLimit:q,clearError:le,clearEventsError:ue}}const Que=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",Jue=e=>e==null?"":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),FO={TECHNOLOGY:"bg-blue-100 text-gray-900",MUSIC:"bg-purple-100 text-purple-700",SPORTS:"bg-green-100 text-green-700",BUSINESS:"bg-yellow-100 text-yellow-700",EDUCATION:"bg-indigo-100 text-indigo-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",DEFAULT:"bg-gray-100 text-gray-700"};function mS({selectedId:e="",onChange:t,events:r=[],isLoading:n=!1,onSearch:l,disabled:i=!1,placeholder:u="Select an event...",error:g}){const[h,p]=w.useState(!1),[y,v]=w.useState(""),[C,T]=w.useState(-1),D=w.useRef(null),P=w.useRef(null),k=w.useRef(null),R=w.useMemo(()=>{if(!y.trim())return r;const j=y.toLowerCase();return r.filter(Y=>Y.name.toLowerCase().includes(j)||Y.category?.toLowerCase().includes(j))},[r,y]),B=w.useMemo(()=>r.find(j=>j._id===e),[r,e]);w.useEffect(()=>{const j=Y=>{D.current&&!D.current.contains(Y.target)&&(p(!1),v(""),T(-1))};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const M=w.useCallback(j=>{const Y=j.target.value;v(Y),T(-1),l&&l(Y)},[l]),G=w.useCallback(j=>{i||(t(j._id,j),p(!1),v(""),T(-1))},[t,i]),F=w.useCallback(j=>{j.stopPropagation(),!i&&t("",null)},[t,i]),U=w.useCallback(()=>{i||(p(!0),setTimeout(()=>P.current?.focus(),0))},[i]),L=w.useCallback(j=>{if(!h){(j.key==="Enter"||j.key===" "||j.key==="ArrowDown")&&(j.preventDefault(),p(!0));return}switch(j.key){case"Escape":p(!1),v(""),T(-1);break;case"ArrowDown":j.preventDefault(),T(Y=>Y<R.length-1?Y+1:Y);break;case"ArrowUp":j.preventDefault(),T(Y=>Y>0?Y-1:0);break;case"Enter":j.preventDefault(),C>=0&&R[C]&&G(R[C]);break}},[h,R,C,G]);w.useEffect(()=>{if(C>=0&&k.current){const j=k.current.children[C];j&&j.scrollIntoView({block:"nearest"})}},[C]);const V=j=>FO[j]||FO.DEFAULT;return a.createElement("div",{ref:D,className:"relative",onKeyDown:L},a.createElement("div",{onClick:U,className:`min-h-[42px] px-2 sm:px-3 py-2 border rounded-lg cursor-pointer transition-colors ${i?"bg-gray-100 cursor-not-allowed":h?"border-gray-800":g?"border-red-500":"border-gray-300 hover:border-gray-400"}`,tabIndex:i?-1:0,role:"combobox","aria-expanded":h,"aria-haspopup":"listbox"},a.createElement("div",{className:"flex items-center gap-2"},B?a.createElement("div",{className:"flex-1 flex items-center gap-2 min-w-0"},a.createElement("span",{className:"truncate text-sm font-medium text-gray-900"},B.name),B.isLive&&a.createElement("span",{className:"shrink-0 px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded"},"Live"),!i&&a.createElement("button",{type:"button",onClick:F,className:"shrink-0 p-0.5 hover:bg-gray-200 rounded"},a.createElement(Gr,{className:"h-4 w-4 text-gray-500"}))):a.createElement("span",{className:"flex-1 text-gray-400 text-sm"},u),a.createElement(Ll,{className:`h-4 w-4 sm:h-5 sm:w-5 text-gray-400 shrink-0 transition-transform ${h?"rotate-180":""}`}))),g&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500 flex items-center gap-1"},a.createElement(Xt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),g),h&&!i&&a.createElement("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg"},a.createElement("div",{className:"p-2 border-b border-gray-200"},a.createElement("div",{className:"relative"},a.createElement(ta,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{ref:P,type:"text",value:y,onChange:M,placeholder:"Search events...",className:"w-full pl-8 sm:pl-9 pr-4 py-2 border border-gray-300 rounded-md focus:border-gray-800 outline-none text-sm"}),n&&a.createElement(ct,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 animate-spin"}))),a.createElement("div",{className:"px-2 py-1.5 border-b border-gray-200 bg-gray-50"},a.createElement("span",{className:"text-xs text-gray-500"},R.length," event",R.length!==1?"s":""," available")),a.createElement("div",{ref:k,className:"max-h-60 sm:max-h-72 overflow-y-auto",role:"listbox"},R.length===0?a.createElement("div",{className:"px-4 py-6 sm:py-8 text-center text-gray-500 text-sm"},n?a.createElement("div",{className:"flex flex-col items-center gap-2"},a.createElement(ct,{className:"h-5 w-5 sm:h-6 sm:w-6 animate-spin"}),a.createElement("span",null,"Loading events...")):y?a.createElement("span",null,'No events found for "',y,'"'):a.createElement("span",null,"No events available")):R.map((j,Y)=>{const H=j._id===e,q=Y===C;return a.createElement("div",{key:j._id,onClick:()=>G(j),className:`px-2 sm:px-3 py-2 sm:py-3 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors ${H?"bg-blue-50":q?"bg-gray-100":"hover:bg-gray-50"}`,role:"option","aria-selected":H},a.createElement("div",{className:"flex items-start gap-2 sm:gap-3"},a.createElement("div",{className:`shrink-0 w-4 h-4 sm:w-5 sm:h-5 rounded-full border-2 flex items-center justify-center mt-0.5 ${H?"bg-gray-800 border-gray-800":"border-gray-300"}`},H&&a.createElement(En,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-white"})),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap"},a.createElement("p",{className:"font-medium text-gray-900 text-sm truncate"},j.name),j.isLive&&a.createElement("span",{className:"shrink-0 px-1 sm:px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded"},"Live")),a.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 mt-1 flex-wrap"},j.category&&a.createElement("span",{className:`px-1 sm:px-1.5 py-0.5 text-xs rounded ${V(j.category)}`},j.category),j.startDate&&a.createElement("span",{className:"flex items-center gap-1 text-xs text-gray-500"},a.createElement(qr,{className:"h-3 w-3"}),Que(j.startDate)),j.price!==void 0&&a.createElement("span",{className:"text-xs text-gray-600 font-medium"},Jue(j.price))))))}))))}const ede=e=>e==null?"":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),tde=e=>{const t={};if(e.eventId||(t.eventId="Event is required"),!e.phone.trim())t.phone="Phone number is required";else{const r=e.phone.replace(/[^0-9]/g,"");(r.length<10||r.length>15)&&(t.phone="Phone must be 10-15 digits")}return!e.ticketCount||e.ticketCount<1?t.ticketCount="At least 1 ticket is required":e.ticketCount>100&&(t.ticketCount="Maximum 100 tickets allowed"),e.priceCharged&&e.priceCharged<0&&(t.priceCharged="Price cannot be negative"),{isValid:Object.keys(t).length===0,errors:t}},Lv=()=>({eventId:"",phone:"",ticketCount:1,priceCharged:"",notes:""});function rde({isOpen:e,onClose:t,onSubmit:r,isLoading:n=!1,serverError:l=null,existingLinkData:i=null,allowedEvents:u=[],eventsLoading:g=!1,onSearchEvents:h}){const[p,y]=w.useState(Lv()),[v,C]=w.useState({}),[T,D]=w.useState(null),[P,k]=w.useState(null),[R,B]=w.useState(!1);w.useEffect(()=>{e&&(y(Lv()),C({}),D(null),k(null),B(!1))},[e]),w.useEffect(()=>{i&&k({link:i.existingLink,isExisting:!0})},[i]);const M=w.useCallback(Y=>{const{name:H,value:q,type:le}=Y.target;let ue=q;le==="number"&&(ue=q===""?"":Number(q)),y(re=>({...re,[H]:ue})),v[H]&&C(re=>({...re,[H]:null}))},[v]),G=w.useCallback((Y,H)=>{y(q=>({...q,eventId:Y})),D(H),H?.price&&y(q=>({...q,eventId:Y,priceCharged:q.priceCharged||H.price*(q.ticketCount||1)})),v.eventId&&C(q=>({...q,eventId:null}))},[v.eventId]),F=w.useCallback(Y=>{const H=Y.target.value===""?"":Number(Y.target.value);y(q=>{const le={...q,ticketCount:H};return T?.price&&H&&(le.priceCharged=T.price*H),le}),v.ticketCount&&C(q=>({...q,ticketCount:null}))},[T,v.ticketCount]),U=w.useCallback(async()=>{if(P?.link)try{await navigator.clipboard.writeText(P.link),B(!0),setTimeout(()=>B(!1),2e3)}catch(Y){console.error("[CashTicketForm] Failed to copy:",Y)}},[P]),L=async Y=>{Y.preventDefault();const H=tde(p);if(!H.isValid){C(H.errors);return}const q={eventId:p.eventId,phone:p.phone.replace(/[^0-9]/g,""),ticketCount:Number(p.ticketCount)};p.priceCharged!==""&&p.priceCharged!==null&&(q.priceCharged=Number(p.priceCharged)),p.notes.trim()&&(q.notes=p.notes.trim());const le=await r(q);le?.success&&le.data&&k({link:le.data.link,isExisting:!1,ticketCount:le.data.ticketCount,event:le.data.event,phone:le.data.phone})},V=w.useCallback(()=>{n||t()},[n,t]),j=w.useCallback(()=>{y(Lv()),D(null),k(null),B(!1),C({})},[]);return a.createElement(jt,{isOpen:e,onClose:V,title:P?"Ticket Link Generated":"Generate Cash Ticket Link",size:"xl",closeOnOverlayClick:!n},P?a.createElement("div",{className:"space-y-4"},P.isExisting&&a.createElement("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-2"},a.createElement(Xt,{className:"h-5 w-5 text-yellow-600 shrink-0 mt-0.5"}),a.createElement("div",null,a.createElement("p",{className:"text-sm font-medium text-yellow-800"},"Existing Link Found"),a.createElement("p",{className:"text-sm text-yellow-700 mt-0.5"},"An unredeemed ticket link already exists for this phone and event."))),!P.isExisting&&a.createElement("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg"},a.createElement("p",{className:"text-sm font-medium text-green-800"},"Success!"),a.createElement("p",{className:"text-sm text-green-700 mt-0.5"},"Cash ticket link has been generated successfully.")),P.event&&a.createElement("div",{className:"p-3 bg-gray-50 rounded-lg space-y-1"},a.createElement("p",{className:"text-sm"},a.createElement("span",{className:"text-gray-500"},"Event:")," ",a.createElement("span",{className:"font-medium text-gray-900"},P.event.name)),a.createElement("p",{className:"text-sm"},a.createElement("span",{className:"text-gray-500"},"Phone:")," ",a.createElement("span",{className:"font-medium text-gray-900"},P.phone)),a.createElement("p",{className:"text-sm"},a.createElement("span",{className:"text-gray-500"},"Tickets:")," ",a.createElement("span",{className:"font-medium text-gray-900"},P.ticketCount))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Redemption Link"),a.createElement("div",{className:"flex gap-2"},a.createElement("input",{type:"text",value:P.link,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-700 truncate"}),a.createElement("button",{type:"button",onClick:U,className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 shrink-0 ${R?"bg-green-600 text-white":"bg-gray-800 text-white hover:bg-gray-900"}`},R?a.createElement(a.Fragment,null,a.createElement(En,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"Copied!")):a.createElement(a.Fragment,null,a.createElement(Qu,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"Copy"))),a.createElement("a",{href:P.link,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 shrink-0"},a.createElement(Ed,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"Open")))),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:V,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Close"),a.createElement("button",{type:"button",onClick:j,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Create Another"))):a.createElement("form",{onSubmit:L,className:"space-y-4"},l&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},a.createElement(Xt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},l)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Event ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement(mS,{selectedId:p.eventId,onChange:G,events:u,isLoading:g,onSearch:h,disabled:n,placeholder:"Search and select an event...",error:v.eventId})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Phone Number ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"tel",name:"phone",value:p.phone,onChange:M,disabled:n,placeholder:"Enter customer phone number",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${v.phone?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),v.phone&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},v.phone)),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Number of Tickets ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",name:"ticketCount",value:p.ticketCount,onChange:F,disabled:n,min:"1",max:"100",placeholder:"1",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${v.ticketCount?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),v.ticketCount&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},v.ticketCount)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Price Charged (INR) ",a.createElement("span",{className:"text-gray-400"},"(Optional)")),a.createElement("input",{type:"number",name:"priceCharged",value:p.priceCharged,onChange:M,disabled:n,min:"0",placeholder:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${v.priceCharged?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),v.priceCharged&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},v.priceCharged),T?.price&&a.createElement("p",{className:"mt-1 text-xs text-gray-500"},"Base price: ",ede(T.price),"/ticket"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Notes ",a.createElement("span",{className:"text-gray-400"},"(Optional)")),a.createElement("textarea",{name:"notes",value:p.notes,onChange:M,disabled:n,rows:2,placeholder:"Add any notes about this transaction",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-colors resize-none ${n?"bg-gray-100":""}`})),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:V,disabled:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},n&&a.createElement(ct,{className:"h-4 w-4 animate-spin"}),"Generate Link"))))}const Jg=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",ade=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);function eh({icon:e,label:t,value:r,className:n=""}){return a.createElement("div",{className:`flex items-start gap-3 ${n}`},a.createElement("div",{className:"shrink-0 w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center"},a.createElement(e,{className:"h-4 w-4 text-gray-600"})),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-xs text-gray-500"},t),a.createElement("p",{className:"text-sm font-medium text-gray-900 break-words"},r||"-")))}function nde({isOpen:e,onClose:t,record:r,isLoading:n=!1}){const[l,i]=w.useState(!1);w.useEffect(()=>{e||i(!1)},[e]);const u=w.useCallback(async()=>{if(r?.link)try{await navigator.clipboard.writeText(r.link),i(!0),setTimeout(()=>i(!1),2e3)}catch(g){console.error("[CashTicketDetailsModal] Failed to copy:",g)}},[r?.link]);return a.createElement(jt,{isOpen:e,onClose:t,title:"Cash Ticket Details",size:"lg"},n?a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading details...")):r?a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ${r.redeemed?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`},r.redeemed?a.createElement(a.Fragment,null,a.createElement(js,{className:"h-4 w-4"}),"Redeemed"):a.createElement(a.Fragment,null,a.createElement(ea,{className:"h-4 w-4"}),"Pending Redemption")),r.redeemedAt&&a.createElement("span",{className:"text-xs text-gray-500"},Jg(r.redeemedAt))),a.createElement("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100"},a.createElement("div",{className:"flex items-start gap-3"},a.createElement("div",{className:"shrink-0 w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},a.createElement(qr,{className:"h-5 w-5 text-gray-800"})),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-xs text-gray-800 font-medium"},"Event"),a.createElement("p",{className:"text-base font-semibold text-gray-900 truncate"},r.eventId?.name||"Unknown Event"),r.eventId?.startDate&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},Jg(r.eventId.startDate),r.eventId?.endDate&&` - ${Jg(r.eventId.endDate)}`)))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement(eh,{icon:vi,label:"Phone Number",value:r.generatedFor}),a.createElement(eh,{icon:Fu,label:"Ticket Count",value:`${r.ticketCount} ticket${r.ticketCount!==1?"s":""}`}),a.createElement(eh,{icon:Vp,label:"Price Charged",value:ade(r.priceCharged)}),a.createElement(eh,{icon:ea,label:"Created At",value:Jg(r.createdAt)})),r.generatedBy&&a.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},a.createElement("p",{className:"text-xs text-gray-500 mb-1"},"Generated By"),a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center"},a.createElement(ds,{className:"h-4 w-4 text-gray-600"})),a.createElement("div",null,a.createElement("p",{className:"text-sm font-medium text-gray-900"},r.generatedBy.name||"Unknown"),a.createElement("p",{className:"text-xs text-gray-500"},r.generatedBy.email)))),r.notes&&a.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},a.createElement("div",{className:"flex items-center gap-2 mb-2"},a.createElement(Ju,{className:"h-4 w-4 text-gray-500"}),a.createElement("p",{className:"text-xs text-gray-500 font-medium"},"Notes")),a.createElement("p",{className:"text-sm text-gray-700"},r.notes)),!r.redeemed&&r.link&&a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Redemption Link"),a.createElement("div",{className:"flex gap-2"},a.createElement("input",{type:"text",value:r.link,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-700 truncate"}),a.createElement("button",{type:"button",onClick:u,className:`px-3 py-2 rounded-lg transition-colors flex items-center gap-1.5 shrink-0 ${l?"bg-green-600 text-white":"bg-gray-800 text-white hover:bg-gray-900"}`},l?a.createElement(a.Fragment,null,a.createElement(En,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline text-sm"},"Copied!")):a.createElement(a.Fragment,null,a.createElement(Qu,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline text-sm"},"Copy"))),a.createElement("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-1.5 shrink-0"},a.createElement(Ed,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline text-sm"},"Open")))),r.signature&&a.createElement("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200"},a.createElement("span",{className:"text-xs text-gray-400"},"Signature"),a.createElement("code",{className:"text-xs font-mono text-gray-500 bg-gray-100 px-2 py-1 rounded"},r.signature)),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:t,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium"},"Close"))):a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(Sn,{className:"h-12 w-12 text-gray-300"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No record data available")))}const sde=e=>{const t={};if(e.eventId||(t.eventId="Event is required"),!e.phone.trim())t.phone="Phone number is required";else{const r=e.phone.replace(/[^0-9]/g,"");(r.length<10||r.length>15)&&(t.phone="Phone must be 10-15 digits")}return e.name.trim()?(e.name.trim().length<2||e.name.trim().length>100)&&(t.name="Name must be 2-100 characters"):t.name="Name is required",e.priceCharged!==""&&e.priceCharged<0&&(t.priceCharged="Price cannot be negative"),{isValid:Object.keys(t).length===0,errors:t}},Bv=()=>({eventId:"",phone:"",name:"",priceCharged:"",notes:""});function lde({isOpen:e,onClose:t,onSubmit:r,isLoading:n=!1,serverError:l=null,allowedEvents:i=[],eventsLoading:u=!1,onSearchEvents:g}){const[h,p]=w.useState(Bv()),[y,v]=w.useState({}),[C,T]=w.useState(null),[D,P]=w.useState(null);w.useEffect(()=>{e&&(p(Bv()),v({}),T(null),P(null))},[e]);const k=w.useCallback(F=>{const{name:U,value:L,type:V}=F.target;let j=L;V==="number"&&(j=L===""?"":Number(L)),p(Y=>({...Y,[U]:j})),y[U]&&v(Y=>({...Y,[U]:null}))},[y]),R=w.useCallback((F,U)=>{p(L=>({...L,eventId:F})),T(U),U?.price&&p(L=>({...L,eventId:F,priceCharged:L.priceCharged||U.price})),y.eventId&&v(L=>({...L,eventId:null}))},[y.eventId]),B=async F=>{F.preventDefault();const U=sde(h);if(!U.isValid){v(U.errors);return}const L={eventId:h.eventId,phone:h.phone.replace(/[^0-9]/g,""),name:h.name.trim()};h.priceCharged!==""&&h.priceCharged!==null&&(L.priceCharged=Number(h.priceCharged)),h.notes.trim()&&(L.notes=h.notes.trim());const V=await r(L);V?.success&&V.data&&P({enrollment:V.data.enrollment,event:V.data.event})},M=w.useCallback(()=>{n||t()},[n,t]),G=w.useCallback(()=>{p(Bv()),T(null),P(null),v({})},[]);return a.createElement(jt,{isOpen:e,onClose:M,title:D?"Direct Ticket Created":"Create Direct Ticket",size:"xl",closeOnOverlayClick:!n},D?a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg flex items-start gap-2"},a.createElement(En,{className:"h-5 w-5 text-green-600 shrink-0 mt-0.5"}),a.createElement("div",null,a.createElement("p",{className:"text-sm font-medium text-green-800"},"Success"),a.createElement("p",{className:"text-sm text-green-700 mt-0.5"},"Direct ticket created and sent via WhatsApp."))),a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(Fu,{className:"h-5 w-5 text-gray-500"}),a.createElement("span",{className:"font-medium text-gray-900"},D.event?.name)),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(ds,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-gray-600"},D.enrollment?.name)),a.createElement("div",{className:"flex items-center gap-2"},a.createElement(vi,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-gray-600"},D.enrollment?.phone)))),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:M,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Close"),a.createElement("button",{type:"button",onClick:G,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Create Another"))):a.createElement("form",{onSubmit:B,className:"space-y-4"},l&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},a.createElement(Xt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},l)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Event ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement(mS,{selectedId:h.eventId,onChange:R,events:i,isLoading:u,onSearch:g,disabled:n,placeholder:"Search and select an event...",error:y.eventId})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Attendee Name ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",name:"name",value:h.name,onChange:k,disabled:n,placeholder:"Enter attendee name",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${y.name?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),y.name&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.name)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Phone Number ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"tel",name:"phone",value:h.phone,onChange:k,disabled:n,placeholder:"Enter phone number",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${y.phone?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),y.phone&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.phone)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Price Charged (INR) ",a.createElement("span",{className:"text-gray-400"},"(Optional)")),a.createElement("input",{type:"number",name:"priceCharged",value:h.priceCharged,onChange:k,disabled:n,min:"0",placeholder:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${y.priceCharged?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),y.priceCharged&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.priceCharged),C?.price&&a.createElement("p",{className:"mt-1 text-xs text-gray-500"},"Event base price: ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(C.price))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Notes ",a.createElement("span",{className:"text-gray-400"},"(Optional)")),a.createElement("textarea",{name:"notes",value:h.notes,onChange:k,disabled:n,rows:2,maxLength:500,placeholder:"Add any notes",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-colors resize-none ${n?"bg-gray-100":""}`})),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:M,disabled:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},n&&a.createElement(ct,{className:"h-4 w-4 animate-spin"}),"Create Ticket"))))}const ide=e=>{if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(2))+" "+r[n]},ode=e=>{const t={};return e.eventId||(t.eventId="Event is required"),e.file||(t.file="Excel file is required"),e.priceCharged!==""&&e.priceCharged<0&&(t.priceCharged="Price cannot be negative"),{isValid:Object.keys(t).length===0,errors:t}},Fv=()=>({eventId:"",file:null,priceCharged:"",notes:""}),cde=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"],ude=".xlsx,.xls,.csv";function dde({isOpen:e,onClose:t,onSubmit:r,isLoading:n=!1,serverError:l=null,allowedEvents:i=[],eventsLoading:u=!1,onSearchEvents:g}){const[h,p]=w.useState(Fv()),[y,v]=w.useState({}),[C,T]=w.useState(null),[D,P]=w.useState(null),[k,R]=w.useState(!1),B=w.useRef(null);w.useEffect(()=>{e&&(p(Fv()),v({}),T(null),P(null),R(!1))},[e]);const M=w.useCallback(J=>{const{name:ae,value:pe,type:xe}=J.target;let ee=pe;xe==="number"&&(ee=pe===""?"":Number(pe)),p(K=>({...K,[ae]:ee})),y[ae]&&v(K=>({...K,[ae]:null}))},[y]),G=w.useCallback((J,ae)=>{p(pe=>({...pe,eventId:J})),T(ae),ae?.price&&p(pe=>({...pe,eventId:J,priceCharged:pe.priceCharged||ae.price})),y.eventId&&v(pe=>({...pe,eventId:null}))},[y.eventId]),F=J=>cde.includes(J.type)||J.name.endsWith(".xlsx")||J.name.endsWith(".xls")||J.name.endsWith(".csv"),U=w.useCallback(J=>{if(J){if(!F(J)){v(ae=>({...ae,file:"Invalid file type. Please upload an Excel file (.xlsx, .xls) or CSV."}));return}if(J.size>10*1024*1024){v(ae=>({...ae,file:"File size exceeds 10MB limit."}));return}p(ae=>({...ae,file:J})),v(ae=>({...ae,file:null}))}},[]),L=J=>{const ae=J.target.files?.[0];U(ae),J.target.value=""},V=J=>{J.preventDefault(),n||R(!0)},j=J=>{J.preventDefault(),R(!1)},Y=J=>{if(J.preventDefault(),R(!1),n)return;const ae=J.dataTransfer.files?.[0];U(ae)},H=()=>{p(J=>({...J,file:null}))},q=async J=>{J.preventDefault();const ae=ode(h);if(!ae.isValid){v(ae.errors);return}const pe={eventId:h.eventId};h.priceCharged!==""&&h.priceCharged!==null&&(pe.priceCharged=Number(h.priceCharged)),h.notes.trim()&&(pe.notes=h.notes.trim());const xe=await r(h.file,pe);xe?.success&&xe.data&&P(xe.data)},le=()=>{if(D?.rejectionFile?.base64)try{const J=atob(D.rejectionFile.base64),ae=new Array(J.length);for(let te=0;te<J.length;te++)ae[te]=J.charCodeAt(te);const pe=new Uint8Array(ae),xe=new Blob([pe],{type:D.rejectionFile.mimeType}),ee=window.URL.createObjectURL(xe),K=document.createElement("a");K.href=ee,K.download=D.rejectionFile.filename,document.body.appendChild(K),K.click(),document.body.removeChild(K),window.URL.revokeObjectURL(ee)}catch(J){console.error("[DirectTicketBulk] Failed to download rejections:",J)}},ue=w.useCallback(()=>{n||t()},[n,t]),re=w.useCallback(()=>{p(Fv()),T(null),P(null),v({})},[]);return a.createElement(jt,{isOpen:e,onClose:ue,title:D?"Bulk Upload Complete":"Bulk Direct Ticket Upload",size:"xl",closeOnOverlayClick:!n},D?a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"grid grid-cols-3 gap-3"},a.createElement("div",{className:"p-3 bg-gray-50 rounded-lg text-center"},a.createElement("div",{className:"text-2xl font-bold text-gray-900"},D.summary?.total||0),a.createElement("div",{className:"text-xs text-gray-500"},"Total")),a.createElement("div",{className:"p-3 bg-green-50 rounded-lg text-center"},a.createElement("div",{className:"text-2xl font-bold text-green-700"},D.summary?.successful||0),a.createElement("div",{className:"text-xs text-green-600"},"Successful")),a.createElement("div",{className:"p-3 bg-red-50 rounded-lg text-center"},a.createElement("div",{className:"text-2xl font-bold text-red-700"},D.summary?.rejected||0),a.createElement("div",{className:"text-xs text-red-600"},"Rejected"))),D.event&&a.createElement("div",{className:"p-3 bg-gray-50 rounded-lg flex items-center gap-2"},a.createElement(eE,{className:"h-5 w-5 text-gray-500"}),a.createElement("span",{className:"font-medium text-gray-900"},D.event.name)),D.successful?.length>0&&a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"flex items-center gap-2 text-sm font-medium text-green-700"},a.createElement(rf,{className:"h-4 w-4"}),"Successful (",D.successful.length,")"),a.createElement("div",{className:"max-h-32 overflow-y-auto border border-gray-200 rounded-lg"},a.createElement("table",{className:"w-full text-sm"},a.createElement("thead",{className:"bg-gray-50 sticky top-0"},a.createElement("tr",null,a.createElement("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Row"),a.createElement("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Phone"),a.createElement("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Name"))),a.createElement("tbody",{className:"divide-y divide-gray-100"},D.successful.slice(0,50).map((J,ae)=>a.createElement("tr",{key:ae,className:"hover:bg-gray-50"},a.createElement("td",{className:"px-3 py-1.5 text-gray-600"},J.rowNumber),a.createElement("td",{className:"px-3 py-1.5 text-gray-900"},J.phone),a.createElement("td",{className:"px-3 py-1.5 text-gray-900"},J.name))),D.successful.length>50&&a.createElement("tr",null,a.createElement("td",{colSpan:3,className:"px-3 py-2 text-center text-gray-500 text-xs"},"... and ",D.successful.length-50," more")))))),D.rejected?.length>0&&a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"flex items-center gap-2 text-sm font-medium text-red-700"},a.createElement(Sn,{className:"h-4 w-4"}),"Rejected (",D.rejected.length,")"),D.rejectionFile&&a.createElement("button",{type:"button",onClick:le,className:"flex items-center gap-1 px-2 py-1 text-xs text-gray-600 bg-gray-100 hover:bg-gray-200 rounded transition-colors"},a.createElement(Lj,{className:"h-3 w-3"}),"Download")),a.createElement("div",{className:"max-h-32 overflow-y-auto border border-gray-200 rounded-lg"},a.createElement("table",{className:"w-full text-sm"},a.createElement("thead",{className:"bg-gray-50 sticky top-0"},a.createElement("tr",null,a.createElement("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Row"),a.createElement("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Phone"),a.createElement("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Reason"))),a.createElement("tbody",{className:"divide-y divide-gray-100"},D.rejected.slice(0,20).map((J,ae)=>a.createElement("tr",{key:ae,className:"hover:bg-gray-50"},a.createElement("td",{className:"px-3 py-1.5 text-gray-600"},J.rowNumber),a.createElement("td",{className:"px-3 py-1.5 text-gray-900"},J.phone||"-"),a.createElement("td",{className:"px-3 py-1.5 text-red-600 text-xs"},J.reason))),D.rejected.length>20&&a.createElement("tr",null,a.createElement("td",{colSpan:3,className:"px-3 py-2 text-center text-gray-500 text-xs"},"... and ",D.rejected.length-20," more (download for full list)")))))),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:ue,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Close"),a.createElement("button",{type:"button",onClick:re,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Upload Another"))):a.createElement("form",{onSubmit:q,className:"space-y-4"},l&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},a.createElement(Xt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},l)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Event ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement(mS,{selectedId:h.eventId,onChange:G,events:i,isLoading:u,onSearch:g,disabled:n,placeholder:"Search and select an event...",error:y.eventId})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Excel File ",a.createElement("span",{className:"text-red-500"},"*")),h.file?a.createElement("div",{className:"flex items-center gap-3 p-3 bg-gray-50 border border-gray-200 rounded-lg"},a.createElement(eE,{className:"h-8 w-8 text-green-600 shrink-0"}),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},h.file.name),a.createElement("p",{className:"text-xs text-gray-500"},ide(h.file.size))),a.createElement("button",{type:"button",onClick:H,disabled:n,className:"p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors disabled:opacity-50"},a.createElement(Gr,{className:"h-4 w-4"}))):a.createElement("div",{onDragOver:V,onDragLeave:j,onDrop:Y,onClick:()=>!n&&B.current?.click(),className:`
                  relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer
                  transition-all duration-200
                  ${k?"border-gray-800 bg-gray-50":"border-gray-300 hover:border-gray-400"}
                  ${n?"opacity-50 cursor-not-allowed":""}
                  ${y.file?"border-red-300 bg-red-50/50":""}
                `},a.createElement("input",{ref:B,type:"file",accept:ude,onChange:L,disabled:n,className:"hidden"}),a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"mx-auto w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center"},a.createElement(X_,{className:"h-5 w-5 text-gray-500"})),a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-600"},"Drop Excel file here or click to upload"),a.createElement("p",{className:"text-xs text-gray-400 mt-1"},"XLSX, XLS, or CSV (max 10MB)")))),y.file&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.file),a.createElement("div",{className:"mt-2 text-xs text-gray-500 space-y-1"},a.createElement("p",null,"Excel should have columns: ",a.createElement("span",{className:"font-medium"},"phone")," and ",a.createElement("span",{className:"font-medium"},"name")),a.createElement("p",{className:"text-gray-400"},"Column order doesn't matter. Accepts: Phone, phone number, Name, full name, etc."))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Price Charged Per Ticket (INR) ",a.createElement("span",{className:"text-gray-400"},"(Optional)")),a.createElement("input",{type:"number",name:"priceCharged",value:h.priceCharged,onChange:M,disabled:n,min:"0",placeholder:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${y.priceCharged?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),y.priceCharged&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.priceCharged),C?.price&&a.createElement("p",{className:"mt-1 text-xs text-gray-500"},"Event base price: ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(C.price))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Notes ",a.createElement("span",{className:"text-gray-400"},"(Optional, applies to all)")),a.createElement("textarea",{name:"notes",value:h.notes,onChange:M,disabled:n,rows:2,maxLength:500,placeholder:"Add notes for all tickets",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-colors resize-none ${n?"bg-gray-100":""}`})),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:ue,disabled:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},n&&a.createElement(ct,{className:"h-4 w-4 animate-spin"}),"Upload & Process"))))}const UO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",jO=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),th={redeemed:"bg-green-100 text-green-700",pending:"bg-yellow-100 text-yellow-700"};function mde(){const{admin:e}=hn(),{records:t,pagination:r,filters:n,isLoading:l,error:i,allowedEvents:u,eventsLoading:g,fetchRecords:h,createRecord:p,getRecordById:y,deleteRecord:v,searchEvents:C,updateFilters:T,changePage:D,clearError:P}=Zue(),k=w.useMemo(()=>e?.role==="ADMIN"||e?.role==="SUPER_ADMIN",[e?.role]),R=w.useMemo(()=>e?.role==="MANAGEMENT_STAFF"?t.filter(Ge=>Ge.generatedBy?._id===e._id):t,[t,e?.role,e?._id]),[B,M]=w.useState(!1),[G,F]=w.useState(!1),[U,L]=w.useState(!1),[V,j]=w.useState(!1),[Y,H]=w.useState(!1),[q,le]=w.useState(null),[ue,re]=w.useState(!1),[J,ae]=w.useState(!1),[pe,xe]=w.useState(null),[ee,K]=w.useState(null),[te,ge]=w.useState(!1),[oe,Ne]=w.useState(null),[ie,me]=w.useState(!1),[$e,ve]=w.useState(null),[We,nt]=w.useState(null),[Be,Ee]=w.useState(!1),[je,ce]=w.useState(n.eventId||""),[qe,Se]=w.useState(n.redeemed||""),rt=w.useCallback(()=>{xe(null),K(null),M(!0)},[]),it=w.useCallback(()=>{M(!1),xe(null),K(null)},[]),pt=w.useCallback(()=>{Ne(null),j(!0)},[]),Ke=w.useCallback(()=>{j(!1),Ne(null)},[]),lt=w.useCallback(async Ge=>{ge(!0),Ne(null);try{const xt=await Oo.createDirectTicket(Ge);return xt.success?(console.log("[CashTickets] Direct ticket created:",xt.data?.enrollment?.id),h(1),{success:!0,data:xt.data}):(console.error("[CashTickets] Direct ticket failed:",xt.message),Ne(xt.message||"Failed to create direct ticket"),{success:!1})}catch(xt){return console.error("[CashTickets] Direct ticket error:",xt),Ne("An unexpected error occurred"),{success:!1}}finally{ge(!1)}},[h]),Ue=w.useCallback(()=>{ve(null),H(!0)},[]),mt=w.useCallback(()=>{H(!1),ve(null)},[]),$t=w.useCallback(async(Ge,xt)=>{me(!0),ve(null);try{const na=await Oo.createDirectTicketBulk(Ge,xt);return na.success?(console.log("[CashTickets] Bulk direct tickets processed:",na.data?.summary),h(1),{success:!0,data:na.data}):(console.error("[CashTickets] Bulk direct tickets failed:",na.message),ve(na.message||"Failed to process bulk upload"),{success:!1})}catch(na){return console.error("[CashTickets] Bulk direct tickets error:",na),ve("An unexpected error occurred"),{success:!1}}finally{me(!1)}},[h]),ir=w.useCallback(async Ge=>{ae(!0),xe(null),K(null);try{const xt=await p(Ge);return xt.success?xt:xt.existingLink?(K({existingLink:xt.existingLink,signature:xt.signature}),{success:!1}):(xe(xt.error||"Failed to create cash ticket"),{success:!1})}catch{return xe("An unexpected error occurred"),{success:!1}}finally{ae(!1)}},[p]),Br=w.useCallback(async Ge=>{le(Ge),F(!0),re(!0);try{const xt=await y(Ge._id);xt.success&&le(xt.data)}catch(xt){console.error("[CashTickets] Failed to fetch details:",xt)}finally{re(!1)}},[y]),ut=w.useCallback(()=>{F(!1),le(null)},[]),Tt=w.useCallback(Ge=>{le(Ge),L(!0)},[]),Cr=w.useCallback(()=>{L(!1),le(null)},[]),xr=w.useCallback(async()=>{if(q){ae(!0);try{const Ge=await v(q._id);Ge.success?Cr():alert(Ge.error||"Failed to delete record")}catch{alert("An unexpected error occurred")}finally{ae(!1)}}},[q,v,Cr]),ia=w.useCallback(async(Ge,xt)=>{try{await navigator.clipboard.writeText(Ge),nt(xt),setTimeout(()=>nt(null),2e3)}catch(na){console.error("[CashTickets] Failed to copy:",na)}},[]),kt=w.useCallback(()=>{T({eventId:je,redeemed:qe}),Ee(!1)},[je,qe,T]),be=w.useCallback(()=>{ce(""),Se(""),T({eventId:"",redeemed:""}),Ee(!1)},[T]),Je=w.useCallback(()=>{h(r.page)},[h,r.page]),st=w.useMemo(()=>n.eventId||n.redeemed!=="",[n]),At=w.useMemo(()=>R.reduce((Ge,xt)=>Ge+(xt.ticketCount||0),0),[R]),dr=w.useMemo(()=>e?.role==="MANAGEMENT_STAFF"&&e?.maxCashTicketsAllowed!=null,[e?.role,e?.maxCashTicketsAllowed]),qa=w.useMemo(()=>dr?Math.min(100,At/e.maxCashTicketsAllowed*100):0,[dr,At,e?.maxCashTicketsAllowed]),aa=qa>=80,we=At>=e?.maxCashTicketsAllowed;return a.createElement("div",{className:"space-y-4 sm:space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900"},"Cash Tickets"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Generate and manage offline cash payment ticket links")),a.createElement("div",{className:"flex flex-wrap items-center gap-2"},a.createElement("button",{onClick:rt,disabled:we,className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-colors font-medium ${we?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-800 text-white hover:bg-gray-900"}`,title:we?"Ticket limit reached":"Generate new ticket link"},a.createElement(kr,{className:"h-5 w-5"}),a.createElement("span",{className:"hidden sm:inline"},"Generate Link"),a.createElement("span",{className:"sm:hidden"},"Link")),a.createElement("button",{onClick:pt,disabled:we,className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-colors font-medium ${we?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-700 text-white hover:bg-gray-800"}`,title:we?"Ticket limit reached":"Create direct ticket"},a.createElement(W_,{className:"h-5 w-5"}),a.createElement("span",{className:"hidden sm:inline"},"Direct Ticket"),a.createElement("span",{className:"sm:hidden"},"Direct")),a.createElement("button",{onClick:Ue,disabled:we,className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-colors font-medium ${we?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700"}`,title:we?"Ticket limit reached":"Bulk upload direct tickets"},a.createElement(eE,{className:"h-5 w-5"}),a.createElement("span",{className:"hidden sm:inline"},"Direct Ticket Bulk"),a.createElement("span",{className:"sm:hidden"},"Bulk")))),dr&&a.createElement("div",{className:`p-4 rounded-xl border ${we?"bg-red-50 border-red-200":aa?"bg-yellow-50 border-yellow-200":"bg-blue-50 border-blue-200"}`},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"flex items-center gap-2 mb-2"},a.createElement(Fu,{className:`h-5 w-5 ${we?"text-red-600":aa?"text-yellow-600":"text-gray-800"}`}),a.createElement("h3",{className:`font-medium ${we?"text-red-800":aa?"text-yellow-800":"text-blue-800"}`},"Ticket Generation Limit")),a.createElement("p",{className:`text-sm ${we?"text-red-700":aa?"text-yellow-700":"text-blue-700"}`},we?a.createElement(a.Fragment,null,"You have reached your maximum ticket limit. Contact your administrator to increase your limit."):a.createElement(a.Fragment,null,"You have created"," ",a.createElement("span",{className:"font-semibold"},At," of ",e.maxCashTicketsAllowed)," ","tickets (",e.maxCashTicketsAllowed-At," remaining)"))),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"text-right"},a.createElement("div",{className:`text-2xl font-bold ${we?"text-red-700":aa?"text-yellow-700":"text-blue-700"}`},At),a.createElement("div",{className:`text-xs ${we?"text-red-600":aa?"text-yellow-600":"text-gray-800"}`},"of ",e.maxCashTicketsAllowed)))),a.createElement("div",{className:"mt-3"},a.createElement("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden"},a.createElement("div",{className:`h-full transition-all duration-300 ${we?"bg-red-600":aa?"bg-yellow-500":"bg-blue-600"}`,style:{width:`${qa}%`}})))),i&&a.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},a.createElement(Xt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("div",{className:"flex-1"},a.createElement("p",{className:"text-sm font-medium text-red-800"},"Error loading records"),a.createElement("p",{className:"text-sm text-red-700 mt-0.5"},i)),a.createElement("button",{onClick:P,className:"shrink-0 text-red-600 hover:text-red-800"},"")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},a.createElement("button",{onClick:()=>Ee(!Be),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${st?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},a.createElement(Bl,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),st&&a.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(n.eventId?1:0)+(n.redeemed!==""?1:0)),a.createElement(Ll,{className:`h-4 w-4 transition-transform ${Be?"rotate-180":""}`})),a.createElement("button",{onClick:Je,disabled:l,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},a.createElement($n,{className:`h-4 w-4 ${l?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"ml-auto text-sm text-gray-500"},r.total," record",r.total!==1?"s":""," total")),Be&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Event"),a.createElement("select",{value:je,onChange:Ge=>ce(Ge.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Events"),u.map(Ge=>a.createElement("option",{key:Ge._id,value:Ge._id},Ge.name)))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),a.createElement("select",{value:qe,onChange:Ge=>Se(Ge.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"false"},"Pending"),a.createElement("option",{value:"true"},"Redeemed"))),a.createElement("div",{className:"flex items-end gap-2 sm:col-span-2 lg:col-span-1"},a.createElement("button",{onClick:kt,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),a.createElement("button",{onClick:be,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),a.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Event"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Phone"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Details"),k&&a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Created By"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,l&&R.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:k?6:5,className:"px-6 py-12 text-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading records..."))):R.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:k?6:5,className:"px-6 py-12 text-center"},a.createElement(Fu,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No records found"),a.createElement("button",{onClick:rt,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Generate your first ticket link"))):R.map(Ge=>a.createElement("tr",{key:Ge._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center shrink-0"},a.createElement(qr,{className:"h-4 w-4 text-gray-800"})),a.createElement("span",{className:"font-medium text-gray-900 truncate max-w-[200px]"},Ge.eventId?.name||"Unknown Event"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-600"},a.createElement(vi,{className:"h-4 w-4 text-gray-400"}),Ge.generatedFor)),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex flex-col"},a.createElement("span",{className:"text-gray-900 font-medium"},Ge.ticketCount," x ",jO(Ge.priceCharged)),a.createElement("span",{className:"text-xs text-gray-500 mt-0.5"},UO(Ge.createdAt)))),k&&a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex flex-col"},a.createElement("span",{className:"text-gray-900 font-medium"},Ge.generatedBy?.name||"-"),(Ge.generatedBy?.email||Ge.generatedBy?.phone)&&a.createElement("span",{className:"text-xs text-gray-500 mt-0.5"},Ge.generatedBy?.email||Ge.generatedBy?.phone))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Ge.redeemed?th.redeemed:th.pending}`},Ge.redeemed?"Redeemed":"Pending")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},!Ge.redeemed&&Ge.link&&a.createElement("button",{onClick:()=>ia(Ge.link,Ge._id),className:`p-2 rounded-lg transition-colors ${We===Ge._id?"text-green-600 bg-green-50":"text-gray-600 hover:bg-gray-100"}`,title:"Copy link"},We===Ge._id?a.createElement(En,{className:"h-4 w-4"}):a.createElement(Qu,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>Br(Ge),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},a.createElement(Mr,{className:"h-4 w-4"})),!Ge.redeemed&&a.createElement("button",{onClick:()=>Tt(Ge),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},a.createElement(ur,{className:"h-4 w-4"}))))))))),r.totalPages>0&&a.createElement(Rr,{currentPage:r.page,totalPages:r.totalPages,totalItems:r.total,itemsPerPage:r.limit,onPageChange:D,itemLabel:"records"})),a.createElement("div",{className:"md:hidden space-y-4"},l&&R.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading records...")):R.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Fu,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No records found"),a.createElement("button",{onClick:rt,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Generate your first ticket link")):a.createElement(a.Fragment,null,R.map(Ge=>a.createElement("div",{key:Ge._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"flex items-center gap-2 min-w-0"},a.createElement("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center shrink-0"},a.createElement(qr,{className:"h-5 w-5 text-gray-800"})),a.createElement("div",{className:"min-w-0"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},Ge.eventId?.name||"Unknown Event"),a.createElement("p",{className:"text-xs text-gray-500"},UO(Ge.createdAt)))),a.createElement("span",{className:`shrink-0 px-2.5 py-1 rounded-full text-xs font-medium ${Ge.redeemed?th.redeemed:th.pending}`},Ge.redeemed?"Redeemed":"Pending")),a.createElement("div",{className:"grid grid-cols-2 gap-3 text-sm"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(vi,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-gray-600"},Ge.generatedFor)),a.createElement("div",{className:"flex items-center gap-2"},a.createElement(Fu,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-gray-600"},Ge.ticketCount," x ",jO(Ge.priceCharged)))),k&&a.createElement("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100"},a.createElement("span",{className:"text-sm text-gray-500"},"Created By"),a.createElement("div",{className:"flex flex-col items-end"},a.createElement("span",{className:"text-sm font-medium text-gray-900"},Ge.generatedBy?.name||"-"),(Ge.generatedBy?.email||Ge.generatedBy?.phone)&&a.createElement("span",{className:"text-xs text-gray-500"},Ge.generatedBy?.email||Ge.generatedBy?.phone))),a.createElement("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100"},!Ge.redeemed&&Ge.link&&a.createElement("button",{onClick:()=>ia(Ge.link,Ge._id),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${We===Ge._id?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},We===Ge._id?a.createElement(a.Fragment,null,a.createElement(En,{className:"h-4 w-4"}),"Copied!"):a.createElement(a.Fragment,null,a.createElement(Qu,{className:"h-4 w-4"}),"Copy Link")),a.createElement("button",{onClick:()=>Br(Ge),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},a.createElement(Mr,{className:"h-4 w-4"}),"Details"),!Ge.redeemed&&a.createElement("button",{onClick:()=>Tt(Ge),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},a.createElement(ur,{className:"h-4 w-4"}))))),r.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Rr,{currentPage:r.page,totalPages:r.totalPages,totalItems:r.total,itemsPerPage:r.limit,onPageChange:D,itemLabel:"records"})))),a.createElement(rde,{isOpen:B,onClose:it,onSubmit:ir,isLoading:J,serverError:pe,existingLinkData:ee,allowedEvents:u,eventsLoading:g,onSearchEvents:C}),a.createElement(nde,{isOpen:G,onClose:ut,record:q,isLoading:ue}),a.createElement(za,{isOpen:U,onClose:Cr,onConfirm:xr,title:"Delete Cash Ticket",message:`Are you sure you want to delete this cash ticket for ${q?.generatedFor}? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:J}),a.createElement(lde,{isOpen:V,onClose:Ke,onSubmit:lt,isLoading:te,serverError:oe,allowedEvents:u,eventsLoading:g,onSearchEvents:C}),a.createElement(dde,{isOpen:Y,onClose:mt,onSubmit:$t,isLoading:ie,serverError:$e,allowedEvents:u,eventsLoading:g,onSearchEvents:C}))}const Qs={BASE:"/web/vouchers",GET_BY_ID:e=>`/web/vouchers/${e}`,UPDATE:e=>`/web/vouchers/${e}`,DELETE:e=>`/web/vouchers/${e}`,ENABLE:e=>`/web/vouchers/${e}/enable`,DISABLE:e=>`/web/vouchers/${e}/disable`,DELETED:"/web/vouchers/deleted",RESTORE:e=>`/web/vouchers/${e}/restore`,PERMANENT_DELETE:e=>`/web/vouchers/${e}/permanent`},hc={create:async e=>{console.log("[VoucherService] Creating voucher with code:",e.code);const t=await Pe(ke.post(Qs.BASE,e));return t.success?console.log("[VoucherService] Voucher created successfully:",t.data.voucher?._id):console.error("[VoucherService] Failed to create voucher:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.isActive!==void 0&&e.isActive!==""&&t.append("isActive",e.isActive),e.search&&t.append("search",e.search);const r=t.toString(),n=r?`${Qs.BASE}?${r}`:Qs.BASE;console.log("[VoucherService] Fetching vouchers with params:",e);const l=await Pe(ke.get(n));return l.success?console.log("[VoucherService] Fetched vouchers:",l.data.vouchers?.length):console.error("[VoucherService] Failed to fetch vouchers:",l.message),l},getById:async e=>{console.log("[VoucherService] Fetching voucher by ID:",e);const t=await Pe(ke.get(Qs.GET_BY_ID(e)));return t.success?console.log("[VoucherService] Fetched voucher:",t.data.voucher?._id):console.error("[VoucherService] Failed to fetch voucher:",t.message),t},update:async(e,t)=>{console.log("[VoucherService] Updating voucher:",e);const r=await Pe(ke.put(Qs.UPDATE(e),t));return r.success?console.log("[VoucherService] Voucher updated successfully"):console.error("[VoucherService] Failed to update voucher:",r.message),r},enable:async e=>{console.log("[VoucherService] Enabling voucher:",e);const t=await Pe(ke.post(Qs.ENABLE(e)));return t.success?console.log("[VoucherService] Voucher enabled successfully"):console.error("[VoucherService] Failed to enable voucher:",t.message),t},disable:async e=>{console.log("[VoucherService] Disabling voucher:",e);const t=await Pe(ke.post(Qs.DISABLE(e)));return t.success?console.log("[VoucherService] Voucher disabled successfully"):console.error("[VoucherService] Failed to disable voucher:",t.message),t},delete:async e=>{console.log("[VoucherService] Deleting voucher:",e);const t=await Pe(ke.delete(Qs.DELETE(e)));return t.success?console.log("[VoucherService] Voucher deleted successfully"):console.error("[VoucherService] Failed to delete voucher:",t.message),t},getDeleted:async()=>{console.log("[VoucherService] Fetching deleted vouchers");const e=await Pe(ke.get(Qs.DELETED));return e.success?console.log("[VoucherService] Fetched deleted vouchers:",e.data.vouchers?.length):console.error("[VoucherService] Failed to fetch deleted vouchers:",e.message),e},restore:async e=>{console.log("[VoucherService] Restoring voucher:",e);const t=await Pe(ke.post(Qs.RESTORE(e)));return t.success?console.log("[VoucherService] Voucher restored successfully"):console.error("[VoucherService] Failed to restore voucher:",t.message),t},permanentDelete:async e=>{console.log("[VoucherService] Permanently deleting voucher:",e);const t=await Pe(ke.delete(Qs.PERMANENT_DELETE(e)));return t.success?console.log("[VoucherService] Voucher permanently deleted"):console.error("[VoucherService] Failed to permanently delete voucher:",t.message),t}};function fde(e={}){const[t,r]=w.useState([]),[n,l]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[i,u]=w.useState({search:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e}),[g,h]=w.useState(!1),[p,y]=w.useState(null),v=w.useRef(null),C=w.useCallback(async(V=n.currentPage)=>{h(!0),y(null);try{const j={page:V,limit:n.limit,sortBy:i.sortBy,sortOrder:i.sortOrder,...i.search&&{search:i.search},...i.isActive!==""&&{isActive:i.isActive}},Y=await hc.getAll(j);Y.success?(r(Y.data.vouchers||[]),l({currentPage:Y.data.pagination?.currentPage||1,totalPages:Y.data.pagination?.totalPages||0,totalCount:Y.data.pagination?.totalCount||0,limit:Y.data.pagination?.limit||10})):(y(Y.message),r([]))}catch{y("Failed to fetch vouchers"),r([])}finally{h(!1)}},[i,n.limit]),T=w.useCallback(async V=>{try{const j=await hc.create(V);return j.success?(await C(1),{success:!0,data:j.data}):{success:!1,error:j.message,validationErrors:j.error}}catch{return{success:!1,error:"Failed to create voucher"}}},[C]),D=w.useCallback(async V=>{try{const j=await hc.getById(V);return j.success?{success:!0,data:j.data.voucher}:{success:!1,error:j.message}}catch{return{success:!1,error:"Failed to fetch voucher details"}}},[]),P=w.useCallback(async(V,j)=>{try{const Y=await hc.update(V,j);return Y.success?(r(H=>H.map(q=>q._id===V?{...q,...Y.data.voucher}:q)),{success:!0,data:Y.data}):{success:!1,error:Y.message,validationErrors:Y.error}}catch{return{success:!1,error:"Failed to update voucher"}}},[]),k=w.useCallback(async(V,j)=>{try{const Y=j?await hc.disable(V):await hc.enable(V);return Y.success?(r(H=>H.map(q=>q._id===V?{...q,isActive:!j}:q)),{success:!0}):{success:!1,error:Y.message}}catch{return{success:!1,error:"Failed to update voucher status"}}},[]),R=w.useCallback(async V=>{try{const j=await hc.delete(V);return j.success?(r(Y=>Y.filter(H=>H._id!==V)),l(Y=>({...Y,totalCount:Y.totalCount-1,totalPages:Math.ceil((Y.totalCount-1)/Y.limit)})),{success:!0}):{success:!1,error:j.message}}catch{return{success:!1,error:"Failed to delete voucher"}}},[]),B=w.useCallback(V=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{u(j=>({...j,search:V}))},300)},[]),M=w.useCallback(V=>{u(j=>({...j,...V}))},[]),G=w.useCallback(()=>{u({search:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),F=w.useCallback(V=>{C(V)},[C]),U=w.useCallback(V=>{l(j=>({...j,limit:V}))},[]),L=w.useCallback(()=>{y(null)},[]);return w.useEffect(()=>{C(1)},[i]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{vouchers:t,pagination:n,filters:i,isLoading:g,error:p,fetchVouchers:C,createVoucher:T,getVoucherById:D,updateVoucher:P,toggleVoucherStatus:k,deleteVoucher:R,searchVouchers:B,updateFilters:M,resetFilters:G,changePage:F,changeLimit:U,clearError:L}}const zO=()=>({title:"",description:"",code:"",maxUsage:"",events:[],isActive:!0});function gde({isOpen:e,onClose:t,onSubmit:r,isLoading:n=!1,serverError:l=null,voucherToEdit:i=null}){const[u,g]=w.useState(zO()),[h,p]=w.useState({}),y=!!i;w.useEffect(()=>{e&&(g(i?{title:i.title||"",description:i.description||"",code:i.code||"",maxUsage:i.maxUsage?.toString()||"",events:i.events?.map(k=>k._id||k)||[],isActive:i.isActive??!0}:zO()),p({}))},[e,i]);const v=k=>{const R={};if(k.title.trim()?k.title.length>100&&(R.title="Title must be less than 100 characters"):R.title="Title is required",k.description.trim()?k.description.length>500&&(R.description="Description must be less than 500 characters"):R.description="Description is required",k.code.trim()?/^[A-Z0-9_-]+$/i.test(k.code)?k.code.length>20&&(R.code="Code must be less than 20 characters"):R.code="Code can only contain letters, numbers, hyphens, and underscores":R.code="Voucher code is required",!k.maxUsage)R.maxUsage="Maximum usage is required";else{const B=parseInt(k.maxUsage,10);isNaN(B)||B<1?R.maxUsage="Maximum usage must be at least 1":B>1e6&&(R.maxUsage="Maximum usage cannot exceed 1,000,000")}return{isValid:Object.keys(R).length===0,errors:R}},C=(k,R)=>{g(B=>({...B,[k]:R})),h[k]&&p(B=>{const M={...B};return delete M[k],M})},T=k=>{C("code",k.toUpperCase())},D=k=>{C("events",k)},P=async k=>{k.preventDefault();const{isValid:R,errors:B}=v(u);if(!R){p(B);return}const M={title:u.title.trim(),description:u.description.trim(),code:u.code.trim().toUpperCase(),maxUsage:parseInt(u.maxUsage,10),isActive:u.isActive};u.events.length>0&&(M.events=u.events),(await r(M))?.success&&t()};return a.createElement(jt,{isOpen:e,onClose:t,title:y?"Edit Voucher":"Create Voucher",size:"lg"},a.createElement("form",{onSubmit:P,className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Title ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:u.title,onChange:k=>C("title",k.target.value),placeholder:"e.g., Festival Food Court Discount",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.title&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.title)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Description ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("textarea",{value:u.description,onChange:k=>C("description",k.target.value),placeholder:"e.g., Get Rs.200 off at the food court for first 1500 buyers",rows:3,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${h.description?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.description&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.description)),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Voucher Code ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:u.code,onChange:k=>T(k.target.value),placeholder:"e.g., FESTIVAL200",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none font-mono uppercase transition-colors ${h.code?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.code&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.code)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Maximum Usage ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",value:u.maxUsage,onChange:k=>C("maxUsage",k.target.value),placeholder:"e.g., 1500",min:"1",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.maxUsage?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.maxUsage&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.maxUsage))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Linked Events",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement(f9,{selectedIds:u.events,onChange:D,disabled:n,placeholder:"Select events to link this voucher..."}),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Leave empty to make the voucher available for all events")),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:u.isActive,onChange:k=>C("isActive",k.target.checked),disabled:n,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800"})),a.createElement("span",{className:"text-sm text-gray-700"},u.isActive?"Active":"Disabled")),l&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},a.createElement(Xt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},l)),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:t,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50"},n?a.createElement(a.Fragment,null,a.createElement(ct,{className:"h-4 w-4 animate-spin"}),a.createElement("span",null,y?"Updating...":"Creating...")):a.createElement("span",null,y?"Update Voucher":"Create Voucher")))))}const VO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",hde=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,pde=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500";function yde({isOpen:e,onClose:t,voucher:r,isLoading:n=!1}){if(!r&&!n)return null;const l=r?hde(r.usageCount||0,r.maxUsage):0;return a.createElement(jt,{isOpen:e,onClose:t,title:"Voucher Details",size:"lg"},n?a.createElement("div",{className:"py-12 flex flex-col items-center justify-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading voucher details...")):r?a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex items-start justify-between gap-4 pb-4 border-b border-gray-200"},a.createElement("div",null,a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},r.title),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},r.description)),a.createElement("span",{className:`shrink-0 px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1.5 ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isActive?a.createElement(js,{className:"h-4 w-4"}):a.createElement(Sn,{className:"h-4 w-4"}),r.isActive?"Active":"Disabled")),a.createElement("div",{className:"bg-blue-50 rounded-lg p-4"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},a.createElement(ed,{className:"h-5 w-5 text-gray-800"})),a.createElement("div",null,a.createElement("p",{className:"text-xs text-gray-800 font-medium uppercase"},"Voucher Code"),a.createElement("p",{className:"text-xl font-bold text-blue-900 font-mono tracking-wider"},r.code)))),a.createElement("div",null,a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("span",{className:"text-sm font-medium text-gray-700"},"Usage Progress"),a.createElement("span",{className:"text-sm text-gray-500"},r.usageCount||0," / ",r.maxUsage," claimed")),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},a.createElement("div",{className:`h-3 rounded-full transition-all ${pde(l)}`,style:{width:`${l}%`}})),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},l,"% used (",r.maxUsage-(r.usageCount||0)," remaining)")),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(z2,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Maximum Usage")),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},r.maxUsage?.toLocaleString("en-IN"))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(kl,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Times Used")),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},(r.usageCount||0).toLocaleString("en-IN"))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(ea,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Created")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},VO(r.createdAt))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(ea,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Last Updated")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},VO(r.updatedAt)))),r.createdBy&&a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(ds,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Created By")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},r.createdBy.name||r.createdBy.email),r.createdBy.email&&r.createdBy.name&&a.createElement("p",{className:"text-xs text-gray-500"},r.createdBy.email)),r.events&&r.events.length>0&&a.createElement("div",null,a.createElement("div",{className:"flex items-center gap-2 mb-2"},a.createElement(qr,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-sm font-medium text-gray-700"},"Linked Events")),a.createElement("div",{className:"flex flex-wrap gap-2"},r.events.map(i=>a.createElement("span",{key:i._id||i,className:"px-3 py-1.5 bg-blue-100 text-gray-900 rounded-full text-sm font-medium"},i.name||i)))),r.claimedPhones&&r.claimedPhones.length>0&&a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("p",{className:"text-sm text-gray-500"},a.createElement("span",{className:"font-medium"},r.claimedPhones.length)," phone number",r.claimedPhones.length!==1?"s":""," have claimed this voucher")),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"},"Close"))):a.createElement("div",{className:"py-12 text-center text-gray-500"},a.createElement("p",null,"No voucher data available")))}const HO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",$O=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,qO=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500",rh={active:"bg-green-100 text-green-700",disabled:"bg-gray-100 text-gray-600"};function xde(){const{vouchers:e,pagination:t,filters:r,isLoading:n,error:l,fetchVouchers:i,createVoucher:u,getVoucherById:g,updateVoucher:h,toggleVoucherStatus:p,deleteVoucher:y,searchVouchers:v,updateFilters:C,resetFilters:T,changePage:D,clearError:P}=fde(),[k,R]=w.useState(!1),[B,M]=w.useState(!1),[G,F]=w.useState(!1),[U,L]=w.useState(null),[V,j]=w.useState(null),[Y,H]=w.useState(!1),[q,le]=w.useState(!1),[ue,re]=w.useState(null),[J,ae]=w.useState(!1),[pe,xe]=w.useState(r.search||""),[ee,K]=w.useState(r.isActive||""),te=w.useCallback(()=>{re(null),j(null),R(!0)},[]),ge=w.useCallback(async Se=>{re(null),H(!0);try{const rt=await g(Se._id);rt.success?(j(rt.data),R(!0)):alert(rt.error||"Failed to load voucher details")}catch{alert("An unexpected error occurred")}finally{H(!1)}},[g]),oe=w.useCallback(()=>{R(!1),re(null),j(null)},[]),Ne=w.useCallback(async Se=>{le(!0),re(null);try{let rt;return V?rt=await h(V._id,Se):rt=await u(Se),rt.success?rt:(re(rt.error||"Failed to save voucher"),{success:!1})}catch{return re("An unexpected error occurred"),{success:!1}}finally{le(!1)}},[u,h,V]),ie=w.useCallback(async Se=>{L(Se),M(!0),H(!0);try{const rt=await g(Se._id);rt.success&&L(rt.data)}catch(rt){console.error("[Vouchers] Failed to fetch details:",rt)}finally{H(!1)}},[g]),me=w.useCallback(()=>{M(!1),L(null)},[]),$e=w.useCallback(async Se=>{le(!0);try{const rt=await p(Se._id,Se.isActive);rt.success||alert(rt.error||"Failed to update voucher status")}catch{alert("An unexpected error occurred")}finally{le(!1)}},[p]),ve=w.useCallback(Se=>{L(Se),F(!0)},[]),We=w.useCallback(()=>{F(!1),L(null)},[]),nt=w.useCallback(async()=>{if(U){le(!0);try{const Se=await y(U._id);Se.success?We():alert(Se.error||"Failed to delete voucher")}catch{alert("An unexpected error occurred")}finally{le(!1)}}},[U,y,We]),Be=w.useCallback(Se=>{const rt=Se.target.value;xe(rt),v(rt)},[v]),Ee=w.useCallback(()=>{C({search:pe,isActive:ee}),ae(!1)},[pe,ee,C]),je=w.useCallback(()=>{xe(""),K(""),T(),ae(!1)},[T]),ce=w.useCallback(()=>{i(t.currentPage)},[i,t.currentPage]),qe=w.useMemo(()=>r.search||r.isActive!=="",[r]);return a.createElement("div",{className:"space-y-4 sm:space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900"},"Vouchers"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Create and manage discount vouchers")),a.createElement("button",{onClick:te,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},a.createElement(kr,{className:"h-5 w-5"}),a.createElement("span",null,"Create Voucher"))),l&&a.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},a.createElement(Xt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("div",{className:"flex-1"},a.createElement("p",{className:"text-sm font-medium text-red-800"},"Error loading vouchers"),a.createElement("p",{className:"text-sm text-red-700 mt-0.5"},l)),a.createElement("button",{onClick:P,className:"shrink-0 text-red-600 hover:text-red-800"},"")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},a.createElement("div",{className:"relative flex-1 max-w-md"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",value:pe,onChange:Be,placeholder:"Search vouchers...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),a.createElement("button",{onClick:()=>ae(!J),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${qe?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},a.createElement(Bl,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),qe&&a.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(r.search?1:0)+(r.isActive!==""?1:0)),a.createElement(Ll,{className:`h-4 w-4 transition-transform ${J?"rotate-180":""}`})),a.createElement("button",{onClick:ce,disabled:n,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},a.createElement($n,{className:`h-4 w-4 ${n?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"ml-auto text-sm text-gray-500"},t.totalCount," voucher",t.totalCount!==1?"s":""," total")),J&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),a.createElement("select",{value:ee,onChange:Se=>K(Se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"true"},"Active"),a.createElement("option",{value:"false"},"Disabled"))),a.createElement("div",{className:"flex items-end gap-2 sm:col-span-1 lg:col-span-2"},a.createElement("button",{onClick:Ee,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),a.createElement("button",{onClick:je,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),a.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Code"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Title"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Usage"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Events"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Created"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,n&&e.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading vouchers..."))):e.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(ed,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No vouchers found"),a.createElement("button",{onClick:te,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first voucher"))):e.map(Se=>{const rt=$O(Se.usageCount||0,Se.maxUsage);return a.createElement("tr",{key:Se._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"px-2.5 py-1 bg-gray-100 text-gray-700 rounded font-mono text-sm font-medium"},Se.code)),a.createElement("td",{className:"px-6 py-4"},a.createElement("p",{className:"font-medium text-gray-900 truncate max-w-[200px]"},Se.title)),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"w-32"},a.createElement("div",{className:"flex items-center justify-between text-xs mb-1"},a.createElement("span",{className:"text-gray-600"},Se.usageCount||0," / ",Se.maxUsage),a.createElement("span",{className:"text-gray-400"},rt,"%")),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-1.5"},a.createElement("div",{className:`h-1.5 rounded-full ${qO(rt)}`,style:{width:`${rt}%`}})))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Se.isActive?rh.active:rh.disabled}`},Se.isActive?"Active":"Disabled")),a.createElement("td",{className:"px-6 py-4"},Se.events&&Se.events.length>0?a.createElement("div",{className:"flex items-center gap-1"},a.createElement(qr,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-sm text-gray-600"},Se.events.length," event",Se.events.length!==1?"s":"")):a.createElement("span",{className:"text-sm text-gray-400"},"All events")),a.createElement("td",{className:"px-6 py-4 text-sm text-gray-500"},HO(Se.createdAt)),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>$e(Se),disabled:q,className:`p-2 rounded-lg transition-colors ${Se.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:Se.isActive?"Disable voucher":"Enable voucher"},Se.isActive?a.createElement(Ei,{className:"h-5 w-5"}):a.createElement(Fl,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>ie(Se),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},a.createElement(Mr,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>ge(Se),disabled:Y,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit voucher"},a.createElement(cn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>ve(Se),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},a.createElement(ur,{className:"h-4 w-4"})))))})))),t.totalPages>0&&a.createElement(Rr,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:D,itemLabel:"vouchers"})),a.createElement("div",{className:"md:hidden space-y-4"},n&&e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading vouchers...")):e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(ed,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No vouchers found"),a.createElement("button",{onClick:te,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first voucher")):a.createElement(a.Fragment,null,e.map(Se=>{const rt=$O(Se.usageCount||0,Se.maxUsage);return a.createElement("div",{key:Se._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"min-w-0"},a.createElement("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 rounded font-mono text-sm font-medium"},Se.code),a.createElement("p",{className:"font-medium text-gray-900 mt-2 truncate"},Se.title),a.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},HO(Se.createdAt))),a.createElement("span",{className:`shrink-0 px-2.5 py-1 rounded-full text-xs font-medium ${Se.isActive?rh.active:rh.disabled}`},Se.isActive?"Active":"Disabled")),a.createElement("div",null,a.createElement("div",{className:"flex items-center justify-between text-xs mb-1"},a.createElement("span",{className:"text-gray-600"},Se.usageCount||0," / ",Se.maxUsage," claimed"),a.createElement("span",{className:"text-gray-400"},rt,"%")),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},a.createElement("div",{className:`h-2 rounded-full ${qO(rt)}`,style:{width:`${rt}%`}}))),Se.events&&Se.events.length>0&&a.createElement("div",{className:"flex items-center gap-1 text-sm text-gray-600"},a.createElement(qr,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",null,Se.events.length," event",Se.events.length!==1?"s":"")),a.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},a.createElement("button",{onClick:()=>$e(Se),disabled:q,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Se.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},Se.isActive?a.createElement(a.Fragment,null,a.createElement(Ei,{className:"h-4 w-4"}),"On"):a.createElement(a.Fragment,null,a.createElement(Fl,{className:"h-4 w-4"}),"Off")),a.createElement("button",{onClick:()=>ie(Se),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},a.createElement(Mr,{className:"h-4 w-4"}),"Details"),a.createElement("button",{onClick:()=>ge(Se),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors"},a.createElement(cn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>ve(Se),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},a.createElement(ur,{className:"h-4 w-4"}))))}),t.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Rr,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:D,itemLabel:"vouchers"})))),a.createElement(gde,{isOpen:k,onClose:oe,onSubmit:Ne,isLoading:q,serverError:ue,voucherToEdit:V}),a.createElement(yde,{isOpen:B,onClose:me,voucher:U,isLoading:Y}),a.createElement(za,{isOpen:G,onClose:We,onConfirm:nt,title:"Delete Voucher",message:`Are you sure you want to delete the voucher "${U?.code}"? This action can be undone by restoring from deleted vouchers.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:q}))}const ns={BASE:"/web/sessions",GET_BY_ID:e=>`/web/sessions/${e}`,UPDATE:e=>`/web/sessions/${e}`,DELETE:e=>`/web/sessions/${e}`,TOGGLE_LIVE:e=>`/web/sessions/${e}/toggle-live`,DELETED:"/web/sessions/deleted",RESTORE:e=>`/web/sessions/${e}/restore`,PERMANENT_DELETE:e=>`/web/sessions/${e}/permanent`,BOOKINGS:"/web/sessions/bookings",UPDATE_BOOKING:e=>`/web/sessions/bookings/${e}`},bo={create:async e=>{console.log("[SessionService] Creating session:",e.title);const t=await Pe(ke.post(ns.BASE,e));return t.success?console.log("[SessionService] Session created successfully:",t.data.session?._id):console.error("[SessionService] Failed to create session:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.isLive!==void 0&&e.isLive!==""&&t.append("isLive",e.isLive),e.sessionType&&t.append("sessionType",e.sessionType),e.search&&t.append("search",e.search);const r=t.toString(),n=r?`${ns.BASE}?${r}`:ns.BASE;console.log("[SessionService] Fetching sessions with params:",e);const l=await Pe(ke.get(n));return l.success?console.log("[SessionService] Fetched sessions:",l.data.sessions?.length):console.error("[SessionService] Failed to fetch sessions:",l.message),l},getById:async e=>{console.log("[SessionService] Fetching session by ID:",e);const t=await Pe(ke.get(ns.GET_BY_ID(e)));return t.success?console.log("[SessionService] Fetched session:",t.data.session?._id):console.error("[SessionService] Failed to fetch session:",t.message),t},update:async(e,t)=>{console.log("[SessionService] Updating session:",e);const r=await Pe(ke.put(ns.UPDATE(e),t));return r.success?console.log("[SessionService] Session updated successfully"):console.error("[SessionService] Failed to update session:",r.message),r},toggleLive:async e=>{console.log("[SessionService] Toggling session live status:",e);const t=await Pe(ke.patch(ns.TOGGLE_LIVE(e)));return t.success?console.log("[SessionService] Session live status toggled successfully"):console.error("[SessionService] Failed to toggle session live status:",t.message),t},delete:async e=>{console.log("[SessionService] Deleting session:",e);const t=await Pe(ke.delete(ns.DELETE(e)));return t.success?console.log("[SessionService] Session deleted successfully"):console.error("[SessionService] Failed to delete session:",t.message),t},getDeleted:async()=>{console.log("[SessionService] Fetching deleted sessions");const e=await Pe(ke.get(ns.DELETED));return e.success?console.log("[SessionService] Fetched deleted sessions:",e.data.sessions?.length):console.error("[SessionService] Failed to fetch deleted sessions:",e.message),e},restore:async e=>{console.log("[SessionService] Restoring session:",e);const t=await Pe(ke.post(ns.RESTORE(e)));return t.success?console.log("[SessionService] Session restored successfully"):console.error("[SessionService] Failed to restore session:",t.message),t},permanentDelete:async e=>{console.log("[SessionService] Permanently deleting session:",e);const t=await Pe(ke.delete(ns.PERMANENT_DELETE(e)));return t.success?console.log("[SessionService] Session permanently deleted"):console.error("[SessionService] Failed to permanently delete session:",t.message),t},getBookings:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.status&&t.append("status",e.status),e.sessionId&&t.append("sessionId",e.sessionId);const r=t.toString(),n=r?`${ns.BOOKINGS}?${r}`:ns.BOOKINGS;console.log("[SessionService] Fetching bookings with params:",e);const l=await Pe(ke.get(n));return l.success?console.log("[SessionService] Fetched bookings:",l.data.bookings?.length):console.error("[SessionService] Failed to fetch bookings:",l.message),l},updateBooking:async(e,t)=>{console.log("[SessionService] Updating booking:",e,"with status:",t.status);const r=await Pe(ke.put(ns.UPDATE_BOOKING(e),t));return r.success?console.log("[SessionService] Booking updated successfully"):console.error("[SessionService] Failed to update booking:",r.message),r}};function bde(e={}){const[t,r]=w.useState([]),[n,l]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[i,u]=w.useState({search:"",isLive:"",sessionType:"",category:"",sortBy:"createdAt",sortOrder:"desc",...e}),[g,h]=w.useState(!1),[p,y]=w.useState(null),[v,C]=w.useState([]),[T,D]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[P,k]=w.useState({status:"",sessionId:""}),[R,B]=w.useState(!1),[M,G]=w.useState(null),F=w.useRef(null),U=w.useCallback(async(oe=n.currentPage)=>{h(!0),y(null);try{const Ne={page:oe,limit:n.limit,sortBy:i.sortBy,sortOrder:i.sortOrder,...i.search&&{search:i.search},...i.isLive!==""&&{isLive:i.isLive},...i.sessionType&&{sessionType:i.sessionType},...i.category&&{category:i.category}};console.log("[useSessions] Fetching sessions with params:",Ne);const ie=await bo.getAll(Ne);ie.success?(r(ie.data.sessions||[]),l({currentPage:ie.data.pagination?.currentPage||1,totalPages:ie.data.pagination?.totalPages||0,totalCount:ie.data.pagination?.totalCount||0,limit:ie.data.pagination?.limit||10})):(y(ie.message),r([]))}catch{y("Failed to fetch sessions"),r([])}finally{h(!1)}},[i,n.limit]),L=w.useCallback(async oe=>{try{const Ne=await bo.create(oe);return Ne.success?(await U(1),{success:!0,data:Ne.data}):{success:!1,error:Ne.message,validationErrors:Ne.error}}catch{return{success:!1,error:"Failed to create session"}}},[U]),V=w.useCallback(async oe=>{try{const Ne=await bo.getById(oe);return Ne.success?{success:!0,data:Ne.data.session}:{success:!1,error:Ne.message}}catch{return{success:!1,error:"Failed to fetch session details"}}},[]),j=w.useCallback(async(oe,Ne)=>{try{const ie=await bo.update(oe,Ne);return ie.success?(r(me=>me.map($e=>$e._id===oe?{...$e,...ie.data.session}:$e)),{success:!0,data:ie.data}):{success:!1,error:ie.message,validationErrors:ie.error}}catch{return{success:!1,error:"Failed to update session"}}},[]),Y=w.useCallback(async(oe,Ne)=>{try{const ie=await bo.toggleLive(oe);return ie.success?(r(me=>me.map($e=>$e._id===oe?{...$e,isLive:!Ne}:$e)),{success:!0}):{success:!1,error:ie.message}}catch{return{success:!1,error:"Failed to update session status"}}},[]),H=w.useCallback(async oe=>{try{const Ne=await bo.delete(oe);return Ne.success?(r(ie=>ie.filter(me=>me._id!==oe)),l(ie=>({...ie,totalCount:ie.totalCount-1,totalPages:Math.ceil((ie.totalCount-1)/ie.limit)})),{success:!0}):{success:!1,error:Ne.message}}catch{return{success:!1,error:"Failed to delete session"}}},[]),q=w.useCallback(oe=>{F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{u(Ne=>({...Ne,search:oe}))},300)},[]),le=w.useCallback(oe=>{u(Ne=>({...Ne,...oe}))},[]),ue=w.useCallback(()=>{u({search:"",isLive:"",sessionType:"",category:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),re=w.useCallback(oe=>{U(oe)},[U]),J=w.useCallback(oe=>{l(Ne=>({...Ne,limit:oe}))},[]),ae=w.useCallback(()=>{y(null)},[]),pe=w.useCallback(async(oe=T.currentPage)=>{B(!0),G(null);try{const Ne={page:oe,limit:T.limit,...P.status&&{status:P.status},...P.sessionId&&{sessionId:P.sessionId}};console.log("[useSessions] Fetching bookings with params:",Ne);const ie=await bo.getBookings(Ne);ie.success?(C(ie.data.bookings||[]),D({currentPage:ie.data.pagination?.currentPage||1,totalPages:ie.data.pagination?.totalPages||0,totalCount:ie.data.pagination?.totalCount||0,limit:ie.data.pagination?.limit||10}),console.log("[useSessions] Fetched bookings:",ie.data.bookings?.length)):(console.error("[useSessions] Failed to fetch bookings:",ie.message),G(ie.message||"Failed to fetch bookings"),C([]))}catch(Ne){console.error("[useSessions] Error fetching bookings:",Ne),G("Failed to fetch bookings"),C([])}finally{B(!1)}},[P,T.limit]),xe=w.useCallback(async(oe,Ne)=>{try{console.log("[useSessions] Updating booking:",oe,"with data:",Ne);const ie=await bo.updateBooking(oe,Ne);return ie.success?(console.log("[useSessions] Booking updated successfully"),C(me=>me.map($e=>$e._id===oe?{...$e,...ie.data.booking}:$e)),{success:!0,data:ie.data}):(console.error("[useSessions] Failed to update booking:",ie.message),{success:!1,error:ie.message})}catch(ie){return console.error("[useSessions] Error updating booking:",ie),{success:!1,error:"Failed to update booking"}}},[]),ee=w.useCallback(oe=>{k(Ne=>({...Ne,...oe}))},[]),K=w.useCallback(()=>{k({status:"",sessionId:""})},[]),te=w.useCallback(oe=>{pe(oe)},[pe]),ge=w.useCallback(()=>{G(null)},[]);return w.useEffect(()=>{U(1)},[i]),w.useEffect(()=>()=>{F.current&&clearTimeout(F.current)},[]),{sessions:t,pagination:n,filters:i,isLoading:g,error:p,fetchSessions:U,createSession:L,getSessionById:V,updateSession:j,toggleSessionLive:Y,deleteSession:H,searchSessions:q,updateFilters:le,resetFilters:ue,changePage:re,changeLimit:J,clearError:ae,bookings:v,bookingPagination:T,bookingFilters:P,isLoadingBookings:R,bookingError:M,fetchBookings:pe,updateBooking:xe,updateBookingFilters:ee,resetBookingFilters:K,changeBookingPage:te,clearBookingError:ge}}const vde=[{value:"therapeutic",label:"Therapeutic"},{value:"mental_wellness",label:"Mental Wellness"},{value:"career",label:"Career"},{value:"relationships",label:"Relationships"},{value:"lifestyle",label:"Lifestyle"},{value:"other",label:"Other"}],GO=()=>({title:"",shortDescription:"",longDescription:"",price:"",compareAtPrice:"",duration:"",sessionType:"OTO",category:"mental_wellness",isLive:!1,host:"",hostEmail:"",hostPhone:"",availableSlots:"",calendlyLink:"",sessionDate:"",imageUrl:"",tags:[]});function Ede({isOpen:e,onClose:t,onSubmit:r,isLoading:n=!1,serverError:l=null,sessionToEdit:i=null}){const[u,g]=w.useState(GO()),[h,p]=w.useState({}),y=!!i,[v,C]=w.useState("");w.useEffect(()=>{e&&(g(i?{title:i.title||"",shortDescription:i.shortDescription||"",longDescription:i.longDescription||"",price:i.price?.toString()||"",compareAtPrice:i.compareAtPrice?.toString()||"",duration:i.duration?.toString()||"",sessionType:i.sessionType||"OTO",category:i.category||"mental_wellness",isLive:i.isLive??!1,host:i.host||"",hostEmail:i.hostEmail||"",hostPhone:i.hostPhone||"",availableSlots:i.availableSlots?.toString()||"",calendlyLink:i.calendlyLink||"",sessionDate:i.sessionDate?new Date(i.sessionDate).toISOString().slice(0,16):"",imageUrl:i.imageUrl||"",tags:i.tags||[]}:GO()),p({}),C(""))},[e,i]);const T=k=>{const R={};if(k.title.trim()?k.title.length>200&&(R.title="Title must be less than 200 characters"):R.title="Title is required",k.shortDescription.trim()?k.shortDescription.length>500&&(R.shortDescription="Short description must be less than 500 characters"):R.shortDescription="Short description is required",k.longDescription.trim()?k.longDescription.length>5e3&&(R.longDescription="Long description must be less than 5000 characters"):R.longDescription="Long description is required",!k.price)R.price="Price is required";else{const B=parseFloat(k.price);(isNaN(B)||B<0)&&(R.price="Price must be a positive number")}if(k.compareAtPrice){const B=parseFloat(k.compareAtPrice),M=parseFloat(k.price);isNaN(B)||B<0?R.compareAtPrice="Compare at price must be a positive number":!isNaN(M)&&B<M&&(R.compareAtPrice="Compare at price must be greater than or equal to price")}if(!k.duration)R.duration="Duration is required";else{const B=parseInt(k.duration,10);isNaN(B)||B<1?R.duration="Duration must be at least 1 minute":B>480&&(R.duration="Duration cannot exceed 480 minutes (8 hours)")}if(k.host.trim()?k.host.length>100&&(R.host="Host name must be less than 100 characters"):R.host="Host name is required",k.hostEmail&&k.hostEmail.trim()&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k.hostEmail.trim())||(R.hostEmail="Please provide a valid email address")),k.hostPhone&&k.hostPhone.trim()&&(/^[\d\s+\-()]+$/.test(k.hostPhone.trim())?k.hostPhone.trim().length<10&&(R.hostPhone="Phone number must be at least 10 digits"):R.hostPhone="Please provide a valid phone number"),k.sessionType==="OTM"&&k.availableSlots){const B=parseInt(k.availableSlots,10);(isNaN(B)||B<1)&&(R.availableSlots="Available slots must be at least 1")}return k.calendlyLink.trim()?/^https?:\/\/.+/.test(k.calendlyLink)||(R.calendlyLink="Please provide a valid URL"):R.calendlyLink="Calendly link is required",k.imageUrl&&!/^https?:\/\/.+/.test(k.imageUrl)&&(R.imageUrl="Please provide a valid image URL"),{isValid:Object.keys(R).length===0,errors:R}},D=(k,R)=>{g(B=>({...B,[k]:R})),h[k]&&p(B=>{const M={...B};return delete M[k],M})},P=async k=>{k.preventDefault();const{isValid:R,errors:B}=T(u);if(!R){p(B);return}const M={title:u.title.trim(),shortDescription:u.shortDescription.trim(),longDescription:u.longDescription.trim(),price:parseFloat(u.price),duration:parseInt(u.duration,10),sessionType:u.sessionType,category:u.category,isLive:u.isLive,host:u.host.trim()};u.compareAtPrice&&(M.compareAtPrice=parseFloat(u.compareAtPrice)),u.availableSlots&&(M.availableSlots=parseInt(u.availableSlots,10)),M.calendlyLink=u.calendlyLink.trim(),u.sessionDate&&(M.sessionDate=new Date(u.sessionDate).toISOString()),u.imageUrl.trim()&&(M.imageUrl=u.imageUrl.trim()),u.hostEmail.trim()&&(M.hostEmail=u.hostEmail.trim()),u.hostPhone.trim()&&(M.hostPhone=u.hostPhone.trim()),u.tags.length>0&&(M.tags=u.tags),(await r(M))?.success&&t()};return a.createElement(jt,{isOpen:e,onClose:t,title:y?"Edit Session":"Create Session",size:"xl"},a.createElement("form",{onSubmit:P,className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Title ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:u.title,onChange:k=>D("title",k.target.value),placeholder:"e.g., One-on-One Career Coaching",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.title&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.title)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Short Description ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("textarea",{value:u.shortDescription,onChange:k=>D("shortDescription",k.target.value),placeholder:"Brief overview of the session...",rows:2,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${h.shortDescription?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.shortDescription&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.shortDescription)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Long Description ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("textarea",{value:u.longDescription,onChange:k=>D("longDescription",k.target.value),placeholder:"Detailed description of what participants will learn...",rows:4,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${h.longDescription?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.longDescription&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.longDescription)),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Price () ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",value:u.price,onChange:k=>D("price",k.target.value),placeholder:"e.g., 999",min:"0",step:"0.01",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.price?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.price&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.price)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Compare at Price ()"),a.createElement("input",{type:"number",value:u.compareAtPrice,onChange:k=>D("compareAtPrice",k.target.value),placeholder:"e.g., 1499",min:"0",step:"0.01",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.compareAtPrice?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.compareAtPrice&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.compareAtPrice)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Duration (mins) ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",value:u.duration,onChange:k=>D("duration",k.target.value),placeholder:"e.g., 60",min:"1",max:"480",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.duration?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.duration&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.duration))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Session Type ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{value:u.sessionType,onChange:k=>D("sessionType",k.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`},a.createElement("option",{value:"OTO"},"One-to-One (OTO)"),a.createElement("option",{value:"OTM"},"One-to-Many (OTM)"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Category ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{value:u.category,onChange:k=>D("category",k.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`},vde.map(k=>a.createElement("option",{key:k.value,value:k.value},k.label))))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Host Name ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:u.host,onChange:k=>D("host",k.target.value),placeholder:"e.g., John Doe",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.host?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.host&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.host)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Host Email",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("input",{type:"email",value:u.hostEmail,onChange:k=>D("hostEmail",k.target.value),placeholder:"host@example.com",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.hostEmail?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.hostEmail&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.hostEmail)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Host Phone",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("input",{type:"tel",value:u.hostPhone,onChange:k=>D("hostPhone",k.target.value),placeholder:"+91 9876543210",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.hostPhone?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.hostPhone&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.hostPhone))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Available Slots",u.sessionType==="OTM"&&a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(for group sessions)")),a.createElement("input",{type:"number",value:u.availableSlots,onChange:k=>D("availableSlots",k.target.value),placeholder:u.sessionType==="OTO"?"1":"e.g., 50",min:"1",disabled:n||u.sessionType==="OTO",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.availableSlots?"border-red-500":"border-gray-300"} ${n||u.sessionType==="OTO"?"bg-gray-100":""}`}),h.availableSlots&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.availableSlots),u.sessionType==="OTO"&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Fixed to 1 for one-to-one sessions")),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Session Date",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("input",{type:"datetime-local",value:u.sessionDate,onChange:k=>D("sessionDate",k.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`}))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Calendly Link ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"url",value:u.calendlyLink,onChange:k=>D("calendlyLink",k.target.value),placeholder:"https://calendly.com/your-link",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.calendlyLink?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.calendlyLink&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.calendlyLink)),a.createElement(il,{label:"Session Image",value:u.imageUrl,onUpload:k=>D("imageUrl",k),disabled:n,error:h.imageUrl,type:"image",folder:"sessions",placeholder:"Drop image here or click to upload"}),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Tags",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("div",{className:"flex gap-2"},a.createElement("input",{type:"text",value:v,onChange:k=>C(k.target.value),onKeyDown:k=>{if(k.key==="Enter"){k.preventDefault();const R=v.trim().toLowerCase();R&&!u.tags.includes(R)&&(D("tags",[...u.tags,R]),C(""))}},placeholder:"Type a tag and press Enter",disabled:n,className:`flex-1 px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`}),a.createElement("button",{type:"button",onClick:()=>{const k=v.trim().toLowerCase();k&&!u.tags.includes(k)&&(D("tags",[...u.tags,k]),C(""))},disabled:n||!v.trim(),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50"},a.createElement(kr,{className:"h-4 w-4"}))),u.tags.length>0&&a.createElement("div",{className:"flex flex-wrap gap-2 mt-2"},u.tags.map((k,R)=>a.createElement("span",{key:R,className:"inline-flex items-center gap-1 px-2.5 py-1 bg-gray-100 text-gray-700 rounded-full text-sm"},k,a.createElement("button",{type:"button",onClick:()=>{D("tags",u.tags.filter((B,M)=>M!==R))},disabled:n,className:"text-gray-500 hover:text-gray-700"},a.createElement(Gr,{className:"h-3 w-3"})))))),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:u.isLive,onChange:k=>D("isLive",k.target.checked),disabled:n,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})),a.createElement("span",{className:"text-sm text-gray-700"},u.isLive?"Live (Available for booking)":"Not Live")),l&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},a.createElement(Xt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},l)),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200 sticky bottom-0 bg-white"},a.createElement("button",{type:"button",onClick:t,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50"},n?a.createElement(a.Fragment,null,a.createElement(ct,{className:"h-4 w-4 animate-spin"}),a.createElement("span",null,y?"Updating...":"Creating...")):a.createElement("span",null,y?"Update Session":"Create Session")))))}const Uv=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",YO=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),wde=e=>{if(!e)return"-";if(e<60)return`${e} min`;const t=Math.floor(e/60),r=e%60;return r>0?`${t}h ${r}m`:`${t}h`},Nde=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,Sde=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500";function Cde({isOpen:e,onClose:t,session:r,isLoading:n=!1}){if(!r&&!n)return null;const l=r?.bookedSlots||0,i=r?.availableSlots,u=Nde(l,i),g=r?.discountPercent||0;return a.createElement(jt,{isOpen:e,onClose:t,title:"Session Details",size:"lg"},n?a.createElement("div",{className:"py-12 flex flex-col items-center justify-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading session details...")):r?a.createElement("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-2"},a.createElement("div",{className:"flex items-start justify-between gap-4 pb-4 border-b border-gray-200"},a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${r.sessionType==="OTO"?"bg-purple-100 text-purple-700":"bg-blue-100 text-gray-900"}`},r.sessionType==="OTO"?"One-to-One":"One-to-Many")),a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},r.title),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},r.shortDescription)),a.createElement("span",{className:`shrink-0 px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1.5 ${r.isLive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isLive?a.createElement(js,{className:"h-4 w-4"}):a.createElement(Sn,{className:"h-4 w-4"}),r.isLive?"Live":"Not Live")),r.imageUrl&&a.createElement("div",{className:"rounded-lg overflow-hidden bg-gray-100"},a.createElement("img",{src:r.imageUrl,alt:r.title,className:"w-full h-48 object-cover",onError:h=>{h.target.style.display="none"}})),a.createElement("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},a.createElement(V2,{className:"h-5 w-5 text-gray-800"})),a.createElement("div",null,a.createElement("p",{className:"text-xs text-gray-800 font-medium uppercase"},"Price"),a.createElement("div",{className:"flex items-center gap-2"},a.createElement("p",{className:"text-2xl font-bold text-blue-900"},YO(r.price)),r.compareAtPrice&&r.compareAtPrice>r.price&&a.createElement("p",{className:"text-sm text-gray-500 line-through"},YO(r.compareAtPrice))))),g>0&&a.createElement("div",{className:"flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full"},a.createElement(wz,{className:"h-4 w-4"}),a.createElement("span",{className:"font-semibold"},g,"% OFF")))),a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-2"},"Description"),a.createElement("p",{className:"text-sm text-gray-600 whitespace-pre-wrap"},r.longDescription)),r.sessionType==="OTM"&&i&&a.createElement("div",null,a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("span",{className:"text-sm font-medium text-gray-700"},"Booking Progress"),a.createElement("span",{className:"text-sm text-gray-500"},l," / ",i," booked")),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},a.createElement("div",{className:`h-3 rounded-full transition-all ${Sde(u)}`,style:{width:`${u}%`}})),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},u,"% filled (",i-l," slots remaining)")),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(ea,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Duration")),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},wde(r.duration))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(ds,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Host")),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},r.host)),r.sessionDate&&a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(qr,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Session Date")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},Uv(r.sessionDate))),i&&a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(kl,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},r.sessionType==="OTO"?"Slot":"Available Slots")),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},i-l," remaining")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(ea,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Created")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},Uv(r.createdAt))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(ea,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Last Updated")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},Uv(r.updatedAt)))),r.calendlyLink&&a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(lz,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Booking Link")),a.createElement("a",{href:r.calendlyLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-800 hover:text-black hover:underline break-all"},r.calendlyLink)),r.createdBy&&a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(ds,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Created By")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},r.createdBy.name||r.createdBy.email),r.createdBy.email&&r.createdBy.name&&a.createElement("p",{className:"text-xs text-gray-500"},r.createdBy.email)),a.createElement("div",{className:"pt-4 border-t border-gray-200 sticky bottom-0 bg-white"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"},"Close"))):a.createElement("div",{className:"py-12 text-center text-gray-500"},a.createElement("p",null,"No session data available")))}const Fm=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),XO=e=>{if(!e)return"-";if(e<60)return`${e}m`;const t=Math.floor(e/60),r=e%60;return r>0?`${t}h ${r}m`:`${t}h`},Ade=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,Tde=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500",ah={live:"bg-green-100 text-green-700",notLive:"bg-gray-100 text-gray-600"},WO={OTO:"bg-purple-100 text-purple-700",OTM:"bg-gray-100 text-gray-700"},KO=[{value:"therapeutic",label:"Therapeutic"},{value:"mental_wellness",label:"Mental Wellness"},{value:"career",label:"Career"},{value:"relationships",label:"Relationships"},{value:"lifestyle",label:"Lifestyle"},{value:"other",label:"Other"}],ZO={therapeutic:"bg-blue-100 text-blue-700",mental_wellness:"bg-green-100 text-green-700",career:"bg-amber-100 text-amber-700",relationships:"bg-pink-100 text-pink-700",lifestyle:"bg-indigo-100 text-indigo-700",other:"bg-gray-100 text-gray-700"},nh={pending:{color:"bg-amber-100 text-amber-700",label:"Pending"},confirmed:{color:"bg-blue-100 text-blue-700",label:"Confirmed"},completed:{color:"bg-green-100 text-green-700",label:"Completed"},cancelled:{color:"bg-red-100 text-red-700",label:"Cancelled"},no_show:{color:"bg-gray-100 text-gray-700",label:"No Show"}},QO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",Ode=e=>e?new Date(e).toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";function Dde(){const{sessions:e,pagination:t,filters:r,isLoading:n,error:l,fetchSessions:i,createSession:u,getSessionById:g,updateSession:h,toggleSessionLive:p,deleteSession:y,searchSessions:v,updateFilters:C,resetFilters:T,changePage:D,clearError:P,bookings:k,bookingPagination:R,bookingFilters:B,isLoadingBookings:M,bookingError:G,fetchBookings:F,updateBooking:U,updateBookingFilters:L,resetBookingFilters:V,changeBookingPage:j,clearBookingError:Y}=bde(),[H,q]=w.useState(!1),[le,ue]=w.useState(!1),[re,J]=w.useState(!1),[ae,pe]=w.useState(null),[xe,ee]=w.useState(null),[K,te]=w.useState(!1),[ge,oe]=w.useState(!1),[Ne,ie]=w.useState(null),[me,$e]=w.useState("sessions"),[ve,We]=w.useState(!1),[nt,Be]=w.useState(r.search||""),[Ee,je]=w.useState(r.isLive||""),[ce,qe]=w.useState(r.sessionType||""),[Se,rt]=w.useState(r.category||""),[it,pt]=w.useState(B.status||""),[Ke,lt]=w.useState(B.sessionId||""),[Ue,mt]=w.useState(null),[$t,ir]=w.useState(!1),Br=w.useCallback(()=>{ie(null),ee(null),q(!0)},[]),ut=w.useCallback(async ze=>{ie(null),te(!0);try{const Nt=await g(ze._id);Nt.success?(ee(Nt.data),q(!0)):alert(Nt.error||"Failed to load session details")}catch{alert("An unexpected error occurred")}finally{te(!1)}},[g]),Tt=w.useCallback(()=>{q(!1),ie(null),ee(null)},[]),Cr=w.useCallback(async ze=>{oe(!0),ie(null);try{let Nt;return xe?Nt=await h(xe._id,ze):Nt=await u(ze),Nt.success?Nt:(ie(Nt.error||"Failed to save session"),{success:!1})}catch{return ie("An unexpected error occurred"),{success:!1}}finally{oe(!1)}},[u,h,xe]),xr=w.useCallback(async ze=>{pe(ze),ue(!0),te(!0);try{const Nt=await g(ze._id);Nt.success&&pe(Nt.data)}catch(Nt){console.error("[Sessions] Failed to fetch details:",Nt)}finally{te(!1)}},[g]),ia=w.useCallback(()=>{ue(!1),pe(null)},[]),kt=w.useCallback(async ze=>{oe(!0);try{const Nt=await p(ze._id,ze.isLive);Nt.success||alert(Nt.error||"Failed to update session status")}catch{alert("An unexpected error occurred")}finally{oe(!1)}},[p]),be=w.useCallback(ze=>{pe(ze),J(!0)},[]),Je=w.useCallback(()=>{J(!1),pe(null)},[]),st=w.useCallback(async()=>{if(ae){oe(!0);try{const ze=await y(ae._id);ze.success?Je():alert(ze.error||"Failed to delete session")}catch{alert("An unexpected error occurred")}finally{oe(!1)}}},[ae,y,Je]),At=w.useCallback(ze=>{const Nt=ze.target.value;Be(Nt),v(Nt)},[v]),dr=w.useCallback(()=>{C({search:nt,isLive:Ee,sessionType:ce,category:Se}),We(!1)},[nt,Ee,ce,Se,C]),qa=w.useCallback(()=>{Be(""),je(""),qe(""),rt(""),T(),We(!1)},[T]),aa=w.useCallback(()=>{L({status:it,sessionId:Ke}),We(!1)},[it,Ke,L]),we=w.useCallback(()=>{pt(""),lt(""),V(),We(!1)},[V]),Ge=w.useCallback(async(ze,Nt)=>{ir(!0);try{const Ja=await U(ze,{status:Nt});Ja.success||alert(Ja.error||"Failed to update booking status")}catch(Ja){console.error("[Sessions] Error updating booking:",Ja),alert("An unexpected error occurred")}finally{ir(!1),mt(null)}},[U]),xt=w.useCallback(()=>{me==="sessions"?i(t.currentPage):F(R.currentPage)},[me,i,F,t.currentPage,R.currentPage]),na=w.useMemo(()=>r.search||r.isLive!==""||r.sessionType||r.category,[r]),oa=w.useMemo(()=>B.status||B.sessionId,[B]);return w.useEffect(()=>{me==="bookings"&&F(1)},[me]),w.useEffect(()=>{me==="bookings"&&F(1)},[B]),a.createElement("div",{className:"space-y-4 sm:space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900"},"Sessions"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Create and manage coaching sessions and bookings")),me==="sessions"&&a.createElement("button",{onClick:Br,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},a.createElement(kr,{className:"h-5 w-5"}),a.createElement("span",null,"Create Session"))),a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement("div",{className:"flex border-b border-gray-200"},a.createElement("button",{onClick:()=>$e("sessions"),className:`flex-1 sm:flex-none px-6 py-3 text-sm font-medium transition-colors relative ${me==="sessions"?"text-gray-900":"text-gray-500 hover:text-gray-700"}`},a.createElement("div",{className:"flex items-center justify-center gap-2"},a.createElement(yi,{className:"h-4 w-4"}),a.createElement("span",null,"Sessions"),a.createElement("span",{className:"px-2 py-0.5 text-xs bg-gray-100 rounded-full"},t.totalCount)),me==="sessions"&&a.createElement("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-800"})),a.createElement("button",{onClick:()=>$e("bookings"),className:`flex-1 sm:flex-none px-6 py-3 text-sm font-medium transition-colors relative ${me==="bookings"?"text-gray-900":"text-gray-500 hover:text-gray-700"}`},a.createElement("div",{className:"flex items-center justify-center gap-2"},a.createElement(dj,{className:"h-4 w-4"}),a.createElement("span",null,"Bookings"),a.createElement("span",{className:"px-2 py-0.5 text-xs bg-gray-100 rounded-full"},R.totalCount)),me==="bookings"&&a.createElement("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-800"})))),(l||G)&&a.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},a.createElement(Xt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("div",{className:"flex-1"},a.createElement("p",{className:"text-sm font-medium text-red-800"},"Error loading ",l?"sessions":"bookings"),a.createElement("p",{className:"text-sm text-red-700 mt-0.5"},l||G)),a.createElement("button",{onClick:l?P:Y,className:"shrink-0 text-red-600 hover:text-red-800"},"")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},me==="sessions"?a.createElement(a.Fragment,null,a.createElement("div",{className:"relative flex-1 max-w-md"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",value:nt,onChange:At,placeholder:"Search sessions...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),a.createElement("button",{onClick:()=>We(!ve),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${na?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},a.createElement(Bl,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),na&&a.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(r.search?1:0)+(r.isLive!==""?1:0)+(r.sessionType?1:0)+(r.category?1:0)),a.createElement(Ll,{className:`h-4 w-4 transition-transform ${ve?"rotate-180":""}`}))):a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>We(!ve),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${oa?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},a.createElement(Bl,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),oa&&a.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(B.status?1:0)+(B.sessionId?1:0)),a.createElement(Ll,{className:`h-4 w-4 transition-transform ${ve?"rotate-180":""}`}))),a.createElement("button",{onClick:xt,disabled:n||M,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},a.createElement($n,{className:`h-4 w-4 ${n||M?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"ml-auto text-sm text-gray-500"},me==="sessions"?a.createElement(a.Fragment,null,t.totalCount," session",t.totalCount!==1?"s":""," total"):a.createElement(a.Fragment,null,R.totalCount," booking",R.totalCount!==1?"s":""," total"))),ve&&me==="sessions"&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),a.createElement("select",{value:Ee,onChange:ze=>je(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"true"},"Live"),a.createElement("option",{value:"false"},"Not Live"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Session Type"),a.createElement("select",{value:ce,onChange:ze=>qe(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Types"),a.createElement("option",{value:"OTO"},"One-to-One (OTO)"),a.createElement("option",{value:"OTM"},"One-to-Many (OTM)"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Category"),a.createElement("select",{value:Se,onChange:ze=>rt(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Categories"),KO.map(ze=>a.createElement("option",{key:ze.value,value:ze.value},ze.label)))),a.createElement("div",{className:"flex items-end gap-2 sm:col-span-2"},a.createElement("button",{onClick:dr,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),a.createElement("button",{onClick:qa,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset")))),ve&&me==="bookings"&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Booking Status"),a.createElement("select",{value:it,onChange:ze=>pt(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"pending"},"Pending"),a.createElement("option",{value:"confirmed"},"Confirmed"),a.createElement("option",{value:"completed"},"Completed"),a.createElement("option",{value:"cancelled"},"Cancelled"),a.createElement("option",{value:"no_show"},"No Show"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Session"),a.createElement("select",{value:Ke,onChange:ze=>lt(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Sessions"),e.map(ze=>a.createElement("option",{key:ze._id,value:ze._id},ze.title)))),a.createElement("div",{className:"flex items-end gap-2 sm:col-span-2"},a.createElement("button",{onClick:aa,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),a.createElement("button",{onClick:we,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),me==="sessions"&&a.createElement(a.Fragment,null,a.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Session"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Type"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Category"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Price"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Duration"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Host"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,n&&e.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:8,className:"px-6 py-12 text-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading sessions..."))):e.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:8,className:"px-6 py-12 text-center"},a.createElement(yi,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No sessions found"),a.createElement("button",{onClick:Br,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first session"))):e.map(ze=>a.createElement("tr",{key:ze._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"max-w-[200px]"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},ze.title),a.createElement("p",{className:"text-xs text-gray-500 truncate mt-0.5"},ze.shortDescription))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${WO[ze.sessionType]}`},ze.sessionType==="OTO"?"OTO":"OTM")),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${ZO[ze.category]||ZO.other}`},KO.find(Nt=>Nt.value===ze.category)?.label||"Other")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-1"},a.createElement("span",{className:"font-semibold text-gray-900"},Fm(ze.price)),ze.compareAtPrice&&ze.compareAtPrice>ze.price&&a.createElement("span",{className:"text-xs text-gray-400 line-through"},Fm(ze.compareAtPrice)))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-1 text-gray-600"},a.createElement(ea,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},XO(ze.duration)))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"w-7 h-7 bg-gray-200 rounded-full flex items-center justify-center"},a.createElement(ds,{className:"h-4 w-4 text-gray-500"})),a.createElement("span",{className:"text-sm text-gray-700 truncate max-w-[100px]"},ze.host))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${ze.isLive?ah.live:ah.notLive}`},ze.isLive?"Live":"Not Live")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>kt(ze),disabled:ge,className:`p-2 rounded-lg transition-colors ${ze.isLive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:ze.isLive?"Set Not Live":"Set Live"},ze.isLive?a.createElement(Ei,{className:"h-5 w-5"}):a.createElement(Fl,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>xr(ze),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},a.createElement(Mr,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>ut(ze),disabled:K,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit session"},a.createElement(cn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>be(ze),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},a.createElement(ur,{className:"h-4 w-4"}))))))))),t.totalPages>0&&a.createElement(Rr,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:D,itemLabel:"sessions"})),a.createElement("div",{className:"md:hidden space-y-4"},n&&e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading sessions...")):e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(yi,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No sessions found"),a.createElement("button",{onClick:Br,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first session")):a.createElement(a.Fragment,null,e.map(ze=>{const Nt=Ade(ze.bookedSlots||0,ze.availableSlots);return a.createElement("div",{key:ze._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"min-w-0 flex-1"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${WO[ze.sessionType]}`},ze.sessionType),a.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${ze.isLive?ah.live:ah.notLive}`},ze.isLive?"Live":"Not Live")),a.createElement("p",{className:"font-medium text-gray-900 truncate"},ze.title),a.createElement("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2"},ze.shortDescription))),a.createElement("div",{className:"grid grid-cols-3 gap-2 text-center"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Price"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Fm(ze.price))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Duration"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},XO(ze.duration))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Host"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm truncate"},ze.host))),ze.sessionType==="OTM"&&ze.availableSlots&&a.createElement("div",null,a.createElement("div",{className:"flex items-center justify-between text-xs mb-1"},a.createElement("span",{className:"text-gray-600"},ze.bookedSlots||0," / ",ze.availableSlots," booked"),a.createElement("span",{className:"text-gray-400"},Nt,"%")),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},a.createElement("div",{className:`h-2 rounded-full ${Tde(Nt)}`,style:{width:`${Nt}%`}}))),a.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},a.createElement("button",{onClick:()=>kt(ze),disabled:ge,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${ze.isLive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},ze.isLive?a.createElement(a.Fragment,null,a.createElement(Ei,{className:"h-4 w-4"}),"Live"):a.createElement(a.Fragment,null,a.createElement(Fl,{className:"h-4 w-4"}),"Off")),a.createElement("button",{onClick:()=>xr(ze),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},a.createElement(Mr,{className:"h-4 w-4"}),"Details"),a.createElement("button",{onClick:()=>ut(ze),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors"},a.createElement(cn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>be(ze),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},a.createElement(ur,{className:"h-4 w-4"}))))}),t.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Rr,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:D,itemLabel:"sessions"}))))),me==="bookings"&&a.createElement(a.Fragment,null,a.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"User"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Session"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Scheduled Date"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Amount"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Booked On"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,M&&k.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading bookings..."))):k.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(Tg,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No bookings found"))):k.map(ze=>a.createElement("tr",{key:ze._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center"},a.createElement(ds,{className:"h-4 w-4 text-gray-500"})),a.createElement("div",{className:"min-w-0"},a.createElement("p",{className:"font-medium text-gray-900 truncate max-w-[150px]"},ze.userId?.name||"Unknown User"),a.createElement("p",{className:"text-xs text-gray-500 truncate max-w-[150px]"},ze.userId?.email||"-")))),a.createElement("td",{className:"px-6 py-4"},a.createElement("p",{className:"font-medium text-gray-900 truncate max-w-[180px]"},ze.sessionId?.title||"Unknown Session"),a.createElement("p",{className:"text-xs text-gray-500"},ze.sessionId?.sessionType||"-")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-1 text-gray-600"},a.createElement(qr,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},Ode(ze.scheduledSlot)))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"font-semibold text-gray-900"},Fm(ze.amountPaid))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${nh[ze.status]?.color||"bg-gray-100 text-gray-700"}`},nh[ze.status]?.label||ze.status)),a.createElement("td",{className:"px-6 py-4 text-sm text-gray-500"},QO(ze.createdAt)),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},ze.status==="pending"&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>Ge(ze._id,"confirmed"),disabled:$t,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Confirm"},a.createElement(En,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>Ge(ze._id,"cancelled"),disabled:$t,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Cancel"},a.createElement(Gr,{className:"h-4 w-4"}))),ze.status==="confirmed"&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>Ge(ze._id,"completed"),disabled:$t,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Mark Completed"},a.createElement(En,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>Ge(ze._id,"no_show"),disabled:$t,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",title:"No Show"},a.createElement(Tg,{className:"h-4 w-4"})))))))))),R.totalPages>0&&a.createElement(Rr,{currentPage:R.currentPage,totalPages:R.totalPages,totalItems:R.totalCount,itemsPerPage:R.limit,onPageChange:j,itemLabel:"bookings"})),a.createElement("div",{className:"md:hidden space-y-4"},M&&k.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading bookings...")):k.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Tg,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No bookings found")):a.createElement(a.Fragment,null,k.map(ze=>a.createElement("div",{key:ze._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"min-w-0 flex-1"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${nh[ze.status]?.color||"bg-gray-100 text-gray-700"}`},nh[ze.status]?.label||ze.status)),a.createElement("p",{className:"font-medium text-gray-900 truncate"},ze.userId?.name||"Unknown User"),a.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},ze.userId?.email||"-"))),a.createElement("div",{className:"p-2 bg-gray-50 rounded-lg"},a.createElement("p",{className:"text-xs text-gray-500"},"Session"),a.createElement("p",{className:"font-medium text-gray-900 text-sm truncate"},ze.sessionId?.title||"Unknown Session")),a.createElement("div",{className:"grid grid-cols-2 gap-2 text-center"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Scheduled"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},QO(ze.scheduledSlot))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Amount"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Fm(ze.amountPaid)))),(ze.status==="pending"||ze.status==="confirmed")&&a.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},ze.status==="pending"&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>Ge(ze._id,"confirmed"),disabled:$t,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors"},a.createElement(En,{className:"h-4 w-4"}),"Confirm"),a.createElement("button",{onClick:()=>Ge(ze._id,"cancelled"),disabled:$t,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors"},a.createElement(Gr,{className:"h-4 w-4"}),"Cancel")),ze.status==="confirmed"&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>Ge(ze._id,"completed"),disabled:$t,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors"},a.createElement(En,{className:"h-4 w-4"}),"Complete"),a.createElement("button",{onClick:()=>Ge(ze._id,"no_show"),disabled:$t,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},a.createElement(Tg,{className:"h-4 w-4"}),"No Show"))))),R.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Rr,{currentPage:R.currentPage,totalPages:R.totalPages,totalItems:R.totalCount,itemsPerPage:R.limit,onPageChange:j,itemLabel:"bookings"}))))),a.createElement(Ede,{isOpen:H,onClose:Tt,onSubmit:Cr,isLoading:ge,serverError:Ne,sessionToEdit:xe}),a.createElement(Cde,{isOpen:le,onClose:ia,session:ae,isLoading:K}),a.createElement(za,{isOpen:re,onClose:Je,onConfirm:st,title:"Delete Session",message:`Are you sure you want to delete the session "${ae?.title}"? This action can be undone by restoring from deleted sessions.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:ge}))}const Um={BASE:"/web/sos/quizzes",GET_BY_ID:e=>`/web/sos/quizzes/${e}`,UPDATE:e=>`/web/sos/quizzes/${e}`,DELETE:e=>`/web/sos/quizzes/${e}`},jm={getAll:async(e={})=>{const{page:t=1,limit:r=10,sortBy:n="createdAt",sortOrder:l="desc",programId:i="",dayNumber:u="",isActive:g=""}=e,h=new URLSearchParams;h.append("page",t.toString()),h.append("limit",r.toString()),h.append("sortBy",n),h.append("sortOrder",l),i&&h.append("programId",i),u&&h.append("dayNumber",u.toString()),g!==""&&h.append("isActive",g);const p=`${Um.BASE}?${h.toString()}`;return console.log("[SOSQuizService] Fetching quizzes:",p),Pe(ke.get(p))},getById:async e=>e?(console.log("[SOSQuizService] Fetching quiz:",e),Pe(ke.get(Um.GET_BY_ID(e)))):(console.error("[SOSQuizService] getById: No ID provided"),{success:!1,error:"Quiz ID is required"}),create:async e=>(console.log("[SOSQuizService] Creating quiz:",e.title,"for program:",e.programId,"day:",e.dayNumber),e.programId?e.dayNumber?Pe(ke.post(Um.BASE,e)):(console.error("[SOSQuizService] create: No dayNumber provided"),{success:!1,error:"Day number is required"}):(console.error("[SOSQuizService] create: No programId provided"),{success:!1,error:"Program ID is required"})),update:async(e,t)=>{if(!e)return console.error("[SOSQuizService] update: No ID provided"),{success:!1,error:"Quiz ID is required"};console.log("[SOSQuizService] Updating quiz:",e);const{programId:r,dayNumber:n,...l}=t;return(r||n)&&console.warn("[SOSQuizService] Ignoring programId and dayNumber in update - these cannot be changed"),Pe(ke.put(Um.UPDATE(e),l))},delete:async e=>e?(console.log("[SOSQuizService] Deleting quiz:",e),Pe(ke.delete(Um.DELETE(e)))):(console.error("[SOSQuizService] delete: No ID provided"),{success:!1,error:"Quiz ID is required"}),buildQuestion:e=>{const{questionText:t,questionType:r,options:n=[],points:l=5}=e,i={questionText:t,questionType:r,points:l};return(r==="scale"||r==="single-choice"||r==="multiple-choice")&&(i.options=n.map((u,g)=>({text:u.text,value:u.value??g+1}))),i}};function _de(e={}){const[t,r]=w.useState([]),[n,l]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[i,u]=w.useState({programId:"",dayNumber:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e}),[g,h]=w.useState(!1),[p,y]=w.useState(null),v=w.useRef(null),C=w.useCallback(async(L=n.currentPage)=>{h(!0),y(null);try{const V={page:L,limit:n.limit,sortBy:i.sortBy,sortOrder:i.sortOrder,...i.programId&&{programId:i.programId},...i.dayNumber&&{dayNumber:i.dayNumber},...i.isActive!==""&&{isActive:i.isActive}};console.log("[useSOSQuizzes] Fetching quizzes with params:",V);const j=await jm.getAll(V);j.success?(r(j.data.quizzes||[]),l({currentPage:j.data.pagination?.currentPage||1,totalPages:j.data.pagination?.totalPages||0,totalCount:j.data.pagination?.totalCount||0,limit:j.data.pagination?.limit||10}),console.log("[useSOSQuizzes] Fetched quizzes:",j.data.quizzes?.length)):(console.error("[useSOSQuizzes] Failed to fetch quizzes:",j.message),y(j.message||"Failed to fetch quizzes"),r([]))}catch(V){console.error("[useSOSQuizzes] Error fetching quizzes:",V),y("Failed to fetch quizzes"),r([])}finally{h(!1)}},[i,n.limit]),T=w.useCallback(async L=>{try{console.log("[useSOSQuizzes] Creating quiz:",L.title,"for program:",L.programId);const V=await jm.create(L);return V.success?(console.log("[useSOSQuizzes] Quiz created successfully"),await C(1),{success:!0,data:V.data}):(console.error("[useSOSQuizzes] Failed to create quiz:",V.message),{success:!1,error:V.message,validationErrors:V.error})}catch(V){return console.error("[useSOSQuizzes] Error creating quiz:",V),{success:!1,error:"Failed to create quiz"}}},[C]),D=w.useCallback(async L=>{try{console.log("[useSOSQuizzes] Fetching quiz by ID:",L);const V=await jm.getById(L);return V.success?{success:!0,data:V.data.quiz}:(console.error("[useSOSQuizzes] Failed to fetch quiz:",V.message),{success:!1,error:V.message})}catch(V){return console.error("[useSOSQuizzes] Error fetching quiz:",V),{success:!1,error:"Failed to fetch quiz details"}}},[]),P=w.useCallback(async(L,V)=>{try{console.log("[useSOSQuizzes] Updating quiz:",L);const j=await jm.update(L,V);return j.success?(console.log("[useSOSQuizzes] Quiz updated successfully"),r(Y=>Y.map(H=>H._id===L?{...H,...j.data.quiz}:H)),{success:!0,data:j.data}):(console.error("[useSOSQuizzes] Failed to update quiz:",j.message),{success:!1,error:j.message,validationErrors:j.error})}catch(j){return console.error("[useSOSQuizzes] Error updating quiz:",j),{success:!1,error:"Failed to update quiz"}}},[]),k=w.useCallback(async L=>{try{console.log("[useSOSQuizzes] Deleting quiz:",L);const V=await jm.delete(L);return V.success?(console.log("[useSOSQuizzes] Quiz deleted successfully"),r(j=>j.filter(Y=>Y._id!==L)),l(j=>({...j,totalCount:j.totalCount-1,totalPages:Math.ceil((j.totalCount-1)/j.limit)})),{success:!0}):(console.error("[useSOSQuizzes] Failed to delete quiz:",V.message),{success:!1,error:V.message})}catch(V){return console.error("[useSOSQuizzes] Error deleting quiz:",V),{success:!1,error:"Failed to delete quiz"}}},[]),R=w.useCallback(L=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{u(V=>({...V,programId:L}))},300)},[]),B=w.useCallback(L=>{u(V=>({...V,...L}))},[]),M=w.useCallback(()=>{u({programId:"",dayNumber:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),G=w.useCallback(L=>{C(L)},[C]),F=w.useCallback(L=>{l(V=>({...V,limit:L}))},[]),U=w.useCallback(()=>{y(null)},[]);return w.useEffect(()=>{C(1)},[i]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{quizzes:t,pagination:n,filters:i,isLoading:g,error:p,fetchQuizzes:C,createQuiz:T,getQuizById:D,updateQuiz:P,deleteQuiz:k,filterByProgram:R,updateFilters:B,resetFilters:M,changePage:G,changeLimit:F,clearError:U}}const vo={BASE:"/web/sos/programs",GET_BY_ID:e=>`/web/sos/programs/${e}`,UPDATE:e=>`/web/sos/programs/${e}`,DELETE:e=>`/web/sos/programs/${e}`,TOGGLE_STATUS:e=>`/web/sos/programs/${e}/toggle-status`,STATS:e=>`/web/sos/programs/${e}/stats`,QUIZZES:e=>`/web/sos/programs/${e}/quizzes`},Eo={getAll:async(e={})=>{const{page:t=1,limit:r=10,sortBy:n="createdAt",sortOrder:l="desc",type:i="",isActive:u="",search:g=""}=e,h=new URLSearchParams;h.append("page",t.toString()),h.append("limit",r.toString()),h.append("sortBy",n),h.append("sortOrder",l),i&&h.append("type",i),u!==""&&h.append("isActive",u),g&&h.append("search",g);const p=`${vo.BASE}?${h.toString()}`;return console.log("[SOSProgramService] Fetching programs:",p),Pe(ke.get(p))},getById:async e=>e?(console.log("[SOSProgramService] Fetching program:",e),Pe(ke.get(vo.GET_BY_ID(e)))):(console.error("[SOSProgramService] getById: No ID provided"),{success:!1,error:"Program ID is required"}),create:async e=>(console.log("[SOSProgramService] Creating program:",e.title),Pe(ke.post(vo.BASE,e))),update:async(e,t)=>e?(console.log("[SOSProgramService] Updating program:",e),Pe(ke.put(vo.UPDATE(e),t))):(console.error("[SOSProgramService] update: No ID provided"),{success:!1,error:"Program ID is required"}),delete:async e=>e?(console.log("[SOSProgramService] Deleting program:",e),Pe(ke.delete(vo.DELETE(e)))):(console.error("[SOSProgramService] delete: No ID provided"),{success:!1,error:"Program ID is required"}),toggleStatus:async e=>e?(console.log("[SOSProgramService] Toggling status for program:",e),Pe(ke.patch(vo.TOGGLE_STATUS(e)))):(console.error("[SOSProgramService] toggleStatus: No ID provided"),{success:!1,error:"Program ID is required"}),getStats:async e=>e?(console.log("[SOSProgramService] Fetching stats for program:",e),Pe(ke.get(vo.STATS(e)))):(console.error("[SOSProgramService] getStats: No ID provided"),{success:!1,error:"Program ID is required"}),getQuizzes:async e=>e?(console.log("[SOSProgramService] Fetching quizzes for program:",e),Pe(ke.get(vo.QUIZZES(e)))):(console.error("[SOSProgramService] getQuizzes: No ID provided"),{success:!1,error:"Program ID is required"})};function kde(e={}){const[t,r]=w.useState([]),[n,l]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[i,u]=w.useState({search:"",type:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e}),[g,h]=w.useState(!1),[p,y]=w.useState(null),v=w.useRef(null),C=w.useCallback(async(Y=n.currentPage)=>{h(!0),y(null);try{const H={page:Y,limit:n.limit,sortBy:i.sortBy,sortOrder:i.sortOrder,...i.search&&{search:i.search},...i.type&&{type:i.type},...i.isActive!==""&&{isActive:i.isActive}};console.log("[useSOSPrograms] Fetching programs with params:",H);const q=await Eo.getAll(H);q.success?(r(q.data.programs||[]),l({currentPage:q.data.pagination?.currentPage||1,totalPages:q.data.pagination?.totalPages||0,totalCount:q.data.pagination?.totalCount||0,limit:q.data.pagination?.limit||10}),console.log("[useSOSPrograms] Fetched programs:",q.data.programs?.length)):(console.error("[useSOSPrograms] Failed to fetch programs:",q.message),y(q.message||"Failed to fetch programs"),r([]))}catch(H){console.error("[useSOSPrograms] Error fetching programs:",H),y("Failed to fetch programs"),r([])}finally{h(!1)}},[i,n.limit]),T=w.useCallback(async Y=>{try{console.log("[useSOSPrograms] Creating program:",Y.title);const H=await Eo.create(Y);return H.success?(console.log("[useSOSPrograms] Program created successfully"),await C(1),{success:!0,data:H.data}):(console.error("[useSOSPrograms] Failed to create program:",H.message),{success:!1,error:H.message,validationErrors:H.error})}catch(H){return console.error("[useSOSPrograms] Error creating program:",H),{success:!1,error:"Failed to create program"}}},[C]),D=w.useCallback(async Y=>{try{console.log("[useSOSPrograms] Fetching program by ID:",Y);const H=await Eo.getById(Y);return H.success?{success:!0,data:H.data.program}:(console.error("[useSOSPrograms] Failed to fetch program:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useSOSPrograms] Error fetching program:",H),{success:!1,error:"Failed to fetch program details"}}},[]),P=w.useCallback(async Y=>{try{console.log("[useSOSPrograms] Fetching stats for program:",Y);const H=await Eo.getStats(Y);return H.success?{success:!0,data:H.data}:(console.error("[useSOSPrograms] Failed to fetch program stats:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useSOSPrograms] Error fetching program stats:",H),{success:!1,error:"Failed to fetch program statistics"}}},[]),k=w.useCallback(async Y=>{try{console.log("[useSOSPrograms] Fetching quizzes for program:",Y);const H=await Eo.getQuizzes(Y);return H.success?{success:!0,data:H.data}:(console.error("[useSOSPrograms] Failed to fetch program quizzes:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useSOSPrograms] Error fetching program quizzes:",H),{success:!1,error:"Failed to fetch program quizzes"}}},[]),R=w.useCallback(async(Y,H)=>{try{console.log("[useSOSPrograms] Updating program:",Y);const q=await Eo.update(Y,H);return q.success?(console.log("[useSOSPrograms] Program updated successfully"),r(le=>le.map(ue=>ue._id===Y?{...ue,...q.data.program}:ue)),{success:!0,data:q.data}):(console.error("[useSOSPrograms] Failed to update program:",q.message),{success:!1,error:q.message,validationErrors:q.error})}catch(q){return console.error("[useSOSPrograms] Error updating program:",q),{success:!1,error:"Failed to update program"}}},[]),B=w.useCallback(async(Y,H)=>{try{console.log("[useSOSPrograms] Toggling status for program:",Y);const q=await Eo.toggleStatus(Y);return q.success?(console.log("[useSOSPrograms] Program status toggled successfully"),r(le=>le.map(ue=>ue._id===Y?{...ue,isActive:!H}:ue)),{success:!0}):(console.error("[useSOSPrograms] Failed to toggle program status:",q.message),{success:!1,error:q.message})}catch(q){return console.error("[useSOSPrograms] Error toggling program status:",q),{success:!1,error:"Failed to update program status"}}},[]),M=w.useCallback(async Y=>{try{console.log("[useSOSPrograms] Deleting program:",Y);const H=await Eo.delete(Y);return H.success?(console.log("[useSOSPrograms] Program deleted successfully"),r(q=>q.filter(le=>le._id!==Y)),l(q=>({...q,totalCount:q.totalCount-1,totalPages:Math.ceil((q.totalCount-1)/q.limit)})),{success:!0}):(console.error("[useSOSPrograms] Failed to delete program:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useSOSPrograms] Error deleting program:",H),{success:!1,error:"Failed to delete program"}}},[]),G=w.useCallback(Y=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{u(H=>({...H,search:Y}))},300)},[]),F=w.useCallback(Y=>{u(H=>({...H,...Y}))},[]),U=w.useCallback(()=>{u({search:"",type:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),L=w.useCallback(Y=>{C(Y)},[C]),V=w.useCallback(Y=>{l(H=>({...H,limit:Y}))},[]),j=w.useCallback(()=>{y(null)},[]);return w.useEffect(()=>{C(1)},[i]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{programs:t,pagination:n,filters:i,isLoading:g,error:p,fetchPrograms:C,createProgram:T,getProgramById:D,getProgramStats:P,getProgramQuizzes:k,updateProgram:R,toggleProgramStatus:B,deleteProgram:M,searchPrograms:G,updateFilters:F,resetFilters:U,changePage:L,changeLimit:V,clearError:j}}const JO=()=>({programId:"",dayNumber:"",title:"",description:"",questions:[],isActive:!0}),Pde=()=>({questionText:"",questionType:"single-choice",options:[{text:"",value:1},{text:"",value:2}],points:5}),Ide=[{value:"scale",label:"Scale (1-5)",description:"Rating scale from 1 to 5"},{value:"single-choice",label:"Single Choice",description:"Choose one option"},{value:"multiple-choice",label:"Multiple Choice",description:"Select multiple options"},{value:"boolean",label:"Yes/No",description:"True or false question"},{value:"text",label:"Text",description:"Free text response"}];function Mde({isOpen:e,onClose:t,onSubmit:r,isLoading:n=!1,serverError:l=null,quizToEdit:i=null,programs:u=[],selectedProgram:g=null}){const[h,p]=w.useState(JO()),[y,v]=w.useState({}),[C,T]=w.useState("basic"),D=!!i,P=u.find(j=>j._id===h.programId)||g;w.useEffect(()=>{e&&(p(i?{programId:i.programId?._id||i.programId||"",dayNumber:i.dayNumber?.toString()||"",title:i.title||"",description:i.description||"",questions:i.questions?.map(j=>({questionText:j.questionText||"",questionType:j.questionType||"single-choice",options:j.options||[{text:"",value:1},{text:"",value:2}],points:j.points||5}))||[],isActive:i.isActive??!0}:{...JO(),programId:g?._id||""}),v({}),T("basic"))},[e,i,g]);const k=j=>{const Y={};if(!D&&!j.programId&&(Y.programId="Please select a program"),!D)if(!j.dayNumber)Y.dayNumber="Day number is required";else{const H=parseInt(j.dayNumber,10);isNaN(H)||H<1?Y.dayNumber="Day number must be at least 1":P&&H>P.durationDays&&(Y.dayNumber=`Day number cannot exceed program duration (${P.durationDays} days)`)}if(j.title.trim()?j.title.length>200&&(Y.title="Title must be less than 200 characters"):Y.title="Title is required",j.questions.length===0)Y.questions="At least one question is required";else{const H=[];j.questions.forEach((q,le)=>{const ue={};q.questionText.trim()||(ue.questionText="Question text is required"),(q.questionType==="scale"||q.questionType==="single-choice"||q.questionType==="multiple-choice")&&q.options&&(q.options.some(J=>!J.text.trim())&&(ue.options="All options must have text"),q.options.length<2&&(ue.options="At least 2 options are required")),Object.keys(ue).length>0&&(H[le]=ue)}),(H.length>0||Object.keys(H).some(q=>H[q]))&&(Y.questionErrors=H)}return{isValid:Object.keys(Y).length===0,errors:Y}},R=(j,Y)=>{p(H=>({...H,[j]:Y})),y[j]&&v(H=>{const q={...H};return delete q[j],q})},B=()=>{p(j=>({...j,questions:[...j.questions,Pde()]}))},M=j=>{p(Y=>({...Y,questions:Y.questions.filter((H,q)=>q!==j)}))},G=(j,Y,H)=>{p(q=>({...q,questions:q.questions.map((le,ue)=>{if(ue!==j)return le;const re={...le,[Y]:H};return Y==="questionType"&&(H==="scale"?re.options=[{text:"Very Bad",value:1},{text:"Bad",value:2},{text:"Neutral",value:3},{text:"Good",value:4},{text:"Very Good",value:5}]:H==="single-choice"||H==="multiple-choice"?re.options=[{text:"",value:1},{text:"",value:2}]:(H==="boolean"||H==="text")&&(re.options=[])),re})}))},F=j=>{p(Y=>({...Y,questions:Y.questions.map((H,q)=>q!==j?H:{...H,options:[...H.options,{text:"",value:H.options.length+1}]})}))},U=(j,Y)=>{p(H=>({...H,questions:H.questions.map((q,le)=>le!==j?q:{...q,options:q.options.filter((ue,re)=>re!==Y).map((ue,re)=>({...ue,value:re+1}))})}))},L=(j,Y,H)=>{p(q=>({...q,questions:q.questions.map((le,ue)=>ue!==j?le:{...le,options:le.options.map((re,J)=>J!==Y?re:{...re,text:H})})}))},V=async j=>{j.preventDefault();const{isValid:Y,errors:H}=k(h);if(!Y){v(H),(H.questions||H.questionErrors)&&T("questions");return}const q={title:h.title.trim(),description:h.description.trim(),questions:h.questions.map(ue=>({questionText:ue.questionText.trim(),questionType:ue.questionType,points:ue.points,...ue.questionType==="scale"||ue.questionType==="single-choice"||ue.questionType==="multiple-choice"?{options:ue.options.map(re=>({text:re.text.trim(),value:re.value}))}:{}})),isActive:h.isActive};D||(q.programId=h.programId,q.dayNumber=parseInt(h.dayNumber,10)),console.log("[SOSQuizForm] Submitting data:",q),(await r(q))?.success&&t()};return a.createElement(jt,{isOpen:e,onClose:t,title:D?"Edit SOS Quiz":"Create SOS Quiz",size:"xl"},a.createElement("form",{onSubmit:V,className:"space-y-4"},a.createElement("div",{className:"flex border-b border-gray-200"},a.createElement("button",{type:"button",onClick:()=>T("basic"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${C==="basic"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`},"Basic Info"),a.createElement("button",{type:"button",onClick:()=>T("questions"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${C==="questions"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`},"Questions (",h.questions.length,")")),a.createElement("div",{className:"max-h-[60vh] overflow-y-auto pr-2"},C==="basic"?a.createElement("div",{className:"space-y-4"},!D&&a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Program ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{value:h.programId,onChange:j=>R("programId",j.target.value),disabled:n||g,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${y.programId?"border-red-500":"border-gray-300"} ${n||g?"bg-gray-100":""}`},a.createElement("option",{value:""},"Select a program"),u.map(j=>a.createElement("option",{key:j._id,value:j._id},j.title," (",j.durationDays," days)"))),y.programId&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},y.programId)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Day Number ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",value:h.dayNumber,onChange:j=>R("dayNumber",j.target.value),placeholder:"e.g., 1",min:"1",max:P?.durationDays||365,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${y.dayNumber?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),y.dayNumber&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},y.dayNumber),P&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Program duration: ",P.durationDays," days"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Quiz Title ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:h.title,onChange:j=>R("title",j.target.value),placeholder:"e.g., Day 1: Introduction to Mindfulness",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${y.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),y.title&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},y.title)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Description",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("textarea",{value:h.description,onChange:j=>R("description",j.target.value),placeholder:"Brief description of this day's activities...",rows:3,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`})),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:h.isActive,onChange:j=>R("isActive",j.target.checked),disabled:n,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})),a.createElement("span",{className:"text-sm text-gray-700"},h.isActive?"Active":"Inactive"))):a.createElement("div",{className:"space-y-4"},y.questions&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg"},a.createElement("p",{className:"text-sm text-red-700"},y.questions)),h.questions.length===0?a.createElement("div",{className:"p-8 text-center border-2 border-dashed border-gray-200 rounded-lg"},a.createElement("p",{className:"text-gray-500 mb-3"},"No questions added yet"),a.createElement("button",{type:"button",onClick:B,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},a.createElement(kr,{className:"h-4 w-4"}),"Add Question")):a.createElement(a.Fragment,null,h.questions.map((j,Y)=>a.createElement("div",{key:Y,className:"p-4 border border-gray-200 rounded-lg space-y-3"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(Hp,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"font-medium text-gray-700"},"Question ",Y+1)),a.createElement("button",{type:"button",onClick:()=>M(Y),className:"p-1 text-red-500 hover:bg-red-50 rounded"},a.createElement(ur,{className:"h-4 w-4"}))),a.createElement("div",null,a.createElement("input",{type:"text",value:j.questionText,onChange:H=>G(Y,"questionText",H.target.value),placeholder:"Enter your question...",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${y.questionErrors?.[Y]?.questionText?"border-red-500":"border-gray-300"}`}),y.questionErrors?.[Y]?.questionText&&a.createElement("p",{className:"text-red-600 text-xs mt-1"},y.questionErrors[Y].questionText)),a.createElement("div",{className:"grid grid-cols-2 gap-3"},a.createElement("div",null,a.createElement("label",{className:"block text-xs font-medium text-gray-600 mb-1"},"Type"),a.createElement("select",{value:j.questionType,onChange:H=>G(Y,"questionType",H.target.value),disabled:n,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},Ide.map(H=>a.createElement("option",{key:H.value,value:H.value},H.label)))),a.createElement("div",null,a.createElement("label",{className:"block text-xs font-medium text-gray-600 mb-1"},"Points"),a.createElement("input",{type:"number",value:j.points,onChange:H=>G(Y,"points",parseInt(H.target.value)||0),min:"0",max:"100",disabled:n,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}))),(j.questionType==="scale"||j.questionType==="single-choice"||j.questionType==="multiple-choice")&&a.createElement("div",{className:"space-y-2"},a.createElement("label",{className:"block text-xs font-medium text-gray-600"},"Options"),j.options.map((H,q)=>a.createElement("div",{key:q,className:"flex items-center gap-2"},a.createElement("span",{className:"text-xs text-gray-400 w-6"},q+1,"."),a.createElement("input",{type:"text",value:H.text,onChange:le=>L(Y,q,le.target.value),placeholder:`Option ${q+1}`,disabled:n||j.questionType==="scale",className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),(j.questionType==="single-choice"||j.questionType==="multiple-choice")&&j.options.length>2&&a.createElement("button",{type:"button",onClick:()=>U(Y,q),className:"p-1 text-red-500 hover:bg-red-50 rounded"},a.createElement(ur,{className:"h-3 w-3"})))),(j.questionType==="single-choice"||j.questionType==="multiple-choice")&&a.createElement("button",{type:"button",onClick:()=>F(Y),className:"text-xs text-gray-600 hover:text-gray-800 flex items-center gap-1"},a.createElement(kr,{className:"h-3 w-3"}),"Add Option"),y.questionErrors?.[Y]?.options&&a.createElement("p",{className:"text-red-600 text-xs"},y.questionErrors[Y].options)))),a.createElement("button",{type:"button",onClick:B,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2"},a.createElement(kr,{className:"h-4 w-4"}),"Add Question")))),l&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},a.createElement(Xt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},l)),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:t,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50"},n?a.createElement(a.Fragment,null,a.createElement(ct,{className:"h-4 w-4 animate-spin"}),a.createElement("span",null,D?"Updating...":"Creating...")):a.createElement("span",null,D?"Update Quiz":"Create Quiz")))))}const eD=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",Rde={scale:"Scale (1-5)","single-choice":"Single Choice","multiple-choice":"Multiple Choice",boolean:"Yes/No",text:"Text Response"},Lde={scale:td,"single-choice":H2,"multiple-choice":Gz,boolean:Fl,text:Qz};function Bde({isOpen:e,onClose:t,quiz:r,isLoading:n=!1}){if(!e)return null;const l=r?.questions?.reduce((i,u)=>i+(u.points||0),0)||0;return a.createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto"},a.createElement("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:t}),a.createElement("div",{className:"relative min-h-full flex items-center justify-center p-4"},a.createElement("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden"},a.createElement("div",{className:"flex items-center justify-between p-6 border-b border-gray-200"},a.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Quiz Details"),a.createElement("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"},a.createElement(Gr,{className:"h-5 w-5"}))),a.createElement("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},n?a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading quiz details...")):r?a.createElement("div",{className:"space-y-6"},a.createElement("div",null,a.createElement("div",{className:"flex items-center gap-2 mb-2"},a.createElement("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isActive?"Active":"Inactive"),r.dayNumber&&a.createElement("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700"},"Day ",r.dayNumber)),a.createElement("h3",{className:"text-xl font-semibold text-gray-900"},r.title)),r.programId&&a.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},a.createElement("p",{className:"text-xs text-gray-500 mb-1"},"Program"),a.createElement("p",{className:"font-medium text-gray-900"},r.programId.title||r.programId)),r.description&&a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-1"},"Description"),a.createElement("p",{className:"text-gray-600 whitespace-pre-wrap"},r.description)),a.createElement("div",{className:"grid grid-cols-3 gap-4"},a.createElement("div",{className:"bg-blue-50 rounded-lg p-4 text-center"},a.createElement(ph,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-blue-700"},r.questions?.length||r.questionCount||0),a.createElement("p",{className:"text-xs text-blue-600"},"Questions")),a.createElement("div",{className:"bg-amber-50 rounded-lg p-4 text-center"},a.createElement(td,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-amber-700"},l),a.createElement("p",{className:"text-xs text-amber-600"},"Total Points")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4 text-center"},a.createElement(qr,{className:"h-5 w-5 text-gray-500 mx-auto mb-1"}),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},"Day ",r.dayNumber||"-"),a.createElement("p",{className:"text-xs text-gray-500"},"Program Day"))),r.questions&&r.questions.length>0&&a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},a.createElement(ph,{className:"h-4 w-4"}),"Questions"),a.createElement("div",{className:"space-y-3"},r.questions.map((i,u)=>{const g=Lde[i.questionType]||ph;return a.createElement("div",{key:u,className:"p-3 border border-gray-200 rounded-lg"},a.createElement("div",{className:"flex items-start gap-3"},a.createElement("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-xs font-medium text-gray-600"},u+1),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-gray-900 font-medium"},i.questionText),a.createElement("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500"},a.createElement("span",{className:"flex items-center gap-1"},a.createElement(g,{className:"h-3 w-3"}),Rde[i.questionType]||i.questionType),a.createElement("span",{className:"flex items-center gap-1"},a.createElement(td,{className:"h-3 w-3"}),i.points," pts")),i.options&&i.options.length>0&&a.createElement("div",{className:"mt-2 space-y-1"},i.options.map((h,p)=>a.createElement("div",{key:p,className:"flex items-center gap-2 text-sm text-gray-600"},a.createElement("span",{className:`w-4 h-4 border border-gray-300 flex-shrink-0 ${i.questionType==="multiple-choice"?"rounded":"rounded-full"}`}),a.createElement("span",null,h.text,i.questionType==="scale"&&a.createElement("span",{className:"text-gray-400 ml-1"},"(",h.value,")"))))),i.questionType==="boolean"&&a.createElement("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600"},a.createElement("span",{className:"flex items-center gap-1"},a.createElement(js,{className:"h-4 w-4 text-green-500"}),"Yes"),a.createElement("span",{className:"flex items-center gap-1"},a.createElement(Sn,{className:"h-4 w-4 text-red-500"}),"No")),i.questionType==="text"&&a.createElement("div",{className:"mt-2 text-sm text-gray-500 italic"},"Free text response"))))}))),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500"},a.createElement("span",null,"Created: ",eD(r.createdAt)),r.updatedAt&&r.updatedAt!==r.createdAt&&a.createElement("span",null,"Updated: ",eD(r.updatedAt))))):a.createElement("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500"},a.createElement("p",null,"No quiz data available"))),a.createElement("div",{className:"p-4 border-t border-gray-200 bg-gray-50"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},"Close")))))}const tD=()=>({title:"",description:"",type:"ISOS",durationDays:"",imageUrl:"",isActive:!1}),rD=[{value:"GSOS",label:"General SOS (GSOS)",description:"Single day quick programs"},{value:"ISOS",label:"Intensive SOS (ISOS)",description:"Multi-day structured programs (7D, 15D, 30D)"}];function Fde({isOpen:e,onClose:t,onSubmit:r,isLoading:n=!1,serverError:l=null,programToEdit:i=null}){const[u,g]=w.useState(tD()),[h,p]=w.useState({}),y=!!i;w.useEffect(()=>{e&&(g(i?{title:i.title||"",description:i.description||"",type:i.type||"ISOS",durationDays:i.durationDays?.toString()||"",imageUrl:i.imageUrl||"",isActive:i.isActive??!1}:tD()),p({}))},[e,i]);const v=D=>{const P={};if(D.title.trim()?D.title.length>200&&(P.title="Title must be less than 200 characters"):P.title="Title is required",D.description.trim()?D.description.length>2e3&&(P.description="Description must be less than 2000 characters"):P.description="Description is required",!D.durationDays)P.durationDays="Duration is required";else{const k=parseInt(D.durationDays,10);isNaN(k)||k<1?P.durationDays="Duration must be at least 1 day":k>365&&(P.durationDays="Duration cannot exceed 365 days"),D.type==="GSOS"&&k!==1&&(P.durationDays="General SOS programs should be 1 day")}return D.imageUrl&&!/^https?:\/\/.+/.test(D.imageUrl)&&(P.imageUrl="Please provide a valid image URL"),{isValid:Object.keys(P).length===0,errors:P}},C=(D,P)=>{g(k=>{const R={...k,[D]:P};return D==="type"&&P==="GSOS"&&(R.durationDays="1"),R}),h[D]&&p(k=>{const R={...k};return delete R[D],R})},T=async D=>{D.preventDefault();const{isValid:P,errors:k}=v(u);if(!P){p(k);return}const R={title:u.title.trim(),description:u.description.trim(),type:u.type,durationDays:parseInt(u.durationDays,10),isActive:u.isActive};u.imageUrl.trim()&&(R.imageUrl=u.imageUrl.trim()),console.log("[SOSProgramForm] Submitting data:",R),(await r(R))?.success&&t()};return a.createElement(jt,{isOpen:e,onClose:t,title:y?"Edit SOS Program":"Create SOS Program",size:"lg"},a.createElement("form",{onSubmit:T,className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Program Title ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:u.title,onChange:D=>C("title",D.target.value),placeholder:"e.g., 7-Day Anxiety Relief Program",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.title&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.title)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Description ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("textarea",{value:u.description,onChange:D=>C("description",D.target.value),placeholder:"Describe what participants will achieve through this program...",rows:4,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${h.description?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.description&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.description)),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Program Type ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{value:u.type,onChange:D=>C("type",D.target.value),disabled:n||y,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n||y?"bg-gray-100":""}`},rD.map(D=>a.createElement("option",{key:D.value,value:D.value},D.label))),y&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Type cannot be changed after creation"),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},rD.find(D=>D.value===u.type)?.description)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Duration (Days) ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",value:u.durationDays,onChange:D=>C("durationDays",D.target.value),placeholder:"e.g., 7",min:"1",max:"365",disabled:n||y||u.type==="GSOS",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.durationDays?"border-red-500":"border-gray-300"} ${n||y||u.type==="GSOS"?"bg-gray-100":""}`}),h.durationDays&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.durationDays),y&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Duration cannot be changed after creation"),u.type==="GSOS"&&!y&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Fixed to 1 day for General SOS"))),a.createElement(il,{label:"Program Image",value:u.imageUrl,onUpload:D=>C("imageUrl",D),disabled:n,error:h.imageUrl,type:"image",folder:"sos-programs",placeholder:"Drop image here or click to upload"}),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:u.isActive,onChange:D=>C("isActive",D.target.checked),disabled:n,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})),a.createElement("span",{className:"text-sm text-gray-700"},u.isActive?"Active (Visible to users)":"Inactive")),l&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},a.createElement(Xt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},l)),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200 sticky bottom-0 bg-white"},a.createElement("button",{type:"button",onClick:t,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50"},n?a.createElement(a.Fragment,null,a.createElement(ct,{className:"h-4 w-4 animate-spin"}),a.createElement("span",null,y?"Updating...":"Creating...")):a.createElement("span",null,y?"Update Program":"Create Program")))))}const jv=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",Ude={GSOS:"bg-blue-100 text-blue-700",ISOS:"bg-purple-100 text-purple-700"},aD={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-600"};function jde({isOpen:e,onClose:t,program:r,isLoading:n=!1,onFetchStats:l}){const[i,u]=w.useState(null),[g,h]=w.useState(!1),[p,y]=w.useState(null);return w.useEffect(()=>{(async()=>{if(!(!e||!r?._id||!l)){h(!0),y(null);try{const C=await l(r._id);C.success?u(C.data.stats):y(C.error||"Failed to load statistics")}catch(C){console.error("[SOSProgramDetailsModal] Error fetching stats:",C),y("Failed to load statistics")}finally{h(!1)}}})()},[e,r?._id,l]),w.useEffect(()=>{e||(u(null),y(null))},[e]),e?a.createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto"},a.createElement("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:t}),a.createElement("div",{className:"relative min-h-full flex items-center justify-center p-4"},a.createElement("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden"},a.createElement("div",{className:"flex items-center justify-between p-6 border-b border-gray-200"},a.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Program Details"),a.createElement("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"},a.createElement(Gr,{className:"h-5 w-5"}))),a.createElement("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},n?a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading program details...")):r?a.createElement("div",{className:"space-y-6"},a.createElement("div",null,a.createElement("div",{className:"flex items-center gap-2 mb-2"},a.createElement("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${Ude[r.type]}`},r.type==="GSOS"?"General SOS":"Intensive SOS"),a.createElement("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${r.isActive?aD.active:aD.inactive}`},r.isActive?"Active":"Inactive")),a.createElement("h3",{className:"text-xl font-semibold text-gray-900"},r.title)),r.description&&a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-1"},"Description"),a.createElement("p",{className:"text-gray-600 whitespace-pre-wrap"},r.description)),a.createElement("div",{className:"grid grid-cols-2 gap-4"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},a.createElement(qr,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},"Duration")),a.createElement("p",{className:"font-semibold text-gray-900"},r.durationDays," ",r.durationDays===1?"Day":"Days")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},a.createElement(ea,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},"Created")),a.createElement("p",{className:"font-semibold text-gray-900"},jv(r.createdAt)))),a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},a.createElement(ol,{className:"h-4 w-4"}),"Statistics"),g?a.createElement("div",{className:"flex items-center justify-center py-8 bg-gray-50 rounded-lg"},a.createElement(ct,{className:"h-6 w-6 text-gray-400 animate-spin"}),a.createElement("span",{className:"ml-2 text-sm text-gray-500"},"Loading statistics...")):p?a.createElement("div",{className:"p-4 bg-red-50 rounded-lg text-sm text-red-600"},p):i?a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3"},a.createElement("div",{className:"bg-blue-50 rounded-lg p-3 text-center"},a.createElement(kl,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-blue-700"},i.totalEnrolled||0),a.createElement("p",{className:"text-xs text-blue-600"},"Total Enrolled")),a.createElement("div",{className:"bg-amber-50 rounded-lg p-3 text-center"},a.createElement(ea,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-amber-700"},i.inProgress||0),a.createElement("p",{className:"text-xs text-amber-600"},"In Progress")),a.createElement("div",{className:"bg-green-50 rounded-lg p-3 text-center"},a.createElement(rf,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-green-700"},i.completed||0),a.createElement("p",{className:"text-xs text-green-600"},"Completed")),a.createElement("div",{className:"bg-red-50 rounded-lg p-3 text-center"},a.createElement(Sn,{className:"h-5 w-5 text-red-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-red-700"},i.abandoned||0),a.createElement("p",{className:"text-xs text-red-600"},"Abandoned"))):a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg text-sm text-gray-500 text-center"},"No statistics available"),i&&a.createElement("div",{className:"grid grid-cols-3 gap-3 mt-3"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-3 text-center"},a.createElement(Y_,{className:"h-4 w-4 text-gray-500 mx-auto mb-1"}),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},i.completionRate||0,"%"),a.createElement("p",{className:"text-xs text-gray-500"},"Completion Rate")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3 text-center"},a.createElement(Ju,{className:"h-4 w-4 text-gray-500 mx-auto mb-1"}),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},i.quizCount||0,"/",r.durationDays),a.createElement("p",{className:"text-xs text-gray-500"},"Quizzes Created")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3 text-center"},a.createElement(td,{className:"h-4 w-4 text-gray-500 mx-auto mb-1"}),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},i.averageScore?.toFixed(1)||"-"),a.createElement("p",{className:"text-xs text-gray-500"},"Avg. Score")))),r.imageUrl&&a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-2"},"Program Image"),a.createElement("div",{className:"relative rounded-lg overflow-hidden bg-gray-100 aspect-video"},a.createElement("img",{src:r.imageUrl,alt:r.title,className:"w-full h-full object-cover",onError:v=>{v.target.style.display="none",v.target.parentElement.innerHTML='<div class="flex items-center justify-center h-full text-gray-400 text-sm">Failed to load image</div>'}}))),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500"},a.createElement("span",null,"Created: ",jv(r.createdAt)),r.updatedAt&&r.updatedAt!==r.createdAt&&a.createElement("span",null,"Updated: ",jv(r.updatedAt)),r.createdBy?.name&&a.createElement("span",null,"By: ",r.createdBy.name)))):a.createElement("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500"},a.createElement("p",null,"No program data available"))),a.createElement("div",{className:"p-4 border-t border-gray-200 bg-gray-50"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},"Close"))))):null}const wo={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-600"},nD={GSOS:"bg-blue-100 text-blue-700",ISOS:"bg-purple-100 text-purple-700"};function zde(){const[e,t]=w.useState("quizzes"),{quizzes:r,pagination:n,filters:l,isLoading:i,error:u,fetchQuizzes:g,createQuiz:h,getQuizById:p,updateQuiz:y,deleteQuiz:v,filterByProgram:C,updateFilters:T,resetFilters:D,changePage:P,clearError:k}=_de(),{programs:R,pagination:B,filters:M,isLoading:G,error:F,fetchPrograms:U,createProgram:L,getProgramById:V,getProgramStats:j,updateProgram:Y,toggleProgramStatus:H,deleteProgram:q,searchPrograms:le,updateFilters:ue,resetFilters:re,changePage:J,clearError:ae}=kde(),[pe,xe]=w.useState(!1),[ee,K]=w.useState(!1),[te,ge]=w.useState(!1),[oe,Ne]=w.useState(null),[ie,me]=w.useState(null),[$e,ve]=w.useState(!1),[We,nt]=w.useState(!1),[Be,Ee]=w.useState(!1),[je,ce]=w.useState(!1),[qe,Se]=w.useState(null),[rt,it]=w.useState(null),[pt,Ke]=w.useState(!1),[lt,Ue]=w.useState(!1),[mt,$t]=w.useState(null),[ir,Br]=w.useState(!1),[ut,Tt]=w.useState(l.programId||""),[Cr,xr]=w.useState(l.isActive||""),[ia,kt]=w.useState(!1),[be,Je]=w.useState(M.search||""),[st,At]=w.useState(M.type||""),[dr,qa]=w.useState(M.isActive||"");w.useEffect(()=>{U(1)},[]);const aa=w.useCallback(()=>{$t(null),me(null),xe(!0)},[]),we=w.useCallback(async Ve=>{$t(null),ve(!0);try{const ht=await p(Ve._id);ht.success?(me(ht.data),xe(!0)):alert(ht.error||"Failed to load quiz details")}catch(ht){console.error("[Quizes] Failed to load quiz for edit:",ht),alert("An unexpected error occurred")}finally{ve(!1)}},[p]),Ge=w.useCallback(()=>{xe(!1),$t(null),me(null)},[]),xt=w.useCallback(async Ve=>{Ue(!0),$t(null);try{let ht;return ie?ht=await y(ie._id,Ve):ht=await h(Ve),ht.success?ht:($t(ht.error||"Failed to save quiz"),{success:!1})}catch(ht){return console.error("[Quizes] Form submission error:",ht),$t("An unexpected error occurred"),{success:!1}}finally{Ue(!1)}},[h,y,ie]),na=w.useCallback(async Ve=>{Ne(Ve),K(!0),ve(!0);try{const ht=await p(Ve._id);ht.success&&Ne(ht.data)}catch(ht){console.error("[Quizes] Failed to fetch details:",ht)}finally{ve(!1)}},[p]),oa=w.useCallback(()=>{K(!1),Ne(null)},[]),ze=w.useCallback(Ve=>{Ne(Ve),ge(!0)},[]),Nt=w.useCallback(()=>{ge(!1),Ne(null)},[]),Ja=w.useCallback(async()=>{if(oe){Ue(!0);try{const Ve=await v(oe._id);Ve.success?Nt():alert(Ve.error||"Failed to delete quiz")}catch(Ve){console.error("[Quizes] Delete error:",Ve),alert("An unexpected error occurred")}finally{Ue(!1)}}},[oe,v,Nt]),gs=w.useCallback(()=>{T({programId:ut,isActive:Cr}),Br(!1)},[ut,Cr,T]),An=w.useCallback(()=>{Tt(""),xr(""),D(),Br(!1)},[D]),qc=w.useCallback(()=>{g(n.currentPage)},[g,n.currentPage]),Tn=w.useCallback(()=>{$t(null),it(null),nt(!0)},[]),zl=w.useCallback(async Ve=>{$t(null),Ke(!0);try{const ht=await V(Ve._id);ht.success?(it(ht.data),nt(!0)):alert(ht.error||"Failed to load program details")}catch(ht){console.error("[Quizes] Failed to load program for edit:",ht),alert("An unexpected error occurred")}finally{Ke(!1)}},[V]),Na=w.useCallback(()=>{nt(!1),$t(null),it(null)},[]),Gn=w.useCallback(async Ve=>{Ue(!0),$t(null);try{let ht;return rt?ht=await Y(rt._id,Ve):ht=await L(Ve),ht.success?ht:($t(ht.error||"Failed to save program"),{success:!1})}catch(ht){return console.error("[Quizes] Form submission error:",ht),$t("An unexpected error occurred"),{success:!1}}finally{Ue(!1)}},[L,Y,rt]),Ga=w.useCallback(async Ve=>{Se(Ve),Ee(!0),Ke(!0);try{const ht=await V(Ve._id);ht.success&&Se(ht.data)}catch(ht){console.error("[Quizes] Failed to fetch program details:",ht)}finally{Ke(!1)}},[V]),ot=w.useCallback(()=>{Ee(!1),Se(null)},[]),Ya=w.useCallback(async Ve=>{Ue(!0);try{const ht=await H(Ve._id,Ve.isActive);ht.success||alert(ht.error||"Failed to update program status")}catch(ht){console.error("[Quizes] Toggle status error:",ht),alert("An unexpected error occurred")}finally{Ue(!1)}},[H]),Yr=w.useCallback(Ve=>{Se(Ve),ce(!0)},[]),tr=w.useCallback(()=>{ce(!1),Se(null)},[]),pn=w.useCallback(async()=>{if(qe){Ue(!0);try{const Ve=await q(qe._id);Ve.success?tr():alert(Ve.error||"Failed to delete program")}catch(Ve){console.error("[Quizes] Delete error:",Ve),alert("An unexpected error occurred")}finally{Ue(!1)}}},[qe,q,tr]),hl=w.useCallback(Ve=>{const ht=Ve.target.value;Je(ht),le(ht)},[le]),Li=w.useCallback(()=>{ue({search:be,type:st,isActive:dr}),kt(!1)},[be,st,dr,ue]),On=w.useCallback(()=>{Je(""),At(""),qa(""),re(),kt(!1)},[re]),Gc=w.useCallback(()=>{U(B.currentPage)},[U,B.currentPage]),pl=w.useMemo(()=>l.programId||l.isActive!=="",[l]),en=w.useMemo(()=>M.search||M.type||M.isActive!=="",[M]),Fr=w.useCallback(Ve=>Ve?typeof Ve=="object"&&Ve.title?Ve.title:R.find(Pr=>Pr._id===Ve)?.title||Ve:"-",[R]),Jt=w.useCallback(Ve=>Ve.questions?.reduce((ht,Pr)=>ht+(Pr.points||0),0)||Ve.totalPoints||0,[]);return a.createElement("div",{className:"space-y-4 sm:space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900"},"SOS Management"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Manage SOS programs and their daily quizzes")),a.createElement("button",{onClick:e==="quizzes"?aa:Tn,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},a.createElement(kr,{className:"h-5 w-5"}),a.createElement("span",null,e==="quizzes"?"Create Quiz":"Create Program"))),a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement("div",{className:"border-b border-gray-200"},a.createElement("nav",{className:"flex -mb-px"},a.createElement("button",{onClick:()=>t("programs"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="programs"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`},a.createElement(Yu,{className:"h-4 w-4 inline-block mr-2"}),"Programs (",B.totalCount||0,")"),a.createElement("button",{onClick:()=>t("quizzes"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="quizzes"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`},a.createElement(yh,{className:"h-4 w-4 inline-block mr-2"}),"Quizzes (",n.totalCount||0,")")))),(e==="quizzes"?u:F)&&a.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},a.createElement(Xt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("div",{className:"flex-1"},a.createElement("p",{className:"text-sm font-medium text-red-800"},"Error loading ",e==="quizzes"?"quizzes":"programs"),a.createElement("p",{className:"text-sm text-red-700 mt-0.5"},e==="quizzes"?u:F)),a.createElement("button",{onClick:e==="quizzes"?k:ae,className:"shrink-0 text-red-600 hover:text-red-800"},"")),e==="programs"&&a.createElement(a.Fragment,null,a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},a.createElement("div",{className:"relative flex-1 max-w-md"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",value:be,onChange:hl,placeholder:"Search programs...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),a.createElement("button",{onClick:()=>kt(!ia),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${en?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},a.createElement(Bl,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),en&&a.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(M.search?1:0)+(M.type?1:0)+(M.isActive!==""?1:0)),a.createElement(Ll,{className:`h-4 w-4 transition-transform ${ia?"rotate-180":""}`})),a.createElement("button",{onClick:Gc,disabled:G,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},a.createElement($n,{className:`h-4 w-4 ${G?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"ml-auto text-sm text-gray-500"},B.totalCount," program",B.totalCount!==1?"s":""," total")),ia&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Type"),a.createElement("select",{value:st,onChange:Ve=>At(Ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Types"),a.createElement("option",{value:"GSOS"},"General SOS (GSOS)"),a.createElement("option",{value:"ISOS"},"Intensive SOS (ISOS)"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),a.createElement("select",{value:dr,onChange:Ve=>qa(Ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"true"},"Active"),a.createElement("option",{value:"false"},"Inactive"))),a.createElement("div",{className:"flex items-end gap-2 sm:col-span-2"},a.createElement("button",{onClick:Li,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),a.createElement("button",{onClick:On,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),a.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Program"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Type"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Duration"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,G&&R.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:5,className:"px-6 py-12 text-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading programs..."))):R.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:5,className:"px-6 py-12 text-center"},a.createElement(Yu,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No programs found"),a.createElement("button",{onClick:Tn,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first program"))):R.map(Ve=>a.createElement("tr",{key:Ve._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"max-w-[300px]"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},Ve.title),Ve.description&&a.createElement("p",{className:"text-xs text-gray-500 truncate mt-0.5"},Ve.description))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${nD[Ve.type]}`},Ve.type==="GSOS"?"General":"Intensive")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-600"},a.createElement(qr,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},Ve.durationDays," ",Ve.durationDays===1?"day":"days"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Ve.isActive?wo.active:wo.inactive}`},Ve.isActive?"Active":"Inactive")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>Ya(Ve),disabled:lt,className:`p-2 rounded-lg transition-colors ${Ve.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:Ve.isActive?"Set Inactive":"Set Active"},Ve.isActive?a.createElement(Ei,{className:"h-5 w-5"}):a.createElement(Fl,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>Ga(Ve),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},a.createElement(Mr,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>zl(Ve),disabled:pt,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit program"},a.createElement(cn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>Yr(Ve),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},a.createElement(ur,{className:"h-4 w-4"}))))))))),B.totalPages>0&&a.createElement(Rr,{currentPage:B.currentPage,totalPages:B.totalPages,totalItems:B.totalCount,itemsPerPage:B.limit,onPageChange:J,itemLabel:"programs"})),a.createElement("div",{className:"md:hidden space-y-4"},G&&R.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading programs...")):R.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Yu,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No programs found"),a.createElement("button",{onClick:Tn,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first program")):a.createElement(a.Fragment,null,R.map(Ve=>a.createElement("div",{key:Ve._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"min-w-0 flex-1"},a.createElement("div",{className:"flex items-center gap-2 flex-wrap mb-1"},a.createElement("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${nD[Ve.type]}`},Ve.type),a.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ve.isActive?wo.active:wo.inactive}`},Ve.isActive?"Active":"Inactive")),a.createElement("p",{className:"font-medium text-gray-900 truncate"},Ve.title))),a.createElement("div",{className:"grid grid-cols-2 gap-2 text-center"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Duration"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Ve.durationDays," days")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Type"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Ve.type==="GSOS"?"General":"Intensive"))),a.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},a.createElement("button",{onClick:()=>Ya(Ve),disabled:lt,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Ve.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},Ve.isActive?a.createElement(a.Fragment,null,a.createElement(Ei,{className:"h-4 w-4"}),"Active"):a.createElement(a.Fragment,null,a.createElement(Fl,{className:"h-4 w-4"}),"Inactive")),a.createElement("button",{onClick:()=>Ga(Ve),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},a.createElement(Mr,{className:"h-4 w-4"}),"Details"),a.createElement("button",{onClick:()=>zl(Ve),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors"},a.createElement(cn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>Yr(Ve),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},a.createElement(ur,{className:"h-4 w-4"}))))),B.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Rr,{currentPage:B.currentPage,totalPages:B.totalPages,totalItems:B.totalCount,itemsPerPage:B.limit,onPageChange:J,itemLabel:"programs"}))))),e==="quizzes"&&a.createElement(a.Fragment,null,a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},a.createElement("div",{className:"relative flex-1 max-w-md"},a.createElement("select",{value:ut,onChange:Ve=>{Tt(Ve.target.value),C(Ve.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Programs"),R.map(Ve=>a.createElement("option",{key:Ve._id,value:Ve._id},Ve.title," (",Ve.durationDays," days)")))),a.createElement("button",{onClick:()=>Br(!ir),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${pl?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},a.createElement(Bl,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),pl&&a.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(l.programId?1:0)+(l.isActive!==""?1:0)),a.createElement(Ll,{className:`h-4 w-4 transition-transform ${ir?"rotate-180":""}`})),a.createElement("button",{onClick:qc,disabled:i,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},a.createElement($n,{className:`h-4 w-4 ${i?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"ml-auto text-sm text-gray-500"},n.totalCount," quiz",n.totalCount!==1?"zes":""," total")),ir&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),a.createElement("select",{value:Cr,onChange:Ve=>xr(Ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"true"},"Active"),a.createElement("option",{value:"false"},"Inactive"))),a.createElement("div",{className:"flex items-end gap-2 sm:col-span-2 lg:col-span-3"},a.createElement("button",{onClick:gs,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),a.createElement("button",{onClick:An,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),a.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Quiz"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Program"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Day"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Questions"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Points"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,i&&r.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading quizzes..."))):r.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(yh,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No quizzes found"),a.createElement("button",{onClick:aa,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first quiz"))):r.map(Ve=>a.createElement("tr",{key:Ve._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"max-w-[200px]"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},Ve.title),Ve.description&&a.createElement("p",{className:"text-xs text-gray-500 truncate mt-0.5"},Ve.description))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"text-sm text-gray-700 truncate max-w-[150px] block"},Fr(Ve.programId))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-1.5 text-gray-600"},a.createElement(qr,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Day ",Ve.dayNumber||"-"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-1.5"},a.createElement(ph,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-sm text-gray-700"},Ve.questions?.length||Ve.questionCount||0))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-1.5"},a.createElement(td,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-sm text-gray-700"},Jt(Ve)))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Ve.isActive?wo.active:wo.inactive}`},Ve.isActive?"Active":"Inactive")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>na(Ve),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},a.createElement(Mr,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>we(Ve),disabled:$e,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit quiz"},a.createElement(cn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>ze(Ve),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},a.createElement(ur,{className:"h-4 w-4"}))))))))),n.totalPages>0&&a.createElement(Rr,{currentPage:n.currentPage,totalPages:n.totalPages,totalItems:n.totalCount,itemsPerPage:n.limit,onPageChange:P,itemLabel:"quizzes"})),a.createElement("div",{className:"md:hidden space-y-4"},i&&r.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading quizzes...")):r.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(yh,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No quizzes found"),a.createElement("button",{onClick:aa,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first quiz")):a.createElement(a.Fragment,null,r.map(Ve=>a.createElement("div",{key:Ve._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"min-w-0 flex-1"},a.createElement("div",{className:"flex items-center gap-2 flex-wrap mb-1"},a.createElement("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-700"},"Day ",Ve.dayNumber||"-"),a.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ve.isActive?wo.active:wo.inactive}`},Ve.isActive?"Active":"Inactive")),a.createElement("p",{className:"font-medium text-gray-900 truncate"},Ve.title),a.createElement("p",{className:"text-xs text-gray-500 mt-0.5 truncate"},Fr(Ve.programId)))),a.createElement("div",{className:"grid grid-cols-2 gap-2 text-center"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Questions"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Ve.questions?.length||Ve.questionCount||0)),a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Total Points"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Jt(Ve)))),a.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},a.createElement("button",{onClick:()=>na(Ve),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},a.createElement(Mr,{className:"h-4 w-4"}),"Details"),a.createElement("button",{onClick:()=>we(Ve),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors"},a.createElement(cn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>ze(Ve),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},a.createElement(ur,{className:"h-4 w-4"}))))),n.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Rr,{currentPage:n.currentPage,totalPages:n.totalPages,totalItems:n.totalCount,itemsPerPage:n.limit,onPageChange:P,itemLabel:"quizzes"}))))),a.createElement(Mde,{isOpen:pe,onClose:Ge,onSubmit:xt,isLoading:lt,serverError:mt,quizToEdit:ie,programs:R}),a.createElement(Bde,{isOpen:ee,onClose:oa,quiz:oe,isLoading:$e}),a.createElement(za,{isOpen:te,onClose:Nt,onConfirm:Ja,title:"Delete Quiz",message:`Are you sure you want to delete the quiz "${oe?.title}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:lt}),a.createElement(Fde,{isOpen:We,onClose:Na,onSubmit:Gn,isLoading:lt,serverError:mt,programToEdit:rt}),a.createElement(jde,{isOpen:Be,onClose:ot,program:qe,isLoading:pt,onFetchStats:j}),a.createElement(za,{isOpen:je,onClose:tr,onConfirm:pn,title:"Delete Program",message:`Are you sure you want to delete the program "${qe?.title}"? This will also affect all associated quizzes and user progress.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:lt}))}const No={BASE:"/web/challenges",GET_BY_ID:e=>`/web/challenges/${e}`,UPDATE:e=>`/web/challenges/${e}`,DELETE:e=>`/web/challenges/${e}`,TOGGLE_STATUS:e=>`/web/challenges/${e}/toggle-status`,STATS:e=>`/web/challenges/${e}/stats`,PARTICIPANTS:e=>`/web/challenges/${e}/participants`},So={getAll:async(e={})=>{const{page:t=1,limit:r=10,sortBy:n="createdAt",sortOrder:l="desc",isActive:i="",search:u="",category:g="",difficulty:h=""}=e,p=new URLSearchParams;p.append("page",t.toString()),p.append("limit",r.toString()),p.append("sortBy",n),p.append("sortOrder",l),i!==""&&p.append("isActive",i),u&&p.append("search",u),g&&p.append("category",g),h&&p.append("difficulty",h);const y=`${No.BASE}?${p.toString()}`;return console.log("[ChallengeService] Fetching challenges:",y),Pe(ke.get(y))},getById:async e=>e?(console.log("[ChallengeService] Fetching challenge:",e),Pe(ke.get(No.GET_BY_ID(e)))):(console.error("[ChallengeService] getById: No ID provided"),{success:!1,error:"Challenge ID is required"}),create:async e=>(console.log("[ChallengeService] Creating challenge:",e.title),!e.tasks||e.tasks.length===0?(console.error("[ChallengeService] create: No tasks provided"),{success:!1,error:"At least one task is required"}):Pe(ke.post(No.BASE,e))),update:async(e,t)=>e?(console.log("[ChallengeService] Updating challenge:",e),Pe(ke.put(No.UPDATE(e),t))):(console.error("[ChallengeService] update: No ID provided"),{success:!1,error:"Challenge ID is required"}),delete:async e=>e?(console.log("[ChallengeService] Deleting challenge:",e),Pe(ke.delete(No.DELETE(e)))):(console.error("[ChallengeService] delete: No ID provided"),{success:!1,error:"Challenge ID is required"}),toggleStatus:async e=>e?(console.log("[ChallengeService] Toggling status for challenge:",e),Pe(ke.patch(No.TOGGLE_STATUS(e)))):(console.error("[ChallengeService] toggleStatus: No ID provided"),{success:!1,error:"Challenge ID is required"}),getStats:async e=>e?(console.log("[ChallengeService] Fetching stats for challenge:",e),Pe(ke.get(No.STATS(e)))):(console.error("[ChallengeService] getStats: No ID provided"),{success:!1,error:"Challenge ID is required"}),getParticipants:async(e,t={})=>{if(!e)return console.error("[ChallengeService] getParticipants: No ID provided"),{success:!1,error:"Challenge ID is required"};const{page:r=1,limit:n=10,status:l=""}=t,i=new URLSearchParams;i.append("page",r.toString()),i.append("limit",n.toString()),l&&i.append("status",l);const u=`${No.PARTICIPANTS(e)}?${i.toString()}`;return console.log("[ChallengeService] Fetching participants:",u),Pe(ke.get(u))},buildTask:e=>{const{title:t,description:r=""}=e;return{title:t,description:r}}};function Vde(e={}){const[t,r]=w.useState([]),[n,l]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[i,u]=w.useState({search:"",isActive:"",category:"",difficulty:"",sortBy:"createdAt",sortOrder:"desc",...e}),[g,h]=w.useState(!1),[p,y]=w.useState(null),v=w.useRef(null),C=w.useCallback(async(Y=n.currentPage)=>{h(!0),y(null);try{const H={page:Y,limit:n.limit,sortBy:i.sortBy,sortOrder:i.sortOrder,...i.search&&{search:i.search},...i.isActive!==""&&{isActive:i.isActive},...i.category&&{category:i.category},...i.difficulty&&{difficulty:i.difficulty}};console.log("[useChallenges] Fetching challenges with params:",H);const q=await So.getAll(H);q.success?(r(q.data.challenges||[]),l({currentPage:q.data.pagination?.currentPage||1,totalPages:q.data.pagination?.totalPages||0,totalCount:q.data.pagination?.totalCount||0,limit:q.data.pagination?.limit||10}),console.log("[useChallenges] Fetched challenges:",q.data.challenges?.length)):(console.error("[useChallenges] Failed to fetch challenges:",q.message),y(q.message||"Failed to fetch challenges"),r([]))}catch(H){console.error("[useChallenges] Error fetching challenges:",H),y("Failed to fetch challenges"),r([])}finally{h(!1)}},[i,n.limit]),T=w.useCallback(async Y=>{try{console.log("[useChallenges] Creating challenge:",Y.title);const H=await So.create(Y);return H.success?(console.log("[useChallenges] Challenge created successfully"),await C(1),{success:!0,data:H.data}):(console.error("[useChallenges] Failed to create challenge:",H.message),{success:!1,error:H.message,validationErrors:H.error})}catch(H){return console.error("[useChallenges] Error creating challenge:",H),{success:!1,error:"Failed to create challenge"}}},[C]),D=w.useCallback(async Y=>{try{console.log("[useChallenges] Fetching challenge by ID:",Y);const H=await So.getById(Y);return H.success?{success:!0,data:H.data.challenge}:(console.error("[useChallenges] Failed to fetch challenge:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useChallenges] Error fetching challenge:",H),{success:!1,error:"Failed to fetch challenge details"}}},[]),P=w.useCallback(async Y=>{try{console.log("[useChallenges] Fetching stats for challenge:",Y);const H=await So.getStats(Y);return H.success?{success:!0,data:H.data}:(console.error("[useChallenges] Failed to fetch challenge stats:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useChallenges] Error fetching challenge stats:",H),{success:!1,error:"Failed to fetch challenge statistics"}}},[]),k=w.useCallback(async(Y,H={})=>{try{console.log("[useChallenges] Fetching participants for challenge:",Y);const q=await So.getParticipants(Y,H);return q.success?{success:!0,data:q.data}:(console.error("[useChallenges] Failed to fetch participants:",q.message),{success:!1,error:q.message})}catch(q){return console.error("[useChallenges] Error fetching participants:",q),{success:!1,error:"Failed to fetch challenge participants"}}},[]),R=w.useCallback(async(Y,H)=>{try{console.log("[useChallenges] Updating challenge:",Y);const q=await So.update(Y,H);return q.success?(console.log("[useChallenges] Challenge updated successfully"),r(le=>le.map(ue=>ue._id===Y?{...ue,...q.data.challenge}:ue)),{success:!0,data:q.data}):(console.error("[useChallenges] Failed to update challenge:",q.message),{success:!1,error:q.message,validationErrors:q.error})}catch(q){return console.error("[useChallenges] Error updating challenge:",q),{success:!1,error:"Failed to update challenge"}}},[]),B=w.useCallback(async(Y,H)=>{try{console.log("[useChallenges] Toggling status for challenge:",Y);const q=await So.toggleStatus(Y);return q.success?(console.log("[useChallenges] Challenge status toggled successfully"),r(le=>le.map(ue=>ue._id===Y?{...ue,isActive:!H}:ue)),{success:!0}):(console.error("[useChallenges] Failed to toggle challenge status:",q.message),{success:!1,error:q.message})}catch(q){return console.error("[useChallenges] Error toggling challenge status:",q),{success:!1,error:"Failed to update challenge status"}}},[]),M=w.useCallback(async Y=>{try{console.log("[useChallenges] Deleting challenge:",Y);const H=await So.delete(Y);return H.success?(console.log("[useChallenges] Challenge deleted successfully"),r(q=>q.filter(le=>le._id!==Y)),l(q=>({...q,totalCount:q.totalCount-1,totalPages:Math.ceil((q.totalCount-1)/q.limit)})),{success:!0}):(console.error("[useChallenges] Failed to delete challenge:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useChallenges] Error deleting challenge:",H),{success:!1,error:"Failed to delete challenge"}}},[]),G=w.useCallback(Y=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{u(H=>({...H,search:Y}))},300)},[]),F=w.useCallback(Y=>{u(H=>({...H,...Y}))},[]),U=w.useCallback(()=>{u({search:"",isActive:"",category:"",difficulty:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),L=w.useCallback(Y=>{C(Y)},[C]),V=w.useCallback(Y=>{l(H=>({...H,limit:Y}))},[]),j=w.useCallback(()=>{y(null)},[]);return w.useEffect(()=>{C(1)},[i]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{challenges:t,pagination:n,filters:i,isLoading:g,error:p,fetchChallenges:C,createChallenge:T,getChallengeById:D,getChallengeStats:P,getChallengeParticipants:k,updateChallenge:R,toggleChallengeStatus:B,deleteChallenge:M,searchChallenges:G,updateFilters:F,resetFilters:U,changePage:L,changeLimit:V,clearError:j}}const Hde=[{value:"health",label:"Health"},{value:"fitness",label:"Fitness"},{value:"mindfulness",label:"Mindfulness"},{value:"productivity",label:"Productivity"},{value:"social",label:"Social"},{value:"creativity",label:"Creativity"},{value:"learning",label:"Learning"},{value:"wellness",label:"Wellness"},{value:"habit",label:"Habit"},{value:"other",label:"Other"}],$de=[{value:"easy",label:"Easy",description:"Suitable for beginners"},{value:"medium",label:"Medium",description:"Moderate effort required"},{value:"hard",label:"Hard",description:"Challenging for experienced users"}],sD=()=>({title:"",description:"",category:"",difficulty:"medium",tasks:[],durationDays:"",imageUrl:"",isActive:!1}),qde=()=>({title:"",description:""});function Gde({isOpen:e,onClose:t,onSubmit:r,isLoading:n=!1,serverError:l=null,challengeToEdit:i=null}){const[u,g]=w.useState(sD()),[h,p]=w.useState({}),[y,v]=w.useState("basic"),C=!!i;w.useEffect(()=>{e&&(g(i?{title:i.title||"",description:i.description||"",category:i.category||"",difficulty:i.difficulty||"medium",tasks:i.tasks?.map(M=>({title:M.title||"",description:M.description||""}))||[],durationDays:i.durationDays?.toString()||"",imageUrl:i.imageUrl||"",isActive:i.isActive??!1}:sD()),p({}),v("basic"))},[e,i]);const T=M=>{const G={};if(M.title.trim()?M.title.length>200&&(G.title="Title must be less than 200 characters"):G.title="Title is required",M.description.trim()?M.description.length>2e3&&(G.description="Description must be less than 2000 characters"):G.description="Description is required",M.category||(G.category="Category is required"),M.durationDays){const F=parseInt(M.durationDays,10);isNaN(F)||F<1?G.durationDays="Duration must be at least 1 day":F>365&&(G.durationDays="Duration cannot exceed 365 days")}if(M.imageUrl&&!/^https?:\/\/.+/.test(M.imageUrl)&&(G.imageUrl="Please provide a valid image URL"),M.tasks.length===0)G.tasks="At least one task is required";else{const F=[];M.tasks.forEach((U,L)=>{const V={};U.title.trim()||(V.title="Task title is required"),Object.keys(V).length>0&&(F[L]=V)}),(F.length>0||Object.keys(F).some(U=>F[U]))&&(G.taskErrors=F)}return{isValid:Object.keys(G).length===0,errors:G}},D=(M,G)=>{g(F=>({...F,[M]:G})),h[M]&&p(F=>{const U={...F};return delete U[M],U})},P=()=>{g(M=>({...M,tasks:[...M.tasks,qde()]}))},k=M=>{g(G=>({...G,tasks:G.tasks.filter((F,U)=>U!==M)}))},R=(M,G,F)=>{g(U=>({...U,tasks:U.tasks.map((L,V)=>V!==M?L:{...L,[G]:F})}))},B=async M=>{M.preventDefault();const{isValid:G,errors:F}=T(u);if(!G){p(F),(F.tasks||F.taskErrors)&&v("tasks");return}const U={title:u.title.trim(),description:u.description.trim(),category:u.category,difficulty:u.difficulty,tasks:u.tasks.map((V,j)=>({title:V.title.trim(),description:V.description.trim(),order:j})),isActive:u.isActive};u.durationDays&&(U.durationDays=parseInt(u.durationDays,10)),u.imageUrl.trim()&&(U.imageUrl=u.imageUrl.trim()),console.log("[ChallengeForm] Submitting data:",U),(await r(U))?.success&&t()};return a.createElement(jt,{isOpen:e,onClose:t,title:C?"Edit Challenge":"Create Challenge",size:"xl"},a.createElement("form",{onSubmit:B,className:"space-y-4"},a.createElement("div",{className:"flex border-b border-gray-200"},a.createElement("button",{type:"button",onClick:()=>v("basic"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${y==="basic"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`},"Basic Info"),a.createElement("button",{type:"button",onClick:()=>v("tasks"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${y==="tasks"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`},"Tasks (",u.tasks.length,")")),a.createElement("div",{className:"max-h-[60vh] overflow-y-auto pr-2"},y==="basic"?a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Challenge Title ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:u.title,onChange:M=>D("title",M.target.value),placeholder:"e.g., 30-Day Fitness Challenge",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.title&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.title)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Description ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("textarea",{value:u.description,onChange:M=>D("description",M.target.value),placeholder:"Describe what participants will achieve through this challenge...",rows:4,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${h.description?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.description&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.description)),a.createElement("div",{className:"grid grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Category ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{value:u.category,onChange:M=>D("category",M.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.category?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`},a.createElement("option",{value:""},"Select a category"),Hde.map(M=>a.createElement("option",{key:M.value,value:M.value},M.label))),h.category&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.category)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Difficulty"),a.createElement("select",{value:u.difficulty,onChange:M=>D("difficulty",M.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`},$de.map(M=>a.createElement("option",{key:M.value,value:M.value},M.label))))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Duration (Days)",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("input",{type:"number",value:u.durationDays,onChange:M=>D("durationDays",M.target.value),placeholder:"e.g., 30",min:"1",max:"365",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.durationDays?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.durationDays&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.durationDays),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Duration of the challenge in days. Leave empty for no time limit.")),a.createElement(il,{label:"Challenge Image",value:u.imageUrl,onUpload:M=>D("imageUrl",M),disabled:n,error:h.imageUrl,type:"image",folder:"challenges",placeholder:"Drop image here or click to upload"}),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:u.isActive,onChange:M=>D("isActive",M.target.checked),disabled:n,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})),a.createElement("span",{className:"text-sm text-gray-700"},u.isActive?"Active (Visible to users)":"Inactive"))):a.createElement("div",{className:"space-y-4"},h.tasks&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg"},a.createElement("p",{className:"text-sm text-red-700"},h.tasks)),u.tasks.length===0?a.createElement("div",{className:"p-8 text-center border-2 border-dashed border-gray-200 rounded-lg"},a.createElement("p",{className:"text-gray-500 mb-3"},"No tasks added yet"),a.createElement("button",{type:"button",onClick:P,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},a.createElement(kr,{className:"h-4 w-4"}),"Add Task")):a.createElement(a.Fragment,null,u.tasks.map((M,G)=>a.createElement("div",{key:G,className:"p-4 border border-gray-200 rounded-lg space-y-3"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(Hp,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"font-medium text-gray-700"},"Task ",G+1)),a.createElement("button",{type:"button",onClick:()=>k(G),className:"p-1 text-red-500 hover:bg-red-50 rounded"},a.createElement(ur,{className:"h-4 w-4"}))),a.createElement("div",null,a.createElement("label",{className:"block text-xs font-medium text-gray-600 mb-1"},"Title ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:M.title,onChange:F=>R(G,"title",F.target.value),placeholder:"e.g., Do 20 pushups",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.taskErrors?.[G]?.title?"border-red-500":"border-gray-300"}`}),h.taskErrors?.[G]?.title&&a.createElement("p",{className:"text-red-600 text-xs mt-1"},h.taskErrors[G].title)),a.createElement("div",null,a.createElement("label",{className:"block text-xs font-medium text-gray-600 mb-1"},"Description",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("textarea",{value:M.description,onChange:F=>R(G,"description",F.target.value),placeholder:"Additional details about this task...",rows:2,disabled:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none transition-colors"})))),a.createElement("button",{type:"button",onClick:P,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2"},a.createElement(kr,{className:"h-4 w-4"}),"Add Task")))),l&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},a.createElement(Xt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},l)),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:t,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50"},n?a.createElement(a.Fragment,null,a.createElement(ct,{className:"h-4 w-4 animate-spin"}),a.createElement("span",null,C?"Updating...":"Creating...")):a.createElement("span",null,C?"Update Challenge":"Create Challenge")))))}const lD=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"-",zv={easy:{color:"bg-green-100 text-green-700",label:"Easy"},medium:{color:"bg-amber-100 text-amber-700",label:"Medium"},hard:{color:"bg-red-100 text-red-700",label:"Hard"}},iD=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-";function Yde({isOpen:e,onClose:t,challenge:r,isLoading:n=!1,onFetchStats:l}){const[i,u]=w.useState(null),[g,h]=w.useState(!1),[p,y]=w.useState(null);return w.useEffect(()=>{(async()=>{if(!(!e||!r?._id||!l)){h(!0),y(null);try{const C=await l(r._id);C.success?u(C.data.stats||C.data):y(C.error||"Failed to load statistics")}catch(C){console.error("[ChallengeDetailsModal] Error fetching stats:",C),y("Failed to load statistics")}finally{h(!1)}}})()},[e,r?._id,l]),w.useEffect(()=>{e||(u(null),y(null))},[e]),e?a.createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto"},a.createElement("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:t}),a.createElement("div",{className:"relative min-h-full flex items-center justify-center p-4"},a.createElement("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden"},a.createElement("div",{className:"flex items-center justify-between p-6 border-b border-gray-200"},a.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Challenge Details"),a.createElement("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"},a.createElement(Gr,{className:"h-5 w-5"}))),a.createElement("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},n?a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading challenge details...")):r?a.createElement("div",{className:"space-y-6"},a.createElement("div",null,a.createElement("div",{className:"flex items-center gap-2 mb-2"},a.createElement("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isActive?"Active":"Inactive"),r.category&&a.createElement("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700"},lD(r.category)),r.difficulty&&a.createElement("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${zv[r.difficulty]?.color||"bg-gray-100 text-gray-700"}`},zv[r.difficulty]?.label||r.difficulty),r.durationDays&&a.createElement("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700"},r.durationDays," Days")),a.createElement("h3",{className:"text-xl font-semibold text-gray-900"},r.title)),r.description&&a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-1"},"Description"),a.createElement("p",{className:"text-gray-600 whitespace-pre-wrap"},r.description)),a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4"},a.createElement("div",{className:"bg-blue-50 rounded-lg p-4 text-center"},a.createElement(Ph,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-blue-700"},r.tasks?.length||0),a.createElement("p",{className:"text-xs text-blue-600"},"Tasks")),a.createElement("div",{className:"bg-purple-50 rounded-lg p-4 text-center"},a.createElement(ed,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),a.createElement("p",{className:"text-lg font-semibold text-purple-700"},lD(r.category)),a.createElement("p",{className:"text-xs text-purple-600"},"Category")),a.createElement("div",{className:"bg-amber-50 rounded-lg p-4 text-center"},a.createElement(K_,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),a.createElement("p",{className:"text-lg font-semibold text-amber-700"},zv[r.difficulty]?.label||"Medium"),a.createElement("p",{className:"text-xs text-amber-600"},"Difficulty")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4 text-center"},a.createElement(qr,{className:"h-5 w-5 text-gray-500 mx-auto mb-1"}),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},r.durationDays?`${r.durationDays}d`:"No Limit"),a.createElement("p",{className:"text-xs text-gray-500"},"Duration"))),r.tasks&&r.tasks.length>0&&a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},a.createElement(Ph,{className:"h-4 w-4"}),"Tasks (",r.tasks.length,")"),a.createElement("div",{className:"space-y-2"},r.tasks.map((v,C)=>a.createElement("div",{key:C,className:"p-3 border border-gray-200 rounded-lg"},a.createElement("div",{className:"flex items-start gap-3"},a.createElement("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-xs font-medium text-gray-600"},C+1),a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900"},v.title),v.description&&a.createElement("p",{className:"text-sm text-gray-500 mt-1"},v.description))))))),a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},a.createElement(ol,{className:"h-4 w-4"}),"Statistics"),g?a.createElement("div",{className:"flex items-center justify-center py-8 bg-gray-50 rounded-lg"},a.createElement(ct,{className:"h-6 w-6 text-gray-400 animate-spin"}),a.createElement("span",{className:"ml-2 text-sm text-gray-500"},"Loading statistics...")):p?a.createElement("div",{className:"p-4 bg-red-50 rounded-lg text-sm text-red-600"},p):i?a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3"},a.createElement("div",{className:"bg-blue-50 rounded-lg p-3 text-center"},a.createElement(kl,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-blue-700"},i.totalParticipants||0),a.createElement("p",{className:"text-xs text-blue-600"},"Participants")),a.createElement("div",{className:"bg-amber-50 rounded-lg p-3 text-center"},a.createElement(ea,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-amber-700"},i.activeParticipants||0),a.createElement("p",{className:"text-xs text-amber-600"},"Active")),a.createElement("div",{className:"bg-green-50 rounded-lg p-3 text-center"},a.createElement(rf,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-green-700"},i.completedParticipants||0),a.createElement("p",{className:"text-xs text-green-600"},"Completed")),a.createElement("div",{className:"bg-purple-50 rounded-lg p-3 text-center"},a.createElement(td,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-purple-700"},i.averageTasksCompleted||0),a.createElement("p",{className:"text-xs text-purple-600"},"Avg. Tasks Done"))):a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg text-sm text-gray-500 text-center"},"No statistics available")),r.imageUrl&&a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-2"},"Challenge Image"),a.createElement("div",{className:"relative rounded-lg overflow-hidden bg-gray-100 aspect-video"},a.createElement("img",{src:r.imageUrl,alt:r.title,className:"w-full h-full object-cover",onError:v=>{v.target.style.display="none",v.target.parentElement.innerHTML='<div class="flex items-center justify-center h-full text-gray-400 text-sm">Failed to load image</div>'}}))),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500"},a.createElement("span",null,"Created: ",iD(r.createdAt)),r.updatedAt&&r.updatedAt!==r.createdAt&&a.createElement("span",null,"Updated: ",iD(r.updatedAt)),r.createdBy?.name&&a.createElement("span",null,"By: ",r.createdBy.name)))):a.createElement("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500"},a.createElement("p",null,"No challenge data available"))),a.createElement("div",{className:"p-4 border-t border-gray-200 bg-gray-50"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},"Close"))))):null}const oD=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"-",Xde=[{value:"health",label:"Health"},{value:"fitness",label:"Fitness"},{value:"mindfulness",label:"Mindfulness"},{value:"productivity",label:"Productivity"},{value:"social",label:"Social"},{value:"creativity",label:"Creativity"},{value:"learning",label:"Learning"},{value:"wellness",label:"Wellness"},{value:"habit",label:"Habit"},{value:"other",label:"Other"}],sh={easy:{color:"bg-green-100 text-green-700",label:"Easy"},medium:{color:"bg-amber-100 text-amber-700",label:"Medium"},hard:{color:"bg-red-100 text-red-700",label:"Hard"}},lh={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-600"};function Wde(){const{challenges:e,pagination:t,filters:r,isLoading:n,error:l,fetchChallenges:i,createChallenge:u,getChallengeById:g,getChallengeStats:h,updateChallenge:p,toggleChallengeStatus:y,deleteChallenge:v,searchChallenges:C,updateFilters:T,resetFilters:D,changePage:P,clearError:k}=Vde(),[R,B]=w.useState(!1),[M,G]=w.useState(!1),[F,U]=w.useState(!1),[L,V]=w.useState(null),[j,Y]=w.useState(null),[H,q]=w.useState(!1),[le,ue]=w.useState(!1),[re,J]=w.useState(null),[ae,pe]=w.useState(!1),[xe,ee]=w.useState(r.search||""),[K,te]=w.useState(r.isActive||""),[ge,oe]=w.useState(r.category||""),[Ne,ie]=w.useState(r.difficulty||""),me=w.useCallback(()=>{J(null),Y(null),B(!0)},[]),$e=w.useCallback(async Ue=>{J(null),q(!0);try{const mt=await g(Ue._id);mt.success?(Y(mt.data),B(!0)):alert(mt.error||"Failed to load challenge details")}catch(mt){console.error("[Challenges] Failed to load challenge for edit:",mt),alert("An unexpected error occurred")}finally{q(!1)}},[g]),ve=w.useCallback(()=>{B(!1),J(null),Y(null)},[]),We=w.useCallback(async Ue=>{ue(!0),J(null);try{let mt;return j?mt=await p(j._id,Ue):mt=await u(Ue),mt.success?mt:(J(mt.error||"Failed to save challenge"),{success:!1})}catch(mt){return console.error("[Challenges] Form submission error:",mt),J("An unexpected error occurred"),{success:!1}}finally{ue(!1)}},[u,p,j]),nt=w.useCallback(async Ue=>{V(Ue),G(!0),q(!0);try{const mt=await g(Ue._id);mt.success&&V(mt.data)}catch(mt){console.error("[Challenges] Failed to fetch details:",mt)}finally{q(!1)}},[g]),Be=w.useCallback(()=>{G(!1),V(null)},[]),Ee=w.useCallback(async Ue=>{ue(!0);try{const mt=await y(Ue._id,Ue.isActive);mt.success||alert(mt.error||"Failed to update challenge status")}catch(mt){console.error("[Challenges] Toggle status error:",mt),alert("An unexpected error occurred")}finally{ue(!1)}},[y]),je=w.useCallback(Ue=>{V(Ue),U(!0)},[]),ce=w.useCallback(()=>{U(!1),V(null)},[]),qe=w.useCallback(async()=>{if(L){ue(!0);try{const Ue=await v(L._id);Ue.success?ce():alert(Ue.error||"Failed to delete challenge")}catch(Ue){console.error("[Challenges] Delete error:",Ue),alert("An unexpected error occurred")}finally{ue(!1)}}},[L,v,ce]),Se=w.useCallback(Ue=>{const mt=Ue.target.value;ee(mt),C(mt)},[C]),rt=w.useCallback(()=>{T({search:xe,isActive:K,category:ge,difficulty:Ne}),pe(!1)},[xe,K,ge,Ne,T]),it=w.useCallback(()=>{ee(""),te(""),oe(""),ie(""),D(),pe(!1)},[D]),pt=w.useCallback(()=>{i(t.currentPage)},[i,t.currentPage]),Ke=w.useMemo(()=>r.search||r.isActive!==""||r.category||r.difficulty,[r]),lt=w.useMemo(()=>{let Ue=0;return r.search&&Ue++,r.isActive!==""&&Ue++,r.category&&Ue++,r.difficulty&&Ue++,Ue},[r]);return a.createElement("div",{className:"space-y-4 sm:space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900"},"Challenges"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Create and manage task-based challenges for users")),a.createElement("button",{onClick:me,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},a.createElement(kr,{className:"h-5 w-5"}),a.createElement("span",null,"Create Challenge"))),l&&a.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},a.createElement(Xt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("div",{className:"flex-1"},a.createElement("p",{className:"text-sm font-medium text-red-800"},"Error loading challenges"),a.createElement("p",{className:"text-sm text-red-700 mt-0.5"},l)),a.createElement("button",{onClick:k,className:"shrink-0 text-red-600 hover:text-red-800"},"")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},a.createElement("div",{className:"relative flex-1 max-w-md"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",value:xe,onChange:Se,placeholder:"Search challenges...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),a.createElement("button",{onClick:()=>pe(!ae),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${Ke?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},a.createElement(Bl,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),Ke&&a.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},lt),a.createElement(Ll,{className:`h-4 w-4 transition-transform ${ae?"rotate-180":""}`})),a.createElement("button",{onClick:pt,disabled:n,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},a.createElement($n,{className:`h-4 w-4 ${n?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"ml-auto text-sm text-gray-500"},t.totalCount," challenge",t.totalCount!==1?"s":""," total")),ae&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Category"),a.createElement("select",{value:ge,onChange:Ue=>oe(Ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Categories"),Xde.map(Ue=>a.createElement("option",{key:Ue.value,value:Ue.value},Ue.label)))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Difficulty"),a.createElement("select",{value:Ne,onChange:Ue=>ie(Ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Difficulties"),a.createElement("option",{value:"easy"},"Easy"),a.createElement("option",{value:"medium"},"Medium"),a.createElement("option",{value:"hard"},"Hard"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),a.createElement("select",{value:K,onChange:Ue=>te(Ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"true"},"Active"),a.createElement("option",{value:"false"},"Inactive"))),a.createElement("div",{className:"flex items-end gap-2"},a.createElement("button",{onClick:rt,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),a.createElement("button",{onClick:it,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),a.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Challenge"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Tasks"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Category"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Difficulty"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Duration"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,n&&e.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading challenges..."))):e.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(Yu,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No challenges found"),a.createElement("button",{onClick:me,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first challenge"))):e.map(Ue=>a.createElement("tr",{key:Ue._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"max-w-[300px]"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},Ue.title),Ue.description&&a.createElement("p",{className:"text-xs text-gray-500 truncate mt-0.5"},Ue.description))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-600"},a.createElement(Ph,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},Ue.tasks?.length||Ue.taskCount||0," tasks"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700"},a.createElement(ed,{className:"h-3 w-3"}),oD(Ue.category))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${sh[Ue.difficulty]?.color||"bg-gray-100 text-gray-700"}`},a.createElement(K_,{className:"h-3 w-3"}),sh[Ue.difficulty]?.label||"Medium")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-600"},a.createElement(qr,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},Ue.durationDays?`${Ue.durationDays} days`:"No limit"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Ue.isActive?lh.active:lh.inactive}`},Ue.isActive?"Active":"Inactive")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>Ee(Ue),disabled:le,className:`p-2 rounded-lg transition-colors ${Ue.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:Ue.isActive?"Set Inactive":"Set Active"},Ue.isActive?a.createElement(Ei,{className:"h-5 w-5"}):a.createElement(Fl,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>nt(Ue),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},a.createElement(Mr,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>$e(Ue),disabled:H,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit challenge"},a.createElement(cn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>je(Ue),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},a.createElement(ur,{className:"h-4 w-4"}))))))))),t.totalPages>0&&a.createElement(Rr,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:P,itemLabel:"challenges"})),a.createElement("div",{className:"md:hidden space-y-4"},n&&e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(ct,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading challenges...")):e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Yu,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No challenges found"),a.createElement("button",{onClick:me,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first challenge")):a.createElement(a.Fragment,null,e.map(Ue=>a.createElement("div",{key:Ue._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"min-w-0 flex-1"},a.createElement("div",{className:"flex items-center gap-2 flex-wrap mb-1"},a.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ue.isActive?lh.active:lh.inactive}`},Ue.isActive?"Active":"Inactive"),Ue.category&&a.createElement("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-700"},oD(Ue.category)),Ue.difficulty&&a.createElement("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${sh[Ue.difficulty]?.color||"bg-gray-100 text-gray-700"}`},sh[Ue.difficulty]?.label||"Medium"),Ue.durationDays&&a.createElement("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700"},Ue.durationDays," days")),a.createElement("p",{className:"font-medium text-gray-900 truncate"},Ue.title),Ue.description&&a.createElement("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2"},Ue.description))),a.createElement("div",{className:"grid grid-cols-2 gap-2 text-center"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("div",{className:"flex items-center justify-center gap-1 text-gray-500"},a.createElement(Ph,{className:"h-3 w-3"}),a.createElement("p",{className:"text-xs"},"Tasks")),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Ue.tasks?.length||Ue.taskCount||0)),a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("div",{className:"flex items-center justify-center gap-1 text-gray-500"},a.createElement(qr,{className:"h-3 w-3"}),a.createElement("p",{className:"text-xs"},"Duration")),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Ue.durationDays?`${Ue.durationDays}d`:"No limit"))),a.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},a.createElement("button",{onClick:()=>Ee(Ue),disabled:le,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Ue.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},Ue.isActive?a.createElement(a.Fragment,null,a.createElement(Ei,{className:"h-4 w-4"}),"Active"):a.createElement(a.Fragment,null,a.createElement(Fl,{className:"h-4 w-4"}),"Inactive")),a.createElement("button",{onClick:()=>nt(Ue),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},a.createElement(Mr,{className:"h-4 w-4"}),"Details"),a.createElement("button",{onClick:()=>$e(Ue),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors"},a.createElement(cn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>je(Ue),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},a.createElement(ur,{className:"h-4 w-4"}))))),t.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Rr,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:P,itemLabel:"challenges"})))),a.createElement(Gde,{isOpen:R,onClose:ve,onSubmit:We,isLoading:le,serverError:re,challengeToEdit:j}),a.createElement(Yde,{isOpen:M,onClose:Be,challenge:L,isLoading:H,onFetchStats:h}),a.createElement(za,{isOpen:F,onClose:ce,onConfirm:qe,title:"Delete Challenge",message:`Are you sure you want to delete the challenge "${L?.title}"? This will also affect all participant progress.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:le}))}const Pu={BASE:"/web/polls",BY_EVENT:"/web/polls/event"},Iu={create:async e=>{console.log("[PollService] Creating poll for event:",e.eventId);const t=await Pe(ke.post(Pu.BASE,e));return t.success?console.log("[PollService] Created poll:",t.data?._id):console.error("[PollService] Failed to create poll:",t.message),t},getByEventId:async e=>{console.log("[PollService] Fetching poll for event:",e);const t=await Pe(ke.get(`${Pu.BY_EVENT}/${e}`));return t.success?console.log("[PollService] Fetched poll:",t.data?._id):console.error("[PollService] Failed to fetch poll:",t.message),t},update:async(e,t)=>{console.log("[PollService] Updating poll:",e);const r=await Pe(ke.put(`${Pu.BASE}/${e}`,t));return r.success?console.log("[PollService] Updated poll successfully"):console.error("[PollService] Failed to update poll:",r.message),r},delete:async e=>{console.log("[PollService] Deleting poll:",e);const t=await Pe(ke.delete(`${Pu.BASE}/${e}`));return t.success?console.log("[PollService] Deleted poll successfully"):console.error("[PollService] Failed to delete poll:",t.message),t},getStats:async e=>{console.log("[PollService] Fetching stats for poll:",e);const t=await Pe(ke.get(`${Pu.BASE}/${e}/stats`));return t.success?console.log("[PollService] Fetched poll stats, total submissions:",t.data?.totalSubmissions):console.error("[PollService] Failed to fetch poll stats:",t.message),t},notifyUsers:async e=>{console.log("[PollService] Sending notification for poll:",e);const t=await Pe(ke.post(`${Pu.BASE}/${e}/notify`));return t.success?console.log("[PollService] Notification sent, success:",t.data?.successCount,"failed:",t.data?.failureCount):console.error("[PollService] Failed to send notification:",t.message),t}},cD=(e=null)=>({questions:e?.questions?.length>0?e.questions.map(t=>({questionText:t.questionText||"",options:t.options?.length>0?[...t.options]:["",""]})):[{questionText:"",options:["",""]}],isActive:e?.isActive??!0}),Kde=e=>{const t={};if(!e.questions||e.questions.length===0)return t.questions="At least one question is required",{isValid:!1,errors:t};const r=[];return e.questions.forEach((n,l)=>{const i={};n.questionText?.trim()?n.questionText.length>500&&(i.questionText="Question text must be 500 characters or less"):i.questionText="Question text is required";const u=n.options?.filter(h=>h?.trim())||[];u.length<2&&(i.options="At least 2 options are required"),new Set(u.map(h=>h.trim().toLowerCase())).size!==u.length&&(i.options="Options must be unique"),Object.keys(i).length>0&&(r[l]=i)}),r.some(n=>n)&&(t.questionErrors=r),{isValid:Object.keys(t).length===0,errors:t}};function uD({isOpen:e,onClose:t,onSubmit:r,poll:n=null,event:l=null,isLoading:i=!1,serverError:u=null}){const g=!!n,[h,p]=w.useState(cD(n)),[y,v]=w.useState({});w.useEffect(()=>{e&&(p(cD(n)),v({}),console.log("[PollForm] Form initialized:",{isEditMode:g,poll:n}))},[e,n]);const C=(F,U)=>{p(L=>({...L,questions:L.questions.map((V,j)=>j===F?{...V,questionText:U}:V)})),y.questionErrors?.[F]?.questionText&&v(L=>{const V={...L};return V.questionErrors?.[F]&&delete V.questionErrors[F].questionText,V})},T=(F,U,L)=>{p(V=>({...V,questions:V.questions.map((j,Y)=>Y===F?{...j,options:j.options.map((H,q)=>q===U?L:H)}:j)})),y.questionErrors?.[F]?.options&&v(V=>{const j={...V};return j.questionErrors?.[F]&&delete j.questionErrors[F].options,j})},D=F=>{p(U=>({...U,questions:U.questions.map((L,V)=>V===F?{...L,options:[...L.options,""]}:L)}))},P=(F,U)=>{p(L=>({...L,questions:L.questions.map((V,j)=>j===F?{...V,options:V.options.filter((Y,H)=>H!==U)}:V)}))},k=()=>{p(F=>({...F,questions:[...F.questions,{questionText:"",options:["",""]}]}))},R=F=>{p(U=>({...U,questions:U.questions.filter((L,V)=>V!==F)}))},B=()=>{p(F=>({...F,isActive:!F.isActive}))},M=async F=>{F.preventDefault();const U=Kde(h);if(!U.isValid){v(U.errors),console.log("[PollForm] Validation failed:",U.errors);return}const L={questions:h.questions.map(V=>({questionText:V.questionText.trim(),options:V.options.filter(j=>j?.trim()).map(j=>j.trim())}))};!g&&l?L.eventId=l._id:g&&(L.isActive=h.isActive),console.log("[PollForm] Submitting:",L),await r(L)},G=()=>{i||t()};return a.createElement(jt,{isOpen:e,onClose:G,title:g?"Edit Poll":"Create Poll",size:"2xl",closeOnOverlayClick:!i},a.createElement("form",{onSubmit:M,className:"space-y-6"},l&&a.createElement("div",{className:"p-3 bg-blue-50 border border-blue-200 text-blue-800 rounded-lg"},a.createElement("p",{className:"text-sm"},a.createElement("span",{className:"font-medium"},"Event:")," ",l.name)),u&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},u),y.questions&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},y.questions),a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Questions"),a.createElement("span",{className:"text-sm text-gray-500"},h.questions.length," question(s)")),h.questions.map((F,U)=>a.createElement("div",{key:U,className:"p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-4"},a.createElement("div",{className:"flex items-start gap-3"},a.createElement("div",{className:"flex items-center gap-2 text-gray-400 mt-2"},a.createElement(Hp,{className:"h-4 w-4"}),a.createElement("span",{className:"font-medium text-sm text-gray-500"},"Q",U+1)),a.createElement("div",{className:"flex-1"},a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Question Text ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:F.questionText,onChange:L=>C(U,L.target.value),disabled:i,maxLength:500,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.questionErrors?.[U]?.questionText?"border-red-500":"border-gray-300"}`,placeholder:"Enter your question"}),y.questionErrors?.[U]?.questionText&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.questionErrors[U].questionText)),h.questions.length>1&&a.createElement("button",{type:"button",onClick:()=>R(U),disabled:i,className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors mt-6",title:"Remove question"},a.createElement(ur,{className:"h-4 w-4"}))),a.createElement("div",{className:"ml-10 space-y-2"},a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Options ",a.createElement("span",{className:"text-red-500"},"*"),a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(min 2)")),y.questionErrors?.[U]?.options&&a.createElement("p",{className:"text-sm text-red-500"},y.questionErrors[U].options),F.options.map((L,V)=>a.createElement("div",{key:V,className:"flex items-center gap-2"},a.createElement("span",{className:"text-sm text-gray-400 w-6"},V+1,"."),a.createElement("input",{type:"text",value:L,onChange:j=>T(U,V,j.target.value),disabled:i,maxLength:200,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:`Option ${V+1}`}),F.options.length>2&&a.createElement("button",{type:"button",onClick:()=>P(U,V),disabled:i,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Remove option"},a.createElement(ur,{className:"h-4 w-4"})))),a.createElement("button",{type:"button",onClick:()=>D(U),disabled:i||F.options.length>=10,className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50"},a.createElement(kr,{className:"h-3 w-3"}),"Add Option")))),a.createElement("button",{type:"button",onClick:k,disabled:i||h.questions.length>=20,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 text-gray-600 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors disabled:opacity-50"},a.createElement(kr,{className:"h-4 w-4"}),"Add Question")),g&&a.createElement("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900"},"Poll Status"),a.createElement("p",{className:"text-sm text-gray-500"},h.isActive?"Poll is accepting submissions":"Poll is closed for submissions")),a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:h.isActive,onChange:B,disabled:i,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"}))),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:G,disabled:i,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},i&&a.createElement(ct,{className:"h-4 w-4 animate-spin"}),g?"Update Poll":"Create Poll"))))}function Zde(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function Qde(e){return e==="ONLINE"||e==="HYBRID"?tE:q2}function Jde(e){const t={TECHNOLOGY:"bg-blue-100 text-blue-700",EDUCATION:"bg-indigo-100 text-indigo-700",MEDICAL:"bg-green-100 text-green-700",COMEDY:"bg-yellow-100 text-yellow-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",BUSINESS:"bg-gray-100 text-gray-700",SPORTS:"bg-orange-100 text-orange-700",ARTS:"bg-purple-100 text-purple-700",MUSIC:"bg-red-100 text-red-700",FOOD:"bg-amber-100 text-amber-700",LIFESTYLE:"bg-teal-100 text-teal-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function eme({event:e,poll:t,isLoadingPoll:r=!1,isNotifying:n=!1,canEdit:l=!0,canDelete:i=!0,onCreatePoll:u,onEditPoll:g,onDeletePoll:h,onViewStats:p,onViewPoll:y,onNotifyUsers:v}){const C=!!t,T=Qde(e.mode);return a.createElement("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all overflow-hidden flex flex-col"},a.createElement("div",{className:"relative h-36 bg-gradient-to-br from-gray-100 to-gray-200"},e.thumbnail?.imageUrl||e.imageUrls?.[0]?a.createElement("img",{src:e.thumbnail?.imageUrl||e.imageUrls?.[0],alt:e.name,className:"w-full h-full object-cover",onError:D=>{D.target.style.display="none"}}):a.createElement("div",{className:"w-full h-full flex items-center justify-center bg-linear-to-br from-gray-50 to-gray-100"},a.createElement(qr,{className:"h-12 w-12 text-gray-300"})),a.createElement("div",{className:"absolute top-2 right-2"},r?a.createElement("span",{className:"px-2.5 py-1 text-xs font-medium bg-white/90 text-gray-600 rounded-full shadow-sm animate-pulse"},"Loading..."):C?a.createElement("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm ${t.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"}`},t.isActive?"Poll Active":"Poll Closed"):a.createElement("span",{className:"px-2.5 py-1 text-xs font-semibold bg-yellow-500 text-white rounded-full shadow-sm"},"No Poll")),a.createElement("div",{className:"absolute top-2 left-2"},a.createElement("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm ${e.isLive?"bg-green-500 text-white":"bg-gray-500 text-white"}`},e.isLive?"Live":"Not Live"))),a.createElement("div",{className:"p-4 flex-1 flex flex-col"},a.createElement("div",{className:"mb-3"},a.createElement("h3",{className:"font-semibold text-gray-900 line-clamp-1 text-base",title:e.name},e.name),a.createElement("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap"},a.createElement("span",{className:`px-2 py-0.5 text-xs font-medium rounded-md ${Jde(e.category)}`},e.category),a.createElement("span",{className:"text-xs text-gray-500 flex items-center gap-1"},a.createElement(T,{className:"h-3 w-3"}),e.mode))),a.createElement("div",{className:"space-y-2 mb-4"},a.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600"},a.createElement(qr,{className:"h-4 w-4 text-gray-400 shrink-0"}),a.createElement("span",null,Zde(e.startDate))),C&&a.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600"},a.createElement(af,{className:"h-4 w-4 text-gray-400 shrink-0"}),a.createElement("span",null,t.questions?.length||0," question",t.questions?.length!==1?"s":""))),a.createElement("div",{className:"mt-auto pt-3 border-t border-gray-100"},C?a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("button",{onClick:()=>y(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",title:"View Poll"},a.createElement(Mr,{className:"h-4 w-4"}),"View"),a.createElement("button",{onClick:()=>p(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-blue-700 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors",title:"View Statistics"},a.createElement(ol,{className:"h-4 w-4"}),"Stats")),(l||i)&&a.createElement("div",{className:"flex items-center gap-2"},l&&a.createElement("button",{onClick:()=>g(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",title:"Edit Poll"},a.createElement($_,{className:"h-4 w-4"}),"Edit"),i&&a.createElement("button",{onClick:()=>h(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-red-200",title:"Delete Poll"},a.createElement(ur,{className:"h-4 w-4"}),"Delete")),l&&a.createElement("button",{onClick:()=>v(e,t),disabled:n,className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-amber-700 bg-amber-50 hover:bg-amber-100 rounded-lg transition-colors border border-amber-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Send push notification to enrolled users"},a.createElement(kh,{className:`h-4 w-4 ${n?"animate-pulse":""}`}),n?"Sending...":"Notify Users")):l&&a.createElement("button",{onClick:()=>u(e),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-gray-800 hover:bg-gray-900 rounded-lg transition-colors"},a.createElement(kr,{className:"h-4 w-4"}),"Create Poll"))))}function dD(e){return e?new Date(e).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"N/A"}function tme({isOpen:e,onClose:t,poll:r,event:n}){return r?a.createElement(jt,{isOpen:e,onClose:t,title:"Poll Details",size:"2xl"},a.createElement("div",{className:"space-y-6"},n&&a.createElement("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200"},a.createElement("div",{className:"flex items-start gap-3"},a.createElement(qr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.createElement("div",null,a.createElement("p",{className:"font-medium text-blue-900"},n.name),a.createElement("p",{className:"text-sm text-blue-700 mt-1"},n.category,"  ",n.mode)))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"},a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},a.createElement(js,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Status")),a.createElement("span",{className:`inline-flex px-2 py-1 text-sm font-medium rounded-full ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isActive?"Active":"Closed")),a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},a.createElement(af,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Questions")),a.createElement("p",{className:"text-lg font-bold text-gray-900"},r.questions?.length||0)),a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},a.createElement(ea,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Created")),a.createElement("p",{className:"text-sm text-gray-900"},dD(r.createdAt)))),a.createElement("div",{className:"space-y-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Questions & Options"),r.questions?.length===0?a.createElement("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg text-center"},a.createElement(af,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),a.createElement("p",{className:"text-gray-600 font-medium"},"No questions"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"This poll has no questions configured.")):r.questions?.map((l,i)=>a.createElement("div",{key:i,className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm"},a.createElement("div",{className:"flex items-start gap-3 mb-3"},a.createElement("span",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 text-gray-600 font-semibold text-sm rounded-lg"},i+1),a.createElement("h4",{className:"font-medium text-gray-900 pt-1"},l.questionText)),a.createElement("div",{className:"ml-11 space-y-2"},a.createElement("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2"},"Options (",l.options?.length||0,")"),l.options?.map((u,g)=>a.createElement("div",{key:g,className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg"},a.createElement("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center bg-white border border-gray-200 text-gray-500 text-xs font-medium rounded-full"},String.fromCharCode(65+g)),a.createElement("span",{className:"text-sm text-gray-700"},u))))))),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("p",{className:"text-xs text-gray-400"},"Poll ID: ",a.createElement("code",{className:"bg-gray-100 px-1 py-0.5 rounded"},r._id)),r.updatedAt&&r.updatedAt!==r.createdAt&&a.createElement("p",{className:"text-xs text-gray-400 mt-1"},"Last updated: ",dD(r.updatedAt))),a.createElement("div",{className:"flex justify-end pt-4 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Close")))):null}function rme({percentage:e,color:t="blue"}){const r={blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",orange:"bg-orange-500",pink:"bg-pink-500",cyan:"bg-cyan-500",indigo:"bg-indigo-500",amber:"bg-amber-500"};return a.createElement("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden"},a.createElement("div",{className:`h-full ${r[t]||r.blue} rounded-full transition-all duration-500 ease-out`,style:{width:`${Math.min(100,e)}%`}}))}const ame=e=>{const t=["blue","green","purple","orange","pink","cyan","indigo","amber"];return t[e%t.length]};function nme({isOpen:e,onClose:t,poll:r,stats:n,isLoading:l=!1,error:i=null,onFetchStats:u}){return w.useEffect(()=>{e&&r&&u&&(console.log("[PollStatsModal] Fetching stats for poll:",r._id),u(r._id))},[e,r,u]),r?a.createElement(jt,{isOpen:e,onClose:t,title:"Poll Statistics",size:"2xl"},a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("h3",{className:"font-semibold text-gray-900"},"Poll Overview"),a.createElement("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isActive?"Active":"Closed")),a.createElement("p",{className:"text-sm text-gray-600"},r.questions?.length||0," question(s)")),i&&a.createElement("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement("p",{className:"text-sm"},i)),l&&a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(ct,{className:"h-8 w-8 animate-spin text-gray-400"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading statistics...")),!l&&n&&a.createElement(a.Fragment,null,a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"},a.createElement("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"p-2 bg-blue-100 rounded-lg"},a.createElement(kl,{className:"h-5 w-5 text-blue-600"})),a.createElement("div",null,a.createElement("p",{className:"text-2xl font-bold text-blue-900"},n.totalSubmissions||0),a.createElement("p",{className:"text-sm text-blue-700"},"Total Submissions")))),a.createElement("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"p-2 bg-green-100 rounded-lg"},a.createElement(js,{className:"h-5 w-5 text-green-600"})),a.createElement("div",null,a.createElement("p",{className:"text-2xl font-bold text-green-900"},n.questions?.length||0),a.createElement("p",{className:"text-sm text-green-700"},"Questions")))),a.createElement("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"p-2 bg-purple-100 rounded-lg"},a.createElement(ol,{className:"h-5 w-5 text-purple-600"})),a.createElement("div",null,a.createElement("p",{className:"text-2xl font-bold text-purple-900"},n.questions?.reduce((g,h)=>g+(h.options?.length||0),0)||0),a.createElement("p",{className:"text-sm text-purple-700"},"Total Options"))))),n.totalSubmissions===0&&a.createElement("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg text-center"},a.createElement(ol,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),a.createElement("p",{className:"text-gray-600 font-medium"},"No submissions yet"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Statistics will appear once users start submitting their answers.")),n.totalSubmissions>0&&n.questions?.map((g,h)=>a.createElement("div",{key:h,className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm"},a.createElement("div",{className:"flex items-start gap-3 mb-4"},a.createElement("span",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 text-gray-600 font-semibold text-sm rounded-lg"},h+1),a.createElement("h4",{className:"font-medium text-gray-900 pt-1"},g.questionText)),a.createElement("div",{className:"space-y-3 ml-11"},g.options?.map((p,y)=>a.createElement("div",{key:y,className:"space-y-1"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-sm text-gray-700"},p.optionText),a.createElement("div",{className:"flex items-center gap-2"},a.createElement("span",{className:"text-sm font-medium text-gray-900"},p.count||0),a.createElement("span",{className:"text-sm text-gray-500"},"(",(p.percentage||0).toFixed(1),"%)"))),a.createElement(rme,{percentage:p.percentage||0,color:ame(y)}))))))),!l&&!n&&!i&&a.createElement("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg text-center"},a.createElement(ol,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),a.createElement("p",{className:"text-gray-600 font-medium"},"No statistics available"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Statistics could not be loaded for this poll.")),a.createElement("div",{className:"flex justify-end pt-4 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Close")))):null}function sme(){const{hasRole:e}=hn(),t=e(["SUPER_ADMIN","ADMIN"]),r=e(["SUPER_ADMIN","ADMIN"]),n=e(["SUPER_ADMIN","ADMIN"]),[l,i]=w.useState([]),[u,g]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:12}),[h,p]=w.useState(!1),[y,v]=w.useState(null),[C,T]=w.useState({}),[D,P]=w.useState({}),[k,R]=w.useState({}),[B,M]=w.useState(""),[G,F]=w.useState(!1),[U,L]=w.useState("all"),[V,j]=w.useState("grid"),[Y,H]=w.useState(!1),[q,le]=w.useState(!1),[ue,re]=w.useState(!1),[J,ae]=w.useState(!1),[pe,xe]=w.useState(!1),[ee,K]=w.useState(null),[te,ge]=w.useState(null),[oe,Ne]=w.useState(null),[ie,me]=w.useState(!1),[$e,ve]=w.useState(null),[We,nt]=w.useState(!1),[Be,Ee]=w.useState(null),[je,ce]=w.useState(null),qe=w.useRef(null),Se=w.useCallback(async(be=1)=>{p(!0),v(null);try{const Je={page:be,limit:u.limit,sortBy:"createdAt",sortOrder:"desc"};B.trim()&&(Je.search=B.trim()),console.log("[Polls] Fetching events with params:",Je);const st=await ks.getAll(Je);if(st.success){i(st.data.events||[]),g({currentPage:st.data.pagination?.currentPage||1,totalPages:st.data.pagination?.totalPages||0,totalCount:st.data.pagination?.totalCount||0,limit:st.data.pagination?.limit||12});const At=(st.data.events||[]).map(dr=>dr._id);rt(At)}else v(st.message||"Failed to fetch events"),console.error("[Polls] Failed to fetch events:",st.message)}catch(Je){v("An unexpected error occurred"),console.error("[Polls] Error fetching events:",Je)}finally{p(!1)}},[B,u.limit]),rt=w.useCallback(async be=>{const Je=be.map(async st=>{if(C[st]===void 0){P(At=>({...At,[st]:!0}));try{const At=await Iu.getByEventId(st);At.success?T(dr=>({...dr,[st]:At.data})):T(dr=>({...dr,[st]:null}))}catch(At){console.error(`[Polls] Error fetching poll for event ${st}:`,At),T(dr=>({...dr,[st]:null}))}finally{P(At=>({...At,[st]:!1}))}}});await Promise.all(Je)},[C]);w.useEffect(()=>{Se(1)},[]);const it=w.useCallback(be=>{M(be),qe.current&&clearTimeout(qe.current),qe.current=setTimeout(()=>{Se(1)},300)},[Se]),pt=w.useCallback(be=>{Se(be),window.scrollTo({top:0,behavior:"smooth"})},[Se]),Ke=w.useCallback(()=>{T({}),Se(u.currentPage)},[Se,u.currentPage]),lt=l.filter(be=>{if(U==="all")return!0;const Je=C[be._id]!==null&&C[be._id]!==void 0;return U==="with-poll"?Je:U==="without-poll"?!Je:!0}),Ue=w.useCallback(be=>{K(be),ge(null),Ee(null),H(!0),console.log("[Polls] Opening create modal for event:",be.name)},[]),mt=w.useCallback((be,Je)=>{K(be),ge(Je),Ee(null),le(!0),console.log("[Polls] Opening edit modal for poll:",Je._id)},[]),$t=w.useCallback((be,Je)=>{K(be),ge(Je),re(!0),console.log("[Polls] Opening details modal for poll:",Je._id)},[]),ir=w.useCallback((be,Je)=>{K(be),ge(Je),Ne(null),ve(null),ae(!0),console.log("[Polls] Opening stats modal for poll:",Je._id)},[]),Br=w.useCallback(async be=>{me(!0),ve(null);try{const Je=await Iu.getStats(be);Je.success?Ne(Je.data):ve(Je.message||"Failed to fetch statistics")}catch(Je){ve("An unexpected error occurred"),console.error("[Polls] Error fetching stats:",Je)}finally{me(!1)}},[]),ut=w.useCallback((be,Je)=>{K(be),ge(Je),xe(!0),console.log("[Polls] Opening delete dialog for poll:",Je._id)},[]),Tt=w.useCallback(async(be,Je)=>{if(Je?._id){R(st=>({...st,[Je._id]:!0})),ce(null),v(null);try{console.log("[Polls] Sending notification for poll:",Je._id);const st=await Iu.notifyUsers(Je._id);if(st.success){const{successCount:At,failureCount:dr,message:qa}=st.data||{};ce(qa||`Notification sent to ${At} user${At!==1?"s":""}${dr>0?` (${dr} failed)`:""}`),console.log("[Polls] Notification sent successfully")}else v(st.message||"Failed to send notification"),console.error("[Polls] Failed to send notification:",st.message)}catch(st){v("An unexpected error occurred while sending notification"),console.error("[Polls] Error sending notification:",st)}finally{R(st=>({...st,[Je._id]:!1}))}}},[]),Cr=w.useCallback(async be=>{nt(!0),Ee(null);try{console.log("[Polls] Creating poll:",be);const Je=await Iu.create(be);Je.success?(H(!1),T(st=>({...st,[be.eventId]:Je.data})),console.log("[Polls] Poll created successfully")):(Ee(Je.message||"Failed to create poll"),console.error("[Polls] Failed to create poll:",Je.message))}catch(Je){Ee("An unexpected error occurred"),console.error("[Polls] Error creating poll:",Je)}finally{nt(!1)}},[]),xr=w.useCallback(async be=>{if(te){nt(!0),Ee(null);try{console.log("[Polls] Updating poll:",te._id,be);const Je=await Iu.update(te._id,be);Je.success?(le(!1),ee&&T(st=>({...st,[ee._id]:Je.data})),K(null),ge(null),console.log("[Polls] Poll updated successfully")):(Ee(Je.message||"Failed to update poll"),console.error("[Polls] Failed to update poll:",Je.message))}catch(Je){Ee("An unexpected error occurred"),console.error("[Polls] Error updating poll:",Je)}finally{nt(!1)}}},[te,ee]),ia=w.useCallback(async()=>{if(te){nt(!0);try{console.log("[Polls] Deleting poll:",te._id);const be=await Iu.delete(te._id);be.success?(xe(!1),ee&&T(Je=>({...Je,[ee._id]:null})),K(null),ge(null),console.log("[Polls] Poll deleted successfully")):(v(be.message||"Failed to delete poll"),console.error("[Polls] Failed to delete poll:",be.message))}catch(be){v("An unexpected error occurred"),console.error("[Polls] Error deleting poll:",be)}finally{nt(!1)}}},[te,ee]),kt=w.useCallback(()=>v(null),[]);return a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Polls"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Create and manage polls for your events")),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("button",{onClick:Ke,disabled:h,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Refresh events and polls"},a.createElement($n,{className:`h-4 w-4 ${h?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"flex items-center bg-white border border-gray-300 rounded-lg overflow-hidden"},a.createElement("button",{onClick:()=>j("grid"),className:`p-2 transition-colors ${V==="grid"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"Grid view"},a.createElement(V_,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>j("list"),className:`p-2 transition-colors ${V==="list"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"List view"},a.createElement(H2,{className:"h-4 w-4"}))))),y&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Xt,{className:"h-5 w-5 shrink-0"}),a.createElement("p",{className:"flex-1"},y),a.createElement("button",{onClick:kt,className:"text-red-500 hover:text-red-700 font-medium"},"Dismiss")),je&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg"},a.createElement(kh,{className:"h-5 w-5 shrink-0"}),a.createElement("p",{className:"flex-1"},je),a.createElement("button",{onClick:()=>ce(null),className:"text-green-500 hover:text-green-700 font-medium"},"Dismiss")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row gap-4"},a.createElement("div",{className:"flex-1 relative"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",value:B,onChange:be=>it(be.target.value),placeholder:"Search events...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),B&&a.createElement("button",{onClick:()=>{M(""),Se(1)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},a.createElement(Gr,{className:"h-4 w-4"}))),a.createElement("button",{onClick:()=>F(!G),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${G||U!=="all"?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`},a.createElement(Bl,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),U!=="all"&&a.createElement("span",{className:"w-2 h-2 bg-white rounded-full"}))),G&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"flex flex-wrap items-center gap-3"},a.createElement("span",{className:"text-sm text-gray-500"},"Poll Status:"),a.createElement("div",{className:"flex gap-2"},[{value:"all",label:"All Events"},{value:"with-poll",label:"With Poll"},{value:"without-poll",label:"Without Poll"}].map(be=>a.createElement("button",{key:be.value,onClick:()=>L(be.value),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${U===be.value?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},be.label))),U!=="all"&&a.createElement("button",{onClick:()=>L("all"),className:"text-sm text-gray-500 hover:text-gray-700"},"Reset")))),h&&l.length===0?a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},[...Array(8)].map((be,Je)=>a.createElement("div",{key:Je,className:"bg-white rounded-xl border border-gray-200 overflow-hidden animate-pulse"},a.createElement("div",{className:"h-32 bg-gray-200"}),a.createElement("div",{className:"p-4 space-y-3"},a.createElement("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),a.createElement("div",{className:"h-8 bg-gray-200 rounded"}))))):lt.length===0?a.createElement("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center"},a.createElement("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center"},a.createElement(ta,{className:"h-8 w-8 text-gray-400"})),a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No events found"),a.createElement("p",{className:"text-gray-500 max-w-md mx-auto"},B||U!=="all"?"Try adjusting your search or filter criteria.":"Create an event first to add polls.")):V==="grid"?a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},lt.map(be=>a.createElement(eme,{key:be._id,event:be,poll:C[be._id],isLoadingPoll:D[be._id],isNotifying:k[C[be._id]?._id],canEdit:r,canDelete:n,onCreatePoll:Ue,onEditPoll:mt,onDeletePoll:ut,onViewStats:ir,onViewPoll:$t,onNotifyUsers:Tt}))):a.createElement("div",{className:"space-y-3"},lt.map(be=>a.createElement("div",{key:be._id,className:"bg-white rounded-xl border border-gray-200 p-4 flex items-center gap-4"},a.createElement("div",{className:"shrink-0 w-20 h-20 rounded-lg overflow-hidden bg-gray-100"},be.thumbnail?.imageUrl||be.imageUrls?.[0]?a.createElement("img",{src:be.thumbnail?.imageUrl||be.imageUrls?.[0],alt:be.name,className:"w-full h-full object-cover"}):a.createElement("div",{className:"w-full h-full flex items-center justify-center"},a.createElement("span",{className:"text-gray-300 text-2xl"},"E"))),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("h3",{className:"font-semibold text-gray-900 truncate"},be.name),a.createElement("p",{className:"text-sm text-gray-500"},be.category,"  ",be.mode),a.createElement("div",{className:"flex items-center gap-2 mt-1"},C[be._id]?a.createElement("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${C[be._id].isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},C[be._id].isActive?"Poll Active":"Poll Closed"):a.createElement("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-yellow-100 text-yellow-700"},"No Poll"))),a.createElement("div",{className:"flex items-center gap-2"},C[be._id]?a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>ir(be,C[be._id]),className:"px-3 py-1.5 text-sm text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors"},"Stats"),r&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>mt(be,C[be._id]),className:"px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors"},"Edit"),a.createElement("button",{onClick:()=>Tt(be,C[be._id]),disabled:k[C[be._id]?._id],className:"flex items-center gap-1 px-3 py-1.5 text-sm text-amber-600 bg-amber-50 hover:bg-amber-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Send push notification to enrolled users"},a.createElement(kh,{className:`h-4 w-4 ${k[C[be._id]?._id]?"animate-pulse":""}`}),k[C[be._id]?._id]?"Sending...":"Notify")),n&&a.createElement("button",{onClick:()=>ut(be,C[be._id]),className:"px-3 py-1.5 text-sm text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors"},"Delete")):t&&a.createElement("button",{onClick:()=>Ue(be),className:"px-3 py-1.5 text-sm text-white bg-gray-800 hover:bg-gray-900 rounded-lg transition-colors"},"Create Poll"))))),u.totalPages>1&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Rr,{currentPage:u.currentPage,totalPages:u.totalPages,totalItems:u.totalCount,itemsPerPage:u.limit,onPageChange:pt,itemLabel:"events"})),a.createElement(uD,{isOpen:Y,onClose:()=>{H(!1),K(null)},onSubmit:Cr,poll:null,event:ee,isLoading:We,serverError:Be}),a.createElement(uD,{isOpen:q,onClose:()=>{le(!1),K(null),ge(null)},onSubmit:xr,poll:te,event:ee,isLoading:We,serverError:Be}),a.createElement(tme,{isOpen:ue,onClose:()=>{re(!1),K(null),ge(null)},poll:te,event:ee}),a.createElement(nme,{isOpen:J,onClose:()=>{ae(!1),K(null),ge(null),Ne(null)},poll:te,stats:oe,isLoading:ie,error:$e,onFetchStats:Br}),a.createElement(za,{isOpen:pe,onClose:()=>{xe(!1),K(null),ge(null)},onConfirm:ia,title:"Delete Poll",message:`Are you sure you want to delete the poll for "${ee?.name}"? This will also delete all associated submissions. This action cannot be undone.`,confirmText:"Delete Poll",cancelText:"Cancel",variant:"danger",isLoading:We}))}const Ts={BASE:"/web/stories",STATS:"/web/stories/stats",TTL_OPTIONS:"/web/stories/ttl-options",REORDER:"/web/stories/reorder"},Ol={create:async e=>(console.log("[StoryService] Creating story"),Pe(ke.post(Ts.BASE,e))),getAll:async(e={})=>{console.log("[StoryService] Fetching stories:",e);const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.includeExpired!==void 0&&t.append("includeExpired",e.includeExpired);const r=`${Ts.BASE}?${t.toString()}`;return Pe(ke.get(r))},getById:async e=>(console.log("[StoryService] Fetching story:",e),Pe(ke.get(`${Ts.BASE}/${e}`))),update:async(e,t)=>(console.log("[StoryService] Updating story:",e),Pe(ke.put(`${Ts.BASE}/${e}`,t))),toggleActive:async e=>(console.log("[StoryService] Toggling story status:",e),Pe(ke.patch(`${Ts.BASE}/${e}/toggle`))),delete:async(e,t=!1)=>{console.log("[StoryService] Deleting story:",e);const r=t?`${Ts.BASE}/${e}?deleteMedia=true`:`${Ts.BASE}/${e}`;return Pe(ke.delete(r))},permanentDelete:async(e,t=!0)=>{console.log("[StoryService] Permanently deleting story:",e);const r=t?`${Ts.BASE}/${e}/permanent`:`${Ts.BASE}/${e}/permanent?deleteMedia=false`;return Pe(ke.delete(r))},reorder:async e=>(console.log("[StoryService] Reordering stories"),Pe(ke.put(Ts.REORDER,{order:e}))),getStats:async()=>(console.log("[StoryService] Fetching story stats"),Pe(ke.get(Ts.STATS))),getTtlOptions:async()=>(console.log("[StoryService] Fetching TTL options"),Pe(ke.get(Ts.TTL_OPTIONS)))},g9=[{value:"1_hour",label:"1 hour"},{value:"6_hours",label:"6 hours"},{value:"12_hours",label:"12 hours"},{value:"1_day",label:"1 day"},{value:"3_days",label:"3 days"},{value:"7_days",label:"7 days"},{value:"30_days",label:"30 days"},{value:"forever",label:"Forever"}],lme=[{value:"image",label:"Image"},{value:"video",label:"Video"}],ime=[{value:"createdAt",label:"Created Date"},{value:"displayOrder",label:"Display Order"},{value:"viewCount",label:"View Count"},{value:"expiresAt",label:"Expiry Date"}],mD={search:"",mediaType:"",isActive:"",includeExpired:!1,sortBy:"displayOrder",sortOrder:"asc"};function ome(e={}){const[t,r]=w.useState([]),[n,l]=w.useState({page:1,totalPages:0,total:0,limit:20}),[i,u]=w.useState({...mD,...e}),[g,h]=w.useState(!1),[p,y]=w.useState(null),[v,C]=w.useState(null),[T,D]=w.useState(!1),[P,k]=w.useState(g9),R=w.useRef(null),B=w.useCallback(async(ee=n.page)=>{console.log("[useStoriesManagement] Fetching stories"),h(!0),y(null);try{const K={page:ee,limit:n.limit,includeExpired:i.includeExpired},te=await Ol.getAll(K);if(te.success){let ge=te.data.stories||[];if(i.mediaType&&(ge=ge.filter(oe=>oe.mediaType===i.mediaType)),i.isActive!==""){const oe=i.isActive==="true";ge=ge.filter(Ne=>Ne.isActive===oe)}if(i.search){const oe=i.search.toLowerCase();ge=ge.filter(Ne=>Ne.title?.toLowerCase().includes(oe)||Ne.mediaType?.toLowerCase().includes(oe))}ge.sort((oe,Ne)=>{const ie=oe[i.sortBy],me=Ne[i.sortBy],$e=i.sortOrder==="asc"?1:-1;return typeof ie=="string"?ie.localeCompare(me)*$e:ie instanceof Date||i.sortBy.includes("At")?(new Date(ie)-new Date(me))*$e:((ie||0)-(me||0))*$e}),r(ge),l(oe=>({...oe,...te.data.pagination}))}else y(te.message),r([])}catch(K){console.error("[useStoriesManagement] Error fetching stories:",K),y("Failed to fetch stories"),r([])}finally{h(!1)}},[i,n.limit,n.page]),M=w.useCallback(async()=>{console.log("[useStoriesManagement] Fetching stats"),D(!0);try{const ee=await Ol.getStats();ee.success&&C(ee.data)}catch(ee){console.error("[useStoriesManagement] Error fetching stats:",ee)}finally{D(!1)}},[]),G=w.useCallback(async()=>{try{const ee=await Ol.getTtlOptions();ee.success&&ee.data.options&&k(ee.data.options)}catch(ee){console.error("[useStoriesManagement] Error fetching TTL options:",ee)}},[]),F=w.useCallback(async ee=>{try{const K=await Ol.getById(ee);return K.success?{success:!0,data:K.data}:{success:!1,error:K.message}}catch{return{success:!1,error:"Failed to fetch story details"}}},[]),U=w.useCallback(async ee=>{console.log("[useStoriesManagement] Creating story"),h(!0),y(null);try{const K=await Ol.create(ee);return K.success?(await B(1),await M(),{success:!0,data:K.data}):{success:!1,error:K.message,validationErrors:K.data?.errors}}catch{return{success:!1,error:"Failed to create story"}}finally{h(!1)}},[B,M]),L=w.useCallback(async(ee,K)=>{console.log("[useStoriesManagement] Updating story:",ee),h(!0),y(null);try{const te=await Ol.update(ee,K);return te.success?(r(ge=>ge.map(oe=>oe._id===ee?{...oe,...te.data}:oe)),{success:!0,data:te.data}):{success:!1,error:te.message,validationErrors:te.data?.errors}}catch{return{success:!1,error:"Failed to update story"}}finally{h(!1)}},[]),V=w.useCallback(async ee=>{console.log("[useStoriesManagement] Toggling story status:",ee);try{const K=await Ol.toggleActive(ee);return K.success?(r(te=>te.map(ge=>ge._id===ee?{...ge,isActive:K.data.isActive}:ge)),{success:!0,data:K.data}):{success:!1,error:K.message}}catch{return{success:!1,error:"Failed to toggle story status"}}},[]),j=w.useCallback(async(ee,K=!1)=>{console.log("[useStoriesManagement] Deleting story:",ee),h(!0),y(null);try{const te=await Ol.delete(ee,K);return te.success?(r(ge=>ge.filter(oe=>oe._id!==ee)),l(ge=>({...ge,total:ge.total-1,totalPages:Math.ceil((ge.total-1)/ge.limit)})),await M(),{success:!0}):{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to delete story"}}finally{h(!1)}},[M]),Y=w.useCallback(async(ee,K=!0)=>{console.log("[useStoriesManagement] Permanently deleting story:",ee),h(!0),y(null);try{const te=await Ol.permanentDelete(ee,K);return te.success?(r(ge=>ge.filter(oe=>oe._id!==ee)),l(ge=>({...ge,total:ge.total-1,totalPages:Math.ceil((ge.total-1)/ge.limit)})),await M(),{success:!0}):{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to permanently delete story"}}finally{h(!1)}},[M]),H=w.useCallback(async ee=>{console.log("[useStoriesManagement] Reordering stories");try{const K=await Ol.reorder(ee);return K.success?(r(te=>{const ge=new Map(ee.map(oe=>[oe.storyId,oe.displayOrder]));return[...te].map(oe=>({...oe,displayOrder:ge.get(oe._id)??oe.displayOrder})).sort((oe,Ne)=>oe.displayOrder-Ne.displayOrder)}),{success:!0}):{success:!1,error:K.message}}catch{return{success:!1,error:"Failed to reorder stories"}}},[]),q=w.useCallback(ee=>{u(K=>({...K,...ee}))},[]),le=w.useCallback(ee=>{R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{u(K=>({...K,search:ee}))},300)},[]),ue=w.useCallback(()=>{u({...mD,...e})},[e]),re=w.useCallback(ee=>{B(ee)},[B]),J=w.useCallback(ee=>{l(K=>({...K,limit:ee}))},[]),ae=w.useCallback(()=>{u(ee=>({...ee,includeExpired:!ee.includeExpired}))},[]),pe=w.useCallback(()=>{y(null)},[]),xe=w.useCallback(()=>{B(1),M()},[B,M]);return w.useEffect(()=>{B(1)},[i]),w.useEffect(()=>{M(),G()},[M,G]),w.useEffect(()=>()=>{R.current&&clearTimeout(R.current)},[]),{stories:t,pagination:n,filters:i,isLoading:g,error:p,stats:v,isLoadingStats:T,ttlOptions:P,fetchStories:B,fetchStats:M,getStoryById:F,createStory:U,updateStory:L,toggleStoryActive:V,deleteStory:j,permanentDeleteStory:Y,reorderStories:H,updateFilters:q,updateSearch:le,resetFilters:ue,toggleIncludeExpired:ae,changePage:re,changeLimit:J,clearError:pe,refresh:xe}}const fD=(e=null)=>({mediaUrl:e?.mediaUrl||"",mediaType:e?.mediaType||"image",title:e?.title||"",cloudinaryPublicId:e?.cloudinaryPublicId||"",ttl:e?.ttl||"1_day",displayOrder:e?.displayOrder??0,isActive:e?.isActive??!0}),cme=(e,t=!1)=>{const r={};if(e.mediaUrl?.trim()?/^https?:\/\/.+/.test(e.mediaUrl)||(r.mediaUrl="Invalid media URL"):r.mediaUrl="Media is required",e.mediaType?["image","video"].includes(e.mediaType)||(r.mediaType="Invalid media type"):r.mediaType="Media type is required",e.title&&e.title.length>500&&(r.title="Title must be 500 characters or less"),e.ttl||(r.ttl="Time to live is required"),e.displayOrder!==void 0&&e.displayOrder!==""){const n=parseInt(e.displayOrder,10);(isNaN(n)||n<0)&&(r.displayOrder="Display order must be a non-negative number")}return{isValid:Object.keys(r).length===0,errors:r}},ume=e=>e&&/\.(mp4|webm|ogg|mov|avi)(\?.*)?$/i.test(e)?"video":"image",dme=e=>{if(!e||!e.includes("cloudinary.com"))return"";const t=e.match(/\/upload\/(?:v\d+\/)?(.+?)(?:\.[^.]+)?$/);return t?t[1]:""};function gD({isOpen:e,onClose:t,onSubmit:r,story:n=null,ttlOptions:l=g9,isLoading:i=!1,serverError:u=null}){const g=!!n,[h,p]=w.useState(fD(n)),[y,v]=w.useState({});w.useEffect(()=>{e&&(p(fD(n)),v({}),console.log("[StoryForm] Form initialized:",{isEditMode:g,story:n?._id}))},[e,n]);const C=(R,B)=>{p(M=>({...M,[R]:B})),y[R]&&v(M=>{const G={...M};return delete G[R],G})},T=R=>{const B=ume(R),M=dme(R);p(G=>({...G,mediaUrl:R,mediaType:B,cloudinaryPublicId:M})),y.mediaUrl&&v(G=>{const F={...G};return delete F.mediaUrl,F})},D=()=>{p(R=>({...R,isActive:!R.isActive}))},P=async R=>{R.preventDefault();const B=cme(h,g);if(!B.isValid){v(B.errors),console.log("[StoryForm] Validation failed:",B.errors);return}const M={mediaUrl:h.mediaUrl.trim(),mediaType:h.mediaType,ttl:h.ttl,displayOrder:parseInt(h.displayOrder,10)||0};h.title?.trim()&&(M.title=h.title.trim()),h.cloudinaryPublicId&&(M.cloudinaryPublicId=h.cloudinaryPublicId),g&&(M.isActive=h.isActive),console.log("[StoryForm] Submitting:",{isEditMode:g,storyId:n?._id}),await r(M)},k=()=>{i||t()};return a.createElement(jt,{isOpen:e,onClose:k,title:g?"Edit Story":"Create Story",size:"xl",closeOnOverlayClick:!i},a.createElement("form",{onSubmit:P,className:"space-y-6"},u&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},u),a.createElement("div",null,a.createElement(il,{label:"Media",required:!0,value:h.mediaUrl,onUpload:T,folder:"stories",type:"any",maxSize:50*1024*1024,placeholder:"Upload image or video for story",error:y.mediaUrl,disabled:i,showUrlInput:!0})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Media Type ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("div",{className:"flex gap-3"},a.createElement("button",{type:"button",onClick:()=>C("mediaType","image"),disabled:i,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${h.mediaType==="image"?"border-gray-800 bg-gray-800 text-white":"border-gray-300 text-gray-600 hover:border-gray-400"} disabled:opacity-50`},a.createElement(Bc,{className:"h-5 w-5"}),a.createElement("span",{className:"font-medium"},"Image")),a.createElement("button",{type:"button",onClick:()=>C("mediaType","video"),disabled:i,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${h.mediaType==="video"?"border-gray-800 bg-gray-800 text-white":"border-gray-300 text-gray-600 hover:border-gray-400"} disabled:opacity-50`},a.createElement(yi,{className:"h-5 w-5"}),a.createElement("span",{className:"font-medium"},"Video"))),y.mediaType&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.mediaType)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Title / Caption",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("textarea",{value:h.title,onChange:R=>C("title",R.target.value),disabled:i,maxLength:500,rows:3,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none disabled:bg-gray-100 ${y.title?"border-red-500":"border-gray-300"}`,placeholder:"Add a caption for this story..."}),a.createElement("div",{className:"flex justify-between mt-1"},y.title?a.createElement("p",{className:"text-sm text-red-500"},y.title):a.createElement("span",null),a.createElement("span",{className:"text-xs text-gray-400"},h.title.length,"/500"))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},a.createElement(ea,{className:"inline h-4 w-4 mr-1"}),"Time to Live ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{value:h.ttl,onChange:R=>C("ttl",R.target.value),disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.ttl?"border-red-500":"border-gray-300"}`},l.map(R=>a.createElement("option",{key:R.value,value:R.value},R.label))),y.ttl&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.ttl)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},a.createElement(z2,{className:"inline h-4 w-4 mr-1"}),"Display Order"),a.createElement("input",{type:"number",value:h.displayOrder,onChange:R=>C("displayOrder",R.target.value),disabled:i,min:0,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.displayOrder?"border-red-500":"border-gray-300"}`,placeholder:"0"}),y.displayOrder&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.displayOrder),a.createElement("p",{className:"mt-1 text-xs text-gray-400"},"Lower numbers appear first"))),g&&a.createElement("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900"},"Story Status"),a.createElement("p",{className:"text-sm text-gray-500"},h.isActive?"Story is visible to users":"Story is hidden from users")),a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:h.isActive,onChange:D,disabled:i,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"}))),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:k,disabled:i,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},i&&a.createElement(ct,{className:"h-4 w-4 animate-spin"}),g?"Update Story":"Create Story"))))}function mme(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function fme(e){if(!e)return"N/A";const n=new Date(e)-new Date;if(n<0)return"Expired";const l=Math.floor(n/(1e3*60*60)),i=Math.floor(l/24);return i>0?`${i}d ${l%24}h left`:l>0?`${l}h left`:`${Math.floor(n/(1e3*60))}m left`}function gme(e){return{"1_hour":"1 hour","6_hours":"6 hours","12_hours":"12 hours","1_day":"1 day","3_days":"3 days","7_days":"7 days","30_days":"30 days",forever:"Forever"}[e]||e}function hme(e,t){return t==="forever"||!e?!1:new Date(e)<new Date}function pme({story:e,canEdit:t=!0,canDelete:r=!0,isToggling:n=!1,onView:l,onEdit:i,onDelete:u,onToggleActive:g,draggable:h=!1,dragHandleProps:p={}}){const y=hme(e.expiresAt,e.ttl),v=e.mediaType==="video";return a.createElement("div",{className:`bg-white rounded-xl border shadow-sm hover:shadow-md transition-all overflow-hidden flex flex-col ${y?"border-orange-200 bg-orange-50/30":"border-gray-200"}`},a.createElement("div",{className:"relative h-48 sm:h-56 bg-gradient-to-br from-gray-100 to-gray-200"},v?a.createElement("div",{className:"w-full h-full relative"},a.createElement("video",{src:e.mediaUrl,className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata",onError:C=>{C.target.style.display="none",C.target.nextElementSibling?.classList.remove("hidden")}}),a.createElement("div",{className:"hidden w-full h-full flex items-center justify-center bg-gray-100"},a.createElement(yi,{className:"h-12 w-12 text-gray-300"})),a.createElement("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20"},a.createElement("div",{className:"w-14 h-14 rounded-full bg-white/90 flex items-center justify-center shadow-lg"},a.createElement(q_,{className:"h-6 w-6 text-gray-800 ml-1"})))):a.createElement(a.Fragment,null,a.createElement("img",{src:e.mediaUrl,alt:e.title||"Story",className:"w-full h-full object-cover",onError:C=>{C.target.style.display="none",C.target.nextElementSibling?.classList.remove("hidden")}}),a.createElement("div",{className:"hidden w-full h-full flex items-center justify-center bg-gray-100"},a.createElement(Bc,{className:"h-12 w-12 text-gray-300"}))),h&&a.createElement("div",{...p,className:"absolute top-2 left-2 p-1.5 bg-white/90 rounded-lg shadow-sm cursor-grab active:cursor-grabbing"},a.createElement(Hp,{className:"h-4 w-4 text-gray-500"})),a.createElement("div",{className:"absolute top-2 right-2 flex flex-col gap-1"},a.createElement("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm ${e.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"}`},e.isActive?"Active":"Inactive"),y&&a.createElement("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm bg-orange-500 text-white flex items-center gap-1"},a.createElement($p,{className:"h-3 w-3"}),"Expired")),a.createElement("div",{className:"absolute bottom-2 left-2"},a.createElement("span",{className:"px-2.5 py-1 text-xs font-medium bg-black/60 text-white rounded-full flex items-center gap-1"},v?a.createElement(yi,{className:"h-3 w-3"}):a.createElement(Bc,{className:"h-3 w-3"}),e.mediaType)),a.createElement("div",{className:"absolute bottom-2 right-2"},a.createElement("span",{className:"px-2.5 py-1 text-xs font-medium bg-black/60 text-white rounded-full flex items-center gap-1"},a.createElement(Mr,{className:"h-3 w-3"}),e.viewCount||0))),a.createElement("div",{className:"p-4 flex-1 flex flex-col"},e.title&&a.createElement("h3",{className:"font-semibold text-gray-900 line-clamp-2 text-sm mb-2",title:e.title},e.title),a.createElement("div",{className:"space-y-1.5 mb-3 text-xs text-gray-500"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(ea,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}),a.createElement("span",null,"TTL: ",gme(e.ttl))),e.ttl!=="forever"&&e.expiresAt&&a.createElement("div",{className:"flex items-center gap-2"},a.createElement(ea,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}),a.createElement("span",{className:y?"text-orange-600 font-medium":""},y?"Expired":fme(e.expiresAt))),a.createElement("div",{className:"flex items-center gap-2 text-gray-400"},a.createElement("span",null,"Created: ",mme(e.createdAt))),a.createElement("div",{className:"flex items-center gap-2 text-gray-400"},a.createElement("span",null,"Order: #",e.displayOrder))),a.createElement("div",{className:"mt-auto pt-3 border-t border-gray-100 space-y-2"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("button",{onClick:()=>l(e),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",title:"View Story"},a.createElement(Mr,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"View")),t&&a.createElement("button",{onClick:()=>i(e),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",title:"Edit Story"},a.createElement($_,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"Edit")),r&&a.createElement("button",{onClick:()=>u(e),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-red-200",title:"Delete Story"},a.createElement(ur,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"Delete"))),t&&a.createElement("button",{onClick:()=>g(e),disabled:n,className:`w-full flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-lg transition-colors border disabled:opacity-50 ${e.isActive?"text-orange-600 bg-orange-50 hover:bg-orange-100 border-orange-200":"text-green-600 bg-green-50 hover:bg-green-100 border-green-200"}`,title:e.isActive?"Deactivate Story":"Activate Story"},e.isActive?a.createElement(a.Fragment,null,a.createElement(Ei,{className:"h-4 w-4"}),n?"Processing...":"Deactivate"):a.createElement(a.Fragment,null,a.createElement(Fl,{className:"h-4 w-4"}),n?"Processing...":"Activate")))))}function hD(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function yme(e){if(!e)return"N/A";const n=new Date(e)-new Date;if(n<0)return"Expired";const l=Math.floor(n/(1e3*60*60)),i=Math.floor(l/24);if(i>0)return`${i} day${i>1?"s":""} ${l%24} hour${l%24!==1?"s":""} remaining`;if(l>0)return`${l} hour${l!==1?"s":""} remaining`;const u=Math.floor(n/(1e3*60));return`${u} minute${u!==1?"s":""} remaining`}function xme(e){return{"1_hour":"1 hour","6_hours":"6 hours","12_hours":"12 hours","1_day":"1 day","3_days":"3 days","7_days":"7 days","30_days":"30 days",forever:"Forever"}[e]||e}function bme(e,t){return t==="forever"||!e?!1:new Date(e)<new Date}function ih({label:e,value:t,icon:r,variant:n="default"}){const l={default:"bg-gray-50 border-gray-200 text-gray-600",success:"bg-green-50 border-green-200 text-green-600",warning:"bg-orange-50 border-orange-200 text-orange-600",danger:"bg-red-50 border-red-200 text-red-600",info:"bg-blue-50 border-blue-200 text-blue-600"};return a.createElement("div",{className:`p-3 rounded-lg border ${l[n]}`},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(r,{className:"h-4 w-4"}),a.createElement("span",{className:"text-xs font-medium uppercase tracking-wide"},e)),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},t))}function vme({isOpen:e,onClose:t,story:r}){if(!r)return null;const n=bme(r.expiresAt,r.ttl),l=r.mediaType==="video";return a.createElement(jt,{isOpen:e,onClose:t,title:"Story Details",size:"2xl"},a.createElement("div",{className:"space-y-6"},n&&a.createElement("div",{className:"p-3 bg-orange-50 border border-orange-200 text-orange-700 rounded-lg flex items-center gap-2"},a.createElement($p,{className:"h-5 w-5 shrink-0"}),a.createElement("span",{className:"font-medium"},"This story has expired")),a.createElement("div",{className:"relative rounded-xl overflow-hidden bg-gray-100"},l?a.createElement("div",{className:"relative aspect-[9/16] sm:aspect-video max-h-96 mx-auto bg-black"},a.createElement("video",{src:r.mediaUrl,controls:!0,className:"w-full h-full object-contain",preload:"metadata"},"Your browser does not support the video tag.")):a.createElement("div",{className:"relative max-h-96 flex items-center justify-center bg-gray-900"},a.createElement("img",{src:r.mediaUrl,alt:r.title||"Story",className:"max-h-96 w-auto object-contain",onError:i=>{i.target.src="",i.target.alt="Failed to load image"}})),a.createElement("a",{href:r.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 p-2 bg-white/90 rounded-lg shadow-sm hover:bg-white transition-colors",title:"Open in new tab"},a.createElement(Ed,{className:"h-4 w-4 text-gray-600"}))),r.title&&a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("p",{className:"text-sm font-medium text-gray-500 mb-1"},"Caption"),a.createElement("p",{className:"text-gray-900 whitespace-pre-wrap"},r.title)),a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3"},a.createElement(ih,{label:"Status",value:r.isActive?"Active":"Inactive",icon:r.isActive?js:Sn,variant:r.isActive?"success":"default"}),a.createElement(ih,{label:"Views",value:r.viewCount||0,icon:Mr,variant:"info"}),a.createElement(ih,{label:"Type",value:r.mediaType,icon:l?yi:Bc,variant:"default"}),a.createElement(ih,{label:"Order",value:`#${r.displayOrder}`,icon:z2,variant:"default"})),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},a.createElement(ea,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Time to Live")),a.createElement("p",{className:"text-gray-900 font-semibold"},xme(r.ttl))),a.createElement("div",{className:`p-4 rounded-lg border ${n?"bg-orange-50 border-orange-200":"bg-gray-50 border-gray-200"}`},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},a.createElement(ea,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},n?"Expired":"Expires")),a.createElement("p",{className:`font-semibold ${n?"text-orange-700":"text-gray-900"}`},r.ttl==="forever"?"Never":n?hD(r.expiresAt):yme(r.expiresAt))),a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},a.createElement(qr,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Created")),a.createElement("p",{className:"text-gray-900 font-semibold"},hD(r.createdAt))),r.createdBy&&a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},a.createElement(ds,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Created By")),a.createElement("p",{className:"text-gray-900 font-semibold"},typeof r.createdBy=="object"?r.createdBy.name||r.createdBy.username:r.createdBy))),a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("p",{className:"text-sm font-medium text-gray-500 mb-3"},"Technical Details"),a.createElement("div",{className:"space-y-2 text-sm"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1"},a.createElement("span",{className:"text-gray-500 shrink-0 sm:w-32"},"Story ID:"),a.createElement("code",{className:"text-gray-700 bg-gray-200 px-2 py-0.5 rounded text-xs break-all"},r._id)),r.cloudinaryPublicId&&a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1"},a.createElement("span",{className:"text-gray-500 shrink-0 sm:w-32"},"Public ID:"),a.createElement("code",{className:"text-gray-700 bg-gray-200 px-2 py-0.5 rounded text-xs break-all"},r.cloudinaryPublicId)),a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1"},a.createElement("span",{className:"text-gray-500 shrink-0 sm:w-32"},"Media URL:"),a.createElement("a",{href:r.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-xs break-all"},r.mediaUrl)))),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Close"))))}function Eme({filters:e,onFilterChange:t,onSearchChange:r,onReset:n,includeExpired:l=!1,onToggleExpired:i,disabled:u=!1}){const[g,h]=w.useState(!1),p=e.search||e.mediaType||e.isActive!==""||l||e.sortBy!=="displayOrder"||e.sortOrder!=="asc",y=P=>{r(P.target.value)},v=P=>{t({mediaType:P===e.mediaType?"":P})},C=P=>{t({isActive:P===e.isActive?"":P})},T=(P,k)=>{t({[P]:k})},D=()=>{n(),h(!1)};return a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row gap-3"},a.createElement("div",{className:"flex-1 relative"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",value:e.search,onChange:y,disabled:u,placeholder:"Search stories by title...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:opacity-50 disabled:bg-gray-100"}),e.search&&a.createElement("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600"},a.createElement(Gr,{className:"h-4 w-4"}))),a.createElement("button",{onClick:()=>h(!g),disabled:u,className:`flex items-center justify-center gap-2 px-4 py-2.5 border rounded-lg transition-colors whitespace-nowrap ${g||p?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"} disabled:opacity-50`},a.createElement(Bl,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"Filters"),p&&a.createElement("span",{className:"w-2 h-2 rounded-full bg-white"}))),g&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Media Type"),a.createElement("div",{className:"flex flex-wrap gap-2"},lme.map(P=>a.createElement("button",{key:P.value,onClick:()=>v(P.value),disabled:u,className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg transition-colors ${e.mediaType===P.value?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"} disabled:opacity-50`},P.value==="image"?a.createElement(Bc,{className:"h-3.5 w-3.5"}):a.createElement(yi,{className:"h-3.5 w-3.5"}),P.label)))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Status"),a.createElement("div",{className:"flex flex-wrap gap-2"},a.createElement("button",{onClick:()=>C("true"),disabled:u,className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${e.isActive==="true"?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"} disabled:opacity-50`},"Active"),a.createElement("button",{onClick:()=>C("false"),disabled:u,className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${e.isActive==="false"?"bg-gray-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"} disabled:opacity-50`},"Inactive"))),a.createElement("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(ea,{className:"h-4 w-4 text-gray-500"}),a.createElement("span",{className:"text-sm font-medium text-gray-700"},"Include Expired Stories")),a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:l,onChange:i,disabled:u,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800 peer-disabled:opacity-50"}))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},a.createElement($z,{className:"inline h-4 w-4 mr-1"}),"Sort By"),a.createElement("select",{value:e.sortBy,onChange:P=>T("sortBy",P.target.value),disabled:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:opacity-50"},ime.map(P=>a.createElement("option",{key:P.value,value:P.value},P.label)))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Order"),a.createElement("select",{value:e.sortOrder,onChange:P=>T("sortOrder",P.target.value),disabled:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:opacity-50"},a.createElement("option",{value:"asc"},"Ascending"),a.createElement("option",{value:"desc"},"Descending")))),p&&a.createElement("button",{onClick:D,disabled:u,className:"flex items-center gap-2 text-sm text-gray-500 hover:text-gray-700 transition-colors disabled:opacity-50"},a.createElement(Gr,{className:"h-4 w-4"}),"Reset all filters")))}function Vv({label:e,value:t,icon:r,color:n="gray",description:l}){const i={gray:"bg-gray-50 border-gray-200 text-gray-600",blue:"bg-blue-50 border-blue-200 text-blue-600",green:"bg-green-50 border-green-200 text-green-600",orange:"bg-orange-50 border-orange-200 text-orange-600",red:"bg-red-50 border-red-200 text-red-600",purple:"bg-purple-50 border-purple-200 text-purple-600"};return a.createElement("div",{className:`p-4 rounded-xl border ${i[n]}`},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:`p-2 rounded-lg ${i[n]}`},a.createElement(r,{className:"h-5 w-5"})),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500"},e),a.createElement("p",{className:"text-2xl font-bold text-gray-900"},t),l&&a.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},l))))}function wme({isOpen:e,onClose:t,stats:r,isLoading:n=!1}){return a.createElement(jt,{isOpen:e,onClose:t,title:"Story Statistics",size:"xl"},n?a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(ct,{className:"h-8 w-8 text-gray-400 animate-spin mb-3"}),a.createElement("p",{className:"text-gray-500"},"Loading statistics...")):r?a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"p-4 bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl text-white"},a.createElement("div",{className:"flex items-center gap-3 mb-4"},a.createElement(ol,{className:"h-6 w-6"}),a.createElement("h3",{className:"text-lg font-semibold"},"Overview")),a.createElement("div",{className:"grid grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("p",{className:"text-gray-400 text-sm"},"Total Stories"),a.createElement("p",{className:"text-3xl font-bold"},r.totalStories||0)),a.createElement("div",null,a.createElement("p",{className:"text-gray-400 text-sm"},"Total Views"),a.createElement("p",{className:"text-3xl font-bold"},r.totalViews||0)))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},a.createElement(Vv,{label:"Active Stories",value:r.activeStories||0,icon:js,color:"green",description:"Currently visible to users"}),a.createElement(Vv,{label:"Inactive Stories",value:r.inactiveStories||0,icon:Sn,color:"gray",description:"Hidden from users"}),a.createElement(Vv,{label:"Expired Stories",value:r.expiredStories||0,icon:ea,color:"orange",description:"Past their TTL"})),a.createElement("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-xl"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"p-2 bg-purple-100 rounded-lg"},a.createElement(Y_,{className:"h-5 w-5 text-purple-600"})),a.createElement("div",null,a.createElement("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500"},"Average Views per Story"),a.createElement("p",{className:"text-2xl font-bold text-gray-900"},r.averageViews?r.averageViews.toFixed(1):"0")))),a.createElement("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-200"},a.createElement("h4",{className:"font-semibold text-gray-900 mb-3"},"Summary"),a.createElement("ul",{className:"space-y-2 text-sm text-gray-600"},a.createElement("li",{className:"flex items-center gap-2"},a.createElement("span",{className:"w-2 h-2 rounded-full bg-green-500"}),r.activeStories||0," stories are currently active and visible"),a.createElement("li",{className:"flex items-center gap-2"},a.createElement("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),r.expiredStories||0," stories have expired based on their TTL"),a.createElement("li",{className:"flex items-center gap-2"},a.createElement("span",{className:"w-2 h-2 rounded-full bg-gray-500"}),r.inactiveStories||0," stories are manually deactivated"),a.createElement("li",{className:"flex items-center gap-2"},a.createElement("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Stories have been viewed ",r.totalViews||0," times in total")))):a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(ol,{className:"h-12 w-12 text-gray-300 mb-3"}),a.createElement("p",{className:"text-gray-500"},"No statistics available")),a.createElement("div",{className:"pt-4 mt-6 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Close")))}function Nme(){const{hasRole:e}=hn(),t=e(["SUPER_ADMIN","ADMIN"]),r=e(["SUPER_ADMIN","ADMIN"]),n=e(["SUPER_ADMIN","ADMIN"]),{stories:l,pagination:i,filters:u,isLoading:g,error:h,stats:p,isLoadingStats:y,ttlOptions:v,createStory:C,updateStory:T,toggleStoryActive:D,deleteStory:P,updateFilters:k,updateSearch:R,resetFilters:B,toggleIncludeExpired:M,changePage:G,clearError:F,refresh:U}=ome(),[L,V]=w.useState("grid"),[j,Y]=w.useState(!1),[H,q]=w.useState(!1),[le,ue]=w.useState(!1),[re,J]=w.useState(!1),[ae,pe]=w.useState(!1),[xe,ee]=w.useState(null),[K,te]=w.useState(!1),[ge,oe]=w.useState(!1),[Ne,ie]=w.useState(null),[me,$e]=w.useState({}),[ve,We]=w.useState(null),nt=w.useCallback(()=>{ee(null),ie(null),Y(!0),console.log("[Stories] Opening create modal")},[]),Be=w.useCallback(lt=>{ee(lt),ie(null),q(!0),console.log("[Stories] Opening edit modal for story:",lt._id)},[]),Ee=w.useCallback(lt=>{ee(lt),ue(!0),console.log("[Stories] Opening details modal for story:",lt._id)},[]),je=w.useCallback(()=>{J(!0),console.log("[Stories] Opening stats modal")},[]),ce=w.useCallback(lt=>{ee(lt),te(!1),pe(!0),console.log("[Stories] Opening delete dialog for story:",lt._id)},[]),qe=w.useCallback(async lt=>{$e(Ue=>({...Ue,[lt._id]:!0}));try{const Ue=await D(lt._id);Ue.success&&(We(`Story ${Ue.data.isActive?"activated":"deactivated"} successfully`),setTimeout(()=>We(null),3e3))}finally{$e(Ue=>({...Ue,[lt._id]:!1}))}},[D]),Se=w.useCallback(async lt=>{oe(!0),ie(null);try{console.log("[Stories] Creating story");const Ue=await C(lt);Ue.success?(Y(!1),We("Story created successfully"),setTimeout(()=>We(null),3e3),console.log("[Stories] Story created successfully")):(ie(Ue.error||"Failed to create story"),console.error("[Stories] Failed to create story:",Ue.error))}catch(Ue){ie("An unexpected error occurred"),console.error("[Stories] Error creating story:",Ue)}finally{oe(!1)}},[C]),rt=w.useCallback(async lt=>{if(xe){oe(!0),ie(null);try{console.log("[Stories] Updating story:",xe._id);const Ue=await T(xe._id,lt);Ue.success?(q(!1),ee(null),We("Story updated successfully"),setTimeout(()=>We(null),3e3),console.log("[Stories] Story updated successfully")):(ie(Ue.error||"Failed to update story"),console.error("[Stories] Failed to update story:",Ue.error))}catch(Ue){ie("An unexpected error occurred"),console.error("[Stories] Error updating story:",Ue)}finally{oe(!1)}}},[xe,T]),it=w.useCallback(async()=>{if(xe){oe(!0);try{console.log("[Stories] Deleting story:",xe._id);const lt=await P(xe._id,K);lt.success?(pe(!1),ee(null),We("Story deleted successfully"),setTimeout(()=>We(null),3e3),console.log("[Stories] Story deleted successfully")):console.error("[Stories] Failed to delete story:",lt.error)}catch(lt){console.error("[Stories] Error deleting story:",lt)}finally{oe(!1)}}},[xe,K,P]),pt=w.useCallback(lt=>{G(lt),window.scrollTo({top:0,behavior:"smooth"})},[G]),Ke=w.useCallback(()=>{U(),console.log("[Stories] Refreshing stories")},[U]);return a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Stories"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Upload and manage stories visible to all users")),a.createElement("div",{className:"flex items-center gap-3 flex-wrap"},a.createElement("button",{onClick:je,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",title:"View statistics"},a.createElement(ol,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"Stats")),a.createElement("button",{onClick:Ke,disabled:g,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Refresh stories"},a.createElement($n,{className:`h-4 w-4 ${g?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"flex items-center bg-white border border-gray-300 rounded-lg overflow-hidden"},a.createElement("button",{onClick:()=>V("grid"),className:`p-2 transition-colors ${L==="grid"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"Grid view"},a.createElement(V_,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>V("list"),className:`p-2 transition-colors ${L==="list"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"List view"},a.createElement(H2,{className:"h-4 w-4"}))),t&&a.createElement("button",{onClick:nt,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},a.createElement(kr,{className:"h-4 w-4"}),a.createElement("span",null,"New Story")))),h&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Xt,{className:"h-5 w-5 shrink-0"}),a.createElement("p",{className:"flex-1"},h),a.createElement("button",{onClick:F,className:"text-red-500 hover:text-red-700 font-medium"},"Dismiss")),ve&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg"},a.createElement(js,{className:"h-5 w-5 shrink-0"}),a.createElement("p",{className:"flex-1"},ve),a.createElement("button",{onClick:()=>We(null),className:"text-green-500 hover:text-green-700 font-medium"},"Dismiss")),a.createElement(Eme,{filters:u,onFilterChange:k,onSearchChange:R,onReset:B,includeExpired:u.includeExpired,onToggleExpired:M,disabled:g}),g&&l.length===0?a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},[...Array(8)].map((lt,Ue)=>a.createElement("div",{key:Ue,className:"bg-white rounded-xl border border-gray-200 overflow-hidden animate-pulse"},a.createElement("div",{className:"h-48 bg-gray-200"}),a.createElement("div",{className:"p-4 space-y-3"},a.createElement("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),a.createElement("div",{className:"h-3 bg-gray-200 rounded w-2/3"}),a.createElement("div",{className:"h-8 bg-gray-200 rounded"}))))):l.length===0?a.createElement("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center"},a.createElement("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center"},a.createElement(Bc,{className:"h-8 w-8 text-gray-400"})),a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No stories found"),a.createElement("p",{className:"text-gray-500 max-w-md mx-auto mb-6"},u.search||u.mediaType||u.isActive!==""||u.includeExpired?"Try adjusting your search or filter criteria.":"Create your first story to get started."),t&&!u.search&&a.createElement("button",{onClick:nt,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},a.createElement(kr,{className:"h-4 w-4"}),"Create Story")):L==="grid"?a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},l.map(lt=>a.createElement(pme,{key:lt._id,story:lt,canEdit:r,canDelete:n,isToggling:me[lt._id],onView:Ee,onEdit:Be,onDelete:ce,onToggleActive:qe}))):a.createElement("div",{className:"space-y-3"},l.map(lt=>a.createElement("div",{key:lt._id,className:"bg-white rounded-xl border border-gray-200 p-4 flex flex-col sm:flex-row items-start sm:items-center gap-4"},a.createElement("div",{className:"shrink-0 w-full sm:w-24 h-32 sm:h-24 rounded-lg overflow-hidden bg-gray-100 relative"},lt.mediaType==="video"?a.createElement("video",{src:lt.mediaUrl,className:"w-full h-full object-cover",muted:!0,preload:"metadata"}):a.createElement("img",{src:lt.mediaUrl,alt:lt.title||"Story",className:"w-full h-full object-cover"}),a.createElement("span",{className:`absolute top-2 right-2 px-2 py-0.5 text-xs font-medium rounded-full ${lt.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},lt.isActive?"Active":"Inactive")),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("h3",{className:"font-semibold text-gray-900 truncate"},lt.title||"Untitled Story"),a.createElement("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-sm text-gray-500"},a.createElement("span",{className:"capitalize"},lt.mediaType),a.createElement("span",null,"TTL: ",lt.ttl?.replace("_"," ")),a.createElement("span",null,lt.viewCount||0," views"))),a.createElement("div",{className:"flex items-center gap-2 w-full sm:w-auto"},a.createElement("button",{onClick:()=>Ee(lt),className:"flex-1 sm:flex-none px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors"},"View"),r&&a.createElement("button",{onClick:()=>Be(lt),className:"flex-1 sm:flex-none px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors"},"Edit"),n&&a.createElement("button",{onClick:()=>ce(lt),className:"flex-1 sm:flex-none px-3 py-1.5 text-sm text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors"},"Delete"))))),i.totalPages>1&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Rr,{currentPage:i.page,totalPages:i.totalPages,totalItems:i.total,itemsPerPage:i.limit,onPageChange:pt,itemLabel:"stories"})),a.createElement(gD,{isOpen:j,onClose:()=>{Y(!1),ie(null)},onSubmit:Se,story:null,ttlOptions:v,isLoading:ge,serverError:Ne}),a.createElement(gD,{isOpen:H,onClose:()=>{q(!1),ee(null),ie(null)},onSubmit:rt,story:xe,ttlOptions:v,isLoading:ge,serverError:Ne}),a.createElement(vme,{isOpen:le,onClose:()=>{ue(!1),ee(null)},story:xe}),a.createElement(wme,{isOpen:re,onClose:()=>J(!1),stats:p,isLoading:y}),a.createElement(za,{isOpen:ae,onClose:()=>{pe(!1),ee(null),te(!1)},onConfirm:it,title:"Delete Story",message:a.createElement("div",{className:"space-y-3"},a.createElement("p",null,"Are you sure you want to delete this story? This action cannot be undone."),a.createElement("label",{className:"flex items-center gap-2 text-sm"},a.createElement("input",{type:"checkbox",checked:K,onChange:lt=>te(lt.target.checked),className:"rounded border-gray-300"}),a.createElement("span",null,"Also delete media from cloud storage"))),confirmText:"Delete Story",cancelText:"Cancel",variant:"danger",isLoading:ge}))}var dt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(dt||(dt={}));var pD=new Map([[dt.QR_CODE,"QR_CODE"],[dt.AZTEC,"AZTEC"],[dt.CODABAR,"CODABAR"],[dt.CODE_39,"CODE_39"],[dt.CODE_93,"CODE_93"],[dt.CODE_128,"CODE_128"],[dt.DATA_MATRIX,"DATA_MATRIX"],[dt.MAXICODE,"MAXICODE"],[dt.ITF,"ITF"],[dt.EAN_13,"EAN_13"],[dt.EAN_8,"EAN_8"],[dt.PDF_417,"PDF_417"],[dt.RSS_14,"RSS_14"],[dt.RSS_EXPANDED,"RSS_EXPANDED"],[dt.UPC_A,"UPC_A"],[dt.UPC_E,"UPC_E"],[dt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),yD;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(yD||(yD={}));function Sme(e){return Object.values(dt).includes(e)}var kp;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(kp||(kp={}));var Cme=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[kp.SCAN_TYPE_CAMERA,kp.SCAN_TYPE_FILE],e})(),h9=(function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!pD.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,pD.get(t))},e})(),xD=(function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e})(),A2;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(A2||(A2={}));var Ame=(function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:A2.UNKWOWN_ERROR}},e})(),Tme=(function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e})();function ui(e){return typeof e>"u"||e===null}var Gu=(function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),p9=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var n=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(l),u=Object.keys(t),g=0,h=u;g<h.length;g++){var p=h[g];if(i.has(p))return r.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},e})(),Xm={exports:{}},Ome=Xm.exports,bD;function Dme(){return bD||(bD=1,(function(e,t){(function(r,n){n(t)})(Ome,(function(r){function n(X){return X==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,o){X.__proto__=o}||function(X,o){for(var d in o)o.hasOwnProperty(d)&&(X[d]=o[d])};function i(X,o){l(X,o);function d(){this.constructor=X}X.prototype=o===null?Object.create(o):(d.prototype=o.prototype,new d)}function u(X,o){var d=Object.setPrototypeOf;d?d(X,o):X.__proto__=o}function g(X,o){o===void 0&&(o=X.constructor);var d=Error.captureStackTrace;d&&d(X,o)}var h=(function(X){i(o,X);function o(d){var m=this.constructor,x=X.call(this,d)||this;return Object.defineProperty(x,"name",{value:m.name,enumerable:!1}),u(x,m.prototype),g(x),x}return o})(Error);class p extends h{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}p.kind="Exception";class y extends p{}y.kind="ArgumentException";class v extends p{}v.kind="IllegalArgumentException";class C{constructor(o){if(this.binarizer=o,o===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,d){return this.binarizer.getBlackRow(o,d)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,d,m,x){const b=this.binarizer.getLuminanceSource().crop(o,d,m,x);return new C(this.binarizer.createBinarizer(b))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new C(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new C(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends p{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class D{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class P{static arraycopy(o,d,m,x,b){for(;b--;)m[x++]=o[d++]}static currentTimeMillis(){return Date.now()}}class k extends p{}k.kind="IndexOutOfBoundsException";class R extends k{constructor(o=void 0,d=void 0){super(d),this.index=o,this.message=d}}R.kind="ArrayIndexOutOfBoundsException";class B{static fill(o,d){for(let m=0,x=o.length;m<x;m++)o[m]=d}static fillWithin(o,d,m,x){B.rangeCheck(o.length,d,m);for(let b=d;b<m;b++)o[b]=x}static rangeCheck(o,d,m){if(d>m)throw new v("fromIndex("+d+") > toIndex("+m+")");if(d<0)throw new R(d);if(m>o)throw new R(m)}static asList(...o){return o}static create(o,d,m){return Array.from({length:o}).map(b=>Array.from({length:d}).fill(m))}static createInt32Array(o,d,m){return Array.from({length:o}).map(b=>Int32Array.from({length:d}).fill(m))}static equals(o,d){if(!o||!d||!o.length||!d.length||o.length!==d.length)return!1;for(let m=0,x=o.length;m<x;m++)if(o[m]!==d[m])return!1;return!0}static hashCode(o){if(o===null)return 0;let d=1;for(const m of o)d=31*d+m;return d}static fillUint8Array(o,d){for(let m=0;m!==o.length;m++)o[m]=d}static copyOf(o,d){return o.slice(0,d)}static copyOfUint8Array(o,d){if(o.length<=d){const m=new Uint8Array(d);return m.set(o),m}return o.slice(0,d)}static copyOfRange(o,d,m){const x=m-d,b=new Int32Array(x);return P.arraycopy(o,d,b,0,x),b}static binarySearch(o,d,m){m===void 0&&(m=B.numberComparator);let x=0,b=o.length-1;for(;x<=b;){const N=b+x>>1,S=m(d,o[N]);if(S>0)x=N+1;else if(S<0)b=N-1;else return N}return-x-1}static numberComparator(o,d){return o-d}}class M{static numberOfTrailingZeros(o){let d;if(o===0)return 32;let m=31;return d=o<<16,d!==0&&(m-=16,o=d),d=o<<8,d!==0&&(m-=8,o=d),d=o<<4,d!==0&&(m-=4,o=d),d=o<<2,d!==0&&(m-=2,o=d),m-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let d=1;return o>>>16||(d+=16,o<<=16),o>>>24||(d+=8,o<<=8),o>>>28||(d+=4,o<<=4),o>>>30||(d+=2,o<<=2),d-=o>>>31,d}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,d){return Math.trunc(o/d)}static parseInt(o,d=void 0){return parseInt(o,d)}}M.MIN_VALUE_32_BITS=-2147483648,M.MAX_VALUE=Number.MAX_SAFE_INTEGER;class G{constructor(o,d){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,d==null?this.bits=G.makeArray(o):this.bits=d)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){const d=G.makeArray(o);P.arraycopy(this.bits,0,d,0,this.bits.length),this.bits=d}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){const d=this.size;if(o>=d)return d;const m=this.bits;let x=Math.floor(o/32),b=m[x];b&=~((1<<(o&31))-1);const N=m.length;for(;b===0;){if(++x===N)return d;b=m[x]}const S=x*32+M.numberOfTrailingZeros(b);return S>d?d:S}getNextUnset(o){const d=this.size;if(o>=d)return d;const m=this.bits;let x=Math.floor(o/32),b=~m[x];b&=~((1<<(o&31))-1);const N=m.length;for(;b===0;){if(++x===N)return d;b=~m[x]}const S=x*32+M.numberOfTrailingZeros(b);return S>d?d:S}setBulk(o,d){this.bits[Math.floor(o/32)]=d}setRange(o,d){if(d<o||o<0||d>this.size)throw new v;if(d===o)return;d--;const m=Math.floor(o/32),x=Math.floor(d/32),b=this.bits;for(let N=m;N<=x;N++){const S=N>m?0:o&31,I=(2<<(N<x?31:d&31))-(1<<S);b[N]|=I}}clear(){const o=this.bits.length,d=this.bits;for(let m=0;m<o;m++)d[m]=0}isRange(o,d,m){if(d<o||o<0||d>this.size)throw new v;if(d===o)return!0;d--;const x=Math.floor(o/32),b=Math.floor(d/32),N=this.bits;for(let S=x;S<=b;S++){const O=S>x?0:o&31,z=(2<<(S<b?31:d&31))-(1<<O)&4294967295;if((N[S]&z)!==(m?z:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,d){if(d<0||d>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+d);for(let m=d;m>0;m--)this.appendBit((o>>m-1&1)===1)}appendBitArray(o){const d=o.size;this.ensureCapacity(this.size+d);for(let m=0;m<d;m++)this.appendBit(o.get(m))}xor(o){if(this.size!==o.size)throw new v("Sizes don't match");const d=this.bits;for(let m=0,x=d.length;m<x;m++)d[m]^=o.bits[m]}toBytes(o,d,m,x){for(let b=0;b<x;b++){let N=0;for(let S=0;S<8;S++)this.get(o)&&(N|=1<<7-S),o++;d[m+b]=N}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),d=Math.floor((this.size-1)/32),m=d+1,x=this.bits;for(let b=0;b<m;b++){let N=x[b];N=N>>1&1431655765|(N&1431655765)<<1,N=N>>2&858993459|(N&858993459)<<2,N=N>>4&252645135|(N&252645135)<<4,N=N>>8&16711935|(N&16711935)<<8,N=N>>16&65535|(N&65535)<<16,o[d-b]=N}if(this.size!==m*32){const b=m*32-this.size;let N=o[0]>>>b;for(let S=1;S<m;S++){const O=o[S];N|=O<<32-b,o[S-1]=N,N=O>>>b}o[m-1]=N}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof G))return!1;const d=o;return this.size===d.size&&B.equals(this.bits,d.bits)}hashCode(){return 31*this.size+B.hashCode(this.bits)}toString(){let o="";for(let d=0,m=this.size;d<m;d++)(d&7)===0&&(o+=" "),o+=this.get(d)?"X":".";return o}clone(){return new G(this.size,this.bits.slice())}}var F;(function(X){X[X.OTHER=0]="OTHER",X[X.PURE_BARCODE=1]="PURE_BARCODE",X[X.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",X[X.TRY_HARDER=3]="TRY_HARDER",X[X.CHARACTER_SET=4]="CHARACTER_SET",X[X.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",X[X.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",X[X.ASSUME_GS1=7]="ASSUME_GS1",X[X.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",X[X.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",X[X.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(F||(F={}));var U=F;class L extends p{static getFormatInstance(){return new L}}L.kind="FormatException";var V;(function(X){X[X.Cp437=0]="Cp437",X[X.ISO8859_1=1]="ISO8859_1",X[X.ISO8859_2=2]="ISO8859_2",X[X.ISO8859_3=3]="ISO8859_3",X[X.ISO8859_4=4]="ISO8859_4",X[X.ISO8859_5=5]="ISO8859_5",X[X.ISO8859_6=6]="ISO8859_6",X[X.ISO8859_7=7]="ISO8859_7",X[X.ISO8859_8=8]="ISO8859_8",X[X.ISO8859_9=9]="ISO8859_9",X[X.ISO8859_10=10]="ISO8859_10",X[X.ISO8859_11=11]="ISO8859_11",X[X.ISO8859_13=12]="ISO8859_13",X[X.ISO8859_14=13]="ISO8859_14",X[X.ISO8859_15=14]="ISO8859_15",X[X.ISO8859_16=15]="ISO8859_16",X[X.SJIS=16]="SJIS",X[X.Cp1250=17]="Cp1250",X[X.Cp1251=18]="Cp1251",X[X.Cp1252=19]="Cp1252",X[X.Cp1256=20]="Cp1256",X[X.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",X[X.UTF8=22]="UTF8",X[X.ASCII=23]="ASCII",X[X.Big5=24]="Big5",X[X.GB18030=25]="GB18030",X[X.EUC_KR=26]="EUC_KR"})(V||(V={}));class j{constructor(o,d,m,...x){this.valueIdentifier=o,this.name=m,typeof d=="number"?this.values=Int32Array.from([d]):this.values=d,this.otherEncodingNames=x,j.VALUE_IDENTIFIER_TO_ECI.set(o,this),j.NAME_TO_ECI.set(m,this);const b=this.values;for(let N=0,S=b.length;N!==S;N++){const O=b[N];j.VALUES_TO_ECI.set(O,this)}for(const N of x)j.NAME_TO_ECI.set(N,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new L("incorect value");const d=j.VALUES_TO_ECI.get(o);if(d===void 0)throw new L("incorect value");return d}static getCharacterSetECIByName(o){const d=j.NAME_TO_ECI.get(o);if(d===void 0)throw new L("incorect value");return d}equals(o){if(!(o instanceof j))return!1;const d=o;return this.getName()===d.getName()}}j.VALUE_IDENTIFIER_TO_ECI=new Map,j.VALUES_TO_ECI=new Map,j.NAME_TO_ECI=new Map,j.Cp437=new j(V.Cp437,Int32Array.from([0,2]),"Cp437"),j.ISO8859_1=new j(V.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),j.ISO8859_2=new j(V.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),j.ISO8859_3=new j(V.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),j.ISO8859_4=new j(V.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),j.ISO8859_5=new j(V.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),j.ISO8859_6=new j(V.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),j.ISO8859_7=new j(V.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),j.ISO8859_8=new j(V.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),j.ISO8859_9=new j(V.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),j.ISO8859_10=new j(V.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),j.ISO8859_11=new j(V.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),j.ISO8859_13=new j(V.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),j.ISO8859_14=new j(V.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),j.ISO8859_15=new j(V.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),j.ISO8859_16=new j(V.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),j.SJIS=new j(V.SJIS,20,"SJIS","Shift_JIS"),j.Cp1250=new j(V.Cp1250,21,"Cp1250","windows-1250"),j.Cp1251=new j(V.Cp1251,22,"Cp1251","windows-1251"),j.Cp1252=new j(V.Cp1252,23,"Cp1252","windows-1252"),j.Cp1256=new j(V.Cp1256,24,"Cp1256","windows-1256"),j.UnicodeBigUnmarked=new j(V.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),j.UTF8=new j(V.UTF8,26,"UTF8","UTF-8"),j.ASCII=new j(V.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),j.Big5=new j(V.Big5,28,"Big5"),j.GB18030=new j(V.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),j.EUC_KR=new j(V.EUC_KR,30,"EUC_KR","EUC-KR");class Y extends p{}Y.kind="UnsupportedOperationException";class H{static decode(o,d){const m=this.encodingName(d);return this.customDecoder?this.customDecoder(o,m):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(m)?this.decodeFallback(o,m):new TextDecoder(m).decode(o)}static shouldDecodeOnFallback(o){return!H.isBrowser()&&o==="ISO-8859-1"}static encode(o,d){const m=this.encodingName(d);return this.customEncoder?this.customEncoder(o,m):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof j?o:j.getCharacterSetECIByName(o)}static decodeFallback(o,d){const m=this.encodingCharacterSet(d);if(H.isDecodeFallbackSupported(m)){let x="";for(let b=0,N=o.length;b<N;b++){let S=o[b].toString(16);S.length<2&&(S="0"+S),x+="%"+S}return decodeURIComponent(x)}if(m.equals(j.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new Y(`Encoding ${this.encodingName(d)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(j.UTF8)||o.equals(j.ISO8859_1)||o.equals(j.ASCII)}static encodeFallback(o){const m=btoa(unescape(encodeURIComponent(o))).split(""),x=[];for(let b=0;b<m.length;b++)x.push(m[b].charCodeAt(0));return new Uint8Array(x)}}class q{static castAsNonUtf8Char(o,d=null){const m=d?d.getName():this.ISO88591;return H.decode(new Uint8Array([o]),m)}static guessEncoding(o,d){if(d!=null&&d.get(U.CHARACTER_SET)!==void 0)return d.get(U.CHARACTER_SET).toString();const m=o.length;let x=!0,b=!0,N=!0,S=0,O=0,I=0,z=0,W=0,Z=0,se=0,fe=0,he=0,Ae=0,Ie=0;const at=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let et=0;et<m&&(x||b||N);et++){const Qe=o[et]&255;N&&(S>0?(Qe&128)===0?N=!1:S--:(Qe&128)!==0&&((Qe&64)===0?N=!1:(S++,(Qe&32)===0?O++:(S++,(Qe&16)===0?I++:(S++,(Qe&8)===0?z++:N=!1))))),x&&(Qe>127&&Qe<160?x=!1:Qe>159&&(Qe<192||Qe===215||Qe===247)&&Ie++),b&&(W>0?Qe<64||Qe===127||Qe>252?b=!1:W--:Qe===128||Qe===160||Qe>239?b=!1:Qe>160&&Qe<224?(Z++,fe=0,se++,se>he&&(he=se)):Qe>127?(W++,se=0,fe++,fe>Ae&&(Ae=fe)):(se=0,fe=0))}return N&&S>0&&(N=!1),b&&W>0&&(b=!1),N&&(at||O+I+z>0)?q.UTF8:b&&(q.ASSUME_SHIFT_JIS||he>=3||Ae>=3)?q.SHIFT_JIS:x&&b?he===2&&Z===2||Ie*10>=m?q.SHIFT_JIS:q.ISO88591:x?q.ISO88591:b?q.SHIFT_JIS:N?q.UTF8:q.PLATFORM_DEFAULT_ENCODING}static format(o,...d){let m=-1;function x(N,S,O,I,z,W){if(N==="%%")return"%";if(d[++m]===void 0)return;N=I?parseInt(I.substr(1)):void 0;let Z=z?parseInt(z.substr(1)):void 0,se;switch(W){case"s":se=d[m];break;case"c":se=d[m][0];break;case"f":se=parseFloat(d[m]).toFixed(N);break;case"p":se=parseFloat(d[m]).toPrecision(N);break;case"e":se=parseFloat(d[m]).toExponential(N);break;case"x":se=parseInt(d[m]).toString(Z||16);break;case"d":se=parseFloat(parseInt(d[m],Z||10).toPrecision(N)).toFixed(0);break}se=typeof se=="object"?JSON.stringify(se):(+se).toString(Z);let fe=parseInt(O),he=O&&O[0]+""=="0"?"0":" ";for(;se.length<fe;)se=S!==void 0?se+he:he+se;return se}let b=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(b,x)}static getBytes(o,d){return H.encode(o,d)}static getCharCode(o,d=0){return o.charCodeAt(d)}static getCharAt(o){return String.fromCharCode(o)}}q.SHIFT_JIS=j.SJIS.getName(),q.GB2312="GB2312",q.ISO88591=j.ISO8859_1.getName(),q.EUC_JP="EUC_JP",q.UTF8=j.UTF8.getName(),q.PLATFORM_DEFAULT_ENCODING=q.UTF8,q.ASSUME_SHIFT_JIS=!1;class le{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=q.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,d,m){for(let x=d;d<d+m;x++)this.append(o[x]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,d){this.value=this.value.substr(0,o)+d+this.value.substr(o+1)}substring(o,d){return this.value.substring(o,d)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,d){this.value=this.value.substr(0,o)+d+this.value.substr(o+d.length)}}class ue{constructor(o,d,m,x){if(this.width=o,this.height=d,this.rowSize=m,this.bits=x,d==null&&(d=o),this.height=d,o<1||d<1)throw new v("Both dimensions must be greater than 0");m==null&&(m=Math.floor((o+31)/32)),this.rowSize=m,x==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const d=o.length,m=o[0].length,x=new ue(m,d);for(let b=0;b<d;b++){const N=o[b];for(let S=0;S<m;S++)N[S]&&x.set(S,b)}return x}static parseFromString(o,d,m){if(o===null)throw new v("stringRepresentation cannot be null");const x=new Array(o.length);let b=0,N=0,S=-1,O=0,I=0;for(;I<o.length;)if(o.charAt(I)===`
`||o.charAt(I)==="\r"){if(b>N){if(S===-1)S=b-N;else if(b-N!==S)throw new v("row lengths do not match");N=b,O++}I++}else if(o.substring(I,I+d.length)===d)I+=d.length,x[b]=!0,b++;else if(o.substring(I,I+m.length)===m)I+=m.length,x[b]=!1,b++;else throw new v("illegal character encountered: "+o.substring(I));if(b>N){if(S===-1)S=b-N;else if(b-N!==S)throw new v("row lengths do not match");O++}const z=new ue(S,O);for(let W=0;W<b;W++)x[W]&&z.set(Math.floor(W%S),Math.floor(W/S));return z}get(o,d){const m=d*this.rowSize+Math.floor(o/32);return(this.bits[m]>>>(o&31)&1)!==0}set(o,d){const m=d*this.rowSize+Math.floor(o/32);this.bits[m]|=1<<(o&31)&4294967295}unset(o,d){const m=d*this.rowSize+Math.floor(o/32);this.bits[m]&=~(1<<(o&31)&4294967295)}flip(o,d){const m=d*this.rowSize+Math.floor(o/32);this.bits[m]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new v("input matrix dimensions do not match");const d=new G(Math.floor(this.width/32)+1),m=this.rowSize,x=this.bits;for(let b=0,N=this.height;b<N;b++){const S=b*m,O=o.getRow(b,d).getBitArray();for(let I=0;I<m;I++)x[S+I]^=O[I]}}clear(){const o=this.bits,d=o.length;for(let m=0;m<d;m++)o[m]=0}setRegion(o,d,m,x){if(d<0||o<0)throw new v("Left and top must be nonnegative");if(x<1||m<1)throw new v("Height and width must be at least 1");const b=o+m,N=d+x;if(N>this.height||b>this.width)throw new v("The region must fit inside the matrix");const S=this.rowSize,O=this.bits;for(let I=d;I<N;I++){const z=I*S;for(let W=o;W<b;W++)O[z+Math.floor(W/32)]|=1<<(W&31)&4294967295}}getRow(o,d){d==null||d.getSize()<this.width?d=new G(this.width):d.clear();const m=this.rowSize,x=this.bits,b=o*m;for(let N=0;N<m;N++)d.setBulk(N*32,x[b+N]);return d}setRow(o,d){P.arraycopy(d.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),d=this.getHeight();let m=new G(o),x=new G(o);for(let b=0,N=Math.floor((d+1)/2);b<N;b++)m=this.getRow(b,m),x=this.getRow(d-1-b,x),m.reverse(),x.reverse(),this.setRow(b,x),this.setRow(d-1-b,m)}getEnclosingRectangle(){const o=this.width,d=this.height,m=this.rowSize,x=this.bits;let b=o,N=d,S=-1,O=-1;for(let I=0;I<d;I++)for(let z=0;z<m;z++){const W=x[I*m+z];if(W!==0){if(I<N&&(N=I),I>O&&(O=I),z*32<b){let Z=0;for(;(W<<31-Z&4294967295)===0;)Z++;z*32+Z<b&&(b=z*32+Z)}if(z*32+31>S){let Z=31;for(;!(W>>>Z);)Z--;z*32+Z>S&&(S=z*32+Z)}}}return S<b||O<N?null:Int32Array.from([b,N,S-b+1,O-N+1])}getTopLeftOnBit(){const o=this.rowSize,d=this.bits;let m=0;for(;m<d.length&&d[m]===0;)m++;if(m===d.length)return null;const x=m/o;let b=m%o*32;const N=d[m];let S=0;for(;(N<<31-S&4294967295)===0;)S++;return b+=S,Int32Array.from([b,x])}getBottomRightOnBit(){const o=this.rowSize,d=this.bits;let m=d.length-1;for(;m>=0&&d[m]===0;)m--;if(m<0)return null;const x=Math.floor(m/o);let b=Math.floor(m%o)*32;const N=d[m];let S=31;for(;!(N>>>S);)S--;return b+=S,Int32Array.from([b,x])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof ue))return!1;const d=o;return this.width===d.width&&this.height===d.height&&this.rowSize===d.rowSize&&B.equals(this.bits,d.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+B.hashCode(this.bits),o}toString(o="X ",d="  ",m=`
`){return this.buildToString(o,d,m)}buildToString(o,d,m){let x=new le;for(let b=0,N=this.height;b<N;b++){for(let S=0,O=this.width;S<O;S++)x.append(this.get(S,b)?o:d);x.append(m)}return x.toString()}clone(){return new ue(this.width,this.height,this.rowSize,this.bits.slice())}}class re extends p{static getNotFoundInstance(){return new re}}re.kind="NotFoundException";class J extends D{constructor(o){super(o),this.luminances=J.EMPTY,this.buckets=new Int32Array(J.LUMINANCE_BUCKETS)}getBlackRow(o,d){const m=this.getLuminanceSource(),x=m.getWidth();d==null||d.getSize()<x?d=new G(x):d.clear(),this.initArrays(x);const b=m.getRow(o,this.luminances),N=this.buckets;for(let O=0;O<x;O++)N[(b[O]&255)>>J.LUMINANCE_SHIFT]++;const S=J.estimateBlackPoint(N);if(x<3)for(let O=0;O<x;O++)(b[O]&255)<S&&d.set(O);else{let O=b[0]&255,I=b[1]&255;for(let z=1;z<x-1;z++){const W=b[z+1]&255;(I*4-O-W)/2<S&&d.set(z),O=I,I=W}}return d}getBlackMatrix(){const o=this.getLuminanceSource(),d=o.getWidth(),m=o.getHeight(),x=new ue(d,m);this.initArrays(d);const b=this.buckets;for(let O=1;O<5;O++){const I=Math.floor(m*O/5),z=o.getRow(I,this.luminances),W=Math.floor(d*4/5);for(let Z=Math.floor(d/5);Z<W;Z++){const se=z[Z]&255;b[se>>J.LUMINANCE_SHIFT]++}}const N=J.estimateBlackPoint(b),S=o.getMatrix();for(let O=0;O<m;O++){const I=O*d;for(let z=0;z<d;z++)(S[I+z]&255)<N&&x.set(z,O)}return x}createBinarizer(o){return new J(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const d=this.buckets;for(let m=0;m<J.LUMINANCE_BUCKETS;m++)d[m]=0}static estimateBlackPoint(o){const d=o.length;let m=0,x=0,b=0;for(let z=0;z<d;z++)o[z]>b&&(x=z,b=o[z]),o[z]>m&&(m=o[z]);let N=0,S=0;for(let z=0;z<d;z++){const W=z-x,Z=o[z]*W*W;Z>S&&(N=z,S=Z)}if(x>N){const z=x;x=N,N=z}if(N-x<=d/16)throw new re;let O=N-1,I=-1;for(let z=N-1;z>x;z--){const W=z-x,Z=W*W*(N-z)*(m-o[z]);Z>I&&(O=z,I=Z)}return O<<J.LUMINANCE_SHIFT}}J.LUMINANCE_BITS=5,J.LUMINANCE_SHIFT=8-J.LUMINANCE_BITS,J.LUMINANCE_BUCKETS=1<<J.LUMINANCE_BITS,J.EMPTY=Uint8ClampedArray.from([0]);class ae extends J{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const o=this.getLuminanceSource(),d=o.getWidth(),m=o.getHeight();if(d>=ae.MINIMUM_DIMENSION&&m>=ae.MINIMUM_DIMENSION){const x=o.getMatrix();let b=d>>ae.BLOCK_SIZE_POWER;(d&ae.BLOCK_SIZE_MASK)!==0&&b++;let N=m>>ae.BLOCK_SIZE_POWER;(m&ae.BLOCK_SIZE_MASK)!==0&&N++;const S=ae.calculateBlackPoints(x,b,N,d,m),O=new ue(d,m);ae.calculateThresholdForBlock(x,b,N,d,m,S,O),this.matrix=O}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new ae(o)}static calculateThresholdForBlock(o,d,m,x,b,N,S){const O=b-ae.BLOCK_SIZE,I=x-ae.BLOCK_SIZE;for(let z=0;z<m;z++){let W=z<<ae.BLOCK_SIZE_POWER;W>O&&(W=O);const Z=ae.cap(z,2,m-3);for(let se=0;se<d;se++){let fe=se<<ae.BLOCK_SIZE_POWER;fe>I&&(fe=I);const he=ae.cap(se,2,d-3);let Ae=0;for(let at=-2;at<=2;at++){const et=N[Z+at];Ae+=et[he-2]+et[he-1]+et[he]+et[he+1]+et[he+2]}const Ie=Ae/25;ae.thresholdBlock(o,fe,W,Ie,x,S)}}}static cap(o,d,m){return o<d?d:o>m?m:o}static thresholdBlock(o,d,m,x,b,N){for(let S=0,O=m*b+d;S<ae.BLOCK_SIZE;S++,O+=b)for(let I=0;I<ae.BLOCK_SIZE;I++)(o[O+I]&255)<=x&&N.set(d+I,m+S)}static calculateBlackPoints(o,d,m,x,b){const N=b-ae.BLOCK_SIZE,S=x-ae.BLOCK_SIZE,O=new Array(m);for(let I=0;I<m;I++){O[I]=new Int32Array(d);let z=I<<ae.BLOCK_SIZE_POWER;z>N&&(z=N);for(let W=0;W<d;W++){let Z=W<<ae.BLOCK_SIZE_POWER;Z>S&&(Z=S);let se=0,fe=255,he=0;for(let Ie=0,at=z*x+Z;Ie<ae.BLOCK_SIZE;Ie++,at+=x){for(let et=0;et<ae.BLOCK_SIZE;et++){const Qe=o[at+et]&255;se+=Qe,Qe<fe&&(fe=Qe),Qe>he&&(he=Qe)}if(he-fe>ae.MIN_DYNAMIC_RANGE)for(Ie++,at+=x;Ie<ae.BLOCK_SIZE;Ie++,at+=x)for(let et=0;et<ae.BLOCK_SIZE;et++)se+=o[at+et]&255}let Ae=se>>ae.BLOCK_SIZE_POWER*2;if(he-fe<=ae.MIN_DYNAMIC_RANGE&&(Ae=fe/2,I>0&&W>0)){const Ie=(O[I-1][W]+2*O[I][W-1]+O[I-1][W-1])/4;fe<Ie&&(Ae=Ie)}O[I][W]=Ae}}return O}}ae.BLOCK_SIZE_POWER=3,ae.BLOCK_SIZE=1<<ae.BLOCK_SIZE_POWER,ae.BLOCK_SIZE_MASK=ae.BLOCK_SIZE-1,ae.MINIMUM_DIMENSION=ae.BLOCK_SIZE*5,ae.MIN_DYNAMIC_RANGE=24;class pe{constructor(o,d){this.width=o,this.height=d}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,d,m,x){throw new Y("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Y("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Y("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let d=new le;for(let m=0;m<this.height;m++){const x=this.getRow(m,o);for(let b=0;b<this.width;b++){const N=x[b]&255;let S;N<64?S="#":N<128?S="+":N<192?S=".":S=" ",d.append(S)}d.append(`
`)}return d.toString()}}class xe extends pe{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,d){const m=this.delegate.getRow(o,d),x=this.getWidth();for(let b=0;b<x;b++)m[b]=255-(m[b]&255);return m}getMatrix(){const o=this.delegate.getMatrix(),d=this.getWidth()*this.getHeight(),m=new Uint8ClampedArray(d);for(let x=0;x<d;x++)m[x]=255-(o[x]&255);return m}isCropSupported(){return this.delegate.isCropSupported()}crop(o,d,m,x){return new xe(this.delegate.crop(o,d,m,x))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new xe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new xe(this.delegate.rotateCounterClockwise45())}}class ee extends pe{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=ee.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const d=o.getContext("2d").getImageData(0,0,o.width,o.height);return ee.toGrayscaleBuffer(d.data,o.width,o.height)}static toGrayscaleBuffer(o,d,m){const x=new Uint8ClampedArray(d*m);for(let b=0,N=0,S=o.length;b<S;b+=4,N++){let O;if(o[b+3]===0)O=255;else{const z=o[b],W=o[b+1],Z=o[b+2];O=306*z+601*W+117*Z+512>>10}x[N]=O}return x}getRow(o,d){if(o<0||o>=this.getHeight())throw new v("Requested row is outside the image: "+o);const m=this.getWidth(),x=o*m;return d===null?d=this.buffer.slice(x,x+m):(d.length<m&&(d=new Uint8ClampedArray(m)),d.set(this.buffer.slice(x,x+m))),d}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,d,m,x){return super.crop(o,d,m,x),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const d=this.getTempCanvasElement(),m=d.getContext("2d"),x=o*ee.DEGREE_TO_RADIANS,b=this.canvas.width,N=this.canvas.height,S=Math.ceil(Math.abs(Math.cos(x))*b+Math.abs(Math.sin(x))*N),O=Math.ceil(Math.abs(Math.sin(x))*b+Math.abs(Math.cos(x))*N);return d.width=S,d.height=O,m.translate(S/2,O/2),m.rotate(x),m.drawImage(this.canvas,b/-2,N/-2),this.buffer=ee.makeBufferFromCanvasImageData(d),this}invert(){return new xe(this)}}ee.DEGREE_TO_RADIANS=Math.PI/180;class K{constructor(o,d,m){this.deviceId=o,this.label=d,this.kind="videoinput",this.groupId=m||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var te=(globalThis||Ng||self||window||void 0)&&(globalThis||Ng||self||window||void 0).__awaiter||function(X,o,d,m){function x(b){return b instanceof d?b:new d(function(N){N(b)})}return new(d||(d=Promise))(function(b,N){function S(z){try{I(m.next(z))}catch(W){N(W)}}function O(z){try{I(m.throw(z))}catch(W){N(W)}}function I(z){z.done?b(z.value):x(z.value).then(S,O)}I((m=m.apply(X,o||[])).next())})};class ge{constructor(o,d=500,m){this.reader=o,this.timeBetweenScansMillis=d,this._hints=m,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return te(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),d=[];for(const m of o){const x=m.kind==="video"?"videoinput":m.kind;if(x!=="videoinput")continue;const b=m.deviceId||m.id,N=m.label||`Video device ${d.length+1}`,S=m.groupId,O={deviceId:b,label:N,kind:x,groupId:S};d.push(O)}return d})}getVideoInputDevices(){return te(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(d=>new K(d.deviceId,d.label))})}findDeviceById(o){return te(this,void 0,void 0,function*(){const d=yield this.listVideoInputDevices();return d?d.find(m=>m.deviceId===o):null})}decodeFromInputVideoDevice(o,d){return te(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,d)})}decodeOnceFromVideoDevice(o,d){return te(this,void 0,void 0,function*(){this.reset();let m;o?m={deviceId:{exact:o}}:m={facingMode:"environment"};const x={video:m};return yield this.decodeOnceFromConstraints(x,d)})}decodeOnceFromConstraints(o,d){return te(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(m,d)})}decodeOnceFromStream(o,d){return te(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(o,d);return yield this.decodeOnce(m)})}decodeFromInputVideoDeviceContinuously(o,d,m){return te(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,d,m)})}decodeFromVideoDevice(o,d,m){return te(this,void 0,void 0,function*(){let x;o?x={deviceId:{exact:o}}:x={facingMode:"environment"};const b={video:x};return yield this.decodeFromConstraints(b,d,m)})}decodeFromConstraints(o,d,m){return te(this,void 0,void 0,function*(){const x=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(x,d,m)})}decodeFromStream(o,d,m){return te(this,void 0,void 0,function*(){this.reset();const x=yield this.attachStreamToVideo(o,d);return yield this.decodeContinuously(x,m)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,d){return te(this,void 0,void 0,function*(){const m=this.prepareVideoElement(d);return this.addVideoSource(m,o),this.videoElement=m,this.stream=o,yield this.playVideoOnLoadAsync(m),m})}playVideoOnLoadAsync(o){return new Promise((d,m)=>this.playVideoOnLoad(o,()=>d()))}playVideoOnLoad(o,d){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",d),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return te(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,d){const m=document.getElementById(o);if(!m)throw new y(`element with id '${o}' not found`);if(m.nodeName.toLowerCase()!==d.toLowerCase())throw new y(`element with id '${o}' must be an ${d} element`);return m}decodeFromImage(o,d){if(!o&&!d)throw new y("either imageElement with a src set or an url must be provided");return d&&!o?this.decodeFromImageUrl(d):this.decodeFromImageElement(o)}decodeFromVideo(o,d){if(!o&&!d)throw new y("Either an element with a src set or an URL must be provided");return d&&!o?this.decodeFromVideoUrl(d):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,d,m){if(o===void 0&&d===void 0)throw new y("Either an element with a src set or an URL must be provided");return d&&!o?this.decodeFromVideoUrlContinuously(d,m):this.decodeFromVideoElementContinuously(o,m)}decodeFromImageElement(o){if(!o)throw new y("An image element must be provided.");this.reset();const d=this.prepareImageElement(o);this.imageElement=d;let m;return this.isImageLoaded(d)?m=this.decodeOnce(d,!1,!0):m=this._decodeOnLoadImage(d),m}decodeFromVideoElement(o){const d=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(d)}decodeFromVideoElementContinuously(o,d){const m=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(m,d)}_decodeFromVideoElementSetup(o){if(!o)throw new y("A video element must be provided.");this.reset();const d=this.prepareVideoElement(o);return this.videoElement=d,d}decodeFromImageUrl(o){if(!o)throw new y("An URL must be provided.");this.reset();const d=this.prepareImageElement();this.imageElement=d;const m=this._decodeOnLoadImage(d);return d.src=o,m}decodeFromVideoUrl(o){if(!o)throw new y("An URL must be provided.");this.reset();const d=this.prepareVideoElement(),m=this.decodeFromVideoElement(d);return d.src=o,m}decodeFromVideoUrlContinuously(o,d){if(!o)throw new y("An URL must be provided.");this.reset();const m=this.prepareVideoElement(),x=this.decodeFromVideoElementContinuously(m,d);return m.src=o,x}_decodeOnLoadImage(o){return new Promise((d,m)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(d,m),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return te(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,d){return te(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,d)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let d;return typeof o>"u"&&(d=document.createElement("img"),d.width=200,d.height=200),typeof o=="string"&&(d=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(d=o),d}prepareVideoElement(o){let d;return!o&&typeof document<"u"&&(d=document.createElement("video"),d.width=200,d.height=200),typeof o=="string"&&(d=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(d=o),d.setAttribute("autoplay","true"),d.setAttribute("muted","true"),d.setAttribute("playsinline","true"),d}decodeOnce(o,d=!0,m=!0){this._stopAsyncDecode=!1;const x=(b,N)=>{if(this._stopAsyncDecode){N(new re("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const S=this.decode(o);b(S)}catch(S){const O=d&&S instanceof re,z=(S instanceof T||S instanceof L)&&m;if(O||z)return setTimeout(x,this._timeBetweenDecodingAttempts,b,N);N(S)}};return new Promise((b,N)=>x(b,N))}decodeContinuously(o,d){this._stopContinuousDecode=!1;const m=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const x=this.decode(o);d(x,null),setTimeout(m,this.timeBetweenScansMillis)}catch(x){d(null,x);const b=x instanceof T||x instanceof L,N=x instanceof re;(b||N)&&setTimeout(m,this._timeBetweenDecodingAttempts)}};m()}decode(o){const d=this.createBinaryBitmap(o);return this.decodeBitmap(d)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,d,m){d||(d={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),m||(m=this.captureCanvasContext),m.drawImage(o,d.sx,d.sy,d.sWidth,d.sHeight,d.dx,d.dy,d.dWidth,d.dHeight)}drawImageOnCanvas(o,d,m=this.captureCanvasContext){d||(d={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),m||(m=this.captureCanvasContext),m.drawImage(o,d.sx,d.sy,d.sWidth,d.sHeight,d.dx,d.dy,d.dWidth,d.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const d=this.getCaptureCanvas(o),m=new ee(d),x=new ae(m);return new C(x)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const m=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=m}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const d=this.createCaptureCanvas(o);this.captureCanvas=d}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const d=document.createElement("canvas");let m,x;return typeof o<"u"&&(o instanceof HTMLVideoElement?(m=o.videoWidth,x=o.videoHeight):o instanceof HTMLImageElement&&(m=o.naturalWidth||o.width,x=o.naturalHeight||o.height)),d.style.width=m+"px",d.style.height=x+"px",d.width=m,d.height=x,d}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,d){try{o.srcObject=d}catch{o.src=URL.createObjectURL(d)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class oe{constructor(o,d,m=d==null?0:8*d.length,x,b,N=P.currentTimeMillis()){this.text=o,this.rawBytes=d,this.numBits=m,this.resultPoints=x,this.format=b,this.timestamp=N,this.text=o,this.rawBytes=d,m==null?this.numBits=d==null?0:8*d.length:this.numBits=m,this.resultPoints=x,this.format=b,this.resultMetadata=null,N==null?this.timestamp=P.currentTimeMillis():this.timestamp=N}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,d){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,d)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){const d=this.resultPoints;if(d===null)this.resultPoints=o;else if(o!==null&&o.length>0){const m=new Array(d.length+o.length);P.arraycopy(d,0,m,0,d.length),P.arraycopy(o,0,m,d.length,o.length),this.resultPoints=m}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ne;(function(X){X[X.AZTEC=0]="AZTEC",X[X.CODABAR=1]="CODABAR",X[X.CODE_39=2]="CODE_39",X[X.CODE_93=3]="CODE_93",X[X.CODE_128=4]="CODE_128",X[X.DATA_MATRIX=5]="DATA_MATRIX",X[X.EAN_8=6]="EAN_8",X[X.EAN_13=7]="EAN_13",X[X.ITF=8]="ITF",X[X.MAXICODE=9]="MAXICODE",X[X.PDF_417=10]="PDF_417",X[X.QR_CODE=11]="QR_CODE",X[X.RSS_14=12]="RSS_14",X[X.RSS_EXPANDED=13]="RSS_EXPANDED",X[X.UPC_A=14]="UPC_A",X[X.UPC_E=15]="UPC_E",X[X.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ne||(Ne={}));var ie=Ne,me;(function(X){X[X.OTHER=0]="OTHER",X[X.ORIENTATION=1]="ORIENTATION",X[X.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",X[X.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",X[X.ISSUE_NUMBER=4]="ISSUE_NUMBER",X[X.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",X[X.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",X[X.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",X[X.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",X[X.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",X[X.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(me||(me={}));var $e=me;class ve{constructor(o,d,m,x,b=-1,N=-1){this.rawBytes=o,this.text=d,this.byteSegments=m,this.ecLevel=x,this.structuredAppendSequenceNumber=b,this.structuredAppendParity=N,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class We{exp(o){return this.expTable[o]}log(o){if(o===0)throw new v;return this.logTable[o]}static addOrSubtract(o,d){return o^d}}class nt{constructor(o,d){if(d.length===0)throw new v;this.field=o;const m=d.length;if(m>1&&d[0]===0){let x=1;for(;x<m&&d[x]===0;)x++;x===m?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(m-x),P.arraycopy(d,x,this.coefficients,0,this.coefficients.length))}else this.coefficients=d}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);const d=this.coefficients;let m;if(o===1){m=0;for(let N=0,S=d.length;N!==S;N++){const O=d[N];m=We.addOrSubtract(m,O)}return m}m=d[0];const x=d.length,b=this.field;for(let N=1;N<x;N++)m=We.addOrSubtract(b.multiply(o,m),d[N]);return m}addOrSubtract(o){if(!this.field.equals(o.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let d=this.coefficients,m=o.coefficients;if(d.length>m.length){const N=d;d=m,m=N}let x=new Int32Array(m.length);const b=m.length-d.length;P.arraycopy(m,0,x,0,b);for(let N=b;N<m.length;N++)x[N]=We.addOrSubtract(d[N-b],m[N]);return new nt(this.field,x)}multiply(o){if(!this.field.equals(o.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const d=this.coefficients,m=d.length,x=o.coefficients,b=x.length,N=new Int32Array(m+b-1),S=this.field;for(let O=0;O<m;O++){const I=d[O];for(let z=0;z<b;z++)N[O+z]=We.addOrSubtract(N[O+z],S.multiply(I,x[z]))}return new nt(S,N)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;const d=this.coefficients.length,m=this.field,x=new Int32Array(d),b=this.coefficients;for(let N=0;N<d;N++)x[N]=m.multiply(b[N],o);return new nt(m,x)}multiplyByMonomial(o,d){if(o<0)throw new v;if(d===0)return this.field.getZero();const m=this.coefficients,x=m.length,b=new Int32Array(x+o),N=this.field;for(let S=0;S<x;S++)b[S]=N.multiply(m[S],d);return new nt(N,b)}divide(o){if(!this.field.equals(o.field))throw new v("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new v("Divide by 0");const d=this.field;let m=d.getZero(),x=this;const b=o.getCoefficient(o.getDegree()),N=d.inverse(b);for(;x.getDegree()>=o.getDegree()&&!x.isZero();){const S=x.getDegree()-o.getDegree(),O=d.multiply(x.getCoefficient(x.getDegree()),N),I=o.multiplyByMonomial(S,O),z=d.buildMonomial(S,O);m=m.addOrSubtract(z),x=x.addOrSubtract(I)}return[m,x]}toString(){let o="";for(let d=this.getDegree();d>=0;d--){let m=this.getCoefficient(d);if(m!==0){if(m<0?(o+=" - ",m=-m):o.length>0&&(o+=" + "),d===0||m!==1){const x=this.field.log(m);x===0?o+="1":x===1?o+="a":(o+="a^",o+=x)}d!==0&&(d===1?o+="x":(o+="x^",o+=d))}}return o}}class Be extends p{}Be.kind="ArithmeticException";class Ee extends We{constructor(o,d,m){super(),this.primitive=o,this.size=d,this.generatorBase=m;const x=new Int32Array(d);let b=1;for(let S=0;S<d;S++)x[S]=b,b*=2,b>=d&&(b^=o,b&=d-1);this.expTable=x;const N=new Int32Array(d);for(let S=0;S<d-1;S++)N[x[S]]=S;this.logTable=N,this.zero=new nt(this,Int32Array.from([0])),this.one=new nt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,d){if(o<0)throw new v;if(d===0)return this.zero;const m=new Int32Array(o+1);return m[0]=d,new nt(this,m)}inverse(o){if(o===0)throw new Be;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,d){return o===0||d===0?0:this.expTable[(this.logTable[o]+this.logTable[d])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+M.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}Ee.AZTEC_DATA_12=new Ee(4201,4096,1),Ee.AZTEC_DATA_10=new Ee(1033,1024,1),Ee.AZTEC_DATA_6=new Ee(67,64,1),Ee.AZTEC_PARAM=new Ee(19,16,1),Ee.QR_CODE_FIELD_256=new Ee(285,256,0),Ee.DATA_MATRIX_FIELD_256=new Ee(301,256,1),Ee.AZTEC_DATA_8=Ee.DATA_MATRIX_FIELD_256,Ee.MAXICODE_FIELD_64=Ee.AZTEC_DATA_6;class je extends p{}je.kind="ReedSolomonException";class ce extends p{}ce.kind="IllegalStateException";class qe{constructor(o){this.field=o}decode(o,d){const m=this.field,x=new nt(m,o),b=new Int32Array(d);let N=!0;for(let se=0;se<d;se++){const fe=x.evaluateAt(m.exp(se+m.getGeneratorBase()));b[b.length-1-se]=fe,fe!==0&&(N=!1)}if(N)return;const S=new nt(m,b),O=this.runEuclideanAlgorithm(m.buildMonomial(d,1),S,d),I=O[0],z=O[1],W=this.findErrorLocations(I),Z=this.findErrorMagnitudes(z,W);for(let se=0;se<W.length;se++){const fe=o.length-1-m.log(W[se]);if(fe<0)throw new je("Bad error location");o[fe]=Ee.addOrSubtract(o[fe],Z[se])}}runEuclideanAlgorithm(o,d,m){if(o.getDegree()<d.getDegree()){const se=o;o=d,d=se}const x=this.field;let b=o,N=d,S=x.getZero(),O=x.getOne();for(;N.getDegree()>=(m/2|0);){let se=b,fe=S;if(b=N,S=O,b.isZero())throw new je("r_{i-1} was zero");N=se;let he=x.getZero();const Ae=b.getCoefficient(b.getDegree()),Ie=x.inverse(Ae);for(;N.getDegree()>=b.getDegree()&&!N.isZero();){const at=N.getDegree()-b.getDegree(),et=x.multiply(N.getCoefficient(N.getDegree()),Ie);he=he.addOrSubtract(x.buildMonomial(at,et)),N=N.addOrSubtract(b.multiplyByMonomial(at,et))}if(O=he.multiply(S).addOrSubtract(fe),N.getDegree()>=b.getDegree())throw new ce("Division algorithm failed to reduce polynomial?")}const I=O.getCoefficient(0);if(I===0)throw new je("sigmaTilde(0) was zero");const z=x.inverse(I),W=O.multiplyScalar(z),Z=N.multiplyScalar(z);return[W,Z]}findErrorLocations(o){const d=o.getDegree();if(d===1)return Int32Array.from([o.getCoefficient(1)]);const m=new Int32Array(d);let x=0;const b=this.field;for(let N=1;N<b.getSize()&&x<d;N++)o.evaluateAt(N)===0&&(m[x]=b.inverse(N),x++);if(x!==d)throw new je("Error locator degree does not match number of roots");return m}findErrorMagnitudes(o,d){const m=d.length,x=new Int32Array(m),b=this.field;for(let N=0;N<m;N++){const S=b.inverse(d[N]);let O=1;for(let I=0;I<m;I++)if(N!==I){const z=b.multiply(d[I],S),W=(z&1)===0?z|1:z&-2;O=b.multiply(O,W)}x[N]=b.multiply(o.evaluateAt(S),b.inverse(O)),b.getGeneratorBase()!==0&&(x[N]=b.multiply(x[N],S))}return x}}var Se;(function(X){X[X.UPPER=0]="UPPER",X[X.LOWER=1]="LOWER",X[X.MIXED=2]="MIXED",X[X.DIGIT=3]="DIGIT",X[X.PUNCT=4]="PUNCT",X[X.BINARY=5]="BINARY"})(Se||(Se={}));class rt{decode(o){this.ddata=o;let d=o.getBits(),m=this.extractBits(d),x=this.correctBits(m),b=rt.convertBoolArrayToByteArray(x),N=rt.getEncodedData(x),S=new ve(b,N,null,null);return S.setNumBits(x.length),S}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let d=o.length,m=Se.UPPER,x=Se.UPPER,b="",N=0;for(;N<d;)if(x===Se.BINARY){if(d-N<5)break;let S=rt.readCode(o,N,5);if(N+=5,S===0){if(d-N<11)break;S=rt.readCode(o,N,11)+31,N+=11}for(let O=0;O<S;O++){if(d-N<8){N=d;break}const I=rt.readCode(o,N,8);b+=q.castAsNonUtf8Char(I),N+=8}x=m}else{let S=x===Se.DIGIT?4:5;if(d-N<S)break;let O=rt.readCode(o,N,S);N+=S;let I=rt.getCharacter(x,O);I.startsWith("CTRL_")?(m=x,x=rt.getTable(I.charAt(5)),I.charAt(6)==="L"&&(m=x)):(b+=I,x=m)}return b}static getTable(o){switch(o){case"L":return Se.LOWER;case"P":return Se.PUNCT;case"M":return Se.MIXED;case"D":return Se.DIGIT;case"B":return Se.BINARY;case"U":default:return Se.UPPER}}static getCharacter(o,d){switch(o){case Se.UPPER:return rt.UPPER_TABLE[d];case Se.LOWER:return rt.LOWER_TABLE[d];case Se.MIXED:return rt.MIXED_TABLE[d];case Se.PUNCT:return rt.PUNCT_TABLE[d];case Se.DIGIT:return rt.DIGIT_TABLE[d];default:throw new ce("Bad table")}}correctBits(o){let d,m;this.ddata.getNbLayers()<=2?(m=6,d=Ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(m=8,d=Ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(m=10,d=Ee.AZTEC_DATA_10):(m=12,d=Ee.AZTEC_DATA_12);let x=this.ddata.getNbDatablocks(),b=o.length/m;if(b<x)throw new L;let N=o.length%m,S=new Int32Array(b);for(let Z=0;Z<b;Z++,N+=m)S[Z]=rt.readCode(o,N,m);try{new qe(d).decode(S,b-x)}catch(Z){throw new L(Z)}let O=(1<<m)-1,I=0;for(let Z=0;Z<x;Z++){let se=S[Z];if(se===0||se===O)throw new L;(se===1||se===O-1)&&I++}let z=new Array(x*m-I),W=0;for(let Z=0;Z<x;Z++){let se=S[Z];if(se===1||se===O-1)z.fill(se>1,W,W+m-1),W+=m-1;else for(let fe=m-1;fe>=0;--fe)z[W++]=(se&1<<fe)!==0}return z}extractBits(o){let d=this.ddata.isCompact(),m=this.ddata.getNbLayers(),x=(d?11:14)+m*4,b=new Int32Array(x),N=new Array(this.totalBitsInLayer(m,d));if(d)for(let S=0;S<b.length;S++)b[S]=S;else{let S=x+1+2*M.truncDivision(M.truncDivision(x,2)-1,15),O=x/2,I=M.truncDivision(S,2);for(let z=0;z<O;z++){let W=z+M.truncDivision(z,15);b[O-z-1]=I-W-1,b[O+z]=I+W+1}}for(let S=0,O=0;S<m;S++){let I=(m-S)*4+(d?9:12),z=S*2,W=x-1-z;for(let Z=0;Z<I;Z++){let se=Z*2;for(let fe=0;fe<2;fe++)N[O+se+fe]=o.get(b[z+fe],b[z+Z]),N[O+2*I+se+fe]=o.get(b[z+Z],b[W-fe]),N[O+4*I+se+fe]=o.get(b[W-fe],b[W-Z]),N[O+6*I+se+fe]=o.get(b[W-Z],b[z+fe])}O+=I*8}return N}static readCode(o,d,m){let x=0;for(let b=d;b<d+m;b++)x<<=1,o[b]&&(x|=1);return x}static readByte(o,d){let m=o.length-d;return m>=8?rt.readCode(o,d,8):rt.readCode(o,d,m)<<8-m}static convertBoolArrayToByteArray(o){let d=new Uint8Array((o.length+7)/8);for(let m=0;m<d.length;m++)d[m]=rt.readByte(o,8*m);return d}totalBitsInLayer(o,d){return((d?88:112)+16*o)*o}}rt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],rt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],rt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],rt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],rt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class it{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,d,m,x){const b=o-m,N=d-x;return Math.sqrt(b*b+N*N)}static sum(o){let d=0;for(let m=0,x=o.length;m!==x;m++){const b=o[m];d+=b}return d}}class pt{static floatToIntBits(o){return o}}pt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ke{constructor(o,d){this.x=o,this.y=d}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof Ke){const d=o;return this.x===d.x&&this.y===d.y}return!1}hashCode(){return 31*pt.floatToIntBits(this.x)+pt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const d=this.distance(o[0],o[1]),m=this.distance(o[1],o[2]),x=this.distance(o[0],o[2]);let b,N,S;if(m>=d&&m>=x?(N=o[0],b=o[1],S=o[2]):x>=m&&x>=d?(N=o[1],b=o[0],S=o[2]):(N=o[2],b=o[0],S=o[1]),this.crossProductZ(b,N,S)<0){const O=b;b=S,S=O}o[0]=b,o[1]=N,o[2]=S}static distance(o,d){return it.distance(o.x,o.y,d.x,d.y)}static crossProductZ(o,d,m){const x=d.x,b=d.y;return(m.x-x)*(o.y-b)-(m.y-b)*(o.x-x)}}class lt{constructor(o,d){this.bits=o,this.points=d}getBits(){return this.bits}getPoints(){return this.points}}class Ue extends lt{constructor(o,d,m,x,b){super(o,d),this.compact=m,this.nbDatablocks=x,this.nbLayers=b}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class mt{constructor(o,d,m,x){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),d==null&&(d=mt.INIT_SIZE),m==null&&(m=o.getWidth()/2|0),x==null&&(x=o.getHeight()/2|0);const b=d/2|0;if(this.leftInit=m-b,this.rightInit=m+b,this.upInit=x-b,this.downInit=x+b,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new re}detect(){let o=this.leftInit,d=this.rightInit,m=this.upInit,x=this.downInit,b=!1,N=!0,S=!1,O=!1,I=!1,z=!1,W=!1;const Z=this.width,se=this.height;for(;N;){N=!1;let fe=!0;for(;(fe||!O)&&d<Z;)fe=this.containsBlackPoint(m,x,d,!1),fe?(d++,N=!0,O=!0):O||d++;if(d>=Z){b=!0;break}let he=!0;for(;(he||!I)&&x<se;)he=this.containsBlackPoint(o,d,x,!0),he?(x++,N=!0,I=!0):I||x++;if(x>=se){b=!0;break}let Ae=!0;for(;(Ae||!z)&&o>=0;)Ae=this.containsBlackPoint(m,x,o,!1),Ae?(o--,N=!0,z=!0):z||o--;if(o<0){b=!0;break}let Ie=!0;for(;(Ie||!W)&&m>=0;)Ie=this.containsBlackPoint(o,d,m,!0),Ie?(m--,N=!0,W=!0):W||m--;if(m<0){b=!0;break}N&&(S=!0)}if(!b&&S){const fe=d-o;let he=null;for(let et=1;he===null&&et<fe;et++)he=this.getBlackPointOnSegment(o,x-et,o+et,x);if(he==null)throw new re;let Ae=null;for(let et=1;Ae===null&&et<fe;et++)Ae=this.getBlackPointOnSegment(o,m+et,o+et,m);if(Ae==null)throw new re;let Ie=null;for(let et=1;Ie===null&&et<fe;et++)Ie=this.getBlackPointOnSegment(d,m+et,d-et,m);if(Ie==null)throw new re;let at=null;for(let et=1;at===null&&et<fe;et++)at=this.getBlackPointOnSegment(d,x-et,d-et,x);if(at==null)throw new re;return this.centerEdges(at,he,Ie,Ae)}else throw new re}getBlackPointOnSegment(o,d,m,x){const b=it.round(it.distance(o,d,m,x)),N=(m-o)/b,S=(x-d)/b,O=this.image;for(let I=0;I<b;I++){const z=it.round(o+I*N),W=it.round(d+I*S);if(O.get(z,W))return new Ke(z,W)}return null}centerEdges(o,d,m,x){const b=o.getX(),N=o.getY(),S=d.getX(),O=d.getY(),I=m.getX(),z=m.getY(),W=x.getX(),Z=x.getY(),se=mt.CORR;return b<this.width/2?[new Ke(W-se,Z+se),new Ke(S+se,O+se),new Ke(I-se,z-se),new Ke(b+se,N-se)]:[new Ke(W+se,Z+se),new Ke(S+se,O-se),new Ke(I-se,z+se),new Ke(b-se,N-se)]}containsBlackPoint(o,d,m,x){const b=this.image;if(x){for(let N=o;N<=d;N++)if(b.get(N,m))return!0}else for(let N=o;N<=d;N++)if(b.get(m,N))return!0;return!1}}mt.INIT_SIZE=10,mt.CORR=1;class $t{static checkAndNudgePoints(o,d){const m=o.getWidth(),x=o.getHeight();let b=!0;for(let N=0;N<d.length&&b;N+=2){const S=Math.floor(d[N]),O=Math.floor(d[N+1]);if(S<-1||S>m||O<-1||O>x)throw new re;b=!1,S===-1?(d[N]=0,b=!0):S===m&&(d[N]=m-1,b=!0),O===-1?(d[N+1]=0,b=!0):O===x&&(d[N+1]=x-1,b=!0)}b=!0;for(let N=d.length-2;N>=0&&b;N-=2){const S=Math.floor(d[N]),O=Math.floor(d[N+1]);if(S<-1||S>m||O<-1||O>x)throw new re;b=!1,S===-1?(d[N]=0,b=!0):S===m&&(d[N]=m-1,b=!0),O===-1?(d[N+1]=0,b=!0):O===x&&(d[N+1]=x-1,b=!0)}}}class ir{constructor(o,d,m,x,b,N,S,O,I){this.a11=o,this.a21=d,this.a31=m,this.a12=x,this.a22=b,this.a32=N,this.a13=S,this.a23=O,this.a33=I}static quadrilateralToQuadrilateral(o,d,m,x,b,N,S,O,I,z,W,Z,se,fe,he,Ae){const Ie=ir.quadrilateralToSquare(o,d,m,x,b,N,S,O);return ir.squareToQuadrilateral(I,z,W,Z,se,fe,he,Ae).times(Ie)}transformPoints(o){const d=o.length,m=this.a11,x=this.a12,b=this.a13,N=this.a21,S=this.a22,O=this.a23,I=this.a31,z=this.a32,W=this.a33;for(let Z=0;Z<d;Z+=2){const se=o[Z],fe=o[Z+1],he=b*se+O*fe+W;o[Z]=(m*se+N*fe+I)/he,o[Z+1]=(x*se+S*fe+z)/he}}transformPointsWithValues(o,d){const m=this.a11,x=this.a12,b=this.a13,N=this.a21,S=this.a22,O=this.a23,I=this.a31,z=this.a32,W=this.a33,Z=o.length;for(let se=0;se<Z;se++){const fe=o[se],he=d[se],Ae=b*fe+O*he+W;o[se]=(m*fe+N*he+I)/Ae,d[se]=(x*fe+S*he+z)/Ae}}static squareToQuadrilateral(o,d,m,x,b,N,S,O){const I=o-m+b-S,z=d-x+N-O;if(I===0&&z===0)return new ir(m-o,b-m,o,x-d,N-x,d,0,0,1);{const W=m-b,Z=S-b,se=x-N,fe=O-N,he=W*fe-Z*se,Ae=(I*fe-Z*z)/he,Ie=(W*z-I*se)/he;return new ir(m-o+Ae*m,S-o+Ie*S,o,x-d+Ae*x,O-d+Ie*O,d,Ae,Ie,1)}}static quadrilateralToSquare(o,d,m,x,b,N,S,O){return ir.squareToQuadrilateral(o,d,m,x,b,N,S,O).buildAdjoint()}buildAdjoint(){return new ir(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new ir(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class Br extends $t{sampleGrid(o,d,m,x,b,N,S,O,I,z,W,Z,se,fe,he,Ae,Ie,at,et){const Qe=ir.quadrilateralToQuadrilateral(x,b,N,S,O,I,z,W,Z,se,fe,he,Ae,Ie,at,et);return this.sampleGridWithTransform(o,d,m,Qe)}sampleGridWithTransform(o,d,m,x){if(d<=0||m<=0)throw new re;const b=new ue(d,m),N=new Float32Array(2*d);for(let S=0;S<m;S++){const O=N.length,I=S+.5;for(let z=0;z<O;z+=2)N[z]=z/2+.5,N[z+1]=I;x.transformPoints(N),$t.checkAndNudgePoints(o,N);try{for(let z=0;z<O;z+=2)o.get(Math.floor(N[z]),Math.floor(N[z+1]))&&b.set(z/2,S)}catch{throw new re}}return b}}class ut{static setGridSampler(o){ut.gridSampler=o}static getInstance(){return ut.gridSampler}}ut.gridSampler=new Br;class Tt{constructor(o,d){this.x=o,this.y=d}toResultPoint(){return new Ke(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Cr{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let d=this.getMatrixCenter(),m=this.getBullsEyeCorners(d);if(o){let N=m[0];m[0]=m[2],m[2]=N}this.extractParameters(m);let x=this.sampleGrid(this.image,m[this.shift%4],m[(this.shift+1)%4],m[(this.shift+2)%4],m[(this.shift+3)%4]),b=this.getMatrixCornerPoints(m);return new Ue(x,b,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new re;let d=2*this.nbCenterLayers,m=new Int32Array([this.sampleLine(o[0],o[1],d),this.sampleLine(o[1],o[2],d),this.sampleLine(o[2],o[3],d),this.sampleLine(o[3],o[0],d)]);this.shift=this.getRotation(m,d);let x=0;for(let N=0;N<4;N++){let S=m[(this.shift+N)%4];this.compact?(x<<=7,x+=S>>1&127):(x<<=10,x+=(S>>2&992)+(S>>1&31))}let b=this.getCorrectedParameterData(x,this.compact);this.compact?(this.nbLayers=(b>>6)+1,this.nbDataBlocks=(b&63)+1):(this.nbLayers=(b>>11)+1,this.nbDataBlocks=(b&2047)+1)}getRotation(o,d){let m=0;o.forEach((x,b,N)=>{let S=(x>>d-2<<1)+(x&1);m=(m<<3)+S}),m=((m&1)<<11)+(m>>1);for(let x=0;x<4;x++)if(M.bitCount(m^this.EXPECTED_CORNER_BITS[x])<=2)return x;throw new re}getCorrectedParameterData(o,d){let m,x;d?(m=7,x=2):(m=10,x=4);let b=m-x,N=new Int32Array(m);for(let O=m-1;O>=0;--O)N[O]=o&15,o>>=4;try{new qe(Ee.AZTEC_PARAM).decode(N,b)}catch{throw new re}let S=0;for(let O=0;O<x;O++)S=(S<<4)+N[O];return S}getBullsEyeCorners(o){let d=o,m=o,x=o,b=o,N=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let W=this.getFirstDifferent(d,N,1,-1),Z=this.getFirstDifferent(m,N,1,1),se=this.getFirstDifferent(x,N,-1,1),fe=this.getFirstDifferent(b,N,-1,-1);if(this.nbCenterLayers>2){let he=this.distancePoint(fe,W)*this.nbCenterLayers/(this.distancePoint(b,d)*(this.nbCenterLayers+2));if(he<.75||he>1.25||!this.isWhiteOrBlackRectangle(W,Z,se,fe))break}d=W,m=Z,x=se,b=fe,N=!N}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new re;this.compact=this.nbCenterLayers===5;let S=new Ke(d.getX()+.5,d.getY()-.5),O=new Ke(m.getX()+.5,m.getY()+.5),I=new Ke(x.getX()-.5,x.getY()+.5),z=new Ke(b.getX()-.5,b.getY()-.5);return this.expandSquare([S,O,I,z],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,d,m,x;try{let S=new mt(this.image).detect();o=S[0],d=S[1],m=S[2],x=S[3]}catch{let O=this.image.getWidth()/2,I=this.image.getHeight()/2;o=this.getFirstDifferent(new Tt(O+7,I-7),!1,1,-1).toResultPoint(),d=this.getFirstDifferent(new Tt(O+7,I+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new Tt(O-7,I+7),!1,-1,1).toResultPoint(),x=this.getFirstDifferent(new Tt(O-7,I-7),!1,-1,-1).toResultPoint()}let b=it.round((o.getX()+x.getX()+d.getX()+m.getX())/4),N=it.round((o.getY()+x.getY()+d.getY()+m.getY())/4);try{let S=new mt(this.image,15,b,N).detect();o=S[0],d=S[1],m=S[2],x=S[3]}catch{o=this.getFirstDifferent(new Tt(b+7,N-7),!1,1,-1).toResultPoint(),d=this.getFirstDifferent(new Tt(b+7,N+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new Tt(b-7,N+7),!1,-1,1).toResultPoint(),x=this.getFirstDifferent(new Tt(b-7,N-7),!1,-1,-1).toResultPoint()}return b=it.round((o.getX()+x.getX()+d.getX()+m.getX())/4),N=it.round((o.getY()+x.getY()+d.getY()+m.getY())/4),new Tt(b,N)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,d,m,x,b){let N=ut.getInstance(),S=this.getDimension(),O=S/2-this.nbCenterLayers,I=S/2+this.nbCenterLayers;return N.sampleGrid(o,S,S,O,O,I,O,I,I,O,I,d.getX(),d.getY(),m.getX(),m.getY(),x.getX(),x.getY(),b.getX(),b.getY())}sampleLine(o,d,m){let x=0,b=this.distanceResultPoint(o,d),N=b/m,S=o.getX(),O=o.getY(),I=N*(d.getX()-o.getX())/b,z=N*(d.getY()-o.getY())/b;for(let W=0;W<m;W++)this.image.get(it.round(S+W*I),it.round(O+W*z))&&(x|=1<<m-W-1);return x}isWhiteOrBlackRectangle(o,d,m,x){let b=3;o=new Tt(o.getX()-b,o.getY()+b),d=new Tt(d.getX()-b,d.getY()-b),m=new Tt(m.getX()+b,m.getY()-b),x=new Tt(x.getX()+b,x.getY()+b);let N=this.getColor(x,o);if(N===0)return!1;let S=this.getColor(o,d);return S!==N||(S=this.getColor(d,m),S!==N)?!1:(S=this.getColor(m,x),S===N)}getColor(o,d){let m=this.distancePoint(o,d),x=(d.getX()-o.getX())/m,b=(d.getY()-o.getY())/m,N=0,S=o.getX(),O=o.getY(),I=this.image.get(o.getX(),o.getY()),z=Math.ceil(m);for(let Z=0;Z<z;Z++)S+=x,O+=b,this.image.get(it.round(S),it.round(O))!==I&&N++;let W=N/m;return W>.1&&W<.9?0:W<=.1===I?1:-1}getFirstDifferent(o,d,m,x){let b=o.getX()+m,N=o.getY()+x;for(;this.isValid(b,N)&&this.image.get(b,N)===d;)b+=m,N+=x;for(b-=m,N-=x;this.isValid(b,N)&&this.image.get(b,N)===d;)b+=m;for(b-=m;this.isValid(b,N)&&this.image.get(b,N)===d;)N+=x;return N-=x,new Tt(b,N)}expandSquare(o,d,m){let x=m/(2*d),b=o[0].getX()-o[2].getX(),N=o[0].getY()-o[2].getY(),S=(o[0].getX()+o[2].getX())/2,O=(o[0].getY()+o[2].getY())/2,I=new Ke(S+x*b,O+x*N),z=new Ke(S-x*b,O-x*N);b=o[1].getX()-o[3].getX(),N=o[1].getY()-o[3].getY(),S=(o[1].getX()+o[3].getX())/2,O=(o[1].getY()+o[3].getY())/2;let W=new Ke(S+x*b,O+x*N),Z=new Ke(S-x*b,O-x*N);return[I,W,z,Z]}isValid(o,d){return o>=0&&o<this.image.getWidth()&&d>0&&d<this.image.getHeight()}isValidPoint(o){let d=it.round(o.getX()),m=it.round(o.getY());return this.isValid(d,m)}distancePoint(o,d){return it.distance(o.getX(),o.getY(),d.getX(),d.getY())}distanceResultPoint(o,d){return it.distance(o.getX(),o.getY(),d.getX(),d.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(M.truncDivision(this.nbLayers-4,8)+1)+15}}class xr{decode(o,d=null){let m=null,x=new Cr(o.getBlackMatrix()),b=null,N=null;try{let z=x.detectMirror(!1);b=z.getPoints(),this.reportFoundResultPoints(d,b),N=new rt().decode(z)}catch(z){m=z}if(N==null)try{let z=x.detectMirror(!0);b=z.getPoints(),this.reportFoundResultPoints(d,b),N=new rt().decode(z)}catch(z){throw m??z}let S=new oe(N.getText(),N.getRawBytes(),N.getNumBits(),b,ie.AZTEC,P.currentTimeMillis()),O=N.getByteSegments();O!=null&&S.putMetadata($e.BYTE_SEGMENTS,O);let I=N.getECLevel();return I!=null&&S.putMetadata($e.ERROR_CORRECTION_LEVEL,I),S}reportFoundResultPoints(o,d){if(o!=null){let m=o.get(U.NEED_RESULT_POINT_CALLBACK);m!=null&&d.forEach((x,b,N)=>{m.foundPossibleResultPoint(x)})}}reset(){}}class ia extends ge{constructor(o=500){super(new xr,o)}}class kt{decode(o,d){try{return this.doDecode(o,d)}catch{if(d&&d.get(U.TRY_HARDER)===!0&&o.isRotateSupported()){const b=o.rotateCounterClockwise(),N=this.doDecode(b,d),S=N.getResultMetadata();let O=270;S!==null&&S.get($e.ORIENTATION)===!0&&(O=O+S.get($e.ORIENTATION)%360),N.putMetadata($e.ORIENTATION,O);const I=N.getResultPoints();if(I!==null){const z=b.getHeight();for(let W=0;W<I.length;W++)I[W]=new Ke(z-I[W].getY()-1,I[W].getX())}return N}else throw new re}}reset(){}doDecode(o,d){const m=o.getWidth(),x=o.getHeight();let b=new G(m);const N=d&&d.get(U.TRY_HARDER)===!0,S=Math.max(1,x>>(N?8:5));let O;N?O=x:O=15;const I=Math.trunc(x/2);for(let z=0;z<O;z++){const W=Math.trunc((z+1)/2),Z=(z&1)===0,se=I+S*(Z?W:-W);if(se<0||se>=x)break;try{b=o.getBlackRow(se,b)}catch{continue}for(let fe=0;fe<2;fe++){if(fe===1&&(b.reverse(),d&&d.get(U.NEED_RESULT_POINT_CALLBACK)===!0)){const he=new Map;d.forEach((Ae,Ie)=>he.set(Ie,Ae)),he.delete(U.NEED_RESULT_POINT_CALLBACK),d=he}try{const he=this.decodeRow(se,b,d);if(fe===1){he.putMetadata($e.ORIENTATION,180);const Ae=he.getResultPoints();Ae!==null&&(Ae[0]=new Ke(m-Ae[0].getX()-1,Ae[0].getY()),Ae[1]=new Ke(m-Ae[1].getX()-1,Ae[1].getY()))}return he}catch{}}}throw new re}static recordPattern(o,d,m){const x=m.length;for(let I=0;I<x;I++)m[I]=0;const b=o.getSize();if(d>=b)throw new re;let N=!o.get(d),S=0,O=d;for(;O<b;){if(o.get(O)!==N)m[S]++;else{if(++S===x)break;m[S]=1,N=!N}O++}if(!(S===x||S===x-1&&O===b))throw new re}static recordPatternInReverse(o,d,m){let x=m.length,b=o.get(d);for(;d>0&&x>=0;)o.get(--d)!==b&&(x--,b=!b);if(x>=0)throw new re;kt.recordPattern(o,d+1,m)}static patternMatchVariance(o,d,m){const x=o.length;let b=0,N=0;for(let I=0;I<x;I++)b+=o[I],N+=d[I];if(b<N)return Number.POSITIVE_INFINITY;const S=b/N;m*=S;let O=0;for(let I=0;I<x;I++){const z=o[I],W=d[I]*S,Z=z>W?z-W:W-z;if(Z>m)return Number.POSITIVE_INFINITY;O+=Z}return O/b}}class be extends kt{static findStartPattern(o){const d=o.getSize(),m=o.getNextSet(0);let x=0,b=Int32Array.from([0,0,0,0,0,0]),N=m,S=!1;const O=6;for(let I=m;I<d;I++)if(o.get(I)!==S)b[x]++;else{if(x===O-1){let z=be.MAX_AVG_VARIANCE,W=-1;for(let Z=be.CODE_START_A;Z<=be.CODE_START_C;Z++){const se=kt.patternMatchVariance(b,be.CODE_PATTERNS[Z],be.MAX_INDIVIDUAL_VARIANCE);se<z&&(z=se,W=Z)}if(W>=0&&o.isRange(Math.max(0,N-(I-N)/2),N,!1))return Int32Array.from([N,I,W]);N+=b[0]+b[1],b=b.slice(2,b.length-1),b[x-1]=0,b[x]=0,x--}else x++;b[x]=1,S=!S}throw new re}static decodeCode(o,d,m){kt.recordPattern(o,m,d);let x=be.MAX_AVG_VARIANCE,b=-1;for(let N=0;N<be.CODE_PATTERNS.length;N++){const S=be.CODE_PATTERNS[N],O=this.patternMatchVariance(d,S,be.MAX_INDIVIDUAL_VARIANCE);O<x&&(x=O,b=N)}if(b>=0)return b;throw new re}decodeRow(o,d,m){const x=m&&m.get(U.ASSUME_GS1)===!0,b=be.findStartPattern(d),N=b[2];let S=0;const O=new Uint8Array(20);O[S++]=N;let I;switch(N){case be.CODE_START_A:I=be.CODE_CODE_A;break;case be.CODE_START_B:I=be.CODE_CODE_B;break;case be.CODE_START_C:I=be.CODE_CODE_C;break;default:throw new L}let z=!1,W=!1,Z="",se=b[0],fe=b[1];const he=Int32Array.from([0,0,0,0,0,0]);let Ae=0,Ie=0,at=N,et=0,Qe=!0,zt=!1,Pt=!1;for(;!z;){const Xl=W;switch(W=!1,Ae=Ie,Ie=be.decodeCode(d,he,fe),O[S++]=Ie,Ie!==be.CODE_STOP&&(Qe=!0),Ie!==be.CODE_STOP&&(et++,at+=et*Ie),se=fe,fe+=he.reduce((v0,$d)=>v0+$d,0),Ie){case be.CODE_START_A:case be.CODE_START_B:case be.CODE_START_C:throw new L}switch(I){case be.CODE_CODE_A:if(Ie<64)Pt===zt?Z+=String.fromCharCode(32+Ie):Z+=String.fromCharCode(32+Ie+128),Pt=!1;else if(Ie<96)Pt===zt?Z+=String.fromCharCode(Ie-64):Z+=String.fromCharCode(Ie+64),Pt=!1;else switch(Ie!==be.CODE_STOP&&(Qe=!1),Ie){case be.CODE_FNC_1:x&&(Z.length===0?Z+="]C1":Z+="");break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_A:!zt&&Pt?(zt=!0,Pt=!1):zt&&Pt?(zt=!1,Pt=!1):Pt=!0;break;case be.CODE_SHIFT:W=!0,I=be.CODE_CODE_B;break;case be.CODE_CODE_B:I=be.CODE_CODE_B;break;case be.CODE_CODE_C:I=be.CODE_CODE_C;break;case be.CODE_STOP:z=!0;break}break;case be.CODE_CODE_B:if(Ie<96)Pt===zt?Z+=String.fromCharCode(32+Ie):Z+=String.fromCharCode(32+Ie+128),Pt=!1;else switch(Ie!==be.CODE_STOP&&(Qe=!1),Ie){case be.CODE_FNC_1:x&&(Z.length===0?Z+="]C1":Z+="");break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_B:!zt&&Pt?(zt=!0,Pt=!1):zt&&Pt?(zt=!1,Pt=!1):Pt=!0;break;case be.CODE_SHIFT:W=!0,I=be.CODE_CODE_A;break;case be.CODE_CODE_A:I=be.CODE_CODE_A;break;case be.CODE_CODE_C:I=be.CODE_CODE_C;break;case be.CODE_STOP:z=!0;break}break;case be.CODE_CODE_C:if(Ie<100)Ie<10&&(Z+="0"),Z+=Ie;else switch(Ie!==be.CODE_STOP&&(Qe=!1),Ie){case be.CODE_FNC_1:x&&(Z.length===0?Z+="]C1":Z+="");break;case be.CODE_CODE_A:I=be.CODE_CODE_A;break;case be.CODE_CODE_B:I=be.CODE_CODE_B;break;case be.CODE_STOP:z=!0;break}break}Xl&&(I=I===be.CODE_CODE_A?be.CODE_CODE_B:be.CODE_CODE_A)}const ca=fe-se;if(fe=d.getNextUnset(fe),!d.isRange(fe,Math.min(d.getSize(),fe+(fe-se)/2),!1))throw new re;if(at-=et*Ae,at%103!==Ae)throw new T;const kn=Z.length;if(kn===0)throw new re;kn>0&&Qe&&(I===be.CODE_CODE_C?Z=Z.substring(0,kn-2):Z=Z.substring(0,kn-1));const tn=(b[1]+b[0])/2,gr=se+ca/2,Ba=O.length,bn=new Uint8Array(Ba);for(let Xl=0;Xl<Ba;Xl++)bn[Xl]=O[Xl];const Xi=[new Ke(tn,o),new Ke(gr,o)];return new oe(Z,bn,0,Xi,ie.CODE_128,new Date().getTime())}}be.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],be.MAX_AVG_VARIANCE=.25,be.MAX_INDIVIDUAL_VARIANCE=.7,be.CODE_SHIFT=98,be.CODE_CODE_C=99,be.CODE_CODE_B=100,be.CODE_CODE_A=101,be.CODE_FNC_1=102,be.CODE_FNC_2=97,be.CODE_FNC_3=96,be.CODE_FNC_4_A=101,be.CODE_FNC_4_B=100,be.CODE_START_A=103,be.CODE_START_B=104,be.CODE_START_C=105,be.CODE_STOP=106;class Je extends kt{constructor(o=!1,d=!1){super(),this.usingCheckDigit=o,this.extendedMode=d,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,d,m){let x=this.counters;x.fill(0),this.decodeRowResult="";let b=Je.findAsteriskPattern(d,x),N=d.getNextSet(b[1]),S=d.getSize(),O,I;do{Je.recordPattern(d,N,x);let he=Je.toNarrowWidePattern(x);if(he<0)throw new re;O=Je.patternToChar(he),this.decodeRowResult+=O,I=N;for(let Ae of x)N+=Ae;N=d.getNextSet(N)}while(O!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let z=0;for(let he of x)z+=he;let W=N-I-z;if(N!==S&&W*2<z)throw new re;if(this.usingCheckDigit){let he=this.decodeRowResult.length-1,Ae=0;for(let Ie=0;Ie<he;Ie++)Ae+=Je.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ie));if(this.decodeRowResult.charAt(he)!==Je.ALPHABET_STRING.charAt(Ae%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,he)}if(this.decodeRowResult.length===0)throw new re;let Z;this.extendedMode?Z=Je.decodeExtended(this.decodeRowResult):Z=this.decodeRowResult;let se=(b[1]+b[0])/2,fe=I+z/2;return new oe(Z,null,0,[new Ke(se,o),new Ke(fe,o)],ie.CODE_39,new Date().getTime())}static findAsteriskPattern(o,d){let m=o.getSize(),x=o.getNextSet(0),b=0,N=x,S=!1,O=d.length;for(let I=x;I<m;I++)if(o.get(I)!==S)d[b]++;else{if(b===O-1){if(this.toNarrowWidePattern(d)===Je.ASTERISK_ENCODING&&o.isRange(Math.max(0,N-Math.floor((I-N)/2)),N,!1))return[N,I];N+=d[0]+d[1],d.copyWithin(0,2,2+b-1),d[b-1]=0,d[b]=0,b--}else b++;d[b]=1,S=!S}throw new re}static toNarrowWidePattern(o){let d=o.length,m=0,x;do{let b=2147483647;for(let O of o)O<b&&O>m&&(b=O);m=b,x=0;let N=0,S=0;for(let O=0;O<d;O++){let I=o[O];I>m&&(S|=1<<d-1-O,x++,N+=I)}if(x===3){for(let O=0;O<d&&x>0;O++){let I=o[O];if(I>m&&(x--,I*2>=N))return-1}return S}}while(x>3);return-1}static patternToChar(o){for(let d=0;d<Je.CHARACTER_ENCODINGS.length;d++)if(Je.CHARACTER_ENCODINGS[d]===o)return Je.ALPHABET_STRING.charAt(d);if(o===Je.ASTERISK_ENCODING)return"*";throw new re}static decodeExtended(o){let d=o.length,m="";for(let x=0;x<d;x++){let b=o.charAt(x);if(b==="+"||b==="$"||b==="%"||b==="/"){let N=o.charAt(x+1),S="\0";switch(b){case"+":if(N>="A"&&N<="Z")S=String.fromCharCode(N.charCodeAt(0)+32);else throw new L;break;case"$":if(N>="A"&&N<="Z")S=String.fromCharCode(N.charCodeAt(0)-64);else throw new L;break;case"%":if(N>="A"&&N<="E")S=String.fromCharCode(N.charCodeAt(0)-38);else if(N>="F"&&N<="J")S=String.fromCharCode(N.charCodeAt(0)-11);else if(N>="K"&&N<="O")S=String.fromCharCode(N.charCodeAt(0)+16);else if(N>="P"&&N<="T")S=String.fromCharCode(N.charCodeAt(0)+43);else if(N==="U")S="\0";else if(N==="V")S="@";else if(N==="W")S="`";else if(N==="X"||N==="Y"||N==="Z")S="";else throw new L;break;case"/":if(N>="A"&&N<="O")S=String.fromCharCode(N.charCodeAt(0)-32);else if(N==="Z")S=":";else throw new L;break}m+=S,x++}else m+=b}return m}}Je.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Je.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Je.ASTERISK_ENCODING=148;class st extends kt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,d,m){let x=this.decodeStart(d),b=this.decodeEnd(d),N=new le;st.decodeMiddle(d,x[1],b[0],N);let S=N.toString(),O=null;m!=null&&(O=m.get(U.ALLOWED_LENGTHS)),O==null&&(O=st.DEFAULT_ALLOWED_LENGTHS);let I=S.length,z=!1,W=0;for(let fe of O){if(I===fe){z=!0;break}fe>W&&(W=fe)}if(!z&&I>W&&(z=!0),!z)throw new L;const Z=[new Ke(x[1],o),new Ke(b[0],o)];return new oe(S,null,0,Z,ie.ITF,new Date().getTime())}static decodeMiddle(o,d,m,x){let b=new Int32Array(10),N=new Int32Array(5),S=new Int32Array(5);for(b.fill(0),N.fill(0),S.fill(0);d<m;){kt.recordPattern(o,d,b);for(let I=0;I<5;I++){let z=2*I;N[I]=b[z],S[I]=b[z+1]}let O=st.decodeDigit(N);x.append(O.toString()),O=this.decodeDigit(S),x.append(O.toString()),b.forEach(function(I){d+=I})}}decodeStart(o){let d=st.skipWhiteSpace(o),m=st.findGuardPattern(o,d,st.START_PATTERN);return this.narrowLineWidth=(m[1]-m[0])/4,this.validateQuietZone(o,m[0]),m}validateQuietZone(o,d){let m=this.narrowLineWidth*10;m=m<d?m:d;for(let x=d-1;m>0&&x>=0&&!o.get(x);x--)m--;if(m!==0)throw new re}static skipWhiteSpace(o){const d=o.getSize(),m=o.getNextSet(0);if(m===d)throw new re;return m}decodeEnd(o){o.reverse();try{let d=st.skipWhiteSpace(o),m;try{m=st.findGuardPattern(o,d,st.END_PATTERN_REVERSED[0])}catch(b){b instanceof re&&(m=st.findGuardPattern(o,d,st.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,m[0]);let x=m[0];return m[0]=o.getSize()-m[1],m[1]=o.getSize()-x,m}finally{o.reverse()}}static findGuardPattern(o,d,m){let x=m.length,b=new Int32Array(x),N=o.getSize(),S=!1,O=0,I=d;b.fill(0);for(let z=d;z<N;z++)if(o.get(z)!==S)b[O]++;else{if(O===x-1){if(kt.patternMatchVariance(b,m,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE)return[I,z];I+=b[0]+b[1],P.arraycopy(b,2,b,0,O-1),b[O-1]=0,b[O]=0,O--}else O++;b[O]=1,S=!S}throw new re}static decodeDigit(o){let d=st.MAX_AVG_VARIANCE,m=-1,x=st.PATTERNS.length;for(let b=0;b<x;b++){let N=st.PATTERNS[b],S=kt.patternMatchVariance(o,N,st.MAX_INDIVIDUAL_VARIANCE);S<d?(d=S,m=b):S===d&&(m=-1)}if(m>=0)return m%10;throw new re}}st.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],st.MAX_AVG_VARIANCE=.38,st.MAX_INDIVIDUAL_VARIANCE=.5,st.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],st.START_PATTERN=Int32Array.from([1,1,1,1]),st.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class At extends kt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let d=!1,m,x=0,b=Int32Array.from([0,0,0]);for(;!d;){b=Int32Array.from([0,0,0]),m=At.findGuardPattern(o,x,!1,this.START_END_PATTERN,b);let N=m[0];x=m[1];let S=N-(x-N);S>=0&&(d=o.isRange(S,N,!1))}return m}static checkChecksum(o){return At.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let d=o.length;if(d===0)return!1;let m=parseInt(o.charAt(d-1),10);return At.getStandardUPCEANChecksum(o.substring(0,d-1))===m}static getStandardUPCEANChecksum(o){let d=o.length,m=0;for(let x=d-1;x>=0;x-=2){let b=o.charAt(x).charCodeAt(0)-48;if(b<0||b>9)throw new L;m+=b}m*=3;for(let x=d-2;x>=0;x-=2){let b=o.charAt(x).charCodeAt(0)-48;if(b<0||b>9)throw new L;m+=b}return(1e3-m)%10}static decodeEnd(o,d){return At.findGuardPattern(o,d,!1,At.START_END_PATTERN,new Int32Array(At.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,d,m,x){return this.findGuardPattern(o,d,m,x,new Int32Array(x.length))}static findGuardPattern(o,d,m,x,b){let N=o.getSize();d=m?o.getNextUnset(d):o.getNextSet(d);let S=0,O=d,I=x.length,z=m;for(let W=d;W<N;W++)if(o.get(W)!==z)b[S]++;else{if(S===I-1){if(kt.patternMatchVariance(b,x,At.MAX_INDIVIDUAL_VARIANCE)<At.MAX_AVG_VARIANCE)return Int32Array.from([O,W]);O+=b[0]+b[1];let Z=b.slice(2,b.length-1);for(let se=0;se<S-1;se++)b[se]=Z[se];b[S-1]=0,b[S]=0,S--}else S++;b[S]=1,z=!z}throw new re}static decodeDigit(o,d,m,x){this.recordPattern(o,m,d);let b=this.MAX_AVG_VARIANCE,N=-1,S=x.length;for(let O=0;O<S;O++){let I=x[O],z=kt.patternMatchVariance(d,I,At.MAX_INDIVIDUAL_VARIANCE);z<b&&(b=z,N=O)}if(N>=0)return N;throw new re}}At.MAX_AVG_VARIANCE=.48,At.MAX_INDIVIDUAL_VARIANCE=.7,At.START_END_PATTERN=Int32Array.from([1,1,1]),At.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),At.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),At.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class dr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,d,m){let x=this.decodeRowStringBuffer,b=this.decodeMiddle(d,m,x),N=x.toString(),S=dr.parseExtensionString(N),O=[new Ke((m[0]+m[1])/2,o),new Ke(b,o)],I=new oe(N,null,0,O,ie.UPC_EAN_EXTENSION,new Date().getTime());return S!=null&&I.putAllMetadata(S),I}decodeMiddle(o,d,m){let x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let b=o.getSize(),N=d[1],S=0;for(let I=0;I<5&&N<b;I++){let z=At.decodeDigit(o,x,N,At.L_AND_G_PATTERNS);m+=String.fromCharCode(48+z%10);for(let W of x)N+=W;z>=10&&(S|=1<<4-I),I!==4&&(N=o.getNextSet(N),N=o.getNextUnset(N))}if(m.length!==5)throw new re;let O=this.determineCheckDigit(S);if(dr.extensionChecksum(m.toString())!==O)throw new re;return N}static extensionChecksum(o){let d=o.length,m=0;for(let x=d-2;x>=0;x-=2)m+=o.charAt(x).charCodeAt(0)-48;m*=3;for(let x=d-1;x>=0;x-=2)m+=o.charAt(x).charCodeAt(0)-48;return m*=3,m%10}determineCheckDigit(o){for(let d=0;d<10;d++)if(o===this.CHECK_DIGIT_ENCODINGS[d])return d;throw new re}static parseExtensionString(o){if(o.length!==5)return null;let d=dr.parseExtension5String(o);return d==null?null:new Map([[$e.SUGGESTED_PRICE,d]])}static parseExtension5String(o){let d;switch(o.charAt(0)){case"0":d="";break;case"5":d="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}d="";break;default:d="";break}let m=parseInt(o.substring(1)),x=(m/100).toString(),b=m%100,N=b<10?"0"+b:b.toString();return d+x+"."+N}}class qa{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,d,m){let x=this.decodeRowStringBuffer,b=this.decodeMiddle(d,m,x),N=x.toString(),S=qa.parseExtensionString(N),O=[new Ke((m[0]+m[1])/2,o),new Ke(b,o)],I=new oe(N,null,0,O,ie.UPC_EAN_EXTENSION,new Date().getTime());return S!=null&&I.putAllMetadata(S),I}decodeMiddle(o,d,m){let x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let b=o.getSize(),N=d[1],S=0;for(let O=0;O<2&&N<b;O++){let I=At.decodeDigit(o,x,N,At.L_AND_G_PATTERNS);m+=String.fromCharCode(48+I%10);for(let z of x)N+=z;I>=10&&(S|=1<<1-O),O!==1&&(N=o.getNextSet(N),N=o.getNextUnset(N))}if(m.length!==2)throw new re;if(parseInt(m.toString())%4!==S)throw new re;return N}static parseExtensionString(o){return o.length!==2?null:new Map([[$e.ISSUE_NUMBER,parseInt(o)]])}}class aa{static decodeRow(o,d,m){let x=At.findGuardPattern(d,m,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new dr().decodeRow(o,d,x)}catch{return new qa().decodeRow(o,d,x)}}}aa.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class we extends At{constructor(){super(),this.decodeRowStringBuffer="",we.L_AND_G_PATTERNS=we.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let d=we.L_PATTERNS[o-10],m=new Int32Array(d.length);for(let x=0;x<d.length;x++)m[x]=d[d.length-x-1];we.L_AND_G_PATTERNS[o]=m}}decodeRow(o,d,m){let x=we.findStartGuardPattern(d),b=m==null?null:m.get(U.NEED_RESULT_POINT_CALLBACK);if(b!=null){const Qe=new Ke((x[0]+x[1])/2,o);b.foundPossibleResultPoint(Qe)}let N=this.decodeMiddle(d,x,this.decodeRowStringBuffer),S=N.rowOffset,O=N.resultString;if(b!=null){const Qe=new Ke(S,o);b.foundPossibleResultPoint(Qe)}let I=this.decodeEnd(d,S);if(b!=null){const Qe=new Ke((I[0]+I[1])/2,o);b.foundPossibleResultPoint(Qe)}let z=I[1],W=z+(z-I[0]);if(W>=d.getSize()||!d.isRange(z,W,!1))throw new re;let Z=O.toString();if(Z.length<8)throw new L;if(!we.checkChecksum(Z))throw new T;let se=(x[1]+x[0])/2,fe=(I[1]+I[0])/2,he=this.getBarcodeFormat(),Ae=[new Ke(se,o),new Ke(fe,o)],Ie=new oe(Z,null,0,Ae,he,new Date().getTime()),at=0;try{let Qe=aa.decodeRow(o,d,I[1]);Ie.putMetadata($e.UPC_EAN_EXTENSION,Qe.getText()),Ie.putAllMetadata(Qe.getResultMetadata()),Ie.addResultPoints(Qe.getResultPoints()),at=Qe.getText().length}catch{}let et=m==null?null:m.get(U.ALLOWED_EAN_EXTENSIONS);if(et!=null){let Qe=!1;for(let zt in et)if(at.toString()===zt){Qe=!0;break}if(!Qe)throw new re}return Ie}decodeEnd(o,d){return we.findGuardPattern(o,d,!1,we.START_END_PATTERN,new Int32Array(we.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return we.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let d=o.length;if(d===0)return!1;let m=parseInt(o.charAt(d-1),10);return we.getStandardUPCEANChecksum(o.substring(0,d-1))===m}static getStandardUPCEANChecksum(o){let d=o.length,m=0;for(let x=d-1;x>=0;x-=2){let b=o.charAt(x).charCodeAt(0)-48;if(b<0||b>9)throw new L;m+=b}m*=3;for(let x=d-2;x>=0;x-=2){let b=o.charAt(x).charCodeAt(0)-48;if(b<0||b>9)throw new L;m+=b}return(1e3-m)%10}}class Ge extends we{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,d,m){let x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let b=o.getSize(),N=d[1],S=0;for(let I=0;I<6&&N<b;I++){let z=we.decodeDigit(o,x,N,we.L_AND_G_PATTERNS);m+=String.fromCharCode(48+z%10);for(let W of x)N+=W;z>=10&&(S|=1<<5-I)}m=Ge.determineFirstDigit(m,S),N=we.findGuardPattern(o,N,!0,we.MIDDLE_PATTERN,new Int32Array(we.MIDDLE_PATTERN.length).fill(0))[1];for(let I=0;I<6&&N<b;I++){let z=we.decodeDigit(o,x,N,we.L_PATTERNS);m+=String.fromCharCode(48+z);for(let W of x)N+=W}return{rowOffset:N,resultString:m}}getBarcodeFormat(){return ie.EAN_13}static determineFirstDigit(o,d){for(let m=0;m<10;m++)if(d===this.FIRST_DIGIT_ENCODINGS[m])return o=String.fromCharCode(48+m)+o,o;throw new re}}Ge.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class xt extends we{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,d,m){const x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let b=o.getSize(),N=d[1];for(let O=0;O<4&&N<b;O++){let I=we.decodeDigit(o,x,N,we.L_PATTERNS);m+=String.fromCharCode(48+I);for(let z of x)N+=z}N=we.findGuardPattern(o,N,!0,we.MIDDLE_PATTERN,new Int32Array(we.MIDDLE_PATTERN.length).fill(0))[1];for(let O=0;O<4&&N<b;O++){let I=we.decodeDigit(o,x,N,we.L_PATTERNS);m+=String.fromCharCode(48+I);for(let z of x)N+=z}return{rowOffset:N,resultString:m}}getBarcodeFormat(){return ie.EAN_8}}class na extends we{constructor(){super(...arguments),this.ean13Reader=new Ge}getBarcodeFormat(){return ie.UPC_A}decode(o,d){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,d,m){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,d,m))}decodeMiddle(o,d,m){return this.ean13Reader.decodeMiddle(o,d,m)}maybeReturnResult(o){let d=o.getText();if(d.charAt(0)==="0"){let m=new oe(d.substring(1),null,null,o.getResultPoints(),ie.UPC_A);return o.getResultMetadata()!=null&&m.putAllMetadata(o.getResultMetadata()),m}else throw new re}reset(){this.ean13Reader.reset()}}class oa extends we{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,d,m){const x=this.decodeMiddleCounters.map(I=>I);x[0]=0,x[1]=0,x[2]=0,x[3]=0;const b=o.getSize();let N=d[1],S=0;for(let I=0;I<6&&N<b;I++){const z=oa.decodeDigit(o,x,N,oa.L_AND_G_PATTERNS);m+=String.fromCharCode(48+z%10);for(let W of x)N+=W;z>=10&&(S|=1<<5-I)}let O=oa.determineNumSysAndCheckDigit(m,S);return{rowOffset:N,resultString:O}}decodeEnd(o,d){return oa.findGuardPatternWithoutCounters(o,d,!0,oa.MIDDLE_END_PATTERN)}checkChecksum(o){return we.checkChecksum(oa.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,d){for(let m=0;m<=1;m++)for(let x=0;x<10;x++)if(d===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[m][x]){let b=String.fromCharCode(48+m),N=String.fromCharCode(48+x);return b+o+N}throw re.getNotFoundInstance()}getBarcodeFormat(){return ie.UPC_E}static convertUPCEtoUPCA(o){const d=o.slice(1,7).split("").map(b=>b.charCodeAt(0)),m=new le;m.append(o.charAt(0));let x=d[5];switch(x){case 0:case 1:case 2:m.appendChars(d,0,2),m.append(x),m.append("0000"),m.appendChars(d,2,3);break;case 3:m.appendChars(d,0,3),m.append("00000"),m.appendChars(d,3,2);break;case 4:m.appendChars(d,0,4),m.append("00000"),m.append(d[4]);break;default:m.appendChars(d,0,5),m.append("0000"),m.append(x);break}return o.length>=8&&m.append(o.charAt(7)),m.toString()}}oa.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),oa.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ze extends kt{constructor(o){super();let d=o==null?null:o.get(U.POSSIBLE_FORMATS),m=[];n(d)?(m.push(new Ge),m.push(new na),m.push(new xt),m.push(new oa)):(d.indexOf(ie.EAN_13)>-1&&m.push(new Ge),d.indexOf(ie.UPC_A)>-1&&m.push(new na),d.indexOf(ie.EAN_8)>-1&&m.push(new xt),d.indexOf(ie.UPC_E)>-1&&m.push(new oa)),this.readers=m}decodeRow(o,d,m){for(let x of this.readers)try{const b=x.decodeRow(o,d,m),N=b.getBarcodeFormat()===ie.EAN_13&&b.getText().charAt(0)==="0",S=m==null?null:m.get(U.POSSIBLE_FORMATS),O=S==null||S.includes(ie.UPC_A);if(N&&O){const I=b.getRawBytes(),z=new oe(b.getText().substring(1),I,I?I.length:null,b.getResultPoints(),ie.UPC_A);return z.putAllMetadata(b.getResultMetadata()),z}return b}catch{}throw new re}reset(){for(let o of this.readers)o.reset()}}class Nt extends kt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,d){for(let m=0;m<d.length;m++)if(kt.patternMatchVariance(o,d[m],Nt.MAX_INDIVIDUAL_VARIANCE)<Nt.MAX_AVG_VARIANCE)return m;throw new re}static count(o){return it.sum(new Int32Array(o))}static increment(o,d){let m=0,x=d[0];for(let b=1;b<o.length;b++)d[b]>x&&(x=d[b],m=b);o[m]++}static decrement(o,d){let m=0,x=d[0];for(let b=1;b<o.length;b++)d[b]<x&&(x=d[b],m=b);o[m]--}static isFinderPattern(o){let d=o[0]+o[1],m=d+o[2]+o[3],x=d/m;if(x>=Nt.MIN_FINDER_PATTERN_RATIO&&x<=Nt.MAX_FINDER_PATTERN_RATIO){let b=Number.MAX_SAFE_INTEGER,N=Number.MIN_SAFE_INTEGER;for(let S of o)S>N&&(N=S),S<b&&(b=S);return N<10*b}return!1}}Nt.MAX_AVG_VARIANCE=.2,Nt.MAX_INDIVIDUAL_VARIANCE=.45,Nt.MIN_FINDER_PATTERN_RATIO=9.5/12,Nt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ja{constructor(o,d){this.value=o,this.checksumPortion=d}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof Ja))return!1;const d=o;return this.value===d.value&&this.checksumPortion===d.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class gs{constructor(o,d,m,x,b){this.value=o,this.startEnd=d,this.value=o,this.startEnd=d,this.resultPoints=new Array,this.resultPoints.push(new Ke(m,b)),this.resultPoints.push(new Ke(x,b))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof gs))return!1;const d=o;return this.value===d.value}hashCode(){return this.value}}class An{constructor(){}static getRSSvalue(o,d,m){let x=0;for(let O of o)x+=O;let b=0,N=0,S=o.length;for(let O=0;O<S-1;O++){let I;for(I=1,N|=1<<O;I<o[O];I++,N&=~(1<<O)){let z=An.combins(x-I-1,S-O-2);if(m&&N===0&&x-I-(S-O-1)>=S-O-1&&(z-=An.combins(x-I-(S-O),S-O-2)),S-O-1>1){let W=0;for(let Z=x-I-(S-O-2);Z>d;Z--)W+=An.combins(x-I-Z-1,S-O-3);z-=W*(S-1-O)}else x-I>d&&z--;b+=z}x-=I}return b}static combins(o,d){let m,x;o-d>d?(x=d,m=o-d):(x=o-d,m=d);let b=1,N=1;for(let S=o;S>m;S--)b*=S,N<=x&&(b/=N,N++);for(;N<=x;)b/=N,N++;return b}}class qc{static buildBitArray(o){let d=o.length*2-1;o[o.length-1].getRightChar()==null&&(d-=1);let m=12*d,x=new G(m),b=0,S=o[0].getRightChar().getValue();for(let O=11;O>=0;--O)(S&1<<O)!=0&&x.set(b),b++;for(let O=1;O<o.length;++O){let I=o[O],z=I.getLeftChar().getValue();for(let W=11;W>=0;--W)(z&1<<W)!=0&&x.set(b),b++;if(I.getRightChar()!=null){let W=I.getRightChar().getValue();for(let Z=11;Z>=0;--Z)(W&1<<Z)!=0&&x.set(b),b++}}return x}}class Tn{constructor(o,d){d?this.decodedInformation=null:(this.finished=o,this.decodedInformation=d)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class zl{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}class Na extends zl{constructor(o,d){super(o),this.value=d}getValue(){return this.value}isFNC1(){return this.value===Na.FNC1}}Na.FNC1="$";class Gn extends zl{constructor(o,d,m){super(o),m?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=d}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ga extends zl{constructor(o,d,m){if(super(o),d<0||d>10||m<0||m>10)throw new L;this.firstDigit=d,this.secondDigit=m}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ga.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ga.FNC1}isAnyFNC1(){return this.firstDigit===Ga.FNC1||this.secondDigit===Ga.FNC1}}Ga.FNC1=10;class ot{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new re;let d=o.substring(0,2);for(let b of ot.TWO_DIGIT_DATA_LENGTH)if(b[0]===d)return b[1]===ot.VARIABLE_LENGTH?ot.processVariableAI(2,b[2],o):ot.processFixedAI(2,b[1],o);if(o.length<3)throw new re;let m=o.substring(0,3);for(let b of ot.THREE_DIGIT_DATA_LENGTH)if(b[0]===m)return b[1]===ot.VARIABLE_LENGTH?ot.processVariableAI(3,b[2],o):ot.processFixedAI(3,b[1],o);for(let b of ot.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(b[0]===m)return b[1]===ot.VARIABLE_LENGTH?ot.processVariableAI(4,b[2],o):ot.processFixedAI(4,b[1],o);if(o.length<4)throw new re;let x=o.substring(0,4);for(let b of ot.FOUR_DIGIT_DATA_LENGTH)if(b[0]===x)return b[1]===ot.VARIABLE_LENGTH?ot.processVariableAI(4,b[2],o):ot.processFixedAI(4,b[1],o);throw new re}static processFixedAI(o,d,m){if(m.length<o)throw new re;let x=m.substring(0,o);if(m.length<o+d)throw new re;let b=m.substring(o,o+d),N=m.substring(o+d),S="("+x+")"+b,O=ot.parseFieldsInGeneralPurpose(N);return O==null?S:S+O}static processVariableAI(o,d,m){let x=m.substring(0,o),b;m.length<o+d?b=m.length:b=o+d;let N=m.substring(o,b),S=m.substring(b),O="("+x+")"+N,I=ot.parseFieldsInGeneralPurpose(S);return I==null?O:O+I}}ot.VARIABLE_LENGTH=[],ot.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ot.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ot.VARIABLE_LENGTH,20],["22",ot.VARIABLE_LENGTH,29],["30",ot.VARIABLE_LENGTH,8],["37",ot.VARIABLE_LENGTH,8],["90",ot.VARIABLE_LENGTH,30],["91",ot.VARIABLE_LENGTH,30],["92",ot.VARIABLE_LENGTH,30],["93",ot.VARIABLE_LENGTH,30],["94",ot.VARIABLE_LENGTH,30],["95",ot.VARIABLE_LENGTH,30],["96",ot.VARIABLE_LENGTH,30],["97",ot.VARIABLE_LENGTH,3],["98",ot.VARIABLE_LENGTH,30],["99",ot.VARIABLE_LENGTH,30]],ot.THREE_DIGIT_DATA_LENGTH=[["240",ot.VARIABLE_LENGTH,30],["241",ot.VARIABLE_LENGTH,30],["242",ot.VARIABLE_LENGTH,6],["250",ot.VARIABLE_LENGTH,30],["251",ot.VARIABLE_LENGTH,30],["253",ot.VARIABLE_LENGTH,17],["254",ot.VARIABLE_LENGTH,20],["400",ot.VARIABLE_LENGTH,30],["401",ot.VARIABLE_LENGTH,30],["402",17],["403",ot.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ot.VARIABLE_LENGTH,20],["421",ot.VARIABLE_LENGTH,15],["422",3],["423",ot.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ot.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ot.VARIABLE_LENGTH,15],["391",ot.VARIABLE_LENGTH,18],["392",ot.VARIABLE_LENGTH,15],["393",ot.VARIABLE_LENGTH,18],["703",ot.VARIABLE_LENGTH,30]],ot.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ot.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ot.VARIABLE_LENGTH,20],["8003",ot.VARIABLE_LENGTH,30],["8004",ot.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ot.VARIABLE_LENGTH,30],["8008",ot.VARIABLE_LENGTH,12],["8018",18],["8020",ot.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ot.VARIABLE_LENGTH,70],["8200",ot.VARIABLE_LENGTH,70]];class Ya{constructor(o){this.buffer=new le,this.information=o}decodeAllCodes(o,d){let m=d,x=null;do{let b=this.decodeGeneralPurposeField(m,x),N=ot.parseFieldsInGeneralPurpose(b.getNewString());if(N!=null&&o.append(N),b.isRemaining()?x=""+b.getRemainingValue():x=null,m===b.getNewPosition())break;m=b.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let d=o;d<o+3;++d)if(this.information.get(d))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let b=this.extractNumericValueFromBitArray(o,4);return b===0?new Ga(this.information.getSize(),Ga.FNC1,Ga.FNC1):new Ga(this.information.getSize(),b-1,Ga.FNC1)}let d=this.extractNumericValueFromBitArray(o,7),m=(d-8)/11,x=(d-8)%11;return new Ga(o+7,m,x)}extractNumericValueFromBitArray(o,d){return Ya.extractNumericValueFromBitArray(this.information,o,d)}static extractNumericValueFromBitArray(o,d,m){let x=0;for(let b=0;b<m;++b)o.get(d+b)&&(x|=1<<m-b-1);return x}decodeGeneralPurposeField(o,d){this.buffer.setLengthToZero(),d!=null&&this.buffer.append(d),this.current.setPosition(o);let m=this.parseBlocks();return m!=null&&m.isRemaining()?new Gn(this.current.getPosition(),this.buffer.toString(),m.getRemainingValue()):new Gn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,d;do{let m=this.current.getPosition();if(this.current.isAlpha()?(d=this.parseAlphaBlock(),o=d.isFinished()):this.current.isIsoIec646()?(d=this.parseIsoIec646Block(),o=d.isFinished()):(d=this.parseNumericBlock(),o=d.isFinished()),!(m!==this.current.getPosition())&&!o)break}while(!o);return d.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let d;return o.isSecondDigitFNC1()?d=new Gn(this.current.getPosition(),this.buffer.toString()):d=new Gn(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new Tn(!0,d)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let d=new Gn(this.current.getPosition(),this.buffer.toString());return new Tn(!0,d)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Tn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let d=new Gn(this.current.getPosition(),this.buffer.toString());return new Tn(!0,d)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Tn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let d=new Gn(this.current.getPosition(),this.buffer.toString());return new Tn(!0,d)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Tn(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(o,5);if(d>=5&&d<16)return!0;if(o+7>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(o,7);if(m>=64&&m<116)return!0;if(o+8>this.information.getSize())return!1;let x=this.extractNumericValueFromBitArray(o,8);return x>=232&&x<253}decodeIsoIec646(o){let d=this.extractNumericValueFromBitArray(o,5);if(d===15)return new Na(o+5,Na.FNC1);if(d>=5&&d<15)return new Na(o+5,"0"+(d-5));let m=this.extractNumericValueFromBitArray(o,7);if(m>=64&&m<90)return new Na(o+7,""+(m+1));if(m>=90&&m<116)return new Na(o+7,""+(m+7));let x=this.extractNumericValueFromBitArray(o,8),b;switch(x){case 232:b="!";break;case 233:b='"';break;case 234:b="%";break;case 235:b="&";break;case 236:b="'";break;case 237:b="(";break;case 238:b=")";break;case 239:b="*";break;case 240:b="+";break;case 241:b=",";break;case 242:b="-";break;case 243:b=".";break;case 244:b="/";break;case 245:b=":";break;case 246:b=";";break;case 247:b="<";break;case 248:b="=";break;case 249:b=">";break;case 250:b="?";break;case 251:b="_";break;case 252:b=" ";break;default:throw new L}return new Na(o+8,b)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(o,5);if(d>=5&&d<16)return!0;if(o+6>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(o,6);return m>=16&&m<63}decodeAlphanumeric(o){let d=this.extractNumericValueFromBitArray(o,5);if(d===15)return new Na(o+5,Na.FNC1);if(d>=5&&d<15)return new Na(o+5,"0"+(d-5));let m=this.extractNumericValueFromBitArray(o,6);if(m>=32&&m<58)return new Na(o+6,""+(m+33));let x;switch(m){case 58:x="*";break;case 59:x=",";break;case 60:x="-";break;case 61:x=".";break;case 62:x="/";break;default:throw new ce("Decoding invalid alphanumeric value: "+m)}return new Na(o+6,x)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let d=0;d<5&&d+o<this.information.getSize();++d)if(d===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+d))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let d=o;d<o+3;++d)if(this.information.get(d))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let d=0;d<4&&d+o<this.information.getSize();++d)if(this.information.get(o+d))return!1;return!0}}class Yr{constructor(o){this.information=o,this.generalDecoder=new Ya(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class tr extends Yr{constructor(o){super(o)}encodeCompressedGtin(o,d){o.append("(01)");let m=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,d,m)}encodeCompressedGtinWithoutAI(o,d,m){for(let x=0;x<4;++x){let b=this.getGeneralDecoder().extractNumericValueFromBitArray(d+10*x,10);b/100===0&&o.append("0"),b/10===0&&o.append("0"),o.append(b)}tr.appendCheckDigit(o,m)}static appendCheckDigit(o,d){let m=0;for(let x=0;x<13;x++){let b=o.charAt(x+d).charCodeAt(0)-48;m+=(x&1)===0?3*b:b}m=10-m%10,m===10&&(m=0),o.append(m)}}tr.GTIN_SIZE=40;class pn extends tr{constructor(o){super(o)}parseInformation(){let o=new le;o.append("(01)");let d=o.length(),m=this.getGeneralDecoder().extractNumericValueFromBitArray(pn.HEADER_SIZE,4);return o.append(m),this.encodeCompressedGtinWithoutAI(o,pn.HEADER_SIZE+4,d),this.getGeneralDecoder().decodeAllCodes(o,pn.HEADER_SIZE+44)}}pn.HEADER_SIZE=4;class hl extends Yr{constructor(o){super(o)}parseInformation(){let o=new le;return this.getGeneralDecoder().decodeAllCodes(o,hl.HEADER_SIZE)}}hl.HEADER_SIZE=5;class Li extends tr{constructor(o){super(o)}encodeCompressedWeight(o,d,m){let x=this.getGeneralDecoder().extractNumericValueFromBitArray(d,m);this.addWeightCode(o,x);let b=this.checkWeight(x),N=1e5;for(let S=0;S<5;++S)b/N===0&&o.append("0"),N/=10;o.append(b)}}class On extends Li{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=On.HEADER_SIZE+Li.GTIN_SIZE+On.WEIGHT_SIZE)throw new re;let o=new le;return this.encodeCompressedGtin(o,On.HEADER_SIZE),this.encodeCompressedWeight(o,On.HEADER_SIZE+Li.GTIN_SIZE,On.WEIGHT_SIZE),o.toString()}}On.HEADER_SIZE=5,On.WEIGHT_SIZE=15;class Gc extends On{constructor(o){super(o)}addWeightCode(o,d){o.append("(3103)")}checkWeight(o){return o}}class pl extends On{constructor(o){super(o)}addWeightCode(o,d){d<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}class en extends tr{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<en.HEADER_SIZE+tr.GTIN_SIZE)throw new re;let o=new le;this.encodeCompressedGtin(o,en.HEADER_SIZE);let d=this.getGeneralDecoder().extractNumericValueFromBitArray(en.HEADER_SIZE+tr.GTIN_SIZE,en.LAST_DIGIT_SIZE);o.append("(392"),o.append(d),o.append(")");let m=this.getGeneralDecoder().decodeGeneralPurposeField(en.HEADER_SIZE+tr.GTIN_SIZE+en.LAST_DIGIT_SIZE,null);return o.append(m.getNewString()),o.toString()}}en.HEADER_SIZE=8,en.LAST_DIGIT_SIZE=2;class Fr extends tr{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<Fr.HEADER_SIZE+tr.GTIN_SIZE)throw new re;let o=new le;this.encodeCompressedGtin(o,Fr.HEADER_SIZE);let d=this.getGeneralDecoder().extractNumericValueFromBitArray(Fr.HEADER_SIZE+tr.GTIN_SIZE,Fr.LAST_DIGIT_SIZE);o.append("(393"),o.append(d),o.append(")");let m=this.getGeneralDecoder().extractNumericValueFromBitArray(Fr.HEADER_SIZE+tr.GTIN_SIZE+Fr.LAST_DIGIT_SIZE,Fr.FIRST_THREE_DIGITS_SIZE);m/100==0&&o.append("0"),m/10==0&&o.append("0"),o.append(m);let x=this.getGeneralDecoder().decodeGeneralPurposeField(Fr.HEADER_SIZE+tr.GTIN_SIZE+Fr.LAST_DIGIT_SIZE+Fr.FIRST_THREE_DIGITS_SIZE,null);return o.append(x.getNewString()),o.toString()}}Fr.HEADER_SIZE=8,Fr.LAST_DIGIT_SIZE=2,Fr.FIRST_THREE_DIGITS_SIZE=10;class Jt extends Li{constructor(o,d,m){super(o),this.dateCode=m,this.firstAIdigits=d}parseInformation(){if(this.getInformation().getSize()!=Jt.HEADER_SIZE+Jt.GTIN_SIZE+Jt.WEIGHT_SIZE+Jt.DATE_SIZE)throw new re;let o=new le;return this.encodeCompressedGtin(o,Jt.HEADER_SIZE),this.encodeCompressedWeight(o,Jt.HEADER_SIZE+Jt.GTIN_SIZE,Jt.WEIGHT_SIZE),this.encodeCompressedDate(o,Jt.HEADER_SIZE+Jt.GTIN_SIZE+Jt.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,d){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(d,Jt.DATE_SIZE);if(m==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let x=m%32;m/=32;let b=m%12+1;m/=12;let N=m;N/10==0&&o.append("0"),o.append(N),b/10==0&&o.append("0"),o.append(b),x/10==0&&o.append("0"),o.append(x)}addWeightCode(o,d){o.append("("),o.append(this.firstAIdigits),o.append(d/1e5),o.append(")")}checkWeight(o){return o%1e5}}Jt.HEADER_SIZE=8,Jt.WEIGHT_SIZE=20,Jt.DATE_SIZE=16;function Ve(X){try{if(X.get(1))return new pn(X);if(!X.get(2))return new hl(X);switch(Ya.extractNumericValueFromBitArray(X,1,4)){case 4:return new Gc(X);case 5:return new pl(X)}switch(Ya.extractNumericValueFromBitArray(X,1,5)){case 12:return new en(X);case 13:return new Fr(X)}switch(Ya.extractNumericValueFromBitArray(X,1,7)){case 56:return new Jt(X,"310","11");case 57:return new Jt(X,"320","11");case 58:return new Jt(X,"310","13");case 59:return new Jt(X,"320","13");case 60:return new Jt(X,"310","15");case 61:return new Jt(X,"320","15");case 62:return new Jt(X,"310","17");case 63:return new Jt(X,"320","17")}}catch(o){throw console.log(o),new ce("unknown decoder: "+X)}}class ht{constructor(o,d,m,x){this.leftchar=o,this.rightchar=d,this.finderpattern=m,this.maybeLast=x}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,d){return o instanceof ht?ht.equalsOrNull(o.leftchar,d.leftchar)&&ht.equalsOrNull(o.rightchar,d.rightchar)&&ht.equalsOrNull(o.finderpattern,d.finderpattern):!1}static equalsOrNull(o,d){return o===null?d===null:ht.equals(o,d)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Pr{constructor(o,d,m){this.pairs=o,this.rowNumber=d,this.wasReversed=m}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,d){return o instanceof Pr?this.checkEqualitity(o,d)&&o.wasReversed===d.wasReversed:!1}checkEqualitity(o,d){if(!o||!d)return;let m;return o.forEach((x,b)=>{d.forEach(N=>{x.getLeftChar().getValue()===N.getLeftChar().getValue()&&x.getRightChar().getValue()===N.getRightChar().getValue()&&x.getFinderPatter().getValue()===N.getFinderPatter().getValue()&&(m=!0)})}),m}}class Ze extends Nt{constructor(o){super(...arguments),this.pairs=new Array(Ze.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,d,m){this.pairs.length=0,this.startFromEven=!1;try{return Ze.constructResult(this.decodeRow2pairs(o,d))}catch(x){this.verbose&&console.log(x)}return this.pairs.length=0,this.startFromEven=!0,Ze.constructResult(this.decodeRow2pairs(o,d))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,d){let m=!1;for(;!m;)try{this.pairs.push(this.retrieveNextPair(d,this.pairs,o))}catch(b){if(b instanceof re){if(!this.pairs.length)throw new re;m=!0}}if(this.checkChecksum())return this.pairs;let x;if(this.rows.length?x=!0:x=!1,this.storeRow(o,!1),x){let b=this.checkRowsBoolean(!1);if(b!=null||(b=this.checkRowsBoolean(!0),b!=null))return b}throw new re}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let d=null;try{d=this.checkRows(new Array,0)}catch(m){this.verbose&&console.log(m)}return o&&(this.rows=this.rows.reverse()),d}checkRows(o,d){for(let m=d;m<this.rows.length;m++){let x=this.rows[m];this.pairs.length=0;for(let N of o)this.pairs.push(N.getPairs());if(this.pairs.push(x.getPairs()),!Ze.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let b=new Array(o);b.push(x);try{return this.checkRows(b,m+1)}catch(N){this.verbose&&console.log(N)}}throw new re}static isValidSequence(o){for(let d of Ze.FINDER_PATTERN_SEQUENCES){if(o.length>d.length)continue;let m=!0;for(let x=0;x<o.length;x++)if(o[x].getFinderPattern().getValue()!=d[x]){m=!1;break}if(m)return!0}return!1}storeRow(o,d){let m=0,x=!1,b=!1;for(;m<this.rows.length;){let N=this.rows[m];if(N.getRowNumber()>o){b=N.isEquivalent(this.pairs);break}x=N.isEquivalent(this.pairs),m++}b||x||Ze.isPartialRow(this.pairs,this.rows)||(this.rows.push(m,new Pr(this.pairs,o,d)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,d){for(let m of d)if(m.getPairs().length!==o.length){for(let x of m.getPairs())for(let b of o)if(ht.equals(x,b))break}}static isPartialRow(o,d){for(let m of d){let x=!0;for(let b of o){let N=!1;for(let S of m.getPairs())if(b.equals(S)){N=!0;break}if(!N){x=!1;break}}if(x)return!0}return!1}getRows(){return this.rows}static constructResult(o){let d=qc.buildBitArray(o),x=Ve(d).parseInformation(),b=o[0].getFinderPattern().getResultPoints(),N=o[o.length-1].getFinderPattern().getResultPoints(),S=[b[0],b[1],N[0],N[1]];return new oe(x,null,null,S,ie.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),d=o.getLeftChar(),m=o.getRightChar();if(m==null)return!1;let x=m.getChecksumPortion(),b=2;for(let S=1;S<this.pairs.size();++S){let O=this.pairs.get(S);x+=O.getLeftChar().getChecksumPortion(),b++;let I=O.getRightChar();I!=null&&(x+=I.getChecksumPortion(),b++)}return x%=211,211*(b-4)+x==d.getValue()}static getNextSecondBar(o,d){let m;return o.get(d)?(m=o.getNextUnset(d),m=o.getNextSet(m)):(m=o.getNextSet(d),m=o.getNextUnset(m)),m}retrieveNextPair(o,d,m){let x=d.length%2==0;this.startFromEven&&(x=!x);let b,N=!0,S=-1;do this.findNextPair(o,d,S),b=this.parseFoundFinderPattern(o,m,x),b==null?S=Ze.getNextSecondBar(o,this.startEnd[0]):N=!1;while(N);let O=this.decodeDataCharacter(o,b,x,!0);if(!this.isEmptyPair(d)&&d[d.length-1].mustBeLast())throw new re;let I;try{I=this.decodeDataCharacter(o,b,x,!1)}catch(z){I=null,this.verbose&&console.log(z)}return new ht(O,I,b,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,d,m){let x=this.getDecodeFinderCounters();x[0]=0,x[1]=0,x[2]=0,x[3]=0;let b=o.getSize(),N;m>=0?N=m:this.isEmptyPair(d)?N=0:N=d[d.length-1].getFinderPattern().getStartEnd()[1];let S=d.length%2!=0;this.startFromEven&&(S=!S);let O=!1;for(;N<b&&(O=!o.get(N),!!O);)N++;let I=0,z=N;for(let W=N;W<b;W++)if(o.get(W)!=O)x[I]++;else{if(I==3){if(S&&Ze.reverseCounters(x),Ze.isFinderPattern(x)){this.startEnd[0]=z,this.startEnd[1]=W;return}S&&Ze.reverseCounters(x),z+=x[0]+x[1],x[0]=x[2],x[1]=x[3],x[2]=0,x[3]=0,I--}else I++;x[I]=1,O=!O}throw new re}static reverseCounters(o){let d=o.length;for(let m=0;m<d/2;++m){let x=o[m];o[m]=o[d-m-1],o[d-m-1]=x}}parseFoundFinderPattern(o,d,m){let x,b,N;if(m){let I=this.startEnd[0]-1;for(;I>=0&&!o.get(I);)I--;I++,x=this.startEnd[0]-I,b=I,N=this.startEnd[1]}else b=this.startEnd[0],N=o.getNextUnset(this.startEnd[1]+1),x=N-this.startEnd[1];let S=this.getDecodeFinderCounters();P.arraycopy(S,0,S,1,S.length-1),S[0]=x;let O;try{O=this.parseFinderValue(S,Ze.FINDER_PATTERNS)}catch{return null}return new gs(O,[b,N],b,N,d)}decodeDataCharacter(o,d,m,x){let b=this.getDataCharacterCounters();for(let gr=0;gr<b.length;gr++)b[gr]=0;if(x)Ze.recordPatternInReverse(o,d.getStartEnd()[0],b);else{Ze.recordPattern(o,d.getStartEnd()[1],b);for(let gr=0,Ba=b.length-1;gr<Ba;gr++,Ba--){let bn=b[gr];b[gr]=b[Ba],b[Ba]=bn}}let N=17,S=it.sum(new Int32Array(b))/N,O=(d.getStartEnd()[1]-d.getStartEnd()[0])/15;if(Math.abs(S-O)/O>.3)throw new re;let I=this.getOddCounts(),z=this.getEvenCounts(),W=this.getOddRoundingErrors(),Z=this.getEvenRoundingErrors();for(let gr=0;gr<b.length;gr++){let Ba=1*b[gr]/S,bn=Ba+.5;if(bn<1){if(Ba<.3)throw new re;bn=1}else if(bn>8){if(Ba>8.7)throw new re;bn=8}let Xi=gr/2;(gr&1)==0?(I[Xi]=bn,W[Xi]=Ba-bn):(z[Xi]=bn,Z[Xi]=Ba-bn)}this.adjustOddEvenCounts(N);let se=4*d.getValue()+(m?0:2)+(x?0:1)-1,fe=0,he=0;for(let gr=I.length-1;gr>=0;gr--){if(Ze.isNotA1left(d,m,x)){let Ba=Ze.WEIGHTS[se][2*gr];he+=I[gr]*Ba}fe+=I[gr]}let Ae=0;for(let gr=z.length-1;gr>=0;gr--)if(Ze.isNotA1left(d,m,x)){let Ba=Ze.WEIGHTS[se][2*gr+1];Ae+=z[gr]*Ba}let Ie=he+Ae;if((fe&1)!=0||fe>13||fe<4)throw new re;let at=(13-fe)/2,et=Ze.SYMBOL_WIDEST[at],Qe=9-et,zt=An.getRSSvalue(I,et,!0),Pt=An.getRSSvalue(z,Qe,!1),ca=Ze.EVEN_TOTAL_SUBSET[at],kn=Ze.GSUM[at],tn=zt*ca+Pt+kn;return new Ja(tn,Ie)}static isNotA1left(o,d,m){return!(o.getValue()==0&&d&&m)}adjustOddEvenCounts(o){let d=it.sum(new Int32Array(this.getOddCounts())),m=it.sum(new Int32Array(this.getEvenCounts())),x=!1,b=!1;d>13?b=!0:d<4&&(x=!0);let N=!1,S=!1;m>13?S=!0:m<4&&(N=!0);let O=d+m-o,I=(d&1)==1,z=(m&1)==0;if(O==1)if(I){if(z)throw new re;b=!0}else{if(!z)throw new re;S=!0}else if(O==-1)if(I){if(z)throw new re;x=!0}else{if(!z)throw new re;N=!0}else if(O==0){if(I){if(!z)throw new re;d<m?(x=!0,S=!0):(b=!0,N=!0)}else if(z)throw new re}else throw new re;if(x){if(b)throw new re;Ze.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(b&&Ze.decrement(this.getOddCounts(),this.getOddRoundingErrors()),N){if(S)throw new re;Ze.increment(this.getEvenCounts(),this.getOddRoundingErrors())}S&&Ze.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ze.SYMBOL_WIDEST=[7,5,4,3,1],Ze.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ze.GSUM=[0,348,1388,2948,3988],Ze.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ze.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ze.FINDER_PAT_A=0,Ze.FINDER_PAT_B=1,Ze.FINDER_PAT_C=2,Ze.FINDER_PAT_D=3,Ze.FINDER_PAT_E=4,Ze.FINDER_PAT_F=5,Ze.FINDER_PATTERN_SEQUENCES=[[Ze.FINDER_PAT_A,Ze.FINDER_PAT_A],[Ze.FINDER_PAT_A,Ze.FINDER_PAT_B,Ze.FINDER_PAT_B],[Ze.FINDER_PAT_A,Ze.FINDER_PAT_C,Ze.FINDER_PAT_B,Ze.FINDER_PAT_D],[Ze.FINDER_PAT_A,Ze.FINDER_PAT_E,Ze.FINDER_PAT_B,Ze.FINDER_PAT_D,Ze.FINDER_PAT_C],[Ze.FINDER_PAT_A,Ze.FINDER_PAT_E,Ze.FINDER_PAT_B,Ze.FINDER_PAT_D,Ze.FINDER_PAT_D,Ze.FINDER_PAT_F],[Ze.FINDER_PAT_A,Ze.FINDER_PAT_E,Ze.FINDER_PAT_B,Ze.FINDER_PAT_D,Ze.FINDER_PAT_E,Ze.FINDER_PAT_F,Ze.FINDER_PAT_F],[Ze.FINDER_PAT_A,Ze.FINDER_PAT_A,Ze.FINDER_PAT_B,Ze.FINDER_PAT_B,Ze.FINDER_PAT_C,Ze.FINDER_PAT_C,Ze.FINDER_PAT_D,Ze.FINDER_PAT_D],[Ze.FINDER_PAT_A,Ze.FINDER_PAT_A,Ze.FINDER_PAT_B,Ze.FINDER_PAT_B,Ze.FINDER_PAT_C,Ze.FINDER_PAT_C,Ze.FINDER_PAT_D,Ze.FINDER_PAT_E,Ze.FINDER_PAT_E],[Ze.FINDER_PAT_A,Ze.FINDER_PAT_A,Ze.FINDER_PAT_B,Ze.FINDER_PAT_B,Ze.FINDER_PAT_C,Ze.FINDER_PAT_C,Ze.FINDER_PAT_D,Ze.FINDER_PAT_E,Ze.FINDER_PAT_F,Ze.FINDER_PAT_F],[Ze.FINDER_PAT_A,Ze.FINDER_PAT_A,Ze.FINDER_PAT_B,Ze.FINDER_PAT_B,Ze.FINDER_PAT_C,Ze.FINDER_PAT_D,Ze.FINDER_PAT_D,Ze.FINDER_PAT_E,Ze.FINDER_PAT_E,Ze.FINDER_PAT_F,Ze.FINDER_PAT_F]],Ze.MAX_PAIRS=11;class o0 extends Ja{constructor(o,d,m){super(o,d),this.count=0,this.finderPattern=m}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class mr extends Nt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,d,m){const x=this.decodePair(d,!1,o,m);mr.addOrTally(this.possibleLeftPairs,x),d.reverse();let b=this.decodePair(d,!0,o,m);mr.addOrTally(this.possibleRightPairs,b),d.reverse();for(let N of this.possibleLeftPairs)if(N.getCount()>1){for(let S of this.possibleRightPairs)if(S.getCount()>1&&mr.checkChecksum(N,S))return mr.constructResult(N,S)}throw new re}static addOrTally(o,d){if(d==null)return;let m=!1;for(let x of o)if(x.getValue()===d.getValue()){x.incrementCount(),m=!0;break}m||o.push(d)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,d){let m=4537077*o.getValue()+d.getValue(),x=new String(m).toString(),b=new le;for(let I=13-x.length;I>0;I--)b.append("0");b.append(x);let N=0;for(let I=0;I<13;I++){let z=b.charAt(I).charCodeAt(0)-48;N+=(I&1)===0?3*z:z}N=10-N%10,N===10&&(N=0),b.append(N.toString());let S=o.getFinderPattern().getResultPoints(),O=d.getFinderPattern().getResultPoints();return new oe(b.toString(),null,0,[S[0],S[1],O[0],O[1]],ie.RSS_14,new Date().getTime())}static checkChecksum(o,d){let m=(o.getChecksumPortion()+16*d.getChecksumPortion())%79,x=9*o.getFinderPattern().getValue()+d.getFinderPattern().getValue();return x>72&&x--,x>8&&x--,m===x}decodePair(o,d,m,x){try{let b=this.findFinderPattern(o,d),N=this.parseFoundFinderPattern(o,m,d,b),S=x==null?null:x.get(U.NEED_RESULT_POINT_CALLBACK);if(S!=null){let z=(b[0]+b[1])/2;d&&(z=o.getSize()-1-z),S.foundPossibleResultPoint(new Ke(z,m))}let O=this.decodeDataCharacter(o,N,!0),I=this.decodeDataCharacter(o,N,!1);return new o0(1597*O.getValue()+I.getValue(),O.getChecksumPortion()+4*I.getChecksumPortion(),N)}catch{return null}}decodeDataCharacter(o,d,m){let x=this.getDataCharacterCounters();for(let Ae=0;Ae<x.length;Ae++)x[Ae]=0;if(m)kt.recordPatternInReverse(o,d.getStartEnd()[0],x);else{kt.recordPattern(o,d.getStartEnd()[1]+1,x);for(let Ae=0,Ie=x.length-1;Ae<Ie;Ae++,Ie--){let at=x[Ae];x[Ae]=x[Ie],x[Ie]=at}}let b=m?16:15,N=it.sum(new Int32Array(x))/b,S=this.getOddCounts(),O=this.getEvenCounts(),I=this.getOddRoundingErrors(),z=this.getEvenRoundingErrors();for(let Ae=0;Ae<x.length;Ae++){let Ie=x[Ae]/N,at=Math.floor(Ie+.5);at<1?at=1:at>8&&(at=8);let et=Math.floor(Ae/2);(Ae&1)===0?(S[et]=at,I[et]=Ie-at):(O[et]=at,z[et]=Ie-at)}this.adjustOddEvenCounts(m,b);let W=0,Z=0;for(let Ae=S.length-1;Ae>=0;Ae--)Z*=9,Z+=S[Ae],W+=S[Ae];let se=0,fe=0;for(let Ae=O.length-1;Ae>=0;Ae--)se*=9,se+=O[Ae],fe+=O[Ae];let he=Z+3*se;if(m){if((W&1)!==0||W>12||W<4)throw new re;let Ae=(12-W)/2,Ie=mr.OUTSIDE_ODD_WIDEST[Ae],at=9-Ie,et=An.getRSSvalue(S,Ie,!1),Qe=An.getRSSvalue(O,at,!0),zt=mr.OUTSIDE_EVEN_TOTAL_SUBSET[Ae],Pt=mr.OUTSIDE_GSUM[Ae];return new Ja(et*zt+Qe+Pt,he)}else{if((fe&1)!==0||fe>10||fe<4)throw new re;let Ae=(10-fe)/2,Ie=mr.INSIDE_ODD_WIDEST[Ae],at=9-Ie,et=An.getRSSvalue(S,Ie,!0),Qe=An.getRSSvalue(O,at,!1),zt=mr.INSIDE_ODD_TOTAL_SUBSET[Ae],Pt=mr.INSIDE_GSUM[Ae];return new Ja(Qe*zt+et+Pt,he)}}findFinderPattern(o,d){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let x=o.getSize(),b=!1,N=0;for(;N<x&&(b=!o.get(N),d!==b);)N++;let S=0,O=N;for(let I=N;I<x;I++)if(o.get(I)!==b)m[S]++;else{if(S===3){if(Nt.isFinderPattern(m))return[O,I];O+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,S--}else S++;m[S]=1,b=!b}throw new re}parseFoundFinderPattern(o,d,m,x){let b=o.get(x[0]),N=x[0]-1;for(;N>=0&&b!==o.get(N);)N--;N++;const S=x[0]-N,O=this.getDecodeFinderCounters(),I=new Int32Array(O.length);P.arraycopy(O,0,I,1,O.length-1),I[0]=S;const z=this.parseFinderValue(I,mr.FINDER_PATTERNS);let W=N,Z=x[1];return m&&(W=o.getSize()-1-W,Z=o.getSize()-1-Z),new gs(z,[N,x[1]],W,Z,d)}adjustOddEvenCounts(o,d){let m=it.sum(new Int32Array(this.getOddCounts())),x=it.sum(new Int32Array(this.getEvenCounts())),b=!1,N=!1,S=!1,O=!1;o?(m>12?N=!0:m<4&&(b=!0),x>12?O=!0:x<4&&(S=!0)):(m>11?N=!0:m<5&&(b=!0),x>10?O=!0:x<4&&(S=!0));let I=m+x-d,z=(m&1)===(o?1:0),W=(x&1)===1;if(I===1)if(z){if(W)throw new re;N=!0}else{if(!W)throw new re;O=!0}else if(I===-1)if(z){if(W)throw new re;b=!0}else{if(!W)throw new re;S=!0}else if(I===0){if(z){if(!W)throw new re;m<x?(b=!0,O=!0):(N=!0,S=!0)}else if(W)throw new re}else throw new re;if(b){if(N)throw new re;Nt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(N&&Nt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),S){if(O)throw new re;Nt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}O&&Nt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}mr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],mr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],mr.OUTSIDE_GSUM=[0,161,961,2015,2715],mr.INSIDE_GSUM=[0,336,1036,1516],mr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],mr.INSIDE_ODD_WIDEST=[2,4,6,8],mr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Yn extends kt{constructor(o,d){super(),this.readers=[],this.verbose=d===!0;const m=o?o.get(U.POSSIBLE_FORMATS):null,x=o&&o.get(U.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;m?((m.includes(ie.EAN_13)||m.includes(ie.UPC_A)||m.includes(ie.EAN_8)||m.includes(ie.UPC_E))&&this.readers.push(new ze(o)),m.includes(ie.CODE_39)&&this.readers.push(new Je(x)),m.includes(ie.CODE_128)&&this.readers.push(new be),m.includes(ie.ITF)&&this.readers.push(new st),m.includes(ie.RSS_14)&&this.readers.push(new mr),m.includes(ie.RSS_EXPANDED)&&this.readers.push(new Ze(this.verbose))):(this.readers.push(new ze(o)),this.readers.push(new Je),this.readers.push(new ze(o)),this.readers.push(new be),this.readers.push(new st),this.readers.push(new mr),this.readers.push(new Ze(this.verbose)))}decodeRow(o,d,m){for(let x=0;x<this.readers.length;x++)try{return this.readers[x].decodeRow(o,d,m)}catch{}throw new re}reset(){this.readers.forEach(o=>o.reset())}}class Ly extends ge{constructor(o=500,d){super(new Yn(d),o,d)}}class rr{constructor(o,d,m){this.ecCodewords=o,this.ecBlocks=[d],m&&this.ecBlocks.push(m)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class er{constructor(o,d){this.count=o,this.dataCodewords=d}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class qt{constructor(o,d,m,x,b,N){this.versionNumber=o,this.symbolSizeRows=d,this.symbolSizeColumns=m,this.dataRegionSizeRows=x,this.dataRegionSizeColumns=b,this.ecBlocks=N;let S=0;const O=N.getECCodewords(),I=N.getECBlocks();for(let z of I)S+=z.getCount()*(z.getDataCodewords()+O);this.totalCodewords=S}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,d){if((o&1)!==0||(d&1)!==0)throw new L;for(let m of qt.VERSIONS)if(m.symbolSizeRows===o&&m.symbolSizeColumns===d)return m;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new qt(1,10,10,8,8,new rr(5,new er(1,3))),new qt(2,12,12,10,10,new rr(7,new er(1,5))),new qt(3,14,14,12,12,new rr(10,new er(1,8))),new qt(4,16,16,14,14,new rr(12,new er(1,12))),new qt(5,18,18,16,16,new rr(14,new er(1,18))),new qt(6,20,20,18,18,new rr(18,new er(1,22))),new qt(7,22,22,20,20,new rr(20,new er(1,30))),new qt(8,24,24,22,22,new rr(24,new er(1,36))),new qt(9,26,26,24,24,new rr(28,new er(1,44))),new qt(10,32,32,14,14,new rr(36,new er(1,62))),new qt(11,36,36,16,16,new rr(42,new er(1,86))),new qt(12,40,40,18,18,new rr(48,new er(1,114))),new qt(13,44,44,20,20,new rr(56,new er(1,144))),new qt(14,48,48,22,22,new rr(68,new er(1,174))),new qt(15,52,52,24,24,new rr(42,new er(2,102))),new qt(16,64,64,14,14,new rr(56,new er(2,140))),new qt(17,72,72,16,16,new rr(36,new er(4,92))),new qt(18,80,80,18,18,new rr(48,new er(4,114))),new qt(19,88,88,20,20,new rr(56,new er(4,144))),new qt(20,96,96,22,22,new rr(68,new er(4,174))),new qt(21,104,104,24,24,new rr(56,new er(6,136))),new qt(22,120,120,18,18,new rr(68,new er(6,175))),new qt(23,132,132,20,20,new rr(62,new er(8,163))),new qt(24,144,144,22,22,new rr(62,new er(8,156),new er(2,155))),new qt(25,8,18,6,16,new rr(7,new er(1,5))),new qt(26,8,32,6,14,new rr(11,new er(1,10))),new qt(27,12,26,10,24,new rr(14,new er(1,16))),new qt(28,12,36,10,16,new rr(18,new er(1,22))),new qt(29,16,36,14,16,new rr(24,new er(1,32))),new qt(30,16,48,14,22,new rr(28,new er(1,49)))]}}qt.VERSIONS=qt.buildVersions();class Bi{constructor(o){const d=o.getHeight();if(d<8||d>144||(d&1)!==0)throw new L;this.version=Bi.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new ue(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const d=o.getHeight(),m=o.getWidth();return qt.getVersionForDimensions(d,m)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let d=0,m=4,x=0;const b=this.mappingBitMatrix.getHeight(),N=this.mappingBitMatrix.getWidth();let S=!1,O=!1,I=!1,z=!1;do if(m===b&&x===0&&!S)o[d++]=this.readCorner1(b,N)&255,m-=2,x+=2,S=!0;else if(m===b-2&&x===0&&(N&3)!==0&&!O)o[d++]=this.readCorner2(b,N)&255,m-=2,x+=2,O=!0;else if(m===b+4&&x===2&&(N&7)===0&&!I)o[d++]=this.readCorner3(b,N)&255,m-=2,x+=2,I=!0;else if(m===b-2&&x===0&&(N&7)===4&&!z)o[d++]=this.readCorner4(b,N)&255,m-=2,x+=2,z=!0;else{do m<b&&x>=0&&!this.readMappingMatrix.get(x,m)&&(o[d++]=this.readUtah(m,x,b,N)&255),m-=2,x+=2;while(m>=0&&x<N);m+=1,x+=3;do m>=0&&x<N&&!this.readMappingMatrix.get(x,m)&&(o[d++]=this.readUtah(m,x,b,N)&255),m+=2,x-=2;while(m<b&&x>=0);m+=3,x+=1}while(m<b||x<N);if(d!==this.version.getTotalCodewords())throw new L;return o}readModule(o,d,m,x){return o<0&&(o+=m,d+=4-(m+4&7)),d<0&&(d+=x,o+=4-(x+4&7)),this.readMappingMatrix.set(d,o),this.mappingBitMatrix.get(d,o)}readUtah(o,d,m,x){let b=0;return this.readModule(o-2,d-2,m,x)&&(b|=1),b<<=1,this.readModule(o-2,d-1,m,x)&&(b|=1),b<<=1,this.readModule(o-1,d-2,m,x)&&(b|=1),b<<=1,this.readModule(o-1,d-1,m,x)&&(b|=1),b<<=1,this.readModule(o-1,d,m,x)&&(b|=1),b<<=1,this.readModule(o,d-2,m,x)&&(b|=1),b<<=1,this.readModule(o,d-1,m,x)&&(b|=1),b<<=1,this.readModule(o,d,m,x)&&(b|=1),b}readCorner1(o,d){let m=0;return this.readModule(o-1,0,o,d)&&(m|=1),m<<=1,this.readModule(o-1,1,o,d)&&(m|=1),m<<=1,this.readModule(o-1,2,o,d)&&(m|=1),m<<=1,this.readModule(0,d-2,o,d)&&(m|=1),m<<=1,this.readModule(0,d-1,o,d)&&(m|=1),m<<=1,this.readModule(1,d-1,o,d)&&(m|=1),m<<=1,this.readModule(2,d-1,o,d)&&(m|=1),m<<=1,this.readModule(3,d-1,o,d)&&(m|=1),m}readCorner2(o,d){let m=0;return this.readModule(o-3,0,o,d)&&(m|=1),m<<=1,this.readModule(o-2,0,o,d)&&(m|=1),m<<=1,this.readModule(o-1,0,o,d)&&(m|=1),m<<=1,this.readModule(0,d-4,o,d)&&(m|=1),m<<=1,this.readModule(0,d-3,o,d)&&(m|=1),m<<=1,this.readModule(0,d-2,o,d)&&(m|=1),m<<=1,this.readModule(0,d-1,o,d)&&(m|=1),m<<=1,this.readModule(1,d-1,o,d)&&(m|=1),m}readCorner3(o,d){let m=0;return this.readModule(o-1,0,o,d)&&(m|=1),m<<=1,this.readModule(o-1,d-1,o,d)&&(m|=1),m<<=1,this.readModule(0,d-3,o,d)&&(m|=1),m<<=1,this.readModule(0,d-2,o,d)&&(m|=1),m<<=1,this.readModule(0,d-1,o,d)&&(m|=1),m<<=1,this.readModule(1,d-3,o,d)&&(m|=1),m<<=1,this.readModule(1,d-2,o,d)&&(m|=1),m<<=1,this.readModule(1,d-1,o,d)&&(m|=1),m}readCorner4(o,d){let m=0;return this.readModule(o-3,0,o,d)&&(m|=1),m<<=1,this.readModule(o-2,0,o,d)&&(m|=1),m<<=1,this.readModule(o-1,0,o,d)&&(m|=1),m<<=1,this.readModule(0,d-2,o,d)&&(m|=1),m<<=1,this.readModule(0,d-1,o,d)&&(m|=1),m<<=1,this.readModule(1,d-1,o,d)&&(m|=1),m<<=1,this.readModule(2,d-1,o,d)&&(m|=1),m<<=1,this.readModule(3,d-1,o,d)&&(m|=1),m}extractDataRegion(o){const d=this.version.getSymbolSizeRows(),m=this.version.getSymbolSizeColumns();if(o.getHeight()!==d)throw new v("Dimension of bitMatrix must match the version size");const x=this.version.getDataRegionSizeRows(),b=this.version.getDataRegionSizeColumns(),N=d/x|0,S=m/b|0,O=N*x,I=S*b,z=new ue(I,O);for(let W=0;W<N;++W){const Z=W*x;for(let se=0;se<S;++se){const fe=se*b;for(let he=0;he<x;++he){const Ae=W*(x+2)+1+he,Ie=Z+he;for(let at=0;at<b;++at){const et=se*(b+2)+1+at;if(o.get(et,Ae)){const Qe=fe+at;z.set(Qe,Ie)}}}}}return z}}class Fi{constructor(o,d){this.numDataCodewords=o,this.codewords=d}static getDataBlocks(o,d){const m=d.getECBlocks();let x=0;const b=m.getECBlocks();for(let he of b)x+=he.getCount();const N=new Array(x);let S=0;for(let he of b)for(let Ae=0;Ae<he.getCount();Ae++){const Ie=he.getDataCodewords(),at=m.getECCodewords()+Ie;N[S++]=new Fi(Ie,new Uint8Array(at))}const I=N[0].codewords.length-m.getECCodewords(),z=I-1;let W=0;for(let he=0;he<z;he++)for(let Ae=0;Ae<S;Ae++)N[Ae].codewords[he]=o[W++];const Z=d.getVersionNumber()===24,se=Z?8:S;for(let he=0;he<se;he++)N[he].codewords[I-1]=o[W++];const fe=N[0].codewords.length;for(let he=I;he<fe;he++)for(let Ae=0;Ae<S;Ae++){const Ie=Z?(Ae+8)%S:Ae,at=Z&&Ie>7?he-1:he;N[Ie].codewords[at]=o[W++]}if(W!==o.length)throw new v;return N}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Xn{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new v(""+o);let d=0,m=this.bitOffset,x=this.byteOffset;const b=this.bytes;if(m>0){const N=8-m,S=o<N?o:N,O=N-S,I=255>>8-S<<O;d=(b[x]&I)>>O,o-=S,m+=S,m===8&&(m=0,x++)}if(o>0){for(;o>=8;)d=d<<8|b[x]&255,x++,o-=8;if(o>0){const N=8-o,S=255>>N<<N;d=d<<o|(b[x]&S)>>N,m+=o}}return this.bitOffset=m,this.byteOffset=x,d}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ar;(function(X){X[X.PAD_ENCODE=0]="PAD_ENCODE",X[X.ASCII_ENCODE=1]="ASCII_ENCODE",X[X.C40_ENCODE=2]="C40_ENCODE",X[X.TEXT_ENCODE=3]="TEXT_ENCODE",X[X.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",X[X.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",X[X.BASE256_ENCODE=6]="BASE256_ENCODE"})(ar||(ar={}));class Hs{static decode(o){const d=new Xn(o),m=new le,x=new le,b=new Array;let N=ar.ASCII_ENCODE;do if(N===ar.ASCII_ENCODE)N=this.decodeAsciiSegment(d,m,x);else{switch(N){case ar.C40_ENCODE:this.decodeC40Segment(d,m);break;case ar.TEXT_ENCODE:this.decodeTextSegment(d,m);break;case ar.ANSIX12_ENCODE:this.decodeAnsiX12Segment(d,m);break;case ar.EDIFACT_ENCODE:this.decodeEdifactSegment(d,m);break;case ar.BASE256_ENCODE:this.decodeBase256Segment(d,m,b);break;default:throw new L}N=ar.ASCII_ENCODE}while(N!==ar.PAD_ENCODE&&d.available()>0);return x.length()>0&&m.append(x.toString()),new ve(o,m.toString(),b.length===0?null:b,null)}static decodeAsciiSegment(o,d,m){let x=!1;do{let b=o.readBits(8);if(b===0)throw new L;if(b<=128)return x&&(b+=128),d.append(String.fromCharCode(b-1)),ar.ASCII_ENCODE;if(b===129)return ar.PAD_ENCODE;if(b<=229){const N=b-130;N<10&&d.append("0"),d.append(""+N)}else switch(b){case 230:return ar.C40_ENCODE;case 231:return ar.BASE256_ENCODE;case 232:d.append("");break;case 233:case 234:break;case 235:x=!0;break;case 236:d.append("[)>05"),m.insert(0,"");break;case 237:d.append("[)>06"),m.insert(0,"");break;case 238:return ar.ANSIX12_ENCODE;case 239:return ar.TEXT_ENCODE;case 240:return ar.EDIFACT_ENCODE;case 241:break;default:if(b!==254||o.available()!==0)throw new L;break}}while(o.available()>0);return ar.ASCII_ENCODE}static decodeC40Segment(o,d){let m=!1;const x=[];let b=0;do{if(o.available()===8)return;const N=o.readBits(8);if(N===254)return;this.parseTwoBytes(N,o.readBits(8),x);for(let S=0;S<3;S++){const O=x[S];switch(b){case 0:if(O<3)b=O+1;else if(O<this.C40_BASIC_SET_CHARS.length){const I=this.C40_BASIC_SET_CHARS[O];m?(d.append(String.fromCharCode(I.charCodeAt(0)+128)),m=!1):d.append(I)}else throw new L;break;case 1:m?(d.append(String.fromCharCode(O+128)),m=!1):d.append(String.fromCharCode(O)),b=0;break;case 2:if(O<this.C40_SHIFT2_SET_CHARS.length){const I=this.C40_SHIFT2_SET_CHARS[O];m?(d.append(String.fromCharCode(I.charCodeAt(0)+128)),m=!1):d.append(I)}else switch(O){case 27:d.append("");break;case 30:m=!0;break;default:throw new L}b=0;break;case 3:m?(d.append(String.fromCharCode(O+224)),m=!1):d.append(String.fromCharCode(O+96)),b=0;break;default:throw new L}}}while(o.available()>0)}static decodeTextSegment(o,d){let m=!1,x=[],b=0;do{if(o.available()===8)return;const N=o.readBits(8);if(N===254)return;this.parseTwoBytes(N,o.readBits(8),x);for(let S=0;S<3;S++){const O=x[S];switch(b){case 0:if(O<3)b=O+1;else if(O<this.TEXT_BASIC_SET_CHARS.length){const I=this.TEXT_BASIC_SET_CHARS[O];m?(d.append(String.fromCharCode(I.charCodeAt(0)+128)),m=!1):d.append(I)}else throw new L;break;case 1:m?(d.append(String.fromCharCode(O+128)),m=!1):d.append(String.fromCharCode(O)),b=0;break;case 2:if(O<this.TEXT_SHIFT2_SET_CHARS.length){const I=this.TEXT_SHIFT2_SET_CHARS[O];m?(d.append(String.fromCharCode(I.charCodeAt(0)+128)),m=!1):d.append(I)}else switch(O){case 27:d.append("");break;case 30:m=!0;break;default:throw new L}b=0;break;case 3:if(O<this.TEXT_SHIFT3_SET_CHARS.length){const I=this.TEXT_SHIFT3_SET_CHARS[O];m?(d.append(String.fromCharCode(I.charCodeAt(0)+128)),m=!1):d.append(I),b=0}else throw new L;break;default:throw new L}}}while(o.available()>0)}static decodeAnsiX12Segment(o,d){const m=[];do{if(o.available()===8)return;const x=o.readBits(8);if(x===254)return;this.parseTwoBytes(x,o.readBits(8),m);for(let b=0;b<3;b++){const N=m[b];switch(N){case 0:d.append("\r");break;case 1:d.append("*");break;case 2:d.append(">");break;case 3:d.append(" ");break;default:if(N<14)d.append(String.fromCharCode(N+44));else if(N<40)d.append(String.fromCharCode(N+51));else throw new L;break}}}while(o.available()>0)}static parseTwoBytes(o,d,m){let x=(o<<8)+d-1,b=Math.floor(x/1600);m[0]=b,x-=b*1600,b=Math.floor(x/40),m[1]=b,m[2]=x-b*40}static decodeEdifactSegment(o,d){do{if(o.available()<=16)return;for(let m=0;m<4;m++){let x=o.readBits(6);if(x===31){const b=8-o.getBitOffset();b!==8&&o.readBits(b);return}(x&32)===0&&(x|=64),d.append(String.fromCharCode(x))}}while(o.available()>0)}static decodeBase256Segment(o,d,m){let x=1+o.getByteOffset();const b=this.unrandomize255State(o.readBits(8),x++);let N;if(b===0?N=o.available()/8|0:b<250?N=b:N=250*(b-249)+this.unrandomize255State(o.readBits(8),x++),N<0)throw new L;const S=new Uint8Array(N);for(let O=0;O<N;O++){if(o.available()<8)throw new L;S[O]=this.unrandomize255State(o.readBits(8),x++)}m.push(S);try{d.append(H.decode(S,q.ISO88591))}catch(O){throw new ce("Platform does not support required encoding: "+O.message)}}static unrandomize255State(o,d){const m=149*d%255+1,x=o-m;return x>=0?x:x+256}}Hs.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Hs.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Hs.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Hs.TEXT_SHIFT2_SET_CHARS=Hs.C40_SHIFT2_SET_CHARS,Hs.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class By{constructor(){this.rsDecoder=new qe(Ee.DATA_MATRIX_FIELD_256)}decode(o){const d=new Bi(o),m=d.getVersion(),x=d.readCodewords(),b=Fi.getDataBlocks(x,m);let N=0;for(let I of b)N+=I.getNumDataCodewords();const S=new Uint8Array(N),O=b.length;for(let I=0;I<O;I++){const z=b[I],W=z.getCodewords(),Z=z.getNumDataCodewords();this.correctErrors(W,Z);for(let se=0;se<Z;se++)S[se*O+I]=W[se]}return Hs.decode(S)}correctErrors(o,d){const m=new Int32Array(o);try{this.rsDecoder.decode(m,o.length-d)}catch{throw new T}for(let x=0;x<d;x++)o[x]=m[x]}}class Ur{constructor(o){this.image=o,this.rectangleDetector=new mt(this.image)}detect(){const o=this.rectangleDetector.detect();let d=this.detectSolid1(o);if(d=this.detectSolid2(d),d[3]=this.correctTopRight(d),!d[3])throw new re;d=this.shiftToModuleCenter(d);const m=d[0],x=d[1],b=d[2],N=d[3];let S=this.transitionsBetween(m,N)+1,O=this.transitionsBetween(b,N)+1;(S&1)===1&&(S+=1),(O&1)===1&&(O+=1),4*S<7*O&&4*O<7*S&&(S=O=Math.max(S,O));let I=Ur.sampleGrid(this.image,m,x,b,N,S,O);return new lt(I,[m,x,b,N])}static shiftPoint(o,d,m){let x=(d.getX()-o.getX())/(m+1),b=(d.getY()-o.getY())/(m+1);return new Ke(o.getX()+x,o.getY()+b)}static moveAway(o,d,m){let x=o.getX(),b=o.getY();return x<d?x-=1:x+=1,b<m?b-=1:b+=1,new Ke(x,b)}detectSolid1(o){let d=o[0],m=o[1],x=o[3],b=o[2],N=this.transitionsBetween(d,m),S=this.transitionsBetween(m,x),O=this.transitionsBetween(x,b),I=this.transitionsBetween(b,d),z=N,W=[b,d,m,x];return z>S&&(z=S,W[0]=d,W[1]=m,W[2]=x,W[3]=b),z>O&&(z=O,W[0]=m,W[1]=x,W[2]=b,W[3]=d),z>I&&(W[0]=x,W[1]=b,W[2]=d,W[3]=m),W}detectSolid2(o){let d=o[0],m=o[1],x=o[2],b=o[3],N=this.transitionsBetween(d,b),S=Ur.shiftPoint(m,x,(N+1)*4),O=Ur.shiftPoint(x,m,(N+1)*4),I=this.transitionsBetween(S,d),z=this.transitionsBetween(O,b);return I<z?(o[0]=d,o[1]=m,o[2]=x,o[3]=b):(o[0]=m,o[1]=x,o[2]=b,o[3]=d),o}correctTopRight(o){let d=o[0],m=o[1],x=o[2],b=o[3],N=this.transitionsBetween(d,b),S=this.transitionsBetween(m,b),O=Ur.shiftPoint(d,m,(S+1)*4),I=Ur.shiftPoint(x,m,(N+1)*4);N=this.transitionsBetween(O,b),S=this.transitionsBetween(I,b);let z=new Ke(b.getX()+(x.getX()-m.getX())/(N+1),b.getY()+(x.getY()-m.getY())/(N+1)),W=new Ke(b.getX()+(d.getX()-m.getX())/(S+1),b.getY()+(d.getY()-m.getY())/(S+1));if(!this.isValid(z))return this.isValid(W)?W:null;if(!this.isValid(W))return z;let Z=this.transitionsBetween(O,z)+this.transitionsBetween(I,z),se=this.transitionsBetween(O,W)+this.transitionsBetween(I,W);return Z>se?z:W}shiftToModuleCenter(o){let d=o[0],m=o[1],x=o[2],b=o[3],N=this.transitionsBetween(d,b)+1,S=this.transitionsBetween(x,b)+1,O=Ur.shiftPoint(d,m,S*4),I=Ur.shiftPoint(x,m,N*4);N=this.transitionsBetween(O,b)+1,S=this.transitionsBetween(I,b)+1,(N&1)===1&&(N+=1),(S&1)===1&&(S+=1);let z=(d.getX()+m.getX()+x.getX()+b.getX())/4,W=(d.getY()+m.getY()+x.getY()+b.getY())/4;d=Ur.moveAway(d,z,W),m=Ur.moveAway(m,z,W),x=Ur.moveAway(x,z,W),b=Ur.moveAway(b,z,W);let Z,se;return O=Ur.shiftPoint(d,m,S*4),O=Ur.shiftPoint(O,b,N*4),Z=Ur.shiftPoint(m,d,S*4),Z=Ur.shiftPoint(Z,x,N*4),I=Ur.shiftPoint(x,b,S*4),I=Ur.shiftPoint(I,m,N*4),se=Ur.shiftPoint(b,x,S*4),se=Ur.shiftPoint(se,d,N*4),[O,Z,I,se]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,d,m,x,b,N,S){return ut.getInstance().sampleGrid(o,N,S,.5,.5,N-.5,.5,N-.5,S-.5,.5,S-.5,d.getX(),d.getY(),b.getX(),b.getY(),x.getX(),x.getY(),m.getX(),m.getY())}transitionsBetween(o,d){let m=Math.trunc(o.getX()),x=Math.trunc(o.getY()),b=Math.trunc(d.getX()),N=Math.trunc(d.getY()),S=Math.abs(N-x)>Math.abs(b-m);if(S){let he=m;m=x,x=he,he=b,b=N,N=he}let O=Math.abs(b-m),I=Math.abs(N-x),z=-O/2,W=x<N?1:-1,Z=m<b?1:-1,se=0,fe=this.image.get(S?x:m,S?m:x);for(let he=m,Ae=x;he!==b;he+=Z){let Ie=this.image.get(S?Ae:he,S?he:Ae);if(Ie!==fe&&(se++,fe=Ie),z+=I,z>0){if(Ae===N)break;Ae+=W,z-=O}}return se}}class $s{constructor(){this.decoder=new By}decode(o,d=null){let m,x;if(d!=null&&d.has(U.PURE_BARCODE)){const I=$s.extractPureBits(o.getBlackMatrix());m=this.decoder.decode(I),x=$s.NO_POINTS}else{const I=new Ur(o.getBlackMatrix()).detect();m=this.decoder.decode(I.getBits()),x=I.getPoints()}const b=m.getRawBytes(),N=new oe(m.getText(),b,8*b.length,x,ie.DATA_MATRIX,P.currentTimeMillis()),S=m.getByteSegments();S!=null&&N.putMetadata($e.BYTE_SEGMENTS,S);const O=m.getECLevel();return O!=null&&N.putMetadata($e.ERROR_CORRECTION_LEVEL,O),N}reset(){}static extractPureBits(o){const d=o.getTopLeftOnBit(),m=o.getBottomRightOnBit();if(d==null||m==null)throw new re;const x=this.moduleSize(d,o);let b=d[1];const N=m[1];let S=d[0];const I=(m[0]-S+1)/x,z=(N-b+1)/x;if(I<=0||z<=0)throw new re;const W=x/2;b+=W,S+=W;const Z=new ue(I,z);for(let se=0;se<z;se++){const fe=b+se*x;for(let he=0;he<I;he++)o.get(S+he*x,fe)&&Z.set(he,se)}return Z}static moduleSize(o,d){const m=d.getWidth();let x=o[0];const b=o[1];for(;x<m&&d.get(x,b);)x++;if(x===m)throw new re;const N=x-o[0];if(N===0)throw new re;return N}}$s.NO_POINTS=[];class Yc extends ge{constructor(o=500){super(new $s,o)}}var Ui;(function(X){X[X.L=0]="L",X[X.M=1]="M",X[X.Q=2]="Q",X[X.H=3]="H"})(Ui||(Ui={}));class Ht{constructor(o,d,m){this.value=o,this.stringValue=d,this.bits=m,Ht.FOR_BITS.set(m,this),Ht.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return Ht.L;case"M":return Ht.M;case"Q":return Ht.Q;case"H":return Ht.H;default:throw new y(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof Ht))return!1;const d=o;return this.value===d.value}static forBits(o){if(o<0||o>=Ht.FOR_BITS.size)throw new v;return Ht.FOR_BITS.get(o)}}Ht.FOR_BITS=new Map,Ht.FOR_VALUE=new Map,Ht.L=new Ht(Ui.L,"L",1),Ht.M=new Ht(Ui.M,"M",0),Ht.Q=new Ht(Ui.Q,"Q",3),Ht.H=new Ht(Ui.H,"H",2);class Sa{constructor(o){this.errorCorrectionLevel=Ht.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,d){return M.bitCount(o^d)}static decodeFormatInformation(o,d){const m=Sa.doDecodeFormatInformation(o,d);return m!==null?m:Sa.doDecodeFormatInformation(o^Sa.FORMAT_INFO_MASK_QR,d^Sa.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,d){let m=Number.MAX_SAFE_INTEGER,x=0;for(const b of Sa.FORMAT_INFO_DECODE_LOOKUP){const N=b[0];if(N===o||N===d)return new Sa(b[1]);let S=Sa.numBitsDiffering(o,N);S<m&&(x=b[1],m=S),o!==d&&(S=Sa.numBitsDiffering(d,N),S<m&&(x=b[1],m=S))}return m<=3?new Sa(x):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof Sa))return!1;const d=o;return this.errorCorrectionLevel===d.errorCorrectionLevel&&this.dataMask===d.dataMask}}Sa.FORMAT_INFO_MASK_QR=21522,Sa.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Te{constructor(o,...d){this.ecCodewordsPerBlock=o,this.ecBlocks=d}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const d=this.ecBlocks;for(const m of d)o+=m.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ne{constructor(o,d){this.count=o,this.dataCodewords=d}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class yt{constructor(o,d,...m){this.versionNumber=o,this.alignmentPatternCenters=d,this.ecBlocks=m;let x=0;const b=m[0].getECCodewordsPerBlock(),N=m[0].getECBlocks();for(const S of N)x+=S.getCount()*(S.getDataCodewords()+b);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new L;try{return this.getVersionForNumber((o-17)/4)}catch{throw new L}}static getVersionForNumber(o){if(o<1||o>40)throw new v;return yt.VERSIONS[o-1]}static decodeVersionInformation(o){let d=Number.MAX_SAFE_INTEGER,m=0;for(let x=0;x<yt.VERSION_DECODE_INFO.length;x++){const b=yt.VERSION_DECODE_INFO[x];if(b===o)return yt.getVersionForNumber(x+7);const N=Sa.numBitsDiffering(o,b);N<d&&(m=x+7,d=N)}return d<=3?yt.getVersionForNumber(m):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),d=new ue(o);d.setRegion(0,0,9,9),d.setRegion(o-8,0,8,9),d.setRegion(0,o-8,9,8);const m=this.alignmentPatternCenters.length;for(let x=0;x<m;x++){const b=this.alignmentPatternCenters[x]-2;for(let N=0;N<m;N++)x===0&&(N===0||N===m-1)||x===m-1&&N===0||d.setRegion(this.alignmentPatternCenters[N]-2,b,5,5)}return d.setRegion(6,9,1,o-17),d.setRegion(9,6,o-17,1),this.versionNumber>6&&(d.setRegion(o-11,0,3,6),d.setRegion(0,o-11,6,3)),d}toString(){return""+this.versionNumber}}yt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),yt.VERSIONS=[new yt(1,new Int32Array(0),new Te(7,new ne(1,19)),new Te(10,new ne(1,16)),new Te(13,new ne(1,13)),new Te(17,new ne(1,9))),new yt(2,Int32Array.from([6,18]),new Te(10,new ne(1,34)),new Te(16,new ne(1,28)),new Te(22,new ne(1,22)),new Te(28,new ne(1,16))),new yt(3,Int32Array.from([6,22]),new Te(15,new ne(1,55)),new Te(26,new ne(1,44)),new Te(18,new ne(2,17)),new Te(22,new ne(2,13))),new yt(4,Int32Array.from([6,26]),new Te(20,new ne(1,80)),new Te(18,new ne(2,32)),new Te(26,new ne(2,24)),new Te(16,new ne(4,9))),new yt(5,Int32Array.from([6,30]),new Te(26,new ne(1,108)),new Te(24,new ne(2,43)),new Te(18,new ne(2,15),new ne(2,16)),new Te(22,new ne(2,11),new ne(2,12))),new yt(6,Int32Array.from([6,34]),new Te(18,new ne(2,68)),new Te(16,new ne(4,27)),new Te(24,new ne(4,19)),new Te(28,new ne(4,15))),new yt(7,Int32Array.from([6,22,38]),new Te(20,new ne(2,78)),new Te(18,new ne(4,31)),new Te(18,new ne(2,14),new ne(4,15)),new Te(26,new ne(4,13),new ne(1,14))),new yt(8,Int32Array.from([6,24,42]),new Te(24,new ne(2,97)),new Te(22,new ne(2,38),new ne(2,39)),new Te(22,new ne(4,18),new ne(2,19)),new Te(26,new ne(4,14),new ne(2,15))),new yt(9,Int32Array.from([6,26,46]),new Te(30,new ne(2,116)),new Te(22,new ne(3,36),new ne(2,37)),new Te(20,new ne(4,16),new ne(4,17)),new Te(24,new ne(4,12),new ne(4,13))),new yt(10,Int32Array.from([6,28,50]),new Te(18,new ne(2,68),new ne(2,69)),new Te(26,new ne(4,43),new ne(1,44)),new Te(24,new ne(6,19),new ne(2,20)),new Te(28,new ne(6,15),new ne(2,16))),new yt(11,Int32Array.from([6,30,54]),new Te(20,new ne(4,81)),new Te(30,new ne(1,50),new ne(4,51)),new Te(28,new ne(4,22),new ne(4,23)),new Te(24,new ne(3,12),new ne(8,13))),new yt(12,Int32Array.from([6,32,58]),new Te(24,new ne(2,92),new ne(2,93)),new Te(22,new ne(6,36),new ne(2,37)),new Te(26,new ne(4,20),new ne(6,21)),new Te(28,new ne(7,14),new ne(4,15))),new yt(13,Int32Array.from([6,34,62]),new Te(26,new ne(4,107)),new Te(22,new ne(8,37),new ne(1,38)),new Te(24,new ne(8,20),new ne(4,21)),new Te(22,new ne(12,11),new ne(4,12))),new yt(14,Int32Array.from([6,26,46,66]),new Te(30,new ne(3,115),new ne(1,116)),new Te(24,new ne(4,40),new ne(5,41)),new Te(20,new ne(11,16),new ne(5,17)),new Te(24,new ne(11,12),new ne(5,13))),new yt(15,Int32Array.from([6,26,48,70]),new Te(22,new ne(5,87),new ne(1,88)),new Te(24,new ne(5,41),new ne(5,42)),new Te(30,new ne(5,24),new ne(7,25)),new Te(24,new ne(11,12),new ne(7,13))),new yt(16,Int32Array.from([6,26,50,74]),new Te(24,new ne(5,98),new ne(1,99)),new Te(28,new ne(7,45),new ne(3,46)),new Te(24,new ne(15,19),new ne(2,20)),new Te(30,new ne(3,15),new ne(13,16))),new yt(17,Int32Array.from([6,30,54,78]),new Te(28,new ne(1,107),new ne(5,108)),new Te(28,new ne(10,46),new ne(1,47)),new Te(28,new ne(1,22),new ne(15,23)),new Te(28,new ne(2,14),new ne(17,15))),new yt(18,Int32Array.from([6,30,56,82]),new Te(30,new ne(5,120),new ne(1,121)),new Te(26,new ne(9,43),new ne(4,44)),new Te(28,new ne(17,22),new ne(1,23)),new Te(28,new ne(2,14),new ne(19,15))),new yt(19,Int32Array.from([6,30,58,86]),new Te(28,new ne(3,113),new ne(4,114)),new Te(26,new ne(3,44),new ne(11,45)),new Te(26,new ne(17,21),new ne(4,22)),new Te(26,new ne(9,13),new ne(16,14))),new yt(20,Int32Array.from([6,34,62,90]),new Te(28,new ne(3,107),new ne(5,108)),new Te(26,new ne(3,41),new ne(13,42)),new Te(30,new ne(15,24),new ne(5,25)),new Te(28,new ne(15,15),new ne(10,16))),new yt(21,Int32Array.from([6,28,50,72,94]),new Te(28,new ne(4,116),new ne(4,117)),new Te(26,new ne(17,42)),new Te(28,new ne(17,22),new ne(6,23)),new Te(30,new ne(19,16),new ne(6,17))),new yt(22,Int32Array.from([6,26,50,74,98]),new Te(28,new ne(2,111),new ne(7,112)),new Te(28,new ne(17,46)),new Te(30,new ne(7,24),new ne(16,25)),new Te(24,new ne(34,13))),new yt(23,Int32Array.from([6,30,54,78,102]),new Te(30,new ne(4,121),new ne(5,122)),new Te(28,new ne(4,47),new ne(14,48)),new Te(30,new ne(11,24),new ne(14,25)),new Te(30,new ne(16,15),new ne(14,16))),new yt(24,Int32Array.from([6,28,54,80,106]),new Te(30,new ne(6,117),new ne(4,118)),new Te(28,new ne(6,45),new ne(14,46)),new Te(30,new ne(11,24),new ne(16,25)),new Te(30,new ne(30,16),new ne(2,17))),new yt(25,Int32Array.from([6,32,58,84,110]),new Te(26,new ne(8,106),new ne(4,107)),new Te(28,new ne(8,47),new ne(13,48)),new Te(30,new ne(7,24),new ne(22,25)),new Te(30,new ne(22,15),new ne(13,16))),new yt(26,Int32Array.from([6,30,58,86,114]),new Te(28,new ne(10,114),new ne(2,115)),new Te(28,new ne(19,46),new ne(4,47)),new Te(28,new ne(28,22),new ne(6,23)),new Te(30,new ne(33,16),new ne(4,17))),new yt(27,Int32Array.from([6,34,62,90,118]),new Te(30,new ne(8,122),new ne(4,123)),new Te(28,new ne(22,45),new ne(3,46)),new Te(30,new ne(8,23),new ne(26,24)),new Te(30,new ne(12,15),new ne(28,16))),new yt(28,Int32Array.from([6,26,50,74,98,122]),new Te(30,new ne(3,117),new ne(10,118)),new Te(28,new ne(3,45),new ne(23,46)),new Te(30,new ne(4,24),new ne(31,25)),new Te(30,new ne(11,15),new ne(31,16))),new yt(29,Int32Array.from([6,30,54,78,102,126]),new Te(30,new ne(7,116),new ne(7,117)),new Te(28,new ne(21,45),new ne(7,46)),new Te(30,new ne(1,23),new ne(37,24)),new Te(30,new ne(19,15),new ne(26,16))),new yt(30,Int32Array.from([6,26,52,78,104,130]),new Te(30,new ne(5,115),new ne(10,116)),new Te(28,new ne(19,47),new ne(10,48)),new Te(30,new ne(15,24),new ne(25,25)),new Te(30,new ne(23,15),new ne(25,16))),new yt(31,Int32Array.from([6,30,56,82,108,134]),new Te(30,new ne(13,115),new ne(3,116)),new Te(28,new ne(2,46),new ne(29,47)),new Te(30,new ne(42,24),new ne(1,25)),new Te(30,new ne(23,15),new ne(28,16))),new yt(32,Int32Array.from([6,34,60,86,112,138]),new Te(30,new ne(17,115)),new Te(28,new ne(10,46),new ne(23,47)),new Te(30,new ne(10,24),new ne(35,25)),new Te(30,new ne(19,15),new ne(35,16))),new yt(33,Int32Array.from([6,30,58,86,114,142]),new Te(30,new ne(17,115),new ne(1,116)),new Te(28,new ne(14,46),new ne(21,47)),new Te(30,new ne(29,24),new ne(19,25)),new Te(30,new ne(11,15),new ne(46,16))),new yt(34,Int32Array.from([6,34,62,90,118,146]),new Te(30,new ne(13,115),new ne(6,116)),new Te(28,new ne(14,46),new ne(23,47)),new Te(30,new ne(44,24),new ne(7,25)),new Te(30,new ne(59,16),new ne(1,17))),new yt(35,Int32Array.from([6,30,54,78,102,126,150]),new Te(30,new ne(12,121),new ne(7,122)),new Te(28,new ne(12,47),new ne(26,48)),new Te(30,new ne(39,24),new ne(14,25)),new Te(30,new ne(22,15),new ne(41,16))),new yt(36,Int32Array.from([6,24,50,76,102,128,154]),new Te(30,new ne(6,121),new ne(14,122)),new Te(28,new ne(6,47),new ne(34,48)),new Te(30,new ne(46,24),new ne(10,25)),new Te(30,new ne(2,15),new ne(64,16))),new yt(37,Int32Array.from([6,28,54,80,106,132,158]),new Te(30,new ne(17,122),new ne(4,123)),new Te(28,new ne(29,46),new ne(14,47)),new Te(30,new ne(49,24),new ne(10,25)),new Te(30,new ne(24,15),new ne(46,16))),new yt(38,Int32Array.from([6,32,58,84,110,136,162]),new Te(30,new ne(4,122),new ne(18,123)),new Te(28,new ne(13,46),new ne(32,47)),new Te(30,new ne(48,24),new ne(14,25)),new Te(30,new ne(42,15),new ne(32,16))),new yt(39,Int32Array.from([6,26,54,82,110,138,166]),new Te(30,new ne(20,117),new ne(4,118)),new Te(28,new ne(40,47),new ne(7,48)),new Te(30,new ne(43,24),new ne(22,25)),new Te(30,new ne(10,15),new ne(67,16))),new yt(40,Int32Array.from([6,30,58,86,114,142,170]),new Te(30,new ne(19,118),new ne(6,119)),new Te(28,new ne(18,47),new ne(31,48)),new Te(30,new ne(34,24),new ne(34,25)),new Te(30,new ne(20,15),new ne(61,16)))];var pa;(function(X){X[X.DATA_MASK_000=0]="DATA_MASK_000",X[X.DATA_MASK_001=1]="DATA_MASK_001",X[X.DATA_MASK_010=2]="DATA_MASK_010",X[X.DATA_MASK_011=3]="DATA_MASK_011",X[X.DATA_MASK_100=4]="DATA_MASK_100",X[X.DATA_MASK_101=5]="DATA_MASK_101",X[X.DATA_MASK_110=6]="DATA_MASK_110",X[X.DATA_MASK_111=7]="DATA_MASK_111"})(pa||(pa={}));class yn{constructor(o,d){this.value=o,this.isMasked=d}unmaskBitMatrix(o,d){for(let m=0;m<d;m++)for(let x=0;x<d;x++)this.isMasked(m,x)&&o.flip(x,m)}}yn.values=new Map([[pa.DATA_MASK_000,new yn(pa.DATA_MASK_000,(X,o)=>(X+o&1)===0)],[pa.DATA_MASK_001,new yn(pa.DATA_MASK_001,(X,o)=>(X&1)===0)],[pa.DATA_MASK_010,new yn(pa.DATA_MASK_010,(X,o)=>o%3===0)],[pa.DATA_MASK_011,new yn(pa.DATA_MASK_011,(X,o)=>(X+o)%3===0)],[pa.DATA_MASK_100,new yn(pa.DATA_MASK_100,(X,o)=>(Math.floor(X/2)+Math.floor(o/3)&1)===0)],[pa.DATA_MASK_101,new yn(pa.DATA_MASK_101,(X,o)=>X*o%6===0)],[pa.DATA_MASK_110,new yn(pa.DATA_MASK_110,(X,o)=>X*o%6<3)],[pa.DATA_MASK_111,new yn(pa.DATA_MASK_111,(X,o)=>(X+o+X*o%3&1)===0)]]);class ji{constructor(o){const d=o.getHeight();if(d<21||(d&3)!==1)throw new L;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let b=0;b<6;b++)o=this.copyBit(b,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let b=5;b>=0;b--)o=this.copyBit(8,b,o);const d=this.bitMatrix.getHeight();let m=0;const x=d-7;for(let b=d-1;b>=x;b--)m=this.copyBit(8,b,m);for(let b=d-8;b<d;b++)m=this.copyBit(b,8,m);if(this.parsedFormatInfo=Sa.decodeFormatInformation(o,m),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const o=this.bitMatrix.getHeight(),d=Math.floor((o-17)/4);if(d<=6)return yt.getVersionForNumber(d);let m=0;const x=o-11;for(let N=5;N>=0;N--)for(let S=o-9;S>=x;S--)m=this.copyBit(S,N,m);let b=yt.decodeVersionInformation(m);if(b!==null&&b.getDimensionForVersion()===o)return this.parsedVersion=b,b;m=0;for(let N=5;N>=0;N--)for(let S=o-9;S>=x;S--)m=this.copyBit(N,S,m);if(b=yt.decodeVersionInformation(m),b!==null&&b.getDimensionForVersion()===o)return this.parsedVersion=b,b;throw new L}copyBit(o,d,m){return(this.isMirror?this.bitMatrix.get(d,o):this.bitMatrix.get(o,d))?m<<1|1:m<<1}readCodewords(){const o=this.readFormatInformation(),d=this.readVersion(),m=yn.values.get(o.getDataMask()),x=this.bitMatrix.getHeight();m.unmaskBitMatrix(this.bitMatrix,x);const b=d.buildFunctionPattern();let N=!0;const S=new Uint8Array(d.getTotalCodewords());let O=0,I=0,z=0;for(let W=x-1;W>0;W-=2){W===6&&W--;for(let Z=0;Z<x;Z++){const se=N?x-1-Z:Z;for(let fe=0;fe<2;fe++)b.get(W-fe,se)||(z++,I<<=1,this.bitMatrix.get(W-fe,se)&&(I|=1),z===8&&(S[O++]=I,z=0,I=0))}N=!N}if(O!==d.getTotalCodewords())throw new L;return S}remask(){if(this.parsedFormatInfo===null)return;const o=yn.values[this.parsedFormatInfo.getDataMask()],d=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,d)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let d=0,m=o.getWidth();d<m;d++)for(let x=d+1,b=o.getHeight();x<b;x++)o.get(d,x)!==o.get(x,d)&&(o.flip(x,d),o.flip(d,x))}}class Rd{constructor(o,d){this.numDataCodewords=o,this.codewords=d}static getDataBlocks(o,d,m){if(o.length!==d.getTotalCodewords())throw new v;const x=d.getECBlocksForLevel(m);let b=0;const N=x.getECBlocks();for(const fe of N)b+=fe.getCount();const S=new Array(b);let O=0;for(const fe of N)for(let he=0;he<fe.getCount();he++){const Ae=fe.getDataCodewords(),Ie=x.getECCodewordsPerBlock()+Ae;S[O++]=new Rd(Ae,new Uint8Array(Ie))}const I=S[0].codewords.length;let z=S.length-1;for(;z>=0&&S[z].codewords.length!==I;)z--;z++;const W=I-x.getECCodewordsPerBlock();let Z=0;for(let fe=0;fe<W;fe++)for(let he=0;he<O;he++)S[he].codewords[fe]=o[Z++];for(let fe=z;fe<O;fe++)S[fe].codewords[W]=o[Z++];const se=S[0].codewords.length;for(let fe=W;fe<se;fe++)for(let he=0;he<O;he++){const Ae=he<z?fe:fe+1;S[he].codewords[Ae]=o[Z++]}return S}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var xn;(function(X){X[X.TERMINATOR=0]="TERMINATOR",X[X.NUMERIC=1]="NUMERIC",X[X.ALPHANUMERIC=2]="ALPHANUMERIC",X[X.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",X[X.BYTE=4]="BYTE",X[X.ECI=5]="ECI",X[X.KANJI=6]="KANJI",X[X.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",X[X.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",X[X.HANZI=9]="HANZI"})(xn||(xn={}));class Et{constructor(o,d,m,x){this.value=o,this.stringValue=d,this.characterCountBitsForVersions=m,this.bits=x,Et.FOR_BITS.set(x,this),Et.FOR_VALUE.set(o,this)}static forBits(o){const d=Et.FOR_BITS.get(o);if(d===void 0)throw new v;return d}getCharacterCountBits(o){const d=o.getVersionNumber();let m;return d<=9?m=0:d<=26?m=1:m=2,this.characterCountBitsForVersions[m]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof Et))return!1;const d=o;return this.value===d.value}toString(){return this.stringValue}}Et.FOR_BITS=new Map,Et.FOR_VALUE=new Map,Et.TERMINATOR=new Et(xn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Et.NUMERIC=new Et(xn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Et.ALPHANUMERIC=new Et(xn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Et.STRUCTURED_APPEND=new Et(xn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Et.BYTE=new Et(xn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Et.ECI=new Et(xn.ECI,"ECI",Int32Array.from([0,0,0]),7),Et.KANJI=new Et(xn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Et.FNC1_FIRST_POSITION=new Et(xn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Et.FNC1_SECOND_POSITION=new Et(xn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Et.HANZI=new Et(xn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ar{static decode(o,d,m,x){const b=new Xn(o);let N=new le;const S=new Array;let O=-1,I=-1;try{let z=null,W=!1,Z;do{if(b.available()<4)Z=Et.TERMINATOR;else{const se=b.readBits(4);Z=Et.forBits(se)}switch(Z){case Et.TERMINATOR:break;case Et.FNC1_FIRST_POSITION:case Et.FNC1_SECOND_POSITION:W=!0;break;case Et.STRUCTURED_APPEND:if(b.available()<16)throw new L;O=b.readBits(8),I=b.readBits(8);break;case Et.ECI:const se=Ar.parseECIValue(b);if(z=j.getCharacterSetECIByValue(se),z===null)throw new L;break;case Et.HANZI:const fe=b.readBits(4),he=b.readBits(Z.getCharacterCountBits(d));fe===Ar.GB2312_SUBSET&&Ar.decodeHanziSegment(b,N,he);break;default:const Ae=b.readBits(Z.getCharacterCountBits(d));switch(Z){case Et.NUMERIC:Ar.decodeNumericSegment(b,N,Ae);break;case Et.ALPHANUMERIC:Ar.decodeAlphanumericSegment(b,N,Ae,W);break;case Et.BYTE:Ar.decodeByteSegment(b,N,Ae,z,S,x);break;case Et.KANJI:Ar.decodeKanjiSegment(b,N,Ae);break;default:throw new L}break}}while(Z!==Et.TERMINATOR)}catch{throw new L}return new ve(o,N.toString(),S.length===0?null:S,m===null?null:m.toString(),O,I)}static decodeHanziSegment(o,d,m){if(m*13>o.available())throw new L;const x=new Uint8Array(2*m);let b=0;for(;m>0;){const N=o.readBits(13);let S=N/96<<8&4294967295|N%96;S<959?S+=41377:S+=42657,x[b]=S>>8&255,x[b+1]=S&255,b+=2,m--}try{d.append(H.decode(x,q.GB2312))}catch(N){throw new L(N)}}static decodeKanjiSegment(o,d,m){if(m*13>o.available())throw new L;const x=new Uint8Array(2*m);let b=0;for(;m>0;){const N=o.readBits(13);let S=N/192<<8&4294967295|N%192;S<7936?S+=33088:S+=49472,x[b]=S>>8,x[b+1]=S,b+=2,m--}try{d.append(H.decode(x,q.SHIFT_JIS))}catch(N){throw new L(N)}}static decodeByteSegment(o,d,m,x,b,N){if(8*m>o.available())throw new L;const S=new Uint8Array(m);for(let I=0;I<m;I++)S[I]=o.readBits(8);let O;x===null?O=q.guessEncoding(S,N):O=x.getName();try{d.append(H.decode(S,O))}catch(I){throw new L(I)}b.push(S)}static toAlphaNumericChar(o){if(o>=Ar.ALPHANUMERIC_CHARS.length)throw new L;return Ar.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,d,m,x){const b=d.length();for(;m>1;){if(o.available()<11)throw new L;const N=o.readBits(11);d.append(Ar.toAlphaNumericChar(Math.floor(N/45))),d.append(Ar.toAlphaNumericChar(N%45)),m-=2}if(m===1){if(o.available()<6)throw new L;d.append(Ar.toAlphaNumericChar(o.readBits(6)))}if(x)for(let N=b;N<d.length();N++)d.charAt(N)==="%"&&(N<d.length()-1&&d.charAt(N+1)==="%"?d.deleteCharAt(N+1):d.setCharAt(N,""))}static decodeNumericSegment(o,d,m){for(;m>=3;){if(o.available()<10)throw new L;const x=o.readBits(10);if(x>=1e3)throw new L;d.append(Ar.toAlphaNumericChar(Math.floor(x/100))),d.append(Ar.toAlphaNumericChar(Math.floor(x/10)%10)),d.append(Ar.toAlphaNumericChar(x%10)),m-=3}if(m===2){if(o.available()<7)throw new L;const x=o.readBits(7);if(x>=100)throw new L;d.append(Ar.toAlphaNumericChar(Math.floor(x/10))),d.append(Ar.toAlphaNumericChar(x%10))}else if(m===1){if(o.available()<4)throw new L;const x=o.readBits(4);if(x>=10)throw new L;d.append(Ar.toAlphaNumericChar(x))}}static parseECIValue(o){const d=o.readBits(8);if((d&128)===0)return d&127;if((d&192)===128){const m=o.readBits(8);return(d&63)<<8&4294967295|m}if((d&224)===192){const m=o.readBits(16);return(d&31)<<16&4294967295|m}throw new L}}Ar.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ar.GB2312_SUBSET=1;class c0{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;const d=o[0];o[0]=o[2],o[2]=d}}class Fy{constructor(){this.rsDecoder=new qe(Ee.QR_CODE_FIELD_256)}decodeBooleanArray(o,d){return this.decodeBitMatrix(ue.parseFromBooleanArray(o),d)}decodeBitMatrix(o,d){const m=new ji(o);let x=null;try{return this.decodeBitMatrixParser(m,d)}catch(b){x=b}try{m.remask(),m.setMirror(!0),m.readVersion(),m.readFormatInformation(),m.mirror();const b=this.decodeBitMatrixParser(m,d);return b.setOther(new c0(!0)),b}catch(b){throw x!==null?x:b}}decodeBitMatrixParser(o,d){const m=o.readVersion(),x=o.readFormatInformation().getErrorCorrectionLevel(),b=o.readCodewords(),N=Rd.getDataBlocks(b,m,x);let S=0;for(const z of N)S+=z.getNumDataCodewords();const O=new Uint8Array(S);let I=0;for(const z of N){const W=z.getCodewords(),Z=z.getNumDataCodewords();this.correctErrors(W,Z);for(let se=0;se<Z;se++)O[I++]=W[se]}return Ar.decode(O,m,x,d)}correctErrors(o,d){const m=new Int32Array(o);try{this.rsDecoder.decode(m,o.length-d)}catch{throw new T}for(let x=0;x<d;x++)o[x]=m[x]}}class zi extends Ke{constructor(o,d,m){super(o,d),this.estimatedModuleSize=m}aboutEquals(o,d,m){if(Math.abs(d-this.getY())<=o&&Math.abs(m-this.getX())<=o){const x=Math.abs(o-this.estimatedModuleSize);return x<=1||x<=this.estimatedModuleSize}return!1}combineEstimate(o,d,m){const x=(this.getX()+d)/2,b=(this.getY()+o)/2,N=(this.estimatedModuleSize+m)/2;return new zi(x,b,N)}}class Dn{constructor(o,d,m,x,b,N,S){this.image=o,this.startX=d,this.startY=m,this.width=x,this.height=b,this.moduleSize=N,this.resultPointCallback=S,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,d=this.height,m=this.width,x=o+m,b=this.startY+d/2,N=new Int32Array(3),S=this.image;for(let O=0;O<d;O++){const I=b+((O&1)===0?Math.floor((O+1)/2):-Math.floor((O+1)/2));N[0]=0,N[1]=0,N[2]=0;let z=o;for(;z<x&&!S.get(z,I);)z++;let W=0;for(;z<x;){if(S.get(z,I))if(W===1)N[1]++;else if(W===2){if(this.foundPatternCross(N)){const Z=this.handlePossibleCenter(N,I,z);if(Z!==null)return Z}N[0]=N[2],N[1]=1,N[2]=0,W=1}else N[++W]++;else W===1&&W++,N[W]++;z++}if(this.foundPatternCross(N)){const Z=this.handlePossibleCenter(N,I,x);if(Z!==null)return Z}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new re}static centerFromEnd(o,d){return d-o[2]-o[1]/2}foundPatternCross(o){const d=this.moduleSize,m=d/2;for(let x=0;x<3;x++)if(Math.abs(d-o[x])>=m)return!1;return!0}crossCheckVertical(o,d,m,x){const b=this.image,N=b.getHeight(),S=this.crossCheckStateCount;S[0]=0,S[1]=0,S[2]=0;let O=o;for(;O>=0&&b.get(d,O)&&S[1]<=m;)S[1]++,O--;if(O<0||S[1]>m)return NaN;for(;O>=0&&!b.get(d,O)&&S[0]<=m;)S[0]++,O--;if(S[0]>m)return NaN;for(O=o+1;O<N&&b.get(d,O)&&S[1]<=m;)S[1]++,O++;if(O===N||S[1]>m)return NaN;for(;O<N&&!b.get(d,O)&&S[2]<=m;)S[2]++,O++;if(S[2]>m)return NaN;const I=S[0]+S[1]+S[2];return 5*Math.abs(I-x)>=2*x?NaN:this.foundPatternCross(S)?Dn.centerFromEnd(S,O):NaN}handlePossibleCenter(o,d,m){const x=o[0]+o[1]+o[2],b=Dn.centerFromEnd(o,m),N=this.crossCheckVertical(d,b,2*o[1],x);if(!isNaN(N)){const S=(o[0]+o[1]+o[2])/3;for(const I of this.possibleCenters)if(I.aboutEquals(S,N,b))return I.combineEstimate(N,b,S);const O=new zi(b,N,S);this.possibleCenters.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return null}}class qo extends Ke{constructor(o,d,m,x){super(o,d),this.estimatedModuleSize=m,this.count=x,x===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,d,m){if(Math.abs(d-this.getY())<=o&&Math.abs(m-this.getX())<=o){const x=Math.abs(o-this.estimatedModuleSize);return x<=1||x<=this.estimatedModuleSize}return!1}combineEstimate(o,d,m){const x=this.count+1,b=(this.count*this.getX()+d)/x,N=(this.count*this.getY()+o)/x,S=(this.count*this.estimatedModuleSize+m)/x;return new qo(b,N,S,x)}}class Ld{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class jr{constructor(o,d){this.image=o,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=d}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const d=o!=null&&o.get(U.TRY_HARDER)!==void 0,m=o!=null&&o.get(U.PURE_BARCODE)!==void 0,x=this.image,b=x.getHeight(),N=x.getWidth();let S=Math.floor(3*b/(4*jr.MAX_MODULES));(S<jr.MIN_SKIP||d)&&(S=jr.MIN_SKIP);let O=!1;const I=new Int32Array(5);for(let W=S-1;W<b&&!O;W+=S){I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0;let Z=0;for(let se=0;se<N;se++)if(x.get(se,W))(Z&1)===1&&Z++,I[Z]++;else if((Z&1)===0)if(Z===4)if(jr.foundPatternCross(I)){if(this.handlePossibleCenter(I,W,se,m)===!0)if(S=2,this.hasSkipped===!0)O=this.haveMultiplyConfirmedCenters();else{const he=this.findRowSkip();he>I[2]&&(W+=he-I[2]-S,se=N-1)}else{I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,Z=3;continue}Z=0,I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0}else I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,Z=3;else I[++Z]++;else I[Z]++;jr.foundPatternCross(I)&&this.handlePossibleCenter(I,W,N,m)===!0&&(S=I[0],this.hasSkipped&&(O=this.haveMultiplyConfirmedCenters()))}const z=this.selectBestPatterns();return Ke.orderBestPatterns(z),new Ld(z)}static centerFromEnd(o,d){return d-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let d=0;for(let b=0;b<5;b++){const N=o[b];if(N===0)return!1;d+=N}if(d<7)return!1;const m=d/7,x=m/2;return Math.abs(m-o[0])<x&&Math.abs(m-o[1])<x&&Math.abs(3*m-o[2])<3*x&&Math.abs(m-o[3])<x&&Math.abs(m-o[4])<x}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,d,m,x){const b=this.getCrossCheckStateCount();let N=0;const S=this.image;for(;o>=N&&d>=N&&S.get(d-N,o-N);)b[2]++,N++;if(o<N||d<N)return!1;for(;o>=N&&d>=N&&!S.get(d-N,o-N)&&b[1]<=m;)b[1]++,N++;if(o<N||d<N||b[1]>m)return!1;for(;o>=N&&d>=N&&S.get(d-N,o-N)&&b[0]<=m;)b[0]++,N++;if(b[0]>m)return!1;const O=S.getHeight(),I=S.getWidth();for(N=1;o+N<O&&d+N<I&&S.get(d+N,o+N);)b[2]++,N++;if(o+N>=O||d+N>=I)return!1;for(;o+N<O&&d+N<I&&!S.get(d+N,o+N)&&b[3]<m;)b[3]++,N++;if(o+N>=O||d+N>=I||b[3]>=m)return!1;for(;o+N<O&&d+N<I&&S.get(d+N,o+N)&&b[4]<m;)b[4]++,N++;if(b[4]>=m)return!1;const z=b[0]+b[1]+b[2]+b[3]+b[4];return Math.abs(z-x)<2*x&&jr.foundPatternCross(b)}crossCheckVertical(o,d,m,x){const b=this.image,N=b.getHeight(),S=this.getCrossCheckStateCount();let O=o;for(;O>=0&&b.get(d,O);)S[2]++,O--;if(O<0)return NaN;for(;O>=0&&!b.get(d,O)&&S[1]<=m;)S[1]++,O--;if(O<0||S[1]>m)return NaN;for(;O>=0&&b.get(d,O)&&S[0]<=m;)S[0]++,O--;if(S[0]>m)return NaN;for(O=o+1;O<N&&b.get(d,O);)S[2]++,O++;if(O===N)return NaN;for(;O<N&&!b.get(d,O)&&S[3]<m;)S[3]++,O++;if(O===N||S[3]>=m)return NaN;for(;O<N&&b.get(d,O)&&S[4]<m;)S[4]++,O++;if(S[4]>=m)return NaN;const I=S[0]+S[1]+S[2]+S[3]+S[4];return 5*Math.abs(I-x)>=2*x?NaN:jr.foundPatternCross(S)?jr.centerFromEnd(S,O):NaN}crossCheckHorizontal(o,d,m,x){const b=this.image,N=b.getWidth(),S=this.getCrossCheckStateCount();let O=o;for(;O>=0&&b.get(O,d);)S[2]++,O--;if(O<0)return NaN;for(;O>=0&&!b.get(O,d)&&S[1]<=m;)S[1]++,O--;if(O<0||S[1]>m)return NaN;for(;O>=0&&b.get(O,d)&&S[0]<=m;)S[0]++,O--;if(S[0]>m)return NaN;for(O=o+1;O<N&&b.get(O,d);)S[2]++,O++;if(O===N)return NaN;for(;O<N&&!b.get(O,d)&&S[3]<m;)S[3]++,O++;if(O===N||S[3]>=m)return NaN;for(;O<N&&b.get(O,d)&&S[4]<m;)S[4]++,O++;if(S[4]>=m)return NaN;const I=S[0]+S[1]+S[2]+S[3]+S[4];return 5*Math.abs(I-x)>=x?NaN:jr.foundPatternCross(S)?jr.centerFromEnd(S,O):NaN}handlePossibleCenter(o,d,m,x){const b=o[0]+o[1]+o[2]+o[3]+o[4];let N=jr.centerFromEnd(o,m),S=this.crossCheckVertical(d,Math.floor(N),o[2],b);if(!isNaN(S)&&(N=this.crossCheckHorizontal(Math.floor(N),Math.floor(S),o[2],b),!isNaN(N)&&(!x||this.crossCheckDiagonal(Math.floor(S),Math.floor(N),o[2],b)))){const O=b/7;let I=!1;const z=this.possibleCenters;for(let W=0,Z=z.length;W<Z;W++){const se=z[W];if(se.aboutEquals(O,S,N)){z[W]=se.combineEstimate(S,N,O),I=!0;break}}if(!I){const W=new qo(N,S,O);z.push(W),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(W)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let d=null;for(const m of this.possibleCenters)if(m.getCount()>=jr.CENTER_QUORUM)if(d==null)d=m;else return this.hasSkipped=!0,Math.floor((Math.abs(d.getX()-m.getX())-Math.abs(d.getY()-m.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,d=0;const m=this.possibleCenters.length;for(const N of this.possibleCenters)N.getCount()>=jr.CENTER_QUORUM&&(o++,d+=N.getEstimatedModuleSize());if(o<3)return!1;const x=d/m;let b=0;for(const N of this.possibleCenters)b+=Math.abs(N.getEstimatedModuleSize()-x);return b<=.05*d}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new re;const d=this.possibleCenters;let m;if(o>3){let x=0,b=0;for(const O of this.possibleCenters){const I=O.getEstimatedModuleSize();x+=I,b+=I*I}m=x/o;let N=Math.sqrt(b/o-m*m);d.sort((O,I)=>{const z=Math.abs(I.getEstimatedModuleSize()-m),W=Math.abs(O.getEstimatedModuleSize()-m);return z<W?-1:z>W?1:0});const S=Math.max(.2*m,N);for(let O=0;O<d.length&&d.length>3;O++){const I=d[O];Math.abs(I.getEstimatedModuleSize()-m)>S&&(d.splice(O,1),O--)}}if(d.length>3){let x=0;for(const b of d)x+=b.getEstimatedModuleSize();m=x/d.length,d.sort((b,N)=>{if(N.getCount()===b.getCount()){const S=Math.abs(N.getEstimatedModuleSize()-m),O=Math.abs(b.getEstimatedModuleSize()-m);return S<O?1:S>O?-1:0}else return N.getCount()-b.getCount()}),d.splice(3)}return[d[0],d[1],d[2]]}}jr.CENTER_QUORUM=2,jr.MIN_SKIP=3,jr.MAX_MODULES=57;class hs{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(U.NEED_RESULT_POINT_CALLBACK);const m=new jr(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(m)}processFinderPatternInfo(o){const d=o.getTopLeft(),m=o.getTopRight(),x=o.getBottomLeft(),b=this.calculateModuleSize(d,m,x);if(b<1)throw new re("No pattern found in proccess finder.");const N=hs.computeDimension(d,m,x,b),S=yt.getProvisionalVersionForDimension(N),O=S.getDimensionForVersion()-7;let I=null;if(S.getAlignmentPatternCenters().length>0){const se=m.getX()-d.getX()+x.getX(),fe=m.getY()-d.getY()+x.getY(),he=1-3/O,Ae=Math.floor(d.getX()+he*(se-d.getX())),Ie=Math.floor(d.getY()+he*(fe-d.getY()));for(let at=4;at<=16;at<<=1)try{I=this.findAlignmentInRegion(b,Ae,Ie,at);break}catch(et){if(!(et instanceof re))throw et}}const z=hs.createTransform(d,m,x,I,N),W=hs.sampleGrid(this.image,z,N);let Z;return I===null?Z=[x,d,m]:Z=[x,d,m,I],new lt(W,Z)}static createTransform(o,d,m,x,b){const N=b-3.5;let S,O,I,z;return x!==null?(S=x.getX(),O=x.getY(),I=N-3,z=I):(S=d.getX()-o.getX()+m.getX(),O=d.getY()-o.getY()+m.getY(),I=N,z=N),ir.quadrilateralToQuadrilateral(3.5,3.5,N,3.5,I,z,3.5,N,o.getX(),o.getY(),d.getX(),d.getY(),S,O,m.getX(),m.getY())}static sampleGrid(o,d,m){return ut.getInstance().sampleGridWithTransform(o,m,m,d)}static computeDimension(o,d,m,x){const b=it.round(Ke.distance(o,d)/x),N=it.round(Ke.distance(o,m)/x);let S=Math.floor((b+N)/2)+7;switch(S&3){case 0:S++;break;case 2:S--;break;case 3:throw new re("Dimensions could be not found.")}return S}calculateModuleSize(o,d,m){return(this.calculateModuleSizeOneWay(o,d)+this.calculateModuleSizeOneWay(o,m))/2}calculateModuleSizeOneWay(o,d){const m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(d.getX()),Math.floor(d.getY())),x=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(d.getX()),Math.floor(d.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(m)?x/7:isNaN(x)?m/7:(m+x)/14}sizeOfBlackWhiteBlackRunBothWays(o,d,m,x){let b=this.sizeOfBlackWhiteBlackRun(o,d,m,x),N=1,S=o-(m-o);S<0?(N=o/(o-S),S=0):S>=this.image.getWidth()&&(N=(this.image.getWidth()-1-o)/(S-o),S=this.image.getWidth()-1);let O=Math.floor(d-(x-d)*N);return N=1,O<0?(N=d/(d-O),O=0):O>=this.image.getHeight()&&(N=(this.image.getHeight()-1-d)/(O-d),O=this.image.getHeight()-1),S=Math.floor(o+(S-o)*N),b+=this.sizeOfBlackWhiteBlackRun(o,d,S,O),b-1}sizeOfBlackWhiteBlackRun(o,d,m,x){const b=Math.abs(x-d)>Math.abs(m-o);if(b){let se=o;o=d,d=se,se=m,m=x,x=se}const N=Math.abs(m-o),S=Math.abs(x-d);let O=-N/2;const I=o<m?1:-1,z=d<x?1:-1;let W=0;const Z=m+I;for(let se=o,fe=d;se!==Z;se+=I){const he=b?fe:se,Ae=b?se:fe;if(W===1===this.image.get(he,Ae)){if(W===2)return it.distance(se,fe,o,d);W++}if(O+=S,O>0){if(fe===x)break;fe+=z,O-=N}}return W===2?it.distance(m+I,x,o,d):NaN}findAlignmentInRegion(o,d,m,x){const b=Math.floor(x*o),N=Math.max(0,d-b),S=Math.min(this.image.getWidth()-1,d+b);if(S-N<o*3)throw new re("Alignment top exceeds estimated module size.");const O=Math.max(0,m-b),I=Math.min(this.image.getHeight()-1,m+b);if(I-O<o*3)throw new re("Alignment bottom exceeds estimated module size.");return new Dn(this.image,N,O,S-N,I-O,o,this.resultPointCallback).find()}}class qs{constructor(){this.decoder=new Fy}getDecoder(){return this.decoder}decode(o,d){let m,x;if(d!=null&&d.get(U.PURE_BARCODE)!==void 0){const O=qs.extractPureBits(o.getBlackMatrix());m=this.decoder.decodeBitMatrix(O,d),x=qs.NO_POINTS}else{const O=new hs(o.getBlackMatrix()).detect(d);m=this.decoder.decodeBitMatrix(O.getBits(),d),x=O.getPoints()}m.getOther()instanceof c0&&m.getOther().applyMirroredCorrection(x);const b=new oe(m.getText(),m.getRawBytes(),void 0,x,ie.QR_CODE,void 0),N=m.getByteSegments();N!==null&&b.putMetadata($e.BYTE_SEGMENTS,N);const S=m.getECLevel();return S!==null&&b.putMetadata($e.ERROR_CORRECTION_LEVEL,S),m.hasStructuredAppend()&&(b.putMetadata($e.STRUCTURED_APPEND_SEQUENCE,m.getStructuredAppendSequenceNumber()),b.putMetadata($e.STRUCTURED_APPEND_PARITY,m.getStructuredAppendParity())),b}reset(){}static extractPureBits(o){const d=o.getTopLeftOnBit(),m=o.getBottomRightOnBit();if(d===null||m===null)throw new re;const x=this.moduleSize(d,o);let b=d[1],N=m[1],S=d[0],O=m[0];if(S>=O||b>=N)throw new re;if(N-b!==O-S&&(O=S+(N-b),O>=o.getWidth()))throw new re;const I=Math.round((O-S+1)/x),z=Math.round((N-b+1)/x);if(I<=0||z<=0)throw new re;if(z!==I)throw new re;const W=Math.floor(x/2);b+=W,S+=W;const Z=S+Math.floor((I-1)*x)-O;if(Z>0){if(Z>W)throw new re;S-=Z}const se=b+Math.floor((z-1)*x)-N;if(se>0){if(se>W)throw new re;b-=se}const fe=new ue(I,z);for(let he=0;he<z;he++){const Ae=b+Math.floor(he*x);for(let Ie=0;Ie<I;Ie++)o.get(S+Math.floor(Ie*x),Ae)&&fe.set(Ie,he)}return fe}static moduleSize(o,d){const m=d.getHeight(),x=d.getWidth();let b=o[0],N=o[1],S=!0,O=0;for(;b<x&&N<m;){if(S!==d.get(b,N)){if(++O===5)break;S=!S}b++,N++}if(b===x||N===m)throw new re;return(b-o[0])/7}}qs.NO_POINTS=new Array;class St{PDF417Common(){}static getBitCountSum(o){return it.sum(o)}static toIntArray(o){if(o==null||!o.length)return St.EMPTY_INT_ARRAY;const d=new Int32Array(o.length);let m=0;for(const x of o)d[m++]=x;return d}static getCodeword(o){const d=B.binarySearch(St.SYMBOL_TABLE,o&262143);return d<0?-1:(St.CODEWORD_TABLE[d]-1)%St.NUMBER_OF_CODEWORDS}}St.NUMBER_OF_CODEWORDS=929,St.MAX_CODEWORDS_IN_BARCODE=St.NUMBER_OF_CODEWORDS-1,St.MIN_ROWS_IN_BARCODE=3,St.MAX_ROWS_IN_BARCODE=90,St.MODULES_IN_CODEWORD=17,St.MODULES_IN_STOP_PATTERN=18,St.BARS_IN_MODULE=8,St.EMPTY_INT_ARRAY=new Int32Array([]),St.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),St.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class u0{constructor(o,d){this.bits=o,this.points=d}getBits(){return this.bits}getPoints(){return this.points}}class _t{static detectMultiple(o,d,m){let x=o.getBlackMatrix(),b=_t.detect(m,x);return b.length||(x=x.clone(),x.rotate180(),b=_t.detect(m,x)),new u0(x,b)}static detect(o,d){const m=new Array;let x=0,b=0,N=!1;for(;x<d.getHeight();){const S=_t.findVertices(d,x,b);if(S[0]==null&&S[3]==null){if(!N)break;N=!1,b=0;for(const O of m)O[1]!=null&&(x=Math.trunc(Math.max(x,O[1].getY()))),O[3]!=null&&(x=Math.max(x,Math.trunc(O[3].getY())));x+=_t.ROW_STEP;continue}if(N=!0,m.push(S),!o)break;S[2]!=null?(b=Math.trunc(S[2].getX()),x=Math.trunc(S[2].getY())):(b=Math.trunc(S[4].getX()),x=Math.trunc(S[4].getY()))}return m}static findVertices(o,d,m){const x=o.getHeight(),b=o.getWidth(),N=new Array(8);return _t.copyToResult(N,_t.findRowsWithPattern(o,x,b,d,m,_t.START_PATTERN),_t.INDEXES_START_PATTERN),N[4]!=null&&(m=Math.trunc(N[4].getX()),d=Math.trunc(N[4].getY())),_t.copyToResult(N,_t.findRowsWithPattern(o,x,b,d,m,_t.STOP_PATTERN),_t.INDEXES_STOP_PATTERN),N}static copyToResult(o,d,m){for(let x=0;x<m.length;x++)o[m[x]]=d[x]}static findRowsWithPattern(o,d,m,x,b,N){const S=new Array(4);let O=!1;const I=new Int32Array(N.length);for(;x<d;x+=_t.ROW_STEP){let W=_t.findGuardPattern(o,b,x,m,!1,N,I);if(W!=null){for(;x>0;){const Z=_t.findGuardPattern(o,b,--x,m,!1,N,I);if(Z!=null)W=Z;else{x++;break}}S[0]=new Ke(W[0],x),S[1]=new Ke(W[1],x),O=!0;break}}let z=x+1;if(O){let W=0,Z=Int32Array.from([Math.trunc(S[0].getX()),Math.trunc(S[1].getX())]);for(;z<d;z++){const se=_t.findGuardPattern(o,Z[0],z,m,!1,N,I);if(se!=null&&Math.abs(Z[0]-se[0])<_t.MAX_PATTERN_DRIFT&&Math.abs(Z[1]-se[1])<_t.MAX_PATTERN_DRIFT)Z=se,W=0;else{if(W>_t.SKIPPED_ROW_COUNT_MAX)break;W++}}z-=W+1,S[2]=new Ke(Z[0],z),S[3]=new Ke(Z[1],z)}return z-x<_t.BARCODE_MIN_HEIGHT&&B.fill(S,null),S}static findGuardPattern(o,d,m,x,b,N,S){B.fillWithin(S,0,S.length,0);let O=d,I=0;for(;o.get(O,m)&&O>0&&I++<_t.MAX_PIXEL_DRIFT;)O--;let z=O,W=0,Z=N.length;for(let se=b;z<x;z++)if(o.get(z,m)!==se)S[W]++;else{if(W===Z-1){if(_t.patternMatchVariance(S,N,_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE)return new Int32Array([O,z]);O+=S[0]+S[1],P.arraycopy(S,2,S,0,W-1),S[W-1]=0,S[W]=0,W--}else W++;S[W]=1,se=!se}return W===Z-1&&_t.patternMatchVariance(S,N,_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE?new Int32Array([O,z-1]):null}static patternMatchVariance(o,d,m){let x=o.length,b=0,N=0;for(let I=0;I<x;I++)b+=o[I],N+=d[I];if(b<N)return 1/0;let S=b/N;m*=S;let O=0;for(let I=0;I<x;I++){let z=o[I],W=d[I]*S,Z=z>W?z-W:W-z;if(Z>m)return 1/0;O+=Z}return O/b}}_t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),_t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),_t.MAX_AVG_VARIANCE=.42,_t.MAX_INDIVIDUAL_VARIANCE=.8,_t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),_t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),_t.MAX_PIXEL_DRIFT=3,_t.MAX_PATTERN_DRIFT=5,_t.SKIPPED_ROW_COUNT_MAX=25,_t.ROW_STEP=5,_t.BARCODE_MIN_HEIGHT=10;class Tr{constructor(o,d){if(d.length===0)throw new v;this.field=o;let m=d.length;if(m>1&&d[0]===0){let x=1;for(;x<m&&d[x]===0;)x++;x===m?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(m-x),P.arraycopy(d,x,this.coefficients,0,this.coefficients.length))}else this.coefficients=d}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let x=0;for(let b of this.coefficients)x=this.field.add(x,b);return x}let d=this.coefficients[0],m=this.coefficients.length;for(let x=1;x<m;x++)d=this.field.add(this.field.multiply(o,d),this.coefficients[x]);return d}add(o){if(!this.field.equals(o.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let d=this.coefficients,m=o.coefficients;if(d.length>m.length){let N=d;d=m,m=N}let x=new Int32Array(m.length),b=m.length-d.length;P.arraycopy(m,0,x,0,b);for(let N=b;N<m.length;N++)x[N]=this.field.add(d[N-b],m[N]);return new Tr(this.field,x)}subtract(o){if(!this.field.equals(o.field))throw new v("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof Tr?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new Tr(this.field,new Int32Array([0]));let d=this.coefficients,m=d.length,x=o.coefficients,b=x.length,N=new Int32Array(m+b-1);for(let S=0;S<m;S++){let O=d[S];for(let I=0;I<b;I++)N[S+I]=this.field.add(N[S+I],this.field.multiply(O,x[I]))}return new Tr(this.field,N)}negative(){let o=this.coefficients.length,d=new Int32Array(o);for(let m=0;m<o;m++)d[m]=this.field.subtract(0,this.coefficients[m]);return new Tr(this.field,d)}multiplyScalar(o){if(o===0)return new Tr(this.field,new Int32Array([0]));if(o===1)return this;let d=this.coefficients.length,m=new Int32Array(d);for(let x=0;x<d;x++)m[x]=this.field.multiply(this.coefficients[x],o);return new Tr(this.field,m)}multiplyByMonomial(o,d){if(o<0)throw new v;if(d===0)return new Tr(this.field,new Int32Array([0]));let m=this.coefficients.length,x=new Int32Array(m+o);for(let b=0;b<m;b++)x[b]=this.field.multiply(this.coefficients[b],d);return new Tr(this.field,x)}toString(){let o=new le;for(let d=this.getDegree();d>=0;d--){let m=this.getCoefficient(d);m!==0&&(m<0?(o.append(" - "),m=-m):o.length()>0&&o.append(" + "),(d===0||m!==1)&&o.append(m),d!==0&&(d===1?o.append("x"):(o.append("x^"),o.append(d))))}return o.toString()}}class Bd{add(o,d){return(o+d)%this.modulus}subtract(o,d){return(this.modulus+o-d)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new v;return this.logTable[o]}inverse(o){if(o===0)throw new Be;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,d){return o===0||d===0?0:this.expTable[(this.logTable[o]+this.logTable[d])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class Vl extends Bd{constructor(o,d){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let m=1;for(let x=0;x<o;x++)this.expTable[x]=m,m=m*d%o;for(let x=0;x<o-1;x++)this.logTable[this.expTable[x]]=x;this.zero=new Tr(this,new Int32Array([0])),this.one=new Tr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,d){if(o<0)throw new v;if(d===0)return this.zero;let m=new Int32Array(o+1);return m[0]=d,new Tr(this,m)}}Vl.PDF417_GF=new Vl(St.NUMBER_OF_CODEWORDS,3);class Gs{constructor(){this.field=Vl.PDF417_GF}decode(o,d,m){let x=new Tr(this.field,o),b=new Int32Array(d),N=!1;for(let fe=d;fe>0;fe--){let he=x.evaluateAt(this.field.exp(fe));b[d-fe]=he,he!==0&&(N=!0)}if(!N)return 0;let S=this.field.getOne();if(m!=null)for(const fe of m){let he=this.field.exp(o.length-1-fe),Ae=new Tr(this.field,new Int32Array([this.field.subtract(0,he),1]));S=S.multiply(Ae)}let O=new Tr(this.field,b),I=this.runEuclideanAlgorithm(this.field.buildMonomial(d,1),O,d),z=I[0],W=I[1],Z=this.findErrorLocations(z),se=this.findErrorMagnitudes(W,z,Z);for(let fe=0;fe<Z.length;fe++){let he=o.length-1-this.field.log(Z[fe]);if(he<0)throw T.getChecksumInstance();o[he]=this.field.subtract(o[he],se[fe])}return Z.length}runEuclideanAlgorithm(o,d,m){if(o.getDegree()<d.getDegree()){let Z=o;o=d,d=Z}let x=o,b=d,N=this.field.getZero(),S=this.field.getOne();for(;b.getDegree()>=Math.round(m/2);){let Z=x,se=N;if(x=b,N=S,x.isZero())throw T.getChecksumInstance();b=Z;let fe=this.field.getZero(),he=x.getCoefficient(x.getDegree()),Ae=this.field.inverse(he);for(;b.getDegree()>=x.getDegree()&&!b.isZero();){let Ie=b.getDegree()-x.getDegree(),at=this.field.multiply(b.getCoefficient(b.getDegree()),Ae);fe=fe.add(this.field.buildMonomial(Ie,at)),b=b.subtract(x.multiplyByMonomial(Ie,at))}S=fe.multiply(N).subtract(se).negative()}let O=S.getCoefficient(0);if(O===0)throw T.getChecksumInstance();let I=this.field.inverse(O),z=S.multiply(I),W=b.multiply(I);return[z,W]}findErrorLocations(o){let d=o.getDegree(),m=new Int32Array(d),x=0;for(let b=1;b<this.field.getSize()&&x<d;b++)o.evaluateAt(b)===0&&(m[x]=this.field.inverse(b),x++);if(x!==d)throw T.getChecksumInstance();return m}findErrorMagnitudes(o,d,m){let x=d.getDegree(),b=new Int32Array(x);for(let I=1;I<=x;I++)b[x-I]=this.field.multiply(I,d.getCoefficient(I));let N=new Tr(this.field,b),S=m.length,O=new Int32Array(S);for(let I=0;I<S;I++){let z=this.field.inverse(m[I]),W=this.field.subtract(0,o.evaluateAt(z)),Z=this.field.inverse(N.evaluateAt(z));O[I]=this.field.multiply(W,Z)}return O}}class Ys{constructor(o,d,m,x,b){o instanceof Ys?this.constructor_2(o):this.constructor_1(o,d,m,x,b)}constructor_1(o,d,m,x,b){const N=d==null||m==null,S=x==null||b==null;if(N&&S)throw new re;N?(d=new Ke(0,x.getY()),m=new Ke(0,b.getY())):S&&(x=new Ke(o.getWidth()-1,d.getY()),b=new Ke(o.getWidth()-1,m.getY())),this.image=o,this.topLeft=d,this.bottomLeft=m,this.topRight=x,this.bottomRight=b,this.minX=Math.trunc(Math.min(d.getX(),m.getX())),this.maxX=Math.trunc(Math.max(x.getX(),b.getX())),this.minY=Math.trunc(Math.min(d.getY(),x.getY())),this.maxY=Math.trunc(Math.max(m.getY(),b.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,d){return o==null?d:d==null?o:new Ys(o.image,o.topLeft,o.bottomLeft,d.topRight,d.bottomRight)}addMissingRows(o,d,m){let x=this.topLeft,b=this.bottomLeft,N=this.topRight,S=this.bottomRight;if(o>0){let O=m?this.topLeft:this.topRight,I=Math.trunc(O.getY()-o);I<0&&(I=0);let z=new Ke(O.getX(),I);m?x=z:N=z}if(d>0){let O=m?this.bottomLeft:this.bottomRight,I=Math.trunc(O.getY()+d);I>=this.image.getHeight()&&(I=this.image.getHeight()-1);let z=new Ke(O.getX(),I);m?b=z:S=z}return new Ys(this.image,x,b,N,S)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Xc{constructor(o,d,m,x){this.columnCount=o,this.errorCorrectionLevel=x,this.rowCountUpperPart=d,this.rowCountLowerPart=m,this.rowCount=d+m}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Vi{constructor(){this.buffer=""}static form(o,d){let m=-1;function x(N,S,O,I,z,W){if(N==="%%")return"%";if(d[++m]===void 0)return;N=I?parseInt(I.substr(1)):void 0;let Z=z?parseInt(z.substr(1)):void 0,se;switch(W){case"s":se=d[m];break;case"c":se=d[m][0];break;case"f":se=parseFloat(d[m]).toFixed(N);break;case"p":se=parseFloat(d[m]).toPrecision(N);break;case"e":se=parseFloat(d[m]).toExponential(N);break;case"x":se=parseInt(d[m]).toString(Z||16);break;case"d":se=parseFloat(parseInt(d[m],Z||10).toPrecision(N)).toFixed(0);break}se=typeof se=="object"?JSON.stringify(se):(+se).toString(Z);let fe=parseInt(O),he=O&&O[0]+""=="0"?"0":" ";for(;se.length<fe;)se=S!==void 0?se+he:he+se;return se}let b=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(b,x)}format(o,...d){this.buffer+=Vi.form(o,d)}toString(){return this.buffer}}class yl{constructor(o){this.boundingBox=new Ys(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let d=this.getCodeword(o);if(d!=null)return d;for(let m=1;m<yl.MAX_NEARBY_DISTANCE;m++){let x=this.imageRowToCodewordIndex(o)-m;if(x>=0&&(d=this.codewords[x],d!=null)||(x=this.imageRowToCodewordIndex(o)+m,x<this.codewords.length&&(d=this.codewords[x],d!=null)))return d}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,d){this.codewords[this.imageRowToCodewordIndex(o)]=d}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new Vi;let d=0;for(const m of this.codewords){if(m==null){o.format("%3d:    |   %n",d++);continue}o.format("%3d: %3d|%3d%n",d++,m.getRowNumber(),m.getValue())}return o.toString()}}yl.MAX_NEARBY_DISTANCE=5;class xl{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let d=this.values.get(o);d==null&&(d=0),d++,this.values.set(o,d)}getValue(){let o=-1,d=new Array;for(const[m,x]of this.values.entries()){const b={getKey:()=>m,getValue:()=>x};b.getValue()>o?(o=b.getValue(),d=[],d.push(b.getKey())):b.getValue()===o&&d.push(b.getKey())}return St.toIntArray(d)}getConfidence(o){return this.values.get(o)}}class Fd extends yl{constructor(o,d){super(o),this._isLeft=d}setRowNumbers(){for(let o of this.getCodewords())o?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let d=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(d,o);let m=this.getBoundingBox(),x=this._isLeft?m.getTopLeft():m.getTopRight(),b=this._isLeft?m.getBottomLeft():m.getBottomRight(),N=this.imageRowToCodewordIndex(Math.trunc(x.getY())),S=this.imageRowToCodewordIndex(Math.trunc(b.getY())),O=-1,I=1,z=0;for(let W=N;W<S;W++){if(d[W]==null)continue;let Z=d[W],se=Z.getRowNumber()-O;if(se===0)z++;else if(se===1)I=Math.max(I,z),z=1,O=Z.getRowNumber();else if(se<0||Z.getRowNumber()>=o.getRowCount()||se>W)d[W]=null;else{let fe;I>2?fe=(I-2)*se:fe=se;let he=fe>=W;for(let Ae=1;Ae<=fe&&!he;Ae++)he=d[W-Ae]!=null;he?d[W]=null:(O=Z.getRowNumber(),z=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let d=new Int32Array(o.getRowCount());for(let m of this.getCodewords())if(m!=null){let x=m.getRowNumber();if(x>=d.length)continue;d[x]++}return d}adjustIncompleteIndicatorColumnRowNumbers(o){let d=this.getBoundingBox(),m=this._isLeft?d.getTopLeft():d.getTopRight(),x=this._isLeft?d.getBottomLeft():d.getBottomRight(),b=this.imageRowToCodewordIndex(Math.trunc(m.getY())),N=this.imageRowToCodewordIndex(Math.trunc(x.getY())),S=this.getCodewords(),O=-1;for(let I=b;I<N;I++){if(S[I]==null)continue;let z=S[I];z.setRowNumberAsRowIndicatorColumn();let W=z.getRowNumber()-O;W===0||(W===1?O=z.getRowNumber():z.getRowNumber()>=o.getRowCount()?S[I]=null:O=z.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),d=new xl,m=new xl,x=new xl,b=new xl;for(let S of o){if(S==null)continue;S.setRowNumberAsRowIndicatorColumn();let O=S.getValue()%30,I=S.getRowNumber();switch(this._isLeft||(I+=2),I%3){case 0:m.setValue(O*3+1);break;case 1:b.setValue(O/3),x.setValue(O%3);break;case 2:d.setValue(O+1);break}}if(d.getValue().length===0||m.getValue().length===0||x.getValue().length===0||b.getValue().length===0||d.getValue()[0]<1||m.getValue()[0]+x.getValue()[0]<St.MIN_ROWS_IN_BARCODE||m.getValue()[0]+x.getValue()[0]>St.MAX_ROWS_IN_BARCODE)return null;let N=new Xc(d.getValue()[0],m.getValue()[0],x.getValue()[0],b.getValue()[0]);return this.removeIncorrectCodewords(o,N),N}removeIncorrectCodewords(o,d){for(let m=0;m<o.length;m++){let x=o[m];if(o[m]==null)continue;let b=x.getValue()%30,N=x.getRowNumber();if(N>d.getRowCount()){o[m]=null;continue}switch(this._isLeft||(N+=2),N%3){case 0:b*3+1!==d.getRowCountUpperPart()&&(o[m]=null);break;case 1:(Math.trunc(b/3)!==d.getErrorCorrectionLevel()||b%3!==d.getRowCountLowerPart())&&(o[m]=null);break;case 2:b+1!==d.getColumnCount()&&(o[m]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ca{constructor(o,d){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=d,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=St.MAX_CODEWORDS_IN_BARCODE,d;do d=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<d);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let d=1;d<this.barcodeColumnCount+1;d++){let m=this.detectionResultColumns[d].getCodewords();for(let x=0;x<m.length;x++)m[x]!=null&&(m[x].hasValidRowNumber()||this.adjustRowNumbers(d,x,m))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),d=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<o.length;m++)if(o[m]!=null&&d[m]!=null&&o[m].getRowNumber()===d[m].getRowNumber())for(let x=1;x<=this.barcodeColumnCount;x++){let b=this.detectionResultColumns[x].getCodewords()[m];b!=null&&(b.setRowNumber(o[m].getRowNumber()),b.hasValidRowNumber()||(this.detectionResultColumns[x].getCodewords()[m]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,d=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<d.length;m++){if(d[m]==null)continue;let x=d[m].getRowNumber(),b=0;for(let N=this.barcodeColumnCount+1;N>0&&b<this.ADJUST_ROW_NUMBER_SKIP;N--){let S=this.detectionResultColumns[N].getCodewords()[m];S!=null&&(b=Ca.adjustRowNumberIfValid(x,b,S),S.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,d=this.detectionResultColumns[0].getCodewords();for(let m=0;m<d.length;m++){if(d[m]==null)continue;let x=d[m].getRowNumber(),b=0;for(let N=1;N<this.barcodeColumnCount+1&&b<this.ADJUST_ROW_NUMBER_SKIP;N++){let S=this.detectionResultColumns[N].getCodewords()[m];S!=null&&(b=Ca.adjustRowNumberIfValid(x,b,S),S.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,d,m){return m==null||m.hasValidRowNumber()||(m.isValidRowNumber(o)?(m.setRowNumber(o),d=0):++d),d}adjustRowNumbers(o,d,m){if(!this.detectionResultColumns[o-1])return;let x=m[d],b=this.detectionResultColumns[o-1].getCodewords(),N=b;this.detectionResultColumns[o+1]!=null&&(N=this.detectionResultColumns[o+1].getCodewords());let S=new Array(14);S[2]=b[d],S[3]=N[d],d>0&&(S[0]=m[d-1],S[4]=b[d-1],S[5]=N[d-1]),d>1&&(S[8]=m[d-2],S[10]=b[d-2],S[11]=N[d-2]),d<m.length-1&&(S[1]=m[d+1],S[6]=b[d+1],S[7]=N[d+1]),d<m.length-2&&(S[9]=m[d+2],S[12]=b[d+2],S[13]=N[d+2]);for(let O of S)if(Ca.adjustRowNumber(x,O))return}static adjustRowNumber(o,d){return d==null?!1:d.hasValidRowNumber()&&d.getBucket()===o.getBucket()?(o.setRowNumber(d.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,d){this.detectionResultColumns[o]=d}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let d=new Vi;for(let m=0;m<o.getCodewords().length;m++){d.format("CW %3d:",m);for(let x=0;x<this.barcodeColumnCount+2;x++){if(this.detectionResultColumns[x]==null){d.format("    |   ");continue}let b=this.detectionResultColumns[x].getCodewords()[m];if(b==null){d.format("    |   ");continue}d.format(" %3d|%3d",b.getRowNumber(),b.getValue())}d.format("%n")}return d.toString()}}class Wn{constructor(o,d,m,x){this.rowNumber=Wn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(d),this.bucket=Math.trunc(m),this.value=Math.trunc(x)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==Wn.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}Wn.BARCODE_ROW_UNKNOWN=-1;class Ra{static initialize(){for(let o=0;o<St.SYMBOL_TABLE.length;o++){let d=St.SYMBOL_TABLE[o],m=d&1;for(let x=0;x<St.BARS_IN_MODULE;x++){let b=0;for(;(d&1)===m;)b+=1,d>>=1;m=d&1,Ra.RATIOS_TABLE[o]||(Ra.RATIOS_TABLE[o]=new Array(St.BARS_IN_MODULE)),Ra.RATIOS_TABLE[o][St.BARS_IN_MODULE-x-1]=Math.fround(b/St.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let d=Ra.getDecodedCodewordValue(Ra.sampleBitCounts(o));return d!==-1?d:Ra.getClosestDecodedValue(o)}static sampleBitCounts(o){let d=it.sum(o),m=new Int32Array(St.BARS_IN_MODULE),x=0,b=0;for(let N=0;N<St.MODULES_IN_CODEWORD;N++){let S=d/(2*St.MODULES_IN_CODEWORD)+N*d/St.MODULES_IN_CODEWORD;b+o[x]<=S&&(b+=o[x],x++),m[x]++}return m}static getDecodedCodewordValue(o){let d=Ra.getBitValue(o);return St.getCodeword(d)===-1?-1:d}static getBitValue(o){let d=0;for(let m=0;m<o.length;m++)for(let x=0;x<o[m];x++)d=d<<1|(m%2===0?1:0);return Math.trunc(d)}static getClosestDecodedValue(o){let d=it.sum(o),m=new Array(St.BARS_IN_MODULE);if(d>1)for(let N=0;N<m.length;N++)m[N]=Math.fround(o[N]/d);let x=pt.MAX_VALUE,b=-1;this.bSymbolTableReady||Ra.initialize();for(let N=0;N<Ra.RATIOS_TABLE.length;N++){let S=0,O=Ra.RATIOS_TABLE[N];for(let I=0;I<St.BARS_IN_MODULE;I++){let z=Math.fround(O[I]-m[I]);if(S+=Math.fround(z*z),S>=x)break}S<x&&(x=S,b=St.SYMBOL_TABLE[N])}return b}}Ra.bSymbolTableReady=!1,Ra.RATIOS_TABLE=new Array(St.SYMBOL_TABLE.length).map(X=>new Array(St.BARS_IN_MODULE));class Hi{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class d0{static parseLong(o,d=void 0){return parseInt(o,d)}}class Wc extends p{}Wc.kind="NullPointerException";class Ud{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,d,m){if(o==null)throw new Wc;if(d<0||d>o.length||m<0||d+m>o.length||d+m<0)throw new k;if(m===0)return;for(let x=0;x<m;x++)this.write(o[d+x])}flush(){}close(){}}class Go extends p{}class Kc extends Ud{constructor(o=32){if(super(),this.count=0,o<0)throw new v("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let m=this.buf.length<<1;if(m-o<0&&(m=o),m<0){if(o<0)throw new Go;m=M.MAX_VALUE}this.buf=B.copyOfUint8Array(this.buf,m)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,d,m){if(d<0||d>o.length||m<0||d+m-o.length>0)throw new k;this.ensureCapacity(this.count+m),P.arraycopy(o,d,this.buf,this.count,m),this.count+=m}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return B.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var or;(function(X){X[X.ALPHA=0]="ALPHA",X[X.LOWER=1]="LOWER",X[X.MIXED=2]="MIXED",X[X.PUNCT=3]="PUNCT",X[X.ALPHA_SHIFT=4]="ALPHA_SHIFT",X[X.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(or||(or={}));function m0(){if(typeof window<"u")return window.BigInt||null;if(typeof Ng<"u")return Ng.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Zc;function bl(X){if(typeof Zc>"u"&&(Zc=m0()),Zc===null)throw new Error("BigInt is not supported!");return Zc(X)}function jd(){let X=[];X[0]=bl(1);let o=bl(900);X[1]=o;for(let d=2;d<16;d++)X[d]=X[d-1]*o;return X}class Re{static decode(o,d){let m=new le(""),x=j.ISO8859_1;m.enableDecoding(x);let b=1,N=o[b++],S=new Hi;for(;b<o[0];){switch(N){case Re.TEXT_COMPACTION_MODE_LATCH:b=Re.textCompaction(o,b,m);break;case Re.BYTE_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:b=Re.byteCompaction(N,o,x,b,m);break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(o[b++]);break;case Re.NUMERIC_COMPACTION_MODE_LATCH:b=Re.numericCompaction(o,b,m);break;case Re.ECI_CHARSET:j.getCharacterSetECIByValue(o[b++]);break;case Re.ECI_GENERAL_PURPOSE:b+=2;break;case Re.ECI_USER_DEFINED:b++;break;case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:b=Re.decodeMacroBlock(o,b,S);break;case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:throw new L;default:b--,b=Re.textCompaction(o,b,m);break}if(b<o.length)N=o[b++];else throw L.getFormatInstance()}if(m.length()===0)throw L.getFormatInstance();let O=new ve(null,m.toString(),null,d);return O.setOther(S),O}static decodeMacroBlock(o,d,m){if(d+Re.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw L.getFormatInstance();let x=new Int32Array(Re.NUMBER_OF_SEQUENCE_CODEWORDS);for(let S=0;S<Re.NUMBER_OF_SEQUENCE_CODEWORDS;S++,d++)x[S]=o[d];m.setSegmentIndex(M.parseInt(Re.decodeBase900toBase10(x,Re.NUMBER_OF_SEQUENCE_CODEWORDS)));let b=new le;d=Re.textCompaction(o,d,b),m.setFileId(b.toString());let N=-1;for(o[d]===Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(N=d+1);d<o[0];)switch(o[d]){case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(d++,o[d]){case Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let S=new le;d=Re.textCompaction(o,d+1,S),m.setFileName(S.toString());break;case Re.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let O=new le;d=Re.textCompaction(o,d+1,O),m.setSender(O.toString());break;case Re.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let I=new le;d=Re.textCompaction(o,d+1,I),m.setAddressee(I.toString());break;case Re.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let z=new le;d=Re.numericCompaction(o,d+1,z),m.setSegmentCount(M.parseInt(z.toString()));break;case Re.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let W=new le;d=Re.numericCompaction(o,d+1,W),m.setTimestamp(d0.parseLong(W.toString()));break;case Re.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Z=new le;d=Re.numericCompaction(o,d+1,Z),m.setChecksum(M.parseInt(Z.toString()));break;case Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let se=new le;d=Re.numericCompaction(o,d+1,se),m.setFileSize(d0.parseLong(se.toString()));break;default:throw L.getFormatInstance()}break;case Re.MACRO_PDF417_TERMINATOR:d++,m.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(N!==-1){let S=d-N;m.isLastSegment()&&S--,m.setOptionalData(B.copyOfRange(o,N,N+S))}return d}static textCompaction(o,d,m){let x=new Int32Array((o[0]-d)*2),b=new Int32Array((o[0]-d)*2),N=0,S=!1;for(;d<o[0]&&!S;){let O=o[d++];if(O<Re.TEXT_COMPACTION_MODE_LATCH)x[N]=O/30,x[N+1]=O%30,N+=2;else switch(O){case Re.TEXT_COMPACTION_MODE_LATCH:x[N++]=Re.TEXT_COMPACTION_MODE_LATCH;break;case Re.BYTE_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.NUMERIC_COMPACTION_MODE_LATCH:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:d--,S=!0;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x[N]=Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,O=o[d++],b[N]=O,N++;break}}return Re.decodeTextCompaction(x,b,N,m),d}static decodeTextCompaction(o,d,m,x){let b=or.ALPHA,N=or.ALPHA,S=0;for(;S<m;){let O=o[S],I="";switch(b){case or.ALPHA:if(O<26)I=String.fromCharCode(65+O);else switch(O){case 26:I=" ";break;case Re.LL:b=or.LOWER;break;case Re.ML:b=or.MIXED;break;case Re.PS:N=b,b=or.PUNCT_SHIFT;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(d[S]);break;case Re.TEXT_COMPACTION_MODE_LATCH:b=or.ALPHA;break}break;case or.LOWER:if(O<26)I=String.fromCharCode(97+O);else switch(O){case 26:I=" ";break;case Re.AS:N=b,b=or.ALPHA_SHIFT;break;case Re.ML:b=or.MIXED;break;case Re.PS:N=b,b=or.PUNCT_SHIFT;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(d[S]);break;case Re.TEXT_COMPACTION_MODE_LATCH:b=or.ALPHA;break}break;case or.MIXED:if(O<Re.PL)I=Re.MIXED_CHARS[O];else switch(O){case Re.PL:b=or.PUNCT;break;case 26:I=" ";break;case Re.LL:b=or.LOWER;break;case Re.AL:b=or.ALPHA;break;case Re.PS:N=b,b=or.PUNCT_SHIFT;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(d[S]);break;case Re.TEXT_COMPACTION_MODE_LATCH:b=or.ALPHA;break}break;case or.PUNCT:if(O<Re.PAL)I=Re.PUNCT_CHARS[O];else switch(O){case Re.PAL:b=or.ALPHA;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(d[S]);break;case Re.TEXT_COMPACTION_MODE_LATCH:b=or.ALPHA;break}break;case or.ALPHA_SHIFT:if(b=N,O<26)I=String.fromCharCode(65+O);else switch(O){case 26:I=" ";break;case Re.TEXT_COMPACTION_MODE_LATCH:b=or.ALPHA;break}break;case or.PUNCT_SHIFT:if(b=N,O<Re.PAL)I=Re.PUNCT_CHARS[O];else switch(O){case Re.PAL:b=or.ALPHA;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(d[S]);break;case Re.TEXT_COMPACTION_MODE_LATCH:b=or.ALPHA;break}break}I!==""&&x.append(I),S++}}static byteCompaction(o,d,m,x,b){let N=new Kc,S=0,O=0,I=!1;switch(o){case Re.BYTE_COMPACTION_MODE_LATCH:let z=new Int32Array(6),W=d[x++];for(;x<d[0]&&!I;)switch(z[S++]=W,O=900*O+W,W=d[x++],W){case Re.TEXT_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH:case Re.NUMERIC_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:x--,I=!0;break;default:if(S%5===0&&S>0){for(let Z=0;Z<6;++Z)N.write(Number(bl(O)>>bl(8*(5-Z))));O=0,S=0}break}x===d[0]&&W<Re.TEXT_COMPACTION_MODE_LATCH&&(z[S++]=W);for(let Z=0;Z<S;Z++)N.write(z[Z]);break;case Re.BYTE_COMPACTION_MODE_LATCH_6:for(;x<d[0]&&!I;){let Z=d[x++];if(Z<Re.TEXT_COMPACTION_MODE_LATCH)S++,O=900*O+Z;else switch(Z){case Re.TEXT_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH:case Re.NUMERIC_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:x--,I=!0;break}if(S%5===0&&S>0){for(let se=0;se<6;++se)N.write(Number(bl(O)>>bl(8*(5-se))));O=0,S=0}}break}return b.append(H.decode(N.toByteArray(),m)),x}static numericCompaction(o,d,m){let x=0,b=!1,N=new Int32Array(Re.MAX_NUMERIC_CODEWORDS);for(;d<o[0]&&!b;){let S=o[d++];if(d===o[0]&&(b=!0),S<Re.TEXT_COMPACTION_MODE_LATCH)N[x]=S,x++;else switch(S){case Re.TEXT_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:d--,b=!0;break}(x%Re.MAX_NUMERIC_CODEWORDS===0||S===Re.NUMERIC_COMPACTION_MODE_LATCH||b)&&x>0&&(m.append(Re.decodeBase900toBase10(N,x)),x=0)}return d}static decodeBase900toBase10(o,d){let m=bl(0);for(let b=0;b<d;b++)m+=Re.EXP900[d-b-1]*bl(o[b]);let x=m.toString();if(x.charAt(0)!=="1")throw new L;return x.substring(1)}}Re.TEXT_COMPACTION_MODE_LATCH=900,Re.BYTE_COMPACTION_MODE_LATCH=901,Re.NUMERIC_COMPACTION_MODE_LATCH=902,Re.BYTE_COMPACTION_MODE_LATCH_6=924,Re.ECI_USER_DEFINED=925,Re.ECI_GENERAL_PURPOSE=926,Re.ECI_CHARSET=927,Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Re.MACRO_PDF417_TERMINATOR=922,Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Re.MAX_NUMERIC_CODEWORDS=15,Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Re.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Re.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Re.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Re.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Re.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Re.PL=25,Re.LL=27,Re.AS=27,Re.ML=28,Re.AL=28,Re.PS=29,Re.PAL=29,Re.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Re.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Re.EXP900=m0()?jd():[],Re.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ft{constructor(){}static decode(o,d,m,x,b,N,S){let O=new Ys(o,d,m,x,b),I=null,z=null,W;for(let fe=!0;;fe=!1){if(d!=null&&(I=Ft.getRowIndicatorColumn(o,O,d,!0,N,S)),x!=null&&(z=Ft.getRowIndicatorColumn(o,O,x,!1,N,S)),W=Ft.merge(I,z),W==null)throw re.getNotFoundInstance();let he=W.getBoundingBox();if(fe&&he!=null&&(he.getMinY()<O.getMinY()||he.getMaxY()>O.getMaxY()))O=he;else break}W.setBoundingBox(O);let Z=W.getBarcodeColumnCount()+1;W.setDetectionResultColumn(0,I),W.setDetectionResultColumn(Z,z);let se=I!=null;for(let fe=1;fe<=Z;fe++){let he=se?fe:Z-fe;if(W.getDetectionResultColumn(he)!==void 0)continue;let Ae;he===0||he===Z?Ae=new Fd(O,he===0):Ae=new yl(O),W.setDetectionResultColumn(he,Ae);let Ie=-1,at=Ie;for(let et=O.getMinY();et<=O.getMaxY();et++){if(Ie=Ft.getStartColumn(W,he,et,se),Ie<0||Ie>O.getMaxX()){if(at===-1)continue;Ie=at}let Qe=Ft.detectCodeword(o,O.getMinX(),O.getMaxX(),se,Ie,et,N,S);Qe!=null&&(Ae.setCodeword(et,Qe),at=Ie,N=Math.min(N,Qe.getWidth()),S=Math.max(S,Qe.getWidth()))}}return Ft.createDecoderResult(W)}static merge(o,d){if(o==null&&d==null)return null;let m=Ft.getBarcodeMetadata(o,d);if(m==null)return null;let x=Ys.merge(Ft.adjustBoundingBox(o),Ft.adjustBoundingBox(d));return new Ca(m,x)}static adjustBoundingBox(o){if(o==null)return null;let d=o.getRowHeights();if(d==null)return null;let m=Ft.getMax(d),x=0;for(let S of d)if(x+=m-S,S>0)break;let b=o.getCodewords();for(let S=0;x>0&&b[S]==null;S++)x--;let N=0;for(let S=d.length-1;S>=0&&(N+=m-d[S],!(d[S]>0));S--);for(let S=b.length-1;N>0&&b[S]==null;S--)N--;return o.getBoundingBox().addMissingRows(x,N,o.isLeft())}static getMax(o){let d=-1;for(let m of o)d=Math.max(d,m);return d}static getBarcodeMetadata(o,d){let m;if(o==null||(m=o.getBarcodeMetadata())==null)return d==null?null:d.getBarcodeMetadata();let x;return d==null||(x=d.getBarcodeMetadata())==null?m:m.getColumnCount()!==x.getColumnCount()&&m.getErrorCorrectionLevel()!==x.getErrorCorrectionLevel()&&m.getRowCount()!==x.getRowCount()?null:m}static getRowIndicatorColumn(o,d,m,x,b,N){let S=new Fd(d,x);for(let O=0;O<2;O++){let I=O===0?1:-1,z=Math.trunc(Math.trunc(m.getX()));for(let W=Math.trunc(Math.trunc(m.getY()));W<=d.getMaxY()&&W>=d.getMinY();W+=I){let Z=Ft.detectCodeword(o,0,o.getWidth(),x,z,W,b,N);Z!=null&&(S.setCodeword(W,Z),x?z=Z.getStartX():z=Z.getEndX())}}return S}static adjustCodewordCount(o,d){let m=d[0][1],x=m.getValue(),b=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-Ft.getNumberOfECCodeWords(o.getBarcodeECLevel());if(x.length===0){if(b<1||b>St.MAX_CODEWORDS_IN_BARCODE)throw re.getNotFoundInstance();m.setValue(b)}else x[0]!==b&&m.setValue(b)}static createDecoderResult(o){let d=Ft.createBarcodeMatrix(o);Ft.adjustCodewordCount(o,d);let m=new Array,x=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),b=[],N=new Array;for(let O=0;O<o.getBarcodeRowCount();O++)for(let I=0;I<o.getBarcodeColumnCount();I++){let z=d[O][I+1].getValue(),W=O*o.getBarcodeColumnCount()+I;z.length===0?m.push(W):z.length===1?x[W]=z[0]:(N.push(W),b.push(z))}let S=new Array(b.length);for(let O=0;O<S.length;O++)S[O]=b[O];return Ft.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),x,St.toIntArray(m),St.toIntArray(N),S)}static createDecoderResultFromAmbiguousValues(o,d,m,x,b){let N=new Int32Array(x.length),S=100;for(;S-- >0;){for(let O=0;O<N.length;O++)d[x[O]]=b[O][N[O]];try{return Ft.decodeCodewords(d,o,m)}catch(O){if(!(O instanceof T))throw O}if(N.length===0)throw T.getChecksumInstance();for(let O=0;O<N.length;O++)if(N[O]<b[O].length-1){N[O]++;break}else if(N[O]=0,O===N.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(o){let d=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let x=0;x<d.length;x++)for(let b=0;b<d[x].length;b++)d[x][b]=new xl;let m=0;for(let x of o.getDetectionResultColumns()){if(x!=null){for(let b of x.getCodewords())if(b!=null){let N=b.getRowNumber();if(N>=0){if(N>=d.length)continue;d[N][m].setValue(b.getValue())}}}m++}return d}static isValidBarcodeColumn(o,d){return d>=0&&d<=o.getBarcodeColumnCount()+1}static getStartColumn(o,d,m,x){let b=x?1:-1,N=null;if(Ft.isValidBarcodeColumn(o,d-b)&&(N=o.getDetectionResultColumn(d-b).getCodeword(m)),N!=null)return x?N.getEndX():N.getStartX();if(N=o.getDetectionResultColumn(d).getCodewordNearby(m),N!=null)return x?N.getStartX():N.getEndX();if(Ft.isValidBarcodeColumn(o,d-b)&&(N=o.getDetectionResultColumn(d-b).getCodewordNearby(m)),N!=null)return x?N.getEndX():N.getStartX();let S=0;for(;Ft.isValidBarcodeColumn(o,d-b);){d-=b;for(let O of o.getDetectionResultColumn(d).getCodewords())if(O!=null)return(x?O.getEndX():O.getStartX())+b*S*(O.getEndX()-O.getStartX());S++}return x?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,d,m,x,b,N,S,O){b=Ft.adjustCodewordStartColumn(o,d,m,x,b,N);let I=Ft.getModuleBitCount(o,d,m,x,b,N);if(I==null)return null;let z,W=it.sum(I);if(x)z=b+W;else{for(let fe=0;fe<I.length/2;fe++){let he=I[fe];I[fe]=I[I.length-1-fe],I[I.length-1-fe]=he}z=b,b=z-W}if(!Ft.checkCodewordSkew(W,S,O))return null;let Z=Ra.getDecodedValue(I),se=St.getCodeword(Z);return se===-1?null:new Wn(b,z,Ft.getCodewordBucketNumber(Z),se)}static getModuleBitCount(o,d,m,x,b,N){let S=b,O=new Int32Array(8),I=0,z=x?1:-1,W=x;for(;(x?S<m:S>=d)&&I<O.length;)o.get(S,N)===W?(O[I]++,S+=z):(I++,W=!W);return I===O.length||S===(x?m:d)&&I===O.length-1?O:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,d,m,x,b,N){let S=b,O=x?-1:1;for(let I=0;I<2;I++){for(;(x?S>=d:S<m)&&x===o.get(S,N);){if(Math.abs(b-S)>Ft.CODEWORD_SKEW_SIZE)return b;S+=O}O=-O,x=!x}return S}static checkCodewordSkew(o,d,m){return d-Ft.CODEWORD_SKEW_SIZE<=o&&o<=m+Ft.CODEWORD_SKEW_SIZE}static decodeCodewords(o,d,m){if(o.length===0)throw L.getFormatInstance();let x=1<<d+1,b=Ft.correctErrors(o,m,x);Ft.verifyCodewordCount(o,x);let N=Re.decode(o,""+d);return N.setErrorsCorrected(b),N.setErasures(m.length),N}static correctErrors(o,d,m){if(d!=null&&d.length>m/2+Ft.MAX_ERRORS||m<0||m>Ft.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return Ft.errorCorrection.decode(o,m,d)}static verifyCodewordCount(o,d){if(o.length<4)throw L.getFormatInstance();let m=o[0];if(m>o.length)throw L.getFormatInstance();if(m===0)if(d<o.length)o[0]=o.length-d;else throw L.getFormatInstance()}static getBitCountForCodeword(o){let d=new Int32Array(8),m=0,x=d.length-1;for(;!((o&1)!==m&&(m=o&1,x--,x<0));)d[x]++,o>>=1;return d}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return Ft.getCodewordBucketNumber(Ft.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let d=new Vi;for(let m=0;m<o.length;m++){d.format("Row %2d: ",m);for(let x=0;x<o[m].length;x++){let b=o[m][x];b.getValue().length===0?d.format("        ",null):d.format("%4d(%2d)",b.getValue()[0],b.getConfidence(b.getValue()[0]))}d.format("%n")}return d.toString()}}Ft.CODEWORD_SKEW_SIZE=2,Ft.MAX_ERRORS=3,Ft.MAX_EC_CODEWORDS=512,Ft.errorCorrection=new Gs;class La{decode(o,d=null){let m=La.decode(o,d,!1);if(m==null||m.length===0||m[0]==null)throw re.getNotFoundInstance();return m[0]}decodeMultiple(o,d=null){try{return La.decode(o,d,!0)}catch(m){throw m instanceof L||m instanceof T?re.getNotFoundInstance():m}}static decode(o,d,m){const x=new Array,b=_t.detectMultiple(o,d,m);for(const N of b.getPoints()){const S=Ft.decode(b.getBits(),N[4],N[5],N[6],N[7],La.getMinCodewordWidth(N),La.getMaxCodewordWidth(N)),O=new oe(S.getText(),S.getRawBytes(),void 0,N,ie.PDF_417);O.putMetadata($e.ERROR_CORRECTION_LEVEL,S.getECLevel());const I=S.getOther();I!=null&&O.putMetadata($e.PDF417_EXTRA_METADATA,I),x.push(O)}return x.map(N=>N)}static getMaxWidth(o,d){return o==null||d==null?0:Math.trunc(Math.abs(o.getX()-d.getX()))}static getMinWidth(o,d){return o==null||d==null?M.MAX_VALUE:Math.trunc(Math.abs(o.getX()-d.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(La.getMaxWidth(o[0],o[4]),La.getMaxWidth(o[6],o[2])*St.MODULES_IN_CODEWORD/St.MODULES_IN_STOP_PATTERN),Math.max(La.getMaxWidth(o[1],o[5]),La.getMaxWidth(o[7],o[3])*St.MODULES_IN_CODEWORD/St.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(La.getMinWidth(o[0],o[4]),La.getMinWidth(o[6],o[2])*St.MODULES_IN_CODEWORD/St.MODULES_IN_STOP_PATTERN),Math.min(La.getMinWidth(o[1],o[5]),La.getMinWidth(o[7],o[3])*St.MODULES_IN_CODEWORD/St.MODULES_IN_STOP_PATTERN)))}reset(){}}class Qc extends p{}Qc.kind="ReaderException";class f0{constructor(o,d){this.verbose=o===!0,d&&this.setHints(d)}decode(o,d){return d&&this.setHints(d),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const d=!n(o)&&o.get(U.TRY_HARDER)===!0,m=n(o)?null:o.get(U.POSSIBLE_FORMATS),x=new Array;if(!n(m)){const b=m.some(N=>N===ie.UPC_A||N===ie.UPC_E||N===ie.EAN_13||N===ie.EAN_8||N===ie.CODABAR||N===ie.CODE_39||N===ie.CODE_93||N===ie.CODE_128||N===ie.ITF||N===ie.RSS_14||N===ie.RSS_EXPANDED);b&&!d&&x.push(new Yn(o,this.verbose)),m.includes(ie.QR_CODE)&&x.push(new qs),m.includes(ie.DATA_MATRIX)&&x.push(new $s),m.includes(ie.AZTEC)&&x.push(new xr),m.includes(ie.PDF_417)&&x.push(new La),b&&d&&x.push(new Yn(o,this.verbose))}x.length===0&&(d||x.push(new Yn(o,this.verbose)),x.push(new qs),x.push(new $s),x.push(new xr),x.push(new La),d&&x.push(new Yn(o,this.verbose))),this.readers=x}reset(){if(this.readers!==null)for(const o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new Qc("No readers where selected, nothing can be read.");for(const d of this.readers)try{return d.decode(o,this.hints)}catch(m){if(m instanceof Qc)continue}throw new re("No MultiFormat Readers were able to detect the code.")}}class g0 extends ge{constructor(o=null,d=500){const m=new f0;m.setHints(o),super(m,d)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class Uy extends ge{constructor(o=500){super(new La,o)}}class jy extends ge{constructor(o=500){super(new qs,o)}}var zd;(function(X){X[X.ERROR_CORRECTION=0]="ERROR_CORRECTION",X[X.CHARACTER_SET=1]="CHARACTER_SET",X[X.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",X[X.MIN_SIZE=3]="MIN_SIZE",X[X.MAX_SIZE=4]="MAX_SIZE",X[X.MARGIN=5]="MARGIN",X[X.PDF417_COMPACT=6]="PDF417_COMPACT",X[X.PDF417_COMPACTION=7]="PDF417_COMPACTION",X[X.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",X[X.AZTEC_LAYERS=9]="AZTEC_LAYERS",X[X.QR_VERSION=10]="QR_VERSION"})(zd||(zd={}));var ya=zd;class Yo{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new nt(o,Int32Array.from([1])))}buildGenerator(o){const d=this.cachedGenerators;if(o>=d.length){let m=d[d.length-1];const x=this.field;for(let b=d.length;b<=o;b++){const N=m.multiply(new nt(x,Int32Array.from([1,x.exp(b-1+x.getGeneratorBase())])));d.push(N),m=N}}return d[o]}encode(o,d){if(d===0)throw new v("No error correction bytes");const m=o.length-d;if(m<=0)throw new v("No data bytes provided");const x=this.buildGenerator(d),b=new Int32Array(m);P.arraycopy(o,0,b,0,m);let N=new nt(this.field,b);N=N.multiplyByMonomial(d,1);const O=N.divide(x)[1].getCoefficients(),I=d-O.length;for(let z=0;z<I;z++)o[m+z]=0;P.arraycopy(O,0,o,m+I,O.length)}}class Xr{constructor(){}static applyMaskPenaltyRule1(o){return Xr.applyMaskPenaltyRule1Internal(o,!0)+Xr.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let d=0;const m=o.getArray(),x=o.getWidth(),b=o.getHeight();for(let N=0;N<b-1;N++){const S=m[N];for(let O=0;O<x-1;O++){const I=S[O];I===S[O+1]&&I===m[N+1][O]&&I===m[N+1][O+1]&&d++}}return Xr.N2*d}static applyMaskPenaltyRule3(o){let d=0;const m=o.getArray(),x=o.getWidth(),b=o.getHeight();for(let N=0;N<b;N++)for(let S=0;S<x;S++){const O=m[N];S+6<x&&O[S]===1&&O[S+1]===0&&O[S+2]===1&&O[S+3]===1&&O[S+4]===1&&O[S+5]===0&&O[S+6]===1&&(Xr.isWhiteHorizontal(O,S-4,S)||Xr.isWhiteHorizontal(O,S+7,S+11))&&d++,N+6<b&&m[N][S]===1&&m[N+1][S]===0&&m[N+2][S]===1&&m[N+3][S]===1&&m[N+4][S]===1&&m[N+5][S]===0&&m[N+6][S]===1&&(Xr.isWhiteVertical(m,S,N-4,N)||Xr.isWhiteVertical(m,S,N+7,N+11))&&d++}return d*Xr.N3}static isWhiteHorizontal(o,d,m){d=Math.max(d,0),m=Math.min(m,o.length);for(let x=d;x<m;x++)if(o[x]===1)return!1;return!0}static isWhiteVertical(o,d,m,x){m=Math.max(m,0),x=Math.min(x,o.length);for(let b=m;b<x;b++)if(o[b][d]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let d=0;const m=o.getArray(),x=o.getWidth(),b=o.getHeight();for(let O=0;O<b;O++){const I=m[O];for(let z=0;z<x;z++)I[z]===1&&d++}const N=o.getHeight()*o.getWidth();return Math.floor(Math.abs(d*2-N)*10/N)*Xr.N4}static getDataMaskBit(o,d,m){let x,b;switch(o){case 0:x=m+d&1;break;case 1:x=m&1;break;case 2:x=d%3;break;case 3:x=(m+d)%3;break;case 4:x=Math.floor(m/2)+Math.floor(d/3)&1;break;case 5:b=m*d,x=(b&1)+b%3;break;case 6:b=m*d,x=(b&1)+b%3&1;break;case 7:b=m*d,x=b%3+(m+d&1)&1;break;default:throw new v("Invalid mask pattern: "+o)}return x===0}static applyMaskPenaltyRule1Internal(o,d){let m=0;const x=d?o.getHeight():o.getWidth(),b=d?o.getWidth():o.getHeight(),N=o.getArray();for(let S=0;S<x;S++){let O=0,I=-1;for(let z=0;z<b;z++){const W=d?N[S][z]:N[z][S];W===I?O++:(O>=5&&(m+=Xr.N1+(O-5)),O=1,I=W)}O>=5&&(m+=Xr.N1+(O-5))}return m}}Xr.N1=3,Xr.N2=3,Xr.N3=40,Xr.N4=10;class Jc{constructor(o,d){this.width=o,this.height=d;const m=new Array(d);for(let x=0;x!==d;x++)m[x]=new Uint8Array(o);this.bytes=m}getHeight(){return this.height}getWidth(){return this.width}get(o,d){return this.bytes[d][o]}getArray(){return this.bytes}setNumber(o,d,m){this.bytes[d][o]=m}setBoolean(o,d,m){this.bytes[d][o]=m?1:0}clear(o){for(const d of this.bytes)B.fill(d,o)}equals(o){if(!(o instanceof Jc))return!1;const d=o;if(this.width!==d.width||this.height!==d.height)return!1;for(let m=0,x=this.height;m<x;++m){const b=this.bytes[m],N=d.bytes[m];for(let S=0,O=this.width;S<O;++S)if(b[S]!==N[S])return!1}return!0}toString(){const o=new le;for(let d=0,m=this.height;d<m;++d){const x=this.bytes[d];for(let b=0,N=this.width;b<N;++b)switch(x[b]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}class Hl{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new le;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<Hl.NUM_MASK_PATTERNS}}Hl.NUM_MASK_PATTERNS=8;class fr extends p{}fr.kind="WriterException";class Ct{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,d,m,x,b){Ct.clearMatrix(b),Ct.embedBasicPatterns(m,b),Ct.embedTypeInfo(d,x,b),Ct.maybeEmbedVersionInfo(m,b),Ct.embedDataBits(o,x,b)}static embedBasicPatterns(o,d){Ct.embedPositionDetectionPatternsAndSeparators(d),Ct.embedDarkDotAtLeftBottomCorner(d),Ct.maybeEmbedPositionAdjustmentPatterns(o,d),Ct.embedTimingPatterns(d)}static embedTypeInfo(o,d,m){const x=new G;Ct.makeTypeInfoBits(o,d,x);for(let b=0,N=x.getSize();b<N;++b){const S=x.get(x.getSize()-1-b),O=Ct.TYPE_INFO_COORDINATES[b],I=O[0],z=O[1];if(m.setBoolean(I,z,S),b<8){const W=m.getWidth()-b-1;m.setBoolean(W,8,S)}else{const Z=m.getHeight()-7+(b-8);m.setBoolean(8,Z,S)}}}static maybeEmbedVersionInfo(o,d){if(o.getVersionNumber()<7)return;const m=new G;Ct.makeVersionInfoBits(o,m);let x=17;for(let b=0;b<6;++b)for(let N=0;N<3;++N){const S=m.get(x);x--,d.setBoolean(b,d.getHeight()-11+N,S),d.setBoolean(d.getHeight()-11+N,b,S)}}static embedDataBits(o,d,m){let x=0,b=-1,N=m.getWidth()-1,S=m.getHeight()-1;for(;N>0;){for(N===6&&(N-=1);S>=0&&S<m.getHeight();){for(let O=0;O<2;++O){const I=N-O;if(!Ct.isEmpty(m.get(I,S)))continue;let z;x<o.getSize()?(z=o.get(x),++x):z=!1,d!==255&&Xr.getDataMaskBit(d,I,S)&&(z=!z),m.setBoolean(I,S,z)}S+=b}b=-b,S+=b,N-=2}if(x!==o.getSize())throw new fr("Not all bits consumed: "+x+"/"+o.getSize())}static findMSBSet(o){return 32-M.numberOfLeadingZeros(o)}static calculateBCHCode(o,d){if(d===0)throw new v("0 polynomial");const m=Ct.findMSBSet(d);for(o<<=m-1;Ct.findMSBSet(o)>=m;)o^=d<<Ct.findMSBSet(o)-m;return o}static makeTypeInfoBits(o,d,m){if(!Hl.isValidMaskPattern(d))throw new fr("Invalid mask pattern");const x=o.getBits()<<3|d;m.appendBits(x,5);const b=Ct.calculateBCHCode(x,Ct.TYPE_INFO_POLY);m.appendBits(b,10);const N=new G;if(N.appendBits(Ct.TYPE_INFO_MASK_PATTERN,15),m.xor(N),m.getSize()!==15)throw new fr("should not happen but we got: "+m.getSize())}static makeVersionInfoBits(o,d){d.appendBits(o.getVersionNumber(),6);const m=Ct.calculateBCHCode(o.getVersionNumber(),Ct.VERSION_INFO_POLY);if(d.appendBits(m,12),d.getSize()!==18)throw new fr("should not happen but we got: "+d.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let d=8;d<o.getWidth()-8;++d){const m=(d+1)%2;Ct.isEmpty(o.get(d,6))&&o.setNumber(d,6,m),Ct.isEmpty(o.get(6,d))&&o.setNumber(6,d,m)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new fr;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,d,m){for(let x=0;x<8;++x){if(!Ct.isEmpty(m.get(o+x,d)))throw new fr;m.setNumber(o+x,d,0)}}static embedVerticalSeparationPattern(o,d,m){for(let x=0;x<7;++x){if(!Ct.isEmpty(m.get(o,d+x)))throw new fr;m.setNumber(o,d+x,0)}}static embedPositionAdjustmentPattern(o,d,m){for(let x=0;x<5;++x){const b=Ct.POSITION_ADJUSTMENT_PATTERN[x];for(let N=0;N<5;++N)m.setNumber(o+N,d+x,b[N])}}static embedPositionDetectionPattern(o,d,m){for(let x=0;x<7;++x){const b=Ct.POSITION_DETECTION_PATTERN[x];for(let N=0;N<7;++N)m.setNumber(o+N,d+x,b[N])}}static embedPositionDetectionPatternsAndSeparators(o){const d=Ct.POSITION_DETECTION_PATTERN[0].length;Ct.embedPositionDetectionPattern(0,0,o),Ct.embedPositionDetectionPattern(o.getWidth()-d,0,o),Ct.embedPositionDetectionPattern(0,o.getWidth()-d,o);const m=8;Ct.embedHorizontalSeparationPattern(0,m-1,o),Ct.embedHorizontalSeparationPattern(o.getWidth()-m,m-1,o),Ct.embedHorizontalSeparationPattern(0,o.getWidth()-m,o);const x=7;Ct.embedVerticalSeparationPattern(x,0,o),Ct.embedVerticalSeparationPattern(o.getHeight()-x-1,0,o),Ct.embedVerticalSeparationPattern(x,o.getHeight()-x,o)}static maybeEmbedPositionAdjustmentPatterns(o,d){if(o.getVersionNumber()<2)return;const m=o.getVersionNumber()-1,x=Ct.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[m];for(let b=0,N=x.length;b!==N;b++){const S=x[b];if(S>=0)for(let O=0;O!==N;O++){const I=x[O];I>=0&&Ct.isEmpty(d.get(I,S))&&Ct.embedPositionAdjustmentPattern(I-2,S-2,d)}}}}Ct.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ct.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ct.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ct.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ct.VERSION_INFO_POLY=7973,Ct.TYPE_INFO_POLY=1335,Ct.TYPE_INFO_MASK_PATTERN=21522;class zy{constructor(o,d){this.dataBytes=o,this.errorCorrectionBytes=d}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Or{constructor(){}static calculateMaskPenalty(o){return Xr.applyMaskPenaltyRule1(o)+Xr.applyMaskPenaltyRule2(o)+Xr.applyMaskPenaltyRule3(o)+Xr.applyMaskPenaltyRule4(o)}static encode(o,d,m=null){let x=Or.DEFAULT_BYTE_MODE_ENCODING;const b=m!==null&&m.get(ya.CHARACTER_SET)!==void 0;b&&(x=m.get(ya.CHARACTER_SET).toString());const N=this.chooseMode(o,x),S=new G;if(N===Et.BYTE&&(b||Or.DEFAULT_BYTE_MODE_ENCODING!==x)){const et=j.getCharacterSetECIByName(x);et!==void 0&&this.appendECI(et,S)}this.appendModeInfo(N,S);const O=new G;this.appendBytes(o,N,O,x);let I;if(m!==null&&m.get(ya.QR_VERSION)!==void 0){const et=Number.parseInt(m.get(ya.QR_VERSION).toString(),10);I=yt.getVersionForNumber(et);const Qe=this.calculateBitsNeeded(N,S,O,I);if(!this.willFit(Qe,I,d))throw new fr("Data too big for requested version")}else I=this.recommendVersion(d,N,S,O);const z=new G;z.appendBitArray(S);const W=N===Et.BYTE?O.getSizeInBytes():o.length;this.appendLengthInfo(W,I,N,z),z.appendBitArray(O);const Z=I.getECBlocksForLevel(d),se=I.getTotalCodewords()-Z.getTotalECCodewords();this.terminateBits(se,z);const fe=this.interleaveWithECBytes(z,I.getTotalCodewords(),se,Z.getNumBlocks()),he=new Hl;he.setECLevel(d),he.setMode(N),he.setVersion(I);const Ae=I.getDimensionForVersion(),Ie=new Jc(Ae,Ae),at=this.chooseMaskPattern(fe,d,I,Ie);return he.setMaskPattern(at),Ct.buildMatrix(fe,d,I,at,Ie),he.setMatrix(Ie),he}static recommendVersion(o,d,m,x){const b=this.calculateBitsNeeded(d,m,x,yt.getVersionForNumber(1)),N=this.chooseVersion(b,o),S=this.calculateBitsNeeded(d,m,x,N);return this.chooseVersion(S,o)}static calculateBitsNeeded(o,d,m,x){return d.getSize()+o.getCharacterCountBits(x)+m.getSize()}static getAlphanumericCode(o){return o<Or.ALPHANUMERIC_TABLE.length?Or.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,d=null){if(j.SJIS.getName()===d&&this.isOnlyDoubleByteKanji(o))return Et.KANJI;let m=!1,x=!1;for(let b=0,N=o.length;b<N;++b){const S=o.charAt(b);if(Or.isDigit(S))m=!0;else if(this.getAlphanumericCode(S.charCodeAt(0))!==-1)x=!0;else return Et.BYTE}return x?Et.ALPHANUMERIC:m?Et.NUMERIC:Et.BYTE}static isOnlyDoubleByteKanji(o){let d;try{d=H.encode(o,j.SJIS)}catch{return!1}const m=d.length;if(m%2!==0)return!1;for(let x=0;x<m;x+=2){const b=d[x]&255;if((b<129||b>159)&&(b<224||b>235))return!1}return!0}static chooseMaskPattern(o,d,m,x){let b=Number.MAX_SAFE_INTEGER,N=-1;for(let S=0;S<Hl.NUM_MASK_PATTERNS;S++){Ct.buildMatrix(o,d,m,S,x);let O=this.calculateMaskPenalty(x);O<b&&(b=O,N=S)}return N}static chooseVersion(o,d){for(let m=1;m<=40;m++){const x=yt.getVersionForNumber(m);if(Or.willFit(o,x,d))return x}throw new fr("Data too big")}static willFit(o,d,m){const x=d.getTotalCodewords(),N=d.getECBlocksForLevel(m).getTotalECCodewords(),S=x-N,O=(o+7)/8;return S>=O}static terminateBits(o,d){const m=o*8;if(d.getSize()>m)throw new fr("data bits cannot fit in the QR Code"+d.getSize()+" > "+m);for(let N=0;N<4&&d.getSize()<m;++N)d.appendBit(!1);const x=d.getSize()&7;if(x>0)for(let N=x;N<8;N++)d.appendBit(!1);const b=o-d.getSizeInBytes();for(let N=0;N<b;++N)d.appendBits((N&1)===0?236:17,8);if(d.getSize()!==m)throw new fr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,d,m,x,b,N){if(x>=m)throw new fr("Block ID too large");const S=o%m,O=m-S,I=Math.floor(o/m),z=I+1,W=Math.floor(d/m),Z=W+1,se=I-W,fe=z-Z;if(se!==fe)throw new fr("EC bytes mismatch");if(m!==O+S)throw new fr("RS blocks mismatch");if(o!==(W+se)*O+(Z+fe)*S)throw new fr("Total bytes mismatch");x<O?(b[0]=W,N[0]=se):(b[0]=Z,N[0]=fe)}static interleaveWithECBytes(o,d,m,x){if(o.getSizeInBytes()!==m)throw new fr("Number of bits and data bytes does not match");let b=0,N=0,S=0;const O=new Array;for(let z=0;z<x;++z){const W=new Int32Array(1),Z=new Int32Array(1);Or.getNumDataBytesAndNumECBytesForBlockID(d,m,x,z,W,Z);const se=W[0],fe=new Uint8Array(se);o.toBytes(8*b,fe,0,se);const he=Or.generateECBytes(fe,Z[0]);O.push(new zy(fe,he)),N=Math.max(N,se),S=Math.max(S,he.length),b+=W[0]}if(m!==b)throw new fr("Data bytes does not match offset");const I=new G;for(let z=0;z<N;++z)for(const W of O){const Z=W.getDataBytes();z<Z.length&&I.appendBits(Z[z],8)}for(let z=0;z<S;++z)for(const W of O){const Z=W.getErrorCorrectionBytes();z<Z.length&&I.appendBits(Z[z],8)}if(d!==I.getSizeInBytes())throw new fr("Interleaving error: "+d+" and "+I.getSizeInBytes()+" differ.");return I}static generateECBytes(o,d){const m=o.length,x=new Int32Array(m+d);for(let N=0;N<m;N++)x[N]=o[N]&255;new Yo(Ee.QR_CODE_FIELD_256).encode(x,d);const b=new Uint8Array(d);for(let N=0;N<d;N++)b[N]=x[m+N];return b}static appendModeInfo(o,d){d.appendBits(o.getBits(),4)}static appendLengthInfo(o,d,m,x){const b=m.getCharacterCountBits(d);if(o>=1<<b)throw new fr(o+" is bigger than "+((1<<b)-1));x.appendBits(o,b)}static appendBytes(o,d,m,x){switch(d){case Et.NUMERIC:Or.appendNumericBytes(o,m);break;case Et.ALPHANUMERIC:Or.appendAlphanumericBytes(o,m);break;case Et.BYTE:Or.append8BitBytes(o,m,x);break;case Et.KANJI:Or.appendKanjiBytes(o,m);break;default:throw new fr("Invalid mode: "+d)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const d=Or.getDigit(o);return d>=0&&d<=9}static appendNumericBytes(o,d){const m=o.length;let x=0;for(;x<m;){const b=Or.getDigit(o.charAt(x));if(x+2<m){const N=Or.getDigit(o.charAt(x+1)),S=Or.getDigit(o.charAt(x+2));d.appendBits(b*100+N*10+S,10),x+=3}else if(x+1<m){const N=Or.getDigit(o.charAt(x+1));d.appendBits(b*10+N,7),x+=2}else d.appendBits(b,4),x++}}static appendAlphanumericBytes(o,d){const m=o.length;let x=0;for(;x<m;){const b=Or.getAlphanumericCode(o.charCodeAt(x));if(b===-1)throw new fr;if(x+1<m){const N=Or.getAlphanumericCode(o.charCodeAt(x+1));if(N===-1)throw new fr;d.appendBits(b*45+N,11),x+=2}else d.appendBits(b,6),x++}}static append8BitBytes(o,d,m){let x;try{x=H.encode(o,m)}catch(b){throw new fr(b)}for(let b=0,N=x.length;b!==N;b++){const S=x[b];d.appendBits(S,8)}}static appendKanjiBytes(o,d){let m;try{m=H.encode(o,j.SJIS)}catch(b){throw new fr(b)}const x=m.length;for(let b=0;b<x;b+=2){const N=m[b]&255,S=m[b+1]&255,O=N<<8&4294967295|S;let I=-1;if(O>=33088&&O<=40956?I=O-33088:O>=57408&&O<=60351&&(I=O-49472),I===-1)throw new fr("Invalid byte sequence");const z=(I>>8)*192+(I&255);d.appendBits(z,13)}}static appendECI(o,d){d.appendBits(Et.ECI.getBits(),4),d.appendBits(o.getValue(),8)}}Or.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Or.DEFAULT_BYTE_MODE_ENCODING=j.UTF8.getName();class $l{write(o,d,m,x=null){if(o.length===0)throw new v("Found empty contents");if(d<0||m<0)throw new v("Requested dimensions are too small: "+d+"x"+m);let b=Ht.L,N=$l.QUIET_ZONE_SIZE;x!==null&&(x.get(ya.ERROR_CORRECTION)!==void 0&&(b=Ht.fromString(x.get(ya.ERROR_CORRECTION).toString())),x.get(ya.MARGIN)!==void 0&&(N=Number.parseInt(x.get(ya.MARGIN).toString(),10)));const S=Or.encode(o,b,x);return this.renderResult(S,d,m,N)}writeToDom(o,d,m,x,b=null){typeof o=="string"&&(o=document.querySelector(o));const N=this.write(d,m,x,b);o&&o.appendChild(N)}renderResult(o,d,m,x){const b=o.getMatrix();if(b===null)throw new ce;const N=b.getWidth(),S=b.getHeight(),O=N+x*2,I=S+x*2,z=Math.max(d,O),W=Math.max(m,I),Z=Math.min(Math.floor(z/O),Math.floor(W/I)),se=Math.floor((z-N*Z)/2),fe=Math.floor((W-S*Z)/2),he=this.createSVGElement(z,W);for(let Ae=0,Ie=fe;Ae<S;Ae++,Ie+=Z)for(let at=0,et=se;at<N;at++,et+=Z)if(b.get(at,Ae)===1){const Qe=this.createSvgRectElement(et,Ie,Z,Z);he.appendChild(Qe)}return he}createSVGElement(o,d){const m=document.createElementNS($l.SVG_NS,"svg");return m.setAttributeNS(null,"height",o.toString()),m.setAttributeNS(null,"width",d.toString()),m}createSvgRectElement(o,d,m,x){const b=document.createElementNS($l.SVG_NS,"rect");return b.setAttributeNS(null,"x",o.toString()),b.setAttributeNS(null,"y",d.toString()),b.setAttributeNS(null,"height",m.toString()),b.setAttributeNS(null,"width",x.toString()),b.setAttributeNS(null,"fill","#000000"),b}}$l.QUIET_ZONE_SIZE=4,$l.SVG_NS="http://www.w3.org/2000/svg";class $i{encode(o,d,m,x,b){if(o.length===0)throw new v("Found empty contents");if(d!==ie.QR_CODE)throw new v("Can only encode QR_CODE, but got "+d);if(m<0||x<0)throw new v(`Requested dimensions are too small: ${m}x${x}`);let N=Ht.L,S=$i.QUIET_ZONE_SIZE;b!==null&&(b.get(ya.ERROR_CORRECTION)!==void 0&&(N=Ht.fromString(b.get(ya.ERROR_CORRECTION).toString())),b.get(ya.MARGIN)!==void 0&&(S=Number.parseInt(b.get(ya.MARGIN).toString(),10)));const O=Or.encode(o,N,b);return $i.renderResult(O,m,x,S)}static renderResult(o,d,m,x){const b=o.getMatrix();if(b===null)throw new ce;const N=b.getWidth(),S=b.getHeight(),O=N+x*2,I=S+x*2,z=Math.max(d,O),W=Math.max(m,I),Z=Math.min(Math.floor(z/O),Math.floor(W/I)),se=Math.floor((z-N*Z)/2),fe=Math.floor((W-S*Z)/2),he=new ue(z,W);for(let Ae=0,Ie=fe;Ae<S;Ae++,Ie+=Z)for(let at=0,et=se;at<N;at++,et+=Z)b.get(at,Ae)===1&&he.setRegion(et,Ie,Z,Z);return he}}$i.QUIET_ZONE_SIZE=4;class Vy{encode(o,d,m,x,b){let N;switch(d){case ie.QR_CODE:N=new $i;break;default:throw new v("No encoder available for format "+d)}return N.encode(o,d,m,x,b)}}class ps extends pe{constructor(o,d,m,x,b,N,S,O){if(super(N,S),this.yuvData=o,this.dataWidth=d,this.dataHeight=m,this.left=x,this.top=b,x+N>d||b+S>m)throw new v("Crop rectangle does not fit within image data.");O&&this.reverseHorizontal(N,S)}getRow(o,d){if(o<0||o>=this.getHeight())throw new v("Requested row is outside the image: "+o);const m=this.getWidth();(d==null||d.length<m)&&(d=new Uint8ClampedArray(m));const x=(o+this.top)*this.dataWidth+this.left;return P.arraycopy(this.yuvData,x,d,0,m),d}getMatrix(){const o=this.getWidth(),d=this.getHeight();if(o===this.dataWidth&&d===this.dataHeight)return this.yuvData;const m=o*d,x=new Uint8ClampedArray(m);let b=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return P.arraycopy(this.yuvData,b,x,0,m),x;for(let N=0;N<d;N++){const S=N*o;P.arraycopy(this.yuvData,b,x,S,o),b+=this.dataWidth}return x}isCropSupported(){return!0}crop(o,d,m,x){return new ps(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+d,m,x,!1)}renderThumbnail(){const o=this.getWidth()/ps.THUMBNAIL_SCALE_FACTOR,d=this.getHeight()/ps.THUMBNAIL_SCALE_FACTOR,m=new Int32Array(o*d),x=this.yuvData;let b=this.top*this.dataWidth+this.left;for(let N=0;N<d;N++){const S=N*o;for(let O=0;O<o;O++){const I=x[b+O*ps.THUMBNAIL_SCALE_FACTOR]&255;m[S+O]=4278190080|I*65793}b+=this.dataWidth*ps.THUMBNAIL_SCALE_FACTOR}return m}getThumbnailWidth(){return this.getWidth()/ps.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ps.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,d){const m=this.yuvData;for(let x=0,b=this.top*this.dataWidth+this.left;x<d;x++,b+=this.dataWidth){const N=b+o/2;for(let S=b,O=b+o-1;S<N;S++,O--){const I=m[S];m[S]=m[O],m[O]=I}}}invert(){return new xe(this)}}ps.THUMBNAIL_SCALE_FACTOR=2;class Vd extends pe{constructor(o,d,m,x,b,N,S){if(super(d,m),this.dataWidth=x,this.dataHeight=b,this.left=N,this.top=S,o.BYTES_PER_ELEMENT===4){const O=d*m,I=new Uint8ClampedArray(O);for(let z=0;z<O;z++){const W=o[z],Z=W>>16&255,se=W>>7&510,fe=W&255;I[z]=(Z+se+fe)/4&255}this.luminances=I}else this.luminances=o;if(x===void 0&&(this.dataWidth=d),b===void 0&&(this.dataHeight=m),N===void 0&&(this.left=0),S===void 0&&(this.top=0),this.left+d>this.dataWidth||this.top+m>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(o,d){if(o<0||o>=this.getHeight())throw new v("Requested row is outside the image: "+o);const m=this.getWidth();(d==null||d.length<m)&&(d=new Uint8ClampedArray(m));const x=(o+this.top)*this.dataWidth+this.left;return P.arraycopy(this.luminances,x,d,0,m),d}getMatrix(){const o=this.getWidth(),d=this.getHeight();if(o===this.dataWidth&&d===this.dataHeight)return this.luminances;const m=o*d,x=new Uint8ClampedArray(m);let b=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return P.arraycopy(this.luminances,b,x,0,m),x;for(let N=0;N<d;N++){const S=N*o;P.arraycopy(this.luminances,b,x,S,o),b+=this.dataWidth}return x}isCropSupported(){return!0}crop(o,d,m,x){return new Vd(this.luminances,m,x,this.dataWidth,this.dataHeight,this.left+o,this.top+d)}invert(){return new xe(this)}}class h0 extends j{static forName(o){return this.getCharacterSetECIByName(o)}}class Xo{}Xo.ISO_8859_1=j.ISO8859_1;class qi{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class p0{static singletonList(o){return[o]}static min(o,d){return o.sort(d)[0]}}class y0{constructor(o){this.previous=o}getPrevious(){return this.previous}}class ql extends y0{constructor(o,d,m){super(o),this.value=d,this.bitCount=m}appendTo(o,d){o.appendBits(this.value,this.bitCount)}add(o,d){return new ql(this,o,d)}addBinaryShift(o,d){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ql(this,o,d)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+M.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class eu extends ql{constructor(o,d,m){super(o,0,0),this.binaryShiftStart=d,this.binaryShiftByteCount=m}appendTo(o,d){for(let m=0;m<this.binaryShiftByteCount;m++)(m===0||m===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):m===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(d[this.binaryShiftStart+m],8)}addBinaryShift(o,d){return new eu(this,o,d)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function x0(X,o,d){return new eu(X,o,d)}function Gi(X,o,d){return new ql(X,o,d)}const Yi=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],vl=0,tu=1,_n=2,Hd=3,Kn=4,Wo=new ql(null,0,0),Gl=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Hy(X){for(let o of X)B.fill(o,-1);return X[vl][Kn]=0,X[tu][Kn]=0,X[tu][vl]=28,X[Hd][Kn]=0,X[_n][Kn]=0,X[_n][vl]=15,X}const Ko=Hy(B.createInt32Array(6,6));class Zn{constructor(o,d,m,x){this.token=o,this.mode=d,this.binaryShiftByteCount=m,this.bitCount=x}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,d){let m=this.bitCount,x=this.token;if(o!==this.mode){let N=Gl[this.mode][o];x=Gi(x,N&65535,N>>16),m+=N>>16}let b=o===_n?4:5;return x=Gi(x,d,b),new Zn(x,o,0,m+b)}shiftAndAppend(o,d){let m=this.token,x=this.mode===_n?4:5;return m=Gi(m,Ko[this.mode][o],x),m=Gi(m,d,5),new Zn(m,this.mode,0,this.bitCount+x+5)}addBinaryShiftChar(o){let d=this.token,m=this.mode,x=this.bitCount;if(this.mode===Kn||this.mode===_n){let S=Gl[m][vl];d=Gi(d,S&65535,S>>16),x+=S>>16,m=vl}let b=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,N=new Zn(d,m,this.binaryShiftByteCount+1,x+b);return N.binaryShiftByteCount===2078&&(N=N.endBinaryShift(o+1)),N}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let d=this.token;return d=x0(d,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new Zn(d,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let d=this.bitCount+(Gl[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?d+=Zn.calculateBinaryShiftCost(o)-Zn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(d+=10),d<=o.bitCount}toBitArray(o){let d=[];for(let x=this.endBinaryShift(o.length).token;x!==null;x=x.getPrevious())d.unshift(x);let m=new G;for(const x of d)x.appendTo(m,o);return m}toString(){return q.format("%s bits=%d bytes=%d",Yi[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}Zn.INITIAL_STATE=new Zn(Wo,vl,0,0);function b0(X){const o=q.getCharCode(" "),d=q.getCharCode("."),m=q.getCharCode(",");X[vl][o]=1;const x=q.getCharCode("Z"),b=q.getCharCode("A");for(let Z=b;Z<=x;Z++)X[vl][Z]=Z-b+2;X[tu][o]=1;const N=q.getCharCode("z"),S=q.getCharCode("a");for(let Z=S;Z<=N;Z++)X[tu][Z]=Z-S+2;X[_n][o]=1;const O=q.getCharCode("9"),I=q.getCharCode("0");for(let Z=I;Z<=O;Z++)X[_n][Z]=Z-I+2;X[_n][m]=12,X[_n][d]=13;const z=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let Z=0;Z<z.length;Z++)X[Hd][q.getCharCode(z[Z])]=Z;const W=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Z=0;Z<W.length;Z++)q.getCharCode(W[Z])>0&&(X[Kn][q.getCharCode(W[Z])]=Z);return X}const Zo=b0(B.createInt32Array(5,256));class Yl{constructor(o){this.text=o}encode(){const o=q.getCharCode(" "),d=q.getCharCode(`
`);let m=p0.singletonList(Zn.INITIAL_STATE);for(let b=0;b<this.text.length;b++){let N,S=b+1<this.text.length?this.text[b+1]:0;switch(this.text[b]){case q.getCharCode("\r"):N=S===d?2:0;break;case q.getCharCode("."):N=S===o?3:0;break;case q.getCharCode(","):N=S===o?4:0;break;case q.getCharCode(":"):N=S===o?5:0;break;default:N=0}N>0?(m=Yl.updateStateListForPair(m,b,N),b++):m=this.updateStateListForChar(m,b)}return p0.min(m,(b,N)=>b.getBitCount()-N.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,d){const m=[];for(let x of o)this.updateStateForChar(x,d,m);return Yl.simplifyStates(m)}updateStateForChar(o,d,m){let x=this.text[d]&255,b=Zo[o.getMode()][x]>0,N=null;for(let S=0;S<=Kn;S++){let O=Zo[S][x];if(O>0){if(N==null&&(N=o.endBinaryShift(d)),!b||S===o.getMode()||S===_n){const I=N.latchAndAppend(S,O);m.push(I)}if(!b&&Ko[o.getMode()][S]>=0){const I=N.shiftAndAppend(S,O);m.push(I)}}}if(o.getBinaryShiftByteCount()>0||Zo[o.getMode()][x]===0){let S=o.addBinaryShiftChar(d);m.push(S)}}static updateStateListForPair(o,d,m){const x=[];for(let b of o)this.updateStateForPair(b,d,m,x);return this.simplifyStates(x)}static updateStateForPair(o,d,m,x){let b=o.endBinaryShift(d);if(x.push(b.latchAndAppend(Kn,m)),o.getMode()!==Kn&&x.push(b.shiftAndAppend(Kn,m)),m===3||m===4){let N=b.latchAndAppend(_n,16-m).latchAndAppend(_n,1);x.push(N)}if(o.getBinaryShiftByteCount()>0){let N=o.addBinaryShiftChar(d).addBinaryShiftChar(d+1);x.push(N)}}static simplifyStates(o){let d=[];for(const m of o){let x=!0;for(const b of d){if(b.isBetterThanOrEqualTo(m)){x=!1;break}m.isBetterThanOrEqualTo(b)&&(d=d.filter(N=>N!==b))}x&&d.push(m)}return d}}class Wt{constructor(){}static encodeBytes(o){return Wt.encode(o,Wt.DEFAULT_EC_PERCENT,Wt.DEFAULT_AZTEC_LAYERS)}static encode(o,d,m){let x=new Yl(o).encode(),b=M.truncDivision(x.getSize()*d,100)+11,N=x.getSize()+b,S,O,I,z,W;if(m!==Wt.DEFAULT_AZTEC_LAYERS){if(S=m<0,O=Math.abs(m),O>(S?Wt.MAX_NB_BITS_COMPACT:Wt.MAX_NB_BITS))throw new v(q.format("Illegal value %s for layers",m));I=Wt.totalBitsInLayer(O,S),z=Wt.WORD_SIZE[O];let Qe=I-I%z;if(W=Wt.stuffBits(x,z),W.getSize()+b>Qe)throw new v("Data to large for user specified layer");if(S&&W.getSize()>z*64)throw new v("Data to large for user specified layer")}else{z=0,W=null;for(let Qe=0;;Qe++){if(Qe>Wt.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(S=Qe<=3,O=S?Qe+1:Qe,I=Wt.totalBitsInLayer(O,S),N>I)continue;(W==null||z!==Wt.WORD_SIZE[O])&&(z=Wt.WORD_SIZE[O],W=Wt.stuffBits(x,z));let zt=I-I%z;if(!(S&&W.getSize()>z*64)&&W.getSize()+b<=zt)break}}let Z=Wt.generateCheckWords(W,I,z),se=W.getSize()/z,fe=Wt.generateModeMessage(S,O,se),he=(S?11:14)+O*4,Ae=new Int32Array(he),Ie;if(S){Ie=he;for(let Qe=0;Qe<Ae.length;Qe++)Ae[Qe]=Qe}else{Ie=he+1+2*M.truncDivision(M.truncDivision(he,2)-1,15);let Qe=M.truncDivision(he,2),zt=M.truncDivision(Ie,2);for(let Pt=0;Pt<Qe;Pt++){let ca=Pt+M.truncDivision(Pt,15);Ae[Qe-Pt-1]=zt-ca-1,Ae[Qe+Pt]=zt+ca+1}}let at=new ue(Ie);for(let Qe=0,zt=0;Qe<O;Qe++){let Pt=(O-Qe)*4+(S?9:12);for(let ca=0;ca<Pt;ca++){let kn=ca*2;for(let tn=0;tn<2;tn++)Z.get(zt+kn+tn)&&at.set(Ae[Qe*2+tn],Ae[Qe*2+ca]),Z.get(zt+Pt*2+kn+tn)&&at.set(Ae[Qe*2+ca],Ae[he-1-Qe*2-tn]),Z.get(zt+Pt*4+kn+tn)&&at.set(Ae[he-1-Qe*2-tn],Ae[he-1-Qe*2-ca]),Z.get(zt+Pt*6+kn+tn)&&at.set(Ae[he-1-Qe*2-ca],Ae[Qe*2+tn])}zt+=Pt*8}if(Wt.drawModeMessage(at,S,Ie,fe),S)Wt.drawBullsEye(at,M.truncDivision(Ie,2),5);else{Wt.drawBullsEye(at,M.truncDivision(Ie,2),7);for(let Qe=0,zt=0;Qe<M.truncDivision(he,2)-1;Qe+=15,zt+=16)for(let Pt=M.truncDivision(Ie,2)&1;Pt<Ie;Pt+=2)at.set(M.truncDivision(Ie,2)-zt,Pt),at.set(M.truncDivision(Ie,2)+zt,Pt),at.set(Pt,M.truncDivision(Ie,2)-zt),at.set(Pt,M.truncDivision(Ie,2)+zt)}let et=new qi;return et.setCompact(S),et.setSize(Ie),et.setLayers(O),et.setCodeWords(se),et.setMatrix(at),et}static drawBullsEye(o,d,m){for(let x=0;x<m;x+=2)for(let b=d-x;b<=d+x;b++)o.set(b,d-x),o.set(b,d+x),o.set(d-x,b),o.set(d+x,b);o.set(d-m,d-m),o.set(d-m+1,d-m),o.set(d-m,d-m+1),o.set(d+m,d-m),o.set(d+m,d-m+1),o.set(d+m,d+m-1)}static generateModeMessage(o,d,m){let x=new G;return o?(x.appendBits(d-1,2),x.appendBits(m-1,6),x=Wt.generateCheckWords(x,28,4)):(x.appendBits(d-1,5),x.appendBits(m-1,11),x=Wt.generateCheckWords(x,40,4)),x}static drawModeMessage(o,d,m,x){let b=M.truncDivision(m,2);if(d)for(let N=0;N<7;N++){let S=b-3+N;x.get(N)&&o.set(S,b-5),x.get(N+7)&&o.set(b+5,S),x.get(20-N)&&o.set(S,b+5),x.get(27-N)&&o.set(b-5,S)}else for(let N=0;N<10;N++){let S=b-5+N+M.truncDivision(N,5);x.get(N)&&o.set(S,b-7),x.get(N+10)&&o.set(b+7,S),x.get(29-N)&&o.set(S,b+7),x.get(39-N)&&o.set(b-7,S)}}static generateCheckWords(o,d,m){let x=o.getSize()/m,b=new Yo(Wt.getGF(m)),N=M.truncDivision(d,m),S=Wt.bitsToWords(o,m,N);b.encode(S,N-x);let O=d%m,I=new G;I.appendBits(0,O);for(const z of Array.from(S))I.appendBits(z,m);return I}static bitsToWords(o,d,m){let x=new Int32Array(m),b,N;for(b=0,N=o.getSize()/d;b<N;b++){let S=0;for(let O=0;O<d;O++)S|=o.get(b*d+O)?1<<d-O-1:0;x[b]=S}return x}static getGF(o){switch(o){case 4:return Ee.AZTEC_PARAM;case 6:return Ee.AZTEC_DATA_6;case 8:return Ee.AZTEC_DATA_8;case 10:return Ee.AZTEC_DATA_10;case 12:return Ee.AZTEC_DATA_12;default:throw new v("Unsupported word size "+o)}}static stuffBits(o,d){let m=new G,x=o.getSize(),b=(1<<d)-2;for(let N=0;N<x;N+=d){let S=0;for(let O=0;O<d;O++)(N+O>=x||o.get(N+O))&&(S|=1<<d-1-O);(S&b)===b?(m.appendBits(S&b,d),N--):(S&b)===0?(m.appendBits(S|1,d),N--):m.appendBits(S,d)}return m}static totalBitsInLayer(o,d){return((d?88:112)+16*o)*o}}Wt.DEFAULT_EC_PERCENT=33,Wt.DEFAULT_AZTEC_LAYERS=0,Wt.MAX_NB_BITS=32,Wt.MAX_NB_BITS_COMPACT=4,Wt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Qo{encode(o,d,m,x){return this.encodeWithHints(o,d,m,x,null)}encodeWithHints(o,d,m,x,b){let N=Xo.ISO_8859_1,S=Wt.DEFAULT_EC_PERCENT,O=Wt.DEFAULT_AZTEC_LAYERS;return b!=null&&(b.has(ya.CHARACTER_SET)&&(N=h0.forName(b.get(ya.CHARACTER_SET).toString())),b.has(ya.ERROR_CORRECTION)&&(S=M.parseInt(b.get(ya.ERROR_CORRECTION).toString())),b.has(ya.AZTEC_LAYERS)&&(O=M.parseInt(b.get(ya.AZTEC_LAYERS).toString()))),Qo.encodeLayers(o,d,m,x,N,S,O)}static encodeLayers(o,d,m,x,b,N,S){if(d!==ie.AZTEC)throw new v("Can only encode AZTEC, but got "+d);let O=Wt.encode(q.getBytes(o,b),N,S);return Qo.renderResult(O,m,x)}static renderResult(o,d,m){let x=o.getMatrix();if(x==null)throw new ce;let b=x.getWidth(),N=x.getHeight(),S=Math.max(d,b),O=Math.max(m,N),I=Math.min(S/b,O/N),z=(S-b*I)/2,W=(O-N*I)/2,Z=new ue(S,O);for(let se=0,fe=W;se<N;se++,fe+=I)for(let he=0,Ae=z;he<b;he++,Ae+=I)x.get(he,se)&&Z.setRegion(Ae,fe,I,I);return Z}}r.AbstractExpandedDecoder=Yr,r.ArgumentException=y,r.ArithmeticException=Be,r.AztecCode=qi,r.AztecCodeReader=xr,r.AztecCodeWriter=Qo,r.AztecDecoder=rt,r.AztecDetector=Cr,r.AztecDetectorResult=Ue,r.AztecEncoder=Wt,r.AztecHighLevelEncoder=Yl,r.AztecPoint=Tt,r.BarcodeFormat=ie,r.Binarizer=D,r.BinaryBitmap=C,r.BitArray=G,r.BitMatrix=ue,r.BitSource=Xn,r.BrowserAztecCodeReader=ia,r.BrowserBarcodeReader=Ly,r.BrowserCodeReader=ge,r.BrowserDatamatrixCodeReader=Yc,r.BrowserMultiFormatReader=g0,r.BrowserPDF417Reader=Uy,r.BrowserQRCodeReader=jy,r.BrowserQRCodeSvgWriter=$l,r.CharacterSetECI=j,r.ChecksumException=T,r.Code128Reader=be,r.Code39Reader=Je,r.DataMatrixDecodedBitStreamParser=Hs,r.DataMatrixReader=$s,r.DecodeHintType=U,r.DecoderResult=ve,r.DefaultGridSampler=Br,r.DetectorResult=lt,r.EAN13Reader=Ge,r.EncodeHintType=ya,r.Exception=p,r.FormatException=L,r.GenericGF=Ee,r.GenericGFPoly=nt,r.GlobalHistogramBinarizer=J,r.GridSampler=$t,r.GridSamplerInstance=ut,r.HTMLCanvasElementLuminanceSource=ee,r.HybridBinarizer=ae,r.ITFReader=st,r.IllegalArgumentException=v,r.IllegalStateException=ce,r.InvertedLuminanceSource=xe,r.LuminanceSource=pe,r.MathUtils=it,r.MultiFormatOneDReader=Yn,r.MultiFormatReader=f0,r.MultiFormatWriter=Vy,r.NotFoundException=re,r.OneDReader=kt,r.PDF417DecodedBitStreamParser=Re,r.PDF417DecoderErrorCorrection=Gs,r.PDF417Reader=La,r.PDF417ResultMetadata=Hi,r.PerspectiveTransform=ir,r.PlanarYUVLuminanceSource=ps,r.QRCodeByteMatrix=Jc,r.QRCodeDataMask=yn,r.QRCodeDecodedBitStreamParser=Ar,r.QRCodeDecoderErrorCorrectionLevel=Ht,r.QRCodeDecoderFormatInformation=Sa,r.QRCodeEncoder=Or,r.QRCodeEncoderQRCode=Hl,r.QRCodeMaskUtil=Xr,r.QRCodeMatrixUtil=Ct,r.QRCodeMode=Et,r.QRCodeReader=qs,r.QRCodeVersion=yt,r.QRCodeWriter=$i,r.RGBLuminanceSource=Vd,r.RSS14Reader=mr,r.RSSExpandedReader=Ze,r.ReaderException=Qc,r.ReedSolomonDecoder=qe,r.ReedSolomonEncoder=Yo,r.ReedSolomonException=je,r.Result=oe,r.ResultMetadataType=$e,r.ResultPoint=Ke,r.StringUtils=q,r.UnsupportedOperationException=Y,r.VideoInputDevice=K,r.WhiteRectangleDetector=mt,r.WriterException=fr,r.ZXingArrays=B,r.ZXingCharset=h0,r.ZXingInteger=M,r.ZXingStandardCharsets=Xo,r.ZXingStringBuilder=le,r.ZXingStringEncoding=H,r.ZXingSystem=P,r.createAbstractExpandedDecoder=Ve,Object.defineProperty(r,"__esModule",{value:!0})}))})(Xm,Xm.exports)),Xm.exports}var Hr=Dme();const _me=jl(Hr),kme=KD({__proto__:null,default:_me},[Hr]);var vD=(function(){function e(t,r,n){if(this.formatMap=new Map([[dt.QR_CODE,Hr.BarcodeFormat.QR_CODE],[dt.AZTEC,Hr.BarcodeFormat.AZTEC],[dt.CODABAR,Hr.BarcodeFormat.CODABAR],[dt.CODE_39,Hr.BarcodeFormat.CODE_39],[dt.CODE_93,Hr.BarcodeFormat.CODE_93],[dt.CODE_128,Hr.BarcodeFormat.CODE_128],[dt.DATA_MATRIX,Hr.BarcodeFormat.DATA_MATRIX],[dt.MAXICODE,Hr.BarcodeFormat.MAXICODE],[dt.ITF,Hr.BarcodeFormat.ITF],[dt.EAN_13,Hr.BarcodeFormat.EAN_13],[dt.EAN_8,Hr.BarcodeFormat.EAN_8],[dt.PDF_417,Hr.BarcodeFormat.PDF_417],[dt.RSS_14,Hr.BarcodeFormat.RSS_14],[dt.RSS_EXPANDED,Hr.BarcodeFormat.RSS_EXPANDED],[dt.UPC_A,Hr.BarcodeFormat.UPC_A],[dt.UPC_E,Hr.BarcodeFormat.UPC_E],[dt.UPC_EAN_EXTENSION,Hr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!kme)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var l=this.createZXingFormats(t),i=new Map;i.set(Hr.DecodeHintType.POSSIBLE_FORMATS,l),i.set(Hr.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(n,l){try{n(r.decode(t))}catch(i){l(i)}})},e.prototype.decode=function(t){var r=new Hr.MultiFormatReader(this.verbose,this.hints),n=new Hr.HTMLCanvasElementLuminanceSource(t),l=new Hr.BinaryBitmap(new Hr.HybridBinarizer(n)),i=r.decode(l);return{text:i.text,format:h9.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,l){t.set(r,n)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],n=0,l=t;n<l.length;n++){var i=l[n];this.formatMap.has(i)?r.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),Pme=function(e,t,r,n){function l(i){return i instanceof r?i:new r(function(u){u(i)})}return new(r||(r=Promise))(function(i,u){function g(y){try{p(n.next(y))}catch(v){u(v)}}function h(y){try{p(n.throw(y))}catch(v){u(v)}}function p(y){y.done?i(y.value):l(y.value).then(g,h)}p((n=n.apply(e,t||[])).next())})},Ime=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,l,i,u;return u={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function g(p){return function(y){return h([p,y])}}function h(p){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(r=0)),r;)try{if(n=1,l&&(i=p[0]&2?l.return:p[0]?l.throw||((i=l.return)&&i.call(l),0):l.next)&&!(i=i.call(l,p[1])).done)return i;switch(l=0,i&&(p=[p[0]&2,i.value]),p[0]){case 0:case 1:i=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!i||p[1]>i[0]&&p[1]<i[3])){r.label=p[1];break}if(p[0]===6&&r.label<i[1]){r.label=i[1],i=p;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(p);break}i[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(y){p=[6,y],l=0}finally{n=i=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},ED=(function(){function e(t,r,n){if(this.formatMap=new Map([[dt.QR_CODE,"qr_code"],[dt.AZTEC,"aztec"],[dt.CODABAR,"codabar"],[dt.CODE_39,"code_39"],[dt.CODE_93,"code_93"],[dt.CODE_128,"code_128"],[dt.DATA_MATRIX,"data_matrix"],[dt.ITF,"itf"],[dt.EAN_13,"ean_13"],[dt.EAN_8,"ean_8"],[dt.PDF_417,"pdf417"],[dt.UPC_A,"upc_a"],[dt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var l=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return Pme(this,void 0,void 0,function(){var r,n;return Ime(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=l.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:h9.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,n=0,l=0,i=t;l<i.length;l++){var u=i[l],g=u.boundingBox.width*u.boundingBox.height;g>n&&(n=g,r=u)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],n=0,l=t;n<l.length;n++){var i=l[n];this.formatMap.has(i)?r.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,l){t.set(r,n)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),wD=function(e,t,r,n){function l(i){return i instanceof r?i:new r(function(u){u(i)})}return new(r||(r=Promise))(function(i,u){function g(y){try{p(n.next(y))}catch(v){u(v)}}function h(y){try{p(n.throw(y))}catch(v){u(v)}}function p(y){y.done?i(y.value):l(y.value).then(g,h)}p((n=n.apply(e,t||[])).next())})},ND=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,l,i,u;return u={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function g(p){return function(y){return h([p,y])}}function h(p){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(r=0)),r;)try{if(n=1,l&&(i=p[0]&2?l.return:p[0]?l.throw||((i=l.return)&&i.call(l),0):l.next)&&!(i=i.call(l,p[1])).done)return i;switch(l=0,i&&(p=[p[0]&2,i.value]),p[0]){case 0:case 1:i=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!i||p[1]>i[0]&&p[1]<i[3])){r.label=p[1];break}if(p[0]===6&&r.label<i[1]){r.label=i[1],i=p;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(p);break}i[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(y){p=[6,y],l=0}finally{n=i=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Mme=(function(){function e(t,r,n,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&ED.isSupported()?(this.primaryDecoder=new ED(t,n,l),this.secondaryDecoder=new vD(t,n,l)):this.primaryDecoder=new vD(t,n,l)}return e.prototype.decodeAsync=function(t){return wD(this,void 0,void 0,function(){var r;return ND(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return wD(this,void 0,void 0,function(){var r,n;return ND(this,function(l){switch(l.label){case 0:r=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,l.sent()];case 3:if(n=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,n=this.executionResults;r<n.length;r++){var l=n[r];t+=l}var i=t/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),fS=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(n[i]=l[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Pp=function(e,t,r,n){function l(i){return i instanceof r?i:new r(function(u){u(i)})}return new(r||(r=Promise))(function(i,u){function g(y){try{p(n.next(y))}catch(v){u(v)}}function h(y){try{p(n.throw(y))}catch(v){u(v)}}function p(y){y.done?i(y.value):l(y.value).then(g,h)}p((n=n.apply(e,t||[])).next())})},Ip=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,l,i,u;return u={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function g(p){return function(y){return h([p,y])}}function h(p){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(r=0)),r;)try{if(n=1,l&&(i=p[0]&2?l.return:p[0]?l.throw||((i=l.return)&&i.call(l),0):l.next)&&!(i=i.call(l,p[1])).done)return i;switch(l=0,i&&(p=[p[0]&2,i.value]),p[0]){case 0:case 1:i=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!i||p[1]>i[0]&&p[1]<i[3])){r.label=p[1];break}if(p[0]===6&&r.label<i[1]){r.label=i[1],i=p;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(p);break}i[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(y){p=[6,y],l=0}finally{n=i=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},y9=(function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e})(),Rme=(function(e){fS(t,e);function t(r,n){return e.call(this,r,n)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var n={};n[this.name]=r;var l={advanced:[n]};return this.track.applyConstraints(l)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(y9),Lme=(function(e){fS(t,e);function t(r){return e.call(this,"zoom",r)||this}return t})(Rme),Bme=(function(e){fS(t,e);function t(r){return e.call(this,"torch",r)||this}return t})(y9),Fme=(function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new Lme(this.track)},e.prototype.torchFeature=function(){return new Bme(this.track)},e})(),Ume=(function(){function e(t,r,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=t.surface.clientWidth,l=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,l),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,l){return Pp(this,void 0,void 0,function(){var i,u;return Ip(this,function(g){switch(g.label){case 0:return i=new e(t,r,l),n.aspectRatio?(u={aspectRatio:n.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(u)]):[3,2];case 1:g.sent(),g.label=2;case 2:return i.setupSurface(),[2,i]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,n=function(){setTimeout(t,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Pp(this,void 0,void 0,function(){return Ip(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,n){var l=t.mediaStream.getVideoTracks(),i=l.length,u=0;t.mediaStream.getVideoTracks().forEach(function(g){t.mediaStream.removeTrack(g),g.stop(),++u,u>=i&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new Fme(this.getFirstTrackOrFail())},e})(),jme=(function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,n){return Pp(this,void 0,void 0,function(){return Ip(this,function(l){return[2,Ume.create(t,this.mediaStream,r,n)]})})},e.create=function(t){return Pp(this,void 0,void 0,function(){var r,n;return Ip(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=l.sent(),[2,new e(n)]}})})},e})(),SD=function(e,t,r,n){function l(i){return i instanceof r?i:new r(function(u){u(i)})}return new(r||(r=Promise))(function(i,u){function g(y){try{p(n.next(y))}catch(v){u(v)}}function h(y){try{p(n.throw(y))}catch(v){u(v)}}function p(y){y.done?i(y.value):l(y.value).then(g,h)}p((n=n.apply(e,t||[])).next())})},CD=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,l,i,u;return u={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function g(p){return function(y){return h([p,y])}}function h(p){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(r=0)),r;)try{if(n=1,l&&(i=p[0]&2?l.return:p[0]?l.throw||((i=l.return)&&i.call(l),0):l.next)&&!(i=i.call(l,p[1])).done)return i;switch(l=0,i&&(p=[p[0]&2,i.value]),p[0]){case 0:case 1:i=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!i||p[1]>i[0]&&p[1]<i[3])){r.label=p[1];break}if(p[0]===6&&r.label<i[1]){r.label=i[1],i=p;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(p);break}i[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(y){p=[6,y],l=0}finally{n=i=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},zme=(function(){function e(){}return e.failIfNotSupported=function(){return SD(this,void 0,void 0,function(){return CD(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return SD(this,void 0,void 0,function(){return CD(this,function(r){return[2,jme.create(t)]})})},e})(),Vme=function(e,t,r,n){function l(i){return i instanceof r?i:new r(function(u){u(i)})}return new(r||(r=Promise))(function(i,u){function g(y){try{p(n.next(y))}catch(v){u(v)}}function h(y){try{p(n.throw(y))}catch(v){u(v)}}function p(y){y.done?i(y.value):l(y.value).then(g,h)}p((n=n.apply(e,t||[])).next())})},Hme=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,l,i,u;return u={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function g(p){return function(y){return h([p,y])}}function h(p){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(r=0)),r;)try{if(n=1,l&&(i=p[0]&2?l.return:p[0]?l.throw||((i=l.return)&&i.call(l),0):l.next)&&!(i=i.call(l,p[1])).done)return i;switch(l=0,i&&(p=[p[0]&2,i.value]),p[0]){case 0:case 1:i=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!i||p[1]>i[0]&&p[1]<i[3])){r.label=p[1];break}if(p[0]===6&&r.label<i[1]){r.label=i[1],i=p;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(p);break}i[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(y){p=[6,y],l=0}finally{n=i=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},$me=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Gu.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Gu.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return Vme(this,void 0,void 0,function(){var t,r,n,l,i,u,g;return Hme(this,function(h){switch(h.label){case 0:return t=function(p){for(var y=p.getVideoTracks(),v=0,C=y;v<C.length;v++){var T=C[v];T.enabled=!1,T.stop(),p.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=h.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=h.sent(),l=[],i=0,u=n;i<u.length;i++)g=u[i],g.kind==="videoinput"&&l.push({id:g.deviceId,label:g.label});return t(r),[2,l]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var n=function(i){for(var u=[],g=0,h=i;g<h.length;g++){var p=h[g];p.kind==="video"&&u.push({id:p.id,label:p.label})}t(u)},l=MediaStreamTrack;l.getSources(n)})},e})(),ma;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(ma||(ma={}));var qme=(function(){function e(){this.state=ma.NOT_STARTED,this.onGoingTransactionNewState=ma.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===ma.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ma.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===ma.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ma.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ma.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case ma.UNKNOWN:throw"Transition from unknown is not allowed";case ma.NOT_STARTED:this.failIfNewStateIs(t,[ma.PAUSED]);break;case ma.SCANNING:break;case ma.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var n=0,l=r;n<l.length;n++){var i=l[n];if(t===i)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e})(),Gme=(function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===ma.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==ma.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ma.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===ma.PAUSED},e})(),Yme=(function(){function e(){}return e.create=function(){return new Gme(new qme)},e})(),Xme=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(n[i]=l[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ss=(function(e){Xme(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(Cme),Wme=(function(){function e(t,r){this.logger=r,this.fps=ss.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=ss.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?p9.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!ui(this.qrbox)},e.create=function(t,r){return new e(t,r)},e})(),Hv=(function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new Tme(this.verbose),this.qrcode=new Mme(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Yme.create()}return e.prototype.start=function(t,r,n,l){var i=this;if(!t)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var u;l?u=l:u=this.verbose?this.logger.log:function(){};var g=Wme.create(r,this.logger);this.clearElement();var h=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?h=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=h,y=document.getElementById(this.elementId);y.clientWidth?y.clientWidth:ss.DEFAULT_WIDTH,y.style.position="relative",this.shouldScan=!0,this.element=y;var v=this,C=this.stateManagerProxy.startTransition(ma.SCANNING);return new Promise(function(T,D){var P=p?g.videoConstraints:v.createVideoConstraints(t);if(!P){C.cancel(),D("videoConstraints should be defined");return}var k={};(!p||g.aspectRatio)&&(k.aspectRatio=g.aspectRatio);var R={onRenderSurfaceReady:function(B,M){v.setupUi(B,M,g),v.isScanning=!0,v.foreverScan(g,n,u)}};zme.failIfNotSupported().then(function(B){B.create(P).then(function(M){return M.render(i.element,k,R).then(function(G){v.renderedCamera=G,C.execute(),T(null)}).catch(function(G){C.cancel(),D(G)})}).catch(function(M){C.cancel(),D(Gu.errorGettingUserMedia(M))})}).catch(function(B){C.cancel(),D(Gu.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ma.PAUSED),this.showPausedState(),(ui(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(ma.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(ma.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var i=document.getElementById(ss.SHADED_REGION_ELEMENT_ID);i&&t.element.removeChild(i)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),n(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),r.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(t,r){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ui(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var u=new Image;u.onload=function(){var g=u.width,h=u.height,p=document.getElementById(n.elementId),y=p.clientWidth?p.clientWidth:ss.DEFAULT_WIDTH,v=Math.max(p.clientHeight?p.clientHeight:h,ss.FILE_SCAN_MIN_HEIGHT),C=n.computeCanvasDrawConfig(g,h,y,v);if(r){var T=n.createCanvasElement(y,v,"qr-canvas-visible");T.style.display="inline-block",p.appendChild(T);var D=T.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=y,D.canvas.height=v,D.drawImage(u,0,0,g,h,C.x,C.y,C.width,C.height)}var P=ss.FILE_SCAN_HIDDEN_CANVAS_PADDING,k=Math.max(u.width,C.width),R=Math.max(u.height,C.height),B=k+2*P,M=R+2*P,G=n.createCanvasElement(B,M);p.appendChild(G);var F=G.getContext("2d");if(!F)throw"Unable to get 2d context from canvas";F.canvas.width=B,F.canvas.height=M,F.drawImage(u,0,0,g,h,P,P,k,R);try{n.qrcode.decodeRobustlyAsync(G).then(function(U){l(xD.createFromQrcodeResult(U))}).catch(i)}catch(U){i("QR code parse error, error = ".concat(U))}},u.onerror=i,u.onabort=i,u.onstalled=i,u.onsuspend=i,u.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return $me.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!p9.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[dt.QR_CODE,dt.AZTEC,dt.CODABAR,dt.CODE_39,dt.CODE_93,dt.CODE_128,dt.DATA_MATRIX,dt.MAXICODE,dt.ITF,dt.EAN_13,dt.EAN_8,dt.PDF_417,dt.RSS_14,dt.RSS_EXPANDED,dt.UPC_A,dt.UPC_E,dt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],l=0,i=t.formatsToSupport;l<i.length;l++){var u=i[l];Sme(u)?n.push(u):this.logger.warn("Invalid format: ".concat(u," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(ui(t))return!0;if(!ui(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(ui(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return ui(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,n){var l=this,i=n.qrbox;this.validateQrboxConfig(i);var u=this.toQrdimensions(t,r,i),g=function(p){if(p<ss.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ss.MIN_QR_BOX_SIZE,"px.")},h=function(p){return p>t&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=t),p};g(u.width),g(u.height),u.width=h(u.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(t,r)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return n},e.prototype.setupUi=function(t,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,n);var l=ui(n.qrbox)?{width:t,height:r}:n.qrbox;this.validateQrboxConfig(l);var i=this.toQrdimensions(t,r,l);i.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var u=n.isShadedBoxEnabled()&&i.height<=r,g={x:0,y:0,width:t,height:r},h=u?this.getShadedRegionBounds(t,r,i):g,p=this.createCanvasElement(h.width,h.height),y={willReadFrequently:!0},v=p.getContext("2d",y);v.canvas.width=h.width,v.canvas.height=h.height,this.element.append(p),u&&this.possiblyInsertShadingElement(this.element,t,r,i),this.createScannerPausedUiElement(this.element),this.qrRegion=h,this.context=v,this.canvasElement=p},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=Gu.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return t(l.text,xD.createFromQrcodeResult(l)),n.possiblyUpdateShaders(!0),!0}).catch(function(l){n.possiblyUpdateShaders(!1);var i=Gu.codeParseError(l);return r(i,Ame.createFrom(i)),!1})},e.prototype.foreverScan=function(t,r,n){var l=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),u=i.videoWidth/i.clientWidth,g=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var h=this.qrRegion.width*u,p=this.qrRegion.height*g,y=this.qrRegion.x*u,v=this.qrRegion.y*g;this.context.drawImage(i,y,v,h,p,0,0,this.qrRegion.width,this.qrRegion.height);var C=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(t,r,n)},l.getTimeoutFps(t.fps))};this.scanContext(r,n).then(function(T){!T&&t.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(r,n).finally(function(){C()})):C()}).catch(function(T){l.logger.logError("Error happend while scanning context",T),C()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",n="deviceId",l={user:!0,environment:!0},i="exact",u=function(D){if(D in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(D,"'")},g=Object.keys(t);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var h=Object.keys(t)[0];if(h!==r&&h!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(h===r){var p=t.facingMode;if(typeof p=="string"){if(u(p))return{facingMode:p}}else if(typeof p=="object")if(i in p){if(u(p["".concat(i)]))return{facingMode:{exact:p["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var y=typeof p;throw"Invalid type of 'facingMode' = ".concat(y)}}else{var v=t.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(i in v)return{deviceId:{exact:v["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}else{var C=typeof v;throw"Invalid type of 'deviceId' = ".concat(C)}}}var T=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},e.prototype.computeCanvasDrawConfig=function(t,r,n,l){if(t<=n&&r<=l){var i=(n-t)/2,u=(l-r)/2;return{x:i,y:u,width:t,height:r}}else{var g=t,h=r;return t>n&&(r=n/t*r,t=n),r>l&&(t=l/r*t,r=l),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(h)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,n,l)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?ss.BORDER_SHADER_MATCH_COLOR:ss.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,n){var l=t,i=r,u=document.createElement("canvas");return u.style.width="".concat(l,"px"),u.style.height="".concat(i,"px"),u.style.display="none",u.id=ui(n)?"qr-canvas":n,u},e.prototype.getShadedRegionBounds=function(t,r,n){if(n.width>t||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(t,r,n,l){if(!(r-l.width<1||n-l.height<1)){var i=document.createElement("div");i.style.position="absolute";var u=(r-l.width)/2,g=(n-l.height)/2;if(i.style.borderLeft="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(ss.SHADED_REGION_ELEMENT_ID),r-l.width<11||n-l.height<11)this.hasBorderShaders=!1;else{var h=5,p=40;this.insertShaderBorders(i,p,h,-h,null,0,!0),this.insertShaderBorders(i,p,h,-h,null,0,!1),this.insertShaderBorders(i,p,h,null,-h,0,!0),this.insertShaderBorders(i,p,h,null,-h,0,!1),this.insertShaderBorders(i,h,p+h,-h,null,-h,!0),this.insertShaderBorders(i,h,p+h,null,-h,-h,!0),this.insertShaderBorders(i,h,p+h,-h,null,-h,!1),this.insertShaderBorders(i,h,p+h,null,-h,-h,!1),this.hasBorderShaders=!0}t.append(i)}},e.prototype.insertShaderBorders=function(t,r,n,l,i,u,g){var h=document.createElement("div");h.style.position="absolute",h.style.backgroundColor=ss.BORDER_SHADER_DEFAULT_COLOR,h.style.width="".concat(r,"px"),h.style.height="".concat(n,"px"),l!==null&&(h.style.top="".concat(l,"px")),i!==null&&(h.style.bottom="".concat(i,"px")),g?h.style.left="".concat(u,"px"):h.style.right="".concat(u,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(h),t.appendChild(h)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e})(),AD;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(AD||(AD={}));class Kme extends w.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Scanner Error:",t,r)}render(){return this.state.hasError?a.createElement("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-center"},a.createElement("p",{className:"text-red-800 font-semibold"},"Scanner Error"),a.createElement("p",{className:"text-sm text-red-600 mt-2"},"Please refresh the page to try again."),a.createElement("button",{onClick:()=>window.location.reload(),className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"},"Refresh Page")):this.props.children}}const x9=w.memo(({scannerContainerId:e})=>{const t=w.useRef(null),r=w.useRef(null);return w.useEffect(()=>(console.log("[ScannerContainer] Mounted ONCE",{scannerContainerId:e,containerExists:!!document.getElementById(e)}),()=>{console.log("[ScannerContainer] Unmounting (should only happen on page leave)",{scannerContainerId:e})}),[e]),a.createElement("div",{id:e,ref:t,className:"relative w-full aspect-square max-w-[90vw] sm:max-w-lg lg:max-w-xl mx-auto rounded-xl overflow-hidden bg-gray-100 border-2 border-dashed border-gray-300",style:{minHeight:"min(80vw, 400px)"}},a.createElement("div",{ref:r,"data-placeholder":"true",className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500 p-4 z-10 bg-gray-100"},a.createElement(UP,{className:"w-10 h-10 sm:w-12 sm:h-12 mb-3"}),a.createElement("p",{className:"text-sm font-medium text-center"},"Camera Preview"),a.createElement("p",{className:"text-xs text-gray-400 mt-1 text-center"},"Tap the button below to start scanning")))},()=>!0);x9.displayName="ScannerContainer";function Zme(){const[e,t]=w.useState(!1),[r,n]=w.useState(null),[l,i]=w.useState("unknown"),[u,g]=w.useState([]),[h,p]=w.useState(null),[y,v]=w.useState(!1),[C,T]=w.useState([]),[D,P]=w.useState(""),[k,R]=w.useState(!0),[B,M]=w.useState(!1),[G,F]=w.useState(null),[U,L]=w.useState(!1),[V,j]=w.useState(null),[Y,H]=w.useState(!1),q=w.useRef(null),le=w.useRef(`qr-scanner-${Date.now()}`).current,ue=w.useRef(!1),re=w.useRef(!0),J=w.useRef(0);w.useEffect(()=>{console.log("[ScanQR] State changed:",{isScanning:e,isLoading:y,permissionStatus:l,availableCameras:u.length,hasScanner:!!q.current})},[e,y,l,u]),w.useEffect(()=>{console.log("[ScanQR] Component mounted",{scannerContainerId:le});const Ee=window.location.protocol==="https:"||window.location.hostname==="localhost";R(Ee);const je=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return M(je),re.current=!0,()=>{if(console.log("[ScanQR] Component unmounting",{scannerContainerId:le,hasScanner:!!q.current,isCleaningUp:ue.current}),re.current=!1,q.current&&!ue.current){ue.current=!0;const ce=q.current;try{const qe=ce.getState();console.log("[ScanQR] Unmount cleanup - scanner state:",qe),qe===2&&ce.stop().catch(Se=>{console.log("[ScanQR] Unmount stop error:",Se.message)})}catch(qe){console.log("[ScanQR] Unmount cleanup error:",qe.message)}q.current=null,setTimeout(()=>{const qe=document.getElementById(le);console.log("[ScanQR] Clearing container after unmount:",{containerExists:!!qe,children:qe?.children.length||0}),qe&&(qe.innerHTML="")},0)}}},[le]);const ae=async()=>{try{const Ee=await Hv.getCameras();if(Ee&&Ee.length>0){g(Ee);const je=Ee.find(ce=>{const qe=ce.label.toLowerCase();return qe.includes("back")||qe.includes("rear")||qe.includes("environment")||qe.includes("0")});return p(je?.id||Ee[0].id),i("granted"),!0}else return P("No cameras found on this device."),i("error"),!1}catch(Ee){return console.error("Error getting cameras:",Ee),pe(Ee),!1}},pe=Ee=>{console.error("Camera error:",Ee);const je=Ee.name||"",ce=Ee.message||"";je==="NotAllowedError"||ce.includes("Permission")?(i("denied"),P(B?"Camera permission denied. On mobile, please go to your browser settings, find this site, and allow camera access.":"Camera permission was denied. Please allow camera access in your browser settings.")):je==="NotFoundError"||ce.includes("not found")?(i("error"),P("No camera found on this device.")):je==="NotReadableError"||ce.includes("in use")?(i("error"),P("Camera is already in use by another application. Please close other apps using the camera.")):je==="SecurityError"?(i("error"),P("Camera access blocked due to security settings. Please use HTTPS.")):je==="AbortError"?(i("error"),P("Camera access was interrupted. Please try again.")):(i("error"),P(ce||"Failed to access camera. Please try again."))},xe=async()=>{if(v(!0),i("checking"),P(""),B&&!k)return i("error"),P("Camera access requires HTTPS on mobile devices. Please access this site via HTTPS."),v(!1),!1;if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return i("error"),P("Your browser does not support camera access. Please try a different browser."),v(!1),!1;try{let Ee;try{Ee=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}}})}catch(ce){console.log("Environment camera failed, trying any camera:",ce),Ee=await navigator.mediaDevices.getUserMedia({video:!0})}return Ee.getTracks().forEach(ce=>ce.stop()),await ae()?(vt.success("Camera access granted!"),!0):!1}catch(Ee){return console.error("Camera permission error:",Ee),pe(Ee),Ee.name==="NotAllowedError"?vt.error("Camera permission denied."):vt.error("Failed to access camera."),!1}finally{v(!1)}},ee=async()=>{if(console.log("[startScanner] Called",{availableCameras:u.length,isScanning:e,isLoading:y,hasExistingScanner:!!q.current}),u.length===0){if(!await xe())return;await new Promise(je=>setTimeout(je,100))}v(!0),n(null);try{const Ee=document.getElementById(le);if(console.log("[startScanner] Container check",{containerExists:!!Ee,containerChildren:Ee?.children.length||0,containerHTML:Ee?.innerHTML.substring(0,100)}),!Ee){vt.error("Scanner container not ready. Please try again."),v(!1);return}q.current&&!ue.current&&(console.log("[startScanner] Stopping existing scanner"),await K(),await new Promise(it=>setTimeout(it,300)));const je=Ee.querySelectorAll("video, canvas, #qr-shaded-region");if(console.log("[startScanner] Clearing leftover elements",{count:je.length,types:Array.from(je).map(it=>it.tagName)}),je.forEach(it=>{try{it.parentNode===Ee&&(console.log("[startScanner] Removing element:",it.tagName,it.id),it.remove())}catch(pt){console.log("[startScanner] Error removing leftover element:",pt.message)}}),!re.current){console.log("[startScanner] Component unmounted, aborting"),v(!1);return}console.log("[startScanner] Creating new Html5Qrcode instance");const ce=new Hv(le);q.current=ce;const qe={fps:10,qrbox:B?{width:200,height:200}:{width:250,height:250},aspectRatio:1,disableFlip:!1},Se=h||{facingMode:"environment"};if(console.log("[startScanner] Starting scanner with config",{cameraConfig:Se,config:qe}),await ce.start(Se,qe,Ne,ie),console.log("[startScanner] Scanner started successfully",{containerChildren:Ee.children.length,hasVideo:!!Ee.querySelector("video"),hasCanvas:!!Ee.querySelector("canvas")}),!re.current){console.log("[startScanner] Component unmounted after start, stopping"),await ce.stop().catch(()=>{});return}const rt=Ee.querySelector('[data-placeholder="true"]');rt&&(console.log("[startScanner] Hiding placeholder via DOM"),rt.style.display="none"),Ee.classList.remove("bg-gray-100"),Ee.classList.add("bg-black"),J.current=0,t(!0),i("granted"),vt.info("Scanner started. Point camera at a QR code."),console.log("[startScanner]  Scanner ready - point camera at QR code")}catch(Ee){if(console.error("Error starting scanner:",Ee),h&&Ee.message?.includes("Unable to start"))try{const je=new Hv(le);q.current=je,await je.start({facingMode:"environment"},{fps:10,qrbox:{width:200,height:200}},Ne,ie),t(!0),i("granted"),vt.info("Scanner started.");return}catch(je){console.error("Fallback also failed:",je)}pe(Ee),vt.error("Failed to start scanner.")}finally{v(!1)}},K=async()=>{if(console.log("[stopScanner] Called",{hasScanner:!!q.current,isCleaningUp:ue.current,isMounted:re.current}),!q.current||ue.current){console.log("[stopScanner] Early return - no scanner or already cleaning"),t(!1);return}ue.current=!0;try{const Ee=q.current,je=Ee.getState();console.log("[stopScanner] Scanner state:",je),je===2&&(console.log("[stopScanner] Stopping scanner..."),await Ee.stop(),console.log("[stopScanner] Scanner stopped successfully"),re.current&&await new Promise(ce=>setTimeout(ce,200)))}catch(Ee){console.error("[stopScanner] Error stopping scanner:",Ee);try{const je=document.getElementById(le);if(je){const ce=je.querySelector("video");ce&&ce.srcObject&&(console.log("[stopScanner] Manually stopping video tracks"),ce.srcObject.getTracks().forEach(qe=>qe.stop()))}}catch(je){console.log("[stopScanner] Could not stop video tracks:",je.message)}}finally{console.log("[stopScanner] Cleanup - setting refs to null"),q.current=null,ue.current=!1;const Ee=document.getElementById(le);if(Ee){const je=Ee.querySelector('[data-placeholder="true"]');je&&(console.log("[stopScanner] Showing placeholder via DOM"),je.style.display="flex"),Ee.classList.remove("bg-black"),Ee.classList.add("bg-gray-100")}re.current&&t(!1)}},te=async Ee=>{const{enrollmentId:je,eventId:ce,phone:qe,userId:Se}=Ee,rt=new URLSearchParams({enrollmentId:je,eventId:ce,phone:qe,...Se&&{userId:Se}}),it=await fetch(`https://motivata.synquic.com/api/app/tickets/qr-scan?${rt}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),pt=await it.json();if(console.log("[validateRegularTicket] API Response:",pt),!it.ok){const Ke=pt.message?.toLowerCase().includes("already been scanned");let lt=null;if(Ke&&pt.message){const Ue=pt.message.match(/scanned at (.+)$/i);Ue&&Ue[1]&&(lt=Ue[1])}return{...pt,status:it.status,ticketType:"regular",data:{...pt.data,isValid:!Ke,isAlreadyScanned:Ke,scannedAt:lt}}}return{...pt,status:it.status,ticketType:"regular",data:{...pt.data,isValid:!0,isAlreadyScanned:!1}}},ge=async Ee=>{const{enrollmentId:je,eventId:ce,phone:qe,userId:Se}=Ee,rt=new URLSearchParams({enrollmentId:je,eventId:ce,phone:qe,...Se&&{userId:Se}}),it=await fetch(`https://motivata.synquic.com/api/app/tickets/cash/qr-scan?${rt}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),pt=await it.json();return console.log("[validateCashTicket] API Response:",pt),{...pt,status:it.status,ticketType:"cash"}},oe=async Ee=>{H(!0);try{console.log("[validateTicket] Trying regular ticket endpoint...");const je=await te(Ee);return je.status===200||je.data?.isAlreadyScanned?(console.log("[validateTicket] Regular ticket validated"),je):je.status===404?(console.log("[validateTicket] Regular ticket not found, trying cash ticket..."),await ge(Ee)):je}catch(je){return console.error("[validateTicket] API Error:",je),{status:500,message:"Failed to validate ticket",error:je.message,data:null}}finally{H(!1)}},Ne=async(Ee,je)=>{console.log("[onScanSuccess] QR Code scanned:",Ee),n(Ee);let ce=null;try{const pt=new URL(Ee),Ke={};pt.searchParams.forEach((lt,Ue)=>{Ke[Ue]=lt}),ce={type:"url",fullUrl:Ee,protocol:pt.protocol,host:pt.host,pathname:pt.pathname,parameters:Ke,hash:pt.hash||null},console.log("[onScanSuccess]  URL detected!"),console.log("[onScanSuccess] Full URL:",Ee),console.log("[onScanSuccess] Protocol:",pt.protocol),console.log("[onScanSuccess] Host:",pt.host),console.log("[onScanSuccess] Pathname:",pt.pathname),console.log("[onScanSuccess] Parameters:",Ke),Object.keys(Ke).length>0?(console.log("[onScanSuccess]  Extracted Parameters:"),Object.entries(Ke).forEach(([lt,Ue])=>{console.log(`   ${lt}: ${Ue}`)})):console.log("[onScanSuccess]  No parameters found in URL"),pt.hash&&console.log("[onScanSuccess] Hash:",pt.hash)}catch{console.log("[onScanSuccess]  Not a URL, just plain text:",Ee),ce={type:"text",text:Ee}}F(ce);let qe=null;const Se=ce.parameters||{},rt=Se.enrollmentId||Se.id,it=rt&&Se.eventId&&Se.phone;ce.type==="url"&&it?(console.log("[onScanSuccess] Validating ticket with API...",{enrollmentId:rt,eventId:Se.eventId,phone:Se.phone,userId:Se.userId}),vt.info(" Validating ticket..."),qe=await oe({enrollmentId:rt,eventId:Se.eventId,phone:Se.phone,userId:Se.userId}),console.log("[onScanSuccess] Full API Response:",JSON.stringify(qe,null,2)),j(qe),qe.status===200||qe.data?.isAlreadyScanned?(console.log("[onScanSuccess] API Data:",{message:qe.message,isValid:qe.data?.isValid,isAlreadyScanned:qe.data?.isAlreadyScanned,ticketType:qe.ticketType,enrollment:qe.data?.enrollment?.name}),qe.data?.isAlreadyScanned===!0?(console.log("[onScanSuccess]  Ticket already scanned!"),vt.warning(" This ticket was already scanned!",{autoClose:5e3}),navigator.vibrate&&navigator.vibrate([100,50,100,50,100]),L(!0)):qe.data?.isValid===!0?(console.log("[onScanSuccess]  First time scan - Valid!"),vt.success(" Ticket Verified - First Scan!"),navigator.vibrate&&navigator.vibrate([200,100,200]),L(!0)):(console.log("[onScanSuccess]  Invalid ticket!"),vt.error(" Invalid Ticket!"),navigator.vibrate&&navigator.vibrate([300,100,300]),L(!1))):(console.log("[onScanSuccess]  API Error or Invalid Response"),vt.error(" Failed to validate ticket!"),navigator.vibrate&&navigator.vibrate([300,100,300]),L(!1))):(L(!0),vt.success(" QR Code Scanned!"),navigator.vibrate&&navigator.vibrate([200,100,200])),T(pt=>[{text:Ee,timestamp:new Date,format:je?.result?.format?.formatName||"QR_CODE"},...pt.slice(0,9)]),K()},ie=Ee=>{J.current+=1,J.current%10===0&&console.log(`[onScanFailure] Scanner active, attempts: ${J.current}`),Ee&&!Ee.includes("No MultiFormat Readers")&&!Ee.includes("NotFoundException")&&console.log("[onScanFailure] Error:",Ee)},me=async()=>{if(u.length<=1)return;const je=(u.findIndex(qe=>qe.id===h)+1)%u.length,ce=u[je];await K(),p(ce.id),setTimeout(()=>ee(),200),vt.info(`Switched to ${ce.label||"Camera "+(je+1)}`)},$e=async Ee=>{try{await navigator.clipboard.writeText(Ee),vt.success("Copied to clipboard!")}catch{try{const ce=document.createElement("textarea");ce.value=Ee,document.body.appendChild(ce),ce.select(),document.execCommand("copy"),document.body.removeChild(ce),vt.success("Copied to clipboard!")}catch{vt.error("Failed to copy")}}},ve=Ee=>{try{return new URL(Ee),!0}catch{return!1}},We=Ee=>{ve(Ee)?window.open(Ee,"_blank","noopener,noreferrer"):$e(Ee)},nt=l==="denied"||l==="error",Be=!nt;return a.createElement("div",{className:"space-y-4 sm:space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 tracking-tight"},"Scan QR Code"),a.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Scan QR codes using your device camera"))),B&&!k&&a.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex items-start gap-3"},a.createElement(rA,{className:"w-6 h-6 text-yellow-600 shrink-0 mt-0.5"}),a.createElement("div",null,a.createElement("h3",{className:"font-semibold text-yellow-800"},"HTTPS Required"),a.createElement("p",{className:"text-sm text-yellow-700 mt-1"},"Camera access on mobile requires a secure connection (HTTPS). Please access this site via HTTPS to use the scanner."))),a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6"},a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6"},a.createElement("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},a.createElement(Og,{className:"w-6 h-6 text-blue-600"}),"Scanner"),nt&&a.createElement("div",{className:"text-center py-6 sm:py-8"},a.createElement("div",{className:`w-14 h-14 sm:w-16 sm:h-16 ${l==="denied"?"bg-red-100":"bg-orange-100"} rounded-full flex items-center justify-center mx-auto mb-4`},a.createElement(KY,{className:`w-7 h-7 sm:w-8 sm:h-8 ${l==="denied"?"text-red-500":"text-orange-500"}`})),a.createElement("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-2"},l==="denied"?"Camera Access Denied":"Camera Error"),a.createElement("p",{className:"text-gray-600 mb-4 text-sm max-w-sm mx-auto px-2"},D||"Unable to access camera. Please check your permissions and try again."),a.createElement("button",{onClick:xe,disabled:y||B&&!k,className:"px-5 sm:px-6 py-2.5 sm:py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-2 mx-auto text-sm sm:text-base"},y?a.createElement(a.Fragment,null,a.createElement("div",{className:"w-4 h-4 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.createElement("span",null,"Requesting...")):a.createElement(a.Fragment,null,a.createElement(UP,{className:"w-4 h-4"}),a.createElement("span",null,"Request Camera Access"))),l==="denied"&&a.createElement("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg max-w-xs mx-auto"},a.createElement("p",{className:"text-xs text-gray-600"},B?"Go to your browser settings  Site settings  Camera  Allow for this site.":"Click the camera icon in your browser's address bar to allow access."))),Be&&a.createElement(Kme,null,a.createElement("div",{className:"space-y-4"},a.createElement(x9,{scannerContainerId:le}),a.createElement("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-3"},e?a.createElement(a.Fragment,null,a.createElement("button",{onClick:K,className:"flex items-center gap-2 px-5 sm:px-6 py-2.5 sm:py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm sm:text-base"},a.createElement(XV,{className:"w-5 h-5"}),a.createElement("span",null,"Stop")),u.length>1&&a.createElement("button",{onClick:me,className:"flex items-center gap-2 px-4 py-2.5 sm:py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm sm:text-base",title:"Switch Camera"},a.createElement(qV,{className:"w-5 h-5"}),a.createElement("span",{className:"hidden sm:inline"},"Switch Camera"))):a.createElement("button",{onClick:ee,disabled:y||B&&!k,className:"flex items-center gap-2 px-5 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all disabled:opacity-50 shadow-lg shadow-blue-500/30 text-sm sm:text-base"},y?a.createElement(a.Fragment,null,a.createElement("div",{className:"w-4 h-4 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.createElement("span",null,"Starting...")):a.createElement(a.Fragment,null,a.createElement(Og,{className:"w-5 h-5"}),a.createElement("span",null,"Start Scanner")))),u.length>1&&!e&&a.createElement("div",{className:"flex items-center justify-center gap-2"},a.createElement("label",{className:"text-sm text-gray-600"},"Camera:"),a.createElement("select",{value:h||"",onChange:Ee=>p(Ee.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 max-w-[200px]"},u.map((Ee,je)=>a.createElement("option",{key:Ee.id,value:Ee.id},Ee.label||`Camera ${je+1}`))))))),a.createElement("div",{className:"space-y-4 sm:space-y-6"},U&&G&&(()=>{const Ee=V?.data?.isAlreadyScanned===!0;return a.createElement("div",{className:`rounded-xl shadow-lg border-2 p-6 sm:p-8 ${Ee?"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-400":"bg-gradient-to-br from-green-50 to-emerald-50 border-green-300"}`},a.createElement("div",{className:"text-center mb-6"},Ee?a.createElement(a.Fragment,null,a.createElement("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-yellow-500 rounded-full mb-4 animate-pulse"},a.createElement(rA,{className:"w-12 h-12 text-white"})),a.createElement("h2",{className:"text-2xl sm:text-3xl font-bold text-yellow-800 mb-2"}," ALREADY SCANNED"),a.createElement("p",{className:"text-yellow-700 font-medium"},"This ticket was previously scanned"),V.data.scannedAt&&a.createElement("p",{className:"text-sm text-yellow-600 mt-2"},"Previously scanned: ",new Date(V.data.scannedAt).toLocaleString())):a.createElement(a.Fragment,null,a.createElement("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-500 rounded-full mb-4 animate-pulse"},a.createElement(rd,{className:"w-12 h-12 text-white"})),a.createElement("h2",{className:"text-2xl sm:text-3xl font-bold text-green-800 mb-2"}," VERIFIED - FIRST SCAN"),a.createElement("p",{className:"text-green-700 font-medium"},"Person is Allowed & Authenticated"))),V?.data&&(V.data.user||V.data.enrollment)&&(()=>{const je=V.ticketType==="cash",ce=je?V.data.enrollment?.name:V.data.user?.name,qe=je?V.data.enrollment?.phone:V.data.ticket?.phone||V.data.user?.phone,Se=je?V.data.enrollment?.event:V.data.event;return a.createElement("div",{className:"bg-white rounded-lg p-4 sm:p-6 mb-4 shadow-sm"},a.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},a.createElement(rd,{className:"w-5 h-5 text-blue-600"}),"Attendee Information",V.ticketType&&a.createElement("span",{className:"text-xs font-normal bg-gray-100 px-2 py-1 rounded"},V.ticketType==="cash"?"Cash Ticket":"Online Ticket")),a.createElement("div",{className:"space-y-3"},ce&&a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-blue-50 rounded-lg"},a.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Name:"),a.createElement("span",{className:"text-base sm:text-lg font-bold text-gray-900 bg-white px-4 py-2 rounded border border-blue-200"},ce)),qe&&a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg"},a.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Phone:"),a.createElement("span",{className:"text-sm sm:text-base font-mono text-gray-900 bg-white px-3 py-1 rounded border border-gray-200"},qe)),Se&&a.createElement(a.Fragment,null,a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg"},a.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Event:"),a.createElement("span",{className:"text-sm sm:text-base font-semibold text-gray-900 bg-white px-3 py-1 rounded border border-gray-200"},Se.name)),Se.startDate&&Se.endDate&&a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg"},a.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Event Date:"),a.createElement("span",{className:"text-xs sm:text-sm text-gray-900 bg-white px-3 py-1 rounded border border-gray-200"},new Date(Se.startDate).toLocaleDateString()," - ",new Date(Se.endDate).toLocaleDateString())))))})(),V?.data&&(V.data.voucher?a.createElement("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 sm:p-6 mb-4 shadow-sm border border-purple-200"},a.createElement("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2"},a.createElement(eA,{className:"w-5 h-5 text-purple-600"}),"Redeemed Voucher"),a.createElement("div",{className:"space-y-3"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-white rounded-lg border border-purple-100"},a.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Voucher Code:"),a.createElement("span",{className:"text-base sm:text-lg font-bold text-purple-700 bg-purple-100 px-4 py-2 rounded border border-purple-200 font-mono"},V.data.voucher.code)),V.data.voucher.title&&a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-white rounded-lg border border-purple-100"},a.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Title:"),a.createElement("span",{className:"text-sm sm:text-base font-semibold text-gray-900"},V.data.voucher.title)),V.data.voucher.description&&a.createElement("div",{className:"p-3 bg-white rounded-lg border border-purple-100"},a.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide block mb-2"},"Description:"),a.createElement("p",{className:"text-sm text-gray-700"},V.data.voucher.description)))):a.createElement("div",{className:"bg-gray-50 rounded-lg p-4 sm:p-6 mb-4 shadow-sm border border-gray-200"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement(eA,{className:"w-6 h-6 text-gray-400"}),a.createElement("div",null,a.createElement("h3",{className:"text-base font-semibold text-gray-600"},"No Food Voucher"),a.createElement("p",{className:"text-sm text-gray-500"},"This attendee has not redeemed any voucher"))))),!V?.data?.enrollment&&!V?.data?.user&&G.type==="url"&&Object.keys(G.parameters).length>0&&a.createElement("div",{className:"bg-white rounded-lg p-4 sm:p-6 mb-4 shadow-sm"},a.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},a.createElement(jx,{className:"w-5 h-5 text-blue-600"}),"Ticket Information"),a.createElement("div",{className:"space-y-3"},Object.entries(G.parameters).map(([je,ce])=>a.createElement("div",{key:je,className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},a.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},je.replace(/_/g," "),":"),a.createElement("span",{className:"text-sm sm:text-base font-mono text-gray-900 bg-white px-3 py-1 rounded border border-gray-200"},ce))))),G.type==="url"&&a.createElement("div",{className:"bg-blue-50 rounded-lg p-4 mb-4"},a.createElement("p",{className:"text-xs text-blue-700 font-semibold mb-1"},"SCANNED URL:"),a.createElement("p",{className:"text-sm text-blue-900 break-all font-mono"},G.fullUrl)),G.type==="text"&&a.createElement("div",{className:"bg-white rounded-lg p-4 sm:p-6 mb-4 shadow-sm"},a.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-3"},"Scanned Content:"),a.createElement("p",{className:"text-gray-900 break-all font-mono text-sm bg-gray-50 p-3 rounded border border-gray-200"},G.text)),a.createElement("div",{className:"flex flex-wrap gap-3 justify-center"},a.createElement("button",{onClick:()=>{n(null),F(null),L(!1),j(null),ee()},className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all shadow-md hover:shadow-lg font-semibold"},a.createElement(Og,{className:"w-5 h-5"}),"Scan Next Person"),a.createElement("button",{onClick:()=>$e(r),className:"flex items-center gap-2 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors shadow-md"},a.createElement(jx,{className:"w-5 h-5"}),"Copy Data")))})(),a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6"},a.createElement("h2",{className:"text-lg font-bold text-gray-900 mb-4"},"Scan History"),C.length===0?a.createElement("div",{className:"text-center py-6 sm:py-8 text-gray-500"},a.createElement(Og,{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-2 opacity-30"}),a.createElement("p",{className:"text-sm"},"No scans yet. Start scanning to see history.")):a.createElement("div",{className:"space-y-2 sm:space-y-3 max-h-60 sm:max-h-80 overflow-y-auto"},C.map((Ee,je)=>a.createElement("div",{key:je,className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer group active:bg-gray-200",onClick:()=>We(Ee.text)},a.createElement("div",{className:"flex items-start justify-between gap-2"},a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-sm text-gray-900 break-all font-mono truncate group-hover:text-blue-600"},Ee.text),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},Ee.timestamp.toLocaleTimeString(),"  ",Ee.format)),a.createElement("button",{onClick:ce=>{ce.stopPropagation(),$e(Ee.text)},className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded transition-colors"},a.createElement(jx,{className:"w-4 h-4"}))))))),a.createElement("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200"},a.createElement("h3",{className:"font-semibold text-blue-900 mb-2"},"Tips for better scanning:"),a.createElement("ul",{className:"text-sm text-blue-800 space-y-1"},a.createElement("li",null," Hold your device steady"),a.createElement("li",null," Ensure good lighting"),a.createElement("li",null," Position QR code within the frame"),a.createElement("li",null," Keep the QR code flat and clear"),B&&a.createElement("li",null," Try switching to back camera if using front"))))))}const Qme=async(e,t={})=>Pe(ke.get(`/web/tickets/reshare/list/${e}`,{params:{page:t.page||1,limit:t.limit||20,search:t.search||void 0,enrollmentType:t.enrollmentType||void 0,scannedStatus:t.scannedStatus||void 0}})),Jme=async(e,t,r={})=>Pe(ke.post(`/web/tickets/reshare/${e}/${t}`,{phone:r.phone,sendVia:r.sendVia||"both"})),efe=async(e,t="whatsapp")=>Pe(ke.post("/web/tickets/reshare/bulk",{tickets:e,sendVia:t})),tfe=async()=>Pe(ke.get("/web/events")),TD=[{value:"",label:"All Types"},{value:"ONLINE",label:"Online"},{value:"CASH",label:"Cash"}],OD=[{value:"",label:"All Status"},{value:"false",label:"Not Scanned"},{value:"true",label:"Scanned"}],DD=[{value:"both",label:"WhatsApp & Email"},{value:"whatsapp",label:"WhatsApp Only"},{value:"email",label:"Email Only"}],rfe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(""),[l,i]=w.useState(null),[u,g]=w.useState([]),[h,p]=w.useState(null),[y,v]=w.useState(!1),[C,T]=w.useState(!0),[D,P]=w.useState({currentPage:1,totalPages:1,totalCount:0,limit:20}),[k,R]=w.useState({search:"",enrollmentType:"",scannedStatus:""}),[B,M]=w.useState([]),[G,F]=w.useState(!1),[U,L]=w.useState({}),[V,j]=w.useState(!1);w.useEffect(()=>{Y()},[]),w.useEffect(()=>{r?H():(g([]),p(null),i(null))},[r,D.currentPage,k]),w.useEffect(()=>{M([]),F(!1)},[u]);const Y=async()=>{T(!0);try{const te=await tfe();if(te.success){const ge=te.data?.events||te.data||[];t(Array.isArray(ge)?ge:[])}else vt.error(te.message||"Failed to load events")}catch(te){console.error("Error fetching events:",te),vt.error("Failed to load events")}finally{T(!1)}},H=w.useCallback(async()=>{if(r){v(!0);try{const te=await Qme(r,{page:D.currentPage,limit:D.limit,search:k.search||void 0,enrollmentType:k.enrollmentType||void 0,scannedStatus:k.scannedStatus||void 0});te.success?(g(te.data.ticketHolders||[]),i(te.data.event||null),p(te.data.statistics||null),P(ge=>({...ge,...te.data.pagination}))):(vt.error(te.message||"Failed to load ticket holders"),g([]))}catch(te){console.error("Error fetching ticket holders:",te),vt.error("Failed to load ticket holders"),g([])}finally{v(!1)}}},[r,D.currentPage,D.limit,k]);return{events:e,selectedEventId:r,eventData:l,ticketHolders:u,statistics:h,pagination:D,filters:k,loading:y,eventsLoading:C,reshareLoading:U,bulkReshareLoading:V,selectedTickets:B,selectAll:G,isTicketSelected:te=>B.some(ge=>ge.enrollmentType===te.enrollmentType&&ge.enrollmentId===te.enrollmentId),handleEventChange:te=>{n(te),P(ge=>({...ge,currentPage:1})),R({search:"",enrollmentType:"",scannedStatus:""})},handleFilterChange:(te,ge)=>{R(oe=>({...oe,[te]:ge})),P(oe=>({...oe,currentPage:1}))},handleSearch:te=>{R(ge=>({...ge,search:te})),P(ge=>({...ge,currentPage:1}))},handlePageChange:te=>{P(ge=>({...ge,currentPage:te}))},handleTicketSelect:te=>{const ge=`${te.enrollmentType}-${te.enrollmentId}`;M(oe=>oe.find(ie=>`${ie.enrollmentType}-${ie.enrollmentId}`===ge)?oe.filter(ie=>`${ie.enrollmentType}-${ie.enrollmentId}`!==ge):[...oe,te])},handleSelectAll:()=>{M(G?[]:[...u]),F(!G)},handleReshareTicket:async(te,ge="both")=>{const oe=`${te.enrollmentType}-${te.enrollmentId}`;L(Ne=>({...Ne,[oe]:!0}));try{const Ne=await Jme(te.enrollmentType,te.enrollmentId,{phone:te.phone||te.user?.phone,sendVia:ge});Ne.success?(vt.success("Ticket reshared successfully!"),H()):vt.error(Ne.message||"Failed to reshare ticket")}catch(Ne){console.error("Error resharing ticket:",Ne),vt.error("Failed to reshare ticket")}finally{L(Ne=>({...Ne,[oe]:!1}))}},handleBulkReshare:async(te="whatsapp")=>{if(B.length===0){vt.warning("Please select tickets to reshare");return}if(B.length>50){vt.warning("Maximum 50 tickets can be reshared at once");return}j(!0);try{const ge=B.map(Ne=>({enrollmentType:Ne.enrollmentType,enrollmentId:Ne.enrollmentId,phone:Ne.phone||Ne.user?.phone})),oe=await efe(ge,te);if(oe.success){const{summary:Ne}=oe.data;Ne.failed>0?vt.warning(`Reshared ${Ne.success} tickets. ${Ne.failed} failed.`):vt.success(`Successfully reshared ${Ne.success} tickets!`),M([]),F(!1),H()}else vt.error(oe.message||"Bulk reshare failed")}catch(ge){console.error("Error in bulk reshare:",ge),vt.error("Bulk reshare failed")}finally{j(!1)}},refresh:()=>{r&&H()}}};function afe(){const{events:e,selectedEventId:t,ticketHolders:r,statistics:n,pagination:l,filters:i,loading:u,eventsLoading:g,reshareLoading:h,bulkReshareLoading:p,selectedTickets:y,selectAll:v,isTicketSelected:C,handleEventChange:T,handleFilterChange:D,handleSearch:P,handlePageChange:k,handleTicketSelect:R,handleSelectAll:B,handleReshareTicket:M,handleBulkReshare:G,refresh:F}=rfe(),[U,L]=w.useState(""),[V,j]=w.useState(!1),[Y,H]=w.useState("whatsapp"),[q,le]=w.useState(null),[ue,re]=w.useState("both");w.useEffect(()=>{const ee=setTimeout(()=>{U!==i.search&&P(U)},500);return()=>clearTimeout(ee)},[U]);const J=ee=>ee?new Date(ee).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",ae=ee=>!ee&&ee!==0?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(ee),pe=ee=>{le(ee),re("both")},xe=async()=>{q&&(await M(q,ue),le(null))};return a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 tracking-tight"},"Ticket Reshare"),a.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Regenerate and reshare ticket QR codes to users")),a.createElement("button",{onClick:F,disabled:u||!t,className:"flex items-center gap-1.5 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm text-sm"},a.createElement(tk,{className:`w-4 h-4 ${u?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline font-medium"},"Refresh"))),a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},a.createElement("label",{className:"block text-sm font-semibold text-gray-700 mb-2"},"Select Event"),a.createElement("select",{value:t,onChange:ee=>T(ee.target.value),disabled:g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},g?"Loading events...":"-- Select an Event --"),e.map(ee=>a.createElement("option",{key:ee._id,value:ee._id},ee.name," - ",J(ee.startDate))))),t&&a.createElement(a.Fragment,null,n&&a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3"},a.createElement(Mu,{label:"Total",value:n.total,color:"blue",icon:a.createElement(Vh,null)}),a.createElement(Mu,{label:"Online",value:n.online,color:"purple",icon:a.createElement(nA,null)}),a.createElement(Mu,{label:"Cash",value:n.cash,color:"green",icon:a.createElement(nA,null)}),a.createElement(Mu,{label:"Scanned",value:n.scanned,color:"emerald",icon:a.createElement(rd,null)}),a.createElement(Mu,{label:"Not Scanned",value:n.notScanned,color:"orange",icon:a.createElement(Km,null)}),a.createElement(Mu,{label:"Cancelled",value:n.cancelled,color:"red",icon:a.createElement(YV,null)})),a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},a.createElement("div",{className:"flex flex-col lg:flex-row gap-3"},a.createElement("div",{className:"flex-1 relative"},a.createElement(BV,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.createElement("input",{type:"text",placeholder:"Search by phone, name, or email...",value:U,onChange:ee=>L(ee.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})),a.createElement("button",{onClick:()=>j(!V),className:"lg:hidden flex items-center gap-2 px-4 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50"},a.createElement(HV,{className:"w-5 h-5"}),"Filters"),a.createElement("div",{className:"hidden lg:flex items-center gap-3"},a.createElement("select",{value:i.enrollmentType,onChange:ee=>D("enrollmentType",ee.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},TD.map(ee=>a.createElement("option",{key:ee.value,value:ee.value},ee.label))),a.createElement("select",{value:i.scannedStatus,onChange:ee=>D("scannedStatus",ee.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},OD.map(ee=>a.createElement("option",{key:ee.value,value:ee.value},ee.label))))),V&&a.createElement("div",{className:"lg:hidden mt-3 pt-3 border-t border-gray-200 grid grid-cols-2 gap-3"},a.createElement("select",{value:i.enrollmentType,onChange:ee=>D("enrollmentType",ee.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-sm"},TD.map(ee=>a.createElement("option",{key:ee.value,value:ee.value},ee.label))),a.createElement("select",{value:i.scannedStatus,onChange:ee=>D("scannedStatus",ee.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-sm"},OD.map(ee=>a.createElement("option",{key:ee.value,value:ee.value},ee.label))))),y.length>0&&a.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(ZY,{className:"text-blue-600 w-5 h-5"}),a.createElement("span",{className:"font-semibold text-blue-900"},y.length," ticket(s) selected")),a.createElement("div",{className:"flex items-center gap-2 w-full sm:w-auto"},a.createElement("select",{value:Y,onChange:ee=>H(ee.target.value),className:"flex-1 sm:flex-none px-3 py-2 border border-blue-300 rounded-lg bg-white text-sm focus:ring-2 focus:ring-blue-500"},DD.map(ee=>a.createElement("option",{key:ee.value,value:ee.value},ee.label))),a.createElement("button",{onClick:()=>G(Y),disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm font-medium"},p?a.createElement("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.createElement(Rh,{className:"w-4 h-4"}),"Reshare Selected"))),a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},a.createElement("div",{className:"hidden lg:block"},a.createElement("div",{className:"bg-gray-50 border-b border-gray-200 px-4 py-3"},a.createElement("div",{className:"flex items-center gap-4"},a.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:v,onChange:B,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.createElement("span",{className:"text-sm font-medium text-gray-700"},"Select All")),a.createElement("span",{className:"text-sm text-gray-500"},l.totalCount," ticket holder(s)")))),u&&a.createElement("div",{className:"p-8 text-center"},a.createElement("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),a.createElement("p",{className:"text-gray-600"},"Loading ticket holders...")),!u&&r.length===0&&a.createElement("div",{className:"p-12 text-center"},a.createElement(Km,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},"No Ticket Holders Found"),a.createElement("p",{className:"text-gray-600"},i.search||i.enrollmentType||i.scannedStatus?"Try adjusting your filters":"No tickets have been issued for this event yet")),!u&&r.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:"hidden lg:block overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"w-12 px-4 py-3"}),a.createElement("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700"},"User Details"),a.createElement("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700"},"Type"),a.createElement("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700"},"Tier / Price"),a.createElement("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700"},"Scan Status"),a.createElement("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700"},"Created"),a.createElement("th",{className:"text-right px-4 py-3 text-sm font-semibold text-gray-700"},"Action"))),a.createElement("tbody",{className:"divide-y divide-gray-100"},r.map(ee=>a.createElement(nfe,{key:`${ee.enrollmentType}-${ee.enrollmentId}`,ticket:ee,isSelected:C(ee),onSelect:()=>R(ee),onReshare:()=>pe(ee),isResharing:h[`${ee.enrollmentType}-${ee.enrollmentId}`],formatDate:J,formatCurrency:ae}))))),a.createElement("div",{className:"lg:hidden divide-y divide-gray-100"},a.createElement("div",{className:"px-4 py-3 bg-gray-50 flex items-center justify-between"},a.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:v,onChange:B,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.createElement("span",{className:"text-sm font-medium text-gray-700"},"Select All")),a.createElement("span",{className:"text-sm text-gray-500"},l.totalCount," total")),r.map(ee=>a.createElement(sfe,{key:`${ee.enrollmentType}-${ee.enrollmentId}`,ticket:ee,isSelected:C(ee),onSelect:()=>R(ee),onReshare:()=>pe(ee),isResharing:h[`${ee.enrollmentType}-${ee.enrollmentId}`],formatDate:J,formatCurrency:ae})))),!u&&l.totalPages>1&&a.createElement("div",{className:"border-t border-gray-200 px-4 py-3 flex flex-col sm:flex-row items-center justify-between gap-3"},a.createElement("p",{className:"text-sm text-gray-600"},"Page ",l.currentPage," of ",l.totalPages," (",l.totalCount," items)"),a.createElement("div",{className:"flex items-center gap-2"},a.createElement("button",{onClick:()=>k(l.currentPage-1),disabled:l.currentPage===1,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},"Previous"),a.createElement("div",{className:"hidden sm:flex items-center gap-1"},Array.from({length:Math.min(5,l.totalPages)},(ee,K)=>{let te;return l.totalPages<=5||l.currentPage<=3?te=K+1:l.currentPage>=l.totalPages-2?te=l.totalPages-4+K:te=l.currentPage-2+K,a.createElement("button",{key:te,onClick:()=>k(te),className:`w-8 h-8 text-sm rounded-lg ${l.currentPage===te?"bg-gray-900 text-white":"border border-gray-300 hover:bg-gray-50"}`},te)})),a.createElement("button",{onClick:()=>k(l.currentPage+1),disabled:l.currentPage===l.totalPages,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},"Next"))))),!t&&!g&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center"},a.createElement(Km,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),a.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-2"},"Select an Event"),a.createElement("p",{className:"text-gray-600"},"Choose an event from the dropdown above to view and manage ticket holders")),q&&a.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},a.createElement("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6"},a.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-2"},"Confirm Reshare"),a.createElement("p",{className:"text-gray-600 mb-4"},"This will reset the scan status and send a new QR code to:"),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3 mb-4"},a.createElement("p",{className:"font-semibold text-gray-900"},q.user?.name||q.name||"Unknown"),a.createElement("p",{className:"text-sm text-gray-600"},q.phone||q.user?.phone),q.user?.email&&a.createElement("p",{className:"text-sm text-gray-600"},q.user?.email)),a.createElement("div",{className:"mb-4"},a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Send via"),a.createElement("select",{value:ue,onChange:ee=>re(ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},DD.map(ee=>a.createElement("option",{key:ee.value,value:ee.value},ee.label)))),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("button",{onClick:()=>le(null),className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium"},"Cancel"),a.createElement("button",{onClick:xe,disabled:h[`${q.enrollmentType}-${q.enrollmentId}`],className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50"},h[`${q.enrollmentType}-${q.enrollmentId}`]?a.createElement("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.createElement(Rh,{className:"w-4 h-4"}),"Reshare")))))}function Mu({label:e,value:t,color:r,icon:n}){const l={blue:"bg-blue-50 text-blue-600 border-blue-200",purple:"bg-purple-50 text-purple-600 border-purple-200",green:"bg-green-50 text-green-600 border-green-200",emerald:"bg-emerald-50 text-emerald-600 border-emerald-200",orange:"bg-orange-50 text-orange-600 border-orange-200",red:"bg-red-50 text-red-600 border-red-200"};return a.createElement("div",{className:`rounded-lg border p-3 ${l[r]||l.blue}`},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement("span",{className:"w-4 h-4"},n),a.createElement("span",{className:"text-xs font-medium opacity-80"},e)),a.createElement("p",{className:"text-xl font-bold"},t||0))}function nfe({ticket:e,isSelected:t,onSelect:r,onReshare:n,isResharing:l,formatDate:i,formatCurrency:u}){const g=e.user?.name||e.name||"Unknown",h=e.phone||e.user?.phone||"N/A",p=e.user?.email||"N/A",y=e.enrollmentType==="ONLINE"?e.ticketPrice:e.priceCharged;return a.createElement("tr",{className:"hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-4 py-3"},a.createElement("input",{type:"checkbox",checked:t,onChange:r,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})),a.createElement("td",{className:"px-4 py-3"},a.createElement("div",null,a.createElement("p",{className:"font-semibold text-gray-900"},g),a.createElement("div",{className:"flex items-center gap-3 text-sm text-gray-600"},a.createElement("span",{className:"flex items-center gap-1"},a.createElement(VV,{className:"w-3.5 h-3.5"}),h),p!=="N/A"&&a.createElement("span",{className:"flex items-center gap-1 truncate max-w-[200px]"},a.createElement(jV,{className:"w-3.5 h-3.5"}),p)))),a.createElement("td",{className:"px-4 py-3"},a.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.enrollmentType==="ONLINE"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`},e.enrollmentType)),a.createElement("td",{className:"px-4 py-3"},a.createElement("div",null,e.tierName&&a.createElement("p",{className:"text-sm font-medium text-gray-900"},e.tierName),a.createElement("p",{className:"text-sm text-gray-600"},u(y)))),a.createElement("td",{className:"px-4 py-3 text-center"},e.isTicketScanned?a.createElement("div",{className:"inline-flex flex-col items-center"},a.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},a.createElement(rd,{className:"w-3.5 h-3.5"}),"Scanned"),e.ticketScannedAt&&a.createElement("span",{className:"text-xs text-gray-500 mt-1"},i(e.ticketScannedAt))):a.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800"},a.createElement(Km,{className:"w-3.5 h-3.5"}),"Not Scanned")),a.createElement("td",{className:"px-4 py-3"},a.createElement("span",{className:"text-sm text-gray-600"},i(e.createdAt))),a.createElement("td",{className:"px-4 py-3 text-right"},a.createElement("button",{onClick:n,disabled:l||e.status==="CANCELLED",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},l?a.createElement("div",{className:"w-3.5 h-3.5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.createElement(Rh,{className:"w-3.5 h-3.5"}),"Reshare")))}function sfe({ticket:e,isSelected:t,onSelect:r,onReshare:n,isResharing:l,formatDate:i,formatCurrency:u}){const g=e.user?.name||e.name||"Unknown",h=e.phone||e.user?.phone||"N/A";e.user?.email;const p=e.enrollmentType==="ONLINE"?e.ticketPrice:e.priceCharged;return a.createElement("div",{className:"p-4 hover:bg-gray-50 transition-colors"},a.createElement("div",{className:"flex items-start gap-3"},a.createElement("input",{type:"checkbox",checked:t,onChange:r,className:"w-4 h-4 mt-1 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("div",{className:"flex items-start justify-between gap-2 mb-2"},a.createElement("div",null,a.createElement("p",{className:"font-semibold text-gray-900"},g),a.createElement("p",{className:"text-sm text-gray-600"},h)),a.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium shrink-0 ${e.enrollmentType==="ONLINE"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`},e.enrollmentType)),a.createElement("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3"},a.createElement("div",null,a.createElement("p",{className:"text-gray-500 text-xs"},"Price"),a.createElement("p",{className:"font-medium text-gray-900"},u(p))),e.tierName&&a.createElement("div",null,a.createElement("p",{className:"text-gray-500 text-xs"},"Tier"),a.createElement("p",{className:"font-medium text-gray-900"},e.tierName))),a.createElement("div",{className:"flex items-center justify-between"},e.isTicketScanned?a.createElement("div",null,a.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},a.createElement(rd,{className:"w-3.5 h-3.5"}),"Scanned"),e.ticketScannedAt&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},i(e.ticketScannedAt))):a.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800"},a.createElement(Km,{className:"w-3.5 h-3.5"}),"Not Scanned"),a.createElement("button",{onClick:n,disabled:l||e.status==="CANCELLED",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},l?a.createElement("div",{className:"w-3.5 h-3.5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.createElement(Rh,{className:"w-3.5 h-3.5"}),"Reshare")))))}const Bn={PLANS:"/web/membership-plans",USER_MEMBERSHIPS:"/web/user-memberships"},Dl={createPlan:async e=>(console.log("[MembershipService] Creating membership plan"),Pe(ke.post(Bn.PLANS,e))),getPlans:async(e={})=>(console.log("[MembershipService] Fetching membership plans with params:",e),Pe(ke.get(Bn.PLANS,{params:e}))),getPlanById:async e=>(console.log("[MembershipService] Fetching membership plan:",e),Pe(ke.get(`${Bn.PLANS}/${e}`))),updatePlan:async(e,t)=>(console.log("[MembershipService] Updating membership plan:",e),Pe(ke.put(`${Bn.PLANS}/${e}`,t))),deletePlan:async e=>(console.log("[MembershipService] Deleting membership plan:",e),Pe(ke.delete(`${Bn.PLANS}/${e}`))),restorePlan:async e=>(console.log("[MembershipService] Restoring membership plan:",e),Pe(ke.post(`${Bn.PLANS}/${e}/restore`))),createUserMembership:async e=>(console.log("[MembershipService] Creating user membership for phone:",e?.phone),Pe(ke.post(Bn.USER_MEMBERSHIPS,e))),getUserMemberships:async(e={})=>(console.log("[MembershipService] Fetching user memberships with params:",e),Pe(ke.get(Bn.USER_MEMBERSHIPS,{params:e}))),checkMembershipStatus:async e=>(console.log("[MembershipService] Checking membership status for phone:",e),Pe(ke.post(`${Bn.USER_MEMBERSHIPS}/check-status`,{phone:e}))),getUserMembershipById:async e=>(console.log("[MembershipService] Fetching user membership:",e),Pe(ke.get(`${Bn.USER_MEMBERSHIPS}/${e}`))),extendUserMembership:async(e,t)=>(console.log("[MembershipService] Extending membership:",e,"by",t,"days"),Pe(ke.post(`${Bn.USER_MEMBERSHIPS}/${e}/extend`,{additionalDays:t}))),cancelUserMembership:async(e,t)=>(console.log("[MembershipService] Cancelling membership:",e),Pe(ke.post(`${Bn.USER_MEMBERSHIPS}/${e}/cancel`,{reason:t}))),updateAdminNotes:async(e,t)=>(console.log("[MembershipService] Updating admin notes for membership:",e),Pe(ke.patch(`${Bn.USER_MEMBERSHIPS}/${e}/notes`,{adminNotes:t}))),deleteUserMembership:async e=>(console.log("[MembershipService] Deleting user membership:",e),Pe(ke.delete(`${Bn.USER_MEMBERSHIPS}/${e}`)))},_D={name:"",description:"",price:"",compareAtPrice:"",durationInDays:"",perks:[],perkInput:"",displayOrder:"",isFeatured:!1,isActive:!0,maxPurchases:""},lfe={currentPage:1,totalPages:0,totalCount:0,limit:9},ife={currentPage:1,totalPages:0,totalCount:0,limit:10};function ofe(){const{hasRole:e}=hn(),t=e(["SUPER_ADMIN","ADMIN"]),[r,n]=w.useState("memberships"),[l,i]=w.useState([]),[u,g]=w.useState(_D),[h,p]=w.useState({search:"",status:"all",featured:"all"}),[y,v]=w.useState(lfe),[C,T]=w.useState(!1),[D,P]=w.useState(!1),[k,R]=w.useState(null),[B,M]=w.useState(null),[G,F]=w.useState(!1),[U,L]=w.useState(null),[V,j]=w.useState([]),[Y,H]=w.useState([]),[q,le]=w.useState({phone:"",membershipPlanId:"",amountPaid:"",adminNotes:""}),[ue,re]=w.useState({phone:"",status:"all",paymentStatus:"all",purchaseMethod:"all"}),[J,ae]=w.useState(ife),[pe,xe]=w.useState(!1),[ee,K]=w.useState(null),[te,ge]=w.useState(!1),[oe,Ne]=w.useState(null),[ie,me]=w.useState(!1),[$e,ve]=w.useState(null),[We,nt]=w.useState(""),[Be,Ee]=w.useState(""),[je,ce]=w.useState(""),[qe,Se]=w.useState(!1),[rt,it]=w.useState(!1),[pt,Ke]=w.useState(!1),[lt,Ue]=w.useState(!1),[mt,$t]=w.useState(null),ir=w.useMemo(()=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}),[]),Br=async(we=1)=>{T(!0),R(null);const Ge={page:we,limit:y.limit,sortBy:"displayOrder",sortOrder:"asc"};h.search.trim()&&(Ge.search=h.search.trim()),h.status!=="all"&&(Ge.isActive=h.status==="active"),h.featured!=="all"&&(Ge.isFeatured=h.featured==="featured");const xt=await Dl.getPlans(Ge);xt.success?(i(xt.data?.plans||[]),j(xt.data?.plans||V),v({currentPage:xt.data?.pagination?.currentPage||we,totalPages:xt.data?.pagination?.totalPages||0,totalCount:xt.data?.pagination?.totalCount||0,limit:xt.data?.pagination?.limit||y.limit})):R(xt.message||"Failed to load plans"),T(!1)},ut=async(we=1)=>{xe(!0),K(null);const Ge={page:we,limit:J.limit,sortBy:"createdAt",sortOrder:"desc"};ue.phone.trim()&&(Ge.phone=ue.phone.trim()),ue.status!=="all"&&(Ge.status=ue.status),ue.paymentStatus!=="all"&&(Ge.paymentStatus=ue.paymentStatus),ue.purchaseMethod!=="all"&&(Ge.purchaseMethod=ue.purchaseMethod);const xt=await Dl.getUserMemberships(Ge);xt.success?(H(xt.data?.memberships||[]),ae({currentPage:xt.data?.pagination?.currentPage||we,totalPages:xt.data?.pagination?.totalPages||0,totalCount:xt.data?.pagination?.totalCount||0,limit:xt.data?.pagination?.limit||J.limit})):K(xt.message||"Failed to load memberships"),xe(!1)};w.useEffect(()=>{Br(1),ut(1)},[]);const Tt=()=>g(_D),Cr=we=>({name:we.name.trim(),description:we.description.trim(),price:we.price?Number(we.price):0,compareAtPrice:we.compareAtPrice?Number(we.compareAtPrice):void 0,durationInDays:we.durationInDays?Number(we.durationInDays):0,perks:we.perks,displayOrder:we.displayOrder?Number(we.displayOrder):void 0,isFeatured:we.isFeatured,isActive:we.isActive,maxPurchases:we.maxPurchases?Number(we.maxPurchases):void 0}),xr=()=>{const we=u.perkInput.trim();!we||u.perks.includes(we)||g(Ge=>({...Ge,perks:[...Ge.perks,we],perkInput:""}))},ia=we=>{g(Ge=>({...Ge,perks:Ge.perks.filter(xt=>xt!==we)}))},kt=async we=>{if(we.preventDefault(),!B)return;P(!0),R(null);const Ge=await Dl.updatePlan(B._id,Cr(u));Ge.success?(F(!1),M(null),Tt(),Br(y.currentPage)):R(Ge.message||"Failed to update plan"),P(!1)},be=async()=>{U&&(Se(!0),await Dl.deletePlan(U),Se(!1),L(null),Br(y.currentPage))},Je=async we=>{if(we.preventDefault(),!t)return;ge(!0),K(null);const Ge={phone:q.phone.trim(),membershipPlanId:q.membershipPlanId,amountPaid:q.amountPaid?Number(q.amountPaid):void 0,adminNotes:q.adminNotes.trim()||void 0},xt=await Dl.createUserMembership(Ge);xt.success?(le({phone:"",membershipPlanId:"",amountPaid:"",adminNotes:""}),ut(1)):K(xt.message||"Failed to create membership"),ge(!1)},st=async()=>{if(!ue.phone.trim()){Ne(null);return}me(!0);const we=await Dl.checkMembershipStatus(ue.phone.trim());Ne(we.success?we.data:{hasActiveMembership:!1,error:we.message}),me(!1)},At=async we=>{we.preventDefault(),!(!$e||!We)&&(Se(!0),await Dl.extendUserMembership($e._id,Number(We)),Se(!1),it(!1),nt(""),ve(null),ut(J.currentPage))},dr=async we=>{we.preventDefault(),!(!$e||!Be.trim())&&(Se(!0),await Dl.cancelUserMembership($e._id,Be.trim()),Se(!1),Ke(!1),Ee(""),ve(null),ut(J.currentPage))},qa=async we=>{we.preventDefault(),$e&&(Se(!0),await Dl.updateAdminNotes($e._id,je.trim()),Se(!1),Ue(!1),ce(""),ve(null),ut(J.currentPage))},aa=async()=>{mt&&(Se(!0),await Dl.deleteUserMembership(mt),Se(!1),$t(null),ut(J.currentPage))};return a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Memberships"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Create plans and manage member subscriptions.")),a.createElement("button",{onClick:()=>{Br(y.currentPage),ut(J.currentPage)},className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"},a.createElement($n,{className:"h-4 w-4"}),"Refresh")),a.createElement("div",{className:"space-y-6",id:"memberships-tab-content"},a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4"},a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-3"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(vi,{className:"h-5 w-5 text-gray-800"}),a.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Check membership status")),a.createElement("div",{className:"flex flex-col sm:flex-row gap-3"},a.createElement("input",{type:"text",value:ue.phone,onChange:we=>re({...ue,phone:we.target.value}),placeholder:"Phone number",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),a.createElement("button",{onClick:st,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800"},ie?a.createElement(ct,{className:"h-4 w-4 animate-spin"}):a.createElement(ta,{className:"h-4 w-4"}),"Check")),oe&&a.createElement("div",{className:"p-3 rounded-lg border border-gray-200 bg-gray-50 space-y-1"},a.createElement("div",{className:"flex items-center gap-2 font-semibold text-gray-900"},oe.hasActiveMembership?a.createElement(rf,{className:"h-4 w-4 text-green-600"}):a.createElement(Sn,{className:"h-4 w-4 text-red-600"}),oe.hasActiveMembership?"Active membership found":"No active membership"),oe.membership&&a.createElement("div",{className:"text-sm text-gray-600 space-y-1"},a.createElement("p",null,"Plan: ",oe.membership.membershipPlanId?.name),a.createElement("p",null,"Valid till:"," ",oe.membership.endDate?new Date(oe.membership.endDate).toLocaleDateString():"-"),a.createElement("p",null,"Days remaining: ",oe.membership.daysRemaining??"-")),oe.error&&a.createElement("p",{className:"text-sm text-red-600"},oe.error))),a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-3"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(W_,{className:"h-5 w-5 text-gray-800"}),a.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Create membership manually")),ee&&a.createElement("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Sn,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},ee)),a.createElement("form",{onSubmit:Je,className:"space-y-3"},a.createElement("input",{type:"text",value:q.phone,onChange:we=>le({...q,phone:we.target.value}),required:!0,placeholder:"Phone number",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),a.createElement("select",{value:q.membershipPlanId,onChange:we=>le({...q,membershipPlanId:we.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"Select plan"),V.map(we=>a.createElement("option",{key:we._id,value:we._id},we.name," - ",ir.format(we.price||0)))),a.createElement("input",{type:"number",min:"0",value:q.amountPaid,onChange:we=>le({...q,amountPaid:we.target.value}),placeholder:"Amount paid (optional)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),a.createElement("textarea",{rows:3,value:q.adminNotes,onChange:we=>le({...q,adminNotes:we.target.value}),placeholder:"Admin notes",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),a.createElement("div",{className:"flex justify-end"},a.createElement("button",{type:"submit",disabled:te,className:"inline-flex items-center gap-2 px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60"},te?a.createElement(ct,{className:"h-4 w-4 animate-spin"}):a.createElement(kr,{className:"h-4 w-4"}),"Create membership"))))),a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200"},a.createElement("div",{className:"p-4 flex flex-col lg:flex-row gap-3 lg:items-center lg:justify-between"},a.createElement("div",{className:"flex-1 relative"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",value:ue.phone,onChange:we=>re({...ue,phone:we.target.value}),onKeyDown:we=>we.key==="Enter"&&ut(1),placeholder:"Search by phone",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),a.createElement("div",{className:"flex gap-2"},a.createElement("select",{value:ue.status,onChange:we=>re({...ue,status:we.target.value}),onBlur:()=>ut(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none"},a.createElement("option",{value:"all"},"All status"),a.createElement("option",{value:"ACTIVE"},"Active"),a.createElement("option",{value:"CANCELLED"},"Cancelled"),a.createElement("option",{value:"EXPIRED"},"Expired")),a.createElement("select",{value:ue.paymentStatus,onChange:we=>re({...ue,paymentStatus:we.target.value}),onBlur:()=>ut(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none"},a.createElement("option",{value:"all"},"All payments"),a.createElement("option",{value:"SUCCESS"},"Success"),a.createElement("option",{value:"PENDING"},"Pending"),a.createElement("option",{value:"FAILED"},"Failed")),a.createElement("select",{value:ue.purchaseMethod,onChange:we=>re({...ue,purchaseMethod:we.target.value}),onBlur:()=>ut(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none"},a.createElement("option",{value:"all"},"All methods"),a.createElement("option",{value:"ADMIN"},"Admin"),a.createElement("option",{value:"IN_APP"},"In app"),a.createElement("option",{value:"WEBSITE"},"Website")),a.createElement("button",{onClick:()=>{re({phone:"",status:"all",paymentStatus:"all",purchaseMethod:"all"}),ut(1)},className:"px-3 py-2 text-sm text-gray-600 bg-gray-100 border border-gray-200 rounded-lg hover:bg-gray-200"},"Reset"),a.createElement("button",{onClick:()=>ut(1),className:"px-3 py-2 text-sm text-white bg-gray-900 rounded-lg hover:bg-gray-800 flex items-center gap-2"},a.createElement(ta,{className:"h-4 w-4"}),"Apply"))),pe?a.createElement("div",{className:"p-6 flex items-center justify-center gap-2 text-gray-600"},a.createElement(ct,{className:"h-5 w-5 animate-spin"}),"Loading memberships..."):Y.length===0?a.createElement("div",{className:"p-6 text-center text-gray-500"},"No memberships found."):a.createElement("div",{className:"divide-y divide-gray-200"},Y.map(we=>a.createElement("div",{key:we._id,className:"p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3"},a.createElement("div",{className:"space-y-1"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("h3",{className:"text-base font-semibold text-gray-900"},we.membershipPlanId?.name||"Membership"),we.isCurrentlyActive&&a.createElement("span",{className:"px-2 py-0.5 text-xs rounded-full bg-emerald-100 text-emerald-700"},"Active now")),a.createElement("p",{className:"text-sm text-gray-600"},we.phone),a.createElement("p",{className:"text-sm text-gray-600 flex items-center gap-2"},a.createElement(K3,{className:"h-4 w-4 text-gray-500"}),we.startDate?new Date(we.startDate).toLocaleDateString():"-"," -"," ",we.endDate?new Date(we.endDate).toLocaleDateString():"-"),a.createElement("p",{className:"text-sm text-gray-600 flex items-center gap-2"},a.createElement(V2,{className:"h-4 w-4 text-gray-500"}),ir.format(we.amountPaid||we.membershipPlanId?.price||0)),a.createElement("p",{className:"text-sm text-gray-600 flex items-center gap-2"},a.createElement(Ju,{className:"h-4 w-4 text-gray-500"}),we.adminNotes||"No notes"),a.createElement("div",{className:"flex flex-wrap gap-2 pt-1"},a.createElement("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${we.status==="ACTIVE"?"bg-green-100 text-green-700":we.status==="CANCELLED"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`},we.status),a.createElement("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${we.paymentStatus==="SUCCESS"?"bg-emerald-100 text-emerald-700":we.paymentStatus==="FAILED"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`},we.paymentStatus),a.createElement("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-blue-100 text-blue-700"},we.purchaseMethod||"IN_APP"))),a.createElement("div",{className:"flex flex-wrap items-center gap-2"},a.createElement("button",{onClick:()=>{ve(we),nt(""),it(!0)},className:"px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"},"Extend"),a.createElement("button",{onClick:()=>{ve(we),Ee(""),Ke(!0)},className:"px-3 py-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100"},"Cancel"),a.createElement("button",{onClick:()=>{ve(we),ce(we.adminNotes||""),Ue(!0)},className:"px-3 py-2 text-sm text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50"},"Notes"),a.createElement("button",{onClick:()=>$t(we._id),className:"px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"},"Delete"))))),J.totalPages>1&&a.createElement(Rr,{currentPage:J.currentPage,totalPages:J.totalPages,totalItems:J.totalCount,itemsPerPage:J.limit,onPageChange:we=>ut(we),itemLabel:"memberships"}))),a.createElement(jt,{isOpen:G,onClose:()=>{F(!1),M(null),Tt()},title:"Edit membership plan",size:"lg"},a.createElement("form",{onSubmit:kt,className:"space-y-3"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},a.createElement("input",{type:"text",value:u.name,onChange:we=>g({...u,name:we.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Plan name"}),a.createElement("input",{type:"number",min:"1",value:u.durationInDays,onChange:we=>g({...u,durationInDays:we.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Duration in days"}),a.createElement("input",{type:"number",min:"0",value:u.price,onChange:we=>g({...u,price:we.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Price"}),a.createElement("input",{type:"number",min:"0",value:u.compareAtPrice,onChange:we=>g({...u,compareAtPrice:we.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Compare at price"}),a.createElement("input",{type:"number",min:"1",value:u.displayOrder,onChange:we=>g({...u,displayOrder:we.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Display order"}),a.createElement("input",{type:"number",min:"0",value:u.maxPurchases,onChange:we=>g({...u,maxPurchases:we.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Max purchases"})),a.createElement("textarea",{rows:3,value:u.description,onChange:we=>g({...u,description:we.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Description"}),a.createElement("div",{className:"flex items-center gap-4"},a.createElement("label",{className:"flex items-center gap-2 text-sm text-gray-700"},a.createElement("input",{type:"checkbox",checked:u.isActive,onChange:we=>g({...u,isActive:we.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),"Active"),a.createElement("label",{className:"flex items-center gap-2 text-sm text-gray-700"},a.createElement("input",{type:"checkbox",checked:u.isFeatured,onChange:we=>g({...u,isFeatured:we.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),"Featured")),a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"flex flex-col sm:flex-row gap-3"},a.createElement("input",{type:"text",value:u.perkInput,onChange:we=>g({...u,perkInput:we.target.value}),onKeyDown:we=>{we.key==="Enter"&&(we.preventDefault(),xr())},placeholder:"Add perk",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),a.createElement("button",{type:"button",onClick:xr,className:"inline-flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800"},a.createElement(kr,{className:"h-4 w-4"}),"Add perk")),u.perks.length>0&&a.createElement("div",{className:"flex flex-wrap gap-2"},u.perks.map(we=>a.createElement("span",{key:we,className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gray-100 text-gray-800 text-sm"},we,a.createElement("button",{type:"button",onClick:()=>ia(we),className:"text-gray-500 hover:text-gray-700"},"x"))))),a.createElement("div",{className:"flex items-center justify-end gap-2"},a.createElement("button",{type:"button",onClick:()=>{F(!1),M(null),Tt()},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"},"Close"),a.createElement("button",{type:"submit",disabled:D,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60"},D?a.createElement(ct,{className:"h-4 w-4 animate-spin"}):a.createElement(rf,{className:"h-4 w-4"}),"Save changes")))),a.createElement(jt,{isOpen:rt,onClose:()=>{it(!1),ve(null),nt("")},title:"Extend membership"},a.createElement("form",{onSubmit:At,className:"space-y-3"},a.createElement("p",{className:"text-sm text-gray-600"},"Extend ",$e?.membershipPlanId?.name," for ",$e?.phone),a.createElement("input",{type:"number",min:"1",value:We,onChange:we=>nt(we.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Additional days"}),a.createElement("div",{className:"flex items-center justify-end gap-2"},a.createElement("button",{type:"button",onClick:()=>{it(!1),ve(null),nt("")},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"},"Close"),a.createElement("button",{type:"submit",disabled:qe,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60"},qe?a.createElement(ct,{className:"h-4 w-4 animate-spin"}):a.createElement(K3,{className:"h-4 w-4"}),"Extend")))),a.createElement(jt,{isOpen:pt,onClose:()=>{Ke(!1),ve(null),Ee("")},title:"Cancel membership"},a.createElement("form",{onSubmit:dr,className:"space-y-3"},a.createElement("textarea",{rows:3,value:Be,onChange:we=>Ee(we.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Cancellation reason"}),a.createElement("div",{className:"flex items-center justify-end gap-2"},a.createElement("button",{type:"button",onClick:()=>{Ke(!1),ve(null),Ee("")},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"},"Close"),a.createElement("button",{type:"submit",disabled:qe,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-60"},qe?a.createElement(ct,{className:"h-4 w-4 animate-spin"}):a.createElement(Sn,{className:"h-4 w-4"}),"Cancel membership")))),a.createElement(jt,{isOpen:lt,onClose:()=>{Ue(!1),ve(null),ce("")},title:"Update admin notes",size:"lg"},a.createElement("form",{onSubmit:qa,className:"space-y-3"},a.createElement("textarea",{rows:4,value:je,onChange:we=>ce(we.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Add admin notes"}),a.createElement("div",{className:"flex items-center justify-end gap-2"},a.createElement("button",{type:"button",onClick:()=>{Ue(!1),ve(null),ce("")},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"},"Close"),a.createElement("button",{type:"submit",disabled:qe,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60"},qe?a.createElement(ct,{className:"h-4 w-4 animate-spin"}):a.createElement(Ju,{className:"h-4 w-4"}),"Save notes")))),a.createElement(za,{isOpen:!!U,onClose:()=>L(null),onConfirm:be,title:"Delete membership plan",message:"Users will not be able to purchase this plan after deletion.",confirmText:"Delete plan",variant:"danger",isLoading:qe}),a.createElement(za,{isOpen:!!mt,onClose:()=>$t(null),onConfirm:aa,title:"Delete membership",message:"This will remove the membership record. This action cannot be undone.",confirmText:"Delete membership",variant:"danger",isLoading:qe}))}const pc={CLUBS:"/web/clubs",CONNECT_CLUBS:"/app/connect/clubs"},yc={createClub:async e=>(console.log("[ClubsService] Creating club"),Pe(ke.post(pc.CLUBS,e))),getClubs:async(e={})=>(console.log("[ClubsService] Fetching clubs with params:",e),Pe(ke.get(pc.CLUBS,{params:e}))),getClubById:async e=>(console.log("[ClubsService] Fetching club:",e),Pe(ke.get(`${pc.CLUBS}/${e}`))),updateClub:async(e,t)=>(console.log("[ClubsService] Updating club:",e),Pe(ke.put(`${pc.CLUBS}/${e}`,t))),deleteClub:async e=>(console.log("[ClubsService] Deleting club:",e),Pe(ke.delete(`${pc.CLUBS}/${e}`))),getClubStats:async e=>(console.log("[ClubsService] Fetching club stats:",e),Pe(ke.get(`${pc.CLUBS}/${e}/stats`))),getClubMembers:async(e,t={})=>(console.log("[ClubsService] Fetching club members:",e),Pe(ke.get(`${pc.CONNECT_CLUBS}/${e}/members`,{params:t})))},kD={name:"",description:"",thumbnail:""},PD={currentPage:1,totalPages:0,totalCount:0,limit:10};function cfe(){const{hasRole:e}=hn(),t=e(["SUPER_ADMIN","ADMIN"]),[r,n]=w.useState("clubs"),[l,i]=w.useState([]),[u,g]=w.useState(kD),[h,p]=w.useState({search:""}),[y,v]=w.useState({...PD,limit:12}),[C,T]=w.useState(!1),[D,P]=w.useState(!1),[k,R]=w.useState(null),[B,M]=w.useState(null),[G,F]=w.useState(!1),[U,L]=w.useState(null),[V,j]=w.useState(null),[Y,H]=w.useState(!1),[q,le]=w.useState(!1),[ue,re]=w.useState(null),[J,ae]=w.useState([]),[pe,xe]=w.useState(PD),[ee,K]=w.useState(!1),[te,ge]=w.useState(null),oe=async(ce=1)=>{T(!0),R(null);const qe={page:ce,limit:y.limit,sortBy:"createdAt",sortOrder:"desc"};h.search.trim()&&(qe.search=h.search.trim());const Se=await yc.getClubs(qe);if(Se.success){const rt=Se.data?.clubs||[],it=await Promise.all(rt.map(async pt=>{try{const Ke=await yc.getClubStats(pt._id);if(console.log("[Clubs] Stats result for",pt.name,":",Ke),Ke.success&&Ke.data){const lt=Ke.data.stats||Ke.data;return console.log("[Clubs] Extracted stats:",lt),{...pt,memberCount:lt.totalMembers??pt.memberCount,postCount:lt.totalPosts??pt.postCount}}}catch(Ke){console.error("[Clubs] Stats fetch error for",pt.name,":",Ke)}return pt}));i(it),v({currentPage:Se.data?.pagination?.currentPage||ce,totalPages:Se.data?.pagination?.totalPages||0,totalCount:Se.data?.pagination?.totalCount||0,limit:Se.data?.pagination?.limit||y.limit})}else R(Se.message||"Failed to load clubs");T(!1)},Ne=async(ce=1)=>{if(!ue)return;K(!0),ge(null);const qe={page:ce,limit:pe.limit},Se=await yc.getClubMembers(ue._id,qe);Se.success?(ae(Se.data?.members||[]),xe({currentPage:Se.data?.pagination?.currentPage||ce,totalPages:Se.data?.pagination?.totalPages||0,totalCount:Se.data?.pagination?.totalCount||0,limit:Se.data?.pagination?.limit||pe.limit})):ge(Se.message||"Failed to load members"),K(!1)};w.useEffect(()=>{oe(1)},[]),w.useEffect(()=>{r==="members"&&ue&&Ne(1)},[r,ue]);const ie=()=>g(kD),me=async ce=>{if(ce.preventDefault(),!t)return;P(!0),R(null);const qe={name:u.name.trim(),description:u.description.trim(),thumbnail:u.thumbnail.trim()||void 0},Se=await yc.createClub(qe);Se.success?(ie(),oe(1)):R(Se.message||"Failed to create club"),P(!1)},$e=ce=>{M(ce),g({name:ce.name||"",description:ce.description||"",thumbnail:ce.thumbnail||""}),F(!0)},ve=async ce=>{if(ce.preventDefault(),!B)return;P(!0),R(null);const qe={name:u.name.trim(),description:u.description.trim(),thumbnail:u.thumbnail.trim()||void 0},Se=await yc.updateClub(B._id,qe);Se.success?(F(!1),M(null),ie(),oe(y.currentPage)):R(Se.message||"Failed to update club"),P(!1)},We=async()=>{U&&(le(!0),await yc.deleteClub(U),le(!1),L(null),oe(y.currentPage))},nt=async ce=>{le(!0);const qe=await yc.getClubStats(ce._id);qe.success&&(j(qe.data?.stats||null),H(!0)),le(!1)},Be=ce=>{re(ce),n("members")},Ee=()=>{re(null),n("clubs"),ae([])},je=ce=>ce?new Date(ce).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-";return a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,ue?a.createElement("div",{className:"flex items-center gap-3"},a.createElement("button",{onClick:Ee,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors"},a.createElement(aj,{className:"h-5 w-5 text-gray-600"})),a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},ue.name),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},ue.memberCount||0," members - ",ue.postCount||0," posts"))):a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Clubs & Connect"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Manage clubs and members."))),a.createElement("button",{onClick:()=>{r==="clubs"?oe(y.currentPage):r==="members"&&Ne(pe.currentPage)},className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"},a.createElement($n,{className:"h-4 w-4"}),"Refresh")),a.createElement("div",{className:"bg-white border border-gray-200 rounded-xl p-2 shadow-sm flex gap-2"},a.createElement("button",{onClick:()=>{ue?Ee():n("clubs")},className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold ${r==="clubs"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`},"Clubs"),a.createElement("button",{onClick:()=>n("members"),disabled:!ue,className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold ${r==="members"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"} ${ue?"":"opacity-50 cursor-not-allowed"}`},"Members")),r==="clubs"&&a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",null,a.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Create new club"),a.createElement("p",{className:"text-sm text-gray-500"},"Add a new community for users to join.")),k&&a.createElement("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Sn,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},k))),a.createElement("form",{onSubmit:me,className:"mt-5 space-y-4"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement("input",{type:"text",value:u.name,onChange:ce=>g({...u,name:ce.target.value}),required:!0,placeholder:"Club name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),a.createElement("textarea",{value:u.description,onChange:ce=>g({...u,description:ce.target.value}),rows:2,placeholder:"Description",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),a.createElement(il,{label:"Club Thumbnail",value:u.thumbnail,onUpload:ce=>g({...u,thumbnail:ce}),folder:"clubs",type:"image",placeholder:"Drop club thumbnail here or click to upload",disabled:D}),a.createElement("div",{className:"flex justify-end"},a.createElement("button",{type:"submit",disabled:D,className:"inline-flex items-center gap-2 px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60"},D?a.createElement(ct,{className:"h-4 w-4 animate-spin"}):a.createElement(kr,{className:"h-4 w-4"}),"Create club")))),a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200"},a.createElement("div",{className:"p-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3"},a.createElement("div",{className:"flex-1 relative"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",value:h.search,onChange:ce=>p({...h,search:ce.target.value}),onKeyDown:ce=>ce.key==="Enter"&&oe(1),onBlur:()=>oe(1),placeholder:"Search clubs",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),a.createElement("button",{onClick:()=>{p({search:""}),oe(1)},className:"px-3 py-2 text-sm text-gray-600 bg-gray-100 border border-gray-200 rounded-lg hover:bg-gray-200"},"Reset")),C?a.createElement("div",{className:"p-6 flex items-center justify-center gap-2 text-gray-600"},a.createElement(ct,{className:"h-5 w-5 animate-spin"}),"Loading clubs..."):l.length===0?a.createElement("div",{className:"p-6 text-center text-gray-500"},"No clubs found."):a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 p-4"},l.map(ce=>a.createElement("div",{key:ce._id,className:"border border-gray-200 rounded-xl overflow-hidden hover:shadow-md transition"},a.createElement("div",{className:"h-32 bg-gradient-to-br from-gray-100 to-gray-200 relative"},ce.thumbnail?a.createElement("img",{src:ce.thumbnail,alt:ce.name,className:"w-full h-full object-cover"}):a.createElement("div",{className:"w-full h-full flex items-center justify-center"},a.createElement(kl,{className:"h-12 w-12 text-gray-400"})),ce.isDeleted&&a.createElement("span",{className:"absolute top-2 right-2 px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-700"},"Deleted")),a.createElement("div",{className:"p-4 space-y-3"},a.createElement("div",null,a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},ce.name),a.createElement("p",{className:"text-sm text-gray-500 line-clamp-2"},ce.description||"No description")),a.createElement("div",{className:"flex items-center gap-4 text-sm text-gray-600"},a.createElement("span",{className:"flex items-center gap-1"},a.createElement(kl,{className:"h-4 w-4"}),ce.memberCount||0," members"),a.createElement("span",{className:"flex items-center gap-1"},a.createElement(H_,{className:"h-4 w-4"}),ce.postCount||0," posts")),a.createElement("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100"},a.createElement("button",{onClick:()=>Be(ce),className:"flex-1 px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 flex items-center justify-center gap-1"},a.createElement(kl,{className:"h-4 w-4"}),"View Members"),a.createElement("button",{onClick:()=>nt(ce),className:"px-3 py-2 text-sm text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100"},a.createElement(ol,{className:"h-4 w-4"}))),a.createElement("div",{className:"flex items-center gap-2"},a.createElement("button",{onClick:()=>$e(ce),className:"flex-1 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg hover:bg-gray-800 flex items-center justify-center gap-1"},a.createElement(Z3,{className:"h-4 w-4"}),"Edit"),a.createElement("button",{onClick:()=>L(ce._id),className:"px-3 py-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100"},a.createElement(ur,{className:"h-4 w-4"}))))))),y.totalPages>1&&a.createElement(Rr,{currentPage:y.currentPage,totalPages:y.totalPages,totalItems:y.totalCount,itemsPerPage:y.limit,onPageChange:ce=>oe(ce),itemLabel:"clubs"}))),r==="members"&&ue&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200"},a.createElement("div",{className:"p-4 border-b border-gray-200"},a.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Club Members"),a.createElement("p",{className:"text-sm text-gray-500"},pe.totalCount," members in this club")),ee?a.createElement("div",{className:"p-6 flex items-center justify-center gap-2 text-gray-600"},a.createElement(ct,{className:"h-5 w-5 animate-spin"}),"Loading members..."):te?a.createElement("div",{className:"p-6 text-center text-red-500"},te):J.length===0?a.createElement("div",{className:"p-6 text-center text-gray-500"},"No members in this club."):a.createElement("div",{className:"divide-y divide-gray-200"},J.map(ce=>a.createElement("div",{key:ce.id,className:"p-4 flex items-center justify-between gap-4"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-800 to-gray-600 flex items-center justify-center text-white font-bold text-sm"},ce.name?.charAt(0)?.toUpperCase()||"U"),a.createElement("div",null,a.createElement("h3",{className:"text-sm font-semibold text-gray-900"},ce.name||"Unknown"),a.createElement("p",{className:"text-xs text-gray-500"},ce.email||ce.phone||"-"))),a.createElement("div",{className:"flex items-center gap-4 text-sm text-gray-600"},a.createElement("span",null,ce.followerCount||0," followers"),a.createElement("span",{className:"text-xs text-gray-400"},"Joined ",je(ce.joinedAt)))))),pe.totalPages>1&&a.createElement(Rr,{currentPage:pe.currentPage,totalPages:pe.totalPages,totalItems:pe.totalCount,itemsPerPage:pe.limit,onPageChange:ce=>Ne(ce),itemLabel:"members"})),a.createElement(jt,{isOpen:G,onClose:()=>{F(!1),M(null),ie()},title:"Edit club",size:"lg"},a.createElement("form",{onSubmit:ve,className:"space-y-4"},a.createElement("input",{type:"text",value:u.name,onChange:ce=>g({...u,name:ce.target.value}),required:!0,placeholder:"Club name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),a.createElement("textarea",{value:u.description,onChange:ce=>g({...u,description:ce.target.value}),rows:3,placeholder:"Description",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),a.createElement(il,{label:"Club Thumbnail",value:u.thumbnail,onUpload:ce=>g({...u,thumbnail:ce}),folder:"clubs",type:"image",placeholder:"Drop club thumbnail here or click to upload",disabled:D}),a.createElement("div",{className:"flex items-center justify-end gap-2"},a.createElement("button",{type:"button",onClick:()=>{F(!1),M(null),ie()},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"},"Cancel"),a.createElement("button",{type:"submit",disabled:D,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60"},D?a.createElement(ct,{className:"h-4 w-4 animate-spin"}):a.createElement(Z3,{className:"h-4 w-4"}),"Save changes")))),a.createElement(jt,{isOpen:Y,onClose:()=>{H(!1),j(null)},title:"Club Statistics",size:"lg"},V&&a.createElement("div",{className:"space-y-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},V.clubName),a.createElement("div",{className:"grid grid-cols-2 gap-4"},a.createElement("div",{className:"p-4 bg-blue-50 rounded-lg"},a.createElement("p",{className:"text-2xl font-bold text-blue-700"},V.totalMembers||0),a.createElement("p",{className:"text-sm text-blue-600"},"Total Members")),a.createElement("div",{className:"p-4 bg-green-50 rounded-lg"},a.createElement("p",{className:"text-2xl font-bold text-green-700"},V.totalPosts||0),a.createElement("p",{className:"text-sm text-green-600"},"Total Posts")),a.createElement("div",{className:"p-4 bg-purple-50 rounded-lg col-span-2"},a.createElement("p",{className:"text-2xl font-bold text-purple-700"},V.recentPosts||0),a.createElement("p",{className:"text-sm text-purple-600"},"Recent Posts"))),V.topPosters?.length>0&&a.createElement("div",null,a.createElement("h4",{className:"text-sm font-semibold text-gray-700 mb-2"},"Top Posters"),a.createElement("div",{className:"space-y-2"},V.topPosters.map((ce,qe)=>a.createElement("div",{key:ce.userId,className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("span",{className:"w-6 h-6 rounded-full bg-gray-800 text-white text-xs flex items-center justify-center font-bold"},qe+1),a.createElement("span",{className:"text-sm font-medium text-gray-900"},ce.name)),a.createElement("span",{className:"text-sm text-gray-600"},ce.postCount," posts"))))))),a.createElement(za,{isOpen:!!U,onClose:()=>L(null),onConfirm:We,title:"Delete club",message:"This will delete the club and all associated data (members, posts). This action cannot be undone.",confirmText:"Delete club",variant:"danger",isLoading:q}))}const ID={APP_VERSION:"/web/settings/app-version"},MD={getAppVersion:async()=>(console.log("[SettingsService] Fetching app version settings"),Pe(ke.get(ID.APP_VERSION))),updateAppVersion:async e=>(console.log("[SettingsService] Updating app version settings"),Pe(ke.put(ID.APP_VERSION,e)))},RD={currentVersion:"",minimumVersion:"",forceUpdate:!1,updateUrl:""};function ufe(){const[e,t]=w.useState(RD),[r,n]=w.useState(RD),[l,i]=w.useState(!1),[u,g]=w.useState(!1),[h,p]=w.useState(null),[y,v]=w.useState(null),C=w.useMemo(()=>e.currentVersion!==r.currentVersion||e.minimumVersion!==r.minimumVersion||e.forceUpdate!==r.forceUpdate||e.updateUrl!==r.updateUrl,[e,r]),T=async()=>{i(!0),p(null),v(null);const k=await MD.getAppVersion();if(k.success){const R=k.data?.appVersion||{},B={currentVersion:R.currentVersion||"",minimumVersion:R.minimumVersion||"",forceUpdate:R.forceUpdate||!1,updateUrl:R.updateUrl||""};t(B),n(B)}else p(k.message||"Failed to fetch app version settings");i(!1)};w.useEffect(()=>{T()},[]);const D=async k=>{k.preventDefault(),g(!0),p(null),v(null);const R={currentVersion:e.currentVersion.trim(),minimumVersion:e.minimumVersion.trim(),forceUpdate:!!e.forceUpdate,updateUrl:e.updateUrl.trim()},B=await MD.updateAppVersion(R);if(B.success){const M={currentVersion:R.currentVersion,minimumVersion:R.minimumVersion,forceUpdate:R.forceUpdate,updateUrl:R.updateUrl};n(M),t(M),v("App version settings updated successfully")}else p(B.message||"Failed to update app version settings");g(!1)},P=()=>{t(r),v(null),p(null)};return a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Settings"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Control app versioning and force updates for mobile clients.")),a.createElement("button",{onClick:T,disabled:l,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-60"},a.createElement($n,{className:`h-4 w-4 ${l?"animate-spin":""}`}),"Refresh")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},a.createElement("div",{className:"flex items-start gap-3 mb-4"},a.createElement("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-800"},a.createElement(Mz,{className:"h-5 w-5"})),a.createElement("div",null,a.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"App Version Control"),a.createElement("p",{className:"text-sm text-gray-500"},"Configure latest and minimum supported app versions. Users below minimum will be forced to update."))),h&&a.createElement("div",{className:"mb-4 px-4 py-3 rounded-lg border border-red-200 bg-red-50 text-red-700 text-sm"},h),y&&a.createElement("div",{className:"mb-4 px-4 py-3 rounded-lg border border-emerald-200 bg-emerald-50 text-emerald-700 text-sm"},y),a.createElement("form",{onSubmit:D,className:"space-y-4"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement("div",{className:"space-y-1"},a.createElement("label",{className:"text-sm font-medium text-gray-700"},"Current Version"),a.createElement("input",{type:"text",value:e.currentVersion,onChange:k=>t({...e,currentVersion:k.target.value}),placeholder:"e.g. 2.5.0",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),a.createElement("p",{className:"text-xs text-gray-500"},"Latest version available on the store.")),a.createElement("div",{className:"space-y-1"},a.createElement("label",{className:"text-sm font-medium text-gray-700"},"Minimum Version"),a.createElement("input",{type:"text",value:e.minimumVersion,onChange:k=>t({...e,minimumVersion:k.target.value}),placeholder:"e.g. 2.3.0",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),a.createElement("p",{className:"text-xs text-gray-500"},"Users below this version will see a force update prompt."))),a.createElement("div",{className:"space-y-1"},a.createElement("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2"},a.createElement(Vz,{className:"h-4 w-4 text-gray-600"}),"Force Update"),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700"},a.createElement("input",{type:"checkbox",checked:e.forceUpdate,onChange:k=>t({...e,forceUpdate:k.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),"Require update for users below minimum version"))),a.createElement("div",{className:"space-y-1"},a.createElement("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2"},a.createElement(Ed,{className:"h-4 w-4 text-gray-600"}),"Update URL"),a.createElement("input",{type:"url",value:e.updateUrl,onChange:k=>t({...e,updateUrl:k.target.value}),placeholder:"https://play.google.com/store/apps/details?id=...",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),a.createElement("p",{className:"text-xs text-gray-500"},"Link to the app page on the store.")),a.createElement("div",{className:"flex items-center justify-end gap-3 pt-2"},a.createElement("button",{type:"button",onClick:P,disabled:!C||u,className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50"},"Reset"),a.createElement("button",{type:"submit",disabled:u||l||!C,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60"},u?a.createElement(ct,{className:"h-4 w-4 animate-spin"}):a.createElement(Dz,{className:"h-4 w-4"}),"Save Changes")))))}const Ru={BASE:"/web/services"},dfe=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([r,n])=>{n!=null&&n!==""&&t.append(r,n)}),t.toString()},Nc={getAll:async(e={})=>{const t=dfe(e),r=t?`${Ru.BASE}?${t}`:Ru.BASE;console.log("[ServiceService] Fetching services with params:",e);const n=await Pe(ke.get(r));return n.success?console.log("[ServiceService] Fetched services:",n.data.services?.length):console.error("[ServiceService] Failed to fetch services:",n.message),n},getById:async e=>{console.log("[ServiceService] Fetching service:",e);const t=await Pe(ke.get(`${Ru.BASE}/${e}`));return t.success?console.log("[ServiceService] Fetched service:",t.data.service?.name):console.error("[ServiceService] Failed to fetch service:",t.message),t},create:async e=>{console.log("[ServiceService] Creating service:",e.name);const t=await Pe(ke.post(Ru.BASE,e));return t.success?console.log("[ServiceService] Created service:",t.data.service?._id):console.error("[ServiceService] Failed to create service:",t.message),t},update:async(e,t)=>{console.log("[ServiceService] Updating service:",e);const r=await Pe(ke.put(`${Ru.BASE}/${e}`,t));return r.success?console.log("[ServiceService] Updated service:",r.data.service?.name):console.error("[ServiceService] Failed to update service:",r.message),r},delete:async e=>{console.log("[ServiceService] Deleting service:",e);const t=await Pe(ke.delete(`${Ru.BASE}/${e}`));return t.success?console.log("[ServiceService] Deleted service successfully"):console.error("[ServiceService] Failed to delete service:",t.message),t}},b9=["CONSULTATION","COACHING","THERAPY","WELLNESS","FITNESS","EDUCATION","OTHER"],mfe=[{value:"displayOrder",label:"Display Order"},{value:"createdAt",label:"Created Date"},{value:"name",label:"Name"},{value:"price",label:"Price"}],LD={search:"",category:"",isActive:"",isFeatured:"",sortBy:"displayOrder",sortOrder:"asc"};function ffe(e={}){const[t,r]=w.useState([]),[n,l]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[i,u]=w.useState({...LD,...e}),[g,h]=w.useState(!1),[p,y]=w.useState(null),v=w.useRef(null),C=w.useCallback(async(L=n.currentPage)=>{h(!0),y(null);try{const V={page:L,limit:n.limit,sortBy:i.sortBy,sortOrder:i.sortOrder,...i.search&&{search:i.search},...i.category&&{category:i.category},...i.isActive!==""&&{isActive:i.isActive},...i.isFeatured!==""&&{isFeatured:i.isFeatured}},j=await Nc.getAll(V);j.success?(r(j.data.services||[]),l(j.data.pagination||n)):(y(j.message),r([]))}catch{y("Failed to fetch services"),r([])}finally{h(!1)}},[i,n.limit,n.currentPage]),T=w.useCallback(async L=>{try{const V=await Nc.getById(L);return V.success?{success:!0,data:V.data.service}:{success:!1,error:V.message}}catch{return{success:!1,error:"Failed to fetch service details"}}},[]),D=w.useCallback(async L=>{h(!0),y(null);try{const V=await Nc.create(L);return V.success?(await C(1),{success:!0,data:V.data}):{success:!1,error:V.message,validationErrors:Array.isArray(V.error)?V.error:V.data?.errors}}catch{return{success:!1,error:"Failed to create service"}}finally{h(!1)}},[C]),P=w.useCallback(async(L,V)=>{h(!0),y(null);try{const j=await Nc.update(L,V);return j.success?(r(Y=>Y.map(H=>H._id===L?{...H,...j.data.service}:H)),{success:!0,data:j.data}):{success:!1,error:j.message,validationErrors:Array.isArray(j.error)?j.error:j.data?.errors}}catch{return{success:!1,error:"Failed to update service"}}finally{h(!1)}},[]),k=w.useCallback(async L=>{h(!0),y(null);try{const V=await Nc.delete(L);return V.success?(r(j=>j.map(Y=>Y._id===L?{...Y,isActive:!1}:Y)),{success:!0}):{success:!1,error:V.message}}catch{return{success:!1,error:"Failed to delete service"}}finally{h(!1)}},[]),R=w.useCallback(L=>{u(V=>({...V,...L}))},[]),B=w.useCallback(L=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{u(V=>({...V,search:L}))},300)},[]),M=w.useCallback(()=>{u({...LD,...e})},[e]),G=w.useCallback(L=>{C(L)},[C]),F=w.useCallback(L=>{l(V=>({...V,limit:L}))},[]),U=w.useCallback(()=>{y(null)},[]);return w.useEffect(()=>{C(1)},[i]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{services:t,pagination:n,filters:i,isLoading:g,error:p,fetchServices:C,getServiceById:T,createService:D,updateService:P,deleteService:k,updateFilters:R,updateSearch:B,resetFilters:M,changePage:G,changeLimit:F,clearError:U}}function gfe({filters:e,onFilterChange:t,onSearchChange:r,onReset:n,disabled:l=!1}){const[i,u]=w.useState(e.search||""),g=v=>{const C=v.target.value;u(C),r(C)},h=(v,C)=>{t({[v]:C})},p=()=>{u(""),n()},y=e.category||e.isActive!==""||e.isFeatured!=="";return a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4"},a.createElement("div",{className:"flex flex-wrap items-center gap-3"},a.createElement("div",{className:"relative flex-1 min-w-[240px]"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.createElement("input",{type:"text",placeholder:"Search services...",value:i,onChange:g,disabled:l,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),i&&a.createElement("button",{onClick:()=>{u(""),r("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},a.createElement(Gr,{className:"h-4 w-4"}))),a.createElement("select",{value:e.category,onChange:v=>h("category",v.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Categories"),b9.map(v=>a.createElement("option",{key:v,value:v},v.charAt(0)+v.slice(1).toLowerCase()))),a.createElement("select",{value:e.isActive,onChange:v=>h("isActive",v.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"true"},"Active Only"),a.createElement("option",{value:"false"},"Inactive")),a.createElement("select",{value:e.isFeatured,onChange:v=>h("isFeatured",v.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Services"),a.createElement("option",{value:"true"},"Featured Only"),a.createElement("option",{value:"false"},"Not Featured")),a.createElement("select",{value:e.sortBy,onChange:v=>h("sortBy",v.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},mfe.map(v=>a.createElement("option",{key:v.value,value:v.value},"Sort: ",v.label))),a.createElement("select",{value:e.sortOrder,onChange:v=>h("sortOrder",v.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:"asc"},"Ascending"),a.createElement("option",{value:"desc"},"Descending")),(y||i)&&a.createElement("button",{onClick:p,disabled:l,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50"},a.createElement(ko,{className:"h-4 w-4"}),"Reset")))}function BD(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function hfe(e){const t={CONSULTATION:"bg-blue-100 text-blue-700",COACHING:"bg-purple-100 text-purple-700",THERAPY:"bg-green-100 text-green-700",WELLNESS:"bg-teal-100 text-teal-700",FITNESS:"bg-orange-100 text-orange-700",EDUCATION:"bg-indigo-100 text-indigo-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function pfe({services:e,isLoading:t,canEdit:r,canDelete:n,onView:l,onEdit:i,onDelete:u}){return t?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8"},a.createElement("div",{className:"flex items-center justify-center"},a.createElement(ct,{className:"h-8 w-8 animate-spin text-gray-800"}),a.createElement("span",{className:"ml-3 text-gray-600"},"Loading services..."))):e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8"},a.createElement("div",{className:"text-center text-gray-500"},a.createElement("p",{className:"text-lg font-medium"},"No services found"),a.createElement("p",{className:"text-sm mt-1"},"Try adjusting your filters or create a new service."))):a.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Service"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Category"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Price"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Duration"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Subscriptions"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,e.map(g=>a.createElement("tr",{key:g._id,className:`border-b border-gray-100 hover:bg-gray-50 ${g.isActive?"":"bg-gray-50/50"}`},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-4"},a.createElement("div",{className:"relative w-16 h-12 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0"},g.isFeatured&&a.createElement("div",{className:"absolute top-0 left-0 z-10"},a.createElement("div",{className:"bg-amber-500 text-white text-[8px] font-semibold px-1.5 py-0.5 rounded-br-md shadow-sm"},a.createElement(G_,{className:"h-2 w-2 inline"}))),g.imageUrl?a.createElement("img",{src:g.imageUrl,alt:g.name,className:"w-full h-full object-cover",onError:h=>{h.target.style.display="none"}}):a.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs"},"No image")),a.createElement("div",{className:"min-w-0"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("p",{className:"font-medium text-gray-900 truncate max-w-[200px]"},g.name),g.isFeatured&&a.createElement("span",{className:"hidden sm:inline-flex px-1.5 py-0.5 rounded text-[10px] font-medium bg-amber-100 text-amber-700"},"Featured")),g.shortDescription&&a.createElement("p",{className:"text-sm text-gray-500 truncate max-w-[250px]"},g.shortDescription)))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${hfe(g.category)}`},g.category)),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"text-sm"},a.createElement("p",{className:"font-medium text-gray-900"},BD(g.price)),g.compareAtPrice&&g.compareAtPrice>g.price&&a.createElement("p",{className:"text-gray-400 line-through text-xs"},BD(g.compareAtPrice)))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"text-sm text-gray-600"},g.durationInDays," days")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"text-sm"},a.createElement("p",{className:"text-gray-900"},g.activeSubscriptionCount||0," active"),a.createElement("p",{className:"text-gray-500 text-xs"},g.totalSubscriptionCount||0," total"))),a.createElement("td",{className:"px-6 py-4"},g.isActive?a.createElement("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700"},"Active"):a.createElement("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"},"Inactive")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>l(g),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details"},a.createElement(Mr,{className:"h-4 w-4"})),r&&a.createElement("button",{onClick:()=>i(g),className:"p-2 text-gray-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Service"},a.createElement(cn,{className:"h-4 w-4"})),n&&a.createElement("button",{onClick:()=>u(g),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Service"},a.createElement(ur,{className:"h-4 w-4"}))))))))))}function FD(e=null){return e?{name:e.name||"",description:e.description||"",shortDescription:e.shortDescription||"",price:e.price||"",compareAtPrice:e.compareAtPrice||"",durationInDays:e.durationInDays||30,category:e.category||"OTHER",imageUrl:e.imageUrl||"",perks:e.perks||[],maxSubscriptions:e.maxSubscriptions||"",displayOrder:e.displayOrder||0,isFeatured:e.isFeatured||!1,isActive:e.isActive!==void 0?e.isActive:!0,metadata:e.metadata||{}}:{name:"",description:"",shortDescription:"",price:"",compareAtPrice:"",durationInDays:30,category:"OTHER",imageUrl:"",perks:[],maxSubscriptions:"",displayOrder:0,isFeatured:!1,isActive:!0,metadata:{}}}function UD({isOpen:e,onClose:t,onSubmit:r,service:n=null,isLoading:l=!1,serverError:i=null,validationErrors:u=null}){const[g,h]=w.useState(FD(n)),[p,y]=w.useState({}),[v,C]=w.useState("");w.useEffect(()=>{e&&(h(FD(n)),y({}))},[e,n]),w.useEffect(()=>{if(u&&Array.isArray(u)){const M={};u.forEach(G=>{G.field&&(M[G.field]=G.message)}),y(G=>({...G,...M}))}},[u]);const T=(M,G)=>{h(F=>({...F,[M]:G})),p[M]&&y(F=>{const U={...F};return delete U[M],U})},D=()=>{v.trim()&&(h(M=>({...M,perks:[...M.perks,v.trim()]})),C(""))},P=M=>{h(G=>({...G,perks:G.perks.filter((F,U)=>U!==M)}))},k=()=>{const M={};return g.name.trim()||(M.name="Name is required"),(!g.price||g.price<=0)&&(M.price="Price must be greater than 0"),(!g.durationInDays||g.durationInDays<=0)&&(M.durationInDays="Duration must be greater than 0"),g.compareAtPrice&&g.compareAtPrice<=g.price&&(M.compareAtPrice="Compare at price should be higher than price"),y(M),Object.keys(M).length===0},R=M=>{if(M.preventDefault(),!k())return;const G={name:g.name.trim(),description:g.description.trim(),shortDescription:g.shortDescription.trim(),price:Number(g.price),durationInDays:Number(g.durationInDays),category:g.category,perks:g.perks,displayOrder:Number(g.displayOrder)||0,isFeatured:g.isFeatured,isActive:g.isActive};g.imageUrl&&(G.imageUrl=g.imageUrl),g.compareAtPrice&&(G.compareAtPrice=Number(g.compareAtPrice)),g.maxSubscriptions&&(G.maxSubscriptions=Number(g.maxSubscriptions)),r(G)},B=!!n;return a.createElement(jt,{isOpen:e,onClose:t,title:B?"Edit Service":"Create New Service",size:"xl"},a.createElement("form",{onSubmit:R,className:"space-y-6"},i&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Xt,{className:"h-5 w-5 flex-shrink-0"}),a.createElement("p",null,i)),a.createElement("div",{className:"space-y-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Basic Information"),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Service Name ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:g.name,onChange:M=>T("name",M.target.value),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${p.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter service name"}),p.name&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},p.name)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Short Description"),a.createElement("input",{type:"text",value:g.shortDescription,onChange:M=>T("shortDescription",M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Brief description for cards",maxLength:150})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Full Description"),a.createElement("textarea",{value:g.description,onChange:M=>T("description",M.target.value),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none",placeholder:"Detailed description of the service"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Category"),a.createElement("select",{value:g.category,onChange:M=>T("category",M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white"},b9.map(M=>a.createElement("option",{key:M,value:M},M.charAt(0)+M.slice(1).toLowerCase()))))),a.createElement("div",{className:"space-y-4 pt-4 border-t border-gray-200"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Pricing & Duration"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Price () ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",value:g.price,onChange:M=>T("price",M.target.value),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${p.price?"border-red-500":"border-gray-300"}`,placeholder:"0",min:"0"}),p.price&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},p.price)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Compare at Price ()"),a.createElement("input",{type:"number",value:g.compareAtPrice,onChange:M=>T("compareAtPrice",M.target.value),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${p.compareAtPrice?"border-red-500":"border-gray-300"}`,placeholder:"Optional",min:"0"}),p.compareAtPrice&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},p.compareAtPrice)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Duration (Days) ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",value:g.durationInDays,onChange:M=>T("durationInDays",M.target.value),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${p.durationInDays?"border-red-500":"border-gray-300"}`,placeholder:"30",min:"1"}),p.durationInDays&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},p.durationInDays))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Max Subscriptions"),a.createElement("input",{type:"number",value:g.maxSubscriptions,onChange:M=>T("maxSubscriptions",M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Leave empty for unlimited",min:"0"}),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Leave empty for unlimited subscriptions"))),a.createElement("div",{className:"space-y-4 pt-4 border-t border-gray-200"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Service Image"),a.createElement(il,{value:g.imageUrl,onUpload:M=>T("imageUrl",M),folder:"services",placeholder:"Upload service image",type:"image"})),a.createElement("div",{className:"space-y-4 pt-4 border-t border-gray-200"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Service Perks"),g.perks.length>0&&a.createElement("div",{className:"space-y-2"},g.perks.map((M,G)=>a.createElement("div",{key:G,className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg"},a.createElement("span",{className:"flex-1 text-sm text-gray-700"},M),a.createElement("button",{type:"button",onClick:()=>P(G),className:"p-1 text-red-500 hover:bg-red-50 rounded"},a.createElement(ur,{className:"h-4 w-4"}))))),a.createElement("div",{className:"flex gap-2"},a.createElement("input",{type:"text",value:v,onChange:M=>C(M.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Add a perk (e.g., Weekly 1-on-1 calls)",onKeyPress:M=>{M.key==="Enter"&&(M.preventDefault(),D())}}),a.createElement("button",{type:"button",onClick:D,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"},a.createElement(kr,{className:"h-5 w-5"})))),a.createElement("div",{className:"space-y-4 pt-4 border-t border-gray-200"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Settings"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Display Order"),a.createElement("input",{type:"number",value:g.displayOrder,onChange:M=>T("displayOrder",M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"0",min:"0"}))),a.createElement("div",{className:"flex flex-wrap gap-6"},a.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:g.isFeatured,onChange:M=>T("isFeatured",M.target.checked),className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),a.createElement("span",{className:"text-sm text-gray-700"},"Featured Service")),a.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:g.isActive,onChange:M=>T("isActive",M.target.checked),className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),a.createElement("span",{className:"text-sm text-gray-700"},"Active")))),a.createElement("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:t,disabled:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center gap-2"},l?a.createElement(a.Fragment,null,a.createElement("span",{className:"animate-spin"},""),B?"Updating...":"Creating..."):B?"Update Service":"Create Service"))))}function jD(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function zD(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function yfe(e){const t={CONSULTATION:"bg-blue-100 text-blue-700",COACHING:"bg-purple-100 text-purple-700",THERAPY:"bg-green-100 text-green-700",WELLNESS:"bg-teal-100 text-teal-700",FITNESS:"bg-orange-100 text-orange-700",EDUCATION:"bg-indigo-100 text-indigo-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function xfe({isOpen:e,onClose:t,service:r}){return r?a.createElement(jt,{isOpen:e,onClose:t,title:"Service Details",size:"xl"},a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex gap-6"},a.createElement("div",{className:"w-40 h-32 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0"},r.imageUrl?a.createElement("img",{src:r.imageUrl,alt:r.name,className:"w-full h-full object-cover"}):a.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400"},"No image")),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("div",{className:"flex items-start justify-between gap-4"},a.createElement("div",null,a.createElement("h2",{className:"text-xl font-bold text-gray-900"},r.name),r.shortDescription&&a.createElement("p",{className:"text-sm text-gray-500 mt-1"},r.shortDescription)),a.createElement("div",{className:"flex gap-2"},r.isFeatured&&a.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-700"},a.createElement(G_,{className:"h-3 w-3"}),"Featured"),r.isActive?a.createElement("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700"},"Active"):a.createElement("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"},"Inactive"))),a.createElement("div",{className:"mt-3"},a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${yfe(r.category)}`},a.createElement(ed,{className:"h-3 w-3 inline mr-1"}),r.category)))),a.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},a.createElement(V2,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},"Price")),a.createElement("p",{className:"text-lg font-bold text-gray-900"},jD(r.price)),r.compareAtPrice&&r.compareAtPrice>r.price&&a.createElement("p",{className:"text-sm text-gray-400 line-through"},jD(r.compareAtPrice))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},a.createElement(ea,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},"Duration")),a.createElement("p",{className:"text-lg font-bold text-gray-900"},r.durationInDays," days")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},a.createElement(kl,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},"Active")),a.createElement("p",{className:"text-lg font-bold text-gray-900"},r.activeSubscriptionCount||0)),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},a.createElement(kl,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},"Total")),a.createElement("p",{className:"text-lg font-bold text-gray-900"},r.totalSubscriptionCount||0))),r.description&&a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("h3",{className:"text-sm font-medium text-gray-700 mb-2"},"Description"),a.createElement("p",{className:"text-sm text-gray-600 whitespace-pre-wrap"},r.description)),r.perks&&r.perks.length>0&&a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("h3",{className:"text-sm font-medium text-gray-700 mb-3"},"Service Perks"),a.createElement("ul",{className:"space-y-2"},r.perks.map((n,l)=>a.createElement("li",{key:l,className:"flex items-start gap-2"},a.createElement(js,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),a.createElement("span",{className:"text-sm text-gray-600"},n))))),a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("div",{className:"grid grid-cols-2 gap-4 text-sm"},a.createElement("div",null,a.createElement("span",{className:"text-gray-500"},"Max Subscriptions:"),a.createElement("span",{className:"ml-2 text-gray-900"},r.maxSubscriptions||"Unlimited")),a.createElement("div",null,a.createElement("span",{className:"text-gray-500"},"Display Order:"),a.createElement("span",{className:"ml-2 text-gray-900"},r.displayOrder||0)),a.createElement("div",null,a.createElement("span",{className:"text-gray-500"},"Created:"),a.createElement("span",{className:"ml-2 text-gray-900"},zD(r.createdAt))),a.createElement("div",null,a.createElement("span",{className:"text-gray-500"},"Updated:"),a.createElement("span",{className:"ml-2 text-gray-900"},zD(r.updatedAt))))),a.createElement("div",{className:"flex justify-end pt-4 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"},"Close")))):null}function bfe(){const{hasRole:e}=hn(),t=e(["SUPER_ADMIN","ADMIN"]),r=e(["SUPER_ADMIN","ADMIN"]),n=e(["SUPER_ADMIN","ADMIN"]),{services:l,pagination:i,filters:u,isLoading:g,error:h,getServiceById:p,createService:y,updateService:v,deleteService:C,updateFilters:T,updateSearch:D,resetFilters:P,changePage:k,clearError:R}=ffe(),[B,M]=w.useState(!1),[G,F]=w.useState(!1),[U,L]=w.useState(!1),[V,j]=w.useState(!1),[Y,H]=w.useState(null),[q,le]=w.useState(!1),[ue,re]=w.useState(null),[J,ae]=w.useState(null),pe=w.useCallback(Ne=>{H(Ne),L(!0)},[]),xe=w.useCallback(async Ne=>{const ie=await p(Ne._id);ie.success?(H(ie.data),re(null),ae(null),F(!0)):re(ie.error)},[p]),ee=w.useCallback(()=>{H(null),re(null),ae(null),M(!0)},[]),K=w.useCallback(Ne=>{H(Ne),j(!0)},[]),te=w.useCallback(async Ne=>{le(!0),re(null),ae(null);try{const ie=await y(Ne);ie.success?M(!1):(re(ie.error),ae(ie.validationErrors))}finally{le(!1)}},[y]),ge=w.useCallback(async Ne=>{if(Y){le(!0),re(null),ae(null);try{const ie=await v(Y._id,Ne);ie.success?(F(!1),H(null)):(re(ie.error),ae(ie.validationErrors))}finally{le(!1)}}},[Y,v]),oe=w.useCallback(async()=>{if(Y){le(!0);try{const Ne=await C(Y._id);Ne.success?(j(!1),H(null)):re(Ne.error)}finally{le(!1)}}},[Y,C]);return a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Services"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Manage your services and subscription offerings")),a.createElement("div",{className:"flex items-center gap-3"},t&&a.createElement("button",{onClick:ee,className:"flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-900 transition-colors"},a.createElement(kr,{className:"h-5 w-5"}),a.createElement("span",null,"Create Service")))),h&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Xt,{className:"h-5 w-5 flex-shrink-0"}),a.createElement("p",{className:"flex-1"},h),a.createElement("button",{onClick:R,className:"text-red-500 hover:text-red-700 font-medium"},"Dismiss")),a.createElement(gfe,{filters:u,onFilterChange:T,onSearchChange:D,onReset:P,disabled:g}),a.createElement(pfe,{services:l,isLoading:g,canEdit:r,canDelete:n,onView:pe,onEdit:xe,onDelete:K}),i.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Rr,{currentPage:i.currentPage,totalPages:i.totalPages,totalItems:i.totalCount,itemsPerPage:i.limit,onPageChange:k,itemLabel:"services"})),a.createElement(UD,{isOpen:B,onClose:()=>M(!1),onSubmit:te,service:null,isLoading:q,serverError:ue,validationErrors:J}),a.createElement(UD,{isOpen:G,onClose:()=>{F(!1),H(null)},onSubmit:ge,service:Y,isLoading:q,serverError:ue,validationErrors:J}),a.createElement(xfe,{isOpen:U,onClose:()=>{L(!1),H(null)},service:Y}),a.createElement(za,{isOpen:V,onClose:()=>{j(!1),H(null)},onConfirm:oe,title:"Delete Service",message:`Are you sure you want to delete "${Y?.name}"? This will mark the service as inactive.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:q}))}const zm={BASE:"/web/service-orders",GENERATE_LINK:"/web/service-orders/generate-payment-link"},vfe=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([r,n])=>{n!=null&&n!==""&&t.append(r,n)}),t.toString()},oh={getAll:async(e={})=>{const t=vfe(e),r=t?`${zm.BASE}?${t}`:zm.BASE;console.log("[ServiceOrderService] Fetching service orders with params:",e);const n=await Pe(ke.get(r));return n.success?console.log("[ServiceOrderService] Fetched orders:",n.data.orders?.length):console.error("[ServiceOrderService] Failed to fetch orders:",n.message),n},getById:async e=>{console.log("[ServiceOrderService] Fetching service order:",e);const t=await Pe(ke.get(`${zm.BASE}/${e}`));return t.success?console.log("[ServiceOrderService] Fetched order:",t.data.order?.orderId):console.error("[ServiceOrderService] Failed to fetch order:",t.message),t},generatePaymentLink:async e=>{console.log("[ServiceOrderService] Generating payment link for:",e.phone);const t=await Pe(ke.post(zm.GENERATE_LINK,e));return t.success?console.log("[ServiceOrderService] Payment link generated:",t.data.paymentLink):console.error("[ServiceOrderService] Failed to generate payment link:",t.message),t},resendPaymentLink:async e=>{console.log("[ServiceOrderService] Resending payment link:",e);const t=await Pe(ke.post(`${zm.BASE}/${e}/resend`));return t.success?console.log("[ServiceOrderService] Payment link resent successfully"):console.error("[ServiceOrderService] Failed to resend payment link:",t.message),t}},Efe=["PENDING","SUCCESS","FAILED","EXPIRED","CANCELLED"],wfe=["ADMIN","USER_REQUEST"],Nfe=[{value:"createdAt",label:"Created Date"},{value:"totalAmount",label:"Amount"}],VD={search:"",status:"",source:"",phone:"",sortBy:"createdAt",sortOrder:"desc"};function Sfe(e={}){const[t,r]=w.useState([]),[n,l]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[i,u]=w.useState({...VD,...e}),[g,h]=w.useState(!1),[p,y]=w.useState(null),v=w.useRef(null),C=w.useCallback(async(U=n.currentPage)=>{h(!0),y(null);try{const L={page:U,limit:n.limit,sortBy:i.sortBy,sortOrder:i.sortOrder,...i.search&&{search:i.search},...i.status&&{status:i.status},...i.source&&{source:i.source},...i.phone&&{phone:i.phone}},V=await oh.getAll(L);V.success?(r(V.data.orders||[]),l(V.data.pagination||n)):(y(V.message),r([]))}catch{y("Failed to fetch service orders"),r([])}finally{h(!1)}},[i,n.limit,n.currentPage]),T=w.useCallback(async U=>{try{const L=await oh.getById(U);return L.success?{success:!0,data:L.data.order}:{success:!1,error:L.message}}catch{return{success:!1,error:"Failed to fetch order details"}}},[]),D=w.useCallback(async U=>{h(!0),y(null);try{const L=await oh.generatePaymentLink(U);return L.success?(await C(1),{success:!0,data:L.data}):{success:!1,error:L.message,validationErrors:Array.isArray(L.error)?L.error:L.data?.errors}}catch{return{success:!1,error:"Failed to generate payment link"}}finally{h(!1)}},[C]),P=w.useCallback(async U=>{h(!0),y(null);try{const L=await oh.resendPaymentLink(U);return L.success?(r(V=>V.map(j=>j._id===U?{...j,...L.data.order}:j)),{success:!0,data:L.data}):{success:!1,error:L.message}}catch{return{success:!1,error:"Failed to resend payment link"}}finally{h(!1)}},[]),k=w.useCallback(U=>{u(L=>({...L,...U}))},[]),R=w.useCallback(U=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{u(L=>({...L,search:U}))},300)},[]),B=w.useCallback(()=>{u({...VD,...e})},[e]),M=w.useCallback(U=>{C(U)},[C]),G=w.useCallback(U=>{l(L=>({...L,limit:U}))},[]),F=w.useCallback(()=>{y(null)},[]);return w.useEffect(()=>{C(1)},[i]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{orders:t,pagination:n,filters:i,isLoading:g,error:p,fetchOrders:C,getOrderById:T,generatePaymentLink:D,resendPaymentLink:P,updateFilters:k,updateSearch:R,resetFilters:B,changePage:M,changeLimit:G,clearError:F}}function Cfe({filters:e,onFilterChange:t,onSearchChange:r,onReset:n,disabled:l=!1}){const[i,u]=w.useState(e.search||""),g=v=>{const C=v.target.value;u(C),r(C)},h=(v,C)=>{t({[v]:C})},p=()=>{u(""),n()},y=e.status||e.source||e.phone;return a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4"},a.createElement("div",{className:"flex flex-wrap items-center gap-3"},a.createElement("div",{className:"relative flex-1 min-w-[240px]"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.createElement("input",{type:"text",placeholder:"Search by phone, order ID, name...",value:i,onChange:g,disabled:l,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),i&&a.createElement("button",{onClick:()=>{u(""),r("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},a.createElement(Gr,{className:"h-4 w-4"}))),a.createElement("select",{value:e.status,onChange:v=>h("status",v.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Status"),Efe.map(v=>a.createElement("option",{key:v,value:v},v.charAt(0)+v.slice(1).toLowerCase()))),a.createElement("select",{value:e.source,onChange:v=>h("source",v.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Sources"),wfe.map(v=>a.createElement("option",{key:v,value:v},v==="ADMIN"?"Admin Created":"User Request"))),a.createElement("select",{value:e.sortBy,onChange:v=>h("sortBy",v.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},Nfe.map(v=>a.createElement("option",{key:v.value,value:v.value},"Sort: ",v.label))),a.createElement("select",{value:e.sortOrder,onChange:v=>h("sortOrder",v.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:"desc"},"Newest First"),a.createElement("option",{value:"asc"},"Oldest First")),(y||i)&&a.createElement("button",{onClick:p,disabled:l,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50"},a.createElement(ko,{className:"h-4 w-4"}),"Reset")))}function Afe(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function Tfe(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function Ofe(e){const t={PENDING:"bg-yellow-100 text-yellow-700",SUCCESS:"bg-green-100 text-green-700",FAILED:"bg-red-100 text-red-700",EXPIRED:"bg-gray-100 text-gray-600",CANCELLED:"bg-red-100 text-red-700"};return t[e]||t.PENDING}function Dfe(e){return e==="ADMIN"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}function _fe({orders:e,isLoading:t,onView:r,onResend:n,resendingId:l}){const[i,u]=w.useState(null),g=async(h,p)=>{try{await navigator.clipboard.writeText(h),u(p),setTimeout(()=>u(null),2e3)}catch(y){console.error("Failed to copy:",y)}};return t?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8"},a.createElement("div",{className:"flex items-center justify-center"},a.createElement(ct,{className:"h-8 w-8 animate-spin text-gray-800"}),a.createElement("span",{className:"ml-3 text-gray-600"},"Loading orders..."))):e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8"},a.createElement("div",{className:"text-center text-gray-500"},a.createElement("p",{className:"text-lg font-medium"},"No orders found"),a.createElement("p",{className:"text-sm mt-1"},"Try adjusting your filters or generate a new payment link."))):a.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Order ID"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Customer"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Services"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Amount"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Source"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Created"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,e.map(h=>a.createElement("tr",{key:h._id,className:"border-b border-gray-100 hover:bg-gray-50"},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900 font-mono text-sm"},h.orderId),h.userExists&&a.createElement("span",{className:"text-xs text-green-600 bg-green-50 px-1.5 py-0.5 rounded"},"User exists"),!h.userExists&&a.createElement("span",{className:"text-xs text-amber-600 bg-amber-50 px-1.5 py-0.5 rounded"},"New user"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"min-w-0"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},h.customerName||h.userId?.name||"N/A"),a.createElement("p",{className:"text-sm text-gray-500"},h.phone))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"space-y-1"},h.services?.slice(0,2).map((p,y)=>a.createElement("p",{key:y,className:"text-sm text-gray-700 truncate max-w-[150px]"},p.serviceName)),h.services?.length>2&&a.createElement("p",{className:"text-xs text-gray-500"},"+",h.services.length-2," more"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"font-medium text-gray-900"},Afe(h.totalAmount))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Dfe(h.source)}`},h.source==="ADMIN"?"Admin":"Request")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"space-y-1"},a.createElement("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${Ofe(h.status)}`},h.status),h.whatsappSent&&a.createElement("div",{className:"flex items-center gap-1 text-xs text-green-600"},a.createElement(af,{className:"h-3 w-3"}),a.createElement("span",null,"Sent")))),a.createElement("td",{className:"px-6 py-4"},a.createElement("p",{className:"text-sm text-gray-600"},Tfe(h.createdAt))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>r(h),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details"},a.createElement(Mr,{className:"h-4 w-4"})),h.paymentLinkUrl&&h.status==="PENDING"&&a.createElement("button",{onClick:()=>g(h.paymentLinkUrl,h._id),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Copy Payment Link"},i===h._id?a.createElement(En,{className:"h-4 w-4 text-green-600"}):a.createElement(Qu,{className:"h-4 w-4"})),h.paymentLinkUrl&&h.status==="PENDING"&&a.createElement("a",{href:h.paymentLinkUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Open Payment Link"},a.createElement(Ed,{className:"h-4 w-4"})),h.status==="PENDING"&&a.createElement("button",{onClick:()=>n(h._id),disabled:l===h._id,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors disabled:opacity-50",title:"Resend via WhatsApp"},l===h._id?a.createElement(ct,{className:"h-4 w-4 animate-spin"}):a.createElement($n,{className:"h-4 w-4"}))))))))))}function kfe({isOpen:e,onClose:t,onSubmit:r,isLoading:n=!1,serverError:l=null,successData:i=null}){const[u,g]=w.useState({phone:"",customerName:"",serviceIds:[],adminNotes:"",sendWhatsApp:!0}),[h,p]=w.useState({}),[y,v]=w.useState([]),[C,T]=w.useState(!1);w.useEffect(()=>{e&&(g({phone:"",customerName:"",serviceIds:[],adminNotes:"",sendWhatsApp:!0}),p({}))},[e]),w.useEffect(()=>{e&&D()},[e]);const D=async()=>{T(!0);try{const F=await Nc.getAll({isActive:!0,limit:100});F.success&&v(F.data.services||[])}catch(F){console.error("Failed to fetch services:",F)}finally{T(!1)}},P=(F,U)=>{g(L=>({...L,[F]:U})),h[F]&&p(L=>{const V={...L};return delete V[F],V})},k=F=>{g(U=>{const L=U.serviceIds.includes(F);return{...U,serviceIds:L?U.serviceIds.filter(V=>V!==F):[...U.serviceIds,F]}}),h.serviceIds&&p(U=>{const L={...U};return delete L.serviceIds,L})},R=()=>{const F={};return u.phone.trim()?/^[6-9]\d{9}$/.test(u.phone.trim())||(F.phone="Enter a valid 10-digit phone number"):F.phone="Phone number is required",u.serviceIds.length===0&&(F.serviceIds="Select at least one service"),p(F),Object.keys(F).length===0},B=F=>{if(F.preventDefault(),!R())return;const U={phone:u.phone.trim(),customerName:u.customerName.trim()||void 0,serviceIds:u.serviceIds,adminNotes:u.adminNotes.trim()||void 0,sendWhatsApp:u.sendWhatsApp};r(U)},M=()=>u.serviceIds.reduce((F,U)=>{const L=y.find(V=>V._id===U);return F+(L?.price||0)},0),G=F=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(F);return i?a.createElement(jt,{isOpen:e,onClose:t,title:"Payment Link Generated",size:"md"},a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},a.createElement(js,{className:"h-8 w-8 text-green-600"})),a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Success!"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Payment link has been generated successfully.")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-sm text-gray-500"},"Order ID:"),a.createElement("span",{className:"text-sm font-mono font-medium"},i.serviceOrder?.orderId)),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-sm text-gray-500"},"Amount:"),a.createElement("span",{className:"text-sm font-medium"},G(i.serviceOrder?.totalAmount))),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-sm text-gray-500"},"User Status:"),a.createElement("span",{className:"flex items-center gap-1 text-sm"},i.userExists?a.createElement(a.Fragment,null,a.createElement(Nd,{className:"h-4 w-4 text-green-600"}),a.createElement("span",{className:"text-green-600"},"Existing User")):a.createElement(a.Fragment,null,a.createElement(Mf,{className:"h-4 w-4 text-amber-600"}),a.createElement("span",{className:"text-amber-600"},"New User")))),i.serviceOrder?.whatsappSent&&a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-sm text-gray-500"},"WhatsApp:"),a.createElement("span",{className:"text-sm text-green-600"},"Sent"))),i.paymentLink&&a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Payment Link"),a.createElement("div",{className:"flex gap-2"},a.createElement("input",{type:"text",value:i.paymentLink,readOnly:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm"}),a.createElement("button",{onClick:()=>navigator.clipboard.writeText(i.paymentLink),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 text-sm"},"Copy"))),a.createElement("div",{className:"flex justify-end pt-4"},a.createElement("button",{onClick:t,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"},"Close")))):a.createElement(jt,{isOpen:e,onClose:t,title:"Generate Payment Link",size:"lg"},a.createElement("form",{onSubmit:B,className:"space-y-6"},l&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Xt,{className:"h-5 w-5 flex-shrink-0"}),a.createElement("p",null,l)),a.createElement("div",{className:"space-y-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Customer Information"),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Phone Number ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"tel",value:u.phone,onChange:F=>P("phone",F.target.value),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${h.phone?"border-red-500":"border-gray-300"}`,placeholder:"10-digit phone number",maxLength:10}),h.phone&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},h.phone)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Customer Name"),a.createElement("input",{type:"text",value:u.customerName,onChange:F=>P("customerName",F.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Optional - for reference"}))),a.createElement("div",{className:"space-y-4 pt-4 border-t border-gray-200"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Select Services ",a.createElement("span",{className:"text-red-500"},"*")),C?a.createElement("div",{className:"flex items-center justify-center py-8"},a.createElement(ct,{className:"h-6 w-6 animate-spin text-gray-400"}),a.createElement("span",{className:"ml-2 text-gray-500"},"Loading services...")):y.length===0?a.createElement("div",{className:"text-center py-8 text-gray-500"},"No active services available"):a.createElement("div",{className:"space-y-2 max-h-64 overflow-y-auto"},y.map(F=>a.createElement("label",{key:F._id,className:`flex items-start gap-3 p-4 rounded-lg border cursor-pointer transition-colors ${u.serviceIds.includes(F._id)?"border-gray-800 bg-gray-50":"border-gray-200 hover:border-gray-300"}`},a.createElement("input",{type:"checkbox",checked:u.serviceIds.includes(F._id),onChange:()=>k(F._id),className:"w-4 h-4 text-gray-800 rounded focus:ring-0 mt-1"}),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("p",{className:"font-medium text-gray-900"},F.name),a.createElement("p",{className:"font-semibold text-gray-900"},G(F.price))),F.shortDescription&&a.createElement("p",{className:"text-sm text-gray-500 mt-1"},F.shortDescription),a.createElement("p",{className:"text-xs text-gray-400 mt-1"},F.durationInDays," days"))))),h.serviceIds&&a.createElement("p",{className:"text-sm text-red-500"},h.serviceIds)),u.serviceIds.length>0&&a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-gray-700"},"Total Amount:"),a.createElement("span",{className:"text-xl font-bold text-gray-900"},G(M())))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Admin Notes"),a.createElement("textarea",{value:u.adminNotes,onChange:F=>P("adminNotes",F.target.value),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none",placeholder:"Optional notes for internal reference"})),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("label",{className:"flex items-center gap-3 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:u.sendWhatsApp,onChange:F=>P("sendWhatsApp",F.target.checked),className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),a.createElement("div",null,a.createElement("span",{className:"text-sm font-medium text-gray-900"},"Send via WhatsApp"),a.createElement("p",{className:"text-xs text-gray-500"},"Automatically send payment link to the customer's WhatsApp")))),a.createElement("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:t,disabled:n,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:n,className:"px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center gap-2"},n?a.createElement(a.Fragment,null,a.createElement(ct,{className:"h-4 w-4 animate-spin"}),"Generating..."):"Generate Payment Link"))))}function HD(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function $v(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function Pfe(e){const t={PENDING:"bg-yellow-100 text-yellow-700",SUCCESS:"bg-green-100 text-green-700",FAILED:"bg-red-100 text-red-700",EXPIRED:"bg-gray-100 text-gray-600",CANCELLED:"bg-red-100 text-red-700"};return t[e]||t.PENDING}function Ife({isOpen:e,onClose:t,order:r}){const[n,l]=w.useState(!1);if(!r)return null;const i=async()=>{if(r.paymentLinkUrl)try{await navigator.clipboard.writeText(r.paymentLinkUrl),l(!0),setTimeout(()=>l(!1),2e3)}catch(u){console.error("Failed to copy:",u)}};return a.createElement(jt,{isOpen:e,onClose:t,title:"Order Details",size:"xl"},a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex items-start justify-between"},a.createElement("div",null,a.createElement("h2",{className:"text-xl font-bold text-gray-900 font-mono"},r.orderId),a.createElement("div",{className:"flex items-center gap-2 mt-2"},a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Pfe(r.status)}`},r.status),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${r.source==="ADMIN"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`},r.source==="ADMIN"?"Admin Created":"User Request"))),a.createElement("div",{className:"text-right"},a.createElement("p",{className:"text-2xl font-bold text-gray-900"},HD(r.totalAmount)))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},a.createElement("h3",{className:"text-sm font-medium text-gray-700 mb-3"},"Customer Information"),a.createElement("div",{className:"grid grid-cols-2 gap-4"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement(ds,{className:"h-5 w-5 text-gray-400"}),a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-500"},"Name"),a.createElement("p",{className:"font-medium text-gray-900"},r.customerName||r.userId?.name||"N/A"))),a.createElement("div",{className:"flex items-center gap-3"},a.createElement(vi,{className:"h-5 w-5 text-gray-400"}),a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-500"},"Phone"),a.createElement("p",{className:"font-medium text-gray-900"},r.phone))),a.createElement("div",{className:"flex items-center gap-3"},r.userExists?a.createElement(Nd,{className:"h-5 w-5 text-green-500"}):a.createElement(Mf,{className:"h-5 w-5 text-amber-500"}),a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-500"},"User Status"),a.createElement("p",{className:`font-medium ${r.userExists?"text-green-600":"text-amber-600"}`},r.userExists?"Existing User":"New User"))),r.userId?.email&&a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-500"},"Email"),a.createElement("p",{className:"font-medium text-gray-900"},r.userId.email)))),a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},a.createElement(wd,{className:"h-4 w-4"}),"Services (",r.services?.length||0,")"),a.createElement("div",{className:"space-y-2"},r.services?.map((u,g)=>a.createElement("div",{key:g,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900"},u.serviceName),a.createElement("p",{className:"text-sm text-gray-500"},u.durationInDays," days")),a.createElement("p",{className:"font-semibold text-gray-900"},HD(u.price)))))),r.paymentLinkUrl&&a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},a.createElement(Vp,{className:"h-4 w-4"}),"Payment Link"),a.createElement("div",{className:"flex gap-2"},a.createElement("input",{type:"text",value:r.paymentLinkUrl,readOnly:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm font-mono"}),a.createElement("button",{onClick:i,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"},n?a.createElement(En,{className:"h-5 w-5 text-green-600"}):a.createElement(Qu,{className:"h-5 w-5"})),a.createElement("a",{href:r.paymentLinkUrl,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},a.createElement(Ed,{className:"h-5 w-5"}))),r.expiresAt&&a.createElement("p",{className:"text-xs text-gray-500 mt-2"},"Expires: ",$v(r.expiresAt))),r.whatsappSent&&a.createElement("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 px-4 py-3 rounded-lg"},a.createElement(af,{className:"h-5 w-5"}),a.createElement("div",null,a.createElement("p",{className:"font-medium"},"WhatsApp Sent"),r.whatsappSentAt&&a.createElement("p",{className:"text-xs opacity-75"},$v(r.whatsappSentAt)))),r.adminNotes&&a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("h3",{className:"text-sm font-medium text-gray-700 mb-2"},"Admin Notes"),a.createElement("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg"},r.adminNotes)),a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("div",{className:"grid grid-cols-2 gap-4 text-sm"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(ea,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-gray-500"},"Created:"),a.createElement("span",{className:"text-gray-900"},$v(r.createdAt))),r.adminId&&a.createElement("div",null,a.createElement("span",{className:"text-gray-500"},"Created by:"),a.createElement("span",{className:"ml-2 text-gray-900"},r.adminId.name||r.adminId.username)))),a.createElement("div",{className:"flex justify-end pt-4 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"},"Close"))))}function Mfe(){const{hasRole:e}=hn(),t=e(["SUPER_ADMIN","ADMIN"]),{orders:r,pagination:n,filters:l,isLoading:i,error:u,getOrderById:g,generatePaymentLink:h,resendPaymentLink:p,updateFilters:y,updateSearch:v,resetFilters:C,changePage:T,clearError:D}=Sfe(),[P,k]=w.useState(!1),[R,B]=w.useState(!1),[M,G]=w.useState(null),[F,U]=w.useState(!1),[L,V]=w.useState(null),[j,Y]=w.useState(null),[H,q]=w.useState(null),le=w.useCallback(async pe=>{const xe=await g(pe._id);xe.success&&(G(xe.data),B(!0))},[g]),ue=w.useCallback(()=>{V(null),Y(null),k(!0)},[]),re=w.useCallback(async pe=>{q(pe);try{const xe=await p(pe);xe.success||console.error("Failed to resend:",xe.error)}finally{q(null)}},[p]),J=w.useCallback(async pe=>{U(!0),V(null);try{const xe=await h(pe);xe.success?Y(xe.data):V(xe.error)}finally{U(!1)}},[h]),ae=w.useCallback(()=>{k(!1),V(null),Y(null)},[]);return a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Service Orders"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Manage payment links and service orders")),a.createElement("div",{className:"flex items-center gap-3"},t&&a.createElement("button",{onClick:ue,className:"flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-900 transition-colors"},a.createElement(kr,{className:"h-5 w-5"}),a.createElement("span",null,"Generate Payment Link")))),u&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Xt,{className:"h-5 w-5 flex-shrink-0"}),a.createElement("p",{className:"flex-1"},u),a.createElement("button",{onClick:D,className:"text-red-500 hover:text-red-700 font-medium"},"Dismiss")),a.createElement(Cfe,{filters:l,onFilterChange:y,onSearchChange:v,onReset:C,disabled:i}),a.createElement(_fe,{orders:r,isLoading:i,onView:le,onResend:re,resendingId:H}),n.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Rr,{currentPage:n.currentPage,totalPages:n.totalPages,totalItems:n.totalCount,itemsPerPage:n.limit,onPageChange:T,itemLabel:"orders"})),a.createElement(kfe,{isOpen:P,onClose:ae,onSubmit:J,isLoading:F,serverError:L,successData:j}),a.createElement(Ife,{isOpen:R,onClose:()=>{B(!1),G(null)},order:M}))}const Vm={BASE:"/web/service-requests"},Rfe=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([r,n])=>{n!=null&&n!==""&&t.append(r,n)}),t.toString()},ch={getAll:async(e={})=>{const t=Rfe(e),r=t?`${Vm.BASE}?${t}`:Vm.BASE;console.log("[ServiceRequestService] Fetching service requests with params:",e);const n=await Pe(ke.get(r));return n.success?console.log("[ServiceRequestService] Fetched requests:",n.data.requests?.length):console.error("[ServiceRequestService] Failed to fetch requests:",n.message),n},getById:async e=>{console.log("[ServiceRequestService] Fetching service request:",e);const t=await Pe(ke.get(`${Vm.BASE}/${e}`));return t.success?console.log("[ServiceRequestService] Fetched request:",t.data.request?._id):console.error("[ServiceRequestService] Failed to fetch request:",t.message),t},approve:async(e,t={})=>{console.log("[ServiceRequestService] Approving service request:",e);const r=await Pe(ke.post(`${Vm.BASE}/${e}/approve`,t));return r.success?console.log("[ServiceRequestService] Request approved successfully"):console.error("[ServiceRequestService] Failed to approve request:",r.message),r},reject:async(e,t)=>{console.log("[ServiceRequestService] Rejecting service request:",e);const r=await Pe(ke.post(`${Vm.BASE}/${e}/reject`,t));return r.success?console.log("[ServiceRequestService] Request rejected successfully"):console.error("[ServiceRequestService] Failed to reject request:",r.message),r}},Lfe=["PENDING","APPROVED","REJECTED"],Bfe=[{value:"createdAt",label:"Created Date"},{value:"totalAmount",label:"Amount"}],$D={search:"",status:"",userExists:"",sortBy:"createdAt",sortOrder:"desc"};function Ffe(e={}){const[t,r]=w.useState([]),[n,l]=w.useState(0),[i,u]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[g,h]=w.useState({...$D,...e}),[p,y]=w.useState(!1),[v,C]=w.useState(null),T=w.useRef(null),D=w.useCallback(async(V=i.currentPage)=>{y(!0),C(null);try{const j={page:V,limit:i.limit,sortBy:g.sortBy,sortOrder:g.sortOrder,...g.search&&{search:g.search},...g.status&&{status:g.status},...g.userExists!==""&&{userExists:g.userExists}},Y=await ch.getAll(j);Y.success?(r(Y.data.requests||[]),l(Y.data.pendingCount||0),u(Y.data.pagination||i)):(C(Y.message),r([]))}catch{C("Failed to fetch service requests"),r([])}finally{y(!1)}},[g,i.limit,i.currentPage]),P=w.useCallback(async V=>{try{const j=await ch.getById(V);return j.success?{success:!0,data:j.data.request}:{success:!1,error:j.message}}catch{return{success:!1,error:"Failed to fetch request details"}}},[]),k=w.useCallback(async(V,j={})=>{y(!0),C(null);try{const Y=await ch.approve(V,j);return Y.success?(r(H=>H.map(q=>q._id===V?{...q,status:"APPROVED",...Y.data.request}:q)),l(H=>Math.max(0,H-1)),{success:!0,data:Y.data}):{success:!1,error:Y.message}}catch{return{success:!1,error:"Failed to approve request"}}finally{y(!1)}},[]),R=w.useCallback(async(V,j)=>{y(!0),C(null);try{const Y=await ch.reject(V,j);return Y.success?(r(H=>H.map(q=>q._id===V?{...q,status:"REJECTED",...Y.data.request}:q)),l(H=>Math.max(0,H-1)),{success:!0,data:Y.data}):{success:!1,error:Y.message}}catch{return{success:!1,error:"Failed to reject request"}}finally{y(!1)}},[]),B=w.useCallback(V=>{h(j=>({...j,...V}))},[]),M=w.useCallback(V=>{T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{h(j=>({...j,search:V}))},300)},[]),G=w.useCallback(()=>{h({...$D,...e})},[e]),F=w.useCallback(V=>{D(V)},[D]),U=w.useCallback(V=>{u(j=>({...j,limit:V}))},[]),L=w.useCallback(()=>{C(null)},[]);return w.useEffect(()=>{D(1)},[g]),w.useEffect(()=>()=>{T.current&&clearTimeout(T.current)},[]),{requests:t,pendingCount:n,pagination:i,filters:g,isLoading:p,error:v,fetchRequests:D,getRequestById:P,approveRequest:k,rejectRequest:R,updateFilters:B,updateSearch:M,resetFilters:G,changePage:F,changeLimit:U,clearError:L}}function Ufe({filters:e,onFilterChange:t,onSearchChange:r,onReset:n,pendingCount:l=0,disabled:i=!1}){const[u,g]=w.useState(e.search||""),h=C=>{const T=C.target.value;g(T),r(T)},p=(C,T)=>{t({[C]:T})},y=()=>{g(""),n()},v=e.status||e.userExists!=="";return a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4"},a.createElement("div",{className:"flex flex-wrap items-center gap-3"},l>0&&a.createElement("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-amber-100 text-amber-800 rounded-lg"},a.createElement("span",{className:"text-sm font-medium"},l," pending")),a.createElement("div",{className:"relative flex-1 min-w-[240px]"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.createElement("input",{type:"text",placeholder:"Search by phone, name, email...",value:u,onChange:h,disabled:i,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),u&&a.createElement("button",{onClick:()=>{g(""),r("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},a.createElement(Gr,{className:"h-4 w-4"}))),a.createElement("select",{value:e.status,onChange:C=>p("status",C.target.value),disabled:i,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Status"),Lfe.map(C=>a.createElement("option",{key:C,value:C},C.charAt(0)+C.slice(1).toLowerCase()))),a.createElement("select",{value:e.userExists,onChange:C=>p("userExists",C.target.value),disabled:i,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Users"),a.createElement("option",{value:"true"},"Existing Users"),a.createElement("option",{value:"false"},"New Users")),a.createElement("select",{value:e.sortBy,onChange:C=>p("sortBy",C.target.value),disabled:i,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},Bfe.map(C=>a.createElement("option",{key:C.value,value:C.value},"Sort: ",C.label))),a.createElement("select",{value:e.sortOrder,onChange:C=>p("sortOrder",C.target.value),disabled:i,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:"desc"},"Newest First"),a.createElement("option",{value:"asc"},"Oldest First")),(v||u)&&a.createElement("button",{onClick:y,disabled:i,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50"},a.createElement(ko,{className:"h-4 w-4"}),"Reset")))}function jfe(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function zfe(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function Vfe(e){const t={PENDING:"bg-yellow-100 text-yellow-700",APPROVED:"bg-green-100 text-green-700",REJECTED:"bg-red-100 text-red-700"};return t[e]||t.PENDING}function Hfe({requests:e,isLoading:t,canReview:r,onView:n,onApprove:l,onReject:i}){return t?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8"},a.createElement("div",{className:"flex items-center justify-center"},a.createElement(ct,{className:"h-8 w-8 animate-spin text-gray-800"}),a.createElement("span",{className:"ml-3 text-gray-600"},"Loading requests..."))):e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8"},a.createElement("div",{className:"text-center text-gray-500"},a.createElement("p",{className:"text-lg font-medium"},"No requests found"),a.createElement("p",{className:"text-sm mt-1"},"Service requests from users will appear here."))):a.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Customer"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"User Status"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Services"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Amount"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Requested"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,e.map(u=>a.createElement("tr",{key:u._id,className:`border-b border-gray-100 hover:bg-gray-50 ${u.status==="PENDING"?"bg-amber-50/30":""}`},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"min-w-0"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},u.name||"N/A"),a.createElement("p",{className:"text-sm text-gray-500"},u.phone),u.email&&a.createElement("p",{className:"text-sm text-gray-400 truncate"},u.email))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-2"},u.userExists?a.createElement(a.Fragment,null,a.createElement(Nd,{className:"h-4 w-4 text-green-500"}),a.createElement("span",{className:"text-sm text-green-600"},"Existing")):a.createElement(a.Fragment,null,a.createElement(Mf,{className:"h-4 w-4 text-amber-500"}),a.createElement("span",{className:"text-sm text-amber-600"},"New")))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"space-y-1"},u.services?.slice(0,2).map((g,h)=>a.createElement("p",{key:h,className:"text-sm text-gray-700 truncate max-w-[150px]"},g.serviceName||g.serviceId?.name)),u.services?.length>2&&a.createElement("p",{className:"text-xs text-gray-500"},"+",u.services.length-2," more"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"font-medium text-gray-900"},jfe(u.totalAmount))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${Vfe(u.status)}`},u.status)),a.createElement("td",{className:"px-6 py-4"},a.createElement("p",{className:"text-sm text-gray-600"},zfe(u.createdAt))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>n(u),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details"},a.createElement(Mr,{className:"h-4 w-4"})),u.status==="PENDING"&&r&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>l(u),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve Request"},a.createElement(En,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>i(u),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject Request"},a.createElement(Gr,{className:"h-4 w-4"})))))))))))}function qv(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function $fe({isOpen:e,onClose:t,onSubmit:r,request:n,isLoading:l=!1,serverError:i=null,successData:u=null}){const[g,h]=w.useState({adminNotes:"",sendWhatsApp:!0});w.useEffect(()=>{e&&h({adminNotes:"",sendWhatsApp:!0})},[e]);const p=y=>{y.preventDefault(),r({adminNotes:g.adminNotes.trim()||void 0,sendWhatsApp:g.sendWhatsApp})};return n?u?a.createElement(jt,{isOpen:e,onClose:t,title:"Request Approved",size:"md"},a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},a.createElement(js,{className:"h-8 w-8 text-green-600"})),a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Approved!"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Payment link has been generated and sent.")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-sm text-gray-500"},"Order ID:"),a.createElement("span",{className:"text-sm font-mono font-medium"},u.serviceOrder?.orderId)),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-sm text-gray-500"},"Amount:"),a.createElement("span",{className:"text-sm font-medium"},qv(u.serviceOrder?.totalAmount||n.totalAmount)))),u.paymentLink&&a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Payment Link"),a.createElement("div",{className:"flex gap-2"},a.createElement("input",{type:"text",value:u.paymentLink,readOnly:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm"}),a.createElement("button",{onClick:()=>navigator.clipboard.writeText(u.paymentLink),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 text-sm"},"Copy"))),a.createElement("div",{className:"flex justify-end pt-4"},a.createElement("button",{onClick:t,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"},"Close")))):a.createElement(jt,{isOpen:e,onClose:t,title:"Approve Service Request",size:"md"},a.createElement("form",{onSubmit:p,className:"space-y-6"},i&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Xt,{className:"h-5 w-5 flex-shrink-0"}),a.createElement("p",null,i)),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"flex-1"},a.createElement("p",{className:"font-medium text-gray-900"},n.name||"N/A"),a.createElement("p",{className:"text-sm text-gray-500"},n.phone)),a.createElement("div",{className:"flex items-center gap-1"},n.userExists?a.createElement(a.Fragment,null,a.createElement(Nd,{className:"h-4 w-4 text-green-500"}),a.createElement("span",{className:"text-xs text-green-600"},"Existing")):a.createElement(a.Fragment,null,a.createElement(Mf,{className:"h-4 w-4 text-amber-500"}),a.createElement("span",{className:"text-xs text-amber-600"},"New")))),a.createElement("div",{className:"border-t border-gray-200 pt-3"},a.createElement("p",{className:"text-sm text-gray-500 mb-2 flex items-center gap-1"},a.createElement(wd,{className:"h-4 w-4"}),"Services"),a.createElement("div",{className:"space-y-1"},n.services?.map((y,v)=>a.createElement("div",{key:v,className:"flex items-center justify-between text-sm"},a.createElement("span",{className:"text-gray-700"},y.serviceName||y.serviceId?.name),a.createElement("span",{className:"text-gray-900 font-medium"},qv(y.price))))),a.createElement("div",{className:"border-t border-gray-200 pt-2 mt-2 flex items-center justify-between"},a.createElement("span",{className:"font-medium text-gray-700"},"Total"),a.createElement("span",{className:"font-bold text-gray-900"},qv(n.totalAmount))))),n.userNote&&a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"User Note"),a.createElement("p",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg border border-blue-100"},n.userNote)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Admin Notes"),a.createElement("textarea",{value:g.adminNotes,onChange:y=>h({...g,adminNotes:y.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none",placeholder:"Optional notes for internal reference"})),a.createElement("label",{className:"flex items-center gap-3 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:g.sendWhatsApp,onChange:y=>h({...g,sendWhatsApp:y.target.checked}),className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),a.createElement("div",null,a.createElement("span",{className:"text-sm font-medium text-gray-900"},"Send via WhatsApp"),a.createElement("p",{className:"text-xs text-gray-500"},"Send payment link to customer's WhatsApp"))),a.createElement("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:t,disabled:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center gap-2"},l?a.createElement(a.Fragment,null,a.createElement(ct,{className:"h-4 w-4 animate-spin"}),"Approving..."):"Approve & Generate Link")))):null}function qD(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function qfe({isOpen:e,onClose:t,onSubmit:r,request:n,isLoading:l=!1,serverError:i=null}){const[u,g]=w.useState({reason:"",adminNotes:""}),[h,p]=w.useState({});w.useEffect(()=>{e&&(g({reason:"",adminNotes:""}),p({}))},[e]);const y=()=>{const C={};return u.reason.trim()||(C.reason="Please provide a reason for rejection"),p(C),Object.keys(C).length===0},v=C=>{C.preventDefault(),y()&&r({reason:u.reason.trim(),adminNotes:u.adminNotes.trim()||void 0})};return n?a.createElement(jt,{isOpen:e,onClose:t,title:"Reject Service Request",size:"md"},a.createElement("form",{onSubmit:v,className:"space-y-6"},i&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Xt,{className:"h-5 w-5 flex-shrink-0"}),a.createElement("p",null,i)),a.createElement("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg"},a.createElement(Sn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),a.createElement("div",null,a.createElement("p",{className:"font-medium text-red-800"},"Rejecting this request"),a.createElement("p",{className:"text-sm text-red-600 mt-1"},"This action cannot be undone. The user will not be able to proceed with this request."))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"flex-1"},a.createElement("p",{className:"font-medium text-gray-900"},n.name||"N/A"),a.createElement("p",{className:"text-sm text-gray-500"},n.phone))),a.createElement("div",{className:"border-t border-gray-200 pt-3"},a.createElement("p",{className:"text-sm text-gray-500 mb-2 flex items-center gap-1"},a.createElement(wd,{className:"h-4 w-4"}),"Requested Services"),a.createElement("div",{className:"space-y-1"},n.services?.map((C,T)=>a.createElement("div",{key:T,className:"flex items-center justify-between text-sm"},a.createElement("span",{className:"text-gray-700"},C.serviceName||C.serviceId?.name),a.createElement("span",{className:"text-gray-900 font-medium"},qD(C.price))))),a.createElement("div",{className:"border-t border-gray-200 pt-2 mt-2 flex items-center justify-between"},a.createElement("span",{className:"font-medium text-gray-700"},"Total"),a.createElement("span",{className:"font-bold text-gray-900"},qD(n.totalAmount))))),n.userNote&&a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"User Note"),a.createElement("p",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg border border-blue-100"},n.userNote)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Rejection Reason ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("textarea",{value:u.reason,onChange:C=>{g({...u,reason:C.target.value}),h.reason&&p({...h,reason:null})},rows:3,className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none ${h.reason?"border-red-500":"border-gray-300"}`,placeholder:"Explain why this request is being rejected"}),h.reason&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},h.reason),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"This reason may be shared with the user")),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Admin Notes"),a.createElement("textarea",{value:u.adminNotes,onChange:C=>g({...u,adminNotes:C.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none",placeholder:"Optional internal notes (not shared with user)"})),a.createElement("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:t,disabled:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2"},l?a.createElement(a.Fragment,null,a.createElement(ct,{className:"h-4 w-4 animate-spin"}),"Rejecting..."):"Reject Request")))):null}function GD(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function Gv(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function Gfe(e){const t={PENDING:"bg-yellow-100 text-yellow-700",APPROVED:"bg-green-100 text-green-700",REJECTED:"bg-red-100 text-red-700"};return t[e]||t.PENDING}function Yfe({isOpen:e,onClose:t,request:r}){return r?a.createElement(jt,{isOpen:e,onClose:t,title:"Request Details",size:"xl"},a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex items-start justify-between"},a.createElement("div",null,a.createElement("div",{className:"flex items-center gap-3"},a.createElement("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Gfe(r.status)}`},r.status),r.userExists?a.createElement("span",{className:"flex items-center gap-1 text-sm text-green-600"},a.createElement(Nd,{className:"h-4 w-4"}),"Existing User"):a.createElement("span",{className:"flex items-center gap-1 text-sm text-amber-600"},a.createElement(Mf,{className:"h-4 w-4"}),"New User"))),a.createElement("div",{className:"text-right"},a.createElement("p",{className:"text-2xl font-bold text-gray-900"},GD(r.totalAmount)))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},a.createElement("h3",{className:"text-sm font-medium text-gray-700 mb-3"},"Customer Information"),a.createElement("div",{className:"grid grid-cols-2 gap-4"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement(ds,{className:"h-5 w-5 text-gray-400"}),a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-500"},"Name"),a.createElement("p",{className:"font-medium text-gray-900"},r.name||"N/A"))),a.createElement("div",{className:"flex items-center gap-3"},a.createElement(vi,{className:"h-5 w-5 text-gray-400"}),a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-500"},"Phone"),a.createElement("p",{className:"font-medium text-gray-900"},r.phone))),r.email&&a.createElement("div",{className:"flex items-center gap-3 col-span-2"},a.createElement($2,{className:"h-5 w-5 text-gray-400"}),a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-500"},"Email"),a.createElement("p",{className:"font-medium text-gray-900"},r.email))))),a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},a.createElement(wd,{className:"h-4 w-4"}),"Requested Services (",r.services?.length||0,")"),a.createElement("div",{className:"space-y-2"},r.services?.map((n,l)=>a.createElement("div",{key:l,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900"},n.serviceName||n.serviceId?.name),n.serviceId?.durationInDays&&a.createElement("p",{className:"text-sm text-gray-500"},n.serviceId.durationInDays," days")),a.createElement("p",{className:"font-semibold text-gray-900"},GD(n.price)))))),r.userNote&&a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2"},a.createElement(H_,{className:"h-4 w-4"}),"User Note"),a.createElement("p",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg border border-blue-100"},r.userNote)),r.status==="REJECTED"&&a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4"},a.createElement("h3",{className:"text-sm font-medium text-red-800 mb-2 flex items-center gap-2"},a.createElement(Xt,{className:"h-4 w-4"}),"Rejection Details"),r.rejectionReason&&a.createElement("p",{className:"text-sm text-red-700"},r.rejectionReason),r.reviewedBy&&a.createElement("p",{className:"text-xs text-red-600 mt-2"},"Rejected by: ",r.reviewedBy.name||r.reviewedBy.username),r.reviewedAt&&a.createElement("p",{className:"text-xs text-red-600"},"Rejected at: ",Gv(r.reviewedAt)))),r.status==="APPROVED"&&r.serviceOrderId&&a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4"},a.createElement("h3",{className:"text-sm font-medium text-green-800 mb-2"},"Approved"),a.createElement("p",{className:"text-sm text-green-700"},"Order ID: ",r.serviceOrderId.orderId||r.serviceOrderId),r.reviewedBy&&a.createElement("p",{className:"text-xs text-green-600 mt-2"},"Approved by: ",r.reviewedBy.name||r.reviewedBy.username),r.reviewedAt&&a.createElement("p",{className:"text-xs text-green-600"},"Approved at: ",Gv(r.reviewedAt)))),a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-500"},a.createElement(ea,{className:"h-4 w-4"}),a.createElement("span",null,"Requested:"),a.createElement("span",{className:"text-gray-900"},Gv(r.createdAt)))),a.createElement("div",{className:"flex justify-end pt-4 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"},"Close")))):null}function Xfe(){const{hasRole:e}=hn(),t=e(["SUPER_ADMIN","ADMIN"]),{requests:r,pendingCount:n,pagination:l,filters:i,isLoading:u,error:g,getRequestById:h,approveRequest:p,rejectRequest:y,updateFilters:v,updateSearch:C,resetFilters:T,changePage:D,clearError:P}=Ffe(),[k,R]=w.useState(!1),[B,M]=w.useState(!1),[G,F]=w.useState(!1),[U,L]=w.useState(null),[V,j]=w.useState(!1),[Y,H]=w.useState(null),[q,le]=w.useState(null),ue=w.useCallback(async ee=>{const K=await h(ee._id);K.success&&(L(K.data),R(!0))},[h]),re=w.useCallback(ee=>{L(ee),H(null),le(null),M(!0)},[]),J=w.useCallback(ee=>{L(ee),H(null),F(!0)},[]),ae=w.useCallback(async ee=>{if(U){j(!0),H(null);try{const K=await p(U._id,ee);K.success?le(K.data):H(K.error)}finally{j(!1)}}},[U,p]),pe=w.useCallback(async ee=>{if(U){j(!0),H(null);try{const K=await y(U._id,ee);K.success?(F(!1),L(null)):H(K.error)}finally{j(!1)}}},[U,y]),xe=w.useCallback(()=>{M(!1),L(null),H(null),le(null)},[]);return a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Service Requests"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Review and manage service requests from users")),n>0&&a.createElement("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-100 text-amber-800 rounded-lg"},a.createElement("span",{className:"font-bold text-lg"},n),a.createElement("span",{className:"text-sm font-medium"},"pending requests"))),g&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Xt,{className:"h-5 w-5 flex-shrink-0"}),a.createElement("p",{className:"flex-1"},g),a.createElement("button",{onClick:P,className:"text-red-500 hover:text-red-700 font-medium"},"Dismiss")),a.createElement(Ufe,{filters:i,onFilterChange:v,onSearchChange:C,onReset:T,pendingCount:n,disabled:u}),a.createElement(Hfe,{requests:r,isLoading:u,canReview:t,onView:ue,onApprove:re,onReject:J}),l.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Rr,{currentPage:l.currentPage,totalPages:l.totalPages,totalItems:l.totalCount,itemsPerPage:l.limit,onPageChange:D,itemLabel:"requests"})),a.createElement(Yfe,{isOpen:k,onClose:()=>{R(!1),L(null)},request:U}),a.createElement($fe,{isOpen:B,onClose:xe,onSubmit:ae,request:U,isLoading:V,serverError:Y,successData:q}),a.createElement(qfe,{isOpen:G,onClose:()=>{F(!1),L(null),H(null)},onSubmit:pe,request:U,isLoading:V,serverError:Y}))}const Lu={BASE:"/web/user-subscriptions",CHECK_STATUS:"/web/user-subscriptions/check-status"},Wfe=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([r,n])=>{n!=null&&n!==""&&t.append(r,n)}),t.toString()},Hm={getAll:async(e={})=>{const t=Wfe(e),r=t?`${Lu.BASE}?${t}`:Lu.BASE;console.log("[UserSubscriptionService] Fetching subscriptions with params:",e);const n=await Pe(ke.get(r));return n.success?console.log("[UserSubscriptionService] Fetched subscriptions:",n.data.subscriptions?.length):console.error("[UserSubscriptionService] Failed to fetch subscriptions:",n.message),n},getById:async e=>{console.log("[UserSubscriptionService] Fetching subscription:",e);const t=await Pe(ke.get(`${Lu.BASE}/${e}`));return t.success?console.log("[UserSubscriptionService] Fetched subscription:",t.data.subscription?._id):console.error("[UserSubscriptionService] Failed to fetch subscription:",t.message),t},checkStatus:async e=>{console.log("[UserSubscriptionService] Checking status for:",e.phone);const t=await Pe(ke.post(Lu.CHECK_STATUS,e));return t.success?console.log("[UserSubscriptionService] Status checked:",t.data.hasActiveSubscription):console.error("[UserSubscriptionService] Failed to check status:",t.message),t},cancel:async(e,t)=>{console.log("[UserSubscriptionService] Cancelling subscription:",e);const r=await Pe(ke.post(`${Lu.BASE}/${e}/cancel`,t));return r.success?console.log("[UserSubscriptionService] Subscription cancelled successfully"):console.error("[UserSubscriptionService] Failed to cancel subscription:",r.message),r},updateNotes:async(e,t)=>{console.log("[UserSubscriptionService] Updating notes for subscription:",e);const r=await Pe(ke.patch(`${Lu.BASE}/${e}/notes`,t));return r.success?console.log("[UserSubscriptionService] Notes updated successfully"):console.error("[UserSubscriptionService] Failed to update notes:",r.message),r}},Kfe=["ACTIVE","EXPIRED","CANCELLED","REFUNDED"],Zfe=[{value:"createdAt",label:"Created Date"},{value:"startDate",label:"Start Date"},{value:"endDate",label:"End Date"},{value:"amountPaid",label:"Amount"}],YD={search:"",status:"",serviceId:"",phone:"",sortBy:"createdAt",sortOrder:"desc"};function Qfe(e={}){const[t,r]=w.useState([]),[n,l]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[i,u]=w.useState({...YD,...e}),[g,h]=w.useState(!1),[p,y]=w.useState(null),v=w.useRef(null),C=w.useCallback(async(L=n.currentPage)=>{h(!0),y(null);try{const V={page:L,limit:n.limit,sortBy:i.sortBy,sortOrder:i.sortOrder,...i.search&&{search:i.search},...i.status&&{status:i.status},...i.serviceId&&{serviceId:i.serviceId},...i.phone&&{phone:i.phone}},j=await Hm.getAll(V);j.success?(r(j.data.subscriptions||[]),l(j.data.pagination||n)):(y(j.message),r([]))}catch{y("Failed to fetch subscriptions"),r([])}finally{h(!1)}},[i,n.limit,n.currentPage]),T=w.useCallback(async L=>{try{const V=await Hm.getById(L);return V.success?{success:!0,data:V.data.subscription}:{success:!1,error:V.message}}catch{return{success:!1,error:"Failed to fetch subscription details"}}},[]),D=w.useCallback(async L=>{try{const V=await Hm.checkStatus(L);return V.success?{success:!0,data:V.data}:{success:!1,error:V.message}}catch{return{success:!1,error:"Failed to check subscription status"}}},[]),P=w.useCallback(async(L,V)=>{h(!0),y(null);try{const j=await Hm.cancel(L,V);return j.success?(r(Y=>Y.map(H=>H._id===L?{...H,status:"CANCELLED",...j.data.subscription}:H)),{success:!0,data:j.data}):{success:!1,error:j.message}}catch{return{success:!1,error:"Failed to cancel subscription"}}finally{h(!1)}},[]),k=w.useCallback(async(L,V)=>{h(!0),y(null);try{const j=await Hm.updateNotes(L,V);return j.success?(r(Y=>Y.map(H=>H._id===L?{...H,...j.data.subscription}:H)),{success:!0,data:j.data}):{success:!1,error:j.message}}catch{return{success:!1,error:"Failed to update notes"}}finally{h(!1)}},[]),R=w.useCallback(L=>{u(V=>({...V,...L}))},[]),B=w.useCallback(L=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{u(V=>({...V,search:L}))},300)},[]),M=w.useCallback(()=>{u({...YD,...e})},[e]),G=w.useCallback(L=>{C(L)},[C]),F=w.useCallback(L=>{l(V=>({...V,limit:L}))},[]),U=w.useCallback(()=>{y(null)},[]);return w.useEffect(()=>{C(1)},[i]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{subscriptions:t,pagination:n,filters:i,isLoading:g,error:p,fetchSubscriptions:C,getSubscriptionById:T,checkStatus:D,cancelSubscription:P,updateNotes:k,updateFilters:R,updateSearch:B,resetFilters:M,changePage:G,changeLimit:F,clearError:U}}function Jfe({filters:e,onFilterChange:t,onSearchChange:r,onReset:n,disabled:l=!1}){const[i,u]=w.useState(e.search||""),[g,h]=w.useState([]);w.useEffect(()=>{(async()=>{try{const D=await Nc.getAll({limit:100});D.success&&h(D.data.services||[])}catch(D){console.error("Failed to fetch services:",D)}})()},[]);const p=T=>{const D=T.target.value;u(D),r(D)},y=(T,D)=>{t({[T]:D})},v=()=>{u(""),n()},C=e.status||e.serviceId||e.phone;return a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4"},a.createElement("div",{className:"flex flex-wrap items-center gap-3"},a.createElement("div",{className:"relative flex-1 min-w-[240px]"},a.createElement(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.createElement("input",{type:"text",placeholder:"Search by phone...",value:i,onChange:p,disabled:l,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),i&&a.createElement("button",{onClick:()=>{u(""),r("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},a.createElement(Gr,{className:"h-4 w-4"}))),a.createElement("select",{value:e.status,onChange:T=>y("status",T.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Status"),Kfe.map(T=>a.createElement("option",{key:T,value:T},T.charAt(0)+T.slice(1).toLowerCase()))),a.createElement("select",{value:e.serviceId,onChange:T=>y("serviceId",T.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Services"),g.map(T=>a.createElement("option",{key:T._id,value:T._id},T.name))),a.createElement("select",{value:e.sortBy,onChange:T=>y("sortBy",T.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},Zfe.map(T=>a.createElement("option",{key:T.value,value:T.value},"Sort: ",T.label))),a.createElement("select",{value:e.sortOrder,onChange:T=>y("sortOrder",T.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:"desc"},"Newest First"),a.createElement("option",{value:"asc"},"Oldest First")),(C||i)&&a.createElement("button",{onClick:v,disabled:l,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50"},a.createElement(ko,{className:"h-4 w-4"}),"Reset")))}function e0e(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function XD(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function t0e(e){const t={ACTIVE:"bg-green-100 text-green-700",EXPIRED:"bg-gray-100 text-gray-600",CANCELLED:"bg-red-100 text-red-700",REFUNDED:"bg-purple-100 text-purple-700"};return t[e]||t.ACTIVE}function r0e(e){if(!e)return null;const n=new Date(e)-new Date;return Math.ceil(n/(1e3*60*60*24))}function a0e({subscriptions:e,isLoading:t,canCancel:r,canEditNotes:n,onView:l,onCancel:i,onEditNotes:u}){return t?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8"},a.createElement("div",{className:"flex items-center justify-center"},a.createElement(ct,{className:"h-8 w-8 animate-spin text-gray-800"}),a.createElement("span",{className:"ml-3 text-gray-600"},"Loading subscriptions..."))):e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8"},a.createElement("div",{className:"text-center text-gray-500"},a.createElement("p",{className:"text-lg font-medium"},"No subscriptions found"),a.createElement("p",{className:"text-sm mt-1"},"User subscriptions will appear here after successful payments."))):a.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"User"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Service"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Amount"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Duration"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Valid Until"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,e.map(g=>{const h=g.status==="ACTIVE"?r0e(g.endDate):null;return a.createElement("tr",{key:g._id,className:`border-b border-gray-100 hover:bg-gray-50 ${g.status==="CANCELLED"?"bg-red-50/30":""}`},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"min-w-0"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},g.userId?.name||"N/A"),a.createElement("p",{className:"text-sm text-gray-500"},g.phone),g.userId?.email&&a.createElement("p",{className:"text-xs text-gray-400 truncate"},g.userId.email))),a.createElement("td",{className:"px-6 py-4"},a.createElement("p",{className:"font-medium text-gray-900 truncate max-w-[150px]"},g.serviceId?.name||"N/A")),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"font-medium text-gray-900"},e0e(g.amountPaid))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"text-sm text-gray-600"},g.durationInDays," days")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"space-y-1"},a.createElement("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${t0e(g.status)}`},g.status),h!==null&&h>0&&a.createElement("p",{className:"text-xs text-gray-500"},h," days left"),h!==null&&h<=0&&g.status==="ACTIVE"&&a.createElement("p",{className:"text-xs text-amber-600"},"Expiring soon"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"text-sm"},a.createElement("p",{className:"text-gray-900"},XD(g.endDate)),a.createElement("p",{className:"text-gray-500 text-xs"},"From ",XD(g.startDate)))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>l(g),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details"},a.createElement(Mr,{className:"h-4 w-4"})),n&&a.createElement("button",{onClick:()=>u(g),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit Notes"},a.createElement(cn,{className:"h-4 w-4"})),g.status==="ACTIVE"&&r&&a.createElement("button",{onClick:()=>i(g),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Cancel Subscription"},a.createElement(Sn,{className:"h-4 w-4"})))))})))))}function n0e(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function s0e(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function l0e({isOpen:e,onClose:t,onSubmit:r,subscription:n,isLoading:l=!1,serverError:i=null}){const[u,g]=w.useState(""),[h,p]=w.useState(null);w.useEffect(()=>{e&&(g(""),p(null))},[e]);const y=v=>{if(v.preventDefault(),!u.trim()){p("Please provide a reason for cancellation");return}r({reason:u.trim()})};return n?a.createElement(jt,{isOpen:e,onClose:t,title:"Cancel Subscription",size:"md"},a.createElement("form",{onSubmit:y,className:"space-y-6"},i&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Xt,{className:"h-5 w-5 flex-shrink-0"}),a.createElement("p",null,i)),a.createElement("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg"},a.createElement(Sn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),a.createElement("div",null,a.createElement("p",{className:"font-medium text-red-800"},"Cancel this subscription?"),a.createElement("p",{className:"text-sm text-red-600 mt-1"},"This action will immediately end the user's access to this service."))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement(ds,{className:"h-5 w-5 text-gray-400"}),a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900"},n.userId?.name||"N/A"),a.createElement("p",{className:"text-sm text-gray-500"},n.phone))),a.createElement("div",{className:"border-t border-gray-200 pt-3 flex items-center gap-3"},a.createElement(wd,{className:"h-5 w-5 text-gray-400"}),a.createElement("div",{className:"flex-1"},a.createElement("p",{className:"font-medium text-gray-900"},n.serviceId?.name||"N/A"),a.createElement("p",{className:"text-sm text-gray-500"},"Valid until ",s0e(n.endDate))),a.createElement("p",{className:"font-semibold text-gray-900"},n0e(n.amountPaid)))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Cancellation Reason ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("textarea",{value:u,onChange:v=>{g(v.target.value),h&&p(null)},rows:3,className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none ${h?"border-red-500":"border-gray-300"}`,placeholder:"Enter the reason for cancellation"}),h&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},h)),a.createElement("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:t,disabled:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Keep Active"),a.createElement("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2"},l?a.createElement(a.Fragment,null,a.createElement(ct,{className:"h-4 w-4 animate-spin"}),"Cancelling..."):"Cancel Subscription")))):null}function i0e({isOpen:e,onClose:t,onSubmit:r,subscription:n,isLoading:l=!1,serverError:i=null}){const[u,g]=w.useState("");w.useEffect(()=>{e&&n&&g(n.adminNotes||"")},[e,n]);const h=p=>{p.preventDefault(),r({adminNotes:u.trim()})};return n?a.createElement(jt,{isOpen:e,onClose:t,title:"Edit Admin Notes",size:"md"},a.createElement("form",{onSubmit:h,className:"space-y-6"},i&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Xt,{className:"h-5 w-5 flex-shrink-0"}),a.createElement("p",null,i)),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900"},n.userId?.name||n.phone),a.createElement("p",{className:"text-sm text-gray-500"},n.serviceId?.name||"N/A")),a.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.status==="ACTIVE"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},n.status))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Admin Notes"),a.createElement("textarea",{value:u,onChange:p=>g(p.target.value),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none",placeholder:"Add internal notes about this subscription..."}),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"These notes are only visible to admins")),a.createElement("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:t,disabled:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center gap-2"},l?a.createElement(a.Fragment,null,a.createElement(ct,{className:"h-4 w-4 animate-spin"}),"Saving..."):"Save Notes")))):null}function WD(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function $m(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function o0e(e){const t={ACTIVE:"bg-green-100 text-green-700",EXPIRED:"bg-gray-100 text-gray-600",CANCELLED:"bg-red-100 text-red-700",REFUNDED:"bg-purple-100 text-purple-700"};return t[e]||t.ACTIVE}function c0e(e){if(!e)return null;const n=new Date(e)-new Date;return Math.ceil(n/(1e3*60*60*24))}function u0e({isOpen:e,onClose:t,subscription:r}){if(!r)return null;const n=r.status==="ACTIVE"?c0e(r.endDate):null;return a.createElement(jt,{isOpen:e,onClose:t,title:"Subscription Details",size:"xl"},a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex items-start justify-between"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${o0e(r.status)}`},r.status),n!==null&&n>0&&a.createElement("span",{className:"text-sm text-gray-500"},n," days remaining")),a.createElement("div",{className:"text-right"},a.createElement("p",{className:"text-2xl font-bold text-gray-900"},WD(r.amountPaid)))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},a.createElement("h3",{className:"text-sm font-medium text-gray-700 mb-3"},"User Information"),a.createElement("div",{className:"grid grid-cols-2 gap-4"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement(ds,{className:"h-5 w-5 text-gray-400"}),a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-500"},"Name"),a.createElement("p",{className:"font-medium text-gray-900"},r.userId?.name||"N/A"))),a.createElement("div",{className:"flex items-center gap-3"},a.createElement(vi,{className:"h-5 w-5 text-gray-400"}),a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-500"},"Phone"),a.createElement("p",{className:"font-medium text-gray-900"},r.phone))),r.userId?.email&&a.createElement("div",{className:"flex items-center gap-3 col-span-2"},a.createElement($2,{className:"h-5 w-5 text-gray-400"}),a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-500"},"Email"),a.createElement("p",{className:"font-medium text-gray-900"},r.userId.email))))),a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},a.createElement(wd,{className:"h-4 w-4"}),"Service Details"),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900"},r.serviceId?.name||"N/A"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},r.durationInDays," days subscription")),a.createElement("p",{className:"font-bold text-gray-900"},WD(r.serviceId?.price||r.amountPaid))))),r.serviceOrderId&&a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},a.createElement(Vp,{className:"h-4 w-4"}),"Order Information"),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},a.createElement("div",{className:"grid grid-cols-2 gap-4 text-sm"},a.createElement("div",null,a.createElement("p",{className:"text-gray-500"},"Order ID"),a.createElement("p",{className:"font-mono font-medium text-gray-900"},r.serviceOrderId.orderId||r.serviceOrderId))))),a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},a.createElement(qr,{className:"h-4 w-4"}),"Timeline"),a.createElement("div",{className:"grid grid-cols-2 gap-4 text-sm"},a.createElement("div",null,a.createElement("p",{className:"text-gray-500"},"Start Date"),a.createElement("p",{className:"font-medium text-gray-900"},$m(r.startDate))),a.createElement("div",null,a.createElement("p",{className:"text-gray-500"},"End Date"),a.createElement("p",{className:"font-medium text-gray-900"},$m(r.endDate))),r.activatedAt&&a.createElement("div",null,a.createElement("p",{className:"text-gray-500"},"Activated At"),a.createElement("p",{className:"font-medium text-gray-900"},$m(r.activatedAt))),r.cancelledAt&&a.createElement("div",null,a.createElement("p",{className:"text-gray-500"},"Cancelled At"),a.createElement("p",{className:"font-medium text-red-600"},$m(r.cancelledAt))))),r.status==="CANCELLED"&&r.cancellationReason&&a.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4"},a.createElement("h3",{className:"text-sm font-medium text-red-800 mb-2"},"Cancellation Reason"),a.createElement("p",{className:"text-sm text-red-700"},r.cancellationReason),r.cancelledBy&&a.createElement("p",{className:"text-xs text-red-600 mt-2"},"Cancelled by: ",r.cancelledBy.name||r.cancelledBy.username)),r.adminNotes&&a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2"},a.createElement(Ju,{className:"h-4 w-4"}),"Admin Notes"),a.createElement("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg"},r.adminNotes)),a.createElement("div",{className:"border-t border-gray-200 pt-4"},a.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-500"},a.createElement(ea,{className:"h-4 w-4"}),a.createElement("span",null,"Created:"),a.createElement("span",{className:"text-gray-900"},$m(r.createdAt)))),a.createElement("div",{className:"flex justify-end pt-4 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"},"Close"))))}function d0e(){const{hasRole:e}=hn(),t=e(["SUPER_ADMIN","ADMIN"]),r=e(["SUPER_ADMIN","ADMIN"]),{subscriptions:n,pagination:l,filters:i,isLoading:u,error:g,getSubscriptionById:h,cancelSubscription:p,updateNotes:y,updateFilters:v,updateSearch:C,resetFilters:T,changePage:D,clearError:P}=Qfe(),[k,R]=w.useState(!1),[B,M]=w.useState(!1),[G,F]=w.useState(!1),[U,L]=w.useState(null),[V,j]=w.useState(!1),[Y,H]=w.useState(null),q=w.useCallback(async ae=>{const pe=await h(ae._id);pe.success&&(L(pe.data),R(!0))},[h]),le=w.useCallback(ae=>{L(ae),H(null),M(!0)},[]),ue=w.useCallback(ae=>{L(ae),H(null),F(!0)},[]),re=w.useCallback(async ae=>{if(U){j(!0),H(null);try{const pe=await p(U._id,ae);pe.success?(M(!1),L(null)):H(pe.error)}finally{j(!1)}}},[U,p]),J=w.useCallback(async ae=>{if(U){j(!0),H(null);try{const pe=await y(U._id,ae);pe.success?(F(!1),L(null)):H(pe.error)}finally{j(!1)}}},[U,y]);return a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"User Subscriptions"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"View and manage user service subscriptions"))),g&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Xt,{className:"h-5 w-5 flex-shrink-0"}),a.createElement("p",{className:"flex-1"},g),a.createElement("button",{onClick:P,className:"text-red-500 hover:text-red-700 font-medium"},"Dismiss")),a.createElement(Jfe,{filters:i,onFilterChange:v,onSearchChange:C,onReset:T,disabled:u}),a.createElement(a0e,{subscriptions:n,isLoading:u,canCancel:t,canEditNotes:r,onView:q,onCancel:le,onEditNotes:ue}),l.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Rr,{currentPage:l.currentPage,totalPages:l.totalPages,totalItems:l.totalCount,itemsPerPage:l.limit,onPageChange:D,itemLabel:"subscriptions"})),a.createElement(u0e,{isOpen:k,onClose:()=>{R(!1),L(null)},subscription:U}),a.createElement(l0e,{isOpen:B,onClose:()=>{M(!1),L(null),H(null)},onSubmit:re,subscription:U,isLoading:V,serverError:Y}),a.createElement(i0e,{isOpen:G,onClose:()=>{F(!1),L(null),H(null)},onSubmit:J,subscription:U,isLoading:V,serverError:Y}))}function m0e(){return a.createElement(iF,null,a.createElement(GU,null,a.createElement(FB,null,a.createElement(Nr,{path:"/login",element:a.createElement(XU,null,a.createElement(CV,null))}),a.createElement(Nr,{element:a.createElement(YU,null,a.createElement(SV,null))},a.createElement(Nr,{path:"/dashboard",element:a.createElement(uue,null)}),a.createElement(Nr,{path:"/events",element:a.createElement(Tue,null)}),a.createElement(Nr,{path:"/enrollments",element:a.createElement(Oue,null)}),a.createElement(Nr,{path:"/coupons",element:a.createElement(Due,null)}),a.createElement(Nr,{path:"/users",element:a.createElement(Rue,null)}),a.createElement(Nr,{path:"/admins",element:a.createElement(Wue,null)}),a.createElement(Nr,{path:"/payments",element:a.createElement(Kue,null)}),a.createElement(Nr,{path:"/cash-tickets",element:a.createElement(mde,null)}),a.createElement(Nr,{path:"/vouchers",element:a.createElement(xde,null)}),a.createElement(Nr,{path:"/sessions",element:a.createElement(Dde,null)}),a.createElement(Nr,{path:"/quizes",element:a.createElement(zde,null)}),a.createElement(Nr,{path:"/challenges",element:a.createElement(Wde,null)}),a.createElement(Nr,{path:"/polls",element:a.createElement(sme,null)}),a.createElement(Nr,{path:"/stories",element:a.createElement(Nme,null)}),a.createElement(Nr,{path:"/memberships",element:a.createElement(ofe,null)}),a.createElement(Nr,{path:"/settings",element:a.createElement(ufe,null)}),a.createElement(Nr,{path:"/clubs",element:a.createElement(cfe,null)}),a.createElement(Nr,{path:"/scan-qr",element:a.createElement(Zme,null)}),a.createElement(Nr,{path:"/ticket-reshare",element:a.createElement(afe,null)}),a.createElement(Nr,{path:"/services",element:a.createElement(bfe,null)}),a.createElement(Nr,{path:"/service-orders",element:a.createElement(Mfe,null)}),a.createElement(Nr,{path:"/service-requests",element:a.createElement(Xfe,null)}),a.createElement(Nr,{path:"/user-subscriptions",element:a.createElement(d0e,null)})),a.createElement(Nr,{path:"/",element:a.createElement(Oh,{to:"/dashboard",replace:!0})}),a.createElement(Nr,{path:"*",element:a.createElement(Oh,{to:"/dashboard",replace:!0})}))))}$L.createRoot(document.getElementById("root")).render(a.createElement(w.StrictMode,null,a.createElement(m0e,null)));
