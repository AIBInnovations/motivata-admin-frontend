function yD(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function s(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=s(a);fetch(a.href,l)}})();var Om=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var q1={exports:{}},Oh={};var MA;function cL(){if(MA)return Oh;MA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(n,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:e,type:n,key:u,ref:a!==void 0?a:null,props:l}}return Oh.Fragment=t,Oh.jsx=s,Oh.jsxs=s,Oh}var RA;function uL(){return RA||(RA=1,q1.exports=cL()),q1.exports}var r=uL(),H1={exports:{}},Rt={};var LA;function dL(){if(LA)return Rt;LA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),C=Symbol.iterator;function T(X){return X===null||typeof X!="object"?null:(X=C&&X[C]||X["@@iterator"],typeof X=="function"?X:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,O={};function M(X,re,ge){this.props=X,this.context=re,this.refs=O,this.updater=ge||E}M.prototype.isReactComponent={},M.prototype.setState=function(X,re){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,re,"setState")},M.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function L(){}L.prototype=M.prototype;function P(X,re,ge){this.props=X,this.context=re,this.refs=O,this.updater=ge||E}var H=P.prototype=new L;H.constructor=P,k(H,M.prototype),H.isPureReactComponent=!0;var B=Array.isArray;function F(){}var R={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function U(X,re,ge){var de=ge.ref;return{$$typeof:e,type:X,key:re,ref:de!==void 0?de:null,props:ge}}function Y(X,re){return U(X.type,re,X.props)}function $(X){return typeof X=="object"&&X!==null&&X.$$typeof===e}function G(X){var re={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(ge){return re[ge]})}var ee=/\/+/g;function ce(X,re){return typeof X=="object"&&X!==null&&X.key!=null?G(""+X.key):re.toString(36)}function se(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(F,F):(X.status="pending",X.then(function(re){X.status==="pending"&&(X.status="fulfilled",X.value=re)},function(re){X.status==="pending"&&(X.status="rejected",X.reason=re)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function J(X,re,ge,de,je){var oe=typeof X;(oe==="undefined"||oe==="boolean")&&(X=null);var fe=!1;if(X===null)fe=!0;else switch(oe){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(X.$$typeof){case e:case t:fe=!0;break;case p:return fe=X._init,J(fe(X._payload),re,ge,de,je)}}if(fe)return je=je(X),fe=de===""?"."+ce(X,0):de,B(je)?(ge="",fe!=null&&(ge=fe.replace(ee,"$&/")+"/"),J(je,re,ge,"",function(Xe){return Xe})):je!=null&&($(je)&&(je=Y(je,ge+(je.key==null||X&&X.key===je.key?"":(""+je.key).replace(ee,"$&/")+"/")+fe)),re.push(je)),1;fe=0;var qe=de===""?".":de+":";if(B(X))for(var Ne=0;Ne<X.length;Ne++)de=X[Ne],oe=qe+ce(de,Ne),fe+=J(de,re,ge,oe,je);else if(Ne=T(X),typeof Ne=="function")for(X=Ne.call(X),Ne=0;!(de=X.next()).done;)de=de.value,oe=qe+ce(de,Ne++),fe+=J(de,re,ge,oe,je);else if(oe==="object"){if(typeof X.then=="function")return J(se(X),re,ge,de,je);throw re=String(X),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return fe}function ne(X,re,ge){if(X==null)return X;var de=[],je=0;return J(X,de,"","",function(oe){return re.call(ge,oe,je++)}),de}function pe(X){if(X._status===-1){var re=X._result;re=re(),re.then(function(ge){(X._status===0||X._status===-1)&&(X._status=1,X._result=ge)},function(ge){(X._status===0||X._status===-1)&&(X._status=2,X._result=ge)}),X._status===-1&&(X._status=0,X._result=re)}if(X._status===1)return X._result.default;throw X._result}var be=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},te={map:ne,forEach:function(X,re,ge){ne(X,function(){re.apply(this,arguments)},ge)},count:function(X){var re=0;return ne(X,function(){re++}),re},toArray:function(X){return ne(X,function(re){return re})||[]},only:function(X){if(!$(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return Rt.Activity=v,Rt.Children=te,Rt.Component=M,Rt.Fragment=s,Rt.Profiler=a,Rt.PureComponent=P,Rt.StrictMode=n,Rt.Suspense=m,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(X){return R.H.useMemoCache(X)}},Rt.cache=function(X){return function(){return X.apply(null,arguments)}},Rt.cacheSignal=function(){return null},Rt.cloneElement=function(X,re,ge){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var de=k({},X.props),je=X.key;if(re!=null)for(oe in re.key!==void 0&&(je=""+re.key),re)!z.call(re,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&re.ref===void 0||(de[oe]=re[oe]);var oe=arguments.length-2;if(oe===1)de.children=ge;else if(1<oe){for(var fe=Array(oe),qe=0;qe<oe;qe++)fe[qe]=arguments[qe+2];de.children=fe}return U(X.type,je,de)},Rt.createContext=function(X){return X={$$typeof:u,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:l,_context:X},X},Rt.createElement=function(X,re,ge){var de,je={},oe=null;if(re!=null)for(de in re.key!==void 0&&(oe=""+re.key),re)z.call(re,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(je[de]=re[de]);var fe=arguments.length-2;if(fe===1)je.children=ge;else if(1<fe){for(var qe=Array(fe),Ne=0;Ne<fe;Ne++)qe[Ne]=arguments[Ne+2];je.children=qe}if(X&&X.defaultProps)for(de in fe=X.defaultProps,fe)je[de]===void 0&&(je[de]=fe[de]);return U(X,oe,je)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(X){return{$$typeof:f,render:X}},Rt.isValidElement=$,Rt.lazy=function(X){return{$$typeof:p,_payload:{_status:-1,_result:X},_init:pe}},Rt.memo=function(X,re){return{$$typeof:x,type:X,compare:re===void 0?null:re}},Rt.startTransition=function(X){var re=R.T,ge={};R.T=ge;try{var de=X(),je=R.S;je!==null&&je(ge,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(F,be)}catch(oe){be(oe)}finally{re!==null&&ge.types!==null&&(re.types=ge.types),R.T=re}},Rt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Rt.use=function(X){return R.H.use(X)},Rt.useActionState=function(X,re,ge){return R.H.useActionState(X,re,ge)},Rt.useCallback=function(X,re){return R.H.useCallback(X,re)},Rt.useContext=function(X){return R.H.useContext(X)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(X,re){return R.H.useDeferredValue(X,re)},Rt.useEffect=function(X,re){return R.H.useEffect(X,re)},Rt.useEffectEvent=function(X){return R.H.useEffectEvent(X)},Rt.useId=function(){return R.H.useId()},Rt.useImperativeHandle=function(X,re,ge){return R.H.useImperativeHandle(X,re,ge)},Rt.useInsertionEffect=function(X,re){return R.H.useInsertionEffect(X,re)},Rt.useLayoutEffect=function(X,re){return R.H.useLayoutEffect(X,re)},Rt.useMemo=function(X,re){return R.H.useMemo(X,re)},Rt.useOptimistic=function(X,re){return R.H.useOptimistic(X,re)},Rt.useReducer=function(X,re,ge){return R.H.useReducer(X,re,ge)},Rt.useRef=function(X){return R.H.useRef(X)},Rt.useState=function(X){return R.H.useState(X)},Rt.useSyncExternalStore=function(X,re,ge){return R.H.useSyncExternalStore(X,re,ge)},Rt.useTransition=function(){return R.H.useTransition()},Rt.version="19.2.0",Rt}var BA;function Nd(){return BA||(BA=1,H1.exports=dL()),H1.exports}var w=Nd();const Po=Vi(w),hL=yD({__proto__:null,default:Po},[w]);var G1={exports:{}},Dh={},Y1={exports:{}},X1={};var FA;function fL(){return FA||(FA=1,(function(e){function t(J,ne){var pe=J.length;J.push(ne);e:for(;0<pe;){var be=pe-1>>>1,te=J[be];if(0<a(te,ne))J[be]=ne,J[pe]=te,pe=be;else break e}}function s(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var ne=J[0],pe=J.pop();if(pe!==ne){J[0]=pe;e:for(var be=0,te=J.length,X=te>>>1;be<X;){var re=2*(be+1)-1,ge=J[re],de=re+1,je=J[de];if(0>a(ge,pe))de<te&&0>a(je,ge)?(J[be]=je,J[de]=pe,be=de):(J[be]=ge,J[re]=pe,be=re);else if(de<te&&0>a(je,pe))J[be]=je,J[de]=pe,be=de;else break e}}return ne}function a(J,ne){var pe=J.sortIndex-ne.sortIndex;return pe!==0?pe:J.id-ne.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var m=[],x=[],p=1,v=null,C=3,T=!1,E=!1,k=!1,O=!1,M=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function H(J){for(var ne=s(x);ne!==null;){if(ne.callback===null)n(x);else if(ne.startTime<=J)n(x),ne.sortIndex=ne.expirationTime,t(m,ne);else break;ne=s(x)}}function B(J){if(k=!1,H(J),!E)if(s(m)!==null)E=!0,F||(F=!0,G());else{var ne=s(x);ne!==null&&se(B,ne.startTime-J)}}var F=!1,R=-1,z=5,U=-1;function Y(){return O?!0:!(e.unstable_now()-U<z)}function $(){if(O=!1,F){var J=e.unstable_now();U=J;var ne=!0;try{e:{E=!1,k&&(k=!1,L(R),R=-1),T=!0;var pe=C;try{t:{for(H(J),v=s(m);v!==null&&!(v.expirationTime>J&&Y());){var be=v.callback;if(typeof be=="function"){v.callback=null,C=v.priorityLevel;var te=be(v.expirationTime<=J);if(J=e.unstable_now(),typeof te=="function"){v.callback=te,H(J),ne=!0;break t}v===s(m)&&n(m),H(J)}else n(m);v=s(m)}if(v!==null)ne=!0;else{var X=s(x);X!==null&&se(B,X.startTime-J),ne=!1}}break e}finally{v=null,C=pe,T=!1}ne=void 0}}finally{ne?G():F=!1}}}var G;if(typeof P=="function")G=function(){P($)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ce=ee.port2;ee.port1.onmessage=$,G=function(){ce.postMessage(null)}}else G=function(){M($,0)};function se(J,ne){R=M(function(){J(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_next=function(J){switch(C){case 1:case 2:case 3:var ne=3;break;default:ne=C}var pe=C;C=ne;try{return J()}finally{C=pe}},e.unstable_requestPaint=function(){O=!0},e.unstable_runWithPriority=function(J,ne){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var pe=C;C=J;try{return ne()}finally{C=pe}},e.unstable_scheduleCallback=function(J,ne,pe){var be=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?be+pe:be):pe=be,J){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=pe+te,J={id:p++,callback:ne,priorityLevel:J,startTime:pe,expirationTime:te,sortIndex:-1},pe>be?(J.sortIndex=pe,t(x,J),s(m)===null&&J===s(x)&&(k?(L(R),R=-1):k=!0,se(B,pe-be))):(J.sortIndex=te,t(m,J),E||T||(E=!0,F||(F=!0,G()))),J},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(J){var ne=C;return function(){var pe=C;C=ne;try{return J.apply(this,arguments)}finally{C=pe}}}})(X1)),X1}var UA;function mL(){return UA||(UA=1,Y1.exports=fL()),Y1.exports}var W1={exports:{}},gn={};var zA;function gL(){if(zA)return gn;zA=1;var e=Nd();function t(m){var x="https://react.dev/errors/"+m;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)x+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+m+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var n={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,x,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:x,implementation:p}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,x){if(m==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,gn.createPortal=function(m,x){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(t(299));return l(m,x,null,p)},gn.flushSync=function(m){var x=u.T,p=n.p;try{if(u.T=null,n.p=2,m)return m()}finally{u.T=x,n.p=p,n.d.f()}},gn.preconnect=function(m,x){typeof m=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,n.d.C(m,x))},gn.prefetchDNS=function(m){typeof m=="string"&&n.d.D(m)},gn.preinit=function(m,x){if(typeof m=="string"&&x&&typeof x.as=="string"){var p=x.as,v=f(p,x.crossOrigin),C=typeof x.integrity=="string"?x.integrity:void 0,T=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;p==="style"?n.d.S(m,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:v,integrity:C,fetchPriority:T}):p==="script"&&n.d.X(m,{crossOrigin:v,integrity:C,fetchPriority:T,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},gn.preinitModule=function(m,x){if(typeof m=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var p=f(x.as,x.crossOrigin);n.d.M(m,{crossOrigin:p,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&n.d.M(m)},gn.preload=function(m,x){if(typeof m=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var p=x.as,v=f(p,x.crossOrigin);n.d.L(m,p,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},gn.preloadModule=function(m,x){if(typeof m=="string")if(x){var p=f(x.as,x.crossOrigin);n.d.m(m,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:p,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else n.d.m(m)},gn.requestFormReset=function(m){n.d.r(m)},gn.unstable_batchedUpdates=function(m,x){return m(x)},gn.useFormState=function(m,x,p){return u.H.useFormState(m,x,p)},gn.useFormStatus=function(){return u.H.useHostTransitionStatus()},gn.version="19.2.0",gn}var VA;function bD(){if(VA)return W1.exports;VA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),W1.exports=gL(),W1.exports}var $A;function xL(){if($A)return Dh;$A=1;var e=mL(),t=Nd(),s=bD();function n(i){var c="https://react.dev/errors/"+i;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+i+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var c=i,g=i;if(i.alternate)for(;c.return;)c=c.return;else{i=c;do c=i,(c.flags&4098)!==0&&(g=c.return),i=c.return;while(i)}return c.tag===3?g:null}function u(i){if(i.tag===13){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function f(i){if(i.tag===31){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(n(188))}function x(i){var c=i.alternate;if(!c){if(c=l(i),c===null)throw Error(n(188));return c!==i?null:i}for(var g=i,N=c;;){var A=g.return;if(A===null)break;var _=A.alternate;if(_===null){if(N=A.return,N!==null){g=N;continue}break}if(A.child===_.child){for(_=A.child;_;){if(_===g)return m(A),i;if(_===N)return m(A),c;_=_.sibling}throw Error(n(188))}if(g.return!==N.return)g=A,N=_;else{for(var q=!1,Q=A.child;Q;){if(Q===g){q=!0,g=A,N=_;break}if(Q===N){q=!0,N=A,g=_;break}Q=Q.sibling}if(!q){for(Q=_.child;Q;){if(Q===g){q=!0,g=_,N=A;break}if(Q===N){q=!0,N=_,g=A;break}Q=Q.sibling}if(!q)throw Error(n(189))}}if(g.alternate!==N)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?i:c}function p(i){var c=i.tag;if(c===5||c===26||c===27||c===6)return i;for(i=i.child;i!==null;){if(c=p(i),c!==null)return c;i=i.sibling}return null}var v=Object.assign,C=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),P=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=$&&i[$]||i["@@iterator"],typeof i=="function"?i:null)}var ee=Symbol.for("react.client.reference");function ce(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ee?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case M:return"Profiler";case O:return"StrictMode";case B:return"Suspense";case F:return"SuspenseList";case U:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case E:return"Portal";case P:return i.displayName||"Context";case L:return(i._context.displayName||"Context")+".Consumer";case H:var c=i.render;return i=i.displayName,i||(i=c.displayName||c.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return c=i.displayName||null,c!==null?c:ce(i.type)||"Memo";case z:c=i._payload,i=i._init;try{return ce(i(c))}catch{}}return null}var se=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},be=[],te=-1;function X(i){return{current:i}}function re(i){0>te||(i.current=be[te],be[te]=null,te--)}function ge(i,c){te++,be[te]=i.current,i.current=c}var de=X(null),je=X(null),oe=X(null),fe=X(null);function qe(i,c){switch(ge(oe,c),ge(je,i),ge(de,null),c.nodeType){case 9:case 11:i=(i=c.documentElement)&&(i=i.namespaceURI)?nA(i):0;break;default:if(i=c.tagName,c=c.namespaceURI)c=nA(c),i=aA(c,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}re(de),ge(de,i)}function Ne(){re(de),re(je),re(oe)}function Xe(i){i.memoizedState!==null&&ge(fe,i);var c=de.current,g=aA(c,i.type);c!==g&&(ge(je,i),ge(de,g))}function st(i){je.current===i&&(re(de),re(je)),fe.current===i&&(re(fe),Ch._currentValue=pe)}var Le,we;function Ue(i){if(Le===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);Le=c&&c[1]||"",we=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Le+i+we}var ue=!1;function He(i,c){if(!i||ue)return"";ue=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var N={DetermineComponentFrameRoot:function(){try{if(c){var Ye=function(){throw Error()};if(Object.defineProperty(Ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ye,[])}catch(Be){var _e=Be}Reflect.construct(i,[],Ye)}else{try{Ye.call()}catch(Be){_e=Be}i.call(Ye.prototype)}}else{try{throw Error()}catch(Be){_e=Be}(Ye=i())&&typeof Ye.catch=="function"&&Ye.catch(function(){})}}catch(Be){if(Be&&_e&&typeof Be.stack=="string")return[Be.stack,_e.stack]}return[null,null]}};N.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(N.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(N.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=N.DetermineComponentFrameRoot(),q=_[0],Q=_[1];if(q&&Q){var he=q.split(`
`),ke=Q.split(`
`);for(A=N=0;N<he.length&&!he[N].includes("DetermineComponentFrameRoot");)N++;for(;A<ke.length&&!ke[A].includes("DetermineComponentFrameRoot");)A++;if(N===he.length||A===ke.length)for(N=he.length-1,A=ke.length-1;1<=N&&0<=A&&he[N]!==ke[A];)A--;for(;1<=N&&0<=A;N--,A--)if(he[N]!==ke[A]){if(N!==1||A!==1)do if(N--,A--,0>A||he[N]!==ke[A]){var $e=`
`+he[N].replace(" at new "," at ");return i.displayName&&$e.includes("<anonymous>")&&($e=$e.replace("<anonymous>",i.displayName)),$e}while(1<=N&&0<=A);break}}}finally{ue=!1,Error.prepareStackTrace=g}return(g=i?i.displayName||i.name:"")?Ue(g):""}function Se(i,c){switch(i.tag){case 26:case 27:case 5:return Ue(i.type);case 16:return Ue("Lazy");case 13:return i.child!==c&&c!==null?Ue("Suspense Fallback"):Ue("Suspense");case 19:return Ue("SuspenseList");case 0:case 15:return He(i.type,!1);case 11:return He(i.type.render,!1);case 1:return He(i.type,!0);case 31:return Ue("Activity");default:return""}}function tt(i){try{var c="",g=null;do c+=Se(i,g),g=i,i=i.return;while(i);return c}catch(N){return`
Error generating stack: `+N.message+`
`+N.stack}}var lt=Object.prototype.hasOwnProperty,pt=e.unstable_scheduleCallback,We=e.unstable_cancelCallback,at=e.unstable_shouldYield,Fe=e.unstable_requestPaint,ft=e.unstable_now,Gt=e.unstable_getCurrentPriorityLevel,rr=e.unstable_ImmediatePriority,mr=e.unstable_UserBlockingPriority,ct=e.unstable_NormalPriority,Et=e.unstable_LowPriority,_r=e.unstable_IdlePriority,Sr=e.log,cs=e.unstable_setDisableYieldValue,_t=null,ve=null;function Je(i){if(typeof Sr=="function"&&cs(i),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(_t,i)}catch{}}var nt=Math.clz32?Math.clz32:Xs,At=Math.log,gr=Math.LN2;function Xs(i){return i>>>=0,i===0?32:31-(At(i)/gr|0)|0}var as=256,bt=262144,le=4194304;function ut(i){var c=i&42;if(c!==0)return c;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Tt(i,c,g){var N=i.pendingLanes;if(N===0)return 0;var A=0,_=i.suspendedLanes,q=i.pingedLanes;i=i.warmLanes;var Q=N&134217727;return Q!==0?(N=Q&~_,N!==0?A=ut(N):(q&=Q,q!==0?A=ut(q):g||(g=Q&~i,g!==0&&(A=ut(g))))):(Q=N&~_,Q!==0?A=ut(Q):q!==0?A=ut(q):g||(g=N&~i,g!==0&&(A=ut(g)))),A===0?0:c!==0&&c!==A&&(c&_)===0&&(_=A&-A,g=c&-c,_>=g||_===32&&(g&4194048)!==0)?c:A}function us(i,c){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&c)===0}function ze(i,c){switch(i){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jt(){var i=le;return le<<=1,(le&62914560)===0&&(le=4194304),i}function nn(i){for(var c=[],g=0;31>g;g++)c.push(i);return c}function ba(i,c){i.pendingLanes|=c,c!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function On(i,c,g,N,A,_){var q=i.pendingLanes;i.pendingLanes=g,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=g,i.entangledLanes&=g,i.errorRecoveryDisabledLanes&=g,i.shellSuspendCounter=0;var Q=i.entanglements,he=i.expirationTimes,ke=i.hiddenUpdates;for(g=q&~g;0<g;){var $e=31-nt(g),Ye=1<<$e;Q[$e]=0,he[$e]=-1;var _e=ke[$e];if(_e!==null)for(ke[$e]=null,$e=0;$e<_e.length;$e++){var Be=_e[$e];Be!==null&&(Be.lane&=-536870913)}g&=~Ye}N!==0&&Kc(i,N,0),_!==0&&A===0&&i.tag!==0&&(i.suspendedLanes|=_&~(q&~c))}function Kc(i,c,g){i.pendingLanes|=c,i.suspendedLanes&=~c;var N=31-nt(c);i.entangledLanes|=c,i.entanglements[N]=i.entanglements[N]|1073741824|g&261930}function Dn(i,c){var g=i.entangledLanes|=c;for(i=i.entanglements;g;){var N=31-nt(g),A=1<<N;A&c|i[N]&c&&(i[N]|=c),g&=~A}}function $i(i,c){var g=c&-c;return g=(g&42)!==0?1:Cs(g),(g&(i.suspendedLanes|c))!==0?0:g}function Cs(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Wn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ws(){var i=ne.p;return i!==0?i:(i=window.event,i===void 0?32:TA(i.type))}function ot(i,c){var g=ne.p;try{return ne.p=i,c()}finally{ne.p=g}}var Ks=Math.random().toString(36).slice(2),Zr="__reactFiber$"+Ks,sr="__reactProps$"+Ks,vn="__reactContainer$"+Ks,bi="__reactEvents$"+Ks,Ll="__reactListeners$"+Ks,kn="__reactHandles$"+Ks,Zc="__reactResources$"+Ks,vi="__reactMarker$"+Ks;function an(i){delete i[Zr],delete i[sr],delete i[bi],delete i[Ll],delete i[kn]}function $r(i){var c=i[Zr];if(c)return c;for(var g=i.parentNode;g;){if(c=g[vn]||g[Zr]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(i=hA(i);i!==null;){if(g=i[Zr])return g;i=hA(i)}return c}i=g,g=i.parentNode}return null}function er(i){if(i=i[Zr]||i[vn]){var c=i.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return i}return null}function Ve(i){var c=i.tag;if(c===5||c===26||c===27||c===6)return i.stateNode;throw Error(n(33))}function xt(i){var c=i[Zc];return c||(c=i[Zc]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Ur(i){i[vi]=!0}var Ke=new Set,m0={};function xr(i,c){Kn(i,c),Kn(i+"Capture",c)}function Kn(i,c){for(m0[i]=c,i=0;i<c.length;i++)Ke.add(c[i])}var Kp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nr={},tr={};function Yt(i){return lt.call(tr,i)?!0:lt.call(nr,i)?!1:Kp.test(i)?tr[i]=!0:(nr[i]=!0,!1)}function Bl(i,c,g){if(Yt(c))if(g===null)i.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":i.removeAttribute(c);return;case"boolean":var N=c.toLowerCase().slice(0,5);if(N!=="data-"&&N!=="aria-"){i.removeAttribute(c);return}}i.setAttribute(c,""+g)}}function Fl(i,c,g){if(g===null)i.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttribute(c,""+g)}}function Zn(i,c,g,N){if(N===null)i.removeAttribute(g);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(g);return}i.setAttributeNS(c,g,""+N)}}function ir(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Xa(i){var c=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Zp(i,c,g){var N=Object.getOwnPropertyDescriptor(i.constructor.prototype,c);if(!i.hasOwnProperty(c)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var A=N.get,_=N.set;return Object.defineProperty(i,c,{configurable:!0,get:function(){return A.call(this)},set:function(q){g=""+q,_.call(this,q)}}),Object.defineProperty(i,c,{enumerable:N.enumerable}),{getValue:function(){return g},setValue:function(q){g=""+q},stopTracking:function(){i._valueTracker=null,delete i[c]}}}}function qr(i){if(!i._valueTracker){var c=Xa(i)?"checked":"value";i._valueTracker=Zp(i,c,""+i[c])}}function Wa(i){if(!i)return!1;var c=i._valueTracker;if(!c)return!0;var g=c.getValue(),N="";return i&&(N=Xa(i)?i.checked?"true":"false":i.value),i=N,i!==g?(c.setValue(i),!0):!1}function Qc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ul=/[\n"\\]/g;function Ht(i){return i.replace(Ul,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function As(i,c,g,N,A,_,q,Q){i.name="",q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?i.type=q:i.removeAttribute("type"),c!=null?q==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+ir(c)):i.value!==""+ir(c)&&(i.value=""+ir(c)):q!=="submit"&&q!=="reset"||i.removeAttribute("value"),c!=null?ae(i,q,ir(c)):g!=null?ae(i,q,ir(g)):N!=null&&i.removeAttribute("value"),A==null&&_!=null&&(i.defaultChecked=!!_),A!=null&&(i.checked=A&&typeof A!="function"&&typeof A!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?i.name=""+ir(Q):i.removeAttribute("name")}function Oe(i,c,g,N,A,_,q,Q){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),c!=null||g!=null){if(!(_!=="submit"&&_!=="reset"||c!=null)){qr(i);return}g=g!=null?""+ir(g):"",c=c!=null?""+ir(c):g,Q||c===i.value||(i.value=c),i.defaultValue=c}N=N??A,N=typeof N!="function"&&typeof N!="symbol"&&!!N,i.checked=Q?i.checked:!!N,i.defaultChecked=!!N,q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(i.name=q),qr(i)}function ae(i,c,g){c==="number"&&Qc(i.ownerDocument)===i||i.defaultValue===""+g||(i.defaultValue=""+g)}function yt(i,c,g,N){if(i=i.options,c){c={};for(var A=0;A<g.length;A++)c["$"+g[A]]=!0;for(g=0;g<i.length;g++)A=c.hasOwnProperty("$"+i[g].value),i[g].selected!==A&&(i[g].selected=A),A&&N&&(i[g].defaultSelected=!0)}else{for(g=""+ir(g),c=null,A=0;A<i.length;A++){if(i[A].value===g){i[A].selected=!0,N&&(i[A].defaultSelected=!0);return}c!==null||i[A].disabled||(c=i[A])}c!==null&&(c.selected=!0)}}function ys(i,c,g){if(c!=null&&(c=""+ir(c),c!==i.value&&(i.value=c),g==null)){i.defaultValue!==c&&(i.defaultValue=c);return}i.defaultValue=g!=null?""+ir(g):""}function Nn(i,c,g,N){if(c==null){if(N!=null){if(g!=null)throw Error(n(92));if(se(N)){if(1<N.length)throw Error(n(93));N=N[0]}g=N}g==null&&(g=""),c=g}g=ir(c),i.defaultValue=g,N=i.textContent,N===g&&N!==""&&N!==null&&(i.value=N),qr(i)}function zl(i,c){if(c){var g=i.firstChild;if(g&&g===i.lastChild&&g.nodeType===3){g.nodeValue=c;return}}i.textContent=c}var zd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wn(i,c,g){var N=c.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?N?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="":N?i.setProperty(c,g):typeof g!="number"||g===0||zd.has(c)?c==="float"?i.cssFloat=g:i[c]=(""+g).trim():i[c]=g+"px"}function Nt(i,c,g){if(c!=null&&typeof c!="object")throw Error(n(62));if(i=i.style,g!=null){for(var N in g)!g.hasOwnProperty(N)||c!=null&&c.hasOwnProperty(N)||(N.indexOf("--")===0?i.setProperty(N,""):N==="float"?i.cssFloat="":i[N]="");for(var A in c)N=c[A],c.hasOwnProperty(A)&&g[A]!==N&&wn(i,A,N)}else for(var _ in c)c.hasOwnProperty(_)&&wn(i,_,c[_])}function Pr(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var g0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vl(i){return Qp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function _n(){}var Ko=null;function Vd(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Hr=null,va=null;function Ka(i){var c=er(i);if(c&&(i=c.stateNode)){var g=i[sr]||null;e:switch(i=c.stateNode,c.type){case"input":if(As(i,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),c=g.name,g.type==="radio"&&c!=null){for(g=i;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Ht(""+c)+'"][type="radio"]'),c=0;c<g.length;c++){var N=g[c];if(N!==i&&N.form===i.form){var A=N[sr]||null;if(!A)throw Error(n(90));As(N,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(c=0;c<g.length;c++)N=g[c],N.form===i.form&&Wa(N)}break e;case"textarea":ys(i,g.value,g.defaultValue);break e;case"select":c=g.value,c!=null&&yt(i,!!g.multiple,c,!1)}}}var St=!1;function x0(i,c,g){if(St)return i(c,g);St=!0;try{var N=i(c);return N}finally{if(St=!1,(Hr!==null||va!==null)&&(lm(),Hr&&(c=Hr,i=va,va=Hr=null,Ka(c),i)))for(c=0;c<i.length;c++)Ka(i[c])}}function kt(i,c){var g=i.stateNode;if(g===null)return null;var N=g[sr]||null;if(N===null)return null;g=N[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(i=i.type,N=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!N;break e;default:i=!1}if(i)return null;if(g&&typeof g!="function")throw Error(n(231,c,typeof g));return g}var Ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$d=!1;if(Ir)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){$d=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{$d=!1}var Za=null,Qa=null,Jc=null;function $l(){if(Jc)return Jc;var i,c=Qa,g=c.length,N,A="value"in Za?Za.value:Za.textContent,_=A.length;for(i=0;i<g&&c[i]===A[i];i++);var q=g-i;for(N=1;N<=q&&c[g-N]===A[_-N];N++);return Jc=A.slice(i,1<N?1-N:void 0)}function Ni(i){var c=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&c===13&&(i=13)):i=c,i===10&&(i=13),32<=i||i===13?i:0}function wi(){return!0}function qd(){return!1}function Es(i){function c(g,N,A,_,q){this._reactName=g,this._targetInst=A,this.type=N,this.nativeEvent=_,this.target=q,this.currentTarget=null;for(var Q in i)i.hasOwnProperty(Q)&&(g=i[Q],this[Q]=g?g(_):_[Q]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?wi:qd,this.isPropagationStopped=qd,this}return v(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),c}var Qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bs=Es(Qn),ql=v({},Qn,{view:0,detail:0}),p0=Es(ql),eu,Hd,Zo,tu=v({},ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Zo&&(Zo&&i.type==="mousemove"?(eu=i.screenX-Zo.screenX,Hd=i.screenY-Zo.screenY):Hd=eu=0,Zo=i),eu)},movementY:function(i){return"movementY"in i?i.movementY:Hd}}),ur=Es(tu),y0=v({},tu,{dataTransfer:0}),ru=Es(y0),ji=v({},ql,{relatedTarget:0}),Gd=Es(ji),Me=v({},Qn,{animationName:0,elapsedTime:0,pseudoElement:0}),zt=Es(Me),Fs=v({},Qn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),su=Es(Fs),b0=v({},Qn,{data:0}),v0=Es(b0),Jp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bs(i){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(i):(i=Yd[i])?!!c[i]:!1}function Qo(){return bs}var Qr=v({},ql,{key:function(i){if(i.key){var c=Jp[i.key]||i.key;if(c!=="Unidentified")return c}return i.type==="keypress"?(i=Ni(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ey[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qo,charCode:function(i){return i.type==="keypress"?Ni(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ni(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),nu=Es(Qr),Hi=v({},tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pr=Es(Hi),Ct=v({},ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qo}),ty=Es(Ct),Mr=v({},Qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gi=Es(Mr),Hl=v({},tu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ry=Es(Hl),Na=v({},Qn,{newState:0,oldState:0}),Xd=Es(Na),N0=[9,13,27,32],Jo=Ir&&"CompositionEvent"in window,Gl=null;Ir&&"documentMode"in document&&(Gl=document.documentMode);var w0=Ir&&"TextEvent"in window&&!Gl,j0=Ir&&(!Jo||Gl&&8<Gl&&11>=Gl),Yi=" ",au=!1;function S0(i,c){switch(i){case"keyup":return N0.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Xl=!1;function Si(i,c){switch(i){case"compositionend":return Yl(c);case"keypress":return c.which!==32?null:(au=!0,Yi);case"textInput":return i=c.data,i===Yi&&au?null:i;default:return null}}function iu(i,c){if(Xl)return i==="compositionend"||!Jo&&S0(i,c)?(i=$l(),Jc=Qa=Za=null,Xl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return j0&&c.locale!=="ko"?null:c.data;default:return null}}var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wd(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c==="input"?!!Pn[i.type]:c==="textarea"}function Jn(i,c,g,N){Hr?va?va.push(N):va=[N]:Hr=N,c=mm(c,"onChange"),0<c.length&&(g=new Bs("onChange","change",null,g,N),i.push({event:g,listeners:c}))}var ec=null,Xi=null;function sy(i){QC(i,0)}function tc(i){var c=Ve(i);if(Wa(c))return i}function ea(i,c){if(i==="change")return c}var C0=!1;if(Ir){var rc;if(Ir){var Wi="oninput"in document;if(!Wi){var Kt=document.createElement("div");Kt.setAttribute("oninput","return;"),Wi=typeof Kt.oninput=="function"}rc=Wi}else rc=!1;C0=rc&&(!document.documentMode||9<document.documentMode)}function sc(){ec&&(ec.detachEvent("onpropertychange",W),Xi=ec=null)}function W(i){if(i.propertyName==="value"&&tc(Xi)){var c=[];Jn(c,Xi,i,Vd(i)),x0(sy,c)}}function o(i,c,g){i==="focusin"?(sc(),ec=c,Xi=g,ec.attachEvent("onpropertychange",W)):i==="focusout"&&sc()}function d(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return tc(Xi)}function h(i,c){if(i==="click")return tc(c)}function y(i,c){if(i==="input"||i==="change")return tc(c)}function b(i,c){return i===c&&(i!==0||1/i===1/c)||i!==i&&c!==c}var j=typeof Object.is=="function"?Object.is:b;function S(i,c){if(j(i,c))return!0;if(typeof i!="object"||i===null||typeof c!="object"||c===null)return!1;var g=Object.keys(i),N=Object.keys(c);if(g.length!==N.length)return!1;for(N=0;N<g.length;N++){var A=g[N];if(!lt.call(c,A)||!j(i[A],c[A]))return!1}return!0}function D(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function I(i,c){var g=D(i);i=0;for(var N;g;){if(g.nodeType===3){if(N=i+g.textContent.length,i<=c&&N>=c)return{node:g,offset:c-i};i=N}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=D(g)}}function V(i,c){return i&&c?i===c?!0:i&&i.nodeType===3?!1:c&&c.nodeType===3?V(i,c.parentNode):"contains"in i?i.contains(c):i.compareDocumentPosition?!!(i.compareDocumentPosition(c)&16):!1:!1}function K(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var c=Qc(i.document);c instanceof i.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)i=c.contentWindow;else break;c=Qc(i.document)}return c}function Z(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c&&(c==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||c==="textarea"||i.contentEditable==="true")}var ie=Ir&&"documentMode"in document&&11>=document.documentMode,me=null,xe=null,Ae=null,Pe=!1;function rt(i,c,g){var N=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Pe||me==null||me!==Qc(N)||(N=me,"selectionStart"in N&&Z(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),Ae&&S(Ae,N)||(Ae=N,N=mm(xe,"onSelect"),0<N.length&&(c=new Bs("onSelect","select",null,c,g),i.push({event:c,listeners:N}),c.target=me)))}function et(i,c){var g={};return g[i.toLowerCase()]=c.toLowerCase(),g["Webkit"+i]="webkit"+c,g["Moz"+i]="moz"+c,g}var Ze={animationend:et("Animation","AnimationEnd"),animationiteration:et("Animation","AnimationIteration"),animationstart:et("Animation","AnimationStart"),transitionrun:et("Transition","TransitionRun"),transitionstart:et("Transition","TransitionStart"),transitioncancel:et("Transition","TransitionCancel"),transitionend:et("Transition","TransitionEnd")},$t={},Pt={};Ir&&(Pt=document.createElement("div").style,"AnimationEvent"in window||(delete Ze.animationend.animation,delete Ze.animationiteration.animation,delete Ze.animationstart.animation),"TransitionEvent"in window||delete Ze.transitionend.transition);function ds(i){if($t[i])return $t[i];if(!Ze[i])return i;var c=Ze[i],g;for(g in c)if(c.hasOwnProperty(g)&&g in Pt)return $t[i]=c[g];return i}var In=ds("animationend"),ln=ds("animationiteration"),yr=ds("animationstart"),Us=ds("transitionrun"),jn=ds("transitionstart"),Wl=ds("transitioncancel"),Ki=ds("transitionend"),A0=new Map,Kd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kd.push("scrollEnd");function Ja(i,c){A0.set(i,c),xr(c,[i])}var E0=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},wa=[],lu=0,ny=0;function T0(){for(var i=lu,c=ny=lu=0;c<i;){var g=wa[c];wa[c++]=null;var N=wa[c];wa[c++]=null;var A=wa[c];wa[c++]=null;var _=wa[c];if(wa[c++]=null,N!==null&&A!==null){var q=N.pending;q===null?A.next=A:(A.next=q.next,q.next=A),N.pending=A}_!==0&&PS(g,A,_)}}function O0(i,c,g,N){wa[lu++]=i,wa[lu++]=c,wa[lu++]=g,wa[lu++]=N,ny|=N,i.lanes|=N,i=i.alternate,i!==null&&(i.lanes|=N)}function ay(i,c,g,N){return O0(i,c,g,N),D0(i)}function nc(i,c){return O0(i,null,null,c),D0(i)}function PS(i,c,g){i.lanes|=g;var N=i.alternate;N!==null&&(N.lanes|=g);for(var A=!1,_=i.return;_!==null;)_.childLanes|=g,N=_.alternate,N!==null&&(N.childLanes|=g),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(A=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,A&&c!==null&&(A=31-nt(g),i=_.hiddenUpdates,N=i[A],N===null?i[A]=[c]:N.push(c),c.lane=g|536870912),_):null}function D0(i){if(50<yh)throw yh=0,m1=null,Error(n(185));for(var c=i.return;c!==null;)i=c,c=i.return;return i.tag===3?i.stateNode:null}var ou={};function GR(i,c,g,N){this.tag=i,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ta(i,c,g,N){return new GR(i,c,g,N)}function iy(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zi(i,c){var g=i.alternate;return g===null?(g=ta(i.tag,c,i.key,i.mode),g.elementType=i.elementType,g.type=i.type,g.stateNode=i.stateNode,g.alternate=i,i.alternate=g):(g.pendingProps=c,g.type=i.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=i.flags&65011712,g.childLanes=i.childLanes,g.lanes=i.lanes,g.child=i.child,g.memoizedProps=i.memoizedProps,g.memoizedState=i.memoizedState,g.updateQueue=i.updateQueue,c=i.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=i.sibling,g.index=i.index,g.ref=i.ref,g.refCleanup=i.refCleanup,g}function IS(i,c){i.flags&=65011714;var g=i.alternate;return g===null?(i.childLanes=0,i.lanes=c,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=g.childLanes,i.lanes=g.lanes,i.child=g.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=g.memoizedProps,i.memoizedState=g.memoizedState,i.updateQueue=g.updateQueue,i.type=g.type,c=g.dependencies,i.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),i}function k0(i,c,g,N,A,_){var q=0;if(N=i,typeof i=="function")iy(i)&&(q=1);else if(typeof i=="string")q=Z9(i,g,de.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case U:return i=ta(31,g,c,A),i.elementType=U,i.lanes=_,i;case k:return ac(g.children,A,_,c);case O:q=8,A|=24;break;case M:return i=ta(12,g,c,A|2),i.elementType=M,i.lanes=_,i;case B:return i=ta(13,g,c,A),i.elementType=B,i.lanes=_,i;case F:return i=ta(19,g,c,A),i.elementType=F,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case P:q=10;break e;case L:q=9;break e;case H:q=11;break e;case R:q=14;break e;case z:q=16,N=null;break e}q=29,g=Error(n(130,i===null?"null":typeof i,"")),N=null}return c=ta(q,g,c,A),c.elementType=i,c.type=N,c.lanes=_,c}function ac(i,c,g,N){return i=ta(7,i,N,c),i.lanes=g,i}function ly(i,c,g){return i=ta(6,i,null,c),i.lanes=g,i}function MS(i){var c=ta(18,null,null,0);return c.stateNode=i,c}function oy(i,c,g){return c=ta(4,i.children!==null?i.children:[],i.key,c),c.lanes=g,c.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},c}var RS=new WeakMap;function ja(i,c){if(typeof i=="object"&&i!==null){var g=RS.get(i);return g!==void 0?g:(c={value:i,source:c,stack:tt(c)},RS.set(i,c),c)}return{value:i,source:c,stack:tt(c)}}var cu=[],uu=0,_0=null,Zd=0,Sa=[],Ca=0,Kl=null,Ci=1,Ai="";function Qi(i,c){cu[uu++]=Zd,cu[uu++]=_0,_0=i,Zd=c}function LS(i,c,g){Sa[Ca++]=Ci,Sa[Ca++]=Ai,Sa[Ca++]=Kl,Kl=i;var N=Ci;i=Ai;var A=32-nt(N)-1;N&=~(1<<A),g+=1;var _=32-nt(c)+A;if(30<_){var q=A-A%5;_=(N&(1<<q)-1).toString(32),N>>=q,A-=q,Ci=1<<32-nt(c)+A|g<<A|N,Ai=_+i}else Ci=1<<_|g<<A|N,Ai=i}function cy(i){i.return!==null&&(Qi(i,1),LS(i,1,0))}function uy(i){for(;i===_0;)_0=cu[--uu],cu[uu]=null,Zd=cu[--uu],cu[uu]=null;for(;i===Kl;)Kl=Sa[--Ca],Sa[Ca]=null,Ai=Sa[--Ca],Sa[Ca]=null,Ci=Sa[--Ca],Sa[Ca]=null}function BS(i,c){Sa[Ca++]=Ci,Sa[Ca++]=Ai,Sa[Ca++]=Kl,Ci=c.id,Ai=c.overflow,Kl=i}var on=null,Gr=null,Jt=!1,Zl=null,Aa=!1,dy=Error(n(519));function Ql(i){var c=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qd(ja(c,i)),dy}function FS(i){var c=i.stateNode,g=i.type,N=i.memoizedProps;switch(c[Zr]=i,c[sr]=N,g){case"dialog":Wt("cancel",c),Wt("close",c);break;case"iframe":case"object":case"embed":Wt("load",c);break;case"video":case"audio":for(g=0;g<vh.length;g++)Wt(vh[g],c);break;case"source":Wt("error",c);break;case"img":case"image":case"link":Wt("error",c),Wt("load",c);break;case"details":Wt("toggle",c);break;case"input":Wt("invalid",c),Oe(c,N.value,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name,!0);break;case"select":Wt("invalid",c);break;case"textarea":Wt("invalid",c),Nn(c,N.value,N.defaultValue,N.children)}g=N.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||c.textContent===""+g||N.suppressHydrationWarning===!0||rA(c.textContent,g)?(N.popover!=null&&(Wt("beforetoggle",c),Wt("toggle",c)),N.onScroll!=null&&Wt("scroll",c),N.onScrollEnd!=null&&Wt("scrollend",c),N.onClick!=null&&(c.onclick=_n),c=!0):c=!1,c||Ql(i,!0)}function US(i){for(on=i.return;on;)switch(on.tag){case 5:case 31:case 13:Aa=!1;return;case 27:case 3:Aa=!0;return;default:on=on.return}}function du(i){if(i!==on)return!1;if(!Jt)return US(i),Jt=!0,!1;var c=i.tag,g;if((g=c!==3&&c!==27)&&((g=c===5)&&(g=i.type,g=!(g!=="form"&&g!=="button")||O1(i.type,i.memoizedProps)),g=!g),g&&Gr&&Ql(i),US(i),c===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Gr=dA(i)}else if(c===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Gr=dA(i)}else c===27?(c=Gr,fo(i.type)?(i=I1,I1=null,Gr=i):Gr=c):Gr=on?Ta(i.stateNode.nextSibling):null;return!0}function ic(){Gr=on=null,Jt=!1}function hy(){var i=Zl;return i!==null&&(Bn===null?Bn=i:Bn.push.apply(Bn,i),Zl=null),i}function Qd(i){Zl===null?Zl=[i]:Zl.push(i)}var fy=X(null),lc=null,Ji=null;function Jl(i,c,g){ge(fy,c._currentValue),c._currentValue=g}function el(i){i._currentValue=fy.current,re(fy)}function my(i,c,g){for(;i!==null;){var N=i.alternate;if((i.childLanes&c)!==c?(i.childLanes|=c,N!==null&&(N.childLanes|=c)):N!==null&&(N.childLanes&c)!==c&&(N.childLanes|=c),i===g)break;i=i.return}}function gy(i,c,g,N){var A=i.child;for(A!==null&&(A.return=i);A!==null;){var _=A.dependencies;if(_!==null){var q=A.child;_=_.firstContext;e:for(;_!==null;){var Q=_;_=A;for(var he=0;he<c.length;he++)if(Q.context===c[he]){_.lanes|=g,Q=_.alternate,Q!==null&&(Q.lanes|=g),my(_.return,g,i),N||(q=null);break e}_=Q.next}}else if(A.tag===18){if(q=A.return,q===null)throw Error(n(341));q.lanes|=g,_=q.alternate,_!==null&&(_.lanes|=g),my(q,g,i),q=null}else q=A.child;if(q!==null)q.return=A;else for(q=A;q!==null;){if(q===i){q=null;break}if(A=q.sibling,A!==null){A.return=q.return,q=A;break}q=q.return}A=q}}function hu(i,c,g,N){i=null;for(var A=c,_=!1;A!==null;){if(!_){if((A.flags&524288)!==0)_=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var q=A.alternate;if(q===null)throw Error(n(387));if(q=q.memoizedProps,q!==null){var Q=A.type;j(A.pendingProps.value,q.value)||(i!==null?i.push(Q):i=[Q])}}else if(A===fe.current){if(q=A.alternate,q===null)throw Error(n(387));q.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(i!==null?i.push(Ch):i=[Ch])}A=A.return}i!==null&&gy(c,i,g,N),c.flags|=262144}function P0(i){for(i=i.firstContext;i!==null;){if(!j(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function oc(i){lc=i,Ji=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function cn(i){return zS(lc,i)}function I0(i,c){return lc===null&&oc(i),zS(i,c)}function zS(i,c){var g=c._currentValue;if(c={context:c,memoizedValue:g,next:null},Ji===null){if(i===null)throw Error(n(308));Ji=c,i.dependencies={lanes:0,firstContext:c},i.flags|=524288}else Ji=Ji.next=c;return g}var YR=typeof AbortController<"u"?AbortController:function(){var i=[],c=this.signal={aborted:!1,addEventListener:function(g,N){i.push(N)}};this.abort=function(){c.aborted=!0,i.forEach(function(g){return g()})}},XR=e.unstable_scheduleCallback,WR=e.unstable_NormalPriority,Ts={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xy(){return{controller:new YR,data:new Map,refCount:0}}function Jd(i){i.refCount--,i.refCount===0&&XR(WR,function(){i.controller.abort()})}var eh=null,py=0,fu=0,mu=null;function KR(i,c){if(eh===null){var g=eh=[];py=0,fu=v1(),mu={status:"pending",value:void 0,then:function(N){g.push(N)}}}return py++,c.then(VS,VS),c}function VS(){if(--py===0&&eh!==null){mu!==null&&(mu.status="fulfilled");var i=eh;eh=null,fu=0,mu=null;for(var c=0;c<i.length;c++)(0,i[c])()}}function ZR(i,c){var g=[],N={status:"pending",value:null,reason:null,then:function(A){g.push(A)}};return i.then(function(){N.status="fulfilled",N.value=c;for(var A=0;A<g.length;A++)(0,g[A])(c)},function(A){for(N.status="rejected",N.reason=A,A=0;A<g.length;A++)(0,g[A])(void 0)}),N}var $S=J.S;J.S=function(i,c){AC=ft(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&KR(i,c),$S!==null&&$S(i,c)};var cc=X(null);function yy(){var i=cc.current;return i!==null?i:Rr.pooledCache}function M0(i,c){c===null?ge(cc,cc.current):ge(cc,c.pool)}function qS(){var i=yy();return i===null?null:{parent:Ts._currentValue,pool:i}}var gu=Error(n(460)),by=Error(n(474)),R0=Error(n(542)),L0={then:function(){}};function HS(i){return i=i.status,i==="fulfilled"||i==="rejected"}function GS(i,c,g){switch(g=i[g],g===void 0?i.push(c):g!==c&&(c.then(_n,_n),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw i=c.reason,XS(i),i;default:if(typeof c.status=="string")c.then(_n,_n);else{if(i=Rr,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=c,i.status="pending",i.then(function(N){if(c.status==="pending"){var A=c;A.status="fulfilled",A.value=N}},function(N){if(c.status==="pending"){var A=c;A.status="rejected",A.reason=N}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw i=c.reason,XS(i),i}throw dc=c,gu}}function uc(i){try{var c=i._init;return c(i._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(dc=g,gu):g}}var dc=null;function YS(){if(dc===null)throw Error(n(459));var i=dc;return dc=null,i}function XS(i){if(i===gu||i===R0)throw Error(n(483))}var xu=null,th=0;function B0(i){var c=th;return th+=1,xu===null&&(xu=[]),GS(xu,i,c)}function rh(i,c){c=c.props.ref,i.ref=c!==void 0?c:null}function F0(i,c){throw c.$$typeof===C?Error(n(525)):(i=Object.prototype.toString.call(c),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":i)))}function WS(i){function c(Ce,ye){if(i){var De=Ce.deletions;De===null?(Ce.deletions=[ye],Ce.flags|=16):De.push(ye)}}function g(Ce,ye){if(!i)return null;for(;ye!==null;)c(Ce,ye),ye=ye.sibling;return null}function N(Ce){for(var ye=new Map;Ce!==null;)Ce.key!==null?ye.set(Ce.key,Ce):ye.set(Ce.index,Ce),Ce=Ce.sibling;return ye}function A(Ce,ye){return Ce=Zi(Ce,ye),Ce.index=0,Ce.sibling=null,Ce}function _(Ce,ye,De){return Ce.index=De,i?(De=Ce.alternate,De!==null?(De=De.index,De<ye?(Ce.flags|=67108866,ye):De):(Ce.flags|=67108866,ye)):(Ce.flags|=1048576,ye)}function q(Ce){return i&&Ce.alternate===null&&(Ce.flags|=67108866),Ce}function Q(Ce,ye,De,Ge){return ye===null||ye.tag!==6?(ye=ly(De,Ce.mode,Ge),ye.return=Ce,ye):(ye=A(ye,De),ye.return=Ce,ye)}function he(Ce,ye,De,Ge){var wt=De.type;return wt===k?$e(Ce,ye,De.props.children,Ge,De.key):ye!==null&&(ye.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===z&&uc(wt)===ye.type)?(ye=A(ye,De.props),rh(ye,De),ye.return=Ce,ye):(ye=k0(De.type,De.key,De.props,null,Ce.mode,Ge),rh(ye,De),ye.return=Ce,ye)}function ke(Ce,ye,De,Ge){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==De.containerInfo||ye.stateNode.implementation!==De.implementation?(ye=oy(De,Ce.mode,Ge),ye.return=Ce,ye):(ye=A(ye,De.children||[]),ye.return=Ce,ye)}function $e(Ce,ye,De,Ge,wt){return ye===null||ye.tag!==7?(ye=ac(De,Ce.mode,Ge,wt),ye.return=Ce,ye):(ye=A(ye,De),ye.return=Ce,ye)}function Ye(Ce,ye,De){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=ly(""+ye,Ce.mode,De),ye.return=Ce,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case T:return De=k0(ye.type,ye.key,ye.props,null,Ce.mode,De),rh(De,ye),De.return=Ce,De;case E:return ye=oy(ye,Ce.mode,De),ye.return=Ce,ye;case z:return ye=uc(ye),Ye(Ce,ye,De)}if(se(ye)||G(ye))return ye=ac(ye,Ce.mode,De,null),ye.return=Ce,ye;if(typeof ye.then=="function")return Ye(Ce,B0(ye),De);if(ye.$$typeof===P)return Ye(Ce,I0(Ce,ye),De);F0(Ce,ye)}return null}function _e(Ce,ye,De,Ge){var wt=ye!==null?ye.key:null;if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return wt!==null?null:Q(Ce,ye,""+De,Ge);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case T:return De.key===wt?he(Ce,ye,De,Ge):null;case E:return De.key===wt?ke(Ce,ye,De,Ge):null;case z:return De=uc(De),_e(Ce,ye,De,Ge)}if(se(De)||G(De))return wt!==null?null:$e(Ce,ye,De,Ge,null);if(typeof De.then=="function")return _e(Ce,ye,B0(De),Ge);if(De.$$typeof===P)return _e(Ce,ye,I0(Ce,De),Ge);F0(Ce,De)}return null}function Be(Ce,ye,De,Ge,wt){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Ce=Ce.get(De)||null,Q(ye,Ce,""+Ge,wt);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case T:return Ce=Ce.get(Ge.key===null?De:Ge.key)||null,he(ye,Ce,Ge,wt);case E:return Ce=Ce.get(Ge.key===null?De:Ge.key)||null,ke(ye,Ce,Ge,wt);case z:return Ge=uc(Ge),Be(Ce,ye,De,Ge,wt)}if(se(Ge)||G(Ge))return Ce=Ce.get(De)||null,$e(ye,Ce,Ge,wt,null);if(typeof Ge.then=="function")return Be(Ce,ye,De,B0(Ge),wt);if(Ge.$$typeof===P)return Be(Ce,ye,De,I0(ye,Ge),wt);F0(ye,Ge)}return null}function gt(Ce,ye,De,Ge){for(var wt=null,lr=null,vt=ye,Vt=ye=0,Qt=null;vt!==null&&Vt<De.length;Vt++){vt.index>Vt?(Qt=vt,vt=null):Qt=vt.sibling;var or=_e(Ce,vt,De[Vt],Ge);if(or===null){vt===null&&(vt=Qt);break}i&&vt&&or.alternate===null&&c(Ce,vt),ye=_(or,ye,Vt),lr===null?wt=or:lr.sibling=or,lr=or,vt=Qt}if(Vt===De.length)return g(Ce,vt),Jt&&Qi(Ce,Vt),wt;if(vt===null){for(;Vt<De.length;Vt++)vt=Ye(Ce,De[Vt],Ge),vt!==null&&(ye=_(vt,ye,Vt),lr===null?wt=vt:lr.sibling=vt,lr=vt);return Jt&&Qi(Ce,Vt),wt}for(vt=N(vt);Vt<De.length;Vt++)Qt=Be(vt,Ce,Vt,De[Vt],Ge),Qt!==null&&(i&&Qt.alternate!==null&&vt.delete(Qt.key===null?Vt:Qt.key),ye=_(Qt,ye,Vt),lr===null?wt=Qt:lr.sibling=Qt,lr=Qt);return i&&vt.forEach(function(yo){return c(Ce,yo)}),Jt&&Qi(Ce,Vt),wt}function Ot(Ce,ye,De,Ge){if(De==null)throw Error(n(151));for(var wt=null,lr=null,vt=ye,Vt=ye=0,Qt=null,or=De.next();vt!==null&&!or.done;Vt++,or=De.next()){vt.index>Vt?(Qt=vt,vt=null):Qt=vt.sibling;var yo=_e(Ce,vt,or.value,Ge);if(yo===null){vt===null&&(vt=Qt);break}i&&vt&&yo.alternate===null&&c(Ce,vt),ye=_(yo,ye,Vt),lr===null?wt=yo:lr.sibling=yo,lr=yo,vt=Qt}if(or.done)return g(Ce,vt),Jt&&Qi(Ce,Vt),wt;if(vt===null){for(;!or.done;Vt++,or=De.next())or=Ye(Ce,or.value,Ge),or!==null&&(ye=_(or,ye,Vt),lr===null?wt=or:lr.sibling=or,lr=or);return Jt&&Qi(Ce,Vt),wt}for(vt=N(vt);!or.done;Vt++,or=De.next())or=Be(vt,Ce,Vt,or.value,Ge),or!==null&&(i&&or.alternate!==null&&vt.delete(or.key===null?Vt:or.key),ye=_(or,ye,Vt),lr===null?wt=or:lr.sibling=or,lr=or);return i&&vt.forEach(function(oL){return c(Ce,oL)}),Jt&&Qi(Ce,Vt),wt}function Er(Ce,ye,De,Ge){if(typeof De=="object"&&De!==null&&De.type===k&&De.key===null&&(De=De.props.children),typeof De=="object"&&De!==null){switch(De.$$typeof){case T:e:{for(var wt=De.key;ye!==null;){if(ye.key===wt){if(wt=De.type,wt===k){if(ye.tag===7){g(Ce,ye.sibling),Ge=A(ye,De.props.children),Ge.return=Ce,Ce=Ge;break e}}else if(ye.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===z&&uc(wt)===ye.type){g(Ce,ye.sibling),Ge=A(ye,De.props),rh(Ge,De),Ge.return=Ce,Ce=Ge;break e}g(Ce,ye);break}else c(Ce,ye);ye=ye.sibling}De.type===k?(Ge=ac(De.props.children,Ce.mode,Ge,De.key),Ge.return=Ce,Ce=Ge):(Ge=k0(De.type,De.key,De.props,null,Ce.mode,Ge),rh(Ge,De),Ge.return=Ce,Ce=Ge)}return q(Ce);case E:e:{for(wt=De.key;ye!==null;){if(ye.key===wt)if(ye.tag===4&&ye.stateNode.containerInfo===De.containerInfo&&ye.stateNode.implementation===De.implementation){g(Ce,ye.sibling),Ge=A(ye,De.children||[]),Ge.return=Ce,Ce=Ge;break e}else{g(Ce,ye);break}else c(Ce,ye);ye=ye.sibling}Ge=oy(De,Ce.mode,Ge),Ge.return=Ce,Ce=Ge}return q(Ce);case z:return De=uc(De),Er(Ce,ye,De,Ge)}if(se(De))return gt(Ce,ye,De,Ge);if(G(De)){if(wt=G(De),typeof wt!="function")throw Error(n(150));return De=wt.call(De),Ot(Ce,ye,De,Ge)}if(typeof De.then=="function")return Er(Ce,ye,B0(De),Ge);if(De.$$typeof===P)return Er(Ce,ye,I0(Ce,De),Ge);F0(Ce,De)}return typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint"?(De=""+De,ye!==null&&ye.tag===6?(g(Ce,ye.sibling),Ge=A(ye,De),Ge.return=Ce,Ce=Ge):(g(Ce,ye),Ge=ly(De,Ce.mode,Ge),Ge.return=Ce,Ce=Ge),q(Ce)):g(Ce,ye)}return function(Ce,ye,De,Ge){try{th=0;var wt=Er(Ce,ye,De,Ge);return xu=null,wt}catch(vt){if(vt===gu||vt===R0)throw vt;var lr=ta(29,vt,null,Ce.mode);return lr.lanes=Ge,lr.return=Ce,lr}finally{}}}var hc=WS(!0),KS=WS(!1),eo=!1;function vy(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ny(i,c){i=i.updateQueue,c.updateQueue===i&&(c.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function to(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ro(i,c,g){var N=i.updateQueue;if(N===null)return null;if(N=N.shared,(dr&2)!==0){var A=N.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),N.pending=c,c=D0(i),PS(i,null,g),c}return O0(i,N,c,g),D0(i)}function sh(i,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194048)!==0)){var N=c.lanes;N&=i.pendingLanes,g|=N,c.lanes=g,Dn(i,g)}}function wy(i,c){var g=i.updateQueue,N=i.alternate;if(N!==null&&(N=N.updateQueue,g===N)){var A=null,_=null;if(g=g.firstBaseUpdate,g!==null){do{var q={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};_===null?A=_=q:_=_.next=q,g=g.next}while(g!==null);_===null?A=_=c:_=_.next=c}else A=_=c;g={baseState:N.baseState,firstBaseUpdate:A,lastBaseUpdate:_,shared:N.shared,callbacks:N.callbacks},i.updateQueue=g;return}i=g.lastBaseUpdate,i===null?g.firstBaseUpdate=c:i.next=c,g.lastBaseUpdate=c}var jy=!1;function nh(){if(jy){var i=mu;if(i!==null)throw i}}function ah(i,c,g,N){jy=!1;var A=i.updateQueue;eo=!1;var _=A.firstBaseUpdate,q=A.lastBaseUpdate,Q=A.shared.pending;if(Q!==null){A.shared.pending=null;var he=Q,ke=he.next;he.next=null,q===null?_=ke:q.next=ke,q=he;var $e=i.alternate;$e!==null&&($e=$e.updateQueue,Q=$e.lastBaseUpdate,Q!==q&&(Q===null?$e.firstBaseUpdate=ke:Q.next=ke,$e.lastBaseUpdate=he))}if(_!==null){var Ye=A.baseState;q=0,$e=ke=he=null,Q=_;do{var _e=Q.lane&-536870913,Be=_e!==Q.lane;if(Be?(Zt&_e)===_e:(N&_e)===_e){_e!==0&&_e===fu&&(jy=!0),$e!==null&&($e=$e.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var gt=i,Ot=Q;_e=c;var Er=g;switch(Ot.tag){case 1:if(gt=Ot.payload,typeof gt=="function"){Ye=gt.call(Er,Ye,_e);break e}Ye=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=Ot.payload,_e=typeof gt=="function"?gt.call(Er,Ye,_e):gt,_e==null)break e;Ye=v({},Ye,_e);break e;case 2:eo=!0}}_e=Q.callback,_e!==null&&(i.flags|=64,Be&&(i.flags|=8192),Be=A.callbacks,Be===null?A.callbacks=[_e]:Be.push(_e))}else Be={lane:_e,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},$e===null?(ke=$e=Be,he=Ye):$e=$e.next=Be,q|=_e;if(Q=Q.next,Q===null){if(Q=A.shared.pending,Q===null)break;Be=Q,Q=Be.next,Be.next=null,A.lastBaseUpdate=Be,A.shared.pending=null}}while(!0);$e===null&&(he=Ye),A.baseState=he,A.firstBaseUpdate=ke,A.lastBaseUpdate=$e,_===null&&(A.shared.lanes=0),lo|=q,i.lanes=q,i.memoizedState=Ye}}function ZS(i,c){if(typeof i!="function")throw Error(n(191,i));i.call(c)}function QS(i,c){var g=i.callbacks;if(g!==null)for(i.callbacks=null,i=0;i<g.length;i++)ZS(g[i],c)}var pu=X(null),U0=X(0);function JS(i,c){i=cl,ge(U0,i),ge(pu,c),cl=i|c.baseLanes}function Sy(){ge(U0,cl),ge(pu,pu.current)}function Cy(){cl=U0.current,re(pu),re(U0)}var ra=X(null),Ea=null;function so(i){var c=i.alternate;ge(vs,vs.current&1),ge(ra,i),Ea===null&&(c===null||pu.current!==null||c.memoizedState!==null)&&(Ea=i)}function Ay(i){ge(vs,vs.current),ge(ra,i),Ea===null&&(Ea=i)}function e4(i){i.tag===22?(ge(vs,vs.current),ge(ra,i),Ea===null&&(Ea=i)):no()}function no(){ge(vs,vs.current),ge(ra,ra.current)}function sa(i){re(ra),Ea===i&&(Ea=null),re(vs)}var vs=X(0);function z0(i){for(var c=i;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||_1(g)||P1(g)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var tl=0,Ft=null,Cr=null,Os=null,V0=!1,yu=!1,fc=!1,$0=0,ih=0,bu=null,QR=0;function hs(){throw Error(n(321))}function Ey(i,c){if(c===null)return!1;for(var g=0;g<c.length&&g<i.length;g++)if(!j(i[g],c[g]))return!1;return!0}function Ty(i,c,g,N,A,_){return tl=_,Ft=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,J.H=i===null||i.memoizedState===null?L4:$y,fc=!1,_=g(N,A),fc=!1,yu&&(_=r4(c,g,N,A)),t4(i),_}function t4(i){J.H=ch;var c=Cr!==null&&Cr.next!==null;if(tl=0,Os=Cr=Ft=null,V0=!1,ih=0,bu=null,c)throw Error(n(300));i===null||Ds||(i=i.dependencies,i!==null&&P0(i)&&(Ds=!0))}function r4(i,c,g,N){Ft=i;var A=0;do{if(yu&&(bu=null),ih=0,yu=!1,25<=A)throw Error(n(301));if(A+=1,Os=Cr=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}J.H=B4,_=c(g,N)}while(yu);return _}function JR(){var i=J.H,c=i.useState()[0];return c=typeof c.then=="function"?lh(c):c,i=i.useState()[0],(Cr!==null?Cr.memoizedState:null)!==i&&(Ft.flags|=1024),c}function Oy(){var i=$0!==0;return $0=0,i}function Dy(i,c,g){c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~g}function ky(i){if(V0){for(i=i.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}V0=!1}tl=0,Os=Cr=Ft=null,yu=!1,ih=$0=0,bu=null}function Sn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Os===null?Ft.memoizedState=Os=i:Os=Os.next=i,Os}function Ns(){if(Cr===null){var i=Ft.alternate;i=i!==null?i.memoizedState:null}else i=Cr.next;var c=Os===null?Ft.memoizedState:Os.next;if(c!==null)Os=c,Cr=i;else{if(i===null)throw Ft.alternate===null?Error(n(467)):Error(n(310));Cr=i,i={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},Os===null?Ft.memoizedState=Os=i:Os=Os.next=i}return Os}function q0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lh(i){var c=ih;return ih+=1,bu===null&&(bu=[]),i=GS(bu,i,c),c=Ft,(Os===null?c.memoizedState:Os.next)===null&&(c=c.alternate,J.H=c===null||c.memoizedState===null?L4:$y),i}function H0(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return lh(i);if(i.$$typeof===P)return cn(i)}throw Error(n(438,String(i)))}function _y(i){var c=null,g=Ft.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var N=Ft.alternate;N!==null&&(N=N.updateQueue,N!==null&&(N=N.memoCache,N!=null&&(c={data:N.data.map(function(A){return A.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=q0(),Ft.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(i),N=0;N<i;N++)g[N]=Y;return c.index++,g}function rl(i,c){return typeof c=="function"?c(i):c}function G0(i){var c=Ns();return Py(c,Cr,i)}function Py(i,c,g){var N=i.queue;if(N===null)throw Error(n(311));N.lastRenderedReducer=g;var A=i.baseQueue,_=N.pending;if(_!==null){if(A!==null){var q=A.next;A.next=_.next,_.next=q}c.baseQueue=A=_,N.pending=null}if(_=i.baseState,A===null)i.memoizedState=_;else{c=A.next;var Q=q=null,he=null,ke=c,$e=!1;do{var Ye=ke.lane&-536870913;if(Ye!==ke.lane?(Zt&Ye)===Ye:(tl&Ye)===Ye){var _e=ke.revertLane;if(_e===0)he!==null&&(he=he.next={lane:0,revertLane:0,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),Ye===fu&&($e=!0);else if((tl&_e)===_e){ke=ke.next,_e===fu&&($e=!0);continue}else Ye={lane:0,revertLane:ke.revertLane,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},he===null?(Q=he=Ye,q=_):he=he.next=Ye,Ft.lanes|=_e,lo|=_e;Ye=ke.action,fc&&g(_,Ye),_=ke.hasEagerState?ke.eagerState:g(_,Ye)}else _e={lane:Ye,revertLane:ke.revertLane,gesture:ke.gesture,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},he===null?(Q=he=_e,q=_):he=he.next=_e,Ft.lanes|=Ye,lo|=Ye;ke=ke.next}while(ke!==null&&ke!==c);if(he===null?q=_:he.next=Q,!j(_,i.memoizedState)&&(Ds=!0,$e&&(g=mu,g!==null)))throw g;i.memoizedState=_,i.baseState=q,i.baseQueue=he,N.lastRenderedState=_}return A===null&&(N.lanes=0),[i.memoizedState,N.dispatch]}function Iy(i){var c=Ns(),g=c.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=i;var N=g.dispatch,A=g.pending,_=c.memoizedState;if(A!==null){g.pending=null;var q=A=A.next;do _=i(_,q.action),q=q.next;while(q!==A);j(_,c.memoizedState)||(Ds=!0),c.memoizedState=_,c.baseQueue===null&&(c.baseState=_),g.lastRenderedState=_}return[_,N]}function s4(i,c,g){var N=Ft,A=Ns(),_=Jt;if(_){if(g===void 0)throw Error(n(407));g=g()}else g=c();var q=!j((Cr||A).memoizedState,g);if(q&&(A.memoizedState=g,Ds=!0),A=A.queue,Ly(i4.bind(null,N,A,i),[i]),A.getSnapshot!==c||q||Os!==null&&Os.memoizedState.tag&1){if(N.flags|=2048,vu(9,{destroy:void 0},a4.bind(null,N,A,g,c),null),Rr===null)throw Error(n(349));_||(tl&127)!==0||n4(N,c,g)}return g}function n4(i,c,g){i.flags|=16384,i={getSnapshot:c,value:g},c=Ft.updateQueue,c===null?(c=q0(),Ft.updateQueue=c,c.stores=[i]):(g=c.stores,g===null?c.stores=[i]:g.push(i))}function a4(i,c,g,N){c.value=g,c.getSnapshot=N,l4(c)&&o4(i)}function i4(i,c,g){return g(function(){l4(c)&&o4(i)})}function l4(i){var c=i.getSnapshot;i=i.value;try{var g=c();return!j(i,g)}catch{return!0}}function o4(i){var c=nc(i,2);c!==null&&Fn(c,i,2)}function My(i){var c=Sn();if(typeof i=="function"){var g=i;if(i=g(),fc){Je(!0);try{g()}finally{Je(!1)}}}return c.memoizedState=c.baseState=i,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:i},c}function c4(i,c,g,N){return i.baseState=g,Py(i,Cr,typeof N=="function"?N:rl)}function e9(i,c,g,N,A){if(W0(i))throw Error(n(485));if(i=c.action,i!==null){var _={payload:A,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){_.listeners.push(q)}};J.T!==null?g(!0):_.isTransition=!1,N(_),g=c.pending,g===null?(_.next=c.pending=_,u4(c,_)):(_.next=g.next,c.pending=g.next=_)}}function u4(i,c){var g=c.action,N=c.payload,A=i.state;if(c.isTransition){var _=J.T,q={};J.T=q;try{var Q=g(A,N),he=J.S;he!==null&&he(q,Q),d4(i,c,Q)}catch(ke){Ry(i,c,ke)}finally{_!==null&&q.types!==null&&(_.types=q.types),J.T=_}}else try{_=g(A,N),d4(i,c,_)}catch(ke){Ry(i,c,ke)}}function d4(i,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(N){h4(i,c,N)},function(N){return Ry(i,c,N)}):h4(i,c,g)}function h4(i,c,g){c.status="fulfilled",c.value=g,f4(c),i.state=g,c=i.pending,c!==null&&(g=c.next,g===c?i.pending=null:(g=g.next,c.next=g,u4(i,g)))}function Ry(i,c,g){var N=i.pending;if(i.pending=null,N!==null){N=N.next;do c.status="rejected",c.reason=g,f4(c),c=c.next;while(c!==N)}i.action=null}function f4(i){i=i.listeners;for(var c=0;c<i.length;c++)(0,i[c])()}function m4(i,c){return c}function g4(i,c){if(Jt){var g=Rr.formState;if(g!==null){e:{var N=Ft;if(Jt){if(Gr){t:{for(var A=Gr,_=Aa;A.nodeType!==8;){if(!_){A=null;break t}if(A=Ta(A.nextSibling),A===null){A=null;break t}}_=A.data,A=_==="F!"||_==="F"?A:null}if(A){Gr=Ta(A.nextSibling),N=A.data==="F!";break e}}Ql(N)}N=!1}N&&(c=g[0])}}return g=Sn(),g.memoizedState=g.baseState=c,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m4,lastRenderedState:c},g.queue=N,g=I4.bind(null,Ft,N),N.dispatch=g,N=My(!1),_=Vy.bind(null,Ft,!1,N.queue),N=Sn(),A={state:c,dispatch:null,action:i,pending:null},N.queue=A,g=e9.bind(null,Ft,A,_,g),A.dispatch=g,N.memoizedState=i,[c,g,!1]}function x4(i){var c=Ns();return p4(c,Cr,i)}function p4(i,c,g){if(c=Py(i,c,m4)[0],i=G0(rl)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var N=lh(c)}catch(q){throw q===gu?R0:q}else N=c;c=Ns();var A=c.queue,_=A.dispatch;return g!==c.memoizedState&&(Ft.flags|=2048,vu(9,{destroy:void 0},t9.bind(null,A,g),null)),[N,_,i]}function t9(i,c){i.action=c}function y4(i){var c=Ns(),g=Cr;if(g!==null)return p4(c,g,i);Ns(),c=c.memoizedState,g=Ns();var N=g.queue.dispatch;return g.memoizedState=i,[c,N,!1]}function vu(i,c,g,N){return i={tag:i,create:g,deps:N,inst:c,next:null},c=Ft.updateQueue,c===null&&(c=q0(),Ft.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=i.next=i:(N=g.next,g.next=i,i.next=N,c.lastEffect=i),i}function b4(){return Ns().memoizedState}function Y0(i,c,g,N){var A=Sn();Ft.flags|=i,A.memoizedState=vu(1|c,{destroy:void 0},g,N===void 0?null:N)}function X0(i,c,g,N){var A=Ns();N=N===void 0?null:N;var _=A.memoizedState.inst;Cr!==null&&N!==null&&Ey(N,Cr.memoizedState.deps)?A.memoizedState=vu(c,_,g,N):(Ft.flags|=i,A.memoizedState=vu(1|c,_,g,N))}function v4(i,c){Y0(8390656,8,i,c)}function Ly(i,c){X0(2048,8,i,c)}function r9(i){Ft.flags|=4;var c=Ft.updateQueue;if(c===null)c=q0(),Ft.updateQueue=c,c.events=[i];else{var g=c.events;g===null?c.events=[i]:g.push(i)}}function N4(i){var c=Ns().memoizedState;return r9({ref:c,nextImpl:i}),function(){if((dr&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}function w4(i,c){return X0(4,2,i,c)}function j4(i,c){return X0(4,4,i,c)}function S4(i,c){if(typeof c=="function"){i=i();var g=c(i);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return i=i(),c.current=i,function(){c.current=null}}function C4(i,c,g){g=g!=null?g.concat([i]):null,X0(4,4,S4.bind(null,c,i),g)}function By(){}function A4(i,c){var g=Ns();c=c===void 0?null:c;var N=g.memoizedState;return c!==null&&Ey(c,N[1])?N[0]:(g.memoizedState=[i,c],i)}function E4(i,c){var g=Ns();c=c===void 0?null:c;var N=g.memoizedState;if(c!==null&&Ey(c,N[1]))return N[0];if(N=i(),fc){Je(!0);try{i()}finally{Je(!1)}}return g.memoizedState=[N,c],N}function Fy(i,c,g){return g===void 0||(tl&1073741824)!==0&&(Zt&261930)===0?i.memoizedState=c:(i.memoizedState=g,i=TC(),Ft.lanes|=i,lo|=i,g)}function T4(i,c,g,N){return j(g,c)?g:pu.current!==null?(i=Fy(i,g,N),j(i,c)||(Ds=!0),i):(tl&42)===0||(tl&1073741824)!==0&&(Zt&261930)===0?(Ds=!0,i.memoizedState=g):(i=TC(),Ft.lanes|=i,lo|=i,c)}function O4(i,c,g,N,A){var _=ne.p;ne.p=_!==0&&8>_?_:8;var q=J.T,Q={};J.T=Q,Vy(i,!1,c,g);try{var he=A(),ke=J.S;if(ke!==null&&ke(Q,he),he!==null&&typeof he=="object"&&typeof he.then=="function"){var $e=ZR(he,N);oh(i,c,$e,ia(i))}else oh(i,c,N,ia(i))}catch(Ye){oh(i,c,{then:function(){},status:"rejected",reason:Ye},ia())}finally{ne.p=_,q!==null&&Q.types!==null&&(q.types=Q.types),J.T=q}}function s9(){}function Uy(i,c,g,N){if(i.tag!==5)throw Error(n(476));var A=D4(i).queue;O4(i,A,c,pe,g===null?s9:function(){return k4(i),g(N)})}function D4(i){var c=i.memoizedState;if(c!==null)return c;c={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:pe},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:g},next:null},i.memoizedState=c,i=i.alternate,i!==null&&(i.memoizedState=c),c}function k4(i){var c=D4(i);c.next===null&&(c=i.alternate.memoizedState),oh(i,c.next.queue,{},ia())}function zy(){return cn(Ch)}function _4(){return Ns().memoizedState}function P4(){return Ns().memoizedState}function n9(i){for(var c=i.return;c!==null;){switch(c.tag){case 24:case 3:var g=ia();i=to(g);var N=ro(c,i,g);N!==null&&(Fn(N,c,g),sh(N,c,g)),c={cache:xy()},i.payload=c;return}c=c.return}}function a9(i,c,g){var N=ia();g={lane:N,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},W0(i)?M4(c,g):(g=ay(i,c,g,N),g!==null&&(Fn(g,i,N),R4(g,c,N)))}function I4(i,c,g){var N=ia();oh(i,c,g,N)}function oh(i,c,g,N){var A={lane:N,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(W0(i))M4(c,A);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=c.lastRenderedReducer,_!==null))try{var q=c.lastRenderedState,Q=_(q,g);if(A.hasEagerState=!0,A.eagerState=Q,j(Q,q))return O0(i,c,A,0),Rr===null&&T0(),!1}catch{}finally{}if(g=ay(i,c,A,N),g!==null)return Fn(g,i,N),R4(g,c,N),!0}return!1}function Vy(i,c,g,N){if(N={lane:2,revertLane:v1(),gesture:null,action:N,hasEagerState:!1,eagerState:null,next:null},W0(i)){if(c)throw Error(n(479))}else c=ay(i,g,N,2),c!==null&&Fn(c,i,2)}function W0(i){var c=i.alternate;return i===Ft||c!==null&&c===Ft}function M4(i,c){yu=V0=!0;var g=i.pending;g===null?c.next=c:(c.next=g.next,g.next=c),i.pending=c}function R4(i,c,g){if((g&4194048)!==0){var N=c.lanes;N&=i.pendingLanes,g|=N,c.lanes=g,Dn(i,g)}}var ch={readContext:cn,use:H0,useCallback:hs,useContext:hs,useEffect:hs,useImperativeHandle:hs,useLayoutEffect:hs,useInsertionEffect:hs,useMemo:hs,useReducer:hs,useRef:hs,useState:hs,useDebugValue:hs,useDeferredValue:hs,useTransition:hs,useSyncExternalStore:hs,useId:hs,useHostTransitionStatus:hs,useFormState:hs,useActionState:hs,useOptimistic:hs,useMemoCache:hs,useCacheRefresh:hs};ch.useEffectEvent=hs;var L4={readContext:cn,use:H0,useCallback:function(i,c){return Sn().memoizedState=[i,c===void 0?null:c],i},useContext:cn,useEffect:v4,useImperativeHandle:function(i,c,g){g=g!=null?g.concat([i]):null,Y0(4194308,4,S4.bind(null,c,i),g)},useLayoutEffect:function(i,c){return Y0(4194308,4,i,c)},useInsertionEffect:function(i,c){Y0(4,2,i,c)},useMemo:function(i,c){var g=Sn();c=c===void 0?null:c;var N=i();if(fc){Je(!0);try{i()}finally{Je(!1)}}return g.memoizedState=[N,c],N},useReducer:function(i,c,g){var N=Sn();if(g!==void 0){var A=g(c);if(fc){Je(!0);try{g(c)}finally{Je(!1)}}}else A=c;return N.memoizedState=N.baseState=A,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:A},N.queue=i,i=i.dispatch=a9.bind(null,Ft,i),[N.memoizedState,i]},useRef:function(i){var c=Sn();return i={current:i},c.memoizedState=i},useState:function(i){i=My(i);var c=i.queue,g=I4.bind(null,Ft,c);return c.dispatch=g,[i.memoizedState,g]},useDebugValue:By,useDeferredValue:function(i,c){var g=Sn();return Fy(g,i,c)},useTransition:function(){var i=My(!1);return i=O4.bind(null,Ft,i.queue,!0,!1),Sn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,c,g){var N=Ft,A=Sn();if(Jt){if(g===void 0)throw Error(n(407));g=g()}else{if(g=c(),Rr===null)throw Error(n(349));(Zt&127)!==0||n4(N,c,g)}A.memoizedState=g;var _={value:g,getSnapshot:c};return A.queue=_,v4(i4.bind(null,N,_,i),[i]),N.flags|=2048,vu(9,{destroy:void 0},a4.bind(null,N,_,g,c),null),g},useId:function(){var i=Sn(),c=Rr.identifierPrefix;if(Jt){var g=Ai,N=Ci;g=(N&~(1<<32-nt(N)-1)).toString(32)+g,c="_"+c+"R_"+g,g=$0++,0<g&&(c+="H"+g.toString(32)),c+="_"}else g=QR++,c="_"+c+"r_"+g.toString(32)+"_";return i.memoizedState=c},useHostTransitionStatus:zy,useFormState:g4,useActionState:g4,useOptimistic:function(i){var c=Sn();c.memoizedState=c.baseState=i;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=Vy.bind(null,Ft,!0,g),g.dispatch=c,[i,c]},useMemoCache:_y,useCacheRefresh:function(){return Sn().memoizedState=n9.bind(null,Ft)},useEffectEvent:function(i){var c=Sn(),g={impl:i};return c.memoizedState=g,function(){if((dr&2)!==0)throw Error(n(440));return g.impl.apply(void 0,arguments)}}},$y={readContext:cn,use:H0,useCallback:A4,useContext:cn,useEffect:Ly,useImperativeHandle:C4,useInsertionEffect:w4,useLayoutEffect:j4,useMemo:E4,useReducer:G0,useRef:b4,useState:function(){return G0(rl)},useDebugValue:By,useDeferredValue:function(i,c){var g=Ns();return T4(g,Cr.memoizedState,i,c)},useTransition:function(){var i=G0(rl)[0],c=Ns().memoizedState;return[typeof i=="boolean"?i:lh(i),c]},useSyncExternalStore:s4,useId:_4,useHostTransitionStatus:zy,useFormState:x4,useActionState:x4,useOptimistic:function(i,c){var g=Ns();return c4(g,Cr,i,c)},useMemoCache:_y,useCacheRefresh:P4};$y.useEffectEvent=N4;var B4={readContext:cn,use:H0,useCallback:A4,useContext:cn,useEffect:Ly,useImperativeHandle:C4,useInsertionEffect:w4,useLayoutEffect:j4,useMemo:E4,useReducer:Iy,useRef:b4,useState:function(){return Iy(rl)},useDebugValue:By,useDeferredValue:function(i,c){var g=Ns();return Cr===null?Fy(g,i,c):T4(g,Cr.memoizedState,i,c)},useTransition:function(){var i=Iy(rl)[0],c=Ns().memoizedState;return[typeof i=="boolean"?i:lh(i),c]},useSyncExternalStore:s4,useId:_4,useHostTransitionStatus:zy,useFormState:y4,useActionState:y4,useOptimistic:function(i,c){var g=Ns();return Cr!==null?c4(g,Cr,i,c):(g.baseState=i,[i,g.queue.dispatch])},useMemoCache:_y,useCacheRefresh:P4};B4.useEffectEvent=N4;function qy(i,c,g,N){c=i.memoizedState,g=g(N,c),g=g==null?c:v({},c,g),i.memoizedState=g,i.lanes===0&&(i.updateQueue.baseState=g)}var Hy={enqueueSetState:function(i,c,g){i=i._reactInternals;var N=ia(),A=to(N);A.payload=c,g!=null&&(A.callback=g),c=ro(i,A,N),c!==null&&(Fn(c,i,N),sh(c,i,N))},enqueueReplaceState:function(i,c,g){i=i._reactInternals;var N=ia(),A=to(N);A.tag=1,A.payload=c,g!=null&&(A.callback=g),c=ro(i,A,N),c!==null&&(Fn(c,i,N),sh(c,i,N))},enqueueForceUpdate:function(i,c){i=i._reactInternals;var g=ia(),N=to(g);N.tag=2,c!=null&&(N.callback=c),c=ro(i,N,g),c!==null&&(Fn(c,i,g),sh(c,i,g))}};function F4(i,c,g,N,A,_,q){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(N,_,q):c.prototype&&c.prototype.isPureReactComponent?!S(g,N)||!S(A,_):!0}function U4(i,c,g,N){i=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,N),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,N),c.state!==i&&Hy.enqueueReplaceState(c,c.state,null)}function mc(i,c){var g=c;if("ref"in c){g={};for(var N in c)N!=="ref"&&(g[N]=c[N])}if(i=i.defaultProps){g===c&&(g=v({},g));for(var A in i)g[A]===void 0&&(g[A]=i[A])}return g}function z4(i){E0(i)}function V4(i){console.error(i)}function $4(i){E0(i)}function K0(i,c){try{var g=i.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(N){setTimeout(function(){throw N})}}function q4(i,c,g){try{var N=i.onCaughtError;N(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Gy(i,c,g){return g=to(g),g.tag=3,g.payload={element:null},g.callback=function(){K0(i,c)},g}function H4(i){return i=to(i),i.tag=3,i}function G4(i,c,g,N){var A=g.type.getDerivedStateFromError;if(typeof A=="function"){var _=N.value;i.payload=function(){return A(_)},i.callback=function(){q4(c,g,N)}}var q=g.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(i.callback=function(){q4(c,g,N),typeof A!="function"&&(oo===null?oo=new Set([this]):oo.add(this));var Q=N.stack;this.componentDidCatch(N.value,{componentStack:Q!==null?Q:""})})}function i9(i,c,g,N,A){if(g.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){if(c=g.alternate,c!==null&&hu(c,g,A,!0),g=ra.current,g!==null){switch(g.tag){case 31:case 13:return Ea===null?om():g.alternate===null&&fs===0&&(fs=3),g.flags&=-257,g.flags|=65536,g.lanes=A,N===L0?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([N]):c.add(N),p1(i,N,A)),!1;case 22:return g.flags|=65536,N===L0?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([N])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([N]):g.add(N)),p1(i,N,A)),!1}throw Error(n(435,g.tag))}return p1(i,N,A),om(),!1}if(Jt)return c=ra.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=A,N!==dy&&(i=Error(n(422),{cause:N}),Qd(ja(i,g)))):(N!==dy&&(c=Error(n(423),{cause:N}),Qd(ja(c,g))),i=i.current.alternate,i.flags|=65536,A&=-A,i.lanes|=A,N=ja(N,g),A=Gy(i.stateNode,N,A),wy(i,A),fs!==4&&(fs=2)),!1;var _=Error(n(520),{cause:N});if(_=ja(_,g),ph===null?ph=[_]:ph.push(_),fs!==4&&(fs=2),c===null)return!0;N=ja(N,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,i=A&-A,g.lanes|=i,i=Gy(g.stateNode,N,i),wy(g,i),!1;case 1:if(c=g.type,_=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(oo===null||!oo.has(_))))return g.flags|=65536,A&=-A,g.lanes|=A,A=H4(A),G4(A,i,g,N),wy(g,A),!1}g=g.return}while(g!==null);return!1}var Yy=Error(n(461)),Ds=!1;function un(i,c,g,N){c.child=i===null?KS(c,null,g,N):hc(c,i.child,g,N)}function Y4(i,c,g,N,A){g=g.render;var _=c.ref;if("ref"in N){var q={};for(var Q in N)Q!=="ref"&&(q[Q]=N[Q])}else q=N;return oc(c),N=Ty(i,c,g,q,_,A),Q=Oy(),i!==null&&!Ds?(Dy(i,c,A),sl(i,c,A)):(Jt&&Q&&cy(c),c.flags|=1,un(i,c,N,A),c.child)}function X4(i,c,g,N,A){if(i===null){var _=g.type;return typeof _=="function"&&!iy(_)&&_.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=_,W4(i,c,_,N,A)):(i=k0(g.type,null,N,c,c.mode,A),i.ref=c.ref,i.return=c,c.child=i)}if(_=i.child,!t1(i,A)){var q=_.memoizedProps;if(g=g.compare,g=g!==null?g:S,g(q,N)&&i.ref===c.ref)return sl(i,c,A)}return c.flags|=1,i=Zi(_,N),i.ref=c.ref,i.return=c,c.child=i}function W4(i,c,g,N,A){if(i!==null){var _=i.memoizedProps;if(S(_,N)&&i.ref===c.ref)if(Ds=!1,c.pendingProps=N=_,t1(i,A))(i.flags&131072)!==0&&(Ds=!0);else return c.lanes=i.lanes,sl(i,c,A)}return Xy(i,c,g,N,A)}function K4(i,c,g,N){var A=N.children,_=i!==null?i.memoizedState:null;if(i===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),N.mode==="hidden"){if((c.flags&128)!==0){if(_=_!==null?_.baseLanes|g:g,i!==null){for(N=c.child=i.child,A=0;N!==null;)A=A|N.lanes|N.childLanes,N=N.sibling;N=A&~_}else N=0,c.child=null;return Z4(i,c,_,g,N)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},i!==null&&M0(c,_!==null?_.cachePool:null),_!==null?JS(c,_):Sy(),e4(c);else return N=c.lanes=536870912,Z4(i,c,_!==null?_.baseLanes|g:g,g,N)}else _!==null?(M0(c,_.cachePool),JS(c,_),no(),c.memoizedState=null):(i!==null&&M0(c,null),Sy(),no());return un(i,c,A,g),c.child}function uh(i,c){return i!==null&&i.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function Z4(i,c,g,N,A){var _=yy();return _=_===null?null:{parent:Ts._currentValue,pool:_},c.memoizedState={baseLanes:g,cachePool:_},i!==null&&M0(c,null),Sy(),e4(c),i!==null&&hu(i,c,N,!0),c.childLanes=A,null}function Z0(i,c){return c=J0({mode:c.mode,children:c.children},i.mode),c.ref=i.ref,i.child=c,c.return=i,c}function Q4(i,c,g){return hc(c,i.child,null,g),i=Z0(c,c.pendingProps),i.flags|=2,sa(c),c.memoizedState=null,i}function l9(i,c,g){var N=c.pendingProps,A=(c.flags&128)!==0;if(c.flags&=-129,i===null){if(Jt){if(N.mode==="hidden")return i=Z0(c,N),c.lanes=536870912,uh(null,i);if(Ay(c),(i=Gr)?(i=uA(i,Aa),i=i!==null&&i.data==="&"?i:null,i!==null&&(c.memoizedState={dehydrated:i,treeContext:Kl!==null?{id:Ci,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},g=MS(i),g.return=c,c.child=g,on=c,Gr=null)):i=null,i===null)throw Ql(c);return c.lanes=536870912,null}return Z0(c,N)}var _=i.memoizedState;if(_!==null){var q=_.dehydrated;if(Ay(c),A)if(c.flags&256)c.flags&=-257,c=Q4(i,c,g);else if(c.memoizedState!==null)c.child=i.child,c.flags|=128,c=null;else throw Error(n(558));else if(Ds||hu(i,c,g,!1),A=(g&i.childLanes)!==0,Ds||A){if(N=Rr,N!==null&&(q=$i(N,g),q!==0&&q!==_.retryLane))throw _.retryLane=q,nc(i,q),Fn(N,i,q),Yy;om(),c=Q4(i,c,g)}else i=_.treeContext,Gr=Ta(q.nextSibling),on=c,Jt=!0,Zl=null,Aa=!1,i!==null&&BS(c,i),c=Z0(c,N),c.flags|=4096;return c}return i=Zi(i.child,{mode:N.mode,children:N.children}),i.ref=c.ref,c.child=i,i.return=c,i}function Q0(i,c){var g=c.ref;if(g===null)i!==null&&i.ref!==null&&(c.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(n(284));(i===null||i.ref!==g)&&(c.flags|=4194816)}}function Xy(i,c,g,N,A){return oc(c),g=Ty(i,c,g,N,void 0,A),N=Oy(),i!==null&&!Ds?(Dy(i,c,A),sl(i,c,A)):(Jt&&N&&cy(c),c.flags|=1,un(i,c,g,A),c.child)}function J4(i,c,g,N,A,_){return oc(c),c.updateQueue=null,g=r4(c,N,g,A),t4(i),N=Oy(),i!==null&&!Ds?(Dy(i,c,_),sl(i,c,_)):(Jt&&N&&cy(c),c.flags|=1,un(i,c,g,_),c.child)}function eC(i,c,g,N,A){if(oc(c),c.stateNode===null){var _=ou,q=g.contextType;typeof q=="object"&&q!==null&&(_=cn(q)),_=new g(N,_),c.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Hy,c.stateNode=_,_._reactInternals=c,_=c.stateNode,_.props=N,_.state=c.memoizedState,_.refs={},vy(c),q=g.contextType,_.context=typeof q=="object"&&q!==null?cn(q):ou,_.state=c.memoizedState,q=g.getDerivedStateFromProps,typeof q=="function"&&(qy(c,g,q,N),_.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(q=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),q!==_.state&&Hy.enqueueReplaceState(_,_.state,null),ah(c,N,_,A),nh(),_.state=c.memoizedState),typeof _.componentDidMount=="function"&&(c.flags|=4194308),N=!0}else if(i===null){_=c.stateNode;var Q=c.memoizedProps,he=mc(g,Q);_.props=he;var ke=_.context,$e=g.contextType;q=ou,typeof $e=="object"&&$e!==null&&(q=cn($e));var Ye=g.getDerivedStateFromProps;$e=typeof Ye=="function"||typeof _.getSnapshotBeforeUpdate=="function",Q=c.pendingProps!==Q,$e||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(Q||ke!==q)&&U4(c,_,N,q),eo=!1;var _e=c.memoizedState;_.state=_e,ah(c,N,_,A),nh(),ke=c.memoizedState,Q||_e!==ke||eo?(typeof Ye=="function"&&(qy(c,g,Ye,N),ke=c.memoizedState),(he=eo||F4(c,g,he,N,_e,ke,q))?($e||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(c.flags|=4194308)):(typeof _.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=N,c.memoizedState=ke),_.props=N,_.state=ke,_.context=q,N=he):(typeof _.componentDidMount=="function"&&(c.flags|=4194308),N=!1)}else{_=c.stateNode,Ny(i,c),q=c.memoizedProps,$e=mc(g,q),_.props=$e,Ye=c.pendingProps,_e=_.context,ke=g.contextType,he=ou,typeof ke=="object"&&ke!==null&&(he=cn(ke)),Q=g.getDerivedStateFromProps,(ke=typeof Q=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(q!==Ye||_e!==he)&&U4(c,_,N,he),eo=!1,_e=c.memoizedState,_.state=_e,ah(c,N,_,A),nh();var Be=c.memoizedState;q!==Ye||_e!==Be||eo||i!==null&&i.dependencies!==null&&P0(i.dependencies)?(typeof Q=="function"&&(qy(c,g,Q,N),Be=c.memoizedState),($e=eo||F4(c,g,$e,N,_e,Be,he)||i!==null&&i.dependencies!==null&&P0(i.dependencies))?(ke||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(N,Be,he),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(N,Be,he)),typeof _.componentDidUpdate=="function"&&(c.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof _.componentDidUpdate!="function"||q===i.memoizedProps&&_e===i.memoizedState||(c.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&_e===i.memoizedState||(c.flags|=1024),c.memoizedProps=N,c.memoizedState=Be),_.props=N,_.state=Be,_.context=he,N=$e):(typeof _.componentDidUpdate!="function"||q===i.memoizedProps&&_e===i.memoizedState||(c.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&_e===i.memoizedState||(c.flags|=1024),N=!1)}return _=N,Q0(i,c),N=(c.flags&128)!==0,_||N?(_=c.stateNode,g=N&&typeof g.getDerivedStateFromError!="function"?null:_.render(),c.flags|=1,i!==null&&N?(c.child=hc(c,i.child,null,A),c.child=hc(c,null,g,A)):un(i,c,g,A),c.memoizedState=_.state,i=c.child):i=sl(i,c,A),i}function tC(i,c,g,N){return ic(),c.flags|=256,un(i,c,g,N),c.child}var Wy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ky(i){return{baseLanes:i,cachePool:qS()}}function Zy(i,c,g){return i=i!==null?i.childLanes&~g:0,c&&(i|=aa),i}function rC(i,c,g){var N=c.pendingProps,A=!1,_=(c.flags&128)!==0,q;if((q=_)||(q=i!==null&&i.memoizedState===null?!1:(vs.current&2)!==0),q&&(A=!0,c.flags&=-129),q=(c.flags&32)!==0,c.flags&=-33,i===null){if(Jt){if(A?so(c):no(),(i=Gr)?(i=uA(i,Aa),i=i!==null&&i.data!=="&"?i:null,i!==null&&(c.memoizedState={dehydrated:i,treeContext:Kl!==null?{id:Ci,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},g=MS(i),g.return=c,c.child=g,on=c,Gr=null)):i=null,i===null)throw Ql(c);return P1(i)?c.lanes=32:c.lanes=536870912,null}var Q=N.children;return N=N.fallback,A?(no(),A=c.mode,Q=J0({mode:"hidden",children:Q},A),N=ac(N,A,g,null),Q.return=c,N.return=c,Q.sibling=N,c.child=Q,N=c.child,N.memoizedState=Ky(g),N.childLanes=Zy(i,q,g),c.memoizedState=Wy,uh(null,N)):(so(c),Qy(c,Q))}var he=i.memoizedState;if(he!==null&&(Q=he.dehydrated,Q!==null)){if(_)c.flags&256?(so(c),c.flags&=-257,c=Jy(i,c,g)):c.memoizedState!==null?(no(),c.child=i.child,c.flags|=128,c=null):(no(),Q=N.fallback,A=c.mode,N=J0({mode:"visible",children:N.children},A),Q=ac(Q,A,g,null),Q.flags|=2,N.return=c,Q.return=c,N.sibling=Q,c.child=N,hc(c,i.child,null,g),N=c.child,N.memoizedState=Ky(g),N.childLanes=Zy(i,q,g),c.memoizedState=Wy,c=uh(null,N));else if(so(c),P1(Q)){if(q=Q.nextSibling&&Q.nextSibling.dataset,q)var ke=q.dgst;q=ke,N=Error(n(419)),N.stack="",N.digest=q,Qd({value:N,source:null,stack:null}),c=Jy(i,c,g)}else if(Ds||hu(i,c,g,!1),q=(g&i.childLanes)!==0,Ds||q){if(q=Rr,q!==null&&(N=$i(q,g),N!==0&&N!==he.retryLane))throw he.retryLane=N,nc(i,N),Fn(q,i,N),Yy;_1(Q)||om(),c=Jy(i,c,g)}else _1(Q)?(c.flags|=192,c.child=i.child,c=null):(i=he.treeContext,Gr=Ta(Q.nextSibling),on=c,Jt=!0,Zl=null,Aa=!1,i!==null&&BS(c,i),c=Qy(c,N.children),c.flags|=4096);return c}return A?(no(),Q=N.fallback,A=c.mode,he=i.child,ke=he.sibling,N=Zi(he,{mode:"hidden",children:N.children}),N.subtreeFlags=he.subtreeFlags&65011712,ke!==null?Q=Zi(ke,Q):(Q=ac(Q,A,g,null),Q.flags|=2),Q.return=c,N.return=c,N.sibling=Q,c.child=N,uh(null,N),N=c.child,Q=i.child.memoizedState,Q===null?Q=Ky(g):(A=Q.cachePool,A!==null?(he=Ts._currentValue,A=A.parent!==he?{parent:he,pool:he}:A):A=qS(),Q={baseLanes:Q.baseLanes|g,cachePool:A}),N.memoizedState=Q,N.childLanes=Zy(i,q,g),c.memoizedState=Wy,uh(i.child,N)):(so(c),g=i.child,i=g.sibling,g=Zi(g,{mode:"visible",children:N.children}),g.return=c,g.sibling=null,i!==null&&(q=c.deletions,q===null?(c.deletions=[i],c.flags|=16):q.push(i)),c.child=g,c.memoizedState=null,g)}function Qy(i,c){return c=J0({mode:"visible",children:c},i.mode),c.return=i,i.child=c}function J0(i,c){return i=ta(22,i,null,c),i.lanes=0,i}function Jy(i,c,g){return hc(c,i.child,null,g),i=Qy(c,c.pendingProps.children),i.flags|=2,c.memoizedState=null,i}function sC(i,c,g){i.lanes|=c;var N=i.alternate;N!==null&&(N.lanes|=c),my(i.return,c,g)}function e1(i,c,g,N,A,_){var q=i.memoizedState;q===null?i.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:N,tail:g,tailMode:A,treeForkCount:_}:(q.isBackwards=c,q.rendering=null,q.renderingStartTime=0,q.last=N,q.tail=g,q.tailMode=A,q.treeForkCount=_)}function nC(i,c,g){var N=c.pendingProps,A=N.revealOrder,_=N.tail;N=N.children;var q=vs.current,Q=(q&2)!==0;if(Q?(q=q&1|2,c.flags|=128):q&=1,ge(vs,q),un(i,c,N,g),N=Jt?Zd:0,!Q&&i!==null&&(i.flags&128)!==0)e:for(i=c.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&sC(i,g,c);else if(i.tag===19)sC(i,g,c);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===c)break e;for(;i.sibling===null;){if(i.return===null||i.return===c)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(A){case"forwards":for(g=c.child,A=null;g!==null;)i=g.alternate,i!==null&&z0(i)===null&&(A=g),g=g.sibling;g=A,g===null?(A=c.child,c.child=null):(A=g.sibling,g.sibling=null),e1(c,!1,A,g,_,N);break;case"backwards":case"unstable_legacy-backwards":for(g=null,A=c.child,c.child=null;A!==null;){if(i=A.alternate,i!==null&&z0(i)===null){c.child=A;break}i=A.sibling,A.sibling=g,g=A,A=i}e1(c,!0,g,null,_,N);break;case"together":e1(c,!1,null,null,void 0,N);break;default:c.memoizedState=null}return c.child}function sl(i,c,g){if(i!==null&&(c.dependencies=i.dependencies),lo|=c.lanes,(g&c.childLanes)===0)if(i!==null){if(hu(i,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(i!==null&&c.child!==i.child)throw Error(n(153));if(c.child!==null){for(i=c.child,g=Zi(i,i.pendingProps),c.child=g,g.return=c;i.sibling!==null;)i=i.sibling,g=g.sibling=Zi(i,i.pendingProps),g.return=c;g.sibling=null}return c.child}function t1(i,c){return(i.lanes&c)!==0?!0:(i=i.dependencies,!!(i!==null&&P0(i)))}function o9(i,c,g){switch(c.tag){case 3:qe(c,c.stateNode.containerInfo),Jl(c,Ts,i.memoizedState.cache),ic();break;case 27:case 5:Xe(c);break;case 4:qe(c,c.stateNode.containerInfo);break;case 10:Jl(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,Ay(c),null;break;case 13:var N=c.memoizedState;if(N!==null)return N.dehydrated!==null?(so(c),c.flags|=128,null):(g&c.child.childLanes)!==0?rC(i,c,g):(so(c),i=sl(i,c,g),i!==null?i.sibling:null);so(c);break;case 19:var A=(i.flags&128)!==0;if(N=(g&c.childLanes)!==0,N||(hu(i,c,g,!1),N=(g&c.childLanes)!==0),A){if(N)return nC(i,c,g);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ge(vs,vs.current),N)break;return null;case 22:return c.lanes=0,K4(i,c,g,c.pendingProps);case 24:Jl(c,Ts,i.memoizedState.cache)}return sl(i,c,g)}function aC(i,c,g){if(i!==null)if(i.memoizedProps!==c.pendingProps)Ds=!0;else{if(!t1(i,g)&&(c.flags&128)===0)return Ds=!1,o9(i,c,g);Ds=(i.flags&131072)!==0}else Ds=!1,Jt&&(c.flags&1048576)!==0&&LS(c,Zd,c.index);switch(c.lanes=0,c.tag){case 16:e:{var N=c.pendingProps;if(i=uc(c.elementType),c.type=i,typeof i=="function")iy(i)?(N=mc(i,N),c.tag=1,c=eC(null,c,i,N,g)):(c.tag=0,c=Xy(null,c,i,N,g));else{if(i!=null){var A=i.$$typeof;if(A===H){c.tag=11,c=Y4(null,c,i,N,g);break e}else if(A===R){c.tag=14,c=X4(null,c,i,N,g);break e}}throw c=ce(i)||i,Error(n(306,c,""))}}return c;case 0:return Xy(i,c,c.type,c.pendingProps,g);case 1:return N=c.type,A=mc(N,c.pendingProps),eC(i,c,N,A,g);case 3:e:{if(qe(c,c.stateNode.containerInfo),i===null)throw Error(n(387));N=c.pendingProps;var _=c.memoizedState;A=_.element,Ny(i,c),ah(c,N,null,g);var q=c.memoizedState;if(N=q.cache,Jl(c,Ts,N),N!==_.cache&&gy(c,[Ts],g,!0),nh(),N=q.element,_.isDehydrated)if(_={element:N,isDehydrated:!1,cache:q.cache},c.updateQueue.baseState=_,c.memoizedState=_,c.flags&256){c=tC(i,c,N,g);break e}else if(N!==A){A=ja(Error(n(424)),c),Qd(A),c=tC(i,c,N,g);break e}else{switch(i=c.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Gr=Ta(i.firstChild),on=c,Jt=!0,Zl=null,Aa=!0,g=KS(c,null,N,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(ic(),N===A){c=sl(i,c,g);break e}un(i,c,N,g)}c=c.child}return c;case 26:return Q0(i,c),i===null?(g=xA(c.type,null,c.pendingProps,null))?c.memoizedState=g:Jt||(g=c.type,i=c.pendingProps,N=gm(oe.current).createElement(g),N[Zr]=c,N[sr]=i,dn(N,g,i),Ur(N),c.stateNode=N):c.memoizedState=xA(c.type,i.memoizedProps,c.pendingProps,i.memoizedState),null;case 27:return Xe(c),i===null&&Jt&&(N=c.stateNode=fA(c.type,c.pendingProps,oe.current),on=c,Aa=!0,A=Gr,fo(c.type)?(I1=A,Gr=Ta(N.firstChild)):Gr=A),un(i,c,c.pendingProps.children,g),Q0(i,c),i===null&&(c.flags|=4194304),c.child;case 5:return i===null&&Jt&&((A=N=Gr)&&(N=B9(N,c.type,c.pendingProps,Aa),N!==null?(c.stateNode=N,on=c,Gr=Ta(N.firstChild),Aa=!1,A=!0):A=!1),A||Ql(c)),Xe(c),A=c.type,_=c.pendingProps,q=i!==null?i.memoizedProps:null,N=_.children,O1(A,_)?N=null:q!==null&&O1(A,q)&&(c.flags|=32),c.memoizedState!==null&&(A=Ty(i,c,JR,null,null,g),Ch._currentValue=A),Q0(i,c),un(i,c,N,g),c.child;case 6:return i===null&&Jt&&((i=g=Gr)&&(g=F9(g,c.pendingProps,Aa),g!==null?(c.stateNode=g,on=c,Gr=null,i=!0):i=!1),i||Ql(c)),null;case 13:return rC(i,c,g);case 4:return qe(c,c.stateNode.containerInfo),N=c.pendingProps,i===null?c.child=hc(c,null,N,g):un(i,c,N,g),c.child;case 11:return Y4(i,c,c.type,c.pendingProps,g);case 7:return un(i,c,c.pendingProps,g),c.child;case 8:return un(i,c,c.pendingProps.children,g),c.child;case 12:return un(i,c,c.pendingProps.children,g),c.child;case 10:return N=c.pendingProps,Jl(c,c.type,N.value),un(i,c,N.children,g),c.child;case 9:return A=c.type._context,N=c.pendingProps.children,oc(c),A=cn(A),N=N(A),c.flags|=1,un(i,c,N,g),c.child;case 14:return X4(i,c,c.type,c.pendingProps,g);case 15:return W4(i,c,c.type,c.pendingProps,g);case 19:return nC(i,c,g);case 31:return l9(i,c,g);case 22:return K4(i,c,g,c.pendingProps);case 24:return oc(c),N=cn(Ts),i===null?(A=yy(),A===null&&(A=Rr,_=xy(),A.pooledCache=_,_.refCount++,_!==null&&(A.pooledCacheLanes|=g),A=_),c.memoizedState={parent:N,cache:A},vy(c),Jl(c,Ts,A)):((i.lanes&g)!==0&&(Ny(i,c),ah(c,null,null,g),nh()),A=i.memoizedState,_=c.memoizedState,A.parent!==N?(A={parent:N,cache:N},c.memoizedState=A,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=A),Jl(c,Ts,N)):(N=_.cache,Jl(c,Ts,N),N!==A.cache&&gy(c,[Ts],g,!0))),un(i,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function nl(i){i.flags|=4}function r1(i,c,g,N,A){if((c=(i.mode&32)!==0)&&(c=!1),c){if(i.flags|=16777216,(A&335544128)===A)if(i.stateNode.complete)i.flags|=8192;else if(_C())i.flags|=8192;else throw dc=L0,by}else i.flags&=-16777217}function iC(i,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!NA(c))if(_C())i.flags|=8192;else throw dc=L0,by}function em(i,c){c!==null&&(i.flags|=4),i.flags&16384&&(c=i.tag!==22?jt():536870912,i.lanes|=c,Su|=c)}function dh(i,c){if(!Jt)switch(i.tailMode){case"hidden":c=i.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?i.tail=null:g.sibling=null;break;case"collapsed":g=i.tail;for(var N=null;g!==null;)g.alternate!==null&&(N=g),g=g.sibling;N===null?c||i.tail===null?i.tail=null:i.tail.sibling=null:N.sibling=null}}function Yr(i){var c=i.alternate!==null&&i.alternate.child===i.child,g=0,N=0;if(c)for(var A=i.child;A!==null;)g|=A.lanes|A.childLanes,N|=A.subtreeFlags&65011712,N|=A.flags&65011712,A.return=i,A=A.sibling;else for(A=i.child;A!==null;)g|=A.lanes|A.childLanes,N|=A.subtreeFlags,N|=A.flags,A.return=i,A=A.sibling;return i.subtreeFlags|=N,i.childLanes=g,c}function c9(i,c,g){var N=c.pendingProps;switch(uy(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yr(c),null;case 1:return Yr(c),null;case 3:return g=c.stateNode,N=null,i!==null&&(N=i.memoizedState.cache),c.memoizedState.cache!==N&&(c.flags|=2048),el(Ts),Ne(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(du(c)?nl(c):i===null||i.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,hy())),Yr(c),null;case 26:var A=c.type,_=c.memoizedState;return i===null?(nl(c),_!==null?(Yr(c),iC(c,_)):(Yr(c),r1(c,A,null,N,g))):_?_!==i.memoizedState?(nl(c),Yr(c),iC(c,_)):(Yr(c),c.flags&=-16777217):(i=i.memoizedProps,i!==N&&nl(c),Yr(c),r1(c,A,i,N,g)),null;case 27:if(st(c),g=oe.current,A=c.type,i!==null&&c.stateNode!=null)i.memoizedProps!==N&&nl(c);else{if(!N){if(c.stateNode===null)throw Error(n(166));return Yr(c),null}i=de.current,du(c)?FS(c):(i=fA(A,N,g),c.stateNode=i,nl(c))}return Yr(c),null;case 5:if(st(c),A=c.type,i!==null&&c.stateNode!=null)i.memoizedProps!==N&&nl(c);else{if(!N){if(c.stateNode===null)throw Error(n(166));return Yr(c),null}if(_=de.current,du(c))FS(c);else{var q=gm(oe.current);switch(_){case 1:_=q.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:_=q.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":_=q.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":_=q.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":_=q.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof N.is=="string"?q.createElement("select",{is:N.is}):q.createElement("select"),N.multiple?_.multiple=!0:N.size&&(_.size=N.size);break;default:_=typeof N.is=="string"?q.createElement(A,{is:N.is}):q.createElement(A)}}_[Zr]=c,_[sr]=N;e:for(q=c.child;q!==null;){if(q.tag===5||q.tag===6)_.appendChild(q.stateNode);else if(q.tag!==4&&q.tag!==27&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===c)break e;for(;q.sibling===null;){if(q.return===null||q.return===c)break e;q=q.return}q.sibling.return=q.return,q=q.sibling}c.stateNode=_;e:switch(dn(_,A,N),A){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}N&&nl(c)}}return Yr(c),r1(c,c.type,i===null?null:i.memoizedProps,c.pendingProps,g),null;case 6:if(i&&c.stateNode!=null)i.memoizedProps!==N&&nl(c);else{if(typeof N!="string"&&c.stateNode===null)throw Error(n(166));if(i=oe.current,du(c)){if(i=c.stateNode,g=c.memoizedProps,N=null,A=on,A!==null)switch(A.tag){case 27:case 5:N=A.memoizedProps}i[Zr]=c,i=!!(i.nodeValue===g||N!==null&&N.suppressHydrationWarning===!0||rA(i.nodeValue,g)),i||Ql(c,!0)}else i=gm(i).createTextNode(N),i[Zr]=c,c.stateNode=i}return Yr(c),null;case 31:if(g=c.memoizedState,i===null||i.memoizedState!==null){if(N=du(c),g!==null){if(i===null){if(!N)throw Error(n(318));if(i=c.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Zr]=c}else ic(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Yr(c),i=!1}else g=hy(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),i=!0;if(!i)return c.flags&256?(sa(c),c):(sa(c),null);if((c.flags&128)!==0)throw Error(n(558))}return Yr(c),null;case 13:if(N=c.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(A=du(c),N!==null&&N.dehydrated!==null){if(i===null){if(!A)throw Error(n(318));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[Zr]=c}else ic(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Yr(c),A=!1}else A=hy(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=A),A=!0;if(!A)return c.flags&256?(sa(c),c):(sa(c),null)}return sa(c),(c.flags&128)!==0?(c.lanes=g,c):(g=N!==null,i=i!==null&&i.memoizedState!==null,g&&(N=c.child,A=null,N.alternate!==null&&N.alternate.memoizedState!==null&&N.alternate.memoizedState.cachePool!==null&&(A=N.alternate.memoizedState.cachePool.pool),_=null,N.memoizedState!==null&&N.memoizedState.cachePool!==null&&(_=N.memoizedState.cachePool.pool),_!==A&&(N.flags|=2048)),g!==i&&g&&(c.child.flags|=8192),em(c,c.updateQueue),Yr(c),null);case 4:return Ne(),i===null&&S1(c.stateNode.containerInfo),Yr(c),null;case 10:return el(c.type),Yr(c),null;case 19:if(re(vs),N=c.memoizedState,N===null)return Yr(c),null;if(A=(c.flags&128)!==0,_=N.rendering,_===null)if(A)dh(N,!1);else{if(fs!==0||i!==null&&(i.flags&128)!==0)for(i=c.child;i!==null;){if(_=z0(i),_!==null){for(c.flags|=128,dh(N,!1),i=_.updateQueue,c.updateQueue=i,em(c,i),c.subtreeFlags=0,i=g,g=c.child;g!==null;)IS(g,i),g=g.sibling;return ge(vs,vs.current&1|2),Jt&&Qi(c,N.treeForkCount),c.child}i=i.sibling}N.tail!==null&&ft()>am&&(c.flags|=128,A=!0,dh(N,!1),c.lanes=4194304)}else{if(!A)if(i=z0(_),i!==null){if(c.flags|=128,A=!0,i=i.updateQueue,c.updateQueue=i,em(c,i),dh(N,!0),N.tail===null&&N.tailMode==="hidden"&&!_.alternate&&!Jt)return Yr(c),null}else 2*ft()-N.renderingStartTime>am&&g!==536870912&&(c.flags|=128,A=!0,dh(N,!1),c.lanes=4194304);N.isBackwards?(_.sibling=c.child,c.child=_):(i=N.last,i!==null?i.sibling=_:c.child=_,N.last=_)}return N.tail!==null?(i=N.tail,N.rendering=i,N.tail=i.sibling,N.renderingStartTime=ft(),i.sibling=null,g=vs.current,ge(vs,A?g&1|2:g&1),Jt&&Qi(c,N.treeForkCount),i):(Yr(c),null);case 22:case 23:return sa(c),Cy(),N=c.memoizedState!==null,i!==null?i.memoizedState!==null!==N&&(c.flags|=8192):N&&(c.flags|=8192),N?(g&536870912)!==0&&(c.flags&128)===0&&(Yr(c),c.subtreeFlags&6&&(c.flags|=8192)):Yr(c),g=c.updateQueue,g!==null&&em(c,g.retryQueue),g=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(g=i.memoizedState.cachePool.pool),N=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(N=c.memoizedState.cachePool.pool),N!==g&&(c.flags|=2048),i!==null&&re(cc),null;case 24:return g=null,i!==null&&(g=i.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),el(Ts),Yr(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function u9(i,c){switch(uy(c),c.tag){case 1:return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 3:return el(Ts),Ne(),i=c.flags,(i&65536)!==0&&(i&128)===0?(c.flags=i&-65537|128,c):null;case 26:case 27:case 5:return st(c),null;case 31:if(c.memoizedState!==null){if(sa(c),c.alternate===null)throw Error(n(340));ic()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 13:if(sa(c),i=c.memoizedState,i!==null&&i.dehydrated!==null){if(c.alternate===null)throw Error(n(340));ic()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 19:return re(vs),null;case 4:return Ne(),null;case 10:return el(c.type),null;case 22:case 23:return sa(c),Cy(),i!==null&&re(cc),i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 24:return el(Ts),null;case 25:return null;default:return null}}function lC(i,c){switch(uy(c),c.tag){case 3:el(Ts),Ne();break;case 26:case 27:case 5:st(c);break;case 4:Ne();break;case 31:c.memoizedState!==null&&sa(c);break;case 13:sa(c);break;case 19:re(vs);break;case 10:el(c.type);break;case 22:case 23:sa(c),Cy(),i!==null&&re(cc);break;case 24:el(Ts)}}function hh(i,c){try{var g=c.updateQueue,N=g!==null?g.lastEffect:null;if(N!==null){var A=N.next;g=A;do{if((g.tag&i)===i){N=void 0;var _=g.create,q=g.inst;N=_(),q.destroy=N}g=g.next}while(g!==A)}}catch(Q){vr(c,c.return,Q)}}function ao(i,c,g){try{var N=c.updateQueue,A=N!==null?N.lastEffect:null;if(A!==null){var _=A.next;N=_;do{if((N.tag&i)===i){var q=N.inst,Q=q.destroy;if(Q!==void 0){q.destroy=void 0,A=c;var he=g,ke=Q;try{ke()}catch($e){vr(A,he,$e)}}}N=N.next}while(N!==_)}}catch($e){vr(c,c.return,$e)}}function oC(i){var c=i.updateQueue;if(c!==null){var g=i.stateNode;try{QS(c,g)}catch(N){vr(i,i.return,N)}}}function cC(i,c,g){g.props=mc(i.type,i.memoizedProps),g.state=i.memoizedState;try{g.componentWillUnmount()}catch(N){vr(i,c,N)}}function fh(i,c){try{var g=i.ref;if(g!==null){switch(i.tag){case 26:case 27:case 5:var N=i.stateNode;break;case 30:N=i.stateNode;break;default:N=i.stateNode}typeof g=="function"?i.refCleanup=g(N):g.current=N}}catch(A){vr(i,c,A)}}function Ei(i,c){var g=i.ref,N=i.refCleanup;if(g!==null)if(typeof N=="function")try{N()}catch(A){vr(i,c,A)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(A){vr(i,c,A)}else g.current=null}function uC(i){var c=i.type,g=i.memoizedProps,N=i.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":g.autoFocus&&N.focus();break e;case"img":g.src?N.src=g.src:g.srcSet&&(N.srcset=g.srcSet)}}catch(A){vr(i,i.return,A)}}function s1(i,c,g){try{var N=i.stateNode;_9(N,i.type,g,c),N[sr]=c}catch(A){vr(i,i.return,A)}}function dC(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&fo(i.type)||i.tag===4}function n1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||dC(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&fo(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function a1(i,c,g){var N=i.tag;if(N===5||N===6)i=i.stateNode,c?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(i,c):(c=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,c.appendChild(i),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=_n));else if(N!==4&&(N===27&&fo(i.type)&&(g=i.stateNode,c=null),i=i.child,i!==null))for(a1(i,c,g),i=i.sibling;i!==null;)a1(i,c,g),i=i.sibling}function tm(i,c,g){var N=i.tag;if(N===5||N===6)i=i.stateNode,c?g.insertBefore(i,c):g.appendChild(i);else if(N!==4&&(N===27&&fo(i.type)&&(g=i.stateNode),i=i.child,i!==null))for(tm(i,c,g),i=i.sibling;i!==null;)tm(i,c,g),i=i.sibling}function hC(i){var c=i.stateNode,g=i.memoizedProps;try{for(var N=i.type,A=c.attributes;A.length;)c.removeAttributeNode(A[0]);dn(c,N,g),c[Zr]=i,c[sr]=g}catch(_){vr(i,i.return,_)}}var al=!1,ks=!1,i1=!1,fC=typeof WeakSet=="function"?WeakSet:Set,Zs=null;function d9(i,c){if(i=i.containerInfo,E1=wm,i=K(i),Z(i)){if("selectionStart"in i)var g={start:i.selectionStart,end:i.selectionEnd};else e:{g=(g=i.ownerDocument)&&g.defaultView||window;var N=g.getSelection&&g.getSelection();if(N&&N.rangeCount!==0){g=N.anchorNode;var A=N.anchorOffset,_=N.focusNode;N=N.focusOffset;try{g.nodeType,_.nodeType}catch{g=null;break e}var q=0,Q=-1,he=-1,ke=0,$e=0,Ye=i,_e=null;t:for(;;){for(var Be;Ye!==g||A!==0&&Ye.nodeType!==3||(Q=q+A),Ye!==_||N!==0&&Ye.nodeType!==3||(he=q+N),Ye.nodeType===3&&(q+=Ye.nodeValue.length),(Be=Ye.firstChild)!==null;)_e=Ye,Ye=Be;for(;;){if(Ye===i)break t;if(_e===g&&++ke===A&&(Q=q),_e===_&&++$e===N&&(he=q),(Be=Ye.nextSibling)!==null)break;Ye=_e,_e=Ye.parentNode}Ye=Be}g=Q===-1||he===-1?null:{start:Q,end:he}}else g=null}g=g||{start:0,end:0}}else g=null;for(T1={focusedElem:i,selectionRange:g},wm=!1,Zs=c;Zs!==null;)if(c=Zs,i=c.child,(c.subtreeFlags&1028)!==0&&i!==null)i.return=c,Zs=i;else for(;Zs!==null;){switch(c=Zs,_=c.alternate,i=c.flags,c.tag){case 0:if((i&4)!==0&&(i=c.updateQueue,i=i!==null?i.events:null,i!==null))for(g=0;g<i.length;g++)A=i[g],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,g=c,A=_.memoizedProps,_=_.memoizedState,N=g.stateNode;try{var gt=mc(g.type,A);i=N.getSnapshotBeforeUpdate(gt,_),N.__reactInternalSnapshotBeforeUpdate=i}catch(Ot){vr(g,g.return,Ot)}}break;case 3:if((i&1024)!==0){if(i=c.stateNode.containerInfo,g=i.nodeType,g===9)k1(i);else if(g===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":k1(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=c.sibling,i!==null){i.return=c.return,Zs=i;break}Zs=c.return}}function mC(i,c,g){var N=g.flags;switch(g.tag){case 0:case 11:case 15:ll(i,g),N&4&&hh(5,g);break;case 1:if(ll(i,g),N&4)if(i=g.stateNode,c===null)try{i.componentDidMount()}catch(q){vr(g,g.return,q)}else{var A=mc(g.type,c.memoizedProps);c=c.memoizedState;try{i.componentDidUpdate(A,c,i.__reactInternalSnapshotBeforeUpdate)}catch(q){vr(g,g.return,q)}}N&64&&oC(g),N&512&&fh(g,g.return);break;case 3:if(ll(i,g),N&64&&(i=g.updateQueue,i!==null)){if(c=null,g.child!==null)switch(g.child.tag){case 27:case 5:c=g.child.stateNode;break;case 1:c=g.child.stateNode}try{QS(i,c)}catch(q){vr(g,g.return,q)}}break;case 27:c===null&&N&4&&hC(g);case 26:case 5:ll(i,g),c===null&&N&4&&uC(g),N&512&&fh(g,g.return);break;case 12:ll(i,g);break;case 31:ll(i,g),N&4&&pC(i,g);break;case 13:ll(i,g),N&4&&yC(i,g),N&64&&(i=g.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(g=v9.bind(null,g),U9(i,g))));break;case 22:if(N=g.memoizedState!==null||al,!N){c=c!==null&&c.memoizedState!==null||ks,A=al;var _=ks;al=N,(ks=c)&&!_?ol(i,g,(g.subtreeFlags&8772)!==0):ll(i,g),al=A,ks=_}break;case 30:break;default:ll(i,g)}}function gC(i){var c=i.alternate;c!==null&&(i.alternate=null,gC(c)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(c=i.stateNode,c!==null&&an(c)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Jr=null,Mn=!1;function il(i,c,g){for(g=g.child;g!==null;)xC(i,c,g),g=g.sibling}function xC(i,c,g){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(_t,g)}catch{}switch(g.tag){case 26:ks||Ei(g,c),il(i,c,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:ks||Ei(g,c);var N=Jr,A=Mn;fo(g.type)&&(Jr=g.stateNode,Mn=!1),il(i,c,g),wh(g.stateNode),Jr=N,Mn=A;break;case 5:ks||Ei(g,c);case 6:if(N=Jr,A=Mn,Jr=null,il(i,c,g),Jr=N,Mn=A,Jr!==null)if(Mn)try{(Jr.nodeType===9?Jr.body:Jr.nodeName==="HTML"?Jr.ownerDocument.body:Jr).removeChild(g.stateNode)}catch(_){vr(g,c,_)}else try{Jr.removeChild(g.stateNode)}catch(_){vr(g,c,_)}break;case 18:Jr!==null&&(Mn?(i=Jr,oA(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,g.stateNode),_u(i)):oA(Jr,g.stateNode));break;case 4:N=Jr,A=Mn,Jr=g.stateNode.containerInfo,Mn=!0,il(i,c,g),Jr=N,Mn=A;break;case 0:case 11:case 14:case 15:ao(2,g,c),ks||ao(4,g,c),il(i,c,g);break;case 1:ks||(Ei(g,c),N=g.stateNode,typeof N.componentWillUnmount=="function"&&cC(g,c,N)),il(i,c,g);break;case 21:il(i,c,g);break;case 22:ks=(N=ks)||g.memoizedState!==null,il(i,c,g),ks=N;break;default:il(i,c,g)}}function pC(i,c){if(c.memoizedState===null&&(i=c.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{_u(i)}catch(g){vr(c,c.return,g)}}}function yC(i,c){if(c.memoizedState===null&&(i=c.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{_u(i)}catch(g){vr(c,c.return,g)}}function h9(i){switch(i.tag){case 31:case 13:case 19:var c=i.stateNode;return c===null&&(c=i.stateNode=new fC),c;case 22:return i=i.stateNode,c=i._retryCache,c===null&&(c=i._retryCache=new fC),c;default:throw Error(n(435,i.tag))}}function rm(i,c){var g=h9(i);c.forEach(function(N){if(!g.has(N)){g.add(N);var A=N9.bind(null,i,N);N.then(A,A)}})}function Rn(i,c){var g=c.deletions;if(g!==null)for(var N=0;N<g.length;N++){var A=g[N],_=i,q=c,Q=q;e:for(;Q!==null;){switch(Q.tag){case 27:if(fo(Q.type)){Jr=Q.stateNode,Mn=!1;break e}break;case 5:Jr=Q.stateNode,Mn=!1;break e;case 3:case 4:Jr=Q.stateNode.containerInfo,Mn=!0;break e}Q=Q.return}if(Jr===null)throw Error(n(160));xC(_,q,A),Jr=null,Mn=!1,_=A.alternate,_!==null&&(_.return=null),A.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)bC(c,i),c=c.sibling}var ei=null;function bC(i,c){var g=i.alternate,N=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Rn(c,i),Ln(i),N&4&&(ao(3,i,i.return),hh(3,i),ao(5,i,i.return));break;case 1:Rn(c,i),Ln(i),N&512&&(ks||g===null||Ei(g,g.return)),N&64&&al&&(i=i.updateQueue,i!==null&&(N=i.callbacks,N!==null&&(g=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=g===null?N:g.concat(N))));break;case 26:var A=ei;if(Rn(c,i),Ln(i),N&512&&(ks||g===null||Ei(g,g.return)),N&4){var _=g!==null?g.memoizedState:null;if(N=i.memoizedState,g===null)if(N===null)if(i.stateNode===null){e:{N=i.type,g=i.memoizedProps,A=A.ownerDocument||A;t:switch(N){case"title":_=A.getElementsByTagName("title")[0],(!_||_[vi]||_[Zr]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=A.createElement(N),A.head.insertBefore(_,A.querySelector("head > title"))),dn(_,N,g),_[Zr]=i,Ur(_),N=_;break e;case"link":var q=bA("link","href",A).get(N+(g.href||""));if(q){for(var Q=0;Q<q.length;Q++)if(_=q[Q],_.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&_.getAttribute("rel")===(g.rel==null?null:g.rel)&&_.getAttribute("title")===(g.title==null?null:g.title)&&_.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){q.splice(Q,1);break t}}_=A.createElement(N),dn(_,N,g),A.head.appendChild(_);break;case"meta":if(q=bA("meta","content",A).get(N+(g.content||""))){for(Q=0;Q<q.length;Q++)if(_=q[Q],_.getAttribute("content")===(g.content==null?null:""+g.content)&&_.getAttribute("name")===(g.name==null?null:g.name)&&_.getAttribute("property")===(g.property==null?null:g.property)&&_.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&_.getAttribute("charset")===(g.charSet==null?null:g.charSet)){q.splice(Q,1);break t}}_=A.createElement(N),dn(_,N,g),A.head.appendChild(_);break;default:throw Error(n(468,N))}_[Zr]=i,Ur(_),N=_}i.stateNode=N}else vA(A,i.type,i.stateNode);else i.stateNode=yA(A,N,i.memoizedProps);else _!==N?(_===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):_.count--,N===null?vA(A,i.type,i.stateNode):yA(A,N,i.memoizedProps)):N===null&&i.stateNode!==null&&s1(i,i.memoizedProps,g.memoizedProps)}break;case 27:Rn(c,i),Ln(i),N&512&&(ks||g===null||Ei(g,g.return)),g!==null&&N&4&&s1(i,i.memoizedProps,g.memoizedProps);break;case 5:if(Rn(c,i),Ln(i),N&512&&(ks||g===null||Ei(g,g.return)),i.flags&32){A=i.stateNode;try{zl(A,"")}catch(gt){vr(i,i.return,gt)}}N&4&&i.stateNode!=null&&(A=i.memoizedProps,s1(i,A,g!==null?g.memoizedProps:A)),N&1024&&(i1=!0);break;case 6:if(Rn(c,i),Ln(i),N&4){if(i.stateNode===null)throw Error(n(162));N=i.memoizedProps,g=i.stateNode;try{g.nodeValue=N}catch(gt){vr(i,i.return,gt)}}break;case 3:if(ym=null,A=ei,ei=xm(c.containerInfo),Rn(c,i),ei=A,Ln(i),N&4&&g!==null&&g.memoizedState.isDehydrated)try{_u(c.containerInfo)}catch(gt){vr(i,i.return,gt)}i1&&(i1=!1,vC(i));break;case 4:N=ei,ei=xm(i.stateNode.containerInfo),Rn(c,i),Ln(i),ei=N;break;case 12:Rn(c,i),Ln(i);break;case 31:Rn(c,i),Ln(i),N&4&&(N=i.updateQueue,N!==null&&(i.updateQueue=null,rm(i,N)));break;case 13:Rn(c,i),Ln(i),i.child.flags&8192&&i.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(nm=ft()),N&4&&(N=i.updateQueue,N!==null&&(i.updateQueue=null,rm(i,N)));break;case 22:A=i.memoizedState!==null;var he=g!==null&&g.memoizedState!==null,ke=al,$e=ks;if(al=ke||A,ks=$e||he,Rn(c,i),ks=$e,al=ke,Ln(i),N&8192)e:for(c=i.stateNode,c._visibility=A?c._visibility&-2:c._visibility|1,A&&(g===null||he||al||ks||gc(i)),g=null,c=i;;){if(c.tag===5||c.tag===26){if(g===null){he=g=c;try{if(_=he.stateNode,A)q=_.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none";else{Q=he.stateNode;var Ye=he.memoizedProps.style,_e=Ye!=null&&Ye.hasOwnProperty("display")?Ye.display:null;Q.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(gt){vr(he,he.return,gt)}}}else if(c.tag===6){if(g===null){he=c;try{he.stateNode.nodeValue=A?"":he.memoizedProps}catch(gt){vr(he,he.return,gt)}}}else if(c.tag===18){if(g===null){he=c;try{var Be=he.stateNode;A?cA(Be,!0):cA(he.stateNode,!1)}catch(gt){vr(he,he.return,gt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===i)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break e;for(;c.sibling===null;){if(c.return===null||c.return===i)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}N&4&&(N=i.updateQueue,N!==null&&(g=N.retryQueue,g!==null&&(N.retryQueue=null,rm(i,g))));break;case 19:Rn(c,i),Ln(i),N&4&&(N=i.updateQueue,N!==null&&(i.updateQueue=null,rm(i,N)));break;case 30:break;case 21:break;default:Rn(c,i),Ln(i)}}function Ln(i){var c=i.flags;if(c&2){try{for(var g,N=i.return;N!==null;){if(dC(N)){g=N;break}N=N.return}if(g==null)throw Error(n(160));switch(g.tag){case 27:var A=g.stateNode,_=n1(i);tm(i,_,A);break;case 5:var q=g.stateNode;g.flags&32&&(zl(q,""),g.flags&=-33);var Q=n1(i);tm(i,Q,q);break;case 3:case 4:var he=g.stateNode.containerInfo,ke=n1(i);a1(i,ke,he);break;default:throw Error(n(161))}}catch($e){vr(i,i.return,$e)}i.flags&=-3}c&4096&&(i.flags&=-4097)}function vC(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var c=i;vC(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),i=i.sibling}}function ll(i,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)mC(i,c.alternate,c),c=c.sibling}function gc(i){for(i=i.child;i!==null;){var c=i;switch(c.tag){case 0:case 11:case 14:case 15:ao(4,c,c.return),gc(c);break;case 1:Ei(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&cC(c,c.return,g),gc(c);break;case 27:wh(c.stateNode);case 26:case 5:Ei(c,c.return),gc(c);break;case 22:c.memoizedState===null&&gc(c);break;case 30:gc(c);break;default:gc(c)}i=i.sibling}}function ol(i,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var N=c.alternate,A=i,_=c,q=_.flags;switch(_.tag){case 0:case 11:case 15:ol(A,_,g),hh(4,_);break;case 1:if(ol(A,_,g),N=_,A=N.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(ke){vr(N,N.return,ke)}if(N=_,A=N.updateQueue,A!==null){var Q=N.stateNode;try{var he=A.shared.hiddenCallbacks;if(he!==null)for(A.shared.hiddenCallbacks=null,A=0;A<he.length;A++)ZS(he[A],Q)}catch(ke){vr(N,N.return,ke)}}g&&q&64&&oC(_),fh(_,_.return);break;case 27:hC(_);case 26:case 5:ol(A,_,g),g&&N===null&&q&4&&uC(_),fh(_,_.return);break;case 12:ol(A,_,g);break;case 31:ol(A,_,g),g&&q&4&&pC(A,_);break;case 13:ol(A,_,g),g&&q&4&&yC(A,_);break;case 22:_.memoizedState===null&&ol(A,_,g),fh(_,_.return);break;case 30:break;default:ol(A,_,g)}c=c.sibling}}function l1(i,c){var g=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(g=i.memoizedState.cachePool.pool),i=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(i=c.memoizedState.cachePool.pool),i!==g&&(i!=null&&i.refCount++,g!=null&&Jd(g))}function o1(i,c){i=null,c.alternate!==null&&(i=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==i&&(c.refCount++,i!=null&&Jd(i))}function ti(i,c,g,N){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)NC(i,c,g,N),c=c.sibling}function NC(i,c,g,N){var A=c.flags;switch(c.tag){case 0:case 11:case 15:ti(i,c,g,N),A&2048&&hh(9,c);break;case 1:ti(i,c,g,N);break;case 3:ti(i,c,g,N),A&2048&&(i=null,c.alternate!==null&&(i=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==i&&(c.refCount++,i!=null&&Jd(i)));break;case 12:if(A&2048){ti(i,c,g,N),i=c.stateNode;try{var _=c.memoizedProps,q=_.id,Q=_.onPostCommit;typeof Q=="function"&&Q(q,c.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(he){vr(c,c.return,he)}}else ti(i,c,g,N);break;case 31:ti(i,c,g,N);break;case 13:ti(i,c,g,N);break;case 23:break;case 22:_=c.stateNode,q=c.alternate,c.memoizedState!==null?_._visibility&2?ti(i,c,g,N):mh(i,c):_._visibility&2?ti(i,c,g,N):(_._visibility|=2,Nu(i,c,g,N,(c.subtreeFlags&10256)!==0||!1)),A&2048&&l1(q,c);break;case 24:ti(i,c,g,N),A&2048&&o1(c.alternate,c);break;default:ti(i,c,g,N)}}function Nu(i,c,g,N,A){for(A=A&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var _=i,q=c,Q=g,he=N,ke=q.flags;switch(q.tag){case 0:case 11:case 15:Nu(_,q,Q,he,A),hh(8,q);break;case 23:break;case 22:var $e=q.stateNode;q.memoizedState!==null?$e._visibility&2?Nu(_,q,Q,he,A):mh(_,q):($e._visibility|=2,Nu(_,q,Q,he,A)),A&&ke&2048&&l1(q.alternate,q);break;case 24:Nu(_,q,Q,he,A),A&&ke&2048&&o1(q.alternate,q);break;default:Nu(_,q,Q,he,A)}c=c.sibling}}function mh(i,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=i,N=c,A=N.flags;switch(N.tag){case 22:mh(g,N),A&2048&&l1(N.alternate,N);break;case 24:mh(g,N),A&2048&&o1(N.alternate,N);break;default:mh(g,N)}c=c.sibling}}var gh=8192;function wu(i,c,g){if(i.subtreeFlags&gh)for(i=i.child;i!==null;)wC(i,c,g),i=i.sibling}function wC(i,c,g){switch(i.tag){case 26:wu(i,c,g),i.flags&gh&&i.memoizedState!==null&&Q9(g,ei,i.memoizedState,i.memoizedProps);break;case 5:wu(i,c,g);break;case 3:case 4:var N=ei;ei=xm(i.stateNode.containerInfo),wu(i,c,g),ei=N;break;case 22:i.memoizedState===null&&(N=i.alternate,N!==null&&N.memoizedState!==null?(N=gh,gh=16777216,wu(i,c,g),gh=N):wu(i,c,g));break;default:wu(i,c,g)}}function jC(i){var c=i.alternate;if(c!==null&&(i=c.child,i!==null)){c.child=null;do c=i.sibling,i.sibling=null,i=c;while(i!==null)}}function xh(i){var c=i.deletions;if((i.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var N=c[g];Zs=N,CC(N,i)}jC(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)SC(i),i=i.sibling}function SC(i){switch(i.tag){case 0:case 11:case 15:xh(i),i.flags&2048&&ao(9,i,i.return);break;case 3:xh(i);break;case 12:xh(i);break;case 22:var c=i.stateNode;i.memoizedState!==null&&c._visibility&2&&(i.return===null||i.return.tag!==13)?(c._visibility&=-3,sm(i)):xh(i);break;default:xh(i)}}function sm(i){var c=i.deletions;if((i.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var N=c[g];Zs=N,CC(N,i)}jC(i)}for(i=i.child;i!==null;){switch(c=i,c.tag){case 0:case 11:case 15:ao(8,c,c.return),sm(c);break;case 22:g=c.stateNode,g._visibility&2&&(g._visibility&=-3,sm(c));break;default:sm(c)}i=i.sibling}}function CC(i,c){for(;Zs!==null;){var g=Zs;switch(g.tag){case 0:case 11:case 15:ao(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var N=g.memoizedState.cachePool.pool;N!=null&&N.refCount++}break;case 24:Jd(g.memoizedState.cache)}if(N=g.child,N!==null)N.return=g,Zs=N;else e:for(g=i;Zs!==null;){N=Zs;var A=N.sibling,_=N.return;if(gC(N),N===g){Zs=null;break e}if(A!==null){A.return=_,Zs=A;break e}Zs=_}}}var f9={getCacheForType:function(i){var c=cn(Ts),g=c.data.get(i);return g===void 0&&(g=i(),c.data.set(i,g)),g},cacheSignal:function(){return cn(Ts).controller.signal}},m9=typeof WeakMap=="function"?WeakMap:Map,dr=0,Rr=null,Xt=null,Zt=0,br=0,na=null,io=!1,ju=!1,c1=!1,cl=0,fs=0,lo=0,xc=0,u1=0,aa=0,Su=0,ph=null,Bn=null,d1=!1,nm=0,AC=0,am=1/0,im=null,oo=null,zs=0,co=null,Cu=null,ul=0,h1=0,f1=null,EC=null,yh=0,m1=null;function ia(){return(dr&2)!==0&&Zt!==0?Zt&-Zt:J.T!==null?v1():Ws()}function TC(){if(aa===0)if((Zt&536870912)===0||Jt){var i=bt;bt<<=1,(bt&3932160)===0&&(bt=262144),aa=i}else aa=536870912;return i=ra.current,i!==null&&(i.flags|=32),aa}function Fn(i,c,g){(i===Rr&&(br===2||br===9)||i.cancelPendingCommit!==null)&&(Au(i,0),uo(i,Zt,aa,!1)),ba(i,g),((dr&2)===0||i!==Rr)&&(i===Rr&&((dr&2)===0&&(xc|=g),fs===4&&uo(i,Zt,aa,!1)),Ti(i))}function OC(i,c,g){if((dr&6)!==0)throw Error(n(327));var N=!g&&(c&127)===0&&(c&i.expiredLanes)===0||us(i,c),A=N?p9(i,c):x1(i,c,!0),_=N;do{if(A===0){ju&&!N&&uo(i,c,0,!1);break}else{if(g=i.current.alternate,_&&!g9(g)){A=x1(i,c,!1),_=!1;continue}if(A===2){if(_=c,i.errorRecoveryDisabledLanes&_)var q=0;else q=i.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){c=q;e:{var Q=i;A=ph;var he=Q.current.memoizedState.isDehydrated;if(he&&(Au(Q,q).flags|=256),q=x1(Q,q,!1),q!==2){if(c1&&!he){Q.errorRecoveryDisabledLanes|=_,xc|=_,A=4;break e}_=Bn,Bn=A,_!==null&&(Bn===null?Bn=_:Bn.push.apply(Bn,_))}A=q}if(_=!1,A!==2)continue}}if(A===1){Au(i,0),uo(i,c,0,!0);break}e:{switch(N=i,_=A,_){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:uo(N,c,aa,!io);break e;case 2:Bn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(A=nm+300-ft(),10<A)){if(uo(N,c,aa,!io),Tt(N,0,!0)!==0)break e;ul=c,N.timeoutHandle=iA(DC.bind(null,N,g,Bn,im,d1,c,aa,xc,Su,io,_,"Throttled",-0,0),A);break e}DC(N,g,Bn,im,d1,c,aa,xc,Su,io,_,null,-0,0)}}break}while(!0);Ti(i)}function DC(i,c,g,N,A,_,q,Q,he,ke,$e,Ye,_e,Be){if(i.timeoutHandle=-1,Ye=c.subtreeFlags,Ye&8192||(Ye&16785408)===16785408){Ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_n},wC(c,_,Ye);var gt=(_&62914560)===_?nm-ft():(_&4194048)===_?AC-ft():0;if(gt=J9(Ye,gt),gt!==null){ul=_,i.cancelPendingCommit=gt(BC.bind(null,i,c,_,g,N,A,q,Q,he,$e,Ye,null,_e,Be)),uo(i,_,q,!ke);return}}BC(i,c,_,g,N,A,q,Q,he)}function g9(i){for(var c=i;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var N=0;N<g.length;N++){var A=g[N],_=A.getSnapshot;A=A.value;try{if(!j(_(),A))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function uo(i,c,g,N){c&=~u1,c&=~xc,i.suspendedLanes|=c,i.pingedLanes&=~c,N&&(i.warmLanes|=c),N=i.expirationTimes;for(var A=c;0<A;){var _=31-nt(A),q=1<<_;N[_]=-1,A&=~q}g!==0&&Kc(i,g,c)}function lm(){return(dr&6)===0?(bh(0),!1):!0}function g1(){if(Xt!==null){if(br===0)var i=Xt.return;else i=Xt,Ji=lc=null,ky(i),xu=null,th=0,i=Xt;for(;i!==null;)lC(i.alternate,i),i=i.return;Xt=null}}function Au(i,c){var g=i.timeoutHandle;g!==-1&&(i.timeoutHandle=-1,M9(g)),g=i.cancelPendingCommit,g!==null&&(i.cancelPendingCommit=null,g()),ul=0,g1(),Rr=i,Xt=g=Zi(i.current,null),Zt=c,br=0,na=null,io=!1,ju=us(i,c),c1=!1,Su=aa=u1=xc=lo=fs=0,Bn=ph=null,d1=!1,(c&8)!==0&&(c|=c&32);var N=i.entangledLanes;if(N!==0)for(i=i.entanglements,N&=c;0<N;){var A=31-nt(N),_=1<<A;c|=i[A],N&=~_}return cl=c,T0(),g}function kC(i,c){Ft=null,J.H=ch,c===gu||c===R0?(c=YS(),br=3):c===by?(c=YS(),br=4):br=c===Yy?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,na=c,Xt===null&&(fs=1,K0(i,ja(c,i.current)))}function _C(){var i=ra.current;return i===null?!0:(Zt&4194048)===Zt?Ea===null:(Zt&62914560)===Zt||(Zt&536870912)!==0?i===Ea:!1}function PC(){var i=J.H;return J.H=ch,i===null?ch:i}function IC(){var i=J.A;return J.A=f9,i}function om(){fs=4,io||(Zt&4194048)!==Zt&&ra.current!==null||(ju=!0),(lo&134217727)===0&&(xc&134217727)===0||Rr===null||uo(Rr,Zt,aa,!1)}function x1(i,c,g){var N=dr;dr|=2;var A=PC(),_=IC();(Rr!==i||Zt!==c)&&(im=null,Au(i,c)),c=!1;var q=fs;e:do try{if(br!==0&&Xt!==null){var Q=Xt,he=na;switch(br){case 8:g1(),q=6;break e;case 3:case 2:case 9:case 6:ra.current===null&&(c=!0);var ke=br;if(br=0,na=null,Eu(i,Q,he,ke),g&&ju){q=0;break e}break;default:ke=br,br=0,na=null,Eu(i,Q,he,ke)}}x9(),q=fs;break}catch($e){kC(i,$e)}while(!0);return c&&i.shellSuspendCounter++,Ji=lc=null,dr=N,J.H=A,J.A=_,Xt===null&&(Rr=null,Zt=0,T0()),q}function x9(){for(;Xt!==null;)MC(Xt)}function p9(i,c){var g=dr;dr|=2;var N=PC(),A=IC();Rr!==i||Zt!==c?(im=null,am=ft()+500,Au(i,c)):ju=us(i,c);e:do try{if(br!==0&&Xt!==null){c=Xt;var _=na;t:switch(br){case 1:br=0,na=null,Eu(i,c,_,1);break;case 2:case 9:if(HS(_)){br=0,na=null,RC(c);break}c=function(){br!==2&&br!==9||Rr!==i||(br=7),Ti(i)},_.then(c,c);break e;case 3:br=7;break e;case 4:br=5;break e;case 7:HS(_)?(br=0,na=null,RC(c)):(br=0,na=null,Eu(i,c,_,7));break;case 5:var q=null;switch(Xt.tag){case 26:q=Xt.memoizedState;case 5:case 27:var Q=Xt;if(q?NA(q):Q.stateNode.complete){br=0,na=null;var he=Q.sibling;if(he!==null)Xt=he;else{var ke=Q.return;ke!==null?(Xt=ke,cm(ke)):Xt=null}break t}}br=0,na=null,Eu(i,c,_,5);break;case 6:br=0,na=null,Eu(i,c,_,6);break;case 8:g1(),fs=6;break e;default:throw Error(n(462))}}y9();break}catch($e){kC(i,$e)}while(!0);return Ji=lc=null,J.H=N,J.A=A,dr=g,Xt!==null?0:(Rr=null,Zt=0,T0(),fs)}function y9(){for(;Xt!==null&&!at();)MC(Xt)}function MC(i){var c=aC(i.alternate,i,cl);i.memoizedProps=i.pendingProps,c===null?cm(i):Xt=c}function RC(i){var c=i,g=c.alternate;switch(c.tag){case 15:case 0:c=J4(g,c,c.pendingProps,c.type,void 0,Zt);break;case 11:c=J4(g,c,c.pendingProps,c.type.render,c.ref,Zt);break;case 5:ky(c);default:lC(g,c),c=Xt=IS(c,cl),c=aC(g,c,cl)}i.memoizedProps=i.pendingProps,c===null?cm(i):Xt=c}function Eu(i,c,g,N){Ji=lc=null,ky(c),xu=null,th=0;var A=c.return;try{if(i9(i,A,c,g,Zt)){fs=1,K0(i,ja(g,i.current)),Xt=null;return}}catch(_){if(A!==null)throw Xt=A,_;fs=1,K0(i,ja(g,i.current)),Xt=null;return}c.flags&32768?(Jt||N===1?i=!0:ju||(Zt&536870912)!==0?i=!1:(io=i=!0,(N===2||N===9||N===3||N===6)&&(N=ra.current,N!==null&&N.tag===13&&(N.flags|=16384))),LC(c,i)):cm(c)}function cm(i){var c=i;do{if((c.flags&32768)!==0){LC(c,io);return}i=c.return;var g=c9(c.alternate,c,cl);if(g!==null){Xt=g;return}if(c=c.sibling,c!==null){Xt=c;return}Xt=c=i}while(c!==null);fs===0&&(fs=5)}function LC(i,c){do{var g=u9(i.alternate,i);if(g!==null){g.flags&=32767,Xt=g;return}if(g=i.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(i=i.sibling,i!==null)){Xt=i;return}Xt=i=g}while(i!==null);fs=6,Xt=null}function BC(i,c,g,N,A,_,q,Q,he){i.cancelPendingCommit=null;do um();while(zs!==0);if((dr&6)!==0)throw Error(n(327));if(c!==null){if(c===i.current)throw Error(n(177));if(_=c.lanes|c.childLanes,_|=ny,On(i,g,_,q,Q,he),i===Rr&&(Xt=Rr=null,Zt=0),Cu=c,co=i,ul=g,h1=_,f1=A,EC=N,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,w9(ct,function(){return $C(),null})):(i.callbackNode=null,i.callbackPriority=0),N=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||N){N=J.T,J.T=null,A=ne.p,ne.p=2,q=dr,dr|=4;try{d9(i,c,g)}finally{dr=q,ne.p=A,J.T=N}}zs=1,FC(),UC(),zC()}}function FC(){if(zs===1){zs=0;var i=co,c=Cu,g=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||g){g=J.T,J.T=null;var N=ne.p;ne.p=2;var A=dr;dr|=4;try{bC(c,i);var _=T1,q=K(i.containerInfo),Q=_.focusedElem,he=_.selectionRange;if(q!==Q&&Q&&Q.ownerDocument&&V(Q.ownerDocument.documentElement,Q)){if(he!==null&&Z(Q)){var ke=he.start,$e=he.end;if($e===void 0&&($e=ke),"selectionStart"in Q)Q.selectionStart=ke,Q.selectionEnd=Math.min($e,Q.value.length);else{var Ye=Q.ownerDocument||document,_e=Ye&&Ye.defaultView||window;if(_e.getSelection){var Be=_e.getSelection(),gt=Q.textContent.length,Ot=Math.min(he.start,gt),Er=he.end===void 0?Ot:Math.min(he.end,gt);!Be.extend&&Ot>Er&&(q=Er,Er=Ot,Ot=q);var Ce=I(Q,Ot),ye=I(Q,Er);if(Ce&&ye&&(Be.rangeCount!==1||Be.anchorNode!==Ce.node||Be.anchorOffset!==Ce.offset||Be.focusNode!==ye.node||Be.focusOffset!==ye.offset)){var De=Ye.createRange();De.setStart(Ce.node,Ce.offset),Be.removeAllRanges(),Ot>Er?(Be.addRange(De),Be.extend(ye.node,ye.offset)):(De.setEnd(ye.node,ye.offset),Be.addRange(De))}}}}for(Ye=[],Be=Q;Be=Be.parentNode;)Be.nodeType===1&&Ye.push({element:Be,left:Be.scrollLeft,top:Be.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<Ye.length;Q++){var Ge=Ye[Q];Ge.element.scrollLeft=Ge.left,Ge.element.scrollTop=Ge.top}}wm=!!E1,T1=E1=null}finally{dr=A,ne.p=N,J.T=g}}i.current=c,zs=2}}function UC(){if(zs===2){zs=0;var i=co,c=Cu,g=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||g){g=J.T,J.T=null;var N=ne.p;ne.p=2;var A=dr;dr|=4;try{mC(i,c.alternate,c)}finally{dr=A,ne.p=N,J.T=g}}zs=3}}function zC(){if(zs===4||zs===3){zs=0,Fe();var i=co,c=Cu,g=ul,N=EC;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?zs=5:(zs=0,Cu=co=null,VC(i,i.pendingLanes));var A=i.pendingLanes;if(A===0&&(oo=null),Wn(g),c=c.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(_t,c,void 0,(c.current.flags&128)===128)}catch{}if(N!==null){c=J.T,A=ne.p,ne.p=2,J.T=null;try{for(var _=i.onRecoverableError,q=0;q<N.length;q++){var Q=N[q];_(Q.value,{componentStack:Q.stack})}}finally{J.T=c,ne.p=A}}(ul&3)!==0&&um(),Ti(i),A=i.pendingLanes,(g&261930)!==0&&(A&42)!==0?i===m1?yh++:(yh=0,m1=i):yh=0,bh(0)}}function VC(i,c){(i.pooledCacheLanes&=c)===0&&(c=i.pooledCache,c!=null&&(i.pooledCache=null,Jd(c)))}function um(){return FC(),UC(),zC(),$C()}function $C(){if(zs!==5)return!1;var i=co,c=h1;h1=0;var g=Wn(ul),N=J.T,A=ne.p;try{ne.p=32>g?32:g,J.T=null,g=f1,f1=null;var _=co,q=ul;if(zs=0,Cu=co=null,ul=0,(dr&6)!==0)throw Error(n(331));var Q=dr;if(dr|=4,SC(_.current),NC(_,_.current,q,g),dr=Q,bh(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(_t,_)}catch{}return!0}finally{ne.p=A,J.T=N,VC(i,c)}}function qC(i,c,g){c=ja(g,c),c=Gy(i.stateNode,c,2),i=ro(i,c,2),i!==null&&(ba(i,2),Ti(i))}function vr(i,c,g){if(i.tag===3)qC(i,i,g);else for(;c!==null;){if(c.tag===3){qC(c,i,g);break}else if(c.tag===1){var N=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(oo===null||!oo.has(N))){i=ja(g,i),g=H4(2),N=ro(c,g,2),N!==null&&(G4(g,N,c,i),ba(N,2),Ti(N));break}}c=c.return}}function p1(i,c,g){var N=i.pingCache;if(N===null){N=i.pingCache=new m9;var A=new Set;N.set(c,A)}else A=N.get(c),A===void 0&&(A=new Set,N.set(c,A));A.has(g)||(c1=!0,A.add(g),i=b9.bind(null,i,c,g),c.then(i,i))}function b9(i,c,g){var N=i.pingCache;N!==null&&N.delete(c),i.pingedLanes|=i.suspendedLanes&g,i.warmLanes&=~g,Rr===i&&(Zt&g)===g&&(fs===4||fs===3&&(Zt&62914560)===Zt&&300>ft()-nm?(dr&2)===0&&Au(i,0):u1|=g,Su===Zt&&(Su=0)),Ti(i)}function HC(i,c){c===0&&(c=jt()),i=nc(i,c),i!==null&&(ba(i,c),Ti(i))}function v9(i){var c=i.memoizedState,g=0;c!==null&&(g=c.retryLane),HC(i,g)}function N9(i,c){var g=0;switch(i.tag){case 31:case 13:var N=i.stateNode,A=i.memoizedState;A!==null&&(g=A.retryLane);break;case 19:N=i.stateNode;break;case 22:N=i.stateNode._retryCache;break;default:throw Error(n(314))}N!==null&&N.delete(c),HC(i,g)}function w9(i,c){return pt(i,c)}var dm=null,Tu=null,y1=!1,hm=!1,b1=!1,ho=0;function Ti(i){i!==Tu&&i.next===null&&(Tu===null?dm=Tu=i:Tu=Tu.next=i),hm=!0,y1||(y1=!0,S9())}function bh(i,c){if(!b1&&hm){b1=!0;do for(var g=!1,N=dm;N!==null;){if(i!==0){var A=N.pendingLanes;if(A===0)var _=0;else{var q=N.suspendedLanes,Q=N.pingedLanes;_=(1<<31-nt(42|i)+1)-1,_&=A&~(q&~Q),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(g=!0,WC(N,_))}else _=Zt,_=Tt(N,N===Rr?_:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),(_&3)===0||us(N,_)||(g=!0,WC(N,_));N=N.next}while(g);b1=!1}}function j9(){GC()}function GC(){hm=y1=!1;var i=0;ho!==0&&I9()&&(i=ho);for(var c=ft(),g=null,N=dm;N!==null;){var A=N.next,_=YC(N,c);_===0?(N.next=null,g===null?dm=A:g.next=A,A===null&&(Tu=g)):(g=N,(i!==0||(_&3)!==0)&&(hm=!0)),N=A}zs!==0&&zs!==5||bh(i),ho!==0&&(ho=0)}function YC(i,c){for(var g=i.suspendedLanes,N=i.pingedLanes,A=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var q=31-nt(_),Q=1<<q,he=A[q];he===-1?((Q&g)===0||(Q&N)!==0)&&(A[q]=ze(Q,c)):he<=c&&(i.expiredLanes|=Q),_&=~Q}if(c=Rr,g=Zt,g=Tt(i,i===c?g:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),N=i.callbackNode,g===0||i===c&&(br===2||br===9)||i.cancelPendingCommit!==null)return N!==null&&N!==null&&We(N),i.callbackNode=null,i.callbackPriority=0;if((g&3)===0||us(i,g)){if(c=g&-g,c===i.callbackPriority)return c;switch(N!==null&&We(N),Wn(g)){case 2:case 8:g=mr;break;case 32:g=ct;break;case 268435456:g=_r;break;default:g=ct}return N=XC.bind(null,i),g=pt(g,N),i.callbackPriority=c,i.callbackNode=g,c}return N!==null&&N!==null&&We(N),i.callbackPriority=2,i.callbackNode=null,2}function XC(i,c){if(zs!==0&&zs!==5)return i.callbackNode=null,i.callbackPriority=0,null;var g=i.callbackNode;if(um()&&i.callbackNode!==g)return null;var N=Zt;return N=Tt(i,i===Rr?N:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),N===0?null:(OC(i,N,c),YC(i,ft()),i.callbackNode!=null&&i.callbackNode===g?XC.bind(null,i):null)}function WC(i,c){if(um())return null;OC(i,c,!0)}function S9(){R9(function(){(dr&6)!==0?pt(rr,j9):GC()})}function v1(){if(ho===0){var i=fu;i===0&&(i=as,as<<=1,(as&261888)===0&&(as=256)),ho=i}return ho}function KC(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Vl(""+i)}function ZC(i,c){var g=c.ownerDocument.createElement("input");return g.name=c.name,g.value=c.value,i.id&&g.setAttribute("form",i.id),c.parentNode.insertBefore(g,c),i=new FormData(i),g.parentNode.removeChild(g),i}function C9(i,c,g,N,A){if(c==="submit"&&g&&g.stateNode===A){var _=KC((A[sr]||null).action),q=N.submitter;q&&(c=(c=q[sr]||null)?KC(c.formAction):q.getAttribute("formAction"),c!==null&&(_=c,q=null));var Q=new Bs("action","action",null,N,A);i.push({event:Q,listeners:[{instance:null,listener:function(){if(N.defaultPrevented){if(ho!==0){var he=q?ZC(A,q):new FormData(A);Uy(g,{pending:!0,data:he,method:A.method,action:_},null,he)}}else typeof _=="function"&&(Q.preventDefault(),he=q?ZC(A,q):new FormData(A),Uy(g,{pending:!0,data:he,method:A.method,action:_},_,he))},currentTarget:A}]})}}for(var N1=0;N1<Kd.length;N1++){var w1=Kd[N1],A9=w1.toLowerCase(),E9=w1[0].toUpperCase()+w1.slice(1);Ja(A9,"on"+E9)}Ja(In,"onAnimationEnd"),Ja(ln,"onAnimationIteration"),Ja(yr,"onAnimationStart"),Ja("dblclick","onDoubleClick"),Ja("focusin","onFocus"),Ja("focusout","onBlur"),Ja(Us,"onTransitionRun"),Ja(jn,"onTransitionStart"),Ja(Wl,"onTransitionCancel"),Ja(Ki,"onTransitionEnd"),Kn("onMouseEnter",["mouseout","mouseover"]),Kn("onMouseLeave",["mouseout","mouseover"]),Kn("onPointerEnter",["pointerout","pointerover"]),Kn("onPointerLeave",["pointerout","pointerover"]),xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xr("onBeforeInput",["compositionend","keypress","textInput","paste"]),xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vh));function QC(i,c){c=(c&4)!==0;for(var g=0;g<i.length;g++){var N=i[g],A=N.event;N=N.listeners;e:{var _=void 0;if(c)for(var q=N.length-1;0<=q;q--){var Q=N[q],he=Q.instance,ke=Q.currentTarget;if(Q=Q.listener,he!==_&&A.isPropagationStopped())break e;_=Q,A.currentTarget=ke;try{_(A)}catch($e){E0($e)}A.currentTarget=null,_=he}else for(q=0;q<N.length;q++){if(Q=N[q],he=Q.instance,ke=Q.currentTarget,Q=Q.listener,he!==_&&A.isPropagationStopped())break e;_=Q,A.currentTarget=ke;try{_(A)}catch($e){E0($e)}A.currentTarget=null,_=he}}}}function Wt(i,c){var g=c[bi];g===void 0&&(g=c[bi]=new Set);var N=i+"__bubble";g.has(N)||(JC(c,i,2,!1),g.add(N))}function j1(i,c,g){var N=0;c&&(N|=4),JC(g,i,N,c)}var fm="_reactListening"+Math.random().toString(36).slice(2);function S1(i){if(!i[fm]){i[fm]=!0,Ke.forEach(function(g){g!=="selectionchange"&&(T9.has(g)||j1(g,!1,i),j1(g,!0,i))});var c=i.nodeType===9?i:i.ownerDocument;c===null||c[fm]||(c[fm]=!0,j1("selectionchange",!1,c))}}function JC(i,c,g,N){switch(TA(c)){case 2:var A=rL;break;case 8:A=sL;break;default:A=F1}g=A.bind(null,c,g,i),A=void 0,!$d||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(A=!0),N?A!==void 0?i.addEventListener(c,g,{capture:!0,passive:A}):i.addEventListener(c,g,!0):A!==void 0?i.addEventListener(c,g,{passive:A}):i.addEventListener(c,g,!1)}function C1(i,c,g,N,A){var _=N;if((c&1)===0&&(c&2)===0&&N!==null)e:for(;;){if(N===null)return;var q=N.tag;if(q===3||q===4){var Q=N.stateNode.containerInfo;if(Q===A)break;if(q===4)for(q=N.return;q!==null;){var he=q.tag;if((he===3||he===4)&&q.stateNode.containerInfo===A)return;q=q.return}for(;Q!==null;){if(q=$r(Q),q===null)return;if(he=q.tag,he===5||he===6||he===26||he===27){N=_=q;continue e}Q=Q.parentNode}}N=N.return}x0(function(){var ke=_,$e=Vd(g),Ye=[];e:{var _e=A0.get(i);if(_e!==void 0){var Be=Bs,gt=i;switch(i){case"keypress":if(Ni(g)===0)break e;case"keydown":case"keyup":Be=nu;break;case"focusin":gt="focus",Be=Gd;break;case"focusout":gt="blur",Be=Gd;break;case"beforeblur":case"afterblur":Be=Gd;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=ur;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=ty;break;case In:case ln:case yr:Be=zt;break;case Ki:Be=Gi;break;case"scroll":case"scrollend":Be=p0;break;case"wheel":Be=ry;break;case"copy":case"cut":case"paste":Be=su;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=pr;break;case"toggle":case"beforetoggle":Be=Xd}var Ot=(c&4)!==0,Er=!Ot&&(i==="scroll"||i==="scrollend"),Ce=Ot?_e!==null?_e+"Capture":null:_e;Ot=[];for(var ye=ke,De;ye!==null;){var Ge=ye;if(De=Ge.stateNode,Ge=Ge.tag,Ge!==5&&Ge!==26&&Ge!==27||De===null||Ce===null||(Ge=kt(ye,Ce),Ge!=null&&Ot.push(Nh(ye,Ge,De))),Er)break;ye=ye.return}0<Ot.length&&(_e=new Be(_e,gt,null,g,$e),Ye.push({event:_e,listeners:Ot}))}}if((c&7)===0){e:{if(_e=i==="mouseover"||i==="pointerover",Be=i==="mouseout"||i==="pointerout",_e&&g!==Ko&&(gt=g.relatedTarget||g.fromElement)&&($r(gt)||gt[vn]))break e;if((Be||_e)&&(_e=$e.window===$e?$e:(_e=$e.ownerDocument)?_e.defaultView||_e.parentWindow:window,Be?(gt=g.relatedTarget||g.toElement,Be=ke,gt=gt?$r(gt):null,gt!==null&&(Er=l(gt),Ot=gt.tag,gt!==Er||Ot!==5&&Ot!==27&&Ot!==6)&&(gt=null)):(Be=null,gt=ke),Be!==gt)){if(Ot=ur,Ge="onMouseLeave",Ce="onMouseEnter",ye="mouse",(i==="pointerout"||i==="pointerover")&&(Ot=pr,Ge="onPointerLeave",Ce="onPointerEnter",ye="pointer"),Er=Be==null?_e:Ve(Be),De=gt==null?_e:Ve(gt),_e=new Ot(Ge,ye+"leave",Be,g,$e),_e.target=Er,_e.relatedTarget=De,Ge=null,$r($e)===ke&&(Ot=new Ot(Ce,ye+"enter",gt,g,$e),Ot.target=De,Ot.relatedTarget=Er,Ge=Ot),Er=Ge,Be&&gt)t:{for(Ot=O9,Ce=Be,ye=gt,De=0,Ge=Ce;Ge;Ge=Ot(Ge))De++;Ge=0;for(var wt=ye;wt;wt=Ot(wt))Ge++;for(;0<De-Ge;)Ce=Ot(Ce),De--;for(;0<Ge-De;)ye=Ot(ye),Ge--;for(;De--;){if(Ce===ye||ye!==null&&Ce===ye.alternate){Ot=Ce;break t}Ce=Ot(Ce),ye=Ot(ye)}Ot=null}else Ot=null;Be!==null&&eA(Ye,_e,Be,Ot,!1),gt!==null&&Er!==null&&eA(Ye,Er,gt,Ot,!0)}}e:{if(_e=ke?Ve(ke):window,Be=_e.nodeName&&_e.nodeName.toLowerCase(),Be==="select"||Be==="input"&&_e.type==="file")var lr=ea;else if(Wd(_e))if(C0)lr=y;else{lr=d;var vt=o}else Be=_e.nodeName,!Be||Be.toLowerCase()!=="input"||_e.type!=="checkbox"&&_e.type!=="radio"?ke&&Pr(ke.elementType)&&(lr=ea):lr=h;if(lr&&(lr=lr(i,ke))){Jn(Ye,lr,g,$e);break e}vt&&vt(i,_e,ke),i==="focusout"&&ke&&_e.type==="number"&&ke.memoizedProps.value!=null&&ae(_e,"number",_e.value)}switch(vt=ke?Ve(ke):window,i){case"focusin":(Wd(vt)||vt.contentEditable==="true")&&(me=vt,xe=ke,Ae=null);break;case"focusout":Ae=xe=me=null;break;case"mousedown":Pe=!0;break;case"contextmenu":case"mouseup":case"dragend":Pe=!1,rt(Ye,g,$e);break;case"selectionchange":if(ie)break;case"keydown":case"keyup":rt(Ye,g,$e)}var Vt;if(Jo)e:{switch(i){case"compositionstart":var Qt="onCompositionStart";break e;case"compositionend":Qt="onCompositionEnd";break e;case"compositionupdate":Qt="onCompositionUpdate";break e}Qt=void 0}else Xl?S0(i,g)&&(Qt="onCompositionEnd"):i==="keydown"&&g.keyCode===229&&(Qt="onCompositionStart");Qt&&(j0&&g.locale!=="ko"&&(Xl||Qt!=="onCompositionStart"?Qt==="onCompositionEnd"&&Xl&&(Vt=$l()):(Za=$e,Qa="value"in Za?Za.value:Za.textContent,Xl=!0)),vt=mm(ke,Qt),0<vt.length&&(Qt=new v0(Qt,i,null,g,$e),Ye.push({event:Qt,listeners:vt}),Vt?Qt.data=Vt:(Vt=Yl(g),Vt!==null&&(Qt.data=Vt)))),(Vt=w0?Si(i,g):iu(i,g))&&(Qt=mm(ke,"onBeforeInput"),0<Qt.length&&(vt=new v0("onBeforeInput","beforeinput",null,g,$e),Ye.push({event:vt,listeners:Qt}),vt.data=Vt)),C9(Ye,i,ke,g,$e)}QC(Ye,c)})}function Nh(i,c,g){return{instance:i,listener:c,currentTarget:g}}function mm(i,c){for(var g=c+"Capture",N=[];i!==null;){var A=i,_=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||_===null||(A=kt(i,g),A!=null&&N.unshift(Nh(i,A,_)),A=kt(i,c),A!=null&&N.push(Nh(i,A,_))),i.tag===3)return N;i=i.return}return[]}function O9(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function eA(i,c,g,N,A){for(var _=c._reactName,q=[];g!==null&&g!==N;){var Q=g,he=Q.alternate,ke=Q.stateNode;if(Q=Q.tag,he!==null&&he===N)break;Q!==5&&Q!==26&&Q!==27||ke===null||(he=ke,A?(ke=kt(g,_),ke!=null&&q.unshift(Nh(g,ke,he))):A||(ke=kt(g,_),ke!=null&&q.push(Nh(g,ke,he)))),g=g.return}q.length!==0&&i.push({event:c,listeners:q})}var D9=/\r\n?/g,k9=/\u0000|\uFFFD/g;function tA(i){return(typeof i=="string"?i:""+i).replace(D9,`
`).replace(k9,"")}function rA(i,c){return c=tA(c),tA(i)===c}function Ar(i,c,g,N,A,_){switch(g){case"children":typeof N=="string"?c==="body"||c==="textarea"&&N===""||zl(i,N):(typeof N=="number"||typeof N=="bigint")&&c!=="body"&&zl(i,""+N);break;case"className":Fl(i,"class",N);break;case"tabIndex":Fl(i,"tabindex",N);break;case"dir":case"role":case"viewBox":case"width":case"height":Fl(i,g,N);break;case"style":Nt(i,N,_);break;case"data":if(c!=="object"){Fl(i,"data",N);break}case"src":case"href":if(N===""&&(c!=="a"||g!=="href")){i.removeAttribute(g);break}if(N==null||typeof N=="function"||typeof N=="symbol"||typeof N=="boolean"){i.removeAttribute(g);break}N=Vl(""+N),i.setAttribute(g,N);break;case"action":case"formAction":if(typeof N=="function"){i.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(g==="formAction"?(c!=="input"&&Ar(i,c,"name",A.name,A,null),Ar(i,c,"formEncType",A.formEncType,A,null),Ar(i,c,"formMethod",A.formMethod,A,null),Ar(i,c,"formTarget",A.formTarget,A,null)):(Ar(i,c,"encType",A.encType,A,null),Ar(i,c,"method",A.method,A,null),Ar(i,c,"target",A.target,A,null)));if(N==null||typeof N=="symbol"||typeof N=="boolean"){i.removeAttribute(g);break}N=Vl(""+N),i.setAttribute(g,N);break;case"onClick":N!=null&&(i.onclick=_n);break;case"onScroll":N!=null&&Wt("scroll",i);break;case"onScrollEnd":N!=null&&Wt("scrollend",i);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(n(61));if(g=N.__html,g!=null){if(A.children!=null)throw Error(n(60));i.innerHTML=g}}break;case"multiple":i.multiple=N&&typeof N!="function"&&typeof N!="symbol";break;case"muted":i.muted=N&&typeof N!="function"&&typeof N!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(N==null||typeof N=="function"||typeof N=="boolean"||typeof N=="symbol"){i.removeAttribute("xlink:href");break}g=Vl(""+N),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":N!=null&&typeof N!="function"&&typeof N!="symbol"?i.setAttribute(g,""+N):i.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":N&&typeof N!="function"&&typeof N!="symbol"?i.setAttribute(g,""):i.removeAttribute(g);break;case"capture":case"download":N===!0?i.setAttribute(g,""):N!==!1&&N!=null&&typeof N!="function"&&typeof N!="symbol"?i.setAttribute(g,N):i.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":N!=null&&typeof N!="function"&&typeof N!="symbol"&&!isNaN(N)&&1<=N?i.setAttribute(g,N):i.removeAttribute(g);break;case"rowSpan":case"start":N==null||typeof N=="function"||typeof N=="symbol"||isNaN(N)?i.removeAttribute(g):i.setAttribute(g,N);break;case"popover":Wt("beforetoggle",i),Wt("toggle",i),Bl(i,"popover",N);break;case"xlinkActuate":Zn(i,"http://www.w3.org/1999/xlink","xlink:actuate",N);break;case"xlinkArcrole":Zn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",N);break;case"xlinkRole":Zn(i,"http://www.w3.org/1999/xlink","xlink:role",N);break;case"xlinkShow":Zn(i,"http://www.w3.org/1999/xlink","xlink:show",N);break;case"xlinkTitle":Zn(i,"http://www.w3.org/1999/xlink","xlink:title",N);break;case"xlinkType":Zn(i,"http://www.w3.org/1999/xlink","xlink:type",N);break;case"xmlBase":Zn(i,"http://www.w3.org/XML/1998/namespace","xml:base",N);break;case"xmlLang":Zn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",N);break;case"xmlSpace":Zn(i,"http://www.w3.org/XML/1998/namespace","xml:space",N);break;case"is":Bl(i,"is",N);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=g0.get(g)||g,Bl(i,g,N))}}function A1(i,c,g,N,A,_){switch(g){case"style":Nt(i,N,_);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(n(61));if(g=N.__html,g!=null){if(A.children!=null)throw Error(n(60));i.innerHTML=g}}break;case"children":typeof N=="string"?zl(i,N):(typeof N=="number"||typeof N=="bigint")&&zl(i,""+N);break;case"onScroll":N!=null&&Wt("scroll",i);break;case"onScrollEnd":N!=null&&Wt("scrollend",i);break;case"onClick":N!=null&&(i.onclick=_n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!m0.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(A=g.endsWith("Capture"),c=g.slice(2,A?g.length-7:void 0),_=i[sr]||null,_=_!=null?_[g]:null,typeof _=="function"&&i.removeEventListener(c,_,A),typeof N=="function")){typeof _!="function"&&_!==null&&(g in i?i[g]=null:i.hasAttribute(g)&&i.removeAttribute(g)),i.addEventListener(c,N,A);break e}g in i?i[g]=N:N===!0?i.setAttribute(g,""):Bl(i,g,N)}}}function dn(i,c,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Wt("error",i),Wt("load",i);var N=!1,A=!1,_;for(_ in g)if(g.hasOwnProperty(_)){var q=g[_];if(q!=null)switch(_){case"src":N=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Ar(i,c,_,q,g,null)}}A&&Ar(i,c,"srcSet",g.srcSet,g,null),N&&Ar(i,c,"src",g.src,g,null);return;case"input":Wt("invalid",i);var Q=_=q=A=null,he=null,ke=null;for(N in g)if(g.hasOwnProperty(N)){var $e=g[N];if($e!=null)switch(N){case"name":A=$e;break;case"type":q=$e;break;case"checked":he=$e;break;case"defaultChecked":ke=$e;break;case"value":_=$e;break;case"defaultValue":Q=$e;break;case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(n(137,c));break;default:Ar(i,c,N,$e,g,null)}}Oe(i,_,Q,he,ke,q,A,!1);return;case"select":Wt("invalid",i),N=q=_=null;for(A in g)if(g.hasOwnProperty(A)&&(Q=g[A],Q!=null))switch(A){case"value":_=Q;break;case"defaultValue":q=Q;break;case"multiple":N=Q;default:Ar(i,c,A,Q,g,null)}c=_,g=q,i.multiple=!!N,c!=null?yt(i,!!N,c,!1):g!=null&&yt(i,!!N,g,!0);return;case"textarea":Wt("invalid",i),_=A=N=null;for(q in g)if(g.hasOwnProperty(q)&&(Q=g[q],Q!=null))switch(q){case"value":N=Q;break;case"defaultValue":A=Q;break;case"children":_=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(91));break;default:Ar(i,c,q,Q,g,null)}Nn(i,N,A,_);return;case"option":for(he in g)if(g.hasOwnProperty(he)&&(N=g[he],N!=null))switch(he){case"selected":i.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:Ar(i,c,he,N,g,null)}return;case"dialog":Wt("beforetoggle",i),Wt("toggle",i),Wt("cancel",i),Wt("close",i);break;case"iframe":case"object":Wt("load",i);break;case"video":case"audio":for(N=0;N<vh.length;N++)Wt(vh[N],i);break;case"image":Wt("error",i),Wt("load",i);break;case"details":Wt("toggle",i);break;case"embed":case"source":case"link":Wt("error",i),Wt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ke in g)if(g.hasOwnProperty(ke)&&(N=g[ke],N!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Ar(i,c,ke,N,g,null)}return;default:if(Pr(c)){for($e in g)g.hasOwnProperty($e)&&(N=g[$e],N!==void 0&&A1(i,c,$e,N,g,void 0));return}}for(Q in g)g.hasOwnProperty(Q)&&(N=g[Q],N!=null&&Ar(i,c,Q,N,g,null))}function _9(i,c,g,N){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,_=null,q=null,Q=null,he=null,ke=null,$e=null;for(Be in g){var Ye=g[Be];if(g.hasOwnProperty(Be)&&Ye!=null)switch(Be){case"checked":break;case"value":break;case"defaultValue":he=Ye;default:N.hasOwnProperty(Be)||Ar(i,c,Be,null,N,Ye)}}for(var _e in N){var Be=N[_e];if(Ye=g[_e],N.hasOwnProperty(_e)&&(Be!=null||Ye!=null))switch(_e){case"type":_=Be;break;case"name":A=Be;break;case"checked":ke=Be;break;case"defaultChecked":$e=Be;break;case"value":q=Be;break;case"defaultValue":Q=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(n(137,c));break;default:Be!==Ye&&Ar(i,c,_e,Be,N,Ye)}}As(i,q,Q,he,ke,$e,_,A);return;case"select":Be=q=Q=_e=null;for(_ in g)if(he=g[_],g.hasOwnProperty(_)&&he!=null)switch(_){case"value":break;case"multiple":Be=he;default:N.hasOwnProperty(_)||Ar(i,c,_,null,N,he)}for(A in N)if(_=N[A],he=g[A],N.hasOwnProperty(A)&&(_!=null||he!=null))switch(A){case"value":_e=_;break;case"defaultValue":Q=_;break;case"multiple":q=_;default:_!==he&&Ar(i,c,A,_,N,he)}c=Q,g=q,N=Be,_e!=null?yt(i,!!g,_e,!1):!!N!=!!g&&(c!=null?yt(i,!!g,c,!0):yt(i,!!g,g?[]:"",!1));return;case"textarea":Be=_e=null;for(Q in g)if(A=g[Q],g.hasOwnProperty(Q)&&A!=null&&!N.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:Ar(i,c,Q,null,N,A)}for(q in N)if(A=N[q],_=g[q],N.hasOwnProperty(q)&&(A!=null||_!=null))switch(q){case"value":_e=A;break;case"defaultValue":Be=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:A!==_&&Ar(i,c,q,A,N,_)}ys(i,_e,Be);return;case"option":for(var gt in g)if(_e=g[gt],g.hasOwnProperty(gt)&&_e!=null&&!N.hasOwnProperty(gt))switch(gt){case"selected":i.selected=!1;break;default:Ar(i,c,gt,null,N,_e)}for(he in N)if(_e=N[he],Be=g[he],N.hasOwnProperty(he)&&_e!==Be&&(_e!=null||Be!=null))switch(he){case"selected":i.selected=_e&&typeof _e!="function"&&typeof _e!="symbol";break;default:Ar(i,c,he,_e,N,Be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ot in g)_e=g[Ot],g.hasOwnProperty(Ot)&&_e!=null&&!N.hasOwnProperty(Ot)&&Ar(i,c,Ot,null,N,_e);for(ke in N)if(_e=N[ke],Be=g[ke],N.hasOwnProperty(ke)&&_e!==Be&&(_e!=null||Be!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(n(137,c));break;default:Ar(i,c,ke,_e,N,Be)}return;default:if(Pr(c)){for(var Er in g)_e=g[Er],g.hasOwnProperty(Er)&&_e!==void 0&&!N.hasOwnProperty(Er)&&A1(i,c,Er,void 0,N,_e);for($e in N)_e=N[$e],Be=g[$e],!N.hasOwnProperty($e)||_e===Be||_e===void 0&&Be===void 0||A1(i,c,$e,_e,N,Be);return}}for(var Ce in g)_e=g[Ce],g.hasOwnProperty(Ce)&&_e!=null&&!N.hasOwnProperty(Ce)&&Ar(i,c,Ce,null,N,_e);for(Ye in N)_e=N[Ye],Be=g[Ye],!N.hasOwnProperty(Ye)||_e===Be||_e==null&&Be==null||Ar(i,c,Ye,_e,N,Be)}function sA(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function P9(){if(typeof performance.getEntriesByType=="function"){for(var i=0,c=0,g=performance.getEntriesByType("resource"),N=0;N<g.length;N++){var A=g[N],_=A.transferSize,q=A.initiatorType,Q=A.duration;if(_&&Q&&sA(q)){for(q=0,Q=A.responseEnd,N+=1;N<g.length;N++){var he=g[N],ke=he.startTime;if(ke>Q)break;var $e=he.transferSize,Ye=he.initiatorType;$e&&sA(Ye)&&(he=he.responseEnd,q+=$e*(he<Q?1:(Q-ke)/(he-ke)))}if(--N,c+=8*(_+q)/(A.duration/1e3),i++,10<i)break}}if(0<i)return c/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var E1=null,T1=null;function gm(i){return i.nodeType===9?i:i.ownerDocument}function nA(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aA(i,c){if(i===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&c==="foreignObject"?0:i}function O1(i,c){return i==="textarea"||i==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var D1=null;function I9(){var i=window.event;return i&&i.type==="popstate"?i===D1?!1:(D1=i,!0):(D1=null,!1)}var iA=typeof setTimeout=="function"?setTimeout:void 0,M9=typeof clearTimeout=="function"?clearTimeout:void 0,lA=typeof Promise=="function"?Promise:void 0,R9=typeof queueMicrotask=="function"?queueMicrotask:typeof lA<"u"?function(i){return lA.resolve(null).then(i).catch(L9)}:iA;function L9(i){setTimeout(function(){throw i})}function fo(i){return i==="head"}function oA(i,c){var g=c,N=0;do{var A=g.nextSibling;if(i.removeChild(g),A&&A.nodeType===8)if(g=A.data,g==="/$"||g==="/&"){if(N===0){i.removeChild(A),_u(c);return}N--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")N++;else if(g==="html")wh(i.ownerDocument.documentElement);else if(g==="head"){g=i.ownerDocument.head,wh(g);for(var _=g.firstChild;_;){var q=_.nextSibling,Q=_.nodeName;_[vi]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&_.rel.toLowerCase()==="stylesheet"||g.removeChild(_),_=q}}else g==="body"&&wh(i.ownerDocument.body);g=A}while(g);_u(c)}function cA(i,c){var g=i;i=0;do{var N=g.nextSibling;if(g.nodeType===1?c?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(c?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),N&&N.nodeType===8)if(g=N.data,g==="/$"){if(i===0)break;i--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||i++;g=N}while(g)}function k1(i){var c=i.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var g=c;switch(c=c.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":k1(g),an(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}i.removeChild(g)}}function B9(i,c,g,N){for(;i.nodeType===1;){var A=g;if(i.nodeName.toLowerCase()!==c.toLowerCase()){if(!N&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(N){if(!i[vi])switch(c){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==A.rel||i.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||i.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||i.getAttribute("title")!==(A.title==null?null:A.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(A.src==null?null:A.src)||i.getAttribute("type")!==(A.type==null?null:A.type)||i.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(c==="input"&&i.type==="hidden"){var _=A.name==null?null:""+A.name;if(A.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Ta(i.nextSibling),i===null)break}return null}function F9(i,c,g){if(c==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!g||(i=Ta(i.nextSibling),i===null))return null;return i}function uA(i,c){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Ta(i.nextSibling),i===null))return null;return i}function _1(i){return i.data==="$?"||i.data==="$~"}function P1(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function U9(i,c){var g=i.ownerDocument;if(i.data==="$~")i._reactRetry=c;else if(i.data!=="$?"||g.readyState!=="loading")c();else{var N=function(){c(),g.removeEventListener("DOMContentLoaded",N)};g.addEventListener("DOMContentLoaded",N),i._reactRetry=N}}function Ta(i){for(;i!=null;i=i.nextSibling){var c=i.nodeType;if(c===1||c===3)break;if(c===8){if(c=i.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return i}var I1=null;function dA(i){i=i.nextSibling;for(var c=0;i;){if(i.nodeType===8){var g=i.data;if(g==="/$"||g==="/&"){if(c===0)return Ta(i.nextSibling);c--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||c++}i=i.nextSibling}return null}function hA(i){i=i.previousSibling;for(var c=0;i;){if(i.nodeType===8){var g=i.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(c===0)return i;c--}else g!=="/$"&&g!=="/&"||c++}i=i.previousSibling}return null}function fA(i,c,g){switch(c=gm(g),i){case"html":if(i=c.documentElement,!i)throw Error(n(452));return i;case"head":if(i=c.head,!i)throw Error(n(453));return i;case"body":if(i=c.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function wh(i){for(var c=i.attributes;c.length;)i.removeAttributeNode(c[0]);an(i)}var Oa=new Map,mA=new Set;function xm(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var dl=ne.d;ne.d={f:z9,r:V9,D:$9,C:q9,L:H9,m:G9,X:X9,S:Y9,M:W9};function z9(){var i=dl.f(),c=lm();return i||c}function V9(i){var c=er(i);c!==null&&c.tag===5&&c.type==="form"?k4(c):dl.r(i)}var Ou=typeof document>"u"?null:document;function gA(i,c,g){var N=Ou;if(N&&typeof c=="string"&&c){var A=Ht(c);A='link[rel="'+i+'"][href="'+A+'"]',typeof g=="string"&&(A+='[crossorigin="'+g+'"]'),mA.has(A)||(mA.add(A),i={rel:i,crossOrigin:g,href:c},N.querySelector(A)===null&&(c=N.createElement("link"),dn(c,"link",i),Ur(c),N.head.appendChild(c)))}}function $9(i){dl.D(i),gA("dns-prefetch",i,null)}function q9(i,c){dl.C(i,c),gA("preconnect",i,c)}function H9(i,c,g){dl.L(i,c,g);var N=Ou;if(N&&i&&c){var A='link[rel="preload"][as="'+Ht(c)+'"]';c==="image"&&g&&g.imageSrcSet?(A+='[imagesrcset="'+Ht(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(A+='[imagesizes="'+Ht(g.imageSizes)+'"]')):A+='[href="'+Ht(i)+'"]';var _=A;switch(c){case"style":_=Du(i);break;case"script":_=ku(i)}Oa.has(_)||(i=v({rel:"preload",href:c==="image"&&g&&g.imageSrcSet?void 0:i,as:c},g),Oa.set(_,i),N.querySelector(A)!==null||c==="style"&&N.querySelector(jh(_))||c==="script"&&N.querySelector(Sh(_))||(c=N.createElement("link"),dn(c,"link",i),Ur(c),N.head.appendChild(c)))}}function G9(i,c){dl.m(i,c);var g=Ou;if(g&&i){var N=c&&typeof c.as=="string"?c.as:"script",A='link[rel="modulepreload"][as="'+Ht(N)+'"][href="'+Ht(i)+'"]',_=A;switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ku(i)}if(!Oa.has(_)&&(i=v({rel:"modulepreload",href:i},c),Oa.set(_,i),g.querySelector(A)===null)){switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Sh(_)))return}N=g.createElement("link"),dn(N,"link",i),Ur(N),g.head.appendChild(N)}}}function Y9(i,c,g){dl.S(i,c,g);var N=Ou;if(N&&i){var A=xt(N).hoistableStyles,_=Du(i);c=c||"default";var q=A.get(_);if(!q){var Q={loading:0,preload:null};if(q=N.querySelector(jh(_)))Q.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":c},g),(g=Oa.get(_))&&M1(i,g);var he=q=N.createElement("link");Ur(he),dn(he,"link",i),he._p=new Promise(function(ke,$e){he.onload=ke,he.onerror=$e}),he.addEventListener("load",function(){Q.loading|=1}),he.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,pm(q,c,N)}q={type:"stylesheet",instance:q,count:1,state:Q},A.set(_,q)}}}function X9(i,c){dl.X(i,c);var g=Ou;if(g&&i){var N=xt(g).hoistableScripts,A=ku(i),_=N.get(A);_||(_=g.querySelector(Sh(A)),_||(i=v({src:i,async:!0},c),(c=Oa.get(A))&&R1(i,c),_=g.createElement("script"),Ur(_),dn(_,"link",i),g.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},N.set(A,_))}}function W9(i,c){dl.M(i,c);var g=Ou;if(g&&i){var N=xt(g).hoistableScripts,A=ku(i),_=N.get(A);_||(_=g.querySelector(Sh(A)),_||(i=v({src:i,async:!0,type:"module"},c),(c=Oa.get(A))&&R1(i,c),_=g.createElement("script"),Ur(_),dn(_,"link",i),g.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},N.set(A,_))}}function xA(i,c,g,N){var A=(A=oe.current)?xm(A):null;if(!A)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(c=Du(g.href),g=xt(A).hoistableStyles,N=g.get(c),N||(N={type:"style",instance:null,count:0,state:null},g.set(c,N)),N):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){i=Du(g.href);var _=xt(A).hoistableStyles,q=_.get(i);if(q||(A=A.ownerDocument||A,q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,q),(_=A.querySelector(jh(i)))&&!_._p&&(q.instance=_,q.state.loading=5),Oa.has(i)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Oa.set(i,g),_||K9(A,i,g,q.state))),c&&N===null)throw Error(n(528,""));return q}if(c&&N!==null)throw Error(n(529,""));return null;case"script":return c=g.async,g=g.src,typeof g=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=ku(g),g=xt(A).hoistableScripts,N=g.get(c),N||(N={type:"script",instance:null,count:0,state:null},g.set(c,N)),N):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Du(i){return'href="'+Ht(i)+'"'}function jh(i){return'link[rel="stylesheet"]['+i+"]"}function pA(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function K9(i,c,g,N){i.querySelector('link[rel="preload"][as="style"]['+c+"]")?N.loading=1:(c=i.createElement("link"),N.preload=c,c.addEventListener("load",function(){return N.loading|=1}),c.addEventListener("error",function(){return N.loading|=2}),dn(c,"link",g),Ur(c),i.head.appendChild(c))}function ku(i){return'[src="'+Ht(i)+'"]'}function Sh(i){return"script[async]"+i}function yA(i,c,g){if(c.count++,c.instance===null)switch(c.type){case"style":var N=i.querySelector('style[data-href~="'+Ht(g.href)+'"]');if(N)return c.instance=N,Ur(N),N;var A=v({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return N=(i.ownerDocument||i).createElement("style"),Ur(N),dn(N,"style",A),pm(N,g.precedence,i),c.instance=N;case"stylesheet":A=Du(g.href);var _=i.querySelector(jh(A));if(_)return c.state.loading|=4,c.instance=_,Ur(_),_;N=pA(g),(A=Oa.get(A))&&M1(N,A),_=(i.ownerDocument||i).createElement("link"),Ur(_);var q=_;return q._p=new Promise(function(Q,he){q.onload=Q,q.onerror=he}),dn(_,"link",N),c.state.loading|=4,pm(_,g.precedence,i),c.instance=_;case"script":return _=ku(g.src),(A=i.querySelector(Sh(_)))?(c.instance=A,Ur(A),A):(N=g,(A=Oa.get(_))&&(N=v({},g),R1(N,A)),i=i.ownerDocument||i,A=i.createElement("script"),Ur(A),dn(A,"link",N),i.head.appendChild(A),c.instance=A);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(N=c.instance,c.state.loading|=4,pm(N,g.precedence,i));return c.instance}function pm(i,c,g){for(var N=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=N.length?N[N.length-1]:null,_=A,q=0;q<N.length;q++){var Q=N[q];if(Q.dataset.precedence===c)_=Q;else if(_!==A)break}_?_.parentNode.insertBefore(i,_.nextSibling):(c=g.nodeType===9?g.head:g,c.insertBefore(i,c.firstChild))}function M1(i,c){i.crossOrigin==null&&(i.crossOrigin=c.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=c.referrerPolicy),i.title==null&&(i.title=c.title)}function R1(i,c){i.crossOrigin==null&&(i.crossOrigin=c.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=c.referrerPolicy),i.integrity==null&&(i.integrity=c.integrity)}var ym=null;function bA(i,c,g){if(ym===null){var N=new Map,A=ym=new Map;A.set(g,N)}else A=ym,N=A.get(g),N||(N=new Map,A.set(g,N));if(N.has(i))return N;for(N.set(i,null),g=g.getElementsByTagName(i),A=0;A<g.length;A++){var _=g[A];if(!(_[vi]||_[Zr]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var q=_.getAttribute(c)||"";q=i+q;var Q=N.get(q);Q?Q.push(_):N.set(q,[_])}}return N}function vA(i,c,g){i=i.ownerDocument||i,i.head.insertBefore(g,c==="title"?i.querySelector("head > title"):null)}function Z9(i,c,g){if(g===1||c.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return i=c.disabled,typeof c.precedence=="string"&&i==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function NA(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Q9(i,c,g,N){if(g.type==="stylesheet"&&(typeof N.media!="string"||matchMedia(N.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var A=Du(N.href),_=c.querySelector(jh(A));if(_){c=_._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(i.count++,i=bm.bind(i),c.then(i,i)),g.state.loading|=4,g.instance=_,Ur(_);return}_=c.ownerDocument||c,N=pA(N),(A=Oa.get(A))&&M1(N,A),_=_.createElement("link"),Ur(_);var q=_;q._p=new Promise(function(Q,he){q.onload=Q,q.onerror=he}),dn(_,"link",N),g.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(g,c),(c=g.state.preload)&&(g.state.loading&3)===0&&(i.count++,g=bm.bind(i),c.addEventListener("load",g),c.addEventListener("error",g))}}var L1=0;function J9(i,c){return i.stylesheets&&i.count===0&&Nm(i,i.stylesheets),0<i.count||0<i.imgCount?function(g){var N=setTimeout(function(){if(i.stylesheets&&Nm(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+c);0<i.imgBytes&&L1===0&&(L1=62500*P9());var A=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Nm(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>L1?50:800)+c);return i.unsuspend=g,function(){i.unsuspend=null,clearTimeout(N),clearTimeout(A)}}:null}function bm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var vm=null;function Nm(i,c){i.stylesheets=null,i.unsuspend!==null&&(i.count++,vm=new Map,c.forEach(eL,i),vm=null,bm.call(i))}function eL(i,c){if(!(c.state.loading&4)){var g=vm.get(i);if(g)var N=g.get(null);else{g=new Map,vm.set(i,g);for(var A=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<A.length;_++){var q=A[_];(q.nodeName==="LINK"||q.getAttribute("media")!=="not all")&&(g.set(q.dataset.precedence,q),N=q)}N&&g.set(null,N)}A=c.instance,q=A.getAttribute("data-precedence"),_=g.get(q)||N,_===N&&g.set(null,A),g.set(q,A),this.count++,N=bm.bind(this),A.addEventListener("load",N),A.addEventListener("error",N),_?_.parentNode.insertBefore(A,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(A,i.firstChild)),c.state.loading|=4}}var Ch={$$typeof:P,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function tL(i,c,g,N,A,_,q,Q,he){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nn(0),this.hiddenUpdates=nn(null),this.identifierPrefix=N,this.onUncaughtError=A,this.onCaughtError=_,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function wA(i,c,g,N,A,_,q,Q,he,ke,$e,Ye){return i=new tL(i,c,g,q,he,ke,$e,Ye,Q),c=1,_===!0&&(c|=24),_=ta(3,null,null,c),i.current=_,_.stateNode=i,c=xy(),c.refCount++,i.pooledCache=c,c.refCount++,_.memoizedState={element:N,isDehydrated:g,cache:c},vy(_),i}function jA(i){return i?(i=ou,i):ou}function SA(i,c,g,N,A,_){A=jA(A),N.context===null?N.context=A:N.pendingContext=A,N=to(c),N.payload={element:g},_=_===void 0?null:_,_!==null&&(N.callback=_),g=ro(i,N,c),g!==null&&(Fn(g,i,c),sh(g,i,c))}function CA(i,c){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var g=i.retryLane;i.retryLane=g!==0&&g<c?g:c}}function B1(i,c){CA(i,c),(i=i.alternate)&&CA(i,c)}function AA(i){if(i.tag===13||i.tag===31){var c=nc(i,67108864);c!==null&&Fn(c,i,67108864),B1(i,67108864)}}function EA(i){if(i.tag===13||i.tag===31){var c=ia();c=Cs(c);var g=nc(i,c);g!==null&&Fn(g,i,c),B1(i,c)}}var wm=!0;function rL(i,c,g,N){var A=J.T;J.T=null;var _=ne.p;try{ne.p=2,F1(i,c,g,N)}finally{ne.p=_,J.T=A}}function sL(i,c,g,N){var A=J.T;J.T=null;var _=ne.p;try{ne.p=8,F1(i,c,g,N)}finally{ne.p=_,J.T=A}}function F1(i,c,g,N){if(wm){var A=U1(N);if(A===null)C1(i,c,N,jm,g),OA(i,N);else if(aL(A,i,c,g,N))N.stopPropagation();else if(OA(i,N),c&4&&-1<nL.indexOf(i)){for(;A!==null;){var _=er(A);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var q=ut(_.pendingLanes);if(q!==0){var Q=_;for(Q.pendingLanes|=2,Q.entangledLanes|=2;q;){var he=1<<31-nt(q);Q.entanglements[1]|=he,q&=~he}Ti(_),(dr&6)===0&&(am=ft()+500,bh(0))}}break;case 31:case 13:Q=nc(_,2),Q!==null&&Fn(Q,_,2),lm(),B1(_,2)}if(_=U1(N),_===null&&C1(i,c,N,jm,g),_===A)break;A=_}A!==null&&N.stopPropagation()}else C1(i,c,N,null,g)}}function U1(i){return i=Vd(i),z1(i)}var jm=null;function z1(i){if(jm=null,i=$r(i),i!==null){var c=l(i);if(c===null)i=null;else{var g=c.tag;if(g===13){if(i=u(c),i!==null)return i;i=null}else if(g===31){if(i=f(c),i!==null)return i;i=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;i=null}else c!==i&&(i=null)}}return jm=i,null}function TA(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gt()){case rr:return 2;case mr:return 8;case ct:case Et:return 32;case _r:return 268435456;default:return 32}default:return 32}}var V1=!1,mo=null,go=null,xo=null,Ah=new Map,Eh=new Map,po=[],nL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function OA(i,c){switch(i){case"focusin":case"focusout":mo=null;break;case"dragenter":case"dragleave":go=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":Ah.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eh.delete(c.pointerId)}}function Th(i,c,g,N,A,_){return i===null||i.nativeEvent!==_?(i={blockedOn:c,domEventName:g,eventSystemFlags:N,nativeEvent:_,targetContainers:[A]},c!==null&&(c=er(c),c!==null&&AA(c)),i):(i.eventSystemFlags|=N,c=i.targetContainers,A!==null&&c.indexOf(A)===-1&&c.push(A),i)}function aL(i,c,g,N,A){switch(c){case"focusin":return mo=Th(mo,i,c,g,N,A),!0;case"dragenter":return go=Th(go,i,c,g,N,A),!0;case"mouseover":return xo=Th(xo,i,c,g,N,A),!0;case"pointerover":var _=A.pointerId;return Ah.set(_,Th(Ah.get(_)||null,i,c,g,N,A)),!0;case"gotpointercapture":return _=A.pointerId,Eh.set(_,Th(Eh.get(_)||null,i,c,g,N,A)),!0}return!1}function DA(i){var c=$r(i.target);if(c!==null){var g=l(c);if(g!==null){if(c=g.tag,c===13){if(c=u(g),c!==null){i.blockedOn=c,ot(i.priority,function(){EA(g)});return}}else if(c===31){if(c=f(g),c!==null){i.blockedOn=c,ot(i.priority,function(){EA(g)});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){i.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Sm(i){if(i.blockedOn!==null)return!1;for(var c=i.targetContainers;0<c.length;){var g=U1(i.nativeEvent);if(g===null){g=i.nativeEvent;var N=new g.constructor(g.type,g);Ko=N,g.target.dispatchEvent(N),Ko=null}else return c=er(g),c!==null&&AA(c),i.blockedOn=g,!1;c.shift()}return!0}function kA(i,c,g){Sm(i)&&g.delete(c)}function iL(){V1=!1,mo!==null&&Sm(mo)&&(mo=null),go!==null&&Sm(go)&&(go=null),xo!==null&&Sm(xo)&&(xo=null),Ah.forEach(kA),Eh.forEach(kA)}function Cm(i,c){i.blockedOn===c&&(i.blockedOn=null,V1||(V1=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,iL)))}var Am=null;function _A(i){Am!==i&&(Am=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Am===i&&(Am=null);for(var c=0;c<i.length;c+=3){var g=i[c],N=i[c+1],A=i[c+2];if(typeof N!="function"){if(z1(N||g)===null)continue;break}var _=er(g);_!==null&&(i.splice(c,3),c-=3,Uy(_,{pending:!0,data:A,method:g.method,action:N},N,A))}}))}function _u(i){function c(he){return Cm(he,i)}mo!==null&&Cm(mo,i),go!==null&&Cm(go,i),xo!==null&&Cm(xo,i),Ah.forEach(c),Eh.forEach(c);for(var g=0;g<po.length;g++){var N=po[g];N.blockedOn===i&&(N.blockedOn=null)}for(;0<po.length&&(g=po[0],g.blockedOn===null);)DA(g),g.blockedOn===null&&po.shift();if(g=(i.ownerDocument||i).$$reactFormReplay,g!=null)for(N=0;N<g.length;N+=3){var A=g[N],_=g[N+1],q=A[sr]||null;if(typeof _=="function")q||_A(g);else if(q){var Q=null;if(_&&_.hasAttribute("formAction")){if(A=_,q=_[sr]||null)Q=q.formAction;else if(z1(A)!==null)continue}else Q=q.action;typeof Q=="function"?g[N+1]=Q:(g.splice(N,3),N-=3),_A(g)}}}function PA(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(q){return A=q})},focusReset:"manual",scroll:"manual"})}function c(){A!==null&&(A(),A=null),N||setTimeout(g,20)}function g(){if(!N&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var N=!1,A=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(g,100),function(){N=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),A!==null&&(A(),A=null)}}}function $1(i){this._internalRoot=i}Em.prototype.render=$1.prototype.render=function(i){var c=this._internalRoot;if(c===null)throw Error(n(409));var g=c.current,N=ia();SA(g,N,i,c,null,null)},Em.prototype.unmount=$1.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var c=i.containerInfo;SA(i.current,2,null,i,null,null),lm(),c[vn]=null}};function Em(i){this._internalRoot=i}Em.prototype.unstable_scheduleHydration=function(i){if(i){var c=Ws();i={blockedOn:null,target:i,priority:c};for(var g=0;g<po.length&&c!==0&&c<po[g].priority;g++);po.splice(g,0,i),g===0&&DA(i)}};var IA=t.version;if(IA!=="19.2.0")throw Error(n(527,IA,"19.2.0"));ne.findDOMNode=function(i){var c=i._reactInternals;if(c===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=x(c),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var lL={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tm.isDisabled&&Tm.supportsFiber)try{_t=Tm.inject(lL),ve=Tm}catch{}}return Dh.createRoot=function(i,c){if(!a(i))throw Error(n(299));var g=!1,N="",A=z4,_=V4,q=$4;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(N=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(_=c.onCaughtError),c.onRecoverableError!==void 0&&(q=c.onRecoverableError)),c=wA(i,1,!1,null,null,g,N,null,A,_,q,PA),i[vn]=c.current,S1(i),new $1(c)},Dh.hydrateRoot=function(i,c,g){if(!a(i))throw Error(n(299));var N=!1,A="",_=z4,q=V4,Q=$4,he=null;return g!=null&&(g.unstable_strictMode===!0&&(N=!0),g.identifierPrefix!==void 0&&(A=g.identifierPrefix),g.onUncaughtError!==void 0&&(_=g.onUncaughtError),g.onCaughtError!==void 0&&(q=g.onCaughtError),g.onRecoverableError!==void 0&&(Q=g.onRecoverableError),g.formState!==void 0&&(he=g.formState)),c=wA(i,1,!0,c,g??null,N,A,he,_,q,Q,PA),c.context=jA(null),g=c.current,N=ia(),N=Cs(N),A=to(N),A.callback=null,ro(g,A,N),g=N,c.current.lanes=g,ba(c,g),Ti(c),i[vn]=c.current,S1(i),new Em(c)},Dh.version="19.2.0",Dh}var qA;function pL(){if(qA)return G1.exports;qA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),G1.exports=xL(),G1.exports}var yL=pL();var HA="popstate";function bL(e={}){function t(n,a){let{pathname:l,search:u,hash:f}=n.location;return u2("",{pathname:l,search:u,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:of(a)}return NL(t,s,null,e)}function ss(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function za(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function vL(){return Math.random().toString(36).substring(2,10)}function GA(e,t){return{usr:e.state,key:e.key,idx:t}}function u2(e,t,s=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?wd(t):t,state:s,key:t&&t.key||n||vL()}}function of({pathname:e="/",search:t="",hash:s=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function wd(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function NL(e,t,s,n={}){let{window:a=document.defaultView,v5Compat:l=!1}=n,u=a.history,f="POP",m=null,x=p();x==null&&(x=0,u.replaceState({...u.state,idx:x},""));function p(){return(u.state||{idx:null}).idx}function v(){f="POP";let O=p(),M=O==null?null:O-x;x=O,m&&m({action:f,location:k.location,delta:M})}function C(O,M){f="PUSH";let L=u2(k.location,O,M);x=p()+1;let P=GA(L,x),H=k.createHref(L);try{u.pushState(P,"",H)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;a.location.assign(H)}l&&m&&m({action:f,location:k.location,delta:1})}function T(O,M){f="REPLACE";let L=u2(k.location,O,M);x=p();let P=GA(L,x),H=k.createHref(L);u.replaceState(P,"",H),l&&m&&m({action:f,location:k.location,delta:0})}function E(O){return wL(O)}let k={get action(){return f},get location(){return e(a,u)},listen(O){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(HA,v),m=O,()=>{a.removeEventListener(HA,v),m=null}},createHref(O){return t(a,O)},createURL:E,encodeLocation(O){let M=E(O);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:C,replace:T,go(O){return u.go(O)}};return k}function wL(e,t=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),ss(s,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:of(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=s+n),new URL(n,s)}function vD(e,t,s="/"){return jL(e,t,s,!1)}function jL(e,t,s,n){let a=typeof t=="string"?wd(t):t,l=Nl(a.pathname||"/",s);if(l==null)return null;let u=ND(e);SL(u);let f=null;for(let m=0;f==null&&m<u.length;++m){let x=ML(l);f=PL(u[m],x,n)}return f}function ND(e,t=[],s=[],n="",a=!1){let l=(u,f,m=a,x)=>{let p={relativePath:x===void 0?u.path||"":x,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&m)return;ss(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let v=bl([n,p.relativePath]),C=s.concat(p);u.children&&u.children.length>0&&(ss(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),ND(u.children,t,C,v,m)),!(u.path==null&&!u.index)&&t.push({path:v,score:kL(v,u.index),routesMeta:C})};return e.forEach((u,f)=>{if(u.path===""||!u.path?.includes("?"))l(u,f);else for(let m of wD(u.path))l(u,f,!0,m)}),t}function wD(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),l=s.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let u=wD(n.join("/")),f=[];return f.push(...u.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...u),f.map(m=>e.startsWith("/")&&m===""?"/":m)}function SL(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:_L(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}var CL=/^:[\w-]+$/,AL=3,EL=2,TL=1,OL=10,DL=-2,YA=e=>e==="*";function kL(e,t){let s=e.split("/"),n=s.length;return s.some(YA)&&(n+=DL),t&&(n+=EL),s.filter(a=>!YA(a)).reduce((a,l)=>a+(CL.test(l)?AL:l===""?TL:OL),n)}function _L(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function PL(e,t,s=!1){let{routesMeta:n}=e,a={},l="/",u=[];for(let f=0;f<n.length;++f){let m=n[f],x=f===n.length-1,p=l==="/"?t:t.slice(l.length)||"/",v=Lg({path:m.relativePath,caseSensitive:m.caseSensitive,end:x},p),C=m.route;if(!v&&x&&s&&!n[n.length-1].route.index&&(v=Lg({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},p)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:bl([l,v.pathname]),pathnameBase:UL(bl([l,v.pathnameBase])),route:C}),v.pathnameBase!=="/"&&(l=bl([l,v.pathnameBase]))}return u}function Lg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=IL(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:n.reduce((x,{paramName:p,isOptional:v},C)=>{if(p==="*"){let E=f[C]||"";u=l.slice(0,l.length-E.length).replace(/(.)\/+$/,"$1")}const T=f[C];return v&&!T?x[p]=void 0:x[p]=(T||"").replace(/%2F/g,"/"),x},{}),pathname:l,pathnameBase:u,pattern:e}}function IL(e,t=!1,s=!0){za(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,m)=>(n.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function ML(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return za(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Nl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}var RL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LL=e=>RL.test(e);function BL(e,t="/"){let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?wd(e):e,l;if(s)if(LL(s))l=s;else{if(s.includes("//")){let u=s;s=s.replace(/\/\/+/g,"/"),za(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${s}`)}s.startsWith("/")?l=XA(s.substring(1),"/"):l=XA(s,t)}else l=t;return{pathname:l,search:zL(n),hash:VL(a)}}function XA(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function K1(e,t,s,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FL(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function VN(e){let t=FL(e);return t.map((s,n)=>n===t.length-1?s.pathname:s.pathnameBase)}function $N(e,t,s,n=!1){let a;typeof e=="string"?a=wd(e):(a={...e},ss(!a.pathname||!a.pathname.includes("?"),K1("?","pathname","search",a)),ss(!a.pathname||!a.pathname.includes("#"),K1("#","pathname","hash",a)),ss(!a.search||!a.search.includes("#"),K1("#","search","hash",a)));let l=e===""||a.pathname==="",u=l?"/":a.pathname,f;if(u==null)f=s;else{let v=t.length-1;if(!n&&u.startsWith("..")){let C=u.split("/");for(;C[0]==="..";)C.shift(),v-=1;a.pathname=C.join("/")}f=v>=0?t[v]:"/"}let m=BL(a,f),x=u&&u!=="/"&&u.endsWith("/"),p=(l||u===".")&&s.endsWith("/");return!m.pathname.endsWith("/")&&(x||p)&&(m.pathname+="/"),m}var bl=e=>e.join("/").replace(/\/\/+/g,"/"),UL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),zL=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,VL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function $L(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var jD=["POST","PUT","PATCH","DELETE"];new Set(jD);var qL=["GET",...jD];new Set(qL);var jd=w.createContext(null);jd.displayName="DataRouter";var Gx=w.createContext(null);Gx.displayName="DataRouterState";w.createContext(!1);var SD=w.createContext({isTransitioning:!1});SD.displayName="ViewTransition";var HL=w.createContext(new Map);HL.displayName="Fetchers";var GL=w.createContext(null);GL.displayName="Await";var gi=w.createContext(null);gi.displayName="Navigation";var If=w.createContext(null);If.displayName="Location";var xi=w.createContext({outlet:null,matches:[],isDataRoute:!1});xi.displayName="Route";var qN=w.createContext(null);qN.displayName="RouteError";function YL(e,{relative:t}={}){ss(Sd(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=w.useContext(gi),{hash:a,pathname:l,search:u}=Mf(e,{relative:t}),f=l;return s!=="/"&&(f=l==="/"?s:bl([s,l])),n.createHref({pathname:f,search:u,hash:a})}function Sd(){return w.useContext(If)!=null}function ya(){return ss(Sd(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(If).location}var CD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function AD(e){w.useContext(gi).static||w.useLayoutEffect(e)}function Yx(){let{isDataRoute:e}=w.useContext(xi);return e?oB():XL()}function XL(){ss(Sd(),"useNavigate() may be used only in the context of a <Router> component.");let e=w.useContext(jd),{basename:t,navigator:s}=w.useContext(gi),{matches:n}=w.useContext(xi),{pathname:a}=ya(),l=JSON.stringify(VN(n)),u=w.useRef(!1);return AD(()=>{u.current=!0}),w.useCallback((m,x={})=>{if(za(u.current,CD),!u.current)return;if(typeof m=="number"){s.go(m);return}let p=$N(m,JSON.parse(l),a,x.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:bl([t,p.pathname])),(x.replace?s.replace:s.push)(p,x.state,x)},[t,s,l,a,e])}var WL=w.createContext(null);function KL(e){let t=w.useContext(xi).outlet;return w.useMemo(()=>t&&w.createElement(WL.Provider,{value:e},t),[t,e])}function Mf(e,{relative:t}={}){let{matches:s}=w.useContext(xi),{pathname:n}=ya(),a=JSON.stringify(VN(s));return w.useMemo(()=>$N(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function ZL(e,t){return ED(e,t)}function ED(e,t,s,n,a){ss(Sd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=w.useContext(gi),{matches:u}=w.useContext(xi),f=u[u.length-1],m=f?f.params:{},x=f?f.pathname:"/",p=f?f.pathnameBase:"/",v=f&&f.route;{let L=v&&v.path||"";TD(x,!v||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let C=ya(),T;if(t){let L=typeof t=="string"?wd(t):t;ss(p==="/"||L.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${L.pathname}" was given in the \`location\` prop.`),T=L}else T=C;let E=T.pathname||"/",k=E;if(p!=="/"){let L=p.replace(/^\//,"").split("/");k="/"+E.replace(/^\//,"").split("/").slice(L.length).join("/")}let O=vD(e,{pathname:k});za(v||O!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),za(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=rB(O&&O.map(L=>Object.assign({},L,{params:Object.assign({},m,L.params),pathname:bl([p,l.encodeLocation?l.encodeLocation(L.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?p:bl([p,l.encodeLocation?l.encodeLocation(L.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathnameBase])})),u,s,n,a);return t&&M?w.createElement(If.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},M):M}function QL(){let e=lB(),t=$L(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:l},"ErrorBoundary")," or"," ",w.createElement("code",{style:l},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),s?w.createElement("pre",{style:a},s):null,u)}var JL=w.createElement(QL,null),eB=class extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?w.createElement(xi.Provider,{value:this.props.routeContext},w.createElement(qN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tB({routeContext:e,match:t,children:s}){let n=w.useContext(jd);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(xi.Provider,{value:e},s)}function rB(e,t=[],s=null,n=null,a=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let l=e,u=s?.errors;if(u!=null){let p=l.findIndex(v=>v.route.id&&u?.[v.route.id]!==void 0);ss(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,p+1))}let f=!1,m=-1;if(s)for(let p=0;p<l.length;p++){let v=l[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=p),v.route.id){let{loaderData:C,errors:T}=s,E=v.route.loader&&!C.hasOwnProperty(v.route.id)&&(!T||T[v.route.id]===void 0);if(v.route.lazy||E){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let x=s&&n?(p,v)=>{n(p,{location:s.location,params:s.matches?.[0]?.params??{},errorInfo:v})}:void 0;return l.reduceRight((p,v,C)=>{let T,E=!1,k=null,O=null;s&&(T=u&&v.route.id?u[v.route.id]:void 0,k=v.route.errorElement||JL,f&&(m<0&&C===0?(TD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,O=null):m===C&&(E=!0,O=v.route.hydrateFallbackElement||null)));let M=t.concat(l.slice(0,C+1)),L=()=>{let P;return T?P=k:E?P=O:v.route.Component?P=w.createElement(v.route.Component,null):v.route.element?P=v.route.element:P=p,w.createElement(tB,{match:v,routeContext:{outlet:p,matches:M,isDataRoute:s!=null},children:P})};return s&&(v.route.ErrorBoundary||v.route.errorElement||C===0)?w.createElement(eB,{location:s.location,revalidation:s.revalidation,component:k,error:T,children:L(),routeContext:{outlet:null,matches:M,isDataRoute:!0},onError:x}):L()},null)}function HN(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sB(e){let t=w.useContext(jd);return ss(t,HN(e)),t}function nB(e){let t=w.useContext(Gx);return ss(t,HN(e)),t}function aB(e){let t=w.useContext(xi);return ss(t,HN(e)),t}function GN(e){let t=aB(e),s=t.matches[t.matches.length-1];return ss(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function iB(){return GN("useRouteId")}function lB(){let e=w.useContext(qN),t=nB("useRouteError"),s=GN("useRouteError");return e!==void 0?e:t.errors?.[s]}function oB(){let{router:e}=sB("useNavigate"),t=GN("useNavigate"),s=w.useRef(!1);return AD(()=>{s.current=!0}),w.useCallback(async(a,l={})=>{za(s.current,CD),s.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...l}))},[e,t])}var WA={};function TD(e,t,s){!t&&!WA[e]&&(WA[e]=!0,za(!1,s))}w.memo(cB);function cB({routes:e,future:t,state:s,unstable_onError:n}){return ED(e,void 0,s,n,t)}function Bg({to:e,replace:t,state:s,relative:n}){ss(Sd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=w.useContext(gi);za(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=w.useContext(xi),{pathname:u}=ya(),f=Yx(),m=$N(e,VN(l),u,n==="path"),x=JSON.stringify(m);return w.useEffect(()=>{f(JSON.parse(x),{replace:t,state:s,relative:n})},[f,x,n,t,s]),null}function uB(e){return KL(e.context)}function ar(e){ss(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dB({basename:e="/",children:t=null,location:s,navigationType:n="POP",navigator:a,static:l=!1}){ss(!Sd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),f=w.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);typeof s=="string"&&(s=wd(s));let{pathname:m="/",search:x="",hash:p="",state:v=null,key:C="default"}=s,T=w.useMemo(()=>{let E=Nl(m,u);return E==null?null:{location:{pathname:E,search:x,hash:p,state:v,key:C},navigationType:n}},[u,m,x,p,v,C,n]);return za(T!=null,`<Router basename="${u}"> is not able to match the URL "${m}${x}${p}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:w.createElement(gi.Provider,{value:f},w.createElement(If.Provider,{children:t,value:T}))}function hB({children:e,location:t}){return ZL(d2(e),t)}function d2(e,t=[]){let s=[];return w.Children.forEach(e,(n,a)=>{if(!w.isValidElement(n))return;let l=[...t,a];if(n.type===w.Fragment){s.push.apply(s,d2(n.props.children,l));return}ss(n.type===ar,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ss(!n.props.index||!n.props.children,"An index route cannot have child routes.");let u={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=d2(n.props.children,l)),s.push(u)}),s}var vg="get",Ng="application/x-www-form-urlencoded";function Xx(e){return e!=null&&typeof e.tagName=="string"}function fB(e){return Xx(e)&&e.tagName.toLowerCase()==="button"}function mB(e){return Xx(e)&&e.tagName.toLowerCase()==="form"}function gB(e){return Xx(e)&&e.tagName.toLowerCase()==="input"}function xB(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function pB(e,t){return e.button===0&&(!t||t==="_self")&&!xB(e)}var Dm=null;function yB(){if(Dm===null)try{new FormData(document.createElement("form"),0),Dm=!1}catch{Dm=!0}return Dm}var bB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Z1(e){return e!=null&&!bB.has(e)?(za(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ng}"`),null):e}function vB(e,t){let s,n,a,l,u;if(mB(e)){let f=e.getAttribute("action");n=f?Nl(f,t):null,s=e.getAttribute("method")||vg,a=Z1(e.getAttribute("enctype"))||Ng,l=new FormData(e)}else if(fB(e)||gB(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||f.getAttribute("action");if(n=m?Nl(m,t):null,s=e.getAttribute("formmethod")||f.getAttribute("method")||vg,a=Z1(e.getAttribute("formenctype"))||Z1(f.getAttribute("enctype"))||Ng,l=new FormData(f,e),!yB()){let{name:x,type:p,value:v}=e;if(p==="image"){let C=x?`${x}.`:"";l.append(`${C}x`,"0"),l.append(`${C}y`,"0")}else x&&l.append(x,v)}}else{if(Xx(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=vg,n=null,a=Ng,u=e}return l&&a==="text/plain"&&(u=l,l=void 0),{action:n,method:s.toLowerCase(),encType:a,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function YN(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function NB(e,t,s){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${s}`:t&&Nl(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${s}`,n}async function wB(e,t){if(e.id in t)return t[e.id];try{let s=await import(e.module);return t[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jB(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function SB(e,t,s){let n=await Promise.all(e.map(async a=>{let l=t.routes[a.route.id];if(l){let u=await wB(l,s);return u.links?u.links():[]}return[]}));return TB(n.flat(1).filter(jB).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function KA(e,t,s,n,a,l){let u=(m,x)=>s[x]?m.route.id!==s[x].route.id:!0,f=(m,x)=>s[x].pathname!==m.pathname||s[x].route.path?.endsWith("*")&&s[x].params["*"]!==m.params["*"];return l==="assets"?t.filter((m,x)=>u(m,x)||f(m,x)):l==="data"?t.filter((m,x)=>{let p=n.routes[m.route.id];if(!p||!p.hasLoader)return!1;if(u(m,x)||f(m,x))return!0;if(m.route.shouldRevalidate){let v=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function CB(e,t,{includeHydrateFallback:s}={}){return AB(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),s&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function AB(e){return[...new Set(e)]}function EB(e){let t={},s=Object.keys(e).sort();for(let n of s)t[n]=e[n];return t}function TB(e,t){let s=new Set;return new Set(t),e.reduce((n,a)=>{let l=JSON.stringify(EB(a));return s.has(l)||(s.add(l),n.push({key:l,link:a})),n},[])}function OD(){let e=w.useContext(jd);return YN(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function OB(){let e=w.useContext(Gx);return YN(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var XN=w.createContext(void 0);XN.displayName="FrameworkContext";function DD(){let e=w.useContext(XN);return YN(e,"You must render this element inside a <HydratedRouter> element"),e}function DB(e,t){let s=w.useContext(XN),[n,a]=w.useState(!1),[l,u]=w.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:x,onMouseLeave:p,onTouchStart:v}=t,C=w.useRef(null);w.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let k=M=>{M.forEach(L=>{u(L.isIntersecting)})},O=new IntersectionObserver(k,{threshold:.5});return C.current&&O.observe(C.current),()=>{O.disconnect()}}},[e]),w.useEffect(()=>{if(n){let k=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(k)}}},[n]);let T=()=>{a(!0)},E=()=>{a(!1),u(!1)};return s?e!=="intent"?[l,C,{}]:[l,C,{onFocus:kh(f,T),onBlur:kh(m,E),onMouseEnter:kh(x,T),onMouseLeave:kh(p,E),onTouchStart:kh(v,T)}]:[!1,C,{}]}function kh(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function kB({page:e,...t}){let{router:s}=OD(),n=w.useMemo(()=>vD(s.routes,e,s.basename),[s.routes,e,s.basename]);return n?w.createElement(PB,{page:e,matches:n,...t}):null}function _B(e){let{manifest:t,routeModules:s}=DD(),[n,a]=w.useState([]);return w.useEffect(()=>{let l=!1;return SB(e,t,s).then(u=>{l||a(u)}),()=>{l=!0}},[e,t,s]),n}function PB({page:e,matches:t,...s}){let n=ya(),{manifest:a,routeModules:l}=DD(),{basename:u}=OD(),{loaderData:f,matches:m}=OB(),x=w.useMemo(()=>KA(e,t,m,a,n,"data"),[e,t,m,a,n]),p=w.useMemo(()=>KA(e,t,m,a,n,"assets"),[e,t,m,a,n]),v=w.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let E=new Set,k=!1;if(t.forEach(M=>{let L=a.routes[M.route.id];!L||!L.hasLoader||(!x.some(P=>P.route.id===M.route.id)&&M.route.id in f&&l[M.route.id]?.shouldRevalidate||L.hasClientLoader?k=!0:E.add(M.route.id))}),E.size===0)return[];let O=NB(e,u,"data");return k&&E.size>0&&O.searchParams.set("_routes",t.filter(M=>E.has(M.route.id)).map(M=>M.route.id).join(",")),[O.pathname+O.search]},[u,f,n,a,x,t,e,l]),C=w.useMemo(()=>CB(p,a),[p,a]),T=_B(p);return w.createElement(w.Fragment,null,v.map(E=>w.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...s})),C.map(E=>w.createElement("link",{key:E,rel:"modulepreload",href:E,...s})),T.map(({key:E,link:k})=>w.createElement("link",{key:E,nonce:s.nonce,...k})))}function IB(...e){return t=>{e.forEach(s=>{typeof s=="function"?s(t):s!=null&&(s.current=t)})}}var kD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kD&&(window.__reactRouterVersion="7.9.6")}catch{}function MB({basename:e,children:t,window:s}){let n=w.useRef();n.current==null&&(n.current=bL({window:s,v5Compat:!0}));let a=n.current,[l,u]=w.useState({action:a.action,location:a.location}),f=w.useCallback(m=>{w.startTransition(()=>u(m))},[u]);return w.useLayoutEffect(()=>a.listen(f),[a,f]),w.createElement(dB,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a})}var _D=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fg=w.forwardRef(function({onClick:t,discover:s="render",prefetch:n="none",relative:a,reloadDocument:l,replace:u,state:f,target:m,to:x,preventScrollReset:p,viewTransition:v,...C},T){let{basename:E}=w.useContext(gi),k=typeof x=="string"&&_D.test(x),O,M=!1;if(typeof x=="string"&&k&&(O=x,kD))try{let U=new URL(window.location.href),Y=x.startsWith("//")?new URL(U.protocol+x):new URL(x),$=Nl(Y.pathname,E);Y.origin===U.origin&&$!=null?x=$+Y.search+Y.hash:M=!0}catch{za(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=YL(x,{relative:a}),[P,H,B]=DB(n,C),F=FB(x,{replace:u,state:f,target:m,preventScrollReset:p,relative:a,viewTransition:v});function R(U){t&&t(U),U.defaultPrevented||F(U)}let z=w.createElement("a",{...C,...B,href:O||L,onClick:M||l?t:R,ref:IB(T,H),target:m,"data-discover":!k&&s==="render"?"true":void 0});return P&&!k?w.createElement(w.Fragment,null,z,w.createElement(kB,{page:L})):z});Fg.displayName="Link";var RB=w.forwardRef(function({"aria-current":t="page",caseSensitive:s=!1,className:n="",end:a=!1,style:l,to:u,viewTransition:f,children:m,...x},p){let v=Mf(u,{relative:x.relative}),C=ya(),T=w.useContext(Gx),{navigator:E,basename:k}=w.useContext(gi),O=T!=null&&qB(v)&&f===!0,M=E.encodeLocation?E.encodeLocation(v).pathname:v.pathname,L=C.pathname,P=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;s||(L=L.toLowerCase(),P=P?P.toLowerCase():null,M=M.toLowerCase()),P&&k&&(P=Nl(P,k)||P);const H=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let B=L===M||!a&&L.startsWith(M)&&L.charAt(H)==="/",F=P!=null&&(P===M||!a&&P.startsWith(M)&&P.charAt(M.length)==="/"),R={isActive:B,isPending:F,isTransitioning:O},z=B?t:void 0,U;typeof n=="function"?U=n(R):U=[n,B?"active":null,F?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let Y=typeof l=="function"?l(R):l;return w.createElement(Fg,{...x,"aria-current":z,className:U,ref:p,style:Y,to:u,viewTransition:f},typeof m=="function"?m(R):m)});RB.displayName="NavLink";var LB=w.forwardRef(({discover:e="render",fetcherKey:t,navigate:s,reloadDocument:n,replace:a,state:l,method:u=vg,action:f,onSubmit:m,relative:x,preventScrollReset:p,viewTransition:v,...C},T)=>{let E=VB(),k=$B(f,{relative:x}),O=u.toLowerCase()==="get"?"get":"post",M=typeof f=="string"&&_D.test(f),L=P=>{if(m&&m(P),P.defaultPrevented)return;P.preventDefault();let H=P.nativeEvent.submitter,B=H?.getAttribute("formmethod")||u;E(H||P.currentTarget,{fetcherKey:t,method:B,navigate:s,replace:a,state:l,relative:x,preventScrollReset:p,viewTransition:v})};return w.createElement("form",{ref:T,method:O,action:k,onSubmit:n?m:L,...C,"data-discover":!M&&e==="render"?"true":void 0})});LB.displayName="Form";function BB(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PD(e){let t=w.useContext(jd);return ss(t,BB(e)),t}function FB(e,{target:t,replace:s,state:n,preventScrollReset:a,relative:l,viewTransition:u}={}){let f=Yx(),m=ya(),x=Mf(e,{relative:l});return w.useCallback(p=>{if(pB(p,t)){p.preventDefault();let v=s!==void 0?s:of(m)===of(x);f(e,{replace:v,state:n,preventScrollReset:a,relative:l,viewTransition:u})}},[m,f,x,s,n,t,e,a,l,u])}var UB=0,zB=()=>`__${String(++UB)}__`;function VB(){let{router:e}=PD("useSubmit"),{basename:t}=w.useContext(gi),s=iB();return w.useCallback(async(n,a={})=>{let{action:l,method:u,encType:f,formData:m,body:x}=vB(n,t);if(a.navigate===!1){let p=a.fetcherKey||zB();await e.fetch(p,s,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:x,formMethod:a.method||u,formEncType:a.encType||f,flushSync:a.flushSync})}else await e.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:x,formMethod:a.method||u,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,s])}function $B(e,{relative:t}={}){let{basename:s}=w.useContext(gi),n=w.useContext(xi);ss(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),l={...Mf(e||".",{relative:t})},u=ya();if(e==null){l.search=u.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(p=>p==="")){f.delete("index"),m.filter(v=>v).forEach(v=>f.append("index",v));let p=f.toString();l.search=p?`?${p}`:""}}return(!e||e===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(l.pathname=l.pathname==="/"?s:bl([s,l.pathname])),of(l)}function qB(e,{relative:t}={}){let s=w.useContext(SD);ss(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=PD("useViewTransitionState"),a=Mf(e,{relative:t});if(!s.isTransitioning)return!1;let l=Nl(s.currentLocation.pathname,n)||s.currentLocation.pathname,u=Nl(s.nextLocation.pathname,n)||s.nextLocation.pathname;return Lg(a.pathname,u)!=null||Lg(a.pathname,l)!=null}var WN=bD();function ID(e,t){return function(){return e.apply(t,arguments)}}const{toString:HB}=Object.prototype,{getPrototypeOf:KN}=Object,{iterator:Wx,toStringTag:MD}=Symbol,Kx=(e=>t=>{const s=HB.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),pi=e=>(e=e.toLowerCase(),t=>Kx(t)===e),Zx=e=>t=>typeof t===e,{isArray:Cd}=Array,rd=Zx("undefined");function Rf(e){return e!==null&&!rd(e)&&e.constructor!==null&&!rd(e.constructor)&&Hn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const RD=pi("ArrayBuffer");function GB(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&RD(e.buffer),t}const YB=Zx("string"),Hn=Zx("function"),LD=Zx("number"),Lf=e=>e!==null&&typeof e=="object",XB=e=>e===!0||e===!1,wg=e=>{if(Kx(e)!=="object")return!1;const t=KN(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(MD in e)&&!(Wx in e)},WB=e=>{if(!Lf(e)||Rf(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},KB=pi("Date"),ZB=pi("File"),QB=pi("Blob"),JB=pi("FileList"),eF=e=>Lf(e)&&Hn(e.pipe),tF=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Hn(e.append)&&((t=Kx(e))==="formdata"||t==="object"&&Hn(e.toString)&&e.toString()==="[object FormData]"))},rF=pi("URLSearchParams"),[sF,nF,aF,iF]=["ReadableStream","Request","Response","Headers"].map(pi),lF=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bf(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Cd(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(Rf(e))return;const l=s?Object.getOwnPropertyNames(e):Object.keys(e),u=l.length;let f;for(n=0;n<u;n++)f=l[n],t.call(null,e[f],f,e)}}function BD(e,t){if(Rf(e))return null;t=t.toLowerCase();const s=Object.keys(e);let n=s.length,a;for(;n-- >0;)if(a=s[n],t===a.toLowerCase())return a;return null}const Oc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,FD=e=>!rd(e)&&e!==Oc;function h2(){const{caseless:e,skipUndefined:t}=FD(this)&&this||{},s={},n=(a,l)=>{const u=e&&BD(s,l)||l;wg(s[u])&&wg(a)?s[u]=h2(s[u],a):wg(a)?s[u]=h2({},a):Cd(a)?s[u]=a.slice():(!t||!rd(a))&&(s[u]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&Bf(arguments[a],n);return s}const oF=(e,t,s,{allOwnKeys:n}={})=>(Bf(t,(a,l)=>{s&&Hn(a)?e[l]=ID(a,s):e[l]=a},{allOwnKeys:n}),e),cF=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),uF=(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},dF=(e,t,s,n)=>{let a,l,u;const f={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)u=a[l],(!n||n(u,e,t))&&!f[u]&&(t[u]=e[u],f[u]=!0);e=s!==!1&&KN(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},hF=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return n!==-1&&n===s},fF=e=>{if(!e)return null;if(Cd(e))return e;let t=e.length;if(!LD(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},mF=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&KN(Uint8Array)),gF=(e,t)=>{const n=(e&&e[Wx]).call(e);let a;for(;(a=n.next())&&!a.done;){const l=a.value;t.call(e,l[0],l[1])}},xF=(e,t)=>{let s;const n=[];for(;(s=e.exec(t))!==null;)n.push(s);return n},pF=pi("HTMLFormElement"),yF=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,a){return n.toUpperCase()+a}),ZA=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),bF=pi("RegExp"),UD=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};Bf(s,(a,l)=>{let u;(u=t(a,l,e))!==!1&&(n[l]=u||a)}),Object.defineProperties(e,n)},vF=e=>{UD(e,(t,s)=>{if(Hn(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=e[s];if(Hn(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},NF=(e,t)=>{const s={},n=a=>{a.forEach(l=>{s[l]=!0})};return Cd(e)?n(e):n(String(e).split(t)),s},wF=()=>{},jF=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function SF(e){return!!(e&&Hn(e.append)&&e[MD]==="FormData"&&e[Wx])}const CF=e=>{const t=new Array(10),s=(n,a)=>{if(Lf(n)){if(t.indexOf(n)>=0)return;if(Rf(n))return n;if(!("toJSON"in n)){t[a]=n;const l=Cd(n)?[]:{};return Bf(n,(u,f)=>{const m=s(u,a+1);!rd(m)&&(l[f]=m)}),t[a]=void 0,l}}return n};return s(e,0)},AF=pi("AsyncFunction"),EF=e=>e&&(Lf(e)||Hn(e))&&Hn(e.then)&&Hn(e.catch),zD=((e,t)=>e?setImmediate:t?((s,n)=>(Oc.addEventListener("message",({source:a,data:l})=>{a===Oc&&l===s&&n.length&&n.shift()()},!1),a=>{n.push(a),Oc.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Hn(Oc.postMessage)),TF=typeof queueMicrotask<"u"?queueMicrotask.bind(Oc):typeof process<"u"&&process.nextTick||zD,OF=e=>e!=null&&Hn(e[Wx]),Re={isArray:Cd,isArrayBuffer:RD,isBuffer:Rf,isFormData:tF,isArrayBufferView:GB,isString:YB,isNumber:LD,isBoolean:XB,isObject:Lf,isPlainObject:wg,isEmptyObject:WB,isReadableStream:sF,isRequest:nF,isResponse:aF,isHeaders:iF,isUndefined:rd,isDate:KB,isFile:ZB,isBlob:QB,isRegExp:bF,isFunction:Hn,isStream:eF,isURLSearchParams:rF,isTypedArray:mF,isFileList:JB,forEach:Bf,merge:h2,extend:oF,trim:lF,stripBOM:cF,inherits:uF,toFlatObject:dF,kindOf:Kx,kindOfTest:pi,endsWith:hF,toArray:fF,forEachEntry:gF,matchAll:xF,isHTMLForm:pF,hasOwnProperty:ZA,hasOwnProp:ZA,reduceDescriptors:UD,freezeMethods:vF,toObjectSet:NF,toCamelCase:yF,noop:wF,toFiniteNumber:jF,findKey:BD,global:Oc,isContextDefined:FD,isSpecCompliantForm:SF,toJSONObject:CF,isAsyncFn:AF,isThenable:EF,setImmediate:zD,asap:TF,isIterable:OF};function Ut(e,t,s,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}Re.inherits(Ut,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Re.toJSONObject(this.config),code:this.code,status:this.status}}});const VD=Ut.prototype,$D={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{$D[e]={value:e}});Object.defineProperties(Ut,$D);Object.defineProperty(VD,"isAxiosError",{value:!0});Ut.from=(e,t,s,n,a,l)=>{const u=Object.create(VD);Re.toFlatObject(e,u,function(p){return p!==Error.prototype},x=>x!=="isAxiosError");const f=e&&e.message?e.message:"Error",m=t==null&&e?e.code:t;return Ut.call(u,f,m,s,n,a),e&&u.cause==null&&Object.defineProperty(u,"cause",{value:e,configurable:!0}),u.name=e&&e.name||"Error",l&&Object.assign(u,l),u};const DF=null;function f2(e){return Re.isPlainObject(e)||Re.isArray(e)}function qD(e){return Re.endsWith(e,"[]")?e.slice(0,-2):e}function QA(e,t,s){return e?e.concat(t).map(function(a,l){return a=qD(a),!s&&l?"["+a+"]":a}).join(s?".":""):t}function kF(e){return Re.isArray(e)&&!e.some(f2)}const _F=Re.toFlatObject(Re,{},null,function(t){return/^is[A-Z]/.test(t)});function Qx(e,t,s){if(!Re.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=Re.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,O){return!Re.isUndefined(O[k])});const n=s.metaTokens,a=s.visitor||p,l=s.dots,u=s.indexes,m=(s.Blob||typeof Blob<"u"&&Blob)&&Re.isSpecCompliantForm(t);if(!Re.isFunction(a))throw new TypeError("visitor must be a function");function x(E){if(E===null)return"";if(Re.isDate(E))return E.toISOString();if(Re.isBoolean(E))return E.toString();if(!m&&Re.isBlob(E))throw new Ut("Blob is not supported. Use a Buffer instead.");return Re.isArrayBuffer(E)||Re.isTypedArray(E)?m&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function p(E,k,O){let M=E;if(E&&!O&&typeof E=="object"){if(Re.endsWith(k,"{}"))k=n?k:k.slice(0,-2),E=JSON.stringify(E);else if(Re.isArray(E)&&kF(E)||(Re.isFileList(E)||Re.endsWith(k,"[]"))&&(M=Re.toArray(E)))return k=qD(k),M.forEach(function(P,H){!(Re.isUndefined(P)||P===null)&&t.append(u===!0?QA([k],H,l):u===null?k:k+"[]",x(P))}),!1}return f2(E)?!0:(t.append(QA(O,k,l),x(E)),!1)}const v=[],C=Object.assign(_F,{defaultVisitor:p,convertValue:x,isVisitable:f2});function T(E,k){if(!Re.isUndefined(E)){if(v.indexOf(E)!==-1)throw Error("Circular reference detected in "+k.join("."));v.push(E),Re.forEach(E,function(M,L){(!(Re.isUndefined(M)||M===null)&&a.call(t,M,Re.isString(L)?L.trim():L,k,C))===!0&&T(M,k?k.concat(L):[L])}),v.pop()}}if(!Re.isObject(e))throw new TypeError("data must be an object");return T(e),t}function JA(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function ZN(e,t){this._pairs=[],e&&Qx(e,this,t)}const HD=ZN.prototype;HD.append=function(t,s){this._pairs.push([t,s])};HD.toString=function(t){const s=t?function(n){return t.call(this,n,JA)}:JA;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function PF(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function GD(e,t,s){if(!t)return e;const n=s&&s.encode||PF;Re.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let l;if(a?l=a(t,s):l=Re.isURLSearchParams(t)?t.toString():new ZN(t,s).toString(n),l){const u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class e3{constructor(){this.handlers=[]}use(t,s,n){return this.handlers.push({fulfilled:t,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Re.forEach(this.handlers,function(n){n!==null&&t(n)})}}const YD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},IF=typeof URLSearchParams<"u"?URLSearchParams:ZN,MF=typeof FormData<"u"?FormData:null,RF=typeof Blob<"u"?Blob:null,LF={isBrowser:!0,classes:{URLSearchParams:IF,FormData:MF,Blob:RF},protocols:["http","https","file","blob","url","data"]},QN=typeof window<"u"&&typeof document<"u",m2=typeof navigator=="object"&&navigator||void 0,BF=QN&&(!m2||["ReactNative","NativeScript","NS"].indexOf(m2.product)<0),FF=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",UF=QN&&window.location.href||"http://localhost",zF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:QN,hasStandardBrowserEnv:BF,hasStandardBrowserWebWorkerEnv:FF,navigator:m2,origin:UF},Symbol.toStringTag,{value:"Module"})),yn={...zF,...LF};function VF(e,t){return Qx(e,new yn.classes.URLSearchParams,{visitor:function(s,n,a,l){return yn.isNode&&Re.isBuffer(s)?(this.append(n,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function $F(e){return Re.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function qF(e){const t={},s=Object.keys(e);let n;const a=s.length;let l;for(n=0;n<a;n++)l=s[n],t[l]=e[l];return t}function XD(e){function t(s,n,a,l){let u=s[l++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),m=l>=s.length;return u=!u&&Re.isArray(a)?a.length:u,m?(Re.hasOwnProp(a,u)?a[u]=[a[u],n]:a[u]=n,!f):((!a[u]||!Re.isObject(a[u]))&&(a[u]=[]),t(s,n,a[u],l)&&Re.isArray(a[u])&&(a[u]=qF(a[u])),!f)}if(Re.isFormData(e)&&Re.isFunction(e.entries)){const s={};return Re.forEachEntry(e,(n,a)=>{t($F(n),a,s,0)}),s}return null}function HF(e,t,s){if(Re.isString(e))try{return(t||JSON.parse)(e),Re.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(e)}const Ff={transitional:YD,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const n=s.getContentType()||"",a=n.indexOf("application/json")>-1,l=Re.isObject(t);if(l&&Re.isHTMLForm(t)&&(t=new FormData(t)),Re.isFormData(t))return a?JSON.stringify(XD(t)):t;if(Re.isArrayBuffer(t)||Re.isBuffer(t)||Re.isStream(t)||Re.isFile(t)||Re.isBlob(t)||Re.isReadableStream(t))return t;if(Re.isArrayBufferView(t))return t.buffer;if(Re.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let f;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return VF(t,this.formSerializer).toString();if((f=Re.isFileList(t))||n.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Qx(f?{"files[]":t}:t,m&&new m,this.formSerializer)}}return l||a?(s.setContentType("application/json",!1),HF(t)):t}],transformResponse:[function(t){const s=this.transitional||Ff.transitional,n=s&&s.forcedJSONParsing,a=this.responseType==="json";if(Re.isResponse(t)||Re.isReadableStream(t))return t;if(t&&Re.isString(t)&&(n&&!this.responseType||a)){const u=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(f){if(u)throw f.name==="SyntaxError"?Ut.from(f,Ut.ERR_BAD_RESPONSE,this,null,this.response):f}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yn.classes.FormData,Blob:yn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Re.forEach(["delete","get","head","post","put","patch"],e=>{Ff.headers[e]={}});const GF=Re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),YF=e=>{const t={};let s,n,a;return e&&e.split(`
`).forEach(function(u){a=u.indexOf(":"),s=u.substring(0,a).trim().toLowerCase(),n=u.substring(a+1).trim(),!(!s||t[s]&&GF[s])&&(s==="set-cookie"?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)}),t},t3=Symbol("internals");function _h(e){return e&&String(e).trim().toLowerCase()}function jg(e){return e===!1||e==null?e:Re.isArray(e)?e.map(jg):String(e)}function XF(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}const WF=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Q1(e,t,s,n,a){if(Re.isFunction(n))return n.call(this,t,s);if(a&&(t=s),!!Re.isString(t)){if(Re.isString(n))return t.indexOf(n)!==-1;if(Re.isRegExp(n))return n.test(t)}}function KF(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,n)=>s.toUpperCase()+n)}function ZF(e,t){const s=Re.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+s,{value:function(a,l,u){return this[n].call(this,t,a,l,u)},configurable:!0})})}let Gn=class{constructor(t){t&&this.set(t)}set(t,s,n){const a=this;function l(f,m,x){const p=_h(m);if(!p)throw new Error("header name must be a non-empty string");const v=Re.findKey(a,p);(!v||a[v]===void 0||x===!0||x===void 0&&a[v]!==!1)&&(a[v||m]=jg(f))}const u=(f,m)=>Re.forEach(f,(x,p)=>l(x,p,m));if(Re.isPlainObject(t)||t instanceof this.constructor)u(t,s);else if(Re.isString(t)&&(t=t.trim())&&!WF(t))u(YF(t),s);else if(Re.isObject(t)&&Re.isIterable(t)){let f={},m,x;for(const p of t){if(!Re.isArray(p))throw TypeError("Object iterator must return a key-value pair");f[x=p[0]]=(m=f[x])?Re.isArray(m)?[...m,p[1]]:[m,p[1]]:p[1]}u(f,s)}else t!=null&&l(s,t,n);return this}get(t,s){if(t=_h(t),t){const n=Re.findKey(this,t);if(n){const a=this[n];if(!s)return a;if(s===!0)return XF(a);if(Re.isFunction(s))return s.call(this,a,n);if(Re.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=_h(t),t){const n=Re.findKey(this,t);return!!(n&&this[n]!==void 0&&(!s||Q1(this,this[n],n,s)))}return!1}delete(t,s){const n=this;let a=!1;function l(u){if(u=_h(u),u){const f=Re.findKey(n,u);f&&(!s||Q1(n,n[f],f,s))&&(delete n[f],a=!0)}}return Re.isArray(t)?t.forEach(l):l(t),a}clear(t){const s=Object.keys(this);let n=s.length,a=!1;for(;n--;){const l=s[n];(!t||Q1(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const s=this,n={};return Re.forEach(this,(a,l)=>{const u=Re.findKey(n,l);if(u){s[u]=jg(a),delete s[l];return}const f=t?KF(l):String(l).trim();f!==l&&delete s[l],s[f]=jg(a),n[f]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return Re.forEach(this,(n,a)=>{n!=null&&n!==!1&&(s[a]=t&&Re.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const n=new this(t);return s.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[t3]=this[t3]={accessors:{}}).accessors,a=this.prototype;function l(u){const f=_h(u);n[f]||(ZF(a,u),n[f]=!0)}return Re.isArray(t)?t.forEach(l):l(t),this}};Gn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Re.reduceDescriptors(Gn.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[s]=n}}});Re.freezeMethods(Gn);function J1(e,t){const s=this||Ff,n=t||s,a=Gn.from(n.headers);let l=n.data;return Re.forEach(e,function(f){l=f.call(s,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function WD(e){return!!(e&&e.__CANCEL__)}function Ad(e,t,s){Ut.call(this,e??"canceled",Ut.ERR_CANCELED,t,s),this.name="CanceledError"}Re.inherits(Ad,Ut,{__CANCEL__:!0});function KD(e,t,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?e(s):t(new Ut("Request failed with status code "+s.status,[Ut.ERR_BAD_REQUEST,Ut.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function QF(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function JF(e,t){e=e||10;const s=new Array(e),n=new Array(e);let a=0,l=0,u;return t=t!==void 0?t:1e3,function(m){const x=Date.now(),p=n[l];u||(u=x),s[a]=m,n[a]=x;let v=l,C=0;for(;v!==a;)C+=s[v++],v=v%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),x-u<t)return;const T=p&&x-p;return T?Math.round(C*1e3/T):void 0}}function eU(e,t){let s=0,n=1e3/t,a,l;const u=(x,p=Date.now())=>{s=p,a=null,l&&(clearTimeout(l),l=null),e(...x)};return[(...x)=>{const p=Date.now(),v=p-s;v>=n?u(x,p):(a=x,l||(l=setTimeout(()=>{l=null,u(a)},n-v)))},()=>a&&u(a)]}const Ug=(e,t,s=3)=>{let n=0;const a=JF(50,250);return eU(l=>{const u=l.loaded,f=l.lengthComputable?l.total:void 0,m=u-n,x=a(m),p=u<=f;n=u;const v={loaded:u,total:f,progress:f?u/f:void 0,bytes:m,rate:x||void 0,estimated:x&&f&&p?(f-u)/x:void 0,event:l,lengthComputable:f!=null,[t?"download":"upload"]:!0};e(v)},s)},r3=(e,t)=>{const s=e!=null;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},s3=e=>(...t)=>Re.asap(()=>e(...t)),tU=yn.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,yn.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(yn.origin),yn.navigator&&/(msie|trident)/i.test(yn.navigator.userAgent)):()=>!0,rU=yn.hasStandardBrowserEnv?{write(e,t,s,n,a,l,u){if(typeof document>"u")return;const f=[`${e}=${encodeURIComponent(t)}`];Re.isNumber(s)&&f.push(`expires=${new Date(s).toUTCString()}`),Re.isString(n)&&f.push(`path=${n}`),Re.isString(a)&&f.push(`domain=${a}`),l===!0&&f.push("secure"),Re.isString(u)&&f.push(`SameSite=${u}`),document.cookie=f.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function sU(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function nU(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function ZD(e,t,s){let n=!sU(t);return e&&(n||s==!1)?nU(e,t):t}const n3=e=>e instanceof Gn?{...e}:e;function zc(e,t){t=t||{};const s={};function n(x,p,v,C){return Re.isPlainObject(x)&&Re.isPlainObject(p)?Re.merge.call({caseless:C},x,p):Re.isPlainObject(p)?Re.merge({},p):Re.isArray(p)?p.slice():p}function a(x,p,v,C){if(Re.isUndefined(p)){if(!Re.isUndefined(x))return n(void 0,x,v,C)}else return n(x,p,v,C)}function l(x,p){if(!Re.isUndefined(p))return n(void 0,p)}function u(x,p){if(Re.isUndefined(p)){if(!Re.isUndefined(x))return n(void 0,x)}else return n(void 0,p)}function f(x,p,v){if(v in t)return n(x,p);if(v in e)return n(void 0,x)}const m={url:l,method:l,data:l,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(x,p,v)=>a(n3(x),n3(p),v,!0)};return Re.forEach(Object.keys({...e,...t}),function(p){const v=m[p]||a,C=v(e[p],t[p],p);Re.isUndefined(C)&&v!==f||(s[p]=C)}),s}const QD=e=>{const t=zc({},e);let{data:s,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:l,headers:u,auth:f}=t;if(t.headers=u=Gn.from(u),t.url=GD(ZD(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):""))),Re.isFormData(s)){if(yn.hasStandardBrowserEnv||yn.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(Re.isFunction(s.getHeaders)){const m=s.getHeaders(),x=["content-type","content-length"];Object.entries(m).forEach(([p,v])=>{x.includes(p.toLowerCase())&&u.set(p,v)})}}if(yn.hasStandardBrowserEnv&&(n&&Re.isFunction(n)&&(n=n(t)),n||n!==!1&&tU(t.url))){const m=a&&l&&rU.read(l);m&&u.set(a,m)}return t},aU=typeof XMLHttpRequest<"u",iU=aU&&function(e){return new Promise(function(s,n){const a=QD(e);let l=a.data;const u=Gn.from(a.headers).normalize();let{responseType:f,onUploadProgress:m,onDownloadProgress:x}=a,p,v,C,T,E;function k(){T&&T(),E&&E(),a.cancelToken&&a.cancelToken.unsubscribe(p),a.signal&&a.signal.removeEventListener("abort",p)}let O=new XMLHttpRequest;O.open(a.method.toUpperCase(),a.url,!0),O.timeout=a.timeout;function M(){if(!O)return;const P=Gn.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),B={data:!f||f==="text"||f==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:P,config:e,request:O};KD(function(R){s(R),k()},function(R){n(R),k()},B),O=null}"onloadend"in O?O.onloadend=M:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(M)},O.onabort=function(){O&&(n(new Ut("Request aborted",Ut.ECONNABORTED,e,O)),O=null)},O.onerror=function(H){const B=H&&H.message?H.message:"Network Error",F=new Ut(B,Ut.ERR_NETWORK,e,O);F.event=H||null,n(F),O=null},O.ontimeout=function(){let H=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const B=a.transitional||YD;a.timeoutErrorMessage&&(H=a.timeoutErrorMessage),n(new Ut(H,B.clarifyTimeoutError?Ut.ETIMEDOUT:Ut.ECONNABORTED,e,O)),O=null},l===void 0&&u.setContentType(null),"setRequestHeader"in O&&Re.forEach(u.toJSON(),function(H,B){O.setRequestHeader(B,H)}),Re.isUndefined(a.withCredentials)||(O.withCredentials=!!a.withCredentials),f&&f!=="json"&&(O.responseType=a.responseType),x&&([C,E]=Ug(x,!0),O.addEventListener("progress",C)),m&&O.upload&&([v,T]=Ug(m),O.upload.addEventListener("progress",v),O.upload.addEventListener("loadend",T)),(a.cancelToken||a.signal)&&(p=P=>{O&&(n(!P||P.type?new Ad(null,e,O):P),O.abort(),O=null)},a.cancelToken&&a.cancelToken.subscribe(p),a.signal&&(a.signal.aborted?p():a.signal.addEventListener("abort",p)));const L=QF(a.url);if(L&&yn.protocols.indexOf(L)===-1){n(new Ut("Unsupported protocol "+L+":",Ut.ERR_BAD_REQUEST,e));return}O.send(l||null)})},lU=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let n=new AbortController,a;const l=function(x){if(!a){a=!0,f();const p=x instanceof Error?x:this.reason;n.abort(p instanceof Ut?p:new Ad(p instanceof Error?p.message:p))}};let u=t&&setTimeout(()=>{u=null,l(new Ut(`timeout ${t} of ms exceeded`,Ut.ETIMEDOUT))},t);const f=()=>{e&&(u&&clearTimeout(u),u=null,e.forEach(x=>{x.unsubscribe?x.unsubscribe(l):x.removeEventListener("abort",l)}),e=null)};e.forEach(x=>x.addEventListener("abort",l));const{signal:m}=n;return m.unsubscribe=()=>Re.asap(f),m}},oU=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let n=0,a;for(;n<s;)a=n+t,yield e.slice(n,a),n=a},cU=async function*(e,t){for await(const s of uU(e))yield*oU(s,t)},uU=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:n}=await t.read();if(s)break;yield n}}finally{await t.cancel()}},a3=(e,t,s,n)=>{const a=cU(e,t);let l=0,u,f=m=>{u||(u=!0,n&&n(m))};return new ReadableStream({async pull(m){try{const{done:x,value:p}=await a.next();if(x){f(),m.close();return}let v=p.byteLength;if(s){let C=l+=v;s(C)}m.enqueue(new Uint8Array(p))}catch(x){throw f(x),x}},cancel(m){return f(m),a.return()}},{highWaterMark:2})},i3=64*1024,{isFunction:km}=Re,dU=(({Request:e,Response:t})=>({Request:e,Response:t}))(Re.global),{ReadableStream:l3,TextEncoder:o3}=Re.global,c3=(e,...t)=>{try{return!!e(...t)}catch{return!1}},hU=e=>{e=Re.merge.call({skipUndefined:!0},dU,e);const{fetch:t,Request:s,Response:n}=e,a=t?km(t):typeof fetch=="function",l=km(s),u=km(n);if(!a)return!1;const f=a&&km(l3),m=a&&(typeof o3=="function"?(E=>k=>E.encode(k))(new o3):async E=>new Uint8Array(await new s(E).arrayBuffer())),x=l&&f&&c3(()=>{let E=!1;const k=new s(yn.origin,{body:new l3,method:"POST",get duplex(){return E=!0,"half"}}).headers.has("Content-Type");return E&&!k}),p=u&&f&&c3(()=>Re.isReadableStream(new n("").body)),v={stream:p&&(E=>E.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(E=>{!v[E]&&(v[E]=(k,O)=>{let M=k&&k[E];if(M)return M.call(k);throw new Ut(`Response type '${E}' is not supported`,Ut.ERR_NOT_SUPPORT,O)})});const C=async E=>{if(E==null)return 0;if(Re.isBlob(E))return E.size;if(Re.isSpecCompliantForm(E))return(await new s(yn.origin,{method:"POST",body:E}).arrayBuffer()).byteLength;if(Re.isArrayBufferView(E)||Re.isArrayBuffer(E))return E.byteLength;if(Re.isURLSearchParams(E)&&(E=E+""),Re.isString(E))return(await m(E)).byteLength},T=async(E,k)=>{const O=Re.toFiniteNumber(E.getContentLength());return O??C(k)};return async E=>{let{url:k,method:O,data:M,signal:L,cancelToken:P,timeout:H,onDownloadProgress:B,onUploadProgress:F,responseType:R,headers:z,withCredentials:U="same-origin",fetchOptions:Y}=QD(E),$=t||fetch;R=R?(R+"").toLowerCase():"text";let G=lU([L,P&&P.toAbortSignal()],H),ee=null;const ce=G&&G.unsubscribe&&(()=>{G.unsubscribe()});let se;try{if(F&&x&&O!=="get"&&O!=="head"&&(se=await T(z,M))!==0){let X=new s(k,{method:"POST",body:M,duplex:"half"}),re;if(Re.isFormData(M)&&(re=X.headers.get("content-type"))&&z.setContentType(re),X.body){const[ge,de]=r3(se,Ug(s3(F)));M=a3(X.body,i3,ge,de)}}Re.isString(U)||(U=U?"include":"omit");const J=l&&"credentials"in s.prototype,ne={...Y,signal:G,method:O.toUpperCase(),headers:z.normalize().toJSON(),body:M,duplex:"half",credentials:J?U:void 0};ee=l&&new s(k,ne);let pe=await(l?$(ee,Y):$(k,ne));const be=p&&(R==="stream"||R==="response");if(p&&(B||be&&ce)){const X={};["status","statusText","headers"].forEach(je=>{X[je]=pe[je]});const re=Re.toFiniteNumber(pe.headers.get("content-length")),[ge,de]=B&&r3(re,Ug(s3(B),!0))||[];pe=new n(a3(pe.body,i3,ge,()=>{de&&de(),ce&&ce()}),X)}R=R||"text";let te=await v[Re.findKey(v,R)||"text"](pe,E);return!be&&ce&&ce(),await new Promise((X,re)=>{KD(X,re,{data:te,headers:Gn.from(pe.headers),status:pe.status,statusText:pe.statusText,config:E,request:ee})})}catch(J){throw ce&&ce(),J&&J.name==="TypeError"&&/Load failed|fetch/i.test(J.message)?Object.assign(new Ut("Network Error",Ut.ERR_NETWORK,E,ee),{cause:J.cause||J}):Ut.from(J,J&&J.code,E,ee)}}},fU=new Map,JD=e=>{let t=e&&e.env||{};const{fetch:s,Request:n,Response:a}=t,l=[n,a,s];let u=l.length,f=u,m,x,p=fU;for(;f--;)m=l[f],x=p.get(m),x===void 0&&p.set(m,x=f?new Map:hU(t)),p=x;return x};JD();const JN={http:DF,xhr:iU,fetch:{get:JD}};Re.forEach(JN,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const u3=e=>`- ${e}`,mU=e=>Re.isFunction(e)||e===null||e===!1;function gU(e,t){e=Re.isArray(e)?e:[e];const{length:s}=e;let n,a;const l={};for(let u=0;u<s;u++){n=e[u];let f;if(a=n,!mU(n)&&(a=JN[(f=String(n)).toLowerCase()],a===void 0))throw new Ut(`Unknown adapter '${f}'`);if(a&&(Re.isFunction(a)||(a=a.get(t))))break;l[f||"#"+u]=a}if(!a){const u=Object.entries(l).map(([m,x])=>`adapter ${m} `+(x===!1?"is not supported by the environment":"is not available in the build"));let f=s?u.length>1?`since :
`+u.map(u3).join(`
`):" "+u3(u[0]):"as no adapter specified";throw new Ut("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return a}const ek={getAdapter:gU,adapters:JN};function eb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ad(null,e)}function d3(e){return eb(e),e.headers=Gn.from(e.headers),e.data=J1.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ek.getAdapter(e.adapter||Ff.adapter,e)(e).then(function(n){return eb(e),n.data=J1.call(e,e.transformResponse,n),n.headers=Gn.from(n.headers),n},function(n){return WD(n)||(eb(e),n&&n.response&&(n.response.data=J1.call(e,e.transformResponse,n.response),n.response.headers=Gn.from(n.response.headers))),Promise.reject(n)})}const tk="1.13.2",Jx={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Jx[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const h3={};Jx.transitional=function(t,s,n){function a(l,u){return"[Axios v"+tk+"] Transitional option '"+l+"'"+u+(n?". "+n:"")}return(l,u,f)=>{if(t===!1)throw new Ut(a(u," has been removed"+(s?" in "+s:"")),Ut.ERR_DEPRECATED);return s&&!h3[u]&&(h3[u]=!0,console.warn(a(u," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(l,u,f):!0}};Jx.spelling=function(t){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function xU(e,t,s){if(typeof e!="object")throw new Ut("options must be an object",Ut.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const l=n[a],u=t[l];if(u){const f=e[l],m=f===void 0||u(f,l,e);if(m!==!0)throw new Ut("option "+l+" must be "+m,Ut.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Ut("Unknown option "+l,Ut.ERR_BAD_OPTION)}}const Sg={assertOptions:xU,validators:Jx},Oi=Sg.validators;let Ic=class{constructor(t){this.defaults=t||{},this.interceptors={request:new e3,response:new e3}}async request(t,s){try{return await this._request(t,s)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=zc(this.defaults,s);const{transitional:n,paramsSerializer:a,headers:l}=s;n!==void 0&&Sg.assertOptions(n,{silentJSONParsing:Oi.transitional(Oi.boolean),forcedJSONParsing:Oi.transitional(Oi.boolean),clarifyTimeoutError:Oi.transitional(Oi.boolean)},!1),a!=null&&(Re.isFunction(a)?s.paramsSerializer={serialize:a}:Sg.assertOptions(a,{encode:Oi.function,serialize:Oi.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Sg.assertOptions(s,{baseUrl:Oi.spelling("baseURL"),withXsrfToken:Oi.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let u=l&&Re.merge(l.common,l[s.method]);l&&Re.forEach(["delete","get","head","post","put","patch","common"],E=>{delete l[E]}),s.headers=Gn.concat(u,l);const f=[];let m=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(s)===!1||(m=m&&k.synchronous,f.unshift(k.fulfilled,k.rejected))});const x=[];this.interceptors.response.forEach(function(k){x.push(k.fulfilled,k.rejected)});let p,v=0,C;if(!m){const E=[d3.bind(this),void 0];for(E.unshift(...f),E.push(...x),C=E.length,p=Promise.resolve(s);v<C;)p=p.then(E[v++],E[v++]);return p}C=f.length;let T=s;for(;v<C;){const E=f[v++],k=f[v++];try{T=E(T)}catch(O){k.call(this,O);break}}try{p=d3.call(this,T)}catch(E){return Promise.reject(E)}for(v=0,C=x.length;v<C;)p=p.then(x[v++],x[v++]);return p}getUri(t){t=zc(this.defaults,t);const s=ZD(t.baseURL,t.url,t.allowAbsoluteUrls);return GD(s,t.params,t.paramsSerializer)}};Re.forEach(["delete","get","head","options"],function(t){Ic.prototype[t]=function(s,n){return this.request(zc(n||{},{method:t,url:s,data:(n||{}).data}))}});Re.forEach(["post","put","patch"],function(t){function s(n){return function(l,u,f){return this.request(zc(f||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:u}))}}Ic.prototype[t]=s(),Ic.prototype[t+"Form"]=s(!0)});let pU=class rk{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const n=this;this.promise.then(a=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](a);n._listeners=null}),this.promise.then=a=>{let l;const u=new Promise(f=>{n.subscribe(f),l=f}).then(a);return u.cancel=function(){n.unsubscribe(l)},u},t(function(l,u,f){n.reason||(n.reason=new Ad(l,u,f),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=n=>{t.abort(n)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new rk(function(a){t=a}),cancel:t}}};function yU(e){return function(s){return e.apply(null,s)}}function bU(e){return Re.isObject(e)&&e.isAxiosError===!0}const g2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(g2).forEach(([e,t])=>{g2[t]=e});function sk(e){const t=new Ic(e),s=ID(Ic.prototype.request,t);return Re.extend(s,Ic.prototype,t,{allOwnKeys:!0}),Re.extend(s,t,null,{allOwnKeys:!0}),s.create=function(a){return sk(zc(e,a))},s}const ps=sk(Ff);ps.Axios=Ic;ps.CanceledError=Ad;ps.CancelToken=pU;ps.isCancel=WD;ps.VERSION=tk;ps.toFormData=Qx;ps.AxiosError=Ut;ps.Cancel=ps.CanceledError;ps.all=function(t){return Promise.all(t)};ps.spread=yU;ps.isAxiosError=bU;ps.mergeConfig=zc;ps.AxiosHeaders=Gn;ps.formToJSON=e=>XD(Re.isHTMLForm(e)?new FormData(e):e);ps.getAdapter=ek.getAdapter;ps.HttpStatusCode=g2;ps.default=ps;const{Axios:J0e,AxiosError:eme,CanceledError:tme,isCancel:rme,CancelToken:sme,VERSION:nme,all:ame,Cancel:ime,isAxiosError:lme,spread:ome,toFormData:cme,AxiosHeaders:ume,HttpStatusCode:dme,formToJSON:hme,getAdapter:fme,mergeConfig:mme}=ps,pn={ACCESS_TOKEN:"accessToken",REFRESH_TOKEN:"refreshToken",ADMIN_DATA:"adminData",REMEMBER_ME:"rememberMe"},tf=()=>localStorage.getItem(pn.REMEMBER_ME)==="true"?localStorage:sessionStorage,ii={getAccessToken:()=>{const e=tf().getItem(pn.ACCESS_TOKEN);return console.log("[Storage] Getting access token:",e?"exists":"null"),e},getRefreshToken:()=>{const e=tf().getItem(pn.REFRESH_TOKEN);return console.log("[Storage] Getting refresh token:",e?"exists":"null"),e},setTokens:({accessToken:e,refreshToken:t},s=!1)=>{console.log("[Storage] Setting tokens, rememberMe:",s),localStorage.setItem(pn.REMEMBER_ME,String(s));const n=s?localStorage:sessionStorage;e&&n.setItem(pn.ACCESS_TOKEN,e),t&&n.setItem(pn.REFRESH_TOKEN,t)},setAccessToken:e=>{console.log("[Storage] Updating access token"),tf().setItem(pn.ACCESS_TOKEN,e)},clearTokens:()=>{console.log("[Storage] Clearing all tokens"),localStorage.removeItem(pn.ACCESS_TOKEN),localStorage.removeItem(pn.REFRESH_TOKEN),localStorage.removeItem(pn.REMEMBER_ME),sessionStorage.removeItem(pn.ACCESS_TOKEN),sessionStorage.removeItem(pn.REFRESH_TOKEN)},hasTokens:()=>!!ii.getAccessToken()&&!!ii.getRefreshToken()},Ao={getAdmin:()=>{try{const e=tf().getItem(pn.ADMIN_DATA),t=e?JSON.parse(e):null;return console.log("[Storage] Getting admin data:",t?t.email:"null"),t}catch(e){return console.error("[Storage] Error parsing admin data:",e),null}},setAdmin:e=>{console.log("[Storage] Setting admin data:",e?.email),tf().setItem(pn.ADMIN_DATA,JSON.stringify(e))},clearAdmin:()=>{console.log("[Storage] Clearing admin data"),localStorage.removeItem(pn.ADMIN_DATA),sessionStorage.removeItem(pn.ADMIN_DATA)}},x2=()=>{console.log("[Storage] Clearing all auth data"),ii.clearTokens(),Ao.clearAdmin()},ew="https://motivata.synquic.com/api";console.log("[API] Initializing with base URL:",ew);const gl=ps.create({baseURL:ew,timeout:3e4,headers:{"Content-Type":"application/json"}});let _m=!1,Cg=[];const f3=(e,t=null)=>{console.log("[API] Processing queued requests:",Cg.length),Cg.forEach(s=>{e?s.reject(e):s.resolve(t)}),Cg=[]},zg=e=>{if(!e||typeof e!="object")return e;if(Array.isArray(e))return e.map(zg);const t=["password","currentPassword","newPassword","refreshToken","accessToken"],s={...e};return Object.keys(s).forEach(n=>{t.includes(n)?s[n]="***MASKED***":typeof s[n]=="object"&&s[n]!==null&&(s[n]=zg(s[n]))}),s};gl.interceptors.request.use(e=>{const t=ii.getAccessToken();return t&&(e.headers.Authorization=`Bearer ${t}`),console.log(`[API] Request: ${e.method?.toUpperCase()} ${e.url}`,{hasAuth:!!t,body:e.data?zg(e.data):null,params:e.params||null}),e},e=>(console.error("[API] Request error:",e.message),Promise.reject(e)));gl.interceptors.response.use(e=>(console.log(`[API] Response: ${e.status} ${e.config.url}`,{message:e.data?.message,data:e.data?.data?zg(e.data.data):null}),e),async e=>{const t=e.config;if(console.error("[API] Response error:",{status:e.response?.status,url:t?.url,message:e.response?.data?.message||e.message}),e.response?.status===401&&!t._retry&&!t.url?.includes("/auth/refresh-token")&&!t.url?.includes("/auth/login")){if(console.log("[API] Token expired, attempting refresh..."),_m)return console.log("[API] Refresh in progress, queueing request"),new Promise((n,a)=>{Cg.push({resolve:n,reject:a})}).then(n=>(t.headers.Authorization=`Bearer ${n}`,gl(t))).catch(n=>Promise.reject(n));t._retry=!0,_m=!0;const s=ii.getRefreshToken();if(!s)return console.log("[API] No refresh token available, clearing auth"),_m=!1,x2(),window.location.href="/login",Promise.reject(e);try{console.log("[API] Refreshing access token...");const n=await ps.post(`${ew}/web/auth/refresh-token`,{refreshToken:s}),{accessToken:a}=n.data.data;return console.log("[API] Token refresh successful"),ii.setAccessToken(a),f3(null,a),t.headers.Authorization=`Bearer ${a}`,gl(t)}catch(n){return console.error("[API] Token refresh failed:",n.response?.data?.message),f3(n,null),x2(),window.location.href="/login",Promise.reject(n)}finally{_m=!1}}return Promise.reject(e)});const Te=async e=>{try{const t=await e;return{success:!0,data:t.data.data,message:t.data.message,error:null,status:t.data.status||t.status}}catch(t){const s={success:!1,data:null,message:t.response?.data?.message||"An unexpected error occurred",error:t.response?.data?.error||t.message,status:t.response?.status||500};return console.error("[API] Handled error:",s),s}},Ee={get:(e,t={})=>gl.get(e,t),post:(e,t={},s={})=>gl.post(e,t,s),put:(e,t={},s={})=>gl.put(e,t,s),delete:(e,t={})=>gl.delete(e,t),patch:(e,t={},s={})=>gl.patch(e,t,s)},pc={LOGIN:"/web/auth/login",REGISTER:"/web/auth/register",LOGOUT:"/web/auth/logout",REFRESH_TOKEN:"/web/auth/refresh-token",PROFILE:"/web/auth/profile",CHANGE_PASSWORD:"/web/auth/change-password"},bo={login:async(e,t=!1)=>{console.log("[Auth] Attempting login for:",e.username);const s=await Te(Ee.post(pc.LOGIN,{username:e.username,password:e.password}));if(s.success&&s.data){const{admin:n,tokens:a}=s.data;ii.setTokens({accessToken:a.accessToken,refreshToken:a.refreshToken},t),Ao.setAdmin(n),console.log("[Auth] Login successful for:",n.username),console.log("[Auth] Admin role:",n.role)}else console.error("[Auth] Login failed:",s.message);return s},register:async(e,t=!1)=>{console.log("[Auth] Attempting registration for:",e.username);const s=await Te(Ee.post(pc.REGISTER,e));if(s.success&&s.data){const{admin:n,tokens:a}=s.data;ii.setTokens({accessToken:a.accessToken,refreshToken:a.refreshToken},t),Ao.setAdmin(n),console.log("[Auth] Registration successful for:",n.username)}else console.error("[Auth] Registration failed:",s.message);return s},logout:async()=>{console.log("[Auth] Attempting logout");try{await Te(Ee.post(pc.LOGOUT)),console.log("[Auth] Server logout successful")}catch(e){console.warn("[Auth] Server logout failed, clearing local data anyway:",e.message)}return x2(),console.log("[Auth] Local auth data cleared"),{success:!0,message:"Logged out successfully"}},getProfile:async()=>{console.log("[Auth] Fetching profile");const e=await Te(Ee.get(pc.PROFILE));return e.success&&e.data&&(Ao.setAdmin(e.data.admin),console.log("[Auth] Profile fetched for:",e.data.admin.username)),e},updateProfile:async e=>{console.log("[Auth] Updating profile");const t=await Te(Ee.put(pc.PROFILE,e));return t.success&&t.data&&(Ao.setAdmin(t.data.admin),console.log("[Auth] Profile updated successfully")),t},changePassword:async e=>{console.log("[Auth] Changing password");const t=await Te(Ee.put(pc.CHANGE_PASSWORD,e));return t.success?console.log("[Auth] Password changed successfully"):console.error("[Auth] Password change failed:",t.message),t},refreshToken:async()=>{const e=ii.getRefreshToken();if(!e)return console.log("[Auth] No refresh token available"),{success:!1,accessToken:null,error:"No refresh token"};console.log("[Auth] Refreshing access token");const t=await Te(Ee.post(pc.REFRESH_TOKEN,{refreshToken:e}));return t.success&&t.data?(ii.setAccessToken(t.data.accessToken),console.log("[Auth] Token refreshed successfully"),{success:!0,accessToken:t.data.accessToken,error:null}):(console.error("[Auth] Token refresh failed:",t.message),{success:!1,accessToken:null,error:t.message})},isAuthenticated:()=>{const e=ii.hasTokens();return console.log("[Auth] Checking authentication:",e),e},getStoredAdmin:()=>Ao.getAdmin(),hasRole:e=>{const t=Ao.getAdmin();return t?(Array.isArray(e)?e:[e]).includes(t.role):!1},hasAccess:e=>{const t=Ao.getAdmin();return t&&t.access?.includes(e)||!1}},nk=w.createContext(null),vU=({children:e})=>{const[t,s]=w.useState(null),[n,a]=w.useState(!1),[l,u]=w.useState(!0),[f,m]=w.useState(null);w.useEffect(()=>{(async()=>{console.log("[AuthContext] Initializing auth state...");try{if(bo.isAuthenticated()){console.log("[AuthContext] Found stored tokens, fetching profile...");const H=await bo.getProfile();H.success?(s(H.data.admin),a(!0),console.log("[AuthContext] Auth initialized successfully")):(console.log("[AuthContext] Profile fetch failed, token may be expired"),a(!1),s(null))}else console.log("[AuthContext] No stored tokens found"),a(!1),s(null)}catch(H){console.error("[AuthContext] Error initializing auth:",H),a(!1),s(null)}finally{u(!1)}})()},[]);const x=w.useCallback(async(P,H=!1)=>{console.log("[AuthContext] Login attempt"),m(null),u(!0);try{const B=await bo.login(P,H);return B.success?(s(B.data.admin),a(!0),console.log("[AuthContext] Login successful"),{success:!0,data:B.data}):(m(B.message),console.error("[AuthContext] Login failed:",B.message),{success:!1,error:B.message})}catch(B){const F="An unexpected error occurred during login";return m(F),console.error("[AuthContext] Login error:",B),{success:!1,error:F}}finally{u(!1)}},[]),p=w.useCallback(async(P,H=!1)=>{console.log("[AuthContext] Register attempt"),m(null),u(!0);try{const B=await bo.register(P,H);return B.success?(s(B.data.admin),a(!0),console.log("[AuthContext] Registration successful"),{success:!0,data:B.data}):(m(B.message),console.error("[AuthContext] Registration failed:",B.message),{success:!1,error:B.message})}catch(B){const F="An unexpected error occurred during registration";return m(F),console.error("[AuthContext] Registration error:",B),{success:!1,error:F}}finally{u(!1)}},[]),v=w.useCallback(async()=>{console.log("[AuthContext] Logout attempt"),u(!0);try{return await bo.logout(),s(null),a(!1),m(null),console.log("[AuthContext] Logout successful"),{success:!0}}catch(P){return console.error("[AuthContext] Logout error:",P),s(null),a(!1),{success:!0}}finally{u(!1)}},[]),C=w.useCallback(async()=>{console.log("[AuthContext] Refreshing profile");try{const P=await bo.getProfile();return P.success?(s(P.data.admin),console.log("[AuthContext] Profile refreshed"),{success:!0,data:P.data.admin}):(console.error("[AuthContext] Profile refresh failed:",P.message),{success:!1,error:P.message})}catch(P){return console.error("[AuthContext] Profile refresh error:",P),{success:!1,error:"Failed to refresh profile"}}},[]),T=w.useCallback(async P=>{console.log("[AuthContext] Updating profile"),m(null);try{const H=await bo.updateProfile(P);return H.success?(s(H.data.admin),console.log("[AuthContext] Profile updated"),{success:!0,data:H.data.admin}):(m(H.message),{success:!1,error:H.message})}catch{const B="Failed to update profile";return m(B),{success:!1,error:B}}},[]),E=w.useCallback(async P=>{console.log("[AuthContext] Changing password"),m(null);try{const H=await bo.changePassword(P);return H.success?(console.log("[AuthContext] Password changed"),{success:!0}):(m(H.message),{success:!1,error:H.message})}catch{const B="Failed to change password";return m(B),{success:!1,error:B}}},[]),k=w.useCallback(()=>{m(null)},[]),O=w.useCallback(P=>t?(Array.isArray(P)?P:[P]).includes(t.role):!1,[t]),M=w.useCallback(P=>t&&t.access?.includes(P)||!1,[t]),L={admin:t,isAuthenticated:n,isLoading:l,error:f,login:x,register:p,logout:v,refreshProfile:C,updateProfile:T,changePassword:E,clearError:k,hasRole:O,hasAccess:M};return r.jsx(nk.Provider,{value:L,children:e})},mn=()=>{const e=w.useContext(nk);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},ak=()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-gray-800 border-t-transparent rounded-full animate-spin"}),r.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}),m3=()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:r.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center max-w-md",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access this page."}),r.jsx("a",{href:"/dashboard",className:"inline-block px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Go to Dashboard"})]})}),NU=({children:e,allowedRoles:t=[],requiredAccess:s=[],redirectTo:n="/login"})=>{const{isAuthenticated:a,isLoading:l,admin:u,hasRole:f,hasAccess:m}=mn(),x=ya();return console.log("[ProtectedRoute] Checking access:",{isAuthenticated:a,isLoading:l,path:x.pathname,adminRole:u?.role}),l?(console.log("[ProtectedRoute] Loading auth state..."),r.jsx(ak,{})):a?t.length>0&&!f(t)?(console.log("[ProtectedRoute] Access denied - role mismatch:",{required:t,actual:u?.role}),r.jsx(m3,{})):s.length>0&&!s.every(v=>m(v))?(console.log("[ProtectedRoute] Access denied - missing permissions:",{required:s,actual:u?.access}),r.jsx(m3,{})):(console.log("[ProtectedRoute] Access granted"),e):(console.log("[ProtectedRoute] Not authenticated, redirecting to:",n),r.jsx(Bg,{to:n,state:{from:x},replace:!0}))},wU=({children:e,redirectTo:t="/dashboard"})=>{const{isAuthenticated:s,isLoading:n}=mn(),a=ya();if(console.log("[PublicRoute] Checking:",{isAuthenticated:s,isLoading:n}),n)return r.jsx(ak,{});if(s){const l=a.state?.from?.pathname||t;return console.log("[PublicRoute] Already authenticated, redirecting to:",l),r.jsx(Bg,{to:l,replace:!0})}return e};const jU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SU=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,n)=>n?n.toUpperCase():s.toLowerCase()),g3=e=>{const t=SU(e);return t.charAt(0).toUpperCase()+t.slice(1)},ik=(...e)=>e.filter((t,s,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===s).join(" ").trim(),CU=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var AU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const EU=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:a="",children:l,iconNode:u,...f},m)=>w.createElement("svg",{ref:m,...AU,width:t,height:t,stroke:e,strokeWidth:n?Number(s)*24/Number(t):s,className:ik("lucide",a),...!l&&!CU(f)&&{"aria-hidden":"true"},...f},[...u.map(([x,p])=>w.createElement(x,p)),...Array.isArray(l)?l:[l]]));const Qe=(e,t)=>{const s=w.forwardRef(({className:n,...a},l)=>w.createElement(EU,{ref:l,iconNode:t,className:ik(`lucide-${jU(g3(e))}`,`lucide-${e}`,n),...a}));return s.displayName=g3(e),s};const TU=[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"1qyhux"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]],OU=Qe("armchair",TU);const DU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],kU=Qe("arrow-left",DU);const _U=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],PU=Qe("arrow-right",_U);const IU=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],x3=Qe("award",IU);const MU=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],lk=Qe("banknote",MU);const RU=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Vg=Qe("bell",RU);const LU=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],p3=Qe("briefcase",LU);const BU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],FU=Qe("calendar-check",BU);const UU=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],tb=Qe("calendar-range",UU);const zU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]],Pm=Qe("calendar-x",zU);const VU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],fr=Qe("calendar",VU);const $U=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Fa=Qe("chart-column",$U);const qU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Cn=Qe("check",qU);const HU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],fi=Qe("chevron-down",HU);const GU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ep=Qe("chevron-right",GU);const YU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],tw=Qe("chevron-left",YU);const XU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],WU=Qe("chevron-up",XU);const KU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Mt=Qe("circle-alert",KU);const ZU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ls=Qe("circle-check-big",ZU);const QU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],sd=Qe("circle-check",QU);const JU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ag=Qe("circle-question-mark",JU);const ez=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],wr=Qe("circle-x",ez);const tz=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Eg=Qe("clipboard-list",tz);const rz=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jr=Qe("clock",rz);const sz=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],nd=Qe("copy",sz);const nz=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],tp=Qe("credit-card",nz);const az=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],rp=Qe("crown",az);const iz=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],lz=Qe("dollar-sign",iz);const oz=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],cz=Qe("download",oz);const uz=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ed=Qe("external-link",uz);const dz=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ok=Qe("eye-off",dz);const hz=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Lr=Qe("eye",hz);const fz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],mz=Qe("file-play",fz);const gz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],p2=Qe("file-spreadsheet",gz);const xz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ad=Qe("file-text",xz);const pz=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Va=Qe("funnel",pz);const yz=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],bz=Qe("gift",yz);const vz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],cf=Qe("globe",vz);const Nz=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],sp=Qe("grip-vertical",Nz);const wz=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],rw=Qe("hash",wz);const jz=[["path",{d:"M15 15.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"nrt1m3"}],["path",{d:"M21 12.17V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6",key:"99hgts"}],["path",{d:"m6 21 5-5",key:"1wyjai"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],Sz=Qe("image-play",jz);const Cz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Mo=Qe("image",Cz);const Az=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],sw=Qe("indian-rupee",Az);const Ez=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Tz=Qe("info",Ez);const Oz=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Dz=Qe("layout-dashboard",Oz);const kz=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],ck=Qe("layout-grid",kz);const _z=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],nw=Qe("link",_z);const Pz=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],$g=Qe("list-checks",Pz);const Iz=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],aw=Qe("list",Iz);const Mz=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],it=Qe("loader-circle",Mz);const Rz=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Lz=Qe("lock-open",Rz);const Bz=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],uk=Qe("lock",Bz);const Fz=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Uz=Qe("log-out",Fz);const zz=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],iw=Qe("mail",zz);const Vz=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],lw=Qe("map-pin",Vz);const $z=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],uf=Qe("message-circle",$z);const qz=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],dk=Qe("message-square",qz);const Hz=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Td=Qe("package",Hz);const Gz=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],y3=Qe("pen-line",Gz);const Yz=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],hk=Qe("pen",Yz);const Xz=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Wz=Qe("percent",Xz);const Kz=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ga=Qe("phone",Kz);const Zz=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],fk=Qe("play",Zz);const Qz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kr=Qe("plus",Qz);const Jz=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],qs=Qe("refresh-cw",Jz);const eV=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ro=Qe("rotate-ccw",eV);const tV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],mk=Qe("save",tV);const rV=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],sV=Qe("scan-line",rV);const nV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Br=Qe("search",nV);const aV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],gk=Qe("send",aV);const iV=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],lV=Qe("settings-2",iV);const oV=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cV=Qe("settings",oV);const uV=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],dV=Qe("share-2",uV);const hV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ow=Qe("shield-check",hV);const fV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],cw=Qe("shield",fV);const mV=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],gV=Qe("shopping-cart",mV);const xV=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],pV=Qe("sliders-horizontal",xV);const yV=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],bV=Qe("square-check-big",yV);const vV=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Js=Qe("square-pen",vV);const NV=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],$u=Qe("star",NV);const wV=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Vc=Qe("tag",wV);const jV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],id=Qe("target",jV);const SV=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],CV=Qe("text-align-start",SV);const AV=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],_o=Qe("ticket",AV);const EV=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Ui=Qe("toggle-left",EV);const TV=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],wl=Qe("toggle-right",TV);const OV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],hr=Qe("trash-2",OV);const DV=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],kV=Qe("trash",DV);const _V=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],xk=Qe("trending-up",_V);const PV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],np=Qe("triangle-alert",PV);const IV=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Qu=Qe("trophy",IV);const MV=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],pk=Qe("upload",MV);const RV=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Od=Qe("user-check",RV);const LV=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],BV=Qe("user-cog",LV);const FV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],uw=Qe("user-plus",FV);const UV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Uf=Qe("user-x",UV);const zV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ls=Qe("user",zV);const VV=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],qg=Qe("users-round",VV);const $V=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Yn=Qe("users",$V);const qV=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Mi=Qe("video",qV);const HV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Kr=Qe("x",HV);const GV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],yk=Qe("zap",GV),bk="/assets/Motivata-Dba061jL.png",YV="/assets/logo2-NMKQARNi.png",Di={BASE:"/web/membership-requests",PLANS:"/web/membership-plans",PENDING_COUNT:"/web/membership-requests/pending-count"},XV=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&t.append(s,n)}),t.toString()},ld={getPlans:async()=>{console.log("[MembershipRequestService] Fetching plans");const e=await Te(Ee.get(Di.PLANS));return e.success?console.log("[MembershipRequestService] Fetched plans:",e.data.plans?.length):console.error("[MembershipRequestService] Failed to fetch plans:",e.message),e},submitRequest:async e=>{console.log("[MembershipRequestService] Submitting request for:",e.phone);const t=await Te(Ee.post(Di.BASE,e));return t.success?console.log("[MembershipRequestService] Request submitted:",t.data.requestId):console.error("[MembershipRequestService] Failed to submit request:",t.message),t},getPendingCount:async()=>{const e=await Te(Ee.get(Di.PENDING_COUNT));return e.success&&console.log("[MembershipRequestService] Pending count:",e.data.count),e},getAll:async(e={})=>{const t=XV(e),s=t?`${Di.BASE}?${t}`:Di.BASE;console.log("[MembershipRequestService] Fetching requests with params:",e);const n=await Te(Ee.get(s));return n.success?console.log("[MembershipRequestService] Fetched requests:",n.data.requests?.length):console.error("[MembershipRequestService] Failed to fetch requests:",n.message),n},getById:async e=>{console.log("[MembershipRequestService] Fetching request:",e);const t=await Te(Ee.get(`${Di.BASE}/${e}`));return t.success?console.log("[MembershipRequestService] Fetched request:",t.data.request?.name):console.error("[MembershipRequestService] Failed to fetch request:",t.message),t},approve:async(e,t)=>{console.log("[MembershipRequestService] Approving request:",e);const s=await Te(Ee.post(`${Di.BASE}/${e}/approve`,t));return s.success?console.log("[MembershipRequestService] Request approved:",s.data.paymentLink):console.error("[MembershipRequestService] Failed to approve request:",s.message),s},reject:async(e,t)=>{console.log("[MembershipRequestService] Rejecting request:",e);const s=await Te(Ee.post(`${Di.BASE}/${e}/reject`,t));return s.success?console.log("[MembershipRequestService] Request rejected"):console.error("[MembershipRequestService] Failed to reject request:",s.message),s},resendPaymentLink:async e=>{console.log("[MembershipRequestService] Resending payment link:",e);const t=await Te(Ee.post(`${Di.BASE}/${e}/resend-link`));return t.success?console.log("[MembershipRequestService] Payment link resent"):console.error("[MembershipRequestService] Failed to resend link:",t.message),t},withdraw:async(e,t)=>{console.log("[MembershipRequestService] Withdrawing request:",e);const s=await Te(Ee.post(`${Di.BASE}/${e}/withdraw`,t));return s.success?console.log("[MembershipRequestService] Request withdrawn successfully"):console.error("[MembershipRequestService] Failed to withdraw request:",s.message),s}};function WV(){const[e,t]=w.useState(0),[s,n]=w.useState(!0),[a,l]=w.useState(!1);return w.useEffect(()=>{const u=async()=>{try{const m=await ld.getPendingCount();m.success?(t(m.data.count||0),l(!1)):(console.warn("Failed to fetch pending count:",m.message),l(!0))}catch(m){console.error("Failed to fetch pending membership request count:",m),l(!0)}finally{n(!1)}};u();const f=setInterval(u,3e4);return()=>clearInterval(f)},[]),s||a||e===0?null:r.jsx("span",{className:"inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 rounded-full bg-red-500 text-white text-xs font-bold shadow-sm",children:e>99?"99+":e})}function KV({collapsed:e,isOpen:t,onClose:s}){const n=Yx(),a=ya(),{logout:l,admin:u}=mn(),[f,m]=w.useState({clubs:!0,services:!0,engagement:!0}),x=()=>{l(),n("/login")},p=P=>{m(H=>({...H,[P]:!H[P]}))},v=P=>a.pathname===P,C=P=>P?.some(H=>v(H.path)),T=[{id:"dashboard",label:"Dashboard",icon:Dz,path:"/dashboard",type:"single"},{id:"events",label:"Events",icon:fr,path:"/events",type:"single"},{id:"users",label:"Users",icon:BV,path:"/users",type:"single"},{id:"admins",label:"Admins",icon:ow,path:"/admins",type:"single"},{id:"clubs",label:"Clubs & Connect",icon:qg,type:"section",children:[{id:"clubs-manage",label:"Manage Clubs",icon:qg,path:"/clubs"},{id:"club-join-requests",label:"Join Requests",icon:uw,path:"/club-join-requests"},{id:"admin-club-posts",label:"Create Post",icon:Js,path:"/admin-club-posts"}]},{id:"engagement",label:"Engagement",icon:Fa,type:"section",children:[{id:"sessions",label:"Sessions",icon:Mi,path:"/sessions"},{id:"quizes",label:"Quizes",icon:Eg,path:"/quizes"},{id:"challenges",label:"Challenges",icon:Qu,path:"/challenges"},{id:"polls",label:"Polls",icon:Fa,path:"/polls"},{id:"stories",label:"Stories",icon:Sz,path:"/stories"}]},{id:"services",label:"Services",icon:p3,type:"section",children:[{id:"services-manage",label:"Manage Services",icon:p3,path:"/services"},{id:"service-orders",label:"Orders",icon:tp,path:"/service-orders"},{id:"service-requests",label:"Requests",icon:ad,path:"/service-requests"}]},{id:"memberships",label:"Memberships",icon:rp,path:"/memberships",type:"single"},{id:"membership-requests",label:"Membership Requests",icon:Yn,path:"/membership-requests",type:"single",showBadge:!0},{id:"user-subscriptions",label:"Subscriptions",icon:Od,path:"/user-subscriptions",type:"single"},{id:"cashtickets",label:"Cash Tickets",icon:lk,path:"/cash-tickets",type:"single"},{id:"vouchers",label:"Vouchers",icon:bz,path:"/vouchers",type:"single"},{id:"scan-qr",label:"Scan QR",icon:sV,path:"/scan-qr",type:"single"},{id:"ticket-reshare",label:"Ticket Reshare",icon:dV,path:"/ticket-reshare",type:"single"},{id:"feature-access",label:"Feature Access",icon:cw,path:"/feature-access",type:"single"},{id:"settings",label:"Settings",icon:cV,path:"/settings",type:"single"}],E=u?.name||u?.username||"Admin",k=u?.email||"admin@motivata.com",O=u?.role||"Administrator",M=P=>P.split(" ").map(H=>H[0]).join("").toUpperCase().slice(0,2),L=P=>{if(P.type==="single"){const H=v(P.path);return r.jsx("li",{children:r.jsxs(Fg,{to:P.path,className:`
              w-full flex items-center gap-3 px-3 py-2.5 rounded-lg
              transition-all duration-200 group relative
              ${H?"bg-gray-900 text-white shadow-md":"text-gray-700 hover:bg-gray-100"}
              ${e?"lg:justify-center lg:px-2":""}
            `,title:e?P.label:"",children:[r.jsx(P.icon,{className:`
                h-4 w-4 shrink-0 transition-transform duration-200
                ${H?"scale-110":"group-hover:scale-105"}
              `}),!e&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"font-medium text-sm truncate flex-1",children:P.label}),P.showBadge&&r.jsx(WV,{})]})]})},P.id)}if(P.type==="section"){const H=f[P.id],B=C(P.children);return r.jsxs("li",{className:"space-y-1",children:[r.jsxs("button",{onClick:()=>p(P.id),className:`
              w-full flex items-center gap-3 px-3 py-2.5 rounded-lg
              transition-all duration-200 group
              ${B?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}
              ${e?"lg:justify-center lg:px-2":""}
            `,title:e?P.label:"",children:[r.jsx(P.icon,{className:"h-4 w-4 shrink-0"}),!e&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"font-semibold text-sm truncate flex-1 text-left",children:P.label}),H?r.jsx(fi,{className:"h-4 w-4 shrink-0"}):r.jsx(ep,{className:"h-4 w-4 shrink-0"})]})]}),!e&&H&&r.jsx("ul",{className:"ml-3 pl-3 border-l-2 border-gray-200 space-y-1",children:P.children.map(F=>{const R=v(F.path);return r.jsx("li",{children:r.jsxs(Fg,{to:F.path,className:`
                        w-full flex items-center gap-3 px-3 py-2 rounded-lg
                        transition-all duration-200 group
                        ${R?"bg-gray-900 text-white shadow-md":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}
                      `,children:[r.jsx(F.icon,{className:"h-4 w-4 shrink-0"}),r.jsx("span",{className:"font-medium text-sm truncate",children:F.label})]})},F.id)})})]},P.id)}};return r.jsxs("aside",{className:`
        ${e?"lg:w-20":"lg:w-72"}
        fixed lg:static inset-y-0 left-0 z-50
        w-72
        ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        bg-gradient-to-b from-white to-gray-50/50
        border-r border-gray-200
        shadow-2xl lg:shadow-none
        flex flex-col
        transition-all duration-300 ease-in-out
        h-screen
        overflow-hidden
      `,children:[r.jsx("div",{className:"p-5 lg:p-6 border-b border-gray-200/80 shrink-0 bg-white/80 backdrop-blur-sm",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:`flex flex-col ${e?"items-center":"items-start"} min-w-0 flex-1`,children:[r.jsx("img",{src:e?YV:bk,alt:"Motivata",className:`${e?"h-12 w-12":"h-16"} object-contain`}),!e&&r.jsx("p",{className:"text-xs text-gray-500 font-medium -mt-1 ml-4",children:"Admin Panel"})]}),r.jsx("button",{onClick:s,className:"lg:hidden p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-all active:scale-95","aria-label":"Close sidebar",children:r.jsx(Kr,{className:"h-5 w-5"})})]})}),r.jsx("nav",{className:"flex-1 p-3 lg:p-4 overflow-y-auto overflow-x-hidden custom-scrollbar",children:r.jsx("ul",{className:"space-y-1",children:T.map(P=>L(P))})}),r.jsxs("div",{className:"border-t border-gray-200/80 shrink-0 bg-white/50 backdrop-blur-sm",children:[r.jsx("div",{className:`p-4 ${e?"lg:p-2":""}`,children:r.jsxs("div",{className:`
              flex items-center gap-3 p-3 rounded-xl
              bg-gradient-to-br from-gray-50 to-gray-100/50
              border border-gray-200/50
              transition-all duration-200 hover:shadow-md
              ${e?"lg:justify-center lg:p-2":""}
            `,title:e?`${E} - ${O}`:"",children:[r.jsxs("div",{className:"relative shrink-0",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-800 via-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-sm shadow-md ring-2 ring-white",children:M(E)}),r.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white shadow-sm"})]}),!e&&r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-bold text-gray-900 truncate",children:E}),r.jsx("p",{className:"text-xs text-gray-600 truncate",children:k}),r.jsx("div",{className:"flex items-center gap-1 mt-1",children:r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-[10px] font-semibold bg-blue-100 text-gray-900 border border-blue-200",children:O})})]})]})}),r.jsx("div",{className:"p-4 pt-0",children:r.jsxs("button",{onClick:x,className:`
              w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl
              bg-gradient-to-r from-red-50 to-red-100/50
              text-red-600 font-semibold text-sm
              border border-red-200
              hover:from-red-100 hover:to-red-200/50
              hover:border-red-300 hover:shadow-md
              active:scale-[0.98]
              transition-all duration-200
              group
              ${e?"lg:px-2":""}
            `,title:"Logout",children:[r.jsx(Uz,{className:"h-4 w-4 shrink-0 group-hover:scale-110 transition-transform"}),!e&&r.jsx("span",{children:"Logout"})]})})]})]})}function ZV({toggleSidebar:e}){const[t,s]=w.useState(!1),[n,a]=w.useState("");return r.jsxs("header",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 px-4 lg:px-6 py-3 lg:py-4 flex items-center justify-between flex-shrink-0 sticky top-0 z-30 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 lg:gap-4 flex-1",children:[r.jsx("button",{onClick:e,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all hover:scale-105 active:scale-95 group","aria-label":"Toggle Sidebar",children:r.jsxs("div",{className:"relative h-6 w-6",children:[r.jsx("span",{className:"absolute left-0 top-1 w-6 h-0.5 bg-gray-600 rounded transition-all group-hover:w-5"}),r.jsx("span",{className:"absolute left-0 top-3 w-6 h-0.5 bg-gray-600 rounded"}),r.jsx("span",{className:"absolute left-0 top-5 w-6 h-0.5 bg-gray-600 rounded transition-all group-hover:w-4"})]})}),r.jsxs("div",{className:"hidden lg:block",children:[r.jsx("h1",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"Welcome back"}),r.jsx("p",{className:"text-xs text-gray-500",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative hidden md:block",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),r.jsx("input",{type:"text",placeholder:"Search anything...",value:n,onChange:l=>a(l.target.value),className:"pl-10 pr-4 py-2 w-64 lg:w-80 bg-gray-50 border border-gray-200 rounded-lg focus:border-gray-800 outline-none text-sm transition-all placeholder:text-gray-400"}),n&&r.jsx("button",{onClick:()=>a(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-0.5 hover:bg-gray-200 rounded",children:r.jsx(Kr,{className:"h-3.5 w-3.5 text-gray-400"})})]}),r.jsx("button",{onClick:()=>s(!t),className:"md:hidden p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all active:scale-95","aria-label":"Search",children:r.jsx(Br,{className:"h-5 w-5"})}),r.jsxs("button",{className:"relative p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all hover:scale-105 active:scale-95 group","aria-label":"Notifications",title:"Notifications",children:[r.jsx(Vg,{className:"h-5 w-5 group-hover:animate-pulse"}),r.jsx("span",{className:"absolute top-1.5 right-1.5 h-2 w-2 bg-red-500 rounded-full ring-2 ring-white"}),r.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center ring-2 ring-white",children:"3"})]})]}),t&&r.jsx("div",{className:"md:hidden fixed inset-x-0 top-[57px] bg-white border-b border-gray-200 p-4 shadow-lg z-40 animate-in slide-in-from-top",children:r.jsxs("div",{className:"relative",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search anything...",autoFocus:!0,value:n,onChange:l=>a(l.target.value),className:"w-full pl-10 pr-10 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:border-gray-800 outline-none text-sm"}),r.jsx("button",{onClick:()=>{s(!1),a("")},className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 rounded",children:r.jsx(Kr,{className:"h-4 w-4 text-gray-400"})})]})})]})}function QV(){const[e,t]=w.useState(!1),[s,n]=w.useState(!1),a=ya(),l=()=>{window.innerWidth<1024?n(!s):t(!e)},u=()=>n(!1);w.useEffect(()=>{n(!1)},[a.pathname]),w.useEffect(()=>{const x=()=>{window.innerWidth>=1024&&n(!1)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const f={"/dashboard":"dashboard","/events":"events","/enrollments":"enrollments","/coupons":"coupons","/users":"users","/admins":"admins","/payments":"payments","/cash-tickets":"cashtickets","/vouchers":"vouchers","/sessions":"sessions","/quizes":"quizes","/challenges":"challenges","/polls":"polls","/stories":"stories","/memberships":"memberships","/settings":"settings","/clubs":"clubs","/scan-qr":"scan-qr","/ticket-reshare":"ticket-reshare","/services":"services","/service-orders":"service-orders","/service-requests":"service-requests","/user-subscriptions":"user-subscriptions"},m=()=>f[a.pathname]||"dashboard";return r.jsxs("div",{className:"h-screen bg-gradient-to-br from-gray-50 via-gray-50 to-blue-50/30 flex overflow-hidden",children:[s&&r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden transition-opacity",onClick:u}),r.jsx(KV,{activeMenu:m(),collapsed:e,isOpen:s,onClose:u}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx(ZV,{toggleSidebar:l}),r.jsx("main",{className:"flex-1 overflow-auto custom-scrollbar",children:r.jsx("div",{className:"p-4 sm:p-6 lg:p-8 max-w-[1920px] mx-auto",children:r.jsx(uB,{})})})]})]})}function JV(){const[e,t]=w.useState(""),[s,n]=w.useState(""),[a,l]=w.useState(!1),[u,f]=w.useState(!1),[m,x]=w.useState(!1),[p,v]=w.useState(""),C=Yx(),T=ya(),{login:E}=mn(),k=T.state?.from?.pathname||"/dashboard",O=async M=>{if(M.preventDefault(),v(""),!e.trim()){v("Username is required");return}if(!s.trim()){v("Password is required");return}console.log("[Login] Attempting login for:",e),x(!0);try{const L=await E({username:e,password:s},u);L.success?(console.log("[Login] Login successful, redirecting to:",k),C(k,{replace:!0})):(console.error("[Login] Login failed:",L.error),L.error?.includes("deactivated")?v("Your account has been deactivated. Please contact an administrator."):L.error?.includes("Invalid")?v("Invalid username or password. Please try again."):v(L.error||"Login failed. Please try again."))}catch(L){console.error("[Login] Unexpected error:",L),v("An unexpected error occurred. Please try again.")}finally{x(!1)}};return r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("img",{src:bk,alt:"Motivata",className:"h-16 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Sign in to your account"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[p&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[r.jsx(Mt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-700",children:p})]}),r.jsxs("form",{onSubmit:O,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ls,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"username",type:"text",value:e,onChange:M=>t(M.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-all disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter your username",disabled:m,autoComplete:"username"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(uk,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"password",type:a?"text":"password",value:s,onChange:M=>n(M.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-all disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter your password",disabled:m,autoComplete:"current-password"}),r.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute inset-y-0 right-0 pr-3 flex items-center disabled:cursor-not-allowed",disabled:m,tabIndex:-1,children:a?r.jsx(ok,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):r.jsx(Lr,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("label",{className:"flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u,onChange:M=>f(M.target.checked),className:"h-4 w-4 text-gray-800 border-gray-300 rounded focus:ring-gray-700 cursor-pointer",disabled:m}),r.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),r.jsx("a",{href:"#",className:"text-sm text-gray-800 hover:text-black font-medium",children:"Forgot password?"})]}),r.jsx("button",{type:"submit",disabled:m,className:"w-full bg-gray-800 text-white py-3 px-4 rounded-lg font-medium hover:bg-gray-900 focus:ring-4 focus:ring-gray-300 transition-all disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-5 w-5 animate-spin"}),"Signing in..."]}):"Log In"})]})]})]})})}var vk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},b3=Po.createContext&&Po.createContext(vk),e$=["attr","size","title"];function t$(e,t){if(e==null)return{};var s=r$(e,t),n,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function r$(e,t){if(e==null)return{};var s={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;s[n]=e[n]}return s}function Hg(){return Hg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Hg.apply(this,arguments)}function v3(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Gg(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?v3(Object(s),!0).forEach(function(n){s$(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v3(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function s$(e,t,s){return t=n$(t),t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function n$(e){var t=a$(e,"string");return typeof t=="symbol"?t:t+""}function a$(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nk(e){return e&&e.map((t,s)=>Po.createElement(t.tag,Gg({key:s},t.attr),Nk(t.child)))}function qt(e){return t=>Po.createElement(i$,Hg({attr:Gg({},e.attr)},t),Nk(e.child))}function i$(e){var t=s=>{var{attr:n,size:a,title:l}=e,u=t$(e,e$),f=a||s.size||"1em",m;return s.className&&(m=s.className),e.className&&(m=(m?m+" ":"")+e.className),Po.createElement("svg",Hg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,n,u,{className:m,style:Gg(Gg({color:e.color||s.color},s.style),e.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),l&&Po.createElement("title",null,l),e.children)};return b3!==void 0?Po.createElement(b3.Consumer,null,s=>t(s)):t(vk)}function l$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},child:[]},{tag:"path",attr:{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},child:[]}]})(e)}function o$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"},child:[]}]})(e)}function N3(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"},child:[]}]})(e)}function od(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(e)}function w3(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"},child:[]}]})(e)}function c$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"},child:[]}]})(e)}function u$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"},child:[]}]})(e)}function d$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(e)}function wk(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"},child:[]}]})(e)}function h$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"},child:[]}]})(e)}function j3(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(e)}function f$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M8 5v14l11-7z"},child:[]}]})(e)}function m$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"},child:[]}]})(e)}function g$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(e)}function x$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"},child:[]}]})(e)}function rf(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 21h-2v-2h2v2zm-2-7h-2v5h2v-5zm8-2h-2v4h2v-4zm-2-2h-2v2h2v-2zM7 12H5v2h2v-2zm-2-2H3v2h2v-2zm7-5h2V3h-2v2zm-7.5-.5v3h3v-3h-3zM9 9H3V3h6v6zm-4.5 7.5v3h3v-3h-3zM9 21H3v-6h6v6zm7.5-16.5v3h3v-3h-3zM21 9h-6V3h6v6zm-2 10v-3h-4v2h2v3h4v-2h-2zm-2-7h-4v2h4v-2zm-4-2H7v2h2v2h2v-2h2v-2zm1-1V7h-2V5h-2v4h4zM6.75 5.25h-1.5v1.5h1.5v-1.5zm0 12h-1.5v1.5h1.5v-1.5zm12-12h-1.5v1.5h1.5v-1.5z"},child:[]}]})(e)}function Im(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.5 6.5v3h-3v-3h3M11 5H5v6h6V5zm-1.5 9.5v3h-3v-3h3M11 13H5v6h6v-6zm6.5-6.5v3h-3v-3h3M19 5h-6v6h6V5zm-6 8h1.5v1.5H13V13zm1.5 1.5H16V16h-1.5v-1.5zM16 13h1.5v1.5H16V13zm-3 3h1.5v1.5H13V16zm1.5 1.5H16V19h-1.5v-1.5zM16 16h1.5v1.5H16V16zm1.5-1.5H19V16h-1.5v-1.5zm0 3H19V19h-1.5v-1.5zM22 7h-2V4h-3V2h5v5zm0 15v-5h-2v3h-3v2h5zM2 22h5v-2H4v-3H2v5zM2 2v5h2V4h3V2H2z"},child:[]}]})(e)}function rb(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(e)}function p$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"},child:[]}]})(e)}function Yg(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(e)}function y$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m21.16 7.26-1.41-1.41-3.56 3.55 1.41 1.41s3.45-3.52 3.56-3.55zM11 3h2v5h-2zM6.4 10.81 7.81 9.4 4.26 5.84 2.84 7.26c.11.03 3.56 3.55 3.56 3.55zM20 12h-5c0 1.66-1.34 3-3 3s-3-1.34-3-3H4c-1.1 0-2 .9-2 2v5c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2z"},child:[]}]})(e)}function b$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M16 7h-1l-1-1h-4L9 7H8c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-4 7c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},child:[]},{tag:"path",attr:{d:"m8.57.51 4.48 4.48V2.04c4.72.47 8.48 4.23 8.95 8.95h2C23.34 3.02 15.49-1.59 8.57.51zM10.95 21.96c-4.72-.47-8.48-4.23-8.95-8.95H0c.66 7.97 8.51 12.58 15.43 10.48l-4.48-4.48v2.95z"},child:[]}]})(e)}function S3(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.79 21 3 11.21v2c0 .53.21 1.04.59 1.41l7.79 7.79c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83L12.79 21z"},child:[]},{tag:"path",attr:{d:"M11.38 17.41c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83L12.63.58A2.04 2.04 0 0 0 11.21 0H5C3.9 0 3 .9 3 2v6.21c0 .53.21 1.04.59 1.41l7.79 7.79zM7.25 3a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5z"},child:[]}]})(e)}function v$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(e)}function N$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"},child:[]}]})(e)}function w$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}function jk(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(e)}function C3(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M22 10V6a2 2 0 0 0-2-2H4c-1.1 0-1.99.89-1.99 2v4c1.1 0 1.99.9 1.99 2s-.89 2-2 2v4c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-4c-1.1 0-2-.9-2-2s.9-2 2-2zm-9 7.5h-2v-2h2v2zm0-4.5h-2v-2h2v2zm0-4.5h-2v-2h2v2z"},child:[]}]})(e)}function j$(e){return qt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},child:[]}]})(e)}function Sk(e){var t,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(s=Sk(e[t]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function js(){for(var e,t,s=0,n="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=Sk(e))&&(n&&(n+=" "),n+=t);return n}function S$(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}S$(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var dw=e=>typeof e=="number"&&!isNaN(e),df=e=>typeof e=="string",Ck=e=>typeof e=="function",C$=e=>df(e)||dw(e),A$=e=>w.isValidElement(e)||df(e)||Ck(e)||dw(e),E$=1,Ak=()=>`${E$++}`,Ri=new Map,y2=[],A3=new Set,Ek=()=>Ri.size>0,T$=(e,{containerId:t})=>{var s;return(s=Ri.get(t||1))==null?void 0:s.toasts.get(e)};function O$(e,t){var s;if(t)return!!((s=Ri.get(t))!=null&&s.isToastActive(e));let n=!1;return Ri.forEach(a=>{a.isToastActive(e)&&(n=!0)}),n}function D$(e){if(!Ek()){y2=y2.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||C$(e))Ri.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Ri.get(e.containerId);t?t.removeToast(e.id):Ri.forEach(s=>{s.removeToast(e.id)})}}var k$=(e={})=>{Ri.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function _$(e,t){A$(e)&&(Ek()||y2.push({content:e,options:t}),Ri.forEach(s=>{s.buildToast(e,t)}))}function Tk(e,t){Ri.forEach(s=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===s.id)&&s.toggle(e,t?.id)})}function P$(e){return A3.add(e),()=>{A3.delete(e)}}function I$(e){return e&&(df(e.toastId)||dw(e.toastId))?e.toastId:Ak()}function zf(e,t){return _$(e,t),t.toastId}function ap(e,t){return{...t,type:t&&t.type||e,toastId:I$(t)}}function ip(e){return(t,s)=>zf(t,ap(e,s))}function dt(e,t){return zf(e,ap("default",t))}dt.loading=(e,t)=>zf(e,ap("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function M$(e,{pending:t,error:s,success:n},a){let l;t&&(l=df(t)?dt.loading(t,a):dt.loading(t.render,{...a,...t}));let u={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},f=(x,p,v)=>{if(p==null){dt.dismiss(l);return}let C={type:x,...u,...a,data:v},T=df(p)?{render:p}:p;return l?dt.update(l,{...C,...T}):dt(T.render,{...C,...T}),v},m=Ck(e)?e():e;return m.then(x=>f("success",n,x)).catch(x=>f("error",s,x)),m}dt.promise=M$;dt.success=ip("success");dt.info=ip("info");dt.error=ip("error");dt.warning=ip("warning");dt.warn=dt.warning;dt.dark=(e,t)=>zf(e,ap("default",{theme:"dark",...t}));function R$(e){D$(e)}dt.dismiss=R$;dt.clearWaitingQueue=k$;dt.isActive=O$;dt.update=(e,t={})=>{let s=T$(e,t);if(s){let{props:n,content:a}=s,l={delay:100,...n,...t,toastId:t.toastId||e,updateId:Ak()};l.toastId!==e&&(l.staleId=e);let u=l.render||a;delete l.render,zf(u,l)}};dt.done=e=>{dt.update(e,{progress:1})};dt.onChange=P$;dt.play=e=>Tk(!0,e);dt.pause=e=>Tk(!1,e);const Ok=w.createContext({});function L$(e){const t=w.useRef(null);return t.current===null&&(t.current=e()),t.current}const hw=typeof window<"u",B$=hw?w.useLayoutEffect:w.useEffect,fw=w.createContext(null);function mw(e,t){e.indexOf(t)===-1&&e.push(t)}function gw(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}const jl=(e,t,s)=>s>t?t:s<e?e:s;let xw=()=>{};const Sl={},Dk=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function kk(e){return typeof e=="object"&&e!==null}const _k=e=>/^0[^.\s]+$/u.test(e);function pw(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ua=e=>e,F$=(e,t)=>s=>t(e(s)),Vf=(...e)=>e.reduce(F$),hf=(e,t,s)=>{const n=t-e;return n===0?1:(s-e)/n};class yw{constructor(){this.subscriptions=[]}add(t){return mw(this.subscriptions,t),()=>gw(this.subscriptions,t)}notify(t,s,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,s,n);else for(let l=0;l<a;l++){const u=this.subscriptions[l];u&&u(t,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Li=e=>e*1e3,La=e=>e/1e3;function Pk(e,t){return t?e*(1e3/t):0}const Ik=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,U$=1e-7,z$=12;function V$(e,t,s,n,a){let l,u,f=0;do u=t+(s-t)/2,l=Ik(u,n,a)-e,l>0?s=u:t=u;while(Math.abs(l)>U$&&++f<z$);return u}function $f(e,t,s,n){if(e===t&&s===n)return Ua;const a=l=>V$(l,0,1,e,s);return l=>l===0||l===1?l:Ik(a(l),t,n)}const Mk=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Rk=e=>t=>1-e(1-t),Lk=$f(.33,1.53,.69,.99),bw=Rk(Lk),Bk=Mk(bw),Fk=e=>(e*=2)<1?.5*bw(e):.5*(2-Math.pow(2,-10*(e-1))),vw=e=>1-Math.sin(Math.acos(e)),Uk=Rk(vw),zk=Mk(vw),$$=$f(.42,0,1,1),q$=$f(0,0,.58,1),Vk=$f(.42,0,.58,1),H$=e=>Array.isArray(e)&&typeof e[0]!="number",$k=e=>Array.isArray(e)&&typeof e[0]=="number",G$={linear:Ua,easeIn:$$,easeInOut:Vk,easeOut:q$,circIn:vw,circInOut:zk,circOut:Uk,backIn:bw,backInOut:Bk,backOut:Lk,anticipate:Fk},Y$=e=>typeof e=="string",E3=e=>{if($k(e)){xw(e.length===4);const[t,s,n,a]=e;return $f(t,s,n,a)}else if(Y$(e))return G$[e];return e},Mm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function X$(e,t){let s=new Set,n=new Set,a=!1,l=!1;const u=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function m(p){u.has(p)&&(x.schedule(p),e()),p(f)}const x={schedule:(p,v=!1,C=!1)=>{const E=C&&a?s:n;return v&&u.add(p),E.has(p)||E.add(p),p},cancel:p=>{n.delete(p),u.delete(p)},process:p=>{if(f=p,a){l=!0;return}a=!0,[s,n]=[n,s],s.forEach(m),s.clear(),a=!1,l&&(l=!1,x.process(p))}};return x}const W$=40;function qk(e,t){let s=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>s=!0,u=Mm.reduce((P,H)=>(P[H]=X$(l),P),{}),{setup:f,read:m,resolveKeyframes:x,preUpdate:p,update:v,preRender:C,render:T,postRender:E}=u,k=()=>{const P=Sl.useManualTiming?a.timestamp:performance.now();s=!1,Sl.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(P-a.timestamp,W$),1)),a.timestamp=P,a.isProcessing=!0,f.process(a),m.process(a),x.process(a),p.process(a),v.process(a),C.process(a),T.process(a),E.process(a),a.isProcessing=!1,s&&t&&(n=!1,e(k))},O=()=>{s=!0,n=!0,a.isProcessing||e(k)};return{schedule:Mm.reduce((P,H)=>{const B=u[H];return P[H]=(F,R=!1,z=!1)=>(s||O(),B.schedule(F,R,z)),P},{}),cancel:P=>{for(let H=0;H<Mm.length;H++)u[Mm[H]].cancel(P)},state:a,steps:u}}const{schedule:ts,cancel:Lo,state:fn,steps:sb}=qk(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ua,!0);let Tg;function K$(){Tg=void 0}const Vn={now:()=>(Tg===void 0&&Vn.set(fn.isProcessing||Sl.useManualTiming?fn.timestamp:performance.now()),Tg),set:e=>{Tg=e,queueMicrotask(K$)}},Hk=e=>t=>typeof t=="string"&&t.startsWith(e),Nw=Hk("--"),Z$=Hk("var(--"),ww=e=>Z$(e)?Q$.test(e.split("/*")[0].trim()):!1,Q$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Dd={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ff={...Dd,transform:e=>jl(0,1,e)},Rm={...Dd,default:1},sf=e=>Math.round(e*1e5)/1e5,jw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function J$(e){return e==null}const eq=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Sw=(e,t)=>s=>!!(typeof s=="string"&&eq.test(s)&&s.startsWith(e)||t&&!J$(s)&&Object.prototype.hasOwnProperty.call(s,t)),Gk=(e,t,s)=>n=>{if(typeof n!="string")return n;const[a,l,u,f]=n.match(jw);return{[e]:parseFloat(a),[t]:parseFloat(l),[s]:parseFloat(u),alpha:f!==void 0?parseFloat(f):1}},tq=e=>jl(0,255,e),nb={...Dd,transform:e=>Math.round(tq(e))},Dc={test:Sw("rgb","red"),parse:Gk("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:n=1})=>"rgba("+nb.transform(e)+", "+nb.transform(t)+", "+nb.transform(s)+", "+sf(ff.transform(n))+")"};function rq(e){let t="",s="",n="",a="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,s+=s,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const b2={test:Sw("#"),parse:rq,transform:Dc.transform},qf=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Eo=qf("deg"),Bi=qf("%"),Dt=qf("px"),sq=qf("vh"),nq=qf("vw"),T3={...Bi,parse:e=>Bi.parse(e)/100,transform:e=>Bi.transform(e*100)},qu={test:Sw("hsl","hue"),parse:Gk("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:n=1})=>"hsla("+Math.round(e)+", "+Bi.transform(sf(t))+", "+Bi.transform(sf(s))+", "+sf(ff.transform(n))+")"},Ps={test:e=>Dc.test(e)||b2.test(e)||qu.test(e),parse:e=>Dc.test(e)?Dc.parse(e):qu.test(e)?qu.parse(e):b2.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Dc.transform(e):qu.transform(e),getAnimatableNone:e=>{const t=Ps.parse(e);return t.alpha=0,Ps.transform(t)}},aq=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function iq(e){return isNaN(e)&&typeof e=="string"&&(e.match(jw)?.length||0)+(e.match(aq)?.length||0)>0}const Yk="number",Xk="color",lq="var",oq="var(",O3="${}",cq=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function mf(e){const t=e.toString(),s=[],n={color:[],number:[],var:[]},a=[];let l=0;const f=t.replace(cq,m=>(Ps.test(m)?(n.color.push(l),a.push(Xk),s.push(Ps.parse(m))):m.startsWith(oq)?(n.var.push(l),a.push(lq),s.push(m)):(n.number.push(l),a.push(Yk),s.push(parseFloat(m))),++l,O3)).split(O3);return{values:s,split:f,indexes:n,types:a}}function Wk(e){return mf(e).values}function Kk(e){const{split:t,types:s}=mf(e),n=t.length;return a=>{let l="";for(let u=0;u<n;u++)if(l+=t[u],a[u]!==void 0){const f=s[u];f===Yk?l+=sf(a[u]):f===Xk?l+=Ps.transform(a[u]):l+=a[u]}return l}}const uq=e=>typeof e=="number"?0:Ps.test(e)?Ps.getAnimatableNone(e):e;function dq(e){const t=Wk(e);return Kk(e)(t.map(uq))}const Bo={test:iq,parse:Wk,createTransformer:Kk,getAnimatableNone:dq};function ab(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function hq({hue:e,saturation:t,lightness:s,alpha:n}){e/=360,t/=100,s/=100;let a=0,l=0,u=0;if(!t)a=l=u=s;else{const f=s<.5?s*(1+t):s+t-s*t,m=2*s-f;a=ab(m,f,e+1/3),l=ab(m,f,e),u=ab(m,f,e-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(u*255),alpha:n}}function Xg(e,t){return s=>s>0?t:e}const is=(e,t,s)=>e+(t-e)*s,ib=(e,t,s)=>{const n=e*e,a=s*(t*t-n)+n;return a<0?0:Math.sqrt(a)},fq=[b2,Dc,qu],mq=e=>fq.find(t=>t.test(e));function D3(e){const t=mq(e);if(!t)return!1;let s=t.parse(e);return t===qu&&(s=hq(s)),s}const k3=(e,t)=>{const s=D3(e),n=D3(t);if(!s||!n)return Xg(e,t);const a={...s};return l=>(a.red=ib(s.red,n.red,l),a.green=ib(s.green,n.green,l),a.blue=ib(s.blue,n.blue,l),a.alpha=is(s.alpha,n.alpha,l),Dc.transform(a))},v2=new Set(["none","hidden"]);function gq(e,t){return v2.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}function xq(e,t){return s=>is(e,t,s)}function Cw(e){return typeof e=="number"?xq:typeof e=="string"?ww(e)?Xg:Ps.test(e)?k3:bq:Array.isArray(e)?Zk:typeof e=="object"?Ps.test(e)?k3:pq:Xg}function Zk(e,t){const s=[...e],n=s.length,a=e.map((l,u)=>Cw(l)(l,t[u]));return l=>{for(let u=0;u<n;u++)s[u]=a[u](l);return s}}function pq(e,t){const s={...e,...t},n={};for(const a in s)e[a]!==void 0&&t[a]!==void 0&&(n[a]=Cw(e[a])(e[a],t[a]));return a=>{for(const l in n)s[l]=n[l](a);return s}}function yq(e,t){const s=[],n={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const l=t.types[a],u=e.indexes[l][n[l]],f=e.values[u]??0;s[a]=f,n[l]++}return s}const bq=(e,t)=>{const s=Bo.createTransformer(t),n=mf(e),a=mf(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?v2.has(e)&&!a.values.length||v2.has(t)&&!n.values.length?gq(e,t):Vf(Zk(yq(n,a),a.values),s):Xg(e,t)};function Qk(e,t,s){return typeof e=="number"&&typeof t=="number"&&typeof s=="number"?is(e,t,s):Cw(e)(e,t)}const vq=e=>{const t=({timestamp:s})=>e(s);return{start:(s=!0)=>ts.update(t,s),stop:()=>Lo(t),now:()=>fn.isProcessing?fn.timestamp:Vn.now()}},Jk=(e,t,s=10)=>{let n="";const a=Math.max(Math.round(t/s),2);for(let l=0;l<a;l++)n+=Math.round(e(l/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Wg=2e4;function Aw(e){let t=0;const s=50;let n=e.next(t);for(;!n.done&&t<Wg;)t+=s,n=e.next(t);return t>=Wg?1/0:t}function Nq(e,t=100,s){const n=s({...e,keyframes:[0,t]}),a=Math.min(Aw(n),Wg);return{type:"keyframes",ease:l=>n.next(a*l).value/t,duration:La(a)}}const wq=5;function e_(e,t,s){const n=Math.max(t-wq,0);return Pk(s-e(n),t-n)}const gs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},lb=.001;function jq({duration:e=gs.duration,bounce:t=gs.bounce,velocity:s=gs.velocity,mass:n=gs.mass}){let a,l,u=1-t;u=jl(gs.minDamping,gs.maxDamping,u),e=jl(gs.minDuration,gs.maxDuration,La(e)),u<1?(a=x=>{const p=x*u,v=p*e,C=p-s,T=N2(x,u),E=Math.exp(-v);return lb-C/T*E},l=x=>{const v=x*u*e,C=v*s+s,T=Math.pow(u,2)*Math.pow(x,2)*e,E=Math.exp(-v),k=N2(Math.pow(x,2),u);return(-a(x)+lb>0?-1:1)*((C-T)*E)/k}):(a=x=>{const p=Math.exp(-x*e),v=(x-s)*e+1;return-lb+p*v},l=x=>{const p=Math.exp(-x*e),v=(s-x)*(e*e);return p*v});const f=5/e,m=Cq(a,l,f);if(e=Li(e),isNaN(m))return{stiffness:gs.stiffness,damping:gs.damping,duration:e};{const x=Math.pow(m,2)*n;return{stiffness:x,damping:u*2*Math.sqrt(n*x),duration:e}}}const Sq=12;function Cq(e,t,s){let n=s;for(let a=1;a<Sq;a++)n=n-e(n)/t(n);return n}function N2(e,t){return e*Math.sqrt(1-t*t)}const Aq=["duration","bounce"],Eq=["stiffness","damping","mass"];function _3(e,t){return t.some(s=>e[s]!==void 0)}function Tq(e){let t={velocity:gs.velocity,stiffness:gs.stiffness,damping:gs.damping,mass:gs.mass,isResolvedFromDuration:!1,...e};if(!_3(e,Eq)&&_3(e,Aq))if(e.visualDuration){const s=e.visualDuration,n=2*Math.PI/(s*1.2),a=n*n,l=2*jl(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:gs.mass,stiffness:a,damping:l}}else{const s=jq(e);t={...t,...s,mass:gs.mass},t.isResolvedFromDuration=!0}return t}function Kg(e=gs.visualDuration,t=gs.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:a}=s;const l=s.keyframes[0],u=s.keyframes[s.keyframes.length-1],f={done:!1,value:l},{stiffness:m,damping:x,mass:p,duration:v,velocity:C,isResolvedFromDuration:T}=Tq({...s,velocity:-La(s.velocity||0)}),E=C||0,k=x/(2*Math.sqrt(m*p)),O=u-l,M=La(Math.sqrt(m/p)),L=Math.abs(O)<5;n||(n=L?gs.restSpeed.granular:gs.restSpeed.default),a||(a=L?gs.restDelta.granular:gs.restDelta.default);let P;if(k<1){const B=N2(M,k);P=F=>{const R=Math.exp(-k*M*F);return u-R*((E+k*M*O)/B*Math.sin(B*F)+O*Math.cos(B*F))}}else if(k===1)P=B=>u-Math.exp(-M*B)*(O+(E+M*O)*B);else{const B=M*Math.sqrt(k*k-1);P=F=>{const R=Math.exp(-k*M*F),z=Math.min(B*F,300);return u-R*((E+k*M*O)*Math.sinh(z)+B*O*Math.cosh(z))/B}}const H={calculatedDuration:T&&v||null,next:B=>{const F=P(B);if(T)f.done=B>=v;else{let R=B===0?E:0;k<1&&(R=B===0?Li(E):e_(P,B,F));const z=Math.abs(R)<=n,U=Math.abs(u-F)<=a;f.done=z&&U}return f.value=f.done?u:F,f},toString:()=>{const B=Math.min(Aw(H),Wg),F=Jk(R=>H.next(B*R).value,B,30);return B+"ms "+F},toTransition:()=>{}};return H}Kg.applyToOptions=e=>{const t=Nq(e,100,Kg);return e.ease=t.ease,e.duration=Li(t.duration),e.type="keyframes",e};function w2({keyframes:e,velocity:t=0,power:s=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:u,min:f,max:m,restDelta:x=.5,restSpeed:p}){const v=e[0],C={done:!1,value:v},T=z=>f!==void 0&&z<f||m!==void 0&&z>m,E=z=>f===void 0?m:m===void 0||Math.abs(f-z)<Math.abs(m-z)?f:m;let k=s*t;const O=v+k,M=u===void 0?O:u(O);M!==O&&(k=M-v);const L=z=>-k*Math.exp(-z/n),P=z=>M+L(z),H=z=>{const U=L(z),Y=P(z);C.done=Math.abs(U)<=x,C.value=C.done?M:Y};let B,F;const R=z=>{T(C.value)&&(B=z,F=Kg({keyframes:[C.value,E(C.value)],velocity:e_(P,z,C.value),damping:a,stiffness:l,restDelta:x,restSpeed:p}))};return R(0),{calculatedDuration:null,next:z=>{let U=!1;return!F&&B===void 0&&(U=!0,H(z),R(z)),B!==void 0&&z>=B?F.next(z-B):(!U&&H(z),C)}}}function Oq(e,t,s){const n=[],a=s||Sl.mix||Qk,l=e.length-1;for(let u=0;u<l;u++){let f=a(e[u],e[u+1]);if(t){const m=Array.isArray(t)?t[u]||Ua:t;f=Vf(m,f)}n.push(f)}return n}function Dq(e,t,{clamp:s=!0,ease:n,mixer:a}={}){const l=e.length;if(xw(l===t.length),l===1)return()=>t[0];if(l===2&&t[0]===t[1])return()=>t[1];const u=e[0]===e[1];e[0]>e[l-1]&&(e=[...e].reverse(),t=[...t].reverse());const f=Oq(t,n,a),m=f.length,x=p=>{if(u&&p<e[0])return t[0];let v=0;if(m>1)for(;v<e.length-2&&!(p<e[v+1]);v++);const C=hf(e[v],e[v+1],p);return f[v](C)};return s?p=>x(jl(e[0],e[l-1],p)):x}function kq(e,t){const s=e[e.length-1];for(let n=1;n<=t;n++){const a=hf(0,t,n);e.push(is(s,1,a))}}function _q(e){const t=[0];return kq(t,e.length-1),t}function Pq(e,t){return e.map(s=>s*t)}function Iq(e,t){return e.map(()=>t||Vk).splice(0,e.length-1)}function nf({duration:e=300,keyframes:t,times:s,ease:n="easeInOut"}){const a=H$(n)?n.map(E3):E3(n),l={done:!1,value:t[0]},u=Pq(s&&s.length===t.length?s:_q(t),e),f=Dq(u,t,{ease:Array.isArray(a)?a:Iq(t,a)});return{calculatedDuration:e,next:m=>(l.value=f(m),l.done=m>=e,l)}}const Mq=e=>e!==null;function Ew(e,{repeat:t,repeatType:s="loop"},n,a=1){const l=e.filter(Mq),f=a<0||t&&s!=="loop"&&t%2===1?0:l.length-1;return!f||n===void 0?l[f]:n}const Rq={decay:w2,inertia:w2,tween:nf,keyframes:nf,spring:Kg};function t_(e){typeof e.type=="string"&&(e.type=Rq[e.type])}class Tw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const Lq=e=>e/100;class Ow extends Tw{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==Vn.now()&&this.tick(Vn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;t_(t);const{type:s=nf,repeat:n=0,repeatDelay:a=0,repeatType:l,velocity:u=0}=t;let{keyframes:f}=t;const m=s||nf;m!==nf&&typeof f[0]!="number"&&(this.mixKeyframes=Vf(Lq,Qk(f[0],f[1])),f=[0,100]);const x=m({...t,keyframes:f});l==="mirror"&&(this.mirroredGenerator=m({...t,keyframes:[...f].reverse(),velocity:-u})),x.calculatedDuration===null&&(x.calculatedDuration=Aw(x));const{calculatedDuration:p}=x;this.calculatedDuration=p,this.resolvedDuration=p+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=x}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:n,totalDuration:a,mixKeyframes:l,mirroredGenerator:u,resolvedDuration:f,calculatedDuration:m}=this;if(this.startTime===null)return n.next(0);const{delay:x=0,keyframes:p,repeat:v,repeatType:C,repeatDelay:T,type:E,onUpdate:k,finalKeyframe:O}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const M=this.currentTime-x*(this.playbackSpeed>=0?1:-1),L=this.playbackSpeed>=0?M<0:M>a;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let P=this.currentTime,H=n;if(v){const z=Math.min(this.currentTime,a)/f;let U=Math.floor(z),Y=z%1;!Y&&z>=1&&(Y=1),Y===1&&U--,U=Math.min(U,v+1),!!(U%2)&&(C==="reverse"?(Y=1-Y,T&&(Y-=T/f)):C==="mirror"&&(H=u)),P=jl(0,1,Y)*f}const B=L?{done:!1,value:p[0]}:H.next(P);l&&(B.value=l(B.value));let{done:F}=B;!L&&m!==null&&(F=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return R&&E!==w2&&(B.value=Ew(p,this.options,O,this.speed)),k&&k(B.value),R&&this.finish(),B}then(t,s){return this.finished.then(t,s)}get duration(){return La(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+La(t)}get time(){return La(this.currentTime)}set time(t){t=Li(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Vn.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=La(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=vq,startTime:s}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=s??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Vn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function Bq(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const kc=e=>e*180/Math.PI,j2=e=>{const t=kc(Math.atan2(e[1],e[0]));return S2(t)},Fq={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:j2,rotateZ:j2,skewX:e=>kc(Math.atan(e[1])),skewY:e=>kc(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},S2=e=>(e=e%360,e<0&&(e+=360),e),P3=j2,I3=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),M3=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Uq={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:I3,scaleY:M3,scale:e=>(I3(e)+M3(e))/2,rotateX:e=>S2(kc(Math.atan2(e[6],e[5]))),rotateY:e=>S2(kc(Math.atan2(-e[2],e[0]))),rotateZ:P3,rotate:P3,skewX:e=>kc(Math.atan(e[4])),skewY:e=>kc(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function C2(e){return e.includes("scale")?1:0}function A2(e,t){if(!e||e==="none")return C2(t);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(s)n=Uq,a=s;else{const f=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Fq,a=f}if(!a)return C2(t);const l=n[t],u=a[1].split(",").map(Vq);return typeof l=="function"?l(u):u[l]}const zq=(e,t)=>{const{transform:s="none"}=getComputedStyle(e);return A2(s,t)};function Vq(e){return parseFloat(e.trim())}const kd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_d=new Set(kd),R3=e=>e===Dd||e===Dt,$q=new Set(["x","y","z"]),qq=kd.filter(e=>!$q.has(e));function Hq(e){const t=[];return qq.forEach(s=>{const n=e.getValue(s);n!==void 0&&(t.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),t}const Mc={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>A2(t,"x"),y:(e,{transform:t})=>A2(t,"y")};Mc.translateX=Mc.x;Mc.translateY=Mc.y;const Rc=new Set;let E2=!1,T2=!1,O2=!1;function r_(){if(T2){const e=Array.from(Rc).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),s=new Map;t.forEach(n=>{const a=Hq(n);a.length&&(s.set(n,a),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const a=s.get(n);a&&a.forEach(([l,u])=>{n.getValue(l)?.set(u)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}T2=!1,E2=!1,Rc.forEach(e=>e.complete(O2)),Rc.clear()}function s_(){Rc.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(T2=!0)})}function Gq(){O2=!0,s_(),r_(),O2=!1}class Dw{constructor(t,s,n,a,l,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=n,this.motionValue=a,this.element=l,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Rc.add(this),E2||(E2=!0,ts.read(s_),ts.resolveKeyframes(r_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:n,motionValue:a}=this;if(t[0]===null){const l=a?.get(),u=t[t.length-1];if(l!==void 0)t[0]=l;else if(n&&s){const f=n.readValue(s,u);f!=null&&(t[0]=f)}t[0]===void 0&&(t[0]=u),a&&l===void 0&&a.set(t[0])}Bq(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Rc.delete(this)}cancel(){this.state==="scheduled"&&(Rc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Yq=e=>e.startsWith("--");function Xq(e,t,s){Yq(t)?e.style.setProperty(t,s):e.style[t]=s}const Wq=pw(()=>window.ScrollTimeline!==void 0),Kq={};function Zq(e,t){const s=pw(e);return()=>Kq[t]??s()}const n_=Zq(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Zh=([e,t,s,n])=>`cubic-bezier(${e}, ${t}, ${s}, ${n})`,L3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zh([0,.65,.55,1]),circOut:Zh([.55,0,1,.45]),backIn:Zh([.31,.01,.66,-.59]),backOut:Zh([.33,1.53,.69,.99])};function a_(e,t){if(e)return typeof e=="function"?n_()?Jk(e,t):"ease-out":$k(e)?Zh(e):Array.isArray(e)?e.map(s=>a_(s,t)||L3.easeOut):L3[e]}function Qq(e,t,s,{delay:n=0,duration:a=300,repeat:l=0,repeatType:u="loop",ease:f="easeOut",times:m}={},x=void 0){const p={[t]:s};m&&(p.offset=m);const v=a_(f,a);Array.isArray(v)&&(p.easing=v);const C={delay:n,duration:a,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:l+1,direction:u==="reverse"?"alternate":"normal"};return x&&(C.pseudoElement=x),e.animate(p,C)}function i_(e){return typeof e=="function"&&"applyToOptions"in e}function Jq({type:e,...t}){return i_(e)&&n_()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class eH extends Tw{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:s,name:n,keyframes:a,pseudoElement:l,allowFlatten:u=!1,finalKeyframe:f,onComplete:m}=t;this.isPseudoElement=!!l,this.allowFlatten=u,this.options=t,xw(typeof t.type!="string");const x=Jq(t);this.animation=Qq(s,n,a,x,l),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const p=Ew(a,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(p):Xq(s,n,p),this.animation.cancel()}m?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return La(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+La(t)}get time(){return La(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Li(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&Wq()?(this.animation.timeline=t,Ua):s(this)}}const l_={anticipate:Fk,backInOut:Bk,circInOut:zk};function tH(e){return e in l_}function rH(e){typeof e.ease=="string"&&tH(e.ease)&&(e.ease=l_[e.ease])}const B3=10;class sH extends eH{constructor(t){rH(t),t_(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:s,onUpdate:n,onComplete:a,element:l,...u}=this.options;if(!s)return;if(t!==void 0){s.set(t);return}const f=new Ow({...u,autoplay:!1}),m=Li(this.finishedTime??this.time);s.setWithVelocity(f.sample(m-B3).value,f.sample(m).value,B3),f.stop()}}const F3=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Bo.test(e)||e==="0")&&!e.startsWith("url("));function nH(e){const t=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}function aH(e,t,s,n){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const l=e[e.length-1],u=F3(a,t),f=F3(l,t);return!u||!f?!1:nH(e)||(s==="spring"||i_(s))&&n}function D2(e){e.duration=0,e.type="keyframes"}const iH=new Set(["opacity","clipPath","filter","transform"]),lH=pw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function oH(e){const{motionValue:t,name:s,repeatDelay:n,repeatType:a,damping:l,type:u}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:m,transformTemplate:x}=t.owner.getProps();return lH()&&s&&iH.has(s)&&(s!=="transform"||!x)&&!m&&!n&&a!=="mirror"&&l!==0&&u!=="inertia"}const cH=40;class uH extends Tw{constructor({autoplay:t=!0,delay:s=0,type:n="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:u="loop",keyframes:f,name:m,motionValue:x,element:p,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Vn.now();const C={autoplay:t,delay:s,type:n,repeat:a,repeatDelay:l,repeatType:u,name:m,motionValue:x,element:p,...v},T=p?.KeyframeResolver||Dw;this.keyframeResolver=new T(f,(E,k,O)=>this.onKeyframesResolved(E,k,C,!O),m,x,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,s,n,a){this.keyframeResolver=void 0;const{name:l,type:u,velocity:f,delay:m,isHandoff:x,onUpdate:p}=n;this.resolvedAt=Vn.now(),aH(t,l,u,f)||((Sl.instantAnimations||!m)&&p?.(Ew(t,n,s)),t[0]=t[t.length-1],D2(n),n.repeat=0);const C={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>cH?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...n,keyframes:t},T=!x&&oH(C)?new sH({...C,element:C.motionValue.owner.current}):new Ow(C);T.finished.then(()=>this.notifyFinished()).catch(Ua),this.pendingTimeline&&(this.stopTimeline=T.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=T}get finished(){return this._animation?this.animation.finished:this._finished}then(t,s){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Gq()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const dH=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hH(e){const t=dH.exec(e);if(!t)return[,];const[,s,n,a]=t;return[`--${s??n}`,a]}function o_(e,t,s=1){const[n,a]=hH(e);if(!n)return;const l=window.getComputedStyle(t).getPropertyValue(n);if(l){const u=l.trim();return Dk(u)?parseFloat(u):u}return ww(a)?o_(a,t,s+1):a}function kw(e,t){return e?.[t]??e?.default??e}const c_=new Set(["width","height","top","left","right","bottom",...kd]),fH={test:e=>e==="auto",parse:e=>e},u_=e=>t=>t.test(e),d_=[Dd,Dt,Bi,Eo,nq,sq,fH],U3=e=>d_.find(u_(e));function mH(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||_k(e):!0}const gH=new Set(["brightness","contrast","saturate","opacity"]);function xH(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=s.match(jw)||[];if(!n)return e;const a=s.replace(n,"");let l=gH.has(t)?1:0;return n!==s&&(l*=100),t+"("+l+a+")"}const pH=/\b([a-z-]*)\(.*?\)/gu,k2={...Bo,getAnimatableNone:e=>{const t=e.match(pH);return t?t.map(xH).join(" "):e}},z3={...Dd,transform:Math.round},yH={rotate:Eo,rotateX:Eo,rotateY:Eo,rotateZ:Eo,scale:Rm,scaleX:Rm,scaleY:Rm,scaleZ:Rm,skew:Eo,skewX:Eo,skewY:Eo,distance:Dt,translateX:Dt,translateY:Dt,translateZ:Dt,x:Dt,y:Dt,z:Dt,perspective:Dt,transformPerspective:Dt,opacity:ff,originX:T3,originY:T3,originZ:Dt},_w={borderWidth:Dt,borderTopWidth:Dt,borderRightWidth:Dt,borderBottomWidth:Dt,borderLeftWidth:Dt,borderRadius:Dt,radius:Dt,borderTopLeftRadius:Dt,borderTopRightRadius:Dt,borderBottomRightRadius:Dt,borderBottomLeftRadius:Dt,width:Dt,maxWidth:Dt,height:Dt,maxHeight:Dt,top:Dt,right:Dt,bottom:Dt,left:Dt,padding:Dt,paddingTop:Dt,paddingRight:Dt,paddingBottom:Dt,paddingLeft:Dt,margin:Dt,marginTop:Dt,marginRight:Dt,marginBottom:Dt,marginLeft:Dt,backgroundPositionX:Dt,backgroundPositionY:Dt,...yH,zIndex:z3,fillOpacity:ff,strokeOpacity:ff,numOctaves:z3},bH={..._w,color:Ps,backgroundColor:Ps,outlineColor:Ps,fill:Ps,stroke:Ps,borderColor:Ps,borderTopColor:Ps,borderRightColor:Ps,borderBottomColor:Ps,borderLeftColor:Ps,filter:k2,WebkitFilter:k2},h_=e=>bH[e];function f_(e,t){let s=h_(e);return s!==k2&&(s=Bo),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const vH=new Set(["auto","none","0"]);function NH(e,t,s){let n=0,a;for(;n<e.length&&!a;){const l=e[n];typeof l=="string"&&!vH.has(l)&&mf(l).values.length&&(a=e[n]),n++}if(a&&s)for(const l of t)e[l]=f_(s,a)}class wH extends Dw{constructor(t,s,n,a,l){super(t,s,n,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let m=0;m<t.length;m++){let x=t[m];if(typeof x=="string"&&(x=x.trim(),ww(x))){const p=o_(x,s.current);p!==void 0&&(t[m]=p),m===t.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!c_.has(n)||t.length!==2)return;const[a,l]=t,u=U3(a),f=U3(l);if(u!==f)if(R3(u)&&R3(f))for(let m=0;m<t.length;m++){const x=t[m];typeof x=="string"&&(t[m]=parseFloat(x))}else Mc[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,n=[];for(let a=0;a<t.length;a++)(t[a]===null||mH(t[a]))&&n.push(a);n.length&&NH(t,n,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Mc[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&t.getValue(n,a).jump(a,!1)}measureEndState(){const{element:t,name:s,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const a=t.getValue(s);a&&a.jump(this.measuredOrigin,!1);const l=n.length-1,u=n[l];n[l]=Mc[s](t.measureViewportBox(),window.getComputedStyle(t.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([f,m])=>{t.getValue(f).set(m)}),this.resolveNoneKeyframes()}}function jH(e,t,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const a=s?.[e]??n.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const m_=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function SH(e){return kk(e)&&"offsetHeight"in e}const V3=30,CH=e=>!isNaN(parseFloat(e));class AH{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const a=Vn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=Vn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=CH(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new yw);const n=this.events[t].add(s);return t==="change"?()=>{n(),ts.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Vn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>V3)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,V3);return Pk(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cd(e,t){return new AH(e,t)}const{schedule:Pw}=qk(queueMicrotask,!1),ni={x:!1,y:!1};function g_(){return ni.x||ni.y}function EH(e){return e==="x"||e==="y"?ni[e]?null:(ni[e]=!0,()=>{ni[e]=!1}):ni.x||ni.y?null:(ni.x=ni.y=!0,()=>{ni.x=ni.y=!1})}function x_(e,t){const s=jH(e),n=new AbortController,a={passive:!0,...t,signal:n.signal};return[s,a,()=>n.abort()]}function $3(e){return!(e.pointerType==="touch"||g_())}function TH(e,t,s={}){const[n,a,l]=x_(e,s),u=f=>{if(!$3(f))return;const{target:m}=f,x=t(m,f);if(typeof x!="function"||!m)return;const p=v=>{$3(v)&&(x(v),m.removeEventListener("pointerleave",p))};m.addEventListener("pointerleave",p,a)};return n.forEach(f=>{f.addEventListener("pointerenter",u,a)}),l}const p_=(e,t)=>t?e===t?!0:p_(e,t.parentElement):!1,Iw=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,OH=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function DH(e){return OH.has(e.tagName)||e.tabIndex!==-1}const Og=new WeakSet;function q3(e){return t=>{t.key==="Enter"&&e(t)}}function ob(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const kH=(e,t)=>{const s=e.currentTarget;if(!s)return;const n=q3(()=>{if(Og.has(s))return;ob(s,"down");const a=q3(()=>{ob(s,"up")}),l=()=>ob(s,"cancel");s.addEventListener("keyup",a,t),s.addEventListener("blur",l,t)});s.addEventListener("keydown",n,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),t)};function H3(e){return Iw(e)&&!g_()}function _H(e,t,s={}){const[n,a,l]=x_(e,s),u=f=>{const m=f.currentTarget;if(!H3(f))return;Og.add(m);const x=t(m,f),p=(T,E)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",C),Og.has(m)&&Og.delete(m),H3(T)&&typeof x=="function"&&x(T,{success:E})},v=T=>{p(T,m===window||m===document||s.useGlobalTarget||p_(m,T.target))},C=T=>{p(T,!1)};window.addEventListener("pointerup",v,a),window.addEventListener("pointercancel",C,a)};return n.forEach(f=>{(s.useGlobalTarget?window:f).addEventListener("pointerdown",u,a),SH(f)&&(f.addEventListener("focus",x=>kH(x,a)),!DH(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),l}function y_(e){return kk(e)&&"ownerSVGElement"in e}function PH(e){return y_(e)&&e.tagName==="svg"}const bn=e=>!!(e&&e.getVelocity),IH=[...d_,Ps,Bo],MH=e=>IH.find(u_(e)),b_=w.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function RH(e=!0){const t=w.useContext(fw);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:a}=t,l=w.useId();w.useEffect(()=>{if(e)return a(l)},[e]);const u=w.useCallback(()=>e&&n&&n(l),[l,n,e]);return!s&&n?[!1,u]:[!0]}const v_=w.createContext({strict:!1}),G3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ud={};for(const e in G3)ud[e]={isEnabled:t=>G3[e].some(s=>!!t[s])};function LH(e){for(const t in e)ud[t]={...ud[t],...e[t]}}const BH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zg(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||BH.has(e)}let N_=e=>!Zg(e);function FH(e){typeof e=="function"&&(N_=t=>t.startsWith("on")?!Zg(t):e(t))}try{FH(require("@emotion/is-prop-valid").default)}catch{}function UH(e,t,s){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(N_(a)||s===!0&&Zg(a)||!t&&!Zg(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}const lp=w.createContext({});function op(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function gf(e){return typeof e=="string"||Array.isArray(e)}const Mw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Rw=["initial",...Mw];function cp(e){return op(e.animate)||Rw.some(t=>gf(e[t]))}function w_(e){return!!(cp(e)||e.variants)}function zH(e,t){if(cp(e)){const{initial:s,animate:n}=e;return{initial:s===!1||gf(s)?s:void 0,animate:gf(n)?n:void 0}}return e.inherit!==!1?t:{}}function VH(e){const{initial:t,animate:s}=zH(e,w.useContext(lp));return w.useMemo(()=>({initial:t,animate:s}),[Y3(t),Y3(s)])}function Y3(e){return Array.isArray(e)?e.join(" "):e}const xf={};function $H(e){for(const t in e)xf[t]=e[t],Nw(t)&&(xf[t].isCSSVariable=!0)}function j_(e,{layout:t,layoutId:s}){return _d.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!xf[e]||e==="opacity")}const qH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},HH=kd.length;function GH(e,t,s){let n="",a=!0;for(let l=0;l<HH;l++){const u=kd[l],f=e[u];if(f===void 0)continue;let m=!0;if(typeof f=="number"?m=f===(u.startsWith("scale")?1:0):m=parseFloat(f)===0,!m||s){const x=m_(f,_w[u]);if(!m){a=!1;const p=qH[u]||u;n+=`${p}(${x}) `}s&&(t[u]=x)}}return n=n.trim(),s?n=s(t,a?"":n):a&&(n="none"),n}function Lw(e,t,s){const{style:n,vars:a,transformOrigin:l}=e;let u=!1,f=!1;for(const m in t){const x=t[m];if(_d.has(m)){u=!0;continue}else if(Nw(m)){a[m]=x;continue}else{const p=m_(x,_w[m]);m.startsWith("origin")?(f=!0,l[m]=p):n[m]=p}}if(t.transform||(u||s?n.transform=GH(t,e.transform,s):n.transform&&(n.transform="none")),f){const{originX:m="50%",originY:x="50%",originZ:p=0}=l;n.transformOrigin=`${m} ${x} ${p}`}}const Bw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function S_(e,t,s){for(const n in t)!bn(t[n])&&!j_(n,s)&&(e[n]=t[n])}function YH({transformTemplate:e},t){return w.useMemo(()=>{const s=Bw();return Lw(s,t,e),Object.assign({},s.vars,s.style)},[t])}function XH(e,t){const s=e.style||{},n={};return S_(n,s,e),Object.assign(n,YH(e,t)),n}function WH(e,t){const s={},n=XH(e,t);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=n,s}const KH={offset:"stroke-dashoffset",array:"stroke-dasharray"},ZH={offset:"strokeDashoffset",array:"strokeDasharray"};function QH(e,t,s=1,n=0,a=!0){e.pathLength=1;const l=a?KH:ZH;e[l.offset]=Dt.transform(-n);const u=Dt.transform(t),f=Dt.transform(s);e[l.array]=`${u} ${f}`}function C_(e,{attrX:t,attrY:s,attrScale:n,pathLength:a,pathSpacing:l=1,pathOffset:u=0,...f},m,x,p){if(Lw(e,f,x),m){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:v,style:C}=e;v.transform&&(C.transform=v.transform,delete v.transform),(C.transform||v.transformOrigin)&&(C.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),C.transform&&(C.transformBox=p?.transformBox??"fill-box",delete v.transformBox),t!==void 0&&(v.x=t),s!==void 0&&(v.y=s),n!==void 0&&(v.scale=n),a!==void 0&&QH(v,a,l,u,!1)}const A_=()=>({...Bw(),attrs:{}}),E_=e=>typeof e=="string"&&e.toLowerCase()==="svg";function JH(e,t,s,n){const a=w.useMemo(()=>{const l=A_();return C_(l,t,E_(n),e.transformTemplate,e.style),{...l.attrs,style:{...l.style}}},[t]);if(e.style){const l={};S_(l,e.style,e),a.style={...l,...a.style}}return a}const eG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Fw(e){return typeof e!="string"||e.includes("-")?!1:!!(eG.indexOf(e)>-1||/[A-Z]/u.test(e))}function tG(e,t,s,{latestValues:n},a,l=!1){const f=(Fw(e)?JH:WH)(t,n,a,e),m=UH(t,typeof e=="string",l),x=e!==w.Fragment?{...m,...f,ref:s}:{},{children:p}=t,v=w.useMemo(()=>bn(p)?p.get():p,[p]);return w.createElement(e,{...x,children:v})}function X3(e){const t=[{},{}];return e?.values.forEach((s,n)=>{t[0][n]=s.get(),t[1][n]=s.getVelocity()}),t}function Uw(e,t,s,n){if(typeof t=="function"){const[a,l]=X3(n);t=t(s!==void 0?s:e.custom,a,l)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,l]=X3(n);t=t(s!==void 0?s:e.custom,a,l)}return t}function Dg(e){return bn(e)?e.get():e}function rG({scrapeMotionValuesFromProps:e,createRenderState:t},s,n,a){return{latestValues:sG(s,n,a,e),renderState:t()}}function sG(e,t,s,n){const a={},l=n(e,{});for(const C in l)a[C]=Dg(l[C]);let{initial:u,animate:f}=e;const m=cp(e),x=w_(e);t&&x&&!m&&e.inherit!==!1&&(u===void 0&&(u=t.initial),f===void 0&&(f=t.animate));let p=s?s.initial===!1:!1;p=p||u===!1;const v=p?f:u;if(v&&typeof v!="boolean"&&!op(v)){const C=Array.isArray(v)?v:[v];for(let T=0;T<C.length;T++){const E=Uw(e,C[T]);if(E){const{transitionEnd:k,transition:O,...M}=E;for(const L in M){let P=M[L];if(Array.isArray(P)){const H=p?P.length-1:0;P=P[H]}P!==null&&(a[L]=P)}for(const L in k)a[L]=k[L]}}}return a}const T_=e=>(t,s)=>{const n=w.useContext(lp),a=w.useContext(fw),l=()=>rG(e,t,n,a);return s?l():L$(l)};function zw(e,t,s){const{style:n}=e,a={};for(const l in n)(bn(n[l])||t.style&&bn(t.style[l])||j_(l,e)||s?.getValue(l)?.liveStyle!==void 0)&&(a[l]=n[l]);return a}const nG=T_({scrapeMotionValuesFromProps:zw,createRenderState:Bw});function O_(e,t,s){const n=zw(e,t,s);for(const a in e)if(bn(e[a])||bn(t[a])){const l=kd.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[l]=e[a]}return n}const aG=T_({scrapeMotionValuesFromProps:O_,createRenderState:A_}),iG=Symbol.for("motionComponentSymbol");function Hu(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function lG(e,t,s){return w.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),s&&(typeof s=="function"?s(n):Hu(s)&&(s.current=n))},[t])}const Vw=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),oG="framerAppearId",D_="data-"+Vw(oG),k_=w.createContext({});function cG(e,t,s,n,a){const{visualElement:l}=w.useContext(lp),u=w.useContext(v_),f=w.useContext(fw),m=w.useContext(b_).reducedMotion,x=w.useRef(null);n=n||u.renderer,!x.current&&n&&(x.current=n(e,{visualState:t,parent:l,props:s,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:m}));const p=x.current,v=w.useContext(k_);p&&!p.projection&&a&&(p.type==="html"||p.type==="svg")&&uG(x.current,s,a,v);const C=w.useRef(!1);w.useInsertionEffect(()=>{p&&C.current&&p.update(s,f)});const T=s[D_],E=w.useRef(!!T&&!window.MotionHandoffIsComplete?.(T)&&window.MotionHasOptimisedAnimation?.(T));return B$(()=>{p&&(C.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),E.current&&p.animationState&&p.animationState.animateChanges())}),w.useEffect(()=>{p&&(!E.current&&p.animationState&&p.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(T)}),E.current=!1),p.enteringChildren=void 0)}),p}function uG(e,t,s,n){const{layoutId:a,layout:l,drag:u,dragConstraints:f,layoutScroll:m,layoutRoot:x,layoutCrossfade:p}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:__(e.parent)),e.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!u||f&&Hu(f),visualElement:e,animationType:typeof l=="string"?l:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:m,layoutRoot:x})}function __(e){if(e)return e.options.allowProjection!==!1?e.projection:__(e.parent)}function cb(e,{forwardMotionProps:t=!1}={},s,n){s&&LH(s);const a=Fw(e)?aG:nG;function l(f,m){let x;const p={...w.useContext(b_),...f,layoutId:dG(f)},{isStatic:v}=p,C=VH(f),T=a(f,v);if(!v&&hw){hG();const E=fG(p);x=E.MeasureLayout,C.visualElement=cG(e,T,p,n,E.ProjectionNode)}return r.jsxs(lp.Provider,{value:C,children:[x&&C.visualElement?r.jsx(x,{visualElement:C.visualElement,...p}):null,tG(e,f,lG(T,C.visualElement,m),T,v,t)]})}l.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const u=w.forwardRef(l);return u[iG]=e,u}function dG({layoutId:e}){const t=w.useContext(Ok).id;return t&&e!==void 0?t+"-"+e:e}function hG(e,t){w.useContext(v_).strict}function fG(e){const{drag:t,layout:s}=ud;if(!t&&!s)return{};const n={...t,...s};return{MeasureLayout:t?.isEnabled(e)||s?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function mG(e,t){if(typeof Proxy>"u")return cb;const s=new Map,n=(l,u)=>cb(l,u,e,t),a=(l,u)=>n(l,u);return new Proxy(a,{get:(l,u)=>u==="create"?n:(s.has(u)||s.set(u,cb(u,void 0,e,t)),s.get(u))})}function P_({top:e,left:t,right:s,bottom:n}){return{x:{min:t,max:s},y:{min:e,max:n}}}function gG({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function xG(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function ub(e){return e===void 0||e===1}function _2({scale:e,scaleX:t,scaleY:s}){return!ub(e)||!ub(t)||!ub(s)}function jc(e){return _2(e)||I_(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function I_(e){return W3(e.x)||W3(e.y)}function W3(e){return e&&e!=="0%"}function Qg(e,t,s){const n=e-s,a=t*n;return s+a}function K3(e,t,s,n,a){return a!==void 0&&(e=Qg(e,a,n)),Qg(e,s,n)+t}function P2(e,t=0,s=1,n,a){e.min=K3(e.min,t,s,n,a),e.max=K3(e.max,t,s,n,a)}function M_(e,{x:t,y:s}){P2(e.x,t.translate,t.scale,t.originPoint),P2(e.y,s.translate,s.scale,s.originPoint)}const Z3=.999999999999,Q3=1.0000000000001;function pG(e,t,s,n=!1){const a=s.length;if(!a)return;t.x=t.y=1;let l,u;for(let f=0;f<a;f++){l=s[f],u=l.projectionDelta;const{visualElement:m}=l.options;m&&m.props.style&&m.props.style.display==="contents"||(n&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Yu(e,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),u&&(t.x*=u.x.scale,t.y*=u.y.scale,M_(e,u)),n&&jc(l.latestValues)&&Yu(e,l.latestValues))}t.x<Q3&&t.x>Z3&&(t.x=1),t.y<Q3&&t.y>Z3&&(t.y=1)}function Gu(e,t){e.min=e.min+t,e.max=e.max+t}function J3(e,t,s,n,a=.5){const l=is(e.min,e.max,a);P2(e,t,s,l,n)}function Yu(e,t){J3(e.x,t.x,t.scaleX,t.scale,t.originX),J3(e.y,t.y,t.scaleY,t.scale,t.originY)}function R_(e,t){return P_(xG(e.getBoundingClientRect(),t))}function yG(e,t,s){const n=R_(e,s),{scroll:a}=t;return a&&(Gu(n.x,a.offset.x),Gu(n.y,a.offset.y)),n}const eE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xu=()=>({x:eE(),y:eE()}),tE=()=>({min:0,max:0}),Vs=()=>({x:tE(),y:tE()}),I2={current:null},L_={current:!1};function bG(){if(L_.current=!0,!!hw)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>I2.current=e.matches;e.addEventListener("change",t),t()}else I2.current=!1}const vG=new WeakMap;function NG(e,t,s){for(const n in t){const a=t[n],l=s[n];if(bn(a))e.addValue(n,a);else if(bn(l))e.addValue(n,cd(a,{owner:e}));else if(l!==a)if(e.hasValue(n)){const u=e.getValue(n);u.liveStyle===!0?u.jump(a):u.hasAnimated||u.set(a)}else{const u=e.getStaticValue(n);e.addValue(n,cd(u!==void 0?u:a,{owner:e}))}}for(const n in s)t[n]===void 0&&e.removeValue(n);return t}const rE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class wG{scrapeMotionValuesFromProps(t,s,n){return{}}constructor({parent:t,props:s,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:l,visualState:u},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Dw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const C=Vn.now();this.renderScheduledAt<C&&(this.renderScheduledAt=C,ts.render(this.render,!1,!0))};const{latestValues:m,renderState:x}=u;this.latestValues=m,this.baseTarget={...m},this.initialValues=s.initial?{...m}:{},this.renderState=x,this.parent=t,this.props=s,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=f,this.blockInitialAnimation=!!l,this.isControllingVariants=cp(s),this.isVariantNode=w_(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...v}=this.scrapeMotionValuesFromProps(s,{},this);for(const C in v){const T=v[C];m[C]!==void 0&&bn(T)&&T.set(m[C])}}mount(t){this.current=t,vG.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),L_.current||bG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:I2.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Lo(this.notifyUpdate),Lo(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const s=this.features[t];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=_d.has(t);n&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",u=>{this.latestValues[t]=u,this.props.onUpdate&&ts.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{a(),l&&l(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ud){const s=ud[t];if(!s)continue;const{isEnabled:n,Feature:a}=s;if(!this.features[t]&&a&&n(this.props)&&(this.features[t]=new a(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Vs()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<rE.length;n++){const a=rE[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,u=t[l];u&&(this.propEventSubscriptions[a]=this.on(a,u))}this.prevMotionValues=NG(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const n=this.values.get(t);s!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&s!==void 0&&(n=cd(s===null?void 0:s,{owner:this}),this.addValue(t,n)),n}readValue(t,s){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(Dk(n)||_k(n))?n=parseFloat(n):!MH(n)&&Bo.test(s)&&(n=f_(t,s)),this.setBaseTarget(t,bn(n)?n.get():n)),bn(n)?n.get():n}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){const{initial:s}=this.props;let n;if(typeof s=="string"||typeof s=="object"){const l=Uw(this.props,s,this.presenceContext?.custom);l&&(n=l[t])}if(s&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!bn(a)?a:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new yw),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}scheduleRenderMicrotask(){Pw.render(this.render)}}class B_ extends wG{constructor(){super(...arguments),this.KeyframeResolver=wH}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:n}){delete s[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;bn(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function F_(e,{style:t,vars:s},n,a){const l=e.style;let u;for(u in t)l[u]=t[u];a?.applyProjectionStyles(l,n);for(u in s)l.setProperty(u,s[u])}function jG(e){return window.getComputedStyle(e)}class SG extends B_{constructor(){super(...arguments),this.type="html",this.renderInstance=F_}readValueFromInstance(t,s){if(_d.has(s))return this.projection?.isProjecting?C2(s):zq(t,s);{const n=jG(t),a=(Nw(s)?n.getPropertyValue(s):n[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:s}){return R_(t,s)}build(t,s,n){Lw(t,s,n.transformTemplate)}scrapeMotionValuesFromProps(t,s,n){return zw(t,s,n)}}const U_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function CG(e,t,s,n){F_(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(U_.has(a)?a:Vw(a),t.attrs[a])}class AG extends B_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Vs}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(_d.has(s)){const n=h_(s);return n&&n.default||0}return s=U_.has(s)?s:Vw(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,n){return O_(t,s,n)}build(t,s,n){C_(t,s,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,s,n,a){CG(t,s,n,a)}mount(t){this.isSVGTag=E_(t.tagName),super.mount(t)}}const EG=(e,t)=>Fw(e)?new AG(t):new SG(t,{allowProjection:e!==w.Fragment});function Ju(e,t,s){const n=e.getProps();return Uw(n,t,s!==void 0?s:n.custom,e)}const M2=e=>Array.isArray(e);function TG(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,cd(s))}function OG(e){return M2(e)?e[e.length-1]||0:e}function DG(e,t){const s=Ju(e,t);let{transitionEnd:n={},transition:a={},...l}=s||{};l={...l,...n};for(const u in l){const f=OG(l[u]);TG(e,u,f)}}function kG(e){return!!(bn(e)&&e.add)}function R2(e,t){const s=e.getValue("willChange");if(kG(s))return s.add(t);if(!s&&Sl.WillChange){const n=new Sl.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function z_(e){return e.props[D_]}const _G=e=>e!==null;function PG(e,{repeat:t,repeatType:s="loop"},n){const a=e.filter(_G),l=t&&s!=="loop"&&t%2===1?0:a.length-1;return a[l]}const IG={type:"spring",stiffness:500,damping:25,restSpeed:10},MG=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),RG={type:"keyframes",duration:.8},LG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},BG=(e,{keyframes:t})=>t.length>2?RG:_d.has(e)?e.startsWith("scale")?MG(t[1]):IG:LG;function FG({when:e,delay:t,delayChildren:s,staggerChildren:n,staggerDirection:a,repeat:l,repeatType:u,repeatDelay:f,from:m,elapsed:x,...p}){return!!Object.keys(p).length}const $w=(e,t,s,n={},a,l)=>u=>{const f=kw(n,e)||{},m=f.delay||n.delay||0;let{elapsed:x=0}=n;x=x-Li(m);const p={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...f,delay:-x,onUpdate:C=>{t.set(C),f.onUpdate&&f.onUpdate(C)},onComplete:()=>{u(),f.onComplete&&f.onComplete()},name:e,motionValue:t,element:l?void 0:a};FG(f)||Object.assign(p,BG(e,p)),p.duration&&(p.duration=Li(p.duration)),p.repeatDelay&&(p.repeatDelay=Li(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(D2(p),p.delay===0&&(v=!0)),(Sl.instantAnimations||Sl.skipAnimations)&&(v=!0,D2(p),p.delay=0),p.allowFlatten=!f.type&&!f.ease,v&&!l&&t.get()!==void 0){const C=PG(p.keyframes,f);if(C!==void 0){ts.update(()=>{p.onUpdate(C),p.onComplete()});return}}return f.isSync?new Ow(p):new uH(p)};function UG({protectedKeys:e,needsAnimating:t},s){const n=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,n}function V_(e,t,{delay:s=0,transitionOverride:n,type:a}={}){let{transition:l=e.getDefaultTransition(),transitionEnd:u,...f}=t;n&&(l=n);const m=[],x=a&&e.animationState&&e.animationState.getState()[a];for(const p in f){const v=e.getValue(p,e.latestValues[p]??null),C=f[p];if(C===void 0||x&&UG(x,p))continue;const T={delay:s,...kw(l||{},p)},E=v.get();if(E!==void 0&&!v.isAnimating&&!Array.isArray(C)&&C===E&&!T.velocity)continue;let k=!1;if(window.MotionHandoffAnimation){const M=z_(e);if(M){const L=window.MotionHandoffAnimation(M,p,ts);L!==null&&(T.startTime=L,k=!0)}}R2(e,p),v.start($w(p,v,C,e.shouldReduceMotion&&c_.has(p)?{type:!1}:T,e,k));const O=v.animation;O&&m.push(O)}return u&&Promise.all(m).then(()=>{ts.update(()=>{u&&DG(e,u)})}),m}function $_(e,t,s,n=0,a=1){const l=Array.from(e).sort((x,p)=>x.sortNodePosition(p)).indexOf(t),u=e.size,f=(u-1)*n;return typeof s=="function"?s(l,u):a===1?l*n:f-l*n}function L2(e,t,s={}){const n=Ju(e,t,s.type==="exit"?e.presenceContext?.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(a=s.transitionOverride);const l=n?()=>Promise.all(V_(e,n,s)):()=>Promise.resolve(),u=e.variantChildren&&e.variantChildren.size?(m=0)=>{const{delayChildren:x=0,staggerChildren:p,staggerDirection:v}=a;return zG(e,t,m,x,p,v,s)}:()=>Promise.resolve(),{when:f}=a;if(f){const[m,x]=f==="beforeChildren"?[l,u]:[u,l];return m().then(()=>x())}else return Promise.all([l(),u(s.delay)])}function zG(e,t,s=0,n=0,a=0,l=1,u){const f=[];for(const m of e.variantChildren)m.notify("AnimationStart",t),f.push(L2(m,t,{...u,delay:s+(typeof n=="function"?0:n)+$_(e.variantChildren,m,n,a,l)}).then(()=>m.notify("AnimationComplete",t)));return Promise.all(f)}function VG(e,t,s={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(l=>L2(e,l,s));n=Promise.all(a)}else if(typeof t=="string")n=L2(e,t,s);else{const a=typeof t=="function"?Ju(e,t,s.custom):t;n=Promise.all(V_(e,a,s))}return n.then(()=>{e.notify("AnimationComplete",t)})}function q_(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let n=0;n<s;n++)if(t[n]!==e[n])return!1;return!0}const $G=Rw.length;function H_(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?H_(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<$G;s++){const n=Rw[s],a=e.props[n];(gf(a)||a===!1)&&(t[n]=a)}return t}const qG=[...Mw].reverse(),HG=Mw.length;function GG(e){return t=>Promise.all(t.map(({animation:s,options:n})=>VG(e,s,n)))}function YG(e){let t=GG(e),s=sE(),n=!0;const a=m=>(x,p)=>{const v=Ju(e,p,m==="exit"?e.presenceContext?.custom:void 0);if(v){const{transition:C,transitionEnd:T,...E}=v;x={...x,...E,...T}}return x};function l(m){t=m(e)}function u(m){const{props:x}=e,p=H_(e.parent)||{},v=[],C=new Set;let T={},E=1/0;for(let O=0;O<HG;O++){const M=qG[O],L=s[M],P=x[M]!==void 0?x[M]:p[M],H=gf(P),B=M===m?L.isActive:null;B===!1&&(E=O);let F=P===p[M]&&P!==x[M]&&H;if(F&&n&&e.manuallyAnimateOnMount&&(F=!1),L.protectedKeys={...T},!L.isActive&&B===null||!P&&!L.prevProp||op(P)||typeof P=="boolean")continue;const R=XG(L.prevProp,P);let z=R||M===m&&L.isActive&&!F&&H||O>E&&H,U=!1;const Y=Array.isArray(P)?P:[P];let $=Y.reduce(a(M),{});B===!1&&($={});const{prevResolvedValues:G={}}=L,ee={...G,...$},ce=ne=>{z=!0,C.has(ne)&&(U=!0,C.delete(ne)),L.needsAnimating[ne]=!0;const pe=e.getValue(ne);pe&&(pe.liveStyle=!1)};for(const ne in ee){const pe=$[ne],be=G[ne];if(T.hasOwnProperty(ne))continue;let te=!1;M2(pe)&&M2(be)?te=!q_(pe,be):te=pe!==be,te?pe!=null?ce(ne):C.add(ne):pe!==void 0&&C.has(ne)?ce(ne):L.protectedKeys[ne]=!0}L.prevProp=P,L.prevResolvedValues=$,L.isActive&&(T={...T,...$}),n&&e.blockInitialAnimation&&(z=!1);const se=F&&R;z&&(!se||U)&&v.push(...Y.map(ne=>{const pe={type:M};if(typeof ne=="string"&&n&&!se&&e.manuallyAnimateOnMount&&e.parent){const{parent:be}=e,te=Ju(be,ne);if(be.enteringChildren&&te){const{delayChildren:X}=te.transition||{};pe.delay=$_(be.enteringChildren,e,X)}}return{animation:ne,options:pe}}))}if(C.size){const O={};if(typeof x.initial!="boolean"){const M=Ju(e,Array.isArray(x.initial)?x.initial[0]:x.initial);M&&M.transition&&(O.transition=M.transition)}C.forEach(M=>{const L=e.getBaseTarget(M),P=e.getValue(M);P&&(P.liveStyle=!0),O[M]=L??null}),v.push({animation:O})}let k=!!v.length;return n&&(x.initial===!1||x.initial===x.animate)&&!e.manuallyAnimateOnMount&&(k=!1),n=!1,k?t(v):Promise.resolve()}function f(m,x){if(s[m].isActive===x)return Promise.resolve();e.variantChildren?.forEach(v=>v.animationState?.setActive(m,x)),s[m].isActive=x;const p=u(m);for(const v in s)s[v].protectedKeys={};return p}return{animateChanges:u,setActive:f,setAnimateFunction:l,getState:()=>s,reset:()=>{s=sE()}}}function XG(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!q_(t,e):!1}function yc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sE(){return{animate:yc(!0),whileInView:yc(),whileHover:yc(),whileTap:yc(),whileDrag:yc(),whileFocus:yc(),exit:yc()}}class $o{constructor(t){this.isMounted=!1,this.node=t}update(){}}class WG extends $o{constructor(t){super(t),t.animationState||(t.animationState=YG(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();op(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let KG=0;class ZG extends $o{constructor(){super(...arguments),this.id=KG++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const a=this.node.animationState.setActive("exit",!t);s&&!t&&a.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const QG={animation:{Feature:WG},exit:{Feature:ZG}};function pf(e,t,s,n={passive:!0}){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s)}function Hf(e){return{point:{x:e.pageX,y:e.pageY}}}const JG=e=>t=>Iw(t)&&e(t,Hf(t));function af(e,t,s,n){return pf(e,t,JG(s),n)}const G_=1e-4,eY=1-G_,tY=1+G_,Y_=.01,rY=0-Y_,sY=0+Y_;function An(e){return e.max-e.min}function nY(e,t,s){return Math.abs(e-t)<=s}function nE(e,t,s,n=.5){e.origin=n,e.originPoint=is(t.min,t.max,e.origin),e.scale=An(s)/An(t),e.translate=is(s.min,s.max,e.origin)-e.originPoint,(e.scale>=eY&&e.scale<=tY||isNaN(e.scale))&&(e.scale=1),(e.translate>=rY&&e.translate<=sY||isNaN(e.translate))&&(e.translate=0)}function lf(e,t,s,n){nE(e.x,t.x,s.x,n?n.originX:void 0),nE(e.y,t.y,s.y,n?n.originY:void 0)}function aE(e,t,s){e.min=s.min+t.min,e.max=e.min+An(t)}function aY(e,t,s){aE(e.x,t.x,s.x),aE(e.y,t.y,s.y)}function iE(e,t,s){e.min=t.min-s.min,e.max=e.min+An(t)}function Jg(e,t,s){iE(e.x,t.x,s.x),iE(e.y,t.y,s.y)}function Ia(e){return[e("x"),e("y")]}const X_=({current:e})=>e?e.ownerDocument.defaultView:null,lE=(e,t)=>Math.abs(e-t);function iY(e,t){const s=lE(e.x,t.x),n=lE(e.y,t.y);return Math.sqrt(s**2+n**2)}class W_{constructor(t,s,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:l=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=hb(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,E=iY(C.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!E)return;const{point:k}=C,{timestamp:O}=fn;this.history.push({...k,timestamp:O});const{onStart:M,onMove:L}=this.handlers;T||(M&&M(this.lastMoveEvent,C),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,C)},this.handlePointerMove=(C,T)=>{this.lastMoveEvent=C,this.lastMoveEventInfo=db(T,this.transformPagePoint),ts.update(this.updatePoint,!0)},this.handlePointerUp=(C,T)=>{this.end();const{onEnd:E,onSessionEnd:k,resumeAnimation:O}=this.handlers;if(this.dragSnapToOrigin&&O&&O(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=hb(C.type==="pointercancel"?this.lastMoveEventInfo:db(T,this.transformPagePoint),this.history);this.startEvent&&E&&E(C,M),k&&k(C,M)},!Iw(t))return;this.dragSnapToOrigin=l,this.handlers=s,this.transformPagePoint=n,this.distanceThreshold=u,this.contextWindow=a||window;const f=Hf(t),m=db(f,this.transformPagePoint),{point:x}=m,{timestamp:p}=fn;this.history=[{...x,timestamp:p}];const{onSessionStart:v}=s;v&&v(t,hb(m,this.history)),this.removeListeners=Vf(af(this.contextWindow,"pointermove",this.handlePointerMove),af(this.contextWindow,"pointerup",this.handlePointerUp),af(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Lo(this.updatePoint)}}function db(e,t){return t?{point:t(e.point)}:e}function oE(e,t){return{x:e.x-t.x,y:e.y-t.y}}function hb({point:e},t){return{point:e,delta:oE(e,K_(t)),offset:oE(e,lY(t)),velocity:oY(t,.1)}}function lY(e){return e[0]}function K_(e){return e[e.length-1]}function oY(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,n=null;const a=K_(e);for(;s>=0&&(n=e[s],!(a.timestamp-n.timestamp>Li(t)));)s--;if(!n)return{x:0,y:0};const l=La(a.timestamp-n.timestamp);if(l===0)return{x:0,y:0};const u={x:(a.x-n.x)/l,y:(a.y-n.y)/l};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function cY(e,{min:t,max:s},n){return t!==void 0&&e<t?e=n?is(t,e,n.min):Math.max(e,t):s!==void 0&&e>s&&(e=n?is(s,e,n.max):Math.min(e,s)),e}function cE(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function uY(e,{top:t,left:s,bottom:n,right:a}){return{x:cE(e.x,s,a),y:cE(e.y,t,n)}}function uE(e,t){let s=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,n]=[n,s]),{min:s,max:n}}function dY(e,t){return{x:uE(e.x,t.x),y:uE(e.y,t.y)}}function hY(e,t){let s=.5;const n=An(e),a=An(t);return a>n?s=hf(t.min,t.max-n,e.min):n>a&&(s=hf(e.min,e.max-a,t.min)),jl(0,1,s)}function fY(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const B2=.35;function mY(e=B2){return e===!1?e=0:e===!0&&(e=B2),{x:dE(e,"left","right"),y:dE(e,"top","bottom")}}function dE(e,t,s){return{min:hE(e,t),max:hE(e,s)}}function hE(e,t){return typeof e=="number"?e:e[t]||0}const gY=new WeakMap;class xY{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Vs(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:s=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const l=v=>{const{dragSnapToOrigin:C}=this.getProps();C?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Hf(v).point)},u=(v,C)=>{const{drag:T,dragPropagation:E,onDragStart:k}=this.getProps();if(T&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=EH(T),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=C,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ia(M=>{let L=this.getAxisMotionValue(M).get()||0;if(Bi.test(L)){const{projection:P}=this.visualElement;if(P&&P.layout){const H=P.layout.layoutBox[M];H&&(L=An(H)*(parseFloat(L)/100))}}this.originPoint[M]=L}),k&&ts.postRender(()=>k(v,C)),R2(this.visualElement,"transform");const{animationState:O}=this.visualElement;O&&O.setActive("whileDrag",!0)},f=(v,C)=>{this.latestPointerEvent=v,this.latestPanInfo=C;const{dragPropagation:T,dragDirectionLock:E,onDirectionLock:k,onDrag:O}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:M}=C;if(E&&this.currentDirection===null){this.currentDirection=pY(M),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",C.point,M),this.updateAxis("y",C.point,M),this.visualElement.render(),O&&O(v,C)},m=(v,C)=>{this.latestPointerEvent=v,this.latestPanInfo=C,this.stop(v,C),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>Ia(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new W_(t,{onSessionStart:l,onStart:u,onMove:f,onSessionEnd:m,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:X_(this.visualElement)})}stop(t,s){const n=t||this.latestPointerEvent,a=s||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!a||!n)return;const{velocity:u}=a;this.startAnimation(u);const{onDragEnd:f}=this.getProps();f&&ts.postRender(()=>f(n,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,n){const{drag:a}=this.getProps();if(!n||!Lm(t,a,this.currentDirection))return;const l=this.getAxisMotionValue(t);let u=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(u=cY(u,this.constraints[t],this.elastic[t])),l.set(u)}resolveConstraints(){const{dragConstraints:t,dragElastic:s}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;t&&Hu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=uY(n.layoutBox,t):this.constraints=!1,this.elastic=mY(s),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ia(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=fY(n.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Hu(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=yG(n,a.root,this.visualElement.getTransformPagePoint());let u=dY(a.layout.layoutBox,l);if(s){const f=s(gG(u));this.hasMutatedConstraints=!!f,f&&(u=P_(f))}return u}startAnimation(t){const{drag:s,dragMomentum:n,dragElastic:a,dragTransition:l,dragSnapToOrigin:u,onDragTransitionEnd:f}=this.getProps(),m=this.constraints||{},x=Ia(p=>{if(!Lm(p,s,this.currentDirection))return;let v=m&&m[p]||{};u&&(v={min:0,max:0});const C=a?200:1e6,T=a?40:1e7,E={type:"inertia",velocity:n?t[p]:0,bounceStiffness:C,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...l,...v};return this.startAxisValueAnimation(p,E)});return Promise.all(x).then(f)}startAxisValueAnimation(t,s){const n=this.getAxisMotionValue(t);return R2(this.visualElement,t),n.start($w(t,n,0,s,this.visualElement,!1))}stopAnimation(){Ia(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ia(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),a=n[s];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Ia(s=>{const{drag:n}=this.getProps();if(!Lm(s,n,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(s);if(a&&a.layout){const{min:u,max:f}=a.layout.layoutBox[s];l.set(t[s]-is(u,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Hu(s)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Ia(u=>{const f=this.getAxisMotionValue(u);if(f&&this.constraints!==!1){const m=f.get();a[u]=hY({min:m,max:m},this.constraints[u])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ia(u=>{if(!Lm(u,t,null))return;const f=this.getAxisMotionValue(u),{min:m,max:x}=this.constraints[u];f.set(is(m,x,a[u]))})}addListeners(){if(!this.visualElement.current)return;gY.set(this.visualElement,this);const t=this.visualElement.current,s=af(t,"pointerdown",m=>{const{drag:x,dragListener:p=!0}=this.getProps();x&&p&&this.start(m)}),n=()=>{const{dragConstraints:m}=this.getProps();Hu(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ts.read(n);const u=pf(window,"resize",()=>this.scalePositionWithinConstraints()),f=a.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:x})=>{this.isDragging&&x&&(Ia(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=m[p].translate,v.set(v.get()+m[p].translate))}),this.visualElement.render())}));return()=>{u(),s(),l(),f&&f()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:u=B2,dragMomentum:f=!0}=t;return{...t,drag:s,dragDirectionLock:n,dragPropagation:a,dragConstraints:l,dragElastic:u,dragMomentum:f}}}function Lm(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function pY(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class yY extends $o{constructor(t){super(t),this.removeGroupControls=Ua,this.removeListeners=Ua,this.controls=new xY(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ua}unmount(){this.removeGroupControls(),this.removeListeners()}}const fE=e=>(t,s)=>{e&&ts.postRender(()=>e(t,s))};class bY extends $o{constructor(){super(...arguments),this.removePointerDownListener=Ua}onPointerDown(t){this.session=new W_(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:X_(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:fE(t),onStart:fE(s),onMove:n,onEnd:(l,u)=>{delete this.session,a&&ts.postRender(()=>a(l,u))}}}mount(){this.removePointerDownListener=af(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const kg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mE(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ph={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Dt.test(e))e=parseFloat(e);else return e;const s=mE(e,t.target.x),n=mE(e,t.target.y);return`${s}% ${n}%`}},vY={correct:(e,{treeScale:t,projectionDelta:s})=>{const n=e,a=Bo.parse(e);if(a.length>5)return n;const l=Bo.createTransformer(e),u=typeof a[0]!="number"?1:0,f=s.x.scale*t.x,m=s.y.scale*t.y;a[0+u]/=f,a[1+u]/=m;const x=is(f,m,.5);return typeof a[2+u]=="number"&&(a[2+u]/=x),typeof a[3+u]=="number"&&(a[3+u]/=x),l(a)}};let fb=!1;class NY extends w.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n,layoutId:a}=this.props,{projection:l}=t;$H(wY),l&&(s.group&&s.group.add(l),n&&n.register&&a&&n.register(l),fb&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),kg.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:n,drag:a,isPresent:l}=this.props,{projection:u}=n;return u&&(u.isPresent=l,fb=!0,a||t.layoutDependency!==s||s===void 0||t.isPresent!==l?u.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?u.promote():u.relegate()||ts.postRender(()=>{const f=u.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Pw.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:a}=t;fb=!0,a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Z_(e){const[t,s]=RH(),n=w.useContext(Ok);return r.jsx(NY,{...e,layoutGroup:n,switchLayoutGroup:w.useContext(k_),isPresent:t,safeToRemove:s})}const wY={borderRadius:{...Ph,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ph,borderTopRightRadius:Ph,borderBottomLeftRadius:Ph,borderBottomRightRadius:Ph,boxShadow:vY};function jY(e,t,s){const n=bn(e)?e:cd(e);return n.start($w("",n,t,s)),n.animation}const SY=(e,t)=>e.depth-t.depth;class CY{constructor(){this.children=[],this.isDirty=!1}add(t){mw(this.children,t),this.isDirty=!0}remove(t){gw(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(SY),this.isDirty=!1,this.children.forEach(t)}}function AY(e,t){const s=Vn.now(),n=({timestamp:a})=>{const l=a-s;l>=t&&(Lo(n),e(l-t))};return ts.setup(n,!0),()=>Lo(n)}const Q_=["TopLeft","TopRight","BottomLeft","BottomRight"],EY=Q_.length,gE=e=>typeof e=="string"?parseFloat(e):e,xE=e=>typeof e=="number"||Dt.test(e);function TY(e,t,s,n,a,l){a?(e.opacity=is(0,s.opacity??1,OY(n)),e.opacityExit=is(t.opacity??1,0,DY(n))):l&&(e.opacity=is(t.opacity??1,s.opacity??1,n));for(let u=0;u<EY;u++){const f=`border${Q_[u]}Radius`;let m=pE(t,f),x=pE(s,f);if(m===void 0&&x===void 0)continue;m||(m=0),x||(x=0),m===0||x===0||xE(m)===xE(x)?(e[f]=Math.max(is(gE(m),gE(x),n),0),(Bi.test(x)||Bi.test(m))&&(e[f]+="%")):e[f]=x}(t.rotate||s.rotate)&&(e.rotate=is(t.rotate||0,s.rotate||0,n))}function pE(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const OY=J_(0,.5,Uk),DY=J_(.5,.95,Ua);function J_(e,t,s){return n=>n<e?0:n>t?1:s(hf(e,t,n))}function yE(e,t){e.min=t.min,e.max=t.max}function ri(e,t){yE(e.x,t.x),yE(e.y,t.y)}function bE(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function vE(e,t,s,n,a){return e-=t,e=Qg(e,1/s,n),a!==void 0&&(e=Qg(e,1/a,n)),e}function kY(e,t=0,s=1,n=.5,a,l=e,u=e){if(Bi.test(t)&&(t=parseFloat(t),t=is(u.min,u.max,t/100)-u.min),typeof t!="number")return;let f=is(l.min,l.max,n);e===l&&(f-=t),e.min=vE(e.min,t,s,f,a),e.max=vE(e.max,t,s,f,a)}function NE(e,t,[s,n,a],l,u){kY(e,t[s],t[n],t[a],t.scale,l,u)}const _Y=["x","scaleX","originX"],PY=["y","scaleY","originY"];function wE(e,t,s,n){NE(e.x,t,_Y,s?s.x:void 0,n?n.x:void 0),NE(e.y,t,PY,s?s.y:void 0,n?n.y:void 0)}function jE(e){return e.translate===0&&e.scale===1}function eP(e){return jE(e.x)&&jE(e.y)}function SE(e,t){return e.min===t.min&&e.max===t.max}function IY(e,t){return SE(e.x,t.x)&&SE(e.y,t.y)}function CE(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function tP(e,t){return CE(e.x,t.x)&&CE(e.y,t.y)}function AE(e){return An(e.x)/An(e.y)}function EE(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class MY{constructor(){this.members=[]}add(t){mw(this.members,t),t.scheduleRender()}remove(t){if(gw(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(a=>t===a);if(s===0)return!1;let n;for(let a=s;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){n=l;break}}return n?(this.promote(n),!0):!1}promote(t,s){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,s&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:n}=t;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function RY(e,t,s){let n="";const a=e.x.translate/t.x,l=e.y.translate/t.y,u=s?.z||0;if((a||l||u)&&(n=`translate3d(${a}px, ${l}px, ${u}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:x,rotate:p,rotateX:v,rotateY:C,skewX:T,skewY:E}=s;x&&(n=`perspective(${x}px) ${n}`),p&&(n+=`rotate(${p}deg) `),v&&(n+=`rotateX(${v}deg) `),C&&(n+=`rotateY(${C}deg) `),T&&(n+=`skewX(${T}deg) `),E&&(n+=`skewY(${E}deg) `)}const f=e.x.scale*t.x,m=e.y.scale*t.y;return(f!==1||m!==1)&&(n+=`scale(${f}, ${m})`),n||"none"}const mb=["","X","Y","Z"],LY=1e3;let BY=0;function gb(e,t,s,n){const{latestValues:a}=t;a[e]&&(s[e]=a[e],t.setStaticValue(e,0),n&&(n[e]=0))}function rP(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=z_(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:l}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",ts,!(a||l))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&rP(n)}function sP({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(u={},f=t?.()){this.id=BY++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(zY),this.nodes.forEach(HY),this.nodes.forEach(GY),this.nodes.forEach(VY)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new CY)}addEventListener(u,f){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new yw),this.eventHandlers.get(u).add(f)}notifyListeners(u,...f){const m=this.eventHandlers.get(u);m&&m.notify(...f)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=y_(u)&&!PH(u),this.instance=u;const{layoutId:f,layout:m,visualElement:x}=this.options;if(x&&!x.current&&x.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||f)&&(this.isLayoutDirty=!0),e){let p,v=0;const C=()=>this.root.updateBlockedByResize=!1;ts.read(()=>{v=window.innerWidth}),e(u,()=>{const T=window.innerWidth;T!==v&&(v=T,this.root.updateBlockedByResize=!0,p&&p(),p=AY(C,250),kg.hasAnimatedSinceResize&&(kg.hasAnimatedSinceResize=!1,this.nodes.forEach(DE)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&x&&(f||m)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:v,hasRelativeLayoutChanged:C,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||x.getDefaultTransition()||ZY,{onLayoutAnimationStart:k,onLayoutAnimationComplete:O}=x.getProps(),M=!this.targetLayout||!tP(this.targetLayout,T),L=!v&&C;if(this.options.layoutRoot||this.resumeFrom||L||v&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...kw(E,"layout"),onPlay:k,onComplete:O};(x.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(p,L)}else v||DE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Lo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(YY),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&rP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:f,layout:m}=this.options;if(f===void 0&&!m)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(TE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(OE);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(qY),this.nodes.forEach(FY),this.nodes.forEach(UY)):this.nodes.forEach(OE),this.clearAllSnapshots();const f=Vn.now();fn.delta=jl(0,1e3/60,f-fn.timestamp),fn.timestamp=f,fn.isProcessing=!0,sb.update.process(fn),sb.preRender.process(fn),sb.render.process(fn),fn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Pw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach($Y),this.sharedNodes.forEach(XY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ts.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ts.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!An(this.snapshot.measuredBox.x)&&!An(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Vs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(f=!1),f&&this.instance){const m=n(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:m,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!a)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!eP(this.projectionDelta),m=this.getTransformTemplate(),x=m?m(this.latestValues,""):void 0,p=x!==this.prevTransformTemplateValue;u&&this.instance&&(f||jc(this.latestValues)||p)&&(a(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const f=this.measurePageBox();let m=this.removeElementScroll(f);return u&&(m=this.removeTransform(m)),QY(m),{animationId:this.root.animationId,measuredBox:f,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return Vs();const f=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(JY))){const{scroll:x}=this.root;x&&(Gu(f.x,x.offset.x),Gu(f.y,x.offset.y))}return f}removeElementScroll(u){const f=Vs();if(ri(f,u),this.scroll?.wasRoot)return f;for(let m=0;m<this.path.length;m++){const x=this.path[m],{scroll:p,options:v}=x;x!==this.root&&p&&v.layoutScroll&&(p.wasRoot&&ri(f,u),Gu(f.x,p.offset.x),Gu(f.y,p.offset.y))}return f}applyTransform(u,f=!1){const m=Vs();ri(m,u);for(let x=0;x<this.path.length;x++){const p=this.path[x];!f&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Yu(m,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),jc(p.latestValues)&&Yu(m,p.latestValues)}return jc(this.latestValues)&&Yu(m,this.latestValues),m}removeTransform(u){const f=Vs();ri(f,u);for(let m=0;m<this.path.length;m++){const x=this.path[m];if(!x.instance||!jc(x.latestValues))continue;_2(x.latestValues)&&x.updateSnapshot();const p=Vs(),v=x.measurePageBox();ri(p,v),wE(f,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,p)}return jc(this.latestValues)&&wE(f,this.latestValues),f}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==f;if(!(u||m&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:v}=this.options;if(!this.layout||!(p||v))return;this.resolvedRelativeTargetAt=fn.timestamp;const C=this.getClosestProjectingParent();C&&this.linkedParentVersion!==C.layoutVersion&&!C.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(C&&C.layout?this.createRelativeTarget(C,this.layout.layoutBox,C.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Vs(),this.targetWithTransforms=Vs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),aY(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ri(this.target,this.layout.layoutBox),M_(this.target,this.targetDelta)):ri(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,C&&!!C.resumingFrom==!!this.resumingFrom&&!C.options.layoutScroll&&C.target&&this.animationProgress!==1?this.createRelativeTarget(C,this.target,C.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||_2(this.parent.latestValues)||I_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,f,m){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vs(),this.relativeTargetOrigin=Vs(),Jg(this.relativeTargetOrigin,f,m),ri(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const u=this.getLead(),f=!!this.resumingFrom||this!==u;let m=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(m=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===fn.timestamp&&(m=!1),m)return;const{layout:x,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||p))return;ri(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,C=this.treeScale.y;pG(this.layoutCorrected,this.treeScale,this.path,f),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Vs());const{target:T}=u;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bE(this.prevProjectionDelta.x,this.projectionDelta.x),bE(this.prevProjectionDelta.y,this.projectionDelta.y)),lf(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==C||!EE(this.projectionDelta.x,this.prevProjectionDelta.x)||!EE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Xu(),this.projectionDelta=Xu(),this.projectionDeltaWithTransform=Xu()}setAnimationOrigin(u,f=!1){const m=this.snapshot,x=m?m.latestValues:{},p={...this.latestValues},v=Xu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const C=Vs(),T=m?m.source:void 0,E=this.layout?this.layout.source:void 0,k=T!==E,O=this.getStack(),M=!O||O.members.length<=1,L=!!(k&&!M&&this.options.crossfade===!0&&!this.path.some(KY));this.animationProgress=0;let P;this.mixTargetDelta=H=>{const B=H/1e3;kE(v.x,u.x,B),kE(v.y,u.y,B),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jg(C,this.layout.layoutBox,this.relativeParent.layout.layoutBox),WY(this.relativeTarget,this.relativeTargetOrigin,C,B),P&&IY(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=Vs()),ri(P,this.relativeTarget)),k&&(this.animationValues=p,TY(p,x,this.latestValues,B,L,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Lo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ts.update(()=>{kg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=cd(0)),this.currentAnimation=jY(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),u.onUpdate&&u.onUpdate(f)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(LY),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:f,target:m,layout:x,latestValues:p}=u;if(!(!f||!m||!x)){if(this!==u&&this.layout&&x&&nP(this.options.animationType,this.layout.layoutBox,x.layoutBox)){m=this.target||Vs();const v=An(this.layout.layoutBox.x);m.x.min=u.target.x.min,m.x.max=m.x.min+v;const C=An(this.layout.layoutBox.y);m.y.min=u.target.y.min,m.y.max=m.y.min+C}ri(f,m),Yu(f,p),lf(this.projectionDeltaWithTransform,this.layoutCorrected,f,p)}}registerSharedNode(u,f){this.sharedNodes.has(u)||this.sharedNodes.set(u,new MY),this.sharedNodes.get(u).add(f);const x=f.options.initialPromotionConfig;f.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(f):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:f,preserveFollowOpacity:m}={}){const x=this.getStack();x&&x.promote(this,m),u&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let f=!1;const{latestValues:m}=u;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(f=!0),!f)return;const x={};m.z&&gb("z",u,x,this.animationValues);for(let p=0;p<mb.length;p++)gb(`rotate${mb[p]}`,u,x,this.animationValues),gb(`skew${mb[p]}`,u,x,this.animationValues);u.render();for(const p in x)u.setStaticValue(p,x[p]),this.animationValues&&(this.animationValues[p]=x[p]);u.scheduleRender()}applyProjectionStyles(u,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=Dg(f?.pointerEvents)||"",u.transform=m?m(this.latestValues,""):"none";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=Dg(f?.pointerEvents)||""),this.hasProjected&&!jc(this.latestValues)&&(u.transform=m?m({},""):"none",this.hasProjected=!1);return}u.visibility="";const p=x.animationValues||x.latestValues;this.applyTransformsToTarget();let v=RY(this.projectionDeltaWithTransform,this.treeScale,p);m&&(v=m(p,v)),u.transform=v;const{x:C,y:T}=this.projectionDelta;u.transformOrigin=`${C.origin*100}% ${T.origin*100}% 0`,x.animationValues?u.opacity=x===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=x===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const E in xf){if(p[E]===void 0)continue;const{correct:k,applyTo:O,isCSSVariable:M}=xf[E],L=v==="none"?p[E]:k(p[E],x);if(O){const P=O.length;for(let H=0;H<P;H++)u[O[H]]=L}else M?this.options.visualElement.renderState.vars[E]=L:u[E]=L}this.options.layoutId&&(u.pointerEvents=x===this?Dg(f?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(TE),this.root.sharedNodes.clear()}}}function FY(e){e.updateLayout()}function UY(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:n}=e.layout,{animationType:a}=e.options,l=t.source!==e.layout.source;a==="size"?Ia(p=>{const v=l?t.measuredBox[p]:t.layoutBox[p],C=An(v);v.min=s[p].min,v.max=v.min+C}):nP(a,t.layoutBox,s)&&Ia(p=>{const v=l?t.measuredBox[p]:t.layoutBox[p],C=An(s[p]);v.max=v.min+C,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[p].max=e.relativeTarget[p].min+C)});const u=Xu();lf(u,s,t.layoutBox);const f=Xu();l?lf(f,e.applyTransform(n,!0),t.measuredBox):lf(f,s,t.layoutBox);const m=!eP(u);let x=!1;if(!e.resumeFrom){const p=e.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:v,layout:C}=p;if(v&&C){const T=Vs();Jg(T,t.layoutBox,v.layoutBox);const E=Vs();Jg(E,s,C.layoutBox),tP(T,E)||(x=!0),p.options.layoutRoot&&(e.relativeTarget=E,e.relativeTargetOrigin=T,e.relativeParent=p)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:f,layoutDelta:u,hasLayoutChanged:m,hasRelativeLayoutChanged:x})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function zY(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function VY(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function $Y(e){e.clearSnapshot()}function TE(e){e.clearMeasurements()}function OE(e){e.isLayoutDirty=!1}function qY(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function DE(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function HY(e){e.resolveTargetDelta()}function GY(e){e.calcProjection()}function YY(e){e.resetSkewAndRotation()}function XY(e){e.removeLeadSnapshot()}function kE(e,t,s){e.translate=is(t.translate,0,s),e.scale=is(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function _E(e,t,s,n){e.min=is(t.min,s.min,n),e.max=is(t.max,s.max,n)}function WY(e,t,s,n){_E(e.x,t.x,s.x,n),_E(e.y,t.y,s.y,n)}function KY(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const ZY={duration:.45,ease:[.4,0,.1,1]},PE=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),IE=PE("applewebkit/")&&!PE("chrome/")?Math.round:Ua;function ME(e){e.min=IE(e.min),e.max=IE(e.max)}function QY(e){ME(e.x),ME(e.y)}function nP(e,t,s){return e==="position"||e==="preserve-aspect"&&!nY(AE(t),AE(s),.2)}function JY(e){return e!==e.root&&e.scroll?.wasRoot}const eX=sP({attachResizeListener:(e,t)=>pf(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xb={current:void 0},aP=sP({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!xb.current){const e=new eX({});e.mount(window),e.setOptions({layoutScroll:!0}),xb.current=e}return xb.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),tX={pan:{Feature:bY},drag:{Feature:yY,ProjectionNode:aP,MeasureLayout:Z_}};function RE(e,t,s){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,l=n[a];l&&ts.postRender(()=>l(t,Hf(t)))}class rX extends $o{mount(){const{current:t}=this.node;t&&(this.unmount=TH(t,(s,n)=>(RE(this.node,n,"Start"),a=>RE(this.node,a,"End"))))}unmount(){}}class sX extends $o{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vf(pf(this.node.current,"focus",()=>this.onFocus()),pf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function LE(e,t,s){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),l=n[a];l&&ts.postRender(()=>l(t,Hf(t)))}class nX extends $o{mount(){const{current:t}=this.node;t&&(this.unmount=_H(t,(s,n)=>(LE(this.node,n,"Start"),(a,{success:l})=>LE(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const F2=new WeakMap,pb=new WeakMap,aX=e=>{const t=F2.get(e.target);t&&t(e)},iX=e=>{e.forEach(aX)};function lX({root:e,...t}){const s=e||document;pb.has(s)||pb.set(s,{});const n=pb.get(s),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(iX,{root:e,...t})),n[a]}function oX(e,t,s){const n=lX(t);return F2.set(e,s),n.observe(e),()=>{F2.delete(e),n.unobserve(e)}}const cX={some:0,all:1};class uX extends $o{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:n,amount:a="some",once:l}=t,u={root:s?s.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:cX[a]},f=m=>{const{isIntersecting:x}=m;if(this.isInView===x||(this.isInView=x,l&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),C=x?p:v;C&&C(m)};return oX(this.node.current,u,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(dX(t,s))&&this.startObserver()}unmount(){}}function dX({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const hX={inView:{Feature:uX},tap:{Feature:nX},focus:{Feature:sX},hover:{Feature:rX}},fX={layout:{ProjectionNode:aP,MeasureLayout:Z_}},mX={...QG,...hX,...tX,...fX},iP=mG(mX,EG),gX=[{value:"lifetime",label:"All Time",icon:""},{value:"last12Months",label:"12 Months",icon:"12M"},{value:"last6Months",label:"6 Months",icon:"6M"},{value:"last3Months",label:"3 Months",icon:"3M"},{value:"lastMonth",label:"Last Month",icon:"1M"},{value:"thisMonth",label:"This Month",icon:"TM"}],xX=({selected:e,onChange:t})=>r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-2",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:gX.map(s=>r.jsxs(iP.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(s.value),className:`
              px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200
              ${e===s.value?"bg-gray-800 text-white shadow-md":"bg-gray-50 text-gray-700 hover:bg-gray-100"}
            `,children:[r.jsx("span",{className:"hidden sm:inline",children:s.label}),r.jsx("span",{className:"sm:hidden font-semibold",children:s.icon})]},s.value))})});function pX(e){return qt({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"},child:[]}]})(e)}function yX(e){return qt({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"},child:[]},{tag:"path",attr:{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"},child:[]}]})(e)}const Is=({title:e,value:t,subtitle:s,icon:n,trend:a,trendDirection:l="neutral",bgColor:u="bg-white",iconColor:f="text-gray-800",children:m,loading:x=!1})=>{const p={up:"text-green-600 bg-green-50",down:"text-red-600 bg-red-50",neutral:"text-gray-600 bg-gray-50"};return x?r.jsxs("div",{className:`${u} rounded-lg shadow-sm border border-gray-100 p-4 animate-pulse`,children:[r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-3"}),r.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-2 bg-gray-200 rounded w-1/3"})]}):r.jsxs(iP.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`${u} rounded-lg shadow-sm hover:shadow-md transition-all duration-200 border border-gray-100 p-4`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1 uppercase tracking-wide",children:e}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 truncate",children:t}),s&&r.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:s})]}),n&&r.jsx("div",{className:`${f} bg-opacity-10 p-2 rounded-lg flex-shrink-0 ml-2`,children:n})]}),a&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${p[l]}`,children:a}),r.jsx("span",{className:"text-xs text-gray-500",children:"vs last period"})]}),m&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:m})]})},bX=async()=>Te(Ee.get("/web/analytics/dashboard")),ai=e=>!e&&e!==0?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Or=e=>!e&&e!==0?"0":e>=1e7?`${(e/1e7).toFixed(1)}Cr`:e>=1e5?`${(e/1e5).toFixed(1)}L`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString(),vX=e=>{if(!e)return"N/A";const t=new Date(e);return new Intl.DateTimeFormat("en-IN",{day:"numeric",month:"short",year:"numeric"}).format(t)},NX=({data:e,loading:t})=>{if(!e)return r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(l=>r.jsx(Is,{loading:!0},l))});const{email:s,whatsapp:n,totalCommunications:a}=e;return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"Communication Analytics"}),r.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-green-50 px-2 py-1 rounded-full border border-green-200",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),r.jsx("span",{children:"Real-time"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[r.jsx(Is,{title:"Total Communications",value:Or(a),subtitle:"All channels combined",icon:r.jsx(pX,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:t}),r.jsx(Is,{title:"Email Messages",value:Or(s.total),subtitle:`${s.successRate} success rate`,icon:r.jsx(yX,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:t}),r.jsx(Is,{title:"WhatsApp Messages",value:Or(n.total),subtitle:`${n.successRate} success rate`,icon:r.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),iconColor:"text-green-600",loading:t}),r.jsx(Is,{title:"Overall Success Rate",value:a>0?((s.successful+n.successful)/a*100).toFixed(1)+"%":"0%",subtitle:"Across all channels",icon:r.jsx(od,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:t})]})]})};function wX(e){return qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 32C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48H48zm0 32h106c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H38c-3.3 0-6-2.7-6-6V80c0-8.8 7.2-16 16-16zm426 96H38c-3.3 0-6-2.7-6-6v-36c0-3.3 2.7-6 6-6h138l30.2-45.3c1.1-1.7 3-2.7 5-2.7H464c8.8 0 16 7.2 16 16v74c0 3.3-2.7 6-6 6zM256 424c-66.2 0-120-53.8-120-120s53.8-120 120-120 120 53.8 120 120-53.8 120-120 120zm0-208c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm-48 104c-8.8 0-16-7.2-16-16 0-35.3 28.7-64 64-64 8.8 0 16 7.2 16 16s-7.2 16-16 16c-17.6 0-32 14.4-32 32 0 8.8-7.2 16-16 16z"},child:[]}]})(e)}function lP(e){return qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(e)}function jX(e){return qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 174.8l-39.6-39.6c-9.4-9.4-24.6-9.4-33.9 0L192 374.7 80.6 263.2c-9.4-9.4-24.6-9.4-33.9 0L7 302.9c-9.4 9.4-9.4 24.6 0 34L175 505c9.4 9.4 24.6 9.4 33.9 0l296-296.2c9.4-9.5 9.4-24.7.1-34zm-324.3 106c6.2 6.3 16.4 6.3 22.6 0l208-208.2c6.2-6.3 6.2-16.4 0-22.6L366.1 4.7c-6.2-6.3-16.4-6.3-22.6 0L192 156.2l-55.4-55.5c-6.2-6.3-16.4-6.3-22.6 0L68.7 146c-6.2 6.3-6.2 16.4 0 22.6l112 112.2z"},child:[]}]})(e)}function U2(e){return qt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"},child:[]}]})(e)}function z2(e){return qt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function Ih(e){return qt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M223.75 130.75L154.62 15.54A31.997 31.997 0 0 0 127.18 0H16.03C3.08 0-4.5 14.57 2.92 25.18l111.27 158.96c29.72-27.77 67.52-46.83 109.56-53.39zM495.97 0H384.82c-11.24 0-21.66 5.9-27.44 15.54l-69.13 115.21c42.04 6.56 79.84 25.62 109.56 53.38L509.08 25.18C516.5 14.57 508.92 0 495.97 0zM256 160c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm92.52 157.26l-37.93 36.96 8.97 52.22c1.6 9.36-8.26 16.51-16.65 12.09L256 393.88l-46.9 24.65c-8.4 4.45-18.25-2.74-16.65-12.09l8.97-52.22-37.93-36.96c-6.82-6.64-3.05-18.23 6.35-19.59l52.43-7.64 23.43-47.52c2.11-4.28 6.19-6.39 10.28-6.39 4.11 0 8.22 2.14 10.33 6.39l23.43 47.52 52.43 7.64c9.4 1.36 13.17 12.95 6.35 19.59z"},child:[]}]})(e)}function ex(e){return qt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M128 160h320v192H128V160zm400 96c0 26.51 21.49 48 48 48v96c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48v-96c26.51 0 48-21.49 48-48s-21.49-48-48-48v-96c0-26.51 21.49-48 48-48h480c26.51 0 48 21.49 48 48v96c-26.51 0-48 21.49-48 48zm-48-104c0-13.255-10.745-24-24-24H120c-13.255 0-24 10.745-24 24v208c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V152z"},child:[]}]})(e)}function SX(e){return qt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function oP(e){return qt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}const CX=({usersData:e,adminsData:t,loading:s})=>r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"Users & Admins"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e&&r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-medium text-gray-600 mb-1",children:"Total Users"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Or(e.total)})]}),r.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:r.jsx(oP,{className:"w-6 h-6 text-gray-800"})})]}),e.growth&&r.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-50 border border-green-200 mb-3",children:[r.jsx("span",{className:"text-xs font-bold text-green-700",children:e.growth}),r.jsx("span",{className:"text-xs text-gray-600",children:"growth"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-3 rounded-lg border border-green-100",children:[r.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[r.jsx(SX,{className:"w-3 h-3 text-green-600"}),r.jsx("p",{className:"text-xs font-medium text-gray-600",children:"This Month"})]}),r.jsx("p",{className:"text-xl font-bold text-green-700",children:Or(e.thisMonth)})]}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[r.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Last Month"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:Or(e.lastMonth)})]})]})]}),t&&r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-medium text-gray-600 mb-1",children:"Total Admins"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Or(t.total)})]}),r.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:r.jsx(l$,{className:"w-6 h-6 text-purple-600"})})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-50 border border-green-200",children:[r.jsx(h$,{className:"w-3 h-3 text-green-600"}),r.jsx("span",{className:"text-xs font-bold text-gray-900",children:t.active}),r.jsx("span",{className:"text-xs text-gray-600",children:"active"})]}),r.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gray-100 border border-gray-200",children:[r.jsx("span",{className:"text-xs font-bold text-gray-900",children:t.inactive}),r.jsx("span",{className:"text-xs text-gray-600",children:"inactive"})]})]}),t.byRole&&Object.keys(t.byRole).length>0&&r.jsxs("div",{className:"space-y-1.5 mt-3 pt-3 border-t border-gray-200",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase mb-1.5",children:"By Role"}),Object.entries(t.byRole).map(([n,a])=>r.jsxs("div",{className:"flex items-center justify-between text-xs p-2 rounded-lg bg-purple-50 hover:bg-purple-100 transition-colors",children:[r.jsx("span",{className:"font-medium text-gray-900 capitalize",children:n.replace("_"," ")}),r.jsx("span",{className:"font-bold text-purple-700",children:a})]},n))]})]})]})]});var AX=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function qw(e){if(typeof e!="string")return!1;var t=AX;return t.includes(e)}var EX=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],TX=new Set(EX);function cP(e){return typeof e!="string"?!1:TX.has(e)}function uP(e){return typeof e=="string"&&e.startsWith("data-")}function dd(e){if(typeof e!="object"||e===null)return{};var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(cP(s)||uP(s))&&(t[s]=e[s]);return t}function V2(e){if(e==null)return null;if(w.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return dd(t)}return typeof e=="object"&&!Array.isArray(e)?dd(e):null}function $a(e){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(cP(s)||uP(s)||qw(s))&&(t[s]=e[s]);return t}var OX=["children","width","height","viewBox","className","style","title","desc"];function $2(){return $2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},$2.apply(null,arguments)}function DX(e,t){if(e==null)return{};var s,n,a=kX(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function kX(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var Hw=w.forwardRef((e,t)=>{var{children:s,width:n,height:a,viewBox:l,className:u,style:f,title:m,desc:x}=e,p=DX(e,OX),v=l||{width:n,height:a,x:0,y:0},C=js("recharts-surface",u);return w.createElement("svg",$2({},$a(p),{className:C,width:n,height:a,style:f,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height),ref:t}),w.createElement("title",null,m),w.createElement("desc",null,x),s)}),_X=["children","className"];function q2(){return q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},q2.apply(null,arguments)}function PX(e,t){if(e==null)return{};var s,n,a=IX(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function IX(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var Fo=w.forwardRef((e,t)=>{var{children:s,className:n}=e,a=PX(e,_X),l=js("recharts-layer",n);return w.createElement("g",q2({className:l},$a(a),{ref:t}),s)}),dP=w.createContext(null),MX=()=>w.useContext(dP);function zr(e){return function(){return e}}const hP=Math.cos,tx=Math.sin,yi=Math.sqrt,rx=Math.PI,up=2*rx,H2=Math.PI,G2=2*H2,Sc=1e-6,RX=G2-Sc;function fP(e){this._+=e[0];for(let t=1,s=e.length;t<s;++t)this._+=arguments[t]+e[t]}function LX(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return fP;const s=10**t;return function(n){this._+=n[0];for(let a=1,l=n.length;a<l;++a)this._+=Math.round(arguments[a]*s)/s+n[a]}}class BX{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?fP:LX(t)}moveTo(t,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+s}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,s){this._append`L${this._x1=+t},${this._y1=+s}`}quadraticCurveTo(t,s,n,a){this._append`Q${+t},${+s},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,s,n,a,l,u){this._append`C${+t},${+s},${+n},${+a},${this._x1=+l},${this._y1=+u}`}arcTo(t,s,n,a,l){if(t=+t,s=+s,n=+n,a=+a,l=+l,l<0)throw new Error(`negative radius: ${l}`);let u=this._x1,f=this._y1,m=n-t,x=a-s,p=u-t,v=f-s,C=p*p+v*v;if(this._x1===null)this._append`M${this._x1=t},${this._y1=s}`;else if(C>Sc)if(!(Math.abs(v*m-x*p)>Sc)||!l)this._append`L${this._x1=t},${this._y1=s}`;else{let T=n-u,E=a-f,k=m*m+x*x,O=T*T+E*E,M=Math.sqrt(k),L=Math.sqrt(C),P=l*Math.tan((H2-Math.acos((k+C-O)/(2*M*L)))/2),H=P/L,B=P/M;Math.abs(H-1)>Sc&&this._append`L${t+H*p},${s+H*v}`,this._append`A${l},${l},0,0,${+(v*T>p*E)},${this._x1=t+B*m},${this._y1=s+B*x}`}}arc(t,s,n,a,l,u){if(t=+t,s=+s,n=+n,u=!!u,n<0)throw new Error(`negative radius: ${n}`);let f=n*Math.cos(a),m=n*Math.sin(a),x=t+f,p=s+m,v=1^u,C=u?a-l:l-a;this._x1===null?this._append`M${x},${p}`:(Math.abs(this._x1-x)>Sc||Math.abs(this._y1-p)>Sc)&&this._append`L${x},${p}`,n&&(C<0&&(C=C%G2+G2),C>RX?this._append`A${n},${n},0,1,${v},${t-f},${s-m}A${n},${n},0,1,${v},${this._x1=x},${this._y1=p}`:C>Sc&&this._append`A${n},${n},0,${+(C>=H2)},${v},${this._x1=t+n*Math.cos(l)},${this._y1=s+n*Math.sin(l)}`)}rect(t,s,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+s}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Gw(e){let t=3;return e.digits=function(s){if(!arguments.length)return t;if(s==null)t=null;else{const n=Math.floor(s);if(!(n>=0))throw new RangeError(`invalid digits: ${s}`);t=n}return e},()=>new BX(t)}function Yw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mP(e){this._context=e}mP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function dp(e){return new mP(e)}function gP(e){return e[0]}function xP(e){return e[1]}function pP(e,t){var s=zr(!0),n=null,a=dp,l=null,u=Gw(f);e=typeof e=="function"?e:e===void 0?gP:zr(e),t=typeof t=="function"?t:t===void 0?xP:zr(t);function f(m){var x,p=(m=Yw(m)).length,v,C=!1,T;for(n==null&&(l=a(T=u())),x=0;x<=p;++x)!(x<p&&s(v=m[x],x,m))===C&&((C=!C)?l.lineStart():l.lineEnd()),C&&l.point(+e(v,x,m),+t(v,x,m));if(T)return l=null,T+""||null}return f.x=function(m){return arguments.length?(e=typeof m=="function"?m:zr(+m),f):e},f.y=function(m){return arguments.length?(t=typeof m=="function"?m:zr(+m),f):t},f.defined=function(m){return arguments.length?(s=typeof m=="function"?m:zr(!!m),f):s},f.curve=function(m){return arguments.length?(a=m,n!=null&&(l=a(n)),f):a},f.context=function(m){return arguments.length?(m==null?n=l=null:l=a(n=m),f):n},f}function Bm(e,t,s){var n=null,a=zr(!0),l=null,u=dp,f=null,m=Gw(x);e=typeof e=="function"?e:e===void 0?gP:zr(+e),t=typeof t=="function"?t:zr(t===void 0?0:+t),s=typeof s=="function"?s:s===void 0?xP:zr(+s);function x(v){var C,T,E,k=(v=Yw(v)).length,O,M=!1,L,P=new Array(k),H=new Array(k);for(l==null&&(f=u(L=m())),C=0;C<=k;++C){if(!(C<k&&a(O=v[C],C,v))===M)if(M=!M)T=C,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),E=C-1;E>=T;--E)f.point(P[E],H[E]);f.lineEnd(),f.areaEnd()}M&&(P[C]=+e(O,C,v),H[C]=+t(O,C,v),f.point(n?+n(O,C,v):P[C],s?+s(O,C,v):H[C]))}if(L)return f=null,L+""||null}function p(){return pP().defined(a).curve(u).context(l)}return x.x=function(v){return arguments.length?(e=typeof v=="function"?v:zr(+v),n=null,x):e},x.x0=function(v){return arguments.length?(e=typeof v=="function"?v:zr(+v),x):e},x.x1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:zr(+v),x):n},x.y=function(v){return arguments.length?(t=typeof v=="function"?v:zr(+v),s=null,x):t},x.y0=function(v){return arguments.length?(t=typeof v=="function"?v:zr(+v),x):t},x.y1=function(v){return arguments.length?(s=v==null?null:typeof v=="function"?v:zr(+v),x):s},x.lineX0=x.lineY0=function(){return p().x(e).y(t)},x.lineY1=function(){return p().x(e).y(s)},x.lineX1=function(){return p().x(n).y(t)},x.defined=function(v){return arguments.length?(a=typeof v=="function"?v:zr(!!v),x):a},x.curve=function(v){return arguments.length?(u=v,l!=null&&(f=u(l)),x):u},x.context=function(v){return arguments.length?(v==null?l=f=null:f=u(l=v),x):l},x}class yP{constructor(t,s){this._context=t,this._x=s}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,s){switch(t=+t,s=+s,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,s,t,s):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+s)/2,t,this._y0,t,s);break}}this._x0=t,this._y0=s}}function FX(e){return new yP(e,!0)}function UX(e){return new yP(e,!1)}const Xw={draw(e,t){const s=yi(t/rx);e.moveTo(s,0),e.arc(0,0,s,0,up)}},zX={draw(e,t){const s=yi(t/5)/2;e.moveTo(-3*s,-s),e.lineTo(-s,-s),e.lineTo(-s,-3*s),e.lineTo(s,-3*s),e.lineTo(s,-s),e.lineTo(3*s,-s),e.lineTo(3*s,s),e.lineTo(s,s),e.lineTo(s,3*s),e.lineTo(-s,3*s),e.lineTo(-s,s),e.lineTo(-3*s,s),e.closePath()}},bP=yi(1/3),VX=bP*2,$X={draw(e,t){const s=yi(t/VX),n=s*bP;e.moveTo(0,-s),e.lineTo(n,0),e.lineTo(0,s),e.lineTo(-n,0),e.closePath()}},qX={draw(e,t){const s=yi(t),n=-s/2;e.rect(n,n,s,s)}},HX=.8908130915292852,vP=tx(rx/10)/tx(7*rx/10),GX=tx(up/10)*vP,YX=-hP(up/10)*vP,XX={draw(e,t){const s=yi(t*HX),n=GX*s,a=YX*s;e.moveTo(0,-s),e.lineTo(n,a);for(let l=1;l<5;++l){const u=up*l/5,f=hP(u),m=tx(u);e.lineTo(m*s,-f*s),e.lineTo(f*n-m*a,m*n+f*a)}e.closePath()}},yb=yi(3),WX={draw(e,t){const s=-yi(t/(yb*3));e.moveTo(0,s*2),e.lineTo(-yb*s,-s),e.lineTo(yb*s,-s),e.closePath()}},Da=-.5,ka=yi(3)/2,Y2=1/yi(12),KX=(Y2/2+1)*3,ZX={draw(e,t){const s=yi(t/KX),n=s/2,a=s*Y2,l=n,u=s*Y2+s,f=-l,m=u;e.moveTo(n,a),e.lineTo(l,u),e.lineTo(f,m),e.lineTo(Da*n-ka*a,ka*n+Da*a),e.lineTo(Da*l-ka*u,ka*l+Da*u),e.lineTo(Da*f-ka*m,ka*f+Da*m),e.lineTo(Da*n+ka*a,Da*a-ka*n),e.lineTo(Da*l+ka*u,Da*u-ka*l),e.lineTo(Da*f+ka*m,Da*m-ka*f),e.closePath()}};function QX(e,t){let s=null,n=Gw(a);e=typeof e=="function"?e:zr(e||Xw),t=typeof t=="function"?t:zr(t===void 0?64:+t);function a(){let l;if(s||(s=l=n()),e.apply(this,arguments).draw(s,+t.apply(this,arguments)),l)return s=null,l+""||null}return a.type=function(l){return arguments.length?(e=typeof l=="function"?l:zr(l),a):e},a.size=function(l){return arguments.length?(t=typeof l=="function"?l:zr(+l),a):t},a.context=function(l){return arguments.length?(s=l??null,a):s},a}function sx(){}function nx(e,t,s){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+s)/6)}function NP(e){this._context=e}NP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:nx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:nx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function JX(e){return new NP(e)}function wP(e){this._context=e}wP.prototype={areaStart:sx,areaEnd:sx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:nx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function eW(e){return new wP(e)}function jP(e){this._context=e}jP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var s=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(s,n):this._context.moveTo(s,n);break;case 3:this._point=4;default:nx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tW(e){return new jP(e)}function SP(e){this._context=e}SP.prototype={areaStart:sx,areaEnd:sx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function rW(e){return new SP(e)}function BE(e){return e<0?-1:1}function FE(e,t,s){var n=e._x1-e._x0,a=t-e._x1,l=(e._y1-e._y0)/(n||a<0&&-0),u=(s-e._y1)/(a||n<0&&-0),f=(l*a+u*n)/(n+a);return(BE(l)+BE(u))*Math.min(Math.abs(l),Math.abs(u),.5*Math.abs(f))||0}function UE(e,t){var s=e._x1-e._x0;return s?(3*(e._y1-e._y0)/s-t)/2:t}function bb(e,t,s){var n=e._x0,a=e._y0,l=e._x1,u=e._y1,f=(l-n)/3;e._context.bezierCurveTo(n+f,a+f*t,l-f,u-f*s,l,u)}function ax(e){this._context=e}ax.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bb(this,this._t0,UE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var s=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bb(this,UE(this,s=FE(this,e,t)),s);break;default:bb(this,this._t0,s=FE(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=s}}};function CP(e){this._context=new AP(e)}(CP.prototype=Object.create(ax.prototype)).point=function(e,t){ax.prototype.point.call(this,t,e)};function AP(e){this._context=e}AP.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,s,n,a,l){this._context.bezierCurveTo(t,e,n,s,l,a)}};function sW(e){return new ax(e)}function nW(e){return new CP(e)}function EP(e){this._context=e}EP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,s=e.length;if(s)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),s===2)this._context.lineTo(e[1],t[1]);else for(var n=zE(e),a=zE(t),l=0,u=1;u<s;++l,++u)this._context.bezierCurveTo(n[0][l],a[0][l],n[1][l],a[1][l],e[u],t[u]);(this._line||this._line!==0&&s===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function zE(e){var t,s=e.length-1,n,a=new Array(s),l=new Array(s),u=new Array(s);for(a[0]=0,l[0]=2,u[0]=e[0]+2*e[1],t=1;t<s-1;++t)a[t]=1,l[t]=4,u[t]=4*e[t]+2*e[t+1];for(a[s-1]=2,l[s-1]=7,u[s-1]=8*e[s-1]+e[s],t=1;t<s;++t)n=a[t]/l[t-1],l[t]-=n,u[t]-=n*u[t-1];for(a[s-1]=u[s-1]/l[s-1],t=s-2;t>=0;--t)a[t]=(u[t]-a[t+1])/l[t];for(l[s-1]=(e[s]+a[s-1])/2,t=0;t<s-1;++t)l[t]=2*e[t+1]-a[t+1];return[a,l]}function aW(e){return new EP(e)}function hp(e,t){this._context=e,this._t=t}hp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var s=this._x*(1-this._t)+e*this._t;this._context.lineTo(s,this._y),this._context.lineTo(s,t)}break}}this._x=e,this._y=t}};function iW(e){return new hp(e,.5)}function lW(e){return new hp(e,0)}function oW(e){return new hp(e,1)}function hd(e,t){if((u=e.length)>1)for(var s=1,n,a,l=e[t[0]],u,f=l.length;s<u;++s)for(a=l,l=e[t[s]],n=0;n<f;++n)l[n][1]+=l[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function X2(e){for(var t=e.length,s=new Array(t);--t>=0;)s[t]=t;return s}function cW(e,t){return e[t]}function uW(e){const t=[];return t.key=e,t}function dW(){var e=zr([]),t=X2,s=hd,n=cW;function a(l){var u=Array.from(e.apply(this,arguments),uW),f,m=u.length,x=-1,p;for(const v of l)for(f=0,++x;f<m;++f)(u[f][x]=[0,+n(v,u[f].key,x,l)]).data=v;for(f=0,p=Yw(t(u));f<m;++f)u[p[f]].index=f;return s(u,p),u}return a.keys=function(l){return arguments.length?(e=typeof l=="function"?l:zr(Array.from(l)),a):e},a.value=function(l){return arguments.length?(n=typeof l=="function"?l:zr(+l),a):n},a.order=function(l){return arguments.length?(t=l==null?X2:typeof l=="function"?l:zr(Array.from(l)),a):t},a.offset=function(l){return arguments.length?(s=l??hd,a):s},a}function hW(e,t){if((n=e.length)>0){for(var s,n,a=0,l=e[0].length,u;a<l;++a){for(u=s=0;s<n;++s)u+=e[s][a][1]||0;if(u)for(s=0;s<n;++s)e[s][a][1]/=u}hd(e,t)}}function fW(e,t){if((a=e.length)>0){for(var s=0,n=e[t[0]],a,l=n.length;s<l;++s){for(var u=0,f=0;u<a;++u)f+=e[u][s][1]||0;n[s][1]+=n[s][0]=-f/2}hd(e,t)}}function mW(e,t){if(!(!((u=e.length)>0)||!((l=(a=e[t[0]]).length)>0))){for(var s=0,n=1,a,l,u;n<l;++n){for(var f=0,m=0,x=0;f<u;++f){for(var p=e[t[f]],v=p[n][1]||0,C=p[n-1][1]||0,T=(v-C)/2,E=0;E<f;++E){var k=e[t[E]],O=k[n][1]||0,M=k[n-1][1]||0;T+=O-M}m+=v,x+=T*v}a[n-1][1]+=a[n-1][0]=s,m&&(s-=x/m)}a[n-1][1]+=a[n-1][0]=s,hd(e,t)}}var vb={},Nb={},VE;function gW(){return VE||(VE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s==="__proto__"}e.isUnsafeProperty=t})(Nb)),Nb}var wb={},$E;function TP(){return $E||($E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){switch(typeof s){case"number":case"symbol":return!1;case"string":return s.includes(".")||s.includes("[")||s.includes("]")}}e.isDeepKey=t})(wb)),wb}var jb={},qE;function Ww(){return qE||(qE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="string"||typeof s=="symbol"?s:Object.is(s?.valueOf?.(),-0)?"-0":String(s)}e.toKey=t})(jb)),jb}var Sb={},Cb={},HE;function xW(){return HE||(HE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){if(s==null)return"";if(typeof s=="string")return s;if(Array.isArray(s))return s.map(t).join(",");const n=String(s);return n==="0"&&Object.is(Number(s),-0)?"-0":n}e.toString=t})(Cb)),Cb}var GE;function Kw(){return GE||(GE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xW(),s=Ww();function n(a){if(Array.isArray(a))return a.map(s.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const l=[],u=a.length;if(u===0)return l;let f=0,m="",x="",p=!1;for(a.charCodeAt(0)===46&&(l.push(""),f++);f<u;){const v=a[f];x?v==="\\"&&f+1<u?(f++,m+=a[f]):v===x?x="":m+=v:p?v==='"'||v==="'"?x=v:v==="]"?(p=!1,l.push(m),m=""):m+=v:v==="["?(p=!0,m&&(l.push(m),m="")):v==="."?m&&(l.push(m),m=""):m+=v,f++}return m&&l.push(m),l}e.toPath=n})(Sb)),Sb}var YE;function Zw(){return YE||(YE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gW(),s=TP(),n=Ww(),a=Kw();function l(f,m,x){if(f==null)return x;switch(typeof m){case"string":{if(t.isUnsafeProperty(m))return x;const p=f[m];return p===void 0?s.isDeepKey(m)?l(f,a.toPath(m),x):x:p}case"number":case"symbol":{typeof m=="number"&&(m=n.toKey(m));const p=f[m];return p===void 0?x:p}default:{if(Array.isArray(m))return u(f,m,x);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),t.isUnsafeProperty(m))return x;const p=f[m];return p===void 0?x:p}}}function u(f,m,x){if(m.length===0)return x;let p=f;for(let v=0;v<m.length;v++){if(p==null||t.isUnsafeProperty(m[v]))return x;p=p[m[v]]}return p===void 0?x:p}e.get=l})(vb)),vb}var Ab,XE;function pW(){return XE||(XE=1,Ab=Zw().get),Ab}var yW=pW();const yf=Vi(yW);var $n=e=>e===0?0:e>0?1:-1,Cl=e=>typeof e=="number"&&e!=+e,Al=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,It=e=>(typeof e=="number"||e instanceof Number)&&!Cl(e),El=e=>It(e)||typeof e=="string",bW=0,bf=e=>{var t=++bW;return"".concat(e||"").concat(t)},fa=function(t,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!It(t)&&typeof t!="string")return n;var l;if(Al(t)){if(s==null)return n;var u=t.indexOf("%");l=s*parseFloat(t.slice(0,u))/100}else l=+t;return Cl(l)&&(l=n),a&&s!=null&&l>s&&(l=s),l},OP=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,s={},n=0;n<t;n++)if(!s[e[n]])s[e[n]]=!0;else return!0;return!1};function li(e,t,s){return It(e)&&It(t)?e+s*(t-e):t}function vW(e,t,s){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):yf(n,t))===s)}var xa=e=>e===null||typeof e>"u",Gf=e=>xa(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function NW(e){return e!=null}function Yf(){}var wW=["type","size","sizeType"];function W2(){return W2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},W2.apply(null,arguments)}function WE(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function KE(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(s),!0).forEach(function(n){jW(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):WE(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function jW(e,t,s){return(t=SW(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function SW(e){var t=CW(e,"string");return typeof t=="symbol"?t:t+""}function CW(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AW(e,t){if(e==null)return{};var s,n,a=EW(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function EW(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var DP={symbolCircle:Xw,symbolCross:zX,symbolDiamond:$X,symbolSquare:qX,symbolStar:XX,symbolTriangle:WX,symbolWye:ZX},TW=Math.PI/180,OW=e=>{var t="symbol".concat(Gf(e));return DP[t]||Xw},DW=(e,t,s)=>{if(t==="area")return e;switch(s){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*TW;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},kW=(e,t)=>{DP["symbol".concat(Gf(e))]=t},Qw=e=>{var{type:t="circle",size:s=64,sizeType:n="area"}=e,a=AW(e,wW),l=KE(KE({},a),{},{type:t,size:s,sizeType:n}),u="circle";typeof t=="string"&&(u=t);var f=()=>{var C=OW(u),T=QX().type(C).size(DW(s,n,u)),E=T();if(E!==null)return E},{className:m,cx:x,cy:p}=l,v=$a(l);return It(x)&&It(p)&&It(s)?w.createElement("path",W2({},v,{className:js("recharts-symbols",m),transform:"translate(".concat(x,", ").concat(p,")"),d:f()})):null};Qw.registerSymbol=kW;var kP=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,_W=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(w.isValidElement(e)&&(s=e.props),typeof s!="object"&&typeof s!="function")return null;var n={};return Object.keys(s).forEach(a=>{qw(a)&&(n[a]=(l=>s[a](s,l)))}),n},PW=(e,t,s)=>n=>(e(t,s,n),null),_P=(e,t,s)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var l=e[a];qw(a)&&typeof l=="function"&&(n||(n={}),n[a]=PW(l,t,s))}),n};function ZE(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function IW(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(s),!0).forEach(function(n){MW(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ZE(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function MW(e,t,s){return(t=RW(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function RW(e){var t=LW(e,"string");return typeof t=="symbol"?t:t+""}function LW(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ga(e,t){var s=IW({},e),n=t,a=Object.keys(t),l=a.reduce((u,f)=>(u[f]===void 0&&n[f]!==void 0&&(u[f]=n[f]),u),s);return l}function ix(){return ix=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},ix.apply(null,arguments)}function QE(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function BW(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?QE(Object(s),!0).forEach(function(n){FW(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):QE(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function FW(e,t,s){return(t=UW(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function UW(e){var t=zW(e,"string");return typeof t=="symbol"?t:t+""}function zW(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ma=32,VW={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function $W(e){var{data:t,iconType:s,inactiveColor:n}=e,a=Ma/2,l=Ma/6,u=Ma/3,f=t.inactive?n:t.color,m=s??t.type;if(m==="none")return null;if(m==="plainline"){var x;return w.createElement("line",{strokeWidth:4,fill:"none",stroke:f,strokeDasharray:(x=t.payload)===null||x===void 0?void 0:x.strokeDasharray,x1:0,y1:a,x2:Ma,y2:a,className:"recharts-legend-icon"})}if(m==="line")return w.createElement("path",{strokeWidth:4,fill:"none",stroke:f,d:"M0,".concat(a,"h").concat(u,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*u,",").concat(a,`
            H`).concat(Ma,"M").concat(2*u,",").concat(a,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(u,",").concat(a),className:"recharts-legend-icon"});if(m==="rect")return w.createElement("path",{stroke:"none",fill:f,d:"M0,".concat(Ma/8,"h").concat(Ma,"v").concat(Ma*3/4,"h").concat(-Ma,"z"),className:"recharts-legend-icon"});if(w.isValidElement(t.legendIcon)){var p=BW({},t);return delete p.legendIcon,w.cloneElement(t.legendIcon,p)}return w.createElement(Qw,{fill:f,cx:a,cy:a,size:Ma,sizeType:"diameter",type:m})}function qW(e){var{payload:t,iconSize:s,layout:n,formatter:a,inactiveColor:l,iconType:u}=e,f={x:0,y:0,width:Ma,height:Ma},m={display:n==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((p,v)=>{var C=p.formatter||a,T=js({"recharts-legend-item":!0,["legend-item-".concat(v)]:!0,inactive:p.inactive});if(p.type==="none")return null;var E=p.inactive?l:p.color,k=C?C(p.value,p,v):p.value;return w.createElement("li",ix({className:T,style:m,key:"legend-item-".concat(v)},_P(e,p,v)),w.createElement(Hw,{width:s,height:s,viewBox:f,style:x,"aria-label":"".concat(k," legend icon")},w.createElement($W,{data:p,iconType:u,inactiveColor:l})),w.createElement("span",{className:"recharts-legend-item-text",style:{color:E}},k))})}var HW=e=>{var t=Ga(e,VW),{payload:s,layout:n,align:a}=t;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return w.createElement("ul",{className:"recharts-default-legend",style:l},w.createElement(qW,ix({},t,{payload:s})))},Eb={},Tb={},JE;function GW(){return JE||(JE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s,n){const a=new Map;for(let l=0;l<s.length;l++){const u=s[l],f=n(u);a.has(f)||a.set(f,u)}return Array.from(a.values())}e.uniqBy=t})(Tb)),Tb}var Ob={},e5;function PP(){return e5||(e5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s}e.identity=t})(Ob)),Ob}var Db={},kb={},_b={},t5;function YW(){return t5||(t5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return Number.isSafeInteger(s)&&s>=0}e.isLength=t})(_b)),_b}var r5;function Jw(){return r5||(r5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YW();function s(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=s})(kb)),kb}var Pb={},s5;function XW(){return s5||(s5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="object"&&s!==null}e.isObjectLike=t})(Pb)),Pb}var n5;function WW(){return n5||(n5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jw(),s=XW();function n(a){return s.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(Db)),Db}var Ib={},Mb={},a5;function KW(){return a5||(a5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zw();function s(n){return function(a){return t.get(a,n)}}e.property=s})(Mb)),Mb}var Rb={},Lb={},Bb={},Fb={},i5;function IP(){return i5||(i5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s!==null&&(typeof s=="object"||typeof s=="function")}e.isObject=t})(Fb)),Fb}var Ub={},l5;function MP(){return l5||(l5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s==null||typeof s!="object"&&typeof s!="function"}e.isPrimitive=t})(Ub)),Ub}var zb={},o5;function RP(){return o5||(o5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s,n){return s===n||Number.isNaN(s)&&Number.isNaN(n)}e.eq=t})(zb)),zb}var c5;function ZW(){return c5||(c5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IP(),s=MP(),n=RP();function a(p,v,C){return typeof C!="function"?a(p,v,()=>{}):l(p,v,function T(E,k,O,M,L,P){const H=C(E,k,O,M,L,P);return H!==void 0?!!H:l(E,k,T,P)},new Map)}function l(p,v,C,T){if(v===p)return!0;switch(typeof v){case"object":return u(p,v,C,T);case"function":return Object.keys(v).length>0?l(p,{...v},C,T):n.eq(p,v);default:return t.isObject(p)?typeof v=="string"?v==="":!0:n.eq(p,v)}}function u(p,v,C,T){if(v==null)return!0;if(Array.isArray(v))return m(p,v,C,T);if(v instanceof Map)return f(p,v,C,T);if(v instanceof Set)return x(p,v,C,T);const E=Object.keys(v);if(p==null)return E.length===0;if(E.length===0)return!0;if(T?.has(v))return T.get(v)===p;T?.set(v,p);try{for(let k=0;k<E.length;k++){const O=E[k];if(!s.isPrimitive(p)&&!(O in p)||v[O]===void 0&&p[O]!==void 0||v[O]===null&&p[O]!==null||!C(p[O],v[O],O,p,v,T))return!1}return!0}finally{T?.delete(v)}}function f(p,v,C,T){if(v.size===0)return!0;if(!(p instanceof Map))return!1;for(const[E,k]of v.entries()){const O=p.get(E);if(C(O,k,E,p,v,T)===!1)return!1}return!0}function m(p,v,C,T){if(v.length===0)return!0;if(!Array.isArray(p))return!1;const E=new Set;for(let k=0;k<v.length;k++){const O=v[k];let M=!1;for(let L=0;L<p.length;L++){if(E.has(L))continue;const P=p[L];let H=!1;if(C(P,O,k,p,v,T)&&(H=!0),H){E.add(L),M=!0;break}}if(!M)return!1}return!0}function x(p,v,C,T){return v.size===0?!0:p instanceof Set?m([...p],[...v],C,T):!1}e.isMatchWith=a,e.isSetMatch=x})(Bb)),Bb}var u5;function LP(){return u5||(u5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZW();function s(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=s})(Lb)),Lb}var Vb={},$b={},qb={},d5;function QW(){return d5||(d5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return Object.getOwnPropertySymbols(s).filter(n=>Object.prototype.propertyIsEnumerable.call(s,n))}e.getSymbols=t})(qb)),qb}var Hb={},h5;function BP(){return h5||(h5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}e.getTag=t})(Hb)),Hb}var Gb={},f5;function FP(){return f5||(f5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",s="[object String]",n="[object Number]",a="[object Boolean]",l="[object Arguments]",u="[object Symbol]",f="[object Date]",m="[object Map]",x="[object Set]",p="[object Array]",v="[object Function]",C="[object ArrayBuffer]",T="[object Object]",E="[object Error]",k="[object DataView]",O="[object Uint8Array]",M="[object Uint8ClampedArray]",L="[object Uint16Array]",P="[object Uint32Array]",H="[object BigUint64Array]",B="[object Int8Array]",F="[object Int16Array]",R="[object Int32Array]",z="[object BigInt64Array]",U="[object Float32Array]",Y="[object Float64Array]";e.argumentsTag=l,e.arrayBufferTag=C,e.arrayTag=p,e.bigInt64ArrayTag=z,e.bigUint64ArrayTag=H,e.booleanTag=a,e.dataViewTag=k,e.dateTag=f,e.errorTag=E,e.float32ArrayTag=U,e.float64ArrayTag=Y,e.functionTag=v,e.int16ArrayTag=F,e.int32ArrayTag=R,e.int8ArrayTag=B,e.mapTag=m,e.numberTag=n,e.objectTag=T,e.regexpTag=t,e.setTag=x,e.stringTag=s,e.symbolTag=u,e.uint16ArrayTag=L,e.uint32ArrayTag=P,e.uint8ArrayTag=O,e.uint8ClampedArrayTag=M})(Gb)),Gb}var Yb={},m5;function JW(){return m5||(m5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}e.isTypedArray=t})(Yb)),Yb}var g5;function UP(){return g5||(g5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QW(),s=BP(),n=FP(),a=MP(),l=JW();function u(p,v){return f(p,void 0,p,new Map,v)}function f(p,v,C,T=new Map,E=void 0){const k=E?.(p,v,C,T);if(k!==void 0)return k;if(a.isPrimitive(p))return p;if(T.has(p))return T.get(p);if(Array.isArray(p)){const O=new Array(p.length);T.set(p,O);for(let M=0;M<p.length;M++)O[M]=f(p[M],M,C,T,E);return Object.hasOwn(p,"index")&&(O.index=p.index),Object.hasOwn(p,"input")&&(O.input=p.input),O}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const O=new RegExp(p.source,p.flags);return O.lastIndex=p.lastIndex,O}if(p instanceof Map){const O=new Map;T.set(p,O);for(const[M,L]of p)O.set(M,f(L,M,C,T,E));return O}if(p instanceof Set){const O=new Set;T.set(p,O);for(const M of p)O.add(f(M,void 0,C,T,E));return O}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(l.isTypedArray(p)){const O=new(Object.getPrototypeOf(p)).constructor(p.length);T.set(p,O);for(let M=0;M<p.length;M++)O[M]=f(p[M],M,C,T,E);return O}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const O=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return T.set(p,O),m(O,p,C,T,E),O}if(typeof File<"u"&&p instanceof File){const O=new File([p],p.name,{type:p.type});return T.set(p,O),m(O,p,C,T,E),O}if(typeof Blob<"u"&&p instanceof Blob){const O=new Blob([p],{type:p.type});return T.set(p,O),m(O,p,C,T,E),O}if(p instanceof Error){const O=new p.constructor;return T.set(p,O),O.message=p.message,O.name=p.name,O.stack=p.stack,O.cause=p.cause,m(O,p,C,T,E),O}if(p instanceof Boolean){const O=new Boolean(p.valueOf());return T.set(p,O),m(O,p,C,T,E),O}if(p instanceof Number){const O=new Number(p.valueOf());return T.set(p,O),m(O,p,C,T,E),O}if(p instanceof String){const O=new String(p.valueOf());return T.set(p,O),m(O,p,C,T,E),O}if(typeof p=="object"&&x(p)){const O=Object.create(Object.getPrototypeOf(p));return T.set(p,O),m(O,p,C,T,E),O}return p}function m(p,v,C=p,T,E){const k=[...Object.keys(v),...t.getSymbols(v)];for(let O=0;O<k.length;O++){const M=k[O],L=Object.getOwnPropertyDescriptor(p,M);(L==null||L.writable)&&(p[M]=f(v[M],M,C,T,E))}}function x(p){switch(s.getTag(p)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=u,e.cloneDeepWithImpl=f,e.copyProperties=m})($b)),$b}var x5;function eK(){return x5||(x5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UP();function s(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=s})(Vb)),Vb}var p5;function tK(){return p5||(p5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LP(),s=eK();function n(a){return a=s.cloneDeep(a),l=>t.isMatch(l,a)}e.matches=n})(Rb)),Rb}var Xb={},Wb={},Kb={},y5;function rK(){return y5||(y5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UP(),s=FP();function n(a,l){return t.cloneDeepWith(a,(u,f,m,x)=>{const p=l?.(u,f,m,x);if(p!==void 0)return p;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case s.numberTag:case s.stringTag:case s.booleanTag:{const v=new a.constructor(a?.valueOf());return t.copyProperties(v,a),v}case s.argumentsTag:{const v={};return t.copyProperties(v,a),v.length=a.length,v[Symbol.iterator]=a[Symbol.iterator],v}default:return}})}e.cloneDeepWith=n})(Kb)),Kb}var b5;function sK(){return b5||(b5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rK();function s(n){return t.cloneDeepWith(n)}e.cloneDeep=s})(Wb)),Wb}var Zb={},Qb={},v5;function zP(){return v5||(v5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function s(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=s})(Qb)),Qb}var Jb={},N5;function nK(){return N5||(N5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BP();function s(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=s})(Jb)),Jb}var w5;function aK(){return w5||(w5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TP(),s=zP(),n=nK(),a=Kw();function l(u,f){let m;if(Array.isArray(f)?m=f:typeof f=="string"&&t.isDeepKey(f)&&u?.[f]==null?m=a.toPath(f):m=[f],m.length===0)return!1;let x=u;for(let p=0;p<m.length;p++){const v=m[p];if((x==null||!Object.hasOwn(x,v))&&!((Array.isArray(x)||n.isArguments(x))&&s.isIndex(v)&&v<x.length))return!1;x=x[v]}return!0}e.has=l})(Zb)),Zb}var j5;function iK(){return j5||(j5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LP(),s=Ww(),n=sK(),a=Zw(),l=aK();function u(f,m){switch(typeof f){case"object":{Object.is(f?.valueOf(),-0)&&(f="-0");break}case"number":{f=s.toKey(f);break}}return m=n.cloneDeep(m),function(x){const p=a.get(x,f);return p===void 0?l.has(x,f):m===void 0?p===void 0:t.isMatch(p,m)}}e.matchesProperty=u})(Xb)),Xb}var S5;function lK(){return S5||(S5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PP(),s=KW(),n=tK(),a=iK();function l(u){if(u==null)return t.identity;switch(typeof u){case"function":return u;case"object":return Array.isArray(u)&&u.length===2?a.matchesProperty(u[0],u[1]):n.matches(u);case"string":case"symbol":case"number":return s.property(u)}}e.iteratee=l})(Ib)),Ib}var C5;function oK(){return C5||(C5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GW(),s=PP(),n=WW(),a=lK();function l(u,f=s.identity){return n.isArrayLikeObject(u)?t.uniqBy(Array.from(u),a.iteratee(f)):[]}e.uniqBy=l})(Eb)),Eb}var ev,A5;function cK(){return A5||(A5=1,ev=oK().uniqBy),ev}var uK=cK();const E5=Vi(uK);function VP(e,t,s){return t===!0?E5(e,s):typeof t=="function"?E5(e,t):e}var tv={exports:{}},rv={},sv={exports:{}},nv={};var T5;function dK(){if(T5)return nv;T5=1;var e=Nd();function t(v,C){return v===C&&(v!==0||1/v===1/C)||v!==v&&C!==C}var s=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,l=e.useLayoutEffect,u=e.useDebugValue;function f(v,C){var T=C(),E=n({inst:{value:T,getSnapshot:C}}),k=E[0].inst,O=E[1];return l(function(){k.value=T,k.getSnapshot=C,m(k)&&O({inst:k})},[v,T,C]),a(function(){return m(k)&&O({inst:k}),v(function(){m(k)&&O({inst:k})})},[v]),u(T),T}function m(v){var C=v.getSnapshot;v=v.value;try{var T=C();return!s(v,T)}catch{return!0}}function x(v,C){return C()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x:f;return nv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,nv}var O5;function hK(){return O5||(O5=1,sv.exports=dK()),sv.exports}var D5;function fK(){if(D5)return rv;D5=1;var e=Nd(),t=hK();function s(x,p){return x===p&&(x!==0||1/x===1/p)||x!==x&&p!==p}var n=typeof Object.is=="function"?Object.is:s,a=t.useSyncExternalStore,l=e.useRef,u=e.useEffect,f=e.useMemo,m=e.useDebugValue;return rv.useSyncExternalStoreWithSelector=function(x,p,v,C,T){var E=l(null);if(E.current===null){var k={hasValue:!1,value:null};E.current=k}else k=E.current;E=f(function(){function M(F){if(!L){if(L=!0,P=F,F=C(F),T!==void 0&&k.hasValue){var R=k.value;if(T(R,F))return H=R}return H=F}if(R=H,n(P,F))return R;var z=C(F);return T!==void 0&&T(R,z)?(P=F,R):(P=F,H=z)}var L=!1,P,H,B=v===void 0?null:v;return[function(){return M(p())},B===null?void 0:function(){return M(B())}]},[p,v,C,T]);var O=a(x,E[0],E[1]);return u(function(){k.hasValue=!0,k.value=O},[O]),m(O),O},rv}var k5;function mK(){return k5||(k5=1,tv.exports=fK()),tv.exports}var gK=mK(),ej=w.createContext(null),xK=e=>e,Ss=()=>{var e=w.useContext(ej);return e?e.store.dispatch:xK},_g=()=>{},pK=()=>_g,yK=(e,t)=>e===t;function Bt(e){var t=w.useContext(ej);return gK.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:pK,t?t.store.getState:_g,t?t.store.getState:_g,t?e:_g,yK)}function bK(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function vK(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function NK(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(s=>typeof s=="function")){const s=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${s}]`)}}var _5=e=>Array.isArray(e)?e:[e];function wK(e){const t=Array.isArray(e[0])?e[0]:e;return NK(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function jK(e,t){const s=[],{length:n}=e;for(let a=0;a<n;a++)s.push(e[a].apply(null,t));return s}var SK=class{constructor(e){this.value=e}deref(){return this.value}},CK=typeof WeakRef<"u"?WeakRef:SK,AK=0,P5=1;function Fm(){return{s:AK,v:void 0,o:null,p:null}}function $P(e,t={}){let s=Fm();const{resultEqualityCheck:n}=t;let a,l=0;function u(){let f=s;const{length:m}=arguments;for(let v=0,C=m;v<C;v++){const T=arguments[v];if(typeof T=="function"||typeof T=="object"&&T!==null){let E=f.o;E===null&&(f.o=E=new WeakMap);const k=E.get(T);k===void 0?(f=Fm(),E.set(T,f)):f=k}else{let E=f.p;E===null&&(f.p=E=new Map);const k=E.get(T);k===void 0?(f=Fm(),E.set(T,f)):f=k}}const x=f;let p;if(f.s===P5)p=f.v;else if(p=e.apply(null,arguments),l++,n){const v=a?.deref?.()??a;v!=null&&n(v,p)&&(p=v,l!==0&&l--),a=typeof p=="object"&&p!==null||typeof p=="function"?new CK(p):p}return x.s=P5,x.v=p,p}return u.clearCache=()=>{s=Fm(),u.resetResultsCount()},u.resultsCount=()=>l,u.resetResultsCount=()=>{l=0},u}function EK(e,...t){const s=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let l=0,u=0,f,m={},x=a.pop();typeof x=="object"&&(m=x,x=a.pop()),bK(x,`createSelector expects an output function after the inputs, but received: [${typeof x}]`);const p={...s,...m},{memoize:v,memoizeOptions:C=[],argsMemoize:T=$P,argsMemoizeOptions:E=[]}=p,k=_5(C),O=_5(E),M=wK(a),L=v(function(){return l++,x.apply(null,arguments)},...k),P=T(function(){u++;const B=jK(M,arguments);return f=L.apply(null,B),f},...O);return Object.assign(P,{resultFunc:x,memoizedResultFunc:L,dependencies:M,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>f,recomputations:()=>l,resetRecomputations:()=>{l=0},memoize:v,argsMemoize:T})};return Object.assign(n,{withTypes:()=>n}),n}var Ie=EK($P),TK=Object.assign((e,t=Ie)=>{vK(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const s=Object.keys(e),n=s.map(l=>e[l]);return t(n,(...l)=>l.reduce((u,f,m)=>(u[s[m]]=f,u),{}))},{withTypes:()=>TK}),av={},iv={},lv={},I5;function OK(){return I5||(I5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const s=(n,a,l)=>{if(n!==a){const u=t(n),f=t(a);if(u===f&&u===0){if(n<a)return l==="desc"?1:-1;if(n>a)return l==="desc"?-1:1}return l==="desc"?f-u:u-f}return 0};e.compareValues=s})(lv)),lv}var ov={},cv={},M5;function qP(){return M5||(M5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="symbol"||s instanceof Symbol}e.isSymbol=t})(cv)),cv}var R5;function DK(){return R5||(R5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qP(),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(l,u){return Array.isArray(l)?!1:typeof l=="number"||typeof l=="boolean"||l==null||t.isSymbol(l)?!0:typeof l=="string"&&(n.test(l)||!s.test(l))||u!=null&&Object.hasOwn(u,l)}e.isKey=a})(ov)),ov}var L5;function kK(){return L5||(L5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OK(),s=DK(),n=Kw();function a(l,u,f,m){if(l==null)return[];f=m?void 0:f,Array.isArray(l)||(l=Object.values(l)),Array.isArray(u)||(u=u==null?[null]:[u]),u.length===0&&(u=[null]),Array.isArray(f)||(f=f==null?[]:[f]),f=f.map(T=>String(T));const x=(T,E)=>{let k=T;for(let O=0;O<E.length&&k!=null;++O)k=k[E[O]];return k},p=(T,E)=>E==null||T==null?E:typeof T=="object"&&"key"in T?Object.hasOwn(E,T.key)?E[T.key]:x(E,T.path):typeof T=="function"?T(E):Array.isArray(T)?x(E,T):typeof E=="object"?E[T]:E,v=u.map(T=>(Array.isArray(T)&&T.length===1&&(T=T[0]),T==null||typeof T=="function"||Array.isArray(T)||s.isKey(T)?T:{key:T,path:n.toPath(T)}));return l.map(T=>({original:T,criteria:v.map(E=>p(E,T))})).slice().sort((T,E)=>{for(let k=0;k<v.length;k++){const O=t.compareValues(T.criteria[k],E.criteria[k],f[k]);if(O!==0)return O}return 0}).map(T=>T.original)}e.orderBy=a})(iv)),iv}var uv={},B5;function _K(){return B5||(B5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s,n=1){const a=[],l=Math.floor(n),u=(f,m)=>{for(let x=0;x<f.length;x++){const p=f[x];Array.isArray(p)&&m<l?u(p,m+1):a.push(p)}};return u(s,0),a}e.flatten=t})(uv)),uv}var dv={},F5;function HP(){return F5||(F5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zP(),s=Jw(),n=IP(),a=RP();function l(u,f,m){return n.isObject(m)&&(typeof f=="number"&&s.isArrayLike(m)&&t.isIndex(f)&&f<m.length||typeof f=="string"&&f in m)?a.eq(m[f],u):!1}e.isIterateeCall=l})(dv)),dv}var U5;function PK(){return U5||(U5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kK(),s=_K(),n=HP();function a(l,...u){const f=u.length;return f>1&&n.isIterateeCall(l,u[0],u[1])?u=[]:f>2&&n.isIterateeCall(u[0],u[1],u[2])&&(u=[u[0]]),t.orderBy(l,s.flatten(u),["asc"])}e.sortBy=a})(av)),av}var hv,z5;function IK(){return z5||(z5=1,hv=PK().sortBy),hv}var MK=IK();const fp=Vi(MK);var GP=e=>e.legend.settings,RK=e=>e.legend.size,LK=e=>e.legend.payload,BK=Ie([LK,GP],(e,t)=>{var{itemSorter:s}=t,n=e.flat(1);return s?fp(n,s):n});function FK(){return Bt(BK)}var Um=1;function YP(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,s]=w.useState({height:0,left:0,top:0,width:0}),n=w.useCallback(a=>{if(a!=null){var l=a.getBoundingClientRect(),u={height:l.height,left:l.left,top:l.top,width:l.width};(Math.abs(u.height-t.height)>Um||Math.abs(u.left-t.left)>Um||Math.abs(u.top-t.top)>Um||Math.abs(u.width-t.width)>Um)&&s({height:u.height,left:u.left,top:u.top,width:u.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function hn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var UK=typeof Symbol=="function"&&Symbol.observable||"@@observable",V5=UK,fv=()=>Math.random().toString(36).substring(7).split("").join("."),zK={INIT:`@@redux/INIT${fv()}`,REPLACE:`@@redux/REPLACE${fv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${fv()}`},lx=zK;function tj(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function XP(e,t,s){if(typeof e!="function")throw new Error(hn(2));if(typeof t=="function"&&typeof s=="function"||typeof s=="function"&&typeof arguments[3]=="function")throw new Error(hn(0));if(typeof t=="function"&&typeof s>"u"&&(s=t,t=void 0),typeof s<"u"){if(typeof s!="function")throw new Error(hn(1));return s(XP)(e,t)}let n=e,a=t,l=new Map,u=l,f=0,m=!1;function x(){u===l&&(u=new Map,l.forEach((O,M)=>{u.set(M,O)}))}function p(){if(m)throw new Error(hn(3));return a}function v(O){if(typeof O!="function")throw new Error(hn(4));if(m)throw new Error(hn(5));let M=!0;x();const L=f++;return u.set(L,O),function(){if(M){if(m)throw new Error(hn(6));M=!1,x(),u.delete(L),l=null}}}function C(O){if(!tj(O))throw new Error(hn(7));if(typeof O.type>"u")throw new Error(hn(8));if(typeof O.type!="string")throw new Error(hn(17));if(m)throw new Error(hn(9));try{m=!0,a=n(a,O)}finally{m=!1}return(l=u).forEach(L=>{L()}),O}function T(O){if(typeof O!="function")throw new Error(hn(10));n=O,C({type:lx.REPLACE})}function E(){const O=v;return{subscribe(M){if(typeof M!="object"||M===null)throw new Error(hn(11));function L(){const H=M;H.next&&H.next(p())}return L(),{unsubscribe:O(L)}},[V5](){return this}}}return C({type:lx.INIT}),{dispatch:C,subscribe:v,getState:p,replaceReducer:T,[V5]:E}}function VK(e){Object.keys(e).forEach(t=>{const s=e[t];if(typeof s(void 0,{type:lx.INIT})>"u")throw new Error(hn(12));if(typeof s(void 0,{type:lx.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(hn(13))})}function WP(e){const t=Object.keys(e),s={};for(let l=0;l<t.length;l++){const u=t[l];typeof e[u]=="function"&&(s[u]=e[u])}const n=Object.keys(s);let a;try{VK(s)}catch(l){a=l}return function(u={},f){if(a)throw a;let m=!1;const x={};for(let p=0;p<n.length;p++){const v=n[p],C=s[v],T=u[v],E=C(T,f);if(typeof E>"u")throw f&&f.type,new Error(hn(14));x[v]=E,m=m||E!==T}return m=m||n.length!==Object.keys(u).length,m?x:u}}function ox(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,s)=>(...n)=>t(s(...n)))}function $K(...e){return t=>(s,n)=>{const a=t(s,n);let l=()=>{throw new Error(hn(15))};const u={getState:a.getState,dispatch:(m,...x)=>l(m,...x)},f=e.map(m=>m(u));return l=ox(...f)(a.dispatch),{...a,dispatch:l}}}function KP(e){return tj(e)&&"type"in e&&typeof e.type=="string"}var ZP=Symbol.for("immer-nothing"),$5=Symbol.for("immer-draftable"),Tn=Symbol.for("immer-state");function oi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var da=Object,fd=da.getPrototypeOf,cx="constructor",mp="prototype",K2="configurable",ux="enumerable",Pg="writable",vf="value",Tl=e=>!!e&&!!e[Tn];function mi(e){return e?QP(e)||gp(e)||!!e[$5]||!!e[cx]?.[$5]||xp(e)||pp(e):!1}var qK=da[mp][cx].toString(),q5=new WeakMap;function QP(e){if(!e||!rj(e))return!1;const t=fd(e);if(t===null||t===da[mp])return!0;const s=da.hasOwnProperty.call(t,cx)&&t[cx];if(s===Object)return!0;if(!Vu(s))return!1;let n=q5.get(s);return n===void 0&&(n=Function.toString.call(s),q5.set(s,n)),n===qK}function Xf(e,t,s=!0){Wf(e)===0?(s?Reflect.ownKeys(e):da.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function Wf(e){const t=e[Tn];return t?t.type_:gp(e)?1:xp(e)?2:pp(e)?3:0}var H5=(e,t,s=Wf(e))=>s===2?e.has(t):da[mp].hasOwnProperty.call(e,t),Z2=(e,t,s=Wf(e))=>s===2?e.get(t):e[t],dx=(e,t,s,n=Wf(e))=>{n===2?e.set(t,s):n===3?e.add(s):e[t]=s};function HK(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var gp=Array.isArray,xp=e=>e instanceof Map,pp=e=>e instanceof Set,rj=e=>typeof e=="object",Vu=e=>typeof e=="function",mv=e=>typeof e=="boolean",ml=e=>e.copy_||e.base_,sj=e=>e.modified_?e.copy_:e.base_;function Q2(e,t){if(xp(e))return new Map(e);if(pp(e))return new Set(e);if(gp(e))return Array[mp].slice.call(e);const s=QP(e);if(t===!0||t==="class_only"&&!s){const n=da.getOwnPropertyDescriptors(e);delete n[Tn];let a=Reflect.ownKeys(n);for(let l=0;l<a.length;l++){const u=a[l],f=n[u];f[Pg]===!1&&(f[Pg]=!0,f[K2]=!0),(f.get||f.set)&&(n[u]={[K2]:!0,[Pg]:!0,[ux]:f[ux],[vf]:e[u]})}return da.create(fd(e),n)}else{const n=fd(e);if(n!==null&&s)return{...e};const a=da.create(n);return da.assign(a,e)}}function nj(e,t=!1){return yp(e)||Tl(e)||!mi(e)||(Wf(e)>1&&da.defineProperties(e,{set:zm,add:zm,clear:zm,delete:zm}),da.freeze(e),t&&Xf(e,(s,n)=>{nj(n,!0)},!1)),e}function GK(){oi(2)}var zm={[vf]:GK};function yp(e){return e===null||!rj(e)?!0:da.isFrozen(e)}var hx="MapSet",J2="Patches",JP={};function md(e){const t=JP[e];return t||oi(0,e),t}var YK=e=>!!JP[e],Nf,eI=()=>Nf,XK=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:YK(hx)?md(hx):void 0});function G5(e,t){t&&(e.patchPlugin_=md(J2),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function eN(e){tN(e),e.drafts_.forEach(WK),e.drafts_=null}function tN(e){e===Nf&&(Nf=e.parent_)}var Y5=e=>Nf=XK(Nf,e);function WK(e){const t=e[Tn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function X5(e,t){t.unfinalizedDrafts_=t.drafts_.length;const s=t.drafts_[0];if(e!==void 0&&e!==s){s[Tn].modified_&&(eN(t),oi(4)),mi(e)&&(e=W5(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(s[Tn].base_,e,t)}else e=W5(t,s);return KK(t,e,!0),eN(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ZP?e:void 0}function W5(e,t){if(yp(t))return t;const s=t[Tn];if(!s)return aj(t,e.handledSet_,e);if(!bp(s,e))return t;if(!s.modified_)return s.base_;if(!s.finalized_){const{callbacks_:n}=s;if(n)for(;n.length>0;)n.pop()(e);sI(s,e)}return s.copy_}function KK(e,t,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&nj(t,s)}function tI(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var bp=(e,t)=>e.scope_===t,ZK=[];function rI(e,t,s,n){const a=ml(e),l=e.type_;if(n!==void 0&&Z2(a,n,l)===t){dx(a,n,s,l);return}if(!e.draftLocations_){const f=e.draftLocations_=new Map;Xf(a,(m,x)=>{if(Tl(x)){const p=f.get(x)||[];p.push(m),f.set(x,p)}})}const u=e.draftLocations_.get(t)??ZK;for(const f of u)dx(a,f,s,l)}function QK(e,t,s){e.callbacks_.push(function(a){const l=t;if(!l||!bp(l,a))return;a.mapSetPlugin_?.fixSetContents(l);const u=sj(l);rI(e,l.draft_??l,u,s),sI(l,a)})}function sI(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=t;if(n){const a=n.getPath(e);a&&n.generatePatches_(e,a,t)}tI(e)}}function JK(e,t,s){const{scope_:n}=e;if(Tl(s)){const a=s[Tn];bp(a,n)&&a.callbacks_.push(function(){Ig(e);const u=sj(a);rI(e,s,u,t)})}else mi(s)&&e.callbacks_.push(function(){const l=ml(e);Z2(l,t,e.type_)===s&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&aj(Z2(e.copy_,t,e.type_),n.handledSet_,n)})}function aj(e,t,s){return!s.immer_.autoFreeze_&&s.unfinalizedDrafts_<1||Tl(e)||t.has(e)||!mi(e)||yp(e)||(t.add(e),Xf(e,(n,a)=>{if(Tl(a)){const l=a[Tn];if(bp(l,s)){const u=sj(l);dx(e,n,u,e.type_),tI(l)}}else mi(a)&&aj(a,t,s)})),e}function eZ(e,t){const s=gp(e),n={type_:s?1:0,scope_:t?t.scope_:eI(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,l=ij;s&&(a=[n],l=wf);const{revoke:u,proxy:f}=Proxy.revocable(a,l);return n.draft_=f,n.revoke_=u,[f,n]}var ij={get(e,t){if(t===Tn)return e;const s=ml(e);if(!H5(s,t,e.type_))return tZ(e,s,t);const n=s[t];if(e.finalized_||!mi(n))return n;if(n===gv(e.base_,t)){Ig(e);const a=e.type_===1?+t:t,l=sN(e.scope_,n,e,a);return e.copy_[a]=l}return n},has(e,t){return t in ml(e)},ownKeys(e){return Reflect.ownKeys(ml(e))},set(e,t,s){const n=nI(ml(e),t);if(n?.set)return n.set.call(e.draft_,s),!0;if(!e.modified_){const a=gv(ml(e),t),l=a?.[Tn];if(l&&l.base_===s)return e.copy_[t]=s,e.assigned_.set(t,!1),!0;if(HK(s,a)&&(s!==void 0||H5(e.base_,t,e.type_)))return!0;Ig(e),rN(e)}return e.copy_[t]===s&&(s!==void 0||t in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=s,e.assigned_.set(t,!0),JK(e,t,s)),!0},deleteProperty(e,t){return Ig(e),gv(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),rN(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const s=ml(e),n=Reflect.getOwnPropertyDescriptor(s,t);return n&&{[Pg]:!0,[K2]:e.type_!==1||t!=="length",[ux]:n[ux],[vf]:s[t]}},defineProperty(){oi(11)},getPrototypeOf(e){return fd(e.base_)},setPrototypeOf(){oi(12)}},wf={};Xf(ij,(e,t)=>{wf[e]=function(){const s=arguments;return s[0]=s[0][0],t.apply(this,s)}});wf.deleteProperty=function(e,t){return wf.set.call(this,e,t,void 0)};wf.set=function(e,t,s){return ij.set.call(this,e[0],t,s,e[0])};function gv(e,t){const s=e[Tn];return(s?ml(s):e)[t]}function tZ(e,t,s){const n=nI(t,s);return n?vf in n?n[vf]:n.get?.call(e.draft_):void 0}function nI(e,t){if(!(t in e))return;let s=fd(e);for(;s;){const n=Object.getOwnPropertyDescriptor(s,t);if(n)return n;s=fd(s)}}function rN(e){e.modified_||(e.modified_=!0,e.parent_&&rN(e.parent_))}function Ig(e){e.copy_||(e.assigned_=new Map,e.copy_=Q2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var rZ=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(s,n,a)=>{if(Vu(s)&&!Vu(n)){const u=n;n=s;const f=this;return function(x=u,...p){return f.produce(x,v=>n.call(this,v,...p))}}Vu(n)||oi(6),a!==void 0&&!Vu(a)&&oi(7);let l;if(mi(s)){const u=Y5(this),f=sN(u,s,void 0);let m=!0;try{l=n(f),m=!1}finally{m?eN(u):tN(u)}return G5(u,a),X5(l,u)}else if(!s||!rj(s)){if(l=n(s),l===void 0&&(l=s),l===ZP&&(l=void 0),this.autoFreeze_&&nj(l,!0),a){const u=[],f=[];md(J2).generateReplacementPatches_(s,l,{patches_:u,inversePatches_:f}),a(u,f)}return l}else oi(1,s)},this.produceWithPatches=(s,n)=>{if(Vu(s))return(f,...m)=>this.produceWithPatches(f,x=>s(x,...m));let a,l;return[this.produce(s,n,(f,m)=>{a=f,l=m}),a,l]},mv(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),mv(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),mv(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){mi(t)||oi(8),Tl(t)&&(t=hi(t));const s=Y5(this),n=sN(s,t,void 0);return n[Tn].isManual_=!0,tN(s),n}finishDraft(t,s){const n=t&&t[Tn];(!n||!n.isManual_)&&oi(9);const{scope_:a}=n;return G5(a,s),X5(void 0,a)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,s){let n;for(n=s.length-1;n>=0;n--){const l=s[n];if(l.path.length===0&&l.op==="replace"){t=l.value;break}}n>-1&&(s=s.slice(n+1));const a=md(J2).applyPatches_;return Tl(t)?a(t,s):this.produce(t,l=>a(l,s))}};function sN(e,t,s,n){const[a,l]=xp(t)?md(hx).proxyMap_(t,s):pp(t)?md(hx).proxySet_(t,s):eZ(t,s);return(s?.scope_??eI()).drafts_.push(a),l.callbacks_=s?.callbacks_??[],l.key_=n,s&&n!==void 0?QK(s,l,n):l.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(l);const{patchPlugin_:x}=m;l.modified_&&x&&x.generatePatches_(l,[],m)}),a}function hi(e){return Tl(e)||oi(10,e),aI(e)}function aI(e){if(!mi(e)||yp(e))return e;const t=e[Tn];let s,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,s=Q2(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else s=Q2(e,!0);return Xf(s,(a,l)=>{dx(s,a,aI(l))},n),t&&(t.finalized_=!1),s}var sZ=new rZ,iI=sZ.produce;function lI(e){return({dispatch:s,getState:n})=>a=>l=>typeof l=="function"?l(s,n,e):a(l)}var nZ=lI(),aZ=lI,iZ=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ox:ox.apply(null,arguments)};function qa(e,t){function s(...n){if(t){let a=t(...n);if(!a)throw new Error(ma(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return s.toString=()=>`${e}`,s.type=e,s.match=n=>KP(n)&&n.type===e,s}var oI=class Qh extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Qh.prototype)}static get[Symbol.species](){return Qh}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Qh(...t[0].concat(this)):new Qh(...t.concat(this))}};function K5(e){return mi(e)?iI(e,()=>{}):e}function Vm(e,t,s){return e.has(t)?e.get(t):e.set(t,s(t)).get(t)}function lZ(e){return typeof e=="boolean"}var oZ=()=>function(t){const{thunk:s=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:l=!0}=t??{};let u=new oI;return s&&(lZ(s)?u.push(nZ):u.push(aZ(s.extraArgument))),u},cI="RTK_autoBatch",es=()=>e=>({payload:e,meta:{[cI]:!0}}),Z5=e=>t=>{setTimeout(t,e)},uI=(e={type:"raf"})=>t=>(...s)=>{const n=t(...s);let a=!0,l=!1,u=!1;const f=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Z5(10):e.type==="callback"?e.queueNotification:Z5(e.timeout),x=()=>{u=!1,l&&(l=!1,f.forEach(p=>p()))};return Object.assign({},n,{subscribe(p){const v=()=>a&&p(),C=n.subscribe(v);return f.add(p),()=>{C(),f.delete(p)}},dispatch(p){try{return a=!p?.meta?.[cI],l=!a,l&&(u||(u=!0,m(x))),n.dispatch(p)}finally{a=!0}}})},cZ=e=>function(s){const{autoBatch:n=!0}=s??{};let a=new oI(e);return n&&a.push(uI(typeof n=="object"?n:void 0)),a};function uZ(e){const t=oZ(),{reducer:s=void 0,middleware:n,devTools:a=!0,preloadedState:l=void 0,enhancers:u=void 0}=e||{};let f;if(typeof s=="function")f=s;else if(tj(s))f=WP(s);else throw new Error(ma(1));let m;typeof n=="function"?m=n(t):m=t();let x=ox;a&&(x=iZ({trace:!1,...typeof a=="object"&&a}));const p=$K(...m),v=cZ(p);let C=typeof u=="function"?u(v):v();const T=x(...C);return XP(f,l,T)}function dI(e){const t={},s=[];let n;const a={addCase(l,u){const f=typeof l=="string"?l:l.type;if(!f)throw new Error(ma(28));if(f in t)throw new Error(ma(29));return t[f]=u,a},addAsyncThunk(l,u){return u.pending&&(t[l.pending.type]=u.pending),u.rejected&&(t[l.rejected.type]=u.rejected),u.fulfilled&&(t[l.fulfilled.type]=u.fulfilled),u.settled&&s.push({matcher:l.settled,reducer:u.settled}),a},addMatcher(l,u){return s.push({matcher:l,reducer:u}),a},addDefaultCase(l){return n=l,a}};return e(a),[t,s,n]}function dZ(e){return typeof e=="function"}function hZ(e,t){let[s,n,a]=dI(t),l;if(dZ(e))l=()=>K5(e());else{const f=K5(e);l=()=>f}function u(f=l(),m){let x=[s[m.type],...n.filter(({matcher:p})=>p(m)).map(({reducer:p})=>p)];return x.filter(p=>!!p).length===0&&(x=[a]),x.reduce((p,v)=>{if(v)if(Tl(p)){const T=v(p,m);return T===void 0?p:T}else{if(mi(p))return iI(p,C=>v(C,m));{const C=v(p,m);if(C===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return C}}return p},f)}return u.getInitialState=l,u}var fZ="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",mZ=(e=21)=>{let t="",s=e;for(;s--;)t+=fZ[Math.random()*64|0];return t},gZ=Symbol.for("rtk-slice-createasyncthunk");function xZ(e,t){return`${e}/${t}`}function pZ({creators:e}={}){const t=e?.asyncThunk?.[gZ];return function(n){const{name:a,reducerPath:l=a}=n;if(!a)throw new Error(ma(11));const u=(typeof n.reducers=="function"?n.reducers(bZ()):n.reducers)||{},f=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},x={addCase(P,H){const B=typeof P=="string"?P:P.type;if(!B)throw new Error(ma(12));if(B in m.sliceCaseReducersByType)throw new Error(ma(13));return m.sliceCaseReducersByType[B]=H,x},addMatcher(P,H){return m.sliceMatchers.push({matcher:P,reducer:H}),x},exposeAction(P,H){return m.actionCreators[P]=H,x},exposeCaseReducer(P,H){return m.sliceCaseReducersByName[P]=H,x}};f.forEach(P=>{const H=u[P],B={reducerName:P,type:xZ(a,P),createNotation:typeof n.reducers=="function"};NZ(H)?jZ(B,H,x,t):vZ(B,H,x)});function p(){const[P={},H=[],B=void 0]=typeof n.extraReducers=="function"?dI(n.extraReducers):[n.extraReducers],F={...P,...m.sliceCaseReducersByType};return hZ(n.initialState,R=>{for(let z in F)R.addCase(z,F[z]);for(let z of m.sliceMatchers)R.addMatcher(z.matcher,z.reducer);for(let z of H)R.addMatcher(z.matcher,z.reducer);B&&R.addDefaultCase(B)})}const v=P=>P,C=new Map,T=new WeakMap;let E;function k(P,H){return E||(E=p()),E(P,H)}function O(){return E||(E=p()),E.getInitialState()}function M(P,H=!1){function B(R){let z=R[P];return typeof z>"u"&&H&&(z=Vm(T,B,O)),z}function F(R=v){const z=Vm(C,H,()=>new WeakMap);return Vm(z,R,()=>{const U={};for(const[Y,$]of Object.entries(n.selectors??{}))U[Y]=yZ($,R,()=>Vm(T,R,O),H);return U})}return{reducerPath:P,getSelectors:F,get selectors(){return F(B)},selectSlice:B}}const L={name:a,reducer:k,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:O,...M(l),injectInto(P,{reducerPath:H,...B}={}){const F=H??l;return P.inject({reducerPath:F,reducer:k},B),{...L,...M(F,!0)}}};return L}}function yZ(e,t,s,n){function a(l,...u){let f=t(l);return typeof f>"u"&&n&&(f=s()),e(f,...u)}return a.unwrapped=e,a}var Xn=pZ();function bZ(){function e(t,s){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...s}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...s){return t(...s)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,s){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:s}},asyncThunk:e}}function vZ({type:e,reducerName:t,createNotation:s},n,a){let l,u;if("reducer"in n){if(s&&!wZ(n))throw new Error(ma(17));l=n.reducer,u=n.prepare}else l=n;a.addCase(e,l).exposeCaseReducer(t,l).exposeAction(t,u?qa(e,u):qa(e))}function NZ(e){return e._reducerDefinitionType==="asyncThunk"}function wZ(e){return e._reducerDefinitionType==="reducerWithPrepare"}function jZ({type:e,reducerName:t},s,n,a){if(!a)throw new Error(ma(18));const{payloadCreator:l,fulfilled:u,pending:f,rejected:m,settled:x,options:p}=s,v=a(e,l,p);n.exposeAction(t,v),u&&n.addCase(v.fulfilled,u),f&&n.addCase(v.pending,f),m&&n.addCase(v.rejected,m),x&&n.addMatcher(v.settled,x),n.exposeCaseReducer(t,{fulfilled:u||$m,pending:f||$m,rejected:m||$m,settled:x||$m})}function $m(){}var SZ="task",hI="listener",fI="completed",lj="cancelled",CZ=`task-${lj}`,AZ=`task-${fI}`,nN=`${hI}-${lj}`,EZ=`${hI}-${fI}`,vp=class{constructor(e){this.code=e,this.message=`${SZ} ${lj} (reason: ${e})`}name="TaskAbortError";message},oj=(e,t)=>{if(typeof e!="function")throw new TypeError(ma(32))},fx=()=>{},mI=(e,t=fx)=>(e.catch(t),e),gI=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Lc=(e,t)=>{const s=e.signal;s.aborted||("reason"in s||Object.defineProperty(s,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Bc=e=>{if(e.aborted){const{reason:t}=e;throw new vp(t)}};function xI(e,t){let s=fx;return new Promise((n,a)=>{const l=()=>a(new vp(e.reason));if(e.aborted){l();return}s=gI(e,l),t.finally(()=>s()).then(n,a)}).finally(()=>{s=fx})}var TZ=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(s){return{status:s instanceof vp?"cancelled":"rejected",error:s}}finally{t?.()}},mx=e=>t=>mI(xI(e,t).then(s=>(Bc(e),s))),pI=e=>{const t=mx(e);return s=>t(new Promise(n=>setTimeout(n,s)))},{assign:ed}=Object,Q5={},Np="listenerMiddleware",OZ=(e,t)=>{const s=n=>gI(e,()=>Lc(n,e.reason));return(n,a)=>{oj(n);const l=new AbortController;s(l);const u=TZ(async()=>{Bc(e),Bc(l.signal);const f=await n({pause:mx(l.signal),delay:pI(l.signal),signal:l.signal});return Bc(l.signal),f},()=>Lc(l,AZ));return a?.autoJoin&&t.push(u.catch(fx)),{result:mx(e)(u),cancel(){Lc(l,CZ)}}}},DZ=(e,t)=>{const s=async(n,a)=>{Bc(t);let l=()=>{};const f=[new Promise((m,x)=>{let p=e({predicate:n,effect:(v,C)=>{C.unsubscribe(),m([v,C.getState(),C.getOriginalState()])}});l=()=>{p(),x()}})];a!=null&&f.push(new Promise(m=>setTimeout(m,a,null)));try{const m=await xI(t,Promise.race(f));return Bc(t),m}finally{l()}};return(n,a)=>mI(s(n,a))},yI=e=>{let{type:t,actionCreator:s,matcher:n,predicate:a,effect:l}=e;if(t)a=qa(t).match;else if(s)t=s.type,a=s.match;else if(n)a=n;else if(!a)throw new Error(ma(21));return oj(l),{predicate:a,type:t,effect:l}},bI=ed(e=>{const{type:t,predicate:s,effect:n}=yI(e);return{id:mZ(),effect:n,type:t,predicate:s,pending:new Set,unsubscribe:()=>{throw new Error(ma(22))}}},{withTypes:()=>bI}),J5=(e,t)=>{const{type:s,effect:n,predicate:a}=yI(t);return Array.from(e.values()).find(l=>(typeof s=="string"?l.type===s:l.predicate===a)&&l.effect===n)},aN=e=>{e.pending.forEach(t=>{Lc(t,nN)})},kZ=(e,t)=>()=>{for(const s of t.keys())aN(s);e.clear()},e6=(e,t,s)=>{try{e(t,s)}catch(n){setTimeout(()=>{throw n},0)}},vI=ed(qa(`${Np}/add`),{withTypes:()=>vI}),_Z=qa(`${Np}/removeAll`),NI=ed(qa(`${Np}/remove`),{withTypes:()=>NI}),PZ=(...e)=>{console.error(`${Np}/error`,...e)},Kf=(e={})=>{const t=new Map,s=new Map,n=T=>{const E=s.get(T)??0;s.set(T,E+1)},a=T=>{const E=s.get(T)??1;E===1?s.delete(T):s.set(T,E-1)},{extra:l,onError:u=PZ}=e;oj(u);const f=T=>(T.unsubscribe=()=>t.delete(T.id),t.set(T.id,T),E=>{T.unsubscribe(),E?.cancelActive&&aN(T)}),m=T=>{const E=J5(t,T)??bI(T);return f(E)};ed(m,{withTypes:()=>m});const x=T=>{const E=J5(t,T);return E&&(E.unsubscribe(),T.cancelActive&&aN(E)),!!E};ed(x,{withTypes:()=>x});const p=async(T,E,k,O)=>{const M=new AbortController,L=DZ(m,M.signal),P=[];try{T.pending.add(M),n(T),await Promise.resolve(T.effect(E,ed({},k,{getOriginalState:O,condition:(H,B)=>L(H,B).then(Boolean),take:L,delay:pI(M.signal),pause:mx(M.signal),extra:l,signal:M.signal,fork:OZ(M.signal,P),unsubscribe:T.unsubscribe,subscribe:()=>{t.set(T.id,T)},cancelActiveListeners:()=>{T.pending.forEach((H,B,F)=>{H!==M&&(Lc(H,nN),F.delete(H))})},cancel:()=>{Lc(M,nN),T.pending.delete(M)},throwIfCancelled:()=>{Bc(M.signal)}})))}catch(H){H instanceof vp||e6(u,H,{raisedBy:"effect"})}finally{await Promise.all(P),Lc(M,EZ),a(T),T.pending.delete(M)}},v=kZ(t,s);return{middleware:T=>E=>k=>{if(!KP(k))return E(k);if(vI.match(k))return m(k.payload);if(_Z.match(k)){v();return}if(NI.match(k))return x(k.payload);let O=T.getState();const M=()=>{if(O===Q5)throw new Error(ma(23));return O};let L;try{if(L=E(k),t.size>0){const P=T.getState(),H=Array.from(t.values());for(const B of H){let F=!1;try{F=B.predicate(k,P,O)}catch(R){F=!1,e6(u,R,{raisedBy:"predicate"})}F&&p(B,k,T,M)}}}finally{O=Q5}return L},startListening:m,stopListening:x,clearListeners:v}};function ma(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var IZ={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},wI=Xn({name:"chartLayout",initialState:IZ,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var s,n,a,l;e.margin.top=(s=t.payload.top)!==null&&s!==void 0?s:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(l=t.payload.left)!==null&&l!==void 0?l:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:MZ,setLayout:RZ,setChartSize:LZ,setScale:BZ}=wI.actions,FZ=wI.reducer;function jI(e,t,s){return Array.isArray(e)&&e&&t+s!==0?e.slice(t,s+1):e}function t6(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Wu(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?t6(Object(s),!0).forEach(function(n){UZ(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):t6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function UZ(e,t,s){return(t=zZ(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function zZ(e){var t=VZ(e,"string");return typeof t=="symbol"?t:t+""}function VZ(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ws(e,t,s){return xa(e)||xa(t)?s:El(t)?yf(e,t,s):typeof t=="function"?t(e):s}var $Z=(e,t,s)=>{if(t&&s){var{width:n,height:a}=s,{align:l,verticalAlign:u,layout:f}=t;if((f==="vertical"||f==="horizontal"&&u==="middle")&&l!=="center"&&It(e[l]))return Wu(Wu({},e),{},{[l]:e[l]+(n||0)});if((f==="horizontal"||f==="vertical"&&l==="center")&&u!=="middle"&&It(e[u]))return Wu(Wu({},e),{},{[u]:e[u]+(a||0)})}return e},Yc=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",r6=1e-4,qZ=e=>{var t=e.domain();if(!(!t||t.length<=2)){var s=t.length,n=e.range(),a=Math.min(n[0],n[1])-r6,l=Math.max(n[0],n[1])+r6,u=e(t[0]),f=e(t[s-1]);(u<a||u>l||f<a||f>l)&&e.domain([t[0],t[s-1]])}},HZ=e=>{var t=e.length;if(!(t<=0))for(var s=0,n=e[0].length;s<n;++s)for(var a=0,l=0,u=0;u<t;++u){var f=Cl(e[u][s][1])?e[u][s][0]:e[u][s][1];f>=0?(e[u][s][0]=a,e[u][s][1]=a+f,a=e[u][s][1]):(e[u][s][0]=l,e[u][s][1]=l+f,l=e[u][s][1])}},GZ=e=>{var t=e.length;if(!(t<=0))for(var s=0,n=e[0].length;s<n;++s)for(var a=0,l=0;l<t;++l){var u=Cl(e[l][s][1])?e[l][s][0]:e[l][s][1];u>=0?(e[l][s][0]=a,e[l][s][1]=a+u,a=e[l][s][1]):(e[l][s][0]=0,e[l][s][1]=0)}},YZ={sign:HZ,expand:hW,none:hd,silhouette:fW,wiggle:mW,positive:GZ},XZ=(e,t,s)=>{var n=YZ[s],a=dW().keys(t).value((l,u)=>Number(ws(l,u,0))).order(X2).offset(n);return a(e)},WZ=e=>{var t=e.flat(2).filter(It);return[Math.min(...t),Math.max(...t)]},KZ=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],ZZ=(e,t,s)=>{if(e!=null)return KZ(Object.keys(e).reduce((n,a)=>{var l=e[a],{stackedData:u}=l,f=u.reduce((m,x)=>{var p=jI(x,t,s),v=WZ(p);return[Math.min(m[0],v[0]),Math.max(m[1],v[1])]},[1/0,-1/0]);return[Math.min(f[0],n[0]),Math.max(f[1],n[1])]},[1/0,-1/0]))},s6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,n6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,a6=(e,t,s)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();return n}if(e&&t&&t.length>=2){for(var a=fp(t,p=>p.coordinate),l=1/0,u=1,f=a.length;u<f;u++){var m=a[u],x=a[u-1];l=Math.min((m.coordinate||0)-(x.coordinate||0),l)}return l===1/0?0:l}return s?void 0:0};function i6(e){var{tooltipEntrySettings:t,dataKey:s,payload:n,value:a,name:l}=e;return Wu(Wu({},t),{},{dataKey:s,payload:n,value:a,name:l})}function SI(e,t){if(e)return String(e);if(typeof t=="string")return t}var QZ=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},JZ=(e,t)=>t==="centric"?e.angle:e.radius,Pl=e=>e.layout.width,Il=e=>e.layout.height,eQ=e=>e.layout.scale,CI=e=>e.layout.margin,wp=Ie(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),jp=Ie(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),AI="data-recharts-item-index",EI="data-recharts-item-data-key",Zf=60;function l6(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function qm(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?l6(Object(s),!0).forEach(function(n){tQ(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function tQ(e,t,s){return(t=rQ(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function rQ(e){var t=sQ(e,"string");return typeof t=="symbol"?t:t+""}function sQ(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nQ=e=>e.brush.height;function aQ(e){var t=jp(e);return t.reduce((s,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Zf;return s+a}return s},0)}function iQ(e){var t=jp(e);return t.reduce((s,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Zf;return s+a}return s},0)}function lQ(e){var t=wp(e);return t.reduce((s,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?s+n.height:s,0)}function oQ(e){var t=wp(e);return t.reduce((s,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?s+n.height:s,0)}var rn=Ie([Pl,Il,CI,nQ,aQ,iQ,lQ,oQ,GP,RK],(e,t,s,n,a,l,u,f,m,x)=>{var p={left:(s.left||0)+a,right:(s.right||0)+l},v={top:(s.top||0)+u,bottom:(s.bottom||0)+f},C=qm(qm({},v),p),T=C.bottom;C.bottom+=n,C=$Z(C,m,x);var E=e-C.left-C.right,k=t-C.top-C.bottom;return qm(qm({brushBottom:T},C),{},{width:Math.max(E,0),height:Math.max(k,0)})}),cQ=Ie(rn,e=>({x:e.left,y:e.top,width:e.width,height:e.height}));Ie(Pl,Il,(e,t)=>({x:0,y:0,width:e,height:t}));var uQ=w.createContext(null),qo=()=>w.useContext(uQ)!=null,Sp=e=>e.brush,Cp=Ie([Sp,rn,CI],(e,t,s)=>({height:e.height,x:It(e.x)?e.x:t.left,y:It(e.y)?e.y:t.top+t.height+t.brushBottom-(s?.bottom||0),width:It(e.width)?e.width:t.width})),xv={},pv={},yv={},o6;function dQ(){return o6||(o6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s,n,{signal:a,edges:l}={}){let u,f=null;const m=l!=null&&l.includes("leading"),x=l==null||l.includes("trailing"),p=()=>{f!==null&&(s.apply(u,f),u=void 0,f=null)},v=()=>{x&&p(),k()};let C=null;const T=()=>{C!=null&&clearTimeout(C),C=setTimeout(()=>{C=null,v()},n)},E=()=>{C!==null&&(clearTimeout(C),C=null)},k=()=>{E(),u=void 0,f=null},O=()=>{p()},M=function(...L){if(a?.aborted)return;u=this,f=L;const P=C==null;T(),m&&P&&p()};return M.schedule=T,M.cancel=k,M.flush=O,a?.addEventListener("abort",k,{once:!0}),M}e.debounce=t})(yv)),yv}var c6;function hQ(){return c6||(c6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dQ();function s(n,a=0,l={}){typeof l!="object"&&(l={});const{leading:u=!1,trailing:f=!0,maxWait:m}=l,x=Array(2);u&&(x[0]="leading"),f&&(x[1]="trailing");let p,v=null;const C=t.debounce(function(...k){p=n.apply(this,k),v=null},a,{edges:x}),T=function(...k){return m!=null&&(v===null&&(v=Date.now()),Date.now()-v>=m)?(p=n.apply(this,k),v=Date.now(),C.cancel(),C.schedule(),p):(C.apply(this,k),p)},E=()=>(C.flush(),p);return T.cancel=C.cancel,T.flush=E,T}e.debounce=s})(pv)),pv}var u6;function fQ(){return u6||(u6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hQ();function s(n,a=0,l={}){const{leading:u=!0,trailing:f=!0}=l;return t.debounce(n,a,{leading:u,maxWait:a,trailing:f})}e.throttle=s})(xv)),xv}var bv,d6;function mQ(){return d6||(d6=1,bv=fQ().throttle),bv}var gQ=mQ();const xQ=Vi(gQ);var h6=function(t,s){for(var n=arguments.length,a=new Array(n>2?n-2:0),l=2;l<n;l++)a[l-2]=arguments[l];if(typeof console<"u"&&console.warn&&(s===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(s===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=0;console.warn(s.replace(/%s/g,()=>a[u++]))}},TI=(e,t,s)=>{var{width:n="100%",height:a="100%",aspect:l,maxHeight:u}=s,f=Al(n)?e:Number(n),m=Al(a)?t:Number(a);return l&&l>0&&(f?m=f/l:m&&(f=m*l),u&&m!=null&&m>u&&(m=u)),{calculatedWidth:f,calculatedHeight:m}},pQ={width:0,height:0,overflow:"visible"},yQ={width:0,overflowX:"visible"},bQ={height:0,overflowY:"visible"},vQ={},NQ=e=>{var{width:t,height:s}=e,n=Al(t),a=Al(s);return n&&a?pQ:n?yQ:a?bQ:vQ};function wQ(e){var{width:t,height:s,aspect:n}=e,a=t,l=s;return a===void 0&&l===void 0?(a="100%",l="100%"):a===void 0?a=n&&n>0?void 0:"100%":l===void 0&&(l=n&&n>0?void 0:"100%"),{width:a,height:l}}function tn(e){return Number.isFinite(e)}function Uo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function iN(){return iN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},iN.apply(null,arguments)}function f6(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function m6(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?f6(Object(s),!0).forEach(function(n){jQ(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function jQ(e,t,s){return(t=SQ(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function SQ(e){var t=CQ(e,"string");return typeof t=="symbol"?t:t+""}function CQ(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OI=w.createContext({width:-1,height:-1});function AQ(e){return Uo(e.width)&&Uo(e.height)}function DI(e){var{children:t,width:s,height:n}=e,a=w.useMemo(()=>({width:s,height:n}),[s,n]);return AQ(a)?w.createElement(OI.Provider,{value:a},t):null}var cj=()=>w.useContext(OI),EQ=w.forwardRef((e,t)=>{var{aspect:s,initialDimension:n={width:-1,height:-1},width:a,height:l,minWidth:u=0,minHeight:f,maxHeight:m,children:x,debounce:p=0,id:v,className:C,onResize:T,style:E={}}=e,k=w.useRef(null),O=w.useRef();O.current=T,w.useImperativeHandle(t,()=>k.current);var[M,L]=w.useState({containerWidth:n.width,containerHeight:n.height}),P=w.useCallback((z,U)=>{L(Y=>{var $=Math.round(z),G=Math.round(U);return Y.containerWidth===$&&Y.containerHeight===G?Y:{containerWidth:$,containerHeight:G}})},[]);w.useEffect(()=>{if(k.current==null||typeof ResizeObserver>"u")return Yf;var z=G=>{var ee,{width:ce,height:se}=G[0].contentRect;P(ce,se),(ee=O.current)===null||ee===void 0||ee.call(O,ce,se)};p>0&&(z=xQ(z,p,{trailing:!0,leading:!1}));var U=new ResizeObserver(z),{width:Y,height:$}=k.current.getBoundingClientRect();return P(Y,$),U.observe(k.current),()=>{U.disconnect()}},[P,p]);var{containerWidth:H,containerHeight:B}=M;h6(!s||s>0,"The aspect(%s) must be greater than zero.",s);var{calculatedWidth:F,calculatedHeight:R}=TI(H,B,{width:a,height:l,aspect:s,maxHeight:m});return h6(F!=null&&F>0||R!=null&&R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,F,R,a,l,u,f,s),w.createElement("div",{id:v?"".concat(v):void 0,className:js("recharts-responsive-container",C),style:m6(m6({},E),{},{width:a,height:l,minWidth:u,minHeight:f,maxHeight:m}),ref:k},w.createElement("div",{style:NQ({width:a,height:l})},w.createElement(DI,{width:F,height:R},x)))}),lN=w.forwardRef((e,t)=>{var s=cj();if(Uo(s.width)&&Uo(s.height))return e.children;var{width:n,height:a}=wQ({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:l,calculatedHeight:u}=TI(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return It(l)&&It(u)?w.createElement(DI,{width:l,height:u},e.children):w.createElement(EQ,iN({},e,{width:n,height:a,ref:t}))});function kI(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Ap=()=>{var e,t=qo(),s=Bt(cQ),n=Bt(Cp),a=(e=Bt(Sp))===null||e===void 0?void 0:e.padding;return!t||!n||!a?s:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},TQ={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},OQ=()=>{var e;return(e=Bt(rn))!==null&&e!==void 0?e:TQ},_I=()=>Bt(Pl),PI=()=>Bt(Il),DQ=()=>Bt(e=>e.layout.margin),Vr=e=>e.layout.layoutType,uj=()=>Bt(Vr),kQ=()=>{var e=uj();return e!==void 0},Ep=e=>{var t=Ss(),s=qo(),{width:n,height:a}=e,l=cj(),u=n,f=a;return l&&(u=l.width>0?l.width:n,f=l.height>0?l.height:a),w.useEffect(()=>{!s&&Uo(u)&&Uo(f)&&t(LZ({width:u,height:f}))},[t,s,u,f]),null},II=Symbol.for("immer-nothing"),g6=Symbol.for("immer-draftable"),pa=Symbol.for("immer-state");function ci(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var jf=Object.getPrototypeOf;function gd(e){return!!e&&!!e[pa]}function $c(e){return e?MI(e)||Array.isArray(e)||!!e[g6]||!!e.constructor?.[g6]||Qf(e)||Op(e):!1}var _Q=Object.prototype.constructor.toString(),x6=new WeakMap;function MI(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const s=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(s===Object)return!0;if(typeof s!="function")return!1;let n=x6.get(s);return n===void 0&&(n=Function.toString.call(s),x6.set(s,n)),n===_Q}function gx(e,t,s=!0){Tp(e)===0?(s?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function Tp(e){const t=e[pa];return t?t.type_:Array.isArray(e)?1:Qf(e)?2:Op(e)?3:0}function oN(e,t){return Tp(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function RI(e,t,s){const n=Tp(e);n===2?e.set(t,s):n===3?e.add(s):e[t]=s}function PQ(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Qf(e){return e instanceof Map}function Op(e){return e instanceof Set}function Cc(e){return e.copy_||e.base_}function cN(e,t){if(Qf(e))return new Map(e);if(Op(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const s=MI(e);if(t===!0||t==="class_only"&&!s){const n=Object.getOwnPropertyDescriptors(e);delete n[pa];let a=Reflect.ownKeys(n);for(let l=0;l<a.length;l++){const u=a[l],f=n[u];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(n[u]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[u]})}return Object.create(jf(e),n)}else{const n=jf(e);if(n!==null&&s)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function dj(e,t=!1){return Dp(e)||gd(e)||!$c(e)||(Tp(e)>1&&Object.defineProperties(e,{set:Hm,add:Hm,clear:Hm,delete:Hm}),Object.freeze(e),t&&Object.values(e).forEach(s=>dj(s,!0))),e}function IQ(){ci(2)}var Hm={value:IQ};function Dp(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var MQ={};function qc(e){const t=MQ[e];return t||ci(0,e),t}var Sf;function LI(){return Sf}function RQ(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function p6(e,t){t&&(qc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function uN(e){dN(e),e.drafts_.forEach(LQ),e.drafts_=null}function dN(e){e===Sf&&(Sf=e.parent_)}function y6(e){return Sf=RQ(Sf,e)}function LQ(e){const t=e[pa];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function b6(e,t){t.unfinalizedDrafts_=t.drafts_.length;const s=t.drafts_[0];return e!==void 0&&e!==s?(s[pa].modified_&&(uN(t),ci(4)),$c(e)&&(e=xx(t,e),t.parent_||px(t,e)),t.patches_&&qc("Patches").generateReplacementPatches_(s[pa].base_,e,t.patches_,t.inversePatches_)):e=xx(t,s,[]),uN(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==II?e:void 0}function xx(e,t,s){if(Dp(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[pa];if(!a)return gx(t,(l,u)=>v6(e,a,t,l,u,s),n),t;if(a.scope_!==e)return t;if(!a.modified_)return px(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const l=a.copy_;let u=l,f=!1;a.type_===3&&(u=new Set(l),l.clear(),f=!0),gx(u,(m,x)=>v6(e,a,l,m,x,s,f),n),px(e,l,!1),s&&e.patches_&&qc("Patches").generatePatches_(a,s,e.patches_,e.inversePatches_)}return a.copy_}function v6(e,t,s,n,a,l,u){if(a==null||typeof a!="object"&&!u)return;const f=Dp(a);if(!(f&&!u)){if(gd(a)){const m=l&&t&&t.type_!==3&&!oN(t.assigned_,n)?l.concat(n):void 0,x=xx(e,a,m);if(RI(s,n,x),gd(x))e.canAutoFreeze_=!1;else return}else u&&s.add(a);if($c(a)&&!f){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&f)return;xx(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Qf(s)?s.has(n):Object.prototype.propertyIsEnumerable.call(s,n))&&px(e,a)}}}function px(e,t,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&dj(t,s)}function BQ(e,t){const s=Array.isArray(e),n={type_:s?1:0,scope_:t?t.scope_:LI(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,l=hj;s&&(a=[n],l=Cf);const{revoke:u,proxy:f}=Proxy.revocable(a,l);return n.draft_=f,n.revoke_=u,f}var hj={get(e,t){if(t===pa)return e;const s=Cc(e);if(!oN(s,t))return FQ(e,s,t);const n=s[t];return e.finalized_||!$c(n)?n:n===vv(e.base_,t)?(Nv(e),e.copy_[t]=fN(n,e)):n},has(e,t){return t in Cc(e)},ownKeys(e){return Reflect.ownKeys(Cc(e))},set(e,t,s){const n=BI(Cc(e),t);if(n?.set)return n.set.call(e.draft_,s),!0;if(!e.modified_){const a=vv(Cc(e),t),l=a?.[pa];if(l&&l.base_===s)return e.copy_[t]=s,e.assigned_[t]=!1,!0;if(PQ(s,a)&&(s!==void 0||oN(e.base_,t)))return!0;Nv(e),hN(e)}return e.copy_[t]===s&&(s!==void 0||t in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=s,e.assigned_[t]=!0),!0},deleteProperty(e,t){return vv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Nv(e),hN(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const s=Cc(e),n=Reflect.getOwnPropertyDescriptor(s,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:s[t]}},defineProperty(){ci(11)},getPrototypeOf(e){return jf(e.base_)},setPrototypeOf(){ci(12)}},Cf={};gx(hj,(e,t)=>{Cf[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Cf.deleteProperty=function(e,t){return Cf.set.call(this,e,t,void 0)};Cf.set=function(e,t,s){return hj.set.call(this,e[0],t,s,e[0])};function vv(e,t){const s=e[pa];return(s?Cc(s):e)[t]}function FQ(e,t,s){const n=BI(t,s);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function BI(e,t){if(!(t in e))return;let s=jf(e);for(;s;){const n=Object.getOwnPropertyDescriptor(s,t);if(n)return n;s=jf(s)}}function hN(e){e.modified_||(e.modified_=!0,e.parent_&&hN(e.parent_))}function Nv(e){e.copy_||(e.copy_=cN(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var UQ=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,s,n)=>{if(typeof t=="function"&&typeof s!="function"){const l=s;s=t;const u=this;return function(m=l,...x){return u.produce(m,p=>s.call(this,p,...x))}}typeof s!="function"&&ci(6),n!==void 0&&typeof n!="function"&&ci(7);let a;if($c(t)){const l=y6(this),u=fN(t,void 0);let f=!0;try{a=s(u),f=!1}finally{f?uN(l):dN(l)}return p6(l,n),b6(a,l)}else if(!t||typeof t!="object"){if(a=s(t),a===void 0&&(a=t),a===II&&(a=void 0),this.autoFreeze_&&dj(a,!0),n){const l=[],u=[];qc("Patches").generateReplacementPatches_(t,a,l,u),n(l,u)}return a}else ci(1,t)},this.produceWithPatches=(t,s)=>{if(typeof t=="function")return(u,...f)=>this.produceWithPatches(u,m=>t(m,...f));let n,a;return[this.produce(t,s,(u,f)=>{n=u,a=f}),n,a]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){$c(e)||ci(8),gd(e)&&(e=zQ(e));const t=y6(this),s=fN(e,void 0);return s[pa].isManual_=!0,dN(t),s}finishDraft(e,t){const s=e&&e[pa];(!s||!s.isManual_)&&ci(9);const{scope_:n}=s;return p6(n,t),b6(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let s;for(s=t.length-1;s>=0;s--){const a=t[s];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}s>-1&&(t=t.slice(s+1));const n=qc("Patches").applyPatches_;return gd(e)?n(e,t):this.produce(e,a=>n(a,t))}};function fN(e,t){const s=Qf(e)?qc("MapSet").proxyMap_(e,t):Op(e)?qc("MapSet").proxySet_(e,t):BQ(e,t);return(t?t.scope_:LI()).drafts_.push(s),s}function zQ(e){return gd(e)||ci(10,e),FI(e)}function FI(e){if(!$c(e)||Dp(e))return e;const t=e[pa];let s,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,s=cN(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else s=cN(e,!0);return gx(s,(a,l)=>{RI(s,a,FI(l))},n),t&&(t.finalized_=!1),s}var VQ=new UQ;VQ.produce;var $Q={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},UI=Xn({name:"legend",initialState:$Q,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:es()},replaceLegendPayload:{reducer(e,t){var{prev:s,next:n}=t.payload,a=hi(e).payload.indexOf(s);a>-1&&(e.payload[a]=n)},prepare:es()},removeLegendPayload:{reducer(e,t){var s=hi(e).payload.indexOf(t.payload);s>-1&&e.payload.splice(s,1)},prepare:es()}}}),{setLegendSize:N6,setLegendSettings:qQ,addLegendPayload:HQ,replaceLegendPayload:GQ,removeLegendPayload:YQ}=UI.actions,XQ=UI.reducer,WQ=["contextPayload"];function mN(){return mN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},mN.apply(null,arguments)}function w6(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function xd(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?w6(Object(s),!0).forEach(function(n){KQ(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function KQ(e,t,s){return(t=ZQ(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ZQ(e){var t=QQ(e,"string");return typeof t=="symbol"?t:t+""}function QQ(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JQ(e,t){if(e==null)return{};var s,n,a=eJ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function eJ(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}function tJ(e){return e.value}function rJ(e){var{contextPayload:t}=e,s=JQ(e,WQ),n=VP(t,e.payloadUniqBy,tJ),a=xd(xd({},s),{},{payload:n});return w.isValidElement(e.content)?w.cloneElement(e.content,a):typeof e.content=="function"?w.createElement(e.content,a):w.createElement(HW,a)}function sJ(e,t,s,n,a,l){var{layout:u,align:f,verticalAlign:m}=t,x,p;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(f==="center"&&u==="vertical"?x={left:((n||0)-l.width)/2}:x=f==="right"?{right:s&&s.right||0}:{left:s&&s.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(m==="middle"?p={top:((a||0)-l.height)/2}:p=m==="bottom"?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),xd(xd({},x),p)}function nJ(e){var t=Ss();return w.useEffect(()=>{t(qQ(e))},[t,e]),null}function aJ(e){var t=Ss();return w.useEffect(()=>(t(N6(e)),()=>{t(N6({width:0,height:0}))}),[t,e]),null}function iJ(e,t,s,n){return e==="vertical"&&It(t)?{height:t}:e==="horizontal"?{width:s||n}:null}var lJ={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function zI(e){var t=Ga(e,lJ),s=FK(),n=MX(),a=DQ(),{width:l,height:u,wrapperStyle:f,portal:m}=t,[x,p]=YP([s]),v=_I(),C=PI();if(v==null||C==null)return null;var T=v-(a?.left||0)-(a?.right||0),E=iJ(t.layout,u,l,T),k=m?f:xd(xd({position:"absolute",width:E?.width||l||"auto",height:E?.height||u||"auto"},sJ(f,t,a,v,C,x)),f),O=m??n;if(O==null||s==null)return null;var M=w.createElement("div",{className:"recharts-legend-wrapper",style:k,ref:p},w.createElement(nJ,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!m&&w.createElement(aJ,{width:x.width,height:x.height}),w.createElement(rJ,mN({},t,E,{margin:a,chartWidth:v,chartHeight:C,contextPayload:s})));return WN.createPortal(M,O)}zI.displayName="Legend";function gN(){return gN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},gN.apply(null,arguments)}function j6(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function wv(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?j6(Object(s),!0).forEach(function(n){oJ(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):j6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function oJ(e,t,s){return(t=cJ(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function cJ(e){var t=uJ(e,"string");return typeof t=="symbol"?t:t+""}function uJ(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dJ(e){return Array.isArray(e)&&El(e[0])&&El(e[1])?e.join(" ~ "):e}var hJ=e=>{var{separator:t=" : ",contentStyle:s={},itemStyle:n={},labelStyle:a={},payload:l,formatter:u,itemSorter:f,wrapperClassName:m,labelClassName:x,label:p,labelFormatter:v,accessibilityLayer:C=!1}=e,T=()=>{if(l&&l.length){var B={padding:0,margin:0},F=(f?fp(l,f):l).map((R,z)=>{if(R.type==="none")return null;var U=R.formatter||u||dJ,{value:Y,name:$}=R,G=Y,ee=$;if(U){var ce=U(Y,$,R,z,l);if(Array.isArray(ce))[G,ee]=ce;else if(ce!=null)G=ce;else return null}var se=wv({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},n);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:se},El(ee)?w.createElement("span",{className:"recharts-tooltip-item-name"},ee):null,El(ee)?w.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,w.createElement("span",{className:"recharts-tooltip-item-value"},G),w.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:B},F)}return null},E=wv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),k=wv({margin:0},a),O=!xa(p),M=O?p:"",L=js("recharts-default-tooltip",m),P=js("recharts-tooltip-label",x);O&&v&&l!==void 0&&l!==null&&(M=v(p,l));var H=C?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",gN({className:L,style:E},H),w.createElement("p",{className:P,style:k},w.isValidElement(M)?M:"".concat(M)),T())},Mh="recharts-tooltip-wrapper",fJ={visibility:"hidden"};function mJ(e){var{coordinate:t,translateX:s,translateY:n}=e;return js(Mh,{["".concat(Mh,"-right")]:It(s)&&t&&It(t.x)&&s>=t.x,["".concat(Mh,"-left")]:It(s)&&t&&It(t.x)&&s<t.x,["".concat(Mh,"-bottom")]:It(n)&&t&&It(t.y)&&n>=t.y,["".concat(Mh,"-top")]:It(n)&&t&&It(t.y)&&n<t.y})}function S6(e){var{allowEscapeViewBox:t,coordinate:s,key:n,offsetTopLeft:a,position:l,reverseDirection:u,tooltipDimension:f,viewBox:m,viewBoxDimension:x}=e;if(l&&It(l[n]))return l[n];var p=s[n]-f-(a>0?a:0),v=s[n]+a;if(t[n])return u[n]?p:v;var C=m[n];if(C==null)return 0;if(u[n]){var T=p,E=C;return T<E?Math.max(v,C):Math.max(p,C)}if(x==null)return 0;var k=v+f,O=C+x;return k>O?Math.max(p,C):Math.max(v,C)}function gJ(e){var{translateX:t,translateY:s,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(s,"px, 0)"):"translate(".concat(t,"px, ").concat(s,"px)")}}function xJ(e){var{allowEscapeViewBox:t,coordinate:s,offsetTopLeft:n,position:a,reverseDirection:l,tooltipBox:u,useTranslate3d:f,viewBox:m}=e,x,p,v;return u.height>0&&u.width>0&&s?(p=S6({allowEscapeViewBox:t,coordinate:s,key:"x",offsetTopLeft:n,position:a,reverseDirection:l,tooltipDimension:u.width,viewBox:m,viewBoxDimension:m.width}),v=S6({allowEscapeViewBox:t,coordinate:s,key:"y",offsetTopLeft:n,position:a,reverseDirection:l,tooltipDimension:u.height,viewBox:m,viewBoxDimension:m.height}),x=gJ({translateX:p,translateY:v,useTranslate3d:f})):x=fJ,{cssProperties:x,cssClasses:mJ({translateX:p,translateY:v,coordinate:s})}}function C6(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Gm(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?C6(Object(s),!0).forEach(function(n){xN(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):C6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function xN(e,t,s){return(t=pJ(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function pJ(e){var t=yJ(e,"string");return typeof t=="symbol"?t:t+""}function yJ(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class bJ extends w.PureComponent{constructor(){super(...arguments),xN(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),xN(this,"handleKeyDown",t=>{if(t.key==="Escape"){var s,n,a,l;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&s!==void 0?s:0,y:(a=(l=this.props.coordinate)===null||l===void 0?void 0:l.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,s;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:s,animationDuration:n,animationEasing:a,children:l,coordinate:u,hasPayload:f,isAnimationActive:m,offset:x,position:p,reverseDirection:v,useTranslate3d:C,viewBox:T,wrapperStyle:E,lastBoundingBox:k,innerRef:O,hasPortalFromProps:M}=this.props,{cssClasses:L,cssProperties:P}=xJ({allowEscapeViewBox:s,coordinate:u,offsetTopLeft:x,position:p,reverseDirection:v,tooltipBox:{height:k.height,width:k.width},useTranslate3d:C,viewBox:T}),H=M?{}:Gm(Gm({transition:m&&t?"transform ".concat(n,"ms ").concat(a):void 0},P),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&f?"visible":"hidden",position:"absolute",top:0,left:0}),B=Gm(Gm({},H),{},{visibility:!this.state.dismissed&&t&&f?"visible":"hidden"},E);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:L,style:B,ref:O},l)}}var VI=()=>{var e;return(e=Bt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function pN(){return pN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},pN.apply(null,arguments)}function A6(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function E6(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?A6(Object(s),!0).forEach(function(n){vJ(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):A6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function vJ(e,t,s){return(t=NJ(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function NJ(e){var t=wJ(e,"string");return typeof t=="symbol"?t:t+""}function wJ(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var T6={curveBasisClosed:eW,curveBasisOpen:tW,curveBasis:JX,curveBumpX:FX,curveBumpY:UX,curveLinearClosed:rW,curveLinear:dp,curveMonotoneX:sW,curveMonotoneY:nW,curveNatural:aW,curveStep:iW,curveStepAfter:oW,curveStepBefore:lW},yx=e=>tn(e.x)&&tn(e.y),O6=e=>e.base!=null&&yx(e.base)&&yx(e),Rh=e=>e.x,Lh=e=>e.y,jJ=(e,t)=>{if(typeof e=="function")return e;var s="curve".concat(Gf(e));return(s==="curveMonotone"||s==="curveBump")&&t?T6["".concat(s).concat(t==="vertical"?"Y":"X")]:T6[s]||dp},SJ=e=>{var{type:t="linear",points:s=[],baseLine:n,layout:a,connectNulls:l=!1}=e,u=jJ(t,a),f=l?s.filter(yx):s,m;if(Array.isArray(n)){var x=s.map((T,E)=>E6(E6({},T),{},{base:n[E]}));a==="vertical"?m=Bm().y(Lh).x1(Rh).x0(T=>T.base.x):m=Bm().x(Rh).y1(Lh).y0(T=>T.base.y);var p=m.defined(O6).curve(u),v=l?x.filter(O6):x;return p(v)}a==="vertical"&&It(n)?m=Bm().y(Lh).x1(Rh).x0(n):It(n)?m=Bm().x(Rh).y1(Lh).y0(n):m=pP().x(Rh).y(Lh);var C=m.defined(yx).curve(u);return C(f)},fj=e=>{var{className:t,points:s,path:n,pathRef:a}=e;if((!s||!s.length)&&!n)return null;var l=s&&s.length?SJ(e):n;return w.createElement("path",pN({},dd(e),_W(e),{className:js("recharts-curve",t),d:l===null?void 0:l,ref:a}))},CJ=["x","y","top","left","width","height","className"];function yN(){return yN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},yN.apply(null,arguments)}function D6(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function AJ(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?D6(Object(s),!0).forEach(function(n){EJ(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):D6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function EJ(e,t,s){return(t=TJ(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function TJ(e){var t=OJ(e,"string");return typeof t=="symbol"?t:t+""}function OJ(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DJ(e,t){if(e==null)return{};var s,n,a=kJ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function kJ(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var _J=(e,t,s,n,a,l)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(l,",").concat(t,"h").concat(s),PJ=e=>{var{x:t=0,y:s=0,top:n=0,left:a=0,width:l=0,height:u=0,className:f}=e,m=DJ(e,CJ),x=AJ({x:t,y:s,top:n,left:a,width:l,height:u},m);return!It(t)||!It(s)||!It(l)||!It(u)||!It(n)||!It(a)?null:w.createElement("path",yN({},$a(x),{className:js("recharts-cross",f),d:_J(t,s,l,u,n,a)}))};function IJ(e,t,s,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:s.left+.5,y:e==="horizontal"?s.top+.5:t.y-a,width:e==="horizontal"?n:s.width-1,height:e==="horizontal"?s.height-1:n}}function k6(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function _6(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?k6(Object(s),!0).forEach(function(n){MJ(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):k6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function MJ(e,t,s){return(t=RJ(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function RJ(e){var t=LJ(e,"string");return typeof t=="symbol"?t:t+""}function LJ(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BJ=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),$I=(e,t,s)=>e.map(n=>"".concat(BJ(n)," ").concat(t,"ms ").concat(s)).join(","),FJ=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((s,n)=>s.filter(a=>n.includes(a))),Af=(e,t)=>Object.keys(t).reduce((s,n)=>_6(_6({},s),{},{[n]:e(n,t[n])}),{});function P6(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function $s(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?P6(Object(s),!0).forEach(function(n){UJ(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function UJ(e,t,s){return(t=zJ(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function zJ(e){var t=VJ(e,"string");return typeof t=="symbol"?t:t+""}function VJ(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bx=(e,t,s)=>e+(t-e)*s,bN=e=>{var{from:t,to:s}=e;return t!==s},qI=(e,t,s)=>{var n=Af((a,l)=>{if(bN(l)){var[u,f]=e(l.from,l.to,l.velocity);return $s($s({},l),{},{from:u,velocity:f})}return l},t);return s<1?Af((a,l)=>bN(l)?$s($s({},l),{},{velocity:bx(l.velocity,n[a].velocity,s),from:bx(l.from,n[a].from,s)}):l,t):qI(e,n,s-1)};function $J(e,t,s,n,a,l){var u,f=n.reduce((C,T)=>$s($s({},C),{},{[T]:{from:e[T],velocity:0,to:t[T]}}),{}),m=()=>Af((C,T)=>T.from,f),x=()=>!Object.values(f).filter(bN).length,p=null,v=C=>{u||(u=C);var T=C-u,E=T/s.dt;f=qI(s,f,E),a($s($s($s({},e),t),m())),u=C,x()||(p=l.setTimeout(v))};return()=>(p=l.setTimeout(v),()=>{var C;(C=p)===null||C===void 0||C()})}function qJ(e,t,s,n,a,l,u){var f=null,m=a.reduce((v,C)=>$s($s({},v),{},{[C]:[e[C],t[C]]}),{}),x,p=v=>{x||(x=v);var C=(v-x)/n,T=Af((k,O)=>bx(...O,s(C)),m);if(l($s($s($s({},e),t),T)),C<1)f=u.setTimeout(p);else{var E=Af((k,O)=>bx(...O,s(1)),m);l($s($s($s({},e),t),E))}};return()=>(f=u.setTimeout(p),()=>{var v;(v=f)===null||v===void 0||v()})}const HJ=(e,t,s,n,a,l)=>{var u=FJ(e,t);return s==null?()=>(a($s($s({},e),t)),()=>{}):s.isStepper===!0?$J(e,t,s,u,a,l):qJ(e,t,s,n,u,a,l)};var vx=1e-4,HI=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],GI=(e,t)=>e.map((s,n)=>s*t**n).reduce((s,n)=>s+n),I6=(e,t)=>s=>{var n=HI(e,t);return GI(n,s)},GJ=(e,t)=>s=>{var n=HI(e,t),a=[...n.map((l,u)=>l*u).slice(1),0];return GI(a,s)},YJ=function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];if(s.length===1)switch(s[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a,l=s[0].split("(");if(l[0]==="cubic-bezier"&&((a=l[1])===null||a===void 0?void 0:a.split(")")[0].split(",").length)===4){var u=l[1].split(")")[0].split(",").map(f=>parseFloat(f));return[u[0],u[1],u[2],u[3]]}}}return s.length===4?s:[0,0,1,1]},XJ=(e,t,s,n)=>{var a=I6(e,s),l=I6(t,n),u=GJ(e,s),f=x=>x>1?1:x<0?0:x,m=x=>{for(var p=x>1?1:x,v=p,C=0;C<8;++C){var T=a(v)-p,E=u(v);if(Math.abs(T-p)<vx||E<vx)return l(v);v=f(v-T/E)}return l(v)};return m.isStepper=!1,m},M6=function(){return XJ(...YJ(...arguments))},WJ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:s=100,damping:n=8,dt:a=17}=t,l=(u,f,m)=>{var x=-(u-f)*s,p=m*n,v=m+(x-p)*a/1e3,C=m*a/1e3+u;return Math.abs(C-f)<vx&&Math.abs(v)<vx?[f,0]:[C,v]};return l.isStepper=!0,l.dt=a,l},KJ=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return M6(e);case"spring":return WJ();default:if(e.split("(")[0]==="cubic-bezier")return M6(e)}return typeof e=="function"?e:null};function ZJ(e){var t,s=()=>null,n=!1,a=null,l=u=>{if(!n){if(Array.isArray(u)){if(!u.length)return;var f=u,[m,...x]=f;if(typeof m=="number"){a=e.setTimeout(l.bind(null,x),m);return}l(m),a=e.setTimeout(l.bind(null,x));return}typeof u=="string"&&(t=u,s(t)),typeof u=="object"&&(t=u,s(t)),typeof u=="function"&&u()}};return{stop:()=>{n=!0},start:u=>{n=!1,a&&(a(),a=null),l(u)},subscribe:u=>(s=u,()=>{s=()=>null}),getTimeoutController:()=>e}}class QJ{setTimeout(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,l=u=>{u-n>=s?t(u):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(l))};return a=requestAnimationFrame(l),()=>{a!=null&&cancelAnimationFrame(a)}}}function JJ(){return ZJ(new QJ)}var eee=w.createContext(JJ);function tee(e,t){var s=w.useContext(eee);return w.useMemo(()=>t??s(e),[e,t,s])}var ree=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),kp={devToolsEnabled:!1,isSsr:ree()},see={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},R6={t:0},jv={t:1};function mj(e){var t=Ga(e,see),{isActive:s,canBegin:n,duration:a,easing:l,begin:u,onAnimationEnd:f,onAnimationStart:m,children:x}=t,p=s==="auto"?!kp.isSsr:s,v=tee(t.animationId,t.animationManager),[C,T]=w.useState(p?R6:jv),E=w.useRef(null);return w.useEffect(()=>{p||T(jv)},[p]),w.useEffect(()=>{if(!p||!n)return Yf;var k=HJ(R6,jv,KJ(l),a,T,v.getTimeoutController()),O=()=>{E.current=k()};return v.start([m,u,O,a,f]),()=>{v.stop(),E.current&&E.current(),f()}},[p,n,a,l,u,m,f,v]),x(C.t)}function gj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",s=w.useRef(bf(t)),n=w.useRef(e);return n.current!==e&&(s.current=bf(t),n.current=e),s.current}var nee=["radius"],aee=["radius"];function L6(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function B6(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?L6(Object(s),!0).forEach(function(n){iee(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):L6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function iee(e,t,s){return(t=lee(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function lee(e){var t=oee(e,"string");return typeof t=="symbol"?t:t+""}function oee(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nx(){return Nx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Nx.apply(null,arguments)}function F6(e,t){if(e==null)return{};var s,n,a=cee(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function cee(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var U6=(e,t,s,n,a)=>{var l=Math.min(Math.abs(s)/2,Math.abs(n)/2),u=n>=0?1:-1,f=s>=0?1:-1,m=n>=0&&s>=0||n<0&&s<0?1:0,x;if(l>0&&a instanceof Array){for(var p=[0,0,0,0],v=0,C=4;v<C;v++)p[v]=a[v]>l?l:a[v];x="M".concat(e,",").concat(t+u*p[0]),p[0]>0&&(x+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(m,",").concat(e+f*p[0],",").concat(t)),x+="L ".concat(e+s-f*p[1],",").concat(t),p[1]>0&&(x+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(m,`,
        `).concat(e+s,",").concat(t+u*p[1])),x+="L ".concat(e+s,",").concat(t+n-u*p[2]),p[2]>0&&(x+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(m,`,
        `).concat(e+s-f*p[2],",").concat(t+n)),x+="L ".concat(e+f*p[3],",").concat(t+n),p[3]>0&&(x+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(m,`,
        `).concat(e,",").concat(t+n-u*p[3])),x+="Z"}else if(l>0&&a===+a&&a>0){var T=Math.min(l,a);x="M ".concat(e,",").concat(t+u*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(m,",").concat(e+f*T,",").concat(t,`
            L `).concat(e+s-f*T,",").concat(t,`
            A `).concat(T,",").concat(T,",0,0,").concat(m,",").concat(e+s,",").concat(t+u*T,`
            L `).concat(e+s,",").concat(t+n-u*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(m,",").concat(e+s-f*T,",").concat(t+n,`
            L `).concat(e+f*T,",").concat(t+n,`
            A `).concat(T,",").concat(T,",0,0,").concat(m,",").concat(e,",").concat(t+n-u*T," Z")}else x="M ".concat(e,",").concat(t," h ").concat(s," v ").concat(n," h ").concat(-s," Z");return x},z6={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},YI=e=>{var t=Ga(e,z6),s=w.useRef(null),[n,a]=w.useState(-1);w.useEffect(()=>{if(s.current&&s.current.getTotalLength)try{var ne=s.current.getTotalLength();ne&&a(ne)}catch{}},[]);var{x:l,y:u,width:f,height:m,radius:x,className:p}=t,{animationEasing:v,animationDuration:C,animationBegin:T,isAnimationActive:E,isUpdateAnimationActive:k}=t,O=w.useRef(f),M=w.useRef(m),L=w.useRef(l),P=w.useRef(u),H=w.useMemo(()=>({x:l,y:u,width:f,height:m,radius:x}),[l,u,f,m,x]),B=gj(H,"rectangle-");if(l!==+l||u!==+u||f!==+f||m!==+m||f===0||m===0)return null;var F=js("recharts-rectangle",p);if(!k){var R=$a(t),{radius:z}=R,U=F6(R,nee);return w.createElement("path",Nx({},U,{radius:typeof x=="number"?x:void 0,className:F,d:U6(l,u,f,m,x)}))}var Y=O.current,$=M.current,G=L.current,ee=P.current,ce="0px ".concat(n===-1?1:n,"px"),se="".concat(n,"px 0px"),J=$I(["strokeDasharray"],C,typeof v=="string"?v:z6.animationEasing);return w.createElement(mj,{animationId:B,key:B,canBegin:n>0,duration:C,easing:v,isActive:k,begin:T},ne=>{var pe=li(Y,f,ne),be=li($,m,ne),te=li(G,l,ne),X=li(ee,u,ne);s.current&&(O.current=pe,M.current=be,L.current=te,P.current=X);var re;E?ne>0?re={transition:J,strokeDasharray:se}:re={strokeDasharray:ce}:re={strokeDasharray:se};var ge=$a(t),{radius:de}=ge,je=F6(ge,aee);return w.createElement("path",Nx({},je,{radius:typeof x=="number"?x:void 0,className:F,d:U6(te,X,pe,be,x),ref:s,style:B6(B6({},re),t.style)}))})};function V6(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function $6(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?V6(Object(s),!0).forEach(function(n){uee(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):V6(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function uee(e,t,s){return(t=dee(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function dee(e){var t=hee(e,"string");return typeof t=="symbol"?t:t+""}function hee(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wx=Math.PI/180,fee=e=>e*180/Math.PI,Ms=(e,t,s,n)=>({x:e+Math.cos(-wx*n)*s,y:t+Math.sin(-wx*n)*s}),XI=function(t,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(s-(n.top||0)-(n.bottom||0)))/2},mee=(e,t)=>{var{x:s,y:n}=e,{x:a,y:l}=t;return Math.sqrt((s-a)**2+(n-l)**2)},gee=(e,t)=>{var{x:s,y:n}=e,{cx:a,cy:l}=t,u=mee({x:s,y:n},{x:a,y:l});if(u<=0)return{radius:u,angle:0};var f=(s-a)/u,m=Math.acos(f);return n>l&&(m=2*Math.PI-m),{radius:u,angle:fee(m),angleInRadian:m}},xee=e=>{var{startAngle:t,endAngle:s}=e,n=Math.floor(t/360),a=Math.floor(s/360),l=Math.min(n,a);return{startAngle:t-l*360,endAngle:s-l*360}},pee=(e,t)=>{var{startAngle:s,endAngle:n}=t,a=Math.floor(s/360),l=Math.floor(n/360),u=Math.min(a,l);return e+u*360},yee=(e,t)=>{var{chartX:s,chartY:n}=e,{radius:a,angle:l}=gee({x:s,y:n},t),{innerRadius:u,outerRadius:f}=t;if(a<u||a>f||a===0)return null;var{startAngle:m,endAngle:x}=xee(t),p=l,v;if(m<=x){for(;p>x;)p-=360;for(;p<m;)p+=360;v=p>=m&&p<=x}else{for(;p>m;)p-=360;for(;p<x;)p+=360;v=p>=x&&p<=m}return v?$6($6({},t),{},{radius:a,angle:pee(p,t)}):null};function WI(e){var{cx:t,cy:s,radius:n,startAngle:a,endAngle:l}=e,u=Ms(t,s,n,a),f=Ms(t,s,n,l);return{points:[u,f],cx:t,cy:s,radius:n,startAngle:a,endAngle:l}}function vN(){return vN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},vN.apply(null,arguments)}var bee=(e,t)=>{var s=$n(t-e),n=Math.min(Math.abs(t-e),359.999);return s*n},Ym=e=>{var{cx:t,cy:s,radius:n,angle:a,sign:l,isExternal:u,cornerRadius:f,cornerIsExternal:m}=e,x=f*(u?1:-1)+n,p=Math.asin(f/x)/wx,v=m?a:a+l*p,C=Ms(t,s,x,v),T=Ms(t,s,n,v),E=m?a-l*p:a,k=Ms(t,s,x*Math.cos(p*wx),E);return{center:C,circleTangency:T,lineTangency:k,theta:p}},KI=e=>{var{cx:t,cy:s,innerRadius:n,outerRadius:a,startAngle:l,endAngle:u}=e,f=bee(l,u),m=l+f,x=Ms(t,s,a,l),p=Ms(t,s,a,m),v="M ".concat(x.x,",").concat(x.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(f)>180),",").concat(+(l>m),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(n>0){var C=Ms(t,s,n,l),T=Ms(t,s,n,m);v+="L ".concat(T.x,",").concat(T.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(f)>180),",").concat(+(l<=m),`,
            `).concat(C.x,",").concat(C.y," Z")}else v+="L ".concat(t,",").concat(s," Z");return v},vee=e=>{var{cx:t,cy:s,innerRadius:n,outerRadius:a,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:f,startAngle:m,endAngle:x}=e,p=$n(x-m),{circleTangency:v,lineTangency:C,theta:T}=Ym({cx:t,cy:s,radius:a,angle:m,sign:p,cornerRadius:l,cornerIsExternal:f}),{circleTangency:E,lineTangency:k,theta:O}=Ym({cx:t,cy:s,radius:a,angle:x,sign:-p,cornerRadius:l,cornerIsExternal:f}),M=f?Math.abs(m-x):Math.abs(m-x)-T-O;if(M<0)return u?"M ".concat(C.x,",").concat(C.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):KI({cx:t,cy:s,innerRadius:n,outerRadius:a,startAngle:m,endAngle:x});var L="M ".concat(C.x,",").concat(C.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(M>180),",").concat(+(p<0),",").concat(E.x,",").concat(E.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat(k.x,",").concat(k.y,`
  `);if(n>0){var{circleTangency:P,lineTangency:H,theta:B}=Ym({cx:t,cy:s,radius:n,angle:m,sign:p,isExternal:!0,cornerRadius:l,cornerIsExternal:f}),{circleTangency:F,lineTangency:R,theta:z}=Ym({cx:t,cy:s,radius:n,angle:x,sign:-p,isExternal:!0,cornerRadius:l,cornerIsExternal:f}),U=f?Math.abs(m-x):Math.abs(m-x)-B-z;if(U<0&&l===0)return"".concat(L,"L").concat(t,",").concat(s,"Z");L+="L".concat(R.x,",").concat(R.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(U>180),",").concat(+(p>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat(H.x,",").concat(H.y,"Z")}else L+="L".concat(t,",").concat(s,"Z");return L},Nee={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ZI=e=>{var t=Ga(e,Nee),{cx:s,cy:n,innerRadius:a,outerRadius:l,cornerRadius:u,forceCornerRadius:f,cornerIsExternal:m,startAngle:x,endAngle:p,className:v}=t;if(l<a||x===p)return null;var C=js("recharts-sector",v),T=l-a,E=fa(u,T,0,!0),k;return E>0&&Math.abs(x-p)<360?k=vee({cx:s,cy:n,innerRadius:a,outerRadius:l,cornerRadius:Math.min(E,T/2),forceCornerRadius:f,cornerIsExternal:m,startAngle:x,endAngle:p}):k=KI({cx:s,cy:n,innerRadius:a,outerRadius:l,startAngle:x,endAngle:p}),w.createElement("path",vN({},$a(t),{className:C,d:k}))};function wee(e,t,s){if(e==="horizontal")return[{x:t.x,y:s.top},{x:t.x,y:s.top+s.height}];if(e==="vertical")return[{x:s.left,y:t.y},{x:s.left+s.width,y:t.y}];if(kP(t)){if(e==="centric"){var{cx:n,cy:a,innerRadius:l,outerRadius:u,angle:f}=t,m=Ms(n,a,l,f),x=Ms(n,a,u,f);return[{x:m.x,y:m.y},{x:x.x,y:x.y}]}return WI(t)}}var Sv={},Cv={},Av={},q6;function jee(){return q6||(q6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qP();function s(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=s})(Av)),Av}var H6;function See(){return H6||(H6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jee();function s(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=s})(Cv)),Cv}var G6;function Cee(){return G6||(G6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HP(),s=See();function n(a,l,u){u&&typeof u!="number"&&t.isIterateeCall(a,l,u)&&(l=u=void 0),a=s.toFinite(a),l===void 0?(l=a,a=0):l=s.toFinite(l),u=u===void 0?a<l?1:-1:s.toFinite(u);const f=Math.max(Math.ceil((l-a)/(u||1)),0),m=new Array(f);for(let x=0;x<f;x++)m[x]=a,a+=u;return m}e.range=n})(Sv)),Sv}var Ev,Y6;function Aee(){return Y6||(Y6=1,Ev=Cee().range),Ev}var Eee=Aee();const QI=Vi(Eee);function Io(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Tee(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xj(e){let t,s,n;e.length!==2?(t=Io,s=(f,m)=>Io(e(f),m),n=(f,m)=>e(f)-m):(t=e===Io||e===Tee?e:Oee,s=e,n=e);function a(f,m,x=0,p=f.length){if(x<p){if(t(m,m)!==0)return p;do{const v=x+p>>>1;s(f[v],m)<0?x=v+1:p=v}while(x<p)}return x}function l(f,m,x=0,p=f.length){if(x<p){if(t(m,m)!==0)return p;do{const v=x+p>>>1;s(f[v],m)<=0?x=v+1:p=v}while(x<p)}return x}function u(f,m,x=0,p=f.length){const v=a(f,m,x,p-1);return v>x&&n(f[v-1],m)>-n(f[v],m)?v-1:v}return{left:a,center:u,right:l}}function Oee(){return 0}function JI(e){return e===null?NaN:+e}function*Dee(e,t){for(let s of e)s!=null&&(s=+s)>=s&&(yield s)}const kee=xj(Io),Jf=kee.right;xj(JI).center;class X6 extends Map{constructor(t,s=Iee){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:s}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(W6(this,t))}has(t){return super.has(W6(this,t))}set(t,s){return super.set(_ee(this,t),s)}delete(t){return super.delete(Pee(this,t))}}function W6({_intern:e,_key:t},s){const n=t(s);return e.has(n)?e.get(n):s}function _ee({_intern:e,_key:t},s){const n=t(s);return e.has(n)?e.get(n):(e.set(n,s),s)}function Pee({_intern:e,_key:t},s){const n=t(s);return e.has(n)&&(s=e.get(n),e.delete(n)),s}function Iee(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Mee(e=Io){if(e===Io)return e7;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,s)=>{const n=e(t,s);return n||n===0?n:(e(s,s)===0)-(e(t,t)===0)}}function e7(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Ree=Math.sqrt(50),Lee=Math.sqrt(10),Bee=Math.sqrt(2);function jx(e,t,s){const n=(t-e)/Math.max(0,s),a=Math.floor(Math.log10(n)),l=n/Math.pow(10,a),u=l>=Ree?10:l>=Lee?5:l>=Bee?2:1;let f,m,x;return a<0?(x=Math.pow(10,-a)/u,f=Math.round(e*x),m=Math.round(t*x),f/x<e&&++f,m/x>t&&--m,x=-x):(x=Math.pow(10,a)*u,f=Math.round(e/x),m=Math.round(t/x),f*x<e&&++f,m*x>t&&--m),m<f&&.5<=s&&s<2?jx(e,t,s*2):[f,m,x]}function NN(e,t,s){if(t=+t,e=+e,s=+s,!(s>0))return[];if(e===t)return[e];const n=t<e,[a,l,u]=n?jx(t,e,s):jx(e,t,s);if(!(l>=a))return[];const f=l-a+1,m=new Array(f);if(n)if(u<0)for(let x=0;x<f;++x)m[x]=(l-x)/-u;else for(let x=0;x<f;++x)m[x]=(l-x)*u;else if(u<0)for(let x=0;x<f;++x)m[x]=(a+x)/-u;else for(let x=0;x<f;++x)m[x]=(a+x)*u;return m}function wN(e,t,s){return t=+t,e=+e,s=+s,jx(e,t,s)[2]}function jN(e,t,s){t=+t,e=+e,s=+s;const n=t<e,a=n?wN(t,e,s):wN(e,t,s);return(n?-1:1)*(a<0?1/-a:a)}function K6(e,t){let s;for(const n of e)n!=null&&(s<n||s===void 0&&n>=n)&&(s=n);return s}function Z6(e,t){let s;for(const n of e)n!=null&&(s>n||s===void 0&&n>=n)&&(s=n);return s}function t7(e,t,s=0,n=1/0,a){if(t=Math.floor(t),s=Math.floor(Math.max(0,s)),n=Math.floor(Math.min(e.length-1,n)),!(s<=t&&t<=n))return e;for(a=a===void 0?e7:Mee(a);n>s;){if(n-s>600){const m=n-s+1,x=t-s+1,p=Math.log(m),v=.5*Math.exp(2*p/3),C=.5*Math.sqrt(p*v*(m-v)/m)*(x-m/2<0?-1:1),T=Math.max(s,Math.floor(t-x*v/m+C)),E=Math.min(n,Math.floor(t+(m-x)*v/m+C));t7(e,t,T,E,a)}const l=e[t];let u=s,f=n;for(Bh(e,s,t),a(e[n],l)>0&&Bh(e,s,n);u<f;){for(Bh(e,u,f),++u,--f;a(e[u],l)<0;)++u;for(;a(e[f],l)>0;)--f}a(e[s],l)===0?Bh(e,s,f):(++f,Bh(e,f,n)),f<=t&&(s=f+1),t<=f&&(n=f-1)}return e}function Bh(e,t,s){const n=e[t];e[t]=e[s],e[s]=n}function Fee(e,t,s){if(e=Float64Array.from(Dee(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Z6(e);if(t>=1)return K6(e);var n,a=(n-1)*t,l=Math.floor(a),u=K6(t7(e,l).subarray(0,l+1)),f=Z6(e.subarray(l+1));return u+(f-u)*(a-l)}}function Uee(e,t,s=JI){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+s(e[0],0,e);if(t>=1)return+s(e[n-1],n-1,e);var n,a=(n-1)*t,l=Math.floor(a),u=+s(e[l],l,e),f=+s(e[l+1],l+1,e);return u+(f-u)*(a-l)}}function zee(e,t,s){e=+e,t=+t,s=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+s;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/s))|0,l=new Array(a);++n<a;)l[n]=e+n*s;return l}function Ya(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ml(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const SN=Symbol("implicit");function pj(){var e=new X6,t=[],s=[],n=SN;function a(l){let u=e.get(l);if(u===void 0){if(n!==SN)return n;e.set(l,u=t.push(l)-1)}return s[u%s.length]}return a.domain=function(l){if(!arguments.length)return t.slice();t=[],e=new X6;for(const u of l)e.has(u)||e.set(u,t.push(u)-1);return a},a.range=function(l){return arguments.length?(s=Array.from(l),a):s.slice()},a.unknown=function(l){return arguments.length?(n=l,a):n},a.copy=function(){return pj(t,s).unknown(n)},Ya.apply(a,arguments),a}function yj(){var e=pj().unknown(void 0),t=e.domain,s=e.range,n=0,a=1,l,u,f=!1,m=0,x=0,p=.5;delete e.unknown;function v(){var C=t().length,T=a<n,E=T?a:n,k=T?n:a;l=(k-E)/Math.max(1,C-m+x*2),f&&(l=Math.floor(l)),E+=(k-E-l*(C-m))*p,u=l*(1-m),f&&(E=Math.round(E),u=Math.round(u));var O=zee(C).map(function(M){return E+l*M});return s(T?O.reverse():O)}return e.domain=function(C){return arguments.length?(t(C),v()):t()},e.range=function(C){return arguments.length?([n,a]=C,n=+n,a=+a,v()):[n,a]},e.rangeRound=function(C){return[n,a]=C,n=+n,a=+a,f=!0,v()},e.bandwidth=function(){return u},e.step=function(){return l},e.round=function(C){return arguments.length?(f=!!C,v()):f},e.padding=function(C){return arguments.length?(m=Math.min(1,x=+C),v()):m},e.paddingInner=function(C){return arguments.length?(m=Math.min(1,C),v()):m},e.paddingOuter=function(C){return arguments.length?(x=+C,v()):x},e.align=function(C){return arguments.length?(p=Math.max(0,Math.min(1,C)),v()):p},e.copy=function(){return yj(t(),[n,a]).round(f).paddingInner(m).paddingOuter(x).align(p)},Ya.apply(v(),arguments)}function r7(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return r7(t())},e}function Vee(){return r7(yj.apply(null,arguments).paddingInner(1))}function bj(e,t,s){e.prototype=t.prototype=s,s.constructor=e}function s7(e,t){var s=Object.create(e.prototype);for(var n in t)s[n]=t[n];return s}function e0(){}var Ef=.7,Sx=1/Ef,td="\\s*([+-]?\\d+)\\s*",Tf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$ee=/^#([0-9a-f]{3,8})$/,qee=new RegExp(`^rgb\\(${td},${td},${td}\\)$`),Hee=new RegExp(`^rgb\\(${Fi},${Fi},${Fi}\\)$`),Gee=new RegExp(`^rgba\\(${td},${td},${td},${Tf}\\)$`),Yee=new RegExp(`^rgba\\(${Fi},${Fi},${Fi},${Tf}\\)$`),Xee=new RegExp(`^hsl\\(${Tf},${Fi},${Fi}\\)$`),Wee=new RegExp(`^hsla\\(${Tf},${Fi},${Fi},${Tf}\\)$`),Q6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bj(e0,Of,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:J6,formatHex:J6,formatHex8:Kee,formatHsl:Zee,formatRgb:eT,toString:eT});function J6(){return this.rgb().formatHex()}function Kee(){return this.rgb().formatHex8()}function Zee(){return n7(this).formatHsl()}function eT(){return this.rgb().formatRgb()}function Of(e){var t,s;return e=(e+"").trim().toLowerCase(),(t=$ee.exec(e))?(s=t[1].length,t=parseInt(t[1],16),s===6?tT(t):s===3?new qn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):s===8?Xm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):s===4?Xm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qee.exec(e))?new qn(t[1],t[2],t[3],1):(t=Hee.exec(e))?new qn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Gee.exec(e))?Xm(t[1],t[2],t[3],t[4]):(t=Yee.exec(e))?Xm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Xee.exec(e))?nT(t[1],t[2]/100,t[3]/100,1):(t=Wee.exec(e))?nT(t[1],t[2]/100,t[3]/100,t[4]):Q6.hasOwnProperty(e)?tT(Q6[e]):e==="transparent"?new qn(NaN,NaN,NaN,0):null}function tT(e){return new qn(e>>16&255,e>>8&255,e&255,1)}function Xm(e,t,s,n){return n<=0&&(e=t=s=NaN),new qn(e,t,s,n)}function Qee(e){return e instanceof e0||(e=Of(e)),e?(e=e.rgb(),new qn(e.r,e.g,e.b,e.opacity)):new qn}function CN(e,t,s,n){return arguments.length===1?Qee(e):new qn(e,t,s,n??1)}function qn(e,t,s,n){this.r=+e,this.g=+t,this.b=+s,this.opacity=+n}bj(qn,CN,s7(e0,{brighter(e){return e=e==null?Sx:Math.pow(Sx,e),new qn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ef:Math.pow(Ef,e),new qn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new qn(Fc(this.r),Fc(this.g),Fc(this.b),Cx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rT,formatHex:rT,formatHex8:Jee,formatRgb:sT,toString:sT}));function rT(){return`#${_c(this.r)}${_c(this.g)}${_c(this.b)}`}function Jee(){return`#${_c(this.r)}${_c(this.g)}${_c(this.b)}${_c((isNaN(this.opacity)?1:this.opacity)*255)}`}function sT(){const e=Cx(this.opacity);return`${e===1?"rgb(":"rgba("}${Fc(this.r)}, ${Fc(this.g)}, ${Fc(this.b)}${e===1?")":`, ${e})`}`}function Cx(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Fc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _c(e){return e=Fc(e),(e<16?"0":"")+e.toString(16)}function nT(e,t,s,n){return n<=0?e=t=s=NaN:s<=0||s>=1?e=t=NaN:t<=0&&(e=NaN),new ui(e,t,s,n)}function n7(e){if(e instanceof ui)return new ui(e.h,e.s,e.l,e.opacity);if(e instanceof e0||(e=Of(e)),!e)return new ui;if(e instanceof ui)return e;e=e.rgb();var t=e.r/255,s=e.g/255,n=e.b/255,a=Math.min(t,s,n),l=Math.max(t,s,n),u=NaN,f=l-a,m=(l+a)/2;return f?(t===l?u=(s-n)/f+(s<n)*6:s===l?u=(n-t)/f+2:u=(t-s)/f+4,f/=m<.5?l+a:2-l-a,u*=60):f=m>0&&m<1?0:u,new ui(u,f,m,e.opacity)}function ete(e,t,s,n){return arguments.length===1?n7(e):new ui(e,t,s,n??1)}function ui(e,t,s,n){this.h=+e,this.s=+t,this.l=+s,this.opacity=+n}bj(ui,ete,s7(e0,{brighter(e){return e=e==null?Sx:Math.pow(Sx,e),new ui(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ef:Math.pow(Ef,e),new ui(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*t,a=2*s-n;return new qn(Tv(e>=240?e-240:e+120,a,n),Tv(e,a,n),Tv(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new ui(aT(this.h),Wm(this.s),Wm(this.l),Cx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Cx(this.opacity);return`${e===1?"hsl(":"hsla("}${aT(this.h)}, ${Wm(this.s)*100}%, ${Wm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function aT(e){return e=(e||0)%360,e<0?e+360:e}function Wm(e){return Math.max(0,Math.min(1,e||0))}function Tv(e,t,s){return(e<60?t+(s-t)*e/60:e<180?s:e<240?t+(s-t)*(240-e)/60:t)*255}const vj=e=>()=>e;function tte(e,t){return function(s){return e+s*t}}function rte(e,t,s){return e=Math.pow(e,s),t=Math.pow(t,s)-e,s=1/s,function(n){return Math.pow(e+n*t,s)}}function ste(e){return(e=+e)==1?a7:function(t,s){return s-t?rte(t,s,e):vj(isNaN(t)?s:t)}}function a7(e,t){var s=t-e;return s?tte(e,s):vj(isNaN(e)?t:e)}const iT=(function e(t){var s=ste(t);function n(a,l){var u=s((a=CN(a)).r,(l=CN(l)).r),f=s(a.g,l.g),m=s(a.b,l.b),x=a7(a.opacity,l.opacity);return function(p){return a.r=u(p),a.g=f(p),a.b=m(p),a.opacity=x(p),a+""}}return n.gamma=e,n})(1);function nte(e,t){t||(t=[]);var s=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(l){for(a=0;a<s;++a)n[a]=e[a]*(1-l)+t[a]*l;return n}}function ate(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ite(e,t){var s=t?t.length:0,n=e?Math.min(s,e.length):0,a=new Array(n),l=new Array(s),u;for(u=0;u<n;++u)a[u]=Pd(e[u],t[u]);for(;u<s;++u)l[u]=t[u];return function(f){for(u=0;u<n;++u)l[u]=a[u](f);return l}}function lte(e,t){var s=new Date;return e=+e,t=+t,function(n){return s.setTime(e*(1-n)+t*n),s}}function Ax(e,t){return e=+e,t=+t,function(s){return e*(1-s)+t*s}}function ote(e,t){var s={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?s[a]=Pd(e[a],t[a]):n[a]=t[a];return function(l){for(a in s)n[a]=s[a](l);return n}}var AN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ov=new RegExp(AN.source,"g");function cte(e){return function(){return e}}function ute(e){return function(t){return e(t)+""}}function dte(e,t){var s=AN.lastIndex=Ov.lastIndex=0,n,a,l,u=-1,f=[],m=[];for(e=e+"",t=t+"";(n=AN.exec(e))&&(a=Ov.exec(t));)(l=a.index)>s&&(l=t.slice(s,l),f[u]?f[u]+=l:f[++u]=l),(n=n[0])===(a=a[0])?f[u]?f[u]+=a:f[++u]=a:(f[++u]=null,m.push({i:u,x:Ax(n,a)})),s=Ov.lastIndex;return s<t.length&&(l=t.slice(s),f[u]?f[u]+=l:f[++u]=l),f.length<2?m[0]?ute(m[0].x):cte(t):(t=m.length,function(x){for(var p=0,v;p<t;++p)f[(v=m[p]).i]=v.x(x);return f.join("")})}function Pd(e,t){var s=typeof t,n;return t==null||s==="boolean"?vj(t):(s==="number"?Ax:s==="string"?(n=Of(t))?(t=n,iT):dte:t instanceof Of?iT:t instanceof Date?lte:ate(t)?nte:Array.isArray(t)?ite:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ote:Ax)(e,t)}function Nj(e,t){return e=+e,t=+t,function(s){return Math.round(e*(1-s)+t*s)}}function hte(e,t){t===void 0&&(t=e,e=Pd);for(var s=0,n=t.length-1,a=t[0],l=new Array(n<0?0:n);s<n;)l[s]=e(a,a=t[++s]);return function(u){var f=Math.max(0,Math.min(n-1,Math.floor(u*=n)));return l[f](u-f)}}function fte(e){return function(){return e}}function Ex(e){return+e}var lT=[0,1];function En(e){return e}function EN(e,t){return(t-=e=+e)?function(s){return(s-e)/t}:fte(isNaN(t)?NaN:.5)}function mte(e,t){var s;return e>t&&(s=e,e=t,t=s),function(n){return Math.max(e,Math.min(t,n))}}function gte(e,t,s){var n=e[0],a=e[1],l=t[0],u=t[1];return a<n?(n=EN(a,n),l=s(u,l)):(n=EN(n,a),l=s(l,u)),function(f){return l(n(f))}}function xte(e,t,s){var n=Math.min(e.length,t.length)-1,a=new Array(n),l=new Array(n),u=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<n;)a[u]=EN(e[u],e[u+1]),l[u]=s(t[u],t[u+1]);return function(f){var m=Jf(e,f,1,n)-1;return l[m](a[m](f))}}function t0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function _p(){var e=lT,t=lT,s=Pd,n,a,l,u=En,f,m,x;function p(){var C=Math.min(e.length,t.length);return u!==En&&(u=mte(e[0],e[C-1])),f=C>2?xte:gte,m=x=null,v}function v(C){return C==null||isNaN(C=+C)?l:(m||(m=f(e.map(n),t,s)))(n(u(C)))}return v.invert=function(C){return u(a((x||(x=f(t,e.map(n),Ax)))(C)))},v.domain=function(C){return arguments.length?(e=Array.from(C,Ex),p()):e.slice()},v.range=function(C){return arguments.length?(t=Array.from(C),p()):t.slice()},v.rangeRound=function(C){return t=Array.from(C),s=Nj,p()},v.clamp=function(C){return arguments.length?(u=C?!0:En,p()):u!==En},v.interpolate=function(C){return arguments.length?(s=C,p()):s},v.unknown=function(C){return arguments.length?(l=C,v):l},function(C,T){return n=C,a=T,p()}}function wj(){return _p()(En,En)}function pte(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Tx(e,t){if((s=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var s,n=e.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+e.slice(s+1)]}function pd(e){return e=Tx(Math.abs(e)),e?e[1]:NaN}function yte(e,t){return function(s,n){for(var a=s.length,l=[],u=0,f=e[0],m=0;a>0&&f>0&&(m+f+1>n&&(f=Math.max(1,n-m)),l.push(s.substring(a-=f,a+f)),!((m+=f+1)>n));)f=e[u=(u+1)%e.length];return l.reverse().join(t)}}function bte(e){return function(t){return t.replace(/[0-9]/g,function(s){return e[+s]})}}var vte=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Df(e){if(!(t=vte.exec(e)))throw new Error("invalid format: "+e);var t;return new jj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Df.prototype=jj.prototype;function jj(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}jj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Nte(e){e:for(var t=e.length,s=1,n=-1,a;s<t;++s)switch(e[s]){case".":n=a=s;break;case"0":n===0&&(n=s),a=s;break;default:if(!+e[s])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var i7;function wte(e,t){var s=Tx(e,t);if(!s)return e+"";var n=s[0],a=s[1],l=a-(i7=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,u=n.length;return l===u?n:l>u?n+new Array(l-u+1).join("0"):l>0?n.slice(0,l)+"."+n.slice(l):"0."+new Array(1-l).join("0")+Tx(e,Math.max(0,t+l-1))[0]}function oT(e,t){var s=Tx(e,t);if(!s)return e+"";var n=s[0],a=s[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const cT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:pte,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>oT(e*100,t),r:oT,s:wte,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function uT(e){return e}var dT=Array.prototype.map,hT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function jte(e){var t=e.grouping===void 0||e.thousands===void 0?uT:yte(dT.call(e.grouping,Number),e.thousands+""),s=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?uT:bte(dT.call(e.numerals,String)),u=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function x(v){v=Df(v);var C=v.fill,T=v.align,E=v.sign,k=v.symbol,O=v.zero,M=v.width,L=v.comma,P=v.precision,H=v.trim,B=v.type;B==="n"?(L=!0,B="g"):cT[B]||(P===void 0&&(P=12),H=!0,B="g"),(O||C==="0"&&T==="=")&&(O=!0,C="0",T="=");var F=k==="$"?s:k==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",R=k==="$"?n:/[%p]/.test(B)?u:"",z=cT[B],U=/[defgprs%]/.test(B);P=P===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function Y($){var G=F,ee=R,ce,se,J;if(B==="c")ee=z($)+ee,$="";else{$=+$;var ne=$<0||1/$<0;if($=isNaN($)?m:z(Math.abs($),P),H&&($=Nte($)),ne&&+$==0&&E!=="+"&&(ne=!1),G=(ne?E==="("?E:f:E==="-"||E==="("?"":E)+G,ee=(B==="s"?hT[8+i7/3]:"")+ee+(ne&&E==="("?")":""),U){for(ce=-1,se=$.length;++ce<se;)if(J=$.charCodeAt(ce),48>J||J>57){ee=(J===46?a+$.slice(ce+1):$.slice(ce))+ee,$=$.slice(0,ce);break}}}L&&!O&&($=t($,1/0));var pe=G.length+$.length+ee.length,be=pe<M?new Array(M-pe+1).join(C):"";switch(L&&O&&($=t(be+$,be.length?M-ee.length:1/0),be=""),T){case"<":$=G+$+ee+be;break;case"=":$=G+be+$+ee;break;case"^":$=be.slice(0,pe=be.length>>1)+G+$+ee+be.slice(pe);break;default:$=be+G+$+ee;break}return l($)}return Y.toString=function(){return v+""},Y}function p(v,C){var T=x((v=Df(v),v.type="f",v)),E=Math.max(-8,Math.min(8,Math.floor(pd(C)/3)))*3,k=Math.pow(10,-E),O=hT[8+E/3];return function(M){return T(k*M)+O}}return{format:x,formatPrefix:p}}var Km,Sj,l7;Ste({thousands:",",grouping:[3],currency:["$",""]});function Ste(e){return Km=jte(e),Sj=Km.format,l7=Km.formatPrefix,Km}function Cte(e){return Math.max(0,-pd(Math.abs(e)))}function Ate(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pd(t)/3)))*3-pd(Math.abs(e)))}function Ete(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,pd(t)-pd(e))+1}function o7(e,t,s,n){var a=jN(e,t,s),l;switch(n=Df(n??",f"),n.type){case"s":{var u=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(l=Ate(a,u))&&(n.precision=l),l7(n,u)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(l=Ete(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=l-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(l=Cte(a))&&(n.precision=l-(n.type==="%")*2);break}}return Sj(n)}function Ho(e){var t=e.domain;return e.ticks=function(s){var n=t();return NN(n[0],n[n.length-1],s??10)},e.tickFormat=function(s,n){var a=t();return o7(a[0],a[a.length-1],s??10,n)},e.nice=function(s){s==null&&(s=10);var n=t(),a=0,l=n.length-1,u=n[a],f=n[l],m,x,p=10;for(f<u&&(x=u,u=f,f=x,x=a,a=l,l=x);p-- >0;){if(x=wN(u,f,s),x===m)return n[a]=u,n[l]=f,t(n);if(x>0)u=Math.floor(u/x)*x,f=Math.ceil(f/x)*x;else if(x<0)u=Math.ceil(u*x)/x,f=Math.floor(f*x)/x;else break;m=x}return e},e}function c7(){var e=wj();return e.copy=function(){return t0(e,c7())},Ya.apply(e,arguments),Ho(e)}function u7(e){var t;function s(n){return n==null||isNaN(n=+n)?t:n}return s.invert=s,s.domain=s.range=function(n){return arguments.length?(e=Array.from(n,Ex),s):e.slice()},s.unknown=function(n){return arguments.length?(t=n,s):t},s.copy=function(){return u7(e).unknown(t)},e=arguments.length?Array.from(e,Ex):[0,1],Ho(s)}function d7(e,t){e=e.slice();var s=0,n=e.length-1,a=e[s],l=e[n],u;return l<a&&(u=s,s=n,n=u,u=a,a=l,l=u),e[s]=t.floor(a),e[n]=t.ceil(l),e}function fT(e){return Math.log(e)}function mT(e){return Math.exp(e)}function Tte(e){return-Math.log(-e)}function Ote(e){return-Math.exp(-e)}function Dte(e){return isFinite(e)?+("1e"+e):e<0?0:e}function kte(e){return e===10?Dte:e===Math.E?Math.exp:t=>Math.pow(e,t)}function _te(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function gT(e){return(t,s)=>-e(-t,s)}function Cj(e){const t=e(fT,mT),s=t.domain;let n=10,a,l;function u(){return a=_te(n),l=kte(n),s()[0]<0?(a=gT(a),l=gT(l),e(Tte,Ote)):e(fT,mT),t}return t.base=function(f){return arguments.length?(n=+f,u()):n},t.domain=function(f){return arguments.length?(s(f),u()):s()},t.ticks=f=>{const m=s();let x=m[0],p=m[m.length-1];const v=p<x;v&&([x,p]=[p,x]);let C=a(x),T=a(p),E,k;const O=f==null?10:+f;let M=[];if(!(n%1)&&T-C<O){if(C=Math.floor(C),T=Math.ceil(T),x>0){for(;C<=T;++C)for(E=1;E<n;++E)if(k=C<0?E/l(-C):E*l(C),!(k<x)){if(k>p)break;M.push(k)}}else for(;C<=T;++C)for(E=n-1;E>=1;--E)if(k=C>0?E/l(-C):E*l(C),!(k<x)){if(k>p)break;M.push(k)}M.length*2<O&&(M=NN(x,p,O))}else M=NN(C,T,Math.min(T-C,O)).map(l);return v?M.reverse():M},t.tickFormat=(f,m)=>{if(f==null&&(f=10),m==null&&(m=n===10?"s":","),typeof m!="function"&&(!(n%1)&&(m=Df(m)).precision==null&&(m.trim=!0),m=Sj(m)),f===1/0)return m;const x=Math.max(1,n*f/t.ticks().length);return p=>{let v=p/l(Math.round(a(p)));return v*n<n-.5&&(v*=n),v<=x?m(p):""}},t.nice=()=>s(d7(s(),{floor:f=>l(Math.floor(a(f))),ceil:f=>l(Math.ceil(a(f)))})),t}function h7(){const e=Cj(_p()).domain([1,10]);return e.copy=()=>t0(e,h7()).base(e.base()),Ya.apply(e,arguments),e}function xT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function pT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Aj(e){var t=1,s=e(xT(t),pT(t));return s.constant=function(n){return arguments.length?e(xT(t=+n),pT(t)):t},Ho(s)}function f7(){var e=Aj(_p());return e.copy=function(){return t0(e,f7()).constant(e.constant())},Ya.apply(e,arguments)}function yT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Pte(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ite(e){return e<0?-e*e:e*e}function Ej(e){var t=e(En,En),s=1;function n(){return s===1?e(En,En):s===.5?e(Pte,Ite):e(yT(s),yT(1/s))}return t.exponent=function(a){return arguments.length?(s=+a,n()):s},Ho(t)}function Tj(){var e=Ej(_p());return e.copy=function(){return t0(e,Tj()).exponent(e.exponent())},Ya.apply(e,arguments),e}function Mte(){return Tj.apply(null,arguments).exponent(.5)}function bT(e){return Math.sign(e)*e*e}function Rte(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function m7(){var e=wj(),t=[0,1],s=!1,n;function a(l){var u=Rte(e(l));return isNaN(u)?n:s?Math.round(u):u}return a.invert=function(l){return e.invert(bT(l))},a.domain=function(l){return arguments.length?(e.domain(l),a):e.domain()},a.range=function(l){return arguments.length?(e.range((t=Array.from(l,Ex)).map(bT)),a):t.slice()},a.rangeRound=function(l){return a.range(l).round(!0)},a.round=function(l){return arguments.length?(s=!!l,a):s},a.clamp=function(l){return arguments.length?(e.clamp(l),a):e.clamp()},a.unknown=function(l){return arguments.length?(n=l,a):n},a.copy=function(){return m7(e.domain(),t).round(s).clamp(e.clamp()).unknown(n)},Ya.apply(a,arguments),Ho(a)}function g7(){var e=[],t=[],s=[],n;function a(){var u=0,f=Math.max(1,t.length);for(s=new Array(f-1);++u<f;)s[u-1]=Uee(e,u/f);return l}function l(u){return u==null||isNaN(u=+u)?n:t[Jf(s,u)]}return l.invertExtent=function(u){var f=t.indexOf(u);return f<0?[NaN,NaN]:[f>0?s[f-1]:e[0],f<s.length?s[f]:e[e.length-1]]},l.domain=function(u){if(!arguments.length)return e.slice();e=[];for(let f of u)f!=null&&!isNaN(f=+f)&&e.push(f);return e.sort(Io),a()},l.range=function(u){return arguments.length?(t=Array.from(u),a()):t.slice()},l.unknown=function(u){return arguments.length?(n=u,l):n},l.quantiles=function(){return s.slice()},l.copy=function(){return g7().domain(e).range(t).unknown(n)},Ya.apply(l,arguments)}function x7(){var e=0,t=1,s=1,n=[.5],a=[0,1],l;function u(m){return m!=null&&m<=m?a[Jf(n,m,0,s)]:l}function f(){var m=-1;for(n=new Array(s);++m<s;)n[m]=((m+1)*t-(m-s)*e)/(s+1);return u}return u.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,f()):[e,t]},u.range=function(m){return arguments.length?(s=(a=Array.from(m)).length-1,f()):a.slice()},u.invertExtent=function(m){var x=a.indexOf(m);return x<0?[NaN,NaN]:x<1?[e,n[0]]:x>=s?[n[s-1],t]:[n[x-1],n[x]]},u.unknown=function(m){return arguments.length&&(l=m),u},u.thresholds=function(){return n.slice()},u.copy=function(){return x7().domain([e,t]).range(a).unknown(l)},Ya.apply(Ho(u),arguments)}function p7(){var e=[.5],t=[0,1],s,n=1;function a(l){return l!=null&&l<=l?t[Jf(e,l,0,n)]:s}return a.domain=function(l){return arguments.length?(e=Array.from(l),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(l){return arguments.length?(t=Array.from(l),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(l){var u=t.indexOf(l);return[e[u-1],e[u]]},a.unknown=function(l){return arguments.length?(s=l,a):s},a.copy=function(){return p7().domain(e).range(t).unknown(s)},Ya.apply(a,arguments)}const Dv=new Date,kv=new Date;function Hs(e,t,s,n){function a(l){return e(l=arguments.length===0?new Date:new Date(+l)),l}return a.floor=l=>(e(l=new Date(+l)),l),a.ceil=l=>(e(l=new Date(l-1)),t(l,1),e(l),l),a.round=l=>{const u=a(l),f=a.ceil(l);return l-u<f-l?u:f},a.offset=(l,u)=>(t(l=new Date(+l),u==null?1:Math.floor(u)),l),a.range=(l,u,f)=>{const m=[];if(l=a.ceil(l),f=f==null?1:Math.floor(f),!(l<u)||!(f>0))return m;let x;do m.push(x=new Date(+l)),t(l,f),e(l);while(x<l&&l<u);return m},a.filter=l=>Hs(u=>{if(u>=u)for(;e(u),!l(u);)u.setTime(u-1)},(u,f)=>{if(u>=u)if(f<0)for(;++f<=0;)for(;t(u,-1),!l(u););else for(;--f>=0;)for(;t(u,1),!l(u););}),s&&(a.count=(l,u)=>(Dv.setTime(+l),kv.setTime(+u),e(Dv),e(kv),Math.floor(s(Dv,kv))),a.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?a.filter(n?u=>n(u)%l===0:u=>a.count(0,u)%l===0):a)),a}const Ox=Hs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ox.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Hs(t=>{t.setTime(Math.floor(t/e)*e)},(t,s)=>{t.setTime(+t+s*e)},(t,s)=>(s-t)/e):Ox);Ox.range;const pl=1e3,Ba=pl*60,yl=Ba*60,Ol=yl*24,Oj=Ol*7,vT=Ol*30,_v=Ol*365,Pc=Hs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*pl)},(e,t)=>(t-e)/pl,e=>e.getUTCSeconds());Pc.range;const Dj=Hs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*pl)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getMinutes());Dj.range;const kj=Hs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getUTCMinutes());kj.range;const _j=Hs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*pl-e.getMinutes()*Ba)},(e,t)=>{e.setTime(+e+t*yl)},(e,t)=>(t-e)/yl,e=>e.getHours());_j.range;const Pj=Hs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*yl)},(e,t)=>(t-e)/yl,e=>e.getUTCHours());Pj.range;const r0=Hs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ba)/Ol,e=>e.getDate()-1);r0.range;const Pp=Hs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ol,e=>e.getUTCDate()-1);Pp.range;const y7=Hs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ol,e=>Math.floor(e/Ol));y7.range;function Xc(e){return Hs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,s)=>{t.setDate(t.getDate()+s*7)},(t,s)=>(s-t-(s.getTimezoneOffset()-t.getTimezoneOffset())*Ba)/Oj)}const Ip=Xc(0),Dx=Xc(1),Lte=Xc(2),Bte=Xc(3),yd=Xc(4),Fte=Xc(5),Ute=Xc(6);Ip.range;Dx.range;Lte.range;Bte.range;yd.range;Fte.range;Ute.range;function Wc(e){return Hs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+s*7)},(t,s)=>(s-t)/Oj)}const Mp=Wc(0),kx=Wc(1),zte=Wc(2),Vte=Wc(3),bd=Wc(4),$te=Wc(5),qte=Wc(6);Mp.range;kx.range;zte.range;Vte.range;bd.range;$te.range;qte.range;const Ij=Hs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ij.range;const Mj=Hs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Mj.range;const Dl=Hs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Dl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,s)=>{t.setFullYear(t.getFullYear()+s*e)});Dl.range;const kl=Hs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());kl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCFullYear(t.getUTCFullYear()+s*e)});kl.range;function b7(e,t,s,n,a,l){const u=[[Pc,1,pl],[Pc,5,5*pl],[Pc,15,15*pl],[Pc,30,30*pl],[l,1,Ba],[l,5,5*Ba],[l,15,15*Ba],[l,30,30*Ba],[a,1,yl],[a,3,3*yl],[a,6,6*yl],[a,12,12*yl],[n,1,Ol],[n,2,2*Ol],[s,1,Oj],[t,1,vT],[t,3,3*vT],[e,1,_v]];function f(x,p,v){const C=p<x;C&&([x,p]=[p,x]);const T=v&&typeof v.range=="function"?v:m(x,p,v),E=T?T.range(x,+p+1):[];return C?E.reverse():E}function m(x,p,v){const C=Math.abs(p-x)/v,T=xj(([,,O])=>O).right(u,C);if(T===u.length)return e.every(jN(x/_v,p/_v,v));if(T===0)return Ox.every(Math.max(jN(x,p,v),1));const[E,k]=u[C/u[T-1][2]<u[T][2]/C?T-1:T];return E.every(k)}return[f,m]}const[Hte,Gte]=b7(kl,Mj,Mp,y7,Pj,kj),[Yte,Xte]=b7(Dl,Ij,Ip,r0,_j,Dj);function Pv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Iv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fh(e,t,s){return{y:e,m:t,d:s,H:0,M:0,S:0,L:0}}function Wte(e){var t=e.dateTime,s=e.date,n=e.time,a=e.periods,l=e.days,u=e.shortDays,f=e.months,m=e.shortMonths,x=Uh(a),p=zh(a),v=Uh(l),C=zh(l),T=Uh(u),E=zh(u),k=Uh(f),O=zh(f),M=Uh(m),L=zh(m),P={a:ne,A:pe,b:be,B:te,c:null,d:AT,e:AT,f:yre,g:Tre,G:Dre,H:gre,I:xre,j:pre,L:v7,m:bre,M:vre,p:X,q:re,Q:OT,s:DT,S:Nre,u:wre,U:jre,V:Sre,w:Cre,W:Are,x:null,X:null,y:Ere,Y:Ore,Z:kre,"%":TT},H={a:ge,A:de,b:je,B:oe,c:null,d:ET,e:ET,f:Mre,g:Hre,G:Yre,H:_re,I:Pre,j:Ire,L:w7,m:Rre,M:Lre,p:fe,q:qe,Q:OT,s:DT,S:Bre,u:Fre,U:Ure,V:zre,w:Vre,W:$re,x:null,X:null,y:qre,Y:Gre,Z:Xre,"%":TT},B={a:Y,A:$,b:G,B:ee,c:ce,d:ST,e:ST,f:dre,g:jT,G:wT,H:CT,I:CT,j:lre,L:ure,m:ire,M:ore,p:U,q:are,Q:fre,s:mre,S:cre,u:ere,U:tre,V:rre,w:Jte,W:sre,x:se,X:J,y:jT,Y:wT,Z:nre,"%":hre};P.x=F(s,P),P.X=F(n,P),P.c=F(t,P),H.x=F(s,H),H.X=F(n,H),H.c=F(t,H);function F(Ne,Xe){return function(st){var Le=[],we=-1,Ue=0,ue=Ne.length,He,Se,tt;for(st instanceof Date||(st=new Date(+st));++we<ue;)Ne.charCodeAt(we)===37&&(Le.push(Ne.slice(Ue,we)),(Se=NT[He=Ne.charAt(++we)])!=null?He=Ne.charAt(++we):Se=He==="e"?" ":"0",(tt=Xe[He])&&(He=tt(st,Se)),Le.push(He),Ue=we+1);return Le.push(Ne.slice(Ue,we)),Le.join("")}}function R(Ne,Xe){return function(st){var Le=Fh(1900,void 0,1),we=z(Le,Ne,st+="",0),Ue,ue;if(we!=st.length)return null;if("Q"in Le)return new Date(Le.Q);if("s"in Le)return new Date(Le.s*1e3+("L"in Le?Le.L:0));if(Xe&&!("Z"in Le)&&(Le.Z=0),"p"in Le&&(Le.H=Le.H%12+Le.p*12),Le.m===void 0&&(Le.m="q"in Le?Le.q:0),"V"in Le){if(Le.V<1||Le.V>53)return null;"w"in Le||(Le.w=1),"Z"in Le?(Ue=Iv(Fh(Le.y,0,1)),ue=Ue.getUTCDay(),Ue=ue>4||ue===0?kx.ceil(Ue):kx(Ue),Ue=Pp.offset(Ue,(Le.V-1)*7),Le.y=Ue.getUTCFullYear(),Le.m=Ue.getUTCMonth(),Le.d=Ue.getUTCDate()+(Le.w+6)%7):(Ue=Pv(Fh(Le.y,0,1)),ue=Ue.getDay(),Ue=ue>4||ue===0?Dx.ceil(Ue):Dx(Ue),Ue=r0.offset(Ue,(Le.V-1)*7),Le.y=Ue.getFullYear(),Le.m=Ue.getMonth(),Le.d=Ue.getDate()+(Le.w+6)%7)}else("W"in Le||"U"in Le)&&("w"in Le||(Le.w="u"in Le?Le.u%7:"W"in Le?1:0),ue="Z"in Le?Iv(Fh(Le.y,0,1)).getUTCDay():Pv(Fh(Le.y,0,1)).getDay(),Le.m=0,Le.d="W"in Le?(Le.w+6)%7+Le.W*7-(ue+5)%7:Le.w+Le.U*7-(ue+6)%7);return"Z"in Le?(Le.H+=Le.Z/100|0,Le.M+=Le.Z%100,Iv(Le)):Pv(Le)}}function z(Ne,Xe,st,Le){for(var we=0,Ue=Xe.length,ue=st.length,He,Se;we<Ue;){if(Le>=ue)return-1;if(He=Xe.charCodeAt(we++),He===37){if(He=Xe.charAt(we++),Se=B[He in NT?Xe.charAt(we++):He],!Se||(Le=Se(Ne,st,Le))<0)return-1}else if(He!=st.charCodeAt(Le++))return-1}return Le}function U(Ne,Xe,st){var Le=x.exec(Xe.slice(st));return Le?(Ne.p=p.get(Le[0].toLowerCase()),st+Le[0].length):-1}function Y(Ne,Xe,st){var Le=T.exec(Xe.slice(st));return Le?(Ne.w=E.get(Le[0].toLowerCase()),st+Le[0].length):-1}function $(Ne,Xe,st){var Le=v.exec(Xe.slice(st));return Le?(Ne.w=C.get(Le[0].toLowerCase()),st+Le[0].length):-1}function G(Ne,Xe,st){var Le=M.exec(Xe.slice(st));return Le?(Ne.m=L.get(Le[0].toLowerCase()),st+Le[0].length):-1}function ee(Ne,Xe,st){var Le=k.exec(Xe.slice(st));return Le?(Ne.m=O.get(Le[0].toLowerCase()),st+Le[0].length):-1}function ce(Ne,Xe,st){return z(Ne,t,Xe,st)}function se(Ne,Xe,st){return z(Ne,s,Xe,st)}function J(Ne,Xe,st){return z(Ne,n,Xe,st)}function ne(Ne){return u[Ne.getDay()]}function pe(Ne){return l[Ne.getDay()]}function be(Ne){return m[Ne.getMonth()]}function te(Ne){return f[Ne.getMonth()]}function X(Ne){return a[+(Ne.getHours()>=12)]}function re(Ne){return 1+~~(Ne.getMonth()/3)}function ge(Ne){return u[Ne.getUTCDay()]}function de(Ne){return l[Ne.getUTCDay()]}function je(Ne){return m[Ne.getUTCMonth()]}function oe(Ne){return f[Ne.getUTCMonth()]}function fe(Ne){return a[+(Ne.getUTCHours()>=12)]}function qe(Ne){return 1+~~(Ne.getUTCMonth()/3)}return{format:function(Ne){var Xe=F(Ne+="",P);return Xe.toString=function(){return Ne},Xe},parse:function(Ne){var Xe=R(Ne+="",!1);return Xe.toString=function(){return Ne},Xe},utcFormat:function(Ne){var Xe=F(Ne+="",H);return Xe.toString=function(){return Ne},Xe},utcParse:function(Ne){var Xe=R(Ne+="",!0);return Xe.toString=function(){return Ne},Xe}}}var NT={"-":"",_:" ",0:"0"},sn=/^\s*\d+/,Kte=/^%/,Zte=/[\\^$*+?|[\]().{}]/g;function cr(e,t,s){var n=e<0?"-":"",a=(n?-e:e)+"",l=a.length;return n+(l<s?new Array(s-l+1).join(t)+a:a)}function Qte(e){return e.replace(Zte,"\\$&")}function Uh(e){return new RegExp("^(?:"+e.map(Qte).join("|")+")","i")}function zh(e){return new Map(e.map((t,s)=>[t.toLowerCase(),s]))}function Jte(e,t,s){var n=sn.exec(t.slice(s,s+1));return n?(e.w=+n[0],s+n[0].length):-1}function ere(e,t,s){var n=sn.exec(t.slice(s,s+1));return n?(e.u=+n[0],s+n[0].length):-1}function tre(e,t,s){var n=sn.exec(t.slice(s,s+2));return n?(e.U=+n[0],s+n[0].length):-1}function rre(e,t,s){var n=sn.exec(t.slice(s,s+2));return n?(e.V=+n[0],s+n[0].length):-1}function sre(e,t,s){var n=sn.exec(t.slice(s,s+2));return n?(e.W=+n[0],s+n[0].length):-1}function wT(e,t,s){var n=sn.exec(t.slice(s,s+4));return n?(e.y=+n[0],s+n[0].length):-1}function jT(e,t,s){var n=sn.exec(t.slice(s,s+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),s+n[0].length):-1}function nre(e,t,s){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(s,s+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),s+n[0].length):-1}function are(e,t,s){var n=sn.exec(t.slice(s,s+1));return n?(e.q=n[0]*3-3,s+n[0].length):-1}function ire(e,t,s){var n=sn.exec(t.slice(s,s+2));return n?(e.m=n[0]-1,s+n[0].length):-1}function ST(e,t,s){var n=sn.exec(t.slice(s,s+2));return n?(e.d=+n[0],s+n[0].length):-1}function lre(e,t,s){var n=sn.exec(t.slice(s,s+3));return n?(e.m=0,e.d=+n[0],s+n[0].length):-1}function CT(e,t,s){var n=sn.exec(t.slice(s,s+2));return n?(e.H=+n[0],s+n[0].length):-1}function ore(e,t,s){var n=sn.exec(t.slice(s,s+2));return n?(e.M=+n[0],s+n[0].length):-1}function cre(e,t,s){var n=sn.exec(t.slice(s,s+2));return n?(e.S=+n[0],s+n[0].length):-1}function ure(e,t,s){var n=sn.exec(t.slice(s,s+3));return n?(e.L=+n[0],s+n[0].length):-1}function dre(e,t,s){var n=sn.exec(t.slice(s,s+6));return n?(e.L=Math.floor(n[0]/1e3),s+n[0].length):-1}function hre(e,t,s){var n=Kte.exec(t.slice(s,s+1));return n?s+n[0].length:-1}function fre(e,t,s){var n=sn.exec(t.slice(s));return n?(e.Q=+n[0],s+n[0].length):-1}function mre(e,t,s){var n=sn.exec(t.slice(s));return n?(e.s=+n[0],s+n[0].length):-1}function AT(e,t){return cr(e.getDate(),t,2)}function gre(e,t){return cr(e.getHours(),t,2)}function xre(e,t){return cr(e.getHours()%12||12,t,2)}function pre(e,t){return cr(1+r0.count(Dl(e),e),t,3)}function v7(e,t){return cr(e.getMilliseconds(),t,3)}function yre(e,t){return v7(e,t)+"000"}function bre(e,t){return cr(e.getMonth()+1,t,2)}function vre(e,t){return cr(e.getMinutes(),t,2)}function Nre(e,t){return cr(e.getSeconds(),t,2)}function wre(e){var t=e.getDay();return t===0?7:t}function jre(e,t){return cr(Ip.count(Dl(e)-1,e),t,2)}function N7(e){var t=e.getDay();return t>=4||t===0?yd(e):yd.ceil(e)}function Sre(e,t){return e=N7(e),cr(yd.count(Dl(e),e)+(Dl(e).getDay()===4),t,2)}function Cre(e){return e.getDay()}function Are(e,t){return cr(Dx.count(Dl(e)-1,e),t,2)}function Ere(e,t){return cr(e.getFullYear()%100,t,2)}function Tre(e,t){return e=N7(e),cr(e.getFullYear()%100,t,2)}function Ore(e,t){return cr(e.getFullYear()%1e4,t,4)}function Dre(e,t){var s=e.getDay();return e=s>=4||s===0?yd(e):yd.ceil(e),cr(e.getFullYear()%1e4,t,4)}function kre(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+cr(t/60|0,"0",2)+cr(t%60,"0",2)}function ET(e,t){return cr(e.getUTCDate(),t,2)}function _re(e,t){return cr(e.getUTCHours(),t,2)}function Pre(e,t){return cr(e.getUTCHours()%12||12,t,2)}function Ire(e,t){return cr(1+Pp.count(kl(e),e),t,3)}function w7(e,t){return cr(e.getUTCMilliseconds(),t,3)}function Mre(e,t){return w7(e,t)+"000"}function Rre(e,t){return cr(e.getUTCMonth()+1,t,2)}function Lre(e,t){return cr(e.getUTCMinutes(),t,2)}function Bre(e,t){return cr(e.getUTCSeconds(),t,2)}function Fre(e){var t=e.getUTCDay();return t===0?7:t}function Ure(e,t){return cr(Mp.count(kl(e)-1,e),t,2)}function j7(e){var t=e.getUTCDay();return t>=4||t===0?bd(e):bd.ceil(e)}function zre(e,t){return e=j7(e),cr(bd.count(kl(e),e)+(kl(e).getUTCDay()===4),t,2)}function Vre(e){return e.getUTCDay()}function $re(e,t){return cr(kx.count(kl(e)-1,e),t,2)}function qre(e,t){return cr(e.getUTCFullYear()%100,t,2)}function Hre(e,t){return e=j7(e),cr(e.getUTCFullYear()%100,t,2)}function Gre(e,t){return cr(e.getUTCFullYear()%1e4,t,4)}function Yre(e,t){var s=e.getUTCDay();return e=s>=4||s===0?bd(e):bd.ceil(e),cr(e.getUTCFullYear()%1e4,t,4)}function Xre(){return"+0000"}function TT(){return"%"}function OT(e){return+e}function DT(e){return Math.floor(+e/1e3)}var Pu,S7,C7;Wre({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Wre(e){return Pu=Wte(e),S7=Pu.format,Pu.parse,C7=Pu.utcFormat,Pu.utcParse,Pu}function Kre(e){return new Date(e)}function Zre(e){return e instanceof Date?+e:+new Date(+e)}function Rj(e,t,s,n,a,l,u,f,m,x){var p=wj(),v=p.invert,C=p.domain,T=x(".%L"),E=x(":%S"),k=x("%I:%M"),O=x("%I %p"),M=x("%a %d"),L=x("%b %d"),P=x("%B"),H=x("%Y");function B(F){return(m(F)<F?T:f(F)<F?E:u(F)<F?k:l(F)<F?O:n(F)<F?a(F)<F?M:L:s(F)<F?P:H)(F)}return p.invert=function(F){return new Date(v(F))},p.domain=function(F){return arguments.length?C(Array.from(F,Zre)):C().map(Kre)},p.ticks=function(F){var R=C();return e(R[0],R[R.length-1],F??10)},p.tickFormat=function(F,R){return R==null?B:x(R)},p.nice=function(F){var R=C();return(!F||typeof F.range!="function")&&(F=t(R[0],R[R.length-1],F??10)),F?C(d7(R,F)):p},p.copy=function(){return t0(p,Rj(e,t,s,n,a,l,u,f,m,x))},p}function Qre(){return Ya.apply(Rj(Yte,Xte,Dl,Ij,Ip,r0,_j,Dj,Pc,S7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Jre(){return Ya.apply(Rj(Hte,Gte,kl,Mj,Mp,Pp,Pj,kj,Pc,C7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Rp(){var e=0,t=1,s,n,a,l,u=En,f=!1,m;function x(v){return v==null||isNaN(v=+v)?m:u(a===0?.5:(v=(l(v)-s)*a,f?Math.max(0,Math.min(1,v)):v))}x.domain=function(v){return arguments.length?([e,t]=v,s=l(e=+e),n=l(t=+t),a=s===n?0:1/(n-s),x):[e,t]},x.clamp=function(v){return arguments.length?(f=!!v,x):f},x.interpolator=function(v){return arguments.length?(u=v,x):u};function p(v){return function(C){var T,E;return arguments.length?([T,E]=C,u=v(T,E),x):[u(0),u(1)]}}return x.range=p(Pd),x.rangeRound=p(Nj),x.unknown=function(v){return arguments.length?(m=v,x):m},function(v){return l=v,s=v(e),n=v(t),a=s===n?0:1/(n-s),x}}function Go(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function A7(){var e=Ho(Rp()(En));return e.copy=function(){return Go(e,A7())},Ml.apply(e,arguments)}function E7(){var e=Cj(Rp()).domain([1,10]);return e.copy=function(){return Go(e,E7()).base(e.base())},Ml.apply(e,arguments)}function T7(){var e=Aj(Rp());return e.copy=function(){return Go(e,T7()).constant(e.constant())},Ml.apply(e,arguments)}function Lj(){var e=Ej(Rp());return e.copy=function(){return Go(e,Lj()).exponent(e.exponent())},Ml.apply(e,arguments)}function ese(){return Lj.apply(null,arguments).exponent(.5)}function O7(){var e=[],t=En;function s(n){if(n!=null&&!isNaN(n=+n))return t((Jf(e,n,1)-1)/(e.length-1))}return s.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Io),s},s.interpolator=function(n){return arguments.length?(t=n,s):t},s.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},s.quantiles=function(n){return Array.from({length:n+1},(a,l)=>Fee(e,l/n))},s.copy=function(){return O7(t).domain(e)},Ml.apply(s,arguments)}function Lp(){var e=0,t=.5,s=1,n=1,a,l,u,f,m,x=En,p,v=!1,C;function T(k){return isNaN(k=+k)?C:(k=.5+((k=+p(k))-l)*(n*k<n*l?f:m),x(v?Math.max(0,Math.min(1,k)):k))}T.domain=function(k){return arguments.length?([e,t,s]=k,a=p(e=+e),l=p(t=+t),u=p(s=+s),f=a===l?0:.5/(l-a),m=l===u?0:.5/(u-l),n=l<a?-1:1,T):[e,t,s]},T.clamp=function(k){return arguments.length?(v=!!k,T):v},T.interpolator=function(k){return arguments.length?(x=k,T):x};function E(k){return function(O){var M,L,P;return arguments.length?([M,L,P]=O,x=hte(k,[M,L,P]),T):[x(0),x(.5),x(1)]}}return T.range=E(Pd),T.rangeRound=E(Nj),T.unknown=function(k){return arguments.length?(C=k,T):C},function(k){return p=k,a=k(e),l=k(t),u=k(s),f=a===l?0:.5/(l-a),m=l===u?0:.5/(u-l),n=l<a?-1:1,T}}function D7(){var e=Ho(Lp()(En));return e.copy=function(){return Go(e,D7())},Ml.apply(e,arguments)}function k7(){var e=Cj(Lp()).domain([.1,1,10]);return e.copy=function(){return Go(e,k7()).base(e.base())},Ml.apply(e,arguments)}function _7(){var e=Aj(Lp());return e.copy=function(){return Go(e,_7()).constant(e.constant())},Ml.apply(e,arguments)}function Bj(){var e=Ej(Lp());return e.copy=function(){return Go(e,Bj()).exponent(e.exponent())},Ml.apply(e,arguments)}function tse(){return Bj.apply(null,arguments).exponent(.5)}const Jh=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:yj,scaleDiverging:D7,scaleDivergingLog:k7,scaleDivergingPow:Bj,scaleDivergingSqrt:tse,scaleDivergingSymlog:_7,scaleIdentity:u7,scaleImplicit:SN,scaleLinear:c7,scaleLog:h7,scaleOrdinal:pj,scalePoint:Vee,scalePow:Tj,scaleQuantile:g7,scaleQuantize:x7,scaleRadial:m7,scaleSequential:A7,scaleSequentialLog:E7,scaleSequentialPow:Lj,scaleSequentialQuantile:O7,scaleSequentialSqrt:ese,scaleSequentialSymlog:T7,scaleSqrt:Mte,scaleSymlog:f7,scaleThreshold:p7,scaleTime:Qre,scaleUtc:Jre,tickFormat:o7},Symbol.toStringTag,{value:"Module"}));var Yo=e=>e.chartData,Fj=Ie([Yo],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),P7=(e,t,s,n)=>n?Fj(e):Yo(e);function zo(e){if(Array.isArray(e)&&e.length===2){var[t,s]=e;if(tn(t)&&tn(s))return!0}return!1}function kT(e,t,s){return s?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function I7(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[s,n]=e,a,l;if(tn(s))a=s;else if(typeof s=="function")return;if(tn(n))l=n;else if(typeof n=="function")return;var u=[a,l];if(zo(u))return u}}function rse(e,t,s){if(!(!s&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,s);if(zo(n))return kT(n,t,s)}catch{}if(Array.isArray(e)&&e.length===2){var[a,l]=e,u,f;if(a==="auto")t!=null&&(u=Math.min(...t));else if(It(a))u=a;else if(typeof a=="function")try{t!=null&&(u=a(t?.[0]))}catch{}else if(typeof a=="string"&&s6.test(a)){var m=s6.exec(a);if(m==null||t==null)u=void 0;else{var x=+m[1];u=t[0]-x}}else u=t?.[0];if(l==="auto")t!=null&&(f=Math.max(...t));else if(It(l))f=l;else if(typeof l=="function")try{t!=null&&(f=l(t?.[1]))}catch{}else if(typeof l=="string"&&n6.test(l)){var p=n6.exec(l);if(p==null||t==null)f=void 0;else{var v=+p[1];f=t[1]+v}}else f=t?.[1];var C=[u,f];if(zo(C))return t==null?C:kT(C,t,s)}}}var Id=1e9,sse={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},zj,rs=!0,Ha="[DecimalError] ",Uc=Ha+"Invalid argument: ",Uj=Ha+"Exponent out of range: ",Md=Math.floor,Ac=Math.pow,nse=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ua,Qs=1e7,Wr=7,M7=9007199254740991,_x=Md(M7/Wr),mt={};mt.absoluteValue=mt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};mt.comparedTo=mt.cmp=function(e){var t,s,n,a,l=this;if(e=new l.constructor(e),l.s!==e.s)return l.s||-e.s;if(l.e!==e.e)return l.e>e.e^l.s<0?1:-1;for(n=l.d.length,a=e.d.length,t=0,s=n<a?n:a;t<s;++t)if(l.d[t]!==e.d[t])return l.d[t]>e.d[t]^l.s<0?1:-1;return n===a?0:n>a^l.s<0?1:-1};mt.decimalPlaces=mt.dp=function(){var e=this,t=e.d.length-1,s=(t-e.e)*Wr;if(t=e.d[t],t)for(;t%10==0;t/=10)s--;return s<0?0:s};mt.dividedBy=mt.div=function(e){return vl(this,new this.constructor(e))};mt.dividedToIntegerBy=mt.idiv=function(e){var t=this,s=t.constructor;return Fr(vl(t,new s(e),0,1),s.precision)};mt.equals=mt.eq=function(e){return!this.cmp(e)};mt.exponent=function(){return Rs(this)};mt.greaterThan=mt.gt=function(e){return this.cmp(e)>0};mt.greaterThanOrEqualTo=mt.gte=function(e){return this.cmp(e)>=0};mt.isInteger=mt.isint=function(){return this.e>this.d.length-2};mt.isNegative=mt.isneg=function(){return this.s<0};mt.isPositive=mt.ispos=function(){return this.s>0};mt.isZero=function(){return this.s===0};mt.lessThan=mt.lt=function(e){return this.cmp(e)<0};mt.lessThanOrEqualTo=mt.lte=function(e){return this.cmp(e)<1};mt.logarithm=mt.log=function(e){var t,s=this,n=s.constructor,a=n.precision,l=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ua))throw Error(Ha+"NaN");if(s.s<1)throw Error(Ha+(s.s?"NaN":"-Infinity"));return s.eq(ua)?new n(0):(rs=!1,t=vl(kf(s,l),kf(e,l),l),rs=!0,Fr(t,a))};mt.minus=mt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?B7(t,e):R7(t,(e.s=-e.s,e))};mt.modulo=mt.mod=function(e){var t,s=this,n=s.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Ha+"NaN");return s.s?(rs=!1,t=vl(s,e,0,1).times(e),rs=!0,s.minus(t)):Fr(new n(s),a)};mt.naturalExponential=mt.exp=function(){return L7(this)};mt.naturalLogarithm=mt.ln=function(){return kf(this)};mt.negated=mt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};mt.plus=mt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?R7(t,e):B7(t,(e.s=-e.s,e))};mt.precision=mt.sd=function(e){var t,s,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Uc+e);if(t=Rs(a)+1,n=a.d.length-1,s=n*Wr+1,n=a.d[n],n){for(;n%10==0;n/=10)s--;for(n=a.d[0];n>=10;n/=10)s++}return e&&t>s?t:s};mt.squareRoot=mt.sqrt=function(){var e,t,s,n,a,l,u,f=this,m=f.constructor;if(f.s<1){if(!f.s)return new m(0);throw Error(Ha+"NaN")}for(e=Rs(f),rs=!1,a=Math.sqrt(+f),a==0||a==1/0?(t=Ii(f.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Md((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new m(t)):n=new m(a.toString()),s=m.precision,a=u=s+3;;)if(l=n,n=l.plus(vl(f,l,u+2)).times(.5),Ii(l.d).slice(0,u)===(t=Ii(n.d)).slice(0,u)){if(t=t.slice(u-3,u+1),a==u&&t=="4999"){if(Fr(l,s+1,0),l.times(l).eq(f)){n=l;break}}else if(t!="9999")break;u+=4}return rs=!0,Fr(n,s)};mt.times=mt.mul=function(e){var t,s,n,a,l,u,f,m,x,p=this,v=p.constructor,C=p.d,T=(e=new v(e)).d;if(!p.s||!e.s)return new v(0);for(e.s*=p.s,s=p.e+e.e,m=C.length,x=T.length,m<x&&(l=C,C=T,T=l,u=m,m=x,x=u),l=[],u=m+x,n=u;n--;)l.push(0);for(n=x;--n>=0;){for(t=0,a=m+n;a>n;)f=l[a]+T[n]*C[a-n-1]+t,l[a--]=f%Qs|0,t=f/Qs|0;l[a]=(l[a]+t)%Qs|0}for(;!l[--u];)l.pop();return t?++s:l.shift(),e.d=l,e.e=s,rs?Fr(e,v.precision):e};mt.toDecimalPlaces=mt.todp=function(e,t){var s=this,n=s.constructor;return s=new n(s),e===void 0?s:(zi(e,0,Id),t===void 0?t=n.rounding:zi(t,0,8),Fr(s,e+Rs(s)+1,t))};mt.toExponential=function(e,t){var s,n=this,a=n.constructor;return e===void 0?s=Hc(n,!0):(zi(e,0,Id),t===void 0?t=a.rounding:zi(t,0,8),n=Fr(new a(n),e+1,t),s=Hc(n,!0,e+1)),s};mt.toFixed=function(e,t){var s,n,a=this,l=a.constructor;return e===void 0?Hc(a):(zi(e,0,Id),t===void 0?t=l.rounding:zi(t,0,8),n=Fr(new l(a),e+Rs(a)+1,t),s=Hc(n.abs(),!1,e+Rs(n)+1),a.isneg()&&!a.isZero()?"-"+s:s)};mt.toInteger=mt.toint=function(){var e=this,t=e.constructor;return Fr(new t(e),Rs(e)+1,t.rounding)};mt.toNumber=function(){return+this};mt.toPower=mt.pow=function(e){var t,s,n,a,l,u,f=this,m=f.constructor,x=12,p=+(e=new m(e));if(!e.s)return new m(ua);if(f=new m(f),!f.s){if(e.s<1)throw Error(Ha+"Infinity");return f}if(f.eq(ua))return f;if(n=m.precision,e.eq(ua))return Fr(f,n);if(t=e.e,s=e.d.length-1,u=t>=s,l=f.s,u){if((s=p<0?-p:p)<=M7){for(a=new m(ua),t=Math.ceil(n/Wr+4),rs=!1;s%2&&(a=a.times(f),PT(a.d,t)),s=Md(s/2),s!==0;)f=f.times(f),PT(f.d,t);return rs=!0,e.s<0?new m(ua).div(a):Fr(a,n)}}else if(l<0)throw Error(Ha+"NaN");return l=l<0&&e.d[Math.max(t,s)]&1?-1:1,f.s=1,rs=!1,a=e.times(kf(f,n+x)),rs=!0,a=L7(a),a.s=l,a};mt.toPrecision=function(e,t){var s,n,a=this,l=a.constructor;return e===void 0?(s=Rs(a),n=Hc(a,s<=l.toExpNeg||s>=l.toExpPos)):(zi(e,1,Id),t===void 0?t=l.rounding:zi(t,0,8),a=Fr(new l(a),e,t),s=Rs(a),n=Hc(a,e<=s||s<=l.toExpNeg,e)),n};mt.toSignificantDigits=mt.tosd=function(e,t){var s=this,n=s.constructor;return e===void 0?(e=n.precision,t=n.rounding):(zi(e,1,Id),t===void 0?t=n.rounding:zi(t,0,8)),Fr(new n(s),e,t)};mt.toString=mt.valueOf=mt.val=mt.toJSON=mt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Rs(e),s=e.constructor;return Hc(e,t<=s.toExpNeg||t>=s.toExpPos)};function R7(e,t){var s,n,a,l,u,f,m,x,p=e.constructor,v=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),rs?Fr(t,v):t;if(m=e.d,x=t.d,u=e.e,a=t.e,m=m.slice(),l=u-a,l){for(l<0?(n=m,l=-l,f=x.length):(n=x,a=u,f=m.length),u=Math.ceil(v/Wr),f=u>f?u+1:f+1,l>f&&(l=f,n.length=1),n.reverse();l--;)n.push(0);n.reverse()}for(f=m.length,l=x.length,f-l<0&&(l=f,n=x,x=m,m=n),s=0;l;)s=(m[--l]=m[l]+x[l]+s)/Qs|0,m[l]%=Qs;for(s&&(m.unshift(s),++a),f=m.length;m[--f]==0;)m.pop();return t.d=m,t.e=a,rs?Fr(t,v):t}function zi(e,t,s){if(e!==~~e||e<t||e>s)throw Error(Uc+e)}function Ii(e){var t,s,n,a=e.length-1,l="",u=e[0];if(a>0){for(l+=u,t=1;t<a;t++)n=e[t]+"",s=Wr-n.length,s&&(l+=Oo(s)),l+=n;u=e[t],n=u+"",s=Wr-n.length,s&&(l+=Oo(s))}else if(u===0)return"0";for(;u%10===0;)u/=10;return l+u}var vl=(function(){function e(n,a){var l,u=0,f=n.length;for(n=n.slice();f--;)l=n[f]*a+u,n[f]=l%Qs|0,u=l/Qs|0;return u&&n.unshift(u),n}function t(n,a,l,u){var f,m;if(l!=u)m=l>u?1:-1;else for(f=m=0;f<l;f++)if(n[f]!=a[f]){m=n[f]>a[f]?1:-1;break}return m}function s(n,a,l){for(var u=0;l--;)n[l]-=u,u=n[l]<a[l]?1:0,n[l]=u*Qs+n[l]-a[l];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,l,u){var f,m,x,p,v,C,T,E,k,O,M,L,P,H,B,F,R,z,U=n.constructor,Y=n.s==a.s?1:-1,$=n.d,G=a.d;if(!n.s)return new U(n);if(!a.s)throw Error(Ha+"Division by zero");for(m=n.e-a.e,R=G.length,B=$.length,T=new U(Y),E=T.d=[],x=0;G[x]==($[x]||0);)++x;if(G[x]>($[x]||0)&&--m,l==null?L=l=U.precision:u?L=l+(Rs(n)-Rs(a))+1:L=l,L<0)return new U(0);if(L=L/Wr+2|0,x=0,R==1)for(p=0,G=G[0],L++;(x<B||p)&&L--;x++)P=p*Qs+($[x]||0),E[x]=P/G|0,p=P%G|0;else{for(p=Qs/(G[0]+1)|0,p>1&&(G=e(G,p),$=e($,p),R=G.length,B=$.length),H=R,k=$.slice(0,R),O=k.length;O<R;)k[O++]=0;z=G.slice(),z.unshift(0),F=G[0],G[1]>=Qs/2&&++F;do p=0,f=t(G,k,R,O),f<0?(M=k[0],R!=O&&(M=M*Qs+(k[1]||0)),p=M/F|0,p>1?(p>=Qs&&(p=Qs-1),v=e(G,p),C=v.length,O=k.length,f=t(v,k,C,O),f==1&&(p--,s(v,R<C?z:G,C))):(p==0&&(f=p=1),v=G.slice()),C=v.length,C<O&&v.unshift(0),s(k,v,O),f==-1&&(O=k.length,f=t(G,k,R,O),f<1&&(p++,s(k,R<O?z:G,O))),O=k.length):f===0&&(p++,k=[0]),E[x++]=p,f&&k[0]?k[O++]=$[H]||0:(k=[$[H]],O=1);while((H++<B||k[0]!==void 0)&&L--)}return E[0]||E.shift(),T.e=m,Fr(T,u?l+Rs(T)+1:l)}})();function L7(e,t){var s,n,a,l,u,f,m=0,x=0,p=e.constructor,v=p.precision;if(Rs(e)>16)throw Error(Uj+Rs(e));if(!e.s)return new p(ua);for(rs=!1,f=v,u=new p(.03125);e.abs().gte(.1);)e=e.times(u),x+=5;for(n=Math.log(Ac(2,x))/Math.LN10*2+5|0,f+=n,s=a=l=new p(ua),p.precision=f;;){if(a=Fr(a.times(e),f),s=s.times(++m),u=l.plus(vl(a,s,f)),Ii(u.d).slice(0,f)===Ii(l.d).slice(0,f)){for(;x--;)l=Fr(l.times(l),f);return p.precision=v,t==null?(rs=!0,Fr(l,v)):l}l=u}}function Rs(e){for(var t=e.e*Wr,s=e.d[0];s>=10;s/=10)t++;return t}function Mv(e,t,s){if(t>e.LN10.sd())throw rs=!0,s&&(e.precision=s),Error(Ha+"LN10 precision limit exceeded");return Fr(new e(e.LN10),t)}function Oo(e){for(var t="";e--;)t+="0";return t}function kf(e,t){var s,n,a,l,u,f,m,x,p,v=1,C=10,T=e,E=T.d,k=T.constructor,O=k.precision;if(T.s<1)throw Error(Ha+(T.s?"NaN":"-Infinity"));if(T.eq(ua))return new k(0);if(t==null?(rs=!1,x=O):x=t,T.eq(10))return t==null&&(rs=!0),Mv(k,x);if(x+=C,k.precision=x,s=Ii(E),n=s.charAt(0),l=Rs(T),Math.abs(l)<15e14){for(;n<7&&n!=1||n==1&&s.charAt(1)>3;)T=T.times(e),s=Ii(T.d),n=s.charAt(0),v++;l=Rs(T),n>1?(T=new k("0."+s),l++):T=new k(n+"."+s.slice(1))}else return m=Mv(k,x+2,O).times(l+""),T=kf(new k(n+"."+s.slice(1)),x-C).plus(m),k.precision=O,t==null?(rs=!0,Fr(T,O)):T;for(f=u=T=vl(T.minus(ua),T.plus(ua),x),p=Fr(T.times(T),x),a=3;;){if(u=Fr(u.times(p),x),m=f.plus(vl(u,new k(a),x)),Ii(m.d).slice(0,x)===Ii(f.d).slice(0,x))return f=f.times(2),l!==0&&(f=f.plus(Mv(k,x+2,O).times(l+""))),f=vl(f,new k(v),x),k.precision=O,t==null?(rs=!0,Fr(f,O)):f;f=m,a+=2}}function _T(e,t){var s,n,a;for((s=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(s<0&&(s=n),s+=+t.slice(n+1),t=t.substring(0,n)):s<0&&(s=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,s=s-n-1,e.e=Md(s/Wr),e.d=[],n=(s+1)%Wr,s<0&&(n+=Wr),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Wr;n<a;)e.d.push(+t.slice(n,n+=Wr));t=t.slice(n),n=Wr-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),rs&&(e.e>_x||e.e<-_x))throw Error(Uj+s)}else e.s=0,e.e=0,e.d=[0];return e}function Fr(e,t,s){var n,a,l,u,f,m,x,p,v=e.d;for(u=1,l=v[0];l>=10;l/=10)u++;if(n=t-u,n<0)n+=Wr,a=t,x=v[p=0];else{if(p=Math.ceil((n+1)/Wr),l=v.length,p>=l)return e;for(x=l=v[p],u=1;l>=10;l/=10)u++;n%=Wr,a=n-Wr+u}if(s!==void 0&&(l=Ac(10,u-a-1),f=x/l%10|0,m=t<0||v[p+1]!==void 0||x%l,m=s<4?(f||m)&&(s==0||s==(e.s<0?3:2)):f>5||f==5&&(s==4||m||s==6&&(n>0?a>0?x/Ac(10,u-a):0:v[p-1])%10&1||s==(e.s<0?8:7))),t<1||!v[0])return m?(l=Rs(e),v.length=1,t=t-l-1,v[0]=Ac(10,(Wr-t%Wr)%Wr),e.e=Md(-t/Wr)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(n==0?(v.length=p,l=1,p--):(v.length=p+1,l=Ac(10,Wr-n),v[p]=a>0?(x/Ac(10,u-a)%Ac(10,a)|0)*l:0),m)for(;;)if(p==0){(v[0]+=l)==Qs&&(v[0]=1,++e.e);break}else{if(v[p]+=l,v[p]!=Qs)break;v[p--]=0,l=1}for(n=v.length;v[--n]===0;)v.pop();if(rs&&(e.e>_x||e.e<-_x))throw Error(Uj+Rs(e));return e}function B7(e,t){var s,n,a,l,u,f,m,x,p,v,C=e.constructor,T=C.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new C(e),rs?Fr(t,T):t;if(m=e.d,v=t.d,n=t.e,x=e.e,m=m.slice(),u=x-n,u){for(p=u<0,p?(s=m,u=-u,f=v.length):(s=v,n=x,f=m.length),a=Math.max(Math.ceil(T/Wr),f)+2,u>a&&(u=a,s.length=1),s.reverse(),a=u;a--;)s.push(0);s.reverse()}else{for(a=m.length,f=v.length,p=a<f,p&&(f=a),a=0;a<f;a++)if(m[a]!=v[a]){p=m[a]<v[a];break}u=0}for(p&&(s=m,m=v,v=s,t.s=-t.s),f=m.length,a=v.length-f;a>0;--a)m[f++]=0;for(a=v.length;a>u;){if(m[--a]<v[a]){for(l=a;l&&m[--l]===0;)m[l]=Qs-1;--m[l],m[a]+=Qs}m[a]-=v[a]}for(;m[--f]===0;)m.pop();for(;m[0]===0;m.shift())--n;return m[0]?(t.d=m,t.e=n,rs?Fr(t,T):t):new C(0)}function Hc(e,t,s){var n,a=Rs(e),l=Ii(e.d),u=l.length;return t?(s&&(n=s-u)>0?l=l.charAt(0)+"."+l.slice(1)+Oo(n):u>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(a<0?"e":"e+")+a):a<0?(l="0."+Oo(-a-1)+l,s&&(n=s-u)>0&&(l+=Oo(n))):a>=u?(l+=Oo(a+1-u),s&&(n=s-a-1)>0&&(l=l+"."+Oo(n))):((n=a+1)<u&&(l=l.slice(0,n)+"."+l.slice(n)),s&&(n=s-u)>0&&(a+1===u&&(l+="."),l+=Oo(n))),e.s<0?"-"+l:l}function PT(e,t){if(e.length>t)return e.length=t,!0}function F7(e){var t,s,n;function a(l){var u=this;if(!(u instanceof a))return new a(l);if(u.constructor=a,l instanceof a){u.s=l.s,u.e=l.e,u.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(Uc+l);if(l>0)u.s=1;else if(l<0)l=-l,u.s=-1;else{u.s=0,u.e=0,u.d=[0];return}if(l===~~l&&l<1e7){u.e=0,u.d=[l];return}return _T(u,l.toString())}else if(typeof l!="string")throw Error(Uc+l);if(l.charCodeAt(0)===45?(l=l.slice(1),u.s=-1):u.s=1,nse.test(l))_T(u,l);else throw Error(Uc+l)}if(a.prototype=mt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=F7,a.config=a.set=ase,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(s=n[t++])||(e[s]=this[s]);return a.config(e),a}function ase(e){if(!e||typeof e!="object")throw Error(Ha+"Object expected");var t,s,n,a=["precision",1,Id,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[s=a[t]])!==void 0)if(Md(n)===n&&n>=a[t+1]&&n<=a[t+2])this[s]=n;else throw Error(Uc+s+": "+n);if((n=e[s="LN10"])!==void 0)if(n==Math.LN10)this[s]=new this(n);else throw Error(Uc+s+": "+n);return this}var zj=F7(sse);ua=new zj(1);const Nr=zj;var ise=e=>e,U7={},z7=e=>e===U7,IT=e=>function t(){return arguments.length===0||arguments.length===1&&z7(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},V7=(e,t)=>e===1?t:IT(function(){for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];var l=n.filter(u=>u!==U7).length;return l>=e?t(...n):V7(e-l,IT(function(){for(var u=arguments.length,f=new Array(u),m=0;m<u;m++)f[m]=arguments[m];var x=n.map(p=>z7(p)?f.shift():p);return t(...x,...f)}))}),lse=e=>V7(e.length,e),TN=(e,t)=>{for(var s=[],n=e;n<t;++n)s[n-e]=n;return s},ose=lse((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(s=>t[s]).map(e)),cse=function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];if(!s.length)return ise;var a=s.reverse(),l=a[0],u=a.slice(1);return function(){return u.reduce((f,m)=>m(f),l(...arguments))}},ON=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function $7(e){var t;return e===0?t=1:t=Math.floor(new Nr(e).abs().log(10).toNumber())+1,t}function q7(e,t,s){for(var n=new Nr(e),a=0,l=[];n.lt(t)&&a<1e5;)l.push(n.toNumber()),n=n.add(s),a++;return l}var H7=e=>{var[t,s]=e,[n,a]=[t,s];return t>s&&([n,a]=[s,t]),[n,a]},G7=(e,t,s)=>{if(e.lte(0))return new Nr(0);var n=$7(e.toNumber()),a=new Nr(10).pow(n),l=e.div(a),u=n!==1?.05:.1,f=new Nr(Math.ceil(l.div(u).toNumber())).add(s).mul(u),m=f.mul(a);return t?new Nr(m.toNumber()):new Nr(Math.ceil(m.toNumber()))},use=(e,t,s)=>{var n=new Nr(1),a=new Nr(e);if(!a.isint()&&s){var l=Math.abs(e);l<1?(n=new Nr(10).pow($7(e)-1),a=new Nr(Math.floor(a.div(n).toNumber())).mul(n)):l>1&&(a=new Nr(Math.floor(e)))}else e===0?a=new Nr(Math.floor((t-1)/2)):s||(a=new Nr(Math.floor(e)));var u=Math.floor((t-1)/2),f=cse(ose(m=>a.add(new Nr(m-u).mul(n)).toNumber()),TN);return f(0,t)},Y7=function(t,s,n,a){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((s-t)/(n-1)))return{step:new Nr(0),tickMin:new Nr(0),tickMax:new Nr(0)};var u=G7(new Nr(s).sub(t).div(n-1),a,l),f;t<=0&&s>=0?f=new Nr(0):(f=new Nr(t).add(s).div(2),f=f.sub(new Nr(f).mod(u)));var m=Math.ceil(f.sub(t).div(u).toNumber()),x=Math.ceil(new Nr(s).sub(f).div(u).toNumber()),p=m+x+1;return p>n?Y7(t,s,n,a,l+1):(p<n&&(x=s>0?x+(n-p):x,m=s>0?m:m+(n-p)),{step:u,tickMin:f.sub(new Nr(m).mul(u)),tickMax:f.add(new Nr(x).mul(u))})},dse=function(t){var[s,n]=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=Math.max(a,2),[f,m]=H7([s,n]);if(f===-1/0||m===1/0){var x=m===1/0?[f,...TN(0,a-1).map(()=>1/0)]:[...TN(0,a-1).map(()=>-1/0),m];return s>n?ON(x):x}if(f===m)return use(f,a,l);var{step:p,tickMin:v,tickMax:C}=Y7(f,m,u,l,0),T=q7(v,C.add(new Nr(.1).mul(p)),p);return s>n?ON(T):T},hse=function(t,s){var[n,a]=t,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[u,f]=H7([n,a]);if(u===-1/0||f===1/0)return[n,a];if(u===f)return[u];var m=Math.max(s,2),x=G7(new Nr(f).sub(u).div(m-1),l,0),p=[...q7(new Nr(u),new Nr(f),x),f];return l===!1&&(p=p.map(v=>Math.round(v))),n>a?ON(p):p},fse=e=>e.rootProps.barCategoryGap,s0=e=>e.rootProps.stackOffset,X7=e=>e.rootProps.reverseStackOrder,Vj=e=>e.options.chartName,$j=e=>e.rootProps.syncId,W7=e=>e.rootProps.syncMethod,qj=e=>e.options.eventEmitter,di={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},xl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ca={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Bp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},mse={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:xl.angleAxisId,includeHidden:!1,name:void 0,reversed:xl.reversed,scale:xl.scale,tick:xl.tick,tickCount:void 0,ticks:void 0,type:xl.type,unit:void 0},gse={allowDataOverflow:ca.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ca.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ca.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ca.scale,tick:ca.tick,tickCount:ca.tickCount,ticks:void 0,type:ca.type,unit:void 0},xse={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:xl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xl.scale,tick:xl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},pse={allowDataOverflow:ca.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ca.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ca.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ca.scale,tick:ca.tick,tickCount:ca.tickCount,ticks:void 0,type:"category",unit:void 0},Hj=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?xse:mse,Gj=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?pse:gse,Fp=e=>e.polarOptions,Yj=Ie([Pl,Il,rn],XI),K7=Ie([Fp,Yj],(e,t)=>{if(e!=null)return fa(e.innerRadius,t,0)}),Z7=Ie([Fp,Yj],(e,t)=>{if(e!=null)return fa(e.outerRadius,t,t*.8)}),yse=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:s}=e;return[t,s]},Q7=Ie([Fp],yse);Ie([Hj,Q7],Bp);var J7=Ie([Yj,K7,Z7],(e,t,s)=>{if(!(e==null||t==null||s==null))return[t,s]});Ie([Gj,J7],Bp);var eM=Ie([Vr,Fp,K7,Z7,Pl,Il],(e,t,s,n,a,l)=>{if(!(e!=="centric"&&e!=="radial"||t==null||s==null||n==null)){var{cx:u,cy:f,startAngle:m,endAngle:x}=t;return{cx:fa(u,a,a/2),cy:fa(f,l,l/2),innerRadius:s,outerRadius:n,startAngle:m,endAngle:x,clockWise:!1}}}),ns=(e,t)=>t,n0=(e,t,s)=>s;function tM(e){return e?.id}function rM(e,t,s){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:l}=s,u=new Map;return e.forEach(f=>{var m,x=(m=f.data)!==null&&m!==void 0?m:n;if(!(x==null||x.length===0)){var p=tM(f);x.forEach((v,C)=>{var T=l==null||a?C:String(ws(v,l,null)),E=ws(v,f.dataKey,0),k;u.has(T)?k=u.get(T):k={},Object.assign(k,{[p]:E}),u.set(T,k)})}}),Array.from(u.values())}function Xj(e){return e.stackId!=null&&e.dataKey!=null}var Up=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function zp(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function bse(e,t){if(e.length===t.length){for(var s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}return!1}var Gs=e=>{var t=Vr(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Rd=e=>e.tooltip.settings.axisId;function MT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Px(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?MT(Object(s),!0).forEach(function(n){vse(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):MT(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function vse(e,t,s){return(t=Nse(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Nse(e){var t=wse(e,"string");return typeof t=="symbol"?t:t+""}function wse(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DN=[0,"auto"],jse={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Sse=(e,t)=>e.cartesianAxis.xAxis[t],Xo=(e,t)=>{var s=Sse(e,t);return s??jse},Cse={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:DN,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Zf},Ase=(e,t)=>e.cartesianAxis.yAxis[t],Wo=(e,t)=>{var s=Ase(e,t);return s??Cse},Ese={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Wj=(e,t)=>{var s=e.cartesianAxis.zAxis[t];return s??Ese},os=(e,t,s)=>{switch(t){case"xAxis":return Xo(e,s);case"yAxis":return Wo(e,s);case"zAxis":return Wj(e,s);case"angleAxis":return Hj(e,s);case"radiusAxis":return Gj(e,s);default:throw new Error("Unexpected axis type: ".concat(t))}},Tse=(e,t,s)=>{switch(t){case"xAxis":return Xo(e,s);case"yAxis":return Wo(e,s);default:throw new Error("Unexpected axis type: ".concat(t))}},a0=(e,t,s)=>{switch(t){case"xAxis":return Xo(e,s);case"yAxis":return Wo(e,s);case"angleAxis":return Hj(e,s);case"radiusAxis":return Gj(e,s);default:throw new Error("Unexpected axis type: ".concat(t))}},sM=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Kj(e,t){return s=>{switch(e){case"xAxis":return"xAxisId"in s&&s.xAxisId===t;case"yAxis":return"yAxisId"in s&&s.yAxisId===t;case"zAxis":return"zAxisId"in s&&s.zAxisId===t;case"angleAxis":return"angleAxisId"in s&&s.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in s&&s.radiusAxisId===t;default:return!1}}}var Ose=e=>e.graphicalItems.cartesianItems,Dse=Ie([ns,n0],Kj),Zj=(e,t,s)=>e.filter(s).filter(n=>t?.includeHidden===!0?!0:!n.hide),i0=Ie([Ose,os,Dse],Zj,{memoizeOptions:{resultEqualityCheck:zp}}),nM=Ie([i0],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Xj)),aM=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),kse=Ie([i0],aM),Qj=e=>e.map(t=>t.data).filter(Boolean).flat(1),_se=Ie([i0],Qj,{memoizeOptions:{resultEqualityCheck:zp}}),Jj=(e,t)=>{var{chartData:s=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:s.slice(n,a+1)},eS=Ie([_se,P7],Jj),tS=(e,t,s)=>t?.dataKey!=null?e.map(n=>({value:ws(n,t.dataKey)})):s.length>0?s.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:ws(a,n)}))):e.map(n=>({value:n})),Vp=Ie([eS,os,i0],tS);function iM(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Mg(e){if(El(e)||e instanceof Date){var t=Number(e);if(tn(t))return t}}function RT(e){if(Array.isArray(e)){var t=[Mg(e[0]),Mg(e[1])];return zo(t)?t:void 0}var s=Mg(e);if(s!=null)return[s,s]}function _l(e){return e.map(Mg).filter(NW)}function Pse(e,t,s){return!s||typeof t!="number"||Cl(t)?[]:s.length?_l(s.flatMap(n=>{var a=ws(e,n.dataKey),l,u;if(Array.isArray(a)?[l,u]=a:l=u=a,!(!tn(l)||!tn(u)))return[t-l,t+u]})):[]}var Ys=e=>{var t=Gs(e),s=Rd(e);return a0(e,t,s)},l0=Ie([Ys],e=>e?.dataKey),Ise=Ie([nM,P7,Ys],rM),lM=(e,t,s,n)=>{var a={},l=t.reduce((u,f)=>(f.stackId==null||(u[f.stackId]==null&&(u[f.stackId]=[]),u[f.stackId].push(f)),u),a);return Object.fromEntries(Object.entries(l).map(u=>{var[f,m]=u,x=n?[...m].reverse():m,p=x.map(tM);return[f,{stackedData:XZ(e,p,s),graphicalItems:x}]}))},Mse=Ie([Ise,nM,s0,X7],lM),oM=(e,t,s,n)=>{var{dataStartIndex:a,dataEndIndex:l}=t;if(n==null&&s!=="zAxis"){var u=ZZ(e,a,l);if(!(u!=null&&u[0]===0&&u[1]===0))return u}},Rse=Ie([os],e=>e.allowDataOverflow),rS=e=>{var t;if(e==null||!("domain"in e))return DN;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var s=_l(e.ticks);return[Math.min(...s),Math.max(...s)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:DN},sS=Ie([os],rS),nS=Ie([sS,Rse],I7),Lse=Ie([Mse,Yo,ns,nS],oM,{memoizeOptions:{resultEqualityCheck:Up}}),$p=e=>e.errorBars,Bse=(e,t,s)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>iM(s,n)),Ix=function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];var a=s.filter(Boolean);if(a.length!==0){var l=a.flat(),u=Math.min(...l),f=Math.max(...l);return[u,f]}},aS=(e,t,s,n,a)=>{var l,u;if(s.length>0&&e.forEach(f=>{s.forEach(m=>{var x,p,v=(x=n[m.id])===null||x===void 0?void 0:x.filter(M=>iM(a,M)),C=ws(f,(p=t.dataKey)!==null&&p!==void 0?p:m.dataKey),T=Pse(f,C,v);if(T.length>=2){var E=Math.min(...T),k=Math.max(...T);(l==null||E<l)&&(l=E),(u==null||k>u)&&(u=k)}var O=RT(C);O!=null&&(l=l==null?O[0]:Math.min(l,O[0]),u=u==null?O[1]:Math.max(u,O[1]))})}),t?.dataKey!=null&&e.forEach(f=>{var m=RT(ws(f,t.dataKey));m!=null&&(l=l==null?m[0]:Math.min(l,m[0]),u=u==null?m[1]:Math.max(u,m[1]))}),tn(l)&&tn(u))return[l,u]},Fse=Ie([eS,os,kse,$p,ns],aS,{memoizeOptions:{resultEqualityCheck:Up}});function Use(e){var{value:t}=e;if(El(t)||t instanceof Date)return t}var zse=(e,t,s)=>{var n=e.map(Use).filter(a=>a!=null);return s&&(t.dataKey==null||t.allowDuplicatedCategory&&OP(n))?QI(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},cM=e=>e.referenceElements.dots,Ld=(e,t,s)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===s:n.yAxisId===s),Vse=Ie([cM,ns,n0],Ld),uM=e=>e.referenceElements.areas,$se=Ie([uM,ns,n0],Ld),dM=e=>e.referenceElements.lines,qse=Ie([dM,ns,n0],Ld),hM=(e,t)=>{var s=_l(e.map(n=>t==="xAxis"?n.x:n.y));if(s.length!==0)return[Math.min(...s),Math.max(...s)]},Hse=Ie(Vse,ns,hM),fM=(e,t)=>{var s=_l(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(s.length!==0)return[Math.min(...s),Math.max(...s)]},Gse=Ie([$se,ns],fM);function Yse(e){var t;if(e.x!=null)return _l([e.x]);var s=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return s==null||s.length===0?[]:_l(s)}function Xse(e){var t;if(e.y!=null)return _l([e.y]);var s=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return s==null||s.length===0?[]:_l(s)}var mM=(e,t)=>{var s=e.flatMap(n=>t==="xAxis"?Yse(n):Xse(n));if(s.length!==0)return[Math.min(...s),Math.max(...s)]},Wse=Ie([qse,ns],mM),Kse=Ie(Hse,Wse,Gse,(e,t,s)=>Ix(e,s,t)),iS=(e,t,s,n,a,l,u,f)=>{if(s!=null)return s;var m=u==="vertical"&&f==="xAxis"||u==="horizontal"&&f==="yAxis",x=m?Ix(n,l,a):Ix(l,a);return rse(t,x,e.allowDataOverflow)},Zse=Ie([os,sS,nS,Lse,Fse,Kse,Vr,ns],iS,{memoizeOptions:{resultEqualityCheck:Up}}),Qse=[0,1],lS=(e,t,s,n,a,l,u)=>{if(!((e==null||s==null||s.length===0)&&u===void 0)){var{dataKey:f,type:m}=e,x=Yc(t,l);if(x&&f==null){var p;return QI(0,(p=s?.length)!==null&&p!==void 0?p:0)}return m==="category"?zse(n,e,x):a==="expand"?Qse:u}},oS=Ie([os,Vr,eS,Vp,s0,ns,Zse],lS),gM=(e,t,s,n,a)=>{if(e!=null){var{scale:l,type:u}=e;if(l==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":u==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!s)?"point":u==="category"?"band":"linear";if(typeof l=="string"){var f="scale".concat(Gf(l));return f in Jh?f:"point"}}},Bd=Ie([os,Vr,sM,Vj,ns],gM);function Jse(e){if(e!=null){if(e in Jh)return Jh[e]();var t="scale".concat(Gf(e));if(t in Jh)return Jh[t]()}}function cS(e,t,s,n){if(!(s==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(s).range(n);var a=Jse(t);if(a!=null){var l=a.domain(s).range(n);return qZ(l),l}}}var uS=(e,t,s)=>{var n=rS(t);if(!(s!=="auto"&&s!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&zo(e))return dse(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&zo(e))return hse(e,t.tickCount,t.allowDecimals)}},dS=Ie([oS,a0,Bd],uS),hS=(e,t,s,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&zo(t)&&Array.isArray(s)&&s.length>0){var a=t[0],l=s[0],u=t[1],f=s[s.length-1];return[Math.min(a,l),Math.max(u,f)]}return t},ene=Ie([os,oS,dS,ns],hS),tne=Ie(Vp,os,(e,t)=>{if(!(!t||t.type!=="number")){var s=1/0,n=Array.from(_l(e.map(f=>f.value))).sort((f,m)=>f-m);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var l=0;l<n.length-1;l++){var u=n[l+1]-n[l];s=Math.min(s,u)}return s/a}}),xM=Ie(tne,Vr,fse,rn,(e,t,s,n)=>n,(e,t,s,n,a)=>{if(!tn(e))return 0;var l=t==="vertical"?n.height:n.width;if(a==="gap")return e*l/2;if(a==="no-gap"){var u=fa(s,e*l),f=e*l/2;return f-u-(f-u)/l*u}return 0}),rne=(e,t)=>{var s=Xo(e,t);return s==null||typeof s.padding!="string"?0:xM(e,"xAxis",t,s.padding)},sne=(e,t)=>{var s=Wo(e,t);return s==null||typeof s.padding!="string"?0:xM(e,"yAxis",t,s.padding)},nne=Ie(Xo,rne,(e,t)=>{var s,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((s=a.left)!==null&&s!==void 0?s:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),ane=Ie(Wo,sne,(e,t)=>{var s,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((s=a.top)!==null&&s!==void 0?s:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),ine=Ie([rn,nne,Cp,Sp,(e,t,s)=>s],(e,t,s,n,a)=>{var{padding:l}=n;return a?[l.left,s.width-l.right]:[e.left+t.left,e.left+e.width-t.right]}),lne=Ie([rn,Vr,ane,Cp,Sp,(e,t,s)=>s],(e,t,s,n,a,l)=>{var{padding:u}=a;return l?[n.height-u.bottom,u.top]:t==="horizontal"?[e.top+e.height-s.bottom,e.top+s.top]:[e.top+s.top,e.top+e.height-s.bottom]}),o0=(e,t,s,n)=>{var a;switch(t){case"xAxis":return ine(e,s,n);case"yAxis":return lne(e,s,n);case"zAxis":return(a=Wj(e,s))===null||a===void 0?void 0:a.range;case"angleAxis":return Q7(e);case"radiusAxis":return J7(e,s);default:return}},pM=Ie([os,o0],Bp),qp=Ie([os,Bd,ene,pM],cS);Ie([i0,$p,ns],Bse);function yM(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Hp=(e,t)=>t,Gp=(e,t,s)=>s,one=Ie(wp,Hp,Gp,(e,t,s)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===s).sort(yM)),cne=Ie(jp,Hp,Gp,(e,t,s)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===s).sort(yM)),bM=(e,t)=>({width:e.width,height:t.height}),une=(e,t)=>{var s=typeof t.width=="number"?t.width:Zf;return{width:s,height:e.height}};Ie(rn,Xo,bM);var dne=(e,t,s)=>{switch(t){case"top":return e.top;case"bottom":return s-e.bottom;default:return 0}},hne=(e,t,s)=>{switch(t){case"left":return e.left;case"right":return s-e.right;default:return 0}},fne=Ie(Il,rn,one,Hp,Gp,(e,t,s,n,a)=>{var l={},u;return s.forEach(f=>{var m=bM(t,f);u==null&&(u=dne(t,n,e));var x=n==="top"&&!a||n==="bottom"&&a;l[f.id]=u-Number(x)*m.height,u+=(x?-1:1)*m.height}),l}),mne=Ie(Pl,rn,cne,Hp,Gp,(e,t,s,n,a)=>{var l={},u;return s.forEach(f=>{var m=une(t,f);u==null&&(u=hne(t,n,e));var x=n==="left"&&!a||n==="right"&&a;l[f.id]=u-Number(x)*m.width,u+=(x?-1:1)*m.width}),l}),gne=(e,t)=>{var s=Xo(e,t);if(s!=null)return fne(e,s.orientation,s.mirror)};Ie([rn,Xo,gne,(e,t)=>t],(e,t,s,n)=>{if(t!=null){var a=s?.[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}});var xne=(e,t)=>{var s=Wo(e,t);if(s!=null)return mne(e,s.orientation,s.mirror)};Ie([rn,Wo,xne,(e,t)=>t],(e,t,s,n)=>{if(t!=null){var a=s?.[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}});Ie(rn,Wo,(e,t)=>{var s=typeof t.width=="number"?t.width:Zf;return{width:s,height:e.height}});var vM=(e,t,s,n)=>{if(s!=null){var{allowDuplicatedCategory:a,type:l,dataKey:u}=s,f=Yc(e,n),m=t.map(x=>x.value);if(u&&f&&l==="category"&&a&&OP(m))return m}},fS=Ie([Vr,Vp,os,ns],vM),NM=(e,t,s,n)=>{if(!(s==null||s.dataKey==null)){var{type:a,scale:l}=s,u=Yc(e,n);if(u&&(a==="number"||l!=="auto"))return t.map(f=>f.value)}},mS=Ie([Vr,Vp,a0,ns],NM);Ie([Vr,Tse,Bd,qp,fS,mS,o0,dS,ns],(e,t,s,n,a,l,u,f,m)=>{if(t!=null){var x=Yc(e,m);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:m,categoricalDomain:l,duplicateDomain:a,isCategorical:x,niceTicks:f,range:u,realScaleType:s,scale:n}}});var pne=(e,t,s,n,a,l,u,f,m)=>{if(!(t==null||n==null)){var x=Yc(e,m),{type:p,ticks:v,tickCount:C}=t,T=s==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,E=p==="category"&&n.bandwidth?n.bandwidth()/T:0;E=m==="angleAxis"&&l!=null&&l.length>=2?$n(l[0]-l[1])*2*E:E;var k=v||a;if(k){var O=k.map((M,L)=>{var P=u?u.indexOf(M):M;return{index:L,coordinate:n(P)+E,value:M,offset:E}});return O.filter(M=>tn(M.coordinate))}return x&&f?f.map((M,L)=>({coordinate:n(M)+E,value:M,index:L,offset:E})).filter(M=>tn(M.coordinate)):n.ticks?n.ticks(C).map(M=>({coordinate:n(M)+E,value:M,offset:E})):n.domain().map((M,L)=>({coordinate:n(M)+E,value:u?u[M]:M,index:L,offset:E}))}};Ie([Vr,a0,Bd,qp,dS,o0,fS,mS,ns],pne);var yne=(e,t,s,n,a,l,u)=>{if(!(t==null||s==null||n==null||n[0]===n[1])){var f=Yc(e,u),{tickCount:m}=t,x=0;return x=u==="angleAxis"&&n?.length>=2?$n(n[0]-n[1])*2*x:x,f&&l?l.map((p,v)=>({coordinate:s(p)+x,value:p,index:v,offset:x})):s.ticks?s.ticks(m).map(p=>({coordinate:s(p)+x,value:p,offset:x})):s.domain().map((p,v)=>({coordinate:s(p)+x,value:a?a[p]:p,index:v,offset:x}))}};Ie([Vr,a0,qp,o0,fS,mS,ns],yne);Ie(os,qp,(e,t)=>{if(!(e==null||t==null))return Px(Px({},e),{},{scale:t})});var bne=Ie([os,Bd,oS,pM],cS);Ie((e,t,s)=>Wj(e,s),bne,(e,t)=>{if(!(e==null||t==null))return Px(Px({},e),{},{scale:t})});var vne=Ie([Vr,wp,jp],(e,t,s)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return s.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),wM=e=>e.options.defaultTooltipEventType,jM=e=>e.options.validateTooltipEventTypes;function SM(e,t,s){if(e==null)return t;var n=e?"axis":"item";return s==null?t:s.includes(n)?n:t}function gS(e,t){var s=wM(e),n=jM(e);return SM(t,s,n)}function Nne(e){return Bt(t=>gS(t,e))}var CM=(e,t)=>{var s,n=Number(t);if(!(Cl(n)||t==null))return n>=0?e==null||(s=e[n])===null||s===void 0?void 0:s.value:void 0},wne=e=>e.tooltip.settings,ko={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},jne={itemInteraction:{click:ko,hover:ko},axisInteraction:{click:ko,hover:ko},keyboardInteraction:ko,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},AM=Xn({name:"tooltip",initialState:jne,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:es()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:s,next:n}=t.payload,a=hi(e).tooltipItemPayloads.indexOf(s);a>-1&&(e.tooltipItemPayloads[a]=n)},prepare:es()},removeTooltipEntrySettings:{reducer(e,t){var s=hi(e).tooltipItemPayloads.indexOf(t.payload);s>-1&&e.tooltipItemPayloads.splice(s,1)},prepare:es()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Sne,replaceTooltipEntrySettings:Cne,removeTooltipEntrySettings:Ane,setTooltipSettingsState:Ene,setActiveMouseOverItemIndex:EM,mouseLeaveItem:Tne,mouseLeaveChart:TM,setActiveClickItemIndex:One,setMouseOverAxisIndex:OM,setMouseClickAxisIndex:Dne,setSyncInteraction:kN,setKeyboardInteraction:_N}=AM.actions,kne=AM.reducer;function LT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Zm(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?LT(Object(s),!0).forEach(function(n){_ne(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):LT(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function _ne(e,t,s){return(t=Pne(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Pne(e){var t=Ine(e,"string");return typeof t=="symbol"?t:t+""}function Ine(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mne(e,t,s){return t==="axis"?s==="click"?e.axisInteraction.click:e.axisInteraction.hover:s==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Rne(e){return e.index!=null}var DM=(e,t,s,n)=>{if(t==null)return ko;var a=Mne(e,t,s);if(a==null)return ko;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var l=e.settings.active===!0;if(Rne(a)){if(l)return Zm(Zm({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Zm(Zm({},ko),{},{coordinate:a.coordinate})};function Lne(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var s=Number(e);return Number.isFinite(s)?s:void 0}function Bne(e,t){var s=Lne(e),n=t[0],a=t[1];if(s===void 0)return!1;var l=Math.min(n,a),u=Math.max(n,a);return s>=l&&s<=u}function Fne(e,t,s){if(s==null||t==null)return!0;var n=ws(e,t);return n==null||!zo(s)?!0:Bne(n,s)}var xS=(e,t,s,n)=>{var a=e?.index;if(a==null)return null;var l=Number(a);if(!tn(l))return a;var u=0,f=1/0;t.length>0&&(f=t.length-1);var m=Math.max(u,Math.min(l,f)),x=t[m];return x==null||Fne(x,s,n)?String(m):null},kM=(e,t,s,n,a,l,u,f)=>{if(!(l==null||f==null)){var m=u[0],x=m==null?void 0:f(m.positions,l);if(x!=null)return x;var p=a?.[Number(l)];if(p)switch(s){case"horizontal":return{x:p.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:p.coordinate}}}},_M=(e,t,s,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return s==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(l=>{var u;return((u=l.settings)===null||u===void 0?void 0:u.dataKey)===a})},c0=e=>e.options.tooltipPayloadSearcher,Fd=e=>e.tooltip;function BT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function FT(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?BT(Object(s),!0).forEach(function(n){Une(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):BT(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Une(e,t,s){return(t=zne(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function zne(e){var t=Vne(e,"string");return typeof t=="symbol"?t:t+""}function Vne(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ne(e,t){return e??t}var PM=(e,t,s,n,a,l,u)=>{if(!(t==null||l==null)){var{chartData:f,computedData:m,dataStartIndex:x,dataEndIndex:p}=s,v=[];return e.reduce((C,T)=>{var E,{dataDefinedOnItem:k,settings:O}=T,M=$ne(k,f),L=Array.isArray(M)?jI(M,x,p):M,P=(E=O?.dataKey)!==null&&E!==void 0?E:n,H=O?.nameKey,B;if(n&&Array.isArray(L)&&!Array.isArray(L[0])&&u==="axis"?B=vW(L,n,a):B=l(L,t,m,H),Array.isArray(B))B.forEach(R=>{var z=FT(FT({},O),{},{name:R.name,unit:R.unit,color:void 0,fill:void 0});C.push(i6({tooltipEntrySettings:z,dataKey:R.dataKey,payload:R.payload,value:ws(R.payload,R.dataKey),name:R.name}))});else{var F;C.push(i6({tooltipEntrySettings:O,dataKey:P,payload:B,value:ws(B,P),name:(F=ws(B,H))!==null&&F!==void 0?F:O?.name}))}return C},v)}},pS=Ie([Ys,Vr,sM,Vj,Gs],gM),qne=Ie([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Hne=Ie([Gs,Rd],Kj),u0=Ie([qne,Ys,Hne],Zj,{memoizeOptions:{resultEqualityCheck:zp}}),Gne=Ie([u0],e=>e.filter(Xj)),Yne=Ie([u0],Qj,{memoizeOptions:{resultEqualityCheck:zp}}),Ud=Ie([Yne,Yo],Jj),Xne=Ie([Gne,Yo,Ys],rM),yS=Ie([Ud,Ys,u0],tS),IM=Ie([Ys],rS),Wne=Ie([Ys],e=>e.allowDataOverflow),MM=Ie([IM,Wne],I7),Kne=Ie([u0],e=>e.filter(Xj)),Zne=Ie([Xne,Kne,s0,X7],lM),Qne=Ie([Zne,Yo,Gs,MM],oM),Jne=Ie([u0],aM),eae=Ie([Ud,Ys,Jne,$p,Gs],aS,{memoizeOptions:{resultEqualityCheck:Up}}),tae=Ie([cM,Gs,Rd],Ld),rae=Ie([tae,Gs],hM),sae=Ie([uM,Gs,Rd],Ld),nae=Ie([sae,Gs],fM),aae=Ie([dM,Gs,Rd],Ld),iae=Ie([aae,Gs],mM),lae=Ie([rae,iae,nae],Ix),oae=Ie([Ys,IM,MM,Qne,eae,lae,Vr,Gs],iS),d0=Ie([Ys,Vr,Ud,yS,s0,Gs,oae],lS),cae=Ie([d0,Ys,pS],uS),uae=Ie([Ys,d0,cae,Gs],hS),RM=e=>{var t=Gs(e),s=Rd(e),n=!1;return o0(e,t,s,n)},LM=Ie([Ys,RM],Bp),BM=Ie([Ys,pS,uae,LM],cS),dae=Ie([Vr,yS,Ys,Gs],vM),hae=Ie([Vr,yS,Ys,Gs],NM),fae=(e,t,s,n,a,l,u,f)=>{if(t){var{type:m}=t,x=Yc(e,f);if(n){var p=s==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,v=m==="category"&&n.bandwidth?n.bandwidth()/p:0;return v=f==="angleAxis"&&a!=null&&a?.length>=2?$n(a[0]-a[1])*2*v:v,x&&u?u.map((C,T)=>({coordinate:n(C)+v,value:C,index:T,offset:v})):n.domain().map((C,T)=>({coordinate:n(C)+v,value:l?l[C]:C,index:T,offset:v}))}}},Rl=Ie([Vr,Ys,pS,BM,RM,dae,hae,Gs],fae),bS=Ie([wM,jM,wne],(e,t,s)=>SM(s.shared,e,t)),FM=e=>e.tooltip.settings.trigger,vS=e=>e.tooltip.settings.defaultIndex,h0=Ie([Fd,bS,FM,vS],DM),_f=Ie([h0,Ud,l0,d0],xS),UM=Ie([Rl,_f],CM),zM=Ie([h0],e=>{if(e)return e.dataKey}),mae=Ie([h0],e=>{if(e)return e.graphicalItemId}),VM=Ie([Fd,bS,FM,vS],_M),gae=Ie([Pl,Il,Vr,rn,Rl,vS,VM,c0],kM),xae=Ie([h0,gae],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),pae=Ie([h0],e=>e.active),yae=Ie([VM,_f,Yo,l0,UM,c0,bS],PM);Ie([yae],e=>{if(e!=null){var t=e.map(s=>s.payload).filter(s=>s!=null);return Array.from(new Set(t))}});function UT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function zT(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?UT(Object(s),!0).forEach(function(n){bae(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):UT(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function bae(e,t,s){return(t=vae(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function vae(e){var t=Nae(e,"string");return typeof t=="symbol"?t:t+""}function Nae(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wae=()=>Bt(Ys),jae=()=>{var e=wae(),t=Bt(Rl),s=Bt(BM);return a6(!e||!s?void 0:zT(zT({},e),{},{scale:s}),t)};function VT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Iu(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?VT(Object(s),!0).forEach(function(n){Sae(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):VT(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Sae(e,t,s){return(t=Cae(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Cae(e){var t=Aae(e,"string");return typeof t=="symbol"?t:t+""}function Aae(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Eae=(e,t,s,n)=>{var a=t.find(l=>l&&l.index===s);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},Tae=(e,t,s,n)=>{var a=t.find(x=>x&&x.index===s);if(a){if(e==="centric"){var l=a.coordinate,{radius:u}=n;return Iu(Iu(Iu({},n),Ms(n.cx,n.cy,u,l)),{},{angle:l,radius:u})}var f=a.coordinate,{angle:m}=n;return Iu(Iu(Iu({},n),Ms(n.cx,n.cy,f,m)),{},{angle:m,radius:f})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Oae(e,t){var{chartX:s,chartY:n}=e;return s>=t.left&&s<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var $M=(e,t,s,n,a)=>{var l,u=-1,f=(l=t?.length)!==null&&l!==void 0?l:0;if(f<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var m=0;m<f;m++){var x=m>0?s[m-1].coordinate:s[f-1].coordinate,p=s[m].coordinate,v=m>=f-1?s[0].coordinate:s[m+1].coordinate,C=void 0;if($n(p-x)!==$n(v-p)){var T=[];if($n(v-p)===$n(a[1]-a[0])){C=v;var E=p+a[1]-a[0];T[0]=Math.min(E,(E+x)/2),T[1]=Math.max(E,(E+x)/2)}else{C=x;var k=v+a[1]-a[0];T[0]=Math.min(p,(k+p)/2),T[1]=Math.max(p,(k+p)/2)}var O=[Math.min(p,(C+p)/2),Math.max(p,(C+p)/2)];if(e>O[0]&&e<=O[1]||e>=T[0]&&e<=T[1]){({index:u}=s[m]);break}}else{var M=Math.min(x,v),L=Math.max(x,v);if(e>(M+p)/2&&e<=(L+p)/2){({index:u}=s[m]);break}}}else if(t){for(var P=0;P<f;P++)if(P===0&&e<=(t[P].coordinate+t[P+1].coordinate)/2||P>0&&P<f-1&&e>(t[P].coordinate+t[P-1].coordinate)/2&&e<=(t[P].coordinate+t[P+1].coordinate)/2||P===f-1&&e>(t[P].coordinate+t[P-1].coordinate)/2){({index:u}=t[P]);break}}return u},Dae=()=>Bt(Vj),NS=(e,t)=>t,qM=(e,t,s)=>s,wS=(e,t,s,n)=>n,kae=Ie(Rl,e=>fp(e,t=>t.coordinate)),jS=Ie([Fd,NS,qM,wS],DM),SS=Ie([jS,Ud,l0,d0],xS),_ae=(e,t,s)=>{if(t!=null){var n=Fd(e);return t==="axis"?s==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:s==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},HM=Ie([Fd,NS,qM,wS],_M),Mx=Ie([Pl,Il,Vr,rn,Rl,wS,HM,c0],kM),Pae=Ie([jS,Mx],(e,t)=>{var s;return(s=e.coordinate)!==null&&s!==void 0?s:t}),GM=Ie([Rl,SS],CM),Iae=Ie([HM,SS,Yo,l0,GM,c0,NS],PM),Mae=Ie([jS,SS],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),Rae=(e,t,s,n,a,l,u)=>{if(!(!e||!s||!n||!a)&&Oae(e,u)){var f=QZ(e,t),m=$M(f,l,a,s,n),x=Eae(t,a,m,e);return{activeIndex:String(m),activeCoordinate:x}}},Lae=(e,t,s,n,a,l,u)=>{if(!(!e||!n||!a||!l||!s)){var f=yee(e,s);if(f){var m=JZ(f,t),x=$M(m,u,l,n,a),p=Tae(t,l,x,f);return{activeIndex:String(x),activeCoordinate:p}}}},Bae=(e,t,s,n,a,l,u,f)=>{if(!(!e||!t||!n||!a||!l))return t==="horizontal"||t==="vertical"?Rae(e,t,n,a,l,u,f):Lae(e,t,s,n,a,l,u)},Fae=Ie(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,s)=>s,(e,t,s)=>{if(t!=null){var n=e[t];if(n!=null)return s?n.panoramaElementId:n.elementId}}),Uae=Ie(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(di)),s=Array.from(new Set(t));return s.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:bse}});function $T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function qT(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?$T(Object(s),!0).forEach(function(n){zae(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$T(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function zae(e,t,s){return(t=Vae(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Vae(e){var t=$ae(e,"string");return typeof t=="symbol"?t:t+""}function $ae(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qae={},Hae={zIndexMap:Object.values(di).reduce((e,t)=>qT(qT({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),qae)},Gae=new Set(Object.values(di));function Yae(e){return Gae.has(e)}var YM=Xn({name:"zIndex",initialState:Hae,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:s}=t.payload;e.zIndexMap[s]?e.zIndexMap[s].consumers+=1:e.zIndexMap[s]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:es()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:s}=t.payload;e.zIndexMap[s]&&(e.zIndexMap[s].consumers-=1,e.zIndexMap[s].consumers<=0&&!Yae(s)&&delete e.zIndexMap[s])},prepare:es()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:s,elementId:n,isPanorama:a}=t.payload;e.zIndexMap[s]?a?e.zIndexMap[s].panoramaElementId=n:e.zIndexMap[s].elementId=n:e.zIndexMap[s]={consumers:0,elementId:a?void 0:n,panoramaElementId:a?n:void 0}},prepare:es()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:s}=t.payload;e.zIndexMap[s]&&(t.payload.isPanorama?e.zIndexMap[s].panoramaElementId=void 0:e.zIndexMap[s].elementId=void 0)},prepare:es()}}}),{registerZIndexPortal:Xae,unregisterZIndexPortal:Wae,registerZIndexPortalId:Kae,unregisterZIndexPortalId:Zae}=YM.actions,Qae=YM.reducer;function f0(e){var{zIndex:t,children:s}=e,n=kQ(),a=n&&t!==void 0&&t!==0,l=qo(),u=Ss();w.useLayoutEffect(()=>a?(u(Xae({zIndex:t})),()=>{u(Wae({zIndex:t}))}):Yf,[u,t,a]);var f=Bt(x=>Fae(x,t,l));if(!a)return s;if(!f)return null;var m=document.getElementById(f);return m?WN.createPortal(s,m):null}function PN(){return PN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},PN.apply(null,arguments)}function HT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Qm(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?HT(Object(s),!0).forEach(function(n){Jae(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):HT(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Jae(e,t,s){return(t=eie(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function eie(e){var t=tie(e,"string");return typeof t=="symbol"?t:t+""}function tie(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rie(e){var{cursor:t,cursorComp:s,cursorProps:n}=e;return w.isValidElement(t)?w.cloneElement(t,n):w.createElement(s,n)}function sie(e){var t,{coordinate:s,payload:n,index:a,offset:l,tooltipAxisBandSize:u,layout:f,cursor:m,tooltipEventType:x,chartName:p}=e,v=s,C=n,T=a;if(!m||!v||p!=="ScatterChart"&&x!=="axis")return null;var E,k,O;if(p==="ScatterChart")E=v,k=PJ,O=di.cursorLine;else if(p==="BarChart")E=IJ(f,v,l,u),k=YI,O=di.cursorRectangle;else if(f==="radial"&&kP(v)){var{cx:M,cy:L,radius:P,startAngle:H,endAngle:B}=WI(v);E={cx:M,cy:L,startAngle:H,endAngle:B,innerRadius:P,outerRadius:P},k=ZI,O=di.cursorLine}else E={points:wee(f,v,l)},k=fj,O=di.cursorLine;var F=typeof m=="object"&&"className"in m?m.className:void 0,R=Qm(Qm(Qm(Qm({stroke:"#ccc",pointerEvents:"none"},l),E),V2(m)),{},{payload:C,payloadIndex:T,className:js("recharts-tooltip-cursor",F)});return w.createElement(f0,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:O},w.createElement(rie,{cursor:m,cursorComp:k,cursorProps:R}))}function nie(e){var t=jae(),s=OQ(),n=uj(),a=Dae();return t==null||s==null||n==null||a==null?null:w.createElement(sie,PN({},e,{offset:s,layout:n,tooltipAxisBandSize:t,chartName:a}))}var XM=w.createContext(null),aie=()=>w.useContext(XM),Rv={exports:{}},GT;function iie(){return GT||(GT=1,(function(e){var t=Object.prototype.hasOwnProperty,s="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(s=!1));function a(m,x,p){this.fn=m,this.context=x,this.once=p||!1}function l(m,x,p,v,C){if(typeof p!="function")throw new TypeError("The listener must be a function");var T=new a(p,v||m,C),E=s?s+x:x;return m._events[E]?m._events[E].fn?m._events[E]=[m._events[E],T]:m._events[E].push(T):(m._events[E]=T,m._eventsCount++),m}function u(m,x){--m._eventsCount===0?m._events=new n:delete m._events[x]}function f(){this._events=new n,this._eventsCount=0}f.prototype.eventNames=function(){var x=[],p,v;if(this._eventsCount===0)return x;for(v in p=this._events)t.call(p,v)&&x.push(s?v.slice(1):v);return Object.getOwnPropertySymbols?x.concat(Object.getOwnPropertySymbols(p)):x},f.prototype.listeners=function(x){var p=s?s+x:x,v=this._events[p];if(!v)return[];if(v.fn)return[v.fn];for(var C=0,T=v.length,E=new Array(T);C<T;C++)E[C]=v[C].fn;return E},f.prototype.listenerCount=function(x){var p=s?s+x:x,v=this._events[p];return v?v.fn?1:v.length:0},f.prototype.emit=function(x,p,v,C,T,E){var k=s?s+x:x;if(!this._events[k])return!1;var O=this._events[k],M=arguments.length,L,P;if(O.fn){switch(O.once&&this.removeListener(x,O.fn,void 0,!0),M){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,p),!0;case 3:return O.fn.call(O.context,p,v),!0;case 4:return O.fn.call(O.context,p,v,C),!0;case 5:return O.fn.call(O.context,p,v,C,T),!0;case 6:return O.fn.call(O.context,p,v,C,T,E),!0}for(P=1,L=new Array(M-1);P<M;P++)L[P-1]=arguments[P];O.fn.apply(O.context,L)}else{var H=O.length,B;for(P=0;P<H;P++)switch(O[P].once&&this.removeListener(x,O[P].fn,void 0,!0),M){case 1:O[P].fn.call(O[P].context);break;case 2:O[P].fn.call(O[P].context,p);break;case 3:O[P].fn.call(O[P].context,p,v);break;case 4:O[P].fn.call(O[P].context,p,v,C);break;default:if(!L)for(B=1,L=new Array(M-1);B<M;B++)L[B-1]=arguments[B];O[P].fn.apply(O[P].context,L)}}return!0},f.prototype.on=function(x,p,v){return l(this,x,p,v,!1)},f.prototype.once=function(x,p,v){return l(this,x,p,v,!0)},f.prototype.removeListener=function(x,p,v,C){var T=s?s+x:x;if(!this._events[T])return this;if(!p)return u(this,T),this;var E=this._events[T];if(E.fn)E.fn===p&&(!C||E.once)&&(!v||E.context===v)&&u(this,T);else{for(var k=0,O=[],M=E.length;k<M;k++)(E[k].fn!==p||C&&!E[k].once||v&&E[k].context!==v)&&O.push(E[k]);O.length?this._events[T]=O.length===1?O[0]:O:u(this,T)}return this},f.prototype.removeAllListeners=function(x){var p;return x?(p=s?s+x:x,this._events[p]&&u(this,p)):(this._events=new n,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=s,f.EventEmitter=f,e.exports=f})(Rv)),Rv.exports}var lie=iie();const oie=Vi(lie);var Pf=new oie,IN="recharts.syncEvent.tooltip",YT="recharts.syncEvent.brush";function cie(e,t){if(t){var s=Number.parseInt(t,10);if(!Cl(s))return e?.[s]}}var uie={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},WM=Xn({name:"options",initialState:uie,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),die=WM.reducer,{createEventEmitter:hie}=WM.actions;function fie(e){return e.tooltip.syncInteraction}var mie={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},KM=Xn({name:"chartData",initialState:mie,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:s,endIndex:n}=t.payload;s!=null&&(e.dataStartIndex=s),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:XT,setDataStartEndIndexes:gie,setComputedData:pme}=KM.actions,xie=KM.reducer,pie=["x","y"];function WT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Mu(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?WT(Object(s),!0).forEach(function(n){yie(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):WT(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function yie(e,t,s){return(t=bie(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function bie(e){var t=vie(e,"string");return typeof t=="symbol"?t:t+""}function vie(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nie(e,t){if(e==null)return{};var s,n,a=wie(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function wie(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}function jie(){var e=Bt($j),t=Bt(qj),s=Ss(),n=Bt(W7),a=Bt(Rl),l=uj(),u=Ap(),f=Bt(m=>m.rootProps.className);w.useEffect(()=>{if(e==null)return Yf;var m=(x,p,v)=>{if(t!==v&&e===x){if(n==="index"){var C;if(u&&p!==null&&p!==void 0&&(C=p.payload)!==null&&C!==void 0&&C.coordinate&&p.payload.sourceViewBox){var T=p.payload.coordinate,{x:E,y:k}=T,O=Nie(T,pie),{x:M,y:L,width:P,height:H}=p.payload.sourceViewBox,B=Mu(Mu({},O),{},{x:u.x+(P?(E-M)/P:0)*u.width,y:u.y+(H?(k-L)/H:0)*u.height});s(Mu(Mu({},p),{},{payload:Mu(Mu({},p.payload),{},{coordinate:B})}))}else s(p);return}if(a!=null){var F;if(typeof n=="function"){var R={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},z=n(a,R);F=a[z]}else n==="value"&&(F=a.find(J=>String(J.value)===p.payload.label));var{coordinate:U}=p.payload;if(F==null||p.payload.active===!1||U==null||u==null){s(kN({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:Y,y:$}=U,G=Math.min(Y,u.x+u.width),ee=Math.min($,u.y+u.height),ce={x:l==="horizontal"?F.coordinate:G,y:l==="horizontal"?ee:F.coordinate},se=kN({active:p.payload.active,coordinate:ce,dataKey:p.payload.dataKey,index:String(F.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});s(se)}}};return Pf.on(IN,m),()=>{Pf.off(IN,m)}},[f,s,t,e,n,a,l,u])}function Sie(){var e=Bt($j),t=Bt(qj),s=Ss();w.useEffect(()=>{if(e==null)return Yf;var n=(a,l,u)=>{t!==u&&e===a&&s(gie(l))};return Pf.on(YT,n),()=>{Pf.off(YT,n)}},[s,t,e])}function Cie(){var e=Ss();w.useEffect(()=>{e(hie())},[e]),jie(),Sie()}function Aie(e,t,s,n,a,l){var u=Bt(T=>_ae(T,e,t)),f=Bt(qj),m=Bt($j),x=Bt(W7),p=Bt(fie),v=p?.active,C=Ap();w.useEffect(()=>{if(!v&&m!=null&&f!=null){var T=kN({active:l,coordinate:s,dataKey:u,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:C,graphicalItemId:void 0});Pf.emit(IN,m,T,f)}},[v,s,u,a,n,f,m,x,l,C])}function KT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function ZT(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?KT(Object(s),!0).forEach(function(n){Eie(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):KT(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Eie(e,t,s){return(t=Tie(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Tie(e){var t=Oie(e,"string");return typeof t=="symbol"?t:t+""}function Oie(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Die(e){return e.dataKey}function kie(e,t){return w.isValidElement(e)?w.cloneElement(e,t):typeof e=="function"?w.createElement(e,t):w.createElement(hJ,t)}var QT=[],_ie={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function MN(e){var t,s,n=Ga(e,_ie),{active:a,allowEscapeViewBox:l,animationDuration:u,animationEasing:f,content:m,filterNull:x,isAnimationActive:p,offset:v,payloadUniqBy:C,position:T,reverseDirection:E,useTranslate3d:k,wrapperStyle:O,cursor:M,shared:L,trigger:P,defaultIndex:H,portal:B,axisId:F}=n,R=Ss(),z=typeof H=="number"?String(H):H;w.useEffect(()=>{R(Ene({shared:L,trigger:P,axisId:F,active:a,defaultIndex:z}))},[R,L,P,F,a,z]);var U=Ap(),Y=VI(),$=Nne(L),{activeIndex:G,isActive:ee}=(t=Bt(fe=>Mae(fe,$,P,z)))!==null&&t!==void 0?t:{},ce=Bt(fe=>Iae(fe,$,P,z)),se=Bt(fe=>GM(fe,$,P,z)),J=Bt(fe=>Pae(fe,$,P,z)),ne=ce,pe=aie(),be=(s=a??ee)!==null&&s!==void 0?s:!1,[te,X]=YP([ne,be]),re=$==="axis"?se:void 0;Aie($,P,J,re,G,be);var ge=B??pe;if(ge==null||U==null||$==null)return null;var de=ne??QT;be||(de=QT),x&&de.length&&(de=VP(de.filter(fe=>fe.value!=null&&(fe.hide!==!0||n.includeHidden)),C,Die));var je=de.length>0,oe=w.createElement(bJ,{allowEscapeViewBox:l,animationDuration:u,animationEasing:f,isAnimationActive:p,active:be,coordinate:J,hasPayload:je,offset:v,position:T,reverseDirection:E,useTranslate3d:k,viewBox:U,wrapperStyle:O,lastBoundingBox:te,innerRef:X,hasPortalFromProps:!!B},kie(m,ZT(ZT({},n),{},{payload:de,label:re,active:be,activeIndex:G,coordinate:J,accessibilityLayer:Y})));return w.createElement(w.Fragment,null,WN.createPortal(oe,ge),be&&w.createElement(nie,{cursor:M,tooltipEventType:$,coordinate:J,payload:de,index:G}))}var vd=e=>null;vd.displayName="Cell";function Pie(e,t,s){return(t=Iie(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Iie(e){var t=Mie(e,"string");return typeof t=="symbol"?t:t+""}function Mie(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Rie{constructor(t){Pie(this,"cache",new Map),this.maxSize=t}get(t){var s=this.cache.get(t);return s!==void 0&&(this.cache.delete(t),this.cache.set(t,s)),s}set(t,s){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,s)}clear(){this.cache.clear()}size(){return this.cache.size}}function JT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Lie(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?JT(Object(s),!0).forEach(function(n){Bie(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):JT(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Bie(e,t,s){return(t=Fie(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Fie(e){var t=Uie(e,"string");return typeof t=="symbol"?t:t+""}function Uie(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zie={cacheSize:2e3,enableCache:!0},ZM=Lie({},zie),e8=new Rie(ZM.cacheSize),Vie={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},t8="recharts_measurement_span";function $ie(e,t){var s=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",l=t.fontStyle||"",u=t.letterSpacing||"",f=t.textTransform||"";return"".concat(e,"|").concat(s,"|").concat(n,"|").concat(a,"|").concat(l,"|").concat(u,"|").concat(f)}var r8=(e,t)=>{try{var s=document.getElementById(t8);s||(s=document.createElement("span"),s.setAttribute("id",t8),s.setAttribute("aria-hidden","true"),document.body.appendChild(s)),Object.assign(s.style,Vie,t),s.textContent="".concat(e);var n=s.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},s8=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||kp.isSsr)return{width:0,height:0};if(!ZM.enableCache)return r8(t,s);var n=$ie(t,s),a=e8.get(n);if(a)return a;var l=r8(t,s);return e8.set(n,l),l},n8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,a8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qie=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Hie=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,QM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Gie=Object.keys(QM),Ku="NaN";function Yie(e,t){return e*QM[t]}class zn{static parse(t){var s,[,n,a]=(s=Hie.exec(t))!==null&&s!==void 0?s:[];return new zn(parseFloat(n),a??"")}constructor(t,s){this.num=t,this.unit=s,this.num=t,this.unit=s,Cl(t)&&(this.unit=""),s!==""&&!qie.test(s)&&(this.num=NaN,this.unit=""),Gie.includes(s)&&(this.num=Yie(t,s),this.unit="px")}add(t){return this.unit!==t.unit?new zn(NaN,""):new zn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new zn(NaN,""):new zn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new zn(NaN,""):new zn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new zn(NaN,""):new zn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Cl(this.num)}}function JM(e){if(e.includes(Ku))return Ku;for(var t=e;t.includes("*")||t.includes("/");){var s,[,n,a,l]=(s=n8.exec(t))!==null&&s!==void 0?s:[],u=zn.parse(n??""),f=zn.parse(l??""),m=a==="*"?u.multiply(f):u.divide(f);if(m.isNaN())return Ku;t=t.replace(n8,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var x,[,p,v,C]=(x=a8.exec(t))!==null&&x!==void 0?x:[],T=zn.parse(p??""),E=zn.parse(C??""),k=v==="+"?T.add(E):T.subtract(E);if(k.isNaN())return Ku;t=t.replace(a8,k.toString())}return t}var i8=/\(([^()]*)\)/;function Xie(e){for(var t=e,s;(s=i8.exec(t))!=null;){var[,n]=s;t=t.replace(i8,JM(n))}return t}function Wie(e){var t=e.replace(/\s+/g,"");return t=Xie(t),t=JM(t),t}function Kie(e){try{return Wie(e)}catch{return Ku}}function Lv(e){var t=Kie(e.slice(5,-1));return t===Ku?"":t}var Zie=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Qie=["dx","dy","angle","className","breakAll"];function RN(){return RN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},RN.apply(null,arguments)}function l8(e,t){if(e==null)return{};var s,n,a=Jie(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Jie(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var eR=/[ \f\n\r\t\v\u2028\u2029]+/,tR=e=>{var{children:t,breakAll:s,style:n}=e;try{var a=[];xa(t)||(s?a=t.toString().split(""):a=t.toString().split(eR));var l=a.map(f=>({word:f,width:s8(f,n).width})),u=s?0:s8("",n).width;return{wordsWithComputedWidth:l,spaceWidth:u}}catch{return null}};function ele(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var rR=(e,t,s,n)=>e.reduce((a,l)=>{var{word:u,width:f}=l,m=a[a.length-1];if(m&&f!=null&&(t==null||n||m.width+f+s<Number(t)))m.words.push(u),m.width+=f+s;else{var x={words:[u],width:f};a.push(x)}return a},[]),sR=e=>e.reduce((t,s)=>t.width>s.width?t:s),tle="",o8=(e,t,s,n,a,l,u,f)=>{var m=e.slice(0,t),x=tR({breakAll:s,style:n,children:m+tle});if(!x)return[!1,[]];var p=rR(x.wordsWithComputedWidth,l,u,f),v=p.length>a||sR(p).width>Number(l);return[v,p]},rle=(e,t,s,n,a)=>{var{maxLines:l,children:u,style:f,breakAll:m}=e,x=It(l),p=String(u),v=rR(t,n,s,a);if(!x||a)return v;var C=v.length>l||sR(v).width>Number(n);if(!C)return v;for(var T=0,E=p.length-1,k=0,O;T<=E&&k<=p.length-1;){var M=Math.floor((T+E)/2),L=M-1,[P,H]=o8(p,L,m,f,l,n,s,a),[B]=o8(p,M,m,f,l,n,s,a);if(!P&&!B&&(T=M+1),P&&B&&(E=M-1),!P&&B){O=H;break}k++}return O||v},c8=e=>{var t=xa(e)?[]:e.toString().split(eR);return[{words:t,width:void 0}]},sle=e=>{var{width:t,scaleToFit:s,children:n,style:a,breakAll:l,maxLines:u}=e;if((t||s)&&!kp.isSsr){var f,m,x=tR({breakAll:l,children:n,style:a});if(x){var{wordsWithComputedWidth:p,spaceWidth:v}=x;f=p,m=v}else return c8(n);return rle({breakAll:l,children:n,maxLines:u,style:a},f,m,t,!!s)}return c8(n)},nR="#808080",nle={angle:0,breakAll:!1,capHeight:"0.71em",fill:nR,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},CS=w.forwardRef((e,t)=>{var s=Ga(e,nle),{x:n,y:a,lineHeight:l,capHeight:u,fill:f,scaleToFit:m,textAnchor:x,verticalAnchor:p}=s,v=l8(s,Zie),C=w.useMemo(()=>sle({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:m,style:v.style,width:v.width}),[v.breakAll,v.children,v.maxLines,m,v.style,v.width]),{dx:T,dy:E,angle:k,className:O,breakAll:M}=v,L=l8(v,Qie);if(!El(n)||!El(a)||C.length===0)return null;var P=Number(n)+(It(T)?T:0),H=Number(a)+(It(E)?E:0);if(!tn(P)||!tn(H))return null;var B;switch(p){case"start":B=Lv("calc(".concat(u,")"));break;case"middle":B=Lv("calc(".concat((C.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:B=Lv("calc(".concat(C.length-1," * -").concat(l,")"));break}var F=[];if(m){var R=C[0].width,{width:z}=v;F.push("scale(".concat(It(z)&&It(R)?z/R:1,")"))}return k&&F.push("rotate(".concat(k,", ").concat(P,", ").concat(H,")")),F.length&&(L.transform=F.join(" ")),w.createElement("text",RN({},$a(L),{ref:t,x:P,y:H,className:js("recharts-text",O),textAnchor:x,fill:f.includes("url")?nR:f}),C.map((U,Y)=>{var $=U.words.join(M?"":" ");return w.createElement("tspan",{x:P,dy:Y===0?B:l,key:"".concat($,"-").concat(Y)},$)}))});CS.displayName="Text";var ale=["labelRef"];function ile(e,t){if(e==null)return{};var s,n,a=lle(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function lle(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}function u8(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function _s(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?u8(Object(s),!0).forEach(function(n){ole(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function ole(e,t,s){return(t=cle(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function cle(e){var t=ule(e,"string");return typeof t=="symbol"?t:t+""}function ule(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rx(){return Rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Rx.apply(null,arguments)}var dle=w.createContext(null),hle=()=>{var e=w.useContext(dle),t=Ap();return e||kI(t)},fle=w.createContext(null),mle=()=>{var e=w.useContext(fle),t=Bt(eM);return e||t},gle=e=>{var{value:t,formatter:s}=e,n=xa(e.children)?t:e.children;return typeof s=="function"?s(n):n},xle=e=>e!=null&&typeof e=="function",ple=(e,t)=>{var s=$n(t-e),n=Math.min(Math.abs(t-e),360);return s*n},yle=(e,t,s,n,a)=>{var{offset:l,className:u}=e,{cx:f,cy:m,innerRadius:x,outerRadius:p,startAngle:v,endAngle:C,clockWise:T}=a,E=(x+p)/2,k=ple(v,C),O=k>=0?1:-1,M,L;switch(t){case"insideStart":M=v+O*l,L=T;break;case"insideEnd":M=C-O*l,L=!T;break;case"end":M=C+O*l,L=T;break;default:throw new Error("Unsupported position ".concat(t))}L=k<=0?L:!L;var P=Ms(f,m,E,M),H=Ms(f,m,E,M+(L?1:-1)*359),B="M".concat(P.x,",").concat(P.y,`
    A`).concat(E,",").concat(E,",0,1,").concat(L?0:1,`,
    `).concat(H.x,",").concat(H.y),F=xa(e.id)?bf("recharts-radial-line-"):e.id;return w.createElement("text",Rx({},n,{dominantBaseline:"central",className:js("recharts-radial-bar-label",u)}),w.createElement("defs",null,w.createElement("path",{id:F,d:B})),w.createElement("textPath",{xlinkHref:"#".concat(F)},s))},ble=(e,t,s)=>{var{cx:n,cy:a,innerRadius:l,outerRadius:u,startAngle:f,endAngle:m}=e,x=(f+m)/2;if(s==="outside"){var{x:p,y:v}=Ms(n,a,u+t,x);return{x:p,y:v,textAnchor:p>=n?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var C=(l+u)/2,{x:T,y:E}=Ms(n,a,C,x);return{x:T,y:E,textAnchor:"middle",verticalAnchor:"middle"}},LN=e=>"cx"in e&&It(e.cx),vle=(e,t)=>{var{parentViewBox:s,offset:n,position:a}=e,l;s!=null&&!LN(s)&&(l=s);var{x:u,y:f,upperWidth:m,lowerWidth:x,height:p}=t,v=u,C=u+(m-x)/2,T=(v+C)/2,E=(m+x)/2,k=v+m/2,O=p>=0?1:-1,M=O*n,L=O>0?"end":"start",P=O>0?"start":"end",H=m>=0?1:-1,B=H*n,F=H>0?"end":"start",R=H>0?"start":"end";if(a==="top"){var z={x:v+m/2,y:f-M,textAnchor:"middle",verticalAnchor:L};return _s(_s({},z),l?{height:Math.max(f-l.y,0),width:m}:{})}if(a==="bottom"){var U={x:C+x/2,y:f+p+M,textAnchor:"middle",verticalAnchor:P};return _s(_s({},U),l?{height:Math.max(l.y+l.height-(f+p),0),width:x}:{})}if(a==="left"){var Y={x:T-B,y:f+p/2,textAnchor:F,verticalAnchor:"middle"};return _s(_s({},Y),l?{width:Math.max(Y.x-l.x,0),height:p}:{})}if(a==="right"){var $={x:T+E+B,y:f+p/2,textAnchor:R,verticalAnchor:"middle"};return _s(_s({},$),l?{width:Math.max(l.x+l.width-$.x,0),height:p}:{})}var G=l?{width:E,height:p}:{};return a==="insideLeft"?_s({x:T+B,y:f+p/2,textAnchor:R,verticalAnchor:"middle"},G):a==="insideRight"?_s({x:T+E-B,y:f+p/2,textAnchor:F,verticalAnchor:"middle"},G):a==="insideTop"?_s({x:v+m/2,y:f+M,textAnchor:"middle",verticalAnchor:P},G):a==="insideBottom"?_s({x:C+x/2,y:f+p-M,textAnchor:"middle",verticalAnchor:L},G):a==="insideTopLeft"?_s({x:v+B,y:f+M,textAnchor:R,verticalAnchor:P},G):a==="insideTopRight"?_s({x:v+m-B,y:f+M,textAnchor:F,verticalAnchor:P},G):a==="insideBottomLeft"?_s({x:C+B,y:f+p-M,textAnchor:R,verticalAnchor:L},G):a==="insideBottomRight"?_s({x:C+x-B,y:f+p-M,textAnchor:F,verticalAnchor:L},G):a&&typeof a=="object"&&(It(a.x)||Al(a.x))&&(It(a.y)||Al(a.y))?_s({x:u+fa(a.x,E),y:f+fa(a.y,p),textAnchor:"end",verticalAnchor:"end"},G):_s({x:k,y:f+p/2,textAnchor:"middle",verticalAnchor:"middle"},G)},Nle={angle:0,offset:5,zIndex:di.label,position:"middle",textBreakAll:!1};function aR(e){var t=Ga(e,Nle),{viewBox:s,position:n,value:a,children:l,content:u,className:f="",textBreakAll:m,labelRef:x}=t,p=mle(),v=hle(),C=n==="center"?v:p??v,T,E,k;if(s==null?T=C:LN(s)?T=s:T=kI(s),!T||xa(a)&&xa(l)&&!w.isValidElement(u)&&typeof u!="function")return null;var O=_s(_s({},t),{},{viewBox:T});if(w.isValidElement(u)){var{labelRef:M}=O,L=ile(O,ale);return w.cloneElement(u,L)}if(typeof u=="function"){if(E=w.createElement(u,O),w.isValidElement(E))return E}else E=gle(t);var P=$a(t);if(LN(T)){if(n==="insideStart"||n==="insideEnd"||n==="end")return yle(t,n,E,P,T);k=ble(T,t.offset,t.position)}else k=vle(t,T);return w.createElement(f0,{zIndex:t.zIndex},w.createElement(CS,Rx({ref:x,className:js("recharts-label",f)},P,k,{textAnchor:ele(P.textAnchor)?P.textAnchor:k.textAnchor,breakAll:m}),E))}aR.displayName="Label";var Bv={},Fv={},d8;function wle(){return d8||(d8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s[s.length-1]}e.last=t})(Fv)),Fv}var Uv={},h8;function jle(){return h8||(h8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return Array.isArray(s)?s:Array.from(s)}e.toArray=t})(Uv)),Uv}var f8;function Sle(){return f8||(f8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wle(),s=jle(),n=Jw();function a(l){if(n.isArrayLike(l))return t.last(s.toArray(l))}e.last=a})(Bv)),Bv}var zv,m8;function Cle(){return m8||(m8=1,zv=Sle().last),zv}var Ale=Cle();const Ele=Vi(Ale);var Tle=["valueAccessor"],Ole=["dataKey","clockWise","id","textBreakAll","zIndex"];function Lx(){return Lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Lx.apply(null,arguments)}function g8(e,t){if(e==null)return{};var s,n,a=Dle(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Dle(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var kle=e=>Array.isArray(e.value)?Ele(e.value):e.value,iR=w.createContext(void 0);iR.Provider;var lR=w.createContext(void 0),_le=lR.Provider;function Ple(){return w.useContext(iR)}function Ile(){return w.useContext(lR)}function Rg(e){var{valueAccessor:t=kle}=e,s=g8(e,Tle),{dataKey:n,clockWise:a,id:l,textBreakAll:u,zIndex:f}=s,m=g8(s,Ole),x=Ple(),p=Ile(),v=x||p;return!v||!v.length?null:w.createElement(f0,{zIndex:f??di.label},w.createElement(Fo,{className:"recharts-label-list"},v.map((C,T)=>{var E,k=xa(n)?t(C,T):ws(C&&C.payload,n),O=xa(l)?{}:{id:"".concat(l,"-").concat(T)};return w.createElement(aR,Lx({key:"label-".concat(T)},$a(C),m,O,{fill:(E=s.fill)!==null&&E!==void 0?E:C.fill,parentViewBox:C.parentViewBox,value:k,textBreakAll:u,viewBox:C.viewBox,index:T,zIndex:0}))})))}Rg.displayName="LabelList";function Mle(e){var{label:t}=e;return t?t===!0?w.createElement(Rg,{key:"labelList-implicit"}):w.isValidElement(t)||xle(t)?w.createElement(Rg,{key:"labelList-implicit",content:t}):typeof t=="object"?w.createElement(Rg,Lx({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var oR=e=>e.graphicalItems.polarItems,Rle=Ie([ns,n0],Kj),Yp=Ie([oR,os,Rle],Zj),Lle=Ie([Yp],Qj),Xp=Ie([Lle,Fj],Jj),Ble=Ie([Xp,os,Yp],tS);Ie([Xp,os,Yp],(e,t,s)=>s.length>0?e.flatMap(n=>s.flatMap(a=>{var l,u=ws(n,(l=t.dataKey)!==null&&l!==void 0?l:a.dataKey);return{value:u,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(n=>({value:ws(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var x8=()=>{},Fle=Ie([Xp,os,Yp,$p,ns],aS),Ule=Ie([os,sS,nS,x8,Fle,x8,Vr,ns],iS),cR=Ie([os,Vr,Xp,Ble,s0,ns,Ule],lS),zle=Ie([cR,os,Bd],uS);Ie([os,cR,zle,ns],hS);var Vle={radiusAxis:{},angleAxis:{}},uR=Xn({name:"polarAxis",initialState:Vle,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:yme,removeRadiusAxis:bme,addAngleAxis:vme,removeAngleAxis:Nme}=uR.actions,$le=uR.reducer;function p8(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function y8(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?p8(Object(s),!0).forEach(function(n){qle(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function qle(e,t,s){return(t=Hle(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Hle(e){var t=Gle(e,"string");return typeof t=="symbol"?t:t+""}function Gle(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yle=(e,t)=>t,AS=Ie([oR,Yle],(e,t)=>e.filter(s=>s.type==="pie").find(s=>s.id===t)),Xle=[],ES=(e,t,s)=>s?.length===0?Xle:s,dR=Ie([Fj,AS,ES],(e,t,s)=>{var{chartData:n}=e;if(t!=null){var a;if(t?.data!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&s!=null&&(a=s.map(l=>y8(y8({},t.presentationProps),l.props))),a!=null)return a}}),Wle=Ie([dR,AS,ES],(e,t,s)=>{if(!(e==null||t==null))return e.map((n,a)=>{var l,u=ws(n,t.nameKey,t.name),f;return s!=null&&(l=s[a])!==null&&l!==void 0&&(l=l.props)!==null&&l!==void 0&&l.fill?f=s[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?f=n.fill:f=t.fill,{value:SI(u,t.dataKey),color:f,payload:n,type:t.legendType}})}),Kle=Ie([dR,AS,ES,rn],(e,t,s,n)=>{if(!(t==null||e==null))return Joe({offset:n,pieSettings:t,displayedData:e,cells:s})}),Vv={exports:{}},Tr={};var b8;function Zle(){if(b8)return Tr;b8=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),C=Symbol.for("react.view_transition"),T=Symbol.for("react.client.reference");function E(k){if(typeof k=="object"&&k!==null){var O=k.$$typeof;switch(O){case e:switch(k=k.type,k){case s:case a:case n:case m:case x:case C:return k;default:switch(k=k&&k.$$typeof,k){case u:case f:case v:case p:return k;case l:return k;default:return O}}case t:return O}}}return Tr.ContextConsumer=l,Tr.ContextProvider=u,Tr.Element=e,Tr.ForwardRef=f,Tr.Fragment=s,Tr.Lazy=v,Tr.Memo=p,Tr.Portal=t,Tr.Profiler=a,Tr.StrictMode=n,Tr.Suspense=m,Tr.SuspenseList=x,Tr.isContextConsumer=function(k){return E(k)===l},Tr.isContextProvider=function(k){return E(k)===u},Tr.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},Tr.isForwardRef=function(k){return E(k)===f},Tr.isFragment=function(k){return E(k)===s},Tr.isLazy=function(k){return E(k)===v},Tr.isMemo=function(k){return E(k)===p},Tr.isPortal=function(k){return E(k)===t},Tr.isProfiler=function(k){return E(k)===a},Tr.isStrictMode=function(k){return E(k)===n},Tr.isSuspense=function(k){return E(k)===m},Tr.isSuspenseList=function(k){return E(k)===x},Tr.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===s||k===a||k===n||k===m||k===x||typeof k=="object"&&k!==null&&(k.$$typeof===v||k.$$typeof===p||k.$$typeof===u||k.$$typeof===l||k.$$typeof===f||k.$$typeof===T||k.getModuleId!==void 0)},Tr.typeOf=E,Tr}var v8;function Qle(){return v8||(v8=1,Vv.exports=Zle()),Vv.exports}var Jle=Qle(),N8=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",w8=null,$v=null,hR=e=>{if(e===w8&&Array.isArray($v))return $v;var t=[];return w.Children.forEach(e,s=>{xa(s)||(Jle.isFragment(s)?t=t.concat(hR(s.props.children)):t.push(s))}),$v=t,w8=e,t};function fR(e,t){var s=[],n=[];return Array.isArray(t)?n=t.map(a=>N8(a)):n=[N8(t)],hR(e).forEach(a=>{var l=yf(a,"type.displayName")||yf(a,"type.name");l&&n.indexOf(l)!==-1&&s.push(a)}),s}var qv={},j8;function eoe(){return j8||(j8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){if(typeof s!="object"||s==null)return!1;if(Object.getPrototypeOf(s)===null)return!0;if(Object.prototype.toString.call(s)!=="[object Object]"){const a=s[Symbol.toStringTag];return a==null||!Object.getOwnPropertyDescriptor(s,Symbol.toStringTag)?.writable?!1:s.toString()===`[object ${a}]`}let n=s;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(s)===n}e.isPlainObject=t})(qv)),qv}var Hv,S8;function toe(){return S8||(S8=1,Hv=eoe().isPlainObject),Hv}var roe=toe();const soe=Vi(roe);function C8(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function A8(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?C8(Object(s),!0).forEach(function(n){noe(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):C8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function noe(e,t,s){return(t=aoe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function aoe(e){var t=ioe(e,"string");return typeof t=="symbol"?t:t+""}function ioe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bx(){return Bx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Bx.apply(null,arguments)}var E8=(e,t,s,n,a)=>{var l=s-n,u;return u="M ".concat(e,",").concat(t),u+="L ".concat(e+s,",").concat(t),u+="L ".concat(e+s-l/2,",").concat(t+a),u+="L ".concat(e+s-l/2-n,",").concat(t+a),u+="L ".concat(e,",").concat(t," Z"),u},loe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ooe=e=>{var t=Ga(e,loe),{x:s,y:n,upperWidth:a,lowerWidth:l,height:u,className:f}=t,{animationEasing:m,animationDuration:x,animationBegin:p,isUpdateAnimationActive:v}=t,C=w.useRef(null),[T,E]=w.useState(-1),k=w.useRef(a),O=w.useRef(l),M=w.useRef(u),L=w.useRef(s),P=w.useRef(n),H=gj(e,"trapezoid-");if(w.useEffect(()=>{if(C.current&&C.current.getTotalLength)try{var ce=C.current.getTotalLength();ce&&E(ce)}catch{}},[]),s!==+s||n!==+n||a!==+a||l!==+l||u!==+u||a===0&&l===0||u===0)return null;var B=js("recharts-trapezoid",f);if(!v)return w.createElement("g",null,w.createElement("path",Bx({},$a(t),{className:B,d:E8(s,n,a,l,u)})));var F=k.current,R=O.current,z=M.current,U=L.current,Y=P.current,$="0px ".concat(T===-1?1:T,"px"),G="".concat(T,"px 0px"),ee=$I(["strokeDasharray"],x,m);return w.createElement(mj,{animationId:H,key:H,canBegin:T>0,duration:x,easing:m,isActive:v,begin:p},ce=>{var se=li(F,a,ce),J=li(R,l,ce),ne=li(z,u,ce),pe=li(U,s,ce),be=li(Y,n,ce);C.current&&(k.current=se,O.current=J,M.current=ne,L.current=pe,P.current=be);var te=ce>0?{transition:ee,strokeDasharray:G}:{strokeDasharray:$};return w.createElement("path",Bx({},$a(t),{className:B,d:E8(pe,be,se,J,ne),ref:C,style:A8(A8({},te),t.style)}))})},coe=["option","shapeType","propTransformer","activeClassName"];function uoe(e,t){if(e==null)return{};var s,n,a=doe(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function doe(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}function T8(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Fx(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?T8(Object(s),!0).forEach(function(n){hoe(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function hoe(e,t,s){return(t=foe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function foe(e){var t=moe(e,"string");return typeof t=="symbol"?t:t+""}function moe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function goe(e,t){return Fx(Fx({},t),e)}function xoe(e,t){return e==="symbols"}function O8(e){var{shapeType:t,elementProps:s}=e;switch(t){case"rectangle":return w.createElement(YI,s);case"trapezoid":return w.createElement(ooe,s);case"sector":return w.createElement(ZI,s);case"symbols":if(xoe(t))return w.createElement(Qw,s);break;case"curve":return w.createElement(fj,s);default:return null}}function poe(e){return w.isValidElement(e)?e.props:e}function yoe(e){var{option:t,shapeType:s,propTransformer:n=goe,activeClassName:a="recharts-active-shape"}=e,l=uoe(e,coe),u;if(w.isValidElement(t))u=w.cloneElement(t,Fx(Fx({},l),poe(t)));else if(typeof t=="function")u=t(l,l.index);else if(soe(t)&&typeof t!="boolean"){var f=n(t,l);u=w.createElement(O8,{shapeType:s,elementProps:f})}else{var m=l;u=w.createElement(O8,{shapeType:s,elementProps:m})}return l.isActive?w.createElement(Fo,{className:a},u):u}var boe=(e,t,s)=>{var n=Ss();return(a,l)=>u=>{e?.(a,l,u),n(EM({activeIndex:String(l),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:s}))}},voe=e=>{var t=Ss();return(s,n)=>a=>{e?.(s,n,a),t(Tne())}},Noe=(e,t,s)=>{var n=Ss();return(a,l)=>u=>{e?.(a,l,u),n(One({activeIndex:String(l),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:s}))}};function woe(e){var{tooltipEntrySettings:t}=e,s=Ss(),n=qo(),a=w.useRef(null);return w.useLayoutEffect(()=>{n||(a.current===null?s(Sne(t)):a.current!==t&&s(Cne({prev:a.current,next:t})),a.current=t)},[t,s,n]),w.useLayoutEffect(()=>()=>{a.current&&(s(Ane(a.current)),a.current=null)},[s]),null}function joe(e){var{legendPayload:t}=e,s=Ss(),n=Bt(Vr),a=w.useRef(null);return w.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?s(HQ(t)):a.current!==t&&s(GQ({prev:a.current,next:t})),a.current=t)},[s,n,t]),w.useLayoutEffect(()=>()=>{a.current&&(s(YQ(a.current)),a.current=null)},[s]),null}var Gv,Soe=()=>{var[e]=w.useState(()=>bf("uid-"));return e},Coe=(Gv=hL.useId)!==null&&Gv!==void 0?Gv:Soe;function mR(e,t){var s=Coe();return t||(e?"".concat(e,"-").concat(s):s)}var Aoe=w.createContext(void 0),Eoe=e=>{var{id:t,type:s,children:n}=e,a=mR("recharts-".concat(s),t);return w.createElement(Aoe.Provider,{value:a},n(a))},Toe={cartesianItems:[],polarItems:[]},gR=Xn({name:"graphicalItems",initialState:Toe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:es()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:s,next:n}=t.payload,a=hi(e).cartesianItems.indexOf(s);a>-1&&(e.cartesianItems[a]=n)},prepare:es()},removeCartesianGraphicalItem:{reducer(e,t){var s=hi(e).cartesianItems.indexOf(t.payload);s>-1&&e.cartesianItems.splice(s,1)},prepare:es()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:es()},removePolarGraphicalItem:{reducer(e,t){var s=hi(e).polarItems.indexOf(t.payload);s>-1&&e.polarItems.splice(s,1)},prepare:es()}}}),{addCartesianGraphicalItem:wme,replaceCartesianGraphicalItem:jme,removeCartesianGraphicalItem:Sme,addPolarGraphicalItem:Ooe,removePolarGraphicalItem:Doe}=gR.actions,koe=gR.reducer;function _oe(e){var t=Ss();return w.useLayoutEffect(()=>(t(Ooe(e)),()=>{t(Doe(e))}),[t,e]),null}var Poe=["key"],Ioe=["onMouseEnter","onClick","onMouseLeave"],Moe=["id"],Roe=["id"];function D8(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function xs(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?D8(Object(s),!0).forEach(function(n){Loe(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):D8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Loe(e,t,s){return(t=Boe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Boe(e){var t=Foe(e,"string");return typeof t=="symbol"?t:t+""}function Foe(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vo(){return Vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Vo.apply(null,arguments)}function Wp(e,t){if(e==null)return{};var s,n,a=Uoe(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Uoe(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}function zoe(e){var t=w.useMemo(()=>fR(e.children,vd),[e.children]),s=Bt(n=>Wle(n,e.id,t));return s==null?null:w.createElement(joe,{legendPayload:s})}var Voe=w.memo(e=>{var{dataKey:t,nameKey:s,sectors:n,stroke:a,strokeWidth:l,fill:u,name:f,hide:m,tooltipType:x}=e,p={dataDefinedOnItem:n.map(v=>v.tooltipPayload),positions:n.map(v=>v.tooltipPosition),settings:{stroke:a,strokeWidth:l,fill:u,dataKey:t,nameKey:s,name:SI(f,t),hide:m,type:x,color:u,unit:""}};return w.createElement(woe,{tooltipEntrySettings:p})}),$oe=(e,t)=>e>t?"start":e<t?"end":"middle",qoe=(e,t,s)=>fa(typeof t=="function"?t(e):t,s,s*.8),Hoe=(e,t,s)=>{var{top:n,left:a,width:l,height:u}=t,f=XI(l,u),m=a+fa(e.cx,l,l/2),x=n+fa(e.cy,u,u/2),p=fa(e.innerRadius,f,0),v=qoe(s,e.outerRadius,f),C=e.maxRadius||Math.sqrt(l*l+u*u)/2;return{cx:m,cy:x,innerRadius:p,outerRadius:v,maxRadius:C}},Goe=(e,t)=>{var s=$n(t-e),n=Math.min(Math.abs(t-e),360);return s*n};function Yoe(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Xoe=(e,t)=>{if(w.isValidElement(e))return w.cloneElement(e,t);if(typeof e=="function")return e(t);var s=js("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,a=Wp(t,Poe);return w.createElement(fj,Vo({},a,{type:"linear",className:s}))},Woe=(e,t,s)=>{if(w.isValidElement(e))return w.cloneElement(e,t);var n=s;if(typeof e=="function"&&(n=e(t),w.isValidElement(n)))return n;var a=js("recharts-pie-label-text",Yoe(e));return w.createElement(CS,Vo({},t,{alignmentBaseline:"middle",className:a}),n)};function Koe(e){var{sectors:t,props:s,showLabels:n}=e,{label:a,labelLine:l,dataKey:u}=s;if(!n||!a||!t)return null;var f=dd(s),m=V2(a),x=V2(l),p=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,v=t.map((C,T)=>{var E=(C.startAngle+C.endAngle)/2,k=Ms(C.cx,C.cy,C.outerRadius+p,E),O=xs(xs(xs(xs({},f),C),{},{stroke:"none"},m),{},{index:T,textAnchor:$oe(k.x,C.cx)},k),M=xs(xs(xs(xs({},f),C),{},{fill:"none",stroke:C.fill},x),{},{index:T,points:[Ms(C.cx,C.cy,C.outerRadius,E),k],key:"line"});return w.createElement(f0,{zIndex:di.label,key:"label-".concat(C.startAngle,"-").concat(C.endAngle,"-").concat(C.midAngle,"-").concat(T)},w.createElement(Fo,null,l&&Xoe(l,M),Woe(a,O,ws(C,u))))});return w.createElement(Fo,{className:"recharts-pie-labels"},v)}function Zoe(e){var{sectors:t,props:s,showLabels:n}=e,{label:a}=s;return typeof a=="object"&&a!=null&&"position"in a?w.createElement(Mle,{label:a}):w.createElement(Koe,{sectors:t,props:s,showLabels:n})}function Qoe(e){var{sectors:t,activeShape:s,inactiveShape:n,allOtherPieProps:a,shape:l,id:u}=e,f=Bt(_f),m=Bt(zM),x=Bt(mae),{onMouseEnter:p,onClick:v,onMouseLeave:C}=a,T=Wp(a,Ioe),E=boe(p,a.dataKey,u),k=voe(C),O=Noe(v,a.dataKey,u);return t==null||t.length===0?null:w.createElement(w.Fragment,null,t.map((M,L)=>{if(M?.startAngle===0&&M?.endAngle===0&&t.length!==1)return null;var P=x==null||x===u,H=String(L)===f&&(m==null||a.dataKey===m)&&P,B=f?n:null,F=s&&H?s:B,R=xs(xs({},M),{},{stroke:M.stroke,tabIndex:-1,[AI]:L,[EI]:a.dataKey});return w.createElement(Fo,Vo({key:"sector-".concat(M?.startAngle,"-").concat(M?.endAngle,"-").concat(M.midAngle,"-").concat(L),tabIndex:-1,className:"recharts-pie-sector"},_P(T,M,L),{onMouseEnter:E(M,L),onMouseLeave:k(M,L),onClick:O(M,L)}),w.createElement(yoe,Vo({option:l??F,index:L,shapeType:"sector",isActive:H},R)))}))}function Joe(e){var t,{pieSettings:s,displayedData:n,cells:a,offset:l}=e,{cornerRadius:u,startAngle:f,endAngle:m,dataKey:x,nameKey:p,tooltipType:v}=s,C=Math.abs(s.minAngle),T=Goe(f,m),E=Math.abs(T),k=n.length<=1?0:(t=s.paddingAngle)!==null&&t!==void 0?t:0,O=n.filter(F=>ws(F,x,0)!==0).length,M=(E>=360?O:O-1)*k,L=E-O*C-M,P=n.reduce((F,R)=>{var z=ws(R,x,0);return F+(It(z)?z:0)},0),H;if(P>0){var B;H=n.map((F,R)=>{var z=ws(F,x,0),U=ws(F,p,R),Y=Hoe(s,l,F),$=(It(z)?z:0)/P,G,ee=xs(xs({},F),a&&a[R]&&a[R].props);R?G=B.endAngle+$n(T)*k*(z!==0?1:0):G=f;var ce=G+$n(T)*((z!==0?C:0)+$*L),se=(G+ce)/2,J=(Y.innerRadius+Y.outerRadius)/2,ne=[{name:U,value:z,payload:ee,dataKey:x,type:v}],pe=Ms(Y.cx,Y.cy,J,se);return B=xs(xs(xs(xs({},s.presentationProps),{},{percent:$,cornerRadius:typeof u=="string"?parseFloat(u):u,name:U,tooltipPayload:ne,midAngle:se,middleRadius:J,tooltipPosition:pe},ee),Y),{},{value:z,dataKey:x,startAngle:G,endAngle:ce,payload:ee,paddingAngle:$n(T)*k}),B})}return H}function ece(e){var{showLabels:t,sectors:s,children:n}=e,a=w.useMemo(()=>!t||!s?[]:s.map(l=>({value:l.value,payload:l.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:l.cx,cy:l.cy,innerRadius:l.innerRadius,outerRadius:l.outerRadius,startAngle:l.startAngle,endAngle:l.endAngle,clockWise:!1},fill:l.fill})),[s,t]);return w.createElement(_le,{value:t?a:void 0},n)}function tce(e){var{props:t,previousSectorsRef:s,id:n}=e,{sectors:a,isAnimationActive:l,animationBegin:u,animationDuration:f,animationEasing:m,activeShape:x,inactiveShape:p,onAnimationStart:v,onAnimationEnd:C}=t,T=gj(t,"recharts-pie-"),E=s.current,[k,O]=w.useState(!1),M=w.useCallback(()=>{typeof C=="function"&&C(),O(!1)},[C]),L=w.useCallback(()=>{typeof v=="function"&&v(),O(!0)},[v]);return w.createElement(ece,{showLabels:!k,sectors:a},w.createElement(mj,{animationId:T,begin:u,duration:f,isActive:l,easing:m,onAnimationStart:L,onAnimationEnd:M,key:T},P=>{var H=[],B=a&&a[0],F=B?.startAngle;return a?.forEach((R,z)=>{var U=E&&E[z],Y=z>0?yf(R,"paddingAngle",0):0;if(U){var $=li(U.endAngle-U.startAngle,R.endAngle-R.startAngle,P),G=xs(xs({},R),{},{startAngle:F+Y,endAngle:F+$+Y});H.push(G),F=G.endAngle}else{var{endAngle:ee,startAngle:ce}=R,se=li(0,ee-ce,P),J=xs(xs({},R),{},{startAngle:F+Y,endAngle:F+se+Y});H.push(J),F=J.endAngle}}),s.current=H,w.createElement(Fo,null,w.createElement(Qoe,{sectors:H,activeShape:x,inactiveShape:p,allOtherPieProps:t,shape:t.shape,id:n}))}),w.createElement(Zoe,{showLabels:!k,sectors:a,props:t}),t.children)}var rce={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:di.area};function sce(e){var{id:t}=e,s=Wp(e,Moe),{hide:n,className:a,rootTabIndex:l}=e,u=w.useMemo(()=>fR(e.children,vd),[e.children]),f=Bt(p=>Kle(p,t,u)),m=w.useRef(null),x=js("recharts-pie",a);return n||f==null?(m.current=null,w.createElement(Fo,{tabIndex:l,className:x})):w.createElement(f0,{zIndex:e.zIndex},w.createElement(Voe,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:f,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),w.createElement(Fo,{tabIndex:l,className:x},w.createElement(tce,{props:xs(xs({},s),{},{sectors:f}),previousSectorsRef:m,id:t})))}function Ux(e){var t=Ga(e,rce),{id:s}=t,n=Wp(t,Roe),a=dd(n);return w.createElement(Eoe,{id:s,type:"pie"},l=>w.createElement(w.Fragment,null,w.createElement(_oe,{type:"pie",id:l,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:t.maxRadius}),w.createElement(zoe,Vo({},n,{id:l})),w.createElement(sce,Vo({},n,{id:l}))))}Ux.displayName="Pie";function k8(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function _8(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?k8(Object(s),!0).forEach(function(n){nce(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):k8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function nce(e,t,s){return(t=ace(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ace(e){var t=ice(e,"string");return typeof t=="symbol"?t:t+""}function ice(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lce={xAxis:{},yAxis:{},zAxis:{}},xR=Xn({name:"cartesianAxis",initialState:lce,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:es()},replaceXAxis:{reducer(e,t){var{prev:s,next:n}=t.payload;e.xAxis[s.id]!==void 0&&(s.id!==n.id&&delete e.xAxis[s.id],e.xAxis[n.id]=n)},prepare:es()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:es()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:es()},replaceYAxis:{reducer(e,t){var{prev:s,next:n}=t.payload;e.yAxis[s.id]!==void 0&&(s.id!==n.id&&delete e.yAxis[s.id],e.yAxis[n.id]=n)},prepare:es()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:es()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:es()},replaceZAxis:{reducer(e,t){var{prev:s,next:n}=t.payload;e.zAxis[s.id]!==void 0&&(s.id!==n.id&&delete e.zAxis[s.id],e.zAxis[n.id]=n)},prepare:es()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:es()},updateYAxisWidth(e,t){var{id:s,width:n}=t.payload,a=e.yAxis[s];if(a){var l=a.widthHistory||[];if(l.length===3&&l[0]===l[2]&&n===l[1]&&n!==a.width&&Math.abs(n-l[0])<=1)return;var u=[...l,n].slice(-3);e.yAxis[s]=_8(_8({},e.yAxis[s]),{},{width:n,widthHistory:u})}}}}),{addXAxis:Cme,replaceXAxis:Ame,removeXAxis:Eme,addYAxis:Tme,replaceYAxis:Ome,removeYAxis:Dme,addZAxis:kme,replaceZAxis:_me,removeZAxis:Pme,updateYAxisWidth:Ime}=xR.actions,oce=xR.reducer,cce=Ie([rn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),uce=Ie([cce,Pl,Il],(e,t,s)=>{if(!(!e||t==null||s==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,s-e.top-e.bottom)}}),dce=()=>Bt(uce),hce={},pR=Xn({name:"errorBars",initialState:hce,reducers:{addErrorBar:(e,t)=>{var{itemId:s,errorBar:n}=t.payload;e[s]||(e[s]=[]),e[s].push(n)},replaceErrorBar:(e,t)=>{var{itemId:s,prev:n,next:a}=t.payload;e[s]&&(e[s]=e[s].map(l=>l.dataKey===n.dataKey&&l.direction===n.direction?a:l))},removeErrorBar:(e,t)=>{var{itemId:s,errorBar:n}=t.payload;e[s]&&(e[s]=e[s].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Mme,replaceErrorBar:Rme,removeErrorBar:Lme}=pR.actions,fce=pR.reducer,Yv={exports:{}},Xv={};var P8;function mce(){if(P8)return Xv;P8=1;var e=Nd();function t(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var s=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,l=e.useEffect,u=e.useMemo,f=e.useDebugValue;return Xv.useSyncExternalStoreWithSelector=function(m,x,p,v,C){var T=a(null);if(T.current===null){var E={hasValue:!1,value:null};T.current=E}else E=T.current;T=u(function(){function O(B){if(!M){if(M=!0,L=B,B=v(B),C!==void 0&&E.hasValue){var F=E.value;if(C(F,B))return P=F}return P=B}if(F=P,s(L,B))return F;var R=v(B);return C!==void 0&&C(F,R)?(L=B,F):(L=B,P=R)}var M=!1,L,P,H=p===void 0?null:p;return[function(){return O(x())},H===null?void 0:function(){return O(H())}]},[x,p,v,C]);var k=n(m,T[0],T[1]);return l(function(){E.hasValue=!0,E.value=k},[k]),f(k),k},Xv}var I8;function gce(){return I8||(I8=1,Yv.exports=mce()),Yv.exports}gce();function xce(e){e()}function pce(){let e=null,t=null;return{clear(){e=null,t=null},notify(){xce(()=>{let s=e;for(;s;)s.callback(),s=s.next})},get(){const s=[];let n=e;for(;n;)s.push(n),n=n.next;return s},subscribe(s){let n=!0;const a=t={callback:s,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var M8={notify(){},get:()=>[]};function yce(e,t){let s,n=M8,a=0,l=!1;function u(k){p();const O=n.subscribe(k);let M=!1;return()=>{M||(M=!0,O(),v())}}function f(){n.notify()}function m(){E.onStateChange&&E.onStateChange()}function x(){return l}function p(){a++,s||(s=e.subscribe(m),n=pce())}function v(){a--,s&&a===0&&(s(),s=void 0,n.clear(),n=M8)}function C(){l||(l=!0,p())}function T(){l&&(l=!1,v())}const E={addNestedSub:u,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:x,trySubscribe:C,tryUnsubscribe:T,getListeners:()=>n};return E}var bce=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vce=bce(),Nce=()=>typeof navigator<"u"&&navigator.product==="ReactNative",wce=Nce(),jce=()=>vce||wce?w.useLayoutEffect:w.useEffect,Sce=jce();function R8(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Cce(e,t){if(R8(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(let a=0;a<s.length;a++)if(!Object.prototype.hasOwnProperty.call(t,s[a])||!R8(e[s[a]],t[s[a]]))return!1;return!0}var Ace=Symbol.for("react-redux-context"),Ece=typeof globalThis<"u"?globalThis:{};function Tce(){if(!w.createContext)return{};const e=Ece[Ace]??=new Map;let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var Oce=Tce();function Dce(e){const{children:t,context:s,serverState:n,store:a}=e,l=w.useMemo(()=>{const m=yce(a);return{store:a,subscription:m,getServerState:n?()=>n:void 0}},[a,n]),u=w.useMemo(()=>a.getState(),[a]);Sce(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),u!==a.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,u]);const f=s||Oce;return w.createElement(f.Provider,{value:l},t)}var kce=Dce,_ce=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function Pce(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Ice(e,t){var s=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of s)if(_ce.has(n)){if(e[n]==null&&t[n]==null)continue;if(!Cce(e[n],t[n]))return!1}else if(!Pce(e[n],t[n]))return!1;return!0}var Mce=e=>{var{chartData:t}=e,s=Ss(),n=qo();return w.useEffect(()=>n?()=>{}:(s(XT(t)),()=>{s(XT(void 0))}),[t,s,n]),null},L8={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},yR=Xn({name:"brush",initialState:L8,reducers:{setBrushSettings(e,t){return t.payload==null?L8:t.payload}}}),{setBrushSettings:Bme}=yR.actions,Rce=yR.reducer,Lce={dots:[],areas:[],lines:[]},bR=Xn({name:"referenceElements",initialState:Lce,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var s=hi(e).dots.findIndex(n=>n===t.payload);s!==-1&&e.dots.splice(s,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var s=hi(e).areas.findIndex(n=>n===t.payload);s!==-1&&e.areas.splice(s,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var s=hi(e).lines.findIndex(n=>n===t.payload);s!==-1&&e.lines.splice(s,1)}}}),{addDot:Fme,removeDot:Ume,addArea:zme,removeArea:Vme,addLine:$me,removeLine:qme}=bR.actions,Bce=bR.reducer,Fce=w.createContext(void 0),Uce=e=>{var{children:t}=e,[s]=w.useState("".concat(bf("recharts"),"-clip")),n=dce();if(n==null)return null;var{x:a,y:l,width:u,height:f}=n;return w.createElement(Fce.Provider,{value:s},w.createElement("defs",null,w.createElement("clipPath",{id:s},w.createElement("rect",{x:a,y:l,height:f,width:u}))),t)},zce=(e,t)=>t,TS=Ie([zce,Vr,eM,Gs,LM,Rl,kae,rn],Bae),OS=e=>{var t=e.currentTarget.getBoundingClientRect(),s=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/s),chartY:Math.round((e.clientY-t.top)/n)}},vR=qa("mouseClick"),NR=Kf();NR.startListening({actionCreator:vR,effect:(e,t)=>{var s=e.payload,n=TS(t.getState(),OS(s));n?.activeIndex!=null&&t.dispatch(Dne({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var BN=qa("mouseMove"),wR=Kf(),Jm=null;wR.startListening({actionCreator:BN,effect:(e,t)=>{var s=e.payload;Jm!==null&&cancelAnimationFrame(Jm);var n=OS(s);Jm=requestAnimationFrame(()=>{var a=t.getState(),l=gS(a,a.tooltip.settings.shared);if(l==="axis"){var u=TS(a,n);u?.activeIndex!=null?t.dispatch(OM({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate})):t.dispatch(TM())}Jm=null})}});var B8={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},jR=Xn({name:"rootProps",initialState:B8,reducers:{updateOptions:(e,t)=>{var s;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(s=t.payload.barGap)!==null&&s!==void 0?s:B8.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Vce=jR.reducer,{updateOptions:$ce}=jR.actions,SR=Xn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:qce}=SR.actions,Hce=SR.reducer,CR=qa("keyDown"),AR=qa("focus"),DS=Kf();DS.startListening({actionCreator:CR,effect:(e,t)=>{var s=t.getState(),n=s.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=s.tooltip,l=e.payload;if(!(l!=="ArrowRight"&&l!=="ArrowLeft"&&l!=="Enter")){var u=xS(a,Ud(s),l0(s),d0(s)),f=u==null?-1:Number(u);if(!(!Number.isFinite(f)||f<0)){var m=Rl(s);if(l==="Enter"){var x=Mx(s,"axis","hover",String(a.index));t.dispatch(_N({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:x}));return}var p=vne(s),v=p==="left-to-right"?1:-1,C=l==="ArrowRight"?1:-1,T=f+C*v;if(!(m==null||T>=m.length||T<0)){var E=Mx(s,"axis","hover",String(T));t.dispatch(_N({active:!0,activeIndex:T.toString(),activeDataKey:void 0,activeCoordinate:E}))}}}}}});DS.startListening({actionCreator:AR,effect:(e,t)=>{var s=t.getState(),n=s.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=s.tooltip;if(!a.active&&a.index==null){var l="0",u=Mx(s,"axis","hover",String(l));t.dispatch(_N({activeDataKey:void 0,active:!0,activeIndex:l,activeCoordinate:u}))}}}});var Pa=qa("externalEvent"),ER=Kf(),Wv=new Map;ER.startListening({actionCreator:Pa,effect:(e,t)=>{var{handler:s,reactEvent:n}=e.payload;if(s!=null){n.persist();var a=n.type,l=Wv.get(a);l!==void 0&&cancelAnimationFrame(l);var u=requestAnimationFrame(()=>{try{var f=t.getState(),m={activeCoordinate:xae(f),activeDataKey:zM(f),activeIndex:_f(f),activeLabel:UM(f),activeTooltipIndex:_f(f),isTooltipActive:pae(f)};s(m,n)}finally{Wv.delete(a)}});Wv.set(a,u)}}});var Gce=Ie([Fd],e=>e.tooltipItemPayloads),Yce=Ie([Gce,c0,(e,t,s)=>t,(e,t,s)=>s],(e,t,s,n)=>{var a=e.find(f=>f.settings.dataKey===n);if(a!=null){var{positions:l}=a;if(l!=null){var u=t(l,s);return u}}}),TR=qa("touchMove"),OR=Kf();OR.startListening({actionCreator:TR,effect:(e,t)=>{var s=e.payload;if(!(s.touches==null||s.touches.length===0)){var n=t.getState(),a=gS(n,n.tooltip.settings.shared);if(a==="axis"){var l=TS(n,OS({clientX:s.touches[0].clientX,clientY:s.touches[0].clientY,currentTarget:s.currentTarget}));l?.activeIndex!=null&&t.dispatch(OM({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(a==="item"){var u,f=s.touches[0];if(document.elementFromPoint==null)return;var m=document.elementFromPoint(f.clientX,f.clientY);if(!m||!m.getAttribute)return;var x=m.getAttribute(AI),p=(u=m.getAttribute(EI))!==null&&u!==void 0?u:void 0,v=Yce(t.getState(),x,p);t.dispatch(EM({activeDataKey:p,activeIndex:x,activeCoordinate:v}))}}}});var Xce=WP({brush:Rce,cartesianAxis:oce,chartData:xie,errorBars:fce,graphicalItems:koe,layout:FZ,legend:XQ,options:die,polarAxis:$le,polarOptions:Hce,referenceElements:Bce,rootProps:Vce,tooltip:kne,zIndex:Qae}),Wce=function(t){return uZ({reducer:Xce,preloadedState:t,middleware:s=>{var n;return s({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([NR.middleware,wR.middleware,DS.middleware,ER.middleware,OR.middleware])},enhancers:s=>{var n=s;return typeof s=="function"&&(n=s()),n.concat(uI({type:"raf"}))},devTools:kp.devToolsEnabled})};function Kce(e){var{preloadedState:t,children:s,reduxStoreName:n}=e,a=qo(),l=w.useRef(null);if(a)return s;l.current==null&&(l.current=Wce(t));var u=ej;return w.createElement(kce,{context:u,store:l.current},s)}function Zce(e){var{layout:t,margin:s}=e,n=Ss(),a=qo();return w.useEffect(()=>{a||(n(RZ(t)),n(MZ(s)))},[n,a,t,s]),null}var Qce=w.memo(Zce,Ice);function Jce(e){var t=Ss();return w.useEffect(()=>{t($ce(e))},[t,e]),null}function F8(e){var{zIndex:t,isPanorama:s}=e,n=s?"recharts-zindex-panorama-":"recharts-zindex-",a=mR("".concat(n).concat(t)),l=Ss();return w.useLayoutEffect(()=>(l(Kae({zIndex:t,elementId:a,isPanorama:s})),()=>{l(Zae({zIndex:t,isPanorama:s}))}),[l,t,a,s]),w.createElement("g",{tabIndex:-1,id:a})}function U8(e){var{children:t,isPanorama:s}=e,n=Bt(Uae);if(!n||n.length===0)return t;var a=n.filter(u=>u<0),l=n.filter(u=>u>0);return w.createElement(w.Fragment,null,a.map(u=>w.createElement(F8,{key:u,zIndex:u,isPanorama:s})),t,l.map(u=>w.createElement(F8,{key:u,zIndex:u,isPanorama:s})))}var eue=["children"];function tue(e,t){if(e==null)return{};var s,n,a=rue(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function rue(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}function zx(){return zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},zx.apply(null,arguments)}var sue={width:"100%",height:"100%",display:"block"},nue=w.forwardRef((e,t)=>{var s=_I(),n=PI(),a=VI();if(!Uo(s)||!Uo(n))return null;var{children:l,otherAttributes:u,title:f,desc:m}=e,x,p;return u!=null&&(typeof u.tabIndex=="number"?x=u.tabIndex:x=a?0:void 0,typeof u.role=="string"?p=u.role:p=a?"application":void 0),w.createElement(Hw,zx({},u,{title:f,desc:m,role:p,tabIndex:x,width:s,height:n,style:sue,ref:t}),l)}),aue=e=>{var{children:t}=e,s=Bt(Cp);if(!s)return null;var{width:n,height:a,y:l,x:u}=s;return w.createElement(Hw,{width:n,height:a,x:u,y:l},t)},z8=w.forwardRef((e,t)=>{var{children:s}=e,n=tue(e,eue),a=qo();return a?w.createElement(aue,null,w.createElement(U8,{isPanorama:!0},s)):w.createElement(nue,zx({ref:t},n),w.createElement(U8,{isPanorama:!1},s))});function iue(){var e=Ss(),[t,s]=w.useState(null),n=Bt(eQ);return w.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),l=a.width/t.offsetWidth;tn(l)&&l!==n&&e(BZ(l))}},[t,e,n]),s}function V8(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function lue(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?V8(Object(s),!0).forEach(function(n){oue(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):V8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function oue(e,t,s){return(t=cue(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function cue(e){var t=uue(e,"string");return typeof t=="symbol"?t:t+""}function uue(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gc(){return Gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Gc.apply(null,arguments)}var due=()=>(Cie(),null);function Vx(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var hue=w.forwardRef((e,t)=>{var s,n,a=w.useRef(null),[l,u]=w.useState({containerWidth:Vx((s=e.style)===null||s===void 0?void 0:s.width),containerHeight:Vx((n=e.style)===null||n===void 0?void 0:n.height)}),f=w.useCallback((x,p)=>{u(v=>{var C=Math.round(x),T=Math.round(p);return v.containerWidth===C&&v.containerHeight===T?v:{containerWidth:C,containerHeight:T}})},[]),m=w.useCallback(x=>{if(typeof t=="function"&&t(x),x!=null&&typeof ResizeObserver<"u"){var{width:p,height:v}=x.getBoundingClientRect();f(p,v);var C=E=>{var{width:k,height:O}=E[0].contentRect;f(k,O)},T=new ResizeObserver(C);T.observe(x),a.current=T}},[t,f]);return w.useEffect(()=>()=>{var x=a.current;x?.disconnect()},[f]),w.createElement(w.Fragment,null,w.createElement(Ep,{width:l.containerWidth,height:l.containerHeight}),w.createElement("div",Gc({ref:m},e)))}),fue=w.forwardRef((e,t)=>{var{width:s,height:n}=e,[a,l]=w.useState({containerWidth:Vx(s),containerHeight:Vx(n)}),u=w.useCallback((m,x)=>{l(p=>{var v=Math.round(m),C=Math.round(x);return p.containerWidth===v&&p.containerHeight===C?p:{containerWidth:v,containerHeight:C}})},[]),f=w.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null){var{width:x,height:p}=m.getBoundingClientRect();u(x,p)}},[t,u]);return w.createElement(w.Fragment,null,w.createElement(Ep,{width:a.containerWidth,height:a.containerHeight}),w.createElement("div",Gc({ref:f},e)))}),mue=w.forwardRef((e,t)=>{var{width:s,height:n}=e;return w.createElement(w.Fragment,null,w.createElement(Ep,{width:s,height:n}),w.createElement("div",Gc({ref:t},e)))}),gue=w.forwardRef((e,t)=>{var{width:s,height:n}=e;return Al(s)||Al(n)?w.createElement(fue,Gc({},e,{ref:t})):w.createElement(mue,Gc({},e,{ref:t}))});function xue(e){return e===!0?hue:gue}var pue=w.forwardRef((e,t)=>{var{children:s,className:n,height:a,onClick:l,onContextMenu:u,onDoubleClick:f,onMouseDown:m,onMouseEnter:x,onMouseLeave:p,onMouseMove:v,onMouseUp:C,onTouchEnd:T,onTouchMove:E,onTouchStart:k,style:O,width:M,responsive:L,dispatchTouchEvents:P=!0}=e,H=w.useRef(null),B=Ss(),[F,R]=w.useState(null),[z,U]=w.useState(null),Y=iue(),$=cj(),G=$?.width>0?$.width:M,ee=$?.height>0?$.height:a,ce=w.useCallback(Ne=>{Y(Ne),typeof t=="function"&&t(Ne),R(Ne),U(Ne),Ne!=null&&(H.current=Ne)},[Y,t,R,U]),se=w.useCallback(Ne=>{B(vR(Ne)),B(Pa({handler:l,reactEvent:Ne}))},[B,l]),J=w.useCallback(Ne=>{B(BN(Ne)),B(Pa({handler:x,reactEvent:Ne}))},[B,x]),ne=w.useCallback(Ne=>{B(TM()),B(Pa({handler:p,reactEvent:Ne}))},[B,p]),pe=w.useCallback(Ne=>{B(BN(Ne)),B(Pa({handler:v,reactEvent:Ne}))},[B,v]),be=w.useCallback(()=>{B(AR())},[B]),te=w.useCallback(Ne=>{B(CR(Ne.key))},[B]),X=w.useCallback(Ne=>{B(Pa({handler:u,reactEvent:Ne}))},[B,u]),re=w.useCallback(Ne=>{B(Pa({handler:f,reactEvent:Ne}))},[B,f]),ge=w.useCallback(Ne=>{B(Pa({handler:m,reactEvent:Ne}))},[B,m]),de=w.useCallback(Ne=>{B(Pa({handler:C,reactEvent:Ne}))},[B,C]),je=w.useCallback(Ne=>{B(Pa({handler:k,reactEvent:Ne}))},[B,k]),oe=w.useCallback(Ne=>{P&&B(TR(Ne)),B(Pa({handler:E,reactEvent:Ne}))},[B,P,E]),fe=w.useCallback(Ne=>{B(Pa({handler:T,reactEvent:Ne}))},[B,T]),qe=xue(L);return w.createElement(XM.Provider,{value:F},w.createElement(dP.Provider,{value:z},w.createElement(qe,{width:G??O?.width,height:ee??O?.height,className:js("recharts-wrapper",n),style:lue({position:"relative",cursor:"default",width:G,height:ee},O),onClick:se,onContextMenu:X,onDoubleClick:re,onFocus:be,onKeyDown:te,onMouseDown:ge,onMouseEnter:J,onMouseLeave:ne,onMouseMove:pe,onMouseUp:de,onTouchEnd:fe,onTouchMove:oe,onTouchStart:je,ref:ce},w.createElement(due,null),s)))}),yue=["width","height","responsive","children","className","style","compact","title","desc"];function bue(e,t){if(e==null)return{};var s,n,a=vue(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function vue(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var Nue=w.forwardRef((e,t)=>{var{width:s,height:n,responsive:a,children:l,className:u,style:f,compact:m,title:x,desc:p}=e,v=bue(e,yue),C=dd(v);return m?w.createElement(w.Fragment,null,w.createElement(Ep,{width:s,height:n}),w.createElement(z8,{otherAttributes:C,title:x,desc:p},l)):w.createElement(pue,{className:u,style:f,width:s,height:n,responsive:a??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},w.createElement(z8,{otherAttributes:C,title:x,desc:p,ref:t},w.createElement(Uce,null,l)))});function wue(e){var t=Ss();return w.useEffect(()=>{t(qce(e))},[t,e]),null}var jue=["layout"];function FN(){return FN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},FN.apply(null,arguments)}function Sue(e,t){if(e==null)return{};var s,n,a=Cue(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Cue(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}var Aue={top:5,right:5,bottom:5,left:5},DR={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Aue,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Eue=w.forwardRef(function(t,s){var n,a=Ga(t.categoricalChartProps,DR),{layout:l}=a,u=Sue(a,jue),{chartName:f,defaultTooltipEventType:m,validateTooltipEventTypes:x,tooltipPayloadSearcher:p}=t,v={chartName:f,defaultTooltipEventType:m,validateTooltipEventTypes:x,tooltipPayloadSearcher:p,eventEmitter:void 0};return w.createElement(Kce,{preloadedState:{options:v},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:f},w.createElement(Mce,{chartData:a.data}),w.createElement(Qce,{layout:l,margin:a.margin}),w.createElement(Jce,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),w.createElement(wue,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),w.createElement(Nue,FN({},u,{ref:s})))});function $8(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function q8(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?$8(Object(s),!0).forEach(function(n){Tue(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$8(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Tue(e,t,s){return(t=Oue(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Oue(e){var t=Due(e,"string");return typeof t=="symbol"?t:t+""}function Due(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kue=["item"],_ue=q8(q8({},DR),{},{layout:"centric",startAngle:0,endAngle:360}),UN=w.forwardRef((e,t)=>{var s=Ga(e,_ue);return w.createElement(Eue,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:kue,tooltipPayloadSearcher:cie,categoricalChartProps:s,ref:t})});const eg=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],Pue=({data:e,loading:t})=>{if(!e)return r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(Is,{loading:!0}),r.jsx(Is,{loading:!0})]});const{totalPayments:s,totalRevenue:n,averageOrderValue:a,totalDiscount:l,paymentMethods:u=[],topCoupons:f=[]}=e,m=u.map(p=>({name:p._id,value:p.revenue,count:p.count})),x=({active:p,payload:v})=>p&&v&&v.length?r.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:v[0].name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Revenue: ",r.jsx("span",{className:"font-bold text-green-600",children:ai(v[0].value)})]}),v[0].payload.count&&r.jsxs("p",{className:"text-sm text-gray-600",children:["Orders: ",r.jsx("span",{className:"font-bold",children:v[0].payload.count})]})]}):null;return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"Revenue & Payments"}),r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"xl:col-span-1 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-1 gap-3",children:[r.jsx(Is,{title:"Total Revenue",value:ai(n),subtitle:`From ${Or(s)} transactions`,icon:r.jsx(wk,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:t}),r.jsx(Is,{title:"Total Payments",value:Or(s),subtitle:"Successful transactions",icon:r.jsx(u$,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:t}),r.jsx(Is,{title:"Average Order Value",value:ai(a),subtitle:"Per transaction",icon:r.jsx(ex,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:t}),r.jsx(Is,{title:"Total Discounts",value:ai(l),subtitle:"Coupons & offers applied",icon:r.jsx(S3,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:t})]}),m.length>0&&r.jsxs("div",{className:"xl:col-span-2 bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"Payment Distribution"}),r.jsx(lN,{width:"100%",height:240,children:r.jsxs(UN,{children:[r.jsx(Ux,{data:m,cx:"50%",cy:"50%",labelLine:!1,label:({name:p,percent:v})=>`${p} (${(v*100).toFixed(0)}%)`,outerRadius:70,fill:"#8884d8",dataKey:"value",children:m.map((p,v)=>r.jsx(vd,{fill:eg[v%eg.length]},`cell-${v}`))}),r.jsx(MN,{content:r.jsx(x,{})}),r.jsx(zI,{})]})}),r.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:m.map((p,v)=>r.jsxs("div",{className:"flex items-center justify-between text-xs p-2 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-2.5 h-2.5 rounded-full shrink-0",style:{backgroundColor:eg[v%eg.length]}}),r.jsx("span",{className:"font-semibold text-gray-900",children:p.name})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold text-gray-900",children:ai(p.value)}),r.jsxs("p",{className:"text-xs text-gray-500",children:[p.count," orders"]})]})]},p.name))})})]})]}),f.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"Top Performing Coupons"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:f.map((p,v)=>r.jsxs("div",{className:"relative p-3 rounded-lg border-2 border-dashed border-gray-200 hover:border-blue-400 hover:bg-blue-50/30 transition-all group",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsxs("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 text-white font-bold px-2 py-0.5 rounded text-xs shadow-sm",children:["#",v+1]}),r.jsx("span",{className:"font-bold text-sm text-gray-900 group-hover:text-gray-900 transition-colors truncate",children:p._id})]}),r.jsx(S3,{className:"text-orange-500 w-4 h-4 group-hover:scale-110 transition-transform shrink-0"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"bg-white/50 p-2 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:"Usage Count"}),r.jsx("p",{className:"font-bold text-gray-900",children:Or(p.usageCount)})]}),r.jsxs("div",{className:"bg-white/50 p-2 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:"Total Discount"}),r.jsx("p",{className:"font-bold text-green-600",children:ai(p.totalDiscount)})]})]})]},p._id))})]})]})},H8={TECHNOLOGY:"#3B82F6",ENTERTAINMENT:"#EC4899",EDUCATION:"#10B981",BUSINESS:"#F59E0B",OTHER:"#6B7280"},G8={OFFLINE:"#EF4444",ONLINE:"#10B981",HYBRID:"#8B5CF6"},Iue=({data:e,enrollmentsData:t,cashTicketsData:s,loading:n})=>{if(!e)return r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.jsx(Is,{loading:!0})});const{total:a,live:l,upcoming:u,past:f,byCategory:m={},byMode:x={}}=e,p=Object.entries(m).map(([T,E])=>({name:T,value:E})),v=Object.entries(x).map(([T,E])=>({name:T,value:E})),C=({active:T,payload:E})=>T&&E&&E.length?r.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:E[0].name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Events: ",r.jsx("span",{className:"font-bold text-gray-800",children:E[0].value})]})]}):null;return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"Events Overview"}),r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx(Is,{title:"Total Events",value:Or(a),subtitle:"All time events",icon:r.jsx(w3,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:n}),r.jsx(Is,{title:"Live Events",value:Or(l),subtitle:"Currently ongoing",icon:r.jsx(f$,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:n}),r.jsx(Is,{title:"Upcoming Events",value:Or(u),subtitle:"Scheduled ahead",icon:r.jsx(y$,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:n}),r.jsx(Is,{title:"Past Events",value:Or(f),subtitle:"Completed events",icon:r.jsx(c$,{className:"w-6 h-6"}),iconColor:"text-gray-600",loading:n})]}),p.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"Events by Category"}),r.jsx(lN,{width:"100%",height:220,children:r.jsxs(UN,{children:[r.jsx(Ux,{data:p,cx:"50%",cy:"50%",labelLine:!1,label:({name:T,percent:E})=>`${T.slice(0,3)} (${(E*100).toFixed(0)}%)`,outerRadius:60,fill:"#8884d8",dataKey:"value",children:p.map((T,E)=>r.jsx(vd,{fill:H8[T.name]||"#6B7280"},`cell-${E}`))}),r.jsx(MN,{content:r.jsx(C,{})})]})}),r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-2 gap-2",children:p.map(T=>r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:H8[T.name]||"#6B7280"}}),r.jsx("span",{className:"font-semibold text-gray-900 truncate",children:T.name}),r.jsx("span",{className:"text-gray-600 ml-auto",children:T.value})]},T.name))})]}),v.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"Events by Mode"}),r.jsx(lN,{width:"100%",height:220,children:r.jsxs(UN,{children:[r.jsx(Ux,{data:v,cx:"50%",cy:"50%",labelLine:!1,label:({name:T,percent:E})=>`${T} (${(E*100).toFixed(0)}%)`,outerRadius:60,fill:"#8884d8",dataKey:"value",children:v.map((T,E)=>r.jsx(vd,{fill:G8[T.name]||"#6B7280"},`cell-${E}`))}),r.jsx(MN,{content:r.jsx(C,{})})]})}),r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-2",children:v.map(T=>r.jsxs("div",{className:"flex items-center justify-between text-sm p-2 rounded-lg bg-gray-50",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:G8[T.name]||"#6B7280"}}),r.jsx("span",{className:"font-semibold text-gray-900",children:T.name})]}),r.jsx("span",{className:"font-bold text-gray-900",children:T.value})]},T.name))})]})]}),t&&r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(Is,{title:"Total Enrollments",value:Or(t.totalEnrollments),subtitle:"Online + Cash combined",icon:r.jsx(oP,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:n}),r.jsx(Is,{title:"Online Enrollments",value:Or(t.onlineEnrollments),subtitle:`${Or(t.onlineTickets)} tickets sold`,icon:r.jsx(U2,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:n}),r.jsx(Is,{title:"Cash Enrollments",value:Or(t.cashEnrollments),subtitle:"Offline redemptions",icon:r.jsx(w3,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:n}),s&&r.jsx(Is,{title:"Cash Tickets",value:Or(s.totalMinted),subtitle:`${s.redeemed} redeemed, ${s.pending} pending`,icon:r.jsx(z2,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:n})]})]})},Mue=({data:e,loading:t})=>{const[s,n]=w.useState("totalRevenue"),[a,l]=w.useState("desc");if(!e||e.length===0)return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Admin Performance"}),r.jsx("p",{className:"text-gray-500 text-center py-8",children:"No admin performance data available"})]});const u=[...e].sort((p,v)=>{const C=p[s],T=v[s];return a==="asc"?C-T:T-C}),f=p=>{s===p?l(a==="asc"?"desc":"asc"):(n(p),l("desc"))},m=p=>({SUPER_ADMIN:"bg-purple-100 text-purple-800",ADMIN:"bg-blue-100 text-blue-800",MANAGEMENT_STAFF:"bg-green-100 text-green-800"})[p]||"bg-gray-100 text-gray-800",x=(p,v)=>v?(p/v*100).toFixed(1):0;return t?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6 animate-pulse"}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map(p=>r.jsx("div",{className:"h-20 bg-gray-100 rounded animate-pulse"},p))})]}):r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Admin Performance"}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(Ih,{className:"text-yellow-500"}),r.jsxs("span",{children:["Top ",u.length," performers"]})]})]}),r.jsx("div",{className:"hidden lg:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm",children:"Rank"}),r.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm",children:"Admin"}),r.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm",children:"Role"}),r.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm cursor-pointer hover:text-gray-800",onClick:()=>f("totalTickets"),title:"Total cash tickets issued by this admin",children:r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsxs("span",{children:["Tickets Issued ",s==="totalTickets"&&(a==="asc"?"":"")]}),r.jsx("span",{className:"text-xs font-normal text-gray-400",children:"Cash tickets"})]})}),r.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm cursor-pointer hover:text-gray-800",onClick:()=>f("redeemedTickets"),title:"Tickets redeemed by this admin",children:r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsxs("span",{children:["Redeemed ",s==="redeemedTickets"&&(a==="asc"?"":"")]}),r.jsx("span",{className:"text-xs font-normal text-gray-400",children:"Tickets verified"})]})}),r.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm",title:"Pending tickets",children:r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsx("span",{children:"Pending"}),r.jsx("span",{className:"text-xs font-normal text-gray-400",children:"Tickets"})]})}),r.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm cursor-pointer hover:text-gray-800",onClick:()=>f("totalRevenue"),title:"Revenue from redeemed tickets",children:r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsxs("span",{children:["Revenue ",s==="totalRevenue"&&(a==="asc"?"":"")]}),r.jsx("span",{className:"text-xs font-normal text-gray-400",children:"From redemptions"})]})})]})}),r.jsx("tbody",{children:u.map((p,v)=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[v===0&&r.jsx(Ih,{className:"text-yellow-500 w-5 h-5"}),v===1&&r.jsx(Ih,{className:"text-gray-400 w-5 h-5"}),v===2&&r.jsx(Ih,{className:"text-orange-600 w-5 h-5"}),r.jsxs("span",{className:"font-semibold text-gray-900",children:["#",v+1]})]})}),r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:p.adminName}),r.jsxs("p",{className:"text-xs text-gray-500",children:["@",p.adminUsername]})]})}),r.jsx("td",{className:"py-4 px-4",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m(p.adminRole)}`,children:p.adminRole.replace("_"," ")})}),r.jsx("td",{className:"py-4 px-4 text-right",children:r.jsx("span",{className:"font-semibold text-blue-600",children:Or(p.totalTickets)})}),r.jsx("td",{className:"py-4 px-4 text-right",children:r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold text-green-600",children:Or(p.redeemedTickets)}),r.jsxs("p",{className:"text-xs text-gray-500",children:[x(p.redeemedTickets,p.totalTickets),"% rate"]})]})}),r.jsx("td",{className:"py-4 px-4 text-right",children:r.jsx("span",{className:"font-semibold text-orange-600",children:Or(p.pendingTickets)})}),r.jsx("td",{className:"py-4 px-4 text-right",children:r.jsx("span",{className:"font-bold text-gray-900",children:ai(p.totalRevenue)})})]},p.adminId))})]})}),r.jsx("div",{className:"lg:hidden space-y-4",children:u.map((p,v)=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[v<3&&r.jsx(Ih,{className:v===0?"text-yellow-500":v===1?"text-gray-400":"text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:p.adminName}),r.jsxs("p",{className:"text-xs text-gray-500",children:["@",p.adminUsername]})]})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m(p.adminRole)}`,children:p.adminRole.replace("_"," ")})]}),r.jsxs("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"Cash Tickets Issued"}),r.jsx("p",{className:"font-bold text-blue-800 text-lg",children:Or(p.totalTickets)})]}),r.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-600 font-medium mb-2",children:"Ticket Redemptions"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Redeemed"}),r.jsx("p",{className:"font-semibold text-green-600",children:Or(p.redeemedTickets)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Pending"}),r.jsx("p",{className:"font-semibold text-orange-600",children:Or(p.pendingTickets)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Rate"}),r.jsxs("p",{className:"font-semibold text-gray-800",children:[x(p.redeemedTickets,p.totalTickets),"%"]})]})]})]}),r.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-gray-600 text-sm flex items-center gap-1",children:[r.jsx(wk,{className:"text-purple-600"})," Revenue"]}),r.jsx("span",{className:"font-bold text-gray-900",children:ai(p.totalRevenue)})]})})]},p.adminId))})]})},Y8=({events:e,loading:t})=>{if(!e||e.length===0)return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Top Performing Events"}),r.jsx("p",{className:"text-gray-500 text-center py-8",children:"No event data available"})]});if(t)return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6 animate-pulse"}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map(a=>r.jsx("div",{className:"h-32 bg-gray-100 rounded animate-pulse"},a))})]});const s=a=>({TECHNOLOGY:"bg-blue-100 text-blue-800",ENTERTAINMENT:"bg-pink-100 text-pink-800",EDUCATION:"bg-green-100 text-green-800",BUSINESS:"bg-yellow-100 text-yellow-800",OTHER:"bg-gray-100 text-gray-800"})[a]||"bg-gray-100 text-gray-800",n=a=>{switch(a){case"ONLINE":return r.jsx(U2,{className:"w-4 h-4 text-green-600"});case"OFFLINE":return r.jsx(z2,{className:"w-4 h-4 text-red-600"});case"HYBRID":return r.jsx(ex,{className:"w-4 h-4 text-purple-600"});default:return r.jsx(ex,{className:"w-4 h-4 text-gray-600"})}};return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Top Performing Events"}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(j$,{className:"text-yellow-500"}),r.jsxs("span",{children:["Top ",e.length," events"]})]})]}),r.jsx("div",{className:"space-y-4",children:e.map((a,l)=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200 hover:border-blue-300",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l<3&&r.jsx("span",{className:`
                        w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold
                        ${l===0?"bg-yellow-500 text-white":""}
                        ${l===1?"bg-gray-400 text-white":""}
                        ${l===2?"bg-orange-600 text-white":""}
                      `,children:l+1}),r.jsx("h3",{className:"font-bold text-lg text-gray-900",children:a.eventName})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-gray-600",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(o$,{className:"w-4 h-4"}),vX(a.eventDate)]}),a.eventCity&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(g$,{className:"w-4 h-4"}),a.eventCity]}),r.jsxs("span",{className:"flex items-center gap-1",children:[n(a.eventMode),a.eventMode]})]})]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s(a.eventCategory)}`,children:a.eventCategory})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-gray-800 font-medium mb-1",children:"Total Revenue"}),r.jsx("p",{className:"text-lg font-bold text-blue-900",children:ai(a.totalRevenue)})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"Total Tickets"}),r.jsx("p",{className:"text-lg font-bold text-green-900",children:Or(a.totalTickets)})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t border-gray-100",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs text-gray-600 font-medium mb-2 flex items-center gap-1",children:[r.jsx(U2,{className:"text-gray-800"}),"Online Sales"]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Tickets:"}),r.jsx("span",{className:"font-semibold text-gray-900",children:Or(a.onlineTickets)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Revenue:"}),r.jsx("span",{className:"font-semibold text-gray-800",children:ai(a.onlineRevenue)})]})]})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs text-gray-600 font-medium mb-2 flex items-center gap-1",children:[r.jsx(z2,{className:"text-red-600"}),"Offline Sales"]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Tickets:"}),r.jsx("span",{className:"font-semibold text-gray-900",children:Or(a.offlineTickets)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Revenue:"}),r.jsx("span",{className:"font-semibold text-green-600",children:ai(a.offlineRevenue)})]})]})]})]})]},a.eventId))})]})};function Rue(){const[e,t]=w.useState("lifetime"),[s,n]=w.useState(null),[a,l]=w.useState(!0),[u,f]=w.useState(null),m=async()=>{l(!0);try{const C=await bX();if(C.success)n(C.data),f(new Date),console.log("[Dashboard] Data loaded successfully");else{const T=C.message||"Failed to load dashboard statistics";dt.error(T),console.error("[Dashboard] Error:",C.error),C.error&&console.error("[Dashboard] Backend Error Details:",{status:C.status,message:C.message,error:C.error})}}catch(C){dt.error("An unexpected error occurred while loading dashboard"),console.error("[Dashboard] Exception:",C)}finally{l(!1)}};w.useEffect(()=>{m()},[]);const x=()=>{dt.info("Refreshing dashboard data..."),m()},p=()=>{dt.info("Export functionality coming soon!")},v=C=>C?C[e]||C.lifetime||C:null;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 tracking-tight",children:"Dashboard"}),r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Comprehensive insights and analytics",u&&r.jsxs("span",{className:"ml-2",children:[" Updated ",u.toLocaleTimeString()]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:x,disabled:a,className:"flex items-center gap-1.5 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm text-sm",title:"Refresh dashboard data",children:[r.jsx(jk,{className:`w-4 h-4 ${a?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline font-medium",children:"Refresh"})]}),r.jsxs("button",{onClick:p,className:"flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white rounded-lg hover:from-gray-900 hover:to-black transition-all shadow-sm text-sm",title:"Export dashboard data",children:[r.jsx(v$,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline font-medium",children:"Export"})]})]})]}),s&&r.jsx(xX,{selected:e,onChange:t}),!a&&!s&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Failed to Load Dashboard"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"There was an error loading the analytics data. This is likely a backend issue."}),r.jsx("button",{onClick:x,className:"px-6 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Try Again"})]})}),s?.payments&&r.jsx(Pue,{data:v(s.payments),loading:a}),(s?.users||s?.admins)&&r.jsx(CX,{usersData:s.users,adminsData:s.admins,loading:a}),s?.events&&r.jsx(Iue,{data:s.events,enrollmentsData:v(s.enrollments),cashTicketsData:v(s.cashTickets),loading:a}),s?.communications&&r.jsx(NX,{data:v(s.communications),loading:a}),s?.topPerformingEvents&&s.topPerformingEvents.length>0&&r.jsx(Y8,{events:s.topPerformingEvents,loading:a}),s?.eventStats&&v(s.eventStats)?.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:["Events Performance (",e.replace(/([A-Z])/g," $1").trim(),")"]}),r.jsx(Y8,{events:v(s.eventStats),loading:a})]}),s?.adminPerformance&&s.adminPerformance.length>0&&r.jsx(Mue,{data:s.adminPerformance,loading:a}),r.jsx("div",{className:"text-center text-xs text-gray-500 py-6 border-t border-gray-200",children:s?.generatedAt&&r.jsxs("p",{children:["Statistics generated at: ",new Date(s.generatedAt).toLocaleString()]})})]})})}const xn={BASE:"/web/events",DROPDOWN:"/web/events/dropdown",DELETED:"/web/events/deleted",UPDATE_EXPIRED:"/web/events/update-expired",FEATURED:"/web/events/featured"},tg=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&t.append(s,n)}),t.toString()},Ra={getAll:async(e={})=>{const t=tg(e),s=t?`${xn.BASE}?${t}`:xn.BASE;console.log("[EventService] Fetching events with params:",e);const n=await Te(Ee.get(s));return n.success?console.log("[EventService] Fetched events:",n.data.events?.length):console.error("[EventService] Failed to fetch events:",n.message),n},getById:async e=>{console.log("[EventService] Fetching event:",e);const t=await Te(Ee.get(`${xn.BASE}/${e}`));return t.success?console.log("[EventService] Fetched event:",t.data.event?.name):console.error("[EventService] Failed to fetch event:",t.message),t},create:async e=>{console.log("[EventService] Creating event:",e.name);const t=await Te(Ee.post(xn.BASE,e));return t.success?console.log("[EventService] Created event:",t.data.event?._id):console.error("[EventService] Failed to create event:",t.message),t},update:async(e,t)=>{console.log("[EventService] Updating event:",e);const s=await Te(Ee.put(`${xn.BASE}/${e}`,t));return s.success?console.log("[EventService] Updated event:",s.data.event?.name):console.error("[EventService] Failed to update event:",s.message),s},delete:async e=>{console.log("[EventService] Deleting event:",e);const t=await Te(Ee.delete(`${xn.BASE}/${e}`));return t.success?console.log("[EventService] Deleted event successfully"):console.error("[EventService] Failed to delete event:",t.message),t},restore:async e=>{console.log("[EventService] Restoring event:",e);const t=await Te(Ee.post(`${xn.BASE}/${e}/restore`));return t.success?console.log("[EventService] Restored event successfully"):console.error("[EventService] Failed to restore event:",t.message),t},permanentDelete:async e=>{console.log("[EventService] Permanently deleting event:",e);const t=await Te(Ee.delete(`${xn.BASE}/${e}/permanent`));return t.success?console.log("[EventService] Permanently deleted event successfully"):console.error("[EventService] Failed to permanently delete event:",t.message),t},getDeleted:async(e={})=>{const t=tg(e),s=t?`${xn.DELETED}?${t}`:xn.DELETED;console.log("[EventService] Fetching deleted events");const n=await Te(Ee.get(s));return n.success?console.log("[EventService] Fetched deleted events:",n.data.events?.length):console.error("[EventService] Failed to fetch deleted events:",n.message),n},getDropdownEvents:async(e={})=>{const t=tg(e),s=t?`${xn.DROPDOWN}?${t}`:xn.DROPDOWN;console.log("[EventService] Fetching dropdown events with params:",e);const n=await Te(Ee.get(s));return n.success?console.log("[EventService] Fetched events:",n.data.events?.length):console.error("[EventService] Failed to fetch events:",n.message),n},getTicketStats:async e=>{console.log("[EventService] Fetching ticket stats for event:",e);const t=await Te(Ee.get(`${xn.BASE}/${e}/ticket-stats`));return t.success?console.log("[EventService] Fetched ticket stats"):console.error("[EventService] Failed to fetch ticket stats:",t.message),t},updateExpired:async()=>{console.log("[EventService] Updating expired events");const e=await Te(Ee.post(xn.UPDATE_EXPIRED));return e.success?console.log("[EventService] Updated expired events:",e.data.updatedCount):console.error("[EventService] Failed to update expired events:",e.message),e},getFeaturedEvents:async(e={})=>{const t=tg(e),s=t?`${xn.FEATURED}?${t}`:xn.FEATURED;console.log("[EventService] Fetching featured events");const n=await Te(Ee.get(s));return n.success?console.log("[EventService] Fetched featured events:",n.data.events?.length):console.error("[EventService] Failed to fetch featured events:",n.message),n}},kR=["TECHNOLOGY","EDUCATION","MEDICAL","COMEDY","ENTERTAINMENT","BUSINESS","SPORTS","ARTS","MUSIC","FOOD","LIFESTYLE","OTHER"],_R=["ONLINE","OFFLINE","HYBRID"],Lue=[{value:"createdAt",label:"Created Date"},{value:"name",label:"Name"},{value:"startDate",label:"Start Date"},{value:"endDate",label:"End Date"},{value:"price",label:"Price"}],X8={search:"",category:"",mode:"",city:"",isLive:"",featured:"",minPrice:"",maxPrice:"",startDateFrom:"",startDateTo:"",sortBy:"createdAt",sortOrder:"desc"};function Bue(e={}){const[t,s]=w.useState([]),[n,a]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[l,u]=w.useState({...X8,...e}),[f,m]=w.useState(!1),[x,p]=w.useState(null),[v,C]=w.useState([]),[T,E]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[k,O]=w.useState(!1),M=w.useRef(null),L=w.useCallback(async(be=n.currentPage)=>{m(!0),p(null);try{const te={page:be,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.category&&{category:l.category},...l.mode&&{mode:l.mode},...l.city&&{city:l.city},...l.isLive!==""&&{isLive:l.isLive},...l.featured!==""&&{featured:l.featured},...l.minPrice&&{minPrice:l.minPrice},...l.maxPrice&&{maxPrice:l.maxPrice},...l.startDateFrom&&{startDateFrom:l.startDateFrom},...l.startDateTo&&{startDateTo:l.startDateTo}},X=await Ra.getAll(te);X.success?(s(X.data.events||[]),a(X.data.pagination||n)):(p(X.message),s([]))}catch{p("Failed to fetch events"),s([])}finally{m(!1)}},[l,n.limit,n.currentPage]),P=w.useCallback(async(be=T.currentPage)=>{m(!0),p(null);try{const te=await Ra.getDeleted({page:be,limit:T.limit});te.success?(C(te.data.events||[]),E(X=>({...X,...te.data.pagination}))):(p(te.message),C([]))}catch{p("Failed to fetch deleted events"),C([])}finally{m(!1)}},[T.currentPage,T.limit]),H=w.useCallback(async be=>{try{const te=await Ra.getById(be);return te.success?{success:!0,data:te.data.event}:{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to fetch event details"}}},[]),B=w.useCallback(async be=>{m(!0),p(null);try{const te=await Ra.create(be);return te.success?(await L(1),{success:!0,data:te.data}):{success:!1,error:te.message,validationErrors:Array.isArray(te.error)?te.error:te.data?.errors}}catch{return{success:!1,error:"Failed to create event"}}finally{m(!1)}},[L]),F=w.useCallback(async(be,te)=>{m(!0),p(null);try{const X=await Ra.update(be,te);return X.success?(s(re=>re.map(ge=>ge._id===be?{...ge,...X.data.event}:ge)),{success:!0,data:X.data}):{success:!1,error:X.message,validationErrors:Array.isArray(X.error)?X.error:X.data?.errors}}catch{return{success:!1,error:"Failed to update event"}}finally{m(!1)}},[]),R=w.useCallback(async be=>{m(!0),p(null);try{const te=await Ra.delete(be);return te.success?(s(X=>X.filter(re=>re._id!==be)),a(X=>({...X,totalCount:X.totalCount-1,totalPages:Math.ceil((X.totalCount-1)/X.limit)})),{success:!0}):{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to delete event"}}finally{m(!1)}},[]),z=w.useCallback(async be=>{m(!0),p(null);try{const te=await Ra.restore(be);return te.success?(C(X=>X.filter(re=>re._id!==be)),E(X=>({...X,totalCount:X.totalCount-1,totalPages:Math.ceil((X.totalCount-1)/X.limit)})),{success:!0}):{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to restore event"}}finally{m(!1)}},[]),U=w.useCallback(async be=>{m(!0),p(null);try{const te=await Ra.permanentDelete(be);return te.success?(C(X=>X.filter(re=>re._id!==be)),E(X=>({...X,totalCount:X.totalCount-1,totalPages:Math.ceil((X.totalCount-1)/X.limit)})),{success:!0}):{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to permanently delete event"}}finally{m(!1)}},[]),Y=w.useCallback(async be=>{try{const te=await Ra.getTicketStats(be);return te.success?{success:!0,data:te.data.stats}:{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to fetch ticket statistics"}}},[]),$=w.useCallback(async()=>{m(!0),p(null);try{const be=await Ra.updateExpired();return be.success?(await L(n.currentPage),{success:!0,updatedCount:be.data.updatedCount}):{success:!1,error:be.message}}catch{return{success:!1,error:"Failed to update expired events"}}finally{m(!1)}},[L,n.currentPage]),G=w.useCallback(be=>{u(te=>({...te,...be}))},[]),ee=w.useCallback(be=>{M.current&&clearTimeout(M.current),M.current=setTimeout(()=>{u(te=>({...te,search:be}))},300)},[]),ce=w.useCallback(()=>{u({...X8,...e})},[e]),se=w.useCallback(be=>{k?P(be):L(be)},[k,L,P]),J=w.useCallback(be=>{a(te=>({...te,limit:be})),E(te=>({...te,limit:be}))},[]),ne=w.useCallback(()=>{O(be=>!be)},[]),pe=w.useCallback(()=>{p(null)},[]);return w.useEffect(()=>{k||L(1)},[l,k]),w.useEffect(()=>{k&&P(1)},[k]),w.useEffect(()=>()=>{M.current&&clearTimeout(M.current)},[]),{events:k?v:t,pagination:k?T:n,filters:l,isLoading:f,error:x,showDeleted:k,fetchEvents:L,fetchDeletedEvents:P,getEventById:H,createEvent:B,updateEvent:F,deleteEvent:R,restoreEvent:z,permanentDeleteEvent:U,getTicketStats:Y,updateExpiredEvents:$,updateFilters:G,updateSearch:ee,resetFilters:ce,changePage:se,changeLimit:J,toggleShowDeleted:ne,clearError:pe}}function Lt({isOpen:e,onClose:t,title:s,children:n,size:a="md",showCloseButton:l=!0,closeOnOverlayClick:u=!0}){const f={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl"},m=w.useCallback(p=>{p.key==="Escape"&&t()},[t]);if(w.useEffect(()=>(e&&(document.addEventListener("keydown",m),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",m),document.body.style.overflow="unset"}),[e,m]),!e)return null;const x=p=>{p.target===p.currentTarget&&u&&t()};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:x,children:r.jsxs("div",{className:`w-full ${f[a]} bg-white rounded-xl shadow-xl transform transition-all`,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[r.jsx("h2",{id:"modal-title",className:"text-lg font-semibold text-gray-900",children:s}),l&&r.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:r.jsx(Kr,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"px-6 py-4 max-h-[calc(100vh-200px)] overflow-y-auto",children:n})]})})}const Fue={UPLOAD:"/web/assets/upload",DELETE:"/web/assets",DOWNLOAD_URL:"/app/assets/download-url"},PR=async(e,t={})=>{const{folder:s="assets",onProgress:n}=t,a=new FormData;(Array.isArray(e)?e:[e]).forEach(u=>{a.append("files",u)}),s&&a.append("folder",s);try{const u=await Ee.post(Fue.UPLOAD,a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:f=>{if(n&&f.total){const m=Math.round(f.loaded*100/f.total);n(m)}}});return{success:!0,data:u.data.data||u.data,message:u.data.message||"Upload successful",error:null}}catch(u){return console.error("[AssetService] Upload error:",u),{success:!1,data:null,message:u.response?.data?.message||"Upload failed",error:u.response?.data?.error||u.message}}},Uue=async(e,t={})=>{const s=await PR(e,t);if(s.success&&s.data?.uploaded?.length>0){const n=s.data.uploaded[0];return{success:!0,url:n.publicUrl,downloadUrl:n.downloadUrl,data:n,error:null}}return{success:!1,url:null,downloadUrl:null,data:null,error:s.error||"Upload failed",message:s.message}},zue=async(e,t={})=>{const s=await PR(e,t);return s.success&&s.data?.uploaded?.length>0?{success:!0,urls:s.data.uploaded.map(n=>n.publicUrl),downloadUrls:s.data.uploaded.map(n=>n.downloadUrl),data:s.data.uploaded,totalUploaded:s.data.totalUploaded,totalFailed:s.data.totalFailed,error:null}:{success:!1,urls:[],downloadUrls:[],data:[],totalUploaded:0,totalFailed:e.length,error:s.error||"Upload failed",message:s.message}},IR=(e,t={})=>{const{allowedTypes:s=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"],maxSize:n=10*1024*1024}=t;return e?s.length>0&&!s.includes(e.type)?{valid:!1,error:`Invalid file type. Allowed: ${s.map(l=>l.split("/")[1]).join(", ")}`}:e.size>n?{valid:!1,error:`File too large. Maximum size: ${(n/1048576).toFixed(1)}MB`}:{valid:!0,error:null}:{valid:!1,error:"No file provided"}},Vue=(e,t={})=>{const s=[],n=[];return e.forEach((a,l)=>{const u=IR(a,t);u.valid?n.push(a):s.push(`${a.name}: ${u.error}`)}),{valid:s.length===0,errors:s,validFiles:n}},$ue=e=>{if(e===0)return"0 Bytes";const t=1024,s=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(2))+" "+s[n]};function ha({onUpload:e,value:t="",values:s=[],multiple:n=!1,accept:a,maxSize:l=10*1024*1024,folder:u="assets",disabled:f=!1,error:m,label:x,required:p=!1,placeholder:v="Drop files here or click to upload",onRemove:C,showUrlInput:T=!0,type:E="image"}){const[k,O]=w.useState(!1),[M,L]=w.useState(!1),[P,H]=w.useState(0),[B,F]=w.useState(null),[R,z]=w.useState(!1),[U,Y]=w.useState(""),$=w.useRef(null),G=()=>{if(a)return a;switch(E){case"video":return"video/*";case"any":return"image/*,video/*";default:return"image/*"}},ee=()=>{switch(E){case"video":return["video/mp4","video/webm","video/ogg","video/quicktime"];case"any":return["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","video/mp4","video/webm","video/ogg","video/quicktime"];default:return["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"]}},ce=w.useCallback(oe=>{oe.preventDefault(),!f&&!M&&O(!0)},[f,M]),se=w.useCallback(oe=>{oe.preventDefault(),O(!1)},[]),J=w.useCallback(oe=>{if(oe.preventDefault(),O(!1),f||M)return;const fe=Array.from(oe.dataTransfer.files);fe.length>0&&pe(n?fe:[fe[0]])},[f,M,n]),ne=oe=>{const fe=Array.from(oe.target.files);fe.length>0&&pe(n?fe:[fe[0]]),oe.target.value=""},pe=async oe=>{F(null),H(0);const fe=ee();if(n){const qe=Vue(oe,{allowedTypes:fe,maxSize:l});if(!qe.valid){F(qe.errors.join(", "));return}await te(qe.validFiles)}else{const qe=IR(oe[0],{allowedTypes:fe,maxSize:l});if(!qe.valid){F(qe.error);return}await be(oe[0])}},be=async oe=>{L(!0),H(0);try{const fe=await Uue(oe,{folder:u,onProgress:H});fe.success&&fe.url?(e(fe.url),H(100)):F(fe.message||fe.error||"Upload failed")}catch(fe){F(fe.message||"Upload failed")}finally{L(!1)}},te=async oe=>{L(!0),H(0);try{const fe=await zue(oe,{folder:u,onProgress:H});fe.success&&fe.urls.length>0?(e([...s,...fe.urls]),H(100)):F(fe.message||fe.error||"Upload failed")}catch(fe){F(fe.message||"Upload failed")}finally{L(!1)}},X=()=>{if(U.trim()){if(!/^https?:\/\/.+/.test(U.trim())){F("Invalid URL format");return}e(n?[...s,U.trim()]:U.trim()),Y(""),z(!1),F(null)}},re=oe=>{if(C)C(oe);else if(n){const fe=s.filter((qe,Ne)=>Ne!==oe);e(fe)}},ge=()=>{e("")},de=oe=>/\.(mp4|webm|ogg|mov)(\?.*)?$/i.test(oe)||E==="video",je=(oe,fe=null)=>{const qe=de(oe);return r.jsxs("div",{className:"relative group flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[qe?r.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0",children:r.jsx(mz,{className:"h-6 w-6 text-gray-500"})}):r.jsx("img",{src:oe,alt:`Preview ${fe!==null?fe+1:""}`,className:"w-16 h-16 object-cover rounded flex-shrink-0",onError:Ne=>{Ne.target.style.display="none",Ne.target.nextSibling?.classList.remove("hidden")}}),r.jsx("div",{className:"hidden w-16 h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0",children:r.jsx(Mo,{className:"h-6 w-6 text-gray-400"})}),r.jsx("span",{className:"flex-1 text-sm text-gray-600 truncate",children:oe}),!f&&r.jsx("button",{type:"button",onClick:()=>fe!==null?re(fe):ge(),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",children:r.jsx(Kr,{className:"h-4 w-4"})})]},fe!==null?fe:"single")};return n&&s.length>0,r.jsxs("div",{className:"space-y-2",children:[x&&r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[x,p&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),!n&&t&&je(t),n&&s.length>0&&r.jsx("div",{className:"space-y-2 mb-3",children:s.map((oe,fe)=>je(oe,fe))}),(n||!t)&&r.jsxs("div",{onDragOver:ce,onDragLeave:se,onDrop:J,onClick:()=>!f&&!M&&$.current?.click(),className:`
            relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer
            transition-all duration-200
            ${k?"border-gray-800 bg-gray-50":"border-gray-300 hover:border-gray-400"}
            ${f||M?"opacity-50 cursor-not-allowed":""}
            ${m||B?"border-red-300 bg-red-50/50":""}
          `,children:[r.jsx("input",{ref:$,type:"file",accept:G(),multiple:n,onChange:ne,disabled:f||M,className:"hidden"}),M?r.jsxs("div",{className:"space-y-3",children:[r.jsx(it,{className:"h-8 w-8 mx-auto text-gray-400 animate-spin"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Uploading..."}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 max-w-xs mx-auto",children:r.jsx("div",{className:"bg-gray-800 h-2 rounded-full transition-all duration-300",style:{width:`${P}%`}})}),r.jsxs("p",{className:"text-xs text-gray-500",children:[P,"%"]})]})]}):r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center",children:r.jsx(pk,{className:"h-5 w-5 text-gray-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:v}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[E==="video"?"MP4, WebM, OGG":E==="any"?"Images or videos":"PNG, JPG, GIF, WebP, SVG"," ","up to ",$ue(l)]})]})]})]}),(m||B)&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-500",children:[r.jsx(Mt,{className:"h-4 w-4 flex-shrink-0"}),r.jsx("span",{children:m||B})]}),T&&!f&&r.jsx("div",{className:"pt-2",children:R?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"url",value:U,onChange:oe=>Y(oe.target.value),placeholder:"Enter URL manually",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none",onKeyDown:oe=>{oe.key==="Enter"&&(oe.preventDefault(),X()),oe.key==="Escape"&&(z(!1),Y(""))}}),r.jsx("button",{type:"button",onClick:X,disabled:!U.trim(),className:"px-3 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 text-sm",children:r.jsx(Cn,{className:"h-4 w-4"})}),r.jsx("button",{type:"button",onClick:()=>{z(!1),Y("")},className:"px-3 py-2 border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:r.jsx(Kr,{className:"h-4 w-4"})})]}):r.jsx("button",{type:"button",onClick:()=>z(!0),className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Or enter URL manually"})})]})}function MR({startDate:e,endDate:t,bookingStartDate:s,bookingEndDate:n}){const a=f=>f?new Date(f).toLocaleString("en-IN",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",l=e&&t&&s&&n,u=()=>{if(!l)return!1;const f=new Date(s),m=new Date(n),x=new Date(e),p=new Date(t);return f<m&&x<p&&f<p&&m<=p};return r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(jr,{className:"h-5 w-5 text-blue-600"}),r.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Event Timeline Preview"})]}),l&&u()?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-0 right-0 top-8 h-2 bg-gradient-to-r from-green-300 via-green-400 to-yellow-300 rounded-full opacity-50"}),r.jsx("div",{className:"absolute left-1/3 right-0 top-8 h-2 bg-gradient-to-r from-yellow-300 via-blue-400 to-blue-500 rounded-full"}),r.jsxs("div",{className:"relative flex justify-between items-start pt-16",children:[r.jsxs("div",{className:"flex flex-col items-center -mt-16 w-1/4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center shadow-lg mb-2",children:r.jsx(_o,{className:"h-6 w-6 text-white"})}),r.jsx("span",{className:"text-xs font-semibold text-green-700 text-center mb-1",children:"Booking Opens"}),r.jsx("span",{className:"text-xs text-gray-600 text-center",children:a(s)})]}),r.jsxs("div",{className:"flex flex-col items-center -mt-16 w-1/4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center shadow-lg mb-2",children:r.jsx(fr,{className:"h-6 w-6 text-white"})}),r.jsx("span",{className:"text-xs font-semibold text-blue-700 text-center mb-1",children:"Event Starts"}),r.jsx("span",{className:"text-xs text-gray-600 text-center",children:a(e)})]}),r.jsxs("div",{className:"flex flex-col items-center -mt-16 w-1/4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-500 flex items-center justify-center shadow-lg mb-2",children:r.jsx(sd,{className:"h-6 w-6 text-white"})}),r.jsx("span",{className:"text-xs font-semibold text-yellow-700 text-center mb-1",children:"Booking Closes"}),r.jsx("span",{className:"text-xs text-gray-600 text-center",children:a(n)})]}),r.jsxs("div",{className:"flex flex-col items-center -mt-16 w-1/4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-500 flex items-center justify-center shadow-lg mb-2",children:r.jsx(fr,{className:"h-6 w-6 text-white"})}),r.jsx("span",{className:"text-xs font-semibold text-indigo-700 text-center mb-1",children:"Event Ends"}),r.jsx("span",{className:"text-xs text-gray-600 text-center",children:a(t)})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[r.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-200",children:[r.jsx("div",{className:"text-xs font-semibold text-green-700 mb-1",children:" Booking Period"}),r.jsx("div",{className:"text-xs text-gray-600",children:"Users can book tickets"})]}),r.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[r.jsx("div",{className:"text-xs font-semibold text-blue-700 mb-1",children:" Event Period"}),r.jsx("div",{className:"text-xs text-gray-600",children:"Event is happening"})]})]})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-3",children:r.jsx(jr,{className:"h-8 w-8 text-gray-400"})}),r.jsx("p",{className:"text-sm text-gray-500",children:"Fill in all date fields to see the timeline preview"})]})]})}const rg={SEAT_ARRANGEMENT:"/web/events"},Ec={createSeatArrangement:async(e,t)=>(console.log("[SeatArrangementService] Creating seat arrangement for event:",e),Te(Ee.post(`${rg.SEAT_ARRANGEMENT}/${e}/seat-arrangement`,t))),getSeatArrangement:async e=>(console.log("[SeatArrangementService] Fetching seat arrangement for event:",e),Te(Ee.get(`${rg.SEAT_ARRANGEMENT}/${e}/seat-arrangement`))),updateSeatArrangement:async(e,t)=>(console.log("[SeatArrangementService] Updating seat arrangement for event:",e),Te(Ee.put(`${rg.SEAT_ARRANGEMENT}/${e}/seat-arrangement`,t))),deleteSeatArrangement:async e=>(console.log("[SeatArrangementService] Deleting seat arrangement for event:",e),Te(Ee.delete(`${rg.SEAT_ARRANGEMENT}/${e}/seat-arrangement`))),generateSeatLabels:e=>{const t=[],s=/^([A-Z]+)(\d+)-([A-Z]+)(\d+)$/i,n=e.match(s);if(n){const[,u,f,m,x]=n,p=u.toUpperCase().charCodeAt(0),v=m.toUpperCase().charCodeAt(0);for(let C=p;C<=v;C++){const T=String.fromCharCode(C),E=parseInt(x),k=C===p?parseInt(f):1;for(let O=k;O<=E;O++)t.push(`${T}${O}`)}return t}const a=/^(\d+)-(\d+)$/,l=e.match(a);if(l){const[,u,f]=l;for(let m=parseInt(u);m<=parseInt(f);m++)t.push(String(m));return t}return e.includes(",")?e.split(",").map(u=>u.trim()).filter(Boolean):[e.trim()]},parseSeatLabels:e=>{if(!e||!e.trim())return[];const t=new Set;return e.split(/[\n;]/).map(n=>n.trim()).filter(Boolean).forEach(n=>{n.split(",").map(l=>l.trim()).filter(Boolean).forEach(l=>{/^[A-Z]?\d+-[A-Z]?\d+$/i.test(l)||/^[A-Z]+\d+-[A-Z]+\d+$/i.test(l)?Ec.generateSeatLabels(l).forEach(m=>t.add(m)):t.add(l)})}),Array.from(t).map(n=>({label:n}))}},W8=(e=null,t=null)=>({name:e?.name||"",description:e?.description||"",imageUrls:e?.imageUrls||[],thumbnail:{imageUrl:e?.thumbnail?.imageUrl||"",videoUrl:e?.thumbnail?.videoUrl||""},mode:e?.mode||"",city:e?.city||"",gmapLink:e?.gmapLink||"",category:e?.category||"",startDate:e?.startDate?sg(e.startDate):"",endDate:e?.endDate?sg(e.endDate):"",bookingStartDate:e?.bookingStartDate?sg(e.bookingStartDate):"",bookingEndDate:e?.bookingEndDate?sg(e.bookingEndDate):"",duration:e?.duration??"",price:e?.price??"",compareAtPrice:e?.compareAtPrice??"",availableSeats:e?.availableSeats??"",usePricingTiers:e?.pricingTiers?.length>0,pricingTiers:e?.pricingTiers||[],isLive:e?.isLive??!1,featured:e?.featured??!1,useSeatArrangement:!!t,seatArrangement:{imageUrl:t?.imageUrl||"",seatLabelsInput:t?.seats?.map(s=>s.label).join(", ")||"",seats:t?.seats||[]}});function sg(e){if(!e)return"";const t=new Date(e),s=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),l=String(t.getHours()).padStart(2,"0"),u=String(t.getMinutes()).padStart(2,"0");return`${s}-${n}-${a}T${l}:${u}`}const que=(e,t=!1)=>{const s={};if(e.name.trim()?e.name.length>200&&(s.name="Name must be 200 characters or less"):s.name="Name is required",e.description.trim()?e.description.length>5e3&&(s.description="Description must be 5000 characters or less"):s.description="Description is required",e.mode||(s.mode="Mode is required"),(e.mode==="OFFLINE"||e.mode==="HYBRID")&&!e.city.trim()&&(s.city="City is required for offline or hybrid events"),e.gmapLink&&e.gmapLink.trim()){const n=/^https?:\/\/(www\.)?(google\.[a-z.]+\/maps|maps\.google\.[a-z.]+|goo\.gl\/maps|maps\.app\.goo\.gl)\/.+/i;/^https?:\/\/.+/.test(e.gmapLink.trim())?n.test(e.gmapLink.trim())||(s.gmapLink="Please provide a valid Google Maps link"):s.gmapLink="Please provide a valid URL"}if(e.category||(s.category="Category is required"),e.startDate?t||new Date(e.startDate)<=new Date&&(s.startDate="Start date must be in the future"):s.startDate="Start date is required",!e.endDate)s.endDate="End date is required";else if(e.startDate){const n=new Date(e.startDate);new Date(e.endDate)<=n&&(s.endDate="End date must be after start date")}if(!e.bookingStartDate)s.bookingStartDate="Booking start date is required";else if(e.endDate){const n=new Date(e.bookingStartDate),a=new Date(e.endDate);n>=a&&(s.bookingStartDate="Booking start must be before event end")}if(!e.bookingEndDate)s.bookingEndDate="Booking end date is required";else if(e.bookingStartDate){const n=new Date(e.bookingStartDate);new Date(e.bookingEndDate)<=n&&(s.bookingEndDate="Booking end must be after booking start")}if(e.bookingEndDate&&e.endDate){const n=new Date(e.bookingEndDate),a=new Date(e.endDate);n>a&&(s.bookingEndDate="Booking end cannot be after event end")}if(!e.usePricingTiers)e.price===""||e.price===null||e.price===void 0?s.price="Price is required":(isNaN(e.price)||Number(e.price)<0)&&(s.price="Price must be a valid positive number"),e.compareAtPrice!==""&&e.compareAtPrice!==null&&e.compareAtPrice!==void 0&&(isNaN(e.compareAtPrice)||Number(e.compareAtPrice)<0?s.compareAtPrice="Compare at price must be a valid positive number":Number(e.compareAtPrice)<Number(e.price)&&(s.compareAtPrice="Compare at price must be greater than or equal to price"));else if(e.pricingTiers.length===0)s.pricingTiers="At least one pricing tier is required";else{const n=[];e.pricingTiers.forEach((a,l)=>{const u={};a.name?.trim()||(u.name="Tier name is required"),a.price===""||a.price===null||a.price===void 0?u.price="Tier price is required":(isNaN(a.price)||Number(a.price)<0)&&(u.price="Invalid price"),Object.keys(u).length>0&&(n[l]=u)}),n.some(a=>a)&&(s.tierErrors=n)}if(e.availableSeats!==""&&e.availableSeats!==null&&e.availableSeats!==void 0&&(isNaN(e.availableSeats)||Number(e.availableSeats)<0)&&(s.availableSeats="Available seats must be a valid positive number"),e.imageUrls.length>0){const n=/^https?:\/\/.+/;e.imageUrls.forEach((a,l)=>{a&&!n.test(a)&&(s.imageUrls||(s.imageUrls={}),s.imageUrls[l]="Invalid URL format")})}return e.thumbnail.imageUrl&&!/^https?:\/\/.+/.test(e.thumbnail.imageUrl)&&(s.thumbnailImage="Invalid thumbnail image URL"),e.thumbnail.videoUrl&&!/^https?:\/\/.+/.test(e.thumbnail.videoUrl)&&(s.thumbnailVideo="Invalid thumbnail video URL"),e.useSeatArrangement&&(e.mode==="OFFLINE"||e.mode==="HYBRID")&&(e.seatArrangement.imageUrl?/^https?:\/\/.+/.test(e.seatArrangement.imageUrl)||(s["seatArrangement.imageUrl"]="Invalid seating map image URL"):s["seatArrangement.imageUrl"]="Seating map image is required",(!e.seatArrangement.seats||e.seatArrangement.seats.length===0)&&(s["seatArrangement.seats"]="At least one seat must be defined")),{isValid:Object.keys(s).length===0,errors:s}},K8=()=>({name:"",price:"",compareAtPrice:"",shortDescription:"",notes:"",ticketQuantity:1});function Z8({isOpen:e,onClose:t,onSubmit:s,event:n=null,seatArrangement:a=null,isLoading:l=!1,serverError:u=null,validationErrors:f=null}){const m=!!n,[x,p]=w.useState(W8(n,a)),[v,C]=w.useState({});w.useEffect(()=>{e&&(p(W8(n,a)),C({}))},[e,n,a]),w.useEffect(()=>{if(f&&Array.isArray(f)){const Y={};f.forEach($=>{$.field&&(Y[$.field]=$.message)}),C($=>({...$,...Y}))}},[f]);const T=Y=>{const{name:$,value:G,type:ee}=Y.target,ce=ee==="number"?G===""?"":Number(G):G;p(se=>({...se,[$]:ce})),v[$]&&C(se=>({...se,[$]:null}))},E=(Y,$)=>{p(ee=>({...ee,thumbnail:{...ee.thumbnail,[Y]:$}}));const G=Y==="imageUrl"?"thumbnailImage":"thumbnailVideo";v[G]&&C(ee=>({...ee,[G]:null}))},k=Y=>{p($=>({...$,imageUrls:$.imageUrls.filter((G,ee)=>ee!==Y)}))},O=()=>{p(Y=>({...Y,usePricingTiers:!Y.usePricingTiers,pricingTiers:Y.usePricingTiers?[]:[K8()],price:Y.usePricingTiers?"":Y.price,compareAtPrice:Y.usePricingTiers?"":Y.compareAtPrice}))},M=()=>{p(Y=>({...Y,pricingTiers:[...Y.pricingTiers,K8()]}))},L=Y=>{p($=>({...$,pricingTiers:$.pricingTiers.filter((G,ee)=>ee!==Y)}))},P=(Y,$,G)=>{p(ee=>({...ee,pricingTiers:ee.pricingTiers.map((ce,se)=>se===Y?{...ce,[$]:$==="price"||$==="compareAtPrice"||$==="ticketQuantity"?G===""?"":Number(G):G}:ce)})),v.tierErrors?.[Y]?.[$]&&C(ee=>{const ce=[...ee.tierErrors||[]];return ce[Y]&&delete ce[Y][$],{...ee,tierErrors:ce}})},H=()=>{p(Y=>({...Y,useSeatArrangement:!Y.useSeatArrangement,seatArrangement:Y.useSeatArrangement?Y.seatArrangement:{imageUrl:"",seatLabelsInput:"",seats:[]}}))},B=(Y,$)=>{p(G=>({...G,seatArrangement:{...G.seatArrangement,[Y]:$}})),v[`seatArrangement.${Y}`]&&C(G=>({...G,[`seatArrangement.${Y}`]:null}))},F=()=>{const Y=x.seatArrangement.seatLabelsInput;if(!Y.trim()){p(G=>({...G,seatArrangement:{...G.seatArrangement,seats:[]}}));return}const $=Ec.parseSeatLabels(Y);p(G=>({...G,seatArrangement:{...G.seatArrangement,seats:$}}))},R=Y=>{p($=>({...$,seatArrangement:{...$.seatArrangement,seats:$.seatArrangement.seats.filter((G,ee)=>ee!==Y)}}))},z=async Y=>{Y.preventDefault();const $=que(x,m);if(!$.isValid){C($.errors);return}const G={name:x.name.trim(),description:x.description.trim(),mode:x.mode,category:x.category,startDate:new Date(x.startDate).toISOString(),endDate:new Date(x.endDate).toISOString(),bookingStartDate:new Date(x.bookingStartDate).toISOString(),bookingEndDate:new Date(x.bookingEndDate).toISOString()};x.city.trim()&&(G.city=x.city.trim()),x.gmapLink.trim()&&(G.gmapLink=x.gmapLink.trim()),x.imageUrls.length>0&&(G.imageUrls=x.imageUrls.filter(ee=>ee.trim())),(x.thumbnail.imageUrl||x.thumbnail.videoUrl)&&(G.thumbnail={},x.thumbnail.imageUrl&&(G.thumbnail.imageUrl=x.thumbnail.imageUrl.trim()),x.thumbnail.videoUrl&&(G.thumbnail.videoUrl=x.thumbnail.videoUrl.trim())),x.usePricingTiers&&x.pricingTiers.length>0?G.pricingTiers=x.pricingTiers.map(ee=>({name:ee.name.trim(),price:Number(ee.price),...ee.compareAtPrice!==""&&{compareAtPrice:Number(ee.compareAtPrice)},...ee.shortDescription&&{shortDescription:ee.shortDescription.trim()},...ee.notes&&{notes:ee.notes.trim()},ticketQuantity:Number(ee.ticketQuantity)||1})):(G.price=Number(x.price),x.compareAtPrice!==""&&(G.compareAtPrice=Number(x.compareAtPrice))),x.availableSeats!==""&&(G.availableSeats=Number(x.availableSeats)),x.duration!==""&&x.duration!==null&&x.duration!==void 0&&(G.duration=Number(x.duration)),m&&(G.isLive=x.isLive,G.featured=x.featured),x.useSeatArrangement&&(G.seatArrangement={imageUrl:x.seatArrangement.imageUrl,seats:x.seatArrangement.seats}),await s(G)},U=()=>{l||t()};return r.jsx(Lt,{isOpen:e,onClose:U,title:m?"Edit Event":"Create Event",size:"2xl",closeOnOverlayClick:!l,children:r.jsxs("form",{onSubmit:z,className:"space-y-6",children:[u&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:u}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Basic Information"}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Event Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:x.name,onChange:T,disabled:l,maxLength:200,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter event name"}),v.name&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.name})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{id:"description",name:"description",value:x.description,onChange:T,disabled:l,rows:4,maxLength:5e3,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none ${v.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter event description"}),r.jsxs("div",{className:"flex justify-between mt-1",children:[v.description?r.jsx("p",{className:"text-sm text-red-500",children:v.description}):r.jsx("span",{}),r.jsxs("span",{className:"text-xs text-gray-500",children:[x.description.length,"/5000"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"mode",className:"block text-sm font-medium text-gray-700 mb-1",children:["Mode ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"mode",name:"mode",value:x.mode,onChange:T,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.mode?"border-red-500":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"Select mode"}),_R.map(Y=>r.jsx("option",{value:Y,children:Y},Y))]}),v.mode&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.mode})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"category",name:"category",value:x.category,onChange:T,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.category?"border-red-500":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"Select category"}),kR.map(Y=>r.jsx("option",{value:Y,children:Y.charAt(0)+Y.slice(1).toLowerCase()},Y))]}),v.category&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.category})]})]}),(x.mode==="OFFLINE"||x.mode==="HYBRID")&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:["City ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"city",name:"city",value:x.city,onChange:T,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.city?"border-red-500":"border-gray-300"}`,placeholder:"Enter city"}),v.city&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.city})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"gmapLink",className:"block text-sm font-medium text-gray-700 mb-1",children:r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(lw,{className:"h-4 w-4"}),"Google Maps Link"]})}),r.jsx("input",{type:"url",id:"gmapLink",name:"gmapLink",value:x.gmapLink,onChange:T,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.gmapLink?"border-red-500":"border-gray-300"}`,placeholder:"https://maps.app.goo.gl/..."}),v.gmapLink&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.gmapLink})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Event Schedule"}),r.jsx("p",{className:"text-sm text-gray-500",children:"When does the event actually happen?"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:["Event Start Date & Time ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"datetime-local",id:"startDate",name:"startDate",value:x.startDate,onChange:T,disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.startDate?"border-red-500":"border-gray-300"}`}),v.startDate&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.startDate}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"When does the event begin?"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:["Event End Date & Time ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"datetime-local",id:"endDate",name:"endDate",value:x.endDate,onChange:T,disabled:l,min:x.startDate,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.endDate?"border-red-500":"border-gray-300"}`}),v.endDate&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.endDate}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"When does the event end?"})]})]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2 mt-6",children:"Booking Window"}),r.jsx("p",{className:"text-sm text-gray-500",children:"When can users book tickets for this event?"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"bookingStartDate",className:"block text-sm font-medium text-gray-700 mb-1",children:["Booking Start Date & Time ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"datetime-local",id:"bookingStartDate",name:"bookingStartDate",value:x.bookingStartDate,onChange:T,disabled:l,max:x.endDate,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.bookingStartDate?"border-red-500":"border-gray-300"}`}),v.bookingStartDate&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.bookingStartDate}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"When can users start booking?"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"bookingEndDate",className:"block text-sm font-medium text-gray-700 mb-1",children:["Booking End Date & Time ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"datetime-local",id:"bookingEndDate",name:"bookingEndDate",value:x.bookingEndDate,onChange:T,disabled:l,min:x.bookingStartDate,max:x.endDate,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.bookingEndDate?"border-red-500":"border-gray-300"}`}),v.bookingEndDate&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.bookingEndDate}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"When should ticket sales close?"})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsxs("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:["Duration (minutes) ",r.jsx("span",{className:"text-gray-400 text-xs",children:"Optional"})]}),r.jsx("input",{type:"number",id:"duration",name:"duration",value:x.duration,onChange:T,disabled:l,min:"0",placeholder:"e.g., 120",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Event duration in minutes (for reference)"})]}),r.jsx("div",{className:"mt-6",children:r.jsx(MR,{startDate:x.startDate,endDate:x.endDate,bookingStartDate:x.bookingStartDate,bookingEndDate:x.bookingEndDate})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pricing"}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:x.usePricingTiers,onChange:O,disabled:l,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Use pricing tiers"})]})]}),x.usePricingTiers?r.jsxs("div",{className:"space-y-4",children:[v.pricingTiers&&r.jsx("p",{className:"text-sm text-red-500",children:v.pricingTiers}),x.pricingTiers.map((Y,$)=>r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"font-medium text-gray-700",children:["Tier ",$+1]}),x.pricingTiers.length>1&&r.jsx("button",{type:"button",onClick:()=>L($),disabled:l,className:"p-1 text-red-500 hover:bg-red-50 rounded transition-colors",children:r.jsx(hr,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tier Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:Y.name,onChange:G=>P($,"name",G.target.value),disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.tierErrors?.[$]?.name?"border-red-500":"border-gray-300"}`,placeholder:"e.g., General Admission"}),v.tierErrors?.[$]?.name&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.tierErrors[$].name})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",value:Y.price,onChange:G=>P($,"price",G.target.value),disabled:l,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.tierErrors?.[$]?.price?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),v.tierErrors?.[$]?.price&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.tierErrors[$].price})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compare at Price"}),r.jsx("input",{type:"number",value:Y.compareAtPrice,onChange:G=>P($,"compareAtPrice",G.target.value),disabled:l,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ticket Quantity"}),r.jsx("input",{type:"number",value:Y.ticketQuantity,onChange:G=>P($,"ticketQuantity",G.target.value),disabled:l,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"1"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Description"}),r.jsx("input",{type:"text",value:Y.shortDescription,onChange:G=>P($,"shortDescription",G.target.value),disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"Brief description of this tier"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:Y.notes,onChange:G=>P($,"notes",G.target.value),disabled:l,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Additional notes"})]})]})]},$)),r.jsxs("button",{type:"button",onClick:M,disabled:l,className:"flex items-center gap-2 px-4 py-2 text-gray-800 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[r.jsx(kr,{className:"h-4 w-4"}),"Add Pricing Tier"]}),r.jsxs("div",{className:"w-full md:w-1/3",children:[r.jsx("label",{htmlFor:"availableSeats",className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Available Seats"}),r.jsx("input",{type:"number",id:"availableSeats",name:"availableSeats",value:x.availableSeats,onChange:T,disabled:l,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.availableSeats?"border-red-500":"border-gray-300"}`,placeholder:"Unlimited"}),v.availableSeats&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.availableSeats})]})]}):r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:["Price ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:x.price,onChange:T,disabled:l,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.price?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),v.price&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.price})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"compareAtPrice",className:"block text-sm font-medium text-gray-700 mb-1",children:"Compare at Price"}),r.jsx("input",{type:"number",id:"compareAtPrice",name:"compareAtPrice",value:x.compareAtPrice,onChange:T,disabled:l,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.compareAtPrice?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),v.compareAtPrice&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.compareAtPrice})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"availableSeats",className:"block text-sm font-medium text-gray-700 mb-1",children:"Available Seats"}),r.jsx("input",{type:"number",id:"availableSeats",name:"availableSeats",value:x.availableSeats,onChange:T,disabled:l,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v.availableSeats?"border-red-500":"border-gray-300"}`,placeholder:"Unlimited"}),v.availableSeats&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.availableSeats})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Media"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ha,{label:"Thumbnail Image",value:x.thumbnail.imageUrl,onUpload:Y=>E("imageUrl",Y),disabled:l,error:v.thumbnailImage,type:"image",folder:"events/thumbnails",placeholder:"Drop image here or click to upload"}),r.jsx(ha,{label:"Thumbnail Video",value:x.thumbnail.videoUrl,onUpload:Y=>E("videoUrl",Y),disabled:l,error:v.thumbnailVideo,type:"video",folder:"events/videos",placeholder:"Drop video here or click to upload"})]}),r.jsx(ha,{label:"Image Gallery",values:x.imageUrls,onUpload:Y=>p($=>({...$,imageUrls:Y})),onRemove:Y=>k(Y),multiple:!0,disabled:l,error:v.imageUrls?"Some image URLs are invalid":null,type:"image",folder:"events/gallery",placeholder:"Drop images here or click to upload"})]}),(x.mode==="OFFLINE"||x.mode==="HYBRID")&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(OU,{className:"h-5 w-5"}),"Seat Arrangement"]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:x.useSeatArrangement,onChange:H,disabled:l,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Enable seat selection"})]})]}),x.useSeatArrangement&&r.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[r.jsx(Tz,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"text-sm text-blue-700",children:[r.jsx("p",{className:"font-medium",children:"Seat arrangement will be created after the event is saved."}),r.jsx("p",{className:"text-xs mt-1",children:'Upload a seating map image and define seat labels using patterns like "A1-A10" or "1-50", separated by commas.'})]})]}),r.jsx(ha,{label:"Seating Map Image",value:x.seatArrangement.imageUrl,onUpload:Y=>B("imageUrl",Y),disabled:l,error:v["seatArrangement.imageUrl"],type:"image",folder:"events/seat-maps",placeholder:"Upload seating arrangement diagram",required:!0}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Seat Labels ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:x.seatArrangement.seatLabelsInput,onChange:Y=>B("seatLabelsInput",Y.target.value),disabled:l,className:`flex-1 px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${v["seatArrangement.seats"]?"border-red-500":"border-gray-300"}`,placeholder:"A1-A10, B1-B10, 1-50"}),r.jsx("button",{type:"button",onClick:F,disabled:l||!x.seatArrangement.seatLabelsInput.trim(),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50",children:"Generate"})]}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:'Use patterns: "A1-A10" for A1, A2...A10 | "1-50" for 1, 2...50 | Comma separated for multiple ranges'}),v["seatArrangement.seats"]&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v["seatArrangement.seats"]})]}),x.seatArrangement.seats.length>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Generated Seats (",x.seatArrangement.seats.length,")"]}),r.jsx("button",{type:"button",onClick:()=>p(Y=>({...Y,seatArrangement:{...Y.seatArrangement,seats:[],seatLabelsInput:""}})),disabled:l,className:"text-xs text-red-500 hover:text-red-700",children:"Clear all"})]}),r.jsx("div",{className:"max-h-40 overflow-y-auto p-3 bg-white border border-gray-200 rounded-lg",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:x.seatArrangement.seats.map((Y,$)=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 text-sm rounded-md border border-gray-200",children:[Y.label,r.jsx("button",{type:"button",onClick:()=>R($),disabled:l,className:"text-gray-400 hover:text-red-500",children:r.jsx(Kr,{className:"h-3 w-3"})})]},$))})})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Status"}),r.jsxs("div",{className:"flex flex-wrap gap-6",children:[r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"checkbox",checked:x.isLive,onChange:Y=>p($=>({...$,isLive:Y.target.checked})),disabled:l,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-green-500 peer-disabled:opacity-50 transition-colors"}),r.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Live"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Event is visible to users"})]})]}),r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"checkbox",checked:x.featured,onChange:Y=>p($=>({...$,featured:Y.target.checked})),disabled:l,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-purple-500 peer-disabled:opacity-50 transition-colors"}),r.jsx("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Featured"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Highlight in featured sections"})]})]})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:U,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[l&&r.jsx(it,{className:"h-4 w-4 animate-spin"}),m?"Update Event":"Create Event"]})]})]})})}const RR=e=>{if(!e)return"Unknown";const t=new Date,s=new Date(e.bookingStartDate),n=new Date(e.bookingEndDate),a=new Date(e.startDate),l=new Date(e.endDate);return t>l?"Completed":t>=a&&t<=l?"Ongoing":t>n&&t<a?"Booking Closed":t>=s&&t<=n?"Booking Open":t<s?"Upcoming":"Unknown"},LR=e=>{const t={Upcoming:{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300"},"Booking Open":{bg:"bg-green-100",text:"text-green-700",border:"border-green-300"},"Booking Closed":{bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-300"},Ongoing:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"},Completed:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300"}};return t[e]||t.Unknown||{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300"}},ng=e=>e?new Date(e).toLocaleString("en-IN",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";function bc(e){return e?new Date(e).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"N/A"}function ag(e){return e==null?"Free":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e)}function Hue(e){const t={TECHNOLOGY:"bg-blue-100 text-gray-900",EDUCATION:"bg-indigo-100 text-indigo-700",MEDICAL:"bg-green-100 text-green-700",COMEDY:"bg-yellow-100 text-yellow-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",BUSINESS:"bg-gray-100 text-gray-700",SPORTS:"bg-orange-100 text-orange-700",ARTS:"bg-purple-100 text-purple-700",MUSIC:"bg-red-100 text-red-700",FOOD:"bg-amber-100 text-amber-700",LIFESTYLE:"bg-teal-100 text-teal-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function Gue(e){return{ONLINE:"bg-green-100 text-green-700",OFFLINE:"bg-blue-100 text-gray-900",HYBRID:"bg-purple-100 text-purple-700"}[e]||"bg-gray-100 text-gray-700"}function Yue(e){return e==="ONLINE"||e==="HYBRID"?cf:lw}function Xue({isOpen:e,onClose:t,event:s}){const[n,a]=w.useState(0);if(w.useEffect(()=>{e&&s&&a(0)},[e,s]),!s)return null;const l=Yue(s.mode),u=s.pricingTiers&&s.pricingTiers.length>0;return r.jsx(Lt,{isOpen:e,onClose:t,title:"Event Details",size:"2xl",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-start justify-between gap-4",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:s.name}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Hue(s.category)}`,children:s.category}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Gue(s.mode)}`,children:s.mode}),s.isLive?r.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700",children:"Live"}):r.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-600",children:"Not Live"}),s.featured&&r.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-700",children:"Featured"}),s.isDeleted&&r.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-700",children:"Deleted"})]})]})}),(s.thumbnail?.imageUrl||s.imageUrls?.length>0)&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"relative aspect-video bg-gray-100 rounded-lg overflow-hidden",children:[s.thumbnail?.imageUrl||s.imageUrls?.length>0?r.jsx("img",{src:s.imageUrls?.[n]||s.thumbnail?.imageUrl,alt:s.name,className:"w-full h-full object-cover",onError:f=>{f.target.src="https://via.placeholder.com/800x450?text=No+Image"}}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No image available"}),s.thumbnail?.videoUrl&&r.jsxs("a",{href:s.thumbnail.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-3 right-3 flex items-center gap-2 px-3 py-2 bg-black/70 text-white rounded-lg hover:bg-black/80 transition-colors",children:[r.jsx(fk,{className:"h-4 w-4"}),"Watch Video"]})]}),s.imageUrls&&s.imageUrls.length>1&&r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:s.imageUrls.map((f,m)=>r.jsx("button",{onClick:()=>a(m),className:`flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-colors ${n===m?"border-blue-500":"border-transparent"}`,children:r.jsx("img",{src:f,alt:`${s.name} ${m+1}`,className:"w-full h-full object-cover",onError:x=>{x.target.style.display="none"}})},m))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Description"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s.description})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[(()=>{const f=RR(s),m=LR(f);return r.jsx("span",{className:`inline-flex px-3 py-1.5 rounded-full text-sm font-medium border ${m.bg} ${m.text} ${m.border}`,children:f})})(),s.isLive&&r.jsx("span",{className:"inline-flex px-3 py-1.5 rounded-full text-sm font-medium bg-purple-100 text-purple-700 border border-purple-300",children:"Visible to Users"})]}),r.jsx("div",{className:"mb-6",children:r.jsx(MR,{startDate:s.startDate,endDate:s.endDate,bookingStartDate:s.bookingStartDate,bookingEndDate:s.bookingEndDate})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-3",children:[r.jsx(fr,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Event Schedule"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Event Starts"}),r.jsx("p",{className:"text-sm text-gray-900 font-medium",children:bc(s.startDate)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Event Ends"}),r.jsx("p",{className:"text-sm text-gray-900 font-medium",children:bc(s.endDate)})]})]})]}),r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-700 mb-3",children:[r.jsx(_o,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Booking Window"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-green-700 font-medium",children:"Booking Opens"}),r.jsx("p",{className:"text-sm text-gray-900 font-medium",children:bc(s.bookingStartDate)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-yellow-700 font-medium",children:"Booking Closes"}),r.jsx("p",{className:"text-sm text-gray-900 font-medium",children:bc(s.bookingEndDate)})]})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-2",children:[r.jsx(l,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Location"})]}),r.jsx("p",{className:"text-gray-900 font-medium",children:s.mode==="ONLINE"?"Online Event":s.city||"Location not specified"}),r.jsxs("p",{className:"text-sm text-gray-500 capitalize",children:[s.mode?.toLowerCase()," event"]})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-3",children:[r.jsx(lz,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Pricing"})]}),u?r.jsx("div",{className:"space-y-3",children:s.pricingTiers.map((f,m)=>r.jsxs("div",{className:"flex items-start justify-between p-3 bg-white rounded-lg border border-gray-200",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:f.name}),f.shortDescription&&r.jsx("p",{className:"text-sm text-gray-500",children:f.shortDescription}),f.notes&&r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.notes}),f.ticketQuantity>1&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Includes ",f.ticketQuantity," tickets"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:ag(f.price)}),f.compareAtPrice&&r.jsx("p",{className:"text-sm text-gray-400 line-through",children:ag(f.compareAtPrice)})]})]},m))}):r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ag(s.price)}),s.compareAtPrice&&r.jsx("p",{className:"text-sm text-gray-400 line-through",children:ag(s.compareAtPrice)})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-gray-500 mb-1",children:"Created By"}),r.jsxs("p",{className:"text-gray-900 font-medium",children:[s.createdBy?.name||"Unknown",s.createdBy?.email&&r.jsxs("span",{className:"text-gray-500 font-normal",children:[" (",s.createdBy.email,")"]})]}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:bc(s.createdAt)})]}),s.updatedBy&&r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-gray-500 mb-1",children:"Last Updated By"}),r.jsx("p",{className:"text-gray-900 font-medium",children:s.updatedBy?.name||"Unknown"}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:bc(s.updatedAt)})]}),s.isDeleted&&s.deletedBy&&r.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[r.jsx("p",{className:"text-red-500 mb-1",children:"Deleted By"}),r.jsx("p",{className:"text-red-700 font-medium",children:s.deletedBy?.name||"Unknown"}),r.jsx("p",{className:"text-red-500 text-xs mt-1",children:bc(s.deletedAt)})]})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsxs("p",{className:"text-xs text-gray-400",children:["Event ID: ",r.jsx("code",{className:"bg-gray-100 px-1 py-0.5 rounded",children:s._id})]})})]})})}function Wue({filters:e,onFilterChange:t,onSearchChange:s,onReset:n,showDeleted:a,onToggleDeleted:l,disabled:u=!1}){const[f,m]=w.useState(!1),[x,p]=w.useState(e.search||""),v=k=>{const O=k.target.value;p(O),s(O)},C=(k,O)=>{t({[k]:O})},T=()=>{p(""),m(!1),n()},E=e.category||e.mode||e.city||e.isLive!==""||e.featured!==""||e.minPrice||e.maxPrice||e.startDateFrom||e.startDateTo;return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search events...",value:x,onChange:v,disabled:u,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),x&&r.jsx("button",{onClick:()=>{p(""),s("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(Kr,{className:"h-4 w-4"})})]}),r.jsxs("select",{value:e.category,onChange:k=>C("category",k.target.value),disabled:u,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"All Categories"}),kR.map(k=>r.jsx("option",{value:k,children:k.charAt(0)+k.slice(1).toLowerCase()},k))]}),r.jsxs("select",{value:e.mode,onChange:k=>C("mode",k.target.value),disabled:u,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"All Modes"}),_R.map(k=>r.jsx("option",{value:k,children:k},k))]}),r.jsxs("select",{value:e.isLive,onChange:k=>C("isLive",k.target.value),disabled:u,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"true",children:"Live Only"}),r.jsx("option",{value:"false",children:"Not Live"})]}),r.jsxs("select",{value:e.featured,onChange:k=>C("featured",k.target.value),disabled:u,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"All Events"}),r.jsx("option",{value:"true",children:"Featured Only"}),r.jsx("option",{value:"false",children:"Not Featured"})]}),r.jsx("select",{value:e.sortBy,onChange:k=>C("sortBy",k.target.value),disabled:u,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:Lue.map(k=>r.jsxs("option",{value:k.value,children:["Sort: ",k.label]},k.value))}),r.jsxs("select",{value:e.sortOrder,onChange:k=>C("sortOrder",k.target.value),disabled:u,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"desc",children:"Newest First"}),r.jsx("option",{value:"asc",children:"Oldest First"})]}),r.jsxs("button",{onClick:()=>m(!f),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${f||E?"bg-gray-100 border-gray-400 text-gray-900":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[r.jsx(Va,{className:"h-4 w-4"}),r.jsx("span",{children:"Filters"}),E&&r.jsx("span",{className:"flex items-center justify-center w-5 h-5 text-xs bg-gray-800 text-white rounded-full",children:"!"}),f?r.jsx(WU,{className:"h-4 w-4"}):r.jsx(fi,{className:"h-4 w-4"})]}),(E||x)&&r.jsxs("button",{onClick:T,disabled:u,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[r.jsx(Ro,{className:"h-4 w-4"}),"Reset"]})]}),f&&r.jsx("div",{className:"pt-4 border-t border-gray-200 space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),r.jsx("input",{type:"text",placeholder:"Filter by city",value:e.city,onChange:k=>C("city",k.target.value),disabled:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Price"}),r.jsx("input",{type:"number",placeholder:"0",value:e.minPrice,onChange:k=>C("minPrice",k.target.value),disabled:u,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Price"}),r.jsx("input",{type:"number",placeholder:"Any",value:e.maxPrice,onChange:k=>C("maxPrice",k.target.value),disabled:u,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})]}),r.jsx("div",{className:"hidden lg:block"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date From"}),r.jsx("input",{type:"date",value:e.startDateFrom,onChange:k=>C("startDateFrom",k.target.value),disabled:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date To"}),r.jsx("input",{type:"date",value:e.startDateTo,onChange:k=>C("startDateTo",k.target.value),disabled:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})]})]})}),r.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:a,onChange:l,disabled:u,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Show deleted events"})]}),a&&r.jsx("span",{className:"text-sm text-amber-600 bg-amber-50 px-2 py-1 rounded",children:"Viewing deleted events"})]})]})}function Kue(e,t){if(t&&t.length>0){const s=t.map(l=>l.price),n=Math.min(...s),a=Math.max(...s);return n===a?ig(n):`${ig(n)} - ${ig(a)}`}return e==null?"Free":ig(e)}function ig(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function Zue(e){const t={TECHNOLOGY:"bg-blue-100 text-gray-900",EDUCATION:"bg-indigo-100 text-indigo-700",MEDICAL:"bg-green-100 text-green-700",COMEDY:"bg-yellow-100 text-yellow-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",BUSINESS:"bg-gray-100 text-gray-700",SPORTS:"bg-orange-100 text-orange-700",ARTS:"bg-purple-100 text-purple-700",MUSIC:"bg-red-100 text-red-700",FOOD:"bg-amber-100 text-amber-700",LIFESTYLE:"bg-teal-100 text-teal-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function Que({events:e,showDeleted:t,isLoading:s,canEdit:n,canDelete:a,canPermanentDelete:l,onView:u,onEdit:f,onDelete:m,onRestore:x,onPermanentDelete:p}){return s?r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(it,{className:"h-8 w-8 animate-spin text-gray-800"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading events..."})]})}):e.length===0?r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx("p",{className:"text-lg font-medium",children:"No events found"}),r.jsx("p",{className:"text-sm mt-1",children:t?"No deleted events to display.":"Try adjusting your filters or create a new event."})]})}):r.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Event"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Category"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Mode"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Event Period"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Booking Window"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Price"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(v=>r.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 ${v.isDeleted?"bg-red-50/50":""}`,children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative w-16 h-12 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:[v.featured&&r.jsx("div",{className:"absolute top-0 left-0 z-10",children:r.jsx("div",{className:"bg-purple-600 text-white text-[8px] font-semibold px-1.5 py-0.5 rounded-br-md shadow-sm",children:"Featured"})}),v.thumbnail?.imageUrl||v.imageUrls?.[0]?r.jsx("img",{src:v.thumbnail?.imageUrl||v.imageUrls?.[0],alt:v.name,className:"w-full h-full object-cover",onError:C=>{C.target.style.display="none"}}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:"No image"})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate max-w-[200px]",children:v.name}),v.featured&&r.jsx("span",{className:"hidden sm:inline-flex px-1.5 py-0.5 rounded text-[10px] font-medium bg-purple-100 text-purple-700",children:"Featured"})]}),v.city&&r.jsx("p",{className:"text-sm text-gray-500 truncate",children:v.city})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Zue(v.category)}`,children:v.category})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-600",children:v.mode})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"text-gray-900 font-medium",children:"Start"}),r.jsx("p",{className:"text-gray-600 text-xs",children:ng(v.startDate)}),r.jsx("p",{className:"text-gray-900 font-medium mt-1",children:"End"}),r.jsx("p",{className:"text-gray-600 text-xs",children:ng(v.endDate)})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"text-green-700 font-medium",children:"Opens"}),r.jsx("p",{className:"text-gray-600 text-xs",children:ng(v.bookingStartDate)}),r.jsx("p",{className:"text-yellow-700 font-medium mt-1",children:"Closes"}),r.jsx("p",{className:"text-gray-600 text-xs",children:ng(v.bookingEndDate)})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm font-medium text-gray-900",children:Kue(v.price,v.pricingTiers)})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"flex flex-col gap-1.5",children:v.isDeleted?r.jsx("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700 border border-red-300",children:"Deleted"}):r.jsxs(r.Fragment,{children:[(()=>{const C=RR(v),T=LR(C);return r.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium border ${T.bg} ${T.text} ${T.border}`,children:C})})(),v.isLive&&r.jsx("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700 border border-purple-300",children:"Visible"})]})})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx("button",{onClick:()=>u(v),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:r.jsx(Lr,{className:"h-4 w-4"})}),t?r.jsxs(r.Fragment,{children:[n&&r.jsx("button",{onClick:()=>x(v),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Restore Event",children:r.jsx(Ro,{className:"h-4 w-4"})}),l&&r.jsx("button",{onClick:()=>p(v),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Permanently Delete",children:r.jsx(kV,{className:"h-4 w-4"})})]}):r.jsxs(r.Fragment,{children:[n&&r.jsx("button",{onClick:()=>f(v),className:"p-2 text-gray-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Event",children:r.jsx(Js,{className:"h-4 w-4"})}),a&&r.jsx("button",{onClick:()=>m(v),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Event",children:r.jsx(hr,{className:"h-4 w-4"})})]})]})})]},v._id))})]})})})}function en({isOpen:e,onClose:t,onConfirm:s,title:n="Confirm Action",message:a="Are you sure you want to proceed?",confirmText:l="Confirm",cancelText:u="Cancel",variant:f="danger",isLoading:m=!1}){const p={danger:{icon:"bg-red-100 text-red-600",button:"bg-red-600 hover:bg-red-700 focus:ring-red-500"},warning:{icon:"bg-yellow-100 text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"},primary:{icon:"bg-blue-100 text-gray-800",button:"bg-gray-800 hover:bg-gray-900 focus:ring-blue-500"}}[f],v=async()=>{await s()};return r.jsx(Lt,{isOpen:e,onClose:t,title:n,size:"sm",closeOnOverlayClick:!m,children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:`w-12 h-12 rounded-full ${p.icon} flex items-center justify-center mb-4`,children:r.jsx(np,{className:"h-6 w-6"})}),r.jsx("p",{className:"text-gray-600 mb-6",children:a}),r.jsxs("div",{className:"flex gap-3 w-full",children:[r.jsx("button",{onClick:t,disabled:m,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:u}),r.jsxs("button",{onClick:v,disabled:m,className:`flex-1 px-4 py-2 text-white rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 ${p.button} flex items-center justify-center gap-2`,children:[m&&r.jsx(it,{className:"h-4 w-4 animate-spin"}),l]})]})]})})}function Dr({currentPage:e,totalPages:t,totalItems:s,itemsPerPage:n,onPageChange:a,itemLabel:l="items",maxVisiblePages:u=5}){if(t<=0)return null;const f=s>0?(e-1)*n+1:0,m=Math.min(e*n,s),x=k=>{const O=[];let M=Math.max(1,e-Math.floor(k/2)),L=Math.min(t,M+k-1);L-M+1<k&&(M=Math.max(1,L-k+1));for(let P=M;P<=L;P++)O.push(P);return O},p=x(u),v=x(3),C=()=>{e>1&&a(e-1)},T=()=>{e<t&&a(e+1)},E=(k,O=!1)=>r.jsxs(r.Fragment,{children:[k[0]>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>a(1),className:`${O?"w-7 h-7 text-xs":"w-8 h-8 text-sm"} rounded-lg text-gray-600 hover:bg-gray-100 transition-all`,children:"1"}),k[0]>2&&r.jsx("span",{className:`${O?"w-7 h-7":"w-8 h-8"} flex items-center justify-center text-gray-400 text-sm`,children:"..."})]}),k.map(M=>r.jsx("button",{onClick:()=>a(M),className:`${O?"w-7 h-7 text-xs":"w-8 h-8 text-sm"} rounded-lg transition-all ${e===M?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-100"}`,children:M},M)),k[k.length-1]<t&&r.jsxs(r.Fragment,{children:[k[k.length-1]<t-1&&r.jsx("span",{className:`${O?"w-7 h-7":"w-8 h-8"} flex items-center justify-center text-gray-400 text-sm`,children:"..."}),r.jsx("button",{onClick:()=>a(t),className:`${O?"w-7 h-7 text-xs":"w-8 h-8 text-sm"} rounded-lg text-gray-600 hover:bg-gray-100 transition-all`,children:t})]})]});return r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 px-4 sm:px-6 py-3 sm:py-4 border-t border-gray-200",children:[r.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 order-2 sm:order-1",children:[r.jsx("span",{className:"hidden sm:inline",children:"Showing "}),f,"-",m," of ",s," ",l]}),r.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 order-1 sm:order-2",children:[r.jsx("button",{onClick:C,disabled:e===1,className:`p-1.5 sm:p-2 rounded-lg transition-all ${e===1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,"aria-label":"Previous page",children:r.jsx(tw,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),r.jsx("div",{className:"hidden sm:flex items-center gap-1",children:E(p,!1)}),r.jsx("div",{className:"flex sm:hidden items-center gap-1",children:E(v,!0)}),r.jsx("button",{onClick:T,disabled:e===t,className:`p-1.5 sm:p-2 rounded-lg transition-all ${e===t?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,"aria-label":"Next page",children:r.jsx(ep,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]})}function Jue(){const{hasRole:e}=mn(),t=e(["SUPER_ADMIN","ADMIN"]),s=e(["SUPER_ADMIN","ADMIN"]),n=e(["SUPER_ADMIN","ADMIN"]),a=e(["SUPER_ADMIN"]),{events:l,pagination:u,filters:f,isLoading:m,error:x,showDeleted:p,getEventById:v,createEvent:C,updateEvent:T,deleteEvent:E,restoreEvent:k,permanentDeleteEvent:O,getTicketStats:M,updateExpiredEvents:L,updateFilters:P,updateSearch:H,resetFilters:B,changePage:F,toggleShowDeleted:R,clearError:z}=Bue(),[U,Y]=w.useState(!1),[$,G]=w.useState(!1),[ee,ce]=w.useState(!1),[se,J]=w.useState(!1),[ne,pe]=w.useState(!1),[be,te]=w.useState(!1),[X,re]=w.useState(null),[ge,de]=w.useState(null),[je,oe]=w.useState(null),[fe,qe]=w.useState(!1),[Ne,Xe]=w.useState(!1),[st,Le]=w.useState(null),[we,Ue]=w.useState(null),ue=w.useCallback(async ct=>{re(ct),oe(null),ce(!0)},[]),He=w.useCallback(async ct=>{qe(!0);try{const Et=await M(ct);Et.success&&oe(Et.data)}finally{qe(!1)}},[M]),Se=w.useCallback(async ct=>{const Et=await v(ct._id);if(Et.success){re(Et.data),Le(null),Ue(null);try{const _r=await Ec.getSeatArrangement(ct._id);_r.success&&_r.data?.arrangement?de(_r.data.arrangement):de(null)}catch{de(null)}G(!0)}else Le(Et.error)},[v]),tt=w.useCallback(()=>{re(null),Le(null),Ue(null),Y(!0)},[]),lt=w.useCallback(ct=>{re(ct),J(!0)},[]),pt=w.useCallback(ct=>{re(ct),pe(!0)},[]),We=w.useCallback(ct=>{re(ct),te(!0)},[]),at=w.useCallback(async ct=>{Xe(!0),Le(null),Ue(null);const{seatArrangement:Et,..._r}=ct;try{const Sr=await C(_r);if(Sr.success){if(Et&&Et.seats?.length>0){const cs=Sr.data._id,_t={imageUrl:Et.imageUrl,seats:Et.seats.map(Je=>({label:Je.label}))},ve=await Ec.createSeatArrangement(cs,_t);ve.success||(console.error("Failed to create seat arrangement:",ve.error),Le(`Event created, but seat arrangement failed: ${ve.error}`))}Y(!1)}else Le(Sr.error),Ue(Sr.validationErrors)}finally{Xe(!1)}},[C]),Fe=w.useCallback(async ct=>{if(!X)return;Xe(!0),Le(null),Ue(null);const{seatArrangement:Et,..._r}=ct;try{const Sr=await T(X._id,_r);if(Sr.success){const cs=Et&&Et.seats?.length>0,_t=!!ge;if(cs&&!_t){const ve={imageUrl:Et.imageUrl,seats:Et.seats.map(nt=>({label:nt.label}))},Je=await Ec.createSeatArrangement(X._id,ve);Je.success||console.error("Failed to create seat arrangement:",Je.error)}else if(cs&&_t){const ve={imageUrl:Et.imageUrl,seats:Et.seats.map(nt=>({label:nt.label}))},Je=await Ec.updateSeatArrangement(X._id,ve);Je.success||console.error("Failed to update seat arrangement:",Je.error)}else if(!cs&&_t){const ve=await Ec.deleteSeatArrangement(X._id);ve.success||console.error("Failed to delete seat arrangement:",ve.error)}G(!1),re(null),de(null)}else Le(Sr.error),Ue(Sr.validationErrors)}finally{Xe(!1)}},[X,ge,T]),ft=w.useCallback(async()=>{if(X){Xe(!0);try{const ct=await E(X._id);ct.success?(J(!1),re(null)):Le(ct.error)}finally{Xe(!1)}}},[X,E]),Gt=w.useCallback(async()=>{if(X){Xe(!0);try{const ct=await k(X._id);ct.success?(pe(!1),re(null)):Le(ct.error)}finally{Xe(!1)}}},[X,k]),rr=w.useCallback(async()=>{if(X){Xe(!0);try{const ct=await O(X._id);ct.success?(te(!1),re(null)):Le(ct.error)}finally{Xe(!1)}}},[X,O]),mr=w.useCallback(async()=>{const ct=await L();ct.success&&ct.updatedCount>0&&console.log(`Updated ${ct.updatedCount} expired events`)},[L]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Events"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your events, pricing, and ticket availability"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:mr,disabled:m,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Mark expired events as not live",children:[r.jsx(qs,{className:`h-4 w-4 ${m?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline",children:"Update Expired"})]}),t&&r.jsxs("button",{onClick:tt,className:"flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-900 transition-colors",children:[r.jsx(kr,{className:"h-5 w-5"}),r.jsx("span",{children:"Create Event"})]})]})]}),x&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(Mt,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("p",{className:"flex-1",children:x}),r.jsx("button",{onClick:z,className:"text-red-500 hover:text-red-700 font-medium",children:"Dismiss"})]}),r.jsx(Wue,{filters:f,onFilterChange:P,onSearchChange:H,onReset:B,showDeleted:p,onToggleDeleted:R,disabled:m}),r.jsx(Que,{events:l,showDeleted:p,isLoading:m,canEdit:s,canDelete:n,canPermanentDelete:a,onView:ue,onEdit:Se,onDelete:lt,onRestore:pt,onPermanentDelete:We}),u.totalPages>0&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsx(Dr,{currentPage:u.currentPage,totalPages:u.totalPages,totalItems:u.totalCount,itemsPerPage:u.limit,onPageChange:F,itemLabel:"events"})}),r.jsx(Z8,{isOpen:U,onClose:()=>Y(!1),onSubmit:at,event:null,isLoading:Ne,serverError:st,validationErrors:we}),r.jsx(Z8,{isOpen:$,onClose:()=>{G(!1),re(null),de(null)},onSubmit:Fe,event:X,seatArrangement:ge,isLoading:Ne,serverError:st,validationErrors:we}),r.jsx(Xue,{isOpen:ee,onClose:()=>{ce(!1),re(null),oe(null)},event:X,ticketStats:je,isLoadingStats:fe,onFetchStats:He}),r.jsx(en,{isOpen:se,onClose:()=>{J(!1),re(null)},onConfirm:ft,title:"Delete Event",message:`Are you sure you want to delete "${X?.name}"? This event will be moved to the deleted items and can be restored later.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:Ne}),r.jsx(en,{isOpen:ne,onClose:()=>{pe(!1),re(null)},onConfirm:Gt,title:"Restore Event",message:`Are you sure you want to restore "${X?.name}"? This event will be available again in the events list.`,confirmText:"Restore",cancelText:"Cancel",variant:"primary",isLoading:Ne}),r.jsx(en,{isOpen:be,onClose:()=>{te(!1),re(null)},onConfirm:rr,title:"Permanently Delete Event",message:`Are you sure you want to permanently delete "${X?.name}"? This action cannot be undone and all associated data will be lost.`,confirmText:"Delete Permanently",cancelText:"Cancel",variant:"danger",isLoading:Ne})]})}function ede(){const[e,t]=w.useState(1),[s,n]=w.useState(""),[a,l]=w.useState(""),[u,f]=w.useState(""),m=10,x={confirmed:"bg-green-100 text-green-700",pending:"bg-yellow-100 text-yellow-700",cancelled:"bg-red-100 text-red-700"},[p,v]=w.useState([{id:1,userName:"John Doe",email:"john.doe@email.com",phone:"+91 9876543210",eventName:"Tech Conference 2025",enrollmentDate:"2025-02-15",status:"confirmed"},{id:2,userName:"Jane Smith",email:"jane.smith@email.com",phone:"+91 9876543211",eventName:"Medical Summit 2025",enrollmentDate:"2025-02-18",status:"pending"},{id:3,userName:"Mike Johnson",email:"mike.j@email.com",phone:"+91 9876543212",eventName:"Comedy Night Live",enrollmentDate:"2025-02-20",status:"confirmed"},{id:4,userName:"Sarah Wilson",email:"sarah.w@email.com",phone:"+91 9876543213",eventName:"Rock Music Festival",enrollmentDate:"2025-02-22",status:"cancelled"},{id:5,userName:"David Brown",email:"david.b@email.com",phone:"+91 9876543214",eventName:"AI Workshop 2025",enrollmentDate:"2025-02-25",status:"confirmed"},{id:6,userName:"Emily Davis",email:"emily.d@email.com",phone:"+91 9876543215",eventName:"Health Awareness Camp",enrollmentDate:"2025-02-28",status:"pending"},{id:7,userName:"Chris Martin",email:"chris.m@email.com",phone:"+91 9876543216",eventName:"Stand-up Comedy Show",enrollmentDate:"2025-03-01",status:"confirmed"},{id:8,userName:"Lisa Anderson",email:"lisa.a@email.com",phone:"+91 9876543217",eventName:"Jazz Night",enrollmentDate:"2025-03-05",status:"confirmed"},{id:9,userName:"Robert Taylor",email:"robert.t@email.com",phone:"+91 9876543218",eventName:"Tech Conference 2025",enrollmentDate:"2025-03-08",status:"pending"},{id:10,userName:"Amanda White",email:"amanda.w@email.com",phone:"+91 9876543219",eventName:"Medical Summit 2025",enrollmentDate:"2025-03-10",status:"confirmed"},{id:11,userName:"Kevin Lee",email:"kevin.l@email.com",phone:"+91 9876543220",eventName:"Rock Music Festival",enrollmentDate:"2025-03-12",status:"cancelled"},{id:12,userName:"Michelle Garcia",email:"michelle.g@email.com",phone:"+91 9876543221",eventName:"Comedy Night Live",enrollmentDate:"2025-03-15",status:"confirmed"}]),C=[...new Set(p.map(R=>R.eventName))],T=["confirmed","pending","cancelled"],E=R=>{window.confirm("Are you sure you want to delete this enrollment?")&&v(p.filter(z=>z.id!==R))},k=p.filter(R=>{const z=R.userName.toLowerCase().includes(s.toLowerCase())||R.email.toLowerCase().includes(s.toLowerCase()),U=a?R.status===a:!0,Y=u?R.eventName===u:!0;return z&&U&&Y}),O=Math.ceil(k.length/m),M=(e-1)*m,L=M+m,P=k.slice(M,L),H=(R,z)=>{R(z),t(1)},B=()=>{e>1&&t(e-1)},F=()=>{e<O&&t(e+1)};return r.jsxs("div",{children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsxs("div",{className:"relative w-80",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:s,onChange:R=>H(n,R.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),r.jsxs("select",{value:a,onChange:R=>H(l,R.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white",children:[r.jsx("option",{value:"",children:"All Status"}),T.map(R=>r.jsx("option",{value:R,className:"capitalize",children:R.charAt(0).toUpperCase()+R.slice(1)},R))]}),r.jsxs("select",{value:u,onChange:R=>H(f,R.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white",children:[r.jsx("option",{value:"",children:"All Events"}),C.map(R=>r.jsx("option",{value:R,children:R},R))]})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"User"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Event"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Phone"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Enrollment Date"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsx("tbody",{children:P.map(R=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:R.userName}),r.jsx("p",{className:"text-sm text-gray-500",children:R.email})]})}),r.jsx("td",{className:"px-6 py-4 text-gray-600",children:R.eventName}),r.jsx("td",{className:"px-6 py-4 text-gray-600",children:R.phone}),r.jsx("td",{className:"px-6 py-4 text-gray-600",children:R.enrollmentDate}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium capitalize ${x[R.status]}`,children:R.status})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-all",title:"View Details",children:r.jsx(Lr,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>E(R.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete",children:r.jsx(hr,{className:"h-5 w-5"})})]})})]},R.id))})]}),r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",k.length>0?M+1:0," to"," ",Math.min(L,k.length)," of ",k.length," enrollments"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:B,disabled:e===1,className:`p-2 rounded-lg transition-all ${e===1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,children:r.jsx(tw,{className:"h-5 w-5"})}),Array.from({length:O},(R,z)=>z+1).map(R=>r.jsx("button",{onClick:()=>t(R),className:`w-8 h-8 rounded-lg transition-all ${e===R?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-100"}`,children:R},R)),r.jsx("button",{onClick:F,disabled:e===O,className:`p-2 rounded-lg transition-all ${e===O?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,children:r.jsx(ep,{className:"h-5 w-5"})})]})]})]})]})}function tde(){return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Coupons"}),r.jsx("p",{className:"text-gray-600",children:"Manage your discount coupons here."})]})}const vc={LIST:"/app/auth/users",GET_BY_ID:e=>`/app/auth/users/${e}`,UPDATE:e=>`/app/auth/users/${e}`,DELETE:e=>`/app/auth/users/${e}`,RESTORE:e=>`/app/auth/users/${e}/restore`,PERMANENT_DELETE:e=>`/app/auth/users/${e}/permanent`},Ru={getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.search&&t.append("search",e.search),e.includeDeleted&&t.append("includeDeleted",e.includeDeleted);const s=t.toString(),n=s?`${vc.LIST}?${s}`:vc.LIST;console.log("[UserService] Fetching users with params:",e);const a=await Te(Ee.get(n));return a.success?console.log("[UserService] Fetched users:",a.data.users?.length):console.error("[UserService] Failed to fetch users:",a.message),a},getById:async e=>{console.log("[UserService] Fetching user by ID:",e);const t=await Te(Ee.get(vc.GET_BY_ID(e)));return t.success?console.log("[UserService] Fetched user:",t.data.user?.name):console.error("[UserService] Failed to fetch user:",t.message),t},update:async(e,t)=>{console.log("[UserService] Updating user:",e);const s=await Te(Ee.put(vc.UPDATE(e),t));return s.success?console.log("[UserService] User updated successfully"):console.error("[UserService] Failed to update user:",s.message),s},delete:async e=>{console.log("[UserService] Soft deleting user:",e);const t=await Te(Ee.delete(vc.DELETE(e)));return t.success?console.log("[UserService] User soft deleted successfully"):console.error("[UserService] Failed to delete user:",t.message),t},restore:async e=>{console.log("[UserService] Restoring user:",e);const t=await Te(Ee.post(vc.RESTORE(e)));return t.success?console.log("[UserService] User restored successfully"):console.error("[UserService] Failed to restore user:",t.message),t},permanentDelete:async e=>{console.log("[UserService] Permanently deleting user:",e);const t=await Te(Ee.delete(vc.PERMANENT_DELETE(e)));return t.success?console.log("[UserService] User permanently deleted"):console.error("[UserService] Failed to permanently delete user:",t.message),t}};function rde(e={}){const[t,s]=w.useState([]),[n,a]=w.useState({total:0,page:1,limit:10,totalPages:0}),[l,u]=w.useState({search:"",includeDeleted:!1,...e}),[f,m]=w.useState(!1),[x,p]=w.useState(null),v=w.useCallback(async(F=n.page)=>{m(!0),p(null);try{const R={page:F,limit:n.limit,...l.search&&{search:l.search},...l.includeDeleted&&{includeDeleted:l.includeDeleted}},z=await Ru.getAll(R);z.success?(s(z.data.users),a(z.data.pagination)):(p(z.message),s([]))}catch{p("Failed to fetch users"),s([])}finally{m(!1)}},[l,n.limit]),C=w.useCallback(async F=>{try{const R=await Ru.getById(F);return R.success?{success:!0,data:R.data.user}:{success:!1,error:R.message}}catch{return{success:!1,error:"Failed to fetch user details"}}},[]),T=w.useCallback(async(F,R)=>{m(!0),p(null);try{const z=await Ru.update(F,R);return z.success?(s(U=>U.map(Y=>Y._id===F?{...Y,...z.data.user}:Y)),{success:!0,data:z.data}):{success:!1,error:z.message,validationErrors:z.data?.errors}}catch{return{success:!1,error:"Failed to update user"}}finally{m(!1)}},[]),E=w.useCallback(async F=>{m(!0),p(null);try{const R=await Ru.delete(F);return R.success?(l.includeDeleted?s(z=>z.map(U=>U._id===F?{...U,isDeleted:!0}:U)):(s(z=>z.filter(U=>U._id!==F)),a(z=>({...z,total:z.total-1,totalPages:Math.ceil((z.total-1)/z.limit)}))),{success:!0}):{success:!1,error:R.message}}catch{return{success:!1,error:"Failed to delete user"}}finally{m(!1)}},[l.includeDeleted]),k=w.useCallback(async F=>{m(!0),p(null);try{const R=await Ru.restore(F);return R.success?(s(z=>z.map(U=>U._id===F?{...U,isDeleted:!1,deletedAt:null}:U)),{success:!0}):{success:!1,error:R.message}}catch{return{success:!1,error:"Failed to restore user"}}finally{m(!1)}},[]),O=w.useCallback(async F=>{m(!0),p(null);try{const R=await Ru.permanentDelete(F);return R.success?(s(z=>z.filter(U=>U._id!==F)),a(z=>({...z,total:z.total-1,totalPages:Math.ceil((z.total-1)/z.limit)})),{success:!0}):{success:!1,error:R.message}}catch{return{success:!1,error:"Failed to permanently delete user"}}finally{m(!1)}},[]),M=w.useCallback(F=>{u(R=>({...R,...F}))},[]),L=w.useCallback(()=>{u({search:"",includeDeleted:!1,...e})},[e]),P=w.useCallback(F=>{v(F)},[v]),H=w.useCallback(F=>{a(R=>({...R,limit:F}))},[]),B=w.useCallback(()=>{p(null)},[]);return w.useEffect(()=>{v(1)},[l]),{users:t,pagination:n,filters:l,isLoading:f,error:x,fetchUsers:v,getUserById:C,updateUser:T,deleteUser:E,restoreUser:k,permanentDeleteUser:O,updateFilters:M,resetFilters:L,changePage:P,changeLimit:H,clearError:B}}const Q8=(e=null)=>({name:e?.name||"",email:e?.email||"",phone:e?.phone||""}),sde=e=>{const t={};if(e.name.trim()?(e.name.length<2||e.name.length>100)&&(t.name="Name must be between 2 and 100 characters"):t.name="Name is required",e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(t.email="Invalid email format"):t.email="Email is required",!e.phone.trim())t.phone="Phone is required";else{const s=e.phone.replace(/[^0-9]/g,"");(s.length<10||s.length>15)&&(t.phone="Phone must be 10-15 digits")}return{isValid:Object.keys(t).length===0,errors:t}};function nde({isOpen:e,onClose:t,onSubmit:s,user:n=null,isLoading:a=!1,serverError:l=null,validationErrors:u=null}){const[f,m]=w.useState(Q8(n)),[x,p]=w.useState({});w.useEffect(()=>{e&&(m(Q8(n)),p({}))},[e,n]),w.useEffect(()=>{if(u&&Array.isArray(u)){const E={};u.forEach(k=>{k.field&&(E[k.field]=k.message)}),p(k=>({...k,...E}))}},[u]);const v=E=>{const{name:k,value:O}=E.target;m(M=>({...M,[k]:O})),x[k]&&p(M=>({...M,[k]:null}))},C=async E=>{E.preventDefault();const k=sde(f);if(!k.isValid){p(k.errors);return}const O={...f};O.phone=O.phone.replace(/[^0-9]/g,""),await s(O)},T=()=>{a||t()};return r.jsx(Lt,{isOpen:e,onClose:T,title:"Edit User",size:"md",closeOnOverlayClick:!a,children:r.jsxs("form",{onSubmit:C,children:[l&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:l}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:f.name,onChange:v,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${x.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter user name"}),x.name&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:x.name})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",id:"email",name:"email",value:f.email,onChange:v,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${x.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),x.email&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:x.email})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"tel",id:"phone",name:"phone",value:f.phone,onChange:v,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${x.phone?"border-red-500":"border-gray-300"}`,placeholder:"Enter phone number"}),x.phone&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:x.phone})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:T,disabled:a,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[a&&r.jsx(it,{className:"h-4 w-4 animate-spin"}),"Update User"]})]})]})})}const Kv=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",ade=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-";function ide({isOpen:e,onClose:t,user:s,isLoading:n=!1}){return!s&&!n?null:r.jsx(Lt,{isOpen:e,onClose:t,title:"User Details",size:"lg",children:n?r.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading user details..."})]}):s?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-4 pb-4 border-b border-gray-200",children:[r.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center shrink-0",children:r.jsx("span",{className:"text-xl font-semibold text-gray-800",children:s.name?.charAt(0)?.toUpperCase()||"?"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:s.name}),r.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:s.isDeleted&&r.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-xs font-medium flex items-center gap-1",children:[r.jsx(Mt,{className:"h-3 w-3"}),"Deleted"]})})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Contact Information"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(iw,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Email"})]}),r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.email||"-"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(ga,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Phone"})]}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.phone||"-"})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Activity"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(jr,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Last Login"})]}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.lastLogin?Kv(s.lastLogin):"Never"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(fr,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Joined"})]}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:Kv(s.createdAt)})]})]})]}),s.enrollments&&s.enrollments.length>0?r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Enrollments (",s.enrollments.length,")"]})}),r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:s.enrollments.map((a,l)=>r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center shrink-0",children:r.jsx(x3,{className:"h-4 w-4 text-gray-800"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.event?.name||a.event||"Unknown Event"}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Enrolled: ",ade(a.enrolledAt)]})]}),a.certificate&&r.jsx("a",{href:a.certificate,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-gray-800 hover:text-gray-900 hover:underline shrink-0",children:"View Certificate"})]},a._id||l))})]}):r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[r.jsx(x3,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-500",children:"No enrollments yet"})]}),s.isDeleted&&s.deletedAt&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[r.jsx(Mt,{className:"h-4 w-4 shrink-0"}),r.jsxs("p",{className:"text-sm",children:["This user was deleted on ",Kv(s.deletedAt)]})]})}),r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsx("button",{onClick:t,className:"w-full px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Close"})})]}):r.jsx("div",{className:"py-12 text-center text-gray-500",children:r.jsx("p",{children:"No user data available"})})})}function lde(){const{hasRole:e}=mn(),{users:t,pagination:s,filters:n,isLoading:a,error:l,getUserById:u,updateUser:f,deleteUser:m,restoreUser:x,permanentDeleteUser:p,updateFilters:v,changePage:C,clearError:T}=rde(),E=e(["SUPER_ADMIN","ADMIN"]),[k,O]=w.useState(!1),[M,L]=w.useState(!1),[P,H]=w.useState(!1),[B,F]=w.useState(!1),[R,z]=w.useState(!1),[U,Y]=w.useState(null),[$,G]=w.useState(null),[ee,ce]=w.useState(!1),[se,J]=w.useState(null),[ne,pe]=w.useState(null),[be,te]=w.useState(!1),[X,re]=w.useState("");w.useEffect(()=>{const ue=setTimeout(()=>{X!==n.search&&v({search:X})},300);return()=>clearTimeout(ue)},[X,n.search,v]);const ge=async ue=>{L(!0),ce(!0),G(null);const He=await u(ue._id);He.success?G(He.data):G(ue),ce(!1)},de=ue=>{E&&(Y(ue),J(null),pe(null),O(!0))},je=async ue=>{te(!0),J(null),pe(null);const He=await f(U._id,ue);He.success?(O(!1),Y(null)):(J(He.error),pe(He.validationErrors)),te(!1)},oe=ue=>{E&&(Y(ue),H(!0))},fe=async()=>{const ue=await m(U._id);H(!1),Y(null),ue.success||console.error("Delete failed:",ue.error)},qe=ue=>{E&&(Y(ue),F(!0))},Ne=async()=>{const ue=await x(U._id);F(!1),Y(null),ue.success||console.error("Restore failed:",ue.error)},Xe=ue=>{E&&(Y(ue),z(!0))},st=async()=>{const ue=await p(U._id);z(!1),Y(null),ue.success||console.error("Permanent delete failed:",ue.error)},Le=()=>{v({includeDeleted:!n.includeDeleted})},we=()=>{O(!1),Y(null),J(null),pe(null)},Ue=()=>{L(!1),G(null)};return r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Users Management"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"Manage and monitor user accounts"})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 border border-gray-200",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:X,onChange:ue=>re(ue.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:border-gray-800 outline-none text-sm"})]}),E&&r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:n.includeDeleted,onChange:Le,className:"w-4 h-4 text-gray-800 border-gray-300 rounded focus:ring-0"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Show deleted users"})]})]})}),l&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[r.jsx(np,{className:"h-5 w-5"}),r.jsx("span",{children:l})]}),r.jsx("button",{onClick:T,className:"text-red-700 hover:text-red-900",children:"Dismiss"})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200",children:a&&t.length===0?r.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[r.jsx(it,{className:"h-8 w-8 text-blue-600 animate-spin"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading users..."})]}):t.length===0?r.jsxs("div",{className:"py-12 text-center text-gray-500",children:[r.jsx("p",{children:"No users found"}),n.search&&r.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your search criteria"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden lg:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"User"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Phone"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Last Login"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsx("tbody",{children:t.map(ue=>r.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 transition-colors ${ue.isDeleted?"bg-red-50/50":""}`,children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-700 to-gray-800 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-white font-semibold text-sm",children:ue.name?.charAt(0)?.toUpperCase()||"?"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:ue.name}),r.jsx("p",{className:"text-sm text-gray-500 truncate",children:ue.email})]})]})}),r.jsx("td",{className:"px-6 py-4 text-gray-600",children:ue.phone||"-"}),r.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:ue.lastLogin?new Date(ue.lastLogin).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"Never"}),r.jsx("td",{className:"px-6 py-4",children:ue.isDeleted?r.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:"Deleted"}):r.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Active"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>ge(ue),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-all",title:"View Details",children:r.jsx(Lr,{className:"h-5 w-5"})}),E&&r.jsx(r.Fragment,{children:ue.isDeleted?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>qe(ue),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Restore User",children:r.jsx(Ro,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>Xe(ue),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Permanently Delete",children:r.jsx(hr,{className:"h-5 w-5"})})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>de(ue),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit",children:r.jsx(Js,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>oe(ue),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete",children:r.jsx(hr,{className:"h-5 w-5"})})]})})]})})]},ue._id))})]})}),r.jsx("div",{className:"lg:hidden divide-y divide-gray-200",children:t.map(ue=>r.jsxs("div",{className:`p-4 hover:bg-gray-50 transition-colors ${ue.isDeleted?"bg-red-50/50":""}`,children:[r.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-700 to-gray-800 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-white font-semibold",children:ue.name?.charAt(0)?.toUpperCase()||"?"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-semibold text-gray-900 truncate",children:ue.name}),r.jsx("p",{className:"text-sm text-gray-500 truncate",children:ue.email}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:ue.phone||"No phone"})]}),r.jsx("div",{children:ue.isDeleted?r.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:"Deleted"}):r.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Active"})})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("span",{className:"text-gray-500",children:["Last login:"," ",ue.lastLogin?new Date(ue.lastLogin).toLocaleDateString("en-IN",{day:"numeric",month:"short"}):"Never"]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>ge(ue),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-all",title:"View Details",children:r.jsx(Lr,{className:"h-5 w-5"})}),E&&r.jsx(r.Fragment,{children:ue.isDeleted?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>qe(ue),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Restore",children:r.jsx(Ro,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>Xe(ue),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Forever",children:r.jsx(hr,{className:"h-5 w-5"})})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>de(ue),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit",children:r.jsx(Js,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>oe(ue),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete",children:r.jsx(hr,{className:"h-5 w-5"})})]})})]})]})]},ue._id))}),r.jsx(Dr,{currentPage:s.page,totalPages:s.totalPages,totalItems:s.total,itemsPerPage:s.limit,onPageChange:C,itemLabel:"users"})]})}),r.jsx(nde,{isOpen:k,onClose:we,onSubmit:je,user:U,isLoading:be,serverError:se,validationErrors:ne}),r.jsx(ide,{isOpen:M,onClose:Ue,user:$,isLoading:ee}),r.jsx(en,{isOpen:P,onClose:()=>H(!1),onConfirm:fe,title:"Delete User",message:`Are you sure you want to delete "${U?.name}"? This action can be undone by restoring the user.`,confirmText:"Delete",variant:"danger",isLoading:a}),r.jsx(en,{isOpen:B,onClose:()=>F(!1),onConfirm:Ne,title:"Restore User",message:`Are you sure you want to restore "${U?.name}"?`,confirmText:"Restore",variant:"primary",isLoading:a}),r.jsx(en,{isOpen:R,onClose:()=>z(!1),onConfirm:st,title:"Permanently Delete User",message:`Are you sure you want to PERMANENTLY delete "${U?.name}"? This action CANNOT be undone and all user data will be lost forever.`,confirmText:"Delete Forever",variant:"danger",isLoading:a})]})}const ki={CREATE:"/web/auth/create",LIST:"/web/auth/admins",GET_BY_ID:e=>`/web/auth/admins/${e}`,UPDATE:e=>`/web/auth/admins/${e}`,DELETE:e=>`/web/auth/admins/${e}`,GET_ALLOWED_EVENTS:e=>`/web/auth/admins/${e}/allowed-events`,UPDATE_ALLOWED_EVENTS:e=>`/web/auth/admins/${e}/allowed-events`,ADD_ALLOWED_EVENT:(e,t)=>`/web/auth/admins/${e}/allowed-events/${t}`,REMOVE_ALLOWED_EVENT:(e,t)=>`/web/auth/admins/${e}/allowed-events/${t}`},Vh={create:async e=>{console.log("[AdminService] Creating admin:",e.username);const t=await Te(Ee.post(ki.CREATE,e));return t.success?console.log("[AdminService] Admin created successfully:",t.data.admin._id):console.error("[AdminService] Failed to create admin:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.status&&t.append("status",e.status),e.role&&t.append("role",e.role),e.search&&t.append("search",e.search);const s=t.toString(),n=s?`${ki.LIST}?${s}`:ki.LIST;console.log("[AdminService] Fetching admins with params:",e);const a=await Te(Ee.get(n));return a.success?console.log("[AdminService] Fetched admins:",a.data.admins?.length):console.error("[AdminService] Failed to fetch admins:",a.message),a},getById:async e=>{console.log("[AdminService] Fetching admin by ID:",e);const t=await Te(Ee.get(ki.GET_BY_ID(e)));return t.success?console.log("[AdminService] Fetched admin:",t.data.admin.username):console.error("[AdminService] Failed to fetch admin:",t.message),t},update:async(e,t)=>{console.log("[AdminService] Updating admin:",e);const s=await Te(Ee.put(ki.UPDATE(e),t));return s.success?console.log("[AdminService] Admin updated successfully"):console.error("[AdminService] Failed to update admin:",s.message),s},delete:async e=>{console.log("[AdminService] Deleting admin:",e);const t=await Te(Ee.delete(ki.DELETE(e)));return t.success?console.log("[AdminService] Admin deleted successfully"):console.error("[AdminService] Failed to delete admin:",t.message),t},getAllowedEvents:async e=>{console.log("[AdminService] Fetching allowed events for admin:",e);const t=await Te(Ee.get(ki.GET_ALLOWED_EVENTS(e)));return t.success?console.log("[AdminService] Fetched allowed events:",t.data.allowedEvents?.length):console.error("[AdminService] Failed to fetch allowed events:",t.message),t},updateAllowedEvents:async(e,t)=>{console.log("[AdminService] Updating allowed events for admin:",e);const s=await Te(Ee.put(ki.UPDATE_ALLOWED_EVENTS(e),{allowedEvents:t}));return s.success?console.log("[AdminService] Allowed events updated successfully"):console.error("[AdminService] Failed to update allowed events:",s.message),s},addAllowedEvent:async(e,t)=>{console.log("[AdminService] Adding event to allowed events:",t);const s=await Te(Ee.post(ki.ADD_ALLOWED_EVENT(e,t)));return s.success?console.log("[AdminService] Event added to allowed events"):console.error("[AdminService] Failed to add event:",s.message),s},removeAllowedEvent:async(e,t)=>{console.log("[AdminService] Removing event from allowed events:",t);const s=await Te(Ee.delete(ki.REMOVE_ALLOWED_EVENT(e,t)));return s.success?console.log("[AdminService] Event removed from allowed events"):console.error("[AdminService] Failed to remove event:",s.message),s}};function ode(e={}){const[t,s]=w.useState([]),[n,a]=w.useState({total:0,page:1,limit:10,totalPages:0}),[l,u]=w.useState({search:"",status:"",role:"",...e}),[f,m]=w.useState(!1),[x,p]=w.useState(null),v=w.useCallback(async(B=n.page)=>{m(!0),p(null);try{const F={page:B,limit:n.limit,...l.search&&{search:l.search},...l.status&&{status:l.status},...l.role&&{role:l.role}},R=await Vh.getAll(F);R.success?(s(R.data.admins),a(R.data.pagination)):(p(R.message),s([]))}catch{p("Failed to fetch admins"),s([])}finally{m(!1)}},[l,n.limit]),C=w.useCallback(async B=>{m(!0),p(null);try{const F=await Vh.create(B);return F.success?(await v(1),{success:!0,data:F.data}):{success:!1,error:F.message,validationErrors:F.error}}catch{return{success:!1,error:"Failed to create admin"}}finally{m(!1)}},[v]),T=w.useCallback(async(B,F)=>{m(!0),p(null);try{const R=await Vh.update(B,F);return R.success?(s(z=>z.map(U=>U._id===B?{...U,...R.data.admin}:U)),{success:!0,data:R.data}):{success:!1,error:R.message,validationErrors:R.error}}catch{return{success:!1,error:"Failed to update admin"}}finally{m(!1)}},[]),E=w.useCallback(async B=>{m(!0),p(null);try{const F=await Vh.delete(B);return F.success?(s(R=>R.filter(z=>z._id!==B)),a(R=>({...R,total:R.total-1,totalPages:Math.ceil((R.total-1)/R.limit)})),{success:!0}):{success:!1,error:F.message}}catch{return{success:!1,error:"Failed to delete admin"}}finally{m(!1)}},[]),k=w.useCallback(async B=>{try{const F=await Vh.getById(B);return F.success?{success:!0,data:F.data.admin}:{success:!1,error:F.message}}catch{return{success:!1,error:"Failed to fetch admin details"}}},[]),O=w.useCallback(B=>{u(F=>({...F,...B}))},[]),M=w.useCallback(()=>{u({search:"",status:"",role:"",...e})},[e]),L=w.useCallback(B=>{v(B)},[v]),P=w.useCallback(B=>{a(F=>({...F,limit:B}))},[]),H=w.useCallback(()=>{p(null)},[]);return w.useEffect(()=>{v(1)},[l]),{admins:t,pagination:n,filters:l,isLoading:f,error:x,fetchAdmins:v,createAdmin:C,updateAdmin:T,deleteAdmin:E,getAdminById:k,updateFilters:O,resetFilters:M,changePage:L,changeLimit:P,clearError:H}}function cde(e={}){const{autoFetch:t=!0,isLive:s}=e,[n,a]=w.useState([]),[l,u]=w.useState(!1),[f,m]=w.useState(null),[x,p]=w.useState(""),v=w.useRef(null),C=w.useRef({data:null,timestamp:null}),T=300*1e3,E=w.useCallback(async(L="",P=!0)=>{if(P&&!L&&C.current.data&&Date.now()-C.current.timestamp<T){a(C.current.data);return}u(!0),m(null);try{const H={};s!==void 0&&(H.isLive=s),L&&(H.search=L);const B=await Ra.getDropdownEvents(H);if(B.success){const F=B.data.events||[];a(F),L||(C.current={data:F,timestamp:Date.now()})}else m(B.message),a([])}catch{m("Failed to fetch events"),a([])}finally{u(!1)}},[s]),k=w.useCallback(L=>{if(p(L),v.current&&clearTimeout(v.current),!L.trim()){C.current.data?a(C.current.data):E("",!0);return}v.current=setTimeout(()=>{E(L,!1)},300)},[E]),O=w.useCallback(()=>{C.current={data:null,timestamp:null},E("",!1)},[E]),M=w.useCallback(()=>{m(null)},[]);return w.useEffect(()=>{t&&E("",!0)},[t,E]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{events:n,isLoading:l,error:f,searchQuery:x,fetchEvents:E,searchEvents:k,refreshEvents:O,clearError:M}}const ude=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",J8={TECHNOLOGY:"bg-blue-100 text-gray-900",MUSIC:"bg-purple-100 text-purple-700",SPORTS:"bg-green-100 text-green-700",BUSINESS:"bg-yellow-100 text-yellow-700",EDUCATION:"bg-indigo-100 text-indigo-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",DEFAULT:"bg-gray-100 text-gray-700"};function BR({selectedIds:e=[],onChange:t,disabled:s=!1,placeholder:n="Select events...",error:a}){const[l,u]=w.useState(!1),[f,m]=w.useState(""),x=w.useRef(null),p=w.useRef(null),{events:v,isLoading:C,error:T,searchEvents:E}=cde({autoFetch:!0}),k=w.useMemo(()=>{if(!f.trim())return v;const $=f.toLowerCase();return v.filter(G=>G.name.toLowerCase().includes($)||G.category?.toLowerCase().includes($))},[v,f]),O=w.useMemo(()=>v.filter($=>e.includes($._id)),[v,e]);w.useEffect(()=>{const $=G=>{x.current&&!x.current.contains(G.target)&&u(!1)};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]);const M=w.useCallback($=>{const G=$.target.value;m(G),E(G)},[E]),L=w.useCallback($=>{if(s)return;const G=e.includes($)?e.filter(ee=>ee!==$):[...e,$];t(G)},[e,t,s]),P=w.useCallback(($,G)=>{G.stopPropagation(),!s&&t(e.filter(ee=>ee!==$))},[e,t,s]),H=w.useCallback(()=>{if(s)return;const $=k.map(ee=>ee._id),G=[...new Set([...e,...$])];t(G)},[k,e,t,s]),B=w.useCallback(()=>{s||t([])},[t,s]),F=w.useCallback(()=>{s||(u(!0),setTimeout(()=>p.current?.focus(),0))},[s]),R=w.useCallback($=>{$.key==="Escape"&&u(!1)},[]),z=$=>J8[$]||J8.DEFAULT,U=a||T,Y=2;return r.jsxs("div",{ref:x,className:"relative",onKeyDown:R,children:[r.jsx("div",{onClick:F,className:`min-h-[42px] px-2 sm:px-3 py-2 border rounded-lg cursor-pointer transition-colors ${s?"bg-gray-100 cursor-not-allowed":l?"border-gray-800":U?"border-red-500":"border-gray-300 hover:border-gray-400"}`,children:r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[O.length>0?r.jsxs(r.Fragment,{children:[O.slice(0,Y).map($=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 sm:px-2 py-0.5 sm:py-1 bg-blue-100 text-blue-800 text-xs sm:text-sm rounded-md",children:[r.jsx("span",{className:"truncate max-w-[80px] sm:max-w-[120px]",children:$.name}),!s&&r.jsx("button",{type:"button",onClick:G=>P($._id,G),className:"hover:bg-blue-200 rounded p-0.5",children:r.jsx(Kr,{className:"h-3 w-3"})})]},$._id)),O.length>Y&&r.jsxs("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 bg-gray-100 text-gray-600 text-xs sm:text-sm rounded-md",children:["+",O.length-Y," more"]})]}):r.jsx("span",{className:"text-gray-400 text-sm",children:n}),r.jsx(fi,{className:`h-4 w-4 sm:h-5 sm:w-5 text-gray-400 ml-auto shrink-0 transition-transform ${l?"rotate-180":""}`})]})}),U&&r.jsxs("p",{className:"mt-1 text-xs sm:text-sm text-red-500 flex items-center gap-1",children:[r.jsx(Mt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),U]}),l&&!s&&r.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",children:[r.jsx("div",{className:"p-2 border-b border-gray-200",children:r.jsxs("div",{className:"relative",children:[r.jsx(Br,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{ref:p,type:"text",value:f,onChange:M,placeholder:"Search events...",className:"w-full pl-8 sm:pl-9 pr-4 py-2 border border-gray-300 rounded-md focus:border-gray-800 outline-none text-sm"}),C&&r.jsx(it,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 animate-spin"})]})}),r.jsxs("div",{className:"px-2 py-1.5 border-b border-gray-200 flex items-center justify-between bg-gray-50",children:[r.jsxs("span",{className:"text-xs text-gray-500",children:[e.length,"/",v.length]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:H,className:"text-xs text-gray-800 hover:text-black font-medium",children:"Select all"}),r.jsx("span",{className:"text-gray-300",children:"|"}),r.jsx("button",{type:"button",onClick:B,className:"text-xs text-red-600 hover:text-red-800 font-medium",children:"Clear"})]})]}),r.jsx("div",{className:"max-h-48 sm:max-h-60 overflow-y-auto",children:k.length===0?r.jsx("div",{className:"px-4 py-6 sm:py-8 text-center text-gray-500 text-sm",children:C?r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(it,{className:"h-5 w-5 sm:h-6 sm:w-6 animate-spin"}),r.jsx("span",{children:"Loading events..."})]}):f?r.jsxs("span",{children:['No events found for "',f,'"']}):r.jsx("span",{children:"No events available"})}):k.map($=>{const G=e.includes($._id);return r.jsxs("div",{onClick:()=>L($._id),className:`px-2 sm:px-3 py-2 sm:py-2.5 cursor-pointer flex items-start gap-2 sm:gap-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 ${G?"bg-blue-50":""}`,children:[r.jsx("div",{className:`shrink-0 w-4 h-4 sm:w-5 sm:h-5 rounded border-2 flex items-center justify-center mt-0.5 ${G?"bg-gray-800 border-gray-800":"border-gray-300"}`,children:G&&r.jsx(Cn,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[r.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:$.name}),$.isLive&&r.jsx("span",{className:"shrink-0 px-1 sm:px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Live"})]}),r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mt-1 flex-wrap",children:[$.category&&r.jsx("span",{className:`px-1 sm:px-1.5 py-0.5 text-xs rounded ${z($.category)}`,children:$.category}),$.startDate&&r.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-500",children:[r.jsx(fr,{className:"h-3 w-3"}),ude($.startDate)]})]})]})]},$._id)})}),e.length>0&&r.jsx("div",{className:"px-2 sm:px-3 py-2 border-t border-gray-200 bg-gray-50",children:r.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:e.length})," event",e.length!==1?"s":""," selected"]})})]})]})}const dde=[{value:"MANAGEMENT_STAFF",label:"Management Staff"},{value:"ADMIN",label:"Admin"},{value:"SUPER_ADMIN",label:"Super Admin"}],hde=[{value:"ACTIVATED",label:"Active"},{value:"DEACTIVATED",label:"Inactive"}],fde=[{value:"events",label:"Events"},{value:"enrollments",label:"Enrollments"},{value:"payments",label:"Payments"},{value:"users",label:"Users"},{value:"coupons",label:"Coupons"}],mde=e=>!e||!Array.isArray(e)?[]:e.map(t=>typeof t=="string"?t:t._id).filter(Boolean),eO=(e=null)=>({name:e?.name||"",username:e?.username||"",email:e?.email||"",phone:e?.phone||"",password:"",role:e?.role||"MANAGEMENT_STAFF",status:e?.status||"ACTIVATED",access:e?.access||[],allowedEvents:mde(e?.allowedEvents),maxCashTicketsAllowed:e?.maxCashTicketsAllowed||""}),gde=(e,t=!1)=>{const s={};if(e.name.trim()?(e.name.length<2||e.name.length>100)&&(s.name="Name must be between 2 and 100 characters"):s.name="Name is required",e.username.trim()?e.username.length<3||e.username.length>50?s.username="Username must be between 3 and 50 characters":/^[a-zA-Z0-9_]+$/.test(e.username)||(s.username="Username can only contain letters, numbers, and underscores"):s.username="Username is required",e.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&(s.email="Invalid email format"),e.phone.trim()){const n=e.phone.replace(/[^0-9]/g,"");n.length>0&&(n.length<10||n.length>15)&&(s.phone="Phone must be 10-15 digits")}if(t||(e.password?e.password.length<8&&(s.password="Password must be at least 8 characters"):s.password="Password is required"),e.maxCashTicketsAllowed!==""&&e.maxCashTicketsAllowed!==null&&e.maxCashTicketsAllowed!==void 0){const n=parseInt(e.maxCashTicketsAllowed,10);isNaN(n)?s.maxCashTicketsAllowed="Must be a valid number":n<0&&(s.maxCashTicketsAllowed="Cannot be negative")}return{isValid:Object.keys(s).length===0,errors:s}};function xde({isOpen:e,onClose:t,onSubmit:s,admin:n=null,isLoading:a=!1,serverError:l=null,validationErrors:u=null}){const f=!!n,[m,x]=w.useState(eO(n)),[p,v]=w.useState({}),[C,T]=w.useState(!1);w.useEffect(()=>{e&&(x(eO(n)),v({}))},[e,n]),w.useEffect(()=>{if(u&&Array.isArray(u)){const B={};u.forEach(F=>{F.field&&(B[F.field]=F.message)}),v(F=>({...F,...B}))}},[u]);const E=B=>{const{name:F,value:R}=B.target;x(z=>{const U={...z,[F]:R};return F==="role"&&R==="SUPER_ADMIN"&&(U.allowedEvents=[]),F==="role"&&(R==="ADMIN"||R==="SUPER_ADMIN")&&(U.maxCashTicketsAllowed=""),U}),p[F]&&v(z=>({...z,[F]:null}))},k=m.role!=="SUPER_ADMIN",O=m.role==="MANAGEMENT_STAFF",M=B=>{x(F=>({...F,access:F.access.includes(B)?F.access.filter(R=>R!==B):[...F.access,B]}))},L=B=>{x(F=>({...F,allowedEvents:B}))},P=async B=>{B.preventDefault();const F=gde(m,f);if(!F.isValid){v(F.errors);return}const R={...m};R.phone=R.phone.replace(/[^0-9]/g,""),f&&!R.password&&delete R.password,f||delete R.status,R.maxCashTicketsAllowed===""||R.maxCashTicketsAllowed===null||R.maxCashTicketsAllowed===void 0?delete R.maxCashTicketsAllowed:R.maxCashTicketsAllowed=parseInt(R.maxCashTicketsAllowed,10),await s(R)},H=()=>{a||t()};return r.jsx(Lt,{isOpen:e,onClose:H,title:f?"Edit Admin":"Create New Admin",size:"xl",closeOnOverlayClick:!a,children:r.jsxs("form",{onSubmit:P,children:[l&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:l}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:m.name,onChange:E,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter admin name"}),p.name&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.name})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:["Username ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"username",name:"username",value:m.username,onChange:E,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.username?"border-red-500":"border-gray-300"}`,placeholder:"Enter username"}),p.username&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.username})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:["Email"," ",r.jsx("span",{className:"text-gray-400 text-xs ml-1",children:"(optional)"})]}),r.jsx("input",{type:"email",id:"email",name:"email",value:m.email,onChange:E,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),p.email&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.email})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone"," ",r.jsx("span",{className:"text-gray-400 text-xs ml-1",children:"(optional)"})]}),r.jsx("input",{type:"tel",id:"phone",name:"phone",value:m.phone,onChange:E,disabled:a,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.phone?"border-red-500":"border-gray-300"}`,placeholder:"Enter phone number"}),p.phone&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.phone})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",!f&&r.jsx("span",{className:"text-red-500",children:"*"}),f&&r.jsx("span",{className:"text-gray-400 text-xs ml-1",children:"(leave empty to keep current)"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:C?"text":"password",id:"password",name:"password",value:m.password,onChange:E,disabled:a,className:`w-full px-3 py-2 pr-10 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.password?"border-red-500":"border-gray-300"}`,placeholder:f?"New password (optional)":"Enter password"}),r.jsx("button",{type:"button",onClick:()=>T(!C),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:C?r.jsx(ok,{className:"h-4 w-4 sm:h-5 sm:w-5"}):r.jsx(Lr,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}),p.password&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.password})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),r.jsx("select",{id:"role",name:"role",value:m.role,onChange:E,disabled:a,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100 text-sm sm:text-base",children:dde.map(B=>r.jsx("option",{value:B.value,children:B.label},B.value))})]}),f&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsx("select",{id:"status",name:"status",value:m.status,onChange:E,disabled:a,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100 text-sm sm:text-base",children:hde.map(B=>r.jsx("option",{value:B.value,children:B.label},B.value))})]}),O&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"maxCashTicketsAllowed",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Cash Tickets Allowed"}),r.jsx("input",{type:"number",id:"maxCashTicketsAllowed",name:"maxCashTicketsAllowed",value:m.maxCashTicketsAllowed,onChange:E,disabled:a,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${p.maxCashTicketsAllowed?"border-red-500":"border-gray-300"}`,placeholder:"Enter max tickets or leave empty"}),p.maxCashTicketsAllowed&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.maxCashTicketsAllowed}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Limit the total number of cash tickets this admin can generate. Leave empty for unlimited."}),r.jsx("p",{className:"text-gray-400 text-xs",children:"optional, leave empty for unlimited"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Access Permissions"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:fde.map(B=>r.jsxs("label",{className:`inline-flex items-center px-3 py-2 rounded-lg border cursor-pointer transition-colors ${m.access.includes(B.value)?"bg-blue-50 border-blue-500 text-gray-900":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"} ${a?"opacity-50 cursor-not-allowed":""}`,children:[r.jsx("input",{type:"checkbox",checked:m.access.includes(B.value),onChange:()=>M(B.value),disabled:a,className:"sr-only"}),r.jsx("span",{className:"text-sm",children:B.label})]},B.value))})]}),k&&r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Allowed Events",r.jsx("span",{className:"text-gray-400 text-xs ml-2 font-normal",children:"(Events this admin can access)"})]}),r.jsx(BR,{selectedIds:m.allowedEvents,onChange:L,disabled:a,placeholder:"Search and select events..."})]}),!k&&r.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-gray-900",children:"Super Admins have access to all events by default."})})]}),r.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:H,disabled:a,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[a&&r.jsx(it,{className:"h-4 w-4 animate-spin"}),f?"Update Admin":"Create Admin"]})]})]})})}const pde={SUPER_ADMIN:{label:"Super Admin",color:"bg-red-100 text-red-700"},ADMIN:{label:"Admin",color:"bg-purple-100 text-purple-700"},MANAGEMENT_STAFF:{label:"Management",color:"bg-blue-100 text-blue-700"}},yde={ACTIVATED:{label:"Active",color:"bg-green-100 text-green-700"},DEACTIVATED:{label:"Inactive",color:"bg-gray-100 text-gray-700"}},bde=[{value:"",label:"All Roles"},{value:"SUPER_ADMIN",label:"Super Admin"},{value:"ADMIN",label:"Admin"},{value:"MANAGEMENT_STAFF",label:"Management Staff"}],vde=[{value:"",label:"All Status"},{value:"ACTIVATED",label:"Active"},{value:"DEACTIVATED",label:"Inactive"}];function Nde(){const{admin:e}=mn(),{admins:t,pagination:s,filters:n,isLoading:a,error:l,fetchAdmins:u,createAdmin:f,updateAdmin:m,deleteAdmin:x,updateFilters:p,changePage:v,clearError:C}=ode(),[T,E]=w.useState(!1),[k,O]=w.useState(!1),[M,L]=w.useState(null),[P,H]=w.useState(!1),[B,F]=w.useState(null),[R,z]=w.useState(null),[U,Y]=w.useState(n.search),$=w.useCallback(fe=>{Y(fe);const qe=setTimeout(()=>{p({search:fe})},300);return()=>clearTimeout(qe)},[p]),G=w.useCallback(fe=>{p({role:fe})},[p]),ee=w.useCallback(fe=>{p({status:fe})},[p]),ce=w.useCallback(()=>{L(null),F(null),z(null),E(!0)},[]),se=w.useCallback(fe=>{L(fe),F(null),z(null),E(!0)},[]),J=w.useCallback(()=>{E(!1),L(null),F(null),z(null)},[]),ne=w.useCallback(fe=>{L(fe),O(!0)},[]),pe=w.useCallback(()=>{O(!1),L(null)},[]),be=w.useCallback(async fe=>{H(!0),F(null),z(null);try{let qe;M?qe=await m(M._id,fe):qe=await f(fe),qe.success?J():(F(qe.error),qe.validationErrors&&z(qe.validationErrors))}catch{F("An unexpected error occurred")}finally{H(!1)}},[M,f,m,J]),te=w.useCallback(async()=>{if(M){H(!0);try{const fe=await x(M._id);fe.success?pe():alert(fe.error||"Failed to delete admin")}catch{alert("An unexpected error occurred")}finally{H(!1)}}},[M,x,pe]),X=w.useCallback(fe=>{if(!fe)return"-";const qe=fe.replace(/\D/g,"");return qe.length===10?`+91 ${qe.slice(0,5)} ${qe.slice(5)}`:fe},[]),re=w.useCallback(fe=>pde[fe]||{label:fe,color:"bg-gray-100 text-gray-700"},[]),ge=w.useCallback(fe=>yde[fe]||{label:fe,color:"bg-gray-100 text-gray-700"},[]),de=w.useCallback(fe=>e?._id!==fe._id,[e]),je=w.useMemo(()=>{if(a||l||t.length>0)return null;const fe=n.search||n.role||n.status;return r.jsx("tr",{children:r.jsx("td",{colSpan:"5",className:"px-4 sm:px-6 py-12 text-center",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(Mt,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-300 mb-4"}),r.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-1",children:fe?"No admins found":"No admins yet"}),r.jsx("p",{className:"text-sm text-gray-500 mb-4 px-4",children:fe?"Try adjusting your search or filter criteria":"Get started by creating a new admin"}),!fe&&r.jsxs("button",{onClick:ce,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center gap-2 text-sm",children:[r.jsx(kr,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Create Admin"]})]})})})},[a,l,t.length,n,ce]),oe=fe=>{const qe=re(fe.role),Ne=ge(fe.status),Xe=e?._id===fe._id;return r.jsxs("div",{className:`p-4 border-b border-gray-100 ${Xe?"bg-blue-50/30":""}`,children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-purple-600 font-medium",children:fe.name?.charAt(0)?.toUpperCase()||"?"})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsxs("p",{className:"font-medium text-gray-900 truncate",children:[fe.name,Xe&&r.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(You)"})]}),r.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",fe.username]})]})]}),r.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[r.jsx("button",{onClick:()=>se(fe),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit",children:r.jsx(Js,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>ne(fe),disabled:!de(fe),className:`p-2 rounded-lg transition-all ${de(fe)?"text-red-600 hover:bg-red-50":"text-gray-300 cursor-not-allowed"}`,title:de(fe)?"Delete":"Can't delete your own account",children:r.jsx(hr,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${qe.color}`,children:qe.label}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ne.color}`,children:Ne.label}),r.jsx("span",{className:"text-xs text-gray-500",children:X(fe.phone)}),fe.role==="MANAGEMENT_STAFF"&&fe.maxCashTicketsAllowed!=null&&r.jsxs("span",{className:"text-xs text-gray-500",children:["Max Tickets: ",fe.maxCashTicketsAllowed]})]})]},fe._id)};return r.jsxs("div",{className:"px-2 sm:px-0",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4 sm:mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Admin Management"}),r.jsx("p",{className:"text-sm text-gray-500 mt-0.5 sm:mt-1",children:"Manage admin users and their permissions"})]}),r.jsxs("button",{onClick:ce,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center justify-center gap-2 text-sm sm:text-base w-full sm:w-auto",children:[r.jsx(kr,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Create Admin"]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-3 sm:p-4 mb-4 sm:mb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-stretch sm:items-center gap-3 sm:gap-4",children:[r.jsxs("div",{className:"relative flex-1 sm:flex-none sm:w-64 lg:w-80",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by name, username, or phone...",value:U,onChange:fe=>$(fe.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none text-sm"})]}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[r.jsx("select",{value:n.role,onChange:fe=>G(fe.target.value),className:"flex-1 sm:flex-none px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white text-sm",children:bde.map(fe=>r.jsx("option",{value:fe.value,children:fe.label},fe.value))}),r.jsx("select",{value:n.status,onChange:fe=>ee(fe.target.value),className:"flex-1 sm:flex-none px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white text-sm",children:vde.map(fe=>r.jsx("option",{value:fe.value,children:fe.label},fe.value))}),r.jsx("button",{onClick:()=>u(s.page),disabled:a,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 flex-shrink-0",title:"Refresh",children:r.jsx(qs,{className:`h-4 w-4 sm:h-5 sm:w-5 ${a?"animate-spin":""}`})})]})]})}),l&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 sm:p-4 mb-4 sm:mb-6 flex items-center gap-3",children:[r.jsx(Mt,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-red-700 flex-1",children:l}),r.jsx("button",{onClick:C,className:"text-red-500 hover:text-red-700 text-sm font-medium flex-shrink-0",children:"Dismiss"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600",children:"Admin"}),r.jsx("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600",children:"Phone"}),r.jsx("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600",children:"Role"}),r.jsx("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-right px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsxs("tbody",{children:[a&&t.length===0&&r.jsx("tr",{children:r.jsxs("td",{colSpan:"5",className:"px-6 py-12 text-center",children:[r.jsx(it,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500",children:"Loading admins..."})]})}),je,t.map(fe=>{const qe=re(fe.role),Ne=ge(fe.status),Xe=e?._id===fe._id;return r.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 ${Xe?"bg-blue-50/30":""}`,children:[r.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-purple-600 font-medium text-sm lg:text-base",children:fe.name?.charAt(0)?.toUpperCase()||"?"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsxs("p",{className:"font-medium text-gray-900 text-sm lg:text-base truncate",children:[fe.name,Xe&&r.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(You)"})]}),r.jsxs("p",{className:"text-xs lg:text-sm text-gray-500 truncate",children:["@",fe.username]})]})]})}),r.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4 text-sm text-gray-600",children:X(fe.phone)}),r.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4",children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:`px-2 lg:px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap ${qe.color} inline-flex items-center w-fit`,children:qe.label}),fe.role==="MANAGEMENT_STAFF"&&fe.maxCashTicketsAllowed!=null&&r.jsxs("span",{className:"text-xs text-gray-500",children:["Max: ",fe.maxCashTicketsAllowed," tickets"]})]})}),r.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4",children:r.jsx("span",{className:`px-2 lg:px-3 py-1 rounded-full text-xs font-medium ${Ne.color}`,children:Ne.label})}),r.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-1 lg:gap-2",children:[r.jsx("button",{onClick:()=>se(fe),className:"p-1.5 lg:p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit",children:r.jsx(Js,{className:"h-4 w-4 lg:h-5 lg:w-5"})}),r.jsx("button",{onClick:()=>ne(fe),disabled:!de(fe),className:`p-1.5 lg:p-2 rounded-lg transition-all ${de(fe)?"text-red-600 hover:bg-red-50":"text-gray-300 cursor-not-allowed"}`,title:de(fe)?"Delete":"Can't delete your own account",children:r.jsx(hr,{className:"h-4 w-4 lg:h-5 lg:w-5"})})]})})]},fe._id)})]})]})}),r.jsxs("div",{className:"md:hidden",children:[a&&t.length===0&&r.jsxs("div",{className:"px-4 py-12 text-center",children:[r.jsx(it,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"Loading admins..."})]}),!a&&!l&&t.length===0&&r.jsxs("div",{className:"px-4 py-12 text-center",children:[r.jsx(Mt,{className:"h-10 w-10 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-base font-medium text-gray-900 mb-1",children:n.search||n.role||n.status?"No admins found":"No admins yet"}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:n.search||n.role||n.status?"Try adjusting your search or filter criteria":"Get started by creating a new admin"}),!(n.search||n.role||n.status)&&r.jsxs("button",{onClick:ce,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors inline-flex items-center gap-2 text-sm",children:[r.jsx(kr,{className:"h-4 w-4"}),"Create Admin"]})]}),t.map(oe)]}),s.totalPages>0&&r.jsx(Dr,{currentPage:s.page,totalPages:s.totalPages,totalItems:s.total,itemsPerPage:s.limit,onPageChange:v,itemLabel:"admins"})]}),r.jsx(xde,{isOpen:T,onClose:J,onSubmit:be,admin:M,isLoading:P,serverError:B,validationErrors:R}),r.jsx(en,{isOpen:k,onClose:pe,onConfirm:te,title:"Delete Admin",message:`Are you sure you want to delete "${M?.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:P})]})}function wde(){return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Payment History"}),r.jsx("p",{className:"text-gray-600",children:"View payment history here."})]})}const _i={BASE:"/web/offline-cash",ALLOWED_EVENTS:"/web/offline-cash/allowed-events",GET_BY_ID:e=>`/web/offline-cash/${e}`,DELETE:e=>`/web/offline-cash/${e}`,EVENT_ENROLLMENTS:e=>`/web/offline-cash/event/${e}/enrollments`,DIRECT_TICKET:"/web/offline-cash/direct-ticket",DIRECT_TICKET_BULK:"/web/offline-cash/direct-ticket-bulk"},Do={getAllowedEvents:async(e={})=>{const t=new URLSearchParams;e.search&&t.append("search",e.search),e.isLive!==void 0&&t.append("isLive",e.isLive);const s=t.toString(),n=s?`${_i.ALLOWED_EVENTS}?${s}`:_i.ALLOWED_EVENTS;console.log("[OfflineCashService] Fetching allowed events with params:",e);const a=await Te(Ee.get(n));return a.success?console.log("[OfflineCashService] Fetched allowed events:",a.data.events?.length):console.error("[OfflineCashService] Failed to fetch allowed events:",a.message),a},create:async e=>{console.log("[OfflineCashService] Creating offline cash record for phone:",e.phone);const t=await Te(Ee.post(_i.BASE,e));return t.success?console.log("[OfflineCashService] Record created successfully, link:",t.data.link):console.error("[OfflineCashService] Failed to create record:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.eventId&&t.append("eventId",e.eventId),e.redeemed!==void 0&&e.redeemed!==""&&t.append("redeemed",e.redeemed),e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit);const s=t.toString(),n=s?`${_i.BASE}?${s}`:_i.BASE;console.log("[OfflineCashService] Fetching offline cash records with params:",e);const a=await Te(Ee.get(n));return a.success?console.log("[OfflineCashService] Fetched records:",a.data.records?.length):console.error("[OfflineCashService] Failed to fetch records:",a.message),a},getById:async e=>{console.log("[OfflineCashService] Fetching record by ID:",e);const t=await Te(Ee.get(_i.GET_BY_ID(e)));return t.success?console.log("[OfflineCashService] Fetched record:",t.data._id):console.error("[OfflineCashService] Failed to fetch record:",t.message),t},delete:async e=>{console.log("[OfflineCashService] Deleting record:",e);const t=await Te(Ee.delete(_i.DELETE(e)));return t.success?console.log("[OfflineCashService] Record deleted successfully"):console.error("[OfflineCashService] Failed to delete record:",t.message),t},getEventEnrollments:async(e,t={})=>{const s=new URLSearchParams;t.status&&s.append("status",t.status),t.page&&s.append("page",t.page),t.limit&&s.append("limit",t.limit);const n=s.toString(),a=_i.EVENT_ENROLLMENTS(e),l=n?`${a}?${n}`:a;console.log("[OfflineCashService] Fetching event enrollments:",e,t);const u=await Te(Ee.get(l));return u.success?console.log("[OfflineCashService] Fetched enrollments:",u.data.enrollments?.length):console.error("[OfflineCashService] Failed to fetch enrollments:",u.message),u},createDirectTicket:async e=>{console.log("[OfflineCashService] Creating direct ticket for phone:",e.phone);const t=await Te(Ee.post(_i.DIRECT_TICKET,e));return t.success?console.log("[OfflineCashService] Direct ticket created:",t.data.enrollment?.id):console.error("[OfflineCashService] Failed to create direct ticket:",t.message),t},createDirectTicketBulk:async(e,t)=>{console.log("[OfflineCashService] Creating bulk direct tickets for event:",t.eventId);const s=new FormData;s.append("file",e),s.append("eventId",t.eventId),t.priceCharged!==void 0&&t.priceCharged!==""&&s.append("priceCharged",t.priceCharged),t.notes&&s.append("notes",t.notes);try{const n=await Ee.post(_i.DIRECT_TICKET_BULK,s,{headers:{"Content-Type":"multipart/form-data"}});return console.log("[OfflineCashService] Bulk direct tickets result:",{total:n.data?.data?.summary?.total,successful:n.data?.data?.summary?.successful,rejected:n.data?.data?.summary?.rejected}),{success:!0,data:n.data.data,message:n.data.message,error:null,status:n.data.status||n.status}}catch(n){const a={success:!1,data:null,message:n.response?.data?.message||"Failed to process bulk direct tickets",error:n.response?.data?.error||n.message,status:n.response?.status||500};return console.error("[OfflineCashService] Bulk direct tickets failed:",a),a}}};function jde(e={}){const[t,s]=w.useState([]),[n,a]=w.useState({total:0,page:1,limit:20,totalPages:0}),[l,u]=w.useState({eventId:"",redeemed:"",...e}),[f,m]=w.useState(!1),[x,p]=w.useState(null),[v,C]=w.useState([]),[T,E]=w.useState(!1),[k,O]=w.useState(null),M=w.useRef(null),L=w.useCallback(async(se="")=>{E(!0),O(null);try{const J={};se&&(J.search=se);const ne=await Do.getAllowedEvents(J);ne.success?C(ne.data.events||[]):(O(ne.message),C([]))}catch{O("Failed to fetch allowed events"),C([])}finally{E(!1)}},[]),P=w.useCallback(se=>{M.current&&clearTimeout(M.current),M.current=setTimeout(()=>{L(se)},300)},[L]),H=w.useCallback(async(se=n.page)=>{m(!0),p(null);try{const J={page:se,limit:n.limit,...l.eventId&&{eventId:l.eventId},...l.redeemed!==""&&{redeemed:l.redeemed}},ne=await Do.getAll(J);ne.success?(s(ne.data.records||[]),a({total:ne.data.pagination?.total||0,page:ne.data.pagination?.page||1,limit:ne.data.pagination?.limit||20,totalPages:ne.data.pagination?.pages||0})):(p(ne.message),s([]))}catch{p("Failed to fetch cash ticket records"),s([])}finally{m(!1)}},[l,n.limit]),B=w.useCallback(async se=>{m(!0),p(null);try{const J=await Do.create(se);return J.success?(await H(1),{success:!0,data:J.data}):J.status===409&&J.error?.existingLink?{success:!1,error:J.message,existingLink:J.error.existingLink,signature:J.error.signature}:{success:!1,error:J.message,validationErrors:J.error}}catch{return{success:!1,error:"Failed to create cash ticket"}}finally{m(!1)}},[H]),F=w.useCallback(async se=>{try{const J=await Do.getById(se);return J.success?{success:!0,data:J.data}:{success:!1,error:J.message}}catch{return{success:!1,error:"Failed to fetch record details"}}},[]),R=w.useCallback(async se=>{m(!0),p(null);try{const J=await Do.delete(se);return J.success?(s(ne=>ne.filter(pe=>pe._id!==se)),a(ne=>({...ne,total:ne.total-1,totalPages:Math.ceil((ne.total-1)/ne.limit)})),{success:!0}):{success:!1,error:J.message}}catch{return{success:!1,error:"Failed to delete record"}}finally{m(!1)}},[]),z=w.useCallback(async(se,J={})=>{try{const ne=await Do.getEventEnrollments(se,J);return ne.success?{success:!0,data:{enrollments:ne.data.enrollments||[],pagination:ne.data.pagination}}:{success:!1,error:ne.message}}catch{return{success:!1,error:"Failed to fetch enrollments"}}},[]),U=w.useCallback(se=>{u(J=>({...J,...se}))},[]),Y=w.useCallback(()=>{u({eventId:"",redeemed:"",...e})},[e]),$=w.useCallback(se=>{H(se)},[H]),G=w.useCallback(se=>{a(J=>({...J,limit:se}))},[]),ee=w.useCallback(()=>{p(null)},[]),ce=w.useCallback(()=>{O(null)},[]);return w.useEffect(()=>{H(1)},[l]),w.useEffect(()=>{L()},[L]),w.useEffect(()=>()=>{M.current&&clearTimeout(M.current)},[]),{records:t,pagination:n,filters:l,isLoading:f,error:x,allowedEvents:v,eventsLoading:T,eventsError:k,fetchRecords:H,createRecord:B,getRecordById:F,deleteRecord:R,getEventEnrollments:z,fetchAllowedEvents:L,searchEvents:P,updateFilters:U,resetFilters:Y,changePage:$,changeLimit:G,clearError:ee,clearEventsError:ce}}const Sde=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",Cde=e=>e==null?"":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),tO={TECHNOLOGY:"bg-blue-100 text-gray-900",MUSIC:"bg-purple-100 text-purple-700",SPORTS:"bg-green-100 text-green-700",BUSINESS:"bg-yellow-100 text-yellow-700",EDUCATION:"bg-indigo-100 text-indigo-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",DEFAULT:"bg-gray-100 text-gray-700"};function kS({selectedId:e="",onChange:t,events:s=[],isLoading:n=!1,onSearch:a,disabled:l=!1,placeholder:u="Select an event...",error:f}){const[m,x]=w.useState(!1),[p,v]=w.useState(""),[C,T]=w.useState(-1),E=w.useRef(null),k=w.useRef(null),O=w.useRef(null),M=w.useMemo(()=>{if(!p.trim())return s;const U=p.toLowerCase();return s.filter(Y=>Y.name.toLowerCase().includes(U)||Y.category?.toLowerCase().includes(U))},[s,p]),L=w.useMemo(()=>s.find(U=>U._id===e),[s,e]);w.useEffect(()=>{const U=Y=>{E.current&&!E.current.contains(Y.target)&&(x(!1),v(""),T(-1))};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]);const P=w.useCallback(U=>{const Y=U.target.value;v(Y),T(-1),a&&a(Y)},[a]),H=w.useCallback(U=>{l||(t(U._id,U),x(!1),v(""),T(-1))},[t,l]),B=w.useCallback(U=>{U.stopPropagation(),!l&&t("",null)},[t,l]),F=w.useCallback(()=>{l||(x(!0),setTimeout(()=>k.current?.focus(),0))},[l]),R=w.useCallback(U=>{if(!m){(U.key==="Enter"||U.key===" "||U.key==="ArrowDown")&&(U.preventDefault(),x(!0));return}switch(U.key){case"Escape":x(!1),v(""),T(-1);break;case"ArrowDown":U.preventDefault(),T(Y=>Y<M.length-1?Y+1:Y);break;case"ArrowUp":U.preventDefault(),T(Y=>Y>0?Y-1:0);break;case"Enter":U.preventDefault(),C>=0&&M[C]&&H(M[C]);break}},[m,M,C,H]);w.useEffect(()=>{if(C>=0&&O.current){const U=O.current.children[C];U&&U.scrollIntoView({block:"nearest"})}},[C]);const z=U=>tO[U]||tO.DEFAULT;return r.jsxs("div",{ref:E,className:"relative",onKeyDown:R,children:[r.jsx("div",{onClick:F,className:`min-h-[42px] px-2 sm:px-3 py-2 border rounded-lg cursor-pointer transition-colors ${l?"bg-gray-100 cursor-not-allowed":m?"border-gray-800":f?"border-red-500":"border-gray-300 hover:border-gray-400"}`,tabIndex:l?-1:0,role:"combobox","aria-expanded":m,"aria-haspopup":"listbox",children:r.jsxs("div",{className:"flex items-center gap-2",children:[L?r.jsxs("div",{className:"flex-1 flex items-center gap-2 min-w-0",children:[r.jsx("span",{className:"truncate text-sm font-medium text-gray-900",children:L.name}),L.isLive&&r.jsx("span",{className:"shrink-0 px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Live"}),!l&&r.jsx("button",{type:"button",onClick:B,className:"shrink-0 p-0.5 hover:bg-gray-200 rounded",children:r.jsx(Kr,{className:"h-4 w-4 text-gray-500"})})]}):r.jsx("span",{className:"flex-1 text-gray-400 text-sm",children:u}),r.jsx(fi,{className:`h-4 w-4 sm:h-5 sm:w-5 text-gray-400 shrink-0 transition-transform ${m?"rotate-180":""}`})]})}),f&&r.jsxs("p",{className:"mt-1 text-xs sm:text-sm text-red-500 flex items-center gap-1",children:[r.jsx(Mt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),f]}),m&&!l&&r.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",children:[r.jsx("div",{className:"p-2 border-b border-gray-200",children:r.jsxs("div",{className:"relative",children:[r.jsx(Br,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{ref:k,type:"text",value:p,onChange:P,placeholder:"Search events...",className:"w-full pl-8 sm:pl-9 pr-4 py-2 border border-gray-300 rounded-md focus:border-gray-800 outline-none text-sm"}),n&&r.jsx(it,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 animate-spin"})]})}),r.jsx("div",{className:"px-2 py-1.5 border-b border-gray-200 bg-gray-50",children:r.jsxs("span",{className:"text-xs text-gray-500",children:[M.length," event",M.length!==1?"s":""," available"]})}),r.jsx("div",{ref:O,className:"max-h-60 sm:max-h-72 overflow-y-auto",role:"listbox",children:M.length===0?r.jsx("div",{className:"px-4 py-6 sm:py-8 text-center text-gray-500 text-sm",children:n?r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(it,{className:"h-5 w-5 sm:h-6 sm:w-6 animate-spin"}),r.jsx("span",{children:"Loading events..."})]}):p?r.jsxs("span",{children:['No events found for "',p,'"']}):r.jsx("span",{children:"No events available"})}):M.map((U,Y)=>{const $=U._id===e,G=Y===C;return r.jsx("div",{onClick:()=>H(U),className:`px-2 sm:px-3 py-2 sm:py-3 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors ${$?"bg-blue-50":G?"bg-gray-100":"hover:bg-gray-50"}`,role:"option","aria-selected":$,children:r.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[r.jsx("div",{className:`shrink-0 w-4 h-4 sm:w-5 sm:h-5 rounded-full border-2 flex items-center justify-center mt-0.5 ${$?"bg-gray-800 border-gray-800":"border-gray-300"}`,children:$&&r.jsx(Cn,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[r.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:U.name}),U.isLive&&r.jsx("span",{className:"shrink-0 px-1 sm:px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Live"})]}),r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mt-1 flex-wrap",children:[U.category&&r.jsx("span",{className:`px-1 sm:px-1.5 py-0.5 text-xs rounded ${z(U.category)}`,children:U.category}),U.startDate&&r.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-500",children:[r.jsx(fr,{className:"h-3 w-3"}),Sde(U.startDate)]}),U.price!==void 0&&r.jsx("span",{className:"text-xs text-gray-600 font-medium",children:Cde(U.price)})]})]})]})},U._id)})})]})]})}const Ade=e=>e==null?"":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Ede=e=>{const t={};if(e.eventId||(t.eventId="Event is required"),!e.phone.trim())t.phone="Phone number is required";else{const s=e.phone.replace(/[^0-9]/g,"");(s.length<10||s.length>15)&&(t.phone="Phone must be 10-15 digits")}return!e.ticketCount||e.ticketCount<1?t.ticketCount="At least 1 ticket is required":e.ticketCount>100&&(t.ticketCount="Maximum 100 tickets allowed"),e.priceCharged&&e.priceCharged<0&&(t.priceCharged="Price cannot be negative"),{isValid:Object.keys(t).length===0,errors:t}},Zv=()=>({eventId:"",phone:"",ticketCount:1,priceCharged:"",notes:""});function Tde({isOpen:e,onClose:t,onSubmit:s,isLoading:n=!1,serverError:a=null,existingLinkData:l=null,allowedEvents:u=[],eventsLoading:f=!1,onSearchEvents:m}){const[x,p]=w.useState(Zv()),[v,C]=w.useState({}),[T,E]=w.useState(null),[k,O]=w.useState(null),[M,L]=w.useState(!1);w.useEffect(()=>{e&&(p(Zv()),C({}),E(null),O(null),L(!1))},[e]),w.useEffect(()=>{l&&O({link:l.existingLink,isExisting:!0})},[l]);const P=w.useCallback(Y=>{const{name:$,value:G,type:ee}=Y.target;let ce=G;ee==="number"&&(ce=G===""?"":Number(G)),p(se=>({...se,[$]:ce})),v[$]&&C(se=>({...se,[$]:null}))},[v]),H=w.useCallback((Y,$)=>{p(G=>({...G,eventId:Y})),E($),$?.price&&p(G=>({...G,eventId:Y,priceCharged:G.priceCharged||$.price*(G.ticketCount||1)})),v.eventId&&C(G=>({...G,eventId:null}))},[v.eventId]),B=w.useCallback(Y=>{const $=Y.target.value===""?"":Number(Y.target.value);p(G=>{const ee={...G,ticketCount:$};return T?.price&&$&&(ee.priceCharged=T.price*$),ee}),v.ticketCount&&C(G=>({...G,ticketCount:null}))},[T,v.ticketCount]),F=w.useCallback(async()=>{if(k?.link)try{await navigator.clipboard.writeText(k.link),L(!0),setTimeout(()=>L(!1),2e3)}catch(Y){console.error("[CashTicketForm] Failed to copy:",Y)}},[k]),R=async Y=>{Y.preventDefault();const $=Ede(x);if(!$.isValid){C($.errors);return}const G={eventId:x.eventId,phone:x.phone.replace(/[^0-9]/g,""),ticketCount:Number(x.ticketCount)};x.priceCharged!==""&&x.priceCharged!==null&&(G.priceCharged=Number(x.priceCharged)),x.notes.trim()&&(G.notes=x.notes.trim());const ee=await s(G);ee?.success&&ee.data&&O({link:ee.data.link,isExisting:!1,ticketCount:ee.data.ticketCount,event:ee.data.event,phone:ee.data.phone})},z=w.useCallback(()=>{n||t()},[n,t]),U=w.useCallback(()=>{p(Zv()),E(null),O(null),L(!1),C({})},[]);return r.jsx(Lt,{isOpen:e,onClose:z,title:k?"Ticket Link Generated":"Generate Cash Ticket Link",size:"xl",closeOnOverlayClick:!n,children:k?r.jsxs("div",{className:"space-y-4",children:[k.isExisting&&r.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-2",children:[r.jsx(Mt,{className:"h-5 w-5 text-yellow-600 shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Existing Link Found"}),r.jsx("p",{className:"text-sm text-yellow-700 mt-0.5",children:"An unredeemed ticket link already exists for this phone and event."})]})]}),!k.isExisting&&r.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-green-800",children:"Success!"}),r.jsx("p",{className:"text-sm text-green-700 mt-0.5",children:"Cash ticket link has been generated successfully."})]}),k.event&&r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg space-y-1",children:[r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Event:"})," ",r.jsx("span",{className:"font-medium text-gray-900",children:k.event.name})]}),r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Phone:"})," ",r.jsx("span",{className:"font-medium text-gray-900",children:k.phone})]}),r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Tickets:"})," ",r.jsx("span",{className:"font-medium text-gray-900",children:k.ticketCount})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Redemption Link"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:k.link,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-700 truncate"}),r.jsx("button",{type:"button",onClick:F,className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 shrink-0 ${M?"bg-green-600 text-white":"bg-gray-800 text-white hover:bg-gray-900"}`,children:M?r.jsxs(r.Fragment,{children:[r.jsx(Cn,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Copied!"})]}):r.jsxs(r.Fragment,{children:[r.jsx(nd,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Copy"})]})}),r.jsxs("a",{href:k.link,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 shrink-0",children:[r.jsx(Ed,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Open"})]})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:z,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"}),r.jsx("button",{type:"button",onClick:U,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Create Another"})]})]}):r.jsxs("form",{onSubmit:R,className:"space-y-4",children:[a&&r.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[r.jsx(Mt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-700",children:a})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Event ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(kS,{selectedId:x.eventId,onChange:H,events:u,isLoading:f,onSearch:m,disabled:n,placeholder:"Search and select an event...",error:v.eventId})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"tel",name:"phone",value:x.phone,onChange:P,disabled:n,placeholder:"Enter customer phone number",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${v.phone?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),v.phone&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:v.phone})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Number of Tickets ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",name:"ticketCount",value:x.ticketCount,onChange:B,disabled:n,min:"1",max:"100",placeholder:"1",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${v.ticketCount?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),v.ticketCount&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:v.ticketCount})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price Charged (INR) ",r.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),r.jsx("input",{type:"number",name:"priceCharged",value:x.priceCharged,onChange:P,disabled:n,min:"0",placeholder:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${v.priceCharged?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),v.priceCharged&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:v.priceCharged}),T?.price&&r.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Base price: ",Ade(T.price),"/ticket"]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Notes ",r.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),r.jsx("textarea",{name:"notes",value:x.notes,onChange:P,disabled:n,rows:2,placeholder:"Add any notes about this transaction",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-colors resize-none ${n?"bg-gray-100":""}`})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:z,disabled:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[n&&r.jsx(it,{className:"h-4 w-4 animate-spin"}),"Generate Link"]})]})]})})}const lg=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Ode=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);function og({icon:e,label:t,value:s,className:n=""}){return r.jsxs("div",{className:`flex items-start gap-3 ${n}`,children:[r.jsx("div",{className:"shrink-0 w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:r.jsx(e,{className:"h-4 w-4 text-gray-600"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs text-gray-500",children:t}),r.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",children:s||"-"})]})]})}function Dde({isOpen:e,onClose:t,record:s,isLoading:n=!1}){const[a,l]=w.useState(!1);w.useEffect(()=>{e||l(!1)},[e]);const u=w.useCallback(async()=>{if(s?.link)try{await navigator.clipboard.writeText(s.link),l(!0),setTimeout(()=>l(!1),2e3)}catch(f){console.error("[CashTicketDetailsModal] Failed to copy:",f)}},[s?.link]);return r.jsx(Lt,{isOpen:e,onClose:t,title:"Cash Ticket Details",size:"lg",children:n?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading details..."})]}):s?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ${s.redeemed?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:s.redeemed?r.jsxs(r.Fragment,{children:[r.jsx(ls,{className:"h-4 w-4"}),"Redeemed"]}):r.jsxs(r.Fragment,{children:[r.jsx(jr,{className:"h-4 w-4"}),"Pending Redemption"]})}),s.redeemedAt&&r.jsx("span",{className:"text-xs text-gray-500",children:lg(s.redeemedAt)})]}),r.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"shrink-0 w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(fr,{className:"h-5 w-5 text-gray-800"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs text-gray-800 font-medium",children:"Event"}),r.jsx("p",{className:"text-base font-semibold text-gray-900 truncate",children:s.eventId?.name||"Unknown Event"}),s.eventId?.startDate&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[lg(s.eventId.startDate),s.eventId?.endDate&&` - ${lg(s.eventId.endDate)}`]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsx(og,{icon:ga,label:"Phone Number",value:s.generatedFor}),r.jsx(og,{icon:_o,label:"Ticket Count",value:`${s.ticketCount} ticket${s.ticketCount!==1?"s":""}`}),r.jsx(og,{icon:tp,label:"Price Charged",value:Ode(s.priceCharged)}),r.jsx(og,{icon:jr,label:"Created At",value:lg(s.createdAt)})]}),s.generatedBy&&r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Generated By"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:r.jsx(Ls,{className:"h-4 w-4 text-gray-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.generatedBy.name||"Unknown"}),r.jsx("p",{className:"text-xs text-gray-500",children:s.generatedBy.email})]})]})]}),s.notes&&r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ad,{className:"h-4 w-4 text-gray-500"}),r.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Notes"})]}),r.jsx("p",{className:"text-sm text-gray-700",children:s.notes})]}),!s.redeemed&&s.link&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Redemption Link"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:s.link,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-700 truncate"}),r.jsx("button",{type:"button",onClick:u,className:`px-3 py-2 rounded-lg transition-colors flex items-center gap-1.5 shrink-0 ${a?"bg-green-600 text-white":"bg-gray-800 text-white hover:bg-gray-900"}`,children:a?r.jsxs(r.Fragment,{children:[r.jsx(Cn,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline text-sm",children:"Copied!"})]}):r.jsxs(r.Fragment,{children:[r.jsx(nd,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline text-sm",children:"Copy"})]})}),r.jsxs("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-1.5 shrink-0",children:[r.jsx(Ed,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline text-sm",children:"Open"})]})]})]}),s.signature&&r.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Signature"}),r.jsx("code",{className:"text-xs font-mono text-gray-500 bg-gray-100 px-2 py-1 rounded",children:s.signature})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsx("button",{type:"button",onClick:t,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Close"})})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(wr,{className:"h-12 w-12 text-gray-300"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No record data available"})]})})}const kde=e=>{const t={};if(e.eventId||(t.eventId="Event is required"),!e.phone.trim())t.phone="Phone number is required";else{const s=e.phone.replace(/[^0-9]/g,"");(s.length<10||s.length>15)&&(t.phone="Phone must be 10-15 digits")}return e.name.trim()?(e.name.trim().length<2||e.name.trim().length>100)&&(t.name="Name must be 2-100 characters"):t.name="Name is required",e.priceCharged!==""&&e.priceCharged<0&&(t.priceCharged="Price cannot be negative"),{isValid:Object.keys(t).length===0,errors:t}},Qv=()=>({eventId:"",phone:"",name:"",priceCharged:"",notes:""});function _de({isOpen:e,onClose:t,onSubmit:s,isLoading:n=!1,serverError:a=null,allowedEvents:l=[],eventsLoading:u=!1,onSearchEvents:f}){const[m,x]=w.useState(Qv()),[p,v]=w.useState({}),[C,T]=w.useState(null),[E,k]=w.useState(null);w.useEffect(()=>{e&&(x(Qv()),v({}),T(null),k(null))},[e]);const O=w.useCallback(B=>{const{name:F,value:R,type:z}=B.target;let U=R;z==="number"&&(U=R===""?"":Number(R)),x(Y=>({...Y,[F]:U})),p[F]&&v(Y=>({...Y,[F]:null}))},[p]),M=w.useCallback((B,F)=>{x(R=>({...R,eventId:B})),T(F),F?.price&&x(R=>({...R,eventId:B,priceCharged:R.priceCharged||F.price})),p.eventId&&v(R=>({...R,eventId:null}))},[p.eventId]),L=async B=>{B.preventDefault();const F=kde(m);if(!F.isValid){v(F.errors);return}const R={eventId:m.eventId,phone:m.phone.replace(/[^0-9]/g,""),name:m.name.trim()};m.priceCharged!==""&&m.priceCharged!==null&&(R.priceCharged=Number(m.priceCharged)),m.notes.trim()&&(R.notes=m.notes.trim());const z=await s(R);z?.success&&z.data&&k({enrollment:z.data.enrollment,event:z.data.event})},P=w.useCallback(()=>{n||t()},[n,t]),H=w.useCallback(()=>{x(Qv()),T(null),k(null),v({})},[]);return r.jsx(Lt,{isOpen:e,onClose:P,title:E?"Direct Ticket Created":"Create Direct Ticket",size:"xl",closeOnOverlayClick:!n,children:E?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg flex items-start gap-2",children:[r.jsx(Cn,{className:"h-5 w-5 text-green-600 shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-green-800",children:"Success"}),r.jsx("p",{className:"text-sm text-green-700 mt-0.5",children:"Direct ticket created and sent via WhatsApp."})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_o,{className:"h-5 w-5 text-gray-500"}),r.jsx("span",{className:"font-medium text-gray-900",children:E.event?.name})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ls,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:E.enrollment?.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ga,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:E.enrollment?.phone})]})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:P,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"}),r.jsx("button",{type:"button",onClick:H,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Create Another"})]})]}):r.jsxs("form",{onSubmit:L,className:"space-y-4",children:[a&&r.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[r.jsx(Mt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-700",children:a})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Event ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(kS,{selectedId:m.eventId,onChange:M,events:l,isLoading:u,onSearch:f,disabled:n,placeholder:"Search and select an event...",error:p.eventId})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Attendee Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"name",value:m.name,onChange:O,disabled:n,placeholder:"Enter attendee name",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.name?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),p.name&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.name})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"tel",name:"phone",value:m.phone,onChange:O,disabled:n,placeholder:"Enter phone number",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.phone?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),p.phone&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.phone})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price Charged (INR) ",r.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),r.jsx("input",{type:"number",name:"priceCharged",value:m.priceCharged,onChange:O,disabled:n,min:"0",placeholder:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.priceCharged?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),p.priceCharged&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.priceCharged}),C?.price&&r.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Event base price: ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(C.price)]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Notes ",r.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),r.jsx("textarea",{name:"notes",value:m.notes,onChange:O,disabled:n,rows:2,maxLength:500,placeholder:"Add any notes",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-colors resize-none ${n?"bg-gray-100":""}`})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:P,disabled:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[n&&r.jsx(it,{className:"h-4 w-4 animate-spin"}),"Create Ticket"]})]})]})})}const Pde=e=>{if(e===0)return"0 Bytes";const t=1024,s=["Bytes","KB","MB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(2))+" "+s[n]},Ide=e=>{const t={};return e.eventId||(t.eventId="Event is required"),e.file||(t.file="Excel file is required"),e.priceCharged!==""&&e.priceCharged<0&&(t.priceCharged="Price cannot be negative"),{isValid:Object.keys(t).length===0,errors:t}},Jv=()=>({eventId:"",file:null,priceCharged:"",notes:""}),Mde=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"],Rde=".xlsx,.xls,.csv";function Lde({isOpen:e,onClose:t,onSubmit:s,isLoading:n=!1,serverError:a=null,allowedEvents:l=[],eventsLoading:u=!1,onSearchEvents:f}){const[m,x]=w.useState(Jv()),[p,v]=w.useState({}),[C,T]=w.useState(null),[E,k]=w.useState(null),[O,M]=w.useState(!1),L=w.useRef(null);w.useEffect(()=>{e&&(x(Jv()),v({}),T(null),k(null),M(!1))},[e]);const P=w.useCallback(J=>{const{name:ne,value:pe,type:be}=J.target;let te=pe;be==="number"&&(te=pe===""?"":Number(pe)),x(X=>({...X,[ne]:te})),p[ne]&&v(X=>({...X,[ne]:null}))},[p]),H=w.useCallback((J,ne)=>{x(pe=>({...pe,eventId:J})),T(ne),ne?.price&&x(pe=>({...pe,eventId:J,priceCharged:pe.priceCharged||ne.price})),p.eventId&&v(pe=>({...pe,eventId:null}))},[p.eventId]),B=J=>Mde.includes(J.type)||J.name.endsWith(".xlsx")||J.name.endsWith(".xls")||J.name.endsWith(".csv"),F=w.useCallback(J=>{if(J){if(!B(J)){v(ne=>({...ne,file:"Invalid file type. Please upload an Excel file (.xlsx, .xls) or CSV."}));return}if(J.size>10*1024*1024){v(ne=>({...ne,file:"File size exceeds 10MB limit."}));return}x(ne=>({...ne,file:J})),v(ne=>({...ne,file:null}))}},[]),R=J=>{const ne=J.target.files?.[0];F(ne),J.target.value=""},z=J=>{J.preventDefault(),n||M(!0)},U=J=>{J.preventDefault(),M(!1)},Y=J=>{if(J.preventDefault(),M(!1),n)return;const ne=J.dataTransfer.files?.[0];F(ne)},$=()=>{x(J=>({...J,file:null}))},G=async J=>{J.preventDefault();const ne=Ide(m);if(!ne.isValid){v(ne.errors);return}const pe={eventId:m.eventId};m.priceCharged!==""&&m.priceCharged!==null&&(pe.priceCharged=Number(m.priceCharged)),m.notes.trim()&&(pe.notes=m.notes.trim());const be=await s(m.file,pe);be?.success&&be.data&&k(be.data)},ee=()=>{if(E?.rejectionFile?.base64)try{const J=atob(E.rejectionFile.base64),ne=new Array(J.length);for(let re=0;re<J.length;re++)ne[re]=J.charCodeAt(re);const pe=new Uint8Array(ne),be=new Blob([pe],{type:E.rejectionFile.mimeType}),te=window.URL.createObjectURL(be),X=document.createElement("a");X.href=te,X.download=E.rejectionFile.filename,document.body.appendChild(X),X.click(),document.body.removeChild(X),window.URL.revokeObjectURL(te)}catch(J){console.error("[DirectTicketBulk] Failed to download rejections:",J)}},ce=w.useCallback(()=>{n||t()},[n,t]),se=w.useCallback(()=>{x(Jv()),T(null),k(null),v({})},[]);return r.jsx(Lt,{isOpen:e,onClose:ce,title:E?"Bulk Upload Complete":"Bulk Direct Ticket Upload",size:"xl",closeOnOverlayClick:!n,children:E?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:E.summary?.total||0}),r.jsx("div",{className:"text-xs text-gray-500",children:"Total"})]}),r.jsxs("div",{className:"p-3 bg-green-50 rounded-lg text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-700",children:E.summary?.successful||0}),r.jsx("div",{className:"text-xs text-green-600",children:"Successful"})]}),r.jsxs("div",{className:"p-3 bg-red-50 rounded-lg text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-red-700",children:E.summary?.rejected||0}),r.jsx("div",{className:"text-xs text-red-600",children:"Rejected"})]})]}),E.event&&r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg flex items-center gap-2",children:[r.jsx(p2,{className:"h-5 w-5 text-gray-500"}),r.jsx("span",{className:"font-medium text-gray-900",children:E.event.name})]}),E.successful?.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-green-700",children:[r.jsx(sd,{className:"h-4 w-4"}),"Successful (",E.successful.length,")"]}),r.jsx("div",{className:"max-h-32 overflow-y-auto border border-gray-200 rounded-lg",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Row"}),r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Phone"}),r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Name"})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-100",children:[E.successful.slice(0,50).map((J,ne)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-1.5 text-gray-600",children:J.rowNumber}),r.jsx("td",{className:"px-3 py-1.5 text-gray-900",children:J.phone}),r.jsx("td",{className:"px-3 py-1.5 text-gray-900",children:J.name})]},ne)),E.successful.length>50&&r.jsx("tr",{children:r.jsxs("td",{colSpan:3,className:"px-3 py-2 text-center text-gray-500 text-xs",children:["... and ",E.successful.length-50," more"]})})]})]})})]}),E.rejected?.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-red-700",children:[r.jsx(wr,{className:"h-4 w-4"}),"Rejected (",E.rejected.length,")"]}),E.rejectionFile&&r.jsxs("button",{type:"button",onClick:ee,className:"flex items-center gap-1 px-2 py-1 text-xs text-gray-600 bg-gray-100 hover:bg-gray-200 rounded transition-colors",children:[r.jsx(cz,{className:"h-3 w-3"}),"Download"]})]}),r.jsx("div",{className:"max-h-32 overflow-y-auto border border-gray-200 rounded-lg",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Row"}),r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Phone"}),r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Reason"})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-100",children:[E.rejected.slice(0,20).map((J,ne)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-1.5 text-gray-600",children:J.rowNumber}),r.jsx("td",{className:"px-3 py-1.5 text-gray-900",children:J.phone||"-"}),r.jsx("td",{className:"px-3 py-1.5 text-red-600 text-xs",children:J.reason})]},ne)),E.rejected.length>20&&r.jsx("tr",{children:r.jsxs("td",{colSpan:3,className:"px-3 py-2 text-center text-gray-500 text-xs",children:["... and ",E.rejected.length-20," more (download for full list)"]})})]})]})})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:ce,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"}),r.jsx("button",{type:"button",onClick:se,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Upload Another"})]})]}):r.jsxs("form",{onSubmit:G,className:"space-y-4",children:[a&&r.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[r.jsx(Mt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-700",children:a})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Event ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(kS,{selectedId:m.eventId,onChange:H,events:l,isLoading:u,onSearch:f,disabled:n,placeholder:"Search and select an event...",error:p.eventId})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Excel File ",r.jsx("span",{className:"text-red-500",children:"*"})]}),m.file?r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[r.jsx(p2,{className:"h-8 w-8 text-green-600 shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:m.file.name}),r.jsx("p",{className:"text-xs text-gray-500",children:Pde(m.file.size)})]}),r.jsx("button",{type:"button",onClick:$,disabled:n,className:"p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors disabled:opacity-50",children:r.jsx(Kr,{className:"h-4 w-4"})})]}):r.jsxs("div",{onDragOver:z,onDragLeave:U,onDrop:Y,onClick:()=>!n&&L.current?.click(),className:`
                  relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer
                  transition-all duration-200
                  ${O?"border-gray-800 bg-gray-50":"border-gray-300 hover:border-gray-400"}
                  ${n?"opacity-50 cursor-not-allowed":""}
                  ${p.file?"border-red-300 bg-red-50/50":""}
                `,children:[r.jsx("input",{ref:L,type:"file",accept:Rde,onChange:R,disabled:n,className:"hidden"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center",children:r.jsx(pk,{className:"h-5 w-5 text-gray-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Drop Excel file here or click to upload"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"XLSX, XLS, or CSV (max 10MB)"})]})]})]}),p.file&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.file}),r.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[r.jsxs("p",{children:["Excel should have columns: ",r.jsx("span",{className:"font-medium",children:"phone"})," and ",r.jsx("span",{className:"font-medium",children:"name"})]}),r.jsx("p",{className:"text-gray-400",children:"Column order doesn't matter. Accepts: Phone, phone number, Name, full name, etc."})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price Charged Per Ticket (INR) ",r.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),r.jsx("input",{type:"number",name:"priceCharged",value:m.priceCharged,onChange:P,disabled:n,min:"0",placeholder:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.priceCharged?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),p.priceCharged&&r.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-500",children:p.priceCharged}),C?.price&&r.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Event base price: ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(C.price)]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Notes ",r.jsx("span",{className:"text-gray-400",children:"(Optional, applies to all)"})]}),r.jsx("textarea",{name:"notes",value:m.notes,onChange:P,disabled:n,rows:2,maxLength:500,placeholder:"Add notes for all tickets",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-colors resize-none ${n?"bg-gray-100":""}`})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:ce,disabled:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[n&&r.jsx(it,{className:"h-4 w-4 animate-spin"}),"Upload & Process"]})]})]})})}const rO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",sO=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),cg={redeemed:"bg-green-100 text-green-700",pending:"bg-yellow-100 text-yellow-700"};function Bde(){const{admin:e}=mn(),{records:t,pagination:s,filters:n,isLoading:a,error:l,allowedEvents:u,eventsLoading:f,fetchRecords:m,createRecord:x,getRecordById:p,deleteRecord:v,searchEvents:C,updateFilters:T,changePage:E,clearError:k}=jde(),O=w.useMemo(()=>e?.role==="ADMIN"||e?.role==="SUPER_ADMIN",[e?.role]),M=w.useMemo(()=>e?.role==="MANAGEMENT_STAFF"?t.filter(le=>le.generatedBy?._id===e._id):t,[t,e?.role,e?._id]),[L,P]=w.useState(!1),[H,B]=w.useState(!1),[F,R]=w.useState(!1),[z,U]=w.useState(!1),[Y,$]=w.useState(!1),[G,ee]=w.useState(null),[ce,se]=w.useState(!1),[J,ne]=w.useState(!1),[pe,be]=w.useState(null),[te,X]=w.useState(null),[re,ge]=w.useState(!1),[de,je]=w.useState(null),[oe,fe]=w.useState(!1),[qe,Ne]=w.useState(null),[Xe,st]=w.useState(null),[Le,we]=w.useState(!1),[Ue,ue]=w.useState(n.eventId||""),[He,Se]=w.useState(n.redeemed||""),tt=w.useCallback(()=>{be(null),X(null),P(!0)},[]),lt=w.useCallback(()=>{P(!1),be(null),X(null)},[]),pt=w.useCallback(()=>{je(null),U(!0)},[]),We=w.useCallback(()=>{U(!1),je(null)},[]),at=w.useCallback(async le=>{ge(!0),je(null);try{const ut=await Do.createDirectTicket(le);return ut.success?(console.log("[CashTickets] Direct ticket created:",ut.data?.enrollment?.id),m(1),{success:!0,data:ut.data}):(console.error("[CashTickets] Direct ticket failed:",ut.message),je(ut.message||"Failed to create direct ticket"),{success:!1})}catch(ut){return console.error("[CashTickets] Direct ticket error:",ut),je("An unexpected error occurred"),{success:!1}}finally{ge(!1)}},[m]),Fe=w.useCallback(()=>{Ne(null),$(!0)},[]),ft=w.useCallback(()=>{$(!1),Ne(null)},[]),Gt=w.useCallback(async(le,ut)=>{fe(!0),Ne(null);try{const Tt=await Do.createDirectTicketBulk(le,ut);return Tt.success?(console.log("[CashTickets] Bulk direct tickets processed:",Tt.data?.summary),m(1),{success:!0,data:Tt.data}):(console.error("[CashTickets] Bulk direct tickets failed:",Tt.message),Ne(Tt.message||"Failed to process bulk upload"),{success:!1})}catch(Tt){return console.error("[CashTickets] Bulk direct tickets error:",Tt),Ne("An unexpected error occurred"),{success:!1}}finally{fe(!1)}},[m]),rr=w.useCallback(async le=>{ne(!0),be(null),X(null);try{const ut=await x(le);return ut.success?ut:ut.existingLink?(X({existingLink:ut.existingLink,signature:ut.signature}),{success:!1}):(be(ut.error||"Failed to create cash ticket"),{success:!1})}catch{return be("An unexpected error occurred"),{success:!1}}finally{ne(!1)}},[x]),mr=w.useCallback(async le=>{ee(le),B(!0),se(!0);try{const ut=await p(le._id);ut.success&&ee(ut.data)}catch(ut){console.error("[CashTickets] Failed to fetch details:",ut)}finally{se(!1)}},[p]),ct=w.useCallback(()=>{B(!1),ee(null)},[]),Et=w.useCallback(le=>{ee(le),R(!0)},[]),_r=w.useCallback(()=>{R(!1),ee(null)},[]),Sr=w.useCallback(async()=>{if(G){ne(!0);try{const le=await v(G._id);le.success?_r():alert(le.error||"Failed to delete record")}catch{alert("An unexpected error occurred")}finally{ne(!1)}}},[G,v,_r]),cs=w.useCallback(async(le,ut)=>{try{await navigator.clipboard.writeText(le),st(ut),setTimeout(()=>st(null),2e3)}catch(Tt){console.error("[CashTickets] Failed to copy:",Tt)}},[]),_t=w.useCallback(()=>{T({eventId:Ue,redeemed:He}),we(!1)},[Ue,He,T]),ve=w.useCallback(()=>{ue(""),Se(""),T({eventId:"",redeemed:""}),we(!1)},[T]),Je=w.useCallback(()=>{m(s.page)},[m,s.page]),nt=w.useMemo(()=>n.eventId||n.redeemed!=="",[n]),At=w.useMemo(()=>M.reduce((le,ut)=>le+(ut.ticketCount||0),0),[M]),gr=w.useMemo(()=>e?.role==="MANAGEMENT_STAFF"&&e?.maxCashTicketsAllowed!=null,[e?.role,e?.maxCashTicketsAllowed]),Xs=w.useMemo(()=>gr?Math.min(100,At/e.maxCashTicketsAllowed*100):0,[gr,At,e?.maxCashTicketsAllowed]),as=Xs>=80,bt=At>=e?.maxCashTicketsAllowed;return r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Cash Tickets"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Generate and manage offline cash payment ticket links"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsxs("button",{onClick:tt,disabled:bt,className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-colors font-medium ${bt?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-800 text-white hover:bg-gray-900"}`,title:bt?"Ticket limit reached":"Generate new ticket link",children:[r.jsx(kr,{className:"h-5 w-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Generate Link"}),r.jsx("span",{className:"sm:hidden",children:"Link"})]}),r.jsxs("button",{onClick:pt,disabled:bt,className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-colors font-medium ${bt?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-700 text-white hover:bg-gray-800"}`,title:bt?"Ticket limit reached":"Create direct ticket",children:[r.jsx(uw,{className:"h-5 w-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Direct Ticket"}),r.jsx("span",{className:"sm:hidden",children:"Direct"})]}),r.jsxs("button",{onClick:Fe,disabled:bt,className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-colors font-medium ${bt?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700"}`,title:bt?"Ticket limit reached":"Bulk upload direct tickets",children:[r.jsx(p2,{className:"h-5 w-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Direct Ticket Bulk"}),r.jsx("span",{className:"sm:hidden",children:"Bulk"})]})]})]}),gr&&r.jsxs("div",{className:`p-4 rounded-xl border ${bt?"bg-red-50 border-red-200":as?"bg-yellow-50 border-yellow-200":"bg-blue-50 border-blue-200"}`,children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(_o,{className:`h-5 w-5 ${bt?"text-red-600":as?"text-yellow-600":"text-gray-800"}`}),r.jsx("h3",{className:`font-medium ${bt?"text-red-800":as?"text-yellow-800":"text-blue-800"}`,children:"Ticket Generation Limit"})]}),r.jsx("p",{className:`text-sm ${bt?"text-red-700":as?"text-yellow-700":"text-blue-700"}`,children:bt?r.jsx(r.Fragment,{children:"You have reached your maximum ticket limit. Contact your administrator to increase your limit."}):r.jsxs(r.Fragment,{children:["You have created"," ",r.jsxs("span",{className:"font-semibold",children:[At," of ",e.maxCashTicketsAllowed]})," ","tickets (",e.maxCashTicketsAllowed-At," remaining)"]})})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:`text-2xl font-bold ${bt?"text-red-700":as?"text-yellow-700":"text-blue-700"}`,children:At}),r.jsxs("div",{className:`text-xs ${bt?"text-red-600":as?"text-yellow-600":"text-gray-800"}`,children:["of ",e.maxCashTicketsAllowed]})]})})]}),r.jsx("div",{className:"mt-3",children:r.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full transition-all duration-300 ${bt?"bg-red-600":as?"bg-yellow-500":"bg-blue-600"}`,style:{width:`${Xs}%`}})})})]}),l&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[r.jsx(Mt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error loading records"}),r.jsx("p",{className:"text-sm text-red-700 mt-0.5",children:l})]}),r.jsx("button",{onClick:k,className:"shrink-0 text-red-600 hover:text-red-800",children:""})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[r.jsxs("button",{onClick:()=>we(!Le),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${nt?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(Va,{className:"h-4 w-4"}),r.jsx("span",{children:"Filters"}),nt&&r.jsx("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full",children:(n.eventId?1:0)+(n.redeemed!==""?1:0)}),r.jsx(fi,{className:`h-4 w-4 transition-transform ${Le?"rotate-180":""}`})]}),r.jsxs("button",{onClick:Je,disabled:a,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[r.jsx(qs,{className:`h-4 w-4 ${a?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),r.jsxs("div",{className:"ml-auto text-sm text-gray-500",children:[s.total," record",s.total!==1?"s":""," total"]})]}),Le&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event"}),r.jsxs("select",{value:Ue,onChange:le=>ue(le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Events"}),u.map(le=>r.jsx("option",{value:le._id,children:le.name},le._id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{value:He,onChange:le=>Se(le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"false",children:"Pending"}),r.jsx("option",{value:"true",children:"Redeemed"})]})]}),r.jsxs("div",{className:"flex items-end gap-2 sm:col-span-2 lg:col-span-1",children:[r.jsx("button",{onClick:_t,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Apply"}),r.jsx("button",{onClick:ve,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]})})]}),r.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Event"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Phone"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Details"}),O&&r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Created By"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsx("tbody",{children:a&&M.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:O?6:5,className:"px-6 py-12 text-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading records..."})]})}):M.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:O?6:5,className:"px-6 py-12 text-center",children:[r.jsx(_o,{className:"h-12 w-12 text-gray-300 mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No records found"}),r.jsx("button",{onClick:tt,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Generate your first ticket link"})]})}):M.map(le=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center shrink-0",children:r.jsx(fr,{className:"h-4 w-4 text-gray-800"})}),r.jsx("span",{className:"font-medium text-gray-900 truncate max-w-[200px]",children:le.eventId?.name||"Unknown Event"})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(ga,{className:"h-4 w-4 text-gray-400"}),le.generatedFor]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("span",{className:"text-gray-900 font-medium",children:[le.ticketCount," x ",sO(le.priceCharged)]}),r.jsx("span",{className:"text-xs text-gray-500 mt-0.5",children:rO(le.createdAt)})]})}),O&&r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-gray-900 font-medium",children:le.generatedBy?.name||"-"}),(le.generatedBy?.email||le.generatedBy?.phone)&&r.jsx("span",{className:"text-xs text-gray-500 mt-0.5",children:le.generatedBy?.email||le.generatedBy?.phone})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${le.redeemed?cg.redeemed:cg.pending}`,children:le.redeemed?"Redeemed":"Pending"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[!le.redeemed&&le.link&&r.jsx("button",{onClick:()=>cs(le.link,le._id),className:`p-2 rounded-lg transition-colors ${Xe===le._id?"text-green-600 bg-green-50":"text-gray-600 hover:bg-gray-100"}`,title:"Copy link",children:Xe===le._id?r.jsx(Cn,{className:"h-4 w-4"}):r.jsx(nd,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>mr(le),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details",children:r.jsx(Lr,{className:"h-4 w-4"})}),!le.redeemed&&r.jsx("button",{onClick:()=>Et(le),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:r.jsx(hr,{className:"h-4 w-4"})})]})})]},le._id))})]})}),s.totalPages>0&&r.jsx(Dr,{currentPage:s.page,totalPages:s.totalPages,totalItems:s.total,itemsPerPage:s.limit,onPageChange:E,itemLabel:"records"})]}),r.jsx("div",{className:"md:hidden space-y-4",children:a&&M.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading records..."})]}):M.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx(_o,{className:"h-12 w-12 text-gray-300 mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No records found"}),r.jsx("button",{onClick:tt,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Generate your first ticket link"})]}):r.jsxs(r.Fragment,{children:[M.map(le=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center shrink-0",children:r.jsx(fr,{className:"h-5 w-5 text-gray-800"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:le.eventId?.name||"Unknown Event"}),r.jsx("p",{className:"text-xs text-gray-500",children:rO(le.createdAt)})]})]}),r.jsx("span",{className:`shrink-0 px-2.5 py-1 rounded-full text-xs font-medium ${le.redeemed?cg.redeemed:cg.pending}`,children:le.redeemed?"Redeemed":"Pending"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ga,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:le.generatedFor})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_o,{className:"h-4 w-4 text-gray-400"}),r.jsxs("span",{className:"text-gray-600",children:[le.ticketCount," x ",sO(le.priceCharged)]})]})]}),O&&r.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Created By"}),r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:le.generatedBy?.name||"-"}),(le.generatedBy?.email||le.generatedBy?.phone)&&r.jsx("span",{className:"text-xs text-gray-500",children:le.generatedBy?.email||le.generatedBy?.phone})]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100",children:[!le.redeemed&&le.link&&r.jsx("button",{onClick:()=>cs(le.link,le._id),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Xe===le._id?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Xe===le._id?r.jsxs(r.Fragment,{children:[r.jsx(Cn,{className:"h-4 w-4"}),"Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(nd,{className:"h-4 w-4"}),"Copy Link"]})}),r.jsxs("button",{onClick:()=>mr(le),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:[r.jsx(Lr,{className:"h-4 w-4"}),"Details"]}),!le.redeemed&&r.jsx("button",{onClick:()=>Et(le),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:r.jsx(hr,{className:"h-4 w-4"})})]})]},le._id)),s.totalPages>0&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsx(Dr,{currentPage:s.page,totalPages:s.totalPages,totalItems:s.total,itemsPerPage:s.limit,onPageChange:E,itemLabel:"records"})})]})}),r.jsx(Tde,{isOpen:L,onClose:lt,onSubmit:rr,isLoading:J,serverError:pe,existingLinkData:te,allowedEvents:u,eventsLoading:f,onSearchEvents:C}),r.jsx(Dde,{isOpen:H,onClose:ct,record:G,isLoading:ce}),r.jsx(en,{isOpen:F,onClose:_r,onConfirm:Sr,title:"Delete Cash Ticket",message:`Are you sure you want to delete this cash ticket for ${G?.generatedFor}? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:J}),r.jsx(_de,{isOpen:z,onClose:We,onSubmit:at,isLoading:re,serverError:de,allowedEvents:u,eventsLoading:f,onSearchEvents:C}),r.jsx(Lde,{isOpen:Y,onClose:ft,onSubmit:Gt,isLoading:oe,serverError:qe,allowedEvents:u,eventsLoading:f,onSearchEvents:C})]})}const si={BASE:"/web/vouchers",GET_BY_ID:e=>`/web/vouchers/${e}`,UPDATE:e=>`/web/vouchers/${e}`,DELETE:e=>`/web/vouchers/${e}`,ENABLE:e=>`/web/vouchers/${e}/enable`,DISABLE:e=>`/web/vouchers/${e}/disable`,DELETED:"/web/vouchers/deleted",RESTORE:e=>`/web/vouchers/${e}/restore`,PERMANENT_DELETE:e=>`/web/vouchers/${e}/permanent`},Nc={create:async e=>{console.log("[VoucherService] Creating voucher with code:",e.code);const t=await Te(Ee.post(si.BASE,e));return t.success?console.log("[VoucherService] Voucher created successfully:",t.data.voucher?._id):console.error("[VoucherService] Failed to create voucher:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.isActive!==void 0&&e.isActive!==""&&t.append("isActive",e.isActive),e.search&&t.append("search",e.search);const s=t.toString(),n=s?`${si.BASE}?${s}`:si.BASE;console.log("[VoucherService] Fetching vouchers with params:",e);const a=await Te(Ee.get(n));return a.success?console.log("[VoucherService] Fetched vouchers:",a.data.vouchers?.length):console.error("[VoucherService] Failed to fetch vouchers:",a.message),a},getById:async e=>{console.log("[VoucherService] Fetching voucher by ID:",e);const t=await Te(Ee.get(si.GET_BY_ID(e)));return t.success?console.log("[VoucherService] Fetched voucher:",t.data.voucher?._id):console.error("[VoucherService] Failed to fetch voucher:",t.message),t},update:async(e,t)=>{console.log("[VoucherService] Updating voucher:",e);const s=await Te(Ee.put(si.UPDATE(e),t));return s.success?console.log("[VoucherService] Voucher updated successfully"):console.error("[VoucherService] Failed to update voucher:",s.message),s},enable:async e=>{console.log("[VoucherService] Enabling voucher:",e);const t=await Te(Ee.post(si.ENABLE(e)));return t.success?console.log("[VoucherService] Voucher enabled successfully"):console.error("[VoucherService] Failed to enable voucher:",t.message),t},disable:async e=>{console.log("[VoucherService] Disabling voucher:",e);const t=await Te(Ee.post(si.DISABLE(e)));return t.success?console.log("[VoucherService] Voucher disabled successfully"):console.error("[VoucherService] Failed to disable voucher:",t.message),t},delete:async e=>{console.log("[VoucherService] Deleting voucher:",e);const t=await Te(Ee.delete(si.DELETE(e)));return t.success?console.log("[VoucherService] Voucher deleted successfully"):console.error("[VoucherService] Failed to delete voucher:",t.message),t},getDeleted:async()=>{console.log("[VoucherService] Fetching deleted vouchers");const e=await Te(Ee.get(si.DELETED));return e.success?console.log("[VoucherService] Fetched deleted vouchers:",e.data.vouchers?.length):console.error("[VoucherService] Failed to fetch deleted vouchers:",e.message),e},restore:async e=>{console.log("[VoucherService] Restoring voucher:",e);const t=await Te(Ee.post(si.RESTORE(e)));return t.success?console.log("[VoucherService] Voucher restored successfully"):console.error("[VoucherService] Failed to restore voucher:",t.message),t},permanentDelete:async e=>{console.log("[VoucherService] Permanently deleting voucher:",e);const t=await Te(Ee.delete(si.PERMANENT_DELETE(e)));return t.success?console.log("[VoucherService] Voucher permanently deleted"):console.error("[VoucherService] Failed to permanently delete voucher:",t.message),t}};function Fde(e={}){const[t,s]=w.useState([]),[n,a]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[l,u]=w.useState({search:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e}),[f,m]=w.useState(!1),[x,p]=w.useState(null),v=w.useRef(null),C=w.useCallback(async(z=n.currentPage)=>{m(!0),p(null);try{const U={page:z,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.isActive!==""&&{isActive:l.isActive}},Y=await Nc.getAll(U);Y.success?(s(Y.data.vouchers||[]),a({currentPage:Y.data.pagination?.currentPage||1,totalPages:Y.data.pagination?.totalPages||0,totalCount:Y.data.pagination?.totalCount||0,limit:Y.data.pagination?.limit||10})):(p(Y.message),s([]))}catch{p("Failed to fetch vouchers"),s([])}finally{m(!1)}},[l,n.limit]),T=w.useCallback(async z=>{try{const U=await Nc.create(z);return U.success?(await C(1),{success:!0,data:U.data}):{success:!1,error:U.message,validationErrors:U.error}}catch{return{success:!1,error:"Failed to create voucher"}}},[C]),E=w.useCallback(async z=>{try{const U=await Nc.getById(z);return U.success?{success:!0,data:U.data.voucher}:{success:!1,error:U.message}}catch{return{success:!1,error:"Failed to fetch voucher details"}}},[]),k=w.useCallback(async(z,U)=>{try{const Y=await Nc.update(z,U);return Y.success?(s($=>$.map(G=>G._id===z?{...G,...Y.data.voucher}:G)),{success:!0,data:Y.data}):{success:!1,error:Y.message,validationErrors:Y.error}}catch{return{success:!1,error:"Failed to update voucher"}}},[]),O=w.useCallback(async(z,U)=>{try{const Y=U?await Nc.disable(z):await Nc.enable(z);return Y.success?(s($=>$.map(G=>G._id===z?{...G,isActive:!U}:G)),{success:!0}):{success:!1,error:Y.message}}catch{return{success:!1,error:"Failed to update voucher status"}}},[]),M=w.useCallback(async z=>{try{const U=await Nc.delete(z);return U.success?(s(Y=>Y.filter($=>$._id!==z)),a(Y=>({...Y,totalCount:Y.totalCount-1,totalPages:Math.ceil((Y.totalCount-1)/Y.limit)})),{success:!0}):{success:!1,error:U.message}}catch{return{success:!1,error:"Failed to delete voucher"}}},[]),L=w.useCallback(z=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{u(U=>({...U,search:z}))},300)},[]),P=w.useCallback(z=>{u(U=>({...U,...z}))},[]),H=w.useCallback(()=>{u({search:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),B=w.useCallback(z=>{C(z)},[C]),F=w.useCallback(z=>{a(U=>({...U,limit:z}))},[]),R=w.useCallback(()=>{p(null)},[]);return w.useEffect(()=>{C(1)},[l]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{vouchers:t,pagination:n,filters:l,isLoading:f,error:x,fetchVouchers:C,createVoucher:T,getVoucherById:E,updateVoucher:k,toggleVoucherStatus:O,deleteVoucher:M,searchVouchers:L,updateFilters:P,resetFilters:H,changePage:B,changeLimit:F,clearError:R}}const nO=()=>({title:"",description:"",code:"",maxUsage:"",events:[],isActive:!0});function Ude({isOpen:e,onClose:t,onSubmit:s,isLoading:n=!1,serverError:a=null,voucherToEdit:l=null}){const[u,f]=w.useState(nO()),[m,x]=w.useState({}),p=!!l;w.useEffect(()=>{e&&(f(l?{title:l.title||"",description:l.description||"",code:l.code||"",maxUsage:l.maxUsage?.toString()||"",events:l.events?.map(O=>O._id||O)||[],isActive:l.isActive??!0}:nO()),x({}))},[e,l]);const v=O=>{const M={};if(O.title.trim()?O.title.length>100&&(M.title="Title must be less than 100 characters"):M.title="Title is required",O.description.trim()?O.description.length>500&&(M.description="Description must be less than 500 characters"):M.description="Description is required",O.code.trim()?/^[A-Z0-9_-]+$/i.test(O.code)?O.code.length>20&&(M.code="Code must be less than 20 characters"):M.code="Code can only contain letters, numbers, hyphens, and underscores":M.code="Voucher code is required",!O.maxUsage)M.maxUsage="Maximum usage is required";else{const L=parseInt(O.maxUsage,10);isNaN(L)||L<1?M.maxUsage="Maximum usage must be at least 1":L>1e6&&(M.maxUsage="Maximum usage cannot exceed 1,000,000")}return{isValid:Object.keys(M).length===0,errors:M}},C=(O,M)=>{f(L=>({...L,[O]:M})),m[O]&&x(L=>{const P={...L};return delete P[O],P})},T=O=>{C("code",O.toUpperCase())},E=O=>{C("events",O)},k=async O=>{O.preventDefault();const{isValid:M,errors:L}=v(u);if(!M){x(L);return}const P={title:u.title.trim(),description:u.description.trim(),code:u.code.trim().toUpperCase(),maxUsage:parseInt(u.maxUsage,10),isActive:u.isActive};u.events.length>0&&(P.events=u.events),(await s(P))?.success&&t()};return r.jsx(Lt,{isOpen:e,onClose:t,title:p?"Edit Voucher":"Create Voucher",size:"lg",children:r.jsxs("form",{onSubmit:k,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:u.title,onChange:O=>C("title",O.target.value),placeholder:"e.g., Festival Food Court Discount",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.title&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.title})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{value:u.description,onChange:O=>C("description",O.target.value),placeholder:"e.g., Get Rs.200 off at the food court for first 1500 buyers",rows:3,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${m.description?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.description&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.description})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Voucher Code ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:u.code,onChange:O=>T(O.target.value),placeholder:"e.g., FESTIVAL200",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none font-mono uppercase transition-colors ${m.code?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.code&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.code})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Maximum Usage ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",value:u.maxUsage,onChange:O=>C("maxUsage",O.target.value),placeholder:"e.g., 1500",min:"1",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.maxUsage?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.maxUsage&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.maxUsage})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Linked Events",r.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),r.jsx(BR,{selectedIds:u.events,onChange:E,disabled:n,placeholder:"Select events to link this voucher..."}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to make the voucher available for all events"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u.isActive,onChange:O=>C("isActive",O.target.checked),disabled:n,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800"})]}),r.jsx("span",{className:"text-sm text-gray-700",children:u.isActive?"Active":"Disabled"})]}),a&&r.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[r.jsx(Mt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-700",children:a})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:n?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{children:p?"Updating...":"Creating..."})]}):r.jsx("span",{children:p?"Update Voucher":"Create Voucher"})})]})]})})}const aO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",zde=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,Vde=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500";function $de({isOpen:e,onClose:t,voucher:s,isLoading:n=!1}){if(!s&&!n)return null;const a=s?zde(s.usageCount||0,s.maxUsage):0;return r.jsx(Lt,{isOpen:e,onClose:t,title:"Voucher Details",size:"lg",children:n?r.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading voucher details..."})]}):s?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 pb-4 border-b border-gray-200",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.title}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.description})]}),r.jsxs("span",{className:`shrink-0 px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1.5 ${s.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:[s.isActive?r.jsx(ls,{className:"h-4 w-4"}):r.jsx(wr,{className:"h-4 w-4"}),s.isActive?"Active":"Disabled"]})]}),r.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(Vc,{className:"h-5 w-5 text-gray-800"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-800 font-medium uppercase",children:"Voucher Code"}),r.jsx("p",{className:"text-xl font-bold text-blue-900 font-mono tracking-wider",children:s.code})]})]})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Usage Progress"}),r.jsxs("span",{className:"text-sm text-gray-500",children:[s.usageCount||0," / ",s.maxUsage," claimed"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:`h-3 rounded-full transition-all ${Vde(a)}`,style:{width:`${a}%`}})}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a,"% used (",s.maxUsage-(s.usageCount||0)," remaining)"]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(rw,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Maximum Usage"})]}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.maxUsage?.toLocaleString("en-IN")})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Yn,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Times Used"})]}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(s.usageCount||0).toLocaleString("en-IN")})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(jr,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Created"})]}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:aO(s.createdAt)})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(jr,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Last Updated"})]}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:aO(s.updatedAt)})]})]}),s.createdBy&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Ls,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Created By"})]}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.createdBy.name||s.createdBy.email}),s.createdBy.email&&s.createdBy.name&&r.jsx("p",{className:"text-xs text-gray-500",children:s.createdBy.email})]}),s.events&&s.events.length>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(fr,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Linked Events"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:s.events.map(l=>r.jsx("span",{className:"px-3 py-1.5 bg-blue-100 text-gray-900 rounded-full text-sm font-medium",children:l.name||l},l._id||l))})]}),s.claimedPhones&&s.claimedPhones.length>0&&r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsxs("p",{className:"text-sm text-gray-500",children:[r.jsx("span",{className:"font-medium",children:s.claimedPhones.length})," phone number",s.claimedPhones.length!==1?"s":""," have claimed this voucher"]})}),r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsx("button",{onClick:t,className:"w-full px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Close"})})]}):r.jsx("div",{className:"py-12 text-center text-gray-500",children:r.jsx("p",{children:"No voucher data available"})})})}const iO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",lO=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,oO=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500",ug={active:"bg-green-100 text-green-700",disabled:"bg-gray-100 text-gray-600"};function qde(){const{vouchers:e,pagination:t,filters:s,isLoading:n,error:a,fetchVouchers:l,createVoucher:u,getVoucherById:f,updateVoucher:m,toggleVoucherStatus:x,deleteVoucher:p,searchVouchers:v,updateFilters:C,resetFilters:T,changePage:E,clearError:k}=Fde(),[O,M]=w.useState(!1),[L,P]=w.useState(!1),[H,B]=w.useState(!1),[F,R]=w.useState(null),[z,U]=w.useState(null),[Y,$]=w.useState(!1),[G,ee]=w.useState(!1),[ce,se]=w.useState(null),[J,ne]=w.useState(!1),[pe,be]=w.useState(s.search||""),[te,X]=w.useState(s.isActive||""),re=w.useCallback(()=>{se(null),U(null),M(!0)},[]),ge=w.useCallback(async Se=>{se(null),$(!0);try{const tt=await f(Se._id);tt.success?(U(tt.data),M(!0)):alert(tt.error||"Failed to load voucher details")}catch{alert("An unexpected error occurred")}finally{$(!1)}},[f]),de=w.useCallback(()=>{M(!1),se(null),U(null)},[]),je=w.useCallback(async Se=>{ee(!0),se(null);try{let tt;return z?tt=await m(z._id,Se):tt=await u(Se),tt.success?tt:(se(tt.error||"Failed to save voucher"),{success:!1})}catch{return se("An unexpected error occurred"),{success:!1}}finally{ee(!1)}},[u,m,z]),oe=w.useCallback(async Se=>{R(Se),P(!0),$(!0);try{const tt=await f(Se._id);tt.success&&R(tt.data)}catch(tt){console.error("[Vouchers] Failed to fetch details:",tt)}finally{$(!1)}},[f]),fe=w.useCallback(()=>{P(!1),R(null)},[]),qe=w.useCallback(async Se=>{ee(!0);try{const tt=await x(Se._id,Se.isActive);tt.success||alert(tt.error||"Failed to update voucher status")}catch{alert("An unexpected error occurred")}finally{ee(!1)}},[x]),Ne=w.useCallback(Se=>{R(Se),B(!0)},[]),Xe=w.useCallback(()=>{B(!1),R(null)},[]),st=w.useCallback(async()=>{if(F){ee(!0);try{const Se=await p(F._id);Se.success?Xe():alert(Se.error||"Failed to delete voucher")}catch{alert("An unexpected error occurred")}finally{ee(!1)}}},[F,p,Xe]),Le=w.useCallback(Se=>{const tt=Se.target.value;be(tt),v(tt)},[v]),we=w.useCallback(()=>{C({search:pe,isActive:te}),ne(!1)},[pe,te,C]),Ue=w.useCallback(()=>{be(""),X(""),T(),ne(!1)},[T]),ue=w.useCallback(()=>{l(t.currentPage)},[l,t.currentPage]),He=w.useMemo(()=>s.search||s.isActive!=="",[s]);return r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Vouchers"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Create and manage discount vouchers"})]}),r.jsxs("button",{onClick:re,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium",children:[r.jsx(kr,{className:"h-5 w-5"}),r.jsx("span",{children:"Create Voucher"})]})]}),a&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[r.jsx(Mt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error loading vouchers"}),r.jsx("p",{className:"text-sm text-red-700 mt-0.5",children:a})]}),r.jsx("button",{onClick:k,className:"shrink-0 text-red-600 hover:text-red-800",children:""})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",value:pe,onChange:Le,placeholder:"Search vouchers...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),r.jsxs("button",{onClick:()=>ne(!J),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${He?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(Va,{className:"h-4 w-4"}),r.jsx("span",{children:"Filters"}),He&&r.jsx("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full",children:(s.search?1:0)+(s.isActive!==""?1:0)}),r.jsx(fi,{className:`h-4 w-4 transition-transform ${J?"rotate-180":""}`})]}),r.jsxs("button",{onClick:ue,disabled:n,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[r.jsx(qs,{className:`h-4 w-4 ${n?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),r.jsxs("div",{className:"ml-auto text-sm text-gray-500",children:[t.totalCount," voucher",t.totalCount!==1?"s":""," total"]})]}),J&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{value:te,onChange:Se=>X(Se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"true",children:"Active"}),r.jsx("option",{value:"false",children:"Disabled"})]})]}),r.jsxs("div",{className:"flex items-end gap-2 sm:col-span-1 lg:col-span-2",children:[r.jsx("button",{onClick:we,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Apply"}),r.jsx("button",{onClick:Ue,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]})})]}),r.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Code"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Title"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Usage"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Events"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Created"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsx("tbody",{children:n&&e.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading vouchers..."})]})}):e.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[r.jsx(Vc,{className:"h-12 w-12 text-gray-300 mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No vouchers found"}),r.jsx("button",{onClick:re,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first voucher"})]})}):e.map(Se=>{const tt=lO(Se.usageCount||0,Se.maxUsage);return r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"px-2.5 py-1 bg-gray-100 text-gray-700 rounded font-mono text-sm font-medium",children:Se.code})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("p",{className:"font-medium text-gray-900 truncate max-w-[200px]",children:Se.title})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"w-32",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[r.jsxs("span",{className:"text-gray-600",children:[Se.usageCount||0," / ",Se.maxUsage]}),r.jsxs("span",{className:"text-gray-400",children:[tt,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:r.jsx("div",{className:`h-1.5 rounded-full ${oO(tt)}`,style:{width:`${tt}%`}})})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Se.isActive?ug.active:ug.disabled}`,children:Se.isActive?"Active":"Disabled"})}),r.jsx("td",{className:"px-6 py-4",children:Se.events&&Se.events.length>0?r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(fr,{className:"h-4 w-4 text-gray-400"}),r.jsxs("span",{className:"text-sm text-gray-600",children:[Se.events.length," event",Se.events.length!==1?"s":""]})]}):r.jsx("span",{className:"text-sm text-gray-400",children:"All events"})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:iO(Se.createdAt)}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx("button",{onClick:()=>qe(Se),disabled:G,className:`p-2 rounded-lg transition-colors ${Se.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:Se.isActive?"Disable voucher":"Enable voucher",children:Se.isActive?r.jsx(wl,{className:"h-5 w-5"}):r.jsx(Ui,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>oe(Se),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details",children:r.jsx(Lr,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>ge(Se),disabled:Y,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit voucher",children:r.jsx(Js,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>Ne(Se),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:r.jsx(hr,{className:"h-4 w-4"})})]})})]},Se._id)})})]})}),t.totalPages>0&&r.jsx(Dr,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:E,itemLabel:"vouchers"})]}),r.jsx("div",{className:"md:hidden space-y-4",children:n&&e.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading vouchers..."})]}):e.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx(Vc,{className:"h-12 w-12 text-gray-300 mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No vouchers found"}),r.jsx("button",{onClick:re,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first voucher"})]}):r.jsxs(r.Fragment,{children:[e.map(Se=>{const tt=lO(Se.usageCount||0,Se.maxUsage);return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 rounded font-mono text-sm font-medium",children:Se.code}),r.jsx("p",{className:"font-medium text-gray-900 mt-2 truncate",children:Se.title}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:iO(Se.createdAt)})]}),r.jsx("span",{className:`shrink-0 px-2.5 py-1 rounded-full text-xs font-medium ${Se.isActive?ug.active:ug.disabled}`,children:Se.isActive?"Active":"Disabled"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[r.jsxs("span",{className:"text-gray-600",children:[Se.usageCount||0," / ",Se.maxUsage," claimed"]}),r.jsxs("span",{className:"text-gray-400",children:[tt,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full ${oO(tt)}`,style:{width:`${tt}%`}})})]}),Se.events&&Se.events.length>0&&r.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[r.jsx(fr,{className:"h-4 w-4 text-gray-400"}),r.jsxs("span",{children:[Se.events.length," event",Se.events.length!==1?"s":""]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[r.jsx("button",{onClick:()=>qe(Se),disabled:G,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Se.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Se.isActive?r.jsxs(r.Fragment,{children:[r.jsx(wl,{className:"h-4 w-4"}),"On"]}):r.jsxs(r.Fragment,{children:[r.jsx(Ui,{className:"h-4 w-4"}),"Off"]})}),r.jsxs("button",{onClick:()=>oe(Se),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:[r.jsx(Lr,{className:"h-4 w-4"}),"Details"]}),r.jsx("button",{onClick:()=>ge(Se),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:r.jsx(Js,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>Ne(Se),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:r.jsx(hr,{className:"h-4 w-4"})})]})]},Se._id)}),t.totalPages>0&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsx(Dr,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:E,itemLabel:"vouchers"})})]})}),r.jsx(Ude,{isOpen:O,onClose:de,onSubmit:je,isLoading:G,serverError:ce,voucherToEdit:z}),r.jsx($de,{isOpen:L,onClose:fe,voucher:F,isLoading:Y}),r.jsx(en,{isOpen:H,onClose:Xe,onConfirm:st,title:"Delete Voucher",message:`Are you sure you want to delete the voucher "${F?.code}"? This action can be undone by restoring from deleted vouchers.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:G})]})}const la={BASE:"/web/sessions",GET_BY_ID:e=>`/web/sessions/${e}`,UPDATE:e=>`/web/sessions/${e}`,DELETE:e=>`/web/sessions/${e}`,TOGGLE_LIVE:e=>`/web/sessions/${e}/toggle-live`,DELETED:"/web/sessions/deleted",RESTORE:e=>`/web/sessions/${e}/restore`,PERMANENT_DELETE:e=>`/web/sessions/${e}/permanent`,BOOKINGS:"/web/sessions/bookings",UPDATE_BOOKING:e=>`/web/sessions/bookings/${e}`},vo={create:async e=>{console.log("[SessionService] Creating session:",e.title);const t=await Te(Ee.post(la.BASE,e));return t.success?console.log("[SessionService] Session created successfully:",t.data.session?._id):console.error("[SessionService] Failed to create session:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.isLive!==void 0&&e.isLive!==""&&t.append("isLive",e.isLive),e.sessionType&&t.append("sessionType",e.sessionType),e.search&&t.append("search",e.search);const s=t.toString(),n=s?`${la.BASE}?${s}`:la.BASE;console.log("[SessionService] Fetching sessions with params:",e);const a=await Te(Ee.get(n));return a.success?console.log("[SessionService] Fetched sessions:",a.data.sessions?.length):console.error("[SessionService] Failed to fetch sessions:",a.message),a},getById:async e=>{console.log("[SessionService] Fetching session by ID:",e);const t=await Te(Ee.get(la.GET_BY_ID(e)));return t.success?console.log("[SessionService] Fetched session:",t.data.session?._id):console.error("[SessionService] Failed to fetch session:",t.message),t},update:async(e,t)=>{console.log("[SessionService] Updating session:",e);const s=await Te(Ee.put(la.UPDATE(e),t));return s.success?console.log("[SessionService] Session updated successfully"):console.error("[SessionService] Failed to update session:",s.message),s},toggleLive:async e=>{console.log("[SessionService] Toggling session live status:",e);const t=await Te(Ee.patch(la.TOGGLE_LIVE(e)));return t.success?console.log("[SessionService] Session live status toggled successfully"):console.error("[SessionService] Failed to toggle session live status:",t.message),t},delete:async e=>{console.log("[SessionService] Deleting session:",e);const t=await Te(Ee.delete(la.DELETE(e)));return t.success?console.log("[SessionService] Session deleted successfully"):console.error("[SessionService] Failed to delete session:",t.message),t},getDeleted:async()=>{console.log("[SessionService] Fetching deleted sessions");const e=await Te(Ee.get(la.DELETED));return e.success?console.log("[SessionService] Fetched deleted sessions:",e.data.sessions?.length):console.error("[SessionService] Failed to fetch deleted sessions:",e.message),e},restore:async e=>{console.log("[SessionService] Restoring session:",e);const t=await Te(Ee.post(la.RESTORE(e)));return t.success?console.log("[SessionService] Session restored successfully"):console.error("[SessionService] Failed to restore session:",t.message),t},permanentDelete:async e=>{console.log("[SessionService] Permanently deleting session:",e);const t=await Te(Ee.delete(la.PERMANENT_DELETE(e)));return t.success?console.log("[SessionService] Session permanently deleted"):console.error("[SessionService] Failed to permanently delete session:",t.message),t},getBookings:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.status&&t.append("status",e.status),e.sessionId&&t.append("sessionId",e.sessionId);const s=t.toString(),n=s?`${la.BOOKINGS}?${s}`:la.BOOKINGS;console.log("[SessionService] Fetching bookings with params:",e);const a=await Te(Ee.get(n));return a.success?console.log("[SessionService] Fetched bookings:",a.data.bookings?.length):console.error("[SessionService] Failed to fetch bookings:",a.message),a},updateBooking:async(e,t)=>{console.log("[SessionService] Updating booking:",e,"with status:",t.status);const s=await Te(Ee.put(la.UPDATE_BOOKING(e),t));return s.success?console.log("[SessionService] Booking updated successfully"):console.error("[SessionService] Failed to update booking:",s.message),s}};function Hde(e={}){const[t,s]=w.useState([]),[n,a]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[l,u]=w.useState({search:"",isLive:"",sessionType:"",category:"",sortBy:"createdAt",sortOrder:"desc",...e}),[f,m]=w.useState(!1),[x,p]=w.useState(null),[v,C]=w.useState([]),[T,E]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[k,O]=w.useState({status:"",sessionId:""}),[M,L]=w.useState(!1),[P,H]=w.useState(null),B=w.useRef(null),F=w.useCallback(async(de=n.currentPage)=>{m(!0),p(null);try{const je={page:de,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.isLive!==""&&{isLive:l.isLive},...l.sessionType&&{sessionType:l.sessionType},...l.category&&{category:l.category}};console.log("[useSessions] Fetching sessions with params:",je);const oe=await vo.getAll(je);oe.success?(s(oe.data.sessions||[]),a({currentPage:oe.data.pagination?.currentPage||1,totalPages:oe.data.pagination?.totalPages||0,totalCount:oe.data.pagination?.totalCount||0,limit:oe.data.pagination?.limit||10})):(p(oe.message),s([]))}catch{p("Failed to fetch sessions"),s([])}finally{m(!1)}},[l,n.limit]),R=w.useCallback(async de=>{try{const je=await vo.create(de);return je.success?(await F(1),{success:!0,data:je.data}):{success:!1,error:je.message,validationErrors:je.error}}catch{return{success:!1,error:"Failed to create session"}}},[F]),z=w.useCallback(async de=>{try{const je=await vo.getById(de);return je.success?{success:!0,data:je.data.session}:{success:!1,error:je.message}}catch{return{success:!1,error:"Failed to fetch session details"}}},[]),U=w.useCallback(async(de,je)=>{try{const oe=await vo.update(de,je);return oe.success?(s(fe=>fe.map(qe=>qe._id===de?{...qe,...oe.data.session}:qe)),{success:!0,data:oe.data}):{success:!1,error:oe.message,validationErrors:oe.error}}catch{return{success:!1,error:"Failed to update session"}}},[]),Y=w.useCallback(async(de,je)=>{try{const oe=await vo.toggleLive(de);return oe.success?(s(fe=>fe.map(qe=>qe._id===de?{...qe,isLive:!je}:qe)),{success:!0}):{success:!1,error:oe.message}}catch{return{success:!1,error:"Failed to update session status"}}},[]),$=w.useCallback(async de=>{try{const je=await vo.delete(de);return je.success?(s(oe=>oe.filter(fe=>fe._id!==de)),a(oe=>({...oe,totalCount:oe.totalCount-1,totalPages:Math.ceil((oe.totalCount-1)/oe.limit)})),{success:!0}):{success:!1,error:je.message}}catch{return{success:!1,error:"Failed to delete session"}}},[]),G=w.useCallback(de=>{B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{u(je=>({...je,search:de}))},300)},[]),ee=w.useCallback(de=>{u(je=>({...je,...de}))},[]),ce=w.useCallback(()=>{u({search:"",isLive:"",sessionType:"",category:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),se=w.useCallback(de=>{F(de)},[F]),J=w.useCallback(de=>{a(je=>({...je,limit:de}))},[]),ne=w.useCallback(()=>{p(null)},[]),pe=w.useCallback(async(de=T.currentPage)=>{L(!0),H(null);try{const je={page:de,limit:T.limit,...k.status&&{status:k.status},...k.sessionId&&{sessionId:k.sessionId}};console.log("[useSessions] Fetching bookings with params:",je);const oe=await vo.getBookings(je);oe.success?(C(oe.data.bookings||[]),E({currentPage:oe.data.pagination?.currentPage||1,totalPages:oe.data.pagination?.totalPages||0,totalCount:oe.data.pagination?.totalCount||0,limit:oe.data.pagination?.limit||10}),console.log("[useSessions] Fetched bookings:",oe.data.bookings?.length)):(console.error("[useSessions] Failed to fetch bookings:",oe.message),H(oe.message||"Failed to fetch bookings"),C([]))}catch(je){console.error("[useSessions] Error fetching bookings:",je),H("Failed to fetch bookings"),C([])}finally{L(!1)}},[k,T.limit]),be=w.useCallback(async(de,je)=>{try{console.log("[useSessions] Updating booking:",de,"with data:",je);const oe=await vo.updateBooking(de,je);return oe.success?(console.log("[useSessions] Booking updated successfully"),C(fe=>fe.map(qe=>qe._id===de?{...qe,...oe.data.booking}:qe)),{success:!0,data:oe.data}):(console.error("[useSessions] Failed to update booking:",oe.message),{success:!1,error:oe.message})}catch(oe){return console.error("[useSessions] Error updating booking:",oe),{success:!1,error:"Failed to update booking"}}},[]),te=w.useCallback(de=>{O(je=>({...je,...de}))},[]),X=w.useCallback(()=>{O({status:"",sessionId:""})},[]),re=w.useCallback(de=>{pe(de)},[pe]),ge=w.useCallback(()=>{H(null)},[]);return w.useEffect(()=>{F(1)},[l]),w.useEffect(()=>()=>{B.current&&clearTimeout(B.current)},[]),{sessions:t,pagination:n,filters:l,isLoading:f,error:x,fetchSessions:F,createSession:R,getSessionById:z,updateSession:U,toggleSessionLive:Y,deleteSession:$,searchSessions:G,updateFilters:ee,resetFilters:ce,changePage:se,changeLimit:J,clearError:ne,bookings:v,bookingPagination:T,bookingFilters:k,isLoadingBookings:M,bookingError:P,fetchBookings:pe,updateBooking:be,updateBookingFilters:te,resetBookingFilters:X,changeBookingPage:re,clearBookingError:ge}}const Gde=[{value:"therapeutic",label:"Therapeutic"},{value:"mental_wellness",label:"Mental Wellness"},{value:"career",label:"Career"},{value:"relationships",label:"Relationships"},{value:"lifestyle",label:"Lifestyle"},{value:"other",label:"Other"}],cO=()=>({title:"",shortDescription:"",longDescription:"",price:"",compareAtPrice:"",duration:"",sessionType:"OTO",category:"mental_wellness",isLive:!1,host:"",hostEmail:"",hostPhone:"",availableSlots:"",calendlyLink:"",sessionDate:"",imageUrl:"",tags:[]});function Yde({isOpen:e,onClose:t,onSubmit:s,isLoading:n=!1,serverError:a=null,sessionToEdit:l=null}){const[u,f]=w.useState(cO()),[m,x]=w.useState({}),p=!!l,[v,C]=w.useState("");w.useEffect(()=>{e&&(f(l?{title:l.title||"",shortDescription:l.shortDescription||"",longDescription:l.longDescription||"",price:l.price?.toString()||"",compareAtPrice:l.compareAtPrice?.toString()||"",duration:l.duration?.toString()||"",sessionType:l.sessionType||"OTO",category:l.category||"mental_wellness",isLive:l.isLive??!1,host:l.host||"",hostEmail:l.hostEmail||"",hostPhone:l.hostPhone||"",availableSlots:l.availableSlots?.toString()||"",calendlyLink:l.calendlyLink||"",sessionDate:l.sessionDate?new Date(l.sessionDate).toISOString().slice(0,16):"",imageUrl:l.imageUrl||"",tags:l.tags||[]}:cO()),x({}),C(""))},[e,l]);const T=O=>{const M={};if(O.title.trim()?O.title.length>200&&(M.title="Title must be less than 200 characters"):M.title="Title is required",O.shortDescription.trim()?O.shortDescription.length>500&&(M.shortDescription="Short description must be less than 500 characters"):M.shortDescription="Short description is required",O.longDescription.trim()?O.longDescription.length>5e3&&(M.longDescription="Long description must be less than 5000 characters"):M.longDescription="Long description is required",!O.price)M.price="Price is required";else{const L=parseFloat(O.price);(isNaN(L)||L<0)&&(M.price="Price must be a positive number")}if(O.compareAtPrice){const L=parseFloat(O.compareAtPrice),P=parseFloat(O.price);isNaN(L)||L<0?M.compareAtPrice="Compare at price must be a positive number":!isNaN(P)&&L<P&&(M.compareAtPrice="Compare at price must be greater than or equal to price")}if(!O.duration)M.duration="Duration is required";else{const L=parseInt(O.duration,10);isNaN(L)||L<1?M.duration="Duration must be at least 1 minute":L>480&&(M.duration="Duration cannot exceed 480 minutes (8 hours)")}if(O.host.trim()?O.host.length>100&&(M.host="Host name must be less than 100 characters"):M.host="Host name is required",O.hostEmail&&O.hostEmail.trim()&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O.hostEmail.trim())||(M.hostEmail="Please provide a valid email address")),O.hostPhone&&O.hostPhone.trim()&&(/^[\d\s+\-()]+$/.test(O.hostPhone.trim())?O.hostPhone.trim().length<10&&(M.hostPhone="Phone number must be at least 10 digits"):M.hostPhone="Please provide a valid phone number"),O.sessionType==="OTM"&&O.availableSlots){const L=parseInt(O.availableSlots,10);(isNaN(L)||L<1)&&(M.availableSlots="Available slots must be at least 1")}return O.calendlyLink.trim()?/^https?:\/\/.+/.test(O.calendlyLink)||(M.calendlyLink="Please provide a valid URL"):M.calendlyLink="Calendly link is required",O.imageUrl&&!/^https?:\/\/.+/.test(O.imageUrl)&&(M.imageUrl="Please provide a valid image URL"),{isValid:Object.keys(M).length===0,errors:M}},E=(O,M)=>{f(L=>({...L,[O]:M})),m[O]&&x(L=>{const P={...L};return delete P[O],P})},k=async O=>{O.preventDefault();const{isValid:M,errors:L}=T(u);if(!M){x(L);return}const P={title:u.title.trim(),shortDescription:u.shortDescription.trim(),longDescription:u.longDescription.trim(),price:parseFloat(u.price),duration:parseInt(u.duration,10),sessionType:u.sessionType,category:u.category,isLive:u.isLive,host:u.host.trim()};u.compareAtPrice&&(P.compareAtPrice=parseFloat(u.compareAtPrice)),u.availableSlots&&(P.availableSlots=parseInt(u.availableSlots,10)),P.calendlyLink=u.calendlyLink.trim(),u.sessionDate&&(P.sessionDate=new Date(u.sessionDate).toISOString()),u.imageUrl.trim()&&(P.imageUrl=u.imageUrl.trim()),u.hostEmail.trim()&&(P.hostEmail=u.hostEmail.trim()),u.hostPhone.trim()&&(P.hostPhone=u.hostPhone.trim()),u.tags.length>0&&(P.tags=u.tags),(await s(P))?.success&&t()};return r.jsx(Lt,{isOpen:e,onClose:t,title:p?"Edit Session":"Create Session",size:"xl",children:r.jsxs("form",{onSubmit:k,className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:u.title,onChange:O=>E("title",O.target.value),placeholder:"e.g., One-on-One Career Coaching",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.title&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.title})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Short Description ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{value:u.shortDescription,onChange:O=>E("shortDescription",O.target.value),placeholder:"Brief overview of the session...",rows:2,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${m.shortDescription?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.shortDescription&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.shortDescription})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Long Description ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{value:u.longDescription,onChange:O=>E("longDescription",O.target.value),placeholder:"Detailed description of what participants will learn...",rows:4,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${m.longDescription?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.longDescription&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.longDescription})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price () ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",value:u.price,onChange:O=>E("price",O.target.value),placeholder:"e.g., 999",min:"0",step:"0.01",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.price?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.price&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.price})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compare at Price ()"}),r.jsx("input",{type:"number",value:u.compareAtPrice,onChange:O=>E("compareAtPrice",O.target.value),placeholder:"e.g., 1499",min:"0",step:"0.01",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.compareAtPrice?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.compareAtPrice&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.compareAtPrice})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Duration (mins) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",value:u.duration,onChange:O=>E("duration",O.target.value),placeholder:"e.g., 60",min:"1",max:"480",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.duration?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.duration&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.duration})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Session Type ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:u.sessionType,onChange:O=>E("sessionType",O.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`,children:[r.jsx("option",{value:"OTO",children:"One-to-One (OTO)"}),r.jsx("option",{value:"OTM",children:"One-to-Many (OTM)"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("select",{value:u.category,onChange:O=>E("category",O.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`,children:Gde.map(O=>r.jsx("option",{value:O.value,children:O.label},O.value))})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Host Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:u.host,onChange:O=>E("host",O.target.value),placeholder:"e.g., John Doe",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.host?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.host&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.host})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Host Email",r.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),r.jsx("input",{type:"email",value:u.hostEmail,onChange:O=>E("hostEmail",O.target.value),placeholder:"host@example.com",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.hostEmail?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.hostEmail&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.hostEmail})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Host Phone",r.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),r.jsx("input",{type:"tel",value:u.hostPhone,onChange:O=>E("hostPhone",O.target.value),placeholder:"+91 9876543210",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.hostPhone?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.hostPhone&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.hostPhone})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Available Slots",u.sessionType==="OTM"&&r.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(for group sessions)"})]}),r.jsx("input",{type:"number",value:u.availableSlots,onChange:O=>E("availableSlots",O.target.value),placeholder:u.sessionType==="OTO"?"1":"e.g., 50",min:"1",disabled:n||u.sessionType==="OTO",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.availableSlots?"border-red-500":"border-gray-300"} ${n||u.sessionType==="OTO"?"bg-gray-100":""}`}),m.availableSlots&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.availableSlots}),u.sessionType==="OTO"&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Fixed to 1 for one-to-one sessions"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Session Date",r.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),r.jsx("input",{type:"datetime-local",value:u.sessionDate,onChange:O=>E("sessionDate",O.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Calendly Link ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"url",value:u.calendlyLink,onChange:O=>E("calendlyLink",O.target.value),placeholder:"https://calendly.com/your-link",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.calendlyLink?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.calendlyLink&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.calendlyLink})]}),r.jsx(ha,{label:"Session Image",value:u.imageUrl,onUpload:O=>E("imageUrl",O),disabled:n,error:m.imageUrl,type:"image",folder:"sessions",placeholder:"Drop image here or click to upload"}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tags",r.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:v,onChange:O=>C(O.target.value),onKeyDown:O=>{if(O.key==="Enter"){O.preventDefault();const M=v.trim().toLowerCase();M&&!u.tags.includes(M)&&(E("tags",[...u.tags,M]),C(""))}},placeholder:"Type a tag and press Enter",disabled:n,className:`flex-1 px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`}),r.jsx("button",{type:"button",onClick:()=>{const O=v.trim().toLowerCase();O&&!u.tags.includes(O)&&(E("tags",[...u.tags,O]),C(""))},disabled:n||!v.trim(),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:r.jsx(kr,{className:"h-4 w-4"})})]}),u.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:u.tags.map((O,M)=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:[O,r.jsx("button",{type:"button",onClick:()=>{E("tags",u.tags.filter((L,P)=>P!==M))},disabled:n,className:"text-gray-500 hover:text-gray-700",children:r.jsx(Kr,{className:"h-3 w-3"})})]},M))})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u.isLive,onChange:O=>E("isLive",O.target.checked),disabled:n,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]}),r.jsx("span",{className:"text-sm text-gray-700",children:u.isLive?"Live (Available for booking)":"Not Live"})]}),a&&r.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[r.jsx(Mt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-700",children:a})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 sticky bottom-0 bg-white",children:[r.jsx("button",{type:"button",onClick:t,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:n?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{children:p?"Updating...":"Creating..."})]}):r.jsx("span",{children:p?"Update Session":"Create Session"})})]})]})})}const e2=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",uO=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),Xde=e=>{if(!e)return"-";if(e<60)return`${e} min`;const t=Math.floor(e/60),s=e%60;return s>0?`${t}h ${s}m`:`${t}h`},Wde=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,Kde=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500";function Zde({isOpen:e,onClose:t,session:s,isLoading:n=!1}){if(!s&&!n)return null;const a=s?.bookedSlots||0,l=s?.availableSlots,u=Wde(a,l),f=s?.discountPercent||0;return r.jsx(Lt,{isOpen:e,onClose:t,title:"Session Details",size:"lg",children:n?r.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading session details..."})]}):s?r.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-2",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 pb-4 border-b border-gray-200",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"flex items-center gap-2 mb-1",children:r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${s.sessionType==="OTO"?"bg-purple-100 text-purple-700":"bg-blue-100 text-gray-900"}`,children:s.sessionType==="OTO"?"One-to-One":"One-to-Many"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.title}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.shortDescription})]}),r.jsxs("span",{className:`shrink-0 px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1.5 ${s.isLive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:[s.isLive?r.jsx(ls,{className:"h-4 w-4"}):r.jsx(wr,{className:"h-4 w-4"}),s.isLive?"Live":"Not Live"]})]}),s.imageUrl&&r.jsx("div",{className:"rounded-lg overflow-hidden bg-gray-100",children:r.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-48 object-cover",onError:m=>{m.target.style.display="none"}})}),r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(sw,{className:"h-5 w-5 text-gray-800"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-800 font-medium uppercase",children:"Price"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-900",children:uO(s.price)}),s.compareAtPrice&&s.compareAtPrice>s.price&&r.jsx("p",{className:"text-sm text-gray-500 line-through",children:uO(s.compareAtPrice)})]})]})]}),f>0&&r.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full",children:[r.jsx(Wz,{className:"h-4 w-4"}),r.jsxs("span",{className:"font-semibold",children:[f,"% OFF"]})]})]})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:s.longDescription})]}),s.sessionType==="OTM"&&l&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Booking Progress"}),r.jsxs("span",{className:"text-sm text-gray-500",children:[a," / ",l," booked"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:`h-3 rounded-full transition-all ${Kde(u)}`,style:{width:`${u}%`}})}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[u,"% filled (",l-a," slots remaining)"]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(jr,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Duration"})]}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:Xde(s.duration)})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Ls,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Host"})]}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.host})]}),s.sessionDate&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(fr,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Session Date"})]}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e2(s.sessionDate)})]}),l&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Yn,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:s.sessionType==="OTO"?"Slot":"Available Slots"})]}),r.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[l-a," remaining"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(jr,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Created"})]}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e2(s.createdAt)})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(jr,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Last Updated"})]}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e2(s.updatedAt)})]})]}),s.calendlyLink&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(nw,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Booking Link"})]}),r.jsx("a",{href:s.calendlyLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-800 hover:text-black hover:underline break-all",children:s.calendlyLink})]}),s.createdBy&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Ls,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Created By"})]}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.createdBy.name||s.createdBy.email}),s.createdBy.email&&s.createdBy.name&&r.jsx("p",{className:"text-xs text-gray-500",children:s.createdBy.email})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200 sticky bottom-0 bg-white",children:r.jsx("button",{onClick:t,className:"w-full px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Close"})})]}):r.jsx("div",{className:"py-12 text-center text-gray-500",children:r.jsx("p",{children:"No session data available"})})})}const $h=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),dO=e=>{if(!e)return"-";if(e<60)return`${e}m`;const t=Math.floor(e/60),s=e%60;return s>0?`${t}h ${s}m`:`${t}h`},Qde=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,Jde=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500",dg={live:"bg-green-100 text-green-700",notLive:"bg-gray-100 text-gray-600"},hO={OTO:"bg-purple-100 text-purple-700",OTM:"bg-gray-100 text-gray-700"},fO=[{value:"therapeutic",label:"Therapeutic"},{value:"mental_wellness",label:"Mental Wellness"},{value:"career",label:"Career"},{value:"relationships",label:"Relationships"},{value:"lifestyle",label:"Lifestyle"},{value:"other",label:"Other"}],mO={therapeutic:"bg-blue-100 text-blue-700",mental_wellness:"bg-green-100 text-green-700",career:"bg-amber-100 text-amber-700",relationships:"bg-pink-100 text-pink-700",lifestyle:"bg-indigo-100 text-indigo-700",other:"bg-gray-100 text-gray-700"},hg={pending:{color:"bg-amber-100 text-amber-700",label:"Pending"},confirmed:{color:"bg-blue-100 text-blue-700",label:"Confirmed"},completed:{color:"bg-green-100 text-green-700",label:"Completed"},cancelled:{color:"bg-red-100 text-red-700",label:"Cancelled"},no_show:{color:"bg-gray-100 text-gray-700",label:"No Show"}},gO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",ehe=e=>e?new Date(e).toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";function the(){const{sessions:e,pagination:t,filters:s,isLoading:n,error:a,fetchSessions:l,createSession:u,getSessionById:f,updateSession:m,toggleSessionLive:x,deleteSession:p,searchSessions:v,updateFilters:C,resetFilters:T,changePage:E,clearError:k,bookings:O,bookingPagination:M,bookingFilters:L,isLoadingBookings:P,bookingError:H,fetchBookings:B,updateBooking:F,updateBookingFilters:R,resetBookingFilters:z,changeBookingPage:U,clearBookingError:Y}=Hde(),[$,G]=w.useState(!1),[ee,ce]=w.useState(!1),[se,J]=w.useState(!1),[ne,pe]=w.useState(null),[be,te]=w.useState(null),[X,re]=w.useState(!1),[ge,de]=w.useState(!1),[je,oe]=w.useState(null),[fe,qe]=w.useState("sessions"),[Ne,Xe]=w.useState(!1),[st,Le]=w.useState(s.search||""),[we,Ue]=w.useState(s.isLive||""),[ue,He]=w.useState(s.sessionType||""),[Se,tt]=w.useState(s.category||""),[lt,pt]=w.useState(L.status||""),[We,at]=w.useState(L.sessionId||""),[Fe,ft]=w.useState(null),[Gt,rr]=w.useState(!1),mr=w.useCallback(()=>{oe(null),te(null),G(!0)},[]),ct=w.useCallback(async ze=>{oe(null),re(!0);try{const jt=await f(ze._id);jt.success?(te(jt.data),G(!0)):alert(jt.error||"Failed to load session details")}catch{alert("An unexpected error occurred")}finally{re(!1)}},[f]),Et=w.useCallback(()=>{G(!1),oe(null),te(null)},[]),_r=w.useCallback(async ze=>{de(!0),oe(null);try{let jt;return be?jt=await m(be._id,ze):jt=await u(ze),jt.success?jt:(oe(jt.error||"Failed to save session"),{success:!1})}catch{return oe("An unexpected error occurred"),{success:!1}}finally{de(!1)}},[u,m,be]),Sr=w.useCallback(async ze=>{pe(ze),ce(!0),re(!0);try{const jt=await f(ze._id);jt.success&&pe(jt.data)}catch(jt){console.error("[Sessions] Failed to fetch details:",jt)}finally{re(!1)}},[f]),cs=w.useCallback(()=>{ce(!1),pe(null)},[]),_t=w.useCallback(async ze=>{de(!0);try{const jt=await x(ze._id,ze.isLive);jt.success||alert(jt.error||"Failed to update session status")}catch{alert("An unexpected error occurred")}finally{de(!1)}},[x]),ve=w.useCallback(ze=>{pe(ze),J(!0)},[]),Je=w.useCallback(()=>{J(!1),pe(null)},[]),nt=w.useCallback(async()=>{if(ne){de(!0);try{const ze=await p(ne._id);ze.success?Je():alert(ze.error||"Failed to delete session")}catch{alert("An unexpected error occurred")}finally{de(!1)}}},[ne,p,Je]),At=w.useCallback(ze=>{const jt=ze.target.value;Le(jt),v(jt)},[v]),gr=w.useCallback(()=>{C({search:st,isLive:we,sessionType:ue,category:Se}),Xe(!1)},[st,we,ue,Se,C]),Xs=w.useCallback(()=>{Le(""),Ue(""),He(""),tt(""),T(),Xe(!1)},[T]),as=w.useCallback(()=>{R({status:lt,sessionId:We}),Xe(!1)},[lt,We,R]),bt=w.useCallback(()=>{pt(""),at(""),z(),Xe(!1)},[z]),le=w.useCallback(async(ze,jt)=>{rr(!0);try{const nn=await F(ze,{status:jt});nn.success||alert(nn.error||"Failed to update booking status")}catch(nn){console.error("[Sessions] Error updating booking:",nn),alert("An unexpected error occurred")}finally{rr(!1),ft(null)}},[F]),ut=w.useCallback(()=>{fe==="sessions"?l(t.currentPage):B(M.currentPage)},[fe,l,B,t.currentPage,M.currentPage]),Tt=w.useMemo(()=>s.search||s.isLive!==""||s.sessionType||s.category,[s]),us=w.useMemo(()=>L.status||L.sessionId,[L]);return w.useEffect(()=>{fe==="bookings"&&B(1)},[fe]),w.useEffect(()=>{fe==="bookings"&&B(1)},[L]),r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Sessions"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Create and manage coaching sessions and bookings"})]}),fe==="sessions"&&r.jsxs("button",{onClick:mr,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium",children:[r.jsx(kr,{className:"h-5 w-5"}),r.jsx("span",{children:"Create Session"})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsxs("div",{className:"flex border-b border-gray-200",children:[r.jsxs("button",{onClick:()=>qe("sessions"),className:`flex-1 sm:flex-none px-6 py-3 text-sm font-medium transition-colors relative ${fe==="sessions"?"text-gray-900":"text-gray-500 hover:text-gray-700"}`,children:[r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Mi,{className:"h-4 w-4"}),r.jsx("span",{children:"Sessions"}),r.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 rounded-full",children:t.totalCount})]}),fe==="sessions"&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-800"})]}),r.jsxs("button",{onClick:()=>qe("bookings"),className:`flex-1 sm:flex-none px-6 py-3 text-sm font-medium transition-colors relative ${fe==="bookings"?"text-gray-900":"text-gray-500 hover:text-gray-700"}`,children:[r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(FU,{className:"h-4 w-4"}),r.jsx("span",{children:"Bookings"}),r.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 rounded-full",children:M.totalCount})]}),fe==="bookings"&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-800"})]})]})}),(a||H)&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[r.jsx(Mt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"text-sm font-medium text-red-800",children:["Error loading ",a?"sessions":"bookings"]}),r.jsx("p",{className:"text-sm text-red-700 mt-0.5",children:a||H})]}),r.jsx("button",{onClick:a?k:Y,className:"shrink-0 text-red-600 hover:text-red-800",children:""})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[fe==="sessions"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",value:st,onChange:At,placeholder:"Search sessions...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),r.jsxs("button",{onClick:()=>Xe(!Ne),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${Tt?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(Va,{className:"h-4 w-4"}),r.jsx("span",{children:"Filters"}),Tt&&r.jsx("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full",children:(s.search?1:0)+(s.isLive!==""?1:0)+(s.sessionType?1:0)+(s.category?1:0)}),r.jsx(fi,{className:`h-4 w-4 transition-transform ${Ne?"rotate-180":""}`})]})]}):r.jsx(r.Fragment,{children:r.jsxs("button",{onClick:()=>Xe(!Ne),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${us?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(Va,{className:"h-4 w-4"}),r.jsx("span",{children:"Filters"}),us&&r.jsx("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full",children:(L.status?1:0)+(L.sessionId?1:0)}),r.jsx(fi,{className:`h-4 w-4 transition-transform ${Ne?"rotate-180":""}`})]})}),r.jsxs("button",{onClick:ut,disabled:n||P,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[r.jsx(qs,{className:`h-4 w-4 ${n||P?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),r.jsx("div",{className:"ml-auto text-sm text-gray-500",children:fe==="sessions"?r.jsxs(r.Fragment,{children:[t.totalCount," session",t.totalCount!==1?"s":""," total"]}):r.jsxs(r.Fragment,{children:[M.totalCount," booking",M.totalCount!==1?"s":""," total"]})})]}),Ne&&fe==="sessions"&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{value:we,onChange:ze=>Ue(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"true",children:"Live"}),r.jsx("option",{value:"false",children:"Not Live"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Type"}),r.jsxs("select",{value:ue,onChange:ze=>He(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Types"}),r.jsx("option",{value:"OTO",children:"One-to-One (OTO)"}),r.jsx("option",{value:"OTM",children:"One-to-Many (OTM)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),r.jsxs("select",{value:Se,onChange:ze=>tt(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Categories"}),fO.map(ze=>r.jsx("option",{value:ze.value,children:ze.label},ze.value))]})]}),r.jsxs("div",{className:"flex items-end gap-2 sm:col-span-2",children:[r.jsx("button",{onClick:gr,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Apply"}),r.jsx("button",{onClick:Xs,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]})}),Ne&&fe==="bookings"&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Booking Status"}),r.jsxs("select",{value:lt,onChange:ze=>pt(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"confirmed",children:"Confirmed"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"}),r.jsx("option",{value:"no_show",children:"No Show"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session"}),r.jsxs("select",{value:We,onChange:ze=>at(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Sessions"}),e.map(ze=>r.jsx("option",{value:ze._id,children:ze.title},ze._id))]})]}),r.jsxs("div",{className:"flex items-end gap-2 sm:col-span-2",children:[r.jsx("button",{onClick:as,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Apply"}),r.jsx("button",{onClick:bt,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]})})]}),fe==="sessions"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Session"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Type"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Category"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Price"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Duration"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Host"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsx("tbody",{children:n&&e.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:8,className:"px-6 py-12 text-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading sessions..."})]})}):e.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:8,className:"px-6 py-12 text-center",children:[r.jsx(Mi,{className:"h-12 w-12 text-gray-300 mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No sessions found"}),r.jsx("button",{onClick:mr,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first session"})]})}):e.map(ze=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"max-w-[200px]",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:ze.title}),r.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:ze.shortDescription})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${hO[ze.sessionType]}`,children:ze.sessionType==="OTO"?"OTO":"OTM"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${mO[ze.category]||mO.other}`,children:fO.find(jt=>jt.value===ze.category)?.label||"Other"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"font-semibold text-gray-900",children:$h(ze.price)}),ze.compareAtPrice&&ze.compareAtPrice>ze.price&&r.jsx("span",{className:"text-xs text-gray-400 line-through",children:$h(ze.compareAtPrice)})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[r.jsx(jr,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:dO(ze.duration)})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-7 h-7 bg-gray-200 rounded-full flex items-center justify-center",children:r.jsx(Ls,{className:"h-4 w-4 text-gray-500"})}),r.jsx("span",{className:"text-sm text-gray-700 truncate max-w-[100px]",children:ze.host})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${ze.isLive?dg.live:dg.notLive}`,children:ze.isLive?"Live":"Not Live"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx("button",{onClick:()=>_t(ze),disabled:ge,className:`p-2 rounded-lg transition-colors ${ze.isLive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:ze.isLive?"Set Not Live":"Set Live",children:ze.isLive?r.jsx(wl,{className:"h-5 w-5"}):r.jsx(Ui,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>Sr(ze),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details",children:r.jsx(Lr,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>ct(ze),disabled:X,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit session",children:r.jsx(Js,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>ve(ze),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:r.jsx(hr,{className:"h-4 w-4"})})]})})]},ze._id))})]})}),t.totalPages>0&&r.jsx(Dr,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:E,itemLabel:"sessions"})]}),r.jsx("div",{className:"md:hidden space-y-4",children:n&&e.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading sessions..."})]}):e.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx(Mi,{className:"h-12 w-12 text-gray-300 mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No sessions found"}),r.jsx("button",{onClick:mr,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first session"})]}):r.jsxs(r.Fragment,{children:[e.map(ze=>{const jt=Qde(ze.bookedSlots||0,ze.availableSlots);return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-3",children:[r.jsx("div",{className:"flex items-start justify-between gap-3",children:r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${hO[ze.sessionType]}`,children:ze.sessionType}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${ze.isLive?dg.live:dg.notLive}`,children:ze.isLive?"Live":"Not Live"})]}),r.jsx("p",{className:"font-medium text-gray-900 truncate",children:ze.title}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2",children:ze.shortDescription})]})}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Price"}),r.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:$h(ze.price)})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Duration"}),r.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:dO(ze.duration)})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Host"}),r.jsx("p",{className:"font-semibold text-gray-900 text-sm truncate",children:ze.host})]})]}),ze.sessionType==="OTM"&&ze.availableSlots&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[r.jsxs("span",{className:"text-gray-600",children:[ze.bookedSlots||0," / ",ze.availableSlots," booked"]}),r.jsxs("span",{className:"text-gray-400",children:[jt,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full ${Jde(jt)}`,style:{width:`${jt}%`}})})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[r.jsx("button",{onClick:()=>_t(ze),disabled:ge,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${ze.isLive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:ze.isLive?r.jsxs(r.Fragment,{children:[r.jsx(wl,{className:"h-4 w-4"}),"Live"]}):r.jsxs(r.Fragment,{children:[r.jsx(Ui,{className:"h-4 w-4"}),"Off"]})}),r.jsxs("button",{onClick:()=>Sr(ze),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:[r.jsx(Lr,{className:"h-4 w-4"}),"Details"]}),r.jsx("button",{onClick:()=>ct(ze),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:r.jsx(Js,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>ve(ze),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:r.jsx(hr,{className:"h-4 w-4"})})]})]},ze._id)}),t.totalPages>0&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsx(Dr,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:E,itemLabel:"sessions"})})]})})]}),fe==="bookings"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"User"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Session"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Scheduled Date"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Amount"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Booked On"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsx("tbody",{children:P&&O.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading bookings..."})]})}):O.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[r.jsx(Pm,{className:"h-12 w-12 text-gray-300 mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No bookings found"})]})}):O.map(ze=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:r.jsx(Ls,{className:"h-4 w-4 text-gray-500"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate max-w-[150px]",children:ze.userId?.name||"Unknown User"}),r.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[150px]",children:ze.userId?.email||"-"})]})]})}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate max-w-[180px]",children:ze.sessionId?.title||"Unknown Session"}),r.jsx("p",{className:"text-xs text-gray-500",children:ze.sessionId?.sessionType||"-"})]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[r.jsx(fr,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:ehe(ze.scheduledSlot)})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-semibold text-gray-900",children:$h(ze.amountPaid)})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${hg[ze.status]?.color||"bg-gray-100 text-gray-700"}`,children:hg[ze.status]?.label||ze.status})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:gO(ze.createdAt)}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[ze.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>le(ze._id,"confirmed"),disabled:Gt,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Confirm",children:r.jsx(Cn,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>le(ze._id,"cancelled"),disabled:Gt,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Cancel",children:r.jsx(Kr,{className:"h-4 w-4"})})]}),ze.status==="confirmed"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>le(ze._id,"completed"),disabled:Gt,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Mark Completed",children:r.jsx(Cn,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>le(ze._id,"no_show"),disabled:Gt,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",title:"No Show",children:r.jsx(Pm,{className:"h-4 w-4"})})]})]})})]},ze._id))})]})}),M.totalPages>0&&r.jsx(Dr,{currentPage:M.currentPage,totalPages:M.totalPages,totalItems:M.totalCount,itemsPerPage:M.limit,onPageChange:U,itemLabel:"bookings"})]}),r.jsx("div",{className:"md:hidden space-y-4",children:P&&O.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading bookings..."})]}):O.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx(Pm,{className:"h-12 w-12 text-gray-300 mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No bookings found"})]}):r.jsxs(r.Fragment,{children:[O.map(ze=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-3",children:[r.jsx("div",{className:"flex items-start justify-between gap-3",children:r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:"flex items-center gap-2 mb-1",children:r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${hg[ze.status]?.color||"bg-gray-100 text-gray-700"}`,children:hg[ze.status]?.label||ze.status})}),r.jsx("p",{className:"font-medium text-gray-900 truncate",children:ze.userId?.name||"Unknown User"}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:ze.userId?.email||"-"})]})}),r.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Session"}),r.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:ze.sessionId?.title||"Unknown Session"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Scheduled"}),r.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:gO(ze.scheduledSlot)})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Amount"}),r.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:$h(ze.amountPaid)})]})]}),(ze.status==="pending"||ze.status==="confirmed")&&r.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[ze.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>le(ze._id,"confirmed"),disabled:Gt,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors",children:[r.jsx(Cn,{className:"h-4 w-4"}),"Confirm"]}),r.jsxs("button",{onClick:()=>le(ze._id,"cancelled"),disabled:Gt,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors",children:[r.jsx(Kr,{className:"h-4 w-4"}),"Cancel"]})]}),ze.status==="confirmed"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>le(ze._id,"completed"),disabled:Gt,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors",children:[r.jsx(Cn,{className:"h-4 w-4"}),"Complete"]}),r.jsxs("button",{onClick:()=>le(ze._id,"no_show"),disabled:Gt,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:[r.jsx(Pm,{className:"h-4 w-4"}),"No Show"]})]})]})]},ze._id)),M.totalPages>0&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsx(Dr,{currentPage:M.currentPage,totalPages:M.totalPages,totalItems:M.totalCount,itemsPerPage:M.limit,onPageChange:U,itemLabel:"bookings"})})]})})]}),r.jsx(Yde,{isOpen:$,onClose:Et,onSubmit:_r,isLoading:ge,serverError:je,sessionToEdit:be}),r.jsx(Zde,{isOpen:ee,onClose:cs,session:ne,isLoading:X}),r.jsx(en,{isOpen:se,onClose:Je,onConfirm:nt,title:"Delete Session",message:`Are you sure you want to delete the session "${ne?.title}"? This action can be undone by restoring from deleted sessions.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:ge})]})}const qh={BASE:"/web/sos/quizzes",GET_BY_ID:e=>`/web/sos/quizzes/${e}`,UPDATE:e=>`/web/sos/quizzes/${e}`,DELETE:e=>`/web/sos/quizzes/${e}`},Hh={getAll:async(e={})=>{const{page:t=1,limit:s=10,sortBy:n="createdAt",sortOrder:a="desc",programId:l="",dayNumber:u="",isActive:f=""}=e,m=new URLSearchParams;m.append("page",t.toString()),m.append("limit",s.toString()),m.append("sortBy",n),m.append("sortOrder",a),l&&m.append("programId",l),u&&m.append("dayNumber",u.toString()),f!==""&&m.append("isActive",f);const x=`${qh.BASE}?${m.toString()}`;return console.log("[SOSQuizService] Fetching quizzes:",x),Te(Ee.get(x))},getById:async e=>e?(console.log("[SOSQuizService] Fetching quiz:",e),Te(Ee.get(qh.GET_BY_ID(e)))):(console.error("[SOSQuizService] getById: No ID provided"),{success:!1,error:"Quiz ID is required"}),create:async e=>(console.log("[SOSQuizService] Creating quiz:",e.title,"for program:",e.programId,"day:",e.dayNumber),e.programId?e.dayNumber?Te(Ee.post(qh.BASE,e)):(console.error("[SOSQuizService] create: No dayNumber provided"),{success:!1,error:"Day number is required"}):(console.error("[SOSQuizService] create: No programId provided"),{success:!1,error:"Program ID is required"})),update:async(e,t)=>{if(!e)return console.error("[SOSQuizService] update: No ID provided"),{success:!1,error:"Quiz ID is required"};console.log("[SOSQuizService] Updating quiz:",e);const{programId:s,dayNumber:n,...a}=t;return(s||n)&&console.warn("[SOSQuizService] Ignoring programId and dayNumber in update - these cannot be changed"),Te(Ee.put(qh.UPDATE(e),a))},delete:async e=>e?(console.log("[SOSQuizService] Deleting quiz:",e),Te(Ee.delete(qh.DELETE(e)))):(console.error("[SOSQuizService] delete: No ID provided"),{success:!1,error:"Quiz ID is required"}),buildQuestion:e=>{const{questionText:t,questionType:s,options:n=[],points:a=5}=e,l={questionText:t,questionType:s,points:a};return(s==="scale"||s==="single-choice"||s==="multiple-choice")&&(l.options=n.map((u,f)=>({text:u.text,value:u.value??f+1}))),l}};function rhe(e={}){const[t,s]=w.useState([]),[n,a]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[l,u]=w.useState({programId:"",dayNumber:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e}),[f,m]=w.useState(!1),[x,p]=w.useState(null),v=w.useRef(null),C=w.useCallback(async(R=n.currentPage)=>{m(!0),p(null);try{const z={page:R,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.programId&&{programId:l.programId},...l.dayNumber&&{dayNumber:l.dayNumber},...l.isActive!==""&&{isActive:l.isActive}};console.log("[useSOSQuizzes] Fetching quizzes with params:",z);const U=await Hh.getAll(z);U.success?(s(U.data.quizzes||[]),a({currentPage:U.data.pagination?.currentPage||1,totalPages:U.data.pagination?.totalPages||0,totalCount:U.data.pagination?.totalCount||0,limit:U.data.pagination?.limit||10}),console.log("[useSOSQuizzes] Fetched quizzes:",U.data.quizzes?.length)):(console.error("[useSOSQuizzes] Failed to fetch quizzes:",U.message),p(U.message||"Failed to fetch quizzes"),s([]))}catch(z){console.error("[useSOSQuizzes] Error fetching quizzes:",z),p("Failed to fetch quizzes"),s([])}finally{m(!1)}},[l,n.limit]),T=w.useCallback(async R=>{try{console.log("[useSOSQuizzes] Creating quiz:",R.title,"for program:",R.programId);const z=await Hh.create(R);return z.success?(console.log("[useSOSQuizzes] Quiz created successfully"),await C(1),{success:!0,data:z.data}):(console.error("[useSOSQuizzes] Failed to create quiz:",z.message),{success:!1,error:z.message,validationErrors:z.error})}catch(z){return console.error("[useSOSQuizzes] Error creating quiz:",z),{success:!1,error:"Failed to create quiz"}}},[C]),E=w.useCallback(async R=>{try{console.log("[useSOSQuizzes] Fetching quiz by ID:",R);const z=await Hh.getById(R);return z.success?{success:!0,data:z.data.quiz}:(console.error("[useSOSQuizzes] Failed to fetch quiz:",z.message),{success:!1,error:z.message})}catch(z){return console.error("[useSOSQuizzes] Error fetching quiz:",z),{success:!1,error:"Failed to fetch quiz details"}}},[]),k=w.useCallback(async(R,z)=>{try{console.log("[useSOSQuizzes] Updating quiz:",R);const U=await Hh.update(R,z);return U.success?(console.log("[useSOSQuizzes] Quiz updated successfully"),s(Y=>Y.map($=>$._id===R?{...$,...U.data.quiz}:$)),{success:!0,data:U.data}):(console.error("[useSOSQuizzes] Failed to update quiz:",U.message),{success:!1,error:U.message,validationErrors:U.error})}catch(U){return console.error("[useSOSQuizzes] Error updating quiz:",U),{success:!1,error:"Failed to update quiz"}}},[]),O=w.useCallback(async R=>{try{console.log("[useSOSQuizzes] Deleting quiz:",R);const z=await Hh.delete(R);return z.success?(console.log("[useSOSQuizzes] Quiz deleted successfully"),s(U=>U.filter(Y=>Y._id!==R)),a(U=>({...U,totalCount:U.totalCount-1,totalPages:Math.ceil((U.totalCount-1)/U.limit)})),{success:!0}):(console.error("[useSOSQuizzes] Failed to delete quiz:",z.message),{success:!1,error:z.message})}catch(z){return console.error("[useSOSQuizzes] Error deleting quiz:",z),{success:!1,error:"Failed to delete quiz"}}},[]),M=w.useCallback(R=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{u(z=>({...z,programId:R}))},300)},[]),L=w.useCallback(R=>{u(z=>({...z,...R}))},[]),P=w.useCallback(()=>{u({programId:"",dayNumber:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),H=w.useCallback(R=>{C(R)},[C]),B=w.useCallback(R=>{a(z=>({...z,limit:R}))},[]),F=w.useCallback(()=>{p(null)},[]);return w.useEffect(()=>{C(1)},[l]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{quizzes:t,pagination:n,filters:l,isLoading:f,error:x,fetchQuizzes:C,createQuiz:T,getQuizById:E,updateQuiz:k,deleteQuiz:O,filterByProgram:M,updateFilters:L,resetFilters:P,changePage:H,changeLimit:B,clearError:F}}const No={BASE:"/web/sos/programs",GET_BY_ID:e=>`/web/sos/programs/${e}`,UPDATE:e=>`/web/sos/programs/${e}`,DELETE:e=>`/web/sos/programs/${e}`,TOGGLE_STATUS:e=>`/web/sos/programs/${e}/toggle-status`,STATS:e=>`/web/sos/programs/${e}/stats`,QUIZZES:e=>`/web/sos/programs/${e}/quizzes`},wo={getAll:async(e={})=>{const{page:t=1,limit:s=10,sortBy:n="createdAt",sortOrder:a="desc",type:l="",isActive:u="",search:f=""}=e,m=new URLSearchParams;m.append("page",t.toString()),m.append("limit",s.toString()),m.append("sortBy",n),m.append("sortOrder",a),l&&m.append("type",l),u!==""&&m.append("isActive",u),f&&m.append("search",f);const x=`${No.BASE}?${m.toString()}`;return console.log("[SOSProgramService] Fetching programs:",x),Te(Ee.get(x))},getById:async e=>e?(console.log("[SOSProgramService] Fetching program:",e),Te(Ee.get(No.GET_BY_ID(e)))):(console.error("[SOSProgramService] getById: No ID provided"),{success:!1,error:"Program ID is required"}),create:async e=>(console.log("[SOSProgramService] Creating program:",e.title),Te(Ee.post(No.BASE,e))),update:async(e,t)=>e?(console.log("[SOSProgramService] Updating program:",e),Te(Ee.put(No.UPDATE(e),t))):(console.error("[SOSProgramService] update: No ID provided"),{success:!1,error:"Program ID is required"}),delete:async e=>e?(console.log("[SOSProgramService] Deleting program:",e),Te(Ee.delete(No.DELETE(e)))):(console.error("[SOSProgramService] delete: No ID provided"),{success:!1,error:"Program ID is required"}),toggleStatus:async e=>e?(console.log("[SOSProgramService] Toggling status for program:",e),Te(Ee.patch(No.TOGGLE_STATUS(e)))):(console.error("[SOSProgramService] toggleStatus: No ID provided"),{success:!1,error:"Program ID is required"}),getStats:async e=>e?(console.log("[SOSProgramService] Fetching stats for program:",e),Te(Ee.get(No.STATS(e)))):(console.error("[SOSProgramService] getStats: No ID provided"),{success:!1,error:"Program ID is required"}),getQuizzes:async e=>e?(console.log("[SOSProgramService] Fetching quizzes for program:",e),Te(Ee.get(No.QUIZZES(e)))):(console.error("[SOSProgramService] getQuizzes: No ID provided"),{success:!1,error:"Program ID is required"})};function she(e={}){const[t,s]=w.useState([]),[n,a]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[l,u]=w.useState({search:"",type:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e}),[f,m]=w.useState(!1),[x,p]=w.useState(null),v=w.useRef(null),C=w.useCallback(async(Y=n.currentPage)=>{m(!0),p(null);try{const $={page:Y,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.type&&{type:l.type},...l.isActive!==""&&{isActive:l.isActive}};console.log("[useSOSPrograms] Fetching programs with params:",$);const G=await wo.getAll($);G.success?(s(G.data.programs||[]),a({currentPage:G.data.pagination?.currentPage||1,totalPages:G.data.pagination?.totalPages||0,totalCount:G.data.pagination?.totalCount||0,limit:G.data.pagination?.limit||10}),console.log("[useSOSPrograms] Fetched programs:",G.data.programs?.length)):(console.error("[useSOSPrograms] Failed to fetch programs:",G.message),p(G.message||"Failed to fetch programs"),s([]))}catch($){console.error("[useSOSPrograms] Error fetching programs:",$),p("Failed to fetch programs"),s([])}finally{m(!1)}},[l,n.limit]),T=w.useCallback(async Y=>{try{console.log("[useSOSPrograms] Creating program:",Y.title);const $=await wo.create(Y);return $.success?(console.log("[useSOSPrograms] Program created successfully"),await C(1),{success:!0,data:$.data}):(console.error("[useSOSPrograms] Failed to create program:",$.message),{success:!1,error:$.message,validationErrors:$.error})}catch($){return console.error("[useSOSPrograms] Error creating program:",$),{success:!1,error:"Failed to create program"}}},[C]),E=w.useCallback(async Y=>{try{console.log("[useSOSPrograms] Fetching program by ID:",Y);const $=await wo.getById(Y);return $.success?{success:!0,data:$.data.program}:(console.error("[useSOSPrograms] Failed to fetch program:",$.message),{success:!1,error:$.message})}catch($){return console.error("[useSOSPrograms] Error fetching program:",$),{success:!1,error:"Failed to fetch program details"}}},[]),k=w.useCallback(async Y=>{try{console.log("[useSOSPrograms] Fetching stats for program:",Y);const $=await wo.getStats(Y);return $.success?{success:!0,data:$.data}:(console.error("[useSOSPrograms] Failed to fetch program stats:",$.message),{success:!1,error:$.message})}catch($){return console.error("[useSOSPrograms] Error fetching program stats:",$),{success:!1,error:"Failed to fetch program statistics"}}},[]),O=w.useCallback(async Y=>{try{console.log("[useSOSPrograms] Fetching quizzes for program:",Y);const $=await wo.getQuizzes(Y);return $.success?{success:!0,data:$.data}:(console.error("[useSOSPrograms] Failed to fetch program quizzes:",$.message),{success:!1,error:$.message})}catch($){return console.error("[useSOSPrograms] Error fetching program quizzes:",$),{success:!1,error:"Failed to fetch program quizzes"}}},[]),M=w.useCallback(async(Y,$)=>{try{console.log("[useSOSPrograms] Updating program:",Y);const G=await wo.update(Y,$);return G.success?(console.log("[useSOSPrograms] Program updated successfully"),s(ee=>ee.map(ce=>ce._id===Y?{...ce,...G.data.program}:ce)),{success:!0,data:G.data}):(console.error("[useSOSPrograms] Failed to update program:",G.message),{success:!1,error:G.message,validationErrors:G.error})}catch(G){return console.error("[useSOSPrograms] Error updating program:",G),{success:!1,error:"Failed to update program"}}},[]),L=w.useCallback(async(Y,$)=>{try{console.log("[useSOSPrograms] Toggling status for program:",Y);const G=await wo.toggleStatus(Y);return G.success?(console.log("[useSOSPrograms] Program status toggled successfully"),s(ee=>ee.map(ce=>ce._id===Y?{...ce,isActive:!$}:ce)),{success:!0}):(console.error("[useSOSPrograms] Failed to toggle program status:",G.message),{success:!1,error:G.message})}catch(G){return console.error("[useSOSPrograms] Error toggling program status:",G),{success:!1,error:"Failed to update program status"}}},[]),P=w.useCallback(async Y=>{try{console.log("[useSOSPrograms] Deleting program:",Y);const $=await wo.delete(Y);return $.success?(console.log("[useSOSPrograms] Program deleted successfully"),s(G=>G.filter(ee=>ee._id!==Y)),a(G=>({...G,totalCount:G.totalCount-1,totalPages:Math.ceil((G.totalCount-1)/G.limit)})),{success:!0}):(console.error("[useSOSPrograms] Failed to delete program:",$.message),{success:!1,error:$.message})}catch($){return console.error("[useSOSPrograms] Error deleting program:",$),{success:!1,error:"Failed to delete program"}}},[]),H=w.useCallback(Y=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{u($=>({...$,search:Y}))},300)},[]),B=w.useCallback(Y=>{u($=>({...$,...Y}))},[]),F=w.useCallback(()=>{u({search:"",type:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),R=w.useCallback(Y=>{C(Y)},[C]),z=w.useCallback(Y=>{a($=>({...$,limit:Y}))},[]),U=w.useCallback(()=>{p(null)},[]);return w.useEffect(()=>{C(1)},[l]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{programs:t,pagination:n,filters:l,isLoading:f,error:x,fetchPrograms:C,createProgram:T,getProgramById:E,getProgramStats:k,getProgramQuizzes:O,updateProgram:M,toggleProgramStatus:L,deleteProgram:P,searchPrograms:H,updateFilters:B,resetFilters:F,changePage:R,changeLimit:z,clearError:U}}const xO=()=>({programId:"",dayNumber:"",title:"",description:"",questions:[],isActive:!0}),nhe=()=>({questionText:"",questionType:"single-choice",options:[{text:"",value:1},{text:"",value:2}],points:5}),ahe=[{value:"scale",label:"Scale (1-5)",description:"Rating scale from 1 to 5"},{value:"single-choice",label:"Single Choice",description:"Choose one option"},{value:"multiple-choice",label:"Multiple Choice",description:"Select multiple options"},{value:"boolean",label:"Yes/No",description:"True or false question"},{value:"text",label:"Text",description:"Free text response"}];function ihe({isOpen:e,onClose:t,onSubmit:s,isLoading:n=!1,serverError:a=null,quizToEdit:l=null,programs:u=[],selectedProgram:f=null}){const[m,x]=w.useState(xO()),[p,v]=w.useState({}),[C,T]=w.useState("basic"),E=!!l,k=u.find(U=>U._id===m.programId)||f;w.useEffect(()=>{e&&(x(l?{programId:l.programId?._id||l.programId||"",dayNumber:l.dayNumber?.toString()||"",title:l.title||"",description:l.description||"",questions:l.questions?.map(U=>({questionText:U.questionText||"",questionType:U.questionType||"single-choice",options:U.options||[{text:"",value:1},{text:"",value:2}],points:U.points||5}))||[],isActive:l.isActive??!0}:{...xO(),programId:f?._id||""}),v({}),T("basic"))},[e,l,f]);const O=U=>{const Y={};if(!E&&!U.programId&&(Y.programId="Please select a program"),!E)if(!U.dayNumber)Y.dayNumber="Day number is required";else{const $=parseInt(U.dayNumber,10);isNaN($)||$<1?Y.dayNumber="Day number must be at least 1":k&&$>k.durationDays&&(Y.dayNumber=`Day number cannot exceed program duration (${k.durationDays} days)`)}if(U.title.trim()?U.title.length>200&&(Y.title="Title must be less than 200 characters"):Y.title="Title is required",U.questions.length===0)Y.questions="At least one question is required";else{const $=[];U.questions.forEach((G,ee)=>{const ce={};G.questionText.trim()||(ce.questionText="Question text is required"),(G.questionType==="scale"||G.questionType==="single-choice"||G.questionType==="multiple-choice")&&G.options&&(G.options.some(J=>!J.text.trim())&&(ce.options="All options must have text"),G.options.length<2&&(ce.options="At least 2 options are required")),Object.keys(ce).length>0&&($[ee]=ce)}),($.length>0||Object.keys($).some(G=>$[G]))&&(Y.questionErrors=$)}return{isValid:Object.keys(Y).length===0,errors:Y}},M=(U,Y)=>{x($=>({...$,[U]:Y})),p[U]&&v($=>{const G={...$};return delete G[U],G})},L=()=>{x(U=>({...U,questions:[...U.questions,nhe()]}))},P=U=>{x(Y=>({...Y,questions:Y.questions.filter(($,G)=>G!==U)}))},H=(U,Y,$)=>{x(G=>({...G,questions:G.questions.map((ee,ce)=>{if(ce!==U)return ee;const se={...ee,[Y]:$};return Y==="questionType"&&($==="scale"?se.options=[{text:"Very Bad",value:1},{text:"Bad",value:2},{text:"Neutral",value:3},{text:"Good",value:4},{text:"Very Good",value:5}]:$==="single-choice"||$==="multiple-choice"?se.options=[{text:"",value:1},{text:"",value:2}]:($==="boolean"||$==="text")&&(se.options=[])),se})}))},B=U=>{x(Y=>({...Y,questions:Y.questions.map(($,G)=>G!==U?$:{...$,options:[...$.options,{text:"",value:$.options.length+1}]})}))},F=(U,Y)=>{x($=>({...$,questions:$.questions.map((G,ee)=>ee!==U?G:{...G,options:G.options.filter((ce,se)=>se!==Y).map((ce,se)=>({...ce,value:se+1}))})}))},R=(U,Y,$)=>{x(G=>({...G,questions:G.questions.map((ee,ce)=>ce!==U?ee:{...ee,options:ee.options.map((se,J)=>J!==Y?se:{...se,text:$})})}))},z=async U=>{U.preventDefault();const{isValid:Y,errors:$}=O(m);if(!Y){v($),($.questions||$.questionErrors)&&T("questions");return}const G={title:m.title.trim(),description:m.description.trim(),questions:m.questions.map(ce=>({questionText:ce.questionText.trim(),questionType:ce.questionType,points:ce.points,...ce.questionType==="scale"||ce.questionType==="single-choice"||ce.questionType==="multiple-choice"?{options:ce.options.map(se=>({text:se.text.trim(),value:se.value}))}:{}})),isActive:m.isActive};E||(G.programId=m.programId,G.dayNumber=parseInt(m.dayNumber,10)),console.log("[SOSQuizForm] Submitting data:",G),(await s(G))?.success&&t()};return r.jsx(Lt,{isOpen:e,onClose:t,title:E?"Edit SOS Quiz":"Create SOS Quiz",size:"xl",children:r.jsxs("form",{onSubmit:z,className:"space-y-4",children:[r.jsxs("div",{className:"flex border-b border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>T("basic"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${C==="basic"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Basic Info"}),r.jsxs("button",{type:"button",onClick:()=>T("questions"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${C==="questions"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Questions (",m.questions.length,")"]})]}),r.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:C==="basic"?r.jsxs("div",{className:"space-y-4",children:[!E&&r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Program ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:m.programId,onChange:U=>M("programId",U.target.value),disabled:n||f,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.programId?"border-red-500":"border-gray-300"} ${n||f?"bg-gray-100":""}`,children:[r.jsx("option",{value:"",children:"Select a program"}),u.map(U=>r.jsxs("option",{value:U._id,children:[U.title," (",U.durationDays," days)"]},U._id))]}),p.programId&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:p.programId})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Day Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",value:m.dayNumber,onChange:U=>M("dayNumber",U.target.value),placeholder:"e.g., 1",min:"1",max:k?.durationDays||365,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.dayNumber?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),p.dayNumber&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:p.dayNumber}),k&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Program duration: ",k.durationDays," days"]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Quiz Title ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:m.title,onChange:U=>M("title",U.target.value),placeholder:"e.g., Day 1: Introduction to Mindfulness",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),p.title&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:p.title})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description",r.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),r.jsx("textarea",{value:m.description,onChange:U=>M("description",U.target.value),placeholder:"Brief description of this day's activities...",rows:3,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:m.isActive,onChange:U=>M("isActive",U.target.checked),disabled:n,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]}),r.jsx("span",{className:"text-sm text-gray-700",children:m.isActive?"Active":"Inactive"})]})]}):r.jsxs("div",{className:"space-y-4",children:[p.questions&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-red-700",children:p.questions})}),m.questions.length===0?r.jsxs("div",{className:"p-8 text-center border-2 border-dashed border-gray-200 rounded-lg",children:[r.jsx("p",{className:"text-gray-500 mb-3",children:"No questions added yet"}),r.jsxs("button",{type:"button",onClick:L,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:[r.jsx(kr,{className:"h-4 w-4"}),"Add Question"]})]}):r.jsxs(r.Fragment,{children:[m.questions.map((U,Y)=>r.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(sp,{className:"h-4 w-4 text-gray-400"}),r.jsxs("span",{className:"font-medium text-gray-700",children:["Question ",Y+1]})]}),r.jsx("button",{type:"button",onClick:()=>P(Y),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:r.jsx(hr,{className:"h-4 w-4"})})]}),r.jsxs("div",{children:[r.jsx("input",{type:"text",value:U.questionText,onChange:$=>H(Y,"questionText",$.target.value),placeholder:"Enter your question...",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${p.questionErrors?.[Y]?.questionText?"border-red-500":"border-gray-300"}`}),p.questionErrors?.[Y]?.questionText&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:p.questionErrors[Y].questionText})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),r.jsx("select",{value:U.questionType,onChange:$=>H(Y,"questionType",$.target.value),disabled:n,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:ahe.map($=>r.jsx("option",{value:$.value,children:$.label},$.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Points"}),r.jsx("input",{type:"number",value:U.points,onChange:$=>H(Y,"points",parseInt($.target.value)||0),min:"0",max:"100",disabled:n,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]})]}),(U.questionType==="scale"||U.questionType==="single-choice"||U.questionType==="multiple-choice")&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Options"}),U.options.map(($,G)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-xs text-gray-400 w-6",children:[G+1,"."]}),r.jsx("input",{type:"text",value:$.text,onChange:ee=>R(Y,G,ee.target.value),placeholder:`Option ${G+1}`,disabled:n||U.questionType==="scale",className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),(U.questionType==="single-choice"||U.questionType==="multiple-choice")&&U.options.length>2&&r.jsx("button",{type:"button",onClick:()=>F(Y,G),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:r.jsx(hr,{className:"h-3 w-3"})})]},G)),(U.questionType==="single-choice"||U.questionType==="multiple-choice")&&r.jsxs("button",{type:"button",onClick:()=>B(Y),className:"text-xs text-gray-600 hover:text-gray-800 flex items-center gap-1",children:[r.jsx(kr,{className:"h-3 w-3"}),"Add Option"]}),p.questionErrors?.[Y]?.options&&r.jsx("p",{className:"text-red-600 text-xs",children:p.questionErrors[Y].options})]})]},Y)),r.jsxs("button",{type:"button",onClick:L,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",children:[r.jsx(kr,{className:"h-4 w-4"}),"Add Question"]})]})]})}),a&&r.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[r.jsx(Mt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-700",children:a})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:n?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{children:E?"Updating...":"Creating..."})]}):r.jsx("span",{children:E?"Update Quiz":"Create Quiz"})})]})]})})}const pO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",lhe={scale:"Scale (1-5)","single-choice":"Single Choice","multiple-choice":"Multiple Choice",boolean:"Yes/No",text:"Text Response"},ohe={scale:id,"single-choice":aw,"multiple-choice":bV,boolean:Ui,text:CV};function che({isOpen:e,onClose:t,quiz:s,isLoading:n=!1}){if(!e)return null;const a=s?.questions?.reduce((l,u)=>l+(u.points||0),0)||0;return r.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:t}),r.jsx("div",{className:"relative min-h-full flex items-center justify-center p-4",children:r.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Quiz Details"}),r.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Kr,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:n?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading quiz details..."})]}):s?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${s.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:s.isActive?"Active":"Inactive"}),s.dayNumber&&r.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:["Day ",s.dayNumber]})]}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:s.title})]}),s.programId&&r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Program"}),r.jsx("p",{className:"font-medium text-gray-900",children:s.programId.title||s.programId})]}),s.description&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:s.description})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[r.jsx(Ag,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),r.jsx("p",{className:"text-2xl font-bold text-blue-700",children:s.questions?.length||s.questionCount||0}),r.jsx("p",{className:"text-xs text-blue-600",children:"Questions"})]}),r.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 text-center",children:[r.jsx(id,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),r.jsx("p",{className:"text-2xl font-bold text-amber-700",children:a}),r.jsx("p",{className:"text-xs text-amber-600",children:"Total Points"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[r.jsx(fr,{className:"h-5 w-5 text-gray-500 mx-auto mb-1"}),r.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["Day ",s.dayNumber||"-"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Program Day"})]})]}),s.questions&&s.questions.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[r.jsx(Ag,{className:"h-4 w-4"}),"Questions"]}),r.jsx("div",{className:"space-y-3",children:s.questions.map((l,u)=>{const f=ohe[l.questionType]||Ag;return r.jsx("div",{className:"p-3 border border-gray-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-xs font-medium text-gray-600",children:u+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-gray-900 font-medium",children:l.questionText}),r.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(f,{className:"h-3 w-3"}),lhe[l.questionType]||l.questionType]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(id,{className:"h-3 w-3"}),l.points," pts"]})]}),l.options&&l.options.length>0&&r.jsx("div",{className:"mt-2 space-y-1",children:l.options.map((m,x)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx("span",{className:`w-4 h-4 border border-gray-300 flex-shrink-0 ${l.questionType==="multiple-choice"?"rounded":"rounded-full"}`}),r.jsxs("span",{children:[m.text,l.questionType==="scale"&&r.jsxs("span",{className:"text-gray-400 ml-1",children:["(",m.value,")"]})]})]},x))}),l.questionType==="boolean"&&r.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ls,{className:"h-4 w-4 text-green-500"}),"Yes"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(wr,{className:"h-4 w-4 text-red-500"}),"No"]})]}),l.questionType==="text"&&r.jsx("div",{className:"mt-2 text-sm text-gray-500 italic",children:"Free text response"})]})]})},u)})})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[r.jsxs("span",{children:["Created: ",pO(s.createdAt)]}),s.updatedAt&&s.updatedAt!==s.createdAt&&r.jsxs("span",{children:["Updated: ",pO(s.updatedAt)]})]})})]}):r.jsx("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:r.jsx("p",{children:"No quiz data available"})})}),r.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:r.jsx("button",{onClick:t,className:"w-full px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium",children:"Close"})})]})})]})}const yO=()=>({title:"",description:"",type:"ISOS",durationDays:"",imageUrl:"",isActive:!1}),bO=[{value:"GSOS",label:"General SOS (GSOS)",description:"Single day quick programs"},{value:"ISOS",label:"Intensive SOS (ISOS)",description:"Multi-day structured programs (7D, 15D, 30D)"}];function uhe({isOpen:e,onClose:t,onSubmit:s,isLoading:n=!1,serverError:a=null,programToEdit:l=null}){const[u,f]=w.useState(yO()),[m,x]=w.useState({}),p=!!l;w.useEffect(()=>{e&&(f(l?{title:l.title||"",description:l.description||"",type:l.type||"ISOS",durationDays:l.durationDays?.toString()||"",imageUrl:l.imageUrl||"",isActive:l.isActive??!1}:yO()),x({}))},[e,l]);const v=E=>{const k={};if(E.title.trim()?E.title.length>200&&(k.title="Title must be less than 200 characters"):k.title="Title is required",E.description.trim()?E.description.length>2e3&&(k.description="Description must be less than 2000 characters"):k.description="Description is required",!E.durationDays)k.durationDays="Duration is required";else{const O=parseInt(E.durationDays,10);isNaN(O)||O<1?k.durationDays="Duration must be at least 1 day":O>365&&(k.durationDays="Duration cannot exceed 365 days"),E.type==="GSOS"&&O!==1&&(k.durationDays="General SOS programs should be 1 day")}return E.imageUrl&&!/^https?:\/\/.+/.test(E.imageUrl)&&(k.imageUrl="Please provide a valid image URL"),{isValid:Object.keys(k).length===0,errors:k}},C=(E,k)=>{f(O=>{const M={...O,[E]:k};return E==="type"&&k==="GSOS"&&(M.durationDays="1"),M}),m[E]&&x(O=>{const M={...O};return delete M[E],M})},T=async E=>{E.preventDefault();const{isValid:k,errors:O}=v(u);if(!k){x(O);return}const M={title:u.title.trim(),description:u.description.trim(),type:u.type,durationDays:parseInt(u.durationDays,10),isActive:u.isActive};u.imageUrl.trim()&&(M.imageUrl=u.imageUrl.trim()),console.log("[SOSProgramForm] Submitting data:",M),(await s(M))?.success&&t()};return r.jsx(Lt,{isOpen:e,onClose:t,title:p?"Edit SOS Program":"Create SOS Program",size:"lg",children:r.jsxs("form",{onSubmit:T,className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Program Title ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:u.title,onChange:E=>C("title",E.target.value),placeholder:"e.g., 7-Day Anxiety Relief Program",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.title&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.title})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{value:u.description,onChange:E=>C("description",E.target.value),placeholder:"Describe what participants will achieve through this program...",rows:4,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${m.description?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.description&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.description})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Program Type ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("select",{value:u.type,onChange:E=>C("type",E.target.value),disabled:n||p,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n||p?"bg-gray-100":""}`,children:bO.map(E=>r.jsx("option",{value:E.value,children:E.label},E.value))}),p&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Type cannot be changed after creation"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:bO.find(E=>E.value===u.type)?.description})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Duration (Days) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",value:u.durationDays,onChange:E=>C("durationDays",E.target.value),placeholder:"e.g., 7",min:"1",max:"365",disabled:n||p||u.type==="GSOS",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.durationDays?"border-red-500":"border-gray-300"} ${n||p||u.type==="GSOS"?"bg-gray-100":""}`}),m.durationDays&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.durationDays}),p&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Duration cannot be changed after creation"}),u.type==="GSOS"&&!p&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Fixed to 1 day for General SOS"})]})]}),r.jsx(ha,{label:"Program Image",value:u.imageUrl,onUpload:E=>C("imageUrl",E),disabled:n,error:m.imageUrl,type:"image",folder:"sos-programs",placeholder:"Drop image here or click to upload"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u.isActive,onChange:E=>C("isActive",E.target.checked),disabled:n,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]}),r.jsx("span",{className:"text-sm text-gray-700",children:u.isActive?"Active (Visible to users)":"Inactive"})]}),a&&r.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[r.jsx(Mt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-700",children:a})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 sticky bottom-0 bg-white",children:[r.jsx("button",{type:"button",onClick:t,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:n?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{children:p?"Updating...":"Creating..."})]}):r.jsx("span",{children:p?"Update Program":"Create Program"})})]})]})})}const t2=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",dhe={GSOS:"bg-blue-100 text-blue-700",ISOS:"bg-purple-100 text-purple-700"},vO={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-600"};function hhe({isOpen:e,onClose:t,program:s,isLoading:n=!1,onFetchStats:a}){const[l,u]=w.useState(null),[f,m]=w.useState(!1),[x,p]=w.useState(null);return w.useEffect(()=>{(async()=>{if(!(!e||!s?._id||!a)){m(!0),p(null);try{const C=await a(s._id);C.success?u(C.data.stats):p(C.error||"Failed to load statistics")}catch(C){console.error("[SOSProgramDetailsModal] Error fetching stats:",C),p("Failed to load statistics")}finally{m(!1)}}})()},[e,s?._id,a]),w.useEffect(()=>{e||(u(null),p(null))},[e]),e?r.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:t}),r.jsx("div",{className:"relative min-h-full flex items-center justify-center p-4",children:r.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Program Details"}),r.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Kr,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:n?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading program details..."})]}):s?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${dhe[s.type]}`,children:s.type==="GSOS"?"General SOS":"Intensive SOS"}),r.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${s.isActive?vO.active:vO.inactive}`,children:s.isActive?"Active":"Inactive"})]}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:s.title})]}),s.description&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:s.description})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[r.jsx(fr,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Duration"})]}),r.jsxs("p",{className:"font-semibold text-gray-900",children:[s.durationDays," ",s.durationDays===1?"Day":"Days"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[r.jsx(jr,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Created"})]}),r.jsx("p",{className:"font-semibold text-gray-900",children:t2(s.createdAt)})]})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[r.jsx(Fa,{className:"h-4 w-4"}),"Statistics"]}),f?r.jsxs("div",{className:"flex items-center justify-center py-8 bg-gray-50 rounded-lg",children:[r.jsx(it,{className:"h-6 w-6 text-gray-400 animate-spin"}),r.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading statistics..."})]}):x?r.jsx("div",{className:"p-4 bg-red-50 rounded-lg text-sm text-red-600",children:x}):l?r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[r.jsx(Yn,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),r.jsx("p",{className:"text-2xl font-bold text-blue-700",children:l.totalEnrolled||0}),r.jsx("p",{className:"text-xs text-blue-600",children:"Total Enrolled"})]}),r.jsxs("div",{className:"bg-amber-50 rounded-lg p-3 text-center",children:[r.jsx(jr,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),r.jsx("p",{className:"text-2xl font-bold text-amber-700",children:l.inProgress||0}),r.jsx("p",{className:"text-xs text-amber-600",children:"In Progress"})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[r.jsx(sd,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),r.jsx("p",{className:"text-2xl font-bold text-green-700",children:l.completed||0}),r.jsx("p",{className:"text-xs text-green-600",children:"Completed"})]}),r.jsxs("div",{className:"bg-red-50 rounded-lg p-3 text-center",children:[r.jsx(wr,{className:"h-5 w-5 text-red-600 mx-auto mb-1"}),r.jsx("p",{className:"text-2xl font-bold text-red-700",children:l.abandoned||0}),r.jsx("p",{className:"text-xs text-red-600",children:"Abandoned"})]})]}):r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg text-sm text-gray-500 text-center",children:"No statistics available"}),l&&r.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-3",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[r.jsx(xk,{className:"h-4 w-4 text-gray-500 mx-auto mb-1"}),r.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[l.completionRate||0,"%"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Completion Rate"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[r.jsx(ad,{className:"h-4 w-4 text-gray-500 mx-auto mb-1"}),r.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[l.quizCount||0,"/",s.durationDays]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Quizzes Created"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[r.jsx(id,{className:"h-4 w-4 text-gray-500 mx-auto mb-1"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:l.averageScore?.toFixed(1)||"-"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Avg. Score"})]})]})]}),s.imageUrl&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Program Image"}),r.jsx("div",{className:"relative rounded-lg overflow-hidden bg-gray-100 aspect-video",children:r.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-full object-cover",onError:v=>{v.target.style.display="none",v.target.parentElement.innerHTML='<div class="flex items-center justify-center h-full text-gray-400 text-sm">Failed to load image</div>'}})})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[r.jsxs("span",{children:["Created: ",t2(s.createdAt)]}),s.updatedAt&&s.updatedAt!==s.createdAt&&r.jsxs("span",{children:["Updated: ",t2(s.updatedAt)]}),s.createdBy?.name&&r.jsxs("span",{children:["By: ",s.createdBy.name]})]})})]}):r.jsx("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:r.jsx("p",{children:"No program data available"})})}),r.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:r.jsx("button",{onClick:t,className:"w-full px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium",children:"Close"})})]})})]}):null}const jo={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-600"},NO={GSOS:"bg-blue-100 text-blue-700",ISOS:"bg-purple-100 text-purple-700"};function fhe(){const[e,t]=w.useState("quizzes"),{quizzes:s,pagination:n,filters:a,isLoading:l,error:u,fetchQuizzes:f,createQuiz:m,getQuizById:x,updateQuiz:p,deleteQuiz:v,filterByProgram:C,updateFilters:T,resetFilters:E,changePage:k,clearError:O}=rhe(),{programs:M,pagination:L,filters:P,isLoading:H,error:B,fetchPrograms:F,createProgram:R,getProgramById:z,getProgramStats:U,updateProgram:Y,toggleProgramStatus:$,deleteProgram:G,searchPrograms:ee,updateFilters:ce,resetFilters:se,changePage:J,clearError:ne}=she(),[pe,be]=w.useState(!1),[te,X]=w.useState(!1),[re,ge]=w.useState(!1),[de,je]=w.useState(null),[oe,fe]=w.useState(null),[qe,Ne]=w.useState(!1),[Xe,st]=w.useState(!1),[Le,we]=w.useState(!1),[Ue,ue]=w.useState(!1),[He,Se]=w.useState(null),[tt,lt]=w.useState(null),[pt,We]=w.useState(!1),[at,Fe]=w.useState(!1),[ft,Gt]=w.useState(null),[rr,mr]=w.useState(!1),[ct,Et]=w.useState(a.programId||""),[_r,Sr]=w.useState(a.isActive||""),[cs,_t]=w.useState(!1),[ve,Je]=w.useState(P.search||""),[nt,At]=w.useState(P.type||""),[gr,Xs]=w.useState(P.isActive||"");w.useEffect(()=>{F(1)},[]);const as=w.useCallback(()=>{Gt(null),fe(null),be(!0)},[]),bt=w.useCallback(async Ve=>{Gt(null),Ne(!0);try{const xt=await x(Ve._id);xt.success?(fe(xt.data),be(!0)):alert(xt.error||"Failed to load quiz details")}catch(xt){console.error("[Quizes] Failed to load quiz for edit:",xt),alert("An unexpected error occurred")}finally{Ne(!1)}},[x]),le=w.useCallback(()=>{be(!1),Gt(null),fe(null)},[]),ut=w.useCallback(async Ve=>{Fe(!0),Gt(null);try{let xt;return oe?xt=await p(oe._id,Ve):xt=await m(Ve),xt.success?xt:(Gt(xt.error||"Failed to save quiz"),{success:!1})}catch(xt){return console.error("[Quizes] Form submission error:",xt),Gt("An unexpected error occurred"),{success:!1}}finally{Fe(!1)}},[m,p,oe]),Tt=w.useCallback(async Ve=>{je(Ve),X(!0),Ne(!0);try{const xt=await x(Ve._id);xt.success&&je(xt.data)}catch(xt){console.error("[Quizes] Failed to fetch details:",xt)}finally{Ne(!1)}},[x]),us=w.useCallback(()=>{X(!1),je(null)},[]),ze=w.useCallback(Ve=>{je(Ve),ge(!0)},[]),jt=w.useCallback(()=>{ge(!1),je(null)},[]),nn=w.useCallback(async()=>{if(de){Fe(!0);try{const Ve=await v(de._id);Ve.success?jt():alert(Ve.error||"Failed to delete quiz")}catch(Ve){console.error("[Quizes] Delete error:",Ve),alert("An unexpected error occurred")}finally{Fe(!1)}}},[de,v,jt]),ba=w.useCallback(()=>{T({programId:ct,isActive:_r}),mr(!1)},[ct,_r,T]),On=w.useCallback(()=>{Et(""),Sr(""),E(),mr(!1)},[E]),Kc=w.useCallback(()=>{f(n.currentPage)},[f,n.currentPage]),Dn=w.useCallback(()=>{Gt(null),lt(null),st(!0)},[]),$i=w.useCallback(async Ve=>{Gt(null),We(!0);try{const xt=await z(Ve._id);xt.success?(lt(xt.data),st(!0)):alert(xt.error||"Failed to load program details")}catch(xt){console.error("[Quizes] Failed to load program for edit:",xt),alert("An unexpected error occurred")}finally{We(!1)}},[z]),Cs=w.useCallback(()=>{st(!1),Gt(null),lt(null)},[]),Wn=w.useCallback(async Ve=>{Fe(!0),Gt(null);try{let xt;return tt?xt=await Y(tt._id,Ve):xt=await R(Ve),xt.success?xt:(Gt(xt.error||"Failed to save program"),{success:!1})}catch(xt){return console.error("[Quizes] Form submission error:",xt),Gt("An unexpected error occurred"),{success:!1}}finally{Fe(!1)}},[R,Y,tt]),Ws=w.useCallback(async Ve=>{Se(Ve),we(!0),We(!0);try{const xt=await z(Ve._id);xt.success&&Se(xt.data)}catch(xt){console.error("[Quizes] Failed to fetch program details:",xt)}finally{We(!1)}},[z]),ot=w.useCallback(()=>{we(!1),Se(null)},[]),Ks=w.useCallback(async Ve=>{Fe(!0);try{const xt=await $(Ve._id,Ve.isActive);xt.success||alert(xt.error||"Failed to update program status")}catch(xt){console.error("[Quizes] Toggle status error:",xt),alert("An unexpected error occurred")}finally{Fe(!1)}},[$]),Zr=w.useCallback(Ve=>{Se(Ve),ue(!0)},[]),sr=w.useCallback(()=>{ue(!1),Se(null)},[]),vn=w.useCallback(async()=>{if(He){Fe(!0);try{const Ve=await G(He._id);Ve.success?sr():alert(Ve.error||"Failed to delete program")}catch(Ve){console.error("[Quizes] Delete error:",Ve),alert("An unexpected error occurred")}finally{Fe(!1)}}},[He,G,sr]),bi=w.useCallback(Ve=>{const xt=Ve.target.value;Je(xt),ee(xt)},[ee]),Ll=w.useCallback(()=>{ce({search:ve,type:nt,isActive:gr}),_t(!1)},[ve,nt,gr,ce]),kn=w.useCallback(()=>{Je(""),At(""),Xs(""),se(),_t(!1)},[se]),Zc=w.useCallback(()=>{F(L.currentPage)},[F,L.currentPage]),vi=w.useMemo(()=>a.programId||a.isActive!=="",[a]),an=w.useMemo(()=>P.search||P.type||P.isActive!=="",[P]),$r=w.useCallback(Ve=>Ve?typeof Ve=="object"&&Ve.title?Ve.title:M.find(Ur=>Ur._id===Ve)?.title||Ve:"-",[M]),er=w.useCallback(Ve=>Ve.questions?.reduce((xt,Ur)=>xt+(Ur.points||0),0)||Ve.totalPoints||0,[]);return r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"SOS Management"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage SOS programs and their daily quizzes"})]}),r.jsxs("button",{onClick:e==="quizzes"?as:Dn,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium",children:[r.jsx(kr,{className:"h-5 w-5"}),r.jsx("span",{children:e==="quizzes"?"Create Quiz":"Create Program"})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"flex -mb-px",children:[r.jsxs("button",{onClick:()=>t("programs"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="programs"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(Qu,{className:"h-4 w-4 inline-block mr-2"}),"Programs (",L.totalCount||0,")"]}),r.jsxs("button",{onClick:()=>t("quizzes"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="quizzes"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(Eg,{className:"h-4 w-4 inline-block mr-2"}),"Quizzes (",n.totalCount||0,")"]})]})})}),(e==="quizzes"?u:B)&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[r.jsx(Mt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"text-sm font-medium text-red-800",children:["Error loading ",e==="quizzes"?"quizzes":"programs"]}),r.jsx("p",{className:"text-sm text-red-700 mt-0.5",children:e==="quizzes"?u:B})]}),r.jsx("button",{onClick:e==="quizzes"?O:ne,className:"shrink-0 text-red-600 hover:text-red-800",children:""})]}),e==="programs"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",value:ve,onChange:bi,placeholder:"Search programs...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),r.jsxs("button",{onClick:()=>_t(!cs),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${an?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(Va,{className:"h-4 w-4"}),r.jsx("span",{children:"Filters"}),an&&r.jsx("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full",children:(P.search?1:0)+(P.type?1:0)+(P.isActive!==""?1:0)}),r.jsx(fi,{className:`h-4 w-4 transition-transform ${cs?"rotate-180":""}`})]}),r.jsxs("button",{onClick:Zc,disabled:H,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[r.jsx(qs,{className:`h-4 w-4 ${H?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),r.jsxs("div",{className:"ml-auto text-sm text-gray-500",children:[L.totalCount," program",L.totalCount!==1?"s":""," total"]})]}),cs&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),r.jsxs("select",{value:nt,onChange:Ve=>At(Ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Types"}),r.jsx("option",{value:"GSOS",children:"General SOS (GSOS)"}),r.jsx("option",{value:"ISOS",children:"Intensive SOS (ISOS)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{value:gr,onChange:Ve=>Xs(Ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"true",children:"Active"}),r.jsx("option",{value:"false",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex items-end gap-2 sm:col-span-2",children:[r.jsx("button",{onClick:Ll,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Apply"}),r.jsx("button",{onClick:kn,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]})})]}),r.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Program"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Type"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Duration"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsx("tbody",{children:H&&M.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading programs..."})]})}):M.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center",children:[r.jsx(Qu,{className:"h-12 w-12 text-gray-300 mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No programs found"}),r.jsx("button",{onClick:Dn,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first program"})]})}):M.map(Ve=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"max-w-[300px]",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:Ve.title}),Ve.description&&r.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:Ve.description})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${NO[Ve.type]}`,children:Ve.type==="GSOS"?"General":"Intensive"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(fr,{className:"h-4 w-4"}),r.jsxs("span",{className:"text-sm",children:[Ve.durationDays," ",Ve.durationDays===1?"day":"days"]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Ve.isActive?jo.active:jo.inactive}`,children:Ve.isActive?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx("button",{onClick:()=>Ks(Ve),disabled:at,className:`p-2 rounded-lg transition-colors ${Ve.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:Ve.isActive?"Set Inactive":"Set Active",children:Ve.isActive?r.jsx(wl,{className:"h-5 w-5"}):r.jsx(Ui,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>Ws(Ve),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details",children:r.jsx(Lr,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>$i(Ve),disabled:pt,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit program",children:r.jsx(Js,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>Zr(Ve),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:r.jsx(hr,{className:"h-4 w-4"})})]})})]},Ve._id))})]})}),L.totalPages>0&&r.jsx(Dr,{currentPage:L.currentPage,totalPages:L.totalPages,totalItems:L.totalCount,itemsPerPage:L.limit,onPageChange:J,itemLabel:"programs"})]}),r.jsx("div",{className:"md:hidden space-y-4",children:H&&M.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading programs..."})]}):M.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx(Qu,{className:"h-12 w-12 text-gray-300 mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No programs found"}),r.jsx("button",{onClick:Dn,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first program"})]}):r.jsxs(r.Fragment,{children:[M.map(Ve=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-3",children:[r.jsx("div",{className:"flex items-start justify-between gap-3",children:r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${NO[Ve.type]}`,children:Ve.type}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ve.isActive?jo.active:jo.inactive}`,children:Ve.isActive?"Active":"Inactive"})]}),r.jsx("p",{className:"font-medium text-gray-900 truncate",children:Ve.title})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Duration"}),r.jsxs("p",{className:"font-semibold text-gray-900 text-sm",children:[Ve.durationDays," days"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Type"}),r.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:Ve.type==="GSOS"?"General":"Intensive"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[r.jsx("button",{onClick:()=>Ks(Ve),disabled:at,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Ve.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Ve.isActive?r.jsxs(r.Fragment,{children:[r.jsx(wl,{className:"h-4 w-4"}),"Active"]}):r.jsxs(r.Fragment,{children:[r.jsx(Ui,{className:"h-4 w-4"}),"Inactive"]})}),r.jsxs("button",{onClick:()=>Ws(Ve),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:[r.jsx(Lr,{className:"h-4 w-4"}),"Details"]}),r.jsx("button",{onClick:()=>$i(Ve),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:r.jsx(Js,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>Zr(Ve),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:r.jsx(hr,{className:"h-4 w-4"})})]})]},Ve._id)),L.totalPages>0&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsx(Dr,{currentPage:L.currentPage,totalPages:L.totalPages,totalItems:L.totalCount,itemsPerPage:L.limit,onPageChange:J,itemLabel:"programs"})})]})})]}),e==="quizzes"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[r.jsx("div",{className:"relative flex-1 max-w-md",children:r.jsxs("select",{value:ct,onChange:Ve=>{Et(Ve.target.value),C(Ve.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Programs"}),M.map(Ve=>r.jsxs("option",{value:Ve._id,children:[Ve.title," (",Ve.durationDays," days)"]},Ve._id))]})}),r.jsxs("button",{onClick:()=>mr(!rr),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${vi?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(Va,{className:"h-4 w-4"}),r.jsx("span",{children:"Filters"}),vi&&r.jsx("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full",children:(a.programId?1:0)+(a.isActive!==""?1:0)}),r.jsx(fi,{className:`h-4 w-4 transition-transform ${rr?"rotate-180":""}`})]}),r.jsxs("button",{onClick:Kc,disabled:l,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[r.jsx(qs,{className:`h-4 w-4 ${l?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),r.jsxs("div",{className:"ml-auto text-sm text-gray-500",children:[n.totalCount," quiz",n.totalCount!==1?"zes":""," total"]})]}),rr&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{value:_r,onChange:Ve=>Sr(Ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"true",children:"Active"}),r.jsx("option",{value:"false",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex items-end gap-2 sm:col-span-2 lg:col-span-3",children:[r.jsx("button",{onClick:ba,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Apply"}),r.jsx("button",{onClick:On,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]})})]}),r.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Quiz"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Program"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Day"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Questions"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Points"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsx("tbody",{children:l&&s.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading quizzes..."})]})}):s.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[r.jsx(Eg,{className:"h-12 w-12 text-gray-300 mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No quizzes found"}),r.jsx("button",{onClick:as,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first quiz"})]})}):s.map(Ve=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"max-w-[200px]",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:Ve.title}),Ve.description&&r.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:Ve.description})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-700 truncate max-w-[150px] block",children:$r(Ve.programId)})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1.5 text-gray-600",children:[r.jsx(fr,{className:"h-4 w-4"}),r.jsxs("span",{className:"text-sm font-medium",children:["Day ",Ve.dayNumber||"-"]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(Ag,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-sm text-gray-700",children:Ve.questions?.length||Ve.questionCount||0})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(id,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-sm text-gray-700",children:er(Ve)})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Ve.isActive?jo.active:jo.inactive}`,children:Ve.isActive?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx("button",{onClick:()=>Tt(Ve),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details",children:r.jsx(Lr,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>bt(Ve),disabled:qe,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit quiz",children:r.jsx(Js,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>ze(Ve),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:r.jsx(hr,{className:"h-4 w-4"})})]})})]},Ve._id))})]})}),n.totalPages>0&&r.jsx(Dr,{currentPage:n.currentPage,totalPages:n.totalPages,totalItems:n.totalCount,itemsPerPage:n.limit,onPageChange:k,itemLabel:"quizzes"})]}),r.jsx("div",{className:"md:hidden space-y-4",children:l&&s.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading quizzes..."})]}):s.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx(Eg,{className:"h-12 w-12 text-gray-300 mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No quizzes found"}),r.jsx("button",{onClick:as,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first quiz"})]}):r.jsxs(r.Fragment,{children:[s.map(Ve=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-3",children:[r.jsx("div",{className:"flex items-start justify-between gap-3",children:r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[r.jsxs("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-700",children:["Day ",Ve.dayNumber||"-"]}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ve.isActive?jo.active:jo.inactive}`,children:Ve.isActive?"Active":"Inactive"})]}),r.jsx("p",{className:"font-medium text-gray-900 truncate",children:Ve.title}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:$r(Ve.programId)})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Questions"}),r.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:Ve.questions?.length||Ve.questionCount||0})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Total Points"}),r.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:er(Ve)})]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[r.jsxs("button",{onClick:()=>Tt(Ve),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:[r.jsx(Lr,{className:"h-4 w-4"}),"Details"]}),r.jsx("button",{onClick:()=>bt(Ve),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:r.jsx(Js,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>ze(Ve),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:r.jsx(hr,{className:"h-4 w-4"})})]})]},Ve._id)),n.totalPages>0&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsx(Dr,{currentPage:n.currentPage,totalPages:n.totalPages,totalItems:n.totalCount,itemsPerPage:n.limit,onPageChange:k,itemLabel:"quizzes"})})]})})]}),r.jsx(ihe,{isOpen:pe,onClose:le,onSubmit:ut,isLoading:at,serverError:ft,quizToEdit:oe,programs:M}),r.jsx(che,{isOpen:te,onClose:us,quiz:de,isLoading:qe}),r.jsx(en,{isOpen:re,onClose:jt,onConfirm:nn,title:"Delete Quiz",message:`Are you sure you want to delete the quiz "${de?.title}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:at}),r.jsx(uhe,{isOpen:Xe,onClose:Cs,onSubmit:Wn,isLoading:at,serverError:ft,programToEdit:tt}),r.jsx(hhe,{isOpen:Le,onClose:ot,program:He,isLoading:pt,onFetchStats:U}),r.jsx(en,{isOpen:Ue,onClose:sr,onConfirm:vn,title:"Delete Program",message:`Are you sure you want to delete the program "${He?.title}"? This will also affect all associated quizzes and user progress.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:at})]})}const So={BASE:"/web/challenges",GET_BY_ID:e=>`/web/challenges/${e}`,UPDATE:e=>`/web/challenges/${e}`,DELETE:e=>`/web/challenges/${e}`,TOGGLE_STATUS:e=>`/web/challenges/${e}/toggle-status`,STATS:e=>`/web/challenges/${e}/stats`,PARTICIPANTS:e=>`/web/challenges/${e}/participants`},Co={getAll:async(e={})=>{const{page:t=1,limit:s=10,sortBy:n="createdAt",sortOrder:a="desc",isActive:l="",search:u="",category:f="",difficulty:m=""}=e,x=new URLSearchParams;x.append("page",t.toString()),x.append("limit",s.toString()),x.append("sortBy",n),x.append("sortOrder",a),l!==""&&x.append("isActive",l),u&&x.append("search",u),f&&x.append("category",f),m&&x.append("difficulty",m);const p=`${So.BASE}?${x.toString()}`;return console.log("[ChallengeService] Fetching challenges:",p),Te(Ee.get(p))},getById:async e=>e?(console.log("[ChallengeService] Fetching challenge:",e),Te(Ee.get(So.GET_BY_ID(e)))):(console.error("[ChallengeService] getById: No ID provided"),{success:!1,error:"Challenge ID is required"}),create:async e=>(console.log("[ChallengeService] Creating challenge:",e.title),!e.tasks||e.tasks.length===0?(console.error("[ChallengeService] create: No tasks provided"),{success:!1,error:"At least one task is required"}):Te(Ee.post(So.BASE,e))),update:async(e,t)=>e?(console.log("[ChallengeService] Updating challenge:",e),Te(Ee.put(So.UPDATE(e),t))):(console.error("[ChallengeService] update: No ID provided"),{success:!1,error:"Challenge ID is required"}),delete:async e=>e?(console.log("[ChallengeService] Deleting challenge:",e),Te(Ee.delete(So.DELETE(e)))):(console.error("[ChallengeService] delete: No ID provided"),{success:!1,error:"Challenge ID is required"}),toggleStatus:async e=>e?(console.log("[ChallengeService] Toggling status for challenge:",e),Te(Ee.patch(So.TOGGLE_STATUS(e)))):(console.error("[ChallengeService] toggleStatus: No ID provided"),{success:!1,error:"Challenge ID is required"}),getStats:async e=>e?(console.log("[ChallengeService] Fetching stats for challenge:",e),Te(Ee.get(So.STATS(e)))):(console.error("[ChallengeService] getStats: No ID provided"),{success:!1,error:"Challenge ID is required"}),getParticipants:async(e,t={})=>{if(!e)return console.error("[ChallengeService] getParticipants: No ID provided"),{success:!1,error:"Challenge ID is required"};const{page:s=1,limit:n=10,status:a=""}=t,l=new URLSearchParams;l.append("page",s.toString()),l.append("limit",n.toString()),a&&l.append("status",a);const u=`${So.PARTICIPANTS(e)}?${l.toString()}`;return console.log("[ChallengeService] Fetching participants:",u),Te(Ee.get(u))},buildTask:e=>{const{title:t,description:s=""}=e;return{title:t,description:s}}};function mhe(e={}){const[t,s]=w.useState([]),[n,a]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[l,u]=w.useState({search:"",isActive:"",category:"",difficulty:"",sortBy:"createdAt",sortOrder:"desc",...e}),[f,m]=w.useState(!1),[x,p]=w.useState(null),v=w.useRef(null),C=w.useCallback(async(Y=n.currentPage)=>{m(!0),p(null);try{const $={page:Y,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.isActive!==""&&{isActive:l.isActive},...l.category&&{category:l.category},...l.difficulty&&{difficulty:l.difficulty}};console.log("[useChallenges] Fetching challenges with params:",$);const G=await Co.getAll($);G.success?(s(G.data.challenges||[]),a({currentPage:G.data.pagination?.currentPage||1,totalPages:G.data.pagination?.totalPages||0,totalCount:G.data.pagination?.totalCount||0,limit:G.data.pagination?.limit||10}),console.log("[useChallenges] Fetched challenges:",G.data.challenges?.length)):(console.error("[useChallenges] Failed to fetch challenges:",G.message),p(G.message||"Failed to fetch challenges"),s([]))}catch($){console.error("[useChallenges] Error fetching challenges:",$),p("Failed to fetch challenges"),s([])}finally{m(!1)}},[l,n.limit]),T=w.useCallback(async Y=>{try{console.log("[useChallenges] Creating challenge:",Y.title);const $=await Co.create(Y);return $.success?(console.log("[useChallenges] Challenge created successfully"),await C(1),{success:!0,data:$.data}):(console.error("[useChallenges] Failed to create challenge:",$.message),{success:!1,error:$.message,validationErrors:$.error})}catch($){return console.error("[useChallenges] Error creating challenge:",$),{success:!1,error:"Failed to create challenge"}}},[C]),E=w.useCallback(async Y=>{try{console.log("[useChallenges] Fetching challenge by ID:",Y);const $=await Co.getById(Y);return $.success?{success:!0,data:$.data.challenge}:(console.error("[useChallenges] Failed to fetch challenge:",$.message),{success:!1,error:$.message})}catch($){return console.error("[useChallenges] Error fetching challenge:",$),{success:!1,error:"Failed to fetch challenge details"}}},[]),k=w.useCallback(async Y=>{try{console.log("[useChallenges] Fetching stats for challenge:",Y);const $=await Co.getStats(Y);return $.success?{success:!0,data:$.data}:(console.error("[useChallenges] Failed to fetch challenge stats:",$.message),{success:!1,error:$.message})}catch($){return console.error("[useChallenges] Error fetching challenge stats:",$),{success:!1,error:"Failed to fetch challenge statistics"}}},[]),O=w.useCallback(async(Y,$={})=>{try{console.log("[useChallenges] Fetching participants for challenge:",Y);const G=await Co.getParticipants(Y,$);return G.success?{success:!0,data:G.data}:(console.error("[useChallenges] Failed to fetch participants:",G.message),{success:!1,error:G.message})}catch(G){return console.error("[useChallenges] Error fetching participants:",G),{success:!1,error:"Failed to fetch challenge participants"}}},[]),M=w.useCallback(async(Y,$)=>{try{console.log("[useChallenges] Updating challenge:",Y);const G=await Co.update(Y,$);return G.success?(console.log("[useChallenges] Challenge updated successfully"),s(ee=>ee.map(ce=>ce._id===Y?{...ce,...G.data.challenge}:ce)),{success:!0,data:G.data}):(console.error("[useChallenges] Failed to update challenge:",G.message),{success:!1,error:G.message,validationErrors:G.error})}catch(G){return console.error("[useChallenges] Error updating challenge:",G),{success:!1,error:"Failed to update challenge"}}},[]),L=w.useCallback(async(Y,$)=>{try{console.log("[useChallenges] Toggling status for challenge:",Y);const G=await Co.toggleStatus(Y);return G.success?(console.log("[useChallenges] Challenge status toggled successfully"),s(ee=>ee.map(ce=>ce._id===Y?{...ce,isActive:!$}:ce)),{success:!0}):(console.error("[useChallenges] Failed to toggle challenge status:",G.message),{success:!1,error:G.message})}catch(G){return console.error("[useChallenges] Error toggling challenge status:",G),{success:!1,error:"Failed to update challenge status"}}},[]),P=w.useCallback(async Y=>{try{console.log("[useChallenges] Deleting challenge:",Y);const $=await Co.delete(Y);return $.success?(console.log("[useChallenges] Challenge deleted successfully"),s(G=>G.filter(ee=>ee._id!==Y)),a(G=>({...G,totalCount:G.totalCount-1,totalPages:Math.ceil((G.totalCount-1)/G.limit)})),{success:!0}):(console.error("[useChallenges] Failed to delete challenge:",$.message),{success:!1,error:$.message})}catch($){return console.error("[useChallenges] Error deleting challenge:",$),{success:!1,error:"Failed to delete challenge"}}},[]),H=w.useCallback(Y=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{u($=>({...$,search:Y}))},300)},[]),B=w.useCallback(Y=>{u($=>({...$,...Y}))},[]),F=w.useCallback(()=>{u({search:"",isActive:"",category:"",difficulty:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),R=w.useCallback(Y=>{C(Y)},[C]),z=w.useCallback(Y=>{a($=>({...$,limit:Y}))},[]),U=w.useCallback(()=>{p(null)},[]);return w.useEffect(()=>{C(1)},[l]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{challenges:t,pagination:n,filters:l,isLoading:f,error:x,fetchChallenges:C,createChallenge:T,getChallengeById:E,getChallengeStats:k,getChallengeParticipants:O,updateChallenge:M,toggleChallengeStatus:L,deleteChallenge:P,searchChallenges:H,updateFilters:B,resetFilters:F,changePage:R,changeLimit:z,clearError:U}}const ghe=[{value:"health",label:"Health"},{value:"fitness",label:"Fitness"},{value:"mindfulness",label:"Mindfulness"},{value:"productivity",label:"Productivity"},{value:"social",label:"Social"},{value:"creativity",label:"Creativity"},{value:"learning",label:"Learning"},{value:"wellness",label:"Wellness"},{value:"habit",label:"Habit"},{value:"other",label:"Other"}],xhe=[{value:"easy",label:"Easy",description:"Suitable for beginners"},{value:"medium",label:"Medium",description:"Moderate effort required"},{value:"hard",label:"Hard",description:"Challenging for experienced users"}],wO=()=>({title:"",description:"",category:"",difficulty:"medium",tasks:[],durationDays:"",imageUrl:"",isActive:!1}),phe=()=>({title:"",description:""});function yhe({isOpen:e,onClose:t,onSubmit:s,isLoading:n=!1,serverError:a=null,challengeToEdit:l=null}){const[u,f]=w.useState(wO()),[m,x]=w.useState({}),[p,v]=w.useState("basic"),C=!!l;w.useEffect(()=>{e&&(f(l?{title:l.title||"",description:l.description||"",category:l.category||"",difficulty:l.difficulty||"medium",tasks:l.tasks?.map(P=>({title:P.title||"",description:P.description||""}))||[],durationDays:l.durationDays?.toString()||"",imageUrl:l.imageUrl||"",isActive:l.isActive??!1}:wO()),x({}),v("basic"))},[e,l]);const T=P=>{const H={};if(P.title.trim()?P.title.length>200&&(H.title="Title must be less than 200 characters"):H.title="Title is required",P.description.trim()?P.description.length>2e3&&(H.description="Description must be less than 2000 characters"):H.description="Description is required",P.category||(H.category="Category is required"),P.durationDays){const B=parseInt(P.durationDays,10);isNaN(B)||B<1?H.durationDays="Duration must be at least 1 day":B>365&&(H.durationDays="Duration cannot exceed 365 days")}if(P.imageUrl&&!/^https?:\/\/.+/.test(P.imageUrl)&&(H.imageUrl="Please provide a valid image URL"),P.tasks.length===0)H.tasks="At least one task is required";else{const B=[];P.tasks.forEach((F,R)=>{const z={};F.title.trim()||(z.title="Task title is required"),Object.keys(z).length>0&&(B[R]=z)}),(B.length>0||Object.keys(B).some(F=>B[F]))&&(H.taskErrors=B)}return{isValid:Object.keys(H).length===0,errors:H}},E=(P,H)=>{f(B=>({...B,[P]:H})),m[P]&&x(B=>{const F={...B};return delete F[P],F})},k=()=>{f(P=>({...P,tasks:[...P.tasks,phe()]}))},O=P=>{f(H=>({...H,tasks:H.tasks.filter((B,F)=>F!==P)}))},M=(P,H,B)=>{f(F=>({...F,tasks:F.tasks.map((R,z)=>z!==P?R:{...R,[H]:B})}))},L=async P=>{P.preventDefault();const{isValid:H,errors:B}=T(u);if(!H){x(B),(B.tasks||B.taskErrors)&&v("tasks");return}const F={title:u.title.trim(),description:u.description.trim(),category:u.category,difficulty:u.difficulty,tasks:u.tasks.map((z,U)=>({title:z.title.trim(),description:z.description.trim(),order:U})),isActive:u.isActive};u.durationDays&&(F.durationDays=parseInt(u.durationDays,10)),u.imageUrl.trim()&&(F.imageUrl=u.imageUrl.trim()),console.log("[ChallengeForm] Submitting data:",F),(await s(F))?.success&&t()};return r.jsx(Lt,{isOpen:e,onClose:t,title:C?"Edit Challenge":"Create Challenge",size:"xl",children:r.jsxs("form",{onSubmit:L,className:"space-y-4",children:[r.jsxs("div",{className:"flex border-b border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>v("basic"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${p==="basic"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Basic Info"}),r.jsxs("button",{type:"button",onClick:()=>v("tasks"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${p==="tasks"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Tasks (",u.tasks.length,")"]})]}),r.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:p==="basic"?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Challenge Title ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:u.title,onChange:P=>E("title",P.target.value),placeholder:"e.g., 30-Day Fitness Challenge",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.title&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.title})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{value:u.description,onChange:P=>E("description",P.target.value),placeholder:"Describe what participants will achieve through this challenge...",rows:4,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${m.description?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.description&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.description})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:u.category,onChange:P=>E("category",P.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.category?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`,children:[r.jsx("option",{value:"",children:"Select a category"}),ghe.map(P=>r.jsx("option",{value:P.value,children:P.label},P.value))]}),m.category&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.category})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficulty"}),r.jsx("select",{value:u.difficulty,onChange:P=>E("difficulty",P.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`,children:xhe.map(P=>r.jsx("option",{value:P.value,children:P.label},P.value))})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Duration (Days)",r.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),r.jsx("input",{type:"number",value:u.durationDays,onChange:P=>E("durationDays",P.target.value),placeholder:"e.g., 30",min:"1",max:"365",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.durationDays?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),m.durationDays&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.durationDays}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Duration of the challenge in days. Leave empty for no time limit."})]}),r.jsx(ha,{label:"Challenge Image",value:u.imageUrl,onUpload:P=>E("imageUrl",P),disabled:n,error:m.imageUrl,type:"image",folder:"challenges",placeholder:"Drop image here or click to upload"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u.isActive,onChange:P=>E("isActive",P.target.checked),disabled:n,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]}),r.jsx("span",{className:"text-sm text-gray-700",children:u.isActive?"Active (Visible to users)":"Inactive"})]})]}):r.jsxs("div",{className:"space-y-4",children:[m.tasks&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-red-700",children:m.tasks})}),u.tasks.length===0?r.jsxs("div",{className:"p-8 text-center border-2 border-dashed border-gray-200 rounded-lg",children:[r.jsx("p",{className:"text-gray-500 mb-3",children:"No tasks added yet"}),r.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:[r.jsx(kr,{className:"h-4 w-4"}),"Add Task"]})]}):r.jsxs(r.Fragment,{children:[u.tasks.map((P,H)=>r.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(sp,{className:"h-4 w-4 text-gray-400"}),r.jsxs("span",{className:"font-medium text-gray-700",children:["Task ",H+1]})]}),r.jsx("button",{type:"button",onClick:()=>O(H),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:r.jsx(hr,{className:"h-4 w-4"})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["Title ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:P.title,onChange:B=>M(H,"title",B.target.value),placeholder:"e.g., Do 20 pushups",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${m.taskErrors?.[H]?.title?"border-red-500":"border-gray-300"}`}),m.taskErrors?.[H]?.title&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:m.taskErrors[H].title})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["Description",r.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),r.jsx("textarea",{value:P.description,onChange:B=>M(H,"description",B.target.value),placeholder:"Additional details about this task...",rows:2,disabled:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none transition-colors"})]})]},H)),r.jsxs("button",{type:"button",onClick:k,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",children:[r.jsx(kr,{className:"h-4 w-4"}),"Add Task"]})]})]})}),a&&r.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[r.jsx(Mt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-700",children:a})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:n?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{children:C?"Updating...":"Creating..."})]}):r.jsx("span",{children:C?"Update Challenge":"Create Challenge"})})]})]})})}const jO=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"-",r2={easy:{color:"bg-green-100 text-green-700",label:"Easy"},medium:{color:"bg-amber-100 text-amber-700",label:"Medium"},hard:{color:"bg-red-100 text-red-700",label:"Hard"}},SO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-";function bhe({isOpen:e,onClose:t,challenge:s,isLoading:n=!1,onFetchStats:a}){const[l,u]=w.useState(null),[f,m]=w.useState(!1),[x,p]=w.useState(null);return w.useEffect(()=>{(async()=>{if(!(!e||!s?._id||!a)){m(!0),p(null);try{const C=await a(s._id);C.success?u(C.data.stats||C.data):p(C.error||"Failed to load statistics")}catch(C){console.error("[ChallengeDetailsModal] Error fetching stats:",C),p("Failed to load statistics")}finally{m(!1)}}})()},[e,s?._id,a]),w.useEffect(()=>{e||(u(null),p(null))},[e]),e?r.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:t}),r.jsx("div",{className:"relative min-h-full flex items-center justify-center p-4",children:r.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Challenge Details"}),r.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Kr,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:n?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading challenge details..."})]}):s?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${s.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:s.isActive?"Active":"Inactive"}),s.category&&r.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:jO(s.category)}),s.difficulty&&r.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${r2[s.difficulty]?.color||"bg-gray-100 text-gray-700"}`,children:r2[s.difficulty]?.label||s.difficulty}),s.durationDays&&r.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:[s.durationDays," Days"]})]}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:s.title})]}),s.description&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:s.description})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[r.jsx($g,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),r.jsx("p",{className:"text-2xl font-bold text-blue-700",children:s.tasks?.length||0}),r.jsx("p",{className:"text-xs text-blue-600",children:"Tasks"})]}),r.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[r.jsx(Vc,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),r.jsx("p",{className:"text-lg font-semibold text-purple-700",children:jO(s.category)}),r.jsx("p",{className:"text-xs text-purple-600",children:"Category"})]}),r.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 text-center",children:[r.jsx(yk,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),r.jsx("p",{className:"text-lg font-semibold text-amber-700",children:r2[s.difficulty]?.label||"Medium"}),r.jsx("p",{className:"text-xs text-amber-600",children:"Difficulty"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[r.jsx(fr,{className:"h-5 w-5 text-gray-500 mx-auto mb-1"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.durationDays?`${s.durationDays}d`:"No Limit"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Duration"})]})]}),s.tasks&&s.tasks.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[r.jsx($g,{className:"h-4 w-4"}),"Tasks (",s.tasks.length,")"]}),r.jsx("div",{className:"space-y-2",children:s.tasks.map((v,C)=>r.jsx("div",{className:"p-3 border border-gray-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-xs font-medium text-gray-600",children:C+1}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:v.title}),v.description&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:v.description})]})]})},C))})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[r.jsx(Fa,{className:"h-4 w-4"}),"Statistics"]}),f?r.jsxs("div",{className:"flex items-center justify-center py-8 bg-gray-50 rounded-lg",children:[r.jsx(it,{className:"h-6 w-6 text-gray-400 animate-spin"}),r.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading statistics..."})]}):x?r.jsx("div",{className:"p-4 bg-red-50 rounded-lg text-sm text-red-600",children:x}):l?r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[r.jsx(Yn,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),r.jsx("p",{className:"text-2xl font-bold text-blue-700",children:l.totalParticipants||0}),r.jsx("p",{className:"text-xs text-blue-600",children:"Participants"})]}),r.jsxs("div",{className:"bg-amber-50 rounded-lg p-3 text-center",children:[r.jsx(jr,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),r.jsx("p",{className:"text-2xl font-bold text-amber-700",children:l.activeParticipants||0}),r.jsx("p",{className:"text-xs text-amber-600",children:"Active"})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[r.jsx(sd,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),r.jsx("p",{className:"text-2xl font-bold text-green-700",children:l.completedParticipants||0}),r.jsx("p",{className:"text-xs text-green-600",children:"Completed"})]}),r.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 text-center",children:[r.jsx(id,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),r.jsx("p",{className:"text-2xl font-bold text-purple-700",children:l.averageTasksCompleted||0}),r.jsx("p",{className:"text-xs text-purple-600",children:"Avg. Tasks Done"})]})]}):r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg text-sm text-gray-500 text-center",children:"No statistics available"})]}),s.imageUrl&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Challenge Image"}),r.jsx("div",{className:"relative rounded-lg overflow-hidden bg-gray-100 aspect-video",children:r.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-full object-cover",onError:v=>{v.target.style.display="none",v.target.parentElement.innerHTML='<div class="flex items-center justify-center h-full text-gray-400 text-sm">Failed to load image</div>'}})})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[r.jsxs("span",{children:["Created: ",SO(s.createdAt)]}),s.updatedAt&&s.updatedAt!==s.createdAt&&r.jsxs("span",{children:["Updated: ",SO(s.updatedAt)]}),s.createdBy?.name&&r.jsxs("span",{children:["By: ",s.createdBy.name]})]})})]}):r.jsx("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:r.jsx("p",{children:"No challenge data available"})})}),r.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:r.jsx("button",{onClick:t,className:"w-full px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium",children:"Close"})})]})})]}):null}const CO=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"-",vhe=[{value:"health",label:"Health"},{value:"fitness",label:"Fitness"},{value:"mindfulness",label:"Mindfulness"},{value:"productivity",label:"Productivity"},{value:"social",label:"Social"},{value:"creativity",label:"Creativity"},{value:"learning",label:"Learning"},{value:"wellness",label:"Wellness"},{value:"habit",label:"Habit"},{value:"other",label:"Other"}],fg={easy:{color:"bg-green-100 text-green-700",label:"Easy"},medium:{color:"bg-amber-100 text-amber-700",label:"Medium"},hard:{color:"bg-red-100 text-red-700",label:"Hard"}},mg={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-600"};function Nhe(){const{challenges:e,pagination:t,filters:s,isLoading:n,error:a,fetchChallenges:l,createChallenge:u,getChallengeById:f,getChallengeStats:m,updateChallenge:x,toggleChallengeStatus:p,deleteChallenge:v,searchChallenges:C,updateFilters:T,resetFilters:E,changePage:k,clearError:O}=mhe(),[M,L]=w.useState(!1),[P,H]=w.useState(!1),[B,F]=w.useState(!1),[R,z]=w.useState(null),[U,Y]=w.useState(null),[$,G]=w.useState(!1),[ee,ce]=w.useState(!1),[se,J]=w.useState(null),[ne,pe]=w.useState(!1),[be,te]=w.useState(s.search||""),[X,re]=w.useState(s.isActive||""),[ge,de]=w.useState(s.category||""),[je,oe]=w.useState(s.difficulty||""),fe=w.useCallback(()=>{J(null),Y(null),L(!0)},[]),qe=w.useCallback(async Fe=>{J(null),G(!0);try{const ft=await f(Fe._id);ft.success?(Y(ft.data),L(!0)):alert(ft.error||"Failed to load challenge details")}catch(ft){console.error("[Challenges] Failed to load challenge for edit:",ft),alert("An unexpected error occurred")}finally{G(!1)}},[f]),Ne=w.useCallback(()=>{L(!1),J(null),Y(null)},[]),Xe=w.useCallback(async Fe=>{ce(!0),J(null);try{let ft;return U?ft=await x(U._id,Fe):ft=await u(Fe),ft.success?ft:(J(ft.error||"Failed to save challenge"),{success:!1})}catch(ft){return console.error("[Challenges] Form submission error:",ft),J("An unexpected error occurred"),{success:!1}}finally{ce(!1)}},[u,x,U]),st=w.useCallback(async Fe=>{z(Fe),H(!0),G(!0);try{const ft=await f(Fe._id);ft.success&&z(ft.data)}catch(ft){console.error("[Challenges] Failed to fetch details:",ft)}finally{G(!1)}},[f]),Le=w.useCallback(()=>{H(!1),z(null)},[]),we=w.useCallback(async Fe=>{ce(!0);try{const ft=await p(Fe._id,Fe.isActive);ft.success||alert(ft.error||"Failed to update challenge status")}catch(ft){console.error("[Challenges] Toggle status error:",ft),alert("An unexpected error occurred")}finally{ce(!1)}},[p]),Ue=w.useCallback(Fe=>{z(Fe),F(!0)},[]),ue=w.useCallback(()=>{F(!1),z(null)},[]),He=w.useCallback(async()=>{if(R){ce(!0);try{const Fe=await v(R._id);Fe.success?ue():alert(Fe.error||"Failed to delete challenge")}catch(Fe){console.error("[Challenges] Delete error:",Fe),alert("An unexpected error occurred")}finally{ce(!1)}}},[R,v,ue]),Se=w.useCallback(Fe=>{const ft=Fe.target.value;te(ft),C(ft)},[C]),tt=w.useCallback(()=>{T({search:be,isActive:X,category:ge,difficulty:je}),pe(!1)},[be,X,ge,je,T]),lt=w.useCallback(()=>{te(""),re(""),de(""),oe(""),E(),pe(!1)},[E]),pt=w.useCallback(()=>{l(t.currentPage)},[l,t.currentPage]),We=w.useMemo(()=>s.search||s.isActive!==""||s.category||s.difficulty,[s]),at=w.useMemo(()=>{let Fe=0;return s.search&&Fe++,s.isActive!==""&&Fe++,s.category&&Fe++,s.difficulty&&Fe++,Fe},[s]);return r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Challenges"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Create and manage task-based challenges for users"})]}),r.jsxs("button",{onClick:fe,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium",children:[r.jsx(kr,{className:"h-5 w-5"}),r.jsx("span",{children:"Create Challenge"})]})]}),a&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[r.jsx(Mt,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error loading challenges"}),r.jsx("p",{className:"text-sm text-red-700 mt-0.5",children:a})]}),r.jsx("button",{onClick:O,className:"shrink-0 text-red-600 hover:text-red-800",children:""})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",value:be,onChange:Se,placeholder:"Search challenges...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),r.jsxs("button",{onClick:()=>pe(!ne),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${We?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(Va,{className:"h-4 w-4"}),r.jsx("span",{children:"Filters"}),We&&r.jsx("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full",children:at}),r.jsx(fi,{className:`h-4 w-4 transition-transform ${ne?"rotate-180":""}`})]}),r.jsxs("button",{onClick:pt,disabled:n,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[r.jsx(qs,{className:`h-4 w-4 ${n?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),r.jsxs("div",{className:"ml-auto text-sm text-gray-500",children:[t.totalCount," challenge",t.totalCount!==1?"s":""," total"]})]}),ne&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),r.jsxs("select",{value:ge,onChange:Fe=>de(Fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Categories"}),vhe.map(Fe=>r.jsx("option",{value:Fe.value,children:Fe.label},Fe.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficulty"}),r.jsxs("select",{value:je,onChange:Fe=>oe(Fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Difficulties"}),r.jsx("option",{value:"easy",children:"Easy"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"hard",children:"Hard"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{value:X,onChange:Fe=>re(Fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"true",children:"Active"}),r.jsx("option",{value:"false",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex items-end gap-2",children:[r.jsx("button",{onClick:tt,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Apply"}),r.jsx("button",{onClick:lt,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]})})]}),r.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Challenge"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Tasks"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Category"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Difficulty"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Duration"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsx("tbody",{children:n&&e.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading challenges..."})]})}):e.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[r.jsx(Qu,{className:"h-12 w-12 text-gray-300 mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No challenges found"}),r.jsx("button",{onClick:fe,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first challenge"})]})}):e.map(Fe=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"max-w-[300px]",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:Fe.title}),Fe.description&&r.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:Fe.description})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx($g,{className:"h-4 w-4"}),r.jsxs("span",{className:"text-sm",children:[Fe.tasks?.length||Fe.taskCount||0," tasks"]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:[r.jsx(Vc,{className:"h-3 w-3"}),CO(Fe.category)]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${fg[Fe.difficulty]?.color||"bg-gray-100 text-gray-700"}`,children:[r.jsx(yk,{className:"h-3 w-3"}),fg[Fe.difficulty]?.label||"Medium"]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(fr,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:Fe.durationDays?`${Fe.durationDays} days`:"No limit"})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Fe.isActive?mg.active:mg.inactive}`,children:Fe.isActive?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx("button",{onClick:()=>we(Fe),disabled:ee,className:`p-2 rounded-lg transition-colors ${Fe.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:Fe.isActive?"Set Inactive":"Set Active",children:Fe.isActive?r.jsx(wl,{className:"h-5 w-5"}):r.jsx(Ui,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>st(Fe),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details",children:r.jsx(Lr,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>qe(Fe),disabled:$,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit challenge",children:r.jsx(Js,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>Ue(Fe),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:r.jsx(hr,{className:"h-4 w-4"})})]})})]},Fe._id))})]})}),t.totalPages>0&&r.jsx(Dr,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:k,itemLabel:"challenges"})]}),r.jsx("div",{className:"md:hidden space-y-4",children:n&&e.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx(it,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading challenges..."})]}):e.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx(Qu,{className:"h-12 w-12 text-gray-300 mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No challenges found"}),r.jsx("button",{onClick:fe,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium",children:"Create your first challenge"})]}):r.jsxs(r.Fragment,{children:[e.map(Fe=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-3",children:[r.jsx("div",{className:"flex items-start justify-between gap-3",children:r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Fe.isActive?mg.active:mg.inactive}`,children:Fe.isActive?"Active":"Inactive"}),Fe.category&&r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-700",children:CO(Fe.category)}),Fe.difficulty&&r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${fg[Fe.difficulty]?.color||"bg-gray-100 text-gray-700"}`,children:fg[Fe.difficulty]?.label||"Medium"}),Fe.durationDays&&r.jsxs("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700",children:[Fe.durationDays," days"]})]}),r.jsx("p",{className:"font-medium text-gray-900 truncate",children:Fe.title}),Fe.description&&r.jsx("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2",children:Fe.description})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[r.jsxs("div",{className:"flex items-center justify-center gap-1 text-gray-500",children:[r.jsx($g,{className:"h-3 w-3"}),r.jsx("p",{className:"text-xs",children:"Tasks"})]}),r.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:Fe.tasks?.length||Fe.taskCount||0})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[r.jsxs("div",{className:"flex items-center justify-center gap-1 text-gray-500",children:[r.jsx(fr,{className:"h-3 w-3"}),r.jsx("p",{className:"text-xs",children:"Duration"})]}),r.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:Fe.durationDays?`${Fe.durationDays}d`:"No limit"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[r.jsx("button",{onClick:()=>we(Fe),disabled:ee,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Fe.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Fe.isActive?r.jsxs(r.Fragment,{children:[r.jsx(wl,{className:"h-4 w-4"}),"Active"]}):r.jsxs(r.Fragment,{children:[r.jsx(Ui,{className:"h-4 w-4"}),"Inactive"]})}),r.jsxs("button",{onClick:()=>st(Fe),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:[r.jsx(Lr,{className:"h-4 w-4"}),"Details"]}),r.jsx("button",{onClick:()=>qe(Fe),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:r.jsx(Js,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>Ue(Fe),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:r.jsx(hr,{className:"h-4 w-4"})})]})]},Fe._id)),t.totalPages>0&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsx(Dr,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:k,itemLabel:"challenges"})})]})}),r.jsx(yhe,{isOpen:M,onClose:Ne,onSubmit:Xe,isLoading:ee,serverError:se,challengeToEdit:U}),r.jsx(bhe,{isOpen:P,onClose:Le,challenge:R,isLoading:$,onFetchStats:m}),r.jsx(en,{isOpen:B,onClose:ue,onConfirm:He,title:"Delete Challenge",message:`Are you sure you want to delete the challenge "${R?.title}"? This will also affect all participant progress.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:ee})]})}const Lu={BASE:"/web/polls",BY_EVENT:"/web/polls/event"},Bu={create:async e=>{console.log("[PollService] Creating poll for event:",e.eventId);const t=await Te(Ee.post(Lu.BASE,e));return t.success?console.log("[PollService] Created poll:",t.data?._id):console.error("[PollService] Failed to create poll:",t.message),t},getByEventId:async e=>{console.log("[PollService] Fetching poll for event:",e);const t=await Te(Ee.get(`${Lu.BY_EVENT}/${e}`));return t.success?console.log("[PollService] Fetched poll:",t.data?._id):console.error("[PollService] Failed to fetch poll:",t.message),t},update:async(e,t)=>{console.log("[PollService] Updating poll:",e);const s=await Te(Ee.put(`${Lu.BASE}/${e}`,t));return s.success?console.log("[PollService] Updated poll successfully"):console.error("[PollService] Failed to update poll:",s.message),s},delete:async e=>{console.log("[PollService] Deleting poll:",e);const t=await Te(Ee.delete(`${Lu.BASE}/${e}`));return t.success?console.log("[PollService] Deleted poll successfully"):console.error("[PollService] Failed to delete poll:",t.message),t},getStats:async e=>{console.log("[PollService] Fetching stats for poll:",e);const t=await Te(Ee.get(`${Lu.BASE}/${e}/stats`));return t.success?console.log("[PollService] Fetched poll stats, total submissions:",t.data?.totalSubmissions):console.error("[PollService] Failed to fetch poll stats:",t.message),t},notifyUsers:async e=>{console.log("[PollService] Sending notification for poll:",e);const t=await Te(Ee.post(`${Lu.BASE}/${e}/notify`));return t.success?console.log("[PollService] Notification sent, success:",t.data?.successCount,"failed:",t.data?.failureCount):console.error("[PollService] Failed to send notification:",t.message),t}},AO=(e=null)=>({questions:e?.questions?.length>0?e.questions.map(t=>({questionText:t.questionText||"",options:t.options?.length>0?[...t.options]:["",""]})):[{questionText:"",options:["",""]}],isActive:e?.isActive??!0}),whe=e=>{const t={};if(!e.questions||e.questions.length===0)return t.questions="At least one question is required",{isValid:!1,errors:t};const s=[];return e.questions.forEach((n,a)=>{const l={};n.questionText?.trim()?n.questionText.length>500&&(l.questionText="Question text must be 500 characters or less"):l.questionText="Question text is required";const u=n.options?.filter(m=>m?.trim())||[];u.length<2&&(l.options="At least 2 options are required"),new Set(u.map(m=>m.trim().toLowerCase())).size!==u.length&&(l.options="Options must be unique"),Object.keys(l).length>0&&(s[a]=l)}),s.some(n=>n)&&(t.questionErrors=s),{isValid:Object.keys(t).length===0,errors:t}};function EO({isOpen:e,onClose:t,onSubmit:s,poll:n=null,event:a=null,isLoading:l=!1,serverError:u=null}){const f=!!n,[m,x]=w.useState(AO(n)),[p,v]=w.useState({});w.useEffect(()=>{e&&(x(AO(n)),v({}),console.log("[PollForm] Form initialized:",{isEditMode:f,poll:n}))},[e,n]);const C=(B,F)=>{x(R=>({...R,questions:R.questions.map((z,U)=>U===B?{...z,questionText:F}:z)})),p.questionErrors?.[B]?.questionText&&v(R=>{const z={...R};return z.questionErrors?.[B]&&delete z.questionErrors[B].questionText,z})},T=(B,F,R)=>{x(z=>({...z,questions:z.questions.map((U,Y)=>Y===B?{...U,options:U.options.map(($,G)=>G===F?R:$)}:U)})),p.questionErrors?.[B]?.options&&v(z=>{const U={...z};return U.questionErrors?.[B]&&delete U.questionErrors[B].options,U})},E=B=>{x(F=>({...F,questions:F.questions.map((R,z)=>z===B?{...R,options:[...R.options,""]}:R)}))},k=(B,F)=>{x(R=>({...R,questions:R.questions.map((z,U)=>U===B?{...z,options:z.options.filter((Y,$)=>$!==F)}:z)}))},O=()=>{x(B=>({...B,questions:[...B.questions,{questionText:"",options:["",""]}]}))},M=B=>{x(F=>({...F,questions:F.questions.filter((R,z)=>z!==B)}))},L=()=>{x(B=>({...B,isActive:!B.isActive}))},P=async B=>{B.preventDefault();const F=whe(m);if(!F.isValid){v(F.errors),console.log("[PollForm] Validation failed:",F.errors);return}const R={questions:m.questions.map(z=>({questionText:z.questionText.trim(),options:z.options.filter(U=>U?.trim()).map(U=>U.trim())}))};!f&&a?R.eventId=a._id:f&&(R.isActive=m.isActive),console.log("[PollForm] Submitting:",R),await s(R)},H=()=>{l||t()};return r.jsx(Lt,{isOpen:e,onClose:H,title:f?"Edit Poll":"Create Poll",size:"2xl",closeOnOverlayClick:!l,children:r.jsxs("form",{onSubmit:P,className:"space-y-6",children:[a&&r.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 text-blue-800 rounded-lg",children:r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"font-medium",children:"Event:"})," ",a.name]})}),u&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:u}),p.questions&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:p.questions}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Questions"}),r.jsxs("span",{className:"text-sm text-gray-500",children:[m.questions.length," question(s)"]})]}),m.questions.map((B,F)=>r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-4",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mt-2",children:[r.jsx(sp,{className:"h-4 w-4"}),r.jsxs("span",{className:"font-medium text-sm text-gray-500",children:["Q",F+1]})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Question Text ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:B.questionText,onChange:R=>C(F,R.target.value),disabled:l,maxLength:500,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${p.questionErrors?.[F]?.questionText?"border-red-500":"border-gray-300"}`,placeholder:"Enter your question"}),p.questionErrors?.[F]?.questionText&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:p.questionErrors[F].questionText})]}),m.questions.length>1&&r.jsx("button",{type:"button",onClick:()=>M(F),disabled:l,className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors mt-6",title:"Remove question",children:r.jsx(hr,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"ml-10 space-y-2",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Options ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(min 2)"})]}),p.questionErrors?.[F]?.options&&r.jsx("p",{className:"text-sm text-red-500",children:p.questionErrors[F].options}),B.options.map((R,z)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-sm text-gray-400 w-6",children:[z+1,"."]}),r.jsx("input",{type:"text",value:R,onChange:U=>T(F,z,U.target.value),disabled:l,maxLength:200,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:`Option ${z+1}`}),B.options.length>2&&r.jsx("button",{type:"button",onClick:()=>k(F,z),disabled:l,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Remove option",children:r.jsx(hr,{className:"h-4 w-4"})})]},z)),r.jsxs("button",{type:"button",onClick:()=>E(F),disabled:l||B.options.length>=10,className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[r.jsx(kr,{className:"h-3 w-3"}),"Add Option"]})]})]},F)),r.jsxs("button",{type:"button",onClick:O,disabled:l||m.questions.length>=20,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 text-gray-600 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[r.jsx(kr,{className:"h-4 w-4"}),"Add Question"]})]}),f&&r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Poll Status"}),r.jsx("p",{className:"text-sm text-gray-500",children:m.isActive?"Poll is accepting submissions":"Poll is closed for submissions"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:m.isActive,onChange:L,disabled:l,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:H,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[l&&r.jsx(it,{className:"h-4 w-4 animate-spin"}),f?"Update Poll":"Create Poll"]})]})]})})}function jhe(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function She(e){return e==="ONLINE"||e==="HYBRID"?cf:lw}function Che(e){const t={TECHNOLOGY:"bg-blue-100 text-blue-700",EDUCATION:"bg-indigo-100 text-indigo-700",MEDICAL:"bg-green-100 text-green-700",COMEDY:"bg-yellow-100 text-yellow-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",BUSINESS:"bg-gray-100 text-gray-700",SPORTS:"bg-orange-100 text-orange-700",ARTS:"bg-purple-100 text-purple-700",MUSIC:"bg-red-100 text-red-700",FOOD:"bg-amber-100 text-amber-700",LIFESTYLE:"bg-teal-100 text-teal-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function Ahe({event:e,poll:t,isLoadingPoll:s=!1,isNotifying:n=!1,canEdit:a=!0,canDelete:l=!0,onCreatePoll:u,onEditPoll:f,onDeletePoll:m,onViewStats:x,onViewPoll:p,onNotifyUsers:v}){const C=!!t,T=She(e.mode);return r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"relative h-36 bg-gradient-to-br from-gray-100 to-gray-200",children:[e.thumbnail?.imageUrl||e.imageUrls?.[0]?r.jsx("img",{src:e.thumbnail?.imageUrl||e.imageUrls?.[0],alt:e.name,className:"w-full h-full object-cover",onError:E=>{E.target.style.display="none"}}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-linear-to-br from-gray-50 to-gray-100",children:r.jsx(fr,{className:"h-12 w-12 text-gray-300"})}),r.jsx("div",{className:"absolute top-2 right-2",children:s?r.jsx("span",{className:"px-2.5 py-1 text-xs font-medium bg-white/90 text-gray-600 rounded-full shadow-sm animate-pulse",children:"Loading..."}):C?r.jsx("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm ${t.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:t.isActive?"Poll Active":"Poll Closed"}):r.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold bg-yellow-500 text-white rounded-full shadow-sm",children:"No Poll"})}),r.jsx("div",{className:"absolute top-2 left-2",children:r.jsx("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm ${e.isLive?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:e.isLive?"Live":"Not Live"})})]}),r.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[r.jsxs("div",{className:"mb-3",children:[r.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-1 text-base",title:e.name,children:e.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:[r.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-md ${Che(e.category)}`,children:e.category}),r.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[r.jsx(T,{className:"h-3 w-3"}),e.mode]})]})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(fr,{className:"h-4 w-4 text-gray-400 shrink-0"}),r.jsx("span",{children:jhe(e.startDate)})]}),C&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(uf,{className:"h-4 w-4 text-gray-400 shrink-0"}),r.jsxs("span",{children:[t.questions?.length||0," question",t.questions?.length!==1?"s":""]})]})]}),r.jsx("div",{className:"mt-auto pt-3 border-t border-gray-100",children:C?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>p(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",title:"View Poll",children:[r.jsx(Lr,{className:"h-4 w-4"}),"View"]}),r.jsxs("button",{onClick:()=>x(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-blue-700 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors",title:"View Statistics",children:[r.jsx(Fa,{className:"h-4 w-4"}),"Stats"]})]}),(a||l)&&r.jsxs("div",{className:"flex items-center gap-2",children:[a&&r.jsxs("button",{onClick:()=>f(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",title:"Edit Poll",children:[r.jsx(hk,{className:"h-4 w-4"}),"Edit"]}),l&&r.jsxs("button",{onClick:()=>m(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-red-200",title:"Delete Poll",children:[r.jsx(hr,{className:"h-4 w-4"}),"Delete"]})]}),a&&r.jsxs("button",{onClick:()=>v(e,t),disabled:n,className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-amber-700 bg-amber-50 hover:bg-amber-100 rounded-lg transition-colors border border-amber-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Send push notification to enrolled users",children:[r.jsx(Vg,{className:`h-4 w-4 ${n?"animate-pulse":""}`}),n?"Sending...":"Notify Users"]})]}):a&&r.jsxs("button",{onClick:()=>u(e),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-gray-800 hover:bg-gray-900 rounded-lg transition-colors",children:[r.jsx(kr,{className:"h-4 w-4"}),"Create Poll"]})})]})]})}function TO(e){return e?new Date(e).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"N/A"}function Ehe({isOpen:e,onClose:t,poll:s,event:n}){return s?r.jsx(Lt,{isOpen:e,onClose:t,title:"Poll Details",size:"2xl",children:r.jsxs("div",{className:"space-y-6",children:[n&&r.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(fr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-blue-900",children:n.name}),r.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:[n.category,"  ",n.mode]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[r.jsx(ls,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Status"})]}),r.jsx("span",{className:`inline-flex px-2 py-1 text-sm font-medium rounded-full ${s.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:s.isActive?"Active":"Closed"})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[r.jsx(uf,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Questions"})]}),r.jsx("p",{className:"text-lg font-bold text-gray-900",children:s.questions?.length||0})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[r.jsx(jr,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Created"})]}),r.jsx("p",{className:"text-sm text-gray-900",children:TO(s.createdAt)})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Questions & Options"}),s.questions?.length===0?r.jsxs("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg text-center",children:[r.jsx(uf,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),r.jsx("p",{className:"text-gray-600 font-medium",children:"No questions"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This poll has no questions configured."})]}):s.questions?.map((a,l)=>r.jsxs("div",{className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[r.jsx("span",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 text-gray-600 font-semibold text-sm rounded-lg",children:l+1}),r.jsx("h4",{className:"font-medium text-gray-900 pt-1",children:a.questionText})]}),r.jsxs("div",{className:"ml-11 space-y-2",children:[r.jsxs("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:["Options (",a.options?.length||0,")"]}),a.options?.map((u,f)=>r.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center bg-white border border-gray-200 text-gray-500 text-xs font-medium rounded-full",children:String.fromCharCode(65+f)}),r.jsx("span",{className:"text-sm text-gray-700",children:u})]},f))]})]},l))]}),r.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[r.jsxs("p",{className:"text-xs text-gray-400",children:["Poll ID: ",r.jsx("code",{className:"bg-gray-100 px-1 py-0.5 rounded",children:s._id})]}),s.updatedAt&&s.updatedAt!==s.createdAt&&r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Last updated: ",TO(s.updatedAt)]})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:r.jsx("button",{onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"})})]})}):null}function The({percentage:e,color:t="blue"}){const s={blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",orange:"bg-orange-500",pink:"bg-pink-500",cyan:"bg-cyan-500",indigo:"bg-indigo-500",amber:"bg-amber-500"};return r.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full ${s[t]||s.blue} rounded-full transition-all duration-500 ease-out`,style:{width:`${Math.min(100,e)}%`}})})}const Ohe=e=>{const t=["blue","green","purple","orange","pink","cyan","indigo","amber"];return t[e%t.length]};function Dhe({isOpen:e,onClose:t,poll:s,stats:n,isLoading:a=!1,error:l=null,onFetchStats:u}){return w.useEffect(()=>{e&&s&&u&&(console.log("[PollStatsModal] Fetching stats for poll:",s._id),u(s._id))},[e,s,u]),s?r.jsx(Lt,{isOpen:e,onClose:t,title:"Poll Statistics",size:"2xl",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Poll Overview"}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:s.isActive?"Active":"Closed"})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[s.questions?.length||0," question(s)"]})]}),l&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:r.jsx("p",{className:"text-sm",children:l})}),a&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(it,{className:"h-8 w-8 animate-spin text-gray-400"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading statistics..."})]}),!a&&n&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(Yn,{className:"h-5 w-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-blue-900",children:n.totalSubmissions||0}),r.jsx("p",{className:"text-sm text-blue-700",children:"Total Submissions"})]})]})}),r.jsx("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(ls,{className:"h-5 w-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-green-900",children:n.questions?.length||0}),r.jsx("p",{className:"text-sm text-green-700",children:"Questions"})]})]})}),r.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(Fa,{className:"h-5 w-5 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-purple-900",children:n.questions?.reduce((f,m)=>f+(m.options?.length||0),0)||0}),r.jsx("p",{className:"text-sm text-purple-700",children:"Total Options"})]})]})})]}),n.totalSubmissions===0&&r.jsxs("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg text-center",children:[r.jsx(Fa,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),r.jsx("p",{className:"text-gray-600 font-medium",children:"No submissions yet"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Statistics will appear once users start submitting their answers."})]}),n.totalSubmissions>0&&n.questions?.map((f,m)=>r.jsxs("div",{className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("span",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 text-gray-600 font-semibold text-sm rounded-lg",children:m+1}),r.jsx("h4",{className:"font-medium text-gray-900 pt-1",children:f.questionText})]}),r.jsx("div",{className:"space-y-3 ml-11",children:f.options?.map((x,p)=>r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-700",children:x.optionText}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:x.count||0}),r.jsxs("span",{className:"text-sm text-gray-500",children:["(",(x.percentage||0).toFixed(1),"%)"]})]})]}),r.jsx(The,{percentage:x.percentage||0,color:Ohe(p)})]},p))})]},m))]}),!a&&!n&&!l&&r.jsxs("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg text-center",children:[r.jsx(Fa,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),r.jsx("p",{className:"text-gray-600 font-medium",children:"No statistics available"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Statistics could not be loaded for this poll."})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:r.jsx("button",{onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"})})]})}):null}function khe(){const{hasRole:e}=mn(),t=e(["SUPER_ADMIN","ADMIN"]),s=e(["SUPER_ADMIN","ADMIN"]),n=e(["SUPER_ADMIN","ADMIN"]),[a,l]=w.useState([]),[u,f]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:12}),[m,x]=w.useState(!1),[p,v]=w.useState(null),[C,T]=w.useState({}),[E,k]=w.useState({}),[O,M]=w.useState({}),[L,P]=w.useState(""),[H,B]=w.useState(!1),[F,R]=w.useState("all"),[z,U]=w.useState("grid"),[Y,$]=w.useState(!1),[G,ee]=w.useState(!1),[ce,se]=w.useState(!1),[J,ne]=w.useState(!1),[pe,be]=w.useState(!1),[te,X]=w.useState(null),[re,ge]=w.useState(null),[de,je]=w.useState(null),[oe,fe]=w.useState(!1),[qe,Ne]=w.useState(null),[Xe,st]=w.useState(!1),[Le,we]=w.useState(null),[Ue,ue]=w.useState(null),He=w.useRef(null),Se=w.useCallback(async(ve=1)=>{x(!0),v(null);try{const Je={page:ve,limit:u.limit,sortBy:"createdAt",sortOrder:"desc"};L.trim()&&(Je.search=L.trim()),console.log("[Polls] Fetching events with params:",Je);const nt=await Ra.getAll(Je);if(nt.success){l(nt.data.events||[]),f({currentPage:nt.data.pagination?.currentPage||1,totalPages:nt.data.pagination?.totalPages||0,totalCount:nt.data.pagination?.totalCount||0,limit:nt.data.pagination?.limit||12});const At=(nt.data.events||[]).map(gr=>gr._id);tt(At)}else v(nt.message||"Failed to fetch events"),console.error("[Polls] Failed to fetch events:",nt.message)}catch(Je){v("An unexpected error occurred"),console.error("[Polls] Error fetching events:",Je)}finally{x(!1)}},[L,u.limit]),tt=w.useCallback(async ve=>{const Je=ve.map(async nt=>{if(C[nt]===void 0){k(At=>({...At,[nt]:!0}));try{const At=await Bu.getByEventId(nt);At.success?T(gr=>({...gr,[nt]:At.data})):T(gr=>({...gr,[nt]:null}))}catch(At){console.error(`[Polls] Error fetching poll for event ${nt}:`,At),T(gr=>({...gr,[nt]:null}))}finally{k(At=>({...At,[nt]:!1}))}}});await Promise.all(Je)},[C]);w.useEffect(()=>{Se(1)},[]);const lt=w.useCallback(ve=>{P(ve),He.current&&clearTimeout(He.current),He.current=setTimeout(()=>{Se(1)},300)},[Se]),pt=w.useCallback(ve=>{Se(ve),window.scrollTo({top:0,behavior:"smooth"})},[Se]),We=w.useCallback(()=>{T({}),Se(u.currentPage)},[Se,u.currentPage]),at=a.filter(ve=>{if(F==="all")return!0;const Je=C[ve._id]!==null&&C[ve._id]!==void 0;return F==="with-poll"?Je:F==="without-poll"?!Je:!0}),Fe=w.useCallback(ve=>{X(ve),ge(null),we(null),$(!0),console.log("[Polls] Opening create modal for event:",ve.name)},[]),ft=w.useCallback((ve,Je)=>{X(ve),ge(Je),we(null),ee(!0),console.log("[Polls] Opening edit modal for poll:",Je._id)},[]),Gt=w.useCallback((ve,Je)=>{X(ve),ge(Je),se(!0),console.log("[Polls] Opening details modal for poll:",Je._id)},[]),rr=w.useCallback((ve,Je)=>{X(ve),ge(Je),je(null),Ne(null),ne(!0),console.log("[Polls] Opening stats modal for poll:",Je._id)},[]),mr=w.useCallback(async ve=>{fe(!0),Ne(null);try{const Je=await Bu.getStats(ve);Je.success?je(Je.data):Ne(Je.message||"Failed to fetch statistics")}catch(Je){Ne("An unexpected error occurred"),console.error("[Polls] Error fetching stats:",Je)}finally{fe(!1)}},[]),ct=w.useCallback((ve,Je)=>{X(ve),ge(Je),be(!0),console.log("[Polls] Opening delete dialog for poll:",Je._id)},[]),Et=w.useCallback(async(ve,Je)=>{if(Je?._id){M(nt=>({...nt,[Je._id]:!0})),ue(null),v(null);try{console.log("[Polls] Sending notification for poll:",Je._id);const nt=await Bu.notifyUsers(Je._id);if(nt.success){const{successCount:At,failureCount:gr,message:Xs}=nt.data||{};ue(Xs||`Notification sent to ${At} user${At!==1?"s":""}${gr>0?` (${gr} failed)`:""}`),console.log("[Polls] Notification sent successfully")}else v(nt.message||"Failed to send notification"),console.error("[Polls] Failed to send notification:",nt.message)}catch(nt){v("An unexpected error occurred while sending notification"),console.error("[Polls] Error sending notification:",nt)}finally{M(nt=>({...nt,[Je._id]:!1}))}}},[]),_r=w.useCallback(async ve=>{st(!0),we(null);try{console.log("[Polls] Creating poll:",ve);const Je=await Bu.create(ve);Je.success?($(!1),T(nt=>({...nt,[ve.eventId]:Je.data})),console.log("[Polls] Poll created successfully")):(we(Je.message||"Failed to create poll"),console.error("[Polls] Failed to create poll:",Je.message))}catch(Je){we("An unexpected error occurred"),console.error("[Polls] Error creating poll:",Je)}finally{st(!1)}},[]),Sr=w.useCallback(async ve=>{if(re){st(!0),we(null);try{console.log("[Polls] Updating poll:",re._id,ve);const Je=await Bu.update(re._id,ve);Je.success?(ee(!1),te&&T(nt=>({...nt,[te._id]:Je.data})),X(null),ge(null),console.log("[Polls] Poll updated successfully")):(we(Je.message||"Failed to update poll"),console.error("[Polls] Failed to update poll:",Je.message))}catch(Je){we("An unexpected error occurred"),console.error("[Polls] Error updating poll:",Je)}finally{st(!1)}}},[re,te]),cs=w.useCallback(async()=>{if(re){st(!0);try{console.log("[Polls] Deleting poll:",re._id);const ve=await Bu.delete(re._id);ve.success?(be(!1),te&&T(Je=>({...Je,[te._id]:null})),X(null),ge(null),console.log("[Polls] Poll deleted successfully")):(v(ve.message||"Failed to delete poll"),console.error("[Polls] Failed to delete poll:",ve.message))}catch(ve){v("An unexpected error occurred"),console.error("[Polls] Error deleting poll:",ve)}finally{st(!1)}}},[re,te]),_t=w.useCallback(()=>v(null),[]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Polls"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Create and manage polls for your events"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:We,disabled:m,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Refresh events and polls",children:[r.jsx(qs,{className:`h-4 w-4 ${m?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),r.jsxs("div",{className:"flex items-center bg-white border border-gray-300 rounded-lg overflow-hidden",children:[r.jsx("button",{onClick:()=>U("grid"),className:`p-2 transition-colors ${z==="grid"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"Grid view",children:r.jsx(ck,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>U("list"),className:`p-2 transition-colors ${z==="list"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"List view",children:r.jsx(aw,{className:"h-4 w-4"})})]})]})]}),p&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(Mt,{className:"h-5 w-5 shrink-0"}),r.jsx("p",{className:"flex-1",children:p}),r.jsx("button",{onClick:_t,className:"text-red-500 hover:text-red-700 font-medium",children:"Dismiss"})]}),Ue&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg",children:[r.jsx(Vg,{className:"h-5 w-5 shrink-0"}),r.jsx("p",{className:"flex-1",children:Ue}),r.jsx("button",{onClick:()=>ue(null),className:"text-green-500 hover:text-green-700 font-medium",children:"Dismiss"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",value:L,onChange:ve=>lt(ve.target.value),placeholder:"Search events...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),L&&r.jsx("button",{onClick:()=>{P(""),Se(1)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(Kr,{className:"h-4 w-4"})})]}),r.jsxs("button",{onClick:()=>B(!H),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${H||F!=="all"?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`,children:[r.jsx(Va,{className:"h-4 w-4"}),r.jsx("span",{children:"Filters"}),F!=="all"&&r.jsx("span",{className:"w-2 h-2 bg-white rounded-full"})]})]}),H&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Poll Status:"}),r.jsx("div",{className:"flex gap-2",children:[{value:"all",label:"All Events"},{value:"with-poll",label:"With Poll"},{value:"without-poll",label:"Without Poll"}].map(ve=>r.jsx("button",{onClick:()=>R(ve.value),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${F===ve.value?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:ve.label},ve.value))}),F!=="all"&&r.jsx("button",{onClick:()=>R("all"),className:"text-sm text-gray-500 hover:text-gray-700",children:"Reset"})]})})]}),m&&a.length===0?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[...Array(8)].map((ve,Je)=>r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden animate-pulse",children:[r.jsx("div",{className:"h-32 bg-gray-200"}),r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})]},Je))}):at.length===0?r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:r.jsx(Br,{className:"h-8 w-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No events found"}),r.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:L||F!=="all"?"Try adjusting your search or filter criteria.":"Create an event first to add polls."})]}):z==="grid"?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:at.map(ve=>r.jsx(Ahe,{event:ve,poll:C[ve._id],isLoadingPoll:E[ve._id],isNotifying:O[C[ve._id]?._id],canEdit:s,canDelete:n,onCreatePoll:Fe,onEditPoll:ft,onDeletePoll:ct,onViewStats:rr,onViewPoll:Gt,onNotifyUsers:Et},ve._id))}):r.jsx("div",{className:"space-y-3",children:at.map(ve=>r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 flex items-center gap-4",children:[r.jsx("div",{className:"shrink-0 w-20 h-20 rounded-lg overflow-hidden bg-gray-100",children:ve.thumbnail?.imageUrl||ve.imageUrls?.[0]?r.jsx("img",{src:ve.thumbnail?.imageUrl||ve.imageUrls?.[0],alt:ve.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx("span",{className:"text-gray-300 text-2xl",children:"E"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:ve.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[ve.category,"  ",ve.mode]}),r.jsx("div",{className:"flex items-center gap-2 mt-1",children:C[ve._id]?r.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${C[ve._id].isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:C[ve._id].isActive?"Poll Active":"Poll Closed"}):r.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-yellow-100 text-yellow-700",children:"No Poll"})})]}),r.jsx("div",{className:"flex items-center gap-2",children:C[ve._id]?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>rr(ve,C[ve._id]),className:"px-3 py-1.5 text-sm text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:"Stats"}),s&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>ft(ve,C[ve._id]),className:"px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:"Edit"}),r.jsxs("button",{onClick:()=>Et(ve,C[ve._id]),disabled:O[C[ve._id]?._id],className:"flex items-center gap-1 px-3 py-1.5 text-sm text-amber-600 bg-amber-50 hover:bg-amber-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Send push notification to enrolled users",children:[r.jsx(Vg,{className:`h-4 w-4 ${O[C[ve._id]?._id]?"animate-pulse":""}`}),O[C[ve._id]?._id]?"Sending...":"Notify"]})]}),n&&r.jsx("button",{onClick:()=>ct(ve,C[ve._id]),className:"px-3 py-1.5 text-sm text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors",children:"Delete"})]}):t&&r.jsx("button",{onClick:()=>Fe(ve),className:"px-3 py-1.5 text-sm text-white bg-gray-800 hover:bg-gray-900 rounded-lg transition-colors",children:"Create Poll"})})]},ve._id))}),u.totalPages>1&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsx(Dr,{currentPage:u.currentPage,totalPages:u.totalPages,totalItems:u.totalCount,itemsPerPage:u.limit,onPageChange:pt,itemLabel:"events"})}),r.jsx(EO,{isOpen:Y,onClose:()=>{$(!1),X(null)},onSubmit:_r,poll:null,event:te,isLoading:Xe,serverError:Le}),r.jsx(EO,{isOpen:G,onClose:()=>{ee(!1),X(null),ge(null)},onSubmit:Sr,poll:re,event:te,isLoading:Xe,serverError:Le}),r.jsx(Ehe,{isOpen:ce,onClose:()=>{se(!1),X(null),ge(null)},poll:re,event:te}),r.jsx(Dhe,{isOpen:J,onClose:()=>{ne(!1),X(null),ge(null),je(null)},poll:re,stats:de,isLoading:oe,error:qe,onFetchStats:mr}),r.jsx(en,{isOpen:pe,onClose:()=>{be(!1),X(null),ge(null)},onConfirm:cs,title:"Delete Poll",message:`Are you sure you want to delete the poll for "${te?.name}"? This will also delete all associated submissions. This action cannot be undone.`,confirmText:"Delete Poll",cancelText:"Cancel",variant:"danger",isLoading:Xe})]})}const _a={BASE:"/web/stories",STATS:"/web/stories/stats",TTL_OPTIONS:"/web/stories/ttl-options",REORDER:"/web/stories/reorder"},Pi={create:async e=>(console.log("[StoryService] Creating story"),Te(Ee.post(_a.BASE,e))),getAll:async(e={})=>{console.log("[StoryService] Fetching stories:",e);const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.includeExpired!==void 0&&t.append("includeExpired",e.includeExpired);const s=`${_a.BASE}?${t.toString()}`;return Te(Ee.get(s))},getById:async e=>(console.log("[StoryService] Fetching story:",e),Te(Ee.get(`${_a.BASE}/${e}`))),update:async(e,t)=>(console.log("[StoryService] Updating story:",e),Te(Ee.put(`${_a.BASE}/${e}`,t))),toggleActive:async e=>(console.log("[StoryService] Toggling story status:",e),Te(Ee.patch(`${_a.BASE}/${e}/toggle`))),delete:async(e,t=!1)=>{console.log("[StoryService] Deleting story:",e);const s=t?`${_a.BASE}/${e}?deleteMedia=true`:`${_a.BASE}/${e}`;return Te(Ee.delete(s))},permanentDelete:async(e,t=!0)=>{console.log("[StoryService] Permanently deleting story:",e);const s=t?`${_a.BASE}/${e}/permanent`:`${_a.BASE}/${e}/permanent?deleteMedia=false`;return Te(Ee.delete(s))},reorder:async e=>(console.log("[StoryService] Reordering stories"),Te(Ee.put(_a.REORDER,{order:e}))),getStats:async()=>(console.log("[StoryService] Fetching story stats"),Te(Ee.get(_a.STATS))),getTtlOptions:async()=>(console.log("[StoryService] Fetching TTL options"),Te(Ee.get(_a.TTL_OPTIONS)))},FR=[{value:"1_hour",label:"1 hour"},{value:"6_hours",label:"6 hours"},{value:"12_hours",label:"12 hours"},{value:"1_day",label:"1 day"},{value:"3_days",label:"3 days"},{value:"7_days",label:"7 days"},{value:"30_days",label:"30 days"},{value:"forever",label:"Forever"}],_he=[{value:"image",label:"Image"},{value:"video",label:"Video"}],Phe=[{value:"createdAt",label:"Created Date"},{value:"displayOrder",label:"Display Order"},{value:"viewCount",label:"View Count"},{value:"expiresAt",label:"Expiry Date"}],OO={search:"",mediaType:"",isActive:"",includeExpired:!1,sortBy:"displayOrder",sortOrder:"asc"};function Ihe(e={}){const[t,s]=w.useState([]),[n,a]=w.useState({page:1,totalPages:0,total:0,limit:20}),[l,u]=w.useState({...OO,...e}),[f,m]=w.useState(!1),[x,p]=w.useState(null),[v,C]=w.useState(null),[T,E]=w.useState(!1),[k,O]=w.useState(FR),M=w.useRef(null),L=w.useCallback(async(te=n.page)=>{console.log("[useStoriesManagement] Fetching stories"),m(!0),p(null);try{const X={page:te,limit:n.limit,includeExpired:l.includeExpired},re=await Pi.getAll(X);if(re.success){let ge=re.data.stories||[];if(l.mediaType&&(ge=ge.filter(de=>de.mediaType===l.mediaType)),l.isActive!==""){const de=l.isActive==="true";ge=ge.filter(je=>je.isActive===de)}if(l.search){const de=l.search.toLowerCase();ge=ge.filter(je=>je.title?.toLowerCase().includes(de)||je.mediaType?.toLowerCase().includes(de))}ge.sort((de,je)=>{const oe=de[l.sortBy],fe=je[l.sortBy],qe=l.sortOrder==="asc"?1:-1;return typeof oe=="string"?oe.localeCompare(fe)*qe:oe instanceof Date||l.sortBy.includes("At")?(new Date(oe)-new Date(fe))*qe:((oe||0)-(fe||0))*qe}),s(ge),a(de=>({...de,...re.data.pagination}))}else p(re.message),s([])}catch(X){console.error("[useStoriesManagement] Error fetching stories:",X),p("Failed to fetch stories"),s([])}finally{m(!1)}},[l,n.limit,n.page]),P=w.useCallback(async()=>{console.log("[useStoriesManagement] Fetching stats"),E(!0);try{const te=await Pi.getStats();te.success&&C(te.data)}catch(te){console.error("[useStoriesManagement] Error fetching stats:",te)}finally{E(!1)}},[]),H=w.useCallback(async()=>{try{const te=await Pi.getTtlOptions();te.success&&te.data.options&&O(te.data.options)}catch(te){console.error("[useStoriesManagement] Error fetching TTL options:",te)}},[]),B=w.useCallback(async te=>{try{const X=await Pi.getById(te);return X.success?{success:!0,data:X.data}:{success:!1,error:X.message}}catch{return{success:!1,error:"Failed to fetch story details"}}},[]),F=w.useCallback(async te=>{console.log("[useStoriesManagement] Creating story"),m(!0),p(null);try{const X=await Pi.create(te);return X.success?(await L(1),await P(),{success:!0,data:X.data}):{success:!1,error:X.message,validationErrors:X.data?.errors}}catch{return{success:!1,error:"Failed to create story"}}finally{m(!1)}},[L,P]),R=w.useCallback(async(te,X)=>{console.log("[useStoriesManagement] Updating story:",te),m(!0),p(null);try{const re=await Pi.update(te,X);return re.success?(s(ge=>ge.map(de=>de._id===te?{...de,...re.data}:de)),{success:!0,data:re.data}):{success:!1,error:re.message,validationErrors:re.data?.errors}}catch{return{success:!1,error:"Failed to update story"}}finally{m(!1)}},[]),z=w.useCallback(async te=>{console.log("[useStoriesManagement] Toggling story status:",te);try{const X=await Pi.toggleActive(te);return X.success?(s(re=>re.map(ge=>ge._id===te?{...ge,isActive:X.data.isActive}:ge)),{success:!0,data:X.data}):{success:!1,error:X.message}}catch{return{success:!1,error:"Failed to toggle story status"}}},[]),U=w.useCallback(async(te,X=!1)=>{console.log("[useStoriesManagement] Deleting story:",te),m(!0),p(null);try{const re=await Pi.delete(te,X);return re.success?(s(ge=>ge.filter(de=>de._id!==te)),a(ge=>({...ge,total:ge.total-1,totalPages:Math.ceil((ge.total-1)/ge.limit)})),await P(),{success:!0}):{success:!1,error:re.message}}catch{return{success:!1,error:"Failed to delete story"}}finally{m(!1)}},[P]),Y=w.useCallback(async(te,X=!0)=>{console.log("[useStoriesManagement] Permanently deleting story:",te),m(!0),p(null);try{const re=await Pi.permanentDelete(te,X);return re.success?(s(ge=>ge.filter(de=>de._id!==te)),a(ge=>({...ge,total:ge.total-1,totalPages:Math.ceil((ge.total-1)/ge.limit)})),await P(),{success:!0}):{success:!1,error:re.message}}catch{return{success:!1,error:"Failed to permanently delete story"}}finally{m(!1)}},[P]),$=w.useCallback(async te=>{console.log("[useStoriesManagement] Reordering stories");try{const X=await Pi.reorder(te);return X.success?(s(re=>{const ge=new Map(te.map(de=>[de.storyId,de.displayOrder]));return[...re].map(de=>({...de,displayOrder:ge.get(de._id)??de.displayOrder})).sort((de,je)=>de.displayOrder-je.displayOrder)}),{success:!0}):{success:!1,error:X.message}}catch{return{success:!1,error:"Failed to reorder stories"}}},[]),G=w.useCallback(te=>{u(X=>({...X,...te}))},[]),ee=w.useCallback(te=>{M.current&&clearTimeout(M.current),M.current=setTimeout(()=>{u(X=>({...X,search:te}))},300)},[]),ce=w.useCallback(()=>{u({...OO,...e})},[e]),se=w.useCallback(te=>{L(te)},[L]),J=w.useCallback(te=>{a(X=>({...X,limit:te}))},[]),ne=w.useCallback(()=>{u(te=>({...te,includeExpired:!te.includeExpired}))},[]),pe=w.useCallback(()=>{p(null)},[]),be=w.useCallback(()=>{L(1),P()},[L,P]);return w.useEffect(()=>{L(1)},[l]),w.useEffect(()=>{P(),H()},[P,H]),w.useEffect(()=>()=>{M.current&&clearTimeout(M.current)},[]),{stories:t,pagination:n,filters:l,isLoading:f,error:x,stats:v,isLoadingStats:T,ttlOptions:k,fetchStories:L,fetchStats:P,getStoryById:B,createStory:F,updateStory:R,toggleStoryActive:z,deleteStory:U,permanentDeleteStory:Y,reorderStories:$,updateFilters:G,updateSearch:ee,resetFilters:ce,toggleIncludeExpired:ne,changePage:se,changeLimit:J,clearError:pe,refresh:be}}const DO=(e=null)=>({mediaUrl:e?.mediaUrl||"",mediaType:e?.mediaType||"image",title:e?.title||"",cloudinaryPublicId:e?.cloudinaryPublicId||"",ttl:e?.ttl||"1_day",displayOrder:e?.displayOrder??0,isActive:e?.isActive??!0}),Mhe=(e,t=!1)=>{const s={};if(e.mediaUrl?.trim()?/^https?:\/\/.+/.test(e.mediaUrl)||(s.mediaUrl="Invalid media URL"):s.mediaUrl="Media is required",e.mediaType?["image","video"].includes(e.mediaType)||(s.mediaType="Invalid media type"):s.mediaType="Media type is required",e.title&&e.title.length>500&&(s.title="Title must be 500 characters or less"),e.ttl||(s.ttl="Time to live is required"),e.displayOrder!==void 0&&e.displayOrder!==""){const n=parseInt(e.displayOrder,10);(isNaN(n)||n<0)&&(s.displayOrder="Display order must be a non-negative number")}return{isValid:Object.keys(s).length===0,errors:s}},Rhe=e=>e&&/\.(mp4|webm|ogg|mov|avi)(\?.*)?$/i.test(e)?"video":"image",Lhe=e=>{if(!e||!e.includes("cloudinary.com"))return"";const t=e.match(/\/upload\/(?:v\d+\/)?(.+?)(?:\.[^.]+)?$/);return t?t[1]:""};function kO({isOpen:e,onClose:t,onSubmit:s,story:n=null,ttlOptions:a=FR,isLoading:l=!1,serverError:u=null}){const f=!!n,[m,x]=w.useState(DO(n)),[p,v]=w.useState({});w.useEffect(()=>{e&&(x(DO(n)),v({}),console.log("[StoryForm] Form initialized:",{isEditMode:f,story:n?._id}))},[e,n]);const C=(M,L)=>{x(P=>({...P,[M]:L})),p[M]&&v(P=>{const H={...P};return delete H[M],H})},T=M=>{const L=Rhe(M),P=Lhe(M);x(H=>({...H,mediaUrl:M,mediaType:L,cloudinaryPublicId:P})),p.mediaUrl&&v(H=>{const B={...H};return delete B.mediaUrl,B})},E=()=>{x(M=>({...M,isActive:!M.isActive}))},k=async M=>{M.preventDefault();const L=Mhe(m,f);if(!L.isValid){v(L.errors),console.log("[StoryForm] Validation failed:",L.errors);return}const P={mediaUrl:m.mediaUrl.trim(),mediaType:m.mediaType,ttl:m.ttl,displayOrder:parseInt(m.displayOrder,10)||0};m.title?.trim()&&(P.title=m.title.trim()),m.cloudinaryPublicId&&(P.cloudinaryPublicId=m.cloudinaryPublicId),f&&(P.isActive=m.isActive),console.log("[StoryForm] Submitting:",{isEditMode:f,storyId:n?._id}),await s(P)},O=()=>{l||t()};return r.jsx(Lt,{isOpen:e,onClose:O,title:f?"Edit Story":"Create Story",size:"xl",closeOnOverlayClick:!l,children:r.jsxs("form",{onSubmit:k,className:"space-y-6",children:[u&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:u}),r.jsx("div",{children:r.jsx(ha,{label:"Media",required:!0,value:m.mediaUrl,onUpload:T,folder:"stories",type:"any",maxSize:50*1024*1024,placeholder:"Upload image or video for story",error:p.mediaUrl,disabled:l,showUrlInput:!0})}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Media Type ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>C("mediaType","image"),disabled:l,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${m.mediaType==="image"?"border-gray-800 bg-gray-800 text-white":"border-gray-300 text-gray-600 hover:border-gray-400"} disabled:opacity-50`,children:[r.jsx(Mo,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:"Image"})]}),r.jsxs("button",{type:"button",onClick:()=>C("mediaType","video"),disabled:l,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${m.mediaType==="video"?"border-gray-800 bg-gray-800 text-white":"border-gray-300 text-gray-600 hover:border-gray-400"} disabled:opacity-50`,children:[r.jsx(Mi,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:"Video"})]})]}),p.mediaType&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:p.mediaType})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title / Caption",r.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),r.jsx("textarea",{value:m.title,onChange:M=>C("title",M.target.value),disabled:l,maxLength:500,rows:3,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none disabled:bg-gray-100 ${p.title?"border-red-500":"border-gray-300"}`,placeholder:"Add a caption for this story..."}),r.jsxs("div",{className:"flex justify-between mt-1",children:[p.title?r.jsx("p",{className:"text-sm text-red-500",children:p.title}):r.jsx("span",{}),r.jsxs("span",{className:"text-xs text-gray-400",children:[m.title.length,"/500"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(jr,{className:"inline h-4 w-4 mr-1"}),"Time to Live ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("select",{value:m.ttl,onChange:M=>C("ttl",M.target.value),disabled:l,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${p.ttl?"border-red-500":"border-gray-300"}`,children:a.map(M=>r.jsx("option",{value:M.value,children:M.label},M.value))}),p.ttl&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:p.ttl})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(rw,{className:"inline h-4 w-4 mr-1"}),"Display Order"]}),r.jsx("input",{type:"number",value:m.displayOrder,onChange:M=>C("displayOrder",M.target.value),disabled:l,min:0,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${p.displayOrder?"border-red-500":"border-gray-300"}`,placeholder:"0"}),p.displayOrder&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:p.displayOrder}),r.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Lower numbers appear first"})]})]}),f&&r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Story Status"}),r.jsx("p",{className:"text-sm text-gray-500",children:m.isActive?"Story is visible to users":"Story is hidden from users"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:m.isActive,onChange:E,disabled:l,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:O,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[l&&r.jsx(it,{className:"h-4 w-4 animate-spin"}),f?"Update Story":"Create Story"]})]})]})})}function Bhe(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function Fhe(e){if(!e)return"N/A";const n=new Date(e)-new Date;if(n<0)return"Expired";const a=Math.floor(n/(1e3*60*60)),l=Math.floor(a/24);return l>0?`${l}d ${a%24}h left`:a>0?`${a}h left`:`${Math.floor(n/(1e3*60))}m left`}function Uhe(e){return{"1_hour":"1 hour","6_hours":"6 hours","12_hours":"12 hours","1_day":"1 day","3_days":"3 days","7_days":"7 days","30_days":"30 days",forever:"Forever"}[e]||e}function zhe(e,t){return t==="forever"||!e?!1:new Date(e)<new Date}function Vhe({story:e,canEdit:t=!0,canDelete:s=!0,isToggling:n=!1,onView:a,onEdit:l,onDelete:u,onToggleActive:f,draggable:m=!1,dragHandleProps:x={}}){const p=zhe(e.expiresAt,e.ttl),v=e.mediaType==="video";return r.jsxs("div",{className:`bg-white rounded-xl border shadow-sm hover:shadow-md transition-all overflow-hidden flex flex-col ${p?"border-orange-200 bg-orange-50/30":"border-gray-200"}`,children:[r.jsxs("div",{className:"relative h-48 sm:h-56 bg-gradient-to-br from-gray-100 to-gray-200",children:[v?r.jsxs("div",{className:"w-full h-full relative",children:[r.jsx("video",{src:e.mediaUrl,className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata",onError:C=>{C.target.style.display="none",C.target.nextElementSibling?.classList.remove("hidden")}}),r.jsx("div",{className:"hidden w-full h-full flex items-center justify-center bg-gray-100",children:r.jsx(Mi,{className:"h-12 w-12 text-gray-300"})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:r.jsx("div",{className:"w-14 h-14 rounded-full bg-white/90 flex items-center justify-center shadow-lg",children:r.jsx(fk,{className:"h-6 w-6 text-gray-800 ml-1"})})})]}):r.jsxs(r.Fragment,{children:[r.jsx("img",{src:e.mediaUrl,alt:e.title||"Story",className:"w-full h-full object-cover",onError:C=>{C.target.style.display="none",C.target.nextElementSibling?.classList.remove("hidden")}}),r.jsx("div",{className:"hidden w-full h-full flex items-center justify-center bg-gray-100",children:r.jsx(Mo,{className:"h-12 w-12 text-gray-300"})})]}),m&&r.jsx("div",{...x,className:"absolute top-2 left-2 p-1.5 bg-white/90 rounded-lg shadow-sm cursor-grab active:cursor-grabbing",children:r.jsx(sp,{className:"h-4 w-4 text-gray-500"})}),r.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[r.jsx("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm ${e.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:e.isActive?"Active":"Inactive"}),p&&r.jsxs("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm bg-orange-500 text-white flex items-center gap-1",children:[r.jsx(np,{className:"h-3 w-3"}),"Expired"]})]}),r.jsx("div",{className:"absolute bottom-2 left-2",children:r.jsxs("span",{className:"px-2.5 py-1 text-xs font-medium bg-black/60 text-white rounded-full flex items-center gap-1",children:[v?r.jsx(Mi,{className:"h-3 w-3"}):r.jsx(Mo,{className:"h-3 w-3"}),e.mediaType]})}),r.jsx("div",{className:"absolute bottom-2 right-2",children:r.jsxs("span",{className:"px-2.5 py-1 text-xs font-medium bg-black/60 text-white rounded-full flex items-center gap-1",children:[r.jsx(Lr,{className:"h-3 w-3"}),e.viewCount||0]})})]}),r.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[e.title&&r.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-2 text-sm mb-2",title:e.title,children:e.title}),r.jsxs("div",{className:"space-y-1.5 mb-3 text-xs text-gray-500",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}),r.jsxs("span",{children:["TTL: ",Uhe(e.ttl)]})]}),e.ttl!=="forever"&&e.expiresAt&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}),r.jsx("span",{className:p?"text-orange-600 font-medium":"",children:p?"Expired":Fhe(e.expiresAt)})]}),r.jsx("div",{className:"flex items-center gap-2 text-gray-400",children:r.jsxs("span",{children:["Created: ",Bhe(e.createdAt)]})}),r.jsx("div",{className:"flex items-center gap-2 text-gray-400",children:r.jsxs("span",{children:["Order: #",e.displayOrder]})})]}),r.jsxs("div",{className:"mt-auto pt-3 border-t border-gray-100 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>a(e),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",title:"View Story",children:[r.jsx(Lr,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"View"})]}),t&&r.jsxs("button",{onClick:()=>l(e),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",title:"Edit Story",children:[r.jsx(hk,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),s&&r.jsxs("button",{onClick:()=>u(e),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-red-200",title:"Delete Story",children:[r.jsx(hr,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]}),t&&r.jsx("button",{onClick:()=>f(e),disabled:n,className:`w-full flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-lg transition-colors border disabled:opacity-50 ${e.isActive?"text-orange-600 bg-orange-50 hover:bg-orange-100 border-orange-200":"text-green-600 bg-green-50 hover:bg-green-100 border-green-200"}`,title:e.isActive?"Deactivate Story":"Activate Story",children:e.isActive?r.jsxs(r.Fragment,{children:[r.jsx(wl,{className:"h-4 w-4"}),n?"Processing...":"Deactivate"]}):r.jsxs(r.Fragment,{children:[r.jsx(Ui,{className:"h-4 w-4"}),n?"Processing...":"Activate"]})})]})]})]})}function _O(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function $he(e){if(!e)return"N/A";const n=new Date(e)-new Date;if(n<0)return"Expired";const a=Math.floor(n/(1e3*60*60)),l=Math.floor(a/24);if(l>0)return`${l} day${l>1?"s":""} ${a%24} hour${a%24!==1?"s":""} remaining`;if(a>0)return`${a} hour${a!==1?"s":""} remaining`;const u=Math.floor(n/(1e3*60));return`${u} minute${u!==1?"s":""} remaining`}function qhe(e){return{"1_hour":"1 hour","6_hours":"6 hours","12_hours":"12 hours","1_day":"1 day","3_days":"3 days","7_days":"7 days","30_days":"30 days",forever:"Forever"}[e]||e}function Hhe(e,t){return t==="forever"||!e?!1:new Date(e)<new Date}function gg({label:e,value:t,icon:s,variant:n="default"}){const a={default:"bg-gray-50 border-gray-200 text-gray-600",success:"bg-green-50 border-green-200 text-green-600",warning:"bg-orange-50 border-orange-200 text-orange-600",danger:"bg-red-50 border-red-200 text-red-600",info:"bg-blue-50 border-blue-200 text-blue-600"};return r.jsxs("div",{className:`p-3 rounded-lg border ${a[n]}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(s,{className:"h-4 w-4"}),r.jsx("span",{className:"text-xs font-medium uppercase tracking-wide",children:e})]}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t})]})}function Ghe({isOpen:e,onClose:t,story:s}){if(!s)return null;const n=Hhe(s.expiresAt,s.ttl),a=s.mediaType==="video";return r.jsx(Lt,{isOpen:e,onClose:t,title:"Story Details",size:"2xl",children:r.jsxs("div",{className:"space-y-6",children:[n&&r.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 text-orange-700 rounded-lg flex items-center gap-2",children:[r.jsx(np,{className:"h-5 w-5 shrink-0"}),r.jsx("span",{className:"font-medium",children:"This story has expired"})]}),r.jsxs("div",{className:"relative rounded-xl overflow-hidden bg-gray-100",children:[a?r.jsx("div",{className:"relative aspect-[9/16] sm:aspect-video max-h-96 mx-auto bg-black",children:r.jsx("video",{src:s.mediaUrl,controls:!0,className:"w-full h-full object-contain",preload:"metadata",children:"Your browser does not support the video tag."})}):r.jsx("div",{className:"relative max-h-96 flex items-center justify-center bg-gray-900",children:r.jsx("img",{src:s.mediaUrl,alt:s.title||"Story",className:"max-h-96 w-auto object-contain",onError:l=>{l.target.src="",l.target.alt="Failed to load image"}})}),r.jsx("a",{href:s.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 p-2 bg-white/90 rounded-lg shadow-sm hover:bg-white transition-colors",title:"Open in new tab",children:r.jsx(Ed,{className:"h-4 w-4 text-gray-600"})})]}),s.title&&r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Caption"}),r.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:s.title})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[r.jsx(gg,{label:"Status",value:s.isActive?"Active":"Inactive",icon:s.isActive?ls:wr,variant:s.isActive?"success":"default"}),r.jsx(gg,{label:"Views",value:s.viewCount||0,icon:Lr,variant:"info"}),r.jsx(gg,{label:"Type",value:s.mediaType,icon:a?Mi:Mo,variant:"default"}),r.jsx(gg,{label:"Order",value:`#${s.displayOrder}`,icon:rw,variant:"default"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-2",children:[r.jsx(jr,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Time to Live"})]}),r.jsx("p",{className:"text-gray-900 font-semibold",children:qhe(s.ttl)})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${n?"bg-orange-50 border-orange-200":"bg-gray-50 border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-2",children:[r.jsx(jr,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:n?"Expired":"Expires"})]}),r.jsx("p",{className:`font-semibold ${n?"text-orange-700":"text-gray-900"}`,children:s.ttl==="forever"?"Never":n?_O(s.expiresAt):$he(s.expiresAt)})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-2",children:[r.jsx(fr,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Created"})]}),r.jsx("p",{className:"text-gray-900 font-semibold",children:_O(s.createdAt)})]}),s.createdBy&&r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-2",children:[r.jsx(Ls,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Created By"})]}),r.jsx("p",{className:"text-gray-900 font-semibold",children:typeof s.createdBy=="object"?s.createdBy.name||s.createdBy.username:s.createdBy})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500 mb-3",children:"Technical Details"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1",children:[r.jsx("span",{className:"text-gray-500 shrink-0 sm:w-32",children:"Story ID:"}),r.jsx("code",{className:"text-gray-700 bg-gray-200 px-2 py-0.5 rounded text-xs break-all",children:s._id})]}),s.cloudinaryPublicId&&r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1",children:[r.jsx("span",{className:"text-gray-500 shrink-0 sm:w-32",children:"Public ID:"}),r.jsx("code",{className:"text-gray-700 bg-gray-200 px-2 py-0.5 rounded text-xs break-all",children:s.cloudinaryPublicId})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1",children:[r.jsx("span",{className:"text-gray-500 shrink-0 sm:w-32",children:"Media URL:"}),r.jsx("a",{href:s.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-xs break-all",children:s.mediaUrl})]})]})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsx("button",{onClick:t,className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Close"})})]})})}function Yhe({filters:e,onFilterChange:t,onSearchChange:s,onReset:n,includeExpired:a=!1,onToggleExpired:l,disabled:u=!1}){const[f,m]=w.useState(!1),x=e.search||e.mediaType||e.isActive!==""||a||e.sortBy!=="displayOrder"||e.sortOrder!=="asc",p=k=>{s(k.target.value)},v=k=>{t({mediaType:k===e.mediaType?"":k})},C=k=>{t({isActive:k===e.isActive?"":k})},T=(k,O)=>{t({[k]:O})},E=()=>{n(),m(!1)};return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",value:e.search,onChange:p,disabled:u,placeholder:"Search stories by title...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:opacity-50 disabled:bg-gray-100"}),e.search&&r.jsx("button",{onClick:()=>s(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600",children:r.jsx(Kr,{className:"h-4 w-4"})})]}),r.jsxs("button",{onClick:()=>m(!f),disabled:u,className:`flex items-center justify-center gap-2 px-4 py-2.5 border rounded-lg transition-colors whitespace-nowrap ${f||x?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"} disabled:opacity-50`,children:[r.jsx(Va,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Filters"}),x&&r.jsx("span",{className:"w-2 h-2 rounded-full bg-white"})]})]}),f&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Media Type"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:_he.map(k=>r.jsxs("button",{onClick:()=>v(k.value),disabled:u,className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg transition-colors ${e.mediaType===k.value?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"} disabled:opacity-50`,children:[k.value==="image"?r.jsx(Mo,{className:"h-3.5 w-3.5"}):r.jsx(Mi,{className:"h-3.5 w-3.5"}),k.label]},k.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>C("true"),disabled:u,className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${e.isActive==="true"?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"} disabled:opacity-50`,children:"Active"}),r.jsx("button",{onClick:()=>C("false"),disabled:u,className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${e.isActive==="false"?"bg-gray-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"} disabled:opacity-50`,children:"Inactive"})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"h-4 w-4 text-gray-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Include Expired Stories"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:a,onChange:l,disabled:u,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800 peer-disabled:opacity-50"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(pV,{className:"inline h-4 w-4 mr-1"}),"Sort By"]}),r.jsx("select",{value:e.sortBy,onChange:k=>T("sortBy",k.target.value),disabled:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:opacity-50",children:Phe.map(k=>r.jsx("option",{value:k.value,children:k.label},k.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order"}),r.jsxs("select",{value:e.sortOrder,onChange:k=>T("sortOrder",k.target.value),disabled:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:opacity-50",children:[r.jsx("option",{value:"asc",children:"Ascending"}),r.jsx("option",{value:"desc",children:"Descending"})]})]})]}),x&&r.jsxs("button",{onClick:E,disabled:u,className:"flex items-center gap-2 text-sm text-gray-500 hover:text-gray-700 transition-colors disabled:opacity-50",children:[r.jsx(Kr,{className:"h-4 w-4"}),"Reset all filters"]})]})]})}function s2({label:e,value:t,icon:s,color:n="gray",description:a}){const l={gray:"bg-gray-50 border-gray-200 text-gray-600",blue:"bg-blue-50 border-blue-200 text-blue-600",green:"bg-green-50 border-green-200 text-green-600",orange:"bg-orange-50 border-orange-200 text-orange-600",red:"bg-red-50 border-red-200 text-red-600",purple:"bg-purple-50 border-purple-200 text-purple-600"};return r.jsx("div",{className:`p-4 rounded-xl border ${l[n]}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${l[n]}`,children:r.jsx(s,{className:"h-5 w-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:e}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t}),a&&r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:a})]})]})})}function Xhe({isOpen:e,onClose:t,stats:s,isLoading:n=!1}){return r.jsxs(Lt,{isOpen:e,onClose:t,title:"Story Statistics",size:"xl",children:[n?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(it,{className:"h-8 w-8 text-gray-400 animate-spin mb-3"}),r.jsx("p",{className:"text-gray-500",children:"Loading statistics..."})]}):s?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl text-white",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Fa,{className:"h-6 w-6"}),r.jsx("h3",{className:"text-lg font-semibold",children:"Overview"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Stories"}),r.jsx("p",{className:"text-3xl font-bold",children:s.totalStories||0})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Views"}),r.jsx("p",{className:"text-3xl font-bold",children:s.totalViews||0})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(s2,{label:"Active Stories",value:s.activeStories||0,icon:ls,color:"green",description:"Currently visible to users"}),r.jsx(s2,{label:"Inactive Stories",value:s.inactiveStories||0,icon:wr,color:"gray",description:"Hidden from users"}),r.jsx(s2,{label:"Expired Stories",value:s.expiredStories||0,icon:jr,color:"orange",description:"Past their TTL"})]}),r.jsx("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-xl",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(xk,{className:"h-5 w-5 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:"Average Views per Story"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.averageViews?s.averageViews.toFixed(1):"0"})]})]})}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-200",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Summary"}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),s.activeStories||0," stories are currently active and visible"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),s.expiredStories||0," stories have expired based on their TTL"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-gray-500"}),s.inactiveStories||0," stories are manually deactivated"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Stories have been viewed ",s.totalViews||0," times in total"]})]})]})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(Fa,{className:"h-12 w-12 text-gray-300 mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No statistics available"})]}),r.jsx("div",{className:"pt-4 mt-6 border-t border-gray-200",children:r.jsx("button",{onClick:t,className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"Close"})})]})}function Whe(){const{hasRole:e}=mn(),t=e(["SUPER_ADMIN","ADMIN"]),s=e(["SUPER_ADMIN","ADMIN"]),n=e(["SUPER_ADMIN","ADMIN"]),{stories:a,pagination:l,filters:u,isLoading:f,error:m,stats:x,isLoadingStats:p,ttlOptions:v,createStory:C,updateStory:T,toggleStoryActive:E,deleteStory:k,updateFilters:O,updateSearch:M,resetFilters:L,toggleIncludeExpired:P,changePage:H,clearError:B,refresh:F}=Ihe(),[R,z]=w.useState("grid"),[U,Y]=w.useState(!1),[$,G]=w.useState(!1),[ee,ce]=w.useState(!1),[se,J]=w.useState(!1),[ne,pe]=w.useState(!1),[be,te]=w.useState(null),[X,re]=w.useState(!1),[ge,de]=w.useState(!1),[je,oe]=w.useState(null),[fe,qe]=w.useState({}),[Ne,Xe]=w.useState(null),st=w.useCallback(()=>{te(null),oe(null),Y(!0),console.log("[Stories] Opening create modal")},[]),Le=w.useCallback(at=>{te(at),oe(null),G(!0),console.log("[Stories] Opening edit modal for story:",at._id)},[]),we=w.useCallback(at=>{te(at),ce(!0),console.log("[Stories] Opening details modal for story:",at._id)},[]),Ue=w.useCallback(()=>{J(!0),console.log("[Stories] Opening stats modal")},[]),ue=w.useCallback(at=>{te(at),re(!1),pe(!0),console.log("[Stories] Opening delete dialog for story:",at._id)},[]),He=w.useCallback(async at=>{qe(Fe=>({...Fe,[at._id]:!0}));try{const Fe=await E(at._id);Fe.success&&(Xe(`Story ${Fe.data.isActive?"activated":"deactivated"} successfully`),setTimeout(()=>Xe(null),3e3))}finally{qe(Fe=>({...Fe,[at._id]:!1}))}},[E]),Se=w.useCallback(async at=>{de(!0),oe(null);try{console.log("[Stories] Creating story");const Fe=await C(at);Fe.success?(Y(!1),Xe("Story created successfully"),setTimeout(()=>Xe(null),3e3),console.log("[Stories] Story created successfully")):(oe(Fe.error||"Failed to create story"),console.error("[Stories] Failed to create story:",Fe.error))}catch(Fe){oe("An unexpected error occurred"),console.error("[Stories] Error creating story:",Fe)}finally{de(!1)}},[C]),tt=w.useCallback(async at=>{if(be){de(!0),oe(null);try{console.log("[Stories] Updating story:",be._id);const Fe=await T(be._id,at);Fe.success?(G(!1),te(null),Xe("Story updated successfully"),setTimeout(()=>Xe(null),3e3),console.log("[Stories] Story updated successfully")):(oe(Fe.error||"Failed to update story"),console.error("[Stories] Failed to update story:",Fe.error))}catch(Fe){oe("An unexpected error occurred"),console.error("[Stories] Error updating story:",Fe)}finally{de(!1)}}},[be,T]),lt=w.useCallback(async()=>{if(be){de(!0);try{console.log("[Stories] Deleting story:",be._id);const at=await k(be._id,X);at.success?(pe(!1),te(null),Xe("Story deleted successfully"),setTimeout(()=>Xe(null),3e3),console.log("[Stories] Story deleted successfully")):console.error("[Stories] Failed to delete story:",at.error)}catch(at){console.error("[Stories] Error deleting story:",at)}finally{de(!1)}}},[be,X,k]),pt=w.useCallback(at=>{H(at),window.scrollTo({top:0,behavior:"smooth"})},[H]),We=w.useCallback(()=>{F(),console.log("[Stories] Refreshing stories")},[F]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Stories"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload and manage stories visible to all users"})]}),r.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[r.jsxs("button",{onClick:Ue,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",title:"View statistics",children:[r.jsx(Fa,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Stats"})]}),r.jsxs("button",{onClick:We,disabled:f,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Refresh stories",children:[r.jsx(qs,{className:`h-4 w-4 ${f?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),r.jsxs("div",{className:"flex items-center bg-white border border-gray-300 rounded-lg overflow-hidden",children:[r.jsx("button",{onClick:()=>z("grid"),className:`p-2 transition-colors ${R==="grid"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"Grid view",children:r.jsx(ck,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>z("list"),className:`p-2 transition-colors ${R==="list"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"List view",children:r.jsx(aw,{className:"h-4 w-4"})})]}),t&&r.jsxs("button",{onClick:st,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:[r.jsx(kr,{className:"h-4 w-4"}),r.jsx("span",{children:"New Story"})]})]})]}),m&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(Mt,{className:"h-5 w-5 shrink-0"}),r.jsx("p",{className:"flex-1",children:m}),r.jsx("button",{onClick:B,className:"text-red-500 hover:text-red-700 font-medium",children:"Dismiss"})]}),Ne&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg",children:[r.jsx(ls,{className:"h-5 w-5 shrink-0"}),r.jsx("p",{className:"flex-1",children:Ne}),r.jsx("button",{onClick:()=>Xe(null),className:"text-green-500 hover:text-green-700 font-medium",children:"Dismiss"})]}),r.jsx(Yhe,{filters:u,onFilterChange:O,onSearchChange:M,onReset:L,includeExpired:u.includeExpired,onToggleExpired:P,disabled:f}),f&&a.length===0?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[...Array(8)].map((at,Fe)=>r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden animate-pulse",children:[r.jsx("div",{className:"h-48 bg-gray-200"}),r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})]},Fe))}):a.length===0?r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:r.jsx(Mo,{className:"h-8 w-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No stories found"}),r.jsx("p",{className:"text-gray-500 max-w-md mx-auto mb-6",children:u.search||u.mediaType||u.isActive!==""||u.includeExpired?"Try adjusting your search or filter criteria.":"Create your first story to get started."}),t&&!u.search&&r.jsxs("button",{onClick:st,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:[r.jsx(kr,{className:"h-4 w-4"}),"Create Story"]})]}):R==="grid"?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:a.map(at=>r.jsx(Vhe,{story:at,canEdit:s,canDelete:n,isToggling:fe[at._id],onView:we,onEdit:Le,onDelete:ue,onToggleActive:He},at._id))}):r.jsx("div",{className:"space-y-3",children:a.map(at=>r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[r.jsxs("div",{className:"shrink-0 w-full sm:w-24 h-32 sm:h-24 rounded-lg overflow-hidden bg-gray-100 relative",children:[at.mediaType==="video"?r.jsx("video",{src:at.mediaUrl,className:"w-full h-full object-cover",muted:!0,preload:"metadata"}):r.jsx("img",{src:at.mediaUrl,alt:at.title||"Story",className:"w-full h-full object-cover"}),r.jsx("span",{className:`absolute top-2 right-2 px-2 py-0.5 text-xs font-medium rounded-full ${at.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:at.isActive?"Active":"Inactive"})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:at.title||"Untitled Story"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-sm text-gray-500",children:[r.jsx("span",{className:"capitalize",children:at.mediaType}),r.jsxs("span",{children:["TTL: ",at.ttl?.replace("_"," ")]}),r.jsxs("span",{children:[at.viewCount||0," views"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[r.jsx("button",{onClick:()=>we(at),className:"flex-1 sm:flex-none px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:"View"}),s&&r.jsx("button",{onClick:()=>Le(at),className:"flex-1 sm:flex-none px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:"Edit"}),n&&r.jsx("button",{onClick:()=>ue(at),className:"flex-1 sm:flex-none px-3 py-1.5 text-sm text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors",children:"Delete"})]})]},at._id))}),l.totalPages>1&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsx(Dr,{currentPage:l.page,totalPages:l.totalPages,totalItems:l.total,itemsPerPage:l.limit,onPageChange:pt,itemLabel:"stories"})}),r.jsx(kO,{isOpen:U,onClose:()=>{Y(!1),oe(null)},onSubmit:Se,story:null,ttlOptions:v,isLoading:ge,serverError:je}),r.jsx(kO,{isOpen:$,onClose:()=>{G(!1),te(null),oe(null)},onSubmit:tt,story:be,ttlOptions:v,isLoading:ge,serverError:je}),r.jsx(Ghe,{isOpen:ee,onClose:()=>{ce(!1),te(null)},story:be}),r.jsx(Xhe,{isOpen:se,onClose:()=>J(!1),stats:x,isLoading:p}),r.jsx(en,{isOpen:ne,onClose:()=>{pe(!1),te(null),re(!1)},onConfirm:lt,title:"Delete Story",message:r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{children:"Are you sure you want to delete this story? This action cannot be undone."}),r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:X,onChange:at=>re(at.target.checked),className:"rounded border-gray-300"}),r.jsx("span",{children:"Also delete media from cloud storage"})]})]}),confirmText:"Delete Story",cancelText:"Cancel",variant:"danger",isLoading:ge})]})}var ht;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ht||(ht={}));var PO=new Map([[ht.QR_CODE,"QR_CODE"],[ht.AZTEC,"AZTEC"],[ht.CODABAR,"CODABAR"],[ht.CODE_39,"CODE_39"],[ht.CODE_93,"CODE_93"],[ht.CODE_128,"CODE_128"],[ht.DATA_MATRIX,"DATA_MATRIX"],[ht.MAXICODE,"MAXICODE"],[ht.ITF,"ITF"],[ht.EAN_13,"EAN_13"],[ht.EAN_8,"EAN_8"],[ht.PDF_417,"PDF_417"],[ht.RSS_14,"RSS_14"],[ht.RSS_EXPANDED,"RSS_EXPANDED"],[ht.UPC_A,"UPC_A"],[ht.UPC_E,"UPC_E"],[ht.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),IO;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(IO||(IO={}));function Khe(e){return Object.values(ht).includes(e)}var $x;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})($x||($x={}));var Zhe=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[$x.SCAN_TYPE_CAMERA,$x.SCAN_TYPE_FILE],e})(),UR=(function(){function e(t,s){this.format=t,this.formatName=s}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!PO.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,PO.get(t))},e})(),MO=(function(){function e(){}return e.createFromText=function(t){var s={text:t};return{decodedText:t,result:s}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e})(),zN;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(zN||(zN={}));var Qhe=(function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:zN.UNKWOWN_ERROR}},e})(),Jhe=(function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,s){(this.verbose||s===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e})();function fl(e){return typeof e>"u"||e===null}var Zu=(function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),zR=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,s){if(typeof t!="object"){var n=typeof t;return s.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(a),u=Object.keys(t),f=0,m=u;f<m.length;f++){var x=m[f];if(l.has(x))return s.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},e})(),ef={exports:{}},efe=ef.exports,RO;function tfe(){return RO||(RO=1,(function(e,t){(function(s,n){n(t)})(efe,(function(s){function n(W){return W==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,o){W.__proto__=o}||function(W,o){for(var d in o)o.hasOwnProperty(d)&&(W[d]=o[d])};function l(W,o){a(W,o);function d(){this.constructor=W}W.prototype=o===null?Object.create(o):(d.prototype=o.prototype,new d)}function u(W,o){var d=Object.setPrototypeOf;d?d(W,o):W.__proto__=o}function f(W,o){o===void 0&&(o=W.constructor);var d=Error.captureStackTrace;d&&d(W,o)}var m=(function(W){l(o,W);function o(d){var h=this.constructor,y=W.call(this,d)||this;return Object.defineProperty(y,"name",{value:h.name,enumerable:!1}),u(y,h.prototype),f(y),y}return o})(Error);class x extends m{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}x.kind="Exception";class p extends x{}p.kind="ArgumentException";class v extends x{}v.kind="IllegalArgumentException";class C{constructor(o){if(this.binarizer=o,o===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,d){return this.binarizer.getBlackRow(o,d)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,d,h,y){const b=this.binarizer.getLuminanceSource().crop(o,d,h,y);return new C(this.binarizer.createBinarizer(b))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new C(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new C(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends x{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class E{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class k{static arraycopy(o,d,h,y,b){for(;b--;)h[y++]=o[d++]}static currentTimeMillis(){return Date.now()}}class O extends x{}O.kind="IndexOutOfBoundsException";class M extends O{constructor(o=void 0,d=void 0){super(d),this.index=o,this.message=d}}M.kind="ArrayIndexOutOfBoundsException";class L{static fill(o,d){for(let h=0,y=o.length;h<y;h++)o[h]=d}static fillWithin(o,d,h,y){L.rangeCheck(o.length,d,h);for(let b=d;b<h;b++)o[b]=y}static rangeCheck(o,d,h){if(d>h)throw new v("fromIndex("+d+") > toIndex("+h+")");if(d<0)throw new M(d);if(h>o)throw new M(h)}static asList(...o){return o}static create(o,d,h){return Array.from({length:o}).map(b=>Array.from({length:d}).fill(h))}static createInt32Array(o,d,h){return Array.from({length:o}).map(b=>Int32Array.from({length:d}).fill(h))}static equals(o,d){if(!o||!d||!o.length||!d.length||o.length!==d.length)return!1;for(let h=0,y=o.length;h<y;h++)if(o[h]!==d[h])return!1;return!0}static hashCode(o){if(o===null)return 0;let d=1;for(const h of o)d=31*d+h;return d}static fillUint8Array(o,d){for(let h=0;h!==o.length;h++)o[h]=d}static copyOf(o,d){return o.slice(0,d)}static copyOfUint8Array(o,d){if(o.length<=d){const h=new Uint8Array(d);return h.set(o),h}return o.slice(0,d)}static copyOfRange(o,d,h){const y=h-d,b=new Int32Array(y);return k.arraycopy(o,d,b,0,y),b}static binarySearch(o,d,h){h===void 0&&(h=L.numberComparator);let y=0,b=o.length-1;for(;y<=b;){const j=b+y>>1,S=h(d,o[j]);if(S>0)y=j+1;else if(S<0)b=j-1;else return j}return-y-1}static numberComparator(o,d){return o-d}}class P{static numberOfTrailingZeros(o){let d;if(o===0)return 32;let h=31;return d=o<<16,d!==0&&(h-=16,o=d),d=o<<8,d!==0&&(h-=8,o=d),d=o<<4,d!==0&&(h-=4,o=d),d=o<<2,d!==0&&(h-=2,o=d),h-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let d=1;return o>>>16||(d+=16,o<<=16),o>>>24||(d+=8,o<<=8),o>>>28||(d+=4,o<<=4),o>>>30||(d+=2,o<<=2),d-=o>>>31,d}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,d){return Math.trunc(o/d)}static parseInt(o,d=void 0){return parseInt(o,d)}}P.MIN_VALUE_32_BITS=-2147483648,P.MAX_VALUE=Number.MAX_SAFE_INTEGER;class H{constructor(o,d){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,d==null?this.bits=H.makeArray(o):this.bits=d)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){const d=H.makeArray(o);k.arraycopy(this.bits,0,d,0,this.bits.length),this.bits=d}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){const d=this.size;if(o>=d)return d;const h=this.bits;let y=Math.floor(o/32),b=h[y];b&=~((1<<(o&31))-1);const j=h.length;for(;b===0;){if(++y===j)return d;b=h[y]}const S=y*32+P.numberOfTrailingZeros(b);return S>d?d:S}getNextUnset(o){const d=this.size;if(o>=d)return d;const h=this.bits;let y=Math.floor(o/32),b=~h[y];b&=~((1<<(o&31))-1);const j=h.length;for(;b===0;){if(++y===j)return d;b=~h[y]}const S=y*32+P.numberOfTrailingZeros(b);return S>d?d:S}setBulk(o,d){this.bits[Math.floor(o/32)]=d}setRange(o,d){if(d<o||o<0||d>this.size)throw new v;if(d===o)return;d--;const h=Math.floor(o/32),y=Math.floor(d/32),b=this.bits;for(let j=h;j<=y;j++){const S=j>h?0:o&31,I=(2<<(j<y?31:d&31))-(1<<S);b[j]|=I}}clear(){const o=this.bits.length,d=this.bits;for(let h=0;h<o;h++)d[h]=0}isRange(o,d,h){if(d<o||o<0||d>this.size)throw new v;if(d===o)return!0;d--;const y=Math.floor(o/32),b=Math.floor(d/32),j=this.bits;for(let S=y;S<=b;S++){const D=S>y?0:o&31,V=(2<<(S<b?31:d&31))-(1<<D)&4294967295;if((j[S]&V)!==(h?V:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,d){if(d<0||d>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+d);for(let h=d;h>0;h--)this.appendBit((o>>h-1&1)===1)}appendBitArray(o){const d=o.size;this.ensureCapacity(this.size+d);for(let h=0;h<d;h++)this.appendBit(o.get(h))}xor(o){if(this.size!==o.size)throw new v("Sizes don't match");const d=this.bits;for(let h=0,y=d.length;h<y;h++)d[h]^=o.bits[h]}toBytes(o,d,h,y){for(let b=0;b<y;b++){let j=0;for(let S=0;S<8;S++)this.get(o)&&(j|=1<<7-S),o++;d[h+b]=j}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),d=Math.floor((this.size-1)/32),h=d+1,y=this.bits;for(let b=0;b<h;b++){let j=y[b];j=j>>1&1431655765|(j&1431655765)<<1,j=j>>2&858993459|(j&858993459)<<2,j=j>>4&252645135|(j&252645135)<<4,j=j>>8&16711935|(j&16711935)<<8,j=j>>16&65535|(j&65535)<<16,o[d-b]=j}if(this.size!==h*32){const b=h*32-this.size;let j=o[0]>>>b;for(let S=1;S<h;S++){const D=o[S];j|=D<<32-b,o[S-1]=j,j=D>>>b}o[h-1]=j}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof H))return!1;const d=o;return this.size===d.size&&L.equals(this.bits,d.bits)}hashCode(){return 31*this.size+L.hashCode(this.bits)}toString(){let o="";for(let d=0,h=this.size;d<h;d++)(d&7)===0&&(o+=" "),o+=this.get(d)?"X":".";return o}clone(){return new H(this.size,this.bits.slice())}}var B;(function(W){W[W.OTHER=0]="OTHER",W[W.PURE_BARCODE=1]="PURE_BARCODE",W[W.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",W[W.TRY_HARDER=3]="TRY_HARDER",W[W.CHARACTER_SET=4]="CHARACTER_SET",W[W.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",W[W.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",W[W.ASSUME_GS1=7]="ASSUME_GS1",W[W.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",W[W.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",W[W.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(B||(B={}));var F=B;class R extends x{static getFormatInstance(){return new R}}R.kind="FormatException";var z;(function(W){W[W.Cp437=0]="Cp437",W[W.ISO8859_1=1]="ISO8859_1",W[W.ISO8859_2=2]="ISO8859_2",W[W.ISO8859_3=3]="ISO8859_3",W[W.ISO8859_4=4]="ISO8859_4",W[W.ISO8859_5=5]="ISO8859_5",W[W.ISO8859_6=6]="ISO8859_6",W[W.ISO8859_7=7]="ISO8859_7",W[W.ISO8859_8=8]="ISO8859_8",W[W.ISO8859_9=9]="ISO8859_9",W[W.ISO8859_10=10]="ISO8859_10",W[W.ISO8859_11=11]="ISO8859_11",W[W.ISO8859_13=12]="ISO8859_13",W[W.ISO8859_14=13]="ISO8859_14",W[W.ISO8859_15=14]="ISO8859_15",W[W.ISO8859_16=15]="ISO8859_16",W[W.SJIS=16]="SJIS",W[W.Cp1250=17]="Cp1250",W[W.Cp1251=18]="Cp1251",W[W.Cp1252=19]="Cp1252",W[W.Cp1256=20]="Cp1256",W[W.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",W[W.UTF8=22]="UTF8",W[W.ASCII=23]="ASCII",W[W.Big5=24]="Big5",W[W.GB18030=25]="GB18030",W[W.EUC_KR=26]="EUC_KR"})(z||(z={}));class U{constructor(o,d,h,...y){this.valueIdentifier=o,this.name=h,typeof d=="number"?this.values=Int32Array.from([d]):this.values=d,this.otherEncodingNames=y,U.VALUE_IDENTIFIER_TO_ECI.set(o,this),U.NAME_TO_ECI.set(h,this);const b=this.values;for(let j=0,S=b.length;j!==S;j++){const D=b[j];U.VALUES_TO_ECI.set(D,this)}for(const j of y)U.NAME_TO_ECI.set(j,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new R("incorect value");const d=U.VALUES_TO_ECI.get(o);if(d===void 0)throw new R("incorect value");return d}static getCharacterSetECIByName(o){const d=U.NAME_TO_ECI.get(o);if(d===void 0)throw new R("incorect value");return d}equals(o){if(!(o instanceof U))return!1;const d=o;return this.getName()===d.getName()}}U.VALUE_IDENTIFIER_TO_ECI=new Map,U.VALUES_TO_ECI=new Map,U.NAME_TO_ECI=new Map,U.Cp437=new U(z.Cp437,Int32Array.from([0,2]),"Cp437"),U.ISO8859_1=new U(z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),U.ISO8859_2=new U(z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),U.ISO8859_3=new U(z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),U.ISO8859_4=new U(z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),U.ISO8859_5=new U(z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),U.ISO8859_6=new U(z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),U.ISO8859_7=new U(z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),U.ISO8859_8=new U(z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),U.ISO8859_9=new U(z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),U.ISO8859_10=new U(z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),U.ISO8859_11=new U(z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),U.ISO8859_13=new U(z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),U.ISO8859_14=new U(z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),U.ISO8859_15=new U(z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),U.ISO8859_16=new U(z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),U.SJIS=new U(z.SJIS,20,"SJIS","Shift_JIS"),U.Cp1250=new U(z.Cp1250,21,"Cp1250","windows-1250"),U.Cp1251=new U(z.Cp1251,22,"Cp1251","windows-1251"),U.Cp1252=new U(z.Cp1252,23,"Cp1252","windows-1252"),U.Cp1256=new U(z.Cp1256,24,"Cp1256","windows-1256"),U.UnicodeBigUnmarked=new U(z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),U.UTF8=new U(z.UTF8,26,"UTF8","UTF-8"),U.ASCII=new U(z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),U.Big5=new U(z.Big5,28,"Big5"),U.GB18030=new U(z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),U.EUC_KR=new U(z.EUC_KR,30,"EUC_KR","EUC-KR");class Y extends x{}Y.kind="UnsupportedOperationException";class ${static decode(o,d){const h=this.encodingName(d);return this.customDecoder?this.customDecoder(o,h):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(h)?this.decodeFallback(o,h):new TextDecoder(h).decode(o)}static shouldDecodeOnFallback(o){return!$.isBrowser()&&o==="ISO-8859-1"}static encode(o,d){const h=this.encodingName(d);return this.customEncoder?this.customEncoder(o,h):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof U?o:U.getCharacterSetECIByName(o)}static decodeFallback(o,d){const h=this.encodingCharacterSet(d);if($.isDecodeFallbackSupported(h)){let y="";for(let b=0,j=o.length;b<j;b++){let S=o[b].toString(16);S.length<2&&(S="0"+S),y+="%"+S}return decodeURIComponent(y)}if(h.equals(U.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new Y(`Encoding ${this.encodingName(d)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(U.UTF8)||o.equals(U.ISO8859_1)||o.equals(U.ASCII)}static encodeFallback(o){const h=btoa(unescape(encodeURIComponent(o))).split(""),y=[];for(let b=0;b<h.length;b++)y.push(h[b].charCodeAt(0));return new Uint8Array(y)}}class G{static castAsNonUtf8Char(o,d=null){const h=d?d.getName():this.ISO88591;return $.decode(new Uint8Array([o]),h)}static guessEncoding(o,d){if(d!=null&&d.get(F.CHARACTER_SET)!==void 0)return d.get(F.CHARACTER_SET).toString();const h=o.length;let y=!0,b=!0,j=!0,S=0,D=0,I=0,V=0,K=0,Z=0,ie=0,me=0,xe=0,Ae=0,Pe=0;const rt=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let et=0;et<h&&(y||b||j);et++){const Ze=o[et]&255;j&&(S>0?(Ze&128)===0?j=!1:S--:(Ze&128)!==0&&((Ze&64)===0?j=!1:(S++,(Ze&32)===0?D++:(S++,(Ze&16)===0?I++:(S++,(Ze&8)===0?V++:j=!1))))),y&&(Ze>127&&Ze<160?y=!1:Ze>159&&(Ze<192||Ze===215||Ze===247)&&Pe++),b&&(K>0?Ze<64||Ze===127||Ze>252?b=!1:K--:Ze===128||Ze===160||Ze>239?b=!1:Ze>160&&Ze<224?(Z++,me=0,ie++,ie>xe&&(xe=ie)):Ze>127?(K++,ie=0,me++,me>Ae&&(Ae=me)):(ie=0,me=0))}return j&&S>0&&(j=!1),b&&K>0&&(b=!1),j&&(rt||D+I+V>0)?G.UTF8:b&&(G.ASSUME_SHIFT_JIS||xe>=3||Ae>=3)?G.SHIFT_JIS:y&&b?xe===2&&Z===2||Pe*10>=h?G.SHIFT_JIS:G.ISO88591:y?G.ISO88591:b?G.SHIFT_JIS:j?G.UTF8:G.PLATFORM_DEFAULT_ENCODING}static format(o,...d){let h=-1;function y(j,S,D,I,V,K){if(j==="%%")return"%";if(d[++h]===void 0)return;j=I?parseInt(I.substr(1)):void 0;let Z=V?parseInt(V.substr(1)):void 0,ie;switch(K){case"s":ie=d[h];break;case"c":ie=d[h][0];break;case"f":ie=parseFloat(d[h]).toFixed(j);break;case"p":ie=parseFloat(d[h]).toPrecision(j);break;case"e":ie=parseFloat(d[h]).toExponential(j);break;case"x":ie=parseInt(d[h]).toString(Z||16);break;case"d":ie=parseFloat(parseInt(d[h],Z||10).toPrecision(j)).toFixed(0);break}ie=typeof ie=="object"?JSON.stringify(ie):(+ie).toString(Z);let me=parseInt(D),xe=D&&D[0]+""=="0"?"0":" ";for(;ie.length<me;)ie=S!==void 0?ie+xe:xe+ie;return ie}let b=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(b,y)}static getBytes(o,d){return $.encode(o,d)}static getCharCode(o,d=0){return o.charCodeAt(d)}static getCharAt(o){return String.fromCharCode(o)}}G.SHIFT_JIS=U.SJIS.getName(),G.GB2312="GB2312",G.ISO88591=U.ISO8859_1.getName(),G.EUC_JP="EUC_JP",G.UTF8=U.UTF8.getName(),G.PLATFORM_DEFAULT_ENCODING=G.UTF8,G.ASSUME_SHIFT_JIS=!1;class ee{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=G.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,d,h){for(let y=d;d<d+h;y++)this.append(o[y]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,d){this.value=this.value.substr(0,o)+d+this.value.substr(o+1)}substring(o,d){return this.value.substring(o,d)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,d){this.value=this.value.substr(0,o)+d+this.value.substr(o+d.length)}}class ce{constructor(o,d,h,y){if(this.width=o,this.height=d,this.rowSize=h,this.bits=y,d==null&&(d=o),this.height=d,o<1||d<1)throw new v("Both dimensions must be greater than 0");h==null&&(h=Math.floor((o+31)/32)),this.rowSize=h,y==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const d=o.length,h=o[0].length,y=new ce(h,d);for(let b=0;b<d;b++){const j=o[b];for(let S=0;S<h;S++)j[S]&&y.set(S,b)}return y}static parseFromString(o,d,h){if(o===null)throw new v("stringRepresentation cannot be null");const y=new Array(o.length);let b=0,j=0,S=-1,D=0,I=0;for(;I<o.length;)if(o.charAt(I)===`
`||o.charAt(I)==="\r"){if(b>j){if(S===-1)S=b-j;else if(b-j!==S)throw new v("row lengths do not match");j=b,D++}I++}else if(o.substring(I,I+d.length)===d)I+=d.length,y[b]=!0,b++;else if(o.substring(I,I+h.length)===h)I+=h.length,y[b]=!1,b++;else throw new v("illegal character encountered: "+o.substring(I));if(b>j){if(S===-1)S=b-j;else if(b-j!==S)throw new v("row lengths do not match");D++}const V=new ce(S,D);for(let K=0;K<b;K++)y[K]&&V.set(Math.floor(K%S),Math.floor(K/S));return V}get(o,d){const h=d*this.rowSize+Math.floor(o/32);return(this.bits[h]>>>(o&31)&1)!==0}set(o,d){const h=d*this.rowSize+Math.floor(o/32);this.bits[h]|=1<<(o&31)&4294967295}unset(o,d){const h=d*this.rowSize+Math.floor(o/32);this.bits[h]&=~(1<<(o&31)&4294967295)}flip(o,d){const h=d*this.rowSize+Math.floor(o/32);this.bits[h]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new v("input matrix dimensions do not match");const d=new H(Math.floor(this.width/32)+1),h=this.rowSize,y=this.bits;for(let b=0,j=this.height;b<j;b++){const S=b*h,D=o.getRow(b,d).getBitArray();for(let I=0;I<h;I++)y[S+I]^=D[I]}}clear(){const o=this.bits,d=o.length;for(let h=0;h<d;h++)o[h]=0}setRegion(o,d,h,y){if(d<0||o<0)throw new v("Left and top must be nonnegative");if(y<1||h<1)throw new v("Height and width must be at least 1");const b=o+h,j=d+y;if(j>this.height||b>this.width)throw new v("The region must fit inside the matrix");const S=this.rowSize,D=this.bits;for(let I=d;I<j;I++){const V=I*S;for(let K=o;K<b;K++)D[V+Math.floor(K/32)]|=1<<(K&31)&4294967295}}getRow(o,d){d==null||d.getSize()<this.width?d=new H(this.width):d.clear();const h=this.rowSize,y=this.bits,b=o*h;for(let j=0;j<h;j++)d.setBulk(j*32,y[b+j]);return d}setRow(o,d){k.arraycopy(d.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),d=this.getHeight();let h=new H(o),y=new H(o);for(let b=0,j=Math.floor((d+1)/2);b<j;b++)h=this.getRow(b,h),y=this.getRow(d-1-b,y),h.reverse(),y.reverse(),this.setRow(b,y),this.setRow(d-1-b,h)}getEnclosingRectangle(){const o=this.width,d=this.height,h=this.rowSize,y=this.bits;let b=o,j=d,S=-1,D=-1;for(let I=0;I<d;I++)for(let V=0;V<h;V++){const K=y[I*h+V];if(K!==0){if(I<j&&(j=I),I>D&&(D=I),V*32<b){let Z=0;for(;(K<<31-Z&4294967295)===0;)Z++;V*32+Z<b&&(b=V*32+Z)}if(V*32+31>S){let Z=31;for(;!(K>>>Z);)Z--;V*32+Z>S&&(S=V*32+Z)}}}return S<b||D<j?null:Int32Array.from([b,j,S-b+1,D-j+1])}getTopLeftOnBit(){const o=this.rowSize,d=this.bits;let h=0;for(;h<d.length&&d[h]===0;)h++;if(h===d.length)return null;const y=h/o;let b=h%o*32;const j=d[h];let S=0;for(;(j<<31-S&4294967295)===0;)S++;return b+=S,Int32Array.from([b,y])}getBottomRightOnBit(){const o=this.rowSize,d=this.bits;let h=d.length-1;for(;h>=0&&d[h]===0;)h--;if(h<0)return null;const y=Math.floor(h/o);let b=Math.floor(h%o)*32;const j=d[h];let S=31;for(;!(j>>>S);)S--;return b+=S,Int32Array.from([b,y])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof ce))return!1;const d=o;return this.width===d.width&&this.height===d.height&&this.rowSize===d.rowSize&&L.equals(this.bits,d.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+L.hashCode(this.bits),o}toString(o="X ",d="  ",h=`
`){return this.buildToString(o,d,h)}buildToString(o,d,h){let y=new ee;for(let b=0,j=this.height;b<j;b++){for(let S=0,D=this.width;S<D;S++)y.append(this.get(S,b)?o:d);y.append(h)}return y.toString()}clone(){return new ce(this.width,this.height,this.rowSize,this.bits.slice())}}class se extends x{static getNotFoundInstance(){return new se}}se.kind="NotFoundException";class J extends E{constructor(o){super(o),this.luminances=J.EMPTY,this.buckets=new Int32Array(J.LUMINANCE_BUCKETS)}getBlackRow(o,d){const h=this.getLuminanceSource(),y=h.getWidth();d==null||d.getSize()<y?d=new H(y):d.clear(),this.initArrays(y);const b=h.getRow(o,this.luminances),j=this.buckets;for(let D=0;D<y;D++)j[(b[D]&255)>>J.LUMINANCE_SHIFT]++;const S=J.estimateBlackPoint(j);if(y<3)for(let D=0;D<y;D++)(b[D]&255)<S&&d.set(D);else{let D=b[0]&255,I=b[1]&255;for(let V=1;V<y-1;V++){const K=b[V+1]&255;(I*4-D-K)/2<S&&d.set(V),D=I,I=K}}return d}getBlackMatrix(){const o=this.getLuminanceSource(),d=o.getWidth(),h=o.getHeight(),y=new ce(d,h);this.initArrays(d);const b=this.buckets;for(let D=1;D<5;D++){const I=Math.floor(h*D/5),V=o.getRow(I,this.luminances),K=Math.floor(d*4/5);for(let Z=Math.floor(d/5);Z<K;Z++){const ie=V[Z]&255;b[ie>>J.LUMINANCE_SHIFT]++}}const j=J.estimateBlackPoint(b),S=o.getMatrix();for(let D=0;D<h;D++){const I=D*d;for(let V=0;V<d;V++)(S[I+V]&255)<j&&y.set(V,D)}return y}createBinarizer(o){return new J(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const d=this.buckets;for(let h=0;h<J.LUMINANCE_BUCKETS;h++)d[h]=0}static estimateBlackPoint(o){const d=o.length;let h=0,y=0,b=0;for(let V=0;V<d;V++)o[V]>b&&(y=V,b=o[V]),o[V]>h&&(h=o[V]);let j=0,S=0;for(let V=0;V<d;V++){const K=V-y,Z=o[V]*K*K;Z>S&&(j=V,S=Z)}if(y>j){const V=y;y=j,j=V}if(j-y<=d/16)throw new se;let D=j-1,I=-1;for(let V=j-1;V>y;V--){const K=V-y,Z=K*K*(j-V)*(h-o[V]);Z>I&&(D=V,I=Z)}return D<<J.LUMINANCE_SHIFT}}J.LUMINANCE_BITS=5,J.LUMINANCE_SHIFT=8-J.LUMINANCE_BITS,J.LUMINANCE_BUCKETS=1<<J.LUMINANCE_BITS,J.EMPTY=Uint8ClampedArray.from([0]);class ne extends J{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const o=this.getLuminanceSource(),d=o.getWidth(),h=o.getHeight();if(d>=ne.MINIMUM_DIMENSION&&h>=ne.MINIMUM_DIMENSION){const y=o.getMatrix();let b=d>>ne.BLOCK_SIZE_POWER;(d&ne.BLOCK_SIZE_MASK)!==0&&b++;let j=h>>ne.BLOCK_SIZE_POWER;(h&ne.BLOCK_SIZE_MASK)!==0&&j++;const S=ne.calculateBlackPoints(y,b,j,d,h),D=new ce(d,h);ne.calculateThresholdForBlock(y,b,j,d,h,S,D),this.matrix=D}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new ne(o)}static calculateThresholdForBlock(o,d,h,y,b,j,S){const D=b-ne.BLOCK_SIZE,I=y-ne.BLOCK_SIZE;for(let V=0;V<h;V++){let K=V<<ne.BLOCK_SIZE_POWER;K>D&&(K=D);const Z=ne.cap(V,2,h-3);for(let ie=0;ie<d;ie++){let me=ie<<ne.BLOCK_SIZE_POWER;me>I&&(me=I);const xe=ne.cap(ie,2,d-3);let Ae=0;for(let rt=-2;rt<=2;rt++){const et=j[Z+rt];Ae+=et[xe-2]+et[xe-1]+et[xe]+et[xe+1]+et[xe+2]}const Pe=Ae/25;ne.thresholdBlock(o,me,K,Pe,y,S)}}}static cap(o,d,h){return o<d?d:o>h?h:o}static thresholdBlock(o,d,h,y,b,j){for(let S=0,D=h*b+d;S<ne.BLOCK_SIZE;S++,D+=b)for(let I=0;I<ne.BLOCK_SIZE;I++)(o[D+I]&255)<=y&&j.set(d+I,h+S)}static calculateBlackPoints(o,d,h,y,b){const j=b-ne.BLOCK_SIZE,S=y-ne.BLOCK_SIZE,D=new Array(h);for(let I=0;I<h;I++){D[I]=new Int32Array(d);let V=I<<ne.BLOCK_SIZE_POWER;V>j&&(V=j);for(let K=0;K<d;K++){let Z=K<<ne.BLOCK_SIZE_POWER;Z>S&&(Z=S);let ie=0,me=255,xe=0;for(let Pe=0,rt=V*y+Z;Pe<ne.BLOCK_SIZE;Pe++,rt+=y){for(let et=0;et<ne.BLOCK_SIZE;et++){const Ze=o[rt+et]&255;ie+=Ze,Ze<me&&(me=Ze),Ze>xe&&(xe=Ze)}if(xe-me>ne.MIN_DYNAMIC_RANGE)for(Pe++,rt+=y;Pe<ne.BLOCK_SIZE;Pe++,rt+=y)for(let et=0;et<ne.BLOCK_SIZE;et++)ie+=o[rt+et]&255}let Ae=ie>>ne.BLOCK_SIZE_POWER*2;if(xe-me<=ne.MIN_DYNAMIC_RANGE&&(Ae=me/2,I>0&&K>0)){const Pe=(D[I-1][K]+2*D[I][K-1]+D[I-1][K-1])/4;me<Pe&&(Ae=Pe)}D[I][K]=Ae}}return D}}ne.BLOCK_SIZE_POWER=3,ne.BLOCK_SIZE=1<<ne.BLOCK_SIZE_POWER,ne.BLOCK_SIZE_MASK=ne.BLOCK_SIZE-1,ne.MINIMUM_DIMENSION=ne.BLOCK_SIZE*5,ne.MIN_DYNAMIC_RANGE=24;class pe{constructor(o,d){this.width=o,this.height=d}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,d,h,y){throw new Y("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Y("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Y("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let d=new ee;for(let h=0;h<this.height;h++){const y=this.getRow(h,o);for(let b=0;b<this.width;b++){const j=y[b]&255;let S;j<64?S="#":j<128?S="+":j<192?S=".":S=" ",d.append(S)}d.append(`
`)}return d.toString()}}class be extends pe{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,d){const h=this.delegate.getRow(o,d),y=this.getWidth();for(let b=0;b<y;b++)h[b]=255-(h[b]&255);return h}getMatrix(){const o=this.delegate.getMatrix(),d=this.getWidth()*this.getHeight(),h=new Uint8ClampedArray(d);for(let y=0;y<d;y++)h[y]=255-(o[y]&255);return h}isCropSupported(){return this.delegate.isCropSupported()}crop(o,d,h,y){return new be(this.delegate.crop(o,d,h,y))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new be(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new be(this.delegate.rotateCounterClockwise45())}}class te extends pe{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=te.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const d=o.getContext("2d").getImageData(0,0,o.width,o.height);return te.toGrayscaleBuffer(d.data,o.width,o.height)}static toGrayscaleBuffer(o,d,h){const y=new Uint8ClampedArray(d*h);for(let b=0,j=0,S=o.length;b<S;b+=4,j++){let D;if(o[b+3]===0)D=255;else{const V=o[b],K=o[b+1],Z=o[b+2];D=306*V+601*K+117*Z+512>>10}y[j]=D}return y}getRow(o,d){if(o<0||o>=this.getHeight())throw new v("Requested row is outside the image: "+o);const h=this.getWidth(),y=o*h;return d===null?d=this.buffer.slice(y,y+h):(d.length<h&&(d=new Uint8ClampedArray(h)),d.set(this.buffer.slice(y,y+h))),d}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,d,h,y){return super.crop(o,d,h,y),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const d=this.getTempCanvasElement(),h=d.getContext("2d"),y=o*te.DEGREE_TO_RADIANS,b=this.canvas.width,j=this.canvas.height,S=Math.ceil(Math.abs(Math.cos(y))*b+Math.abs(Math.sin(y))*j),D=Math.ceil(Math.abs(Math.sin(y))*b+Math.abs(Math.cos(y))*j);return d.width=S,d.height=D,h.translate(S/2,D/2),h.rotate(y),h.drawImage(this.canvas,b/-2,j/-2),this.buffer=te.makeBufferFromCanvasImageData(d),this}invert(){return new be(this)}}te.DEGREE_TO_RADIANS=Math.PI/180;class X{constructor(o,d,h){this.deviceId=o,this.label=d,this.kind="videoinput",this.groupId=h||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var re=(globalThis||Om||self||window||void 0)&&(globalThis||Om||self||window||void 0).__awaiter||function(W,o,d,h){function y(b){return b instanceof d?b:new d(function(j){j(b)})}return new(d||(d=Promise))(function(b,j){function S(V){try{I(h.next(V))}catch(K){j(K)}}function D(V){try{I(h.throw(V))}catch(K){j(K)}}function I(V){V.done?b(V.value):y(V.value).then(S,D)}I((h=h.apply(W,o||[])).next())})};class ge{constructor(o,d=500,h){this.reader=o,this.timeBetweenScansMillis=d,this._hints=h,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return re(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),d=[];for(const h of o){const y=h.kind==="video"?"videoinput":h.kind;if(y!=="videoinput")continue;const b=h.deviceId||h.id,j=h.label||`Video device ${d.length+1}`,S=h.groupId,D={deviceId:b,label:j,kind:y,groupId:S};d.push(D)}return d})}getVideoInputDevices(){return re(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(d=>new X(d.deviceId,d.label))})}findDeviceById(o){return re(this,void 0,void 0,function*(){const d=yield this.listVideoInputDevices();return d?d.find(h=>h.deviceId===o):null})}decodeFromInputVideoDevice(o,d){return re(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,d)})}decodeOnceFromVideoDevice(o,d){return re(this,void 0,void 0,function*(){this.reset();let h;o?h={deviceId:{exact:o}}:h={facingMode:"environment"};const y={video:h};return yield this.decodeOnceFromConstraints(y,d)})}decodeOnceFromConstraints(o,d){return re(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(h,d)})}decodeOnceFromStream(o,d){return re(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(o,d);return yield this.decodeOnce(h)})}decodeFromInputVideoDeviceContinuously(o,d,h){return re(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,d,h)})}decodeFromVideoDevice(o,d,h){return re(this,void 0,void 0,function*(){let y;o?y={deviceId:{exact:o}}:y={facingMode:"environment"};const b={video:y};return yield this.decodeFromConstraints(b,d,h)})}decodeFromConstraints(o,d,h){return re(this,void 0,void 0,function*(){const y=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(y,d,h)})}decodeFromStream(o,d,h){return re(this,void 0,void 0,function*(){this.reset();const y=yield this.attachStreamToVideo(o,d);return yield this.decodeContinuously(y,h)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,d){return re(this,void 0,void 0,function*(){const h=this.prepareVideoElement(d);return this.addVideoSource(h,o),this.videoElement=h,this.stream=o,yield this.playVideoOnLoadAsync(h),h})}playVideoOnLoadAsync(o){return new Promise((d,h)=>this.playVideoOnLoad(o,()=>d()))}playVideoOnLoad(o,d){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",d),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return re(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,d){const h=document.getElementById(o);if(!h)throw new p(`element with id '${o}' not found`);if(h.nodeName.toLowerCase()!==d.toLowerCase())throw new p(`element with id '${o}' must be an ${d} element`);return h}decodeFromImage(o,d){if(!o&&!d)throw new p("either imageElement with a src set or an url must be provided");return d&&!o?this.decodeFromImageUrl(d):this.decodeFromImageElement(o)}decodeFromVideo(o,d){if(!o&&!d)throw new p("Either an element with a src set or an URL must be provided");return d&&!o?this.decodeFromVideoUrl(d):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,d,h){if(o===void 0&&d===void 0)throw new p("Either an element with a src set or an URL must be provided");return d&&!o?this.decodeFromVideoUrlContinuously(d,h):this.decodeFromVideoElementContinuously(o,h)}decodeFromImageElement(o){if(!o)throw new p("An image element must be provided.");this.reset();const d=this.prepareImageElement(o);this.imageElement=d;let h;return this.isImageLoaded(d)?h=this.decodeOnce(d,!1,!0):h=this._decodeOnLoadImage(d),h}decodeFromVideoElement(o){const d=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(d)}decodeFromVideoElementContinuously(o,d){const h=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(h,d)}_decodeFromVideoElementSetup(o){if(!o)throw new p("A video element must be provided.");this.reset();const d=this.prepareVideoElement(o);return this.videoElement=d,d}decodeFromImageUrl(o){if(!o)throw new p("An URL must be provided.");this.reset();const d=this.prepareImageElement();this.imageElement=d;const h=this._decodeOnLoadImage(d);return d.src=o,h}decodeFromVideoUrl(o){if(!o)throw new p("An URL must be provided.");this.reset();const d=this.prepareVideoElement(),h=this.decodeFromVideoElement(d);return d.src=o,h}decodeFromVideoUrlContinuously(o,d){if(!o)throw new p("An URL must be provided.");this.reset();const h=this.prepareVideoElement(),y=this.decodeFromVideoElementContinuously(h,d);return h.src=o,y}_decodeOnLoadImage(o){return new Promise((d,h)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(d,h),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return re(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,d){return re(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,d)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let d;return typeof o>"u"&&(d=document.createElement("img"),d.width=200,d.height=200),typeof o=="string"&&(d=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(d=o),d}prepareVideoElement(o){let d;return!o&&typeof document<"u"&&(d=document.createElement("video"),d.width=200,d.height=200),typeof o=="string"&&(d=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(d=o),d.setAttribute("autoplay","true"),d.setAttribute("muted","true"),d.setAttribute("playsinline","true"),d}decodeOnce(o,d=!0,h=!0){this._stopAsyncDecode=!1;const y=(b,j)=>{if(this._stopAsyncDecode){j(new se("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const S=this.decode(o);b(S)}catch(S){const D=d&&S instanceof se,V=(S instanceof T||S instanceof R)&&h;if(D||V)return setTimeout(y,this._timeBetweenDecodingAttempts,b,j);j(S)}};return new Promise((b,j)=>y(b,j))}decodeContinuously(o,d){this._stopContinuousDecode=!1;const h=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const y=this.decode(o);d(y,null),setTimeout(h,this.timeBetweenScansMillis)}catch(y){d(null,y);const b=y instanceof T||y instanceof R,j=y instanceof se;(b||j)&&setTimeout(h,this._timeBetweenDecodingAttempts)}};h()}decode(o){const d=this.createBinaryBitmap(o);return this.decodeBitmap(d)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,d,h){d||(d={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),h||(h=this.captureCanvasContext),h.drawImage(o,d.sx,d.sy,d.sWidth,d.sHeight,d.dx,d.dy,d.dWidth,d.dHeight)}drawImageOnCanvas(o,d,h=this.captureCanvasContext){d||(d={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),h||(h=this.captureCanvasContext),h.drawImage(o,d.sx,d.sy,d.sWidth,d.sHeight,d.dx,d.dy,d.dWidth,d.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const d=this.getCaptureCanvas(o),h=new te(d),y=new ne(h);return new C(y)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const h=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=h}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const d=this.createCaptureCanvas(o);this.captureCanvas=d}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const d=document.createElement("canvas");let h,y;return typeof o<"u"&&(o instanceof HTMLVideoElement?(h=o.videoWidth,y=o.videoHeight):o instanceof HTMLImageElement&&(h=o.naturalWidth||o.width,y=o.naturalHeight||o.height)),d.style.width=h+"px",d.style.height=y+"px",d.width=h,d.height=y,d}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,d){try{o.srcObject=d}catch{o.src=URL.createObjectURL(d)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class de{constructor(o,d,h=d==null?0:8*d.length,y,b,j=k.currentTimeMillis()){this.text=o,this.rawBytes=d,this.numBits=h,this.resultPoints=y,this.format=b,this.timestamp=j,this.text=o,this.rawBytes=d,h==null?this.numBits=d==null?0:8*d.length:this.numBits=h,this.resultPoints=y,this.format=b,this.resultMetadata=null,j==null?this.timestamp=k.currentTimeMillis():this.timestamp=j}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,d){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,d)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){const d=this.resultPoints;if(d===null)this.resultPoints=o;else if(o!==null&&o.length>0){const h=new Array(d.length+o.length);k.arraycopy(d,0,h,0,d.length),k.arraycopy(o,0,h,d.length,o.length),this.resultPoints=h}}getTimestamp(){return this.timestamp}toString(){return this.text}}var je;(function(W){W[W.AZTEC=0]="AZTEC",W[W.CODABAR=1]="CODABAR",W[W.CODE_39=2]="CODE_39",W[W.CODE_93=3]="CODE_93",W[W.CODE_128=4]="CODE_128",W[W.DATA_MATRIX=5]="DATA_MATRIX",W[W.EAN_8=6]="EAN_8",W[W.EAN_13=7]="EAN_13",W[W.ITF=8]="ITF",W[W.MAXICODE=9]="MAXICODE",W[W.PDF_417=10]="PDF_417",W[W.QR_CODE=11]="QR_CODE",W[W.RSS_14=12]="RSS_14",W[W.RSS_EXPANDED=13]="RSS_EXPANDED",W[W.UPC_A=14]="UPC_A",W[W.UPC_E=15]="UPC_E",W[W.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(je||(je={}));var oe=je,fe;(function(W){W[W.OTHER=0]="OTHER",W[W.ORIENTATION=1]="ORIENTATION",W[W.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",W[W.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",W[W.ISSUE_NUMBER=4]="ISSUE_NUMBER",W[W.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",W[W.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",W[W.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",W[W.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",W[W.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",W[W.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(fe||(fe={}));var qe=fe;class Ne{constructor(o,d,h,y,b=-1,j=-1){this.rawBytes=o,this.text=d,this.byteSegments=h,this.ecLevel=y,this.structuredAppendSequenceNumber=b,this.structuredAppendParity=j,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Xe{exp(o){return this.expTable[o]}log(o){if(o===0)throw new v;return this.logTable[o]}static addOrSubtract(o,d){return o^d}}class st{constructor(o,d){if(d.length===0)throw new v;this.field=o;const h=d.length;if(h>1&&d[0]===0){let y=1;for(;y<h&&d[y]===0;)y++;y===h?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(h-y),k.arraycopy(d,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=d}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);const d=this.coefficients;let h;if(o===1){h=0;for(let j=0,S=d.length;j!==S;j++){const D=d[j];h=Xe.addOrSubtract(h,D)}return h}h=d[0];const y=d.length,b=this.field;for(let j=1;j<y;j++)h=Xe.addOrSubtract(b.multiply(o,h),d[j]);return h}addOrSubtract(o){if(!this.field.equals(o.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let d=this.coefficients,h=o.coefficients;if(d.length>h.length){const j=d;d=h,h=j}let y=new Int32Array(h.length);const b=h.length-d.length;k.arraycopy(h,0,y,0,b);for(let j=b;j<h.length;j++)y[j]=Xe.addOrSubtract(d[j-b],h[j]);return new st(this.field,y)}multiply(o){if(!this.field.equals(o.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const d=this.coefficients,h=d.length,y=o.coefficients,b=y.length,j=new Int32Array(h+b-1),S=this.field;for(let D=0;D<h;D++){const I=d[D];for(let V=0;V<b;V++)j[D+V]=Xe.addOrSubtract(j[D+V],S.multiply(I,y[V]))}return new st(S,j)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;const d=this.coefficients.length,h=this.field,y=new Int32Array(d),b=this.coefficients;for(let j=0;j<d;j++)y[j]=h.multiply(b[j],o);return new st(h,y)}multiplyByMonomial(o,d){if(o<0)throw new v;if(d===0)return this.field.getZero();const h=this.coefficients,y=h.length,b=new Int32Array(y+o),j=this.field;for(let S=0;S<y;S++)b[S]=j.multiply(h[S],d);return new st(j,b)}divide(o){if(!this.field.equals(o.field))throw new v("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new v("Divide by 0");const d=this.field;let h=d.getZero(),y=this;const b=o.getCoefficient(o.getDegree()),j=d.inverse(b);for(;y.getDegree()>=o.getDegree()&&!y.isZero();){const S=y.getDegree()-o.getDegree(),D=d.multiply(y.getCoefficient(y.getDegree()),j),I=o.multiplyByMonomial(S,D),V=d.buildMonomial(S,D);h=h.addOrSubtract(V),y=y.addOrSubtract(I)}return[h,y]}toString(){let o="";for(let d=this.getDegree();d>=0;d--){let h=this.getCoefficient(d);if(h!==0){if(h<0?(o+=" - ",h=-h):o.length>0&&(o+=" + "),d===0||h!==1){const y=this.field.log(h);y===0?o+="1":y===1?o+="a":(o+="a^",o+=y)}d!==0&&(d===1?o+="x":(o+="x^",o+=d))}}return o}}class Le extends x{}Le.kind="ArithmeticException";class we extends Xe{constructor(o,d,h){super(),this.primitive=o,this.size=d,this.generatorBase=h;const y=new Int32Array(d);let b=1;for(let S=0;S<d;S++)y[S]=b,b*=2,b>=d&&(b^=o,b&=d-1);this.expTable=y;const j=new Int32Array(d);for(let S=0;S<d-1;S++)j[y[S]]=S;this.logTable=j,this.zero=new st(this,Int32Array.from([0])),this.one=new st(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,d){if(o<0)throw new v;if(d===0)return this.zero;const h=new Int32Array(o+1);return h[0]=d,new st(this,h)}inverse(o){if(o===0)throw new Le;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,d){return o===0||d===0?0:this.expTable[(this.logTable[o]+this.logTable[d])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+P.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}we.AZTEC_DATA_12=new we(4201,4096,1),we.AZTEC_DATA_10=new we(1033,1024,1),we.AZTEC_DATA_6=new we(67,64,1),we.AZTEC_PARAM=new we(19,16,1),we.QR_CODE_FIELD_256=new we(285,256,0),we.DATA_MATRIX_FIELD_256=new we(301,256,1),we.AZTEC_DATA_8=we.DATA_MATRIX_FIELD_256,we.MAXICODE_FIELD_64=we.AZTEC_DATA_6;class Ue extends x{}Ue.kind="ReedSolomonException";class ue extends x{}ue.kind="IllegalStateException";class He{constructor(o){this.field=o}decode(o,d){const h=this.field,y=new st(h,o),b=new Int32Array(d);let j=!0;for(let ie=0;ie<d;ie++){const me=y.evaluateAt(h.exp(ie+h.getGeneratorBase()));b[b.length-1-ie]=me,me!==0&&(j=!1)}if(j)return;const S=new st(h,b),D=this.runEuclideanAlgorithm(h.buildMonomial(d,1),S,d),I=D[0],V=D[1],K=this.findErrorLocations(I),Z=this.findErrorMagnitudes(V,K);for(let ie=0;ie<K.length;ie++){const me=o.length-1-h.log(K[ie]);if(me<0)throw new Ue("Bad error location");o[me]=we.addOrSubtract(o[me],Z[ie])}}runEuclideanAlgorithm(o,d,h){if(o.getDegree()<d.getDegree()){const ie=o;o=d,d=ie}const y=this.field;let b=o,j=d,S=y.getZero(),D=y.getOne();for(;j.getDegree()>=(h/2|0);){let ie=b,me=S;if(b=j,S=D,b.isZero())throw new Ue("r_{i-1} was zero");j=ie;let xe=y.getZero();const Ae=b.getCoefficient(b.getDegree()),Pe=y.inverse(Ae);for(;j.getDegree()>=b.getDegree()&&!j.isZero();){const rt=j.getDegree()-b.getDegree(),et=y.multiply(j.getCoefficient(j.getDegree()),Pe);xe=xe.addOrSubtract(y.buildMonomial(rt,et)),j=j.addOrSubtract(b.multiplyByMonomial(rt,et))}if(D=xe.multiply(S).addOrSubtract(me),j.getDegree()>=b.getDegree())throw new ue("Division algorithm failed to reduce polynomial?")}const I=D.getCoefficient(0);if(I===0)throw new Ue("sigmaTilde(0) was zero");const V=y.inverse(I),K=D.multiplyScalar(V),Z=j.multiplyScalar(V);return[K,Z]}findErrorLocations(o){const d=o.getDegree();if(d===1)return Int32Array.from([o.getCoefficient(1)]);const h=new Int32Array(d);let y=0;const b=this.field;for(let j=1;j<b.getSize()&&y<d;j++)o.evaluateAt(j)===0&&(h[y]=b.inverse(j),y++);if(y!==d)throw new Ue("Error locator degree does not match number of roots");return h}findErrorMagnitudes(o,d){const h=d.length,y=new Int32Array(h),b=this.field;for(let j=0;j<h;j++){const S=b.inverse(d[j]);let D=1;for(let I=0;I<h;I++)if(j!==I){const V=b.multiply(d[I],S),K=(V&1)===0?V|1:V&-2;D=b.multiply(D,K)}y[j]=b.multiply(o.evaluateAt(S),b.inverse(D)),b.getGeneratorBase()!==0&&(y[j]=b.multiply(y[j],S))}return y}}var Se;(function(W){W[W.UPPER=0]="UPPER",W[W.LOWER=1]="LOWER",W[W.MIXED=2]="MIXED",W[W.DIGIT=3]="DIGIT",W[W.PUNCT=4]="PUNCT",W[W.BINARY=5]="BINARY"})(Se||(Se={}));class tt{decode(o){this.ddata=o;let d=o.getBits(),h=this.extractBits(d),y=this.correctBits(h),b=tt.convertBoolArrayToByteArray(y),j=tt.getEncodedData(y),S=new Ne(b,j,null,null);return S.setNumBits(y.length),S}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let d=o.length,h=Se.UPPER,y=Se.UPPER,b="",j=0;for(;j<d;)if(y===Se.BINARY){if(d-j<5)break;let S=tt.readCode(o,j,5);if(j+=5,S===0){if(d-j<11)break;S=tt.readCode(o,j,11)+31,j+=11}for(let D=0;D<S;D++){if(d-j<8){j=d;break}const I=tt.readCode(o,j,8);b+=G.castAsNonUtf8Char(I),j+=8}y=h}else{let S=y===Se.DIGIT?4:5;if(d-j<S)break;let D=tt.readCode(o,j,S);j+=S;let I=tt.getCharacter(y,D);I.startsWith("CTRL_")?(h=y,y=tt.getTable(I.charAt(5)),I.charAt(6)==="L"&&(h=y)):(b+=I,y=h)}return b}static getTable(o){switch(o){case"L":return Se.LOWER;case"P":return Se.PUNCT;case"M":return Se.MIXED;case"D":return Se.DIGIT;case"B":return Se.BINARY;case"U":default:return Se.UPPER}}static getCharacter(o,d){switch(o){case Se.UPPER:return tt.UPPER_TABLE[d];case Se.LOWER:return tt.LOWER_TABLE[d];case Se.MIXED:return tt.MIXED_TABLE[d];case Se.PUNCT:return tt.PUNCT_TABLE[d];case Se.DIGIT:return tt.DIGIT_TABLE[d];default:throw new ue("Bad table")}}correctBits(o){let d,h;this.ddata.getNbLayers()<=2?(h=6,d=we.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(h=8,d=we.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(h=10,d=we.AZTEC_DATA_10):(h=12,d=we.AZTEC_DATA_12);let y=this.ddata.getNbDatablocks(),b=o.length/h;if(b<y)throw new R;let j=o.length%h,S=new Int32Array(b);for(let Z=0;Z<b;Z++,j+=h)S[Z]=tt.readCode(o,j,h);try{new He(d).decode(S,b-y)}catch(Z){throw new R(Z)}let D=(1<<h)-1,I=0;for(let Z=0;Z<y;Z++){let ie=S[Z];if(ie===0||ie===D)throw new R;(ie===1||ie===D-1)&&I++}let V=new Array(y*h-I),K=0;for(let Z=0;Z<y;Z++){let ie=S[Z];if(ie===1||ie===D-1)V.fill(ie>1,K,K+h-1),K+=h-1;else for(let me=h-1;me>=0;--me)V[K++]=(ie&1<<me)!==0}return V}extractBits(o){let d=this.ddata.isCompact(),h=this.ddata.getNbLayers(),y=(d?11:14)+h*4,b=new Int32Array(y),j=new Array(this.totalBitsInLayer(h,d));if(d)for(let S=0;S<b.length;S++)b[S]=S;else{let S=y+1+2*P.truncDivision(P.truncDivision(y,2)-1,15),D=y/2,I=P.truncDivision(S,2);for(let V=0;V<D;V++){let K=V+P.truncDivision(V,15);b[D-V-1]=I-K-1,b[D+V]=I+K+1}}for(let S=0,D=0;S<h;S++){let I=(h-S)*4+(d?9:12),V=S*2,K=y-1-V;for(let Z=0;Z<I;Z++){let ie=Z*2;for(let me=0;me<2;me++)j[D+ie+me]=o.get(b[V+me],b[V+Z]),j[D+2*I+ie+me]=o.get(b[V+Z],b[K-me]),j[D+4*I+ie+me]=o.get(b[K-me],b[K-Z]),j[D+6*I+ie+me]=o.get(b[K-Z],b[V+me])}D+=I*8}return j}static readCode(o,d,h){let y=0;for(let b=d;b<d+h;b++)y<<=1,o[b]&&(y|=1);return y}static readByte(o,d){let h=o.length-d;return h>=8?tt.readCode(o,d,8):tt.readCode(o,d,h)<<8-h}static convertBoolArrayToByteArray(o){let d=new Uint8Array((o.length+7)/8);for(let h=0;h<d.length;h++)d[h]=tt.readByte(o,8*h);return d}totalBitsInLayer(o,d){return((d?88:112)+16*o)*o}}tt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],tt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],tt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],tt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],tt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class lt{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,d,h,y){const b=o-h,j=d-y;return Math.sqrt(b*b+j*j)}static sum(o){let d=0;for(let h=0,y=o.length;h!==y;h++){const b=o[h];d+=b}return d}}class pt{static floatToIntBits(o){return o}}pt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class We{constructor(o,d){this.x=o,this.y=d}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof We){const d=o;return this.x===d.x&&this.y===d.y}return!1}hashCode(){return 31*pt.floatToIntBits(this.x)+pt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const d=this.distance(o[0],o[1]),h=this.distance(o[1],o[2]),y=this.distance(o[0],o[2]);let b,j,S;if(h>=d&&h>=y?(j=o[0],b=o[1],S=o[2]):y>=h&&y>=d?(j=o[1],b=o[0],S=o[2]):(j=o[2],b=o[0],S=o[1]),this.crossProductZ(b,j,S)<0){const D=b;b=S,S=D}o[0]=b,o[1]=j,o[2]=S}static distance(o,d){return lt.distance(o.x,o.y,d.x,d.y)}static crossProductZ(o,d,h){const y=d.x,b=d.y;return(h.x-y)*(o.y-b)-(h.y-b)*(o.x-y)}}class at{constructor(o,d){this.bits=o,this.points=d}getBits(){return this.bits}getPoints(){return this.points}}class Fe extends at{constructor(o,d,h,y,b){super(o,d),this.compact=h,this.nbDatablocks=y,this.nbLayers=b}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ft{constructor(o,d,h,y){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),d==null&&(d=ft.INIT_SIZE),h==null&&(h=o.getWidth()/2|0),y==null&&(y=o.getHeight()/2|0);const b=d/2|0;if(this.leftInit=h-b,this.rightInit=h+b,this.upInit=y-b,this.downInit=y+b,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new se}detect(){let o=this.leftInit,d=this.rightInit,h=this.upInit,y=this.downInit,b=!1,j=!0,S=!1,D=!1,I=!1,V=!1,K=!1;const Z=this.width,ie=this.height;for(;j;){j=!1;let me=!0;for(;(me||!D)&&d<Z;)me=this.containsBlackPoint(h,y,d,!1),me?(d++,j=!0,D=!0):D||d++;if(d>=Z){b=!0;break}let xe=!0;for(;(xe||!I)&&y<ie;)xe=this.containsBlackPoint(o,d,y,!0),xe?(y++,j=!0,I=!0):I||y++;if(y>=ie){b=!0;break}let Ae=!0;for(;(Ae||!V)&&o>=0;)Ae=this.containsBlackPoint(h,y,o,!1),Ae?(o--,j=!0,V=!0):V||o--;if(o<0){b=!0;break}let Pe=!0;for(;(Pe||!K)&&h>=0;)Pe=this.containsBlackPoint(o,d,h,!0),Pe?(h--,j=!0,K=!0):K||h--;if(h<0){b=!0;break}j&&(S=!0)}if(!b&&S){const me=d-o;let xe=null;for(let et=1;xe===null&&et<me;et++)xe=this.getBlackPointOnSegment(o,y-et,o+et,y);if(xe==null)throw new se;let Ae=null;for(let et=1;Ae===null&&et<me;et++)Ae=this.getBlackPointOnSegment(o,h+et,o+et,h);if(Ae==null)throw new se;let Pe=null;for(let et=1;Pe===null&&et<me;et++)Pe=this.getBlackPointOnSegment(d,h+et,d-et,h);if(Pe==null)throw new se;let rt=null;for(let et=1;rt===null&&et<me;et++)rt=this.getBlackPointOnSegment(d,y-et,d-et,y);if(rt==null)throw new se;return this.centerEdges(rt,xe,Pe,Ae)}else throw new se}getBlackPointOnSegment(o,d,h,y){const b=lt.round(lt.distance(o,d,h,y)),j=(h-o)/b,S=(y-d)/b,D=this.image;for(let I=0;I<b;I++){const V=lt.round(o+I*j),K=lt.round(d+I*S);if(D.get(V,K))return new We(V,K)}return null}centerEdges(o,d,h,y){const b=o.getX(),j=o.getY(),S=d.getX(),D=d.getY(),I=h.getX(),V=h.getY(),K=y.getX(),Z=y.getY(),ie=ft.CORR;return b<this.width/2?[new We(K-ie,Z+ie),new We(S+ie,D+ie),new We(I-ie,V-ie),new We(b+ie,j-ie)]:[new We(K+ie,Z+ie),new We(S+ie,D-ie),new We(I-ie,V+ie),new We(b-ie,j-ie)]}containsBlackPoint(o,d,h,y){const b=this.image;if(y){for(let j=o;j<=d;j++)if(b.get(j,h))return!0}else for(let j=o;j<=d;j++)if(b.get(h,j))return!0;return!1}}ft.INIT_SIZE=10,ft.CORR=1;class Gt{static checkAndNudgePoints(o,d){const h=o.getWidth(),y=o.getHeight();let b=!0;for(let j=0;j<d.length&&b;j+=2){const S=Math.floor(d[j]),D=Math.floor(d[j+1]);if(S<-1||S>h||D<-1||D>y)throw new se;b=!1,S===-1?(d[j]=0,b=!0):S===h&&(d[j]=h-1,b=!0),D===-1?(d[j+1]=0,b=!0):D===y&&(d[j+1]=y-1,b=!0)}b=!0;for(let j=d.length-2;j>=0&&b;j-=2){const S=Math.floor(d[j]),D=Math.floor(d[j+1]);if(S<-1||S>h||D<-1||D>y)throw new se;b=!1,S===-1?(d[j]=0,b=!0):S===h&&(d[j]=h-1,b=!0),D===-1?(d[j+1]=0,b=!0):D===y&&(d[j+1]=y-1,b=!0)}}}class rr{constructor(o,d,h,y,b,j,S,D,I){this.a11=o,this.a21=d,this.a31=h,this.a12=y,this.a22=b,this.a32=j,this.a13=S,this.a23=D,this.a33=I}static quadrilateralToQuadrilateral(o,d,h,y,b,j,S,D,I,V,K,Z,ie,me,xe,Ae){const Pe=rr.quadrilateralToSquare(o,d,h,y,b,j,S,D);return rr.squareToQuadrilateral(I,V,K,Z,ie,me,xe,Ae).times(Pe)}transformPoints(o){const d=o.length,h=this.a11,y=this.a12,b=this.a13,j=this.a21,S=this.a22,D=this.a23,I=this.a31,V=this.a32,K=this.a33;for(let Z=0;Z<d;Z+=2){const ie=o[Z],me=o[Z+1],xe=b*ie+D*me+K;o[Z]=(h*ie+j*me+I)/xe,o[Z+1]=(y*ie+S*me+V)/xe}}transformPointsWithValues(o,d){const h=this.a11,y=this.a12,b=this.a13,j=this.a21,S=this.a22,D=this.a23,I=this.a31,V=this.a32,K=this.a33,Z=o.length;for(let ie=0;ie<Z;ie++){const me=o[ie],xe=d[ie],Ae=b*me+D*xe+K;o[ie]=(h*me+j*xe+I)/Ae,d[ie]=(y*me+S*xe+V)/Ae}}static squareToQuadrilateral(o,d,h,y,b,j,S,D){const I=o-h+b-S,V=d-y+j-D;if(I===0&&V===0)return new rr(h-o,b-h,o,y-d,j-y,d,0,0,1);{const K=h-b,Z=S-b,ie=y-j,me=D-j,xe=K*me-Z*ie,Ae=(I*me-Z*V)/xe,Pe=(K*V-I*ie)/xe;return new rr(h-o+Ae*h,S-o+Pe*S,o,y-d+Ae*y,D-d+Pe*D,d,Ae,Pe,1)}}static quadrilateralToSquare(o,d,h,y,b,j,S,D){return rr.squareToQuadrilateral(o,d,h,y,b,j,S,D).buildAdjoint()}buildAdjoint(){return new rr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new rr(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class mr extends Gt{sampleGrid(o,d,h,y,b,j,S,D,I,V,K,Z,ie,me,xe,Ae,Pe,rt,et){const Ze=rr.quadrilateralToQuadrilateral(y,b,j,S,D,I,V,K,Z,ie,me,xe,Ae,Pe,rt,et);return this.sampleGridWithTransform(o,d,h,Ze)}sampleGridWithTransform(o,d,h,y){if(d<=0||h<=0)throw new se;const b=new ce(d,h),j=new Float32Array(2*d);for(let S=0;S<h;S++){const D=j.length,I=S+.5;for(let V=0;V<D;V+=2)j[V]=V/2+.5,j[V+1]=I;y.transformPoints(j),Gt.checkAndNudgePoints(o,j);try{for(let V=0;V<D;V+=2)o.get(Math.floor(j[V]),Math.floor(j[V+1]))&&b.set(V/2,S)}catch{throw new se}}return b}}class ct{static setGridSampler(o){ct.gridSampler=o}static getInstance(){return ct.gridSampler}}ct.gridSampler=new mr;class Et{constructor(o,d){this.x=o,this.y=d}toResultPoint(){return new We(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class _r{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let d=this.getMatrixCenter(),h=this.getBullsEyeCorners(d);if(o){let j=h[0];h[0]=h[2],h[2]=j}this.extractParameters(h);let y=this.sampleGrid(this.image,h[this.shift%4],h[(this.shift+1)%4],h[(this.shift+2)%4],h[(this.shift+3)%4]),b=this.getMatrixCornerPoints(h);return new Fe(y,b,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new se;let d=2*this.nbCenterLayers,h=new Int32Array([this.sampleLine(o[0],o[1],d),this.sampleLine(o[1],o[2],d),this.sampleLine(o[2],o[3],d),this.sampleLine(o[3],o[0],d)]);this.shift=this.getRotation(h,d);let y=0;for(let j=0;j<4;j++){let S=h[(this.shift+j)%4];this.compact?(y<<=7,y+=S>>1&127):(y<<=10,y+=(S>>2&992)+(S>>1&31))}let b=this.getCorrectedParameterData(y,this.compact);this.compact?(this.nbLayers=(b>>6)+1,this.nbDataBlocks=(b&63)+1):(this.nbLayers=(b>>11)+1,this.nbDataBlocks=(b&2047)+1)}getRotation(o,d){let h=0;o.forEach((y,b,j)=>{let S=(y>>d-2<<1)+(y&1);h=(h<<3)+S}),h=((h&1)<<11)+(h>>1);for(let y=0;y<4;y++)if(P.bitCount(h^this.EXPECTED_CORNER_BITS[y])<=2)return y;throw new se}getCorrectedParameterData(o,d){let h,y;d?(h=7,y=2):(h=10,y=4);let b=h-y,j=new Int32Array(h);for(let D=h-1;D>=0;--D)j[D]=o&15,o>>=4;try{new He(we.AZTEC_PARAM).decode(j,b)}catch{throw new se}let S=0;for(let D=0;D<y;D++)S=(S<<4)+j[D];return S}getBullsEyeCorners(o){let d=o,h=o,y=o,b=o,j=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let K=this.getFirstDifferent(d,j,1,-1),Z=this.getFirstDifferent(h,j,1,1),ie=this.getFirstDifferent(y,j,-1,1),me=this.getFirstDifferent(b,j,-1,-1);if(this.nbCenterLayers>2){let xe=this.distancePoint(me,K)*this.nbCenterLayers/(this.distancePoint(b,d)*(this.nbCenterLayers+2));if(xe<.75||xe>1.25||!this.isWhiteOrBlackRectangle(K,Z,ie,me))break}d=K,h=Z,y=ie,b=me,j=!j}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new se;this.compact=this.nbCenterLayers===5;let S=new We(d.getX()+.5,d.getY()-.5),D=new We(h.getX()+.5,h.getY()+.5),I=new We(y.getX()-.5,y.getY()+.5),V=new We(b.getX()-.5,b.getY()-.5);return this.expandSquare([S,D,I,V],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,d,h,y;try{let S=new ft(this.image).detect();o=S[0],d=S[1],h=S[2],y=S[3]}catch{let D=this.image.getWidth()/2,I=this.image.getHeight()/2;o=this.getFirstDifferent(new Et(D+7,I-7),!1,1,-1).toResultPoint(),d=this.getFirstDifferent(new Et(D+7,I+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new Et(D-7,I+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new Et(D-7,I-7),!1,-1,-1).toResultPoint()}let b=lt.round((o.getX()+y.getX()+d.getX()+h.getX())/4),j=lt.round((o.getY()+y.getY()+d.getY()+h.getY())/4);try{let S=new ft(this.image,15,b,j).detect();o=S[0],d=S[1],h=S[2],y=S[3]}catch{o=this.getFirstDifferent(new Et(b+7,j-7),!1,1,-1).toResultPoint(),d=this.getFirstDifferent(new Et(b+7,j+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new Et(b-7,j+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new Et(b-7,j-7),!1,-1,-1).toResultPoint()}return b=lt.round((o.getX()+y.getX()+d.getX()+h.getX())/4),j=lt.round((o.getY()+y.getY()+d.getY()+h.getY())/4),new Et(b,j)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,d,h,y,b){let j=ct.getInstance(),S=this.getDimension(),D=S/2-this.nbCenterLayers,I=S/2+this.nbCenterLayers;return j.sampleGrid(o,S,S,D,D,I,D,I,I,D,I,d.getX(),d.getY(),h.getX(),h.getY(),y.getX(),y.getY(),b.getX(),b.getY())}sampleLine(o,d,h){let y=0,b=this.distanceResultPoint(o,d),j=b/h,S=o.getX(),D=o.getY(),I=j*(d.getX()-o.getX())/b,V=j*(d.getY()-o.getY())/b;for(let K=0;K<h;K++)this.image.get(lt.round(S+K*I),lt.round(D+K*V))&&(y|=1<<h-K-1);return y}isWhiteOrBlackRectangle(o,d,h,y){let b=3;o=new Et(o.getX()-b,o.getY()+b),d=new Et(d.getX()-b,d.getY()-b),h=new Et(h.getX()+b,h.getY()-b),y=new Et(y.getX()+b,y.getY()+b);let j=this.getColor(y,o);if(j===0)return!1;let S=this.getColor(o,d);return S!==j||(S=this.getColor(d,h),S!==j)?!1:(S=this.getColor(h,y),S===j)}getColor(o,d){let h=this.distancePoint(o,d),y=(d.getX()-o.getX())/h,b=(d.getY()-o.getY())/h,j=0,S=o.getX(),D=o.getY(),I=this.image.get(o.getX(),o.getY()),V=Math.ceil(h);for(let Z=0;Z<V;Z++)S+=y,D+=b,this.image.get(lt.round(S),lt.round(D))!==I&&j++;let K=j/h;return K>.1&&K<.9?0:K<=.1===I?1:-1}getFirstDifferent(o,d,h,y){let b=o.getX()+h,j=o.getY()+y;for(;this.isValid(b,j)&&this.image.get(b,j)===d;)b+=h,j+=y;for(b-=h,j-=y;this.isValid(b,j)&&this.image.get(b,j)===d;)b+=h;for(b-=h;this.isValid(b,j)&&this.image.get(b,j)===d;)j+=y;return j-=y,new Et(b,j)}expandSquare(o,d,h){let y=h/(2*d),b=o[0].getX()-o[2].getX(),j=o[0].getY()-o[2].getY(),S=(o[0].getX()+o[2].getX())/2,D=(o[0].getY()+o[2].getY())/2,I=new We(S+y*b,D+y*j),V=new We(S-y*b,D-y*j);b=o[1].getX()-o[3].getX(),j=o[1].getY()-o[3].getY(),S=(o[1].getX()+o[3].getX())/2,D=(o[1].getY()+o[3].getY())/2;let K=new We(S+y*b,D+y*j),Z=new We(S-y*b,D-y*j);return[I,K,V,Z]}isValid(o,d){return o>=0&&o<this.image.getWidth()&&d>0&&d<this.image.getHeight()}isValidPoint(o){let d=lt.round(o.getX()),h=lt.round(o.getY());return this.isValid(d,h)}distancePoint(o,d){return lt.distance(o.getX(),o.getY(),d.getX(),d.getY())}distanceResultPoint(o,d){return lt.distance(o.getX(),o.getY(),d.getX(),d.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(P.truncDivision(this.nbLayers-4,8)+1)+15}}class Sr{decode(o,d=null){let h=null,y=new _r(o.getBlackMatrix()),b=null,j=null;try{let V=y.detectMirror(!1);b=V.getPoints(),this.reportFoundResultPoints(d,b),j=new tt().decode(V)}catch(V){h=V}if(j==null)try{let V=y.detectMirror(!0);b=V.getPoints(),this.reportFoundResultPoints(d,b),j=new tt().decode(V)}catch(V){throw h??V}let S=new de(j.getText(),j.getRawBytes(),j.getNumBits(),b,oe.AZTEC,k.currentTimeMillis()),D=j.getByteSegments();D!=null&&S.putMetadata(qe.BYTE_SEGMENTS,D);let I=j.getECLevel();return I!=null&&S.putMetadata(qe.ERROR_CORRECTION_LEVEL,I),S}reportFoundResultPoints(o,d){if(o!=null){let h=o.get(F.NEED_RESULT_POINT_CALLBACK);h!=null&&d.forEach((y,b,j)=>{h.foundPossibleResultPoint(y)})}}reset(){}}class cs extends ge{constructor(o=500){super(new Sr,o)}}class _t{decode(o,d){try{return this.doDecode(o,d)}catch{if(d&&d.get(F.TRY_HARDER)===!0&&o.isRotateSupported()){const b=o.rotateCounterClockwise(),j=this.doDecode(b,d),S=j.getResultMetadata();let D=270;S!==null&&S.get(qe.ORIENTATION)===!0&&(D=D+S.get(qe.ORIENTATION)%360),j.putMetadata(qe.ORIENTATION,D);const I=j.getResultPoints();if(I!==null){const V=b.getHeight();for(let K=0;K<I.length;K++)I[K]=new We(V-I[K].getY()-1,I[K].getX())}return j}else throw new se}}reset(){}doDecode(o,d){const h=o.getWidth(),y=o.getHeight();let b=new H(h);const j=d&&d.get(F.TRY_HARDER)===!0,S=Math.max(1,y>>(j?8:5));let D;j?D=y:D=15;const I=Math.trunc(y/2);for(let V=0;V<D;V++){const K=Math.trunc((V+1)/2),Z=(V&1)===0,ie=I+S*(Z?K:-K);if(ie<0||ie>=y)break;try{b=o.getBlackRow(ie,b)}catch{continue}for(let me=0;me<2;me++){if(me===1&&(b.reverse(),d&&d.get(F.NEED_RESULT_POINT_CALLBACK)===!0)){const xe=new Map;d.forEach((Ae,Pe)=>xe.set(Pe,Ae)),xe.delete(F.NEED_RESULT_POINT_CALLBACK),d=xe}try{const xe=this.decodeRow(ie,b,d);if(me===1){xe.putMetadata(qe.ORIENTATION,180);const Ae=xe.getResultPoints();Ae!==null&&(Ae[0]=new We(h-Ae[0].getX()-1,Ae[0].getY()),Ae[1]=new We(h-Ae[1].getX()-1,Ae[1].getY()))}return xe}catch{}}}throw new se}static recordPattern(o,d,h){const y=h.length;for(let I=0;I<y;I++)h[I]=0;const b=o.getSize();if(d>=b)throw new se;let j=!o.get(d),S=0,D=d;for(;D<b;){if(o.get(D)!==j)h[S]++;else{if(++S===y)break;h[S]=1,j=!j}D++}if(!(S===y||S===y-1&&D===b))throw new se}static recordPatternInReverse(o,d,h){let y=h.length,b=o.get(d);for(;d>0&&y>=0;)o.get(--d)!==b&&(y--,b=!b);if(y>=0)throw new se;_t.recordPattern(o,d+1,h)}static patternMatchVariance(o,d,h){const y=o.length;let b=0,j=0;for(let I=0;I<y;I++)b+=o[I],j+=d[I];if(b<j)return Number.POSITIVE_INFINITY;const S=b/j;h*=S;let D=0;for(let I=0;I<y;I++){const V=o[I],K=d[I]*S,Z=V>K?V-K:K-V;if(Z>h)return Number.POSITIVE_INFINITY;D+=Z}return D/b}}class ve extends _t{static findStartPattern(o){const d=o.getSize(),h=o.getNextSet(0);let y=0,b=Int32Array.from([0,0,0,0,0,0]),j=h,S=!1;const D=6;for(let I=h;I<d;I++)if(o.get(I)!==S)b[y]++;else{if(y===D-1){let V=ve.MAX_AVG_VARIANCE,K=-1;for(let Z=ve.CODE_START_A;Z<=ve.CODE_START_C;Z++){const ie=_t.patternMatchVariance(b,ve.CODE_PATTERNS[Z],ve.MAX_INDIVIDUAL_VARIANCE);ie<V&&(V=ie,K=Z)}if(K>=0&&o.isRange(Math.max(0,j-(I-j)/2),j,!1))return Int32Array.from([j,I,K]);j+=b[0]+b[1],b=b.slice(2,b.length-1),b[y-1]=0,b[y]=0,y--}else y++;b[y]=1,S=!S}throw new se}static decodeCode(o,d,h){_t.recordPattern(o,h,d);let y=ve.MAX_AVG_VARIANCE,b=-1;for(let j=0;j<ve.CODE_PATTERNS.length;j++){const S=ve.CODE_PATTERNS[j],D=this.patternMatchVariance(d,S,ve.MAX_INDIVIDUAL_VARIANCE);D<y&&(y=D,b=j)}if(b>=0)return b;throw new se}decodeRow(o,d,h){const y=h&&h.get(F.ASSUME_GS1)===!0,b=ve.findStartPattern(d),j=b[2];let S=0;const D=new Uint8Array(20);D[S++]=j;let I;switch(j){case ve.CODE_START_A:I=ve.CODE_CODE_A;break;case ve.CODE_START_B:I=ve.CODE_CODE_B;break;case ve.CODE_START_C:I=ve.CODE_CODE_C;break;default:throw new R}let V=!1,K=!1,Z="",ie=b[0],me=b[1];const xe=Int32Array.from([0,0,0,0,0,0]);let Ae=0,Pe=0,rt=j,et=0,Ze=!0,$t=!1,Pt=!1;for(;!V;){const Ki=K;switch(K=!1,Ae=Pe,Pe=ve.decodeCode(d,xe,me),D[S++]=Pe,Pe!==ve.CODE_STOP&&(Ze=!0),Pe!==ve.CODE_STOP&&(et++,rt+=et*Pe),ie=me,me+=xe.reduce((A0,Kd)=>A0+Kd,0),Pe){case ve.CODE_START_A:case ve.CODE_START_B:case ve.CODE_START_C:throw new R}switch(I){case ve.CODE_CODE_A:if(Pe<64)Pt===$t?Z+=String.fromCharCode(32+Pe):Z+=String.fromCharCode(32+Pe+128),Pt=!1;else if(Pe<96)Pt===$t?Z+=String.fromCharCode(Pe-64):Z+=String.fromCharCode(Pe+64),Pt=!1;else switch(Pe!==ve.CODE_STOP&&(Ze=!1),Pe){case ve.CODE_FNC_1:y&&(Z.length===0?Z+="]C1":Z+="");break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_A:!$t&&Pt?($t=!0,Pt=!1):$t&&Pt?($t=!1,Pt=!1):Pt=!0;break;case ve.CODE_SHIFT:K=!0,I=ve.CODE_CODE_B;break;case ve.CODE_CODE_B:I=ve.CODE_CODE_B;break;case ve.CODE_CODE_C:I=ve.CODE_CODE_C;break;case ve.CODE_STOP:V=!0;break}break;case ve.CODE_CODE_B:if(Pe<96)Pt===$t?Z+=String.fromCharCode(32+Pe):Z+=String.fromCharCode(32+Pe+128),Pt=!1;else switch(Pe!==ve.CODE_STOP&&(Ze=!1),Pe){case ve.CODE_FNC_1:y&&(Z.length===0?Z+="]C1":Z+="");break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_B:!$t&&Pt?($t=!0,Pt=!1):$t&&Pt?($t=!1,Pt=!1):Pt=!0;break;case ve.CODE_SHIFT:K=!0,I=ve.CODE_CODE_A;break;case ve.CODE_CODE_A:I=ve.CODE_CODE_A;break;case ve.CODE_CODE_C:I=ve.CODE_CODE_C;break;case ve.CODE_STOP:V=!0;break}break;case ve.CODE_CODE_C:if(Pe<100)Pe<10&&(Z+="0"),Z+=Pe;else switch(Pe!==ve.CODE_STOP&&(Ze=!1),Pe){case ve.CODE_FNC_1:y&&(Z.length===0?Z+="]C1":Z+="");break;case ve.CODE_CODE_A:I=ve.CODE_CODE_A;break;case ve.CODE_CODE_B:I=ve.CODE_CODE_B;break;case ve.CODE_STOP:V=!0;break}break}Ki&&(I=I===ve.CODE_CODE_A?ve.CODE_CODE_B:ve.CODE_CODE_A)}const ds=me-ie;if(me=d.getNextUnset(me),!d.isRange(me,Math.min(d.getSize(),me+(me-ie)/2),!1))throw new se;if(rt-=et*Ae,rt%103!==Ae)throw new T;const In=Z.length;if(In===0)throw new se;In>0&&Ze&&(I===ve.CODE_CODE_C?Z=Z.substring(0,In-2):Z=Z.substring(0,In-1));const ln=(b[1]+b[0])/2,yr=ie+ds/2,Us=D.length,jn=new Uint8Array(Us);for(let Ki=0;Ki<Us;Ki++)jn[Ki]=D[Ki];const Wl=[new We(ln,o),new We(yr,o)];return new de(Z,jn,0,Wl,oe.CODE_128,new Date().getTime())}}ve.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ve.MAX_AVG_VARIANCE=.25,ve.MAX_INDIVIDUAL_VARIANCE=.7,ve.CODE_SHIFT=98,ve.CODE_CODE_C=99,ve.CODE_CODE_B=100,ve.CODE_CODE_A=101,ve.CODE_FNC_1=102,ve.CODE_FNC_2=97,ve.CODE_FNC_3=96,ve.CODE_FNC_4_A=101,ve.CODE_FNC_4_B=100,ve.CODE_START_A=103,ve.CODE_START_B=104,ve.CODE_START_C=105,ve.CODE_STOP=106;class Je extends _t{constructor(o=!1,d=!1){super(),this.usingCheckDigit=o,this.extendedMode=d,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,d,h){let y=this.counters;y.fill(0),this.decodeRowResult="";let b=Je.findAsteriskPattern(d,y),j=d.getNextSet(b[1]),S=d.getSize(),D,I;do{Je.recordPattern(d,j,y);let xe=Je.toNarrowWidePattern(y);if(xe<0)throw new se;D=Je.patternToChar(xe),this.decodeRowResult+=D,I=j;for(let Ae of y)j+=Ae;j=d.getNextSet(j)}while(D!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let V=0;for(let xe of y)V+=xe;let K=j-I-V;if(j!==S&&K*2<V)throw new se;if(this.usingCheckDigit){let xe=this.decodeRowResult.length-1,Ae=0;for(let Pe=0;Pe<xe;Pe++)Ae+=Je.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Pe));if(this.decodeRowResult.charAt(xe)!==Je.ALPHABET_STRING.charAt(Ae%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,xe)}if(this.decodeRowResult.length===0)throw new se;let Z;this.extendedMode?Z=Je.decodeExtended(this.decodeRowResult):Z=this.decodeRowResult;let ie=(b[1]+b[0])/2,me=I+V/2;return new de(Z,null,0,[new We(ie,o),new We(me,o)],oe.CODE_39,new Date().getTime())}static findAsteriskPattern(o,d){let h=o.getSize(),y=o.getNextSet(0),b=0,j=y,S=!1,D=d.length;for(let I=y;I<h;I++)if(o.get(I)!==S)d[b]++;else{if(b===D-1){if(this.toNarrowWidePattern(d)===Je.ASTERISK_ENCODING&&o.isRange(Math.max(0,j-Math.floor((I-j)/2)),j,!1))return[j,I];j+=d[0]+d[1],d.copyWithin(0,2,2+b-1),d[b-1]=0,d[b]=0,b--}else b++;d[b]=1,S=!S}throw new se}static toNarrowWidePattern(o){let d=o.length,h=0,y;do{let b=2147483647;for(let D of o)D<b&&D>h&&(b=D);h=b,y=0;let j=0,S=0;for(let D=0;D<d;D++){let I=o[D];I>h&&(S|=1<<d-1-D,y++,j+=I)}if(y===3){for(let D=0;D<d&&y>0;D++){let I=o[D];if(I>h&&(y--,I*2>=j))return-1}return S}}while(y>3);return-1}static patternToChar(o){for(let d=0;d<Je.CHARACTER_ENCODINGS.length;d++)if(Je.CHARACTER_ENCODINGS[d]===o)return Je.ALPHABET_STRING.charAt(d);if(o===Je.ASTERISK_ENCODING)return"*";throw new se}static decodeExtended(o){let d=o.length,h="";for(let y=0;y<d;y++){let b=o.charAt(y);if(b==="+"||b==="$"||b==="%"||b==="/"){let j=o.charAt(y+1),S="\0";switch(b){case"+":if(j>="A"&&j<="Z")S=String.fromCharCode(j.charCodeAt(0)+32);else throw new R;break;case"$":if(j>="A"&&j<="Z")S=String.fromCharCode(j.charCodeAt(0)-64);else throw new R;break;case"%":if(j>="A"&&j<="E")S=String.fromCharCode(j.charCodeAt(0)-38);else if(j>="F"&&j<="J")S=String.fromCharCode(j.charCodeAt(0)-11);else if(j>="K"&&j<="O")S=String.fromCharCode(j.charCodeAt(0)+16);else if(j>="P"&&j<="T")S=String.fromCharCode(j.charCodeAt(0)+43);else if(j==="U")S="\0";else if(j==="V")S="@";else if(j==="W")S="`";else if(j==="X"||j==="Y"||j==="Z")S="";else throw new R;break;case"/":if(j>="A"&&j<="O")S=String.fromCharCode(j.charCodeAt(0)-32);else if(j==="Z")S=":";else throw new R;break}h+=S,y++}else h+=b}return h}}Je.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Je.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Je.ASTERISK_ENCODING=148;class nt extends _t{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,d,h){let y=this.decodeStart(d),b=this.decodeEnd(d),j=new ee;nt.decodeMiddle(d,y[1],b[0],j);let S=j.toString(),D=null;h!=null&&(D=h.get(F.ALLOWED_LENGTHS)),D==null&&(D=nt.DEFAULT_ALLOWED_LENGTHS);let I=S.length,V=!1,K=0;for(let me of D){if(I===me){V=!0;break}me>K&&(K=me)}if(!V&&I>K&&(V=!0),!V)throw new R;const Z=[new We(y[1],o),new We(b[0],o)];return new de(S,null,0,Z,oe.ITF,new Date().getTime())}static decodeMiddle(o,d,h,y){let b=new Int32Array(10),j=new Int32Array(5),S=new Int32Array(5);for(b.fill(0),j.fill(0),S.fill(0);d<h;){_t.recordPattern(o,d,b);for(let I=0;I<5;I++){let V=2*I;j[I]=b[V],S[I]=b[V+1]}let D=nt.decodeDigit(j);y.append(D.toString()),D=this.decodeDigit(S),y.append(D.toString()),b.forEach(function(I){d+=I})}}decodeStart(o){let d=nt.skipWhiteSpace(o),h=nt.findGuardPattern(o,d,nt.START_PATTERN);return this.narrowLineWidth=(h[1]-h[0])/4,this.validateQuietZone(o,h[0]),h}validateQuietZone(o,d){let h=this.narrowLineWidth*10;h=h<d?h:d;for(let y=d-1;h>0&&y>=0&&!o.get(y);y--)h--;if(h!==0)throw new se}static skipWhiteSpace(o){const d=o.getSize(),h=o.getNextSet(0);if(h===d)throw new se;return h}decodeEnd(o){o.reverse();try{let d=nt.skipWhiteSpace(o),h;try{h=nt.findGuardPattern(o,d,nt.END_PATTERN_REVERSED[0])}catch(b){b instanceof se&&(h=nt.findGuardPattern(o,d,nt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,h[0]);let y=h[0];return h[0]=o.getSize()-h[1],h[1]=o.getSize()-y,h}finally{o.reverse()}}static findGuardPattern(o,d,h){let y=h.length,b=new Int32Array(y),j=o.getSize(),S=!1,D=0,I=d;b.fill(0);for(let V=d;V<j;V++)if(o.get(V)!==S)b[D]++;else{if(D===y-1){if(_t.patternMatchVariance(b,h,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return[I,V];I+=b[0]+b[1],k.arraycopy(b,2,b,0,D-1),b[D-1]=0,b[D]=0,D--}else D++;b[D]=1,S=!S}throw new se}static decodeDigit(o){let d=nt.MAX_AVG_VARIANCE,h=-1,y=nt.PATTERNS.length;for(let b=0;b<y;b++){let j=nt.PATTERNS[b],S=_t.patternMatchVariance(o,j,nt.MAX_INDIVIDUAL_VARIANCE);S<d?(d=S,h=b):S===d&&(h=-1)}if(h>=0)return h%10;throw new se}}nt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],nt.MAX_AVG_VARIANCE=.38,nt.MAX_INDIVIDUAL_VARIANCE=.5,nt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],nt.START_PATTERN=Int32Array.from([1,1,1,1]),nt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class At extends _t{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let d=!1,h,y=0,b=Int32Array.from([0,0,0]);for(;!d;){b=Int32Array.from([0,0,0]),h=At.findGuardPattern(o,y,!1,this.START_END_PATTERN,b);let j=h[0];y=h[1];let S=j-(y-j);S>=0&&(d=o.isRange(S,j,!1))}return h}static checkChecksum(o){return At.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let d=o.length;if(d===0)return!1;let h=parseInt(o.charAt(d-1),10);return At.getStandardUPCEANChecksum(o.substring(0,d-1))===h}static getStandardUPCEANChecksum(o){let d=o.length,h=0;for(let y=d-1;y>=0;y-=2){let b=o.charAt(y).charCodeAt(0)-48;if(b<0||b>9)throw new R;h+=b}h*=3;for(let y=d-2;y>=0;y-=2){let b=o.charAt(y).charCodeAt(0)-48;if(b<0||b>9)throw new R;h+=b}return(1e3-h)%10}static decodeEnd(o,d){return At.findGuardPattern(o,d,!1,At.START_END_PATTERN,new Int32Array(At.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,d,h,y){return this.findGuardPattern(o,d,h,y,new Int32Array(y.length))}static findGuardPattern(o,d,h,y,b){let j=o.getSize();d=h?o.getNextUnset(d):o.getNextSet(d);let S=0,D=d,I=y.length,V=h;for(let K=d;K<j;K++)if(o.get(K)!==V)b[S]++;else{if(S===I-1){if(_t.patternMatchVariance(b,y,At.MAX_INDIVIDUAL_VARIANCE)<At.MAX_AVG_VARIANCE)return Int32Array.from([D,K]);D+=b[0]+b[1];let Z=b.slice(2,b.length-1);for(let ie=0;ie<S-1;ie++)b[ie]=Z[ie];b[S-1]=0,b[S]=0,S--}else S++;b[S]=1,V=!V}throw new se}static decodeDigit(o,d,h,y){this.recordPattern(o,h,d);let b=this.MAX_AVG_VARIANCE,j=-1,S=y.length;for(let D=0;D<S;D++){let I=y[D],V=_t.patternMatchVariance(d,I,At.MAX_INDIVIDUAL_VARIANCE);V<b&&(b=V,j=D)}if(j>=0)return j;throw new se}}At.MAX_AVG_VARIANCE=.48,At.MAX_INDIVIDUAL_VARIANCE=.7,At.START_END_PATTERN=Int32Array.from([1,1,1]),At.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),At.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),At.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class gr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,d,h){let y=this.decodeRowStringBuffer,b=this.decodeMiddle(d,h,y),j=y.toString(),S=gr.parseExtensionString(j),D=[new We((h[0]+h[1])/2,o),new We(b,o)],I=new de(j,null,0,D,oe.UPC_EAN_EXTENSION,new Date().getTime());return S!=null&&I.putAllMetadata(S),I}decodeMiddle(o,d,h){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let b=o.getSize(),j=d[1],S=0;for(let I=0;I<5&&j<b;I++){let V=At.decodeDigit(o,y,j,At.L_AND_G_PATTERNS);h+=String.fromCharCode(48+V%10);for(let K of y)j+=K;V>=10&&(S|=1<<4-I),I!==4&&(j=o.getNextSet(j),j=o.getNextUnset(j))}if(h.length!==5)throw new se;let D=this.determineCheckDigit(S);if(gr.extensionChecksum(h.toString())!==D)throw new se;return j}static extensionChecksum(o){let d=o.length,h=0;for(let y=d-2;y>=0;y-=2)h+=o.charAt(y).charCodeAt(0)-48;h*=3;for(let y=d-1;y>=0;y-=2)h+=o.charAt(y).charCodeAt(0)-48;return h*=3,h%10}determineCheckDigit(o){for(let d=0;d<10;d++)if(o===this.CHECK_DIGIT_ENCODINGS[d])return d;throw new se}static parseExtensionString(o){if(o.length!==5)return null;let d=gr.parseExtension5String(o);return d==null?null:new Map([[qe.SUGGESTED_PRICE,d]])}static parseExtension5String(o){let d;switch(o.charAt(0)){case"0":d="";break;case"5":d="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}d="";break;default:d="";break}let h=parseInt(o.substring(1)),y=(h/100).toString(),b=h%100,j=b<10?"0"+b:b.toString();return d+y+"."+j}}class Xs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,d,h){let y=this.decodeRowStringBuffer,b=this.decodeMiddle(d,h,y),j=y.toString(),S=Xs.parseExtensionString(j),D=[new We((h[0]+h[1])/2,o),new We(b,o)],I=new de(j,null,0,D,oe.UPC_EAN_EXTENSION,new Date().getTime());return S!=null&&I.putAllMetadata(S),I}decodeMiddle(o,d,h){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let b=o.getSize(),j=d[1],S=0;for(let D=0;D<2&&j<b;D++){let I=At.decodeDigit(o,y,j,At.L_AND_G_PATTERNS);h+=String.fromCharCode(48+I%10);for(let V of y)j+=V;I>=10&&(S|=1<<1-D),D!==1&&(j=o.getNextSet(j),j=o.getNextUnset(j))}if(h.length!==2)throw new se;if(parseInt(h.toString())%4!==S)throw new se;return j}static parseExtensionString(o){return o.length!==2?null:new Map([[qe.ISSUE_NUMBER,parseInt(o)]])}}class as{static decodeRow(o,d,h){let y=At.findGuardPattern(d,h,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new gr().decodeRow(o,d,y)}catch{return new Xs().decodeRow(o,d,y)}}}as.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class bt extends At{constructor(){super(),this.decodeRowStringBuffer="",bt.L_AND_G_PATTERNS=bt.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let d=bt.L_PATTERNS[o-10],h=new Int32Array(d.length);for(let y=0;y<d.length;y++)h[y]=d[d.length-y-1];bt.L_AND_G_PATTERNS[o]=h}}decodeRow(o,d,h){let y=bt.findStartGuardPattern(d),b=h==null?null:h.get(F.NEED_RESULT_POINT_CALLBACK);if(b!=null){const Ze=new We((y[0]+y[1])/2,o);b.foundPossibleResultPoint(Ze)}let j=this.decodeMiddle(d,y,this.decodeRowStringBuffer),S=j.rowOffset,D=j.resultString;if(b!=null){const Ze=new We(S,o);b.foundPossibleResultPoint(Ze)}let I=this.decodeEnd(d,S);if(b!=null){const Ze=new We((I[0]+I[1])/2,o);b.foundPossibleResultPoint(Ze)}let V=I[1],K=V+(V-I[0]);if(K>=d.getSize()||!d.isRange(V,K,!1))throw new se;let Z=D.toString();if(Z.length<8)throw new R;if(!bt.checkChecksum(Z))throw new T;let ie=(y[1]+y[0])/2,me=(I[1]+I[0])/2,xe=this.getBarcodeFormat(),Ae=[new We(ie,o),new We(me,o)],Pe=new de(Z,null,0,Ae,xe,new Date().getTime()),rt=0;try{let Ze=as.decodeRow(o,d,I[1]);Pe.putMetadata(qe.UPC_EAN_EXTENSION,Ze.getText()),Pe.putAllMetadata(Ze.getResultMetadata()),Pe.addResultPoints(Ze.getResultPoints()),rt=Ze.getText().length}catch{}let et=h==null?null:h.get(F.ALLOWED_EAN_EXTENSIONS);if(et!=null){let Ze=!1;for(let $t in et)if(rt.toString()===$t){Ze=!0;break}if(!Ze)throw new se}return Pe}decodeEnd(o,d){return bt.findGuardPattern(o,d,!1,bt.START_END_PATTERN,new Int32Array(bt.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return bt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let d=o.length;if(d===0)return!1;let h=parseInt(o.charAt(d-1),10);return bt.getStandardUPCEANChecksum(o.substring(0,d-1))===h}static getStandardUPCEANChecksum(o){let d=o.length,h=0;for(let y=d-1;y>=0;y-=2){let b=o.charAt(y).charCodeAt(0)-48;if(b<0||b>9)throw new R;h+=b}h*=3;for(let y=d-2;y>=0;y-=2){let b=o.charAt(y).charCodeAt(0)-48;if(b<0||b>9)throw new R;h+=b}return(1e3-h)%10}}class le extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,d,h){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let b=o.getSize(),j=d[1],S=0;for(let I=0;I<6&&j<b;I++){let V=bt.decodeDigit(o,y,j,bt.L_AND_G_PATTERNS);h+=String.fromCharCode(48+V%10);for(let K of y)j+=K;V>=10&&(S|=1<<5-I)}h=le.determineFirstDigit(h,S),j=bt.findGuardPattern(o,j,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let I=0;I<6&&j<b;I++){let V=bt.decodeDigit(o,y,j,bt.L_PATTERNS);h+=String.fromCharCode(48+V);for(let K of y)j+=K}return{rowOffset:j,resultString:h}}getBarcodeFormat(){return oe.EAN_13}static determineFirstDigit(o,d){for(let h=0;h<10;h++)if(d===this.FIRST_DIGIT_ENCODINGS[h])return o=String.fromCharCode(48+h)+o,o;throw new se}}le.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ut extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,d,h){const y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let b=o.getSize(),j=d[1];for(let D=0;D<4&&j<b;D++){let I=bt.decodeDigit(o,y,j,bt.L_PATTERNS);h+=String.fromCharCode(48+I);for(let V of y)j+=V}j=bt.findGuardPattern(o,j,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let D=0;D<4&&j<b;D++){let I=bt.decodeDigit(o,y,j,bt.L_PATTERNS);h+=String.fromCharCode(48+I);for(let V of y)j+=V}return{rowOffset:j,resultString:h}}getBarcodeFormat(){return oe.EAN_8}}class Tt extends bt{constructor(){super(...arguments),this.ean13Reader=new le}getBarcodeFormat(){return oe.UPC_A}decode(o,d){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,d,h){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,d,h))}decodeMiddle(o,d,h){return this.ean13Reader.decodeMiddle(o,d,h)}maybeReturnResult(o){let d=o.getText();if(d.charAt(0)==="0"){let h=new de(d.substring(1),null,null,o.getResultPoints(),oe.UPC_A);return o.getResultMetadata()!=null&&h.putAllMetadata(o.getResultMetadata()),h}else throw new se}reset(){this.ean13Reader.reset()}}class us extends bt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,d,h){const y=this.decodeMiddleCounters.map(I=>I);y[0]=0,y[1]=0,y[2]=0,y[3]=0;const b=o.getSize();let j=d[1],S=0;for(let I=0;I<6&&j<b;I++){const V=us.decodeDigit(o,y,j,us.L_AND_G_PATTERNS);h+=String.fromCharCode(48+V%10);for(let K of y)j+=K;V>=10&&(S|=1<<5-I)}let D=us.determineNumSysAndCheckDigit(h,S);return{rowOffset:j,resultString:D}}decodeEnd(o,d){return us.findGuardPatternWithoutCounters(o,d,!0,us.MIDDLE_END_PATTERN)}checkChecksum(o){return bt.checkChecksum(us.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,d){for(let h=0;h<=1;h++)for(let y=0;y<10;y++)if(d===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[h][y]){let b=String.fromCharCode(48+h),j=String.fromCharCode(48+y);return b+o+j}throw se.getNotFoundInstance()}getBarcodeFormat(){return oe.UPC_E}static convertUPCEtoUPCA(o){const d=o.slice(1,7).split("").map(b=>b.charCodeAt(0)),h=new ee;h.append(o.charAt(0));let y=d[5];switch(y){case 0:case 1:case 2:h.appendChars(d,0,2),h.append(y),h.append("0000"),h.appendChars(d,2,3);break;case 3:h.appendChars(d,0,3),h.append("00000"),h.appendChars(d,3,2);break;case 4:h.appendChars(d,0,4),h.append("00000"),h.append(d[4]);break;default:h.appendChars(d,0,5),h.append("0000"),h.append(y);break}return o.length>=8&&h.append(o.charAt(7)),h.toString()}}us.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),us.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ze extends _t{constructor(o){super();let d=o==null?null:o.get(F.POSSIBLE_FORMATS),h=[];n(d)?(h.push(new le),h.push(new Tt),h.push(new ut),h.push(new us)):(d.indexOf(oe.EAN_13)>-1&&h.push(new le),d.indexOf(oe.UPC_A)>-1&&h.push(new Tt),d.indexOf(oe.EAN_8)>-1&&h.push(new ut),d.indexOf(oe.UPC_E)>-1&&h.push(new us)),this.readers=h}decodeRow(o,d,h){for(let y of this.readers)try{const b=y.decodeRow(o,d,h),j=b.getBarcodeFormat()===oe.EAN_13&&b.getText().charAt(0)==="0",S=h==null?null:h.get(F.POSSIBLE_FORMATS),D=S==null||S.includes(oe.UPC_A);if(j&&D){const I=b.getRawBytes(),V=new de(b.getText().substring(1),I,I?I.length:null,b.getResultPoints(),oe.UPC_A);return V.putAllMetadata(b.getResultMetadata()),V}return b}catch{}throw new se}reset(){for(let o of this.readers)o.reset()}}class jt extends _t{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,d){for(let h=0;h<d.length;h++)if(_t.patternMatchVariance(o,d[h],jt.MAX_INDIVIDUAL_VARIANCE)<jt.MAX_AVG_VARIANCE)return h;throw new se}static count(o){return lt.sum(new Int32Array(o))}static increment(o,d){let h=0,y=d[0];for(let b=1;b<o.length;b++)d[b]>y&&(y=d[b],h=b);o[h]++}static decrement(o,d){let h=0,y=d[0];for(let b=1;b<o.length;b++)d[b]<y&&(y=d[b],h=b);o[h]--}static isFinderPattern(o){let d=o[0]+o[1],h=d+o[2]+o[3],y=d/h;if(y>=jt.MIN_FINDER_PATTERN_RATIO&&y<=jt.MAX_FINDER_PATTERN_RATIO){let b=Number.MAX_SAFE_INTEGER,j=Number.MIN_SAFE_INTEGER;for(let S of o)S>j&&(j=S),S<b&&(b=S);return j<10*b}return!1}}jt.MAX_AVG_VARIANCE=.2,jt.MAX_INDIVIDUAL_VARIANCE=.45,jt.MIN_FINDER_PATTERN_RATIO=9.5/12,jt.MAX_FINDER_PATTERN_RATIO=12.5/14;class nn{constructor(o,d){this.value=o,this.checksumPortion=d}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof nn))return!1;const d=o;return this.value===d.value&&this.checksumPortion===d.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ba{constructor(o,d,h,y,b){this.value=o,this.startEnd=d,this.value=o,this.startEnd=d,this.resultPoints=new Array,this.resultPoints.push(new We(h,b)),this.resultPoints.push(new We(y,b))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof ba))return!1;const d=o;return this.value===d.value}hashCode(){return this.value}}class On{constructor(){}static getRSSvalue(o,d,h){let y=0;for(let D of o)y+=D;let b=0,j=0,S=o.length;for(let D=0;D<S-1;D++){let I;for(I=1,j|=1<<D;I<o[D];I++,j&=~(1<<D)){let V=On.combins(y-I-1,S-D-2);if(h&&j===0&&y-I-(S-D-1)>=S-D-1&&(V-=On.combins(y-I-(S-D),S-D-2)),S-D-1>1){let K=0;for(let Z=y-I-(S-D-2);Z>d;Z--)K+=On.combins(y-I-Z-1,S-D-3);V-=K*(S-1-D)}else y-I>d&&V--;b+=V}y-=I}return b}static combins(o,d){let h,y;o-d>d?(y=d,h=o-d):(y=o-d,h=d);let b=1,j=1;for(let S=o;S>h;S--)b*=S,j<=y&&(b/=j,j++);for(;j<=y;)b/=j,j++;return b}}class Kc{static buildBitArray(o){let d=o.length*2-1;o[o.length-1].getRightChar()==null&&(d-=1);let h=12*d,y=new H(h),b=0,S=o[0].getRightChar().getValue();for(let D=11;D>=0;--D)(S&1<<D)!=0&&y.set(b),b++;for(let D=1;D<o.length;++D){let I=o[D],V=I.getLeftChar().getValue();for(let K=11;K>=0;--K)(V&1<<K)!=0&&y.set(b),b++;if(I.getRightChar()!=null){let K=I.getRightChar().getValue();for(let Z=11;Z>=0;--Z)(K&1<<Z)!=0&&y.set(b),b++}}return y}}class Dn{constructor(o,d){d?this.decodedInformation=null:(this.finished=o,this.decodedInformation=d)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class $i{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}class Cs extends $i{constructor(o,d){super(o),this.value=d}getValue(){return this.value}isFNC1(){return this.value===Cs.FNC1}}Cs.FNC1="$";class Wn extends $i{constructor(o,d,h){super(o),h?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=d}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ws extends $i{constructor(o,d,h){if(super(o),d<0||d>10||h<0||h>10)throw new R;this.firstDigit=d,this.secondDigit=h}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ws.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ws.FNC1}isAnyFNC1(){return this.firstDigit===Ws.FNC1||this.secondDigit===Ws.FNC1}}Ws.FNC1=10;class ot{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new se;let d=o.substring(0,2);for(let b of ot.TWO_DIGIT_DATA_LENGTH)if(b[0]===d)return b[1]===ot.VARIABLE_LENGTH?ot.processVariableAI(2,b[2],o):ot.processFixedAI(2,b[1],o);if(o.length<3)throw new se;let h=o.substring(0,3);for(let b of ot.THREE_DIGIT_DATA_LENGTH)if(b[0]===h)return b[1]===ot.VARIABLE_LENGTH?ot.processVariableAI(3,b[2],o):ot.processFixedAI(3,b[1],o);for(let b of ot.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(b[0]===h)return b[1]===ot.VARIABLE_LENGTH?ot.processVariableAI(4,b[2],o):ot.processFixedAI(4,b[1],o);if(o.length<4)throw new se;let y=o.substring(0,4);for(let b of ot.FOUR_DIGIT_DATA_LENGTH)if(b[0]===y)return b[1]===ot.VARIABLE_LENGTH?ot.processVariableAI(4,b[2],o):ot.processFixedAI(4,b[1],o);throw new se}static processFixedAI(o,d,h){if(h.length<o)throw new se;let y=h.substring(0,o);if(h.length<o+d)throw new se;let b=h.substring(o,o+d),j=h.substring(o+d),S="("+y+")"+b,D=ot.parseFieldsInGeneralPurpose(j);return D==null?S:S+D}static processVariableAI(o,d,h){let y=h.substring(0,o),b;h.length<o+d?b=h.length:b=o+d;let j=h.substring(o,b),S=h.substring(b),D="("+y+")"+j,I=ot.parseFieldsInGeneralPurpose(S);return I==null?D:D+I}}ot.VARIABLE_LENGTH=[],ot.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ot.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ot.VARIABLE_LENGTH,20],["22",ot.VARIABLE_LENGTH,29],["30",ot.VARIABLE_LENGTH,8],["37",ot.VARIABLE_LENGTH,8],["90",ot.VARIABLE_LENGTH,30],["91",ot.VARIABLE_LENGTH,30],["92",ot.VARIABLE_LENGTH,30],["93",ot.VARIABLE_LENGTH,30],["94",ot.VARIABLE_LENGTH,30],["95",ot.VARIABLE_LENGTH,30],["96",ot.VARIABLE_LENGTH,30],["97",ot.VARIABLE_LENGTH,3],["98",ot.VARIABLE_LENGTH,30],["99",ot.VARIABLE_LENGTH,30]],ot.THREE_DIGIT_DATA_LENGTH=[["240",ot.VARIABLE_LENGTH,30],["241",ot.VARIABLE_LENGTH,30],["242",ot.VARIABLE_LENGTH,6],["250",ot.VARIABLE_LENGTH,30],["251",ot.VARIABLE_LENGTH,30],["253",ot.VARIABLE_LENGTH,17],["254",ot.VARIABLE_LENGTH,20],["400",ot.VARIABLE_LENGTH,30],["401",ot.VARIABLE_LENGTH,30],["402",17],["403",ot.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ot.VARIABLE_LENGTH,20],["421",ot.VARIABLE_LENGTH,15],["422",3],["423",ot.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ot.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ot.VARIABLE_LENGTH,15],["391",ot.VARIABLE_LENGTH,18],["392",ot.VARIABLE_LENGTH,15],["393",ot.VARIABLE_LENGTH,18],["703",ot.VARIABLE_LENGTH,30]],ot.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ot.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ot.VARIABLE_LENGTH,20],["8003",ot.VARIABLE_LENGTH,30],["8004",ot.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ot.VARIABLE_LENGTH,30],["8008",ot.VARIABLE_LENGTH,12],["8018",18],["8020",ot.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ot.VARIABLE_LENGTH,70],["8200",ot.VARIABLE_LENGTH,70]];class Ks{constructor(o){this.buffer=new ee,this.information=o}decodeAllCodes(o,d){let h=d,y=null;do{let b=this.decodeGeneralPurposeField(h,y),j=ot.parseFieldsInGeneralPurpose(b.getNewString());if(j!=null&&o.append(j),b.isRemaining()?y=""+b.getRemainingValue():y=null,h===b.getNewPosition())break;h=b.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let d=o;d<o+3;++d)if(this.information.get(d))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let b=this.extractNumericValueFromBitArray(o,4);return b===0?new Ws(this.information.getSize(),Ws.FNC1,Ws.FNC1):new Ws(this.information.getSize(),b-1,Ws.FNC1)}let d=this.extractNumericValueFromBitArray(o,7),h=(d-8)/11,y=(d-8)%11;return new Ws(o+7,h,y)}extractNumericValueFromBitArray(o,d){return Ks.extractNumericValueFromBitArray(this.information,o,d)}static extractNumericValueFromBitArray(o,d,h){let y=0;for(let b=0;b<h;++b)o.get(d+b)&&(y|=1<<h-b-1);return y}decodeGeneralPurposeField(o,d){this.buffer.setLengthToZero(),d!=null&&this.buffer.append(d),this.current.setPosition(o);let h=this.parseBlocks();return h!=null&&h.isRemaining()?new Wn(this.current.getPosition(),this.buffer.toString(),h.getRemainingValue()):new Wn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,d;do{let h=this.current.getPosition();if(this.current.isAlpha()?(d=this.parseAlphaBlock(),o=d.isFinished()):this.current.isIsoIec646()?(d=this.parseIsoIec646Block(),o=d.isFinished()):(d=this.parseNumericBlock(),o=d.isFinished()),!(h!==this.current.getPosition())&&!o)break}while(!o);return d.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let d;return o.isSecondDigitFNC1()?d=new Wn(this.current.getPosition(),this.buffer.toString()):d=new Wn(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new Dn(!0,d)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let d=new Wn(this.current.getPosition(),this.buffer.toString());return new Dn(!0,d)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Dn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let d=new Wn(this.current.getPosition(),this.buffer.toString());return new Dn(!0,d)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Dn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let d=new Wn(this.current.getPosition(),this.buffer.toString());return new Dn(!0,d)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Dn(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(o,5);if(d>=5&&d<16)return!0;if(o+7>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(o,7);if(h>=64&&h<116)return!0;if(o+8>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(o,8);return y>=232&&y<253}decodeIsoIec646(o){let d=this.extractNumericValueFromBitArray(o,5);if(d===15)return new Cs(o+5,Cs.FNC1);if(d>=5&&d<15)return new Cs(o+5,"0"+(d-5));let h=this.extractNumericValueFromBitArray(o,7);if(h>=64&&h<90)return new Cs(o+7,""+(h+1));if(h>=90&&h<116)return new Cs(o+7,""+(h+7));let y=this.extractNumericValueFromBitArray(o,8),b;switch(y){case 232:b="!";break;case 233:b='"';break;case 234:b="%";break;case 235:b="&";break;case 236:b="'";break;case 237:b="(";break;case 238:b=")";break;case 239:b="*";break;case 240:b="+";break;case 241:b=",";break;case 242:b="-";break;case 243:b=".";break;case 244:b="/";break;case 245:b=":";break;case 246:b=";";break;case 247:b="<";break;case 248:b="=";break;case 249:b=">";break;case 250:b="?";break;case 251:b="_";break;case 252:b=" ";break;default:throw new R}return new Cs(o+8,b)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(o,5);if(d>=5&&d<16)return!0;if(o+6>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(o,6);return h>=16&&h<63}decodeAlphanumeric(o){let d=this.extractNumericValueFromBitArray(o,5);if(d===15)return new Cs(o+5,Cs.FNC1);if(d>=5&&d<15)return new Cs(o+5,"0"+(d-5));let h=this.extractNumericValueFromBitArray(o,6);if(h>=32&&h<58)return new Cs(o+6,""+(h+33));let y;switch(h){case 58:y="*";break;case 59:y=",";break;case 60:y="-";break;case 61:y=".";break;case 62:y="/";break;default:throw new ue("Decoding invalid alphanumeric value: "+h)}return new Cs(o+6,y)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let d=0;d<5&&d+o<this.information.getSize();++d)if(d===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+d))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let d=o;d<o+3;++d)if(this.information.get(d))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let d=0;d<4&&d+o<this.information.getSize();++d)if(this.information.get(o+d))return!1;return!0}}class Zr{constructor(o){this.information=o,this.generalDecoder=new Ks(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class sr extends Zr{constructor(o){super(o)}encodeCompressedGtin(o,d){o.append("(01)");let h=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,d,h)}encodeCompressedGtinWithoutAI(o,d,h){for(let y=0;y<4;++y){let b=this.getGeneralDecoder().extractNumericValueFromBitArray(d+10*y,10);b/100===0&&o.append("0"),b/10===0&&o.append("0"),o.append(b)}sr.appendCheckDigit(o,h)}static appendCheckDigit(o,d){let h=0;for(let y=0;y<13;y++){let b=o.charAt(y+d).charCodeAt(0)-48;h+=(y&1)===0?3*b:b}h=10-h%10,h===10&&(h=0),o.append(h)}}sr.GTIN_SIZE=40;class vn extends sr{constructor(o){super(o)}parseInformation(){let o=new ee;o.append("(01)");let d=o.length(),h=this.getGeneralDecoder().extractNumericValueFromBitArray(vn.HEADER_SIZE,4);return o.append(h),this.encodeCompressedGtinWithoutAI(o,vn.HEADER_SIZE+4,d),this.getGeneralDecoder().decodeAllCodes(o,vn.HEADER_SIZE+44)}}vn.HEADER_SIZE=4;class bi extends Zr{constructor(o){super(o)}parseInformation(){let o=new ee;return this.getGeneralDecoder().decodeAllCodes(o,bi.HEADER_SIZE)}}bi.HEADER_SIZE=5;class Ll extends sr{constructor(o){super(o)}encodeCompressedWeight(o,d,h){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(d,h);this.addWeightCode(o,y);let b=this.checkWeight(y),j=1e5;for(let S=0;S<5;++S)b/j===0&&o.append("0"),j/=10;o.append(b)}}class kn extends Ll{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=kn.HEADER_SIZE+Ll.GTIN_SIZE+kn.WEIGHT_SIZE)throw new se;let o=new ee;return this.encodeCompressedGtin(o,kn.HEADER_SIZE),this.encodeCompressedWeight(o,kn.HEADER_SIZE+Ll.GTIN_SIZE,kn.WEIGHT_SIZE),o.toString()}}kn.HEADER_SIZE=5,kn.WEIGHT_SIZE=15;class Zc extends kn{constructor(o){super(o)}addWeightCode(o,d){o.append("(3103)")}checkWeight(o){return o}}class vi extends kn{constructor(o){super(o)}addWeightCode(o,d){d<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}class an extends sr{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<an.HEADER_SIZE+sr.GTIN_SIZE)throw new se;let o=new ee;this.encodeCompressedGtin(o,an.HEADER_SIZE);let d=this.getGeneralDecoder().extractNumericValueFromBitArray(an.HEADER_SIZE+sr.GTIN_SIZE,an.LAST_DIGIT_SIZE);o.append("(392"),o.append(d),o.append(")");let h=this.getGeneralDecoder().decodeGeneralPurposeField(an.HEADER_SIZE+sr.GTIN_SIZE+an.LAST_DIGIT_SIZE,null);return o.append(h.getNewString()),o.toString()}}an.HEADER_SIZE=8,an.LAST_DIGIT_SIZE=2;class $r extends sr{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<$r.HEADER_SIZE+sr.GTIN_SIZE)throw new se;let o=new ee;this.encodeCompressedGtin(o,$r.HEADER_SIZE);let d=this.getGeneralDecoder().extractNumericValueFromBitArray($r.HEADER_SIZE+sr.GTIN_SIZE,$r.LAST_DIGIT_SIZE);o.append("(393"),o.append(d),o.append(")");let h=this.getGeneralDecoder().extractNumericValueFromBitArray($r.HEADER_SIZE+sr.GTIN_SIZE+$r.LAST_DIGIT_SIZE,$r.FIRST_THREE_DIGITS_SIZE);h/100==0&&o.append("0"),h/10==0&&o.append("0"),o.append(h);let y=this.getGeneralDecoder().decodeGeneralPurposeField($r.HEADER_SIZE+sr.GTIN_SIZE+$r.LAST_DIGIT_SIZE+$r.FIRST_THREE_DIGITS_SIZE,null);return o.append(y.getNewString()),o.toString()}}$r.HEADER_SIZE=8,$r.LAST_DIGIT_SIZE=2,$r.FIRST_THREE_DIGITS_SIZE=10;class er extends Ll{constructor(o,d,h){super(o),this.dateCode=h,this.firstAIdigits=d}parseInformation(){if(this.getInformation().getSize()!=er.HEADER_SIZE+er.GTIN_SIZE+er.WEIGHT_SIZE+er.DATE_SIZE)throw new se;let o=new ee;return this.encodeCompressedGtin(o,er.HEADER_SIZE),this.encodeCompressedWeight(o,er.HEADER_SIZE+er.GTIN_SIZE,er.WEIGHT_SIZE),this.encodeCompressedDate(o,er.HEADER_SIZE+er.GTIN_SIZE+er.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,d){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(d,er.DATE_SIZE);if(h==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let y=h%32;h/=32;let b=h%12+1;h/=12;let j=h;j/10==0&&o.append("0"),o.append(j),b/10==0&&o.append("0"),o.append(b),y/10==0&&o.append("0"),o.append(y)}addWeightCode(o,d){o.append("("),o.append(this.firstAIdigits),o.append(d/1e5),o.append(")")}checkWeight(o){return o%1e5}}er.HEADER_SIZE=8,er.WEIGHT_SIZE=20,er.DATE_SIZE=16;function Ve(W){try{if(W.get(1))return new vn(W);if(!W.get(2))return new bi(W);switch(Ks.extractNumericValueFromBitArray(W,1,4)){case 4:return new Zc(W);case 5:return new vi(W)}switch(Ks.extractNumericValueFromBitArray(W,1,5)){case 12:return new an(W);case 13:return new $r(W)}switch(Ks.extractNumericValueFromBitArray(W,1,7)){case 56:return new er(W,"310","11");case 57:return new er(W,"320","11");case 58:return new er(W,"310","13");case 59:return new er(W,"320","13");case 60:return new er(W,"310","15");case 61:return new er(W,"320","15");case 62:return new er(W,"310","17");case 63:return new er(W,"320","17")}}catch(o){throw console.log(o),new ue("unknown decoder: "+W)}}class xt{constructor(o,d,h,y){this.leftchar=o,this.rightchar=d,this.finderpattern=h,this.maybeLast=y}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,d){return o instanceof xt?xt.equalsOrNull(o.leftchar,d.leftchar)&&xt.equalsOrNull(o.rightchar,d.rightchar)&&xt.equalsOrNull(o.finderpattern,d.finderpattern):!1}static equalsOrNull(o,d){return o===null?d===null:xt.equals(o,d)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ur{constructor(o,d,h){this.pairs=o,this.rowNumber=d,this.wasReversed=h}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,d){return o instanceof Ur?this.checkEqualitity(o,d)&&o.wasReversed===d.wasReversed:!1}checkEqualitity(o,d){if(!o||!d)return;let h;return o.forEach((y,b)=>{d.forEach(j=>{y.getLeftChar().getValue()===j.getLeftChar().getValue()&&y.getRightChar().getValue()===j.getRightChar().getValue()&&y.getFinderPatter().getValue()===j.getFinderPatter().getValue()&&(h=!0)})}),h}}class Ke extends jt{constructor(o){super(...arguments),this.pairs=new Array(Ke.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,d,h){this.pairs.length=0,this.startFromEven=!1;try{return Ke.constructResult(this.decodeRow2pairs(o,d))}catch(y){this.verbose&&console.log(y)}return this.pairs.length=0,this.startFromEven=!0,Ke.constructResult(this.decodeRow2pairs(o,d))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,d){let h=!1;for(;!h;)try{this.pairs.push(this.retrieveNextPair(d,this.pairs,o))}catch(b){if(b instanceof se){if(!this.pairs.length)throw new se;h=!0}}if(this.checkChecksum())return this.pairs;let y;if(this.rows.length?y=!0:y=!1,this.storeRow(o,!1),y){let b=this.checkRowsBoolean(!1);if(b!=null||(b=this.checkRowsBoolean(!0),b!=null))return b}throw new se}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let d=null;try{d=this.checkRows(new Array,0)}catch(h){this.verbose&&console.log(h)}return o&&(this.rows=this.rows.reverse()),d}checkRows(o,d){for(let h=d;h<this.rows.length;h++){let y=this.rows[h];this.pairs.length=0;for(let j of o)this.pairs.push(j.getPairs());if(this.pairs.push(y.getPairs()),!Ke.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let b=new Array(o);b.push(y);try{return this.checkRows(b,h+1)}catch(j){this.verbose&&console.log(j)}}throw new se}static isValidSequence(o){for(let d of Ke.FINDER_PATTERN_SEQUENCES){if(o.length>d.length)continue;let h=!0;for(let y=0;y<o.length;y++)if(o[y].getFinderPattern().getValue()!=d[y]){h=!1;break}if(h)return!0}return!1}storeRow(o,d){let h=0,y=!1,b=!1;for(;h<this.rows.length;){let j=this.rows[h];if(j.getRowNumber()>o){b=j.isEquivalent(this.pairs);break}y=j.isEquivalent(this.pairs),h++}b||y||Ke.isPartialRow(this.pairs,this.rows)||(this.rows.push(h,new Ur(this.pairs,o,d)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,d){for(let h of d)if(h.getPairs().length!==o.length){for(let y of h.getPairs())for(let b of o)if(xt.equals(y,b))break}}static isPartialRow(o,d){for(let h of d){let y=!0;for(let b of o){let j=!1;for(let S of h.getPairs())if(b.equals(S)){j=!0;break}if(!j){y=!1;break}}if(y)return!0}return!1}getRows(){return this.rows}static constructResult(o){let d=Kc.buildBitArray(o),y=Ve(d).parseInformation(),b=o[0].getFinderPattern().getResultPoints(),j=o[o.length-1].getFinderPattern().getResultPoints(),S=[b[0],b[1],j[0],j[1]];return new de(y,null,null,S,oe.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),d=o.getLeftChar(),h=o.getRightChar();if(h==null)return!1;let y=h.getChecksumPortion(),b=2;for(let S=1;S<this.pairs.size();++S){let D=this.pairs.get(S);y+=D.getLeftChar().getChecksumPortion(),b++;let I=D.getRightChar();I!=null&&(y+=I.getChecksumPortion(),b++)}return y%=211,211*(b-4)+y==d.getValue()}static getNextSecondBar(o,d){let h;return o.get(d)?(h=o.getNextUnset(d),h=o.getNextSet(h)):(h=o.getNextSet(d),h=o.getNextUnset(h)),h}retrieveNextPair(o,d,h){let y=d.length%2==0;this.startFromEven&&(y=!y);let b,j=!0,S=-1;do this.findNextPair(o,d,S),b=this.parseFoundFinderPattern(o,h,y),b==null?S=Ke.getNextSecondBar(o,this.startEnd[0]):j=!1;while(j);let D=this.decodeDataCharacter(o,b,y,!0);if(!this.isEmptyPair(d)&&d[d.length-1].mustBeLast())throw new se;let I;try{I=this.decodeDataCharacter(o,b,y,!1)}catch(V){I=null,this.verbose&&console.log(V)}return new xt(D,I,b,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,d,h){let y=this.getDecodeFinderCounters();y[0]=0,y[1]=0,y[2]=0,y[3]=0;let b=o.getSize(),j;h>=0?j=h:this.isEmptyPair(d)?j=0:j=d[d.length-1].getFinderPattern().getStartEnd()[1];let S=d.length%2!=0;this.startFromEven&&(S=!S);let D=!1;for(;j<b&&(D=!o.get(j),!!D);)j++;let I=0,V=j;for(let K=j;K<b;K++)if(o.get(K)!=D)y[I]++;else{if(I==3){if(S&&Ke.reverseCounters(y),Ke.isFinderPattern(y)){this.startEnd[0]=V,this.startEnd[1]=K;return}S&&Ke.reverseCounters(y),V+=y[0]+y[1],y[0]=y[2],y[1]=y[3],y[2]=0,y[3]=0,I--}else I++;y[I]=1,D=!D}throw new se}static reverseCounters(o){let d=o.length;for(let h=0;h<d/2;++h){let y=o[h];o[h]=o[d-h-1],o[d-h-1]=y}}parseFoundFinderPattern(o,d,h){let y,b,j;if(h){let I=this.startEnd[0]-1;for(;I>=0&&!o.get(I);)I--;I++,y=this.startEnd[0]-I,b=I,j=this.startEnd[1]}else b=this.startEnd[0],j=o.getNextUnset(this.startEnd[1]+1),y=j-this.startEnd[1];let S=this.getDecodeFinderCounters();k.arraycopy(S,0,S,1,S.length-1),S[0]=y;let D;try{D=this.parseFinderValue(S,Ke.FINDER_PATTERNS)}catch{return null}return new ba(D,[b,j],b,j,d)}decodeDataCharacter(o,d,h,y){let b=this.getDataCharacterCounters();for(let yr=0;yr<b.length;yr++)b[yr]=0;if(y)Ke.recordPatternInReverse(o,d.getStartEnd()[0],b);else{Ke.recordPattern(o,d.getStartEnd()[1],b);for(let yr=0,Us=b.length-1;yr<Us;yr++,Us--){let jn=b[yr];b[yr]=b[Us],b[Us]=jn}}let j=17,S=lt.sum(new Int32Array(b))/j,D=(d.getStartEnd()[1]-d.getStartEnd()[0])/15;if(Math.abs(S-D)/D>.3)throw new se;let I=this.getOddCounts(),V=this.getEvenCounts(),K=this.getOddRoundingErrors(),Z=this.getEvenRoundingErrors();for(let yr=0;yr<b.length;yr++){let Us=1*b[yr]/S,jn=Us+.5;if(jn<1){if(Us<.3)throw new se;jn=1}else if(jn>8){if(Us>8.7)throw new se;jn=8}let Wl=yr/2;(yr&1)==0?(I[Wl]=jn,K[Wl]=Us-jn):(V[Wl]=jn,Z[Wl]=Us-jn)}this.adjustOddEvenCounts(j);let ie=4*d.getValue()+(h?0:2)+(y?0:1)-1,me=0,xe=0;for(let yr=I.length-1;yr>=0;yr--){if(Ke.isNotA1left(d,h,y)){let Us=Ke.WEIGHTS[ie][2*yr];xe+=I[yr]*Us}me+=I[yr]}let Ae=0;for(let yr=V.length-1;yr>=0;yr--)if(Ke.isNotA1left(d,h,y)){let Us=Ke.WEIGHTS[ie][2*yr+1];Ae+=V[yr]*Us}let Pe=xe+Ae;if((me&1)!=0||me>13||me<4)throw new se;let rt=(13-me)/2,et=Ke.SYMBOL_WIDEST[rt],Ze=9-et,$t=On.getRSSvalue(I,et,!0),Pt=On.getRSSvalue(V,Ze,!1),ds=Ke.EVEN_TOTAL_SUBSET[rt],In=Ke.GSUM[rt],ln=$t*ds+Pt+In;return new nn(ln,Pe)}static isNotA1left(o,d,h){return!(o.getValue()==0&&d&&h)}adjustOddEvenCounts(o){let d=lt.sum(new Int32Array(this.getOddCounts())),h=lt.sum(new Int32Array(this.getEvenCounts())),y=!1,b=!1;d>13?b=!0:d<4&&(y=!0);let j=!1,S=!1;h>13?S=!0:h<4&&(j=!0);let D=d+h-o,I=(d&1)==1,V=(h&1)==0;if(D==1)if(I){if(V)throw new se;b=!0}else{if(!V)throw new se;S=!0}else if(D==-1)if(I){if(V)throw new se;y=!0}else{if(!V)throw new se;j=!0}else if(D==0){if(I){if(!V)throw new se;d<h?(y=!0,S=!0):(b=!0,j=!0)}else if(V)throw new se}else throw new se;if(y){if(b)throw new se;Ke.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(b&&Ke.decrement(this.getOddCounts(),this.getOddRoundingErrors()),j){if(S)throw new se;Ke.increment(this.getEvenCounts(),this.getOddRoundingErrors())}S&&Ke.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ke.SYMBOL_WIDEST=[7,5,4,3,1],Ke.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ke.GSUM=[0,348,1388,2948,3988],Ke.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ke.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ke.FINDER_PAT_A=0,Ke.FINDER_PAT_B=1,Ke.FINDER_PAT_C=2,Ke.FINDER_PAT_D=3,Ke.FINDER_PAT_E=4,Ke.FINDER_PAT_F=5,Ke.FINDER_PATTERN_SEQUENCES=[[Ke.FINDER_PAT_A,Ke.FINDER_PAT_A],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_B,Ke.FINDER_PAT_B],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_C,Ke.FINDER_PAT_B,Ke.FINDER_PAT_D],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_E,Ke.FINDER_PAT_B,Ke.FINDER_PAT_D,Ke.FINDER_PAT_C],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_E,Ke.FINDER_PAT_B,Ke.FINDER_PAT_D,Ke.FINDER_PAT_D,Ke.FINDER_PAT_F],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_E,Ke.FINDER_PAT_B,Ke.FINDER_PAT_D,Ke.FINDER_PAT_E,Ke.FINDER_PAT_F,Ke.FINDER_PAT_F],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_A,Ke.FINDER_PAT_B,Ke.FINDER_PAT_B,Ke.FINDER_PAT_C,Ke.FINDER_PAT_C,Ke.FINDER_PAT_D,Ke.FINDER_PAT_D],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_A,Ke.FINDER_PAT_B,Ke.FINDER_PAT_B,Ke.FINDER_PAT_C,Ke.FINDER_PAT_C,Ke.FINDER_PAT_D,Ke.FINDER_PAT_E,Ke.FINDER_PAT_E],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_A,Ke.FINDER_PAT_B,Ke.FINDER_PAT_B,Ke.FINDER_PAT_C,Ke.FINDER_PAT_C,Ke.FINDER_PAT_D,Ke.FINDER_PAT_E,Ke.FINDER_PAT_F,Ke.FINDER_PAT_F],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_A,Ke.FINDER_PAT_B,Ke.FINDER_PAT_B,Ke.FINDER_PAT_C,Ke.FINDER_PAT_D,Ke.FINDER_PAT_D,Ke.FINDER_PAT_E,Ke.FINDER_PAT_E,Ke.FINDER_PAT_F,Ke.FINDER_PAT_F]],Ke.MAX_PAIRS=11;class m0 extends nn{constructor(o,d,h){super(o,d),this.count=0,this.finderPattern=h}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class xr extends jt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,d,h){const y=this.decodePair(d,!1,o,h);xr.addOrTally(this.possibleLeftPairs,y),d.reverse();let b=this.decodePair(d,!0,o,h);xr.addOrTally(this.possibleRightPairs,b),d.reverse();for(let j of this.possibleLeftPairs)if(j.getCount()>1){for(let S of this.possibleRightPairs)if(S.getCount()>1&&xr.checkChecksum(j,S))return xr.constructResult(j,S)}throw new se}static addOrTally(o,d){if(d==null)return;let h=!1;for(let y of o)if(y.getValue()===d.getValue()){y.incrementCount(),h=!0;break}h||o.push(d)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,d){let h=4537077*o.getValue()+d.getValue(),y=new String(h).toString(),b=new ee;for(let I=13-y.length;I>0;I--)b.append("0");b.append(y);let j=0;for(let I=0;I<13;I++){let V=b.charAt(I).charCodeAt(0)-48;j+=(I&1)===0?3*V:V}j=10-j%10,j===10&&(j=0),b.append(j.toString());let S=o.getFinderPattern().getResultPoints(),D=d.getFinderPattern().getResultPoints();return new de(b.toString(),null,0,[S[0],S[1],D[0],D[1]],oe.RSS_14,new Date().getTime())}static checkChecksum(o,d){let h=(o.getChecksumPortion()+16*d.getChecksumPortion())%79,y=9*o.getFinderPattern().getValue()+d.getFinderPattern().getValue();return y>72&&y--,y>8&&y--,h===y}decodePair(o,d,h,y){try{let b=this.findFinderPattern(o,d),j=this.parseFoundFinderPattern(o,h,d,b),S=y==null?null:y.get(F.NEED_RESULT_POINT_CALLBACK);if(S!=null){let V=(b[0]+b[1])/2;d&&(V=o.getSize()-1-V),S.foundPossibleResultPoint(new We(V,h))}let D=this.decodeDataCharacter(o,j,!0),I=this.decodeDataCharacter(o,j,!1);return new m0(1597*D.getValue()+I.getValue(),D.getChecksumPortion()+4*I.getChecksumPortion(),j)}catch{return null}}decodeDataCharacter(o,d,h){let y=this.getDataCharacterCounters();for(let Ae=0;Ae<y.length;Ae++)y[Ae]=0;if(h)_t.recordPatternInReverse(o,d.getStartEnd()[0],y);else{_t.recordPattern(o,d.getStartEnd()[1]+1,y);for(let Ae=0,Pe=y.length-1;Ae<Pe;Ae++,Pe--){let rt=y[Ae];y[Ae]=y[Pe],y[Pe]=rt}}let b=h?16:15,j=lt.sum(new Int32Array(y))/b,S=this.getOddCounts(),D=this.getEvenCounts(),I=this.getOddRoundingErrors(),V=this.getEvenRoundingErrors();for(let Ae=0;Ae<y.length;Ae++){let Pe=y[Ae]/j,rt=Math.floor(Pe+.5);rt<1?rt=1:rt>8&&(rt=8);let et=Math.floor(Ae/2);(Ae&1)===0?(S[et]=rt,I[et]=Pe-rt):(D[et]=rt,V[et]=Pe-rt)}this.adjustOddEvenCounts(h,b);let K=0,Z=0;for(let Ae=S.length-1;Ae>=0;Ae--)Z*=9,Z+=S[Ae],K+=S[Ae];let ie=0,me=0;for(let Ae=D.length-1;Ae>=0;Ae--)ie*=9,ie+=D[Ae],me+=D[Ae];let xe=Z+3*ie;if(h){if((K&1)!==0||K>12||K<4)throw new se;let Ae=(12-K)/2,Pe=xr.OUTSIDE_ODD_WIDEST[Ae],rt=9-Pe,et=On.getRSSvalue(S,Pe,!1),Ze=On.getRSSvalue(D,rt,!0),$t=xr.OUTSIDE_EVEN_TOTAL_SUBSET[Ae],Pt=xr.OUTSIDE_GSUM[Ae];return new nn(et*$t+Ze+Pt,xe)}else{if((me&1)!==0||me>10||me<4)throw new se;let Ae=(10-me)/2,Pe=xr.INSIDE_ODD_WIDEST[Ae],rt=9-Pe,et=On.getRSSvalue(S,Pe,!0),Ze=On.getRSSvalue(D,rt,!1),$t=xr.INSIDE_ODD_TOTAL_SUBSET[Ae],Pt=xr.INSIDE_GSUM[Ae];return new nn(Ze*$t+et+Pt,xe)}}findFinderPattern(o,d){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let y=o.getSize(),b=!1,j=0;for(;j<y&&(b=!o.get(j),d!==b);)j++;let S=0,D=j;for(let I=j;I<y;I++)if(o.get(I)!==b)h[S]++;else{if(S===3){if(jt.isFinderPattern(h))return[D,I];D+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,S--}else S++;h[S]=1,b=!b}throw new se}parseFoundFinderPattern(o,d,h,y){let b=o.get(y[0]),j=y[0]-1;for(;j>=0&&b!==o.get(j);)j--;j++;const S=y[0]-j,D=this.getDecodeFinderCounters(),I=new Int32Array(D.length);k.arraycopy(D,0,I,1,D.length-1),I[0]=S;const V=this.parseFinderValue(I,xr.FINDER_PATTERNS);let K=j,Z=y[1];return h&&(K=o.getSize()-1-K,Z=o.getSize()-1-Z),new ba(V,[j,y[1]],K,Z,d)}adjustOddEvenCounts(o,d){let h=lt.sum(new Int32Array(this.getOddCounts())),y=lt.sum(new Int32Array(this.getEvenCounts())),b=!1,j=!1,S=!1,D=!1;o?(h>12?j=!0:h<4&&(b=!0),y>12?D=!0:y<4&&(S=!0)):(h>11?j=!0:h<5&&(b=!0),y>10?D=!0:y<4&&(S=!0));let I=h+y-d,V=(h&1)===(o?1:0),K=(y&1)===1;if(I===1)if(V){if(K)throw new se;j=!0}else{if(!K)throw new se;D=!0}else if(I===-1)if(V){if(K)throw new se;b=!0}else{if(!K)throw new se;S=!0}else if(I===0){if(V){if(!K)throw new se;h<y?(b=!0,D=!0):(j=!0,S=!0)}else if(K)throw new se}else throw new se;if(b){if(j)throw new se;jt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(j&&jt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),S){if(D)throw new se;jt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}D&&jt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}xr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],xr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],xr.OUTSIDE_GSUM=[0,161,961,2015,2715],xr.INSIDE_GSUM=[0,336,1036,1516],xr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],xr.INSIDE_ODD_WIDEST=[2,4,6,8],xr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Kn extends _t{constructor(o,d){super(),this.readers=[],this.verbose=d===!0;const h=o?o.get(F.POSSIBLE_FORMATS):null,y=o&&o.get(F.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;h?((h.includes(oe.EAN_13)||h.includes(oe.UPC_A)||h.includes(oe.EAN_8)||h.includes(oe.UPC_E))&&this.readers.push(new ze(o)),h.includes(oe.CODE_39)&&this.readers.push(new Je(y)),h.includes(oe.CODE_128)&&this.readers.push(new ve),h.includes(oe.ITF)&&this.readers.push(new nt),h.includes(oe.RSS_14)&&this.readers.push(new xr),h.includes(oe.RSS_EXPANDED)&&this.readers.push(new Ke(this.verbose))):(this.readers.push(new ze(o)),this.readers.push(new Je),this.readers.push(new ze(o)),this.readers.push(new ve),this.readers.push(new nt),this.readers.push(new xr),this.readers.push(new Ke(this.verbose)))}decodeRow(o,d,h){for(let y=0;y<this.readers.length;y++)try{return this.readers[y].decodeRow(o,d,h)}catch{}throw new se}reset(){this.readers.forEach(o=>o.reset())}}class Kp extends ge{constructor(o=500,d){super(new Kn(d),o,d)}}class nr{constructor(o,d,h){this.ecCodewords=o,this.ecBlocks=[d],h&&this.ecBlocks.push(h)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class tr{constructor(o,d){this.count=o,this.dataCodewords=d}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Yt{constructor(o,d,h,y,b,j){this.versionNumber=o,this.symbolSizeRows=d,this.symbolSizeColumns=h,this.dataRegionSizeRows=y,this.dataRegionSizeColumns=b,this.ecBlocks=j;let S=0;const D=j.getECCodewords(),I=j.getECBlocks();for(let V of I)S+=V.getCount()*(V.getDataCodewords()+D);this.totalCodewords=S}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,d){if((o&1)!==0||(d&1)!==0)throw new R;for(let h of Yt.VERSIONS)if(h.symbolSizeRows===o&&h.symbolSizeColumns===d)return h;throw new R}toString(){return""+this.versionNumber}static buildVersions(){return[new Yt(1,10,10,8,8,new nr(5,new tr(1,3))),new Yt(2,12,12,10,10,new nr(7,new tr(1,5))),new Yt(3,14,14,12,12,new nr(10,new tr(1,8))),new Yt(4,16,16,14,14,new nr(12,new tr(1,12))),new Yt(5,18,18,16,16,new nr(14,new tr(1,18))),new Yt(6,20,20,18,18,new nr(18,new tr(1,22))),new Yt(7,22,22,20,20,new nr(20,new tr(1,30))),new Yt(8,24,24,22,22,new nr(24,new tr(1,36))),new Yt(9,26,26,24,24,new nr(28,new tr(1,44))),new Yt(10,32,32,14,14,new nr(36,new tr(1,62))),new Yt(11,36,36,16,16,new nr(42,new tr(1,86))),new Yt(12,40,40,18,18,new nr(48,new tr(1,114))),new Yt(13,44,44,20,20,new nr(56,new tr(1,144))),new Yt(14,48,48,22,22,new nr(68,new tr(1,174))),new Yt(15,52,52,24,24,new nr(42,new tr(2,102))),new Yt(16,64,64,14,14,new nr(56,new tr(2,140))),new Yt(17,72,72,16,16,new nr(36,new tr(4,92))),new Yt(18,80,80,18,18,new nr(48,new tr(4,114))),new Yt(19,88,88,20,20,new nr(56,new tr(4,144))),new Yt(20,96,96,22,22,new nr(68,new tr(4,174))),new Yt(21,104,104,24,24,new nr(56,new tr(6,136))),new Yt(22,120,120,18,18,new nr(68,new tr(6,175))),new Yt(23,132,132,20,20,new nr(62,new tr(8,163))),new Yt(24,144,144,22,22,new nr(62,new tr(8,156),new tr(2,155))),new Yt(25,8,18,6,16,new nr(7,new tr(1,5))),new Yt(26,8,32,6,14,new nr(11,new tr(1,10))),new Yt(27,12,26,10,24,new nr(14,new tr(1,16))),new Yt(28,12,36,10,16,new nr(18,new tr(1,22))),new Yt(29,16,36,14,16,new nr(24,new tr(1,32))),new Yt(30,16,48,14,22,new nr(28,new tr(1,49)))]}}Yt.VERSIONS=Yt.buildVersions();class Bl{constructor(o){const d=o.getHeight();if(d<8||d>144||(d&1)!==0)throw new R;this.version=Bl.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new ce(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const d=o.getHeight(),h=o.getWidth();return Yt.getVersionForDimensions(d,h)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let d=0,h=4,y=0;const b=this.mappingBitMatrix.getHeight(),j=this.mappingBitMatrix.getWidth();let S=!1,D=!1,I=!1,V=!1;do if(h===b&&y===0&&!S)o[d++]=this.readCorner1(b,j)&255,h-=2,y+=2,S=!0;else if(h===b-2&&y===0&&(j&3)!==0&&!D)o[d++]=this.readCorner2(b,j)&255,h-=2,y+=2,D=!0;else if(h===b+4&&y===2&&(j&7)===0&&!I)o[d++]=this.readCorner3(b,j)&255,h-=2,y+=2,I=!0;else if(h===b-2&&y===0&&(j&7)===4&&!V)o[d++]=this.readCorner4(b,j)&255,h-=2,y+=2,V=!0;else{do h<b&&y>=0&&!this.readMappingMatrix.get(y,h)&&(o[d++]=this.readUtah(h,y,b,j)&255),h-=2,y+=2;while(h>=0&&y<j);h+=1,y+=3;do h>=0&&y<j&&!this.readMappingMatrix.get(y,h)&&(o[d++]=this.readUtah(h,y,b,j)&255),h+=2,y-=2;while(h<b&&y>=0);h+=3,y+=1}while(h<b||y<j);if(d!==this.version.getTotalCodewords())throw new R;return o}readModule(o,d,h,y){return o<0&&(o+=h,d+=4-(h+4&7)),d<0&&(d+=y,o+=4-(y+4&7)),this.readMappingMatrix.set(d,o),this.mappingBitMatrix.get(d,o)}readUtah(o,d,h,y){let b=0;return this.readModule(o-2,d-2,h,y)&&(b|=1),b<<=1,this.readModule(o-2,d-1,h,y)&&(b|=1),b<<=1,this.readModule(o-1,d-2,h,y)&&(b|=1),b<<=1,this.readModule(o-1,d-1,h,y)&&(b|=1),b<<=1,this.readModule(o-1,d,h,y)&&(b|=1),b<<=1,this.readModule(o,d-2,h,y)&&(b|=1),b<<=1,this.readModule(o,d-1,h,y)&&(b|=1),b<<=1,this.readModule(o,d,h,y)&&(b|=1),b}readCorner1(o,d){let h=0;return this.readModule(o-1,0,o,d)&&(h|=1),h<<=1,this.readModule(o-1,1,o,d)&&(h|=1),h<<=1,this.readModule(o-1,2,o,d)&&(h|=1),h<<=1,this.readModule(0,d-2,o,d)&&(h|=1),h<<=1,this.readModule(0,d-1,o,d)&&(h|=1),h<<=1,this.readModule(1,d-1,o,d)&&(h|=1),h<<=1,this.readModule(2,d-1,o,d)&&(h|=1),h<<=1,this.readModule(3,d-1,o,d)&&(h|=1),h}readCorner2(o,d){let h=0;return this.readModule(o-3,0,o,d)&&(h|=1),h<<=1,this.readModule(o-2,0,o,d)&&(h|=1),h<<=1,this.readModule(o-1,0,o,d)&&(h|=1),h<<=1,this.readModule(0,d-4,o,d)&&(h|=1),h<<=1,this.readModule(0,d-3,o,d)&&(h|=1),h<<=1,this.readModule(0,d-2,o,d)&&(h|=1),h<<=1,this.readModule(0,d-1,o,d)&&(h|=1),h<<=1,this.readModule(1,d-1,o,d)&&(h|=1),h}readCorner3(o,d){let h=0;return this.readModule(o-1,0,o,d)&&(h|=1),h<<=1,this.readModule(o-1,d-1,o,d)&&(h|=1),h<<=1,this.readModule(0,d-3,o,d)&&(h|=1),h<<=1,this.readModule(0,d-2,o,d)&&(h|=1),h<<=1,this.readModule(0,d-1,o,d)&&(h|=1),h<<=1,this.readModule(1,d-3,o,d)&&(h|=1),h<<=1,this.readModule(1,d-2,o,d)&&(h|=1),h<<=1,this.readModule(1,d-1,o,d)&&(h|=1),h}readCorner4(o,d){let h=0;return this.readModule(o-3,0,o,d)&&(h|=1),h<<=1,this.readModule(o-2,0,o,d)&&(h|=1),h<<=1,this.readModule(o-1,0,o,d)&&(h|=1),h<<=1,this.readModule(0,d-2,o,d)&&(h|=1),h<<=1,this.readModule(0,d-1,o,d)&&(h|=1),h<<=1,this.readModule(1,d-1,o,d)&&(h|=1),h<<=1,this.readModule(2,d-1,o,d)&&(h|=1),h<<=1,this.readModule(3,d-1,o,d)&&(h|=1),h}extractDataRegion(o){const d=this.version.getSymbolSizeRows(),h=this.version.getSymbolSizeColumns();if(o.getHeight()!==d)throw new v("Dimension of bitMatrix must match the version size");const y=this.version.getDataRegionSizeRows(),b=this.version.getDataRegionSizeColumns(),j=d/y|0,S=h/b|0,D=j*y,I=S*b,V=new ce(I,D);for(let K=0;K<j;++K){const Z=K*y;for(let ie=0;ie<S;++ie){const me=ie*b;for(let xe=0;xe<y;++xe){const Ae=K*(y+2)+1+xe,Pe=Z+xe;for(let rt=0;rt<b;++rt){const et=ie*(b+2)+1+rt;if(o.get(et,Ae)){const Ze=me+rt;V.set(Ze,Pe)}}}}}return V}}class Fl{constructor(o,d){this.numDataCodewords=o,this.codewords=d}static getDataBlocks(o,d){const h=d.getECBlocks();let y=0;const b=h.getECBlocks();for(let xe of b)y+=xe.getCount();const j=new Array(y);let S=0;for(let xe of b)for(let Ae=0;Ae<xe.getCount();Ae++){const Pe=xe.getDataCodewords(),rt=h.getECCodewords()+Pe;j[S++]=new Fl(Pe,new Uint8Array(rt))}const I=j[0].codewords.length-h.getECCodewords(),V=I-1;let K=0;for(let xe=0;xe<V;xe++)for(let Ae=0;Ae<S;Ae++)j[Ae].codewords[xe]=o[K++];const Z=d.getVersionNumber()===24,ie=Z?8:S;for(let xe=0;xe<ie;xe++)j[xe].codewords[I-1]=o[K++];const me=j[0].codewords.length;for(let xe=I;xe<me;xe++)for(let Ae=0;Ae<S;Ae++){const Pe=Z?(Ae+8)%S:Ae,rt=Z&&Pe>7?xe-1:xe;j[Pe].codewords[rt]=o[K++]}if(K!==o.length)throw new v;return j}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Zn{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new v(""+o);let d=0,h=this.bitOffset,y=this.byteOffset;const b=this.bytes;if(h>0){const j=8-h,S=o<j?o:j,D=j-S,I=255>>8-S<<D;d=(b[y]&I)>>D,o-=S,h+=S,h===8&&(h=0,y++)}if(o>0){for(;o>=8;)d=d<<8|b[y]&255,y++,o-=8;if(o>0){const j=8-o,S=255>>j<<j;d=d<<o|(b[y]&S)>>j,h+=o}}return this.bitOffset=h,this.byteOffset=y,d}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ir;(function(W){W[W.PAD_ENCODE=0]="PAD_ENCODE",W[W.ASCII_ENCODE=1]="ASCII_ENCODE",W[W.C40_ENCODE=2]="C40_ENCODE",W[W.TEXT_ENCODE=3]="TEXT_ENCODE",W[W.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",W[W.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",W[W.BASE256_ENCODE=6]="BASE256_ENCODE"})(ir||(ir={}));class Xa{static decode(o){const d=new Zn(o),h=new ee,y=new ee,b=new Array;let j=ir.ASCII_ENCODE;do if(j===ir.ASCII_ENCODE)j=this.decodeAsciiSegment(d,h,y);else{switch(j){case ir.C40_ENCODE:this.decodeC40Segment(d,h);break;case ir.TEXT_ENCODE:this.decodeTextSegment(d,h);break;case ir.ANSIX12_ENCODE:this.decodeAnsiX12Segment(d,h);break;case ir.EDIFACT_ENCODE:this.decodeEdifactSegment(d,h);break;case ir.BASE256_ENCODE:this.decodeBase256Segment(d,h,b);break;default:throw new R}j=ir.ASCII_ENCODE}while(j!==ir.PAD_ENCODE&&d.available()>0);return y.length()>0&&h.append(y.toString()),new Ne(o,h.toString(),b.length===0?null:b,null)}static decodeAsciiSegment(o,d,h){let y=!1;do{let b=o.readBits(8);if(b===0)throw new R;if(b<=128)return y&&(b+=128),d.append(String.fromCharCode(b-1)),ir.ASCII_ENCODE;if(b===129)return ir.PAD_ENCODE;if(b<=229){const j=b-130;j<10&&d.append("0"),d.append(""+j)}else switch(b){case 230:return ir.C40_ENCODE;case 231:return ir.BASE256_ENCODE;case 232:d.append("");break;case 233:case 234:break;case 235:y=!0;break;case 236:d.append("[)>05"),h.insert(0,"");break;case 237:d.append("[)>06"),h.insert(0,"");break;case 238:return ir.ANSIX12_ENCODE;case 239:return ir.TEXT_ENCODE;case 240:return ir.EDIFACT_ENCODE;case 241:break;default:if(b!==254||o.available()!==0)throw new R;break}}while(o.available()>0);return ir.ASCII_ENCODE}static decodeC40Segment(o,d){let h=!1;const y=[];let b=0;do{if(o.available()===8)return;const j=o.readBits(8);if(j===254)return;this.parseTwoBytes(j,o.readBits(8),y);for(let S=0;S<3;S++){const D=y[S];switch(b){case 0:if(D<3)b=D+1;else if(D<this.C40_BASIC_SET_CHARS.length){const I=this.C40_BASIC_SET_CHARS[D];h?(d.append(String.fromCharCode(I.charCodeAt(0)+128)),h=!1):d.append(I)}else throw new R;break;case 1:h?(d.append(String.fromCharCode(D+128)),h=!1):d.append(String.fromCharCode(D)),b=0;break;case 2:if(D<this.C40_SHIFT2_SET_CHARS.length){const I=this.C40_SHIFT2_SET_CHARS[D];h?(d.append(String.fromCharCode(I.charCodeAt(0)+128)),h=!1):d.append(I)}else switch(D){case 27:d.append("");break;case 30:h=!0;break;default:throw new R}b=0;break;case 3:h?(d.append(String.fromCharCode(D+224)),h=!1):d.append(String.fromCharCode(D+96)),b=0;break;default:throw new R}}}while(o.available()>0)}static decodeTextSegment(o,d){let h=!1,y=[],b=0;do{if(o.available()===8)return;const j=o.readBits(8);if(j===254)return;this.parseTwoBytes(j,o.readBits(8),y);for(let S=0;S<3;S++){const D=y[S];switch(b){case 0:if(D<3)b=D+1;else if(D<this.TEXT_BASIC_SET_CHARS.length){const I=this.TEXT_BASIC_SET_CHARS[D];h?(d.append(String.fromCharCode(I.charCodeAt(0)+128)),h=!1):d.append(I)}else throw new R;break;case 1:h?(d.append(String.fromCharCode(D+128)),h=!1):d.append(String.fromCharCode(D)),b=0;break;case 2:if(D<this.TEXT_SHIFT2_SET_CHARS.length){const I=this.TEXT_SHIFT2_SET_CHARS[D];h?(d.append(String.fromCharCode(I.charCodeAt(0)+128)),h=!1):d.append(I)}else switch(D){case 27:d.append("");break;case 30:h=!0;break;default:throw new R}b=0;break;case 3:if(D<this.TEXT_SHIFT3_SET_CHARS.length){const I=this.TEXT_SHIFT3_SET_CHARS[D];h?(d.append(String.fromCharCode(I.charCodeAt(0)+128)),h=!1):d.append(I),b=0}else throw new R;break;default:throw new R}}}while(o.available()>0)}static decodeAnsiX12Segment(o,d){const h=[];do{if(o.available()===8)return;const y=o.readBits(8);if(y===254)return;this.parseTwoBytes(y,o.readBits(8),h);for(let b=0;b<3;b++){const j=h[b];switch(j){case 0:d.append("\r");break;case 1:d.append("*");break;case 2:d.append(">");break;case 3:d.append(" ");break;default:if(j<14)d.append(String.fromCharCode(j+44));else if(j<40)d.append(String.fromCharCode(j+51));else throw new R;break}}}while(o.available()>0)}static parseTwoBytes(o,d,h){let y=(o<<8)+d-1,b=Math.floor(y/1600);h[0]=b,y-=b*1600,b=Math.floor(y/40),h[1]=b,h[2]=y-b*40}static decodeEdifactSegment(o,d){do{if(o.available()<=16)return;for(let h=0;h<4;h++){let y=o.readBits(6);if(y===31){const b=8-o.getBitOffset();b!==8&&o.readBits(b);return}(y&32)===0&&(y|=64),d.append(String.fromCharCode(y))}}while(o.available()>0)}static decodeBase256Segment(o,d,h){let y=1+o.getByteOffset();const b=this.unrandomize255State(o.readBits(8),y++);let j;if(b===0?j=o.available()/8|0:b<250?j=b:j=250*(b-249)+this.unrandomize255State(o.readBits(8),y++),j<0)throw new R;const S=new Uint8Array(j);for(let D=0;D<j;D++){if(o.available()<8)throw new R;S[D]=this.unrandomize255State(o.readBits(8),y++)}h.push(S);try{d.append($.decode(S,G.ISO88591))}catch(D){throw new ue("Platform does not support required encoding: "+D.message)}}static unrandomize255State(o,d){const h=149*d%255+1,y=o-h;return y>=0?y:y+256}}Xa.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Xa.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Xa.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Xa.TEXT_SHIFT2_SET_CHARS=Xa.C40_SHIFT2_SET_CHARS,Xa.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Zp{constructor(){this.rsDecoder=new He(we.DATA_MATRIX_FIELD_256)}decode(o){const d=new Bl(o),h=d.getVersion(),y=d.readCodewords(),b=Fl.getDataBlocks(y,h);let j=0;for(let I of b)j+=I.getNumDataCodewords();const S=new Uint8Array(j),D=b.length;for(let I=0;I<D;I++){const V=b[I],K=V.getCodewords(),Z=V.getNumDataCodewords();this.correctErrors(K,Z);for(let ie=0;ie<Z;ie++)S[ie*D+I]=K[ie]}return Xa.decode(S)}correctErrors(o,d){const h=new Int32Array(o);try{this.rsDecoder.decode(h,o.length-d)}catch{throw new T}for(let y=0;y<d;y++)o[y]=h[y]}}class qr{constructor(o){this.image=o,this.rectangleDetector=new ft(this.image)}detect(){const o=this.rectangleDetector.detect();let d=this.detectSolid1(o);if(d=this.detectSolid2(d),d[3]=this.correctTopRight(d),!d[3])throw new se;d=this.shiftToModuleCenter(d);const h=d[0],y=d[1],b=d[2],j=d[3];let S=this.transitionsBetween(h,j)+1,D=this.transitionsBetween(b,j)+1;(S&1)===1&&(S+=1),(D&1)===1&&(D+=1),4*S<7*D&&4*D<7*S&&(S=D=Math.max(S,D));let I=qr.sampleGrid(this.image,h,y,b,j,S,D);return new at(I,[h,y,b,j])}static shiftPoint(o,d,h){let y=(d.getX()-o.getX())/(h+1),b=(d.getY()-o.getY())/(h+1);return new We(o.getX()+y,o.getY()+b)}static moveAway(o,d,h){let y=o.getX(),b=o.getY();return y<d?y-=1:y+=1,b<h?b-=1:b+=1,new We(y,b)}detectSolid1(o){let d=o[0],h=o[1],y=o[3],b=o[2],j=this.transitionsBetween(d,h),S=this.transitionsBetween(h,y),D=this.transitionsBetween(y,b),I=this.transitionsBetween(b,d),V=j,K=[b,d,h,y];return V>S&&(V=S,K[0]=d,K[1]=h,K[2]=y,K[3]=b),V>D&&(V=D,K[0]=h,K[1]=y,K[2]=b,K[3]=d),V>I&&(K[0]=y,K[1]=b,K[2]=d,K[3]=h),K}detectSolid2(o){let d=o[0],h=o[1],y=o[2],b=o[3],j=this.transitionsBetween(d,b),S=qr.shiftPoint(h,y,(j+1)*4),D=qr.shiftPoint(y,h,(j+1)*4),I=this.transitionsBetween(S,d),V=this.transitionsBetween(D,b);return I<V?(o[0]=d,o[1]=h,o[2]=y,o[3]=b):(o[0]=h,o[1]=y,o[2]=b,o[3]=d),o}correctTopRight(o){let d=o[0],h=o[1],y=o[2],b=o[3],j=this.transitionsBetween(d,b),S=this.transitionsBetween(h,b),D=qr.shiftPoint(d,h,(S+1)*4),I=qr.shiftPoint(y,h,(j+1)*4);j=this.transitionsBetween(D,b),S=this.transitionsBetween(I,b);let V=new We(b.getX()+(y.getX()-h.getX())/(j+1),b.getY()+(y.getY()-h.getY())/(j+1)),K=new We(b.getX()+(d.getX()-h.getX())/(S+1),b.getY()+(d.getY()-h.getY())/(S+1));if(!this.isValid(V))return this.isValid(K)?K:null;if(!this.isValid(K))return V;let Z=this.transitionsBetween(D,V)+this.transitionsBetween(I,V),ie=this.transitionsBetween(D,K)+this.transitionsBetween(I,K);return Z>ie?V:K}shiftToModuleCenter(o){let d=o[0],h=o[1],y=o[2],b=o[3],j=this.transitionsBetween(d,b)+1,S=this.transitionsBetween(y,b)+1,D=qr.shiftPoint(d,h,S*4),I=qr.shiftPoint(y,h,j*4);j=this.transitionsBetween(D,b)+1,S=this.transitionsBetween(I,b)+1,(j&1)===1&&(j+=1),(S&1)===1&&(S+=1);let V=(d.getX()+h.getX()+y.getX()+b.getX())/4,K=(d.getY()+h.getY()+y.getY()+b.getY())/4;d=qr.moveAway(d,V,K),h=qr.moveAway(h,V,K),y=qr.moveAway(y,V,K),b=qr.moveAway(b,V,K);let Z,ie;return D=qr.shiftPoint(d,h,S*4),D=qr.shiftPoint(D,b,j*4),Z=qr.shiftPoint(h,d,S*4),Z=qr.shiftPoint(Z,y,j*4),I=qr.shiftPoint(y,b,S*4),I=qr.shiftPoint(I,h,j*4),ie=qr.shiftPoint(b,y,S*4),ie=qr.shiftPoint(ie,d,j*4),[D,Z,I,ie]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,d,h,y,b,j,S){return ct.getInstance().sampleGrid(o,j,S,.5,.5,j-.5,.5,j-.5,S-.5,.5,S-.5,d.getX(),d.getY(),b.getX(),b.getY(),y.getX(),y.getY(),h.getX(),h.getY())}transitionsBetween(o,d){let h=Math.trunc(o.getX()),y=Math.trunc(o.getY()),b=Math.trunc(d.getX()),j=Math.trunc(d.getY()),S=Math.abs(j-y)>Math.abs(b-h);if(S){let xe=h;h=y,y=xe,xe=b,b=j,j=xe}let D=Math.abs(b-h),I=Math.abs(j-y),V=-D/2,K=y<j?1:-1,Z=h<b?1:-1,ie=0,me=this.image.get(S?y:h,S?h:y);for(let xe=h,Ae=y;xe!==b;xe+=Z){let Pe=this.image.get(S?Ae:xe,S?xe:Ae);if(Pe!==me&&(ie++,me=Pe),V+=I,V>0){if(Ae===j)break;Ae+=K,V-=D}}return ie}}class Wa{constructor(){this.decoder=new Zp}decode(o,d=null){let h,y;if(d!=null&&d.has(F.PURE_BARCODE)){const I=Wa.extractPureBits(o.getBlackMatrix());h=this.decoder.decode(I),y=Wa.NO_POINTS}else{const I=new qr(o.getBlackMatrix()).detect();h=this.decoder.decode(I.getBits()),y=I.getPoints()}const b=h.getRawBytes(),j=new de(h.getText(),b,8*b.length,y,oe.DATA_MATRIX,k.currentTimeMillis()),S=h.getByteSegments();S!=null&&j.putMetadata(qe.BYTE_SEGMENTS,S);const D=h.getECLevel();return D!=null&&j.putMetadata(qe.ERROR_CORRECTION_LEVEL,D),j}reset(){}static extractPureBits(o){const d=o.getTopLeftOnBit(),h=o.getBottomRightOnBit();if(d==null||h==null)throw new se;const y=this.moduleSize(d,o);let b=d[1];const j=h[1];let S=d[0];const I=(h[0]-S+1)/y,V=(j-b+1)/y;if(I<=0||V<=0)throw new se;const K=y/2;b+=K,S+=K;const Z=new ce(I,V);for(let ie=0;ie<V;ie++){const me=b+ie*y;for(let xe=0;xe<I;xe++)o.get(S+xe*y,me)&&Z.set(xe,ie)}return Z}static moduleSize(o,d){const h=d.getWidth();let y=o[0];const b=o[1];for(;y<h&&d.get(y,b);)y++;if(y===h)throw new se;const j=y-o[0];if(j===0)throw new se;return j}}Wa.NO_POINTS=[];class Qc extends ge{constructor(o=500){super(new Wa,o)}}var Ul;(function(W){W[W.L=0]="L",W[W.M=1]="M",W[W.Q=2]="Q",W[W.H=3]="H"})(Ul||(Ul={}));class Ht{constructor(o,d,h){this.value=o,this.stringValue=d,this.bits=h,Ht.FOR_BITS.set(h,this),Ht.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return Ht.L;case"M":return Ht.M;case"Q":return Ht.Q;case"H":return Ht.H;default:throw new p(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof Ht))return!1;const d=o;return this.value===d.value}static forBits(o){if(o<0||o>=Ht.FOR_BITS.size)throw new v;return Ht.FOR_BITS.get(o)}}Ht.FOR_BITS=new Map,Ht.FOR_VALUE=new Map,Ht.L=new Ht(Ul.L,"L",1),Ht.M=new Ht(Ul.M,"M",0),Ht.Q=new Ht(Ul.Q,"Q",3),Ht.H=new Ht(Ul.H,"H",2);class As{constructor(o){this.errorCorrectionLevel=Ht.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,d){return P.bitCount(o^d)}static decodeFormatInformation(o,d){const h=As.doDecodeFormatInformation(o,d);return h!==null?h:As.doDecodeFormatInformation(o^As.FORMAT_INFO_MASK_QR,d^As.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,d){let h=Number.MAX_SAFE_INTEGER,y=0;for(const b of As.FORMAT_INFO_DECODE_LOOKUP){const j=b[0];if(j===o||j===d)return new As(b[1]);let S=As.numBitsDiffering(o,j);S<h&&(y=b[1],h=S),o!==d&&(S=As.numBitsDiffering(d,j),S<h&&(y=b[1],h=S))}return h<=3?new As(y):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof As))return!1;const d=o;return this.errorCorrectionLevel===d.errorCorrectionLevel&&this.dataMask===d.dataMask}}As.FORMAT_INFO_MASK_QR=21522,As.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Oe{constructor(o,...d){this.ecCodewordsPerBlock=o,this.ecBlocks=d}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const d=this.ecBlocks;for(const h of d)o+=h.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ae{constructor(o,d){this.count=o,this.dataCodewords=d}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class yt{constructor(o,d,...h){this.versionNumber=o,this.alignmentPatternCenters=d,this.ecBlocks=h;let y=0;const b=h[0].getECCodewordsPerBlock(),j=h[0].getECBlocks();for(const S of j)y+=S.getCount()*(S.getDataCodewords()+b);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new R;try{return this.getVersionForNumber((o-17)/4)}catch{throw new R}}static getVersionForNumber(o){if(o<1||o>40)throw new v;return yt.VERSIONS[o-1]}static decodeVersionInformation(o){let d=Number.MAX_SAFE_INTEGER,h=0;for(let y=0;y<yt.VERSION_DECODE_INFO.length;y++){const b=yt.VERSION_DECODE_INFO[y];if(b===o)return yt.getVersionForNumber(y+7);const j=As.numBitsDiffering(o,b);j<d&&(h=y+7,d=j)}return d<=3?yt.getVersionForNumber(h):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),d=new ce(o);d.setRegion(0,0,9,9),d.setRegion(o-8,0,8,9),d.setRegion(0,o-8,9,8);const h=this.alignmentPatternCenters.length;for(let y=0;y<h;y++){const b=this.alignmentPatternCenters[y]-2;for(let j=0;j<h;j++)y===0&&(j===0||j===h-1)||y===h-1&&j===0||d.setRegion(this.alignmentPatternCenters[j]-2,b,5,5)}return d.setRegion(6,9,1,o-17),d.setRegion(9,6,o-17,1),this.versionNumber>6&&(d.setRegion(o-11,0,3,6),d.setRegion(0,o-11,6,3)),d}toString(){return""+this.versionNumber}}yt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),yt.VERSIONS=[new yt(1,new Int32Array(0),new Oe(7,new ae(1,19)),new Oe(10,new ae(1,16)),new Oe(13,new ae(1,13)),new Oe(17,new ae(1,9))),new yt(2,Int32Array.from([6,18]),new Oe(10,new ae(1,34)),new Oe(16,new ae(1,28)),new Oe(22,new ae(1,22)),new Oe(28,new ae(1,16))),new yt(3,Int32Array.from([6,22]),new Oe(15,new ae(1,55)),new Oe(26,new ae(1,44)),new Oe(18,new ae(2,17)),new Oe(22,new ae(2,13))),new yt(4,Int32Array.from([6,26]),new Oe(20,new ae(1,80)),new Oe(18,new ae(2,32)),new Oe(26,new ae(2,24)),new Oe(16,new ae(4,9))),new yt(5,Int32Array.from([6,30]),new Oe(26,new ae(1,108)),new Oe(24,new ae(2,43)),new Oe(18,new ae(2,15),new ae(2,16)),new Oe(22,new ae(2,11),new ae(2,12))),new yt(6,Int32Array.from([6,34]),new Oe(18,new ae(2,68)),new Oe(16,new ae(4,27)),new Oe(24,new ae(4,19)),new Oe(28,new ae(4,15))),new yt(7,Int32Array.from([6,22,38]),new Oe(20,new ae(2,78)),new Oe(18,new ae(4,31)),new Oe(18,new ae(2,14),new ae(4,15)),new Oe(26,new ae(4,13),new ae(1,14))),new yt(8,Int32Array.from([6,24,42]),new Oe(24,new ae(2,97)),new Oe(22,new ae(2,38),new ae(2,39)),new Oe(22,new ae(4,18),new ae(2,19)),new Oe(26,new ae(4,14),new ae(2,15))),new yt(9,Int32Array.from([6,26,46]),new Oe(30,new ae(2,116)),new Oe(22,new ae(3,36),new ae(2,37)),new Oe(20,new ae(4,16),new ae(4,17)),new Oe(24,new ae(4,12),new ae(4,13))),new yt(10,Int32Array.from([6,28,50]),new Oe(18,new ae(2,68),new ae(2,69)),new Oe(26,new ae(4,43),new ae(1,44)),new Oe(24,new ae(6,19),new ae(2,20)),new Oe(28,new ae(6,15),new ae(2,16))),new yt(11,Int32Array.from([6,30,54]),new Oe(20,new ae(4,81)),new Oe(30,new ae(1,50),new ae(4,51)),new Oe(28,new ae(4,22),new ae(4,23)),new Oe(24,new ae(3,12),new ae(8,13))),new yt(12,Int32Array.from([6,32,58]),new Oe(24,new ae(2,92),new ae(2,93)),new Oe(22,new ae(6,36),new ae(2,37)),new Oe(26,new ae(4,20),new ae(6,21)),new Oe(28,new ae(7,14),new ae(4,15))),new yt(13,Int32Array.from([6,34,62]),new Oe(26,new ae(4,107)),new Oe(22,new ae(8,37),new ae(1,38)),new Oe(24,new ae(8,20),new ae(4,21)),new Oe(22,new ae(12,11),new ae(4,12))),new yt(14,Int32Array.from([6,26,46,66]),new Oe(30,new ae(3,115),new ae(1,116)),new Oe(24,new ae(4,40),new ae(5,41)),new Oe(20,new ae(11,16),new ae(5,17)),new Oe(24,new ae(11,12),new ae(5,13))),new yt(15,Int32Array.from([6,26,48,70]),new Oe(22,new ae(5,87),new ae(1,88)),new Oe(24,new ae(5,41),new ae(5,42)),new Oe(30,new ae(5,24),new ae(7,25)),new Oe(24,new ae(11,12),new ae(7,13))),new yt(16,Int32Array.from([6,26,50,74]),new Oe(24,new ae(5,98),new ae(1,99)),new Oe(28,new ae(7,45),new ae(3,46)),new Oe(24,new ae(15,19),new ae(2,20)),new Oe(30,new ae(3,15),new ae(13,16))),new yt(17,Int32Array.from([6,30,54,78]),new Oe(28,new ae(1,107),new ae(5,108)),new Oe(28,new ae(10,46),new ae(1,47)),new Oe(28,new ae(1,22),new ae(15,23)),new Oe(28,new ae(2,14),new ae(17,15))),new yt(18,Int32Array.from([6,30,56,82]),new Oe(30,new ae(5,120),new ae(1,121)),new Oe(26,new ae(9,43),new ae(4,44)),new Oe(28,new ae(17,22),new ae(1,23)),new Oe(28,new ae(2,14),new ae(19,15))),new yt(19,Int32Array.from([6,30,58,86]),new Oe(28,new ae(3,113),new ae(4,114)),new Oe(26,new ae(3,44),new ae(11,45)),new Oe(26,new ae(17,21),new ae(4,22)),new Oe(26,new ae(9,13),new ae(16,14))),new yt(20,Int32Array.from([6,34,62,90]),new Oe(28,new ae(3,107),new ae(5,108)),new Oe(26,new ae(3,41),new ae(13,42)),new Oe(30,new ae(15,24),new ae(5,25)),new Oe(28,new ae(15,15),new ae(10,16))),new yt(21,Int32Array.from([6,28,50,72,94]),new Oe(28,new ae(4,116),new ae(4,117)),new Oe(26,new ae(17,42)),new Oe(28,new ae(17,22),new ae(6,23)),new Oe(30,new ae(19,16),new ae(6,17))),new yt(22,Int32Array.from([6,26,50,74,98]),new Oe(28,new ae(2,111),new ae(7,112)),new Oe(28,new ae(17,46)),new Oe(30,new ae(7,24),new ae(16,25)),new Oe(24,new ae(34,13))),new yt(23,Int32Array.from([6,30,54,78,102]),new Oe(30,new ae(4,121),new ae(5,122)),new Oe(28,new ae(4,47),new ae(14,48)),new Oe(30,new ae(11,24),new ae(14,25)),new Oe(30,new ae(16,15),new ae(14,16))),new yt(24,Int32Array.from([6,28,54,80,106]),new Oe(30,new ae(6,117),new ae(4,118)),new Oe(28,new ae(6,45),new ae(14,46)),new Oe(30,new ae(11,24),new ae(16,25)),new Oe(30,new ae(30,16),new ae(2,17))),new yt(25,Int32Array.from([6,32,58,84,110]),new Oe(26,new ae(8,106),new ae(4,107)),new Oe(28,new ae(8,47),new ae(13,48)),new Oe(30,new ae(7,24),new ae(22,25)),new Oe(30,new ae(22,15),new ae(13,16))),new yt(26,Int32Array.from([6,30,58,86,114]),new Oe(28,new ae(10,114),new ae(2,115)),new Oe(28,new ae(19,46),new ae(4,47)),new Oe(28,new ae(28,22),new ae(6,23)),new Oe(30,new ae(33,16),new ae(4,17))),new yt(27,Int32Array.from([6,34,62,90,118]),new Oe(30,new ae(8,122),new ae(4,123)),new Oe(28,new ae(22,45),new ae(3,46)),new Oe(30,new ae(8,23),new ae(26,24)),new Oe(30,new ae(12,15),new ae(28,16))),new yt(28,Int32Array.from([6,26,50,74,98,122]),new Oe(30,new ae(3,117),new ae(10,118)),new Oe(28,new ae(3,45),new ae(23,46)),new Oe(30,new ae(4,24),new ae(31,25)),new Oe(30,new ae(11,15),new ae(31,16))),new yt(29,Int32Array.from([6,30,54,78,102,126]),new Oe(30,new ae(7,116),new ae(7,117)),new Oe(28,new ae(21,45),new ae(7,46)),new Oe(30,new ae(1,23),new ae(37,24)),new Oe(30,new ae(19,15),new ae(26,16))),new yt(30,Int32Array.from([6,26,52,78,104,130]),new Oe(30,new ae(5,115),new ae(10,116)),new Oe(28,new ae(19,47),new ae(10,48)),new Oe(30,new ae(15,24),new ae(25,25)),new Oe(30,new ae(23,15),new ae(25,16))),new yt(31,Int32Array.from([6,30,56,82,108,134]),new Oe(30,new ae(13,115),new ae(3,116)),new Oe(28,new ae(2,46),new ae(29,47)),new Oe(30,new ae(42,24),new ae(1,25)),new Oe(30,new ae(23,15),new ae(28,16))),new yt(32,Int32Array.from([6,34,60,86,112,138]),new Oe(30,new ae(17,115)),new Oe(28,new ae(10,46),new ae(23,47)),new Oe(30,new ae(10,24),new ae(35,25)),new Oe(30,new ae(19,15),new ae(35,16))),new yt(33,Int32Array.from([6,30,58,86,114,142]),new Oe(30,new ae(17,115),new ae(1,116)),new Oe(28,new ae(14,46),new ae(21,47)),new Oe(30,new ae(29,24),new ae(19,25)),new Oe(30,new ae(11,15),new ae(46,16))),new yt(34,Int32Array.from([6,34,62,90,118,146]),new Oe(30,new ae(13,115),new ae(6,116)),new Oe(28,new ae(14,46),new ae(23,47)),new Oe(30,new ae(44,24),new ae(7,25)),new Oe(30,new ae(59,16),new ae(1,17))),new yt(35,Int32Array.from([6,30,54,78,102,126,150]),new Oe(30,new ae(12,121),new ae(7,122)),new Oe(28,new ae(12,47),new ae(26,48)),new Oe(30,new ae(39,24),new ae(14,25)),new Oe(30,new ae(22,15),new ae(41,16))),new yt(36,Int32Array.from([6,24,50,76,102,128,154]),new Oe(30,new ae(6,121),new ae(14,122)),new Oe(28,new ae(6,47),new ae(34,48)),new Oe(30,new ae(46,24),new ae(10,25)),new Oe(30,new ae(2,15),new ae(64,16))),new yt(37,Int32Array.from([6,28,54,80,106,132,158]),new Oe(30,new ae(17,122),new ae(4,123)),new Oe(28,new ae(29,46),new ae(14,47)),new Oe(30,new ae(49,24),new ae(10,25)),new Oe(30,new ae(24,15),new ae(46,16))),new yt(38,Int32Array.from([6,32,58,84,110,136,162]),new Oe(30,new ae(4,122),new ae(18,123)),new Oe(28,new ae(13,46),new ae(32,47)),new Oe(30,new ae(48,24),new ae(14,25)),new Oe(30,new ae(42,15),new ae(32,16))),new yt(39,Int32Array.from([6,26,54,82,110,138,166]),new Oe(30,new ae(20,117),new ae(4,118)),new Oe(28,new ae(40,47),new ae(7,48)),new Oe(30,new ae(43,24),new ae(22,25)),new Oe(30,new ae(10,15),new ae(67,16))),new yt(40,Int32Array.from([6,30,58,86,114,142,170]),new Oe(30,new ae(19,118),new ae(6,119)),new Oe(28,new ae(18,47),new ae(31,48)),new Oe(30,new ae(34,24),new ae(34,25)),new Oe(30,new ae(20,15),new ae(61,16)))];var ys;(function(W){W[W.DATA_MASK_000=0]="DATA_MASK_000",W[W.DATA_MASK_001=1]="DATA_MASK_001",W[W.DATA_MASK_010=2]="DATA_MASK_010",W[W.DATA_MASK_011=3]="DATA_MASK_011",W[W.DATA_MASK_100=4]="DATA_MASK_100",W[W.DATA_MASK_101=5]="DATA_MASK_101",W[W.DATA_MASK_110=6]="DATA_MASK_110",W[W.DATA_MASK_111=7]="DATA_MASK_111"})(ys||(ys={}));class Nn{constructor(o,d){this.value=o,this.isMasked=d}unmaskBitMatrix(o,d){for(let h=0;h<d;h++)for(let y=0;y<d;y++)this.isMasked(h,y)&&o.flip(y,h)}}Nn.values=new Map([[ys.DATA_MASK_000,new Nn(ys.DATA_MASK_000,(W,o)=>(W+o&1)===0)],[ys.DATA_MASK_001,new Nn(ys.DATA_MASK_001,(W,o)=>(W&1)===0)],[ys.DATA_MASK_010,new Nn(ys.DATA_MASK_010,(W,o)=>o%3===0)],[ys.DATA_MASK_011,new Nn(ys.DATA_MASK_011,(W,o)=>(W+o)%3===0)],[ys.DATA_MASK_100,new Nn(ys.DATA_MASK_100,(W,o)=>(Math.floor(W/2)+Math.floor(o/3)&1)===0)],[ys.DATA_MASK_101,new Nn(ys.DATA_MASK_101,(W,o)=>W*o%6===0)],[ys.DATA_MASK_110,new Nn(ys.DATA_MASK_110,(W,o)=>W*o%6<3)],[ys.DATA_MASK_111,new Nn(ys.DATA_MASK_111,(W,o)=>(W+o+W*o%3&1)===0)]]);class zl{constructor(o){const d=o.getHeight();if(d<21||(d&3)!==1)throw new R;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let b=0;b<6;b++)o=this.copyBit(b,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let b=5;b>=0;b--)o=this.copyBit(8,b,o);const d=this.bitMatrix.getHeight();let h=0;const y=d-7;for(let b=d-1;b>=y;b--)h=this.copyBit(8,b,h);for(let b=d-8;b<d;b++)h=this.copyBit(b,8,h);if(this.parsedFormatInfo=As.decodeFormatInformation(o,h),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new R}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const o=this.bitMatrix.getHeight(),d=Math.floor((o-17)/4);if(d<=6)return yt.getVersionForNumber(d);let h=0;const y=o-11;for(let j=5;j>=0;j--)for(let S=o-9;S>=y;S--)h=this.copyBit(S,j,h);let b=yt.decodeVersionInformation(h);if(b!==null&&b.getDimensionForVersion()===o)return this.parsedVersion=b,b;h=0;for(let j=5;j>=0;j--)for(let S=o-9;S>=y;S--)h=this.copyBit(j,S,h);if(b=yt.decodeVersionInformation(h),b!==null&&b.getDimensionForVersion()===o)return this.parsedVersion=b,b;throw new R}copyBit(o,d,h){return(this.isMirror?this.bitMatrix.get(d,o):this.bitMatrix.get(o,d))?h<<1|1:h<<1}readCodewords(){const o=this.readFormatInformation(),d=this.readVersion(),h=Nn.values.get(o.getDataMask()),y=this.bitMatrix.getHeight();h.unmaskBitMatrix(this.bitMatrix,y);const b=d.buildFunctionPattern();let j=!0;const S=new Uint8Array(d.getTotalCodewords());let D=0,I=0,V=0;for(let K=y-1;K>0;K-=2){K===6&&K--;for(let Z=0;Z<y;Z++){const ie=j?y-1-Z:Z;for(let me=0;me<2;me++)b.get(K-me,ie)||(V++,I<<=1,this.bitMatrix.get(K-me,ie)&&(I|=1),V===8&&(S[D++]=I,V=0,I=0))}j=!j}if(D!==d.getTotalCodewords())throw new R;return S}remask(){if(this.parsedFormatInfo===null)return;const o=Nn.values[this.parsedFormatInfo.getDataMask()],d=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,d)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let d=0,h=o.getWidth();d<h;d++)for(let y=d+1,b=o.getHeight();y<b;y++)o.get(d,y)!==o.get(y,d)&&(o.flip(y,d),o.flip(d,y))}}class zd{constructor(o,d){this.numDataCodewords=o,this.codewords=d}static getDataBlocks(o,d,h){if(o.length!==d.getTotalCodewords())throw new v;const y=d.getECBlocksForLevel(h);let b=0;const j=y.getECBlocks();for(const me of j)b+=me.getCount();const S=new Array(b);let D=0;for(const me of j)for(let xe=0;xe<me.getCount();xe++){const Ae=me.getDataCodewords(),Pe=y.getECCodewordsPerBlock()+Ae;S[D++]=new zd(Ae,new Uint8Array(Pe))}const I=S[0].codewords.length;let V=S.length-1;for(;V>=0&&S[V].codewords.length!==I;)V--;V++;const K=I-y.getECCodewordsPerBlock();let Z=0;for(let me=0;me<K;me++)for(let xe=0;xe<D;xe++)S[xe].codewords[me]=o[Z++];for(let me=V;me<D;me++)S[me].codewords[K]=o[Z++];const ie=S[0].codewords.length;for(let me=K;me<ie;me++)for(let xe=0;xe<D;xe++){const Ae=xe<V?me:me+1;S[xe].codewords[Ae]=o[Z++]}return S}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var wn;(function(W){W[W.TERMINATOR=0]="TERMINATOR",W[W.NUMERIC=1]="NUMERIC",W[W.ALPHANUMERIC=2]="ALPHANUMERIC",W[W.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",W[W.BYTE=4]="BYTE",W[W.ECI=5]="ECI",W[W.KANJI=6]="KANJI",W[W.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",W[W.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",W[W.HANZI=9]="HANZI"})(wn||(wn={}));class Nt{constructor(o,d,h,y){this.value=o,this.stringValue=d,this.characterCountBitsForVersions=h,this.bits=y,Nt.FOR_BITS.set(y,this),Nt.FOR_VALUE.set(o,this)}static forBits(o){const d=Nt.FOR_BITS.get(o);if(d===void 0)throw new v;return d}getCharacterCountBits(o){const d=o.getVersionNumber();let h;return d<=9?h=0:d<=26?h=1:h=2,this.characterCountBitsForVersions[h]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof Nt))return!1;const d=o;return this.value===d.value}toString(){return this.stringValue}}Nt.FOR_BITS=new Map,Nt.FOR_VALUE=new Map,Nt.TERMINATOR=new Nt(wn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Nt.NUMERIC=new Nt(wn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Nt.ALPHANUMERIC=new Nt(wn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Nt.STRUCTURED_APPEND=new Nt(wn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Nt.BYTE=new Nt(wn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Nt.ECI=new Nt(wn.ECI,"ECI",Int32Array.from([0,0,0]),7),Nt.KANJI=new Nt(wn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Nt.FNC1_FIRST_POSITION=new Nt(wn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Nt.FNC1_SECOND_POSITION=new Nt(wn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Nt.HANZI=new Nt(wn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Pr{static decode(o,d,h,y){const b=new Zn(o);let j=new ee;const S=new Array;let D=-1,I=-1;try{let V=null,K=!1,Z;do{if(b.available()<4)Z=Nt.TERMINATOR;else{const ie=b.readBits(4);Z=Nt.forBits(ie)}switch(Z){case Nt.TERMINATOR:break;case Nt.FNC1_FIRST_POSITION:case Nt.FNC1_SECOND_POSITION:K=!0;break;case Nt.STRUCTURED_APPEND:if(b.available()<16)throw new R;D=b.readBits(8),I=b.readBits(8);break;case Nt.ECI:const ie=Pr.parseECIValue(b);if(V=U.getCharacterSetECIByValue(ie),V===null)throw new R;break;case Nt.HANZI:const me=b.readBits(4),xe=b.readBits(Z.getCharacterCountBits(d));me===Pr.GB2312_SUBSET&&Pr.decodeHanziSegment(b,j,xe);break;default:const Ae=b.readBits(Z.getCharacterCountBits(d));switch(Z){case Nt.NUMERIC:Pr.decodeNumericSegment(b,j,Ae);break;case Nt.ALPHANUMERIC:Pr.decodeAlphanumericSegment(b,j,Ae,K);break;case Nt.BYTE:Pr.decodeByteSegment(b,j,Ae,V,S,y);break;case Nt.KANJI:Pr.decodeKanjiSegment(b,j,Ae);break;default:throw new R}break}}while(Z!==Nt.TERMINATOR)}catch{throw new R}return new Ne(o,j.toString(),S.length===0?null:S,h===null?null:h.toString(),D,I)}static decodeHanziSegment(o,d,h){if(h*13>o.available())throw new R;const y=new Uint8Array(2*h);let b=0;for(;h>0;){const j=o.readBits(13);let S=j/96<<8&4294967295|j%96;S<959?S+=41377:S+=42657,y[b]=S>>8&255,y[b+1]=S&255,b+=2,h--}try{d.append($.decode(y,G.GB2312))}catch(j){throw new R(j)}}static decodeKanjiSegment(o,d,h){if(h*13>o.available())throw new R;const y=new Uint8Array(2*h);let b=0;for(;h>0;){const j=o.readBits(13);let S=j/192<<8&4294967295|j%192;S<7936?S+=33088:S+=49472,y[b]=S>>8,y[b+1]=S,b+=2,h--}try{d.append($.decode(y,G.SHIFT_JIS))}catch(j){throw new R(j)}}static decodeByteSegment(o,d,h,y,b,j){if(8*h>o.available())throw new R;const S=new Uint8Array(h);for(let I=0;I<h;I++)S[I]=o.readBits(8);let D;y===null?D=G.guessEncoding(S,j):D=y.getName();try{d.append($.decode(S,D))}catch(I){throw new R(I)}b.push(S)}static toAlphaNumericChar(o){if(o>=Pr.ALPHANUMERIC_CHARS.length)throw new R;return Pr.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,d,h,y){const b=d.length();for(;h>1;){if(o.available()<11)throw new R;const j=o.readBits(11);d.append(Pr.toAlphaNumericChar(Math.floor(j/45))),d.append(Pr.toAlphaNumericChar(j%45)),h-=2}if(h===1){if(o.available()<6)throw new R;d.append(Pr.toAlphaNumericChar(o.readBits(6)))}if(y)for(let j=b;j<d.length();j++)d.charAt(j)==="%"&&(j<d.length()-1&&d.charAt(j+1)==="%"?d.deleteCharAt(j+1):d.setCharAt(j,""))}static decodeNumericSegment(o,d,h){for(;h>=3;){if(o.available()<10)throw new R;const y=o.readBits(10);if(y>=1e3)throw new R;d.append(Pr.toAlphaNumericChar(Math.floor(y/100))),d.append(Pr.toAlphaNumericChar(Math.floor(y/10)%10)),d.append(Pr.toAlphaNumericChar(y%10)),h-=3}if(h===2){if(o.available()<7)throw new R;const y=o.readBits(7);if(y>=100)throw new R;d.append(Pr.toAlphaNumericChar(Math.floor(y/10))),d.append(Pr.toAlphaNumericChar(y%10))}else if(h===1){if(o.available()<4)throw new R;const y=o.readBits(4);if(y>=10)throw new R;d.append(Pr.toAlphaNumericChar(y))}}static parseECIValue(o){const d=o.readBits(8);if((d&128)===0)return d&127;if((d&192)===128){const h=o.readBits(8);return(d&63)<<8&4294967295|h}if((d&224)===192){const h=o.readBits(16);return(d&31)<<16&4294967295|h}throw new R}}Pr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Pr.GB2312_SUBSET=1;class g0{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;const d=o[0];o[0]=o[2],o[2]=d}}class Qp{constructor(){this.rsDecoder=new He(we.QR_CODE_FIELD_256)}decodeBooleanArray(o,d){return this.decodeBitMatrix(ce.parseFromBooleanArray(o),d)}decodeBitMatrix(o,d){const h=new zl(o);let y=null;try{return this.decodeBitMatrixParser(h,d)}catch(b){y=b}try{h.remask(),h.setMirror(!0),h.readVersion(),h.readFormatInformation(),h.mirror();const b=this.decodeBitMatrixParser(h,d);return b.setOther(new g0(!0)),b}catch(b){throw y!==null?y:b}}decodeBitMatrixParser(o,d){const h=o.readVersion(),y=o.readFormatInformation().getErrorCorrectionLevel(),b=o.readCodewords(),j=zd.getDataBlocks(b,h,y);let S=0;for(const V of j)S+=V.getNumDataCodewords();const D=new Uint8Array(S);let I=0;for(const V of j){const K=V.getCodewords(),Z=V.getNumDataCodewords();this.correctErrors(K,Z);for(let ie=0;ie<Z;ie++)D[I++]=K[ie]}return Pr.decode(D,h,y,d)}correctErrors(o,d){const h=new Int32Array(o);try{this.rsDecoder.decode(h,o.length-d)}catch{throw new T}for(let y=0;y<d;y++)o[y]=h[y]}}class Vl extends We{constructor(o,d,h){super(o,d),this.estimatedModuleSize=h}aboutEquals(o,d,h){if(Math.abs(d-this.getY())<=o&&Math.abs(h-this.getX())<=o){const y=Math.abs(o-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(o,d,h){const y=(this.getX()+d)/2,b=(this.getY()+o)/2,j=(this.estimatedModuleSize+h)/2;return new Vl(y,b,j)}}class _n{constructor(o,d,h,y,b,j,S){this.image=o,this.startX=d,this.startY=h,this.width=y,this.height=b,this.moduleSize=j,this.resultPointCallback=S,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,d=this.height,h=this.width,y=o+h,b=this.startY+d/2,j=new Int32Array(3),S=this.image;for(let D=0;D<d;D++){const I=b+((D&1)===0?Math.floor((D+1)/2):-Math.floor((D+1)/2));j[0]=0,j[1]=0,j[2]=0;let V=o;for(;V<y&&!S.get(V,I);)V++;let K=0;for(;V<y;){if(S.get(V,I))if(K===1)j[1]++;else if(K===2){if(this.foundPatternCross(j)){const Z=this.handlePossibleCenter(j,I,V);if(Z!==null)return Z}j[0]=j[2],j[1]=1,j[2]=0,K=1}else j[++K]++;else K===1&&K++,j[K]++;V++}if(this.foundPatternCross(j)){const Z=this.handlePossibleCenter(j,I,y);if(Z!==null)return Z}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new se}static centerFromEnd(o,d){return d-o[2]-o[1]/2}foundPatternCross(o){const d=this.moduleSize,h=d/2;for(let y=0;y<3;y++)if(Math.abs(d-o[y])>=h)return!1;return!0}crossCheckVertical(o,d,h,y){const b=this.image,j=b.getHeight(),S=this.crossCheckStateCount;S[0]=0,S[1]=0,S[2]=0;let D=o;for(;D>=0&&b.get(d,D)&&S[1]<=h;)S[1]++,D--;if(D<0||S[1]>h)return NaN;for(;D>=0&&!b.get(d,D)&&S[0]<=h;)S[0]++,D--;if(S[0]>h)return NaN;for(D=o+1;D<j&&b.get(d,D)&&S[1]<=h;)S[1]++,D++;if(D===j||S[1]>h)return NaN;for(;D<j&&!b.get(d,D)&&S[2]<=h;)S[2]++,D++;if(S[2]>h)return NaN;const I=S[0]+S[1]+S[2];return 5*Math.abs(I-y)>=2*y?NaN:this.foundPatternCross(S)?_n.centerFromEnd(S,D):NaN}handlePossibleCenter(o,d,h){const y=o[0]+o[1]+o[2],b=_n.centerFromEnd(o,h),j=this.crossCheckVertical(d,b,2*o[1],y);if(!isNaN(j)){const S=(o[0]+o[1]+o[2])/3;for(const I of this.possibleCenters)if(I.aboutEquals(S,j,b))return I.combineEstimate(j,b,S);const D=new Vl(b,j,S);this.possibleCenters.push(D),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(D)}return null}}class Ko extends We{constructor(o,d,h,y){super(o,d),this.estimatedModuleSize=h,this.count=y,y===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,d,h){if(Math.abs(d-this.getY())<=o&&Math.abs(h-this.getX())<=o){const y=Math.abs(o-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(o,d,h){const y=this.count+1,b=(this.count*this.getX()+d)/y,j=(this.count*this.getY()+o)/y,S=(this.count*this.estimatedModuleSize+h)/y;return new Ko(b,j,S,y)}}class Vd{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Hr{constructor(o,d){this.image=o,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=d}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const d=o!=null&&o.get(F.TRY_HARDER)!==void 0,h=o!=null&&o.get(F.PURE_BARCODE)!==void 0,y=this.image,b=y.getHeight(),j=y.getWidth();let S=Math.floor(3*b/(4*Hr.MAX_MODULES));(S<Hr.MIN_SKIP||d)&&(S=Hr.MIN_SKIP);let D=!1;const I=new Int32Array(5);for(let K=S-1;K<b&&!D;K+=S){I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0;let Z=0;for(let ie=0;ie<j;ie++)if(y.get(ie,K))(Z&1)===1&&Z++,I[Z]++;else if((Z&1)===0)if(Z===4)if(Hr.foundPatternCross(I)){if(this.handlePossibleCenter(I,K,ie,h)===!0)if(S=2,this.hasSkipped===!0)D=this.haveMultiplyConfirmedCenters();else{const xe=this.findRowSkip();xe>I[2]&&(K+=xe-I[2]-S,ie=j-1)}else{I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,Z=3;continue}Z=0,I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0}else I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,Z=3;else I[++Z]++;else I[Z]++;Hr.foundPatternCross(I)&&this.handlePossibleCenter(I,K,j,h)===!0&&(S=I[0],this.hasSkipped&&(D=this.haveMultiplyConfirmedCenters()))}const V=this.selectBestPatterns();return We.orderBestPatterns(V),new Vd(V)}static centerFromEnd(o,d){return d-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let d=0;for(let b=0;b<5;b++){const j=o[b];if(j===0)return!1;d+=j}if(d<7)return!1;const h=d/7,y=h/2;return Math.abs(h-o[0])<y&&Math.abs(h-o[1])<y&&Math.abs(3*h-o[2])<3*y&&Math.abs(h-o[3])<y&&Math.abs(h-o[4])<y}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,d,h,y){const b=this.getCrossCheckStateCount();let j=0;const S=this.image;for(;o>=j&&d>=j&&S.get(d-j,o-j);)b[2]++,j++;if(o<j||d<j)return!1;for(;o>=j&&d>=j&&!S.get(d-j,o-j)&&b[1]<=h;)b[1]++,j++;if(o<j||d<j||b[1]>h)return!1;for(;o>=j&&d>=j&&S.get(d-j,o-j)&&b[0]<=h;)b[0]++,j++;if(b[0]>h)return!1;const D=S.getHeight(),I=S.getWidth();for(j=1;o+j<D&&d+j<I&&S.get(d+j,o+j);)b[2]++,j++;if(o+j>=D||d+j>=I)return!1;for(;o+j<D&&d+j<I&&!S.get(d+j,o+j)&&b[3]<h;)b[3]++,j++;if(o+j>=D||d+j>=I||b[3]>=h)return!1;for(;o+j<D&&d+j<I&&S.get(d+j,o+j)&&b[4]<h;)b[4]++,j++;if(b[4]>=h)return!1;const V=b[0]+b[1]+b[2]+b[3]+b[4];return Math.abs(V-y)<2*y&&Hr.foundPatternCross(b)}crossCheckVertical(o,d,h,y){const b=this.image,j=b.getHeight(),S=this.getCrossCheckStateCount();let D=o;for(;D>=0&&b.get(d,D);)S[2]++,D--;if(D<0)return NaN;for(;D>=0&&!b.get(d,D)&&S[1]<=h;)S[1]++,D--;if(D<0||S[1]>h)return NaN;for(;D>=0&&b.get(d,D)&&S[0]<=h;)S[0]++,D--;if(S[0]>h)return NaN;for(D=o+1;D<j&&b.get(d,D);)S[2]++,D++;if(D===j)return NaN;for(;D<j&&!b.get(d,D)&&S[3]<h;)S[3]++,D++;if(D===j||S[3]>=h)return NaN;for(;D<j&&b.get(d,D)&&S[4]<h;)S[4]++,D++;if(S[4]>=h)return NaN;const I=S[0]+S[1]+S[2]+S[3]+S[4];return 5*Math.abs(I-y)>=2*y?NaN:Hr.foundPatternCross(S)?Hr.centerFromEnd(S,D):NaN}crossCheckHorizontal(o,d,h,y){const b=this.image,j=b.getWidth(),S=this.getCrossCheckStateCount();let D=o;for(;D>=0&&b.get(D,d);)S[2]++,D--;if(D<0)return NaN;for(;D>=0&&!b.get(D,d)&&S[1]<=h;)S[1]++,D--;if(D<0||S[1]>h)return NaN;for(;D>=0&&b.get(D,d)&&S[0]<=h;)S[0]++,D--;if(S[0]>h)return NaN;for(D=o+1;D<j&&b.get(D,d);)S[2]++,D++;if(D===j)return NaN;for(;D<j&&!b.get(D,d)&&S[3]<h;)S[3]++,D++;if(D===j||S[3]>=h)return NaN;for(;D<j&&b.get(D,d)&&S[4]<h;)S[4]++,D++;if(S[4]>=h)return NaN;const I=S[0]+S[1]+S[2]+S[3]+S[4];return 5*Math.abs(I-y)>=y?NaN:Hr.foundPatternCross(S)?Hr.centerFromEnd(S,D):NaN}handlePossibleCenter(o,d,h,y){const b=o[0]+o[1]+o[2]+o[3]+o[4];let j=Hr.centerFromEnd(o,h),S=this.crossCheckVertical(d,Math.floor(j),o[2],b);if(!isNaN(S)&&(j=this.crossCheckHorizontal(Math.floor(j),Math.floor(S),o[2],b),!isNaN(j)&&(!y||this.crossCheckDiagonal(Math.floor(S),Math.floor(j),o[2],b)))){const D=b/7;let I=!1;const V=this.possibleCenters;for(let K=0,Z=V.length;K<Z;K++){const ie=V[K];if(ie.aboutEquals(D,S,j)){V[K]=ie.combineEstimate(S,j,D),I=!0;break}}if(!I){const K=new Ko(j,S,D);V.push(K),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(K)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let d=null;for(const h of this.possibleCenters)if(h.getCount()>=Hr.CENTER_QUORUM)if(d==null)d=h;else return this.hasSkipped=!0,Math.floor((Math.abs(d.getX()-h.getX())-Math.abs(d.getY()-h.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,d=0;const h=this.possibleCenters.length;for(const j of this.possibleCenters)j.getCount()>=Hr.CENTER_QUORUM&&(o++,d+=j.getEstimatedModuleSize());if(o<3)return!1;const y=d/h;let b=0;for(const j of this.possibleCenters)b+=Math.abs(j.getEstimatedModuleSize()-y);return b<=.05*d}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new se;const d=this.possibleCenters;let h;if(o>3){let y=0,b=0;for(const D of this.possibleCenters){const I=D.getEstimatedModuleSize();y+=I,b+=I*I}h=y/o;let j=Math.sqrt(b/o-h*h);d.sort((D,I)=>{const V=Math.abs(I.getEstimatedModuleSize()-h),K=Math.abs(D.getEstimatedModuleSize()-h);return V<K?-1:V>K?1:0});const S=Math.max(.2*h,j);for(let D=0;D<d.length&&d.length>3;D++){const I=d[D];Math.abs(I.getEstimatedModuleSize()-h)>S&&(d.splice(D,1),D--)}}if(d.length>3){let y=0;for(const b of d)y+=b.getEstimatedModuleSize();h=y/d.length,d.sort((b,j)=>{if(j.getCount()===b.getCount()){const S=Math.abs(j.getEstimatedModuleSize()-h),D=Math.abs(b.getEstimatedModuleSize()-h);return S<D?1:S>D?-1:0}else return j.getCount()-b.getCount()}),d.splice(3)}return[d[0],d[1],d[2]]}}Hr.CENTER_QUORUM=2,Hr.MIN_SKIP=3,Hr.MAX_MODULES=57;class va{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(F.NEED_RESULT_POINT_CALLBACK);const h=new Hr(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(h)}processFinderPatternInfo(o){const d=o.getTopLeft(),h=o.getTopRight(),y=o.getBottomLeft(),b=this.calculateModuleSize(d,h,y);if(b<1)throw new se("No pattern found in proccess finder.");const j=va.computeDimension(d,h,y,b),S=yt.getProvisionalVersionForDimension(j),D=S.getDimensionForVersion()-7;let I=null;if(S.getAlignmentPatternCenters().length>0){const ie=h.getX()-d.getX()+y.getX(),me=h.getY()-d.getY()+y.getY(),xe=1-3/D,Ae=Math.floor(d.getX()+xe*(ie-d.getX())),Pe=Math.floor(d.getY()+xe*(me-d.getY()));for(let rt=4;rt<=16;rt<<=1)try{I=this.findAlignmentInRegion(b,Ae,Pe,rt);break}catch(et){if(!(et instanceof se))throw et}}const V=va.createTransform(d,h,y,I,j),K=va.sampleGrid(this.image,V,j);let Z;return I===null?Z=[y,d,h]:Z=[y,d,h,I],new at(K,Z)}static createTransform(o,d,h,y,b){const j=b-3.5;let S,D,I,V;return y!==null?(S=y.getX(),D=y.getY(),I=j-3,V=I):(S=d.getX()-o.getX()+h.getX(),D=d.getY()-o.getY()+h.getY(),I=j,V=j),rr.quadrilateralToQuadrilateral(3.5,3.5,j,3.5,I,V,3.5,j,o.getX(),o.getY(),d.getX(),d.getY(),S,D,h.getX(),h.getY())}static sampleGrid(o,d,h){return ct.getInstance().sampleGridWithTransform(o,h,h,d)}static computeDimension(o,d,h,y){const b=lt.round(We.distance(o,d)/y),j=lt.round(We.distance(o,h)/y);let S=Math.floor((b+j)/2)+7;switch(S&3){case 0:S++;break;case 2:S--;break;case 3:throw new se("Dimensions could be not found.")}return S}calculateModuleSize(o,d,h){return(this.calculateModuleSizeOneWay(o,d)+this.calculateModuleSizeOneWay(o,h))/2}calculateModuleSizeOneWay(o,d){const h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(d.getX()),Math.floor(d.getY())),y=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(d.getX()),Math.floor(d.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(h)?y/7:isNaN(y)?h/7:(h+y)/14}sizeOfBlackWhiteBlackRunBothWays(o,d,h,y){let b=this.sizeOfBlackWhiteBlackRun(o,d,h,y),j=1,S=o-(h-o);S<0?(j=o/(o-S),S=0):S>=this.image.getWidth()&&(j=(this.image.getWidth()-1-o)/(S-o),S=this.image.getWidth()-1);let D=Math.floor(d-(y-d)*j);return j=1,D<0?(j=d/(d-D),D=0):D>=this.image.getHeight()&&(j=(this.image.getHeight()-1-d)/(D-d),D=this.image.getHeight()-1),S=Math.floor(o+(S-o)*j),b+=this.sizeOfBlackWhiteBlackRun(o,d,S,D),b-1}sizeOfBlackWhiteBlackRun(o,d,h,y){const b=Math.abs(y-d)>Math.abs(h-o);if(b){let ie=o;o=d,d=ie,ie=h,h=y,y=ie}const j=Math.abs(h-o),S=Math.abs(y-d);let D=-j/2;const I=o<h?1:-1,V=d<y?1:-1;let K=0;const Z=h+I;for(let ie=o,me=d;ie!==Z;ie+=I){const xe=b?me:ie,Ae=b?ie:me;if(K===1===this.image.get(xe,Ae)){if(K===2)return lt.distance(ie,me,o,d);K++}if(D+=S,D>0){if(me===y)break;me+=V,D-=j}}return K===2?lt.distance(h+I,y,o,d):NaN}findAlignmentInRegion(o,d,h,y){const b=Math.floor(y*o),j=Math.max(0,d-b),S=Math.min(this.image.getWidth()-1,d+b);if(S-j<o*3)throw new se("Alignment top exceeds estimated module size.");const D=Math.max(0,h-b),I=Math.min(this.image.getHeight()-1,h+b);if(I-D<o*3)throw new se("Alignment bottom exceeds estimated module size.");return new _n(this.image,j,D,S-j,I-D,o,this.resultPointCallback).find()}}class Ka{constructor(){this.decoder=new Qp}getDecoder(){return this.decoder}decode(o,d){let h,y;if(d!=null&&d.get(F.PURE_BARCODE)!==void 0){const D=Ka.extractPureBits(o.getBlackMatrix());h=this.decoder.decodeBitMatrix(D,d),y=Ka.NO_POINTS}else{const D=new va(o.getBlackMatrix()).detect(d);h=this.decoder.decodeBitMatrix(D.getBits(),d),y=D.getPoints()}h.getOther()instanceof g0&&h.getOther().applyMirroredCorrection(y);const b=new de(h.getText(),h.getRawBytes(),void 0,y,oe.QR_CODE,void 0),j=h.getByteSegments();j!==null&&b.putMetadata(qe.BYTE_SEGMENTS,j);const S=h.getECLevel();return S!==null&&b.putMetadata(qe.ERROR_CORRECTION_LEVEL,S),h.hasStructuredAppend()&&(b.putMetadata(qe.STRUCTURED_APPEND_SEQUENCE,h.getStructuredAppendSequenceNumber()),b.putMetadata(qe.STRUCTURED_APPEND_PARITY,h.getStructuredAppendParity())),b}reset(){}static extractPureBits(o){const d=o.getTopLeftOnBit(),h=o.getBottomRightOnBit();if(d===null||h===null)throw new se;const y=this.moduleSize(d,o);let b=d[1],j=h[1],S=d[0],D=h[0];if(S>=D||b>=j)throw new se;if(j-b!==D-S&&(D=S+(j-b),D>=o.getWidth()))throw new se;const I=Math.round((D-S+1)/y),V=Math.round((j-b+1)/y);if(I<=0||V<=0)throw new se;if(V!==I)throw new se;const K=Math.floor(y/2);b+=K,S+=K;const Z=S+Math.floor((I-1)*y)-D;if(Z>0){if(Z>K)throw new se;S-=Z}const ie=b+Math.floor((V-1)*y)-j;if(ie>0){if(ie>K)throw new se;b-=ie}const me=new ce(I,V);for(let xe=0;xe<V;xe++){const Ae=b+Math.floor(xe*y);for(let Pe=0;Pe<I;Pe++)o.get(S+Math.floor(Pe*y),Ae)&&me.set(Pe,xe)}return me}static moduleSize(o,d){const h=d.getHeight(),y=d.getWidth();let b=o[0],j=o[1],S=!0,D=0;for(;b<y&&j<h;){if(S!==d.get(b,j)){if(++D===5)break;S=!S}b++,j++}if(b===y||j===h)throw new se;return(b-o[0])/7}}Ka.NO_POINTS=new Array;class St{PDF417Common(){}static getBitCountSum(o){return lt.sum(o)}static toIntArray(o){if(o==null||!o.length)return St.EMPTY_INT_ARRAY;const d=new Int32Array(o.length);let h=0;for(const y of o)d[h++]=y;return d}static getCodeword(o){const d=L.binarySearch(St.SYMBOL_TABLE,o&262143);return d<0?-1:(St.CODEWORD_TABLE[d]-1)%St.NUMBER_OF_CODEWORDS}}St.NUMBER_OF_CODEWORDS=929,St.MAX_CODEWORDS_IN_BARCODE=St.NUMBER_OF_CODEWORDS-1,St.MIN_ROWS_IN_BARCODE=3,St.MAX_ROWS_IN_BARCODE=90,St.MODULES_IN_CODEWORD=17,St.MODULES_IN_STOP_PATTERN=18,St.BARS_IN_MODULE=8,St.EMPTY_INT_ARRAY=new Int32Array([]),St.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),St.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class x0{constructor(o,d){this.bits=o,this.points=d}getBits(){return this.bits}getPoints(){return this.points}}class kt{static detectMultiple(o,d,h){let y=o.getBlackMatrix(),b=kt.detect(h,y);return b.length||(y=y.clone(),y.rotate180(),b=kt.detect(h,y)),new x0(y,b)}static detect(o,d){const h=new Array;let y=0,b=0,j=!1;for(;y<d.getHeight();){const S=kt.findVertices(d,y,b);if(S[0]==null&&S[3]==null){if(!j)break;j=!1,b=0;for(const D of h)D[1]!=null&&(y=Math.trunc(Math.max(y,D[1].getY()))),D[3]!=null&&(y=Math.max(y,Math.trunc(D[3].getY())));y+=kt.ROW_STEP;continue}if(j=!0,h.push(S),!o)break;S[2]!=null?(b=Math.trunc(S[2].getX()),y=Math.trunc(S[2].getY())):(b=Math.trunc(S[4].getX()),y=Math.trunc(S[4].getY()))}return h}static findVertices(o,d,h){const y=o.getHeight(),b=o.getWidth(),j=new Array(8);return kt.copyToResult(j,kt.findRowsWithPattern(o,y,b,d,h,kt.START_PATTERN),kt.INDEXES_START_PATTERN),j[4]!=null&&(h=Math.trunc(j[4].getX()),d=Math.trunc(j[4].getY())),kt.copyToResult(j,kt.findRowsWithPattern(o,y,b,d,h,kt.STOP_PATTERN),kt.INDEXES_STOP_PATTERN),j}static copyToResult(o,d,h){for(let y=0;y<h.length;y++)o[h[y]]=d[y]}static findRowsWithPattern(o,d,h,y,b,j){const S=new Array(4);let D=!1;const I=new Int32Array(j.length);for(;y<d;y+=kt.ROW_STEP){let K=kt.findGuardPattern(o,b,y,h,!1,j,I);if(K!=null){for(;y>0;){const Z=kt.findGuardPattern(o,b,--y,h,!1,j,I);if(Z!=null)K=Z;else{y++;break}}S[0]=new We(K[0],y),S[1]=new We(K[1],y),D=!0;break}}let V=y+1;if(D){let K=0,Z=Int32Array.from([Math.trunc(S[0].getX()),Math.trunc(S[1].getX())]);for(;V<d;V++){const ie=kt.findGuardPattern(o,Z[0],V,h,!1,j,I);if(ie!=null&&Math.abs(Z[0]-ie[0])<kt.MAX_PATTERN_DRIFT&&Math.abs(Z[1]-ie[1])<kt.MAX_PATTERN_DRIFT)Z=ie,K=0;else{if(K>kt.SKIPPED_ROW_COUNT_MAX)break;K++}}V-=K+1,S[2]=new We(Z[0],V),S[3]=new We(Z[1],V)}return V-y<kt.BARCODE_MIN_HEIGHT&&L.fill(S,null),S}static findGuardPattern(o,d,h,y,b,j,S){L.fillWithin(S,0,S.length,0);let D=d,I=0;for(;o.get(D,h)&&D>0&&I++<kt.MAX_PIXEL_DRIFT;)D--;let V=D,K=0,Z=j.length;for(let ie=b;V<y;V++)if(o.get(V,h)!==ie)S[K]++;else{if(K===Z-1){if(kt.patternMatchVariance(S,j,kt.MAX_INDIVIDUAL_VARIANCE)<kt.MAX_AVG_VARIANCE)return new Int32Array([D,V]);D+=S[0]+S[1],k.arraycopy(S,2,S,0,K-1),S[K-1]=0,S[K]=0,K--}else K++;S[K]=1,ie=!ie}return K===Z-1&&kt.patternMatchVariance(S,j,kt.MAX_INDIVIDUAL_VARIANCE)<kt.MAX_AVG_VARIANCE?new Int32Array([D,V-1]):null}static patternMatchVariance(o,d,h){let y=o.length,b=0,j=0;for(let I=0;I<y;I++)b+=o[I],j+=d[I];if(b<j)return 1/0;let S=b/j;h*=S;let D=0;for(let I=0;I<y;I++){let V=o[I],K=d[I]*S,Z=V>K?V-K:K-V;if(Z>h)return 1/0;D+=Z}return D/b}}kt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),kt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),kt.MAX_AVG_VARIANCE=.42,kt.MAX_INDIVIDUAL_VARIANCE=.8,kt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),kt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),kt.MAX_PIXEL_DRIFT=3,kt.MAX_PATTERN_DRIFT=5,kt.SKIPPED_ROW_COUNT_MAX=25,kt.ROW_STEP=5,kt.BARCODE_MIN_HEIGHT=10;class Ir{constructor(o,d){if(d.length===0)throw new v;this.field=o;let h=d.length;if(h>1&&d[0]===0){let y=1;for(;y<h&&d[y]===0;)y++;y===h?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(h-y),k.arraycopy(d,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=d}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let y=0;for(let b of this.coefficients)y=this.field.add(y,b);return y}let d=this.coefficients[0],h=this.coefficients.length;for(let y=1;y<h;y++)d=this.field.add(this.field.multiply(o,d),this.coefficients[y]);return d}add(o){if(!this.field.equals(o.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let d=this.coefficients,h=o.coefficients;if(d.length>h.length){let j=d;d=h,h=j}let y=new Int32Array(h.length),b=h.length-d.length;k.arraycopy(h,0,y,0,b);for(let j=b;j<h.length;j++)y[j]=this.field.add(d[j-b],h[j]);return new Ir(this.field,y)}subtract(o){if(!this.field.equals(o.field))throw new v("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof Ir?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new Ir(this.field,new Int32Array([0]));let d=this.coefficients,h=d.length,y=o.coefficients,b=y.length,j=new Int32Array(h+b-1);for(let S=0;S<h;S++){let D=d[S];for(let I=0;I<b;I++)j[S+I]=this.field.add(j[S+I],this.field.multiply(D,y[I]))}return new Ir(this.field,j)}negative(){let o=this.coefficients.length,d=new Int32Array(o);for(let h=0;h<o;h++)d[h]=this.field.subtract(0,this.coefficients[h]);return new Ir(this.field,d)}multiplyScalar(o){if(o===0)return new Ir(this.field,new Int32Array([0]));if(o===1)return this;let d=this.coefficients.length,h=new Int32Array(d);for(let y=0;y<d;y++)h[y]=this.field.multiply(this.coefficients[y],o);return new Ir(this.field,h)}multiplyByMonomial(o,d){if(o<0)throw new v;if(d===0)return new Ir(this.field,new Int32Array([0]));let h=this.coefficients.length,y=new Int32Array(h+o);for(let b=0;b<h;b++)y[b]=this.field.multiply(this.coefficients[b],d);return new Ir(this.field,y)}toString(){let o=new ee;for(let d=this.getDegree();d>=0;d--){let h=this.getCoefficient(d);h!==0&&(h<0?(o.append(" - "),h=-h):o.length()>0&&o.append(" + "),(d===0||h!==1)&&o.append(h),d!==0&&(d===1?o.append("x"):(o.append("x^"),o.append(d))))}return o.toString()}}class $d{add(o,d){return(o+d)%this.modulus}subtract(o,d){return(this.modulus+o-d)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new v;return this.logTable[o]}inverse(o){if(o===0)throw new Le;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,d){return o===0||d===0?0:this.expTable[(this.logTable[o]+this.logTable[d])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class qi extends $d{constructor(o,d){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let h=1;for(let y=0;y<o;y++)this.expTable[y]=h,h=h*d%o;for(let y=0;y<o-1;y++)this.logTable[this.expTable[y]]=y;this.zero=new Ir(this,new Int32Array([0])),this.one=new Ir(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,d){if(o<0)throw new v;if(d===0)return this.zero;let h=new Int32Array(o+1);return h[0]=d,new Ir(this,h)}}qi.PDF417_GF=new qi(St.NUMBER_OF_CODEWORDS,3);class Za{constructor(){this.field=qi.PDF417_GF}decode(o,d,h){let y=new Ir(this.field,o),b=new Int32Array(d),j=!1;for(let me=d;me>0;me--){let xe=y.evaluateAt(this.field.exp(me));b[d-me]=xe,xe!==0&&(j=!0)}if(!j)return 0;let S=this.field.getOne();if(h!=null)for(const me of h){let xe=this.field.exp(o.length-1-me),Ae=new Ir(this.field,new Int32Array([this.field.subtract(0,xe),1]));S=S.multiply(Ae)}let D=new Ir(this.field,b),I=this.runEuclideanAlgorithm(this.field.buildMonomial(d,1),D,d),V=I[0],K=I[1],Z=this.findErrorLocations(V),ie=this.findErrorMagnitudes(K,V,Z);for(let me=0;me<Z.length;me++){let xe=o.length-1-this.field.log(Z[me]);if(xe<0)throw T.getChecksumInstance();o[xe]=this.field.subtract(o[xe],ie[me])}return Z.length}runEuclideanAlgorithm(o,d,h){if(o.getDegree()<d.getDegree()){let Z=o;o=d,d=Z}let y=o,b=d,j=this.field.getZero(),S=this.field.getOne();for(;b.getDegree()>=Math.round(h/2);){let Z=y,ie=j;if(y=b,j=S,y.isZero())throw T.getChecksumInstance();b=Z;let me=this.field.getZero(),xe=y.getCoefficient(y.getDegree()),Ae=this.field.inverse(xe);for(;b.getDegree()>=y.getDegree()&&!b.isZero();){let Pe=b.getDegree()-y.getDegree(),rt=this.field.multiply(b.getCoefficient(b.getDegree()),Ae);me=me.add(this.field.buildMonomial(Pe,rt)),b=b.subtract(y.multiplyByMonomial(Pe,rt))}S=me.multiply(j).subtract(ie).negative()}let D=S.getCoefficient(0);if(D===0)throw T.getChecksumInstance();let I=this.field.inverse(D),V=S.multiply(I),K=b.multiply(I);return[V,K]}findErrorLocations(o){let d=o.getDegree(),h=new Int32Array(d),y=0;for(let b=1;b<this.field.getSize()&&y<d;b++)o.evaluateAt(b)===0&&(h[y]=this.field.inverse(b),y++);if(y!==d)throw T.getChecksumInstance();return h}findErrorMagnitudes(o,d,h){let y=d.getDegree(),b=new Int32Array(y);for(let I=1;I<=y;I++)b[y-I]=this.field.multiply(I,d.getCoefficient(I));let j=new Ir(this.field,b),S=h.length,D=new Int32Array(S);for(let I=0;I<S;I++){let V=this.field.inverse(h[I]),K=this.field.subtract(0,o.evaluateAt(V)),Z=this.field.inverse(j.evaluateAt(V));D[I]=this.field.multiply(K,Z)}return D}}class Qa{constructor(o,d,h,y,b){o instanceof Qa?this.constructor_2(o):this.constructor_1(o,d,h,y,b)}constructor_1(o,d,h,y,b){const j=d==null||h==null,S=y==null||b==null;if(j&&S)throw new se;j?(d=new We(0,y.getY()),h=new We(0,b.getY())):S&&(y=new We(o.getWidth()-1,d.getY()),b=new We(o.getWidth()-1,h.getY())),this.image=o,this.topLeft=d,this.bottomLeft=h,this.topRight=y,this.bottomRight=b,this.minX=Math.trunc(Math.min(d.getX(),h.getX())),this.maxX=Math.trunc(Math.max(y.getX(),b.getX())),this.minY=Math.trunc(Math.min(d.getY(),y.getY())),this.maxY=Math.trunc(Math.max(h.getY(),b.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,d){return o==null?d:d==null?o:new Qa(o.image,o.topLeft,o.bottomLeft,d.topRight,d.bottomRight)}addMissingRows(o,d,h){let y=this.topLeft,b=this.bottomLeft,j=this.topRight,S=this.bottomRight;if(o>0){let D=h?this.topLeft:this.topRight,I=Math.trunc(D.getY()-o);I<0&&(I=0);let V=new We(D.getX(),I);h?y=V:j=V}if(d>0){let D=h?this.bottomLeft:this.bottomRight,I=Math.trunc(D.getY()+d);I>=this.image.getHeight()&&(I=this.image.getHeight()-1);let V=new We(D.getX(),I);h?b=V:S=V}return new Qa(this.image,y,b,j,S)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Jc{constructor(o,d,h,y){this.columnCount=o,this.errorCorrectionLevel=y,this.rowCountUpperPart=d,this.rowCountLowerPart=h,this.rowCount=d+h}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class $l{constructor(){this.buffer=""}static form(o,d){let h=-1;function y(j,S,D,I,V,K){if(j==="%%")return"%";if(d[++h]===void 0)return;j=I?parseInt(I.substr(1)):void 0;let Z=V?parseInt(V.substr(1)):void 0,ie;switch(K){case"s":ie=d[h];break;case"c":ie=d[h][0];break;case"f":ie=parseFloat(d[h]).toFixed(j);break;case"p":ie=parseFloat(d[h]).toPrecision(j);break;case"e":ie=parseFloat(d[h]).toExponential(j);break;case"x":ie=parseInt(d[h]).toString(Z||16);break;case"d":ie=parseFloat(parseInt(d[h],Z||10).toPrecision(j)).toFixed(0);break}ie=typeof ie=="object"?JSON.stringify(ie):(+ie).toString(Z);let me=parseInt(D),xe=D&&D[0]+""=="0"?"0":" ";for(;ie.length<me;)ie=S!==void 0?ie+xe:xe+ie;return ie}let b=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(b,y)}format(o,...d){this.buffer+=$l.form(o,d)}toString(){return this.buffer}}class Ni{constructor(o){this.boundingBox=new Qa(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let d=this.getCodeword(o);if(d!=null)return d;for(let h=1;h<Ni.MAX_NEARBY_DISTANCE;h++){let y=this.imageRowToCodewordIndex(o)-h;if(y>=0&&(d=this.codewords[y],d!=null)||(y=this.imageRowToCodewordIndex(o)+h,y<this.codewords.length&&(d=this.codewords[y],d!=null)))return d}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,d){this.codewords[this.imageRowToCodewordIndex(o)]=d}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new $l;let d=0;for(const h of this.codewords){if(h==null){o.format("%3d:    |   %n",d++);continue}o.format("%3d: %3d|%3d%n",d++,h.getRowNumber(),h.getValue())}return o.toString()}}Ni.MAX_NEARBY_DISTANCE=5;class wi{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let d=this.values.get(o);d==null&&(d=0),d++,this.values.set(o,d)}getValue(){let o=-1,d=new Array;for(const[h,y]of this.values.entries()){const b={getKey:()=>h,getValue:()=>y};b.getValue()>o?(o=b.getValue(),d=[],d.push(b.getKey())):b.getValue()===o&&d.push(b.getKey())}return St.toIntArray(d)}getConfidence(o){return this.values.get(o)}}class qd extends Ni{constructor(o,d){super(o),this._isLeft=d}setRowNumbers(){for(let o of this.getCodewords())o?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let d=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(d,o);let h=this.getBoundingBox(),y=this._isLeft?h.getTopLeft():h.getTopRight(),b=this._isLeft?h.getBottomLeft():h.getBottomRight(),j=this.imageRowToCodewordIndex(Math.trunc(y.getY())),S=this.imageRowToCodewordIndex(Math.trunc(b.getY())),D=-1,I=1,V=0;for(let K=j;K<S;K++){if(d[K]==null)continue;let Z=d[K],ie=Z.getRowNumber()-D;if(ie===0)V++;else if(ie===1)I=Math.max(I,V),V=1,D=Z.getRowNumber();else if(ie<0||Z.getRowNumber()>=o.getRowCount()||ie>K)d[K]=null;else{let me;I>2?me=(I-2)*ie:me=ie;let xe=me>=K;for(let Ae=1;Ae<=me&&!xe;Ae++)xe=d[K-Ae]!=null;xe?d[K]=null:(D=Z.getRowNumber(),V=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let d=new Int32Array(o.getRowCount());for(let h of this.getCodewords())if(h!=null){let y=h.getRowNumber();if(y>=d.length)continue;d[y]++}return d}adjustIncompleteIndicatorColumnRowNumbers(o){let d=this.getBoundingBox(),h=this._isLeft?d.getTopLeft():d.getTopRight(),y=this._isLeft?d.getBottomLeft():d.getBottomRight(),b=this.imageRowToCodewordIndex(Math.trunc(h.getY())),j=this.imageRowToCodewordIndex(Math.trunc(y.getY())),S=this.getCodewords(),D=-1;for(let I=b;I<j;I++){if(S[I]==null)continue;let V=S[I];V.setRowNumberAsRowIndicatorColumn();let K=V.getRowNumber()-D;K===0||(K===1?D=V.getRowNumber():V.getRowNumber()>=o.getRowCount()?S[I]=null:D=V.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),d=new wi,h=new wi,y=new wi,b=new wi;for(let S of o){if(S==null)continue;S.setRowNumberAsRowIndicatorColumn();let D=S.getValue()%30,I=S.getRowNumber();switch(this._isLeft||(I+=2),I%3){case 0:h.setValue(D*3+1);break;case 1:b.setValue(D/3),y.setValue(D%3);break;case 2:d.setValue(D+1);break}}if(d.getValue().length===0||h.getValue().length===0||y.getValue().length===0||b.getValue().length===0||d.getValue()[0]<1||h.getValue()[0]+y.getValue()[0]<St.MIN_ROWS_IN_BARCODE||h.getValue()[0]+y.getValue()[0]>St.MAX_ROWS_IN_BARCODE)return null;let j=new Jc(d.getValue()[0],h.getValue()[0],y.getValue()[0],b.getValue()[0]);return this.removeIncorrectCodewords(o,j),j}removeIncorrectCodewords(o,d){for(let h=0;h<o.length;h++){let y=o[h];if(o[h]==null)continue;let b=y.getValue()%30,j=y.getRowNumber();if(j>d.getRowCount()){o[h]=null;continue}switch(this._isLeft||(j+=2),j%3){case 0:b*3+1!==d.getRowCountUpperPart()&&(o[h]=null);break;case 1:(Math.trunc(b/3)!==d.getErrorCorrectionLevel()||b%3!==d.getRowCountLowerPart())&&(o[h]=null);break;case 2:b+1!==d.getColumnCount()&&(o[h]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Es{constructor(o,d){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=d,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=St.MAX_CODEWORDS_IN_BARCODE,d;do d=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<d);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let d=1;d<this.barcodeColumnCount+1;d++){let h=this.detectionResultColumns[d].getCodewords();for(let y=0;y<h.length;y++)h[y]!=null&&(h[y].hasValidRowNumber()||this.adjustRowNumbers(d,y,h))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),d=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<o.length;h++)if(o[h]!=null&&d[h]!=null&&o[h].getRowNumber()===d[h].getRowNumber())for(let y=1;y<=this.barcodeColumnCount;y++){let b=this.detectionResultColumns[y].getCodewords()[h];b!=null&&(b.setRowNumber(o[h].getRowNumber()),b.hasValidRowNumber()||(this.detectionResultColumns[y].getCodewords()[h]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,d=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<d.length;h++){if(d[h]==null)continue;let y=d[h].getRowNumber(),b=0;for(let j=this.barcodeColumnCount+1;j>0&&b<this.ADJUST_ROW_NUMBER_SKIP;j--){let S=this.detectionResultColumns[j].getCodewords()[h];S!=null&&(b=Es.adjustRowNumberIfValid(y,b,S),S.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,d=this.detectionResultColumns[0].getCodewords();for(let h=0;h<d.length;h++){if(d[h]==null)continue;let y=d[h].getRowNumber(),b=0;for(let j=1;j<this.barcodeColumnCount+1&&b<this.ADJUST_ROW_NUMBER_SKIP;j++){let S=this.detectionResultColumns[j].getCodewords()[h];S!=null&&(b=Es.adjustRowNumberIfValid(y,b,S),S.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,d,h){return h==null||h.hasValidRowNumber()||(h.isValidRowNumber(o)?(h.setRowNumber(o),d=0):++d),d}adjustRowNumbers(o,d,h){if(!this.detectionResultColumns[o-1])return;let y=h[d],b=this.detectionResultColumns[o-1].getCodewords(),j=b;this.detectionResultColumns[o+1]!=null&&(j=this.detectionResultColumns[o+1].getCodewords());let S=new Array(14);S[2]=b[d],S[3]=j[d],d>0&&(S[0]=h[d-1],S[4]=b[d-1],S[5]=j[d-1]),d>1&&(S[8]=h[d-2],S[10]=b[d-2],S[11]=j[d-2]),d<h.length-1&&(S[1]=h[d+1],S[6]=b[d+1],S[7]=j[d+1]),d<h.length-2&&(S[9]=h[d+2],S[12]=b[d+2],S[13]=j[d+2]);for(let D of S)if(Es.adjustRowNumber(y,D))return}static adjustRowNumber(o,d){return d==null?!1:d.hasValidRowNumber()&&d.getBucket()===o.getBucket()?(o.setRowNumber(d.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,d){this.detectionResultColumns[o]=d}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let d=new $l;for(let h=0;h<o.getCodewords().length;h++){d.format("CW %3d:",h);for(let y=0;y<this.barcodeColumnCount+2;y++){if(this.detectionResultColumns[y]==null){d.format("    |   ");continue}let b=this.detectionResultColumns[y].getCodewords()[h];if(b==null){d.format("    |   ");continue}d.format(" %3d|%3d",b.getRowNumber(),b.getValue())}d.format("%n")}return d.toString()}}class Qn{constructor(o,d,h,y){this.rowNumber=Qn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(d),this.bucket=Math.trunc(h),this.value=Math.trunc(y)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==Qn.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}Qn.BARCODE_ROW_UNKNOWN=-1;class Bs{static initialize(){for(let o=0;o<St.SYMBOL_TABLE.length;o++){let d=St.SYMBOL_TABLE[o],h=d&1;for(let y=0;y<St.BARS_IN_MODULE;y++){let b=0;for(;(d&1)===h;)b+=1,d>>=1;h=d&1,Bs.RATIOS_TABLE[o]||(Bs.RATIOS_TABLE[o]=new Array(St.BARS_IN_MODULE)),Bs.RATIOS_TABLE[o][St.BARS_IN_MODULE-y-1]=Math.fround(b/St.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let d=Bs.getDecodedCodewordValue(Bs.sampleBitCounts(o));return d!==-1?d:Bs.getClosestDecodedValue(o)}static sampleBitCounts(o){let d=lt.sum(o),h=new Int32Array(St.BARS_IN_MODULE),y=0,b=0;for(let j=0;j<St.MODULES_IN_CODEWORD;j++){let S=d/(2*St.MODULES_IN_CODEWORD)+j*d/St.MODULES_IN_CODEWORD;b+o[y]<=S&&(b+=o[y],y++),h[y]++}return h}static getDecodedCodewordValue(o){let d=Bs.getBitValue(o);return St.getCodeword(d)===-1?-1:d}static getBitValue(o){let d=0;for(let h=0;h<o.length;h++)for(let y=0;y<o[h];y++)d=d<<1|(h%2===0?1:0);return Math.trunc(d)}static getClosestDecodedValue(o){let d=lt.sum(o),h=new Array(St.BARS_IN_MODULE);if(d>1)for(let j=0;j<h.length;j++)h[j]=Math.fround(o[j]/d);let y=pt.MAX_VALUE,b=-1;this.bSymbolTableReady||Bs.initialize();for(let j=0;j<Bs.RATIOS_TABLE.length;j++){let S=0,D=Bs.RATIOS_TABLE[j];for(let I=0;I<St.BARS_IN_MODULE;I++){let V=Math.fround(D[I]-h[I]);if(S+=Math.fround(V*V),S>=y)break}S<y&&(y=S,b=St.SYMBOL_TABLE[j])}return b}}Bs.bSymbolTableReady=!1,Bs.RATIOS_TABLE=new Array(St.SYMBOL_TABLE.length).map(W=>new Array(St.BARS_IN_MODULE));class ql{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class p0{static parseLong(o,d=void 0){return parseInt(o,d)}}class eu extends x{}eu.kind="NullPointerException";class Hd{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,d,h){if(o==null)throw new eu;if(d<0||d>o.length||h<0||d+h>o.length||d+h<0)throw new O;if(h===0)return;for(let y=0;y<h;y++)this.write(o[d+y])}flush(){}close(){}}class Zo extends x{}class tu extends Hd{constructor(o=32){if(super(),this.count=0,o<0)throw new v("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let h=this.buf.length<<1;if(h-o<0&&(h=o),h<0){if(o<0)throw new Zo;h=P.MAX_VALUE}this.buf=L.copyOfUint8Array(this.buf,h)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,d,h){if(d<0||d>o.length||h<0||d+h-o.length>0)throw new O;this.ensureCapacity(this.count+h),k.arraycopy(o,d,this.buf,this.count,h),this.count+=h}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return L.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var ur;(function(W){W[W.ALPHA=0]="ALPHA",W[W.LOWER=1]="LOWER",W[W.MIXED=2]="MIXED",W[W.PUNCT=3]="PUNCT",W[W.ALPHA_SHIFT=4]="ALPHA_SHIFT",W[W.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ur||(ur={}));function y0(){if(typeof window<"u")return window.BigInt||null;if(typeof Om<"u")return Om.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ru;function ji(W){if(typeof ru>"u"&&(ru=y0()),ru===null)throw new Error("BigInt is not supported!");return ru(W)}function Gd(){let W=[];W[0]=ji(1);let o=ji(900);W[1]=o;for(let d=2;d<16;d++)W[d]=W[d-1]*o;return W}class Me{static decode(o,d){let h=new ee(""),y=U.ISO8859_1;h.enableDecoding(y);let b=1,j=o[b++],S=new ql;for(;b<o[0];){switch(j){case Me.TEXT_COMPACTION_MODE_LATCH:b=Me.textCompaction(o,b,h);break;case Me.BYTE_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH_6:b=Me.byteCompaction(j,o,y,b,h);break;case Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[b++]);break;case Me.NUMERIC_COMPACTION_MODE_LATCH:b=Me.numericCompaction(o,b,h);break;case Me.ECI_CHARSET:U.getCharacterSetECIByValue(o[b++]);break;case Me.ECI_GENERAL_PURPOSE:b+=2;break;case Me.ECI_USER_DEFINED:b++;break;case Me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:b=Me.decodeMacroBlock(o,b,S);break;case Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Me.MACRO_PDF417_TERMINATOR:throw new R;default:b--,b=Me.textCompaction(o,b,h);break}if(b<o.length)j=o[b++];else throw R.getFormatInstance()}if(h.length()===0)throw R.getFormatInstance();let D=new Ne(null,h.toString(),null,d);return D.setOther(S),D}static decodeMacroBlock(o,d,h){if(d+Me.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw R.getFormatInstance();let y=new Int32Array(Me.NUMBER_OF_SEQUENCE_CODEWORDS);for(let S=0;S<Me.NUMBER_OF_SEQUENCE_CODEWORDS;S++,d++)y[S]=o[d];h.setSegmentIndex(P.parseInt(Me.decodeBase900toBase10(y,Me.NUMBER_OF_SEQUENCE_CODEWORDS)));let b=new ee;d=Me.textCompaction(o,d,b),h.setFileId(b.toString());let j=-1;for(o[d]===Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(j=d+1);d<o[0];)switch(o[d]){case Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(d++,o[d]){case Me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let S=new ee;d=Me.textCompaction(o,d+1,S),h.setFileName(S.toString());break;case Me.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let D=new ee;d=Me.textCompaction(o,d+1,D),h.setSender(D.toString());break;case Me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let I=new ee;d=Me.textCompaction(o,d+1,I),h.setAddressee(I.toString());break;case Me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let V=new ee;d=Me.numericCompaction(o,d+1,V),h.setSegmentCount(P.parseInt(V.toString()));break;case Me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let K=new ee;d=Me.numericCompaction(o,d+1,K),h.setTimestamp(p0.parseLong(K.toString()));break;case Me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Z=new ee;d=Me.numericCompaction(o,d+1,Z),h.setChecksum(P.parseInt(Z.toString()));break;case Me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ie=new ee;d=Me.numericCompaction(o,d+1,ie),h.setFileSize(p0.parseLong(ie.toString()));break;default:throw R.getFormatInstance()}break;case Me.MACRO_PDF417_TERMINATOR:d++,h.setLastSegment(!0);break;default:throw R.getFormatInstance()}if(j!==-1){let S=d-j;h.isLastSegment()&&S--,h.setOptionalData(L.copyOfRange(o,j,j+S))}return d}static textCompaction(o,d,h){let y=new Int32Array((o[0]-d)*2),b=new Int32Array((o[0]-d)*2),j=0,S=!1;for(;d<o[0]&&!S;){let D=o[d++];if(D<Me.TEXT_COMPACTION_MODE_LATCH)y[j]=D/30,y[j+1]=D%30,j+=2;else switch(D){case Me.TEXT_COMPACTION_MODE_LATCH:y[j++]=Me.TEXT_COMPACTION_MODE_LATCH;break;case Me.BYTE_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH_6:case Me.NUMERIC_COMPACTION_MODE_LATCH:case Me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Me.MACRO_PDF417_TERMINATOR:d--,S=!0;break;case Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y[j]=Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,D=o[d++],b[j]=D,j++;break}}return Me.decodeTextCompaction(y,b,j,h),d}static decodeTextCompaction(o,d,h,y){let b=ur.ALPHA,j=ur.ALPHA,S=0;for(;S<h;){let D=o[S],I="";switch(b){case ur.ALPHA:if(D<26)I=String.fromCharCode(65+D);else switch(D){case 26:I=" ";break;case Me.LL:b=ur.LOWER;break;case Me.ML:b=ur.MIXED;break;case Me.PS:j=b,b=ur.PUNCT_SHIFT;break;case Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(d[S]);break;case Me.TEXT_COMPACTION_MODE_LATCH:b=ur.ALPHA;break}break;case ur.LOWER:if(D<26)I=String.fromCharCode(97+D);else switch(D){case 26:I=" ";break;case Me.AS:j=b,b=ur.ALPHA_SHIFT;break;case Me.ML:b=ur.MIXED;break;case Me.PS:j=b,b=ur.PUNCT_SHIFT;break;case Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(d[S]);break;case Me.TEXT_COMPACTION_MODE_LATCH:b=ur.ALPHA;break}break;case ur.MIXED:if(D<Me.PL)I=Me.MIXED_CHARS[D];else switch(D){case Me.PL:b=ur.PUNCT;break;case 26:I=" ";break;case Me.LL:b=ur.LOWER;break;case Me.AL:b=ur.ALPHA;break;case Me.PS:j=b,b=ur.PUNCT_SHIFT;break;case Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(d[S]);break;case Me.TEXT_COMPACTION_MODE_LATCH:b=ur.ALPHA;break}break;case ur.PUNCT:if(D<Me.PAL)I=Me.PUNCT_CHARS[D];else switch(D){case Me.PAL:b=ur.ALPHA;break;case Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(d[S]);break;case Me.TEXT_COMPACTION_MODE_LATCH:b=ur.ALPHA;break}break;case ur.ALPHA_SHIFT:if(b=j,D<26)I=String.fromCharCode(65+D);else switch(D){case 26:I=" ";break;case Me.TEXT_COMPACTION_MODE_LATCH:b=ur.ALPHA;break}break;case ur.PUNCT_SHIFT:if(b=j,D<Me.PAL)I=Me.PUNCT_CHARS[D];else switch(D){case Me.PAL:b=ur.ALPHA;break;case Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(d[S]);break;case Me.TEXT_COMPACTION_MODE_LATCH:b=ur.ALPHA;break}break}I!==""&&y.append(I),S++}}static byteCompaction(o,d,h,y,b){let j=new tu,S=0,D=0,I=!1;switch(o){case Me.BYTE_COMPACTION_MODE_LATCH:let V=new Int32Array(6),K=d[y++];for(;y<d[0]&&!I;)switch(V[S++]=K,D=900*D+K,K=d[y++],K){case Me.TEXT_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH:case Me.NUMERIC_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH_6:case Me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Me.MACRO_PDF417_TERMINATOR:y--,I=!0;break;default:if(S%5===0&&S>0){for(let Z=0;Z<6;++Z)j.write(Number(ji(D)>>ji(8*(5-Z))));D=0,S=0}break}y===d[0]&&K<Me.TEXT_COMPACTION_MODE_LATCH&&(V[S++]=K);for(let Z=0;Z<S;Z++)j.write(V[Z]);break;case Me.BYTE_COMPACTION_MODE_LATCH_6:for(;y<d[0]&&!I;){let Z=d[y++];if(Z<Me.TEXT_COMPACTION_MODE_LATCH)S++,D=900*D+Z;else switch(Z){case Me.TEXT_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH:case Me.NUMERIC_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH_6:case Me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Me.MACRO_PDF417_TERMINATOR:y--,I=!0;break}if(S%5===0&&S>0){for(let ie=0;ie<6;++ie)j.write(Number(ji(D)>>ji(8*(5-ie))));D=0,S=0}}break}return b.append($.decode(j.toByteArray(),h)),y}static numericCompaction(o,d,h){let y=0,b=!1,j=new Int32Array(Me.MAX_NUMERIC_CODEWORDS);for(;d<o[0]&&!b;){let S=o[d++];if(d===o[0]&&(b=!0),S<Me.TEXT_COMPACTION_MODE_LATCH)j[y]=S,y++;else switch(S){case Me.TEXT_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH_6:case Me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Me.MACRO_PDF417_TERMINATOR:d--,b=!0;break}(y%Me.MAX_NUMERIC_CODEWORDS===0||S===Me.NUMERIC_COMPACTION_MODE_LATCH||b)&&y>0&&(h.append(Me.decodeBase900toBase10(j,y)),y=0)}return d}static decodeBase900toBase10(o,d){let h=ji(0);for(let b=0;b<d;b++)h+=Me.EXP900[d-b-1]*ji(o[b]);let y=h.toString();if(y.charAt(0)!=="1")throw new R;return y.substring(1)}}Me.TEXT_COMPACTION_MODE_LATCH=900,Me.BYTE_COMPACTION_MODE_LATCH=901,Me.NUMERIC_COMPACTION_MODE_LATCH=902,Me.BYTE_COMPACTION_MODE_LATCH_6=924,Me.ECI_USER_DEFINED=925,Me.ECI_GENERAL_PURPOSE=926,Me.ECI_CHARSET=927,Me.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Me.MACRO_PDF417_TERMINATOR=922,Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Me.MAX_NUMERIC_CODEWORDS=15,Me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Me.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Me.PL=25,Me.LL=27,Me.AS=27,Me.ML=28,Me.AL=28,Me.PS=29,Me.PAL=29,Me.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Me.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Me.EXP900=y0()?Gd():[],Me.NUMBER_OF_SEQUENCE_CODEWORDS=2;class zt{constructor(){}static decode(o,d,h,y,b,j,S){let D=new Qa(o,d,h,y,b),I=null,V=null,K;for(let me=!0;;me=!1){if(d!=null&&(I=zt.getRowIndicatorColumn(o,D,d,!0,j,S)),y!=null&&(V=zt.getRowIndicatorColumn(o,D,y,!1,j,S)),K=zt.merge(I,V),K==null)throw se.getNotFoundInstance();let xe=K.getBoundingBox();if(me&&xe!=null&&(xe.getMinY()<D.getMinY()||xe.getMaxY()>D.getMaxY()))D=xe;else break}K.setBoundingBox(D);let Z=K.getBarcodeColumnCount()+1;K.setDetectionResultColumn(0,I),K.setDetectionResultColumn(Z,V);let ie=I!=null;for(let me=1;me<=Z;me++){let xe=ie?me:Z-me;if(K.getDetectionResultColumn(xe)!==void 0)continue;let Ae;xe===0||xe===Z?Ae=new qd(D,xe===0):Ae=new Ni(D),K.setDetectionResultColumn(xe,Ae);let Pe=-1,rt=Pe;for(let et=D.getMinY();et<=D.getMaxY();et++){if(Pe=zt.getStartColumn(K,xe,et,ie),Pe<0||Pe>D.getMaxX()){if(rt===-1)continue;Pe=rt}let Ze=zt.detectCodeword(o,D.getMinX(),D.getMaxX(),ie,Pe,et,j,S);Ze!=null&&(Ae.setCodeword(et,Ze),rt=Pe,j=Math.min(j,Ze.getWidth()),S=Math.max(S,Ze.getWidth()))}}return zt.createDecoderResult(K)}static merge(o,d){if(o==null&&d==null)return null;let h=zt.getBarcodeMetadata(o,d);if(h==null)return null;let y=Qa.merge(zt.adjustBoundingBox(o),zt.adjustBoundingBox(d));return new Es(h,y)}static adjustBoundingBox(o){if(o==null)return null;let d=o.getRowHeights();if(d==null)return null;let h=zt.getMax(d),y=0;for(let S of d)if(y+=h-S,S>0)break;let b=o.getCodewords();for(let S=0;y>0&&b[S]==null;S++)y--;let j=0;for(let S=d.length-1;S>=0&&(j+=h-d[S],!(d[S]>0));S--);for(let S=b.length-1;j>0&&b[S]==null;S--)j--;return o.getBoundingBox().addMissingRows(y,j,o.isLeft())}static getMax(o){let d=-1;for(let h of o)d=Math.max(d,h);return d}static getBarcodeMetadata(o,d){let h;if(o==null||(h=o.getBarcodeMetadata())==null)return d==null?null:d.getBarcodeMetadata();let y;return d==null||(y=d.getBarcodeMetadata())==null?h:h.getColumnCount()!==y.getColumnCount()&&h.getErrorCorrectionLevel()!==y.getErrorCorrectionLevel()&&h.getRowCount()!==y.getRowCount()?null:h}static getRowIndicatorColumn(o,d,h,y,b,j){let S=new qd(d,y);for(let D=0;D<2;D++){let I=D===0?1:-1,V=Math.trunc(Math.trunc(h.getX()));for(let K=Math.trunc(Math.trunc(h.getY()));K<=d.getMaxY()&&K>=d.getMinY();K+=I){let Z=zt.detectCodeword(o,0,o.getWidth(),y,V,K,b,j);Z!=null&&(S.setCodeword(K,Z),y?V=Z.getStartX():V=Z.getEndX())}}return S}static adjustCodewordCount(o,d){let h=d[0][1],y=h.getValue(),b=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-zt.getNumberOfECCodeWords(o.getBarcodeECLevel());if(y.length===0){if(b<1||b>St.MAX_CODEWORDS_IN_BARCODE)throw se.getNotFoundInstance();h.setValue(b)}else y[0]!==b&&h.setValue(b)}static createDecoderResult(o){let d=zt.createBarcodeMatrix(o);zt.adjustCodewordCount(o,d);let h=new Array,y=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),b=[],j=new Array;for(let D=0;D<o.getBarcodeRowCount();D++)for(let I=0;I<o.getBarcodeColumnCount();I++){let V=d[D][I+1].getValue(),K=D*o.getBarcodeColumnCount()+I;V.length===0?h.push(K):V.length===1?y[K]=V[0]:(j.push(K),b.push(V))}let S=new Array(b.length);for(let D=0;D<S.length;D++)S[D]=b[D];return zt.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),y,St.toIntArray(h),St.toIntArray(j),S)}static createDecoderResultFromAmbiguousValues(o,d,h,y,b){let j=new Int32Array(y.length),S=100;for(;S-- >0;){for(let D=0;D<j.length;D++)d[y[D]]=b[D][j[D]];try{return zt.decodeCodewords(d,o,h)}catch(D){if(!(D instanceof T))throw D}if(j.length===0)throw T.getChecksumInstance();for(let D=0;D<j.length;D++)if(j[D]<b[D].length-1){j[D]++;break}else if(j[D]=0,D===j.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(o){let d=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let y=0;y<d.length;y++)for(let b=0;b<d[y].length;b++)d[y][b]=new wi;let h=0;for(let y of o.getDetectionResultColumns()){if(y!=null){for(let b of y.getCodewords())if(b!=null){let j=b.getRowNumber();if(j>=0){if(j>=d.length)continue;d[j][h].setValue(b.getValue())}}}h++}return d}static isValidBarcodeColumn(o,d){return d>=0&&d<=o.getBarcodeColumnCount()+1}static getStartColumn(o,d,h,y){let b=y?1:-1,j=null;if(zt.isValidBarcodeColumn(o,d-b)&&(j=o.getDetectionResultColumn(d-b).getCodeword(h)),j!=null)return y?j.getEndX():j.getStartX();if(j=o.getDetectionResultColumn(d).getCodewordNearby(h),j!=null)return y?j.getStartX():j.getEndX();if(zt.isValidBarcodeColumn(o,d-b)&&(j=o.getDetectionResultColumn(d-b).getCodewordNearby(h)),j!=null)return y?j.getEndX():j.getStartX();let S=0;for(;zt.isValidBarcodeColumn(o,d-b);){d-=b;for(let D of o.getDetectionResultColumn(d).getCodewords())if(D!=null)return(y?D.getEndX():D.getStartX())+b*S*(D.getEndX()-D.getStartX());S++}return y?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,d,h,y,b,j,S,D){b=zt.adjustCodewordStartColumn(o,d,h,y,b,j);let I=zt.getModuleBitCount(o,d,h,y,b,j);if(I==null)return null;let V,K=lt.sum(I);if(y)V=b+K;else{for(let me=0;me<I.length/2;me++){let xe=I[me];I[me]=I[I.length-1-me],I[I.length-1-me]=xe}V=b,b=V-K}if(!zt.checkCodewordSkew(K,S,D))return null;let Z=Bs.getDecodedValue(I),ie=St.getCodeword(Z);return ie===-1?null:new Qn(b,V,zt.getCodewordBucketNumber(Z),ie)}static getModuleBitCount(o,d,h,y,b,j){let S=b,D=new Int32Array(8),I=0,V=y?1:-1,K=y;for(;(y?S<h:S>=d)&&I<D.length;)o.get(S,j)===K?(D[I]++,S+=V):(I++,K=!K);return I===D.length||S===(y?h:d)&&I===D.length-1?D:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,d,h,y,b,j){let S=b,D=y?-1:1;for(let I=0;I<2;I++){for(;(y?S>=d:S<h)&&y===o.get(S,j);){if(Math.abs(b-S)>zt.CODEWORD_SKEW_SIZE)return b;S+=D}D=-D,y=!y}return S}static checkCodewordSkew(o,d,h){return d-zt.CODEWORD_SKEW_SIZE<=o&&o<=h+zt.CODEWORD_SKEW_SIZE}static decodeCodewords(o,d,h){if(o.length===0)throw R.getFormatInstance();let y=1<<d+1,b=zt.correctErrors(o,h,y);zt.verifyCodewordCount(o,y);let j=Me.decode(o,""+d);return j.setErrorsCorrected(b),j.setErasures(h.length),j}static correctErrors(o,d,h){if(d!=null&&d.length>h/2+zt.MAX_ERRORS||h<0||h>zt.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return zt.errorCorrection.decode(o,h,d)}static verifyCodewordCount(o,d){if(o.length<4)throw R.getFormatInstance();let h=o[0];if(h>o.length)throw R.getFormatInstance();if(h===0)if(d<o.length)o[0]=o.length-d;else throw R.getFormatInstance()}static getBitCountForCodeword(o){let d=new Int32Array(8),h=0,y=d.length-1;for(;!((o&1)!==h&&(h=o&1,y--,y<0));)d[y]++,o>>=1;return d}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return zt.getCodewordBucketNumber(zt.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let d=new $l;for(let h=0;h<o.length;h++){d.format("Row %2d: ",h);for(let y=0;y<o[h].length;y++){let b=o[h][y];b.getValue().length===0?d.format("        ",null):d.format("%4d(%2d)",b.getValue()[0],b.getConfidence(b.getValue()[0]))}d.format("%n")}return d.toString()}}zt.CODEWORD_SKEW_SIZE=2,zt.MAX_ERRORS=3,zt.MAX_EC_CODEWORDS=512,zt.errorCorrection=new Za;class Fs{decode(o,d=null){let h=Fs.decode(o,d,!1);if(h==null||h.length===0||h[0]==null)throw se.getNotFoundInstance();return h[0]}decodeMultiple(o,d=null){try{return Fs.decode(o,d,!0)}catch(h){throw h instanceof R||h instanceof T?se.getNotFoundInstance():h}}static decode(o,d,h){const y=new Array,b=kt.detectMultiple(o,d,h);for(const j of b.getPoints()){const S=zt.decode(b.getBits(),j[4],j[5],j[6],j[7],Fs.getMinCodewordWidth(j),Fs.getMaxCodewordWidth(j)),D=new de(S.getText(),S.getRawBytes(),void 0,j,oe.PDF_417);D.putMetadata(qe.ERROR_CORRECTION_LEVEL,S.getECLevel());const I=S.getOther();I!=null&&D.putMetadata(qe.PDF417_EXTRA_METADATA,I),y.push(D)}return y.map(j=>j)}static getMaxWidth(o,d){return o==null||d==null?0:Math.trunc(Math.abs(o.getX()-d.getX()))}static getMinWidth(o,d){return o==null||d==null?P.MAX_VALUE:Math.trunc(Math.abs(o.getX()-d.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(Fs.getMaxWidth(o[0],o[4]),Fs.getMaxWidth(o[6],o[2])*St.MODULES_IN_CODEWORD/St.MODULES_IN_STOP_PATTERN),Math.max(Fs.getMaxWidth(o[1],o[5]),Fs.getMaxWidth(o[7],o[3])*St.MODULES_IN_CODEWORD/St.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(Fs.getMinWidth(o[0],o[4]),Fs.getMinWidth(o[6],o[2])*St.MODULES_IN_CODEWORD/St.MODULES_IN_STOP_PATTERN),Math.min(Fs.getMinWidth(o[1],o[5]),Fs.getMinWidth(o[7],o[3])*St.MODULES_IN_CODEWORD/St.MODULES_IN_STOP_PATTERN)))}reset(){}}class su extends x{}su.kind="ReaderException";class b0{constructor(o,d){this.verbose=o===!0,d&&this.setHints(d)}decode(o,d){return d&&this.setHints(d),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const d=!n(o)&&o.get(F.TRY_HARDER)===!0,h=n(o)?null:o.get(F.POSSIBLE_FORMATS),y=new Array;if(!n(h)){const b=h.some(j=>j===oe.UPC_A||j===oe.UPC_E||j===oe.EAN_13||j===oe.EAN_8||j===oe.CODABAR||j===oe.CODE_39||j===oe.CODE_93||j===oe.CODE_128||j===oe.ITF||j===oe.RSS_14||j===oe.RSS_EXPANDED);b&&!d&&y.push(new Kn(o,this.verbose)),h.includes(oe.QR_CODE)&&y.push(new Ka),h.includes(oe.DATA_MATRIX)&&y.push(new Wa),h.includes(oe.AZTEC)&&y.push(new Sr),h.includes(oe.PDF_417)&&y.push(new Fs),b&&d&&y.push(new Kn(o,this.verbose))}y.length===0&&(d||y.push(new Kn(o,this.verbose)),y.push(new Ka),y.push(new Wa),y.push(new Sr),y.push(new Fs),d&&y.push(new Kn(o,this.verbose))),this.readers=y}reset(){if(this.readers!==null)for(const o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new su("No readers where selected, nothing can be read.");for(const d of this.readers)try{return d.decode(o,this.hints)}catch(h){if(h instanceof su)continue}throw new se("No MultiFormat Readers were able to detect the code.")}}class v0 extends ge{constructor(o=null,d=500){const h=new b0;h.setHints(o),super(h,d)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class Jp extends ge{constructor(o=500){super(new Fs,o)}}class ey extends ge{constructor(o=500){super(new Ka,o)}}var Yd;(function(W){W[W.ERROR_CORRECTION=0]="ERROR_CORRECTION",W[W.CHARACTER_SET=1]="CHARACTER_SET",W[W.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",W[W.MIN_SIZE=3]="MIN_SIZE",W[W.MAX_SIZE=4]="MAX_SIZE",W[W.MARGIN=5]="MARGIN",W[W.PDF417_COMPACT=6]="PDF417_COMPACT",W[W.PDF417_COMPACTION=7]="PDF417_COMPACTION",W[W.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",W[W.AZTEC_LAYERS=9]="AZTEC_LAYERS",W[W.QR_VERSION=10]="QR_VERSION"})(Yd||(Yd={}));var bs=Yd;class Qo{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new st(o,Int32Array.from([1])))}buildGenerator(o){const d=this.cachedGenerators;if(o>=d.length){let h=d[d.length-1];const y=this.field;for(let b=d.length;b<=o;b++){const j=h.multiply(new st(y,Int32Array.from([1,y.exp(b-1+y.getGeneratorBase())])));d.push(j),h=j}}return d[o]}encode(o,d){if(d===0)throw new v("No error correction bytes");const h=o.length-d;if(h<=0)throw new v("No data bytes provided");const y=this.buildGenerator(d),b=new Int32Array(h);k.arraycopy(o,0,b,0,h);let j=new st(this.field,b);j=j.multiplyByMonomial(d,1);const D=j.divide(y)[1].getCoefficients(),I=d-D.length;for(let V=0;V<I;V++)o[h+V]=0;k.arraycopy(D,0,o,h+I,D.length)}}class Qr{constructor(){}static applyMaskPenaltyRule1(o){return Qr.applyMaskPenaltyRule1Internal(o,!0)+Qr.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let d=0;const h=o.getArray(),y=o.getWidth(),b=o.getHeight();for(let j=0;j<b-1;j++){const S=h[j];for(let D=0;D<y-1;D++){const I=S[D];I===S[D+1]&&I===h[j+1][D]&&I===h[j+1][D+1]&&d++}}return Qr.N2*d}static applyMaskPenaltyRule3(o){let d=0;const h=o.getArray(),y=o.getWidth(),b=o.getHeight();for(let j=0;j<b;j++)for(let S=0;S<y;S++){const D=h[j];S+6<y&&D[S]===1&&D[S+1]===0&&D[S+2]===1&&D[S+3]===1&&D[S+4]===1&&D[S+5]===0&&D[S+6]===1&&(Qr.isWhiteHorizontal(D,S-4,S)||Qr.isWhiteHorizontal(D,S+7,S+11))&&d++,j+6<b&&h[j][S]===1&&h[j+1][S]===0&&h[j+2][S]===1&&h[j+3][S]===1&&h[j+4][S]===1&&h[j+5][S]===0&&h[j+6][S]===1&&(Qr.isWhiteVertical(h,S,j-4,j)||Qr.isWhiteVertical(h,S,j+7,j+11))&&d++}return d*Qr.N3}static isWhiteHorizontal(o,d,h){d=Math.max(d,0),h=Math.min(h,o.length);for(let y=d;y<h;y++)if(o[y]===1)return!1;return!0}static isWhiteVertical(o,d,h,y){h=Math.max(h,0),y=Math.min(y,o.length);for(let b=h;b<y;b++)if(o[b][d]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let d=0;const h=o.getArray(),y=o.getWidth(),b=o.getHeight();for(let D=0;D<b;D++){const I=h[D];for(let V=0;V<y;V++)I[V]===1&&d++}const j=o.getHeight()*o.getWidth();return Math.floor(Math.abs(d*2-j)*10/j)*Qr.N4}static getDataMaskBit(o,d,h){let y,b;switch(o){case 0:y=h+d&1;break;case 1:y=h&1;break;case 2:y=d%3;break;case 3:y=(h+d)%3;break;case 4:y=Math.floor(h/2)+Math.floor(d/3)&1;break;case 5:b=h*d,y=(b&1)+b%3;break;case 6:b=h*d,y=(b&1)+b%3&1;break;case 7:b=h*d,y=b%3+(h+d&1)&1;break;default:throw new v("Invalid mask pattern: "+o)}return y===0}static applyMaskPenaltyRule1Internal(o,d){let h=0;const y=d?o.getHeight():o.getWidth(),b=d?o.getWidth():o.getHeight(),j=o.getArray();for(let S=0;S<y;S++){let D=0,I=-1;for(let V=0;V<b;V++){const K=d?j[S][V]:j[V][S];K===I?D++:(D>=5&&(h+=Qr.N1+(D-5)),D=1,I=K)}D>=5&&(h+=Qr.N1+(D-5))}return h}}Qr.N1=3,Qr.N2=3,Qr.N3=40,Qr.N4=10;class nu{constructor(o,d){this.width=o,this.height=d;const h=new Array(d);for(let y=0;y!==d;y++)h[y]=new Uint8Array(o);this.bytes=h}getHeight(){return this.height}getWidth(){return this.width}get(o,d){return this.bytes[d][o]}getArray(){return this.bytes}setNumber(o,d,h){this.bytes[d][o]=h}setBoolean(o,d,h){this.bytes[d][o]=h?1:0}clear(o){for(const d of this.bytes)L.fill(d,o)}equals(o){if(!(o instanceof nu))return!1;const d=o;if(this.width!==d.width||this.height!==d.height)return!1;for(let h=0,y=this.height;h<y;++h){const b=this.bytes[h],j=d.bytes[h];for(let S=0,D=this.width;S<D;++S)if(b[S]!==j[S])return!1}return!0}toString(){const o=new ee;for(let d=0,h=this.height;d<h;++d){const y=this.bytes[d];for(let b=0,j=this.width;b<j;++b)switch(y[b]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}class Hi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new ee;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<Hi.NUM_MASK_PATTERNS}}Hi.NUM_MASK_PATTERNS=8;class pr extends x{}pr.kind="WriterException";class Ct{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,d,h,y,b){Ct.clearMatrix(b),Ct.embedBasicPatterns(h,b),Ct.embedTypeInfo(d,y,b),Ct.maybeEmbedVersionInfo(h,b),Ct.embedDataBits(o,y,b)}static embedBasicPatterns(o,d){Ct.embedPositionDetectionPatternsAndSeparators(d),Ct.embedDarkDotAtLeftBottomCorner(d),Ct.maybeEmbedPositionAdjustmentPatterns(o,d),Ct.embedTimingPatterns(d)}static embedTypeInfo(o,d,h){const y=new H;Ct.makeTypeInfoBits(o,d,y);for(let b=0,j=y.getSize();b<j;++b){const S=y.get(y.getSize()-1-b),D=Ct.TYPE_INFO_COORDINATES[b],I=D[0],V=D[1];if(h.setBoolean(I,V,S),b<8){const K=h.getWidth()-b-1;h.setBoolean(K,8,S)}else{const Z=h.getHeight()-7+(b-8);h.setBoolean(8,Z,S)}}}static maybeEmbedVersionInfo(o,d){if(o.getVersionNumber()<7)return;const h=new H;Ct.makeVersionInfoBits(o,h);let y=17;for(let b=0;b<6;++b)for(let j=0;j<3;++j){const S=h.get(y);y--,d.setBoolean(b,d.getHeight()-11+j,S),d.setBoolean(d.getHeight()-11+j,b,S)}}static embedDataBits(o,d,h){let y=0,b=-1,j=h.getWidth()-1,S=h.getHeight()-1;for(;j>0;){for(j===6&&(j-=1);S>=0&&S<h.getHeight();){for(let D=0;D<2;++D){const I=j-D;if(!Ct.isEmpty(h.get(I,S)))continue;let V;y<o.getSize()?(V=o.get(y),++y):V=!1,d!==255&&Qr.getDataMaskBit(d,I,S)&&(V=!V),h.setBoolean(I,S,V)}S+=b}b=-b,S+=b,j-=2}if(y!==o.getSize())throw new pr("Not all bits consumed: "+y+"/"+o.getSize())}static findMSBSet(o){return 32-P.numberOfLeadingZeros(o)}static calculateBCHCode(o,d){if(d===0)throw new v("0 polynomial");const h=Ct.findMSBSet(d);for(o<<=h-1;Ct.findMSBSet(o)>=h;)o^=d<<Ct.findMSBSet(o)-h;return o}static makeTypeInfoBits(o,d,h){if(!Hi.isValidMaskPattern(d))throw new pr("Invalid mask pattern");const y=o.getBits()<<3|d;h.appendBits(y,5);const b=Ct.calculateBCHCode(y,Ct.TYPE_INFO_POLY);h.appendBits(b,10);const j=new H;if(j.appendBits(Ct.TYPE_INFO_MASK_PATTERN,15),h.xor(j),h.getSize()!==15)throw new pr("should not happen but we got: "+h.getSize())}static makeVersionInfoBits(o,d){d.appendBits(o.getVersionNumber(),6);const h=Ct.calculateBCHCode(o.getVersionNumber(),Ct.VERSION_INFO_POLY);if(d.appendBits(h,12),d.getSize()!==18)throw new pr("should not happen but we got: "+d.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let d=8;d<o.getWidth()-8;++d){const h=(d+1)%2;Ct.isEmpty(o.get(d,6))&&o.setNumber(d,6,h),Ct.isEmpty(o.get(6,d))&&o.setNumber(6,d,h)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new pr;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,d,h){for(let y=0;y<8;++y){if(!Ct.isEmpty(h.get(o+y,d)))throw new pr;h.setNumber(o+y,d,0)}}static embedVerticalSeparationPattern(o,d,h){for(let y=0;y<7;++y){if(!Ct.isEmpty(h.get(o,d+y)))throw new pr;h.setNumber(o,d+y,0)}}static embedPositionAdjustmentPattern(o,d,h){for(let y=0;y<5;++y){const b=Ct.POSITION_ADJUSTMENT_PATTERN[y];for(let j=0;j<5;++j)h.setNumber(o+j,d+y,b[j])}}static embedPositionDetectionPattern(o,d,h){for(let y=0;y<7;++y){const b=Ct.POSITION_DETECTION_PATTERN[y];for(let j=0;j<7;++j)h.setNumber(o+j,d+y,b[j])}}static embedPositionDetectionPatternsAndSeparators(o){const d=Ct.POSITION_DETECTION_PATTERN[0].length;Ct.embedPositionDetectionPattern(0,0,o),Ct.embedPositionDetectionPattern(o.getWidth()-d,0,o),Ct.embedPositionDetectionPattern(0,o.getWidth()-d,o);const h=8;Ct.embedHorizontalSeparationPattern(0,h-1,o),Ct.embedHorizontalSeparationPattern(o.getWidth()-h,h-1,o),Ct.embedHorizontalSeparationPattern(0,o.getWidth()-h,o);const y=7;Ct.embedVerticalSeparationPattern(y,0,o),Ct.embedVerticalSeparationPattern(o.getHeight()-y-1,0,o),Ct.embedVerticalSeparationPattern(y,o.getHeight()-y,o)}static maybeEmbedPositionAdjustmentPatterns(o,d){if(o.getVersionNumber()<2)return;const h=o.getVersionNumber()-1,y=Ct.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[h];for(let b=0,j=y.length;b!==j;b++){const S=y[b];if(S>=0)for(let D=0;D!==j;D++){const I=y[D];I>=0&&Ct.isEmpty(d.get(I,S))&&Ct.embedPositionAdjustmentPattern(I-2,S-2,d)}}}}Ct.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ct.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ct.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ct.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ct.VERSION_INFO_POLY=7973,Ct.TYPE_INFO_POLY=1335,Ct.TYPE_INFO_MASK_PATTERN=21522;class ty{constructor(o,d){this.dataBytes=o,this.errorCorrectionBytes=d}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Mr{constructor(){}static calculateMaskPenalty(o){return Qr.applyMaskPenaltyRule1(o)+Qr.applyMaskPenaltyRule2(o)+Qr.applyMaskPenaltyRule3(o)+Qr.applyMaskPenaltyRule4(o)}static encode(o,d,h=null){let y=Mr.DEFAULT_BYTE_MODE_ENCODING;const b=h!==null&&h.get(bs.CHARACTER_SET)!==void 0;b&&(y=h.get(bs.CHARACTER_SET).toString());const j=this.chooseMode(o,y),S=new H;if(j===Nt.BYTE&&(b||Mr.DEFAULT_BYTE_MODE_ENCODING!==y)){const et=U.getCharacterSetECIByName(y);et!==void 0&&this.appendECI(et,S)}this.appendModeInfo(j,S);const D=new H;this.appendBytes(o,j,D,y);let I;if(h!==null&&h.get(bs.QR_VERSION)!==void 0){const et=Number.parseInt(h.get(bs.QR_VERSION).toString(),10);I=yt.getVersionForNumber(et);const Ze=this.calculateBitsNeeded(j,S,D,I);if(!this.willFit(Ze,I,d))throw new pr("Data too big for requested version")}else I=this.recommendVersion(d,j,S,D);const V=new H;V.appendBitArray(S);const K=j===Nt.BYTE?D.getSizeInBytes():o.length;this.appendLengthInfo(K,I,j,V),V.appendBitArray(D);const Z=I.getECBlocksForLevel(d),ie=I.getTotalCodewords()-Z.getTotalECCodewords();this.terminateBits(ie,V);const me=this.interleaveWithECBytes(V,I.getTotalCodewords(),ie,Z.getNumBlocks()),xe=new Hi;xe.setECLevel(d),xe.setMode(j),xe.setVersion(I);const Ae=I.getDimensionForVersion(),Pe=new nu(Ae,Ae),rt=this.chooseMaskPattern(me,d,I,Pe);return xe.setMaskPattern(rt),Ct.buildMatrix(me,d,I,rt,Pe),xe.setMatrix(Pe),xe}static recommendVersion(o,d,h,y){const b=this.calculateBitsNeeded(d,h,y,yt.getVersionForNumber(1)),j=this.chooseVersion(b,o),S=this.calculateBitsNeeded(d,h,y,j);return this.chooseVersion(S,o)}static calculateBitsNeeded(o,d,h,y){return d.getSize()+o.getCharacterCountBits(y)+h.getSize()}static getAlphanumericCode(o){return o<Mr.ALPHANUMERIC_TABLE.length?Mr.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,d=null){if(U.SJIS.getName()===d&&this.isOnlyDoubleByteKanji(o))return Nt.KANJI;let h=!1,y=!1;for(let b=0,j=o.length;b<j;++b){const S=o.charAt(b);if(Mr.isDigit(S))h=!0;else if(this.getAlphanumericCode(S.charCodeAt(0))!==-1)y=!0;else return Nt.BYTE}return y?Nt.ALPHANUMERIC:h?Nt.NUMERIC:Nt.BYTE}static isOnlyDoubleByteKanji(o){let d;try{d=$.encode(o,U.SJIS)}catch{return!1}const h=d.length;if(h%2!==0)return!1;for(let y=0;y<h;y+=2){const b=d[y]&255;if((b<129||b>159)&&(b<224||b>235))return!1}return!0}static chooseMaskPattern(o,d,h,y){let b=Number.MAX_SAFE_INTEGER,j=-1;for(let S=0;S<Hi.NUM_MASK_PATTERNS;S++){Ct.buildMatrix(o,d,h,S,y);let D=this.calculateMaskPenalty(y);D<b&&(b=D,j=S)}return j}static chooseVersion(o,d){for(let h=1;h<=40;h++){const y=yt.getVersionForNumber(h);if(Mr.willFit(o,y,d))return y}throw new pr("Data too big")}static willFit(o,d,h){const y=d.getTotalCodewords(),j=d.getECBlocksForLevel(h).getTotalECCodewords(),S=y-j,D=(o+7)/8;return S>=D}static terminateBits(o,d){const h=o*8;if(d.getSize()>h)throw new pr("data bits cannot fit in the QR Code"+d.getSize()+" > "+h);for(let j=0;j<4&&d.getSize()<h;++j)d.appendBit(!1);const y=d.getSize()&7;if(y>0)for(let j=y;j<8;j++)d.appendBit(!1);const b=o-d.getSizeInBytes();for(let j=0;j<b;++j)d.appendBits((j&1)===0?236:17,8);if(d.getSize()!==h)throw new pr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,d,h,y,b,j){if(y>=h)throw new pr("Block ID too large");const S=o%h,D=h-S,I=Math.floor(o/h),V=I+1,K=Math.floor(d/h),Z=K+1,ie=I-K,me=V-Z;if(ie!==me)throw new pr("EC bytes mismatch");if(h!==D+S)throw new pr("RS blocks mismatch");if(o!==(K+ie)*D+(Z+me)*S)throw new pr("Total bytes mismatch");y<D?(b[0]=K,j[0]=ie):(b[0]=Z,j[0]=me)}static interleaveWithECBytes(o,d,h,y){if(o.getSizeInBytes()!==h)throw new pr("Number of bits and data bytes does not match");let b=0,j=0,S=0;const D=new Array;for(let V=0;V<y;++V){const K=new Int32Array(1),Z=new Int32Array(1);Mr.getNumDataBytesAndNumECBytesForBlockID(d,h,y,V,K,Z);const ie=K[0],me=new Uint8Array(ie);o.toBytes(8*b,me,0,ie);const xe=Mr.generateECBytes(me,Z[0]);D.push(new ty(me,xe)),j=Math.max(j,ie),S=Math.max(S,xe.length),b+=K[0]}if(h!==b)throw new pr("Data bytes does not match offset");const I=new H;for(let V=0;V<j;++V)for(const K of D){const Z=K.getDataBytes();V<Z.length&&I.appendBits(Z[V],8)}for(let V=0;V<S;++V)for(const K of D){const Z=K.getErrorCorrectionBytes();V<Z.length&&I.appendBits(Z[V],8)}if(d!==I.getSizeInBytes())throw new pr("Interleaving error: "+d+" and "+I.getSizeInBytes()+" differ.");return I}static generateECBytes(o,d){const h=o.length,y=new Int32Array(h+d);for(let j=0;j<h;j++)y[j]=o[j]&255;new Qo(we.QR_CODE_FIELD_256).encode(y,d);const b=new Uint8Array(d);for(let j=0;j<d;j++)b[j]=y[h+j];return b}static appendModeInfo(o,d){d.appendBits(o.getBits(),4)}static appendLengthInfo(o,d,h,y){const b=h.getCharacterCountBits(d);if(o>=1<<b)throw new pr(o+" is bigger than "+((1<<b)-1));y.appendBits(o,b)}static appendBytes(o,d,h,y){switch(d){case Nt.NUMERIC:Mr.appendNumericBytes(o,h);break;case Nt.ALPHANUMERIC:Mr.appendAlphanumericBytes(o,h);break;case Nt.BYTE:Mr.append8BitBytes(o,h,y);break;case Nt.KANJI:Mr.appendKanjiBytes(o,h);break;default:throw new pr("Invalid mode: "+d)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const d=Mr.getDigit(o);return d>=0&&d<=9}static appendNumericBytes(o,d){const h=o.length;let y=0;for(;y<h;){const b=Mr.getDigit(o.charAt(y));if(y+2<h){const j=Mr.getDigit(o.charAt(y+1)),S=Mr.getDigit(o.charAt(y+2));d.appendBits(b*100+j*10+S,10),y+=3}else if(y+1<h){const j=Mr.getDigit(o.charAt(y+1));d.appendBits(b*10+j,7),y+=2}else d.appendBits(b,4),y++}}static appendAlphanumericBytes(o,d){const h=o.length;let y=0;for(;y<h;){const b=Mr.getAlphanumericCode(o.charCodeAt(y));if(b===-1)throw new pr;if(y+1<h){const j=Mr.getAlphanumericCode(o.charCodeAt(y+1));if(j===-1)throw new pr;d.appendBits(b*45+j,11),y+=2}else d.appendBits(b,6),y++}}static append8BitBytes(o,d,h){let y;try{y=$.encode(o,h)}catch(b){throw new pr(b)}for(let b=0,j=y.length;b!==j;b++){const S=y[b];d.appendBits(S,8)}}static appendKanjiBytes(o,d){let h;try{h=$.encode(o,U.SJIS)}catch(b){throw new pr(b)}const y=h.length;for(let b=0;b<y;b+=2){const j=h[b]&255,S=h[b+1]&255,D=j<<8&4294967295|S;let I=-1;if(D>=33088&&D<=40956?I=D-33088:D>=57408&&D<=60351&&(I=D-49472),I===-1)throw new pr("Invalid byte sequence");const V=(I>>8)*192+(I&255);d.appendBits(V,13)}}static appendECI(o,d){d.appendBits(Nt.ECI.getBits(),4),d.appendBits(o.getValue(),8)}}Mr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Mr.DEFAULT_BYTE_MODE_ENCODING=U.UTF8.getName();class Gi{write(o,d,h,y=null){if(o.length===0)throw new v("Found empty contents");if(d<0||h<0)throw new v("Requested dimensions are too small: "+d+"x"+h);let b=Ht.L,j=Gi.QUIET_ZONE_SIZE;y!==null&&(y.get(bs.ERROR_CORRECTION)!==void 0&&(b=Ht.fromString(y.get(bs.ERROR_CORRECTION).toString())),y.get(bs.MARGIN)!==void 0&&(j=Number.parseInt(y.get(bs.MARGIN).toString(),10)));const S=Mr.encode(o,b,y);return this.renderResult(S,d,h,j)}writeToDom(o,d,h,y,b=null){typeof o=="string"&&(o=document.querySelector(o));const j=this.write(d,h,y,b);o&&o.appendChild(j)}renderResult(o,d,h,y){const b=o.getMatrix();if(b===null)throw new ue;const j=b.getWidth(),S=b.getHeight(),D=j+y*2,I=S+y*2,V=Math.max(d,D),K=Math.max(h,I),Z=Math.min(Math.floor(V/D),Math.floor(K/I)),ie=Math.floor((V-j*Z)/2),me=Math.floor((K-S*Z)/2),xe=this.createSVGElement(V,K);for(let Ae=0,Pe=me;Ae<S;Ae++,Pe+=Z)for(let rt=0,et=ie;rt<j;rt++,et+=Z)if(b.get(rt,Ae)===1){const Ze=this.createSvgRectElement(et,Pe,Z,Z);xe.appendChild(Ze)}return xe}createSVGElement(o,d){const h=document.createElementNS(Gi.SVG_NS,"svg");return h.setAttributeNS(null,"height",o.toString()),h.setAttributeNS(null,"width",d.toString()),h}createSvgRectElement(o,d,h,y){const b=document.createElementNS(Gi.SVG_NS,"rect");return b.setAttributeNS(null,"x",o.toString()),b.setAttributeNS(null,"y",d.toString()),b.setAttributeNS(null,"height",h.toString()),b.setAttributeNS(null,"width",y.toString()),b.setAttributeNS(null,"fill","#000000"),b}}Gi.QUIET_ZONE_SIZE=4,Gi.SVG_NS="http://www.w3.org/2000/svg";class Hl{encode(o,d,h,y,b){if(o.length===0)throw new v("Found empty contents");if(d!==oe.QR_CODE)throw new v("Can only encode QR_CODE, but got "+d);if(h<0||y<0)throw new v(`Requested dimensions are too small: ${h}x${y}`);let j=Ht.L,S=Hl.QUIET_ZONE_SIZE;b!==null&&(b.get(bs.ERROR_CORRECTION)!==void 0&&(j=Ht.fromString(b.get(bs.ERROR_CORRECTION).toString())),b.get(bs.MARGIN)!==void 0&&(S=Number.parseInt(b.get(bs.MARGIN).toString(),10)));const D=Mr.encode(o,j,b);return Hl.renderResult(D,h,y,S)}static renderResult(o,d,h,y){const b=o.getMatrix();if(b===null)throw new ue;const j=b.getWidth(),S=b.getHeight(),D=j+y*2,I=S+y*2,V=Math.max(d,D),K=Math.max(h,I),Z=Math.min(Math.floor(V/D),Math.floor(K/I)),ie=Math.floor((V-j*Z)/2),me=Math.floor((K-S*Z)/2),xe=new ce(V,K);for(let Ae=0,Pe=me;Ae<S;Ae++,Pe+=Z)for(let rt=0,et=ie;rt<j;rt++,et+=Z)b.get(rt,Ae)===1&&xe.setRegion(et,Pe,Z,Z);return xe}}Hl.QUIET_ZONE_SIZE=4;class ry{encode(o,d,h,y,b){let j;switch(d){case oe.QR_CODE:j=new Hl;break;default:throw new v("No encoder available for format "+d)}return j.encode(o,d,h,y,b)}}class Na extends pe{constructor(o,d,h,y,b,j,S,D){if(super(j,S),this.yuvData=o,this.dataWidth=d,this.dataHeight=h,this.left=y,this.top=b,y+j>d||b+S>h)throw new v("Crop rectangle does not fit within image data.");D&&this.reverseHorizontal(j,S)}getRow(o,d){if(o<0||o>=this.getHeight())throw new v("Requested row is outside the image: "+o);const h=this.getWidth();(d==null||d.length<h)&&(d=new Uint8ClampedArray(h));const y=(o+this.top)*this.dataWidth+this.left;return k.arraycopy(this.yuvData,y,d,0,h),d}getMatrix(){const o=this.getWidth(),d=this.getHeight();if(o===this.dataWidth&&d===this.dataHeight)return this.yuvData;const h=o*d,y=new Uint8ClampedArray(h);let b=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return k.arraycopy(this.yuvData,b,y,0,h),y;for(let j=0;j<d;j++){const S=j*o;k.arraycopy(this.yuvData,b,y,S,o),b+=this.dataWidth}return y}isCropSupported(){return!0}crop(o,d,h,y){return new Na(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+d,h,y,!1)}renderThumbnail(){const o=this.getWidth()/Na.THUMBNAIL_SCALE_FACTOR,d=this.getHeight()/Na.THUMBNAIL_SCALE_FACTOR,h=new Int32Array(o*d),y=this.yuvData;let b=this.top*this.dataWidth+this.left;for(let j=0;j<d;j++){const S=j*o;for(let D=0;D<o;D++){const I=y[b+D*Na.THUMBNAIL_SCALE_FACTOR]&255;h[S+D]=4278190080|I*65793}b+=this.dataWidth*Na.THUMBNAIL_SCALE_FACTOR}return h}getThumbnailWidth(){return this.getWidth()/Na.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Na.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,d){const h=this.yuvData;for(let y=0,b=this.top*this.dataWidth+this.left;y<d;y++,b+=this.dataWidth){const j=b+o/2;for(let S=b,D=b+o-1;S<j;S++,D--){const I=h[S];h[S]=h[D],h[D]=I}}}invert(){return new be(this)}}Na.THUMBNAIL_SCALE_FACTOR=2;class Xd extends pe{constructor(o,d,h,y,b,j,S){if(super(d,h),this.dataWidth=y,this.dataHeight=b,this.left=j,this.top=S,o.BYTES_PER_ELEMENT===4){const D=d*h,I=new Uint8ClampedArray(D);for(let V=0;V<D;V++){const K=o[V],Z=K>>16&255,ie=K>>7&510,me=K&255;I[V]=(Z+ie+me)/4&255}this.luminances=I}else this.luminances=o;if(y===void 0&&(this.dataWidth=d),b===void 0&&(this.dataHeight=h),j===void 0&&(this.left=0),S===void 0&&(this.top=0),this.left+d>this.dataWidth||this.top+h>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(o,d){if(o<0||o>=this.getHeight())throw new v("Requested row is outside the image: "+o);const h=this.getWidth();(d==null||d.length<h)&&(d=new Uint8ClampedArray(h));const y=(o+this.top)*this.dataWidth+this.left;return k.arraycopy(this.luminances,y,d,0,h),d}getMatrix(){const o=this.getWidth(),d=this.getHeight();if(o===this.dataWidth&&d===this.dataHeight)return this.luminances;const h=o*d,y=new Uint8ClampedArray(h);let b=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return k.arraycopy(this.luminances,b,y,0,h),y;for(let j=0;j<d;j++){const S=j*o;k.arraycopy(this.luminances,b,y,S,o),b+=this.dataWidth}return y}isCropSupported(){return!0}crop(o,d,h,y){return new Xd(this.luminances,h,y,this.dataWidth,this.dataHeight,this.left+o,this.top+d)}invert(){return new be(this)}}class N0 extends U{static forName(o){return this.getCharacterSetECIByName(o)}}class Jo{}Jo.ISO_8859_1=U.ISO8859_1;class Gl{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class w0{static singletonList(o){return[o]}static min(o,d){return o.sort(d)[0]}}class j0{constructor(o){this.previous=o}getPrevious(){return this.previous}}class Yi extends j0{constructor(o,d,h){super(o),this.value=d,this.bitCount=h}appendTo(o,d){o.appendBits(this.value,this.bitCount)}add(o,d){return new Yi(this,o,d)}addBinaryShift(o,d){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Yi(this,o,d)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+P.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class au extends Yi{constructor(o,d,h){super(o,0,0),this.binaryShiftStart=d,this.binaryShiftByteCount=h}appendTo(o,d){for(let h=0;h<this.binaryShiftByteCount;h++)(h===0||h===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):h===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(d[this.binaryShiftStart+h],8)}addBinaryShift(o,d){return new au(this,o,d)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function S0(W,o,d){return new au(W,o,d)}function Yl(W,o,d){return new Yi(W,o,d)}const Xl=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Si=0,iu=1,Pn=2,Wd=3,Jn=4,ec=new Yi(null,0,0),Xi=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function sy(W){for(let o of W)L.fill(o,-1);return W[Si][Jn]=0,W[iu][Jn]=0,W[iu][Si]=28,W[Wd][Jn]=0,W[Pn][Jn]=0,W[Pn][Si]=15,W}const tc=sy(L.createInt32Array(6,6));class ea{constructor(o,d,h,y){this.token=o,this.mode=d,this.binaryShiftByteCount=h,this.bitCount=y}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,d){let h=this.bitCount,y=this.token;if(o!==this.mode){let j=Xi[this.mode][o];y=Yl(y,j&65535,j>>16),h+=j>>16}let b=o===Pn?4:5;return y=Yl(y,d,b),new ea(y,o,0,h+b)}shiftAndAppend(o,d){let h=this.token,y=this.mode===Pn?4:5;return h=Yl(h,tc[this.mode][o],y),h=Yl(h,d,5),new ea(h,this.mode,0,this.bitCount+y+5)}addBinaryShiftChar(o){let d=this.token,h=this.mode,y=this.bitCount;if(this.mode===Jn||this.mode===Pn){let S=Xi[h][Si];d=Yl(d,S&65535,S>>16),y+=S>>16,h=Si}let b=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,j=new ea(d,h,this.binaryShiftByteCount+1,y+b);return j.binaryShiftByteCount===2078&&(j=j.endBinaryShift(o+1)),j}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let d=this.token;return d=S0(d,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new ea(d,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let d=this.bitCount+(Xi[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?d+=ea.calculateBinaryShiftCost(o)-ea.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(d+=10),d<=o.bitCount}toBitArray(o){let d=[];for(let y=this.endBinaryShift(o.length).token;y!==null;y=y.getPrevious())d.unshift(y);let h=new H;for(const y of d)y.appendTo(h,o);return h}toString(){return G.format("%s bits=%d bytes=%d",Xl[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}ea.INITIAL_STATE=new ea(ec,Si,0,0);function C0(W){const o=G.getCharCode(" "),d=G.getCharCode("."),h=G.getCharCode(",");W[Si][o]=1;const y=G.getCharCode("Z"),b=G.getCharCode("A");for(let Z=b;Z<=y;Z++)W[Si][Z]=Z-b+2;W[iu][o]=1;const j=G.getCharCode("z"),S=G.getCharCode("a");for(let Z=S;Z<=j;Z++)W[iu][Z]=Z-S+2;W[Pn][o]=1;const D=G.getCharCode("9"),I=G.getCharCode("0");for(let Z=I;Z<=D;Z++)W[Pn][Z]=Z-I+2;W[Pn][h]=12,W[Pn][d]=13;const V=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let Z=0;Z<V.length;Z++)W[Wd][G.getCharCode(V[Z])]=Z;const K=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Z=0;Z<K.length;Z++)G.getCharCode(K[Z])>0&&(W[Jn][G.getCharCode(K[Z])]=Z);return W}const rc=C0(L.createInt32Array(5,256));class Wi{constructor(o){this.text=o}encode(){const o=G.getCharCode(" "),d=G.getCharCode(`
`);let h=w0.singletonList(ea.INITIAL_STATE);for(let b=0;b<this.text.length;b++){let j,S=b+1<this.text.length?this.text[b+1]:0;switch(this.text[b]){case G.getCharCode("\r"):j=S===d?2:0;break;case G.getCharCode("."):j=S===o?3:0;break;case G.getCharCode(","):j=S===o?4:0;break;case G.getCharCode(":"):j=S===o?5:0;break;default:j=0}j>0?(h=Wi.updateStateListForPair(h,b,j),b++):h=this.updateStateListForChar(h,b)}return w0.min(h,(b,j)=>b.getBitCount()-j.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,d){const h=[];for(let y of o)this.updateStateForChar(y,d,h);return Wi.simplifyStates(h)}updateStateForChar(o,d,h){let y=this.text[d]&255,b=rc[o.getMode()][y]>0,j=null;for(let S=0;S<=Jn;S++){let D=rc[S][y];if(D>0){if(j==null&&(j=o.endBinaryShift(d)),!b||S===o.getMode()||S===Pn){const I=j.latchAndAppend(S,D);h.push(I)}if(!b&&tc[o.getMode()][S]>=0){const I=j.shiftAndAppend(S,D);h.push(I)}}}if(o.getBinaryShiftByteCount()>0||rc[o.getMode()][y]===0){let S=o.addBinaryShiftChar(d);h.push(S)}}static updateStateListForPair(o,d,h){const y=[];for(let b of o)this.updateStateForPair(b,d,h,y);return this.simplifyStates(y)}static updateStateForPair(o,d,h,y){let b=o.endBinaryShift(d);if(y.push(b.latchAndAppend(Jn,h)),o.getMode()!==Jn&&y.push(b.shiftAndAppend(Jn,h)),h===3||h===4){let j=b.latchAndAppend(Pn,16-h).latchAndAppend(Pn,1);y.push(j)}if(o.getBinaryShiftByteCount()>0){let j=o.addBinaryShiftChar(d).addBinaryShiftChar(d+1);y.push(j)}}static simplifyStates(o){let d=[];for(const h of o){let y=!0;for(const b of d){if(b.isBetterThanOrEqualTo(h)){y=!1;break}h.isBetterThanOrEqualTo(b)&&(d=d.filter(j=>j!==b))}y&&d.push(h)}return d}}class Kt{constructor(){}static encodeBytes(o){return Kt.encode(o,Kt.DEFAULT_EC_PERCENT,Kt.DEFAULT_AZTEC_LAYERS)}static encode(o,d,h){let y=new Wi(o).encode(),b=P.truncDivision(y.getSize()*d,100)+11,j=y.getSize()+b,S,D,I,V,K;if(h!==Kt.DEFAULT_AZTEC_LAYERS){if(S=h<0,D=Math.abs(h),D>(S?Kt.MAX_NB_BITS_COMPACT:Kt.MAX_NB_BITS))throw new v(G.format("Illegal value %s for layers",h));I=Kt.totalBitsInLayer(D,S),V=Kt.WORD_SIZE[D];let Ze=I-I%V;if(K=Kt.stuffBits(y,V),K.getSize()+b>Ze)throw new v("Data to large for user specified layer");if(S&&K.getSize()>V*64)throw new v("Data to large for user specified layer")}else{V=0,K=null;for(let Ze=0;;Ze++){if(Ze>Kt.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(S=Ze<=3,D=S?Ze+1:Ze,I=Kt.totalBitsInLayer(D,S),j>I)continue;(K==null||V!==Kt.WORD_SIZE[D])&&(V=Kt.WORD_SIZE[D],K=Kt.stuffBits(y,V));let $t=I-I%V;if(!(S&&K.getSize()>V*64)&&K.getSize()+b<=$t)break}}let Z=Kt.generateCheckWords(K,I,V),ie=K.getSize()/V,me=Kt.generateModeMessage(S,D,ie),xe=(S?11:14)+D*4,Ae=new Int32Array(xe),Pe;if(S){Pe=xe;for(let Ze=0;Ze<Ae.length;Ze++)Ae[Ze]=Ze}else{Pe=xe+1+2*P.truncDivision(P.truncDivision(xe,2)-1,15);let Ze=P.truncDivision(xe,2),$t=P.truncDivision(Pe,2);for(let Pt=0;Pt<Ze;Pt++){let ds=Pt+P.truncDivision(Pt,15);Ae[Ze-Pt-1]=$t-ds-1,Ae[Ze+Pt]=$t+ds+1}}let rt=new ce(Pe);for(let Ze=0,$t=0;Ze<D;Ze++){let Pt=(D-Ze)*4+(S?9:12);for(let ds=0;ds<Pt;ds++){let In=ds*2;for(let ln=0;ln<2;ln++)Z.get($t+In+ln)&&rt.set(Ae[Ze*2+ln],Ae[Ze*2+ds]),Z.get($t+Pt*2+In+ln)&&rt.set(Ae[Ze*2+ds],Ae[xe-1-Ze*2-ln]),Z.get($t+Pt*4+In+ln)&&rt.set(Ae[xe-1-Ze*2-ln],Ae[xe-1-Ze*2-ds]),Z.get($t+Pt*6+In+ln)&&rt.set(Ae[xe-1-Ze*2-ds],Ae[Ze*2+ln])}$t+=Pt*8}if(Kt.drawModeMessage(rt,S,Pe,me),S)Kt.drawBullsEye(rt,P.truncDivision(Pe,2),5);else{Kt.drawBullsEye(rt,P.truncDivision(Pe,2),7);for(let Ze=0,$t=0;Ze<P.truncDivision(xe,2)-1;Ze+=15,$t+=16)for(let Pt=P.truncDivision(Pe,2)&1;Pt<Pe;Pt+=2)rt.set(P.truncDivision(Pe,2)-$t,Pt),rt.set(P.truncDivision(Pe,2)+$t,Pt),rt.set(Pt,P.truncDivision(Pe,2)-$t),rt.set(Pt,P.truncDivision(Pe,2)+$t)}let et=new Gl;return et.setCompact(S),et.setSize(Pe),et.setLayers(D),et.setCodeWords(ie),et.setMatrix(rt),et}static drawBullsEye(o,d,h){for(let y=0;y<h;y+=2)for(let b=d-y;b<=d+y;b++)o.set(b,d-y),o.set(b,d+y),o.set(d-y,b),o.set(d+y,b);o.set(d-h,d-h),o.set(d-h+1,d-h),o.set(d-h,d-h+1),o.set(d+h,d-h),o.set(d+h,d-h+1),o.set(d+h,d+h-1)}static generateModeMessage(o,d,h){let y=new H;return o?(y.appendBits(d-1,2),y.appendBits(h-1,6),y=Kt.generateCheckWords(y,28,4)):(y.appendBits(d-1,5),y.appendBits(h-1,11),y=Kt.generateCheckWords(y,40,4)),y}static drawModeMessage(o,d,h,y){let b=P.truncDivision(h,2);if(d)for(let j=0;j<7;j++){let S=b-3+j;y.get(j)&&o.set(S,b-5),y.get(j+7)&&o.set(b+5,S),y.get(20-j)&&o.set(S,b+5),y.get(27-j)&&o.set(b-5,S)}else for(let j=0;j<10;j++){let S=b-5+j+P.truncDivision(j,5);y.get(j)&&o.set(S,b-7),y.get(j+10)&&o.set(b+7,S),y.get(29-j)&&o.set(S,b+7),y.get(39-j)&&o.set(b-7,S)}}static generateCheckWords(o,d,h){let y=o.getSize()/h,b=new Qo(Kt.getGF(h)),j=P.truncDivision(d,h),S=Kt.bitsToWords(o,h,j);b.encode(S,j-y);let D=d%h,I=new H;I.appendBits(0,D);for(const V of Array.from(S))I.appendBits(V,h);return I}static bitsToWords(o,d,h){let y=new Int32Array(h),b,j;for(b=0,j=o.getSize()/d;b<j;b++){let S=0;for(let D=0;D<d;D++)S|=o.get(b*d+D)?1<<d-D-1:0;y[b]=S}return y}static getGF(o){switch(o){case 4:return we.AZTEC_PARAM;case 6:return we.AZTEC_DATA_6;case 8:return we.AZTEC_DATA_8;case 10:return we.AZTEC_DATA_10;case 12:return we.AZTEC_DATA_12;default:throw new v("Unsupported word size "+o)}}static stuffBits(o,d){let h=new H,y=o.getSize(),b=(1<<d)-2;for(let j=0;j<y;j+=d){let S=0;for(let D=0;D<d;D++)(j+D>=y||o.get(j+D))&&(S|=1<<d-1-D);(S&b)===b?(h.appendBits(S&b,d),j--):(S&b)===0?(h.appendBits(S|1,d),j--):h.appendBits(S,d)}return h}static totalBitsInLayer(o,d){return((d?88:112)+16*o)*o}}Kt.DEFAULT_EC_PERCENT=33,Kt.DEFAULT_AZTEC_LAYERS=0,Kt.MAX_NB_BITS=32,Kt.MAX_NB_BITS_COMPACT=4,Kt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class sc{encode(o,d,h,y){return this.encodeWithHints(o,d,h,y,null)}encodeWithHints(o,d,h,y,b){let j=Jo.ISO_8859_1,S=Kt.DEFAULT_EC_PERCENT,D=Kt.DEFAULT_AZTEC_LAYERS;return b!=null&&(b.has(bs.CHARACTER_SET)&&(j=N0.forName(b.get(bs.CHARACTER_SET).toString())),b.has(bs.ERROR_CORRECTION)&&(S=P.parseInt(b.get(bs.ERROR_CORRECTION).toString())),b.has(bs.AZTEC_LAYERS)&&(D=P.parseInt(b.get(bs.AZTEC_LAYERS).toString()))),sc.encodeLayers(o,d,h,y,j,S,D)}static encodeLayers(o,d,h,y,b,j,S){if(d!==oe.AZTEC)throw new v("Can only encode AZTEC, but got "+d);let D=Kt.encode(G.getBytes(o,b),j,S);return sc.renderResult(D,h,y)}static renderResult(o,d,h){let y=o.getMatrix();if(y==null)throw new ue;let b=y.getWidth(),j=y.getHeight(),S=Math.max(d,b),D=Math.max(h,j),I=Math.min(S/b,D/j),V=(S-b*I)/2,K=(D-j*I)/2,Z=new ce(S,D);for(let ie=0,me=K;ie<j;ie++,me+=I)for(let xe=0,Ae=V;xe<b;xe++,Ae+=I)y.get(xe,ie)&&Z.setRegion(Ae,me,I,I);return Z}}s.AbstractExpandedDecoder=Zr,s.ArgumentException=p,s.ArithmeticException=Le,s.AztecCode=Gl,s.AztecCodeReader=Sr,s.AztecCodeWriter=sc,s.AztecDecoder=tt,s.AztecDetector=_r,s.AztecDetectorResult=Fe,s.AztecEncoder=Kt,s.AztecHighLevelEncoder=Wi,s.AztecPoint=Et,s.BarcodeFormat=oe,s.Binarizer=E,s.BinaryBitmap=C,s.BitArray=H,s.BitMatrix=ce,s.BitSource=Zn,s.BrowserAztecCodeReader=cs,s.BrowserBarcodeReader=Kp,s.BrowserCodeReader=ge,s.BrowserDatamatrixCodeReader=Qc,s.BrowserMultiFormatReader=v0,s.BrowserPDF417Reader=Jp,s.BrowserQRCodeReader=ey,s.BrowserQRCodeSvgWriter=Gi,s.CharacterSetECI=U,s.ChecksumException=T,s.Code128Reader=ve,s.Code39Reader=Je,s.DataMatrixDecodedBitStreamParser=Xa,s.DataMatrixReader=Wa,s.DecodeHintType=F,s.DecoderResult=Ne,s.DefaultGridSampler=mr,s.DetectorResult=at,s.EAN13Reader=le,s.EncodeHintType=bs,s.Exception=x,s.FormatException=R,s.GenericGF=we,s.GenericGFPoly=st,s.GlobalHistogramBinarizer=J,s.GridSampler=Gt,s.GridSamplerInstance=ct,s.HTMLCanvasElementLuminanceSource=te,s.HybridBinarizer=ne,s.ITFReader=nt,s.IllegalArgumentException=v,s.IllegalStateException=ue,s.InvertedLuminanceSource=be,s.LuminanceSource=pe,s.MathUtils=lt,s.MultiFormatOneDReader=Kn,s.MultiFormatReader=b0,s.MultiFormatWriter=ry,s.NotFoundException=se,s.OneDReader=_t,s.PDF417DecodedBitStreamParser=Me,s.PDF417DecoderErrorCorrection=Za,s.PDF417Reader=Fs,s.PDF417ResultMetadata=ql,s.PerspectiveTransform=rr,s.PlanarYUVLuminanceSource=Na,s.QRCodeByteMatrix=nu,s.QRCodeDataMask=Nn,s.QRCodeDecodedBitStreamParser=Pr,s.QRCodeDecoderErrorCorrectionLevel=Ht,s.QRCodeDecoderFormatInformation=As,s.QRCodeEncoder=Mr,s.QRCodeEncoderQRCode=Hi,s.QRCodeMaskUtil=Qr,s.QRCodeMatrixUtil=Ct,s.QRCodeMode=Nt,s.QRCodeReader=Ka,s.QRCodeVersion=yt,s.QRCodeWriter=Hl,s.RGBLuminanceSource=Xd,s.RSS14Reader=xr,s.RSSExpandedReader=Ke,s.ReaderException=su,s.ReedSolomonDecoder=He,s.ReedSolomonEncoder=Qo,s.ReedSolomonException=Ue,s.Result=de,s.ResultMetadataType=qe,s.ResultPoint=We,s.StringUtils=G,s.UnsupportedOperationException=Y,s.VideoInputDevice=X,s.WhiteRectangleDetector=ft,s.WriterException=pr,s.ZXingArrays=L,s.ZXingCharset=N0,s.ZXingInteger=P,s.ZXingStandardCharsets=Jo,s.ZXingStringBuilder=ee,s.ZXingStringEncoding=$,s.ZXingSystem=k,s.createAbstractExpandedDecoder=Ve,Object.defineProperty(s,"__esModule",{value:!0})}))})(ef,ef.exports)),ef.exports}var Xr=tfe();const rfe=Vi(Xr),sfe=yD({__proto__:null,default:rfe},[Xr]);var LO=(function(){function e(t,s,n){if(this.formatMap=new Map([[ht.QR_CODE,Xr.BarcodeFormat.QR_CODE],[ht.AZTEC,Xr.BarcodeFormat.AZTEC],[ht.CODABAR,Xr.BarcodeFormat.CODABAR],[ht.CODE_39,Xr.BarcodeFormat.CODE_39],[ht.CODE_93,Xr.BarcodeFormat.CODE_93],[ht.CODE_128,Xr.BarcodeFormat.CODE_128],[ht.DATA_MATRIX,Xr.BarcodeFormat.DATA_MATRIX],[ht.MAXICODE,Xr.BarcodeFormat.MAXICODE],[ht.ITF,Xr.BarcodeFormat.ITF],[ht.EAN_13,Xr.BarcodeFormat.EAN_13],[ht.EAN_8,Xr.BarcodeFormat.EAN_8],[ht.PDF_417,Xr.BarcodeFormat.PDF_417],[ht.RSS_14,Xr.BarcodeFormat.RSS_14],[ht.RSS_EXPANDED,Xr.BarcodeFormat.RSS_EXPANDED],[ht.UPC_A,Xr.BarcodeFormat.UPC_A],[ht.UPC_E,Xr.BarcodeFormat.UPC_E],[ht.UPC_EAN_EXTENSION,Xr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!sfe)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=s,this.logger=n;var a=this.createZXingFormats(t),l=new Map;l.set(Xr.DecodeHintType.POSSIBLE_FORMATS,a),l.set(Xr.DecodeHintType.TRY_HARDER,!1),this.hints=l}return e.prototype.decodeAsync=function(t){var s=this;return new Promise(function(n,a){try{n(s.decode(t))}catch(l){a(l)}})},e.prototype.decode=function(t){var s=new Xr.MultiFormatReader(this.verbose,this.hints),n=new Xr.HTMLCanvasElementLuminanceSource(t),a=new Xr.BinaryBitmap(new Xr.HybridBinarizer(n)),l=s.decode(a);return{text:l.text,format:UR.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(s,n,a){t.set(s,n)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var s=[],n=0,a=t;n<a.length;n++){var l=a[n];this.formatMap.has(l)?s.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return s},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),nfe=function(e,t,s,n){function a(l){return l instanceof s?l:new s(function(u){u(l)})}return new(s||(s=Promise))(function(l,u){function f(p){try{x(n.next(p))}catch(v){u(v)}}function m(p){try{x(n.throw(p))}catch(v){u(v)}}function x(p){p.done?l(p.value):a(p.value).then(f,m)}x((n=n.apply(e,t||[])).next())})},afe=function(e,t){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,a,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(x){return function(p){return m([x,p])}}function m(x){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,x[0]&&(s=0)),s;)try{if(n=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return s.label++,{value:x[1],done:!1};case 5:s.label++,a=x[1],x=[0];continue;case 7:x=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){s=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){s.label=x[1];break}if(x[0]===6&&s.label<l[1]){s.label=l[1],l=x;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(x);break}l[2]&&s.ops.pop(),s.trys.pop();continue}x=t.call(e,s)}catch(p){x=[6,p],a=0}finally{n=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},BO=(function(){function e(t,s,n){if(this.formatMap=new Map([[ht.QR_CODE,"qr_code"],[ht.AZTEC,"aztec"],[ht.CODABAR,"codabar"],[ht.CODE_39,"code_39"],[ht.CODE_93,"code_93"],[ht.CODE_128,"code_128"],[ht.DATA_MATRIX,"data_matrix"],[ht.ITF,"itf"],[ht.EAN_13,"ean_13"],[ht.EAN_8,"ean_8"],[ht.PDF_417,"pdf417"],[ht.UPC_A,"upc_a"],[ht.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=s,this.logger=n;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return nfe(this,void 0,void 0,function(){var s,n;return afe(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(s=a.sent(),!s||s.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(s),[2,{text:n.rawValue,format:UR.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var s=null,n=0,a=0,l=t;a<l.length;a++){var u=l[a],f=u.boundingBox.width*u.boundingBox.height;f>n&&(n=f,s=u)}if(!s)throw"No largest barcode found";return s},e.prototype.createBarcodeDetectorFormats=function(t){for(var s=[],n=0,a=t;n<a.length;n++){var l=a[n];this.formatMap.has(l)?s.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:s}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(s,n,a){t.set(s,n)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),FO=function(e,t,s,n){function a(l){return l instanceof s?l:new s(function(u){u(l)})}return new(s||(s=Promise))(function(l,u){function f(p){try{x(n.next(p))}catch(v){u(v)}}function m(p){try{x(n.throw(p))}catch(v){u(v)}}function x(p){p.done?l(p.value):a(p.value).then(f,m)}x((n=n.apply(e,t||[])).next())})},UO=function(e,t){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,a,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(x){return function(p){return m([x,p])}}function m(x){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,x[0]&&(s=0)),s;)try{if(n=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return s.label++,{value:x[1],done:!1};case 5:s.label++,a=x[1],x=[0];continue;case 7:x=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){s=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){s.label=x[1];break}if(x[0]===6&&s.label<l[1]){s.label=l[1],l=x;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(x);break}l[2]&&s.ops.pop(),s.trys.pop();continue}x=t.call(e,s)}catch(p){x=[6,p],a=0}finally{n=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},ife=(function(){function e(t,s,n,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,s&&BO.isSupported()?(this.primaryDecoder=new BO(t,n,a),this.secondaryDecoder=new LO(t,n,a)):this.primaryDecoder=new LO(t,n,a)}return e.prototype.decodeAsync=function(t){return FO(this,void 0,void 0,function(){var s;return UO(this,function(n){switch(n.label){case 0:s=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(s),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return FO(this,void 0,void 0,function(){var s,n;return UO(this,function(a){switch(a.label){case 0:s=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(n=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(s),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var s=performance.now()-t;this.executionResults.push(s),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,s=0,n=this.executionResults;s<n.length;s++){var a=n[s];t+=a}var l=t/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),_S=(function(){var e=function(t,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},e(t,s)};return function(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(t,s);function n(){this.constructor=t}t.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),qx=function(e,t,s,n){function a(l){return l instanceof s?l:new s(function(u){u(l)})}return new(s||(s=Promise))(function(l,u){function f(p){try{x(n.next(p))}catch(v){u(v)}}function m(p){try{x(n.throw(p))}catch(v){u(v)}}function x(p){p.done?l(p.value):a(p.value).then(f,m)}x((n=n.apply(e,t||[])).next())})},Hx=function(e,t){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,a,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(x){return function(p){return m([x,p])}}function m(x){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,x[0]&&(s=0)),s;)try{if(n=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return s.label++,{value:x[1],done:!1};case 5:s.label++,a=x[1],x=[0];continue;case 7:x=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){s=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){s.label=x[1];break}if(x[0]===6&&s.label<l[1]){s.label=l[1],l=x;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(x);break}l[2]&&s.ops.pop(),s.trys.pop();continue}x=t.call(e,s)}catch(p){x=[6,p],a=0}finally{n=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},VR=(function(){function e(t,s){this.name=t,this.track=s}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var s={};s[this.name]=t;var n={advanced:[s]};return this.track.applyConstraints(n)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var s=t[this.name];return s}return null},e})(),lfe=(function(e){_S(t,e);function t(s,n){return e.call(this,s,n)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(s){var n={};n[this.name]=s;var a={advanced:[n]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var s=this.track.getCapabilities(),n=s[this.name];return{min:n.min,max:n.max,step:n.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(VR),ofe=(function(e){_S(t,e);function t(s){return e.call(this,"zoom",s)||this}return t})(lfe),cfe=(function(e){_S(t,e);function t(s){return e.call(this,"torch",s)||this}return t})(VR),ufe=(function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new ofe(this.track)},e.prototype.torchFeature=function(){return new cfe(this.track)},e})(),dfe=(function(){function e(t,s,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=s,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var s=document.createElement("video");return s.style.width="".concat(t,"px"),s.style.display="block",s.muted=!0,s.setAttribute("muted","true"),s.playsInline=!0,s},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var s=function(){var n=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,a),t.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,s,n,a){return qx(this,void 0,void 0,function(){var l,u;return Hx(this,function(f){switch(f.label){case 0:return l=new e(t,s,a),n.aspectRatio?(u={aspectRatio:n.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(u)]):[3,2];case 1:f.sent(),f.label=2;case 2:return l.setupSurface(),[2,l]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var s=this,n=function(){setTimeout(t,200),s.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return qx(this,void 0,void 0,function(){return Hx(this,function(s){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(s,n){var a=t.mediaStream.getVideoTracks(),l=a.length,u=0;t.mediaStream.getVideoTracks().forEach(function(f){t.mediaStream.removeTrack(f),f.stop(),++u,u>=l&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),s())})})},e.prototype.getCapabilities=function(){return new ufe(this.getFirstTrackOrFail())},e})(),hfe=(function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,s,n){return qx(this,void 0,void 0,function(){return Hx(this,function(a){return[2,dfe.create(t,this.mediaStream,s,n)]})})},e.create=function(t){return qx(this,void 0,void 0,function(){var s,n;return Hx(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return s={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(s)];case 1:return n=a.sent(),[2,new e(n)]}})})},e})(),zO=function(e,t,s,n){function a(l){return l instanceof s?l:new s(function(u){u(l)})}return new(s||(s=Promise))(function(l,u){function f(p){try{x(n.next(p))}catch(v){u(v)}}function m(p){try{x(n.throw(p))}catch(v){u(v)}}function x(p){p.done?l(p.value):a(p.value).then(f,m)}x((n=n.apply(e,t||[])).next())})},VO=function(e,t){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,a,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(x){return function(p){return m([x,p])}}function m(x){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,x[0]&&(s=0)),s;)try{if(n=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return s.label++,{value:x[1],done:!1};case 5:s.label++,a=x[1],x=[0];continue;case 7:x=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){s=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){s.label=x[1];break}if(x[0]===6&&s.label<l[1]){s.label=l[1],l=x;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(x);break}l[2]&&s.ops.pop(),s.trys.pop();continue}x=t.call(e,s)}catch(p){x=[6,p],a=0}finally{n=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},ffe=(function(){function e(){}return e.failIfNotSupported=function(){return zO(this,void 0,void 0,function(){return VO(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return zO(this,void 0,void 0,function(){return VO(this,function(s){return[2,hfe.create(t)]})})},e})(),mfe=function(e,t,s,n){function a(l){return l instanceof s?l:new s(function(u){u(l)})}return new(s||(s=Promise))(function(l,u){function f(p){try{x(n.next(p))}catch(v){u(v)}}function m(p){try{x(n.throw(p))}catch(v){u(v)}}function x(p){p.done?l(p.value):a(p.value).then(f,m)}x((n=n.apply(e,t||[])).next())})},gfe=function(e,t){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,a,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(x){return function(p){return m([x,p])}}function m(x){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,x[0]&&(s=0)),s;)try{if(n=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return s.label++,{value:x[1],done:!1};case 5:s.label++,a=x[1],x=[0];continue;case 7:x=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){s=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){s.label=x[1];break}if(x[0]===6&&s.label<l[1]){s.label=l[1],l=x;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(x);break}l[2]&&s.ops.pop(),s.trys.pop();continue}x=t.call(e,s)}catch(p){x=[6,p],a=0}finally{n=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},xfe=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Zu.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Zu.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return mfe(this,void 0,void 0,function(){var t,s,n,a,l,u,f;return gfe(this,function(m){switch(m.label){case 0:return t=function(x){for(var p=x.getVideoTracks(),v=0,C=p;v<C.length;v++){var T=C[v];T.enabled=!1,T.stop(),x.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return s=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=m.sent(),a=[],l=0,u=n;l<u.length;l++)f=u[l],f.kind==="videoinput"&&a.push({id:f.deviceId,label:f.label});return t(s),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,s){var n=function(l){for(var u=[],f=0,m=l;f<m.length;f++){var x=m[f];x.kind==="video"&&u.push({id:x.id,label:x.label})}t(u)},a=MediaStreamTrack;a.getSources(n)})},e})(),ms;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(ms||(ms={}));var pfe=(function(){function e(){this.state=ms.NOT_STARTED,this.onGoingTransactionNewState=ms.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===ms.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ms.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===ms.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ms.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ms.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case ms.UNKNOWN:throw"Transition from unknown is not allowed";case ms.NOT_STARTED:this.failIfNewStateIs(t,[ms.PAUSED]);break;case ms.SCANNING:break;case ms.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,s){for(var n=0,a=s;n<a.length;n++){var l=a[n];if(t===l)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e})(),yfe=(function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===ms.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==ms.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ms.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===ms.PAUSED},e})(),bfe=(function(){function e(){}return e.create=function(){return new yfe(new pfe)},e})(),vfe=(function(){var e=function(t,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},e(t,s)};return function(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(t,s);function n(){this.constructor=t}t.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),oa=(function(e){vfe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(Zhe),Nfe=(function(){function e(t,s){this.logger=s,this.fps=oa.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=oa.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?zR.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!fl(this.qrbox)},e.create=function(t,s){return new e(t,s)},e})(),n2=(function(){function e(t,s){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var n;typeof s=="boolean"?this.verbose=s===!0:s&&(n=s,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new Jhe(this.verbose),this.qrcode=new ife(this.getSupportedFormats(s),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=bfe.create()}return e.prototype.start=function(t,s,n,a){var l=this;if(!t)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var u;a?u=a:u=this.verbose?this.logger.log:function(){};var f=Nfe.create(s,this.logger);this.clearElement();var m=!1;f.videoConstraints&&(f.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=m,p=document.getElementById(this.elementId);p.clientWidth?p.clientWidth:oa.DEFAULT_WIDTH,p.style.position="relative",this.shouldScan=!0,this.element=p;var v=this,C=this.stateManagerProxy.startTransition(ms.SCANNING);return new Promise(function(T,E){var k=x?f.videoConstraints:v.createVideoConstraints(t);if(!k){C.cancel(),E("videoConstraints should be defined");return}var O={};(!x||f.aspectRatio)&&(O.aspectRatio=f.aspectRatio);var M={onRenderSurfaceReady:function(L,P){v.setupUi(L,P,f),v.isScanning=!0,v.foreverScan(f,n,u)}};ffe.failIfNotSupported().then(function(L){L.create(k).then(function(P){return P.render(l.element,O,M).then(function(H){v.renderedCamera=H,C.execute(),T(null)}).catch(function(H){C.cancel(),E(H)})}).catch(function(P){C.cancel(),E(Zu.errorGettingUserMedia(P))})}).catch(function(L){C.cancel(),E(Zu.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ms.PAUSED),this.showPausedState(),(fl(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,s=function(){t.stateManagerProxy.directTransition(ms.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){s();return}this.renderedCamera.resume(function(){s()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var s=this.stateManagerProxy.startTransition(ms.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var l=document.getElementById(oa.SHADED_REGION_ELEMENT_ID);l&&t.element.removeChild(l)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),n(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),s.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,s){return this.scanFileV2(t,s).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(t,s){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(fl(s)&&(s=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,l){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var u=new Image;u.onload=function(){var f=u.width,m=u.height,x=document.getElementById(n.elementId),p=x.clientWidth?x.clientWidth:oa.DEFAULT_WIDTH,v=Math.max(x.clientHeight?x.clientHeight:m,oa.FILE_SCAN_MIN_HEIGHT),C=n.computeCanvasDrawConfig(f,m,p,v);if(s){var T=n.createCanvasElement(p,v,"qr-canvas-visible");T.style.display="inline-block",x.appendChild(T);var E=T.getContext("2d");if(!E)throw"Unable to get 2d context from canvas";E.canvas.width=p,E.canvas.height=v,E.drawImage(u,0,0,f,m,C.x,C.y,C.width,C.height)}var k=oa.FILE_SCAN_HIDDEN_CANVAS_PADDING,O=Math.max(u.width,C.width),M=Math.max(u.height,C.height),L=O+2*k,P=M+2*k,H=n.createCanvasElement(L,P);x.appendChild(H);var B=H.getContext("2d");if(!B)throw"Unable to get 2d context from canvas";B.canvas.width=L,B.canvas.height=P,B.drawImage(u,0,0,f,m,k,k,O,M);try{n.qrcode.decodeRobustlyAsync(H).then(function(F){a(MO.createFromQrcodeResult(F))}).catch(l)}catch(F){l("QR code parse error, error = ".concat(F))}},u.onerror=l,u.onabort=l,u.onstalled=l,u.onsuspend=l,u.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return xfe.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!zR.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var s=[ht.QR_CODE,ht.AZTEC,ht.CODABAR,ht.CODE_39,ht.CODE_93,ht.CODE_128,ht.DATA_MATRIX,ht.MAXICODE,ht.ITF,ht.EAN_13,ht.EAN_8,ht.PDF_417,ht.RSS_14,ht.RSS_EXPANDED,ht.UPC_A,ht.UPC_E,ht.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return s;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],a=0,l=t.formatsToSupport;a<l.length;a++){var u=l[a];Khe(u)?n.push(u):this.logger.warn("Invalid format: ".concat(u," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(fl(t))return!0;if(!fl(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(fl(t.experimentalFeatures))return!0;var s=t.experimentalFeatures;return fl(s.useBarCodeDetectorIfSupported)?!0:s.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,s,n){var a=this,l=n.qrbox;this.validateQrboxConfig(l);var u=this.toQrdimensions(t,s,l),f=function(x){if(x<oa.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(oa.MIN_QR_BOX_SIZE,"px.")},m=function(x){return x>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=t),x};f(u.width),f(u.height),u.width=m(u.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,s,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(t,s)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return n},e.prototype.setupUi=function(t,s,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,s,n);var a=fl(n.qrbox)?{width:t,height:s}:n.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(t,s,a);l.height>s&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var u=n.isShadedBoxEnabled()&&l.height<=s,f={x:0,y:0,width:t,height:s},m=u?this.getShadedRegionBounds(t,s,l):f,x=this.createCanvasElement(m.width,m.height),p={willReadFrequently:!0},v=x.getContext("2d",p);v.canvas.width=m.width,v.canvas.height=m.height,this.element.append(x),u&&this.possiblyInsertShadingElement(this.element,t,s,l),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=v,this.canvasElement=x},e.prototype.createScannerPausedUiElement=function(t){var s=document.createElement("div");s.innerText=Zu.scannerPaused(),s.style.display="none",s.style.position="absolute",s.style.top="0px",s.style.zIndex="1",s.style.background="rgba(9, 9, 9, 0.46)",s.style.color="#FFECEC",s.style.textAlign="center",s.style.width="100%",t.appendChild(s),this.scannerPausedUiElement=s},e.prototype.scanContext=function(t,s){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,MO.createFromQrcodeResult(a)),n.possiblyUpdateShaders(!0),!0}).catch(function(a){n.possiblyUpdateShaders(!1);var l=Zu.codeParseError(a);return s(l,Qhe.createFrom(l)),!1})},e.prototype.foreverScan=function(t,s,n){var a=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),u=l.videoWidth/l.clientWidth,f=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*u,x=this.qrRegion.height*f,p=this.qrRegion.x*u,v=this.qrRegion.y*f;this.context.drawImage(l,p,v,m,x,0,0,this.qrRegion.width,this.qrRegion.height);var C=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,s,n)},a.getTimeoutFps(t.fps))};this.scanContext(s,n).then(function(T){!T&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(s,n).finally(function(){C()})):C()}).catch(function(T){a.logger.logError("Error happend while scanning context",T),C()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var s="facingMode",n="deviceId",a={user:!0,environment:!0},l="exact",u=function(E){if(E in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(E,"'")},f=Object.keys(t);if(f.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(f.length," keys");var m=Object.keys(t)[0];if(m!==s&&m!==n)throw"Only '".concat(s,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(m===s){var x=t.facingMode;if(typeof x=="string"){if(u(x))return{facingMode:x}}else if(typeof x=="object")if(l in x){if(u(x["".concat(l)]))return{facingMode:{exact:x["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var p=typeof x;throw"Invalid type of 'facingMode' = ".concat(p)}}else{var v=t.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(l in v)return{deviceId:{exact:v["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var C=typeof v;throw"Invalid type of 'deviceId' = ".concat(C)}}}var T=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},e.prototype.computeCanvasDrawConfig=function(t,s,n,a){if(t<=n&&s<=a){var l=(n-t)/2,u=(a-s)/2;return{x:l,y:u,width:t,height:s}}else{var f=t,m=s;return t>n&&(s=n/t*s,t=n),s>a&&(t=a/s*t,s=a),this.logger.log("Image downsampled from "+"".concat(f,"X").concat(m)+" to ".concat(t,"X").concat(s,".")),this.computeCanvasDrawConfig(t,s,n,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(s){s.style.backgroundColor=t?oa.BORDER_SHADER_MATCH_COLOR:oa.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,s,n){var a=t,l=s,u=document.createElement("canvas");return u.style.width="".concat(a,"px"),u.style.height="".concat(l,"px"),u.style.display="none",u.id=fl(n)?"qr-canvas":n,u},e.prototype.getShadedRegionBounds=function(t,s,n){if(n.width>t||n.height>s)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(s-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(t,s,n,a){if(!(s-a.width<1||n-a.height<1)){var l=document.createElement("div");l.style.position="absolute";var u=(s-a.width)/2,f=(n-a.height)/2;if(l.style.borderLeft="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(oa.SHADED_REGION_ELEMENT_ID),s-a.width<11||n-a.height<11)this.hasBorderShaders=!1;else{var m=5,x=40;this.insertShaderBorders(l,x,m,-m,null,0,!0),this.insertShaderBorders(l,x,m,-m,null,0,!1),this.insertShaderBorders(l,x,m,null,-m,0,!0),this.insertShaderBorders(l,x,m,null,-m,0,!1),this.insertShaderBorders(l,m,x+m,-m,null,-m,!0),this.insertShaderBorders(l,m,x+m,null,-m,-m,!0),this.insertShaderBorders(l,m,x+m,-m,null,-m,!1),this.insertShaderBorders(l,m,x+m,null,-m,-m,!1),this.hasBorderShaders=!0}t.append(l)}},e.prototype.insertShaderBorders=function(t,s,n,a,l,u,f){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=oa.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(s,"px"),m.style.height="".concat(n,"px"),a!==null&&(m.style.top="".concat(a,"px")),l!==null&&(m.style.bottom="".concat(l,"px")),f?m.style.left="".concat(u,"px"):m.style.right="".concat(u,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),t.appendChild(m)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e})(),$O;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})($O||($O={}));class wfe extends w.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){console.error("Scanner Error:",t,s)}render(){return this.state.hasError?r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-red-800 font-semibold",children:"Scanner Error"}),r.jsx("p",{className:"text-sm text-red-600 mt-2",children:"Please refresh the page to try again."}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Refresh Page"})]}):this.props.children}}const $R=w.memo(({scannerContainerId:e})=>{const t=w.useRef(null),s=w.useRef(null);return w.useEffect(()=>(console.log("[ScannerContainer] Mounted ONCE",{scannerContainerId:e,containerExists:!!document.getElementById(e)}),()=>{console.log("[ScannerContainer] Unmounting (should only happen on page leave)",{scannerContainerId:e})}),[e]),r.jsx("div",{id:e,ref:t,className:"relative w-full aspect-square max-w-[90vw] sm:max-w-lg lg:max-w-xl mx-auto rounded-xl overflow-hidden bg-gray-100 border-2 border-dashed border-gray-300",style:{minHeight:"min(80vw, 400px)"},children:r.jsxs("div",{ref:s,"data-placeholder":"true",className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500 p-4 z-10 bg-gray-100",children:[r.jsx(lP,{className:"w-10 h-10 sm:w-12 sm:h-12 mb-3"}),r.jsx("p",{className:"text-sm font-medium text-center",children:"Camera Preview"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1 text-center",children:"Tap the button below to start scanning"})]})})},()=>!0);$R.displayName="ScannerContainer";function jfe(){const[e,t]=w.useState(!1),[s,n]=w.useState(null),[a,l]=w.useState("unknown"),[u,f]=w.useState([]),[m,x]=w.useState(null),[p,v]=w.useState(!1),[C,T]=w.useState([]),[E,k]=w.useState(""),[O,M]=w.useState(!0),[L,P]=w.useState(!1),[H,B]=w.useState(null),[F,R]=w.useState(!1),[z,U]=w.useState(null),[Y,$]=w.useState(!1),G=w.useRef(null),ee=w.useRef(`qr-scanner-${Date.now()}`).current,ce=w.useRef(!1),se=w.useRef(!0),J=w.useRef(0);w.useEffect(()=>{console.log("[ScanQR] State changed:",{isScanning:e,isLoading:p,permissionStatus:a,availableCameras:u.length,hasScanner:!!G.current})},[e,p,a,u]),w.useEffect(()=>{console.log("[ScanQR] Component mounted",{scannerContainerId:ee});const we=window.location.protocol==="https:"||window.location.hostname==="localhost";M(we);const Ue=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return P(Ue),se.current=!0,()=>{if(console.log("[ScanQR] Component unmounting",{scannerContainerId:ee,hasScanner:!!G.current,isCleaningUp:ce.current}),se.current=!1,G.current&&!ce.current){ce.current=!0;const ue=G.current;try{const He=ue.getState();console.log("[ScanQR] Unmount cleanup - scanner state:",He),He===2&&ue.stop().catch(Se=>{console.log("[ScanQR] Unmount stop error:",Se.message)})}catch(He){console.log("[ScanQR] Unmount cleanup error:",He.message)}G.current=null,setTimeout(()=>{const He=document.getElementById(ee);console.log("[ScanQR] Clearing container after unmount:",{containerExists:!!He,children:He?.children.length||0}),He&&(He.innerHTML="")},0)}}},[ee]);const ne=async()=>{try{const we=await n2.getCameras();if(we&&we.length>0){f(we);const Ue=we.find(ue=>{const He=ue.label.toLowerCase();return He.includes("back")||He.includes("rear")||He.includes("environment")||He.includes("0")});return x(Ue?.id||we[0].id),l("granted"),!0}else return k("No cameras found on this device."),l("error"),!1}catch(we){return console.error("Error getting cameras:",we),pe(we),!1}},pe=we=>{console.error("Camera error:",we);const Ue=we.name||"",ue=we.message||"";Ue==="NotAllowedError"||ue.includes("Permission")?(l("denied"),k(L?"Camera permission denied. On mobile, please go to your browser settings, find this site, and allow camera access.":"Camera permission was denied. Please allow camera access in your browser settings.")):Ue==="NotFoundError"||ue.includes("not found")?(l("error"),k("No camera found on this device.")):Ue==="NotReadableError"||ue.includes("in use")?(l("error"),k("Camera is already in use by another application. Please close other apps using the camera.")):Ue==="SecurityError"?(l("error"),k("Camera access blocked due to security settings. Please use HTTPS.")):Ue==="AbortError"?(l("error"),k("Camera access was interrupted. Please try again.")):(l("error"),k(ue||"Failed to access camera. Please try again."))},be=async()=>{if(v(!0),l("checking"),k(""),L&&!O)return l("error"),k("Camera access requires HTTPS on mobile devices. Please access this site via HTTPS."),v(!1),!1;if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return l("error"),k("Your browser does not support camera access. Please try a different browser."),v(!1),!1;try{let we;try{we=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}}})}catch(ue){console.log("Environment camera failed, trying any camera:",ue),we=await navigator.mediaDevices.getUserMedia({video:!0})}return we.getTracks().forEach(ue=>ue.stop()),await ne()?(dt.success("Camera access granted!"),!0):!1}catch(we){return console.error("Camera permission error:",we),pe(we),we.name==="NotAllowedError"?dt.error("Camera permission denied."):dt.error("Failed to access camera."),!1}finally{v(!1)}},te=async()=>{if(console.log("[startScanner] Called",{availableCameras:u.length,isScanning:e,isLoading:p,hasExistingScanner:!!G.current}),u.length===0){if(!await be())return;await new Promise(Ue=>setTimeout(Ue,100))}v(!0),n(null);try{const we=document.getElementById(ee);if(console.log("[startScanner] Container check",{containerExists:!!we,containerChildren:we?.children.length||0,containerHTML:we?.innerHTML.substring(0,100)}),!we){dt.error("Scanner container not ready. Please try again."),v(!1);return}G.current&&!ce.current&&(console.log("[startScanner] Stopping existing scanner"),await X(),await new Promise(lt=>setTimeout(lt,300)));const Ue=we.querySelectorAll("video, canvas, #qr-shaded-region");if(console.log("[startScanner] Clearing leftover elements",{count:Ue.length,types:Array.from(Ue).map(lt=>lt.tagName)}),Ue.forEach(lt=>{try{lt.parentNode===we&&(console.log("[startScanner] Removing element:",lt.tagName,lt.id),lt.remove())}catch(pt){console.log("[startScanner] Error removing leftover element:",pt.message)}}),!se.current){console.log("[startScanner] Component unmounted, aborting"),v(!1);return}console.log("[startScanner] Creating new Html5Qrcode instance");const ue=new n2(ee);G.current=ue;const He={fps:10,qrbox:L?{width:200,height:200}:{width:250,height:250},aspectRatio:1,disableFlip:!1},Se=m||{facingMode:"environment"};if(console.log("[startScanner] Starting scanner with config",{cameraConfig:Se,config:He}),await ue.start(Se,He,je,oe),console.log("[startScanner] Scanner started successfully",{containerChildren:we.children.length,hasVideo:!!we.querySelector("video"),hasCanvas:!!we.querySelector("canvas")}),!se.current){console.log("[startScanner] Component unmounted after start, stopping"),await ue.stop().catch(()=>{});return}const tt=we.querySelector('[data-placeholder="true"]');tt&&(console.log("[startScanner] Hiding placeholder via DOM"),tt.style.display="none"),we.classList.remove("bg-gray-100"),we.classList.add("bg-black"),J.current=0,t(!0),l("granted"),dt.info("Scanner started. Point camera at a QR code."),console.log("[startScanner]  Scanner ready - point camera at QR code")}catch(we){if(console.error("Error starting scanner:",we),m&&we.message?.includes("Unable to start"))try{const Ue=new n2(ee);G.current=Ue,await Ue.start({facingMode:"environment"},{fps:10,qrbox:{width:200,height:200}},je,oe),t(!0),l("granted"),dt.info("Scanner started.");return}catch(Ue){console.error("Fallback also failed:",Ue)}pe(we),dt.error("Failed to start scanner.")}finally{v(!1)}},X=async()=>{if(console.log("[stopScanner] Called",{hasScanner:!!G.current,isCleaningUp:ce.current,isMounted:se.current}),!G.current||ce.current){console.log("[stopScanner] Early return - no scanner or already cleaning"),t(!1);return}ce.current=!0;try{const we=G.current,Ue=we.getState();console.log("[stopScanner] Scanner state:",Ue),Ue===2&&(console.log("[stopScanner] Stopping scanner..."),await we.stop(),console.log("[stopScanner] Scanner stopped successfully"),se.current&&await new Promise(ue=>setTimeout(ue,200)))}catch(we){console.error("[stopScanner] Error stopping scanner:",we);try{const Ue=document.getElementById(ee);if(Ue){const ue=Ue.querySelector("video");ue&&ue.srcObject&&(console.log("[stopScanner] Manually stopping video tracks"),ue.srcObject.getTracks().forEach(He=>He.stop()))}}catch(Ue){console.log("[stopScanner] Could not stop video tracks:",Ue.message)}}finally{console.log("[stopScanner] Cleanup - setting refs to null"),G.current=null,ce.current=!1;const we=document.getElementById(ee);if(we){const Ue=we.querySelector('[data-placeholder="true"]');Ue&&(console.log("[stopScanner] Showing placeholder via DOM"),Ue.style.display="flex"),we.classList.remove("bg-black"),we.classList.add("bg-gray-100")}se.current&&t(!1)}},re=async we=>{const{enrollmentId:Ue,eventId:ue,phone:He,userId:Se}=we,tt=new URLSearchParams({enrollmentId:Ue,eventId:ue,phone:He,...Se&&{userId:Se}}),lt=await fetch(`https://motivata.synquic.com/api/app/tickets/qr-scan?${tt}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),pt=await lt.json();if(console.log("[validateRegularTicket] API Response:",pt),!lt.ok){const We=pt.message?.toLowerCase().includes("already been scanned");let at=null;if(We&&pt.message){const Fe=pt.message.match(/scanned at (.+)$/i);Fe&&Fe[1]&&(at=Fe[1])}return{...pt,status:lt.status,ticketType:"regular",data:{...pt.data,isValid:!We,isAlreadyScanned:We,scannedAt:at}}}return{...pt,status:lt.status,ticketType:"regular",data:{...pt.data,isValid:!0,isAlreadyScanned:!1}}},ge=async we=>{const{enrollmentId:Ue,eventId:ue,phone:He,userId:Se}=we,tt=new URLSearchParams({enrollmentId:Ue,eventId:ue,phone:He,...Se&&{userId:Se}}),lt=await fetch(`https://motivata.synquic.com/api/app/tickets/cash/qr-scan?${tt}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),pt=await lt.json();return console.log("[validateCashTicket] API Response:",pt),{...pt,status:lt.status,ticketType:"cash"}},de=async we=>{$(!0);try{console.log("[validateTicket] Trying regular ticket endpoint...");const Ue=await re(we);return Ue.status===200||Ue.data?.isAlreadyScanned?(console.log("[validateTicket] Regular ticket validated"),Ue):Ue.status===404?(console.log("[validateTicket] Regular ticket not found, trying cash ticket..."),await ge(we)):Ue}catch(Ue){return console.error("[validateTicket] API Error:",Ue),{status:500,message:"Failed to validate ticket",error:Ue.message,data:null}}finally{$(!1)}},je=async(we,Ue)=>{console.log("[onScanSuccess] QR Code scanned:",we),n(we);let ue=null;try{const pt=new URL(we),We={};pt.searchParams.forEach((at,Fe)=>{We[Fe]=at}),ue={type:"url",fullUrl:we,protocol:pt.protocol,host:pt.host,pathname:pt.pathname,parameters:We,hash:pt.hash||null},console.log("[onScanSuccess]  URL detected!"),console.log("[onScanSuccess] Full URL:",we),console.log("[onScanSuccess] Protocol:",pt.protocol),console.log("[onScanSuccess] Host:",pt.host),console.log("[onScanSuccess] Pathname:",pt.pathname),console.log("[onScanSuccess] Parameters:",We),Object.keys(We).length>0?(console.log("[onScanSuccess]  Extracted Parameters:"),Object.entries(We).forEach(([at,Fe])=>{console.log(`   ${at}: ${Fe}`)})):console.log("[onScanSuccess]  No parameters found in URL"),pt.hash&&console.log("[onScanSuccess] Hash:",pt.hash)}catch{console.log("[onScanSuccess]  Not a URL, just plain text:",we),ue={type:"text",text:we}}B(ue);let He=null;const Se=ue.parameters||{},tt=Se.enrollmentId||Se.id,lt=tt&&Se.eventId&&Se.phone;ue.type==="url"&&lt?(console.log("[onScanSuccess] Validating ticket with API...",{enrollmentId:tt,eventId:Se.eventId,phone:Se.phone,userId:Se.userId}),dt.info(" Validating ticket..."),He=await de({enrollmentId:tt,eventId:Se.eventId,phone:Se.phone,userId:Se.userId}),console.log("[onScanSuccess] Full API Response:",JSON.stringify(He,null,2)),U(He),He.status===200||He.data?.isAlreadyScanned?(console.log("[onScanSuccess] API Data:",{message:He.message,isValid:He.data?.isValid,isAlreadyScanned:He.data?.isAlreadyScanned,ticketType:He.ticketType,enrollment:He.data?.enrollment?.name}),He.data?.isAlreadyScanned===!0?(console.log("[onScanSuccess]  Ticket already scanned!"),dt.warning(" This ticket was already scanned!",{autoClose:5e3}),navigator.vibrate&&navigator.vibrate([100,50,100,50,100]),R(!0)):He.data?.isValid===!0?(console.log("[onScanSuccess]  First time scan - Valid!"),dt.success(" Ticket Verified - First Scan!"),navigator.vibrate&&navigator.vibrate([200,100,200]),R(!0)):(console.log("[onScanSuccess]  Invalid ticket!"),dt.error(" Invalid Ticket!"),navigator.vibrate&&navigator.vibrate([300,100,300]),R(!1))):(console.log("[onScanSuccess]  API Error or Invalid Response"),dt.error(" Failed to validate ticket!"),navigator.vibrate&&navigator.vibrate([300,100,300]),R(!1))):(R(!0),dt.success(" QR Code Scanned!"),navigator.vibrate&&navigator.vibrate([200,100,200])),T(pt=>[{text:we,timestamp:new Date,format:Ue?.result?.format?.formatName||"QR_CODE"},...pt.slice(0,9)]),X()},oe=we=>{J.current+=1,J.current%10===0&&console.log(`[onScanFailure] Scanner active, attempts: ${J.current}`),we&&!we.includes("No MultiFormat Readers")&&!we.includes("NotFoundException")&&console.log("[onScanFailure] Error:",we)},fe=async()=>{if(u.length<=1)return;const Ue=(u.findIndex(He=>He.id===m)+1)%u.length,ue=u[Ue];await X(),x(ue.id),setTimeout(()=>te(),200),dt.info(`Switched to ${ue.label||"Camera "+(Ue+1)}`)},qe=async we=>{try{await navigator.clipboard.writeText(we),dt.success("Copied to clipboard!")}catch{try{const ue=document.createElement("textarea");ue.value=we,document.body.appendChild(ue),ue.select(),document.execCommand("copy"),document.body.removeChild(ue),dt.success("Copied to clipboard!")}catch{dt.error("Failed to copy")}}},Ne=we=>{try{return new URL(we),!0}catch{return!1}},Xe=we=>{Ne(we)?window.open(we,"_blank","noopener,noreferrer"):qe(we)},st=a==="denied"||a==="error",Le=!st;return r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 tracking-tight",children:"Scan QR Code"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Scan QR codes using your device camera"})]})}),L&&!O&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex items-start gap-3",children:[r.jsx(j3,{className:"w-6 h-6 text-yellow-600 shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-yellow-800",children:"HTTPS Required"}),r.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Camera access on mobile requires a secure connection (HTTPS). Please access this site via HTTPS to use the scanner."})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[r.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(Im,{className:"w-6 h-6 text-blue-600"}),"Scanner"]}),st&&r.jsxs("div",{className:"text-center py-6 sm:py-8",children:[r.jsx("div",{className:`w-14 h-14 sm:w-16 sm:h-16 ${a==="denied"?"bg-red-100":"bg-orange-100"} rounded-full flex items-center justify-center mx-auto mb-4`,children:r.jsx(wX,{className:`w-7 h-7 sm:w-8 sm:h-8 ${a==="denied"?"text-red-500":"text-orange-500"}`})}),r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-2",children:a==="denied"?"Camera Access Denied":"Camera Error"}),r.jsx("p",{className:"text-gray-600 mb-4 text-sm max-w-sm mx-auto px-2",children:E||"Unable to access camera. Please check your permissions and try again."}),r.jsx("button",{onClick:be,disabled:p||L&&!O,className:"px-5 sm:px-6 py-2.5 sm:py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-2 mx-auto text-sm sm:text-base",children:p?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Requesting..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(lP,{className:"w-4 h-4"}),r.jsx("span",{children:"Request Camera Access"})]})}),a==="denied"&&r.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg max-w-xs mx-auto",children:r.jsx("p",{className:"text-xs text-gray-600",children:L?"Go to your browser settings  Site settings  Camera  Allow for this site.":"Click the camera icon in your browser's address bar to allow access."})})]}),Le&&r.jsx(wfe,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsx($R,{scannerContainerId:ee}),r.jsx("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-3",children:e?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:X,className:"flex items-center gap-2 px-5 sm:px-6 py-2.5 sm:py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm sm:text-base",children:[r.jsx(w$,{className:"w-5 h-5"}),r.jsx("span",{children:"Stop"})]}),u.length>1&&r.jsxs("button",{onClick:fe,className:"flex items-center gap-2 px-4 py-2.5 sm:py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm sm:text-base",title:"Switch Camera",children:[r.jsx(b$,{className:"w-5 h-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Switch Camera"})]})]}):r.jsx("button",{onClick:te,disabled:p||L&&!O,className:"flex items-center gap-2 px-5 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all disabled:opacity-50 shadow-lg shadow-blue-500/30 text-sm sm:text-base",children:p?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Starting..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(Im,{className:"w-5 h-5"}),r.jsx("span",{children:"Start Scanner"})]})})}),u.length>1&&!e&&r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("label",{className:"text-sm text-gray-600",children:"Camera:"}),r.jsx("select",{value:m||"",onChange:we=>x(we.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 max-w-[200px]",children:u.map((we,Ue)=>r.jsx("option",{value:we.id,children:we.label||`Camera ${Ue+1}`},we.id))})]})]})})]}),r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[F&&H&&(()=>{const we=z?.data?.isAlreadyScanned===!0;return r.jsxs("div",{className:`rounded-xl shadow-lg border-2 p-6 sm:p-8 ${we?"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-400":"bg-gradient-to-br from-green-50 to-emerald-50 border-green-300"}`,children:[r.jsx("div",{className:"text-center mb-6",children:we?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-yellow-500 rounded-full mb-4 animate-pulse",children:r.jsx(j3,{className:"w-12 h-12 text-white"})}),r.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-yellow-800 mb-2",children:" ALREADY SCANNED"}),r.jsx("p",{className:"text-yellow-700 font-medium",children:"This ticket was previously scanned"}),z.data.scannedAt&&r.jsxs("p",{className:"text-sm text-yellow-600 mt-2",children:["Previously scanned: ",new Date(z.data.scannedAt).toLocaleString()]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-500 rounded-full mb-4 animate-pulse",children:r.jsx(od,{className:"w-12 h-12 text-white"})}),r.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-green-800 mb-2",children:" VERIFIED - FIRST SCAN"}),r.jsx("p",{className:"text-green-700 font-medium",children:"Person is Allowed & Authenticated"})]})}),z?.data&&(z.data.user||z.data.enrollment)&&(()=>{const Ue=z.ticketType==="cash",ue=Ue?z.data.enrollment?.name:z.data.user?.name,He=Ue?z.data.enrollment?.phone:z.data.ticket?.phone||z.data.user?.phone,Se=Ue?z.data.enrollment?.event:z.data.event;return r.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 mb-4 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(od,{className:"w-5 h-5 text-blue-600"}),"Attendee Information",z.ticketType&&r.jsx("span",{className:"text-xs font-normal bg-gray-100 px-2 py-1 rounded",children:z.ticketType==="cash"?"Cash Ticket":"Online Ticket"})]}),r.jsxs("div",{className:"space-y-3",children:[ue&&r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-blue-50 rounded-lg",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0",children:"Name:"}),r.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-900 bg-white px-4 py-2 rounded border border-blue-200",children:ue})]}),He&&r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0",children:"Phone:"}),r.jsx("span",{className:"text-sm sm:text-base font-mono text-gray-900 bg-white px-3 py-1 rounded border border-gray-200",children:He})]}),Se&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0",children:"Event:"}),r.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900 bg-white px-3 py-1 rounded border border-gray-200",children:Se.name})]}),Se.startDate&&Se.endDate&&r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0",children:"Event Date:"}),r.jsxs("span",{className:"text-xs sm:text-sm text-gray-900 bg-white px-3 py-1 rounded border border-gray-200",children:[new Date(Se.startDate).toLocaleDateString()," - ",new Date(Se.endDate).toLocaleDateString()]})]})]})]})]})})(),z?.data&&(z.data.voucher?r.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 sm:p-6 mb-4 shadow-sm border border-purple-200",children:[r.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2",children:[r.jsx(N3,{className:"w-5 h-5 text-purple-600"}),"Redeemed Voucher"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-white rounded-lg border border-purple-100",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0",children:"Voucher Code:"}),r.jsx("span",{className:"text-base sm:text-lg font-bold text-purple-700 bg-purple-100 px-4 py-2 rounded border border-purple-200 font-mono",children:z.data.voucher.code})]}),z.data.voucher.title&&r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-white rounded-lg border border-purple-100",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0",children:"Title:"}),r.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:z.data.voucher.title})]}),z.data.voucher.description&&r.jsxs("div",{className:"p-3 bg-white rounded-lg border border-purple-100",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide block mb-2",children:"Description:"}),r.jsx("p",{className:"text-sm text-gray-700",children:z.data.voucher.description})]})]})]}):r.jsx("div",{className:"bg-gray-50 rounded-lg p-4 sm:p-6 mb-4 shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(N3,{className:"w-6 h-6 text-gray-400"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-base font-semibold text-gray-600",children:"No Food Voucher"}),r.jsx("p",{className:"text-sm text-gray-500",children:"This attendee has not redeemed any voucher"})]})]})})),!z?.data?.enrollment&&!z?.data?.user&&H.type==="url"&&Object.keys(H.parameters).length>0&&r.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 mb-4 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(rb,{className:"w-5 h-5 text-blue-600"}),"Ticket Information"]}),r.jsx("div",{className:"space-y-3",children:Object.entries(H.parameters).map(([Ue,ue])=>r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsxs("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0",children:[Ue.replace(/_/g," "),":"]}),r.jsx("span",{className:"text-sm sm:text-base font-mono text-gray-900 bg-white px-3 py-1 rounded border border-gray-200",children:ue})]},Ue))})]}),H.type==="url"&&r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:[r.jsx("p",{className:"text-xs text-blue-700 font-semibold mb-1",children:"SCANNED URL:"}),r.jsx("p",{className:"text-sm text-blue-900 break-all font-mono",children:H.fullUrl})]}),H.type==="text"&&r.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 mb-4 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Scanned Content:"}),r.jsx("p",{className:"text-gray-900 break-all font-mono text-sm bg-gray-50 p-3 rounded border border-gray-200",children:H.text})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[r.jsxs("button",{onClick:()=>{n(null),B(null),R(!1),U(null),te()},className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all shadow-md hover:shadow-lg font-semibold",children:[r.jsx(Im,{className:"w-5 h-5"}),"Scan Next Person"]}),r.jsxs("button",{onClick:()=>qe(s),className:"flex items-center gap-2 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors shadow-md",children:[r.jsx(rb,{className:"w-5 h-5"}),"Copy Data"]})]})]})})(),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Scan History"}),C.length===0?r.jsxs("div",{className:"text-center py-6 sm:py-8 text-gray-500",children:[r.jsx(Im,{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-2 opacity-30"}),r.jsx("p",{className:"text-sm",children:"No scans yet. Start scanning to see history."})]}):r.jsx("div",{className:"space-y-2 sm:space-y-3 max-h-60 sm:max-h-80 overflow-y-auto",children:C.map((we,Ue)=>r.jsx("div",{className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer group active:bg-gray-200",onClick:()=>Xe(we.text),children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm text-gray-900 break-all font-mono truncate group-hover:text-blue-600",children:we.text}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[we.timestamp.toLocaleTimeString(),"  ",we.format]})]}),r.jsx("button",{onClick:ue=>{ue.stopPropagation(),qe(we.text)},className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded transition-colors",children:r.jsx(rb,{className:"w-4 h-4"})})]})},Ue))})]}),r.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Tips for better scanning:"}),r.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[r.jsx("li",{children:" Hold your device steady"}),r.jsx("li",{children:" Ensure good lighting"}),r.jsx("li",{children:" Position QR code within the frame"}),r.jsx("li",{children:" Keep the QR code flat and clear"}),L&&r.jsx("li",{children:" Try switching to back camera if using front"})]})]})]})]})]})}const Sfe=async(e,t={})=>Te(Ee.get(`/web/tickets/reshare/list/${e}`,{params:{page:t.page||1,limit:t.limit||20,search:t.search||void 0,enrollmentType:t.enrollmentType||void 0,scannedStatus:t.scannedStatus||void 0}})),Cfe=async(e,t,s={})=>Te(Ee.post(`/web/tickets/reshare/${e}/${t}`,{phone:s.phone,sendVia:s.sendVia||"both"})),Afe=async(e,t="whatsapp")=>Te(Ee.post("/web/tickets/reshare/bulk",{tickets:e,sendVia:t})),Efe=async()=>Te(Ee.get("/web/events")),qO=[{value:"",label:"All Types"},{value:"ONLINE",label:"Online"},{value:"CASH",label:"Cash"}],HO=[{value:"",label:"All Status"},{value:"false",label:"Not Scanned"},{value:"true",label:"Scanned"}],GO=[{value:"both",label:"WhatsApp & Email"},{value:"whatsapp",label:"WhatsApp Only"},{value:"email",label:"Email Only"}],Tfe=()=>{const[e,t]=w.useState([]),[s,n]=w.useState(""),[a,l]=w.useState(null),[u,f]=w.useState([]),[m,x]=w.useState(null),[p,v]=w.useState(!1),[C,T]=w.useState(!0),[E,k]=w.useState({currentPage:1,totalPages:1,totalCount:0,limit:20}),[O,M]=w.useState({search:"",enrollmentType:"",scannedStatus:""}),[L,P]=w.useState([]),[H,B]=w.useState(!1),[F,R]=w.useState({}),[z,U]=w.useState(!1);w.useEffect(()=>{Y()},[]),w.useEffect(()=>{s?$():(f([]),x(null),l(null))},[s,E.currentPage,O]),w.useEffect(()=>{P([]),B(!1)},[u]);const Y=async()=>{T(!0);try{const re=await Efe();if(re.success){const ge=re.data?.events||re.data||[];t(Array.isArray(ge)?ge:[])}else dt.error(re.message||"Failed to load events")}catch(re){console.error("Error fetching events:",re),dt.error("Failed to load events")}finally{T(!1)}},$=w.useCallback(async()=>{if(s){v(!0);try{const re=await Sfe(s,{page:E.currentPage,limit:E.limit,search:O.search||void 0,enrollmentType:O.enrollmentType||void 0,scannedStatus:O.scannedStatus||void 0});re.success?(f(re.data.ticketHolders||[]),l(re.data.event||null),x(re.data.statistics||null),k(ge=>({...ge,...re.data.pagination}))):(dt.error(re.message||"Failed to load ticket holders"),f([]))}catch(re){console.error("Error fetching ticket holders:",re),dt.error("Failed to load ticket holders"),f([])}finally{v(!1)}}},[s,E.currentPage,E.limit,O]);return{events:e,selectedEventId:s,eventData:a,ticketHolders:u,statistics:m,pagination:E,filters:O,loading:p,eventsLoading:C,reshareLoading:F,bulkReshareLoading:z,selectedTickets:L,selectAll:H,isTicketSelected:re=>L.some(ge=>ge.enrollmentType===re.enrollmentType&&ge.enrollmentId===re.enrollmentId),handleEventChange:re=>{n(re),k(ge=>({...ge,currentPage:1})),M({search:"",enrollmentType:"",scannedStatus:""})},handleFilterChange:(re,ge)=>{M(de=>({...de,[re]:ge})),k(de=>({...de,currentPage:1}))},handleSearch:re=>{M(ge=>({...ge,search:re})),k(ge=>({...ge,currentPage:1}))},handlePageChange:re=>{k(ge=>({...ge,currentPage:re}))},handleTicketSelect:re=>{const ge=`${re.enrollmentType}-${re.enrollmentId}`;P(de=>de.find(oe=>`${oe.enrollmentType}-${oe.enrollmentId}`===ge)?de.filter(oe=>`${oe.enrollmentType}-${oe.enrollmentId}`!==ge):[...de,re])},handleSelectAll:()=>{P(H?[]:[...u]),B(!H)},handleReshareTicket:async(re,ge="both")=>{const de=`${re.enrollmentType}-${re.enrollmentId}`;R(je=>({...je,[de]:!0}));try{const je=await Cfe(re.enrollmentType,re.enrollmentId,{phone:re.phone||re.user?.phone,sendVia:ge});je.success?(dt.success("Ticket reshared successfully!"),$()):dt.error(je.message||"Failed to reshare ticket")}catch(je){console.error("Error resharing ticket:",je),dt.error("Failed to reshare ticket")}finally{R(je=>({...je,[de]:!1}))}},handleBulkReshare:async(re="whatsapp")=>{if(L.length===0){dt.warning("Please select tickets to reshare");return}if(L.length>50){dt.warning("Maximum 50 tickets can be reshared at once");return}U(!0);try{const ge=L.map(je=>({enrollmentType:je.enrollmentType,enrollmentId:je.enrollmentId,phone:je.phone||je.user?.phone})),de=await Afe(ge,re);if(de.success){const{summary:je}=de.data;je.failed>0?dt.warning(`Reshared ${je.success} tickets. ${je.failed} failed.`):dt.success(`Successfully reshared ${je.success} tickets!`),P([]),B(!1),$()}else dt.error(de.message||"Bulk reshare failed")}catch(ge){console.error("Error in bulk reshare:",ge),dt.error("Bulk reshare failed")}finally{U(!1)}},refresh:()=>{s&&$()}}};function Ofe(){const{events:e,selectedEventId:t,ticketHolders:s,statistics:n,pagination:a,filters:l,loading:u,eventsLoading:f,reshareLoading:m,bulkReshareLoading:x,selectedTickets:p,selectAll:v,isTicketSelected:C,handleEventChange:T,handleFilterChange:E,handleSearch:k,handlePageChange:O,handleTicketSelect:M,handleSelectAll:L,handleReshareTicket:P,handleBulkReshare:H,refresh:B}=Tfe(),[F,R]=w.useState(""),[z,U]=w.useState(!1),[Y,$]=w.useState("whatsapp"),[G,ee]=w.useState(null),[ce,se]=w.useState("both");w.useEffect(()=>{const te=setTimeout(()=>{F!==l.search&&k(F)},500);return()=>clearTimeout(te)},[F]);const J=te=>te?new Date(te).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",ne=te=>!te&&te!==0?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(te),pe=te=>{ee(te),se("both")},be=async()=>{G&&(await P(G,ce),ee(null))};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 tracking-tight",children:"Ticket Reshare"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Regenerate and reshare ticket QR codes to users"})]}),r.jsxs("button",{onClick:B,disabled:u||!t,className:"flex items-center gap-1.5 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm text-sm",children:[r.jsx(jk,{className:`w-4 h-4 ${u?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline font-medium",children:"Refresh"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Event"}),r.jsxs("select",{value:t,onChange:te=>T(te.target.value),disabled:f,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:f?"Loading events...":"-- Select an Event --"}),e.map(te=>r.jsxs("option",{value:te._id,children:[te.name," - ",J(te.startDate)]},te._id))]})]}),t&&r.jsxs(r.Fragment,{children:[n&&r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[r.jsx(Fu,{label:"Total",value:n.total,color:"blue",icon:r.jsx(ex,{})}),r.jsx(Fu,{label:"Online",value:n.online,color:"purple",icon:r.jsx(C3,{})}),r.jsx(Fu,{label:"Cash",value:n.cash,color:"green",icon:r.jsx(C3,{})}),r.jsx(Fu,{label:"Scanned",value:n.scanned,color:"emerald",icon:r.jsx(od,{})}),r.jsx(Fu,{label:"Not Scanned",value:n.notScanned,color:"orange",icon:r.jsx(rf,{})}),r.jsx(Fu,{label:"Cancelled",value:n.cancelled,color:"red",icon:r.jsx(N$,{})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(d$,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search by phone, name, or email...",value:F,onChange:te=>R(te.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("button",{onClick:()=>U(!z),className:"lg:hidden flex items-center gap-2 px-4 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50",children:[r.jsx(p$,{className:"w-5 h-5"}),"Filters"]}),r.jsxs("div",{className:"hidden lg:flex items-center gap-3",children:[r.jsx("select",{value:l.enrollmentType,onChange:te=>E("enrollmentType",te.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:qO.map(te=>r.jsx("option",{value:te.value,children:te.label},te.value))}),r.jsx("select",{value:l.scannedStatus,onChange:te=>E("scannedStatus",te.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:HO.map(te=>r.jsx("option",{value:te.value,children:te.label},te.value))})]})]}),z&&r.jsxs("div",{className:"lg:hidden mt-3 pt-3 border-t border-gray-200 grid grid-cols-2 gap-3",children:[r.jsx("select",{value:l.enrollmentType,onChange:te=>E("enrollmentType",te.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-sm",children:qO.map(te=>r.jsx("option",{value:te.value,children:te.label},te.value))}),r.jsx("select",{value:l.scannedStatus,onChange:te=>E("scannedStatus",te.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-sm",children:HO.map(te=>r.jsx("option",{value:te.value,children:te.label},te.value))})]})]}),p.length>0&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jX,{className:"text-blue-600 w-5 h-5"}),r.jsxs("span",{className:"font-semibold text-blue-900",children:[p.length," ticket(s) selected"]})]}),r.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[r.jsx("select",{value:Y,onChange:te=>$(te.target.value),className:"flex-1 sm:flex-none px-3 py-2 border border-blue-300 rounded-lg bg-white text-sm focus:ring-2 focus:ring-blue-500",children:GO.map(te=>r.jsx("option",{value:te.value,children:te.label},te.value))}),r.jsxs("button",{onClick:()=>H(Y),disabled:x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm font-medium",children:[x?r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):r.jsx(Yg,{className:"w-4 h-4"}),"Reshare Selected"]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"hidden lg:block",children:r.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-4 py-3",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:v,onChange:L,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select All"})]}),r.jsxs("span",{className:"text-sm text-gray-500",children:[a.totalCount," ticket holder(s)"]})]})})}),u&&r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-gray-600",children:"Loading ticket holders..."})]}),!u&&s.length===0&&r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(rf,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Ticket Holders Found"}),r.jsx("p",{className:"text-gray-600",children:l.search||l.enrollmentType||l.scannedStatus?"Try adjusting your filters":"No tickets have been issued for this event yet"})]}),!u&&s.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden lg:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"w-12 px-4 py-3"}),r.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"User Details"}),r.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Type"}),r.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Tier / Price"}),r.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Scan Status"}),r.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Created"}),r.jsx("th",{className:"text-right px-4 py-3 text-sm font-semibold text-gray-700",children:"Action"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:s.map(te=>r.jsx(Dfe,{ticket:te,isSelected:C(te),onSelect:()=>M(te),onReshare:()=>pe(te),isResharing:m[`${te.enrollmentType}-${te.enrollmentId}`],formatDate:J,formatCurrency:ne},`${te.enrollmentType}-${te.enrollmentId}`))})]})}),r.jsxs("div",{className:"lg:hidden divide-y divide-gray-100",children:[r.jsxs("div",{className:"px-4 py-3 bg-gray-50 flex items-center justify-between",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:v,onChange:L,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select All"})]}),r.jsxs("span",{className:"text-sm text-gray-500",children:[a.totalCount," total"]})]}),s.map(te=>r.jsx(kfe,{ticket:te,isSelected:C(te),onSelect:()=>M(te),onReshare:()=>pe(te),isResharing:m[`${te.enrollmentType}-${te.enrollmentId}`],formatDate:J,formatCurrency:ne},`${te.enrollmentType}-${te.enrollmentId}`))]})]}),!u&&a.totalPages>1&&r.jsxs("div",{className:"border-t border-gray-200 px-4 py-3 flex flex-col sm:flex-row items-center justify-between gap-3",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:["Page ",a.currentPage," of ",a.totalPages," (",a.totalCount," items)"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>O(a.currentPage-1),disabled:a.currentPage===1,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),r.jsx("div",{className:"hidden sm:flex items-center gap-1",children:Array.from({length:Math.min(5,a.totalPages)},(te,X)=>{let re;return a.totalPages<=5||a.currentPage<=3?re=X+1:a.currentPage>=a.totalPages-2?re=a.totalPages-4+X:re=a.currentPage-2+X,r.jsx("button",{onClick:()=>O(re),className:`w-8 h-8 text-sm rounded-lg ${a.currentPage===re?"bg-gray-900 text-white":"border border-gray-300 hover:bg-gray-50"}`,children:re},re)})}),r.jsx("button",{onClick:()=>O(a.currentPage+1),disabled:a.currentPage===a.totalPages,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}),!t&&!f&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[r.jsx(rf,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Select an Event"}),r.jsx("p",{className:"text-gray-600",children:"Choose an event from the dropdown above to view and manage ticket holders"})]}),G&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Confirm Reshare"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"This will reset the scan status and send a new QR code to:"}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:G.user?.name||G.name||"Unknown"}),r.jsx("p",{className:"text-sm text-gray-600",children:G.phone||G.user?.phone}),G.user?.email&&r.jsx("p",{className:"text-sm text-gray-600",children:G.user?.email})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Send via"}),r.jsx("select",{value:ce,onChange:te=>se(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:GO.map(te=>r.jsx("option",{value:te.value,children:te.label},te.value))})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>ee(null),className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium",children:"Cancel"}),r.jsxs("button",{onClick:be,disabled:m[`${G.enrollmentType}-${G.enrollmentId}`],className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50",children:[m[`${G.enrollmentType}-${G.enrollmentId}`]?r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):r.jsx(Yg,{className:"w-4 h-4"}),"Reshare"]})]})]})})]})}function Fu({label:e,value:t,color:s,icon:n}){const a={blue:"bg-blue-50 text-blue-600 border-blue-200",purple:"bg-purple-50 text-purple-600 border-purple-200",green:"bg-green-50 text-green-600 border-green-200",emerald:"bg-emerald-50 text-emerald-600 border-emerald-200",orange:"bg-orange-50 text-orange-600 border-orange-200",red:"bg-red-50 text-red-600 border-red-200"};return r.jsxs("div",{className:`rounded-lg border p-3 ${a[s]||a.blue}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"w-4 h-4",children:n}),r.jsx("span",{className:"text-xs font-medium opacity-80",children:e})]}),r.jsx("p",{className:"text-xl font-bold",children:t||0})]})}function Dfe({ticket:e,isSelected:t,onSelect:s,onReshare:n,isResharing:a,formatDate:l,formatCurrency:u}){const f=e.user?.name||e.name||"Unknown",m=e.phone||e.user?.phone||"N/A",x=e.user?.email||"N/A",p=e.enrollmentType==="ONLINE"?e.ticketPrice:e.priceCharged;return r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-4 py-3",children:r.jsx("input",{type:"checkbox",checked:t,onChange:s,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:f}),r.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(x$,{className:"w-3.5 h-3.5"}),m]}),x!=="N/A"&&r.jsxs("span",{className:"flex items-center gap-1 truncate max-w-[200px]",children:[r.jsx(m$,{className:"w-3.5 h-3.5"}),x]})]})]})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.enrollmentType==="ONLINE"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:e.enrollmentType})}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{children:[e.tierName&&r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.tierName}),r.jsx("p",{className:"text-sm text-gray-600",children:u(p)})]})}),r.jsx("td",{className:"px-4 py-3 text-center",children:e.isTicketScanned?r.jsxs("div",{className:"inline-flex flex-col items-center",children:[r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.jsx(od,{className:"w-3.5 h-3.5"}),"Scanned"]}),e.ticketScannedAt&&r.jsx("span",{className:"text-xs text-gray-500 mt-1",children:l(e.ticketScannedAt)})]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[r.jsx(rf,{className:"w-3.5 h-3.5"}),"Not Scanned"]})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:"text-sm text-gray-600",children:l(e.createdAt)})}),r.jsx("td",{className:"px-4 py-3 text-right",children:r.jsxs("button",{onClick:n,disabled:a||e.status==="CANCELLED",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a?r.jsx("div",{className:"w-3.5 h-3.5 border-2 border-white border-t-transparent rounded-full animate-spin"}):r.jsx(Yg,{className:"w-3.5 h-3.5"}),"Reshare"]})})]})}function kfe({ticket:e,isSelected:t,onSelect:s,onReshare:n,isResharing:a,formatDate:l,formatCurrency:u}){const f=e.user?.name||e.name||"Unknown",m=e.phone||e.user?.phone||"N/A";e.user?.email;const x=e.enrollmentType==="ONLINE"?e.ticketPrice:e.priceCharged;return r.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("input",{type:"checkbox",checked:t,onChange:s,className:"w-4 h-4 mt-1 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:f}),r.jsx("p",{className:"text-sm text-gray-600",children:m})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium shrink-0 ${e.enrollmentType==="ONLINE"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:e.enrollmentType})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 text-xs",children:"Price"}),r.jsx("p",{className:"font-medium text-gray-900",children:u(x)})]}),e.tierName&&r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 text-xs",children:"Tier"}),r.jsx("p",{className:"font-medium text-gray-900",children:e.tierName})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[e.isTicketScanned?r.jsxs("div",{children:[r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.jsx(od,{className:"w-3.5 h-3.5"}),"Scanned"]}),e.ticketScannedAt&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:l(e.ticketScannedAt)})]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[r.jsx(rf,{className:"w-3.5 h-3.5"}),"Not Scanned"]}),r.jsxs("button",{onClick:n,disabled:a||e.status==="CANCELLED",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a?r.jsx("div",{className:"w-3.5 h-3.5 border-2 border-white border-t-transparent rounded-full animate-spin"}):r.jsx(Yg,{className:"w-3.5 h-3.5"}),"Reshare"]})]})]})]})})}const Un={PLANS:"/web/membership-plans",USER_MEMBERSHIPS:"/web/user-memberships"},hl={createPlan:async e=>(console.log("[MembershipService] Creating membership plan"),Te(Ee.post(Un.PLANS,e))),getPlans:async(e={})=>(console.log("[MembershipService] Fetching membership plans with params:",e),Te(Ee.get(Un.PLANS,{params:e}))),getPlanById:async e=>(console.log("[MembershipService] Fetching membership plan:",e),Te(Ee.get(`${Un.PLANS}/${e}`))),updatePlan:async(e,t)=>(console.log("[MembershipService] Updating membership plan:",e),Te(Ee.put(`${Un.PLANS}/${e}`,t))),deletePlan:async e=>(console.log("[MembershipService] Deleting membership plan:",e),Te(Ee.delete(`${Un.PLANS}/${e}`))),restorePlan:async e=>(console.log("[MembershipService] Restoring membership plan:",e),Te(Ee.post(`${Un.PLANS}/${e}/restore`))),createUserMembership:async e=>(console.log("[MembershipService] Creating user membership for phone:",e?.phone),Te(Ee.post(Un.USER_MEMBERSHIPS,e))),getUserMemberships:async(e={})=>(console.log("[MembershipService] Fetching user memberships with params:",e),Te(Ee.get(Un.USER_MEMBERSHIPS,{params:e}))),checkMembershipStatus:async e=>(console.log("[MembershipService] Checking membership status for phone:",e),Te(Ee.post(`${Un.USER_MEMBERSHIPS}/check-status`,{phone:e}))),getUserMembershipById:async e=>(console.log("[MembershipService] Fetching user membership:",e),Te(Ee.get(`${Un.USER_MEMBERSHIPS}/${e}`))),extendUserMembership:async(e,t)=>(console.log("[MembershipService] Extending membership:",e,"by",t,"days"),Te(Ee.post(`${Un.USER_MEMBERSHIPS}/${e}/extend`,{additionalDays:t}))),cancelUserMembership:async(e,t)=>(console.log("[MembershipService] Cancelling membership:",e),Te(Ee.post(`${Un.USER_MEMBERSHIPS}/${e}/cancel`,{reason:t}))),updateAdminNotes:async(e,t)=>(console.log("[MembershipService] Updating admin notes for membership:",e),Te(Ee.patch(`${Un.USER_MEMBERSHIPS}/${e}/notes`,{adminNotes:t}))),deleteUserMembership:async e=>(console.log("[MembershipService] Deleting user membership:",e),Te(Ee.delete(`${Un.USER_MEMBERSHIPS}/${e}`)))},a2={name:"",description:"",price:"",compareAtPrice:"",durationInDays:"",perks:[],perkInput:"",displayOrder:"",isFeatured:!1,isActive:!0,maxPurchases:""},_fe={currentPage:1,totalPages:0,totalCount:0,limit:9},Pfe={currentPage:1,totalPages:0,totalCount:0,limit:10};function Ife(){const{hasRole:e}=mn(),t=e(["SUPER_ADMIN","ADMIN"]),[s,n]=w.useState("memberships"),[a,l]=w.useState([]),[u,f]=w.useState(a2),[m,x]=w.useState({search:"",status:"all",featured:"all"}),[p,v]=w.useState(_fe),[C,T]=w.useState(!1),[E,k]=w.useState(!1),[O,M]=w.useState(null),[L,P]=w.useState(null),[H,B]=w.useState(!1),[F,R]=w.useState(null),[z,U]=w.useState([]),[Y,$]=w.useState([]),[G,ee]=w.useState({phone:"",membershipPlanId:"",amountPaid:"",adminNotes:""}),[ce,se]=w.useState({phone:"",status:"all",paymentStatus:"all",purchaseMethod:"all"}),[J,ne]=w.useState(Pfe),[pe,be]=w.useState(!1),[te,X]=w.useState(null),[re,ge]=w.useState(!1),[de,je]=w.useState(null),[oe,fe]=w.useState(!1),[qe,Ne]=w.useState(null),[Xe,st]=w.useState(""),[Le,we]=w.useState(""),[Ue,ue]=w.useState(""),[He,Se]=w.useState(!1),[tt,lt]=w.useState(!1),[pt,We]=w.useState(!1),[at,Fe]=w.useState(!1),[ft,Gt]=w.useState(null),rr=w.useMemo(()=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}),[]),mr=async(le=1)=>{T(!0),M(null);const ut={page:le,limit:p.limit,sortBy:"displayOrder",sortOrder:"asc"};m.search.trim()&&(ut.search=m.search.trim()),m.status!=="all"&&(ut.isActive=m.status==="active"),m.featured!=="all"&&(ut.isFeatured=m.featured==="featured");const Tt=await hl.getPlans(ut);Tt.success?(l(Tt.data?.plans||[]),U(Tt.data?.plans||z),v({currentPage:Tt.data?.pagination?.currentPage||le,totalPages:Tt.data?.pagination?.totalPages||0,totalCount:Tt.data?.pagination?.totalCount||0,limit:Tt.data?.pagination?.limit||p.limit})):M(Tt.message||"Failed to load plans"),T(!1)},ct=async(le=1)=>{be(!0),X(null);const ut={page:le,limit:J.limit,sortBy:"createdAt",sortOrder:"desc"};ce.phone.trim()&&(ut.phone=ce.phone.trim()),ce.status!=="all"&&(ut.status=ce.status),ce.paymentStatus!=="all"&&(ut.paymentStatus=ce.paymentStatus),ce.purchaseMethod!=="all"&&(ut.purchaseMethod=ce.purchaseMethod);const Tt=await hl.getUserMemberships(ut);Tt.success?($(Tt.data?.memberships||[]),ne({currentPage:Tt.data?.pagination?.currentPage||le,totalPages:Tt.data?.pagination?.totalPages||0,totalCount:Tt.data?.pagination?.totalCount||0,limit:Tt.data?.pagination?.limit||J.limit})):X(Tt.message||"Failed to load memberships"),be(!1)};w.useEffect(()=>{mr(1),ct(1)},[]);const Et=()=>f(a2),_r=le=>{const ut=le.durationInDays===0||le.durationInDays==="0"||le.durationInDays===null||le.durationInDays==="",Tt={name:le.name.trim(),description:le.description.trim(),price:le.price?Number(le.price):0,durationInDays:ut?0:Number(le.durationInDays),perks:le.perks,isFeatured:le.isFeatured,isActive:le.isActive};return le.compareAtPrice&&Number(le.compareAtPrice)>0&&(Tt.compareAtPrice=Number(le.compareAtPrice)),le.displayOrder&&Number(le.displayOrder)>0&&(Tt.displayOrder=Number(le.displayOrder)),le.maxPurchases&&Number(le.maxPurchases)>0&&(Tt.maxPurchases=Number(le.maxPurchases)),console.log("[Memberships] Prepared plan payload:",Tt),Tt},Sr=()=>{const le=u.perkInput.trim();!le||u.perks.includes(le)||f(ut=>({...ut,perks:[...ut.perks,le],perkInput:""}))},cs=le=>{f(ut=>({...ut,perks:ut.perks.filter(Tt=>Tt!==le)}))},_t=le=>{P(le),f({...a2,...le,price:le.price??"",compareAtPrice:le.compareAtPrice??"",durationInDays:le.durationInDays??"",displayOrder:le.displayOrder??"",maxPurchases:le.maxPurchases??"",perks:le.perks||[],perkInput:""}),B(!0)},ve=async le=>{if(le.preventDefault(),!L)return;k(!0),M(null);const ut=await hl.updatePlan(L._id,_r(u));ut.success?(B(!1),P(null),Et(),mr(p.currentPage)):M(ut.message||"Failed to update plan"),k(!1)},Je=async le=>{if(le.preventDefault(),!t)return;ge(!0),X(null);const ut={phone:G.phone.trim(),membershipPlanId:G.membershipPlanId,amountPaid:G.amountPaid?Number(G.amountPaid):void 0,adminNotes:G.adminNotes.trim()||void 0},Tt=await hl.createUserMembership(ut);Tt.success?(ee({phone:"",membershipPlanId:"",amountPaid:"",adminNotes:""}),ct(1)):X(Tt.message||"Failed to create membership"),ge(!1)},nt=async()=>{if(!ce.phone.trim()){je(null);return}fe(!0);const le=await hl.checkMembershipStatus(ce.phone.trim());je(le.success?le.data:{hasActiveMembership:!1,error:le.message}),fe(!1)},At=async le=>{le.preventDefault(),!(!qe||!Xe)&&(Se(!0),await hl.extendUserMembership(qe._id,Number(Xe)),Se(!1),lt(!1),st(""),Ne(null),ct(J.currentPage))},gr=async le=>{le.preventDefault(),!(!qe||!Le.trim())&&(Se(!0),await hl.cancelUserMembership(qe._id,Le.trim()),Se(!1),We(!1),we(""),Ne(null),ct(J.currentPage))},Xs=async le=>{le.preventDefault(),qe&&(Se(!0),await hl.updateAdminNotes(qe._id,Ue.trim()),Se(!1),Fe(!1),ue(""),Ne(null),ct(J.currentPage))},as=async()=>{ft&&(Se(!0),await hl.deleteUserMembership(ft),Se(!1),Gt(null),ct(J.currentPage))},bt=({plan:le})=>r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${le.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:le.isActive?"Active":"Inactive"}),le.isFeatured&&r.jsxs("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-amber-100 text-amber-700 flex items-center gap-1",children:[r.jsx($u,{className:"h-3 w-3"}),"Featured"]}),le.isDeleted&&r.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-700",children:"Deleted"})]});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Memberships"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Create plans and manage member subscriptions."})]}),r.jsxs("button",{onClick:()=>{mr(p.currentPage),ct(J.currentPage)},className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[r.jsx(qs,{className:"h-4 w-4"}),"Refresh"]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-2 shadow-sm flex gap-2",children:[r.jsx("button",{onClick:()=>n("plans"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold ${s==="plans"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`,children:"Membership Plans"}),r.jsx("button",{onClick:()=>n("memberships"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold ${s==="memberships"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`,children:"Member Subscriptions"})]}),s==="plans"&&r.jsxs("div",{className:"space-y-6",id:"plans-tab-content",children:[O&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[r.jsx(wr,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:O})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"p-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",value:m.search,onChange:le=>x({...m,search:le.target.value}),onKeyDown:le=>le.key==="Enter"&&mr(1),onBlur:()=>mr(1),placeholder:"Search plans",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:m.status,onChange:le=>x({...m,status:le.target.value}),onBlur:()=>mr(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"all",children:"All status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]}),r.jsxs("select",{value:m.featured,onChange:le=>x({...m,featured:le.target.value}),onBlur:()=>mr(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"all",children:"All visibility"}),r.jsx("option",{value:"featured",children:"Featured"}),r.jsx("option",{value:"standard",children:"Standard"})]}),r.jsx("button",{onClick:()=>{x({search:"",status:"all",featured:"all"}),mr(1)},className:"px-3 py-2 text-sm text-gray-600 bg-gray-100 border border-gray-200 rounded-lg hover:bg-gray-200",children:"Reset"})]})]}),C?r.jsxs("div",{className:"p-6 flex items-center justify-center gap-2 text-gray-600",children:[r.jsx(it,{className:"h-5 w-5 animate-spin"}),"Loading plans..."]}):a.length===0?r.jsx("div",{className:"p-6 text-center text-gray-500",children:"No membership plans found."}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 p-4",children:a.map(le=>r.jsxs("div",{className:"border border-gray-200 rounded-xl p-4 flex flex-col gap-3 hover:shadow-sm transition",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:le.name}),r.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:le.description}),r.jsx(bt,{plan:le})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xl font-bold text-gray-900",children:rr.format(le.price||0)}),le.compareAtPrice&&r.jsx("p",{className:"text-xs text-gray-500 line-through",children:rr.format(le.compareAtPrice)})]})]}),r.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[r.jsx(Vc,{className:"h-4 w-4"}),"Display order: ",le.displayOrder??"-"]}),r.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[r.jsx(tb,{className:"h-4 w-4"}),le.durationInDays===0||le.durationInDays===null||le.isLifetime?r.jsxs("span",{className:"flex items-center gap-1 text-yellow-700 font-semibold",children:[r.jsx($u,{className:"h-3.5 w-3.5",fill:"currentColor"}),"Lifetime"]}):`${le.durationInDays} days`," - ",le.currentPurchases??0,le.maxPurchases?` / ${le.maxPurchases}`:""," purchases"]}),le.perks?.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:le.perks.map(ut=>r.jsx("span",{className:"px-2 py-1 text-xs rounded-lg bg-gray-100 text-gray-800",children:ut},ut))}),r.jsx("div",{className:"flex items-center gap-3 pt-2",children:r.jsx("button",{onClick:()=>_t(le),className:"w-full px-3 py-2 text-sm text-white bg-gray-900 rounded-lg hover:bg-gray-800",children:"Edit"})})]},le._id))}),p.totalPages>1&&r.jsx(Dr,{currentPage:p.currentPage,totalPages:p.totalPages,totalItems:p.totalCount,itemsPerPage:p.limit,onPageChange:le=>mr(le),itemLabel:"plans"})]})]}),s==="memberships"&&r.jsxs("div",{className:"space-y-6",id:"memberships-tab-content",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ga,{className:"h-5 w-5 text-gray-800"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Check membership status"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsx("input",{type:"text",value:ce.phone,onChange:le=>se({...ce,phone:le.target.value}),placeholder:"Phone number",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),r.jsxs("button",{onClick:nt,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800",children:[oe?r.jsx(it,{className:"h-4 w-4 animate-spin"}):r.jsx(Br,{className:"h-4 w-4"}),"Check"]})]}),de&&r.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 bg-gray-50 space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-900",children:[de.hasActiveMembership?r.jsx(sd,{className:"h-4 w-4 text-green-600"}):r.jsx(wr,{className:"h-4 w-4 text-red-600"}),de.hasActiveMembership?"Active membership found":"No active membership"]}),de.membership&&r.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("p",{children:["Plan: ",de.membership.membershipPlanId?.name]}),de.membership.isLifetime?r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"flex items-center gap-1 text-yellow-700 font-semibold",children:[r.jsx($u,{className:"h-3.5 w-3.5",fill:"currentColor"}),"Lifetime Membership"]}),r.jsx("p",{children:"Valid: Forever"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("p",{children:["Valid till:"," ",de.membership.endDate?new Date(de.membership.endDate).toLocaleDateString():"-"]}),r.jsxs("p",{children:["Days remaining: ",de.membership.daysRemaining??"-"]})]})]}),de.error&&r.jsx("p",{className:"text-sm text-red-600",children:de.error})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(uw,{className:"h-5 w-5 text-gray-800"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Create membership manually"})]}),te&&r.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(wr,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:te})]}),r.jsxs("form",{onSubmit:Je,className:"space-y-3",children:[r.jsx("input",{type:"text",value:G.phone,onChange:le=>ee({...G,phone:le.target.value}),required:!0,placeholder:"Phone number",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),r.jsxs("select",{value:G.membershipPlanId,onChange:le=>ee({...G,membershipPlanId:le.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"Select plan"}),z.map(le=>r.jsxs("option",{value:le._id,children:[le.name," - ",rr.format(le.price||0)]},le._id))]}),r.jsx("input",{type:"number",min:"0",value:G.amountPaid,onChange:le=>ee({...G,amountPaid:le.target.value}),placeholder:"Amount paid (optional)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),r.jsx("textarea",{rows:3,value:G.adminNotes,onChange:le=>ee({...G,adminNotes:le.target.value}),placeholder:"Admin notes",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{type:"submit",disabled:re,className:"inline-flex items-center gap-2 px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[re?r.jsx(it,{className:"h-4 w-4 animate-spin"}):r.jsx(kr,{className:"h-4 w-4"}),"Create membership"]})})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"p-4 flex flex-col lg:flex-row gap-3 lg:items-center lg:justify-between",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",value:ce.phone,onChange:le=>se({...ce,phone:le.target.value}),onKeyDown:le=>le.key==="Enter"&&ct(1),placeholder:"Search by phone",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:ce.status,onChange:le=>se({...ce,status:le.target.value}),onBlur:()=>ct(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"all",children:"All status"}),r.jsx("option",{value:"ACTIVE",children:"Active"}),r.jsx("option",{value:"CANCELLED",children:"Cancelled"}),r.jsx("option",{value:"EXPIRED",children:"Expired"})]}),r.jsxs("select",{value:ce.paymentStatus,onChange:le=>se({...ce,paymentStatus:le.target.value}),onBlur:()=>ct(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"all",children:"All payments"}),r.jsx("option",{value:"SUCCESS",children:"Success"}),r.jsx("option",{value:"PENDING",children:"Pending"}),r.jsx("option",{value:"FAILED",children:"Failed"})]}),r.jsxs("select",{value:ce.purchaseMethod,onChange:le=>se({...ce,purchaseMethod:le.target.value}),onBlur:()=>ct(1),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"all",children:"All methods"}),r.jsx("option",{value:"ADMIN",children:"Admin"}),r.jsx("option",{value:"IN_APP",children:"In app"}),r.jsx("option",{value:"WEBSITE",children:"Website"})]}),r.jsx("button",{onClick:()=>{se({phone:"",status:"all",paymentStatus:"all",purchaseMethod:"all"}),ct(1)},className:"px-3 py-2 text-sm text-gray-600 bg-gray-100 border border-gray-200 rounded-lg hover:bg-gray-200",children:"Reset"}),r.jsxs("button",{onClick:()=>ct(1),className:"px-3 py-2 text-sm text-white bg-gray-900 rounded-lg hover:bg-gray-800 flex items-center gap-2",children:[r.jsx(Br,{className:"h-4 w-4"}),"Apply"]})]})]}),pe?r.jsxs("div",{className:"p-6 flex items-center justify-center gap-2 text-gray-600",children:[r.jsx(it,{className:"h-5 w-5 animate-spin"}),"Loading memberships..."]}):Y.length===0?r.jsx("div",{className:"p-6 text-center text-gray-500",children:"No memberships found."}):r.jsx("div",{className:"divide-y divide-gray-200",children:Y.map(le=>r.jsxs("div",{className:"p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-900",children:le.membershipPlanId?.name||"Membership"}),le.isCurrentlyActive&&r.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-emerald-100 text-emerald-700",children:"Active now"})]}),r.jsx("p",{className:"text-sm text-gray-600",children:le.phone}),r.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[r.jsx(tb,{className:"h-4 w-4 text-gray-500"}),le.startDate?new Date(le.startDate).toLocaleDateString():"-"," -"," ",le.endDate?new Date(le.endDate).toLocaleDateString():"-"]}),r.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[r.jsx(sw,{className:"h-4 w-4 text-gray-500"}),rr.format(le.amountPaid||le.membershipPlanId?.price||0)]}),r.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[r.jsx(ad,{className:"h-4 w-4 text-gray-500"}),le.adminNotes||"No notes"]}),r.jsxs("div",{className:"flex flex-wrap gap-2 pt-1",children:[r.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${le.status==="ACTIVE"?"bg-green-100 text-green-700":le.status==="CANCELLED"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`,children:le.status}),r.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${le.paymentStatus==="SUCCESS"?"bg-emerald-100 text-emerald-700":le.paymentStatus==="FAILED"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:le.paymentStatus}),r.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-blue-100 text-blue-700",children:le.purchaseMethod||"IN_APP"})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("button",{onClick:()=>{Ne(le),st(""),lt(!0)},className:"px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Extend"}),r.jsx("button",{onClick:()=>{Ne(le),we(""),We(!0)},className:"px-3 py-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100",children:"Cancel"}),r.jsx("button",{onClick:()=>{Ne(le),ue(le.adminNotes||""),Fe(!0)},className:"px-3 py-2 text-sm text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50",children:"Notes"}),r.jsx("button",{onClick:()=>Gt(le._id),className:"px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Delete"})]})]},le._id))}),J.totalPages>1&&r.jsx(Dr,{currentPage:J.currentPage,totalPages:J.totalPages,totalItems:J.totalCount,itemsPerPage:J.limit,onPageChange:le=>ct(le),itemLabel:"memberships"})]})]}),r.jsx(Lt,{isOpen:H,onClose:()=>{B(!1),P(null),Et()},title:"Edit membership plan",size:"lg",children:r.jsxs("form",{onSubmit:ve,className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx("input",{type:"text",value:u.name,onChange:le=>f({...u,name:le.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Plan name"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[r.jsx("input",{type:"checkbox",checked:u.durationInDays===0||u.durationInDays==="0"||u.durationInDays===null||u.durationInDays==="",onChange:le=>{le.target.checked?f({...u,durationInDays:"0"}):f({...u,durationInDays:""})},className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx($u,{className:"h-4 w-4 text-yellow-600",fill:"currentColor"}),"Lifetime Membership (Never Expires)"]})]}),!(u.durationInDays===0||u.durationInDays==="0"||u.durationInDays===null||u.durationInDays==="")&&r.jsx("input",{type:"number",min:"1",value:u.durationInDays,onChange:le=>f({...u,durationInDays:le.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Duration in days"})]}),r.jsx("input",{type:"number",min:"0",value:u.price,onChange:le=>f({...u,price:le.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Price"}),r.jsx("input",{type:"number",min:"0",value:u.compareAtPrice,onChange:le=>f({...u,compareAtPrice:le.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Compare at price"}),r.jsx("input",{type:"number",min:"1",value:u.displayOrder,onChange:le=>f({...u,displayOrder:le.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Display order"}),r.jsx("input",{type:"number",min:"0",value:u.maxPurchases,onChange:le=>f({...u,maxPurchases:le.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Max purchases"})]}),r.jsx("textarea",{rows:3,value:u.description,onChange:le=>f({...u,description:le.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Description"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[r.jsx("input",{type:"checkbox",checked:u.isActive,onChange:le=>f({...u,isActive:le.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),"Active"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[r.jsx("input",{type:"checkbox",checked:u.isFeatured,onChange:le=>f({...u,isFeatured:le.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),"Featured"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsx("input",{type:"text",value:u.perkInput,onChange:le=>f({...u,perkInput:le.target.value}),onKeyDown:le=>{le.key==="Enter"&&(le.preventDefault(),Sr())},placeholder:"Add perk",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),r.jsxs("button",{type:"button",onClick:Sr,className:"inline-flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800",children:[r.jsx(kr,{className:"h-4 w-4"}),"Add perk"]})]}),u.perks.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:u.perks.map(le=>r.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gray-100 text-gray-800 text-sm",children:[le,r.jsx("button",{type:"button",onClick:()=>cs(le),className:"text-gray-500 hover:text-gray-700",children:"x"})]},le))})]}),r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{type:"button",onClick:()=>{B(!1),P(null),Et()},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Close"}),r.jsxs("button",{type:"submit",disabled:E,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[E?r.jsx(it,{className:"h-4 w-4 animate-spin"}):r.jsx(sd,{className:"h-4 w-4"}),"Save changes"]})]})]})}),r.jsx(Lt,{isOpen:tt,onClose:()=>{lt(!1),Ne(null),st("")},title:"Extend membership",children:r.jsxs("form",{onSubmit:At,className:"space-y-3",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:["Extend ",qe?.membershipPlanId?.name," for ",qe?.phone]}),r.jsx("input",{type:"number",min:"1",value:Xe,onChange:le=>st(le.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Additional days"}),r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{type:"button",onClick:()=>{lt(!1),Ne(null),st("")},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Close"}),r.jsxs("button",{type:"submit",disabled:He,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[He?r.jsx(it,{className:"h-4 w-4 animate-spin"}):r.jsx(tb,{className:"h-4 w-4"}),"Extend"]})]})]})}),r.jsx(Lt,{isOpen:pt,onClose:()=>{We(!1),Ne(null),we("")},title:"Cancel membership",children:r.jsxs("form",{onSubmit:gr,className:"space-y-3",children:[r.jsx("textarea",{rows:3,value:Le,onChange:le=>we(le.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Cancellation reason"}),r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{type:"button",onClick:()=>{We(!1),Ne(null),we("")},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Close"}),r.jsxs("button",{type:"submit",disabled:He,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-60",children:[He?r.jsx(it,{className:"h-4 w-4 animate-spin"}):r.jsx(wr,{className:"h-4 w-4"}),"Cancel membership"]})]})]})}),r.jsx(Lt,{isOpen:at,onClose:()=>{Fe(!1),Ne(null),ue("")},title:"Update admin notes",size:"lg",children:r.jsxs("form",{onSubmit:Xs,className:"space-y-3",children:[r.jsx("textarea",{rows:4,value:Ue,onChange:le=>ue(le.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Add admin notes"}),r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{type:"button",onClick:()=>{Fe(!1),Ne(null),ue("")},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Close"}),r.jsxs("button",{type:"submit",disabled:He,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[He?r.jsx(it,{className:"h-4 w-4 animate-spin"}):r.jsx(ad,{className:"h-4 w-4"}),"Save notes"]})]})]})}),r.jsx(en,{isOpen:!!ft,onClose:()=>Gt(null),onConfirm:as,title:"Delete membership",message:"This will remove the membership record. This action cannot be undone.",confirmText:"Delete membership",variant:"danger",isLoading:He})]})}function Mfe({request:e,onClose:t,onSuccess:s}){const[n,a]=w.useState([]),[l,u]=w.useState({planId:e.requestedPlanId?._id||"",paymentAmount:"",adminNotes:"",sendWhatsApp:!0}),[f,m]=w.useState(!1),[x,p]=w.useState(!0),[v,C]=w.useState("");w.useEffect(()=>{(async()=>{p(!0);try{const M=await ld.getPlans();if(M.success){if(a(M.data.plans||[]),e.requestedPlanId?._id){const L=M.data.plans.find(P=>P._id===e.requestedPlanId._id);L&&u(P=>({...P,paymentAmount:L.price}))}}else C("Failed to load membership plans")}catch{C("An error occurred while loading plans")}finally{p(!1)}})()},[e]);const T=O=>{const M=n.find(L=>L._id===O);u(L=>({...L,planId:O,paymentAmount:M?.price||""})),C("")},E=async()=>{if(!l.planId){C("Please select a membership plan");return}if(!l.paymentAmount||l.paymentAmount<0){C("Please enter a valid payment amount");return}m(!0),C("");try{const O=await ld.approve(e._id,{planId:l.planId,paymentAmount:Number(l.paymentAmount),adminNotes:l.adminNotes.trim()||void 0,sendWhatsApp:l.sendWhatsApp});O.success?(s(),t()):C(O.message||"Failed to approve request")}catch{C("An error occurred while approving the request")}finally{m(!1)}},k=n.find(O=>O._id===l.planId);return r.jsx(Lt,{isOpen:!0,onClose:t,title:"Approve Membership Request",size:"lg",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Applicant Information"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ls,{className:"h-4 w-4 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Name"}),r.jsx("p",{className:"font-medium text-gray-900",children:e.name})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ga,{className:"h-4 w-4 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),r.jsx("p",{className:"font-medium text-gray-900",children:e.phone})]})]})]}),e.isExistingUser&&e.existingUserInfo&&r.jsxs("div",{className:"mt-4 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Yn,{className:"h-4 w-4 text-purple-600"}),r.jsx("p",{className:"font-semibold text-purple-900",children:"Existing User"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[r.jsx("div",{children:r.jsxs("p",{className:"text-purple-700",children:["Email: ",e.existingUserInfo.email||"N/A"]})}),r.jsx("div",{children:r.jsxs("p",{className:"text-purple-700",children:["Enrollments: ",e.existingUserInfo.enrollmentCount||0]})})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Membership Plan ",r.jsx("span",{className:"text-red-500",children:"*"})]}),x?r.jsx("div",{className:"flex items-center justify-center py-4",children:r.jsx(it,{className:"h-5 w-5 animate-spin text-gray-400"})}):r.jsxs("select",{value:l.planId,onChange:O=>T(O.target.value),disabled:f,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"Select a plan"}),n.filter(O=>O.isAvailable).map(O=>r.jsxs("option",{value:O._id,children:[O.name," - ",O.price.toLocaleString("en-IN")," (",O.durationInDays," ","days)"]},O._id))]}),k&&r.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(rp,{className:"h-5 w-5 text-yellow-500 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:k.name}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.description}),k.perks&&k.perks.length>0&&r.jsx("ul",{className:"mt-2 space-y-1",children:k.perks.map((O,M)=>r.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-1",children:[r.jsx("span",{className:"text-green-500 mt-0.5",children:""}),O]},M))})]})]})}),e.requestedPlanId&&k&&k._id!==e.requestedPlanId._id&&r.jsx("div",{className:"mt-3 p-3 bg-amber-50 border border-amber-300 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Mt,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-amber-900 mb-2",children:"Plan Changed"}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsxs("span",{className:"text-amber-800",children:[r.jsx("strong",{children:"Requested:"})," ",e.requestedPlanId.name]}),r.jsx(PU,{className:"h-4 w-4 text-amber-600"}),r.jsxs("span",{className:"text-amber-900 font-semibold",children:[r.jsx("strong",{children:"Approving:"})," ",k.name]})]})]})]})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Amount () ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",min:"0",step:"1",value:l.paymentAmount,onChange:O=>u(M=>({...M,paymentAmount:O.target.value})),disabled:f,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"Enter payment amount"}),r.jsxs("div",{className:"flex items-start justify-between mt-1",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"You can adjust the amount for discounts or special pricing"}),k&&l.paymentAmount&&Number(l.paymentAmount)!==k.price&&r.jsx("span",{className:"text-xs font-medium text-blue-700 bg-blue-100 px-2 py-0.5 rounded",children:"Custom Pricing"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin Notes ",r.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),r.jsx("textarea",{value:l.adminNotes,onChange:O=>u(M=>({...M,adminNotes:O.target.value})),disabled:f,maxLength:500,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Internal notes (not visible to user)"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.adminNotes.length,"/500 characters"]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"sendWhatsApp",checked:l.sendWhatsApp,onChange:O=>u(M=>({...M,sendWhatsApp:O.target.checked})),disabled:f,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),r.jsx("label",{htmlFor:"sendWhatsApp",className:"text-sm font-medium text-gray-700",children:"Send payment link via WhatsApp"})]}),v&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(Mt,{className:"h-5 w-5"}),r.jsx("p",{className:"text-sm",children:v})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{onClick:t,disabled:f,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsxs("button",{onClick:E,disabled:f||x,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[f&&r.jsx(it,{className:"h-4 w-4 animate-spin"}),f?"Approving...":"Approve & Send Link"]})]})]})})}function Rfe({request:e,onClose:t,onSuccess:s}){const[n,a]=w.useState({rejectionReason:"",adminNotes:""}),[l,u]=w.useState(!1),[f,m]=w.useState(""),x=async()=>{if(!n.rejectionReason.trim()){m("Rejection reason is required");return}u(!0),m("");try{const p=await ld.reject(e._id,{rejectionReason:n.rejectionReason.trim(),adminNotes:n.adminNotes.trim()||void 0});p.success?(s(),t()):m(p.message||"Failed to reject request")}catch{m("An error occurred while rejecting the request")}finally{u(!1)}};return r.jsx(Lt,{isOpen:!0,onClose:t,title:"Reject Membership Request",size:"md",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(wr,{className:"h-5 w-5 text-red-600 mt-0.5 shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-red-900",children:"Confirm Rejection"}),r.jsx("p",{className:"text-sm text-red-700 mt-1",children:"This action will reject the membership application. The user will be notified with the rejection reason you provide."})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Applicant Information"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ls,{className:"h-4 w-4 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Name"}),r.jsx("p",{className:"font-medium text-gray-900",children:e.name})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ga,{className:"h-4 w-4 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),r.jsx("p",{className:"font-medium text-gray-900",children:e.phone})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rejection Reason ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{value:n.rejectionReason,onChange:p=>a(v=>({...v,rejectionReason:p.target.value})),disabled:l,maxLength:500,rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Enter the reason for rejection (this will be shown to the user)",required:!0}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[n.rejectionReason.length,"/500 characters  This will be visible to the user"]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin Notes ",r.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional, Internal Only)"})]}),r.jsx("textarea",{value:n.adminNotes,onChange:p=>a(v=>({...v,adminNotes:p.target.value})),disabled:l,maxLength:500,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Internal notes (not visible to user)"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[n.adminNotes.length,"/500 characters  Internal use only"]})]}),f&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(Mt,{className:"h-5 w-5"}),r.jsx("p",{className:"text-sm",children:f})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{onClick:t,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsxs("button",{onClick:x,disabled:l,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[l&&r.jsx(it,{className:"h-4 w-4 animate-spin"}),l?"Rejecting...":"Reject Request"]})]})]})})}const Gh=e=>e?new Date(e).toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",YO={PENDING:{label:"Pending Review",bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-300",icon:fr},PAYMENT_SENT:{label:"Payment Link Sent",bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300",icon:nw},COMPLETED:{label:"Completed",bg:"bg-green-100",text:"text-green-700",border:"border-green-300",icon:ls},REJECTED:{label:"Rejected",bg:"bg-red-100",text:"text-red-700",border:"border-red-300",icon:wr},WITHDRAWN:{label:"Withdrawn by User",bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300",icon:wr}};function Lfe({request:e,onClose:t,onApprove:s,onReject:n,onResendLink:a}){const l=YO[e.status]||YO.PENDING,u=l.icon;return r.jsx(Lt,{isOpen:!0,onClose:t,title:"Membership Request Details",size:"xl",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg border ${l.bg} ${l.text} ${l.border}`,children:[r.jsx(u,{className:"h-5 w-5"}),r.jsx("span",{className:"font-semibold",children:l.label})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[e.status==="PENDING"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>{t(),s(e)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[r.jsx(ls,{className:"h-4 w-4"}),"Approve"]}),r.jsxs("button",{onClick:()=>{t(),n(e)},className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[r.jsx(wr,{className:"h-4 w-4"}),"Reject"]})]}),e.status==="PAYMENT_SENT"&&r.jsxs("button",{onClick:()=>{a(e)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(gk,{className:"h-4 w-4"}),"Resend Link"]})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-4",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(Ls,{className:"h-5 w-5"}),"Applicant Information"]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-white rounded-lg",children:r.jsx(Ls,{className:"h-5 w-5 text-gray-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Full Name"}),r.jsx("p",{className:"font-medium text-gray-900",children:e.name})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-white rounded-lg",children:r.jsx(ga,{className:"h-5 w-5 text-gray-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Phone Number"}),r.jsx("p",{className:"font-medium text-gray-900",children:e.phone})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-white rounded-lg",children:r.jsx(fr,{className:"h-5 w-5 text-gray-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Submitted On"}),r.jsx("p",{className:"font-medium text-gray-900",children:Gh(e.createdAt)})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-white rounded-lg",children:r.jsx(fr,{className:"h-5 w-5 text-gray-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Last Updated"}),r.jsx("p",{className:"font-medium text-gray-900",children:Gh(e.updatedAt)})]})]})]})]}),e.isExistingUser&&e.existingUserInfo&&r.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yn,{className:"h-5 w-5 text-purple-600"}),r.jsx("h3",{className:"font-semibold text-purple-900",children:"Existing User"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-purple-700",children:"Email"}),r.jsx("p",{className:"font-medium text-purple-900",children:e.existingUserInfo.email||"Not available"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-purple-700",children:"User ID"}),r.jsx("p",{className:"font-mono text-sm text-purple-900",children:e.existingUserInfo._id})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-purple-700",children:"Event Enrollments"}),r.jsx("p",{className:"font-medium text-purple-900",children:e.existingUserInfo.enrollmentCount||0})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-purple-700",children:"Registered On"}),r.jsx("p",{className:"font-medium text-purple-900",children:Gh(e.existingUserInfo.registeredAt)})]})]})]}),e.requestedPlanId&&r.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rp,{className:"h-5 w-5 text-yellow-500"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:"Requested Membership Plan"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Plan Name"}),r.jsx("p",{className:"font-semibold text-gray-900",children:e.requestedPlanId.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Price"}),r.jsxs("p",{className:"font-semibold text-gray-900",children:["",e.requestedPlanId.price?.toLocaleString("en-IN")]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Duration"}),r.jsx("p",{className:"font-semibold text-gray-900",children:e.requestedPlanId.durationInDays===0||e.requestedPlanId.durationInDays===null?" Lifetime":`${e.requestedPlanId.durationInDays} days`})]})]}),e.requestedPlanId.description&&r.jsx("p",{className:"text-sm text-gray-700",children:e.requestedPlanId.description}),e.requestedPlanId.perks&&e.requestedPlanId.perks.length>0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Plan Perks"}),r.jsx("ul",{className:"space-y-1",children:e.requestedPlanId.perks.map((f,m)=>r.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[r.jsx("span",{className:"text-green-500 mt-0.5",children:""}),f]},m))})]})]}),e.approvedPlanId&&e.approvedPlanId._id!==e.requestedPlanId?._id&&r.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ls,{className:"h-5 w-5 text-green-600"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:"Approved Plan (Modified)"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Plan Name"}),r.jsx("p",{className:"font-semibold text-gray-900",children:e.approvedPlanId.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Original Price"}),r.jsxs("p",{className:"font-semibold text-gray-900",children:["",e.approvedPlanId.price?.toLocaleString("en-IN")]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Duration"}),r.jsx("p",{className:"font-semibold text-gray-900",children:e.approvedPlanId.durationInDays===0||e.approvedPlanId.durationInDays===null?"Lifetime":`${e.approvedPlanId.durationInDays} days`})]})]})]}),e.status==="WITHDRAWN"&&r.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(wr,{className:"h-5 w-5 text-gray-600"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:"Withdrawal Information"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Withdrawn On"}),r.jsx("p",{className:"font-medium text-gray-900",children:Gh(e.deletedAt||e.updatedAt)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Status"}),r.jsx("p",{className:"font-medium text-gray-900",children:"User withdrew this request"})]})]}),r.jsxs("div",{className:"p-3 bg-blue-50 rounded text-sm text-blue-800",children:[r.jsx("strong",{children:"Note:"})," The user withdrew this request and may have submitted a new one."]})]}),(e.status==="PAYMENT_SENT"||e.status==="COMPLETED")&&r.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lk,{className:"h-5 w-5 text-blue-600"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:"Payment Information"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Payment Amount"}),r.jsxs("p",{className:"font-semibold text-gray-900",children:["",e.paymentAmount?.toLocaleString("en-IN")]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Order ID"}),r.jsx("p",{className:"font-mono text-sm text-gray-900",children:e.orderId||"N/A"})]})]}),e.paymentUrl&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Payment Link"}),r.jsxs("a",{href:e.paymentUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 text-sm font-medium",children:[r.jsx(nw,{className:"h-4 w-4"}),e.paymentUrl]})]})]}),e.reviewedBy&&r.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cw,{className:"h-5 w-5 text-gray-600"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:"Review Information"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Reviewed By"}),r.jsx("p",{className:"font-medium text-gray-900",children:e.reviewedBy.name||e.reviewedBy.username})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Reviewed On"}),r.jsx("p",{className:"font-medium text-gray-900",children:Gh(e.reviewedAt)})]})]}),e.adminNotes&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Admin Notes"}),r.jsx("p",{className:"text-sm text-gray-700 bg-white p-3 rounded border border-gray-200",children:e.adminNotes})]}),e.rejectionReason&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Rejection Reason"}),r.jsx("p",{className:"text-sm text-red-700 bg-red-50 p-3 rounded border border-red-200",children:e.rejectionReason})]})]}),e.userMembershipId&&r.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ls,{className:"h-5 w-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-green-900",children:"Membership Granted"}),r.jsxs("p",{className:"text-sm text-green-700",children:["Membership ID: ",r.jsx("span",{className:"font-mono",children:e.userMembershipId})]})]})]})}),r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsxs("p",{className:"text-xs text-gray-500",children:["Request ID: ",r.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-gray-700",children:e._id})]})})]})})}const XO={PENDING:{label:"Pending",bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-300"},PAYMENT_SENT:{label:"Payment Link Sent",bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"},COMPLETED:{label:"Completed",bg:"bg-green-100",text:"text-green-700",border:"border-green-300"},REJECTED:{label:"Rejected",bg:"bg-red-100",text:"text-red-700",border:"border-red-300"},WITHDRAWN:{label:"Withdrawn",bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300"}};function Bfe(){const[e,t]=w.useState([]),[s,n]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:20,hasNextPage:!1,hasPrevPage:!1}),[a,l]=w.useState({page:1,limit:20,status:"",search:"",sortBy:"createdAt",sortOrder:"desc"}),[u,f]=w.useState(!0),[m,x]=w.useState(null),[p,v]=w.useState(!1),[C,T]=w.useState(!1),[E,k]=w.useState(!1),[O,M]=w.useState(null),L=w.useCallback(async()=>{f(!0),x(null);try{const ee=await ld.getAll(a);ee.success?(t(ee.data.requests||[]),n(ee.data.pagination||s)):(x(ee.message||"Failed to fetch membership requests"),t([]))}catch{x("An error occurred while fetching requests"),t([])}finally{f(!1)}},[a]);w.useEffect(()=>{L()},[L]);const P=(ee,ce)=>{l(se=>({...se,[ee]:ce,page:1}))},H=ee=>{l(ce=>({...ce,page:ee}))},B=ee=>{P("search",ee)},F=ee=>{M(ee),k(!0)},R=ee=>{M(ee),v(!0)},z=ee=>{M(ee),T(!0)},U=async ee=>{if(window.confirm("Resend payment link via WhatsApp?"))try{const ce=await ld.resendPaymentLink(ee._id);ce.success?(alert("Payment link resent successfully"),L()):alert(ce.message||"Failed to resend payment link")}catch{alert("An error occurred while resending the link")}},Y=()=>{L()},$=ee=>ee?new Date(ee).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A",G=ee=>{const ce=XO[ee]||XO.PENDING;return r.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold border ${ce.bg} ${ce.text} ${ce.border}`,children:ce.label})};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Membership Requests"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage and review membership applications"})]}),r.jsxs("button",{onClick:L,disabled:u,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50",children:[r.jsx(qs,{className:`h-4 w-4 ${u?"animate-spin":""}`}),"Refresh"]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[r.jsx(Va,{className:"h-5 w-5"}),"Filters"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by phone or name...",value:a.search,onChange:ee=>B(ee.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),r.jsxs("select",{value:a.status,onChange:ee=>P("status",ee.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"PENDING",children:"Pending"}),r.jsx("option",{value:"PAYMENT_SENT",children:"Payment Link Sent"}),r.jsx("option",{value:"COMPLETED",children:"Completed"}),r.jsx("option",{value:"REJECTED",children:"Rejected"}),r.jsx("option",{value:"WITHDRAWN",children:"Withdrawn"})]}),r.jsxs("select",{value:`${a.sortBy}-${a.sortOrder}`,onChange:ee=>{const[ce,se]=ee.target.value.split("-");l(J=>({...J,sortBy:ce,sortOrder:se}))},className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"createdAt-desc",children:"Newest First"}),r.jsx("option",{value:"createdAt-asc",children:"Oldest First"}),r.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),r.jsx("option",{value:"name-desc",children:"Name (Z-A)"})]})]})]}),m&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[r.jsx(Mt,{className:"h-5 w-5"}),m]}),u&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 flex items-center justify-center",children:[r.jsx(it,{className:"h-8 w-8 animate-spin text-gray-800"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading requests..."})]}),!u&&e.length===0&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx(Ls,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No membership requests found"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a.search||a.status?"Try adjusting your filters":"New requests will appear here"})]}),!u&&e.length>0&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Applicant"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Requested Plan"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Submitted On"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(ee=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ls,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"font-medium text-gray-900",children:ee.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ga,{className:"h-3.5 w-3.5 text-gray-400"}),r.jsx("span",{className:"text-sm text-gray-600",children:ee.phone})]}),ee.isExistingUser&&r.jsx("span",{className:"inline-flex items-center w-fit px-2 py-0.5 rounded-md text-xs font-medium bg-purple-100 text-purple-700 border border-purple-200",children:"Existing User"})]})}),r.jsx("td",{className:"px-6 py-4",children:ee.requestedPlanId?r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(rp,{className:"h-4 w-4 text-yellow-500 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:ee.requestedPlanId.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:["",ee.requestedPlanId.price,"  ",ee.requestedPlanId.durationInDays===0||ee.requestedPlanId.durationInDays===null?" Lifetime":`${ee.requestedPlanId.durationInDays} days`]})]})]}),ee.approvedPlanId&&ee.approvedPlanId._id!==ee.requestedPlanId._id&&r.jsxs("div",{className:"pl-6 border-l-2 border-green-300",children:[r.jsx("p",{className:"text-xs font-medium text-green-700 mb-1",children:" Approved Plan"}),r.jsx("p",{className:"font-medium text-gray-900 text-sm",children:ee.approvedPlanId.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:["",ee.paymentAmount||ee.approvedPlanId.price,"  ",ee.approvedPlanId.durationInDays===0||ee.approvedPlanId.durationInDays===null?" Lifetime":`${ee.approvedPlanId.durationInDays} days`]})]})]}):r.jsx("span",{className:"text-sm text-gray-500",children:"No plan selected"})}),r.jsx("td",{className:"px-6 py-4",children:G(ee.status)}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(fr,{className:"h-4 w-4"}),$(ee.createdAt)]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>F(ee),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:r.jsx(Lr,{className:"h-4 w-4"})}),ee.status==="PENDING"&&r.jsx("button",{onClick:()=>R(ee),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve Request",children:r.jsx(ls,{className:"h-4 w-4"})}),ee.status==="PENDING"&&r.jsx("button",{onClick:()=>z(ee),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject Request",children:r.jsx(wr,{className:"h-4 w-4"})}),ee.status==="PAYMENT_SENT"&&r.jsx("button",{onClick:()=>U(ee),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Resend Payment Link",children:r.jsx(gk,{className:"h-4 w-4"})})]})})]},ee._id))})]})}),r.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:r.jsx(Dr,{currentPage:s.currentPage,totalPages:s.totalPages,onPageChange:H,totalCount:s.totalCount,itemsPerPage:s.limit})})]}),p&&O&&r.jsx(Mfe,{request:O,onClose:()=>{v(!1),M(null)},onSuccess:Y}),C&&O&&r.jsx(Rfe,{request:O,onClose:()=>{T(!1),M(null)},onSuccess:Y}),E&&O&&r.jsx(Lfe,{request:O,onClose:()=>{k(!1),M(null)},onApprove:R,onReject:z,onResendLink:U})]})}const wc={CLUBS:"/web/clubs",CONNECT_CLUBS:"/app/connect/clubs"},To={createClub:async e=>(console.log("[ClubsService] Creating club"),Te(Ee.post(wc.CLUBS,e))),getClubs:async(e={})=>(console.log("[ClubsService] Fetching clubs with params:",e),Te(Ee.get(wc.CLUBS,{params:e}))),getClubById:async e=>(console.log("[ClubsService] Fetching club:",e),Te(Ee.get(`${wc.CLUBS}/${e}`))),updateClub:async(e,t)=>(console.log("[ClubsService] Updating club:",e),Te(Ee.put(`${wc.CLUBS}/${e}`,t))),deleteClub:async e=>(console.log("[ClubsService] Deleting club:",e),Te(Ee.delete(`${wc.CLUBS}/${e}`))),getClubStats:async e=>(console.log("[ClubsService] Fetching club stats:",e),Te(Ee.get(`${wc.CLUBS}/${e}/stats`))),getClubMembers:async(e,t={})=>(console.log("[ClubsService] Fetching club members:",e),Te(Ee.get(`${wc.CONNECT_CLUBS}/${e}/members`,{params:t})))};function WO({value:e,onChange:t,disabled:s=!1}){const[n,a]=w.useState(e||["MEMBERS"]);w.useEffect(()=>{e&&a(e)},[e]);const l=f=>{if(s)return;let m;f==="ANYONE"?m=n.includes("ANYONE")?[]:["ANYONE"]:(m=n.filter(x=>x!=="ANYONE"),m.includes(f)?m=m.filter(x=>x!==f):m.push(f)),m.length===0&&(m=["MEMBERS"]),a(m),t(m)},u=n.includes("ANYONE");return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-gray-900",children:["Who Can Post ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:`flex items-center gap-3 p-3 border-2 rounded-lg cursor-pointer transition-all ${n.includes("ANYONE")?"border-green-500 bg-green-50":"border-gray-300 hover:border-gray-400 bg-white"} ${s?"opacity-60 cursor-not-allowed":""}`,children:[r.jsx("input",{type:"checkbox",checked:n.includes("ANYONE"),onChange:()=>l("ANYONE"),disabled:s,className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),r.jsx(cf,{className:`h-4 w-4 ${n.includes("ANYONE")?"text-green-600":"text-gray-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Anyone"}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Any authenticated user can post (no membership required)"})]})]}),r.jsxs("label",{className:`flex items-center gap-3 p-3 border-2 rounded-lg cursor-pointer transition-all ${n.includes("MEMBERS")?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 bg-white"} ${s||u?"opacity-60 cursor-not-allowed":""}`,children:[r.jsx("input",{type:"checkbox",checked:n.includes("MEMBERS"),onChange:()=>l("MEMBERS"),disabled:s||u,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),r.jsx(qg,{className:`h-4 w-4 ${n.includes("MEMBERS")?"text-blue-600":"text-gray-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Members"}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Only approved club members can post"})]})]}),r.jsxs("label",{className:`flex items-center gap-3 p-3 border-2 rounded-lg cursor-pointer transition-all ${n.includes("ADMIN")?"border-red-500 bg-red-50":"border-gray-300 hover:border-gray-400 bg-white"} ${s||u?"opacity-60 cursor-not-allowed":""}`,children:[r.jsx("input",{type:"checkbox",checked:n.includes("ADMIN"),onChange:()=>l("ADMIN"),disabled:s||u,className:"w-4 h-4 text-red-600 bg-gray-100 border-gray-300 rounded focus:ring-red-500"}),r.jsx(ow,{className:`h-4 w-4 ${n.includes("ADMIN")?"text-red-600":"text-gray-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Admins"}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Only system administrators can post"})]})]})]}),r.jsx("div",{className:"text-xs text-gray-500 mt-2",children:u?r.jsx("span",{className:"text-green-600",children:" Anyone can post - MEMBERS and ADMIN are disabled"}):r.jsx("span",{children:"You can select multiple options (ADMIN + MEMBERS)"})})]})}function qR({permissions:e}){const t=Array.isArray(e)?e:["MEMBERS"],s={ANYONE:{label:"Open Posting",icon:cf,className:"bg-green-100 text-green-700 border-green-300"},MEMBERS:{label:"Members",icon:qg,className:"bg-blue-100 text-blue-700 border-blue-300"},ADMIN:{label:"Admins",icon:ow,className:"bg-red-100 text-red-700 border-red-300"}};return r.jsx("div",{className:"flex items-center gap-1.5 flex-wrap",children:t.map(n=>{const a=s[n];if(!a)return null;const l=a.icon;return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-md border ${a.className}`,children:[r.jsx(l,{className:"h-3 w-3"}),a.label]},n)})})}const KO={name:"",description:"",thumbnail:"",requiresApproval:!1,postPermissions:["MEMBERS"]},ZO={currentPage:1,totalPages:0,totalCount:0,limit:10};function Ffe(){const{hasRole:e}=mn(),t=e(["SUPER_ADMIN","ADMIN"]),[s,n]=w.useState("clubs"),[a,l]=w.useState([]),[u,f]=w.useState(KO),[m,x]=w.useState({search:""}),[p,v]=w.useState({...ZO,limit:12}),[C,T]=w.useState(!1),[E,k]=w.useState(!1),[O,M]=w.useState(null),[L,P]=w.useState(null),[H,B]=w.useState(!1),[F,R]=w.useState(null),[z,U]=w.useState(null),[Y,$]=w.useState(!1),[G,ee]=w.useState(!1),[ce,se]=w.useState(null),[J,ne]=w.useState([]),[pe,be]=w.useState(ZO),[te,X]=w.useState(!1),[re,ge]=w.useState(null),de=async(ue=1)=>{T(!0),M(null);const He={page:ue,limit:p.limit,sortBy:"createdAt",sortOrder:"desc"};m.search.trim()&&(He.search=m.search.trim());const Se=await To.getClubs(He);if(Se.success){const tt=Se.data?.clubs||[],lt=await Promise.all(tt.map(async pt=>{try{const We=await To.getClubStats(pt._id);if(console.log("[Clubs] Stats result for",pt.name,":",We),We.success&&We.data){const at=We.data.stats||We.data;return console.log("[Clubs] Extracted stats:",at),{...pt,memberCount:at.totalMembers??pt.memberCount,postCount:at.totalPosts??pt.postCount}}}catch(We){console.error("[Clubs] Stats fetch error for",pt.name,":",We)}return pt}));l(lt),v({currentPage:Se.data?.pagination?.currentPage||ue,totalPages:Se.data?.pagination?.totalPages||0,totalCount:Se.data?.pagination?.totalCount||0,limit:Se.data?.pagination?.limit||p.limit})}else M(Se.message||"Failed to load clubs");T(!1)},je=async(ue=1)=>{if(!ce)return;X(!0),ge(null);const He={page:ue,limit:pe.limit},Se=await To.getClubMembers(ce._id,He);Se.success?(ne(Se.data?.members||[]),be({currentPage:Se.data?.pagination?.currentPage||ue,totalPages:Se.data?.pagination?.totalPages||0,totalCount:Se.data?.pagination?.totalCount||0,limit:Se.data?.pagination?.limit||pe.limit})):ge(Se.message||"Failed to load members"),X(!1)};w.useEffect(()=>{de(1)},[]),w.useEffect(()=>{s==="members"&&ce&&je(1)},[s,ce]);const oe=()=>f(KO),fe=async ue=>{if(ue.preventDefault(),!t)return;k(!0),M(null);const He={name:u.name.trim(),description:u.description.trim(),thumbnail:u.thumbnail.trim()||void 0,requiresApproval:u.requiresApproval,postPermissions:u.postPermissions},Se=await To.createClub(He);Se.success?(oe(),de(1)):M(Se.message||"Failed to create club"),k(!1)},qe=ue=>{P(ue),f({name:ue.name||"",description:ue.description||"",thumbnail:ue.thumbnail||"",requiresApproval:ue.requiresApproval||!1,postPermissions:ue.postPermissions||["MEMBERS"]}),B(!0)},Ne=async ue=>{if(ue.preventDefault(),!L)return;k(!0),M(null);const He={name:u.name.trim(),description:u.description.trim(),thumbnail:u.thumbnail.trim()||void 0,requiresApproval:u.requiresApproval,postPermissions:u.postPermissions},Se=await To.updateClub(L._id,He);Se.success?(B(!1),P(null),oe(),de(p.currentPage)):M(Se.message||"Failed to update club"),k(!1)},Xe=async()=>{F&&(ee(!0),await To.deleteClub(F),ee(!1),R(null),de(p.currentPage))},st=async ue=>{ee(!0);const He=await To.getClubStats(ue._id);He.success&&(U(He.data?.stats||null),$(!0)),ee(!1)},Le=ue=>{se(ue),n("members")},we=()=>{se(null),n("clubs"),ne([])},Ue=ue=>ue?new Date(ue).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsx("div",{children:ce?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:we,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(kU,{className:"h-5 w-5 text-gray-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:ce.name}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[ce.memberCount||0," members - ",ce.postCount||0," posts"]})]})]}):r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Clubs & Connect"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage clubs and members."})]})}),r.jsxs("button",{onClick:()=>{s==="clubs"?de(p.currentPage):s==="members"&&je(pe.currentPage)},className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[r.jsx(qs,{className:"h-4 w-4"}),"Refresh"]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-2 shadow-sm flex gap-2",children:[r.jsx("button",{onClick:()=>{ce?we():n("clubs")},className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold ${s==="clubs"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`,children:"Clubs"}),r.jsx("button",{onClick:()=>n("members"),disabled:!ce,className:`flex-1 px-4 py-3 rounded-lg text-sm font-semibold ${s==="members"?"bg-gray-900 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"} ${ce?"":"opacity-50 cursor-not-allowed"}`,children:"Members"})]}),s==="clubs"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Create new club"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Add a new community for users to join."})]}),O&&r.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(wr,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:O})]})]}),r.jsxs("form",{onSubmit:fe,className:"mt-5 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("input",{type:"text",value:u.name,onChange:ue=>f({...u,name:ue.target.value}),required:!0,placeholder:"Club name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),r.jsx("textarea",{value:u.description,onChange:ue=>f({...u,description:ue.target.value}),rows:2,placeholder:"Description",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),r.jsx(ha,{label:"Club Thumbnail",value:u.thumbnail,onUpload:ue=>f({...u,thumbnail:ue}),folder:"clubs",type:"image",placeholder:"Drop club thumbnail here or click to upload",disabled:E}),r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-900",children:"Requires Approval"}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Users must be approved by admin before joining this club"})]}),r.jsx("button",{type:"button",onClick:()=>f({...u,requiresApproval:!u.requiresApproval}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${u.requiresApproval?"bg-gray-900":"bg-gray-300"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${u.requiresApproval?"translate-x-6":"translate-x-1"}`})})]}),r.jsx(WO,{value:u.postPermissions,onChange:ue=>f({...u,postPermissions:ue}),disabled:E}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{type:"submit",disabled:E,className:"inline-flex items-center gap-2 px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[E?r.jsx(it,{className:"h-4 w-4 animate-spin"}):r.jsx(kr,{className:"h-4 w-4"}),"Create club"]})})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"p-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",value:m.search,onChange:ue=>x({...m,search:ue.target.value}),onKeyDown:ue=>ue.key==="Enter"&&de(1),onBlur:()=>de(1),placeholder:"Search clubs",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]}),r.jsx("button",{onClick:()=>{x({search:""}),de(1)},className:"px-3 py-2 text-sm text-gray-600 bg-gray-100 border border-gray-200 rounded-lg hover:bg-gray-200",children:"Reset"})]}),C?r.jsxs("div",{className:"p-6 flex items-center justify-center gap-2 text-gray-600",children:[r.jsx(it,{className:"h-5 w-5 animate-spin"}),"Loading clubs..."]}):a.length===0?r.jsx("div",{className:"p-6 text-center text-gray-500",children:"No clubs found."}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 p-4",children:a.map(ue=>r.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden hover:shadow-md transition",children:[r.jsxs("div",{className:"h-32 bg-gradient-to-br from-gray-100 to-gray-200 relative",children:[ue.thumbnail?r.jsx("img",{src:ue.thumbnail,alt:ue.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(Yn,{className:"h-12 w-12 text-gray-400"})}),ue.isDeleted&&r.jsx("span",{className:"absolute top-2 right-2 px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-700",children:"Deleted"}),!ue.isDeleted&&r.jsx("span",{className:`absolute top-2 right-2 px-2 py-0.5 text-xs font-semibold rounded-full ${ue.requiresApproval?"bg-orange-100 text-orange-700 border border-orange-300":"bg-green-100 text-green-700 border border-green-300"}`,children:ue.requiresApproval?"Approval Required":"Open to All"})]}),r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:ue.name}),r.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:ue.description||"No description"})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Yn,{className:"h-4 w-4"}),ue.memberCount||0," members"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(dk,{className:"h-4 w-4"}),ue.postCount||0," posts"]})]}),r.jsx(qR,{permissions:ue.postPermissions||["MEMBERS"]}),r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100",children:[r.jsxs("button",{onClick:()=>Le(ue),className:"flex-1 px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 flex items-center justify-center gap-1",children:[r.jsx(Yn,{className:"h-4 w-4"}),"View Members"]}),r.jsx("button",{onClick:()=>st(ue),className:"px-3 py-2 text-sm text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100",children:r.jsx(Fa,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>qe(ue),className:"flex-1 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg hover:bg-gray-800 flex items-center justify-center gap-1",children:[r.jsx(y3,{className:"h-4 w-4"}),"Edit"]}),r.jsx("button",{onClick:()=>R(ue._id),className:"px-3 py-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100",children:r.jsx(hr,{className:"h-4 w-4"})})]})]})]},ue._id))}),p.totalPages>1&&r.jsx(Dr,{currentPage:p.currentPage,totalPages:p.totalPages,totalItems:p.totalCount,itemsPerPage:p.limit,onPageChange:ue=>de(ue),itemLabel:"clubs"})]})]}),s==="members"&&ce&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Club Members"}),r.jsxs("p",{className:"text-sm text-gray-500",children:[pe.totalCount," members in this club"]})]}),te?r.jsxs("div",{className:"p-6 flex items-center justify-center gap-2 text-gray-600",children:[r.jsx(it,{className:"h-5 w-5 animate-spin"}),"Loading members..."]}):re?r.jsx("div",{className:"p-6 text-center text-red-500",children:re}):J.length===0?r.jsx("div",{className:"p-6 text-center text-gray-500",children:"No members in this club."}):r.jsx("div",{className:"divide-y divide-gray-200",children:J.map(ue=>r.jsxs("div",{className:"p-4 flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-800 to-gray-600 flex items-center justify-center text-white font-bold text-sm",children:ue.name?.charAt(0)?.toUpperCase()||"U"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:ue.name||"Unknown"}),r.jsx("p",{className:"text-xs text-gray-500",children:ue.email||ue.phone||"-"})]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[r.jsxs("span",{children:[ue.followerCount||0," followers"]}),r.jsxs("span",{className:"text-xs text-gray-400",children:["Joined ",Ue(ue.joinedAt)]})]})]},ue.id))}),pe.totalPages>1&&r.jsx(Dr,{currentPage:pe.currentPage,totalPages:pe.totalPages,totalItems:pe.totalCount,itemsPerPage:pe.limit,onPageChange:ue=>je(ue),itemLabel:"members"})]}),r.jsx(Lt,{isOpen:H,onClose:()=>{B(!1),P(null),oe()},title:"Edit club",size:"lg",children:r.jsxs("form",{onSubmit:Ne,className:"space-y-4",children:[r.jsx("input",{type:"text",value:u.name,onChange:ue=>f({...u,name:ue.target.value}),required:!0,placeholder:"Club name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),r.jsx("textarea",{value:u.description,onChange:ue=>f({...u,description:ue.target.value}),rows:3,placeholder:"Description",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),r.jsx(ha,{label:"Club Thumbnail",value:u.thumbnail,onUpload:ue=>f({...u,thumbnail:ue}),folder:"clubs",type:"image",placeholder:"Drop club thumbnail here or click to upload",disabled:E}),r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-900",children:"Requires Approval"}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Users must be approved by admin before joining this club"})]}),r.jsx("button",{type:"button",onClick:()=>f({...u,requiresApproval:!u.requiresApproval}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${u.requiresApproval?"bg-gray-900":"bg-gray-300"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${u.requiresApproval?"translate-x-6":"translate-x-1"}`})})]}),r.jsx(WO,{value:u.postPermissions,onChange:ue=>f({...u,postPermissions:ue}),disabled:E}),r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{type:"button",onClick:()=>{B(!1),P(null),oe()},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:E,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[E?r.jsx(it,{className:"h-4 w-4 animate-spin"}):r.jsx(y3,{className:"h-4 w-4"}),"Save changes"]})]})]})}),r.jsx(Lt,{isOpen:Y,onClose:()=>{$(!1),U(null)},title:"Club Statistics",size:"lg",children:z&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:z.clubName}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-700",children:z.totalMembers||0}),r.jsx("p",{className:"text-sm text-blue-600",children:"Total Members"})]}),r.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-green-700",children:z.totalPosts||0}),r.jsx("p",{className:"text-sm text-green-600",children:"Total Posts"})]}),r.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg col-span-2",children:[r.jsx("p",{className:"text-2xl font-bold text-purple-700",children:z.recentPosts||0}),r.jsx("p",{className:"text-sm text-purple-600",children:"Recent Posts"})]})]}),z.topPosters?.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Top Posters"}),r.jsx("div",{className:"space-y-2",children:z.topPosters.map((ue,He)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-6 h-6 rounded-full bg-gray-800 text-white text-xs flex items-center justify-center font-bold",children:He+1}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:ue.name})]}),r.jsxs("span",{className:"text-sm text-gray-600",children:[ue.postCount," posts"]})]},ue.userId))})]})]})}),r.jsx(en,{isOpen:!!F,onClose:()=>R(null),onConfirm:Xe,title:"Delete club",message:"This will delete the club and all associated data (members, posts). This action cannot be undone.",confirmText:"Delete club",variant:"danger",isLoading:G})]})}const xg={GET_ALL:"/web/clubs/join-requests/all",APPROVE:e=>`/web/clubs/join-requests/${e}/approve`,REJECT:e=>`/web/clubs/join-requests/${e}/reject`,UPDATE_APPROVAL_SETTING:e=>`/web/clubs/${e}/approval-setting`},i2={getAllJoinRequests:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.status&&t.append("status",e.status),e.clubId&&t.append("clubId",e.clubId),e.search&&t.append("search",e.search);const s=`${xg.GET_ALL}?${t.toString()}`;return console.log("[ClubJoinRequestsService] Fetching join requests:",s),Te(Ee.get(s))},approveJoinRequest:async(e,t={})=>(console.log("[ClubJoinRequestsService] Approving join request:",e),Te(Ee.post(xg.APPROVE(e),t))),rejectJoinRequest:async(e,t)=>(console.log("[ClubJoinRequestsService] Rejecting join request:",e),Te(Ee.post(xg.REJECT(e),t))),updateApprovalSetting:async(e,t)=>(console.log("[ClubJoinRequestsService] Updating club approval setting:",e,t),Te(Ee.put(xg.UPDATE_APPROVAL_SETTING(e),t)))},Ufe={PENDING:"bg-yellow-100 text-yellow-800 border-yellow-300",APPROVED:"bg-green-100 text-green-800 border-green-300",REJECTED:"bg-red-100 text-red-800 border-red-300"},zfe={PENDING:jr,APPROVED:ls,REJECTED:wr};function Vfe(){const[e,t]=w.useState([]),[s,n]=w.useState(!1),[a,l]=w.useState(null),[u,f]=w.useState(null),[m,x]=w.useState(""),[p,v]=w.useState(""),[C,T]=w.useState(""),[E,k]=w.useState(1),[O,M]=w.useState(null),L=20,[P,H]=w.useState(null),[B,F]=w.useState(null),[R,z]=w.useState(""),[U,Y]=w.useState(""),[$,G]=w.useState(!1);w.useEffect(()=>{ee()},[E,m,p,C]);const ee=async()=>{n(!0),l(null);const X=await i2.getAllJoinRequests({page:E,limit:L,status:m,clubId:p,search:C});X.success?(t(X.data?.requests||[]),M(X.data?.pagination)):l(X.message||"Failed to fetch join requests"),n(!1)},ce=X=>{H(X),z("")},se=X=>{F(X),Y(""),z("")},J=async()=>{if(!P)return;G(!0),l(null);const X=await i2.approveJoinRequest(P.id,{adminNotes:R.trim()||void 0});X.success?(f("Join request approved successfully"),H(null),z(""),ee()):l(X.message||"Failed to approve join request"),G(!1)},ne=async()=>{if(!B||!U.trim())return;G(!0),l(null);const X=await i2.rejectJoinRequest(B.id,{rejectionReason:U.trim(),adminNotes:R.trim()||void 0});X.success?(f("Join request rejected successfully"),F(null),Y(""),z(""),ee()):l(X.message||"Failed to reject join request"),G(!1)},pe=()=>{ee()},be=X=>{k(X),window.scrollTo({top:0,behavior:"smooth"})},te=()=>{x(""),v(""),T(""),k(1)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Club Join Requests"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage user requests to join approval-required clubs"})]}),r.jsxs("button",{onClick:pe,disabled:s,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-60",children:[r.jsx(qs,{className:`h-4 w-4 ${s?"animate-spin":""}`}),"Refresh"]})]}),a&&r.jsxs("div",{className:"px-4 py-3 rounded-lg border border-red-200 bg-red-50 text-red-700 text-sm flex items-start gap-2",children:[r.jsx(wr,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:a})]}),u&&r.jsxs("div",{className:"px-4 py-3 rounded-lg border border-emerald-200 bg-emerald-50 text-emerald-700 text-sm flex items-start gap-2",children:[r.jsx(ls,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:u})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Va,{className:"h-5 w-5 text-gray-600"}),r.jsx("h2",{className:"font-semibold text-gray-900",children:"Filters"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search by User"}),r.jsxs("div",{className:"relative",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",value:C,onChange:X=>{T(X.target.value),k(1)},placeholder:"Search by name...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{value:m,onChange:X=>{x(X.target.value),k(1)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"PENDING",children:"Pending"}),r.jsx("option",{value:"APPROVED",children:"Approved"}),r.jsx("option",{value:"REJECTED",children:"Rejected"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:te,className:"w-full px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Clear Filters"})})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:s?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(it,{className:"h-8 w-8 animate-spin text-gray-400"})}):e.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(Yn,{className:"h-12 w-12 text-gray-300 mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No join requests found"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:m||p||C?"Try adjusting your filters":"Join requests will appear here when users request to join clubs"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Club"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Note"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(X=>{const re=zfe[X.status];return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:r.jsx(Ls,{className:"h-5 w-5 text-gray-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:X.user?.name||"Unknown"}),r.jsx("div",{className:"text-sm text-gray-500",children:X.user?.phone||X.user?.email})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"font-medium text-gray-900",children:X.club?.name||"Unknown Club"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium border ${Ufe[X.status]}`,children:[r.jsx(re,{className:"h-3.5 w-3.5"}),X.status]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(X.createdAt).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 max-w-xs",children:r.jsx("p",{className:"text-sm text-gray-600 truncate",title:X.userNote,children:X.userNote||"-"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:X.status==="PENDING"?r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsxs("button",{onClick:()=>ce(X),className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium",children:[r.jsx(ls,{className:"h-4 w-4"}),"Approve"]}),r.jsxs("button",{onClick:()=>se(X),className:"inline-flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium",children:[r.jsx(wr,{className:"h-4 w-4"}),"Reject"]})]}):r.jsx("span",{className:"text-sm text-gray-400",children:X.status==="APPROVED"?"Approved":"Rejected"})})]},X.id)})})]})}),O&&O.totalPages>1&&r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(E-1)*L+1," to"," ",Math.min(E*L,O.totalCount)," of ",O.totalCount," ","requests"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>be(E-1),disabled:!O.hasPrevPage,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(tw,{className:"h-4 w-4"})}),r.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",E," of ",O.totalPages]}),r.jsx("button",{onClick:()=>be(E+1),disabled:!O.hasNextPage,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(ep,{className:"h-4 w-4"})})]})]})]})}),P&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center",children:r.jsx(ls,{className:"h-6 w-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Approve Join Request"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Approve user to join the club"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-600",children:"User:"}),r.jsx("p",{className:"font-medium text-gray-900",children:P.user?.name})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Club:"}),r.jsx("p",{className:"font-medium text-gray-900",children:P.club?.name})]}),P.userNote&&r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-600",children:"User Note:"}),r.jsx("p",{className:"text-sm text-gray-800 mt-1",children:P.userNote})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Notes (Optional)"}),r.jsx("textarea",{value:R,onChange:X=>z(X.target.value),placeholder:"Add optional notes...",maxLength:500,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[R.length,"/500 characters"]})]})]}),r.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[r.jsx("button",{onClick:()=>H(null),disabled:$,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:J,disabled:$,className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-60",children:$?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-4 w-4 animate-spin"}),"Approving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ls,{className:"h-4 w-4"}),"Approve"]})})]})]})})}),B&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"h-12 w-12 rounded-full bg-red-100 flex items-center justify-center",children:r.jsx(wr,{className:"h-6 w-6 text-red-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Reject Join Request"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Reject user's request to join"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-600",children:"User:"}),r.jsx("p",{className:"font-medium text-gray-900",children:B.user?.name})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Club:"}),r.jsx("p",{className:"font-medium text-gray-900",children:B.club?.name})]}),B.userNote&&r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-600",children:"User Note:"}),r.jsx("p",{className:"text-sm text-gray-800 mt-1",children:B.userNote})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rejection Reason ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{value:U,onChange:X=>Y(X.target.value),placeholder:"Explain why the request is being rejected...",maxLength:500,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[U.length,"/500 characters"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Notes (Optional)"}),r.jsx("textarea",{value:R,onChange:X=>z(X.target.value),placeholder:"Add optional internal notes...",maxLength:500,rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[R.length,"/500 characters"]})]})]}),r.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[r.jsx("button",{onClick:()=>F(null),disabled:$,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:ne,disabled:$||!U.trim(),className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-60",children:$?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-4 w-4 animate-spin"}),"Rejecting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(wr,{className:"h-4 w-4"}),"Reject"]})})]})]})})})]})}const $fe={CREATE_POST:"/app/connect/posts"},qfe={createPost:async e=>(console.log("[ClubPostsService] Creating post:",e),Te(Ee.post($fe.CREATE_POST,e)))},QO={caption:"",mediaType:"IMAGE",mediaUrls:[],mediaThumbnail:"",clubId:""};function Hfe(){const{hasRole:e}=mn(),t=e(["SUPER_ADMIN","ADMIN"]),[s,n]=w.useState([]),[a,l]=w.useState(QO),[u,f]=w.useState(!1),[m,x]=w.useState(!1),[p,v]=w.useState(null),[C,T]=w.useState(null);w.useEffect(()=>{E()},[]);const E=async()=>{f(!0),v(null);const P=await To.getClubs({page:1,limit:100});P.success?n(P.data?.clubs||[]):v(P.message||"Failed to load clubs"),f(!1)},k=()=>{l(QO),v(null),T(null)},O=async P=>{if(P.preventDefault(),!t)return;if(!a.clubId){v("Please select a club");return}if(a.mediaUrls.length===0){v("Please upload at least one media file");return}x(!0),v(null),T(null);const H=await qfe.createPost({caption:a.caption.trim(),mediaType:a.mediaType,mediaUrls:a.mediaUrls,mediaThumbnail:a.mediaThumbnail||void 0,clubId:a.clubId});H.success?(T("Post created successfully!"),k()):v(H.message||"Failed to create post"),x(!1)},M=()=>s.find(P=>P._id===a.clubId),L=P=>{const H=P.postPermissions||["MEMBERS"];return H.includes("ANYONE")?r.jsx("span",{className:"text-green-600",children:" Open to all"}):H.includes("ADMIN")?r.jsx("span",{className:"text-green-600",children:" You have posting access (Admin)"}):H.includes("MEMBERS")?P.isJoined?r.jsx("span",{className:"text-green-600",children:" Member"}):r.jsx("span",{className:"text-orange-600",children:" Not a member"}):r.jsx("span",{className:"text-gray-600",children:"No posting access"})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Club Post (Admin)"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Create posts in clubs as an administrator"})]}),r.jsxs("button",{onClick:E,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[r.jsx(qs,{className:"h-4 w-4"}),"Refresh Clubs"]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[C&&r.jsx("div",{className:"mb-4 flex items-center gap-2 px-4 py-3 bg-green-50 border border-green-200 text-green-700 rounded-lg",children:r.jsx("span",{className:"text-sm font-medium",children:C})}),p&&r.jsxs("div",{className:"mb-4 flex items-center gap-2 px-4 py-3 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(wr,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:p})]}),r.jsxs("form",{onSubmit:O,className:"space-y-5",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-gray-900",children:["Select Club ",r.jsx("span",{className:"text-red-500",children:"*"})]}),u?r.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[r.jsx(it,{className:"h-4 w-4 animate-spin"}),"Loading clubs..."]}):r.jsxs("select",{required:!0,value:a.clubId,onChange:P=>l({...a,clubId:P.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white",children:[r.jsx("option",{value:"",children:"-- Choose a club --"}),s.map(P=>r.jsxs("option",{value:P._id,children:[P.name," (",P.memberCount||0," members)"]},P._id))]}),a.clubId&&M()&&r.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:M().name}),r.jsx(qR,{permissions:M().postPermissions||["MEMBERS"]})]}),r.jsx("div",{className:"text-xs text-gray-600",children:L(M())})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-900",children:"Caption"}),r.jsx("textarea",{value:a.caption,onChange:P=>l({...a,caption:P.target.value}),rows:4,placeholder:"Write something about this post...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Optional - Add a caption to your post"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-gray-900",children:["Media Type ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>l({...a,mediaType:"IMAGE",mediaUrls:[]}),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${a.mediaType==="IMAGE"?"border-gray-900 bg-gray-50 text-gray-900":"border-gray-300 bg-white text-gray-600 hover:border-gray-400"}`,children:[r.jsx(Mo,{className:"h-5 w-5"}),r.jsx("span",{className:"font-semibold",children:"Image(s)"})]}),r.jsxs("button",{type:"button",onClick:()=>l({...a,mediaType:"VIDEO",mediaUrls:[]}),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${a.mediaType==="VIDEO"?"border-gray-900 bg-gray-50 text-gray-900":"border-gray-300 bg-white text-gray-600 hover:border-gray-400"}`,children:[r.jsx(Mi,{className:"h-5 w-5"}),r.jsx("span",{className:"font-semibold",children:"Video"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-gray-900",children:[a.mediaType==="IMAGE"?"Upload Images":"Upload Video"," ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(ha,{value:a.mediaUrls[0]||"",onUpload:P=>l({...a,mediaUrls:[P]}),folder:a.mediaType==="IMAGE"?"club-posts/images":"club-posts/videos",type:a.mediaType==="IMAGE"?"image":"video",placeholder:`Drop ${a.mediaType==="IMAGE"?"image":"video"} here or click to upload`,disabled:m}),a.mediaType==="IMAGE"&&r.jsx("p",{className:"text-xs text-gray-500",children:'You can upload multiple images by clicking "Add More" after uploading the first one'})]}),a.mediaType==="VIDEO"&&a.mediaUrls.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-900",children:"Video Thumbnail (Optional)"}),r.jsx(ha,{value:a.mediaThumbnail,onUpload:P=>l({...a,mediaThumbnail:P}),folder:"club-posts/thumbnails",type:"image",placeholder:"Drop thumbnail image here or click to upload",disabled:m}),r.jsx("p",{className:"text-xs text-gray-500",children:"Upload a thumbnail image for the video preview"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:k,disabled:m,className:"px-5 py-2.5 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-60",children:"Reset"}),r.jsx("button",{type:"submit",disabled:m||!a.clubId||a.mediaUrls.length===0,className:"inline-flex items-center gap-2 px-6 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60 disabled:cursor-not-allowed",children:m?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-4 w-4 animate-spin"}),"Creating Post..."]}):r.jsxs(r.Fragment,{children:[r.jsx(kr,{className:"h-4 w-4"}),"Create Post"]})})]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:" About Posting Permissions"}),r.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Admins:"})," You can always post in clubs with admin permission"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Members:"})," You need to be a member of the club to post"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Anyone:"})," Any authenticated user can post (no membership required)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Multiple permissions:"})," Clubs can allow both admins and members to post"]})]})]})]})}const JO={APP_VERSION:"/web/settings/app-version"},eD={getAppVersion:async()=>(console.log("[SettingsService] Fetching app version settings"),Te(Ee.get(JO.APP_VERSION))),updateAppVersion:async e=>(console.log("[SettingsService] Updating app version settings"),Te(Ee.put(JO.APP_VERSION,e)))},tD={currentVersion:"",minimumVersion:"",forceUpdate:!1,updateUrl:""};function Gfe(){const[e,t]=w.useState(tD),[s,n]=w.useState(tD),[a,l]=w.useState(!1),[u,f]=w.useState(!1),[m,x]=w.useState(null),[p,v]=w.useState(null),C=w.useMemo(()=>e.currentVersion!==s.currentVersion||e.minimumVersion!==s.minimumVersion||e.forceUpdate!==s.forceUpdate||e.updateUrl!==s.updateUrl,[e,s]),T=async()=>{l(!0),x(null),v(null);const O=await eD.getAppVersion();if(O.success){const M=O.data?.appVersion||{},L={currentVersion:M.currentVersion||"",minimumVersion:M.minimumVersion||"",forceUpdate:M.forceUpdate||!1,updateUrl:M.updateUrl||""};t(L),n(L)}else x(O.message||"Failed to fetch app version settings");l(!1)};w.useEffect(()=>{T()},[]);const E=async O=>{O.preventDefault(),f(!0),x(null),v(null);const M={currentVersion:e.currentVersion.trim(),minimumVersion:e.minimumVersion.trim(),forceUpdate:!!e.forceUpdate,updateUrl:e.updateUrl.trim()},L=await eD.updateAppVersion(M);if(L.success){const P={currentVersion:M.currentVersion,minimumVersion:M.minimumVersion,forceUpdate:M.forceUpdate,updateUrl:M.updateUrl};n(P),t(P),v("App version settings updated successfully")}else x(L.message||"Failed to update app version settings");f(!1)},k=()=>{t(s),v(null),x(null)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Control app versioning and force updates for mobile clients."})]}),r.jsxs("button",{onClick:T,disabled:a,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-60",children:[r.jsx(qs,{className:`h-4 w-4 ${a?"animate-spin":""}`}),"Refresh"]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-800",children:r.jsx(lV,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"App Version Control"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Configure latest and minimum supported app versions. Users below minimum will be forced to update."})]})]}),m&&r.jsx("div",{className:"mb-4 px-4 py-3 rounded-lg border border-red-200 bg-red-50 text-red-700 text-sm",children:m}),p&&r.jsx("div",{className:"mb-4 px-4 py-3 rounded-lg border border-emerald-200 bg-emerald-50 text-emerald-700 text-sm",children:p}),r.jsxs("form",{onSubmit:E,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Current Version"}),r.jsx("input",{type:"text",value:e.currentVersion,onChange:O=>t({...e,currentVersion:O.target.value}),placeholder:"e.g. 2.5.0",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Latest version available on the store."})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Minimum Version"}),r.jsx("input",{type:"text",value:e.minimumVersion,onChange:O=>t({...e,minimumVersion:O.target.value}),placeholder:"e.g. 2.3.0",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Users below this version will see a force update prompt."})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[r.jsx(cw,{className:"h-4 w-4 text-gray-600"}),"Force Update"]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[r.jsx("input",{type:"checkbox",checked:e.forceUpdate,onChange:O=>t({...e,forceUpdate:O.target.checked}),className:"h-4 w-4 text-gray-800 border-gray-300 rounded"}),"Require update for users below minimum version"]})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[r.jsx(Ed,{className:"h-4 w-4 text-gray-600"}),"Update URL"]}),r.jsx("input",{type:"url",value:e.updateUrl,onChange:O=>t({...e,updateUrl:O.target.value}),placeholder:"https://play.google.com/store/apps/details?id=...",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Link to the app page on the store."})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 pt-2",children:[r.jsx("button",{type:"button",onClick:k,disabled:!C||u,className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50",children:"Reset"}),r.jsxs("button",{type:"submit",disabled:u||a||!C,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-60",children:[u?r.jsx(it,{className:"h-4 w-4 animate-spin"}):r.jsx(mk,{className:"h-4 w-4"}),"Save Changes"]})]})]})]})]})}const pg={GET_ALL:"/web/feature-access",UPDATE:"/web/feature-access",UPDATE_BY_ID:e=>`/web/feature-access/${e}`,CHECK_ACCESS:"/web/feature-access/check"},rD={getAllFeatureAccess:async()=>(console.log("[FeatureAccessService] Fetching all feature access settings"),Te(Ee.get(pg.GET_ALL))),updateFeatureAccess:async e=>(console.log("[FeatureAccessService] Updating feature access settings:",e),Te(Ee.put(pg.UPDATE,e))),updateFeatureAccessById:async(e,t)=>(console.log(`[FeatureAccessService] Updating feature by ID ${e}:`,t),Te(Ee.patch(pg.UPDATE_BY_ID(e),t))),checkFeatureAccess:async(e,t)=>(console.log(`[FeatureAccessService] Checking access for feature: ${e}, phone: ${t}`),Te(Ee.post(pg.CHECK_ACCESS,{featureKey:e,phone:t})))},sD=[{key:"SOS",name:"SOS (Sort Our Selves)",description:"Mental health programs and counseling sessions",icon:""},{key:"CONNECT",name:"Connect",description:"Social networking, clubs, and community",icon:""},{key:"CHALLENGE",name:"Challenges",description:"Daily challenges and habit tracking",icon:""}];function Yfe(){const[e,t]=w.useState([]),[s,n]=w.useState(!1),[a,l]=w.useState(new Set),[u,f]=w.useState(new Set),m=async()=>{n(!0);const E=await rD.getAllFeatureAccess();if(E.success){const k=Array.isArray(E.data)?E.data:E.data?.features||[],O=new Map(k.map(L=>[L.featureKey,L])),M=sD.map(L=>{const P=O.get(L.key);return{...L,requiresMembership:P?.requiresMembership??!1,isActive:P?.isActive??!0,_id:P?._id,updatedAt:P?.updatedAt,updatedBy:P?.updatedBy,originalRequiresMembership:P?.requiresMembership??!1,originalIsActive:P?.isActive??!0}});t(M),f(new Set),dt.success("Feature settings loaded successfully")}else dt.error(E.message||"Failed to fetch feature access settings"),t(sD.map(k=>({...k,requiresMembership:!1,isActive:!0,originalRequiresMembership:!1,originalIsActive:!0})));n(!1)};w.useEffect(()=>{m()},[]);const x=E=>{t(k=>k.map(O=>O.key===E?{...O,requiresMembership:!O.requiresMembership}:O)),f(k=>new Set(k).add(E))},p=E=>{t(k=>k.map(O=>O.key===E?{...O,isActive:!O.isActive}:O)),f(k=>new Set(k).add(E))},v=async E=>{l(O=>new Set(O).add(E.key));const k=await rD.updateFeatureAccess({featureKey:E.key,requiresMembership:E.requiresMembership,isActive:E.isActive});k.success?(dt.success(`${E.name} settings updated successfully`),t(O=>O.map(M=>M.key===E.key?{...M,updatedAt:k.data?.updatedAt||new Date().toISOString(),updatedBy:k.data?.updatedBy,originalRequiresMembership:M.requiresMembership,originalIsActive:M.isActive}:M)),f(O=>{const M=new Set(O);return M.delete(E.key),M})):dt.error(k.message||`Failed to update ${E.name}`),l(O=>{const M=new Set(O);return M.delete(E.key),M})},C=E=>{t(k=>k.map(O=>O.key===E?{...O,requiresMembership:O.originalRequiresMembership,isActive:O.originalIsActive}:O)),f(k=>{const O=new Set(k);return O.delete(E),O})},T=E=>E?new Date(E).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Feature Access Control"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage which features are available and set membership requirements"})]}),r.jsxs("button",{onClick:m,disabled:s,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-60",children:[r.jsx(qs,{className:`h-4 w-4 ${s?"animate-spin":""}`}),"Refresh"]})]}),s?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(it,{className:"h-8 w-8 animate-spin text-gray-400"})}):r.jsx("div",{className:"space-y-4",children:e.map(E=>{const k=u.has(E.key),O=a.has(E.key);return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"text-3xl",children:E.icon}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:E.name}),!E.isActive&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 text-xs font-semibold bg-red-100 text-red-700 rounded-full",children:[r.jsx(wr,{className:"h-3 w-3"}),"Disabled"]}),E.isActive&&E.requiresMembership&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 text-xs font-semibold bg-amber-100 text-amber-700 rounded-full",children:[r.jsx(uk,{className:"h-3 w-3"}),"Members Only"]}),E.isActive&&!E.requiresMembership&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 text-xs font-semibold bg-emerald-100 text-emerald-700 rounded-full",children:[r.jsx(Lz,{className:"h-3 w-3"}),"Open to All"]}),k&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 text-xs font-semibold bg-blue-100 text-blue-700 rounded-full",children:[r.jsx(Mt,{className:"h-3 w-3"}),"Unsaved Changes"]})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:E.description})]})]}),!E.isActive&&r.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 border border-red-200",children:r.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[r.jsx(Mt,{className:"h-4 w-4 flex-shrink-0"}),r.jsx("p",{className:"text-sm font-medium",children:"FEATURE DISABLED - Users cannot access this feature"})]})}),r.jsx("div",{className:"mb-4 p-4 rounded-lg bg-gray-50 border border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("div",{children:r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:E.isActive,onChange:()=>p(E.key),disabled:O,className:"h-5 w-5 text-gray-800 border-gray-300 rounded cursor-pointer"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:"Feature Status"}),r.jsx("div",{className:"text-xs text-gray-500",children:E.isActive?"Active (enabled)":"Inactive (disabled)"})]})]})}),r.jsx("div",{children:r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:E.requiresMembership,onChange:()=>x(E.key),disabled:O||!E.isActive,className:"h-5 w-5 text-gray-800 border-gray-300 rounded cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:"Requires Active Membership"}),r.jsx("div",{className:"text-xs text-gray-500",children:E.requiresMembership?"Only paid members can access":"Available to all users"})]})]})})]})}),r.jsxs("div",{className:"mb-4 flex items-center gap-4 text-xs text-gray-500",children:[r.jsxs("span",{children:[r.jsx("strong",{children:"Last Updated:"})," ",T(E.updatedAt)]}),E.updatedBy&&r.jsxs("span",{children:[r.jsx("strong",{children:"Updated By:"})," ",E.updatedBy.name||E.updatedBy.email||"Admin"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[k&&r.jsx("button",{onClick:()=>C(E.key),disabled:O,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Reset"}),r.jsx("button",{onClick:()=>v(E),disabled:O||!k,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white text-sm font-medium rounded-lg hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:O?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(mk,{className:"h-4 w-4"}),"Save Changes"]})})]})]},E.key)})}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-blue-900 text-sm mb-2",children:"Access Control Rules:"}),r.jsxs("ul",{className:"text-sm text-blue-800 space-y-1.5",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"font-bold mt-0.5",children:"1."}),r.jsxs("span",{children:[r.jsx("strong",{children:"Feature Inactive:"})," When disabled, the feature is completely blocked for ALL users regardless of membership"]})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"font-bold mt-0.5",children:"2."}),r.jsxs("span",{children:[r.jsx("strong",{children:"Feature Active + Membership Required:"})," Only users with active paid membership can access"]})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"font-bold mt-0.5",children:"3."}),r.jsxs("span",{children:[r.jsx("strong",{children:"Feature Active + No Membership Required:"})," Feature is open to all users (free access)"]})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"font-bold mt-0.5",children:"4."}),r.jsxs("span",{children:[r.jsx("strong",{children:"User Experience:"})," Users without required membership will see a membership upgrade prompt when attempting to access"]})]})]})]})]})}const Uu={BASE:"/web/services"},Xfe=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&t.append(s,n)}),t.toString()},Tc={getAll:async(e={})=>{const t=Xfe(e),s=t?`${Uu.BASE}?${t}`:Uu.BASE;console.log("[ServiceService] Fetching services with params:",e);const n=await Te(Ee.get(s));return n.success?console.log("[ServiceService] Fetched services:",n.data.services?.length):console.error("[ServiceService] Failed to fetch services:",n.message),n},getById:async e=>{console.log("[ServiceService] Fetching service:",e);const t=await Te(Ee.get(`${Uu.BASE}/${e}`));return t.success?console.log("[ServiceService] Fetched service:",t.data.service?.name):console.error("[ServiceService] Failed to fetch service:",t.message),t},create:async e=>{console.log("[ServiceService] Creating service:",e.name);const t=await Te(Ee.post(Uu.BASE,e));return t.success?console.log("[ServiceService] Created service:",t.data.service?._id):console.error("[ServiceService] Failed to create service:",t.message),t},update:async(e,t)=>{console.log("[ServiceService] Updating service:",e);const s=await Te(Ee.put(`${Uu.BASE}/${e}`,t));return s.success?console.log("[ServiceService] Updated service:",s.data.service?.name):console.error("[ServiceService] Failed to update service:",s.message),s},delete:async e=>{console.log("[ServiceService] Deleting service:",e);const t=await Te(Ee.delete(`${Uu.BASE}/${e}`));return t.success?console.log("[ServiceService] Deleted service successfully"):console.error("[ServiceService] Failed to delete service:",t.message),t}},HR=["CONSULTATION","COACHING","THERAPY","WELLNESS","FITNESS","EDUCATION","OTHER"],Wfe=[{value:"displayOrder",label:"Display Order"},{value:"createdAt",label:"Created Date"},{value:"name",label:"Name"},{value:"price",label:"Price"}],nD={search:"",category:"",isActive:"",isFeatured:"",requiresApproval:"",sortBy:"displayOrder",sortOrder:"asc"};function Kfe(e={}){const[t,s]=w.useState([]),[n,a]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[l,u]=w.useState({...nD,...e}),[f,m]=w.useState(!1),[x,p]=w.useState(null),v=w.useRef(null),C=w.useCallback(async(R=n.currentPage)=>{m(!0),p(null);try{const z={page:R,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.category&&{category:l.category},...l.isActive!==""&&{isActive:l.isActive},...l.isFeatured!==""&&{isFeatured:l.isFeatured},...l.requiresApproval!==""&&{requiresApproval:l.requiresApproval}},U=await Tc.getAll(z);U.success?(s(U.data.services||[]),a(U.data.pagination||n)):(p(U.message),s([]))}catch{p("Failed to fetch services"),s([])}finally{m(!1)}},[l,n.limit,n.currentPage]),T=w.useCallback(async R=>{try{const z=await Tc.getById(R);return z.success?{success:!0,data:z.data.service}:{success:!1,error:z.message}}catch{return{success:!1,error:"Failed to fetch service details"}}},[]),E=w.useCallback(async R=>{m(!0),p(null);try{const z=await Tc.create(R);return z.success?(await C(1),{success:!0,data:z.data}):{success:!1,error:z.message,validationErrors:Array.isArray(z.error)?z.error:z.data?.errors}}catch{return{success:!1,error:"Failed to create service"}}finally{m(!1)}},[C]),k=w.useCallback(async(R,z)=>{m(!0),p(null);try{const U=await Tc.update(R,z);return U.success?(s(Y=>Y.map($=>$._id===R?{...$,...U.data.service}:$)),{success:!0,data:U.data}):{success:!1,error:U.message,validationErrors:Array.isArray(U.error)?U.error:U.data?.errors}}catch{return{success:!1,error:"Failed to update service"}}finally{m(!1)}},[]),O=w.useCallback(async R=>{m(!0),p(null);try{const z=await Tc.delete(R);return z.success?(s(U=>U.map(Y=>Y._id===R?{...Y,isActive:!1}:Y)),{success:!0}):{success:!1,error:z.message}}catch{return{success:!1,error:"Failed to delete service"}}finally{m(!1)}},[]),M=w.useCallback(R=>{u(z=>({...z,...R}))},[]),L=w.useCallback(R=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{u(z=>({...z,search:R}))},300)},[]),P=w.useCallback(()=>{u({...nD,...e})},[e]),H=w.useCallback(R=>{C(R)},[C]),B=w.useCallback(R=>{a(z=>({...z,limit:R}))},[]),F=w.useCallback(()=>{p(null)},[]);return w.useEffect(()=>{C(1)},[l]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{services:t,pagination:n,filters:l,isLoading:f,error:x,fetchServices:C,getServiceById:T,createService:E,updateService:k,deleteService:O,updateFilters:M,updateSearch:L,resetFilters:P,changePage:H,changeLimit:B,clearError:F}}function Zfe({filters:e,onFilterChange:t,onSearchChange:s,onReset:n,disabled:a=!1}){const[l,u]=w.useState(e.search||""),f=v=>{const C=v.target.value;u(C),s(C)},m=(v,C)=>{t({[v]:C})},x=()=>{u(""),n()},p=e.category||e.isActive!==""||e.isFeatured!==""||e.requiresApproval!=="";return r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search services...",value:l,onChange:f,disabled:a,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),l&&r.jsx("button",{onClick:()=>{u(""),s("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(Kr,{className:"h-4 w-4"})})]}),r.jsxs("select",{value:e.category,onChange:v=>m("category",v.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"All Categories"}),HR.map(v=>r.jsx("option",{value:v,children:v.charAt(0)+v.slice(1).toLowerCase()},v))]}),r.jsxs("select",{value:e.isActive,onChange:v=>m("isActive",v.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"true",children:"Active Only"}),r.jsx("option",{value:"false",children:"Inactive"})]}),r.jsxs("select",{value:e.isFeatured,onChange:v=>m("isFeatured",v.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"All Services"}),r.jsx("option",{value:"true",children:"Featured Only"}),r.jsx("option",{value:"false",children:"Not Featured"})]}),r.jsxs("select",{value:e.requiresApproval,onChange:v=>m("requiresApproval",v.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"All Purchase Types"}),r.jsx("option",{value:"true",children:"Approval Required"}),r.jsx("option",{value:"false",children:"Direct Purchase"})]}),r.jsx("select",{value:e.sortBy,onChange:v=>m("sortBy",v.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:Wfe.map(v=>r.jsxs("option",{value:v.value,children:["Sort: ",v.label]},v.value))}),r.jsxs("select",{value:e.sortOrder,onChange:v=>m("sortOrder",v.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"asc",children:"Ascending"}),r.jsx("option",{value:"desc",children:"Descending"})]}),(p||l)&&r.jsxs("button",{onClick:x,disabled:a,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[r.jsx(Ro,{className:"h-4 w-4"}),"Reset"]})]})})}function aD(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function Qfe(e){const t={CONSULTATION:"bg-blue-100 text-blue-700",COACHING:"bg-purple-100 text-purple-700",THERAPY:"bg-green-100 text-green-700",WELLNESS:"bg-teal-100 text-teal-700",FITNESS:"bg-orange-100 text-orange-700",EDUCATION:"bg-indigo-100 text-indigo-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function Jfe({services:e,isLoading:t,canEdit:s,canDelete:n,onView:a,onEdit:l,onDelete:u}){return t?r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(it,{className:"h-8 w-8 animate-spin text-gray-800"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading services..."})]})}):e.length===0?r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx("p",{className:"text-lg font-medium",children:"No services found"}),r.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your filters or create a new service."})]})}):r.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Service"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Category"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Price"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Duration"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Purchase Type"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Subscriptions"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(f=>r.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 ${f.isActive?"":"bg-gray-50/50"}`,children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative w-16 h-12 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:[f.isFeatured&&r.jsx("div",{className:"absolute top-0 left-0 z-10",children:r.jsx("div",{className:"bg-amber-500 text-white text-[8px] font-semibold px-1.5 py-0.5 rounded-br-md shadow-sm",children:r.jsx($u,{className:"h-2 w-2 inline"})})}),f.imageUrl?r.jsx("img",{src:f.imageUrl,alt:f.name,className:"w-full h-full object-cover",onError:m=>{m.target.style.display="none"}}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:"No image"})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate max-w-[200px]",children:f.name}),f.isFeatured&&r.jsx("span",{className:"hidden sm:inline-flex px-1.5 py-0.5 rounded text-[10px] font-medium bg-amber-100 text-amber-700",children:"Featured"})]}),f.shortDescription&&r.jsx("p",{className:"text-sm text-gray-500 truncate max-w-[250px]",children:f.shortDescription})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Qfe(f.category)}`,children:f.category})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"font-medium text-gray-900",children:aD(f.price)}),f.compareAtPrice&&f.compareAtPrice>f.price&&r.jsx("p",{className:"text-gray-400 line-through text-xs",children:aD(f.compareAtPrice)})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:"text-sm text-gray-600",children:[f.durationInDays," days"]})}),r.jsx("td",{className:"px-6 py-4",children:f.requiresApproval?r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-700",children:" Approval Required"}):r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:" Direct Purchase"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"text-sm",children:[r.jsxs("p",{className:"text-gray-900",children:[f.activeSubscriptionCount||0," active"]}),r.jsxs("p",{className:"text-gray-500 text-xs",children:[f.totalSubscriptionCount||0," total"]})]})}),r.jsx("td",{className:"px-6 py-4",children:f.isActive?r.jsx("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Active"}):r.jsx("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Inactive"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx("button",{onClick:()=>a(f),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:r.jsx(Lr,{className:"h-4 w-4"})}),s&&r.jsx("button",{onClick:()=>l(f),className:"p-2 text-gray-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Service",children:r.jsx(Js,{className:"h-4 w-4"})}),n&&r.jsx("button",{onClick:()=>u(f),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Service",children:r.jsx(hr,{className:"h-4 w-4"})})]})})]},f._id))})]})})})}function iD(e=null){return e?{name:e.name||"",description:e.description||"",shortDescription:e.shortDescription||"",price:e.price||"",compareAtPrice:e.compareAtPrice||"",durationInDays:e.durationInDays||30,category:e.category||"OTHER",imageUrl:e.imageUrl||"",perks:e.perks||[],maxSubscriptions:e.maxSubscriptions||"",displayOrder:e.displayOrder||0,isFeatured:e.isFeatured||!1,isActive:e.isActive!==void 0?e.isActive:!0,requiresApproval:e.requiresApproval!==void 0?e.requiresApproval:!0,metadata:e.metadata||{}}:{name:"",description:"",shortDescription:"",price:"",compareAtPrice:"",durationInDays:30,category:"OTHER",imageUrl:"",perks:[],maxSubscriptions:"",displayOrder:0,isFeatured:!1,isActive:!0,requiresApproval:!0,metadata:{}}}function lD({isOpen:e,onClose:t,onSubmit:s,service:n=null,isLoading:a=!1,serverError:l=null,validationErrors:u=null}){const[f,m]=w.useState(iD(n)),[x,p]=w.useState({}),[v,C]=w.useState("");w.useEffect(()=>{e&&(m(iD(n)),p({}))},[e,n]),w.useEffect(()=>{if(u&&Array.isArray(u)){const P={};u.forEach(H=>{H.field&&(P[H.field]=H.message)}),p(H=>({...H,...P}))}},[u]);const T=(P,H)=>{m(B=>({...B,[P]:H})),x[P]&&p(B=>{const F={...B};return delete F[P],F})},E=()=>{v.trim()&&(m(P=>({...P,perks:[...P.perks,v.trim()]})),C(""))},k=P=>{m(H=>({...H,perks:H.perks.filter((B,F)=>F!==P)}))},O=()=>{const P={};return f.name.trim()||(P.name="Name is required"),(!f.price||f.price<=0)&&(P.price="Price must be greater than 0"),(!f.durationInDays||f.durationInDays<=0)&&(P.durationInDays="Duration must be greater than 0"),f.compareAtPrice&&f.compareAtPrice<=f.price&&(P.compareAtPrice="Compare at price should be higher than price"),p(P),Object.keys(P).length===0},M=P=>{if(P.preventDefault(),!O())return;const H={name:f.name.trim(),description:f.description.trim(),shortDescription:f.shortDescription.trim(),price:Number(f.price),durationInDays:Number(f.durationInDays),category:f.category,perks:f.perks,displayOrder:Number(f.displayOrder)||0,isFeatured:f.isFeatured,isActive:f.isActive,requiresApproval:f.requiresApproval};f.imageUrl&&(H.imageUrl=f.imageUrl),f.compareAtPrice&&(H.compareAtPrice=Number(f.compareAtPrice)),f.maxSubscriptions&&(H.maxSubscriptions=Number(f.maxSubscriptions)),s(H)},L=!!n;return r.jsx(Lt,{isOpen:e,onClose:t,title:L?"Edit Service":"Create New Service",size:"xl",children:r.jsxs("form",{onSubmit:M,className:"space-y-6",children:[l&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(Mt,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("p",{children:l})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Service Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:f.name,onChange:P=>T("name",P.target.value),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${x.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter service name"}),x.name&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:x.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Description"}),r.jsx("input",{type:"text",value:f.shortDescription,onChange:P=>T("shortDescription",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Brief description for cards",maxLength:150})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Description"}),r.jsx("textarea",{value:f.description,onChange:P=>T("description",P.target.value),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none",placeholder:"Detailed description of the service"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),r.jsx("select",{value:f.category,onChange:P=>T("category",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white",children:HR.map(P=>r.jsx("option",{value:P,children:P.charAt(0)+P.slice(1).toLowerCase()},P))})]})]}),r.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pricing & Duration"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price () ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",value:f.price,onChange:P=>T("price",P.target.value),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${x.price?"border-red-500":"border-gray-300"}`,placeholder:"0",min:"0"}),x.price&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:x.price})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compare at Price ()"}),r.jsx("input",{type:"number",value:f.compareAtPrice,onChange:P=>T("compareAtPrice",P.target.value),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${x.compareAtPrice?"border-red-500":"border-gray-300"}`,placeholder:"Optional",min:"0"}),x.compareAtPrice&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:x.compareAtPrice})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Duration (Days) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",value:f.durationInDays,onChange:P=>T("durationInDays",P.target.value),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${x.durationInDays?"border-red-500":"border-gray-300"}`,placeholder:"30",min:"1"}),x.durationInDays&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:x.durationInDays})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Subscriptions"}),r.jsx("input",{type:"number",value:f.maxSubscriptions,onChange:P=>T("maxSubscriptions",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Leave empty for unlimited",min:"0"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for unlimited subscriptions"})]})]}),r.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Service Image"}),r.jsx(ha,{value:f.imageUrl,onUpload:P=>T("imageUrl",P),folder:"services",placeholder:"Upload service image",type:"image"})]}),r.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Service Perks"}),f.perks.length>0&&r.jsx("div",{className:"space-y-2",children:f.perks.map((P,H)=>r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"flex-1 text-sm text-gray-700",children:P}),r.jsx("button",{type:"button",onClick:()=>k(H),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:r.jsx(hr,{className:"h-4 w-4"})})]},H))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:v,onChange:P=>C(P.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Add a perk (e.g., Weekly 1-on-1 calls)",onKeyPress:P=>{P.key==="Enter"&&(P.preventDefault(),E())}}),r.jsx("button",{type:"button",onClick:E,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:r.jsx(kr,{className:"h-5 w-5"})})]})]}),r.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Settings"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Order"}),r.jsx("input",{type:"number",value:f.displayOrder,onChange:P=>T("displayOrder",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"0",min:"0"})]})}),r.jsxs("div",{className:"flex flex-wrap gap-6",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:f.isFeatured,onChange:P=>T("isFeatured",P.target.checked),className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Featured Service"})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:f.isActive,onChange:P=>T("isActive",P.target.checked),className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:f.requiresApproval,onChange:P=>T("requiresApproval",P.target.checked),className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Requires Admin Approval"})]})]}),r.jsx("div",{className:`p-3 rounded-lg border ${f.requiresApproval?"bg-amber-50 border-amber-200":"bg-green-50 border-green-200"}`,children:r.jsx("p",{className:"text-sm text-gray-700",children:f.requiresApproval?" Users must request approval. Admin will review and send payment link.":" Users can purchase directly with immediate payment."})})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,disabled:a,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center gap-2",children:a?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"animate-spin",children:""}),L?"Updating...":"Creating..."]}):L?"Update Service":"Create Service"})]})]})})}function oD(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function cD(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function e0e(e){const t={CONSULTATION:"bg-blue-100 text-blue-700",COACHING:"bg-purple-100 text-purple-700",THERAPY:"bg-green-100 text-green-700",WELLNESS:"bg-teal-100 text-teal-700",FITNESS:"bg-orange-100 text-orange-700",EDUCATION:"bg-indigo-100 text-indigo-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function t0e({isOpen:e,onClose:t,service:s}){return s?r.jsx(Lt,{isOpen:e,onClose:t,title:"Service Details",size:"xl",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex gap-6",children:[r.jsx("div",{className:"w-40 h-32 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:s.imageUrl?r.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No image"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s.name}),s.shortDescription&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.shortDescription})]}),r.jsxs("div",{className:"flex gap-2",children:[s.isFeatured&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-700",children:[r.jsx($u,{className:"h-3 w-3"}),"Featured"]}),s.isActive?r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Active"}):r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Inactive"})]})]}),r.jsx("div",{className:"mt-3",children:r.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${e0e(s.category)}`,children:[r.jsx(Vc,{className:"h-3 w-3 inline mr-1"}),s.category]})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[r.jsx(sw,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Price"})]}),r.jsx("p",{className:"text-lg font-bold text-gray-900",children:oD(s.price)}),s.compareAtPrice&&s.compareAtPrice>s.price&&r.jsx("p",{className:"text-sm text-gray-400 line-through",children:oD(s.compareAtPrice)})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[r.jsx(jr,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Duration"})]}),r.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[s.durationInDays," days"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[r.jsx(Yn,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Active"})]}),r.jsx("p",{className:"text-lg font-bold text-gray-900",children:s.activeSubscriptionCount||0})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[r.jsx(Yn,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total"})]}),r.jsx("p",{className:"text-lg font-bold text-gray-900",children:s.totalSubscriptionCount||0})]})]}),s.description&&r.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:s.description})]}),s.perks&&s.perks.length>0&&r.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Service Perks"}),r.jsx("ul",{className:"space-y-2",children:s.perks.map((n,a)=>r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(ls,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-gray-600",children:n})]},a))})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Purchase Flow"}),r.jsx("div",{className:`p-4 rounded-lg border ${s.requiresApproval?"bg-amber-50 border-amber-200":"bg-green-50 border-green-200"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"text-2xl",children:s.requiresApproval?"":""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 mb-1",children:s.requiresApproval?"Admin Approval Required":"Direct Purchase Enabled"}),r.jsx("p",{className:"text-sm text-gray-700",children:s.requiresApproval?"Users must request this service. Admin will review requests and send payment links upon approval.":"Users can purchase this service directly with immediate payment processing through Razorpay."})]})]})})]}),r.jsx("div",{className:"border-t border-gray-200 pt-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Max Subscriptions:"}),r.jsx("span",{className:"ml-2 text-gray-900",children:s.maxSubscriptions||"Unlimited"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Display Order:"}),r.jsx("span",{className:"ml-2 text-gray-900",children:s.displayOrder||0})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Created:"}),r.jsx("span",{className:"ml-2 text-gray-900",children:cD(s.createdAt)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Updated:"}),r.jsx("span",{className:"ml-2 text-gray-900",children:cD(s.updatedAt)})]})]})}),r.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:r.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})}):null}function r0e(){const{hasRole:e}=mn(),t=e(["SUPER_ADMIN","ADMIN"]),s=e(["SUPER_ADMIN","ADMIN"]),n=e(["SUPER_ADMIN","ADMIN"]),{services:a,pagination:l,filters:u,isLoading:f,error:m,getServiceById:x,createService:p,updateService:v,deleteService:C,updateFilters:T,updateSearch:E,resetFilters:k,changePage:O,clearError:M}=Kfe(),[L,P]=w.useState(!1),[H,B]=w.useState(!1),[F,R]=w.useState(!1),[z,U]=w.useState(!1),[Y,$]=w.useState(null),[G,ee]=w.useState(!1),[ce,se]=w.useState(null),[J,ne]=w.useState(null),pe=w.useCallback(je=>{$(je),R(!0)},[]),be=w.useCallback(async je=>{const oe=await x(je._id);oe.success?($(oe.data),se(null),ne(null),B(!0)):se(oe.error)},[x]),te=w.useCallback(()=>{$(null),se(null),ne(null),P(!0)},[]),X=w.useCallback(je=>{$(je),U(!0)},[]),re=w.useCallback(async je=>{ee(!0),se(null),ne(null);try{const oe=await p(je);oe.success?P(!1):(se(oe.error),ne(oe.validationErrors))}finally{ee(!1)}},[p]),ge=w.useCallback(async je=>{if(Y){ee(!0),se(null),ne(null);try{const oe=await v(Y._id,je);oe.success?(B(!1),$(null)):(se(oe.error),ne(oe.validationErrors))}finally{ee(!1)}}},[Y,v]),de=w.useCallback(async()=>{if(Y){ee(!0);try{const je=await C(Y._id);je.success?(U(!1),$(null)):se(je.error)}finally{ee(!1)}}},[Y,C]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Services"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your services and subscription offerings"})]}),r.jsx("div",{className:"flex items-center gap-3",children:t&&r.jsxs("button",{onClick:te,className:"flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-900 transition-colors",children:[r.jsx(kr,{className:"h-5 w-5"}),r.jsx("span",{children:"Create Service"})]})})]}),m&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(Mt,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("p",{className:"flex-1",children:m}),r.jsx("button",{onClick:M,className:"text-red-500 hover:text-red-700 font-medium",children:"Dismiss"})]}),r.jsx(Zfe,{filters:u,onFilterChange:T,onSearchChange:E,onReset:k,disabled:f}),r.jsx(Jfe,{services:a,isLoading:f,canEdit:s,canDelete:n,onView:pe,onEdit:be,onDelete:X}),l.totalPages>0&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsx(Dr,{currentPage:l.currentPage,totalPages:l.totalPages,totalItems:l.totalCount,itemsPerPage:l.limit,onPageChange:O,itemLabel:"services"})}),r.jsx(lD,{isOpen:L,onClose:()=>P(!1),onSubmit:re,service:null,isLoading:G,serverError:ce,validationErrors:J}),r.jsx(lD,{isOpen:H,onClose:()=>{B(!1),$(null)},onSubmit:ge,service:Y,isLoading:G,serverError:ce,validationErrors:J}),r.jsx(t0e,{isOpen:F,onClose:()=>{R(!1),$(null)},service:Y}),r.jsx(en,{isOpen:z,onClose:()=>{U(!1),$(null)},onConfirm:de,title:"Delete Service",message:`Are you sure you want to delete "${Y?.name}"? This will mark the service as inactive.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:G})]})}const Yh={BASE:"/web/service-orders",GENERATE_LINK:"/web/service-orders/generate-payment-link"},s0e=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&t.append(s,n)}),t.toString()},yg={getAll:async(e={})=>{const t=s0e(e),s=t?`${Yh.BASE}?${t}`:Yh.BASE;console.log("[ServiceOrderService] Fetching service orders with params:",e);const n=await Te(Ee.get(s));return n.success?console.log("[ServiceOrderService] Fetched orders:",n.data.orders?.length):console.error("[ServiceOrderService] Failed to fetch orders:",n.message),n},getById:async e=>{console.log("[ServiceOrderService] Fetching service order:",e);const t=await Te(Ee.get(`${Yh.BASE}/${e}`));return t.success?console.log("[ServiceOrderService] Fetched order:",t.data.order?.orderId):console.error("[ServiceOrderService] Failed to fetch order:",t.message),t},generatePaymentLink:async e=>{console.log("[ServiceOrderService] Generating payment link for:",e.phone);const t=await Te(Ee.post(Yh.GENERATE_LINK,e));return t.success?console.log("[ServiceOrderService] Payment link generated:",t.data.paymentLink):console.error("[ServiceOrderService] Failed to generate payment link:",t.message),t},resendPaymentLink:async e=>{console.log("[ServiceOrderService] Resending payment link:",e);const t=await Te(Ee.post(`${Yh.BASE}/${e}/resend`));return t.success?console.log("[ServiceOrderService] Payment link resent successfully"):console.error("[ServiceOrderService] Failed to resend payment link:",t.message),t}},n0e=["PENDING","SUCCESS","FAILED","EXPIRED","CANCELLED"],a0e=["ADMIN","USER_REQUEST"],i0e=[{value:"createdAt",label:"Created Date"},{value:"totalAmount",label:"Amount"}],uD={search:"",status:"",source:"",phone:"",sortBy:"createdAt",sortOrder:"desc"};function l0e(e={}){const[t,s]=w.useState([]),[n,a]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[l,u]=w.useState({...uD,...e}),[f,m]=w.useState(!1),[x,p]=w.useState(null),v=w.useRef(null),C=w.useCallback(async(F=n.currentPage)=>{m(!0),p(null);try{const R={page:F,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.status&&{status:l.status},...l.source&&{source:l.source},...l.phone&&{phone:l.phone}},z=await yg.getAll(R);z.success?(s(z.data.orders||[]),a(z.data.pagination||n)):(p(z.message),s([]))}catch{p("Failed to fetch service orders"),s([])}finally{m(!1)}},[l,n.limit,n.currentPage]),T=w.useCallback(async F=>{try{const R=await yg.getById(F);return R.success?{success:!0,data:R.data.order}:{success:!1,error:R.message}}catch{return{success:!1,error:"Failed to fetch order details"}}},[]),E=w.useCallback(async F=>{m(!0),p(null);try{const R=await yg.generatePaymentLink(F);return R.success?(await C(1),{success:!0,data:R.data}):{success:!1,error:R.message,validationErrors:Array.isArray(R.error)?R.error:R.data?.errors}}catch{return{success:!1,error:"Failed to generate payment link"}}finally{m(!1)}},[C]),k=w.useCallback(async F=>{m(!0),p(null);try{const R=await yg.resendPaymentLink(F);return R.success?(s(z=>z.map(U=>U._id===F?{...U,...R.data.order}:U)),{success:!0,data:R.data}):{success:!1,error:R.message}}catch{return{success:!1,error:"Failed to resend payment link"}}finally{m(!1)}},[]),O=w.useCallback(F=>{u(R=>({...R,...F}))},[]),M=w.useCallback(F=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{u(R=>({...R,search:F}))},300)},[]),L=w.useCallback(()=>{u({...uD,...e})},[e]),P=w.useCallback(F=>{C(F)},[C]),H=w.useCallback(F=>{a(R=>({...R,limit:F}))},[]),B=w.useCallback(()=>{p(null)},[]);return w.useEffect(()=>{C(1)},[l]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{orders:t,pagination:n,filters:l,isLoading:f,error:x,fetchOrders:C,getOrderById:T,generatePaymentLink:E,resendPaymentLink:k,updateFilters:O,updateSearch:M,resetFilters:L,changePage:P,changeLimit:H,clearError:B}}function o0e({filters:e,onFilterChange:t,onSearchChange:s,onReset:n,disabled:a=!1}){const[l,u]=w.useState(e.search||""),f=v=>{const C=v.target.value;u(C),s(C)},m=(v,C)=>{t({[v]:C})},x=()=>{u(""),n()},p=e.status||e.source||e.phone;return r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by phone, order ID, name...",value:l,onChange:f,disabled:a,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),l&&r.jsx("button",{onClick:()=>{u(""),s("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(Kr,{className:"h-4 w-4"})})]}),r.jsxs("select",{value:e.status,onChange:v=>m("status",v.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"All Status"}),n0e.map(v=>r.jsx("option",{value:v,children:v.charAt(0)+v.slice(1).toLowerCase()},v))]}),r.jsxs("select",{value:e.source,onChange:v=>m("source",v.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"All Sources"}),a0e.map(v=>r.jsx("option",{value:v,children:v==="ADMIN"?"Admin Created":"User Request"},v))]}),r.jsx("select",{value:e.sortBy,onChange:v=>m("sortBy",v.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:i0e.map(v=>r.jsxs("option",{value:v.value,children:["Sort: ",v.label]},v.value))}),r.jsxs("select",{value:e.sortOrder,onChange:v=>m("sortOrder",v.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"desc",children:"Newest First"}),r.jsx("option",{value:"asc",children:"Oldest First"})]}),(p||l)&&r.jsxs("button",{onClick:x,disabled:a,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[r.jsx(Ro,{className:"h-4 w-4"}),"Reset"]})]})})}function c0e(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function u0e(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function d0e(e){const t={PENDING:"bg-yellow-100 text-yellow-700",SUCCESS:"bg-green-100 text-green-700",FAILED:"bg-red-100 text-red-700",EXPIRED:"bg-gray-100 text-gray-600",CANCELLED:"bg-red-100 text-red-700"};return t[e]||t.PENDING}function h0e(e){return e==="ADMIN"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}function f0e({orders:e,isLoading:t,onView:s,onResend:n,resendingId:a}){const[l,u]=w.useState(null),f=async(m,x)=>{try{await navigator.clipboard.writeText(m),u(x),setTimeout(()=>u(null),2e3)}catch(p){console.error("Failed to copy:",p)}};return t?r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(it,{className:"h-8 w-8 animate-spin text-gray-800"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading orders..."})]})}):e.length===0?r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx("p",{className:"text-lg font-medium",children:"No orders found"}),r.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your filters or generate a new payment link."})]})}):r.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Order ID"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Customer"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Services"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Amount"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Source"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Created"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(m=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 font-mono text-sm",children:m.orderId}),m.userExists&&r.jsx("span",{className:"text-xs text-green-600 bg-green-50 px-1.5 py-0.5 rounded",children:"User exists"}),!m.userExists&&r.jsx("span",{className:"text-xs text-amber-600 bg-amber-50 px-1.5 py-0.5 rounded",children:"New user"})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:m.customerName||m.userId?.name||"N/A"}),r.jsx("p",{className:"text-sm text-gray-500",children:m.phone})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"space-y-1",children:[m.services?.slice(0,2).map((x,p)=>r.jsx("p",{className:"text-sm text-gray-700 truncate max-w-[150px]",children:x.serviceName},p)),m.services?.length>2&&r.jsxs("p",{className:"text-xs text-gray-500",children:["+",m.services.length-2," more"]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-medium text-gray-900",children:c0e(m.totalAmount)})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h0e(m.source)}`,children:m.source==="ADMIN"?"Admin":"Request"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${d0e(m.status)}`,children:m.status}),m.whatsappSent&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600",children:[r.jsx(uf,{className:"h-3 w-3"}),r.jsx("span",{children:"Sent"})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("p",{className:"text-sm text-gray-600",children:u0e(m.createdAt)})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx("button",{onClick:()=>s(m),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:r.jsx(Lr,{className:"h-4 w-4"})}),m.paymentLinkUrl&&m.status==="PENDING"&&r.jsx("button",{onClick:()=>f(m.paymentLinkUrl,m._id),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Copy Payment Link",children:l===m._id?r.jsx(Cn,{className:"h-4 w-4 text-green-600"}):r.jsx(nd,{className:"h-4 w-4"})}),m.paymentLinkUrl&&m.status==="PENDING"&&r.jsx("a",{href:m.paymentLinkUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Open Payment Link",children:r.jsx(Ed,{className:"h-4 w-4"})}),m.status==="PENDING"&&r.jsx("button",{onClick:()=>n(m._id),disabled:a===m._id,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors disabled:opacity-50",title:"Resend via WhatsApp",children:a===m._id?r.jsx(it,{className:"h-4 w-4 animate-spin"}):r.jsx(qs,{className:"h-4 w-4"})})]})})]},m._id))})]})})})}function m0e({isOpen:e,onClose:t,onSubmit:s,isLoading:n=!1,serverError:a=null,successData:l=null}){const[u,f]=w.useState({phone:"",customerName:"",serviceIds:[],adminNotes:"",sendWhatsApp:!0}),[m,x]=w.useState({}),[p,v]=w.useState([]),[C,T]=w.useState(!1);w.useEffect(()=>{e&&(f({phone:"",customerName:"",serviceIds:[],adminNotes:"",sendWhatsApp:!0}),x({}))},[e]),w.useEffect(()=>{e&&E()},[e]);const E=async()=>{T(!0);try{const B=await Tc.getAll({isActive:!0,limit:100});B.success&&v(B.data.services||[])}catch(B){console.error("Failed to fetch services:",B)}finally{T(!1)}},k=(B,F)=>{f(R=>({...R,[B]:F})),m[B]&&x(R=>{const z={...R};return delete z[B],z})},O=B=>{f(F=>{const R=F.serviceIds.includes(B);return{...F,serviceIds:R?F.serviceIds.filter(z=>z!==B):[...F.serviceIds,B]}}),m.serviceIds&&x(F=>{const R={...F};return delete R.serviceIds,R})},M=()=>{const B={};return u.phone.trim()?/^[6-9]\d{9}$/.test(u.phone.trim())||(B.phone="Enter a valid 10-digit phone number"):B.phone="Phone number is required",u.serviceIds.length===0&&(B.serviceIds="Select at least one service"),x(B),Object.keys(B).length===0},L=B=>{if(B.preventDefault(),!M())return;const F={phone:u.phone.trim(),customerName:u.customerName.trim()||void 0,serviceIds:u.serviceIds,adminNotes:u.adminNotes.trim()||void 0,sendWhatsApp:u.sendWhatsApp};s(F)},P=()=>u.serviceIds.reduce((B,F)=>{const R=p.find(z=>z._id===F);return B+(R?.price||0)},0),H=B=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(B);return l?r.jsx(Lt,{isOpen:e,onClose:t,title:"Payment Link Generated",size:"md",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(ls,{className:"h-8 w-8 text-green-600"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Success!"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Payment link has been generated successfully."})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Order ID:"}),r.jsx("span",{className:"text-sm font-mono font-medium",children:l.serviceOrder?.orderId})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Amount:"}),r.jsx("span",{className:"text-sm font-medium",children:H(l.serviceOrder?.totalAmount)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"User Status:"}),r.jsx("span",{className:"flex items-center gap-1 text-sm",children:l.userExists?r.jsxs(r.Fragment,{children:[r.jsx(Od,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{className:"text-green-600",children:"Existing User"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Uf,{className:"h-4 w-4 text-amber-600"}),r.jsx("span",{className:"text-amber-600",children:"New User"})]})})]}),l.serviceOrder?.whatsappSent&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"WhatsApp:"}),r.jsx("span",{className:"text-sm text-green-600",children:"Sent"})]})]}),l.paymentLink&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Link"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:l.paymentLink,readOnly:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm"}),r.jsx("button",{onClick:()=>navigator.clipboard.writeText(l.paymentLink),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 text-sm",children:"Copy"})]})]}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})}):r.jsx(Lt,{isOpen:e,onClose:t,title:"Generate Payment Link",size:"lg",children:r.jsxs("form",{onSubmit:L,className:"space-y-6",children:[a&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(Mt,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("p",{children:a})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Customer Information"}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"tel",value:u.phone,onChange:B=>k("phone",B.target.value),className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none ${m.phone?"border-red-500":"border-gray-300"}`,placeholder:"10-digit phone number",maxLength:10}),m.phone&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.phone})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),r.jsx("input",{type:"text",value:u.customerName,onChange:B=>k("customerName",B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none",placeholder:"Optional - for reference"})]})]}),r.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Services ",r.jsx("span",{className:"text-red-500",children:"*"})]}),C?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx(it,{className:"h-6 w-6 animate-spin text-gray-400"}),r.jsx("span",{className:"ml-2 text-gray-500",children:"Loading services..."})]}):p.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No active services available"}):r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:p.map(B=>r.jsxs("label",{className:`flex items-start gap-3 p-4 rounded-lg border cursor-pointer transition-colors ${u.serviceIds.includes(B._id)?"border-gray-800 bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("input",{type:"checkbox",checked:u.serviceIds.includes(B._id),onChange:()=>O(B._id),className:"w-4 h-4 text-gray-800 rounded focus:ring-0 mt-1"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"font-medium text-gray-900",children:B.name}),r.jsx("p",{className:"font-semibold text-gray-900",children:H(B.price)})]}),B.shortDescription&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:B.shortDescription}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[B.durationInDays," days"]})]})]},B._id))}),m.serviceIds&&r.jsx("p",{className:"text-sm text-red-500",children:m.serviceIds})]}),u.serviceIds.length>0&&r.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Total Amount:"}),r.jsx("span",{className:"text-xl font-bold text-gray-900",children:H(P())})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Notes"}),r.jsx("textarea",{value:u.adminNotes,onChange:B=>k("adminNotes",B.target.value),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none",placeholder:"Optional notes for internal reference"})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u.sendWhatsApp,onChange:B=>k("sendWhatsApp",B.target.checked),className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Send via WhatsApp"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Automatically send payment link to the customer's WhatsApp"})]})]})}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,disabled:n,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:n,className:"px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center gap-2",children:n?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-4 w-4 animate-spin"}),"Generating..."]}):"Generate Payment Link"})]})]})})}function dD(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function l2(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function g0e(e){const t={PENDING:"bg-yellow-100 text-yellow-700",SUCCESS:"bg-green-100 text-green-700",FAILED:"bg-red-100 text-red-700",EXPIRED:"bg-gray-100 text-gray-600",CANCELLED:"bg-red-100 text-red-700"};return t[e]||t.PENDING}function x0e({isOpen:e,onClose:t,order:s}){const[n,a]=w.useState(!1);if(!s)return null;const l=async()=>{if(s.paymentLinkUrl)try{await navigator.clipboard.writeText(s.paymentLinkUrl),a(!0),setTimeout(()=>a(!1),2e3)}catch(u){console.error("Failed to copy:",u)}};return r.jsx(Lt,{isOpen:e,onClose:t,title:"Order Details",size:"xl",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 font-mono",children:s.orderId}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${g0e(s.status)}`,children:s.status}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s.source==="ADMIN"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:s.source==="ADMIN"?"Admin Created":"User Request"})]})]}),r.jsx("div",{className:"text-right",children:r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:dD(s.totalAmount)})})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Customer Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ls,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),r.jsx("p",{className:"font-medium text-gray-900",children:s.customerName||s.userId?.name||"N/A"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ga,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),r.jsx("p",{className:"font-medium text-gray-900",children:s.phone})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[s.userExists?r.jsx(Od,{className:"h-5 w-5 text-green-500"}):r.jsx(Uf,{className:"h-5 w-5 text-amber-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"User Status"}),r.jsx("p",{className:`font-medium ${s.userExists?"text-green-600":"text-amber-600"}`,children:s.userExists?"Existing User":"New User"})]})]}),s.userId?.email&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),r.jsx("p",{className:"font-medium text-gray-900",children:s.userId.email})]})]})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[r.jsx(Td,{className:"h-4 w-4"}),"Services (",s.services?.length||0,")"]}),r.jsx("div",{className:"space-y-2",children:s.services?.map((u,f)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:u.serviceName}),r.jsxs("p",{className:"text-sm text-gray-500",children:[u.durationInDays," days"]})]}),r.jsx("p",{className:"font-semibold text-gray-900",children:dD(u.price)})]},f))})]}),s.paymentLinkUrl&&r.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[r.jsx(tp,{className:"h-4 w-4"}),"Payment Link"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:s.paymentLinkUrl,readOnly:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm font-mono"}),r.jsx("button",{onClick:l,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:n?r.jsx(Cn,{className:"h-5 w-5 text-green-600"}):r.jsx(nd,{className:"h-5 w-5"})}),r.jsx("a",{href:s.paymentLinkUrl,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:r.jsx(Ed,{className:"h-5 w-5"})})]}),s.expiresAt&&r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Expires: ",l2(s.expiresAt)]})]}),s.whatsappSent&&r.jsxs("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 px-4 py-3 rounded-lg",children:[r.jsx(uf,{className:"h-5 w-5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"WhatsApp Sent"}),s.whatsappSentAt&&r.jsx("p",{className:"text-xs opacity-75",children:l2(s.whatsappSentAt)})]})]}),s.adminNotes&&r.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Admin Notes"}),r.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:s.adminNotes})]}),r.jsx("div",{className:"border-t border-gray-200 pt-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-500",children:"Created:"}),r.jsx("span",{className:"text-gray-900",children:l2(s.createdAt)})]}),s.adminId&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Created by:"}),r.jsx("span",{className:"ml-2 text-gray-900",children:s.adminId.name||s.adminId.username})]})]})}),r.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:r.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})})}function p0e(){const{hasRole:e}=mn(),t=e(["SUPER_ADMIN","ADMIN"]),{orders:s,pagination:n,filters:a,isLoading:l,error:u,getOrderById:f,generatePaymentLink:m,resendPaymentLink:x,updateFilters:p,updateSearch:v,resetFilters:C,changePage:T,clearError:E}=l0e(),[k,O]=w.useState(!1),[M,L]=w.useState(!1),[P,H]=w.useState(null),[B,F]=w.useState(!1),[R,z]=w.useState(null),[U,Y]=w.useState(null),[$,G]=w.useState(null),ee=w.useCallback(async pe=>{const be=await f(pe._id);be.success&&(H(be.data),L(!0))},[f]),ce=w.useCallback(()=>{z(null),Y(null),O(!0)},[]),se=w.useCallback(async pe=>{G(pe);try{const be=await x(pe);be.success||console.error("Failed to resend:",be.error)}finally{G(null)}},[x]),J=w.useCallback(async pe=>{F(!0),z(null);try{const be=await m(pe);be.success?Y(be.data):z(be.error)}finally{F(!1)}},[m]),ne=w.useCallback(()=>{O(!1),z(null),Y(null)},[]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Service Orders"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage payment links and service orders"})]}),r.jsx("div",{className:"flex items-center gap-3",children:t&&r.jsxs("button",{onClick:ce,className:"flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-900 transition-colors",children:[r.jsx(kr,{className:"h-5 w-5"}),r.jsx("span",{children:"Generate Payment Link"})]})})]}),u&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(Mt,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("p",{className:"flex-1",children:u}),r.jsx("button",{onClick:E,className:"text-red-500 hover:text-red-700 font-medium",children:"Dismiss"})]}),r.jsx(o0e,{filters:a,onFilterChange:p,onSearchChange:v,onReset:C,disabled:l}),r.jsx(f0e,{orders:s,isLoading:l,onView:ee,onResend:se,resendingId:$}),n.totalPages>0&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsx(Dr,{currentPage:n.currentPage,totalPages:n.totalPages,totalItems:n.totalCount,itemsPerPage:n.limit,onPageChange:T,itemLabel:"orders"})}),r.jsx(m0e,{isOpen:k,onClose:ne,onSubmit:J,isLoading:B,serverError:R,successData:U}),r.jsx(x0e,{isOpen:M,onClose:()=>{L(!1),H(null)},order:P})]})}const Xh={BASE:"/web/service-requests"},y0e=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&t.append(s,n)}),t.toString()},bg={getAll:async(e={})=>{const t=y0e(e),s=t?`${Xh.BASE}?${t}`:Xh.BASE;console.log("[ServiceRequestService] Fetching service requests with params:",e);const n=await Te(Ee.get(s));return n.success?console.log("[ServiceRequestService] Fetched requests:",n.data.requests?.length):console.error("[ServiceRequestService] Failed to fetch requests:",n.message),n},getById:async e=>{console.log("[ServiceRequestService] Fetching service request:",e);const t=await Te(Ee.get(`${Xh.BASE}/${e}`));return t.success?console.log("[ServiceRequestService] Fetched request:",t.data.request?._id):console.error("[ServiceRequestService] Failed to fetch request:",t.message),t},approve:async(e,t={})=>{console.log("[ServiceRequestService] Approving service request:",e);const s=await Te(Ee.post(`${Xh.BASE}/${e}/approve`,t));return s.success?console.log("[ServiceRequestService] Request approved successfully"):console.error("[ServiceRequestService] Failed to approve request:",s.message),s},reject:async(e,t)=>{console.log("[ServiceRequestService] Rejecting service request:",e);const s=await Te(Ee.post(`${Xh.BASE}/${e}/reject`,t));return s.success?console.log("[ServiceRequestService] Request rejected successfully"):console.error("[ServiceRequestService] Failed to reject request:",s.message),s}},b0e=["PENDING","APPROVED","REJECTED"],v0e=[{value:"createdAt",label:"Created Date"},{value:"totalAmount",label:"Amount"}],hD={search:"",status:"",userExists:"",sortBy:"createdAt",sortOrder:"desc"};function N0e(e={}){const[t,s]=w.useState([]),[n,a]=w.useState(0),[l,u]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[f,m]=w.useState({...hD,...e}),[x,p]=w.useState(!1),[v,C]=w.useState(null),T=w.useRef(null),E=w.useCallback(async(z=l.currentPage)=>{p(!0),C(null);try{const U={page:z,limit:l.limit,sortBy:f.sortBy,sortOrder:f.sortOrder,...f.search&&{search:f.search},...f.status&&{status:f.status},...f.userExists!==""&&{userExists:f.userExists}},Y=await bg.getAll(U);Y.success?(s(Y.data.requests||[]),a(Y.data.pendingCount||0),u(Y.data.pagination||l)):(C(Y.message),s([]))}catch{C("Failed to fetch service requests"),s([])}finally{p(!1)}},[f,l.limit,l.currentPage]),k=w.useCallback(async z=>{try{const U=await bg.getById(z);return U.success?{success:!0,data:U.data.request}:{success:!1,error:U.message}}catch{return{success:!1,error:"Failed to fetch request details"}}},[]),O=w.useCallback(async(z,U={})=>{p(!0),C(null);try{const Y=await bg.approve(z,U);return Y.success?(s($=>$.map(G=>G._id===z?{...G,status:"APPROVED",...Y.data.request}:G)),a($=>Math.max(0,$-1)),{success:!0,data:Y.data}):{success:!1,error:Y.message}}catch{return{success:!1,error:"Failed to approve request"}}finally{p(!1)}},[]),M=w.useCallback(async(z,U)=>{p(!0),C(null);try{const Y=await bg.reject(z,U);return Y.success?(s($=>$.map(G=>G._id===z?{...G,status:"REJECTED",...Y.data.request}:G)),a($=>Math.max(0,$-1)),{success:!0,data:Y.data}):{success:!1,error:Y.message}}catch{return{success:!1,error:"Failed to reject request"}}finally{p(!1)}},[]),L=w.useCallback(z=>{m(U=>({...U,...z}))},[]),P=w.useCallback(z=>{T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{m(U=>({...U,search:z}))},300)},[]),H=w.useCallback(()=>{m({...hD,...e})},[e]),B=w.useCallback(z=>{E(z)},[E]),F=w.useCallback(z=>{u(U=>({...U,limit:z}))},[]),R=w.useCallback(()=>{C(null)},[]);return w.useEffect(()=>{E(1)},[f]),w.useEffect(()=>()=>{T.current&&clearTimeout(T.current)},[]),{requests:t,pendingCount:n,pagination:l,filters:f,isLoading:x,error:v,fetchRequests:E,getRequestById:k,approveRequest:O,rejectRequest:M,updateFilters:L,updateSearch:P,resetFilters:H,changePage:B,changeLimit:F,clearError:R}}function w0e({filters:e,onFilterChange:t,onSearchChange:s,onReset:n,pendingCount:a=0,disabled:l=!1}){const[u,f]=w.useState(e.search||""),m=C=>{const T=C.target.value;f(T),s(T)},x=(C,T)=>{t({[C]:T})},p=()=>{f(""),n()},v=e.status||e.userExists!=="";return r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a>0&&r.jsx("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-amber-100 text-amber-800 rounded-lg",children:r.jsxs("span",{className:"text-sm font-medium",children:[a," pending"]})}),r.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by phone, name, email...",value:u,onChange:m,disabled:l,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),u&&r.jsx("button",{onClick:()=>{f(""),s("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(Kr,{className:"h-4 w-4"})})]}),r.jsxs("select",{value:e.status,onChange:C=>x("status",C.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"All Status"}),b0e.map(C=>r.jsx("option",{value:C,children:C.charAt(0)+C.slice(1).toLowerCase()},C))]}),r.jsxs("select",{value:e.userExists,onChange:C=>x("userExists",C.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"All Users"}),r.jsx("option",{value:"true",children:"Existing Users"}),r.jsx("option",{value:"false",children:"New Users"})]}),r.jsx("select",{value:e.sortBy,onChange:C=>x("sortBy",C.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:v0e.map(C=>r.jsxs("option",{value:C.value,children:["Sort: ",C.label]},C.value))}),r.jsxs("select",{value:e.sortOrder,onChange:C=>x("sortOrder",C.target.value),disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"desc",children:"Newest First"}),r.jsx("option",{value:"asc",children:"Oldest First"})]}),(v||u)&&r.jsxs("button",{onClick:p,disabled:l,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[r.jsx(Ro,{className:"h-4 w-4"}),"Reset"]})]})})}function j0e(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function S0e(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function C0e(e){const t={PENDING:"bg-yellow-100 text-yellow-700",APPROVED:"bg-green-100 text-green-700",REJECTED:"bg-red-100 text-red-700"};return t[e]||t.PENDING}function A0e({requests:e,isLoading:t,canReview:s,onView:n,onApprove:a,onReject:l}){return t?r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(it,{className:"h-8 w-8 animate-spin text-gray-800"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading requests..."})]})}):e.length===0?r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx("p",{className:"text-lg font-medium",children:"No requests found"}),r.jsx("p",{className:"text-sm mt-1",children:"Service requests from users will appear here."})]})}):r.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Customer"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"User Status"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Services"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Amount"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Requested"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(u=>r.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 ${u.status==="PENDING"?"bg-amber-50/30":""}`,children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:u.name||"N/A"}),r.jsx("p",{className:"text-sm text-gray-500",children:u.phone}),u.email&&r.jsx("p",{className:"text-sm text-gray-400 truncate",children:u.email})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"flex items-center gap-2",children:u.userExists?r.jsxs(r.Fragment,{children:[r.jsx(Od,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"text-sm text-green-600",children:"Existing"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Uf,{className:"h-4 w-4 text-amber-500"}),r.jsx("span",{className:"text-sm text-amber-600",children:"New"})]})})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"space-y-1",children:[u.services?.slice(0,2).map((f,m)=>r.jsx("p",{className:"text-sm text-gray-700 truncate max-w-[150px]",children:f.serviceName||f.serviceId?.name},m)),u.services?.length>2&&r.jsxs("p",{className:"text-xs text-gray-500",children:["+",u.services.length-2," more"]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-medium text-gray-900",children:j0e(u.totalAmount)})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${C0e(u.status)}`,children:u.status})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("p",{className:"text-sm text-gray-600",children:S0e(u.createdAt)})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx("button",{onClick:()=>n(u),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:r.jsx(Lr,{className:"h-4 w-4"})}),u.status==="PENDING"&&s&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>a(u),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve Request",children:r.jsx(Cn,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>l(u),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject Request",children:r.jsx(Kr,{className:"h-4 w-4"})})]})]})})]},u._id))})]})})})}function o2(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function E0e({isOpen:e,onClose:t,onSubmit:s,request:n,isLoading:a=!1,serverError:l=null,successData:u=null}){const[f,m]=w.useState({adminNotes:"",sendWhatsApp:!0});w.useEffect(()=>{e&&m({adminNotes:"",sendWhatsApp:!0})},[e]);const x=p=>{p.preventDefault(),s({adminNotes:f.adminNotes.trim()||void 0,sendWhatsApp:f.sendWhatsApp})};return n?u?r.jsx(Lt,{isOpen:e,onClose:t,title:"Request Approved",size:"md",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(ls,{className:"h-8 w-8 text-green-600"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Approved!"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Payment link has been generated and sent."})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Order ID:"}),r.jsx("span",{className:"text-sm font-mono font-medium",children:u.serviceOrder?.orderId})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Amount:"}),r.jsx("span",{className:"text-sm font-medium",children:o2(u.serviceOrder?.totalAmount||n.totalAmount)})]})]}),u.paymentLink&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Link"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:u.paymentLink,readOnly:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm"}),r.jsx("button",{onClick:()=>navigator.clipboard.writeText(u.paymentLink),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 text-sm",children:"Copy"})]})]}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})}):r.jsx(Lt,{isOpen:e,onClose:t,title:"Approve Service Request",size:"md",children:r.jsxs("form",{onSubmit:x,className:"space-y-6",children:[l&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(Mt,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("p",{children:l})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900",children:n.name||"N/A"}),r.jsx("p",{className:"text-sm text-gray-500",children:n.phone})]}),r.jsx("div",{className:"flex items-center gap-1",children:n.userExists?r.jsxs(r.Fragment,{children:[r.jsx(Od,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"text-xs text-green-600",children:"Existing"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Uf,{className:"h-4 w-4 text-amber-500"}),r.jsx("span",{className:"text-xs text-amber-600",children:"New"})]})})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[r.jsxs("p",{className:"text-sm text-gray-500 mb-2 flex items-center gap-1",children:[r.jsx(Td,{className:"h-4 w-4"}),"Services"]}),r.jsx("div",{className:"space-y-1",children:n.services?.map((p,v)=>r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-700",children:p.serviceName||p.serviceId?.name}),r.jsx("span",{className:"text-gray-900 font-medium",children:o2(p.price)})]},v))}),r.jsxs("div",{className:"border-t border-gray-200 pt-2 mt-2 flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Total"}),r.jsx("span",{className:"font-bold text-gray-900",children:o2(n.totalAmount)})]})]})]}),n.userNote&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Note"}),r.jsx("p",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg border border-blue-100",children:n.userNote})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Notes"}),r.jsx("textarea",{value:f.adminNotes,onChange:p=>m({...f,adminNotes:p.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none",placeholder:"Optional notes for internal reference"})]}),r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:f.sendWhatsApp,onChange:p=>m({...f,sendWhatsApp:p.target.checked}),className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Send via WhatsApp"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Send payment link to customer's WhatsApp"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,disabled:a,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:a?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-4 w-4 animate-spin"}),"Approving..."]}):"Approve & Generate Link"})]})]})}):null}function fD(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function T0e({isOpen:e,onClose:t,onSubmit:s,request:n,isLoading:a=!1,serverError:l=null}){const[u,f]=w.useState({reason:"",adminNotes:""}),[m,x]=w.useState({});w.useEffect(()=>{e&&(f({reason:"",adminNotes:""}),x({}))},[e]);const p=()=>{const C={};return u.reason.trim()||(C.reason="Please provide a reason for rejection"),x(C),Object.keys(C).length===0},v=C=>{C.preventDefault(),p()&&s({reason:u.reason.trim(),adminNotes:u.adminNotes.trim()||void 0})};return n?r.jsx(Lt,{isOpen:e,onClose:t,title:"Reject Service Request",size:"md",children:r.jsxs("form",{onSubmit:v,className:"space-y-6",children:[l&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(Mt,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("p",{children:l})]}),r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(wr,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-800",children:"Rejecting this request"}),r.jsx("p",{className:"text-sm text-red-600 mt-1",children:"This action cannot be undone. The user will not be able to proceed with this request."})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900",children:n.name||"N/A"}),r.jsx("p",{className:"text-sm text-gray-500",children:n.phone})]})}),r.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[r.jsxs("p",{className:"text-sm text-gray-500 mb-2 flex items-center gap-1",children:[r.jsx(Td,{className:"h-4 w-4"}),"Requested Services"]}),r.jsx("div",{className:"space-y-1",children:n.services?.map((C,T)=>r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-700",children:C.serviceName||C.serviceId?.name}),r.jsx("span",{className:"text-gray-900 font-medium",children:fD(C.price)})]},T))}),r.jsxs("div",{className:"border-t border-gray-200 pt-2 mt-2 flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Total"}),r.jsx("span",{className:"font-bold text-gray-900",children:fD(n.totalAmount)})]})]})]}),n.userNote&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Note"}),r.jsx("p",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg border border-blue-100",children:n.userNote})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rejection Reason ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{value:u.reason,onChange:C=>{f({...u,reason:C.target.value}),m.reason&&x({...m,reason:null})},rows:3,className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none ${m.reason?"border-red-500":"border-gray-300"}`,placeholder:"Explain why this request is being rejected"}),m.reason&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.reason}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This reason may be shared with the user"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Notes"}),r.jsx("textarea",{value:u.adminNotes,onChange:C=>f({...u,adminNotes:C.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none",placeholder:"Optional internal notes (not shared with user)"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,disabled:a,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:a?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-4 w-4 animate-spin"}),"Rejecting..."]}):"Reject Request"})]})]})}):null}function mD(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function c2(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function O0e(e){const t={PENDING:"bg-yellow-100 text-yellow-700",APPROVED:"bg-green-100 text-green-700",REJECTED:"bg-red-100 text-red-700"};return t[e]||t.PENDING}function D0e({isOpen:e,onClose:t,request:s}){return s?r.jsx(Lt,{isOpen:e,onClose:t,title:"Request Details",size:"xl",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("div",{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${O0e(s.status)}`,children:s.status}),s.userExists?r.jsxs("span",{className:"flex items-center gap-1 text-sm text-green-600",children:[r.jsx(Od,{className:"h-4 w-4"}),"Existing User"]}):r.jsxs("span",{className:"flex items-center gap-1 text-sm text-amber-600",children:[r.jsx(Uf,{className:"h-4 w-4"}),"New User"]})]})}),r.jsx("div",{className:"text-right",children:r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:mD(s.totalAmount)})})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Customer Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ls,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),r.jsx("p",{className:"font-medium text-gray-900",children:s.name||"N/A"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ga,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),r.jsx("p",{className:"font-medium text-gray-900",children:s.phone})]})]}),s.email&&r.jsxs("div",{className:"flex items-center gap-3 col-span-2",children:[r.jsx(iw,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),r.jsx("p",{className:"font-medium text-gray-900",children:s.email})]})]})]})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[r.jsx(Td,{className:"h-4 w-4"}),"Requested Services (",s.services?.length||0,")"]}),r.jsx("div",{className:"space-y-2",children:s.services?.map((n,a)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:n.serviceName||n.serviceId?.name}),n.serviceId?.durationInDays&&r.jsxs("p",{className:"text-sm text-gray-500",children:[n.serviceId.durationInDays," days"]})]}),r.jsx("p",{className:"font-semibold text-gray-900",children:mD(n.price)})]},a))})]}),s.userNote&&r.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[r.jsx(dk,{className:"h-4 w-4"}),"User Note"]}),r.jsx("p",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg border border-blue-100",children:s.userNote})]}),s.status==="REJECTED"&&r.jsx("div",{className:"border-t border-gray-200 pt-4",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsxs("h3",{className:"text-sm font-medium text-red-800 mb-2 flex items-center gap-2",children:[r.jsx(Mt,{className:"h-4 w-4"}),"Rejection Details"]}),s.rejectionReason&&r.jsx("p",{className:"text-sm text-red-700",children:s.rejectionReason}),s.reviewedBy&&r.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Rejected by: ",s.reviewedBy.name||s.reviewedBy.username]}),s.reviewedAt&&r.jsxs("p",{className:"text-xs text-red-600",children:["Rejected at: ",c2(s.reviewedAt)]})]})}),s.status==="APPROVED"&&s.serviceOrderId&&r.jsx("div",{className:"border-t border-gray-200 pt-4",children:r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("h3",{className:"text-sm font-medium text-green-800 mb-2",children:"Approved"}),r.jsxs("p",{className:"text-sm text-green-700",children:["Order ID: ",s.serviceOrderId.orderId||s.serviceOrderId]}),s.reviewedBy&&r.jsxs("p",{className:"text-xs text-green-600 mt-2",children:["Approved by: ",s.reviewedBy.name||s.reviewedBy.username]}),s.reviewedAt&&r.jsxs("p",{className:"text-xs text-green-600",children:["Approved at: ",c2(s.reviewedAt)]})]})}),r.jsx("div",{className:"border-t border-gray-200 pt-4",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[r.jsx(jr,{className:"h-4 w-4"}),r.jsx("span",{children:"Requested:"}),r.jsx("span",{className:"text-gray-900",children:c2(s.createdAt)})]})}),r.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:r.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})}):null}function k0e(){const{hasRole:e}=mn(),t=e(["SUPER_ADMIN","ADMIN"]),{requests:s,pendingCount:n,pagination:a,filters:l,isLoading:u,error:f,getRequestById:m,approveRequest:x,rejectRequest:p,updateFilters:v,updateSearch:C,resetFilters:T,changePage:E,clearError:k}=N0e(),[O,M]=w.useState(!1),[L,P]=w.useState(!1),[H,B]=w.useState(!1),[F,R]=w.useState(null),[z,U]=w.useState(!1),[Y,$]=w.useState(null),[G,ee]=w.useState(null),ce=w.useCallback(async te=>{const X=await m(te._id);X.success&&(R(X.data),M(!0))},[m]),se=w.useCallback(te=>{R(te),$(null),ee(null),P(!0)},[]),J=w.useCallback(te=>{R(te),$(null),B(!0)},[]),ne=w.useCallback(async te=>{if(F){U(!0),$(null);try{const X=await x(F._id,te);X.success?ee(X.data):$(X.error)}finally{U(!1)}}},[F,x]),pe=w.useCallback(async te=>{if(F){U(!0),$(null);try{const X=await p(F._id,te);X.success?(B(!1),R(null)):$(X.error)}finally{U(!1)}}},[F,p]),be=w.useCallback(()=>{P(!1),R(null),$(null),ee(null)},[]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Service Requests"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Review and manage service requests from users"})]}),n>0&&r.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-100 text-amber-800 rounded-lg",children:[r.jsx("span",{className:"font-bold text-lg",children:n}),r.jsx("span",{className:"text-sm font-medium",children:"pending requests"})]})]}),f&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(Mt,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("p",{className:"flex-1",children:f}),r.jsx("button",{onClick:k,className:"text-red-500 hover:text-red-700 font-medium",children:"Dismiss"})]}),r.jsx(w0e,{filters:l,onFilterChange:v,onSearchChange:C,onReset:T,pendingCount:n,disabled:u}),r.jsx(A0e,{requests:s,isLoading:u,canReview:t,onView:ce,onApprove:se,onReject:J}),a.totalPages>0&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsx(Dr,{currentPage:a.currentPage,totalPages:a.totalPages,totalItems:a.totalCount,itemsPerPage:a.limit,onPageChange:E,itemLabel:"requests"})}),r.jsx(D0e,{isOpen:O,onClose:()=>{M(!1),R(null)},request:F}),r.jsx(E0e,{isOpen:L,onClose:be,onSubmit:ne,request:F,isLoading:z,serverError:Y,successData:G}),r.jsx(T0e,{isOpen:H,onClose:()=>{B(!1),R(null),$(null)},onSubmit:pe,request:F,isLoading:z,serverError:Y})]})}const zu={BASE:"/web/user-subscriptions",CHECK_STATUS:"/web/user-subscriptions/check-status"},_0e=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&n!==""&&t.append(s,n)}),t.toString()},Wh={getAll:async(e={})=>{const t=_0e(e),s=t?`${zu.BASE}?${t}`:zu.BASE;console.log("[UserSubscriptionService] Fetching subscriptions with params:",e);const n=await Te(Ee.get(s));return n.success?console.log("[UserSubscriptionService] Fetched subscriptions:",n.data.subscriptions?.length):console.error("[UserSubscriptionService] Failed to fetch subscriptions:",n.message),n},getById:async e=>{console.log("[UserSubscriptionService] Fetching subscription:",e);const t=await Te(Ee.get(`${zu.BASE}/${e}`));return t.success?console.log("[UserSubscriptionService] Fetched subscription:",t.data.subscription?._id):console.error("[UserSubscriptionService] Failed to fetch subscription:",t.message),t},checkStatus:async e=>{console.log("[UserSubscriptionService] Checking status for:",e.phone);const t=await Te(Ee.post(zu.CHECK_STATUS,e));return t.success?console.log("[UserSubscriptionService] Status checked:",t.data.hasActiveSubscription):console.error("[UserSubscriptionService] Failed to check status:",t.message),t},cancel:async(e,t)=>{console.log("[UserSubscriptionService] Cancelling subscription:",e);const s=await Te(Ee.post(`${zu.BASE}/${e}/cancel`,t));return s.success?console.log("[UserSubscriptionService] Subscription cancelled successfully"):console.error("[UserSubscriptionService] Failed to cancel subscription:",s.message),s},updateNotes:async(e,t)=>{console.log("[UserSubscriptionService] Updating notes for subscription:",e);const s=await Te(Ee.patch(`${zu.BASE}/${e}/notes`,t));return s.success?console.log("[UserSubscriptionService] Notes updated successfully"):console.error("[UserSubscriptionService] Failed to update notes:",s.message),s}},P0e=["ACTIVE","EXPIRED","CANCELLED","REFUNDED"],I0e=[{value:"createdAt",label:"Created Date"},{value:"startDate",label:"Start Date"},{value:"endDate",label:"End Date"},{value:"amountPaid",label:"Amount"}],gD={search:"",status:"",serviceId:"",phone:"",sortBy:"createdAt",sortOrder:"desc"};function M0e(e={}){const[t,s]=w.useState([]),[n,a]=w.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[l,u]=w.useState({...gD,...e}),[f,m]=w.useState(!1),[x,p]=w.useState(null),v=w.useRef(null),C=w.useCallback(async(R=n.currentPage)=>{m(!0),p(null);try{const z={page:R,limit:n.limit,sortBy:l.sortBy,sortOrder:l.sortOrder,...l.search&&{search:l.search},...l.status&&{status:l.status},...l.serviceId&&{serviceId:l.serviceId},...l.phone&&{phone:l.phone}},U=await Wh.getAll(z);U.success?(s(U.data.subscriptions||[]),a(U.data.pagination||n)):(p(U.message),s([]))}catch{p("Failed to fetch subscriptions"),s([])}finally{m(!1)}},[l,n.limit,n.currentPage]),T=w.useCallback(async R=>{try{const z=await Wh.getById(R);return z.success?{success:!0,data:z.data.subscription}:{success:!1,error:z.message}}catch{return{success:!1,error:"Failed to fetch subscription details"}}},[]),E=w.useCallback(async R=>{try{const z=await Wh.checkStatus(R);return z.success?{success:!0,data:z.data}:{success:!1,error:z.message}}catch{return{success:!1,error:"Failed to check subscription status"}}},[]),k=w.useCallback(async(R,z)=>{m(!0),p(null);try{const U=await Wh.cancel(R,z);return U.success?(s(Y=>Y.map($=>$._id===R?{...$,status:"CANCELLED",...U.data.subscription}:$)),{success:!0,data:U.data}):{success:!1,error:U.message}}catch{return{success:!1,error:"Failed to cancel subscription"}}finally{m(!1)}},[]),O=w.useCallback(async(R,z)=>{m(!0),p(null);try{const U=await Wh.updateNotes(R,z);return U.success?(s(Y=>Y.map($=>$._id===R?{...$,...U.data.subscription}:$)),{success:!0,data:U.data}):{success:!1,error:U.message}}catch{return{success:!1,error:"Failed to update notes"}}finally{m(!1)}},[]),M=w.useCallback(R=>{u(z=>({...z,...R}))},[]),L=w.useCallback(R=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{u(z=>({...z,search:R}))},300)},[]),P=w.useCallback(()=>{u({...gD,...e})},[e]),H=w.useCallback(R=>{C(R)},[C]),B=w.useCallback(R=>{a(z=>({...z,limit:R}))},[]),F=w.useCallback(()=>{p(null)},[]);return w.useEffect(()=>{C(1)},[l]),w.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{subscriptions:t,pagination:n,filters:l,isLoading:f,error:x,fetchSubscriptions:C,getSubscriptionById:T,checkStatus:E,cancelSubscription:k,updateNotes:O,updateFilters:M,updateSearch:L,resetFilters:P,changePage:H,changeLimit:B,clearError:F}}function R0e({filters:e,onFilterChange:t,onSearchChange:s,onReset:n,disabled:a=!1}){const[l,u]=w.useState(e.search||""),[f,m]=w.useState([]);w.useEffect(()=>{(async()=>{try{const E=await Tc.getAll({limit:100});E.success&&m(E.data.services||[])}catch(E){console.error("Failed to fetch services:",E)}})()},[]);const x=T=>{const E=T.target.value;u(E),s(E)},p=(T,E)=>{t({[T]:E})},v=()=>{u(""),n()},C=e.status||e.serviceId||e.phone;return r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[r.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by phone...",value:l,onChange:x,disabled:a,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),l&&r.jsx("button",{onClick:()=>{u(""),s("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(Kr,{className:"h-4 w-4"})})]}),r.jsxs("select",{value:e.status,onChange:T=>p("status",T.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"All Status"}),P0e.map(T=>r.jsx("option",{value:T,children:T.charAt(0)+T.slice(1).toLowerCase()},T))]}),r.jsxs("select",{value:e.serviceId,onChange:T=>p("serviceId",T.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"All Services"}),f.map(T=>r.jsx("option",{value:T._id,children:T.name},T._id))]}),r.jsx("select",{value:e.sortBy,onChange:T=>p("sortBy",T.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:I0e.map(T=>r.jsxs("option",{value:T.value,children:["Sort: ",T.label]},T.value))}),r.jsxs("select",{value:e.sortOrder,onChange:T=>p("sortOrder",T.target.value),disabled:a,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100",children:[r.jsx("option",{value:"desc",children:"Newest First"}),r.jsx("option",{value:"asc",children:"Oldest First"})]}),(C||l)&&r.jsxs("button",{onClick:v,disabled:a,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[r.jsx(Ro,{className:"h-4 w-4"}),"Reset"]})]})})}function L0e(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function xD(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function B0e(e){const t={ACTIVE:"bg-green-100 text-green-700",EXPIRED:"bg-gray-100 text-gray-600",CANCELLED:"bg-red-100 text-red-700",REFUNDED:"bg-purple-100 text-purple-700"};return t[e]||t.ACTIVE}function F0e(e){if(!e)return null;const n=new Date(e)-new Date;return Math.ceil(n/(1e3*60*60*24))}function U0e({subscriptions:e,isLoading:t,canCancel:s,canEditNotes:n,onView:a,onCancel:l,onEditNotes:u}){return t?r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(it,{className:"h-8 w-8 animate-spin text-gray-800"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading subscriptions..."})]})}):e.length===0?r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx("p",{className:"text-lg font-medium",children:"No subscriptions found"}),r.jsx("p",{className:"text-sm mt-1",children:"User subscriptions will appear here after successful payments."})]})}):r.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"User"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Service"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Amount"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Duration"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600",children:"Valid Until"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(f=>{const m=f.status==="ACTIVE"?F0e(f.endDate):null;return r.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 ${f.status==="CANCELLED"?"bg-red-50/30":""}`,children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:f.userId?.name||"N/A"}),r.jsx("p",{className:"text-sm text-gray-500",children:f.phone}),f.userId?.email&&r.jsx("p",{className:"text-xs text-gray-400 truncate",children:f.userId.email})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("p",{className:"font-medium text-gray-900 truncate max-w-[150px]",children:f.serviceId?.name||"N/A"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-medium text-gray-900",children:L0e(f.amountPaid)})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:"text-sm text-gray-600",children:[f.durationInDays," days"]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${B0e(f.status)}`,children:f.status}),m!==null&&m>0&&r.jsxs("p",{className:"text-xs text-gray-500",children:[m," days left"]}),m!==null&&m<=0&&f.status==="ACTIVE"&&r.jsx("p",{className:"text-xs text-amber-600",children:"Expiring soon"})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"text-gray-900",children:xD(f.endDate)}),r.jsxs("p",{className:"text-gray-500 text-xs",children:["From ",xD(f.startDate)]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx("button",{onClick:()=>a(f),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:r.jsx(Lr,{className:"h-4 w-4"})}),n&&r.jsx("button",{onClick:()=>u(f),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit Notes",children:r.jsx(Js,{className:"h-4 w-4"})}),f.status==="ACTIVE"&&s&&r.jsx("button",{onClick:()=>l(f),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Cancel Subscription",children:r.jsx(wr,{className:"h-4 w-4"})})]})})]},f._id)})})]})})})}function z0e(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function V0e(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function $0e({isOpen:e,onClose:t,onSubmit:s,subscription:n,isLoading:a=!1,serverError:l=null}){const[u,f]=w.useState(""),[m,x]=w.useState(null);w.useEffect(()=>{e&&(f(""),x(null))},[e]);const p=v=>{if(v.preventDefault(),!u.trim()){x("Please provide a reason for cancellation");return}s({reason:u.trim()})};return n?r.jsx(Lt,{isOpen:e,onClose:t,title:"Cancel Subscription",size:"md",children:r.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(Mt,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("p",{children:l})]}),r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(wr,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-800",children:"Cancel this subscription?"}),r.jsx("p",{className:"text-sm text-red-600 mt-1",children:"This action will immediately end the user's access to this service."})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ls,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:n.userId?.name||"N/A"}),r.jsx("p",{className:"text-sm text-gray-500",children:n.phone})]})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-3 flex items-center gap-3",children:[r.jsx(Td,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900",children:n.serviceId?.name||"N/A"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Valid until ",V0e(n.endDate)]})]}),r.jsx("p",{className:"font-semibold text-gray-900",children:z0e(n.amountPaid)})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Cancellation Reason ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{value:u,onChange:v=>{f(v.target.value),m&&x(null)},rows:3,className:`w-full px-4 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none ${m?"border-red-500":"border-gray-300"}`,placeholder:"Enter the reason for cancellation"}),m&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:m})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,disabled:a,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Keep Active"}),r.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:a?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-4 w-4 animate-spin"}),"Cancelling..."]}):"Cancel Subscription"})]})]})}):null}function q0e({isOpen:e,onClose:t,onSubmit:s,subscription:n,isLoading:a=!1,serverError:l=null}){const[u,f]=w.useState("");w.useEffect(()=>{e&&n&&f(n.adminNotes||"")},[e,n]);const m=x=>{x.preventDefault(),s({adminNotes:u.trim()})};return n?r.jsx(Lt,{isOpen:e,onClose:t,title:"Edit Admin Notes",size:"md",children:r.jsxs("form",{onSubmit:m,className:"space-y-6",children:[l&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(Mt,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("p",{children:l})]}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:n.userId?.name||n.phone}),r.jsx("p",{className:"text-sm text-gray-500",children:n.serviceId?.name||"N/A"})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.status==="ACTIVE"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:n.status})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Notes"}),r.jsx("textarea",{value:u,onChange:x=>f(x.target.value),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none",placeholder:"Add internal notes about this subscription..."}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"These notes are only visible to admins"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,disabled:a,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center gap-2",children:a?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):"Save Notes"})]})]})}):null}function pD(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function Kh(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function H0e(e){const t={ACTIVE:"bg-green-100 text-green-700",EXPIRED:"bg-gray-100 text-gray-600",CANCELLED:"bg-red-100 text-red-700",REFUNDED:"bg-purple-100 text-purple-700"};return t[e]||t.ACTIVE}function G0e(e){if(!e)return null;const n=new Date(e)-new Date;return Math.ceil(n/(1e3*60*60*24))}function Y0e({isOpen:e,onClose:t,subscription:s}){if(!s)return null;const n=s.status==="ACTIVE"?G0e(s.endDate):null;return r.jsx(Lt,{isOpen:e,onClose:t,title:"Subscription Details",size:"xl",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${H0e(s.status)}`,children:s.status}),n!==null&&n>0&&r.jsxs("span",{className:"text-sm text-gray-500",children:[n," days remaining"]})]}),r.jsx("div",{className:"text-right",children:r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:pD(s.amountPaid)})})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"User Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ls,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),r.jsx("p",{className:"font-medium text-gray-900",children:s.userId?.name||"N/A"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ga,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),r.jsx("p",{className:"font-medium text-gray-900",children:s.phone})]})]}),s.userId?.email&&r.jsxs("div",{className:"flex items-center gap-3 col-span-2",children:[r.jsx(iw,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),r.jsx("p",{className:"font-medium text-gray-900",children:s.userId.email})]})]})]})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[r.jsx(Td,{className:"h-4 w-4"}),"Service Details"]}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:s.serviceId?.name||"N/A"}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s.durationInDays," days subscription"]})]}),r.jsx("p",{className:"font-bold text-gray-900",children:pD(s.serviceId?.price||s.amountPaid)})]})})]}),s.serviceOrderId&&r.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[r.jsx(tp,{className:"h-4 w-4"}),"Order Information"]}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:r.jsx("div",{className:"grid grid-cols-2 gap-4 text-sm",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Order ID"}),r.jsx("p",{className:"font-mono font-medium text-gray-900",children:s.serviceOrderId.orderId||s.serviceOrderId})]})})})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[r.jsx(fr,{className:"h-4 w-4"}),"Timeline"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Start Date"}),r.jsx("p",{className:"font-medium text-gray-900",children:Kh(s.startDate)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"End Date"}),r.jsx("p",{className:"font-medium text-gray-900",children:Kh(s.endDate)})]}),s.activatedAt&&r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Activated At"}),r.jsx("p",{className:"font-medium text-gray-900",children:Kh(s.activatedAt)})]}),s.cancelledAt&&r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Cancelled At"}),r.jsx("p",{className:"font-medium text-red-600",children:Kh(s.cancelledAt)})]})]})]}),s.status==="CANCELLED"&&s.cancellationReason&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800 mb-2",children:"Cancellation Reason"}),r.jsx("p",{className:"text-sm text-red-700",children:s.cancellationReason}),s.cancelledBy&&r.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Cancelled by: ",s.cancelledBy.name||s.cancelledBy.username]})]}),s.adminNotes&&r.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[r.jsx(ad,{className:"h-4 w-4"}),"Admin Notes"]}),r.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:s.adminNotes})]}),r.jsx("div",{className:"border-t border-gray-200 pt-4",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[r.jsx(jr,{className:"h-4 w-4"}),r.jsx("span",{children:"Created:"}),r.jsx("span",{className:"text-gray-900",children:Kh(s.createdAt)})]})}),r.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:r.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})})}function X0e(){const{hasRole:e}=mn(),t=e(["SUPER_ADMIN","ADMIN"]),s=e(["SUPER_ADMIN","ADMIN"]),{subscriptions:n,pagination:a,filters:l,isLoading:u,error:f,getSubscriptionById:m,cancelSubscription:x,updateNotes:p,updateFilters:v,updateSearch:C,resetFilters:T,changePage:E,clearError:k}=M0e(),[O,M]=w.useState(!1),[L,P]=w.useState(!1),[H,B]=w.useState(!1),[F,R]=w.useState(null),[z,U]=w.useState(!1),[Y,$]=w.useState(null),G=w.useCallback(async ne=>{const pe=await m(ne._id);pe.success&&(R(pe.data),M(!0))},[m]),ee=w.useCallback(ne=>{R(ne),$(null),P(!0)},[]),ce=w.useCallback(ne=>{R(ne),$(null),B(!0)},[]),se=w.useCallback(async ne=>{if(F){U(!0),$(null);try{const pe=await x(F._id,ne);pe.success?(P(!1),R(null)):$(pe.error)}finally{U(!1)}}},[F,x]),J=w.useCallback(async ne=>{if(F){U(!0),$(null);try{const pe=await p(F._id,ne);pe.success?(B(!1),R(null)):$(pe.error)}finally{U(!1)}}},[F,p]);return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Subscriptions"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"View and manage user service subscriptions"})]})}),f&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:[r.jsx(Mt,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("p",{className:"flex-1",children:f}),r.jsx("button",{onClick:k,className:"text-red-500 hover:text-red-700 font-medium",children:"Dismiss"})]}),r.jsx(R0e,{filters:l,onFilterChange:v,onSearchChange:C,onReset:T,disabled:u}),r.jsx(U0e,{subscriptions:n,isLoading:u,canCancel:t,canEditNotes:s,onView:G,onCancel:ee,onEditNotes:ce}),a.totalPages>0&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:r.jsx(Dr,{currentPage:a.currentPage,totalPages:a.totalPages,totalItems:a.totalCount,itemsPerPage:a.limit,onPageChange:E,itemLabel:"subscriptions"})}),r.jsx(Y0e,{isOpen:O,onClose:()=>{M(!1),R(null)},subscription:F}),r.jsx($0e,{isOpen:L,onClose:()=>{P(!1),R(null),$(null)},onSubmit:se,subscription:F,isLoading:z,serverError:Y}),r.jsx(q0e,{isOpen:H,onClose:()=>{B(!1),R(null),$(null)},onSubmit:J,subscription:F,isLoading:z,serverError:Y})]})}function W0e(){const[e,t]=w.useState(!1),[s,n]=w.useState([]),[a,l]=w.useState({name:"Premium Coaching - Direct",description:"Instant access premium coaching service for testing direct purchase flow",shortDescription:"Instant access coaching",price:999,compareAtPrice:1499,durationInDays:30,category:"COACHING",perks:["Immediate activation","Direct payment link","No approval needed"],displayOrder:1,isFeatured:!0,isActive:!0,requiresApproval:!1}),[u,f]=w.useState({name:"VIP Consultation - Admin Approved",description:"Exclusive VIP consultation requiring admin approval before purchase",shortDescription:"Admin-approved VIP service",price:2999,compareAtPrice:3999,durationInDays:60,category:"CONSULTATION",perks:["Admin review required","Payment link sent after approval","Premium access"],displayOrder:2,isFeatured:!0,isActive:!0,requiresApproval:!0}),m=async(E,k)=>{t(!0);const O=Date.now();try{const M=await fetch("https://motivata.synquic.com/api/web/services",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(E)}),L=await M.json(),P=Date.now()-O,H={id:Date.now(),type:k,timestamp:new Date().toISOString(),duration:`${P}ms`,status:M.ok?"success":"error",statusCode:M.status,data:L};return n(B=>[H,...B]),M.ok?(dt.success(` ${k} created successfully!`),{success:!0,data:L}):(dt.error(` Failed to create ${k}`),{success:!1,error:L})}catch(M){const L=Date.now()-O,P={id:Date.now(),type:k,timestamp:new Date().toISOString(),duration:`${L}ms`,status:"error",error:M.message};return n(H=>[P,...H]),dt.error(` Network error: ${M.message}`),{success:!1,error:M}}finally{t(!1)}},x=async()=>{await m(a,"Direct Purchase Service")},p=async()=>{await m(u,"Admin Approval Service")},v=async()=>{dt.info(" Running both test flows..."),await x(),await new Promise(E=>setTimeout(E,1e3)),await p(),dt.success(" All tests completed!")},C=()=>{n([]),dt.info(" Test results cleared")},T=E=>{switch(E){case"success":return r.jsx(ls,{className:"w-5 h-5 text-green-500"});case"error":return r.jsx(Mt,{className:"w-5 h-5 text-red-500"});default:return r.jsx(jr,{className:"w-5 h-5 text-yellow-500"})}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Service Flow Testing"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Test direct purchase and admin-approved service creation flows"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200 rounded-xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-3 bg-green-500 rounded-lg",children:r.jsx(gV,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-gray-900",children:"Direct Purchase"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Instant payment flow"})]})]}),r.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[r.jsxs("p",{className:"text-gray-700",children:[r.jsx("span",{className:"font-semibold",children:"Price:"})," ",a.price]}),r.jsxs("p",{className:"text-gray-700",children:[r.jsx("span",{className:"font-semibold",children:"Duration:"})," ",a.durationInDays," days"]}),r.jsxs("p",{className:"text-gray-700",children:[r.jsx("span",{className:"font-semibold",children:"Requires Approval:"}),"  No"]})]}),r.jsx("button",{onClick:x,disabled:e,className:"w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:e?"Testing...":"Test Direct Purchase"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 border-2 border-amber-200 rounded-xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-3 bg-amber-500 rounded-lg",children:r.jsx(jr,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-gray-900",children:"Admin Approval"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Request & approve flow"})]})]}),r.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[r.jsxs("p",{className:"text-gray-700",children:[r.jsx("span",{className:"font-semibold",children:"Price:"})," ",u.price]}),r.jsxs("p",{className:"text-gray-700",children:[r.jsx("span",{className:"font-semibold",children:"Duration:"})," ",u.durationInDays," days"]}),r.jsxs("p",{className:"text-gray-700",children:[r.jsx("span",{className:"font-semibold",children:"Requires Approval:"}),"  Yes"]})]}),r.jsx("button",{onClick:p,disabled:e,className:"w-full px-4 py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:e?"Testing...":"Test Admin Approval"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200 rounded-xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-3 bg-purple-500 rounded-lg",children:r.jsx(qs,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-gray-900",children:"Run All Tests"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Sequential test run"})]})]}),r.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[r.jsx("p",{className:"text-gray-700",children:" Creates direct purchase service"}),r.jsx("p",{className:"text-gray-700",children:" Creates admin approval service"}),r.jsx("p",{className:"text-gray-700",children:" Logs all results below"})]}),r.jsx("button",{onClick:v,disabled:e,className:"w-full px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:e?"Running Tests...":"Run Both Tests"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Test Results"}),r.jsxs("p",{className:"text-sm text-gray-600",children:[s.length," test",s.length!==1?"s":""," run"]})]}),s.length>0&&r.jsx("button",{onClick:C,className:"px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Clear Results"})]}),r.jsx("div",{className:"p-4",children:s.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Mt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No test results yet"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Run a test to see results here"})]}):r.jsx("div",{className:"space-y-4",children:s.map(E=>r.jsxs("div",{className:`border-2 rounded-lg p-4 ${E.status==="success"?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[T(E.status),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:E.type}),r.jsxs("p",{className:"text-xs text-gray-600",children:[new Date(E.timestamp).toLocaleString(),"  ",E.duration]})]})]}),r.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${E.status==="success"?"bg-green-200 text-green-800":"bg-red-200 text-red-800"}`,children:E.statusCode||E.status.toUpperCase()})]}),r.jsxs("details",{className:"mt-3",children:[r.jsx("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-gray-900",children:"View Response Data"}),r.jsx("pre",{className:"mt-2 p-3 bg-gray-900 text-green-400 rounded-lg text-xs overflow-x-auto",children:JSON.stringify(E.data||E.error,null,2)})]}),E.data?.data?.service&&r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Created Service"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"ID:"})," ",r.jsx("span",{className:"font-mono text-gray-900",children:E.data.data.service._id})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Name:"})," ",r.jsx("span",{className:"text-gray-900",children:E.data.data.service.name})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Price:"})," ",r.jsxs("span",{className:"text-gray-900",children:["",E.data.data.service.price]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Requires Approval:"})," ",r.jsx("span",{className:"text-gray-900",children:E.data.data.service.requiresApproval?" Yes":" No"})]})]})]})]},E.id))})})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-4",children:" Testing Guide"}),r.jsxs("div",{className:"space-y-4 text-sm text-blue-900",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Direct Purchase Flow:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800 ml-2",children:[r.jsxs("li",{children:["Service with ",r.jsx("code",{className:"px-1 py-0.5 bg-blue-100 rounded",children:"requiresApproval: false"})]}),r.jsx("li",{children:"Users can purchase immediately with payment link"}),r.jsx("li",{children:"No admin intervention required"}),r.jsx("li",{children:"Instant subscription activation"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Admin Approval Flow:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800 ml-2",children:[r.jsxs("li",{children:["Service with ",r.jsx("code",{className:"px-1 py-0.5 bg-blue-100 rounded",children:"requiresApproval: true"})]}),r.jsx("li",{children:"Users submit service request"}),r.jsx("li",{children:"Admin reviews and approves/rejects"}),r.jsx("li",{children:"Payment link sent after approval"}),r.jsx("li",{children:"Subscription activated after payment"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:"What This Tests:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800 ml-2",children:[r.jsxs("li",{children:["Service creation endpoint (",r.jsx("code",{className:"px-1 py-0.5 bg-blue-100 rounded",children:"POST /web/services"}),")"]}),r.jsx("li",{children:"Both purchase flow configurations"}),r.jsx("li",{children:"Response time and status codes"}),r.jsx("li",{children:"Data validation and error handling"})]})]})]})]})]})}function K0e(){return r.jsx(MB,{children:r.jsx(vU,{children:r.jsxs(hB,{children:[r.jsx(ar,{path:"/login",element:r.jsx(wU,{children:r.jsx(JV,{})})}),r.jsxs(ar,{element:r.jsx(NU,{children:r.jsx(QV,{})}),children:[r.jsx(ar,{path:"/dashboard",element:r.jsx(Rue,{})}),r.jsx(ar,{path:"/events",element:r.jsx(Jue,{})}),r.jsx(ar,{path:"/enrollments",element:r.jsx(ede,{})}),r.jsx(ar,{path:"/coupons",element:r.jsx(tde,{})}),r.jsx(ar,{path:"/users",element:r.jsx(lde,{})}),r.jsx(ar,{path:"/admins",element:r.jsx(Nde,{})}),r.jsx(ar,{path:"/payments",element:r.jsx(wde,{})}),r.jsx(ar,{path:"/cash-tickets",element:r.jsx(Bde,{})}),r.jsx(ar,{path:"/vouchers",element:r.jsx(qde,{})}),r.jsx(ar,{path:"/sessions",element:r.jsx(the,{})}),r.jsx(ar,{path:"/quizes",element:r.jsx(fhe,{})}),r.jsx(ar,{path:"/challenges",element:r.jsx(Nhe,{})}),r.jsx(ar,{path:"/polls",element:r.jsx(khe,{})}),r.jsx(ar,{path:"/stories",element:r.jsx(Whe,{})}),r.jsx(ar,{path:"/memberships",element:r.jsx(Ife,{})}),r.jsx(ar,{path:"/membership-requests",element:r.jsx(Bfe,{})}),r.jsx(ar,{path:"/settings",element:r.jsx(Gfe,{})}),r.jsx(ar,{path:"/feature-access",element:r.jsx(Yfe,{})}),r.jsx(ar,{path:"/clubs",element:r.jsx(Ffe,{})}),r.jsx(ar,{path:"/club-join-requests",element:r.jsx(Vfe,{})}),r.jsx(ar,{path:"/admin-club-posts",element:r.jsx(Hfe,{})}),r.jsx(ar,{path:"/scan-qr",element:r.jsx(jfe,{})}),r.jsx(ar,{path:"/ticket-reshare",element:r.jsx(Ofe,{})}),r.jsx(ar,{path:"/services",element:r.jsx(r0e,{})}),r.jsx(ar,{path:"/service-orders",element:r.jsx(p0e,{})}),r.jsx(ar,{path:"/service-requests",element:r.jsx(k0e,{})}),r.jsx(ar,{path:"/user-subscriptions",element:r.jsx(X0e,{})}),r.jsx(ar,{path:"/test-services",element:r.jsx(W0e,{})})]}),r.jsx(ar,{path:"/",element:r.jsx(Bg,{to:"/dashboard",replace:!0})}),r.jsx(ar,{path:"*",element:r.jsx(Bg,{to:"/dashboard",replace:!0})})]})})})}yL.createRoot(document.getElementById("root")).render(r.jsx(w.StrictMode,{children:r.jsx(K0e,{})}));
