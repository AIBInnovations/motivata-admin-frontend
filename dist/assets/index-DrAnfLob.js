function ZO(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ki(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lx={exports:{}},Ot={};var jC;function I9(){if(jC)return Ot;jC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),C=Symbol.iterator;function _(K){return K===null||typeof K!="object"?null:(K=C&&K[C]||K["@@iterator"],typeof K=="function"?K:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,M={};function R(K,ee,fe){this.props=K,this.context=ee,this.refs=M,this.updater=fe||D}R.prototype.isReactComponent={},R.prototype.setState=function(K,ee){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ee,"setState")},R.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function F(){}F.prototype=R.prototype;function I(K,ee,fe){this.props=K,this.context=ee,this.refs=M,this.updater=fe||D}var G=I.prototype=new F;G.constructor=I,k(G,R.prototype),G.isPureReactComponent=!0;var U=Array.isArray;function z(){}var L={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function V(K,ee,fe){var ce=fe.ref;return{$$typeof:e,type:K,key:ee,ref:ce!==void 0?ce:null,props:fe}}function Q(K,ee){return V(K.type,ee,K.props)}function Y(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function X(K){var ee={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(fe){return ee[fe]})}var he=/\/+/g;function xe(K,ee){return typeof K=="object"&&K!==null&&K.key!=null?X(""+K.key):ee.toString(36)}function ae(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(z,z):(K.status="pending",K.then(function(ee){K.status==="pending"&&(K.status="fulfilled",K.value=ee)},function(ee){K.status==="pending"&&(K.status="rejected",K.reason=ee)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function ne(K,ee,fe,ce,Se){var ie=typeof K;(ie==="undefined"||ie==="boolean")&&(K=null);var oe=!1;if(K===null)oe=!0;else switch(ie){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(K.$$typeof){case e:case t:oe=!0;break;case y:return oe=K._init,ne(oe(K._payload),ee,fe,ce,Se)}}if(oe)return Se=Se(K),oe=ce===""?"."+xe(K,0):ce,U(Se)?(fe="",oe!=null&&(fe=oe.replace(he,"$&/")+"/"),ne(Se,ee,fe,"",function(We){return We})):Se!=null&&(Y(Se)&&(Se=Q(Se,fe+(Se.key==null||K&&K.key===Se.key?"":(""+Se.key).replace(he,"$&/")+"/")+oe)),ee.push(Se)),1;oe=0;var He=ce===""?".":ce+":";if(U(K))for(var ve=0;ve<K.length;ve++)ce=K[ve],ie=He+xe(ce,ve),oe+=ne(ce,ee,fe,ie,Se);else if(ve=_(K),typeof ve=="function")for(K=ve.call(K),ve=0;!(ce=K.next()).done;)ce=ce.value,ie=He+xe(ce,ve++),oe+=ne(ce,ee,fe,ie,Se);else if(ie==="object"){if(typeof K.then=="function")return ne(ae(K),ee,fe,ce,Se);throw ee=String(K),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return oe}function se(K,ee,fe){if(K==null)return K;var ce=[],Se=0;return ne(K,ce,"","",function(ie){return ee.call(fe,ie,Se++)}),ce}function Te(K){if(K._status===-1){var ee=K._result;ee=ee(),ee.then(function(fe){(K._status===0||K._status===-1)&&(K._status=1,K._result=fe)},function(fe){(K._status===0||K._status===-1)&&(K._status=2,K._result=fe)}),K._status===-1&&(K._status=0,K._result=ee)}if(K._status===1)return K._result.default;throw K._result}var we=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},te={map:se,forEach:function(K,ee,fe){se(K,function(){ee.apply(this,arguments)},fe)},count:function(K){var ee=0;return se(K,function(){ee++}),ee},toArray:function(K){return se(K,function(ee){return ee})||[]},only:function(K){if(!Y(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return Ot.Activity=w,Ot.Children=te,Ot.Component=R,Ot.Fragment=r,Ot.Profiler=i,Ot.PureComponent=I,Ot.StrictMode=n,Ot.Suspense=h,Ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Ot.__COMPILER_RUNTIME={__proto__:null,c:function(K){return L.H.useMemoCache(K)}},Ot.cache=function(K){return function(){return K.apply(null,arguments)}},Ot.cacheSignal=function(){return null},Ot.cloneElement=function(K,ee,fe){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var ce=k({},K.props),Se=K.key;if(ee!=null)for(ie in ee.key!==void 0&&(Se=""+ee.key),ee)!H.call(ee,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&ee.ref===void 0||(ce[ie]=ee[ie]);var ie=arguments.length-2;if(ie===1)ce.children=fe;else if(1<ie){for(var oe=Array(ie),He=0;He<ie;He++)oe[He]=arguments[He+2];ce.children=oe}return V(K.type,Se,ce)},Ot.createContext=function(K){return K={$$typeof:d,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:o,_context:K},K},Ot.createElement=function(K,ee,fe){var ce,Se={},ie=null;if(ee!=null)for(ce in ee.key!==void 0&&(ie=""+ee.key),ee)H.call(ee,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Se[ce]=ee[ce]);var oe=arguments.length-2;if(oe===1)Se.children=fe;else if(1<oe){for(var He=Array(oe),ve=0;ve<oe;ve++)He[ve]=arguments[ve+2];Se.children=He}if(K&&K.defaultProps)for(ce in oe=K.defaultProps,oe)Se[ce]===void 0&&(Se[ce]=oe[ce]);return V(K,ie,Se)},Ot.createRef=function(){return{current:null}},Ot.forwardRef=function(K){return{$$typeof:g,render:K}},Ot.isValidElement=Y,Ot.lazy=function(K){return{$$typeof:y,_payload:{_status:-1,_result:K},_init:Te}},Ot.memo=function(K,ee){return{$$typeof:x,type:K,compare:ee===void 0?null:ee}},Ot.startTransition=function(K){var ee=L.T,fe={};L.T=fe;try{var ce=K(),Se=L.S;Se!==null&&Se(fe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(z,we)}catch(ie){we(ie)}finally{ee!==null&&fe.types!==null&&(ee.types=fe.types),L.T=ee}},Ot.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Ot.use=function(K){return L.H.use(K)},Ot.useActionState=function(K,ee,fe){return L.H.useActionState(K,ee,fe)},Ot.useCallback=function(K,ee){return L.H.useCallback(K,ee)},Ot.useContext=function(K){return L.H.useContext(K)},Ot.useDebugValue=function(){},Ot.useDeferredValue=function(K,ee){return L.H.useDeferredValue(K,ee)},Ot.useEffect=function(K,ee){return L.H.useEffect(K,ee)},Ot.useEffectEvent=function(K){return L.H.useEffectEvent(K)},Ot.useId=function(){return L.H.useId()},Ot.useImperativeHandle=function(K,ee,fe){return L.H.useImperativeHandle(K,ee,fe)},Ot.useInsertionEffect=function(K,ee){return L.H.useInsertionEffect(K,ee)},Ot.useLayoutEffect=function(K,ee){return L.H.useLayoutEffect(K,ee)},Ot.useMemo=function(K,ee){return L.H.useMemo(K,ee)},Ot.useOptimistic=function(K,ee){return L.H.useOptimistic(K,ee)},Ot.useReducer=function(K,ee,fe){return L.H.useReducer(K,ee,fe)},Ot.useRef=function(K){return L.H.useRef(K)},Ot.useState=function(K){return L.H.useState(K)},Ot.useSyncExternalStore=function(K,ee,fe){return L.H.useSyncExternalStore(K,ee,fe)},Ot.useTransition=function(){return L.H.useTransition()},Ot.version="19.2.0",Ot}var zC;function td(){return zC||(zC=1,lx.exports=I9()),lx.exports}var N=td();const a=ki(N),L9=ZO({__proto__:null,default:a},[N]);var ox={exports:{}},lf={},cx={exports:{}},ux={};var VC;function B9(){return VC||(VC=1,(function(e){function t(ne,se){var Te=ne.length;ne.push(se);e:for(;0<Te;){var we=Te-1>>>1,te=ne[we];if(0<i(te,se))ne[we]=se,ne[Te]=te,Te=we;else break e}}function r(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var se=ne[0],Te=ne.pop();if(Te!==se){ne[0]=Te;e:for(var we=0,te=ne.length,K=te>>>1;we<K;){var ee=2*(we+1)-1,fe=ne[ee],ce=ee+1,Se=ne[ce];if(0>i(fe,Te))ce<te&&0>i(Se,fe)?(ne[we]=Se,ne[ce]=Te,we=ce):(ne[we]=fe,ne[ee]=Te,we=ee);else if(ce<te&&0>i(Se,Te))ne[we]=Se,ne[ce]=Te,we=ce;else break e}}return se}function i(ne,se){var Te=ne.sortIndex-se.sortIndex;return Te!==0?Te:ne.id-se.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var d=Date,g=d.now();e.unstable_now=function(){return d.now()-g}}var h=[],x=[],y=1,w=null,C=3,_=!1,D=!1,k=!1,M=!1,R=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function G(ne){for(var se=r(x);se!==null;){if(se.callback===null)n(x);else if(se.startTime<=ne)n(x),se.sortIndex=se.expirationTime,t(h,se);else break;se=r(x)}}function U(ne){if(k=!1,G(ne),!D)if(r(h)!==null)D=!0,z||(z=!0,X());else{var se=r(x);se!==null&&ae(U,se.startTime-ne)}}var z=!1,L=-1,H=5,V=-1;function Q(){return M?!0:!(e.unstable_now()-V<H)}function Y(){if(M=!1,z){var ne=e.unstable_now();V=ne;var se=!0;try{e:{D=!1,k&&(k=!1,F(L),L=-1),_=!0;var Te=C;try{t:{for(G(ne),w=r(h);w!==null&&!(w.expirationTime>ne&&Q());){var we=w.callback;if(typeof we=="function"){w.callback=null,C=w.priorityLevel;var te=we(w.expirationTime<=ne);if(ne=e.unstable_now(),typeof te=="function"){w.callback=te,G(ne),se=!0;break t}w===r(h)&&n(h),G(ne)}else n(h);w=r(h)}if(w!==null)se=!0;else{var K=r(x);K!==null&&ae(U,K.startTime-ne),se=!1}}break e}finally{w=null,C=Te,_=!1}se=void 0}}finally{se?X():z=!1}}}var X;if(typeof I=="function")X=function(){I(Y)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,xe=he.port2;he.port1.onmessage=Y,X=function(){xe.postMessage(null)}}else X=function(){R(Y,0)};function ae(ne,se){L=R(function(){ne(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_next=function(ne){switch(C){case 1:case 2:case 3:var se=3;break;default:se=C}var Te=C;C=se;try{return ne()}finally{C=Te}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(ne,se){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var Te=C;C=ne;try{return se()}finally{C=Te}},e.unstable_scheduleCallback=function(ne,se,Te){var we=e.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?we+Te:we):Te=we,ne){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Te+te,ne={id:y++,callback:se,priorityLevel:ne,startTime:Te,expirationTime:te,sortIndex:-1},Te>we?(ne.sortIndex=Te,t(x,ne),r(h)===null&&ne===r(x)&&(k?(F(L),L=-1):k=!0,ae(U,Te-we))):(ne.sortIndex=te,t(h,ne),D||_||(D=!0,z||(z=!0,X()))),ne},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(ne){var se=C;return function(){var Te=C;C=se;try{return ne.apply(this,arguments)}finally{C=Te}}}})(ux)),ux}var HC;function F9(){return HC||(HC=1,cx.exports=B9()),cx.exports}var dx={exports:{}},ea={};var qC;function U9(){if(qC)return ea;qC=1;var e=td();function t(h){var x="https://react.dev/errors/"+h;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)x+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(h,x,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:w==null?null:""+w,children:h,containerInfo:x,implementation:y}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(h,x){if(h==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return ea.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ea.createPortal=function(h,x){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(t(299));return o(h,x,null,y)},ea.flushSync=function(h){var x=d.T,y=n.p;try{if(d.T=null,n.p=2,h)return h()}finally{d.T=x,n.p=y,n.d.f()}},ea.preconnect=function(h,x){typeof h=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,n.d.C(h,x))},ea.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},ea.preinit=function(h,x){if(typeof h=="string"&&x&&typeof x.as=="string"){var y=x.as,w=g(y,x.crossOrigin),C=typeof x.integrity=="string"?x.integrity:void 0,_=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;y==="style"?n.d.S(h,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:C,fetchPriority:_}):y==="script"&&n.d.X(h,{crossOrigin:w,integrity:C,fetchPriority:_,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},ea.preinitModule=function(h,x){if(typeof h=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var y=g(x.as,x.crossOrigin);n.d.M(h,{crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&n.d.M(h)},ea.preload=function(h,x){if(typeof h=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var y=x.as,w=g(y,x.crossOrigin);n.d.L(h,y,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},ea.preloadModule=function(h,x){if(typeof h=="string")if(x){var y=g(x.as,x.crossOrigin);n.d.m(h,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else n.d.m(h)},ea.requestFormReset=function(h){n.d.r(h)},ea.unstable_batchedUpdates=function(h,x){return h(x)},ea.useFormState=function(h,x,y){return d.H.useFormState(h,x,y)},ea.useFormStatus=function(){return d.H.useHostTransitionStatus()},ea.version="19.2.0",ea}var $C;function QO(){if($C)return dx.exports;$C=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),dx.exports=U9(),dx.exports}var GC;function j9(){if(GC)return lf;GC=1;var e=F9(),t=td(),r=QO();function n(s){var c="https://react.dev/errors/"+s;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+s+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var c=s,m=s;if(s.alternate)for(;c.return;)c=c.return;else{s=c;do c=s,(c.flags&4098)!==0&&(m=c.return),s=c.return;while(s)}return c.tag===3?m:null}function d(s){if(s.tag===13){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function g(s){if(s.tag===31){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(n(188))}function x(s){var c=s.alternate;if(!c){if(c=o(s),c===null)throw Error(n(188));return c!==s?null:s}for(var m=s,v=c;;){var A=m.return;if(A===null)break;var O=A.alternate;if(O===null){if(v=A.return,v!==null){m=v;continue}break}if(A.child===O.child){for(O=A.child;O;){if(O===m)return h(A),s;if(O===v)return h(A),c;O=O.sibling}throw Error(n(188))}if(m.return!==v.return)m=A,v=O;else{for(var j=!1,Z=A.child;Z;){if(Z===m){j=!0,m=A,v=O;break}if(Z===v){j=!0,v=A,m=O;break}Z=Z.sibling}if(!j){for(Z=O.child;Z;){if(Z===m){j=!0,m=O,v=A;break}if(Z===v){j=!0,v=O,m=A;break}Z=Z.sibling}if(!j)throw Error(n(189))}}if(m.alternate!==v)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?s:c}function y(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s;for(s=s.child;s!==null;){if(c=y(s),c!==null)return c;s=s.sibling}return null}var w=Object.assign,C=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),I=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function X(s){return s===null||typeof s!="object"?null:(s=Y&&s[Y]||s["@@iterator"],typeof s=="function"?s:null)}var he=Symbol.for("react.client.reference");function xe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===he?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case k:return"Fragment";case R:return"Profiler";case M:return"StrictMode";case U:return"Suspense";case z:return"SuspenseList";case V:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case D:return"Portal";case I:return s.displayName||"Context";case F:return(s._context.displayName||"Context")+".Consumer";case G:var c=s.render;return s=s.displayName,s||(s=c.displayName||c.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return c=s.displayName||null,c!==null?c:xe(s.type)||"Memo";case H:c=s._payload,s=s._init;try{return xe(s(c))}catch{}}return null}var ae=Array.isArray,ne=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},we=[],te=-1;function K(s){return{current:s}}function ee(s){0>te||(s.current=we[te],we[te]=null,te--)}function fe(s,c){te++,we[te]=s.current,s.current=c}var ce=K(null),Se=K(null),ie=K(null),oe=K(null);function He(s,c){switch(fe(ie,c),fe(Se,s),fe(ce,null),c.nodeType){case 9:case 11:s=(s=c.documentElement)&&(s=s.namespaceURI)?cC(s):0;break;default:if(s=c.tagName,c=c.namespaceURI)c=cC(c),s=uC(c,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(ce),fe(ce,s)}function ve(){ee(ce),ee(Se),ee(ie)}function We(s){s.memoizedState!==null&&fe(oe,s);var c=ce.current,m=uC(c,s.type);c!==m&&(fe(Se,s),fe(ce,m))}function be(s){Se.current===s&&(ee(ce),ee(Se)),oe.current===s&&(ee(oe),rf._currentValue=Te)}var ye,je;function Ze(s){if(ye===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);ye=c&&c[1]||"",je=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+s+je}var Ie=!1;function ut(s,c){if(!s||Ie)return"";Ie=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(c){var qe=function(){throw Error()};if(Object.defineProperty(qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qe,[])}catch(Pe){var Oe=Pe}Reflect.construct(s,[],qe)}else{try{qe.call()}catch(Pe){Oe=Pe}s.call(qe.prototype)}}else{try{throw Error()}catch(Pe){Oe=Pe}(qe=s())&&typeof qe.catch=="function"&&qe.catch(function(){})}}catch(Pe){if(Pe&&Oe&&typeof Pe.stack=="string")return[Pe.stack,Oe.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=v.DetermineComponentFrameRoot(),j=O[0],Z=O[1];if(j&&Z){var le=j.split(`
`),Ae=Z.split(`
`);for(A=v=0;v<le.length&&!le[v].includes("DetermineComponentFrameRoot");)v++;for(;A<Ae.length&&!Ae[A].includes("DetermineComponentFrameRoot");)A++;if(v===le.length||A===Ae.length)for(v=le.length-1,A=Ae.length-1;1<=v&&0<=A&&le[v]!==Ae[A];)A--;for(;1<=v&&0<=A;v--,A--)if(le[v]!==Ae[A]){if(v!==1||A!==1)do if(v--,A--,0>A||le[v]!==Ae[A]){var ze=`
`+le[v].replace(" at new "," at ");return s.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",s.displayName)),ze}while(1<=v&&0<=A);break}}}finally{Ie=!1,Error.prepareStackTrace=m}return(m=s?s.displayName||s.name:"")?Ze(m):""}function Le(s,c){switch(s.tag){case 26:case 27:case 5:return Ze(s.type);case 16:return Ze("Lazy");case 13:return s.child!==c&&c!==null?Ze("Suspense Fallback"):Ze("Suspense");case 19:return Ze("SuspenseList");case 0:case 15:return ut(s.type,!1);case 11:return ut(s.type.render,!1);case 1:return ut(s.type,!0);case 31:return Ze("Activity");default:return""}}function et(s){try{var c="",m=null;do c+=Le(s,m),m=s,s=s.return;while(s);return c}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var mt=Object.prototype.hasOwnProperty,Er=e.unstable_scheduleCallback,tt=e.unstable_cancelCallback,nt=e.unstable_shouldYield,Re=e.unstable_requestPaint,Be=e.unstable_now,St=e.unstable_getCurrentPriorityLevel,pt=e.unstable_ImmediatePriority,ar=e.unstable_UserBlockingPriority,$r=e.unstable_NormalPriority,Cr=e.unstable_LowPriority,La=e.unstable_IdlePriority,pa=e.log,Ls=e.unstable_setDisableYieldValue,Gt=null,ge=null;function Je(s){if(typeof pa=="function"&&Ls(s),ge&&typeof ge.setStrictMode=="function")try{ge.setStrictMode(Gt,s)}catch{}}var rt=Math.clz32?Math.clz32:Ba,_t=Math.log,Pr=Math.LN2;function Ba(s){return s>>>=0,s===0?32:31-(_t(s)/Pr|0)|0}var Fa=256,Pt=262144,Gr=4194304;function ya(s){var c=s&42;if(c!==0)return c;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ua(s,c,m){var v=s.pendingLanes;if(v===0)return 0;var A=0,O=s.suspendedLanes,j=s.pingedLanes;s=s.warmLanes;var Z=v&134217727;return Z!==0?(v=Z&~O,v!==0?A=ya(v):(j&=Z,j!==0?A=ya(j):m||(m=Z&~s,m!==0&&(A=ya(m))))):(Z=v&~O,Z!==0?A=ya(Z):j!==0?A=ya(j):m||(m=v&~s,m!==0&&(A=ya(m)))),A===0?0:c!==0&&c!==A&&(c&O)===0&&(O=A&-A,m=c&-c,O>=m||O===32&&(m&4194048)!==0)?c:A}function Wr(s,c){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&c)===0}function Fe(s,c){switch(s){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xt(){var s=Gr;return Gr<<=1,(Gr&62914560)===0&&(Gr=4194304),s}function $n(s){for(var c=[],m=0;31>m;m++)c.push(s);return c}function ls(s,c){s.pendingLanes|=c,c!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function xa(s,c,m,v,A,O){var j=s.pendingLanes;s.pendingLanes=m,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=m,s.entangledLanes&=m,s.errorRecoveryDisabledLanes&=m,s.shellSuspendCounter=0;var Z=s.entanglements,le=s.expirationTimes,Ae=s.hiddenUpdates;for(m=j&~m;0<m;){var ze=31-rt(m),qe=1<<ze;Z[ze]=0,le[ze]=-1;var Oe=Ae[ze];if(Oe!==null)for(Ae[ze]=null,ze=0;ze<Oe.length;ze++){var Pe=Oe[ze];Pe!==null&&(Pe.lane&=-536870913)}m&=~qe}v!==0&&Lc(s,v,0),O!==0&&A===0&&s.tag!==0&&(s.suspendedLanes|=O&~(j&~c))}function Lc(s,c,m){s.pendingLanes|=c,s.suspendedLanes&=~c;var v=31-rt(c);s.entangledLanes|=c,s.entanglements[v]=s.entanglements[v]|1073741824|m&261930}function ba(s,c){var m=s.entangledLanes|=c;for(s=s.entanglements;m;){var v=31-rt(m),A=1<<v;A&c|s[v]&c&&(s[v]|=c),m&=~A}}function Pi(s,c){var m=c&-c;return m=(m&42)!==0?1:gn(m),(m&(s.suspendedLanes|c))!==0?0:m}function gn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ja(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Bn(){var s=se.p;return s!==0?s:(s=window.event,s===void 0?32:PC(s.type))}function st(s,c){var m=se.p;try{return se.p=s,c()}finally{se.p=m}}var Fn=Math.random().toString(36).slice(2),Rr="__reactFiber$"+Fn,Kt="__reactProps$"+Fn,ia="__reactContainer$"+Fn,li="__reactEvents$"+Fn,Ol="__reactListeners$"+Fn,va="__reactHandles$"+Fn,Bc="__reactResources$"+Fn,oi="__reactMarker$"+Fn;function Gn(s){delete s[Rr],delete s[Kt],delete s[li],delete s[Ol],delete s[va]}function Ar(s){var c=s[Rr];if(c)return c;for(var m=s.parentNode;m;){if(c=m[ia]||m[Rr]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(s=yC(s);s!==null;){if(m=s[Rr])return m;s=yC(s)}return c}s=m,m=s.parentNode}return null}function Xt(s){if(s=s[Rr]||s[ia]){var c=s.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return s}return null}function Ue(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s.stateNode;throw Error(n(33))}function ct(s){var c=s[Bc];return c||(c=s[Bc]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function wr(s){s[oi]=!0}var $e=new Set,jm={};function sr(s,c){za(s,c),za(s+"Capture",c)}function za(s,c){for(jm[s]=c,s=0;s<c.length;s++)$e.add(c[s])}var m1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zt={},Wt={};function Ut(s){return mt.call(Wt,s)?!0:mt.call(Zt,s)?!1:m1.test(s)?Wt[s]=!0:(Zt[s]=!0,!1)}function _l(s,c,m){if(Ut(c))if(m===null)s.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":s.removeAttribute(c);return;case"boolean":var v=c.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){s.removeAttribute(c);return}}s.setAttribute(c,""+m)}}function Dl(s,c,m){if(m===null)s.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttribute(c,""+m)}}function Va(s,c,m,v){if(v===null)s.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(m);return}s.setAttributeNS(c,m,""+v)}}function Qt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Bs(s){var c=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function h1(s,c,m){var v=Object.getOwnPropertyDescriptor(s.constructor.prototype,c);if(!s.hasOwnProperty(c)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var A=v.get,O=v.set;return Object.defineProperty(s,c,{configurable:!0,get:function(){return A.call(this)},set:function(j){m=""+j,O.call(this,j)}}),Object.defineProperty(s,c,{enumerable:v.enumerable}),{getValue:function(){return m},setValue:function(j){m=""+j},stopTracking:function(){s._valueTracker=null,delete s[c]}}}}function Tr(s){if(!s._valueTracker){var c=Bs(s)?"checked":"value";s._valueTracker=h1(s,c,""+s[c])}}function Fs(s){if(!s)return!1;var c=s._valueTracker;if(!c)return!0;var m=c.getValue(),v="";return s&&(v=Bs(s)?s.checked?"true":"false":s.value),s=v,s!==m?(c.setValue(s),!0):!1}function Fc(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var kl=/[\n"\\]/g;function Ft(s){return s.replace(kl,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function pn(s,c,m,v,A,O,j,Z){s.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?s.type=j:s.removeAttribute("type"),c!=null?j==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+Qt(c)):s.value!==""+Qt(c)&&(s.value=""+Qt(c)):j!=="submit"&&j!=="reset"||s.removeAttribute("value"),c!=null?J(s,j,Qt(c)):m!=null?J(s,j,Qt(m)):v!=null&&s.removeAttribute("value"),A==null&&O!=null&&(s.defaultChecked=!!O),A!=null&&(s.checked=A&&typeof A!="function"&&typeof A!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?s.name=""+Qt(Z):s.removeAttribute("name")}function Ne(s,c,m,v,A,O,j,Z){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(s.type=O),c!=null||m!=null){if(!(O!=="submit"&&O!=="reset"||c!=null)){Tr(s);return}m=m!=null?""+Qt(m):"",c=c!=null?""+Qt(c):m,Z||c===s.value||(s.value=c),s.defaultValue=c}v=v??A,v=typeof v!="function"&&typeof v!="symbol"&&!!v,s.checked=Z?s.checked:!!v,s.defaultChecked=!!v,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(s.name=j),Tr(s)}function J(s,c,m){c==="number"&&Fc(s.ownerDocument)===s||s.defaultValue===""+m||(s.defaultValue=""+m)}function dt(s,c,m,v){if(s=s.options,c){c={};for(var A=0;A<m.length;A++)c["$"+m[A]]=!0;for(m=0;m<s.length;m++)A=c.hasOwnProperty("$"+s[m].value),s[m].selected!==A&&(s[m].selected=A),A&&v&&(s[m].defaultSelected=!0)}else{for(m=""+Qt(m),c=null,A=0;A<s.length;A++){if(s[A].value===m){s[A].selected=!0,v&&(s[A].defaultSelected=!0);return}c!==null||s[A].disabled||(c=s[A])}c!==null&&(c.selected=!0)}}function an(s,c,m){if(c!=null&&(c=""+Qt(c),c!==s.value&&(s.value=c),m==null)){s.defaultValue!==c&&(s.defaultValue=c);return}s.defaultValue=m!=null?""+Qt(m):""}function la(s,c,m,v){if(c==null){if(v!=null){if(m!=null)throw Error(n(92));if(ae(v)){if(1<v.length)throw Error(n(93));v=v[0]}m=v}m==null&&(m=""),c=m}m=Qt(c),s.defaultValue=m,v=s.textContent,v===m&&v!==""&&v!==null&&(s.value=v),Tr(s)}function Ml(s,c){if(c){var m=s.firstChild;if(m&&m===s.lastChild&&m.nodeType===3){m.nodeValue=c;return}}s.textContent=c}var xd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function oa(s,c,m){var v=c.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?v?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="":v?s.setProperty(c,m):typeof m!="number"||m===0||xd.has(c)?c==="float"?s.cssFloat=m:s[c]=(""+m).trim():s[c]=m+"px"}function gt(s,c,m){if(c!=null&&typeof c!="object")throw Error(n(62));if(s=s.style,m!=null){for(var v in m)!m.hasOwnProperty(v)||c!=null&&c.hasOwnProperty(v)||(v.indexOf("--")===0?s.setProperty(v,""):v==="float"?s.cssFloat="":s[v]="");for(var A in c)v=c[A],c.hasOwnProperty(A)&&m[A]!==v&&oa(s,A,v)}else for(var O in c)c.hasOwnProperty(O)&&oa(s,O,c[O])}function pr(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),g1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pl(s){return g1.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ea(){}var Fo=null;function bd(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Or=null,os=null;function Us(s){var c=Xt(s);if(c&&(s=c.stateNode)){var m=s[Kt]||null;e:switch(s=c.stateNode,c.type){case"input":if(pn(s,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),c=m.name,m.type==="radio"&&c!=null){for(m=s;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Ft(""+c)+'"][type="radio"]'),c=0;c<m.length;c++){var v=m[c];if(v!==s&&v.form===s.form){var A=v[Kt]||null;if(!A)throw Error(n(90));pn(v,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(c=0;c<m.length;c++)v=m[c],v.form===s.form&&Fs(v)}break e;case"textarea":an(s,m.value,m.defaultValue);break e;case"select":c=m.value,c!=null&&dt(s,!!m.multiple,c,!1)}}}var bt=!1;function Vm(s,c,m){if(bt)return s(c,m);bt=!0;try{var v=s(c);return v}finally{if(bt=!1,(Or!==null||os!==null)&&(P0(),Or&&(c=Or,s=os,os=Or=null,Us(c),s)))for(c=0;c<s.length;c++)Us(s[c])}}function Ct(s,c){var m=s.stateNode;if(m===null)return null;var v=m[Kt]||null;if(v===null)return null;m=v[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(s=s.type,v=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!v;break e;default:s=!1}if(s)return null;if(m&&typeof m!="function")throw Error(n(231,c,typeof m));return m}var yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vd=!1;if(yr)try{var Ri={};Object.defineProperty(Ri,"passive",{get:function(){vd=!0}}),window.addEventListener("test",Ri,Ri),window.removeEventListener("test",Ri,Ri)}catch{vd=!1}var js=null,zs=null,Uc=null;function Rl(){if(Uc)return Uc;var s,c=zs,m=c.length,v,A="value"in js?js.value:js.textContent,O=A.length;for(s=0;s<m&&c[s]===A[s];s++);var j=m-s;for(v=1;v<=j&&c[m-v]===A[O-v];v++);return Uc=A.slice(s,1<v?1-v:void 0)}function ci(s){var c=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&c===13&&(s=13)):s=c,s===10&&(s=13),32<=s||s===13?s:0}function ui(){return!0}function Ed(){return!1}function yn(s){function c(m,v,A,O,j){this._reactName=m,this._targetInst=A,this.type=v,this.nativeEvent=O,this.target=j,this.currentTarget=null;for(var Z in s)s.hasOwnProperty(Z)&&(m=s[Z],this[Z]=m?m(O):O[Z]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?ui:Ed,this.isPropagationStopped=Ed,this}return w(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),c}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tn=yn(Ha),Il=w({},Ha,{view:0,detail:0}),Hm=yn(Il),jc,wd,Uo,zc=w({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Uo&&(Uo&&s.type==="mousemove"?(jc=s.screenX-Uo.screenX,wd=s.screenY-Uo.screenY):wd=jc=0,Uo=s),jc)},movementY:function(s){return"movementY"in s?s.movementY:wd}}),rr=yn(zc),qm=w({},zc,{dataTransfer:0}),Vc=yn(qm),di=w({},Il,{relatedTarget:0}),Nd=yn(di),ke=w({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),Rt=yn(ke),On=w({},Ha,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Hc=yn(On),$m=w({},Ha,{data:0}),Gm=yn($m),p1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sn(s){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(s):(s=Sd[s])?!!c[s]:!1}function jo(){return sn}var Ir=w({},Il,{key:function(s){if(s.key){var c=p1[s.key]||s.key;if(c!=="Unidentified")return c}return s.type==="keypress"?(s=ci(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?y1[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jo,charCode:function(s){return s.type==="keypress"?ci(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ci(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),qc=yn(Ir),Ii=w({},zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ir=yn(Ii),vt=w({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jo}),x1=yn(vt),xr=w({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),Li=yn(xr),Ll=w({},zc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),b1=yn(Ll),cs=w({},Ha,{newState:0,oldState:0}),Cd=yn(cs),Ym=[9,13,27,32],zo=yr&&"CompositionEvent"in window,Bl=null;yr&&"documentMode"in document&&(Bl=document.documentMode);var Xm=yr&&"TextEvent"in window&&!Bl,Wm=yr&&(!zo||Bl&&8<Bl&&11>=Bl),Bi=" ",$c=!1;function Km(s,c){switch(s){case"keyup":return Ym.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ul=!1;function fi(s,c){switch(s){case"compositionend":return Fl(c);case"keypress":return c.which!==32?null:($c=!0,Bi);case"textInput":return s=c.data,s===Bi&&$c?null:s;default:return null}}function Gc(s,c){if(Ul)return s==="compositionend"||!zo&&Km(s,c)?(s=Rl(),Uc=zs=js=null,Ul=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Wm&&c.locale!=="ko"?null:c.data;default:return null}}var wa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ad(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c==="input"?!!wa[s.type]:c==="textarea"}function qa(s,c,m,v){Or?os?os.push(v):os=[v]:Or=v,c=j0(c,"onChange"),0<c.length&&(m=new Tn("onChange","change",null,m,v),s.push({event:m,listeners:c}))}var Vo=null,Fi=null;function v1(s){nC(s,0)}function Ho(s){var c=Ue(s);if(Fs(c))return s}function $a(s,c){if(s==="change")return c}var Zm=!1;if(yr){var qo;if(yr){var Ui="oninput"in document;if(!Ui){var Vt=document.createElement("div");Vt.setAttribute("oninput","return;"),Ui=typeof Vt.oninput=="function"}qo=Ui}else qo=!1;Zm=qo&&(!document.documentMode||9<document.documentMode)}function $o(){Vo&&(Vo.detachEvent("onpropertychange",q),Fi=Vo=null)}function q(s){if(s.propertyName==="value"&&Ho(Fi)){var c=[];qa(c,Fi,s,bd(s)),Vm(v1,c)}}function l(s,c,m){s==="focusin"?($o(),Vo=c,Fi=m,Vo.attachEvent("onpropertychange",q)):s==="focusout"&&$o()}function u(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ho(Fi)}function f(s,c){if(s==="click")return Ho(c)}function p(s,c){if(s==="input"||s==="change")return Ho(c)}function b(s,c){return s===c&&(s!==0||1/s===1/c)||s!==s&&c!==c}var E=typeof Object.is=="function"?Object.is:b;function S(s,c){if(E(s,c))return!0;if(typeof s!="object"||s===null||typeof c!="object"||c===null)return!1;var m=Object.keys(s),v=Object.keys(c);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var A=m[v];if(!mt.call(c,A)||!E(s[A],c[A]))return!1}return!0}function T(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function P(s,c){var m=T(s);s=0;for(var v;m;){if(m.nodeType===3){if(v=s+m.textContent.length,s<=c&&v>=c)return{node:m,offset:c-s};s=v}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=T(m)}}function B(s,c){return s&&c?s===c?!0:s&&s.nodeType===3?!1:c&&c.nodeType===3?B(s,c.parentNode):"contains"in s?s.contains(c):s.compareDocumentPosition?!!(s.compareDocumentPosition(c)&16):!1:!1}function $(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var c=Fc(s.document);c instanceof s.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)s=c.contentWindow;else break;c=Fc(s.document)}return c}function W(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c&&(c==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||c==="textarea"||s.contentEditable==="true")}var re=yr&&"documentMode"in document&&11>=document.documentMode,ue=null,de=null,Ee=null,_e=!1;function Qe(s,c,m){var v=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;_e||ue==null||ue!==Fc(v)||(v=ue,"selectionStart"in v&&W(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Ee&&S(Ee,v)||(Ee=v,v=j0(de,"onSelect"),0<v.length&&(c=new Tn("onSelect","select",null,c,m),s.push({event:c,listeners:v}),c.target=ue)))}function Ke(s,c){var m={};return m[s.toLowerCase()]=c.toLowerCase(),m["Webkit"+s]="webkit"+c,m["Moz"+s]="moz"+c,m}var Ge={animationend:Ke("Animation","AnimationEnd"),animationiteration:Ke("Animation","AnimationIteration"),animationstart:Ke("Animation","AnimationStart"),transitionrun:Ke("Transition","TransitionRun"),transitionstart:Ke("Transition","TransitionStart"),transitioncancel:Ke("Transition","TransitionCancel"),transitionend:Ke("Transition","TransitionEnd")},Bt={},At={};yr&&(At=document.createElement("div").style,"AnimationEvent"in window||(delete Ge.animationend.animation,delete Ge.animationiteration.animation,delete Ge.animationstart.animation),"TransitionEvent"in window||delete Ge.transitionend.transition);function Kr(s){if(Bt[s])return Bt[s];if(!Ge[s])return s;var c=Ge[s],m;for(m in c)if(c.hasOwnProperty(m)&&m in At)return Bt[s]=c[m];return s}var Na=Kr("animationend"),Yn=Kr("animationiteration"),lr=Kr("animationstart"),_n=Kr("transitionrun"),ca=Kr("transitionstart"),jl=Kr("transitioncancel"),ji=Kr("transitionend"),Qm=new Map,Td="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Td.push("scrollEnd");function Vs(s,c){Qm.set(s,c),sr(c,[s])}var Jm=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},us=[],Yc=0,E1=0;function e0(){for(var s=Yc,c=E1=Yc=0;c<s;){var m=us[c];us[c++]=null;var v=us[c];us[c++]=null;var A=us[c];us[c++]=null;var O=us[c];if(us[c++]=null,v!==null&&A!==null){var j=v.pending;j===null?A.next=A:(A.next=j.next,j.next=A),v.pending=A}O!==0&&FN(m,A,O)}}function t0(s,c,m,v){us[Yc++]=s,us[Yc++]=c,us[Yc++]=m,us[Yc++]=v,E1|=v,s.lanes|=v,s=s.alternate,s!==null&&(s.lanes|=v)}function w1(s,c,m,v){return t0(s,c,m,v),r0(s)}function Go(s,c){return t0(s,null,null,c),r0(s)}function FN(s,c,m){s.lanes|=m;var v=s.alternate;v!==null&&(v.lanes|=m);for(var A=!1,O=s.return;O!==null;)O.childLanes|=m,v=O.alternate,v!==null&&(v.childLanes|=m),O.tag===22&&(s=O.stateNode,s===null||s._visibility&1||(A=!0)),s=O,O=O.return;return s.tag===3?(O=s.stateNode,A&&c!==null&&(A=31-rt(m),s=O.hiddenUpdates,v=s[A],v===null?s[A]=[c]:v.push(c),c.lane=m|536870912),O):null}function r0(s){if(50<Wd)throw Wd=0,ky=null,Error(n(185));for(var c=s.return;c!==null;)s=c,c=s.return;return s.tag===3?s.stateNode:null}var Xc={};function xI(s,c,m,v){this.tag=s,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ga(s,c,m,v){return new xI(s,c,m,v)}function N1(s){return s=s.prototype,!(!s||!s.isReactComponent)}function zi(s,c){var m=s.alternate;return m===null?(m=Ga(s.tag,c,s.key,s.mode),m.elementType=s.elementType,m.type=s.type,m.stateNode=s.stateNode,m.alternate=s,s.alternate=m):(m.pendingProps=c,m.type=s.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=s.flags&65011712,m.childLanes=s.childLanes,m.lanes=s.lanes,m.child=s.child,m.memoizedProps=s.memoizedProps,m.memoizedState=s.memoizedState,m.updateQueue=s.updateQueue,c=s.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=s.sibling,m.index=s.index,m.ref=s.ref,m.refCleanup=s.refCleanup,m}function UN(s,c){s.flags&=65011714;var m=s.alternate;return m===null?(s.childLanes=0,s.lanes=c,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=m.childLanes,s.lanes=m.lanes,s.child=m.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=m.memoizedProps,s.memoizedState=m.memoizedState,s.updateQueue=m.updateQueue,s.type=m.type,c=m.dependencies,s.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),s}function n0(s,c,m,v,A,O){var j=0;if(v=s,typeof s=="function")N1(s)&&(j=1);else if(typeof s=="string")j=N9(s,m,ce.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case V:return s=Ga(31,m,c,A),s.elementType=V,s.lanes=O,s;case k:return Yo(m.children,A,O,c);case M:j=8,A|=24;break;case R:return s=Ga(12,m,c,A|2),s.elementType=R,s.lanes=O,s;case U:return s=Ga(13,m,c,A),s.elementType=U,s.lanes=O,s;case z:return s=Ga(19,m,c,A),s.elementType=z,s.lanes=O,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:j=10;break e;case F:j=9;break e;case G:j=11;break e;case L:j=14;break e;case H:j=16,v=null;break e}j=29,m=Error(n(130,s===null?"null":typeof s,"")),v=null}return c=Ga(j,m,c,A),c.elementType=s,c.type=v,c.lanes=O,c}function Yo(s,c,m,v){return s=Ga(7,s,v,c),s.lanes=m,s}function S1(s,c,m){return s=Ga(6,s,null,c),s.lanes=m,s}function jN(s){var c=Ga(18,null,null,0);return c.stateNode=s,c}function C1(s,c,m){return c=Ga(4,s.children!==null?s.children:[],s.key,c),c.lanes=m,c.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},c}var zN=new WeakMap;function ds(s,c){if(typeof s=="object"&&s!==null){var m=zN.get(s);return m!==void 0?m:(c={value:s,source:c,stack:et(c)},zN.set(s,c),c)}return{value:s,source:c,stack:et(c)}}var Wc=[],Kc=0,a0=null,Od=0,fs=[],ms=0,zl=null,mi=1,hi="";function Vi(s,c){Wc[Kc++]=Od,Wc[Kc++]=a0,a0=s,Od=c}function VN(s,c,m){fs[ms++]=mi,fs[ms++]=hi,fs[ms++]=zl,zl=s;var v=mi;s=hi;var A=32-rt(v)-1;v&=~(1<<A),m+=1;var O=32-rt(c)+A;if(30<O){var j=A-A%5;O=(v&(1<<j)-1).toString(32),v>>=j,A-=j,mi=1<<32-rt(c)+A|m<<A|v,hi=O+s}else mi=1<<O|m<<A|v,hi=s}function A1(s){s.return!==null&&(Vi(s,1),VN(s,1,0))}function T1(s){for(;s===a0;)a0=Wc[--Kc],Wc[Kc]=null,Od=Wc[--Kc],Wc[Kc]=null;for(;s===zl;)zl=fs[--ms],fs[ms]=null,hi=fs[--ms],fs[ms]=null,mi=fs[--ms],fs[ms]=null}function HN(s,c){fs[ms++]=mi,fs[ms++]=hi,fs[ms++]=zl,mi=c.id,hi=c.overflow,zl=s}var Xn=null,_r=null,Yt=!1,Vl=null,hs=!1,O1=Error(n(519));function Hl(s){var c=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _d(ds(c,s)),O1}function qN(s){var c=s.stateNode,m=s.type,v=s.memoizedProps;switch(c[Rr]=s,c[Kt]=v,m){case"dialog":zt("cancel",c),zt("close",c);break;case"iframe":case"object":case"embed":zt("load",c);break;case"video":case"audio":for(m=0;m<Zd.length;m++)zt(Zd[m],c);break;case"source":zt("error",c);break;case"img":case"image":case"link":zt("error",c),zt("load",c);break;case"details":zt("toggle",c);break;case"input":zt("invalid",c),Ne(c,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":zt("invalid",c);break;case"textarea":zt("invalid",c),la(c,v.value,v.defaultValue,v.children)}m=v.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||c.textContent===""+m||v.suppressHydrationWarning===!0||lC(c.textContent,m)?(v.popover!=null&&(zt("beforetoggle",c),zt("toggle",c)),v.onScroll!=null&&zt("scroll",c),v.onScrollEnd!=null&&zt("scrollend",c),v.onClick!=null&&(c.onclick=Ea),c=!0):c=!1,c||Hl(s,!0)}function $N(s){for(Xn=s.return;Xn;)switch(Xn.tag){case 5:case 31:case 13:hs=!1;return;case 27:case 3:hs=!0;return;default:Xn=Xn.return}}function Zc(s){if(s!==Xn)return!1;if(!Yt)return $N(s),Yt=!0,!1;var c=s.tag,m;if((m=c!==3&&c!==27)&&((m=c===5)&&(m=s.type,m=!(m!=="form"&&m!=="button")||Gy(s.type,s.memoizedProps)),m=!m),m&&_r&&Hl(s),$N(s),c===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));_r=pC(s)}else if(c===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));_r=pC(s)}else c===27?(c=_r,no(s.type)?(s=Zy,Zy=null,_r=s):_r=c):_r=Xn?ps(s.stateNode.nextSibling):null;return!0}function Xo(){_r=Xn=null,Yt=!1}function _1(){var s=Vl;return s!==null&&(Ta===null?Ta=s:Ta.push.apply(Ta,s),Vl=null),s}function _d(s){Vl===null?Vl=[s]:Vl.push(s)}var D1=K(null),Wo=null,Hi=null;function ql(s,c,m){fe(D1,c._currentValue),c._currentValue=m}function qi(s){s._currentValue=D1.current,ee(D1)}function k1(s,c,m){for(;s!==null;){var v=s.alternate;if((s.childLanes&c)!==c?(s.childLanes|=c,v!==null&&(v.childLanes|=c)):v!==null&&(v.childLanes&c)!==c&&(v.childLanes|=c),s===m)break;s=s.return}}function M1(s,c,m,v){var A=s.child;for(A!==null&&(A.return=s);A!==null;){var O=A.dependencies;if(O!==null){var j=A.child;O=O.firstContext;e:for(;O!==null;){var Z=O;O=A;for(var le=0;le<c.length;le++)if(Z.context===c[le]){O.lanes|=m,Z=O.alternate,Z!==null&&(Z.lanes|=m),k1(O.return,m,s),v||(j=null);break e}O=Z.next}}else if(A.tag===18){if(j=A.return,j===null)throw Error(n(341));j.lanes|=m,O=j.alternate,O!==null&&(O.lanes|=m),k1(j,m,s),j=null}else j=A.child;if(j!==null)j.return=A;else for(j=A;j!==null;){if(j===s){j=null;break}if(A=j.sibling,A!==null){A.return=j.return,j=A;break}j=j.return}A=j}}function Qc(s,c,m,v){s=null;for(var A=c,O=!1;A!==null;){if(!O){if((A.flags&524288)!==0)O=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var j=A.alternate;if(j===null)throw Error(n(387));if(j=j.memoizedProps,j!==null){var Z=A.type;E(A.pendingProps.value,j.value)||(s!==null?s.push(Z):s=[Z])}}else if(A===oe.current){if(j=A.alternate,j===null)throw Error(n(387));j.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(s!==null?s.push(rf):s=[rf])}A=A.return}s!==null&&M1(c,s,m,v),c.flags|=262144}function s0(s){for(s=s.firstContext;s!==null;){if(!E(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ko(s){Wo=s,Hi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Wn(s){return GN(Wo,s)}function i0(s,c){return Wo===null&&Ko(s),GN(s,c)}function GN(s,c){var m=c._currentValue;if(c={context:c,memoizedValue:m,next:null},Hi===null){if(s===null)throw Error(n(308));Hi=c,s.dependencies={lanes:0,firstContext:c},s.flags|=524288}else Hi=Hi.next=c;return m}var bI=typeof AbortController<"u"?AbortController:function(){var s=[],c=this.signal={aborted:!1,addEventListener:function(m,v){s.push(v)}};this.abort=function(){c.aborted=!0,s.forEach(function(m){return m()})}},vI=e.unstable_scheduleCallback,EI=e.unstable_NormalPriority,xn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function P1(){return{controller:new bI,data:new Map,refCount:0}}function Dd(s){s.refCount--,s.refCount===0&&vI(EI,function(){s.controller.abort()})}var kd=null,R1=0,Jc=0,eu=null;function wI(s,c){if(kd===null){var m=kd=[];R1=0,Jc=By(),eu={status:"pending",value:void 0,then:function(v){m.push(v)}}}return R1++,c.then(YN,YN),c}function YN(){if(--R1===0&&kd!==null){eu!==null&&(eu.status="fulfilled");var s=kd;kd=null,Jc=0,eu=null;for(var c=0;c<s.length;c++)(0,s[c])()}}function NI(s,c){var m=[],v={status:"pending",value:null,reason:null,then:function(A){m.push(A)}};return s.then(function(){v.status="fulfilled",v.value=c;for(var A=0;A<m.length;A++)(0,m[A])(c)},function(A){for(v.status="rejected",v.reason=A,A=0;A<m.length;A++)(0,m[A])(void 0)}),v}var XN=ne.S;ne.S=function(s,c){k3=Be(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&wI(s,c),XN!==null&&XN(s,c)};var Zo=K(null);function I1(){var s=Zo.current;return s!==null?s:br.pooledCache}function l0(s,c){c===null?fe(Zo,Zo.current):fe(Zo,c.pool)}function WN(){var s=I1();return s===null?null:{parent:xn._currentValue,pool:s}}var tu=Error(n(460)),L1=Error(n(474)),o0=Error(n(542)),c0={then:function(){}};function KN(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ZN(s,c,m){switch(m=s[m],m===void 0?s.push(c):m!==c&&(c.then(Ea,Ea),c=m),c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,JN(s),s;default:if(typeof c.status=="string")c.then(Ea,Ea);else{if(s=br,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=c,s.status="pending",s.then(function(v){if(c.status==="pending"){var A=c;A.status="fulfilled",A.value=v}},function(v){if(c.status==="pending"){var A=c;A.status="rejected",A.reason=v}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,JN(s),s}throw Jo=c,tu}}function Qo(s){try{var c=s._init;return c(s._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(Jo=m,tu):m}}var Jo=null;function QN(){if(Jo===null)throw Error(n(459));var s=Jo;return Jo=null,s}function JN(s){if(s===tu||s===o0)throw Error(n(483))}var ru=null,Md=0;function u0(s){var c=Md;return Md+=1,ru===null&&(ru=[]),ZN(ru,s,c)}function Pd(s,c){c=c.props.ref,s.ref=c!==void 0?c:null}function d0(s,c){throw c.$$typeof===C?Error(n(525)):(s=Object.prototype.toString.call(c),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":s)))}function eS(s){function c(pe,me){if(s){var Ce=pe.deletions;Ce===null?(pe.deletions=[me],pe.flags|=16):Ce.push(me)}}function m(pe,me){if(!s)return null;for(;me!==null;)c(pe,me),me=me.sibling;return null}function v(pe){for(var me=new Map;pe!==null;)pe.key!==null?me.set(pe.key,pe):me.set(pe.index,pe),pe=pe.sibling;return me}function A(pe,me){return pe=zi(pe,me),pe.index=0,pe.sibling=null,pe}function O(pe,me,Ce){return pe.index=Ce,s?(Ce=pe.alternate,Ce!==null?(Ce=Ce.index,Ce<me?(pe.flags|=67108866,me):Ce):(pe.flags|=67108866,me)):(pe.flags|=1048576,me)}function j(pe){return s&&pe.alternate===null&&(pe.flags|=67108866),pe}function Z(pe,me,Ce,Ve){return me===null||me.tag!==6?(me=S1(Ce,pe.mode,Ve),me.return=pe,me):(me=A(me,Ce),me.return=pe,me)}function le(pe,me,Ce,Ve){var yt=Ce.type;return yt===k?ze(pe,me,Ce.props.children,Ve,Ce.key):me!==null&&(me.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===H&&Qo(yt)===me.type)?(me=A(me,Ce.props),Pd(me,Ce),me.return=pe,me):(me=n0(Ce.type,Ce.key,Ce.props,null,pe.mode,Ve),Pd(me,Ce),me.return=pe,me)}function Ae(pe,me,Ce,Ve){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ce.containerInfo||me.stateNode.implementation!==Ce.implementation?(me=C1(Ce,pe.mode,Ve),me.return=pe,me):(me=A(me,Ce.children||[]),me.return=pe,me)}function ze(pe,me,Ce,Ve,yt){return me===null||me.tag!==7?(me=Yo(Ce,pe.mode,Ve,yt),me.return=pe,me):(me=A(me,Ce),me.return=pe,me)}function qe(pe,me,Ce){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=S1(""+me,pe.mode,Ce),me.return=pe,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case _:return Ce=n0(me.type,me.key,me.props,null,pe.mode,Ce),Pd(Ce,me),Ce.return=pe,Ce;case D:return me=C1(me,pe.mode,Ce),me.return=pe,me;case H:return me=Qo(me),qe(pe,me,Ce)}if(ae(me)||X(me))return me=Yo(me,pe.mode,Ce,null),me.return=pe,me;if(typeof me.then=="function")return qe(pe,u0(me),Ce);if(me.$$typeof===I)return qe(pe,i0(pe,me),Ce);d0(pe,me)}return null}function Oe(pe,me,Ce,Ve){var yt=me!==null?me.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return yt!==null?null:Z(pe,me,""+Ce,Ve);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case _:return Ce.key===yt?le(pe,me,Ce,Ve):null;case D:return Ce.key===yt?Ae(pe,me,Ce,Ve):null;case H:return Ce=Qo(Ce),Oe(pe,me,Ce,Ve)}if(ae(Ce)||X(Ce))return yt!==null?null:ze(pe,me,Ce,Ve,null);if(typeof Ce.then=="function")return Oe(pe,me,u0(Ce),Ve);if(Ce.$$typeof===I)return Oe(pe,me,i0(pe,Ce),Ve);d0(pe,Ce)}return null}function Pe(pe,me,Ce,Ve,yt){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return pe=pe.get(Ce)||null,Z(me,pe,""+Ve,yt);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case _:return pe=pe.get(Ve.key===null?Ce:Ve.key)||null,le(me,pe,Ve,yt);case D:return pe=pe.get(Ve.key===null?Ce:Ve.key)||null,Ae(me,pe,Ve,yt);case H:return Ve=Qo(Ve),Pe(pe,me,Ce,Ve,yt)}if(ae(Ve)||X(Ve))return pe=pe.get(Ce)||null,ze(me,pe,Ve,yt,null);if(typeof Ve.then=="function")return Pe(pe,me,Ce,u0(Ve),yt);if(Ve.$$typeof===I)return Pe(pe,me,Ce,i0(me,Ve),yt);d0(me,Ve)}return null}function ot(pe,me,Ce,Ve){for(var yt=null,Jt=null,ft=me,It=me=0,qt=null;ft!==null&&It<Ce.length;It++){ft.index>It?(qt=ft,ft=null):qt=ft.sibling;var er=Oe(pe,ft,Ce[It],Ve);if(er===null){ft===null&&(ft=qt);break}s&&ft&&er.alternate===null&&c(pe,ft),me=O(er,me,It),Jt===null?yt=er:Jt.sibling=er,Jt=er,ft=qt}if(It===Ce.length)return m(pe,ft),Yt&&Vi(pe,It),yt;if(ft===null){for(;It<Ce.length;It++)ft=qe(pe,Ce[It],Ve),ft!==null&&(me=O(ft,me,It),Jt===null?yt=ft:Jt.sibling=ft,Jt=ft);return Yt&&Vi(pe,It),yt}for(ft=v(ft);It<Ce.length;It++)qt=Pe(ft,pe,It,Ce[It],Ve),qt!==null&&(s&&qt.alternate!==null&&ft.delete(qt.key===null?It:qt.key),me=O(qt,me,It),Jt===null?yt=qt:Jt.sibling=qt,Jt=qt);return s&&ft.forEach(function(oo){return c(pe,oo)}),Yt&&Vi(pe,It),yt}function Et(pe,me,Ce,Ve){if(Ce==null)throw Error(n(151));for(var yt=null,Jt=null,ft=me,It=me=0,qt=null,er=Ce.next();ft!==null&&!er.done;It++,er=Ce.next()){ft.index>It?(qt=ft,ft=null):qt=ft.sibling;var oo=Oe(pe,ft,er.value,Ve);if(oo===null){ft===null&&(ft=qt);break}s&&ft&&oo.alternate===null&&c(pe,ft),me=O(oo,me,It),Jt===null?yt=oo:Jt.sibling=oo,Jt=oo,ft=qt}if(er.done)return m(pe,ft),Yt&&Vi(pe,It),yt;if(ft===null){for(;!er.done;It++,er=Ce.next())er=qe(pe,er.value,Ve),er!==null&&(me=O(er,me,It),Jt===null?yt=er:Jt.sibling=er,Jt=er);return Yt&&Vi(pe,It),yt}for(ft=v(ft);!er.done;It++,er=Ce.next())er=Pe(ft,pe,It,er.value,Ve),er!==null&&(s&&er.alternate!==null&&ft.delete(er.key===null?It:er.key),me=O(er,me,It),Jt===null?yt=er:Jt.sibling=er,Jt=er);return s&&ft.forEach(function(R9){return c(pe,R9)}),Yt&&Vi(pe,It),yt}function mr(pe,me,Ce,Ve){if(typeof Ce=="object"&&Ce!==null&&Ce.type===k&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case _:e:{for(var yt=Ce.key;me!==null;){if(me.key===yt){if(yt=Ce.type,yt===k){if(me.tag===7){m(pe,me.sibling),Ve=A(me,Ce.props.children),Ve.return=pe,pe=Ve;break e}}else if(me.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===H&&Qo(yt)===me.type){m(pe,me.sibling),Ve=A(me,Ce.props),Pd(Ve,Ce),Ve.return=pe,pe=Ve;break e}m(pe,me);break}else c(pe,me);me=me.sibling}Ce.type===k?(Ve=Yo(Ce.props.children,pe.mode,Ve,Ce.key),Ve.return=pe,pe=Ve):(Ve=n0(Ce.type,Ce.key,Ce.props,null,pe.mode,Ve),Pd(Ve,Ce),Ve.return=pe,pe=Ve)}return j(pe);case D:e:{for(yt=Ce.key;me!==null;){if(me.key===yt)if(me.tag===4&&me.stateNode.containerInfo===Ce.containerInfo&&me.stateNode.implementation===Ce.implementation){m(pe,me.sibling),Ve=A(me,Ce.children||[]),Ve.return=pe,pe=Ve;break e}else{m(pe,me);break}else c(pe,me);me=me.sibling}Ve=C1(Ce,pe.mode,Ve),Ve.return=pe,pe=Ve}return j(pe);case H:return Ce=Qo(Ce),mr(pe,me,Ce,Ve)}if(ae(Ce))return ot(pe,me,Ce,Ve);if(X(Ce)){if(yt=X(Ce),typeof yt!="function")throw Error(n(150));return Ce=yt.call(Ce),Et(pe,me,Ce,Ve)}if(typeof Ce.then=="function")return mr(pe,me,u0(Ce),Ve);if(Ce.$$typeof===I)return mr(pe,me,i0(pe,Ce),Ve);d0(pe,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,me!==null&&me.tag===6?(m(pe,me.sibling),Ve=A(me,Ce),Ve.return=pe,pe=Ve):(m(pe,me),Ve=S1(Ce,pe.mode,Ve),Ve.return=pe,pe=Ve),j(pe)):m(pe,me)}return function(pe,me,Ce,Ve){try{Md=0;var yt=mr(pe,me,Ce,Ve);return ru=null,yt}catch(ft){if(ft===tu||ft===o0)throw ft;var Jt=Ga(29,ft,null,pe.mode);return Jt.lanes=Ve,Jt.return=pe,Jt}finally{}}}var ec=eS(!0),tS=eS(!1),$l=!1;function B1(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function F1(s,c){s=s.updateQueue,c.updateQueue===s&&(c.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Gl(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Yl(s,c,m){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,(nr&2)!==0){var A=v.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),v.pending=c,c=r0(s),FN(s,null,m),c}return t0(s,v,c,m),r0(s)}function Rd(s,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194048)!==0)){var v=c.lanes;v&=s.pendingLanes,m|=v,c.lanes=m,ba(s,m)}}function U1(s,c){var m=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var A=null,O=null;if(m=m.firstBaseUpdate,m!==null){do{var j={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};O===null?A=O=j:O=O.next=j,m=m.next}while(m!==null);O===null?A=O=c:O=O.next=c}else A=O=c;m={baseState:v.baseState,firstBaseUpdate:A,lastBaseUpdate:O,shared:v.shared,callbacks:v.callbacks},s.updateQueue=m;return}s=m.lastBaseUpdate,s===null?m.firstBaseUpdate=c:s.next=c,m.lastBaseUpdate=c}var j1=!1;function Id(){if(j1){var s=eu;if(s!==null)throw s}}function Ld(s,c,m,v){j1=!1;var A=s.updateQueue;$l=!1;var O=A.firstBaseUpdate,j=A.lastBaseUpdate,Z=A.shared.pending;if(Z!==null){A.shared.pending=null;var le=Z,Ae=le.next;le.next=null,j===null?O=Ae:j.next=Ae,j=le;var ze=s.alternate;ze!==null&&(ze=ze.updateQueue,Z=ze.lastBaseUpdate,Z!==j&&(Z===null?ze.firstBaseUpdate=Ae:Z.next=Ae,ze.lastBaseUpdate=le))}if(O!==null){var qe=A.baseState;j=0,ze=Ae=le=null,Z=O;do{var Oe=Z.lane&-536870913,Pe=Oe!==Z.lane;if(Pe?(Ht&Oe)===Oe:(v&Oe)===Oe){Oe!==0&&Oe===Jc&&(j1=!0),ze!==null&&(ze=ze.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var ot=s,Et=Z;Oe=c;var mr=m;switch(Et.tag){case 1:if(ot=Et.payload,typeof ot=="function"){qe=ot.call(mr,qe,Oe);break e}qe=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=Et.payload,Oe=typeof ot=="function"?ot.call(mr,qe,Oe):ot,Oe==null)break e;qe=w({},qe,Oe);break e;case 2:$l=!0}}Oe=Z.callback,Oe!==null&&(s.flags|=64,Pe&&(s.flags|=8192),Pe=A.callbacks,Pe===null?A.callbacks=[Oe]:Pe.push(Oe))}else Pe={lane:Oe,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},ze===null?(Ae=ze=Pe,le=qe):ze=ze.next=Pe,j|=Oe;if(Z=Z.next,Z===null){if(Z=A.shared.pending,Z===null)break;Pe=Z,Z=Pe.next,Pe.next=null,A.lastBaseUpdate=Pe,A.shared.pending=null}}while(!0);ze===null&&(le=qe),A.baseState=le,A.firstBaseUpdate=Ae,A.lastBaseUpdate=ze,O===null&&(A.shared.lanes=0),Ql|=j,s.lanes=j,s.memoizedState=qe}}function rS(s,c){if(typeof s!="function")throw Error(n(191,s));s.call(c)}function nS(s,c){var m=s.callbacks;if(m!==null)for(s.callbacks=null,s=0;s<m.length;s++)rS(m[s],c)}var nu=K(null),f0=K(0);function aS(s,c){s=Ji,fe(f0,s),fe(nu,c),Ji=s|c.baseLanes}function z1(){fe(f0,Ji),fe(nu,nu.current)}function V1(){Ji=f0.current,ee(nu),ee(f0)}var Ya=K(null),gs=null;function Xl(s){var c=s.alternate;fe(ln,ln.current&1),fe(Ya,s),gs===null&&(c===null||nu.current!==null||c.memoizedState!==null)&&(gs=s)}function H1(s){fe(ln,ln.current),fe(Ya,s),gs===null&&(gs=s)}function sS(s){s.tag===22?(fe(ln,ln.current),fe(Ya,s),gs===null&&(gs=s)):Wl()}function Wl(){fe(ln,ln.current),fe(Ya,Ya.current)}function Xa(s){ee(Ya),gs===s&&(gs=null),ee(ln)}var ln=K(0);function m0(s){for(var c=s;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Wy(m)||Ky(m)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var $i=0,kt=null,dr=null,bn=null,h0=!1,au=!1,tc=!1,g0=0,Bd=0,su=null,SI=0;function Zr(){throw Error(n(321))}function q1(s,c){if(c===null)return!1;for(var m=0;m<c.length&&m<s.length;m++)if(!E(s[m],c[m]))return!1;return!0}function $1(s,c,m,v,A,O){return $i=O,kt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,ne.H=s===null||s.memoizedState===null?VS:iy,tc=!1,O=m(v,A),tc=!1,au&&(O=lS(c,m,v,A)),iS(s),O}function iS(s){ne.H=jd;var c=dr!==null&&dr.next!==null;if($i=0,bn=dr=kt=null,h0=!1,Bd=0,su=null,c)throw Error(n(300));s===null||vn||(s=s.dependencies,s!==null&&s0(s)&&(vn=!0))}function lS(s,c,m,v){kt=s;var A=0;do{if(au&&(su=null),Bd=0,au=!1,25<=A)throw Error(n(301));if(A+=1,bn=dr=null,s.updateQueue!=null){var O=s.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}ne.H=HS,O=c(m,v)}while(au);return O}function CI(){var s=ne.H,c=s.useState()[0];return c=typeof c.then=="function"?Fd(c):c,s=s.useState()[0],(dr!==null?dr.memoizedState:null)!==s&&(kt.flags|=1024),c}function G1(){var s=g0!==0;return g0=0,s}function Y1(s,c,m){c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~m}function X1(s){if(h0){for(s=s.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}h0=!1}$i=0,bn=dr=kt=null,au=!1,Bd=g0=0,su=null}function ua(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?kt.memoizedState=bn=s:bn=bn.next=s,bn}function on(){if(dr===null){var s=kt.alternate;s=s!==null?s.memoizedState:null}else s=dr.next;var c=bn===null?kt.memoizedState:bn.next;if(c!==null)bn=c,dr=s;else{if(s===null)throw kt.alternate===null?Error(n(467)):Error(n(310));dr=s,s={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},bn===null?kt.memoizedState=bn=s:bn=bn.next=s}return bn}function p0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fd(s){var c=Bd;return Bd+=1,su===null&&(su=[]),s=ZN(su,s,c),c=kt,(bn===null?c.memoizedState:bn.next)===null&&(c=c.alternate,ne.H=c===null||c.memoizedState===null?VS:iy),s}function y0(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Fd(s);if(s.$$typeof===I)return Wn(s)}throw Error(n(438,String(s)))}function W1(s){var c=null,m=kt.updateQueue;if(m!==null&&(c=m.memoCache),c==null){var v=kt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(c={data:v.data.map(function(A){return A.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),m===null&&(m=p0(),kt.updateQueue=m),m.memoCache=c,m=c.data[c.index],m===void 0)for(m=c.data[c.index]=Array(s),v=0;v<s;v++)m[v]=Q;return c.index++,m}function Gi(s,c){return typeof c=="function"?c(s):c}function x0(s){var c=on();return K1(c,dr,s)}function K1(s,c,m){var v=s.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=m;var A=s.baseQueue,O=v.pending;if(O!==null){if(A!==null){var j=A.next;A.next=O.next,O.next=j}c.baseQueue=A=O,v.pending=null}if(O=s.baseState,A===null)s.memoizedState=O;else{c=A.next;var Z=j=null,le=null,Ae=c,ze=!1;do{var qe=Ae.lane&-536870913;if(qe!==Ae.lane?(Ht&qe)===qe:($i&qe)===qe){var Oe=Ae.revertLane;if(Oe===0)le!==null&&(le=le.next={lane:0,revertLane:0,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),qe===Jc&&(ze=!0);else if(($i&Oe)===Oe){Ae=Ae.next,Oe===Jc&&(ze=!0);continue}else qe={lane:0,revertLane:Ae.revertLane,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},le===null?(Z=le=qe,j=O):le=le.next=qe,kt.lanes|=Oe,Ql|=Oe;qe=Ae.action,tc&&m(O,qe),O=Ae.hasEagerState?Ae.eagerState:m(O,qe)}else Oe={lane:qe,revertLane:Ae.revertLane,gesture:Ae.gesture,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},le===null?(Z=le=Oe,j=O):le=le.next=Oe,kt.lanes|=qe,Ql|=qe;Ae=Ae.next}while(Ae!==null&&Ae!==c);if(le===null?j=O:le.next=Z,!E(O,s.memoizedState)&&(vn=!0,ze&&(m=eu,m!==null)))throw m;s.memoizedState=O,s.baseState=j,s.baseQueue=le,v.lastRenderedState=O}return A===null&&(v.lanes=0),[s.memoizedState,v.dispatch]}function Z1(s){var c=on(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=s;var v=m.dispatch,A=m.pending,O=c.memoizedState;if(A!==null){m.pending=null;var j=A=A.next;do O=s(O,j.action),j=j.next;while(j!==A);E(O,c.memoizedState)||(vn=!0),c.memoizedState=O,c.baseQueue===null&&(c.baseState=O),m.lastRenderedState=O}return[O,v]}function oS(s,c,m){var v=kt,A=on(),O=Yt;if(O){if(m===void 0)throw Error(n(407));m=m()}else m=c();var j=!E((dr||A).memoizedState,m);if(j&&(A.memoizedState=m,vn=!0),A=A.queue,ey(dS.bind(null,v,A,s),[s]),A.getSnapshot!==c||j||bn!==null&&bn.memoizedState.tag&1){if(v.flags|=2048,iu(9,{destroy:void 0},uS.bind(null,v,A,m,c),null),br===null)throw Error(n(349));O||($i&127)!==0||cS(v,c,m)}return m}function cS(s,c,m){s.flags|=16384,s={getSnapshot:c,value:m},c=kt.updateQueue,c===null?(c=p0(),kt.updateQueue=c,c.stores=[s]):(m=c.stores,m===null?c.stores=[s]:m.push(s))}function uS(s,c,m,v){c.value=m,c.getSnapshot=v,fS(c)&&mS(s)}function dS(s,c,m){return m(function(){fS(c)&&mS(s)})}function fS(s){var c=s.getSnapshot;s=s.value;try{var m=c();return!E(s,m)}catch{return!0}}function mS(s){var c=Go(s,2);c!==null&&Oa(c,s,2)}function Q1(s){var c=ua();if(typeof s=="function"){var m=s;if(s=m(),tc){Je(!0);try{m()}finally{Je(!1)}}}return c.memoizedState=c.baseState=s,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:s},c}function hS(s,c,m,v){return s.baseState=m,K1(s,dr,typeof v=="function"?v:Gi)}function AI(s,c,m,v,A){if(E0(s))throw Error(n(485));if(s=c.action,s!==null){var O={payload:A,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){O.listeners.push(j)}};ne.T!==null?m(!0):O.isTransition=!1,v(O),m=c.pending,m===null?(O.next=c.pending=O,gS(c,O)):(O.next=m.next,c.pending=m.next=O)}}function gS(s,c){var m=c.action,v=c.payload,A=s.state;if(c.isTransition){var O=ne.T,j={};ne.T=j;try{var Z=m(A,v),le=ne.S;le!==null&&le(j,Z),pS(s,c,Z)}catch(Ae){J1(s,c,Ae)}finally{O!==null&&j.types!==null&&(O.types=j.types),ne.T=O}}else try{O=m(A,v),pS(s,c,O)}catch(Ae){J1(s,c,Ae)}}function pS(s,c,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(v){yS(s,c,v)},function(v){return J1(s,c,v)}):yS(s,c,m)}function yS(s,c,m){c.status="fulfilled",c.value=m,xS(c),s.state=m,c=s.pending,c!==null&&(m=c.next,m===c?s.pending=null:(m=m.next,c.next=m,gS(s,m)))}function J1(s,c,m){var v=s.pending;if(s.pending=null,v!==null){v=v.next;do c.status="rejected",c.reason=m,xS(c),c=c.next;while(c!==v)}s.action=null}function xS(s){s=s.listeners;for(var c=0;c<s.length;c++)(0,s[c])()}function bS(s,c){return c}function vS(s,c){if(Yt){var m=br.formState;if(m!==null){e:{var v=kt;if(Yt){if(_r){t:{for(var A=_r,O=hs;A.nodeType!==8;){if(!O){A=null;break t}if(A=ps(A.nextSibling),A===null){A=null;break t}}O=A.data,A=O==="F!"||O==="F"?A:null}if(A){_r=ps(A.nextSibling),v=A.data==="F!";break e}}Hl(v)}v=!1}v&&(c=m[0])}}return m=ua(),m.memoizedState=m.baseState=c,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bS,lastRenderedState:c},m.queue=v,m=US.bind(null,kt,v),v.dispatch=m,v=Q1(!1),O=sy.bind(null,kt,!1,v.queue),v=ua(),A={state:c,dispatch:null,action:s,pending:null},v.queue=A,m=AI.bind(null,kt,A,O,m),A.dispatch=m,v.memoizedState=s,[c,m,!1]}function ES(s){var c=on();return wS(c,dr,s)}function wS(s,c,m){if(c=K1(s,c,bS)[0],s=x0(Gi)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var v=Fd(c)}catch(j){throw j===tu?o0:j}else v=c;c=on();var A=c.queue,O=A.dispatch;return m!==c.memoizedState&&(kt.flags|=2048,iu(9,{destroy:void 0},TI.bind(null,A,m),null)),[v,O,s]}function TI(s,c){s.action=c}function NS(s){var c=on(),m=dr;if(m!==null)return wS(c,m,s);on(),c=c.memoizedState,m=on();var v=m.queue.dispatch;return m.memoizedState=s,[c,v,!1]}function iu(s,c,m,v){return s={tag:s,create:m,deps:v,inst:c,next:null},c=kt.updateQueue,c===null&&(c=p0(),kt.updateQueue=c),m=c.lastEffect,m===null?c.lastEffect=s.next=s:(v=m.next,m.next=s,s.next=v,c.lastEffect=s),s}function SS(){return on().memoizedState}function b0(s,c,m,v){var A=ua();kt.flags|=s,A.memoizedState=iu(1|c,{destroy:void 0},m,v===void 0?null:v)}function v0(s,c,m,v){var A=on();v=v===void 0?null:v;var O=A.memoizedState.inst;dr!==null&&v!==null&&q1(v,dr.memoizedState.deps)?A.memoizedState=iu(c,O,m,v):(kt.flags|=s,A.memoizedState=iu(1|c,O,m,v))}function CS(s,c){b0(8390656,8,s,c)}function ey(s,c){v0(2048,8,s,c)}function OI(s){kt.flags|=4;var c=kt.updateQueue;if(c===null)c=p0(),kt.updateQueue=c,c.events=[s];else{var m=c.events;m===null?c.events=[s]:m.push(s)}}function AS(s){var c=on().memoizedState;return OI({ref:c,nextImpl:s}),function(){if((nr&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}function TS(s,c){return v0(4,2,s,c)}function OS(s,c){return v0(4,4,s,c)}function _S(s,c){if(typeof c=="function"){s=s();var m=c(s);return function(){typeof m=="function"?m():c(null)}}if(c!=null)return s=s(),c.current=s,function(){c.current=null}}function DS(s,c,m){m=m!=null?m.concat([s]):null,v0(4,4,_S.bind(null,c,s),m)}function ty(){}function kS(s,c){var m=on();c=c===void 0?null:c;var v=m.memoizedState;return c!==null&&q1(c,v[1])?v[0]:(m.memoizedState=[s,c],s)}function MS(s,c){var m=on();c=c===void 0?null:c;var v=m.memoizedState;if(c!==null&&q1(c,v[1]))return v[0];if(v=s(),tc){Je(!0);try{s()}finally{Je(!1)}}return m.memoizedState=[v,c],v}function ry(s,c,m){return m===void 0||($i&1073741824)!==0&&(Ht&261930)===0?s.memoizedState=c:(s.memoizedState=m,s=P3(),kt.lanes|=s,Ql|=s,m)}function PS(s,c,m,v){return E(m,c)?m:nu.current!==null?(s=ry(s,m,v),E(s,c)||(vn=!0),s):($i&42)===0||($i&1073741824)!==0&&(Ht&261930)===0?(vn=!0,s.memoizedState=m):(s=P3(),kt.lanes|=s,Ql|=s,c)}function RS(s,c,m,v,A){var O=se.p;se.p=O!==0&&8>O?O:8;var j=ne.T,Z={};ne.T=Z,sy(s,!1,c,m);try{var le=A(),Ae=ne.S;if(Ae!==null&&Ae(Z,le),le!==null&&typeof le=="object"&&typeof le.then=="function"){var ze=NI(le,v);Ud(s,c,ze,Za(s))}else Ud(s,c,v,Za(s))}catch(qe){Ud(s,c,{then:function(){},status:"rejected",reason:qe},Za())}finally{se.p=O,j!==null&&Z.types!==null&&(j.types=Z.types),ne.T=j}}function _I(){}function ny(s,c,m,v){if(s.tag!==5)throw Error(n(476));var A=IS(s).queue;RS(s,A,c,Te,m===null?_I:function(){return LS(s),m(v)})}function IS(s){var c=s.memoizedState;if(c!==null)return c;c={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:Te},next:null};var m={};return c.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:m},next:null},s.memoizedState=c,s=s.alternate,s!==null&&(s.memoizedState=c),c}function LS(s){var c=IS(s);c.next===null&&(c=s.alternate.memoizedState),Ud(s,c.next.queue,{},Za())}function ay(){return Wn(rf)}function BS(){return on().memoizedState}function FS(){return on().memoizedState}function DI(s){for(var c=s.return;c!==null;){switch(c.tag){case 24:case 3:var m=Za();s=Gl(m);var v=Yl(c,s,m);v!==null&&(Oa(v,c,m),Rd(v,c,m)),c={cache:P1()},s.payload=c;return}c=c.return}}function kI(s,c,m){var v=Za();m={lane:v,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},E0(s)?jS(c,m):(m=w1(s,c,m,v),m!==null&&(Oa(m,s,v),zS(m,c,v)))}function US(s,c,m){var v=Za();Ud(s,c,m,v)}function Ud(s,c,m,v){var A={lane:v,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(E0(s))jS(c,A);else{var O=s.alternate;if(s.lanes===0&&(O===null||O.lanes===0)&&(O=c.lastRenderedReducer,O!==null))try{var j=c.lastRenderedState,Z=O(j,m);if(A.hasEagerState=!0,A.eagerState=Z,E(Z,j))return t0(s,c,A,0),br===null&&e0(),!1}catch{}finally{}if(m=w1(s,c,A,v),m!==null)return Oa(m,s,v),zS(m,c,v),!0}return!1}function sy(s,c,m,v){if(v={lane:2,revertLane:By(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},E0(s)){if(c)throw Error(n(479))}else c=w1(s,m,v,2),c!==null&&Oa(c,s,2)}function E0(s){var c=s.alternate;return s===kt||c!==null&&c===kt}function jS(s,c){au=h0=!0;var m=s.pending;m===null?c.next=c:(c.next=m.next,m.next=c),s.pending=c}function zS(s,c,m){if((m&4194048)!==0){var v=c.lanes;v&=s.pendingLanes,m|=v,c.lanes=m,ba(s,m)}}var jd={readContext:Wn,use:y0,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useLayoutEffect:Zr,useInsertionEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useSyncExternalStore:Zr,useId:Zr,useHostTransitionStatus:Zr,useFormState:Zr,useActionState:Zr,useOptimistic:Zr,useMemoCache:Zr,useCacheRefresh:Zr};jd.useEffectEvent=Zr;var VS={readContext:Wn,use:y0,useCallback:function(s,c){return ua().memoizedState=[s,c===void 0?null:c],s},useContext:Wn,useEffect:CS,useImperativeHandle:function(s,c,m){m=m!=null?m.concat([s]):null,b0(4194308,4,_S.bind(null,c,s),m)},useLayoutEffect:function(s,c){return b0(4194308,4,s,c)},useInsertionEffect:function(s,c){b0(4,2,s,c)},useMemo:function(s,c){var m=ua();c=c===void 0?null:c;var v=s();if(tc){Je(!0);try{s()}finally{Je(!1)}}return m.memoizedState=[v,c],v},useReducer:function(s,c,m){var v=ua();if(m!==void 0){var A=m(c);if(tc){Je(!0);try{m(c)}finally{Je(!1)}}}else A=c;return v.memoizedState=v.baseState=A,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:A},v.queue=s,s=s.dispatch=kI.bind(null,kt,s),[v.memoizedState,s]},useRef:function(s){var c=ua();return s={current:s},c.memoizedState=s},useState:function(s){s=Q1(s);var c=s.queue,m=US.bind(null,kt,c);return c.dispatch=m,[s.memoizedState,m]},useDebugValue:ty,useDeferredValue:function(s,c){var m=ua();return ry(m,s,c)},useTransition:function(){var s=Q1(!1);return s=RS.bind(null,kt,s.queue,!0,!1),ua().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,c,m){var v=kt,A=ua();if(Yt){if(m===void 0)throw Error(n(407));m=m()}else{if(m=c(),br===null)throw Error(n(349));(Ht&127)!==0||cS(v,c,m)}A.memoizedState=m;var O={value:m,getSnapshot:c};return A.queue=O,CS(dS.bind(null,v,O,s),[s]),v.flags|=2048,iu(9,{destroy:void 0},uS.bind(null,v,O,m,c),null),m},useId:function(){var s=ua(),c=br.identifierPrefix;if(Yt){var m=hi,v=mi;m=(v&~(1<<32-rt(v)-1)).toString(32)+m,c="_"+c+"R_"+m,m=g0++,0<m&&(c+="H"+m.toString(32)),c+="_"}else m=SI++,c="_"+c+"r_"+m.toString(32)+"_";return s.memoizedState=c},useHostTransitionStatus:ay,useFormState:vS,useActionState:vS,useOptimistic:function(s){var c=ua();c.memoizedState=c.baseState=s;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=m,c=sy.bind(null,kt,!0,m),m.dispatch=c,[s,c]},useMemoCache:W1,useCacheRefresh:function(){return ua().memoizedState=DI.bind(null,kt)},useEffectEvent:function(s){var c=ua(),m={impl:s};return c.memoizedState=m,function(){if((nr&2)!==0)throw Error(n(440));return m.impl.apply(void 0,arguments)}}},iy={readContext:Wn,use:y0,useCallback:kS,useContext:Wn,useEffect:ey,useImperativeHandle:DS,useInsertionEffect:TS,useLayoutEffect:OS,useMemo:MS,useReducer:x0,useRef:SS,useState:function(){return x0(Gi)},useDebugValue:ty,useDeferredValue:function(s,c){var m=on();return PS(m,dr.memoizedState,s,c)},useTransition:function(){var s=x0(Gi)[0],c=on().memoizedState;return[typeof s=="boolean"?s:Fd(s),c]},useSyncExternalStore:oS,useId:BS,useHostTransitionStatus:ay,useFormState:ES,useActionState:ES,useOptimistic:function(s,c){var m=on();return hS(m,dr,s,c)},useMemoCache:W1,useCacheRefresh:FS};iy.useEffectEvent=AS;var HS={readContext:Wn,use:y0,useCallback:kS,useContext:Wn,useEffect:ey,useImperativeHandle:DS,useInsertionEffect:TS,useLayoutEffect:OS,useMemo:MS,useReducer:Z1,useRef:SS,useState:function(){return Z1(Gi)},useDebugValue:ty,useDeferredValue:function(s,c){var m=on();return dr===null?ry(m,s,c):PS(m,dr.memoizedState,s,c)},useTransition:function(){var s=Z1(Gi)[0],c=on().memoizedState;return[typeof s=="boolean"?s:Fd(s),c]},useSyncExternalStore:oS,useId:BS,useHostTransitionStatus:ay,useFormState:NS,useActionState:NS,useOptimistic:function(s,c){var m=on();return dr!==null?hS(m,dr,s,c):(m.baseState=s,[s,m.queue.dispatch])},useMemoCache:W1,useCacheRefresh:FS};HS.useEffectEvent=AS;function ly(s,c,m,v){c=s.memoizedState,m=m(v,c),m=m==null?c:w({},c,m),s.memoizedState=m,s.lanes===0&&(s.updateQueue.baseState=m)}var oy={enqueueSetState:function(s,c,m){s=s._reactInternals;var v=Za(),A=Gl(v);A.payload=c,m!=null&&(A.callback=m),c=Yl(s,A,v),c!==null&&(Oa(c,s,v),Rd(c,s,v))},enqueueReplaceState:function(s,c,m){s=s._reactInternals;var v=Za(),A=Gl(v);A.tag=1,A.payload=c,m!=null&&(A.callback=m),c=Yl(s,A,v),c!==null&&(Oa(c,s,v),Rd(c,s,v))},enqueueForceUpdate:function(s,c){s=s._reactInternals;var m=Za(),v=Gl(m);v.tag=2,c!=null&&(v.callback=c),c=Yl(s,v,m),c!==null&&(Oa(c,s,m),Rd(c,s,m))}};function qS(s,c,m,v,A,O,j){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,O,j):c.prototype&&c.prototype.isPureReactComponent?!S(m,v)||!S(A,O):!0}function $S(s,c,m,v){s=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,v),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,v),c.state!==s&&oy.enqueueReplaceState(c,c.state,null)}function rc(s,c){var m=c;if("ref"in c){m={};for(var v in c)v!=="ref"&&(m[v]=c[v])}if(s=s.defaultProps){m===c&&(m=w({},m));for(var A in s)m[A]===void 0&&(m[A]=s[A])}return m}function GS(s){Jm(s)}function YS(s){console.error(s)}function XS(s){Jm(s)}function w0(s,c){try{var m=s.onUncaughtError;m(c.value,{componentStack:c.stack})}catch(v){setTimeout(function(){throw v})}}function WS(s,c,m){try{var v=s.onCaughtError;v(m.value,{componentStack:m.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function cy(s,c,m){return m=Gl(m),m.tag=3,m.payload={element:null},m.callback=function(){w0(s,c)},m}function KS(s){return s=Gl(s),s.tag=3,s}function ZS(s,c,m,v){var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var O=v.value;s.payload=function(){return A(O)},s.callback=function(){WS(c,m,v)}}var j=m.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(s.callback=function(){WS(c,m,v),typeof A!="function"&&(Jl===null?Jl=new Set([this]):Jl.add(this));var Z=v.stack;this.componentDidCatch(v.value,{componentStack:Z!==null?Z:""})})}function MI(s,c,m,v,A){if(m.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(c=m.alternate,c!==null&&Qc(c,m,A,!0),m=Ya.current,m!==null){switch(m.tag){case 31:case 13:return gs===null?R0():m.alternate===null&&Qr===0&&(Qr=3),m.flags&=-257,m.flags|=65536,m.lanes=A,v===c0?m.flags|=16384:(c=m.updateQueue,c===null?m.updateQueue=new Set([v]):c.add(v),Ry(s,v,A)),!1;case 22:return m.flags|=65536,v===c0?m.flags|=16384:(c=m.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([v])},m.updateQueue=c):(m=c.retryQueue,m===null?c.retryQueue=new Set([v]):m.add(v)),Ry(s,v,A)),!1}throw Error(n(435,m.tag))}return Ry(s,v,A),R0(),!1}if(Yt)return c=Ya.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=A,v!==O1&&(s=Error(n(422),{cause:v}),_d(ds(s,m)))):(v!==O1&&(c=Error(n(423),{cause:v}),_d(ds(c,m))),s=s.current.alternate,s.flags|=65536,A&=-A,s.lanes|=A,v=ds(v,m),A=cy(s.stateNode,v,A),U1(s,A),Qr!==4&&(Qr=2)),!1;var O=Error(n(520),{cause:v});if(O=ds(O,m),Xd===null?Xd=[O]:Xd.push(O),Qr!==4&&(Qr=2),c===null)return!0;v=ds(v,m),m=c;do{switch(m.tag){case 3:return m.flags|=65536,s=A&-A,m.lanes|=s,s=cy(m.stateNode,v,s),U1(m,s),!1;case 1:if(c=m.type,O=m.stateNode,(m.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Jl===null||!Jl.has(O))))return m.flags|=65536,A&=-A,m.lanes|=A,A=KS(A),ZS(A,s,m,v),U1(m,A),!1}m=m.return}while(m!==null);return!1}var uy=Error(n(461)),vn=!1;function Kn(s,c,m,v){c.child=s===null?tS(c,null,m,v):ec(c,s.child,m,v)}function QS(s,c,m,v,A){m=m.render;var O=c.ref;if("ref"in v){var j={};for(var Z in v)Z!=="ref"&&(j[Z]=v[Z])}else j=v;return Ko(c),v=$1(s,c,m,j,O,A),Z=G1(),s!==null&&!vn?(Y1(s,c,A),Yi(s,c,A)):(Yt&&Z&&A1(c),c.flags|=1,Kn(s,c,v,A),c.child)}function JS(s,c,m,v,A){if(s===null){var O=m.type;return typeof O=="function"&&!N1(O)&&O.defaultProps===void 0&&m.compare===null?(c.tag=15,c.type=O,e3(s,c,O,v,A)):(s=n0(m.type,null,v,c,c.mode,A),s.ref=c.ref,s.return=c,c.child=s)}if(O=s.child,!xy(s,A)){var j=O.memoizedProps;if(m=m.compare,m=m!==null?m:S,m(j,v)&&s.ref===c.ref)return Yi(s,c,A)}return c.flags|=1,s=zi(O,v),s.ref=c.ref,s.return=c,c.child=s}function e3(s,c,m,v,A){if(s!==null){var O=s.memoizedProps;if(S(O,v)&&s.ref===c.ref)if(vn=!1,c.pendingProps=v=O,xy(s,A))(s.flags&131072)!==0&&(vn=!0);else return c.lanes=s.lanes,Yi(s,c,A)}return dy(s,c,m,v,A)}function t3(s,c,m,v){var A=v.children,O=s!==null?s.memoizedState:null;if(s===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((c.flags&128)!==0){if(O=O!==null?O.baseLanes|m:m,s!==null){for(v=c.child=s.child,A=0;v!==null;)A=A|v.lanes|v.childLanes,v=v.sibling;v=A&~O}else v=0,c.child=null;return r3(s,c,O,m,v)}if((m&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},s!==null&&l0(c,O!==null?O.cachePool:null),O!==null?aS(c,O):z1(),sS(c);else return v=c.lanes=536870912,r3(s,c,O!==null?O.baseLanes|m:m,m,v)}else O!==null?(l0(c,O.cachePool),aS(c,O),Wl(),c.memoizedState=null):(s!==null&&l0(c,null),z1(),Wl());return Kn(s,c,A,m),c.child}function zd(s,c){return s!==null&&s.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function r3(s,c,m,v,A){var O=I1();return O=O===null?null:{parent:xn._currentValue,pool:O},c.memoizedState={baseLanes:m,cachePool:O},s!==null&&l0(c,null),z1(),sS(c),s!==null&&Qc(s,c,v,!0),c.childLanes=A,null}function N0(s,c){return c=C0({mode:c.mode,children:c.children},s.mode),c.ref=s.ref,s.child=c,c.return=s,c}function n3(s,c,m){return ec(c,s.child,null,m),s=N0(c,c.pendingProps),s.flags|=2,Xa(c),c.memoizedState=null,s}function PI(s,c,m){var v=c.pendingProps,A=(c.flags&128)!==0;if(c.flags&=-129,s===null){if(Yt){if(v.mode==="hidden")return s=N0(c,v),c.lanes=536870912,zd(null,s);if(H1(c),(s=_r)?(s=gC(s,hs),s=s!==null&&s.data==="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:zl!==null?{id:mi,overflow:hi}:null,retryLane:536870912,hydrationErrors:null},m=jN(s),m.return=c,c.child=m,Xn=c,_r=null)):s=null,s===null)throw Hl(c);return c.lanes=536870912,null}return N0(c,v)}var O=s.memoizedState;if(O!==null){var j=O.dehydrated;if(H1(c),A)if(c.flags&256)c.flags&=-257,c=n3(s,c,m);else if(c.memoizedState!==null)c.child=s.child,c.flags|=128,c=null;else throw Error(n(558));else if(vn||Qc(s,c,m,!1),A=(m&s.childLanes)!==0,vn||A){if(v=br,v!==null&&(j=Pi(v,m),j!==0&&j!==O.retryLane))throw O.retryLane=j,Go(s,j),Oa(v,s,j),uy;R0(),c=n3(s,c,m)}else s=O.treeContext,_r=ps(j.nextSibling),Xn=c,Yt=!0,Vl=null,hs=!1,s!==null&&HN(c,s),c=N0(c,v),c.flags|=4096;return c}return s=zi(s.child,{mode:v.mode,children:v.children}),s.ref=c.ref,c.child=s,s.return=c,s}function S0(s,c){var m=c.ref;if(m===null)s!==null&&s.ref!==null&&(c.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(n(284));(s===null||s.ref!==m)&&(c.flags|=4194816)}}function dy(s,c,m,v,A){return Ko(c),m=$1(s,c,m,v,void 0,A),v=G1(),s!==null&&!vn?(Y1(s,c,A),Yi(s,c,A)):(Yt&&v&&A1(c),c.flags|=1,Kn(s,c,m,A),c.child)}function a3(s,c,m,v,A,O){return Ko(c),c.updateQueue=null,m=lS(c,v,m,A),iS(s),v=G1(),s!==null&&!vn?(Y1(s,c,O),Yi(s,c,O)):(Yt&&v&&A1(c),c.flags|=1,Kn(s,c,m,O),c.child)}function s3(s,c,m,v,A){if(Ko(c),c.stateNode===null){var O=Xc,j=m.contextType;typeof j=="object"&&j!==null&&(O=Wn(j)),O=new m(v,O),c.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=oy,c.stateNode=O,O._reactInternals=c,O=c.stateNode,O.props=v,O.state=c.memoizedState,O.refs={},B1(c),j=m.contextType,O.context=typeof j=="object"&&j!==null?Wn(j):Xc,O.state=c.memoizedState,j=m.getDerivedStateFromProps,typeof j=="function"&&(ly(c,m,j,v),O.state=c.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(j=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),j!==O.state&&oy.enqueueReplaceState(O,O.state,null),Ld(c,v,O,A),Id(),O.state=c.memoizedState),typeof O.componentDidMount=="function"&&(c.flags|=4194308),v=!0}else if(s===null){O=c.stateNode;var Z=c.memoizedProps,le=rc(m,Z);O.props=le;var Ae=O.context,ze=m.contextType;j=Xc,typeof ze=="object"&&ze!==null&&(j=Wn(ze));var qe=m.getDerivedStateFromProps;ze=typeof qe=="function"||typeof O.getSnapshotBeforeUpdate=="function",Z=c.pendingProps!==Z,ze||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Z||Ae!==j)&&$S(c,O,v,j),$l=!1;var Oe=c.memoizedState;O.state=Oe,Ld(c,v,O,A),Id(),Ae=c.memoizedState,Z||Oe!==Ae||$l?(typeof qe=="function"&&(ly(c,m,qe,v),Ae=c.memoizedState),(le=$l||qS(c,m,le,v,Oe,Ae,j))?(ze||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(c.flags|=4194308)):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=v,c.memoizedState=Ae),O.props=v,O.state=Ae,O.context=j,v=le):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),v=!1)}else{O=c.stateNode,F1(s,c),j=c.memoizedProps,ze=rc(m,j),O.props=ze,qe=c.pendingProps,Oe=O.context,Ae=m.contextType,le=Xc,typeof Ae=="object"&&Ae!==null&&(le=Wn(Ae)),Z=m.getDerivedStateFromProps,(Ae=typeof Z=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(j!==qe||Oe!==le)&&$S(c,O,v,le),$l=!1,Oe=c.memoizedState,O.state=Oe,Ld(c,v,O,A),Id();var Pe=c.memoizedState;j!==qe||Oe!==Pe||$l||s!==null&&s.dependencies!==null&&s0(s.dependencies)?(typeof Z=="function"&&(ly(c,m,Z,v),Pe=c.memoizedState),(ze=$l||qS(c,m,ze,v,Oe,Pe,le)||s!==null&&s.dependencies!==null&&s0(s.dependencies))?(Ae||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(v,Pe,le),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(v,Pe,le)),typeof O.componentDidUpdate=="function"&&(c.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof O.componentDidUpdate!="function"||j===s.memoizedProps&&Oe===s.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||j===s.memoizedProps&&Oe===s.memoizedState||(c.flags|=1024),c.memoizedProps=v,c.memoizedState=Pe),O.props=v,O.state=Pe,O.context=le,v=ze):(typeof O.componentDidUpdate!="function"||j===s.memoizedProps&&Oe===s.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||j===s.memoizedProps&&Oe===s.memoizedState||(c.flags|=1024),v=!1)}return O=v,S0(s,c),v=(c.flags&128)!==0,O||v?(O=c.stateNode,m=v&&typeof m.getDerivedStateFromError!="function"?null:O.render(),c.flags|=1,s!==null&&v?(c.child=ec(c,s.child,null,A),c.child=ec(c,null,m,A)):Kn(s,c,m,A),c.memoizedState=O.state,s=c.child):s=Yi(s,c,A),s}function i3(s,c,m,v){return Xo(),c.flags|=256,Kn(s,c,m,v),c.child}var fy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function my(s){return{baseLanes:s,cachePool:WN()}}function hy(s,c,m){return s=s!==null?s.childLanes&~m:0,c&&(s|=Ka),s}function l3(s,c,m){var v=c.pendingProps,A=!1,O=(c.flags&128)!==0,j;if((j=O)||(j=s!==null&&s.memoizedState===null?!1:(ln.current&2)!==0),j&&(A=!0,c.flags&=-129),j=(c.flags&32)!==0,c.flags&=-33,s===null){if(Yt){if(A?Xl(c):Wl(),(s=_r)?(s=gC(s,hs),s=s!==null&&s.data!=="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:zl!==null?{id:mi,overflow:hi}:null,retryLane:536870912,hydrationErrors:null},m=jN(s),m.return=c,c.child=m,Xn=c,_r=null)):s=null,s===null)throw Hl(c);return Ky(s)?c.lanes=32:c.lanes=536870912,null}var Z=v.children;return v=v.fallback,A?(Wl(),A=c.mode,Z=C0({mode:"hidden",children:Z},A),v=Yo(v,A,m,null),Z.return=c,v.return=c,Z.sibling=v,c.child=Z,v=c.child,v.memoizedState=my(m),v.childLanes=hy(s,j,m),c.memoizedState=fy,zd(null,v)):(Xl(c),gy(c,Z))}var le=s.memoizedState;if(le!==null&&(Z=le.dehydrated,Z!==null)){if(O)c.flags&256?(Xl(c),c.flags&=-257,c=py(s,c,m)):c.memoizedState!==null?(Wl(),c.child=s.child,c.flags|=128,c=null):(Wl(),Z=v.fallback,A=c.mode,v=C0({mode:"visible",children:v.children},A),Z=Yo(Z,A,m,null),Z.flags|=2,v.return=c,Z.return=c,v.sibling=Z,c.child=v,ec(c,s.child,null,m),v=c.child,v.memoizedState=my(m),v.childLanes=hy(s,j,m),c.memoizedState=fy,c=zd(null,v));else if(Xl(c),Ky(Z)){if(j=Z.nextSibling&&Z.nextSibling.dataset,j)var Ae=j.dgst;j=Ae,v=Error(n(419)),v.stack="",v.digest=j,_d({value:v,source:null,stack:null}),c=py(s,c,m)}else if(vn||Qc(s,c,m,!1),j=(m&s.childLanes)!==0,vn||j){if(j=br,j!==null&&(v=Pi(j,m),v!==0&&v!==le.retryLane))throw le.retryLane=v,Go(s,v),Oa(j,s,v),uy;Wy(Z)||R0(),c=py(s,c,m)}else Wy(Z)?(c.flags|=192,c.child=s.child,c=null):(s=le.treeContext,_r=ps(Z.nextSibling),Xn=c,Yt=!0,Vl=null,hs=!1,s!==null&&HN(c,s),c=gy(c,v.children),c.flags|=4096);return c}return A?(Wl(),Z=v.fallback,A=c.mode,le=s.child,Ae=le.sibling,v=zi(le,{mode:"hidden",children:v.children}),v.subtreeFlags=le.subtreeFlags&65011712,Ae!==null?Z=zi(Ae,Z):(Z=Yo(Z,A,m,null),Z.flags|=2),Z.return=c,v.return=c,v.sibling=Z,c.child=v,zd(null,v),v=c.child,Z=s.child.memoizedState,Z===null?Z=my(m):(A=Z.cachePool,A!==null?(le=xn._currentValue,A=A.parent!==le?{parent:le,pool:le}:A):A=WN(),Z={baseLanes:Z.baseLanes|m,cachePool:A}),v.memoizedState=Z,v.childLanes=hy(s,j,m),c.memoizedState=fy,zd(s.child,v)):(Xl(c),m=s.child,s=m.sibling,m=zi(m,{mode:"visible",children:v.children}),m.return=c,m.sibling=null,s!==null&&(j=c.deletions,j===null?(c.deletions=[s],c.flags|=16):j.push(s)),c.child=m,c.memoizedState=null,m)}function gy(s,c){return c=C0({mode:"visible",children:c},s.mode),c.return=s,s.child=c}function C0(s,c){return s=Ga(22,s,null,c),s.lanes=0,s}function py(s,c,m){return ec(c,s.child,null,m),s=gy(c,c.pendingProps.children),s.flags|=2,c.memoizedState=null,s}function o3(s,c,m){s.lanes|=c;var v=s.alternate;v!==null&&(v.lanes|=c),k1(s.return,c,m)}function yy(s,c,m,v,A,O){var j=s.memoizedState;j===null?s.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:A,treeForkCount:O}:(j.isBackwards=c,j.rendering=null,j.renderingStartTime=0,j.last=v,j.tail=m,j.tailMode=A,j.treeForkCount=O)}function c3(s,c,m){var v=c.pendingProps,A=v.revealOrder,O=v.tail;v=v.children;var j=ln.current,Z=(j&2)!==0;if(Z?(j=j&1|2,c.flags|=128):j&=1,fe(ln,j),Kn(s,c,v,m),v=Yt?Od:0,!Z&&s!==null&&(s.flags&128)!==0)e:for(s=c.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&o3(s,m,c);else if(s.tag===19)o3(s,m,c);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===c)break e;for(;s.sibling===null;){if(s.return===null||s.return===c)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(A){case"forwards":for(m=c.child,A=null;m!==null;)s=m.alternate,s!==null&&m0(s)===null&&(A=m),m=m.sibling;m=A,m===null?(A=c.child,c.child=null):(A=m.sibling,m.sibling=null),yy(c,!1,A,m,O,v);break;case"backwards":case"unstable_legacy-backwards":for(m=null,A=c.child,c.child=null;A!==null;){if(s=A.alternate,s!==null&&m0(s)===null){c.child=A;break}s=A.sibling,A.sibling=m,m=A,A=s}yy(c,!0,m,null,O,v);break;case"together":yy(c,!1,null,null,void 0,v);break;default:c.memoizedState=null}return c.child}function Yi(s,c,m){if(s!==null&&(c.dependencies=s.dependencies),Ql|=c.lanes,(m&c.childLanes)===0)if(s!==null){if(Qc(s,c,m,!1),(m&c.childLanes)===0)return null}else return null;if(s!==null&&c.child!==s.child)throw Error(n(153));if(c.child!==null){for(s=c.child,m=zi(s,s.pendingProps),c.child=m,m.return=c;s.sibling!==null;)s=s.sibling,m=m.sibling=zi(s,s.pendingProps),m.return=c;m.sibling=null}return c.child}function xy(s,c){return(s.lanes&c)!==0?!0:(s=s.dependencies,!!(s!==null&&s0(s)))}function RI(s,c,m){switch(c.tag){case 3:He(c,c.stateNode.containerInfo),ql(c,xn,s.memoizedState.cache),Xo();break;case 27:case 5:We(c);break;case 4:He(c,c.stateNode.containerInfo);break;case 10:ql(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,H1(c),null;break;case 13:var v=c.memoizedState;if(v!==null)return v.dehydrated!==null?(Xl(c),c.flags|=128,null):(m&c.child.childLanes)!==0?l3(s,c,m):(Xl(c),s=Yi(s,c,m),s!==null?s.sibling:null);Xl(c);break;case 19:var A=(s.flags&128)!==0;if(v=(m&c.childLanes)!==0,v||(Qc(s,c,m,!1),v=(m&c.childLanes)!==0),A){if(v)return c3(s,c,m);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),fe(ln,ln.current),v)break;return null;case 22:return c.lanes=0,t3(s,c,m,c.pendingProps);case 24:ql(c,xn,s.memoizedState.cache)}return Yi(s,c,m)}function u3(s,c,m){if(s!==null)if(s.memoizedProps!==c.pendingProps)vn=!0;else{if(!xy(s,m)&&(c.flags&128)===0)return vn=!1,RI(s,c,m);vn=(s.flags&131072)!==0}else vn=!1,Yt&&(c.flags&1048576)!==0&&VN(c,Od,c.index);switch(c.lanes=0,c.tag){case 16:e:{var v=c.pendingProps;if(s=Qo(c.elementType),c.type=s,typeof s=="function")N1(s)?(v=rc(s,v),c.tag=1,c=s3(null,c,s,v,m)):(c.tag=0,c=dy(null,c,s,v,m));else{if(s!=null){var A=s.$$typeof;if(A===G){c.tag=11,c=QS(null,c,s,v,m);break e}else if(A===L){c.tag=14,c=JS(null,c,s,v,m);break e}}throw c=xe(s)||s,Error(n(306,c,""))}}return c;case 0:return dy(s,c,c.type,c.pendingProps,m);case 1:return v=c.type,A=rc(v,c.pendingProps),s3(s,c,v,A,m);case 3:e:{if(He(c,c.stateNode.containerInfo),s===null)throw Error(n(387));v=c.pendingProps;var O=c.memoizedState;A=O.element,F1(s,c),Ld(c,v,null,m);var j=c.memoizedState;if(v=j.cache,ql(c,xn,v),v!==O.cache&&M1(c,[xn],m,!0),Id(),v=j.element,O.isDehydrated)if(O={element:v,isDehydrated:!1,cache:j.cache},c.updateQueue.baseState=O,c.memoizedState=O,c.flags&256){c=i3(s,c,v,m);break e}else if(v!==A){A=ds(Error(n(424)),c),_d(A),c=i3(s,c,v,m);break e}else{switch(s=c.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(_r=ps(s.firstChild),Xn=c,Yt=!0,Vl=null,hs=!0,m=tS(c,null,v,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Xo(),v===A){c=Yi(s,c,m);break e}Kn(s,c,v,m)}c=c.child}return c;case 26:return S0(s,c),s===null?(m=EC(c.type,null,c.pendingProps,null))?c.memoizedState=m:Yt||(m=c.type,s=c.pendingProps,v=z0(ie.current).createElement(m),v[Rr]=c,v[Kt]=s,Zn(v,m,s),wr(v),c.stateNode=v):c.memoizedState=EC(c.type,s.memoizedProps,c.pendingProps,s.memoizedState),null;case 27:return We(c),s===null&&Yt&&(v=c.stateNode=xC(c.type,c.pendingProps,ie.current),Xn=c,hs=!0,A=_r,no(c.type)?(Zy=A,_r=ps(v.firstChild)):_r=A),Kn(s,c,c.pendingProps.children,m),S0(s,c),s===null&&(c.flags|=4194304),c.child;case 5:return s===null&&Yt&&((A=v=_r)&&(v=u9(v,c.type,c.pendingProps,hs),v!==null?(c.stateNode=v,Xn=c,_r=ps(v.firstChild),hs=!1,A=!0):A=!1),A||Hl(c)),We(c),A=c.type,O=c.pendingProps,j=s!==null?s.memoizedProps:null,v=O.children,Gy(A,O)?v=null:j!==null&&Gy(A,j)&&(c.flags|=32),c.memoizedState!==null&&(A=$1(s,c,CI,null,null,m),rf._currentValue=A),S0(s,c),Kn(s,c,v,m),c.child;case 6:return s===null&&Yt&&((s=m=_r)&&(m=d9(m,c.pendingProps,hs),m!==null?(c.stateNode=m,Xn=c,_r=null,s=!0):s=!1),s||Hl(c)),null;case 13:return l3(s,c,m);case 4:return He(c,c.stateNode.containerInfo),v=c.pendingProps,s===null?c.child=ec(c,null,v,m):Kn(s,c,v,m),c.child;case 11:return QS(s,c,c.type,c.pendingProps,m);case 7:return Kn(s,c,c.pendingProps,m),c.child;case 8:return Kn(s,c,c.pendingProps.children,m),c.child;case 12:return Kn(s,c,c.pendingProps.children,m),c.child;case 10:return v=c.pendingProps,ql(c,c.type,v.value),Kn(s,c,v.children,m),c.child;case 9:return A=c.type._context,v=c.pendingProps.children,Ko(c),A=Wn(A),v=v(A),c.flags|=1,Kn(s,c,v,m),c.child;case 14:return JS(s,c,c.type,c.pendingProps,m);case 15:return e3(s,c,c.type,c.pendingProps,m);case 19:return c3(s,c,m);case 31:return PI(s,c,m);case 22:return t3(s,c,m,c.pendingProps);case 24:return Ko(c),v=Wn(xn),s===null?(A=I1(),A===null&&(A=br,O=P1(),A.pooledCache=O,O.refCount++,O!==null&&(A.pooledCacheLanes|=m),A=O),c.memoizedState={parent:v,cache:A},B1(c),ql(c,xn,A)):((s.lanes&m)!==0&&(F1(s,c),Ld(c,null,null,m),Id()),A=s.memoizedState,O=c.memoizedState,A.parent!==v?(A={parent:v,cache:v},c.memoizedState=A,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=A),ql(c,xn,v)):(v=O.cache,ql(c,xn,v),v!==A.cache&&M1(c,[xn],m,!0))),Kn(s,c,c.pendingProps.children,m),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function Xi(s){s.flags|=4}function by(s,c,m,v,A){if((c=(s.mode&32)!==0)&&(c=!1),c){if(s.flags|=16777216,(A&335544128)===A)if(s.stateNode.complete)s.flags|=8192;else if(B3())s.flags|=8192;else throw Jo=c0,L1}else s.flags&=-16777217}function d3(s,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!AC(c))if(B3())s.flags|=8192;else throw Jo=c0,L1}function A0(s,c){c!==null&&(s.flags|=4),s.flags&16384&&(c=s.tag!==22?xt():536870912,s.lanes|=c,uu|=c)}function Vd(s,c){if(!Yt)switch(s.tailMode){case"hidden":c=s.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?s.tail=null:m.sibling=null;break;case"collapsed":m=s.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?c||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function Dr(s){var c=s.alternate!==null&&s.alternate.child===s.child,m=0,v=0;if(c)for(var A=s.child;A!==null;)m|=A.lanes|A.childLanes,v|=A.subtreeFlags&65011712,v|=A.flags&65011712,A.return=s,A=A.sibling;else for(A=s.child;A!==null;)m|=A.lanes|A.childLanes,v|=A.subtreeFlags,v|=A.flags,A.return=s,A=A.sibling;return s.subtreeFlags|=v,s.childLanes=m,c}function II(s,c,m){var v=c.pendingProps;switch(T1(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(c),null;case 1:return Dr(c),null;case 3:return m=c.stateNode,v=null,s!==null&&(v=s.memoizedState.cache),c.memoizedState.cache!==v&&(c.flags|=2048),qi(xn),ve(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(Zc(c)?Xi(c):s===null||s.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,_1())),Dr(c),null;case 26:var A=c.type,O=c.memoizedState;return s===null?(Xi(c),O!==null?(Dr(c),d3(c,O)):(Dr(c),by(c,A,null,v,m))):O?O!==s.memoizedState?(Xi(c),Dr(c),d3(c,O)):(Dr(c),c.flags&=-16777217):(s=s.memoizedProps,s!==v&&Xi(c),Dr(c),by(c,A,s,v,m)),null;case 27:if(be(c),m=ie.current,A=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==v&&Xi(c);else{if(!v){if(c.stateNode===null)throw Error(n(166));return Dr(c),null}s=ce.current,Zc(c)?qN(c):(s=xC(A,v,m),c.stateNode=s,Xi(c))}return Dr(c),null;case 5:if(be(c),A=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==v&&Xi(c);else{if(!v){if(c.stateNode===null)throw Error(n(166));return Dr(c),null}if(O=ce.current,Zc(c))qN(c);else{var j=z0(ie.current);switch(O){case 1:O=j.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:O=j.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":O=j.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":O=j.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":O=j.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof v.is=="string"?j.createElement("select",{is:v.is}):j.createElement("select"),v.multiple?O.multiple=!0:v.size&&(O.size=v.size);break;default:O=typeof v.is=="string"?j.createElement(A,{is:v.is}):j.createElement(A)}}O[Rr]=c,O[Kt]=v;e:for(j=c.child;j!==null;){if(j.tag===5||j.tag===6)O.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===c)break e;for(;j.sibling===null;){if(j.return===null||j.return===c)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}c.stateNode=O;e:switch(Zn(O,A,v),A){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&Xi(c)}}return Dr(c),by(c,c.type,s===null?null:s.memoizedProps,c.pendingProps,m),null;case 6:if(s&&c.stateNode!=null)s.memoizedProps!==v&&Xi(c);else{if(typeof v!="string"&&c.stateNode===null)throw Error(n(166));if(s=ie.current,Zc(c)){if(s=c.stateNode,m=c.memoizedProps,v=null,A=Xn,A!==null)switch(A.tag){case 27:case 5:v=A.memoizedProps}s[Rr]=c,s=!!(s.nodeValue===m||v!==null&&v.suppressHydrationWarning===!0||lC(s.nodeValue,m)),s||Hl(c,!0)}else s=z0(s).createTextNode(v),s[Rr]=c,c.stateNode=s}return Dr(c),null;case 31:if(m=c.memoizedState,s===null||s.memoizedState!==null){if(v=Zc(c),m!==null){if(s===null){if(!v)throw Error(n(318));if(s=c.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(557));s[Rr]=c}else Xo(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Dr(c),s=!1}else m=_1(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),s=!0;if(!s)return c.flags&256?(Xa(c),c):(Xa(c),null);if((c.flags&128)!==0)throw Error(n(558))}return Dr(c),null;case 13:if(v=c.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(A=Zc(c),v!==null&&v.dehydrated!==null){if(s===null){if(!A)throw Error(n(318));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[Rr]=c}else Xo(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Dr(c),A=!1}else A=_1(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=A),A=!0;if(!A)return c.flags&256?(Xa(c),c):(Xa(c),null)}return Xa(c),(c.flags&128)!==0?(c.lanes=m,c):(m=v!==null,s=s!==null&&s.memoizedState!==null,m&&(v=c.child,A=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(A=v.alternate.memoizedState.cachePool.pool),O=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(O=v.memoizedState.cachePool.pool),O!==A&&(v.flags|=2048)),m!==s&&m&&(c.child.flags|=8192),A0(c,c.updateQueue),Dr(c),null);case 4:return ve(),s===null&&zy(c.stateNode.containerInfo),Dr(c),null;case 10:return qi(c.type),Dr(c),null;case 19:if(ee(ln),v=c.memoizedState,v===null)return Dr(c),null;if(A=(c.flags&128)!==0,O=v.rendering,O===null)if(A)Vd(v,!1);else{if(Qr!==0||s!==null&&(s.flags&128)!==0)for(s=c.child;s!==null;){if(O=m0(s),O!==null){for(c.flags|=128,Vd(v,!1),s=O.updateQueue,c.updateQueue=s,A0(c,s),c.subtreeFlags=0,s=m,m=c.child;m!==null;)UN(m,s),m=m.sibling;return fe(ln,ln.current&1|2),Yt&&Vi(c,v.treeForkCount),c.child}s=s.sibling}v.tail!==null&&Be()>k0&&(c.flags|=128,A=!0,Vd(v,!1),c.lanes=4194304)}else{if(!A)if(s=m0(O),s!==null){if(c.flags|=128,A=!0,s=s.updateQueue,c.updateQueue=s,A0(c,s),Vd(v,!0),v.tail===null&&v.tailMode==="hidden"&&!O.alternate&&!Yt)return Dr(c),null}else 2*Be()-v.renderingStartTime>k0&&m!==536870912&&(c.flags|=128,A=!0,Vd(v,!1),c.lanes=4194304);v.isBackwards?(O.sibling=c.child,c.child=O):(s=v.last,s!==null?s.sibling=O:c.child=O,v.last=O)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=Be(),s.sibling=null,m=ln.current,fe(ln,A?m&1|2:m&1),Yt&&Vi(c,v.treeForkCount),s):(Dr(c),null);case 22:case 23:return Xa(c),V1(),v=c.memoizedState!==null,s!==null?s.memoizedState!==null!==v&&(c.flags|=8192):v&&(c.flags|=8192),v?(m&536870912)!==0&&(c.flags&128)===0&&(Dr(c),c.subtreeFlags&6&&(c.flags|=8192)):Dr(c),m=c.updateQueue,m!==null&&A0(c,m.retryQueue),m=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==m&&(c.flags|=2048),s!==null&&ee(Zo),null;case 24:return m=null,s!==null&&(m=s.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),qi(xn),Dr(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function LI(s,c){switch(T1(c),c.tag){case 1:return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 3:return qi(xn),ve(),s=c.flags,(s&65536)!==0&&(s&128)===0?(c.flags=s&-65537|128,c):null;case 26:case 27:case 5:return be(c),null;case 31:if(c.memoizedState!==null){if(Xa(c),c.alternate===null)throw Error(n(340));Xo()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 13:if(Xa(c),s=c.memoizedState,s!==null&&s.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Xo()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 19:return ee(ln),null;case 4:return ve(),null;case 10:return qi(c.type),null;case 22:case 23:return Xa(c),V1(),s!==null&&ee(Zo),s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 24:return qi(xn),null;case 25:return null;default:return null}}function f3(s,c){switch(T1(c),c.tag){case 3:qi(xn),ve();break;case 26:case 27:case 5:be(c);break;case 4:ve();break;case 31:c.memoizedState!==null&&Xa(c);break;case 13:Xa(c);break;case 19:ee(ln);break;case 10:qi(c.type);break;case 22:case 23:Xa(c),V1(),s!==null&&ee(Zo);break;case 24:qi(xn)}}function Hd(s,c){try{var m=c.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var A=v.next;m=A;do{if((m.tag&s)===s){v=void 0;var O=m.create,j=m.inst;v=O(),j.destroy=v}m=m.next}while(m!==A)}}catch(Z){cr(c,c.return,Z)}}function Kl(s,c,m){try{var v=c.updateQueue,A=v!==null?v.lastEffect:null;if(A!==null){var O=A.next;v=O;do{if((v.tag&s)===s){var j=v.inst,Z=j.destroy;if(Z!==void 0){j.destroy=void 0,A=c;var le=m,Ae=Z;try{Ae()}catch(ze){cr(A,le,ze)}}}v=v.next}while(v!==O)}}catch(ze){cr(c,c.return,ze)}}function m3(s){var c=s.updateQueue;if(c!==null){var m=s.stateNode;try{nS(c,m)}catch(v){cr(s,s.return,v)}}}function h3(s,c,m){m.props=rc(s.type,s.memoizedProps),m.state=s.memoizedState;try{m.componentWillUnmount()}catch(v){cr(s,c,v)}}function qd(s,c){try{var m=s.ref;if(m!==null){switch(s.tag){case 26:case 27:case 5:var v=s.stateNode;break;case 30:v=s.stateNode;break;default:v=s.stateNode}typeof m=="function"?s.refCleanup=m(v):m.current=v}}catch(A){cr(s,c,A)}}function gi(s,c){var m=s.ref,v=s.refCleanup;if(m!==null)if(typeof v=="function")try{v()}catch(A){cr(s,c,A)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(A){cr(s,c,A)}else m.current=null}function g3(s){var c=s.type,m=s.memoizedProps,v=s.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":m.autoFocus&&v.focus();break e;case"img":m.src?v.src=m.src:m.srcSet&&(v.srcset=m.srcSet)}}catch(A){cr(s,s.return,A)}}function vy(s,c,m){try{var v=s.stateNode;a9(v,s.type,m,c),v[Kt]=c}catch(A){cr(s,s.return,A)}}function p3(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&no(s.type)||s.tag===4}function Ey(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||p3(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&no(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function wy(s,c,m){var v=s.tag;if(v===5||v===6)s=s.stateNode,c?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(s,c):(c=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,c.appendChild(s),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Ea));else if(v!==4&&(v===27&&no(s.type)&&(m=s.stateNode,c=null),s=s.child,s!==null))for(wy(s,c,m),s=s.sibling;s!==null;)wy(s,c,m),s=s.sibling}function T0(s,c,m){var v=s.tag;if(v===5||v===6)s=s.stateNode,c?m.insertBefore(s,c):m.appendChild(s);else if(v!==4&&(v===27&&no(s.type)&&(m=s.stateNode),s=s.child,s!==null))for(T0(s,c,m),s=s.sibling;s!==null;)T0(s,c,m),s=s.sibling}function y3(s){var c=s.stateNode,m=s.memoizedProps;try{for(var v=s.type,A=c.attributes;A.length;)c.removeAttributeNode(A[0]);Zn(c,v,m),c[Rr]=s,c[Kt]=m}catch(O){cr(s,s.return,O)}}var Wi=!1,En=!1,Ny=!1,x3=typeof WeakSet=="function"?WeakSet:Set,Un=null;function BI(s,c){if(s=s.containerInfo,qy=X0,s=$(s),W(s)){if("selectionStart"in s)var m={start:s.selectionStart,end:s.selectionEnd};else e:{m=(m=s.ownerDocument)&&m.defaultView||window;var v=m.getSelection&&m.getSelection();if(v&&v.rangeCount!==0){m=v.anchorNode;var A=v.anchorOffset,O=v.focusNode;v=v.focusOffset;try{m.nodeType,O.nodeType}catch{m=null;break e}var j=0,Z=-1,le=-1,Ae=0,ze=0,qe=s,Oe=null;t:for(;;){for(var Pe;qe!==m||A!==0&&qe.nodeType!==3||(Z=j+A),qe!==O||v!==0&&qe.nodeType!==3||(le=j+v),qe.nodeType===3&&(j+=qe.nodeValue.length),(Pe=qe.firstChild)!==null;)Oe=qe,qe=Pe;for(;;){if(qe===s)break t;if(Oe===m&&++Ae===A&&(Z=j),Oe===O&&++ze===v&&(le=j),(Pe=qe.nextSibling)!==null)break;qe=Oe,Oe=qe.parentNode}qe=Pe}m=Z===-1||le===-1?null:{start:Z,end:le}}else m=null}m=m||{start:0,end:0}}else m=null;for($y={focusedElem:s,selectionRange:m},X0=!1,Un=c;Un!==null;)if(c=Un,s=c.child,(c.subtreeFlags&1028)!==0&&s!==null)s.return=c,Un=s;else for(;Un!==null;){switch(c=Un,O=c.alternate,s=c.flags,c.tag){case 0:if((s&4)!==0&&(s=c.updateQueue,s=s!==null?s.events:null,s!==null))for(m=0;m<s.length;m++)A=s[m],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&O!==null){s=void 0,m=c,A=O.memoizedProps,O=O.memoizedState,v=m.stateNode;try{var ot=rc(m.type,A);s=v.getSnapshotBeforeUpdate(ot,O),v.__reactInternalSnapshotBeforeUpdate=s}catch(Et){cr(m,m.return,Et)}}break;case 3:if((s&1024)!==0){if(s=c.stateNode.containerInfo,m=s.nodeType,m===9)Xy(s);else if(m===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Xy(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=c.sibling,s!==null){s.return=c.return,Un=s;break}Un=c.return}}function b3(s,c,m){var v=m.flags;switch(m.tag){case 0:case 11:case 15:Zi(s,m),v&4&&Hd(5,m);break;case 1:if(Zi(s,m),v&4)if(s=m.stateNode,c===null)try{s.componentDidMount()}catch(j){cr(m,m.return,j)}else{var A=rc(m.type,c.memoizedProps);c=c.memoizedState;try{s.componentDidUpdate(A,c,s.__reactInternalSnapshotBeforeUpdate)}catch(j){cr(m,m.return,j)}}v&64&&m3(m),v&512&&qd(m,m.return);break;case 3:if(Zi(s,m),v&64&&(s=m.updateQueue,s!==null)){if(c=null,m.child!==null)switch(m.child.tag){case 27:case 5:c=m.child.stateNode;break;case 1:c=m.child.stateNode}try{nS(s,c)}catch(j){cr(m,m.return,j)}}break;case 27:c===null&&v&4&&y3(m);case 26:case 5:Zi(s,m),c===null&&v&4&&g3(m),v&512&&qd(m,m.return);break;case 12:Zi(s,m);break;case 31:Zi(s,m),v&4&&w3(s,m);break;case 13:Zi(s,m),v&4&&N3(s,m),v&64&&(s=m.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(m=GI.bind(null,m),f9(s,m))));break;case 22:if(v=m.memoizedState!==null||Wi,!v){c=c!==null&&c.memoizedState!==null||En,A=Wi;var O=En;Wi=v,(En=c)&&!O?Qi(s,m,(m.subtreeFlags&8772)!==0):Zi(s,m),Wi=A,En=O}break;case 30:break;default:Zi(s,m)}}function v3(s){var c=s.alternate;c!==null&&(s.alternate=null,v3(c)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(c=s.stateNode,c!==null&&Gn(c)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Lr=null,Sa=!1;function Ki(s,c,m){for(m=m.child;m!==null;)E3(s,c,m),m=m.sibling}function E3(s,c,m){if(ge&&typeof ge.onCommitFiberUnmount=="function")try{ge.onCommitFiberUnmount(Gt,m)}catch{}switch(m.tag){case 26:En||gi(m,c),Ki(s,c,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:En||gi(m,c);var v=Lr,A=Sa;no(m.type)&&(Lr=m.stateNode,Sa=!1),Ki(s,c,m),Jd(m.stateNode),Lr=v,Sa=A;break;case 5:En||gi(m,c);case 6:if(v=Lr,A=Sa,Lr=null,Ki(s,c,m),Lr=v,Sa=A,Lr!==null)if(Sa)try{(Lr.nodeType===9?Lr.body:Lr.nodeName==="HTML"?Lr.ownerDocument.body:Lr).removeChild(m.stateNode)}catch(O){cr(m,c,O)}else try{Lr.removeChild(m.stateNode)}catch(O){cr(m,c,O)}break;case 18:Lr!==null&&(Sa?(s=Lr,mC(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,m.stateNode),xu(s)):mC(Lr,m.stateNode));break;case 4:v=Lr,A=Sa,Lr=m.stateNode.containerInfo,Sa=!0,Ki(s,c,m),Lr=v,Sa=A;break;case 0:case 11:case 14:case 15:Kl(2,m,c),En||Kl(4,m,c),Ki(s,c,m);break;case 1:En||(gi(m,c),v=m.stateNode,typeof v.componentWillUnmount=="function"&&h3(m,c,v)),Ki(s,c,m);break;case 21:Ki(s,c,m);break;case 22:En=(v=En)||m.memoizedState!==null,Ki(s,c,m),En=v;break;default:Ki(s,c,m)}}function w3(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{xu(s)}catch(m){cr(c,c.return,m)}}}function N3(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{xu(s)}catch(m){cr(c,c.return,m)}}function FI(s){switch(s.tag){case 31:case 13:case 19:var c=s.stateNode;return c===null&&(c=s.stateNode=new x3),c;case 22:return s=s.stateNode,c=s._retryCache,c===null&&(c=s._retryCache=new x3),c;default:throw Error(n(435,s.tag))}}function O0(s,c){var m=FI(s);c.forEach(function(v){if(!m.has(v)){m.add(v);var A=YI.bind(null,s,v);v.then(A,A)}})}function Ca(s,c){var m=c.deletions;if(m!==null)for(var v=0;v<m.length;v++){var A=m[v],O=s,j=c,Z=j;e:for(;Z!==null;){switch(Z.tag){case 27:if(no(Z.type)){Lr=Z.stateNode,Sa=!1;break e}break;case 5:Lr=Z.stateNode,Sa=!1;break e;case 3:case 4:Lr=Z.stateNode.containerInfo,Sa=!0;break e}Z=Z.return}if(Lr===null)throw Error(n(160));E3(O,j,A),Lr=null,Sa=!1,O=A.alternate,O!==null&&(O.return=null),A.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)S3(c,s),c=c.sibling}var Hs=null;function S3(s,c){var m=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ca(c,s),Aa(s),v&4&&(Kl(3,s,s.return),Hd(3,s),Kl(5,s,s.return));break;case 1:Ca(c,s),Aa(s),v&512&&(En||m===null||gi(m,m.return)),v&64&&Wi&&(s=s.updateQueue,s!==null&&(v=s.callbacks,v!==null&&(m=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=m===null?v:m.concat(v))));break;case 26:var A=Hs;if(Ca(c,s),Aa(s),v&512&&(En||m===null||gi(m,m.return)),v&4){var O=m!==null?m.memoizedState:null;if(v=s.memoizedState,m===null)if(v===null)if(s.stateNode===null){e:{v=s.type,m=s.memoizedProps,A=A.ownerDocument||A;t:switch(v){case"title":O=A.getElementsByTagName("title")[0],(!O||O[oi]||O[Rr]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=A.createElement(v),A.head.insertBefore(O,A.querySelector("head > title"))),Zn(O,v,m),O[Rr]=s,wr(O),v=O;break e;case"link":var j=SC("link","href",A).get(v+(m.href||""));if(j){for(var Z=0;Z<j.length;Z++)if(O=j[Z],O.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&O.getAttribute("rel")===(m.rel==null?null:m.rel)&&O.getAttribute("title")===(m.title==null?null:m.title)&&O.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){j.splice(Z,1);break t}}O=A.createElement(v),Zn(O,v,m),A.head.appendChild(O);break;case"meta":if(j=SC("meta","content",A).get(v+(m.content||""))){for(Z=0;Z<j.length;Z++)if(O=j[Z],O.getAttribute("content")===(m.content==null?null:""+m.content)&&O.getAttribute("name")===(m.name==null?null:m.name)&&O.getAttribute("property")===(m.property==null?null:m.property)&&O.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&O.getAttribute("charset")===(m.charSet==null?null:m.charSet)){j.splice(Z,1);break t}}O=A.createElement(v),Zn(O,v,m),A.head.appendChild(O);break;default:throw Error(n(468,v))}O[Rr]=s,wr(O),v=O}s.stateNode=v}else CC(A,s.type,s.stateNode);else s.stateNode=NC(A,v,s.memoizedProps);else O!==v?(O===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):O.count--,v===null?CC(A,s.type,s.stateNode):NC(A,v,s.memoizedProps)):v===null&&s.stateNode!==null&&vy(s,s.memoizedProps,m.memoizedProps)}break;case 27:Ca(c,s),Aa(s),v&512&&(En||m===null||gi(m,m.return)),m!==null&&v&4&&vy(s,s.memoizedProps,m.memoizedProps);break;case 5:if(Ca(c,s),Aa(s),v&512&&(En||m===null||gi(m,m.return)),s.flags&32){A=s.stateNode;try{Ml(A,"")}catch(ot){cr(s,s.return,ot)}}v&4&&s.stateNode!=null&&(A=s.memoizedProps,vy(s,A,m!==null?m.memoizedProps:A)),v&1024&&(Ny=!0);break;case 6:if(Ca(c,s),Aa(s),v&4){if(s.stateNode===null)throw Error(n(162));v=s.memoizedProps,m=s.stateNode;try{m.nodeValue=v}catch(ot){cr(s,s.return,ot)}}break;case 3:if(q0=null,A=Hs,Hs=V0(c.containerInfo),Ca(c,s),Hs=A,Aa(s),v&4&&m!==null&&m.memoizedState.isDehydrated)try{xu(c.containerInfo)}catch(ot){cr(s,s.return,ot)}Ny&&(Ny=!1,C3(s));break;case 4:v=Hs,Hs=V0(s.stateNode.containerInfo),Ca(c,s),Aa(s),Hs=v;break;case 12:Ca(c,s),Aa(s);break;case 31:Ca(c,s),Aa(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,O0(s,v)));break;case 13:Ca(c,s),Aa(s),s.child.flags&8192&&s.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(D0=Be()),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,O0(s,v)));break;case 22:A=s.memoizedState!==null;var le=m!==null&&m.memoizedState!==null,Ae=Wi,ze=En;if(Wi=Ae||A,En=ze||le,Ca(c,s),En=ze,Wi=Ae,Aa(s),v&8192)e:for(c=s.stateNode,c._visibility=A?c._visibility&-2:c._visibility|1,A&&(m===null||le||Wi||En||nc(s)),m=null,c=s;;){if(c.tag===5||c.tag===26){if(m===null){le=m=c;try{if(O=le.stateNode,A)j=O.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{Z=le.stateNode;var qe=le.memoizedProps.style,Oe=qe!=null&&qe.hasOwnProperty("display")?qe.display:null;Z.style.display=Oe==null||typeof Oe=="boolean"?"":(""+Oe).trim()}}catch(ot){cr(le,le.return,ot)}}}else if(c.tag===6){if(m===null){le=c;try{le.stateNode.nodeValue=A?"":le.memoizedProps}catch(ot){cr(le,le.return,ot)}}}else if(c.tag===18){if(m===null){le=c;try{var Pe=le.stateNode;A?hC(Pe,!0):hC(le.stateNode,!1)}catch(ot){cr(le,le.return,ot)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===s)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;m===c&&(m=null),c=c.return}m===c&&(m=null),c.sibling.return=c.return,c=c.sibling}v&4&&(v=s.updateQueue,v!==null&&(m=v.retryQueue,m!==null&&(v.retryQueue=null,O0(s,m))));break;case 19:Ca(c,s),Aa(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,O0(s,v)));break;case 30:break;case 21:break;default:Ca(c,s),Aa(s)}}function Aa(s){var c=s.flags;if(c&2){try{for(var m,v=s.return;v!==null;){if(p3(v)){m=v;break}v=v.return}if(m==null)throw Error(n(160));switch(m.tag){case 27:var A=m.stateNode,O=Ey(s);T0(s,O,A);break;case 5:var j=m.stateNode;m.flags&32&&(Ml(j,""),m.flags&=-33);var Z=Ey(s);T0(s,Z,j);break;case 3:case 4:var le=m.stateNode.containerInfo,Ae=Ey(s);wy(s,Ae,le);break;default:throw Error(n(161))}}catch(ze){cr(s,s.return,ze)}s.flags&=-3}c&4096&&(s.flags&=-4097)}function C3(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var c=s;C3(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),s=s.sibling}}function Zi(s,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)b3(s,c.alternate,c),c=c.sibling}function nc(s){for(s=s.child;s!==null;){var c=s;switch(c.tag){case 0:case 11:case 14:case 15:Kl(4,c,c.return),nc(c);break;case 1:gi(c,c.return);var m=c.stateNode;typeof m.componentWillUnmount=="function"&&h3(c,c.return,m),nc(c);break;case 27:Jd(c.stateNode);case 26:case 5:gi(c,c.return),nc(c);break;case 22:c.memoizedState===null&&nc(c);break;case 30:nc(c);break;default:nc(c)}s=s.sibling}}function Qi(s,c,m){for(m=m&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var v=c.alternate,A=s,O=c,j=O.flags;switch(O.tag){case 0:case 11:case 15:Qi(A,O,m),Hd(4,O);break;case 1:if(Qi(A,O,m),v=O,A=v.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Ae){cr(v,v.return,Ae)}if(v=O,A=v.updateQueue,A!==null){var Z=v.stateNode;try{var le=A.shared.hiddenCallbacks;if(le!==null)for(A.shared.hiddenCallbacks=null,A=0;A<le.length;A++)rS(le[A],Z)}catch(Ae){cr(v,v.return,Ae)}}m&&j&64&&m3(O),qd(O,O.return);break;case 27:y3(O);case 26:case 5:Qi(A,O,m),m&&v===null&&j&4&&g3(O),qd(O,O.return);break;case 12:Qi(A,O,m);break;case 31:Qi(A,O,m),m&&j&4&&w3(A,O);break;case 13:Qi(A,O,m),m&&j&4&&N3(A,O);break;case 22:O.memoizedState===null&&Qi(A,O,m),qd(O,O.return);break;case 30:break;default:Qi(A,O,m)}c=c.sibling}}function Sy(s,c){var m=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),s=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(s=c.memoizedState.cachePool.pool),s!==m&&(s!=null&&s.refCount++,m!=null&&Dd(m))}function Cy(s,c){s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Dd(s))}function qs(s,c,m,v){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)A3(s,c,m,v),c=c.sibling}function A3(s,c,m,v){var A=c.flags;switch(c.tag){case 0:case 11:case 15:qs(s,c,m,v),A&2048&&Hd(9,c);break;case 1:qs(s,c,m,v);break;case 3:qs(s,c,m,v),A&2048&&(s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Dd(s)));break;case 12:if(A&2048){qs(s,c,m,v),s=c.stateNode;try{var O=c.memoizedProps,j=O.id,Z=O.onPostCommit;typeof Z=="function"&&Z(j,c.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(le){cr(c,c.return,le)}}else qs(s,c,m,v);break;case 31:qs(s,c,m,v);break;case 13:qs(s,c,m,v);break;case 23:break;case 22:O=c.stateNode,j=c.alternate,c.memoizedState!==null?O._visibility&2?qs(s,c,m,v):$d(s,c):O._visibility&2?qs(s,c,m,v):(O._visibility|=2,lu(s,c,m,v,(c.subtreeFlags&10256)!==0||!1)),A&2048&&Sy(j,c);break;case 24:qs(s,c,m,v),A&2048&&Cy(c.alternate,c);break;default:qs(s,c,m,v)}}function lu(s,c,m,v,A){for(A=A&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var O=s,j=c,Z=m,le=v,Ae=j.flags;switch(j.tag){case 0:case 11:case 15:lu(O,j,Z,le,A),Hd(8,j);break;case 23:break;case 22:var ze=j.stateNode;j.memoizedState!==null?ze._visibility&2?lu(O,j,Z,le,A):$d(O,j):(ze._visibility|=2,lu(O,j,Z,le,A)),A&&Ae&2048&&Sy(j.alternate,j);break;case 24:lu(O,j,Z,le,A),A&&Ae&2048&&Cy(j.alternate,j);break;default:lu(O,j,Z,le,A)}c=c.sibling}}function $d(s,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var m=s,v=c,A=v.flags;switch(v.tag){case 22:$d(m,v),A&2048&&Sy(v.alternate,v);break;case 24:$d(m,v),A&2048&&Cy(v.alternate,v);break;default:$d(m,v)}c=c.sibling}}var Gd=8192;function ou(s,c,m){if(s.subtreeFlags&Gd)for(s=s.child;s!==null;)T3(s,c,m),s=s.sibling}function T3(s,c,m){switch(s.tag){case 26:ou(s,c,m),s.flags&Gd&&s.memoizedState!==null&&S9(m,Hs,s.memoizedState,s.memoizedProps);break;case 5:ou(s,c,m);break;case 3:case 4:var v=Hs;Hs=V0(s.stateNode.containerInfo),ou(s,c,m),Hs=v;break;case 22:s.memoizedState===null&&(v=s.alternate,v!==null&&v.memoizedState!==null?(v=Gd,Gd=16777216,ou(s,c,m),Gd=v):ou(s,c,m));break;default:ou(s,c,m)}}function O3(s){var c=s.alternate;if(c!==null&&(s=c.child,s!==null)){c.child=null;do c=s.sibling,s.sibling=null,s=c;while(s!==null)}}function Yd(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var v=c[m];Un=v,D3(v,s)}O3(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)_3(s),s=s.sibling}function _3(s){switch(s.tag){case 0:case 11:case 15:Yd(s),s.flags&2048&&Kl(9,s,s.return);break;case 3:Yd(s);break;case 12:Yd(s);break;case 22:var c=s.stateNode;s.memoizedState!==null&&c._visibility&2&&(s.return===null||s.return.tag!==13)?(c._visibility&=-3,_0(s)):Yd(s);break;default:Yd(s)}}function _0(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var v=c[m];Un=v,D3(v,s)}O3(s)}for(s=s.child;s!==null;){switch(c=s,c.tag){case 0:case 11:case 15:Kl(8,c,c.return),_0(c);break;case 22:m=c.stateNode,m._visibility&2&&(m._visibility&=-3,_0(c));break;default:_0(c)}s=s.sibling}}function D3(s,c){for(;Un!==null;){var m=Un;switch(m.tag){case 0:case 11:case 15:Kl(8,m,c);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var v=m.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Dd(m.memoizedState.cache)}if(v=m.child,v!==null)v.return=m,Un=v;else e:for(m=s;Un!==null;){v=Un;var A=v.sibling,O=v.return;if(v3(v),v===m){Un=null;break e}if(A!==null){A.return=O,Un=A;break e}Un=O}}}var UI={getCacheForType:function(s){var c=Wn(xn),m=c.data.get(s);return m===void 0&&(m=s(),c.data.set(s,m)),m},cacheSignal:function(){return Wn(xn).controller.signal}},jI=typeof WeakMap=="function"?WeakMap:Map,nr=0,br=null,jt=null,Ht=0,or=0,Wa=null,Zl=!1,cu=!1,Ay=!1,Ji=0,Qr=0,Ql=0,ac=0,Ty=0,Ka=0,uu=0,Xd=null,Ta=null,Oy=!1,D0=0,k3=0,k0=1/0,M0=null,Jl=null,Dn=0,eo=null,du=null,el=0,_y=0,Dy=null,M3=null,Wd=0,ky=null;function Za(){return(nr&2)!==0&&Ht!==0?Ht&-Ht:ne.T!==null?By():Bn()}function P3(){if(Ka===0)if((Ht&536870912)===0||Yt){var s=Pt;Pt<<=1,(Pt&3932160)===0&&(Pt=262144),Ka=s}else Ka=536870912;return s=Ya.current,s!==null&&(s.flags|=32),Ka}function Oa(s,c,m){(s===br&&(or===2||or===9)||s.cancelPendingCommit!==null)&&(fu(s,0),to(s,Ht,Ka,!1)),ls(s,m),((nr&2)===0||s!==br)&&(s===br&&((nr&2)===0&&(ac|=m),Qr===4&&to(s,Ht,Ka,!1)),pi(s))}function R3(s,c,m){if((nr&6)!==0)throw Error(n(327));var v=!m&&(c&127)===0&&(c&s.expiredLanes)===0||Wr(s,c),A=v?HI(s,c):Py(s,c,!0),O=v;do{if(A===0){cu&&!v&&to(s,c,0,!1);break}else{if(m=s.current.alternate,O&&!zI(m)){A=Py(s,c,!1),O=!1;continue}if(A===2){if(O=c,s.errorRecoveryDisabledLanes&O)var j=0;else j=s.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){c=j;e:{var Z=s;A=Xd;var le=Z.current.memoizedState.isDehydrated;if(le&&(fu(Z,j).flags|=256),j=Py(Z,j,!1),j!==2){if(Ay&&!le){Z.errorRecoveryDisabledLanes|=O,ac|=O,A=4;break e}O=Ta,Ta=A,O!==null&&(Ta===null?Ta=O:Ta.push.apply(Ta,O))}A=j}if(O=!1,A!==2)continue}}if(A===1){fu(s,0),to(s,c,0,!0);break}e:{switch(v=s,O=A,O){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:to(v,c,Ka,!Zl);break e;case 2:Ta=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(A=D0+300-Be(),10<A)){if(to(v,c,Ka,!Zl),Ua(v,0,!0)!==0)break e;el=c,v.timeoutHandle=dC(I3.bind(null,v,m,Ta,M0,Oy,c,Ka,ac,uu,Zl,O,"Throttled",-0,0),A);break e}I3(v,m,Ta,M0,Oy,c,Ka,ac,uu,Zl,O,null,-0,0)}}break}while(!0);pi(s)}function I3(s,c,m,v,A,O,j,Z,le,Ae,ze,qe,Oe,Pe){if(s.timeoutHandle=-1,qe=c.subtreeFlags,qe&8192||(qe&16785408)===16785408){qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ea},T3(c,O,qe);var ot=(O&62914560)===O?D0-Be():(O&4194048)===O?k3-Be():0;if(ot=C9(qe,ot),ot!==null){el=O,s.cancelPendingCommit=ot(H3.bind(null,s,c,O,m,v,A,j,Z,le,ze,qe,null,Oe,Pe)),to(s,O,j,!Ae);return}}H3(s,c,O,m,v,A,j,Z,le)}function zI(s){for(var c=s;;){var m=c.tag;if((m===0||m===11||m===15)&&c.flags&16384&&(m=c.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var v=0;v<m.length;v++){var A=m[v],O=A.getSnapshot;A=A.value;try{if(!E(O(),A))return!1}catch{return!1}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function to(s,c,m,v){c&=~Ty,c&=~ac,s.suspendedLanes|=c,s.pingedLanes&=~c,v&&(s.warmLanes|=c),v=s.expirationTimes;for(var A=c;0<A;){var O=31-rt(A),j=1<<O;v[O]=-1,A&=~j}m!==0&&Lc(s,m,c)}function P0(){return(nr&6)===0?(Kd(0),!1):!0}function My(){if(jt!==null){if(or===0)var s=jt.return;else s=jt,Hi=Wo=null,X1(s),ru=null,Md=0,s=jt;for(;s!==null;)f3(s.alternate,s),s=s.return;jt=null}}function fu(s,c){var m=s.timeoutHandle;m!==-1&&(s.timeoutHandle=-1,l9(m)),m=s.cancelPendingCommit,m!==null&&(s.cancelPendingCommit=null,m()),el=0,My(),br=s,jt=m=zi(s.current,null),Ht=c,or=0,Wa=null,Zl=!1,cu=Wr(s,c),Ay=!1,uu=Ka=Ty=ac=Ql=Qr=0,Ta=Xd=null,Oy=!1,(c&8)!==0&&(c|=c&32);var v=s.entangledLanes;if(v!==0)for(s=s.entanglements,v&=c;0<v;){var A=31-rt(v),O=1<<A;c|=s[A],v&=~O}return Ji=c,e0(),m}function L3(s,c){kt=null,ne.H=jd,c===tu||c===o0?(c=QN(),or=3):c===L1?(c=QN(),or=4):or=c===uy?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Wa=c,jt===null&&(Qr=1,w0(s,ds(c,s.current)))}function B3(){var s=Ya.current;return s===null?!0:(Ht&4194048)===Ht?gs===null:(Ht&62914560)===Ht||(Ht&536870912)!==0?s===gs:!1}function F3(){var s=ne.H;return ne.H=jd,s===null?jd:s}function U3(){var s=ne.A;return ne.A=UI,s}function R0(){Qr=4,Zl||(Ht&4194048)!==Ht&&Ya.current!==null||(cu=!0),(Ql&134217727)===0&&(ac&134217727)===0||br===null||to(br,Ht,Ka,!1)}function Py(s,c,m){var v=nr;nr|=2;var A=F3(),O=U3();(br!==s||Ht!==c)&&(M0=null,fu(s,c)),c=!1;var j=Qr;e:do try{if(or!==0&&jt!==null){var Z=jt,le=Wa;switch(or){case 8:My(),j=6;break e;case 3:case 2:case 9:case 6:Ya.current===null&&(c=!0);var Ae=or;if(or=0,Wa=null,mu(s,Z,le,Ae),m&&cu){j=0;break e}break;default:Ae=or,or=0,Wa=null,mu(s,Z,le,Ae)}}VI(),j=Qr;break}catch(ze){L3(s,ze)}while(!0);return c&&s.shellSuspendCounter++,Hi=Wo=null,nr=v,ne.H=A,ne.A=O,jt===null&&(br=null,Ht=0,e0()),j}function VI(){for(;jt!==null;)j3(jt)}function HI(s,c){var m=nr;nr|=2;var v=F3(),A=U3();br!==s||Ht!==c?(M0=null,k0=Be()+500,fu(s,c)):cu=Wr(s,c);e:do try{if(or!==0&&jt!==null){c=jt;var O=Wa;t:switch(or){case 1:or=0,Wa=null,mu(s,c,O,1);break;case 2:case 9:if(KN(O)){or=0,Wa=null,z3(c);break}c=function(){or!==2&&or!==9||br!==s||(or=7),pi(s)},O.then(c,c);break e;case 3:or=7;break e;case 4:or=5;break e;case 7:KN(O)?(or=0,Wa=null,z3(c)):(or=0,Wa=null,mu(s,c,O,7));break;case 5:var j=null;switch(jt.tag){case 26:j=jt.memoizedState;case 5:case 27:var Z=jt;if(j?AC(j):Z.stateNode.complete){or=0,Wa=null;var le=Z.sibling;if(le!==null)jt=le;else{var Ae=Z.return;Ae!==null?(jt=Ae,I0(Ae)):jt=null}break t}}or=0,Wa=null,mu(s,c,O,5);break;case 6:or=0,Wa=null,mu(s,c,O,6);break;case 8:My(),Qr=6;break e;default:throw Error(n(462))}}qI();break}catch(ze){L3(s,ze)}while(!0);return Hi=Wo=null,ne.H=v,ne.A=A,nr=m,jt!==null?0:(br=null,Ht=0,e0(),Qr)}function qI(){for(;jt!==null&&!nt();)j3(jt)}function j3(s){var c=u3(s.alternate,s,Ji);s.memoizedProps=s.pendingProps,c===null?I0(s):jt=c}function z3(s){var c=s,m=c.alternate;switch(c.tag){case 15:case 0:c=a3(m,c,c.pendingProps,c.type,void 0,Ht);break;case 11:c=a3(m,c,c.pendingProps,c.type.render,c.ref,Ht);break;case 5:X1(c);default:f3(m,c),c=jt=UN(c,Ji),c=u3(m,c,Ji)}s.memoizedProps=s.pendingProps,c===null?I0(s):jt=c}function mu(s,c,m,v){Hi=Wo=null,X1(c),ru=null,Md=0;var A=c.return;try{if(MI(s,A,c,m,Ht)){Qr=1,w0(s,ds(m,s.current)),jt=null;return}}catch(O){if(A!==null)throw jt=A,O;Qr=1,w0(s,ds(m,s.current)),jt=null;return}c.flags&32768?(Yt||v===1?s=!0:cu||(Ht&536870912)!==0?s=!1:(Zl=s=!0,(v===2||v===9||v===3||v===6)&&(v=Ya.current,v!==null&&v.tag===13&&(v.flags|=16384))),V3(c,s)):I0(c)}function I0(s){var c=s;do{if((c.flags&32768)!==0){V3(c,Zl);return}s=c.return;var m=II(c.alternate,c,Ji);if(m!==null){jt=m;return}if(c=c.sibling,c!==null){jt=c;return}jt=c=s}while(c!==null);Qr===0&&(Qr=5)}function V3(s,c){do{var m=LI(s.alternate,s);if(m!==null){m.flags&=32767,jt=m;return}if(m=s.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!c&&(s=s.sibling,s!==null)){jt=s;return}jt=s=m}while(s!==null);Qr=6,jt=null}function H3(s,c,m,v,A,O,j,Z,le){s.cancelPendingCommit=null;do L0();while(Dn!==0);if((nr&6)!==0)throw Error(n(327));if(c!==null){if(c===s.current)throw Error(n(177));if(O=c.lanes|c.childLanes,O|=E1,xa(s,m,O,j,Z,le),s===br&&(jt=br=null,Ht=0),du=c,eo=s,el=m,_y=O,Dy=A,M3=v,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,XI($r,function(){return X3(),null})):(s.callbackNode=null,s.callbackPriority=0),v=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||v){v=ne.T,ne.T=null,A=se.p,se.p=2,j=nr,nr|=4;try{BI(s,c,m)}finally{nr=j,se.p=A,ne.T=v}}Dn=1,q3(),$3(),G3()}}function q3(){if(Dn===1){Dn=0;var s=eo,c=du,m=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||m){m=ne.T,ne.T=null;var v=se.p;se.p=2;var A=nr;nr|=4;try{S3(c,s);var O=$y,j=$(s.containerInfo),Z=O.focusedElem,le=O.selectionRange;if(j!==Z&&Z&&Z.ownerDocument&&B(Z.ownerDocument.documentElement,Z)){if(le!==null&&W(Z)){var Ae=le.start,ze=le.end;if(ze===void 0&&(ze=Ae),"selectionStart"in Z)Z.selectionStart=Ae,Z.selectionEnd=Math.min(ze,Z.value.length);else{var qe=Z.ownerDocument||document,Oe=qe&&qe.defaultView||window;if(Oe.getSelection){var Pe=Oe.getSelection(),ot=Z.textContent.length,Et=Math.min(le.start,ot),mr=le.end===void 0?Et:Math.min(le.end,ot);!Pe.extend&&Et>mr&&(j=mr,mr=Et,Et=j);var pe=P(Z,Et),me=P(Z,mr);if(pe&&me&&(Pe.rangeCount!==1||Pe.anchorNode!==pe.node||Pe.anchorOffset!==pe.offset||Pe.focusNode!==me.node||Pe.focusOffset!==me.offset)){var Ce=qe.createRange();Ce.setStart(pe.node,pe.offset),Pe.removeAllRanges(),Et>mr?(Pe.addRange(Ce),Pe.extend(me.node,me.offset)):(Ce.setEnd(me.node,me.offset),Pe.addRange(Ce))}}}}for(qe=[],Pe=Z;Pe=Pe.parentNode;)Pe.nodeType===1&&qe.push({element:Pe,left:Pe.scrollLeft,top:Pe.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<qe.length;Z++){var Ve=qe[Z];Ve.element.scrollLeft=Ve.left,Ve.element.scrollTop=Ve.top}}X0=!!qy,$y=qy=null}finally{nr=A,se.p=v,ne.T=m}}s.current=c,Dn=2}}function $3(){if(Dn===2){Dn=0;var s=eo,c=du,m=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||m){m=ne.T,ne.T=null;var v=se.p;se.p=2;var A=nr;nr|=4;try{b3(s,c.alternate,c)}finally{nr=A,se.p=v,ne.T=m}}Dn=3}}function G3(){if(Dn===4||Dn===3){Dn=0,Re();var s=eo,c=du,m=el,v=M3;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Dn=5:(Dn=0,du=eo=null,Y3(s,s.pendingLanes));var A=s.pendingLanes;if(A===0&&(Jl=null),ja(m),c=c.stateNode,ge&&typeof ge.onCommitFiberRoot=="function")try{ge.onCommitFiberRoot(Gt,c,void 0,(c.current.flags&128)===128)}catch{}if(v!==null){c=ne.T,A=se.p,se.p=2,ne.T=null;try{for(var O=s.onRecoverableError,j=0;j<v.length;j++){var Z=v[j];O(Z.value,{componentStack:Z.stack})}}finally{ne.T=c,se.p=A}}(el&3)!==0&&L0(),pi(s),A=s.pendingLanes,(m&261930)!==0&&(A&42)!==0?s===ky?Wd++:(Wd=0,ky=s):Wd=0,Kd(0)}}function Y3(s,c){(s.pooledCacheLanes&=c)===0&&(c=s.pooledCache,c!=null&&(s.pooledCache=null,Dd(c)))}function L0(){return q3(),$3(),G3(),X3()}function X3(){if(Dn!==5)return!1;var s=eo,c=_y;_y=0;var m=ja(el),v=ne.T,A=se.p;try{se.p=32>m?32:m,ne.T=null,m=Dy,Dy=null;var O=eo,j=el;if(Dn=0,du=eo=null,el=0,(nr&6)!==0)throw Error(n(331));var Z=nr;if(nr|=4,_3(O.current),A3(O,O.current,j,m),nr=Z,Kd(0,!1),ge&&typeof ge.onPostCommitFiberRoot=="function")try{ge.onPostCommitFiberRoot(Gt,O)}catch{}return!0}finally{se.p=A,ne.T=v,Y3(s,c)}}function W3(s,c,m){c=ds(m,c),c=cy(s.stateNode,c,2),s=Yl(s,c,2),s!==null&&(ls(s,2),pi(s))}function cr(s,c,m){if(s.tag===3)W3(s,s,m);else for(;c!==null;){if(c.tag===3){W3(c,s,m);break}else if(c.tag===1){var v=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Jl===null||!Jl.has(v))){s=ds(m,s),m=KS(2),v=Yl(c,m,2),v!==null&&(ZS(m,v,c,s),ls(v,2),pi(v));break}}c=c.return}}function Ry(s,c,m){var v=s.pingCache;if(v===null){v=s.pingCache=new jI;var A=new Set;v.set(c,A)}else A=v.get(c),A===void 0&&(A=new Set,v.set(c,A));A.has(m)||(Ay=!0,A.add(m),s=$I.bind(null,s,c,m),c.then(s,s))}function $I(s,c,m){var v=s.pingCache;v!==null&&v.delete(c),s.pingedLanes|=s.suspendedLanes&m,s.warmLanes&=~m,br===s&&(Ht&m)===m&&(Qr===4||Qr===3&&(Ht&62914560)===Ht&&300>Be()-D0?(nr&2)===0&&fu(s,0):Ty|=m,uu===Ht&&(uu=0)),pi(s)}function K3(s,c){c===0&&(c=xt()),s=Go(s,c),s!==null&&(ls(s,c),pi(s))}function GI(s){var c=s.memoizedState,m=0;c!==null&&(m=c.retryLane),K3(s,m)}function YI(s,c){var m=0;switch(s.tag){case 31:case 13:var v=s.stateNode,A=s.memoizedState;A!==null&&(m=A.retryLane);break;case 19:v=s.stateNode;break;case 22:v=s.stateNode._retryCache;break;default:throw Error(n(314))}v!==null&&v.delete(c),K3(s,m)}function XI(s,c){return Er(s,c)}var B0=null,hu=null,Iy=!1,F0=!1,Ly=!1,ro=0;function pi(s){s!==hu&&s.next===null&&(hu===null?B0=hu=s:hu=hu.next=s),F0=!0,Iy||(Iy=!0,KI())}function Kd(s,c){if(!Ly&&F0){Ly=!0;do for(var m=!1,v=B0;v!==null;){if(s!==0){var A=v.pendingLanes;if(A===0)var O=0;else{var j=v.suspendedLanes,Z=v.pingedLanes;O=(1<<31-rt(42|s)+1)-1,O&=A&~(j&~Z),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(m=!0,eC(v,O))}else O=Ht,O=Ua(v,v===br?O:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(O&3)===0||Wr(v,O)||(m=!0,eC(v,O));v=v.next}while(m);Ly=!1}}function WI(){Z3()}function Z3(){F0=Iy=!1;var s=0;ro!==0&&i9()&&(s=ro);for(var c=Be(),m=null,v=B0;v!==null;){var A=v.next,O=Q3(v,c);O===0?(v.next=null,m===null?B0=A:m.next=A,A===null&&(hu=m)):(m=v,(s!==0||(O&3)!==0)&&(F0=!0)),v=A}Dn!==0&&Dn!==5||Kd(s),ro!==0&&(ro=0)}function Q3(s,c){for(var m=s.suspendedLanes,v=s.pingedLanes,A=s.expirationTimes,O=s.pendingLanes&-62914561;0<O;){var j=31-rt(O),Z=1<<j,le=A[j];le===-1?((Z&m)===0||(Z&v)!==0)&&(A[j]=Fe(Z,c)):le<=c&&(s.expiredLanes|=Z),O&=~Z}if(c=br,m=Ht,m=Ua(s,s===c?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v=s.callbackNode,m===0||s===c&&(or===2||or===9)||s.cancelPendingCommit!==null)return v!==null&&v!==null&&tt(v),s.callbackNode=null,s.callbackPriority=0;if((m&3)===0||Wr(s,m)){if(c=m&-m,c===s.callbackPriority)return c;switch(v!==null&&tt(v),ja(m)){case 2:case 8:m=ar;break;case 32:m=$r;break;case 268435456:m=La;break;default:m=$r}return v=J3.bind(null,s),m=Er(m,v),s.callbackPriority=c,s.callbackNode=m,c}return v!==null&&v!==null&&tt(v),s.callbackPriority=2,s.callbackNode=null,2}function J3(s,c){if(Dn!==0&&Dn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var m=s.callbackNode;if(L0()&&s.callbackNode!==m)return null;var v=Ht;return v=Ua(s,s===br?v:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v===0?null:(R3(s,v,c),Q3(s,Be()),s.callbackNode!=null&&s.callbackNode===m?J3.bind(null,s):null)}function eC(s,c){if(L0())return null;R3(s,c,!0)}function KI(){o9(function(){(nr&6)!==0?Er(pt,WI):Z3()})}function By(){if(ro===0){var s=Jc;s===0&&(s=Fa,Fa<<=1,(Fa&261888)===0&&(Fa=256)),ro=s}return ro}function tC(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Pl(""+s)}function rC(s,c){var m=c.ownerDocument.createElement("input");return m.name=c.name,m.value=c.value,s.id&&m.setAttribute("form",s.id),c.parentNode.insertBefore(m,c),s=new FormData(s),m.parentNode.removeChild(m),s}function ZI(s,c,m,v,A){if(c==="submit"&&m&&m.stateNode===A){var O=tC((A[Kt]||null).action),j=v.submitter;j&&(c=(c=j[Kt]||null)?tC(c.formAction):j.getAttribute("formAction"),c!==null&&(O=c,j=null));var Z=new Tn("action","action",null,v,A);s.push({event:Z,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(ro!==0){var le=j?rC(A,j):new FormData(A);ny(m,{pending:!0,data:le,method:A.method,action:O},null,le)}}else typeof O=="function"&&(Z.preventDefault(),le=j?rC(A,j):new FormData(A),ny(m,{pending:!0,data:le,method:A.method,action:O},O,le))},currentTarget:A}]})}}for(var Fy=0;Fy<Td.length;Fy++){var Uy=Td[Fy],QI=Uy.toLowerCase(),JI=Uy[0].toUpperCase()+Uy.slice(1);Vs(QI,"on"+JI)}Vs(Na,"onAnimationEnd"),Vs(Yn,"onAnimationIteration"),Vs(lr,"onAnimationStart"),Vs("dblclick","onDoubleClick"),Vs("focusin","onFocus"),Vs("focusout","onBlur"),Vs(_n,"onTransitionRun"),Vs(ca,"onTransitionStart"),Vs(jl,"onTransitionCancel"),Vs(ji,"onTransitionEnd"),za("onMouseEnter",["mouseout","mouseover"]),za("onMouseLeave",["mouseout","mouseover"]),za("onPointerEnter",["pointerout","pointerover"]),za("onPointerLeave",["pointerout","pointerover"]),sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zd));function nC(s,c){c=(c&4)!==0;for(var m=0;m<s.length;m++){var v=s[m],A=v.event;v=v.listeners;e:{var O=void 0;if(c)for(var j=v.length-1;0<=j;j--){var Z=v[j],le=Z.instance,Ae=Z.currentTarget;if(Z=Z.listener,le!==O&&A.isPropagationStopped())break e;O=Z,A.currentTarget=Ae;try{O(A)}catch(ze){Jm(ze)}A.currentTarget=null,O=le}else for(j=0;j<v.length;j++){if(Z=v[j],le=Z.instance,Ae=Z.currentTarget,Z=Z.listener,le!==O&&A.isPropagationStopped())break e;O=Z,A.currentTarget=Ae;try{O(A)}catch(ze){Jm(ze)}A.currentTarget=null,O=le}}}}function zt(s,c){var m=c[li];m===void 0&&(m=c[li]=new Set);var v=s+"__bubble";m.has(v)||(aC(c,s,2,!1),m.add(v))}function jy(s,c,m){var v=0;c&&(v|=4),aC(m,s,v,c)}var U0="_reactListening"+Math.random().toString(36).slice(2);function zy(s){if(!s[U0]){s[U0]=!0,$e.forEach(function(m){m!=="selectionchange"&&(e9.has(m)||jy(m,!1,s),jy(m,!0,s))});var c=s.nodeType===9?s:s.ownerDocument;c===null||c[U0]||(c[U0]=!0,jy("selectionchange",!1,c))}}function aC(s,c,m,v){switch(PC(c)){case 2:var A=O9;break;case 8:A=_9;break;default:A=rx}m=A.bind(null,c,m,s),A=void 0,!vd||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(A=!0),v?A!==void 0?s.addEventListener(c,m,{capture:!0,passive:A}):s.addEventListener(c,m,!0):A!==void 0?s.addEventListener(c,m,{passive:A}):s.addEventListener(c,m,!1)}function Vy(s,c,m,v,A){var O=v;if((c&1)===0&&(c&2)===0&&v!==null)e:for(;;){if(v===null)return;var j=v.tag;if(j===3||j===4){var Z=v.stateNode.containerInfo;if(Z===A)break;if(j===4)for(j=v.return;j!==null;){var le=j.tag;if((le===3||le===4)&&j.stateNode.containerInfo===A)return;j=j.return}for(;Z!==null;){if(j=Ar(Z),j===null)return;if(le=j.tag,le===5||le===6||le===26||le===27){v=O=j;continue e}Z=Z.parentNode}}v=v.return}Vm(function(){var Ae=O,ze=bd(m),qe=[];e:{var Oe=Qm.get(s);if(Oe!==void 0){var Pe=Tn,ot=s;switch(s){case"keypress":if(ci(m)===0)break e;case"keydown":case"keyup":Pe=qc;break;case"focusin":ot="focus",Pe=Nd;break;case"focusout":ot="blur",Pe=Nd;break;case"beforeblur":case"afterblur":Pe=Nd;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=rr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=Vc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=x1;break;case Na:case Yn:case lr:Pe=Rt;break;case ji:Pe=Li;break;case"scroll":case"scrollend":Pe=Hm;break;case"wheel":Pe=b1;break;case"copy":case"cut":case"paste":Pe=Hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=ir;break;case"toggle":case"beforetoggle":Pe=Cd}var Et=(c&4)!==0,mr=!Et&&(s==="scroll"||s==="scrollend"),pe=Et?Oe!==null?Oe+"Capture":null:Oe;Et=[];for(var me=Ae,Ce;me!==null;){var Ve=me;if(Ce=Ve.stateNode,Ve=Ve.tag,Ve!==5&&Ve!==26&&Ve!==27||Ce===null||pe===null||(Ve=Ct(me,pe),Ve!=null&&Et.push(Qd(me,Ve,Ce))),mr)break;me=me.return}0<Et.length&&(Oe=new Pe(Oe,ot,null,m,ze),qe.push({event:Oe,listeners:Et}))}}if((c&7)===0){e:{if(Oe=s==="mouseover"||s==="pointerover",Pe=s==="mouseout"||s==="pointerout",Oe&&m!==Fo&&(ot=m.relatedTarget||m.fromElement)&&(Ar(ot)||ot[ia]))break e;if((Pe||Oe)&&(Oe=ze.window===ze?ze:(Oe=ze.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,Pe?(ot=m.relatedTarget||m.toElement,Pe=Ae,ot=ot?Ar(ot):null,ot!==null&&(mr=o(ot),Et=ot.tag,ot!==mr||Et!==5&&Et!==27&&Et!==6)&&(ot=null)):(Pe=null,ot=Ae),Pe!==ot)){if(Et=rr,Ve="onMouseLeave",pe="onMouseEnter",me="mouse",(s==="pointerout"||s==="pointerover")&&(Et=ir,Ve="onPointerLeave",pe="onPointerEnter",me="pointer"),mr=Pe==null?Oe:Ue(Pe),Ce=ot==null?Oe:Ue(ot),Oe=new Et(Ve,me+"leave",Pe,m,ze),Oe.target=mr,Oe.relatedTarget=Ce,Ve=null,Ar(ze)===Ae&&(Et=new Et(pe,me+"enter",ot,m,ze),Et.target=Ce,Et.relatedTarget=mr,Ve=Et),mr=Ve,Pe&&ot)t:{for(Et=t9,pe=Pe,me=ot,Ce=0,Ve=pe;Ve;Ve=Et(Ve))Ce++;Ve=0;for(var yt=me;yt;yt=Et(yt))Ve++;for(;0<Ce-Ve;)pe=Et(pe),Ce--;for(;0<Ve-Ce;)me=Et(me),Ve--;for(;Ce--;){if(pe===me||me!==null&&pe===me.alternate){Et=pe;break t}pe=Et(pe),me=Et(me)}Et=null}else Et=null;Pe!==null&&sC(qe,Oe,Pe,Et,!1),ot!==null&&mr!==null&&sC(qe,mr,ot,Et,!0)}}e:{if(Oe=Ae?Ue(Ae):window,Pe=Oe.nodeName&&Oe.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&Oe.type==="file")var Jt=$a;else if(Ad(Oe))if(Zm)Jt=p;else{Jt=u;var ft=l}else Pe=Oe.nodeName,!Pe||Pe.toLowerCase()!=="input"||Oe.type!=="checkbox"&&Oe.type!=="radio"?Ae&&pr(Ae.elementType)&&(Jt=$a):Jt=f;if(Jt&&(Jt=Jt(s,Ae))){qa(qe,Jt,m,ze);break e}ft&&ft(s,Oe,Ae),s==="focusout"&&Ae&&Oe.type==="number"&&Ae.memoizedProps.value!=null&&J(Oe,"number",Oe.value)}switch(ft=Ae?Ue(Ae):window,s){case"focusin":(Ad(ft)||ft.contentEditable==="true")&&(ue=ft,de=Ae,Ee=null);break;case"focusout":Ee=de=ue=null;break;case"mousedown":_e=!0;break;case"contextmenu":case"mouseup":case"dragend":_e=!1,Qe(qe,m,ze);break;case"selectionchange":if(re)break;case"keydown":case"keyup":Qe(qe,m,ze)}var It;if(zo)e:{switch(s){case"compositionstart":var qt="onCompositionStart";break e;case"compositionend":qt="onCompositionEnd";break e;case"compositionupdate":qt="onCompositionUpdate";break e}qt=void 0}else Ul?Km(s,m)&&(qt="onCompositionEnd"):s==="keydown"&&m.keyCode===229&&(qt="onCompositionStart");qt&&(Wm&&m.locale!=="ko"&&(Ul||qt!=="onCompositionStart"?qt==="onCompositionEnd"&&Ul&&(It=Rl()):(js=ze,zs="value"in js?js.value:js.textContent,Ul=!0)),ft=j0(Ae,qt),0<ft.length&&(qt=new Gm(qt,s,null,m,ze),qe.push({event:qt,listeners:ft}),It?qt.data=It:(It=Fl(m),It!==null&&(qt.data=It)))),(It=Xm?fi(s,m):Gc(s,m))&&(qt=j0(Ae,"onBeforeInput"),0<qt.length&&(ft=new Gm("onBeforeInput","beforeinput",null,m,ze),qe.push({event:ft,listeners:qt}),ft.data=It)),ZI(qe,s,Ae,m,ze)}nC(qe,c)})}function Qd(s,c,m){return{instance:s,listener:c,currentTarget:m}}function j0(s,c){for(var m=c+"Capture",v=[];s!==null;){var A=s,O=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||O===null||(A=Ct(s,m),A!=null&&v.unshift(Qd(s,A,O)),A=Ct(s,c),A!=null&&v.push(Qd(s,A,O))),s.tag===3)return v;s=s.return}return[]}function t9(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function sC(s,c,m,v,A){for(var O=c._reactName,j=[];m!==null&&m!==v;){var Z=m,le=Z.alternate,Ae=Z.stateNode;if(Z=Z.tag,le!==null&&le===v)break;Z!==5&&Z!==26&&Z!==27||Ae===null||(le=Ae,A?(Ae=Ct(m,O),Ae!=null&&j.unshift(Qd(m,Ae,le))):A||(Ae=Ct(m,O),Ae!=null&&j.push(Qd(m,Ae,le)))),m=m.return}j.length!==0&&s.push({event:c,listeners:j})}var r9=/\r\n?/g,n9=/\u0000|\uFFFD/g;function iC(s){return(typeof s=="string"?s:""+s).replace(r9,`
`).replace(n9,"")}function lC(s,c){return c=iC(c),iC(s)===c}function fr(s,c,m,v,A,O){switch(m){case"children":typeof v=="string"?c==="body"||c==="textarea"&&v===""||Ml(s,v):(typeof v=="number"||typeof v=="bigint")&&c!=="body"&&Ml(s,""+v);break;case"className":Dl(s,"class",v);break;case"tabIndex":Dl(s,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Dl(s,m,v);break;case"style":gt(s,v,O);break;case"data":if(c!=="object"){Dl(s,"data",v);break}case"src":case"href":if(v===""&&(c!=="a"||m!=="href")){s.removeAttribute(m);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(m);break}v=Pl(""+v),s.setAttribute(m,v);break;case"action":case"formAction":if(typeof v=="function"){s.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(m==="formAction"?(c!=="input"&&fr(s,c,"name",A.name,A,null),fr(s,c,"formEncType",A.formEncType,A,null),fr(s,c,"formMethod",A.formMethod,A,null),fr(s,c,"formTarget",A.formTarget,A,null)):(fr(s,c,"encType",A.encType,A,null),fr(s,c,"method",A.method,A,null),fr(s,c,"target",A.target,A,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(m);break}v=Pl(""+v),s.setAttribute(m,v);break;case"onClick":v!=null&&(s.onclick=Ea);break;case"onScroll":v!=null&&zt("scroll",s);break;case"onScrollEnd":v!=null&&zt("scrollend",s);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(m=v.__html,m!=null){if(A.children!=null)throw Error(n(60));s.innerHTML=m}}break;case"multiple":s.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":s.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){s.removeAttribute("xlink:href");break}m=Pl(""+v),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(m,""+v):s.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(m,""):s.removeAttribute(m);break;case"capture":case"download":v===!0?s.setAttribute(m,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(m,v):s.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?s.setAttribute(m,v):s.removeAttribute(m);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?s.removeAttribute(m):s.setAttribute(m,v);break;case"popover":zt("beforetoggle",s),zt("toggle",s),_l(s,"popover",v);break;case"xlinkActuate":Va(s,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Va(s,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Va(s,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Va(s,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Va(s,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Va(s,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Va(s,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Va(s,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Va(s,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":_l(s,"is",v);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=zm.get(m)||m,_l(s,m,v))}}function Hy(s,c,m,v,A,O){switch(m){case"style":gt(s,v,O);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(m=v.__html,m!=null){if(A.children!=null)throw Error(n(60));s.innerHTML=m}}break;case"children":typeof v=="string"?Ml(s,v):(typeof v=="number"||typeof v=="bigint")&&Ml(s,""+v);break;case"onScroll":v!=null&&zt("scroll",s);break;case"onScrollEnd":v!=null&&zt("scrollend",s);break;case"onClick":v!=null&&(s.onclick=Ea);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jm.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(A=m.endsWith("Capture"),c=m.slice(2,A?m.length-7:void 0),O=s[Kt]||null,O=O!=null?O[m]:null,typeof O=="function"&&s.removeEventListener(c,O,A),typeof v=="function")){typeof O!="function"&&O!==null&&(m in s?s[m]=null:s.hasAttribute(m)&&s.removeAttribute(m)),s.addEventListener(c,v,A);break e}m in s?s[m]=v:v===!0?s.setAttribute(m,""):_l(s,m,v)}}}function Zn(s,c,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zt("error",s),zt("load",s);var v=!1,A=!1,O;for(O in m)if(m.hasOwnProperty(O)){var j=m[O];if(j!=null)switch(O){case"src":v=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:fr(s,c,O,j,m,null)}}A&&fr(s,c,"srcSet",m.srcSet,m,null),v&&fr(s,c,"src",m.src,m,null);return;case"input":zt("invalid",s);var Z=O=j=A=null,le=null,Ae=null;for(v in m)if(m.hasOwnProperty(v)){var ze=m[v];if(ze!=null)switch(v){case"name":A=ze;break;case"type":j=ze;break;case"checked":le=ze;break;case"defaultChecked":Ae=ze;break;case"value":O=ze;break;case"defaultValue":Z=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(n(137,c));break;default:fr(s,c,v,ze,m,null)}}Ne(s,O,Z,le,Ae,j,A,!1);return;case"select":zt("invalid",s),v=j=O=null;for(A in m)if(m.hasOwnProperty(A)&&(Z=m[A],Z!=null))switch(A){case"value":O=Z;break;case"defaultValue":j=Z;break;case"multiple":v=Z;default:fr(s,c,A,Z,m,null)}c=O,m=j,s.multiple=!!v,c!=null?dt(s,!!v,c,!1):m!=null&&dt(s,!!v,m,!0);return;case"textarea":zt("invalid",s),O=A=v=null;for(j in m)if(m.hasOwnProperty(j)&&(Z=m[j],Z!=null))switch(j){case"value":v=Z;break;case"defaultValue":A=Z;break;case"children":O=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(91));break;default:fr(s,c,j,Z,m,null)}la(s,v,A,O);return;case"option":for(le in m)if(m.hasOwnProperty(le)&&(v=m[le],v!=null))switch(le){case"selected":s.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:fr(s,c,le,v,m,null)}return;case"dialog":zt("beforetoggle",s),zt("toggle",s),zt("cancel",s),zt("close",s);break;case"iframe":case"object":zt("load",s);break;case"video":case"audio":for(v=0;v<Zd.length;v++)zt(Zd[v],s);break;case"image":zt("error",s),zt("load",s);break;case"details":zt("toggle",s);break;case"embed":case"source":case"link":zt("error",s),zt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ae in m)if(m.hasOwnProperty(Ae)&&(v=m[Ae],v!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:fr(s,c,Ae,v,m,null)}return;default:if(pr(c)){for(ze in m)m.hasOwnProperty(ze)&&(v=m[ze],v!==void 0&&Hy(s,c,ze,v,m,void 0));return}}for(Z in m)m.hasOwnProperty(Z)&&(v=m[Z],v!=null&&fr(s,c,Z,v,m,null))}function a9(s,c,m,v){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,O=null,j=null,Z=null,le=null,Ae=null,ze=null;for(Pe in m){var qe=m[Pe];if(m.hasOwnProperty(Pe)&&qe!=null)switch(Pe){case"checked":break;case"value":break;case"defaultValue":le=qe;default:v.hasOwnProperty(Pe)||fr(s,c,Pe,null,v,qe)}}for(var Oe in v){var Pe=v[Oe];if(qe=m[Oe],v.hasOwnProperty(Oe)&&(Pe!=null||qe!=null))switch(Oe){case"type":O=Pe;break;case"name":A=Pe;break;case"checked":Ae=Pe;break;case"defaultChecked":ze=Pe;break;case"value":j=Pe;break;case"defaultValue":Z=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(n(137,c));break;default:Pe!==qe&&fr(s,c,Oe,Pe,v,qe)}}pn(s,j,Z,le,Ae,ze,O,A);return;case"select":Pe=j=Z=Oe=null;for(O in m)if(le=m[O],m.hasOwnProperty(O)&&le!=null)switch(O){case"value":break;case"multiple":Pe=le;default:v.hasOwnProperty(O)||fr(s,c,O,null,v,le)}for(A in v)if(O=v[A],le=m[A],v.hasOwnProperty(A)&&(O!=null||le!=null))switch(A){case"value":Oe=O;break;case"defaultValue":Z=O;break;case"multiple":j=O;default:O!==le&&fr(s,c,A,O,v,le)}c=Z,m=j,v=Pe,Oe!=null?dt(s,!!m,Oe,!1):!!v!=!!m&&(c!=null?dt(s,!!m,c,!0):dt(s,!!m,m?[]:"",!1));return;case"textarea":Pe=Oe=null;for(Z in m)if(A=m[Z],m.hasOwnProperty(Z)&&A!=null&&!v.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:fr(s,c,Z,null,v,A)}for(j in v)if(A=v[j],O=m[j],v.hasOwnProperty(j)&&(A!=null||O!=null))switch(j){case"value":Oe=A;break;case"defaultValue":Pe=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:A!==O&&fr(s,c,j,A,v,O)}an(s,Oe,Pe);return;case"option":for(var ot in m)if(Oe=m[ot],m.hasOwnProperty(ot)&&Oe!=null&&!v.hasOwnProperty(ot))switch(ot){case"selected":s.selected=!1;break;default:fr(s,c,ot,null,v,Oe)}for(le in v)if(Oe=v[le],Pe=m[le],v.hasOwnProperty(le)&&Oe!==Pe&&(Oe!=null||Pe!=null))switch(le){case"selected":s.selected=Oe&&typeof Oe!="function"&&typeof Oe!="symbol";break;default:fr(s,c,le,Oe,v,Pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Et in m)Oe=m[Et],m.hasOwnProperty(Et)&&Oe!=null&&!v.hasOwnProperty(Et)&&fr(s,c,Et,null,v,Oe);for(Ae in v)if(Oe=v[Ae],Pe=m[Ae],v.hasOwnProperty(Ae)&&Oe!==Pe&&(Oe!=null||Pe!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(n(137,c));break;default:fr(s,c,Ae,Oe,v,Pe)}return;default:if(pr(c)){for(var mr in m)Oe=m[mr],m.hasOwnProperty(mr)&&Oe!==void 0&&!v.hasOwnProperty(mr)&&Hy(s,c,mr,void 0,v,Oe);for(ze in v)Oe=v[ze],Pe=m[ze],!v.hasOwnProperty(ze)||Oe===Pe||Oe===void 0&&Pe===void 0||Hy(s,c,ze,Oe,v,Pe);return}}for(var pe in m)Oe=m[pe],m.hasOwnProperty(pe)&&Oe!=null&&!v.hasOwnProperty(pe)&&fr(s,c,pe,null,v,Oe);for(qe in v)Oe=v[qe],Pe=m[qe],!v.hasOwnProperty(qe)||Oe===Pe||Oe==null&&Pe==null||fr(s,c,qe,Oe,v,Pe)}function oC(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function s9(){if(typeof performance.getEntriesByType=="function"){for(var s=0,c=0,m=performance.getEntriesByType("resource"),v=0;v<m.length;v++){var A=m[v],O=A.transferSize,j=A.initiatorType,Z=A.duration;if(O&&Z&&oC(j)){for(j=0,Z=A.responseEnd,v+=1;v<m.length;v++){var le=m[v],Ae=le.startTime;if(Ae>Z)break;var ze=le.transferSize,qe=le.initiatorType;ze&&oC(qe)&&(le=le.responseEnd,j+=ze*(le<Z?1:(Z-Ae)/(le-Ae)))}if(--v,c+=8*(O+j)/(A.duration/1e3),s++,10<s)break}}if(0<s)return c/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var qy=null,$y=null;function z0(s){return s.nodeType===9?s:s.ownerDocument}function cC(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uC(s,c){if(s===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&c==="foreignObject"?0:s}function Gy(s,c){return s==="textarea"||s==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Yy=null;function i9(){var s=window.event;return s&&s.type==="popstate"?s===Yy?!1:(Yy=s,!0):(Yy=null,!1)}var dC=typeof setTimeout=="function"?setTimeout:void 0,l9=typeof clearTimeout=="function"?clearTimeout:void 0,fC=typeof Promise=="function"?Promise:void 0,o9=typeof queueMicrotask=="function"?queueMicrotask:typeof fC<"u"?function(s){return fC.resolve(null).then(s).catch(c9)}:dC;function c9(s){setTimeout(function(){throw s})}function no(s){return s==="head"}function mC(s,c){var m=c,v=0;do{var A=m.nextSibling;if(s.removeChild(m),A&&A.nodeType===8)if(m=A.data,m==="/$"||m==="/&"){if(v===0){s.removeChild(A),xu(c);return}v--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")v++;else if(m==="html")Jd(s.ownerDocument.documentElement);else if(m==="head"){m=s.ownerDocument.head,Jd(m);for(var O=m.firstChild;O;){var j=O.nextSibling,Z=O.nodeName;O[oi]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&O.rel.toLowerCase()==="stylesheet"||m.removeChild(O),O=j}}else m==="body"&&Jd(s.ownerDocument.body);m=A}while(m);xu(c)}function hC(s,c){var m=s;s=0;do{var v=m.nextSibling;if(m.nodeType===1?c?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(c?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),v&&v.nodeType===8)if(m=v.data,m==="/$"){if(s===0)break;s--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||s++;m=v}while(m)}function Xy(s){var c=s.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var m=c;switch(c=c.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Xy(m),Gn(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}s.removeChild(m)}}function u9(s,c,m,v){for(;s.nodeType===1;){var A=m;if(s.nodeName.toLowerCase()!==c.toLowerCase()){if(!v&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(v){if(!s[oi])switch(c){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(O=s.getAttribute("rel"),O==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(O!==A.rel||s.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||s.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||s.getAttribute("title")!==(A.title==null?null:A.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(O=s.getAttribute("src"),(O!==(A.src==null?null:A.src)||s.getAttribute("type")!==(A.type==null?null:A.type)||s.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&O&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(c==="input"&&s.type==="hidden"){var O=A.name==null?null:""+A.name;if(A.type==="hidden"&&s.getAttribute("name")===O)return s}else return s;if(s=ps(s.nextSibling),s===null)break}return null}function d9(s,c,m){if(c==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!m||(s=ps(s.nextSibling),s===null))return null;return s}function gC(s,c){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=ps(s.nextSibling),s===null))return null;return s}function Wy(s){return s.data==="$?"||s.data==="$~"}function Ky(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function f9(s,c){var m=s.ownerDocument;if(s.data==="$~")s._reactRetry=c;else if(s.data!=="$?"||m.readyState!=="loading")c();else{var v=function(){c(),m.removeEventListener("DOMContentLoaded",v)};m.addEventListener("DOMContentLoaded",v),s._reactRetry=v}}function ps(s){for(;s!=null;s=s.nextSibling){var c=s.nodeType;if(c===1||c===3)break;if(c===8){if(c=s.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return s}var Zy=null;function pC(s){s=s.nextSibling;for(var c=0;s;){if(s.nodeType===8){var m=s.data;if(m==="/$"||m==="/&"){if(c===0)return ps(s.nextSibling);c--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||c++}s=s.nextSibling}return null}function yC(s){s=s.previousSibling;for(var c=0;s;){if(s.nodeType===8){var m=s.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(c===0)return s;c--}else m!=="/$"&&m!=="/&"||c++}s=s.previousSibling}return null}function xC(s,c,m){switch(c=z0(m),s){case"html":if(s=c.documentElement,!s)throw Error(n(452));return s;case"head":if(s=c.head,!s)throw Error(n(453));return s;case"body":if(s=c.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function Jd(s){for(var c=s.attributes;c.length;)s.removeAttributeNode(c[0]);Gn(s)}var ys=new Map,bC=new Set;function V0(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var tl=se.d;se.d={f:m9,r:h9,D:g9,C:p9,L:y9,m:x9,X:v9,S:b9,M:E9};function m9(){var s=tl.f(),c=P0();return s||c}function h9(s){var c=Xt(s);c!==null&&c.tag===5&&c.type==="form"?LS(c):tl.r(s)}var gu=typeof document>"u"?null:document;function vC(s,c,m){var v=gu;if(v&&typeof c=="string"&&c){var A=Ft(c);A='link[rel="'+s+'"][href="'+A+'"]',typeof m=="string"&&(A+='[crossorigin="'+m+'"]'),bC.has(A)||(bC.add(A),s={rel:s,crossOrigin:m,href:c},v.querySelector(A)===null&&(c=v.createElement("link"),Zn(c,"link",s),wr(c),v.head.appendChild(c)))}}function g9(s){tl.D(s),vC("dns-prefetch",s,null)}function p9(s,c){tl.C(s,c),vC("preconnect",s,c)}function y9(s,c,m){tl.L(s,c,m);var v=gu;if(v&&s&&c){var A='link[rel="preload"][as="'+Ft(c)+'"]';c==="image"&&m&&m.imageSrcSet?(A+='[imagesrcset="'+Ft(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(A+='[imagesizes="'+Ft(m.imageSizes)+'"]')):A+='[href="'+Ft(s)+'"]';var O=A;switch(c){case"style":O=pu(s);break;case"script":O=yu(s)}ys.has(O)||(s=w({rel:"preload",href:c==="image"&&m&&m.imageSrcSet?void 0:s,as:c},m),ys.set(O,s),v.querySelector(A)!==null||c==="style"&&v.querySelector(ef(O))||c==="script"&&v.querySelector(tf(O))||(c=v.createElement("link"),Zn(c,"link",s),wr(c),v.head.appendChild(c)))}}function x9(s,c){tl.m(s,c);var m=gu;if(m&&s){var v=c&&typeof c.as=="string"?c.as:"script",A='link[rel="modulepreload"][as="'+Ft(v)+'"][href="'+Ft(s)+'"]',O=A;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=yu(s)}if(!ys.has(O)&&(s=w({rel:"modulepreload",href:s},c),ys.set(O,s),m.querySelector(A)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(tf(O)))return}v=m.createElement("link"),Zn(v,"link",s),wr(v),m.head.appendChild(v)}}}function b9(s,c,m){tl.S(s,c,m);var v=gu;if(v&&s){var A=ct(v).hoistableStyles,O=pu(s);c=c||"default";var j=A.get(O);if(!j){var Z={loading:0,preload:null};if(j=v.querySelector(ef(O)))Z.loading=5;else{s=w({rel:"stylesheet",href:s,"data-precedence":c},m),(m=ys.get(O))&&Qy(s,m);var le=j=v.createElement("link");wr(le),Zn(le,"link",s),le._p=new Promise(function(Ae,ze){le.onload=Ae,le.onerror=ze}),le.addEventListener("load",function(){Z.loading|=1}),le.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,H0(j,c,v)}j={type:"stylesheet",instance:j,count:1,state:Z},A.set(O,j)}}}function v9(s,c){tl.X(s,c);var m=gu;if(m&&s){var v=ct(m).hoistableScripts,A=yu(s),O=v.get(A);O||(O=m.querySelector(tf(A)),O||(s=w({src:s,async:!0},c),(c=ys.get(A))&&Jy(s,c),O=m.createElement("script"),wr(O),Zn(O,"link",s),m.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},v.set(A,O))}}function E9(s,c){tl.M(s,c);var m=gu;if(m&&s){var v=ct(m).hoistableScripts,A=yu(s),O=v.get(A);O||(O=m.querySelector(tf(A)),O||(s=w({src:s,async:!0,type:"module"},c),(c=ys.get(A))&&Jy(s,c),O=m.createElement("script"),wr(O),Zn(O,"link",s),m.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},v.set(A,O))}}function EC(s,c,m,v){var A=(A=ie.current)?V0(A):null;if(!A)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(c=pu(m.href),m=ct(A).hoistableStyles,v=m.get(c),v||(v={type:"style",instance:null,count:0,state:null},m.set(c,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){s=pu(m.href);var O=ct(A).hoistableStyles,j=O.get(s);if(j||(A=A.ownerDocument||A,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(s,j),(O=A.querySelector(ef(s)))&&!O._p&&(j.instance=O,j.state.loading=5),ys.has(s)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},ys.set(s,m),O||w9(A,s,m,j.state))),c&&v===null)throw Error(n(528,""));return j}if(c&&v!==null)throw Error(n(529,""));return null;case"script":return c=m.async,m=m.src,typeof m=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=yu(m),m=ct(A).hoistableScripts,v=m.get(c),v||(v={type:"script",instance:null,count:0,state:null},m.set(c,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function pu(s){return'href="'+Ft(s)+'"'}function ef(s){return'link[rel="stylesheet"]['+s+"]"}function wC(s){return w({},s,{"data-precedence":s.precedence,precedence:null})}function w9(s,c,m,v){s.querySelector('link[rel="preload"][as="style"]['+c+"]")?v.loading=1:(c=s.createElement("link"),v.preload=c,c.addEventListener("load",function(){return v.loading|=1}),c.addEventListener("error",function(){return v.loading|=2}),Zn(c,"link",m),wr(c),s.head.appendChild(c))}function yu(s){return'[src="'+Ft(s)+'"]'}function tf(s){return"script[async]"+s}function NC(s,c,m){if(c.count++,c.instance===null)switch(c.type){case"style":var v=s.querySelector('style[data-href~="'+Ft(m.href)+'"]');if(v)return c.instance=v,wr(v),v;var A=w({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return v=(s.ownerDocument||s).createElement("style"),wr(v),Zn(v,"style",A),H0(v,m.precedence,s),c.instance=v;case"stylesheet":A=pu(m.href);var O=s.querySelector(ef(A));if(O)return c.state.loading|=4,c.instance=O,wr(O),O;v=wC(m),(A=ys.get(A))&&Qy(v,A),O=(s.ownerDocument||s).createElement("link"),wr(O);var j=O;return j._p=new Promise(function(Z,le){j.onload=Z,j.onerror=le}),Zn(O,"link",v),c.state.loading|=4,H0(O,m.precedence,s),c.instance=O;case"script":return O=yu(m.src),(A=s.querySelector(tf(O)))?(c.instance=A,wr(A),A):(v=m,(A=ys.get(O))&&(v=w({},m),Jy(v,A)),s=s.ownerDocument||s,A=s.createElement("script"),wr(A),Zn(A,"link",v),s.head.appendChild(A),c.instance=A);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(v=c.instance,c.state.loading|=4,H0(v,m.precedence,s));return c.instance}function H0(s,c,m){for(var v=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=v.length?v[v.length-1]:null,O=A,j=0;j<v.length;j++){var Z=v[j];if(Z.dataset.precedence===c)O=Z;else if(O!==A)break}O?O.parentNode.insertBefore(s,O.nextSibling):(c=m.nodeType===9?m.head:m,c.insertBefore(s,c.firstChild))}function Qy(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.title==null&&(s.title=c.title)}function Jy(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.integrity==null&&(s.integrity=c.integrity)}var q0=null;function SC(s,c,m){if(q0===null){var v=new Map,A=q0=new Map;A.set(m,v)}else A=q0,v=A.get(m),v||(v=new Map,A.set(m,v));if(v.has(s))return v;for(v.set(s,null),m=m.getElementsByTagName(s),A=0;A<m.length;A++){var O=m[A];if(!(O[oi]||O[Rr]||s==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var j=O.getAttribute(c)||"";j=s+j;var Z=v.get(j);Z?Z.push(O):v.set(j,[O])}}return v}function CC(s,c,m){s=s.ownerDocument||s,s.head.insertBefore(m,c==="title"?s.querySelector("head > title"):null)}function N9(s,c,m){if(m===1||c.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return s=c.disabled,typeof c.precedence=="string"&&s==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function AC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function S9(s,c,m,v){if(m.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var A=pu(v.href),O=c.querySelector(ef(A));if(O){c=O._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(s.count++,s=$0.bind(s),c.then(s,s)),m.state.loading|=4,m.instance=O,wr(O);return}O=c.ownerDocument||c,v=wC(v),(A=ys.get(A))&&Qy(v,A),O=O.createElement("link"),wr(O);var j=O;j._p=new Promise(function(Z,le){j.onload=Z,j.onerror=le}),Zn(O,"link",v),m.instance=O}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(m,c),(c=m.state.preload)&&(m.state.loading&3)===0&&(s.count++,m=$0.bind(s),c.addEventListener("load",m),c.addEventListener("error",m))}}var ex=0;function C9(s,c){return s.stylesheets&&s.count===0&&Y0(s,s.stylesheets),0<s.count||0<s.imgCount?function(m){var v=setTimeout(function(){if(s.stylesheets&&Y0(s,s.stylesheets),s.unsuspend){var O=s.unsuspend;s.unsuspend=null,O()}},6e4+c);0<s.imgBytes&&ex===0&&(ex=62500*s9());var A=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Y0(s,s.stylesheets),s.unsuspend)){var O=s.unsuspend;s.unsuspend=null,O()}},(s.imgBytes>ex?50:800)+c);return s.unsuspend=m,function(){s.unsuspend=null,clearTimeout(v),clearTimeout(A)}}:null}function $0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Y0(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var G0=null;function Y0(s,c){s.stylesheets=null,s.unsuspend!==null&&(s.count++,G0=new Map,c.forEach(A9,s),G0=null,$0.call(s))}function A9(s,c){if(!(c.state.loading&4)){var m=G0.get(s);if(m)var v=m.get(null);else{m=new Map,G0.set(s,m);for(var A=s.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<A.length;O++){var j=A[O];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(m.set(j.dataset.precedence,j),v=j)}v&&m.set(null,v)}A=c.instance,j=A.getAttribute("data-precedence"),O=m.get(j)||v,O===v&&m.set(null,A),m.set(j,A),this.count++,v=$0.bind(this),A.addEventListener("load",v),A.addEventListener("error",v),O?O.parentNode.insertBefore(A,O.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(A,s.firstChild)),c.state.loading|=4}}var rf={$$typeof:I,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function T9(s,c,m,v,A,O,j,Z,le){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$n(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$n(0),this.hiddenUpdates=$n(null),this.identifierPrefix=v,this.onUncaughtError=A,this.onCaughtError=O,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=le,this.incompleteTransitions=new Map}function TC(s,c,m,v,A,O,j,Z,le,Ae,ze,qe){return s=new T9(s,c,m,j,le,Ae,ze,qe,Z),c=1,O===!0&&(c|=24),O=Ga(3,null,null,c),s.current=O,O.stateNode=s,c=P1(),c.refCount++,s.pooledCache=c,c.refCount++,O.memoizedState={element:v,isDehydrated:m,cache:c},B1(O),s}function OC(s){return s?(s=Xc,s):Xc}function _C(s,c,m,v,A,O){A=OC(A),v.context===null?v.context=A:v.pendingContext=A,v=Gl(c),v.payload={element:m},O=O===void 0?null:O,O!==null&&(v.callback=O),m=Yl(s,v,c),m!==null&&(Oa(m,s,c),Rd(m,s,c))}function DC(s,c){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var m=s.retryLane;s.retryLane=m!==0&&m<c?m:c}}function tx(s,c){DC(s,c),(s=s.alternate)&&DC(s,c)}function kC(s){if(s.tag===13||s.tag===31){var c=Go(s,67108864);c!==null&&Oa(c,s,67108864),tx(s,67108864)}}function MC(s){if(s.tag===13||s.tag===31){var c=Za();c=gn(c);var m=Go(s,c);m!==null&&Oa(m,s,c),tx(s,c)}}var X0=!0;function O9(s,c,m,v){var A=ne.T;ne.T=null;var O=se.p;try{se.p=2,rx(s,c,m,v)}finally{se.p=O,ne.T=A}}function _9(s,c,m,v){var A=ne.T;ne.T=null;var O=se.p;try{se.p=8,rx(s,c,m,v)}finally{se.p=O,ne.T=A}}function rx(s,c,m,v){if(X0){var A=nx(v);if(A===null)Vy(s,c,v,W0,m),RC(s,v);else if(k9(A,s,c,m,v))v.stopPropagation();else if(RC(s,v),c&4&&-1<D9.indexOf(s)){for(;A!==null;){var O=Xt(A);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var j=ya(O.pendingLanes);if(j!==0){var Z=O;for(Z.pendingLanes|=2,Z.entangledLanes|=2;j;){var le=1<<31-rt(j);Z.entanglements[1]|=le,j&=~le}pi(O),(nr&6)===0&&(k0=Be()+500,Kd(0))}}break;case 31:case 13:Z=Go(O,2),Z!==null&&Oa(Z,O,2),P0(),tx(O,2)}if(O=nx(v),O===null&&Vy(s,c,v,W0,m),O===A)break;A=O}A!==null&&v.stopPropagation()}else Vy(s,c,v,null,m)}}function nx(s){return s=bd(s),ax(s)}var W0=null;function ax(s){if(W0=null,s=Ar(s),s!==null){var c=o(s);if(c===null)s=null;else{var m=c.tag;if(m===13){if(s=d(c),s!==null)return s;s=null}else if(m===31){if(s=g(c),s!==null)return s;s=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;s=null}else c!==s&&(s=null)}}return W0=s,null}function PC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(St()){case pt:return 2;case ar:return 8;case $r:case Cr:return 32;case La:return 268435456;default:return 32}default:return 32}}var sx=!1,ao=null,so=null,io=null,nf=new Map,af=new Map,lo=[],D9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function RC(s,c){switch(s){case"focusin":case"focusout":ao=null;break;case"dragenter":case"dragleave":so=null;break;case"mouseover":case"mouseout":io=null;break;case"pointerover":case"pointerout":nf.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":af.delete(c.pointerId)}}function sf(s,c,m,v,A,O){return s===null||s.nativeEvent!==O?(s={blockedOn:c,domEventName:m,eventSystemFlags:v,nativeEvent:O,targetContainers:[A]},c!==null&&(c=Xt(c),c!==null&&kC(c)),s):(s.eventSystemFlags|=v,c=s.targetContainers,A!==null&&c.indexOf(A)===-1&&c.push(A),s)}function k9(s,c,m,v,A){switch(c){case"focusin":return ao=sf(ao,s,c,m,v,A),!0;case"dragenter":return so=sf(so,s,c,m,v,A),!0;case"mouseover":return io=sf(io,s,c,m,v,A),!0;case"pointerover":var O=A.pointerId;return nf.set(O,sf(nf.get(O)||null,s,c,m,v,A)),!0;case"gotpointercapture":return O=A.pointerId,af.set(O,sf(af.get(O)||null,s,c,m,v,A)),!0}return!1}function IC(s){var c=Ar(s.target);if(c!==null){var m=o(c);if(m!==null){if(c=m.tag,c===13){if(c=d(m),c!==null){s.blockedOn=c,st(s.priority,function(){MC(m)});return}}else if(c===31){if(c=g(m),c!==null){s.blockedOn=c,st(s.priority,function(){MC(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){s.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}s.blockedOn=null}function K0(s){if(s.blockedOn!==null)return!1;for(var c=s.targetContainers;0<c.length;){var m=nx(s.nativeEvent);if(m===null){m=s.nativeEvent;var v=new m.constructor(m.type,m);Fo=v,m.target.dispatchEvent(v),Fo=null}else return c=Xt(m),c!==null&&kC(c),s.blockedOn=m,!1;c.shift()}return!0}function LC(s,c,m){K0(s)&&m.delete(c)}function M9(){sx=!1,ao!==null&&K0(ao)&&(ao=null),so!==null&&K0(so)&&(so=null),io!==null&&K0(io)&&(io=null),nf.forEach(LC),af.forEach(LC)}function Z0(s,c){s.blockedOn===c&&(s.blockedOn=null,sx||(sx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,M9)))}var Q0=null;function BC(s){Q0!==s&&(Q0=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Q0===s&&(Q0=null);for(var c=0;c<s.length;c+=3){var m=s[c],v=s[c+1],A=s[c+2];if(typeof v!="function"){if(ax(v||m)===null)continue;break}var O=Xt(m);O!==null&&(s.splice(c,3),c-=3,ny(O,{pending:!0,data:A,method:m.method,action:v},v,A))}}))}function xu(s){function c(le){return Z0(le,s)}ao!==null&&Z0(ao,s),so!==null&&Z0(so,s),io!==null&&Z0(io,s),nf.forEach(c),af.forEach(c);for(var m=0;m<lo.length;m++){var v=lo[m];v.blockedOn===s&&(v.blockedOn=null)}for(;0<lo.length&&(m=lo[0],m.blockedOn===null);)IC(m),m.blockedOn===null&&lo.shift();if(m=(s.ownerDocument||s).$$reactFormReplay,m!=null)for(v=0;v<m.length;v+=3){var A=m[v],O=m[v+1],j=A[Kt]||null;if(typeof O=="function")j||BC(m);else if(j){var Z=null;if(O&&O.hasAttribute("formAction")){if(A=O,j=O[Kt]||null)Z=j.formAction;else if(ax(A)!==null)continue}else Z=j.action;typeof Z=="function"?m[v+1]=Z:(m.splice(v,3),v-=3),BC(m)}}}function FC(){function s(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(j){return A=j})},focusReset:"manual",scroll:"manual"})}function c(){A!==null&&(A(),A=null),v||setTimeout(m,20)}function m(){if(!v&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,A=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(m,100),function(){v=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),A!==null&&(A(),A=null)}}}function ix(s){this._internalRoot=s}J0.prototype.render=ix.prototype.render=function(s){var c=this._internalRoot;if(c===null)throw Error(n(409));var m=c.current,v=Za();_C(m,v,s,c,null,null)},J0.prototype.unmount=ix.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var c=s.containerInfo;_C(s.current,2,null,s,null,null),P0(),c[ia]=null}};function J0(s){this._internalRoot=s}J0.prototype.unstable_scheduleHydration=function(s){if(s){var c=Bn();s={blockedOn:null,target:s,priority:c};for(var m=0;m<lo.length&&c!==0&&c<lo[m].priority;m++);lo.splice(m,0,s),m===0&&IC(s)}};var UC=t.version;if(UC!=="19.2.0")throw Error(n(527,UC,"19.2.0"));se.findDOMNode=function(s){var c=s._reactInternals;if(c===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=x(c),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var P9={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{Gt=eh.inject(P9),ge=eh}catch{}}return lf.createRoot=function(s,c){if(!i(s))throw Error(n(299));var m=!1,v="",A=GS,O=YS,j=XS;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&(j=c.onRecoverableError)),c=TC(s,1,!1,null,null,m,v,null,A,O,j,FC),s[ia]=c.current,zy(s),new ix(c)},lf.hydrateRoot=function(s,c,m){if(!i(s))throw Error(n(299));var v=!1,A="",O=GS,j=YS,Z=XS,le=null;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(O=m.onUncaughtError),m.onCaughtError!==void 0&&(j=m.onCaughtError),m.onRecoverableError!==void 0&&(Z=m.onRecoverableError),m.formState!==void 0&&(le=m.formState)),c=TC(s,1,!0,c,m??null,v,A,le,O,j,Z,FC),c.context=OC(null),m=c.current,v=Za(),v=gn(v),A=Gl(v),A.callback=null,Yl(m,A,v),m=v,c.current.lanes=m,ls(c,m),pi(c),s[ia]=c.current,zy(s),new J0(c)},lf.version="19.2.0",lf}var YC;function z9(){if(YC)return ox.exports;YC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ox.exports=j9(),ox.exports}var V9=z9();var XC="popstate";function H9(e={}){function t(n,i){let{pathname:o,search:d,hash:g}=n.location;return bv("",{pathname:o,search:d,hash:g},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:If(i)}return $9(t,r,null,e)}function zr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _s(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function q9(){return Math.random().toString(36).substring(2,10)}function WC(e,t){return{usr:e.state,key:e.key,idx:t}}function bv(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?rd(t):t,state:r,key:t&&t.key||n||q9()}}function If({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function rd(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function $9(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:o=!1}=n,d=i.history,g="POP",h=null,x=y();x==null&&(x=0,d.replaceState({...d.state,idx:x},""));function y(){return(d.state||{idx:null}).idx}function w(){g="POP";let M=y(),R=M==null?null:M-x;x=M,h&&h({action:g,location:k.location,delta:R})}function C(M,R){g="PUSH";let F=bv(k.location,M,R);x=y()+1;let I=WC(F,x),G=k.createHref(F);try{d.pushState(I,"",G)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(G)}o&&h&&h({action:g,location:k.location,delta:1})}function _(M,R){g="REPLACE";let F=bv(k.location,M,R);x=y();let I=WC(F,x),G=k.createHref(F);d.replaceState(I,"",G),o&&h&&h({action:g,location:k.location,delta:0})}function D(M){return G9(M)}let k={get action(){return g},get location(){return e(i,d)},listen(M){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(XC,w),h=M,()=>{i.removeEventListener(XC,w),h=null}},createHref(M){return t(i,M)},createURL:D,encodeLocation(M){let R=D(M);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:C,replace:_,go(M){return d.go(M)}};return k}function G9(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),zr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:If(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function JO(e,t,r="/"){return Y9(e,t,r,!1)}function Y9(e,t,r,n){let i=typeof t=="string"?rd(t):t,o=dl(i.pathname||"/",r);if(o==null)return null;let d=e_(e);X9(d);let g=null;for(let h=0;g==null&&h<d.length;++h){let x=sL(o);g=nL(d[h],x,n)}return g}function e_(e,t=[],r=[],n="",i=!1){let o=(d,g,h=i,x)=>{let y={relativePath:x===void 0?d.path||"":x,caseSensitive:d.caseSensitive===!0,childrenIndex:g,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(n)&&h)return;zr(y.relativePath.startsWith(n),`Absolute route path "${y.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(n.length)}let w=ol([n,y.relativePath]),C=r.concat(y);d.children&&d.children.length>0&&(zr(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),e_(d.children,t,C,w,h)),!(d.path==null&&!d.index)&&t.push({path:w,score:tL(w,d.index),routesMeta:C})};return e.forEach((d,g)=>{if(d.path===""||!d.path?.includes("?"))o(d,g);else for(let h of t_(d.path))o(d,g,!0,h)}),t}function t_(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let d=t_(n.join("/")),g=[];return g.push(...d.map(h=>h===""?o:[o,h].join("/"))),i&&g.push(...d),g.map(h=>e.startsWith("/")&&h===""?"/":h)}function X9(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:rL(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var W9=/^:[\w-]+$/,K9=3,Z9=2,Q9=1,J9=10,eL=-2,KC=e=>e==="*";function tL(e,t){let r=e.split("/"),n=r.length;return r.some(KC)&&(n+=eL),t&&(n+=Z9),r.filter(i=>!KC(i)).reduce((i,o)=>i+(W9.test(o)?K9:o===""?Q9:J9),n)}function rL(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function nL(e,t,r=!1){let{routesMeta:n}=e,i={},o="/",d=[];for(let g=0;g<n.length;++g){let h=n[g],x=g===n.length-1,y=o==="/"?t:t.slice(o.length)||"/",w=rg({path:h.relativePath,caseSensitive:h.caseSensitive,end:x},y),C=h.route;if(!w&&x&&r&&!n[n.length-1].route.index&&(w=rg({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},y)),!w)return null;Object.assign(i,w.params),d.push({params:i,pathname:ol([o,w.pathname]),pathnameBase:uL(ol([o,w.pathnameBase])),route:C}),w.pathnameBase!=="/"&&(o=ol([o,w.pathnameBase]))}return d}function rg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=aL(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let o=i[0],d=o.replace(/(.)\/+$/,"$1"),g=i.slice(1);return{params:n.reduce((x,{paramName:y,isOptional:w},C)=>{if(y==="*"){let D=g[C]||"";d=o.slice(0,o.length-D.length).replace(/(.)\/+$/,"$1")}const _=g[C];return w&&!_?x[y]=void 0:x[y]=(_||"").replace(/%2F/g,"/"),x},{}),pathname:o,pathnameBase:d,pattern:e}}function aL(e,t=!1,r=!0){_s(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,h)=>(n.push({paramName:g,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function sL(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return _s(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function dl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var iL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lL=e=>iL.test(e);function oL(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?rd(e):e,o;if(r)if(lL(r))o=r;else{if(r.includes("//")){let d=r;r=r.replace(/\/\/+/g,"/"),_s(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${r}`)}r.startsWith("/")?o=ZC(r.substring(1),"/"):o=ZC(r,t)}else o=t;return{pathname:o,search:dL(n),hash:fL(i)}}function ZC(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function fx(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cL(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function JE(e){let t=cL(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function e2(e,t,r,n=!1){let i;typeof e=="string"?i=rd(e):(i={...e},zr(!i.pathname||!i.pathname.includes("?"),fx("?","pathname","search",i)),zr(!i.pathname||!i.pathname.includes("#"),fx("#","pathname","hash",i)),zr(!i.search||!i.search.includes("#"),fx("#","search","hash",i)));let o=e===""||i.pathname==="",d=o?"/":i.pathname,g;if(d==null)g=r;else{let w=t.length-1;if(!n&&d.startsWith("..")){let C=d.split("/");for(;C[0]==="..";)C.shift(),w-=1;i.pathname=C.join("/")}g=w>=0?t[w]:"/"}let h=oL(i,g),x=d&&d!=="/"&&d.endsWith("/"),y=(o||d===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(x||y)&&(h.pathname+="/"),h}var ol=e=>e.join("/").replace(/\/\/+/g,"/"),uL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),dL=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,fL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function mL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var r_=["POST","PUT","PATCH","DELETE"];new Set(r_);var hL=["GET",...r_];new Set(hL);var nd=N.createContext(null);nd.displayName="DataRouter";var fp=N.createContext(null);fp.displayName="DataRouterState";N.createContext(!1);var n_=N.createContext({isTransitioning:!1});n_.displayName="ViewTransition";var gL=N.createContext(new Map);gL.displayName="Fetchers";var pL=N.createContext(null);pL.displayName="Await";var ni=N.createContext(null);ni.displayName="Navigation";var im=N.createContext(null);im.displayName="Location";var ai=N.createContext({outlet:null,matches:[],isDataRoute:!1});ai.displayName="Route";var t2=N.createContext(null);t2.displayName="RouteError";function yL(e,{relative:t}={}){zr(ad(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=N.useContext(ni),{hash:i,pathname:o,search:d}=lm(e,{relative:t}),g=o;return r!=="/"&&(g=o==="/"?r:ol([r,o])),n.createHref({pathname:g,search:d,hash:i})}function ad(){return N.useContext(im)!=null}function Ps(){return zr(ad(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(im).location}var a_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function s_(e){N.useContext(ni).static||N.useLayoutEffect(e)}function mp(){let{isDataRoute:e}=N.useContext(ai);return e?ML():xL()}function xL(){zr(ad(),"useNavigate() may be used only in the context of a <Router> component.");let e=N.useContext(nd),{basename:t,navigator:r}=N.useContext(ni),{matches:n}=N.useContext(ai),{pathname:i}=Ps(),o=JSON.stringify(JE(n)),d=N.useRef(!1);return s_(()=>{d.current=!0}),N.useCallback((h,x={})=>{if(_s(d.current,a_),!d.current)return;if(typeof h=="number"){r.go(h);return}let y=e2(h,JSON.parse(o),i,x.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:ol([t,y.pathname])),(x.replace?r.replace:r.push)(y,x.state,x)},[t,r,o,i,e])}var bL=N.createContext(null);function vL(e){let t=N.useContext(ai).outlet;return N.useMemo(()=>t&&N.createElement(bL.Provider,{value:e},t),[t,e])}function lm(e,{relative:t}={}){let{matches:r}=N.useContext(ai),{pathname:n}=Ps(),i=JSON.stringify(JE(r));return N.useMemo(()=>e2(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function EL(e,t){return i_(e,t)}function i_(e,t,r,n,i){zr(ad(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=N.useContext(ni),{matches:d}=N.useContext(ai),g=d[d.length-1],h=g?g.params:{},x=g?g.pathname:"/",y=g?g.pathnameBase:"/",w=g&&g.route;{let F=w&&w.path||"";l_(x,!w||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let C=Ps(),_;if(t){let F=typeof t=="string"?rd(t):t;zr(y==="/"||F.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${F.pathname}" was given in the \`location\` prop.`),_=F}else _=C;let D=_.pathname||"/",k=D;if(y!=="/"){let F=y.replace(/^\//,"").split("/");k="/"+D.replace(/^\//,"").split("/").slice(F.length).join("/")}let M=JO(e,{pathname:k});_s(w||M!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),_s(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=AL(M&&M.map(F=>Object.assign({},F,{params:Object.assign({},h,F.params),pathname:ol([y,o.encodeLocation?o.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?y:ol([y,o.encodeLocation?o.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),d,r,n,i);return t&&R?N.createElement(im.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},R):R}function wL(){let e=kL(),t=mL(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:o},"ErrorBoundary")," or"," ",N.createElement("code",{style:o},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:i},r):null,d)}var NL=N.createElement(wL,null),SL=class extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?N.createElement(ai.Provider,{value:this.props.routeContext},N.createElement(t2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function CL({routeContext:e,match:t,children:r}){let n=N.useContext(nd);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(ai.Provider,{value:e},r)}function AL(e,t=[],r=null,n=null,i=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,d=r?.errors;if(d!=null){let y=o.findIndex(w=>w.route.id&&d?.[w.route.id]!==void 0);zr(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),o=o.slice(0,Math.min(o.length,y+1))}let g=!1,h=-1;if(r)for(let y=0;y<o.length;y++){let w=o[y];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(h=y),w.route.id){let{loaderData:C,errors:_}=r,D=w.route.loader&&!C.hasOwnProperty(w.route.id)&&(!_||_[w.route.id]===void 0);if(w.route.lazy||D){g=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let x=r&&n?(y,w)=>{n(y,{location:r.location,params:r.matches?.[0]?.params??{},errorInfo:w})}:void 0;return o.reduceRight((y,w,C)=>{let _,D=!1,k=null,M=null;r&&(_=d&&w.route.id?d[w.route.id]:void 0,k=w.route.errorElement||NL,g&&(h<0&&C===0?(l_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,M=null):h===C&&(D=!0,M=w.route.hydrateFallbackElement||null)));let R=t.concat(o.slice(0,C+1)),F=()=>{let I;return _?I=k:D?I=M:w.route.Component?I=N.createElement(w.route.Component,null):w.route.element?I=w.route.element:I=y,N.createElement(CL,{match:w,routeContext:{outlet:y,matches:R,isDataRoute:r!=null},children:I})};return r&&(w.route.ErrorBoundary||w.route.errorElement||C===0)?N.createElement(SL,{location:r.location,revalidation:r.revalidation,component:k,error:_,children:F(),routeContext:{outlet:null,matches:R,isDataRoute:!0},onError:x}):F()},null)}function r2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TL(e){let t=N.useContext(nd);return zr(t,r2(e)),t}function OL(e){let t=N.useContext(fp);return zr(t,r2(e)),t}function _L(e){let t=N.useContext(ai);return zr(t,r2(e)),t}function n2(e){let t=_L(e),r=t.matches[t.matches.length-1];return zr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function DL(){return n2("useRouteId")}function kL(){let e=N.useContext(t2),t=OL("useRouteError"),r=n2("useRouteError");return e!==void 0?e:t.errors?.[r]}function ML(){let{router:e}=TL("useNavigate"),t=n2("useNavigate"),r=N.useRef(!1);return s_(()=>{r.current=!0}),N.useCallback(async(i,o={})=>{_s(r.current,a_),r.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var QC={};function l_(e,t,r){!t&&!QC[e]&&(QC[e]=!0,_s(!1,r))}N.memo(PL);function PL({routes:e,future:t,state:r,unstable_onError:n}){return i_(e,void 0,r,n,t)}function ng({to:e,replace:t,state:r,relative:n}){zr(ad(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=N.useContext(ni);_s(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=N.useContext(ai),{pathname:d}=Ps(),g=mp(),h=e2(e,JE(o),d,n==="path"),x=JSON.stringify(h);return N.useEffect(()=>{g(JSON.parse(x),{replace:t,state:r,relative:n})},[g,x,n,t,r]),null}function RL(e){return vL(e.context)}function cn(e){zr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IL({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:o=!1}){zr(!ad(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),g=N.useMemo(()=>({basename:d,navigator:i,static:o,future:{}}),[d,i,o]);typeof r=="string"&&(r=rd(r));let{pathname:h="/",search:x="",hash:y="",state:w=null,key:C="default"}=r,_=N.useMemo(()=>{let D=dl(h,d);return D==null?null:{location:{pathname:D,search:x,hash:y,state:w,key:C},navigationType:n}},[d,h,x,y,w,C,n]);return _s(_!=null,`<Router basename="${d}"> is not able to match the URL "${h}${x}${y}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:N.createElement(ni.Provider,{value:g},N.createElement(im.Provider,{children:t,value:_}))}function LL({children:e,location:t}){return EL(vv(e),t)}function vv(e,t=[]){let r=[];return N.Children.forEach(e,(n,i)=>{if(!N.isValidElement(n))return;let o=[...t,i];if(n.type===N.Fragment){r.push.apply(r,vv(n.props.children,o));return}zr(n.type===cn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let d={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(d.children=vv(n.props.children,o)),r.push(d)}),r}var Uh="get",jh="application/x-www-form-urlencoded";function hp(e){return e!=null&&typeof e.tagName=="string"}function BL(e){return hp(e)&&e.tagName.toLowerCase()==="button"}function FL(e){return hp(e)&&e.tagName.toLowerCase()==="form"}function UL(e){return hp(e)&&e.tagName.toLowerCase()==="input"}function jL(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function zL(e,t){return e.button===0&&(!t||t==="_self")&&!jL(e)}var rh=null;function VL(){if(rh===null)try{new FormData(document.createElement("form"),0),rh=!1}catch{rh=!0}return rh}var HL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mx(e){return e!=null&&!HL.has(e)?(_s(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jh}"`),null):e}function qL(e,t){let r,n,i,o,d;if(FL(e)){let g=e.getAttribute("action");n=g?dl(g,t):null,r=e.getAttribute("method")||Uh,i=mx(e.getAttribute("enctype"))||jh,o=new FormData(e)}else if(BL(e)||UL(e)&&(e.type==="submit"||e.type==="image")){let g=e.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||g.getAttribute("action");if(n=h?dl(h,t):null,r=e.getAttribute("formmethod")||g.getAttribute("method")||Uh,i=mx(e.getAttribute("formenctype"))||mx(g.getAttribute("enctype"))||jh,o=new FormData(g,e),!VL()){let{name:x,type:y,value:w}=e;if(y==="image"){let C=x?`${x}.`:"";o.append(`${C}x`,"0"),o.append(`${C}y`,"0")}else x&&o.append(x,w)}}else{if(hp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Uh,n=null,i=jh,d=e}return o&&i==="text/plain"&&(d=o,o=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:o,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function a2(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function $L(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&dl(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function GL(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function YL(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function XL(e,t,r){let n=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let d=await GL(o,r);return d.links?d.links():[]}return[]}));return QL(n.flat(1).filter(YL).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function JC(e,t,r,n,i,o){let d=(h,x)=>r[x]?h.route.id!==r[x].route.id:!0,g=(h,x)=>r[x].pathname!==h.pathname||r[x].route.path?.endsWith("*")&&r[x].params["*"]!==h.params["*"];return o==="assets"?t.filter((h,x)=>d(h,x)||g(h,x)):o==="data"?t.filter((h,x)=>{let y=n.routes[h.route.id];if(!y||!y.hasLoader)return!1;if(d(h,x)||g(h,x))return!0;if(h.route.shouldRevalidate){let w=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function WL(e,t,{includeHydrateFallback:r}={}){return KL(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function KL(e){return[...new Set(e)]}function ZL(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function QL(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let o=JSON.stringify(ZL(i));return r.has(o)||(r.add(o),n.push({key:o,link:i})),n},[])}function o_(){let e=N.useContext(nd);return a2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function JL(){let e=N.useContext(fp);return a2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var s2=N.createContext(void 0);s2.displayName="FrameworkContext";function c_(){let e=N.useContext(s2);return a2(e,"You must render this element inside a <HydratedRouter> element"),e}function eB(e,t){let r=N.useContext(s2),[n,i]=N.useState(!1),[o,d]=N.useState(!1),{onFocus:g,onBlur:h,onMouseEnter:x,onMouseLeave:y,onTouchStart:w}=t,C=N.useRef(null);N.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let k=R=>{R.forEach(F=>{d(F.isIntersecting)})},M=new IntersectionObserver(k,{threshold:.5});return C.current&&M.observe(C.current),()=>{M.disconnect()}}},[e]),N.useEffect(()=>{if(n){let k=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(k)}}},[n]);let _=()=>{i(!0)},D=()=>{i(!1),d(!1)};return r?e!=="intent"?[o,C,{}]:[o,C,{onFocus:of(g,_),onBlur:of(h,D),onMouseEnter:of(x,_),onMouseLeave:of(y,D),onTouchStart:of(w,_)}]:[!1,C,{}]}function of(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function tB({page:e,...t}){let{router:r}=o_(),n=N.useMemo(()=>JO(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?N.createElement(nB,{page:e,matches:n,...t}):null}function rB(e){let{manifest:t,routeModules:r}=c_(),[n,i]=N.useState([]);return N.useEffect(()=>{let o=!1;return XL(e,t,r).then(d=>{o||i(d)}),()=>{o=!0}},[e,t,r]),n}function nB({page:e,matches:t,...r}){let n=Ps(),{manifest:i,routeModules:o}=c_(),{basename:d}=o_(),{loaderData:g,matches:h}=JL(),x=N.useMemo(()=>JC(e,t,h,i,n,"data"),[e,t,h,i,n]),y=N.useMemo(()=>JC(e,t,h,i,n,"assets"),[e,t,h,i,n]),w=N.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let D=new Set,k=!1;if(t.forEach(R=>{let F=i.routes[R.route.id];!F||!F.hasLoader||(!x.some(I=>I.route.id===R.route.id)&&R.route.id in g&&o[R.route.id]?.shouldRevalidate||F.hasClientLoader?k=!0:D.add(R.route.id))}),D.size===0)return[];let M=$L(e,d,"data");return k&&D.size>0&&M.searchParams.set("_routes",t.filter(R=>D.has(R.route.id)).map(R=>R.route.id).join(",")),[M.pathname+M.search]},[d,g,n,i,x,t,e,o]),C=N.useMemo(()=>WL(y,i),[y,i]),_=rB(y);return N.createElement(N.Fragment,null,w.map(D=>N.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...r})),C.map(D=>N.createElement("link",{key:D,rel:"modulepreload",href:D,...r})),_.map(({key:D,link:k})=>N.createElement("link",{key:D,nonce:r.nonce,...k})))}function aB(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var u_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{u_&&(window.__reactRouterVersion="7.9.6")}catch{}function sB({basename:e,children:t,window:r}){let n=N.useRef();n.current==null&&(n.current=H9({window:r,v5Compat:!0}));let i=n.current,[o,d]=N.useState({action:i.action,location:i.location}),g=N.useCallback(h=>{N.startTransition(()=>d(h))},[d]);return N.useLayoutEffect(()=>i.listen(g),[i,g]),N.createElement(IL,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i})}var d_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i2=N.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:o,replace:d,state:g,target:h,to:x,preventScrollReset:y,viewTransition:w,...C},_){let{basename:D}=N.useContext(ni),k=typeof x=="string"&&d_.test(x),M,R=!1;if(typeof x=="string"&&k&&(M=x,u_))try{let V=new URL(window.location.href),Q=x.startsWith("//")?new URL(V.protocol+x):new URL(x),Y=dl(Q.pathname,D);Q.origin===V.origin&&Y!=null?x=Y+Q.search+Q.hash:R=!0}catch{_s(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=yL(x,{relative:i}),[I,G,U]=eB(n,C),z=cB(x,{replace:d,state:g,target:h,preventScrollReset:y,relative:i,viewTransition:w});function L(V){t&&t(V),V.defaultPrevented||z(V)}let H=N.createElement("a",{...C,...U,href:M||F,onClick:R||o?t:L,ref:aB(_,G),target:h,"data-discover":!k&&r==="render"?"true":void 0});return I&&!k?N.createElement(N.Fragment,null,H,N.createElement(tB,{page:F})):H});i2.displayName="Link";var iB=N.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:o,to:d,viewTransition:g,children:h,...x},y){let w=lm(d,{relative:x.relative}),C=Ps(),_=N.useContext(fp),{navigator:D,basename:k}=N.useContext(ni),M=_!=null&&hB(w)&&g===!0,R=D.encodeLocation?D.encodeLocation(w).pathname:w.pathname,F=C.pathname,I=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;r||(F=F.toLowerCase(),I=I?I.toLowerCase():null,R=R.toLowerCase()),I&&k&&(I=dl(I,k)||I);const G=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let U=F===R||!i&&F.startsWith(R)&&F.charAt(G)==="/",z=I!=null&&(I===R||!i&&I.startsWith(R)&&I.charAt(R.length)==="/"),L={isActive:U,isPending:z,isTransitioning:M},H=U?t:void 0,V;typeof n=="function"?V=n(L):V=[n,U?"active":null,z?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let Q=typeof o=="function"?o(L):o;return N.createElement(i2,{...x,"aria-current":H,className:V,ref:y,style:Q,to:d,viewTransition:g},typeof h=="function"?h(L):h)});iB.displayName="NavLink";var lB=N.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:o,method:d=Uh,action:g,onSubmit:h,relative:x,preventScrollReset:y,viewTransition:w,...C},_)=>{let D=fB(),k=mB(g,{relative:x}),M=d.toLowerCase()==="get"?"get":"post",R=typeof g=="string"&&d_.test(g),F=I=>{if(h&&h(I),I.defaultPrevented)return;I.preventDefault();let G=I.nativeEvent.submitter,U=G?.getAttribute("formmethod")||d;D(G||I.currentTarget,{fetcherKey:t,method:U,navigate:r,replace:i,state:o,relative:x,preventScrollReset:y,viewTransition:w})};return N.createElement("form",{ref:_,method:M,action:k,onSubmit:n?h:F,...C,"data-discover":!R&&e==="render"?"true":void 0})});lB.displayName="Form";function oB(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function f_(e){let t=N.useContext(nd);return zr(t,oB(e)),t}function cB(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:o,viewTransition:d}={}){let g=mp(),h=Ps(),x=lm(e,{relative:o});return N.useCallback(y=>{if(zL(y,t)){y.preventDefault();let w=r!==void 0?r:If(h)===If(x);g(e,{replace:w,state:n,preventScrollReset:i,relative:o,viewTransition:d})}},[h,g,x,r,n,t,e,i,o,d])}var uB=0,dB=()=>`__${String(++uB)}__`;function fB(){let{router:e}=f_("useSubmit"),{basename:t}=N.useContext(ni),r=DL();return N.useCallback(async(n,i={})=>{let{action:o,method:d,encType:g,formData:h,body:x}=qL(n,t);if(i.navigate===!1){let y=i.fetcherKey||dB();await e.fetch(y,r,i.action||o,{preventScrollReset:i.preventScrollReset,formData:h,body:x,formMethod:i.method||d,formEncType:i.encType||g,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:h,body:x,formMethod:i.method||d,formEncType:i.encType||g,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}function mB(e,{relative:t}={}){let{basename:r}=N.useContext(ni),n=N.useContext(ai);zr(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),o={...lm(e||".",{relative:t})},d=Ps();if(e==null){o.search=d.search;let g=new URLSearchParams(o.search),h=g.getAll("index");if(h.some(y=>y==="")){g.delete("index"),h.filter(w=>w).forEach(w=>g.append("index",w));let y=g.toString();o.search=y?`?${y}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:ol([r,o.pathname])),If(o)}function hB(e,{relative:t}={}){let r=N.useContext(n_);zr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=f_("useViewTransitionState"),i=lm(e,{relative:t});if(!r.isTransitioning)return!1;let o=dl(r.currentLocation.pathname,n)||r.currentLocation.pathname,d=dl(r.nextLocation.pathname,n)||r.nextLocation.pathname;return rg(i.pathname,d)!=null||rg(i.pathname,o)!=null}var l2=QO();function m_(e,t){return function(){return e.apply(t,arguments)}}const{toString:gB}=Object.prototype,{getPrototypeOf:o2}=Object,{iterator:gp,toStringTag:h_}=Symbol,pp=(e=>t=>{const r=gB.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),si=e=>(e=e.toLowerCase(),t=>pp(t)===e),yp=e=>t=>typeof t===e,{isArray:sd}=Array,zu=yp("undefined");function om(e){return e!==null&&!zu(e)&&e.constructor!==null&&!zu(e.constructor)&&Pa(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const g_=si("ArrayBuffer");function pB(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&g_(e.buffer),t}const yB=yp("string"),Pa=yp("function"),p_=yp("number"),cm=e=>e!==null&&typeof e=="object",xB=e=>e===!0||e===!1,zh=e=>{if(pp(e)!=="object")return!1;const t=o2(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(h_ in e)&&!(gp in e)},bB=e=>{if(!cm(e)||om(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},vB=si("Date"),EB=si("File"),wB=si("Blob"),NB=si("FileList"),SB=e=>cm(e)&&Pa(e.pipe),CB=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Pa(e.append)&&((t=pp(e))==="formdata"||t==="object"&&Pa(e.toString)&&e.toString()==="[object FormData]"))},AB=si("URLSearchParams"),[TB,OB,_B,DB]=["ReadableStream","Request","Response","Headers"].map(si),kB=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function um(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),sd(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{if(om(e))return;const o=r?Object.getOwnPropertyNames(e):Object.keys(e),d=o.length;let g;for(n=0;n<d;n++)g=o[n],t.call(null,e[g],g,e)}}function y_(e,t){if(om(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const mc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,x_=e=>!zu(e)&&e!==mc;function Ev(){const{caseless:e,skipUndefined:t}=x_(this)&&this||{},r={},n=(i,o)=>{const d=e&&y_(r,o)||o;zh(r[d])&&zh(i)?r[d]=Ev(r[d],i):zh(i)?r[d]=Ev({},i):sd(i)?r[d]=i.slice():(!t||!zu(i))&&(r[d]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&um(arguments[i],n);return r}const MB=(e,t,r,{allOwnKeys:n}={})=>(um(t,(i,o)=>{r&&Pa(i)?e[o]=m_(i,r):e[o]=i},{allOwnKeys:n}),e),PB=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),RB=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},IB=(e,t,r,n)=>{let i,o,d;const g={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)d=i[o],(!n||n(d,e,t))&&!g[d]&&(t[d]=e[d],g[d]=!0);e=r!==!1&&o2(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},LB=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},BB=e=>{if(!e)return null;if(sd(e))return e;let t=e.length;if(!p_(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},FB=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&o2(Uint8Array)),UB=(e,t)=>{const n=(e&&e[gp]).call(e);let i;for(;(i=n.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},jB=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},zB=si("HTMLFormElement"),VB=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),eA=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),HB=si("RegExp"),b_=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};um(r,(i,o)=>{let d;(d=t(i,o,e))!==!1&&(n[o]=d||i)}),Object.defineProperties(e,n)},qB=e=>{b_(e,(t,r)=>{if(Pa(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Pa(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},$B=(e,t)=>{const r={},n=i=>{i.forEach(o=>{r[o]=!0})};return sd(e)?n(e):n(String(e).split(t)),r},GB=()=>{},YB=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function XB(e){return!!(e&&Pa(e.append)&&e[h_]==="FormData"&&e[gp])}const WB=e=>{const t=new Array(10),r=(n,i)=>{if(cm(n)){if(t.indexOf(n)>=0)return;if(om(n))return n;if(!("toJSON"in n)){t[i]=n;const o=sd(n)?[]:{};return um(n,(d,g)=>{const h=r(d,i+1);!zu(h)&&(o[g]=h)}),t[i]=void 0,o}}return n};return r(e,0)},KB=si("AsyncFunction"),ZB=e=>e&&(cm(e)||Pa(e))&&Pa(e.then)&&Pa(e.catch),v_=((e,t)=>e?setImmediate:t?((r,n)=>(mc.addEventListener("message",({source:i,data:o})=>{i===mc&&o===r&&n.length&&n.shift()()},!1),i=>{n.push(i),mc.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Pa(mc.postMessage)),QB=typeof queueMicrotask<"u"?queueMicrotask.bind(mc):typeof process<"u"&&process.nextTick||v_,JB=e=>e!=null&&Pa(e[gp]),Me={isArray:sd,isArrayBuffer:g_,isBuffer:om,isFormData:CB,isArrayBufferView:pB,isString:yB,isNumber:p_,isBoolean:xB,isObject:cm,isPlainObject:zh,isEmptyObject:bB,isReadableStream:TB,isRequest:OB,isResponse:_B,isHeaders:DB,isUndefined:zu,isDate:vB,isFile:EB,isBlob:wB,isRegExp:HB,isFunction:Pa,isStream:SB,isURLSearchParams:AB,isTypedArray:FB,isFileList:NB,forEach:um,merge:Ev,extend:MB,trim:kB,stripBOM:PB,inherits:RB,toFlatObject:IB,kindOf:pp,kindOfTest:si,endsWith:LB,toArray:BB,forEachEntry:UB,matchAll:jB,isHTMLForm:zB,hasOwnProperty:eA,hasOwnProp:eA,reduceDescriptors:b_,freezeMethods:qB,toObjectSet:$B,toCamelCase:VB,noop:GB,toFiniteNumber:YB,findKey:y_,global:mc,isContextDefined:x_,isSpecCompliantForm:XB,toJSONObject:WB,isAsyncFn:KB,isThenable:ZB,setImmediate:v_,asap:QB,isIterable:JB};function Mt(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}Me.inherits(Mt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Me.toJSONObject(this.config),code:this.code,status:this.status}}});const E_=Mt.prototype,w_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{w_[e]={value:e}});Object.defineProperties(Mt,w_);Object.defineProperty(E_,"isAxiosError",{value:!0});Mt.from=(e,t,r,n,i,o)=>{const d=Object.create(E_);Me.toFlatObject(e,d,function(y){return y!==Error.prototype},x=>x!=="isAxiosError");const g=e&&e.message?e.message:"Error",h=t==null&&e?e.code:t;return Mt.call(d,g,h,r,n,i),e&&d.cause==null&&Object.defineProperty(d,"cause",{value:e,configurable:!0}),d.name=e&&e.name||"Error",o&&Object.assign(d,o),d};const eF=null;function wv(e){return Me.isPlainObject(e)||Me.isArray(e)}function N_(e){return Me.endsWith(e,"[]")?e.slice(0,-2):e}function tA(e,t,r){return e?e.concat(t).map(function(i,o){return i=N_(i),!r&&o?"["+i+"]":i}).join(r?".":""):t}function tF(e){return Me.isArray(e)&&!e.some(wv)}const rF=Me.toFlatObject(Me,{},null,function(t){return/^is[A-Z]/.test(t)});function xp(e,t,r){if(!Me.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Me.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,M){return!Me.isUndefined(M[k])});const n=r.metaTokens,i=r.visitor||y,o=r.dots,d=r.indexes,h=(r.Blob||typeof Blob<"u"&&Blob)&&Me.isSpecCompliantForm(t);if(!Me.isFunction(i))throw new TypeError("visitor must be a function");function x(D){if(D===null)return"";if(Me.isDate(D))return D.toISOString();if(Me.isBoolean(D))return D.toString();if(!h&&Me.isBlob(D))throw new Mt("Blob is not supported. Use a Buffer instead.");return Me.isArrayBuffer(D)||Me.isTypedArray(D)?h&&typeof Blob=="function"?new Blob([D]):Buffer.from(D):D}function y(D,k,M){let R=D;if(D&&!M&&typeof D=="object"){if(Me.endsWith(k,"{}"))k=n?k:k.slice(0,-2),D=JSON.stringify(D);else if(Me.isArray(D)&&tF(D)||(Me.isFileList(D)||Me.endsWith(k,"[]"))&&(R=Me.toArray(D)))return k=N_(k),R.forEach(function(I,G){!(Me.isUndefined(I)||I===null)&&t.append(d===!0?tA([k],G,o):d===null?k:k+"[]",x(I))}),!1}return wv(D)?!0:(t.append(tA(M,k,o),x(D)),!1)}const w=[],C=Object.assign(rF,{defaultVisitor:y,convertValue:x,isVisitable:wv});function _(D,k){if(!Me.isUndefined(D)){if(w.indexOf(D)!==-1)throw Error("Circular reference detected in "+k.join("."));w.push(D),Me.forEach(D,function(R,F){(!(Me.isUndefined(R)||R===null)&&i.call(t,R,Me.isString(F)?F.trim():F,k,C))===!0&&_(R,k?k.concat(F):[F])}),w.pop()}}if(!Me.isObject(e))throw new TypeError("data must be an object");return _(e),t}function rA(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function c2(e,t){this._pairs=[],e&&xp(e,this,t)}const S_=c2.prototype;S_.append=function(t,r){this._pairs.push([t,r])};S_.toString=function(t){const r=t?function(n){return t.call(this,n,rA)}:rA;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function nF(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function C_(e,t,r){if(!t)return e;const n=r&&r.encode||nF;Me.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let o;if(i?o=i(t,r):o=Me.isURLSearchParams(t)?t.toString():new c2(t,r).toString(n),o){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class nA{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Me.forEach(this.handlers,function(n){n!==null&&t(n)})}}const A_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},aF=typeof URLSearchParams<"u"?URLSearchParams:c2,sF=typeof FormData<"u"?FormData:null,iF=typeof Blob<"u"?Blob:null,lF={isBrowser:!0,classes:{URLSearchParams:aF,FormData:sF,Blob:iF},protocols:["http","https","file","blob","url","data"]},u2=typeof window<"u"&&typeof document<"u",Nv=typeof navigator=="object"&&navigator||void 0,oF=u2&&(!Nv||["ReactNative","NativeScript","NS"].indexOf(Nv.product)<0),cF=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",uF=u2&&window.location.href||"http://localhost",dF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:u2,hasStandardBrowserEnv:oF,hasStandardBrowserWebWorkerEnv:cF,navigator:Nv,origin:uF},Symbol.toStringTag,{value:"Module"})),na={...dF,...lF};function fF(e,t){return xp(e,new na.classes.URLSearchParams,{visitor:function(r,n,i,o){return na.isNode&&Me.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function mF(e){return Me.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function hF(e){const t={},r=Object.keys(e);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],t[o]=e[o];return t}function T_(e){function t(r,n,i,o){let d=r[o++];if(d==="__proto__")return!0;const g=Number.isFinite(+d),h=o>=r.length;return d=!d&&Me.isArray(i)?i.length:d,h?(Me.hasOwnProp(i,d)?i[d]=[i[d],n]:i[d]=n,!g):((!i[d]||!Me.isObject(i[d]))&&(i[d]=[]),t(r,n,i[d],o)&&Me.isArray(i[d])&&(i[d]=hF(i[d])),!g)}if(Me.isFormData(e)&&Me.isFunction(e.entries)){const r={};return Me.forEachEntry(e,(n,i)=>{t(mF(n),i,r,0)}),r}return null}function gF(e,t,r){if(Me.isString(e))try{return(t||JSON.parse)(e),Me.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const dm={transitional:A_,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,o=Me.isObject(t);if(o&&Me.isHTMLForm(t)&&(t=new FormData(t)),Me.isFormData(t))return i?JSON.stringify(T_(t)):t;if(Me.isArrayBuffer(t)||Me.isBuffer(t)||Me.isStream(t)||Me.isFile(t)||Me.isBlob(t)||Me.isReadableStream(t))return t;if(Me.isArrayBufferView(t))return t.buffer;if(Me.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let g;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return fF(t,this.formSerializer).toString();if((g=Me.isFileList(t))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return xp(g?{"files[]":t}:t,h&&new h,this.formSerializer)}}return o||i?(r.setContentType("application/json",!1),gF(t)):t}],transformResponse:[function(t){const r=this.transitional||dm.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(Me.isResponse(t)||Me.isReadableStream(t))return t;if(t&&Me.isString(t)&&(n&&!this.responseType||i)){const d=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(g){if(d)throw g.name==="SyntaxError"?Mt.from(g,Mt.ERR_BAD_RESPONSE,this,null,this.response):g}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:na.classes.FormData,Blob:na.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Me.forEach(["delete","get","head","post","put","patch"],e=>{dm.headers[e]={}});const pF=Me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),yF=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(d){i=d.indexOf(":"),r=d.substring(0,i).trim().toLowerCase(),n=d.substring(i+1).trim(),!(!r||t[r]&&pF[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},aA=Symbol("internals");function cf(e){return e&&String(e).trim().toLowerCase()}function Vh(e){return e===!1||e==null?e:Me.isArray(e)?e.map(Vh):String(e)}function xF(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const bF=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function hx(e,t,r,n,i){if(Me.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!Me.isString(t)){if(Me.isString(n))return t.indexOf(n)!==-1;if(Me.isRegExp(n))return n.test(t)}}function vF(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function EF(e,t){const r=Me.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,o,d){return this[n].call(this,t,i,o,d)},configurable:!0})})}let Ra=class{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function o(g,h,x){const y=cf(h);if(!y)throw new Error("header name must be a non-empty string");const w=Me.findKey(i,y);(!w||i[w]===void 0||x===!0||x===void 0&&i[w]!==!1)&&(i[w||h]=Vh(g))}const d=(g,h)=>Me.forEach(g,(x,y)=>o(x,y,h));if(Me.isPlainObject(t)||t instanceof this.constructor)d(t,r);else if(Me.isString(t)&&(t=t.trim())&&!bF(t))d(yF(t),r);else if(Me.isObject(t)&&Me.isIterable(t)){let g={},h,x;for(const y of t){if(!Me.isArray(y))throw TypeError("Object iterator must return a key-value pair");g[x=y[0]]=(h=g[x])?Me.isArray(h)?[...h,y[1]]:[h,y[1]]:y[1]}d(g,r)}else t!=null&&o(r,t,n);return this}get(t,r){if(t=cf(t),t){const n=Me.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return xF(i);if(Me.isFunction(r))return r.call(this,i,n);if(Me.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=cf(t),t){const n=Me.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||hx(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function o(d){if(d=cf(d),d){const g=Me.findKey(n,d);g&&(!r||hx(n,n[g],g,r))&&(delete n[g],i=!0)}}return Me.isArray(t)?t.forEach(o):o(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const o=r[n];(!t||hx(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const r=this,n={};return Me.forEach(this,(i,o)=>{const d=Me.findKey(n,o);if(d){r[d]=Vh(i),delete r[o];return}const g=t?vF(o):String(o).trim();g!==o&&delete r[o],r[g]=Vh(i),n[g]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Me.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&Me.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[aA]=this[aA]={accessors:{}}).accessors,i=this.prototype;function o(d){const g=cf(d);n[g]||(EF(i,d),n[g]=!0)}return Me.isArray(t)?t.forEach(o):o(t),this}};Ra.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Me.reduceDescriptors(Ra.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Me.freezeMethods(Ra);function gx(e,t){const r=this||dm,n=t||r,i=Ra.from(n.headers);let o=n.data;return Me.forEach(e,function(g){o=g.call(r,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function O_(e){return!!(e&&e.__CANCEL__)}function id(e,t,r){Mt.call(this,e??"canceled",Mt.ERR_CANCELED,t,r),this.name="CanceledError"}Me.inherits(id,Mt,{__CANCEL__:!0});function __(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Mt("Request failed with status code "+r.status,[Mt.ERR_BAD_REQUEST,Mt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function wF(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function NF(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,o=0,d;return t=t!==void 0?t:1e3,function(h){const x=Date.now(),y=n[o];d||(d=x),r[i]=h,n[i]=x;let w=o,C=0;for(;w!==i;)C+=r[w++],w=w%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),x-d<t)return;const _=y&&x-y;return _?Math.round(C*1e3/_):void 0}}function SF(e,t){let r=0,n=1e3/t,i,o;const d=(x,y=Date.now())=>{r=y,i=null,o&&(clearTimeout(o),o=null),e(...x)};return[(...x)=>{const y=Date.now(),w=y-r;w>=n?d(x,y):(i=x,o||(o=setTimeout(()=>{o=null,d(i)},n-w)))},()=>i&&d(i)]}const ag=(e,t,r=3)=>{let n=0;const i=NF(50,250);return SF(o=>{const d=o.loaded,g=o.lengthComputable?o.total:void 0,h=d-n,x=i(h),y=d<=g;n=d;const w={loaded:d,total:g,progress:g?d/g:void 0,bytes:h,rate:x||void 0,estimated:x&&g&&y?(g-d)/x:void 0,event:o,lengthComputable:g!=null,[t?"download":"upload"]:!0};e(w)},r)},sA=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},iA=e=>(...t)=>Me.asap(()=>e(...t)),CF=na.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,na.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(na.origin),na.navigator&&/(msie|trident)/i.test(na.navigator.userAgent)):()=>!0,AF=na.hasStandardBrowserEnv?{write(e,t,r,n,i,o,d){if(typeof document>"u")return;const g=[`${e}=${encodeURIComponent(t)}`];Me.isNumber(r)&&g.push(`expires=${new Date(r).toUTCString()}`),Me.isString(n)&&g.push(`path=${n}`),Me.isString(i)&&g.push(`domain=${i}`),o===!0&&g.push("secure"),Me.isString(d)&&g.push(`SameSite=${d}`),document.cookie=g.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function TF(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function OF(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function D_(e,t,r){let n=!TF(t);return e&&(n||r==!1)?OF(e,t):t}const lA=e=>e instanceof Ra?{...e}:e;function Ac(e,t){t=t||{};const r={};function n(x,y,w,C){return Me.isPlainObject(x)&&Me.isPlainObject(y)?Me.merge.call({caseless:C},x,y):Me.isPlainObject(y)?Me.merge({},y):Me.isArray(y)?y.slice():y}function i(x,y,w,C){if(Me.isUndefined(y)){if(!Me.isUndefined(x))return n(void 0,x,w,C)}else return n(x,y,w,C)}function o(x,y){if(!Me.isUndefined(y))return n(void 0,y)}function d(x,y){if(Me.isUndefined(y)){if(!Me.isUndefined(x))return n(void 0,x)}else return n(void 0,y)}function g(x,y,w){if(w in t)return n(x,y);if(w in e)return n(void 0,x)}const h={url:o,method:o,data:o,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:g,headers:(x,y,w)=>i(lA(x),lA(y),w,!0)};return Me.forEach(Object.keys({...e,...t}),function(y){const w=h[y]||i,C=w(e[y],t[y],y);Me.isUndefined(C)&&w!==g||(r[y]=C)}),r}const k_=e=>{const t=Ac({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:o,headers:d,auth:g}=t;if(t.headers=d=Ra.from(d),t.url=C_(D_(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),g&&d.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),Me.isFormData(r)){if(na.hasStandardBrowserEnv||na.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(Me.isFunction(r.getHeaders)){const h=r.getHeaders(),x=["content-type","content-length"];Object.entries(h).forEach(([y,w])=>{x.includes(y.toLowerCase())&&d.set(y,w)})}}if(na.hasStandardBrowserEnv&&(n&&Me.isFunction(n)&&(n=n(t)),n||n!==!1&&CF(t.url))){const h=i&&o&&AF.read(o);h&&d.set(i,h)}return t},_F=typeof XMLHttpRequest<"u",DF=_F&&function(e){return new Promise(function(r,n){const i=k_(e);let o=i.data;const d=Ra.from(i.headers).normalize();let{responseType:g,onUploadProgress:h,onDownloadProgress:x}=i,y,w,C,_,D;function k(){_&&_(),D&&D(),i.cancelToken&&i.cancelToken.unsubscribe(y),i.signal&&i.signal.removeEventListener("abort",y)}let M=new XMLHttpRequest;M.open(i.method.toUpperCase(),i.url,!0),M.timeout=i.timeout;function R(){if(!M)return;const I=Ra.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),U={data:!g||g==="text"||g==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:I,config:e,request:M};__(function(L){r(L),k()},function(L){n(L),k()},U),M=null}"onloadend"in M?M.onloadend=R:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(R)},M.onabort=function(){M&&(n(new Mt("Request aborted",Mt.ECONNABORTED,e,M)),M=null)},M.onerror=function(G){const U=G&&G.message?G.message:"Network Error",z=new Mt(U,Mt.ERR_NETWORK,e,M);z.event=G||null,n(z),M=null},M.ontimeout=function(){let G=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const U=i.transitional||A_;i.timeoutErrorMessage&&(G=i.timeoutErrorMessage),n(new Mt(G,U.clarifyTimeoutError?Mt.ETIMEDOUT:Mt.ECONNABORTED,e,M)),M=null},o===void 0&&d.setContentType(null),"setRequestHeader"in M&&Me.forEach(d.toJSON(),function(G,U){M.setRequestHeader(U,G)}),Me.isUndefined(i.withCredentials)||(M.withCredentials=!!i.withCredentials),g&&g!=="json"&&(M.responseType=i.responseType),x&&([C,D]=ag(x,!0),M.addEventListener("progress",C)),h&&M.upload&&([w,_]=ag(h),M.upload.addEventListener("progress",w),M.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(y=I=>{M&&(n(!I||I.type?new id(null,e,M):I),M.abort(),M=null)},i.cancelToken&&i.cancelToken.subscribe(y),i.signal&&(i.signal.aborted?y():i.signal.addEventListener("abort",y)));const F=wF(i.url);if(F&&na.protocols.indexOf(F)===-1){n(new Mt("Unsupported protocol "+F+":",Mt.ERR_BAD_REQUEST,e));return}M.send(o||null)})},kF=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,i;const o=function(x){if(!i){i=!0,g();const y=x instanceof Error?x:this.reason;n.abort(y instanceof Mt?y:new id(y instanceof Error?y.message:y))}};let d=t&&setTimeout(()=>{d=null,o(new Mt(`timeout ${t} of ms exceeded`,Mt.ETIMEDOUT))},t);const g=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(x=>{x.unsubscribe?x.unsubscribe(o):x.removeEventListener("abort",o)}),e=null)};e.forEach(x=>x.addEventListener("abort",o));const{signal:h}=n;return h.unsubscribe=()=>Me.asap(g),h}},MF=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},PF=async function*(e,t){for await(const r of RF(e))yield*MF(r,t)},RF=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},oA=(e,t,r,n)=>{const i=PF(e,t);let o=0,d,g=h=>{d||(d=!0,n&&n(h))};return new ReadableStream({async pull(h){try{const{done:x,value:y}=await i.next();if(x){g(),h.close();return}let w=y.byteLength;if(r){let C=o+=w;r(C)}h.enqueue(new Uint8Array(y))}catch(x){throw g(x),x}},cancel(h){return g(h),i.return()}},{highWaterMark:2})},cA=64*1024,{isFunction:nh}=Me,IF=(({Request:e,Response:t})=>({Request:e,Response:t}))(Me.global),{ReadableStream:uA,TextEncoder:dA}=Me.global,fA=(e,...t)=>{try{return!!e(...t)}catch{return!1}},LF=e=>{e=Me.merge.call({skipUndefined:!0},IF,e);const{fetch:t,Request:r,Response:n}=e,i=t?nh(t):typeof fetch=="function",o=nh(r),d=nh(n);if(!i)return!1;const g=i&&nh(uA),h=i&&(typeof dA=="function"?(D=>k=>D.encode(k))(new dA):async D=>new Uint8Array(await new r(D).arrayBuffer())),x=o&&g&&fA(()=>{let D=!1;const k=new r(na.origin,{body:new uA,method:"POST",get duplex(){return D=!0,"half"}}).headers.has("Content-Type");return D&&!k}),y=d&&g&&fA(()=>Me.isReadableStream(new n("").body)),w={stream:y&&(D=>D.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(D=>{!w[D]&&(w[D]=(k,M)=>{let R=k&&k[D];if(R)return R.call(k);throw new Mt(`Response type '${D}' is not supported`,Mt.ERR_NOT_SUPPORT,M)})});const C=async D=>{if(D==null)return 0;if(Me.isBlob(D))return D.size;if(Me.isSpecCompliantForm(D))return(await new r(na.origin,{method:"POST",body:D}).arrayBuffer()).byteLength;if(Me.isArrayBufferView(D)||Me.isArrayBuffer(D))return D.byteLength;if(Me.isURLSearchParams(D)&&(D=D+""),Me.isString(D))return(await h(D)).byteLength},_=async(D,k)=>{const M=Me.toFiniteNumber(D.getContentLength());return M??C(k)};return async D=>{let{url:k,method:M,data:R,signal:F,cancelToken:I,timeout:G,onDownloadProgress:U,onUploadProgress:z,responseType:L,headers:H,withCredentials:V="same-origin",fetchOptions:Q}=k_(D),Y=t||fetch;L=L?(L+"").toLowerCase():"text";let X=kF([F,I&&I.toAbortSignal()],G),he=null;const xe=X&&X.unsubscribe&&(()=>{X.unsubscribe()});let ae;try{if(z&&x&&M!=="get"&&M!=="head"&&(ae=await _(H,R))!==0){let K=new r(k,{method:"POST",body:R,duplex:"half"}),ee;if(Me.isFormData(R)&&(ee=K.headers.get("content-type"))&&H.setContentType(ee),K.body){const[fe,ce]=sA(ae,ag(iA(z)));R=oA(K.body,cA,fe,ce)}}Me.isString(V)||(V=V?"include":"omit");const ne=o&&"credentials"in r.prototype,se={...Q,signal:X,method:M.toUpperCase(),headers:H.normalize().toJSON(),body:R,duplex:"half",credentials:ne?V:void 0};he=o&&new r(k,se);let Te=await(o?Y(he,Q):Y(k,se));const we=y&&(L==="stream"||L==="response");if(y&&(U||we&&xe)){const K={};["status","statusText","headers"].forEach(Se=>{K[Se]=Te[Se]});const ee=Me.toFiniteNumber(Te.headers.get("content-length")),[fe,ce]=U&&sA(ee,ag(iA(U),!0))||[];Te=new n(oA(Te.body,cA,fe,()=>{ce&&ce(),xe&&xe()}),K)}L=L||"text";let te=await w[Me.findKey(w,L)||"text"](Te,D);return!we&&xe&&xe(),await new Promise((K,ee)=>{__(K,ee,{data:te,headers:Ra.from(Te.headers),status:Te.status,statusText:Te.statusText,config:D,request:he})})}catch(ne){throw xe&&xe(),ne&&ne.name==="TypeError"&&/Load failed|fetch/i.test(ne.message)?Object.assign(new Mt("Network Error",Mt.ERR_NETWORK,D,he),{cause:ne.cause||ne}):Mt.from(ne,ne&&ne.code,D,he)}}},BF=new Map,M_=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:i}=t,o=[n,i,r];let d=o.length,g=d,h,x,y=BF;for(;g--;)h=o[g],x=y.get(h),x===void 0&&y.set(h,x=g?new Map:LF(t)),y=x;return x};M_();const d2={http:eF,xhr:DF,fetch:{get:M_}};Me.forEach(d2,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const mA=e=>`- ${e}`,FF=e=>Me.isFunction(e)||e===null||e===!1;function UF(e,t){e=Me.isArray(e)?e:[e];const{length:r}=e;let n,i;const o={};for(let d=0;d<r;d++){n=e[d];let g;if(i=n,!FF(n)&&(i=d2[(g=String(n)).toLowerCase()],i===void 0))throw new Mt(`Unknown adapter '${g}'`);if(i&&(Me.isFunction(i)||(i=i.get(t))))break;o[g||"#"+d]=i}if(!i){const d=Object.entries(o).map(([h,x])=>`adapter ${h} `+(x===!1?"is not supported by the environment":"is not available in the build"));let g=r?d.length>1?`since :
`+d.map(mA).join(`
`):" "+mA(d[0]):"as no adapter specified";throw new Mt("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return i}const P_={getAdapter:UF,adapters:d2};function px(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new id(null,e)}function hA(e){return px(e),e.headers=Ra.from(e.headers),e.data=gx.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),P_.getAdapter(e.adapter||dm.adapter,e)(e).then(function(n){return px(e),n.data=gx.call(e,e.transformResponse,n),n.headers=Ra.from(n.headers),n},function(n){return O_(n)||(px(e),n&&n.response&&(n.response.data=gx.call(e,e.transformResponse,n.response),n.response.headers=Ra.from(n.response.headers))),Promise.reject(n)})}const R_="1.13.2",bp={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{bp[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const gA={};bp.transitional=function(t,r,n){function i(o,d){return"[Axios v"+R_+"] Transitional option '"+o+"'"+d+(n?". "+n:"")}return(o,d,g)=>{if(t===!1)throw new Mt(i(d," has been removed"+(r?" in "+r:"")),Mt.ERR_DEPRECATED);return r&&!gA[d]&&(gA[d]=!0,console.warn(i(d," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,d,g):!0}};bp.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function jF(e,t,r){if(typeof e!="object")throw new Mt("options must be an object",Mt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const o=n[i],d=t[o];if(d){const g=e[o],h=g===void 0||d(g,o,e);if(h!==!0)throw new Mt("option "+o+" must be "+h,Mt.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Mt("Unknown option "+o,Mt.ERR_BAD_OPTION)}}const Hh={assertOptions:jF,validators:bp},yi=Hh.validators;let xc=class{constructor(t){this.defaults=t||{},this.interceptors={request:new nA,response:new nA}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Ac(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:o}=r;n!==void 0&&Hh.assertOptions(n,{silentJSONParsing:yi.transitional(yi.boolean),forcedJSONParsing:yi.transitional(yi.boolean),clarifyTimeoutError:yi.transitional(yi.boolean)},!1),i!=null&&(Me.isFunction(i)?r.paramsSerializer={serialize:i}:Hh.assertOptions(i,{encode:yi.function,serialize:yi.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Hh.assertOptions(r,{baseUrl:yi.spelling("baseURL"),withXsrfToken:yi.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let d=o&&Me.merge(o.common,o[r.method]);o&&Me.forEach(["delete","get","head","post","put","patch","common"],D=>{delete o[D]}),r.headers=Ra.concat(d,o);const g=[];let h=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(r)===!1||(h=h&&k.synchronous,g.unshift(k.fulfilled,k.rejected))});const x=[];this.interceptors.response.forEach(function(k){x.push(k.fulfilled,k.rejected)});let y,w=0,C;if(!h){const D=[hA.bind(this),void 0];for(D.unshift(...g),D.push(...x),C=D.length,y=Promise.resolve(r);w<C;)y=y.then(D[w++],D[w++]);return y}C=g.length;let _=r;for(;w<C;){const D=g[w++],k=g[w++];try{_=D(_)}catch(M){k.call(this,M);break}}try{y=hA.call(this,_)}catch(D){return Promise.reject(D)}for(w=0,C=x.length;w<C;)y=y.then(x[w++],x[w++]);return y}getUri(t){t=Ac(this.defaults,t);const r=D_(t.baseURL,t.url,t.allowAbsoluteUrls);return C_(r,t.params,t.paramsSerializer)}};Me.forEach(["delete","get","head","options"],function(t){xc.prototype[t]=function(r,n){return this.request(Ac(n||{},{method:t,url:r,data:(n||{}).data}))}});Me.forEach(["post","put","patch"],function(t){function r(n){return function(o,d,g){return this.request(Ac(g||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:d}))}}xc.prototype[t]=r(),xc.prototype[t+"Form"]=r(!0)});let zF=class I_{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o;const d=new Promise(g=>{n.subscribe(g),o=g}).then(i);return d.cancel=function(){n.unsubscribe(o)},d},t(function(o,d,g){n.reason||(n.reason=new id(o,d,g),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new I_(function(i){t=i}),cancel:t}}};function VF(e){return function(r){return e.apply(null,r)}}function HF(e){return Me.isObject(e)&&e.isAxiosError===!0}const Sv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Sv).forEach(([e,t])=>{Sv[t]=e});function L_(e){const t=new xc(e),r=m_(xc.prototype.request,t);return Me.extend(r,xc.prototype,t,{allOwnKeys:!0}),Me.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return L_(Ac(e,i))},r}const nn=L_(dm);nn.Axios=xc;nn.CanceledError=id;nn.CancelToken=zF;nn.isCancel=O_;nn.VERSION=R_;nn.toFormData=xp;nn.AxiosError=Mt;nn.Cancel=nn.CanceledError;nn.all=function(t){return Promise.all(t)};nn.spread=VF;nn.isAxiosError=HF;nn.mergeConfig=Ac;nn.AxiosHeaders=Ra;nn.formToJSON=e=>T_(Me.isHTMLForm(e)?new FormData(e):e);nn.getAdapter=P_.getAdapter;nn.HttpStatusCode=Sv;nn.default=nn;const{Axios:kde,AxiosError:Mde,CanceledError:Pde,isCancel:Rde,CancelToken:Ide,VERSION:Lde,all:Bde,Cancel:Fde,isAxiosError:Ude,spread:jde,toFormData:zde,AxiosHeaders:Vde,HttpStatusCode:Hde,formToJSON:qde,getAdapter:$de,mergeConfig:Gde}=nn,ra={ACCESS_TOKEN:"accessToken",REFRESH_TOKEN:"refreshToken",ADMIN_DATA:"adminData",REMEMBER_ME:"rememberMe"},_f=()=>localStorage.getItem(ra.REMEMBER_ME)==="true"?localStorage:sessionStorage,Xs={getAccessToken:()=>{const e=_f().getItem(ra.ACCESS_TOKEN);return console.log("[Storage] Getting access token:",e?"exists":"null"),e},getRefreshToken:()=>{const e=_f().getItem(ra.REFRESH_TOKEN);return console.log("[Storage] Getting refresh token:",e?"exists":"null"),e},setTokens:({accessToken:e,refreshToken:t},r=!1)=>{console.log("[Storage] Setting tokens, rememberMe:",r),localStorage.setItem(ra.REMEMBER_ME,String(r));const n=r?localStorage:sessionStorage;e&&n.setItem(ra.ACCESS_TOKEN,e),t&&n.setItem(ra.REFRESH_TOKEN,t)},setAccessToken:e=>{console.log("[Storage] Updating access token"),_f().setItem(ra.ACCESS_TOKEN,e)},clearTokens:()=>{console.log("[Storage] Clearing all tokens"),localStorage.removeItem(ra.ACCESS_TOKEN),localStorage.removeItem(ra.REFRESH_TOKEN),localStorage.removeItem(ra.REMEMBER_ME),sessionStorage.removeItem(ra.ACCESS_TOKEN),sessionStorage.removeItem(ra.REFRESH_TOKEN)},hasTokens:()=>!!Xs.getAccessToken()&&!!Xs.getRefreshToken()},xo={getAdmin:()=>{try{const e=_f().getItem(ra.ADMIN_DATA),t=e?JSON.parse(e):null;return console.log("[Storage] Getting admin data:",t?t.email:"null"),t}catch(e){return console.error("[Storage] Error parsing admin data:",e),null}},setAdmin:e=>{console.log("[Storage] Setting admin data:",e?.email),_f().setItem(ra.ADMIN_DATA,JSON.stringify(e))},clearAdmin:()=>{console.log("[Storage] Clearing admin data"),localStorage.removeItem(ra.ADMIN_DATA),sessionStorage.removeItem(ra.ADMIN_DATA)}},Cv=()=>{console.log("[Storage] Clearing all auth data"),Xs.clearTokens(),xo.clearAdmin()},f2="http://192.168.29.105:5000/api";console.log("[API] Initializing with base URL:",f2);const al=nn.create({baseURL:f2,timeout:3e4,headers:{"Content-Type":"application/json"}});let ah=!1,qh=[];const pA=(e,t=null)=>{console.log("[API] Processing queued requests:",qh.length),qh.forEach(r=>{e?r.reject(e):r.resolve(t)}),qh=[]},sg=e=>{if(!e||typeof e!="object")return e;if(Array.isArray(e))return e.map(sg);const t=["password","currentPassword","newPassword","refreshToken","accessToken"],r={...e};return Object.keys(r).forEach(n=>{t.includes(n)?r[n]="***MASKED***":typeof r[n]=="object"&&r[n]!==null&&(r[n]=sg(r[n]))}),r};al.interceptors.request.use(e=>{const t=Xs.getAccessToken();return t&&(e.headers.Authorization=`Bearer ${t}`),console.log(`[API] Request: ${e.method?.toUpperCase()} ${e.url}`,{hasAuth:!!t,body:e.data?sg(e.data):null,params:e.params||null}),e},e=>(console.error("[API] Request error:",e.message),Promise.reject(e)));al.interceptors.response.use(e=>(console.log(`[API] Response: ${e.status} ${e.config.url}`,{message:e.data?.message,data:e.data?.data?sg(e.data.data):null}),e),async e=>{const t=e.config;if(console.error("[API] Response error:",{status:e.response?.status,url:t?.url,message:e.response?.data?.message||e.message}),e.response?.status===401&&!t._retry&&!t.url?.includes("/auth/refresh-token")&&!t.url?.includes("/auth/login")){if(console.log("[API] Token expired, attempting refresh..."),ah)return console.log("[API] Refresh in progress, queueing request"),new Promise((n,i)=>{qh.push({resolve:n,reject:i})}).then(n=>(t.headers.Authorization=`Bearer ${n}`,al(t))).catch(n=>Promise.reject(n));t._retry=!0,ah=!0;const r=Xs.getRefreshToken();if(!r)return console.log("[API] No refresh token available, clearing auth"),ah=!1,Cv(),window.location.href="/login",Promise.reject(e);try{console.log("[API] Refreshing access token...");const n=await nn.post(`${f2}/web/auth/refresh-token`,{refreshToken:r}),{accessToken:i}=n.data.data;return console.log("[API] Token refresh successful"),Xs.setAccessToken(i),pA(null,i),t.headers.Authorization=`Bearer ${i}`,al(t)}catch(n){return console.error("[API] Token refresh failed:",n.response?.data?.message),pA(n,null),Cv(),window.location.href="/login",Promise.reject(n)}finally{ah=!1}}return Promise.reject(e)});const Xe=async e=>{try{const t=await e;return{success:!0,data:t.data.data,message:t.data.message,error:null,status:t.data.status||t.status}}catch(t){const r={success:!1,data:null,message:t.response?.data?.message||"An unexpected error occurred",error:t.response?.data?.error||t.message,status:t.response?.status||500};return console.error("[API] Handled error:",r),r}},Ye={get:(e,t={})=>al.get(e,t),post:(e,t={},r={})=>al.post(e,t,r),put:(e,t={},r={})=>al.put(e,t,r),delete:(e,t={})=>al.delete(e,t),patch:(e,t={},r={})=>al.patch(e,t,r)},sc={LOGIN:"/web/auth/login",REGISTER:"/web/auth/register",LOGOUT:"/web/auth/logout",REFRESH_TOKEN:"/web/auth/refresh-token",PROFILE:"/web/auth/profile",CHANGE_PASSWORD:"/web/auth/change-password"},co={login:async(e,t=!1)=>{console.log("[Auth] Attempting login for:",e.username);const r=await Xe(Ye.post(sc.LOGIN,{username:e.username,password:e.password}));if(r.success&&r.data){const{admin:n,tokens:i}=r.data;Xs.setTokens({accessToken:i.accessToken,refreshToken:i.refreshToken},t),xo.setAdmin(n),console.log("[Auth] Login successful for:",n.username),console.log("[Auth] Admin role:",n.role)}else console.error("[Auth] Login failed:",r.message);return r},register:async(e,t=!1)=>{console.log("[Auth] Attempting registration for:",e.username);const r=await Xe(Ye.post(sc.REGISTER,e));if(r.success&&r.data){const{admin:n,tokens:i}=r.data;Xs.setTokens({accessToken:i.accessToken,refreshToken:i.refreshToken},t),xo.setAdmin(n),console.log("[Auth] Registration successful for:",n.username)}else console.error("[Auth] Registration failed:",r.message);return r},logout:async()=>{console.log("[Auth] Attempting logout");try{await Xe(Ye.post(sc.LOGOUT)),console.log("[Auth] Server logout successful")}catch(e){console.warn("[Auth] Server logout failed, clearing local data anyway:",e.message)}return Cv(),console.log("[Auth] Local auth data cleared"),{success:!0,message:"Logged out successfully"}},getProfile:async()=>{console.log("[Auth] Fetching profile");const e=await Xe(Ye.get(sc.PROFILE));return e.success&&e.data&&(xo.setAdmin(e.data.admin),console.log("[Auth] Profile fetched for:",e.data.admin.username)),e},updateProfile:async e=>{console.log("[Auth] Updating profile");const t=await Xe(Ye.put(sc.PROFILE,e));return t.success&&t.data&&(xo.setAdmin(t.data.admin),console.log("[Auth] Profile updated successfully")),t},changePassword:async e=>{console.log("[Auth] Changing password");const t=await Xe(Ye.put(sc.CHANGE_PASSWORD,e));return t.success?console.log("[Auth] Password changed successfully"):console.error("[Auth] Password change failed:",t.message),t},refreshToken:async()=>{const e=Xs.getRefreshToken();if(!e)return console.log("[Auth] No refresh token available"),{success:!1,accessToken:null,error:"No refresh token"};console.log("[Auth] Refreshing access token");const t=await Xe(Ye.post(sc.REFRESH_TOKEN,{refreshToken:e}));return t.success&&t.data?(Xs.setAccessToken(t.data.accessToken),console.log("[Auth] Token refreshed successfully"),{success:!0,accessToken:t.data.accessToken,error:null}):(console.error("[Auth] Token refresh failed:",t.message),{success:!1,accessToken:null,error:t.message})},isAuthenticated:()=>{const e=Xs.hasTokens();return console.log("[Auth] Checking authentication:",e),e},getStoredAdmin:()=>xo.getAdmin(),hasRole:e=>{const t=xo.getAdmin();return t?(Array.isArray(e)?e:[e]).includes(t.role):!1},hasAccess:e=>{const t=xo.getAdmin();return t&&t.access?.includes(e)||!1}},B_=N.createContext(null),qF=({children:e})=>{const[t,r]=N.useState(null),[n,i]=N.useState(!1),[o,d]=N.useState(!0),[g,h]=N.useState(null);N.useEffect(()=>{(async()=>{console.log("[AuthContext] Initializing auth state...");try{if(co.isAuthenticated()){console.log("[AuthContext] Found stored tokens, fetching profile...");const G=await co.getProfile();G.success?(r(G.data.admin),i(!0),console.log("[AuthContext] Auth initialized successfully")):(console.log("[AuthContext] Profile fetch failed, token may be expired"),i(!1),r(null))}else console.log("[AuthContext] No stored tokens found"),i(!1),r(null)}catch(G){console.error("[AuthContext] Error initializing auth:",G),i(!1),r(null)}finally{d(!1)}})()},[]);const x=N.useCallback(async(I,G=!1)=>{console.log("[AuthContext] Login attempt"),h(null),d(!0);try{const U=await co.login(I,G);return U.success?(r(U.data.admin),i(!0),console.log("[AuthContext] Login successful"),{success:!0,data:U.data}):(h(U.message),console.error("[AuthContext] Login failed:",U.message),{success:!1,error:U.message})}catch(U){const z="An unexpected error occurred during login";return h(z),console.error("[AuthContext] Login error:",U),{success:!1,error:z}}finally{d(!1)}},[]),y=N.useCallback(async(I,G=!1)=>{console.log("[AuthContext] Register attempt"),h(null),d(!0);try{const U=await co.register(I,G);return U.success?(r(U.data.admin),i(!0),console.log("[AuthContext] Registration successful"),{success:!0,data:U.data}):(h(U.message),console.error("[AuthContext] Registration failed:",U.message),{success:!1,error:U.message})}catch(U){const z="An unexpected error occurred during registration";return h(z),console.error("[AuthContext] Registration error:",U),{success:!1,error:z}}finally{d(!1)}},[]),w=N.useCallback(async()=>{console.log("[AuthContext] Logout attempt"),d(!0);try{return await co.logout(),r(null),i(!1),h(null),console.log("[AuthContext] Logout successful"),{success:!0}}catch(I){return console.error("[AuthContext] Logout error:",I),r(null),i(!1),{success:!0}}finally{d(!1)}},[]),C=N.useCallback(async()=>{console.log("[AuthContext] Refreshing profile");try{const I=await co.getProfile();return I.success?(r(I.data.admin),console.log("[AuthContext] Profile refreshed"),{success:!0,data:I.data.admin}):(console.error("[AuthContext] Profile refresh failed:",I.message),{success:!1,error:I.message})}catch(I){return console.error("[AuthContext] Profile refresh error:",I),{success:!1,error:"Failed to refresh profile"}}},[]),_=N.useCallback(async I=>{console.log("[AuthContext] Updating profile"),h(null);try{const G=await co.updateProfile(I);return G.success?(r(G.data.admin),console.log("[AuthContext] Profile updated"),{success:!0,data:G.data.admin}):(h(G.message),{success:!1,error:G.message})}catch{const U="Failed to update profile";return h(U),{success:!1,error:U}}},[]),D=N.useCallback(async I=>{console.log("[AuthContext] Changing password"),h(null);try{const G=await co.changePassword(I);return G.success?(console.log("[AuthContext] Password changed"),{success:!0}):(h(G.message),{success:!1,error:G.message})}catch{const U="Failed to change password";return h(U),{success:!1,error:U}}},[]),k=N.useCallback(()=>{h(null)},[]),M=N.useCallback(I=>t?(Array.isArray(I)?I:[I]).includes(t.role):!1,[t]),R=N.useCallback(I=>t&&t.access?.includes(I)||!1,[t]),F={admin:t,isAuthenticated:n,isLoading:o,error:g,login:x,register:y,logout:w,refreshProfile:C,updateProfile:_,changePassword:D,clearError:k,hasRole:M,hasAccess:R};return a.createElement(B_.Provider,{value:F},e)},Mi=()=>{const e=N.useContext(B_);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},F_=()=>a.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-100"},a.createElement("div",{className:"flex flex-col items-center gap-4"},a.createElement("div",{className:"w-12 h-12 border-4 border-gray-800 border-t-transparent rounded-full animate-spin"}),a.createElement("p",{className:"text-gray-600"},"Loading..."))),yA=()=>a.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-100"},a.createElement("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center max-w-md"},a.createElement("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},a.createElement("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}))),a.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Access Denied"),a.createElement("p",{className:"text-gray-600 mb-6"},"You don't have permission to access this page."),a.createElement("a",{href:"/dashboard",className:"inline-block px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Go to Dashboard"))),$F=({children:e,allowedRoles:t=[],requiredAccess:r=[],redirectTo:n="/login"})=>{const{isAuthenticated:i,isLoading:o,admin:d,hasRole:g,hasAccess:h}=Mi(),x=Ps();return console.log("[ProtectedRoute] Checking access:",{isAuthenticated:i,isLoading:o,path:x.pathname,adminRole:d?.role}),o?(console.log("[ProtectedRoute] Loading auth state..."),a.createElement(F_,null)):i?t.length>0&&!g(t)?(console.log("[ProtectedRoute] Access denied - role mismatch:",{required:t,actual:d?.role}),a.createElement(yA,null)):r.length>0&&!r.every(w=>h(w))?(console.log("[ProtectedRoute] Access denied - missing permissions:",{required:r,actual:d?.access}),a.createElement(yA,null)):(console.log("[ProtectedRoute] Access granted"),e):(console.log("[ProtectedRoute] Not authenticated, redirecting to:",n),a.createElement(ng,{to:n,state:{from:x},replace:!0}))},GF=({children:e,redirectTo:t="/dashboard"})=>{const{isAuthenticated:r,isLoading:n}=Mi(),i=Ps();if(console.log("[PublicRoute] Checking:",{isAuthenticated:r,isLoading:n}),n)return a.createElement(F_,null);if(r){const o=i.state?.from?.pathname||t;return console.log("[PublicRoute] Already authenticated, redirecting to:",o),a.createElement(ng,{to:o,replace:!0})}return e};const YF=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XF=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),xA=e=>{const t=XF(e);return t.charAt(0).toUpperCase()+t.slice(1)},U_=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),WF=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var KF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ZF=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:d,...g},h)=>N.createElement("svg",{ref:h,...KF,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:U_("lucide",i),...!o&&!WF(g)&&{"aria-hidden":"true"},...g},[...d.map(([x,y])=>N.createElement(x,y)),...Array.isArray(o)?o:[o]]));const at=(e,t)=>{const r=N.forwardRef(({className:n,...i},o)=>N.createElement(ZF,{ref:o,iconNode:t,className:U_(`lucide-${YF(xA(e))}`,`lucide-${e}`,n),...i}));return r.displayName=xA(e),r};const QF=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],bA=at("award",QF);const JF=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],eU=at("banknote",JF);const tU=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ig=at("bell",tU);const rU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],nU=at("calendar-check",rU);const aU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]],sh=at("calendar-x",aU);const sU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Hr=at("calendar",sU);const iU=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ei=at("chart-column",iU);const lU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Js=at("check",lU);const oU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ai=at("chevron-down",oU);const cU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],j_=at("chevron-right",cU);const uU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],z_=at("chevron-left",uU);const dU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],fU=at("chevron-up",dU);const mU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Vr=at("circle-alert",mU);const hU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Nl=at("circle-check-big",hU);const gU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],V_=at("circle-check",gU);const pU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$h=at("circle-question-mark",pU);const yU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Mc=at("circle-x",yU);const xU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Gh=at("clipboard-list",xU);const bU=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Cn=at("clock",bU);const vU=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],lg=at("copy",vU);const EU=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],wU=at("credit-card",EU);const NU=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],SU=at("dollar-sign",NU);const CU=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],m2=at("external-link",CU);const AU=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],H_=at("eye-off",AU);const TU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rn=at("eye",TU);const OU=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],_U=at("file-play",OU);const DU=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],q_=at("file-text",DU);const kU=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ti=at("funnel",kU);const MU=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],PU=at("gift",MU);const RU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Av=at("globe",RU);const IU=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],vp=at("grip-vertical",IU);const LU=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],h2=at("hash",LU);const BU=[["path",{d:"M15 15.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"nrt1m3"}],["path",{d:"M21 12.17V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6",key:"99hgts"}],["path",{d:"m6 21 5-5",key:"1wyjai"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],FU=at("image-play",BU);const UU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Tc=at("image",UU);const jU=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],zU=at("indian-rupee",jU);const VU=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],HU=at("layout-dashboard",VU);const qU=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],$_=at("layout-grid",qU);const $U=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],GU=at("link",$U);const YU=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],og=at("list-checks",YU);const XU=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],g2=at("list",XU);const WU=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Nt=at("loader-circle",WU);const KU=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ZU=at("lock",KU);const QU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],JU=at("log-out",QU);const ej=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],tj=at("mail",ej);const rj=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],p2=at("map-pin",rj);const nj=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Tv=at("message-circle",nj);const aj=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],G_=at("pen",aj);const sj=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],ij=at("percent",sj);const lj=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],cg=at("phone",lj);const oj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Y_=at("play",oj);const cj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dn=at("plus",cj);const uj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Oi=at("refresh-cw",uj);const dj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ug=at("rotate-ccw",dj);const fj=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],mj=at("scan-line",fj);const hj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],sa=at("search",hj);const gj=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],pj=at("share-2",gj);const yj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xj=at("shield-check",yj);const bj=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],vj=at("sliders-horizontal",bj);const Ej=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],wj=at("square-check-big",Ej);const Nj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],da=at("square-pen",Nj);const Sj=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Lf=at("tag",Sj);const Cj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Vu=at("target",Cj);const Aj=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],Tj=at("text-align-start",Aj);const Oj=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],Ou=at("ticket",Oj);const _j=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],_i=at("toggle-left",_j);const Dj=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],fl=at("toggle-right",Dj);const kj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],gr=at("trash-2",kj);const Mj=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Pj=at("trash",Mj);const Rj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],X_=at("trending-up",Rj);const Ij=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ep=at("triangle-alert",Ij);const Lj=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Bu=at("trophy",Lj);const Bj=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Fj=at("upload",Bj);const Uj=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],jj=at("user-cog",Uj);const zj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],No=at("user",zj);const Vj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],fm=at("users",Vj);const Hj=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],cl=at("video",Hj);const qj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zn=at("x",qj);const $j=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],W_=at("zap",$j),K_="/assets/Motivata-Dba061jL.png",Gj="/assets/logo2-NMKQARNi.png";function Yj({activeMenu:e,collapsed:t,isOpen:r,onClose:n}){const i=mp(),{logout:o,admin:d}=Mi(),g=()=>{o(),i("/login")},h=[{id:"dashboard",label:"Dashboard",icon:HU,path:"/dashboard",color:"blue"},{id:"events",label:"Events",icon:Hr,path:"/events",color:"purple"},{id:"users",label:"Users",icon:jj,path:"/users",color:"green"},{id:"admins",label:"Admins",icon:xj,path:"/admins",color:"orange"},{id:"cashtickets",label:"Cash Tickets",icon:eU,path:"/cash-tickets",color:"cyan"},{id:"vouchers",label:"Vouchers",icon:PU,path:"/vouchers",color:"pink"},{id:"sessions",label:"Sessions",icon:cl,path:"/sessions",color:"indigo"},{id:"quizes",label:"Quizes",icon:Gh,path:"/quizes",color:"amber"},{id:"challenges",label:"Challenges",icon:Bu,path:"/challenges",color:"emerald"},{id:"polls",label:"Polls",icon:Ei,path:"/polls",color:"rose"},{id:"stories",label:"Stories",icon:FU,path:"/stories",color:"sky"},{id:"scan-qr",label:"Scan QR",icon:mj,path:"/scan-qr",color:"teal"},{id:"ticket-reshare",label:"Ticket Reshare",icon:pj,path:"/ticket-reshare",color:"violet"}],x=d?.name||d?.username||"Admin",y=d?.email||"admin@motivata.com",w=d?.role||"Administrator",C=_=>_.split(" ").map(D=>D[0]).join("").toUpperCase().slice(0,2);return a.createElement("aside",{className:`
        ${t?"lg:w-20":"lg:w-72"}
        fixed lg:static inset-y-0 left-0 z-50
        w-72
        ${r?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        bg-gradient-to-b from-white to-gray-50/50
        border-r border-gray-200
        shadow-2xl lg:shadow-none
        flex flex-col
        transition-all duration-300 ease-in-out
        h-screen
        overflow-hidden
      `},a.createElement("div",{className:"p-5 lg:p-6 border-b border-gray-200/80 shrink-0 bg-white/80 backdrop-blur-sm"},a.createElement("div",{className:"flex items-start justify-between"},a.createElement("div",{className:`flex flex-col ${t?"items-center":"items-start"} min-w-0 flex-1`},a.createElement("img",{src:t?Gj:K_,alt:"Motivata",className:`${t?"h-12 w-12":"h-16"} object-contain`}),!t&&a.createElement("p",{className:"text-xs text-gray-500 font-medium -mt-1 ml-4"},"Admin Panel")),a.createElement("button",{onClick:n,className:"lg:hidden p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-all active:scale-95","aria-label":"Close sidebar"},a.createElement(zn,{className:"h-5 w-5"})))),a.createElement("nav",{className:"flex-1 p-3 lg:p-4 overflow-y-auto overflow-x-hidden custom-scrollbar"},a.createElement("ul",{className:"space-y-1"},h.map(_=>{const D=e===_.id;return a.createElement("li",{key:_.id},a.createElement(i2,{to:_.path,className:`
                    w-full flex items-center gap-3 px-3 py-3 rounded-xl
                    transition-all duration-200 group relative
                    ${D?"bg-gradient-to-r from-gray-800 to-gray-900 text-white shadow-lg shadow-gray-500/30":"text-gray-700 hover:bg-gray-100/80 hover:translate-x-1"}
                    ${t?"lg:justify-center lg:px-2":""}
                  `,title:t?_.label:""},a.createElement(_.icon,{className:`
                      h-5 w-5 shrink-0 transition-transform duration-200
                      ${D?"scale-110":"group-hover:scale-110"}
                    `}),!t&&a.createElement("span",{className:"font-semibold text-sm truncate"},_.label)))}))),a.createElement("div",{className:"border-t border-gray-200/80 shrink-0 bg-white/50 backdrop-blur-sm"},a.createElement("div",{className:`p-4 ${t?"lg:p-2":""}`},a.createElement("div",{className:`
              flex items-center gap-3 p-3 rounded-xl
              bg-gradient-to-br from-gray-50 to-gray-100/50
              border border-gray-200/50
              transition-all duration-200 hover:shadow-md
              ${t?"lg:justify-center lg:p-2":""}
            `,title:t?`${x} - ${w}`:""},a.createElement("div",{className:"relative shrink-0"},a.createElement("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-800 via-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-sm shadow-md ring-2 ring-white"},C(x)),a.createElement("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white shadow-sm"})),!t&&a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-sm font-bold text-gray-900 truncate"},x),a.createElement("p",{className:"text-xs text-gray-600 truncate"},y),a.createElement("div",{className:"flex items-center gap-1 mt-1"},a.createElement("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-[10px] font-semibold bg-blue-100 text-gray-900 border border-blue-200"},w))))),a.createElement("div",{className:"p-4 pt-0"},a.createElement("button",{onClick:g,className:`
              w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl
              bg-gradient-to-r from-red-50 to-red-100/50
              text-red-600 font-semibold text-sm
              border border-red-200
              hover:from-red-100 hover:to-red-200/50
              hover:border-red-300 hover:shadow-md
              active:scale-[0.98]
              transition-all duration-200
              group
              ${t?"lg:px-2":""}
            `,title:"Logout"},a.createElement(JU,{className:"h-4 w-4 shrink-0 group-hover:scale-110 transition-transform"}),!t&&a.createElement("span",null,"Logout")))))}function Xj({toggleSidebar:e}){const[t,r]=N.useState(!1),[n,i]=N.useState("");return a.createElement("header",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 px-4 lg:px-6 py-3 lg:py-4 flex items-center justify-between flex-shrink-0 sticky top-0 z-30 shadow-sm"},a.createElement("div",{className:"flex items-center gap-3 lg:gap-4 flex-1"},a.createElement("button",{onClick:e,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all hover:scale-105 active:scale-95 group","aria-label":"Toggle Sidebar"},a.createElement("div",{className:"relative h-6 w-6"},a.createElement("span",{className:"absolute left-0 top-1 w-6 h-0.5 bg-gray-600 rounded transition-all group-hover:w-5"}),a.createElement("span",{className:"absolute left-0 top-3 w-6 h-0.5 bg-gray-600 rounded"}),a.createElement("span",{className:"absolute left-0 top-5 w-6 h-0.5 bg-gray-600 rounded transition-all group-hover:w-4"}))),a.createElement("div",{className:"hidden lg:block"},a.createElement("h1",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Welcome back"),a.createElement("p",{className:"text-xs text-gray-500"},new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})))),a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"relative hidden md:block"},a.createElement(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),a.createElement("input",{type:"text",placeholder:"Search anything...",value:n,onChange:o=>i(o.target.value),className:"pl-10 pr-4 py-2 w-64 lg:w-80 bg-gray-50 border border-gray-200 rounded-lg focus:border-gray-800 outline-none text-sm transition-all placeholder:text-gray-400"}),n&&a.createElement("button",{onClick:()=>i(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-0.5 hover:bg-gray-200 rounded"},a.createElement(zn,{className:"h-3.5 w-3.5 text-gray-400"}))),a.createElement("button",{onClick:()=>r(!t),className:"md:hidden p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all active:scale-95","aria-label":"Search"},a.createElement(sa,{className:"h-5 w-5"})),a.createElement("button",{className:"relative p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all hover:scale-105 active:scale-95 group","aria-label":"Notifications",title:"Notifications"},a.createElement(ig,{className:"h-5 w-5 group-hover:animate-pulse"}),a.createElement("span",{className:"absolute top-1.5 right-1.5 h-2 w-2 bg-red-500 rounded-full ring-2 ring-white"}),a.createElement("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center ring-2 ring-white"},"3"))),t&&a.createElement("div",{className:"md:hidden fixed inset-x-0 top-[57px] bg-white border-b border-gray-200 p-4 shadow-lg z-40 animate-in slide-in-from-top"},a.createElement("div",{className:"relative"},a.createElement(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",placeholder:"Search anything...",autoFocus:!0,value:n,onChange:o=>i(o.target.value),className:"w-full pl-10 pr-10 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:border-gray-800 outline-none text-sm"}),a.createElement("button",{onClick:()=>{r(!1),i("")},className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 rounded"},a.createElement(zn,{className:"h-4 w-4 text-gray-400"})))))}function Wj(){const[e,t]=N.useState(!1),[r,n]=N.useState(!1),i=Ps(),o=()=>{window.innerWidth<1024?n(!r):t(!e)},d=()=>n(!1);N.useEffect(()=>{n(!1)},[i.pathname]),N.useEffect(()=>{const x=()=>{window.innerWidth>=1024&&n(!1)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const g={"/dashboard":"dashboard","/events":"events","/enrollments":"enrollments","/coupons":"coupons","/users":"users","/admins":"admins","/payments":"payments","/cash-tickets":"cashtickets","/vouchers":"vouchers","/sessions":"sessions","/quizes":"quizes","/challenges":"challenges","/polls":"polls"},h=()=>g[i.pathname]||"dashboard";return a.createElement("div",{className:"h-screen bg-gradient-to-br from-gray-50 via-gray-50 to-blue-50/30 flex overflow-hidden"},r&&a.createElement("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden transition-opacity",onClick:d}),a.createElement(Yj,{activeMenu:h(),collapsed:e,isOpen:r,onClose:d}),a.createElement("div",{className:"flex-1 flex flex-col overflow-hidden"},a.createElement(Xj,{toggleSidebar:o}),a.createElement("main",{className:"flex-1 overflow-auto custom-scrollbar"},a.createElement("div",{className:"p-4 sm:p-6 lg:p-8 max-w-[1920px] mx-auto"},a.createElement(RL,null)))))}function Kj(){const[e,t]=N.useState(""),[r,n]=N.useState(""),[i,o]=N.useState(!1),[d,g]=N.useState(!1),[h,x]=N.useState(!1),[y,w]=N.useState(""),C=mp(),_=Ps(),{login:D}=Mi(),k=_.state?.from?.pathname||"/dashboard",M=async R=>{if(R.preventDefault(),w(""),!e.trim()){w("Username is required");return}if(!r.trim()){w("Password is required");return}console.log("[Login] Attempting login for:",e),x(!0);try{const F=await D({username:e,password:r},d);F.success?(console.log("[Login] Login successful, redirecting to:",k),C(k,{replace:!0})):(console.error("[Login] Login failed:",F.error),F.error?.includes("deactivated")?w("Your account has been deactivated. Please contact an administrator."):F.error?.includes("Invalid")?w("Invalid username or password. Please try again."):w(F.error||"Login failed. Please try again."))}catch(F){console.error("[Login] Unexpected error:",F),w("An unexpected error occurred. Please try again.")}finally{x(!1)}};return a.createElement("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4"},a.createElement("div",{className:"w-full max-w-md"},a.createElement("div",{className:"text-center mb-8"},a.createElement("img",{src:K_,alt:"Motivata",className:"h-16 mx-auto mb-4"}),a.createElement("p",{className:"text-gray-600"},"Sign in to your account")),a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-8"},y&&a.createElement("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},a.createElement(Vr,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},y)),a.createElement("form",{onSubmit:M,className:"space-y-6"},a.createElement("div",null,a.createElement("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2"},"Username"),a.createElement("div",{className:"relative"},a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},a.createElement(No,{className:"h-5 w-5 text-gray-400"})),a.createElement("input",{id:"username",type:"text",value:e,onChange:R=>t(R.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-all disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter your username",disabled:h,autoComplete:"username"}))),a.createElement("div",null,a.createElement("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2"},"Password"),a.createElement("div",{className:"relative"},a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},a.createElement(ZU,{className:"h-5 w-5 text-gray-400"})),a.createElement("input",{id:"password",type:i?"text":"password",value:r,onChange:R=>n(R.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-all disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter your password",disabled:h,autoComplete:"current-password"}),a.createElement("button",{type:"button",onClick:()=>o(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center disabled:cursor-not-allowed",disabled:h,tabIndex:-1},i?a.createElement(H_,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):a.createElement(rn,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})))),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("label",{className:"flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:d,onChange:R=>g(R.target.checked),className:"h-4 w-4 text-gray-800 border-gray-300 rounded focus:ring-gray-700 cursor-pointer",disabled:h}),a.createElement("span",{className:"ml-2 text-sm text-gray-600"},"Remember me")),a.createElement("a",{href:"#",className:"text-sm text-gray-800 hover:text-black font-medium"},"Forgot password?")),a.createElement("button",{type:"submit",disabled:h,className:"w-full bg-gray-800 text-white py-3 px-4 rounded-lg font-medium hover:bg-gray-900 focus:ring-4 focus:ring-gray-300 transition-all disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2"},h?a.createElement(a.Fragment,null,a.createElement(Nt,{className:"h-5 w-5 animate-spin"}),"Signing in..."):"Log In")))))}var Z_={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},vA=a.createContext&&a.createContext(Z_),Zj=["attr","size","title"];function Qj(e,t){if(e==null)return{};var r=Jj(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Jj(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function dg(){return dg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dg.apply(this,arguments)}function EA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EA(Object(r),!0).forEach(function(n){ez(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ez(e,t,r){return t=tz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tz(e){var t=rz(e,"string");return typeof t=="symbol"?t:t+""}function rz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q_(e){return e&&e.map((t,r)=>a.createElement(t.tag,fg({key:r},t.attr),Q_(t.child)))}function Lt(e){return t=>a.createElement(nz,dg({attr:fg({},e.attr)},t),Q_(e.child))}function nz(e){var t=r=>{var{attr:n,size:i,title:o}=e,d=Qj(e,Zj),g=i||r.size||"1em",h;return r.className&&(h=r.className),e.className&&(h=(h?h+" ":"")+e.className),a.createElement("svg",dg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,d,{className:h,style:fg(fg({color:e.color||r.color},r.style),e.style),height:g,width:g,xmlns:"http://www.w3.org/2000/svg"}),o&&a.createElement("title",null,o),e.children)};return vA!==void 0?a.createElement(vA.Consumer,null,r=>t(r)):t(Z_)}function az(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},child:[]},{tag:"path",attr:{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},child:[]}]})(e)}function sz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"},child:[]}]})(e)}function iz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"},child:[]}]})(e)}function So(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(e)}function wA(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"},child:[]}]})(e)}function lz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"},child:[]}]})(e)}function oz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"},child:[]}]})(e)}function cz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(e)}function J_(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"},child:[]}]})(e)}function uz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"},child:[]}]})(e)}function NA(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(e)}function dz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M8 5v14l11-7z"},child:[]}]})(e)}function fz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"},child:[]}]})(e)}function mz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(e)}function hz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"},child:[]}]})(e)}function Df(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 21h-2v-2h2v2zm-2-7h-2v5h2v-5zm8-2h-2v4h2v-4zm-2-2h-2v2h2v-2zM7 12H5v2h2v-2zm-2-2H3v2h2v-2zm7-5h2V3h-2v2zm-7.5-.5v3h3v-3h-3zM9 9H3V3h6v6zm-4.5 7.5v3h3v-3h-3zM9 21H3v-6h6v6zm7.5-16.5v3h3v-3h-3zM21 9h-6V3h6v6zm-2 10v-3h-4v2h2v3h4v-2h-2zm-2-7h-4v2h4v-2zm-4-2H7v2h2v2h2v-2h2v-2zm1-1V7h-2V5h-2v4h4zM6.75 5.25h-1.5v1.5h1.5v-1.5zm0 12h-1.5v1.5h1.5v-1.5zm12-12h-1.5v1.5h1.5v-1.5z"},child:[]}]})(e)}function ih(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.5 6.5v3h-3v-3h3M11 5H5v6h6V5zm-1.5 9.5v3h-3v-3h3M11 13H5v6h6v-6zm6.5-6.5v3h-3v-3h3M19 5h-6v6h6V5zm-6 8h1.5v1.5H13V13zm1.5 1.5H16V16h-1.5v-1.5zM16 13h1.5v1.5H16V13zm-3 3h1.5v1.5H13V16zm1.5 1.5H16V19h-1.5v-1.5zM16 16h1.5v1.5H16V16zm1.5-1.5H19V16h-1.5v-1.5zm0 3H19V19h-1.5v-1.5zM22 7h-2V4h-3V2h5v5zm0 15v-5h-2v3h-3v2h5zM2 22h5v-2H4v-3H2v5zM2 2v5h2V4h3V2H2z"},child:[]}]})(e)}function yx(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(e)}function gz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"},child:[]}]})(e)}function mg(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(e)}function pz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m21.16 7.26-1.41-1.41-3.56 3.55 1.41 1.41s3.45-3.52 3.56-3.55zM11 3h2v5h-2zM6.4 10.81 7.81 9.4 4.26 5.84 2.84 7.26c.11.03 3.56 3.55 3.56 3.55zM20 12h-5c0 1.66-1.34 3-3 3s-3-1.34-3-3H4c-1.1 0-2 .9-2 2v5c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2z"},child:[]}]})(e)}function yz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M16 7h-1l-1-1h-4L9 7H8c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-4 7c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},child:[]},{tag:"path",attr:{d:"m8.57.51 4.48 4.48V2.04c4.72.47 8.48 4.23 8.95 8.95h2C23.34 3.02 15.49-1.59 8.57.51zM10.95 21.96c-4.72-.47-8.48-4.23-8.95-8.95H0c.66 7.97 8.51 12.58 15.43 10.48l-4.48-4.48v2.95z"},child:[]}]})(e)}function SA(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.79 21 3 11.21v2c0 .53.21 1.04.59 1.41l7.79 7.79c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83L12.79 21z"},child:[]},{tag:"path",attr:{d:"M11.38 17.41c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83L12.63.58A2.04 2.04 0 0 0 11.21 0H5C3.9 0 3 .9 3 2v6.21c0 .53.21 1.04.59 1.41l7.79 7.79zM7.25 3a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5z"},child:[]}]})(e)}function xz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(e)}function bz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"},child:[]}]})(e)}function vz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"},child:[]}]})(e)}function Ez(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}function eD(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(e)}function CA(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M22 10V6a2 2 0 0 0-2-2H4c-1.1 0-1.99.89-1.99 2v4c1.1 0 1.99.9 1.99 2s-.89 2-2 2v4c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-4c-1.1 0-2-.9-2-2s.9-2 2-2zm-9 7.5h-2v-2h2v2zm0-4.5h-2v-2h2v2zm0-4.5h-2v-2h2v2z"},child:[]}]})(e)}function wz(e){return Lt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},child:[]}]})(e)}function tD(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=tD(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function fn(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=tD(e))&&(n&&(n+=" "),n+=t);return n}function Nz(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Nz(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var y2=e=>typeof e=="number"&&!isNaN(e),Bf=e=>typeof e=="string",rD=e=>typeof e=="function",Sz=e=>Bf(e)||y2(e),Cz=e=>N.isValidElement(e)||Bf(e)||rD(e)||y2(e),Az=1,nD=()=>`${Az++}`,wi=new Map,Ov=[],AA=new Set,aD=()=>wi.size>0,Tz=(e,{containerId:t})=>{var r;return(r=wi.get(t||1))==null?void 0:r.toasts.get(e)};function Oz(e,t){var r;if(t)return!!((r=wi.get(t))!=null&&r.isToastActive(e));let n=!1;return wi.forEach(i=>{i.isToastActive(e)&&(n=!0)}),n}function _z(e){if(!aD()){Ov=Ov.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||Sz(e))wi.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=wi.get(e.containerId);t?t.removeToast(e.id):wi.forEach(r=>{r.removeToast(e.id)})}}var Dz=(e={})=>{wi.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function kz(e,t){Cz(e)&&(aD()||Ov.push({content:e,options:t}),wi.forEach(r=>{r.buildToast(e,t)}))}function sD(e,t){wi.forEach(r=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===r.id)&&r.toggle(e,t?.id)})}function Mz(e){return AA.add(e),()=>{AA.delete(e)}}function Pz(e){return e&&(Bf(e.toastId)||y2(e.toastId))?e.toastId:nD()}function mm(e,t){return kz(e,t),t.toastId}function wp(e,t){return{...t,type:t&&t.type||e,toastId:Pz(t)}}function Np(e){return(t,r)=>mm(t,wp(e,r))}function ht(e,t){return mm(e,wp("default",t))}ht.loading=(e,t)=>mm(e,wp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function Rz(e,{pending:t,error:r,success:n},i){let o;t&&(o=Bf(t)?ht.loading(t,i):ht.loading(t.render,{...i,...t}));let d={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},g=(x,y,w)=>{if(y==null){ht.dismiss(o);return}let C={type:x,...d,...i,data:w},_=Bf(y)?{render:y}:y;return o?ht.update(o,{...C,..._}):ht(_.render,{...C,..._}),w},h=rD(e)?e():e;return h.then(x=>g("success",n,x)).catch(x=>g("error",r,x)),h}ht.promise=Rz;ht.success=Np("success");ht.info=Np("info");ht.error=Np("error");ht.warning=Np("warning");ht.warn=ht.warning;ht.dark=(e,t)=>mm(e,wp("default",{theme:"dark",...t}));function Iz(e){_z(e)}ht.dismiss=Iz;ht.clearWaitingQueue=Dz;ht.isActive=Oz;ht.update=(e,t={})=>{let r=Tz(e,t);if(r){let{props:n,content:i}=r,o={delay:100,...n,...t,toastId:t.toastId||e,updateId:nD()};o.toastId!==e&&(o.staleId=e);let d=o.render||i;delete o.render,mm(d,o)}};ht.done=e=>{ht.update(e,{progress:1})};ht.onChange=Mz;ht.play=e=>sD(!0,e);ht.pause=e=>sD(!1,e);var xx={exports:{}},uf={};var TA;function Lz(){if(TA)return uf;TA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,o){var d=null;if(o!==void 0&&(d=""+o),i.key!==void 0&&(d=""+i.key),"key"in i){o={};for(var g in i)g!=="key"&&(o[g]=i[g])}else o=i;return i=o.ref,{$$typeof:e,type:n,key:d,ref:i!==void 0?i:null,props:o}}return uf.Fragment=t,uf.jsx=r,uf.jsxs=r,uf}var OA;function Bz(){return OA||(OA=1,xx.exports=Lz()),xx.exports}var _v=Bz();const iD=N.createContext({});function Fz(e){const t=N.useRef(null);return t.current===null&&(t.current=e()),t.current}const x2=typeof window<"u",Uz=x2?N.useLayoutEffect:N.useEffect,b2=N.createContext(null);function v2(e,t){e.indexOf(t)===-1&&e.push(t)}function E2(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const ml=(e,t,r)=>r>t?t:r<e?e:r;let w2=()=>{};const hl={},lD=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function oD(e){return typeof e=="object"&&e!==null}const cD=e=>/^0[^.\s]+$/u.test(e);function N2(e){let t;return()=>(t===void 0&&(t=e()),t)}const Os=e=>e,jz=(e,t)=>r=>t(e(r)),hm=(...e)=>e.reduce(jz),Ff=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class S2{constructor(){this.subscriptions=[]}add(t){return v2(this.subscriptions,t),()=>E2(this.subscriptions,t)}notify(t,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,r,n);else for(let o=0;o<i;o++){const d=this.subscriptions[o];d&&d(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ni=e=>e*1e3,As=e=>e/1e3;function uD(e,t){return t?e*(1e3/t):0}const dD=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,zz=1e-7,Vz=12;function Hz(e,t,r,n,i){let o,d,g=0;do d=t+(r-t)/2,o=dD(d,n,i)-e,o>0?r=d:t=d;while(Math.abs(o)>zz&&++g<Vz);return d}function gm(e,t,r,n){if(e===t&&r===n)return Os;const i=o=>Hz(o,0,1,e,r);return o=>o===0||o===1?o:dD(i(o),t,n)}const fD=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,mD=e=>t=>1-e(1-t),hD=gm(.33,1.53,.69,.99),C2=mD(hD),gD=fD(C2),pD=e=>(e*=2)<1?.5*C2(e):.5*(2-Math.pow(2,-10*(e-1))),A2=e=>1-Math.sin(Math.acos(e)),yD=mD(A2),xD=fD(A2),qz=gm(.42,0,1,1),$z=gm(0,0,.58,1),bD=gm(.42,0,.58,1),Gz=e=>Array.isArray(e)&&typeof e[0]!="number",vD=e=>Array.isArray(e)&&typeof e[0]=="number",Yz={linear:Os,easeIn:qz,easeInOut:bD,easeOut:$z,circIn:A2,circInOut:xD,circOut:yD,backIn:C2,backInOut:gD,backOut:hD,anticipate:pD},Xz=e=>typeof e=="string",_A=e=>{if(vD(e)){w2(e.length===4);const[t,r,n,i]=e;return gm(t,r,n,i)}else if(Xz(e))return Yz[e];return e},lh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Wz(e,t){let r=new Set,n=new Set,i=!1,o=!1;const d=new WeakSet;let g={delta:0,timestamp:0,isProcessing:!1};function h(y){d.has(y)&&(x.schedule(y),e()),y(g)}const x={schedule:(y,w=!1,C=!1)=>{const D=C&&i?r:n;return w&&d.add(y),D.has(y)||D.add(y),y},cancel:y=>{n.delete(y),d.delete(y)},process:y=>{if(g=y,i){o=!0;return}i=!0,[r,n]=[n,r],r.forEach(h),r.clear(),i=!1,o&&(o=!1,x.process(y))}};return x}const Kz=40;function ED(e,t){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>r=!0,d=lh.reduce((I,G)=>(I[G]=Wz(o),I),{}),{setup:g,read:h,resolveKeyframes:x,preUpdate:y,update:w,preRender:C,render:_,postRender:D}=d,k=()=>{const I=hl.useManualTiming?i.timestamp:performance.now();r=!1,hl.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(I-i.timestamp,Kz),1)),i.timestamp=I,i.isProcessing=!0,g.process(i),h.process(i),x.process(i),y.process(i),w.process(i),C.process(i),_.process(i),D.process(i),i.isProcessing=!1,r&&t&&(n=!1,e(k))},M=()=>{r=!0,n=!0,i.isProcessing||e(k)};return{schedule:lh.reduce((I,G)=>{const U=d[G];return I[G]=(z,L=!1,H=!1)=>(r||M(),U.schedule(z,L,H)),I},{}),cancel:I=>{for(let G=0;G<lh.length;G++)d[lh[G]].cancel(I)},state:i,steps:d}}const{schedule:Ur,cancel:Co,state:Jn,steps:bx}=ED(typeof requestAnimationFrame<"u"?requestAnimationFrame:Os,!0);let Yh;function Zz(){Yh=void 0}const Da={now:()=>(Yh===void 0&&Da.set(Jn.isProcessing||hl.useManualTiming?Jn.timestamp:performance.now()),Yh),set:e=>{Yh=e,queueMicrotask(Zz)}},wD=e=>t=>typeof t=="string"&&t.startsWith(e),T2=wD("--"),Qz=wD("var(--"),O2=e=>Qz(e)?Jz.test(e.split("/*")[0].trim()):!1,Jz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ld={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Uf={...ld,transform:e=>ml(0,1,e)},oh={...ld,default:1},kf=e=>Math.round(e*1e5)/1e5,_2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function eV(e){return e==null}const tV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,D2=(e,t)=>r=>!!(typeof r=="string"&&tV.test(r)&&r.startsWith(e)||t&&!eV(r)&&Object.prototype.hasOwnProperty.call(r,t)),ND=(e,t,r)=>n=>{if(typeof n!="string")return n;const[i,o,d,g]=n.match(_2);return{[e]:parseFloat(i),[t]:parseFloat(o),[r]:parseFloat(d),alpha:g!==void 0?parseFloat(g):1}},rV=e=>ml(0,255,e),vx={...ld,transform:e=>Math.round(rV(e))},hc={test:D2("rgb","red"),parse:ND("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+vx.transform(e)+", "+vx.transform(t)+", "+vx.transform(r)+", "+kf(Uf.transform(n))+")"};function nV(e){let t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Dv={test:D2("#"),parse:nV,transform:hc.transform},pm=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),bo=pm("deg"),Si=pm("%"),wt=pm("px"),aV=pm("vh"),sV=pm("vw"),DA={...Si,parse:e=>Si.parse(e)/100,transform:e=>Si.transform(e*100)},_u={test:D2("hsl","hue"),parse:ND("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Si.transform(kf(t))+", "+Si.transform(kf(r))+", "+kf(Uf.transform(n))+")"},Nn={test:e=>hc.test(e)||Dv.test(e)||_u.test(e),parse:e=>hc.test(e)?hc.parse(e):_u.test(e)?_u.parse(e):Dv.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?hc.transform(e):_u.transform(e),getAnimatableNone:e=>{const t=Nn.parse(e);return t.alpha=0,Nn.transform(t)}},iV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function lV(e){return isNaN(e)&&typeof e=="string"&&(e.match(_2)?.length||0)+(e.match(iV)?.length||0)>0}const SD="number",CD="color",oV="var",cV="var(",kA="${}",uV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function jf(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},i=[];let o=0;const g=t.replace(uV,h=>(Nn.test(h)?(n.color.push(o),i.push(CD),r.push(Nn.parse(h))):h.startsWith(cV)?(n.var.push(o),i.push(oV),r.push(h)):(n.number.push(o),i.push(SD),r.push(parseFloat(h))),++o,kA)).split(kA);return{values:r,split:g,indexes:n,types:i}}function AD(e){return jf(e).values}function TD(e){const{split:t,types:r}=jf(e),n=t.length;return i=>{let o="";for(let d=0;d<n;d++)if(o+=t[d],i[d]!==void 0){const g=r[d];g===SD?o+=kf(i[d]):g===CD?o+=Nn.transform(i[d]):o+=i[d]}return o}}const dV=e=>typeof e=="number"?0:Nn.test(e)?Nn.getAnimatableNone(e):e;function fV(e){const t=AD(e);return TD(e)(t.map(dV))}const Ao={test:lV,parse:AD,createTransformer:TD,getAnimatableNone:fV};function Ex(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function mV({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let i=0,o=0,d=0;if(!t)i=o=d=r;else{const g=r<.5?r*(1+t):r+t-r*t,h=2*r-g;i=Ex(h,g,e+1/3),o=Ex(h,g,e),d=Ex(h,g,e-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(d*255),alpha:n}}function hg(e,t){return r=>r>0?t:e}const Yr=(e,t,r)=>e+(t-e)*r,wx=(e,t,r)=>{const n=e*e,i=r*(t*t-n)+n;return i<0?0:Math.sqrt(i)},hV=[Dv,hc,_u],gV=e=>hV.find(t=>t.test(e));function MA(e){const t=gV(e);if(!t)return!1;let r=t.parse(e);return t===_u&&(r=mV(r)),r}const PA=(e,t)=>{const r=MA(e),n=MA(t);if(!r||!n)return hg(e,t);const i={...r};return o=>(i.red=wx(r.red,n.red,o),i.green=wx(r.green,n.green,o),i.blue=wx(r.blue,n.blue,o),i.alpha=Yr(r.alpha,n.alpha,o),hc.transform(i))},kv=new Set(["none","hidden"]);function pV(e,t){return kv.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function yV(e,t){return r=>Yr(e,t,r)}function k2(e){return typeof e=="number"?yV:typeof e=="string"?O2(e)?hg:Nn.test(e)?PA:vV:Array.isArray(e)?OD:typeof e=="object"?Nn.test(e)?PA:xV:hg}function OD(e,t){const r=[...e],n=r.length,i=e.map((o,d)=>k2(o)(o,t[d]));return o=>{for(let d=0;d<n;d++)r[d]=i[d](o);return r}}function xV(e,t){const r={...e,...t},n={};for(const i in r)e[i]!==void 0&&t[i]!==void 0&&(n[i]=k2(e[i])(e[i],t[i]));return i=>{for(const o in n)r[o]=n[o](i);return r}}function bV(e,t){const r=[],n={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const o=t.types[i],d=e.indexes[o][n[o]],g=e.values[d]??0;r[i]=g,n[o]++}return r}const vV=(e,t)=>{const r=Ao.createTransformer(t),n=jf(e),i=jf(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?kv.has(e)&&!i.values.length||kv.has(t)&&!n.values.length?pV(e,t):hm(OD(bV(n,i),i.values),r):hg(e,t)};function _D(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Yr(e,t,r):k2(e)(e,t)}const EV=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Ur.update(t,r),stop:()=>Co(t),now:()=>Jn.isProcessing?Jn.timestamp:Da.now()}},DD=(e,t,r=10)=>{let n="";const i=Math.max(Math.round(t/r),2);for(let o=0;o<i;o++)n+=Math.round(e(o/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},gg=2e4;function M2(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<gg;)t+=r,n=e.next(t);return t>=gg?1/0:t}function wV(e,t=100,r){const n=r({...e,keyframes:[0,t]}),i=Math.min(M2(n),gg);return{type:"keyframes",ease:o=>n.next(i*o).value/t,duration:As(i)}}const NV=5;function kD(e,t,r){const n=Math.max(t-NV,0);return uD(r-e(n),t-n)}const en={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Nx=.001;function SV({duration:e=en.duration,bounce:t=en.bounce,velocity:r=en.velocity,mass:n=en.mass}){let i,o,d=1-t;d=ml(en.minDamping,en.maxDamping,d),e=ml(en.minDuration,en.maxDuration,As(e)),d<1?(i=x=>{const y=x*d,w=y*e,C=y-r,_=Mv(x,d),D=Math.exp(-w);return Nx-C/_*D},o=x=>{const w=x*d*e,C=w*r+r,_=Math.pow(d,2)*Math.pow(x,2)*e,D=Math.exp(-w),k=Mv(Math.pow(x,2),d);return(-i(x)+Nx>0?-1:1)*((C-_)*D)/k}):(i=x=>{const y=Math.exp(-x*e),w=(x-r)*e+1;return-Nx+y*w},o=x=>{const y=Math.exp(-x*e),w=(r-x)*(e*e);return y*w});const g=5/e,h=AV(i,o,g);if(e=Ni(e),isNaN(h))return{stiffness:en.stiffness,damping:en.damping,duration:e};{const x=Math.pow(h,2)*n;return{stiffness:x,damping:d*2*Math.sqrt(n*x),duration:e}}}const CV=12;function AV(e,t,r){let n=r;for(let i=1;i<CV;i++)n=n-e(n)/t(n);return n}function Mv(e,t){return e*Math.sqrt(1-t*t)}const TV=["duration","bounce"],OV=["stiffness","damping","mass"];function RA(e,t){return t.some(r=>e[r]!==void 0)}function _V(e){let t={velocity:en.velocity,stiffness:en.stiffness,damping:en.damping,mass:en.mass,isResolvedFromDuration:!1,...e};if(!RA(e,OV)&&RA(e,TV))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),i=n*n,o=2*ml(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:en.mass,stiffness:i,damping:o}}else{const r=SV(e);t={...t,...r,mass:en.mass},t.isResolvedFromDuration=!0}return t}function pg(e=en.visualDuration,t=en.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:i}=r;const o=r.keyframes[0],d=r.keyframes[r.keyframes.length-1],g={done:!1,value:o},{stiffness:h,damping:x,mass:y,duration:w,velocity:C,isResolvedFromDuration:_}=_V({...r,velocity:-As(r.velocity||0)}),D=C||0,k=x/(2*Math.sqrt(h*y)),M=d-o,R=As(Math.sqrt(h/y)),F=Math.abs(M)<5;n||(n=F?en.restSpeed.granular:en.restSpeed.default),i||(i=F?en.restDelta.granular:en.restDelta.default);let I;if(k<1){const U=Mv(R,k);I=z=>{const L=Math.exp(-k*R*z);return d-L*((D+k*R*M)/U*Math.sin(U*z)+M*Math.cos(U*z))}}else if(k===1)I=U=>d-Math.exp(-R*U)*(M+(D+R*M)*U);else{const U=R*Math.sqrt(k*k-1);I=z=>{const L=Math.exp(-k*R*z),H=Math.min(U*z,300);return d-L*((D+k*R*M)*Math.sinh(H)+U*M*Math.cosh(H))/U}}const G={calculatedDuration:_&&w||null,next:U=>{const z=I(U);if(_)g.done=U>=w;else{let L=U===0?D:0;k<1&&(L=U===0?Ni(D):kD(I,U,z));const H=Math.abs(L)<=n,V=Math.abs(d-z)<=i;g.done=H&&V}return g.value=g.done?d:z,g},toString:()=>{const U=Math.min(M2(G),gg),z=DD(L=>G.next(U*L).value,U,30);return U+"ms "+z},toTransition:()=>{}};return G}pg.applyToOptions=e=>{const t=wV(e,100,pg);return e.ease=t.ease,e.duration=Ni(t.duration),e.type="keyframes",e};function Pv({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:d,min:g,max:h,restDelta:x=.5,restSpeed:y}){const w=e[0],C={done:!1,value:w},_=H=>g!==void 0&&H<g||h!==void 0&&H>h,D=H=>g===void 0?h:h===void 0||Math.abs(g-H)<Math.abs(h-H)?g:h;let k=r*t;const M=w+k,R=d===void 0?M:d(M);R!==M&&(k=R-w);const F=H=>-k*Math.exp(-H/n),I=H=>R+F(H),G=H=>{const V=F(H),Q=I(H);C.done=Math.abs(V)<=x,C.value=C.done?R:Q};let U,z;const L=H=>{_(C.value)&&(U=H,z=pg({keyframes:[C.value,D(C.value)],velocity:kD(I,H,C.value),damping:i,stiffness:o,restDelta:x,restSpeed:y}))};return L(0),{calculatedDuration:null,next:H=>{let V=!1;return!z&&U===void 0&&(V=!0,G(H),L(H)),U!==void 0&&H>=U?z.next(H-U):(!V&&G(H),C)}}}function DV(e,t,r){const n=[],i=r||hl.mix||_D,o=e.length-1;for(let d=0;d<o;d++){let g=i(e[d],e[d+1]);if(t){const h=Array.isArray(t)?t[d]||Os:t;g=hm(h,g)}n.push(g)}return n}function kV(e,t,{clamp:r=!0,ease:n,mixer:i}={}){const o=e.length;if(w2(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const d=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const g=DV(t,n,i),h=g.length,x=y=>{if(d&&y<e[0])return t[0];let w=0;if(h>1)for(;w<e.length-2&&!(y<e[w+1]);w++);const C=Ff(e[w],e[w+1],y);return g[w](C)};return r?y=>x(ml(e[0],e[o-1],y)):x}function MV(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const i=Ff(0,t,n);e.push(Yr(r,1,i))}}function PV(e){const t=[0];return MV(t,e.length-1),t}function RV(e,t){return e.map(r=>r*t)}function IV(e,t){return e.map(()=>t||bD).splice(0,e.length-1)}function Mf({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const i=Gz(n)?n.map(_A):_A(n),o={done:!1,value:t[0]},d=RV(r&&r.length===t.length?r:PV(t),e),g=kV(d,t,{ease:Array.isArray(i)?i:IV(t,i)});return{calculatedDuration:e,next:h=>(o.value=g(h),o.done=h>=e,o)}}const LV=e=>e!==null;function P2(e,{repeat:t,repeatType:r="loop"},n,i=1){const o=e.filter(LV),g=i<0||t&&r!=="loop"&&t%2===1?0:o.length-1;return!g||n===void 0?o[g]:n}const BV={decay:Pv,inertia:Pv,tween:Mf,keyframes:Mf,spring:pg};function MD(e){typeof e.type=="string"&&(e.type=BV[e.type])}class R2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const FV=e=>e/100;class I2 extends R2{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==Da.now()&&this.tick(Da.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;MD(t);const{type:r=Mf,repeat:n=0,repeatDelay:i=0,repeatType:o,velocity:d=0}=t;let{keyframes:g}=t;const h=r||Mf;h!==Mf&&typeof g[0]!="number"&&(this.mixKeyframes=hm(FV,_D(g[0],g[1])),g=[0,100]);const x=h({...t,keyframes:g});o==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...g].reverse(),velocity:-d})),x.calculatedDuration===null&&(x.calculatedDuration=M2(x));const{calculatedDuration:y}=x;this.calculatedDuration=y,this.resolvedDuration=y+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=x}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:i,mixKeyframes:o,mirroredGenerator:d,resolvedDuration:g,calculatedDuration:h}=this;if(this.startTime===null)return n.next(0);const{delay:x=0,keyframes:y,repeat:w,repeatType:C,repeatDelay:_,type:D,onUpdate:k,finalKeyframe:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const R=this.currentTime-x*(this.playbackSpeed>=0?1:-1),F=this.playbackSpeed>=0?R<0:R>i;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let I=this.currentTime,G=n;if(w){const H=Math.min(this.currentTime,i)/g;let V=Math.floor(H),Q=H%1;!Q&&H>=1&&(Q=1),Q===1&&V--,V=Math.min(V,w+1),!!(V%2)&&(C==="reverse"?(Q=1-Q,_&&(Q-=_/g)):C==="mirror"&&(G=d)),I=ml(0,1,Q)*g}const U=F?{done:!1,value:y[0]}:G.next(I);o&&(U.value=o(U.value));let{done:z}=U;!F&&h!==null&&(z=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return L&&D!==Pv&&(U.value=P2(y,this.options,M,this.speed)),k&&k(U.value),L&&this.finish(),U}then(t,r){return this.finished.then(t,r)}get duration(){return As(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+As(t)}get time(){return As(this.currentTime)}set time(t){t=Ni(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Da.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=As(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=EV,startTime:r}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Da.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function UV(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const gc=e=>e*180/Math.PI,Rv=e=>{const t=gc(Math.atan2(e[1],e[0]));return Iv(t)},jV={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Rv,rotateZ:Rv,skewX:e=>gc(Math.atan(e[1])),skewY:e=>gc(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Iv=e=>(e=e%360,e<0&&(e+=360),e),IA=Rv,LA=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),BA=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),zV={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:LA,scaleY:BA,scale:e=>(LA(e)+BA(e))/2,rotateX:e=>Iv(gc(Math.atan2(e[6],e[5]))),rotateY:e=>Iv(gc(Math.atan2(-e[2],e[0]))),rotateZ:IA,rotate:IA,skewX:e=>gc(Math.atan(e[4])),skewY:e=>gc(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Lv(e){return e.includes("scale")?1:0}function Bv(e,t){if(!e||e==="none")return Lv(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(r)n=zV,i=r;else{const g=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=jV,i=g}if(!i)return Lv(t);const o=n[t],d=i[1].split(",").map(HV);return typeof o=="function"?o(d):d[o]}const VV=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Bv(r,t)};function HV(e){return parseFloat(e.trim())}const od=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],cd=new Set(od),FA=e=>e===ld||e===wt,qV=new Set(["x","y","z"]),$V=od.filter(e=>!qV.has(e));function GV(e){const t=[];return $V.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const bc={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Bv(t,"x"),y:(e,{transform:t})=>Bv(t,"y")};bc.translateX=bc.x;bc.translateY=bc.y;const vc=new Set;let Fv=!1,Uv=!1,jv=!1;function PD(){if(Uv){const e=Array.from(vc).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const i=GV(n);i.length&&(r.set(n,i),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([o,d])=>{n.getValue(o)?.set(d)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Uv=!1,Fv=!1,vc.forEach(e=>e.complete(jv)),vc.clear()}function RD(){vc.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Uv=!0)})}function YV(){jv=!0,RD(),PD(),jv=!1}class L2{constructor(t,r,n,i,o,d=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=i,this.element=o,this.isAsync=d}scheduleResolve(){this.state="scheduled",this.isAsync?(vc.add(this),Fv||(Fv=!0,Ur.read(RD),Ur.resolveKeyframes(PD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:i}=this;if(t[0]===null){const o=i?.get(),d=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&r){const g=n.readValue(r,d);g!=null&&(t[0]=g)}t[0]===void 0&&(t[0]=d),i&&o===void 0&&i.set(t[0])}UV(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),vc.delete(this)}cancel(){this.state==="scheduled"&&(vc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const XV=e=>e.startsWith("--");function WV(e,t,r){XV(t)?e.style.setProperty(t,r):e.style[t]=r}const KV=N2(()=>window.ScrollTimeline!==void 0),ZV={};function QV(e,t){const r=N2(e);return()=>ZV[t]??r()}const ID=QV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Cf=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,UA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Cf([0,.65,.55,1]),circOut:Cf([.55,0,1,.45]),backIn:Cf([.31,.01,.66,-.59]),backOut:Cf([.33,1.53,.69,.99])};function LD(e,t){if(e)return typeof e=="function"?ID()?DD(e,t):"ease-out":vD(e)?Cf(e):Array.isArray(e)?e.map(r=>LD(r,t)||UA.easeOut):UA[e]}function JV(e,t,r,{delay:n=0,duration:i=300,repeat:o=0,repeatType:d="loop",ease:g="easeOut",times:h}={},x=void 0){const y={[t]:r};h&&(y.offset=h);const w=LD(g,i);Array.isArray(w)&&(y.easing=w);const C={delay:n,duration:i,easing:Array.isArray(w)?"linear":w,fill:"both",iterations:o+1,direction:d==="reverse"?"alternate":"normal"};return x&&(C.pseudoElement=x),e.animate(y,C)}function BD(e){return typeof e=="function"&&"applyToOptions"in e}function eH({type:e,...t}){return BD(e)&&ID()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class tH extends R2{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:i,pseudoElement:o,allowFlatten:d=!1,finalKeyframe:g,onComplete:h}=t;this.isPseudoElement=!!o,this.allowFlatten=d,this.options=t,w2(typeof t.type!="string");const x=eH(t);this.animation=JV(r,n,i,x,o),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const y=P2(i,this.options,g,this.speed);this.updateMotionValue?this.updateMotionValue(y):WV(r,n,y),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return As(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+As(t)}get time(){return As(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ni(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&KV()?(this.animation.timeline=t,Os):r(this)}}const FD={anticipate:pD,backInOut:gD,circInOut:xD};function rH(e){return e in FD}function nH(e){typeof e.ease=="string"&&rH(e.ease)&&(e.ease=FD[e.ease])}const jA=10;class aH extends tH{constructor(t){nH(t),MD(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:i,element:o,...d}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const g=new I2({...d,autoplay:!1}),h=Ni(this.finishedTime??this.time);r.setWithVelocity(g.sample(h-jA).value,g.sample(h).value,jA),g.stop()}}const zA=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ao.test(e)||e==="0")&&!e.startsWith("url("));function sH(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function iH(e,t,r,n){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const o=e[e.length-1],d=zA(i,t),g=zA(o,t);return!d||!g?!1:sH(e)||(r==="spring"||BD(r))&&n}function zv(e){e.duration=0,e.type="keyframes"}const lH=new Set(["opacity","clipPath","filter","transform"]),oH=N2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function cH(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:i,damping:o,type:d}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:x}=t.owner.getProps();return oH()&&r&&lH.has(r)&&(r!=="transform"||!x)&&!h&&!n&&i!=="mirror"&&o!==0&&d!=="inertia"}const uH=40;class dH extends R2{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:d="loop",keyframes:g,name:h,motionValue:x,element:y,...w}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Da.now();const C={autoplay:t,delay:r,type:n,repeat:i,repeatDelay:o,repeatType:d,name:h,motionValue:x,element:y,...w},_=y?.KeyframeResolver||L2;this.keyframeResolver=new _(g,(D,k,M)=>this.onKeyframesResolved(D,k,C,!M),h,x,y),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,n,i){this.keyframeResolver=void 0;const{name:o,type:d,velocity:g,delay:h,isHandoff:x,onUpdate:y}=n;this.resolvedAt=Da.now(),iH(t,o,d,g)||((hl.instantAnimations||!h)&&y?.(P2(t,n,r)),t[0]=t[t.length-1],zv(n),n.repeat=0);const C={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>uH?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},_=!x&&cH(C)?new aH({...C,element:C.motionValue.owner.current}):new I2(C);_.finished.then(()=>this.notifyFinished()).catch(Os),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),YV()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const fH=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function mH(e){const t=fH.exec(e);if(!t)return[,];const[,r,n,i]=t;return[`--${r??n}`,i]}function UD(e,t,r=1){const[n,i]=mH(e);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const d=o.trim();return lD(d)?parseFloat(d):d}return O2(i)?UD(i,t,r+1):i}function B2(e,t){return e?.[t]??e?.default??e}const jD=new Set(["width","height","top","left","right","bottom",...od]),hH={test:e=>e==="auto",parse:e=>e},zD=e=>t=>t.test(e),VD=[ld,wt,Si,bo,sV,aV,hH],VA=e=>VD.find(zD(e));function gH(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||cD(e):!0}const pH=new Set(["brightness","contrast","saturate","opacity"]);function yH(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(_2)||[];if(!n)return e;const i=r.replace(n,"");let o=pH.has(t)?1:0;return n!==r&&(o*=100),t+"("+o+i+")"}const xH=/\b([a-z-]*)\(.*?\)/gu,Vv={...Ao,getAnimatableNone:e=>{const t=e.match(xH);return t?t.map(yH).join(" "):e}},HA={...ld,transform:Math.round},bH={rotate:bo,rotateX:bo,rotateY:bo,rotateZ:bo,scale:oh,scaleX:oh,scaleY:oh,scaleZ:oh,skew:bo,skewX:bo,skewY:bo,distance:wt,translateX:wt,translateY:wt,translateZ:wt,x:wt,y:wt,z:wt,perspective:wt,transformPerspective:wt,opacity:Uf,originX:DA,originY:DA,originZ:wt},F2={borderWidth:wt,borderTopWidth:wt,borderRightWidth:wt,borderBottomWidth:wt,borderLeftWidth:wt,borderRadius:wt,radius:wt,borderTopLeftRadius:wt,borderTopRightRadius:wt,borderBottomRightRadius:wt,borderBottomLeftRadius:wt,width:wt,maxWidth:wt,height:wt,maxHeight:wt,top:wt,right:wt,bottom:wt,left:wt,padding:wt,paddingTop:wt,paddingRight:wt,paddingBottom:wt,paddingLeft:wt,margin:wt,marginTop:wt,marginRight:wt,marginBottom:wt,marginLeft:wt,backgroundPositionX:wt,backgroundPositionY:wt,...bH,zIndex:HA,fillOpacity:Uf,strokeOpacity:Uf,numOctaves:HA},vH={...F2,color:Nn,backgroundColor:Nn,outlineColor:Nn,fill:Nn,stroke:Nn,borderColor:Nn,borderTopColor:Nn,borderRightColor:Nn,borderBottomColor:Nn,borderLeftColor:Nn,filter:Vv,WebkitFilter:Vv},HD=e=>vH[e];function qD(e,t){let r=HD(e);return r!==Vv&&(r=Ao),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const EH=new Set(["auto","none","0"]);function wH(e,t,r){let n=0,i;for(;n<e.length&&!i;){const o=e[n];typeof o=="string"&&!EH.has(o)&&jf(o).values.length&&(i=e[n]),n++}if(i&&r)for(const o of t)e[o]=qD(r,i)}class NH extends L2{constructor(t,r,n,i,o){super(t,r,n,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let h=0;h<t.length;h++){let x=t[h];if(typeof x=="string"&&(x=x.trim(),O2(x))){const y=UD(x,r.current);y!==void 0&&(t[h]=y),h===t.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!jD.has(n)||t.length!==2)return;const[i,o]=t,d=VA(i),g=VA(o);if(d!==g)if(FA(d)&&FA(g))for(let h=0;h<t.length;h++){const x=t[h];typeof x=="string"&&(t[h]=parseFloat(x))}else bc[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let i=0;i<t.length;i++)(t[i]===null||gH(t[i]))&&n.push(i);n.length&&wH(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bc[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const i=t.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=n.length-1,d=n[o];n[o]=bc[r](t.measureViewportBox(),window.getComputedStyle(t.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),this.removedTransforms?.length&&this.removedTransforms.forEach(([g,h])=>{t.getValue(g).set(h)}),this.resolveNoneKeyframes()}}function SH(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const i=r?.[e]??n.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const $D=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function CH(e){return oD(e)&&"offsetHeight"in e}const qA=30,AH=e=>!isNaN(parseFloat(e));class TH{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const i=Da.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Da.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=AH(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new S2);const n=this.events[t].add(r);return t==="change"?()=>{n(),Ur.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Da.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>qA)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,qA);return uD(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hu(e,t){return new TH(e,t)}const{schedule:U2}=ED(queueMicrotask,!1),Ys={x:!1,y:!1};function GD(){return Ys.x||Ys.y}function OH(e){return e==="x"||e==="y"?Ys[e]?null:(Ys[e]=!0,()=>{Ys[e]=!1}):Ys.x||Ys.y?null:(Ys.x=Ys.y=!0,()=>{Ys.x=Ys.y=!1})}function YD(e,t){const r=SH(e),n=new AbortController,i={passive:!0,...t,signal:n.signal};return[r,i,()=>n.abort()]}function $A(e){return!(e.pointerType==="touch"||GD())}function _H(e,t,r={}){const[n,i,o]=YD(e,r),d=g=>{if(!$A(g))return;const{target:h}=g,x=t(h,g);if(typeof x!="function"||!h)return;const y=w=>{$A(w)&&(x(w),h.removeEventListener("pointerleave",y))};h.addEventListener("pointerleave",y,i)};return n.forEach(g=>{g.addEventListener("pointerenter",d,i)}),o}const XD=(e,t)=>t?e===t?!0:XD(e,t.parentElement):!1,j2=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,DH=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function kH(e){return DH.has(e.tagName)||e.tabIndex!==-1}const Xh=new WeakSet;function GA(e){return t=>{t.key==="Enter"&&e(t)}}function Sx(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const MH=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=GA(()=>{if(Xh.has(r))return;Sx(r,"down");const i=GA(()=>{Sx(r,"up")}),o=()=>Sx(r,"cancel");r.addEventListener("keyup",i,t),r.addEventListener("blur",o,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function YA(e){return j2(e)&&!GD()}function PH(e,t,r={}){const[n,i,o]=YD(e,r),d=g=>{const h=g.currentTarget;if(!YA(g))return;Xh.add(h);const x=t(h,g),y=(_,D)=>{window.removeEventListener("pointerup",w),window.removeEventListener("pointercancel",C),Xh.has(h)&&Xh.delete(h),YA(_)&&typeof x=="function"&&x(_,{success:D})},w=_=>{y(_,h===window||h===document||r.useGlobalTarget||XD(h,_.target))},C=_=>{y(_,!1)};window.addEventListener("pointerup",w,i),window.addEventListener("pointercancel",C,i)};return n.forEach(g=>{(r.useGlobalTarget?window:g).addEventListener("pointerdown",d,i),CH(g)&&(g.addEventListener("focus",x=>MH(x,i)),!kH(g)&&!g.hasAttribute("tabindex")&&(g.tabIndex=0))}),o}function WD(e){return oD(e)&&"ownerSVGElement"in e}function RH(e){return WD(e)&&e.tagName==="svg"}const aa=e=>!!(e&&e.getVelocity),IH=[...VD,Nn,Ao],LH=e=>IH.find(zD(e)),KD=N.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function BH(e=!0){const t=N.useContext(b2);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:i}=t,o=N.useId();N.useEffect(()=>{if(e)return i(o)},[e]);const d=N.useCallback(()=>e&&n&&n(o),[o,n,e]);return!r&&n?[!1,d]:[!0]}const ZD=N.createContext({strict:!1}),XA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qu={};for(const e in XA)qu[e]={isEnabled:t=>XA[e].some(r=>!!t[r])};function FH(e){for(const t in e)qu[t]={...qu[t],...e[t]}}const UH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yg(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||UH.has(e)}let QD=e=>!yg(e);function jH(e){typeof e=="function"&&(QD=t=>t.startsWith("on")?!yg(t):e(t))}try{jH(require("@emotion/is-prop-valid").default)}catch{}function zH(e,t,r){const n={};for(const i in e)i==="values"&&typeof e.values=="object"||(QD(i)||r===!0&&yg(i)||!t&&!yg(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}const Sp=N.createContext({});function Cp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function zf(e){return typeof e=="string"||Array.isArray(e)}const z2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],V2=["initial",...z2];function Ap(e){return Cp(e.animate)||V2.some(t=>zf(e[t]))}function JD(e){return!!(Ap(e)||e.variants)}function VH(e,t){if(Ap(e)){const{initial:r,animate:n}=e;return{initial:r===!1||zf(r)?r:void 0,animate:zf(n)?n:void 0}}return e.inherit!==!1?t:{}}function HH(e){const{initial:t,animate:r}=VH(e,N.useContext(Sp));return N.useMemo(()=>({initial:t,animate:r}),[WA(t),WA(r)])}function WA(e){return Array.isArray(e)?e.join(" "):e}const Vf={};function qH(e){for(const t in e)Vf[t]=e[t],T2(t)&&(Vf[t].isCSSVariable=!0)}function ek(e,{layout:t,layoutId:r}){return cd.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Vf[e]||e==="opacity")}const $H={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},GH=od.length;function YH(e,t,r){let n="",i=!0;for(let o=0;o<GH;o++){const d=od[o],g=e[d];if(g===void 0)continue;let h=!0;if(typeof g=="number"?h=g===(d.startsWith("scale")?1:0):h=parseFloat(g)===0,!h||r){const x=$D(g,F2[d]);if(!h){i=!1;const y=$H[d]||d;n+=`${y}(${x}) `}r&&(t[d]=x)}}return n=n.trim(),r?n=r(t,i?"":n):i&&(n="none"),n}function H2(e,t,r){const{style:n,vars:i,transformOrigin:o}=e;let d=!1,g=!1;for(const h in t){const x=t[h];if(cd.has(h)){d=!0;continue}else if(T2(h)){i[h]=x;continue}else{const y=$D(x,F2[h]);h.startsWith("origin")?(g=!0,o[h]=y):n[h]=y}}if(t.transform||(d||r?n.transform=YH(t,e.transform,r):n.transform&&(n.transform="none")),g){const{originX:h="50%",originY:x="50%",originZ:y=0}=o;n.transformOrigin=`${h} ${x} ${y}`}}const q2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function tk(e,t,r){for(const n in t)!aa(t[n])&&!ek(n,r)&&(e[n]=t[n])}function XH({transformTemplate:e},t){return N.useMemo(()=>{const r=q2();return H2(r,t,e),Object.assign({},r.vars,r.style)},[t])}function WH(e,t){const r=e.style||{},n={};return tk(n,r,e),Object.assign(n,XH(e,t)),n}function KH(e,t){const r={},n=WH(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const ZH={offset:"stroke-dashoffset",array:"stroke-dasharray"},QH={offset:"strokeDashoffset",array:"strokeDasharray"};function JH(e,t,r=1,n=0,i=!0){e.pathLength=1;const o=i?ZH:QH;e[o.offset]=wt.transform(-n);const d=wt.transform(t),g=wt.transform(r);e[o.array]=`${d} ${g}`}function rk(e,{attrX:t,attrY:r,attrScale:n,pathLength:i,pathSpacing:o=1,pathOffset:d=0,...g},h,x,y){if(H2(e,g,x),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:w,style:C}=e;w.transform&&(C.transform=w.transform,delete w.transform),(C.transform||w.transformOrigin)&&(C.transformOrigin=w.transformOrigin??"50% 50%",delete w.transformOrigin),C.transform&&(C.transformBox=y?.transformBox??"fill-box",delete w.transformBox),t!==void 0&&(w.x=t),r!==void 0&&(w.y=r),n!==void 0&&(w.scale=n),i!==void 0&&JH(w,i,o,d,!1)}const nk=()=>({...q2(),attrs:{}}),ak=e=>typeof e=="string"&&e.toLowerCase()==="svg";function eq(e,t,r,n){const i=N.useMemo(()=>{const o=nk();return rk(o,t,ak(n),e.transformTemplate,e.style),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};tk(o,e.style,e),i.style={...o,...i.style}}return i}const tq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $2(e){return typeof e!="string"||e.includes("-")?!1:!!(tq.indexOf(e)>-1||/[A-Z]/u.test(e))}function rq(e,t,r,{latestValues:n},i,o=!1){const g=($2(e)?eq:KH)(t,n,i,e),h=zH(t,typeof e=="string",o),x=e!==N.Fragment?{...h,...g,ref:r}:{},{children:y}=t,w=N.useMemo(()=>aa(y)?y.get():y,[y]);return N.createElement(e,{...x,children:w})}function KA(e){const t=[{},{}];return e?.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function G2(e,t,r,n){if(typeof t=="function"){const[i,o]=KA(n);t=t(r!==void 0?r:e.custom,i,o)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,o]=KA(n);t=t(r!==void 0?r:e.custom,i,o)}return t}function Wh(e){return aa(e)?e.get():e}function nq({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,i){return{latestValues:aq(r,n,i,e),renderState:t()}}function aq(e,t,r,n){const i={},o=n(e,{});for(const C in o)i[C]=Wh(o[C]);let{initial:d,animate:g}=e;const h=Ap(e),x=JD(e);t&&x&&!h&&e.inherit!==!1&&(d===void 0&&(d=t.initial),g===void 0&&(g=t.animate));let y=r?r.initial===!1:!1;y=y||d===!1;const w=y?g:d;if(w&&typeof w!="boolean"&&!Cp(w)){const C=Array.isArray(w)?w:[w];for(let _=0;_<C.length;_++){const D=G2(e,C[_]);if(D){const{transitionEnd:k,transition:M,...R}=D;for(const F in R){let I=R[F];if(Array.isArray(I)){const G=y?I.length-1:0;I=I[G]}I!==null&&(i[F]=I)}for(const F in k)i[F]=k[F]}}}return i}const sk=e=>(t,r)=>{const n=N.useContext(Sp),i=N.useContext(b2),o=()=>nq(e,t,n,i);return r?o():Fz(o)};function Y2(e,t,r){const{style:n}=e,i={};for(const o in n)(aa(n[o])||t.style&&aa(t.style[o])||ek(o,e)||r?.getValue(o)?.liveStyle!==void 0)&&(i[o]=n[o]);return i}const sq=sk({scrapeMotionValuesFromProps:Y2,createRenderState:q2});function ik(e,t,r){const n=Y2(e,t,r);for(const i in e)if(aa(e[i])||aa(t[i])){const o=od.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[o]=e[i]}return n}const iq=sk({scrapeMotionValuesFromProps:ik,createRenderState:nk}),lq=Symbol.for("motionComponentSymbol");function Du(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function oq(e,t,r){return N.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Du(r)&&(r.current=n))},[t])}const X2=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),cq="framerAppearId",lk="data-"+X2(cq),ok=N.createContext({});function uq(e,t,r,n,i){const{visualElement:o}=N.useContext(Sp),d=N.useContext(ZD),g=N.useContext(b2),h=N.useContext(KD).reducedMotion,x=N.useRef(null);n=n||d.renderer,!x.current&&n&&(x.current=n(e,{visualState:t,parent:o,props:r,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:h}));const y=x.current,w=N.useContext(ok);y&&!y.projection&&i&&(y.type==="html"||y.type==="svg")&&dq(x.current,r,i,w);const C=N.useRef(!1);N.useInsertionEffect(()=>{y&&C.current&&y.update(r,g)});const _=r[lk],D=N.useRef(!!_&&!window.MotionHandoffIsComplete?.(_)&&window.MotionHasOptimisedAnimation?.(_));return Uz(()=>{y&&(C.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),D.current&&y.animationState&&y.animationState.animateChanges())}),N.useEffect(()=>{y&&(!D.current&&y.animationState&&y.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(_)}),D.current=!1),y.enteringChildren=void 0)}),y}function dq(e,t,r,n){const{layoutId:i,layout:o,drag:d,dragConstraints:g,layoutScroll:h,layoutRoot:x,layoutCrossfade:y}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:ck(e.parent)),e.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!d||g&&Du(g),visualElement:e,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,crossfade:y,layoutScroll:h,layoutRoot:x})}function ck(e){if(e)return e.options.allowProjection!==!1?e.projection:ck(e.parent)}function Cx(e,{forwardMotionProps:t=!1}={},r,n){r&&FH(r);const i=$2(e)?iq:sq;function o(g,h){let x;const y={...N.useContext(KD),...g,layoutId:fq(g)},{isStatic:w}=y,C=HH(g),_=i(g,w);if(!w&&x2){mq();const D=hq(y);x=D.MeasureLayout,C.visualElement=uq(e,_,y,n,D.ProjectionNode)}return _v.jsxs(Sp.Provider,{value:C,children:[x&&C.visualElement?_v.jsx(x,{visualElement:C.visualElement,...y}):null,rq(e,g,oq(_,C.visualElement,h),_,w,t)]})}o.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const d=N.forwardRef(o);return d[lq]=e,d}function fq({layoutId:e}){const t=N.useContext(iD).id;return t&&e!==void 0?t+"-"+e:e}function mq(e,t){N.useContext(ZD).strict}function hq(e){const{drag:t,layout:r}=qu;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function gq(e,t){if(typeof Proxy>"u")return Cx;const r=new Map,n=(o,d)=>Cx(o,d,e,t),i=(o,d)=>n(o,d);return new Proxy(i,{get:(o,d)=>d==="create"?n:(r.has(d)||r.set(d,Cx(d,void 0,e,t)),r.get(d))})}function uk({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function pq({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function yq(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Ax(e){return e===void 0||e===1}function Hv({scale:e,scaleX:t,scaleY:r}){return!Ax(e)||!Ax(t)||!Ax(r)}function cc(e){return Hv(e)||dk(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function dk(e){return ZA(e.x)||ZA(e.y)}function ZA(e){return e&&e!=="0%"}function xg(e,t,r){const n=e-r,i=t*n;return r+i}function QA(e,t,r,n,i){return i!==void 0&&(e=xg(e,i,n)),xg(e,r,n)+t}function qv(e,t=0,r=1,n,i){e.min=QA(e.min,t,r,n,i),e.max=QA(e.max,t,r,n,i)}function fk(e,{x:t,y:r}){qv(e.x,t.translate,t.scale,t.originPoint),qv(e.y,r.translate,r.scale,r.originPoint)}const JA=.999999999999,e4=1.0000000000001;function xq(e,t,r,n=!1){const i=r.length;if(!i)return;t.x=t.y=1;let o,d;for(let g=0;g<i;g++){o=r[g],d=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Mu(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),d&&(t.x*=d.x.scale,t.y*=d.y.scale,fk(e,d)),n&&cc(o.latestValues)&&Mu(e,o.latestValues))}t.x<e4&&t.x>JA&&(t.x=1),t.y<e4&&t.y>JA&&(t.y=1)}function ku(e,t){e.min=e.min+t,e.max=e.max+t}function t4(e,t,r,n,i=.5){const o=Yr(e.min,e.max,i);qv(e,t,r,o,n)}function Mu(e,t){t4(e.x,t.x,t.scaleX,t.scale,t.originX),t4(e.y,t.y,t.scaleY,t.scale,t.originY)}function mk(e,t){return uk(yq(e.getBoundingClientRect(),t))}function bq(e,t,r){const n=mk(e,r),{scroll:i}=t;return i&&(ku(n.x,i.offset.x),ku(n.y,i.offset.y)),n}const r4=()=>({translate:0,scale:1,origin:0,originPoint:0}),Pu=()=>({x:r4(),y:r4()}),n4=()=>({min:0,max:0}),kn=()=>({x:n4(),y:n4()}),$v={current:null},hk={current:!1};function vq(){if(hk.current=!0,!!x2)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>$v.current=e.matches;e.addEventListener("change",t),t()}else $v.current=!1}const Eq=new WeakMap;function wq(e,t,r){for(const n in t){const i=t[n],o=r[n];if(aa(i))e.addValue(n,i);else if(aa(o))e.addValue(n,Hu(i,{owner:e}));else if(o!==i)if(e.hasValue(n)){const d=e.getValue(n);d.liveStyle===!0?d.jump(i):d.hasAnimated||d.set(i)}else{const d=e.getStaticValue(n);e.addValue(n,Hu(d!==void 0?d:i,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const a4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Nq{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:o,visualState:d},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=L2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const C=Da.now();this.renderScheduledAt<C&&(this.renderScheduledAt=C,Ur.render(this.render,!1,!0))};const{latestValues:h,renderState:x}=d;this.latestValues=h,this.baseTarget={...h},this.initialValues=r.initial?{...h}:{},this.renderState=x,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=g,this.blockInitialAnimation=!!o,this.isControllingVariants=Ap(r),this.isVariantNode=JD(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:y,...w}=this.scrapeMotionValuesFromProps(r,{},this);for(const C in w){const _=w[C];h[C]!==void 0&&aa(_)&&_.set(h[C])}}mount(t){this.current=t,Eq.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),hk.current||vq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:$v.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Co(this.notifyUpdate),Co(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=cd.has(t);n&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",d=>{this.latestValues[t]=d,this.props.onUpdate&&Ur.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{i(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in qu){const r=qu[t];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):kn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<a4.length;n++){const i=a4[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,d=t[o];d&&(this.propEventSubscriptions[i]=this.on(i,d))}this.prevMotionValues=wq(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Hu(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(lD(n)||cD(n))?n=parseFloat(n):!LH(n)&&Ao.test(r)&&(n=qD(t,r)),this.setBaseTarget(t,aa(n)?n.get():n)),aa(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const o=G2(this.props,r,this.presenceContext?.custom);o&&(n=o[t])}if(r&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!aa(i)?i:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new S2),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){U2.render(this.render)}}class gk extends Nq{constructor(){super(...arguments),this.KeyframeResolver=NH}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;aa(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function pk(e,{style:t,vars:r},n,i){const o=e.style;let d;for(d in t)o[d]=t[d];i?.applyProjectionStyles(o,n);for(d in r)o.setProperty(d,r[d])}function Sq(e){return window.getComputedStyle(e)}class Cq extends gk{constructor(){super(...arguments),this.type="html",this.renderInstance=pk}readValueFromInstance(t,r){if(cd.has(r))return this.projection?.isProjecting?Lv(r):VV(t,r);{const n=Sq(t),i=(T2(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return mk(t,r)}build(t,r,n){H2(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return Y2(t,r,n)}}const yk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Aq(e,t,r,n){pk(e,t,void 0,n);for(const i in t.attrs)e.setAttribute(yk.has(i)?i:X2(i),t.attrs[i])}class Tq extends gk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=kn}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(cd.has(r)){const n=HD(r);return n&&n.default||0}return r=yk.has(r)?r:X2(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return ik(t,r,n)}build(t,r,n){rk(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,i){Aq(t,r,n,i)}mount(t){this.isSVGTag=ak(t.tagName),super.mount(t)}}const Oq=(e,t)=>$2(e)?new Tq(t):new Cq(t,{allowProjection:e!==N.Fragment});function Fu(e,t,r){const n=e.getProps();return G2(n,t,r!==void 0?r:n.custom,e)}const Gv=e=>Array.isArray(e);function _q(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Hu(r))}function Dq(e){return Gv(e)?e[e.length-1]||0:e}function kq(e,t){const r=Fu(e,t);let{transitionEnd:n={},transition:i={},...o}=r||{};o={...o,...n};for(const d in o){const g=Dq(o[d]);_q(e,d,g)}}function Mq(e){return!!(aa(e)&&e.add)}function Yv(e,t){const r=e.getValue("willChange");if(Mq(r))return r.add(t);if(!r&&hl.WillChange){const n=new hl.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function xk(e){return e.props[lk]}const Pq=e=>e!==null;function Rq(e,{repeat:t,repeatType:r="loop"},n){const i=e.filter(Pq),o=t&&r!=="loop"&&t%2===1?0:i.length-1;return i[o]}const Iq={type:"spring",stiffness:500,damping:25,restSpeed:10},Lq=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Bq={type:"keyframes",duration:.8},Fq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Uq=(e,{keyframes:t})=>t.length>2?Bq:cd.has(e)?e.startsWith("scale")?Lq(t[1]):Iq:Fq;function jq({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:o,repeatType:d,repeatDelay:g,from:h,elapsed:x,...y}){return!!Object.keys(y).length}const W2=(e,t,r,n={},i,o)=>d=>{const g=B2(n,e)||{},h=g.delay||n.delay||0;let{elapsed:x=0}=n;x=x-Ni(h);const y={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...g,delay:-x,onUpdate:C=>{t.set(C),g.onUpdate&&g.onUpdate(C)},onComplete:()=>{d(),g.onComplete&&g.onComplete()},name:e,motionValue:t,element:o?void 0:i};jq(g)||Object.assign(y,Uq(e,y)),y.duration&&(y.duration=Ni(y.duration)),y.repeatDelay&&(y.repeatDelay=Ni(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let w=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(zv(y),y.delay===0&&(w=!0)),(hl.instantAnimations||hl.skipAnimations)&&(w=!0,zv(y),y.delay=0),y.allowFlatten=!g.type&&!g.ease,w&&!o&&t.get()!==void 0){const C=Rq(y.keyframes,g);if(C!==void 0){Ur.update(()=>{y.onUpdate(C),y.onComplete()});return}}return g.isSync?new I2(y):new dH(y)};function zq({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function bk(e,t,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:d,...g}=t;n&&(o=n);const h=[],x=i&&e.animationState&&e.animationState.getState()[i];for(const y in g){const w=e.getValue(y,e.latestValues[y]??null),C=g[y];if(C===void 0||x&&zq(x,y))continue;const _={delay:r,...B2(o||{},y)},D=w.get();if(D!==void 0&&!w.isAnimating&&!Array.isArray(C)&&C===D&&!_.velocity)continue;let k=!1;if(window.MotionHandoffAnimation){const R=xk(e);if(R){const F=window.MotionHandoffAnimation(R,y,Ur);F!==null&&(_.startTime=F,k=!0)}}Yv(e,y),w.start(W2(y,w,C,e.shouldReduceMotion&&jD.has(y)?{type:!1}:_,e,k));const M=w.animation;M&&h.push(M)}return d&&Promise.all(h).then(()=>{Ur.update(()=>{d&&kq(e,d)})}),h}function vk(e,t,r,n=0,i=1){const o=Array.from(e).sort((x,y)=>x.sortNodePosition(y)).indexOf(t),d=e.size,g=(d-1)*n;return typeof r=="function"?r(o,d):i===1?o*n:g-o*n}function Xv(e,t,r={}){const n=Fu(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);const o=n?()=>Promise.all(bk(e,n,r)):()=>Promise.resolve(),d=e.variantChildren&&e.variantChildren.size?(h=0)=>{const{delayChildren:x=0,staggerChildren:y,staggerDirection:w}=i;return Vq(e,t,h,x,y,w,r)}:()=>Promise.resolve(),{when:g}=i;if(g){const[h,x]=g==="beforeChildren"?[o,d]:[d,o];return h().then(()=>x())}else return Promise.all([o(),d(r.delay)])}function Vq(e,t,r=0,n=0,i=0,o=1,d){const g=[];for(const h of e.variantChildren)h.notify("AnimationStart",t),g.push(Xv(h,t,{...d,delay:r+(typeof n=="function"?0:n)+vk(e.variantChildren,h,n,i,o)}).then(()=>h.notify("AnimationComplete",t)));return Promise.all(g)}function Hq(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(o=>Xv(e,o,r));n=Promise.all(i)}else if(typeof t=="string")n=Xv(e,t,r);else{const i=typeof t=="function"?Fu(e,t,r.custom):t;n=Promise.all(bk(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function Ek(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const qq=V2.length;function wk(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?wk(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<qq;r++){const n=V2[r],i=e.props[n];(zf(i)||i===!1)&&(t[n]=i)}return t}const $q=[...z2].reverse(),Gq=z2.length;function Yq(e){return t=>Promise.all(t.map(({animation:r,options:n})=>Hq(e,r,n)))}function Xq(e){let t=Yq(e),r=s4(),n=!0;const i=h=>(x,y)=>{const w=Fu(e,y,h==="exit"?e.presenceContext?.custom:void 0);if(w){const{transition:C,transitionEnd:_,...D}=w;x={...x,...D,..._}}return x};function o(h){t=h(e)}function d(h){const{props:x}=e,y=wk(e.parent)||{},w=[],C=new Set;let _={},D=1/0;for(let M=0;M<Gq;M++){const R=$q[M],F=r[R],I=x[R]!==void 0?x[R]:y[R],G=zf(I),U=R===h?F.isActive:null;U===!1&&(D=M);let z=I===y[R]&&I!==x[R]&&G;if(z&&n&&e.manuallyAnimateOnMount&&(z=!1),F.protectedKeys={..._},!F.isActive&&U===null||!I&&!F.prevProp||Cp(I)||typeof I=="boolean")continue;const L=Wq(F.prevProp,I);let H=L||R===h&&F.isActive&&!z&&G||M>D&&G,V=!1;const Q=Array.isArray(I)?I:[I];let Y=Q.reduce(i(R),{});U===!1&&(Y={});const{prevResolvedValues:X={}}=F,he={...X,...Y},xe=se=>{H=!0,C.has(se)&&(V=!0,C.delete(se)),F.needsAnimating[se]=!0;const Te=e.getValue(se);Te&&(Te.liveStyle=!1)};for(const se in he){const Te=Y[se],we=X[se];if(_.hasOwnProperty(se))continue;let te=!1;Gv(Te)&&Gv(we)?te=!Ek(Te,we):te=Te!==we,te?Te!=null?xe(se):C.add(se):Te!==void 0&&C.has(se)?xe(se):F.protectedKeys[se]=!0}F.prevProp=I,F.prevResolvedValues=Y,F.isActive&&(_={..._,...Y}),n&&e.blockInitialAnimation&&(H=!1);const ae=z&&L;H&&(!ae||V)&&w.push(...Q.map(se=>{const Te={type:R};if(typeof se=="string"&&n&&!ae&&e.manuallyAnimateOnMount&&e.parent){const{parent:we}=e,te=Fu(we,se);if(we.enteringChildren&&te){const{delayChildren:K}=te.transition||{};Te.delay=vk(we.enteringChildren,e,K)}}return{animation:se,options:Te}}))}if(C.size){const M={};if(typeof x.initial!="boolean"){const R=Fu(e,Array.isArray(x.initial)?x.initial[0]:x.initial);R&&R.transition&&(M.transition=R.transition)}C.forEach(R=>{const F=e.getBaseTarget(R),I=e.getValue(R);I&&(I.liveStyle=!0),M[R]=F??null}),w.push({animation:M})}let k=!!w.length;return n&&(x.initial===!1||x.initial===x.animate)&&!e.manuallyAnimateOnMount&&(k=!1),n=!1,k?t(w):Promise.resolve()}function g(h,x){if(r[h].isActive===x)return Promise.resolve();e.variantChildren?.forEach(w=>w.animationState?.setActive(h,x)),r[h].isActive=x;const y=d(h);for(const w in r)r[w].protectedKeys={};return y}return{animateChanges:d,setActive:g,setAnimateFunction:o,getState:()=>r,reset:()=>{r=s4()}}}function Wq(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Ek(t,e):!1}function ic(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function s4(){return{animate:ic(!0),whileInView:ic(),whileHover:ic(),whileTap:ic(),whileDrag:ic(),whileFocus:ic(),exit:ic()}}class ko{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Kq extends ko{constructor(t){super(t),t.animationState||(t.animationState=Xq(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Cp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Zq=0;class Qq extends ko{constructor(){super(...arguments),this.id=Zq++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);r&&!t&&i.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Jq={animation:{Feature:Kq},exit:{Feature:Qq}};function Hf(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function ym(e){return{point:{x:e.pageX,y:e.pageY}}}const e$=e=>t=>j2(t)&&e(t,ym(t));function Pf(e,t,r,n){return Hf(e,t,e$(r),n)}const Nk=1e-4,t$=1-Nk,r$=1+Nk,Sk=.01,n$=0-Sk,a$=0+Sk;function fa(e){return e.max-e.min}function s$(e,t,r){return Math.abs(e-t)<=r}function i4(e,t,r,n=.5){e.origin=n,e.originPoint=Yr(t.min,t.max,e.origin),e.scale=fa(r)/fa(t),e.translate=Yr(r.min,r.max,e.origin)-e.originPoint,(e.scale>=t$&&e.scale<=r$||isNaN(e.scale))&&(e.scale=1),(e.translate>=n$&&e.translate<=a$||isNaN(e.translate))&&(e.translate=0)}function Rf(e,t,r,n){i4(e.x,t.x,r.x,n?n.originX:void 0),i4(e.y,t.y,r.y,n?n.originY:void 0)}function l4(e,t,r){e.min=r.min+t.min,e.max=e.min+fa(t)}function i$(e,t,r){l4(e.x,t.x,r.x),l4(e.y,t.y,r.y)}function o4(e,t,r){e.min=t.min-r.min,e.max=e.min+fa(t)}function bg(e,t,r){o4(e.x,t.x,r.x),o4(e.y,t.y,r.y)}function ws(e){return[e("x"),e("y")]}const Ck=({current:e})=>e?e.ownerDocument.defaultView:null,c4=(e,t)=>Math.abs(e-t);function l$(e,t){const r=c4(e.x,t.x),n=c4(e.y,t.y);return Math.sqrt(r**2+n**2)}class Ak{constructor(t,r,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:d=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Ox(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,D=l$(C.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!D)return;const{point:k}=C,{timestamp:M}=Jn;this.history.push({...k,timestamp:M});const{onStart:R,onMove:F}=this.handlers;_||(R&&R(this.lastMoveEvent,C),this.startEvent=this.lastMoveEvent),F&&F(this.lastMoveEvent,C)},this.handlePointerMove=(C,_)=>{this.lastMoveEvent=C,this.lastMoveEventInfo=Tx(_,this.transformPagePoint),Ur.update(this.updatePoint,!0)},this.handlePointerUp=(C,_)=>{this.end();const{onEnd:D,onSessionEnd:k,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=Ox(C.type==="pointercancel"?this.lastMoveEventInfo:Tx(_,this.transformPagePoint),this.history);this.startEvent&&D&&D(C,R),k&&k(C,R)},!j2(t))return;this.dragSnapToOrigin=o,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=d,this.contextWindow=i||window;const g=ym(t),h=Tx(g,this.transformPagePoint),{point:x}=h,{timestamp:y}=Jn;this.history=[{...x,timestamp:y}];const{onSessionStart:w}=r;w&&w(t,Ox(h,this.history)),this.removeListeners=hm(Pf(this.contextWindow,"pointermove",this.handlePointerMove),Pf(this.contextWindow,"pointerup",this.handlePointerUp),Pf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Co(this.updatePoint)}}function Tx(e,t){return t?{point:t(e.point)}:e}function u4(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ox({point:e},t){return{point:e,delta:u4(e,Tk(t)),offset:u4(e,o$(t)),velocity:c$(t,.1)}}function o$(e){return e[0]}function Tk(e){return e[e.length-1]}function c$(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const i=Tk(e);for(;r>=0&&(n=e[r],!(i.timestamp-n.timestamp>Ni(t)));)r--;if(!n)return{x:0,y:0};const o=As(i.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const d={x:(i.x-n.x)/o,y:(i.y-n.y)/o};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function u$(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Yr(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Yr(r,e,n.max):Math.min(e,r)),e}function d4(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function d$(e,{top:t,left:r,bottom:n,right:i}){return{x:d4(e.x,r,i),y:d4(e.y,t,n)}}function f4(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function f$(e,t){return{x:f4(e.x,t.x),y:f4(e.y,t.y)}}function m$(e,t){let r=.5;const n=fa(e),i=fa(t);return i>n?r=Ff(t.min,t.max-n,e.min):n>i&&(r=Ff(e.min,e.max-i,t.min)),ml(0,1,r)}function h$(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Wv=.35;function g$(e=Wv){return e===!1?e=0:e===!0&&(e=Wv),{x:m4(e,"left","right"),y:m4(e,"top","bottom")}}function m4(e,t,r){return{min:h4(e,t),max:h4(e,r)}}function h4(e,t){return typeof e=="number"?e:e[t]||0}const p$=new WeakMap;class y${constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=kn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=w=>{const{dragSnapToOrigin:C}=this.getProps();C?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(ym(w).point)},d=(w,C)=>{const{drag:_,dragPropagation:D,onDragStart:k}=this.getProps();if(_&&!D&&(this.openDragLock&&this.openDragLock(),this.openDragLock=OH(_),!this.openDragLock))return;this.latestPointerEvent=w,this.latestPanInfo=C,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ws(R=>{let F=this.getAxisMotionValue(R).get()||0;if(Si.test(F)){const{projection:I}=this.visualElement;if(I&&I.layout){const G=I.layout.layoutBox[R];G&&(F=fa(G)*(parseFloat(F)/100))}}this.originPoint[R]=F}),k&&Ur.postRender(()=>k(w,C)),Yv(this.visualElement,"transform");const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},g=(w,C)=>{this.latestPointerEvent=w,this.latestPanInfo=C;const{dragPropagation:_,dragDirectionLock:D,onDirectionLock:k,onDrag:M}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:R}=C;if(D&&this.currentDirection===null){this.currentDirection=x$(R),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",C.point,R),this.updateAxis("y",C.point,R),this.visualElement.render(),M&&M(w,C)},h=(w,C)=>{this.latestPointerEvent=w,this.latestPanInfo=C,this.stop(w,C),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>ws(w=>this.getAnimationState(w)==="paused"&&this.getAxisMotionValue(w).animation?.play()),{dragSnapToOrigin:y}=this.getProps();this.panSession=new Ak(t,{onSessionStart:o,onStart:d,onMove:g,onSessionEnd:h,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:n,contextWindow:Ck(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,i=r||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!n)return;const{velocity:d}=i;this.startAnimation(d);const{onDragEnd:g}=this.getProps();g&&Ur.postRender(()=>g(n,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:i}=this.getProps();if(!n||!ch(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let d=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(d=u$(d,this.constraints[t],this.elastic[t])),o.set(d)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&Du(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=d$(n.layoutBox,t):this.constraints=!1,this.elastic=g$(r),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ws(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=h$(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Du(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=bq(n,i.root,this.visualElement.getTransformPagePoint());let d=f$(i.layout.layoutBox,o);if(r){const g=r(pq(d));this.hasMutatedConstraints=!!g,g&&(d=uk(g))}return d}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:o,dragSnapToOrigin:d,onDragTransitionEnd:g}=this.getProps(),h=this.constraints||{},x=ws(y=>{if(!ch(y,r,this.currentDirection))return;let w=h&&h[y]||{};d&&(w={min:0,max:0});const C=i?200:1e6,_=i?40:1e7,D={type:"inertia",velocity:n?t[y]:0,bounceStiffness:C,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...o,...w};return this.startAxisValueAnimation(y,D)});return Promise.all(x).then(g)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return Yv(this.visualElement,t),n.start(W2(t,n,0,r,this.visualElement,!1))}stopAnimation(){ws(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ws(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){ws(r=>{const{drag:n}=this.getProps();if(!ch(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(r);if(i&&i.layout){const{min:d,max:g}=i.layout.layoutBox[r];o.set(t[r]-Yr(d,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Du(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ws(d=>{const g=this.getAxisMotionValue(d);if(g&&this.constraints!==!1){const h=g.get();i[d]=m$({min:h,max:h},this.constraints[d])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ws(d=>{if(!ch(d,t,null))return;const g=this.getAxisMotionValue(d),{min:h,max:x}=this.constraints[d];g.set(Yr(h,x,i[d]))})}addListeners(){if(!this.visualElement.current)return;p$.set(this.visualElement,this);const t=this.visualElement.current,r=Pf(t,"pointerdown",h=>{const{drag:x,dragListener:y=!0}=this.getProps();x&&y&&this.start(h)}),n=()=>{const{dragConstraints:h}=this.getProps();Du(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ur.read(n);const d=Hf(window,"resize",()=>this.scalePositionWithinConstraints()),g=i.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:x})=>{this.isDragging&&x&&(ws(y=>{const w=this.getAxisMotionValue(y);w&&(this.originPoint[y]+=h[y].translate,w.set(w.get()+h[y].translate))}),this.visualElement.render())}));return()=>{d(),r(),o(),g&&g()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:d=Wv,dragMomentum:g=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:o,dragElastic:d,dragMomentum:g}}}function ch(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function x$(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class b$ extends ko{constructor(t){super(t),this.removeGroupControls=Os,this.removeListeners=Os,this.controls=new y$(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Os}unmount(){this.removeGroupControls(),this.removeListeners()}}const g4=e=>(t,r)=>{e&&Ur.postRender(()=>e(t,r))};class v$ extends ko{constructor(){super(...arguments),this.removePointerDownListener=Os}onPointerDown(t){this.session=new Ak(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ck(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:g4(t),onStart:g4(r),onMove:n,onEnd:(o,d)=>{delete this.session,i&&Ur.postRender(()=>i(o,d))}}}mount(){this.removePointerDownListener=Pf(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Kh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function p4(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const df={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(wt.test(e))e=parseFloat(e);else return e;const r=p4(e,t.target.x),n=p4(e,t.target.y);return`${r}% ${n}%`}},E$={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,i=Ao.parse(e);if(i.length>5)return n;const o=Ao.createTransformer(e),d=typeof i[0]!="number"?1:0,g=r.x.scale*t.x,h=r.y.scale*t.y;i[0+d]/=g,i[1+d]/=h;const x=Yr(g,h,.5);return typeof i[2+d]=="number"&&(i[2+d]/=x),typeof i[3+d]=="number"&&(i[3+d]/=x),o(i)}};let _x=!1;class w$ extends N.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:o}=t;qH(N$),o&&(r.group&&r.group.add(o),n&&n.register&&i&&n.register(o),_x&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Kh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:i,isPresent:o}=this.props,{projection:d}=n;return d&&(d.isPresent=o,_x=!0,i||t.layoutDependency!==r||r===void 0||t.isPresent!==o?d.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?d.promote():d.relegate()||Ur.postRender(()=>{const g=d.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),U2.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=t;_x=!0,i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ok(e){const[t,r]=BH(),n=N.useContext(iD);return _v.jsx(w$,{...e,layoutGroup:n,switchLayoutGroup:N.useContext(ok),isPresent:t,safeToRemove:r})}const N$={borderRadius:{...df,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:df,borderTopRightRadius:df,borderBottomLeftRadius:df,borderBottomRightRadius:df,boxShadow:E$};function S$(e,t,r){const n=aa(e)?e:Hu(e);return n.start(W2("",n,t,r)),n.animation}const C$=(e,t)=>e.depth-t.depth;class A${constructor(){this.children=[],this.isDirty=!1}add(t){v2(this.children,t),this.isDirty=!0}remove(t){E2(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(C$),this.isDirty=!1,this.children.forEach(t)}}function T$(e,t){const r=Da.now(),n=({timestamp:i})=>{const o=i-r;o>=t&&(Co(n),e(o-t))};return Ur.setup(n,!0),()=>Co(n)}const _k=["TopLeft","TopRight","BottomLeft","BottomRight"],O$=_k.length,y4=e=>typeof e=="string"?parseFloat(e):e,x4=e=>typeof e=="number"||wt.test(e);function _$(e,t,r,n,i,o){i?(e.opacity=Yr(0,r.opacity??1,D$(n)),e.opacityExit=Yr(t.opacity??1,0,k$(n))):o&&(e.opacity=Yr(t.opacity??1,r.opacity??1,n));for(let d=0;d<O$;d++){const g=`border${_k[d]}Radius`;let h=b4(t,g),x=b4(r,g);if(h===void 0&&x===void 0)continue;h||(h=0),x||(x=0),h===0||x===0||x4(h)===x4(x)?(e[g]=Math.max(Yr(y4(h),y4(x),n),0),(Si.test(x)||Si.test(h))&&(e[g]+="%")):e[g]=x}(t.rotate||r.rotate)&&(e.rotate=Yr(t.rotate||0,r.rotate||0,n))}function b4(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const D$=Dk(0,.5,yD),k$=Dk(.5,.95,Os);function Dk(e,t,r){return n=>n<e?0:n>t?1:r(Ff(e,t,n))}function v4(e,t){e.min=t.min,e.max=t.max}function $s(e,t){v4(e.x,t.x),v4(e.y,t.y)}function E4(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function w4(e,t,r,n,i){return e-=t,e=xg(e,1/r,n),i!==void 0&&(e=xg(e,1/i,n)),e}function M$(e,t=0,r=1,n=.5,i,o=e,d=e){if(Si.test(t)&&(t=parseFloat(t),t=Yr(d.min,d.max,t/100)-d.min),typeof t!="number")return;let g=Yr(o.min,o.max,n);e===o&&(g-=t),e.min=w4(e.min,t,r,g,i),e.max=w4(e.max,t,r,g,i)}function N4(e,t,[r,n,i],o,d){M$(e,t[r],t[n],t[i],t.scale,o,d)}const P$=["x","scaleX","originX"],R$=["y","scaleY","originY"];function S4(e,t,r,n){N4(e.x,t,P$,r?r.x:void 0,n?n.x:void 0),N4(e.y,t,R$,r?r.y:void 0,n?n.y:void 0)}function C4(e){return e.translate===0&&e.scale===1}function kk(e){return C4(e.x)&&C4(e.y)}function A4(e,t){return e.min===t.min&&e.max===t.max}function I$(e,t){return A4(e.x,t.x)&&A4(e.y,t.y)}function T4(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Mk(e,t){return T4(e.x,t.x)&&T4(e.y,t.y)}function O4(e){return fa(e.x)/fa(e.y)}function _4(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class L${constructor(){this.members=[]}add(t){v2(this.members,t),t.scheduleRender()}remove(t){if(E2(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(i=>t===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function B$(e,t,r){let n="";const i=e.x.translate/t.x,o=e.y.translate/t.y,d=r?.z||0;if((i||o||d)&&(n=`translate3d(${i}px, ${o}px, ${d}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:x,rotate:y,rotateX:w,rotateY:C,skewX:_,skewY:D}=r;x&&(n=`perspective(${x}px) ${n}`),y&&(n+=`rotate(${y}deg) `),w&&(n+=`rotateX(${w}deg) `),C&&(n+=`rotateY(${C}deg) `),_&&(n+=`skewX(${_}deg) `),D&&(n+=`skewY(${D}deg) `)}const g=e.x.scale*t.x,h=e.y.scale*t.y;return(g!==1||h!==1)&&(n+=`scale(${g}, ${h})`),n||"none"}const Dx=["","X","Y","Z"],F$=1e3;let U$=0;function kx(e,t,r,n){const{latestValues:i}=t;i[e]&&(r[e]=i[e],t.setStaticValue(e,0),n&&(n[e]=0))}function Pk(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=xk(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Ur,!(i||o))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&Pk(n)}function Rk({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(d={},g=t?.()){this.id=U$++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(V$),this.nodes.forEach(G$),this.nodes.forEach(Y$),this.nodes.forEach(H$)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new A$)}addEventListener(d,g){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new S2),this.eventHandlers.get(d).add(g)}notifyListeners(d,...g){const h=this.eventHandlers.get(d);h&&h.notify(...g)}hasListeners(d){return this.eventHandlers.has(d)}mount(d){if(this.instance)return;this.isSVG=WD(d)&&!RH(d),this.instance=d;const{layoutId:g,layout:h,visualElement:x}=this.options;if(x&&!x.current&&x.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||g)&&(this.isLayoutDirty=!0),e){let y,w=0;const C=()=>this.root.updateBlockedByResize=!1;Ur.read(()=>{w=window.innerWidth}),e(d,()=>{const _=window.innerWidth;_!==w&&(w=_,this.root.updateBlockedByResize=!0,y&&y(),y=T$(C,250),Kh.hasAnimatedSinceResize&&(Kh.hasAnimatedSinceResize=!1,this.nodes.forEach(M4)))})}g&&this.root.registerSharedNode(g,this),this.options.animate!==!1&&x&&(g||h)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:w,hasRelativeLayoutChanged:C,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const D=this.options.transition||x.getDefaultTransition()||Q$,{onLayoutAnimationStart:k,onLayoutAnimationComplete:M}=x.getProps(),R=!this.targetLayout||!Mk(this.targetLayout,_),F=!w&&C;if(this.options.layoutRoot||this.resumeFrom||F||w&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...B2(D,"layout"),onPlay:k,onComplete:M};(x.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(y,F)}else w||M4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Co(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(X$),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Pk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const w=this.path[y];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:g,layout:h}=this.options;if(g===void 0&&!h)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(D4);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(k4);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach($$),this.nodes.forEach(j$),this.nodes.forEach(z$)):this.nodes.forEach(k4),this.clearAllSnapshots();const g=Da.now();Jn.delta=ml(0,1e3/60,g-Jn.timestamp),Jn.timestamp=g,Jn.isProcessing=!0,bx.update.process(Jn),bx.preRender.process(Jn),bx.render.process(Jn),Jn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,U2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(q$),this.sharedNodes.forEach(W$)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ur.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ur.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!fa(this.snapshot.measuredBox.x)&&!fa(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=kn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let g=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(g=!1),g&&this.instance){const h=n(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:h,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!i)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,g=this.projectionDelta&&!kk(this.projectionDelta),h=this.getTransformTemplate(),x=h?h(this.latestValues,""):void 0,y=x!==this.prevTransformTemplateValue;d&&this.instance&&(g||cc(this.latestValues)||y)&&(i(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const g=this.measurePageBox();let h=this.removeElementScroll(g);return d&&(h=this.removeTransform(h)),J$(h),{animationId:this.root.animationId,measuredBox:g,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:d}=this.options;if(!d)return kn();const g=d.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(eG))){const{scroll:x}=this.root;x&&(ku(g.x,x.offset.x),ku(g.y,x.offset.y))}return g}removeElementScroll(d){const g=kn();if($s(g,d),this.scroll?.wasRoot)return g;for(let h=0;h<this.path.length;h++){const x=this.path[h],{scroll:y,options:w}=x;x!==this.root&&y&&w.layoutScroll&&(y.wasRoot&&$s(g,d),ku(g.x,y.offset.x),ku(g.y,y.offset.y))}return g}applyTransform(d,g=!1){const h=kn();$s(h,d);for(let x=0;x<this.path.length;x++){const y=this.path[x];!g&&y.options.layoutScroll&&y.scroll&&y!==y.root&&Mu(h,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),cc(y.latestValues)&&Mu(h,y.latestValues)}return cc(this.latestValues)&&Mu(h,this.latestValues),h}removeTransform(d){const g=kn();$s(g,d);for(let h=0;h<this.path.length;h++){const x=this.path[h];if(!x.instance||!cc(x.latestValues))continue;Hv(x.latestValues)&&x.updateSnapshot();const y=kn(),w=x.measurePageBox();$s(y,w),S4(g,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,y)}return cc(this.latestValues)&&S4(g,this.latestValues),g}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){const g=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=g.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=g.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=g.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==g;if(!(d||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:w}=this.options;if(!this.layout||!(y||w))return;this.resolvedRelativeTargetAt=Jn.timestamp;const C=this.getClosestProjectingParent();C&&this.linkedParentVersion!==C.layoutVersion&&!C.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(C&&C.layout?this.createRelativeTarget(C,this.layout.layoutBox,C.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=kn(),this.targetWithTransforms=kn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$s(this.target,this.layout.layoutBox),fk(this.target,this.targetDelta)):$s(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,C&&!!C.resumingFrom==!!this.resumingFrom&&!C.options.layoutScroll&&C.target&&this.animationProgress!==1?this.createRelativeTarget(C,this.target,C.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Hv(this.parent.latestValues)||dk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(d,g,h){this.relativeParent=d,this.linkedParentVersion=d.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kn(),this.relativeTargetOrigin=kn(),bg(this.relativeTargetOrigin,g,h),$s(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const d=this.getLead(),g=!!this.resumingFrom||this!==d;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),g&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Jn.timestamp&&(h=!1),h)return;const{layout:x,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||y))return;$s(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,C=this.treeScale.y;xq(this.layoutCorrected,this.treeScale,this.path,g),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=kn());const{target:_}=d;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(E4(this.prevProjectionDelta.x,this.projectionDelta.x),E4(this.prevProjectionDelta.y,this.projectionDelta.y)),Rf(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==C||!_4(this.projectionDelta.x,this.prevProjectionDelta.x)||!_4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){if(this.options.visualElement?.scheduleRender(),d){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Pu(),this.projectionDelta=Pu(),this.projectionDeltaWithTransform=Pu()}setAnimationOrigin(d,g=!1){const h=this.snapshot,x=h?h.latestValues:{},y={...this.latestValues},w=Pu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const C=kn(),_=h?h.source:void 0,D=this.layout?this.layout.source:void 0,k=_!==D,M=this.getStack(),R=!M||M.members.length<=1,F=!!(k&&!R&&this.options.crossfade===!0&&!this.path.some(Z$));this.animationProgress=0;let I;this.mixTargetDelta=G=>{const U=G/1e3;P4(w.x,d.x,U),P4(w.y,d.y,U),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(bg(C,this.layout.layoutBox,this.relativeParent.layout.layoutBox),K$(this.relativeTarget,this.relativeTargetOrigin,C,U),I&&I$(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=kn()),$s(I,this.relativeTarget)),k&&(this.animationValues=y,_$(y,x,this.latestValues,U,F,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Co(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ur.update(()=>{Kh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Hu(0)),this.currentAnimation=S$(this.motionValue,[0,1e3],{...d,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),d.onUpdate&&d.onUpdate(g)},onStop:()=>{},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(F$),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:g,target:h,layout:x,latestValues:y}=d;if(!(!g||!h||!x)){if(this!==d&&this.layout&&x&&Ik(this.options.animationType,this.layout.layoutBox,x.layoutBox)){h=this.target||kn();const w=fa(this.layout.layoutBox.x);h.x.min=d.target.x.min,h.x.max=h.x.min+w;const C=fa(this.layout.layoutBox.y);h.y.min=d.target.y.min,h.y.max=h.y.min+C}$s(g,h),Mu(g,y),Rf(this.projectionDeltaWithTransform,this.layoutCorrected,g,y)}}registerSharedNode(d,g){this.sharedNodes.has(d)||this.sharedNodes.set(d,new L$),this.sharedNodes.get(d).add(g);const x=g.options.initialPromotionConfig;g.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(g):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){const{layoutId:d}=this.options;return d?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:d}=this.options;return d?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:g,preserveFollowOpacity:h}={}){const x=this.getStack();x&&x.promote(this,h),d&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let g=!1;const{latestValues:h}=d;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(g=!0),!g)return;const x={};h.z&&kx("z",d,x,this.animationValues);for(let y=0;y<Dx.length;y++)kx(`rotate${Dx[y]}`,d,x,this.animationValues),kx(`skew${Dx[y]}`,d,x,this.animationValues);d.render();for(const y in x)d.setStaticValue(y,x[y]),this.animationValues&&(this.animationValues[y]=x[y]);d.scheduleRender()}applyProjectionStyles(d,g){if(!this.instance||this.isSVG)return;if(!this.isVisible){d.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,d.visibility="",d.opacity="",d.pointerEvents=Wh(g?.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(d.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,d.pointerEvents=Wh(g?.pointerEvents)||""),this.hasProjected&&!cc(this.latestValues)&&(d.transform=h?h({},""):"none",this.hasProjected=!1);return}d.visibility="";const y=x.animationValues||x.latestValues;this.applyTransformsToTarget();let w=B$(this.projectionDeltaWithTransform,this.treeScale,y);h&&(w=h(y,w)),d.transform=w;const{x:C,y:_}=this.projectionDelta;d.transformOrigin=`${C.origin*100}% ${_.origin*100}% 0`,x.animationValues?d.opacity=x===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:d.opacity=x===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const D in Vf){if(y[D]===void 0)continue;const{correct:k,applyTo:M,isCSSVariable:R}=Vf[D],F=w==="none"?y[D]:k(y[D],x);if(M){const I=M.length;for(let G=0;G<I;G++)d[M[G]]=F}else R?this.options.visualElement.renderState.vars[D]=F:d[D]=F}this.options.layoutId&&(d.pointerEvents=x===this?Wh(g?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>d.currentAnimation?.stop()),this.root.nodes.forEach(D4),this.root.sharedNodes.clear()}}}function j$(e){e.updateLayout()}function z$(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?ws(y=>{const w=o?t.measuredBox[y]:t.layoutBox[y],C=fa(w);w.min=r[y].min,w.max=w.min+C}):Ik(i,t.layoutBox,r)&&ws(y=>{const w=o?t.measuredBox[y]:t.layoutBox[y],C=fa(r[y]);w.max=w.min+C,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[y].max=e.relativeTarget[y].min+C)});const d=Pu();Rf(d,r,t.layoutBox);const g=Pu();o?Rf(g,e.applyTransform(n,!0),t.measuredBox):Rf(g,r,t.layoutBox);const h=!kk(d);let x=!1;if(!e.resumeFrom){const y=e.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:w,layout:C}=y;if(w&&C){const _=kn();bg(_,t.layoutBox,w.layoutBox);const D=kn();bg(D,r,C.layoutBox),Mk(_,D)||(x=!0),y.options.layoutRoot&&(e.relativeTarget=D,e.relativeTargetOrigin=_,e.relativeParent=y)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:g,layoutDelta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:x})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function V$(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function H$(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function q$(e){e.clearSnapshot()}function D4(e){e.clearMeasurements()}function k4(e){e.isLayoutDirty=!1}function $$(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function M4(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function G$(e){e.resolveTargetDelta()}function Y$(e){e.calcProjection()}function X$(e){e.resetSkewAndRotation()}function W$(e){e.removeLeadSnapshot()}function P4(e,t,r){e.translate=Yr(t.translate,0,r),e.scale=Yr(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function R4(e,t,r,n){e.min=Yr(t.min,r.min,n),e.max=Yr(t.max,r.max,n)}function K$(e,t,r,n){R4(e.x,t.x,r.x,n),R4(e.y,t.y,r.y,n)}function Z$(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Q$={duration:.45,ease:[.4,0,.1,1]},I4=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),L4=I4("applewebkit/")&&!I4("chrome/")?Math.round:Os;function B4(e){e.min=L4(e.min),e.max=L4(e.max)}function J$(e){B4(e.x),B4(e.y)}function Ik(e,t,r){return e==="position"||e==="preserve-aspect"&&!s$(O4(t),O4(r),.2)}function eG(e){return e!==e.root&&e.scroll?.wasRoot}const tG=Rk({attachResizeListener:(e,t)=>Hf(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Mx={current:void 0},Lk=Rk({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Mx.current){const e=new tG({});e.mount(window),e.setOptions({layoutScroll:!0}),Mx.current=e}return Mx.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),rG={pan:{Feature:v$},drag:{Feature:b$,ProjectionNode:Lk,MeasureLayout:Ok}};function F4(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,o=n[i];o&&Ur.postRender(()=>o(t,ym(t)))}class nG extends ko{mount(){const{current:t}=this.node;t&&(this.unmount=_H(t,(r,n)=>(F4(this.node,n,"Start"),i=>F4(this.node,i,"End"))))}unmount(){}}class aG extends ko{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=hm(Hf(this.node.current,"focus",()=>this.onFocus()),Hf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function U4(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),o=n[i];o&&Ur.postRender(()=>o(t,ym(t)))}class sG extends ko{mount(){const{current:t}=this.node;t&&(this.unmount=PH(t,(r,n)=>(U4(this.node,n,"Start"),(i,{success:o})=>U4(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Kv=new WeakMap,Px=new WeakMap,iG=e=>{const t=Kv.get(e.target);t&&t(e)},lG=e=>{e.forEach(iG)};function oG({root:e,...t}){const r=e||document;Px.has(r)||Px.set(r,{});const n=Px.get(r),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(lG,{root:e,...t})),n[i]}function cG(e,t,r){const n=oG(t);return Kv.set(e,r),n.observe(e),()=>{Kv.delete(e),n.unobserve(e)}}const uG={some:0,all:1};class dG extends ko{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:o}=t,d={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:uG[i]},g=h=>{const{isIntersecting:x}=h;if(this.isInView===x||(this.isInView=x,o&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:y,onViewportLeave:w}=this.node.getProps(),C=x?y:w;C&&C(h)};return cG(this.node.current,d,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(fG(t,r))&&this.startObserver()}unmount(){}}function fG({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const mG={inView:{Feature:dG},tap:{Feature:sG},focus:{Feature:aG},hover:{Feature:nG}},hG={layout:{ProjectionNode:Lk,MeasureLayout:Ok}},gG={...Jq,...mG,...rG,...hG},Bk=gq(gG,Oq),pG=[{value:"lifetime",label:"All Time",icon:""},{value:"last12Months",label:"12 Months",icon:"12M"},{value:"last6Months",label:"6 Months",icon:"6M"},{value:"last3Months",label:"3 Months",icon:"3M"},{value:"lastMonth",label:"Last Month",icon:"1M"},{value:"thisMonth",label:"This Month",icon:"TM"}],yG=({selected:e,onChange:t})=>a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-2"},a.createElement("div",{className:"flex flex-wrap gap-2"},pG.map(r=>a.createElement(Bk.button,{key:r.value,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(r.value),className:`
              px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200
              ${e===r.value?"bg-gray-800 text-white shadow-md":"bg-gray-50 text-gray-700 hover:bg-gray-100"}
            `},a.createElement("span",{className:"hidden sm:inline"},r.label),a.createElement("span",{className:"sm:hidden font-semibold"},r.icon)))));function xG(e){return Lt({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"},child:[]}]})(e)}function bG(e){return Lt({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"},child:[]},{tag:"path",attr:{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"},child:[]}]})(e)}const Br=({title:e,value:t,subtitle:r,icon:n,trend:i,trendDirection:o="neutral",bgColor:d="bg-white",iconColor:g="text-gray-800",children:h,loading:x=!1})=>{const y={up:"text-green-600 bg-green-50",down:"text-red-600 bg-red-50",neutral:"text-gray-600 bg-gray-50"};return x?a.createElement("div",{className:`${d} rounded-lg shadow-sm border border-gray-100 p-4 animate-pulse`},a.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-3"}),a.createElement("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),a.createElement("div",{className:"h-2 bg-gray-200 rounded w-1/3"})):a.createElement(Bk.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`${d} rounded-lg shadow-sm hover:shadow-md transition-all duration-200 border border-gray-100 p-4`},a.createElement("div",{className:"flex items-start justify-between mb-2"},a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-xs font-medium text-gray-600 mb-1 uppercase tracking-wide"},e),a.createElement("h3",{className:"text-xl font-bold text-gray-900 truncate"},t),r&&a.createElement("p",{className:"text-xs text-gray-500 mt-0.5 truncate"},r)),n&&a.createElement("div",{className:`${g} bg-opacity-10 p-2 rounded-lg flex-shrink-0 ml-2`},n)),i&&a.createElement("div",{className:"flex items-center gap-2"},a.createElement("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${y[o]}`},i),a.createElement("span",{className:"text-xs text-gray-500"},"vs last period")),h&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-100"},h))},vG=async()=>Xe(Ye.get("/web/analytics/dashboard")),Cs=e=>!e&&e!==0?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),$t=e=>!e&&e!==0?"0":e>=1e7?`${(e/1e7).toFixed(1)}Cr`:e>=1e5?`${(e/1e5).toFixed(1)}L`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString(),EG=e=>{if(!e)return"N/A";const t=new Date(e);return new Intl.DateTimeFormat("en-IN",{day:"numeric",month:"short",year:"numeric"}).format(t)},wG=({data:e,loading:t})=>{if(!e)return a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},[1,2,3,4].map(o=>a.createElement(Br,{key:o,loading:!0})));const{email:r,whatsapp:n,totalCommunications:i}=e;return a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("h2",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Communication Analytics"),a.createElement("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-green-50 px-2 py-1 rounded-full border border-green-200"},a.createElement("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),a.createElement("span",null,"Real-time"))),a.createElement("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3"},a.createElement(Br,{title:"Total Communications",value:$t(i),subtitle:"All channels combined",icon:a.createElement(xG,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:t}),a.createElement(Br,{title:"Email Messages",value:$t(r.total),subtitle:`${r.successRate} success rate`,icon:a.createElement(bG,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:t}),a.createElement(Br,{title:"WhatsApp Messages",value:$t(n.total),subtitle:`${n.successRate} success rate`,icon:a.createElement("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})),iconColor:"text-green-600",loading:t}),a.createElement(Br,{title:"Overall Success Rate",value:i>0?((r.successful+n.successful)/i*100).toFixed(1)+"%":"0%",subtitle:"Across all channels",icon:a.createElement(So,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:t})))};function NG(e){return Lt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 32C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48H48zm0 32h106c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H38c-3.3 0-6-2.7-6-6V80c0-8.8 7.2-16 16-16zm426 96H38c-3.3 0-6-2.7-6-6v-36c0-3.3 2.7-6 6-6h138l30.2-45.3c1.1-1.7 3-2.7 5-2.7H464c8.8 0 16 7.2 16 16v74c0 3.3-2.7 6-6 6zM256 424c-66.2 0-120-53.8-120-120s53.8-120 120-120 120 53.8 120 120-53.8 120-120 120zm0-208c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm-48 104c-8.8 0-16-7.2-16-16 0-35.3 28.7-64 64-64 8.8 0 16 7.2 16 16s-7.2 16-16 16c-17.6 0-32 14.4-32 32 0 8.8-7.2 16-16 16z"},child:[]}]})(e)}function Fk(e){return Lt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(e)}function SG(e){return Lt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 174.8l-39.6-39.6c-9.4-9.4-24.6-9.4-33.9 0L192 374.7 80.6 263.2c-9.4-9.4-24.6-9.4-33.9 0L7 302.9c-9.4 9.4-9.4 24.6 0 34L175 505c9.4 9.4 24.6 9.4 33.9 0l296-296.2c9.4-9.5 9.4-24.7.1-34zm-324.3 106c6.2 6.3 16.4 6.3 22.6 0l208-208.2c6.2-6.3 6.2-16.4 0-22.6L366.1 4.7c-6.2-6.3-16.4-6.3-22.6 0L192 156.2l-55.4-55.5c-6.2-6.3-16.4-6.3-22.6 0L68.7 146c-6.2 6.3-6.2 16.4 0 22.6l112 112.2z"},child:[]}]})(e)}function Zv(e){return Lt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"},child:[]}]})(e)}function Qv(e){return Lt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function ff(e){return Lt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M223.75 130.75L154.62 15.54A31.997 31.997 0 0 0 127.18 0H16.03C3.08 0-4.5 14.57 2.92 25.18l111.27 158.96c29.72-27.77 67.52-46.83 109.56-53.39zM495.97 0H384.82c-11.24 0-21.66 5.9-27.44 15.54l-69.13 115.21c42.04 6.56 79.84 25.62 109.56 53.38L509.08 25.18C516.5 14.57 508.92 0 495.97 0zM256 160c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm92.52 157.26l-37.93 36.96 8.97 52.22c1.6 9.36-8.26 16.51-16.65 12.09L256 393.88l-46.9 24.65c-8.4 4.45-18.25-2.74-16.65-12.09l8.97-52.22-37.93-36.96c-6.82-6.64-3.05-18.23 6.35-19.59l52.43-7.64 23.43-47.52c2.11-4.28 6.19-6.39 10.28-6.39 4.11 0 8.22 2.14 10.33 6.39l23.43 47.52 52.43 7.64c9.4 1.36 13.17 12.95 6.35 19.59z"},child:[]}]})(e)}function vg(e){return Lt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M128 160h320v192H128V160zm400 96c0 26.51 21.49 48 48 48v96c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48v-96c26.51 0 48-21.49 48-48s-21.49-48-48-48v-96c0-26.51 21.49-48 48-48h480c26.51 0 48 21.49 48 48v96c-26.51 0-48 21.49-48 48zm-48-104c0-13.255-10.745-24-24-24H120c-13.255 0-24 10.745-24 24v208c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V152z"},child:[]}]})(e)}function CG(e){return Lt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function Uk(e){return Lt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}const AG=({usersData:e,adminsData:t,loading:r})=>a.createElement("div",{className:"space-y-4"},a.createElement("h2",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Users & Admins"),a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4"},e&&a.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},a.createElement("div",{className:"flex items-start justify-between mb-3"},a.createElement("div",null,a.createElement("h3",{className:"text-xs font-medium text-gray-600 mb-1"},"Total Users"),a.createElement("p",{className:"text-3xl font-bold text-gray-900"},$t(e.total))),a.createElement("div",{className:"p-2 bg-blue-50 rounded-lg"},a.createElement(Uk,{className:"w-6 h-6 text-gray-800"}))),e.growth&&a.createElement("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-50 border border-green-200 mb-3"},a.createElement("span",{className:"text-xs font-bold text-green-700"},e.growth),a.createElement("span",{className:"text-xs text-gray-600"},"growth")),a.createElement("div",{className:"grid grid-cols-2 gap-2 mt-3"},a.createElement("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-3 rounded-lg border border-green-100"},a.createElement("div",{className:"flex items-center gap-1.5 mb-1"},a.createElement(CG,{className:"w-3 h-3 text-green-600"}),a.createElement("p",{className:"text-xs font-medium text-gray-600"},"This Month")),a.createElement("p",{className:"text-xl font-bold text-green-700"},$t(e.thisMonth))),a.createElement("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200"},a.createElement("p",{className:"text-xs font-medium text-gray-600 mb-1"},"Last Month"),a.createElement("p",{className:"text-xl font-bold text-gray-900"},$t(e.lastMonth))))),t&&a.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},a.createElement("div",{className:"flex items-start justify-between mb-3"},a.createElement("div",null,a.createElement("h3",{className:"text-xs font-medium text-gray-600 mb-1"},"Total Admins"),a.createElement("p",{className:"text-3xl font-bold text-gray-900"},$t(t.total))),a.createElement("div",{className:"p-2 bg-purple-50 rounded-lg"},a.createElement(az,{className:"w-6 h-6 text-purple-600"}))),a.createElement("div",{className:"flex items-center gap-2 mb-3"},a.createElement("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-50 border border-green-200"},a.createElement(uz,{className:"w-3 h-3 text-green-600"}),a.createElement("span",{className:"text-xs font-bold text-gray-900"},t.active),a.createElement("span",{className:"text-xs text-gray-600"},"active")),a.createElement("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gray-100 border border-gray-200"},a.createElement("span",{className:"text-xs font-bold text-gray-900"},t.inactive),a.createElement("span",{className:"text-xs text-gray-600"},"inactive"))),t.byRole&&Object.keys(t.byRole).length>0&&a.createElement("div",{className:"space-y-1.5 mt-3 pt-3 border-t border-gray-200"},a.createElement("p",{className:"text-xs font-semibold text-gray-600 uppercase mb-1.5"},"By Role"),Object.entries(t.byRole).map(([n,i])=>a.createElement("div",{key:n,className:"flex items-center justify-between text-xs p-2 rounded-lg bg-purple-50 hover:bg-purple-100 transition-colors"},a.createElement("span",{className:"font-medium text-gray-900 capitalize"},n.replace("_"," ")),a.createElement("span",{className:"font-bold text-purple-700"},i)))))));var TG=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function K2(e){if(typeof e!="string")return!1;var t=TG;return t.includes(e)}var OG=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],_G=new Set(OG);function jk(e){return typeof e!="string"?!1:_G.has(e)}function zk(e){return typeof e=="string"&&e.startsWith("data-")}function $u(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(jk(r)||zk(r))&&(t[r]=e[r]);return t}function Jv(e){if(e==null)return null;if(N.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return $u(t)}return typeof e=="object"&&!Array.isArray(e)?$u(e):null}function Ds(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(jk(r)||zk(r)||K2(r))&&(t[r]=e[r]);return t}var DG=["children","width","height","viewBox","className","style","title","desc"];function eE(){return eE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eE.apply(null,arguments)}function kG(e,t){if(e==null)return{};var r,n,i=MG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function MG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Z2=N.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:o,className:d,style:g,title:h,desc:x}=e,y=kG(e,DG),w=o||{width:n,height:i,x:0,y:0},C=fn("recharts-surface",d);return N.createElement("svg",eE({},Ds(y),{className:C,width:n,height:i,style:g,viewBox:"".concat(w.x," ").concat(w.y," ").concat(w.width," ").concat(w.height),ref:t}),N.createElement("title",null,h),N.createElement("desc",null,x),r)}),PG=["children","className"];function tE(){return tE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tE.apply(null,arguments)}function RG(e,t){if(e==null)return{};var r,n,i=IG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function IG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var To=N.forwardRef((e,t)=>{var{children:r,className:n}=e,i=RG(e,PG),o=fn("recharts-layer",n);return N.createElement("g",tE({className:o},Ds(i),{ref:t}),r)}),Vk=N.createContext(null),LG=()=>N.useContext(Vk);function Nr(e){return function(){return e}}const Hk=Math.cos,Eg=Math.sin,ii=Math.sqrt,wg=Math.PI,Tp=2*wg,rE=Math.PI,nE=2*rE,uc=1e-6,BG=nE-uc;function qk(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function FG(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return qk;const r=10**t;return function(n){this._+=n[0];for(let i=1,o=n.length;i<o;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class UG{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?qk:FG(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,o,d){this._append`C${+t},${+r},${+n},${+i},${this._x1=+o},${this._y1=+d}`}arcTo(t,r,n,i,o){if(t=+t,r=+r,n=+n,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let d=this._x1,g=this._y1,h=n-t,x=i-r,y=d-t,w=g-r,C=y*y+w*w;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(C>uc)if(!(Math.abs(w*h-x*y)>uc)||!o)this._append`L${this._x1=t},${this._y1=r}`;else{let _=n-d,D=i-g,k=h*h+x*x,M=_*_+D*D,R=Math.sqrt(k),F=Math.sqrt(C),I=o*Math.tan((rE-Math.acos((k+C-M)/(2*R*F)))/2),G=I/F,U=I/R;Math.abs(G-1)>uc&&this._append`L${t+G*y},${r+G*w}`,this._append`A${o},${o},0,0,${+(w*_>y*D)},${this._x1=t+U*h},${this._y1=r+U*x}`}}arc(t,r,n,i,o,d){if(t=+t,r=+r,n=+n,d=!!d,n<0)throw new Error(`negative radius: ${n}`);let g=n*Math.cos(i),h=n*Math.sin(i),x=t+g,y=r+h,w=1^d,C=d?i-o:o-i;this._x1===null?this._append`M${x},${y}`:(Math.abs(this._x1-x)>uc||Math.abs(this._y1-y)>uc)&&this._append`L${x},${y}`,n&&(C<0&&(C=C%nE+nE),C>BG?this._append`A${n},${n},0,1,${w},${t-g},${r-h}A${n},${n},0,1,${w},${this._x1=x},${this._y1=y}`:C>uc&&this._append`A${n},${n},0,${+(C>=rE)},${w},${this._x1=t+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Q2(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new UG(t)}function J2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $k(e){this._context=e}$k.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Op(e){return new $k(e)}function Gk(e){return e[0]}function Yk(e){return e[1]}function Xk(e,t){var r=Nr(!0),n=null,i=Op,o=null,d=Q2(g);e=typeof e=="function"?e:e===void 0?Gk:Nr(e),t=typeof t=="function"?t:t===void 0?Yk:Nr(t);function g(h){var x,y=(h=J2(h)).length,w,C=!1,_;for(n==null&&(o=i(_=d())),x=0;x<=y;++x)!(x<y&&r(w=h[x],x,h))===C&&((C=!C)?o.lineStart():o.lineEnd()),C&&o.point(+e(w,x,h),+t(w,x,h));if(_)return o=null,_+""||null}return g.x=function(h){return arguments.length?(e=typeof h=="function"?h:Nr(+h),g):e},g.y=function(h){return arguments.length?(t=typeof h=="function"?h:Nr(+h),g):t},g.defined=function(h){return arguments.length?(r=typeof h=="function"?h:Nr(!!h),g):r},g.curve=function(h){return arguments.length?(i=h,n!=null&&(o=i(n)),g):i},g.context=function(h){return arguments.length?(h==null?n=o=null:o=i(n=h),g):n},g}function uh(e,t,r){var n=null,i=Nr(!0),o=null,d=Op,g=null,h=Q2(x);e=typeof e=="function"?e:e===void 0?Gk:Nr(+e),t=typeof t=="function"?t:Nr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Yk:Nr(+r);function x(w){var C,_,D,k=(w=J2(w)).length,M,R=!1,F,I=new Array(k),G=new Array(k);for(o==null&&(g=d(F=h())),C=0;C<=k;++C){if(!(C<k&&i(M=w[C],C,w))===R)if(R=!R)_=C,g.areaStart(),g.lineStart();else{for(g.lineEnd(),g.lineStart(),D=C-1;D>=_;--D)g.point(I[D],G[D]);g.lineEnd(),g.areaEnd()}R&&(I[C]=+e(M,C,w),G[C]=+t(M,C,w),g.point(n?+n(M,C,w):I[C],r?+r(M,C,w):G[C]))}if(F)return g=null,F+""||null}function y(){return Xk().defined(i).curve(d).context(o)}return x.x=function(w){return arguments.length?(e=typeof w=="function"?w:Nr(+w),n=null,x):e},x.x0=function(w){return arguments.length?(e=typeof w=="function"?w:Nr(+w),x):e},x.x1=function(w){return arguments.length?(n=w==null?null:typeof w=="function"?w:Nr(+w),x):n},x.y=function(w){return arguments.length?(t=typeof w=="function"?w:Nr(+w),r=null,x):t},x.y0=function(w){return arguments.length?(t=typeof w=="function"?w:Nr(+w),x):t},x.y1=function(w){return arguments.length?(r=w==null?null:typeof w=="function"?w:Nr(+w),x):r},x.lineX0=x.lineY0=function(){return y().x(e).y(t)},x.lineY1=function(){return y().x(e).y(r)},x.lineX1=function(){return y().x(n).y(t)},x.defined=function(w){return arguments.length?(i=typeof w=="function"?w:Nr(!!w),x):i},x.curve=function(w){return arguments.length?(d=w,o!=null&&(g=d(o)),x):d},x.context=function(w){return arguments.length?(w==null?o=g=null:g=d(o=w),x):o},x}class Wk{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function jG(e){return new Wk(e,!0)}function zG(e){return new Wk(e,!1)}const ew={draw(e,t){const r=ii(t/wg);e.moveTo(r,0),e.arc(0,0,r,0,Tp)}},VG={draw(e,t){const r=ii(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Kk=ii(1/3),HG=Kk*2,qG={draw(e,t){const r=ii(t/HG),n=r*Kk;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},$G={draw(e,t){const r=ii(t),n=-r/2;e.rect(n,n,r,r)}},GG=.8908130915292852,Zk=Eg(wg/10)/Eg(7*wg/10),YG=Eg(Tp/10)*Zk,XG=-Hk(Tp/10)*Zk,WG={draw(e,t){const r=ii(t*GG),n=YG*r,i=XG*r;e.moveTo(0,-r),e.lineTo(n,i);for(let o=1;o<5;++o){const d=Tp*o/5,g=Hk(d),h=Eg(d);e.lineTo(h*r,-g*r),e.lineTo(g*n-h*i,h*n+g*i)}e.closePath()}},Rx=ii(3),KG={draw(e,t){const r=-ii(t/(Rx*3));e.moveTo(0,r*2),e.lineTo(-Rx*r,-r),e.lineTo(Rx*r,-r),e.closePath()}},xs=-.5,bs=ii(3)/2,aE=1/ii(12),ZG=(aE/2+1)*3,QG={draw(e,t){const r=ii(t/ZG),n=r/2,i=r*aE,o=n,d=r*aE+r,g=-o,h=d;e.moveTo(n,i),e.lineTo(o,d),e.lineTo(g,h),e.lineTo(xs*n-bs*i,bs*n+xs*i),e.lineTo(xs*o-bs*d,bs*o+xs*d),e.lineTo(xs*g-bs*h,bs*g+xs*h),e.lineTo(xs*n+bs*i,xs*i-bs*n),e.lineTo(xs*o+bs*d,xs*d-bs*o),e.lineTo(xs*g+bs*h,xs*h-bs*g),e.closePath()}};function JG(e,t){let r=null,n=Q2(i);e=typeof e=="function"?e:Nr(e||ew),t=typeof t=="function"?t:Nr(t===void 0?64:+t);function i(){let o;if(r||(r=o=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),o)return r=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:Nr(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:Nr(+o),i):t},i.context=function(o){return arguments.length?(r=o??null,i):r},i}function Ng(){}function Sg(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Qk(e){this._context=e}Qk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Sg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Sg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function eY(e){return new Qk(e)}function Jk(e){this._context=e}Jk.prototype={areaStart:Ng,areaEnd:Ng,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Sg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tY(e){return new Jk(e)}function e7(e){this._context=e}e7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Sg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rY(e){return new e7(e)}function t7(e){this._context=e}t7.prototype={areaStart:Ng,areaEnd:Ng,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function nY(e){return new t7(e)}function j4(e){return e<0?-1:1}function z4(e,t,r){var n=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(n||i<0&&-0),d=(r-e._y1)/(i||n<0&&-0),g=(o*i+d*n)/(n+i);return(j4(o)+j4(d))*Math.min(Math.abs(o),Math.abs(d),.5*Math.abs(g))||0}function V4(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Ix(e,t,r){var n=e._x0,i=e._y0,o=e._x1,d=e._y1,g=(o-n)/3;e._context.bezierCurveTo(n+g,i+g*t,o-g,d-g*r,o,d)}function Cg(e){this._context=e}Cg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ix(this,this._t0,V4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ix(this,V4(this,r=z4(this,e,t)),r);break;default:Ix(this,this._t0,r=z4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function r7(e){this._context=new n7(e)}(r7.prototype=Object.create(Cg.prototype)).point=function(e,t){Cg.prototype.point.call(this,t,e)};function n7(e){this._context=e}n7.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,o){this._context.bezierCurveTo(t,e,n,r,o,i)}};function aY(e){return new Cg(e)}function sY(e){return new r7(e)}function a7(e){this._context=e}a7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=H4(e),i=H4(t),o=0,d=1;d<r;++o,++d)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],e[d],t[d]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function H4(e){var t,r=e.length-1,n,i=new Array(r),o=new Array(r),d=new Array(r);for(i[0]=0,o[0]=2,d[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,d[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,d[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,d[t]-=n*d[t-1];for(i[r-1]=d[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(d[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function iY(e){return new a7(e)}function _p(e,t){this._context=e,this._t=t}_p.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function lY(e){return new _p(e,.5)}function oY(e){return new _p(e,0)}function cY(e){return new _p(e,1)}function Gu(e,t){if((d=e.length)>1)for(var r=1,n,i,o=e[t[0]],d,g=o.length;r<d;++r)for(i=o,o=e[t[r]],n=0;n<g;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function sE(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function uY(e,t){return e[t]}function dY(e){const t=[];return t.key=e,t}function fY(){var e=Nr([]),t=sE,r=Gu,n=uY;function i(o){var d=Array.from(e.apply(this,arguments),dY),g,h=d.length,x=-1,y;for(const w of o)for(g=0,++x;g<h;++g)(d[g][x]=[0,+n(w,d[g].key,x,o)]).data=w;for(g=0,y=J2(t(d));g<h;++g)d[y[g]].index=g;return r(d,y),d}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:Nr(Array.from(o)),i):e},i.value=function(o){return arguments.length?(n=typeof o=="function"?o:Nr(+o),i):n},i.order=function(o){return arguments.length?(t=o==null?sE:typeof o=="function"?o:Nr(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(r=o??Gu,i):r},i}function mY(e,t){if((n=e.length)>0){for(var r,n,i=0,o=e[0].length,d;i<o;++i){for(d=r=0;r<n;++r)d+=e[r][i][1]||0;if(d)for(r=0;r<n;++r)e[r][i][1]/=d}Gu(e,t)}}function hY(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,o=n.length;r<o;++r){for(var d=0,g=0;d<i;++d)g+=e[d][r][1]||0;n[r][1]+=n[r][0]=-g/2}Gu(e,t)}}function gY(e,t){if(!(!((d=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,o,d;n<o;++n){for(var g=0,h=0,x=0;g<d;++g){for(var y=e[t[g]],w=y[n][1]||0,C=y[n-1][1]||0,_=(w-C)/2,D=0;D<g;++D){var k=e[t[D]],M=k[n][1]||0,R=k[n-1][1]||0;_+=M-R}h+=w,x+=_*w}i[n-1][1]+=i[n-1][0]=r,h&&(r-=x/h)}i[n-1][1]+=i[n-1][0]=r,Gu(e,t)}}var Lx={},Bx={},q4;function pY(){return q4||(q4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Bx)),Bx}var Fx={},$4;function s7(){return $4||($4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Fx)),Fx}var Ux={},G4;function tw(){return G4||(G4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(Ux)),Ux}var jx={},zx={},Y4;function yY(){return Y4||(Y4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(zx)),zx}var X4;function rw(){return X4||(X4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yY(),r=tw();function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const o=[],d=i.length;if(d===0)return o;let g=0,h="",x="",y=!1;for(i.charCodeAt(0)===46&&(o.push(""),g++);g<d;){const w=i[g];x?w==="\\"&&g+1<d?(g++,h+=i[g]):w===x?x="":h+=w:y?w==='"'||w==="'"?x=w:w==="]"?(y=!1,o.push(h),h=""):h+=w:w==="["?(y=!0,h&&(o.push(h),h="")):w==="."?h&&(o.push(h),h=""):h+=w,g++}return h&&o.push(h),o}e.toPath=n})(jx)),jx}var W4;function nw(){return W4||(W4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pY(),r=s7(),n=tw(),i=rw();function o(g,h,x){if(g==null)return x;switch(typeof h){case"string":{if(t.isUnsafeProperty(h))return x;const y=g[h];return y===void 0?r.isDeepKey(h)?o(g,i.toPath(h),x):x:y}case"number":case"symbol":{typeof h=="number"&&(h=n.toKey(h));const y=g[h];return y===void 0?x:y}default:{if(Array.isArray(h))return d(g,h,x);if(Object.is(h?.valueOf(),-0)?h="-0":h=String(h),t.isUnsafeProperty(h))return x;const y=g[h];return y===void 0?x:y}}}function d(g,h,x){if(h.length===0)return x;let y=g;for(let w=0;w<h.length;w++){if(y==null||t.isUnsafeProperty(h[w]))return x;y=y[h[w]]}return y===void 0?x:y}e.get=o})(Lx)),Lx}var Vx,K4;function xY(){return K4||(K4=1,Vx=nw().get),Vx}var bY=xY();const qf=ki(bY);var ka=e=>e===0?0:e>0?1:-1,gl=e=>typeof e=="number"&&e!=+e,pl=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Tt=e=>(typeof e=="number"||e instanceof Number)&&!gl(e),yl=e=>Tt(e)||typeof e=="string",vY=0,$f=e=>{var t=++vY;return"".concat(e||"").concat(t)},ns=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Tt(t)&&typeof t!="string")return n;var o;if(pl(t)){if(r==null)return n;var d=t.indexOf("%");o=r*parseFloat(t.slice(0,d))/100}else o=+t;return gl(o)&&(o=n),i&&r!=null&&o>r&&(o=r),o},i7=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Ws(e,t,r){return Tt(e)&&Tt(t)?e+r*(t-e):t}function EY(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):qf(n,t))===r)}var ss=e=>e===null||typeof e>"u",xm=e=>ss(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function wY(e){return e!=null}function bm(){}var NY=["type","size","sizeType"];function iE(){return iE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iE.apply(null,arguments)}function Z4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Q4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z4(Object(r),!0).forEach(function(n){SY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SY(e,t,r){return(t=CY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CY(e){var t=AY(e,"string");return typeof t=="symbol"?t:t+""}function AY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TY(e,t){if(e==null)return{};var r,n,i=OY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function OY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var l7={symbolCircle:ew,symbolCross:VG,symbolDiamond:qG,symbolSquare:$G,symbolStar:WG,symbolTriangle:KG,symbolWye:QG},_Y=Math.PI/180,DY=e=>{var t="symbol".concat(xm(e));return l7[t]||ew},kY=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*_Y;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},MY=(e,t)=>{l7["symbol".concat(xm(e))]=t},aw=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=TY(e,NY),o=Q4(Q4({},i),{},{type:t,size:r,sizeType:n}),d="circle";typeof t=="string"&&(d=t);var g=()=>{var C=DY(d),_=JG().type(C).size(kY(r,n,d)),D=_();if(D!==null)return D},{className:h,cx:x,cy:y}=o,w=Ds(o);return Tt(x)&&Tt(y)&&Tt(r)?N.createElement("path",iE({},w,{className:fn("recharts-symbols",h),transform:"translate(".concat(x,", ").concat(y,")"),d:g()})):null};aw.registerSymbol=MY;var o7=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,PY=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(N.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{K2(i)&&(n[i]=(o=>r[i](r,o)))}),n},RY=(e,t,r)=>n=>(e(t,r,n),null),c7=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var o=e[i];K2(i)&&typeof o=="function"&&(n||(n={}),n[i]=RY(o,t,r))}),n};function J4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function IY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J4(Object(r),!0).forEach(function(n){LY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LY(e,t,r){return(t=BY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BY(e){var t=FY(e,"string");return typeof t=="symbol"?t:t+""}function FY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rs(e,t){var r=IY({},e),n=t,i=Object.keys(t),o=i.reduce((d,g)=>(d[g]===void 0&&n[g]!==void 0&&(d[g]=n[g]),d),r);return o}function Ag(){return Ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ag.apply(null,arguments)}function e5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function UY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e5(Object(r),!0).forEach(function(n){jY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jY(e,t,r){return(t=zY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zY(e){var t=VY(e,"string");return typeof t=="symbol"?t:t+""}function VY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ns=32,HY={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function qY(e){var{data:t,iconType:r,inactiveColor:n}=e,i=Ns/2,o=Ns/6,d=Ns/3,g=t.inactive?n:t.color,h=r??t.type;if(h==="none")return null;if(h==="plainline"){var x;return N.createElement("line",{strokeWidth:4,fill:"none",stroke:g,strokeDasharray:(x=t.payload)===null||x===void 0?void 0:x.strokeDasharray,x1:0,y1:i,x2:Ns,y2:i,className:"recharts-legend-icon"})}if(h==="line")return N.createElement("path",{strokeWidth:4,fill:"none",stroke:g,d:"M0,".concat(i,"h").concat(d,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*d,",").concat(i,`
            H`).concat(Ns,"M").concat(2*d,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(d,",").concat(i),className:"recharts-legend-icon"});if(h==="rect")return N.createElement("path",{stroke:"none",fill:g,d:"M0,".concat(Ns/8,"h").concat(Ns,"v").concat(Ns*3/4,"h").concat(-Ns,"z"),className:"recharts-legend-icon"});if(N.isValidElement(t.legendIcon)){var y=UY({},t);return delete y.legendIcon,N.cloneElement(t.legendIcon,y)}return N.createElement(aw,{fill:g,cx:i,cy:i,size:Ns,sizeType:"diameter",type:h})}function $Y(e){var{payload:t,iconSize:r,layout:n,formatter:i,inactiveColor:o,iconType:d}=e,g={x:0,y:0,width:Ns,height:Ns},h={display:n==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((y,w)=>{var C=y.formatter||i,_=fn({"recharts-legend-item":!0,["legend-item-".concat(w)]:!0,inactive:y.inactive});if(y.type==="none")return null;var D=y.inactive?o:y.color,k=C?C(y.value,y,w):y.value;return N.createElement("li",Ag({className:_,style:h,key:"legend-item-".concat(w)},c7(e,y,w)),N.createElement(Z2,{width:r,height:r,viewBox:g,style:x,"aria-label":"".concat(k," legend icon")},N.createElement(qY,{data:y,iconType:d,inactiveColor:o})),N.createElement("span",{className:"recharts-legend-item-text",style:{color:D}},k))})}var GY=e=>{var t=Rs(e,HY),{payload:r,layout:n,align:i}=t;if(!r||!r.length)return null;var o={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return N.createElement("ul",{className:"recharts-default-legend",style:o},N.createElement($Y,Ag({},t,{payload:r})))},Hx={},qx={},t5;function YY(){return t5||(t5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let o=0;o<r.length;o++){const d=r[o],g=n(d);i.has(g)||i.set(g,d)}return Array.from(i.values())}e.uniqBy=t})(qx)),qx}var $x={},r5;function u7(){return r5||(r5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})($x)),$x}var Gx={},Yx={},Xx={},n5;function XY(){return n5||(n5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Xx)),Xx}var a5;function sw(){return a5||(a5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XY();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Yx)),Yx}var Wx={},s5;function WY(){return s5||(s5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Wx)),Wx}var i5;function KY(){return i5||(i5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sw(),r=WY();function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(Gx)),Gx}var Kx={},Zx={},l5;function ZY(){return l5||(l5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nw();function r(n){return function(i){return t.get(i,n)}}e.property=r})(Zx)),Zx}var Qx={},Jx={},eb={},tb={},o5;function d7(){return o5||(o5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(tb)),tb}var rb={},c5;function f7(){return c5||(c5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(rb)),rb}var nb={},u5;function m7(){return u5||(u5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(nb)),nb}var d5;function QY(){return d5||(d5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d7(),r=f7(),n=m7();function i(y,w,C){return typeof C!="function"?i(y,w,()=>{}):o(y,w,function _(D,k,M,R,F,I){const G=C(D,k,M,R,F,I);return G!==void 0?!!G:o(D,k,_,I)},new Map)}function o(y,w,C,_){if(w===y)return!0;switch(typeof w){case"object":return d(y,w,C,_);case"function":return Object.keys(w).length>0?o(y,{...w},C,_):n.eq(y,w);default:return t.isObject(y)?typeof w=="string"?w==="":!0:n.eq(y,w)}}function d(y,w,C,_){if(w==null)return!0;if(Array.isArray(w))return h(y,w,C,_);if(w instanceof Map)return g(y,w,C,_);if(w instanceof Set)return x(y,w,C,_);const D=Object.keys(w);if(y==null)return D.length===0;if(D.length===0)return!0;if(_?.has(w))return _.get(w)===y;_?.set(w,y);try{for(let k=0;k<D.length;k++){const M=D[k];if(!r.isPrimitive(y)&&!(M in y)||w[M]===void 0&&y[M]!==void 0||w[M]===null&&y[M]!==null||!C(y[M],w[M],M,y,w,_))return!1}return!0}finally{_?.delete(w)}}function g(y,w,C,_){if(w.size===0)return!0;if(!(y instanceof Map))return!1;for(const[D,k]of w.entries()){const M=y.get(D);if(C(M,k,D,y,w,_)===!1)return!1}return!0}function h(y,w,C,_){if(w.length===0)return!0;if(!Array.isArray(y))return!1;const D=new Set;for(let k=0;k<w.length;k++){const M=w[k];let R=!1;for(let F=0;F<y.length;F++){if(D.has(F))continue;const I=y[F];let G=!1;if(C(I,M,k,y,w,_)&&(G=!0),G){D.add(F),R=!0;break}}if(!R)return!1}return!0}function x(y,w,C,_){return w.size===0?!0:y instanceof Set?h([...y],[...w],C,_):!1}e.isMatchWith=i,e.isSetMatch=x})(eb)),eb}var f5;function h7(){return f5||(f5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QY();function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(Jx)),Jx}var ab={},sb={},ib={},m5;function JY(){return m5||(m5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(ib)),ib}var lb={},h5;function g7(){return h5||(h5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(lb)),lb}var ob={},g5;function p7(){return g5||(g5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",o="[object Arguments]",d="[object Symbol]",g="[object Date]",h="[object Map]",x="[object Set]",y="[object Array]",w="[object Function]",C="[object ArrayBuffer]",_="[object Object]",D="[object Error]",k="[object DataView]",M="[object Uint8Array]",R="[object Uint8ClampedArray]",F="[object Uint16Array]",I="[object Uint32Array]",G="[object BigUint64Array]",U="[object Int8Array]",z="[object Int16Array]",L="[object Int32Array]",H="[object BigInt64Array]",V="[object Float32Array]",Q="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=C,e.arrayTag=y,e.bigInt64ArrayTag=H,e.bigUint64ArrayTag=G,e.booleanTag=i,e.dataViewTag=k,e.dateTag=g,e.errorTag=D,e.float32ArrayTag=V,e.float64ArrayTag=Q,e.functionTag=w,e.int16ArrayTag=z,e.int32ArrayTag=L,e.int8ArrayTag=U,e.mapTag=h,e.numberTag=n,e.objectTag=_,e.regexpTag=t,e.setTag=x,e.stringTag=r,e.symbolTag=d,e.uint16ArrayTag=F,e.uint32ArrayTag=I,e.uint8ArrayTag=M,e.uint8ClampedArrayTag=R})(ob)),ob}var cb={},p5;function eX(){return p5||(p5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(cb)),cb}var y5;function y7(){return y5||(y5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JY(),r=g7(),n=p7(),i=f7(),o=eX();function d(y,w){return g(y,void 0,y,new Map,w)}function g(y,w,C,_=new Map,D=void 0){const k=D?.(y,w,C,_);if(k!==void 0)return k;if(i.isPrimitive(y))return y;if(_.has(y))return _.get(y);if(Array.isArray(y)){const M=new Array(y.length);_.set(y,M);for(let R=0;R<y.length;R++)M[R]=g(y[R],R,C,_,D);return Object.hasOwn(y,"index")&&(M.index=y.index),Object.hasOwn(y,"input")&&(M.input=y.input),M}if(y instanceof Date)return new Date(y.getTime());if(y instanceof RegExp){const M=new RegExp(y.source,y.flags);return M.lastIndex=y.lastIndex,M}if(y instanceof Map){const M=new Map;_.set(y,M);for(const[R,F]of y)M.set(R,g(F,R,C,_,D));return M}if(y instanceof Set){const M=new Set;_.set(y,M);for(const R of y)M.add(g(R,void 0,C,_,D));return M}if(typeof Buffer<"u"&&Buffer.isBuffer(y))return y.subarray();if(o.isTypedArray(y)){const M=new(Object.getPrototypeOf(y)).constructor(y.length);_.set(y,M);for(let R=0;R<y.length;R++)M[R]=g(y[R],R,C,_,D);return M}if(y instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&y instanceof SharedArrayBuffer)return y.slice(0);if(y instanceof DataView){const M=new DataView(y.buffer.slice(0),y.byteOffset,y.byteLength);return _.set(y,M),h(M,y,C,_,D),M}if(typeof File<"u"&&y instanceof File){const M=new File([y],y.name,{type:y.type});return _.set(y,M),h(M,y,C,_,D),M}if(typeof Blob<"u"&&y instanceof Blob){const M=new Blob([y],{type:y.type});return _.set(y,M),h(M,y,C,_,D),M}if(y instanceof Error){const M=new y.constructor;return _.set(y,M),M.message=y.message,M.name=y.name,M.stack=y.stack,M.cause=y.cause,h(M,y,C,_,D),M}if(y instanceof Boolean){const M=new Boolean(y.valueOf());return _.set(y,M),h(M,y,C,_,D),M}if(y instanceof Number){const M=new Number(y.valueOf());return _.set(y,M),h(M,y,C,_,D),M}if(y instanceof String){const M=new String(y.valueOf());return _.set(y,M),h(M,y,C,_,D),M}if(typeof y=="object"&&x(y)){const M=Object.create(Object.getPrototypeOf(y));return _.set(y,M),h(M,y,C,_,D),M}return y}function h(y,w,C=y,_,D){const k=[...Object.keys(w),...t.getSymbols(w)];for(let M=0;M<k.length;M++){const R=k[M],F=Object.getOwnPropertyDescriptor(y,R);(F==null||F.writable)&&(y[R]=g(w[R],R,C,_,D))}}function x(y){switch(r.getTag(y)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=d,e.cloneDeepWithImpl=g,e.copyProperties=h})(sb)),sb}var x5;function tX(){return x5||(x5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y7();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(ab)),ab}var b5;function rX(){return b5||(b5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h7(),r=tX();function n(i){return i=r.cloneDeep(i),o=>t.isMatch(o,i)}e.matches=n})(Qx)),Qx}var ub={},db={},fb={},v5;function nX(){return v5||(v5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y7(),r=p7();function n(i,o){return t.cloneDeepWith(i,(d,g,h,x)=>{const y=o?.(d,g,h,x);if(y!==void 0)return y;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const w=new i.constructor(i?.valueOf());return t.copyProperties(w,i),w}case r.argumentsTag:{const w={};return t.copyProperties(w,i),w.length=i.length,w[Symbol.iterator]=i[Symbol.iterator],w}default:return}})}e.cloneDeepWith=n})(fb)),fb}var E5;function aX(){return E5||(E5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nX();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(db)),db}var mb={},hb={},w5;function x7(){return w5||(w5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(hb)),hb}var gb={},N5;function sX(){return N5||(N5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=g7();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(gb)),gb}var S5;function iX(){return S5||(S5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s7(),r=x7(),n=sX(),i=rw();function o(d,g){let h;if(Array.isArray(g)?h=g:typeof g=="string"&&t.isDeepKey(g)&&d?.[g]==null?h=i.toPath(g):h=[g],h.length===0)return!1;let x=d;for(let y=0;y<h.length;y++){const w=h[y];if((x==null||!Object.hasOwn(x,w))&&!((Array.isArray(x)||n.isArguments(x))&&r.isIndex(w)&&w<x.length))return!1;x=x[w]}return!0}e.has=o})(mb)),mb}var C5;function lX(){return C5||(C5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h7(),r=tw(),n=aX(),i=nw(),o=iX();function d(g,h){switch(typeof g){case"object":{Object.is(g?.valueOf(),-0)&&(g="-0");break}case"number":{g=r.toKey(g);break}}return h=n.cloneDeep(h),function(x){const y=i.get(x,g);return y===void 0?o.has(x,g):h===void 0?y===void 0:t.isMatch(y,h)}}e.matchesProperty=d})(ub)),ub}var A5;function oX(){return A5||(A5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u7(),r=ZY(),n=rX(),i=lX();function o(d){if(d==null)return t.identity;switch(typeof d){case"function":return d;case"object":return Array.isArray(d)&&d.length===2?i.matchesProperty(d[0],d[1]):n.matches(d);case"string":case"symbol":case"number":return r.property(d)}}e.iteratee=o})(Kx)),Kx}var T5;function cX(){return T5||(T5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YY(),r=u7(),n=KY(),i=oX();function o(d,g=r.identity){return n.isArrayLikeObject(d)?t.uniqBy(Array.from(d),i.iteratee(g)):[]}e.uniqBy=o})(Hx)),Hx}var pb,O5;function uX(){return O5||(O5=1,pb=cX().uniqBy),pb}var dX=uX();const _5=ki(dX);function b7(e,t,r){return t===!0?_5(e,r):typeof t=="function"?_5(e,t):e}var yb={exports:{}},xb={},bb={exports:{}},vb={};var D5;function fX(){if(D5)return vb;D5=1;var e=td();function t(w,C){return w===C&&(w!==0||1/w===1/C)||w!==w&&C!==C}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,o=e.useLayoutEffect,d=e.useDebugValue;function g(w,C){var _=C(),D=n({inst:{value:_,getSnapshot:C}}),k=D[0].inst,M=D[1];return o(function(){k.value=_,k.getSnapshot=C,h(k)&&M({inst:k})},[w,_,C]),i(function(){return h(k)&&M({inst:k}),w(function(){h(k)&&M({inst:k})})},[w]),d(_),_}function h(w){var C=w.getSnapshot;w=w.value;try{var _=C();return!r(w,_)}catch{return!0}}function x(w,C){return C()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x:g;return vb.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,vb}var k5;function mX(){return k5||(k5=1,bb.exports=fX()),bb.exports}var M5;function hX(){if(M5)return xb;M5=1;var e=td(),t=mX();function r(x,y){return x===y&&(x!==0||1/x===1/y)||x!==x&&y!==y}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,o=e.useRef,d=e.useEffect,g=e.useMemo,h=e.useDebugValue;return xb.useSyncExternalStoreWithSelector=function(x,y,w,C,_){var D=o(null);if(D.current===null){var k={hasValue:!1,value:null};D.current=k}else k=D.current;D=g(function(){function R(z){if(!F){if(F=!0,I=z,z=C(z),_!==void 0&&k.hasValue){var L=k.value;if(_(L,z))return G=L}return G=z}if(L=G,n(I,z))return L;var H=C(z);return _!==void 0&&_(L,H)?(I=z,L):(I=z,G=H)}var F=!1,I,G,U=w===void 0?null:w;return[function(){return R(y())},U===null?void 0:function(){return R(U())}]},[y,w,C,_]);var M=i(x,D[0],D[1]);return d(function(){k.hasValue=!0,k.value=M},[M]),h(M),M},xb}var P5;function gX(){return P5||(P5=1,yb.exports=hX()),yb.exports}var pX=gX(),iw=N.createContext(null),yX=e=>e,mn=()=>{var e=N.useContext(iw);return e?e.store.dispatch:yX},Zh=()=>{},xX=()=>Zh,bX=(e,t)=>e===t;function Dt(e){var t=N.useContext(iw);return pX.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:xX,t?t.store.getState:Zh,t?t.store.getState:Zh,t?e:Zh,bX)}function vX(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function EX(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function wX(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var R5=e=>Array.isArray(e)?e:[e];function NX(e){const t=Array.isArray(e[0])?e[0]:e;return wX(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function SX(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var CX=class{constructor(e){this.value=e}deref(){return this.value}},AX=typeof WeakRef<"u"?WeakRef:CX,TX=0,I5=1;function dh(){return{s:TX,v:void 0,o:null,p:null}}function v7(e,t={}){let r=dh();const{resultEqualityCheck:n}=t;let i,o=0;function d(){let g=r;const{length:h}=arguments;for(let w=0,C=h;w<C;w++){const _=arguments[w];if(typeof _=="function"||typeof _=="object"&&_!==null){let D=g.o;D===null&&(g.o=D=new WeakMap);const k=D.get(_);k===void 0?(g=dh(),D.set(_,g)):g=k}else{let D=g.p;D===null&&(g.p=D=new Map);const k=D.get(_);k===void 0?(g=dh(),D.set(_,g)):g=k}}const x=g;let y;if(g.s===I5)y=g.v;else if(y=e.apply(null,arguments),o++,n){const w=i?.deref?.()??i;w!=null&&n(w,y)&&(y=w,o!==0&&o--),i=typeof y=="object"&&y!==null||typeof y=="function"?new AX(y):y}return x.s=I5,x.v=y,y}return d.clearCache=()=>{r=dh(),d.resetResultsCount()},d.resultsCount=()=>o,d.resetResultsCount=()=>{o=0},d}function OX(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let o=0,d=0,g,h={},x=i.pop();typeof x=="object"&&(h=x,x=i.pop()),vX(x,`createSelector expects an output function after the inputs, but received: [${typeof x}]`);const y={...r,...h},{memoize:w,memoizeOptions:C=[],argsMemoize:_=v7,argsMemoizeOptions:D=[]}=y,k=R5(C),M=R5(D),R=NX(i),F=w(function(){return o++,x.apply(null,arguments)},...k),I=_(function(){d++;const U=SX(R,arguments);return g=F.apply(null,U),g},...M);return Object.assign(I,{resultFunc:x,memoizedResultFunc:F,dependencies:R,dependencyRecomputations:()=>d,resetDependencyRecomputations:()=>{d=0},lastResult:()=>g,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:w,argsMemoize:_})};return Object.assign(n,{withTypes:()=>n}),n}var De=OX(v7),_X=Object.assign((e,t=De)=>{EX(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(o=>e[o]);return t(n,(...o)=>o.reduce((d,g,h)=>(d[r[h]]=g,d),{}))},{withTypes:()=>_X}),Eb={},wb={},Nb={},L5;function DX(){return L5||(L5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,o)=>{if(n!==i){const d=t(n),g=t(i);if(d===g&&d===0){if(n<i)return o==="desc"?1:-1;if(n>i)return o==="desc"?-1:1}return o==="desc"?g-d:d-g}return 0};e.compareValues=r})(Nb)),Nb}var Sb={},Cb={},B5;function E7(){return B5||(B5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Cb)),Cb}var F5;function kX(){return F5||(F5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E7(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,d){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(n.test(o)||!r.test(o))||d!=null&&Object.hasOwn(d,o)}e.isKey=i})(Sb)),Sb}var U5;function MX(){return U5||(U5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DX(),r=kX(),n=rw();function i(o,d,g,h){if(o==null)return[];g=h?void 0:g,Array.isArray(o)||(o=Object.values(o)),Array.isArray(d)||(d=d==null?[null]:[d]),d.length===0&&(d=[null]),Array.isArray(g)||(g=g==null?[]:[g]),g=g.map(_=>String(_));const x=(_,D)=>{let k=_;for(let M=0;M<D.length&&k!=null;++M)k=k[D[M]];return k},y=(_,D)=>D==null||_==null?D:typeof _=="object"&&"key"in _?Object.hasOwn(D,_.key)?D[_.key]:x(D,_.path):typeof _=="function"?_(D):Array.isArray(_)?x(D,_):typeof D=="object"?D[_]:D,w=d.map(_=>(Array.isArray(_)&&_.length===1&&(_=_[0]),_==null||typeof _=="function"||Array.isArray(_)||r.isKey(_)?_:{key:_,path:n.toPath(_)}));return o.map(_=>({original:_,criteria:w.map(D=>y(D,_))})).slice().sort((_,D)=>{for(let k=0;k<w.length;k++){const M=t.compareValues(_.criteria[k],D.criteria[k],g[k]);if(M!==0)return M}return 0}).map(_=>_.original)}e.orderBy=i})(wb)),wb}var Ab={},j5;function PX(){return j5||(j5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],o=Math.floor(n),d=(g,h)=>{for(let x=0;x<g.length;x++){const y=g[x];Array.isArray(y)&&h<o?d(y,h+1):i.push(y)}};return d(r,0),i}e.flatten=t})(Ab)),Ab}var Tb={},z5;function w7(){return z5||(z5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x7(),r=sw(),n=d7(),i=m7();function o(d,g,h){return n.isObject(h)&&(typeof g=="number"&&r.isArrayLike(h)&&t.isIndex(g)&&g<h.length||typeof g=="string"&&g in h)?i.eq(h[g],d):!1}e.isIterateeCall=o})(Tb)),Tb}var V5;function RX(){return V5||(V5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MX(),r=PX(),n=w7();function i(o,...d){const g=d.length;return g>1&&n.isIterateeCall(o,d[0],d[1])?d=[]:g>2&&n.isIterateeCall(d[0],d[1],d[2])&&(d=[d[0]]),t.orderBy(o,r.flatten(d),["asc"])}e.sortBy=i})(Eb)),Eb}var Ob,H5;function IX(){return H5||(H5=1,Ob=RX().sortBy),Ob}var LX=IX();const Dp=ki(LX);var N7=e=>e.legend.settings,BX=e=>e.legend.size,FX=e=>e.legend.payload,UX=De([FX,N7],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Dp(n,r):n});function jX(){return Dt(UX)}var fh=1;function S7(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=N.useState({height:0,left:0,top:0,width:0}),n=N.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),d={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(d.height-t.height)>fh||Math.abs(d.left-t.left)>fh||Math.abs(d.top-t.top)>fh||Math.abs(d.width-t.width)>fh)&&r({height:d.height,left:d.left,top:d.top,width:d.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Qn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var zX=typeof Symbol=="function"&&Symbol.observable||"@@observable",q5=zX,_b=()=>Math.random().toString(36).substring(7).split("").join("."),VX={INIT:`@@redux/INIT${_b()}`,REPLACE:`@@redux/REPLACE${_b()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${_b()}`},Tg=VX;function lw(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function C7(e,t,r){if(typeof e!="function")throw new Error(Qn(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Qn(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Qn(1));return r(C7)(e,t)}let n=e,i=t,o=new Map,d=o,g=0,h=!1;function x(){d===o&&(d=new Map,o.forEach((M,R)=>{d.set(R,M)}))}function y(){if(h)throw new Error(Qn(3));return i}function w(M){if(typeof M!="function")throw new Error(Qn(4));if(h)throw new Error(Qn(5));let R=!0;x();const F=g++;return d.set(F,M),function(){if(R){if(h)throw new Error(Qn(6));R=!1,x(),d.delete(F),o=null}}}function C(M){if(!lw(M))throw new Error(Qn(7));if(typeof M.type>"u")throw new Error(Qn(8));if(typeof M.type!="string")throw new Error(Qn(17));if(h)throw new Error(Qn(9));try{h=!0,i=n(i,M)}finally{h=!1}return(o=d).forEach(F=>{F()}),M}function _(M){if(typeof M!="function")throw new Error(Qn(10));n=M,C({type:Tg.REPLACE})}function D(){const M=w;return{subscribe(R){if(typeof R!="object"||R===null)throw new Error(Qn(11));function F(){const G=R;G.next&&G.next(y())}return F(),{unsubscribe:M(F)}},[q5](){return this}}}return C({type:Tg.INIT}),{dispatch:C,subscribe:w,getState:y,replaceReducer:_,[q5]:D}}function HX(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Tg.INIT})>"u")throw new Error(Qn(12));if(typeof r(void 0,{type:Tg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Qn(13))})}function A7(e){const t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const d=t[o];typeof e[d]=="function"&&(r[d]=e[d])}const n=Object.keys(r);let i;try{HX(r)}catch(o){i=o}return function(d={},g){if(i)throw i;let h=!1;const x={};for(let y=0;y<n.length;y++){const w=n[y],C=r[w],_=d[w],D=C(_,g);if(typeof D>"u")throw g&&g.type,new Error(Qn(14));x[w]=D,h=h||D!==_}return h=h||n.length!==Object.keys(d).length,h?x:d}}function Og(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function qX(...e){return t=>(r,n)=>{const i=t(r,n);let o=()=>{throw new Error(Qn(15))};const d={getState:i.getState,dispatch:(h,...x)=>o(h,...x)},g=e.map(h=>h(d));return o=Og(...g)(i.dispatch),{...i,dispatch:o}}}function T7(e){return lw(e)&&"type"in e&&typeof e.type=="string"}var O7=Symbol.for("immer-nothing"),$5=Symbol.for("immer-draftable"),ga=Symbol.for("immer-state");function Ks(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var rs=Object,Yu=rs.getPrototypeOf,_g="constructor",kp="prototype",lE="configurable",Dg="enumerable",Qh="writable",Gf="value",xl=e=>!!e&&!!e[ga];function ri(e){return e?_7(e)||Mp(e)||!!e[$5]||!!e[_g]?.[$5]||Pp(e)||Rp(e):!1}var $X=rs[kp][_g].toString(),G5=new WeakMap;function _7(e){if(!e||!ow(e))return!1;const t=Yu(e);if(t===null||t===rs[kp])return!0;const r=rs.hasOwnProperty.call(t,_g)&&t[_g];if(r===Object)return!0;if(!Tu(r))return!1;let n=G5.get(r);return n===void 0&&(n=Function.toString.call(r),G5.set(r,n)),n===$X}function vm(e,t,r=!0){Em(e)===0?(r?Reflect.ownKeys(e):rs.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Em(e){const t=e[ga];return t?t.type_:Mp(e)?1:Pp(e)?2:Rp(e)?3:0}var Y5=(e,t,r=Em(e))=>r===2?e.has(t):rs[kp].hasOwnProperty.call(e,t),oE=(e,t,r=Em(e))=>r===2?e.get(t):e[t],kg=(e,t,r,n=Em(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function GX(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Mp=Array.isArray,Pp=e=>e instanceof Map,Rp=e=>e instanceof Set,ow=e=>typeof e=="object",Tu=e=>typeof e=="function",Db=e=>typeof e=="boolean",nl=e=>e.copy_||e.base_,cw=e=>e.modified_?e.copy_:e.base_;function cE(e,t){if(Pp(e))return new Map(e);if(Rp(e))return new Set(e);if(Mp(e))return Array[kp].slice.call(e);const r=_7(e);if(t===!0||t==="class_only"&&!r){const n=rs.getOwnPropertyDescriptors(e);delete n[ga];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const d=i[o],g=n[d];g[Qh]===!1&&(g[Qh]=!0,g[lE]=!0),(g.get||g.set)&&(n[d]={[lE]:!0,[Qh]:!0,[Dg]:g[Dg],[Gf]:e[d]})}return rs.create(Yu(e),n)}else{const n=Yu(e);if(n!==null&&r)return{...e};const i=rs.create(n);return rs.assign(i,e)}}function uw(e,t=!1){return Ip(e)||xl(e)||!ri(e)||(Em(e)>1&&rs.defineProperties(e,{set:mh,add:mh,clear:mh,delete:mh}),rs.freeze(e),t&&vm(e,(r,n)=>{uw(n,!0)},!1)),e}function YX(){Ks(2)}var mh={[Gf]:YX};function Ip(e){return e===null||!ow(e)?!0:rs.isFrozen(e)}var Mg="MapSet",uE="Patches",D7={};function Xu(e){const t=D7[e];return t||Ks(0,e),t}var XX=e=>!!D7[e],Yf,k7=()=>Yf,WX=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:XX(Mg)?Xu(Mg):void 0});function X5(e,t){t&&(e.patchPlugin_=Xu(uE),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function dE(e){fE(e),e.drafts_.forEach(KX),e.drafts_=null}function fE(e){e===Yf&&(Yf=e.parent_)}var W5=e=>Yf=WX(Yf,e);function KX(e){const t=e[ga];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function K5(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[ga].modified_&&(dE(t),Ks(4)),ri(e)&&(e=Z5(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[ga].base_,e,t)}else e=Z5(t,r);return ZX(t,e,!0),dE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==O7?e:void 0}function Z5(e,t){if(Ip(t))return t;const r=t[ga];if(!r)return dw(t,e.handledSet_,e);if(!Lp(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);R7(r,e)}return r.copy_}function ZX(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&uw(t,r)}function M7(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Lp=(e,t)=>e.scope_===t,QX=[];function P7(e,t,r,n){const i=nl(e),o=e.type_;if(n!==void 0&&oE(i,n,o)===t){kg(i,n,r,o);return}if(!e.draftLocations_){const g=e.draftLocations_=new Map;vm(i,(h,x)=>{if(xl(x)){const y=g.get(x)||[];y.push(h),g.set(x,y)}})}const d=e.draftLocations_.get(t)??QX;for(const g of d)kg(i,g,r,o)}function JX(e,t,r){e.callbacks_.push(function(i){const o=t;if(!o||!Lp(o,i))return;i.mapSetPlugin_?.fixSetContents(o);const d=cw(o);P7(e,o.draft_??o,d,r),R7(o,i)})}function R7(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=t;if(n){const i=n.getPath(e);i&&n.generatePatches_(e,i,t)}M7(e)}}function eW(e,t,r){const{scope_:n}=e;if(xl(r)){const i=r[ga];Lp(i,n)&&i.callbacks_.push(function(){Jh(e);const d=cw(i);P7(e,r,d,t)})}else ri(r)&&e.callbacks_.push(function(){const o=nl(e);oE(o,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&dw(oE(e.copy_,t,e.type_),n.handledSet_,n)})}function dw(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||xl(e)||t.has(e)||!ri(e)||Ip(e)||(t.add(e),vm(e,(n,i)=>{if(xl(i)){const o=i[ga];if(Lp(o,r)){const d=cw(o);kg(e,n,d,e.type_),M7(o)}}else ri(i)&&dw(i,t,r)})),e}function tW(e,t){const r=Mp(e),n={type_:r?1:0,scope_:t?t.scope_:k7(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,o=fw;r&&(i=[n],o=Xf);const{revoke:d,proxy:g}=Proxy.revocable(i,o);return n.draft_=g,n.revoke_=d,[g,n]}var fw={get(e,t){if(t===ga)return e;const r=nl(e);if(!Y5(r,t,e.type_))return rW(e,r,t);const n=r[t];if(e.finalized_||!ri(n))return n;if(n===kb(e.base_,t)){Jh(e);const i=e.type_===1?+t:t,o=hE(e.scope_,n,e,i);return e.copy_[i]=o}return n},has(e,t){return t in nl(e)},ownKeys(e){return Reflect.ownKeys(nl(e))},set(e,t,r){const n=I7(nl(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=kb(nl(e),t),o=i?.[ga];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(GX(r,i)&&(r!==void 0||Y5(e.base_,t,e.type_)))return!0;Jh(e),mE(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),eW(e,t,r)),!0},deleteProperty(e,t){return Jh(e),kb(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),mE(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=nl(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[Qh]:!0,[lE]:e.type_!==1||t!=="length",[Dg]:n[Dg],[Gf]:r[t]}},defineProperty(){Ks(11)},getPrototypeOf(e){return Yu(e.base_)},setPrototypeOf(){Ks(12)}},Xf={};vm(fw,(e,t)=>{Xf[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});Xf.deleteProperty=function(e,t){return Xf.set.call(this,e,t,void 0)};Xf.set=function(e,t,r){return fw.set.call(this,e[0],t,r,e[0])};function kb(e,t){const r=e[ga];return(r?nl(r):e)[t]}function rW(e,t,r){const n=I7(t,r);return n?Gf in n?n[Gf]:n.get?.call(e.draft_):void 0}function I7(e,t){if(!(t in e))return;let r=Yu(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Yu(r)}}function mE(e){e.modified_||(e.modified_=!0,e.parent_&&mE(e.parent_))}function Jh(e){e.copy_||(e.assigned_=new Map,e.copy_=cE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var nW=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(Tu(r)&&!Tu(n)){const d=n;n=r;const g=this;return function(x=d,...y){return g.produce(x,w=>n.call(this,w,...y))}}Tu(n)||Ks(6),i!==void 0&&!Tu(i)&&Ks(7);let o;if(ri(r)){const d=W5(this),g=hE(d,r,void 0);let h=!0;try{o=n(g),h=!1}finally{h?dE(d):fE(d)}return X5(d,i),K5(o,d)}else if(!r||!ow(r)){if(o=n(r),o===void 0&&(o=r),o===O7&&(o=void 0),this.autoFreeze_&&uw(o,!0),i){const d=[],g=[];Xu(uE).generateReplacementPatches_(r,o,{patches_:d,inversePatches_:g}),i(d,g)}return o}else Ks(1,r)},this.produceWithPatches=(r,n)=>{if(Tu(r))return(g,...h)=>this.produceWithPatches(g,x=>r(x,...h));let i,o;return[this.produce(r,n,(g,h)=>{i=g,o=h}),i,o]},Db(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Db(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Db(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ri(t)||Ks(8),xl(t)&&(t=ti(t));const r=W5(this),n=hE(r,t,void 0);return n[ga].isManual_=!0,fE(r),n}finishDraft(t,r){const n=t&&t[ga];(!n||!n.isManual_)&&Ks(9);const{scope_:i}=n;return X5(i,r),K5(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const o=r[n];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}n>-1&&(r=r.slice(n+1));const i=Xu(uE).applyPatches_;return xl(t)?i(t,r):this.produce(t,o=>i(o,r))}};function hE(e,t,r,n){const[i,o]=Pp(t)?Xu(Mg).proxyMap_(t,r):Rp(t)?Xu(Mg).proxySet_(t,r):tW(t,r);return(r?.scope_??k7()).drafts_.push(i),o.callbacks_=r?.callbacks_??[],o.key_=n,r&&n!==void 0?JX(r,o,n):o.callbacks_.push(function(h){h.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:x}=h;o.modified_&&x&&x.generatePatches_(o,[],h)}),i}function ti(e){return xl(e)||Ks(10,e),L7(e)}function L7(e){if(!ri(e)||Ip(e))return e;const t=e[ga];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=cE(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=cE(e,!0);return vm(r,(i,o)=>{kg(r,i,L7(o))},n),t&&(t.finalized_=!1),r}var aW=new nW,B7=aW.produce;function F7(e){return({dispatch:r,getState:n})=>i=>o=>typeof o=="function"?o(r,n,e):i(o)}var sW=F7(),iW=F7,lW=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Og:Og.apply(null,arguments)};function ks(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(as(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>T7(n)&&n.type===e,r}var U7=class Af extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Af.prototype)}static get[Symbol.species](){return Af}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Af(...t[0].concat(this)):new Af(...t.concat(this))}};function Q5(e){return ri(e)?B7(e,()=>{}):e}function hh(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function oW(e){return typeof e=="boolean"}var cW=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let d=new U7;return r&&(oW(r)?d.push(sW):d.push(iW(r.extraArgument))),d},j7="RTK_autoBatch",Fr=()=>e=>({payload:e,meta:{[j7]:!0}}),J5=e=>t=>{setTimeout(t,e)},z7=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,o=!1,d=!1;const g=new Set,h=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:J5(10):e.type==="callback"?e.queueNotification:J5(e.timeout),x=()=>{d=!1,o&&(o=!1,g.forEach(y=>y()))};return Object.assign({},n,{subscribe(y){const w=()=>i&&y(),C=n.subscribe(w);return g.add(y),()=>{C(),g.delete(y)}},dispatch(y){try{return i=!y?.meta?.[j7],o=!i,o&&(d||(d=!0,h(x))),n.dispatch(y)}finally{i=!0}}})},uW=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new U7(e);return n&&i.push(z7(typeof n=="object"?n:void 0)),i};function dW(e){const t=cW(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:o=void 0,enhancers:d=void 0}=e||{};let g;if(typeof r=="function")g=r;else if(lw(r))g=A7(r);else throw new Error(as(1));let h;typeof n=="function"?h=n(t):h=t();let x=Og;i&&(x=lW({trace:!1,...typeof i=="object"&&i}));const y=qX(...h),w=uW(y);let C=typeof d=="function"?d(w):w();const _=x(...C);return C7(g,o,_)}function V7(e){const t={},r=[];let n;const i={addCase(o,d){const g=typeof o=="string"?o:o.type;if(!g)throw new Error(as(28));if(g in t)throw new Error(as(29));return t[g]=d,i},addAsyncThunk(o,d){return d.pending&&(t[o.pending.type]=d.pending),d.rejected&&(t[o.rejected.type]=d.rejected),d.fulfilled&&(t[o.fulfilled.type]=d.fulfilled),d.settled&&r.push({matcher:o.settled,reducer:d.settled}),i},addMatcher(o,d){return r.push({matcher:o,reducer:d}),i},addDefaultCase(o){return n=o,i}};return e(i),[t,r,n]}function fW(e){return typeof e=="function"}function mW(e,t){let[r,n,i]=V7(t),o;if(fW(e))o=()=>Q5(e());else{const g=Q5(e);o=()=>g}function d(g=o(),h){let x=[r[h.type],...n.filter(({matcher:y})=>y(h)).map(({reducer:y})=>y)];return x.filter(y=>!!y).length===0&&(x=[i]),x.reduce((y,w)=>{if(w)if(xl(y)){const _=w(y,h);return _===void 0?y:_}else{if(ri(y))return B7(y,C=>w(C,h));{const C=w(y,h);if(C===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return C}}return y},g)}return d.getInitialState=o,d}var hW="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",gW=(e=21)=>{let t="",r=e;for(;r--;)t+=hW[Math.random()*64|0];return t},pW=Symbol.for("rtk-slice-createasyncthunk");function yW(e,t){return`${e}/${t}`}function xW({creators:e}={}){const t=e?.asyncThunk?.[pW];return function(n){const{name:i,reducerPath:o=i}=n;if(!i)throw new Error(as(11));const d=(typeof n.reducers=="function"?n.reducers(vW()):n.reducers)||{},g=Object.keys(d),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},x={addCase(I,G){const U=typeof I=="string"?I:I.type;if(!U)throw new Error(as(12));if(U in h.sliceCaseReducersByType)throw new Error(as(13));return h.sliceCaseReducersByType[U]=G,x},addMatcher(I,G){return h.sliceMatchers.push({matcher:I,reducer:G}),x},exposeAction(I,G){return h.actionCreators[I]=G,x},exposeCaseReducer(I,G){return h.sliceCaseReducersByName[I]=G,x}};g.forEach(I=>{const G=d[I],U={reducerName:I,type:yW(i,I),createNotation:typeof n.reducers=="function"};wW(G)?SW(U,G,x,t):EW(U,G,x)});function y(){const[I={},G=[],U=void 0]=typeof n.extraReducers=="function"?V7(n.extraReducers):[n.extraReducers],z={...I,...h.sliceCaseReducersByType};return mW(n.initialState,L=>{for(let H in z)L.addCase(H,z[H]);for(let H of h.sliceMatchers)L.addMatcher(H.matcher,H.reducer);for(let H of G)L.addMatcher(H.matcher,H.reducer);U&&L.addDefaultCase(U)})}const w=I=>I,C=new Map,_=new WeakMap;let D;function k(I,G){return D||(D=y()),D(I,G)}function M(){return D||(D=y()),D.getInitialState()}function R(I,G=!1){function U(L){let H=L[I];return typeof H>"u"&&G&&(H=hh(_,U,M)),H}function z(L=w){const H=hh(C,G,()=>new WeakMap);return hh(H,L,()=>{const V={};for(const[Q,Y]of Object.entries(n.selectors??{}))V[Q]=bW(Y,L,()=>hh(_,L,M),G);return V})}return{reducerPath:I,getSelectors:z,get selectors(){return z(U)},selectSlice:U}}const F={name:i,reducer:k,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:M,...R(o),injectInto(I,{reducerPath:G,...U}={}){const z=G??o;return I.inject({reducerPath:z,reducer:k},U),{...F,...R(z,!0)}}};return F}}function bW(e,t,r,n){function i(o,...d){let g=t(o);return typeof g>"u"&&n&&(g=r()),e(g,...d)}return i.unwrapped=e,i}var Ia=xW();function vW(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function EW({type:e,reducerName:t,createNotation:r},n,i){let o,d;if("reducer"in n){if(r&&!NW(n))throw new Error(as(17));o=n.reducer,d=n.prepare}else o=n;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,d?ks(e,d):ks(e))}function wW(e){return e._reducerDefinitionType==="asyncThunk"}function NW(e){return e._reducerDefinitionType==="reducerWithPrepare"}function SW({type:e,reducerName:t},r,n,i){if(!i)throw new Error(as(18));const{payloadCreator:o,fulfilled:d,pending:g,rejected:h,settled:x,options:y}=r,w=i(e,o,y);n.exposeAction(t,w),d&&n.addCase(w.fulfilled,d),g&&n.addCase(w.pending,g),h&&n.addCase(w.rejected,h),x&&n.addMatcher(w.settled,x),n.exposeCaseReducer(t,{fulfilled:d||gh,pending:g||gh,rejected:h||gh,settled:x||gh})}function gh(){}var CW="task",H7="listener",q7="completed",mw="cancelled",AW=`task-${mw}`,TW=`task-${q7}`,gE=`${H7}-${mw}`,OW=`${H7}-${q7}`,Bp=class{constructor(e){this.code=e,this.message=`${CW} ${mw} (reason: ${e})`}name="TaskAbortError";message},hw=(e,t)=>{if(typeof e!="function")throw new TypeError(as(32))},Pg=()=>{},$7=(e,t=Pg)=>(e.catch(t),e),G7=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Ec=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},wc=e=>{if(e.aborted){const{reason:t}=e;throw new Bp(t)}};function Y7(e,t){let r=Pg;return new Promise((n,i)=>{const o=()=>i(new Bp(e.reason));if(e.aborted){o();return}r=G7(e,o),t.finally(()=>r()).then(n,i)}).finally(()=>{r=Pg})}var _W=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Bp?"cancelled":"rejected",error:r}}finally{t?.()}},Rg=e=>t=>$7(Y7(e,t).then(r=>(wc(e),r))),X7=e=>{const t=Rg(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Uu}=Object,eT={},Fp="listenerMiddleware",DW=(e,t)=>{const r=n=>G7(e,()=>Ec(n,e.reason));return(n,i)=>{hw(n);const o=new AbortController;r(o);const d=_W(async()=>{wc(e),wc(o.signal);const g=await n({pause:Rg(o.signal),delay:X7(o.signal),signal:o.signal});return wc(o.signal),g},()=>Ec(o,TW));return i?.autoJoin&&t.push(d.catch(Pg)),{result:Rg(e)(d),cancel(){Ec(o,AW)}}}},kW=(e,t)=>{const r=async(n,i)=>{wc(t);let o=()=>{};const g=[new Promise((h,x)=>{let y=e({predicate:n,effect:(w,C)=>{C.unsubscribe(),h([w,C.getState(),C.getOriginalState()])}});o=()=>{y(),x()}})];i!=null&&g.push(new Promise(h=>setTimeout(h,i,null)));try{const h=await Y7(t,Promise.race(g));return wc(t),h}finally{o()}};return(n,i)=>$7(r(n,i))},W7=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:o}=e;if(t)i=ks(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(as(21));return hw(o),{predicate:i,type:t,effect:o}},K7=Uu(e=>{const{type:t,predicate:r,effect:n}=W7(e);return{id:gW(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(as(22))}}},{withTypes:()=>K7}),tT=(e,t)=>{const{type:r,effect:n,predicate:i}=W7(t);return Array.from(e.values()).find(o=>(typeof r=="string"?o.type===r:o.predicate===i)&&o.effect===n)},pE=e=>{e.pending.forEach(t=>{Ec(t,gE)})},MW=(e,t)=>()=>{for(const r of t.keys())pE(r);e.clear()},rT=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Z7=Uu(ks(`${Fp}/add`),{withTypes:()=>Z7}),PW=ks(`${Fp}/removeAll`),Q7=Uu(ks(`${Fp}/remove`),{withTypes:()=>Q7}),RW=(...e)=>{console.error(`${Fp}/error`,...e)},wm=(e={})=>{const t=new Map,r=new Map,n=_=>{const D=r.get(_)??0;r.set(_,D+1)},i=_=>{const D=r.get(_)??1;D===1?r.delete(_):r.set(_,D-1)},{extra:o,onError:d=RW}=e;hw(d);const g=_=>(_.unsubscribe=()=>t.delete(_.id),t.set(_.id,_),D=>{_.unsubscribe(),D?.cancelActive&&pE(_)}),h=_=>{const D=tT(t,_)??K7(_);return g(D)};Uu(h,{withTypes:()=>h});const x=_=>{const D=tT(t,_);return D&&(D.unsubscribe(),_.cancelActive&&pE(D)),!!D};Uu(x,{withTypes:()=>x});const y=async(_,D,k,M)=>{const R=new AbortController,F=kW(h,R.signal),I=[];try{_.pending.add(R),n(_),await Promise.resolve(_.effect(D,Uu({},k,{getOriginalState:M,condition:(G,U)=>F(G,U).then(Boolean),take:F,delay:X7(R.signal),pause:Rg(R.signal),extra:o,signal:R.signal,fork:DW(R.signal,I),unsubscribe:_.unsubscribe,subscribe:()=>{t.set(_.id,_)},cancelActiveListeners:()=>{_.pending.forEach((G,U,z)=>{G!==R&&(Ec(G,gE),z.delete(G))})},cancel:()=>{Ec(R,gE),_.pending.delete(R)},throwIfCancelled:()=>{wc(R.signal)}})))}catch(G){G instanceof Bp||rT(d,G,{raisedBy:"effect"})}finally{await Promise.all(I),Ec(R,OW),i(_),_.pending.delete(R)}},w=MW(t,r);return{middleware:_=>D=>k=>{if(!T7(k))return D(k);if(Z7.match(k))return h(k.payload);if(PW.match(k)){w();return}if(Q7.match(k))return x(k.payload);let M=_.getState();const R=()=>{if(M===eT)throw new Error(as(23));return M};let F;try{if(F=D(k),t.size>0){const I=_.getState(),G=Array.from(t.values());for(const U of G){let z=!1;try{z=U.predicate(k,I,M)}catch(L){z=!1,rT(d,L,{raisedBy:"predicate"})}z&&y(U,k,_,R)}}}finally{M=eT}return F},startListening:h,stopListening:x,clearListeners:w}};function as(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var IW={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},J7=Ia({name:"chartLayout",initialState:IW,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,o;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:LW,setLayout:BW,setChartSize:FW,setScale:UW}=J7.actions,jW=J7.reducer;function eM(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function nT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ru(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nT(Object(r),!0).forEach(function(n){zW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zW(e,t,r){return(t=VW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VW(e){var t=HW(e,"string");return typeof t=="symbol"?t:t+""}function HW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function un(e,t,r){return ss(e)||ss(t)?r:yl(t)?qf(e,t,r):typeof t=="function"?t(e):r}var qW=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:o,verticalAlign:d,layout:g}=t;if((g==="vertical"||g==="horizontal"&&d==="middle")&&o!=="center"&&Tt(e[o]))return Ru(Ru({},e),{},{[o]:e[o]+(n||0)});if((g==="horizontal"||g==="vertical"&&o==="center")&&d!=="middle"&&Tt(e[d]))return Ru(Ru({},e),{},{[d]:e[d]+(i||0)})}return e},Pc=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",aT=1e-4,$W=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-aT,o=Math.max(n[0],n[1])+aT,d=e(t[0]),g=e(t[r-1]);(d<i||d>o||g<i||g>o)&&e.domain([t[0],t[r-1]])}},GW=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,o=0,d=0;d<t;++d){var g=gl(e[d][r][1])?e[d][r][0]:e[d][r][1];g>=0?(e[d][r][0]=i,e[d][r][1]=i+g,i=e[d][r][1]):(e[d][r][0]=o,e[d][r][1]=o+g,o=e[d][r][1])}},YW=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,o=0;o<t;++o){var d=gl(e[o][r][1])?e[o][r][0]:e[o][r][1];d>=0?(e[o][r][0]=i,e[o][r][1]=i+d,i=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},XW={sign:GW,expand:mY,none:Gu,silhouette:hY,wiggle:gY,positive:YW},WW=(e,t,r)=>{var n=XW[r],i=fY().keys(t).value((o,d)=>Number(un(o,d,0))).order(sE).offset(n);return i(e)},KW=e=>{var t=e.flat(2).filter(Tt);return[Math.min(...t),Math.max(...t)]},ZW=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],QW=(e,t,r)=>{if(e!=null)return ZW(Object.keys(e).reduce((n,i)=>{var o=e[i],{stackedData:d}=o,g=d.reduce((h,x)=>{var y=eM(x,t,r),w=KW(y);return[Math.min(h[0],w[0]),Math.max(h[1],w[1])]},[1/0,-1/0]);return[Math.min(g[0],n[0]),Math.max(g[1],n[1])]},[1/0,-1/0]))},sT=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,iT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lT=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();return n}if(e&&t&&t.length>=2){for(var i=Dp(t,y=>y.coordinate),o=1/0,d=1,g=i.length;d<g;d++){var h=i[d],x=i[d-1];o=Math.min((h.coordinate||0)-(x.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0};function oT(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:o}=e;return Ru(Ru({},t),{},{dataKey:r,payload:n,value:i,name:o})}function tM(e,t){if(e)return String(e);if(typeof t=="string")return t}var JW=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},eK=(e,t)=>t==="centric"?e.angle:e.radius,Sl=e=>e.layout.width,Cl=e=>e.layout.height,tK=e=>e.layout.scale,rM=e=>e.layout.margin,Up=De(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),jp=De(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),nM="data-recharts-item-index",aM="data-recharts-item-data-key",Nm=60;function cT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ph(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cT(Object(r),!0).forEach(function(n){rK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rK(e,t,r){return(t=nK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nK(e){var t=aK(e,"string");return typeof t=="symbol"?t:t+""}function aK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sK=e=>e.brush.height;function iK(e){var t=jp(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Nm;return r+i}return r},0)}function lK(e){var t=jp(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Nm;return r+i}return r},0)}function oK(e){var t=Up(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function cK(e){var t=Up(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Hn=De([Sl,Cl,rM,sK,iK,lK,oK,cK,N7,BX],(e,t,r,n,i,o,d,g,h,x)=>{var y={left:(r.left||0)+i,right:(r.right||0)+o},w={top:(r.top||0)+d,bottom:(r.bottom||0)+g},C=ph(ph({},w),y),_=C.bottom;C.bottom+=n,C=qW(C,h,x);var D=e-C.left-C.right,k=t-C.top-C.bottom;return ph(ph({brushBottom:_},C),{},{width:Math.max(D,0),height:Math.max(k,0)})}),uK=De(Hn,e=>({x:e.left,y:e.top,width:e.width,height:e.height}));De(Sl,Cl,(e,t)=>({x:0,y:0,width:e,height:t}));var dK=N.createContext(null),Mo=()=>N.useContext(dK)!=null,zp=e=>e.brush,Vp=De([zp,Hn,rM],(e,t,r)=>({height:e.height,x:Tt(e.x)?e.x:t.left,y:Tt(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:Tt(e.width)?e.width:t.width})),Mb={},Pb={},Rb={},uT;function fK(){return uT||(uT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:o}={}){let d,g=null;const h=o!=null&&o.includes("leading"),x=o==null||o.includes("trailing"),y=()=>{g!==null&&(r.apply(d,g),d=void 0,g=null)},w=()=>{x&&y(),k()};let C=null;const _=()=>{C!=null&&clearTimeout(C),C=setTimeout(()=>{C=null,w()},n)},D=()=>{C!==null&&(clearTimeout(C),C=null)},k=()=>{D(),d=void 0,g=null},M=()=>{y()},R=function(...F){if(i?.aborted)return;d=this,g=F;const I=C==null;_(),h&&I&&y()};return R.schedule=_,R.cancel=k,R.flush=M,i?.addEventListener("abort",k,{once:!0}),R}e.debounce=t})(Rb)),Rb}var dT;function mK(){return dT||(dT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fK();function r(n,i=0,o={}){typeof o!="object"&&(o={});const{leading:d=!1,trailing:g=!0,maxWait:h}=o,x=Array(2);d&&(x[0]="leading"),g&&(x[1]="trailing");let y,w=null;const C=t.debounce(function(...k){y=n.apply(this,k),w=null},i,{edges:x}),_=function(...k){return h!=null&&(w===null&&(w=Date.now()),Date.now()-w>=h)?(y=n.apply(this,k),w=Date.now(),C.cancel(),C.schedule(),y):(C.apply(this,k),y)},D=()=>(C.flush(),y);return _.cancel=C.cancel,_.flush=D,_}e.debounce=r})(Pb)),Pb}var fT;function hK(){return fT||(fT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mK();function r(n,i=0,o={}){const{leading:d=!0,trailing:g=!0}=o;return t.debounce(n,i,{leading:d,maxWait:i,trailing:g})}e.throttle=r})(Mb)),Mb}var Ib,mT;function gK(){return mT||(mT=1,Ib=hK().throttle),Ib}var pK=gK();const yK=ki(pK);var hT=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=0;console.warn(r.replace(/%s/g,()=>i[d++]))}},sM=(e,t,r)=>{var{width:n="100%",height:i="100%",aspect:o,maxHeight:d}=r,g=pl(n)?e:Number(n),h=pl(i)?t:Number(i);return o&&o>0&&(g?h=g/o:h&&(g=h*o),d&&h!=null&&h>d&&(h=d)),{calculatedWidth:g,calculatedHeight:h}},xK={width:0,height:0,overflow:"visible"},bK={width:0,overflowX:"visible"},vK={height:0,overflowY:"visible"},EK={},wK=e=>{var{width:t,height:r}=e,n=pl(t),i=pl(r);return n&&i?xK:n?bK:i?vK:EK};function NK(e){var{width:t,height:r,aspect:n}=e,i=t,o=r;return i===void 0&&o===void 0?(i="100%",o="100%"):i===void 0?i=n&&n>0?void 0:"100%":o===void 0&&(o=n&&n>0?void 0:"100%"),{width:i,height:o}}function Vn(e){return Number.isFinite(e)}function Oo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function yE(){return yE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yE.apply(null,arguments)}function gT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gT(Object(r),!0).forEach(function(n){SK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SK(e,t,r){return(t=CK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CK(e){var t=AK(e,"string");return typeof t=="symbol"?t:t+""}function AK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iM=N.createContext({width:-1,height:-1});function TK(e){return Oo(e.width)&&Oo(e.height)}function lM(e){var{children:t,width:r,height:n}=e,i=N.useMemo(()=>({width:r,height:n}),[r,n]);return TK(i)?N.createElement(iM.Provider,{value:i},t):null}var gw=()=>N.useContext(iM),OK=N.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:o,minWidth:d=0,minHeight:g,maxHeight:h,children:x,debounce:y=0,id:w,className:C,onResize:_,style:D={}}=e,k=N.useRef(null),M=N.useRef();M.current=_,N.useImperativeHandle(t,()=>k.current);var[R,F]=N.useState({containerWidth:n.width,containerHeight:n.height}),I=N.useCallback((H,V)=>{F(Q=>{var Y=Math.round(H),X=Math.round(V);return Q.containerWidth===Y&&Q.containerHeight===X?Q:{containerWidth:Y,containerHeight:X}})},[]);N.useEffect(()=>{if(k.current==null||typeof ResizeObserver>"u")return bm;var H=X=>{var he,{width:xe,height:ae}=X[0].contentRect;I(xe,ae),(he=M.current)===null||he===void 0||he.call(M,xe,ae)};y>0&&(H=yK(H,y,{trailing:!0,leading:!1}));var V=new ResizeObserver(H),{width:Q,height:Y}=k.current.getBoundingClientRect();return I(Q,Y),V.observe(k.current),()=>{V.disconnect()}},[I,y]);var{containerWidth:G,containerHeight:U}=R;hT(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:z,calculatedHeight:L}=sM(G,U,{width:i,height:o,aspect:r,maxHeight:h});return hT(z!=null&&z>0||L!=null&&L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,L,i,o,d,g,r),N.createElement("div",{id:w?"".concat(w):void 0,className:fn("recharts-responsive-container",C),style:pT(pT({},D),{},{width:i,height:o,minWidth:d,minHeight:g,maxHeight:h}),ref:k},N.createElement("div",{style:wK({width:i,height:o})},N.createElement(lM,{width:z,height:L},x)))}),xE=N.forwardRef((e,t)=>{var r=gw();if(Oo(r.width)&&Oo(r.height))return e.children;var{width:n,height:i}=NK({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:d}=sM(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return Tt(o)&&Tt(d)?N.createElement(lM,{width:o,height:d},e.children):N.createElement(OK,yE({},e,{width:n,height:i,ref:t}))});function oM(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Hp=()=>{var e,t=Mo(),r=Dt(uK),n=Dt(Vp),i=(e=Dt(zp))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},_K={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},DK=()=>{var e;return(e=Dt(Hn))!==null&&e!==void 0?e:_K},cM=()=>Dt(Sl),uM=()=>Dt(Cl),kK=()=>Dt(e=>e.layout.margin),Sr=e=>e.layout.layoutType,pw=()=>Dt(Sr),MK=()=>{var e=pw();return e!==void 0},qp=e=>{var t=mn(),r=Mo(),{width:n,height:i}=e,o=gw(),d=n,g=i;return o&&(d=o.width>0?o.width:n,g=o.height>0?o.height:i),N.useEffect(()=>{!r&&Oo(d)&&Oo(g)&&t(FW({width:d,height:g}))},[t,r,d,g]),null},dM=Symbol.for("immer-nothing"),yT=Symbol.for("immer-draftable"),is=Symbol.for("immer-state");function Zs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Wf=Object.getPrototypeOf;function Wu(e){return!!e&&!!e[is]}function Oc(e){return e?fM(e)||Array.isArray(e)||!!e[yT]||!!e.constructor?.[yT]||Sm(e)||Gp(e):!1}var PK=Object.prototype.constructor.toString(),xT=new WeakMap;function fM(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=xT.get(r);return n===void 0&&(n=Function.toString.call(r),xT.set(r,n)),n===PK}function Ig(e,t,r=!0){$p(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function $p(e){const t=e[is];return t?t.type_:Array.isArray(e)?1:Sm(e)?2:Gp(e)?3:0}function bE(e,t){return $p(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function mM(e,t,r){const n=$p(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function RK(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Sm(e){return e instanceof Map}function Gp(e){return e instanceof Set}function dc(e){return e.copy_||e.base_}function vE(e,t){if(Sm(e))return new Map(e);if(Gp(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=fM(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[is];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const d=i[o],g=n[d];g.writable===!1&&(g.writable=!0,g.configurable=!0),(g.get||g.set)&&(n[d]={configurable:!0,writable:!0,enumerable:g.enumerable,value:e[d]})}return Object.create(Wf(e),n)}else{const n=Wf(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function yw(e,t=!1){return Yp(e)||Wu(e)||!Oc(e)||($p(e)>1&&Object.defineProperties(e,{set:yh,add:yh,clear:yh,delete:yh}),Object.freeze(e),t&&Object.values(e).forEach(r=>yw(r,!0))),e}function IK(){Zs(2)}var yh={value:IK};function Yp(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var LK={};function _c(e){const t=LK[e];return t||Zs(0,e),t}var Kf;function hM(){return Kf}function BK(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function bT(e,t){t&&(_c("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function EE(e){wE(e),e.drafts_.forEach(FK),e.drafts_=null}function wE(e){e===Kf&&(Kf=e.parent_)}function vT(e){return Kf=BK(Kf,e)}function FK(e){const t=e[is];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ET(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[is].modified_&&(EE(t),Zs(4)),Oc(e)&&(e=Lg(t,e),t.parent_||Bg(t,e)),t.patches_&&_c("Patches").generateReplacementPatches_(r[is].base_,e,t.patches_,t.inversePatches_)):e=Lg(t,r,[]),EE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==dM?e:void 0}function Lg(e,t,r){if(Yp(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[is];if(!i)return Ig(t,(o,d)=>wT(e,i,t,o,d,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return Bg(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let d=o,g=!1;i.type_===3&&(d=new Set(o),o.clear(),g=!0),Ig(d,(h,x)=>wT(e,i,o,h,x,r,g),n),Bg(e,o,!1),r&&e.patches_&&_c("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function wT(e,t,r,n,i,o,d){if(i==null||typeof i!="object"&&!d)return;const g=Yp(i);if(!(g&&!d)){if(Wu(i)){const h=o&&t&&t.type_!==3&&!bE(t.assigned_,n)?o.concat(n):void 0,x=Lg(e,i,h);if(mM(r,n,x),Wu(x))e.canAutoFreeze_=!1;else return}else d&&r.add(i);if(Oc(i)&&!g){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&g)return;Lg(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Sm(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Bg(e,i)}}}function Bg(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&yw(t,r)}function UK(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:hM(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=xw;r&&(i=[n],o=Zf);const{revoke:d,proxy:g}=Proxy.revocable(i,o);return n.draft_=g,n.revoke_=d,g}var xw={get(e,t){if(t===is)return e;const r=dc(e);if(!bE(r,t))return jK(e,r,t);const n=r[t];return e.finalized_||!Oc(n)?n:n===Lb(e.base_,t)?(Bb(e),e.copy_[t]=SE(n,e)):n},has(e,t){return t in dc(e)},ownKeys(e){return Reflect.ownKeys(dc(e))},set(e,t,r){const n=gM(dc(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=Lb(dc(e),t),o=i?.[is];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(RK(r,i)&&(r!==void 0||bE(e.base_,t)))return!0;Bb(e),NE(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Lb(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Bb(e),NE(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=dc(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Zs(11)},getPrototypeOf(e){return Wf(e.base_)},setPrototypeOf(){Zs(12)}},Zf={};Ig(xw,(e,t)=>{Zf[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Zf.deleteProperty=function(e,t){return Zf.set.call(this,e,t,void 0)};Zf.set=function(e,t,r){return xw.set.call(this,e[0],t,r,e[0])};function Lb(e,t){const r=e[is];return(r?dc(r):e)[t]}function jK(e,t,r){const n=gM(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function gM(e,t){if(!(t in e))return;let r=Wf(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Wf(r)}}function NE(e){e.modified_||(e.modified_=!0,e.parent_&&NE(e.parent_))}function Bb(e){e.copy_||(e.copy_=vE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var zK=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const d=this;return function(h=o,...x){return d.produce(h,y=>r.call(this,y,...x))}}typeof r!="function"&&Zs(6),n!==void 0&&typeof n!="function"&&Zs(7);let i;if(Oc(t)){const o=vT(this),d=SE(t,void 0);let g=!0;try{i=r(d),g=!1}finally{g?EE(o):wE(o)}return bT(o,n),ET(i,o)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===dM&&(i=void 0),this.autoFreeze_&&yw(i,!0),n){const o=[],d=[];_c("Patches").generateReplacementPatches_(t,i,o,d),n(o,d)}return i}else Zs(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(d,...g)=>this.produceWithPatches(d,h=>t(h,...g));let n,i;return[this.produce(t,r,(d,g)=>{n=d,i=g}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Oc(e)||Zs(8),Wu(e)&&(e=VK(e));const t=vT(this),r=SE(e,void 0);return r[is].isManual_=!0,wE(t),r}finishDraft(e,t){const r=e&&e[is];(!r||!r.isManual_)&&Zs(9);const{scope_:n}=r;return bT(n,t),ET(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=_c("Patches").applyPatches_;return Wu(e)?n(e,t):this.produce(e,i=>n(i,t))}};function SE(e,t){const r=Sm(e)?_c("MapSet").proxyMap_(e,t):Gp(e)?_c("MapSet").proxySet_(e,t):UK(e,t);return(t?t.scope_:hM()).drafts_.push(r),r}function VK(e){return Wu(e)||Zs(10,e),pM(e)}function pM(e){if(!Oc(e)||Yp(e))return e;const t=e[is];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=vE(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=vE(e,!0);return Ig(r,(i,o)=>{mM(r,i,pM(o))},n),t&&(t.finalized_=!1),r}var HK=new zK;HK.produce;var qK={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},yM=Ia({name:"legend",initialState:qK,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Fr()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=ti(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:Fr()},removeLegendPayload:{reducer(e,t){var r=ti(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Fr()}}}),{setLegendSize:NT,setLegendSettings:$K,addLegendPayload:GK,replaceLegendPayload:YK,removeLegendPayload:XK}=yM.actions,WK=yM.reducer,KK=["contextPayload"];function CE(){return CE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CE.apply(null,arguments)}function ST(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ku(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ST(Object(r),!0).forEach(function(n){ZK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ST(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZK(e,t,r){return(t=QK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QK(e){var t=JK(e,"string");return typeof t=="symbol"?t:t+""}function JK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eZ(e,t){if(e==null)return{};var r,n,i=tZ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function tZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function rZ(e){return e.value}function nZ(e){var{contextPayload:t}=e,r=eZ(e,KK),n=b7(t,e.payloadUniqBy,rZ),i=Ku(Ku({},r),{},{payload:n});return N.isValidElement(e.content)?N.cloneElement(e.content,i):typeof e.content=="function"?N.createElement(e.content,i):N.createElement(GY,i)}function aZ(e,t,r,n,i,o){var{layout:d,align:g,verticalAlign:h}=t,x,y;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(g==="center"&&d==="vertical"?x={left:((n||0)-o.width)/2}:x=g==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(h==="middle"?y={top:((i||0)-o.height)/2}:y=h==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Ku(Ku({},x),y)}function sZ(e){var t=mn();return N.useEffect(()=>{t($K(e))},[t,e]),null}function iZ(e){var t=mn();return N.useEffect(()=>(t(NT(e)),()=>{t(NT({width:0,height:0}))}),[t,e]),null}function lZ(e,t,r,n){return e==="vertical"&&Tt(t)?{height:t}:e==="horizontal"?{width:r||n}:null}var oZ={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function xM(e){var t=Rs(e,oZ),r=jX(),n=LG(),i=kK(),{width:o,height:d,wrapperStyle:g,portal:h}=t,[x,y]=S7([r]),w=cM(),C=uM();if(w==null||C==null)return null;var _=w-(i?.left||0)-(i?.right||0),D=lZ(t.layout,d,o,_),k=h?g:Ku(Ku({position:"absolute",width:D?.width||o||"auto",height:D?.height||d||"auto"},aZ(g,t,i,w,C,x)),g),M=h??n;if(M==null||r==null)return null;var R=N.createElement("div",{className:"recharts-legend-wrapper",style:k,ref:y},N.createElement(sZ,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!h&&N.createElement(iZ,{width:x.width,height:x.height}),N.createElement(nZ,CE({},t,D,{margin:i,chartWidth:w,chartHeight:C,contextPayload:r})));return l2.createPortal(R,M)}xM.displayName="Legend";function AE(){return AE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AE.apply(null,arguments)}function CT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Fb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CT(Object(r),!0).forEach(function(n){cZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cZ(e,t,r){return(t=uZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uZ(e){var t=dZ(e,"string");return typeof t=="symbol"?t:t+""}function dZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fZ(e){return Array.isArray(e)&&yl(e[0])&&yl(e[1])?e.join(" ~ "):e}var mZ=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:o,formatter:d,itemSorter:g,wrapperClassName:h,labelClassName:x,label:y,labelFormatter:w,accessibilityLayer:C=!1}=e,_=()=>{if(o&&o.length){var U={padding:0,margin:0},z=(g?Dp(o,g):o).map((L,H)=>{if(L.type==="none")return null;var V=L.formatter||d||fZ,{value:Q,name:Y}=L,X=Q,he=Y;if(V){var xe=V(Q,Y,L,H,o);if(Array.isArray(xe))[X,he]=xe;else if(xe!=null)X=xe;else return null}var ae=Fb({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},n);return N.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(H),style:ae},yl(he)?N.createElement("span",{className:"recharts-tooltip-item-name"},he):null,yl(he)?N.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,N.createElement("span",{className:"recharts-tooltip-item-value"},X),N.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return N.createElement("ul",{className:"recharts-tooltip-item-list",style:U},z)}return null},D=Fb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),k=Fb({margin:0},i),M=!ss(y),R=M?y:"",F=fn("recharts-default-tooltip",h),I=fn("recharts-tooltip-label",x);M&&w&&o!==void 0&&o!==null&&(R=w(y,o));var G=C?{role:"status","aria-live":"assertive"}:{};return N.createElement("div",AE({className:F,style:D},G),N.createElement("p",{className:I,style:k},N.isValidElement(R)?R:"".concat(R)),_())},mf="recharts-tooltip-wrapper",hZ={visibility:"hidden"};function gZ(e){var{coordinate:t,translateX:r,translateY:n}=e;return fn(mf,{["".concat(mf,"-right")]:Tt(r)&&t&&Tt(t.x)&&r>=t.x,["".concat(mf,"-left")]:Tt(r)&&t&&Tt(t.x)&&r<t.x,["".concat(mf,"-bottom")]:Tt(n)&&t&&Tt(t.y)&&n>=t.y,["".concat(mf,"-top")]:Tt(n)&&t&&Tt(t.y)&&n<t.y})}function AT(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:o,reverseDirection:d,tooltipDimension:g,viewBox:h,viewBoxDimension:x}=e;if(o&&Tt(o[n]))return o[n];var y=r[n]-g-(i>0?i:0),w=r[n]+i;if(t[n])return d[n]?y:w;var C=h[n];if(C==null)return 0;if(d[n]){var _=y,D=C;return _<D?Math.max(w,C):Math.max(y,C)}if(x==null)return 0;var k=w+g,M=C+x;return k>M?Math.max(y,C):Math.max(w,C)}function pZ(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function yZ(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:o,tooltipBox:d,useTranslate3d:g,viewBox:h}=e,x,y,w;return d.height>0&&d.width>0&&r?(y=AT({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:d.width,viewBox:h,viewBoxDimension:h.width}),w=AT({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:d.height,viewBox:h,viewBoxDimension:h.height}),x=pZ({translateX:y,translateY:w,useTranslate3d:g})):x=hZ,{cssProperties:x,cssClasses:gZ({translateX:y,translateY:w,coordinate:r})}}function TT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TT(Object(r),!0).forEach(function(n){TE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TE(e,t,r){return(t=xZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xZ(e){var t=bZ(e,"string");return typeof t=="symbol"?t:t+""}function bZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class vZ extends N.PureComponent{constructor(){super(...arguments),TE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),TE(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:o,coordinate:d,hasPayload:g,isAnimationActive:h,offset:x,position:y,reverseDirection:w,useTranslate3d:C,viewBox:_,wrapperStyle:D,lastBoundingBox:k,innerRef:M,hasPortalFromProps:R}=this.props,{cssClasses:F,cssProperties:I}=yZ({allowEscapeViewBox:r,coordinate:d,offsetTopLeft:x,position:y,reverseDirection:w,tooltipBox:{height:k.height,width:k.width},useTranslate3d:C,viewBox:_}),G=R?{}:xh(xh({transition:h&&t?"transform ".concat(n,"ms ").concat(i):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&g?"visible":"hidden",position:"absolute",top:0,left:0}),U=xh(xh({},G),{},{visibility:!this.state.dismissed&&t&&g?"visible":"hidden"},D);return N.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:F,style:U,ref:M},o)}}var bM=()=>{var e;return(e=Dt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function OE(){return OE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OE.apply(null,arguments)}function OT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _T(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OT(Object(r),!0).forEach(function(n){EZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EZ(e,t,r){return(t=wZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wZ(e){var t=NZ(e,"string");return typeof t=="symbol"?t:t+""}function NZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DT={curveBasisClosed:tY,curveBasisOpen:rY,curveBasis:eY,curveBumpX:jG,curveBumpY:zG,curveLinearClosed:nY,curveLinear:Op,curveMonotoneX:aY,curveMonotoneY:sY,curveNatural:iY,curveStep:lY,curveStepAfter:cY,curveStepBefore:oY},Fg=e=>Vn(e.x)&&Vn(e.y),kT=e=>e.base!=null&&Fg(e.base)&&Fg(e),hf=e=>e.x,gf=e=>e.y,SZ=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(xm(e));return(r==="curveMonotone"||r==="curveBump")&&t?DT["".concat(r).concat(t==="vertical"?"Y":"X")]:DT[r]||Op},CZ=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:o=!1}=e,d=SZ(t,i),g=o?r.filter(Fg):r,h;if(Array.isArray(n)){var x=r.map((_,D)=>_T(_T({},_),{},{base:n[D]}));i==="vertical"?h=uh().y(gf).x1(hf).x0(_=>_.base.x):h=uh().x(hf).y1(gf).y0(_=>_.base.y);var y=h.defined(kT).curve(d),w=o?x.filter(kT):x;return y(w)}i==="vertical"&&Tt(n)?h=uh().y(gf).x1(hf).x0(n):Tt(n)?h=uh().x(hf).y1(gf).y0(n):h=Xk().x(hf).y(gf);var C=h.defined(Fg).curve(d);return C(g)},bw=e=>{var{className:t,points:r,path:n,pathRef:i}=e;if((!r||!r.length)&&!n)return null;var o=r&&r.length?CZ(e):n;return N.createElement("path",OE({},$u(e),PY(e),{className:fn("recharts-curve",t),d:o===null?void 0:o,ref:i}))},AZ=["x","y","top","left","width","height","className"];function _E(){return _E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_E.apply(null,arguments)}function MT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function TZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MT(Object(r),!0).forEach(function(n){OZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OZ(e,t,r){return(t=_Z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Z(e){var t=DZ(e,"string");return typeof t=="symbol"?t:t+""}function DZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kZ(e,t){if(e==null)return{};var r,n,i=MZ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function MZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var PZ=(e,t,r,n,i,o)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(o,",").concat(t,"h").concat(r),RZ=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:o=0,height:d=0,className:g}=e,h=kZ(e,AZ),x=TZ({x:t,y:r,top:n,left:i,width:o,height:d},h);return!Tt(t)||!Tt(r)||!Tt(o)||!Tt(d)||!Tt(n)||!Tt(i)?null:N.createElement("path",_E({},Ds(x),{className:fn("recharts-cross",g),d:PZ(t,r,o,d,n,i)}))};function IZ(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function PT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function RT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PT(Object(r),!0).forEach(function(n){LZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LZ(e,t,r){return(t=BZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BZ(e){var t=FZ(e,"string");return typeof t=="symbol"?t:t+""}function FZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UZ=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),vM=(e,t,r)=>e.map(n=>"".concat(UZ(n)," ").concat(t,"ms ").concat(r)).join(","),jZ=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),Qf=(e,t)=>Object.keys(t).reduce((r,n)=>RT(RT({},r),{},{[n]:e(n,t[n])}),{});function IT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Mn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IT(Object(r),!0).forEach(function(n){zZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zZ(e,t,r){return(t=VZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VZ(e){var t=HZ(e,"string");return typeof t=="symbol"?t:t+""}function HZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ug=(e,t,r)=>e+(t-e)*r,DE=e=>{var{from:t,to:r}=e;return t!==r},EM=(e,t,r)=>{var n=Qf((i,o)=>{if(DE(o)){var[d,g]=e(o.from,o.to,o.velocity);return Mn(Mn({},o),{},{from:d,velocity:g})}return o},t);return r<1?Qf((i,o)=>DE(o)?Mn(Mn({},o),{},{velocity:Ug(o.velocity,n[i].velocity,r),from:Ug(o.from,n[i].from,r)}):o,t):EM(e,n,r-1)};function qZ(e,t,r,n,i,o){var d,g=n.reduce((C,_)=>Mn(Mn({},C),{},{[_]:{from:e[_],velocity:0,to:t[_]}}),{}),h=()=>Qf((C,_)=>_.from,g),x=()=>!Object.values(g).filter(DE).length,y=null,w=C=>{d||(d=C);var _=C-d,D=_/r.dt;g=EM(r,g,D),i(Mn(Mn(Mn({},e),t),h())),d=C,x()||(y=o.setTimeout(w))};return()=>(y=o.setTimeout(w),()=>{var C;(C=y)===null||C===void 0||C()})}function $Z(e,t,r,n,i,o,d){var g=null,h=i.reduce((w,C)=>Mn(Mn({},w),{},{[C]:[e[C],t[C]]}),{}),x,y=w=>{x||(x=w);var C=(w-x)/n,_=Qf((k,M)=>Ug(...M,r(C)),h);if(o(Mn(Mn(Mn({},e),t),_)),C<1)g=d.setTimeout(y);else{var D=Qf((k,M)=>Ug(...M,r(1)),h);o(Mn(Mn(Mn({},e),t),D))}};return()=>(g=d.setTimeout(y),()=>{var w;(w=g)===null||w===void 0||w()})}const GZ=(e,t,r,n,i,o)=>{var d=jZ(e,t);return r==null?()=>(i(Mn(Mn({},e),t)),()=>{}):r.isStepper===!0?qZ(e,t,r,d,i,o):$Z(e,t,r,n,d,i,o)};var jg=1e-4,wM=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],NM=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),LT=(e,t)=>r=>{var n=wM(e,t);return NM(n,r)},YZ=(e,t)=>r=>{var n=wM(e,t),i=[...n.map((o,d)=>o*d).slice(1),0];return NM(i,r)},XZ=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,o=r[0].split("(");if(o[0]==="cubic-bezier"&&((i=o[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var d=o[1].split(")")[0].split(",").map(g=>parseFloat(g));return[d[0],d[1],d[2],d[3]]}}}return r.length===4?r:[0,0,1,1]},WZ=(e,t,r,n)=>{var i=LT(e,r),o=LT(t,n),d=YZ(e,r),g=x=>x>1?1:x<0?0:x,h=x=>{for(var y=x>1?1:x,w=y,C=0;C<8;++C){var _=i(w)-y,D=d(w);if(Math.abs(_-y)<jg||D<jg)return o(w);w=g(w-_/D)}return o(w)};return h.isStepper=!1,h},BT=function(){return WZ(...XZ(...arguments))},KZ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,o=(d,g,h)=>{var x=-(d-g)*r,y=h*n,w=h+(x-y)*i/1e3,C=h*i/1e3+d;return Math.abs(C-g)<jg&&Math.abs(w)<jg?[g,0]:[C,w]};return o.isStepper=!0,o.dt=i,o},ZZ=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return BT(e);case"spring":return KZ();default:if(e.split("(")[0]==="cubic-bezier")return BT(e)}return typeof e=="function"?e:null};function QZ(e){var t,r=()=>null,n=!1,i=null,o=d=>{if(!n){if(Array.isArray(d)){if(!d.length)return;var g=d,[h,...x]=g;if(typeof h=="number"){i=e.setTimeout(o.bind(null,x),h);return}o(h),i=e.setTimeout(o.bind(null,x));return}typeof d=="string"&&(t=d,r(t)),typeof d=="object"&&(t=d,r(t)),typeof d=="function"&&d()}};return{stop:()=>{n=!0},start:d=>{n=!1,i&&(i(),i=null),o(d)},subscribe:d=>(r=d,()=>{r=()=>null}),getTimeoutController:()=>e}}class JZ{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,o=d=>{d-n>=r?t(d):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{i!=null&&cancelAnimationFrame(i)}}}function eQ(){return QZ(new JZ)}var tQ=N.createContext(eQ);function rQ(e,t){var r=N.useContext(tQ);return N.useMemo(()=>t??r(e),[e,t,r])}var nQ=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Xp={devToolsEnabled:!1,isSsr:nQ()},aQ={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},FT={t:0},Ub={t:1};function vw(e){var t=Rs(e,aQ),{isActive:r,canBegin:n,duration:i,easing:o,begin:d,onAnimationEnd:g,onAnimationStart:h,children:x}=t,y=r==="auto"?!Xp.isSsr:r,w=rQ(t.animationId,t.animationManager),[C,_]=N.useState(y?FT:Ub),D=N.useRef(null);return N.useEffect(()=>{y||_(Ub)},[y]),N.useEffect(()=>{if(!y||!n)return bm;var k=GZ(FT,Ub,ZZ(o),i,_,w.getTimeoutController()),M=()=>{D.current=k()};return w.start([h,d,M,i,g]),()=>{w.stop(),D.current&&D.current(),g()}},[y,n,i,o,d,h,g,w]),x(C.t)}function Ew(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=N.useRef($f(t)),n=N.useRef(e);return n.current!==e&&(r.current=$f(t),n.current=e),r.current}var sQ=["radius"],iQ=["radius"];function UT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UT(Object(r),!0).forEach(function(n){lQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lQ(e,t,r){return(t=oQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oQ(e){var t=cQ(e,"string");return typeof t=="symbol"?t:t+""}function cQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zg(){return zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zg.apply(null,arguments)}function zT(e,t){if(e==null)return{};var r,n,i=uQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function uQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var VT=(e,t,r,n,i)=>{var o=Math.min(Math.abs(r)/2,Math.abs(n)/2),d=n>=0?1:-1,g=r>=0?1:-1,h=n>=0&&r>=0||n<0&&r<0?1:0,x;if(o>0&&i instanceof Array){for(var y=[0,0,0,0],w=0,C=4;w<C;w++)y[w]=i[w]>o?o:i[w];x="M".concat(e,",").concat(t+d*y[0]),y[0]>0&&(x+="A ".concat(y[0],",").concat(y[0],",0,0,").concat(h,",").concat(e+g*y[0],",").concat(t)),x+="L ".concat(e+r-g*y[1],",").concat(t),y[1]>0&&(x+="A ".concat(y[1],",").concat(y[1],",0,0,").concat(h,`,
        `).concat(e+r,",").concat(t+d*y[1])),x+="L ".concat(e+r,",").concat(t+n-d*y[2]),y[2]>0&&(x+="A ".concat(y[2],",").concat(y[2],",0,0,").concat(h,`,
        `).concat(e+r-g*y[2],",").concat(t+n)),x+="L ".concat(e+g*y[3],",").concat(t+n),y[3]>0&&(x+="A ".concat(y[3],",").concat(y[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(t+n-d*y[3])),x+="Z"}else if(o>0&&i===+i&&i>0){var _=Math.min(o,i);x="M ".concat(e,",").concat(t+d*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(h,",").concat(e+g*_,",").concat(t,`
            L `).concat(e+r-g*_,",").concat(t,`
            A `).concat(_,",").concat(_,",0,0,").concat(h,",").concat(e+r,",").concat(t+d*_,`
            L `).concat(e+r,",").concat(t+n-d*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(h,",").concat(e+r-g*_,",").concat(t+n,`
            L `).concat(e+g*_,",").concat(t+n,`
            A `).concat(_,",").concat(_,",0,0,").concat(h,",").concat(e,",").concat(t+n-d*_," Z")}else x="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return x},HT={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},SM=e=>{var t=Rs(e,HT),r=N.useRef(null),[n,i]=N.useState(-1);N.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var se=r.current.getTotalLength();se&&i(se)}catch{}},[]);var{x:o,y:d,width:g,height:h,radius:x,className:y}=t,{animationEasing:w,animationDuration:C,animationBegin:_,isAnimationActive:D,isUpdateAnimationActive:k}=t,M=N.useRef(g),R=N.useRef(h),F=N.useRef(o),I=N.useRef(d),G=N.useMemo(()=>({x:o,y:d,width:g,height:h,radius:x}),[o,d,g,h,x]),U=Ew(G,"rectangle-");if(o!==+o||d!==+d||g!==+g||h!==+h||g===0||h===0)return null;var z=fn("recharts-rectangle",y);if(!k){var L=Ds(t),{radius:H}=L,V=zT(L,sQ);return N.createElement("path",zg({},V,{radius:typeof x=="number"?x:void 0,className:z,d:VT(o,d,g,h,x)}))}var Q=M.current,Y=R.current,X=F.current,he=I.current,xe="0px ".concat(n===-1?1:n,"px"),ae="".concat(n,"px 0px"),ne=vM(["strokeDasharray"],C,typeof w=="string"?w:HT.animationEasing);return N.createElement(vw,{animationId:U,key:U,canBegin:n>0,duration:C,easing:w,isActive:k,begin:_},se=>{var Te=Ws(Q,g,se),we=Ws(Y,h,se),te=Ws(X,o,se),K=Ws(he,d,se);r.current&&(M.current=Te,R.current=we,F.current=te,I.current=K);var ee;D?se>0?ee={transition:ne,strokeDasharray:ae}:ee={strokeDasharray:xe}:ee={strokeDasharray:ae};var fe=Ds(t),{radius:ce}=fe,Se=zT(fe,iQ);return N.createElement("path",zg({},Se,{radius:typeof x=="number"?x:void 0,className:z,d:VT(te,K,Te,we,x),ref:r,style:jT(jT({},ee),t.style)}))})};function qT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $T(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qT(Object(r),!0).forEach(function(n){dQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dQ(e,t,r){return(t=fQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fQ(e){var t=mQ(e,"string");return typeof t=="symbol"?t:t+""}function mQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vg=Math.PI/180,hQ=e=>e*180/Math.PI,Sn=(e,t,r,n)=>({x:e+Math.cos(-Vg*n)*r,y:t+Math.sin(-Vg*n)*r}),CM=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},gQ=(e,t)=>{var{x:r,y:n}=e,{x:i,y:o}=t;return Math.sqrt((r-i)**2+(n-o)**2)},pQ=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:o}=t,d=gQ({x:r,y:n},{x:i,y:o});if(d<=0)return{radius:d,angle:0};var g=(r-i)/d,h=Math.acos(g);return n>o&&(h=2*Math.PI-h),{radius:d,angle:hQ(h),angleInRadian:h}},yQ=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),o=Math.min(n,i);return{startAngle:t-o*360,endAngle:r-o*360}},xQ=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),o=Math.floor(n/360),d=Math.min(i,o);return e+d*360},bQ=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:o}=pQ({x:r,y:n},t),{innerRadius:d,outerRadius:g}=t;if(i<d||i>g||i===0)return null;var{startAngle:h,endAngle:x}=yQ(t),y=o,w;if(h<=x){for(;y>x;)y-=360;for(;y<h;)y+=360;w=y>=h&&y<=x}else{for(;y>h;)y-=360;for(;y<x;)y+=360;w=y>=x&&y<=h}return w?$T($T({},t),{},{radius:i,angle:xQ(y,t)}):null};function AM(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:o}=e,d=Sn(t,r,n,i),g=Sn(t,r,n,o);return{points:[d,g],cx:t,cy:r,radius:n,startAngle:i,endAngle:o}}function kE(){return kE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kE.apply(null,arguments)}var vQ=(e,t)=>{var r=ka(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},bh=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:o,isExternal:d,cornerRadius:g,cornerIsExternal:h}=e,x=g*(d?1:-1)+n,y=Math.asin(g/x)/Vg,w=h?i:i+o*y,C=Sn(t,r,x,w),_=Sn(t,r,n,w),D=h?i-o*y:i,k=Sn(t,r,x*Math.cos(y*Vg),D);return{center:C,circleTangency:_,lineTangency:k,theta:y}},TM=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:o,endAngle:d}=e,g=vQ(o,d),h=o+g,x=Sn(t,r,i,o),y=Sn(t,r,i,h),w="M ".concat(x.x,",").concat(x.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(g)>180),",").concat(+(o>h),`,
    `).concat(y.x,",").concat(y.y,`
  `);if(n>0){var C=Sn(t,r,n,o),_=Sn(t,r,n,h);w+="L ".concat(_.x,",").concat(_.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(g)>180),",").concat(+(o<=h),`,
            `).concat(C.x,",").concat(C.y," Z")}else w+="L ".concat(t,",").concat(r," Z");return w},EQ=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:o,forceCornerRadius:d,cornerIsExternal:g,startAngle:h,endAngle:x}=e,y=ka(x-h),{circleTangency:w,lineTangency:C,theta:_}=bh({cx:t,cy:r,radius:i,angle:h,sign:y,cornerRadius:o,cornerIsExternal:g}),{circleTangency:D,lineTangency:k,theta:M}=bh({cx:t,cy:r,radius:i,angle:x,sign:-y,cornerRadius:o,cornerIsExternal:g}),R=g?Math.abs(h-x):Math.abs(h-x)-_-M;if(R<0)return d?"M ".concat(C.x,",").concat(C.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):TM({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:h,endAngle:x});var F="M ".concat(C.x,",").concat(C.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(y<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(R>180),",").concat(+(y<0),",").concat(D.x,",").concat(D.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(y<0),",").concat(k.x,",").concat(k.y,`
  `);if(n>0){var{circleTangency:I,lineTangency:G,theta:U}=bh({cx:t,cy:r,radius:n,angle:h,sign:y,isExternal:!0,cornerRadius:o,cornerIsExternal:g}),{circleTangency:z,lineTangency:L,theta:H}=bh({cx:t,cy:r,radius:n,angle:x,sign:-y,isExternal:!0,cornerRadius:o,cornerIsExternal:g}),V=g?Math.abs(h-x):Math.abs(h-x)-U-H;if(V<0&&o===0)return"".concat(F,"L").concat(t,",").concat(r,"Z");F+="L".concat(L.x,",").concat(L.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(y<0),",").concat(z.x,",").concat(z.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(V>180),",").concat(+(y>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(y<0),",").concat(G.x,",").concat(G.y,"Z")}else F+="L".concat(t,",").concat(r,"Z");return F},wQ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},OM=e=>{var t=Rs(e,wQ),{cx:r,cy:n,innerRadius:i,outerRadius:o,cornerRadius:d,forceCornerRadius:g,cornerIsExternal:h,startAngle:x,endAngle:y,className:w}=t;if(o<i||x===y)return null;var C=fn("recharts-sector",w),_=o-i,D=ns(d,_,0,!0),k;return D>0&&Math.abs(x-y)<360?k=EQ({cx:r,cy:n,innerRadius:i,outerRadius:o,cornerRadius:Math.min(D,_/2),forceCornerRadius:g,cornerIsExternal:h,startAngle:x,endAngle:y}):k=TM({cx:r,cy:n,innerRadius:i,outerRadius:o,startAngle:x,endAngle:y}),N.createElement("path",kE({},Ds(t),{className:C,d:k}))};function NQ(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(o7(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:o,outerRadius:d,angle:g}=t,h=Sn(n,i,o,g),x=Sn(n,i,d,g);return[{x:h.x,y:h.y},{x:x.x,y:x.y}]}return AM(t)}}var jb={},zb={},Vb={},GT;function SQ(){return GT||(GT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E7();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(Vb)),Vb}var YT;function CQ(){return YT||(YT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SQ();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(zb)),zb}var XT;function AQ(){return XT||(XT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w7(),r=CQ();function n(i,o,d){d&&typeof d!="number"&&t.isIterateeCall(i,o,d)&&(o=d=void 0),i=r.toFinite(i),o===void 0?(o=i,i=0):o=r.toFinite(o),d=d===void 0?i<o?1:-1:r.toFinite(d);const g=Math.max(Math.ceil((o-i)/(d||1)),0),h=new Array(g);for(let x=0;x<g;x++)h[x]=i,i+=d;return h}e.range=n})(jb)),jb}var Hb,WT;function TQ(){return WT||(WT=1,Hb=AQ().range),Hb}var OQ=TQ();const _M=ki(OQ);function wo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _Q(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ww(e){let t,r,n;e.length!==2?(t=wo,r=(g,h)=>wo(e(g),h),n=(g,h)=>e(g)-h):(t=e===wo||e===_Q?e:DQ,r=e,n=e);function i(g,h,x=0,y=g.length){if(x<y){if(t(h,h)!==0)return y;do{const w=x+y>>>1;r(g[w],h)<0?x=w+1:y=w}while(x<y)}return x}function o(g,h,x=0,y=g.length){if(x<y){if(t(h,h)!==0)return y;do{const w=x+y>>>1;r(g[w],h)<=0?x=w+1:y=w}while(x<y)}return x}function d(g,h,x=0,y=g.length){const w=i(g,h,x,y-1);return w>x&&n(g[w-1],h)>-n(g[w],h)?w-1:w}return{left:i,center:d,right:o}}function DQ(){return 0}function DM(e){return e===null?NaN:+e}function*kQ(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const MQ=ww(wo),Cm=MQ.right;ww(DM).center;class KT extends Map{constructor(t,r=IQ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(ZT(this,t))}has(t){return super.has(ZT(this,t))}set(t,r){return super.set(PQ(this,t),r)}delete(t){return super.delete(RQ(this,t))}}function ZT({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function PQ({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function RQ({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function IQ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function LQ(e=wo){if(e===wo)return kM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function kM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const BQ=Math.sqrt(50),FQ=Math.sqrt(10),UQ=Math.sqrt(2);function Hg(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),d=o>=BQ?10:o>=FQ?5:o>=UQ?2:1;let g,h,x;return i<0?(x=Math.pow(10,-i)/d,g=Math.round(e*x),h=Math.round(t*x),g/x<e&&++g,h/x>t&&--h,x=-x):(x=Math.pow(10,i)*d,g=Math.round(e/x),h=Math.round(t/x),g*x<e&&++g,h*x>t&&--h),h<g&&.5<=r&&r<2?Hg(e,t,r*2):[g,h,x]}function ME(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,o,d]=n?Hg(t,e,r):Hg(e,t,r);if(!(o>=i))return[];const g=o-i+1,h=new Array(g);if(n)if(d<0)for(let x=0;x<g;++x)h[x]=(o-x)/-d;else for(let x=0;x<g;++x)h[x]=(o-x)*d;else if(d<0)for(let x=0;x<g;++x)h[x]=(i+x)/-d;else for(let x=0;x<g;++x)h[x]=(i+x)*d;return h}function PE(e,t,r){return t=+t,e=+e,r=+r,Hg(e,t,r)[2]}function RE(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?PE(t,e,r):PE(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function QT(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function JT(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function MM(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?kM:LQ(i);n>r;){if(n-r>600){const h=n-r+1,x=t-r+1,y=Math.log(h),w=.5*Math.exp(2*y/3),C=.5*Math.sqrt(y*w*(h-w)/h)*(x-h/2<0?-1:1),_=Math.max(r,Math.floor(t-x*w/h+C)),D=Math.min(n,Math.floor(t+(h-x)*w/h+C));MM(e,t,_,D,i)}const o=e[t];let d=r,g=n;for(pf(e,r,t),i(e[n],o)>0&&pf(e,r,n);d<g;){for(pf(e,d,g),++d,--g;i(e[d],o)<0;)++d;for(;i(e[g],o)>0;)--g}i(e[r],o)===0?pf(e,r,g):(++g,pf(e,g,n)),g<=t&&(r=g+1),t<=g&&(n=g-1)}return e}function pf(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function jQ(e,t,r){if(e=Float64Array.from(kQ(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return JT(e);if(t>=1)return QT(e);var n,i=(n-1)*t,o=Math.floor(i),d=QT(MM(e,o).subarray(0,o+1)),g=JT(e.subarray(o+1));return d+(g-d)*(i-o)}}function zQ(e,t,r=DM){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,o=Math.floor(i),d=+r(e[o],o,e),g=+r(e[o+1],o+1,e);return d+(g-d)*(i-o)}}function VQ(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(i);++n<i;)o[n]=e+n*r;return o}function Is(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Al(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const IE=Symbol("implicit");function Nw(){var e=new KT,t=[],r=[],n=IE;function i(o){let d=e.get(o);if(d===void 0){if(n!==IE)return n;e.set(o,d=t.push(o)-1)}return r[d%r.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new KT;for(const d of o)e.has(d)||e.set(d,t.push(d)-1);return i},i.range=function(o){return arguments.length?(r=Array.from(o),i):r.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Nw(t,r).unknown(n)},Is.apply(i,arguments),i}function Sw(){var e=Nw().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,o,d,g=!1,h=0,x=0,y=.5;delete e.unknown;function w(){var C=t().length,_=i<n,D=_?i:n,k=_?n:i;o=(k-D)/Math.max(1,C-h+x*2),g&&(o=Math.floor(o)),D+=(k-D-o*(C-h))*y,d=o*(1-h),g&&(D=Math.round(D),d=Math.round(d));var M=VQ(C).map(function(R){return D+o*R});return r(_?M.reverse():M)}return e.domain=function(C){return arguments.length?(t(C),w()):t()},e.range=function(C){return arguments.length?([n,i]=C,n=+n,i=+i,w()):[n,i]},e.rangeRound=function(C){return[n,i]=C,n=+n,i=+i,g=!0,w()},e.bandwidth=function(){return d},e.step=function(){return o},e.round=function(C){return arguments.length?(g=!!C,w()):g},e.padding=function(C){return arguments.length?(h=Math.min(1,x=+C),w()):h},e.paddingInner=function(C){return arguments.length?(h=Math.min(1,C),w()):h},e.paddingOuter=function(C){return arguments.length?(x=+C,w()):x},e.align=function(C){return arguments.length?(y=Math.max(0,Math.min(1,C)),w()):y},e.copy=function(){return Sw(t(),[n,i]).round(g).paddingInner(h).paddingOuter(x).align(y)},Is.apply(w(),arguments)}function PM(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return PM(t())},e}function HQ(){return PM(Sw.apply(null,arguments).paddingInner(1))}function Cw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function RM(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Am(){}var Jf=.7,qg=1/Jf,ju="\\s*([+-]?\\d+)\\s*",em="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ci="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qQ=/^#([0-9a-f]{3,8})$/,$Q=new RegExp(`^rgb\\(${ju},${ju},${ju}\\)$`),GQ=new RegExp(`^rgb\\(${Ci},${Ci},${Ci}\\)$`),YQ=new RegExp(`^rgba\\(${ju},${ju},${ju},${em}\\)$`),XQ=new RegExp(`^rgba\\(${Ci},${Ci},${Ci},${em}\\)$`),WQ=new RegExp(`^hsl\\(${em},${Ci},${Ci}\\)$`),KQ=new RegExp(`^hsla\\(${em},${Ci},${Ci},${em}\\)$`),e6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cw(Am,tm,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:t6,formatHex:t6,formatHex8:ZQ,formatHsl:QQ,formatRgb:r6,toString:r6});function t6(){return this.rgb().formatHex()}function ZQ(){return this.rgb().formatHex8()}function QQ(){return IM(this).formatHsl()}function r6(){return this.rgb().formatRgb()}function tm(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=qQ.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?n6(t):r===3?new Ma(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?vh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?vh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$Q.exec(e))?new Ma(t[1],t[2],t[3],1):(t=GQ.exec(e))?new Ma(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=YQ.exec(e))?vh(t[1],t[2],t[3],t[4]):(t=XQ.exec(e))?vh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=WQ.exec(e))?i6(t[1],t[2]/100,t[3]/100,1):(t=KQ.exec(e))?i6(t[1],t[2]/100,t[3]/100,t[4]):e6.hasOwnProperty(e)?n6(e6[e]):e==="transparent"?new Ma(NaN,NaN,NaN,0):null}function n6(e){return new Ma(e>>16&255,e>>8&255,e&255,1)}function vh(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ma(e,t,r,n)}function JQ(e){return e instanceof Am||(e=tm(e)),e?(e=e.rgb(),new Ma(e.r,e.g,e.b,e.opacity)):new Ma}function LE(e,t,r,n){return arguments.length===1?JQ(e):new Ma(e,t,r,n??1)}function Ma(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Cw(Ma,LE,RM(Am,{brighter(e){return e=e==null?qg:Math.pow(qg,e),new Ma(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jf:Math.pow(Jf,e),new Ma(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ma(Nc(this.r),Nc(this.g),Nc(this.b),$g(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:a6,formatHex:a6,formatHex8:eJ,formatRgb:s6,toString:s6}));function a6(){return`#${pc(this.r)}${pc(this.g)}${pc(this.b)}`}function eJ(){return`#${pc(this.r)}${pc(this.g)}${pc(this.b)}${pc((isNaN(this.opacity)?1:this.opacity)*255)}`}function s6(){const e=$g(this.opacity);return`${e===1?"rgb(":"rgba("}${Nc(this.r)}, ${Nc(this.g)}, ${Nc(this.b)}${e===1?")":`, ${e})`}`}function $g(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pc(e){return e=Nc(e),(e<16?"0":"")+e.toString(16)}function i6(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Qs(e,t,r,n)}function IM(e){if(e instanceof Qs)return new Qs(e.h,e.s,e.l,e.opacity);if(e instanceof Am||(e=tm(e)),!e)return new Qs;if(e instanceof Qs)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),d=NaN,g=o-i,h=(o+i)/2;return g?(t===o?d=(r-n)/g+(r<n)*6:r===o?d=(n-t)/g+2:d=(t-r)/g+4,g/=h<.5?o+i:2-o-i,d*=60):g=h>0&&h<1?0:d,new Qs(d,g,h,e.opacity)}function tJ(e,t,r,n){return arguments.length===1?IM(e):new Qs(e,t,r,n??1)}function Qs(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Cw(Qs,tJ,RM(Am,{brighter(e){return e=e==null?qg:Math.pow(qg,e),new Qs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jf:Math.pow(Jf,e),new Qs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Ma(qb(e>=240?e-240:e+120,i,n),qb(e,i,n),qb(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Qs(l6(this.h),Eh(this.s),Eh(this.l),$g(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=$g(this.opacity);return`${e===1?"hsl(":"hsla("}${l6(this.h)}, ${Eh(this.s)*100}%, ${Eh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function l6(e){return e=(e||0)%360,e<0?e+360:e}function Eh(e){return Math.max(0,Math.min(1,e||0))}function qb(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Aw=e=>()=>e;function rJ(e,t){return function(r){return e+r*t}}function nJ(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function aJ(e){return(e=+e)==1?LM:function(t,r){return r-t?nJ(t,r,e):Aw(isNaN(t)?r:t)}}function LM(e,t){var r=t-e;return r?rJ(e,r):Aw(isNaN(e)?t:e)}const o6=(function e(t){var r=aJ(t);function n(i,o){var d=r((i=LE(i)).r,(o=LE(o)).r),g=r(i.g,o.g),h=r(i.b,o.b),x=LM(i.opacity,o.opacity);return function(y){return i.r=d(y),i.g=g(y),i.b=h(y),i.opacity=x(y),i+""}}return n.gamma=e,n})(1);function sJ(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=e[i]*(1-o)+t[i]*o;return n}}function iJ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function lJ(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),o=new Array(r),d;for(d=0;d<n;++d)i[d]=ud(e[d],t[d]);for(;d<r;++d)o[d]=t[d];return function(g){for(d=0;d<n;++d)o[d]=i[d](g);return o}}function oJ(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Gg(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function cJ(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=ud(e[i],t[i]):n[i]=t[i];return function(o){for(i in r)n[i]=r[i](o);return n}}var BE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$b=new RegExp(BE.source,"g");function uJ(e){return function(){return e}}function dJ(e){return function(t){return e(t)+""}}function fJ(e,t){var r=BE.lastIndex=$b.lastIndex=0,n,i,o,d=-1,g=[],h=[];for(e=e+"",t=t+"";(n=BE.exec(e))&&(i=$b.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),g[d]?g[d]+=o:g[++d]=o),(n=n[0])===(i=i[0])?g[d]?g[d]+=i:g[++d]=i:(g[++d]=null,h.push({i:d,x:Gg(n,i)})),r=$b.lastIndex;return r<t.length&&(o=t.slice(r),g[d]?g[d]+=o:g[++d]=o),g.length<2?h[0]?dJ(h[0].x):uJ(t):(t=h.length,function(x){for(var y=0,w;y<t;++y)g[(w=h[y]).i]=w.x(x);return g.join("")})}function ud(e,t){var r=typeof t,n;return t==null||r==="boolean"?Aw(t):(r==="number"?Gg:r==="string"?(n=tm(t))?(t=n,o6):fJ:t instanceof tm?o6:t instanceof Date?oJ:iJ(t)?sJ:Array.isArray(t)?lJ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?cJ:Gg)(e,t)}function Tw(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function mJ(e,t){t===void 0&&(t=e,e=ud);for(var r=0,n=t.length-1,i=t[0],o=new Array(n<0?0:n);r<n;)o[r]=e(i,i=t[++r]);return function(d){var g=Math.max(0,Math.min(n-1,Math.floor(d*=n)));return o[g](d-g)}}function hJ(e){return function(){return e}}function Yg(e){return+e}var c6=[0,1];function ma(e){return e}function FE(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:hJ(isNaN(t)?NaN:.5)}function gJ(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function pJ(e,t,r){var n=e[0],i=e[1],o=t[0],d=t[1];return i<n?(n=FE(i,n),o=r(d,o)):(n=FE(n,i),o=r(o,d)),function(g){return o(n(g))}}function yJ(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),o=new Array(n),d=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++d<n;)i[d]=FE(e[d],e[d+1]),o[d]=r(t[d],t[d+1]);return function(g){var h=Cm(e,g,1,n)-1;return o[h](i[h](g))}}function Tm(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Wp(){var e=c6,t=c6,r=ud,n,i,o,d=ma,g,h,x;function y(){var C=Math.min(e.length,t.length);return d!==ma&&(d=gJ(e[0],e[C-1])),g=C>2?yJ:pJ,h=x=null,w}function w(C){return C==null||isNaN(C=+C)?o:(h||(h=g(e.map(n),t,r)))(n(d(C)))}return w.invert=function(C){return d(i((x||(x=g(t,e.map(n),Gg)))(C)))},w.domain=function(C){return arguments.length?(e=Array.from(C,Yg),y()):e.slice()},w.range=function(C){return arguments.length?(t=Array.from(C),y()):t.slice()},w.rangeRound=function(C){return t=Array.from(C),r=Tw,y()},w.clamp=function(C){return arguments.length?(d=C?!0:ma,y()):d!==ma},w.interpolate=function(C){return arguments.length?(r=C,y()):r},w.unknown=function(C){return arguments.length?(o=C,w):o},function(C,_){return n=C,i=_,y()}}function Ow(){return Wp()(ma,ma)}function xJ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Xg(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Zu(e){return e=Xg(Math.abs(e)),e?e[1]:NaN}function bJ(e,t){return function(r,n){for(var i=r.length,o=[],d=0,g=e[0],h=0;i>0&&g>0&&(h+g+1>n&&(g=Math.max(1,n-h)),o.push(r.substring(i-=g,i+g)),!((h+=g+1)>n));)g=e[d=(d+1)%e.length];return o.reverse().join(t)}}function vJ(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var EJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rm(e){if(!(t=EJ.exec(e)))throw new Error("invalid format: "+e);var t;return new _w({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}rm.prototype=_w.prototype;function _w(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}_w.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wJ(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var BM;function NJ(e,t){var r=Xg(e,t);if(!r)return e+"";var n=r[0],i=r[1],o=i-(BM=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,d=n.length;return o===d?n:o>d?n+new Array(o-d+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+Xg(e,Math.max(0,t+o-1))[0]}function u6(e,t){var r=Xg(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const d6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:xJ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>u6(e*100,t),r:u6,s:NJ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function f6(e){return e}var m6=Array.prototype.map,h6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function SJ(e){var t=e.grouping===void 0||e.thousands===void 0?f6:bJ(m6.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?f6:vJ(m6.call(e.numerals,String)),d=e.percent===void 0?"%":e.percent+"",g=e.minus===void 0?"":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function x(w){w=rm(w);var C=w.fill,_=w.align,D=w.sign,k=w.symbol,M=w.zero,R=w.width,F=w.comma,I=w.precision,G=w.trim,U=w.type;U==="n"?(F=!0,U="g"):d6[U]||(I===void 0&&(I=12),G=!0,U="g"),(M||C==="0"&&_==="=")&&(M=!0,C="0",_="=");var z=k==="$"?r:k==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",L=k==="$"?n:/[%p]/.test(U)?d:"",H=d6[U],V=/[defgprs%]/.test(U);I=I===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function Q(Y){var X=z,he=L,xe,ae,ne;if(U==="c")he=H(Y)+he,Y="";else{Y=+Y;var se=Y<0||1/Y<0;if(Y=isNaN(Y)?h:H(Math.abs(Y),I),G&&(Y=wJ(Y)),se&&+Y==0&&D!=="+"&&(se=!1),X=(se?D==="("?D:g:D==="-"||D==="("?"":D)+X,he=(U==="s"?h6[8+BM/3]:"")+he+(se&&D==="("?")":""),V){for(xe=-1,ae=Y.length;++xe<ae;)if(ne=Y.charCodeAt(xe),48>ne||ne>57){he=(ne===46?i+Y.slice(xe+1):Y.slice(xe))+he,Y=Y.slice(0,xe);break}}}F&&!M&&(Y=t(Y,1/0));var Te=X.length+Y.length+he.length,we=Te<R?new Array(R-Te+1).join(C):"";switch(F&&M&&(Y=t(we+Y,we.length?R-he.length:1/0),we=""),_){case"<":Y=X+Y+he+we;break;case"=":Y=X+we+Y+he;break;case"^":Y=we.slice(0,Te=we.length>>1)+X+Y+he+we.slice(Te);break;default:Y=we+X+Y+he;break}return o(Y)}return Q.toString=function(){return w+""},Q}function y(w,C){var _=x((w=rm(w),w.type="f",w)),D=Math.max(-8,Math.min(8,Math.floor(Zu(C)/3)))*3,k=Math.pow(10,-D),M=h6[8+D/3];return function(R){return _(k*R)+M}}return{format:x,formatPrefix:y}}var wh,Dw,FM;CJ({thousands:",",grouping:[3],currency:["$",""]});function CJ(e){return wh=SJ(e),Dw=wh.format,FM=wh.formatPrefix,wh}function AJ(e){return Math.max(0,-Zu(Math.abs(e)))}function TJ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zu(t)/3)))*3-Zu(Math.abs(e)))}function OJ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zu(t)-Zu(e))+1}function UM(e,t,r,n){var i=RE(e,t,r),o;switch(n=rm(n??",f"),n.type){case"s":{var d=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(o=TJ(i,d))&&(n.precision=o),FM(n,d)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=OJ(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=AJ(i))&&(n.precision=o-(n.type==="%")*2);break}}return Dw(n)}function Po(e){var t=e.domain;return e.ticks=function(r){var n=t();return ME(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return UM(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,o=n.length-1,d=n[i],g=n[o],h,x,y=10;for(g<d&&(x=d,d=g,g=x,x=i,i=o,o=x);y-- >0;){if(x=PE(d,g,r),x===h)return n[i]=d,n[o]=g,t(n);if(x>0)d=Math.floor(d/x)*x,g=Math.ceil(g/x)*x;else if(x<0)d=Math.ceil(d*x)/x,g=Math.floor(g*x)/x;else break;h=x}return e},e}function jM(){var e=Ow();return e.copy=function(){return Tm(e,jM())},Is.apply(e,arguments),Po(e)}function zM(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Yg),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return zM(e).unknown(t)},e=arguments.length?Array.from(e,Yg):[0,1],Po(r)}function VM(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],o=e[n],d;return o<i&&(d=r,r=n,n=d,d=i,i=o,o=d),e[r]=t.floor(i),e[n]=t.ceil(o),e}function g6(e){return Math.log(e)}function p6(e){return Math.exp(e)}function _J(e){return-Math.log(-e)}function DJ(e){return-Math.exp(-e)}function kJ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function MJ(e){return e===10?kJ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function PJ(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function y6(e){return(t,r)=>-e(-t,r)}function kw(e){const t=e(g6,p6),r=t.domain;let n=10,i,o;function d(){return i=PJ(n),o=MJ(n),r()[0]<0?(i=y6(i),o=y6(o),e(_J,DJ)):e(g6,p6),t}return t.base=function(g){return arguments.length?(n=+g,d()):n},t.domain=function(g){return arguments.length?(r(g),d()):r()},t.ticks=g=>{const h=r();let x=h[0],y=h[h.length-1];const w=y<x;w&&([x,y]=[y,x]);let C=i(x),_=i(y),D,k;const M=g==null?10:+g;let R=[];if(!(n%1)&&_-C<M){if(C=Math.floor(C),_=Math.ceil(_),x>0){for(;C<=_;++C)for(D=1;D<n;++D)if(k=C<0?D/o(-C):D*o(C),!(k<x)){if(k>y)break;R.push(k)}}else for(;C<=_;++C)for(D=n-1;D>=1;--D)if(k=C>0?D/o(-C):D*o(C),!(k<x)){if(k>y)break;R.push(k)}R.length*2<M&&(R=ME(x,y,M))}else R=ME(C,_,Math.min(_-C,M)).map(o);return w?R.reverse():R},t.tickFormat=(g,h)=>{if(g==null&&(g=10),h==null&&(h=n===10?"s":","),typeof h!="function"&&(!(n%1)&&(h=rm(h)).precision==null&&(h.trim=!0),h=Dw(h)),g===1/0)return h;const x=Math.max(1,n*g/t.ticks().length);return y=>{let w=y/o(Math.round(i(y)));return w*n<n-.5&&(w*=n),w<=x?h(y):""}},t.nice=()=>r(VM(r(),{floor:g=>o(Math.floor(i(g))),ceil:g=>o(Math.ceil(i(g)))})),t}function HM(){const e=kw(Wp()).domain([1,10]);return e.copy=()=>Tm(e,HM()).base(e.base()),Is.apply(e,arguments),e}function x6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function b6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Mw(e){var t=1,r=e(x6(t),b6(t));return r.constant=function(n){return arguments.length?e(x6(t=+n),b6(t)):t},Po(r)}function qM(){var e=Mw(Wp());return e.copy=function(){return Tm(e,qM()).constant(e.constant())},Is.apply(e,arguments)}function v6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function RJ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function IJ(e){return e<0?-e*e:e*e}function Pw(e){var t=e(ma,ma),r=1;function n(){return r===1?e(ma,ma):r===.5?e(RJ,IJ):e(v6(r),v6(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Po(t)}function Rw(){var e=Pw(Wp());return e.copy=function(){return Tm(e,Rw()).exponent(e.exponent())},Is.apply(e,arguments),e}function LJ(){return Rw.apply(null,arguments).exponent(.5)}function E6(e){return Math.sign(e)*e*e}function BJ(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function $M(){var e=Ow(),t=[0,1],r=!1,n;function i(o){var d=BJ(e(o));return isNaN(d)?n:r?Math.round(d):d}return i.invert=function(o){return e.invert(E6(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,Yg)).map(E6)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(r=!!o,i):r},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return $M(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Is.apply(i,arguments),Po(i)}function GM(){var e=[],t=[],r=[],n;function i(){var d=0,g=Math.max(1,t.length);for(r=new Array(g-1);++d<g;)r[d-1]=zQ(e,d/g);return o}function o(d){return d==null||isNaN(d=+d)?n:t[Cm(r,d)]}return o.invertExtent=function(d){var g=t.indexOf(d);return g<0?[NaN,NaN]:[g>0?r[g-1]:e[0],g<r.length?r[g]:e[e.length-1]]},o.domain=function(d){if(!arguments.length)return e.slice();e=[];for(let g of d)g!=null&&!isNaN(g=+g)&&e.push(g);return e.sort(wo),i()},o.range=function(d){return arguments.length?(t=Array.from(d),i()):t.slice()},o.unknown=function(d){return arguments.length?(n=d,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return GM().domain(e).range(t).unknown(n)},Is.apply(o,arguments)}function YM(){var e=0,t=1,r=1,n=[.5],i=[0,1],o;function d(h){return h!=null&&h<=h?i[Cm(n,h,0,r)]:o}function g(){var h=-1;for(n=new Array(r);++h<r;)n[h]=((h+1)*t-(h-r)*e)/(r+1);return d}return d.domain=function(h){return arguments.length?([e,t]=h,e=+e,t=+t,g()):[e,t]},d.range=function(h){return arguments.length?(r=(i=Array.from(h)).length-1,g()):i.slice()},d.invertExtent=function(h){var x=i.indexOf(h);return x<0?[NaN,NaN]:x<1?[e,n[0]]:x>=r?[n[r-1],t]:[n[x-1],n[x]]},d.unknown=function(h){return arguments.length&&(o=h),d},d.thresholds=function(){return n.slice()},d.copy=function(){return YM().domain([e,t]).range(i).unknown(o)},Is.apply(Po(d),arguments)}function XM(){var e=[.5],t=[0,1],r,n=1;function i(o){return o!=null&&o<=o?t[Cm(e,o,0,n)]:r}return i.domain=function(o){return arguments.length?(e=Array.from(o),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var d=t.indexOf(o);return[e[d-1],e[d]]},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return XM().domain(e).range(t).unknown(r)},Is.apply(i,arguments)}const Gb=new Date,Yb=new Date;function Rn(e,t,r,n){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const d=i(o),g=i.ceil(o);return o-d<g-o?d:g},i.offset=(o,d)=>(t(o=new Date(+o),d==null?1:Math.floor(d)),o),i.range=(o,d,g)=>{const h=[];if(o=i.ceil(o),g=g==null?1:Math.floor(g),!(o<d)||!(g>0))return h;let x;do h.push(x=new Date(+o)),t(o,g),e(o);while(x<o&&o<d);return h},i.filter=o=>Rn(d=>{if(d>=d)for(;e(d),!o(d);)d.setTime(d-1)},(d,g)=>{if(d>=d)if(g<0)for(;++g<=0;)for(;t(d,-1),!o(d););else for(;--g>=0;)for(;t(d,1),!o(d););}),r&&(i.count=(o,d)=>(Gb.setTime(+o),Yb.setTime(+d),e(Gb),e(Yb),Math.floor(r(Gb,Yb))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(n?d=>n(d)%o===0:d=>i.count(0,d)%o===0):i)),i}const Wg=Rn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Wg.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Rn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Wg);Wg.range;const il=1e3,Ts=il*60,ll=Ts*60,bl=ll*24,Iw=bl*7,w6=bl*30,Xb=bl*365,yc=Rn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*il)},(e,t)=>(t-e)/il,e=>e.getUTCSeconds());yc.range;const Lw=Rn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*il)},(e,t)=>{e.setTime(+e+t*Ts)},(e,t)=>(t-e)/Ts,e=>e.getMinutes());Lw.range;const Bw=Rn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ts)},(e,t)=>(t-e)/Ts,e=>e.getUTCMinutes());Bw.range;const Fw=Rn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*il-e.getMinutes()*Ts)},(e,t)=>{e.setTime(+e+t*ll)},(e,t)=>(t-e)/ll,e=>e.getHours());Fw.range;const Uw=Rn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ll)},(e,t)=>(t-e)/ll,e=>e.getUTCHours());Uw.range;const Om=Rn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ts)/bl,e=>e.getDate()-1);Om.range;const Kp=Rn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bl,e=>e.getUTCDate()-1);Kp.range;const WM=Rn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bl,e=>Math.floor(e/bl));WM.range;function Rc(e){return Rn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ts)/Iw)}const Zp=Rc(0),Kg=Rc(1),FJ=Rc(2),UJ=Rc(3),Qu=Rc(4),jJ=Rc(5),zJ=Rc(6);Zp.range;Kg.range;FJ.range;UJ.range;Qu.range;jJ.range;zJ.range;function Ic(e){return Rn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Iw)}const Qp=Ic(0),Zg=Ic(1),VJ=Ic(2),HJ=Ic(3),Ju=Ic(4),qJ=Ic(5),$J=Ic(6);Qp.range;Zg.range;VJ.range;HJ.range;Ju.range;qJ.range;$J.range;const jw=Rn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());jw.range;const zw=Rn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());zw.range;const vl=Rn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());vl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Rn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});vl.range;const El=Rn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());El.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Rn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});El.range;function KM(e,t,r,n,i,o){const d=[[yc,1,il],[yc,5,5*il],[yc,15,15*il],[yc,30,30*il],[o,1,Ts],[o,5,5*Ts],[o,15,15*Ts],[o,30,30*Ts],[i,1,ll],[i,3,3*ll],[i,6,6*ll],[i,12,12*ll],[n,1,bl],[n,2,2*bl],[r,1,Iw],[t,1,w6],[t,3,3*w6],[e,1,Xb]];function g(x,y,w){const C=y<x;C&&([x,y]=[y,x]);const _=w&&typeof w.range=="function"?w:h(x,y,w),D=_?_.range(x,+y+1):[];return C?D.reverse():D}function h(x,y,w){const C=Math.abs(y-x)/w,_=ww(([,,M])=>M).right(d,C);if(_===d.length)return e.every(RE(x/Xb,y/Xb,w));if(_===0)return Wg.every(Math.max(RE(x,y,w),1));const[D,k]=d[C/d[_-1][2]<d[_][2]/C?_-1:_];return D.every(k)}return[g,h]}const[GJ,YJ]=KM(El,zw,Qp,WM,Uw,Bw),[XJ,WJ]=KM(vl,jw,Zp,Om,Fw,Lw);function Wb(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Kb(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function yf(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function KJ(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,o=e.days,d=e.shortDays,g=e.months,h=e.shortMonths,x=xf(i),y=bf(i),w=xf(o),C=bf(o),_=xf(d),D=bf(d),k=xf(g),M=bf(g),R=xf(h),F=bf(h),I={a:se,A:Te,b:we,B:te,c:null,d:O6,e:O6,f:bee,g:_ee,G:kee,H:pee,I:yee,j:xee,L:ZM,m:vee,M:Eee,p:K,q:ee,Q:k6,s:M6,S:wee,u:Nee,U:See,V:Cee,w:Aee,W:Tee,x:null,X:null,y:Oee,Y:Dee,Z:Mee,"%":D6},G={a:fe,A:ce,b:Se,B:ie,c:null,d:_6,e:_6,f:Lee,g:Gee,G:Xee,H:Pee,I:Ree,j:Iee,L:JM,m:Bee,M:Fee,p:oe,q:He,Q:k6,s:M6,S:Uee,u:jee,U:zee,V:Vee,w:Hee,W:qee,x:null,X:null,y:$ee,Y:Yee,Z:Wee,"%":D6},U={a:Q,A:Y,b:X,B:he,c:xe,d:A6,e:A6,f:fee,g:C6,G:S6,H:T6,I:T6,j:oee,L:dee,m:lee,M:cee,p:V,q:iee,Q:hee,s:gee,S:uee,u:tee,U:ree,V:nee,w:eee,W:aee,x:ae,X:ne,y:C6,Y:S6,Z:see,"%":mee};I.x=z(r,I),I.X=z(n,I),I.c=z(t,I),G.x=z(r,G),G.X=z(n,G),G.c=z(t,G);function z(ve,We){return function(be){var ye=[],je=-1,Ze=0,Ie=ve.length,ut,Le,et;for(be instanceof Date||(be=new Date(+be));++je<Ie;)ve.charCodeAt(je)===37&&(ye.push(ve.slice(Ze,je)),(Le=N6[ut=ve.charAt(++je)])!=null?ut=ve.charAt(++je):Le=ut==="e"?" ":"0",(et=We[ut])&&(ut=et(be,Le)),ye.push(ut),Ze=je+1);return ye.push(ve.slice(Ze,je)),ye.join("")}}function L(ve,We){return function(be){var ye=yf(1900,void 0,1),je=H(ye,ve,be+="",0),Ze,Ie;if(je!=be.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if(We&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(Ze=Kb(yf(ye.y,0,1)),Ie=Ze.getUTCDay(),Ze=Ie>4||Ie===0?Zg.ceil(Ze):Zg(Ze),Ze=Kp.offset(Ze,(ye.V-1)*7),ye.y=Ze.getUTCFullYear(),ye.m=Ze.getUTCMonth(),ye.d=Ze.getUTCDate()+(ye.w+6)%7):(Ze=Wb(yf(ye.y,0,1)),Ie=Ze.getDay(),Ze=Ie>4||Ie===0?Kg.ceil(Ze):Kg(Ze),Ze=Om.offset(Ze,(ye.V-1)*7),ye.y=Ze.getFullYear(),ye.m=Ze.getMonth(),ye.d=Ze.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),Ie="Z"in ye?Kb(yf(ye.y,0,1)).getUTCDay():Wb(yf(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(Ie+5)%7:ye.w+ye.U*7-(Ie+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,Kb(ye)):Wb(ye)}}function H(ve,We,be,ye){for(var je=0,Ze=We.length,Ie=be.length,ut,Le;je<Ze;){if(ye>=Ie)return-1;if(ut=We.charCodeAt(je++),ut===37){if(ut=We.charAt(je++),Le=U[ut in N6?We.charAt(je++):ut],!Le||(ye=Le(ve,be,ye))<0)return-1}else if(ut!=be.charCodeAt(ye++))return-1}return ye}function V(ve,We,be){var ye=x.exec(We.slice(be));return ye?(ve.p=y.get(ye[0].toLowerCase()),be+ye[0].length):-1}function Q(ve,We,be){var ye=_.exec(We.slice(be));return ye?(ve.w=D.get(ye[0].toLowerCase()),be+ye[0].length):-1}function Y(ve,We,be){var ye=w.exec(We.slice(be));return ye?(ve.w=C.get(ye[0].toLowerCase()),be+ye[0].length):-1}function X(ve,We,be){var ye=R.exec(We.slice(be));return ye?(ve.m=F.get(ye[0].toLowerCase()),be+ye[0].length):-1}function he(ve,We,be){var ye=k.exec(We.slice(be));return ye?(ve.m=M.get(ye[0].toLowerCase()),be+ye[0].length):-1}function xe(ve,We,be){return H(ve,t,We,be)}function ae(ve,We,be){return H(ve,r,We,be)}function ne(ve,We,be){return H(ve,n,We,be)}function se(ve){return d[ve.getDay()]}function Te(ve){return o[ve.getDay()]}function we(ve){return h[ve.getMonth()]}function te(ve){return g[ve.getMonth()]}function K(ve){return i[+(ve.getHours()>=12)]}function ee(ve){return 1+~~(ve.getMonth()/3)}function fe(ve){return d[ve.getUTCDay()]}function ce(ve){return o[ve.getUTCDay()]}function Se(ve){return h[ve.getUTCMonth()]}function ie(ve){return g[ve.getUTCMonth()]}function oe(ve){return i[+(ve.getUTCHours()>=12)]}function He(ve){return 1+~~(ve.getUTCMonth()/3)}return{format:function(ve){var We=z(ve+="",I);return We.toString=function(){return ve},We},parse:function(ve){var We=L(ve+="",!1);return We.toString=function(){return ve},We},utcFormat:function(ve){var We=z(ve+="",G);return We.toString=function(){return ve},We},utcParse:function(ve){var We=L(ve+="",!0);return We.toString=function(){return ve},We}}}var N6={"-":"",_:" ",0:"0"},qn=/^\s*\d+/,ZJ=/^%/,QJ=/[\\^$*+?|[\]().{}]/g;function tr(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(t)+i:i)}function JJ(e){return e.replace(QJ,"\\$&")}function xf(e){return new RegExp("^(?:"+e.map(JJ).join("|")+")","i")}function bf(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function eee(e,t,r){var n=qn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function tee(e,t,r){var n=qn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function ree(e,t,r){var n=qn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function nee(e,t,r){var n=qn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function aee(e,t,r){var n=qn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function S6(e,t,r){var n=qn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function C6(e,t,r){var n=qn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function see(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function iee(e,t,r){var n=qn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function lee(e,t,r){var n=qn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function A6(e,t,r){var n=qn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function oee(e,t,r){var n=qn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function T6(e,t,r){var n=qn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function cee(e,t,r){var n=qn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function uee(e,t,r){var n=qn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function dee(e,t,r){var n=qn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function fee(e,t,r){var n=qn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function mee(e,t,r){var n=ZJ.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function hee(e,t,r){var n=qn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function gee(e,t,r){var n=qn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function O6(e,t){return tr(e.getDate(),t,2)}function pee(e,t){return tr(e.getHours(),t,2)}function yee(e,t){return tr(e.getHours()%12||12,t,2)}function xee(e,t){return tr(1+Om.count(vl(e),e),t,3)}function ZM(e,t){return tr(e.getMilliseconds(),t,3)}function bee(e,t){return ZM(e,t)+"000"}function vee(e,t){return tr(e.getMonth()+1,t,2)}function Eee(e,t){return tr(e.getMinutes(),t,2)}function wee(e,t){return tr(e.getSeconds(),t,2)}function Nee(e){var t=e.getDay();return t===0?7:t}function See(e,t){return tr(Zp.count(vl(e)-1,e),t,2)}function QM(e){var t=e.getDay();return t>=4||t===0?Qu(e):Qu.ceil(e)}function Cee(e,t){return e=QM(e),tr(Qu.count(vl(e),e)+(vl(e).getDay()===4),t,2)}function Aee(e){return e.getDay()}function Tee(e,t){return tr(Kg.count(vl(e)-1,e),t,2)}function Oee(e,t){return tr(e.getFullYear()%100,t,2)}function _ee(e,t){return e=QM(e),tr(e.getFullYear()%100,t,2)}function Dee(e,t){return tr(e.getFullYear()%1e4,t,4)}function kee(e,t){var r=e.getDay();return e=r>=4||r===0?Qu(e):Qu.ceil(e),tr(e.getFullYear()%1e4,t,4)}function Mee(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+tr(t/60|0,"0",2)+tr(t%60,"0",2)}function _6(e,t){return tr(e.getUTCDate(),t,2)}function Pee(e,t){return tr(e.getUTCHours(),t,2)}function Ree(e,t){return tr(e.getUTCHours()%12||12,t,2)}function Iee(e,t){return tr(1+Kp.count(El(e),e),t,3)}function JM(e,t){return tr(e.getUTCMilliseconds(),t,3)}function Lee(e,t){return JM(e,t)+"000"}function Bee(e,t){return tr(e.getUTCMonth()+1,t,2)}function Fee(e,t){return tr(e.getUTCMinutes(),t,2)}function Uee(e,t){return tr(e.getUTCSeconds(),t,2)}function jee(e){var t=e.getUTCDay();return t===0?7:t}function zee(e,t){return tr(Qp.count(El(e)-1,e),t,2)}function eP(e){var t=e.getUTCDay();return t>=4||t===0?Ju(e):Ju.ceil(e)}function Vee(e,t){return e=eP(e),tr(Ju.count(El(e),e)+(El(e).getUTCDay()===4),t,2)}function Hee(e){return e.getUTCDay()}function qee(e,t){return tr(Zg.count(El(e)-1,e),t,2)}function $ee(e,t){return tr(e.getUTCFullYear()%100,t,2)}function Gee(e,t){return e=eP(e),tr(e.getUTCFullYear()%100,t,2)}function Yee(e,t){return tr(e.getUTCFullYear()%1e4,t,4)}function Xee(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Ju(e):Ju.ceil(e),tr(e.getUTCFullYear()%1e4,t,4)}function Wee(){return"+0000"}function D6(){return"%"}function k6(e){return+e}function M6(e){return Math.floor(+e/1e3)}var bu,tP,rP;Kee({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Kee(e){return bu=KJ(e),tP=bu.format,bu.parse,rP=bu.utcFormat,bu.utcParse,bu}function Zee(e){return new Date(e)}function Qee(e){return e instanceof Date?+e:+new Date(+e)}function Vw(e,t,r,n,i,o,d,g,h,x){var y=Ow(),w=y.invert,C=y.domain,_=x(".%L"),D=x(":%S"),k=x("%I:%M"),M=x("%I %p"),R=x("%a %d"),F=x("%b %d"),I=x("%B"),G=x("%Y");function U(z){return(h(z)<z?_:g(z)<z?D:d(z)<z?k:o(z)<z?M:n(z)<z?i(z)<z?R:F:r(z)<z?I:G)(z)}return y.invert=function(z){return new Date(w(z))},y.domain=function(z){return arguments.length?C(Array.from(z,Qee)):C().map(Zee)},y.ticks=function(z){var L=C();return e(L[0],L[L.length-1],z??10)},y.tickFormat=function(z,L){return L==null?U:x(L)},y.nice=function(z){var L=C();return(!z||typeof z.range!="function")&&(z=t(L[0],L[L.length-1],z??10)),z?C(VM(L,z)):y},y.copy=function(){return Tm(y,Vw(e,t,r,n,i,o,d,g,h,x))},y}function Jee(){return Is.apply(Vw(XJ,WJ,vl,jw,Zp,Om,Fw,Lw,yc,tP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ete(){return Is.apply(Vw(GJ,YJ,El,zw,Qp,Kp,Uw,Bw,yc,rP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Jp(){var e=0,t=1,r,n,i,o,d=ma,g=!1,h;function x(w){return w==null||isNaN(w=+w)?h:d(i===0?.5:(w=(o(w)-r)*i,g?Math.max(0,Math.min(1,w)):w))}x.domain=function(w){return arguments.length?([e,t]=w,r=o(e=+e),n=o(t=+t),i=r===n?0:1/(n-r),x):[e,t]},x.clamp=function(w){return arguments.length?(g=!!w,x):g},x.interpolator=function(w){return arguments.length?(d=w,x):d};function y(w){return function(C){var _,D;return arguments.length?([_,D]=C,d=w(_,D),x):[d(0),d(1)]}}return x.range=y(ud),x.rangeRound=y(Tw),x.unknown=function(w){return arguments.length?(h=w,x):h},function(w){return o=w,r=w(e),n=w(t),i=r===n?0:1/(n-r),x}}function Ro(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function nP(){var e=Po(Jp()(ma));return e.copy=function(){return Ro(e,nP())},Al.apply(e,arguments)}function aP(){var e=kw(Jp()).domain([1,10]);return e.copy=function(){return Ro(e,aP()).base(e.base())},Al.apply(e,arguments)}function sP(){var e=Mw(Jp());return e.copy=function(){return Ro(e,sP()).constant(e.constant())},Al.apply(e,arguments)}function Hw(){var e=Pw(Jp());return e.copy=function(){return Ro(e,Hw()).exponent(e.exponent())},Al.apply(e,arguments)}function tte(){return Hw.apply(null,arguments).exponent(.5)}function iP(){var e=[],t=ma;function r(n){if(n!=null&&!isNaN(n=+n))return t((Cm(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(wo),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,o)=>jQ(e,o/n))},r.copy=function(){return iP(t).domain(e)},Al.apply(r,arguments)}function e1(){var e=0,t=.5,r=1,n=1,i,o,d,g,h,x=ma,y,w=!1,C;function _(k){return isNaN(k=+k)?C:(k=.5+((k=+y(k))-o)*(n*k<n*o?g:h),x(w?Math.max(0,Math.min(1,k)):k))}_.domain=function(k){return arguments.length?([e,t,r]=k,i=y(e=+e),o=y(t=+t),d=y(r=+r),g=i===o?0:.5/(o-i),h=o===d?0:.5/(d-o),n=o<i?-1:1,_):[e,t,r]},_.clamp=function(k){return arguments.length?(w=!!k,_):w},_.interpolator=function(k){return arguments.length?(x=k,_):x};function D(k){return function(M){var R,F,I;return arguments.length?([R,F,I]=M,x=mJ(k,[R,F,I]),_):[x(0),x(.5),x(1)]}}return _.range=D(ud),_.rangeRound=D(Tw),_.unknown=function(k){return arguments.length?(C=k,_):C},function(k){return y=k,i=k(e),o=k(t),d=k(r),g=i===o?0:.5/(o-i),h=o===d?0:.5/(d-o),n=o<i?-1:1,_}}function lP(){var e=Po(e1()(ma));return e.copy=function(){return Ro(e,lP())},Al.apply(e,arguments)}function oP(){var e=kw(e1()).domain([.1,1,10]);return e.copy=function(){return Ro(e,oP()).base(e.base())},Al.apply(e,arguments)}function cP(){var e=Mw(e1());return e.copy=function(){return Ro(e,cP()).constant(e.constant())},Al.apply(e,arguments)}function qw(){var e=Pw(e1());return e.copy=function(){return Ro(e,qw()).exponent(e.exponent())},Al.apply(e,arguments)}function rte(){return qw.apply(null,arguments).exponent(.5)}const Tf=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Sw,scaleDiverging:lP,scaleDivergingLog:oP,scaleDivergingPow:qw,scaleDivergingSqrt:rte,scaleDivergingSymlog:cP,scaleIdentity:zM,scaleImplicit:IE,scaleLinear:jM,scaleLog:HM,scaleOrdinal:Nw,scalePoint:HQ,scalePow:Rw,scaleQuantile:GM,scaleQuantize:YM,scaleRadial:$M,scaleSequential:nP,scaleSequentialLog:aP,scaleSequentialPow:Hw,scaleSequentialQuantile:iP,scaleSequentialSqrt:tte,scaleSequentialSymlog:sP,scaleSqrt:LJ,scaleSymlog:qM,scaleThreshold:XM,scaleTime:Jee,scaleUtc:ete,tickFormat:UM},Symbol.toStringTag,{value:"Module"}));var Io=e=>e.chartData,$w=De([Io],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),uP=(e,t,r,n)=>n?$w(e):Io(e);function _o(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Vn(t)&&Vn(r))return!0}return!1}function P6(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function dP(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,o;if(Vn(r))i=r;else if(typeof r=="function")return;if(Vn(n))o=n;else if(typeof n=="function")return;var d=[i,o];if(_o(d))return d}}function nte(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(_o(n))return P6(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,o]=e,d,g;if(i==="auto")t!=null&&(d=Math.min(...t));else if(Tt(i))d=i;else if(typeof i=="function")try{t!=null&&(d=i(t?.[0]))}catch{}else if(typeof i=="string"&&sT.test(i)){var h=sT.exec(i);if(h==null||t==null)d=void 0;else{var x=+h[1];d=t[0]-x}}else d=t?.[0];if(o==="auto")t!=null&&(g=Math.max(...t));else if(Tt(o))g=o;else if(typeof o=="function")try{t!=null&&(g=o(t?.[1]))}catch{}else if(typeof o=="string"&&iT.test(o)){var y=iT.exec(o);if(y==null||t==null)g=void 0;else{var w=+y[1];g=t[1]+w}}else g=t?.[1];var C=[d,g];if(_o(C))return t==null?C:P6(C,t,r)}}}var dd=1e9,ate={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Yw,jr=!0,Ms="[DecimalError] ",Sc=Ms+"Invalid argument: ",Gw=Ms+"Exponent out of range: ",fd=Math.floor,fc=Math.pow,ste=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ts,jn=1e7,Mr=7,fP=9007199254740991,Qg=fd(fP/Mr),lt={};lt.absoluteValue=lt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};lt.comparedTo=lt.cmp=function(e){var t,r,n,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(n=o.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return n===i?0:n>i^o.s<0?1:-1};lt.decimalPlaces=lt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Mr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};lt.dividedBy=lt.div=function(e){return ul(this,new this.constructor(e))};lt.dividedToIntegerBy=lt.idiv=function(e){var t=this,r=t.constructor;return vr(ul(t,new r(e),0,1),r.precision)};lt.equals=lt.eq=function(e){return!this.cmp(e)};lt.exponent=function(){return An(this)};lt.greaterThan=lt.gt=function(e){return this.cmp(e)>0};lt.greaterThanOrEqualTo=lt.gte=function(e){return this.cmp(e)>=0};lt.isInteger=lt.isint=function(){return this.e>this.d.length-2};lt.isNegative=lt.isneg=function(){return this.s<0};lt.isPositive=lt.ispos=function(){return this.s>0};lt.isZero=function(){return this.s===0};lt.lessThan=lt.lt=function(e){return this.cmp(e)<0};lt.lessThanOrEqualTo=lt.lte=function(e){return this.cmp(e)<1};lt.logarithm=lt.log=function(e){var t,r=this,n=r.constructor,i=n.precision,o=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ts))throw Error(Ms+"NaN");if(r.s<1)throw Error(Ms+(r.s?"NaN":"-Infinity"));return r.eq(ts)?new n(0):(jr=!1,t=ul(nm(r,o),nm(e,o),o),jr=!0,vr(t,i))};lt.minus=lt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?gP(t,e):mP(t,(e.s=-e.s,e))};lt.modulo=lt.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Ms+"NaN");return r.s?(jr=!1,t=ul(r,e,0,1).times(e),jr=!0,r.minus(t)):vr(new n(r),i)};lt.naturalExponential=lt.exp=function(){return hP(this)};lt.naturalLogarithm=lt.ln=function(){return nm(this)};lt.negated=lt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};lt.plus=lt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?mP(t,e):gP(t,(e.s=-e.s,e))};lt.precision=lt.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Sc+e);if(t=An(i)+1,n=i.d.length-1,r=n*Mr+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};lt.squareRoot=lt.sqrt=function(){var e,t,r,n,i,o,d,g=this,h=g.constructor;if(g.s<1){if(!g.s)return new h(0);throw Error(Ms+"NaN")}for(e=An(g),jr=!1,i=Math.sqrt(+g),i==0||i==1/0?(t=vi(g.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=fd((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new h(t)):n=new h(i.toString()),r=h.precision,i=d=r+3;;)if(o=n,n=o.plus(ul(g,o,d+2)).times(.5),vi(o.d).slice(0,d)===(t=vi(n.d)).slice(0,d)){if(t=t.slice(d-3,d+1),i==d&&t=="4999"){if(vr(o,r+1,0),o.times(o).eq(g)){n=o;break}}else if(t!="9999")break;d+=4}return jr=!0,vr(n,r)};lt.times=lt.mul=function(e){var t,r,n,i,o,d,g,h,x,y=this,w=y.constructor,C=y.d,_=(e=new w(e)).d;if(!y.s||!e.s)return new w(0);for(e.s*=y.s,r=y.e+e.e,h=C.length,x=_.length,h<x&&(o=C,C=_,_=o,d=h,h=x,x=d),o=[],d=h+x,n=d;n--;)o.push(0);for(n=x;--n>=0;){for(t=0,i=h+n;i>n;)g=o[i]+_[n]*C[i-n-1]+t,o[i--]=g%jn|0,t=g/jn|0;o[i]=(o[i]+t)%jn|0}for(;!o[--d];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,jr?vr(e,w.precision):e};lt.toDecimalPlaces=lt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Di(e,0,dd),t===void 0?t=n.rounding:Di(t,0,8),vr(r,e+An(r)+1,t))};lt.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Dc(n,!0):(Di(e,0,dd),t===void 0?t=i.rounding:Di(t,0,8),n=vr(new i(n),e+1,t),r=Dc(n,!0,e+1)),r};lt.toFixed=function(e,t){var r,n,i=this,o=i.constructor;return e===void 0?Dc(i):(Di(e,0,dd),t===void 0?t=o.rounding:Di(t,0,8),n=vr(new o(i),e+An(i)+1,t),r=Dc(n.abs(),!1,e+An(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};lt.toInteger=lt.toint=function(){var e=this,t=e.constructor;return vr(new t(e),An(e)+1,t.rounding)};lt.toNumber=function(){return+this};lt.toPower=lt.pow=function(e){var t,r,n,i,o,d,g=this,h=g.constructor,x=12,y=+(e=new h(e));if(!e.s)return new h(ts);if(g=new h(g),!g.s){if(e.s<1)throw Error(Ms+"Infinity");return g}if(g.eq(ts))return g;if(n=h.precision,e.eq(ts))return vr(g,n);if(t=e.e,r=e.d.length-1,d=t>=r,o=g.s,d){if((r=y<0?-y:y)<=fP){for(i=new h(ts),t=Math.ceil(n/Mr+4),jr=!1;r%2&&(i=i.times(g),I6(i.d,t)),r=fd(r/2),r!==0;)g=g.times(g),I6(g.d,t);return jr=!0,e.s<0?new h(ts).div(i):vr(i,n)}}else if(o<0)throw Error(Ms+"NaN");return o=o<0&&e.d[Math.max(t,r)]&1?-1:1,g.s=1,jr=!1,i=e.times(nm(g,n+x)),jr=!0,i=hP(i),i.s=o,i};lt.toPrecision=function(e,t){var r,n,i=this,o=i.constructor;return e===void 0?(r=An(i),n=Dc(i,r<=o.toExpNeg||r>=o.toExpPos)):(Di(e,1,dd),t===void 0?t=o.rounding:Di(t,0,8),i=vr(new o(i),e,t),r=An(i),n=Dc(i,e<=r||r<=o.toExpNeg,e)),n};lt.toSignificantDigits=lt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Di(e,1,dd),t===void 0?t=n.rounding:Di(t,0,8)),vr(new n(r),e,t)};lt.toString=lt.valueOf=lt.val=lt.toJSON=lt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=An(e),r=e.constructor;return Dc(e,t<=r.toExpNeg||t>=r.toExpPos)};function mP(e,t){var r,n,i,o,d,g,h,x,y=e.constructor,w=y.precision;if(!e.s||!t.s)return t.s||(t=new y(e)),jr?vr(t,w):t;if(h=e.d,x=t.d,d=e.e,i=t.e,h=h.slice(),o=d-i,o){for(o<0?(n=h,o=-o,g=x.length):(n=x,i=d,g=h.length),d=Math.ceil(w/Mr),g=d>g?d+1:g+1,o>g&&(o=g,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(g=h.length,o=x.length,g-o<0&&(o=g,n=x,x=h,h=n),r=0;o;)r=(h[--o]=h[o]+x[o]+r)/jn|0,h[o]%=jn;for(r&&(h.unshift(r),++i),g=h.length;h[--g]==0;)h.pop();return t.d=h,t.e=i,jr?vr(t,w):t}function Di(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Sc+e)}function vi(e){var t,r,n,i=e.length-1,o="",d=e[0];if(i>0){for(o+=d,t=1;t<i;t++)n=e[t]+"",r=Mr-n.length,r&&(o+=vo(r)),o+=n;d=e[t],n=d+"",r=Mr-n.length,r&&(o+=vo(r))}else if(d===0)return"0";for(;d%10===0;)d/=10;return o+d}var ul=(function(){function e(n,i){var o,d=0,g=n.length;for(n=n.slice();g--;)o=n[g]*i+d,n[g]=o%jn|0,d=o/jn|0;return d&&n.unshift(d),n}function t(n,i,o,d){var g,h;if(o!=d)h=o>d?1:-1;else for(g=h=0;g<o;g++)if(n[g]!=i[g]){h=n[g]>i[g]?1:-1;break}return h}function r(n,i,o){for(var d=0;o--;)n[o]-=d,d=n[o]<i[o]?1:0,n[o]=d*jn+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,d){var g,h,x,y,w,C,_,D,k,M,R,F,I,G,U,z,L,H,V=n.constructor,Q=n.s==i.s?1:-1,Y=n.d,X=i.d;if(!n.s)return new V(n);if(!i.s)throw Error(Ms+"Division by zero");for(h=n.e-i.e,L=X.length,U=Y.length,_=new V(Q),D=_.d=[],x=0;X[x]==(Y[x]||0);)++x;if(X[x]>(Y[x]||0)&&--h,o==null?F=o=V.precision:d?F=o+(An(n)-An(i))+1:F=o,F<0)return new V(0);if(F=F/Mr+2|0,x=0,L==1)for(y=0,X=X[0],F++;(x<U||y)&&F--;x++)I=y*jn+(Y[x]||0),D[x]=I/X|0,y=I%X|0;else{for(y=jn/(X[0]+1)|0,y>1&&(X=e(X,y),Y=e(Y,y),L=X.length,U=Y.length),G=L,k=Y.slice(0,L),M=k.length;M<L;)k[M++]=0;H=X.slice(),H.unshift(0),z=X[0],X[1]>=jn/2&&++z;do y=0,g=t(X,k,L,M),g<0?(R=k[0],L!=M&&(R=R*jn+(k[1]||0)),y=R/z|0,y>1?(y>=jn&&(y=jn-1),w=e(X,y),C=w.length,M=k.length,g=t(w,k,C,M),g==1&&(y--,r(w,L<C?H:X,C))):(y==0&&(g=y=1),w=X.slice()),C=w.length,C<M&&w.unshift(0),r(k,w,M),g==-1&&(M=k.length,g=t(X,k,L,M),g<1&&(y++,r(k,L<M?H:X,M))),M=k.length):g===0&&(y++,k=[0]),D[x++]=y,g&&k[0]?k[M++]=Y[G]||0:(k=[Y[G]],M=1);while((G++<U||k[0]!==void 0)&&F--)}return D[0]||D.shift(),_.e=h,vr(_,d?o+An(_)+1:o)}})();function hP(e,t){var r,n,i,o,d,g,h=0,x=0,y=e.constructor,w=y.precision;if(An(e)>16)throw Error(Gw+An(e));if(!e.s)return new y(ts);for(jr=!1,g=w,d=new y(.03125);e.abs().gte(.1);)e=e.times(d),x+=5;for(n=Math.log(fc(2,x))/Math.LN10*2+5|0,g+=n,r=i=o=new y(ts),y.precision=g;;){if(i=vr(i.times(e),g),r=r.times(++h),d=o.plus(ul(i,r,g)),vi(d.d).slice(0,g)===vi(o.d).slice(0,g)){for(;x--;)o=vr(o.times(o),g);return y.precision=w,t==null?(jr=!0,vr(o,w)):o}o=d}}function An(e){for(var t=e.e*Mr,r=e.d[0];r>=10;r/=10)t++;return t}function Zb(e,t,r){if(t>e.LN10.sd())throw jr=!0,r&&(e.precision=r),Error(Ms+"LN10 precision limit exceeded");return vr(new e(e.LN10),t)}function vo(e){for(var t="";e--;)t+="0";return t}function nm(e,t){var r,n,i,o,d,g,h,x,y,w=1,C=10,_=e,D=_.d,k=_.constructor,M=k.precision;if(_.s<1)throw Error(Ms+(_.s?"NaN":"-Infinity"));if(_.eq(ts))return new k(0);if(t==null?(jr=!1,x=M):x=t,_.eq(10))return t==null&&(jr=!0),Zb(k,x);if(x+=C,k.precision=x,r=vi(D),n=r.charAt(0),o=An(_),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)_=_.times(e),r=vi(_.d),n=r.charAt(0),w++;o=An(_),n>1?(_=new k("0."+r),o++):_=new k(n+"."+r.slice(1))}else return h=Zb(k,x+2,M).times(o+""),_=nm(new k(n+"."+r.slice(1)),x-C).plus(h),k.precision=M,t==null?(jr=!0,vr(_,M)):_;for(g=d=_=ul(_.minus(ts),_.plus(ts),x),y=vr(_.times(_),x),i=3;;){if(d=vr(d.times(y),x),h=g.plus(ul(d,new k(i),x)),vi(h.d).slice(0,x)===vi(g.d).slice(0,x))return g=g.times(2),o!==0&&(g=g.plus(Zb(k,x+2,M).times(o+""))),g=ul(g,new k(w),x),k.precision=M,t==null?(jr=!0,vr(g,M)):g;g=h,i+=2}}function R6(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=fd(r/Mr),e.d=[],n=(r+1)%Mr,r<0&&(n+=Mr),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Mr;n<i;)e.d.push(+t.slice(n,n+=Mr));t=t.slice(n),n=Mr-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),jr&&(e.e>Qg||e.e<-Qg))throw Error(Gw+r)}else e.s=0,e.e=0,e.d=[0];return e}function vr(e,t,r){var n,i,o,d,g,h,x,y,w=e.d;for(d=1,o=w[0];o>=10;o/=10)d++;if(n=t-d,n<0)n+=Mr,i=t,x=w[y=0];else{if(y=Math.ceil((n+1)/Mr),o=w.length,y>=o)return e;for(x=o=w[y],d=1;o>=10;o/=10)d++;n%=Mr,i=n-Mr+d}if(r!==void 0&&(o=fc(10,d-i-1),g=x/o%10|0,h=t<0||w[y+1]!==void 0||x%o,h=r<4?(g||h)&&(r==0||r==(e.s<0?3:2)):g>5||g==5&&(r==4||h||r==6&&(n>0?i>0?x/fc(10,d-i):0:w[y-1])%10&1||r==(e.s<0?8:7))),t<1||!w[0])return h?(o=An(e),w.length=1,t=t-o-1,w[0]=fc(10,(Mr-t%Mr)%Mr),e.e=fd(-t/Mr)||0):(w.length=1,w[0]=e.e=e.s=0),e;if(n==0?(w.length=y,o=1,y--):(w.length=y+1,o=fc(10,Mr-n),w[y]=i>0?(x/fc(10,d-i)%fc(10,i)|0)*o:0),h)for(;;)if(y==0){(w[0]+=o)==jn&&(w[0]=1,++e.e);break}else{if(w[y]+=o,w[y]!=jn)break;w[y--]=0,o=1}for(n=w.length;w[--n]===0;)w.pop();if(jr&&(e.e>Qg||e.e<-Qg))throw Error(Gw+An(e));return e}function gP(e,t){var r,n,i,o,d,g,h,x,y,w,C=e.constructor,_=C.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new C(e),jr?vr(t,_):t;if(h=e.d,w=t.d,n=t.e,x=e.e,h=h.slice(),d=x-n,d){for(y=d<0,y?(r=h,d=-d,g=w.length):(r=w,n=x,g=h.length),i=Math.max(Math.ceil(_/Mr),g)+2,d>i&&(d=i,r.length=1),r.reverse(),i=d;i--;)r.push(0);r.reverse()}else{for(i=h.length,g=w.length,y=i<g,y&&(g=i),i=0;i<g;i++)if(h[i]!=w[i]){y=h[i]<w[i];break}d=0}for(y&&(r=h,h=w,w=r,t.s=-t.s),g=h.length,i=w.length-g;i>0;--i)h[g++]=0;for(i=w.length;i>d;){if(h[--i]<w[i]){for(o=i;o&&h[--o]===0;)h[o]=jn-1;--h[o],h[i]+=jn}h[i]-=w[i]}for(;h[--g]===0;)h.pop();for(;h[0]===0;h.shift())--n;return h[0]?(t.d=h,t.e=n,jr?vr(t,_):t):new C(0)}function Dc(e,t,r){var n,i=An(e),o=vi(e.d),d=o.length;return t?(r&&(n=r-d)>0?o=o.charAt(0)+"."+o.slice(1)+vo(n):d>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+vo(-i-1)+o,r&&(n=r-d)>0&&(o+=vo(n))):i>=d?(o+=vo(i+1-d),r&&(n=r-i-1)>0&&(o=o+"."+vo(n))):((n=i+1)<d&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-d)>0&&(i+1===d&&(o+="."),o+=vo(n))),e.s<0?"-"+o:o}function I6(e,t){if(e.length>t)return e.length=t,!0}function pP(e){var t,r,n;function i(o){var d=this;if(!(d instanceof i))return new i(o);if(d.constructor=i,o instanceof i){d.s=o.s,d.e=o.e,d.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Sc+o);if(o>0)d.s=1;else if(o<0)o=-o,d.s=-1;else{d.s=0,d.e=0,d.d=[0];return}if(o===~~o&&o<1e7){d.e=0,d.d=[o];return}return R6(d,o.toString())}else if(typeof o!="string")throw Error(Sc+o);if(o.charCodeAt(0)===45?(o=o.slice(1),d.s=-1):d.s=1,ste.test(o))R6(d,o);else throw Error(Sc+o)}if(i.prototype=lt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=pP,i.config=i.set=ite,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function ite(e){if(!e||typeof e!="object")throw Error(Ms+"Object expected");var t,r,n,i=["precision",1,dd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(fd(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Sc+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Sc+r+": "+n);return this}var Yw=pP(ate);ts=new Yw(1);const ur=Yw;var lte=e=>e,yP={},xP=e=>e===yP,L6=e=>function t(){return arguments.length===0||arguments.length===1&&xP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},bP=(e,t)=>e===1?t:L6(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=n.filter(d=>d!==yP).length;return o>=e?t(...n):bP(e-o,L6(function(){for(var d=arguments.length,g=new Array(d),h=0;h<d;h++)g[h]=arguments[h];var x=n.map(y=>xP(y)?g.shift():y);return t(...x,...g)}))}),ote=e=>bP(e.length,e),UE=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},cte=ote((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),ute=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return lte;var i=r.reverse(),o=i[0],d=i.slice(1);return function(){return d.reduce((g,h)=>h(g),o(...arguments))}},jE=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function vP(e){var t;return e===0?t=1:t=Math.floor(new ur(e).abs().log(10).toNumber())+1,t}function EP(e,t,r){for(var n=new ur(e),i=0,o=[];n.lt(t)&&i<1e5;)o.push(n.toNumber()),n=n.add(r),i++;return o}var wP=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},NP=(e,t,r)=>{if(e.lte(0))return new ur(0);var n=vP(e.toNumber()),i=new ur(10).pow(n),o=e.div(i),d=n!==1?.05:.1,g=new ur(Math.ceil(o.div(d).toNumber())).add(r).mul(d),h=g.mul(i);return t?new ur(h.toNumber()):new ur(Math.ceil(h.toNumber()))},dte=(e,t,r)=>{var n=new ur(1),i=new ur(e);if(!i.isint()&&r){var o=Math.abs(e);o<1?(n=new ur(10).pow(vP(e)-1),i=new ur(Math.floor(i.div(n).toNumber())).mul(n)):o>1&&(i=new ur(Math.floor(e)))}else e===0?i=new ur(Math.floor((t-1)/2)):r||(i=new ur(Math.floor(e)));var d=Math.floor((t-1)/2),g=ute(cte(h=>i.add(new ur(h-d).mul(n)).toNumber()),UE);return g(0,t)},SP=function(t,r,n,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ur(0),tickMin:new ur(0),tickMax:new ur(0)};var d=NP(new ur(r).sub(t).div(n-1),i,o),g;t<=0&&r>=0?g=new ur(0):(g=new ur(t).add(r).div(2),g=g.sub(new ur(g).mod(d)));var h=Math.ceil(g.sub(t).div(d).toNumber()),x=Math.ceil(new ur(r).sub(g).div(d).toNumber()),y=h+x+1;return y>n?SP(t,r,n,i,o+1):(y<n&&(x=r>0?x+(n-y):x,h=r>0?h:h+(n-y)),{step:d,tickMin:g.sub(new ur(h).mul(d)),tickMax:g.add(new ur(x).mul(d))})},fte=function(t){var[r,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=Math.max(i,2),[g,h]=wP([r,n]);if(g===-1/0||h===1/0){var x=h===1/0?[g,...UE(0,i-1).map(()=>1/0)]:[...UE(0,i-1).map(()=>-1/0),h];return r>n?jE(x):x}if(g===h)return dte(g,i,o);var{step:y,tickMin:w,tickMax:C}=SP(g,h,d,o,0),_=EP(w,C.add(new ur(.1).mul(y)),y);return r>n?jE(_):_},mte=function(t,r){var[n,i]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[d,g]=wP([n,i]);if(d===-1/0||g===1/0)return[n,i];if(d===g)return[d];var h=Math.max(r,2),x=NP(new ur(g).sub(d).div(h-1),o,0),y=[...EP(new ur(d),new ur(g),x),g];return o===!1&&(y=y.map(w=>Math.round(w))),n>i?jE(y):y},hte=e=>e.rootProps.barCategoryGap,_m=e=>e.rootProps.stackOffset,CP=e=>e.rootProps.reverseStackOrder,Xw=e=>e.options.chartName,Ww=e=>e.rootProps.syncId,AP=e=>e.rootProps.syncMethod,Kw=e=>e.options.eventEmitter,ei={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},sl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},es={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},t1=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},gte={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:sl.angleAxisId,includeHidden:!1,name:void 0,reversed:sl.reversed,scale:sl.scale,tick:sl.tick,tickCount:void 0,ticks:void 0,type:sl.type,unit:void 0},pte={allowDataOverflow:es.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:es.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:es.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:es.scale,tick:es.tick,tickCount:es.tickCount,ticks:void 0,type:es.type,unit:void 0},yte={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:sl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:sl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:sl.scale,tick:sl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},xte={allowDataOverflow:es.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:es.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:es.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:es.scale,tick:es.tick,tickCount:es.tickCount,ticks:void 0,type:"category",unit:void 0},Zw=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?yte:gte,Qw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?xte:pte,r1=e=>e.polarOptions,Jw=De([Sl,Cl,Hn],CM),TP=De([r1,Jw],(e,t)=>{if(e!=null)return ns(e.innerRadius,t,0)}),OP=De([r1,Jw],(e,t)=>{if(e!=null)return ns(e.outerRadius,t,t*.8)}),bte=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},_P=De([r1],bte);De([Zw,_P],t1);var DP=De([Jw,TP,OP],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});De([Qw,DP],t1);var kP=De([Sr,r1,TP,OP,Sl,Cl],(e,t,r,n,i,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:d,cy:g,startAngle:h,endAngle:x}=t;return{cx:ns(d,i,i/2),cy:ns(g,o,o/2),innerRadius:r,outerRadius:n,startAngle:h,endAngle:x,clockWise:!1}}}),qr=(e,t)=>t,Dm=(e,t,r)=>r;function MP(e){return e?.id}function PP(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:o}=r,d=new Map;return e.forEach(g=>{var h,x=(h=g.data)!==null&&h!==void 0?h:n;if(!(x==null||x.length===0)){var y=MP(g);x.forEach((w,C)=>{var _=o==null||i?C:String(un(w,o,null)),D=un(w,g.dataKey,0),k;d.has(_)?k=d.get(_):k={},Object.assign(k,{[y]:D}),d.set(_,k)})}}),Array.from(d.values())}function eN(e){return e.stackId!=null&&e.dataKey!=null}var n1=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function a1(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function vte(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var In=e=>{var t=Sr(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},md=e=>e.tooltip.settings.axisId;function B6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Jg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B6(Object(r),!0).forEach(function(n){Ete(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ete(e,t,r){return(t=wte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wte(e){var t=Nte(e,"string");return typeof t=="symbol"?t:t+""}function Nte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zE=[0,"auto"],Ste={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Cte=(e,t)=>e.cartesianAxis.xAxis[t],Lo=(e,t)=>{var r=Cte(e,t);return r??Ste},Ate={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:zE,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Nm},Tte=(e,t)=>e.cartesianAxis.yAxis[t],Bo=(e,t)=>{var r=Tte(e,t);return r??Ate},Ote={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},tN=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Ote},Xr=(e,t,r)=>{switch(t){case"xAxis":return Lo(e,r);case"yAxis":return Bo(e,r);case"zAxis":return tN(e,r);case"angleAxis":return Zw(e,r);case"radiusAxis":return Qw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},_te=(e,t,r)=>{switch(t){case"xAxis":return Lo(e,r);case"yAxis":return Bo(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},km=(e,t,r)=>{switch(t){case"xAxis":return Lo(e,r);case"yAxis":return Bo(e,r);case"angleAxis":return Zw(e,r);case"radiusAxis":return Qw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},RP=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function rN(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Dte=e=>e.graphicalItems.cartesianItems,kte=De([qr,Dm],rN),nN=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),Mm=De([Dte,Xr,kte],nN,{memoizeOptions:{resultEqualityCheck:a1}}),IP=De([Mm],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(eN)),LP=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Mte=De([Mm],LP),aN=e=>e.map(t=>t.data).filter(Boolean).flat(1),Pte=De([Mm],aN,{memoizeOptions:{resultEqualityCheck:a1}}),sN=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},iN=De([Pte,uP],sN),lN=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:un(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:un(i,n)}))):e.map(n=>({value:n})),s1=De([iN,Xr,Mm],lN);function BP(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function eg(e){if(yl(e)||e instanceof Date){var t=Number(e);if(Vn(t))return t}}function F6(e){if(Array.isArray(e)){var t=[eg(e[0]),eg(e[1])];return _o(t)?t:void 0}var r=eg(e);if(r!=null)return[r,r]}function wl(e){return e.map(eg).filter(wY)}function Rte(e,t,r){return!r||typeof t!="number"||gl(t)?[]:r.length?wl(r.flatMap(n=>{var i=un(e,n.dataKey),o,d;if(Array.isArray(i)?[o,d]=i:o=d=i,!(!Vn(o)||!Vn(d)))return[t-o,t+d]})):[]}var Ln=e=>{var t=In(e),r=md(e);return km(e,t,r)},Pm=De([Ln],e=>e?.dataKey),Ite=De([IP,uP,Ln],PP),FP=(e,t,r,n)=>{var i={},o=t.reduce((d,g)=>(g.stackId==null||(d[g.stackId]==null&&(d[g.stackId]=[]),d[g.stackId].push(g)),d),i);return Object.fromEntries(Object.entries(o).map(d=>{var[g,h]=d,x=n?[...h].reverse():h,y=x.map(MP);return[g,{stackedData:WW(e,y,r),graphicalItems:x}]}))},Lte=De([Ite,IP,_m,CP],FP),UP=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:o}=t;if(n==null&&r!=="zAxis"){var d=QW(e,i,o);if(!(d!=null&&d[0]===0&&d[1]===0))return d}},Bte=De([Xr],e=>e.allowDataOverflow),oN=e=>{var t;if(e==null||!("domain"in e))return zE;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=wl(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:zE},cN=De([Xr],oN),uN=De([cN,Bte],dP),Fte=De([Lte,Io,qr,uN],UP,{memoizeOptions:{resultEqualityCheck:n1}}),i1=e=>e.errorBars,Ute=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>BP(r,n)),ep=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var o=i.flat(),d=Math.min(...o),g=Math.max(...o);return[d,g]}},dN=(e,t,r,n,i)=>{var o,d;if(r.length>0&&e.forEach(g=>{r.forEach(h=>{var x,y,w=(x=n[h.id])===null||x===void 0?void 0:x.filter(R=>BP(i,R)),C=un(g,(y=t.dataKey)!==null&&y!==void 0?y:h.dataKey),_=Rte(g,C,w);if(_.length>=2){var D=Math.min(..._),k=Math.max(..._);(o==null||D<o)&&(o=D),(d==null||k>d)&&(d=k)}var M=F6(C);M!=null&&(o=o==null?M[0]:Math.min(o,M[0]),d=d==null?M[1]:Math.max(d,M[1]))})}),t?.dataKey!=null&&e.forEach(g=>{var h=F6(un(g,t.dataKey));h!=null&&(o=o==null?h[0]:Math.min(o,h[0]),d=d==null?h[1]:Math.max(d,h[1]))}),Vn(o)&&Vn(d))return[o,d]},jte=De([iN,Xr,Mte,i1,qr],dN,{memoizeOptions:{resultEqualityCheck:n1}});function zte(e){var{value:t}=e;if(yl(t)||t instanceof Date)return t}var Vte=(e,t,r)=>{var n=e.map(zte).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&i7(n))?_M(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},jP=e=>e.referenceElements.dots,hd=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),Hte=De([jP,qr,Dm],hd),zP=e=>e.referenceElements.areas,qte=De([zP,qr,Dm],hd),VP=e=>e.referenceElements.lines,$te=De([VP,qr,Dm],hd),HP=(e,t)=>{var r=wl(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Gte=De(Hte,qr,HP),qP=(e,t)=>{var r=wl(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Yte=De([qte,qr],qP);function Xte(e){var t;if(e.x!=null)return wl([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:wl(r)}function Wte(e){var t;if(e.y!=null)return wl([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:wl(r)}var $P=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?Xte(n):Wte(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Kte=De([$te,qr],$P),Zte=De(Gte,Kte,Yte,(e,t,r)=>ep(e,r,t)),fN=(e,t,r,n,i,o,d,g)=>{if(r!=null)return r;var h=d==="vertical"&&g==="xAxis"||d==="horizontal"&&g==="yAxis",x=h?ep(n,o,i):ep(o,i);return nte(t,x,e.allowDataOverflow)},Qte=De([Xr,cN,uN,Fte,jte,Zte,Sr,qr],fN,{memoizeOptions:{resultEqualityCheck:n1}}),Jte=[0,1],mN=(e,t,r,n,i,o,d)=>{if(!((e==null||r==null||r.length===0)&&d===void 0)){var{dataKey:g,type:h}=e,x=Pc(t,o);if(x&&g==null){var y;return _M(0,(y=r?.length)!==null&&y!==void 0?y:0)}return h==="category"?Vte(n,e,x):i==="expand"?Jte:d}},hN=De([Xr,Sr,iN,s1,_m,qr,Qte],mN),GP=(e,t,r,n,i)=>{if(e!=null){var{scale:o,type:d}=e;if(o==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":d==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":d==="category"?"band":"linear";if(typeof o=="string"){var g="scale".concat(xm(o));return g in Tf?g:"point"}}},gd=De([Xr,Sr,RP,Xw,qr],GP);function ere(e){if(e!=null){if(e in Tf)return Tf[e]();var t="scale".concat(xm(e));if(t in Tf)return Tf[t]()}}function gN(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var i=ere(t);if(i!=null){var o=i.domain(r).range(n);return $W(o),o}}}var pN=(e,t,r)=>{var n=oN(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&_o(e))return fte(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&_o(e))return mte(e,t.tickCount,t.allowDecimals)}},yN=De([hN,km,gd],pN),xN=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&_o(t)&&Array.isArray(r)&&r.length>0){var i=t[0],o=r[0],d=t[1],g=r[r.length-1];return[Math.min(i,o),Math.max(d,g)]}return t},tre=De([Xr,hN,yN,qr],xN),rre=De(s1,Xr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(wl(e.map(g=>g.value))).sort((g,h)=>g-h);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var o=0;o<n.length-1;o++){var d=n[o+1]-n[o];r=Math.min(r,d)}return r/i}}),YP=De(rre,Sr,hte,Hn,(e,t,r,n)=>n,(e,t,r,n,i)=>{if(!Vn(e))return 0;var o=t==="vertical"?n.height:n.width;if(i==="gap")return e*o/2;if(i==="no-gap"){var d=ns(r,e*o),g=e*o/2;return g-d-(g-d)/o*d}return 0}),nre=(e,t)=>{var r=Lo(e,t);return r==null||typeof r.padding!="string"?0:YP(e,"xAxis",t,r.padding)},are=(e,t)=>{var r=Bo(e,t);return r==null||typeof r.padding!="string"?0:YP(e,"yAxis",t,r.padding)},sre=De(Lo,nre,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),ire=De(Bo,are,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),lre=De([Hn,sre,Vp,zp,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:o}=n;return i?[o.left,r.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),ore=De([Hn,Sr,ire,Vp,zp,(e,t,r)=>r],(e,t,r,n,i,o)=>{var{padding:d}=i;return o?[n.height-d.bottom,d.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Rm=(e,t,r,n)=>{var i;switch(t){case"xAxis":return lre(e,r,n);case"yAxis":return ore(e,r,n);case"zAxis":return(i=tN(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return _P(e);case"radiusAxis":return DP(e,r);default:return}},XP=De([Xr,Rm],t1),l1=De([Xr,gd,tre,XP],gN);De([Mm,i1,qr],Ute);function WP(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var o1=(e,t)=>t,c1=(e,t,r)=>r,cre=De(Up,o1,c1,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(WP)),ure=De(jp,o1,c1,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(WP)),KP=(e,t)=>({width:e.width,height:t.height}),dre=(e,t)=>{var r=typeof t.width=="number"?t.width:Nm;return{width:r,height:e.height}};De(Hn,Lo,KP);var fre=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},mre=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},hre=De(Cl,Hn,cre,o1,c1,(e,t,r,n,i)=>{var o={},d;return r.forEach(g=>{var h=KP(t,g);d==null&&(d=fre(t,n,e));var x=n==="top"&&!i||n==="bottom"&&i;o[g.id]=d-Number(x)*h.height,d+=(x?-1:1)*h.height}),o}),gre=De(Sl,Hn,ure,o1,c1,(e,t,r,n,i)=>{var o={},d;return r.forEach(g=>{var h=dre(t,g);d==null&&(d=mre(t,n,e));var x=n==="left"&&!i||n==="right"&&i;o[g.id]=d-Number(x)*h.width,d+=(x?-1:1)*h.width}),o}),pre=(e,t)=>{var r=Lo(e,t);if(r!=null)return hre(e,r.orientation,r.mirror)};De([Hn,Lo,pre,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}});var yre=(e,t)=>{var r=Bo(e,t);if(r!=null)return gre(e,r.orientation,r.mirror)};De([Hn,Bo,yre,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}});De(Hn,Bo,(e,t)=>{var r=typeof t.width=="number"?t.width:Nm;return{width:r,height:e.height}});var ZP=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:o,dataKey:d}=r,g=Pc(e,n),h=t.map(x=>x.value);if(d&&g&&o==="category"&&i&&i7(h))return h}},bN=De([Sr,s1,Xr,qr],ZP),QP=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:o}=r,d=Pc(e,n);if(d&&(i==="number"||o!=="auto"))return t.map(g=>g.value)}},vN=De([Sr,s1,km,qr],QP);De([Sr,_te,gd,l1,bN,vN,Rm,yN,qr],(e,t,r,n,i,o,d,g,h)=>{if(t!=null){var x=Pc(e,h);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:h,categoricalDomain:o,duplicateDomain:i,isCategorical:x,niceTicks:g,range:d,realScaleType:r,scale:n}}});var xre=(e,t,r,n,i,o,d,g,h)=>{if(!(t==null||n==null)){var x=Pc(e,h),{type:y,ticks:w,tickCount:C}=t,_=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,D=y==="category"&&n.bandwidth?n.bandwidth()/_:0;D=h==="angleAxis"&&o!=null&&o.length>=2?ka(o[0]-o[1])*2*D:D;var k=w||i;if(k){var M=k.map((R,F)=>{var I=d?d.indexOf(R):R;return{index:F,coordinate:n(I)+D,value:R,offset:D}});return M.filter(R=>Vn(R.coordinate))}return x&&g?g.map((R,F)=>({coordinate:n(R)+D,value:R,index:F,offset:D})).filter(R=>Vn(R.coordinate)):n.ticks?n.ticks(C).map(R=>({coordinate:n(R)+D,value:R,offset:D})):n.domain().map((R,F)=>({coordinate:n(R)+D,value:d?d[R]:R,index:F,offset:D}))}};De([Sr,km,gd,l1,yN,Rm,bN,vN,qr],xre);var bre=(e,t,r,n,i,o,d)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var g=Pc(e,d),{tickCount:h}=t,x=0;return x=d==="angleAxis"&&n?.length>=2?ka(n[0]-n[1])*2*x:x,g&&o?o.map((y,w)=>({coordinate:r(y)+x,value:y,index:w,offset:x})):r.ticks?r.ticks(h).map(y=>({coordinate:r(y)+x,value:y,offset:x})):r.domain().map((y,w)=>({coordinate:r(y)+x,value:i?i[y]:y,index:w,offset:x}))}};De([Sr,km,l1,Rm,bN,vN,qr],bre);De(Xr,l1,(e,t)=>{if(!(e==null||t==null))return Jg(Jg({},e),{},{scale:t})});var vre=De([Xr,gd,hN,XP],gN);De((e,t,r)=>tN(e,r),vre,(e,t)=>{if(!(e==null||t==null))return Jg(Jg({},e),{},{scale:t})});var Ere=De([Sr,Up,jp],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),JP=e=>e.options.defaultTooltipEventType,eR=e=>e.options.validateTooltipEventTypes;function tR(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function EN(e,t){var r=JP(e),n=eR(e);return tR(t,r,n)}function wre(e){return Dt(t=>EN(t,e))}var rR=(e,t)=>{var r,n=Number(t);if(!(gl(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Nre=e=>e.tooltip.settings,Eo={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Sre={itemInteraction:{click:Eo,hover:Eo},axisInteraction:{click:Eo,hover:Eo},keyboardInteraction:Eo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},nR=Ia({name:"tooltip",initialState:Sre,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Fr()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=ti(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:Fr()},removeTooltipEntrySettings:{reducer(e,t){var r=ti(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Fr()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Cre,replaceTooltipEntrySettings:Are,removeTooltipEntrySettings:Tre,setTooltipSettingsState:Ore,setActiveMouseOverItemIndex:aR,mouseLeaveItem:_re,mouseLeaveChart:sR,setActiveClickItemIndex:Dre,setMouseOverAxisIndex:iR,setMouseClickAxisIndex:kre,setSyncInteraction:VE,setKeyboardInteraction:HE}=nR.actions,Mre=nR.reducer;function U6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Nh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U6(Object(r),!0).forEach(function(n){Pre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pre(e,t,r){return(t=Rre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rre(e){var t=Ire(e,"string");return typeof t=="symbol"?t:t+""}function Ire(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lre(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Bre(e){return e.index!=null}var lR=(e,t,r,n)=>{if(t==null)return Eo;var i=Lre(e,t,r);if(i==null)return Eo;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(Bre(i)){if(o)return Nh(Nh({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Nh(Nh({},Eo),{},{coordinate:i.coordinate})};function Fre(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function Ure(e,t){var r=Fre(e),n=t[0],i=t[1];if(r===void 0)return!1;var o=Math.min(n,i),d=Math.max(n,i);return r>=o&&r<=d}function jre(e,t,r){if(r==null||t==null)return!0;var n=un(e,t);return n==null||!_o(r)?!0:Ure(n,r)}var wN=(e,t,r,n)=>{var i=e?.index;if(i==null)return null;var o=Number(i);if(!Vn(o))return i;var d=0,g=1/0;t.length>0&&(g=t.length-1);var h=Math.max(d,Math.min(o,g)),x=t[h];return x==null||jre(x,r,n)?String(h):null},oR=(e,t,r,n,i,o,d,g)=>{if(!(o==null||g==null)){var h=d[0],x=h==null?void 0:g(h.positions,o);if(x!=null)return x;var y=i?.[Number(o)];if(y)switch(r){case"horizontal":return{x:y.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:y.coordinate}}}},cR=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(o=>{var d;return((d=o.settings)===null||d===void 0?void 0:d.dataKey)===i})},Im=e=>e.options.tooltipPayloadSearcher,pd=e=>e.tooltip;function j6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function z6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j6(Object(r),!0).forEach(function(n){zre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zre(e,t,r){return(t=Vre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vre(e){var t=Hre(e,"string");return typeof t=="symbol"?t:t+""}function Hre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qre(e,t){return e??t}var uR=(e,t,r,n,i,o,d)=>{if(!(t==null||o==null)){var{chartData:g,computedData:h,dataStartIndex:x,dataEndIndex:y}=r,w=[];return e.reduce((C,_)=>{var D,{dataDefinedOnItem:k,settings:M}=_,R=qre(k,g),F=Array.isArray(R)?eM(R,x,y):R,I=(D=M?.dataKey)!==null&&D!==void 0?D:n,G=M?.nameKey,U;if(n&&Array.isArray(F)&&!Array.isArray(F[0])&&d==="axis"?U=EY(F,n,i):U=o(F,t,h,G),Array.isArray(U))U.forEach(L=>{var H=z6(z6({},M),{},{name:L.name,unit:L.unit,color:void 0,fill:void 0});C.push(oT({tooltipEntrySettings:H,dataKey:L.dataKey,payload:L.payload,value:un(L.payload,L.dataKey),name:L.name}))});else{var z;C.push(oT({tooltipEntrySettings:M,dataKey:I,payload:U,value:un(U,I),name:(z=un(U,G))!==null&&z!==void 0?z:M?.name}))}return C},w)}},NN=De([Ln,Sr,RP,Xw,In],GP),$re=De([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Gre=De([In,md],rN),Lm=De([$re,Ln,Gre],nN,{memoizeOptions:{resultEqualityCheck:a1}}),Yre=De([Lm],e=>e.filter(eN)),Xre=De([Lm],aN,{memoizeOptions:{resultEqualityCheck:a1}}),yd=De([Xre,Io],sN),Wre=De([Yre,Io,Ln],PP),SN=De([yd,Ln,Lm],lN),dR=De([Ln],oN),Kre=De([Ln],e=>e.allowDataOverflow),fR=De([dR,Kre],dP),Zre=De([Lm],e=>e.filter(eN)),Qre=De([Wre,Zre,_m,CP],FP),Jre=De([Qre,Io,In,fR],UP),ene=De([Lm],LP),tne=De([yd,Ln,ene,i1,In],dN,{memoizeOptions:{resultEqualityCheck:n1}}),rne=De([jP,In,md],hd),nne=De([rne,In],HP),ane=De([zP,In,md],hd),sne=De([ane,In],qP),ine=De([VP,In,md],hd),lne=De([ine,In],$P),one=De([nne,lne,sne],ep),cne=De([Ln,dR,fR,Jre,tne,one,Sr,In],fN),Bm=De([Ln,Sr,yd,SN,_m,In,cne],mN),une=De([Bm,Ln,NN],pN),dne=De([Ln,Bm,une,In],xN),mR=e=>{var t=In(e),r=md(e),n=!1;return Rm(e,t,r,n)},hR=De([Ln,mR],t1),gR=De([Ln,NN,dne,hR],gN),fne=De([Sr,SN,Ln,In],ZP),mne=De([Sr,SN,Ln,In],QP),hne=(e,t,r,n,i,o,d,g)=>{if(t){var{type:h}=t,x=Pc(e,g);if(n){var y=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,w=h==="category"&&n.bandwidth?n.bandwidth()/y:0;return w=g==="angleAxis"&&i!=null&&i?.length>=2?ka(i[0]-i[1])*2*w:w,x&&d?d.map((C,_)=>({coordinate:n(C)+w,value:C,index:_,offset:w})):n.domain().map((C,_)=>({coordinate:n(C)+w,value:o?o[C]:C,index:_,offset:w}))}}},Tl=De([Sr,Ln,NN,gR,mR,fne,mne,In],hne),CN=De([JP,eR,Nre],(e,t,r)=>tR(r.shared,e,t)),pR=e=>e.tooltip.settings.trigger,AN=e=>e.tooltip.settings.defaultIndex,Fm=De([pd,CN,pR,AN],lR),am=De([Fm,yd,Pm,Bm],wN),yR=De([Tl,am],rR),xR=De([Fm],e=>{if(e)return e.dataKey}),gne=De([Fm],e=>{if(e)return e.graphicalItemId}),bR=De([pd,CN,pR,AN],cR),pne=De([Sl,Cl,Sr,Hn,Tl,AN,bR,Im],oR),yne=De([Fm,pne],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),xne=De([Fm],e=>e.active),bne=De([bR,am,Io,Pm,yR,Im,CN],uR);De([bne],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function V6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function H6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V6(Object(r),!0).forEach(function(n){vne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vne(e,t,r){return(t=Ene(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ene(e){var t=wne(e,"string");return typeof t=="symbol"?t:t+""}function wne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nne=()=>Dt(Ln),Sne=()=>{var e=Nne(),t=Dt(Tl),r=Dt(gR);return lT(!e||!r?void 0:H6(H6({},e),{},{scale:r}),t)};function q6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q6(Object(r),!0).forEach(function(n){Cne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cne(e,t,r){return(t=Ane(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ane(e){var t=Tne(e,"string");return typeof t=="symbol"?t:t+""}function Tne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var One=(e,t,r,n)=>{var i=t.find(o=>o&&o.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},_ne=(e,t,r,n)=>{var i=t.find(x=>x&&x.index===r);if(i){if(e==="centric"){var o=i.coordinate,{radius:d}=n;return vu(vu(vu({},n),Sn(n.cx,n.cy,d,o)),{},{angle:o,radius:d})}var g=i.coordinate,{angle:h}=n;return vu(vu(vu({},n),Sn(n.cx,n.cy,g,h)),{},{angle:h,radius:g})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Dne(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var vR=(e,t,r,n,i)=>{var o,d=-1,g=(o=t?.length)!==null&&o!==void 0?o:0;if(g<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var h=0;h<g;h++){var x=h>0?r[h-1].coordinate:r[g-1].coordinate,y=r[h].coordinate,w=h>=g-1?r[0].coordinate:r[h+1].coordinate,C=void 0;if(ka(y-x)!==ka(w-y)){var _=[];if(ka(w-y)===ka(i[1]-i[0])){C=w;var D=y+i[1]-i[0];_[0]=Math.min(D,(D+x)/2),_[1]=Math.max(D,(D+x)/2)}else{C=x;var k=w+i[1]-i[0];_[0]=Math.min(y,(k+y)/2),_[1]=Math.max(y,(k+y)/2)}var M=[Math.min(y,(C+y)/2),Math.max(y,(C+y)/2)];if(e>M[0]&&e<=M[1]||e>=_[0]&&e<=_[1]){({index:d}=r[h]);break}}else{var R=Math.min(x,w),F=Math.max(x,w);if(e>(R+y)/2&&e<=(F+y)/2){({index:d}=r[h]);break}}}else if(t){for(var I=0;I<g;I++)if(I===0&&e<=(t[I].coordinate+t[I+1].coordinate)/2||I>0&&I<g-1&&e>(t[I].coordinate+t[I-1].coordinate)/2&&e<=(t[I].coordinate+t[I+1].coordinate)/2||I===g-1&&e>(t[I].coordinate+t[I-1].coordinate)/2){({index:d}=t[I]);break}}return d},kne=()=>Dt(Xw),TN=(e,t)=>t,ER=(e,t,r)=>r,ON=(e,t,r,n)=>n,Mne=De(Tl,e=>Dp(e,t=>t.coordinate)),_N=De([pd,TN,ER,ON],lR),DN=De([_N,yd,Pm,Bm],wN),Pne=(e,t,r)=>{if(t!=null){var n=pd(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},wR=De([pd,TN,ER,ON],cR),tp=De([Sl,Cl,Sr,Hn,Tl,ON,wR,Im],oR),Rne=De([_N,tp],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),NR=De([Tl,DN],rR),Ine=De([wR,DN,Io,Pm,NR,Im,TN],uR),Lne=De([_N,DN],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),Bne=(e,t,r,n,i,o,d)=>{if(!(!e||!r||!n||!i)&&Dne(e,d)){var g=JW(e,t),h=vR(g,o,i,r,n),x=One(t,i,h,e);return{activeIndex:String(h),activeCoordinate:x}}},Fne=(e,t,r,n,i,o,d)=>{if(!(!e||!n||!i||!o||!r)){var g=bQ(e,r);if(g){var h=eK(g,t),x=vR(h,d,o,n,i),y=_ne(t,o,x,g);return{activeIndex:String(x),activeCoordinate:y}}}},Une=(e,t,r,n,i,o,d,g)=>{if(!(!e||!t||!n||!i||!o))return t==="horizontal"||t==="vertical"?Bne(e,t,n,i,o,d,g):Fne(e,t,r,n,i,o,d)},jne=De(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),zne=De(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(ei)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:vte}});function $6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function G6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$6(Object(r),!0).forEach(function(n){Vne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vne(e,t,r){return(t=Hne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hne(e){var t=qne(e,"string");return typeof t=="symbol"?t:t+""}function qne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $ne={},Gne={zIndexMap:Object.values(ei).reduce((e,t)=>G6(G6({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),$ne)},Yne=new Set(Object.values(ei));function Xne(e){return Yne.has(e)}var SR=Ia({name:"zIndex",initialState:Gne,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Fr()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!Xne(r)&&delete e.zIndexMap[r])},prepare:Fr()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:i?void 0:n,panoramaElementId:i?n:void 0}},prepare:Fr()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Fr()}}}),{registerZIndexPortal:Wne,unregisterZIndexPortal:Kne,registerZIndexPortalId:Zne,unregisterZIndexPortalId:Qne}=SR.actions,Jne=SR.reducer;function Um(e){var{zIndex:t,children:r}=e,n=MK(),i=n&&t!==void 0&&t!==0,o=Mo(),d=mn();N.useLayoutEffect(()=>i?(d(Wne({zIndex:t})),()=>{d(Kne({zIndex:t}))}):bm,[d,t,i]);var g=Dt(x=>jne(x,t,o));if(!i)return r;if(!g)return null;var h=document.getElementById(g);return h?l2.createPortal(r,h):null}function qE(){return qE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qE.apply(null,arguments)}function Y6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Sh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y6(Object(r),!0).forEach(function(n){eae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eae(e,t,r){return(t=tae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tae(e){var t=rae(e,"string");return typeof t=="symbol"?t:t+""}function rae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nae(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return N.isValidElement(t)?N.cloneElement(t,n):N.createElement(r,n)}function aae(e){var t,{coordinate:r,payload:n,index:i,offset:o,tooltipAxisBandSize:d,layout:g,cursor:h,tooltipEventType:x,chartName:y}=e,w=r,C=n,_=i;if(!h||!w||y!=="ScatterChart"&&x!=="axis")return null;var D,k,M;if(y==="ScatterChart")D=w,k=RZ,M=ei.cursorLine;else if(y==="BarChart")D=IZ(g,w,o,d),k=SM,M=ei.cursorRectangle;else if(g==="radial"&&o7(w)){var{cx:R,cy:F,radius:I,startAngle:G,endAngle:U}=AM(w);D={cx:R,cy:F,startAngle:G,endAngle:U,innerRadius:I,outerRadius:I},k=OM,M=ei.cursorLine}else D={points:NQ(g,w,o)},k=bw,M=ei.cursorLine;var z=typeof h=="object"&&"className"in h?h.className:void 0,L=Sh(Sh(Sh(Sh({stroke:"#ccc",pointerEvents:"none"},o),D),Jv(h)),{},{payload:C,payloadIndex:_,className:fn("recharts-tooltip-cursor",z)});return N.createElement(Um,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:M},N.createElement(nae,{cursor:h,cursorComp:k,cursorProps:L}))}function sae(e){var t=Sne(),r=DK(),n=pw(),i=kne();return t==null||r==null||n==null||i==null?null:N.createElement(aae,qE({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var CR=N.createContext(null),iae=()=>N.useContext(CR),Qb={exports:{}},X6;function lae(){return X6||(X6=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(h,x,y){this.fn=h,this.context=x,this.once=y||!1}function o(h,x,y,w,C){if(typeof y!="function")throw new TypeError("The listener must be a function");var _=new i(y,w||h,C),D=r?r+x:x;return h._events[D]?h._events[D].fn?h._events[D]=[h._events[D],_]:h._events[D].push(_):(h._events[D]=_,h._eventsCount++),h}function d(h,x){--h._eventsCount===0?h._events=new n:delete h._events[x]}function g(){this._events=new n,this._eventsCount=0}g.prototype.eventNames=function(){var x=[],y,w;if(this._eventsCount===0)return x;for(w in y=this._events)t.call(y,w)&&x.push(r?w.slice(1):w);return Object.getOwnPropertySymbols?x.concat(Object.getOwnPropertySymbols(y)):x},g.prototype.listeners=function(x){var y=r?r+x:x,w=this._events[y];if(!w)return[];if(w.fn)return[w.fn];for(var C=0,_=w.length,D=new Array(_);C<_;C++)D[C]=w[C].fn;return D},g.prototype.listenerCount=function(x){var y=r?r+x:x,w=this._events[y];return w?w.fn?1:w.length:0},g.prototype.emit=function(x,y,w,C,_,D){var k=r?r+x:x;if(!this._events[k])return!1;var M=this._events[k],R=arguments.length,F,I;if(M.fn){switch(M.once&&this.removeListener(x,M.fn,void 0,!0),R){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,y),!0;case 3:return M.fn.call(M.context,y,w),!0;case 4:return M.fn.call(M.context,y,w,C),!0;case 5:return M.fn.call(M.context,y,w,C,_),!0;case 6:return M.fn.call(M.context,y,w,C,_,D),!0}for(I=1,F=new Array(R-1);I<R;I++)F[I-1]=arguments[I];M.fn.apply(M.context,F)}else{var G=M.length,U;for(I=0;I<G;I++)switch(M[I].once&&this.removeListener(x,M[I].fn,void 0,!0),R){case 1:M[I].fn.call(M[I].context);break;case 2:M[I].fn.call(M[I].context,y);break;case 3:M[I].fn.call(M[I].context,y,w);break;case 4:M[I].fn.call(M[I].context,y,w,C);break;default:if(!F)for(U=1,F=new Array(R-1);U<R;U++)F[U-1]=arguments[U];M[I].fn.apply(M[I].context,F)}}return!0},g.prototype.on=function(x,y,w){return o(this,x,y,w,!1)},g.prototype.once=function(x,y,w){return o(this,x,y,w,!0)},g.prototype.removeListener=function(x,y,w,C){var _=r?r+x:x;if(!this._events[_])return this;if(!y)return d(this,_),this;var D=this._events[_];if(D.fn)D.fn===y&&(!C||D.once)&&(!w||D.context===w)&&d(this,_);else{for(var k=0,M=[],R=D.length;k<R;k++)(D[k].fn!==y||C&&!D[k].once||w&&D[k].context!==w)&&M.push(D[k]);M.length?this._events[_]=M.length===1?M[0]:M:d(this,_)}return this},g.prototype.removeAllListeners=function(x){var y;return x?(y=r?r+x:x,this._events[y]&&d(this,y)):(this._events=new n,this._eventsCount=0),this},g.prototype.off=g.prototype.removeListener,g.prototype.addListener=g.prototype.on,g.prefixed=r,g.EventEmitter=g,e.exports=g})(Qb)),Qb.exports}var oae=lae();const cae=ki(oae);var sm=new cae,$E="recharts.syncEvent.tooltip",W6="recharts.syncEvent.brush";function uae(e,t){if(t){var r=Number.parseInt(t,10);if(!gl(r))return e?.[r]}}var dae={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},AR=Ia({name:"options",initialState:dae,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),fae=AR.reducer,{createEventEmitter:mae}=AR.actions;function hae(e){return e.tooltip.syncInteraction}var gae={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},TR=Ia({name:"chartData",initialState:gae,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:K6,setDataStartEndIndexes:pae,setComputedData:Wde}=TR.actions,yae=TR.reducer,xae=["x","y"];function Z6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Eu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z6(Object(r),!0).forEach(function(n){bae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bae(e,t,r){return(t=vae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vae(e){var t=Eae(e,"string");return typeof t=="symbol"?t:t+""}function Eae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wae(e,t){if(e==null)return{};var r,n,i=Nae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Nae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Sae(){var e=Dt(Ww),t=Dt(Kw),r=mn(),n=Dt(AP),i=Dt(Tl),o=pw(),d=Hp(),g=Dt(h=>h.rootProps.className);N.useEffect(()=>{if(e==null)return bm;var h=(x,y,w)=>{if(t!==w&&e===x){if(n==="index"){var C;if(d&&y!==null&&y!==void 0&&(C=y.payload)!==null&&C!==void 0&&C.coordinate&&y.payload.sourceViewBox){var _=y.payload.coordinate,{x:D,y:k}=_,M=wae(_,xae),{x:R,y:F,width:I,height:G}=y.payload.sourceViewBox,U=Eu(Eu({},M),{},{x:d.x+(I?(D-R)/I:0)*d.width,y:d.y+(G?(k-F)/G:0)*d.height});r(Eu(Eu({},y),{},{payload:Eu(Eu({},y.payload),{},{coordinate:U})}))}else r(y);return}if(i!=null){var z;if(typeof n=="function"){var L={activeTooltipIndex:y.payload.index==null?void 0:Number(y.payload.index),isTooltipActive:y.payload.active,activeIndex:y.payload.index==null?void 0:Number(y.payload.index),activeLabel:y.payload.label,activeDataKey:y.payload.dataKey,activeCoordinate:y.payload.coordinate},H=n(i,L);z=i[H]}else n==="value"&&(z=i.find(ne=>String(ne.value)===y.payload.label));var{coordinate:V}=y.payload;if(z==null||y.payload.active===!1||V==null||d==null){r(VE({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:Q,y:Y}=V,X=Math.min(Q,d.x+d.width),he=Math.min(Y,d.y+d.height),xe={x:o==="horizontal"?z.coordinate:X,y:o==="horizontal"?he:z.coordinate},ae=VE({active:y.payload.active,coordinate:xe,dataKey:y.payload.dataKey,index:String(z.index),label:y.payload.label,sourceViewBox:y.payload.sourceViewBox,graphicalItemId:y.payload.graphicalItemId});r(ae)}}};return sm.on($E,h),()=>{sm.off($E,h)}},[g,r,t,e,n,i,o,d])}function Cae(){var e=Dt(Ww),t=Dt(Kw),r=mn();N.useEffect(()=>{if(e==null)return bm;var n=(i,o,d)=>{t!==d&&e===i&&r(pae(o))};return sm.on(W6,n),()=>{sm.off(W6,n)}},[r,t,e])}function Aae(){var e=mn();N.useEffect(()=>{e(mae())},[e]),Sae(),Cae()}function Tae(e,t,r,n,i,o){var d=Dt(_=>Pne(_,e,t)),g=Dt(Kw),h=Dt(Ww),x=Dt(AP),y=Dt(hae),w=y?.active,C=Hp();N.useEffect(()=>{if(!w&&h!=null&&g!=null){var _=VE({active:o,coordinate:r,dataKey:d,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:C,graphicalItemId:void 0});sm.emit($E,h,_,g)}},[w,r,d,i,n,g,h,x,o,C])}function Q6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function J6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q6(Object(r),!0).forEach(function(n){Oae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oae(e,t,r){return(t=_ae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _ae(e){var t=Dae(e,"string");return typeof t=="symbol"?t:t+""}function Dae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kae(e){return e.dataKey}function Mae(e,t){return N.isValidElement(e)?N.cloneElement(e,t):typeof e=="function"?N.createElement(e,t):N.createElement(mZ,t)}var e8=[],Pae={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function GE(e){var t,r,n=Rs(e,Pae),{active:i,allowEscapeViewBox:o,animationDuration:d,animationEasing:g,content:h,filterNull:x,isAnimationActive:y,offset:w,payloadUniqBy:C,position:_,reverseDirection:D,useTranslate3d:k,wrapperStyle:M,cursor:R,shared:F,trigger:I,defaultIndex:G,portal:U,axisId:z}=n,L=mn(),H=typeof G=="number"?String(G):G;N.useEffect(()=>{L(Ore({shared:F,trigger:I,axisId:z,active:i,defaultIndex:H}))},[L,F,I,z,i,H]);var V=Hp(),Q=bM(),Y=wre(F),{activeIndex:X,isActive:he}=(t=Dt(oe=>Lne(oe,Y,I,H)))!==null&&t!==void 0?t:{},xe=Dt(oe=>Ine(oe,Y,I,H)),ae=Dt(oe=>NR(oe,Y,I,H)),ne=Dt(oe=>Rne(oe,Y,I,H)),se=xe,Te=iae(),we=(r=i??he)!==null&&r!==void 0?r:!1,[te,K]=S7([se,we]),ee=Y==="axis"?ae:void 0;Tae(Y,I,ne,ee,X,we);var fe=U??Te;if(fe==null||V==null||Y==null)return null;var ce=se??e8;we||(ce=e8),x&&ce.length&&(ce=b7(ce.filter(oe=>oe.value!=null&&(oe.hide!==!0||n.includeHidden)),C,kae));var Se=ce.length>0,ie=N.createElement(vZ,{allowEscapeViewBox:o,animationDuration:d,animationEasing:g,isAnimationActive:y,active:we,coordinate:ne,hasPayload:Se,offset:w,position:_,reverseDirection:D,useTranslate3d:k,viewBox:V,wrapperStyle:M,lastBoundingBox:te,innerRef:K,hasPortalFromProps:!!U},Mae(h,J6(J6({},n),{},{payload:ce,label:ee,active:we,activeIndex:X,coordinate:ne,accessibilityLayer:Q})));return N.createElement(N.Fragment,null,l2.createPortal(ie,fe),we&&N.createElement(sae,{cursor:R,tooltipEventType:Y,coordinate:ne,payload:ce,index:X}))}var ed=e=>null;ed.displayName="Cell";function Rae(e,t,r){return(t=Iae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iae(e){var t=Lae(e,"string");return typeof t=="symbol"?t:t+""}function Lae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Bae{constructor(t){Rae(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function t8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Fae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t8(Object(r),!0).forEach(function(n){Uae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uae(e,t,r){return(t=jae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jae(e){var t=zae(e,"string");return typeof t=="symbol"?t:t+""}function zae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vae={cacheSize:2e3,enableCache:!0},OR=Fae({},Vae),r8=new Bae(OR.cacheSize),Hae={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},n8="recharts_measurement_span";function qae(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",o=t.fontStyle||"",d=t.letterSpacing||"",g=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(o,"|").concat(d,"|").concat(g)}var a8=(e,t)=>{try{var r=document.getElementById(n8);r||(r=document.createElement("span"),r.setAttribute("id",n8),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Hae,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},s8=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Xp.isSsr)return{width:0,height:0};if(!OR.enableCache)return a8(t,r);var n=qae(t,r),i=r8.get(n);if(i)return i;var o=a8(t,r);return r8.set(n,o),o},i8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,l8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$ae=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Gae=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_R={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Yae=Object.keys(_R),Iu="NaN";function Xae(e,t){return e*_R[t]}class _a{static parse(t){var r,[,n,i]=(r=Gae.exec(t))!==null&&r!==void 0?r:[];return new _a(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,gl(t)&&(this.unit=""),r!==""&&!$ae.test(r)&&(this.num=NaN,this.unit=""),Yae.includes(r)&&(this.num=Xae(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new _a(NaN,""):new _a(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new _a(NaN,""):new _a(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new _a(NaN,""):new _a(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new _a(NaN,""):new _a(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return gl(this.num)}}function DR(e){if(e.includes(Iu))return Iu;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,o]=(r=i8.exec(t))!==null&&r!==void 0?r:[],d=_a.parse(n??""),g=_a.parse(o??""),h=i==="*"?d.multiply(g):d.divide(g);if(h.isNaN())return Iu;t=t.replace(i8,h.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var x,[,y,w,C]=(x=l8.exec(t))!==null&&x!==void 0?x:[],_=_a.parse(y??""),D=_a.parse(C??""),k=w==="+"?_.add(D):_.subtract(D);if(k.isNaN())return Iu;t=t.replace(l8,k.toString())}return t}var o8=/\(([^()]*)\)/;function Wae(e){for(var t=e,r;(r=o8.exec(t))!=null;){var[,n]=r;t=t.replace(o8,DR(n))}return t}function Kae(e){var t=e.replace(/\s+/g,"");return t=Wae(t),t=DR(t),t}function Zae(e){try{return Kae(e)}catch{return Iu}}function Jb(e){var t=Zae(e.slice(5,-1));return t===Iu?"":t}var Qae=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Jae=["dx","dy","angle","className","breakAll"];function YE(){return YE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YE.apply(null,arguments)}function c8(e,t){if(e==null)return{};var r,n,i=ese(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ese(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kR=/[ \f\n\r\t\v\u2028\u2029]+/,MR=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];ss(t)||(r?i=t.toString().split(""):i=t.toString().split(kR));var o=i.map(g=>({word:g,width:s8(g,n).width})),d=r?0:s8("",n).width;return{wordsWithComputedWidth:o,spaceWidth:d}}catch{return null}};function tse(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var PR=(e,t,r,n)=>e.reduce((i,o)=>{var{word:d,width:g}=o,h=i[i.length-1];if(h&&g!=null&&(t==null||n||h.width+g+r<Number(t)))h.words.push(d),h.width+=g+r;else{var x={words:[d],width:g};i.push(x)}return i},[]),RR=e=>e.reduce((t,r)=>t.width>r.width?t:r),rse="",u8=(e,t,r,n,i,o,d,g)=>{var h=e.slice(0,t),x=MR({breakAll:r,style:n,children:h+rse});if(!x)return[!1,[]];var y=PR(x.wordsWithComputedWidth,o,d,g),w=y.length>i||RR(y).width>Number(o);return[w,y]},nse=(e,t,r,n,i)=>{var{maxLines:o,children:d,style:g,breakAll:h}=e,x=Tt(o),y=String(d),w=PR(t,n,r,i);if(!x||i)return w;var C=w.length>o||RR(w).width>Number(n);if(!C)return w;for(var _=0,D=y.length-1,k=0,M;_<=D&&k<=y.length-1;){var R=Math.floor((_+D)/2),F=R-1,[I,G]=u8(y,F,h,g,o,n,r,i),[U]=u8(y,R,h,g,o,n,r,i);if(!I&&!U&&(_=R+1),I&&U&&(D=R-1),!I&&U){M=G;break}k++}return M||w},d8=e=>{var t=ss(e)?[]:e.toString().split(kR);return[{words:t,width:void 0}]},ase=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:o,maxLines:d}=e;if((t||r)&&!Xp.isSsr){var g,h,x=MR({breakAll:o,children:n,style:i});if(x){var{wordsWithComputedWidth:y,spaceWidth:w}=x;g=y,h=w}else return d8(n);return nse({breakAll:o,children:n,maxLines:d,style:i},g,h,t,!!r)}return d8(n)},IR="#808080",sse={angle:0,breakAll:!1,capHeight:"0.71em",fill:IR,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},kN=N.forwardRef((e,t)=>{var r=Rs(e,sse),{x:n,y:i,lineHeight:o,capHeight:d,fill:g,scaleToFit:h,textAnchor:x,verticalAnchor:y}=r,w=c8(r,Qae),C=N.useMemo(()=>ase({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:h,style:w.style,width:w.width}),[w.breakAll,w.children,w.maxLines,h,w.style,w.width]),{dx:_,dy:D,angle:k,className:M,breakAll:R}=w,F=c8(w,Jae);if(!yl(n)||!yl(i)||C.length===0)return null;var I=Number(n)+(Tt(_)?_:0),G=Number(i)+(Tt(D)?D:0);if(!Vn(I)||!Vn(G))return null;var U;switch(y){case"start":U=Jb("calc(".concat(d,")"));break;case"middle":U=Jb("calc(".concat((C.length-1)/2," * -").concat(o," + (").concat(d," / 2))"));break;default:U=Jb("calc(".concat(C.length-1," * -").concat(o,")"));break}var z=[];if(h){var L=C[0].width,{width:H}=w;z.push("scale(".concat(Tt(H)&&Tt(L)?H/L:1,")"))}return k&&z.push("rotate(".concat(k,", ").concat(I,", ").concat(G,")")),z.length&&(F.transform=z.join(" ")),N.createElement("text",YE({},Ds(F),{ref:t,x:I,y:G,className:fn("recharts-text",M),textAnchor:x,fill:g.includes("url")?IR:g}),C.map((V,Q)=>{var Y=V.words.join(R?"":" ");return N.createElement("tspan",{x:I,dy:Q===0?U:o,key:"".concat(Y,"-").concat(Q)},Y)}))});kN.displayName="Text";var ise=["labelRef"];function lse(e,t){if(e==null)return{};var r,n,i=ose(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ose(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function f8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f8(Object(r),!0).forEach(function(n){cse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cse(e,t,r){return(t=use(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function use(e){var t=dse(e,"string");return typeof t=="symbol"?t:t+""}function dse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rp(){return rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rp.apply(null,arguments)}var fse=N.createContext(null),mse=()=>{var e=N.useContext(fse),t=Hp();return e||oM(t)},hse=N.createContext(null),gse=()=>{var e=N.useContext(hse),t=Dt(kP);return e||t},pse=e=>{var{value:t,formatter:r}=e,n=ss(e.children)?t:e.children;return typeof r=="function"?r(n):n},yse=e=>e!=null&&typeof e=="function",xse=(e,t)=>{var r=ka(t-e),n=Math.min(Math.abs(t-e),360);return r*n},bse=(e,t,r,n,i)=>{var{offset:o,className:d}=e,{cx:g,cy:h,innerRadius:x,outerRadius:y,startAngle:w,endAngle:C,clockWise:_}=i,D=(x+y)/2,k=xse(w,C),M=k>=0?1:-1,R,F;switch(t){case"insideStart":R=w+M*o,F=_;break;case"insideEnd":R=C-M*o,F=!_;break;case"end":R=C+M*o,F=_;break;default:throw new Error("Unsupported position ".concat(t))}F=k<=0?F:!F;var I=Sn(g,h,D,R),G=Sn(g,h,D,R+(F?1:-1)*359),U="M".concat(I.x,",").concat(I.y,`
    A`).concat(D,",").concat(D,",0,1,").concat(F?0:1,`,
    `).concat(G.x,",").concat(G.y),z=ss(e.id)?$f("recharts-radial-line-"):e.id;return N.createElement("text",rp({},n,{dominantBaseline:"central",className:fn("recharts-radial-bar-label",d)}),N.createElement("defs",null,N.createElement("path",{id:z,d:U})),N.createElement("textPath",{xlinkHref:"#".concat(z)},r))},vse=(e,t,r)=>{var{cx:n,cy:i,innerRadius:o,outerRadius:d,startAngle:g,endAngle:h}=e,x=(g+h)/2;if(r==="outside"){var{x:y,y:w}=Sn(n,i,d+t,x);return{x:y,y:w,textAnchor:y>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var C=(o+d)/2,{x:_,y:D}=Sn(n,i,C,x);return{x:_,y:D,textAnchor:"middle",verticalAnchor:"middle"}},XE=e=>"cx"in e&&Tt(e.cx),Ese=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,o;r!=null&&!XE(r)&&(o=r);var{x:d,y:g,upperWidth:h,lowerWidth:x,height:y}=t,w=d,C=d+(h-x)/2,_=(w+C)/2,D=(h+x)/2,k=w+h/2,M=y>=0?1:-1,R=M*n,F=M>0?"end":"start",I=M>0?"start":"end",G=h>=0?1:-1,U=G*n,z=G>0?"end":"start",L=G>0?"start":"end";if(i==="top"){var H={x:w+h/2,y:g-R,textAnchor:"middle",verticalAnchor:F};return wn(wn({},H),o?{height:Math.max(g-o.y,0),width:h}:{})}if(i==="bottom"){var V={x:C+x/2,y:g+y+R,textAnchor:"middle",verticalAnchor:I};return wn(wn({},V),o?{height:Math.max(o.y+o.height-(g+y),0),width:x}:{})}if(i==="left"){var Q={x:_-U,y:g+y/2,textAnchor:z,verticalAnchor:"middle"};return wn(wn({},Q),o?{width:Math.max(Q.x-o.x,0),height:y}:{})}if(i==="right"){var Y={x:_+D+U,y:g+y/2,textAnchor:L,verticalAnchor:"middle"};return wn(wn({},Y),o?{width:Math.max(o.x+o.width-Y.x,0),height:y}:{})}var X=o?{width:D,height:y}:{};return i==="insideLeft"?wn({x:_+U,y:g+y/2,textAnchor:L,verticalAnchor:"middle"},X):i==="insideRight"?wn({x:_+D-U,y:g+y/2,textAnchor:z,verticalAnchor:"middle"},X):i==="insideTop"?wn({x:w+h/2,y:g+R,textAnchor:"middle",verticalAnchor:I},X):i==="insideBottom"?wn({x:C+x/2,y:g+y-R,textAnchor:"middle",verticalAnchor:F},X):i==="insideTopLeft"?wn({x:w+U,y:g+R,textAnchor:L,verticalAnchor:I},X):i==="insideTopRight"?wn({x:w+h-U,y:g+R,textAnchor:z,verticalAnchor:I},X):i==="insideBottomLeft"?wn({x:C+U,y:g+y-R,textAnchor:L,verticalAnchor:F},X):i==="insideBottomRight"?wn({x:C+x-U,y:g+y-R,textAnchor:z,verticalAnchor:F},X):i&&typeof i=="object"&&(Tt(i.x)||pl(i.x))&&(Tt(i.y)||pl(i.y))?wn({x:d+ns(i.x,D),y:g+ns(i.y,y),textAnchor:"end",verticalAnchor:"end"},X):wn({x:k,y:g+y/2,textAnchor:"middle",verticalAnchor:"middle"},X)},wse={angle:0,offset:5,zIndex:ei.label,position:"middle",textBreakAll:!1};function LR(e){var t=Rs(e,wse),{viewBox:r,position:n,value:i,children:o,content:d,className:g="",textBreakAll:h,labelRef:x}=t,y=gse(),w=mse(),C=n==="center"?w:y??w,_,D,k;if(r==null?_=C:XE(r)?_=r:_=oM(r),!_||ss(i)&&ss(o)&&!N.isValidElement(d)&&typeof d!="function")return null;var M=wn(wn({},t),{},{viewBox:_});if(N.isValidElement(d)){var{labelRef:R}=M,F=lse(M,ise);return N.cloneElement(d,F)}if(typeof d=="function"){if(D=N.createElement(d,M),N.isValidElement(D))return D}else D=pse(t);var I=Ds(t);if(XE(_)){if(n==="insideStart"||n==="insideEnd"||n==="end")return bse(t,n,D,I,_);k=vse(_,t.offset,t.position)}else k=Ese(t,_);return N.createElement(Um,{zIndex:t.zIndex},N.createElement(kN,rp({ref:x,className:fn("recharts-label",g)},I,k,{textAnchor:tse(I.textAnchor)?I.textAnchor:k.textAnchor,breakAll:h}),D))}LR.displayName="Label";var ev={},tv={},m8;function Nse(){return m8||(m8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(tv)),tv}var rv={},h8;function Sse(){return h8||(h8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(rv)),rv}var g8;function Cse(){return g8||(g8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nse(),r=Sse(),n=sw();function i(o){if(n.isArrayLike(o))return t.last(r.toArray(o))}e.last=i})(ev)),ev}var nv,p8;function Ase(){return p8||(p8=1,nv=Cse().last),nv}var Tse=Ase();const Ose=ki(Tse);var _se=["valueAccessor"],Dse=["dataKey","clockWise","id","textBreakAll","zIndex"];function np(){return np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},np.apply(null,arguments)}function y8(e,t){if(e==null)return{};var r,n,i=kse(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function kse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Mse=e=>Array.isArray(e.value)?Ose(e.value):e.value,BR=N.createContext(void 0);BR.Provider;var FR=N.createContext(void 0),Pse=FR.Provider;function Rse(){return N.useContext(BR)}function Ise(){return N.useContext(FR)}function tg(e){var{valueAccessor:t=Mse}=e,r=y8(e,_se),{dataKey:n,clockWise:i,id:o,textBreakAll:d,zIndex:g}=r,h=y8(r,Dse),x=Rse(),y=Ise(),w=x||y;return!w||!w.length?null:N.createElement(Um,{zIndex:g??ei.label},N.createElement(To,{className:"recharts-label-list"},w.map((C,_)=>{var D,k=ss(n)?t(C,_):un(C&&C.payload,n),M=ss(o)?{}:{id:"".concat(o,"-").concat(_)};return N.createElement(LR,np({key:"label-".concat(_)},Ds(C),h,M,{fill:(D=r.fill)!==null&&D!==void 0?D:C.fill,parentViewBox:C.parentViewBox,value:k,textBreakAll:d,viewBox:C.viewBox,index:_,zIndex:0}))})))}tg.displayName="LabelList";function Lse(e){var{label:t}=e;return t?t===!0?N.createElement(tg,{key:"labelList-implicit"}):N.isValidElement(t)||yse(t)?N.createElement(tg,{key:"labelList-implicit",content:t}):typeof t=="object"?N.createElement(tg,np({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var UR=e=>e.graphicalItems.polarItems,Bse=De([qr,Dm],rN),u1=De([UR,Xr,Bse],nN),Fse=De([u1],aN),d1=De([Fse,$w],sN),Use=De([d1,Xr,u1],lN);De([d1,Xr,u1],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(i=>{var o,d=un(n,(o=t.dataKey)!==null&&o!==void 0?o:i.dataKey);return{value:d,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(n=>({value:un(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var x8=()=>{},jse=De([d1,Xr,u1,i1,qr],dN),zse=De([Xr,cN,uN,x8,jse,x8,Sr,qr],fN),jR=De([Xr,Sr,d1,Use,_m,qr,zse],mN),Vse=De([jR,Xr,gd],pN);De([Xr,jR,Vse,qr],xN);var Hse={radiusAxis:{},angleAxis:{}},zR=Ia({name:"polarAxis",initialState:Hse,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Kde,removeRadiusAxis:Zde,addAngleAxis:Qde,removeAngleAxis:Jde}=zR.actions,qse=zR.reducer;function b8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function v8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b8(Object(r),!0).forEach(function(n){$se(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $se(e,t,r){return(t=Gse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gse(e){var t=Yse(e,"string");return typeof t=="symbol"?t:t+""}function Yse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xse=(e,t)=>t,MN=De([UR,Xse],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),Wse=[],PN=(e,t,r)=>r?.length===0?Wse:r,VR=De([$w,MN,PN],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(o=>v8(v8({},t.presentationProps),o.props))),i!=null)return i}}),Kse=De([VR,MN,PN],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,i)=>{var o,d=un(n,t.nameKey,t.name),g;return r!=null&&(o=r[i])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?g=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?g=n.fill:g=t.fill,{value:tM(d,t.dataKey),color:g,payload:n,type:t.legendType}})}),Zse=De([VR,MN,PN,Hn],(e,t,r,n)=>{if(!(t==null||e==null))return ele({offset:n,pieSettings:t,displayedData:e,cells:r})}),av={exports:{}},hr={};var E8;function Qse(){if(E8)return hr;E8=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.view_transition"),_=Symbol.for("react.client.reference");function D(k){if(typeof k=="object"&&k!==null){var M=k.$$typeof;switch(M){case e:switch(k=k.type,k){case r:case i:case n:case h:case x:case C:return k;default:switch(k=k&&k.$$typeof,k){case d:case g:case w:case y:return k;case o:return k;default:return M}}case t:return M}}}return hr.ContextConsumer=o,hr.ContextProvider=d,hr.Element=e,hr.ForwardRef=g,hr.Fragment=r,hr.Lazy=w,hr.Memo=y,hr.Portal=t,hr.Profiler=i,hr.StrictMode=n,hr.Suspense=h,hr.SuspenseList=x,hr.isContextConsumer=function(k){return D(k)===o},hr.isContextProvider=function(k){return D(k)===d},hr.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},hr.isForwardRef=function(k){return D(k)===g},hr.isFragment=function(k){return D(k)===r},hr.isLazy=function(k){return D(k)===w},hr.isMemo=function(k){return D(k)===y},hr.isPortal=function(k){return D(k)===t},hr.isProfiler=function(k){return D(k)===i},hr.isStrictMode=function(k){return D(k)===n},hr.isSuspense=function(k){return D(k)===h},hr.isSuspenseList=function(k){return D(k)===x},hr.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===r||k===i||k===n||k===h||k===x||typeof k=="object"&&k!==null&&(k.$$typeof===w||k.$$typeof===y||k.$$typeof===d||k.$$typeof===o||k.$$typeof===g||k.$$typeof===_||k.getModuleId!==void 0)},hr.typeOf=D,hr}var w8;function Jse(){return w8||(w8=1,av.exports=Qse()),av.exports}var eie=Jse(),N8=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",S8=null,sv=null,HR=e=>{if(e===S8&&Array.isArray(sv))return sv;var t=[];return N.Children.forEach(e,r=>{ss(r)||(eie.isFragment(r)?t=t.concat(HR(r.props.children)):t.push(r))}),sv=t,S8=e,t};function qR(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>N8(i)):n=[N8(t)],HR(e).forEach(i=>{var o=qf(i,"type.displayName")||qf(i,"type.name");o&&n.indexOf(o)!==-1&&r.push(i)}),r}var iv={},C8;function tie(){return C8||(C8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(iv)),iv}var lv,A8;function rie(){return A8||(A8=1,lv=tie().isPlainObject),lv}var nie=rie();const aie=ki(nie);function T8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function O8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T8(Object(r),!0).forEach(function(n){sie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sie(e,t,r){return(t=iie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iie(e){var t=lie(e,"string");return typeof t=="symbol"?t:t+""}function lie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ap(){return ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ap.apply(null,arguments)}var _8=(e,t,r,n,i)=>{var o=r-n,d;return d="M ".concat(e,",").concat(t),d+="L ".concat(e+r,",").concat(t),d+="L ".concat(e+r-o/2,",").concat(t+i),d+="L ".concat(e+r-o/2-n,",").concat(t+i),d+="L ".concat(e,",").concat(t," Z"),d},oie={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},cie=e=>{var t=Rs(e,oie),{x:r,y:n,upperWidth:i,lowerWidth:o,height:d,className:g}=t,{animationEasing:h,animationDuration:x,animationBegin:y,isUpdateAnimationActive:w}=t,C=N.useRef(null),[_,D]=N.useState(-1),k=N.useRef(i),M=N.useRef(o),R=N.useRef(d),F=N.useRef(r),I=N.useRef(n),G=Ew(e,"trapezoid-");if(N.useEffect(()=>{if(C.current&&C.current.getTotalLength)try{var xe=C.current.getTotalLength();xe&&D(xe)}catch{}},[]),r!==+r||n!==+n||i!==+i||o!==+o||d!==+d||i===0&&o===0||d===0)return null;var U=fn("recharts-trapezoid",g);if(!w)return N.createElement("g",null,N.createElement("path",ap({},Ds(t),{className:U,d:_8(r,n,i,o,d)})));var z=k.current,L=M.current,H=R.current,V=F.current,Q=I.current,Y="0px ".concat(_===-1?1:_,"px"),X="".concat(_,"px 0px"),he=vM(["strokeDasharray"],x,h);return N.createElement(vw,{animationId:G,key:G,canBegin:_>0,duration:x,easing:h,isActive:w,begin:y},xe=>{var ae=Ws(z,i,xe),ne=Ws(L,o,xe),se=Ws(H,d,xe),Te=Ws(V,r,xe),we=Ws(Q,n,xe);C.current&&(k.current=ae,M.current=ne,R.current=se,F.current=Te,I.current=we);var te=xe>0?{transition:he,strokeDasharray:X}:{strokeDasharray:Y};return N.createElement("path",ap({},Ds(t),{className:U,d:_8(Te,we,ae,ne,se),ref:C,style:O8(O8({},te),t.style)}))})},uie=["option","shapeType","propTransformer","activeClassName"];function die(e,t){if(e==null)return{};var r,n,i=fie(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function fie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function D8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D8(Object(r),!0).forEach(function(n){mie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mie(e,t,r){return(t=hie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hie(e){var t=gie(e,"string");return typeof t=="symbol"?t:t+""}function gie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pie(e,t){return sp(sp({},t),e)}function yie(e,t){return e==="symbols"}function k8(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return N.createElement(SM,r);case"trapezoid":return N.createElement(cie,r);case"sector":return N.createElement(OM,r);case"symbols":if(yie(t))return N.createElement(aw,r);break;case"curve":return N.createElement(bw,r);default:return null}}function xie(e){return N.isValidElement(e)?e.props:e}function bie(e){var{option:t,shapeType:r,propTransformer:n=pie,activeClassName:i="recharts-active-shape"}=e,o=die(e,uie),d;if(N.isValidElement(t))d=N.cloneElement(t,sp(sp({},o),xie(t)));else if(typeof t=="function")d=t(o,o.index);else if(aie(t)&&typeof t!="boolean"){var g=n(t,o);d=N.createElement(k8,{shapeType:r,elementProps:g})}else{var h=o;d=N.createElement(k8,{shapeType:r,elementProps:h})}return o.isActive?N.createElement(To,{className:i},d):d}var vie=(e,t,r)=>{var n=mn();return(i,o)=>d=>{e?.(i,o,d),n(aR({activeIndex:String(o),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},Eie=e=>{var t=mn();return(r,n)=>i=>{e?.(r,n,i),t(_re())}},wie=(e,t,r)=>{var n=mn();return(i,o)=>d=>{e?.(i,o,d),n(Dre({activeIndex:String(o),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}};function Nie(e){var{tooltipEntrySettings:t}=e,r=mn(),n=Mo(),i=N.useRef(null);return N.useLayoutEffect(()=>{n||(i.current===null?r(Cre(t)):i.current!==t&&r(Are({prev:i.current,next:t})),i.current=t)},[t,r,n]),N.useLayoutEffect(()=>()=>{i.current&&(r(Tre(i.current)),i.current=null)},[r]),null}function Sie(e){var{legendPayload:t}=e,r=mn(),n=Dt(Sr),i=N.useRef(null);return N.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(i.current===null?r(GK(t)):i.current!==t&&r(YK({prev:i.current,next:t})),i.current=t)},[r,n,t]),N.useLayoutEffect(()=>()=>{i.current&&(r(XK(i.current)),i.current=null)},[r]),null}var ov,Cie=()=>{var[e]=N.useState(()=>$f("uid-"));return e},Aie=(ov=L9.useId)!==null&&ov!==void 0?ov:Cie;function $R(e,t){var r=Aie();return t||(e?"".concat(e,"-").concat(r):r)}var Tie=N.createContext(void 0),Oie=e=>{var{id:t,type:r,children:n}=e,i=$R("recharts-".concat(r),t);return N.createElement(Tie.Provider,{value:i},n(i))},_ie={cartesianItems:[],polarItems:[]},GR=Ia({name:"graphicalItems",initialState:_ie,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Fr()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=ti(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:Fr()},removeCartesianGraphicalItem:{reducer(e,t){var r=ti(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Fr()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Fr()},removePolarGraphicalItem:{reducer(e,t){var r=ti(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Fr()}}}),{addCartesianGraphicalItem:efe,replaceCartesianGraphicalItem:tfe,removeCartesianGraphicalItem:rfe,addPolarGraphicalItem:Die,removePolarGraphicalItem:kie}=GR.actions,Mie=GR.reducer;function Pie(e){var t=mn();return N.useLayoutEffect(()=>(t(Die(e)),()=>{t(kie(e))}),[t,e]),null}var Rie=["key"],Iie=["onMouseEnter","onClick","onMouseLeave"],Lie=["id"],Bie=["id"];function M8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M8(Object(r),!0).forEach(function(n){Fie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fie(e,t,r){return(t=Uie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uie(e){var t=jie(e,"string");return typeof t=="symbol"?t:t+""}function jie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Do(){return Do=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Do.apply(null,arguments)}function f1(e,t){if(e==null)return{};var r,n,i=zie(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function zie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Vie(e){var t=N.useMemo(()=>qR(e.children,ed),[e.children]),r=Dt(n=>Kse(n,e.id,t));return r==null?null:N.createElement(Sie,{legendPayload:r})}var Hie=N.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:i,strokeWidth:o,fill:d,name:g,hide:h,tooltipType:x}=e,y={dataDefinedOnItem:n.map(w=>w.tooltipPayload),positions:n.map(w=>w.tooltipPosition),settings:{stroke:i,strokeWidth:o,fill:d,dataKey:t,nameKey:r,name:tM(g,t),hide:h,type:x,color:d,unit:""}};return N.createElement(Nie,{tooltipEntrySettings:y})}),qie=(e,t)=>e>t?"start":e<t?"end":"middle",$ie=(e,t,r)=>ns(typeof t=="function"?t(e):t,r,r*.8),Gie=(e,t,r)=>{var{top:n,left:i,width:o,height:d}=t,g=CM(o,d),h=i+ns(e.cx,o,o/2),x=n+ns(e.cy,d,d/2),y=ns(e.innerRadius,g,0),w=$ie(r,e.outerRadius,g),C=e.maxRadius||Math.sqrt(o*o+d*d)/2;return{cx:h,cy:x,innerRadius:y,outerRadius:w,maxRadius:C}},Yie=(e,t)=>{var r=ka(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function Xie(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Wie=(e,t)=>{if(N.isValidElement(e))return N.cloneElement(e,t);if(typeof e=="function")return e(t);var r=fn("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,i=f1(t,Rie);return N.createElement(bw,Do({},i,{type:"linear",className:r}))},Kie=(e,t,r)=>{if(N.isValidElement(e))return N.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),N.isValidElement(n)))return n;var i=fn("recharts-pie-label-text",Xie(e));return N.createElement(kN,Do({},t,{alignmentBaseline:"middle",className:i}),n)};function Zie(e){var{sectors:t,props:r,showLabels:n}=e,{label:i,labelLine:o,dataKey:d}=r;if(!n||!i||!t)return null;var g=$u(r),h=Jv(i),x=Jv(o),y=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,w=t.map((C,_)=>{var D=(C.startAngle+C.endAngle)/2,k=Sn(C.cx,C.cy,C.outerRadius+y,D),M=tn(tn(tn(tn({},g),C),{},{stroke:"none"},h),{},{index:_,textAnchor:qie(k.x,C.cx)},k),R=tn(tn(tn(tn({},g),C),{},{fill:"none",stroke:C.fill},x),{},{index:_,points:[Sn(C.cx,C.cy,C.outerRadius,D),k],key:"line"});return N.createElement(Um,{zIndex:ei.label,key:"label-".concat(C.startAngle,"-").concat(C.endAngle,"-").concat(C.midAngle,"-").concat(_)},N.createElement(To,null,o&&Wie(o,R),Kie(i,M,un(C,d))))});return N.createElement(To,{className:"recharts-pie-labels"},w)}function Qie(e){var{sectors:t,props:r,showLabels:n}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?N.createElement(Lse,{label:i}):N.createElement(Zie,{sectors:t,props:r,showLabels:n})}function Jie(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:i,shape:o,id:d}=e,g=Dt(am),h=Dt(xR),x=Dt(gne),{onMouseEnter:y,onClick:w,onMouseLeave:C}=i,_=f1(i,Iie),D=vie(y,i.dataKey,d),k=Eie(C),M=wie(w,i.dataKey,d);return t==null||t.length===0?null:N.createElement(N.Fragment,null,t.map((R,F)=>{if(R?.startAngle===0&&R?.endAngle===0&&t.length!==1)return null;var I=x==null||x===d,G=String(F)===g&&(h==null||i.dataKey===h)&&I,U=g?n:null,z=r&&G?r:U,L=tn(tn({},R),{},{stroke:R.stroke,tabIndex:-1,[nM]:F,[aM]:i.dataKey});return N.createElement(To,Do({key:"sector-".concat(R?.startAngle,"-").concat(R?.endAngle,"-").concat(R.midAngle,"-").concat(F),tabIndex:-1,className:"recharts-pie-sector"},c7(_,R,F),{onMouseEnter:D(R,F),onMouseLeave:k(R,F),onClick:M(R,F)}),N.createElement(bie,Do({option:o??z,index:F,shapeType:"sector",isActive:G},L)))}))}function ele(e){var t,{pieSettings:r,displayedData:n,cells:i,offset:o}=e,{cornerRadius:d,startAngle:g,endAngle:h,dataKey:x,nameKey:y,tooltipType:w}=r,C=Math.abs(r.minAngle),_=Yie(g,h),D=Math.abs(_),k=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,M=n.filter(z=>un(z,x,0)!==0).length,R=(D>=360?M:M-1)*k,F=D-M*C-R,I=n.reduce((z,L)=>{var H=un(L,x,0);return z+(Tt(H)?H:0)},0),G;if(I>0){var U;G=n.map((z,L)=>{var H=un(z,x,0),V=un(z,y,L),Q=Gie(r,o,z),Y=(Tt(H)?H:0)/I,X,he=tn(tn({},z),i&&i[L]&&i[L].props);L?X=U.endAngle+ka(_)*k*(H!==0?1:0):X=g;var xe=X+ka(_)*((H!==0?C:0)+Y*F),ae=(X+xe)/2,ne=(Q.innerRadius+Q.outerRadius)/2,se=[{name:V,value:H,payload:he,dataKey:x,type:w}],Te=Sn(Q.cx,Q.cy,ne,ae);return U=tn(tn(tn(tn({},r.presentationProps),{},{percent:Y,cornerRadius:typeof d=="string"?parseFloat(d):d,name:V,tooltipPayload:se,midAngle:ae,middleRadius:ne,tooltipPosition:Te},he),Q),{},{value:H,dataKey:x,startAngle:X,endAngle:xe,payload:he,paddingAngle:ka(_)*k}),U})}return G}function tle(e){var{showLabels:t,sectors:r,children:n}=e,i=N.useMemo(()=>!t||!r?[]:r.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[r,t]);return N.createElement(Pse,{value:t?i:void 0},n)}function rle(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:i,isAnimationActive:o,animationBegin:d,animationDuration:g,animationEasing:h,activeShape:x,inactiveShape:y,onAnimationStart:w,onAnimationEnd:C}=t,_=Ew(t,"recharts-pie-"),D=r.current,[k,M]=N.useState(!1),R=N.useCallback(()=>{typeof C=="function"&&C(),M(!1)},[C]),F=N.useCallback(()=>{typeof w=="function"&&w(),M(!0)},[w]);return N.createElement(tle,{showLabels:!k,sectors:i},N.createElement(vw,{animationId:_,begin:d,duration:g,isActive:o,easing:h,onAnimationStart:F,onAnimationEnd:R,key:_},I=>{var G=[],U=i&&i[0],z=U?.startAngle;return i?.forEach((L,H)=>{var V=D&&D[H],Q=H>0?qf(L,"paddingAngle",0):0;if(V){var Y=Ws(V.endAngle-V.startAngle,L.endAngle-L.startAngle,I),X=tn(tn({},L),{},{startAngle:z+Q,endAngle:z+Y+Q});G.push(X),z=X.endAngle}else{var{endAngle:he,startAngle:xe}=L,ae=Ws(0,he-xe,I),ne=tn(tn({},L),{},{startAngle:z+Q,endAngle:z+ae+Q});G.push(ne),z=ne.endAngle}}),r.current=G,N.createElement(To,null,N.createElement(Jie,{sectors:G,activeShape:x,inactiveShape:y,allOtherPieProps:t,shape:t.shape,id:n}))}),N.createElement(Qie,{showLabels:!k,sectors:i,props:t}),t.children)}var nle={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ei.area};function ale(e){var{id:t}=e,r=f1(e,Lie),{hide:n,className:i,rootTabIndex:o}=e,d=N.useMemo(()=>qR(e.children,ed),[e.children]),g=Dt(y=>Zse(y,t,d)),h=N.useRef(null),x=fn("recharts-pie",i);return n||g==null?(h.current=null,N.createElement(To,{tabIndex:o,className:x})):N.createElement(Um,{zIndex:e.zIndex},N.createElement(Hie,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:g,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),N.createElement(To,{tabIndex:o,className:x},N.createElement(rle,{props:tn(tn({},r),{},{sectors:g}),previousSectorsRef:h,id:t})))}function ip(e){var t=Rs(e,nle),{id:r}=t,n=f1(t,Bie),i=$u(n);return N.createElement(Oie,{id:r,type:"pie"},o=>N.createElement(N.Fragment,null,N.createElement(Pie,{type:"pie",id:o,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),N.createElement(Vie,Do({},n,{id:o})),N.createElement(ale,Do({},n,{id:o}))))}ip.displayName="Pie";function P8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function R8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P8(Object(r),!0).forEach(function(n){sle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sle(e,t,r){return(t=ile(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ile(e){var t=lle(e,"string");return typeof t=="symbol"?t:t+""}function lle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ole={xAxis:{},yAxis:{},zAxis:{}},YR=Ia({name:"cartesianAxis",initialState:ole,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Fr()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Fr()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Fr()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Fr()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Fr()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Fr()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Fr()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Fr()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Fr()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var o=i.widthHistory||[];if(o.length===3&&o[0]===o[2]&&n===o[1]&&n!==i.width&&Math.abs(n-o[0])<=1)return;var d=[...o,n].slice(-3);e.yAxis[r]=R8(R8({},e.yAxis[r]),{},{width:n,widthHistory:d})}}}}),{addXAxis:nfe,replaceXAxis:afe,removeXAxis:sfe,addYAxis:ife,replaceYAxis:lfe,removeYAxis:ofe,addZAxis:cfe,replaceZAxis:ufe,removeZAxis:dfe,updateYAxisWidth:ffe}=YR.actions,cle=YR.reducer,ule=De([Hn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),dle=De([ule,Sl,Cl],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),fle=()=>Dt(dle),mle={},XR=Ia({name:"errorBars",initialState:mle,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(o=>o.dataKey===n.dataKey&&o.direction===n.direction?i:o))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:mfe,replaceErrorBar:hfe,removeErrorBar:gfe}=XR.actions,hle=XR.reducer,cv={exports:{}},uv={};var I8;function gle(){if(I8)return uv;I8=1;var e=td();function t(h,x){return h===x&&(h!==0||1/h===1/x)||h!==h&&x!==x}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,d=e.useMemo,g=e.useDebugValue;return uv.useSyncExternalStoreWithSelector=function(h,x,y,w,C){var _=i(null);if(_.current===null){var D={hasValue:!1,value:null};_.current=D}else D=_.current;_=d(function(){function M(U){if(!R){if(R=!0,F=U,U=w(U),C!==void 0&&D.hasValue){var z=D.value;if(C(z,U))return I=z}return I=U}if(z=I,r(F,U))return z;var L=w(U);return C!==void 0&&C(z,L)?(F=U,z):(F=U,I=L)}var R=!1,F,I,G=y===void 0?null:y;return[function(){return M(x())},G===null?void 0:function(){return M(G())}]},[x,y,w,C]);var k=n(h,_[0],_[1]);return o(function(){D.hasValue=!0,D.value=k},[k]),g(k),k},uv}var L8;function ple(){return L8||(L8=1,cv.exports=gle()),cv.exports}ple();function yle(e){e()}function xle(){let e=null,t=null;return{clear(){e=null,t=null},notify(){yle(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var B8={notify(){},get:()=>[]};function ble(e,t){let r,n=B8,i=0,o=!1;function d(k){y();const M=n.subscribe(k);let R=!1;return()=>{R||(R=!0,M(),w())}}function g(){n.notify()}function h(){D.onStateChange&&D.onStateChange()}function x(){return o}function y(){i++,r||(r=e.subscribe(h),n=xle())}function w(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=B8)}function C(){o||(o=!0,y())}function _(){o&&(o=!1,w())}const D={addNestedSub:d,notifyNestedSubs:g,handleChangeWrapper:h,isSubscribed:x,trySubscribe:C,tryUnsubscribe:_,getListeners:()=>n};return D}var vle=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ele=vle(),wle=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Nle=wle(),Sle=()=>Ele||Nle?N.useLayoutEffect:N.useEffect,Cle=Sle();function F8(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Ale(e,t){if(F8(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!F8(e[r[i]],t[r[i]]))return!1;return!0}var Tle=Symbol.for("react-redux-context"),Ole=typeof globalThis<"u"?globalThis:{};function _le(){if(!N.createContext)return{};const e=Ole[Tle]??=new Map;let t=e.get(N.createContext);return t||(t=N.createContext(null),e.set(N.createContext,t)),t}var Dle=_le();function kle(e){const{children:t,context:r,serverState:n,store:i}=e,o=N.useMemo(()=>{const h=ble(i);return{store:i,subscription:h,getServerState:n?()=>n:void 0}},[i,n]),d=N.useMemo(()=>i.getState(),[i]);Cle(()=>{const{subscription:h}=o;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),d!==i.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[o,d]);const g=r||Dle;return N.createElement(g.Provider,{value:o},t)}var Mle=kle,Ple=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function Rle(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Ile(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(Ple.has(n)){if(e[n]==null&&t[n]==null)continue;if(!Ale(e[n],t[n]))return!1}else if(!Rle(e[n],t[n]))return!1;return!0}var Lle=e=>{var{chartData:t}=e,r=mn(),n=Mo();return N.useEffect(()=>n?()=>{}:(r(K6(t)),()=>{r(K6(void 0))}),[t,r,n]),null},U8={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},WR=Ia({name:"brush",initialState:U8,reducers:{setBrushSettings(e,t){return t.payload==null?U8:t.payload}}}),{setBrushSettings:pfe}=WR.actions,Ble=WR.reducer,Fle={dots:[],areas:[],lines:[]},KR=Ia({name:"referenceElements",initialState:Fle,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=ti(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=ti(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=ti(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:yfe,removeDot:xfe,addArea:bfe,removeArea:vfe,addLine:Efe,removeLine:wfe}=KR.actions,Ule=KR.reducer,jle=N.createContext(void 0),zle=e=>{var{children:t}=e,[r]=N.useState("".concat($f("recharts"),"-clip")),n=fle();if(n==null)return null;var{x:i,y:o,width:d,height:g}=n;return N.createElement(jle.Provider,{value:r},N.createElement("defs",null,N.createElement("clipPath",{id:r},N.createElement("rect",{x:i,y:o,height:g,width:d}))),t)},Vle=(e,t)=>t,RN=De([Vle,Sr,kP,In,hR,Tl,Mne,Hn],Une),IN=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},ZR=ks("mouseClick"),QR=wm();QR.startListening({actionCreator:ZR,effect:(e,t)=>{var r=e.payload,n=RN(t.getState(),IN(r));n?.activeIndex!=null&&t.dispatch(kre({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var WE=ks("mouseMove"),JR=wm(),Ch=null;JR.startListening({actionCreator:WE,effect:(e,t)=>{var r=e.payload;Ch!==null&&cancelAnimationFrame(Ch);var n=IN(r);Ch=requestAnimationFrame(()=>{var i=t.getState(),o=EN(i,i.tooltip.settings.shared);if(o==="axis"){var d=RN(i,n);d?.activeIndex!=null?t.dispatch(iR({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate})):t.dispatch(sR())}Ch=null})}});var j8={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},eI=Ia({name:"rootProps",initialState:j8,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:j8.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Hle=eI.reducer,{updateOptions:qle}=eI.actions,tI=Ia({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:$le}=tI.actions,Gle=tI.reducer,rI=ks("keyDown"),nI=ks("focus"),LN=wm();LN.startListening({actionCreator:rI,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var d=wN(i,yd(r),Pm(r),Bm(r)),g=d==null?-1:Number(d);if(!(!Number.isFinite(g)||g<0)){var h=Tl(r);if(o==="Enter"){var x=tp(r,"axis","hover",String(i.index));t.dispatch(HE({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:x}));return}var y=Ere(r),w=y==="left-to-right"?1:-1,C=o==="ArrowRight"?1:-1,_=g+C*w;if(!(h==null||_>=h.length||_<0)){var D=tp(r,"axis","hover",String(_));t.dispatch(HE({active:!0,activeIndex:_.toString(),activeDataKey:void 0,activeCoordinate:D}))}}}}}});LN.startListening({actionCreator:nI,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var o="0",d=tp(r,"axis","hover",String(o));t.dispatch(HE({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:d}))}}}});var Es=ks("externalEvent"),aI=wm(),dv=new Map;aI.startListening({actionCreator:Es,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var i=n.type,o=dv.get(i);o!==void 0&&cancelAnimationFrame(o);var d=requestAnimationFrame(()=>{try{var g=t.getState(),h={activeCoordinate:yne(g),activeDataKey:xR(g),activeIndex:am(g),activeLabel:yR(g),activeTooltipIndex:am(g),isTooltipActive:xne(g)};r(h,n)}finally{dv.delete(i)}});dv.set(i,d)}}});var Yle=De([pd],e=>e.tooltipItemPayloads),Xle=De([Yle,Im,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(g=>g.settings.dataKey===n);if(i!=null){var{positions:o}=i;if(o!=null){var d=t(o,r);return d}}}),sI=ks("touchMove"),iI=wm();iI.startListening({actionCreator:sI,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=EN(n,n.tooltip.settings.shared);if(i==="axis"){var o=RN(n,IN({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));o?.activeIndex!=null&&t.dispatch(iR({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var d,g=r.touches[0];if(document.elementFromPoint==null)return;var h=document.elementFromPoint(g.clientX,g.clientY);if(!h||!h.getAttribute)return;var x=h.getAttribute(nM),y=(d=h.getAttribute(aM))!==null&&d!==void 0?d:void 0,w=Xle(t.getState(),x,y);t.dispatch(aR({activeDataKey:y,activeIndex:x,activeCoordinate:w}))}}}});var Wle=A7({brush:Ble,cartesianAxis:cle,chartData:yae,errorBars:hle,graphicalItems:Mie,layout:jW,legend:WK,options:fae,polarAxis:qse,polarOptions:Gle,referenceElements:Ule,rootProps:Hle,tooltip:Mre,zIndex:Jne}),Kle=function(t){return dW({reducer:Wle,preloadedState:t,middleware:r=>{var n;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([QR.middleware,JR.middleware,LN.middleware,aI.middleware,iI.middleware])},enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(z7({type:"raf"}))},devTools:Xp.devToolsEnabled})};function Zle(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=Mo(),o=N.useRef(null);if(i)return r;o.current==null&&(o.current=Kle(t));var d=iw;return N.createElement(Mle,{context:d,store:o.current},r)}function Qle(e){var{layout:t,margin:r}=e,n=mn(),i=Mo();return N.useEffect(()=>{i||(n(BW(t)),n(LW(r)))},[n,i,t,r]),null}var Jle=N.memo(Qle,Ile);function eoe(e){var t=mn();return N.useEffect(()=>{t(qle(e))},[t,e]),null}function z8(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",i=$R("".concat(n).concat(t)),o=mn();return N.useLayoutEffect(()=>(o(Zne({zIndex:t,elementId:i,isPanorama:r})),()=>{o(Qne({zIndex:t,isPanorama:r}))}),[o,t,i,r]),N.createElement("g",{tabIndex:-1,id:i})}function V8(e){var{children:t,isPanorama:r}=e,n=Dt(zne);if(!n||n.length===0)return t;var i=n.filter(d=>d<0),o=n.filter(d=>d>0);return N.createElement(N.Fragment,null,i.map(d=>N.createElement(z8,{key:d,zIndex:d,isPanorama:r})),t,o.map(d=>N.createElement(z8,{key:d,zIndex:d,isPanorama:r})))}var toe=["children"];function roe(e,t){if(e==null)return{};var r,n,i=noe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function noe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function lp(){return lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lp.apply(null,arguments)}var aoe={width:"100%",height:"100%",display:"block"},soe=N.forwardRef((e,t)=>{var r=cM(),n=uM(),i=bM();if(!Oo(r)||!Oo(n))return null;var{children:o,otherAttributes:d,title:g,desc:h}=e,x,y;return d!=null&&(typeof d.tabIndex=="number"?x=d.tabIndex:x=i?0:void 0,typeof d.role=="string"?y=d.role:y=i?"application":void 0),N.createElement(Z2,lp({},d,{title:g,desc:h,role:y,tabIndex:x,width:r,height:n,style:aoe,ref:t}),o)}),ioe=e=>{var{children:t}=e,r=Dt(Vp);if(!r)return null;var{width:n,height:i,y:o,x:d}=r;return N.createElement(Z2,{width:n,height:i,x:d,y:o},t)},H8=N.forwardRef((e,t)=>{var{children:r}=e,n=roe(e,toe),i=Mo();return i?N.createElement(ioe,null,N.createElement(V8,{isPanorama:!0},r)):N.createElement(soe,lp({ref:t},n),N.createElement(V8,{isPanorama:!1},r))});function loe(){var e=mn(),[t,r]=N.useState(null),n=Dt(tK);return N.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),o=i.width/t.offsetWidth;Vn(o)&&o!==n&&e(UW(o))}},[t,e,n]),r}function q8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ooe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q8(Object(r),!0).forEach(function(n){coe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function coe(e,t,r){return(t=uoe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uoe(e){var t=doe(e,"string");return typeof t=="symbol"?t:t+""}function doe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kc(){return kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kc.apply(null,arguments)}var foe=()=>(Aae(),null);function op(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var moe=N.forwardRef((e,t)=>{var r,n,i=N.useRef(null),[o,d]=N.useState({containerWidth:op((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:op((n=e.style)===null||n===void 0?void 0:n.height)}),g=N.useCallback((x,y)=>{d(w=>{var C=Math.round(x),_=Math.round(y);return w.containerWidth===C&&w.containerHeight===_?w:{containerWidth:C,containerHeight:_}})},[]),h=N.useCallback(x=>{if(typeof t=="function"&&t(x),x!=null&&typeof ResizeObserver<"u"){var{width:y,height:w}=x.getBoundingClientRect();g(y,w);var C=D=>{var{width:k,height:M}=D[0].contentRect;g(k,M)},_=new ResizeObserver(C);_.observe(x),i.current=_}},[t,g]);return N.useEffect(()=>()=>{var x=i.current;x?.disconnect()},[g]),N.createElement(N.Fragment,null,N.createElement(qp,{width:o.containerWidth,height:o.containerHeight}),N.createElement("div",kc({ref:h},e)))}),hoe=N.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,o]=N.useState({containerWidth:op(r),containerHeight:op(n)}),d=N.useCallback((h,x)=>{o(y=>{var w=Math.round(h),C=Math.round(x);return y.containerWidth===w&&y.containerHeight===C?y:{containerWidth:w,containerHeight:C}})},[]),g=N.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null){var{width:x,height:y}=h.getBoundingClientRect();d(x,y)}},[t,d]);return N.createElement(N.Fragment,null,N.createElement(qp,{width:i.containerWidth,height:i.containerHeight}),N.createElement("div",kc({ref:g},e)))}),goe=N.forwardRef((e,t)=>{var{width:r,height:n}=e;return N.createElement(N.Fragment,null,N.createElement(qp,{width:r,height:n}),N.createElement("div",kc({ref:t},e)))}),poe=N.forwardRef((e,t)=>{var{width:r,height:n}=e;return pl(r)||pl(n)?N.createElement(hoe,kc({},e,{ref:t})):N.createElement(goe,kc({},e,{ref:t}))});function yoe(e){return e===!0?moe:poe}var xoe=N.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:o,onContextMenu:d,onDoubleClick:g,onMouseDown:h,onMouseEnter:x,onMouseLeave:y,onMouseMove:w,onMouseUp:C,onTouchEnd:_,onTouchMove:D,onTouchStart:k,style:M,width:R,responsive:F,dispatchTouchEvents:I=!0}=e,G=N.useRef(null),U=mn(),[z,L]=N.useState(null),[H,V]=N.useState(null),Q=loe(),Y=gw(),X=Y?.width>0?Y.width:R,he=Y?.height>0?Y.height:i,xe=N.useCallback(ve=>{Q(ve),typeof t=="function"&&t(ve),L(ve),V(ve),ve!=null&&(G.current=ve)},[Q,t,L,V]),ae=N.useCallback(ve=>{U(ZR(ve)),U(Es({handler:o,reactEvent:ve}))},[U,o]),ne=N.useCallback(ve=>{U(WE(ve)),U(Es({handler:x,reactEvent:ve}))},[U,x]),se=N.useCallback(ve=>{U(sR()),U(Es({handler:y,reactEvent:ve}))},[U,y]),Te=N.useCallback(ve=>{U(WE(ve)),U(Es({handler:w,reactEvent:ve}))},[U,w]),we=N.useCallback(()=>{U(nI())},[U]),te=N.useCallback(ve=>{U(rI(ve.key))},[U]),K=N.useCallback(ve=>{U(Es({handler:d,reactEvent:ve}))},[U,d]),ee=N.useCallback(ve=>{U(Es({handler:g,reactEvent:ve}))},[U,g]),fe=N.useCallback(ve=>{U(Es({handler:h,reactEvent:ve}))},[U,h]),ce=N.useCallback(ve=>{U(Es({handler:C,reactEvent:ve}))},[U,C]),Se=N.useCallback(ve=>{U(Es({handler:k,reactEvent:ve}))},[U,k]),ie=N.useCallback(ve=>{I&&U(sI(ve)),U(Es({handler:D,reactEvent:ve}))},[U,I,D]),oe=N.useCallback(ve=>{U(Es({handler:_,reactEvent:ve}))},[U,_]),He=yoe(F);return N.createElement(CR.Provider,{value:z},N.createElement(Vk.Provider,{value:H},N.createElement(He,{width:X??M?.width,height:he??M?.height,className:fn("recharts-wrapper",n),style:ooe({position:"relative",cursor:"default",width:X,height:he},M),onClick:ae,onContextMenu:K,onDoubleClick:ee,onFocus:we,onKeyDown:te,onMouseDown:fe,onMouseEnter:ne,onMouseLeave:se,onMouseMove:Te,onMouseUp:ce,onTouchEnd:oe,onTouchMove:ie,onTouchStart:Se,ref:xe},N.createElement(foe,null),r)))}),boe=["width","height","responsive","children","className","style","compact","title","desc"];function voe(e,t){if(e==null)return{};var r,n,i=Eoe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Eoe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var woe=N.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:o,className:d,style:g,compact:h,title:x,desc:y}=e,w=voe(e,boe),C=$u(w);return h?N.createElement(N.Fragment,null,N.createElement(qp,{width:r,height:n}),N.createElement(H8,{otherAttributes:C,title:x,desc:y},o)):N.createElement(xoe,{className:d,style:g,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},N.createElement(H8,{otherAttributes:C,title:x,desc:y,ref:t},N.createElement(zle,null,o)))});function Noe(e){var t=mn();return N.useEffect(()=>{t($le(e))},[t,e]),null}var Soe=["layout"];function KE(){return KE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KE.apply(null,arguments)}function Coe(e,t){if(e==null)return{};var r,n,i=Aoe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Aoe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Toe={top:5,right:5,bottom:5,left:5},lI={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Toe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Ooe=N.forwardRef(function(t,r){var n,i=Rs(t.categoricalChartProps,lI),{layout:o}=i,d=Coe(i,Soe),{chartName:g,defaultTooltipEventType:h,validateTooltipEventTypes:x,tooltipPayloadSearcher:y}=t,w={chartName:g,defaultTooltipEventType:h,validateTooltipEventTypes:x,tooltipPayloadSearcher:y,eventEmitter:void 0};return N.createElement(Zle,{preloadedState:{options:w},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:g},N.createElement(Lle,{chartData:i.data}),N.createElement(Jle,{layout:o,margin:i.margin}),N.createElement(eoe,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),N.createElement(Noe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),N.createElement(woe,KE({},d,{ref:r})))});function $8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function G8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$8(Object(r),!0).forEach(function(n){_oe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _oe(e,t,r){return(t=Doe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Doe(e){var t=koe(e,"string");return typeof t=="symbol"?t:t+""}function koe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Moe=["item"],Poe=G8(G8({},lI),{},{layout:"centric",startAngle:0,endAngle:360}),ZE=N.forwardRef((e,t)=>{var r=Rs(e,Poe);return N.createElement(Ooe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Moe,tooltipPayloadSearcher:uae,categoricalChartProps:r,ref:t})});const Ah=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],Roe=({data:e,loading:t})=>{if(!e)return a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},a.createElement(Br,{loading:!0}),a.createElement(Br,{loading:!0}));const{totalPayments:r,totalRevenue:n,averageOrderValue:i,totalDiscount:o,paymentMethods:d=[],topCoupons:g=[]}=e,h=d.map(y=>({name:y._id,value:y.revenue,count:y.count})),x=({active:y,payload:w})=>y&&w&&w.length?a.createElement("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200"},a.createElement("p",{className:"text-sm font-semibold text-gray-900"},w[0].name),a.createElement("p",{className:"text-sm text-gray-600"},"Revenue: ",a.createElement("span",{className:"font-bold text-green-600"},Cs(w[0].value))),w[0].payload.count&&a.createElement("p",{className:"text-sm text-gray-600"},"Orders: ",a.createElement("span",{className:"font-bold"},w[0].payload.count))):null;return a.createElement("div",{className:"space-y-4"},a.createElement("h2",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Revenue & Payments"),a.createElement("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4"},a.createElement("div",{className:"xl:col-span-1 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-1 gap-3"},a.createElement(Br,{title:"Total Revenue",value:Cs(n),subtitle:`From ${$t(r)} transactions`,icon:a.createElement(J_,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:t}),a.createElement(Br,{title:"Total Payments",value:$t(r),subtitle:"Successful transactions",icon:a.createElement(oz,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:t}),a.createElement(Br,{title:"Average Order Value",value:Cs(i),subtitle:"Per transaction",icon:a.createElement(vg,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:t}),a.createElement(Br,{title:"Total Discounts",value:Cs(o),subtitle:"Coupons & offers applied",icon:a.createElement(SA,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:t})),h.length>0&&a.createElement("div",{className:"xl:col-span-2 bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},a.createElement("h3",{className:"text-sm font-bold text-gray-900 mb-3"},"Payment Distribution"),a.createElement(xE,{width:"100%",height:240},a.createElement(ZE,null,a.createElement(ip,{data:h,cx:"50%",cy:"50%",labelLine:!1,label:({name:y,percent:w})=>`${y} (${(w*100).toFixed(0)}%)`,outerRadius:70,fill:"#8884d8",dataKey:"value"},h.map((y,w)=>a.createElement(ed,{key:`cell-${w}`,fill:Ah[w%Ah.length]}))),a.createElement(GE,{content:a.createElement(x,null)}),a.createElement(xM,null))),a.createElement("div",{className:"mt-3 pt-3 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2"},h.map((y,w)=>a.createElement("div",{key:y.name,className:"flex items-center justify-between text-xs p-2 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"w-2.5 h-2.5 rounded-full shrink-0",style:{backgroundColor:Ah[w%Ah.length]}}),a.createElement("span",{className:"font-semibold text-gray-900"},y.name)),a.createElement("div",{className:"text-right"},a.createElement("p",{className:"font-bold text-gray-900"},Cs(y.value)),a.createElement("p",{className:"text-xs text-gray-500"},y.count," orders")))))))),g.length>0&&a.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},a.createElement("h3",{className:"text-sm font-bold text-gray-900 mb-3"},"Top Performing Coupons"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},g.map((y,w)=>a.createElement("div",{key:y._id,className:"relative p-3 rounded-lg border-2 border-dashed border-gray-200 hover:border-blue-400 hover:bg-blue-50/30 transition-all group"},a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("div",{className:"flex items-center gap-1.5"},a.createElement("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 text-white font-bold px-2 py-0.5 rounded text-xs shadow-sm"},"#",w+1),a.createElement("span",{className:"font-bold text-sm text-gray-900 group-hover:text-gray-900 transition-colors truncate"},y._id)),a.createElement(SA,{className:"text-orange-500 w-4 h-4 group-hover:scale-110 transition-transform shrink-0"})),a.createElement("div",{className:"grid grid-cols-2 gap-2 text-xs"},a.createElement("div",{className:"bg-white/50 p-2 rounded-lg"},a.createElement("p",{className:"text-xs text-gray-600 mb-0.5"},"Usage Count"),a.createElement("p",{className:"font-bold text-gray-900"},$t(y.usageCount))),a.createElement("div",{className:"bg-white/50 p-2 rounded-lg"},a.createElement("p",{className:"text-xs text-gray-600 mb-0.5"},"Total Discount"),a.createElement("p",{className:"font-bold text-green-600"},Cs(y.totalDiscount)))))))))},Y8={TECHNOLOGY:"#3B82F6",ENTERTAINMENT:"#EC4899",EDUCATION:"#10B981",BUSINESS:"#F59E0B",OTHER:"#6B7280"},X8={OFFLINE:"#EF4444",ONLINE:"#10B981",HYBRID:"#8B5CF6"},Ioe=({data:e,enrollmentsData:t,cashTicketsData:r,loading:n})=>{if(!e)return a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},a.createElement(Br,{loading:!0}));const{total:i,live:o,upcoming:d,past:g,byCategory:h={},byMode:x={}}=e,y=Object.entries(h).map(([_,D])=>({name:_,value:D})),w=Object.entries(x).map(([_,D])=>({name:_,value:D})),C=({active:_,payload:D})=>_&&D&&D.length?a.createElement("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200"},a.createElement("p",{className:"text-sm font-semibold text-gray-900"},D[0].name),a.createElement("p",{className:"text-sm text-gray-600"},"Events: ",a.createElement("span",{className:"font-bold text-gray-800"},D[0].value))):null;return a.createElement("div",{className:"space-y-4"},a.createElement("h2",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Events Overview"),a.createElement("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4"},a.createElement("div",{className:"space-y-3"},a.createElement(Br,{title:"Total Events",value:$t(i),subtitle:"All time events",icon:a.createElement(wA,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:n}),a.createElement(Br,{title:"Live Events",value:$t(o),subtitle:"Currently ongoing",icon:a.createElement(dz,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:n}),a.createElement(Br,{title:"Upcoming Events",value:$t(d),subtitle:"Scheduled ahead",icon:a.createElement(pz,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:n}),a.createElement(Br,{title:"Past Events",value:$t(g),subtitle:"Completed events",icon:a.createElement(lz,{className:"w-6 h-6"}),iconColor:"text-gray-600",loading:n})),y.length>0&&a.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},a.createElement("h3",{className:"text-sm font-bold text-gray-900 mb-3"},"Events by Category"),a.createElement(xE,{width:"100%",height:220},a.createElement(ZE,null,a.createElement(ip,{data:y,cx:"50%",cy:"50%",labelLine:!1,label:({name:_,percent:D})=>`${_.slice(0,3)} (${(D*100).toFixed(0)}%)`,outerRadius:60,fill:"#8884d8",dataKey:"value"},y.map((_,D)=>a.createElement(ed,{key:`cell-${D}`,fill:Y8[_.name]||"#6B7280"}))),a.createElement(GE,{content:a.createElement(C,null)}))),a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-2 gap-2"},y.map(_=>a.createElement("div",{key:_.name,className:"flex items-center gap-2 text-xs"},a.createElement("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:Y8[_.name]||"#6B7280"}}),a.createElement("span",{className:"font-semibold text-gray-900 truncate"},_.name),a.createElement("span",{className:"text-gray-600 ml-auto"},_.value))))),w.length>0&&a.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},a.createElement("h3",{className:"text-sm font-bold text-gray-900 mb-3"},"Events by Mode"),a.createElement(xE,{width:"100%",height:220},a.createElement(ZE,null,a.createElement(ip,{data:w,cx:"50%",cy:"50%",labelLine:!1,label:({name:_,percent:D})=>`${_} (${(D*100).toFixed(0)}%)`,outerRadius:60,fill:"#8884d8",dataKey:"value"},w.map((_,D)=>a.createElement(ed,{key:`cell-${D}`,fill:X8[_.name]||"#6B7280"}))),a.createElement(GE,{content:a.createElement(C,null)}))),a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-2"},w.map(_=>a.createElement("div",{key:_.name,className:"flex items-center justify-between text-sm p-2 rounded-lg bg-gray-50"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:X8[_.name]||"#6B7280"}}),a.createElement("span",{className:"font-semibold text-gray-900"},_.name)),a.createElement("span",{className:"font-bold text-gray-900"},_.value)))))),t&&a.createElement("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4"},a.createElement(Br,{title:"Total Enrollments",value:$t(t.totalEnrollments),subtitle:"Online + Cash combined",icon:a.createElement(Uk,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:n}),a.createElement(Br,{title:"Online Enrollments",value:$t(t.onlineEnrollments),subtitle:`${$t(t.onlineTickets)} tickets sold`,icon:a.createElement(Zv,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:n}),a.createElement(Br,{title:"Cash Enrollments",value:$t(t.cashEnrollments),subtitle:"Offline redemptions",icon:a.createElement(wA,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:n}),r&&a.createElement(Br,{title:"Cash Tickets",value:$t(r.totalMinted),subtitle:`${r.redeemed} redeemed, ${r.pending} pending`,icon:a.createElement(Qv,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:n})))},Loe=({data:e,loading:t})=>{const[r,n]=N.useState("totalRevenue"),[i,o]=N.useState("desc");if(!e||e.length===0)return a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},a.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},"Admin Performance"),a.createElement("p",{className:"text-gray-500 text-center py-8"},"No admin performance data available"));const d=[...e].sort((y,w)=>{const C=y[r],_=w[r];return i==="asc"?C-_:_-C}),g=y=>{r===y?o(i==="asc"?"desc":"asc"):(n(y),o("desc"))},h=y=>({SUPER_ADMIN:"bg-purple-100 text-purple-800",ADMIN:"bg-blue-100 text-blue-800",MANAGEMENT_STAFF:"bg-green-100 text-green-800"})[y]||"bg-gray-100 text-gray-800",x=(y,w)=>w?(y/w*100).toFixed(1):0;return t?a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},a.createElement("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6 animate-pulse"}),a.createElement("div",{className:"space-y-4"},[1,2,3].map(y=>a.createElement("div",{key:y,className:"h-20 bg-gray-100 rounded animate-pulse"})))):a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},a.createElement("div",{className:"flex items-center justify-between mb-6"},a.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Admin Performance"),a.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600"},a.createElement(ff,{className:"text-yellow-500"}),a.createElement("span",null,"Top ",d.length," performers"))),a.createElement("div",{className:"hidden lg:block overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",null,a.createElement("tr",{className:"border-b border-gray-200"},a.createElement("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm"},"Rank"),a.createElement("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm"},"Admin"),a.createElement("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm"},"Role"),a.createElement("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm cursor-pointer hover:text-gray-800",onClick:()=>g("totalTickets"),title:"Total cash tickets issued by this admin"},a.createElement("div",{className:"flex flex-col items-end"},a.createElement("span",null,"Tickets Issued ",r==="totalTickets"&&(i==="asc"?"":"")),a.createElement("span",{className:"text-xs font-normal text-gray-400"},"Cash tickets"))),a.createElement("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm cursor-pointer hover:text-gray-800",onClick:()=>g("redeemedRecords"),title:"Redemption records verified by this admin"},a.createElement("div",{className:"flex flex-col items-end"},a.createElement("span",null,"Redeemed ",r==="redeemedRecords"&&(i==="asc"?"":"")),a.createElement("span",{className:"text-xs font-normal text-gray-400"},"Records verified"))),a.createElement("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm",title:"Pending redemption records"},a.createElement("div",{className:"flex flex-col items-end"},a.createElement("span",null,"Pending"),a.createElement("span",{className:"text-xs font-normal text-gray-400"},"Awaiting"))),a.createElement("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 text-sm cursor-pointer hover:text-gray-800",onClick:()=>g("totalRevenue"),title:"Revenue from redeemed tickets"},a.createElement("div",{className:"flex flex-col items-end"},a.createElement("span",null,"Revenue ",r==="totalRevenue"&&(i==="asc"?"":"")),a.createElement("span",{className:"text-xs font-normal text-gray-400"},"From redemptions"))))),a.createElement("tbody",null,d.map((y,w)=>a.createElement("tr",{key:y.adminId,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"py-4 px-4"},a.createElement("div",{className:"flex items-center gap-2"},w===0&&a.createElement(ff,{className:"text-yellow-500 w-5 h-5"}),w===1&&a.createElement(ff,{className:"text-gray-400 w-5 h-5"}),w===2&&a.createElement(ff,{className:"text-orange-600 w-5 h-5"}),a.createElement("span",{className:"font-semibold text-gray-900"},"#",w+1))),a.createElement("td",{className:"py-4 px-4"},a.createElement("div",null,a.createElement("p",{className:"font-semibold text-gray-900"},y.adminName),a.createElement("p",{className:"text-xs text-gray-500"},"@",y.adminUsername))),a.createElement("td",{className:"py-4 px-4"},a.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h(y.adminRole)}`},y.adminRole.replace("_"," "))),a.createElement("td",{className:"py-4 px-4 text-right"},a.createElement("span",{className:"font-semibold text-blue-600"},$t(y.totalTickets))),a.createElement("td",{className:"py-4 px-4 text-right"},a.createElement("div",null,a.createElement("span",{className:"font-semibold text-green-600"},$t(y.redeemedRecords)),a.createElement("p",{className:"text-xs text-gray-500"},x(y.redeemedRecords,y.totalRecords),"% rate"))),a.createElement("td",{className:"py-4 px-4 text-right"},a.createElement("span",{className:"font-semibold text-orange-600"},$t(y.pendingRecords))),a.createElement("td",{className:"py-4 px-4 text-right"},a.createElement("span",{className:"font-bold text-gray-900"},Cs(y.totalRevenue)))))))),a.createElement("div",{className:"lg:hidden space-y-4"},d.map((y,w)=>a.createElement("div",{key:y.adminId,className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"},a.createElement("div",{className:"flex items-start justify-between mb-3"},a.createElement("div",{className:"flex items-center gap-2"},w<3&&a.createElement(ff,{className:w===0?"text-yellow-500":w===1?"text-gray-400":"text-orange-600"}),a.createElement("div",null,a.createElement("p",{className:"font-semibold text-gray-900"},y.adminName),a.createElement("p",{className:"text-xs text-gray-500"},"@",y.adminUsername))),a.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h(y.adminRole)}`},y.adminRole.replace("_"," "))),a.createElement("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg"},a.createElement("p",{className:"text-xs text-blue-600 font-medium mb-1"},"Cash Tickets Issued"),a.createElement("p",{className:"font-bold text-blue-800 text-lg"},$t(y.totalTickets))),a.createElement("div",{className:"p-2 bg-gray-50 rounded-lg"},a.createElement("p",{className:"text-xs text-gray-600 font-medium mb-2"},"Redemption Records"),a.createElement("div",{className:"grid grid-cols-3 gap-2 text-sm"},a.createElement("div",null,a.createElement("p",{className:"text-xs text-gray-500"},"Verified"),a.createElement("p",{className:"font-semibold text-green-600"},$t(y.redeemedRecords))),a.createElement("div",null,a.createElement("p",{className:"text-xs text-gray-500"},"Pending"),a.createElement("p",{className:"font-semibold text-orange-600"},$t(y.pendingRecords))),a.createElement("div",null,a.createElement("p",{className:"text-xs text-gray-500"},"Rate"),a.createElement("p",{className:"font-semibold text-gray-800"},x(y.redeemedRecords,y.totalRecords),"%")))),a.createElement("div",{className:"mt-3 pt-3 border-t border-gray-100"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-gray-600 text-sm flex items-center gap-1"},a.createElement(J_,{className:"text-purple-600"})," Revenue"),a.createElement("span",{className:"font-bold text-gray-900"},Cs(y.totalRevenue))))))))},W8=({events:e,loading:t})=>{if(!e||e.length===0)return a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},a.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},"Top Performing Events"),a.createElement("p",{className:"text-gray-500 text-center py-8"},"No event data available"));if(t)return a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},a.createElement("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6 animate-pulse"}),a.createElement("div",{className:"space-y-4"},[1,2,3].map(i=>a.createElement("div",{key:i,className:"h-32 bg-gray-100 rounded animate-pulse"}))));const r=i=>({TECHNOLOGY:"bg-blue-100 text-blue-800",ENTERTAINMENT:"bg-pink-100 text-pink-800",EDUCATION:"bg-green-100 text-green-800",BUSINESS:"bg-yellow-100 text-yellow-800",OTHER:"bg-gray-100 text-gray-800"})[i]||"bg-gray-100 text-gray-800",n=i=>{switch(i){case"ONLINE":return a.createElement(Zv,{className:"w-4 h-4 text-green-600"});case"OFFLINE":return a.createElement(Qv,{className:"w-4 h-4 text-red-600"});case"HYBRID":return a.createElement(vg,{className:"w-4 h-4 text-purple-600"});default:return a.createElement(vg,{className:"w-4 h-4 text-gray-600"})}};return a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},a.createElement("div",{className:"flex items-center justify-between mb-6"},a.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Top Performing Events"),a.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600"},a.createElement(wz,{className:"text-yellow-500"}),a.createElement("span",null,"Top ",e.length," events"))),a.createElement("div",{className:"space-y-4"},e.map((i,o)=>a.createElement("div",{key:i.eventId,className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200 hover:border-blue-300"},a.createElement("div",{className:"flex items-start justify-between mb-3"},a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},o<3&&a.createElement("span",{className:`
                        w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold
                        ${o===0?"bg-yellow-500 text-white":""}
                        ${o===1?"bg-gray-400 text-white":""}
                        ${o===2?"bg-orange-600 text-white":""}
                      `},o+1),a.createElement("h3",{className:"font-bold text-lg text-gray-900"},i.eventName)),a.createElement("div",{className:"flex flex-wrap items-center gap-3 text-sm text-gray-600"},a.createElement("span",{className:"flex items-center gap-1"},a.createElement(sz,{className:"w-4 h-4"}),EG(i.eventDate)),i.eventCity&&a.createElement("span",{className:"flex items-center gap-1"},a.createElement(mz,{className:"w-4 h-4"}),i.eventCity),a.createElement("span",{className:"flex items-center gap-1"},n(i.eventMode),i.eventMode))),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${r(i.eventCategory)}`},i.eventCategory)),a.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3"},a.createElement("div",{className:"bg-blue-50 rounded-lg p-3"},a.createElement("p",{className:"text-xs text-gray-800 font-medium mb-1"},"Total Revenue"),a.createElement("p",{className:"text-lg font-bold text-blue-900"},Cs(i.totalRevenue))),a.createElement("div",{className:"bg-green-50 rounded-lg p-3"},a.createElement("p",{className:"text-xs text-green-600 font-medium mb-1"},"Total Tickets"),a.createElement("p",{className:"text-lg font-bold text-green-900"},$t(i.totalTickets))),a.createElement("div",{className:"bg-purple-50 rounded-lg p-3"},a.createElement("p",{className:"text-xs text-purple-600 font-medium mb-1"},"Total Orders"),a.createElement("p",{className:"text-lg font-bold text-purple-900"},$t(i.totalOrders))),a.createElement("div",{className:"bg-orange-50 rounded-lg p-3"},a.createElement("p",{className:"text-xs text-orange-600 font-medium mb-1"},"Avg Order Value"),a.createElement("p",{className:"text-lg font-bold text-orange-900"},Cs(i.totalOrders>0?i.totalRevenue/i.totalOrders:0)))),a.createElement("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t border-gray-100"},a.createElement("div",null,a.createElement("p",{className:"text-xs text-gray-600 font-medium mb-2 flex items-center gap-1"},a.createElement(Zv,{className:"text-gray-800"}),"Online Sales"),a.createElement("div",{className:"space-y-1 text-sm"},a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Tickets:"),a.createElement("span",{className:"font-semibold text-gray-900"},$t(i.onlineTickets))),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Orders:"),a.createElement("span",{className:"font-semibold text-gray-900"},$t(i.onlineOrders))),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Revenue:"),a.createElement("span",{className:"font-semibold text-gray-800"},Cs(i.onlineRevenue))))),a.createElement("div",null,a.createElement("p",{className:"text-xs text-gray-600 font-medium mb-2 flex items-center gap-1"},a.createElement(Qv,{className:"text-red-600"}),"Offline Sales"),a.createElement("div",{className:"space-y-1 text-sm"},a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Tickets:"),a.createElement("span",{className:"font-semibold text-gray-900"},$t(i.offlineTickets))),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Orders:"),a.createElement("span",{className:"font-semibold text-gray-900"},$t(i.offlineOrders))),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Revenue:"),a.createElement("span",{className:"font-semibold text-green-600"},Cs(i.offlineRevenue))))))))))},Boe=({couponsData:e,vouchersData:t,loading:r})=>a.createElement("div",{className:"space-y-4"},a.createElement("h2",{className:"text-lg font-bold text-gray-900 tracking-tight"},"Coupons & Vouchers"),a.createElement("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3"},e&&a.createElement(a.Fragment,null,a.createElement(Br,{title:"Total Coupons",value:$t(e.total),subtitle:`${e.active} active`,icon:a.createElement(bz,{className:"w-6 h-6"}),iconColor:"text-orange-600",loading:r}),a.createElement(Br,{title:"Active Coupons",value:$t(e.active),subtitle:`${e.total-e.active} inactive`,icon:a.createElement(So,{className:"w-6 h-6"}),iconColor:"text-green-600",loading:r})),t&&a.createElement(a.Fragment,null,a.createElement(Br,{title:"Total Vouchers",value:$t(t.total),subtitle:`${t.active} active`,icon:a.createElement(iz,{className:"w-6 h-6"}),iconColor:"text-purple-600",loading:r}),a.createElement(Br,{title:"Voucher Usage",value:$t(t.totalUsage),subtitle:`${$t(t.totalClaimedPhones)} phones`,icon:a.createElement(So,{className:"w-6 h-6"}),iconColor:"text-gray-800",loading:r}))));function Foe(){const[e,t]=N.useState("lifetime"),[r,n]=N.useState(null),[i,o]=N.useState(!0),[d,g]=N.useState(null),h=async()=>{o(!0);try{const C=await vG();if(C.success)n(C.data),g(new Date),console.log("[Dashboard] Data loaded successfully");else{const _=C.message||"Failed to load dashboard statistics";ht.error(_),console.error("[Dashboard] Error:",C.error),C.error&&console.error("[Dashboard] Backend Error Details:",{status:C.status,message:C.message,error:C.error})}}catch(C){ht.error("An unexpected error occurred while loading dashboard"),console.error("[Dashboard] Exception:",C)}finally{o(!1)}};N.useEffect(()=>{h()},[]);const x=()=>{ht.info("Refreshing dashboard data..."),h()},y=()=>{ht.info("Export functionality coming soon!")},w=C=>C?C[e]||C.lifetime||C:null;return a.createElement(a.Fragment,null,a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 tracking-tight"},"Dashboard"),a.createElement("p",{className:"text-xs text-gray-600 mt-1"},"Comprehensive insights and analytics",d&&a.createElement("span",{className:"ml-2"}," Updated ",d.toLocaleTimeString()))),a.createElement("div",{className:"flex items-center gap-2"},a.createElement("button",{onClick:x,disabled:i,className:"flex items-center gap-1.5 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm text-sm",title:"Refresh dashboard data"},a.createElement(eD,{className:`w-4 h-4 ${i?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline font-medium"},"Refresh")),a.createElement("button",{onClick:y,className:"flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white rounded-lg hover:from-gray-900 hover:to-black transition-all shadow-sm text-sm",title:"Export dashboard data"},a.createElement(xz,{className:"w-4 h-4"}),a.createElement("span",{className:"hidden sm:inline font-medium"},"Export")))),r&&a.createElement(yG,{selected:e,onChange:t}),!i&&!r&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center"},a.createElement("div",{className:"max-w-md mx-auto"},a.createElement("div",{className:"text-red-500 text-6xl mb-4"},""),a.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-2"},"Failed to Load Dashboard"),a.createElement("p",{className:"text-gray-600 mb-6"},"There was an error loading the analytics data. This is likely a backend issue."),a.createElement("button",{onClick:x,className:"px-6 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Try Again"))),r?.payments&&a.createElement(Roe,{data:w(r.payments),loading:i}),(r?.users||r?.admins)&&a.createElement(AG,{usersData:r.users,adminsData:r.admins,loading:i}),r?.events&&a.createElement(Ioe,{data:r.events,enrollmentsData:w(r.enrollments),cashTicketsData:w(r.cashTickets),loading:i}),r?.communications&&a.createElement(wG,{data:w(r.communications),loading:i}),(r?.coupons||r?.vouchers)&&a.createElement(Boe,{couponsData:r.coupons,vouchersData:r.vouchers,loading:i}),r?.topPerformingEvents&&r.topPerformingEvents.length>0&&a.createElement(W8,{events:r.topPerformingEvents,loading:i}),r?.eventStats&&w(r.eventStats)?.length>0&&a.createElement("div",{className:"space-y-4"},a.createElement("h2",{className:"text-2xl font-bold text-gray-900 tracking-tight"},"Events Performance (",e.replace(/([A-Z])/g," $1").trim(),")"),a.createElement(W8,{events:w(r.eventStats),loading:i})),r?.adminPerformance&&r.adminPerformance.length>0&&a.createElement(Loe,{data:r.adminPerformance,loading:i}),a.createElement("div",{className:"text-center text-xs text-gray-500 py-6 border-t border-gray-200"},r?.generatedAt&&a.createElement("p",null,"Statistics generated at: ",new Date(r.generatedAt).toLocaleString()))))}const ta={BASE:"/web/events",DROPDOWN:"/web/events/dropdown",DELETED:"/web/events/deleted",UPDATE_EXPIRED:"/web/events/update-expired",FEATURED:"/web/events/featured"},Th=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([r,n])=>{n!=null&&n!==""&&t.append(r,n)}),t.toString()},Ss={getAll:async(e={})=>{const t=Th(e),r=t?`${ta.BASE}?${t}`:ta.BASE;console.log("[EventService] Fetching events with params:",e);const n=await Xe(Ye.get(r));return n.success?console.log("[EventService] Fetched events:",n.data.events?.length):console.error("[EventService] Failed to fetch events:",n.message),n},getById:async e=>{console.log("[EventService] Fetching event:",e);const t=await Xe(Ye.get(`${ta.BASE}/${e}`));return t.success?console.log("[EventService] Fetched event:",t.data.event?.name):console.error("[EventService] Failed to fetch event:",t.message),t},create:async e=>{console.log("[EventService] Creating event:",e.name);const t=await Xe(Ye.post(ta.BASE,e));return t.success?console.log("[EventService] Created event:",t.data.event?._id):console.error("[EventService] Failed to create event:",t.message),t},update:async(e,t)=>{console.log("[EventService] Updating event:",e);const r=await Xe(Ye.put(`${ta.BASE}/${e}`,t));return r.success?console.log("[EventService] Updated event:",r.data.event?.name):console.error("[EventService] Failed to update event:",r.message),r},delete:async e=>{console.log("[EventService] Deleting event:",e);const t=await Xe(Ye.delete(`${ta.BASE}/${e}`));return t.success?console.log("[EventService] Deleted event successfully"):console.error("[EventService] Failed to delete event:",t.message),t},restore:async e=>{console.log("[EventService] Restoring event:",e);const t=await Xe(Ye.post(`${ta.BASE}/${e}/restore`));return t.success?console.log("[EventService] Restored event successfully"):console.error("[EventService] Failed to restore event:",t.message),t},permanentDelete:async e=>{console.log("[EventService] Permanently deleting event:",e);const t=await Xe(Ye.delete(`${ta.BASE}/${e}/permanent`));return t.success?console.log("[EventService] Permanently deleted event successfully"):console.error("[EventService] Failed to permanently delete event:",t.message),t},getDeleted:async(e={})=>{const t=Th(e),r=t?`${ta.DELETED}?${t}`:ta.DELETED;console.log("[EventService] Fetching deleted events");const n=await Xe(Ye.get(r));return n.success?console.log("[EventService] Fetched deleted events:",n.data.events?.length):console.error("[EventService] Failed to fetch deleted events:",n.message),n},getDropdownEvents:async(e={})=>{const t=Th(e),r=t?`${ta.DROPDOWN}?${t}`:ta.DROPDOWN;console.log("[EventService] Fetching dropdown events with params:",e);const n=await Xe(Ye.get(r));return n.success?console.log("[EventService] Fetched events:",n.data.events?.length):console.error("[EventService] Failed to fetch events:",n.message),n},getTicketStats:async e=>{console.log("[EventService] Fetching ticket stats for event:",e);const t=await Xe(Ye.get(`${ta.BASE}/${e}/ticket-stats`));return t.success?console.log("[EventService] Fetched ticket stats"):console.error("[EventService] Failed to fetch ticket stats:",t.message),t},updateExpired:async()=>{console.log("[EventService] Updating expired events");const e=await Xe(Ye.post(ta.UPDATE_EXPIRED));return e.success?console.log("[EventService] Updated expired events:",e.data.updatedCount):console.error("[EventService] Failed to update expired events:",e.message),e},getFeaturedEvents:async(e={})=>{const t=Th(e),r=t?`${ta.FEATURED}?${t}`:ta.FEATURED;console.log("[EventService] Fetching featured events");const n=await Xe(Ye.get(r));return n.success?console.log("[EventService] Fetched featured events:",n.data.events?.length):console.error("[EventService] Failed to fetch featured events:",n.message),n}},oI=["TECHNOLOGY","EDUCATION","MEDICAL","COMEDY","ENTERTAINMENT","BUSINESS","SPORTS","ARTS","MUSIC","FOOD","LIFESTYLE","OTHER"],cI=["ONLINE","OFFLINE","HYBRID"],Uoe=[{value:"createdAt",label:"Created Date"},{value:"name",label:"Name"},{value:"startDate",label:"Start Date"},{value:"endDate",label:"End Date"},{value:"price",label:"Price"}],K8={search:"",category:"",mode:"",city:"",isLive:"",featured:"",minPrice:"",maxPrice:"",startDateFrom:"",startDateTo:"",sortBy:"createdAt",sortOrder:"desc"};function joe(e={}){const[t,r]=N.useState([]),[n,i]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10,hasNextPage:!1,hasPrevPage:!1}),[o,d]=N.useState({...K8,...e}),[g,h]=N.useState(!1),[x,y]=N.useState(null),[w,C]=N.useState([]),[_,D]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[k,M]=N.useState(!1),R=N.useRef(null),F=N.useCallback(async(we=n.currentPage)=>{h(!0),y(null);try{const te={page:we,limit:n.limit,sortBy:o.sortBy,sortOrder:o.sortOrder,...o.search&&{search:o.search},...o.category&&{category:o.category},...o.mode&&{mode:o.mode},...o.city&&{city:o.city},...o.isLive!==""&&{isLive:o.isLive},...o.featured!==""&&{featured:o.featured},...o.minPrice&&{minPrice:o.minPrice},...o.maxPrice&&{maxPrice:o.maxPrice},...o.startDateFrom&&{startDateFrom:o.startDateFrom},...o.startDateTo&&{startDateTo:o.startDateTo}},K=await Ss.getAll(te);K.success?(r(K.data.events||[]),i(K.data.pagination||n)):(y(K.message),r([]))}catch{y("Failed to fetch events"),r([])}finally{h(!1)}},[o,n.limit,n.currentPage]),I=N.useCallback(async(we=_.currentPage)=>{h(!0),y(null);try{const te=await Ss.getDeleted({page:we,limit:_.limit});te.success?(C(te.data.events||[]),D(K=>({...K,...te.data.pagination}))):(y(te.message),C([]))}catch{y("Failed to fetch deleted events"),C([])}finally{h(!1)}},[_.currentPage,_.limit]),G=N.useCallback(async we=>{try{const te=await Ss.getById(we);return te.success?{success:!0,data:te.data.event}:{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to fetch event details"}}},[]),U=N.useCallback(async we=>{h(!0),y(null);try{const te=await Ss.create(we);return te.success?(await F(1),{success:!0,data:te.data}):{success:!1,error:te.message,validationErrors:te.data?.errors}}catch{return{success:!1,error:"Failed to create event"}}finally{h(!1)}},[F]),z=N.useCallback(async(we,te)=>{h(!0),y(null);try{const K=await Ss.update(we,te);return K.success?(r(ee=>ee.map(fe=>fe._id===we?{...fe,...K.data.event}:fe)),{success:!0,data:K.data}):{success:!1,error:K.message,validationErrors:K.data?.errors}}catch{return{success:!1,error:"Failed to update event"}}finally{h(!1)}},[]),L=N.useCallback(async we=>{h(!0),y(null);try{const te=await Ss.delete(we);return te.success?(r(K=>K.filter(ee=>ee._id!==we)),i(K=>({...K,totalCount:K.totalCount-1,totalPages:Math.ceil((K.totalCount-1)/K.limit)})),{success:!0}):{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to delete event"}}finally{h(!1)}},[]),H=N.useCallback(async we=>{h(!0),y(null);try{const te=await Ss.restore(we);return te.success?(C(K=>K.filter(ee=>ee._id!==we)),D(K=>({...K,totalCount:K.totalCount-1,totalPages:Math.ceil((K.totalCount-1)/K.limit)})),{success:!0}):{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to restore event"}}finally{h(!1)}},[]),V=N.useCallback(async we=>{h(!0),y(null);try{const te=await Ss.permanentDelete(we);return te.success?(C(K=>K.filter(ee=>ee._id!==we)),D(K=>({...K,totalCount:K.totalCount-1,totalPages:Math.ceil((K.totalCount-1)/K.limit)})),{success:!0}):{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to permanently delete event"}}finally{h(!1)}},[]),Q=N.useCallback(async we=>{try{const te=await Ss.getTicketStats(we);return te.success?{success:!0,data:te.data.stats}:{success:!1,error:te.message}}catch{return{success:!1,error:"Failed to fetch ticket statistics"}}},[]),Y=N.useCallback(async()=>{h(!0),y(null);try{const we=await Ss.updateExpired();return we.success?(await F(n.currentPage),{success:!0,updatedCount:we.data.updatedCount}):{success:!1,error:we.message}}catch{return{success:!1,error:"Failed to update expired events"}}finally{h(!1)}},[F,n.currentPage]),X=N.useCallback(we=>{d(te=>({...te,...we}))},[]),he=N.useCallback(we=>{R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{d(te=>({...te,search:we}))},300)},[]),xe=N.useCallback(()=>{d({...K8,...e})},[e]),ae=N.useCallback(we=>{k?I(we):F(we)},[k,F,I]),ne=N.useCallback(we=>{i(te=>({...te,limit:we})),D(te=>({...te,limit:we}))},[]),se=N.useCallback(()=>{M(we=>!we)},[]),Te=N.useCallback(()=>{y(null)},[]);return N.useEffect(()=>{k||F(1)},[o,k]),N.useEffect(()=>{k&&I(1)},[k]),N.useEffect(()=>()=>{R.current&&clearTimeout(R.current)},[]),{events:k?w:t,pagination:k?_:n,filters:o,isLoading:g,error:x,showDeleted:k,fetchEvents:F,fetchDeletedEvents:I,getEventById:G,createEvent:U,updateEvent:z,deleteEvent:L,restoreEvent:H,permanentDeleteEvent:V,getTicketStats:Q,updateExpiredEvents:Y,updateFilters:X,updateSearch:he,resetFilters:xe,changePage:ae,changeLimit:ne,toggleShowDeleted:se,clearError:Te}}function hn({isOpen:e,onClose:t,title:r,children:n,size:i="md",showCloseButton:o=!0,closeOnOverlayClick:d=!0}){const g={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl"},h=N.useCallback(y=>{y.key==="Escape"&&t()},[t]);if(N.useEffect(()=>(e&&(document.addEventListener("keydown",h),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",h),document.body.style.overflow="unset"}),[e,h]),!e)return null;const x=y=>{y.target===y.currentTarget&&d&&t()};return a.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:x},a.createElement("div",{className:`w-full ${g[i]} bg-white rounded-xl shadow-xl transform transition-all`,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},a.createElement("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200"},a.createElement("h2",{id:"modal-title",className:"text-lg font-semibold text-gray-900"},r),o&&a.createElement("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal"},a.createElement(zn,{className:"h-5 w-5"}))),a.createElement("div",{className:"px-6 py-4 max-h-[calc(100vh-200px)] overflow-y-auto"},n)))}const zoe={UPLOAD:"/web/assets/upload",DELETE:"/web/assets",DOWNLOAD_URL:"/app/assets/download-url"},uI=async(e,t={})=>{const{folder:r="assets",onProgress:n}=t,i=new FormData;(Array.isArray(e)?e:[e]).forEach(d=>{i.append("files",d)}),r&&i.append("folder",r);try{const d=await Ye.post(zoe.UPLOAD,i,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:g=>{if(n&&g.total){const h=Math.round(g.loaded*100/g.total);n(h)}}});return{success:!0,data:d.data.data||d.data,message:d.data.message||"Upload successful",error:null}}catch(d){return console.error("[AssetService] Upload error:",d),{success:!1,data:null,message:d.response?.data?.message||"Upload failed",error:d.response?.data?.error||d.message}}},Voe=async(e,t={})=>{const r=await uI(e,t);if(r.success&&r.data?.uploaded?.length>0){const n=r.data.uploaded[0];return{success:!0,url:n.publicUrl,downloadUrl:n.downloadUrl,data:n,error:null}}return{success:!1,url:null,downloadUrl:null,data:null,error:r.error||"Upload failed",message:r.message}},Hoe=async(e,t={})=>{const r=await uI(e,t);return r.success&&r.data?.uploaded?.length>0?{success:!0,urls:r.data.uploaded.map(n=>n.publicUrl),downloadUrls:r.data.uploaded.map(n=>n.downloadUrl),data:r.data.uploaded,totalUploaded:r.data.totalUploaded,totalFailed:r.data.totalFailed,error:null}:{success:!1,urls:[],downloadUrls:[],data:[],totalUploaded:0,totalFailed:e.length,error:r.error||"Upload failed",message:r.message}},dI=(e,t={})=>{const{allowedTypes:r=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"],maxSize:n=10*1024*1024}=t;return e?r.length>0&&!r.includes(e.type)?{valid:!1,error:`Invalid file type. Allowed: ${r.map(o=>o.split("/")[1]).join(", ")}`}:e.size>n?{valid:!1,error:`File too large. Maximum size: ${(n/1048576).toFixed(1)}MB`}:{valid:!0,error:null}:{valid:!1,error:"No file provided"}},qoe=(e,t={})=>{const r=[],n=[];return e.forEach((i,o)=>{const d=dI(i,t);d.valid?n.push(i):r.push(`${i.name}: ${d.error}`)}),{valid:r.length===0,errors:r,validFiles:n}},$oe=e=>{if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(2))+" "+r[n]};function Cc({onUpload:e,value:t="",values:r=[],multiple:n=!1,accept:i,maxSize:o=10*1024*1024,folder:d="assets",disabled:g=!1,error:h,label:x,required:y=!1,placeholder:w="Drop files here or click to upload",onRemove:C,showUrlInput:_=!0,type:D="image"}){const[k,M]=N.useState(!1),[R,F]=N.useState(!1),[I,G]=N.useState(0),[U,z]=N.useState(null),[L,H]=N.useState(!1),[V,Q]=N.useState(""),Y=N.useRef(null),X=()=>{if(i)return i;switch(D){case"video":return"video/*";case"any":return"image/*,video/*";default:return"image/*"}},he=()=>{switch(D){case"video":return["video/mp4","video/webm","video/ogg","video/quicktime"];case"any":return["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","video/mp4","video/webm","video/ogg","video/quicktime"];default:return["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"]}},xe=N.useCallback(ie=>{ie.preventDefault(),!g&&!R&&M(!0)},[g,R]),ae=N.useCallback(ie=>{ie.preventDefault(),M(!1)},[]),ne=N.useCallback(ie=>{if(ie.preventDefault(),M(!1),g||R)return;const oe=Array.from(ie.dataTransfer.files);oe.length>0&&Te(n?oe:[oe[0]])},[g,R,n]),se=ie=>{const oe=Array.from(ie.target.files);oe.length>0&&Te(n?oe:[oe[0]]),ie.target.value=""},Te=async ie=>{z(null),G(0);const oe=he();if(n){const He=qoe(ie,{allowedTypes:oe,maxSize:o});if(!He.valid){z(He.errors.join(", "));return}await te(He.validFiles)}else{const He=dI(ie[0],{allowedTypes:oe,maxSize:o});if(!He.valid){z(He.error);return}await we(ie[0])}},we=async ie=>{F(!0),G(0);try{const oe=await Voe(ie,{folder:d,onProgress:G});oe.success&&oe.url?(e(oe.url),G(100)):z(oe.message||oe.error||"Upload failed")}catch(oe){z(oe.message||"Upload failed")}finally{F(!1)}},te=async ie=>{F(!0),G(0);try{const oe=await Hoe(ie,{folder:d,onProgress:G});oe.success&&oe.urls.length>0?(e([...r,...oe.urls]),G(100)):z(oe.message||oe.error||"Upload failed")}catch(oe){z(oe.message||"Upload failed")}finally{F(!1)}},K=()=>{if(V.trim()){if(!/^https?:\/\/.+/.test(V.trim())){z("Invalid URL format");return}e(n?[...r,V.trim()]:V.trim()),Q(""),H(!1),z(null)}},ee=ie=>{if(C)C(ie);else if(n){const oe=r.filter((He,ve)=>ve!==ie);e(oe)}},fe=()=>{e("")},ce=ie=>/\.(mp4|webm|ogg|mov)(\?.*)?$/i.test(ie)||D==="video",Se=(ie,oe=null)=>{const He=ce(ie);return a.createElement("div",{key:oe!==null?oe:"single",className:"relative group flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200"},He?a.createElement("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0"},a.createElement(_U,{className:"h-6 w-6 text-gray-500"})):a.createElement("img",{src:ie,alt:`Preview ${oe!==null?oe+1:""}`,className:"w-16 h-16 object-cover rounded flex-shrink-0",onError:ve=>{ve.target.style.display="none",ve.target.nextSibling?.classList.remove("hidden")}}),a.createElement("div",{className:"hidden w-16 h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0"},a.createElement(Tc,{className:"h-6 w-6 text-gray-400"})),a.createElement("span",{className:"flex-1 text-sm text-gray-600 truncate"},ie),!g&&a.createElement("button",{type:"button",onClick:()=>oe!==null?ee(oe):fe(),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors"},a.createElement(zn,{className:"h-4 w-4"})))};return n&&r.length>0,a.createElement("div",{className:"space-y-2"},x&&a.createElement("label",{className:"block text-sm font-medium text-gray-700"},x,y&&a.createElement("span",{className:"text-red-500 ml-1"},"*")),!n&&t&&Se(t),n&&r.length>0&&a.createElement("div",{className:"space-y-2 mb-3"},r.map((ie,oe)=>Se(ie,oe))),(n||!t)&&a.createElement("div",{onDragOver:xe,onDragLeave:ae,onDrop:ne,onClick:()=>!g&&!R&&Y.current?.click(),className:`
            relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer
            transition-all duration-200
            ${k?"border-gray-800 bg-gray-50":"border-gray-300 hover:border-gray-400"}
            ${g||R?"opacity-50 cursor-not-allowed":""}
            ${h||U?"border-red-300 bg-red-50/50":""}
          `},a.createElement("input",{ref:Y,type:"file",accept:X(),multiple:n,onChange:se,disabled:g||R,className:"hidden"}),R?a.createElement("div",{className:"space-y-3"},a.createElement(Nt,{className:"h-8 w-8 mx-auto text-gray-400 animate-spin"}),a.createElement("div",{className:"space-y-1"},a.createElement("p",{className:"text-sm text-gray-600"},"Uploading..."),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2 max-w-xs mx-auto"},a.createElement("div",{className:"bg-gray-800 h-2 rounded-full transition-all duration-300",style:{width:`${I}%`}})),a.createElement("p",{className:"text-xs text-gray-500"},I,"%"))):a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"mx-auto w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center"},a.createElement(Fj,{className:"h-5 w-5 text-gray-500"})),a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-600"},w),a.createElement("p",{className:"text-xs text-gray-400 mt-1"},D==="video"?"MP4, WebM, OGG":D==="any"?"Images or videos":"PNG, JPG, GIF, WebP, SVG"," ","up to ",$oe(o))))),(h||U)&&a.createElement("div",{className:"flex items-center gap-2 text-sm text-red-500"},a.createElement(Vr,{className:"h-4 w-4 flex-shrink-0"}),a.createElement("span",null,h||U)),_&&!g&&a.createElement("div",{className:"pt-2"},L?a.createElement("div",{className:"flex gap-2"},a.createElement("input",{type:"url",value:V,onChange:ie=>Q(ie.target.value),placeholder:"Enter URL manually",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none",onKeyDown:ie=>{ie.key==="Enter"&&(ie.preventDefault(),K()),ie.key==="Escape"&&(H(!1),Q(""))}}),a.createElement("button",{type:"button",onClick:K,disabled:!V.trim(),className:"px-3 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 text-sm"},a.createElement(Js,{className:"h-4 w-4"})),a.createElement("button",{type:"button",onClick:()=>{H(!1),Q("")},className:"px-3 py-2 border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors text-sm"},a.createElement(zn,{className:"h-4 w-4"}))):a.createElement("button",{type:"button",onClick:()=>H(!0),className:"text-sm text-gray-500 hover:text-gray-700 transition-colors"},"Or enter URL manually")))}const Z8=(e=null)=>({name:e?.name||"",description:e?.description||"",imageUrls:e?.imageUrls||[],thumbnail:{imageUrl:e?.thumbnail?.imageUrl||"",videoUrl:e?.thumbnail?.videoUrl||""},mode:e?.mode||"",city:e?.city||"",gmapLink:e?.gmapLink||"",category:e?.category||"",startDate:e?.startDate?Q8(e.startDate):"",endDate:e?.endDate?Q8(e.endDate):"",price:e?.price??"",compareAtPrice:e?.compareAtPrice??"",availableSeats:e?.availableSeats??"",usePricingTiers:e?.pricingTiers?.length>0,pricingTiers:e?.pricingTiers||[],isLive:e?.isLive??!1,featured:e?.featured??!1});function Q8(e){return e?new Date(e).toISOString().slice(0,16):""}const Goe=e=>{const t={};if(e.name.trim()?e.name.length>200&&(t.name="Name must be 200 characters or less"):t.name="Name is required",e.description.trim()?e.description.length>5e3&&(t.description="Description must be 5000 characters or less"):t.description="Description is required",e.mode||(t.mode="Mode is required"),(e.mode==="OFFLINE"||e.mode==="HYBRID")&&!e.city.trim()&&(t.city="City is required for offline or hybrid events"),e.gmapLink&&e.gmapLink.trim()){const r=/^https?:\/\/(www\.)?(google\.[a-z.]+\/maps|maps\.google\.[a-z.]+|goo\.gl\/maps|maps\.app\.goo\.gl)\/.+/i;/^https?:\/\/.+/.test(e.gmapLink.trim())?r.test(e.gmapLink.trim())||(t.gmapLink="Please provide a valid Google Maps link"):t.gmapLink="Please provide a valid URL"}if(e.category||(t.category="Category is required"),e.startDate?new Date(e.startDate)<=new Date&&(t.startDate="Start date must be in the future"):t.startDate="Start date is required",!e.endDate)t.endDate="End date is required";else if(e.startDate){const r=new Date(e.startDate);new Date(e.endDate)<=r&&(t.endDate="End date must be after start date")}if(!e.usePricingTiers)e.price===""||e.price===null||e.price===void 0?t.price="Price is required":(isNaN(e.price)||Number(e.price)<0)&&(t.price="Price must be a valid positive number"),e.compareAtPrice!==""&&e.compareAtPrice!==null&&e.compareAtPrice!==void 0&&(isNaN(e.compareAtPrice)||Number(e.compareAtPrice)<0?t.compareAtPrice="Compare at price must be a valid positive number":Number(e.compareAtPrice)<Number(e.price)&&(t.compareAtPrice="Compare at price must be greater than or equal to price"));else if(e.pricingTiers.length===0)t.pricingTiers="At least one pricing tier is required";else{const r=[];e.pricingTiers.forEach((n,i)=>{const o={};n.name?.trim()||(o.name="Tier name is required"),n.price===""||n.price===null||n.price===void 0?o.price="Tier price is required":(isNaN(n.price)||Number(n.price)<0)&&(o.price="Invalid price"),Object.keys(o).length>0&&(r[i]=o)}),r.some(n=>n)&&(t.tierErrors=r)}if(e.availableSeats!==""&&e.availableSeats!==null&&e.availableSeats!==void 0&&(isNaN(e.availableSeats)||Number(e.availableSeats)<0)&&(t.availableSeats="Available seats must be a valid positive number"),e.imageUrls.length>0){const r=/^https?:\/\/.+/;e.imageUrls.forEach((n,i)=>{n&&!r.test(n)&&(t.imageUrls||(t.imageUrls={}),t.imageUrls[i]="Invalid URL format")})}return e.thumbnail.imageUrl&&!/^https?:\/\/.+/.test(e.thumbnail.imageUrl)&&(t.thumbnailImage="Invalid thumbnail image URL"),e.thumbnail.videoUrl&&!/^https?:\/\/.+/.test(e.thumbnail.videoUrl)&&(t.thumbnailVideo="Invalid thumbnail video URL"),{isValid:Object.keys(t).length===0,errors:t}},J8=()=>({name:"",price:"",compareAtPrice:"",shortDescription:"",notes:"",ticketQuantity:1});function eO({isOpen:e,onClose:t,onSubmit:r,event:n=null,isLoading:i=!1,serverError:o=null,validationErrors:d=null}){const g=!!n,[h,x]=N.useState(Z8(n)),[y,w]=N.useState({});N.useEffect(()=>{e&&(x(Z8(n)),w({}))},[e,n]),N.useEffect(()=>{if(d&&Array.isArray(d)){const U={};d.forEach(z=>{z.field&&(U[z.field]=z.message)}),w(z=>({...z,...U}))}},[d]);const C=U=>{const{name:z,value:L,type:H}=U.target,V=H==="number"?L===""?"":Number(L):L;x(Q=>({...Q,[z]:V})),y[z]&&w(Q=>({...Q,[z]:null}))},_=(U,z)=>{x(H=>({...H,thumbnail:{...H.thumbnail,[U]:z}}));const L=U==="imageUrl"?"thumbnailImage":"thumbnailVideo";y[L]&&w(H=>({...H,[L]:null}))},D=U=>{x(z=>({...z,imageUrls:z.imageUrls.filter((L,H)=>H!==U)}))},k=()=>{x(U=>({...U,usePricingTiers:!U.usePricingTiers,pricingTiers:U.usePricingTiers?[]:[J8()],price:U.usePricingTiers?"":U.price,compareAtPrice:U.usePricingTiers?"":U.compareAtPrice}))},M=()=>{x(U=>({...U,pricingTiers:[...U.pricingTiers,J8()]}))},R=U=>{x(z=>({...z,pricingTiers:z.pricingTiers.filter((L,H)=>H!==U)}))},F=(U,z,L)=>{x(H=>({...H,pricingTiers:H.pricingTiers.map((V,Q)=>Q===U?{...V,[z]:z==="price"||z==="compareAtPrice"||z==="ticketQuantity"?L===""?"":Number(L):L}:V)})),y.tierErrors?.[U]?.[z]&&w(H=>{const V=[...H.tierErrors||[]];return V[U]&&delete V[U][z],{...H,tierErrors:V}})},I=async U=>{U.preventDefault();const z=Goe(h);if(!z.isValid){w(z.errors);return}const L={name:h.name.trim(),description:h.description.trim(),mode:h.mode,category:h.category,startDate:new Date(h.startDate).toISOString(),endDate:new Date(h.endDate).toISOString()};h.city.trim()&&(L.city=h.city.trim()),h.gmapLink.trim()&&(L.gmapLink=h.gmapLink.trim()),h.imageUrls.length>0&&(L.imageUrls=h.imageUrls.filter(H=>H.trim())),(h.thumbnail.imageUrl||h.thumbnail.videoUrl)&&(L.thumbnail={},h.thumbnail.imageUrl&&(L.thumbnail.imageUrl=h.thumbnail.imageUrl.trim()),h.thumbnail.videoUrl&&(L.thumbnail.videoUrl=h.thumbnail.videoUrl.trim())),h.usePricingTiers&&h.pricingTiers.length>0?L.pricingTiers=h.pricingTiers.map(H=>({name:H.name.trim(),price:Number(H.price),...H.compareAtPrice!==""&&{compareAtPrice:Number(H.compareAtPrice)},...H.shortDescription&&{shortDescription:H.shortDescription.trim()},...H.notes&&{notes:H.notes.trim()},ticketQuantity:Number(H.ticketQuantity)||1})):(L.price=Number(h.price),h.compareAtPrice!==""&&(L.compareAtPrice=Number(h.compareAtPrice))),h.availableSeats!==""&&(L.availableSeats=Number(h.availableSeats)),L.isLive=h.isLive,L.featured=h.featured,await r(L)},G=()=>{i||t()};return a.createElement(hn,{isOpen:e,onClose:G,title:g?"Edit Event":"Create Event",size:"2xl",closeOnOverlayClick:!i},a.createElement("form",{onSubmit:I,className:"space-y-6"},o&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},o),a.createElement("div",{className:"space-y-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Basic Information"),a.createElement("div",null,a.createElement("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1"},"Event Name ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",id:"name",name:"name",value:h.name,onChange:C,disabled:i,maxLength:200,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter event name"}),y.name&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.name)),a.createElement("div",null,a.createElement("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1"},"Description ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("textarea",{id:"description",name:"description",value:h.description,onChange:C,disabled:i,rows:4,maxLength:5e3,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none ${y.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter event description"}),a.createElement("div",{className:"flex justify-between mt-1"},y.description?a.createElement("p",{className:"text-sm text-red-500"},y.description):a.createElement("span",null),a.createElement("span",{className:"text-xs text-gray-500"},h.description.length,"/5000"))),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{htmlFor:"mode",className:"block text-sm font-medium text-gray-700 mb-1"},"Mode ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{id:"mode",name:"mode",value:h.mode,onChange:C,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.mode?"border-red-500":"border-gray-300"}`},a.createElement("option",{value:""},"Select mode"),cI.map(U=>a.createElement("option",{key:U,value:U},U))),y.mode&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.mode)),a.createElement("div",null,a.createElement("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1"},"Category ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{id:"category",name:"category",value:h.category,onChange:C,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.category?"border-red-500":"border-gray-300"}`},a.createElement("option",{value:""},"Select category"),oI.map(U=>a.createElement("option",{key:U,value:U},U.charAt(0)+U.slice(1).toLowerCase()))),y.category&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.category))),(h.mode==="OFFLINE"||h.mode==="HYBRID")&&a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1"},"City ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",id:"city",name:"city",value:h.city,onChange:C,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.city?"border-red-500":"border-gray-300"}`,placeholder:"Enter city"}),y.city&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.city)),a.createElement("div",null,a.createElement("label",{htmlFor:"gmapLink",className:"block text-sm font-medium text-gray-700 mb-1"},a.createElement("span",{className:"flex items-center gap-1"},a.createElement(p2,{className:"h-4 w-4"}),"Google Maps Link")),a.createElement("input",{type:"url",id:"gmapLink",name:"gmapLink",value:h.gmapLink,onChange:C,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.gmapLink?"border-red-500":"border-gray-300"}`,placeholder:"https://maps.app.goo.gl/..."}),y.gmapLink&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.gmapLink)))),a.createElement("div",{className:"space-y-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Date and Time"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1"},"Start Date & Time ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"datetime-local",id:"startDate",name:"startDate",value:h.startDate,onChange:C,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.startDate?"border-red-500":"border-gray-300"}`}),y.startDate&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.startDate)),a.createElement("div",null,a.createElement("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1"},"End Date & Time ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"datetime-local",id:"endDate",name:"endDate",value:h.endDate,onChange:C,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.endDate?"border-red-500":"border-gray-300"}`}),y.endDate&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.endDate)))),a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"flex items-center justify-between border-b pb-2"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Pricing"),a.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:h.usePricingTiers,onChange:k,disabled:i,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),a.createElement("span",{className:"text-sm text-gray-600"},"Use pricing tiers"))),h.usePricingTiers?a.createElement("div",{className:"space-y-4"},y.pricingTiers&&a.createElement("p",{className:"text-sm text-red-500"},y.pricingTiers),h.pricingTiers.map((U,z)=>a.createElement("div",{key:z,className:"p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-3"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"font-medium text-gray-700"},"Tier ",z+1),h.pricingTiers.length>1&&a.createElement("button",{type:"button",onClick:()=>R(z),disabled:i,className:"p-1 text-red-500 hover:bg-red-50 rounded transition-colors"},a.createElement(gr,{className:"h-4 w-4"}))),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Tier Name ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:U.name,onChange:L=>F(z,"name",L.target.value),disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.tierErrors?.[z]?.name?"border-red-500":"border-gray-300"}`,placeholder:"e.g., General Admission"}),y.tierErrors?.[z]?.name&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.tierErrors[z].name)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Price ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",value:U.price,onChange:L=>F(z,"price",L.target.value),disabled:i,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.tierErrors?.[z]?.price?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),y.tierErrors?.[z]?.price&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.tierErrors[z].price)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Compare at Price"),a.createElement("input",{type:"number",value:U.compareAtPrice,onChange:L=>F(z,"compareAtPrice",L.target.value),disabled:i,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"0.00"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Ticket Quantity"),a.createElement("input",{type:"number",value:U.ticketQuantity,onChange:L=>F(z,"ticketQuantity",L.target.value),disabled:i,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"1"})),a.createElement("div",{className:"md:col-span-2"},a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Short Description"),a.createElement("input",{type:"text",value:U.shortDescription,onChange:L=>F(z,"shortDescription",L.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:"Brief description of this tier"})),a.createElement("div",{className:"md:col-span-2"},a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Notes"),a.createElement("textarea",{value:U.notes,onChange:L=>F(z,"notes",L.target.value),disabled:i,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 resize-none",placeholder:"Additional notes"}))))),a.createElement("button",{type:"button",onClick:M,disabled:i,className:"flex items-center gap-2 px-4 py-2 text-gray-800 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50"},a.createElement(dn,{className:"h-4 w-4"}),"Add Pricing Tier"),a.createElement("div",{className:"w-full md:w-1/3"},a.createElement("label",{htmlFor:"availableSeats",className:"block text-sm font-medium text-gray-700 mb-1"},"Total Available Seats"),a.createElement("input",{type:"number",id:"availableSeats",name:"availableSeats",value:h.availableSeats,onChange:C,disabled:i,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.availableSeats?"border-red-500":"border-gray-300"}`,placeholder:"Unlimited"}),y.availableSeats&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.availableSeats))):a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},a.createElement("div",null,a.createElement("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1"},"Price ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",id:"price",name:"price",value:h.price,onChange:C,disabled:i,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.price?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),y.price&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.price)),a.createElement("div",null,a.createElement("label",{htmlFor:"compareAtPrice",className:"block text-sm font-medium text-gray-700 mb-1"},"Compare at Price"),a.createElement("input",{type:"number",id:"compareAtPrice",name:"compareAtPrice",value:h.compareAtPrice,onChange:C,disabled:i,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.compareAtPrice?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),y.compareAtPrice&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.compareAtPrice)),a.createElement("div",null,a.createElement("label",{htmlFor:"availableSeats",className:"block text-sm font-medium text-gray-700 mb-1"},"Available Seats"),a.createElement("input",{type:"number",id:"availableSeats",name:"availableSeats",value:h.availableSeats,onChange:C,disabled:i,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.availableSeats?"border-red-500":"border-gray-300"}`,placeholder:"Unlimited"}),y.availableSeats&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.availableSeats)))),a.createElement("div",{className:"space-y-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Media"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement(Cc,{label:"Thumbnail Image",value:h.thumbnail.imageUrl,onUpload:U=>_("imageUrl",U),disabled:i,error:y.thumbnailImage,type:"image",folder:"events/thumbnails",placeholder:"Drop image here or click to upload"}),a.createElement(Cc,{label:"Thumbnail Video",value:h.thumbnail.videoUrl,onUpload:U=>_("videoUrl",U),disabled:i,error:y.thumbnailVideo,type:"video",folder:"events/videos",placeholder:"Drop video here or click to upload"})),a.createElement(Cc,{label:"Image Gallery",values:h.imageUrls,onUpload:U=>x(z=>({...z,imageUrls:U})),onRemove:U=>D(U),multiple:!0,disabled:i,error:y.imageUrls?"Some image URLs are invalid":null,type:"image",folder:"events/gallery",placeholder:"Drop images here or click to upload"})),a.createElement("div",{className:"space-y-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2"},"Status"),a.createElement("div",{className:"flex flex-wrap gap-6"},a.createElement("label",{className:"flex items-center gap-3 cursor-pointer"},a.createElement("div",{className:"relative"},a.createElement("input",{type:"checkbox",checked:h.isLive,onChange:U=>x(z=>({...z,isLive:U.target.checked})),disabled:i,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-green-500 peer-disabled:opacity-50 transition-colors"}),a.createElement("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})),a.createElement("div",null,a.createElement("span",{className:"text-sm font-medium text-gray-900"},"Live"),a.createElement("p",{className:"text-xs text-gray-500"},"Event is visible to users"))),a.createElement("label",{className:"flex items-center gap-3 cursor-pointer"},a.createElement("div",{className:"relative"},a.createElement("input",{type:"checkbox",checked:h.featured,onChange:U=>x(z=>({...z,featured:U.target.checked})),disabled:i,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-purple-500 peer-disabled:opacity-50 transition-colors"}),a.createElement("div",{className:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow peer-checked:translate-x-5 transition-transform"})),a.createElement("div",null,a.createElement("span",{className:"text-sm font-medium text-gray-900"},"Featured"),a.createElement("p",{className:"text-xs text-gray-500"},"Highlight in featured sections"))))),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:G,disabled:i,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},i&&a.createElement(Nt,{className:"h-4 w-4 animate-spin"}),g?"Update Event":"Create Event"))))}function vf(e){return e?new Date(e).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"N/A"}function Oh(e){return e==null?"Free":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e)}function Yoe(e){const t={TECHNOLOGY:"bg-blue-100 text-gray-900",EDUCATION:"bg-indigo-100 text-indigo-700",MEDICAL:"bg-green-100 text-green-700",COMEDY:"bg-yellow-100 text-yellow-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",BUSINESS:"bg-gray-100 text-gray-700",SPORTS:"bg-orange-100 text-orange-700",ARTS:"bg-purple-100 text-purple-700",MUSIC:"bg-red-100 text-red-700",FOOD:"bg-amber-100 text-amber-700",LIFESTYLE:"bg-teal-100 text-teal-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function Xoe(e){return{ONLINE:"bg-green-100 text-green-700",OFFLINE:"bg-blue-100 text-gray-900",HYBRID:"bg-purple-100 text-purple-700"}[e]||"bg-gray-100 text-gray-700"}function Woe(e){return e==="ONLINE"||e==="HYBRID"?Av:p2}function Koe({isOpen:e,onClose:t,event:r,ticketStats:n,isLoadingStats:i=!1,onFetchStats:o}){const[d,g]=N.useState(0);if(N.useEffect(()=>{e&&r&&(g(0),o&&o(r._id))},[e,r,o]),!r)return null;const h=Woe(r.mode),x=r.pricingTiers&&r.pricingTiers.length>0;return a.createElement(hn,{isOpen:e,onClose:t,title:"Event Details",size:"2xl"},a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex items-start justify-between gap-4"},a.createElement("div",{className:"flex-1"},a.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-2"},r.name),a.createElement("div",{className:"flex flex-wrap items-center gap-2"},a.createElement("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Yoe(r.category)}`},r.category),a.createElement("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Xoe(r.mode)}`},r.mode),r.isLive?a.createElement("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700"},"Live"):a.createElement("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-600"},"Not Live"),r.featured&&a.createElement("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-700"},"Featured"),r.isDeleted&&a.createElement("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-700"},"Deleted")))),(r.thumbnail?.imageUrl||r.imageUrls?.length>0)&&a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"relative aspect-video bg-gray-100 rounded-lg overflow-hidden"},r.thumbnail?.imageUrl||r.imageUrls?.length>0?a.createElement("img",{src:r.imageUrls?.[d]||r.thumbnail?.imageUrl,alt:r.name,className:"w-full h-full object-cover",onError:y=>{y.target.src="https://via.placeholder.com/800x450?text=No+Image"}}):a.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400"},"No image available"),r.thumbnail?.videoUrl&&a.createElement("a",{href:r.thumbnail.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-3 right-3 flex items-center gap-2 px-3 py-2 bg-black/70 text-white rounded-lg hover:bg-black/80 transition-colors"},a.createElement(Y_,{className:"h-4 w-4"}),"Watch Video")),r.imageUrls&&r.imageUrls.length>1&&a.createElement("div",{className:"flex gap-2 overflow-x-auto pb-2"},r.imageUrls.map((y,w)=>a.createElement("button",{key:w,onClick:()=>g(w),className:`flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-colors ${d===w?"border-blue-500":"border-transparent"}`},a.createElement("img",{src:y,alt:`${r.name} ${w+1}`,className:"w-full h-full object-cover",onError:C=>{C.target.style.display="none"}}))))),a.createElement("div",null,a.createElement("h3",{className:"text-sm font-medium text-gray-500 mb-2"},"Description"),a.createElement("p",{className:"text-gray-700 whitespace-pre-wrap"},r.description)),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},a.createElement(Hr,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Date & Time")),a.createElement("div",{className:"space-y-1"},a.createElement("p",{className:"text-sm"},a.createElement("span",{className:"text-gray-500"},"Starts:")," ",a.createElement("span",{className:"text-gray-900 font-medium"},vf(r.startDate))),a.createElement("p",{className:"text-sm"},a.createElement("span",{className:"text-gray-500"},"Ends:")," ",a.createElement("span",{className:"text-gray-900 font-medium"},vf(r.endDate))))),a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},a.createElement(h,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Location")),a.createElement("p",{className:"text-gray-900 font-medium"},r.mode==="ONLINE"?"Online Event":r.city||"Location not specified"),a.createElement("p",{className:"text-sm text-gray-500 capitalize"},r.mode?.toLowerCase()," event"))),a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-3"},a.createElement(SU,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Pricing")),x?a.createElement("div",{className:"space-y-3"},r.pricingTiers.map((y,w)=>a.createElement("div",{key:w,className:"flex items-start justify-between p-3 bg-white rounded-lg border border-gray-200"},a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900"},y.name),y.shortDescription&&a.createElement("p",{className:"text-sm text-gray-500"},y.shortDescription),y.notes&&a.createElement("p",{className:"text-xs text-gray-400 mt-1"},y.notes),y.ticketQuantity>1&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Includes ",y.ticketQuantity," tickets")),a.createElement("div",{className:"text-right"},a.createElement("p",{className:"font-semibold text-gray-900"},Oh(y.price)),y.compareAtPrice&&a.createElement("p",{className:"text-sm text-gray-400 line-through"},Oh(y.compareAtPrice)))))):a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("p",{className:"text-2xl font-bold text-gray-900"},Oh(r.price)),r.compareAtPrice&&a.createElement("p",{className:"text-sm text-gray-400 line-through"},Oh(r.compareAtPrice))))),a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-3"},a.createElement(Ou,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Ticket Statistics")),i?a.createElement("div",{className:"flex items-center justify-center py-4"},a.createElement(Nt,{className:"h-5 w-5 animate-spin text-gray-400"})):n?a.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4"},a.createElement("div",null,a.createElement("p",{className:"text-2xl font-bold text-gray-900"},n.ticketsSold||0),a.createElement("p",{className:"text-sm text-gray-500"},"Tickets Sold")),a.createElement("div",null,a.createElement("p",{className:"text-2xl font-bold text-gray-900"},n.availableSeats??"Unlimited"),a.createElement("p",{className:"text-sm text-gray-500"},"Available Seats")),n.hasAvailableSeatsTracking&&n.availableSeats&&a.createElement("div",null,a.createElement("p",{className:"text-2xl font-bold text-gray-900"},Math.max(0,n.availableSeats-n.ticketsSold)),a.createElement("p",{className:"text-sm text-gray-500"},"Remaining"))):a.createElement("div",{className:"grid grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("p",{className:"text-2xl font-bold text-gray-900"},r.ticketsSold||0),a.createElement("p",{className:"text-sm text-gray-500"},"Tickets Sold")),a.createElement("div",null,a.createElement("p",{className:"text-2xl font-bold text-gray-900"},r.availableSeats??"Unlimited"),a.createElement("p",{className:"text-sm text-gray-500"},"Available Seats")))),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},a.createElement("p",{className:"text-gray-500 mb-1"},"Created By"),a.createElement("p",{className:"text-gray-900 font-medium"},r.createdBy?.name||"Unknown",r.createdBy?.email&&a.createElement("span",{className:"text-gray-500 font-normal"}," (",r.createdBy.email,")")),a.createElement("p",{className:"text-gray-500 text-xs mt-1"},vf(r.createdAt))),r.updatedBy&&a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},a.createElement("p",{className:"text-gray-500 mb-1"},"Last Updated By"),a.createElement("p",{className:"text-gray-900 font-medium"},r.updatedBy?.name||"Unknown"),a.createElement("p",{className:"text-gray-500 text-xs mt-1"},vf(r.updatedAt))),r.isDeleted&&r.deletedBy&&a.createElement("div",{className:"p-4 bg-red-50 rounded-lg"},a.createElement("p",{className:"text-red-500 mb-1"},"Deleted By"),a.createElement("p",{className:"text-red-700 font-medium"},r.deletedBy?.name||"Unknown"),a.createElement("p",{className:"text-red-500 text-xs mt-1"},vf(r.deletedAt)))),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("p",{className:"text-xs text-gray-400"},"Event ID: ",a.createElement("code",{className:"bg-gray-100 px-1 py-0.5 rounded"},r._id)))))}function Zoe({filters:e,onFilterChange:t,onSearchChange:r,onReset:n,showDeleted:i,onToggleDeleted:o,disabled:d=!1}){const[g,h]=N.useState(!1),[x,y]=N.useState(e.search||""),w=k=>{const M=k.target.value;y(M),r(M)},C=(k,M)=>{t({[k]:M})},_=()=>{y(""),h(!1),n()},D=e.category||e.mode||e.city||e.isLive!==""||e.featured!==""||e.minPrice||e.maxPrice||e.startDateFrom||e.startDateTo;return a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4 space-y-4"},a.createElement("div",{className:"flex flex-wrap items-center gap-3"},a.createElement("div",{className:"relative flex-1 min-w-[240px]"},a.createElement(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.createElement("input",{type:"text",placeholder:"Search events...",value:x,onChange:w,disabled:d,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"}),x&&a.createElement("button",{onClick:()=>{y(""),r("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},a.createElement(zn,{className:"h-4 w-4"}))),a.createElement("select",{value:e.category,onChange:k=>C("category",k.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Categories"),oI.map(k=>a.createElement("option",{key:k,value:k},k.charAt(0)+k.slice(1).toLowerCase()))),a.createElement("select",{value:e.mode,onChange:k=>C("mode",k.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Modes"),cI.map(k=>a.createElement("option",{key:k,value:k},k))),a.createElement("select",{value:e.isLive,onChange:k=>C("isLive",k.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"true"},"Live Only"),a.createElement("option",{value:"false"},"Not Live")),a.createElement("select",{value:e.featured,onChange:k=>C("featured",k.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},"All Events"),a.createElement("option",{value:"true"},"Featured Only"),a.createElement("option",{value:"false"},"Not Featured")),a.createElement("select",{value:e.sortBy,onChange:k=>C("sortBy",k.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},Uoe.map(k=>a.createElement("option",{key:k.value,value:k.value},"Sort: ",k.label))),a.createElement("select",{value:e.sortOrder,onChange:k=>C("sortOrder",k.target.value),disabled:d,className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100"},a.createElement("option",{value:"desc"},"Newest First"),a.createElement("option",{value:"asc"},"Oldest First")),a.createElement("button",{onClick:()=>h(!g),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${g||D?"bg-gray-100 border-gray-400 text-gray-900":"border-gray-300 text-gray-600 hover:bg-gray-50"}`},a.createElement(Ti,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),D&&a.createElement("span",{className:"flex items-center justify-center w-5 h-5 text-xs bg-gray-800 text-white rounded-full"},"!"),g?a.createElement(fU,{className:"h-4 w-4"}):a.createElement(Ai,{className:"h-4 w-4"})),(D||x)&&a.createElement("button",{onClick:_,disabled:d,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50"},a.createElement(ug,{className:"h-4 w-4"}),"Reset")),g&&a.createElement("div",{className:"pt-4 border-t border-gray-200 space-y-4"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"City"),a.createElement("input",{type:"text",placeholder:"Filter by city",value:e.city,onChange:k=>C("city",k.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Min Price"),a.createElement("input",{type:"number",placeholder:"0",value:e.minPrice,onChange:k=>C("minPrice",k.target.value),disabled:d,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Max Price"),a.createElement("input",{type:"number",placeholder:"Any",value:e.maxPrice,onChange:k=>C("maxPrice",k.target.value),disabled:d,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})),a.createElement("div",{className:"hidden lg:block"}),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Start Date From"),a.createElement("input",{type:"date",value:e.startDateFrom,onChange:k=>C("startDateFrom",k.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Start Date To"),a.createElement("input",{type:"date",value:e.startDateTo,onChange:k=>C("startDateTo",k.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100"})))),a.createElement("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200"},a.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:i,onChange:o,disabled:d,className:"w-4 h-4 text-gray-800 rounded focus:ring-0"}),a.createElement("span",{className:"text-sm text-gray-600"},"Show deleted events")),i&&a.createElement("span",{className:"text-sm text-amber-600 bg-amber-50 px-2 py-1 rounded"},"Viewing deleted events")))}function tO(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function Qoe(e,t){if(t&&t.length>0){const r=t.map(o=>o.price),n=Math.min(...r),i=Math.max(...r);return n===i?_h(n):`${_h(n)} - ${_h(i)}`}return e==null?"Free":_h(e)}function _h(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function Joe(e){const t={TECHNOLOGY:"bg-blue-100 text-gray-900",EDUCATION:"bg-indigo-100 text-indigo-700",MEDICAL:"bg-green-100 text-green-700",COMEDY:"bg-yellow-100 text-yellow-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",BUSINESS:"bg-gray-100 text-gray-700",SPORTS:"bg-orange-100 text-orange-700",ARTS:"bg-purple-100 text-purple-700",MUSIC:"bg-red-100 text-red-700",FOOD:"bg-amber-100 text-amber-700",LIFESTYLE:"bg-teal-100 text-teal-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function ece({events:e,showDeleted:t,isLoading:r,canEdit:n,canDelete:i,canPermanentDelete:o,onView:d,onEdit:g,onDelete:h,onRestore:x,onPermanentDelete:y}){return r?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8"},a.createElement("div",{className:"flex items-center justify-center"},a.createElement(Nt,{className:"h-8 w-8 animate-spin text-gray-800"}),a.createElement("span",{className:"ml-3 text-gray-600"},"Loading events..."))):e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8"},a.createElement("div",{className:"text-center text-gray-500"},a.createElement("p",{className:"text-lg font-medium"},"No events found"),a.createElement("p",{className:"text-sm mt-1"},t?"No deleted events to display.":"Try adjusting your filters or create a new event."))):a.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Event"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Category"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Mode"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Date"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Price"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,e.map(w=>a.createElement("tr",{key:w._id,className:`border-b border-gray-100 hover:bg-gray-50 ${w.isDeleted?"bg-red-50/50":""}`},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-4"},a.createElement("div",{className:"relative w-16 h-12 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0"},w.featured&&a.createElement("div",{className:"absolute top-0 left-0 z-10"},a.createElement("div",{className:"bg-purple-600 text-white text-[8px] font-semibold px-1.5 py-0.5 rounded-br-md shadow-sm"},"Featured")),w.thumbnail?.imageUrl||w.imageUrls?.[0]?a.createElement("img",{src:w.thumbnail?.imageUrl||w.imageUrls?.[0],alt:w.name,className:"w-full h-full object-cover",onError:C=>{C.target.style.display="none"}}):a.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs"},"No image")),a.createElement("div",{className:"min-w-0"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("p",{className:"font-medium text-gray-900 truncate max-w-[200px]"},w.name),w.featured&&a.createElement("span",{className:"hidden sm:inline-flex px-1.5 py-0.5 rounded text-[10px] font-medium bg-purple-100 text-purple-700"},"Featured")),w.city&&a.createElement("p",{className:"text-sm text-gray-500 truncate"},w.city)))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Joe(w.category)}`},w.category)),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"text-sm text-gray-600"},w.mode)),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"text-sm"},a.createElement("p",{className:"text-gray-900"},tO(w.startDate)),a.createElement("p",{className:"text-gray-500 text-xs"},"to ",tO(w.endDate)))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"text-sm font-medium text-gray-900"},Qoe(w.price,w.pricingTiers))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex flex-col gap-1"},w.isDeleted?a.createElement("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700"},"Deleted"):w.isLive?a.createElement("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700"},"Live"):a.createElement("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"},"Not Live"),w.ticketsSold>0&&a.createElement("span",{className:"text-xs text-gray-500"},w.ticketsSold," sold"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>d(w),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details"},a.createElement(rn,{className:"h-4 w-4"})),t?a.createElement(a.Fragment,null,n&&a.createElement("button",{onClick:()=>x(w),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Restore Event"},a.createElement(ug,{className:"h-4 w-4"})),o&&a.createElement("button",{onClick:()=>y(w),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Permanently Delete"},a.createElement(Pj,{className:"h-4 w-4"}))):a.createElement(a.Fragment,null,n&&a.createElement("button",{onClick:()=>g(w),className:"p-2 text-gray-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Event"},a.createElement(da,{className:"h-4 w-4"})),i&&a.createElement("button",{onClick:()=>h(w),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Event"},a.createElement(gr,{className:"h-4 w-4"})))))))))))}function ha({isOpen:e,onClose:t,onConfirm:r,title:n="Confirm Action",message:i="Are you sure you want to proceed?",confirmText:o="Confirm",cancelText:d="Cancel",variant:g="danger",isLoading:h=!1}){const y={danger:{icon:"bg-red-100 text-red-600",button:"bg-red-600 hover:bg-red-700 focus:ring-red-500"},warning:{icon:"bg-yellow-100 text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"},primary:{icon:"bg-blue-100 text-gray-800",button:"bg-gray-800 hover:bg-gray-900 focus:ring-blue-500"}}[g],w=async()=>{await r()};return a.createElement(hn,{isOpen:e,onClose:t,title:n,size:"sm",closeOnOverlayClick:!h},a.createElement("div",{className:"flex flex-col items-center text-center"},a.createElement("div",{className:`w-12 h-12 rounded-full ${y.icon} flex items-center justify-center mb-4`},a.createElement(Ep,{className:"h-6 w-6"})),a.createElement("p",{className:"text-gray-600 mb-6"},i),a.createElement("div",{className:"flex gap-3 w-full"},a.createElement("button",{onClick:t,disabled:h,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},d),a.createElement("button",{onClick:w,disabled:h,className:`flex-1 px-4 py-2 text-white rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 ${y.button} flex items-center justify-center gap-2`},h&&a.createElement(Nt,{className:"h-4 w-4 animate-spin"}),o))))}function Pn({currentPage:e,totalPages:t,totalItems:r,itemsPerPage:n,onPageChange:i,itemLabel:o="items",maxVisiblePages:d=5}){if(t<=0)return null;const g=r>0?(e-1)*n+1:0,h=Math.min(e*n,r),x=k=>{const M=[];let R=Math.max(1,e-Math.floor(k/2)),F=Math.min(t,R+k-1);F-R+1<k&&(R=Math.max(1,F-k+1));for(let I=R;I<=F;I++)M.push(I);return M},y=x(d),w=x(3),C=()=>{e>1&&i(e-1)},_=()=>{e<t&&i(e+1)},D=(k,M=!1)=>a.createElement(a.Fragment,null,k[0]>1&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>i(1),className:`${M?"w-7 h-7 text-xs":"w-8 h-8 text-sm"} rounded-lg text-gray-600 hover:bg-gray-100 transition-all`},"1"),k[0]>2&&a.createElement("span",{className:`${M?"w-7 h-7":"w-8 h-8"} flex items-center justify-center text-gray-400 text-sm`},"...")),k.map(R=>a.createElement("button",{key:R,onClick:()=>i(R),className:`${M?"w-7 h-7 text-xs":"w-8 h-8 text-sm"} rounded-lg transition-all ${e===R?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-100"}`},R)),k[k.length-1]<t&&a.createElement(a.Fragment,null,k[k.length-1]<t-1&&a.createElement("span",{className:`${M?"w-7 h-7":"w-8 h-8"} flex items-center justify-center text-gray-400 text-sm`},"..."),a.createElement("button",{onClick:()=>i(t),className:`${M?"w-7 h-7 text-xs":"w-8 h-8 text-sm"} rounded-lg text-gray-600 hover:bg-gray-100 transition-all`},t)));return a.createElement("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 px-4 sm:px-6 py-3 sm:py-4 border-t border-gray-200"},a.createElement("p",{className:"text-xs sm:text-sm text-gray-600 order-2 sm:order-1"},a.createElement("span",{className:"hidden sm:inline"},"Showing "),g,"-",h," of ",r," ",o),a.createElement("div",{className:"flex items-center gap-1 sm:gap-2 order-1 sm:order-2"},a.createElement("button",{onClick:C,disabled:e===1,className:`p-1.5 sm:p-2 rounded-lg transition-all ${e===1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,"aria-label":"Previous page"},a.createElement(z_,{className:"h-4 w-4 sm:h-5 sm:w-5"})),a.createElement("div",{className:"hidden sm:flex items-center gap-1"},D(y,!1)),a.createElement("div",{className:"flex sm:hidden items-center gap-1"},D(w,!0)),a.createElement("button",{onClick:_,disabled:e===t,className:`p-1.5 sm:p-2 rounded-lg transition-all ${e===t?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,"aria-label":"Next page"},a.createElement(j_,{className:"h-4 w-4 sm:h-5 sm:w-5"}))))}function tce(){const{hasRole:e}=Mi(),t=e(["SUPER_ADMIN","ADMIN"]),r=e(["SUPER_ADMIN","ADMIN"]),n=e(["SUPER_ADMIN","ADMIN"]),i=e(["SUPER_ADMIN"]),{events:o,pagination:d,filters:g,isLoading:h,error:x,showDeleted:y,getEventById:w,createEvent:C,updateEvent:_,deleteEvent:D,restoreEvent:k,permanentDeleteEvent:M,getTicketStats:R,updateExpiredEvents:F,updateFilters:I,updateSearch:G,resetFilters:U,changePage:z,toggleShowDeleted:L,clearError:H}=joe(),[V,Q]=N.useState(!1),[Y,X]=N.useState(!1),[he,xe]=N.useState(!1),[ae,ne]=N.useState(!1),[se,Te]=N.useState(!1),[we,te]=N.useState(!1),[K,ee]=N.useState(null),[fe,ce]=N.useState(null),[Se,ie]=N.useState(!1),[oe,He]=N.useState(!1),[ve,We]=N.useState(null),[be,ye]=N.useState(null),je=N.useCallback(async pt=>{ee(pt),ce(null),xe(!0)},[]),Ze=N.useCallback(async pt=>{ie(!0);try{const ar=await R(pt);ar.success&&ce(ar.data)}finally{ie(!1)}},[R]),Ie=N.useCallback(async pt=>{const ar=await w(pt._id);ar.success?(ee(ar.data),We(null),ye(null),X(!0)):We(ar.error)},[w]),ut=N.useCallback(()=>{ee(null),We(null),ye(null),Q(!0)},[]),Le=N.useCallback(pt=>{ee(pt),ne(!0)},[]),et=N.useCallback(pt=>{ee(pt),Te(!0)},[]),mt=N.useCallback(pt=>{ee(pt),te(!0)},[]),Er=N.useCallback(async pt=>{He(!0),We(null),ye(null);try{const ar=await C(pt);ar.success?Q(!1):(We(ar.error),ye(ar.validationErrors))}finally{He(!1)}},[C]),tt=N.useCallback(async pt=>{if(K){He(!0),We(null),ye(null);try{const ar=await _(K._id,pt);ar.success?(X(!1),ee(null)):(We(ar.error),ye(ar.validationErrors))}finally{He(!1)}}},[K,_]),nt=N.useCallback(async()=>{if(K){He(!0);try{const pt=await D(K._id);pt.success?(ne(!1),ee(null)):We(pt.error)}finally{He(!1)}}},[K,D]),Re=N.useCallback(async()=>{if(K){He(!0);try{const pt=await k(K._id);pt.success?(Te(!1),ee(null)):We(pt.error)}finally{He(!1)}}},[K,k]),Be=N.useCallback(async()=>{if(K){He(!0);try{const pt=await M(K._id);pt.success?(te(!1),ee(null)):We(pt.error)}finally{He(!1)}}},[K,M]),St=N.useCallback(async()=>{const pt=await F();pt.success&&pt.updatedCount>0&&console.log(`Updated ${pt.updatedCount} expired events`)},[F]);return a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Events"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Manage your events, pricing, and ticket availability")),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("button",{onClick:St,disabled:h,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Mark expired events as not live"},a.createElement(Oi,{className:`h-4 w-4 ${h?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Update Expired")),t&&a.createElement("button",{onClick:ut,className:"flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-900 transition-colors"},a.createElement(dn,{className:"h-5 w-5"}),a.createElement("span",null,"Create Event")))),x&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Vr,{className:"h-5 w-5 flex-shrink-0"}),a.createElement("p",{className:"flex-1"},x),a.createElement("button",{onClick:H,className:"text-red-500 hover:text-red-700 font-medium"},"Dismiss")),a.createElement(Zoe,{filters:g,onFilterChange:I,onSearchChange:G,onReset:U,showDeleted:y,onToggleDeleted:L,disabled:h}),a.createElement(ece,{events:o,showDeleted:y,isLoading:h,canEdit:r,canDelete:n,canPermanentDelete:i,onView:je,onEdit:Ie,onDelete:Le,onRestore:et,onPermanentDelete:mt}),d.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Pn,{currentPage:d.currentPage,totalPages:d.totalPages,totalItems:d.totalCount,itemsPerPage:d.limit,onPageChange:z,itemLabel:"events"})),a.createElement(eO,{isOpen:V,onClose:()=>Q(!1),onSubmit:Er,event:null,isLoading:oe,serverError:ve,validationErrors:be}),a.createElement(eO,{isOpen:Y,onClose:()=>{X(!1),ee(null)},onSubmit:tt,event:K,isLoading:oe,serverError:ve,validationErrors:be}),a.createElement(Koe,{isOpen:he,onClose:()=>{xe(!1),ee(null),ce(null)},event:K,ticketStats:fe,isLoadingStats:Se,onFetchStats:Ze}),a.createElement(ha,{isOpen:ae,onClose:()=>{ne(!1),ee(null)},onConfirm:nt,title:"Delete Event",message:`Are you sure you want to delete "${K?.name}"? This event will be moved to the deleted items and can be restored later.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:oe}),a.createElement(ha,{isOpen:se,onClose:()=>{Te(!1),ee(null)},onConfirm:Re,title:"Restore Event",message:`Are you sure you want to restore "${K?.name}"? This event will be available again in the events list.`,confirmText:"Restore",cancelText:"Cancel",variant:"primary",isLoading:oe}),a.createElement(ha,{isOpen:we,onClose:()=>{te(!1),ee(null)},onConfirm:Be,title:"Permanently Delete Event",message:`Are you sure you want to permanently delete "${K?.name}"? This action cannot be undone and all associated data will be lost.`,confirmText:"Delete Permanently",cancelText:"Cancel",variant:"danger",isLoading:oe}))}function rce(){const[e,t]=N.useState(1),[r,n]=N.useState(""),[i,o]=N.useState(""),[d,g]=N.useState(""),h=10,x={confirmed:"bg-green-100 text-green-700",pending:"bg-yellow-100 text-yellow-700",cancelled:"bg-red-100 text-red-700"},[y,w]=N.useState([{id:1,userName:"John Doe",email:"john.doe@email.com",phone:"+91 9876543210",eventName:"Tech Conference 2025",enrollmentDate:"2025-02-15",status:"confirmed"},{id:2,userName:"Jane Smith",email:"jane.smith@email.com",phone:"+91 9876543211",eventName:"Medical Summit 2025",enrollmentDate:"2025-02-18",status:"pending"},{id:3,userName:"Mike Johnson",email:"mike.j@email.com",phone:"+91 9876543212",eventName:"Comedy Night Live",enrollmentDate:"2025-02-20",status:"confirmed"},{id:4,userName:"Sarah Wilson",email:"sarah.w@email.com",phone:"+91 9876543213",eventName:"Rock Music Festival",enrollmentDate:"2025-02-22",status:"cancelled"},{id:5,userName:"David Brown",email:"david.b@email.com",phone:"+91 9876543214",eventName:"AI Workshop 2025",enrollmentDate:"2025-02-25",status:"confirmed"},{id:6,userName:"Emily Davis",email:"emily.d@email.com",phone:"+91 9876543215",eventName:"Health Awareness Camp",enrollmentDate:"2025-02-28",status:"pending"},{id:7,userName:"Chris Martin",email:"chris.m@email.com",phone:"+91 9876543216",eventName:"Stand-up Comedy Show",enrollmentDate:"2025-03-01",status:"confirmed"},{id:8,userName:"Lisa Anderson",email:"lisa.a@email.com",phone:"+91 9876543217",eventName:"Jazz Night",enrollmentDate:"2025-03-05",status:"confirmed"},{id:9,userName:"Robert Taylor",email:"robert.t@email.com",phone:"+91 9876543218",eventName:"Tech Conference 2025",enrollmentDate:"2025-03-08",status:"pending"},{id:10,userName:"Amanda White",email:"amanda.w@email.com",phone:"+91 9876543219",eventName:"Medical Summit 2025",enrollmentDate:"2025-03-10",status:"confirmed"},{id:11,userName:"Kevin Lee",email:"kevin.l@email.com",phone:"+91 9876543220",eventName:"Rock Music Festival",enrollmentDate:"2025-03-12",status:"cancelled"},{id:12,userName:"Michelle Garcia",email:"michelle.g@email.com",phone:"+91 9876543221",eventName:"Comedy Night Live",enrollmentDate:"2025-03-15",status:"confirmed"}]),C=[...new Set(y.map(L=>L.eventName))],_=["confirmed","pending","cancelled"],D=L=>{window.confirm("Are you sure you want to delete this enrollment?")&&w(y.filter(H=>H.id!==L))},k=y.filter(L=>{const H=L.userName.toLowerCase().includes(r.toLowerCase())||L.email.toLowerCase().includes(r.toLowerCase()),V=i?L.status===i:!0,Q=d?L.eventName===d:!0;return H&&V&&Q}),M=Math.ceil(k.length/h),R=(e-1)*h,F=R+h,I=k.slice(R,F),G=(L,H)=>{L(H),t(1)},U=()=>{e>1&&t(e-1)},z=()=>{e<M&&t(e+1)};return a.createElement("div",null,a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6"},a.createElement("div",{className:"flex flex-wrap items-center gap-4"},a.createElement("div",{className:"relative w-80"},a.createElement(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.createElement("input",{type:"text",placeholder:"Search by name or email...",value:r,onChange:L=>G(n,L.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),a.createElement("select",{value:i,onChange:L=>G(o,L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white"},a.createElement("option",{value:""},"All Status"),_.map(L=>a.createElement("option",{key:L,value:L,className:"capitalize"},L.charAt(0).toUpperCase()+L.slice(1)))),a.createElement("select",{value:d,onChange:L=>G(g,L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white"},a.createElement("option",{value:""},"All Events"),C.map(L=>a.createElement("option",{key:L,value:L},L))))),a.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"User"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Event"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Phone"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Enrollment Date"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,I.map(L=>a.createElement("tr",{key:L.id,className:"border-b border-gray-100 hover:bg-gray-50"},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900"},L.userName),a.createElement("p",{className:"text-sm text-gray-500"},L.email))),a.createElement("td",{className:"px-6 py-4 text-gray-600"},L.eventName),a.createElement("td",{className:"px-6 py-4 text-gray-600"},L.phone),a.createElement("td",{className:"px-6 py-4 text-gray-600"},L.enrollmentDate),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-medium capitalize ${x[L.status]}`},L.status)),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-2"},a.createElement("button",{className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-all",title:"View Details"},a.createElement(rn,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>D(L.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete"},a.createElement(gr,{className:"h-5 w-5"})))))))),a.createElement("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200"},a.createElement("p",{className:"text-sm text-gray-600"},"Showing ",k.length>0?R+1:0," to"," ",Math.min(F,k.length)," of ",k.length," enrollments"),a.createElement("div",{className:"flex items-center gap-2"},a.createElement("button",{onClick:U,disabled:e===1,className:`p-2 rounded-lg transition-all ${e===1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`},a.createElement(z_,{className:"h-5 w-5"})),Array.from({length:M},(L,H)=>H+1).map(L=>a.createElement("button",{key:L,onClick:()=>t(L),className:`w-8 h-8 rounded-lg transition-all ${e===L?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-100"}`},L)),a.createElement("button",{onClick:z,disabled:e===M,className:`p-2 rounded-lg transition-all ${e===M?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`},a.createElement(j_,{className:"h-5 w-5"}))))))}function nce(){return a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-6"},a.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-4"},"Coupons"),a.createElement("p",{className:"text-gray-600"},"Manage your discount coupons here."))}const lc={LIST:"/app/auth/users",GET_BY_ID:e=>`/app/auth/users/${e}`,UPDATE:e=>`/app/auth/users/${e}`,DELETE:e=>`/app/auth/users/${e}`,RESTORE:e=>`/app/auth/users/${e}/restore`,PERMANENT_DELETE:e=>`/app/auth/users/${e}/permanent`},wu={getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.search&&t.append("search",e.search),e.includeDeleted&&t.append("includeDeleted",e.includeDeleted);const r=t.toString(),n=r?`${lc.LIST}?${r}`:lc.LIST;console.log("[UserService] Fetching users with params:",e);const i=await Xe(Ye.get(n));return i.success?console.log("[UserService] Fetched users:",i.data.users?.length):console.error("[UserService] Failed to fetch users:",i.message),i},getById:async e=>{console.log("[UserService] Fetching user by ID:",e);const t=await Xe(Ye.get(lc.GET_BY_ID(e)));return t.success?console.log("[UserService] Fetched user:",t.data.user?.name):console.error("[UserService] Failed to fetch user:",t.message),t},update:async(e,t)=>{console.log("[UserService] Updating user:",e);const r=await Xe(Ye.put(lc.UPDATE(e),t));return r.success?console.log("[UserService] User updated successfully"):console.error("[UserService] Failed to update user:",r.message),r},delete:async e=>{console.log("[UserService] Soft deleting user:",e);const t=await Xe(Ye.delete(lc.DELETE(e)));return t.success?console.log("[UserService] User soft deleted successfully"):console.error("[UserService] Failed to delete user:",t.message),t},restore:async e=>{console.log("[UserService] Restoring user:",e);const t=await Xe(Ye.post(lc.RESTORE(e)));return t.success?console.log("[UserService] User restored successfully"):console.error("[UserService] Failed to restore user:",t.message),t},permanentDelete:async e=>{console.log("[UserService] Permanently deleting user:",e);const t=await Xe(Ye.delete(lc.PERMANENT_DELETE(e)));return t.success?console.log("[UserService] User permanently deleted"):console.error("[UserService] Failed to permanently delete user:",t.message),t}};function ace(e={}){const[t,r]=N.useState([]),[n,i]=N.useState({total:0,page:1,limit:10,totalPages:0}),[o,d]=N.useState({search:"",includeDeleted:!1,...e}),[g,h]=N.useState(!1),[x,y]=N.useState(null),w=N.useCallback(async(z=n.page)=>{h(!0),y(null);try{const L={page:z,limit:n.limit,...o.search&&{search:o.search},...o.includeDeleted&&{includeDeleted:o.includeDeleted}},H=await wu.getAll(L);H.success?(r(H.data.users),i(H.data.pagination)):(y(H.message),r([]))}catch{y("Failed to fetch users"),r([])}finally{h(!1)}},[o,n.limit]),C=N.useCallback(async z=>{try{const L=await wu.getById(z);return L.success?{success:!0,data:L.data.user}:{success:!1,error:L.message}}catch{return{success:!1,error:"Failed to fetch user details"}}},[]),_=N.useCallback(async(z,L)=>{h(!0),y(null);try{const H=await wu.update(z,L);return H.success?(r(V=>V.map(Q=>Q._id===z?{...Q,...H.data.user}:Q)),{success:!0,data:H.data}):{success:!1,error:H.message,validationErrors:H.data?.errors}}catch{return{success:!1,error:"Failed to update user"}}finally{h(!1)}},[]),D=N.useCallback(async z=>{h(!0),y(null);try{const L=await wu.delete(z);return L.success?(o.includeDeleted?r(H=>H.map(V=>V._id===z?{...V,isDeleted:!0}:V)):(r(H=>H.filter(V=>V._id!==z)),i(H=>({...H,total:H.total-1,totalPages:Math.ceil((H.total-1)/H.limit)}))),{success:!0}):{success:!1,error:L.message}}catch{return{success:!1,error:"Failed to delete user"}}finally{h(!1)}},[o.includeDeleted]),k=N.useCallback(async z=>{h(!0),y(null);try{const L=await wu.restore(z);return L.success?(r(H=>H.map(V=>V._id===z?{...V,isDeleted:!1,deletedAt:null}:V)),{success:!0}):{success:!1,error:L.message}}catch{return{success:!1,error:"Failed to restore user"}}finally{h(!1)}},[]),M=N.useCallback(async z=>{h(!0),y(null);try{const L=await wu.permanentDelete(z);return L.success?(r(H=>H.filter(V=>V._id!==z)),i(H=>({...H,total:H.total-1,totalPages:Math.ceil((H.total-1)/H.limit)})),{success:!0}):{success:!1,error:L.message}}catch{return{success:!1,error:"Failed to permanently delete user"}}finally{h(!1)}},[]),R=N.useCallback(z=>{d(L=>({...L,...z}))},[]),F=N.useCallback(()=>{d({search:"",includeDeleted:!1,...e})},[e]),I=N.useCallback(z=>{w(z)},[w]),G=N.useCallback(z=>{i(L=>({...L,limit:z}))},[]),U=N.useCallback(()=>{y(null)},[]);return N.useEffect(()=>{w(1)},[o]),{users:t,pagination:n,filters:o,isLoading:g,error:x,fetchUsers:w,getUserById:C,updateUser:_,deleteUser:D,restoreUser:k,permanentDeleteUser:M,updateFilters:R,resetFilters:F,changePage:I,changeLimit:G,clearError:U}}const rO=(e=null)=>({name:e?.name||"",email:e?.email||"",phone:e?.phone||""}),sce=e=>{const t={};if(e.name.trim()?(e.name.length<2||e.name.length>100)&&(t.name="Name must be between 2 and 100 characters"):t.name="Name is required",e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(t.email="Invalid email format"):t.email="Email is required",!e.phone.trim())t.phone="Phone is required";else{const r=e.phone.replace(/[^0-9]/g,"");(r.length<10||r.length>15)&&(t.phone="Phone must be 10-15 digits")}return{isValid:Object.keys(t).length===0,errors:t}};function ice({isOpen:e,onClose:t,onSubmit:r,user:n=null,isLoading:i=!1,serverError:o=null,validationErrors:d=null}){const[g,h]=N.useState(rO(n)),[x,y]=N.useState({});N.useEffect(()=>{e&&(h(rO(n)),y({}))},[e,n]),N.useEffect(()=>{if(d&&Array.isArray(d)){const D={};d.forEach(k=>{k.field&&(D[k.field]=k.message)}),y(k=>({...k,...D}))}},[d]);const w=D=>{const{name:k,value:M}=D.target;h(R=>({...R,[k]:M})),x[k]&&y(R=>({...R,[k]:null}))},C=async D=>{D.preventDefault();const k=sce(g);if(!k.isValid){y(k.errors);return}const M={...g};M.phone=M.phone.replace(/[^0-9]/g,""),await r(M)},_=()=>{i||t()};return a.createElement(hn,{isOpen:e,onClose:_,title:"Edit User",size:"md",closeOnOverlayClick:!i},a.createElement("form",{onSubmit:C},o&&a.createElement("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},o),a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1"},"Name ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",id:"name",name:"name",value:g.name,onChange:w,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${x.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter user name"}),x.name&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},x.name)),a.createElement("div",null,a.createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1"},"Email ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"email",id:"email",name:"email",value:g.email,onChange:w,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${x.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),x.email&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},x.email)),a.createElement("div",null,a.createElement("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1"},"Phone ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"tel",id:"phone",name:"phone",value:g.phone,onChange:w,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${x.phone?"border-red-500":"border-gray-300"}`,placeholder:"Enter phone number"}),x.phone&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},x.phone))),a.createElement("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:_,disabled:i,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},i&&a.createElement(Nt,{className:"h-4 w-4 animate-spin"}),"Update User"))))}const fv=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",lce=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-";function oce({isOpen:e,onClose:t,user:r,isLoading:n=!1}){return!r&&!n?null:a.createElement(hn,{isOpen:e,onClose:t,title:"User Details",size:"lg"},n?a.createElement("div",{className:"py-12 flex flex-col items-center justify-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading user details...")):r?a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex items-start gap-4 pb-4 border-b border-gray-200"},a.createElement("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center shrink-0"},a.createElement("span",{className:"text-xl font-semibold text-gray-800"},r.name?.charAt(0)?.toUpperCase()||"?")),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900 truncate"},r.name),a.createElement("div",{className:"flex flex-wrap items-center gap-2 mt-1"},r.isDeleted&&a.createElement("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-xs font-medium flex items-center gap-1"},a.createElement(Vr,{className:"h-3 w-3"}),"Deleted")))),a.createElement("div",{className:"space-y-3"},a.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Contact Information"),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(tj,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Email")),a.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},r.email||"-")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(cg,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Phone")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},r.phone||"-")))),a.createElement("div",{className:"space-y-3"},a.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Activity"),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(Cn,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Last Login")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},r.lastLogin?fv(r.lastLogin):"Never")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(Hr,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Joined")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},fv(r.createdAt))))),r.enrollments&&r.enrollments.length>0?a.createElement("div",{className:"space-y-3"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Enrollments (",r.enrollments.length,")")),a.createElement("div",{className:"space-y-2 max-h-64 overflow-y-auto"},r.enrollments.map((i,o)=>a.createElement("div",{key:i._id||o,className:"bg-gray-50 rounded-lg p-3 flex items-center gap-3"},a.createElement("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center shrink-0"},a.createElement(bA,{className:"h-4 w-4 text-gray-800"})),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},i.event?.name||i.event||"Unknown Event"),a.createElement("p",{className:"text-xs text-gray-500"},"Enrolled: ",lce(i.enrolledAt))),i.certificate&&a.createElement("a",{href:i.certificate,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-gray-800 hover:text-gray-900 hover:underline shrink-0"},"View Certificate"))))):a.createElement("div",{className:"bg-gray-50 rounded-lg p-4 text-center"},a.createElement(bA,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),a.createElement("p",{className:"text-sm text-gray-500"},"No enrollments yet")),r.isDeleted&&r.deletedAt&&a.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 text-red-700"},a.createElement(Vr,{className:"h-4 w-4 shrink-0"}),a.createElement("p",{className:"text-sm"},"This user was deleted on ",fv(r.deletedAt)))),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"},"Close"))):a.createElement("div",{className:"py-12 text-center text-gray-500"},a.createElement("p",null,"No user data available")))}function cce(){const{hasRole:e}=Mi(),{users:t,pagination:r,filters:n,isLoading:i,error:o,getUserById:d,updateUser:g,deleteUser:h,restoreUser:x,permanentDeleteUser:y,updateFilters:w,changePage:C,clearError:_}=ace(),D=e(["SUPER_ADMIN","ADMIN"]),[k,M]=N.useState(!1),[R,F]=N.useState(!1),[I,G]=N.useState(!1),[U,z]=N.useState(!1),[L,H]=N.useState(!1),[V,Q]=N.useState(null),[Y,X]=N.useState(null),[he,xe]=N.useState(!1),[ae,ne]=N.useState(null),[se,Te]=N.useState(null),[we,te]=N.useState(!1),[K,ee]=N.useState("");N.useEffect(()=>{const Ie=setTimeout(()=>{K!==n.search&&w({search:K})},300);return()=>clearTimeout(Ie)},[K,n.search,w]);const fe=async Ie=>{F(!0),xe(!0),X(null);const ut=await d(Ie._id);ut.success?X(ut.data):X(Ie),xe(!1)},ce=Ie=>{D&&(Q(Ie),ne(null),Te(null),M(!0))},Se=async Ie=>{te(!0),ne(null),Te(null);const ut=await g(V._id,Ie);ut.success?(M(!1),Q(null)):(ne(ut.error),Te(ut.validationErrors)),te(!1)},ie=Ie=>{D&&(Q(Ie),G(!0))},oe=async()=>{const Ie=await h(V._id);G(!1),Q(null),Ie.success||console.error("Delete failed:",Ie.error)},He=Ie=>{D&&(Q(Ie),z(!0))},ve=async()=>{const Ie=await x(V._id);z(!1),Q(null),Ie.success||console.error("Restore failed:",Ie.error)},We=Ie=>{D&&(Q(Ie),H(!0))},be=async()=>{const Ie=await y(V._id);H(!1),Q(null),Ie.success||console.error("Permanent delete failed:",Ie.error)},ye=()=>{w({includeDeleted:!n.includeDeleted})},je=()=>{M(!1),Q(null),ne(null),Te(null)},Ze=()=>{F(!1),X(null)};return a.createElement("div",{className:"space-y-4 sm:space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900"},"Users Management"),a.createElement("p",{className:"text-sm sm:text-base text-gray-600 mt-1"},"Manage and monitor user accounts"))),a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 border border-gray-200"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4"},a.createElement("div",{className:"relative flex-1 max-w-md"},a.createElement(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.createElement("input",{type:"text",placeholder:"Search by name, email, or phone...",value:K,onChange:Ie=>ee(Ie.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:border-gray-800 outline-none text-sm"})),D&&a.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:n.includeDeleted,onChange:ye,className:"w-4 h-4 text-gray-800 border-gray-300 rounded focus:ring-0"}),a.createElement("span",{className:"text-sm text-gray-600"},"Show deleted users")))),o&&a.createElement("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6 flex items-center justify-between"},a.createElement("div",{className:"flex items-center gap-2 text-red-700"},a.createElement(Ep,{className:"h-5 w-5"}),a.createElement("span",null,o)),a.createElement("button",{onClick:_,className:"text-red-700 hover:text-red-900"},"Dismiss")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200"},i&&t.length===0?a.createElement("div",{className:"py-12 flex flex-col items-center justify-center"},a.createElement(Nt,{className:"h-8 w-8 text-blue-600 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading users...")):t.length===0?a.createElement("div",{className:"py-12 text-center text-gray-500"},a.createElement("p",null,"No users found"),n.search&&a.createElement("p",{className:"text-sm mt-1"},"Try adjusting your search criteria")):a.createElement(a.Fragment,null,a.createElement("div",{className:"hidden lg:block overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"User"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Phone"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Last Login"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,t.map(Ie=>a.createElement("tr",{key:Ie._id,className:`border-b border-gray-100 hover:bg-gray-50 transition-colors ${Ie.isDeleted?"bg-red-50/50":""}`},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-700 to-gray-800 rounded-full flex items-center justify-center flex-shrink-0"},a.createElement("span",{className:"text-white font-semibold text-sm"},Ie.name?.charAt(0)?.toUpperCase()||"?")),a.createElement("div",{className:"min-w-0"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},Ie.name),a.createElement("p",{className:"text-sm text-gray-500 truncate"},Ie.email)))),a.createElement("td",{className:"px-6 py-4 text-gray-600"},Ie.phone||"-"),a.createElement("td",{className:"px-6 py-4 text-gray-600 text-sm"},Ie.lastLogin?new Date(Ie.lastLogin).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"Never"),a.createElement("td",{className:"px-6 py-4"},Ie.isDeleted?a.createElement("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700"},"Deleted"):a.createElement("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700"},"Active")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-2"},a.createElement("button",{onClick:()=>fe(Ie),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-all",title:"View Details"},a.createElement(rn,{className:"h-5 w-5"})),D&&a.createElement(a.Fragment,null,Ie.isDeleted?a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>He(Ie),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Restore User"},a.createElement(ug,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>We(Ie),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Permanently Delete"},a.createElement(gr,{className:"h-5 w-5"}))):a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>ce(Ie),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit"},a.createElement(da,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>ie(Ie),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete"},a.createElement(gr,{className:"h-5 w-5"}))))))))))),a.createElement("div",{className:"lg:hidden divide-y divide-gray-200"},t.map(Ie=>a.createElement("div",{key:Ie._id,className:`p-4 hover:bg-gray-50 transition-colors ${Ie.isDeleted?"bg-red-50/50":""}`},a.createElement("div",{className:"flex items-start gap-3 mb-3"},a.createElement("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-700 to-gray-800 rounded-full flex items-center justify-center flex-shrink-0"},a.createElement("span",{className:"text-white font-semibold"},Ie.name?.charAt(0)?.toUpperCase()||"?")),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"font-semibold text-gray-900 truncate"},Ie.name),a.createElement("p",{className:"text-sm text-gray-500 truncate"},Ie.email),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},Ie.phone||"No phone")),a.createElement("div",null,Ie.isDeleted?a.createElement("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700"},"Deleted"):a.createElement("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700"},"Active"))),a.createElement("div",{className:"flex items-center justify-between text-sm"},a.createElement("span",{className:"text-gray-500"},"Last login:"," ",Ie.lastLogin?new Date(Ie.lastLogin).toLocaleDateString("en-IN",{day:"numeric",month:"short"}):"Never"),a.createElement("div",{className:"flex items-center gap-1"},a.createElement("button",{onClick:()=>fe(Ie),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-all",title:"View Details"},a.createElement(rn,{className:"h-5 w-5"})),D&&a.createElement(a.Fragment,null,Ie.isDeleted?a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>He(Ie),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Restore"},a.createElement(ug,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>We(Ie),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Forever"},a.createElement(gr,{className:"h-5 w-5"}))):a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>ce(Ie),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit"},a.createElement(da,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>ie(Ie),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete"},a.createElement(gr,{className:"h-5 w-5"}))))))))),a.createElement(Pn,{currentPage:r.page,totalPages:r.totalPages,totalItems:r.total,itemsPerPage:r.limit,onPageChange:C,itemLabel:"users"}))),a.createElement(ice,{isOpen:k,onClose:je,onSubmit:Se,user:V,isLoading:we,serverError:ae,validationErrors:se}),a.createElement(oce,{isOpen:R,onClose:Ze,user:Y,isLoading:he}),a.createElement(ha,{isOpen:I,onClose:()=>G(!1),onConfirm:oe,title:"Delete User",message:`Are you sure you want to delete "${V?.name}"? This action can be undone by restoring the user.`,confirmText:"Delete",variant:"danger",isLoading:i}),a.createElement(ha,{isOpen:U,onClose:()=>z(!1),onConfirm:ve,title:"Restore User",message:`Are you sure you want to restore "${V?.name}"?`,confirmText:"Restore",variant:"primary",isLoading:i}),a.createElement(ha,{isOpen:L,onClose:()=>H(!1),onConfirm:be,title:"Permanently Delete User",message:`Are you sure you want to PERMANENTLY delete "${V?.name}"? This action CANNOT be undone and all user data will be lost forever.`,confirmText:"Delete Forever",variant:"danger",isLoading:i}))}const xi={CREATE:"/web/auth/create",LIST:"/web/auth/admins",GET_BY_ID:e=>`/web/auth/admins/${e}`,UPDATE:e=>`/web/auth/admins/${e}`,DELETE:e=>`/web/auth/admins/${e}`,GET_ALLOWED_EVENTS:e=>`/web/auth/admins/${e}/allowed-events`,UPDATE_ALLOWED_EVENTS:e=>`/web/auth/admins/${e}/allowed-events`,ADD_ALLOWED_EVENT:(e,t)=>`/web/auth/admins/${e}/allowed-events/${t}`,REMOVE_ALLOWED_EVENT:(e,t)=>`/web/auth/admins/${e}/allowed-events/${t}`},Ef={create:async e=>{console.log("[AdminService] Creating admin:",e.username);const t=await Xe(Ye.post(xi.CREATE,e));return t.success?console.log("[AdminService] Admin created successfully:",t.data.admin._id):console.error("[AdminService] Failed to create admin:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.status&&t.append("status",e.status),e.role&&t.append("role",e.role),e.search&&t.append("search",e.search);const r=t.toString(),n=r?`${xi.LIST}?${r}`:xi.LIST;console.log("[AdminService] Fetching admins with params:",e);const i=await Xe(Ye.get(n));return i.success?console.log("[AdminService] Fetched admins:",i.data.admins?.length):console.error("[AdminService] Failed to fetch admins:",i.message),i},getById:async e=>{console.log("[AdminService] Fetching admin by ID:",e);const t=await Xe(Ye.get(xi.GET_BY_ID(e)));return t.success?console.log("[AdminService] Fetched admin:",t.data.admin.username):console.error("[AdminService] Failed to fetch admin:",t.message),t},update:async(e,t)=>{console.log("[AdminService] Updating admin:",e);const r=await Xe(Ye.put(xi.UPDATE(e),t));return r.success?console.log("[AdminService] Admin updated successfully"):console.error("[AdminService] Failed to update admin:",r.message),r},delete:async e=>{console.log("[AdminService] Deleting admin:",e);const t=await Xe(Ye.delete(xi.DELETE(e)));return t.success?console.log("[AdminService] Admin deleted successfully"):console.error("[AdminService] Failed to delete admin:",t.message),t},getAllowedEvents:async e=>{console.log("[AdminService] Fetching allowed events for admin:",e);const t=await Xe(Ye.get(xi.GET_ALLOWED_EVENTS(e)));return t.success?console.log("[AdminService] Fetched allowed events:",t.data.allowedEvents?.length):console.error("[AdminService] Failed to fetch allowed events:",t.message),t},updateAllowedEvents:async(e,t)=>{console.log("[AdminService] Updating allowed events for admin:",e);const r=await Xe(Ye.put(xi.UPDATE_ALLOWED_EVENTS(e),{allowedEvents:t}));return r.success?console.log("[AdminService] Allowed events updated successfully"):console.error("[AdminService] Failed to update allowed events:",r.message),r},addAllowedEvent:async(e,t)=>{console.log("[AdminService] Adding event to allowed events:",t);const r=await Xe(Ye.post(xi.ADD_ALLOWED_EVENT(e,t)));return r.success?console.log("[AdminService] Event added to allowed events"):console.error("[AdminService] Failed to add event:",r.message),r},removeAllowedEvent:async(e,t)=>{console.log("[AdminService] Removing event from allowed events:",t);const r=await Xe(Ye.delete(xi.REMOVE_ALLOWED_EVENT(e,t)));return r.success?console.log("[AdminService] Event removed from allowed events"):console.error("[AdminService] Failed to remove event:",r.message),r}};function uce(e={}){const[t,r]=N.useState([]),[n,i]=N.useState({total:0,page:1,limit:10,totalPages:0}),[o,d]=N.useState({search:"",status:"",role:"",...e}),[g,h]=N.useState(!1),[x,y]=N.useState(null),w=N.useCallback(async(U=n.page)=>{h(!0),y(null);try{const z={page:U,limit:n.limit,...o.search&&{search:o.search},...o.status&&{status:o.status},...o.role&&{role:o.role}},L=await Ef.getAll(z);L.success?(r(L.data.admins),i(L.data.pagination)):(y(L.message),r([]))}catch{y("Failed to fetch admins"),r([])}finally{h(!1)}},[o,n.limit]),C=N.useCallback(async U=>{h(!0),y(null);try{const z=await Ef.create(U);return z.success?(await w(1),{success:!0,data:z.data}):{success:!1,error:z.message,validationErrors:z.error}}catch{return{success:!1,error:"Failed to create admin"}}finally{h(!1)}},[w]),_=N.useCallback(async(U,z)=>{h(!0),y(null);try{const L=await Ef.update(U,z);return L.success?(r(H=>H.map(V=>V._id===U?{...V,...L.data.admin}:V)),{success:!0,data:L.data}):{success:!1,error:L.message,validationErrors:L.error}}catch{return{success:!1,error:"Failed to update admin"}}finally{h(!1)}},[]),D=N.useCallback(async U=>{h(!0),y(null);try{const z=await Ef.delete(U);return z.success?(r(L=>L.filter(H=>H._id!==U)),i(L=>({...L,total:L.total-1,totalPages:Math.ceil((L.total-1)/L.limit)})),{success:!0}):{success:!1,error:z.message}}catch{return{success:!1,error:"Failed to delete admin"}}finally{h(!1)}},[]),k=N.useCallback(async U=>{try{const z=await Ef.getById(U);return z.success?{success:!0,data:z.data.admin}:{success:!1,error:z.message}}catch{return{success:!1,error:"Failed to fetch admin details"}}},[]),M=N.useCallback(U=>{d(z=>({...z,...U}))},[]),R=N.useCallback(()=>{d({search:"",status:"",role:"",...e})},[e]),F=N.useCallback(U=>{w(U)},[w]),I=N.useCallback(U=>{i(z=>({...z,limit:U}))},[]),G=N.useCallback(()=>{y(null)},[]);return N.useEffect(()=>{w(1)},[o]),{admins:t,pagination:n,filters:o,isLoading:g,error:x,fetchAdmins:w,createAdmin:C,updateAdmin:_,deleteAdmin:D,getAdminById:k,updateFilters:M,resetFilters:R,changePage:F,changeLimit:I,clearError:G}}function dce(e={}){const{autoFetch:t=!0,isLive:r}=e,[n,i]=N.useState([]),[o,d]=N.useState(!1),[g,h]=N.useState(null),[x,y]=N.useState(""),w=N.useRef(null),C=N.useRef({data:null,timestamp:null}),_=300*1e3,D=N.useCallback(async(F="",I=!0)=>{if(I&&!F&&C.current.data&&Date.now()-C.current.timestamp<_){i(C.current.data);return}d(!0),h(null);try{const G={};r!==void 0&&(G.isLive=r),F&&(G.search=F);const U=await Ss.getDropdownEvents(G);if(U.success){const z=U.data.events||[];i(z),F||(C.current={data:z,timestamp:Date.now()})}else h(U.message),i([])}catch{h("Failed to fetch events"),i([])}finally{d(!1)}},[r]),k=N.useCallback(F=>{if(y(F),w.current&&clearTimeout(w.current),!F.trim()){C.current.data?i(C.current.data):D("",!0);return}w.current=setTimeout(()=>{D(F,!1)},300)},[D]),M=N.useCallback(()=>{C.current={data:null,timestamp:null},D("",!1)},[D]),R=N.useCallback(()=>{h(null)},[]);return N.useEffect(()=>{t&&D("",!0)},[t,D]),N.useEffect(()=>()=>{w.current&&clearTimeout(w.current)},[]),{events:n,isLoading:o,error:g,searchQuery:x,fetchEvents:D,searchEvents:k,refreshEvents:M,clearError:R}}const fce=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",nO={TECHNOLOGY:"bg-blue-100 text-gray-900",MUSIC:"bg-purple-100 text-purple-700",SPORTS:"bg-green-100 text-green-700",BUSINESS:"bg-yellow-100 text-yellow-700",EDUCATION:"bg-indigo-100 text-indigo-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",DEFAULT:"bg-gray-100 text-gray-700"};function fI({selectedIds:e=[],onChange:t,disabled:r=!1,placeholder:n="Select events...",error:i}){const[o,d]=N.useState(!1),[g,h]=N.useState(""),x=N.useRef(null),y=N.useRef(null),{events:w,isLoading:C,error:_,searchEvents:D}=dce({autoFetch:!0}),k=N.useMemo(()=>{if(!g.trim())return w;const Y=g.toLowerCase();return w.filter(X=>X.name.toLowerCase().includes(Y)||X.category?.toLowerCase().includes(Y))},[w,g]),M=N.useMemo(()=>w.filter(Y=>e.includes(Y._id)),[w,e]);N.useEffect(()=>{const Y=X=>{x.current&&!x.current.contains(X.target)&&d(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]);const R=N.useCallback(Y=>{const X=Y.target.value;h(X),D(X)},[D]),F=N.useCallback(Y=>{if(r)return;const X=e.includes(Y)?e.filter(he=>he!==Y):[...e,Y];t(X)},[e,t,r]),I=N.useCallback((Y,X)=>{X.stopPropagation(),!r&&t(e.filter(he=>he!==Y))},[e,t,r]),G=N.useCallback(()=>{if(r)return;const Y=k.map(he=>he._id),X=[...new Set([...e,...Y])];t(X)},[k,e,t,r]),U=N.useCallback(()=>{r||t([])},[t,r]),z=N.useCallback(()=>{r||(d(!0),setTimeout(()=>y.current?.focus(),0))},[r]),L=N.useCallback(Y=>{Y.key==="Escape"&&d(!1)},[]),H=Y=>nO[Y]||nO.DEFAULT,V=i||_,Q=2;return a.createElement("div",{ref:x,className:"relative",onKeyDown:L},a.createElement("div",{onClick:z,className:`min-h-[42px] px-2 sm:px-3 py-2 border rounded-lg cursor-pointer transition-colors ${r?"bg-gray-100 cursor-not-allowed":o?"border-gray-800":V?"border-red-500":"border-gray-300 hover:border-gray-400"}`},a.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap"},M.length>0?a.createElement(a.Fragment,null,M.slice(0,Q).map(Y=>a.createElement("span",{key:Y._id,className:"inline-flex items-center gap-1 px-1.5 sm:px-2 py-0.5 sm:py-1 bg-blue-100 text-blue-800 text-xs sm:text-sm rounded-md"},a.createElement("span",{className:"truncate max-w-[80px] sm:max-w-[120px]"},Y.name),!r&&a.createElement("button",{type:"button",onClick:X=>I(Y._id,X),className:"hover:bg-blue-200 rounded p-0.5"},a.createElement(zn,{className:"h-3 w-3"})))),M.length>Q&&a.createElement("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 bg-gray-100 text-gray-600 text-xs sm:text-sm rounded-md"},"+",M.length-Q," more")):a.createElement("span",{className:"text-gray-400 text-sm"},n),a.createElement(Ai,{className:`h-4 w-4 sm:h-5 sm:w-5 text-gray-400 ml-auto shrink-0 transition-transform ${o?"rotate-180":""}`}))),V&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500 flex items-center gap-1"},a.createElement(Vr,{className:"h-3 w-3 sm:h-4 sm:w-4"}),V),o&&!r&&a.createElement("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg"},a.createElement("div",{className:"p-2 border-b border-gray-200"},a.createElement("div",{className:"relative"},a.createElement(sa,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{ref:y,type:"text",value:g,onChange:R,placeholder:"Search events...",className:"w-full pl-8 sm:pl-9 pr-4 py-2 border border-gray-300 rounded-md focus:border-gray-800 outline-none text-sm"}),C&&a.createElement(Nt,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 animate-spin"}))),a.createElement("div",{className:"px-2 py-1.5 border-b border-gray-200 flex items-center justify-between bg-gray-50"},a.createElement("span",{className:"text-xs text-gray-500"},e.length,"/",w.length),a.createElement("div",{className:"flex gap-2"},a.createElement("button",{type:"button",onClick:G,className:"text-xs text-gray-800 hover:text-black font-medium"},"Select all"),a.createElement("span",{className:"text-gray-300"},"|"),a.createElement("button",{type:"button",onClick:U,className:"text-xs text-red-600 hover:text-red-800 font-medium"},"Clear"))),a.createElement("div",{className:"max-h-48 sm:max-h-60 overflow-y-auto"},k.length===0?a.createElement("div",{className:"px-4 py-6 sm:py-8 text-center text-gray-500 text-sm"},C?a.createElement("div",{className:"flex flex-col items-center gap-2"},a.createElement(Nt,{className:"h-5 w-5 sm:h-6 sm:w-6 animate-spin"}),a.createElement("span",null,"Loading events...")):g?a.createElement("span",null,'No events found for "',g,'"'):a.createElement("span",null,"No events available")):k.map(Y=>{const X=e.includes(Y._id);return a.createElement("div",{key:Y._id,onClick:()=>F(Y._id),className:`px-2 sm:px-3 py-2 sm:py-2.5 cursor-pointer flex items-start gap-2 sm:gap-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 ${X?"bg-blue-50":""}`},a.createElement("div",{className:`shrink-0 w-4 h-4 sm:w-5 sm:h-5 rounded border-2 flex items-center justify-center mt-0.5 ${X?"bg-gray-800 border-gray-800":"border-gray-300"}`},X&&a.createElement(Js,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-white"})),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap"},a.createElement("p",{className:"font-medium text-gray-900 text-sm truncate"},Y.name),Y.isLive&&a.createElement("span",{className:"shrink-0 px-1 sm:px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded"},"Live")),a.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 mt-1 flex-wrap"},Y.category&&a.createElement("span",{className:`px-1 sm:px-1.5 py-0.5 text-xs rounded ${H(Y.category)}`},Y.category),Y.startDate&&a.createElement("span",{className:"flex items-center gap-1 text-xs text-gray-500"},a.createElement(Hr,{className:"h-3 w-3"}),fce(Y.startDate)))))})),e.length>0&&a.createElement("div",{className:"px-2 sm:px-3 py-2 border-t border-gray-200 bg-gray-50"},a.createElement("p",{className:"text-xs sm:text-sm text-gray-600"},a.createElement("span",{className:"font-medium"},e.length)," event",e.length!==1?"s":""," selected"))))}const mce=[{value:"MANAGEMENT_STAFF",label:"Management Staff"},{value:"ADMIN",label:"Admin"},{value:"SUPER_ADMIN",label:"Super Admin"}],hce=[{value:"ACTIVATED",label:"Active"},{value:"DEACTIVATED",label:"Inactive"}],gce=[{value:"events",label:"Events"},{value:"enrollments",label:"Enrollments"},{value:"payments",label:"Payments"},{value:"users",label:"Users"},{value:"coupons",label:"Coupons"}],pce=e=>!e||!Array.isArray(e)?[]:e.map(t=>typeof t=="string"?t:t._id).filter(Boolean),aO=(e=null)=>({name:e?.name||"",username:e?.username||"",email:e?.email||"",phone:e?.phone||"",password:"",role:e?.role||"MANAGEMENT_STAFF",status:e?.status||"ACTIVATED",access:e?.access||[],allowedEvents:pce(e?.allowedEvents),maxCashTicketsAllowed:e?.maxCashTicketsAllowed||""}),yce=(e,t=!1)=>{const r={};if(e.name.trim()?(e.name.length<2||e.name.length>100)&&(r.name="Name must be between 2 and 100 characters"):r.name="Name is required",e.username.trim()?e.username.length<3||e.username.length>50?r.username="Username must be between 3 and 50 characters":/^[a-zA-Z0-9_]+$/.test(e.username)||(r.username="Username can only contain letters, numbers, and underscores"):r.username="Username is required",e.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&(r.email="Invalid email format"),e.phone.trim()){const n=e.phone.replace(/[^0-9]/g,"");n.length>0&&(n.length<10||n.length>15)&&(r.phone="Phone must be 10-15 digits")}if(t||(e.password?e.password.length<8&&(r.password="Password must be at least 8 characters"):r.password="Password is required"),e.maxCashTicketsAllowed!==""&&e.maxCashTicketsAllowed!==null&&e.maxCashTicketsAllowed!==void 0){const n=parseInt(e.maxCashTicketsAllowed,10);isNaN(n)?r.maxCashTicketsAllowed="Must be a valid number":n<0&&(r.maxCashTicketsAllowed="Cannot be negative")}return{isValid:Object.keys(r).length===0,errors:r}};function xce({isOpen:e,onClose:t,onSubmit:r,admin:n=null,isLoading:i=!1,serverError:o=null,validationErrors:d=null}){const g=!!n,[h,x]=N.useState(aO(n)),[y,w]=N.useState({}),[C,_]=N.useState(!1);N.useEffect(()=>{e&&(x(aO(n)),w({}))},[e,n]),N.useEffect(()=>{if(d&&Array.isArray(d)){const U={};d.forEach(z=>{z.field&&(U[z.field]=z.message)}),w(z=>({...z,...U}))}},[d]);const D=U=>{const{name:z,value:L}=U.target;x(H=>{const V={...H,[z]:L};return z==="role"&&L==="SUPER_ADMIN"&&(V.allowedEvents=[]),z==="role"&&(L==="ADMIN"||L==="SUPER_ADMIN")&&(V.maxCashTicketsAllowed=""),V}),y[z]&&w(H=>({...H,[z]:null}))},k=h.role!=="SUPER_ADMIN",M=h.role==="MANAGEMENT_STAFF",R=U=>{x(z=>({...z,access:z.access.includes(U)?z.access.filter(L=>L!==U):[...z.access,U]}))},F=U=>{x(z=>({...z,allowedEvents:U}))},I=async U=>{U.preventDefault();const z=yce(h,g);if(!z.isValid){w(z.errors);return}const L={...h};L.phone=L.phone.replace(/[^0-9]/g,""),g&&!L.password&&delete L.password,g||delete L.status,L.maxCashTicketsAllowed===""||L.maxCashTicketsAllowed===null||L.maxCashTicketsAllowed===void 0?delete L.maxCashTicketsAllowed:L.maxCashTicketsAllowed=parseInt(L.maxCashTicketsAllowed,10),await r(L)},G=()=>{i||t()};return a.createElement(hn,{isOpen:e,onClose:G,title:g?"Edit Admin":"Create New Admin",size:"xl",closeOnOverlayClick:!i},a.createElement("form",{onSubmit:I},o&&a.createElement("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},o),a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1"},"Name ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",id:"name",name:"name",value:h.name,onChange:D,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${y.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter admin name"}),y.name&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.name)),a.createElement("div",null,a.createElement("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1"},"Username ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",id:"username",name:"username",value:h.username,onChange:D,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${y.username?"border-red-500":"border-gray-300"}`,placeholder:"Enter username"}),y.username&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.username)),a.createElement("div",null,a.createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1"},"Email"," ",a.createElement("span",{className:"text-gray-400 text-xs ml-1"},"(optional)")),a.createElement("input",{type:"email",id:"email",name:"email",value:h.email,onChange:D,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${y.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),y.email&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.email)),a.createElement("div",null,a.createElement("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1"},"Phone"," ",a.createElement("span",{className:"text-gray-400 text-xs ml-1"},"(optional)")),a.createElement("input",{type:"tel",id:"phone",name:"phone",value:h.phone,onChange:D,disabled:i,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${y.phone?"border-red-500":"border-gray-300"}`,placeholder:"Enter phone number"}),y.phone&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.phone)),a.createElement("div",null,a.createElement("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1"},"Password ",!g&&a.createElement("span",{className:"text-red-500"},"*"),g&&a.createElement("span",{className:"text-gray-400 text-xs ml-1"},"(leave empty to keep current)")),a.createElement("div",{className:"relative"},a.createElement("input",{type:C?"text":"password",id:"password",name:"password",value:h.password,onChange:D,disabled:i,className:`w-full px-3 py-2 pr-10 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${y.password?"border-red-500":"border-gray-300"}`,placeholder:g?"New password (optional)":"Enter password"}),a.createElement("button",{type:"button",onClick:()=>_(!C),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},C?a.createElement(H_,{className:"h-4 w-4 sm:h-5 sm:w-5"}):a.createElement(rn,{className:"h-4 w-4 sm:h-5 sm:w-5"}))),y.password&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.password)),a.createElement("div",null,a.createElement("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1"},"Role"),a.createElement("select",{id:"role",name:"role",value:h.role,onChange:D,disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100 text-sm sm:text-base"},mce.map(U=>a.createElement("option",{key:U.value,value:U.value},U.label)))),g&&a.createElement("div",null,a.createElement("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),a.createElement("select",{id:"status",name:"status",value:h.status,onChange:D,disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white disabled:bg-gray-100 text-sm sm:text-base"},hce.map(U=>a.createElement("option",{key:U.value,value:U.value},U.label)))),M&&a.createElement("div",null,a.createElement("label",{htmlFor:"maxCashTicketsAllowed",className:"block text-sm font-medium text-gray-700 mb-1"},"Max Cash Tickets Allowed"),a.createElement("input",{type:"number",id:"maxCashTicketsAllowed",name:"maxCashTicketsAllowed",value:h.maxCashTicketsAllowed,onChange:D,disabled:i,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 text-sm sm:text-base ${y.maxCashTicketsAllowed?"border-red-500":"border-gray-300"}`,placeholder:"Enter max tickets or leave empty"}),y.maxCashTicketsAllowed&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},y.maxCashTicketsAllowed),a.createElement("p",{className:"mt-1 text-xs text-gray-500"},"Limit the total number of cash tickets this admin can generate. Leave empty for unlimited."),a.createElement("p",{className:"text-gray-400 text-xs"},"optional, leave empty for unlimited"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Access Permissions"),a.createElement("div",{className:"flex flex-wrap gap-2"},gce.map(U=>a.createElement("label",{key:U.value,className:`inline-flex items-center px-3 py-2 rounded-lg border cursor-pointer transition-colors ${h.access.includes(U.value)?"bg-blue-50 border-blue-500 text-gray-900":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"} ${i?"opacity-50 cursor-not-allowed":""}`},a.createElement("input",{type:"checkbox",checked:h.access.includes(U.value),onChange:()=>R(U.value),disabled:i,className:"sr-only"}),a.createElement("span",{className:"text-sm"},U.label))))),k&&a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Allowed Events",a.createElement("span",{className:"text-gray-400 text-xs ml-2 font-normal"},"(Events this admin can access)")),a.createElement(fI,{selectedIds:h.allowedEvents,onChange:F,disabled:i,placeholder:"Search and select events..."})),!k&&a.createElement("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg"},a.createElement("p",{className:"text-sm text-gray-900"},"Super Admins have access to all events by default."))),a.createElement("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:G,disabled:i,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},i&&a.createElement(Nt,{className:"h-4 w-4 animate-spin"}),g?"Update Admin":"Create Admin"))))}const bce={SUPER_ADMIN:{label:"Super Admin",color:"bg-red-100 text-red-700"},ADMIN:{label:"Admin",color:"bg-purple-100 text-purple-700"},MANAGEMENT_STAFF:{label:"Management",color:"bg-blue-100 text-blue-700"}},vce={ACTIVATED:{label:"Active",color:"bg-green-100 text-green-700"},DEACTIVATED:{label:"Inactive",color:"bg-gray-100 text-gray-700"}},Ece=[{value:"",label:"All Roles"},{value:"SUPER_ADMIN",label:"Super Admin"},{value:"ADMIN",label:"Admin"},{value:"MANAGEMENT_STAFF",label:"Management Staff"}],wce=[{value:"",label:"All Status"},{value:"ACTIVATED",label:"Active"},{value:"DEACTIVATED",label:"Inactive"}];function Nce(){const{admin:e}=Mi(),{admins:t,pagination:r,filters:n,isLoading:i,error:o,fetchAdmins:d,createAdmin:g,updateAdmin:h,deleteAdmin:x,updateFilters:y,changePage:w,clearError:C}=uce(),[_,D]=N.useState(!1),[k,M]=N.useState(!1),[R,F]=N.useState(null),[I,G]=N.useState(!1),[U,z]=N.useState(null),[L,H]=N.useState(null),[V,Q]=N.useState(n.search),Y=N.useCallback(oe=>{Q(oe);const He=setTimeout(()=>{y({search:oe})},300);return()=>clearTimeout(He)},[y]),X=N.useCallback(oe=>{y({role:oe})},[y]),he=N.useCallback(oe=>{y({status:oe})},[y]),xe=N.useCallback(()=>{F(null),z(null),H(null),D(!0)},[]),ae=N.useCallback(oe=>{F(oe),z(null),H(null),D(!0)},[]),ne=N.useCallback(()=>{D(!1),F(null),z(null),H(null)},[]),se=N.useCallback(oe=>{F(oe),M(!0)},[]),Te=N.useCallback(()=>{M(!1),F(null)},[]),we=N.useCallback(async oe=>{G(!0),z(null),H(null);try{let He;R?He=await h(R._id,oe):He=await g(oe),He.success?ne():(z(He.error),He.validationErrors&&H(He.validationErrors))}catch{z("An unexpected error occurred")}finally{G(!1)}},[R,g,h,ne]),te=N.useCallback(async()=>{if(R){G(!0);try{const oe=await x(R._id);oe.success?Te():alert(oe.error||"Failed to delete admin")}catch{alert("An unexpected error occurred")}finally{G(!1)}}},[R,x,Te]),K=N.useCallback(oe=>{if(!oe)return"-";const He=oe.replace(/\D/g,"");return He.length===10?`+91 ${He.slice(0,5)} ${He.slice(5)}`:oe},[]),ee=N.useCallback(oe=>bce[oe]||{label:oe,color:"bg-gray-100 text-gray-700"},[]),fe=N.useCallback(oe=>vce[oe]||{label:oe,color:"bg-gray-100 text-gray-700"},[]),ce=N.useCallback(oe=>e?._id!==oe._id,[e]),Se=N.useMemo(()=>{if(i||o||t.length>0)return null;const oe=n.search||n.role||n.status;return a.createElement("tr",null,a.createElement("td",{colSpan:"5",className:"px-4 sm:px-6 py-12 text-center"},a.createElement("div",{className:"flex flex-col items-center"},a.createElement(Vr,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-300 mb-4"}),a.createElement("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-1"},oe?"No admins found":"No admins yet"),a.createElement("p",{className:"text-sm text-gray-500 mb-4 px-4"},oe?"Try adjusting your search or filter criteria":"Get started by creating a new admin"),!oe&&a.createElement("button",{onClick:xe,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center gap-2 text-sm"},a.createElement(dn,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Create Admin"))))},[i,o,t.length,n,xe]),ie=oe=>{const He=ee(oe.role),ve=fe(oe.status),We=e?._id===oe._id;return a.createElement("div",{key:oe._id,className:`p-4 border-b border-gray-100 ${We?"bg-blue-50/30":""}`},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"flex items-center gap-3 min-w-0 flex-1"},a.createElement("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0"},a.createElement("span",{className:"text-purple-600 font-medium"},oe.name?.charAt(0)?.toUpperCase()||"?")),a.createElement("div",{className:"min-w-0 flex-1"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},oe.name,We&&a.createElement("span",{className:"ml-2 text-xs text-blue-600"},"(You)")),a.createElement("p",{className:"text-sm text-gray-500 truncate"},"@",oe.username))),a.createElement("div",{className:"flex items-center gap-1 flex-shrink-0"},a.createElement("button",{onClick:()=>ae(oe),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit"},a.createElement(da,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>se(oe),disabled:!ce(oe),className:`p-2 rounded-lg transition-all ${ce(oe)?"text-red-600 hover:bg-red-50":"text-gray-300 cursor-not-allowed"}`,title:ce(oe)?"Delete":"Can't delete your own account"},a.createElement(gr,{className:"h-4 w-4"})))),a.createElement("div",{className:"mt-3 flex flex-wrap items-center gap-2"},a.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${He.color}`},He.label),a.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${ve.color}`},ve.label),a.createElement("span",{className:"text-xs text-gray-500"},K(oe.phone)),oe.role==="MANAGEMENT_STAFF"&&oe.maxCashTicketsAllowed!=null&&a.createElement("span",{className:"text-xs text-gray-500"},"Max Tickets: ",oe.maxCashTicketsAllowed)))};return a.createElement("div",{className:"px-2 sm:px-0"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4 sm:mb-6"},a.createElement("div",null,a.createElement("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900"},"Admin Management"),a.createElement("p",{className:"text-sm text-gray-500 mt-0.5 sm:mt-1"},"Manage admin users and their permissions")),a.createElement("button",{onClick:xe,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center justify-center gap-2 text-sm sm:text-base w-full sm:w-auto"},a.createElement(dn,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Create Admin")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-3 sm:p-4 mb-4 sm:mb-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-stretch sm:items-center gap-3 sm:gap-4"},a.createElement("div",{className:"relative flex-1 sm:flex-none sm:w-64 lg:w-80"},a.createElement(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),a.createElement("input",{type:"text",placeholder:"Search by name, username, or phone...",value:V,onChange:oe=>Y(oe.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none text-sm"})),a.createElement("div",{className:"flex items-center gap-2 sm:gap-4"},a.createElement("select",{value:n.role,onChange:oe=>X(oe.target.value),className:"flex-1 sm:flex-none px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white text-sm"},Ece.map(oe=>a.createElement("option",{key:oe.value,value:oe.value},oe.label))),a.createElement("select",{value:n.status,onChange:oe=>he(oe.target.value),className:"flex-1 sm:flex-none px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none bg-white text-sm"},wce.map(oe=>a.createElement("option",{key:oe.value,value:oe.value},oe.label))),a.createElement("button",{onClick:()=>d(r.page),disabled:i,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 flex-shrink-0",title:"Refresh"},a.createElement(Oi,{className:`h-4 w-4 sm:h-5 sm:w-5 ${i?"animate-spin":""}`}))))),o&&a.createElement("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 sm:p-4 mb-4 sm:mb-6 flex items-center gap-3"},a.createElement(Vr,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),a.createElement("p",{className:"text-sm text-red-700 flex-1"},o),a.createElement("button",{onClick:C,className:"text-red-500 hover:text-red-700 text-sm font-medium flex-shrink-0"},"Dismiss")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"hidden md:block overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600"},"Admin"),a.createElement("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600"},"Phone"),a.createElement("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600"},"Role"),a.createElement("th",{className:"text-left px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-4 lg:px-6 py-3 lg:py-4 text-xs lg:text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,i&&t.length===0&&a.createElement("tr",null,a.createElement("td",{colSpan:"5",className:"px-6 py-12 text-center"},a.createElement(Nt,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-2"}),a.createElement("p",{className:"text-gray-500"},"Loading admins..."))),Se,t.map(oe=>{const He=ee(oe.role),ve=fe(oe.status),We=e?._id===oe._id;return a.createElement("tr",{key:oe._id,className:`border-b border-gray-100 hover:bg-gray-50 ${We?"bg-blue-50/30":""}`},a.createElement("td",{className:"px-4 lg:px-6 py-3 lg:py-4"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0"},a.createElement("span",{className:"text-purple-600 font-medium text-sm lg:text-base"},oe.name?.charAt(0)?.toUpperCase()||"?")),a.createElement("div",{className:"min-w-0"},a.createElement("p",{className:"font-medium text-gray-900 text-sm lg:text-base truncate"},oe.name,We&&a.createElement("span",{className:"ml-2 text-xs text-blue-600"},"(You)")),a.createElement("p",{className:"text-xs lg:text-sm text-gray-500 truncate"},"@",oe.username)))),a.createElement("td",{className:"px-4 lg:px-6 py-3 lg:py-4 text-sm text-gray-600"},K(oe.phone)),a.createElement("td",{className:"px-4 lg:px-6 py-3 lg:py-4"},a.createElement("div",{className:"flex flex-col gap-1"},a.createElement("span",{className:`px-2 lg:px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap ${He.color} inline-flex items-center w-fit`},He.label),oe.role==="MANAGEMENT_STAFF"&&oe.maxCashTicketsAllowed!=null&&a.createElement("span",{className:"text-xs text-gray-500"},"Max: ",oe.maxCashTicketsAllowed," tickets"))),a.createElement("td",{className:"px-4 lg:px-6 py-3 lg:py-4"},a.createElement("span",{className:`px-2 lg:px-3 py-1 rounded-full text-xs font-medium ${ve.color}`},ve.label)),a.createElement("td",{className:"px-4 lg:px-6 py-3 lg:py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1 lg:gap-2"},a.createElement("button",{onClick:()=>ae(oe),className:"p-1.5 lg:p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit"},a.createElement(da,{className:"h-4 w-4 lg:h-5 lg:w-5"})),a.createElement("button",{onClick:()=>se(oe),disabled:!ce(oe),className:`p-1.5 lg:p-2 rounded-lg transition-all ${ce(oe)?"text-red-600 hover:bg-red-50":"text-gray-300 cursor-not-allowed"}`,title:ce(oe)?"Delete":"Can't delete your own account"},a.createElement(gr,{className:"h-4 w-4 lg:h-5 lg:w-5"})))))})))),a.createElement("div",{className:"md:hidden"},i&&t.length===0&&a.createElement("div",{className:"px-4 py-12 text-center"},a.createElement(Nt,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-2"}),a.createElement("p",{className:"text-gray-500 text-sm"},"Loading admins...")),!i&&!o&&t.length===0&&a.createElement("div",{className:"px-4 py-12 text-center"},a.createElement(Vr,{className:"h-10 w-10 text-gray-300 mx-auto mb-4"}),a.createElement("h3",{className:"text-base font-medium text-gray-900 mb-1"},n.search||n.role||n.status?"No admins found":"No admins yet"),a.createElement("p",{className:"text-sm text-gray-500 mb-4"},n.search||n.role||n.status?"Try adjusting your search or filter criteria":"Get started by creating a new admin"),!(n.search||n.role||n.status)&&a.createElement("button",{onClick:xe,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors inline-flex items-center gap-2 text-sm"},a.createElement(dn,{className:"h-4 w-4"}),"Create Admin")),t.map(ie)),r.totalPages>0&&a.createElement(Pn,{currentPage:r.page,totalPages:r.totalPages,totalItems:r.total,itemsPerPage:r.limit,onPageChange:w,itemLabel:"admins"})),a.createElement(xce,{isOpen:_,onClose:ne,onSubmit:we,admin:R,isLoading:I,serverError:U,validationErrors:L}),a.createElement(ha,{isOpen:k,onClose:Te,onConfirm:te,title:"Delete Admin",message:`Are you sure you want to delete "${R?.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:I}))}function Sce(){return a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-6"},a.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-4"},"Payment History"),a.createElement("p",{className:"text-gray-600"},"View payment history here."))}const uo={BASE:"/web/offline-cash",ALLOWED_EVENTS:"/web/offline-cash/allowed-events",GET_BY_ID:e=>`/web/offline-cash/${e}`,DELETE:e=>`/web/offline-cash/${e}`,EVENT_ENROLLMENTS:e=>`/web/offline-cash/event/${e}/enrollments`},Nu={getAllowedEvents:async(e={})=>{const t=new URLSearchParams;e.search&&t.append("search",e.search),e.isLive!==void 0&&t.append("isLive",e.isLive);const r=t.toString(),n=r?`${uo.ALLOWED_EVENTS}?${r}`:uo.ALLOWED_EVENTS;console.log("[OfflineCashService] Fetching allowed events with params:",e);const i=await Xe(Ye.get(n));return i.success?console.log("[OfflineCashService] Fetched allowed events:",i.data.events?.length):console.error("[OfflineCashService] Failed to fetch allowed events:",i.message),i},create:async e=>{console.log("[OfflineCashService] Creating offline cash record for phone:",e.phone);const t=await Xe(Ye.post(uo.BASE,e));return t.success?console.log("[OfflineCashService] Record created successfully, link:",t.data.link):console.error("[OfflineCashService] Failed to create record:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.eventId&&t.append("eventId",e.eventId),e.redeemed!==void 0&&e.redeemed!==""&&t.append("redeemed",e.redeemed),e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit);const r=t.toString(),n=r?`${uo.BASE}?${r}`:uo.BASE;console.log("[OfflineCashService] Fetching offline cash records with params:",e);const i=await Xe(Ye.get(n));return i.success?console.log("[OfflineCashService] Fetched records:",i.data.records?.length):console.error("[OfflineCashService] Failed to fetch records:",i.message),i},getById:async e=>{console.log("[OfflineCashService] Fetching record by ID:",e);const t=await Xe(Ye.get(uo.GET_BY_ID(e)));return t.success?console.log("[OfflineCashService] Fetched record:",t.data._id):console.error("[OfflineCashService] Failed to fetch record:",t.message),t},delete:async e=>{console.log("[OfflineCashService] Deleting record:",e);const t=await Xe(Ye.delete(uo.DELETE(e)));return t.success?console.log("[OfflineCashService] Record deleted successfully"):console.error("[OfflineCashService] Failed to delete record:",t.message),t},getEventEnrollments:async(e,t={})=>{const r=new URLSearchParams;t.status&&r.append("status",t.status),t.page&&r.append("page",t.page),t.limit&&r.append("limit",t.limit);const n=r.toString(),i=uo.EVENT_ENROLLMENTS(e),o=n?`${i}?${n}`:i;console.log("[OfflineCashService] Fetching event enrollments:",e,t);const d=await Xe(Ye.get(o));return d.success?console.log("[OfflineCashService] Fetched enrollments:",d.data.enrollments?.length):console.error("[OfflineCashService] Failed to fetch enrollments:",d.message),d}};function Cce(e={}){const[t,r]=N.useState([]),[n,i]=N.useState({total:0,page:1,limit:20,totalPages:0}),[o,d]=N.useState({eventId:"",redeemed:"",...e}),[g,h]=N.useState(!1),[x,y]=N.useState(null),[w,C]=N.useState([]),[_,D]=N.useState(!1),[k,M]=N.useState(null),R=N.useRef(null),F=N.useCallback(async(ae="")=>{D(!0),M(null);try{const ne={};ae&&(ne.search=ae);const se=await Nu.getAllowedEvents(ne);se.success?C(se.data.events||[]):(M(se.message),C([]))}catch{M("Failed to fetch allowed events"),C([])}finally{D(!1)}},[]),I=N.useCallback(ae=>{R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{F(ae)},300)},[F]),G=N.useCallback(async(ae=n.page)=>{h(!0),y(null);try{const ne={page:ae,limit:n.limit,...o.eventId&&{eventId:o.eventId},...o.redeemed!==""&&{redeemed:o.redeemed}},se=await Nu.getAll(ne);se.success?(r(se.data.records||[]),i({total:se.data.pagination?.total||0,page:se.data.pagination?.page||1,limit:se.data.pagination?.limit||20,totalPages:se.data.pagination?.pages||0})):(y(se.message),r([]))}catch{y("Failed to fetch cash ticket records"),r([])}finally{h(!1)}},[o,n.limit]),U=N.useCallback(async ae=>{h(!0),y(null);try{const ne=await Nu.create(ae);return ne.success?(await G(1),{success:!0,data:ne.data}):ne.status===409&&ne.error?.existingLink?{success:!1,error:ne.message,existingLink:ne.error.existingLink,signature:ne.error.signature}:{success:!1,error:ne.message,validationErrors:ne.error}}catch{return{success:!1,error:"Failed to create cash ticket"}}finally{h(!1)}},[G]),z=N.useCallback(async ae=>{try{const ne=await Nu.getById(ae);return ne.success?{success:!0,data:ne.data}:{success:!1,error:ne.message}}catch{return{success:!1,error:"Failed to fetch record details"}}},[]),L=N.useCallback(async ae=>{h(!0),y(null);try{const ne=await Nu.delete(ae);return ne.success?(r(se=>se.filter(Te=>Te._id!==ae)),i(se=>({...se,total:se.total-1,totalPages:Math.ceil((se.total-1)/se.limit)})),{success:!0}):{success:!1,error:ne.message}}catch{return{success:!1,error:"Failed to delete record"}}finally{h(!1)}},[]),H=N.useCallback(async(ae,ne={})=>{try{const se=await Nu.getEventEnrollments(ae,ne);return se.success?{success:!0,data:{enrollments:se.data.enrollments||[],pagination:se.data.pagination}}:{success:!1,error:se.message}}catch{return{success:!1,error:"Failed to fetch enrollments"}}},[]),V=N.useCallback(ae=>{d(ne=>({...ne,...ae}))},[]),Q=N.useCallback(()=>{d({eventId:"",redeemed:"",...e})},[e]),Y=N.useCallback(ae=>{G(ae)},[G]),X=N.useCallback(ae=>{i(ne=>({...ne,limit:ae}))},[]),he=N.useCallback(()=>{y(null)},[]),xe=N.useCallback(()=>{M(null)},[]);return N.useEffect(()=>{G(1)},[o]),N.useEffect(()=>{F()},[F]),N.useEffect(()=>()=>{R.current&&clearTimeout(R.current)},[]),{records:t,pagination:n,filters:o,isLoading:g,error:x,allowedEvents:w,eventsLoading:_,eventsError:k,fetchRecords:G,createRecord:U,getRecordById:z,deleteRecord:L,getEventEnrollments:H,fetchAllowedEvents:F,searchEvents:I,updateFilters:V,resetFilters:Q,changePage:Y,changeLimit:X,clearError:he,clearEventsError:xe}}const Ace=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",Tce=e=>e==null?"":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),sO={TECHNOLOGY:"bg-blue-100 text-gray-900",MUSIC:"bg-purple-100 text-purple-700",SPORTS:"bg-green-100 text-green-700",BUSINESS:"bg-yellow-100 text-yellow-700",EDUCATION:"bg-indigo-100 text-indigo-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",DEFAULT:"bg-gray-100 text-gray-700"};function Oce({selectedId:e="",onChange:t,events:r=[],isLoading:n=!1,onSearch:i,disabled:o=!1,placeholder:d="Select an event...",error:g}){const[h,x]=N.useState(!1),[y,w]=N.useState(""),[C,_]=N.useState(-1),D=N.useRef(null),k=N.useRef(null),M=N.useRef(null),R=N.useMemo(()=>{if(!y.trim())return r;const V=y.toLowerCase();return r.filter(Q=>Q.name.toLowerCase().includes(V)||Q.category?.toLowerCase().includes(V))},[r,y]),F=N.useMemo(()=>r.find(V=>V._id===e),[r,e]);N.useEffect(()=>{const V=Q=>{D.current&&!D.current.contains(Q.target)&&(x(!1),w(""),_(-1))};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]);const I=N.useCallback(V=>{const Q=V.target.value;w(Q),_(-1),i&&i(Q)},[i]),G=N.useCallback(V=>{o||(t(V._id,V),x(!1),w(""),_(-1))},[t,o]),U=N.useCallback(V=>{V.stopPropagation(),!o&&t("",null)},[t,o]),z=N.useCallback(()=>{o||(x(!0),setTimeout(()=>k.current?.focus(),0))},[o]),L=N.useCallback(V=>{if(!h){(V.key==="Enter"||V.key===" "||V.key==="ArrowDown")&&(V.preventDefault(),x(!0));return}switch(V.key){case"Escape":x(!1),w(""),_(-1);break;case"ArrowDown":V.preventDefault(),_(Q=>Q<R.length-1?Q+1:Q);break;case"ArrowUp":V.preventDefault(),_(Q=>Q>0?Q-1:0);break;case"Enter":V.preventDefault(),C>=0&&R[C]&&G(R[C]);break}},[h,R,C,G]);N.useEffect(()=>{if(C>=0&&M.current){const V=M.current.children[C];V&&V.scrollIntoView({block:"nearest"})}},[C]);const H=V=>sO[V]||sO.DEFAULT;return a.createElement("div",{ref:D,className:"relative",onKeyDown:L},a.createElement("div",{onClick:z,className:`min-h-[42px] px-2 sm:px-3 py-2 border rounded-lg cursor-pointer transition-colors ${o?"bg-gray-100 cursor-not-allowed":h?"border-gray-800":g?"border-red-500":"border-gray-300 hover:border-gray-400"}`,tabIndex:o?-1:0,role:"combobox","aria-expanded":h,"aria-haspopup":"listbox"},a.createElement("div",{className:"flex items-center gap-2"},F?a.createElement("div",{className:"flex-1 flex items-center gap-2 min-w-0"},a.createElement("span",{className:"truncate text-sm font-medium text-gray-900"},F.name),F.isLive&&a.createElement("span",{className:"shrink-0 px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded"},"Live"),!o&&a.createElement("button",{type:"button",onClick:U,className:"shrink-0 p-0.5 hover:bg-gray-200 rounded"},a.createElement(zn,{className:"h-4 w-4 text-gray-500"}))):a.createElement("span",{className:"flex-1 text-gray-400 text-sm"},d),a.createElement(Ai,{className:`h-4 w-4 sm:h-5 sm:w-5 text-gray-400 shrink-0 transition-transform ${h?"rotate-180":""}`}))),g&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500 flex items-center gap-1"},a.createElement(Vr,{className:"h-3 w-3 sm:h-4 sm:w-4"}),g),h&&!o&&a.createElement("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg"},a.createElement("div",{className:"p-2 border-b border-gray-200"},a.createElement("div",{className:"relative"},a.createElement(sa,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{ref:k,type:"text",value:y,onChange:I,placeholder:"Search events...",className:"w-full pl-8 sm:pl-9 pr-4 py-2 border border-gray-300 rounded-md focus:border-gray-800 outline-none text-sm"}),n&&a.createElement(Nt,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 animate-spin"}))),a.createElement("div",{className:"px-2 py-1.5 border-b border-gray-200 bg-gray-50"},a.createElement("span",{className:"text-xs text-gray-500"},R.length," event",R.length!==1?"s":""," available")),a.createElement("div",{ref:M,className:"max-h-60 sm:max-h-72 overflow-y-auto",role:"listbox"},R.length===0?a.createElement("div",{className:"px-4 py-6 sm:py-8 text-center text-gray-500 text-sm"},n?a.createElement("div",{className:"flex flex-col items-center gap-2"},a.createElement(Nt,{className:"h-5 w-5 sm:h-6 sm:w-6 animate-spin"}),a.createElement("span",null,"Loading events...")):y?a.createElement("span",null,'No events found for "',y,'"'):a.createElement("span",null,"No events available")):R.map((V,Q)=>{const Y=V._id===e,X=Q===C;return a.createElement("div",{key:V._id,onClick:()=>G(V),className:`px-2 sm:px-3 py-2 sm:py-3 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors ${Y?"bg-blue-50":X?"bg-gray-100":"hover:bg-gray-50"}`,role:"option","aria-selected":Y},a.createElement("div",{className:"flex items-start gap-2 sm:gap-3"},a.createElement("div",{className:`shrink-0 w-4 h-4 sm:w-5 sm:h-5 rounded-full border-2 flex items-center justify-center mt-0.5 ${Y?"bg-gray-800 border-gray-800":"border-gray-300"}`},Y&&a.createElement(Js,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-white"})),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap"},a.createElement("p",{className:"font-medium text-gray-900 text-sm truncate"},V.name),V.isLive&&a.createElement("span",{className:"shrink-0 px-1 sm:px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded"},"Live")),a.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 mt-1 flex-wrap"},V.category&&a.createElement("span",{className:`px-1 sm:px-1.5 py-0.5 text-xs rounded ${H(V.category)}`},V.category),V.startDate&&a.createElement("span",{className:"flex items-center gap-1 text-xs text-gray-500"},a.createElement(Hr,{className:"h-3 w-3"}),Ace(V.startDate)),V.price!==void 0&&a.createElement("span",{className:"text-xs text-gray-600 font-medium"},Tce(V.price))))))}))))}const _ce=e=>e==null?"":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Dce=e=>{const t={};if(e.eventId||(t.eventId="Event is required"),!e.phone.trim())t.phone="Phone number is required";else{const r=e.phone.replace(/[^0-9]/g,"");(r.length<10||r.length>15)&&(t.phone="Phone must be 10-15 digits")}return!e.ticketCount||e.ticketCount<1?t.ticketCount="At least 1 ticket is required":e.ticketCount>100&&(t.ticketCount="Maximum 100 tickets allowed"),e.priceCharged&&e.priceCharged<0&&(t.priceCharged="Price cannot be negative"),{isValid:Object.keys(t).length===0,errors:t}},mv=()=>({eventId:"",phone:"",ticketCount:1,priceCharged:"",notes:""});function kce({isOpen:e,onClose:t,onSubmit:r,isLoading:n=!1,serverError:i=null,existingLinkData:o=null,allowedEvents:d=[],eventsLoading:g=!1,onSearchEvents:h}){const[x,y]=N.useState(mv()),[w,C]=N.useState({}),[_,D]=N.useState(null),[k,M]=N.useState(null),[R,F]=N.useState(!1);N.useEffect(()=>{e&&(y(mv()),C({}),D(null),M(null),F(!1))},[e]),N.useEffect(()=>{o&&M({link:o.existingLink,isExisting:!0})},[o]);const I=N.useCallback(Q=>{const{name:Y,value:X,type:he}=Q.target;let xe=X;he==="number"&&(xe=X===""?"":Number(X)),y(ae=>({...ae,[Y]:xe})),w[Y]&&C(ae=>({...ae,[Y]:null}))},[w]),G=N.useCallback((Q,Y)=>{y(X=>({...X,eventId:Q})),D(Y),Y?.price&&y(X=>({...X,eventId:Q,priceCharged:X.priceCharged||Y.price*(X.ticketCount||1)})),w.eventId&&C(X=>({...X,eventId:null}))},[w.eventId]),U=N.useCallback(Q=>{const Y=Q.target.value===""?"":Number(Q.target.value);y(X=>{const he={...X,ticketCount:Y};return _?.price&&Y&&(he.priceCharged=_.price*Y),he}),w.ticketCount&&C(X=>({...X,ticketCount:null}))},[_,w.ticketCount]),z=N.useCallback(async()=>{if(k?.link)try{await navigator.clipboard.writeText(k.link),F(!0),setTimeout(()=>F(!1),2e3)}catch(Q){console.error("[CashTicketForm] Failed to copy:",Q)}},[k]),L=async Q=>{Q.preventDefault();const Y=Dce(x);if(!Y.isValid){C(Y.errors);return}const X={eventId:x.eventId,phone:x.phone.replace(/[^0-9]/g,""),ticketCount:Number(x.ticketCount)};x.priceCharged!==""&&x.priceCharged!==null&&(X.priceCharged=Number(x.priceCharged)),x.notes.trim()&&(X.notes=x.notes.trim());const he=await r(X);he?.success&&he.data&&M({link:he.data.link,isExisting:!1,ticketCount:he.data.ticketCount,event:he.data.event,phone:he.data.phone})},H=N.useCallback(()=>{n||t()},[n,t]),V=N.useCallback(()=>{y(mv()),D(null),M(null),F(!1),C({})},[]);return a.createElement(hn,{isOpen:e,onClose:H,title:k?"Ticket Link Generated":"Generate Cash Ticket Link",size:"xl",closeOnOverlayClick:!n},k?a.createElement("div",{className:"space-y-4"},k.isExisting&&a.createElement("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-2"},a.createElement(Vr,{className:"h-5 w-5 text-yellow-600 shrink-0 mt-0.5"}),a.createElement("div",null,a.createElement("p",{className:"text-sm font-medium text-yellow-800"},"Existing Link Found"),a.createElement("p",{className:"text-sm text-yellow-700 mt-0.5"},"An unredeemed ticket link already exists for this phone and event."))),!k.isExisting&&a.createElement("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg"},a.createElement("p",{className:"text-sm font-medium text-green-800"},"Success!"),a.createElement("p",{className:"text-sm text-green-700 mt-0.5"},"Cash ticket link has been generated successfully.")),k.event&&a.createElement("div",{className:"p-3 bg-gray-50 rounded-lg space-y-1"},a.createElement("p",{className:"text-sm"},a.createElement("span",{className:"text-gray-500"},"Event:")," ",a.createElement("span",{className:"font-medium text-gray-900"},k.event.name)),a.createElement("p",{className:"text-sm"},a.createElement("span",{className:"text-gray-500"},"Phone:")," ",a.createElement("span",{className:"font-medium text-gray-900"},k.phone)),a.createElement("p",{className:"text-sm"},a.createElement("span",{className:"text-gray-500"},"Tickets:")," ",a.createElement("span",{className:"font-medium text-gray-900"},k.ticketCount))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Redemption Link"),a.createElement("div",{className:"flex gap-2"},a.createElement("input",{type:"text",value:k.link,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-700 truncate"}),a.createElement("button",{type:"button",onClick:z,className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 shrink-0 ${R?"bg-green-600 text-white":"bg-gray-800 text-white hover:bg-gray-900"}`},R?a.createElement(a.Fragment,null,a.createElement(Js,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"Copied!")):a.createElement(a.Fragment,null,a.createElement(lg,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"Copy"))),a.createElement("a",{href:k.link,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 shrink-0"},a.createElement(m2,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"Open")))),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:H,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Close"),a.createElement("button",{type:"button",onClick:V,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Create Another"))):a.createElement("form",{onSubmit:L,className:"space-y-4"},i&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},a.createElement(Vr,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},i)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Event ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement(Oce,{selectedId:x.eventId,onChange:G,events:d,isLoading:g,onSearch:h,disabled:n,placeholder:"Search and select an event...",error:w.eventId})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Phone Number ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"tel",name:"phone",value:x.phone,onChange:I,disabled:n,placeholder:"Enter customer phone number",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${w.phone?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),w.phone&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},w.phone)),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Number of Tickets ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",name:"ticketCount",value:x.ticketCount,onChange:U,disabled:n,min:"1",max:"100",placeholder:"1",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${w.ticketCount?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),w.ticketCount&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},w.ticketCount)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Price Charged (INR) ",a.createElement("span",{className:"text-gray-400"},"(Optional)")),a.createElement("input",{type:"number",name:"priceCharged",value:x.priceCharged,onChange:I,disabled:n,min:"0",placeholder:"0",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${w.priceCharged?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),w.priceCharged&&a.createElement("p",{className:"mt-1 text-xs sm:text-sm text-red-500"},w.priceCharged),_?.price&&a.createElement("p",{className:"mt-1 text-xs text-gray-500"},"Base price: ",_ce(_.price),"/ticket"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Notes ",a.createElement("span",{className:"text-gray-400"},"(Optional)")),a.createElement("textarea",{name:"notes",value:x.notes,onChange:I,disabled:n,rows:2,placeholder:"Add any notes about this transaction",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none transition-colors resize-none ${n?"bg-gray-100":""}`})),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:H,disabled:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},n&&a.createElement(Nt,{className:"h-4 w-4 animate-spin"}),"Generate Link"))))}const Dh=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Mce=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);function kh({icon:e,label:t,value:r,className:n=""}){return a.createElement("div",{className:`flex items-start gap-3 ${n}`},a.createElement("div",{className:"shrink-0 w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center"},a.createElement(e,{className:"h-4 w-4 text-gray-600"})),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-xs text-gray-500"},t),a.createElement("p",{className:"text-sm font-medium text-gray-900 break-words"},r||"-")))}function Pce({isOpen:e,onClose:t,record:r,isLoading:n=!1}){const[i,o]=N.useState(!1);N.useEffect(()=>{e||o(!1)},[e]);const d=N.useCallback(async()=>{if(r?.link)try{await navigator.clipboard.writeText(r.link),o(!0),setTimeout(()=>o(!1),2e3)}catch(g){console.error("[CashTicketDetailsModal] Failed to copy:",g)}},[r?.link]);return a.createElement(hn,{isOpen:e,onClose:t,title:"Cash Ticket Details",size:"lg"},n?a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading details...")):r?a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ${r.redeemed?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`},r.redeemed?a.createElement(a.Fragment,null,a.createElement(Nl,{className:"h-4 w-4"}),"Redeemed"):a.createElement(a.Fragment,null,a.createElement(Cn,{className:"h-4 w-4"}),"Pending Redemption")),r.redeemedAt&&a.createElement("span",{className:"text-xs text-gray-500"},Dh(r.redeemedAt))),a.createElement("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100"},a.createElement("div",{className:"flex items-start gap-3"},a.createElement("div",{className:"shrink-0 w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},a.createElement(Hr,{className:"h-5 w-5 text-gray-800"})),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-xs text-gray-800 font-medium"},"Event"),a.createElement("p",{className:"text-base font-semibold text-gray-900 truncate"},r.eventId?.name||"Unknown Event"),r.eventId?.startDate&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},Dh(r.eventId.startDate),r.eventId?.endDate&&` - ${Dh(r.eventId.endDate)}`)))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement(kh,{icon:cg,label:"Phone Number",value:r.generatedFor}),a.createElement(kh,{icon:Ou,label:"Ticket Count",value:`${r.ticketCount} ticket${r.ticketCount!==1?"s":""}`}),a.createElement(kh,{icon:wU,label:"Price Charged",value:Mce(r.priceCharged)}),a.createElement(kh,{icon:Cn,label:"Created At",value:Dh(r.createdAt)})),r.generatedBy&&a.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},a.createElement("p",{className:"text-xs text-gray-500 mb-1"},"Generated By"),a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center"},a.createElement(No,{className:"h-4 w-4 text-gray-600"})),a.createElement("div",null,a.createElement("p",{className:"text-sm font-medium text-gray-900"},r.generatedBy.name||"Unknown"),a.createElement("p",{className:"text-xs text-gray-500"},r.generatedBy.email)))),r.notes&&a.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},a.createElement("div",{className:"flex items-center gap-2 mb-2"},a.createElement(q_,{className:"h-4 w-4 text-gray-500"}),a.createElement("p",{className:"text-xs text-gray-500 font-medium"},"Notes")),a.createElement("p",{className:"text-sm text-gray-700"},r.notes)),!r.redeemed&&r.link&&a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Redemption Link"),a.createElement("div",{className:"flex gap-2"},a.createElement("input",{type:"text",value:r.link,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm text-gray-700 truncate"}),a.createElement("button",{type:"button",onClick:d,className:`px-3 py-2 rounded-lg transition-colors flex items-center gap-1.5 shrink-0 ${i?"bg-green-600 text-white":"bg-gray-800 text-white hover:bg-gray-900"}`},i?a.createElement(a.Fragment,null,a.createElement(Js,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline text-sm"},"Copied!")):a.createElement(a.Fragment,null,a.createElement(lg,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline text-sm"},"Copy"))),a.createElement("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-1.5 shrink-0"},a.createElement(m2,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline text-sm"},"Open")))),r.signature&&a.createElement("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200"},a.createElement("span",{className:"text-xs text-gray-400"},"Signature"),a.createElement("code",{className:"text-xs font-mono text-gray-500 bg-gray-100 px-2 py-1 rounded"},r.signature)),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:t,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium"},"Close"))):a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(Mc,{className:"h-12 w-12 text-gray-300"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No record data available")))}const iO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",lO=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Mh={redeemed:"bg-green-100 text-green-700",pending:"bg-yellow-100 text-yellow-700"};function Rce(){const{admin:e}=Mi(),{records:t,pagination:r,filters:n,isLoading:i,error:o,allowedEvents:d,eventsLoading:g,fetchRecords:h,createRecord:x,getRecordById:y,deleteRecord:w,searchEvents:C,updateFilters:_,changePage:D,clearError:k}=Cce(),M=N.useMemo(()=>e?.role==="ADMIN"||e?.role==="SUPER_ADMIN",[e?.role]),R=N.useMemo(()=>e?.role==="MANAGEMENT_STAFF"?t.filter(Be=>Be.generatedBy?._id===e._id):t,[t,e?.role,e?._id]),[F,I]=N.useState(!1),[G,U]=N.useState(!1),[z,L]=N.useState(!1),[H,V]=N.useState(null),[Q,Y]=N.useState(!1),[X,he]=N.useState(!1),[xe,ae]=N.useState(null),[ne,se]=N.useState(null),[Te,we]=N.useState(null),[te,K]=N.useState(!1),[ee,fe]=N.useState(n.eventId||""),[ce,Se]=N.useState(n.redeemed||""),ie=N.useCallback(()=>{ae(null),se(null),I(!0)},[]),oe=N.useCallback(()=>{I(!1),ae(null),se(null)},[]),He=N.useCallback(async Be=>{he(!0),ae(null),se(null);try{const St=await x(Be);return St.success?St:St.existingLink?(se({existingLink:St.existingLink,signature:St.signature}),{success:!1}):(ae(St.error||"Failed to create cash ticket"),{success:!1})}catch{return ae("An unexpected error occurred"),{success:!1}}finally{he(!1)}},[x]),ve=N.useCallback(async Be=>{V(Be),U(!0),Y(!0);try{const St=await y(Be._id);St.success&&V(St.data)}catch(St){console.error("[CashTickets] Failed to fetch details:",St)}finally{Y(!1)}},[y]),We=N.useCallback(()=>{U(!1),V(null)},[]),be=N.useCallback(Be=>{V(Be),L(!0)},[]),ye=N.useCallback(()=>{L(!1),V(null)},[]),je=N.useCallback(async()=>{if(H){he(!0);try{const Be=await w(H._id);Be.success?ye():alert(Be.error||"Failed to delete record")}catch{alert("An unexpected error occurred")}finally{he(!1)}}},[H,w,ye]),Ze=N.useCallback(async(Be,St)=>{try{await navigator.clipboard.writeText(Be),we(St),setTimeout(()=>we(null),2e3)}catch(pt){console.error("[CashTickets] Failed to copy:",pt)}},[]),Ie=N.useCallback(()=>{_({eventId:ee,redeemed:ce}),K(!1)},[ee,ce,_]),ut=N.useCallback(()=>{fe(""),Se(""),_({eventId:"",redeemed:""}),K(!1)},[_]),Le=N.useCallback(()=>{h(r.page)},[h,r.page]),et=N.useMemo(()=>n.eventId||n.redeemed!=="",[n]),mt=N.useMemo(()=>R.reduce((Be,St)=>Be+(St.ticketCount||0),0),[R]),Er=N.useMemo(()=>e?.role==="MANAGEMENT_STAFF"&&e?.maxCashTicketsAllowed!=null,[e?.role,e?.maxCashTicketsAllowed]),tt=N.useMemo(()=>Er?Math.min(100,mt/e.maxCashTicketsAllowed*100):0,[Er,mt,e?.maxCashTicketsAllowed]),nt=tt>=80,Re=mt>=e?.maxCashTicketsAllowed;return a.createElement("div",{className:"space-y-4 sm:space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900"},"Cash Tickets"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Generate and manage offline cash payment ticket links")),a.createElement("button",{onClick:ie,disabled:Re,className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg transition-colors font-medium ${Re?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-800 text-white hover:bg-gray-900"}`,title:Re?"Ticket limit reached":"Generate new ticket link"},a.createElement(dn,{className:"h-5 w-5"}),a.createElement("span",null,"Generate Link"))),Er&&a.createElement("div",{className:`p-4 rounded-xl border ${Re?"bg-red-50 border-red-200":nt?"bg-yellow-50 border-yellow-200":"bg-blue-50 border-blue-200"}`},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"flex items-center gap-2 mb-2"},a.createElement(Ou,{className:`h-5 w-5 ${Re?"text-red-600":nt?"text-yellow-600":"text-gray-800"}`}),a.createElement("h3",{className:`font-medium ${Re?"text-red-800":nt?"text-yellow-800":"text-blue-800"}`},"Ticket Generation Limit")),a.createElement("p",{className:`text-sm ${Re?"text-red-700":nt?"text-yellow-700":"text-blue-700"}`},Re?a.createElement(a.Fragment,null,"You have reached your maximum ticket limit. Contact your administrator to increase your limit."):a.createElement(a.Fragment,null,"You have created"," ",a.createElement("span",{className:"font-semibold"},mt," of ",e.maxCashTicketsAllowed)," ","tickets (",e.maxCashTicketsAllowed-mt," remaining)"))),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"text-right"},a.createElement("div",{className:`text-2xl font-bold ${Re?"text-red-700":nt?"text-yellow-700":"text-blue-700"}`},mt),a.createElement("div",{className:`text-xs ${Re?"text-red-600":nt?"text-yellow-600":"text-gray-800"}`},"of ",e.maxCashTicketsAllowed)))),a.createElement("div",{className:"mt-3"},a.createElement("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden"},a.createElement("div",{className:`h-full transition-all duration-300 ${Re?"bg-red-600":nt?"bg-yellow-500":"bg-blue-600"}`,style:{width:`${tt}%`}})))),o&&a.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},a.createElement(Vr,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("div",{className:"flex-1"},a.createElement("p",{className:"text-sm font-medium text-red-800"},"Error loading records"),a.createElement("p",{className:"text-sm text-red-700 mt-0.5"},o)),a.createElement("button",{onClick:k,className:"shrink-0 text-red-600 hover:text-red-800"},"")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},a.createElement("button",{onClick:()=>K(!te),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${et?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},a.createElement(Ti,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),et&&a.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(n.eventId?1:0)+(n.redeemed!==""?1:0)),a.createElement(Ai,{className:`h-4 w-4 transition-transform ${te?"rotate-180":""}`})),a.createElement("button",{onClick:Le,disabled:i,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},a.createElement(Oi,{className:`h-4 w-4 ${i?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"ml-auto text-sm text-gray-500"},r.total," record",r.total!==1?"s":""," total")),te&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Event"),a.createElement("select",{value:ee,onChange:Be=>fe(Be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Events"),d.map(Be=>a.createElement("option",{key:Be._id,value:Be._id},Be.name)))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),a.createElement("select",{value:ce,onChange:Be=>Se(Be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"false"},"Pending"),a.createElement("option",{value:"true"},"Redeemed"))),a.createElement("div",{className:"flex items-end gap-2 sm:col-span-2 lg:col-span-1"},a.createElement("button",{onClick:Ie,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),a.createElement("button",{onClick:ut,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),a.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Event"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Phone"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Details"),M&&a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Created By"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,i&&R.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:M?6:5,className:"px-6 py-12 text-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading records..."))):R.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:M?6:5,className:"px-6 py-12 text-center"},a.createElement(Ou,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No records found"),a.createElement("button",{onClick:ie,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Generate your first ticket link"))):R.map(Be=>a.createElement("tr",{key:Be._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center shrink-0"},a.createElement(Hr,{className:"h-4 w-4 text-gray-800"})),a.createElement("span",{className:"font-medium text-gray-900 truncate max-w-[200px]"},Be.eventId?.name||"Unknown Event"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-600"},a.createElement(cg,{className:"h-4 w-4 text-gray-400"}),Be.generatedFor)),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex flex-col"},a.createElement("span",{className:"text-gray-900 font-medium"},Be.ticketCount," x ",lO(Be.priceCharged)),a.createElement("span",{className:"text-xs text-gray-500 mt-0.5"},iO(Be.createdAt)))),M&&a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex flex-col"},a.createElement("span",{className:"text-gray-900 font-medium"},Be.generatedBy?.name||"-"),(Be.generatedBy?.email||Be.generatedBy?.phone)&&a.createElement("span",{className:"text-xs text-gray-500 mt-0.5"},Be.generatedBy?.email||Be.generatedBy?.phone))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Be.redeemed?Mh.redeemed:Mh.pending}`},Be.redeemed?"Redeemed":"Pending")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},!Be.redeemed&&Be.link&&a.createElement("button",{onClick:()=>Ze(Be.link,Be._id),className:`p-2 rounded-lg transition-colors ${Te===Be._id?"text-green-600 bg-green-50":"text-gray-600 hover:bg-gray-100"}`,title:"Copy link"},Te===Be._id?a.createElement(Js,{className:"h-4 w-4"}):a.createElement(lg,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>ve(Be),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},a.createElement(rn,{className:"h-4 w-4"})),!Be.redeemed&&a.createElement("button",{onClick:()=>be(Be),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},a.createElement(gr,{className:"h-4 w-4"}))))))))),r.totalPages>0&&a.createElement(Pn,{currentPage:r.page,totalPages:r.totalPages,totalItems:r.total,itemsPerPage:r.limit,onPageChange:D,itemLabel:"records"})),a.createElement("div",{className:"md:hidden space-y-4"},i&&R.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading records...")):R.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Ou,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No records found"),a.createElement("button",{onClick:ie,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Generate your first ticket link")):a.createElement(a.Fragment,null,R.map(Be=>a.createElement("div",{key:Be._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"flex items-center gap-2 min-w-0"},a.createElement("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center shrink-0"},a.createElement(Hr,{className:"h-5 w-5 text-gray-800"})),a.createElement("div",{className:"min-w-0"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},Be.eventId?.name||"Unknown Event"),a.createElement("p",{className:"text-xs text-gray-500"},iO(Be.createdAt)))),a.createElement("span",{className:`shrink-0 px-2.5 py-1 rounded-full text-xs font-medium ${Be.redeemed?Mh.redeemed:Mh.pending}`},Be.redeemed?"Redeemed":"Pending")),a.createElement("div",{className:"grid grid-cols-2 gap-3 text-sm"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(cg,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-gray-600"},Be.generatedFor)),a.createElement("div",{className:"flex items-center gap-2"},a.createElement(Ou,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-gray-600"},Be.ticketCount," x ",lO(Be.priceCharged)))),M&&a.createElement("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100"},a.createElement("span",{className:"text-sm text-gray-500"},"Created By"),a.createElement("div",{className:"flex flex-col items-end"},a.createElement("span",{className:"text-sm font-medium text-gray-900"},Be.generatedBy?.name||"-"),(Be.generatedBy?.email||Be.generatedBy?.phone)&&a.createElement("span",{className:"text-xs text-gray-500"},Be.generatedBy?.email||Be.generatedBy?.phone))),a.createElement("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100"},!Be.redeemed&&Be.link&&a.createElement("button",{onClick:()=>Ze(Be.link,Be._id),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Te===Be._id?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},Te===Be._id?a.createElement(a.Fragment,null,a.createElement(Js,{className:"h-4 w-4"}),"Copied!"):a.createElement(a.Fragment,null,a.createElement(lg,{className:"h-4 w-4"}),"Copy Link")),a.createElement("button",{onClick:()=>ve(Be),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},a.createElement(rn,{className:"h-4 w-4"}),"Details"),!Be.redeemed&&a.createElement("button",{onClick:()=>be(Be),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},a.createElement(gr,{className:"h-4 w-4"}))))),r.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Pn,{currentPage:r.page,totalPages:r.totalPages,totalItems:r.total,itemsPerPage:r.limit,onPageChange:D,itemLabel:"records"})))),a.createElement(kce,{isOpen:F,onClose:oe,onSubmit:He,isLoading:X,serverError:xe,existingLinkData:ne,allowedEvents:d,eventsLoading:g,onSearchEvents:C}),a.createElement(Pce,{isOpen:G,onClose:We,record:H,isLoading:Q}),a.createElement(ha,{isOpen:z,onClose:ye,onConfirm:je,title:"Delete Cash Ticket",message:`Are you sure you want to delete this cash ticket for ${H?.generatedFor}? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:X}))}const Gs={BASE:"/web/vouchers",GET_BY_ID:e=>`/web/vouchers/${e}`,UPDATE:e=>`/web/vouchers/${e}`,DELETE:e=>`/web/vouchers/${e}`,ENABLE:e=>`/web/vouchers/${e}/enable`,DISABLE:e=>`/web/vouchers/${e}/disable`,DELETED:"/web/vouchers/deleted",RESTORE:e=>`/web/vouchers/${e}/restore`,PERMANENT_DELETE:e=>`/web/vouchers/${e}/permanent`},oc={create:async e=>{console.log("[VoucherService] Creating voucher with code:",e.code);const t=await Xe(Ye.post(Gs.BASE,e));return t.success?console.log("[VoucherService] Voucher created successfully:",t.data.voucher?._id):console.error("[VoucherService] Failed to create voucher:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.isActive!==void 0&&e.isActive!==""&&t.append("isActive",e.isActive),e.search&&t.append("search",e.search);const r=t.toString(),n=r?`${Gs.BASE}?${r}`:Gs.BASE;console.log("[VoucherService] Fetching vouchers with params:",e);const i=await Xe(Ye.get(n));return i.success?console.log("[VoucherService] Fetched vouchers:",i.data.vouchers?.length):console.error("[VoucherService] Failed to fetch vouchers:",i.message),i},getById:async e=>{console.log("[VoucherService] Fetching voucher by ID:",e);const t=await Xe(Ye.get(Gs.GET_BY_ID(e)));return t.success?console.log("[VoucherService] Fetched voucher:",t.data.voucher?._id):console.error("[VoucherService] Failed to fetch voucher:",t.message),t},update:async(e,t)=>{console.log("[VoucherService] Updating voucher:",e);const r=await Xe(Ye.put(Gs.UPDATE(e),t));return r.success?console.log("[VoucherService] Voucher updated successfully"):console.error("[VoucherService] Failed to update voucher:",r.message),r},enable:async e=>{console.log("[VoucherService] Enabling voucher:",e);const t=await Xe(Ye.post(Gs.ENABLE(e)));return t.success?console.log("[VoucherService] Voucher enabled successfully"):console.error("[VoucherService] Failed to enable voucher:",t.message),t},disable:async e=>{console.log("[VoucherService] Disabling voucher:",e);const t=await Xe(Ye.post(Gs.DISABLE(e)));return t.success?console.log("[VoucherService] Voucher disabled successfully"):console.error("[VoucherService] Failed to disable voucher:",t.message),t},delete:async e=>{console.log("[VoucherService] Deleting voucher:",e);const t=await Xe(Ye.delete(Gs.DELETE(e)));return t.success?console.log("[VoucherService] Voucher deleted successfully"):console.error("[VoucherService] Failed to delete voucher:",t.message),t},getDeleted:async()=>{console.log("[VoucherService] Fetching deleted vouchers");const e=await Xe(Ye.get(Gs.DELETED));return e.success?console.log("[VoucherService] Fetched deleted vouchers:",e.data.vouchers?.length):console.error("[VoucherService] Failed to fetch deleted vouchers:",e.message),e},restore:async e=>{console.log("[VoucherService] Restoring voucher:",e);const t=await Xe(Ye.post(Gs.RESTORE(e)));return t.success?console.log("[VoucherService] Voucher restored successfully"):console.error("[VoucherService] Failed to restore voucher:",t.message),t},permanentDelete:async e=>{console.log("[VoucherService] Permanently deleting voucher:",e);const t=await Xe(Ye.delete(Gs.PERMANENT_DELETE(e)));return t.success?console.log("[VoucherService] Voucher permanently deleted"):console.error("[VoucherService] Failed to permanently delete voucher:",t.message),t}};function Ice(e={}){const[t,r]=N.useState([]),[n,i]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[o,d]=N.useState({search:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e}),[g,h]=N.useState(!1),[x,y]=N.useState(null),w=N.useRef(null),C=N.useCallback(async(H=n.currentPage)=>{h(!0),y(null);try{const V={page:H,limit:n.limit,sortBy:o.sortBy,sortOrder:o.sortOrder,...o.search&&{search:o.search},...o.isActive!==""&&{isActive:o.isActive}},Q=await oc.getAll(V);Q.success?(r(Q.data.vouchers||[]),i({currentPage:Q.data.pagination?.currentPage||1,totalPages:Q.data.pagination?.totalPages||0,totalCount:Q.data.pagination?.totalCount||0,limit:Q.data.pagination?.limit||10})):(y(Q.message),r([]))}catch{y("Failed to fetch vouchers"),r([])}finally{h(!1)}},[o,n.limit]),_=N.useCallback(async H=>{try{const V=await oc.create(H);return V.success?(await C(1),{success:!0,data:V.data}):{success:!1,error:V.message,validationErrors:V.error}}catch{return{success:!1,error:"Failed to create voucher"}}},[C]),D=N.useCallback(async H=>{try{const V=await oc.getById(H);return V.success?{success:!0,data:V.data.voucher}:{success:!1,error:V.message}}catch{return{success:!1,error:"Failed to fetch voucher details"}}},[]),k=N.useCallback(async(H,V)=>{try{const Q=await oc.update(H,V);return Q.success?(r(Y=>Y.map(X=>X._id===H?{...X,...Q.data.voucher}:X)),{success:!0,data:Q.data}):{success:!1,error:Q.message,validationErrors:Q.error}}catch{return{success:!1,error:"Failed to update voucher"}}},[]),M=N.useCallback(async(H,V)=>{try{const Q=V?await oc.disable(H):await oc.enable(H);return Q.success?(r(Y=>Y.map(X=>X._id===H?{...X,isActive:!V}:X)),{success:!0}):{success:!1,error:Q.message}}catch{return{success:!1,error:"Failed to update voucher status"}}},[]),R=N.useCallback(async H=>{try{const V=await oc.delete(H);return V.success?(r(Q=>Q.filter(Y=>Y._id!==H)),i(Q=>({...Q,totalCount:Q.totalCount-1,totalPages:Math.ceil((Q.totalCount-1)/Q.limit)})),{success:!0}):{success:!1,error:V.message}}catch{return{success:!1,error:"Failed to delete voucher"}}},[]),F=N.useCallback(H=>{w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{d(V=>({...V,search:H}))},300)},[]),I=N.useCallback(H=>{d(V=>({...V,...H}))},[]),G=N.useCallback(()=>{d({search:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),U=N.useCallback(H=>{C(H)},[C]),z=N.useCallback(H=>{i(V=>({...V,limit:H}))},[]),L=N.useCallback(()=>{y(null)},[]);return N.useEffect(()=>{C(1)},[o]),N.useEffect(()=>()=>{w.current&&clearTimeout(w.current)},[]),{vouchers:t,pagination:n,filters:o,isLoading:g,error:x,fetchVouchers:C,createVoucher:_,getVoucherById:D,updateVoucher:k,toggleVoucherStatus:M,deleteVoucher:R,searchVouchers:F,updateFilters:I,resetFilters:G,changePage:U,changeLimit:z,clearError:L}}const oO=()=>({title:"",description:"",code:"",maxUsage:"",events:[],isActive:!0});function Lce({isOpen:e,onClose:t,onSubmit:r,isLoading:n=!1,serverError:i=null,voucherToEdit:o=null}){const[d,g]=N.useState(oO()),[h,x]=N.useState({}),y=!!o;N.useEffect(()=>{e&&(g(o?{title:o.title||"",description:o.description||"",code:o.code||"",maxUsage:o.maxUsage?.toString()||"",events:o.events?.map(M=>M._id||M)||[],isActive:o.isActive??!0}:oO()),x({}))},[e,o]);const w=M=>{const R={};if(M.title.trim()?M.title.length>100&&(R.title="Title must be less than 100 characters"):R.title="Title is required",M.description.trim()?M.description.length>500&&(R.description="Description must be less than 500 characters"):R.description="Description is required",M.code.trim()?/^[A-Z0-9_-]+$/i.test(M.code)?M.code.length>20&&(R.code="Code must be less than 20 characters"):R.code="Code can only contain letters, numbers, hyphens, and underscores":R.code="Voucher code is required",!M.maxUsage)R.maxUsage="Maximum usage is required";else{const F=parseInt(M.maxUsage,10);isNaN(F)||F<1?R.maxUsage="Maximum usage must be at least 1":F>1e6&&(R.maxUsage="Maximum usage cannot exceed 1,000,000")}return{isValid:Object.keys(R).length===0,errors:R}},C=(M,R)=>{g(F=>({...F,[M]:R})),h[M]&&x(F=>{const I={...F};return delete I[M],I})},_=M=>{C("code",M.toUpperCase())},D=M=>{C("events",M)},k=async M=>{M.preventDefault();const{isValid:R,errors:F}=w(d);if(!R){x(F);return}const I={title:d.title.trim(),description:d.description.trim(),code:d.code.trim().toUpperCase(),maxUsage:parseInt(d.maxUsage,10),isActive:d.isActive};d.events.length>0&&(I.events=d.events),(await r(I))?.success&&t()};return a.createElement(hn,{isOpen:e,onClose:t,title:y?"Edit Voucher":"Create Voucher",size:"lg"},a.createElement("form",{onSubmit:k,className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Title ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:d.title,onChange:M=>C("title",M.target.value),placeholder:"e.g., Festival Food Court Discount",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.title&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.title)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Description ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("textarea",{value:d.description,onChange:M=>C("description",M.target.value),placeholder:"e.g., Get Rs.200 off at the food court for first 1500 buyers",rows:3,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${h.description?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.description&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.description)),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Voucher Code ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:d.code,onChange:M=>_(M.target.value),placeholder:"e.g., FESTIVAL200",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none font-mono uppercase transition-colors ${h.code?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.code&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.code)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Maximum Usage ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",value:d.maxUsage,onChange:M=>C("maxUsage",M.target.value),placeholder:"e.g., 1500",min:"1",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.maxUsage?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.maxUsage&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.maxUsage))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Linked Events",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement(fI,{selectedIds:d.events,onChange:D,disabled:n,placeholder:"Select events to link this voucher..."}),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Leave empty to make the voucher available for all events")),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:d.isActive,onChange:M=>C("isActive",M.target.checked),disabled:n,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800"})),a.createElement("span",{className:"text-sm text-gray-700"},d.isActive?"Active":"Disabled")),i&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},a.createElement(Vr,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},i)),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:t,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50"},n?a.createElement(a.Fragment,null,a.createElement(Nt,{className:"h-4 w-4 animate-spin"}),a.createElement("span",null,y?"Updating...":"Creating...")):a.createElement("span",null,y?"Update Voucher":"Create Voucher")))))}const cO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Bce=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,Fce=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500";function Uce({isOpen:e,onClose:t,voucher:r,isLoading:n=!1}){if(!r&&!n)return null;const i=r?Bce(r.usageCount||0,r.maxUsage):0;return a.createElement(hn,{isOpen:e,onClose:t,title:"Voucher Details",size:"lg"},n?a.createElement("div",{className:"py-12 flex flex-col items-center justify-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading voucher details...")):r?a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex items-start justify-between gap-4 pb-4 border-b border-gray-200"},a.createElement("div",null,a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},r.title),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},r.description)),a.createElement("span",{className:`shrink-0 px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1.5 ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isActive?a.createElement(Nl,{className:"h-4 w-4"}):a.createElement(Mc,{className:"h-4 w-4"}),r.isActive?"Active":"Disabled")),a.createElement("div",{className:"bg-blue-50 rounded-lg p-4"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},a.createElement(Lf,{className:"h-5 w-5 text-gray-800"})),a.createElement("div",null,a.createElement("p",{className:"text-xs text-gray-800 font-medium uppercase"},"Voucher Code"),a.createElement("p",{className:"text-xl font-bold text-blue-900 font-mono tracking-wider"},r.code)))),a.createElement("div",null,a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("span",{className:"text-sm font-medium text-gray-700"},"Usage Progress"),a.createElement("span",{className:"text-sm text-gray-500"},r.usageCount||0," / ",r.maxUsage," claimed")),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},a.createElement("div",{className:`h-3 rounded-full transition-all ${Fce(i)}`,style:{width:`${i}%`}})),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},i,"% used (",r.maxUsage-(r.usageCount||0)," remaining)")),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(h2,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Maximum Usage")),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},r.maxUsage?.toLocaleString("en-IN"))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(fm,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Times Used")),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},(r.usageCount||0).toLocaleString("en-IN"))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(Cn,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Created")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},cO(r.createdAt))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(Cn,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Last Updated")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},cO(r.updatedAt)))),r.createdBy&&a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(No,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Created By")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},r.createdBy.name||r.createdBy.email),r.createdBy.email&&r.createdBy.name&&a.createElement("p",{className:"text-xs text-gray-500"},r.createdBy.email)),r.events&&r.events.length>0&&a.createElement("div",null,a.createElement("div",{className:"flex items-center gap-2 mb-2"},a.createElement(Hr,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-sm font-medium text-gray-700"},"Linked Events")),a.createElement("div",{className:"flex flex-wrap gap-2"},r.events.map(o=>a.createElement("span",{key:o._id||o,className:"px-3 py-1.5 bg-blue-100 text-gray-900 rounded-full text-sm font-medium"},o.name||o)))),r.claimedPhones&&r.claimedPhones.length>0&&a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("p",{className:"text-sm text-gray-500"},a.createElement("span",{className:"font-medium"},r.claimedPhones.length)," phone number",r.claimedPhones.length!==1?"s":""," have claimed this voucher")),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"},"Close"))):a.createElement("div",{className:"py-12 text-center text-gray-500"},a.createElement("p",null,"No voucher data available")))}const uO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",dO=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,fO=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500",Ph={active:"bg-green-100 text-green-700",disabled:"bg-gray-100 text-gray-600"};function jce(){const{vouchers:e,pagination:t,filters:r,isLoading:n,error:i,fetchVouchers:o,createVoucher:d,getVoucherById:g,updateVoucher:h,toggleVoucherStatus:x,deleteVoucher:y,searchVouchers:w,updateFilters:C,resetFilters:_,changePage:D,clearError:k}=Ice(),[M,R]=N.useState(!1),[F,I]=N.useState(!1),[G,U]=N.useState(!1),[z,L]=N.useState(null),[H,V]=N.useState(null),[Q,Y]=N.useState(!1),[X,he]=N.useState(!1),[xe,ae]=N.useState(null),[ne,se]=N.useState(!1),[Te,we]=N.useState(r.search||""),[te,K]=N.useState(r.isActive||""),ee=N.useCallback(()=>{ae(null),V(null),R(!0)},[]),fe=N.useCallback(async Le=>{ae(null),Y(!0);try{const et=await g(Le._id);et.success?(V(et.data),R(!0)):alert(et.error||"Failed to load voucher details")}catch{alert("An unexpected error occurred")}finally{Y(!1)}},[g]),ce=N.useCallback(()=>{R(!1),ae(null),V(null)},[]),Se=N.useCallback(async Le=>{he(!0),ae(null);try{let et;return H?et=await h(H._id,Le):et=await d(Le),et.success?et:(ae(et.error||"Failed to save voucher"),{success:!1})}catch{return ae("An unexpected error occurred"),{success:!1}}finally{he(!1)}},[d,h,H]),ie=N.useCallback(async Le=>{L(Le),I(!0),Y(!0);try{const et=await g(Le._id);et.success&&L(et.data)}catch(et){console.error("[Vouchers] Failed to fetch details:",et)}finally{Y(!1)}},[g]),oe=N.useCallback(()=>{I(!1),L(null)},[]),He=N.useCallback(async Le=>{he(!0);try{const et=await x(Le._id,Le.isActive);et.success||alert(et.error||"Failed to update voucher status")}catch{alert("An unexpected error occurred")}finally{he(!1)}},[x]),ve=N.useCallback(Le=>{L(Le),U(!0)},[]),We=N.useCallback(()=>{U(!1),L(null)},[]),be=N.useCallback(async()=>{if(z){he(!0);try{const Le=await y(z._id);Le.success?We():alert(Le.error||"Failed to delete voucher")}catch{alert("An unexpected error occurred")}finally{he(!1)}}},[z,y,We]),ye=N.useCallback(Le=>{const et=Le.target.value;we(et),w(et)},[w]),je=N.useCallback(()=>{C({search:Te,isActive:te}),se(!1)},[Te,te,C]),Ze=N.useCallback(()=>{we(""),K(""),_(),se(!1)},[_]),Ie=N.useCallback(()=>{o(t.currentPage)},[o,t.currentPage]),ut=N.useMemo(()=>r.search||r.isActive!=="",[r]);return a.createElement("div",{className:"space-y-4 sm:space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900"},"Vouchers"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Create and manage discount vouchers")),a.createElement("button",{onClick:ee,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},a.createElement(dn,{className:"h-5 w-5"}),a.createElement("span",null,"Create Voucher"))),i&&a.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},a.createElement(Vr,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("div",{className:"flex-1"},a.createElement("p",{className:"text-sm font-medium text-red-800"},"Error loading vouchers"),a.createElement("p",{className:"text-sm text-red-700 mt-0.5"},i)),a.createElement("button",{onClick:k,className:"shrink-0 text-red-600 hover:text-red-800"},"")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},a.createElement("div",{className:"relative flex-1 max-w-md"},a.createElement(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",value:Te,onChange:ye,placeholder:"Search vouchers...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),a.createElement("button",{onClick:()=>se(!ne),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${ut?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},a.createElement(Ti,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),ut&&a.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(r.search?1:0)+(r.isActive!==""?1:0)),a.createElement(Ai,{className:`h-4 w-4 transition-transform ${ne?"rotate-180":""}`})),a.createElement("button",{onClick:Ie,disabled:n,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},a.createElement(Oi,{className:`h-4 w-4 ${n?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"ml-auto text-sm text-gray-500"},t.totalCount," voucher",t.totalCount!==1?"s":""," total")),ne&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),a.createElement("select",{value:te,onChange:Le=>K(Le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"true"},"Active"),a.createElement("option",{value:"false"},"Disabled"))),a.createElement("div",{className:"flex items-end gap-2 sm:col-span-1 lg:col-span-2"},a.createElement("button",{onClick:je,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),a.createElement("button",{onClick:Ze,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),a.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Code"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Title"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Usage"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Events"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Created"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,n&&e.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading vouchers..."))):e.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(Lf,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No vouchers found"),a.createElement("button",{onClick:ee,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first voucher"))):e.map(Le=>{const et=dO(Le.usageCount||0,Le.maxUsage);return a.createElement("tr",{key:Le._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"px-2.5 py-1 bg-gray-100 text-gray-700 rounded font-mono text-sm font-medium"},Le.code)),a.createElement("td",{className:"px-6 py-4"},a.createElement("p",{className:"font-medium text-gray-900 truncate max-w-[200px]"},Le.title)),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"w-32"},a.createElement("div",{className:"flex items-center justify-between text-xs mb-1"},a.createElement("span",{className:"text-gray-600"},Le.usageCount||0," / ",Le.maxUsage),a.createElement("span",{className:"text-gray-400"},et,"%")),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-1.5"},a.createElement("div",{className:`h-1.5 rounded-full ${fO(et)}`,style:{width:`${et}%`}})))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Le.isActive?Ph.active:Ph.disabled}`},Le.isActive?"Active":"Disabled")),a.createElement("td",{className:"px-6 py-4"},Le.events&&Le.events.length>0?a.createElement("div",{className:"flex items-center gap-1"},a.createElement(Hr,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-sm text-gray-600"},Le.events.length," event",Le.events.length!==1?"s":"")):a.createElement("span",{className:"text-sm text-gray-400"},"All events")),a.createElement("td",{className:"px-6 py-4 text-sm text-gray-500"},uO(Le.createdAt)),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>He(Le),disabled:X,className:`p-2 rounded-lg transition-colors ${Le.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:Le.isActive?"Disable voucher":"Enable voucher"},Le.isActive?a.createElement(fl,{className:"h-5 w-5"}):a.createElement(_i,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>ie(Le),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},a.createElement(rn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>fe(Le),disabled:Q,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit voucher"},a.createElement(da,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>ve(Le),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},a.createElement(gr,{className:"h-4 w-4"})))))})))),t.totalPages>0&&a.createElement(Pn,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:D,itemLabel:"vouchers"})),a.createElement("div",{className:"md:hidden space-y-4"},n&&e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading vouchers...")):e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Lf,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No vouchers found"),a.createElement("button",{onClick:ee,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first voucher")):a.createElement(a.Fragment,null,e.map(Le=>{const et=dO(Le.usageCount||0,Le.maxUsage);return a.createElement("div",{key:Le._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"min-w-0"},a.createElement("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 rounded font-mono text-sm font-medium"},Le.code),a.createElement("p",{className:"font-medium text-gray-900 mt-2 truncate"},Le.title),a.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},uO(Le.createdAt))),a.createElement("span",{className:`shrink-0 px-2.5 py-1 rounded-full text-xs font-medium ${Le.isActive?Ph.active:Ph.disabled}`},Le.isActive?"Active":"Disabled")),a.createElement("div",null,a.createElement("div",{className:"flex items-center justify-between text-xs mb-1"},a.createElement("span",{className:"text-gray-600"},Le.usageCount||0," / ",Le.maxUsage," claimed"),a.createElement("span",{className:"text-gray-400"},et,"%")),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},a.createElement("div",{className:`h-2 rounded-full ${fO(et)}`,style:{width:`${et}%`}}))),Le.events&&Le.events.length>0&&a.createElement("div",{className:"flex items-center gap-1 text-sm text-gray-600"},a.createElement(Hr,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",null,Le.events.length," event",Le.events.length!==1?"s":"")),a.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},a.createElement("button",{onClick:()=>He(Le),disabled:X,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Le.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},Le.isActive?a.createElement(a.Fragment,null,a.createElement(fl,{className:"h-4 w-4"}),"On"):a.createElement(a.Fragment,null,a.createElement(_i,{className:"h-4 w-4"}),"Off")),a.createElement("button",{onClick:()=>ie(Le),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},a.createElement(rn,{className:"h-4 w-4"}),"Details"),a.createElement("button",{onClick:()=>fe(Le),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors"},a.createElement(da,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>ve(Le),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},a.createElement(gr,{className:"h-4 w-4"}))))}),t.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Pn,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:D,itemLabel:"vouchers"})))),a.createElement(Lce,{isOpen:M,onClose:ce,onSubmit:Se,isLoading:X,serverError:xe,voucherToEdit:H}),a.createElement(Uce,{isOpen:F,onClose:oe,voucher:z,isLoading:Q}),a.createElement(ha,{isOpen:G,onClose:We,onConfirm:be,title:"Delete Voucher",message:`Are you sure you want to delete the voucher "${z?.code}"? This action can be undone by restoring from deleted vouchers.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:X}))}const Qa={BASE:"/web/sessions",GET_BY_ID:e=>`/web/sessions/${e}`,UPDATE:e=>`/web/sessions/${e}`,DELETE:e=>`/web/sessions/${e}`,TOGGLE_LIVE:e=>`/web/sessions/${e}/toggle-live`,DELETED:"/web/sessions/deleted",RESTORE:e=>`/web/sessions/${e}/restore`,PERMANENT_DELETE:e=>`/web/sessions/${e}/permanent`,BOOKINGS:"/web/sessions/bookings",UPDATE_BOOKING:e=>`/web/sessions/bookings/${e}`},fo={create:async e=>{console.log("[SessionService] Creating session:",e.title);const t=await Xe(Ye.post(Qa.BASE,e));return t.success?console.log("[SessionService] Session created successfully:",t.data.session?._id):console.error("[SessionService] Failed to create session:",t.message),t},getAll:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.isLive!==void 0&&e.isLive!==""&&t.append("isLive",e.isLive),e.sessionType&&t.append("sessionType",e.sessionType),e.search&&t.append("search",e.search);const r=t.toString(),n=r?`${Qa.BASE}?${r}`:Qa.BASE;console.log("[SessionService] Fetching sessions with params:",e);const i=await Xe(Ye.get(n));return i.success?console.log("[SessionService] Fetched sessions:",i.data.sessions?.length):console.error("[SessionService] Failed to fetch sessions:",i.message),i},getById:async e=>{console.log("[SessionService] Fetching session by ID:",e);const t=await Xe(Ye.get(Qa.GET_BY_ID(e)));return t.success?console.log("[SessionService] Fetched session:",t.data.session?._id):console.error("[SessionService] Failed to fetch session:",t.message),t},update:async(e,t)=>{console.log("[SessionService] Updating session:",e);const r=await Xe(Ye.put(Qa.UPDATE(e),t));return r.success?console.log("[SessionService] Session updated successfully"):console.error("[SessionService] Failed to update session:",r.message),r},toggleLive:async e=>{console.log("[SessionService] Toggling session live status:",e);const t=await Xe(Ye.patch(Qa.TOGGLE_LIVE(e)));return t.success?console.log("[SessionService] Session live status toggled successfully"):console.error("[SessionService] Failed to toggle session live status:",t.message),t},delete:async e=>{console.log("[SessionService] Deleting session:",e);const t=await Xe(Ye.delete(Qa.DELETE(e)));return t.success?console.log("[SessionService] Session deleted successfully"):console.error("[SessionService] Failed to delete session:",t.message),t},getDeleted:async()=>{console.log("[SessionService] Fetching deleted sessions");const e=await Xe(Ye.get(Qa.DELETED));return e.success?console.log("[SessionService] Fetched deleted sessions:",e.data.sessions?.length):console.error("[SessionService] Failed to fetch deleted sessions:",e.message),e},restore:async e=>{console.log("[SessionService] Restoring session:",e);const t=await Xe(Ye.post(Qa.RESTORE(e)));return t.success?console.log("[SessionService] Session restored successfully"):console.error("[SessionService] Failed to restore session:",t.message),t},permanentDelete:async e=>{console.log("[SessionService] Permanently deleting session:",e);const t=await Xe(Ye.delete(Qa.PERMANENT_DELETE(e)));return t.success?console.log("[SessionService] Session permanently deleted"):console.error("[SessionService] Failed to permanently delete session:",t.message),t},getBookings:async(e={})=>{const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.status&&t.append("status",e.status),e.sessionId&&t.append("sessionId",e.sessionId);const r=t.toString(),n=r?`${Qa.BOOKINGS}?${r}`:Qa.BOOKINGS;console.log("[SessionService] Fetching bookings with params:",e);const i=await Xe(Ye.get(n));return i.success?console.log("[SessionService] Fetched bookings:",i.data.bookings?.length):console.error("[SessionService] Failed to fetch bookings:",i.message),i},updateBooking:async(e,t)=>{console.log("[SessionService] Updating booking:",e,"with status:",t.status);const r=await Xe(Ye.put(Qa.UPDATE_BOOKING(e),t));return r.success?console.log("[SessionService] Booking updated successfully"):console.error("[SessionService] Failed to update booking:",r.message),r}};function zce(e={}){const[t,r]=N.useState([]),[n,i]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[o,d]=N.useState({search:"",isLive:"",sessionType:"",category:"",sortBy:"createdAt",sortOrder:"desc",...e}),[g,h]=N.useState(!1),[x,y]=N.useState(null),[w,C]=N.useState([]),[_,D]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[k,M]=N.useState({status:"",sessionId:""}),[R,F]=N.useState(!1),[I,G]=N.useState(null),U=N.useRef(null),z=N.useCallback(async(ce=n.currentPage)=>{h(!0),y(null);try{const Se={page:ce,limit:n.limit,sortBy:o.sortBy,sortOrder:o.sortOrder,...o.search&&{search:o.search},...o.isLive!==""&&{isLive:o.isLive},...o.sessionType&&{sessionType:o.sessionType},...o.category&&{category:o.category}};console.log("[useSessions] Fetching sessions with params:",Se);const ie=await fo.getAll(Se);ie.success?(r(ie.data.sessions||[]),i({currentPage:ie.data.pagination?.currentPage||1,totalPages:ie.data.pagination?.totalPages||0,totalCount:ie.data.pagination?.totalCount||0,limit:ie.data.pagination?.limit||10})):(y(ie.message),r([]))}catch{y("Failed to fetch sessions"),r([])}finally{h(!1)}},[o,n.limit]),L=N.useCallback(async ce=>{try{const Se=await fo.create(ce);return Se.success?(await z(1),{success:!0,data:Se.data}):{success:!1,error:Se.message,validationErrors:Se.error}}catch{return{success:!1,error:"Failed to create session"}}},[z]),H=N.useCallback(async ce=>{try{const Se=await fo.getById(ce);return Se.success?{success:!0,data:Se.data.session}:{success:!1,error:Se.message}}catch{return{success:!1,error:"Failed to fetch session details"}}},[]),V=N.useCallback(async(ce,Se)=>{try{const ie=await fo.update(ce,Se);return ie.success?(r(oe=>oe.map(He=>He._id===ce?{...He,...ie.data.session}:He)),{success:!0,data:ie.data}):{success:!1,error:ie.message,validationErrors:ie.error}}catch{return{success:!1,error:"Failed to update session"}}},[]),Q=N.useCallback(async(ce,Se)=>{try{const ie=await fo.toggleLive(ce);return ie.success?(r(oe=>oe.map(He=>He._id===ce?{...He,isLive:!Se}:He)),{success:!0}):{success:!1,error:ie.message}}catch{return{success:!1,error:"Failed to update session status"}}},[]),Y=N.useCallback(async ce=>{try{const Se=await fo.delete(ce);return Se.success?(r(ie=>ie.filter(oe=>oe._id!==ce)),i(ie=>({...ie,totalCount:ie.totalCount-1,totalPages:Math.ceil((ie.totalCount-1)/ie.limit)})),{success:!0}):{success:!1,error:Se.message}}catch{return{success:!1,error:"Failed to delete session"}}},[]),X=N.useCallback(ce=>{U.current&&clearTimeout(U.current),U.current=setTimeout(()=>{d(Se=>({...Se,search:ce}))},300)},[]),he=N.useCallback(ce=>{d(Se=>({...Se,...ce}))},[]),xe=N.useCallback(()=>{d({search:"",isLive:"",sessionType:"",category:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),ae=N.useCallback(ce=>{z(ce)},[z]),ne=N.useCallback(ce=>{i(Se=>({...Se,limit:ce}))},[]),se=N.useCallback(()=>{y(null)},[]),Te=N.useCallback(async(ce=_.currentPage)=>{F(!0),G(null);try{const Se={page:ce,limit:_.limit,...k.status&&{status:k.status},...k.sessionId&&{sessionId:k.sessionId}};console.log("[useSessions] Fetching bookings with params:",Se);const ie=await fo.getBookings(Se);ie.success?(C(ie.data.bookings||[]),D({currentPage:ie.data.pagination?.currentPage||1,totalPages:ie.data.pagination?.totalPages||0,totalCount:ie.data.pagination?.totalCount||0,limit:ie.data.pagination?.limit||10}),console.log("[useSessions] Fetched bookings:",ie.data.bookings?.length)):(console.error("[useSessions] Failed to fetch bookings:",ie.message),G(ie.message||"Failed to fetch bookings"),C([]))}catch(Se){console.error("[useSessions] Error fetching bookings:",Se),G("Failed to fetch bookings"),C([])}finally{F(!1)}},[k,_.limit]),we=N.useCallback(async(ce,Se)=>{try{console.log("[useSessions] Updating booking:",ce,"with data:",Se);const ie=await fo.updateBooking(ce,Se);return ie.success?(console.log("[useSessions] Booking updated successfully"),C(oe=>oe.map(He=>He._id===ce?{...He,...ie.data.booking}:He)),{success:!0,data:ie.data}):(console.error("[useSessions] Failed to update booking:",ie.message),{success:!1,error:ie.message})}catch(ie){return console.error("[useSessions] Error updating booking:",ie),{success:!1,error:"Failed to update booking"}}},[]),te=N.useCallback(ce=>{M(Se=>({...Se,...ce}))},[]),K=N.useCallback(()=>{M({status:"",sessionId:""})},[]),ee=N.useCallback(ce=>{Te(ce)},[Te]),fe=N.useCallback(()=>{G(null)},[]);return N.useEffect(()=>{z(1)},[o]),N.useEffect(()=>()=>{U.current&&clearTimeout(U.current)},[]),{sessions:t,pagination:n,filters:o,isLoading:g,error:x,fetchSessions:z,createSession:L,getSessionById:H,updateSession:V,toggleSessionLive:Q,deleteSession:Y,searchSessions:X,updateFilters:he,resetFilters:xe,changePage:ae,changeLimit:ne,clearError:se,bookings:w,bookingPagination:_,bookingFilters:k,isLoadingBookings:R,bookingError:I,fetchBookings:Te,updateBooking:we,updateBookingFilters:te,resetBookingFilters:K,changeBookingPage:ee,clearBookingError:fe}}const Vce=[{value:"therapeutic",label:"Therapeutic"},{value:"mental_wellness",label:"Mental Wellness"},{value:"career",label:"Career"},{value:"relationships",label:"Relationships"},{value:"lifestyle",label:"Lifestyle"},{value:"other",label:"Other"}],mO=()=>({title:"",shortDescription:"",longDescription:"",price:"",compareAtPrice:"",duration:"",sessionType:"OTO",category:"mental_wellness",isLive:!1,host:"",hostEmail:"",hostPhone:"",availableSlots:"",calendlyLink:"",sessionDate:"",imageUrl:"",tags:[]});function Hce({isOpen:e,onClose:t,onSubmit:r,isLoading:n=!1,serverError:i=null,sessionToEdit:o=null}){const[d,g]=N.useState(mO()),[h,x]=N.useState({}),y=!!o,[w,C]=N.useState("");N.useEffect(()=>{e&&(g(o?{title:o.title||"",shortDescription:o.shortDescription||"",longDescription:o.longDescription||"",price:o.price?.toString()||"",compareAtPrice:o.compareAtPrice?.toString()||"",duration:o.duration?.toString()||"",sessionType:o.sessionType||"OTO",category:o.category||"mental_wellness",isLive:o.isLive??!1,host:o.host||"",hostEmail:o.hostEmail||"",hostPhone:o.hostPhone||"",availableSlots:o.availableSlots?.toString()||"",calendlyLink:o.calendlyLink||"",sessionDate:o.sessionDate?new Date(o.sessionDate).toISOString().slice(0,16):"",imageUrl:o.imageUrl||"",tags:o.tags||[]}:mO()),x({}),C(""))},[e,o]);const _=M=>{const R={};if(M.title.trim()?M.title.length>200&&(R.title="Title must be less than 200 characters"):R.title="Title is required",M.shortDescription.trim()?M.shortDescription.length>500&&(R.shortDescription="Short description must be less than 500 characters"):R.shortDescription="Short description is required",M.longDescription.trim()?M.longDescription.length>5e3&&(R.longDescription="Long description must be less than 5000 characters"):R.longDescription="Long description is required",!M.price)R.price="Price is required";else{const F=parseFloat(M.price);(isNaN(F)||F<0)&&(R.price="Price must be a positive number")}if(M.compareAtPrice){const F=parseFloat(M.compareAtPrice),I=parseFloat(M.price);isNaN(F)||F<0?R.compareAtPrice="Compare at price must be a positive number":!isNaN(I)&&F<I&&(R.compareAtPrice="Compare at price must be greater than or equal to price")}if(!M.duration)R.duration="Duration is required";else{const F=parseInt(M.duration,10);isNaN(F)||F<1?R.duration="Duration must be at least 1 minute":F>480&&(R.duration="Duration cannot exceed 480 minutes (8 hours)")}if(M.host.trim()?M.host.length>100&&(R.host="Host name must be less than 100 characters"):R.host="Host name is required",M.hostEmail&&M.hostEmail.trim()&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M.hostEmail.trim())||(R.hostEmail="Please provide a valid email address")),M.hostPhone&&M.hostPhone.trim()&&(/^[\d\s+\-()]+$/.test(M.hostPhone.trim())?M.hostPhone.trim().length<10&&(R.hostPhone="Phone number must be at least 10 digits"):R.hostPhone="Please provide a valid phone number"),M.sessionType==="OTM"&&M.availableSlots){const F=parseInt(M.availableSlots,10);(isNaN(F)||F<1)&&(R.availableSlots="Available slots must be at least 1")}return M.calendlyLink.trim()?/^https?:\/\/.+/.test(M.calendlyLink)||(R.calendlyLink="Please provide a valid URL"):R.calendlyLink="Calendly link is required",M.imageUrl&&!/^https?:\/\/.+/.test(M.imageUrl)&&(R.imageUrl="Please provide a valid image URL"),{isValid:Object.keys(R).length===0,errors:R}},D=(M,R)=>{g(F=>({...F,[M]:R})),h[M]&&x(F=>{const I={...F};return delete I[M],I})},k=async M=>{M.preventDefault();const{isValid:R,errors:F}=_(d);if(!R){x(F);return}const I={title:d.title.trim(),shortDescription:d.shortDescription.trim(),longDescription:d.longDescription.trim(),price:parseFloat(d.price),duration:parseInt(d.duration,10),sessionType:d.sessionType,category:d.category,isLive:d.isLive,host:d.host.trim()};d.compareAtPrice&&(I.compareAtPrice=parseFloat(d.compareAtPrice)),d.availableSlots&&(I.availableSlots=parseInt(d.availableSlots,10)),I.calendlyLink=d.calendlyLink.trim(),d.sessionDate&&(I.sessionDate=new Date(d.sessionDate).toISOString()),d.imageUrl.trim()&&(I.imageUrl=d.imageUrl.trim()),d.hostEmail.trim()&&(I.hostEmail=d.hostEmail.trim()),d.hostPhone.trim()&&(I.hostPhone=d.hostPhone.trim()),d.tags.length>0&&(I.tags=d.tags),(await r(I))?.success&&t()};return a.createElement(hn,{isOpen:e,onClose:t,title:y?"Edit Session":"Create Session",size:"xl"},a.createElement("form",{onSubmit:k,className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Title ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:d.title,onChange:M=>D("title",M.target.value),placeholder:"e.g., One-on-One Career Coaching",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.title&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.title)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Short Description ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("textarea",{value:d.shortDescription,onChange:M=>D("shortDescription",M.target.value),placeholder:"Brief overview of the session...",rows:2,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${h.shortDescription?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.shortDescription&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.shortDescription)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Long Description ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("textarea",{value:d.longDescription,onChange:M=>D("longDescription",M.target.value),placeholder:"Detailed description of what participants will learn...",rows:4,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${h.longDescription?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.longDescription&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.longDescription)),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Price () ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",value:d.price,onChange:M=>D("price",M.target.value),placeholder:"e.g., 999",min:"0",step:"0.01",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.price?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.price&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.price)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Compare at Price ()"),a.createElement("input",{type:"number",value:d.compareAtPrice,onChange:M=>D("compareAtPrice",M.target.value),placeholder:"e.g., 1499",min:"0",step:"0.01",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.compareAtPrice?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.compareAtPrice&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.compareAtPrice)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Duration (mins) ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",value:d.duration,onChange:M=>D("duration",M.target.value),placeholder:"e.g., 60",min:"1",max:"480",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.duration?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.duration&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.duration))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Session Type ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{value:d.sessionType,onChange:M=>D("sessionType",M.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`},a.createElement("option",{value:"OTO"},"One-to-One (OTO)"),a.createElement("option",{value:"OTM"},"One-to-Many (OTM)"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Category ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{value:d.category,onChange:M=>D("category",M.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`},Vce.map(M=>a.createElement("option",{key:M.value,value:M.value},M.label))))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Host Name ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:d.host,onChange:M=>D("host",M.target.value),placeholder:"e.g., John Doe",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.host?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.host&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.host)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Host Email",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("input",{type:"email",value:d.hostEmail,onChange:M=>D("hostEmail",M.target.value),placeholder:"host@example.com",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.hostEmail?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.hostEmail&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.hostEmail)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Host Phone",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("input",{type:"tel",value:d.hostPhone,onChange:M=>D("hostPhone",M.target.value),placeholder:"+91 9876543210",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.hostPhone?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.hostPhone&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.hostPhone))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Available Slots",d.sessionType==="OTM"&&a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(for group sessions)")),a.createElement("input",{type:"number",value:d.availableSlots,onChange:M=>D("availableSlots",M.target.value),placeholder:d.sessionType==="OTO"?"1":"e.g., 50",min:"1",disabled:n||d.sessionType==="OTO",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.availableSlots?"border-red-500":"border-gray-300"} ${n||d.sessionType==="OTO"?"bg-gray-100":""}`}),h.availableSlots&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.availableSlots),d.sessionType==="OTO"&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Fixed to 1 for one-to-one sessions")),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Session Date",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("input",{type:"datetime-local",value:d.sessionDate,onChange:M=>D("sessionDate",M.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`}))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Calendly Link ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"url",value:d.calendlyLink,onChange:M=>D("calendlyLink",M.target.value),placeholder:"https://calendly.com/your-link",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.calendlyLink?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.calendlyLink&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.calendlyLink)),a.createElement(Cc,{label:"Session Image",value:d.imageUrl,onUpload:M=>D("imageUrl",M),disabled:n,error:h.imageUrl,type:"image",folder:"sessions",placeholder:"Drop image here or click to upload"}),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Tags",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("div",{className:"flex gap-2"},a.createElement("input",{type:"text",value:w,onChange:M=>C(M.target.value),onKeyDown:M=>{if(M.key==="Enter"){M.preventDefault();const R=w.trim().toLowerCase();R&&!d.tags.includes(R)&&(D("tags",[...d.tags,R]),C(""))}},placeholder:"Type a tag and press Enter",disabled:n,className:`flex-1 px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`}),a.createElement("button",{type:"button",onClick:()=>{const M=w.trim().toLowerCase();M&&!d.tags.includes(M)&&(D("tags",[...d.tags,M]),C(""))},disabled:n||!w.trim(),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50"},a.createElement(dn,{className:"h-4 w-4"}))),d.tags.length>0&&a.createElement("div",{className:"flex flex-wrap gap-2 mt-2"},d.tags.map((M,R)=>a.createElement("span",{key:R,className:"inline-flex items-center gap-1 px-2.5 py-1 bg-gray-100 text-gray-700 rounded-full text-sm"},M,a.createElement("button",{type:"button",onClick:()=>{D("tags",d.tags.filter((F,I)=>I!==R))},disabled:n,className:"text-gray-500 hover:text-gray-700"},a.createElement(zn,{className:"h-3 w-3"})))))),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:d.isLive,onChange:M=>D("isLive",M.target.checked),disabled:n,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})),a.createElement("span",{className:"text-sm text-gray-700"},d.isLive?"Live (Available for booking)":"Not Live")),i&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},a.createElement(Vr,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},i)),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200 sticky bottom-0 bg-white"},a.createElement("button",{type:"button",onClick:t,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50"},n?a.createElement(a.Fragment,null,a.createElement(Nt,{className:"h-4 w-4 animate-spin"}),a.createElement("span",null,y?"Updating...":"Creating...")):a.createElement("span",null,y?"Update Session":"Create Session")))))}const hv=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",hO=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),qce=e=>{if(!e)return"-";if(e<60)return`${e} min`;const t=Math.floor(e/60),r=e%60;return r>0?`${t}h ${r}m`:`${t}h`},$ce=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,Gce=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500";function Yce({isOpen:e,onClose:t,session:r,isLoading:n=!1}){if(!r&&!n)return null;const i=r?.bookedSlots||0,o=r?.availableSlots,d=$ce(i,o),g=r?.discountPercent||0;return a.createElement(hn,{isOpen:e,onClose:t,title:"Session Details",size:"lg"},n?a.createElement("div",{className:"py-12 flex flex-col items-center justify-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading session details...")):r?a.createElement("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-2"},a.createElement("div",{className:"flex items-start justify-between gap-4 pb-4 border-b border-gray-200"},a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${r.sessionType==="OTO"?"bg-purple-100 text-purple-700":"bg-blue-100 text-gray-900"}`},r.sessionType==="OTO"?"One-to-One":"One-to-Many")),a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},r.title),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},r.shortDescription)),a.createElement("span",{className:`shrink-0 px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1.5 ${r.isLive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isLive?a.createElement(Nl,{className:"h-4 w-4"}):a.createElement(Mc,{className:"h-4 w-4"}),r.isLive?"Live":"Not Live")),r.imageUrl&&a.createElement("div",{className:"rounded-lg overflow-hidden bg-gray-100"},a.createElement("img",{src:r.imageUrl,alt:r.title,className:"w-full h-48 object-cover",onError:h=>{h.target.style.display="none"}})),a.createElement("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},a.createElement(zU,{className:"h-5 w-5 text-gray-800"})),a.createElement("div",null,a.createElement("p",{className:"text-xs text-gray-800 font-medium uppercase"},"Price"),a.createElement("div",{className:"flex items-center gap-2"},a.createElement("p",{className:"text-2xl font-bold text-blue-900"},hO(r.price)),r.compareAtPrice&&r.compareAtPrice>r.price&&a.createElement("p",{className:"text-sm text-gray-500 line-through"},hO(r.compareAtPrice))))),g>0&&a.createElement("div",{className:"flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full"},a.createElement(ij,{className:"h-4 w-4"}),a.createElement("span",{className:"font-semibold"},g,"% OFF")))),a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-2"},"Description"),a.createElement("p",{className:"text-sm text-gray-600 whitespace-pre-wrap"},r.longDescription)),r.sessionType==="OTM"&&o&&a.createElement("div",null,a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("span",{className:"text-sm font-medium text-gray-700"},"Booking Progress"),a.createElement("span",{className:"text-sm text-gray-500"},i," / ",o," booked")),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},a.createElement("div",{className:`h-3 rounded-full transition-all ${Gce(d)}`,style:{width:`${d}%`}})),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},d,"% filled (",o-i," slots remaining)")),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(Cn,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Duration")),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},qce(r.duration))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(No,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Host")),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},r.host)),r.sessionDate&&a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(Hr,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Session Date")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},hv(r.sessionDate))),o&&a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(fm,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},r.sessionType==="OTO"?"Slot":"Available Slots")),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},o-i," remaining")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(Cn,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Created")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},hv(r.createdAt))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(Cn,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Last Updated")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},hv(r.updatedAt)))),r.calendlyLink&&a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(GU,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Booking Link")),a.createElement("a",{href:r.calendlyLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-800 hover:text-black hover:underline break-all"},r.calendlyLink)),r.createdBy&&a.createElement("div",{className:"bg-gray-50 rounded-lg p-3"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(No,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Created By")),a.createElement("p",{className:"text-sm font-medium text-gray-900"},r.createdBy.name||r.createdBy.email),r.createdBy.email&&r.createdBy.name&&a.createElement("p",{className:"text-xs text-gray-500"},r.createdBy.email)),a.createElement("div",{className:"pt-4 border-t border-gray-200 sticky bottom-0 bg-white"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"},"Close"))):a.createElement("div",{className:"py-12 text-center text-gray-500"},a.createElement("p",null,"No session data available")))}const wf=e=>e==null?"-":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),gO=e=>{if(!e)return"-";if(e<60)return`${e}m`;const t=Math.floor(e/60),r=e%60;return r>0?`${t}h ${r}m`:`${t}h`},Xce=(e,t)=>t?Math.min(Math.round(e/t*100),100):0,Wce=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500",Rh={live:"bg-green-100 text-green-700",notLive:"bg-gray-100 text-gray-600"},pO={OTO:"bg-purple-100 text-purple-700",OTM:"bg-gray-100 text-gray-700"},yO=[{value:"therapeutic",label:"Therapeutic"},{value:"mental_wellness",label:"Mental Wellness"},{value:"career",label:"Career"},{value:"relationships",label:"Relationships"},{value:"lifestyle",label:"Lifestyle"},{value:"other",label:"Other"}],xO={therapeutic:"bg-blue-100 text-blue-700",mental_wellness:"bg-green-100 text-green-700",career:"bg-amber-100 text-amber-700",relationships:"bg-pink-100 text-pink-700",lifestyle:"bg-indigo-100 text-indigo-700",other:"bg-gray-100 text-gray-700"},Ih={pending:{color:"bg-amber-100 text-amber-700",label:"Pending"},confirmed:{color:"bg-blue-100 text-blue-700",label:"Confirmed"},completed:{color:"bg-green-100 text-green-700",label:"Completed"},cancelled:{color:"bg-red-100 text-red-700",label:"Cancelled"},no_show:{color:"bg-gray-100 text-gray-700",label:"No Show"}},bO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",Kce=e=>e?new Date(e).toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";function Zce(){const{sessions:e,pagination:t,filters:r,isLoading:n,error:i,fetchSessions:o,createSession:d,getSessionById:g,updateSession:h,toggleSessionLive:x,deleteSession:y,searchSessions:w,updateFilters:C,resetFilters:_,changePage:D,clearError:k,bookings:M,bookingPagination:R,bookingFilters:F,isLoadingBookings:I,bookingError:G,fetchBookings:U,updateBooking:z,updateBookingFilters:L,resetBookingFilters:H,changeBookingPage:V,clearBookingError:Q}=zce(),[Y,X]=N.useState(!1),[he,xe]=N.useState(!1),[ae,ne]=N.useState(!1),[se,Te]=N.useState(null),[we,te]=N.useState(null),[K,ee]=N.useState(!1),[fe,ce]=N.useState(!1),[Se,ie]=N.useState(null),[oe,He]=N.useState("sessions"),[ve,We]=N.useState(!1),[be,ye]=N.useState(r.search||""),[je,Ze]=N.useState(r.isLive||""),[Ie,ut]=N.useState(r.sessionType||""),[Le,et]=N.useState(r.category||""),[mt,Er]=N.useState(F.status||""),[tt,nt]=N.useState(F.sessionId||""),[Re,Be]=N.useState(null),[St,pt]=N.useState(!1),ar=N.useCallback(()=>{ie(null),te(null),X(!0)},[]),$r=N.useCallback(async Fe=>{ie(null),ee(!0);try{const xt=await g(Fe._id);xt.success?(te(xt.data),X(!0)):alert(xt.error||"Failed to load session details")}catch{alert("An unexpected error occurred")}finally{ee(!1)}},[g]),Cr=N.useCallback(()=>{X(!1),ie(null),te(null)},[]),La=N.useCallback(async Fe=>{ce(!0),ie(null);try{let xt;return we?xt=await h(we._id,Fe):xt=await d(Fe),xt.success?xt:(ie(xt.error||"Failed to save session"),{success:!1})}catch{return ie("An unexpected error occurred"),{success:!1}}finally{ce(!1)}},[d,h,we]),pa=N.useCallback(async Fe=>{Te(Fe),xe(!0),ee(!0);try{const xt=await g(Fe._id);xt.success&&Te(xt.data)}catch(xt){console.error("[Sessions] Failed to fetch details:",xt)}finally{ee(!1)}},[g]),Ls=N.useCallback(()=>{xe(!1),Te(null)},[]),Gt=N.useCallback(async Fe=>{ce(!0);try{const xt=await x(Fe._id,Fe.isLive);xt.success||alert(xt.error||"Failed to update session status")}catch{alert("An unexpected error occurred")}finally{ce(!1)}},[x]),ge=N.useCallback(Fe=>{Te(Fe),ne(!0)},[]),Je=N.useCallback(()=>{ne(!1),Te(null)},[]),rt=N.useCallback(async()=>{if(se){ce(!0);try{const Fe=await y(se._id);Fe.success?Je():alert(Fe.error||"Failed to delete session")}catch{alert("An unexpected error occurred")}finally{ce(!1)}}},[se,y,Je]),_t=N.useCallback(Fe=>{const xt=Fe.target.value;ye(xt),w(xt)},[w]),Pr=N.useCallback(()=>{C({search:be,isLive:je,sessionType:Ie,category:Le}),We(!1)},[be,je,Ie,Le,C]),Ba=N.useCallback(()=>{ye(""),Ze(""),ut(""),et(""),_(),We(!1)},[_]),Fa=N.useCallback(()=>{L({status:mt,sessionId:tt}),We(!1)},[mt,tt,L]),Pt=N.useCallback(()=>{Er(""),nt(""),H(),We(!1)},[H]),Gr=N.useCallback(async(Fe,xt)=>{pt(!0);try{const $n=await z(Fe,{status:xt});$n.success||alert($n.error||"Failed to update booking status")}catch($n){console.error("[Sessions] Error updating booking:",$n),alert("An unexpected error occurred")}finally{pt(!1),Be(null)}},[z]),ya=N.useCallback(()=>{oe==="sessions"?o(t.currentPage):U(R.currentPage)},[oe,o,U,t.currentPage,R.currentPage]),Ua=N.useMemo(()=>r.search||r.isLive!==""||r.sessionType||r.category,[r]),Wr=N.useMemo(()=>F.status||F.sessionId,[F]);return N.useEffect(()=>{oe==="bookings"&&U(1)},[oe]),N.useEffect(()=>{oe==="bookings"&&U(1)},[F]),a.createElement("div",{className:"space-y-4 sm:space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900"},"Sessions"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Create and manage coaching sessions and bookings")),oe==="sessions"&&a.createElement("button",{onClick:ar,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},a.createElement(dn,{className:"h-5 w-5"}),a.createElement("span",null,"Create Session"))),a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement("div",{className:"flex border-b border-gray-200"},a.createElement("button",{onClick:()=>He("sessions"),className:`flex-1 sm:flex-none px-6 py-3 text-sm font-medium transition-colors relative ${oe==="sessions"?"text-gray-900":"text-gray-500 hover:text-gray-700"}`},a.createElement("div",{className:"flex items-center justify-center gap-2"},a.createElement(cl,{className:"h-4 w-4"}),a.createElement("span",null,"Sessions"),a.createElement("span",{className:"px-2 py-0.5 text-xs bg-gray-100 rounded-full"},t.totalCount)),oe==="sessions"&&a.createElement("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-800"})),a.createElement("button",{onClick:()=>He("bookings"),className:`flex-1 sm:flex-none px-6 py-3 text-sm font-medium transition-colors relative ${oe==="bookings"?"text-gray-900":"text-gray-500 hover:text-gray-700"}`},a.createElement("div",{className:"flex items-center justify-center gap-2"},a.createElement(nU,{className:"h-4 w-4"}),a.createElement("span",null,"Bookings"),a.createElement("span",{className:"px-2 py-0.5 text-xs bg-gray-100 rounded-full"},R.totalCount)),oe==="bookings"&&a.createElement("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-800"})))),(i||G)&&a.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},a.createElement(Vr,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("div",{className:"flex-1"},a.createElement("p",{className:"text-sm font-medium text-red-800"},"Error loading ",i?"sessions":"bookings"),a.createElement("p",{className:"text-sm text-red-700 mt-0.5"},i||G)),a.createElement("button",{onClick:i?k:Q,className:"shrink-0 text-red-600 hover:text-red-800"},"")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},oe==="sessions"?a.createElement(a.Fragment,null,a.createElement("div",{className:"relative flex-1 max-w-md"},a.createElement(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",value:be,onChange:_t,placeholder:"Search sessions...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),a.createElement("button",{onClick:()=>We(!ve),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${Ua?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},a.createElement(Ti,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),Ua&&a.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(r.search?1:0)+(r.isLive!==""?1:0)+(r.sessionType?1:0)+(r.category?1:0)),a.createElement(Ai,{className:`h-4 w-4 transition-transform ${ve?"rotate-180":""}`}))):a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>We(!ve),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${Wr?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},a.createElement(Ti,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),Wr&&a.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(F.status?1:0)+(F.sessionId?1:0)),a.createElement(Ai,{className:`h-4 w-4 transition-transform ${ve?"rotate-180":""}`}))),a.createElement("button",{onClick:ya,disabled:n||I,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},a.createElement(Oi,{className:`h-4 w-4 ${n||I?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"ml-auto text-sm text-gray-500"},oe==="sessions"?a.createElement(a.Fragment,null,t.totalCount," session",t.totalCount!==1?"s":""," total"):a.createElement(a.Fragment,null,R.totalCount," booking",R.totalCount!==1?"s":""," total"))),ve&&oe==="sessions"&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),a.createElement("select",{value:je,onChange:Fe=>Ze(Fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"true"},"Live"),a.createElement("option",{value:"false"},"Not Live"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Session Type"),a.createElement("select",{value:Ie,onChange:Fe=>ut(Fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Types"),a.createElement("option",{value:"OTO"},"One-to-One (OTO)"),a.createElement("option",{value:"OTM"},"One-to-Many (OTM)"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Category"),a.createElement("select",{value:Le,onChange:Fe=>et(Fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Categories"),yO.map(Fe=>a.createElement("option",{key:Fe.value,value:Fe.value},Fe.label)))),a.createElement("div",{className:"flex items-end gap-2 sm:col-span-2"},a.createElement("button",{onClick:Pr,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),a.createElement("button",{onClick:Ba,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset")))),ve&&oe==="bookings"&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Booking Status"),a.createElement("select",{value:mt,onChange:Fe=>Er(Fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"pending"},"Pending"),a.createElement("option",{value:"confirmed"},"Confirmed"),a.createElement("option",{value:"completed"},"Completed"),a.createElement("option",{value:"cancelled"},"Cancelled"),a.createElement("option",{value:"no_show"},"No Show"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Session"),a.createElement("select",{value:tt,onChange:Fe=>nt(Fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Sessions"),e.map(Fe=>a.createElement("option",{key:Fe._id,value:Fe._id},Fe.title)))),a.createElement("div",{className:"flex items-end gap-2 sm:col-span-2"},a.createElement("button",{onClick:Fa,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),a.createElement("button",{onClick:Pt,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),oe==="sessions"&&a.createElement(a.Fragment,null,a.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Session"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Type"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Category"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Price"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Duration"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Host"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,n&&e.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:8,className:"px-6 py-12 text-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading sessions..."))):e.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:8,className:"px-6 py-12 text-center"},a.createElement(cl,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No sessions found"),a.createElement("button",{onClick:ar,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first session"))):e.map(Fe=>a.createElement("tr",{key:Fe._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"max-w-[200px]"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},Fe.title),a.createElement("p",{className:"text-xs text-gray-500 truncate mt-0.5"},Fe.shortDescription))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${pO[Fe.sessionType]}`},Fe.sessionType==="OTO"?"OTO":"OTM")),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${xO[Fe.category]||xO.other}`},yO.find(xt=>xt.value===Fe.category)?.label||"Other")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-1"},a.createElement("span",{className:"font-semibold text-gray-900"},wf(Fe.price)),Fe.compareAtPrice&&Fe.compareAtPrice>Fe.price&&a.createElement("span",{className:"text-xs text-gray-400 line-through"},wf(Fe.compareAtPrice)))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-1 text-gray-600"},a.createElement(Cn,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},gO(Fe.duration)))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"w-7 h-7 bg-gray-200 rounded-full flex items-center justify-center"},a.createElement(No,{className:"h-4 w-4 text-gray-500"})),a.createElement("span",{className:"text-sm text-gray-700 truncate max-w-[100px]"},Fe.host))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Fe.isLive?Rh.live:Rh.notLive}`},Fe.isLive?"Live":"Not Live")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>Gt(Fe),disabled:fe,className:`p-2 rounded-lg transition-colors ${Fe.isLive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:Fe.isLive?"Set Not Live":"Set Live"},Fe.isLive?a.createElement(fl,{className:"h-5 w-5"}):a.createElement(_i,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>pa(Fe),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},a.createElement(rn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>$r(Fe),disabled:K,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit session"},a.createElement(da,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>ge(Fe),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},a.createElement(gr,{className:"h-4 w-4"}))))))))),t.totalPages>0&&a.createElement(Pn,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:D,itemLabel:"sessions"})),a.createElement("div",{className:"md:hidden space-y-4"},n&&e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading sessions...")):e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(cl,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No sessions found"),a.createElement("button",{onClick:ar,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first session")):a.createElement(a.Fragment,null,e.map(Fe=>{const xt=Xce(Fe.bookedSlots||0,Fe.availableSlots);return a.createElement("div",{key:Fe._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"min-w-0 flex-1"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${pO[Fe.sessionType]}`},Fe.sessionType),a.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Fe.isLive?Rh.live:Rh.notLive}`},Fe.isLive?"Live":"Not Live")),a.createElement("p",{className:"font-medium text-gray-900 truncate"},Fe.title),a.createElement("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2"},Fe.shortDescription))),a.createElement("div",{className:"grid grid-cols-3 gap-2 text-center"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Price"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},wf(Fe.price))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Duration"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},gO(Fe.duration))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Host"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm truncate"},Fe.host))),Fe.sessionType==="OTM"&&Fe.availableSlots&&a.createElement("div",null,a.createElement("div",{className:"flex items-center justify-between text-xs mb-1"},a.createElement("span",{className:"text-gray-600"},Fe.bookedSlots||0," / ",Fe.availableSlots," booked"),a.createElement("span",{className:"text-gray-400"},xt,"%")),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},a.createElement("div",{className:`h-2 rounded-full ${Wce(xt)}`,style:{width:`${xt}%`}}))),a.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},a.createElement("button",{onClick:()=>Gt(Fe),disabled:fe,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Fe.isLive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},Fe.isLive?a.createElement(a.Fragment,null,a.createElement(fl,{className:"h-4 w-4"}),"Live"):a.createElement(a.Fragment,null,a.createElement(_i,{className:"h-4 w-4"}),"Off")),a.createElement("button",{onClick:()=>pa(Fe),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},a.createElement(rn,{className:"h-4 w-4"}),"Details"),a.createElement("button",{onClick:()=>$r(Fe),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors"},a.createElement(da,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>ge(Fe),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},a.createElement(gr,{className:"h-4 w-4"}))))}),t.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Pn,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:D,itemLabel:"sessions"}))))),oe==="bookings"&&a.createElement(a.Fragment,null,a.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"User"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Session"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Scheduled Date"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Amount"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Booked On"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,I&&M.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading bookings..."))):M.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(sh,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No bookings found"))):M.map(Fe=>a.createElement("tr",{key:Fe._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center"},a.createElement(No,{className:"h-4 w-4 text-gray-500"})),a.createElement("div",{className:"min-w-0"},a.createElement("p",{className:"font-medium text-gray-900 truncate max-w-[150px]"},Fe.userId?.name||"Unknown User"),a.createElement("p",{className:"text-xs text-gray-500 truncate max-w-[150px]"},Fe.userId?.email||"-")))),a.createElement("td",{className:"px-6 py-4"},a.createElement("p",{className:"font-medium text-gray-900 truncate max-w-[180px]"},Fe.sessionId?.title||"Unknown Session"),a.createElement("p",{className:"text-xs text-gray-500"},Fe.sessionId?.sessionType||"-")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-1 text-gray-600"},a.createElement(Hr,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},Kce(Fe.scheduledSlot)))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"font-semibold text-gray-900"},wf(Fe.amountPaid))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Ih[Fe.status]?.color||"bg-gray-100 text-gray-700"}`},Ih[Fe.status]?.label||Fe.status)),a.createElement("td",{className:"px-6 py-4 text-sm text-gray-500"},bO(Fe.createdAt)),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},Fe.status==="pending"&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>Gr(Fe._id,"confirmed"),disabled:St,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Confirm"},a.createElement(Js,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>Gr(Fe._id,"cancelled"),disabled:St,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Cancel"},a.createElement(zn,{className:"h-4 w-4"}))),Fe.status==="confirmed"&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>Gr(Fe._id,"completed"),disabled:St,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Mark Completed"},a.createElement(Js,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>Gr(Fe._id,"no_show"),disabled:St,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",title:"No Show"},a.createElement(sh,{className:"h-4 w-4"})))))))))),R.totalPages>0&&a.createElement(Pn,{currentPage:R.currentPage,totalPages:R.totalPages,totalItems:R.totalCount,itemsPerPage:R.limit,onPageChange:V,itemLabel:"bookings"})),a.createElement("div",{className:"md:hidden space-y-4"},I&&M.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading bookings...")):M.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(sh,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No bookings found")):a.createElement(a.Fragment,null,M.map(Fe=>a.createElement("div",{key:Fe._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"min-w-0 flex-1"},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ih[Fe.status]?.color||"bg-gray-100 text-gray-700"}`},Ih[Fe.status]?.label||Fe.status)),a.createElement("p",{className:"font-medium text-gray-900 truncate"},Fe.userId?.name||"Unknown User"),a.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},Fe.userId?.email||"-"))),a.createElement("div",{className:"p-2 bg-gray-50 rounded-lg"},a.createElement("p",{className:"text-xs text-gray-500"},"Session"),a.createElement("p",{className:"font-medium text-gray-900 text-sm truncate"},Fe.sessionId?.title||"Unknown Session")),a.createElement("div",{className:"grid grid-cols-2 gap-2 text-center"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Scheduled"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},bO(Fe.scheduledSlot))),a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Amount"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},wf(Fe.amountPaid)))),(Fe.status==="pending"||Fe.status==="confirmed")&&a.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},Fe.status==="pending"&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>Gr(Fe._id,"confirmed"),disabled:St,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors"},a.createElement(Js,{className:"h-4 w-4"}),"Confirm"),a.createElement("button",{onClick:()=>Gr(Fe._id,"cancelled"),disabled:St,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors"},a.createElement(zn,{className:"h-4 w-4"}),"Cancel")),Fe.status==="confirmed"&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>Gr(Fe._id,"completed"),disabled:St,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors"},a.createElement(Js,{className:"h-4 w-4"}),"Complete"),a.createElement("button",{onClick:()=>Gr(Fe._id,"no_show"),disabled:St,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},a.createElement(sh,{className:"h-4 w-4"}),"No Show"))))),R.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Pn,{currentPage:R.currentPage,totalPages:R.totalPages,totalItems:R.totalCount,itemsPerPage:R.limit,onPageChange:V,itemLabel:"bookings"}))))),a.createElement(Hce,{isOpen:Y,onClose:Cr,onSubmit:La,isLoading:fe,serverError:Se,sessionToEdit:we}),a.createElement(Yce,{isOpen:he,onClose:Ls,session:se,isLoading:K}),a.createElement(ha,{isOpen:ae,onClose:Je,onConfirm:rt,title:"Delete Session",message:`Are you sure you want to delete the session "${se?.title}"? This action can be undone by restoring from deleted sessions.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:fe}))}const Nf={BASE:"/web/sos/quizzes",GET_BY_ID:e=>`/web/sos/quizzes/${e}`,UPDATE:e=>`/web/sos/quizzes/${e}`,DELETE:e=>`/web/sos/quizzes/${e}`},Sf={getAll:async(e={})=>{const{page:t=1,limit:r=10,sortBy:n="createdAt",sortOrder:i="desc",programId:o="",dayNumber:d="",isActive:g=""}=e,h=new URLSearchParams;h.append("page",t.toString()),h.append("limit",r.toString()),h.append("sortBy",n),h.append("sortOrder",i),o&&h.append("programId",o),d&&h.append("dayNumber",d.toString()),g!==""&&h.append("isActive",g);const x=`${Nf.BASE}?${h.toString()}`;return console.log("[SOSQuizService] Fetching quizzes:",x),Xe(Ye.get(x))},getById:async e=>e?(console.log("[SOSQuizService] Fetching quiz:",e),Xe(Ye.get(Nf.GET_BY_ID(e)))):(console.error("[SOSQuizService] getById: No ID provided"),{success:!1,error:"Quiz ID is required"}),create:async e=>(console.log("[SOSQuizService] Creating quiz:",e.title,"for program:",e.programId,"day:",e.dayNumber),e.programId?e.dayNumber?Xe(Ye.post(Nf.BASE,e)):(console.error("[SOSQuizService] create: No dayNumber provided"),{success:!1,error:"Day number is required"}):(console.error("[SOSQuizService] create: No programId provided"),{success:!1,error:"Program ID is required"})),update:async(e,t)=>{if(!e)return console.error("[SOSQuizService] update: No ID provided"),{success:!1,error:"Quiz ID is required"};console.log("[SOSQuizService] Updating quiz:",e);const{programId:r,dayNumber:n,...i}=t;return(r||n)&&console.warn("[SOSQuizService] Ignoring programId and dayNumber in update - these cannot be changed"),Xe(Ye.put(Nf.UPDATE(e),i))},delete:async e=>e?(console.log("[SOSQuizService] Deleting quiz:",e),Xe(Ye.delete(Nf.DELETE(e)))):(console.error("[SOSQuizService] delete: No ID provided"),{success:!1,error:"Quiz ID is required"}),buildQuestion:e=>{const{questionText:t,questionType:r,options:n=[],points:i=5}=e,o={questionText:t,questionType:r,points:i};return(r==="scale"||r==="single-choice"||r==="multiple-choice")&&(o.options=n.map((d,g)=>({text:d.text,value:d.value??g+1}))),o}};function Qce(e={}){const[t,r]=N.useState([]),[n,i]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[o,d]=N.useState({programId:"",dayNumber:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e}),[g,h]=N.useState(!1),[x,y]=N.useState(null),w=N.useRef(null),C=N.useCallback(async(L=n.currentPage)=>{h(!0),y(null);try{const H={page:L,limit:n.limit,sortBy:o.sortBy,sortOrder:o.sortOrder,...o.programId&&{programId:o.programId},...o.dayNumber&&{dayNumber:o.dayNumber},...o.isActive!==""&&{isActive:o.isActive}};console.log("[useSOSQuizzes] Fetching quizzes with params:",H);const V=await Sf.getAll(H);V.success?(r(V.data.quizzes||[]),i({currentPage:V.data.pagination?.currentPage||1,totalPages:V.data.pagination?.totalPages||0,totalCount:V.data.pagination?.totalCount||0,limit:V.data.pagination?.limit||10}),console.log("[useSOSQuizzes] Fetched quizzes:",V.data.quizzes?.length)):(console.error("[useSOSQuizzes] Failed to fetch quizzes:",V.message),y(V.message||"Failed to fetch quizzes"),r([]))}catch(H){console.error("[useSOSQuizzes] Error fetching quizzes:",H),y("Failed to fetch quizzes"),r([])}finally{h(!1)}},[o,n.limit]),_=N.useCallback(async L=>{try{console.log("[useSOSQuizzes] Creating quiz:",L.title,"for program:",L.programId);const H=await Sf.create(L);return H.success?(console.log("[useSOSQuizzes] Quiz created successfully"),await C(1),{success:!0,data:H.data}):(console.error("[useSOSQuizzes] Failed to create quiz:",H.message),{success:!1,error:H.message,validationErrors:H.error})}catch(H){return console.error("[useSOSQuizzes] Error creating quiz:",H),{success:!1,error:"Failed to create quiz"}}},[C]),D=N.useCallback(async L=>{try{console.log("[useSOSQuizzes] Fetching quiz by ID:",L);const H=await Sf.getById(L);return H.success?{success:!0,data:H.data.quiz}:(console.error("[useSOSQuizzes] Failed to fetch quiz:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useSOSQuizzes] Error fetching quiz:",H),{success:!1,error:"Failed to fetch quiz details"}}},[]),k=N.useCallback(async(L,H)=>{try{console.log("[useSOSQuizzes] Updating quiz:",L);const V=await Sf.update(L,H);return V.success?(console.log("[useSOSQuizzes] Quiz updated successfully"),r(Q=>Q.map(Y=>Y._id===L?{...Y,...V.data.quiz}:Y)),{success:!0,data:V.data}):(console.error("[useSOSQuizzes] Failed to update quiz:",V.message),{success:!1,error:V.message,validationErrors:V.error})}catch(V){return console.error("[useSOSQuizzes] Error updating quiz:",V),{success:!1,error:"Failed to update quiz"}}},[]),M=N.useCallback(async L=>{try{console.log("[useSOSQuizzes] Deleting quiz:",L);const H=await Sf.delete(L);return H.success?(console.log("[useSOSQuizzes] Quiz deleted successfully"),r(V=>V.filter(Q=>Q._id!==L)),i(V=>({...V,totalCount:V.totalCount-1,totalPages:Math.ceil((V.totalCount-1)/V.limit)})),{success:!0}):(console.error("[useSOSQuizzes] Failed to delete quiz:",H.message),{success:!1,error:H.message})}catch(H){return console.error("[useSOSQuizzes] Error deleting quiz:",H),{success:!1,error:"Failed to delete quiz"}}},[]),R=N.useCallback(L=>{w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{d(H=>({...H,programId:L}))},300)},[]),F=N.useCallback(L=>{d(H=>({...H,...L}))},[]),I=N.useCallback(()=>{d({programId:"",dayNumber:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),G=N.useCallback(L=>{C(L)},[C]),U=N.useCallback(L=>{i(H=>({...H,limit:L}))},[]),z=N.useCallback(()=>{y(null)},[]);return N.useEffect(()=>{C(1)},[o]),N.useEffect(()=>()=>{w.current&&clearTimeout(w.current)},[]),{quizzes:t,pagination:n,filters:o,isLoading:g,error:x,fetchQuizzes:C,createQuiz:_,getQuizById:D,updateQuiz:k,deleteQuiz:M,filterByProgram:R,updateFilters:F,resetFilters:I,changePage:G,changeLimit:U,clearError:z}}const mo={BASE:"/web/sos/programs",GET_BY_ID:e=>`/web/sos/programs/${e}`,UPDATE:e=>`/web/sos/programs/${e}`,DELETE:e=>`/web/sos/programs/${e}`,TOGGLE_STATUS:e=>`/web/sos/programs/${e}/toggle-status`,STATS:e=>`/web/sos/programs/${e}/stats`,QUIZZES:e=>`/web/sos/programs/${e}/quizzes`},ho={getAll:async(e={})=>{const{page:t=1,limit:r=10,sortBy:n="createdAt",sortOrder:i="desc",type:o="",isActive:d="",search:g=""}=e,h=new URLSearchParams;h.append("page",t.toString()),h.append("limit",r.toString()),h.append("sortBy",n),h.append("sortOrder",i),o&&h.append("type",o),d!==""&&h.append("isActive",d),g&&h.append("search",g);const x=`${mo.BASE}?${h.toString()}`;return console.log("[SOSProgramService] Fetching programs:",x),Xe(Ye.get(x))},getById:async e=>e?(console.log("[SOSProgramService] Fetching program:",e),Xe(Ye.get(mo.GET_BY_ID(e)))):(console.error("[SOSProgramService] getById: No ID provided"),{success:!1,error:"Program ID is required"}),create:async e=>(console.log("[SOSProgramService] Creating program:",e.title),Xe(Ye.post(mo.BASE,e))),update:async(e,t)=>e?(console.log("[SOSProgramService] Updating program:",e),Xe(Ye.put(mo.UPDATE(e),t))):(console.error("[SOSProgramService] update: No ID provided"),{success:!1,error:"Program ID is required"}),delete:async e=>e?(console.log("[SOSProgramService] Deleting program:",e),Xe(Ye.delete(mo.DELETE(e)))):(console.error("[SOSProgramService] delete: No ID provided"),{success:!1,error:"Program ID is required"}),toggleStatus:async e=>e?(console.log("[SOSProgramService] Toggling status for program:",e),Xe(Ye.patch(mo.TOGGLE_STATUS(e)))):(console.error("[SOSProgramService] toggleStatus: No ID provided"),{success:!1,error:"Program ID is required"}),getStats:async e=>e?(console.log("[SOSProgramService] Fetching stats for program:",e),Xe(Ye.get(mo.STATS(e)))):(console.error("[SOSProgramService] getStats: No ID provided"),{success:!1,error:"Program ID is required"}),getQuizzes:async e=>e?(console.log("[SOSProgramService] Fetching quizzes for program:",e),Xe(Ye.get(mo.QUIZZES(e)))):(console.error("[SOSProgramService] getQuizzes: No ID provided"),{success:!1,error:"Program ID is required"})};function Jce(e={}){const[t,r]=N.useState([]),[n,i]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[o,d]=N.useState({search:"",type:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e}),[g,h]=N.useState(!1),[x,y]=N.useState(null),w=N.useRef(null),C=N.useCallback(async(Q=n.currentPage)=>{h(!0),y(null);try{const Y={page:Q,limit:n.limit,sortBy:o.sortBy,sortOrder:o.sortOrder,...o.search&&{search:o.search},...o.type&&{type:o.type},...o.isActive!==""&&{isActive:o.isActive}};console.log("[useSOSPrograms] Fetching programs with params:",Y);const X=await ho.getAll(Y);X.success?(r(X.data.programs||[]),i({currentPage:X.data.pagination?.currentPage||1,totalPages:X.data.pagination?.totalPages||0,totalCount:X.data.pagination?.totalCount||0,limit:X.data.pagination?.limit||10}),console.log("[useSOSPrograms] Fetched programs:",X.data.programs?.length)):(console.error("[useSOSPrograms] Failed to fetch programs:",X.message),y(X.message||"Failed to fetch programs"),r([]))}catch(Y){console.error("[useSOSPrograms] Error fetching programs:",Y),y("Failed to fetch programs"),r([])}finally{h(!1)}},[o,n.limit]),_=N.useCallback(async Q=>{try{console.log("[useSOSPrograms] Creating program:",Q.title);const Y=await ho.create(Q);return Y.success?(console.log("[useSOSPrograms] Program created successfully"),await C(1),{success:!0,data:Y.data}):(console.error("[useSOSPrograms] Failed to create program:",Y.message),{success:!1,error:Y.message,validationErrors:Y.error})}catch(Y){return console.error("[useSOSPrograms] Error creating program:",Y),{success:!1,error:"Failed to create program"}}},[C]),D=N.useCallback(async Q=>{try{console.log("[useSOSPrograms] Fetching program by ID:",Q);const Y=await ho.getById(Q);return Y.success?{success:!0,data:Y.data.program}:(console.error("[useSOSPrograms] Failed to fetch program:",Y.message),{success:!1,error:Y.message})}catch(Y){return console.error("[useSOSPrograms] Error fetching program:",Y),{success:!1,error:"Failed to fetch program details"}}},[]),k=N.useCallback(async Q=>{try{console.log("[useSOSPrograms] Fetching stats for program:",Q);const Y=await ho.getStats(Q);return Y.success?{success:!0,data:Y.data}:(console.error("[useSOSPrograms] Failed to fetch program stats:",Y.message),{success:!1,error:Y.message})}catch(Y){return console.error("[useSOSPrograms] Error fetching program stats:",Y),{success:!1,error:"Failed to fetch program statistics"}}},[]),M=N.useCallback(async Q=>{try{console.log("[useSOSPrograms] Fetching quizzes for program:",Q);const Y=await ho.getQuizzes(Q);return Y.success?{success:!0,data:Y.data}:(console.error("[useSOSPrograms] Failed to fetch program quizzes:",Y.message),{success:!1,error:Y.message})}catch(Y){return console.error("[useSOSPrograms] Error fetching program quizzes:",Y),{success:!1,error:"Failed to fetch program quizzes"}}},[]),R=N.useCallback(async(Q,Y)=>{try{console.log("[useSOSPrograms] Updating program:",Q);const X=await ho.update(Q,Y);return X.success?(console.log("[useSOSPrograms] Program updated successfully"),r(he=>he.map(xe=>xe._id===Q?{...xe,...X.data.program}:xe)),{success:!0,data:X.data}):(console.error("[useSOSPrograms] Failed to update program:",X.message),{success:!1,error:X.message,validationErrors:X.error})}catch(X){return console.error("[useSOSPrograms] Error updating program:",X),{success:!1,error:"Failed to update program"}}},[]),F=N.useCallback(async(Q,Y)=>{try{console.log("[useSOSPrograms] Toggling status for program:",Q);const X=await ho.toggleStatus(Q);return X.success?(console.log("[useSOSPrograms] Program status toggled successfully"),r(he=>he.map(xe=>xe._id===Q?{...xe,isActive:!Y}:xe)),{success:!0}):(console.error("[useSOSPrograms] Failed to toggle program status:",X.message),{success:!1,error:X.message})}catch(X){return console.error("[useSOSPrograms] Error toggling program status:",X),{success:!1,error:"Failed to update program status"}}},[]),I=N.useCallback(async Q=>{try{console.log("[useSOSPrograms] Deleting program:",Q);const Y=await ho.delete(Q);return Y.success?(console.log("[useSOSPrograms] Program deleted successfully"),r(X=>X.filter(he=>he._id!==Q)),i(X=>({...X,totalCount:X.totalCount-1,totalPages:Math.ceil((X.totalCount-1)/X.limit)})),{success:!0}):(console.error("[useSOSPrograms] Failed to delete program:",Y.message),{success:!1,error:Y.message})}catch(Y){return console.error("[useSOSPrograms] Error deleting program:",Y),{success:!1,error:"Failed to delete program"}}},[]),G=N.useCallback(Q=>{w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{d(Y=>({...Y,search:Q}))},300)},[]),U=N.useCallback(Q=>{d(Y=>({...Y,...Q}))},[]),z=N.useCallback(()=>{d({search:"",type:"",isActive:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),L=N.useCallback(Q=>{C(Q)},[C]),H=N.useCallback(Q=>{i(Y=>({...Y,limit:Q}))},[]),V=N.useCallback(()=>{y(null)},[]);return N.useEffect(()=>{C(1)},[o]),N.useEffect(()=>()=>{w.current&&clearTimeout(w.current)},[]),{programs:t,pagination:n,filters:o,isLoading:g,error:x,fetchPrograms:C,createProgram:_,getProgramById:D,getProgramStats:k,getProgramQuizzes:M,updateProgram:R,toggleProgramStatus:F,deleteProgram:I,searchPrograms:G,updateFilters:U,resetFilters:z,changePage:L,changeLimit:H,clearError:V}}const vO=()=>({programId:"",dayNumber:"",title:"",description:"",questions:[],isActive:!0}),eue=()=>({questionText:"",questionType:"single-choice",options:[{text:"",value:1},{text:"",value:2}],points:5}),tue=[{value:"scale",label:"Scale (1-5)",description:"Rating scale from 1 to 5"},{value:"single-choice",label:"Single Choice",description:"Choose one option"},{value:"multiple-choice",label:"Multiple Choice",description:"Select multiple options"},{value:"boolean",label:"Yes/No",description:"True or false question"},{value:"text",label:"Text",description:"Free text response"}];function rue({isOpen:e,onClose:t,onSubmit:r,isLoading:n=!1,serverError:i=null,quizToEdit:o=null,programs:d=[],selectedProgram:g=null}){const[h,x]=N.useState(vO()),[y,w]=N.useState({}),[C,_]=N.useState("basic"),D=!!o,k=d.find(V=>V._id===h.programId)||g;N.useEffect(()=>{e&&(x(o?{programId:o.programId?._id||o.programId||"",dayNumber:o.dayNumber?.toString()||"",title:o.title||"",description:o.description||"",questions:o.questions?.map(V=>({questionText:V.questionText||"",questionType:V.questionType||"single-choice",options:V.options||[{text:"",value:1},{text:"",value:2}],points:V.points||5}))||[],isActive:o.isActive??!0}:{...vO(),programId:g?._id||""}),w({}),_("basic"))},[e,o,g]);const M=V=>{const Q={};if(!D&&!V.programId&&(Q.programId="Please select a program"),!D)if(!V.dayNumber)Q.dayNumber="Day number is required";else{const Y=parseInt(V.dayNumber,10);isNaN(Y)||Y<1?Q.dayNumber="Day number must be at least 1":k&&Y>k.durationDays&&(Q.dayNumber=`Day number cannot exceed program duration (${k.durationDays} days)`)}if(V.title.trim()?V.title.length>200&&(Q.title="Title must be less than 200 characters"):Q.title="Title is required",V.questions.length===0)Q.questions="At least one question is required";else{const Y=[];V.questions.forEach((X,he)=>{const xe={};X.questionText.trim()||(xe.questionText="Question text is required"),(X.questionType==="scale"||X.questionType==="single-choice"||X.questionType==="multiple-choice")&&X.options&&(X.options.some(ne=>!ne.text.trim())&&(xe.options="All options must have text"),X.options.length<2&&(xe.options="At least 2 options are required")),Object.keys(xe).length>0&&(Y[he]=xe)}),(Y.length>0||Object.keys(Y).some(X=>Y[X]))&&(Q.questionErrors=Y)}return{isValid:Object.keys(Q).length===0,errors:Q}},R=(V,Q)=>{x(Y=>({...Y,[V]:Q})),y[V]&&w(Y=>{const X={...Y};return delete X[V],X})},F=()=>{x(V=>({...V,questions:[...V.questions,eue()]}))},I=V=>{x(Q=>({...Q,questions:Q.questions.filter((Y,X)=>X!==V)}))},G=(V,Q,Y)=>{x(X=>({...X,questions:X.questions.map((he,xe)=>{if(xe!==V)return he;const ae={...he,[Q]:Y};return Q==="questionType"&&(Y==="scale"?ae.options=[{text:"Very Bad",value:1},{text:"Bad",value:2},{text:"Neutral",value:3},{text:"Good",value:4},{text:"Very Good",value:5}]:Y==="single-choice"||Y==="multiple-choice"?ae.options=[{text:"",value:1},{text:"",value:2}]:(Y==="boolean"||Y==="text")&&(ae.options=[])),ae})}))},U=V=>{x(Q=>({...Q,questions:Q.questions.map((Y,X)=>X!==V?Y:{...Y,options:[...Y.options,{text:"",value:Y.options.length+1}]})}))},z=(V,Q)=>{x(Y=>({...Y,questions:Y.questions.map((X,he)=>he!==V?X:{...X,options:X.options.filter((xe,ae)=>ae!==Q).map((xe,ae)=>({...xe,value:ae+1}))})}))},L=(V,Q,Y)=>{x(X=>({...X,questions:X.questions.map((he,xe)=>xe!==V?he:{...he,options:he.options.map((ae,ne)=>ne!==Q?ae:{...ae,text:Y})})}))},H=async V=>{V.preventDefault();const{isValid:Q,errors:Y}=M(h);if(!Q){w(Y),(Y.questions||Y.questionErrors)&&_("questions");return}const X={title:h.title.trim(),description:h.description.trim(),questions:h.questions.map(xe=>({questionText:xe.questionText.trim(),questionType:xe.questionType,points:xe.points,...xe.questionType==="scale"||xe.questionType==="single-choice"||xe.questionType==="multiple-choice"?{options:xe.options.map(ae=>({text:ae.text.trim(),value:ae.value}))}:{}})),isActive:h.isActive};D||(X.programId=h.programId,X.dayNumber=parseInt(h.dayNumber,10)),console.log("[SOSQuizForm] Submitting data:",X),(await r(X))?.success&&t()};return a.createElement(hn,{isOpen:e,onClose:t,title:D?"Edit SOS Quiz":"Create SOS Quiz",size:"xl"},a.createElement("form",{onSubmit:H,className:"space-y-4"},a.createElement("div",{className:"flex border-b border-gray-200"},a.createElement("button",{type:"button",onClick:()=>_("basic"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${C==="basic"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`},"Basic Info"),a.createElement("button",{type:"button",onClick:()=>_("questions"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${C==="questions"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`},"Questions (",h.questions.length,")")),a.createElement("div",{className:"max-h-[60vh] overflow-y-auto pr-2"},C==="basic"?a.createElement("div",{className:"space-y-4"},!D&&a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Program ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{value:h.programId,onChange:V=>R("programId",V.target.value),disabled:n||g,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${y.programId?"border-red-500":"border-gray-300"} ${n||g?"bg-gray-100":""}`},a.createElement("option",{value:""},"Select a program"),d.map(V=>a.createElement("option",{key:V._id,value:V._id},V.title," (",V.durationDays," days)"))),y.programId&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},y.programId)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Day Number ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",value:h.dayNumber,onChange:V=>R("dayNumber",V.target.value),placeholder:"e.g., 1",min:"1",max:k?.durationDays||365,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${y.dayNumber?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),y.dayNumber&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},y.dayNumber),k&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Program duration: ",k.durationDays," days"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Quiz Title ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:h.title,onChange:V=>R("title",V.target.value),placeholder:"e.g., Day 1: Introduction to Mindfulness",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${y.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),y.title&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},y.title)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Description",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("textarea",{value:h.description,onChange:V=>R("description",V.target.value),placeholder:"Brief description of this day's activities...",rows:3,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`})),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:h.isActive,onChange:V=>R("isActive",V.target.checked),disabled:n,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})),a.createElement("span",{className:"text-sm text-gray-700"},h.isActive?"Active":"Inactive"))):a.createElement("div",{className:"space-y-4"},y.questions&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg"},a.createElement("p",{className:"text-sm text-red-700"},y.questions)),h.questions.length===0?a.createElement("div",{className:"p-8 text-center border-2 border-dashed border-gray-200 rounded-lg"},a.createElement("p",{className:"text-gray-500 mb-3"},"No questions added yet"),a.createElement("button",{type:"button",onClick:F,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},a.createElement(dn,{className:"h-4 w-4"}),"Add Question")):a.createElement(a.Fragment,null,h.questions.map((V,Q)=>a.createElement("div",{key:Q,className:"p-4 border border-gray-200 rounded-lg space-y-3"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(vp,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"font-medium text-gray-700"},"Question ",Q+1)),a.createElement("button",{type:"button",onClick:()=>I(Q),className:"p-1 text-red-500 hover:bg-red-50 rounded"},a.createElement(gr,{className:"h-4 w-4"}))),a.createElement("div",null,a.createElement("input",{type:"text",value:V.questionText,onChange:Y=>G(Q,"questionText",Y.target.value),placeholder:"Enter your question...",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${y.questionErrors?.[Q]?.questionText?"border-red-500":"border-gray-300"}`}),y.questionErrors?.[Q]?.questionText&&a.createElement("p",{className:"text-red-600 text-xs mt-1"},y.questionErrors[Q].questionText)),a.createElement("div",{className:"grid grid-cols-2 gap-3"},a.createElement("div",null,a.createElement("label",{className:"block text-xs font-medium text-gray-600 mb-1"},"Type"),a.createElement("select",{value:V.questionType,onChange:Y=>G(Q,"questionType",Y.target.value),disabled:n,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},tue.map(Y=>a.createElement("option",{key:Y.value,value:Y.value},Y.label)))),a.createElement("div",null,a.createElement("label",{className:"block text-xs font-medium text-gray-600 mb-1"},"Points"),a.createElement("input",{type:"number",value:V.points,onChange:Y=>G(Q,"points",parseInt(Y.target.value)||0),min:"0",max:"100",disabled:n,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}))),(V.questionType==="scale"||V.questionType==="single-choice"||V.questionType==="multiple-choice")&&a.createElement("div",{className:"space-y-2"},a.createElement("label",{className:"block text-xs font-medium text-gray-600"},"Options"),V.options.map((Y,X)=>a.createElement("div",{key:X,className:"flex items-center gap-2"},a.createElement("span",{className:"text-xs text-gray-400 w-6"},X+1,"."),a.createElement("input",{type:"text",value:Y.text,onChange:he=>L(Q,X,he.target.value),placeholder:`Option ${X+1}`,disabled:n||V.questionType==="scale",className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),(V.questionType==="single-choice"||V.questionType==="multiple-choice")&&V.options.length>2&&a.createElement("button",{type:"button",onClick:()=>z(Q,X),className:"p-1 text-red-500 hover:bg-red-50 rounded"},a.createElement(gr,{className:"h-3 w-3"})))),(V.questionType==="single-choice"||V.questionType==="multiple-choice")&&a.createElement("button",{type:"button",onClick:()=>U(Q),className:"text-xs text-gray-600 hover:text-gray-800 flex items-center gap-1"},a.createElement(dn,{className:"h-3 w-3"}),"Add Option"),y.questionErrors?.[Q]?.options&&a.createElement("p",{className:"text-red-600 text-xs"},y.questionErrors[Q].options)))),a.createElement("button",{type:"button",onClick:F,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2"},a.createElement(dn,{className:"h-4 w-4"}),"Add Question")))),i&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},a.createElement(Vr,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},i)),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:t,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50"},n?a.createElement(a.Fragment,null,a.createElement(Nt,{className:"h-4 w-4 animate-spin"}),a.createElement("span",null,D?"Updating...":"Creating...")):a.createElement("span",null,D?"Update Quiz":"Create Quiz")))))}const EO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",nue={scale:"Scale (1-5)","single-choice":"Single Choice","multiple-choice":"Multiple Choice",boolean:"Yes/No",text:"Text Response"},aue={scale:Vu,"single-choice":g2,"multiple-choice":wj,boolean:_i,text:Tj};function sue({isOpen:e,onClose:t,quiz:r,isLoading:n=!1}){if(!e)return null;const i=r?.questions?.reduce((o,d)=>o+(d.points||0),0)||0;return a.createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto"},a.createElement("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:t}),a.createElement("div",{className:"relative min-h-full flex items-center justify-center p-4"},a.createElement("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden"},a.createElement("div",{className:"flex items-center justify-between p-6 border-b border-gray-200"},a.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Quiz Details"),a.createElement("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"},a.createElement(zn,{className:"h-5 w-5"}))),a.createElement("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},n?a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading quiz details...")):r?a.createElement("div",{className:"space-y-6"},a.createElement("div",null,a.createElement("div",{className:"flex items-center gap-2 mb-2"},a.createElement("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isActive?"Active":"Inactive"),r.dayNumber&&a.createElement("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700"},"Day ",r.dayNumber)),a.createElement("h3",{className:"text-xl font-semibold text-gray-900"},r.title)),r.programId&&a.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},a.createElement("p",{className:"text-xs text-gray-500 mb-1"},"Program"),a.createElement("p",{className:"font-medium text-gray-900"},r.programId.title||r.programId)),r.description&&a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-1"},"Description"),a.createElement("p",{className:"text-gray-600 whitespace-pre-wrap"},r.description)),a.createElement("div",{className:"grid grid-cols-3 gap-4"},a.createElement("div",{className:"bg-blue-50 rounded-lg p-4 text-center"},a.createElement($h,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-blue-700"},r.questions?.length||r.questionCount||0),a.createElement("p",{className:"text-xs text-blue-600"},"Questions")),a.createElement("div",{className:"bg-amber-50 rounded-lg p-4 text-center"},a.createElement(Vu,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-amber-700"},i),a.createElement("p",{className:"text-xs text-amber-600"},"Total Points")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4 text-center"},a.createElement(Hr,{className:"h-5 w-5 text-gray-500 mx-auto mb-1"}),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},"Day ",r.dayNumber||"-"),a.createElement("p",{className:"text-xs text-gray-500"},"Program Day"))),r.questions&&r.questions.length>0&&a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},a.createElement($h,{className:"h-4 w-4"}),"Questions"),a.createElement("div",{className:"space-y-3"},r.questions.map((o,d)=>{const g=aue[o.questionType]||$h;return a.createElement("div",{key:d,className:"p-3 border border-gray-200 rounded-lg"},a.createElement("div",{className:"flex items-start gap-3"},a.createElement("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-xs font-medium text-gray-600"},d+1),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-gray-900 font-medium"},o.questionText),a.createElement("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500"},a.createElement("span",{className:"flex items-center gap-1"},a.createElement(g,{className:"h-3 w-3"}),nue[o.questionType]||o.questionType),a.createElement("span",{className:"flex items-center gap-1"},a.createElement(Vu,{className:"h-3 w-3"}),o.points," pts")),o.options&&o.options.length>0&&a.createElement("div",{className:"mt-2 space-y-1"},o.options.map((h,x)=>a.createElement("div",{key:x,className:"flex items-center gap-2 text-sm text-gray-600"},a.createElement("span",{className:`w-4 h-4 border border-gray-300 flex-shrink-0 ${o.questionType==="multiple-choice"?"rounded":"rounded-full"}`}),a.createElement("span",null,h.text,o.questionType==="scale"&&a.createElement("span",{className:"text-gray-400 ml-1"},"(",h.value,")"))))),o.questionType==="boolean"&&a.createElement("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600"},a.createElement("span",{className:"flex items-center gap-1"},a.createElement(Nl,{className:"h-4 w-4 text-green-500"}),"Yes"),a.createElement("span",{className:"flex items-center gap-1"},a.createElement(Mc,{className:"h-4 w-4 text-red-500"}),"No")),o.questionType==="text"&&a.createElement("div",{className:"mt-2 text-sm text-gray-500 italic"},"Free text response"))))}))),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500"},a.createElement("span",null,"Created: ",EO(r.createdAt)),r.updatedAt&&r.updatedAt!==r.createdAt&&a.createElement("span",null,"Updated: ",EO(r.updatedAt))))):a.createElement("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500"},a.createElement("p",null,"No quiz data available"))),a.createElement("div",{className:"p-4 border-t border-gray-200 bg-gray-50"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},"Close")))))}const wO=()=>({title:"",description:"",type:"ISOS",durationDays:"",imageUrl:"",isActive:!1}),NO=[{value:"GSOS",label:"General SOS (GSOS)",description:"Single day quick programs"},{value:"ISOS",label:"Intensive SOS (ISOS)",description:"Multi-day structured programs (7D, 15D, 30D)"}];function iue({isOpen:e,onClose:t,onSubmit:r,isLoading:n=!1,serverError:i=null,programToEdit:o=null}){const[d,g]=N.useState(wO()),[h,x]=N.useState({}),y=!!o;N.useEffect(()=>{e&&(g(o?{title:o.title||"",description:o.description||"",type:o.type||"ISOS",durationDays:o.durationDays?.toString()||"",imageUrl:o.imageUrl||"",isActive:o.isActive??!1}:wO()),x({}))},[e,o]);const w=D=>{const k={};if(D.title.trim()?D.title.length>200&&(k.title="Title must be less than 200 characters"):k.title="Title is required",D.description.trim()?D.description.length>2e3&&(k.description="Description must be less than 2000 characters"):k.description="Description is required",!D.durationDays)k.durationDays="Duration is required";else{const M=parseInt(D.durationDays,10);isNaN(M)||M<1?k.durationDays="Duration must be at least 1 day":M>365&&(k.durationDays="Duration cannot exceed 365 days"),D.type==="GSOS"&&M!==1&&(k.durationDays="General SOS programs should be 1 day")}return D.imageUrl&&!/^https?:\/\/.+/.test(D.imageUrl)&&(k.imageUrl="Please provide a valid image URL"),{isValid:Object.keys(k).length===0,errors:k}},C=(D,k)=>{g(M=>{const R={...M,[D]:k};return D==="type"&&k==="GSOS"&&(R.durationDays="1"),R}),h[D]&&x(M=>{const R={...M};return delete R[D],R})},_=async D=>{D.preventDefault();const{isValid:k,errors:M}=w(d);if(!k){x(M);return}const R={title:d.title.trim(),description:d.description.trim(),type:d.type,durationDays:parseInt(d.durationDays,10),isActive:d.isActive};d.imageUrl.trim()&&(R.imageUrl=d.imageUrl.trim()),console.log("[SOSProgramForm] Submitting data:",R),(await r(R))?.success&&t()};return a.createElement(hn,{isOpen:e,onClose:t,title:y?"Edit SOS Program":"Create SOS Program",size:"lg"},a.createElement("form",{onSubmit:_,className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Program Title ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:d.title,onChange:D=>C("title",D.target.value),placeholder:"e.g., 7-Day Anxiety Relief Program",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.title&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.title)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Description ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("textarea",{value:d.description,onChange:D=>C("description",D.target.value),placeholder:"Describe what participants will achieve through this program...",rows:4,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${h.description?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.description&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.description)),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Program Type ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{value:d.type,onChange:D=>C("type",D.target.value),disabled:n||y,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n||y?"bg-gray-100":""}`},NO.map(D=>a.createElement("option",{key:D.value,value:D.value},D.label))),y&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Type cannot be changed after creation"),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},NO.find(D=>D.value===d.type)?.description)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Duration (Days) ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"number",value:d.durationDays,onChange:D=>C("durationDays",D.target.value),placeholder:"e.g., 7",min:"1",max:"365",disabled:n||y||d.type==="GSOS",className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.durationDays?"border-red-500":"border-gray-300"} ${n||y||d.type==="GSOS"?"bg-gray-100":""}`}),h.durationDays&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.durationDays),y&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Duration cannot be changed after creation"),d.type==="GSOS"&&!y&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Fixed to 1 day for General SOS"))),a.createElement(Cc,{label:"Program Image",value:d.imageUrl,onUpload:D=>C("imageUrl",D),disabled:n,error:h.imageUrl,type:"image",folder:"sos-programs",placeholder:"Drop image here or click to upload"}),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:d.isActive,onChange:D=>C("isActive",D.target.checked),disabled:n,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})),a.createElement("span",{className:"text-sm text-gray-700"},d.isActive?"Active (Visible to users)":"Inactive")),i&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},a.createElement(Vr,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},i)),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200 sticky bottom-0 bg-white"},a.createElement("button",{type:"button",onClick:t,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50"},n?a.createElement(a.Fragment,null,a.createElement(Nt,{className:"h-4 w-4 animate-spin"}),a.createElement("span",null,y?"Updating...":"Creating...")):a.createElement("span",null,y?"Update Program":"Create Program")))))}const gv=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-",lue={GSOS:"bg-blue-100 text-blue-700",ISOS:"bg-purple-100 text-purple-700"},SO={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-600"};function oue({isOpen:e,onClose:t,program:r,isLoading:n=!1,onFetchStats:i}){const[o,d]=N.useState(null),[g,h]=N.useState(!1),[x,y]=N.useState(null);return N.useEffect(()=>{(async()=>{if(!(!e||!r?._id||!i)){h(!0),y(null);try{const C=await i(r._id);C.success?d(C.data.stats):y(C.error||"Failed to load statistics")}catch(C){console.error("[SOSProgramDetailsModal] Error fetching stats:",C),y("Failed to load statistics")}finally{h(!1)}}})()},[e,r?._id,i]),N.useEffect(()=>{e||(d(null),y(null))},[e]),e?a.createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto"},a.createElement("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:t}),a.createElement("div",{className:"relative min-h-full flex items-center justify-center p-4"},a.createElement("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden"},a.createElement("div",{className:"flex items-center justify-between p-6 border-b border-gray-200"},a.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Program Details"),a.createElement("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"},a.createElement(zn,{className:"h-5 w-5"}))),a.createElement("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},n?a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading program details...")):r?a.createElement("div",{className:"space-y-6"},a.createElement("div",null,a.createElement("div",{className:"flex items-center gap-2 mb-2"},a.createElement("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${lue[r.type]}`},r.type==="GSOS"?"General SOS":"Intensive SOS"),a.createElement("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${r.isActive?SO.active:SO.inactive}`},r.isActive?"Active":"Inactive")),a.createElement("h3",{className:"text-xl font-semibold text-gray-900"},r.title)),r.description&&a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-1"},"Description"),a.createElement("p",{className:"text-gray-600 whitespace-pre-wrap"},r.description)),a.createElement("div",{className:"grid grid-cols-2 gap-4"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},a.createElement(Hr,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},"Duration")),a.createElement("p",{className:"font-semibold text-gray-900"},r.durationDays," ",r.durationDays===1?"Day":"Days")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},a.createElement(Cn,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},"Created")),a.createElement("p",{className:"font-semibold text-gray-900"},gv(r.createdAt)))),a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},a.createElement(Ei,{className:"h-4 w-4"}),"Statistics"),g?a.createElement("div",{className:"flex items-center justify-center py-8 bg-gray-50 rounded-lg"},a.createElement(Nt,{className:"h-6 w-6 text-gray-400 animate-spin"}),a.createElement("span",{className:"ml-2 text-sm text-gray-500"},"Loading statistics...")):x?a.createElement("div",{className:"p-4 bg-red-50 rounded-lg text-sm text-red-600"},x):o?a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3"},a.createElement("div",{className:"bg-blue-50 rounded-lg p-3 text-center"},a.createElement(fm,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-blue-700"},o.totalEnrolled||0),a.createElement("p",{className:"text-xs text-blue-600"},"Total Enrolled")),a.createElement("div",{className:"bg-amber-50 rounded-lg p-3 text-center"},a.createElement(Cn,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-amber-700"},o.inProgress||0),a.createElement("p",{className:"text-xs text-amber-600"},"In Progress")),a.createElement("div",{className:"bg-green-50 rounded-lg p-3 text-center"},a.createElement(V_,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-green-700"},o.completed||0),a.createElement("p",{className:"text-xs text-green-600"},"Completed")),a.createElement("div",{className:"bg-red-50 rounded-lg p-3 text-center"},a.createElement(Mc,{className:"h-5 w-5 text-red-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-red-700"},o.abandoned||0),a.createElement("p",{className:"text-xs text-red-600"},"Abandoned"))):a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg text-sm text-gray-500 text-center"},"No statistics available"),o&&a.createElement("div",{className:"grid grid-cols-3 gap-3 mt-3"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-3 text-center"},a.createElement(X_,{className:"h-4 w-4 text-gray-500 mx-auto mb-1"}),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},o.completionRate||0,"%"),a.createElement("p",{className:"text-xs text-gray-500"},"Completion Rate")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3 text-center"},a.createElement(q_,{className:"h-4 w-4 text-gray-500 mx-auto mb-1"}),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},o.quizCount||0,"/",r.durationDays),a.createElement("p",{className:"text-xs text-gray-500"},"Quizzes Created")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3 text-center"},a.createElement(Vu,{className:"h-4 w-4 text-gray-500 mx-auto mb-1"}),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},o.averageScore?.toFixed(1)||"-"),a.createElement("p",{className:"text-xs text-gray-500"},"Avg. Score")))),r.imageUrl&&a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-2"},"Program Image"),a.createElement("div",{className:"relative rounded-lg overflow-hidden bg-gray-100 aspect-video"},a.createElement("img",{src:r.imageUrl,alt:r.title,className:"w-full h-full object-cover",onError:w=>{w.target.style.display="none",w.target.parentElement.innerHTML='<div class="flex items-center justify-center h-full text-gray-400 text-sm">Failed to load image</div>'}}))),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500"},a.createElement("span",null,"Created: ",gv(r.createdAt)),r.updatedAt&&r.updatedAt!==r.createdAt&&a.createElement("span",null,"Updated: ",gv(r.updatedAt)),r.createdBy?.name&&a.createElement("span",null,"By: ",r.createdBy.name)))):a.createElement("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500"},a.createElement("p",null,"No program data available"))),a.createElement("div",{className:"p-4 border-t border-gray-200 bg-gray-50"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},"Close"))))):null}const go={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-600"},CO={GSOS:"bg-blue-100 text-blue-700",ISOS:"bg-purple-100 text-purple-700"};function cue(){const[e,t]=N.useState("quizzes"),{quizzes:r,pagination:n,filters:i,isLoading:o,error:d,fetchQuizzes:g,createQuiz:h,getQuizById:x,updateQuiz:y,deleteQuiz:w,filterByProgram:C,updateFilters:_,resetFilters:D,changePage:k,clearError:M}=Qce(),{programs:R,pagination:F,filters:I,isLoading:G,error:U,fetchPrograms:z,createProgram:L,getProgramById:H,getProgramStats:V,updateProgram:Q,toggleProgramStatus:Y,deleteProgram:X,searchPrograms:he,updateFilters:xe,resetFilters:ae,changePage:ne,clearError:se}=Jce(),[Te,we]=N.useState(!1),[te,K]=N.useState(!1),[ee,fe]=N.useState(!1),[ce,Se]=N.useState(null),[ie,oe]=N.useState(null),[He,ve]=N.useState(!1),[We,be]=N.useState(!1),[ye,je]=N.useState(!1),[Ze,Ie]=N.useState(!1),[ut,Le]=N.useState(null),[et,mt]=N.useState(null),[Er,tt]=N.useState(!1),[nt,Re]=N.useState(!1),[Be,St]=N.useState(null),[pt,ar]=N.useState(!1),[$r,Cr]=N.useState(i.programId||""),[La,pa]=N.useState(i.isActive||""),[Ls,Gt]=N.useState(!1),[ge,Je]=N.useState(I.search||""),[rt,_t]=N.useState(I.type||""),[Pr,Ba]=N.useState(I.isActive||"");N.useEffect(()=>{z(1)},[]);const Fa=N.useCallback(()=>{St(null),oe(null),we(!0)},[]),Pt=N.useCallback(async Ue=>{St(null),ve(!0);try{const ct=await x(Ue._id);ct.success?(oe(ct.data),we(!0)):alert(ct.error||"Failed to load quiz details")}catch(ct){console.error("[Quizes] Failed to load quiz for edit:",ct),alert("An unexpected error occurred")}finally{ve(!1)}},[x]),Gr=N.useCallback(()=>{we(!1),St(null),oe(null)},[]),ya=N.useCallback(async Ue=>{Re(!0),St(null);try{let ct;return ie?ct=await y(ie._id,Ue):ct=await h(Ue),ct.success?ct:(St(ct.error||"Failed to save quiz"),{success:!1})}catch(ct){return console.error("[Quizes] Form submission error:",ct),St("An unexpected error occurred"),{success:!1}}finally{Re(!1)}},[h,y,ie]),Ua=N.useCallback(async Ue=>{Se(Ue),K(!0),ve(!0);try{const ct=await x(Ue._id);ct.success&&Se(ct.data)}catch(ct){console.error("[Quizes] Failed to fetch details:",ct)}finally{ve(!1)}},[x]),Wr=N.useCallback(()=>{K(!1),Se(null)},[]),Fe=N.useCallback(Ue=>{Se(Ue),fe(!0)},[]),xt=N.useCallback(()=>{fe(!1),Se(null)},[]),$n=N.useCallback(async()=>{if(ce){Re(!0);try{const Ue=await w(ce._id);Ue.success?xt():alert(Ue.error||"Failed to delete quiz")}catch(Ue){console.error("[Quizes] Delete error:",Ue),alert("An unexpected error occurred")}finally{Re(!1)}}},[ce,w,xt]),ls=N.useCallback(()=>{_({programId:$r,isActive:La}),ar(!1)},[$r,La,_]),xa=N.useCallback(()=>{Cr(""),pa(""),D(),ar(!1)},[D]),Lc=N.useCallback(()=>{g(n.currentPage)},[g,n.currentPage]),ba=N.useCallback(()=>{St(null),mt(null),be(!0)},[]),Pi=N.useCallback(async Ue=>{St(null),tt(!0);try{const ct=await H(Ue._id);ct.success?(mt(ct.data),be(!0)):alert(ct.error||"Failed to load program details")}catch(ct){console.error("[Quizes] Failed to load program for edit:",ct),alert("An unexpected error occurred")}finally{tt(!1)}},[H]),gn=N.useCallback(()=>{be(!1),St(null),mt(null)},[]),ja=N.useCallback(async Ue=>{Re(!0),St(null);try{let ct;return et?ct=await Q(et._id,Ue):ct=await L(Ue),ct.success?ct:(St(ct.error||"Failed to save program"),{success:!1})}catch(ct){return console.error("[Quizes] Form submission error:",ct),St("An unexpected error occurred"),{success:!1}}finally{Re(!1)}},[L,Q,et]),Bn=N.useCallback(async Ue=>{Le(Ue),je(!0),tt(!0);try{const ct=await H(Ue._id);ct.success&&Le(ct.data)}catch(ct){console.error("[Quizes] Failed to fetch program details:",ct)}finally{tt(!1)}},[H]),st=N.useCallback(()=>{je(!1),Le(null)},[]),Fn=N.useCallback(async Ue=>{Re(!0);try{const ct=await Y(Ue._id,Ue.isActive);ct.success||alert(ct.error||"Failed to update program status")}catch(ct){console.error("[Quizes] Toggle status error:",ct),alert("An unexpected error occurred")}finally{Re(!1)}},[Y]),Rr=N.useCallback(Ue=>{Le(Ue),Ie(!0)},[]),Kt=N.useCallback(()=>{Ie(!1),Le(null)},[]),ia=N.useCallback(async()=>{if(ut){Re(!0);try{const Ue=await X(ut._id);Ue.success?Kt():alert(Ue.error||"Failed to delete program")}catch(Ue){console.error("[Quizes] Delete error:",Ue),alert("An unexpected error occurred")}finally{Re(!1)}}},[ut,X,Kt]),li=N.useCallback(Ue=>{const ct=Ue.target.value;Je(ct),he(ct)},[he]),Ol=N.useCallback(()=>{xe({search:ge,type:rt,isActive:Pr}),Gt(!1)},[ge,rt,Pr,xe]),va=N.useCallback(()=>{Je(""),_t(""),Ba(""),ae(),Gt(!1)},[ae]),Bc=N.useCallback(()=>{z(F.currentPage)},[z,F.currentPage]),oi=N.useMemo(()=>i.programId||i.isActive!=="",[i]),Gn=N.useMemo(()=>I.search||I.type||I.isActive!=="",[I]),Ar=N.useCallback(Ue=>Ue?typeof Ue=="object"&&Ue.title?Ue.title:R.find(wr=>wr._id===Ue)?.title||Ue:"-",[R]),Xt=N.useCallback(Ue=>Ue.questions?.reduce((ct,wr)=>ct+(wr.points||0),0)||Ue.totalPoints||0,[]);return a.createElement("div",{className:"space-y-4 sm:space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900"},"SOS Management"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Manage SOS programs and their daily quizzes")),a.createElement("button",{onClick:e==="quizzes"?Fa:ba,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},a.createElement(dn,{className:"h-5 w-5"}),a.createElement("span",null,e==="quizzes"?"Create Quiz":"Create Program"))),a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement("div",{className:"border-b border-gray-200"},a.createElement("nav",{className:"flex -mb-px"},a.createElement("button",{onClick:()=>t("programs"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="programs"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`},a.createElement(Bu,{className:"h-4 w-4 inline-block mr-2"}),"Programs (",F.totalCount||0,")"),a.createElement("button",{onClick:()=>t("quizzes"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="quizzes"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`},a.createElement(Gh,{className:"h-4 w-4 inline-block mr-2"}),"Quizzes (",n.totalCount||0,")")))),(e==="quizzes"?d:U)&&a.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},a.createElement(Vr,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("div",{className:"flex-1"},a.createElement("p",{className:"text-sm font-medium text-red-800"},"Error loading ",e==="quizzes"?"quizzes":"programs"),a.createElement("p",{className:"text-sm text-red-700 mt-0.5"},e==="quizzes"?d:U)),a.createElement("button",{onClick:e==="quizzes"?M:se,className:"shrink-0 text-red-600 hover:text-red-800"},"")),e==="programs"&&a.createElement(a.Fragment,null,a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},a.createElement("div",{className:"relative flex-1 max-w-md"},a.createElement(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",value:ge,onChange:li,placeholder:"Search programs...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),a.createElement("button",{onClick:()=>Gt(!Ls),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${Gn?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},a.createElement(Ti,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),Gn&&a.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(I.search?1:0)+(I.type?1:0)+(I.isActive!==""?1:0)),a.createElement(Ai,{className:`h-4 w-4 transition-transform ${Ls?"rotate-180":""}`})),a.createElement("button",{onClick:Bc,disabled:G,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},a.createElement(Oi,{className:`h-4 w-4 ${G?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"ml-auto text-sm text-gray-500"},F.totalCount," program",F.totalCount!==1?"s":""," total")),Ls&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Type"),a.createElement("select",{value:rt,onChange:Ue=>_t(Ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Types"),a.createElement("option",{value:"GSOS"},"General SOS (GSOS)"),a.createElement("option",{value:"ISOS"},"Intensive SOS (ISOS)"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),a.createElement("select",{value:Pr,onChange:Ue=>Ba(Ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"true"},"Active"),a.createElement("option",{value:"false"},"Inactive"))),a.createElement("div",{className:"flex items-end gap-2 sm:col-span-2"},a.createElement("button",{onClick:Ol,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),a.createElement("button",{onClick:va,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),a.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Program"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Type"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Duration"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,G&&R.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:5,className:"px-6 py-12 text-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading programs..."))):R.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:5,className:"px-6 py-12 text-center"},a.createElement(Bu,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No programs found"),a.createElement("button",{onClick:ba,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first program"))):R.map(Ue=>a.createElement("tr",{key:Ue._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"max-w-[300px]"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},Ue.title),Ue.description&&a.createElement("p",{className:"text-xs text-gray-500 truncate mt-0.5"},Ue.description))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${CO[Ue.type]}`},Ue.type==="GSOS"?"General":"Intensive")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-600"},a.createElement(Hr,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},Ue.durationDays," ",Ue.durationDays===1?"day":"days"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Ue.isActive?go.active:go.inactive}`},Ue.isActive?"Active":"Inactive")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>Fn(Ue),disabled:nt,className:`p-2 rounded-lg transition-colors ${Ue.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:Ue.isActive?"Set Inactive":"Set Active"},Ue.isActive?a.createElement(fl,{className:"h-5 w-5"}):a.createElement(_i,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>Bn(Ue),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},a.createElement(rn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>Pi(Ue),disabled:Er,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit program"},a.createElement(da,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>Rr(Ue),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},a.createElement(gr,{className:"h-4 w-4"}))))))))),F.totalPages>0&&a.createElement(Pn,{currentPage:F.currentPage,totalPages:F.totalPages,totalItems:F.totalCount,itemsPerPage:F.limit,onPageChange:ne,itemLabel:"programs"})),a.createElement("div",{className:"md:hidden space-y-4"},G&&R.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading programs...")):R.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Bu,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No programs found"),a.createElement("button",{onClick:ba,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first program")):a.createElement(a.Fragment,null,R.map(Ue=>a.createElement("div",{key:Ue._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"min-w-0 flex-1"},a.createElement("div",{className:"flex items-center gap-2 flex-wrap mb-1"},a.createElement("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${CO[Ue.type]}`},Ue.type),a.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ue.isActive?go.active:go.inactive}`},Ue.isActive?"Active":"Inactive")),a.createElement("p",{className:"font-medium text-gray-900 truncate"},Ue.title))),a.createElement("div",{className:"grid grid-cols-2 gap-2 text-center"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Duration"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Ue.durationDays," days")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Type"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Ue.type==="GSOS"?"General":"Intensive"))),a.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},a.createElement("button",{onClick:()=>Fn(Ue),disabled:nt,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Ue.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},Ue.isActive?a.createElement(a.Fragment,null,a.createElement(fl,{className:"h-4 w-4"}),"Active"):a.createElement(a.Fragment,null,a.createElement(_i,{className:"h-4 w-4"}),"Inactive")),a.createElement("button",{onClick:()=>Bn(Ue),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},a.createElement(rn,{className:"h-4 w-4"}),"Details"),a.createElement("button",{onClick:()=>Pi(Ue),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors"},a.createElement(da,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>Rr(Ue),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},a.createElement(gr,{className:"h-4 w-4"}))))),F.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Pn,{currentPage:F.currentPage,totalPages:F.totalPages,totalItems:F.totalCount,itemsPerPage:F.limit,onPageChange:ne,itemLabel:"programs"}))))),e==="quizzes"&&a.createElement(a.Fragment,null,a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},a.createElement("div",{className:"relative flex-1 max-w-md"},a.createElement("select",{value:$r,onChange:Ue=>{Cr(Ue.target.value),C(Ue.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Programs"),R.map(Ue=>a.createElement("option",{key:Ue._id,value:Ue._id},Ue.title," (",Ue.durationDays," days)")))),a.createElement("button",{onClick:()=>ar(!pt),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${oi?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},a.createElement(Ti,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),oi&&a.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},(i.programId?1:0)+(i.isActive!==""?1:0)),a.createElement(Ai,{className:`h-4 w-4 transition-transform ${pt?"rotate-180":""}`})),a.createElement("button",{onClick:Lc,disabled:o,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},a.createElement(Oi,{className:`h-4 w-4 ${o?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"ml-auto text-sm text-gray-500"},n.totalCount," quiz",n.totalCount!==1?"zes":""," total")),pt&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),a.createElement("select",{value:La,onChange:Ue=>pa(Ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"true"},"Active"),a.createElement("option",{value:"false"},"Inactive"))),a.createElement("div",{className:"flex items-end gap-2 sm:col-span-2 lg:col-span-3"},a.createElement("button",{onClick:ls,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),a.createElement("button",{onClick:xa,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),a.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Quiz"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Program"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Day"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Questions"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Points"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,o&&r.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading quizzes..."))):r.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(Gh,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No quizzes found"),a.createElement("button",{onClick:Fa,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first quiz"))):r.map(Ue=>a.createElement("tr",{key:Ue._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"max-w-[200px]"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},Ue.title),Ue.description&&a.createElement("p",{className:"text-xs text-gray-500 truncate mt-0.5"},Ue.description))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"text-sm text-gray-700 truncate max-w-[150px] block"},Ar(Ue.programId))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-1.5 text-gray-600"},a.createElement(Hr,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Day ",Ue.dayNumber||"-"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-1.5"},a.createElement($h,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-sm text-gray-700"},Ue.questions?.length||Ue.questionCount||0))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-1.5"},a.createElement(Vu,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"text-sm text-gray-700"},Xt(Ue)))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Ue.isActive?go.active:go.inactive}`},Ue.isActive?"Active":"Inactive")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>Ua(Ue),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},a.createElement(rn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>Pt(Ue),disabled:He,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit quiz"},a.createElement(da,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>Fe(Ue),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},a.createElement(gr,{className:"h-4 w-4"}))))))))),n.totalPages>0&&a.createElement(Pn,{currentPage:n.currentPage,totalPages:n.totalPages,totalItems:n.totalCount,itemsPerPage:n.limit,onPageChange:k,itemLabel:"quizzes"})),a.createElement("div",{className:"md:hidden space-y-4"},o&&r.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading quizzes...")):r.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Gh,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No quizzes found"),a.createElement("button",{onClick:Fa,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first quiz")):a.createElement(a.Fragment,null,r.map(Ue=>a.createElement("div",{key:Ue._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"min-w-0 flex-1"},a.createElement("div",{className:"flex items-center gap-2 flex-wrap mb-1"},a.createElement("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-700"},"Day ",Ue.dayNumber||"-"),a.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ue.isActive?go.active:go.inactive}`},Ue.isActive?"Active":"Inactive")),a.createElement("p",{className:"font-medium text-gray-900 truncate"},Ue.title),a.createElement("p",{className:"text-xs text-gray-500 mt-0.5 truncate"},Ar(Ue.programId)))),a.createElement("div",{className:"grid grid-cols-2 gap-2 text-center"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Questions"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Ue.questions?.length||Ue.questionCount||0)),a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("p",{className:"text-xs text-gray-500"},"Total Points"),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Xt(Ue)))),a.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},a.createElement("button",{onClick:()=>Ua(Ue),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},a.createElement(rn,{className:"h-4 w-4"}),"Details"),a.createElement("button",{onClick:()=>Pt(Ue),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors"},a.createElement(da,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>Fe(Ue),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},a.createElement(gr,{className:"h-4 w-4"}))))),n.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Pn,{currentPage:n.currentPage,totalPages:n.totalPages,totalItems:n.totalCount,itemsPerPage:n.limit,onPageChange:k,itemLabel:"quizzes"}))))),a.createElement(rue,{isOpen:Te,onClose:Gr,onSubmit:ya,isLoading:nt,serverError:Be,quizToEdit:ie,programs:R}),a.createElement(sue,{isOpen:te,onClose:Wr,quiz:ce,isLoading:He}),a.createElement(ha,{isOpen:ee,onClose:xt,onConfirm:$n,title:"Delete Quiz",message:`Are you sure you want to delete the quiz "${ce?.title}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:nt}),a.createElement(iue,{isOpen:We,onClose:gn,onSubmit:ja,isLoading:nt,serverError:Be,programToEdit:et}),a.createElement(oue,{isOpen:ye,onClose:st,program:ut,isLoading:Er,onFetchStats:V}),a.createElement(ha,{isOpen:Ze,onClose:Kt,onConfirm:ia,title:"Delete Program",message:`Are you sure you want to delete the program "${ut?.title}"? This will also affect all associated quizzes and user progress.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:nt}))}const po={BASE:"/web/challenges",GET_BY_ID:e=>`/web/challenges/${e}`,UPDATE:e=>`/web/challenges/${e}`,DELETE:e=>`/web/challenges/${e}`,TOGGLE_STATUS:e=>`/web/challenges/${e}/toggle-status`,STATS:e=>`/web/challenges/${e}/stats`,PARTICIPANTS:e=>`/web/challenges/${e}/participants`},yo={getAll:async(e={})=>{const{page:t=1,limit:r=10,sortBy:n="createdAt",sortOrder:i="desc",isActive:o="",search:d="",category:g="",difficulty:h=""}=e,x=new URLSearchParams;x.append("page",t.toString()),x.append("limit",r.toString()),x.append("sortBy",n),x.append("sortOrder",i),o!==""&&x.append("isActive",o),d&&x.append("search",d),g&&x.append("category",g),h&&x.append("difficulty",h);const y=`${po.BASE}?${x.toString()}`;return console.log("[ChallengeService] Fetching challenges:",y),Xe(Ye.get(y))},getById:async e=>e?(console.log("[ChallengeService] Fetching challenge:",e),Xe(Ye.get(po.GET_BY_ID(e)))):(console.error("[ChallengeService] getById: No ID provided"),{success:!1,error:"Challenge ID is required"}),create:async e=>(console.log("[ChallengeService] Creating challenge:",e.title),!e.tasks||e.tasks.length===0?(console.error("[ChallengeService] create: No tasks provided"),{success:!1,error:"At least one task is required"}):Xe(Ye.post(po.BASE,e))),update:async(e,t)=>e?(console.log("[ChallengeService] Updating challenge:",e),Xe(Ye.put(po.UPDATE(e),t))):(console.error("[ChallengeService] update: No ID provided"),{success:!1,error:"Challenge ID is required"}),delete:async e=>e?(console.log("[ChallengeService] Deleting challenge:",e),Xe(Ye.delete(po.DELETE(e)))):(console.error("[ChallengeService] delete: No ID provided"),{success:!1,error:"Challenge ID is required"}),toggleStatus:async e=>e?(console.log("[ChallengeService] Toggling status for challenge:",e),Xe(Ye.patch(po.TOGGLE_STATUS(e)))):(console.error("[ChallengeService] toggleStatus: No ID provided"),{success:!1,error:"Challenge ID is required"}),getStats:async e=>e?(console.log("[ChallengeService] Fetching stats for challenge:",e),Xe(Ye.get(po.STATS(e)))):(console.error("[ChallengeService] getStats: No ID provided"),{success:!1,error:"Challenge ID is required"}),getParticipants:async(e,t={})=>{if(!e)return console.error("[ChallengeService] getParticipants: No ID provided"),{success:!1,error:"Challenge ID is required"};const{page:r=1,limit:n=10,status:i=""}=t,o=new URLSearchParams;o.append("page",r.toString()),o.append("limit",n.toString()),i&&o.append("status",i);const d=`${po.PARTICIPANTS(e)}?${o.toString()}`;return console.log("[ChallengeService] Fetching participants:",d),Xe(Ye.get(d))},buildTask:e=>{const{title:t,description:r=""}=e;return{title:t,description:r}}};function uue(e={}){const[t,r]=N.useState([]),[n,i]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:10}),[o,d]=N.useState({search:"",isActive:"",category:"",difficulty:"",sortBy:"createdAt",sortOrder:"desc",...e}),[g,h]=N.useState(!1),[x,y]=N.useState(null),w=N.useRef(null),C=N.useCallback(async(Q=n.currentPage)=>{h(!0),y(null);try{const Y={page:Q,limit:n.limit,sortBy:o.sortBy,sortOrder:o.sortOrder,...o.search&&{search:o.search},...o.isActive!==""&&{isActive:o.isActive},...o.category&&{category:o.category},...o.difficulty&&{difficulty:o.difficulty}};console.log("[useChallenges] Fetching challenges with params:",Y);const X=await yo.getAll(Y);X.success?(r(X.data.challenges||[]),i({currentPage:X.data.pagination?.currentPage||1,totalPages:X.data.pagination?.totalPages||0,totalCount:X.data.pagination?.totalCount||0,limit:X.data.pagination?.limit||10}),console.log("[useChallenges] Fetched challenges:",X.data.challenges?.length)):(console.error("[useChallenges] Failed to fetch challenges:",X.message),y(X.message||"Failed to fetch challenges"),r([]))}catch(Y){console.error("[useChallenges] Error fetching challenges:",Y),y("Failed to fetch challenges"),r([])}finally{h(!1)}},[o,n.limit]),_=N.useCallback(async Q=>{try{console.log("[useChallenges] Creating challenge:",Q.title);const Y=await yo.create(Q);return Y.success?(console.log("[useChallenges] Challenge created successfully"),await C(1),{success:!0,data:Y.data}):(console.error("[useChallenges] Failed to create challenge:",Y.message),{success:!1,error:Y.message,validationErrors:Y.error})}catch(Y){return console.error("[useChallenges] Error creating challenge:",Y),{success:!1,error:"Failed to create challenge"}}},[C]),D=N.useCallback(async Q=>{try{console.log("[useChallenges] Fetching challenge by ID:",Q);const Y=await yo.getById(Q);return Y.success?{success:!0,data:Y.data.challenge}:(console.error("[useChallenges] Failed to fetch challenge:",Y.message),{success:!1,error:Y.message})}catch(Y){return console.error("[useChallenges] Error fetching challenge:",Y),{success:!1,error:"Failed to fetch challenge details"}}},[]),k=N.useCallback(async Q=>{try{console.log("[useChallenges] Fetching stats for challenge:",Q);const Y=await yo.getStats(Q);return Y.success?{success:!0,data:Y.data}:(console.error("[useChallenges] Failed to fetch challenge stats:",Y.message),{success:!1,error:Y.message})}catch(Y){return console.error("[useChallenges] Error fetching challenge stats:",Y),{success:!1,error:"Failed to fetch challenge statistics"}}},[]),M=N.useCallback(async(Q,Y={})=>{try{console.log("[useChallenges] Fetching participants for challenge:",Q);const X=await yo.getParticipants(Q,Y);return X.success?{success:!0,data:X.data}:(console.error("[useChallenges] Failed to fetch participants:",X.message),{success:!1,error:X.message})}catch(X){return console.error("[useChallenges] Error fetching participants:",X),{success:!1,error:"Failed to fetch challenge participants"}}},[]),R=N.useCallback(async(Q,Y)=>{try{console.log("[useChallenges] Updating challenge:",Q);const X=await yo.update(Q,Y);return X.success?(console.log("[useChallenges] Challenge updated successfully"),r(he=>he.map(xe=>xe._id===Q?{...xe,...X.data.challenge}:xe)),{success:!0,data:X.data}):(console.error("[useChallenges] Failed to update challenge:",X.message),{success:!1,error:X.message,validationErrors:X.error})}catch(X){return console.error("[useChallenges] Error updating challenge:",X),{success:!1,error:"Failed to update challenge"}}},[]),F=N.useCallback(async(Q,Y)=>{try{console.log("[useChallenges] Toggling status for challenge:",Q);const X=await yo.toggleStatus(Q);return X.success?(console.log("[useChallenges] Challenge status toggled successfully"),r(he=>he.map(xe=>xe._id===Q?{...xe,isActive:!Y}:xe)),{success:!0}):(console.error("[useChallenges] Failed to toggle challenge status:",X.message),{success:!1,error:X.message})}catch(X){return console.error("[useChallenges] Error toggling challenge status:",X),{success:!1,error:"Failed to update challenge status"}}},[]),I=N.useCallback(async Q=>{try{console.log("[useChallenges] Deleting challenge:",Q);const Y=await yo.delete(Q);return Y.success?(console.log("[useChallenges] Challenge deleted successfully"),r(X=>X.filter(he=>he._id!==Q)),i(X=>({...X,totalCount:X.totalCount-1,totalPages:Math.ceil((X.totalCount-1)/X.limit)})),{success:!0}):(console.error("[useChallenges] Failed to delete challenge:",Y.message),{success:!1,error:Y.message})}catch(Y){return console.error("[useChallenges] Error deleting challenge:",Y),{success:!1,error:"Failed to delete challenge"}}},[]),G=N.useCallback(Q=>{w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{d(Y=>({...Y,search:Q}))},300)},[]),U=N.useCallback(Q=>{d(Y=>({...Y,...Q}))},[]),z=N.useCallback(()=>{d({search:"",isActive:"",category:"",difficulty:"",sortBy:"createdAt",sortOrder:"desc",...e})},[e]),L=N.useCallback(Q=>{C(Q)},[C]),H=N.useCallback(Q=>{i(Y=>({...Y,limit:Q}))},[]),V=N.useCallback(()=>{y(null)},[]);return N.useEffect(()=>{C(1)},[o]),N.useEffect(()=>()=>{w.current&&clearTimeout(w.current)},[]),{challenges:t,pagination:n,filters:o,isLoading:g,error:x,fetchChallenges:C,createChallenge:_,getChallengeById:D,getChallengeStats:k,getChallengeParticipants:M,updateChallenge:R,toggleChallengeStatus:F,deleteChallenge:I,searchChallenges:G,updateFilters:U,resetFilters:z,changePage:L,changeLimit:H,clearError:V}}const due=[{value:"health",label:"Health"},{value:"fitness",label:"Fitness"},{value:"mindfulness",label:"Mindfulness"},{value:"productivity",label:"Productivity"},{value:"social",label:"Social"},{value:"creativity",label:"Creativity"},{value:"learning",label:"Learning"},{value:"wellness",label:"Wellness"},{value:"habit",label:"Habit"},{value:"other",label:"Other"}],fue=[{value:"easy",label:"Easy",description:"Suitable for beginners"},{value:"medium",label:"Medium",description:"Moderate effort required"},{value:"hard",label:"Hard",description:"Challenging for experienced users"}],AO=()=>({title:"",description:"",category:"",difficulty:"medium",tasks:[],durationDays:"",imageUrl:"",isActive:!1}),mue=()=>({title:"",description:""});function hue({isOpen:e,onClose:t,onSubmit:r,isLoading:n=!1,serverError:i=null,challengeToEdit:o=null}){const[d,g]=N.useState(AO()),[h,x]=N.useState({}),[y,w]=N.useState("basic"),C=!!o;N.useEffect(()=>{e&&(g(o?{title:o.title||"",description:o.description||"",category:o.category||"",difficulty:o.difficulty||"medium",tasks:o.tasks?.map(I=>({title:I.title||"",description:I.description||""}))||[],durationDays:o.durationDays?.toString()||"",imageUrl:o.imageUrl||"",isActive:o.isActive??!1}:AO()),x({}),w("basic"))},[e,o]);const _=I=>{const G={};if(I.title.trim()?I.title.length>200&&(G.title="Title must be less than 200 characters"):G.title="Title is required",I.description.trim()?I.description.length>2e3&&(G.description="Description must be less than 2000 characters"):G.description="Description is required",I.category||(G.category="Category is required"),I.durationDays){const U=parseInt(I.durationDays,10);isNaN(U)||U<1?G.durationDays="Duration must be at least 1 day":U>365&&(G.durationDays="Duration cannot exceed 365 days")}if(I.imageUrl&&!/^https?:\/\/.+/.test(I.imageUrl)&&(G.imageUrl="Please provide a valid image URL"),I.tasks.length===0)G.tasks="At least one task is required";else{const U=[];I.tasks.forEach((z,L)=>{const H={};z.title.trim()||(H.title="Task title is required"),Object.keys(H).length>0&&(U[L]=H)}),(U.length>0||Object.keys(U).some(z=>U[z]))&&(G.taskErrors=U)}return{isValid:Object.keys(G).length===0,errors:G}},D=(I,G)=>{g(U=>({...U,[I]:G})),h[I]&&x(U=>{const z={...U};return delete z[I],z})},k=()=>{g(I=>({...I,tasks:[...I.tasks,mue()]}))},M=I=>{g(G=>({...G,tasks:G.tasks.filter((U,z)=>z!==I)}))},R=(I,G,U)=>{g(z=>({...z,tasks:z.tasks.map((L,H)=>H!==I?L:{...L,[G]:U})}))},F=async I=>{I.preventDefault();const{isValid:G,errors:U}=_(d);if(!G){x(U),(U.tasks||U.taskErrors)&&w("tasks");return}const z={title:d.title.trim(),description:d.description.trim(),category:d.category,difficulty:d.difficulty,tasks:d.tasks.map((H,V)=>({title:H.title.trim(),description:H.description.trim(),order:V})),isActive:d.isActive};d.durationDays&&(z.durationDays=parseInt(d.durationDays,10)),d.imageUrl.trim()&&(z.imageUrl=d.imageUrl.trim()),console.log("[ChallengeForm] Submitting data:",z),(await r(z))?.success&&t()};return a.createElement(hn,{isOpen:e,onClose:t,title:C?"Edit Challenge":"Create Challenge",size:"xl"},a.createElement("form",{onSubmit:F,className:"space-y-4"},a.createElement("div",{className:"flex border-b border-gray-200"},a.createElement("button",{type:"button",onClick:()=>w("basic"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${y==="basic"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`},"Basic Info"),a.createElement("button",{type:"button",onClick:()=>w("tasks"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${y==="tasks"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700"}`},"Tasks (",d.tasks.length,")")),a.createElement("div",{className:"max-h-[60vh] overflow-y-auto pr-2"},y==="basic"?a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Challenge Title ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:d.title,onChange:I=>D("title",I.target.value),placeholder:"e.g., 30-Day Fitness Challenge",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.title?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.title&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.title)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Description ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("textarea",{value:d.description,onChange:I=>D("description",I.target.value),placeholder:"Describe what participants will achieve through this challenge...",rows:4,disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none transition-colors ${h.description?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.description&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.description)),a.createElement("div",{className:"grid grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Category ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{value:d.category,onChange:I=>D("category",I.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.category?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`},a.createElement("option",{value:""},"Select a category"),due.map(I=>a.createElement("option",{key:I.value,value:I.value},I.label))),h.category&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.category)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Difficulty"),a.createElement("select",{value:d.difficulty,onChange:I=>D("difficulty",I.target.value),disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors border-gray-300 ${n?"bg-gray-100":""}`},fue.map(I=>a.createElement("option",{key:I.value,value:I.value},I.label))))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Duration (Days)",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("input",{type:"number",value:d.durationDays,onChange:I=>D("durationDays",I.target.value),placeholder:"e.g., 30",min:"1",max:"365",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.durationDays?"border-red-500":"border-gray-300"} ${n?"bg-gray-100":""}`}),h.durationDays&&a.createElement("p",{className:"text-red-600 text-sm mt-1"},h.durationDays),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Duration of the challenge in days. Leave empty for no time limit.")),a.createElement(Cc,{label:"Challenge Image",value:d.imageUrl,onUpload:I=>D("imageUrl",I),disabled:n,error:h.imageUrl,type:"image",folder:"challenges",placeholder:"Drop image here or click to upload"}),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:d.isActive,onChange:I=>D("isActive",I.target.checked),disabled:n,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})),a.createElement("span",{className:"text-sm text-gray-700"},d.isActive?"Active (Visible to users)":"Inactive"))):a.createElement("div",{className:"space-y-4"},h.tasks&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg"},a.createElement("p",{className:"text-sm text-red-700"},h.tasks)),d.tasks.length===0?a.createElement("div",{className:"p-8 text-center border-2 border-dashed border-gray-200 rounded-lg"},a.createElement("p",{className:"text-gray-500 mb-3"},"No tasks added yet"),a.createElement("button",{type:"button",onClick:k,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},a.createElement(dn,{className:"h-4 w-4"}),"Add Task")):a.createElement(a.Fragment,null,d.tasks.map((I,G)=>a.createElement("div",{key:G,className:"p-4 border border-gray-200 rounded-lg space-y-3"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(vp,{className:"h-4 w-4 text-gray-400"}),a.createElement("span",{className:"font-medium text-gray-700"},"Task ",G+1)),a.createElement("button",{type:"button",onClick:()=>M(G),className:"p-1 text-red-500 hover:bg-red-50 rounded"},a.createElement(gr,{className:"h-4 w-4"}))),a.createElement("div",null,a.createElement("label",{className:"block text-xs font-medium text-gray-600 mb-1"},"Title ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:I.title,onChange:U=>R(G,"title",U.target.value),placeholder:"e.g., Do 20 pushups",disabled:n,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none transition-colors ${h.taskErrors?.[G]?.title?"border-red-500":"border-gray-300"}`}),h.taskErrors?.[G]?.title&&a.createElement("p",{className:"text-red-600 text-xs mt-1"},h.taskErrors[G].title)),a.createElement("div",null,a.createElement("label",{className:"block text-xs font-medium text-gray-600 mb-1"},"Description",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("textarea",{value:I.description,onChange:U=>R(G,"description",U.target.value),placeholder:"Additional details about this task...",rows:2,disabled:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none resize-none transition-colors"})))),a.createElement("button",{type:"button",onClick:k,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2"},a.createElement(dn,{className:"h-4 w-4"}),"Add Task")))),i&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},a.createElement(Vr,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("p",{className:"text-sm text-red-700"},i)),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:t,disabled:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50"},n?a.createElement(a.Fragment,null,a.createElement(Nt,{className:"h-4 w-4 animate-spin"}),a.createElement("span",null,C?"Updating...":"Creating...")):a.createElement("span",null,C?"Update Challenge":"Create Challenge")))))}const TO=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"-",pv={easy:{color:"bg-green-100 text-green-700",label:"Easy"},medium:{color:"bg-amber-100 text-amber-700",label:"Medium"},hard:{color:"bg-red-100 text-red-700",label:"Hard"}},OO=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"-";function gue({isOpen:e,onClose:t,challenge:r,isLoading:n=!1,onFetchStats:i}){const[o,d]=N.useState(null),[g,h]=N.useState(!1),[x,y]=N.useState(null);return N.useEffect(()=>{(async()=>{if(!(!e||!r?._id||!i)){h(!0),y(null);try{const C=await i(r._id);C.success?d(C.data.stats||C.data):y(C.error||"Failed to load statistics")}catch(C){console.error("[ChallengeDetailsModal] Error fetching stats:",C),y("Failed to load statistics")}finally{h(!1)}}})()},[e,r?._id,i]),N.useEffect(()=>{e||(d(null),y(null))},[e]),e?a.createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto"},a.createElement("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:t}),a.createElement("div",{className:"relative min-h-full flex items-center justify-center p-4"},a.createElement("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden"},a.createElement("div",{className:"flex items-center justify-between p-6 border-b border-gray-200"},a.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Challenge Details"),a.createElement("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"},a.createElement(zn,{className:"h-5 w-5"}))),a.createElement("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},n?a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading challenge details...")):r?a.createElement("div",{className:"space-y-6"},a.createElement("div",null,a.createElement("div",{className:"flex items-center gap-2 mb-2"},a.createElement("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isActive?"Active":"Inactive"),r.category&&a.createElement("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700"},TO(r.category)),r.difficulty&&a.createElement("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${pv[r.difficulty]?.color||"bg-gray-100 text-gray-700"}`},pv[r.difficulty]?.label||r.difficulty),r.durationDays&&a.createElement("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700"},r.durationDays," Days")),a.createElement("h3",{className:"text-xl font-semibold text-gray-900"},r.title)),r.description&&a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-1"},"Description"),a.createElement("p",{className:"text-gray-600 whitespace-pre-wrap"},r.description)),a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4"},a.createElement("div",{className:"bg-blue-50 rounded-lg p-4 text-center"},a.createElement(og,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-blue-700"},r.tasks?.length||0),a.createElement("p",{className:"text-xs text-blue-600"},"Tasks")),a.createElement("div",{className:"bg-purple-50 rounded-lg p-4 text-center"},a.createElement(Lf,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),a.createElement("p",{className:"text-lg font-semibold text-purple-700"},TO(r.category)),a.createElement("p",{className:"text-xs text-purple-600"},"Category")),a.createElement("div",{className:"bg-amber-50 rounded-lg p-4 text-center"},a.createElement(W_,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),a.createElement("p",{className:"text-lg font-semibold text-amber-700"},pv[r.difficulty]?.label||"Medium"),a.createElement("p",{className:"text-xs text-amber-600"},"Difficulty")),a.createElement("div",{className:"bg-gray-50 rounded-lg p-4 text-center"},a.createElement(Hr,{className:"h-5 w-5 text-gray-500 mx-auto mb-1"}),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},r.durationDays?`${r.durationDays}d`:"No Limit"),a.createElement("p",{className:"text-xs text-gray-500"},"Duration"))),r.tasks&&r.tasks.length>0&&a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},a.createElement(og,{className:"h-4 w-4"}),"Tasks (",r.tasks.length,")"),a.createElement("div",{className:"space-y-2"},r.tasks.map((w,C)=>a.createElement("div",{key:C,className:"p-3 border border-gray-200 rounded-lg"},a.createElement("div",{className:"flex items-start gap-3"},a.createElement("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-xs font-medium text-gray-600"},C+1),a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900"},w.title),w.description&&a.createElement("p",{className:"text-sm text-gray-500 mt-1"},w.description))))))),a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},a.createElement(Ei,{className:"h-4 w-4"}),"Statistics"),g?a.createElement("div",{className:"flex items-center justify-center py-8 bg-gray-50 rounded-lg"},a.createElement(Nt,{className:"h-6 w-6 text-gray-400 animate-spin"}),a.createElement("span",{className:"ml-2 text-sm text-gray-500"},"Loading statistics...")):x?a.createElement("div",{className:"p-4 bg-red-50 rounded-lg text-sm text-red-600"},x):o?a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3"},a.createElement("div",{className:"bg-blue-50 rounded-lg p-3 text-center"},a.createElement(fm,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-blue-700"},o.totalParticipants||0),a.createElement("p",{className:"text-xs text-blue-600"},"Participants")),a.createElement("div",{className:"bg-amber-50 rounded-lg p-3 text-center"},a.createElement(Cn,{className:"h-5 w-5 text-amber-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-amber-700"},o.activeParticipants||0),a.createElement("p",{className:"text-xs text-amber-600"},"Active")),a.createElement("div",{className:"bg-green-50 rounded-lg p-3 text-center"},a.createElement(V_,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-green-700"},o.completedParticipants||0),a.createElement("p",{className:"text-xs text-green-600"},"Completed")),a.createElement("div",{className:"bg-purple-50 rounded-lg p-3 text-center"},a.createElement(Vu,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),a.createElement("p",{className:"text-2xl font-bold text-purple-700"},o.averageTasksCompleted||0),a.createElement("p",{className:"text-xs text-purple-600"},"Avg. Tasks Done"))):a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg text-sm text-gray-500 text-center"},"No statistics available")),r.imageUrl&&a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-2"},"Challenge Image"),a.createElement("div",{className:"relative rounded-lg overflow-hidden bg-gray-100 aspect-video"},a.createElement("img",{src:r.imageUrl,alt:r.title,className:"w-full h-full object-cover",onError:w=>{w.target.style.display="none",w.target.parentElement.innerHTML='<div class="flex items-center justify-center h-full text-gray-400 text-sm">Failed to load image</div>'}}))),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500"},a.createElement("span",null,"Created: ",OO(r.createdAt)),r.updatedAt&&r.updatedAt!==r.createdAt&&a.createElement("span",null,"Updated: ",OO(r.updatedAt)),r.createdBy?.name&&a.createElement("span",null,"By: ",r.createdBy.name)))):a.createElement("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500"},a.createElement("p",null,"No challenge data available"))),a.createElement("div",{className:"p-4 border-t border-gray-200 bg-gray-50"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},"Close"))))):null}const _O=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"-",pue=[{value:"health",label:"Health"},{value:"fitness",label:"Fitness"},{value:"mindfulness",label:"Mindfulness"},{value:"productivity",label:"Productivity"},{value:"social",label:"Social"},{value:"creativity",label:"Creativity"},{value:"learning",label:"Learning"},{value:"wellness",label:"Wellness"},{value:"habit",label:"Habit"},{value:"other",label:"Other"}],Lh={easy:{color:"bg-green-100 text-green-700",label:"Easy"},medium:{color:"bg-amber-100 text-amber-700",label:"Medium"},hard:{color:"bg-red-100 text-red-700",label:"Hard"}},Bh={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-600"};function yue(){const{challenges:e,pagination:t,filters:r,isLoading:n,error:i,fetchChallenges:o,createChallenge:d,getChallengeById:g,getChallengeStats:h,updateChallenge:x,toggleChallengeStatus:y,deleteChallenge:w,searchChallenges:C,updateFilters:_,resetFilters:D,changePage:k,clearError:M}=uue(),[R,F]=N.useState(!1),[I,G]=N.useState(!1),[U,z]=N.useState(!1),[L,H]=N.useState(null),[V,Q]=N.useState(null),[Y,X]=N.useState(!1),[he,xe]=N.useState(!1),[ae,ne]=N.useState(null),[se,Te]=N.useState(!1),[we,te]=N.useState(r.search||""),[K,ee]=N.useState(r.isActive||""),[fe,ce]=N.useState(r.category||""),[Se,ie]=N.useState(r.difficulty||""),oe=N.useCallback(()=>{ne(null),Q(null),F(!0)},[]),He=N.useCallback(async Re=>{ne(null),X(!0);try{const Be=await g(Re._id);Be.success?(Q(Be.data),F(!0)):alert(Be.error||"Failed to load challenge details")}catch(Be){console.error("[Challenges] Failed to load challenge for edit:",Be),alert("An unexpected error occurred")}finally{X(!1)}},[g]),ve=N.useCallback(()=>{F(!1),ne(null),Q(null)},[]),We=N.useCallback(async Re=>{xe(!0),ne(null);try{let Be;return V?Be=await x(V._id,Re):Be=await d(Re),Be.success?Be:(ne(Be.error||"Failed to save challenge"),{success:!1})}catch(Be){return console.error("[Challenges] Form submission error:",Be),ne("An unexpected error occurred"),{success:!1}}finally{xe(!1)}},[d,x,V]),be=N.useCallback(async Re=>{H(Re),G(!0),X(!0);try{const Be=await g(Re._id);Be.success&&H(Be.data)}catch(Be){console.error("[Challenges] Failed to fetch details:",Be)}finally{X(!1)}},[g]),ye=N.useCallback(()=>{G(!1),H(null)},[]),je=N.useCallback(async Re=>{xe(!0);try{const Be=await y(Re._id,Re.isActive);Be.success||alert(Be.error||"Failed to update challenge status")}catch(Be){console.error("[Challenges] Toggle status error:",Be),alert("An unexpected error occurred")}finally{xe(!1)}},[y]),Ze=N.useCallback(Re=>{H(Re),z(!0)},[]),Ie=N.useCallback(()=>{z(!1),H(null)},[]),ut=N.useCallback(async()=>{if(L){xe(!0);try{const Re=await w(L._id);Re.success?Ie():alert(Re.error||"Failed to delete challenge")}catch(Re){console.error("[Challenges] Delete error:",Re),alert("An unexpected error occurred")}finally{xe(!1)}}},[L,w,Ie]),Le=N.useCallback(Re=>{const Be=Re.target.value;te(Be),C(Be)},[C]),et=N.useCallback(()=>{_({search:we,isActive:K,category:fe,difficulty:Se}),Te(!1)},[we,K,fe,Se,_]),mt=N.useCallback(()=>{te(""),ee(""),ce(""),ie(""),D(),Te(!1)},[D]),Er=N.useCallback(()=>{o(t.currentPage)},[o,t.currentPage]),tt=N.useMemo(()=>r.search||r.isActive!==""||r.category||r.difficulty,[r]),nt=N.useMemo(()=>{let Re=0;return r.search&&Re++,r.isActive!==""&&Re++,r.category&&Re++,r.difficulty&&Re++,Re},[r]);return a.createElement("div",{className:"space-y-4 sm:space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900"},"Challenges"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Create and manage task-based challenges for users")),a.createElement("button",{onClick:oe,className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors font-medium"},a.createElement(dn,{className:"h-5 w-5"}),a.createElement("span",null,"Create Challenge"))),i&&a.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3"},a.createElement(Vr,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),a.createElement("div",{className:"flex-1"},a.createElement("p",{className:"text-sm font-medium text-red-800"},"Error loading challenges"),a.createElement("p",{className:"text-sm text-red-700 mt-0.5"},i)),a.createElement("button",{onClick:M,className:"shrink-0 text-red-600 hover:text-red-800"},"")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},a.createElement("div",{className:"relative flex-1 max-w-md"},a.createElement(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",value:we,onChange:Le,placeholder:"Search challenges...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"})),a.createElement("button",{onClick:()=>Te(!se),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${tt?"border-gray-800 bg-gray-50 text-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`},a.createElement(Ti,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),tt&&a.createElement("span",{className:"px-1.5 py-0.5 bg-gray-800 text-white text-xs rounded-full"},nt),a.createElement(Ai,{className:`h-4 w-4 transition-transform ${se?"rotate-180":""}`})),a.createElement("button",{onClick:Er,disabled:n,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50"},a.createElement(Oi,{className:`h-4 w-4 ${n?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"ml-auto text-sm text-gray-500"},t.totalCount," challenge",t.totalCount!==1?"s":""," total")),se&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Category"),a.createElement("select",{value:fe,onChange:Re=>ce(Re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Categories"),pue.map(Re=>a.createElement("option",{key:Re.value,value:Re.value},Re.label)))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Difficulty"),a.createElement("select",{value:Se,onChange:Re=>ie(Re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Difficulties"),a.createElement("option",{value:"easy"},"Easy"),a.createElement("option",{value:"medium"},"Medium"),a.createElement("option",{value:"hard"},"Hard"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Status"),a.createElement("select",{value:K,onChange:Re=>ee(Re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"},a.createElement("option",{value:""},"All Status"),a.createElement("option",{value:"true"},"Active"),a.createElement("option",{value:"false"},"Inactive"))),a.createElement("div",{className:"flex items-end gap-2"},a.createElement("button",{onClick:et,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Apply"),a.createElement("button",{onClick:mt,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Reset"))))),a.createElement("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-hidden"},a.createElement("div",{className:"overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Challenge"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Tasks"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Category"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Difficulty"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Duration"),a.createElement("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-600"},"Status"),a.createElement("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-600"},"Actions"))),a.createElement("tbody",null,n&&e.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading challenges..."))):e.length===0?a.createElement("tr",null,a.createElement("td",{colSpan:7,className:"px-6 py-12 text-center"},a.createElement(Bu,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No challenges found"),a.createElement("button",{onClick:oe,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first challenge"))):e.map(Re=>a.createElement("tr",{key:Re._id,className:"border-b border-gray-100 hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"max-w-[300px]"},a.createElement("p",{className:"font-medium text-gray-900 truncate"},Re.title),Re.description&&a.createElement("p",{className:"text-xs text-gray-500 truncate mt-0.5"},Re.description))),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-600"},a.createElement(og,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},Re.tasks?.length||Re.taskCount||0," tasks"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700"},a.createElement(Lf,{className:"h-3 w-3"}),_O(Re.category))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${Lh[Re.difficulty]?.color||"bg-gray-100 text-gray-700"}`},a.createElement(W_,{className:"h-3 w-3"}),Lh[Re.difficulty]?.label||"Medium")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center gap-2 text-gray-600"},a.createElement(Hr,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm"},Re.durationDays?`${Re.durationDays} days`:"No limit"))),a.createElement("td",{className:"px-6 py-4"},a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Re.isActive?Bh.active:Bh.inactive}`},Re.isActive?"Active":"Inactive")),a.createElement("td",{className:"px-6 py-4"},a.createElement("div",{className:"flex items-center justify-end gap-1"},a.createElement("button",{onClick:()=>je(Re),disabled:he,className:`p-2 rounded-lg transition-colors ${Re.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:Re.isActive?"Set Inactive":"Set Active"},Re.isActive?a.createElement(fl,{className:"h-5 w-5"}):a.createElement(_i,{className:"h-5 w-5"})),a.createElement("button",{onClick:()=>be(Re),className:"p-2 text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",title:"View details"},a.createElement(rn,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>He(Re),disabled:Y,className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit challenge"},a.createElement(da,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>Ze(Re),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},a.createElement(gr,{className:"h-4 w-4"}))))))))),t.totalPages>0&&a.createElement(Pn,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:k,itemLabel:"challenges"})),a.createElement("div",{className:"md:hidden space-y-4"},n&&e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Nt,{className:"h-8 w-8 text-gray-800 animate-spin mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading challenges...")):e.length===0?a.createElement("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center"},a.createElement(Bu,{className:"h-12 w-12 text-gray-300 mx-auto"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No challenges found"),a.createElement("button",{onClick:oe,className:"mt-3 text-sm text-gray-800 hover:text-black font-medium"},"Create your first challenge")):a.createElement(a.Fragment,null,e.map(Re=>a.createElement("div",{key:Re._id,className:"bg-white rounded-xl shadow-sm p-4 space-y-3"},a.createElement("div",{className:"flex items-start justify-between gap-3"},a.createElement("div",{className:"min-w-0 flex-1"},a.createElement("div",{className:"flex items-center gap-2 flex-wrap mb-1"},a.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Re.isActive?Bh.active:Bh.inactive}`},Re.isActive?"Active":"Inactive"),Re.category&&a.createElement("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-700"},_O(Re.category)),Re.difficulty&&a.createElement("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${Lh[Re.difficulty]?.color||"bg-gray-100 text-gray-700"}`},Lh[Re.difficulty]?.label||"Medium"),Re.durationDays&&a.createElement("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700"},Re.durationDays," days")),a.createElement("p",{className:"font-medium text-gray-900 truncate"},Re.title),Re.description&&a.createElement("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2"},Re.description))),a.createElement("div",{className:"grid grid-cols-2 gap-2 text-center"},a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("div",{className:"flex items-center justify-center gap-1 text-gray-500"},a.createElement(og,{className:"h-3 w-3"}),a.createElement("p",{className:"text-xs"},"Tasks")),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Re.tasks?.length||Re.taskCount||0)),a.createElement("div",{className:"bg-gray-50 rounded-lg p-2"},a.createElement("div",{className:"flex items-center justify-center gap-1 text-gray-500"},a.createElement(Hr,{className:"h-3 w-3"}),a.createElement("p",{className:"text-xs"},"Duration")),a.createElement("p",{className:"font-semibold text-gray-900 text-sm"},Re.durationDays?`${Re.durationDays}d`:"No limit"))),a.createElement("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100"},a.createElement("button",{onClick:()=>je(Re),disabled:he,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Re.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},Re.isActive?a.createElement(a.Fragment,null,a.createElement(fl,{className:"h-4 w-4"}),"Active"):a.createElement(a.Fragment,null,a.createElement(_i,{className:"h-4 w-4"}),"Inactive")),a.createElement("button",{onClick:()=>be(Re),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors"},a.createElement(rn,{className:"h-4 w-4"}),"Details"),a.createElement("button",{onClick:()=>He(Re),className:"p-2 text-amber-600 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors"},a.createElement(da,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>Ze(Re),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},a.createElement(gr,{className:"h-4 w-4"}))))),t.totalPages>0&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Pn,{currentPage:t.currentPage,totalPages:t.totalPages,totalItems:t.totalCount,itemsPerPage:t.limit,onPageChange:k,itemLabel:"challenges"})))),a.createElement(hue,{isOpen:R,onClose:ve,onSubmit:We,isLoading:he,serverError:ae,challengeToEdit:V}),a.createElement(gue,{isOpen:I,onClose:ye,challenge:L,isLoading:Y,onFetchStats:h}),a.createElement(ha,{isOpen:U,onClose:Ie,onConfirm:ut,title:"Delete Challenge",message:`Are you sure you want to delete the challenge "${L?.title}"? This will also affect all participant progress.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:he}))}const Su={BASE:"/web/polls",BY_EVENT:"/web/polls/event"},Cu={create:async e=>{console.log("[PollService] Creating poll for event:",e.eventId);const t=await Xe(Ye.post(Su.BASE,e));return t.success?console.log("[PollService] Created poll:",t.data?._id):console.error("[PollService] Failed to create poll:",t.message),t},getByEventId:async e=>{console.log("[PollService] Fetching poll for event:",e);const t=await Xe(Ye.get(`${Su.BY_EVENT}/${e}`));return t.success?console.log("[PollService] Fetched poll:",t.data?._id):console.error("[PollService] Failed to fetch poll:",t.message),t},update:async(e,t)=>{console.log("[PollService] Updating poll:",e);const r=await Xe(Ye.put(`${Su.BASE}/${e}`,t));return r.success?console.log("[PollService] Updated poll successfully"):console.error("[PollService] Failed to update poll:",r.message),r},delete:async e=>{console.log("[PollService] Deleting poll:",e);const t=await Xe(Ye.delete(`${Su.BASE}/${e}`));return t.success?console.log("[PollService] Deleted poll successfully"):console.error("[PollService] Failed to delete poll:",t.message),t},getStats:async e=>{console.log("[PollService] Fetching stats for poll:",e);const t=await Xe(Ye.get(`${Su.BASE}/${e}/stats`));return t.success?console.log("[PollService] Fetched poll stats, total submissions:",t.data?.totalSubmissions):console.error("[PollService] Failed to fetch poll stats:",t.message),t},notifyUsers:async e=>{console.log("[PollService] Sending notification for poll:",e);const t=await Xe(Ye.post(`${Su.BASE}/${e}/notify`));return t.success?console.log("[PollService] Notification sent, success:",t.data?.successCount,"failed:",t.data?.failureCount):console.error("[PollService] Failed to send notification:",t.message),t}},DO=(e=null)=>({questions:e?.questions?.length>0?e.questions.map(t=>({questionText:t.questionText||"",options:t.options?.length>0?[...t.options]:["",""]})):[{questionText:"",options:["",""]}],isActive:e?.isActive??!0}),xue=e=>{const t={};if(!e.questions||e.questions.length===0)return t.questions="At least one question is required",{isValid:!1,errors:t};const r=[];return e.questions.forEach((n,i)=>{const o={};n.questionText?.trim()?n.questionText.length>500&&(o.questionText="Question text must be 500 characters or less"):o.questionText="Question text is required";const d=n.options?.filter(h=>h?.trim())||[];d.length<2&&(o.options="At least 2 options are required"),new Set(d.map(h=>h.trim().toLowerCase())).size!==d.length&&(o.options="Options must be unique"),Object.keys(o).length>0&&(r[i]=o)}),r.some(n=>n)&&(t.questionErrors=r),{isValid:Object.keys(t).length===0,errors:t}};function kO({isOpen:e,onClose:t,onSubmit:r,poll:n=null,event:i=null,isLoading:o=!1,serverError:d=null}){const g=!!n,[h,x]=N.useState(DO(n)),[y,w]=N.useState({});N.useEffect(()=>{e&&(x(DO(n)),w({}),console.log("[PollForm] Form initialized:",{isEditMode:g,poll:n}))},[e,n]);const C=(U,z)=>{x(L=>({...L,questions:L.questions.map((H,V)=>V===U?{...H,questionText:z}:H)})),y.questionErrors?.[U]?.questionText&&w(L=>{const H={...L};return H.questionErrors?.[U]&&delete H.questionErrors[U].questionText,H})},_=(U,z,L)=>{x(H=>({...H,questions:H.questions.map((V,Q)=>Q===U?{...V,options:V.options.map((Y,X)=>X===z?L:Y)}:V)})),y.questionErrors?.[U]?.options&&w(H=>{const V={...H};return V.questionErrors?.[U]&&delete V.questionErrors[U].options,V})},D=U=>{x(z=>({...z,questions:z.questions.map((L,H)=>H===U?{...L,options:[...L.options,""]}:L)}))},k=(U,z)=>{x(L=>({...L,questions:L.questions.map((H,V)=>V===U?{...H,options:H.options.filter((Q,Y)=>Y!==z)}:H)}))},M=()=>{x(U=>({...U,questions:[...U.questions,{questionText:"",options:["",""]}]}))},R=U=>{x(z=>({...z,questions:z.questions.filter((L,H)=>H!==U)}))},F=()=>{x(U=>({...U,isActive:!U.isActive}))},I=async U=>{U.preventDefault();const z=xue(h);if(!z.isValid){w(z.errors),console.log("[PollForm] Validation failed:",z.errors);return}const L={questions:h.questions.map(H=>({questionText:H.questionText.trim(),options:H.options.filter(V=>V?.trim()).map(V=>V.trim())}))};!g&&i?L.eventId=i._id:g&&(L.isActive=h.isActive),console.log("[PollForm] Submitting:",L),await r(L)},G=()=>{o||t()};return a.createElement(hn,{isOpen:e,onClose:G,title:g?"Edit Poll":"Create Poll",size:"2xl",closeOnOverlayClick:!o},a.createElement("form",{onSubmit:I,className:"space-y-6"},i&&a.createElement("div",{className:"p-3 bg-blue-50 border border-blue-200 text-blue-800 rounded-lg"},a.createElement("p",{className:"text-sm"},a.createElement("span",{className:"font-medium"},"Event:")," ",i.name)),d&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},d),y.questions&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},y.questions),a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Questions"),a.createElement("span",{className:"text-sm text-gray-500"},h.questions.length," question(s)")),h.questions.map((U,z)=>a.createElement("div",{key:z,className:"p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-4"},a.createElement("div",{className:"flex items-start gap-3"},a.createElement("div",{className:"flex items-center gap-2 text-gray-400 mt-2"},a.createElement(vp,{className:"h-4 w-4"}),a.createElement("span",{className:"font-medium text-sm text-gray-500"},"Q",z+1)),a.createElement("div",{className:"flex-1"},a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Question Text ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("input",{type:"text",value:U.questionText,onChange:L=>C(z,L.target.value),disabled:o,maxLength:500,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.questionErrors?.[z]?.questionText?"border-red-500":"border-gray-300"}`,placeholder:"Enter your question"}),y.questionErrors?.[z]?.questionText&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.questionErrors[z].questionText)),h.questions.length>1&&a.createElement("button",{type:"button",onClick:()=>R(z),disabled:o,className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors mt-6",title:"Remove question"},a.createElement(gr,{className:"h-4 w-4"}))),a.createElement("div",{className:"ml-10 space-y-2"},a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Options ",a.createElement("span",{className:"text-red-500"},"*"),a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(min 2)")),y.questionErrors?.[z]?.options&&a.createElement("p",{className:"text-sm text-red-500"},y.questionErrors[z].options),U.options.map((L,H)=>a.createElement("div",{key:H,className:"flex items-center gap-2"},a.createElement("span",{className:"text-sm text-gray-400 w-6"},H+1,"."),a.createElement("input",{type:"text",value:L,onChange:V=>_(z,H,V.target.value),disabled:o,maxLength:200,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100",placeholder:`Option ${H+1}`}),U.options.length>2&&a.createElement("button",{type:"button",onClick:()=>k(z,H),disabled:o,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Remove option"},a.createElement(gr,{className:"h-4 w-4"})))),a.createElement("button",{type:"button",onClick:()=>D(z),disabled:o||U.options.length>=10,className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50"},a.createElement(dn,{className:"h-3 w-3"}),"Add Option")))),a.createElement("button",{type:"button",onClick:M,disabled:o||h.questions.length>=20,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 text-gray-600 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors disabled:opacity-50"},a.createElement(dn,{className:"h-4 w-4"}),"Add Question")),g&&a.createElement("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900"},"Poll Status"),a.createElement("p",{className:"text-sm text-gray-500"},h.isActive?"Poll is accepting submissions":"Poll is closed for submissions")),a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:h.isActive,onChange:F,disabled:o,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"}))),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:G,disabled:o,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:o,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},o&&a.createElement(Nt,{className:"h-4 w-4 animate-spin"}),g?"Update Poll":"Create Poll"))))}function bue(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A"}function vue(e){return e==="ONLINE"||e==="HYBRID"?Av:p2}function Eue(e){const t={TECHNOLOGY:"bg-blue-100 text-blue-700",EDUCATION:"bg-indigo-100 text-indigo-700",MEDICAL:"bg-green-100 text-green-700",COMEDY:"bg-yellow-100 text-yellow-700",ENTERTAINMENT:"bg-pink-100 text-pink-700",BUSINESS:"bg-gray-100 text-gray-700",SPORTS:"bg-orange-100 text-orange-700",ARTS:"bg-purple-100 text-purple-700",MUSIC:"bg-red-100 text-red-700",FOOD:"bg-amber-100 text-amber-700",LIFESTYLE:"bg-teal-100 text-teal-700",OTHER:"bg-slate-100 text-slate-700"};return t[e]||t.OTHER}function wue({event:e,poll:t,isLoadingPoll:r=!1,isNotifying:n=!1,canEdit:i=!0,canDelete:o=!0,onCreatePoll:d,onEditPoll:g,onDeletePoll:h,onViewStats:x,onViewPoll:y,onNotifyUsers:w}){const C=!!t,_=vue(e.mode);return a.createElement("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all overflow-hidden flex flex-col"},a.createElement("div",{className:"relative h-36 bg-gradient-to-br from-gray-100 to-gray-200"},e.thumbnail?.imageUrl||e.imageUrls?.[0]?a.createElement("img",{src:e.thumbnail?.imageUrl||e.imageUrls?.[0],alt:e.name,className:"w-full h-full object-cover",onError:D=>{D.target.style.display="none"}}):a.createElement("div",{className:"w-full h-full flex items-center justify-center bg-linear-to-br from-gray-50 to-gray-100"},a.createElement(Hr,{className:"h-12 w-12 text-gray-300"})),a.createElement("div",{className:"absolute top-2 right-2"},r?a.createElement("span",{className:"px-2.5 py-1 text-xs font-medium bg-white/90 text-gray-600 rounded-full shadow-sm animate-pulse"},"Loading..."):C?a.createElement("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm ${t.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"}`},t.isActive?"Poll Active":"Poll Closed"):a.createElement("span",{className:"px-2.5 py-1 text-xs font-semibold bg-yellow-500 text-white rounded-full shadow-sm"},"No Poll")),a.createElement("div",{className:"absolute top-2 left-2"},a.createElement("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm ${e.isLive?"bg-green-500 text-white":"bg-gray-500 text-white"}`},e.isLive?"Live":"Not Live"))),a.createElement("div",{className:"p-4 flex-1 flex flex-col"},a.createElement("div",{className:"mb-3"},a.createElement("h3",{className:"font-semibold text-gray-900 line-clamp-1 text-base",title:e.name},e.name),a.createElement("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap"},a.createElement("span",{className:`px-2 py-0.5 text-xs font-medium rounded-md ${Eue(e.category)}`},e.category),a.createElement("span",{className:"text-xs text-gray-500 flex items-center gap-1"},a.createElement(_,{className:"h-3 w-3"}),e.mode))),a.createElement("div",{className:"space-y-2 mb-4"},a.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600"},a.createElement(Hr,{className:"h-4 w-4 text-gray-400 shrink-0"}),a.createElement("span",null,bue(e.startDate))),C&&a.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600"},a.createElement(Tv,{className:"h-4 w-4 text-gray-400 shrink-0"}),a.createElement("span",null,t.questions?.length||0," question",t.questions?.length!==1?"s":""))),a.createElement("div",{className:"mt-auto pt-3 border-t border-gray-100"},C?a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("button",{onClick:()=>y(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",title:"View Poll"},a.createElement(rn,{className:"h-4 w-4"}),"View"),a.createElement("button",{onClick:()=>x(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-blue-700 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors",title:"View Statistics"},a.createElement(Ei,{className:"h-4 w-4"}),"Stats")),(i||o)&&a.createElement("div",{className:"flex items-center gap-2"},i&&a.createElement("button",{onClick:()=>g(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",title:"Edit Poll"},a.createElement(G_,{className:"h-4 w-4"}),"Edit"),o&&a.createElement("button",{onClick:()=>h(e,t),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-red-200",title:"Delete Poll"},a.createElement(gr,{className:"h-4 w-4"}),"Delete")),i&&a.createElement("button",{onClick:()=>w(e,t),disabled:n,className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-amber-700 bg-amber-50 hover:bg-amber-100 rounded-lg transition-colors border border-amber-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Send push notification to enrolled users"},a.createElement(ig,{className:`h-4 w-4 ${n?"animate-pulse":""}`}),n?"Sending...":"Notify Users")):i&&a.createElement("button",{onClick:()=>d(e),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-gray-800 hover:bg-gray-900 rounded-lg transition-colors"},a.createElement(dn,{className:"h-4 w-4"}),"Create Poll"))))}function MO(e){return e?new Date(e).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"N/A"}function Nue({isOpen:e,onClose:t,poll:r,event:n}){return r?a.createElement(hn,{isOpen:e,onClose:t,title:"Poll Details",size:"2xl"},a.createElement("div",{className:"space-y-6"},n&&a.createElement("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200"},a.createElement("div",{className:"flex items-start gap-3"},a.createElement(Hr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.createElement("div",null,a.createElement("p",{className:"font-medium text-blue-900"},n.name),a.createElement("p",{className:"text-sm text-blue-700 mt-1"},n.category,"  ",n.mode)))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"},a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},a.createElement(Nl,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Status")),a.createElement("span",{className:`inline-flex px-2 py-1 text-sm font-medium rounded-full ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isActive?"Active":"Closed")),a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},a.createElement(Tv,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Questions")),a.createElement("p",{className:"text-lg font-bold text-gray-900"},r.questions?.length||0)),a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-1"},a.createElement(Cn,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Created")),a.createElement("p",{className:"text-sm text-gray-900"},MO(r.createdAt)))),a.createElement("div",{className:"space-y-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Questions & Options"),r.questions?.length===0?a.createElement("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg text-center"},a.createElement(Tv,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),a.createElement("p",{className:"text-gray-600 font-medium"},"No questions"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"This poll has no questions configured.")):r.questions?.map((i,o)=>a.createElement("div",{key:o,className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm"},a.createElement("div",{className:"flex items-start gap-3 mb-3"},a.createElement("span",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 text-gray-600 font-semibold text-sm rounded-lg"},o+1),a.createElement("h4",{className:"font-medium text-gray-900 pt-1"},i.questionText)),a.createElement("div",{className:"ml-11 space-y-2"},a.createElement("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2"},"Options (",i.options?.length||0,")"),i.options?.map((d,g)=>a.createElement("div",{key:g,className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg"},a.createElement("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center bg-white border border-gray-200 text-gray-500 text-xs font-medium rounded-full"},String.fromCharCode(65+g)),a.createElement("span",{className:"text-sm text-gray-700"},d))))))),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("p",{className:"text-xs text-gray-400"},"Poll ID: ",a.createElement("code",{className:"bg-gray-100 px-1 py-0.5 rounded"},r._id)),r.updatedAt&&r.updatedAt!==r.createdAt&&a.createElement("p",{className:"text-xs text-gray-400 mt-1"},"Last updated: ",MO(r.updatedAt))),a.createElement("div",{className:"flex justify-end pt-4 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Close")))):null}function Sue({percentage:e,color:t="blue"}){const r={blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",orange:"bg-orange-500",pink:"bg-pink-500",cyan:"bg-cyan-500",indigo:"bg-indigo-500",amber:"bg-amber-500"};return a.createElement("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden"},a.createElement("div",{className:`h-full ${r[t]||r.blue} rounded-full transition-all duration-500 ease-out`,style:{width:`${Math.min(100,e)}%`}}))}const Cue=e=>{const t=["blue","green","purple","orange","pink","cyan","indigo","amber"];return t[e%t.length]};function Aue({isOpen:e,onClose:t,poll:r,stats:n,isLoading:i=!1,error:o=null,onFetchStats:d}){return N.useEffect(()=>{e&&r&&d&&(console.log("[PollStatsModal] Fetching stats for poll:",r._id),d(r._id))},[e,r,d]),r?a.createElement(hn,{isOpen:e,onClose:t,title:"Poll Statistics",size:"2xl"},a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("h3",{className:"font-semibold text-gray-900"},"Poll Overview"),a.createElement("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},r.isActive?"Active":"Closed")),a.createElement("p",{className:"text-sm text-gray-600"},r.questions?.length||0," question(s)")),o&&a.createElement("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement("p",{className:"text-sm"},o)),i&&a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(Nt,{className:"h-8 w-8 animate-spin text-gray-400"}),a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Loading statistics...")),!i&&n&&a.createElement(a.Fragment,null,a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"},a.createElement("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"p-2 bg-blue-100 rounded-lg"},a.createElement(fm,{className:"h-5 w-5 text-blue-600"})),a.createElement("div",null,a.createElement("p",{className:"text-2xl font-bold text-blue-900"},n.totalSubmissions||0),a.createElement("p",{className:"text-sm text-blue-700"},"Total Submissions")))),a.createElement("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"p-2 bg-green-100 rounded-lg"},a.createElement(Nl,{className:"h-5 w-5 text-green-600"})),a.createElement("div",null,a.createElement("p",{className:"text-2xl font-bold text-green-900"},n.questions?.length||0),a.createElement("p",{className:"text-sm text-green-700"},"Questions")))),a.createElement("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"p-2 bg-purple-100 rounded-lg"},a.createElement(Ei,{className:"h-5 w-5 text-purple-600"})),a.createElement("div",null,a.createElement("p",{className:"text-2xl font-bold text-purple-900"},n.questions?.reduce((g,h)=>g+(h.options?.length||0),0)||0),a.createElement("p",{className:"text-sm text-purple-700"},"Total Options"))))),n.totalSubmissions===0&&a.createElement("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg text-center"},a.createElement(Ei,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),a.createElement("p",{className:"text-gray-600 font-medium"},"No submissions yet"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Statistics will appear once users start submitting their answers.")),n.totalSubmissions>0&&n.questions?.map((g,h)=>a.createElement("div",{key:h,className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm"},a.createElement("div",{className:"flex items-start gap-3 mb-4"},a.createElement("span",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 text-gray-600 font-semibold text-sm rounded-lg"},h+1),a.createElement("h4",{className:"font-medium text-gray-900 pt-1"},g.questionText)),a.createElement("div",{className:"space-y-3 ml-11"},g.options?.map((x,y)=>a.createElement("div",{key:y,className:"space-y-1"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-sm text-gray-700"},x.optionText),a.createElement("div",{className:"flex items-center gap-2"},a.createElement("span",{className:"text-sm font-medium text-gray-900"},x.count||0),a.createElement("span",{className:"text-sm text-gray-500"},"(",(x.percentage||0).toFixed(1),"%)"))),a.createElement(Sue,{percentage:x.percentage||0,color:Cue(y)}))))))),!i&&!n&&!o&&a.createElement("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg text-center"},a.createElement(Ei,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),a.createElement("p",{className:"text-gray-600 font-medium"},"No statistics available"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Statistics could not be loaded for this poll.")),a.createElement("div",{className:"flex justify-end pt-4 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},"Close")))):null}function Tue(){const{hasRole:e}=Mi(),t=e(["SUPER_ADMIN","ADMIN"]),r=e(["SUPER_ADMIN","ADMIN"]),n=e(["SUPER_ADMIN","ADMIN"]),[i,o]=N.useState([]),[d,g]=N.useState({currentPage:1,totalPages:0,totalCount:0,limit:12}),[h,x]=N.useState(!1),[y,w]=N.useState(null),[C,_]=N.useState({}),[D,k]=N.useState({}),[M,R]=N.useState({}),[F,I]=N.useState(""),[G,U]=N.useState(!1),[z,L]=N.useState("all"),[H,V]=N.useState("grid"),[Q,Y]=N.useState(!1),[X,he]=N.useState(!1),[xe,ae]=N.useState(!1),[ne,se]=N.useState(!1),[Te,we]=N.useState(!1),[te,K]=N.useState(null),[ee,fe]=N.useState(null),[ce,Se]=N.useState(null),[ie,oe]=N.useState(!1),[He,ve]=N.useState(null),[We,be]=N.useState(!1),[ye,je]=N.useState(null),[Ze,Ie]=N.useState(null),ut=N.useRef(null),Le=N.useCallback(async(ge=1)=>{x(!0),w(null);try{const Je={page:ge,limit:d.limit,sortBy:"createdAt",sortOrder:"desc"};F.trim()&&(Je.search=F.trim()),console.log("[Polls] Fetching events with params:",Je);const rt=await Ss.getAll(Je);if(rt.success){o(rt.data.events||[]),g({currentPage:rt.data.pagination?.currentPage||1,totalPages:rt.data.pagination?.totalPages||0,totalCount:rt.data.pagination?.totalCount||0,limit:rt.data.pagination?.limit||12});const _t=(rt.data.events||[]).map(Pr=>Pr._id);et(_t)}else w(rt.message||"Failed to fetch events"),console.error("[Polls] Failed to fetch events:",rt.message)}catch(Je){w("An unexpected error occurred"),console.error("[Polls] Error fetching events:",Je)}finally{x(!1)}},[F,d.limit]),et=N.useCallback(async ge=>{const Je=ge.map(async rt=>{if(C[rt]===void 0){k(_t=>({..._t,[rt]:!0}));try{const _t=await Cu.getByEventId(rt);_t.success?_(Pr=>({...Pr,[rt]:_t.data})):_(Pr=>({...Pr,[rt]:null}))}catch(_t){console.error(`[Polls] Error fetching poll for event ${rt}:`,_t),_(Pr=>({...Pr,[rt]:null}))}finally{k(_t=>({..._t,[rt]:!1}))}}});await Promise.all(Je)},[C]);N.useEffect(()=>{Le(1)},[]);const mt=N.useCallback(ge=>{I(ge),ut.current&&clearTimeout(ut.current),ut.current=setTimeout(()=>{Le(1)},300)},[Le]),Er=N.useCallback(ge=>{Le(ge),window.scrollTo({top:0,behavior:"smooth"})},[Le]),tt=N.useCallback(()=>{_({}),Le(d.currentPage)},[Le,d.currentPage]),nt=i.filter(ge=>{if(z==="all")return!0;const Je=C[ge._id]!==null&&C[ge._id]!==void 0;return z==="with-poll"?Je:z==="without-poll"?!Je:!0}),Re=N.useCallback(ge=>{K(ge),fe(null),je(null),Y(!0),console.log("[Polls] Opening create modal for event:",ge.name)},[]),Be=N.useCallback((ge,Je)=>{K(ge),fe(Je),je(null),he(!0),console.log("[Polls] Opening edit modal for poll:",Je._id)},[]),St=N.useCallback((ge,Je)=>{K(ge),fe(Je),ae(!0),console.log("[Polls] Opening details modal for poll:",Je._id)},[]),pt=N.useCallback((ge,Je)=>{K(ge),fe(Je),Se(null),ve(null),se(!0),console.log("[Polls] Opening stats modal for poll:",Je._id)},[]),ar=N.useCallback(async ge=>{oe(!0),ve(null);try{const Je=await Cu.getStats(ge);Je.success?Se(Je.data):ve(Je.message||"Failed to fetch statistics")}catch(Je){ve("An unexpected error occurred"),console.error("[Polls] Error fetching stats:",Je)}finally{oe(!1)}},[]),$r=N.useCallback((ge,Je)=>{K(ge),fe(Je),we(!0),console.log("[Polls] Opening delete dialog for poll:",Je._id)},[]),Cr=N.useCallback(async(ge,Je)=>{if(Je?._id){R(rt=>({...rt,[Je._id]:!0})),Ie(null),w(null);try{console.log("[Polls] Sending notification for poll:",Je._id);const rt=await Cu.notifyUsers(Je._id);if(rt.success){const{successCount:_t,failureCount:Pr,message:Ba}=rt.data||{};Ie(Ba||`Notification sent to ${_t} user${_t!==1?"s":""}${Pr>0?` (${Pr} failed)`:""}`),console.log("[Polls] Notification sent successfully")}else w(rt.message||"Failed to send notification"),console.error("[Polls] Failed to send notification:",rt.message)}catch(rt){w("An unexpected error occurred while sending notification"),console.error("[Polls] Error sending notification:",rt)}finally{R(rt=>({...rt,[Je._id]:!1}))}}},[]),La=N.useCallback(async ge=>{be(!0),je(null);try{console.log("[Polls] Creating poll:",ge);const Je=await Cu.create(ge);Je.success?(Y(!1),_(rt=>({...rt,[ge.eventId]:Je.data})),console.log("[Polls] Poll created successfully")):(je(Je.message||"Failed to create poll"),console.error("[Polls] Failed to create poll:",Je.message))}catch(Je){je("An unexpected error occurred"),console.error("[Polls] Error creating poll:",Je)}finally{be(!1)}},[]),pa=N.useCallback(async ge=>{if(ee){be(!0),je(null);try{console.log("[Polls] Updating poll:",ee._id,ge);const Je=await Cu.update(ee._id,ge);Je.success?(he(!1),te&&_(rt=>({...rt,[te._id]:Je.data})),K(null),fe(null),console.log("[Polls] Poll updated successfully")):(je(Je.message||"Failed to update poll"),console.error("[Polls] Failed to update poll:",Je.message))}catch(Je){je("An unexpected error occurred"),console.error("[Polls] Error updating poll:",Je)}finally{be(!1)}}},[ee,te]),Ls=N.useCallback(async()=>{if(ee){be(!0);try{console.log("[Polls] Deleting poll:",ee._id);const ge=await Cu.delete(ee._id);ge.success?(we(!1),te&&_(Je=>({...Je,[te._id]:null})),K(null),fe(null),console.log("[Polls] Poll deleted successfully")):(w(ge.message||"Failed to delete poll"),console.error("[Polls] Failed to delete poll:",ge.message))}catch(ge){w("An unexpected error occurred"),console.error("[Polls] Error deleting poll:",ge)}finally{be(!1)}}},[ee,te]),Gt=N.useCallback(()=>w(null),[]);return a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Polls"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Create and manage polls for your events")),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("button",{onClick:tt,disabled:h,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Refresh events and polls"},a.createElement(Oi,{className:`h-4 w-4 ${h?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"flex items-center bg-white border border-gray-300 rounded-lg overflow-hidden"},a.createElement("button",{onClick:()=>V("grid"),className:`p-2 transition-colors ${H==="grid"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"Grid view"},a.createElement($_,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>V("list"),className:`p-2 transition-colors ${H==="list"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"List view"},a.createElement(g2,{className:"h-4 w-4"}))))),y&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Vr,{className:"h-5 w-5 shrink-0"}),a.createElement("p",{className:"flex-1"},y),a.createElement("button",{onClick:Gt,className:"text-red-500 hover:text-red-700 font-medium"},"Dismiss")),Ze&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg"},a.createElement(ig,{className:"h-5 w-5 shrink-0"}),a.createElement("p",{className:"flex-1"},Ze),a.createElement("button",{onClick:()=>Ie(null),className:"text-green-500 hover:text-green-700 font-medium"},"Dismiss")),a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row gap-4"},a.createElement("div",{className:"flex-1 relative"},a.createElement(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",value:F,onChange:ge=>mt(ge.target.value),placeholder:"Search events...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none"}),F&&a.createElement("button",{onClick:()=>{I(""),Le(1)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},a.createElement(zn,{className:"h-4 w-4"}))),a.createElement("button",{onClick:()=>U(!G),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${G||z!=="all"?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`},a.createElement(Ti,{className:"h-4 w-4"}),a.createElement("span",null,"Filters"),z!=="all"&&a.createElement("span",{className:"w-2 h-2 bg-white rounded-full"}))),G&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200"},a.createElement("div",{className:"flex flex-wrap items-center gap-3"},a.createElement("span",{className:"text-sm text-gray-500"},"Poll Status:"),a.createElement("div",{className:"flex gap-2"},[{value:"all",label:"All Events"},{value:"with-poll",label:"With Poll"},{value:"without-poll",label:"Without Poll"}].map(ge=>a.createElement("button",{key:ge.value,onClick:()=>L(ge.value),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${z===ge.value?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},ge.label))),z!=="all"&&a.createElement("button",{onClick:()=>L("all"),className:"text-sm text-gray-500 hover:text-gray-700"},"Reset")))),h&&i.length===0?a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},[...Array(8)].map((ge,Je)=>a.createElement("div",{key:Je,className:"bg-white rounded-xl border border-gray-200 overflow-hidden animate-pulse"},a.createElement("div",{className:"h-32 bg-gray-200"}),a.createElement("div",{className:"p-4 space-y-3"},a.createElement("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),a.createElement("div",{className:"h-8 bg-gray-200 rounded"}))))):nt.length===0?a.createElement("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center"},a.createElement("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center"},a.createElement(sa,{className:"h-8 w-8 text-gray-400"})),a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No events found"),a.createElement("p",{className:"text-gray-500 max-w-md mx-auto"},F||z!=="all"?"Try adjusting your search or filter criteria.":"Create an event first to add polls.")):H==="grid"?a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},nt.map(ge=>a.createElement(wue,{key:ge._id,event:ge,poll:C[ge._id],isLoadingPoll:D[ge._id],isNotifying:M[C[ge._id]?._id],canEdit:r,canDelete:n,onCreatePoll:Re,onEditPoll:Be,onDeletePoll:$r,onViewStats:pt,onViewPoll:St,onNotifyUsers:Cr}))):a.createElement("div",{className:"space-y-3"},nt.map(ge=>a.createElement("div",{key:ge._id,className:"bg-white rounded-xl border border-gray-200 p-4 flex items-center gap-4"},a.createElement("div",{className:"shrink-0 w-20 h-20 rounded-lg overflow-hidden bg-gray-100"},ge.thumbnail?.imageUrl||ge.imageUrls?.[0]?a.createElement("img",{src:ge.thumbnail?.imageUrl||ge.imageUrls?.[0],alt:ge.name,className:"w-full h-full object-cover"}):a.createElement("div",{className:"w-full h-full flex items-center justify-center"},a.createElement("span",{className:"text-gray-300 text-2xl"},"E"))),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("h3",{className:"font-semibold text-gray-900 truncate"},ge.name),a.createElement("p",{className:"text-sm text-gray-500"},ge.category,"  ",ge.mode),a.createElement("div",{className:"flex items-center gap-2 mt-1"},C[ge._id]?a.createElement("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${C[ge._id].isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},C[ge._id].isActive?"Poll Active":"Poll Closed"):a.createElement("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-yellow-100 text-yellow-700"},"No Poll"))),a.createElement("div",{className:"flex items-center gap-2"},C[ge._id]?a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>pt(ge,C[ge._id]),className:"px-3 py-1.5 text-sm text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors"},"Stats"),r&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>Be(ge,C[ge._id]),className:"px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors"},"Edit"),a.createElement("button",{onClick:()=>Cr(ge,C[ge._id]),disabled:M[C[ge._id]?._id],className:"flex items-center gap-1 px-3 py-1.5 text-sm text-amber-600 bg-amber-50 hover:bg-amber-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Send push notification to enrolled users"},a.createElement(ig,{className:`h-4 w-4 ${M[C[ge._id]?._id]?"animate-pulse":""}`}),M[C[ge._id]?._id]?"Sending...":"Notify")),n&&a.createElement("button",{onClick:()=>$r(ge,C[ge._id]),className:"px-3 py-1.5 text-sm text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors"},"Delete")):t&&a.createElement("button",{onClick:()=>Re(ge),className:"px-3 py-1.5 text-sm text-white bg-gray-800 hover:bg-gray-900 rounded-lg transition-colors"},"Create Poll"))))),d.totalPages>1&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Pn,{currentPage:d.currentPage,totalPages:d.totalPages,totalItems:d.totalCount,itemsPerPage:d.limit,onPageChange:Er,itemLabel:"events"})),a.createElement(kO,{isOpen:Q,onClose:()=>{Y(!1),K(null)},onSubmit:La,poll:null,event:te,isLoading:We,serverError:ye}),a.createElement(kO,{isOpen:X,onClose:()=>{he(!1),K(null),fe(null)},onSubmit:pa,poll:ee,event:te,isLoading:We,serverError:ye}),a.createElement(Nue,{isOpen:xe,onClose:()=>{ae(!1),K(null),fe(null)},poll:ee,event:te}),a.createElement(Aue,{isOpen:ne,onClose:()=>{se(!1),K(null),fe(null),Se(null)},poll:ee,stats:ce,isLoading:ie,error:He,onFetchStats:ar}),a.createElement(ha,{isOpen:Te,onClose:()=>{we(!1),K(null),fe(null)},onConfirm:Ls,title:"Delete Poll",message:`Are you sure you want to delete the poll for "${te?.name}"? This will also delete all associated submissions. This action cannot be undone.`,confirmText:"Delete Poll",cancelText:"Cancel",variant:"danger",isLoading:We}))}const vs={BASE:"/web/stories",STATS:"/web/stories/stats",TTL_OPTIONS:"/web/stories/ttl-options",REORDER:"/web/stories/reorder"},bi={create:async e=>(console.log("[StoryService] Creating story"),Xe(Ye.post(vs.BASE,e))),getAll:async(e={})=>{console.log("[StoryService] Fetching stories:",e);const t=new URLSearchParams;e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.includeExpired!==void 0&&t.append("includeExpired",e.includeExpired);const r=`${vs.BASE}?${t.toString()}`;return Xe(Ye.get(r))},getById:async e=>(console.log("[StoryService] Fetching story:",e),Xe(Ye.get(`${vs.BASE}/${e}`))),update:async(e,t)=>(console.log("[StoryService] Updating story:",e),Xe(Ye.put(`${vs.BASE}/${e}`,t))),toggleActive:async e=>(console.log("[StoryService] Toggling story status:",e),Xe(Ye.patch(`${vs.BASE}/${e}/toggle`))),delete:async(e,t=!1)=>{console.log("[StoryService] Deleting story:",e);const r=t?`${vs.BASE}/${e}?deleteMedia=true`:`${vs.BASE}/${e}`;return Xe(Ye.delete(r))},permanentDelete:async(e,t=!0)=>{console.log("[StoryService] Permanently deleting story:",e);const r=t?`${vs.BASE}/${e}/permanent`:`${vs.BASE}/${e}/permanent?deleteMedia=false`;return Xe(Ye.delete(r))},reorder:async e=>(console.log("[StoryService] Reordering stories"),Xe(Ye.put(vs.REORDER,{order:e}))),getStats:async()=>(console.log("[StoryService] Fetching story stats"),Xe(Ye.get(vs.STATS))),getTtlOptions:async()=>(console.log("[StoryService] Fetching TTL options"),Xe(Ye.get(vs.TTL_OPTIONS)))},mI=[{value:"1_hour",label:"1 hour"},{value:"6_hours",label:"6 hours"},{value:"12_hours",label:"12 hours"},{value:"1_day",label:"1 day"},{value:"3_days",label:"3 days"},{value:"7_days",label:"7 days"},{value:"30_days",label:"30 days"},{value:"forever",label:"Forever"}],Oue=[{value:"image",label:"Image"},{value:"video",label:"Video"}],_ue=[{value:"createdAt",label:"Created Date"},{value:"displayOrder",label:"Display Order"},{value:"viewCount",label:"View Count"},{value:"expiresAt",label:"Expiry Date"}],PO={search:"",mediaType:"",isActive:"",includeExpired:!1,sortBy:"displayOrder",sortOrder:"asc"};function Due(e={}){const[t,r]=N.useState([]),[n,i]=N.useState({page:1,totalPages:0,total:0,limit:20}),[o,d]=N.useState({...PO,...e}),[g,h]=N.useState(!1),[x,y]=N.useState(null),[w,C]=N.useState(null),[_,D]=N.useState(!1),[k,M]=N.useState(mI),R=N.useRef(null),F=N.useCallback(async(te=n.page)=>{console.log("[useStoriesManagement] Fetching stories"),h(!0),y(null);try{const K={page:te,limit:n.limit,includeExpired:o.includeExpired},ee=await bi.getAll(K);if(ee.success){let fe=ee.data.stories||[];if(o.mediaType&&(fe=fe.filter(ce=>ce.mediaType===o.mediaType)),o.isActive!==""){const ce=o.isActive==="true";fe=fe.filter(Se=>Se.isActive===ce)}if(o.search){const ce=o.search.toLowerCase();fe=fe.filter(Se=>Se.title?.toLowerCase().includes(ce)||Se.mediaType?.toLowerCase().includes(ce))}fe.sort((ce,Se)=>{const ie=ce[o.sortBy],oe=Se[o.sortBy],He=o.sortOrder==="asc"?1:-1;return typeof ie=="string"?ie.localeCompare(oe)*He:ie instanceof Date||o.sortBy.includes("At")?(new Date(ie)-new Date(oe))*He:((ie||0)-(oe||0))*He}),r(fe),i(ce=>({...ce,...ee.data.pagination}))}else y(ee.message),r([])}catch(K){console.error("[useStoriesManagement] Error fetching stories:",K),y("Failed to fetch stories"),r([])}finally{h(!1)}},[o,n.limit,n.page]),I=N.useCallback(async()=>{console.log("[useStoriesManagement] Fetching stats"),D(!0);try{const te=await bi.getStats();te.success&&C(te.data)}catch(te){console.error("[useStoriesManagement] Error fetching stats:",te)}finally{D(!1)}},[]),G=N.useCallback(async()=>{try{const te=await bi.getTtlOptions();te.success&&te.data.options&&M(te.data.options)}catch(te){console.error("[useStoriesManagement] Error fetching TTL options:",te)}},[]),U=N.useCallback(async te=>{try{const K=await bi.getById(te);return K.success?{success:!0,data:K.data}:{success:!1,error:K.message}}catch{return{success:!1,error:"Failed to fetch story details"}}},[]),z=N.useCallback(async te=>{console.log("[useStoriesManagement] Creating story"),h(!0),y(null);try{const K=await bi.create(te);return K.success?(await F(1),await I(),{success:!0,data:K.data}):{success:!1,error:K.message,validationErrors:K.data?.errors}}catch{return{success:!1,error:"Failed to create story"}}finally{h(!1)}},[F,I]),L=N.useCallback(async(te,K)=>{console.log("[useStoriesManagement] Updating story:",te),h(!0),y(null);try{const ee=await bi.update(te,K);return ee.success?(r(fe=>fe.map(ce=>ce._id===te?{...ce,...ee.data}:ce)),{success:!0,data:ee.data}):{success:!1,error:ee.message,validationErrors:ee.data?.errors}}catch{return{success:!1,error:"Failed to update story"}}finally{h(!1)}},[]),H=N.useCallback(async te=>{console.log("[useStoriesManagement] Toggling story status:",te);try{const K=await bi.toggleActive(te);return K.success?(r(ee=>ee.map(fe=>fe._id===te?{...fe,isActive:K.data.isActive}:fe)),{success:!0,data:K.data}):{success:!1,error:K.message}}catch{return{success:!1,error:"Failed to toggle story status"}}},[]),V=N.useCallback(async(te,K=!1)=>{console.log("[useStoriesManagement] Deleting story:",te),h(!0),y(null);try{const ee=await bi.delete(te,K);return ee.success?(r(fe=>fe.filter(ce=>ce._id!==te)),i(fe=>({...fe,total:fe.total-1,totalPages:Math.ceil((fe.total-1)/fe.limit)})),await I(),{success:!0}):{success:!1,error:ee.message}}catch{return{success:!1,error:"Failed to delete story"}}finally{h(!1)}},[I]),Q=N.useCallback(async(te,K=!0)=>{console.log("[useStoriesManagement] Permanently deleting story:",te),h(!0),y(null);try{const ee=await bi.permanentDelete(te,K);return ee.success?(r(fe=>fe.filter(ce=>ce._id!==te)),i(fe=>({...fe,total:fe.total-1,totalPages:Math.ceil((fe.total-1)/fe.limit)})),await I(),{success:!0}):{success:!1,error:ee.message}}catch{return{success:!1,error:"Failed to permanently delete story"}}finally{h(!1)}},[I]),Y=N.useCallback(async te=>{console.log("[useStoriesManagement] Reordering stories");try{const K=await bi.reorder(te);return K.success?(r(ee=>{const fe=new Map(te.map(ce=>[ce.storyId,ce.displayOrder]));return[...ee].map(ce=>({...ce,displayOrder:fe.get(ce._id)??ce.displayOrder})).sort((ce,Se)=>ce.displayOrder-Se.displayOrder)}),{success:!0}):{success:!1,error:K.message}}catch{return{success:!1,error:"Failed to reorder stories"}}},[]),X=N.useCallback(te=>{d(K=>({...K,...te}))},[]),he=N.useCallback(te=>{R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{d(K=>({...K,search:te}))},300)},[]),xe=N.useCallback(()=>{d({...PO,...e})},[e]),ae=N.useCallback(te=>{F(te)},[F]),ne=N.useCallback(te=>{i(K=>({...K,limit:te}))},[]),se=N.useCallback(()=>{d(te=>({...te,includeExpired:!te.includeExpired}))},[]),Te=N.useCallback(()=>{y(null)},[]),we=N.useCallback(()=>{F(1),I()},[F,I]);return N.useEffect(()=>{F(1)},[o]),N.useEffect(()=>{I(),G()},[I,G]),N.useEffect(()=>()=>{R.current&&clearTimeout(R.current)},[]),{stories:t,pagination:n,filters:o,isLoading:g,error:x,stats:w,isLoadingStats:_,ttlOptions:k,fetchStories:F,fetchStats:I,getStoryById:U,createStory:z,updateStory:L,toggleStoryActive:H,deleteStory:V,permanentDeleteStory:Q,reorderStories:Y,updateFilters:X,updateSearch:he,resetFilters:xe,toggleIncludeExpired:se,changePage:ae,changeLimit:ne,clearError:Te,refresh:we}}const RO=(e=null)=>({mediaUrl:e?.mediaUrl||"",mediaType:e?.mediaType||"image",title:e?.title||"",cloudinaryPublicId:e?.cloudinaryPublicId||"",ttl:e?.ttl||"1_day",displayOrder:e?.displayOrder??0,isActive:e?.isActive??!0}),kue=(e,t=!1)=>{const r={};if(e.mediaUrl?.trim()?/^https?:\/\/.+/.test(e.mediaUrl)||(r.mediaUrl="Invalid media URL"):r.mediaUrl="Media is required",e.mediaType?["image","video"].includes(e.mediaType)||(r.mediaType="Invalid media type"):r.mediaType="Media type is required",e.title&&e.title.length>500&&(r.title="Title must be 500 characters or less"),e.ttl||(r.ttl="Time to live is required"),e.displayOrder!==void 0&&e.displayOrder!==""){const n=parseInt(e.displayOrder,10);(isNaN(n)||n<0)&&(r.displayOrder="Display order must be a non-negative number")}return{isValid:Object.keys(r).length===0,errors:r}},Mue=e=>e&&/\.(mp4|webm|ogg|mov|avi)(\?.*)?$/i.test(e)?"video":"image",Pue=e=>{if(!e||!e.includes("cloudinary.com"))return"";const t=e.match(/\/upload\/(?:v\d+\/)?(.+?)(?:\.[^.]+)?$/);return t?t[1]:""};function IO({isOpen:e,onClose:t,onSubmit:r,story:n=null,ttlOptions:i=mI,isLoading:o=!1,serverError:d=null}){const g=!!n,[h,x]=N.useState(RO(n)),[y,w]=N.useState({});N.useEffect(()=>{e&&(x(RO(n)),w({}),console.log("[StoryForm] Form initialized:",{isEditMode:g,story:n?._id}))},[e,n]);const C=(R,F)=>{x(I=>({...I,[R]:F})),y[R]&&w(I=>{const G={...I};return delete G[R],G})},_=R=>{const F=Mue(R),I=Pue(R);x(G=>({...G,mediaUrl:R,mediaType:F,cloudinaryPublicId:I})),y.mediaUrl&&w(G=>{const U={...G};return delete U.mediaUrl,U})},D=()=>{x(R=>({...R,isActive:!R.isActive}))},k=async R=>{R.preventDefault();const F=kue(h,g);if(!F.isValid){w(F.errors),console.log("[StoryForm] Validation failed:",F.errors);return}const I={mediaUrl:h.mediaUrl.trim(),mediaType:h.mediaType,ttl:h.ttl,displayOrder:parseInt(h.displayOrder,10)||0};h.title?.trim()&&(I.title=h.title.trim()),h.cloudinaryPublicId&&(I.cloudinaryPublicId=h.cloudinaryPublicId),g&&(I.isActive=h.isActive),console.log("[StoryForm] Submitting:",{isEditMode:g,storyId:n?._id}),await r(I)},M=()=>{o||t()};return a.createElement(hn,{isOpen:e,onClose:M,title:g?"Edit Story":"Create Story",size:"xl",closeOnOverlayClick:!o},a.createElement("form",{onSubmit:k,className:"space-y-6"},d&&a.createElement("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm"},d),a.createElement("div",null,a.createElement(Cc,{label:"Media",required:!0,value:h.mediaUrl,onUpload:_,folder:"stories",type:"any",maxSize:50*1024*1024,placeholder:"Upload image or video for story",error:y.mediaUrl,disabled:o,showUrlInput:!0})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Media Type ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("div",{className:"flex gap-3"},a.createElement("button",{type:"button",onClick:()=>C("mediaType","image"),disabled:o,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${h.mediaType==="image"?"border-gray-800 bg-gray-800 text-white":"border-gray-300 text-gray-600 hover:border-gray-400"} disabled:opacity-50`},a.createElement(Tc,{className:"h-5 w-5"}),a.createElement("span",{className:"font-medium"},"Image")),a.createElement("button",{type:"button",onClick:()=>C("mediaType","video"),disabled:o,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${h.mediaType==="video"?"border-gray-800 bg-gray-800 text-white":"border-gray-300 text-gray-600 hover:border-gray-400"} disabled:opacity-50`},a.createElement(cl,{className:"h-5 w-5"}),a.createElement("span",{className:"font-medium"},"Video"))),y.mediaType&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.mediaType)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Title / Caption",a.createElement("span",{className:"text-gray-400 font-normal ml-1"},"(optional)")),a.createElement("textarea",{value:h.title,onChange:R=>C("title",R.target.value),disabled:o,maxLength:500,rows:3,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none resize-none disabled:bg-gray-100 ${y.title?"border-red-500":"border-gray-300"}`,placeholder:"Add a caption for this story..."}),a.createElement("div",{className:"flex justify-between mt-1"},y.title?a.createElement("p",{className:"text-sm text-red-500"},y.title):a.createElement("span",null),a.createElement("span",{className:"text-xs text-gray-400"},h.title.length,"/500"))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},a.createElement(Cn,{className:"inline h-4 w-4 mr-1"}),"Time to Live ",a.createElement("span",{className:"text-red-500"},"*")),a.createElement("select",{value:h.ttl,onChange:R=>C("ttl",R.target.value),disabled:o,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.ttl?"border-red-500":"border-gray-300"}`},i.map(R=>a.createElement("option",{key:R.value,value:R.value},R.label))),y.ttl&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.ttl)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},a.createElement(h2,{className:"inline h-4 w-4 mr-1"}),"Display Order"),a.createElement("input",{type:"number",value:h.displayOrder,onChange:R=>C("displayOrder",R.target.value),disabled:o,min:0,className:`w-full px-3 py-2 border rounded-lg focus:border-gray-800 outline-none disabled:bg-gray-100 ${y.displayOrder?"border-red-500":"border-gray-300"}`,placeholder:"0"}),y.displayOrder&&a.createElement("p",{className:"mt-1 text-sm text-red-500"},y.displayOrder),a.createElement("p",{className:"mt-1 text-xs text-gray-400"},"Lower numbers appear first"))),g&&a.createElement("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",null,a.createElement("p",{className:"font-medium text-gray-900"},"Story Status"),a.createElement("p",{className:"text-sm text-gray-500"},h.isActive?"Story is visible to users":"Story is hidden from users")),a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:h.isActive,onChange:D,disabled:o,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"}))),a.createElement("div",{className:"flex gap-3 pt-4 border-t border-gray-200"},a.createElement("button",{type:"button",onClick:M,disabled:o,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},"Cancel"),a.createElement("button",{type:"submit",disabled:o,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},o&&a.createElement(Nt,{className:"h-4 w-4 animate-spin"}),g?"Update Story":"Create Story"))))}function Rue(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function Iue(e){if(!e)return"N/A";const n=new Date(e)-new Date;if(n<0)return"Expired";const i=Math.floor(n/(1e3*60*60)),o=Math.floor(i/24);return o>0?`${o}d ${i%24}h left`:i>0?`${i}h left`:`${Math.floor(n/(1e3*60))}m left`}function Lue(e){return{"1_hour":"1 hour","6_hours":"6 hours","12_hours":"12 hours","1_day":"1 day","3_days":"3 days","7_days":"7 days","30_days":"30 days",forever:"Forever"}[e]||e}function Bue(e,t){return t==="forever"||!e?!1:new Date(e)<new Date}function Fue({story:e,canEdit:t=!0,canDelete:r=!0,isToggling:n=!1,onView:i,onEdit:o,onDelete:d,onToggleActive:g,draggable:h=!1,dragHandleProps:x={}}){const y=Bue(e.expiresAt,e.ttl),w=e.mediaType==="video";return a.createElement("div",{className:`bg-white rounded-xl border shadow-sm hover:shadow-md transition-all overflow-hidden flex flex-col ${y?"border-orange-200 bg-orange-50/30":"border-gray-200"}`},a.createElement("div",{className:"relative h-48 sm:h-56 bg-gradient-to-br from-gray-100 to-gray-200"},w?a.createElement("div",{className:"w-full h-full relative"},a.createElement("video",{src:e.mediaUrl,className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata",onError:C=>{C.target.style.display="none",C.target.nextElementSibling?.classList.remove("hidden")}}),a.createElement("div",{className:"hidden w-full h-full flex items-center justify-center bg-gray-100"},a.createElement(cl,{className:"h-12 w-12 text-gray-300"})),a.createElement("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20"},a.createElement("div",{className:"w-14 h-14 rounded-full bg-white/90 flex items-center justify-center shadow-lg"},a.createElement(Y_,{className:"h-6 w-6 text-gray-800 ml-1"})))):a.createElement(a.Fragment,null,a.createElement("img",{src:e.mediaUrl,alt:e.title||"Story",className:"w-full h-full object-cover",onError:C=>{C.target.style.display="none",C.target.nextElementSibling?.classList.remove("hidden")}}),a.createElement("div",{className:"hidden w-full h-full flex items-center justify-center bg-gray-100"},a.createElement(Tc,{className:"h-12 w-12 text-gray-300"}))),h&&a.createElement("div",{...x,className:"absolute top-2 left-2 p-1.5 bg-white/90 rounded-lg shadow-sm cursor-grab active:cursor-grabbing"},a.createElement(vp,{className:"h-4 w-4 text-gray-500"})),a.createElement("div",{className:"absolute top-2 right-2 flex flex-col gap-1"},a.createElement("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm ${e.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"}`},e.isActive?"Active":"Inactive"),y&&a.createElement("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full shadow-sm bg-orange-500 text-white flex items-center gap-1"},a.createElement(Ep,{className:"h-3 w-3"}),"Expired")),a.createElement("div",{className:"absolute bottom-2 left-2"},a.createElement("span",{className:"px-2.5 py-1 text-xs font-medium bg-black/60 text-white rounded-full flex items-center gap-1"},w?a.createElement(cl,{className:"h-3 w-3"}):a.createElement(Tc,{className:"h-3 w-3"}),e.mediaType)),a.createElement("div",{className:"absolute bottom-2 right-2"},a.createElement("span",{className:"px-2.5 py-1 text-xs font-medium bg-black/60 text-white rounded-full flex items-center gap-1"},a.createElement(rn,{className:"h-3 w-3"}),e.viewCount||0))),a.createElement("div",{className:"p-4 flex-1 flex flex-col"},e.title&&a.createElement("h3",{className:"font-semibold text-gray-900 line-clamp-2 text-sm mb-2",title:e.title},e.title),a.createElement("div",{className:"space-y-1.5 mb-3 text-xs text-gray-500"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(Cn,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}),a.createElement("span",null,"TTL: ",Lue(e.ttl))),e.ttl!=="forever"&&e.expiresAt&&a.createElement("div",{className:"flex items-center gap-2"},a.createElement(Cn,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}),a.createElement("span",{className:y?"text-orange-600 font-medium":""},y?"Expired":Iue(e.expiresAt))),a.createElement("div",{className:"flex items-center gap-2 text-gray-400"},a.createElement("span",null,"Created: ",Rue(e.createdAt))),a.createElement("div",{className:"flex items-center gap-2 text-gray-400"},a.createElement("span",null,"Order: #",e.displayOrder))),a.createElement("div",{className:"mt-auto pt-3 border-t border-gray-100 space-y-2"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("button",{onClick:()=>i(e),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",title:"View Story"},a.createElement(rn,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"View")),t&&a.createElement("button",{onClick:()=>o(e),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",title:"Edit Story"},a.createElement(G_,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"Edit")),r&&a.createElement("button",{onClick:()=>d(e),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-red-200",title:"Delete Story"},a.createElement(gr,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"Delete"))),t&&a.createElement("button",{onClick:()=>g(e),disabled:n,className:`w-full flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-lg transition-colors border disabled:opacity-50 ${e.isActive?"text-orange-600 bg-orange-50 hover:bg-orange-100 border-orange-200":"text-green-600 bg-green-50 hover:bg-green-100 border-green-200"}`,title:e.isActive?"Deactivate Story":"Activate Story"},e.isActive?a.createElement(a.Fragment,null,a.createElement(fl,{className:"h-4 w-4"}),n?"Processing...":"Deactivate"):a.createElement(a.Fragment,null,a.createElement(_i,{className:"h-4 w-4"}),n?"Processing...":"Activate")))))}function LO(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function Uue(e){if(!e)return"N/A";const n=new Date(e)-new Date;if(n<0)return"Expired";const i=Math.floor(n/(1e3*60*60)),o=Math.floor(i/24);if(o>0)return`${o} day${o>1?"s":""} ${i%24} hour${i%24!==1?"s":""} remaining`;if(i>0)return`${i} hour${i!==1?"s":""} remaining`;const d=Math.floor(n/(1e3*60));return`${d} minute${d!==1?"s":""} remaining`}function jue(e){return{"1_hour":"1 hour","6_hours":"6 hours","12_hours":"12 hours","1_day":"1 day","3_days":"3 days","7_days":"7 days","30_days":"30 days",forever:"Forever"}[e]||e}function zue(e,t){return t==="forever"||!e?!1:new Date(e)<new Date}function Fh({label:e,value:t,icon:r,variant:n="default"}){const i={default:"bg-gray-50 border-gray-200 text-gray-600",success:"bg-green-50 border-green-200 text-green-600",warning:"bg-orange-50 border-orange-200 text-orange-600",danger:"bg-red-50 border-red-200 text-red-600",info:"bg-blue-50 border-blue-200 text-blue-600"};return a.createElement("div",{className:`p-3 rounded-lg border ${i[n]}`},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement(r,{className:"h-4 w-4"}),a.createElement("span",{className:"text-xs font-medium uppercase tracking-wide"},e)),a.createElement("p",{className:"text-lg font-semibold text-gray-900"},t))}function Vue({isOpen:e,onClose:t,story:r}){if(!r)return null;const n=zue(r.expiresAt,r.ttl),i=r.mediaType==="video";return a.createElement(hn,{isOpen:e,onClose:t,title:"Story Details",size:"2xl"},a.createElement("div",{className:"space-y-6"},n&&a.createElement("div",{className:"p-3 bg-orange-50 border border-orange-200 text-orange-700 rounded-lg flex items-center gap-2"},a.createElement(Ep,{className:"h-5 w-5 shrink-0"}),a.createElement("span",{className:"font-medium"},"This story has expired")),a.createElement("div",{className:"relative rounded-xl overflow-hidden bg-gray-100"},i?a.createElement("div",{className:"relative aspect-[9/16] sm:aspect-video max-h-96 mx-auto bg-black"},a.createElement("video",{src:r.mediaUrl,controls:!0,className:"w-full h-full object-contain",preload:"metadata"},"Your browser does not support the video tag.")):a.createElement("div",{className:"relative max-h-96 flex items-center justify-center bg-gray-900"},a.createElement("img",{src:r.mediaUrl,alt:r.title||"Story",className:"max-h-96 w-auto object-contain",onError:o=>{o.target.src="",o.target.alt="Failed to load image"}})),a.createElement("a",{href:r.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 p-2 bg-white/90 rounded-lg shadow-sm hover:bg-white transition-colors",title:"Open in new tab"},a.createElement(m2,{className:"h-4 w-4 text-gray-600"}))),r.title&&a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("p",{className:"text-sm font-medium text-gray-500 mb-1"},"Caption"),a.createElement("p",{className:"text-gray-900 whitespace-pre-wrap"},r.title)),a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3"},a.createElement(Fh,{label:"Status",value:r.isActive?"Active":"Inactive",icon:r.isActive?Nl:Mc,variant:r.isActive?"success":"default"}),a.createElement(Fh,{label:"Views",value:r.viewCount||0,icon:rn,variant:"info"}),a.createElement(Fh,{label:"Type",value:r.mediaType,icon:i?cl:Tc,variant:"default"}),a.createElement(Fh,{label:"Order",value:`#${r.displayOrder}`,icon:h2,variant:"default"})),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},a.createElement(Cn,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Time to Live")),a.createElement("p",{className:"text-gray-900 font-semibold"},jue(r.ttl))),a.createElement("div",{className:`p-4 rounded-lg border ${n?"bg-orange-50 border-orange-200":"bg-gray-50 border-gray-200"}`},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},a.createElement(Cn,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},n?"Expired":"Expires")),a.createElement("p",{className:`font-semibold ${n?"text-orange-700":"text-gray-900"}`},r.ttl==="forever"?"Never":n?LO(r.expiresAt):Uue(r.expiresAt))),a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},a.createElement(Hr,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Created")),a.createElement("p",{className:"text-gray-900 font-semibold"},LO(r.createdAt))),r.createdBy&&a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("div",{className:"flex items-center gap-2 text-gray-500 mb-2"},a.createElement(No,{className:"h-4 w-4"}),a.createElement("span",{className:"text-sm font-medium"},"Created By")),a.createElement("p",{className:"text-gray-900 font-semibold"},typeof r.createdBy=="object"?r.createdBy.name||r.createdBy.username:r.createdBy))),a.createElement("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200"},a.createElement("p",{className:"text-sm font-medium text-gray-500 mb-3"},"Technical Details"),a.createElement("div",{className:"space-y-2 text-sm"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1"},a.createElement("span",{className:"text-gray-500 shrink-0 sm:w-32"},"Story ID:"),a.createElement("code",{className:"text-gray-700 bg-gray-200 px-2 py-0.5 rounded text-xs break-all"},r._id)),r.cloudinaryPublicId&&a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1"},a.createElement("span",{className:"text-gray-500 shrink-0 sm:w-32"},"Public ID:"),a.createElement("code",{className:"text-gray-700 bg-gray-200 px-2 py-0.5 rounded text-xs break-all"},r.cloudinaryPublicId)),a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1"},a.createElement("span",{className:"text-gray-500 shrink-0 sm:w-32"},"Media URL:"),a.createElement("a",{href:r.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-xs break-all"},r.mediaUrl)))),a.createElement("div",{className:"pt-4 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Close"))))}function Hue({filters:e,onFilterChange:t,onSearchChange:r,onReset:n,includeExpired:i=!1,onToggleExpired:o,disabled:d=!1}){const[g,h]=N.useState(!1),x=e.search||e.mediaType||e.isActive!==""||i||e.sortBy!=="displayOrder"||e.sortOrder!=="asc",y=k=>{r(k.target.value)},w=k=>{t({mediaType:k===e.mediaType?"":k})},C=k=>{t({isActive:k===e.isActive?"":k})},_=(k,M)=>{t({[k]:M})},D=()=>{n(),h(!1)};return a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},a.createElement("div",{className:"flex flex-col sm:flex-row gap-3"},a.createElement("div",{className:"flex-1 relative"},a.createElement(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.createElement("input",{type:"text",value:e.search,onChange:y,disabled:d,placeholder:"Search stories by title...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:opacity-50 disabled:bg-gray-100"}),e.search&&a.createElement("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600"},a.createElement(zn,{className:"h-4 w-4"}))),a.createElement("button",{onClick:()=>h(!g),disabled:d,className:`flex items-center justify-center gap-2 px-4 py-2.5 border rounded-lg transition-colors whitespace-nowrap ${g||x?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"} disabled:opacity-50`},a.createElement(Ti,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"Filters"),x&&a.createElement("span",{className:"w-2 h-2 rounded-full bg-white"}))),g&&a.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Media Type"),a.createElement("div",{className:"flex flex-wrap gap-2"},Oue.map(k=>a.createElement("button",{key:k.value,onClick:()=>w(k.value),disabled:d,className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg transition-colors ${e.mediaType===k.value?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"} disabled:opacity-50`},k.value==="image"?a.createElement(Tc,{className:"h-3.5 w-3.5"}):a.createElement(cl,{className:"h-3.5 w-3.5"}),k.label)))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Status"),a.createElement("div",{className:"flex flex-wrap gap-2"},a.createElement("button",{onClick:()=>C("true"),disabled:d,className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${e.isActive==="true"?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"} disabled:opacity-50`},"Active"),a.createElement("button",{onClick:()=>C("false"),disabled:d,className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${e.isActive==="false"?"bg-gray-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"} disabled:opacity-50`},"Inactive"))),a.createElement("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(Cn,{className:"h-4 w-4 text-gray-500"}),a.createElement("span",{className:"text-sm font-medium text-gray-700"},"Include Expired Stories")),a.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},a.createElement("input",{type:"checkbox",checked:i,onChange:o,disabled:d,className:"sr-only peer"}),a.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800 peer-disabled:opacity-50"}))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},a.createElement(vj,{className:"inline h-4 w-4 mr-1"}),"Sort By"),a.createElement("select",{value:e.sortBy,onChange:k=>_("sortBy",k.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:opacity-50"},_ue.map(k=>a.createElement("option",{key:k.value,value:k.value},k.label)))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Order"),a.createElement("select",{value:e.sortOrder,onChange:k=>_("sortOrder",k.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-800 outline-none disabled:opacity-50"},a.createElement("option",{value:"asc"},"Ascending"),a.createElement("option",{value:"desc"},"Descending")))),x&&a.createElement("button",{onClick:D,disabled:d,className:"flex items-center gap-2 text-sm text-gray-500 hover:text-gray-700 transition-colors disabled:opacity-50"},a.createElement(zn,{className:"h-4 w-4"}),"Reset all filters")))}function yv({label:e,value:t,icon:r,color:n="gray",description:i}){const o={gray:"bg-gray-50 border-gray-200 text-gray-600",blue:"bg-blue-50 border-blue-200 text-blue-600",green:"bg-green-50 border-green-200 text-green-600",orange:"bg-orange-50 border-orange-200 text-orange-600",red:"bg-red-50 border-red-200 text-red-600",purple:"bg-purple-50 border-purple-200 text-purple-600"};return a.createElement("div",{className:`p-4 rounded-xl border ${o[n]}`},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:`p-2 rounded-lg ${o[n]}`},a.createElement(r,{className:"h-5 w-5"})),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500"},e),a.createElement("p",{className:"text-2xl font-bold text-gray-900"},t),i&&a.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},i))))}function que({isOpen:e,onClose:t,stats:r,isLoading:n=!1}){return a.createElement(hn,{isOpen:e,onClose:t,title:"Story Statistics",size:"xl"},n?a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(Nt,{className:"h-8 w-8 text-gray-400 animate-spin mb-3"}),a.createElement("p",{className:"text-gray-500"},"Loading statistics...")):r?a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"p-4 bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl text-white"},a.createElement("div",{className:"flex items-center gap-3 mb-4"},a.createElement(Ei,{className:"h-6 w-6"}),a.createElement("h3",{className:"text-lg font-semibold"},"Overview")),a.createElement("div",{className:"grid grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("p",{className:"text-gray-400 text-sm"},"Total Stories"),a.createElement("p",{className:"text-3xl font-bold"},r.totalStories||0)),a.createElement("div",null,a.createElement("p",{className:"text-gray-400 text-sm"},"Total Views"),a.createElement("p",{className:"text-3xl font-bold"},r.totalViews||0)))),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},a.createElement(yv,{label:"Active Stories",value:r.activeStories||0,icon:Nl,color:"green",description:"Currently visible to users"}),a.createElement(yv,{label:"Inactive Stories",value:r.inactiveStories||0,icon:Mc,color:"gray",description:"Hidden from users"}),a.createElement(yv,{label:"Expired Stories",value:r.expiredStories||0,icon:Cn,color:"orange",description:"Past their TTL"})),a.createElement("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-xl"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"p-2 bg-purple-100 rounded-lg"},a.createElement(X_,{className:"h-5 w-5 text-purple-600"})),a.createElement("div",null,a.createElement("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500"},"Average Views per Story"),a.createElement("p",{className:"text-2xl font-bold text-gray-900"},r.averageViews?r.averageViews.toFixed(1):"0")))),a.createElement("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-200"},a.createElement("h4",{className:"font-semibold text-gray-900 mb-3"},"Summary"),a.createElement("ul",{className:"space-y-2 text-sm text-gray-600"},a.createElement("li",{className:"flex items-center gap-2"},a.createElement("span",{className:"w-2 h-2 rounded-full bg-green-500"}),r.activeStories||0," stories are currently active and visible"),a.createElement("li",{className:"flex items-center gap-2"},a.createElement("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),r.expiredStories||0," stories have expired based on their TTL"),a.createElement("li",{className:"flex items-center gap-2"},a.createElement("span",{className:"w-2 h-2 rounded-full bg-gray-500"}),r.inactiveStories||0," stories are manually deactivated"),a.createElement("li",{className:"flex items-center gap-2"},a.createElement("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Stories have been viewed ",r.totalViews||0," times in total")))):a.createElement("div",{className:"flex flex-col items-center justify-center py-12"},a.createElement(Ei,{className:"h-12 w-12 text-gray-300 mb-3"}),a.createElement("p",{className:"text-gray-500"},"No statistics available")),a.createElement("div",{className:"pt-4 mt-6 border-t border-gray-200"},a.createElement("button",{onClick:t,className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},"Close")))}function $ue(){const{hasRole:e}=Mi(),t=e(["SUPER_ADMIN","ADMIN"]),r=e(["SUPER_ADMIN","ADMIN"]),n=e(["SUPER_ADMIN","ADMIN"]),{stories:i,pagination:o,filters:d,isLoading:g,error:h,stats:x,isLoadingStats:y,ttlOptions:w,createStory:C,updateStory:_,toggleStoryActive:D,deleteStory:k,updateFilters:M,updateSearch:R,resetFilters:F,toggleIncludeExpired:I,changePage:G,clearError:U,refresh:z}=Due(),[L,H]=N.useState("grid"),[V,Q]=N.useState(!1),[Y,X]=N.useState(!1),[he,xe]=N.useState(!1),[ae,ne]=N.useState(!1),[se,Te]=N.useState(!1),[we,te]=N.useState(null),[K,ee]=N.useState(!1),[fe,ce]=N.useState(!1),[Se,ie]=N.useState(null),[oe,He]=N.useState({}),[ve,We]=N.useState(null),be=N.useCallback(()=>{te(null),ie(null),Q(!0),console.log("[Stories] Opening create modal")},[]),ye=N.useCallback(nt=>{te(nt),ie(null),X(!0),console.log("[Stories] Opening edit modal for story:",nt._id)},[]),je=N.useCallback(nt=>{te(nt),xe(!0),console.log("[Stories] Opening details modal for story:",nt._id)},[]),Ze=N.useCallback(()=>{ne(!0),console.log("[Stories] Opening stats modal")},[]),Ie=N.useCallback(nt=>{te(nt),ee(!1),Te(!0),console.log("[Stories] Opening delete dialog for story:",nt._id)},[]),ut=N.useCallback(async nt=>{He(Re=>({...Re,[nt._id]:!0}));try{const Re=await D(nt._id);Re.success&&(We(`Story ${Re.data.isActive?"activated":"deactivated"} successfully`),setTimeout(()=>We(null),3e3))}finally{He(Re=>({...Re,[nt._id]:!1}))}},[D]),Le=N.useCallback(async nt=>{ce(!0),ie(null);try{console.log("[Stories] Creating story");const Re=await C(nt);Re.success?(Q(!1),We("Story created successfully"),setTimeout(()=>We(null),3e3),console.log("[Stories] Story created successfully")):(ie(Re.error||"Failed to create story"),console.error("[Stories] Failed to create story:",Re.error))}catch(Re){ie("An unexpected error occurred"),console.error("[Stories] Error creating story:",Re)}finally{ce(!1)}},[C]),et=N.useCallback(async nt=>{if(we){ce(!0),ie(null);try{console.log("[Stories] Updating story:",we._id);const Re=await _(we._id,nt);Re.success?(X(!1),te(null),We("Story updated successfully"),setTimeout(()=>We(null),3e3),console.log("[Stories] Story updated successfully")):(ie(Re.error||"Failed to update story"),console.error("[Stories] Failed to update story:",Re.error))}catch(Re){ie("An unexpected error occurred"),console.error("[Stories] Error updating story:",Re)}finally{ce(!1)}}},[we,_]),mt=N.useCallback(async()=>{if(we){ce(!0);try{console.log("[Stories] Deleting story:",we._id);const nt=await k(we._id,K);nt.success?(Te(!1),te(null),We("Story deleted successfully"),setTimeout(()=>We(null),3e3),console.log("[Stories] Story deleted successfully")):console.error("[Stories] Failed to delete story:",nt.error)}catch(nt){console.error("[Stories] Error deleting story:",nt)}finally{ce(!1)}}},[we,K,k]),Er=N.useCallback(nt=>{G(nt),window.scrollTo({top:0,behavior:"smooth"})},[G]),tt=N.useCallback(()=>{z(),console.log("[Stories] Refreshing stories")},[z]);return a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Stories"),a.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Upload and manage stories visible to all users")),a.createElement("div",{className:"flex items-center gap-3 flex-wrap"},a.createElement("button",{onClick:Ze,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",title:"View statistics"},a.createElement(Ei,{className:"h-4 w-4"}),a.createElement("span",{className:"hidden sm:inline"},"Stats")),a.createElement("button",{onClick:tt,disabled:g,className:"flex items-center gap-2 px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",title:"Refresh stories"},a.createElement(Oi,{className:`h-4 w-4 ${g?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline"},"Refresh")),a.createElement("div",{className:"flex items-center bg-white border border-gray-300 rounded-lg overflow-hidden"},a.createElement("button",{onClick:()=>H("grid"),className:`p-2 transition-colors ${L==="grid"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"Grid view"},a.createElement($_,{className:"h-4 w-4"})),a.createElement("button",{onClick:()=>H("list"),className:`p-2 transition-colors ${L==="list"?"bg-gray-800 text-white":"text-gray-600 hover:bg-gray-50"}`,title:"List view"},a.createElement(g2,{className:"h-4 w-4"}))),t&&a.createElement("button",{onClick:be,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},a.createElement(dn,{className:"h-4 w-4"}),a.createElement("span",null,"New Story")))),h&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"},a.createElement(Vr,{className:"h-5 w-5 shrink-0"}),a.createElement("p",{className:"flex-1"},h),a.createElement("button",{onClick:U,className:"text-red-500 hover:text-red-700 font-medium"},"Dismiss")),ve&&a.createElement("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg"},a.createElement(Nl,{className:"h-5 w-5 shrink-0"}),a.createElement("p",{className:"flex-1"},ve),a.createElement("button",{onClick:()=>We(null),className:"text-green-500 hover:text-green-700 font-medium"},"Dismiss")),a.createElement(Hue,{filters:d,onFilterChange:M,onSearchChange:R,onReset:F,includeExpired:d.includeExpired,onToggleExpired:I,disabled:g}),g&&i.length===0?a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},[...Array(8)].map((nt,Re)=>a.createElement("div",{key:Re,className:"bg-white rounded-xl border border-gray-200 overflow-hidden animate-pulse"},a.createElement("div",{className:"h-48 bg-gray-200"}),a.createElement("div",{className:"p-4 space-y-3"},a.createElement("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),a.createElement("div",{className:"h-3 bg-gray-200 rounded w-2/3"}),a.createElement("div",{className:"h-8 bg-gray-200 rounded"}))))):i.length===0?a.createElement("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center"},a.createElement("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center"},a.createElement(Tc,{className:"h-8 w-8 text-gray-400"})),a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No stories found"),a.createElement("p",{className:"text-gray-500 max-w-md mx-auto mb-6"},d.search||d.mediaType||d.isActive!==""||d.includeExpired?"Try adjusting your search or filter criteria.":"Create your first story to get started."),t&&!d.search&&a.createElement("button",{onClick:be,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors"},a.createElement(dn,{className:"h-4 w-4"}),"Create Story")):L==="grid"?a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},i.map(nt=>a.createElement(Fue,{key:nt._id,story:nt,canEdit:r,canDelete:n,isToggling:oe[nt._id],onView:je,onEdit:ye,onDelete:Ie,onToggleActive:ut}))):a.createElement("div",{className:"space-y-3"},i.map(nt=>a.createElement("div",{key:nt._id,className:"bg-white rounded-xl border border-gray-200 p-4 flex flex-col sm:flex-row items-start sm:items-center gap-4"},a.createElement("div",{className:"shrink-0 w-full sm:w-24 h-32 sm:h-24 rounded-lg overflow-hidden bg-gray-100 relative"},nt.mediaType==="video"?a.createElement("video",{src:nt.mediaUrl,className:"w-full h-full object-cover",muted:!0,preload:"metadata"}):a.createElement("img",{src:nt.mediaUrl,alt:nt.title||"Story",className:"w-full h-full object-cover"}),a.createElement("span",{className:`absolute top-2 right-2 px-2 py-0.5 text-xs font-medium rounded-full ${nt.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`},nt.isActive?"Active":"Inactive")),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("h3",{className:"font-semibold text-gray-900 truncate"},nt.title||"Untitled Story"),a.createElement("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-sm text-gray-500"},a.createElement("span",{className:"capitalize"},nt.mediaType),a.createElement("span",null,"TTL: ",nt.ttl?.replace("_"," ")),a.createElement("span",null,nt.viewCount||0," views"))),a.createElement("div",{className:"flex items-center gap-2 w-full sm:w-auto"},a.createElement("button",{onClick:()=>je(nt),className:"flex-1 sm:flex-none px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors"},"View"),r&&a.createElement("button",{onClick:()=>ye(nt),className:"flex-1 sm:flex-none px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors"},"Edit"),n&&a.createElement("button",{onClick:()=>Ie(nt),className:"flex-1 sm:flex-none px-3 py-1.5 text-sm text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors"},"Delete"))))),o.totalPages>1&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm"},a.createElement(Pn,{currentPage:o.page,totalPages:o.totalPages,totalItems:o.total,itemsPerPage:o.limit,onPageChange:Er,itemLabel:"stories"})),a.createElement(IO,{isOpen:V,onClose:()=>{Q(!1),ie(null)},onSubmit:Le,story:null,ttlOptions:w,isLoading:fe,serverError:Se}),a.createElement(IO,{isOpen:Y,onClose:()=>{X(!1),te(null),ie(null)},onSubmit:et,story:we,ttlOptions:w,isLoading:fe,serverError:Se}),a.createElement(Vue,{isOpen:he,onClose:()=>{xe(!1),te(null)},story:we}),a.createElement(que,{isOpen:ae,onClose:()=>ne(!1),stats:x,isLoading:y}),a.createElement(ha,{isOpen:se,onClose:()=>{Te(!1),te(null),ee(!1)},onConfirm:mt,title:"Delete Story",message:a.createElement("div",{className:"space-y-3"},a.createElement("p",null,"Are you sure you want to delete this story? This action cannot be undone."),a.createElement("label",{className:"flex items-center gap-2 text-sm"},a.createElement("input",{type:"checkbox",checked:K,onChange:nt=>ee(nt.target.checked),className:"rounded border-gray-300"}),a.createElement("span",null,"Also delete media from cloud storage"))),confirmText:"Delete Story",cancelText:"Cancel",variant:"danger",isLoading:fe}))}var it;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(it||(it={}));var BO=new Map([[it.QR_CODE,"QR_CODE"],[it.AZTEC,"AZTEC"],[it.CODABAR,"CODABAR"],[it.CODE_39,"CODE_39"],[it.CODE_93,"CODE_93"],[it.CODE_128,"CODE_128"],[it.DATA_MATRIX,"DATA_MATRIX"],[it.MAXICODE,"MAXICODE"],[it.ITF,"ITF"],[it.EAN_13,"EAN_13"],[it.EAN_8,"EAN_8"],[it.PDF_417,"PDF_417"],[it.RSS_14,"RSS_14"],[it.RSS_EXPANDED,"RSS_EXPANDED"],[it.UPC_A,"UPC_A"],[it.UPC_E,"UPC_E"],[it.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),FO;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(FO||(FO={}));function Gue(e){return Object.values(it).includes(e)}var cp;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(cp||(cp={}));var Yue=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[cp.SCAN_TYPE_CAMERA,cp.SCAN_TYPE_FILE],e})(),hI=(function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!BO.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,BO.get(t))},e})(),UO=(function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e})(),QE;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(QE||(QE={}));var Xue=(function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:QE.UNKWOWN_ERROR}},e})(),Wue=(function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e})();function rl(e){return typeof e>"u"||e===null}var Lu=(function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),gI=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var n=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),d=Object.keys(t),g=0,h=d;g<h.length;g++){var x=h[g];if(o.has(x))return r.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},e})(),Of={exports:{}},Kue=Of.exports,jO;function Zue(){return jO||(jO=1,(function(e,t){(function(r,n){n(t)})(Kue,(function(r){function n(q){return q==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,l){q.__proto__=l}||function(q,l){for(var u in l)l.hasOwnProperty(u)&&(q[u]=l[u])};function o(q,l){i(q,l);function u(){this.constructor=q}q.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}function d(q,l){var u=Object.setPrototypeOf;u?u(q,l):q.__proto__=l}function g(q,l){l===void 0&&(l=q.constructor);var u=Error.captureStackTrace;u&&u(q,l)}var h=(function(q){o(l,q);function l(u){var f=this.constructor,p=q.call(this,u)||this;return Object.defineProperty(p,"name",{value:f.name,enumerable:!1}),d(p,f.prototype),g(p),p}return l})(Error);class x extends h{constructor(l=void 0){super(l),this.message=l}getKind(){return this.constructor.kind}}x.kind="Exception";class y extends x{}y.kind="ArgumentException";class w extends x{}w.kind="IllegalArgumentException";class C{constructor(l){if(this.binarizer=l,l===null)throw new w("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(l,u){return this.binarizer.getBlackRow(l,u)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(l,u,f,p){const b=this.binarizer.getLuminanceSource().crop(l,u,f,p);return new C(this.binarizer.createBinarizer(b))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const l=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new C(this.binarizer.createBinarizer(l))}rotateCounterClockwise45(){const l=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new C(this.binarizer.createBinarizer(l))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class _ extends x{static getChecksumInstance(){return new _}}_.kind="ChecksumException";class D{constructor(l){this.source=l}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class k{static arraycopy(l,u,f,p,b){for(;b--;)f[p++]=l[u++]}static currentTimeMillis(){return Date.now()}}class M extends x{}M.kind="IndexOutOfBoundsException";class R extends M{constructor(l=void 0,u=void 0){super(u),this.index=l,this.message=u}}R.kind="ArrayIndexOutOfBoundsException";class F{static fill(l,u){for(let f=0,p=l.length;f<p;f++)l[f]=u}static fillWithin(l,u,f,p){F.rangeCheck(l.length,u,f);for(let b=u;b<f;b++)l[b]=p}static rangeCheck(l,u,f){if(u>f)throw new w("fromIndex("+u+") > toIndex("+f+")");if(u<0)throw new R(u);if(f>l)throw new R(f)}static asList(...l){return l}static create(l,u,f){return Array.from({length:l}).map(b=>Array.from({length:u}).fill(f))}static createInt32Array(l,u,f){return Array.from({length:l}).map(b=>Int32Array.from({length:u}).fill(f))}static equals(l,u){if(!l||!u||!l.length||!u.length||l.length!==u.length)return!1;for(let f=0,p=l.length;f<p;f++)if(l[f]!==u[f])return!1;return!0}static hashCode(l){if(l===null)return 0;let u=1;for(const f of l)u=31*u+f;return u}static fillUint8Array(l,u){for(let f=0;f!==l.length;f++)l[f]=u}static copyOf(l,u){return l.slice(0,u)}static copyOfUint8Array(l,u){if(l.length<=u){const f=new Uint8Array(u);return f.set(l),f}return l.slice(0,u)}static copyOfRange(l,u,f){const p=f-u,b=new Int32Array(p);return k.arraycopy(l,u,b,0,p),b}static binarySearch(l,u,f){f===void 0&&(f=F.numberComparator);let p=0,b=l.length-1;for(;p<=b;){const E=b+p>>1,S=f(u,l[E]);if(S>0)p=E+1;else if(S<0)b=E-1;else return E}return-p-1}static numberComparator(l,u){return l-u}}class I{static numberOfTrailingZeros(l){let u;if(l===0)return 32;let f=31;return u=l<<16,u!==0&&(f-=16,l=u),u=l<<8,u!==0&&(f-=8,l=u),u=l<<4,u!==0&&(f-=4,l=u),u=l<<2,u!==0&&(f-=2,l=u),f-(l<<1>>>31)}static numberOfLeadingZeros(l){if(l===0)return 32;let u=1;return l>>>16||(u+=16,l<<=16),l>>>24||(u+=8,l<<=8),l>>>28||(u+=4,l<<=4),l>>>30||(u+=2,l<<=2),u-=l>>>31,u}static toHexString(l){return l.toString(16)}static toBinaryString(l){return String(parseInt(String(l),2))}static bitCount(l){return l=l-(l>>>1&1431655765),l=(l&858993459)+(l>>>2&858993459),l=l+(l>>>4)&252645135,l=l+(l>>>8),l=l+(l>>>16),l&63}static truncDivision(l,u){return Math.trunc(l/u)}static parseInt(l,u=void 0){return parseInt(l,u)}}I.MIN_VALUE_32_BITS=-2147483648,I.MAX_VALUE=Number.MAX_SAFE_INTEGER;class G{constructor(l,u){l===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=l,u==null?this.bits=G.makeArray(l):this.bits=u)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(l){if(l>this.bits.length*32){const u=G.makeArray(l);k.arraycopy(this.bits,0,u,0,this.bits.length),this.bits=u}}get(l){return(this.bits[Math.floor(l/32)]&1<<(l&31))!==0}set(l){this.bits[Math.floor(l/32)]|=1<<(l&31)}flip(l){this.bits[Math.floor(l/32)]^=1<<(l&31)}getNextSet(l){const u=this.size;if(l>=u)return u;const f=this.bits;let p=Math.floor(l/32),b=f[p];b&=~((1<<(l&31))-1);const E=f.length;for(;b===0;){if(++p===E)return u;b=f[p]}const S=p*32+I.numberOfTrailingZeros(b);return S>u?u:S}getNextUnset(l){const u=this.size;if(l>=u)return u;const f=this.bits;let p=Math.floor(l/32),b=~f[p];b&=~((1<<(l&31))-1);const E=f.length;for(;b===0;){if(++p===E)return u;b=~f[p]}const S=p*32+I.numberOfTrailingZeros(b);return S>u?u:S}setBulk(l,u){this.bits[Math.floor(l/32)]=u}setRange(l,u){if(u<l||l<0||u>this.size)throw new w;if(u===l)return;u--;const f=Math.floor(l/32),p=Math.floor(u/32),b=this.bits;for(let E=f;E<=p;E++){const S=E>f?0:l&31,P=(2<<(E<p?31:u&31))-(1<<S);b[E]|=P}}clear(){const l=this.bits.length,u=this.bits;for(let f=0;f<l;f++)u[f]=0}isRange(l,u,f){if(u<l||l<0||u>this.size)throw new w;if(u===l)return!0;u--;const p=Math.floor(l/32),b=Math.floor(u/32),E=this.bits;for(let S=p;S<=b;S++){const T=S>p?0:l&31,B=(2<<(S<b?31:u&31))-(1<<T)&4294967295;if((E[S]&B)!==(f?B:0))return!1}return!0}appendBit(l){this.ensureCapacity(this.size+1),l&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(l,u){if(u<0||u>32)throw new w("Num bits must be between 0 and 32");this.ensureCapacity(this.size+u);for(let f=u;f>0;f--)this.appendBit((l>>f-1&1)===1)}appendBitArray(l){const u=l.size;this.ensureCapacity(this.size+u);for(let f=0;f<u;f++)this.appendBit(l.get(f))}xor(l){if(this.size!==l.size)throw new w("Sizes don't match");const u=this.bits;for(let f=0,p=u.length;f<p;f++)u[f]^=l.bits[f]}toBytes(l,u,f,p){for(let b=0;b<p;b++){let E=0;for(let S=0;S<8;S++)this.get(l)&&(E|=1<<7-S),l++;u[f+b]=E}}getBitArray(){return this.bits}reverse(){const l=new Int32Array(this.bits.length),u=Math.floor((this.size-1)/32),f=u+1,p=this.bits;for(let b=0;b<f;b++){let E=p[b];E=E>>1&1431655765|(E&1431655765)<<1,E=E>>2&858993459|(E&858993459)<<2,E=E>>4&252645135|(E&252645135)<<4,E=E>>8&16711935|(E&16711935)<<8,E=E>>16&65535|(E&65535)<<16,l[u-b]=E}if(this.size!==f*32){const b=f*32-this.size;let E=l[0]>>>b;for(let S=1;S<f;S++){const T=l[S];E|=T<<32-b,l[S-1]=E,E=T>>>b}l[f-1]=E}this.bits=l}static makeArray(l){return new Int32Array(Math.floor((l+31)/32))}equals(l){if(!(l instanceof G))return!1;const u=l;return this.size===u.size&&F.equals(this.bits,u.bits)}hashCode(){return 31*this.size+F.hashCode(this.bits)}toString(){let l="";for(let u=0,f=this.size;u<f;u++)(u&7)===0&&(l+=" "),l+=this.get(u)?"X":".";return l}clone(){return new G(this.size,this.bits.slice())}}var U;(function(q){q[q.OTHER=0]="OTHER",q[q.PURE_BARCODE=1]="PURE_BARCODE",q[q.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",q[q.TRY_HARDER=3]="TRY_HARDER",q[q.CHARACTER_SET=4]="CHARACTER_SET",q[q.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",q[q.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",q[q.ASSUME_GS1=7]="ASSUME_GS1",q[q.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",q[q.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",q[q.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(U||(U={}));var z=U;class L extends x{static getFormatInstance(){return new L}}L.kind="FormatException";var H;(function(q){q[q.Cp437=0]="Cp437",q[q.ISO8859_1=1]="ISO8859_1",q[q.ISO8859_2=2]="ISO8859_2",q[q.ISO8859_3=3]="ISO8859_3",q[q.ISO8859_4=4]="ISO8859_4",q[q.ISO8859_5=5]="ISO8859_5",q[q.ISO8859_6=6]="ISO8859_6",q[q.ISO8859_7=7]="ISO8859_7",q[q.ISO8859_8=8]="ISO8859_8",q[q.ISO8859_9=9]="ISO8859_9",q[q.ISO8859_10=10]="ISO8859_10",q[q.ISO8859_11=11]="ISO8859_11",q[q.ISO8859_13=12]="ISO8859_13",q[q.ISO8859_14=13]="ISO8859_14",q[q.ISO8859_15=14]="ISO8859_15",q[q.ISO8859_16=15]="ISO8859_16",q[q.SJIS=16]="SJIS",q[q.Cp1250=17]="Cp1250",q[q.Cp1251=18]="Cp1251",q[q.Cp1252=19]="Cp1252",q[q.Cp1256=20]="Cp1256",q[q.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",q[q.UTF8=22]="UTF8",q[q.ASCII=23]="ASCII",q[q.Big5=24]="Big5",q[q.GB18030=25]="GB18030",q[q.EUC_KR=26]="EUC_KR"})(H||(H={}));class V{constructor(l,u,f,...p){this.valueIdentifier=l,this.name=f,typeof u=="number"?this.values=Int32Array.from([u]):this.values=u,this.otherEncodingNames=p,V.VALUE_IDENTIFIER_TO_ECI.set(l,this),V.NAME_TO_ECI.set(f,this);const b=this.values;for(let E=0,S=b.length;E!==S;E++){const T=b[E];V.VALUES_TO_ECI.set(T,this)}for(const E of p)V.NAME_TO_ECI.set(E,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(l){if(l<0||l>=900)throw new L("incorect value");const u=V.VALUES_TO_ECI.get(l);if(u===void 0)throw new L("incorect value");return u}static getCharacterSetECIByName(l){const u=V.NAME_TO_ECI.get(l);if(u===void 0)throw new L("incorect value");return u}equals(l){if(!(l instanceof V))return!1;const u=l;return this.getName()===u.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(H.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(H.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(H.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(H.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(H.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(H.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(H.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(H.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(H.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(H.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(H.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(H.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(H.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(H.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(H.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(H.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(H.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(H.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(H.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(H.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(H.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(H.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(H.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(H.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(H.Big5,28,"Big5"),V.GB18030=new V(H.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(H.EUC_KR,30,"EUC_KR","EUC-KR");class Q extends x{}Q.kind="UnsupportedOperationException";class Y{static decode(l,u){const f=this.encodingName(u);return this.customDecoder?this.customDecoder(l,f):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(f)?this.decodeFallback(l,f):new TextDecoder(f).decode(l)}static shouldDecodeOnFallback(l){return!Y.isBrowser()&&l==="ISO-8859-1"}static encode(l,u){const f=this.encodingName(u);return this.customEncoder?this.customEncoder(l,f):typeof TextEncoder>"u"?this.encodeFallback(l):new TextEncoder().encode(l)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(l){return typeof l=="string"?l:l.getName()}static encodingCharacterSet(l){return l instanceof V?l:V.getCharacterSetECIByName(l)}static decodeFallback(l,u){const f=this.encodingCharacterSet(u);if(Y.isDecodeFallbackSupported(f)){let p="";for(let b=0,E=l.length;b<E;b++){let S=l[b].toString(16);S.length<2&&(S="0"+S),p+="%"+S}return decodeURIComponent(p)}if(f.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(l.buffer));throw new Q(`Encoding ${this.encodingName(u)} not supported by fallback.`)}static isDecodeFallbackSupported(l){return l.equals(V.UTF8)||l.equals(V.ISO8859_1)||l.equals(V.ASCII)}static encodeFallback(l){const f=btoa(unescape(encodeURIComponent(l))).split(""),p=[];for(let b=0;b<f.length;b++)p.push(f[b].charCodeAt(0));return new Uint8Array(p)}}class X{static castAsNonUtf8Char(l,u=null){const f=u?u.getName():this.ISO88591;return Y.decode(new Uint8Array([l]),f)}static guessEncoding(l,u){if(u!=null&&u.get(z.CHARACTER_SET)!==void 0)return u.get(z.CHARACTER_SET).toString();const f=l.length;let p=!0,b=!0,E=!0,S=0,T=0,P=0,B=0,$=0,W=0,re=0,ue=0,de=0,Ee=0,_e=0;const Qe=l.length>3&&l[0]===239&&l[1]===187&&l[2]===191;for(let Ke=0;Ke<f&&(p||b||E);Ke++){const Ge=l[Ke]&255;E&&(S>0?(Ge&128)===0?E=!1:S--:(Ge&128)!==0&&((Ge&64)===0?E=!1:(S++,(Ge&32)===0?T++:(S++,(Ge&16)===0?P++:(S++,(Ge&8)===0?B++:E=!1))))),p&&(Ge>127&&Ge<160?p=!1:Ge>159&&(Ge<192||Ge===215||Ge===247)&&_e++),b&&($>0?Ge<64||Ge===127||Ge>252?b=!1:$--:Ge===128||Ge===160||Ge>239?b=!1:Ge>160&&Ge<224?(W++,ue=0,re++,re>de&&(de=re)):Ge>127?($++,re=0,ue++,ue>Ee&&(Ee=ue)):(re=0,ue=0))}return E&&S>0&&(E=!1),b&&$>0&&(b=!1),E&&(Qe||T+P+B>0)?X.UTF8:b&&(X.ASSUME_SHIFT_JIS||de>=3||Ee>=3)?X.SHIFT_JIS:p&&b?de===2&&W===2||_e*10>=f?X.SHIFT_JIS:X.ISO88591:p?X.ISO88591:b?X.SHIFT_JIS:E?X.UTF8:X.PLATFORM_DEFAULT_ENCODING}static format(l,...u){let f=-1;function p(E,S,T,P,B,$){if(E==="%%")return"%";if(u[++f]===void 0)return;E=P?parseInt(P.substr(1)):void 0;let W=B?parseInt(B.substr(1)):void 0,re;switch($){case"s":re=u[f];break;case"c":re=u[f][0];break;case"f":re=parseFloat(u[f]).toFixed(E);break;case"p":re=parseFloat(u[f]).toPrecision(E);break;case"e":re=parseFloat(u[f]).toExponential(E);break;case"x":re=parseInt(u[f]).toString(W||16);break;case"d":re=parseFloat(parseInt(u[f],W||10).toPrecision(E)).toFixed(0);break}re=typeof re=="object"?JSON.stringify(re):(+re).toString(W);let ue=parseInt(T),de=T&&T[0]+""=="0"?"0":" ";for(;re.length<ue;)re=S!==void 0?re+de:de+re;return re}let b=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return l.replace(b,p)}static getBytes(l,u){return Y.encode(l,u)}static getCharCode(l,u=0){return l.charCodeAt(u)}static getCharAt(l){return String.fromCharCode(l)}}X.SHIFT_JIS=V.SJIS.getName(),X.GB2312="GB2312",X.ISO88591=V.ISO8859_1.getName(),X.EUC_JP="EUC_JP",X.UTF8=V.UTF8.getName(),X.PLATFORM_DEFAULT_ENCODING=X.UTF8,X.ASSUME_SHIFT_JIS=!1;class he{constructor(l=""){this.value=l}enableDecoding(l){return this.encoding=l,this}append(l){return typeof l=="string"?this.value+=l.toString():this.encoding?this.value+=X.castAsNonUtf8Char(l,this.encoding):this.value+=String.fromCharCode(l),this}appendChars(l,u,f){for(let p=u;u<u+f;p++)this.append(l[p]);return this}length(){return this.value.length}charAt(l){return this.value.charAt(l)}deleteCharAt(l){this.value=this.value.substr(0,l)+this.value.substring(l+1)}setCharAt(l,u){this.value=this.value.substr(0,l)+u+this.value.substr(l+1)}substring(l,u){return this.value.substring(l,u)}setLengthToZero(){this.value=""}toString(){return this.value}insert(l,u){this.value=this.value.substr(0,l)+u+this.value.substr(l+u.length)}}class xe{constructor(l,u,f,p){if(this.width=l,this.height=u,this.rowSize=f,this.bits=p,u==null&&(u=l),this.height=u,l<1||u<1)throw new w("Both dimensions must be greater than 0");f==null&&(f=Math.floor((l+31)/32)),this.rowSize=f,p==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(l){const u=l.length,f=l[0].length,p=new xe(f,u);for(let b=0;b<u;b++){const E=l[b];for(let S=0;S<f;S++)E[S]&&p.set(S,b)}return p}static parseFromString(l,u,f){if(l===null)throw new w("stringRepresentation cannot be null");const p=new Array(l.length);let b=0,E=0,S=-1,T=0,P=0;for(;P<l.length;)if(l.charAt(P)===`
`||l.charAt(P)==="\r"){if(b>E){if(S===-1)S=b-E;else if(b-E!==S)throw new w("row lengths do not match");E=b,T++}P++}else if(l.substring(P,P+u.length)===u)P+=u.length,p[b]=!0,b++;else if(l.substring(P,P+f.length)===f)P+=f.length,p[b]=!1,b++;else throw new w("illegal character encountered: "+l.substring(P));if(b>E){if(S===-1)S=b-E;else if(b-E!==S)throw new w("row lengths do not match");T++}const B=new xe(S,T);for(let $=0;$<b;$++)p[$]&&B.set(Math.floor($%S),Math.floor($/S));return B}get(l,u){const f=u*this.rowSize+Math.floor(l/32);return(this.bits[f]>>>(l&31)&1)!==0}set(l,u){const f=u*this.rowSize+Math.floor(l/32);this.bits[f]|=1<<(l&31)&4294967295}unset(l,u){const f=u*this.rowSize+Math.floor(l/32);this.bits[f]&=~(1<<(l&31)&4294967295)}flip(l,u){const f=u*this.rowSize+Math.floor(l/32);this.bits[f]^=1<<(l&31)&4294967295}xor(l){if(this.width!==l.getWidth()||this.height!==l.getHeight()||this.rowSize!==l.getRowSize())throw new w("input matrix dimensions do not match");const u=new G(Math.floor(this.width/32)+1),f=this.rowSize,p=this.bits;for(let b=0,E=this.height;b<E;b++){const S=b*f,T=l.getRow(b,u).getBitArray();for(let P=0;P<f;P++)p[S+P]^=T[P]}}clear(){const l=this.bits,u=l.length;for(let f=0;f<u;f++)l[f]=0}setRegion(l,u,f,p){if(u<0||l<0)throw new w("Left and top must be nonnegative");if(p<1||f<1)throw new w("Height and width must be at least 1");const b=l+f,E=u+p;if(E>this.height||b>this.width)throw new w("The region must fit inside the matrix");const S=this.rowSize,T=this.bits;for(let P=u;P<E;P++){const B=P*S;for(let $=l;$<b;$++)T[B+Math.floor($/32)]|=1<<($&31)&4294967295}}getRow(l,u){u==null||u.getSize()<this.width?u=new G(this.width):u.clear();const f=this.rowSize,p=this.bits,b=l*f;for(let E=0;E<f;E++)u.setBulk(E*32,p[b+E]);return u}setRow(l,u){k.arraycopy(u.getBitArray(),0,this.bits,l*this.rowSize,this.rowSize)}rotate180(){const l=this.getWidth(),u=this.getHeight();let f=new G(l),p=new G(l);for(let b=0,E=Math.floor((u+1)/2);b<E;b++)f=this.getRow(b,f),p=this.getRow(u-1-b,p),f.reverse(),p.reverse(),this.setRow(b,p),this.setRow(u-1-b,f)}getEnclosingRectangle(){const l=this.width,u=this.height,f=this.rowSize,p=this.bits;let b=l,E=u,S=-1,T=-1;for(let P=0;P<u;P++)for(let B=0;B<f;B++){const $=p[P*f+B];if($!==0){if(P<E&&(E=P),P>T&&(T=P),B*32<b){let W=0;for(;($<<31-W&4294967295)===0;)W++;B*32+W<b&&(b=B*32+W)}if(B*32+31>S){let W=31;for(;!($>>>W);)W--;B*32+W>S&&(S=B*32+W)}}}return S<b||T<E?null:Int32Array.from([b,E,S-b+1,T-E+1])}getTopLeftOnBit(){const l=this.rowSize,u=this.bits;let f=0;for(;f<u.length&&u[f]===0;)f++;if(f===u.length)return null;const p=f/l;let b=f%l*32;const E=u[f];let S=0;for(;(E<<31-S&4294967295)===0;)S++;return b+=S,Int32Array.from([b,p])}getBottomRightOnBit(){const l=this.rowSize,u=this.bits;let f=u.length-1;for(;f>=0&&u[f]===0;)f--;if(f<0)return null;const p=Math.floor(f/l);let b=Math.floor(f%l)*32;const E=u[f];let S=31;for(;!(E>>>S);)S--;return b+=S,Int32Array.from([b,p])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(l){if(!(l instanceof xe))return!1;const u=l;return this.width===u.width&&this.height===u.height&&this.rowSize===u.rowSize&&F.equals(this.bits,u.bits)}hashCode(){let l=this.width;return l=31*l+this.width,l=31*l+this.height,l=31*l+this.rowSize,l=31*l+F.hashCode(this.bits),l}toString(l="X ",u="  ",f=`
`){return this.buildToString(l,u,f)}buildToString(l,u,f){let p=new he;for(let b=0,E=this.height;b<E;b++){for(let S=0,T=this.width;S<T;S++)p.append(this.get(S,b)?l:u);p.append(f)}return p.toString()}clone(){return new xe(this.width,this.height,this.rowSize,this.bits.slice())}}class ae extends x{static getNotFoundInstance(){return new ae}}ae.kind="NotFoundException";class ne extends D{constructor(l){super(l),this.luminances=ne.EMPTY,this.buckets=new Int32Array(ne.LUMINANCE_BUCKETS)}getBlackRow(l,u){const f=this.getLuminanceSource(),p=f.getWidth();u==null||u.getSize()<p?u=new G(p):u.clear(),this.initArrays(p);const b=f.getRow(l,this.luminances),E=this.buckets;for(let T=0;T<p;T++)E[(b[T]&255)>>ne.LUMINANCE_SHIFT]++;const S=ne.estimateBlackPoint(E);if(p<3)for(let T=0;T<p;T++)(b[T]&255)<S&&u.set(T);else{let T=b[0]&255,P=b[1]&255;for(let B=1;B<p-1;B++){const $=b[B+1]&255;(P*4-T-$)/2<S&&u.set(B),T=P,P=$}}return u}getBlackMatrix(){const l=this.getLuminanceSource(),u=l.getWidth(),f=l.getHeight(),p=new xe(u,f);this.initArrays(u);const b=this.buckets;for(let T=1;T<5;T++){const P=Math.floor(f*T/5),B=l.getRow(P,this.luminances),$=Math.floor(u*4/5);for(let W=Math.floor(u/5);W<$;W++){const re=B[W]&255;b[re>>ne.LUMINANCE_SHIFT]++}}const E=ne.estimateBlackPoint(b),S=l.getMatrix();for(let T=0;T<f;T++){const P=T*u;for(let B=0;B<u;B++)(S[P+B]&255)<E&&p.set(B,T)}return p}createBinarizer(l){return new ne(l)}initArrays(l){this.luminances.length<l&&(this.luminances=new Uint8ClampedArray(l));const u=this.buckets;for(let f=0;f<ne.LUMINANCE_BUCKETS;f++)u[f]=0}static estimateBlackPoint(l){const u=l.length;let f=0,p=0,b=0;for(let B=0;B<u;B++)l[B]>b&&(p=B,b=l[B]),l[B]>f&&(f=l[B]);let E=0,S=0;for(let B=0;B<u;B++){const $=B-p,W=l[B]*$*$;W>S&&(E=B,S=W)}if(p>E){const B=p;p=E,E=B}if(E-p<=u/16)throw new ae;let T=E-1,P=-1;for(let B=E-1;B>p;B--){const $=B-p,W=$*$*(E-B)*(f-l[B]);W>P&&(T=B,P=W)}return T<<ne.LUMINANCE_SHIFT}}ne.LUMINANCE_BITS=5,ne.LUMINANCE_SHIFT=8-ne.LUMINANCE_BITS,ne.LUMINANCE_BUCKETS=1<<ne.LUMINANCE_BITS,ne.EMPTY=Uint8ClampedArray.from([0]);class se extends ne{constructor(l){super(l),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const l=this.getLuminanceSource(),u=l.getWidth(),f=l.getHeight();if(u>=se.MINIMUM_DIMENSION&&f>=se.MINIMUM_DIMENSION){const p=l.getMatrix();let b=u>>se.BLOCK_SIZE_POWER;(u&se.BLOCK_SIZE_MASK)!==0&&b++;let E=f>>se.BLOCK_SIZE_POWER;(f&se.BLOCK_SIZE_MASK)!==0&&E++;const S=se.calculateBlackPoints(p,b,E,u,f),T=new xe(u,f);se.calculateThresholdForBlock(p,b,E,u,f,S,T),this.matrix=T}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(l){return new se(l)}static calculateThresholdForBlock(l,u,f,p,b,E,S){const T=b-se.BLOCK_SIZE,P=p-se.BLOCK_SIZE;for(let B=0;B<f;B++){let $=B<<se.BLOCK_SIZE_POWER;$>T&&($=T);const W=se.cap(B,2,f-3);for(let re=0;re<u;re++){let ue=re<<se.BLOCK_SIZE_POWER;ue>P&&(ue=P);const de=se.cap(re,2,u-3);let Ee=0;for(let Qe=-2;Qe<=2;Qe++){const Ke=E[W+Qe];Ee+=Ke[de-2]+Ke[de-1]+Ke[de]+Ke[de+1]+Ke[de+2]}const _e=Ee/25;se.thresholdBlock(l,ue,$,_e,p,S)}}}static cap(l,u,f){return l<u?u:l>f?f:l}static thresholdBlock(l,u,f,p,b,E){for(let S=0,T=f*b+u;S<se.BLOCK_SIZE;S++,T+=b)for(let P=0;P<se.BLOCK_SIZE;P++)(l[T+P]&255)<=p&&E.set(u+P,f+S)}static calculateBlackPoints(l,u,f,p,b){const E=b-se.BLOCK_SIZE,S=p-se.BLOCK_SIZE,T=new Array(f);for(let P=0;P<f;P++){T[P]=new Int32Array(u);let B=P<<se.BLOCK_SIZE_POWER;B>E&&(B=E);for(let $=0;$<u;$++){let W=$<<se.BLOCK_SIZE_POWER;W>S&&(W=S);let re=0,ue=255,de=0;for(let _e=0,Qe=B*p+W;_e<se.BLOCK_SIZE;_e++,Qe+=p){for(let Ke=0;Ke<se.BLOCK_SIZE;Ke++){const Ge=l[Qe+Ke]&255;re+=Ge,Ge<ue&&(ue=Ge),Ge>de&&(de=Ge)}if(de-ue>se.MIN_DYNAMIC_RANGE)for(_e++,Qe+=p;_e<se.BLOCK_SIZE;_e++,Qe+=p)for(let Ke=0;Ke<se.BLOCK_SIZE;Ke++)re+=l[Qe+Ke]&255}let Ee=re>>se.BLOCK_SIZE_POWER*2;if(de-ue<=se.MIN_DYNAMIC_RANGE&&(Ee=ue/2,P>0&&$>0)){const _e=(T[P-1][$]+2*T[P][$-1]+T[P-1][$-1])/4;ue<_e&&(Ee=_e)}T[P][$]=Ee}}return T}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class Te{constructor(l,u){this.width=l,this.height=u}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(l,u,f,p){throw new Q("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Q("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Q("This luminance source does not support rotation by 45 degrees.")}toString(){const l=new Uint8ClampedArray(this.width);let u=new he;for(let f=0;f<this.height;f++){const p=this.getRow(f,l);for(let b=0;b<this.width;b++){const E=p[b]&255;let S;E<64?S="#":E<128?S="+":E<192?S=".":S=" ",u.append(S)}u.append(`
`)}return u.toString()}}class we extends Te{constructor(l){super(l.getWidth(),l.getHeight()),this.delegate=l}getRow(l,u){const f=this.delegate.getRow(l,u),p=this.getWidth();for(let b=0;b<p;b++)f[b]=255-(f[b]&255);return f}getMatrix(){const l=this.delegate.getMatrix(),u=this.getWidth()*this.getHeight(),f=new Uint8ClampedArray(u);for(let p=0;p<u;p++)f[p]=255-(l[p]&255);return f}isCropSupported(){return this.delegate.isCropSupported()}crop(l,u,f,p){return new we(this.delegate.crop(l,u,f,p))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new we(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new we(this.delegate.rotateCounterClockwise45())}}class te extends Te{constructor(l){super(l.width,l.height),this.canvas=l,this.tempCanvasElement=null,this.buffer=te.makeBufferFromCanvasImageData(l)}static makeBufferFromCanvasImageData(l){const u=l.getContext("2d").getImageData(0,0,l.width,l.height);return te.toGrayscaleBuffer(u.data,l.width,l.height)}static toGrayscaleBuffer(l,u,f){const p=new Uint8ClampedArray(u*f);for(let b=0,E=0,S=l.length;b<S;b+=4,E++){let T;if(l[b+3]===0)T=255;else{const B=l[b],$=l[b+1],W=l[b+2];T=306*B+601*$+117*W+512>>10}p[E]=T}return p}getRow(l,u){if(l<0||l>=this.getHeight())throw new w("Requested row is outside the image: "+l);const f=this.getWidth(),p=l*f;return u===null?u=this.buffer.slice(p,p+f):(u.length<f&&(u=new Uint8ClampedArray(f)),u.set(this.buffer.slice(p,p+f))),u}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(l,u,f,p){return super.crop(l,u,f,p),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const l=this.canvas.ownerDocument.createElement("canvas");l.width=this.canvas.width,l.height=this.canvas.height,this.tempCanvasElement=l}return this.tempCanvasElement}rotate(l){const u=this.getTempCanvasElement(),f=u.getContext("2d"),p=l*te.DEGREE_TO_RADIANS,b=this.canvas.width,E=this.canvas.height,S=Math.ceil(Math.abs(Math.cos(p))*b+Math.abs(Math.sin(p))*E),T=Math.ceil(Math.abs(Math.sin(p))*b+Math.abs(Math.cos(p))*E);return u.width=S,u.height=T,f.translate(S/2,T/2),f.rotate(p),f.drawImage(this.canvas,b/-2,E/-2),this.buffer=te.makeBufferFromCanvasImageData(u),this}invert(){return new we(this)}}te.DEGREE_TO_RADIANS=Math.PI/180;class K{constructor(l,u,f){this.deviceId=l,this.label=u,this.kind="videoinput",this.groupId=f||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ee=(globalThis||th||self||window||void 0)&&(globalThis||th||self||window||void 0).__awaiter||function(q,l,u,f){function p(b){return b instanceof u?b:new u(function(E){E(b)})}return new(u||(u=Promise))(function(b,E){function S(B){try{P(f.next(B))}catch($){E($)}}function T(B){try{P(f.throw(B))}catch($){E($)}}function P(B){B.done?b(B.value):p(B.value).then(S,T)}P((f=f.apply(q,l||[])).next())})};class fe{constructor(l,u=500,f){this.reader=l,this.timeBetweenScansMillis=u,this._hints=f,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(l){this._timeBetweenDecodingAttempts=l<0?0:l}set hints(l){this._hints=l||null}get hints(){return this._hints}listVideoInputDevices(){return ee(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const l=yield navigator.mediaDevices.enumerateDevices(),u=[];for(const f of l){const p=f.kind==="video"?"videoinput":f.kind;if(p!=="videoinput")continue;const b=f.deviceId||f.id,E=f.label||`Video device ${u.length+1}`,S=f.groupId,T={deviceId:b,label:E,kind:p,groupId:S};u.push(T)}return u})}getVideoInputDevices(){return ee(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(u=>new K(u.deviceId,u.label))})}findDeviceById(l){return ee(this,void 0,void 0,function*(){const u=yield this.listVideoInputDevices();return u?u.find(f=>f.deviceId===l):null})}decodeFromInputVideoDevice(l,u){return ee(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(l,u)})}decodeOnceFromVideoDevice(l,u){return ee(this,void 0,void 0,function*(){this.reset();let f;l?f={deviceId:{exact:l}}:f={facingMode:"environment"};const p={video:f};return yield this.decodeOnceFromConstraints(p,u)})}decodeOnceFromConstraints(l,u){return ee(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(l);return yield this.decodeOnceFromStream(f,u)})}decodeOnceFromStream(l,u){return ee(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(l,u);return yield this.decodeOnce(f)})}decodeFromInputVideoDeviceContinuously(l,u,f){return ee(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(l,u,f)})}decodeFromVideoDevice(l,u,f){return ee(this,void 0,void 0,function*(){let p;l?p={deviceId:{exact:l}}:p={facingMode:"environment"};const b={video:p};return yield this.decodeFromConstraints(b,u,f)})}decodeFromConstraints(l,u,f){return ee(this,void 0,void 0,function*(){const p=yield navigator.mediaDevices.getUserMedia(l);return yield this.decodeFromStream(p,u,f)})}decodeFromStream(l,u,f){return ee(this,void 0,void 0,function*(){this.reset();const p=yield this.attachStreamToVideo(l,u);return yield this.decodeContinuously(p,f)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(l,u){return ee(this,void 0,void 0,function*(){const f=this.prepareVideoElement(u);return this.addVideoSource(f,l),this.videoElement=f,this.stream=l,yield this.playVideoOnLoadAsync(f),f})}playVideoOnLoadAsync(l){return new Promise((u,f)=>this.playVideoOnLoad(l,()=>u()))}playVideoOnLoad(l,u){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(l),l.addEventListener("ended",this.videoEndedListener),l.addEventListener("canplay",this.videoCanPlayListener),l.addEventListener("playing",u),this.tryPlayVideo(l)}isVideoPlaying(l){return l.currentTime>0&&!l.paused&&!l.ended&&l.readyState>2}tryPlayVideo(l){return ee(this,void 0,void 0,function*(){if(this.isVideoPlaying(l)){console.warn("Trying to play video that is already playing.");return}try{yield l.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(l,u){const f=document.getElementById(l);if(!f)throw new y(`element with id '${l}' not found`);if(f.nodeName.toLowerCase()!==u.toLowerCase())throw new y(`element with id '${l}' must be an ${u} element`);return f}decodeFromImage(l,u){if(!l&&!u)throw new y("either imageElement with a src set or an url must be provided");return u&&!l?this.decodeFromImageUrl(u):this.decodeFromImageElement(l)}decodeFromVideo(l,u){if(!l&&!u)throw new y("Either an element with a src set or an URL must be provided");return u&&!l?this.decodeFromVideoUrl(u):this.decodeFromVideoElement(l)}decodeFromVideoContinuously(l,u,f){if(l===void 0&&u===void 0)throw new y("Either an element with a src set or an URL must be provided");return u&&!l?this.decodeFromVideoUrlContinuously(u,f):this.decodeFromVideoElementContinuously(l,f)}decodeFromImageElement(l){if(!l)throw new y("An image element must be provided.");this.reset();const u=this.prepareImageElement(l);this.imageElement=u;let f;return this.isImageLoaded(u)?f=this.decodeOnce(u,!1,!0):f=this._decodeOnLoadImage(u),f}decodeFromVideoElement(l){const u=this._decodeFromVideoElementSetup(l);return this._decodeOnLoadVideo(u)}decodeFromVideoElementContinuously(l,u){const f=this._decodeFromVideoElementSetup(l);return this._decodeOnLoadVideoContinuously(f,u)}_decodeFromVideoElementSetup(l){if(!l)throw new y("A video element must be provided.");this.reset();const u=this.prepareVideoElement(l);return this.videoElement=u,u}decodeFromImageUrl(l){if(!l)throw new y("An URL must be provided.");this.reset();const u=this.prepareImageElement();this.imageElement=u;const f=this._decodeOnLoadImage(u);return u.src=l,f}decodeFromVideoUrl(l){if(!l)throw new y("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),f=this.decodeFromVideoElement(u);return u.src=l,f}decodeFromVideoUrlContinuously(l,u){if(!l)throw new y("An URL must be provided.");this.reset();const f=this.prepareVideoElement(),p=this.decodeFromVideoElementContinuously(f,u);return f.src=l,p}_decodeOnLoadImage(l){return new Promise((u,f)=>{this.imageLoadedListener=()=>this.decodeOnce(l,!1,!0).then(u,f),l.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(l){return ee(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(l),yield this.decodeOnce(l)})}_decodeOnLoadVideoContinuously(l,u){return ee(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(l),this.decodeContinuously(l,u)})}isImageLoaded(l){return!(!l.complete||l.naturalWidth===0)}prepareImageElement(l){let u;return typeof l>"u"&&(u=document.createElement("img"),u.width=200,u.height=200),typeof l=="string"&&(u=this.getMediaElement(l,"img")),l instanceof HTMLImageElement&&(u=l),u}prepareVideoElement(l){let u;return!l&&typeof document<"u"&&(u=document.createElement("video"),u.width=200,u.height=200),typeof l=="string"&&(u=this.getMediaElement(l,"video")),l instanceof HTMLVideoElement&&(u=l),u.setAttribute("autoplay","true"),u.setAttribute("muted","true"),u.setAttribute("playsinline","true"),u}decodeOnce(l,u=!0,f=!0){this._stopAsyncDecode=!1;const p=(b,E)=>{if(this._stopAsyncDecode){E(new ae("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const S=this.decode(l);b(S)}catch(S){const T=u&&S instanceof ae,B=(S instanceof _||S instanceof L)&&f;if(T||B)return setTimeout(p,this._timeBetweenDecodingAttempts,b,E);E(S)}};return new Promise((b,E)=>p(b,E))}decodeContinuously(l,u){this._stopContinuousDecode=!1;const f=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const p=this.decode(l);u(p,null),setTimeout(f,this.timeBetweenScansMillis)}catch(p){u(null,p);const b=p instanceof _||p instanceof L,E=p instanceof ae;(b||E)&&setTimeout(f,this._timeBetweenDecodingAttempts)}};f()}decode(l){const u=this.createBinaryBitmap(l);return this.decodeBitmap(u)}_isHTMLVideoElement(l){return l.videoWidth!==0}drawFrameOnCanvas(l,u,f){u||(u={sx:0,sy:0,sWidth:l.videoWidth,sHeight:l.videoHeight,dx:0,dy:0,dWidth:l.videoWidth,dHeight:l.videoHeight}),f||(f=this.captureCanvasContext),f.drawImage(l,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}drawImageOnCanvas(l,u,f=this.captureCanvasContext){u||(u={sx:0,sy:0,sWidth:l.naturalWidth,sHeight:l.naturalHeight,dx:0,dy:0,dWidth:l.naturalWidth,dHeight:l.naturalHeight}),f||(f=this.captureCanvasContext),f.drawImage(l,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}createBinaryBitmap(l){this.getCaptureCanvasContext(l),this._isHTMLVideoElement(l)?this.drawFrameOnCanvas(l):this.drawImageOnCanvas(l);const u=this.getCaptureCanvas(l),f=new te(u),p=new se(f);return new C(p)}getCaptureCanvasContext(l){if(!this.captureCanvasContext){const f=this.getCaptureCanvas(l).getContext("2d");this.captureCanvasContext=f}return this.captureCanvasContext}getCaptureCanvas(l){if(!this.captureCanvas){const u=this.createCaptureCanvas(l);this.captureCanvas=u}return this.captureCanvas}decodeBitmap(l){return this.reader.decode(l,this._hints)}createCaptureCanvas(l){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const u=document.createElement("canvas");let f,p;return typeof l<"u"&&(l instanceof HTMLVideoElement?(f=l.videoWidth,p=l.videoHeight):l instanceof HTMLImageElement&&(f=l.naturalWidth||l.width,p=l.naturalHeight||l.height)),u.style.width=f+"px",u.style.height=p+"px",u.width=f,u.height=p,u}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(l=>l.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(l,u){try{l.srcObject=u}catch{l.src=URL.createObjectURL(u)}}cleanVideoSource(l){try{l.srcObject=null}catch{l.src=""}this.videoElement.removeAttribute("src")}}class ce{constructor(l,u,f=u==null?0:8*u.length,p,b,E=k.currentTimeMillis()){this.text=l,this.rawBytes=u,this.numBits=f,this.resultPoints=p,this.format=b,this.timestamp=E,this.text=l,this.rawBytes=u,f==null?this.numBits=u==null?0:8*u.length:this.numBits=f,this.resultPoints=p,this.format=b,this.resultMetadata=null,E==null?this.timestamp=k.currentTimeMillis():this.timestamp=E}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(l,u){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(l,u)}putAllMetadata(l){l!==null&&(this.resultMetadata===null?this.resultMetadata=l:this.resultMetadata=new Map(l))}addResultPoints(l){const u=this.resultPoints;if(u===null)this.resultPoints=l;else if(l!==null&&l.length>0){const f=new Array(u.length+l.length);k.arraycopy(u,0,f,0,u.length),k.arraycopy(l,0,f,u.length,l.length),this.resultPoints=f}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Se;(function(q){q[q.AZTEC=0]="AZTEC",q[q.CODABAR=1]="CODABAR",q[q.CODE_39=2]="CODE_39",q[q.CODE_93=3]="CODE_93",q[q.CODE_128=4]="CODE_128",q[q.DATA_MATRIX=5]="DATA_MATRIX",q[q.EAN_8=6]="EAN_8",q[q.EAN_13=7]="EAN_13",q[q.ITF=8]="ITF",q[q.MAXICODE=9]="MAXICODE",q[q.PDF_417=10]="PDF_417",q[q.QR_CODE=11]="QR_CODE",q[q.RSS_14=12]="RSS_14",q[q.RSS_EXPANDED=13]="RSS_EXPANDED",q[q.UPC_A=14]="UPC_A",q[q.UPC_E=15]="UPC_E",q[q.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Se||(Se={}));var ie=Se,oe;(function(q){q[q.OTHER=0]="OTHER",q[q.ORIENTATION=1]="ORIENTATION",q[q.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",q[q.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",q[q.ISSUE_NUMBER=4]="ISSUE_NUMBER",q[q.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",q[q.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",q[q.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",q[q.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",q[q.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",q[q.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(oe||(oe={}));var He=oe;class ve{constructor(l,u,f,p,b=-1,E=-1){this.rawBytes=l,this.text=u,this.byteSegments=f,this.ecLevel=p,this.structuredAppendSequenceNumber=b,this.structuredAppendParity=E,this.numBits=l==null?0:8*l.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(l){this.numBits=l}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(l){this.errorsCorrected=l}getErasures(){return this.erasures}setErasures(l){this.erasures=l}getOther(){return this.other}setOther(l){this.other=l}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class We{exp(l){return this.expTable[l]}log(l){if(l===0)throw new w;return this.logTable[l]}static addOrSubtract(l,u){return l^u}}class be{constructor(l,u){if(u.length===0)throw new w;this.field=l;const f=u.length;if(f>1&&u[0]===0){let p=1;for(;p<f&&u[p]===0;)p++;p===f?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(f-p),k.arraycopy(u,p,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(l){return this.coefficients[this.coefficients.length-1-l]}evaluateAt(l){if(l===0)return this.getCoefficient(0);const u=this.coefficients;let f;if(l===1){f=0;for(let E=0,S=u.length;E!==S;E++){const T=u[E];f=We.addOrSubtract(f,T)}return f}f=u[0];const p=u.length,b=this.field;for(let E=1;E<p;E++)f=We.addOrSubtract(b.multiply(l,f),u[E]);return f}addOrSubtract(l){if(!this.field.equals(l.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero())return l;if(l.isZero())return this;let u=this.coefficients,f=l.coefficients;if(u.length>f.length){const E=u;u=f,f=E}let p=new Int32Array(f.length);const b=f.length-u.length;k.arraycopy(f,0,p,0,b);for(let E=b;E<f.length;E++)p[E]=We.addOrSubtract(u[E-b],f[E]);return new be(this.field,p)}multiply(l){if(!this.field.equals(l.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero()||l.isZero())return this.field.getZero();const u=this.coefficients,f=u.length,p=l.coefficients,b=p.length,E=new Int32Array(f+b-1),S=this.field;for(let T=0;T<f;T++){const P=u[T];for(let B=0;B<b;B++)E[T+B]=We.addOrSubtract(E[T+B],S.multiply(P,p[B]))}return new be(S,E)}multiplyScalar(l){if(l===0)return this.field.getZero();if(l===1)return this;const u=this.coefficients.length,f=this.field,p=new Int32Array(u),b=this.coefficients;for(let E=0;E<u;E++)p[E]=f.multiply(b[E],l);return new be(f,p)}multiplyByMonomial(l,u){if(l<0)throw new w;if(u===0)return this.field.getZero();const f=this.coefficients,p=f.length,b=new Int32Array(p+l),E=this.field;for(let S=0;S<p;S++)b[S]=E.multiply(f[S],u);return new be(E,b)}divide(l){if(!this.field.equals(l.field))throw new w("GenericGFPolys do not have same GenericGF field");if(l.isZero())throw new w("Divide by 0");const u=this.field;let f=u.getZero(),p=this;const b=l.getCoefficient(l.getDegree()),E=u.inverse(b);for(;p.getDegree()>=l.getDegree()&&!p.isZero();){const S=p.getDegree()-l.getDegree(),T=u.multiply(p.getCoefficient(p.getDegree()),E),P=l.multiplyByMonomial(S,T),B=u.buildMonomial(S,T);f=f.addOrSubtract(B),p=p.addOrSubtract(P)}return[f,p]}toString(){let l="";for(let u=this.getDegree();u>=0;u--){let f=this.getCoefficient(u);if(f!==0){if(f<0?(l+=" - ",f=-f):l.length>0&&(l+=" + "),u===0||f!==1){const p=this.field.log(f);p===0?l+="1":p===1?l+="a":(l+="a^",l+=p)}u!==0&&(u===1?l+="x":(l+="x^",l+=u))}}return l}}class ye extends x{}ye.kind="ArithmeticException";class je extends We{constructor(l,u,f){super(),this.primitive=l,this.size=u,this.generatorBase=f;const p=new Int32Array(u);let b=1;for(let S=0;S<u;S++)p[S]=b,b*=2,b>=u&&(b^=l,b&=u-1);this.expTable=p;const E=new Int32Array(u);for(let S=0;S<u-1;S++)E[p[S]]=S;this.logTable=E,this.zero=new be(this,Int32Array.from([0])),this.one=new be(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(l,u){if(l<0)throw new w;if(u===0)return this.zero;const f=new Int32Array(l+1);return f[0]=u,new be(this,f)}inverse(l){if(l===0)throw new ye;return this.expTable[this.size-this.logTable[l]-1]}multiply(l,u){return l===0||u===0?0:this.expTable[(this.logTable[l]+this.logTable[u])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+I.toHexString(this.primitive)+","+this.size+")"}equals(l){return l===this}}je.AZTEC_DATA_12=new je(4201,4096,1),je.AZTEC_DATA_10=new je(1033,1024,1),je.AZTEC_DATA_6=new je(67,64,1),je.AZTEC_PARAM=new je(19,16,1),je.QR_CODE_FIELD_256=new je(285,256,0),je.DATA_MATRIX_FIELD_256=new je(301,256,1),je.AZTEC_DATA_8=je.DATA_MATRIX_FIELD_256,je.MAXICODE_FIELD_64=je.AZTEC_DATA_6;class Ze extends x{}Ze.kind="ReedSolomonException";class Ie extends x{}Ie.kind="IllegalStateException";class ut{constructor(l){this.field=l}decode(l,u){const f=this.field,p=new be(f,l),b=new Int32Array(u);let E=!0;for(let re=0;re<u;re++){const ue=p.evaluateAt(f.exp(re+f.getGeneratorBase()));b[b.length-1-re]=ue,ue!==0&&(E=!1)}if(E)return;const S=new be(f,b),T=this.runEuclideanAlgorithm(f.buildMonomial(u,1),S,u),P=T[0],B=T[1],$=this.findErrorLocations(P),W=this.findErrorMagnitudes(B,$);for(let re=0;re<$.length;re++){const ue=l.length-1-f.log($[re]);if(ue<0)throw new Ze("Bad error location");l[ue]=je.addOrSubtract(l[ue],W[re])}}runEuclideanAlgorithm(l,u,f){if(l.getDegree()<u.getDegree()){const re=l;l=u,u=re}const p=this.field;let b=l,E=u,S=p.getZero(),T=p.getOne();for(;E.getDegree()>=(f/2|0);){let re=b,ue=S;if(b=E,S=T,b.isZero())throw new Ze("r_{i-1} was zero");E=re;let de=p.getZero();const Ee=b.getCoefficient(b.getDegree()),_e=p.inverse(Ee);for(;E.getDegree()>=b.getDegree()&&!E.isZero();){const Qe=E.getDegree()-b.getDegree(),Ke=p.multiply(E.getCoefficient(E.getDegree()),_e);de=de.addOrSubtract(p.buildMonomial(Qe,Ke)),E=E.addOrSubtract(b.multiplyByMonomial(Qe,Ke))}if(T=de.multiply(S).addOrSubtract(ue),E.getDegree()>=b.getDegree())throw new Ie("Division algorithm failed to reduce polynomial?")}const P=T.getCoefficient(0);if(P===0)throw new Ze("sigmaTilde(0) was zero");const B=p.inverse(P),$=T.multiplyScalar(B),W=E.multiplyScalar(B);return[$,W]}findErrorLocations(l){const u=l.getDegree();if(u===1)return Int32Array.from([l.getCoefficient(1)]);const f=new Int32Array(u);let p=0;const b=this.field;for(let E=1;E<b.getSize()&&p<u;E++)l.evaluateAt(E)===0&&(f[p]=b.inverse(E),p++);if(p!==u)throw new Ze("Error locator degree does not match number of roots");return f}findErrorMagnitudes(l,u){const f=u.length,p=new Int32Array(f),b=this.field;for(let E=0;E<f;E++){const S=b.inverse(u[E]);let T=1;for(let P=0;P<f;P++)if(E!==P){const B=b.multiply(u[P],S),$=(B&1)===0?B|1:B&-2;T=b.multiply(T,$)}p[E]=b.multiply(l.evaluateAt(S),b.inverse(T)),b.getGeneratorBase()!==0&&(p[E]=b.multiply(p[E],S))}return p}}var Le;(function(q){q[q.UPPER=0]="UPPER",q[q.LOWER=1]="LOWER",q[q.MIXED=2]="MIXED",q[q.DIGIT=3]="DIGIT",q[q.PUNCT=4]="PUNCT",q[q.BINARY=5]="BINARY"})(Le||(Le={}));class et{decode(l){this.ddata=l;let u=l.getBits(),f=this.extractBits(u),p=this.correctBits(f),b=et.convertBoolArrayToByteArray(p),E=et.getEncodedData(p),S=new ve(b,E,null,null);return S.setNumBits(p.length),S}static highLevelDecode(l){return this.getEncodedData(l)}static getEncodedData(l){let u=l.length,f=Le.UPPER,p=Le.UPPER,b="",E=0;for(;E<u;)if(p===Le.BINARY){if(u-E<5)break;let S=et.readCode(l,E,5);if(E+=5,S===0){if(u-E<11)break;S=et.readCode(l,E,11)+31,E+=11}for(let T=0;T<S;T++){if(u-E<8){E=u;break}const P=et.readCode(l,E,8);b+=X.castAsNonUtf8Char(P),E+=8}p=f}else{let S=p===Le.DIGIT?4:5;if(u-E<S)break;let T=et.readCode(l,E,S);E+=S;let P=et.getCharacter(p,T);P.startsWith("CTRL_")?(f=p,p=et.getTable(P.charAt(5)),P.charAt(6)==="L"&&(f=p)):(b+=P,p=f)}return b}static getTable(l){switch(l){case"L":return Le.LOWER;case"P":return Le.PUNCT;case"M":return Le.MIXED;case"D":return Le.DIGIT;case"B":return Le.BINARY;case"U":default:return Le.UPPER}}static getCharacter(l,u){switch(l){case Le.UPPER:return et.UPPER_TABLE[u];case Le.LOWER:return et.LOWER_TABLE[u];case Le.MIXED:return et.MIXED_TABLE[u];case Le.PUNCT:return et.PUNCT_TABLE[u];case Le.DIGIT:return et.DIGIT_TABLE[u];default:throw new Ie("Bad table")}}correctBits(l){let u,f;this.ddata.getNbLayers()<=2?(f=6,u=je.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(f=8,u=je.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(f=10,u=je.AZTEC_DATA_10):(f=12,u=je.AZTEC_DATA_12);let p=this.ddata.getNbDatablocks(),b=l.length/f;if(b<p)throw new L;let E=l.length%f,S=new Int32Array(b);for(let W=0;W<b;W++,E+=f)S[W]=et.readCode(l,E,f);try{new ut(u).decode(S,b-p)}catch(W){throw new L(W)}let T=(1<<f)-1,P=0;for(let W=0;W<p;W++){let re=S[W];if(re===0||re===T)throw new L;(re===1||re===T-1)&&P++}let B=new Array(p*f-P),$=0;for(let W=0;W<p;W++){let re=S[W];if(re===1||re===T-1)B.fill(re>1,$,$+f-1),$+=f-1;else for(let ue=f-1;ue>=0;--ue)B[$++]=(re&1<<ue)!==0}return B}extractBits(l){let u=this.ddata.isCompact(),f=this.ddata.getNbLayers(),p=(u?11:14)+f*4,b=new Int32Array(p),E=new Array(this.totalBitsInLayer(f,u));if(u)for(let S=0;S<b.length;S++)b[S]=S;else{let S=p+1+2*I.truncDivision(I.truncDivision(p,2)-1,15),T=p/2,P=I.truncDivision(S,2);for(let B=0;B<T;B++){let $=B+I.truncDivision(B,15);b[T-B-1]=P-$-1,b[T+B]=P+$+1}}for(let S=0,T=0;S<f;S++){let P=(f-S)*4+(u?9:12),B=S*2,$=p-1-B;for(let W=0;W<P;W++){let re=W*2;for(let ue=0;ue<2;ue++)E[T+re+ue]=l.get(b[B+ue],b[B+W]),E[T+2*P+re+ue]=l.get(b[B+W],b[$-ue]),E[T+4*P+re+ue]=l.get(b[$-ue],b[$-W]),E[T+6*P+re+ue]=l.get(b[$-W],b[B+ue])}T+=P*8}return E}static readCode(l,u,f){let p=0;for(let b=u;b<u+f;b++)p<<=1,l[b]&&(p|=1);return p}static readByte(l,u){let f=l.length-u;return f>=8?et.readCode(l,u,8):et.readCode(l,u,f)<<8-f}static convertBoolArrayToByteArray(l){let u=new Uint8Array((l.length+7)/8);for(let f=0;f<u.length;f++)u[f]=et.readByte(l,8*f);return u}totalBitsInLayer(l,u){return((u?88:112)+16*l)*l}}et.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],et.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],et.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],et.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],et.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class mt{constructor(){}static round(l){return l===NaN?0:l<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:l>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:l+(l<0?-.5:.5)|0}static distance(l,u,f,p){const b=l-f,E=u-p;return Math.sqrt(b*b+E*E)}static sum(l){let u=0;for(let f=0,p=l.length;f!==p;f++){const b=l[f];u+=b}return u}}class Er{static floatToIntBits(l){return l}}Er.MAX_VALUE=Number.MAX_SAFE_INTEGER;class tt{constructor(l,u){this.x=l,this.y=u}getX(){return this.x}getY(){return this.y}equals(l){if(l instanceof tt){const u=l;return this.x===u.x&&this.y===u.y}return!1}hashCode(){return 31*Er.floatToIntBits(this.x)+Er.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(l){const u=this.distance(l[0],l[1]),f=this.distance(l[1],l[2]),p=this.distance(l[0],l[2]);let b,E,S;if(f>=u&&f>=p?(E=l[0],b=l[1],S=l[2]):p>=f&&p>=u?(E=l[1],b=l[0],S=l[2]):(E=l[2],b=l[0],S=l[1]),this.crossProductZ(b,E,S)<0){const T=b;b=S,S=T}l[0]=b,l[1]=E,l[2]=S}static distance(l,u){return mt.distance(l.x,l.y,u.x,u.y)}static crossProductZ(l,u,f){const p=u.x,b=u.y;return(f.x-p)*(l.y-b)-(f.y-b)*(l.x-p)}}class nt{constructor(l,u){this.bits=l,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class Re extends nt{constructor(l,u,f,p,b){super(l,u),this.compact=f,this.nbDatablocks=p,this.nbLayers=b}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Be{constructor(l,u,f,p){this.image=l,this.height=l.getHeight(),this.width=l.getWidth(),u==null&&(u=Be.INIT_SIZE),f==null&&(f=l.getWidth()/2|0),p==null&&(p=l.getHeight()/2|0);const b=u/2|0;if(this.leftInit=f-b,this.rightInit=f+b,this.upInit=p-b,this.downInit=p+b,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ae}detect(){let l=this.leftInit,u=this.rightInit,f=this.upInit,p=this.downInit,b=!1,E=!0,S=!1,T=!1,P=!1,B=!1,$=!1;const W=this.width,re=this.height;for(;E;){E=!1;let ue=!0;for(;(ue||!T)&&u<W;)ue=this.containsBlackPoint(f,p,u,!1),ue?(u++,E=!0,T=!0):T||u++;if(u>=W){b=!0;break}let de=!0;for(;(de||!P)&&p<re;)de=this.containsBlackPoint(l,u,p,!0),de?(p++,E=!0,P=!0):P||p++;if(p>=re){b=!0;break}let Ee=!0;for(;(Ee||!B)&&l>=0;)Ee=this.containsBlackPoint(f,p,l,!1),Ee?(l--,E=!0,B=!0):B||l--;if(l<0){b=!0;break}let _e=!0;for(;(_e||!$)&&f>=0;)_e=this.containsBlackPoint(l,u,f,!0),_e?(f--,E=!0,$=!0):$||f--;if(f<0){b=!0;break}E&&(S=!0)}if(!b&&S){const ue=u-l;let de=null;for(let Ke=1;de===null&&Ke<ue;Ke++)de=this.getBlackPointOnSegment(l,p-Ke,l+Ke,p);if(de==null)throw new ae;let Ee=null;for(let Ke=1;Ee===null&&Ke<ue;Ke++)Ee=this.getBlackPointOnSegment(l,f+Ke,l+Ke,f);if(Ee==null)throw new ae;let _e=null;for(let Ke=1;_e===null&&Ke<ue;Ke++)_e=this.getBlackPointOnSegment(u,f+Ke,u-Ke,f);if(_e==null)throw new ae;let Qe=null;for(let Ke=1;Qe===null&&Ke<ue;Ke++)Qe=this.getBlackPointOnSegment(u,p-Ke,u-Ke,p);if(Qe==null)throw new ae;return this.centerEdges(Qe,de,_e,Ee)}else throw new ae}getBlackPointOnSegment(l,u,f,p){const b=mt.round(mt.distance(l,u,f,p)),E=(f-l)/b,S=(p-u)/b,T=this.image;for(let P=0;P<b;P++){const B=mt.round(l+P*E),$=mt.round(u+P*S);if(T.get(B,$))return new tt(B,$)}return null}centerEdges(l,u,f,p){const b=l.getX(),E=l.getY(),S=u.getX(),T=u.getY(),P=f.getX(),B=f.getY(),$=p.getX(),W=p.getY(),re=Be.CORR;return b<this.width/2?[new tt($-re,W+re),new tt(S+re,T+re),new tt(P-re,B-re),new tt(b+re,E-re)]:[new tt($+re,W+re),new tt(S+re,T-re),new tt(P-re,B+re),new tt(b-re,E-re)]}containsBlackPoint(l,u,f,p){const b=this.image;if(p){for(let E=l;E<=u;E++)if(b.get(E,f))return!0}else for(let E=l;E<=u;E++)if(b.get(f,E))return!0;return!1}}Be.INIT_SIZE=10,Be.CORR=1;class St{static checkAndNudgePoints(l,u){const f=l.getWidth(),p=l.getHeight();let b=!0;for(let E=0;E<u.length&&b;E+=2){const S=Math.floor(u[E]),T=Math.floor(u[E+1]);if(S<-1||S>f||T<-1||T>p)throw new ae;b=!1,S===-1?(u[E]=0,b=!0):S===f&&(u[E]=f-1,b=!0),T===-1?(u[E+1]=0,b=!0):T===p&&(u[E+1]=p-1,b=!0)}b=!0;for(let E=u.length-2;E>=0&&b;E-=2){const S=Math.floor(u[E]),T=Math.floor(u[E+1]);if(S<-1||S>f||T<-1||T>p)throw new ae;b=!1,S===-1?(u[E]=0,b=!0):S===f&&(u[E]=f-1,b=!0),T===-1?(u[E+1]=0,b=!0):T===p&&(u[E+1]=p-1,b=!0)}}}class pt{constructor(l,u,f,p,b,E,S,T,P){this.a11=l,this.a21=u,this.a31=f,this.a12=p,this.a22=b,this.a32=E,this.a13=S,this.a23=T,this.a33=P}static quadrilateralToQuadrilateral(l,u,f,p,b,E,S,T,P,B,$,W,re,ue,de,Ee){const _e=pt.quadrilateralToSquare(l,u,f,p,b,E,S,T);return pt.squareToQuadrilateral(P,B,$,W,re,ue,de,Ee).times(_e)}transformPoints(l){const u=l.length,f=this.a11,p=this.a12,b=this.a13,E=this.a21,S=this.a22,T=this.a23,P=this.a31,B=this.a32,$=this.a33;for(let W=0;W<u;W+=2){const re=l[W],ue=l[W+1],de=b*re+T*ue+$;l[W]=(f*re+E*ue+P)/de,l[W+1]=(p*re+S*ue+B)/de}}transformPointsWithValues(l,u){const f=this.a11,p=this.a12,b=this.a13,E=this.a21,S=this.a22,T=this.a23,P=this.a31,B=this.a32,$=this.a33,W=l.length;for(let re=0;re<W;re++){const ue=l[re],de=u[re],Ee=b*ue+T*de+$;l[re]=(f*ue+E*de+P)/Ee,u[re]=(p*ue+S*de+B)/Ee}}static squareToQuadrilateral(l,u,f,p,b,E,S,T){const P=l-f+b-S,B=u-p+E-T;if(P===0&&B===0)return new pt(f-l,b-f,l,p-u,E-p,u,0,0,1);{const $=f-b,W=S-b,re=p-E,ue=T-E,de=$*ue-W*re,Ee=(P*ue-W*B)/de,_e=($*B-P*re)/de;return new pt(f-l+Ee*f,S-l+_e*S,l,p-u+Ee*p,T-u+_e*T,u,Ee,_e,1)}}static quadrilateralToSquare(l,u,f,p,b,E,S,T){return pt.squareToQuadrilateral(l,u,f,p,b,E,S,T).buildAdjoint()}buildAdjoint(){return new pt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(l){return new pt(this.a11*l.a11+this.a21*l.a12+this.a31*l.a13,this.a11*l.a21+this.a21*l.a22+this.a31*l.a23,this.a11*l.a31+this.a21*l.a32+this.a31*l.a33,this.a12*l.a11+this.a22*l.a12+this.a32*l.a13,this.a12*l.a21+this.a22*l.a22+this.a32*l.a23,this.a12*l.a31+this.a22*l.a32+this.a32*l.a33,this.a13*l.a11+this.a23*l.a12+this.a33*l.a13,this.a13*l.a21+this.a23*l.a22+this.a33*l.a23,this.a13*l.a31+this.a23*l.a32+this.a33*l.a33)}}class ar extends St{sampleGrid(l,u,f,p,b,E,S,T,P,B,$,W,re,ue,de,Ee,_e,Qe,Ke){const Ge=pt.quadrilateralToQuadrilateral(p,b,E,S,T,P,B,$,W,re,ue,de,Ee,_e,Qe,Ke);return this.sampleGridWithTransform(l,u,f,Ge)}sampleGridWithTransform(l,u,f,p){if(u<=0||f<=0)throw new ae;const b=new xe(u,f),E=new Float32Array(2*u);for(let S=0;S<f;S++){const T=E.length,P=S+.5;for(let B=0;B<T;B+=2)E[B]=B/2+.5,E[B+1]=P;p.transformPoints(E),St.checkAndNudgePoints(l,E);try{for(let B=0;B<T;B+=2)l.get(Math.floor(E[B]),Math.floor(E[B+1]))&&b.set(B/2,S)}catch{throw new ae}}return b}}class $r{static setGridSampler(l){$r.gridSampler=l}static getInstance(){return $r.gridSampler}}$r.gridSampler=new ar;class Cr{constructor(l,u){this.x=l,this.y=u}toResultPoint(){return new tt(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class La{constructor(l){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=l}detect(){return this.detectMirror(!1)}detectMirror(l){let u=this.getMatrixCenter(),f=this.getBullsEyeCorners(u);if(l){let E=f[0];f[0]=f[2],f[2]=E}this.extractParameters(f);let p=this.sampleGrid(this.image,f[this.shift%4],f[(this.shift+1)%4],f[(this.shift+2)%4],f[(this.shift+3)%4]),b=this.getMatrixCornerPoints(f);return new Re(p,b,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(l){if(!this.isValidPoint(l[0])||!this.isValidPoint(l[1])||!this.isValidPoint(l[2])||!this.isValidPoint(l[3]))throw new ae;let u=2*this.nbCenterLayers,f=new Int32Array([this.sampleLine(l[0],l[1],u),this.sampleLine(l[1],l[2],u),this.sampleLine(l[2],l[3],u),this.sampleLine(l[3],l[0],u)]);this.shift=this.getRotation(f,u);let p=0;for(let E=0;E<4;E++){let S=f[(this.shift+E)%4];this.compact?(p<<=7,p+=S>>1&127):(p<<=10,p+=(S>>2&992)+(S>>1&31))}let b=this.getCorrectedParameterData(p,this.compact);this.compact?(this.nbLayers=(b>>6)+1,this.nbDataBlocks=(b&63)+1):(this.nbLayers=(b>>11)+1,this.nbDataBlocks=(b&2047)+1)}getRotation(l,u){let f=0;l.forEach((p,b,E)=>{let S=(p>>u-2<<1)+(p&1);f=(f<<3)+S}),f=((f&1)<<11)+(f>>1);for(let p=0;p<4;p++)if(I.bitCount(f^this.EXPECTED_CORNER_BITS[p])<=2)return p;throw new ae}getCorrectedParameterData(l,u){let f,p;u?(f=7,p=2):(f=10,p=4);let b=f-p,E=new Int32Array(f);for(let T=f-1;T>=0;--T)E[T]=l&15,l>>=4;try{new ut(je.AZTEC_PARAM).decode(E,b)}catch{throw new ae}let S=0;for(let T=0;T<p;T++)S=(S<<4)+E[T];return S}getBullsEyeCorners(l){let u=l,f=l,p=l,b=l,E=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let $=this.getFirstDifferent(u,E,1,-1),W=this.getFirstDifferent(f,E,1,1),re=this.getFirstDifferent(p,E,-1,1),ue=this.getFirstDifferent(b,E,-1,-1);if(this.nbCenterLayers>2){let de=this.distancePoint(ue,$)*this.nbCenterLayers/(this.distancePoint(b,u)*(this.nbCenterLayers+2));if(de<.75||de>1.25||!this.isWhiteOrBlackRectangle($,W,re,ue))break}u=$,f=W,p=re,b=ue,E=!E}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ae;this.compact=this.nbCenterLayers===5;let S=new tt(u.getX()+.5,u.getY()-.5),T=new tt(f.getX()+.5,f.getY()+.5),P=new tt(p.getX()-.5,p.getY()+.5),B=new tt(b.getX()-.5,b.getY()-.5);return this.expandSquare([S,T,P,B],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let l,u,f,p;try{let S=new Be(this.image).detect();l=S[0],u=S[1],f=S[2],p=S[3]}catch{let T=this.image.getWidth()/2,P=this.image.getHeight()/2;l=this.getFirstDifferent(new Cr(T+7,P-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new Cr(T+7,P+7),!1,1,1).toResultPoint(),f=this.getFirstDifferent(new Cr(T-7,P+7),!1,-1,1).toResultPoint(),p=this.getFirstDifferent(new Cr(T-7,P-7),!1,-1,-1).toResultPoint()}let b=mt.round((l.getX()+p.getX()+u.getX()+f.getX())/4),E=mt.round((l.getY()+p.getY()+u.getY()+f.getY())/4);try{let S=new Be(this.image,15,b,E).detect();l=S[0],u=S[1],f=S[2],p=S[3]}catch{l=this.getFirstDifferent(new Cr(b+7,E-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new Cr(b+7,E+7),!1,1,1).toResultPoint(),f=this.getFirstDifferent(new Cr(b-7,E+7),!1,-1,1).toResultPoint(),p=this.getFirstDifferent(new Cr(b-7,E-7),!1,-1,-1).toResultPoint()}return b=mt.round((l.getX()+p.getX()+u.getX()+f.getX())/4),E=mt.round((l.getY()+p.getY()+u.getY()+f.getY())/4),new Cr(b,E)}getMatrixCornerPoints(l){return this.expandSquare(l,2*this.nbCenterLayers,this.getDimension())}sampleGrid(l,u,f,p,b){let E=$r.getInstance(),S=this.getDimension(),T=S/2-this.nbCenterLayers,P=S/2+this.nbCenterLayers;return E.sampleGrid(l,S,S,T,T,P,T,P,P,T,P,u.getX(),u.getY(),f.getX(),f.getY(),p.getX(),p.getY(),b.getX(),b.getY())}sampleLine(l,u,f){let p=0,b=this.distanceResultPoint(l,u),E=b/f,S=l.getX(),T=l.getY(),P=E*(u.getX()-l.getX())/b,B=E*(u.getY()-l.getY())/b;for(let $=0;$<f;$++)this.image.get(mt.round(S+$*P),mt.round(T+$*B))&&(p|=1<<f-$-1);return p}isWhiteOrBlackRectangle(l,u,f,p){let b=3;l=new Cr(l.getX()-b,l.getY()+b),u=new Cr(u.getX()-b,u.getY()-b),f=new Cr(f.getX()+b,f.getY()-b),p=new Cr(p.getX()+b,p.getY()+b);let E=this.getColor(p,l);if(E===0)return!1;let S=this.getColor(l,u);return S!==E||(S=this.getColor(u,f),S!==E)?!1:(S=this.getColor(f,p),S===E)}getColor(l,u){let f=this.distancePoint(l,u),p=(u.getX()-l.getX())/f,b=(u.getY()-l.getY())/f,E=0,S=l.getX(),T=l.getY(),P=this.image.get(l.getX(),l.getY()),B=Math.ceil(f);for(let W=0;W<B;W++)S+=p,T+=b,this.image.get(mt.round(S),mt.round(T))!==P&&E++;let $=E/f;return $>.1&&$<.9?0:$<=.1===P?1:-1}getFirstDifferent(l,u,f,p){let b=l.getX()+f,E=l.getY()+p;for(;this.isValid(b,E)&&this.image.get(b,E)===u;)b+=f,E+=p;for(b-=f,E-=p;this.isValid(b,E)&&this.image.get(b,E)===u;)b+=f;for(b-=f;this.isValid(b,E)&&this.image.get(b,E)===u;)E+=p;return E-=p,new Cr(b,E)}expandSquare(l,u,f){let p=f/(2*u),b=l[0].getX()-l[2].getX(),E=l[0].getY()-l[2].getY(),S=(l[0].getX()+l[2].getX())/2,T=(l[0].getY()+l[2].getY())/2,P=new tt(S+p*b,T+p*E),B=new tt(S-p*b,T-p*E);b=l[1].getX()-l[3].getX(),E=l[1].getY()-l[3].getY(),S=(l[1].getX()+l[3].getX())/2,T=(l[1].getY()+l[3].getY())/2;let $=new tt(S+p*b,T+p*E),W=new tt(S-p*b,T-p*E);return[P,$,B,W]}isValid(l,u){return l>=0&&l<this.image.getWidth()&&u>0&&u<this.image.getHeight()}isValidPoint(l){let u=mt.round(l.getX()),f=mt.round(l.getY());return this.isValid(u,f)}distancePoint(l,u){return mt.distance(l.getX(),l.getY(),u.getX(),u.getY())}distanceResultPoint(l,u){return mt.distance(l.getX(),l.getY(),u.getX(),u.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(I.truncDivision(this.nbLayers-4,8)+1)+15}}class pa{decode(l,u=null){let f=null,p=new La(l.getBlackMatrix()),b=null,E=null;try{let B=p.detectMirror(!1);b=B.getPoints(),this.reportFoundResultPoints(u,b),E=new et().decode(B)}catch(B){f=B}if(E==null)try{let B=p.detectMirror(!0);b=B.getPoints(),this.reportFoundResultPoints(u,b),E=new et().decode(B)}catch(B){throw f??B}let S=new ce(E.getText(),E.getRawBytes(),E.getNumBits(),b,ie.AZTEC,k.currentTimeMillis()),T=E.getByteSegments();T!=null&&S.putMetadata(He.BYTE_SEGMENTS,T);let P=E.getECLevel();return P!=null&&S.putMetadata(He.ERROR_CORRECTION_LEVEL,P),S}reportFoundResultPoints(l,u){if(l!=null){let f=l.get(z.NEED_RESULT_POINT_CALLBACK);f!=null&&u.forEach((p,b,E)=>{f.foundPossibleResultPoint(p)})}}reset(){}}class Ls extends fe{constructor(l=500){super(new pa,l)}}class Gt{decode(l,u){try{return this.doDecode(l,u)}catch{if(u&&u.get(z.TRY_HARDER)===!0&&l.isRotateSupported()){const b=l.rotateCounterClockwise(),E=this.doDecode(b,u),S=E.getResultMetadata();let T=270;S!==null&&S.get(He.ORIENTATION)===!0&&(T=T+S.get(He.ORIENTATION)%360),E.putMetadata(He.ORIENTATION,T);const P=E.getResultPoints();if(P!==null){const B=b.getHeight();for(let $=0;$<P.length;$++)P[$]=new tt(B-P[$].getY()-1,P[$].getX())}return E}else throw new ae}}reset(){}doDecode(l,u){const f=l.getWidth(),p=l.getHeight();let b=new G(f);const E=u&&u.get(z.TRY_HARDER)===!0,S=Math.max(1,p>>(E?8:5));let T;E?T=p:T=15;const P=Math.trunc(p/2);for(let B=0;B<T;B++){const $=Math.trunc((B+1)/2),W=(B&1)===0,re=P+S*(W?$:-$);if(re<0||re>=p)break;try{b=l.getBlackRow(re,b)}catch{continue}for(let ue=0;ue<2;ue++){if(ue===1&&(b.reverse(),u&&u.get(z.NEED_RESULT_POINT_CALLBACK)===!0)){const de=new Map;u.forEach((Ee,_e)=>de.set(_e,Ee)),de.delete(z.NEED_RESULT_POINT_CALLBACK),u=de}try{const de=this.decodeRow(re,b,u);if(ue===1){de.putMetadata(He.ORIENTATION,180);const Ee=de.getResultPoints();Ee!==null&&(Ee[0]=new tt(f-Ee[0].getX()-1,Ee[0].getY()),Ee[1]=new tt(f-Ee[1].getX()-1,Ee[1].getY()))}return de}catch{}}}throw new ae}static recordPattern(l,u,f){const p=f.length;for(let P=0;P<p;P++)f[P]=0;const b=l.getSize();if(u>=b)throw new ae;let E=!l.get(u),S=0,T=u;for(;T<b;){if(l.get(T)!==E)f[S]++;else{if(++S===p)break;f[S]=1,E=!E}T++}if(!(S===p||S===p-1&&T===b))throw new ae}static recordPatternInReverse(l,u,f){let p=f.length,b=l.get(u);for(;u>0&&p>=0;)l.get(--u)!==b&&(p--,b=!b);if(p>=0)throw new ae;Gt.recordPattern(l,u+1,f)}static patternMatchVariance(l,u,f){const p=l.length;let b=0,E=0;for(let P=0;P<p;P++)b+=l[P],E+=u[P];if(b<E)return Number.POSITIVE_INFINITY;const S=b/E;f*=S;let T=0;for(let P=0;P<p;P++){const B=l[P],$=u[P]*S,W=B>$?B-$:$-B;if(W>f)return Number.POSITIVE_INFINITY;T+=W}return T/b}}class ge extends Gt{static findStartPattern(l){const u=l.getSize(),f=l.getNextSet(0);let p=0,b=Int32Array.from([0,0,0,0,0,0]),E=f,S=!1;const T=6;for(let P=f;P<u;P++)if(l.get(P)!==S)b[p]++;else{if(p===T-1){let B=ge.MAX_AVG_VARIANCE,$=-1;for(let W=ge.CODE_START_A;W<=ge.CODE_START_C;W++){const re=Gt.patternMatchVariance(b,ge.CODE_PATTERNS[W],ge.MAX_INDIVIDUAL_VARIANCE);re<B&&(B=re,$=W)}if($>=0&&l.isRange(Math.max(0,E-(P-E)/2),E,!1))return Int32Array.from([E,P,$]);E+=b[0]+b[1],b=b.slice(2,b.length-1),b[p-1]=0,b[p]=0,p--}else p++;b[p]=1,S=!S}throw new ae}static decodeCode(l,u,f){Gt.recordPattern(l,f,u);let p=ge.MAX_AVG_VARIANCE,b=-1;for(let E=0;E<ge.CODE_PATTERNS.length;E++){const S=ge.CODE_PATTERNS[E],T=this.patternMatchVariance(u,S,ge.MAX_INDIVIDUAL_VARIANCE);T<p&&(p=T,b=E)}if(b>=0)return b;throw new ae}decodeRow(l,u,f){const p=f&&f.get(z.ASSUME_GS1)===!0,b=ge.findStartPattern(u),E=b[2];let S=0;const T=new Uint8Array(20);T[S++]=E;let P;switch(E){case ge.CODE_START_A:P=ge.CODE_CODE_A;break;case ge.CODE_START_B:P=ge.CODE_CODE_B;break;case ge.CODE_START_C:P=ge.CODE_CODE_C;break;default:throw new L}let B=!1,$=!1,W="",re=b[0],ue=b[1];const de=Int32Array.from([0,0,0,0,0,0]);let Ee=0,_e=0,Qe=E,Ke=0,Ge=!0,Bt=!1,At=!1;for(;!B;){const ji=$;switch($=!1,Ee=_e,_e=ge.decodeCode(u,de,ue),T[S++]=_e,_e!==ge.CODE_STOP&&(Ge=!0),_e!==ge.CODE_STOP&&(Ke++,Qe+=Ke*_e),re=ue,ue+=de.reduce((Qm,Td)=>Qm+Td,0),_e){case ge.CODE_START_A:case ge.CODE_START_B:case ge.CODE_START_C:throw new L}switch(P){case ge.CODE_CODE_A:if(_e<64)At===Bt?W+=String.fromCharCode(32+_e):W+=String.fromCharCode(32+_e+128),At=!1;else if(_e<96)At===Bt?W+=String.fromCharCode(_e-64):W+=String.fromCharCode(_e+64),At=!1;else switch(_e!==ge.CODE_STOP&&(Ge=!1),_e){case ge.CODE_FNC_1:p&&(W.length===0?W+="]C1":W+="");break;case ge.CODE_FNC_2:case ge.CODE_FNC_3:break;case ge.CODE_FNC_4_A:!Bt&&At?(Bt=!0,At=!1):Bt&&At?(Bt=!1,At=!1):At=!0;break;case ge.CODE_SHIFT:$=!0,P=ge.CODE_CODE_B;break;case ge.CODE_CODE_B:P=ge.CODE_CODE_B;break;case ge.CODE_CODE_C:P=ge.CODE_CODE_C;break;case ge.CODE_STOP:B=!0;break}break;case ge.CODE_CODE_B:if(_e<96)At===Bt?W+=String.fromCharCode(32+_e):W+=String.fromCharCode(32+_e+128),At=!1;else switch(_e!==ge.CODE_STOP&&(Ge=!1),_e){case ge.CODE_FNC_1:p&&(W.length===0?W+="]C1":W+="");break;case ge.CODE_FNC_2:case ge.CODE_FNC_3:break;case ge.CODE_FNC_4_B:!Bt&&At?(Bt=!0,At=!1):Bt&&At?(Bt=!1,At=!1):At=!0;break;case ge.CODE_SHIFT:$=!0,P=ge.CODE_CODE_A;break;case ge.CODE_CODE_A:P=ge.CODE_CODE_A;break;case ge.CODE_CODE_C:P=ge.CODE_CODE_C;break;case ge.CODE_STOP:B=!0;break}break;case ge.CODE_CODE_C:if(_e<100)_e<10&&(W+="0"),W+=_e;else switch(_e!==ge.CODE_STOP&&(Ge=!1),_e){case ge.CODE_FNC_1:p&&(W.length===0?W+="]C1":W+="");break;case ge.CODE_CODE_A:P=ge.CODE_CODE_A;break;case ge.CODE_CODE_B:P=ge.CODE_CODE_B;break;case ge.CODE_STOP:B=!0;break}break}ji&&(P=P===ge.CODE_CODE_A?ge.CODE_CODE_B:ge.CODE_CODE_A)}const Kr=ue-re;if(ue=u.getNextUnset(ue),!u.isRange(ue,Math.min(u.getSize(),ue+(ue-re)/2),!1))throw new ae;if(Qe-=Ke*Ee,Qe%103!==Ee)throw new _;const Na=W.length;if(Na===0)throw new ae;Na>0&&Ge&&(P===ge.CODE_CODE_C?W=W.substring(0,Na-2):W=W.substring(0,Na-1));const Yn=(b[1]+b[0])/2,lr=re+Kr/2,_n=T.length,ca=new Uint8Array(_n);for(let ji=0;ji<_n;ji++)ca[ji]=T[ji];const jl=[new tt(Yn,l),new tt(lr,l)];return new ce(W,ca,0,jl,ie.CODE_128,new Date().getTime())}}ge.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ge.MAX_AVG_VARIANCE=.25,ge.MAX_INDIVIDUAL_VARIANCE=.7,ge.CODE_SHIFT=98,ge.CODE_CODE_C=99,ge.CODE_CODE_B=100,ge.CODE_CODE_A=101,ge.CODE_FNC_1=102,ge.CODE_FNC_2=97,ge.CODE_FNC_3=96,ge.CODE_FNC_4_A=101,ge.CODE_FNC_4_B=100,ge.CODE_START_A=103,ge.CODE_START_B=104,ge.CODE_START_C=105,ge.CODE_STOP=106;class Je extends Gt{constructor(l=!1,u=!1){super(),this.usingCheckDigit=l,this.extendedMode=u,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(l,u,f){let p=this.counters;p.fill(0),this.decodeRowResult="";let b=Je.findAsteriskPattern(u,p),E=u.getNextSet(b[1]),S=u.getSize(),T,P;do{Je.recordPattern(u,E,p);let de=Je.toNarrowWidePattern(p);if(de<0)throw new ae;T=Je.patternToChar(de),this.decodeRowResult+=T,P=E;for(let Ee of p)E+=Ee;E=u.getNextSet(E)}while(T!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let B=0;for(let de of p)B+=de;let $=E-P-B;if(E!==S&&$*2<B)throw new ae;if(this.usingCheckDigit){let de=this.decodeRowResult.length-1,Ee=0;for(let _e=0;_e<de;_e++)Ee+=Je.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(_e));if(this.decodeRowResult.charAt(de)!==Je.ALPHABET_STRING.charAt(Ee%43))throw new _;this.decodeRowResult=this.decodeRowResult.substring(0,de)}if(this.decodeRowResult.length===0)throw new ae;let W;this.extendedMode?W=Je.decodeExtended(this.decodeRowResult):W=this.decodeRowResult;let re=(b[1]+b[0])/2,ue=P+B/2;return new ce(W,null,0,[new tt(re,l),new tt(ue,l)],ie.CODE_39,new Date().getTime())}static findAsteriskPattern(l,u){let f=l.getSize(),p=l.getNextSet(0),b=0,E=p,S=!1,T=u.length;for(let P=p;P<f;P++)if(l.get(P)!==S)u[b]++;else{if(b===T-1){if(this.toNarrowWidePattern(u)===Je.ASTERISK_ENCODING&&l.isRange(Math.max(0,E-Math.floor((P-E)/2)),E,!1))return[E,P];E+=u[0]+u[1],u.copyWithin(0,2,2+b-1),u[b-1]=0,u[b]=0,b--}else b++;u[b]=1,S=!S}throw new ae}static toNarrowWidePattern(l){let u=l.length,f=0,p;do{let b=2147483647;for(let T of l)T<b&&T>f&&(b=T);f=b,p=0;let E=0,S=0;for(let T=0;T<u;T++){let P=l[T];P>f&&(S|=1<<u-1-T,p++,E+=P)}if(p===3){for(let T=0;T<u&&p>0;T++){let P=l[T];if(P>f&&(p--,P*2>=E))return-1}return S}}while(p>3);return-1}static patternToChar(l){for(let u=0;u<Je.CHARACTER_ENCODINGS.length;u++)if(Je.CHARACTER_ENCODINGS[u]===l)return Je.ALPHABET_STRING.charAt(u);if(l===Je.ASTERISK_ENCODING)return"*";throw new ae}static decodeExtended(l){let u=l.length,f="";for(let p=0;p<u;p++){let b=l.charAt(p);if(b==="+"||b==="$"||b==="%"||b==="/"){let E=l.charAt(p+1),S="\0";switch(b){case"+":if(E>="A"&&E<="Z")S=String.fromCharCode(E.charCodeAt(0)+32);else throw new L;break;case"$":if(E>="A"&&E<="Z")S=String.fromCharCode(E.charCodeAt(0)-64);else throw new L;break;case"%":if(E>="A"&&E<="E")S=String.fromCharCode(E.charCodeAt(0)-38);else if(E>="F"&&E<="J")S=String.fromCharCode(E.charCodeAt(0)-11);else if(E>="K"&&E<="O")S=String.fromCharCode(E.charCodeAt(0)+16);else if(E>="P"&&E<="T")S=String.fromCharCode(E.charCodeAt(0)+43);else if(E==="U")S="\0";else if(E==="V")S="@";else if(E==="W")S="`";else if(E==="X"||E==="Y"||E==="Z")S="";else throw new L;break;case"/":if(E>="A"&&E<="O")S=String.fromCharCode(E.charCodeAt(0)-32);else if(E==="Z")S=":";else throw new L;break}f+=S,p++}else f+=b}return f}}Je.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Je.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Je.ASTERISK_ENCODING=148;class rt extends Gt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(l,u,f){let p=this.decodeStart(u),b=this.decodeEnd(u),E=new he;rt.decodeMiddle(u,p[1],b[0],E);let S=E.toString(),T=null;f!=null&&(T=f.get(z.ALLOWED_LENGTHS)),T==null&&(T=rt.DEFAULT_ALLOWED_LENGTHS);let P=S.length,B=!1,$=0;for(let ue of T){if(P===ue){B=!0;break}ue>$&&($=ue)}if(!B&&P>$&&(B=!0),!B)throw new L;const W=[new tt(p[1],l),new tt(b[0],l)];return new ce(S,null,0,W,ie.ITF,new Date().getTime())}static decodeMiddle(l,u,f,p){let b=new Int32Array(10),E=new Int32Array(5),S=new Int32Array(5);for(b.fill(0),E.fill(0),S.fill(0);u<f;){Gt.recordPattern(l,u,b);for(let P=0;P<5;P++){let B=2*P;E[P]=b[B],S[P]=b[B+1]}let T=rt.decodeDigit(E);p.append(T.toString()),T=this.decodeDigit(S),p.append(T.toString()),b.forEach(function(P){u+=P})}}decodeStart(l){let u=rt.skipWhiteSpace(l),f=rt.findGuardPattern(l,u,rt.START_PATTERN);return this.narrowLineWidth=(f[1]-f[0])/4,this.validateQuietZone(l,f[0]),f}validateQuietZone(l,u){let f=this.narrowLineWidth*10;f=f<u?f:u;for(let p=u-1;f>0&&p>=0&&!l.get(p);p--)f--;if(f!==0)throw new ae}static skipWhiteSpace(l){const u=l.getSize(),f=l.getNextSet(0);if(f===u)throw new ae;return f}decodeEnd(l){l.reverse();try{let u=rt.skipWhiteSpace(l),f;try{f=rt.findGuardPattern(l,u,rt.END_PATTERN_REVERSED[0])}catch(b){b instanceof ae&&(f=rt.findGuardPattern(l,u,rt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(l,f[0]);let p=f[0];return f[0]=l.getSize()-f[1],f[1]=l.getSize()-p,f}finally{l.reverse()}}static findGuardPattern(l,u,f){let p=f.length,b=new Int32Array(p),E=l.getSize(),S=!1,T=0,P=u;b.fill(0);for(let B=u;B<E;B++)if(l.get(B)!==S)b[T]++;else{if(T===p-1){if(Gt.patternMatchVariance(b,f,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return[P,B];P+=b[0]+b[1],k.arraycopy(b,2,b,0,T-1),b[T-1]=0,b[T]=0,T--}else T++;b[T]=1,S=!S}throw new ae}static decodeDigit(l){let u=rt.MAX_AVG_VARIANCE,f=-1,p=rt.PATTERNS.length;for(let b=0;b<p;b++){let E=rt.PATTERNS[b],S=Gt.patternMatchVariance(l,E,rt.MAX_INDIVIDUAL_VARIANCE);S<u?(u=S,f=b):S===u&&(f=-1)}if(f>=0)return f%10;throw new ae}}rt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],rt.MAX_AVG_VARIANCE=.38,rt.MAX_INDIVIDUAL_VARIANCE=.5,rt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],rt.START_PATTERN=Int32Array.from([1,1,1,1]),rt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class _t extends Gt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(l){let u=!1,f,p=0,b=Int32Array.from([0,0,0]);for(;!u;){b=Int32Array.from([0,0,0]),f=_t.findGuardPattern(l,p,!1,this.START_END_PATTERN,b);let E=f[0];p=f[1];let S=E-(p-E);S>=0&&(u=l.isRange(S,E,!1))}return f}static checkChecksum(l){return _t.checkStandardUPCEANChecksum(l)}static checkStandardUPCEANChecksum(l){let u=l.length;if(u===0)return!1;let f=parseInt(l.charAt(u-1),10);return _t.getStandardUPCEANChecksum(l.substring(0,u-1))===f}static getStandardUPCEANChecksum(l){let u=l.length,f=0;for(let p=u-1;p>=0;p-=2){let b=l.charAt(p).charCodeAt(0)-48;if(b<0||b>9)throw new L;f+=b}f*=3;for(let p=u-2;p>=0;p-=2){let b=l.charAt(p).charCodeAt(0)-48;if(b<0||b>9)throw new L;f+=b}return(1e3-f)%10}static decodeEnd(l,u){return _t.findGuardPattern(l,u,!1,_t.START_END_PATTERN,new Int32Array(_t.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(l,u,f,p){return this.findGuardPattern(l,u,f,p,new Int32Array(p.length))}static findGuardPattern(l,u,f,p,b){let E=l.getSize();u=f?l.getNextUnset(u):l.getNextSet(u);let S=0,T=u,P=p.length,B=f;for(let $=u;$<E;$++)if(l.get($)!==B)b[S]++;else{if(S===P-1){if(Gt.patternMatchVariance(b,p,_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE)return Int32Array.from([T,$]);T+=b[0]+b[1];let W=b.slice(2,b.length-1);for(let re=0;re<S-1;re++)b[re]=W[re];b[S-1]=0,b[S]=0,S--}else S++;b[S]=1,B=!B}throw new ae}static decodeDigit(l,u,f,p){this.recordPattern(l,f,u);let b=this.MAX_AVG_VARIANCE,E=-1,S=p.length;for(let T=0;T<S;T++){let P=p[T],B=Gt.patternMatchVariance(u,P,_t.MAX_INDIVIDUAL_VARIANCE);B<b&&(b=B,E=T)}if(E>=0)return E;throw new ae}}_t.MAX_AVG_VARIANCE=.48,_t.MAX_INDIVIDUAL_VARIANCE=.7,_t.START_END_PATTERN=Int32Array.from([1,1,1]),_t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),_t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Pr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(l,u,f){let p=this.decodeRowStringBuffer,b=this.decodeMiddle(u,f,p),E=p.toString(),S=Pr.parseExtensionString(E),T=[new tt((f[0]+f[1])/2,l),new tt(b,l)],P=new ce(E,null,0,T,ie.UPC_EAN_EXTENSION,new Date().getTime());return S!=null&&P.putAllMetadata(S),P}decodeMiddle(l,u,f){let p=this.decodeMiddleCounters;p[0]=0,p[1]=0,p[2]=0,p[3]=0;let b=l.getSize(),E=u[1],S=0;for(let P=0;P<5&&E<b;P++){let B=_t.decodeDigit(l,p,E,_t.L_AND_G_PATTERNS);f+=String.fromCharCode(48+B%10);for(let $ of p)E+=$;B>=10&&(S|=1<<4-P),P!==4&&(E=l.getNextSet(E),E=l.getNextUnset(E))}if(f.length!==5)throw new ae;let T=this.determineCheckDigit(S);if(Pr.extensionChecksum(f.toString())!==T)throw new ae;return E}static extensionChecksum(l){let u=l.length,f=0;for(let p=u-2;p>=0;p-=2)f+=l.charAt(p).charCodeAt(0)-48;f*=3;for(let p=u-1;p>=0;p-=2)f+=l.charAt(p).charCodeAt(0)-48;return f*=3,f%10}determineCheckDigit(l){for(let u=0;u<10;u++)if(l===this.CHECK_DIGIT_ENCODINGS[u])return u;throw new ae}static parseExtensionString(l){if(l.length!==5)return null;let u=Pr.parseExtension5String(l);return u==null?null:new Map([[He.SUGGESTED_PRICE,u]])}static parseExtension5String(l){let u;switch(l.charAt(0)){case"0":u="";break;case"5":u="$";break;case"9":switch(l){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}u="";break;default:u="";break}let f=parseInt(l.substring(1)),p=(f/100).toString(),b=f%100,E=b<10?"0"+b:b.toString();return u+p+"."+E}}class Ba{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(l,u,f){let p=this.decodeRowStringBuffer,b=this.decodeMiddle(u,f,p),E=p.toString(),S=Ba.parseExtensionString(E),T=[new tt((f[0]+f[1])/2,l),new tt(b,l)],P=new ce(E,null,0,T,ie.UPC_EAN_EXTENSION,new Date().getTime());return S!=null&&P.putAllMetadata(S),P}decodeMiddle(l,u,f){let p=this.decodeMiddleCounters;p[0]=0,p[1]=0,p[2]=0,p[3]=0;let b=l.getSize(),E=u[1],S=0;for(let T=0;T<2&&E<b;T++){let P=_t.decodeDigit(l,p,E,_t.L_AND_G_PATTERNS);f+=String.fromCharCode(48+P%10);for(let B of p)E+=B;P>=10&&(S|=1<<1-T),T!==1&&(E=l.getNextSet(E),E=l.getNextUnset(E))}if(f.length!==2)throw new ae;if(parseInt(f.toString())%4!==S)throw new ae;return E}static parseExtensionString(l){return l.length!==2?null:new Map([[He.ISSUE_NUMBER,parseInt(l)]])}}class Fa{static decodeRow(l,u,f){let p=_t.findGuardPattern(u,f,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Pr().decodeRow(l,u,p)}catch{return new Ba().decodeRow(l,u,p)}}}Fa.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Pt extends _t{constructor(){super(),this.decodeRowStringBuffer="",Pt.L_AND_G_PATTERNS=Pt.L_PATTERNS.map(l=>Int32Array.from(l));for(let l=10;l<20;l++){let u=Pt.L_PATTERNS[l-10],f=new Int32Array(u.length);for(let p=0;p<u.length;p++)f[p]=u[u.length-p-1];Pt.L_AND_G_PATTERNS[l]=f}}decodeRow(l,u,f){let p=Pt.findStartGuardPattern(u),b=f==null?null:f.get(z.NEED_RESULT_POINT_CALLBACK);if(b!=null){const Ge=new tt((p[0]+p[1])/2,l);b.foundPossibleResultPoint(Ge)}let E=this.decodeMiddle(u,p,this.decodeRowStringBuffer),S=E.rowOffset,T=E.resultString;if(b!=null){const Ge=new tt(S,l);b.foundPossibleResultPoint(Ge)}let P=this.decodeEnd(u,S);if(b!=null){const Ge=new tt((P[0]+P[1])/2,l);b.foundPossibleResultPoint(Ge)}let B=P[1],$=B+(B-P[0]);if($>=u.getSize()||!u.isRange(B,$,!1))throw new ae;let W=T.toString();if(W.length<8)throw new L;if(!Pt.checkChecksum(W))throw new _;let re=(p[1]+p[0])/2,ue=(P[1]+P[0])/2,de=this.getBarcodeFormat(),Ee=[new tt(re,l),new tt(ue,l)],_e=new ce(W,null,0,Ee,de,new Date().getTime()),Qe=0;try{let Ge=Fa.decodeRow(l,u,P[1]);_e.putMetadata(He.UPC_EAN_EXTENSION,Ge.getText()),_e.putAllMetadata(Ge.getResultMetadata()),_e.addResultPoints(Ge.getResultPoints()),Qe=Ge.getText().length}catch{}let Ke=f==null?null:f.get(z.ALLOWED_EAN_EXTENSIONS);if(Ke!=null){let Ge=!1;for(let Bt in Ke)if(Qe.toString()===Bt){Ge=!0;break}if(!Ge)throw new ae}return _e}decodeEnd(l,u){return Pt.findGuardPattern(l,u,!1,Pt.START_END_PATTERN,new Int32Array(Pt.START_END_PATTERN.length).fill(0))}static checkChecksum(l){return Pt.checkStandardUPCEANChecksum(l)}static checkStandardUPCEANChecksum(l){let u=l.length;if(u===0)return!1;let f=parseInt(l.charAt(u-1),10);return Pt.getStandardUPCEANChecksum(l.substring(0,u-1))===f}static getStandardUPCEANChecksum(l){let u=l.length,f=0;for(let p=u-1;p>=0;p-=2){let b=l.charAt(p).charCodeAt(0)-48;if(b<0||b>9)throw new L;f+=b}f*=3;for(let p=u-2;p>=0;p-=2){let b=l.charAt(p).charCodeAt(0)-48;if(b<0||b>9)throw new L;f+=b}return(1e3-f)%10}}class Gr extends Pt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(l,u,f){let p=this.decodeMiddleCounters;p[0]=0,p[1]=0,p[2]=0,p[3]=0;let b=l.getSize(),E=u[1],S=0;for(let P=0;P<6&&E<b;P++){let B=Pt.decodeDigit(l,p,E,Pt.L_AND_G_PATTERNS);f+=String.fromCharCode(48+B%10);for(let $ of p)E+=$;B>=10&&(S|=1<<5-P)}f=Gr.determineFirstDigit(f,S),E=Pt.findGuardPattern(l,E,!0,Pt.MIDDLE_PATTERN,new Int32Array(Pt.MIDDLE_PATTERN.length).fill(0))[1];for(let P=0;P<6&&E<b;P++){let B=Pt.decodeDigit(l,p,E,Pt.L_PATTERNS);f+=String.fromCharCode(48+B);for(let $ of p)E+=$}return{rowOffset:E,resultString:f}}getBarcodeFormat(){return ie.EAN_13}static determineFirstDigit(l,u){for(let f=0;f<10;f++)if(u===this.FIRST_DIGIT_ENCODINGS[f])return l=String.fromCharCode(48+f)+l,l;throw new ae}}Gr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ya extends Pt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(l,u,f){const p=this.decodeMiddleCounters;p[0]=0,p[1]=0,p[2]=0,p[3]=0;let b=l.getSize(),E=u[1];for(let T=0;T<4&&E<b;T++){let P=Pt.decodeDigit(l,p,E,Pt.L_PATTERNS);f+=String.fromCharCode(48+P);for(let B of p)E+=B}E=Pt.findGuardPattern(l,E,!0,Pt.MIDDLE_PATTERN,new Int32Array(Pt.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<4&&E<b;T++){let P=Pt.decodeDigit(l,p,E,Pt.L_PATTERNS);f+=String.fromCharCode(48+P);for(let B of p)E+=B}return{rowOffset:E,resultString:f}}getBarcodeFormat(){return ie.EAN_8}}class Ua extends Pt{constructor(){super(...arguments),this.ean13Reader=new Gr}getBarcodeFormat(){return ie.UPC_A}decode(l,u){return this.maybeReturnResult(this.ean13Reader.decode(l))}decodeRow(l,u,f){return this.maybeReturnResult(this.ean13Reader.decodeRow(l,u,f))}decodeMiddle(l,u,f){return this.ean13Reader.decodeMiddle(l,u,f)}maybeReturnResult(l){let u=l.getText();if(u.charAt(0)==="0"){let f=new ce(u.substring(1),null,null,l.getResultPoints(),ie.UPC_A);return l.getResultMetadata()!=null&&f.putAllMetadata(l.getResultMetadata()),f}else throw new ae}reset(){this.ean13Reader.reset()}}class Wr extends Pt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(l,u,f){const p=this.decodeMiddleCounters.map(P=>P);p[0]=0,p[1]=0,p[2]=0,p[3]=0;const b=l.getSize();let E=u[1],S=0;for(let P=0;P<6&&E<b;P++){const B=Wr.decodeDigit(l,p,E,Wr.L_AND_G_PATTERNS);f+=String.fromCharCode(48+B%10);for(let $ of p)E+=$;B>=10&&(S|=1<<5-P)}let T=Wr.determineNumSysAndCheckDigit(f,S);return{rowOffset:E,resultString:T}}decodeEnd(l,u){return Wr.findGuardPatternWithoutCounters(l,u,!0,Wr.MIDDLE_END_PATTERN)}checkChecksum(l){return Pt.checkChecksum(Wr.convertUPCEtoUPCA(l))}static determineNumSysAndCheckDigit(l,u){for(let f=0;f<=1;f++)for(let p=0;p<10;p++)if(u===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[f][p]){let b=String.fromCharCode(48+f),E=String.fromCharCode(48+p);return b+l+E}throw ae.getNotFoundInstance()}getBarcodeFormat(){return ie.UPC_E}static convertUPCEtoUPCA(l){const u=l.slice(1,7).split("").map(b=>b.charCodeAt(0)),f=new he;f.append(l.charAt(0));let p=u[5];switch(p){case 0:case 1:case 2:f.appendChars(u,0,2),f.append(p),f.append("0000"),f.appendChars(u,2,3);break;case 3:f.appendChars(u,0,3),f.append("00000"),f.appendChars(u,3,2);break;case 4:f.appendChars(u,0,4),f.append("00000"),f.append(u[4]);break;default:f.appendChars(u,0,5),f.append("0000"),f.append(p);break}return l.length>=8&&f.append(l.charAt(7)),f.toString()}}Wr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Wr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Fe extends Gt{constructor(l){super();let u=l==null?null:l.get(z.POSSIBLE_FORMATS),f=[];n(u)?(f.push(new Gr),f.push(new Ua),f.push(new ya),f.push(new Wr)):(u.indexOf(ie.EAN_13)>-1&&f.push(new Gr),u.indexOf(ie.UPC_A)>-1&&f.push(new Ua),u.indexOf(ie.EAN_8)>-1&&f.push(new ya),u.indexOf(ie.UPC_E)>-1&&f.push(new Wr)),this.readers=f}decodeRow(l,u,f){for(let p of this.readers)try{const b=p.decodeRow(l,u,f),E=b.getBarcodeFormat()===ie.EAN_13&&b.getText().charAt(0)==="0",S=f==null?null:f.get(z.POSSIBLE_FORMATS),T=S==null||S.includes(ie.UPC_A);if(E&&T){const P=b.getRawBytes(),B=new ce(b.getText().substring(1),P,P?P.length:null,b.getResultPoints(),ie.UPC_A);return B.putAllMetadata(b.getResultMetadata()),B}return b}catch{}throw new ae}reset(){for(let l of this.readers)l.reset()}}class xt extends Gt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(l,u){for(let f=0;f<u.length;f++)if(Gt.patternMatchVariance(l,u[f],xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return f;throw new ae}static count(l){return mt.sum(new Int32Array(l))}static increment(l,u){let f=0,p=u[0];for(let b=1;b<l.length;b++)u[b]>p&&(p=u[b],f=b);l[f]++}static decrement(l,u){let f=0,p=u[0];for(let b=1;b<l.length;b++)u[b]<p&&(p=u[b],f=b);l[f]--}static isFinderPattern(l){let u=l[0]+l[1],f=u+l[2]+l[3],p=u/f;if(p>=xt.MIN_FINDER_PATTERN_RATIO&&p<=xt.MAX_FINDER_PATTERN_RATIO){let b=Number.MAX_SAFE_INTEGER,E=Number.MIN_SAFE_INTEGER;for(let S of l)S>E&&(E=S),S<b&&(b=S);return E<10*b}return!1}}xt.MAX_AVG_VARIANCE=.2,xt.MAX_INDIVIDUAL_VARIANCE=.45,xt.MIN_FINDER_PATTERN_RATIO=9.5/12,xt.MAX_FINDER_PATTERN_RATIO=12.5/14;class $n{constructor(l,u){this.value=l,this.checksumPortion=u}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(l){if(!(l instanceof $n))return!1;const u=l;return this.value===u.value&&this.checksumPortion===u.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ls{constructor(l,u,f,p,b){this.value=l,this.startEnd=u,this.value=l,this.startEnd=u,this.resultPoints=new Array,this.resultPoints.push(new tt(f,b)),this.resultPoints.push(new tt(p,b))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(l){if(!(l instanceof ls))return!1;const u=l;return this.value===u.value}hashCode(){return this.value}}class xa{constructor(){}static getRSSvalue(l,u,f){let p=0;for(let T of l)p+=T;let b=0,E=0,S=l.length;for(let T=0;T<S-1;T++){let P;for(P=1,E|=1<<T;P<l[T];P++,E&=~(1<<T)){let B=xa.combins(p-P-1,S-T-2);if(f&&E===0&&p-P-(S-T-1)>=S-T-1&&(B-=xa.combins(p-P-(S-T),S-T-2)),S-T-1>1){let $=0;for(let W=p-P-(S-T-2);W>u;W--)$+=xa.combins(p-P-W-1,S-T-3);B-=$*(S-1-T)}else p-P>u&&B--;b+=B}p-=P}return b}static combins(l,u){let f,p;l-u>u?(p=u,f=l-u):(p=l-u,f=u);let b=1,E=1;for(let S=l;S>f;S--)b*=S,E<=p&&(b/=E,E++);for(;E<=p;)b/=E,E++;return b}}class Lc{static buildBitArray(l){let u=l.length*2-1;l[l.length-1].getRightChar()==null&&(u-=1);let f=12*u,p=new G(f),b=0,S=l[0].getRightChar().getValue();for(let T=11;T>=0;--T)(S&1<<T)!=0&&p.set(b),b++;for(let T=1;T<l.length;++T){let P=l[T],B=P.getLeftChar().getValue();for(let $=11;$>=0;--$)(B&1<<$)!=0&&p.set(b),b++;if(P.getRightChar()!=null){let $=P.getRightChar().getValue();for(let W=11;W>=0;--W)($&1<<W)!=0&&p.set(b),b++}}return p}}class ba{constructor(l,u){u?this.decodedInformation=null:(this.finished=l,this.decodedInformation=u)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Pi{constructor(l){this.newPosition=l}getNewPosition(){return this.newPosition}}class gn extends Pi{constructor(l,u){super(l),this.value=u}getValue(){return this.value}isFNC1(){return this.value===gn.FNC1}}gn.FNC1="$";class ja extends Pi{constructor(l,u,f){super(l),f?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=u}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Bn extends Pi{constructor(l,u,f){if(super(l),u<0||u>10||f<0||f>10)throw new L;this.firstDigit=u,this.secondDigit=f}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Bn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Bn.FNC1}isAnyFNC1(){return this.firstDigit===Bn.FNC1||this.secondDigit===Bn.FNC1}}Bn.FNC1=10;class st{constructor(){}static parseFieldsInGeneralPurpose(l){if(!l)return null;if(l.length<2)throw new ae;let u=l.substring(0,2);for(let b of st.TWO_DIGIT_DATA_LENGTH)if(b[0]===u)return b[1]===st.VARIABLE_LENGTH?st.processVariableAI(2,b[2],l):st.processFixedAI(2,b[1],l);if(l.length<3)throw new ae;let f=l.substring(0,3);for(let b of st.THREE_DIGIT_DATA_LENGTH)if(b[0]===f)return b[1]===st.VARIABLE_LENGTH?st.processVariableAI(3,b[2],l):st.processFixedAI(3,b[1],l);for(let b of st.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(b[0]===f)return b[1]===st.VARIABLE_LENGTH?st.processVariableAI(4,b[2],l):st.processFixedAI(4,b[1],l);if(l.length<4)throw new ae;let p=l.substring(0,4);for(let b of st.FOUR_DIGIT_DATA_LENGTH)if(b[0]===p)return b[1]===st.VARIABLE_LENGTH?st.processVariableAI(4,b[2],l):st.processFixedAI(4,b[1],l);throw new ae}static processFixedAI(l,u,f){if(f.length<l)throw new ae;let p=f.substring(0,l);if(f.length<l+u)throw new ae;let b=f.substring(l,l+u),E=f.substring(l+u),S="("+p+")"+b,T=st.parseFieldsInGeneralPurpose(E);return T==null?S:S+T}static processVariableAI(l,u,f){let p=f.substring(0,l),b;f.length<l+u?b=f.length:b=l+u;let E=f.substring(l,b),S=f.substring(b),T="("+p+")"+E,P=st.parseFieldsInGeneralPurpose(S);return P==null?T:T+P}}st.VARIABLE_LENGTH=[],st.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",st.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",st.VARIABLE_LENGTH,20],["22",st.VARIABLE_LENGTH,29],["30",st.VARIABLE_LENGTH,8],["37",st.VARIABLE_LENGTH,8],["90",st.VARIABLE_LENGTH,30],["91",st.VARIABLE_LENGTH,30],["92",st.VARIABLE_LENGTH,30],["93",st.VARIABLE_LENGTH,30],["94",st.VARIABLE_LENGTH,30],["95",st.VARIABLE_LENGTH,30],["96",st.VARIABLE_LENGTH,30],["97",st.VARIABLE_LENGTH,3],["98",st.VARIABLE_LENGTH,30],["99",st.VARIABLE_LENGTH,30]],st.THREE_DIGIT_DATA_LENGTH=[["240",st.VARIABLE_LENGTH,30],["241",st.VARIABLE_LENGTH,30],["242",st.VARIABLE_LENGTH,6],["250",st.VARIABLE_LENGTH,30],["251",st.VARIABLE_LENGTH,30],["253",st.VARIABLE_LENGTH,17],["254",st.VARIABLE_LENGTH,20],["400",st.VARIABLE_LENGTH,30],["401",st.VARIABLE_LENGTH,30],["402",17],["403",st.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",st.VARIABLE_LENGTH,20],["421",st.VARIABLE_LENGTH,15],["422",3],["423",st.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],st.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",st.VARIABLE_LENGTH,15],["391",st.VARIABLE_LENGTH,18],["392",st.VARIABLE_LENGTH,15],["393",st.VARIABLE_LENGTH,18],["703",st.VARIABLE_LENGTH,30]],st.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",st.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",st.VARIABLE_LENGTH,20],["8003",st.VARIABLE_LENGTH,30],["8004",st.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",st.VARIABLE_LENGTH,30],["8008",st.VARIABLE_LENGTH,12],["8018",18],["8020",st.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",st.VARIABLE_LENGTH,70],["8200",st.VARIABLE_LENGTH,70]];class Fn{constructor(l){this.buffer=new he,this.information=l}decodeAllCodes(l,u){let f=u,p=null;do{let b=this.decodeGeneralPurposeField(f,p),E=st.parseFieldsInGeneralPurpose(b.getNewString());if(E!=null&&l.append(E),b.isRemaining()?p=""+b.getRemainingValue():p=null,f===b.getNewPosition())break;f=b.getNewPosition()}while(!0);return l.toString()}isStillNumeric(l){if(l+7>this.information.getSize())return l+4<=this.information.getSize();for(let u=l;u<l+3;++u)if(this.information.get(u))return!0;return this.information.get(l+3)}decodeNumeric(l){if(l+7>this.information.getSize()){let b=this.extractNumericValueFromBitArray(l,4);return b===0?new Bn(this.information.getSize(),Bn.FNC1,Bn.FNC1):new Bn(this.information.getSize(),b-1,Bn.FNC1)}let u=this.extractNumericValueFromBitArray(l,7),f=(u-8)/11,p=(u-8)%11;return new Bn(l+7,f,p)}extractNumericValueFromBitArray(l,u){return Fn.extractNumericValueFromBitArray(this.information,l,u)}static extractNumericValueFromBitArray(l,u,f){let p=0;for(let b=0;b<f;++b)l.get(u+b)&&(p|=1<<f-b-1);return p}decodeGeneralPurposeField(l,u){this.buffer.setLengthToZero(),u!=null&&this.buffer.append(u),this.current.setPosition(l);let f=this.parseBlocks();return f!=null&&f.isRemaining()?new ja(this.current.getPosition(),this.buffer.toString(),f.getRemainingValue()):new ja(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let l,u;do{let f=this.current.getPosition();if(this.current.isAlpha()?(u=this.parseAlphaBlock(),l=u.isFinished()):this.current.isIsoIec646()?(u=this.parseIsoIec646Block(),l=u.isFinished()):(u=this.parseNumericBlock(),l=u.isFinished()),!(f!==this.current.getPosition())&&!l)break}while(!l);return u.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let l=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFirstDigitFNC1()){let u;return l.isSecondDigitFNC1()?u=new ja(this.current.getPosition(),this.buffer.toString()):u=new ja(this.current.getPosition(),this.buffer.toString(),l.getSecondDigit()),new ba(!0,u)}if(this.buffer.append(l.getFirstDigit()),l.isSecondDigitFNC1()){let u=new ja(this.current.getPosition(),this.buffer.toString());return new ba(!0,u)}this.buffer.append(l.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ba(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let l=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFNC1()){let u=new ja(this.current.getPosition(),this.buffer.toString());return new ba(!0,u)}this.buffer.append(l.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ba(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let l=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFNC1()){let u=new ja(this.current.getPosition(),this.buffer.toString());return new ba(!0,u)}this.buffer.append(l.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ba(!1)}isStillIsoIec646(l){if(l+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(l,5);if(u>=5&&u<16)return!0;if(l+7>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(l,7);if(f>=64&&f<116)return!0;if(l+8>this.information.getSize())return!1;let p=this.extractNumericValueFromBitArray(l,8);return p>=232&&p<253}decodeIsoIec646(l){let u=this.extractNumericValueFromBitArray(l,5);if(u===15)return new gn(l+5,gn.FNC1);if(u>=5&&u<15)return new gn(l+5,"0"+(u-5));let f=this.extractNumericValueFromBitArray(l,7);if(f>=64&&f<90)return new gn(l+7,""+(f+1));if(f>=90&&f<116)return new gn(l+7,""+(f+7));let p=this.extractNumericValueFromBitArray(l,8),b;switch(p){case 232:b="!";break;case 233:b='"';break;case 234:b="%";break;case 235:b="&";break;case 236:b="'";break;case 237:b="(";break;case 238:b=")";break;case 239:b="*";break;case 240:b="+";break;case 241:b=",";break;case 242:b="-";break;case 243:b=".";break;case 244:b="/";break;case 245:b=":";break;case 246:b=";";break;case 247:b="<";break;case 248:b="=";break;case 249:b=">";break;case 250:b="?";break;case 251:b="_";break;case 252:b=" ";break;default:throw new L}return new gn(l+8,b)}isStillAlpha(l){if(l+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(l,5);if(u>=5&&u<16)return!0;if(l+6>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(l,6);return f>=16&&f<63}decodeAlphanumeric(l){let u=this.extractNumericValueFromBitArray(l,5);if(u===15)return new gn(l+5,gn.FNC1);if(u>=5&&u<15)return new gn(l+5,"0"+(u-5));let f=this.extractNumericValueFromBitArray(l,6);if(f>=32&&f<58)return new gn(l+6,""+(f+33));let p;switch(f){case 58:p="*";break;case 59:p=",";break;case 60:p="-";break;case 61:p=".";break;case 62:p="/";break;default:throw new Ie("Decoding invalid alphanumeric value: "+f)}return new gn(l+6,p)}isAlphaTo646ToAlphaLatch(l){if(l+1>this.information.getSize())return!1;for(let u=0;u<5&&u+l<this.information.getSize();++u)if(u===2){if(!this.information.get(l+2))return!1}else if(this.information.get(l+u))return!1;return!0}isAlphaOr646ToNumericLatch(l){if(l+3>this.information.getSize())return!1;for(let u=l;u<l+3;++u)if(this.information.get(u))return!1;return!0}isNumericToAlphaNumericLatch(l){if(l+1>this.information.getSize())return!1;for(let u=0;u<4&&u+l<this.information.getSize();++u)if(this.information.get(l+u))return!1;return!0}}class Rr{constructor(l){this.information=l,this.generalDecoder=new Fn(l)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Kt extends Rr{constructor(l){super(l)}encodeCompressedGtin(l,u){l.append("(01)");let f=l.length();l.append("9"),this.encodeCompressedGtinWithoutAI(l,u,f)}encodeCompressedGtinWithoutAI(l,u,f){for(let p=0;p<4;++p){let b=this.getGeneralDecoder().extractNumericValueFromBitArray(u+10*p,10);b/100===0&&l.append("0"),b/10===0&&l.append("0"),l.append(b)}Kt.appendCheckDigit(l,f)}static appendCheckDigit(l,u){let f=0;for(let p=0;p<13;p++){let b=l.charAt(p+u).charCodeAt(0)-48;f+=(p&1)===0?3*b:b}f=10-f%10,f===10&&(f=0),l.append(f)}}Kt.GTIN_SIZE=40;class ia extends Kt{constructor(l){super(l)}parseInformation(){let l=new he;l.append("(01)");let u=l.length(),f=this.getGeneralDecoder().extractNumericValueFromBitArray(ia.HEADER_SIZE,4);return l.append(f),this.encodeCompressedGtinWithoutAI(l,ia.HEADER_SIZE+4,u),this.getGeneralDecoder().decodeAllCodes(l,ia.HEADER_SIZE+44)}}ia.HEADER_SIZE=4;class li extends Rr{constructor(l){super(l)}parseInformation(){let l=new he;return this.getGeneralDecoder().decodeAllCodes(l,li.HEADER_SIZE)}}li.HEADER_SIZE=5;class Ol extends Kt{constructor(l){super(l)}encodeCompressedWeight(l,u,f){let p=this.getGeneralDecoder().extractNumericValueFromBitArray(u,f);this.addWeightCode(l,p);let b=this.checkWeight(p),E=1e5;for(let S=0;S<5;++S)b/E===0&&l.append("0"),E/=10;l.append(b)}}class va extends Ol{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()!=va.HEADER_SIZE+Ol.GTIN_SIZE+va.WEIGHT_SIZE)throw new ae;let l=new he;return this.encodeCompressedGtin(l,va.HEADER_SIZE),this.encodeCompressedWeight(l,va.HEADER_SIZE+Ol.GTIN_SIZE,va.WEIGHT_SIZE),l.toString()}}va.HEADER_SIZE=5,va.WEIGHT_SIZE=15;class Bc extends va{constructor(l){super(l)}addWeightCode(l,u){l.append("(3103)")}checkWeight(l){return l}}class oi extends va{constructor(l){super(l)}addWeightCode(l,u){u<1e4?l.append("(3202)"):l.append("(3203)")}checkWeight(l){return l<1e4?l:l-1e4}}class Gn extends Kt{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()<Gn.HEADER_SIZE+Kt.GTIN_SIZE)throw new ae;let l=new he;this.encodeCompressedGtin(l,Gn.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(Gn.HEADER_SIZE+Kt.GTIN_SIZE,Gn.LAST_DIGIT_SIZE);l.append("(392"),l.append(u),l.append(")");let f=this.getGeneralDecoder().decodeGeneralPurposeField(Gn.HEADER_SIZE+Kt.GTIN_SIZE+Gn.LAST_DIGIT_SIZE,null);return l.append(f.getNewString()),l.toString()}}Gn.HEADER_SIZE=8,Gn.LAST_DIGIT_SIZE=2;class Ar extends Kt{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()<Ar.HEADER_SIZE+Kt.GTIN_SIZE)throw new ae;let l=new he;this.encodeCompressedGtin(l,Ar.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(Ar.HEADER_SIZE+Kt.GTIN_SIZE,Ar.LAST_DIGIT_SIZE);l.append("(393"),l.append(u),l.append(")");let f=this.getGeneralDecoder().extractNumericValueFromBitArray(Ar.HEADER_SIZE+Kt.GTIN_SIZE+Ar.LAST_DIGIT_SIZE,Ar.FIRST_THREE_DIGITS_SIZE);f/100==0&&l.append("0"),f/10==0&&l.append("0"),l.append(f);let p=this.getGeneralDecoder().decodeGeneralPurposeField(Ar.HEADER_SIZE+Kt.GTIN_SIZE+Ar.LAST_DIGIT_SIZE+Ar.FIRST_THREE_DIGITS_SIZE,null);return l.append(p.getNewString()),l.toString()}}Ar.HEADER_SIZE=8,Ar.LAST_DIGIT_SIZE=2,Ar.FIRST_THREE_DIGITS_SIZE=10;class Xt extends Ol{constructor(l,u,f){super(l),this.dateCode=f,this.firstAIdigits=u}parseInformation(){if(this.getInformation().getSize()!=Xt.HEADER_SIZE+Xt.GTIN_SIZE+Xt.WEIGHT_SIZE+Xt.DATE_SIZE)throw new ae;let l=new he;return this.encodeCompressedGtin(l,Xt.HEADER_SIZE),this.encodeCompressedWeight(l,Xt.HEADER_SIZE+Xt.GTIN_SIZE,Xt.WEIGHT_SIZE),this.encodeCompressedDate(l,Xt.HEADER_SIZE+Xt.GTIN_SIZE+Xt.WEIGHT_SIZE),l.toString()}encodeCompressedDate(l,u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(u,Xt.DATE_SIZE);if(f==38400)return;l.append("("),l.append(this.dateCode),l.append(")");let p=f%32;f/=32;let b=f%12+1;f/=12;let E=f;E/10==0&&l.append("0"),l.append(E),b/10==0&&l.append("0"),l.append(b),p/10==0&&l.append("0"),l.append(p)}addWeightCode(l,u){l.append("("),l.append(this.firstAIdigits),l.append(u/1e5),l.append(")")}checkWeight(l){return l%1e5}}Xt.HEADER_SIZE=8,Xt.WEIGHT_SIZE=20,Xt.DATE_SIZE=16;function Ue(q){try{if(q.get(1))return new ia(q);if(!q.get(2))return new li(q);switch(Fn.extractNumericValueFromBitArray(q,1,4)){case 4:return new Bc(q);case 5:return new oi(q)}switch(Fn.extractNumericValueFromBitArray(q,1,5)){case 12:return new Gn(q);case 13:return new Ar(q)}switch(Fn.extractNumericValueFromBitArray(q,1,7)){case 56:return new Xt(q,"310","11");case 57:return new Xt(q,"320","11");case 58:return new Xt(q,"310","13");case 59:return new Xt(q,"320","13");case 60:return new Xt(q,"310","15");case 61:return new Xt(q,"320","15");case 62:return new Xt(q,"310","17");case 63:return new Xt(q,"320","17")}}catch(l){throw console.log(l),new Ie("unknown decoder: "+q)}}class ct{constructor(l,u,f,p){this.leftchar=l,this.rightchar=u,this.finderpattern=f,this.maybeLast=p}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(l,u){return l instanceof ct?ct.equalsOrNull(l.leftchar,u.leftchar)&&ct.equalsOrNull(l.rightchar,u.rightchar)&&ct.equalsOrNull(l.finderpattern,u.finderpattern):!1}static equalsOrNull(l,u){return l===null?u===null:ct.equals(l,u)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class wr{constructor(l,u,f){this.pairs=l,this.rowNumber=u,this.wasReversed=f}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(l){return this.checkEqualitity(this,l)}toString(){return"{ "+this.pairs+" }"}equals(l,u){return l instanceof wr?this.checkEqualitity(l,u)&&l.wasReversed===u.wasReversed:!1}checkEqualitity(l,u){if(!l||!u)return;let f;return l.forEach((p,b)=>{u.forEach(E=>{p.getLeftChar().getValue()===E.getLeftChar().getValue()&&p.getRightChar().getValue()===E.getRightChar().getValue()&&p.getFinderPatter().getValue()===E.getFinderPatter().getValue()&&(f=!0)})}),f}}class $e extends xt{constructor(l){super(...arguments),this.pairs=new Array($e.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=l===!0}decodeRow(l,u,f){this.pairs.length=0,this.startFromEven=!1;try{return $e.constructResult(this.decodeRow2pairs(l,u))}catch(p){this.verbose&&console.log(p)}return this.pairs.length=0,this.startFromEven=!0,$e.constructResult(this.decodeRow2pairs(l,u))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(l,u){let f=!1;for(;!f;)try{this.pairs.push(this.retrieveNextPair(u,this.pairs,l))}catch(b){if(b instanceof ae){if(!this.pairs.length)throw new ae;f=!0}}if(this.checkChecksum())return this.pairs;let p;if(this.rows.length?p=!0:p=!1,this.storeRow(l,!1),p){let b=this.checkRowsBoolean(!1);if(b!=null||(b=this.checkRowsBoolean(!0),b!=null))return b}throw new ae}checkRowsBoolean(l){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,l&&(this.rows=this.rows.reverse());let u=null;try{u=this.checkRows(new Array,0)}catch(f){this.verbose&&console.log(f)}return l&&(this.rows=this.rows.reverse()),u}checkRows(l,u){for(let f=u;f<this.rows.length;f++){let p=this.rows[f];this.pairs.length=0;for(let E of l)this.pairs.push(E.getPairs());if(this.pairs.push(p.getPairs()),!$e.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let b=new Array(l);b.push(p);try{return this.checkRows(b,f+1)}catch(E){this.verbose&&console.log(E)}}throw new ae}static isValidSequence(l){for(let u of $e.FINDER_PATTERN_SEQUENCES){if(l.length>u.length)continue;let f=!0;for(let p=0;p<l.length;p++)if(l[p].getFinderPattern().getValue()!=u[p]){f=!1;break}if(f)return!0}return!1}storeRow(l,u){let f=0,p=!1,b=!1;for(;f<this.rows.length;){let E=this.rows[f];if(E.getRowNumber()>l){b=E.isEquivalent(this.pairs);break}p=E.isEquivalent(this.pairs),f++}b||p||$e.isPartialRow(this.pairs,this.rows)||(this.rows.push(f,new wr(this.pairs,l,u)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(l,u){for(let f of u)if(f.getPairs().length!==l.length){for(let p of f.getPairs())for(let b of l)if(ct.equals(p,b))break}}static isPartialRow(l,u){for(let f of u){let p=!0;for(let b of l){let E=!1;for(let S of f.getPairs())if(b.equals(S)){E=!0;break}if(!E){p=!1;break}}if(p)return!0}return!1}getRows(){return this.rows}static constructResult(l){let u=Lc.buildBitArray(l),p=Ue(u).parseInformation(),b=l[0].getFinderPattern().getResultPoints(),E=l[l.length-1].getFinderPattern().getResultPoints(),S=[b[0],b[1],E[0],E[1]];return new ce(p,null,null,S,ie.RSS_EXPANDED,null)}checkChecksum(){let l=this.pairs.get(0),u=l.getLeftChar(),f=l.getRightChar();if(f==null)return!1;let p=f.getChecksumPortion(),b=2;for(let S=1;S<this.pairs.size();++S){let T=this.pairs.get(S);p+=T.getLeftChar().getChecksumPortion(),b++;let P=T.getRightChar();P!=null&&(p+=P.getChecksumPortion(),b++)}return p%=211,211*(b-4)+p==u.getValue()}static getNextSecondBar(l,u){let f;return l.get(u)?(f=l.getNextUnset(u),f=l.getNextSet(f)):(f=l.getNextSet(u),f=l.getNextUnset(f)),f}retrieveNextPair(l,u,f){let p=u.length%2==0;this.startFromEven&&(p=!p);let b,E=!0,S=-1;do this.findNextPair(l,u,S),b=this.parseFoundFinderPattern(l,f,p),b==null?S=$e.getNextSecondBar(l,this.startEnd[0]):E=!1;while(E);let T=this.decodeDataCharacter(l,b,p,!0);if(!this.isEmptyPair(u)&&u[u.length-1].mustBeLast())throw new ae;let P;try{P=this.decodeDataCharacter(l,b,p,!1)}catch(B){P=null,this.verbose&&console.log(B)}return new ct(T,P,b,!0)}isEmptyPair(l){return l.length===0}findNextPair(l,u,f){let p=this.getDecodeFinderCounters();p[0]=0,p[1]=0,p[2]=0,p[3]=0;let b=l.getSize(),E;f>=0?E=f:this.isEmptyPair(u)?E=0:E=u[u.length-1].getFinderPattern().getStartEnd()[1];let S=u.length%2!=0;this.startFromEven&&(S=!S);let T=!1;for(;E<b&&(T=!l.get(E),!!T);)E++;let P=0,B=E;for(let $=E;$<b;$++)if(l.get($)!=T)p[P]++;else{if(P==3){if(S&&$e.reverseCounters(p),$e.isFinderPattern(p)){this.startEnd[0]=B,this.startEnd[1]=$;return}S&&$e.reverseCounters(p),B+=p[0]+p[1],p[0]=p[2],p[1]=p[3],p[2]=0,p[3]=0,P--}else P++;p[P]=1,T=!T}throw new ae}static reverseCounters(l){let u=l.length;for(let f=0;f<u/2;++f){let p=l[f];l[f]=l[u-f-1],l[u-f-1]=p}}parseFoundFinderPattern(l,u,f){let p,b,E;if(f){let P=this.startEnd[0]-1;for(;P>=0&&!l.get(P);)P--;P++,p=this.startEnd[0]-P,b=P,E=this.startEnd[1]}else b=this.startEnd[0],E=l.getNextUnset(this.startEnd[1]+1),p=E-this.startEnd[1];let S=this.getDecodeFinderCounters();k.arraycopy(S,0,S,1,S.length-1),S[0]=p;let T;try{T=this.parseFinderValue(S,$e.FINDER_PATTERNS)}catch{return null}return new ls(T,[b,E],b,E,u)}decodeDataCharacter(l,u,f,p){let b=this.getDataCharacterCounters();for(let lr=0;lr<b.length;lr++)b[lr]=0;if(p)$e.recordPatternInReverse(l,u.getStartEnd()[0],b);else{$e.recordPattern(l,u.getStartEnd()[1],b);for(let lr=0,_n=b.length-1;lr<_n;lr++,_n--){let ca=b[lr];b[lr]=b[_n],b[_n]=ca}}let E=17,S=mt.sum(new Int32Array(b))/E,T=(u.getStartEnd()[1]-u.getStartEnd()[0])/15;if(Math.abs(S-T)/T>.3)throw new ae;let P=this.getOddCounts(),B=this.getEvenCounts(),$=this.getOddRoundingErrors(),W=this.getEvenRoundingErrors();for(let lr=0;lr<b.length;lr++){let _n=1*b[lr]/S,ca=_n+.5;if(ca<1){if(_n<.3)throw new ae;ca=1}else if(ca>8){if(_n>8.7)throw new ae;ca=8}let jl=lr/2;(lr&1)==0?(P[jl]=ca,$[jl]=_n-ca):(B[jl]=ca,W[jl]=_n-ca)}this.adjustOddEvenCounts(E);let re=4*u.getValue()+(f?0:2)+(p?0:1)-1,ue=0,de=0;for(let lr=P.length-1;lr>=0;lr--){if($e.isNotA1left(u,f,p)){let _n=$e.WEIGHTS[re][2*lr];de+=P[lr]*_n}ue+=P[lr]}let Ee=0;for(let lr=B.length-1;lr>=0;lr--)if($e.isNotA1left(u,f,p)){let _n=$e.WEIGHTS[re][2*lr+1];Ee+=B[lr]*_n}let _e=de+Ee;if((ue&1)!=0||ue>13||ue<4)throw new ae;let Qe=(13-ue)/2,Ke=$e.SYMBOL_WIDEST[Qe],Ge=9-Ke,Bt=xa.getRSSvalue(P,Ke,!0),At=xa.getRSSvalue(B,Ge,!1),Kr=$e.EVEN_TOTAL_SUBSET[Qe],Na=$e.GSUM[Qe],Yn=Bt*Kr+At+Na;return new $n(Yn,_e)}static isNotA1left(l,u,f){return!(l.getValue()==0&&u&&f)}adjustOddEvenCounts(l){let u=mt.sum(new Int32Array(this.getOddCounts())),f=mt.sum(new Int32Array(this.getEvenCounts())),p=!1,b=!1;u>13?b=!0:u<4&&(p=!0);let E=!1,S=!1;f>13?S=!0:f<4&&(E=!0);let T=u+f-l,P=(u&1)==1,B=(f&1)==0;if(T==1)if(P){if(B)throw new ae;b=!0}else{if(!B)throw new ae;S=!0}else if(T==-1)if(P){if(B)throw new ae;p=!0}else{if(!B)throw new ae;E=!0}else if(T==0){if(P){if(!B)throw new ae;u<f?(p=!0,S=!0):(b=!0,E=!0)}else if(B)throw new ae}else throw new ae;if(p){if(b)throw new ae;$e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(b&&$e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),E){if(S)throw new ae;$e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}S&&$e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}$e.SYMBOL_WIDEST=[7,5,4,3,1],$e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],$e.GSUM=[0,348,1388,2948,3988],$e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],$e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],$e.FINDER_PAT_A=0,$e.FINDER_PAT_B=1,$e.FINDER_PAT_C=2,$e.FINDER_PAT_D=3,$e.FINDER_PAT_E=4,$e.FINDER_PAT_F=5,$e.FINDER_PATTERN_SEQUENCES=[[$e.FINDER_PAT_A,$e.FINDER_PAT_A],[$e.FINDER_PAT_A,$e.FINDER_PAT_B,$e.FINDER_PAT_B],[$e.FINDER_PAT_A,$e.FINDER_PAT_C,$e.FINDER_PAT_B,$e.FINDER_PAT_D],[$e.FINDER_PAT_A,$e.FINDER_PAT_E,$e.FINDER_PAT_B,$e.FINDER_PAT_D,$e.FINDER_PAT_C],[$e.FINDER_PAT_A,$e.FINDER_PAT_E,$e.FINDER_PAT_B,$e.FINDER_PAT_D,$e.FINDER_PAT_D,$e.FINDER_PAT_F],[$e.FINDER_PAT_A,$e.FINDER_PAT_E,$e.FINDER_PAT_B,$e.FINDER_PAT_D,$e.FINDER_PAT_E,$e.FINDER_PAT_F,$e.FINDER_PAT_F],[$e.FINDER_PAT_A,$e.FINDER_PAT_A,$e.FINDER_PAT_B,$e.FINDER_PAT_B,$e.FINDER_PAT_C,$e.FINDER_PAT_C,$e.FINDER_PAT_D,$e.FINDER_PAT_D],[$e.FINDER_PAT_A,$e.FINDER_PAT_A,$e.FINDER_PAT_B,$e.FINDER_PAT_B,$e.FINDER_PAT_C,$e.FINDER_PAT_C,$e.FINDER_PAT_D,$e.FINDER_PAT_E,$e.FINDER_PAT_E],[$e.FINDER_PAT_A,$e.FINDER_PAT_A,$e.FINDER_PAT_B,$e.FINDER_PAT_B,$e.FINDER_PAT_C,$e.FINDER_PAT_C,$e.FINDER_PAT_D,$e.FINDER_PAT_E,$e.FINDER_PAT_F,$e.FINDER_PAT_F],[$e.FINDER_PAT_A,$e.FINDER_PAT_A,$e.FINDER_PAT_B,$e.FINDER_PAT_B,$e.FINDER_PAT_C,$e.FINDER_PAT_D,$e.FINDER_PAT_D,$e.FINDER_PAT_E,$e.FINDER_PAT_E,$e.FINDER_PAT_F,$e.FINDER_PAT_F]],$e.MAX_PAIRS=11;class jm extends $n{constructor(l,u,f){super(l,u),this.count=0,this.finderPattern=f}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class sr extends xt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(l,u,f){const p=this.decodePair(u,!1,l,f);sr.addOrTally(this.possibleLeftPairs,p),u.reverse();let b=this.decodePair(u,!0,l,f);sr.addOrTally(this.possibleRightPairs,b),u.reverse();for(let E of this.possibleLeftPairs)if(E.getCount()>1){for(let S of this.possibleRightPairs)if(S.getCount()>1&&sr.checkChecksum(E,S))return sr.constructResult(E,S)}throw new ae}static addOrTally(l,u){if(u==null)return;let f=!1;for(let p of l)if(p.getValue()===u.getValue()){p.incrementCount(),f=!0;break}f||l.push(u)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(l,u){let f=4537077*l.getValue()+u.getValue(),p=new String(f).toString(),b=new he;for(let P=13-p.length;P>0;P--)b.append("0");b.append(p);let E=0;for(let P=0;P<13;P++){let B=b.charAt(P).charCodeAt(0)-48;E+=(P&1)===0?3*B:B}E=10-E%10,E===10&&(E=0),b.append(E.toString());let S=l.getFinderPattern().getResultPoints(),T=u.getFinderPattern().getResultPoints();return new ce(b.toString(),null,0,[S[0],S[1],T[0],T[1]],ie.RSS_14,new Date().getTime())}static checkChecksum(l,u){let f=(l.getChecksumPortion()+16*u.getChecksumPortion())%79,p=9*l.getFinderPattern().getValue()+u.getFinderPattern().getValue();return p>72&&p--,p>8&&p--,f===p}decodePair(l,u,f,p){try{let b=this.findFinderPattern(l,u),E=this.parseFoundFinderPattern(l,f,u,b),S=p==null?null:p.get(z.NEED_RESULT_POINT_CALLBACK);if(S!=null){let B=(b[0]+b[1])/2;u&&(B=l.getSize()-1-B),S.foundPossibleResultPoint(new tt(B,f))}let T=this.decodeDataCharacter(l,E,!0),P=this.decodeDataCharacter(l,E,!1);return new jm(1597*T.getValue()+P.getValue(),T.getChecksumPortion()+4*P.getChecksumPortion(),E)}catch{return null}}decodeDataCharacter(l,u,f){let p=this.getDataCharacterCounters();for(let Ee=0;Ee<p.length;Ee++)p[Ee]=0;if(f)Gt.recordPatternInReverse(l,u.getStartEnd()[0],p);else{Gt.recordPattern(l,u.getStartEnd()[1]+1,p);for(let Ee=0,_e=p.length-1;Ee<_e;Ee++,_e--){let Qe=p[Ee];p[Ee]=p[_e],p[_e]=Qe}}let b=f?16:15,E=mt.sum(new Int32Array(p))/b,S=this.getOddCounts(),T=this.getEvenCounts(),P=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let Ee=0;Ee<p.length;Ee++){let _e=p[Ee]/E,Qe=Math.floor(_e+.5);Qe<1?Qe=1:Qe>8&&(Qe=8);let Ke=Math.floor(Ee/2);(Ee&1)===0?(S[Ke]=Qe,P[Ke]=_e-Qe):(T[Ke]=Qe,B[Ke]=_e-Qe)}this.adjustOddEvenCounts(f,b);let $=0,W=0;for(let Ee=S.length-1;Ee>=0;Ee--)W*=9,W+=S[Ee],$+=S[Ee];let re=0,ue=0;for(let Ee=T.length-1;Ee>=0;Ee--)re*=9,re+=T[Ee],ue+=T[Ee];let de=W+3*re;if(f){if(($&1)!==0||$>12||$<4)throw new ae;let Ee=(12-$)/2,_e=sr.OUTSIDE_ODD_WIDEST[Ee],Qe=9-_e,Ke=xa.getRSSvalue(S,_e,!1),Ge=xa.getRSSvalue(T,Qe,!0),Bt=sr.OUTSIDE_EVEN_TOTAL_SUBSET[Ee],At=sr.OUTSIDE_GSUM[Ee];return new $n(Ke*Bt+Ge+At,de)}else{if((ue&1)!==0||ue>10||ue<4)throw new ae;let Ee=(10-ue)/2,_e=sr.INSIDE_ODD_WIDEST[Ee],Qe=9-_e,Ke=xa.getRSSvalue(S,_e,!0),Ge=xa.getRSSvalue(T,Qe,!1),Bt=sr.INSIDE_ODD_TOTAL_SUBSET[Ee],At=sr.INSIDE_GSUM[Ee];return new $n(Ge*Bt+Ke+At,de)}}findFinderPattern(l,u){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=l.getSize(),b=!1,E=0;for(;E<p&&(b=!l.get(E),u!==b);)E++;let S=0,T=E;for(let P=E;P<p;P++)if(l.get(P)!==b)f[S]++;else{if(S===3){if(xt.isFinderPattern(f))return[T,P];T+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,S--}else S++;f[S]=1,b=!b}throw new ae}parseFoundFinderPattern(l,u,f,p){let b=l.get(p[0]),E=p[0]-1;for(;E>=0&&b!==l.get(E);)E--;E++;const S=p[0]-E,T=this.getDecodeFinderCounters(),P=new Int32Array(T.length);k.arraycopy(T,0,P,1,T.length-1),P[0]=S;const B=this.parseFinderValue(P,sr.FINDER_PATTERNS);let $=E,W=p[1];return f&&($=l.getSize()-1-$,W=l.getSize()-1-W),new ls(B,[E,p[1]],$,W,u)}adjustOddEvenCounts(l,u){let f=mt.sum(new Int32Array(this.getOddCounts())),p=mt.sum(new Int32Array(this.getEvenCounts())),b=!1,E=!1,S=!1,T=!1;l?(f>12?E=!0:f<4&&(b=!0),p>12?T=!0:p<4&&(S=!0)):(f>11?E=!0:f<5&&(b=!0),p>10?T=!0:p<4&&(S=!0));let P=f+p-u,B=(f&1)===(l?1:0),$=(p&1)===1;if(P===1)if(B){if($)throw new ae;E=!0}else{if(!$)throw new ae;T=!0}else if(P===-1)if(B){if($)throw new ae;b=!0}else{if(!$)throw new ae;S=!0}else if(P===0){if(B){if(!$)throw new ae;f<p?(b=!0,T=!0):(E=!0,S=!0)}else if($)throw new ae}else throw new ae;if(b){if(E)throw new ae;xt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(E&&xt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),S){if(T)throw new ae;xt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}T&&xt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}sr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],sr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],sr.OUTSIDE_GSUM=[0,161,961,2015,2715],sr.INSIDE_GSUM=[0,336,1036,1516],sr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],sr.INSIDE_ODD_WIDEST=[2,4,6,8],sr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class za extends Gt{constructor(l,u){super(),this.readers=[],this.verbose=u===!0;const f=l?l.get(z.POSSIBLE_FORMATS):null,p=l&&l.get(z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;f?((f.includes(ie.EAN_13)||f.includes(ie.UPC_A)||f.includes(ie.EAN_8)||f.includes(ie.UPC_E))&&this.readers.push(new Fe(l)),f.includes(ie.CODE_39)&&this.readers.push(new Je(p)),f.includes(ie.CODE_128)&&this.readers.push(new ge),f.includes(ie.ITF)&&this.readers.push(new rt),f.includes(ie.RSS_14)&&this.readers.push(new sr),f.includes(ie.RSS_EXPANDED)&&this.readers.push(new $e(this.verbose))):(this.readers.push(new Fe(l)),this.readers.push(new Je),this.readers.push(new Fe(l)),this.readers.push(new ge),this.readers.push(new rt),this.readers.push(new sr),this.readers.push(new $e(this.verbose)))}decodeRow(l,u,f){for(let p=0;p<this.readers.length;p++)try{return this.readers[p].decodeRow(l,u,f)}catch{}throw new ae}reset(){this.readers.forEach(l=>l.reset())}}class m1 extends fe{constructor(l=500,u){super(new za(u),l,u)}}class Zt{constructor(l,u,f){this.ecCodewords=l,this.ecBlocks=[u],f&&this.ecBlocks.push(f)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Wt{constructor(l,u){this.count=l,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ut{constructor(l,u,f,p,b,E){this.versionNumber=l,this.symbolSizeRows=u,this.symbolSizeColumns=f,this.dataRegionSizeRows=p,this.dataRegionSizeColumns=b,this.ecBlocks=E;let S=0;const T=E.getECCodewords(),P=E.getECBlocks();for(let B of P)S+=B.getCount()*(B.getDataCodewords()+T);this.totalCodewords=S}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(l,u){if((l&1)!==0||(u&1)!==0)throw new L;for(let f of Ut.VERSIONS)if(f.symbolSizeRows===l&&f.symbolSizeColumns===u)return f;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new Ut(1,10,10,8,8,new Zt(5,new Wt(1,3))),new Ut(2,12,12,10,10,new Zt(7,new Wt(1,5))),new Ut(3,14,14,12,12,new Zt(10,new Wt(1,8))),new Ut(4,16,16,14,14,new Zt(12,new Wt(1,12))),new Ut(5,18,18,16,16,new Zt(14,new Wt(1,18))),new Ut(6,20,20,18,18,new Zt(18,new Wt(1,22))),new Ut(7,22,22,20,20,new Zt(20,new Wt(1,30))),new Ut(8,24,24,22,22,new Zt(24,new Wt(1,36))),new Ut(9,26,26,24,24,new Zt(28,new Wt(1,44))),new Ut(10,32,32,14,14,new Zt(36,new Wt(1,62))),new Ut(11,36,36,16,16,new Zt(42,new Wt(1,86))),new Ut(12,40,40,18,18,new Zt(48,new Wt(1,114))),new Ut(13,44,44,20,20,new Zt(56,new Wt(1,144))),new Ut(14,48,48,22,22,new Zt(68,new Wt(1,174))),new Ut(15,52,52,24,24,new Zt(42,new Wt(2,102))),new Ut(16,64,64,14,14,new Zt(56,new Wt(2,140))),new Ut(17,72,72,16,16,new Zt(36,new Wt(4,92))),new Ut(18,80,80,18,18,new Zt(48,new Wt(4,114))),new Ut(19,88,88,20,20,new Zt(56,new Wt(4,144))),new Ut(20,96,96,22,22,new Zt(68,new Wt(4,174))),new Ut(21,104,104,24,24,new Zt(56,new Wt(6,136))),new Ut(22,120,120,18,18,new Zt(68,new Wt(6,175))),new Ut(23,132,132,20,20,new Zt(62,new Wt(8,163))),new Ut(24,144,144,22,22,new Zt(62,new Wt(8,156),new Wt(2,155))),new Ut(25,8,18,6,16,new Zt(7,new Wt(1,5))),new Ut(26,8,32,6,14,new Zt(11,new Wt(1,10))),new Ut(27,12,26,10,24,new Zt(14,new Wt(1,16))),new Ut(28,12,36,10,16,new Zt(18,new Wt(1,22))),new Ut(29,16,36,14,16,new Zt(24,new Wt(1,32))),new Ut(30,16,48,14,22,new Zt(28,new Wt(1,49)))]}}Ut.VERSIONS=Ut.buildVersions();class _l{constructor(l){const u=l.getHeight();if(u<8||u>144||(u&1)!==0)throw new L;this.version=_l.readVersion(l),this.mappingBitMatrix=this.extractDataRegion(l),this.readMappingMatrix=new xe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(l){const u=l.getHeight(),f=l.getWidth();return Ut.getVersionForDimensions(u,f)}readCodewords(){const l=new Int8Array(this.version.getTotalCodewords());let u=0,f=4,p=0;const b=this.mappingBitMatrix.getHeight(),E=this.mappingBitMatrix.getWidth();let S=!1,T=!1,P=!1,B=!1;do if(f===b&&p===0&&!S)l[u++]=this.readCorner1(b,E)&255,f-=2,p+=2,S=!0;else if(f===b-2&&p===0&&(E&3)!==0&&!T)l[u++]=this.readCorner2(b,E)&255,f-=2,p+=2,T=!0;else if(f===b+4&&p===2&&(E&7)===0&&!P)l[u++]=this.readCorner3(b,E)&255,f-=2,p+=2,P=!0;else if(f===b-2&&p===0&&(E&7)===4&&!B)l[u++]=this.readCorner4(b,E)&255,f-=2,p+=2,B=!0;else{do f<b&&p>=0&&!this.readMappingMatrix.get(p,f)&&(l[u++]=this.readUtah(f,p,b,E)&255),f-=2,p+=2;while(f>=0&&p<E);f+=1,p+=3;do f>=0&&p<E&&!this.readMappingMatrix.get(p,f)&&(l[u++]=this.readUtah(f,p,b,E)&255),f+=2,p-=2;while(f<b&&p>=0);f+=3,p+=1}while(f<b||p<E);if(u!==this.version.getTotalCodewords())throw new L;return l}readModule(l,u,f,p){return l<0&&(l+=f,u+=4-(f+4&7)),u<0&&(u+=p,l+=4-(p+4&7)),this.readMappingMatrix.set(u,l),this.mappingBitMatrix.get(u,l)}readUtah(l,u,f,p){let b=0;return this.readModule(l-2,u-2,f,p)&&(b|=1),b<<=1,this.readModule(l-2,u-1,f,p)&&(b|=1),b<<=1,this.readModule(l-1,u-2,f,p)&&(b|=1),b<<=1,this.readModule(l-1,u-1,f,p)&&(b|=1),b<<=1,this.readModule(l-1,u,f,p)&&(b|=1),b<<=1,this.readModule(l,u-2,f,p)&&(b|=1),b<<=1,this.readModule(l,u-1,f,p)&&(b|=1),b<<=1,this.readModule(l,u,f,p)&&(b|=1),b}readCorner1(l,u){let f=0;return this.readModule(l-1,0,l,u)&&(f|=1),f<<=1,this.readModule(l-1,1,l,u)&&(f|=1),f<<=1,this.readModule(l-1,2,l,u)&&(f|=1),f<<=1,this.readModule(0,u-2,l,u)&&(f|=1),f<<=1,this.readModule(0,u-1,l,u)&&(f|=1),f<<=1,this.readModule(1,u-1,l,u)&&(f|=1),f<<=1,this.readModule(2,u-1,l,u)&&(f|=1),f<<=1,this.readModule(3,u-1,l,u)&&(f|=1),f}readCorner2(l,u){let f=0;return this.readModule(l-3,0,l,u)&&(f|=1),f<<=1,this.readModule(l-2,0,l,u)&&(f|=1),f<<=1,this.readModule(l-1,0,l,u)&&(f|=1),f<<=1,this.readModule(0,u-4,l,u)&&(f|=1),f<<=1,this.readModule(0,u-3,l,u)&&(f|=1),f<<=1,this.readModule(0,u-2,l,u)&&(f|=1),f<<=1,this.readModule(0,u-1,l,u)&&(f|=1),f<<=1,this.readModule(1,u-1,l,u)&&(f|=1),f}readCorner3(l,u){let f=0;return this.readModule(l-1,0,l,u)&&(f|=1),f<<=1,this.readModule(l-1,u-1,l,u)&&(f|=1),f<<=1,this.readModule(0,u-3,l,u)&&(f|=1),f<<=1,this.readModule(0,u-2,l,u)&&(f|=1),f<<=1,this.readModule(0,u-1,l,u)&&(f|=1),f<<=1,this.readModule(1,u-3,l,u)&&(f|=1),f<<=1,this.readModule(1,u-2,l,u)&&(f|=1),f<<=1,this.readModule(1,u-1,l,u)&&(f|=1),f}readCorner4(l,u){let f=0;return this.readModule(l-3,0,l,u)&&(f|=1),f<<=1,this.readModule(l-2,0,l,u)&&(f|=1),f<<=1,this.readModule(l-1,0,l,u)&&(f|=1),f<<=1,this.readModule(0,u-2,l,u)&&(f|=1),f<<=1,this.readModule(0,u-1,l,u)&&(f|=1),f<<=1,this.readModule(1,u-1,l,u)&&(f|=1),f<<=1,this.readModule(2,u-1,l,u)&&(f|=1),f<<=1,this.readModule(3,u-1,l,u)&&(f|=1),f}extractDataRegion(l){const u=this.version.getSymbolSizeRows(),f=this.version.getSymbolSizeColumns();if(l.getHeight()!==u)throw new w("Dimension of bitMatrix must match the version size");const p=this.version.getDataRegionSizeRows(),b=this.version.getDataRegionSizeColumns(),E=u/p|0,S=f/b|0,T=E*p,P=S*b,B=new xe(P,T);for(let $=0;$<E;++$){const W=$*p;for(let re=0;re<S;++re){const ue=re*b;for(let de=0;de<p;++de){const Ee=$*(p+2)+1+de,_e=W+de;for(let Qe=0;Qe<b;++Qe){const Ke=re*(b+2)+1+Qe;if(l.get(Ke,Ee)){const Ge=ue+Qe;B.set(Ge,_e)}}}}}return B}}class Dl{constructor(l,u){this.numDataCodewords=l,this.codewords=u}static getDataBlocks(l,u){const f=u.getECBlocks();let p=0;const b=f.getECBlocks();for(let de of b)p+=de.getCount();const E=new Array(p);let S=0;for(let de of b)for(let Ee=0;Ee<de.getCount();Ee++){const _e=de.getDataCodewords(),Qe=f.getECCodewords()+_e;E[S++]=new Dl(_e,new Uint8Array(Qe))}const P=E[0].codewords.length-f.getECCodewords(),B=P-1;let $=0;for(let de=0;de<B;de++)for(let Ee=0;Ee<S;Ee++)E[Ee].codewords[de]=l[$++];const W=u.getVersionNumber()===24,re=W?8:S;for(let de=0;de<re;de++)E[de].codewords[P-1]=l[$++];const ue=E[0].codewords.length;for(let de=P;de<ue;de++)for(let Ee=0;Ee<S;Ee++){const _e=W?(Ee+8)%S:Ee,Qe=W&&_e>7?de-1:de;E[_e].codewords[Qe]=l[$++]}if($!==l.length)throw new w;return E}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Va{constructor(l){this.bytes=l,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(l){if(l<1||l>32||l>this.available())throw new w(""+l);let u=0,f=this.bitOffset,p=this.byteOffset;const b=this.bytes;if(f>0){const E=8-f,S=l<E?l:E,T=E-S,P=255>>8-S<<T;u=(b[p]&P)>>T,l-=S,f+=S,f===8&&(f=0,p++)}if(l>0){for(;l>=8;)u=u<<8|b[p]&255,p++,l-=8;if(l>0){const E=8-l,S=255>>E<<E;u=u<<l|(b[p]&S)>>E,f+=l}}return this.bitOffset=f,this.byteOffset=p,u}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Qt;(function(q){q[q.PAD_ENCODE=0]="PAD_ENCODE",q[q.ASCII_ENCODE=1]="ASCII_ENCODE",q[q.C40_ENCODE=2]="C40_ENCODE",q[q.TEXT_ENCODE=3]="TEXT_ENCODE",q[q.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",q[q.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",q[q.BASE256_ENCODE=6]="BASE256_ENCODE"})(Qt||(Qt={}));class Bs{static decode(l){const u=new Va(l),f=new he,p=new he,b=new Array;let E=Qt.ASCII_ENCODE;do if(E===Qt.ASCII_ENCODE)E=this.decodeAsciiSegment(u,f,p);else{switch(E){case Qt.C40_ENCODE:this.decodeC40Segment(u,f);break;case Qt.TEXT_ENCODE:this.decodeTextSegment(u,f);break;case Qt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(u,f);break;case Qt.EDIFACT_ENCODE:this.decodeEdifactSegment(u,f);break;case Qt.BASE256_ENCODE:this.decodeBase256Segment(u,f,b);break;default:throw new L}E=Qt.ASCII_ENCODE}while(E!==Qt.PAD_ENCODE&&u.available()>0);return p.length()>0&&f.append(p.toString()),new ve(l,f.toString(),b.length===0?null:b,null)}static decodeAsciiSegment(l,u,f){let p=!1;do{let b=l.readBits(8);if(b===0)throw new L;if(b<=128)return p&&(b+=128),u.append(String.fromCharCode(b-1)),Qt.ASCII_ENCODE;if(b===129)return Qt.PAD_ENCODE;if(b<=229){const E=b-130;E<10&&u.append("0"),u.append(""+E)}else switch(b){case 230:return Qt.C40_ENCODE;case 231:return Qt.BASE256_ENCODE;case 232:u.append("");break;case 233:case 234:break;case 235:p=!0;break;case 236:u.append("[)>05"),f.insert(0,"");break;case 237:u.append("[)>06"),f.insert(0,"");break;case 238:return Qt.ANSIX12_ENCODE;case 239:return Qt.TEXT_ENCODE;case 240:return Qt.EDIFACT_ENCODE;case 241:break;default:if(b!==254||l.available()!==0)throw new L;break}}while(l.available()>0);return Qt.ASCII_ENCODE}static decodeC40Segment(l,u){let f=!1;const p=[];let b=0;do{if(l.available()===8)return;const E=l.readBits(8);if(E===254)return;this.parseTwoBytes(E,l.readBits(8),p);for(let S=0;S<3;S++){const T=p[S];switch(b){case 0:if(T<3)b=T+1;else if(T<this.C40_BASIC_SET_CHARS.length){const P=this.C40_BASIC_SET_CHARS[T];f?(u.append(String.fromCharCode(P.charCodeAt(0)+128)),f=!1):u.append(P)}else throw new L;break;case 1:f?(u.append(String.fromCharCode(T+128)),f=!1):u.append(String.fromCharCode(T)),b=0;break;case 2:if(T<this.C40_SHIFT2_SET_CHARS.length){const P=this.C40_SHIFT2_SET_CHARS[T];f?(u.append(String.fromCharCode(P.charCodeAt(0)+128)),f=!1):u.append(P)}else switch(T){case 27:u.append("");break;case 30:f=!0;break;default:throw new L}b=0;break;case 3:f?(u.append(String.fromCharCode(T+224)),f=!1):u.append(String.fromCharCode(T+96)),b=0;break;default:throw new L}}}while(l.available()>0)}static decodeTextSegment(l,u){let f=!1,p=[],b=0;do{if(l.available()===8)return;const E=l.readBits(8);if(E===254)return;this.parseTwoBytes(E,l.readBits(8),p);for(let S=0;S<3;S++){const T=p[S];switch(b){case 0:if(T<3)b=T+1;else if(T<this.TEXT_BASIC_SET_CHARS.length){const P=this.TEXT_BASIC_SET_CHARS[T];f?(u.append(String.fromCharCode(P.charCodeAt(0)+128)),f=!1):u.append(P)}else throw new L;break;case 1:f?(u.append(String.fromCharCode(T+128)),f=!1):u.append(String.fromCharCode(T)),b=0;break;case 2:if(T<this.TEXT_SHIFT2_SET_CHARS.length){const P=this.TEXT_SHIFT2_SET_CHARS[T];f?(u.append(String.fromCharCode(P.charCodeAt(0)+128)),f=!1):u.append(P)}else switch(T){case 27:u.append("");break;case 30:f=!0;break;default:throw new L}b=0;break;case 3:if(T<this.TEXT_SHIFT3_SET_CHARS.length){const P=this.TEXT_SHIFT3_SET_CHARS[T];f?(u.append(String.fromCharCode(P.charCodeAt(0)+128)),f=!1):u.append(P),b=0}else throw new L;break;default:throw new L}}}while(l.available()>0)}static decodeAnsiX12Segment(l,u){const f=[];do{if(l.available()===8)return;const p=l.readBits(8);if(p===254)return;this.parseTwoBytes(p,l.readBits(8),f);for(let b=0;b<3;b++){const E=f[b];switch(E){case 0:u.append("\r");break;case 1:u.append("*");break;case 2:u.append(">");break;case 3:u.append(" ");break;default:if(E<14)u.append(String.fromCharCode(E+44));else if(E<40)u.append(String.fromCharCode(E+51));else throw new L;break}}}while(l.available()>0)}static parseTwoBytes(l,u,f){let p=(l<<8)+u-1,b=Math.floor(p/1600);f[0]=b,p-=b*1600,b=Math.floor(p/40),f[1]=b,f[2]=p-b*40}static decodeEdifactSegment(l,u){do{if(l.available()<=16)return;for(let f=0;f<4;f++){let p=l.readBits(6);if(p===31){const b=8-l.getBitOffset();b!==8&&l.readBits(b);return}(p&32)===0&&(p|=64),u.append(String.fromCharCode(p))}}while(l.available()>0)}static decodeBase256Segment(l,u,f){let p=1+l.getByteOffset();const b=this.unrandomize255State(l.readBits(8),p++);let E;if(b===0?E=l.available()/8|0:b<250?E=b:E=250*(b-249)+this.unrandomize255State(l.readBits(8),p++),E<0)throw new L;const S=new Uint8Array(E);for(let T=0;T<E;T++){if(l.available()<8)throw new L;S[T]=this.unrandomize255State(l.readBits(8),p++)}f.push(S);try{u.append(Y.decode(S,X.ISO88591))}catch(T){throw new Ie("Platform does not support required encoding: "+T.message)}}static unrandomize255State(l,u){const f=149*u%255+1,p=l-f;return p>=0?p:p+256}}Bs.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Bs.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Bs.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Bs.TEXT_SHIFT2_SET_CHARS=Bs.C40_SHIFT2_SET_CHARS,Bs.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class h1{constructor(){this.rsDecoder=new ut(je.DATA_MATRIX_FIELD_256)}decode(l){const u=new _l(l),f=u.getVersion(),p=u.readCodewords(),b=Dl.getDataBlocks(p,f);let E=0;for(let P of b)E+=P.getNumDataCodewords();const S=new Uint8Array(E),T=b.length;for(let P=0;P<T;P++){const B=b[P],$=B.getCodewords(),W=B.getNumDataCodewords();this.correctErrors($,W);for(let re=0;re<W;re++)S[re*T+P]=$[re]}return Bs.decode(S)}correctErrors(l,u){const f=new Int32Array(l);try{this.rsDecoder.decode(f,l.length-u)}catch{throw new _}for(let p=0;p<u;p++)l[p]=f[p]}}class Tr{constructor(l){this.image=l,this.rectangleDetector=new Be(this.image)}detect(){const l=this.rectangleDetector.detect();let u=this.detectSolid1(l);if(u=this.detectSolid2(u),u[3]=this.correctTopRight(u),!u[3])throw new ae;u=this.shiftToModuleCenter(u);const f=u[0],p=u[1],b=u[2],E=u[3];let S=this.transitionsBetween(f,E)+1,T=this.transitionsBetween(b,E)+1;(S&1)===1&&(S+=1),(T&1)===1&&(T+=1),4*S<7*T&&4*T<7*S&&(S=T=Math.max(S,T));let P=Tr.sampleGrid(this.image,f,p,b,E,S,T);return new nt(P,[f,p,b,E])}static shiftPoint(l,u,f){let p=(u.getX()-l.getX())/(f+1),b=(u.getY()-l.getY())/(f+1);return new tt(l.getX()+p,l.getY()+b)}static moveAway(l,u,f){let p=l.getX(),b=l.getY();return p<u?p-=1:p+=1,b<f?b-=1:b+=1,new tt(p,b)}detectSolid1(l){let u=l[0],f=l[1],p=l[3],b=l[2],E=this.transitionsBetween(u,f),S=this.transitionsBetween(f,p),T=this.transitionsBetween(p,b),P=this.transitionsBetween(b,u),B=E,$=[b,u,f,p];return B>S&&(B=S,$[0]=u,$[1]=f,$[2]=p,$[3]=b),B>T&&(B=T,$[0]=f,$[1]=p,$[2]=b,$[3]=u),B>P&&($[0]=p,$[1]=b,$[2]=u,$[3]=f),$}detectSolid2(l){let u=l[0],f=l[1],p=l[2],b=l[3],E=this.transitionsBetween(u,b),S=Tr.shiftPoint(f,p,(E+1)*4),T=Tr.shiftPoint(p,f,(E+1)*4),P=this.transitionsBetween(S,u),B=this.transitionsBetween(T,b);return P<B?(l[0]=u,l[1]=f,l[2]=p,l[3]=b):(l[0]=f,l[1]=p,l[2]=b,l[3]=u),l}correctTopRight(l){let u=l[0],f=l[1],p=l[2],b=l[3],E=this.transitionsBetween(u,b),S=this.transitionsBetween(f,b),T=Tr.shiftPoint(u,f,(S+1)*4),P=Tr.shiftPoint(p,f,(E+1)*4);E=this.transitionsBetween(T,b),S=this.transitionsBetween(P,b);let B=new tt(b.getX()+(p.getX()-f.getX())/(E+1),b.getY()+(p.getY()-f.getY())/(E+1)),$=new tt(b.getX()+(u.getX()-f.getX())/(S+1),b.getY()+(u.getY()-f.getY())/(S+1));if(!this.isValid(B))return this.isValid($)?$:null;if(!this.isValid($))return B;let W=this.transitionsBetween(T,B)+this.transitionsBetween(P,B),re=this.transitionsBetween(T,$)+this.transitionsBetween(P,$);return W>re?B:$}shiftToModuleCenter(l){let u=l[0],f=l[1],p=l[2],b=l[3],E=this.transitionsBetween(u,b)+1,S=this.transitionsBetween(p,b)+1,T=Tr.shiftPoint(u,f,S*4),P=Tr.shiftPoint(p,f,E*4);E=this.transitionsBetween(T,b)+1,S=this.transitionsBetween(P,b)+1,(E&1)===1&&(E+=1),(S&1)===1&&(S+=1);let B=(u.getX()+f.getX()+p.getX()+b.getX())/4,$=(u.getY()+f.getY()+p.getY()+b.getY())/4;u=Tr.moveAway(u,B,$),f=Tr.moveAway(f,B,$),p=Tr.moveAway(p,B,$),b=Tr.moveAway(b,B,$);let W,re;return T=Tr.shiftPoint(u,f,S*4),T=Tr.shiftPoint(T,b,E*4),W=Tr.shiftPoint(f,u,S*4),W=Tr.shiftPoint(W,p,E*4),P=Tr.shiftPoint(p,b,S*4),P=Tr.shiftPoint(P,f,E*4),re=Tr.shiftPoint(b,p,S*4),re=Tr.shiftPoint(re,u,E*4),[T,W,P,re]}isValid(l){return l.getX()>=0&&l.getX()<this.image.getWidth()&&l.getY()>0&&l.getY()<this.image.getHeight()}static sampleGrid(l,u,f,p,b,E,S){return $r.getInstance().sampleGrid(l,E,S,.5,.5,E-.5,.5,E-.5,S-.5,.5,S-.5,u.getX(),u.getY(),b.getX(),b.getY(),p.getX(),p.getY(),f.getX(),f.getY())}transitionsBetween(l,u){let f=Math.trunc(l.getX()),p=Math.trunc(l.getY()),b=Math.trunc(u.getX()),E=Math.trunc(u.getY()),S=Math.abs(E-p)>Math.abs(b-f);if(S){let de=f;f=p,p=de,de=b,b=E,E=de}let T=Math.abs(b-f),P=Math.abs(E-p),B=-T/2,$=p<E?1:-1,W=f<b?1:-1,re=0,ue=this.image.get(S?p:f,S?f:p);for(let de=f,Ee=p;de!==b;de+=W){let _e=this.image.get(S?Ee:de,S?de:Ee);if(_e!==ue&&(re++,ue=_e),B+=P,B>0){if(Ee===E)break;Ee+=$,B-=T}}return re}}class Fs{constructor(){this.decoder=new h1}decode(l,u=null){let f,p;if(u!=null&&u.has(z.PURE_BARCODE)){const P=Fs.extractPureBits(l.getBlackMatrix());f=this.decoder.decode(P),p=Fs.NO_POINTS}else{const P=new Tr(l.getBlackMatrix()).detect();f=this.decoder.decode(P.getBits()),p=P.getPoints()}const b=f.getRawBytes(),E=new ce(f.getText(),b,8*b.length,p,ie.DATA_MATRIX,k.currentTimeMillis()),S=f.getByteSegments();S!=null&&E.putMetadata(He.BYTE_SEGMENTS,S);const T=f.getECLevel();return T!=null&&E.putMetadata(He.ERROR_CORRECTION_LEVEL,T),E}reset(){}static extractPureBits(l){const u=l.getTopLeftOnBit(),f=l.getBottomRightOnBit();if(u==null||f==null)throw new ae;const p=this.moduleSize(u,l);let b=u[1];const E=f[1];let S=u[0];const P=(f[0]-S+1)/p,B=(E-b+1)/p;if(P<=0||B<=0)throw new ae;const $=p/2;b+=$,S+=$;const W=new xe(P,B);for(let re=0;re<B;re++){const ue=b+re*p;for(let de=0;de<P;de++)l.get(S+de*p,ue)&&W.set(de,re)}return W}static moduleSize(l,u){const f=u.getWidth();let p=l[0];const b=l[1];for(;p<f&&u.get(p,b);)p++;if(p===f)throw new ae;const E=p-l[0];if(E===0)throw new ae;return E}}Fs.NO_POINTS=[];class Fc extends fe{constructor(l=500){super(new Fs,l)}}var kl;(function(q){q[q.L=0]="L",q[q.M=1]="M",q[q.Q=2]="Q",q[q.H=3]="H"})(kl||(kl={}));class Ft{constructor(l,u,f){this.value=l,this.stringValue=u,this.bits=f,Ft.FOR_BITS.set(f,this),Ft.FOR_VALUE.set(l,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(l){switch(l){case"L":return Ft.L;case"M":return Ft.M;case"Q":return Ft.Q;case"H":return Ft.H;default:throw new y(l+"not available")}}toString(){return this.stringValue}equals(l){if(!(l instanceof Ft))return!1;const u=l;return this.value===u.value}static forBits(l){if(l<0||l>=Ft.FOR_BITS.size)throw new w;return Ft.FOR_BITS.get(l)}}Ft.FOR_BITS=new Map,Ft.FOR_VALUE=new Map,Ft.L=new Ft(kl.L,"L",1),Ft.M=new Ft(kl.M,"M",0),Ft.Q=new Ft(kl.Q,"Q",3),Ft.H=new Ft(kl.H,"H",2);class pn{constructor(l){this.errorCorrectionLevel=Ft.forBits(l>>3&3),this.dataMask=l&7}static numBitsDiffering(l,u){return I.bitCount(l^u)}static decodeFormatInformation(l,u){const f=pn.doDecodeFormatInformation(l,u);return f!==null?f:pn.doDecodeFormatInformation(l^pn.FORMAT_INFO_MASK_QR,u^pn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(l,u){let f=Number.MAX_SAFE_INTEGER,p=0;for(const b of pn.FORMAT_INFO_DECODE_LOOKUP){const E=b[0];if(E===l||E===u)return new pn(b[1]);let S=pn.numBitsDiffering(l,E);S<f&&(p=b[1],f=S),l!==u&&(S=pn.numBitsDiffering(u,E),S<f&&(p=b[1],f=S))}return f<=3?new pn(p):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(l){if(!(l instanceof pn))return!1;const u=l;return this.errorCorrectionLevel===u.errorCorrectionLevel&&this.dataMask===u.dataMask}}pn.FORMAT_INFO_MASK_QR=21522,pn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ne{constructor(l,...u){this.ecCodewordsPerBlock=l,this.ecBlocks=u}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let l=0;const u=this.ecBlocks;for(const f of u)l+=f.getCount();return l}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class J{constructor(l,u){this.count=l,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class dt{constructor(l,u,...f){this.versionNumber=l,this.alignmentPatternCenters=u,this.ecBlocks=f;let p=0;const b=f[0].getECCodewordsPerBlock(),E=f[0].getECBlocks();for(const S of E)p+=S.getCount()*(S.getDataCodewords()+b);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(l){return this.ecBlocks[l.getValue()]}static getProvisionalVersionForDimension(l){if(l%4!==1)throw new L;try{return this.getVersionForNumber((l-17)/4)}catch{throw new L}}static getVersionForNumber(l){if(l<1||l>40)throw new w;return dt.VERSIONS[l-1]}static decodeVersionInformation(l){let u=Number.MAX_SAFE_INTEGER,f=0;for(let p=0;p<dt.VERSION_DECODE_INFO.length;p++){const b=dt.VERSION_DECODE_INFO[p];if(b===l)return dt.getVersionForNumber(p+7);const E=pn.numBitsDiffering(l,b);E<u&&(f=p+7,u=E)}return u<=3?dt.getVersionForNumber(f):null}buildFunctionPattern(){const l=this.getDimensionForVersion(),u=new xe(l);u.setRegion(0,0,9,9),u.setRegion(l-8,0,8,9),u.setRegion(0,l-8,9,8);const f=this.alignmentPatternCenters.length;for(let p=0;p<f;p++){const b=this.alignmentPatternCenters[p]-2;for(let E=0;E<f;E++)p===0&&(E===0||E===f-1)||p===f-1&&E===0||u.setRegion(this.alignmentPatternCenters[E]-2,b,5,5)}return u.setRegion(6,9,1,l-17),u.setRegion(9,6,l-17,1),this.versionNumber>6&&(u.setRegion(l-11,0,3,6),u.setRegion(0,l-11,6,3)),u}toString(){return""+this.versionNumber}}dt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),dt.VERSIONS=[new dt(1,new Int32Array(0),new Ne(7,new J(1,19)),new Ne(10,new J(1,16)),new Ne(13,new J(1,13)),new Ne(17,new J(1,9))),new dt(2,Int32Array.from([6,18]),new Ne(10,new J(1,34)),new Ne(16,new J(1,28)),new Ne(22,new J(1,22)),new Ne(28,new J(1,16))),new dt(3,Int32Array.from([6,22]),new Ne(15,new J(1,55)),new Ne(26,new J(1,44)),new Ne(18,new J(2,17)),new Ne(22,new J(2,13))),new dt(4,Int32Array.from([6,26]),new Ne(20,new J(1,80)),new Ne(18,new J(2,32)),new Ne(26,new J(2,24)),new Ne(16,new J(4,9))),new dt(5,Int32Array.from([6,30]),new Ne(26,new J(1,108)),new Ne(24,new J(2,43)),new Ne(18,new J(2,15),new J(2,16)),new Ne(22,new J(2,11),new J(2,12))),new dt(6,Int32Array.from([6,34]),new Ne(18,new J(2,68)),new Ne(16,new J(4,27)),new Ne(24,new J(4,19)),new Ne(28,new J(4,15))),new dt(7,Int32Array.from([6,22,38]),new Ne(20,new J(2,78)),new Ne(18,new J(4,31)),new Ne(18,new J(2,14),new J(4,15)),new Ne(26,new J(4,13),new J(1,14))),new dt(8,Int32Array.from([6,24,42]),new Ne(24,new J(2,97)),new Ne(22,new J(2,38),new J(2,39)),new Ne(22,new J(4,18),new J(2,19)),new Ne(26,new J(4,14),new J(2,15))),new dt(9,Int32Array.from([6,26,46]),new Ne(30,new J(2,116)),new Ne(22,new J(3,36),new J(2,37)),new Ne(20,new J(4,16),new J(4,17)),new Ne(24,new J(4,12),new J(4,13))),new dt(10,Int32Array.from([6,28,50]),new Ne(18,new J(2,68),new J(2,69)),new Ne(26,new J(4,43),new J(1,44)),new Ne(24,new J(6,19),new J(2,20)),new Ne(28,new J(6,15),new J(2,16))),new dt(11,Int32Array.from([6,30,54]),new Ne(20,new J(4,81)),new Ne(30,new J(1,50),new J(4,51)),new Ne(28,new J(4,22),new J(4,23)),new Ne(24,new J(3,12),new J(8,13))),new dt(12,Int32Array.from([6,32,58]),new Ne(24,new J(2,92),new J(2,93)),new Ne(22,new J(6,36),new J(2,37)),new Ne(26,new J(4,20),new J(6,21)),new Ne(28,new J(7,14),new J(4,15))),new dt(13,Int32Array.from([6,34,62]),new Ne(26,new J(4,107)),new Ne(22,new J(8,37),new J(1,38)),new Ne(24,new J(8,20),new J(4,21)),new Ne(22,new J(12,11),new J(4,12))),new dt(14,Int32Array.from([6,26,46,66]),new Ne(30,new J(3,115),new J(1,116)),new Ne(24,new J(4,40),new J(5,41)),new Ne(20,new J(11,16),new J(5,17)),new Ne(24,new J(11,12),new J(5,13))),new dt(15,Int32Array.from([6,26,48,70]),new Ne(22,new J(5,87),new J(1,88)),new Ne(24,new J(5,41),new J(5,42)),new Ne(30,new J(5,24),new J(7,25)),new Ne(24,new J(11,12),new J(7,13))),new dt(16,Int32Array.from([6,26,50,74]),new Ne(24,new J(5,98),new J(1,99)),new Ne(28,new J(7,45),new J(3,46)),new Ne(24,new J(15,19),new J(2,20)),new Ne(30,new J(3,15),new J(13,16))),new dt(17,Int32Array.from([6,30,54,78]),new Ne(28,new J(1,107),new J(5,108)),new Ne(28,new J(10,46),new J(1,47)),new Ne(28,new J(1,22),new J(15,23)),new Ne(28,new J(2,14),new J(17,15))),new dt(18,Int32Array.from([6,30,56,82]),new Ne(30,new J(5,120),new J(1,121)),new Ne(26,new J(9,43),new J(4,44)),new Ne(28,new J(17,22),new J(1,23)),new Ne(28,new J(2,14),new J(19,15))),new dt(19,Int32Array.from([6,30,58,86]),new Ne(28,new J(3,113),new J(4,114)),new Ne(26,new J(3,44),new J(11,45)),new Ne(26,new J(17,21),new J(4,22)),new Ne(26,new J(9,13),new J(16,14))),new dt(20,Int32Array.from([6,34,62,90]),new Ne(28,new J(3,107),new J(5,108)),new Ne(26,new J(3,41),new J(13,42)),new Ne(30,new J(15,24),new J(5,25)),new Ne(28,new J(15,15),new J(10,16))),new dt(21,Int32Array.from([6,28,50,72,94]),new Ne(28,new J(4,116),new J(4,117)),new Ne(26,new J(17,42)),new Ne(28,new J(17,22),new J(6,23)),new Ne(30,new J(19,16),new J(6,17))),new dt(22,Int32Array.from([6,26,50,74,98]),new Ne(28,new J(2,111),new J(7,112)),new Ne(28,new J(17,46)),new Ne(30,new J(7,24),new J(16,25)),new Ne(24,new J(34,13))),new dt(23,Int32Array.from([6,30,54,78,102]),new Ne(30,new J(4,121),new J(5,122)),new Ne(28,new J(4,47),new J(14,48)),new Ne(30,new J(11,24),new J(14,25)),new Ne(30,new J(16,15),new J(14,16))),new dt(24,Int32Array.from([6,28,54,80,106]),new Ne(30,new J(6,117),new J(4,118)),new Ne(28,new J(6,45),new J(14,46)),new Ne(30,new J(11,24),new J(16,25)),new Ne(30,new J(30,16),new J(2,17))),new dt(25,Int32Array.from([6,32,58,84,110]),new Ne(26,new J(8,106),new J(4,107)),new Ne(28,new J(8,47),new J(13,48)),new Ne(30,new J(7,24),new J(22,25)),new Ne(30,new J(22,15),new J(13,16))),new dt(26,Int32Array.from([6,30,58,86,114]),new Ne(28,new J(10,114),new J(2,115)),new Ne(28,new J(19,46),new J(4,47)),new Ne(28,new J(28,22),new J(6,23)),new Ne(30,new J(33,16),new J(4,17))),new dt(27,Int32Array.from([6,34,62,90,118]),new Ne(30,new J(8,122),new J(4,123)),new Ne(28,new J(22,45),new J(3,46)),new Ne(30,new J(8,23),new J(26,24)),new Ne(30,new J(12,15),new J(28,16))),new dt(28,Int32Array.from([6,26,50,74,98,122]),new Ne(30,new J(3,117),new J(10,118)),new Ne(28,new J(3,45),new J(23,46)),new Ne(30,new J(4,24),new J(31,25)),new Ne(30,new J(11,15),new J(31,16))),new dt(29,Int32Array.from([6,30,54,78,102,126]),new Ne(30,new J(7,116),new J(7,117)),new Ne(28,new J(21,45),new J(7,46)),new Ne(30,new J(1,23),new J(37,24)),new Ne(30,new J(19,15),new J(26,16))),new dt(30,Int32Array.from([6,26,52,78,104,130]),new Ne(30,new J(5,115),new J(10,116)),new Ne(28,new J(19,47),new J(10,48)),new Ne(30,new J(15,24),new J(25,25)),new Ne(30,new J(23,15),new J(25,16))),new dt(31,Int32Array.from([6,30,56,82,108,134]),new Ne(30,new J(13,115),new J(3,116)),new Ne(28,new J(2,46),new J(29,47)),new Ne(30,new J(42,24),new J(1,25)),new Ne(30,new J(23,15),new J(28,16))),new dt(32,Int32Array.from([6,34,60,86,112,138]),new Ne(30,new J(17,115)),new Ne(28,new J(10,46),new J(23,47)),new Ne(30,new J(10,24),new J(35,25)),new Ne(30,new J(19,15),new J(35,16))),new dt(33,Int32Array.from([6,30,58,86,114,142]),new Ne(30,new J(17,115),new J(1,116)),new Ne(28,new J(14,46),new J(21,47)),new Ne(30,new J(29,24),new J(19,25)),new Ne(30,new J(11,15),new J(46,16))),new dt(34,Int32Array.from([6,34,62,90,118,146]),new Ne(30,new J(13,115),new J(6,116)),new Ne(28,new J(14,46),new J(23,47)),new Ne(30,new J(44,24),new J(7,25)),new Ne(30,new J(59,16),new J(1,17))),new dt(35,Int32Array.from([6,30,54,78,102,126,150]),new Ne(30,new J(12,121),new J(7,122)),new Ne(28,new J(12,47),new J(26,48)),new Ne(30,new J(39,24),new J(14,25)),new Ne(30,new J(22,15),new J(41,16))),new dt(36,Int32Array.from([6,24,50,76,102,128,154]),new Ne(30,new J(6,121),new J(14,122)),new Ne(28,new J(6,47),new J(34,48)),new Ne(30,new J(46,24),new J(10,25)),new Ne(30,new J(2,15),new J(64,16))),new dt(37,Int32Array.from([6,28,54,80,106,132,158]),new Ne(30,new J(17,122),new J(4,123)),new Ne(28,new J(29,46),new J(14,47)),new Ne(30,new J(49,24),new J(10,25)),new Ne(30,new J(24,15),new J(46,16))),new dt(38,Int32Array.from([6,32,58,84,110,136,162]),new Ne(30,new J(4,122),new J(18,123)),new Ne(28,new J(13,46),new J(32,47)),new Ne(30,new J(48,24),new J(14,25)),new Ne(30,new J(42,15),new J(32,16))),new dt(39,Int32Array.from([6,26,54,82,110,138,166]),new Ne(30,new J(20,117),new J(4,118)),new Ne(28,new J(40,47),new J(7,48)),new Ne(30,new J(43,24),new J(22,25)),new Ne(30,new J(10,15),new J(67,16))),new dt(40,Int32Array.from([6,30,58,86,114,142,170]),new Ne(30,new J(19,118),new J(6,119)),new Ne(28,new J(18,47),new J(31,48)),new Ne(30,new J(34,24),new J(34,25)),new Ne(30,new J(20,15),new J(61,16)))];var an;(function(q){q[q.DATA_MASK_000=0]="DATA_MASK_000",q[q.DATA_MASK_001=1]="DATA_MASK_001",q[q.DATA_MASK_010=2]="DATA_MASK_010",q[q.DATA_MASK_011=3]="DATA_MASK_011",q[q.DATA_MASK_100=4]="DATA_MASK_100",q[q.DATA_MASK_101=5]="DATA_MASK_101",q[q.DATA_MASK_110=6]="DATA_MASK_110",q[q.DATA_MASK_111=7]="DATA_MASK_111"})(an||(an={}));class la{constructor(l,u){this.value=l,this.isMasked=u}unmaskBitMatrix(l,u){for(let f=0;f<u;f++)for(let p=0;p<u;p++)this.isMasked(f,p)&&l.flip(p,f)}}la.values=new Map([[an.DATA_MASK_000,new la(an.DATA_MASK_000,(q,l)=>(q+l&1)===0)],[an.DATA_MASK_001,new la(an.DATA_MASK_001,(q,l)=>(q&1)===0)],[an.DATA_MASK_010,new la(an.DATA_MASK_010,(q,l)=>l%3===0)],[an.DATA_MASK_011,new la(an.DATA_MASK_011,(q,l)=>(q+l)%3===0)],[an.DATA_MASK_100,new la(an.DATA_MASK_100,(q,l)=>(Math.floor(q/2)+Math.floor(l/3)&1)===0)],[an.DATA_MASK_101,new la(an.DATA_MASK_101,(q,l)=>q*l%6===0)],[an.DATA_MASK_110,new la(an.DATA_MASK_110,(q,l)=>q*l%6<3)],[an.DATA_MASK_111,new la(an.DATA_MASK_111,(q,l)=>(q+l+q*l%3&1)===0)]]);class Ml{constructor(l){const u=l.getHeight();if(u<21||(u&3)!==1)throw new L;this.bitMatrix=l}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let l=0;for(let b=0;b<6;b++)l=this.copyBit(b,8,l);l=this.copyBit(7,8,l),l=this.copyBit(8,8,l),l=this.copyBit(8,7,l);for(let b=5;b>=0;b--)l=this.copyBit(8,b,l);const u=this.bitMatrix.getHeight();let f=0;const p=u-7;for(let b=u-1;b>=p;b--)f=this.copyBit(8,b,f);for(let b=u-8;b<u;b++)f=this.copyBit(b,8,f);if(this.parsedFormatInfo=pn.decodeFormatInformation(l,f),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const l=this.bitMatrix.getHeight(),u=Math.floor((l-17)/4);if(u<=6)return dt.getVersionForNumber(u);let f=0;const p=l-11;for(let E=5;E>=0;E--)for(let S=l-9;S>=p;S--)f=this.copyBit(S,E,f);let b=dt.decodeVersionInformation(f);if(b!==null&&b.getDimensionForVersion()===l)return this.parsedVersion=b,b;f=0;for(let E=5;E>=0;E--)for(let S=l-9;S>=p;S--)f=this.copyBit(E,S,f);if(b=dt.decodeVersionInformation(f),b!==null&&b.getDimensionForVersion()===l)return this.parsedVersion=b,b;throw new L}copyBit(l,u,f){return(this.isMirror?this.bitMatrix.get(u,l):this.bitMatrix.get(l,u))?f<<1|1:f<<1}readCodewords(){const l=this.readFormatInformation(),u=this.readVersion(),f=la.values.get(l.getDataMask()),p=this.bitMatrix.getHeight();f.unmaskBitMatrix(this.bitMatrix,p);const b=u.buildFunctionPattern();let E=!0;const S=new Uint8Array(u.getTotalCodewords());let T=0,P=0,B=0;for(let $=p-1;$>0;$-=2){$===6&&$--;for(let W=0;W<p;W++){const re=E?p-1-W:W;for(let ue=0;ue<2;ue++)b.get($-ue,re)||(B++,P<<=1,this.bitMatrix.get($-ue,re)&&(P|=1),B===8&&(S[T++]=P,B=0,P=0))}E=!E}if(T!==u.getTotalCodewords())throw new L;return S}remask(){if(this.parsedFormatInfo===null)return;const l=la.values[this.parsedFormatInfo.getDataMask()],u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u)}setMirror(l){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=l}mirror(){const l=this.bitMatrix;for(let u=0,f=l.getWidth();u<f;u++)for(let p=u+1,b=l.getHeight();p<b;p++)l.get(u,p)!==l.get(p,u)&&(l.flip(p,u),l.flip(u,p))}}class xd{constructor(l,u){this.numDataCodewords=l,this.codewords=u}static getDataBlocks(l,u,f){if(l.length!==u.getTotalCodewords())throw new w;const p=u.getECBlocksForLevel(f);let b=0;const E=p.getECBlocks();for(const ue of E)b+=ue.getCount();const S=new Array(b);let T=0;for(const ue of E)for(let de=0;de<ue.getCount();de++){const Ee=ue.getDataCodewords(),_e=p.getECCodewordsPerBlock()+Ee;S[T++]=new xd(Ee,new Uint8Array(_e))}const P=S[0].codewords.length;let B=S.length-1;for(;B>=0&&S[B].codewords.length!==P;)B--;B++;const $=P-p.getECCodewordsPerBlock();let W=0;for(let ue=0;ue<$;ue++)for(let de=0;de<T;de++)S[de].codewords[ue]=l[W++];for(let ue=B;ue<T;ue++)S[ue].codewords[$]=l[W++];const re=S[0].codewords.length;for(let ue=$;ue<re;ue++)for(let de=0;de<T;de++){const Ee=de<B?ue:ue+1;S[de].codewords[Ee]=l[W++]}return S}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var oa;(function(q){q[q.TERMINATOR=0]="TERMINATOR",q[q.NUMERIC=1]="NUMERIC",q[q.ALPHANUMERIC=2]="ALPHANUMERIC",q[q.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",q[q.BYTE=4]="BYTE",q[q.ECI=5]="ECI",q[q.KANJI=6]="KANJI",q[q.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",q[q.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",q[q.HANZI=9]="HANZI"})(oa||(oa={}));class gt{constructor(l,u,f,p){this.value=l,this.stringValue=u,this.characterCountBitsForVersions=f,this.bits=p,gt.FOR_BITS.set(p,this),gt.FOR_VALUE.set(l,this)}static forBits(l){const u=gt.FOR_BITS.get(l);if(u===void 0)throw new w;return u}getCharacterCountBits(l){const u=l.getVersionNumber();let f;return u<=9?f=0:u<=26?f=1:f=2,this.characterCountBitsForVersions[f]}getValue(){return this.value}getBits(){return this.bits}equals(l){if(!(l instanceof gt))return!1;const u=l;return this.value===u.value}toString(){return this.stringValue}}gt.FOR_BITS=new Map,gt.FOR_VALUE=new Map,gt.TERMINATOR=new gt(oa.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),gt.NUMERIC=new gt(oa.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),gt.ALPHANUMERIC=new gt(oa.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),gt.STRUCTURED_APPEND=new gt(oa.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),gt.BYTE=new gt(oa.BYTE,"BYTE",Int32Array.from([8,16,16]),4),gt.ECI=new gt(oa.ECI,"ECI",Int32Array.from([0,0,0]),7),gt.KANJI=new gt(oa.KANJI,"KANJI",Int32Array.from([8,10,12]),8),gt.FNC1_FIRST_POSITION=new gt(oa.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),gt.FNC1_SECOND_POSITION=new gt(oa.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),gt.HANZI=new gt(oa.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class pr{static decode(l,u,f,p){const b=new Va(l);let E=new he;const S=new Array;let T=-1,P=-1;try{let B=null,$=!1,W;do{if(b.available()<4)W=gt.TERMINATOR;else{const re=b.readBits(4);W=gt.forBits(re)}switch(W){case gt.TERMINATOR:break;case gt.FNC1_FIRST_POSITION:case gt.FNC1_SECOND_POSITION:$=!0;break;case gt.STRUCTURED_APPEND:if(b.available()<16)throw new L;T=b.readBits(8),P=b.readBits(8);break;case gt.ECI:const re=pr.parseECIValue(b);if(B=V.getCharacterSetECIByValue(re),B===null)throw new L;break;case gt.HANZI:const ue=b.readBits(4),de=b.readBits(W.getCharacterCountBits(u));ue===pr.GB2312_SUBSET&&pr.decodeHanziSegment(b,E,de);break;default:const Ee=b.readBits(W.getCharacterCountBits(u));switch(W){case gt.NUMERIC:pr.decodeNumericSegment(b,E,Ee);break;case gt.ALPHANUMERIC:pr.decodeAlphanumericSegment(b,E,Ee,$);break;case gt.BYTE:pr.decodeByteSegment(b,E,Ee,B,S,p);break;case gt.KANJI:pr.decodeKanjiSegment(b,E,Ee);break;default:throw new L}break}}while(W!==gt.TERMINATOR)}catch{throw new L}return new ve(l,E.toString(),S.length===0?null:S,f===null?null:f.toString(),T,P)}static decodeHanziSegment(l,u,f){if(f*13>l.available())throw new L;const p=new Uint8Array(2*f);let b=0;for(;f>0;){const E=l.readBits(13);let S=E/96<<8&4294967295|E%96;S<959?S+=41377:S+=42657,p[b]=S>>8&255,p[b+1]=S&255,b+=2,f--}try{u.append(Y.decode(p,X.GB2312))}catch(E){throw new L(E)}}static decodeKanjiSegment(l,u,f){if(f*13>l.available())throw new L;const p=new Uint8Array(2*f);let b=0;for(;f>0;){const E=l.readBits(13);let S=E/192<<8&4294967295|E%192;S<7936?S+=33088:S+=49472,p[b]=S>>8,p[b+1]=S,b+=2,f--}try{u.append(Y.decode(p,X.SHIFT_JIS))}catch(E){throw new L(E)}}static decodeByteSegment(l,u,f,p,b,E){if(8*f>l.available())throw new L;const S=new Uint8Array(f);for(let P=0;P<f;P++)S[P]=l.readBits(8);let T;p===null?T=X.guessEncoding(S,E):T=p.getName();try{u.append(Y.decode(S,T))}catch(P){throw new L(P)}b.push(S)}static toAlphaNumericChar(l){if(l>=pr.ALPHANUMERIC_CHARS.length)throw new L;return pr.ALPHANUMERIC_CHARS[l]}static decodeAlphanumericSegment(l,u,f,p){const b=u.length();for(;f>1;){if(l.available()<11)throw new L;const E=l.readBits(11);u.append(pr.toAlphaNumericChar(Math.floor(E/45))),u.append(pr.toAlphaNumericChar(E%45)),f-=2}if(f===1){if(l.available()<6)throw new L;u.append(pr.toAlphaNumericChar(l.readBits(6)))}if(p)for(let E=b;E<u.length();E++)u.charAt(E)==="%"&&(E<u.length()-1&&u.charAt(E+1)==="%"?u.deleteCharAt(E+1):u.setCharAt(E,""))}static decodeNumericSegment(l,u,f){for(;f>=3;){if(l.available()<10)throw new L;const p=l.readBits(10);if(p>=1e3)throw new L;u.append(pr.toAlphaNumericChar(Math.floor(p/100))),u.append(pr.toAlphaNumericChar(Math.floor(p/10)%10)),u.append(pr.toAlphaNumericChar(p%10)),f-=3}if(f===2){if(l.available()<7)throw new L;const p=l.readBits(7);if(p>=100)throw new L;u.append(pr.toAlphaNumericChar(Math.floor(p/10))),u.append(pr.toAlphaNumericChar(p%10))}else if(f===1){if(l.available()<4)throw new L;const p=l.readBits(4);if(p>=10)throw new L;u.append(pr.toAlphaNumericChar(p))}}static parseECIValue(l){const u=l.readBits(8);if((u&128)===0)return u&127;if((u&192)===128){const f=l.readBits(8);return(u&63)<<8&4294967295|f}if((u&224)===192){const f=l.readBits(16);return(u&31)<<16&4294967295|f}throw new L}}pr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",pr.GB2312_SUBSET=1;class zm{constructor(l){this.mirrored=l}isMirrored(){return this.mirrored}applyMirroredCorrection(l){if(!this.mirrored||l===null||l.length<3)return;const u=l[0];l[0]=l[2],l[2]=u}}class g1{constructor(){this.rsDecoder=new ut(je.QR_CODE_FIELD_256)}decodeBooleanArray(l,u){return this.decodeBitMatrix(xe.parseFromBooleanArray(l),u)}decodeBitMatrix(l,u){const f=new Ml(l);let p=null;try{return this.decodeBitMatrixParser(f,u)}catch(b){p=b}try{f.remask(),f.setMirror(!0),f.readVersion(),f.readFormatInformation(),f.mirror();const b=this.decodeBitMatrixParser(f,u);return b.setOther(new zm(!0)),b}catch(b){throw p!==null?p:b}}decodeBitMatrixParser(l,u){const f=l.readVersion(),p=l.readFormatInformation().getErrorCorrectionLevel(),b=l.readCodewords(),E=xd.getDataBlocks(b,f,p);let S=0;for(const B of E)S+=B.getNumDataCodewords();const T=new Uint8Array(S);let P=0;for(const B of E){const $=B.getCodewords(),W=B.getNumDataCodewords();this.correctErrors($,W);for(let re=0;re<W;re++)T[P++]=$[re]}return pr.decode(T,f,p,u)}correctErrors(l,u){const f=new Int32Array(l);try{this.rsDecoder.decode(f,l.length-u)}catch{throw new _}for(let p=0;p<u;p++)l[p]=f[p]}}class Pl extends tt{constructor(l,u,f){super(l,u),this.estimatedModuleSize=f}aboutEquals(l,u,f){if(Math.abs(u-this.getY())<=l&&Math.abs(f-this.getX())<=l){const p=Math.abs(l-this.estimatedModuleSize);return p<=1||p<=this.estimatedModuleSize}return!1}combineEstimate(l,u,f){const p=(this.getX()+u)/2,b=(this.getY()+l)/2,E=(this.estimatedModuleSize+f)/2;return new Pl(p,b,E)}}class Ea{constructor(l,u,f,p,b,E,S){this.image=l,this.startX=u,this.startY=f,this.width=p,this.height=b,this.moduleSize=E,this.resultPointCallback=S,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const l=this.startX,u=this.height,f=this.width,p=l+f,b=this.startY+u/2,E=new Int32Array(3),S=this.image;for(let T=0;T<u;T++){const P=b+((T&1)===0?Math.floor((T+1)/2):-Math.floor((T+1)/2));E[0]=0,E[1]=0,E[2]=0;let B=l;for(;B<p&&!S.get(B,P);)B++;let $=0;for(;B<p;){if(S.get(B,P))if($===1)E[1]++;else if($===2){if(this.foundPatternCross(E)){const W=this.handlePossibleCenter(E,P,B);if(W!==null)return W}E[0]=E[2],E[1]=1,E[2]=0,$=1}else E[++$]++;else $===1&&$++,E[$]++;B++}if(this.foundPatternCross(E)){const W=this.handlePossibleCenter(E,P,p);if(W!==null)return W}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ae}static centerFromEnd(l,u){return u-l[2]-l[1]/2}foundPatternCross(l){const u=this.moduleSize,f=u/2;for(let p=0;p<3;p++)if(Math.abs(u-l[p])>=f)return!1;return!0}crossCheckVertical(l,u,f,p){const b=this.image,E=b.getHeight(),S=this.crossCheckStateCount;S[0]=0,S[1]=0,S[2]=0;let T=l;for(;T>=0&&b.get(u,T)&&S[1]<=f;)S[1]++,T--;if(T<0||S[1]>f)return NaN;for(;T>=0&&!b.get(u,T)&&S[0]<=f;)S[0]++,T--;if(S[0]>f)return NaN;for(T=l+1;T<E&&b.get(u,T)&&S[1]<=f;)S[1]++,T++;if(T===E||S[1]>f)return NaN;for(;T<E&&!b.get(u,T)&&S[2]<=f;)S[2]++,T++;if(S[2]>f)return NaN;const P=S[0]+S[1]+S[2];return 5*Math.abs(P-p)>=2*p?NaN:this.foundPatternCross(S)?Ea.centerFromEnd(S,T):NaN}handlePossibleCenter(l,u,f){const p=l[0]+l[1]+l[2],b=Ea.centerFromEnd(l,f),E=this.crossCheckVertical(u,b,2*l[1],p);if(!isNaN(E)){const S=(l[0]+l[1]+l[2])/3;for(const P of this.possibleCenters)if(P.aboutEquals(S,E,b))return P.combineEstimate(E,b,S);const T=new Pl(b,E,S);this.possibleCenters.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return null}}class Fo extends tt{constructor(l,u,f,p){super(l,u),this.estimatedModuleSize=f,this.count=p,p===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(l,u,f){if(Math.abs(u-this.getY())<=l&&Math.abs(f-this.getX())<=l){const p=Math.abs(l-this.estimatedModuleSize);return p<=1||p<=this.estimatedModuleSize}return!1}combineEstimate(l,u,f){const p=this.count+1,b=(this.count*this.getX()+u)/p,E=(this.count*this.getY()+l)/p,S=(this.count*this.estimatedModuleSize+f)/p;return new Fo(b,E,S,p)}}class bd{constructor(l){this.bottomLeft=l[0],this.topLeft=l[1],this.topRight=l[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Or{constructor(l,u){this.image=l,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=u}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(l){const u=l!=null&&l.get(z.TRY_HARDER)!==void 0,f=l!=null&&l.get(z.PURE_BARCODE)!==void 0,p=this.image,b=p.getHeight(),E=p.getWidth();let S=Math.floor(3*b/(4*Or.MAX_MODULES));(S<Or.MIN_SKIP||u)&&(S=Or.MIN_SKIP);let T=!1;const P=new Int32Array(5);for(let $=S-1;$<b&&!T;$+=S){P[0]=0,P[1]=0,P[2]=0,P[3]=0,P[4]=0;let W=0;for(let re=0;re<E;re++)if(p.get(re,$))(W&1)===1&&W++,P[W]++;else if((W&1)===0)if(W===4)if(Or.foundPatternCross(P)){if(this.handlePossibleCenter(P,$,re,f)===!0)if(S=2,this.hasSkipped===!0)T=this.haveMultiplyConfirmedCenters();else{const de=this.findRowSkip();de>P[2]&&($+=de-P[2]-S,re=E-1)}else{P[0]=P[2],P[1]=P[3],P[2]=P[4],P[3]=1,P[4]=0,W=3;continue}W=0,P[0]=0,P[1]=0,P[2]=0,P[3]=0,P[4]=0}else P[0]=P[2],P[1]=P[3],P[2]=P[4],P[3]=1,P[4]=0,W=3;else P[++W]++;else P[W]++;Or.foundPatternCross(P)&&this.handlePossibleCenter(P,$,E,f)===!0&&(S=P[0],this.hasSkipped&&(T=this.haveMultiplyConfirmedCenters()))}const B=this.selectBestPatterns();return tt.orderBestPatterns(B),new bd(B)}static centerFromEnd(l,u){return u-l[4]-l[3]-l[2]/2}static foundPatternCross(l){let u=0;for(let b=0;b<5;b++){const E=l[b];if(E===0)return!1;u+=E}if(u<7)return!1;const f=u/7,p=f/2;return Math.abs(f-l[0])<p&&Math.abs(f-l[1])<p&&Math.abs(3*f-l[2])<3*p&&Math.abs(f-l[3])<p&&Math.abs(f-l[4])<p}getCrossCheckStateCount(){const l=this.crossCheckStateCount;return l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l}crossCheckDiagonal(l,u,f,p){const b=this.getCrossCheckStateCount();let E=0;const S=this.image;for(;l>=E&&u>=E&&S.get(u-E,l-E);)b[2]++,E++;if(l<E||u<E)return!1;for(;l>=E&&u>=E&&!S.get(u-E,l-E)&&b[1]<=f;)b[1]++,E++;if(l<E||u<E||b[1]>f)return!1;for(;l>=E&&u>=E&&S.get(u-E,l-E)&&b[0]<=f;)b[0]++,E++;if(b[0]>f)return!1;const T=S.getHeight(),P=S.getWidth();for(E=1;l+E<T&&u+E<P&&S.get(u+E,l+E);)b[2]++,E++;if(l+E>=T||u+E>=P)return!1;for(;l+E<T&&u+E<P&&!S.get(u+E,l+E)&&b[3]<f;)b[3]++,E++;if(l+E>=T||u+E>=P||b[3]>=f)return!1;for(;l+E<T&&u+E<P&&S.get(u+E,l+E)&&b[4]<f;)b[4]++,E++;if(b[4]>=f)return!1;const B=b[0]+b[1]+b[2]+b[3]+b[4];return Math.abs(B-p)<2*p&&Or.foundPatternCross(b)}crossCheckVertical(l,u,f,p){const b=this.image,E=b.getHeight(),S=this.getCrossCheckStateCount();let T=l;for(;T>=0&&b.get(u,T);)S[2]++,T--;if(T<0)return NaN;for(;T>=0&&!b.get(u,T)&&S[1]<=f;)S[1]++,T--;if(T<0||S[1]>f)return NaN;for(;T>=0&&b.get(u,T)&&S[0]<=f;)S[0]++,T--;if(S[0]>f)return NaN;for(T=l+1;T<E&&b.get(u,T);)S[2]++,T++;if(T===E)return NaN;for(;T<E&&!b.get(u,T)&&S[3]<f;)S[3]++,T++;if(T===E||S[3]>=f)return NaN;for(;T<E&&b.get(u,T)&&S[4]<f;)S[4]++,T++;if(S[4]>=f)return NaN;const P=S[0]+S[1]+S[2]+S[3]+S[4];return 5*Math.abs(P-p)>=2*p?NaN:Or.foundPatternCross(S)?Or.centerFromEnd(S,T):NaN}crossCheckHorizontal(l,u,f,p){const b=this.image,E=b.getWidth(),S=this.getCrossCheckStateCount();let T=l;for(;T>=0&&b.get(T,u);)S[2]++,T--;if(T<0)return NaN;for(;T>=0&&!b.get(T,u)&&S[1]<=f;)S[1]++,T--;if(T<0||S[1]>f)return NaN;for(;T>=0&&b.get(T,u)&&S[0]<=f;)S[0]++,T--;if(S[0]>f)return NaN;for(T=l+1;T<E&&b.get(T,u);)S[2]++,T++;if(T===E)return NaN;for(;T<E&&!b.get(T,u)&&S[3]<f;)S[3]++,T++;if(T===E||S[3]>=f)return NaN;for(;T<E&&b.get(T,u)&&S[4]<f;)S[4]++,T++;if(S[4]>=f)return NaN;const P=S[0]+S[1]+S[2]+S[3]+S[4];return 5*Math.abs(P-p)>=p?NaN:Or.foundPatternCross(S)?Or.centerFromEnd(S,T):NaN}handlePossibleCenter(l,u,f,p){const b=l[0]+l[1]+l[2]+l[3]+l[4];let E=Or.centerFromEnd(l,f),S=this.crossCheckVertical(u,Math.floor(E),l[2],b);if(!isNaN(S)&&(E=this.crossCheckHorizontal(Math.floor(E),Math.floor(S),l[2],b),!isNaN(E)&&(!p||this.crossCheckDiagonal(Math.floor(S),Math.floor(E),l[2],b)))){const T=b/7;let P=!1;const B=this.possibleCenters;for(let $=0,W=B.length;$<W;$++){const re=B[$];if(re.aboutEquals(T,S,E)){B[$]=re.combineEstimate(S,E,T),P=!0;break}}if(!P){const $=new Fo(E,S,T);B.push($),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint($)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let u=null;for(const f of this.possibleCenters)if(f.getCount()>=Or.CENTER_QUORUM)if(u==null)u=f;else return this.hasSkipped=!0,Math.floor((Math.abs(u.getX()-f.getX())-Math.abs(u.getY()-f.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let l=0,u=0;const f=this.possibleCenters.length;for(const E of this.possibleCenters)E.getCount()>=Or.CENTER_QUORUM&&(l++,u+=E.getEstimatedModuleSize());if(l<3)return!1;const p=u/f;let b=0;for(const E of this.possibleCenters)b+=Math.abs(E.getEstimatedModuleSize()-p);return b<=.05*u}selectBestPatterns(){const l=this.possibleCenters.length;if(l<3)throw new ae;const u=this.possibleCenters;let f;if(l>3){let p=0,b=0;for(const T of this.possibleCenters){const P=T.getEstimatedModuleSize();p+=P,b+=P*P}f=p/l;let E=Math.sqrt(b/l-f*f);u.sort((T,P)=>{const B=Math.abs(P.getEstimatedModuleSize()-f),$=Math.abs(T.getEstimatedModuleSize()-f);return B<$?-1:B>$?1:0});const S=Math.max(.2*f,E);for(let T=0;T<u.length&&u.length>3;T++){const P=u[T];Math.abs(P.getEstimatedModuleSize()-f)>S&&(u.splice(T,1),T--)}}if(u.length>3){let p=0;for(const b of u)p+=b.getEstimatedModuleSize();f=p/u.length,u.sort((b,E)=>{if(E.getCount()===b.getCount()){const S=Math.abs(E.getEstimatedModuleSize()-f),T=Math.abs(b.getEstimatedModuleSize()-f);return S<T?1:S>T?-1:0}else return E.getCount()-b.getCount()}),u.splice(3)}return[u[0],u[1],u[2]]}}Or.CENTER_QUORUM=2,Or.MIN_SKIP=3,Or.MAX_MODULES=57;class os{constructor(l){this.image=l}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(l){this.resultPointCallback=l==null?null:l.get(z.NEED_RESULT_POINT_CALLBACK);const f=new Or(this.image,this.resultPointCallback).find(l);return this.processFinderPatternInfo(f)}processFinderPatternInfo(l){const u=l.getTopLeft(),f=l.getTopRight(),p=l.getBottomLeft(),b=this.calculateModuleSize(u,f,p);if(b<1)throw new ae("No pattern found in proccess finder.");const E=os.computeDimension(u,f,p,b),S=dt.getProvisionalVersionForDimension(E),T=S.getDimensionForVersion()-7;let P=null;if(S.getAlignmentPatternCenters().length>0){const re=f.getX()-u.getX()+p.getX(),ue=f.getY()-u.getY()+p.getY(),de=1-3/T,Ee=Math.floor(u.getX()+de*(re-u.getX())),_e=Math.floor(u.getY()+de*(ue-u.getY()));for(let Qe=4;Qe<=16;Qe<<=1)try{P=this.findAlignmentInRegion(b,Ee,_e,Qe);break}catch(Ke){if(!(Ke instanceof ae))throw Ke}}const B=os.createTransform(u,f,p,P,E),$=os.sampleGrid(this.image,B,E);let W;return P===null?W=[p,u,f]:W=[p,u,f,P],new nt($,W)}static createTransform(l,u,f,p,b){const E=b-3.5;let S,T,P,B;return p!==null?(S=p.getX(),T=p.getY(),P=E-3,B=P):(S=u.getX()-l.getX()+f.getX(),T=u.getY()-l.getY()+f.getY(),P=E,B=E),pt.quadrilateralToQuadrilateral(3.5,3.5,E,3.5,P,B,3.5,E,l.getX(),l.getY(),u.getX(),u.getY(),S,T,f.getX(),f.getY())}static sampleGrid(l,u,f){return $r.getInstance().sampleGridWithTransform(l,f,f,u)}static computeDimension(l,u,f,p){const b=mt.round(tt.distance(l,u)/p),E=mt.round(tt.distance(l,f)/p);let S=Math.floor((b+E)/2)+7;switch(S&3){case 0:S++;break;case 2:S--;break;case 3:throw new ae("Dimensions could be not found.")}return S}calculateModuleSize(l,u,f){return(this.calculateModuleSizeOneWay(l,u)+this.calculateModuleSizeOneWay(l,f))/2}calculateModuleSizeOneWay(l,u){const f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(u.getX()),Math.floor(u.getY())),p=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(u.getX()),Math.floor(u.getY()),Math.floor(l.getX()),Math.floor(l.getY()));return isNaN(f)?p/7:isNaN(p)?f/7:(f+p)/14}sizeOfBlackWhiteBlackRunBothWays(l,u,f,p){let b=this.sizeOfBlackWhiteBlackRun(l,u,f,p),E=1,S=l-(f-l);S<0?(E=l/(l-S),S=0):S>=this.image.getWidth()&&(E=(this.image.getWidth()-1-l)/(S-l),S=this.image.getWidth()-1);let T=Math.floor(u-(p-u)*E);return E=1,T<0?(E=u/(u-T),T=0):T>=this.image.getHeight()&&(E=(this.image.getHeight()-1-u)/(T-u),T=this.image.getHeight()-1),S=Math.floor(l+(S-l)*E),b+=this.sizeOfBlackWhiteBlackRun(l,u,S,T),b-1}sizeOfBlackWhiteBlackRun(l,u,f,p){const b=Math.abs(p-u)>Math.abs(f-l);if(b){let re=l;l=u,u=re,re=f,f=p,p=re}const E=Math.abs(f-l),S=Math.abs(p-u);let T=-E/2;const P=l<f?1:-1,B=u<p?1:-1;let $=0;const W=f+P;for(let re=l,ue=u;re!==W;re+=P){const de=b?ue:re,Ee=b?re:ue;if($===1===this.image.get(de,Ee)){if($===2)return mt.distance(re,ue,l,u);$++}if(T+=S,T>0){if(ue===p)break;ue+=B,T-=E}}return $===2?mt.distance(f+P,p,l,u):NaN}findAlignmentInRegion(l,u,f,p){const b=Math.floor(p*l),E=Math.max(0,u-b),S=Math.min(this.image.getWidth()-1,u+b);if(S-E<l*3)throw new ae("Alignment top exceeds estimated module size.");const T=Math.max(0,f-b),P=Math.min(this.image.getHeight()-1,f+b);if(P-T<l*3)throw new ae("Alignment bottom exceeds estimated module size.");return new Ea(this.image,E,T,S-E,P-T,l,this.resultPointCallback).find()}}class Us{constructor(){this.decoder=new g1}getDecoder(){return this.decoder}decode(l,u){let f,p;if(u!=null&&u.get(z.PURE_BARCODE)!==void 0){const T=Us.extractPureBits(l.getBlackMatrix());f=this.decoder.decodeBitMatrix(T,u),p=Us.NO_POINTS}else{const T=new os(l.getBlackMatrix()).detect(u);f=this.decoder.decodeBitMatrix(T.getBits(),u),p=T.getPoints()}f.getOther()instanceof zm&&f.getOther().applyMirroredCorrection(p);const b=new ce(f.getText(),f.getRawBytes(),void 0,p,ie.QR_CODE,void 0),E=f.getByteSegments();E!==null&&b.putMetadata(He.BYTE_SEGMENTS,E);const S=f.getECLevel();return S!==null&&b.putMetadata(He.ERROR_CORRECTION_LEVEL,S),f.hasStructuredAppend()&&(b.putMetadata(He.STRUCTURED_APPEND_SEQUENCE,f.getStructuredAppendSequenceNumber()),b.putMetadata(He.STRUCTURED_APPEND_PARITY,f.getStructuredAppendParity())),b}reset(){}static extractPureBits(l){const u=l.getTopLeftOnBit(),f=l.getBottomRightOnBit();if(u===null||f===null)throw new ae;const p=this.moduleSize(u,l);let b=u[1],E=f[1],S=u[0],T=f[0];if(S>=T||b>=E)throw new ae;if(E-b!==T-S&&(T=S+(E-b),T>=l.getWidth()))throw new ae;const P=Math.round((T-S+1)/p),B=Math.round((E-b+1)/p);if(P<=0||B<=0)throw new ae;if(B!==P)throw new ae;const $=Math.floor(p/2);b+=$,S+=$;const W=S+Math.floor((P-1)*p)-T;if(W>0){if(W>$)throw new ae;S-=W}const re=b+Math.floor((B-1)*p)-E;if(re>0){if(re>$)throw new ae;b-=re}const ue=new xe(P,B);for(let de=0;de<B;de++){const Ee=b+Math.floor(de*p);for(let _e=0;_e<P;_e++)l.get(S+Math.floor(_e*p),Ee)&&ue.set(_e,de)}return ue}static moduleSize(l,u){const f=u.getHeight(),p=u.getWidth();let b=l[0],E=l[1],S=!0,T=0;for(;b<p&&E<f;){if(S!==u.get(b,E)){if(++T===5)break;S=!S}b++,E++}if(b===p||E===f)throw new ae;return(b-l[0])/7}}Us.NO_POINTS=new Array;class bt{PDF417Common(){}static getBitCountSum(l){return mt.sum(l)}static toIntArray(l){if(l==null||!l.length)return bt.EMPTY_INT_ARRAY;const u=new Int32Array(l.length);let f=0;for(const p of l)u[f++]=p;return u}static getCodeword(l){const u=F.binarySearch(bt.SYMBOL_TABLE,l&262143);return u<0?-1:(bt.CODEWORD_TABLE[u]-1)%bt.NUMBER_OF_CODEWORDS}}bt.NUMBER_OF_CODEWORDS=929,bt.MAX_CODEWORDS_IN_BARCODE=bt.NUMBER_OF_CODEWORDS-1,bt.MIN_ROWS_IN_BARCODE=3,bt.MAX_ROWS_IN_BARCODE=90,bt.MODULES_IN_CODEWORD=17,bt.MODULES_IN_STOP_PATTERN=18,bt.BARS_IN_MODULE=8,bt.EMPTY_INT_ARRAY=new Int32Array([]),bt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),bt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Vm{constructor(l,u){this.bits=l,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class Ct{static detectMultiple(l,u,f){let p=l.getBlackMatrix(),b=Ct.detect(f,p);return b.length||(p=p.clone(),p.rotate180(),b=Ct.detect(f,p)),new Vm(p,b)}static detect(l,u){const f=new Array;let p=0,b=0,E=!1;for(;p<u.getHeight();){const S=Ct.findVertices(u,p,b);if(S[0]==null&&S[3]==null){if(!E)break;E=!1,b=0;for(const T of f)T[1]!=null&&(p=Math.trunc(Math.max(p,T[1].getY()))),T[3]!=null&&(p=Math.max(p,Math.trunc(T[3].getY())));p+=Ct.ROW_STEP;continue}if(E=!0,f.push(S),!l)break;S[2]!=null?(b=Math.trunc(S[2].getX()),p=Math.trunc(S[2].getY())):(b=Math.trunc(S[4].getX()),p=Math.trunc(S[4].getY()))}return f}static findVertices(l,u,f){const p=l.getHeight(),b=l.getWidth(),E=new Array(8);return Ct.copyToResult(E,Ct.findRowsWithPattern(l,p,b,u,f,Ct.START_PATTERN),Ct.INDEXES_START_PATTERN),E[4]!=null&&(f=Math.trunc(E[4].getX()),u=Math.trunc(E[4].getY())),Ct.copyToResult(E,Ct.findRowsWithPattern(l,p,b,u,f,Ct.STOP_PATTERN),Ct.INDEXES_STOP_PATTERN),E}static copyToResult(l,u,f){for(let p=0;p<f.length;p++)l[f[p]]=u[p]}static findRowsWithPattern(l,u,f,p,b,E){const S=new Array(4);let T=!1;const P=new Int32Array(E.length);for(;p<u;p+=Ct.ROW_STEP){let $=Ct.findGuardPattern(l,b,p,f,!1,E,P);if($!=null){for(;p>0;){const W=Ct.findGuardPattern(l,b,--p,f,!1,E,P);if(W!=null)$=W;else{p++;break}}S[0]=new tt($[0],p),S[1]=new tt($[1],p),T=!0;break}}let B=p+1;if(T){let $=0,W=Int32Array.from([Math.trunc(S[0].getX()),Math.trunc(S[1].getX())]);for(;B<u;B++){const re=Ct.findGuardPattern(l,W[0],B,f,!1,E,P);if(re!=null&&Math.abs(W[0]-re[0])<Ct.MAX_PATTERN_DRIFT&&Math.abs(W[1]-re[1])<Ct.MAX_PATTERN_DRIFT)W=re,$=0;else{if($>Ct.SKIPPED_ROW_COUNT_MAX)break;$++}}B-=$+1,S[2]=new tt(W[0],B),S[3]=new tt(W[1],B)}return B-p<Ct.BARCODE_MIN_HEIGHT&&F.fill(S,null),S}static findGuardPattern(l,u,f,p,b,E,S){F.fillWithin(S,0,S.length,0);let T=u,P=0;for(;l.get(T,f)&&T>0&&P++<Ct.MAX_PIXEL_DRIFT;)T--;let B=T,$=0,W=E.length;for(let re=b;B<p;B++)if(l.get(B,f)!==re)S[$]++;else{if($===W-1){if(Ct.patternMatchVariance(S,E,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return new Int32Array([T,B]);T+=S[0]+S[1],k.arraycopy(S,2,S,0,$-1),S[$-1]=0,S[$]=0,$--}else $++;S[$]=1,re=!re}return $===W-1&&Ct.patternMatchVariance(S,E,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE?new Int32Array([T,B-1]):null}static patternMatchVariance(l,u,f){let p=l.length,b=0,E=0;for(let P=0;P<p;P++)b+=l[P],E+=u[P];if(b<E)return 1/0;let S=b/E;f*=S;let T=0;for(let P=0;P<p;P++){let B=l[P],$=u[P]*S,W=B>$?B-$:$-B;if(W>f)return 1/0;T+=W}return T/b}}Ct.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ct.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ct.MAX_AVG_VARIANCE=.42,Ct.MAX_INDIVIDUAL_VARIANCE=.8,Ct.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ct.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ct.MAX_PIXEL_DRIFT=3,Ct.MAX_PATTERN_DRIFT=5,Ct.SKIPPED_ROW_COUNT_MAX=25,Ct.ROW_STEP=5,Ct.BARCODE_MIN_HEIGHT=10;class yr{constructor(l,u){if(u.length===0)throw new w;this.field=l;let f=u.length;if(f>1&&u[0]===0){let p=1;for(;p<f&&u[p]===0;)p++;p===f?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(f-p),k.arraycopy(u,p,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(l){return this.coefficients[this.coefficients.length-1-l]}evaluateAt(l){if(l===0)return this.getCoefficient(0);if(l===1){let p=0;for(let b of this.coefficients)p=this.field.add(p,b);return p}let u=this.coefficients[0],f=this.coefficients.length;for(let p=1;p<f;p++)u=this.field.add(this.field.multiply(l,u),this.coefficients[p]);return u}add(l){if(!this.field.equals(l.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero())return l;if(l.isZero())return this;let u=this.coefficients,f=l.coefficients;if(u.length>f.length){let E=u;u=f,f=E}let p=new Int32Array(f.length),b=f.length-u.length;k.arraycopy(f,0,p,0,b);for(let E=b;E<f.length;E++)p[E]=this.field.add(u[E-b],f[E]);return new yr(this.field,p)}subtract(l){if(!this.field.equals(l.field))throw new w("ModulusPolys do not have same ModulusGF field");return l.isZero()?this:this.add(l.negative())}multiply(l){return l instanceof yr?this.multiplyOther(l):this.multiplyScalar(l)}multiplyOther(l){if(!this.field.equals(l.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero()||l.isZero())return new yr(this.field,new Int32Array([0]));let u=this.coefficients,f=u.length,p=l.coefficients,b=p.length,E=new Int32Array(f+b-1);for(let S=0;S<f;S++){let T=u[S];for(let P=0;P<b;P++)E[S+P]=this.field.add(E[S+P],this.field.multiply(T,p[P]))}return new yr(this.field,E)}negative(){let l=this.coefficients.length,u=new Int32Array(l);for(let f=0;f<l;f++)u[f]=this.field.subtract(0,this.coefficients[f]);return new yr(this.field,u)}multiplyScalar(l){if(l===0)return new yr(this.field,new Int32Array([0]));if(l===1)return this;let u=this.coefficients.length,f=new Int32Array(u);for(let p=0;p<u;p++)f[p]=this.field.multiply(this.coefficients[p],l);return new yr(this.field,f)}multiplyByMonomial(l,u){if(l<0)throw new w;if(u===0)return new yr(this.field,new Int32Array([0]));let f=this.coefficients.length,p=new Int32Array(f+l);for(let b=0;b<f;b++)p[b]=this.field.multiply(this.coefficients[b],u);return new yr(this.field,p)}toString(){let l=new he;for(let u=this.getDegree();u>=0;u--){let f=this.getCoefficient(u);f!==0&&(f<0?(l.append(" - "),f=-f):l.length()>0&&l.append(" + "),(u===0||f!==1)&&l.append(f),u!==0&&(u===1?l.append("x"):(l.append("x^"),l.append(u))))}return l.toString()}}class vd{add(l,u){return(l+u)%this.modulus}subtract(l,u){return(this.modulus+l-u)%this.modulus}exp(l){return this.expTable[l]}log(l){if(l===0)throw new w;return this.logTable[l]}inverse(l){if(l===0)throw new ye;return this.expTable[this.modulus-this.logTable[l]-1]}multiply(l,u){return l===0||u===0?0:this.expTable[(this.logTable[l]+this.logTable[u])%(this.modulus-1)]}getSize(){return this.modulus}equals(l){return l===this}}class Ri extends vd{constructor(l,u){super(),this.modulus=l,this.expTable=new Int32Array(l),this.logTable=new Int32Array(l);let f=1;for(let p=0;p<l;p++)this.expTable[p]=f,f=f*u%l;for(let p=0;p<l-1;p++)this.logTable[this.expTable[p]]=p;this.zero=new yr(this,new Int32Array([0])),this.one=new yr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(l,u){if(l<0)throw new w;if(u===0)return this.zero;let f=new Int32Array(l+1);return f[0]=u,new yr(this,f)}}Ri.PDF417_GF=new Ri(bt.NUMBER_OF_CODEWORDS,3);class js{constructor(){this.field=Ri.PDF417_GF}decode(l,u,f){let p=new yr(this.field,l),b=new Int32Array(u),E=!1;for(let ue=u;ue>0;ue--){let de=p.evaluateAt(this.field.exp(ue));b[u-ue]=de,de!==0&&(E=!0)}if(!E)return 0;let S=this.field.getOne();if(f!=null)for(const ue of f){let de=this.field.exp(l.length-1-ue),Ee=new yr(this.field,new Int32Array([this.field.subtract(0,de),1]));S=S.multiply(Ee)}let T=new yr(this.field,b),P=this.runEuclideanAlgorithm(this.field.buildMonomial(u,1),T,u),B=P[0],$=P[1],W=this.findErrorLocations(B),re=this.findErrorMagnitudes($,B,W);for(let ue=0;ue<W.length;ue++){let de=l.length-1-this.field.log(W[ue]);if(de<0)throw _.getChecksumInstance();l[de]=this.field.subtract(l[de],re[ue])}return W.length}runEuclideanAlgorithm(l,u,f){if(l.getDegree()<u.getDegree()){let W=l;l=u,u=W}let p=l,b=u,E=this.field.getZero(),S=this.field.getOne();for(;b.getDegree()>=Math.round(f/2);){let W=p,re=E;if(p=b,E=S,p.isZero())throw _.getChecksumInstance();b=W;let ue=this.field.getZero(),de=p.getCoefficient(p.getDegree()),Ee=this.field.inverse(de);for(;b.getDegree()>=p.getDegree()&&!b.isZero();){let _e=b.getDegree()-p.getDegree(),Qe=this.field.multiply(b.getCoefficient(b.getDegree()),Ee);ue=ue.add(this.field.buildMonomial(_e,Qe)),b=b.subtract(p.multiplyByMonomial(_e,Qe))}S=ue.multiply(E).subtract(re).negative()}let T=S.getCoefficient(0);if(T===0)throw _.getChecksumInstance();let P=this.field.inverse(T),B=S.multiply(P),$=b.multiply(P);return[B,$]}findErrorLocations(l){let u=l.getDegree(),f=new Int32Array(u),p=0;for(let b=1;b<this.field.getSize()&&p<u;b++)l.evaluateAt(b)===0&&(f[p]=this.field.inverse(b),p++);if(p!==u)throw _.getChecksumInstance();return f}findErrorMagnitudes(l,u,f){let p=u.getDegree(),b=new Int32Array(p);for(let P=1;P<=p;P++)b[p-P]=this.field.multiply(P,u.getCoefficient(P));let E=new yr(this.field,b),S=f.length,T=new Int32Array(S);for(let P=0;P<S;P++){let B=this.field.inverse(f[P]),$=this.field.subtract(0,l.evaluateAt(B)),W=this.field.inverse(E.evaluateAt(B));T[P]=this.field.multiply($,W)}return T}}class zs{constructor(l,u,f,p,b){l instanceof zs?this.constructor_2(l):this.constructor_1(l,u,f,p,b)}constructor_1(l,u,f,p,b){const E=u==null||f==null,S=p==null||b==null;if(E&&S)throw new ae;E?(u=new tt(0,p.getY()),f=new tt(0,b.getY())):S&&(p=new tt(l.getWidth()-1,u.getY()),b=new tt(l.getWidth()-1,f.getY())),this.image=l,this.topLeft=u,this.bottomLeft=f,this.topRight=p,this.bottomRight=b,this.minX=Math.trunc(Math.min(u.getX(),f.getX())),this.maxX=Math.trunc(Math.max(p.getX(),b.getX())),this.minY=Math.trunc(Math.min(u.getY(),p.getY())),this.maxY=Math.trunc(Math.max(f.getY(),b.getY()))}constructor_2(l){this.image=l.image,this.topLeft=l.getTopLeft(),this.bottomLeft=l.getBottomLeft(),this.topRight=l.getTopRight(),this.bottomRight=l.getBottomRight(),this.minX=l.getMinX(),this.maxX=l.getMaxX(),this.minY=l.getMinY(),this.maxY=l.getMaxY()}static merge(l,u){return l==null?u:u==null?l:new zs(l.image,l.topLeft,l.bottomLeft,u.topRight,u.bottomRight)}addMissingRows(l,u,f){let p=this.topLeft,b=this.bottomLeft,E=this.topRight,S=this.bottomRight;if(l>0){let T=f?this.topLeft:this.topRight,P=Math.trunc(T.getY()-l);P<0&&(P=0);let B=new tt(T.getX(),P);f?p=B:E=B}if(u>0){let T=f?this.bottomLeft:this.bottomRight,P=Math.trunc(T.getY()+u);P>=this.image.getHeight()&&(P=this.image.getHeight()-1);let B=new tt(T.getX(),P);f?b=B:S=B}return new zs(this.image,p,b,E,S)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Uc{constructor(l,u,f,p){this.columnCount=l,this.errorCorrectionLevel=p,this.rowCountUpperPart=u,this.rowCountLowerPart=f,this.rowCount=u+f}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Rl{constructor(){this.buffer=""}static form(l,u){let f=-1;function p(E,S,T,P,B,$){if(E==="%%")return"%";if(u[++f]===void 0)return;E=P?parseInt(P.substr(1)):void 0;let W=B?parseInt(B.substr(1)):void 0,re;switch($){case"s":re=u[f];break;case"c":re=u[f][0];break;case"f":re=parseFloat(u[f]).toFixed(E);break;case"p":re=parseFloat(u[f]).toPrecision(E);break;case"e":re=parseFloat(u[f]).toExponential(E);break;case"x":re=parseInt(u[f]).toString(W||16);break;case"d":re=parseFloat(parseInt(u[f],W||10).toPrecision(E)).toFixed(0);break}re=typeof re=="object"?JSON.stringify(re):(+re).toString(W);let ue=parseInt(T),de=T&&T[0]+""=="0"?"0":" ";for(;re.length<ue;)re=S!==void 0?re+de:de+re;return re}let b=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return l.replace(b,p)}format(l,...u){this.buffer+=Rl.form(l,u)}toString(){return this.buffer}}class ci{constructor(l){this.boundingBox=new zs(l),this.codewords=new Array(l.getMaxY()-l.getMinY()+1)}getCodewordNearby(l){let u=this.getCodeword(l);if(u!=null)return u;for(let f=1;f<ci.MAX_NEARBY_DISTANCE;f++){let p=this.imageRowToCodewordIndex(l)-f;if(p>=0&&(u=this.codewords[p],u!=null)||(p=this.imageRowToCodewordIndex(l)+f,p<this.codewords.length&&(u=this.codewords[p],u!=null)))return u}return null}imageRowToCodewordIndex(l){return l-this.boundingBox.getMinY()}setCodeword(l,u){this.codewords[this.imageRowToCodewordIndex(l)]=u}getCodeword(l){return this.codewords[this.imageRowToCodewordIndex(l)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const l=new Rl;let u=0;for(const f of this.codewords){if(f==null){l.format("%3d:    |   %n",u++);continue}l.format("%3d: %3d|%3d%n",u++,f.getRowNumber(),f.getValue())}return l.toString()}}ci.MAX_NEARBY_DISTANCE=5;class ui{constructor(){this.values=new Map}setValue(l){l=Math.trunc(l);let u=this.values.get(l);u==null&&(u=0),u++,this.values.set(l,u)}getValue(){let l=-1,u=new Array;for(const[f,p]of this.values.entries()){const b={getKey:()=>f,getValue:()=>p};b.getValue()>l?(l=b.getValue(),u=[],u.push(b.getKey())):b.getValue()===l&&u.push(b.getKey())}return bt.toIntArray(u)}getConfidence(l){return this.values.get(l)}}class Ed extends ci{constructor(l,u){super(l),this._isLeft=u}setRowNumbers(){for(let l of this.getCodewords())l?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(l){let u=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(u,l);let f=this.getBoundingBox(),p=this._isLeft?f.getTopLeft():f.getTopRight(),b=this._isLeft?f.getBottomLeft():f.getBottomRight(),E=this.imageRowToCodewordIndex(Math.trunc(p.getY())),S=this.imageRowToCodewordIndex(Math.trunc(b.getY())),T=-1,P=1,B=0;for(let $=E;$<S;$++){if(u[$]==null)continue;let W=u[$],re=W.getRowNumber()-T;if(re===0)B++;else if(re===1)P=Math.max(P,B),B=1,T=W.getRowNumber();else if(re<0||W.getRowNumber()>=l.getRowCount()||re>$)u[$]=null;else{let ue;P>2?ue=(P-2)*re:ue=re;let de=ue>=$;for(let Ee=1;Ee<=ue&&!de;Ee++)de=u[$-Ee]!=null;de?u[$]=null:(T=W.getRowNumber(),B=1)}}}getRowHeights(){let l=this.getBarcodeMetadata();if(l==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(l);let u=new Int32Array(l.getRowCount());for(let f of this.getCodewords())if(f!=null){let p=f.getRowNumber();if(p>=u.length)continue;u[p]++}return u}adjustIncompleteIndicatorColumnRowNumbers(l){let u=this.getBoundingBox(),f=this._isLeft?u.getTopLeft():u.getTopRight(),p=this._isLeft?u.getBottomLeft():u.getBottomRight(),b=this.imageRowToCodewordIndex(Math.trunc(f.getY())),E=this.imageRowToCodewordIndex(Math.trunc(p.getY())),S=this.getCodewords(),T=-1;for(let P=b;P<E;P++){if(S[P]==null)continue;let B=S[P];B.setRowNumberAsRowIndicatorColumn();let $=B.getRowNumber()-T;$===0||($===1?T=B.getRowNumber():B.getRowNumber()>=l.getRowCount()?S[P]=null:T=B.getRowNumber())}}getBarcodeMetadata(){let l=this.getCodewords(),u=new ui,f=new ui,p=new ui,b=new ui;for(let S of l){if(S==null)continue;S.setRowNumberAsRowIndicatorColumn();let T=S.getValue()%30,P=S.getRowNumber();switch(this._isLeft||(P+=2),P%3){case 0:f.setValue(T*3+1);break;case 1:b.setValue(T/3),p.setValue(T%3);break;case 2:u.setValue(T+1);break}}if(u.getValue().length===0||f.getValue().length===0||p.getValue().length===0||b.getValue().length===0||u.getValue()[0]<1||f.getValue()[0]+p.getValue()[0]<bt.MIN_ROWS_IN_BARCODE||f.getValue()[0]+p.getValue()[0]>bt.MAX_ROWS_IN_BARCODE)return null;let E=new Uc(u.getValue()[0],f.getValue()[0],p.getValue()[0],b.getValue()[0]);return this.removeIncorrectCodewords(l,E),E}removeIncorrectCodewords(l,u){for(let f=0;f<l.length;f++){let p=l[f];if(l[f]==null)continue;let b=p.getValue()%30,E=p.getRowNumber();if(E>u.getRowCount()){l[f]=null;continue}switch(this._isLeft||(E+=2),E%3){case 0:b*3+1!==u.getRowCountUpperPart()&&(l[f]=null);break;case 1:(Math.trunc(b/3)!==u.getErrorCorrectionLevel()||b%3!==u.getRowCountLowerPart())&&(l[f]=null);break;case 2:b+1!==u.getColumnCount()&&(l[f]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class yn{constructor(l,u){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=l,this.barcodeColumnCount=l.getColumnCount(),this.boundingBox=u,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let l=bt.MAX_CODEWORDS_IN_BARCODE,u;do u=l,l=this.adjustRowNumbersAndGetCount();while(l>0&&l<u);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(l){l?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let l=this.adjustRowNumbersByRow();if(l===0)return 0;for(let u=1;u<this.barcodeColumnCount+1;u++){let f=this.detectionResultColumns[u].getCodewords();for(let p=0;p<f.length;p++)f[p]!=null&&(f[p].hasValidRowNumber()||this.adjustRowNumbers(u,p,f))}return l}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let l=this.detectionResultColumns[0].getCodewords(),u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let f=0;f<l.length;f++)if(l[f]!=null&&u[f]!=null&&l[f].getRowNumber()===u[f].getRowNumber())for(let p=1;p<=this.barcodeColumnCount;p++){let b=this.detectionResultColumns[p].getCodewords()[f];b!=null&&(b.setRowNumber(l[f].getRowNumber()),b.hasValidRowNumber()||(this.detectionResultColumns[p].getCodewords()[f]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let l=0,u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let f=0;f<u.length;f++){if(u[f]==null)continue;let p=u[f].getRowNumber(),b=0;for(let E=this.barcodeColumnCount+1;E>0&&b<this.ADJUST_ROW_NUMBER_SKIP;E--){let S=this.detectionResultColumns[E].getCodewords()[f];S!=null&&(b=yn.adjustRowNumberIfValid(p,b,S),S.hasValidRowNumber()||l++)}}return l}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let l=0,u=this.detectionResultColumns[0].getCodewords();for(let f=0;f<u.length;f++){if(u[f]==null)continue;let p=u[f].getRowNumber(),b=0;for(let E=1;E<this.barcodeColumnCount+1&&b<this.ADJUST_ROW_NUMBER_SKIP;E++){let S=this.detectionResultColumns[E].getCodewords()[f];S!=null&&(b=yn.adjustRowNumberIfValid(p,b,S),S.hasValidRowNumber()||l++)}}return l}static adjustRowNumberIfValid(l,u,f){return f==null||f.hasValidRowNumber()||(f.isValidRowNumber(l)?(f.setRowNumber(l),u=0):++u),u}adjustRowNumbers(l,u,f){if(!this.detectionResultColumns[l-1])return;let p=f[u],b=this.detectionResultColumns[l-1].getCodewords(),E=b;this.detectionResultColumns[l+1]!=null&&(E=this.detectionResultColumns[l+1].getCodewords());let S=new Array(14);S[2]=b[u],S[3]=E[u],u>0&&(S[0]=f[u-1],S[4]=b[u-1],S[5]=E[u-1]),u>1&&(S[8]=f[u-2],S[10]=b[u-2],S[11]=E[u-2]),u<f.length-1&&(S[1]=f[u+1],S[6]=b[u+1],S[7]=E[u+1]),u<f.length-2&&(S[9]=f[u+2],S[12]=b[u+2],S[13]=E[u+2]);for(let T of S)if(yn.adjustRowNumber(p,T))return}static adjustRowNumber(l,u){return u==null?!1:u.hasValidRowNumber()&&u.getBucket()===l.getBucket()?(l.setRowNumber(u.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(l){this.boundingBox=l}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(l,u){this.detectionResultColumns[l]=u}getDetectionResultColumn(l){return this.detectionResultColumns[l]}toString(){let l=this.detectionResultColumns[0];l==null&&(l=this.detectionResultColumns[this.barcodeColumnCount+1]);let u=new Rl;for(let f=0;f<l.getCodewords().length;f++){u.format("CW %3d:",f);for(let p=0;p<this.barcodeColumnCount+2;p++){if(this.detectionResultColumns[p]==null){u.format("    |   ");continue}let b=this.detectionResultColumns[p].getCodewords()[f];if(b==null){u.format("    |   ");continue}u.format(" %3d|%3d",b.getRowNumber(),b.getValue())}u.format("%n")}return u.toString()}}class Ha{constructor(l,u,f,p){this.rowNumber=Ha.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(l),this.endX=Math.trunc(u),this.bucket=Math.trunc(f),this.value=Math.trunc(p)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(l){return l!==Ha.BARCODE_ROW_UNKNOWN&&this.bucket===l%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(l){this.rowNumber=l}toString(){return this.rowNumber+"|"+this.value}}Ha.BARCODE_ROW_UNKNOWN=-1;class Tn{static initialize(){for(let l=0;l<bt.SYMBOL_TABLE.length;l++){let u=bt.SYMBOL_TABLE[l],f=u&1;for(let p=0;p<bt.BARS_IN_MODULE;p++){let b=0;for(;(u&1)===f;)b+=1,u>>=1;f=u&1,Tn.RATIOS_TABLE[l]||(Tn.RATIOS_TABLE[l]=new Array(bt.BARS_IN_MODULE)),Tn.RATIOS_TABLE[l][bt.BARS_IN_MODULE-p-1]=Math.fround(b/bt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(l){let u=Tn.getDecodedCodewordValue(Tn.sampleBitCounts(l));return u!==-1?u:Tn.getClosestDecodedValue(l)}static sampleBitCounts(l){let u=mt.sum(l),f=new Int32Array(bt.BARS_IN_MODULE),p=0,b=0;for(let E=0;E<bt.MODULES_IN_CODEWORD;E++){let S=u/(2*bt.MODULES_IN_CODEWORD)+E*u/bt.MODULES_IN_CODEWORD;b+l[p]<=S&&(b+=l[p],p++),f[p]++}return f}static getDecodedCodewordValue(l){let u=Tn.getBitValue(l);return bt.getCodeword(u)===-1?-1:u}static getBitValue(l){let u=0;for(let f=0;f<l.length;f++)for(let p=0;p<l[f];p++)u=u<<1|(f%2===0?1:0);return Math.trunc(u)}static getClosestDecodedValue(l){let u=mt.sum(l),f=new Array(bt.BARS_IN_MODULE);if(u>1)for(let E=0;E<f.length;E++)f[E]=Math.fround(l[E]/u);let p=Er.MAX_VALUE,b=-1;this.bSymbolTableReady||Tn.initialize();for(let E=0;E<Tn.RATIOS_TABLE.length;E++){let S=0,T=Tn.RATIOS_TABLE[E];for(let P=0;P<bt.BARS_IN_MODULE;P++){let B=Math.fround(T[P]-f[P]);if(S+=Math.fround(B*B),S>=p)break}S<p&&(p=S,b=bt.SYMBOL_TABLE[E])}return b}}Tn.bSymbolTableReady=!1,Tn.RATIOS_TABLE=new Array(bt.SYMBOL_TABLE.length).map(q=>new Array(bt.BARS_IN_MODULE));class Il{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(l){this.segmentIndex=l}getFileId(){return this.fileId}setFileId(l){this.fileId=l}getOptionalData(){return this.optionalData}setOptionalData(l){this.optionalData=l}isLastSegment(){return this.lastSegment}setLastSegment(l){this.lastSegment=l}getSegmentCount(){return this.segmentCount}setSegmentCount(l){this.segmentCount=l}getSender(){return this.sender||null}setSender(l){this.sender=l}getAddressee(){return this.addressee||null}setAddressee(l){this.addressee=l}getFileName(){return this.fileName}setFileName(l){this.fileName=l}getFileSize(){return this.fileSize}setFileSize(l){this.fileSize=l}getChecksum(){return this.checksum}setChecksum(l){this.checksum=l}getTimestamp(){return this.timestamp}setTimestamp(l){this.timestamp=l}}class Hm{static parseLong(l,u=void 0){return parseInt(l,u)}}class jc extends x{}jc.kind="NullPointerException";class wd{writeBytes(l){this.writeBytesOffset(l,0,l.length)}writeBytesOffset(l,u,f){if(l==null)throw new jc;if(u<0||u>l.length||f<0||u+f>l.length||u+f<0)throw new M;if(f===0)return;for(let p=0;p<f;p++)this.write(l[u+p])}flush(){}close(){}}class Uo extends x{}class zc extends wd{constructor(l=32){if(super(),this.count=0,l<0)throw new w("Negative initial size: "+l);this.buf=new Uint8Array(l)}ensureCapacity(l){l-this.buf.length>0&&this.grow(l)}grow(l){let f=this.buf.length<<1;if(f-l<0&&(f=l),f<0){if(l<0)throw new Uo;f=I.MAX_VALUE}this.buf=F.copyOfUint8Array(this.buf,f)}write(l){this.ensureCapacity(this.count+1),this.buf[this.count]=l,this.count+=1}writeBytesOffset(l,u,f){if(u<0||u>l.length||f<0||u+f-l.length>0)throw new M;this.ensureCapacity(this.count+f),k.arraycopy(l,u,this.buf,this.count,f),this.count+=f}writeTo(l){l.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return F.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(l){return l?typeof l=="string"?this.toString_string(l):this.toString_number(l):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(l){return new String(this.buf).toString()}toString_number(l){return new String(this.buf).toString()}close(){}}var rr;(function(q){q[q.ALPHA=0]="ALPHA",q[q.LOWER=1]="LOWER",q[q.MIXED=2]="MIXED",q[q.PUNCT=3]="PUNCT",q[q.ALPHA_SHIFT=4]="ALPHA_SHIFT",q[q.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(rr||(rr={}));function qm(){if(typeof window<"u")return window.BigInt||null;if(typeof th<"u")return th.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Vc;function di(q){if(typeof Vc>"u"&&(Vc=qm()),Vc===null)throw new Error("BigInt is not supported!");return Vc(q)}function Nd(){let q=[];q[0]=di(1);let l=di(900);q[1]=l;for(let u=2;u<16;u++)q[u]=q[u-1]*l;return q}class ke{static decode(l,u){let f=new he(""),p=V.ISO8859_1;f.enableDecoding(p);let b=1,E=l[b++],S=new Il;for(;b<l[0];){switch(E){case ke.TEXT_COMPACTION_MODE_LATCH:b=ke.textCompaction(l,b,f);break;case ke.BYTE_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH_6:b=ke.byteCompaction(E,l,p,b,f);break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[b++]);break;case ke.NUMERIC_COMPACTION_MODE_LATCH:b=ke.numericCompaction(l,b,f);break;case ke.ECI_CHARSET:V.getCharacterSetECIByValue(l[b++]);break;case ke.ECI_GENERAL_PURPOSE:b+=2;break;case ke.ECI_USER_DEFINED:b++;break;case ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK:b=ke.decodeMacroBlock(l,b,S);break;case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ke.MACRO_PDF417_TERMINATOR:throw new L;default:b--,b=ke.textCompaction(l,b,f);break}if(b<l.length)E=l[b++];else throw L.getFormatInstance()}if(f.length()===0)throw L.getFormatInstance();let T=new ve(null,f.toString(),null,u);return T.setOther(S),T}static decodeMacroBlock(l,u,f){if(u+ke.NUMBER_OF_SEQUENCE_CODEWORDS>l[0])throw L.getFormatInstance();let p=new Int32Array(ke.NUMBER_OF_SEQUENCE_CODEWORDS);for(let S=0;S<ke.NUMBER_OF_SEQUENCE_CODEWORDS;S++,u++)p[S]=l[u];f.setSegmentIndex(I.parseInt(ke.decodeBase900toBase10(p,ke.NUMBER_OF_SEQUENCE_CODEWORDS)));let b=new he;u=ke.textCompaction(l,u,b),f.setFileId(b.toString());let E=-1;for(l[u]===ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(E=u+1);u<l[0];)switch(l[u]){case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(u++,l[u]){case ke.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let S=new he;u=ke.textCompaction(l,u+1,S),f.setFileName(S.toString());break;case ke.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let T=new he;u=ke.textCompaction(l,u+1,T),f.setSender(T.toString());break;case ke.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let P=new he;u=ke.textCompaction(l,u+1,P),f.setAddressee(P.toString());break;case ke.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let B=new he;u=ke.numericCompaction(l,u+1,B),f.setSegmentCount(I.parseInt(B.toString()));break;case ke.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let $=new he;u=ke.numericCompaction(l,u+1,$),f.setTimestamp(Hm.parseLong($.toString()));break;case ke.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let W=new he;u=ke.numericCompaction(l,u+1,W),f.setChecksum(I.parseInt(W.toString()));break;case ke.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let re=new he;u=ke.numericCompaction(l,u+1,re),f.setFileSize(Hm.parseLong(re.toString()));break;default:throw L.getFormatInstance()}break;case ke.MACRO_PDF417_TERMINATOR:u++,f.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(E!==-1){let S=u-E;f.isLastSegment()&&S--,f.setOptionalData(F.copyOfRange(l,E,E+S))}return u}static textCompaction(l,u,f){let p=new Int32Array((l[0]-u)*2),b=new Int32Array((l[0]-u)*2),E=0,S=!1;for(;u<l[0]&&!S;){let T=l[u++];if(T<ke.TEXT_COMPACTION_MODE_LATCH)p[E]=T/30,p[E+1]=T%30,E+=2;else switch(T){case ke.TEXT_COMPACTION_MODE_LATCH:p[E++]=ke.TEXT_COMPACTION_MODE_LATCH;break;case ke.BYTE_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH_6:case ke.NUMERIC_COMPACTION_MODE_LATCH:case ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ke.MACRO_PDF417_TERMINATOR:u--,S=!0;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:p[E]=ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,T=l[u++],b[E]=T,E++;break}}return ke.decodeTextCompaction(p,b,E,f),u}static decodeTextCompaction(l,u,f,p){let b=rr.ALPHA,E=rr.ALPHA,S=0;for(;S<f;){let T=l[S],P="";switch(b){case rr.ALPHA:if(T<26)P=String.fromCharCode(65+T);else switch(T){case 26:P=" ";break;case ke.LL:b=rr.LOWER;break;case ke.ML:b=rr.MIXED;break;case ke.PS:E=b,b=rr.PUNCT_SHIFT;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:p.append(u[S]);break;case ke.TEXT_COMPACTION_MODE_LATCH:b=rr.ALPHA;break}break;case rr.LOWER:if(T<26)P=String.fromCharCode(97+T);else switch(T){case 26:P=" ";break;case ke.AS:E=b,b=rr.ALPHA_SHIFT;break;case ke.ML:b=rr.MIXED;break;case ke.PS:E=b,b=rr.PUNCT_SHIFT;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:p.append(u[S]);break;case ke.TEXT_COMPACTION_MODE_LATCH:b=rr.ALPHA;break}break;case rr.MIXED:if(T<ke.PL)P=ke.MIXED_CHARS[T];else switch(T){case ke.PL:b=rr.PUNCT;break;case 26:P=" ";break;case ke.LL:b=rr.LOWER;break;case ke.AL:b=rr.ALPHA;break;case ke.PS:E=b,b=rr.PUNCT_SHIFT;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:p.append(u[S]);break;case ke.TEXT_COMPACTION_MODE_LATCH:b=rr.ALPHA;break}break;case rr.PUNCT:if(T<ke.PAL)P=ke.PUNCT_CHARS[T];else switch(T){case ke.PAL:b=rr.ALPHA;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:p.append(u[S]);break;case ke.TEXT_COMPACTION_MODE_LATCH:b=rr.ALPHA;break}break;case rr.ALPHA_SHIFT:if(b=E,T<26)P=String.fromCharCode(65+T);else switch(T){case 26:P=" ";break;case ke.TEXT_COMPACTION_MODE_LATCH:b=rr.ALPHA;break}break;case rr.PUNCT_SHIFT:if(b=E,T<ke.PAL)P=ke.PUNCT_CHARS[T];else switch(T){case ke.PAL:b=rr.ALPHA;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:p.append(u[S]);break;case ke.TEXT_COMPACTION_MODE_LATCH:b=rr.ALPHA;break}break}P!==""&&p.append(P),S++}}static byteCompaction(l,u,f,p,b){let E=new zc,S=0,T=0,P=!1;switch(l){case ke.BYTE_COMPACTION_MODE_LATCH:let B=new Int32Array(6),$=u[p++];for(;p<u[0]&&!P;)switch(B[S++]=$,T=900*T+$,$=u[p++],$){case ke.TEXT_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH:case ke.NUMERIC_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH_6:case ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ke.MACRO_PDF417_TERMINATOR:p--,P=!0;break;default:if(S%5===0&&S>0){for(let W=0;W<6;++W)E.write(Number(di(T)>>di(8*(5-W))));T=0,S=0}break}p===u[0]&&$<ke.TEXT_COMPACTION_MODE_LATCH&&(B[S++]=$);for(let W=0;W<S;W++)E.write(B[W]);break;case ke.BYTE_COMPACTION_MODE_LATCH_6:for(;p<u[0]&&!P;){let W=u[p++];if(W<ke.TEXT_COMPACTION_MODE_LATCH)S++,T=900*T+W;else switch(W){case ke.TEXT_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH:case ke.NUMERIC_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH_6:case ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ke.MACRO_PDF417_TERMINATOR:p--,P=!0;break}if(S%5===0&&S>0){for(let re=0;re<6;++re)E.write(Number(di(T)>>di(8*(5-re))));T=0,S=0}}break}return b.append(Y.decode(E.toByteArray(),f)),p}static numericCompaction(l,u,f){let p=0,b=!1,E=new Int32Array(ke.MAX_NUMERIC_CODEWORDS);for(;u<l[0]&&!b;){let S=l[u++];if(u===l[0]&&(b=!0),S<ke.TEXT_COMPACTION_MODE_LATCH)E[p]=S,p++;else switch(S){case ke.TEXT_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH_6:case ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ke.MACRO_PDF417_TERMINATOR:u--,b=!0;break}(p%ke.MAX_NUMERIC_CODEWORDS===0||S===ke.NUMERIC_COMPACTION_MODE_LATCH||b)&&p>0&&(f.append(ke.decodeBase900toBase10(E,p)),p=0)}return u}static decodeBase900toBase10(l,u){let f=di(0);for(let b=0;b<u;b++)f+=ke.EXP900[u-b-1]*di(l[b]);let p=f.toString();if(p.charAt(0)!=="1")throw new L;return p.substring(1)}}ke.TEXT_COMPACTION_MODE_LATCH=900,ke.BYTE_COMPACTION_MODE_LATCH=901,ke.NUMERIC_COMPACTION_MODE_LATCH=902,ke.BYTE_COMPACTION_MODE_LATCH_6=924,ke.ECI_USER_DEFINED=925,ke.ECI_GENERAL_PURPOSE=926,ke.ECI_CHARSET=927,ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ke.MACRO_PDF417_TERMINATOR=922,ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ke.MAX_NUMERIC_CODEWORDS=15,ke.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ke.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ke.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ke.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ke.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ke.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ke.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ke.PL=25,ke.LL=27,ke.AS=27,ke.ML=28,ke.AL=28,ke.PS=29,ke.PAL=29,ke.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ke.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ke.EXP900=qm()?Nd():[],ke.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Rt{constructor(){}static decode(l,u,f,p,b,E,S){let T=new zs(l,u,f,p,b),P=null,B=null,$;for(let ue=!0;;ue=!1){if(u!=null&&(P=Rt.getRowIndicatorColumn(l,T,u,!0,E,S)),p!=null&&(B=Rt.getRowIndicatorColumn(l,T,p,!1,E,S)),$=Rt.merge(P,B),$==null)throw ae.getNotFoundInstance();let de=$.getBoundingBox();if(ue&&de!=null&&(de.getMinY()<T.getMinY()||de.getMaxY()>T.getMaxY()))T=de;else break}$.setBoundingBox(T);let W=$.getBarcodeColumnCount()+1;$.setDetectionResultColumn(0,P),$.setDetectionResultColumn(W,B);let re=P!=null;for(let ue=1;ue<=W;ue++){let de=re?ue:W-ue;if($.getDetectionResultColumn(de)!==void 0)continue;let Ee;de===0||de===W?Ee=new Ed(T,de===0):Ee=new ci(T),$.setDetectionResultColumn(de,Ee);let _e=-1,Qe=_e;for(let Ke=T.getMinY();Ke<=T.getMaxY();Ke++){if(_e=Rt.getStartColumn($,de,Ke,re),_e<0||_e>T.getMaxX()){if(Qe===-1)continue;_e=Qe}let Ge=Rt.detectCodeword(l,T.getMinX(),T.getMaxX(),re,_e,Ke,E,S);Ge!=null&&(Ee.setCodeword(Ke,Ge),Qe=_e,E=Math.min(E,Ge.getWidth()),S=Math.max(S,Ge.getWidth()))}}return Rt.createDecoderResult($)}static merge(l,u){if(l==null&&u==null)return null;let f=Rt.getBarcodeMetadata(l,u);if(f==null)return null;let p=zs.merge(Rt.adjustBoundingBox(l),Rt.adjustBoundingBox(u));return new yn(f,p)}static adjustBoundingBox(l){if(l==null)return null;let u=l.getRowHeights();if(u==null)return null;let f=Rt.getMax(u),p=0;for(let S of u)if(p+=f-S,S>0)break;let b=l.getCodewords();for(let S=0;p>0&&b[S]==null;S++)p--;let E=0;for(let S=u.length-1;S>=0&&(E+=f-u[S],!(u[S]>0));S--);for(let S=b.length-1;E>0&&b[S]==null;S--)E--;return l.getBoundingBox().addMissingRows(p,E,l.isLeft())}static getMax(l){let u=-1;for(let f of l)u=Math.max(u,f);return u}static getBarcodeMetadata(l,u){let f;if(l==null||(f=l.getBarcodeMetadata())==null)return u==null?null:u.getBarcodeMetadata();let p;return u==null||(p=u.getBarcodeMetadata())==null?f:f.getColumnCount()!==p.getColumnCount()&&f.getErrorCorrectionLevel()!==p.getErrorCorrectionLevel()&&f.getRowCount()!==p.getRowCount()?null:f}static getRowIndicatorColumn(l,u,f,p,b,E){let S=new Ed(u,p);for(let T=0;T<2;T++){let P=T===0?1:-1,B=Math.trunc(Math.trunc(f.getX()));for(let $=Math.trunc(Math.trunc(f.getY()));$<=u.getMaxY()&&$>=u.getMinY();$+=P){let W=Rt.detectCodeword(l,0,l.getWidth(),p,B,$,b,E);W!=null&&(S.setCodeword($,W),p?B=W.getStartX():B=W.getEndX())}}return S}static adjustCodewordCount(l,u){let f=u[0][1],p=f.getValue(),b=l.getBarcodeColumnCount()*l.getBarcodeRowCount()-Rt.getNumberOfECCodeWords(l.getBarcodeECLevel());if(p.length===0){if(b<1||b>bt.MAX_CODEWORDS_IN_BARCODE)throw ae.getNotFoundInstance();f.setValue(b)}else p[0]!==b&&f.setValue(b)}static createDecoderResult(l){let u=Rt.createBarcodeMatrix(l);Rt.adjustCodewordCount(l,u);let f=new Array,p=new Int32Array(l.getBarcodeRowCount()*l.getBarcodeColumnCount()),b=[],E=new Array;for(let T=0;T<l.getBarcodeRowCount();T++)for(let P=0;P<l.getBarcodeColumnCount();P++){let B=u[T][P+1].getValue(),$=T*l.getBarcodeColumnCount()+P;B.length===0?f.push($):B.length===1?p[$]=B[0]:(E.push($),b.push(B))}let S=new Array(b.length);for(let T=0;T<S.length;T++)S[T]=b[T];return Rt.createDecoderResultFromAmbiguousValues(l.getBarcodeECLevel(),p,bt.toIntArray(f),bt.toIntArray(E),S)}static createDecoderResultFromAmbiguousValues(l,u,f,p,b){let E=new Int32Array(p.length),S=100;for(;S-- >0;){for(let T=0;T<E.length;T++)u[p[T]]=b[T][E[T]];try{return Rt.decodeCodewords(u,l,f)}catch(T){if(!(T instanceof _))throw T}if(E.length===0)throw _.getChecksumInstance();for(let T=0;T<E.length;T++)if(E[T]<b[T].length-1){E[T]++;break}else if(E[T]=0,T===E.length-1)throw _.getChecksumInstance()}throw _.getChecksumInstance()}static createBarcodeMatrix(l){let u=Array.from({length:l.getBarcodeRowCount()},()=>new Array(l.getBarcodeColumnCount()+2));for(let p=0;p<u.length;p++)for(let b=0;b<u[p].length;b++)u[p][b]=new ui;let f=0;for(let p of l.getDetectionResultColumns()){if(p!=null){for(let b of p.getCodewords())if(b!=null){let E=b.getRowNumber();if(E>=0){if(E>=u.length)continue;u[E][f].setValue(b.getValue())}}}f++}return u}static isValidBarcodeColumn(l,u){return u>=0&&u<=l.getBarcodeColumnCount()+1}static getStartColumn(l,u,f,p){let b=p?1:-1,E=null;if(Rt.isValidBarcodeColumn(l,u-b)&&(E=l.getDetectionResultColumn(u-b).getCodeword(f)),E!=null)return p?E.getEndX():E.getStartX();if(E=l.getDetectionResultColumn(u).getCodewordNearby(f),E!=null)return p?E.getStartX():E.getEndX();if(Rt.isValidBarcodeColumn(l,u-b)&&(E=l.getDetectionResultColumn(u-b).getCodewordNearby(f)),E!=null)return p?E.getEndX():E.getStartX();let S=0;for(;Rt.isValidBarcodeColumn(l,u-b);){u-=b;for(let T of l.getDetectionResultColumn(u).getCodewords())if(T!=null)return(p?T.getEndX():T.getStartX())+b*S*(T.getEndX()-T.getStartX());S++}return p?l.getBoundingBox().getMinX():l.getBoundingBox().getMaxX()}static detectCodeword(l,u,f,p,b,E,S,T){b=Rt.adjustCodewordStartColumn(l,u,f,p,b,E);let P=Rt.getModuleBitCount(l,u,f,p,b,E);if(P==null)return null;let B,$=mt.sum(P);if(p)B=b+$;else{for(let ue=0;ue<P.length/2;ue++){let de=P[ue];P[ue]=P[P.length-1-ue],P[P.length-1-ue]=de}B=b,b=B-$}if(!Rt.checkCodewordSkew($,S,T))return null;let W=Tn.getDecodedValue(P),re=bt.getCodeword(W);return re===-1?null:new Ha(b,B,Rt.getCodewordBucketNumber(W),re)}static getModuleBitCount(l,u,f,p,b,E){let S=b,T=new Int32Array(8),P=0,B=p?1:-1,$=p;for(;(p?S<f:S>=u)&&P<T.length;)l.get(S,E)===$?(T[P]++,S+=B):(P++,$=!$);return P===T.length||S===(p?f:u)&&P===T.length-1?T:null}static getNumberOfECCodeWords(l){return 2<<l}static adjustCodewordStartColumn(l,u,f,p,b,E){let S=b,T=p?-1:1;for(let P=0;P<2;P++){for(;(p?S>=u:S<f)&&p===l.get(S,E);){if(Math.abs(b-S)>Rt.CODEWORD_SKEW_SIZE)return b;S+=T}T=-T,p=!p}return S}static checkCodewordSkew(l,u,f){return u-Rt.CODEWORD_SKEW_SIZE<=l&&l<=f+Rt.CODEWORD_SKEW_SIZE}static decodeCodewords(l,u,f){if(l.length===0)throw L.getFormatInstance();let p=1<<u+1,b=Rt.correctErrors(l,f,p);Rt.verifyCodewordCount(l,p);let E=ke.decode(l,""+u);return E.setErrorsCorrected(b),E.setErasures(f.length),E}static correctErrors(l,u,f){if(u!=null&&u.length>f/2+Rt.MAX_ERRORS||f<0||f>Rt.MAX_EC_CODEWORDS)throw _.getChecksumInstance();return Rt.errorCorrection.decode(l,f,u)}static verifyCodewordCount(l,u){if(l.length<4)throw L.getFormatInstance();let f=l[0];if(f>l.length)throw L.getFormatInstance();if(f===0)if(u<l.length)l[0]=l.length-u;else throw L.getFormatInstance()}static getBitCountForCodeword(l){let u=new Int32Array(8),f=0,p=u.length-1;for(;!((l&1)!==f&&(f=l&1,p--,p<0));)u[p]++,l>>=1;return u}static getCodewordBucketNumber(l){return l instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(l):this.getCodewordBucketNumber_number(l)}static getCodewordBucketNumber_number(l){return Rt.getCodewordBucketNumber(Rt.getBitCountForCodeword(l))}static getCodewordBucketNumber_Int32Array(l){return(l[0]-l[2]+l[4]-l[6]+9)%9}static toString(l){let u=new Rl;for(let f=0;f<l.length;f++){u.format("Row %2d: ",f);for(let p=0;p<l[f].length;p++){let b=l[f][p];b.getValue().length===0?u.format("        ",null):u.format("%4d(%2d)",b.getValue()[0],b.getConfidence(b.getValue()[0]))}u.format("%n")}return u.toString()}}Rt.CODEWORD_SKEW_SIZE=2,Rt.MAX_ERRORS=3,Rt.MAX_EC_CODEWORDS=512,Rt.errorCorrection=new js;class On{decode(l,u=null){let f=On.decode(l,u,!1);if(f==null||f.length===0||f[0]==null)throw ae.getNotFoundInstance();return f[0]}decodeMultiple(l,u=null){try{return On.decode(l,u,!0)}catch(f){throw f instanceof L||f instanceof _?ae.getNotFoundInstance():f}}static decode(l,u,f){const p=new Array,b=Ct.detectMultiple(l,u,f);for(const E of b.getPoints()){const S=Rt.decode(b.getBits(),E[4],E[5],E[6],E[7],On.getMinCodewordWidth(E),On.getMaxCodewordWidth(E)),T=new ce(S.getText(),S.getRawBytes(),void 0,E,ie.PDF_417);T.putMetadata(He.ERROR_CORRECTION_LEVEL,S.getECLevel());const P=S.getOther();P!=null&&T.putMetadata(He.PDF417_EXTRA_METADATA,P),p.push(T)}return p.map(E=>E)}static getMaxWidth(l,u){return l==null||u==null?0:Math.trunc(Math.abs(l.getX()-u.getX()))}static getMinWidth(l,u){return l==null||u==null?I.MAX_VALUE:Math.trunc(Math.abs(l.getX()-u.getX()))}static getMaxCodewordWidth(l){return Math.floor(Math.max(Math.max(On.getMaxWidth(l[0],l[4]),On.getMaxWidth(l[6],l[2])*bt.MODULES_IN_CODEWORD/bt.MODULES_IN_STOP_PATTERN),Math.max(On.getMaxWidth(l[1],l[5]),On.getMaxWidth(l[7],l[3])*bt.MODULES_IN_CODEWORD/bt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(l){return Math.floor(Math.min(Math.min(On.getMinWidth(l[0],l[4]),On.getMinWidth(l[6],l[2])*bt.MODULES_IN_CODEWORD/bt.MODULES_IN_STOP_PATTERN),Math.min(On.getMinWidth(l[1],l[5]),On.getMinWidth(l[7],l[3])*bt.MODULES_IN_CODEWORD/bt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Hc extends x{}Hc.kind="ReaderException";class $m{constructor(l,u){this.verbose=l===!0,u&&this.setHints(u)}decode(l,u){return u&&this.setHints(u),this.decodeInternal(l)}decodeWithState(l){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(l)}setHints(l){this.hints=l;const u=!n(l)&&l.get(z.TRY_HARDER)===!0,f=n(l)?null:l.get(z.POSSIBLE_FORMATS),p=new Array;if(!n(f)){const b=f.some(E=>E===ie.UPC_A||E===ie.UPC_E||E===ie.EAN_13||E===ie.EAN_8||E===ie.CODABAR||E===ie.CODE_39||E===ie.CODE_93||E===ie.CODE_128||E===ie.ITF||E===ie.RSS_14||E===ie.RSS_EXPANDED);b&&!u&&p.push(new za(l,this.verbose)),f.includes(ie.QR_CODE)&&p.push(new Us),f.includes(ie.DATA_MATRIX)&&p.push(new Fs),f.includes(ie.AZTEC)&&p.push(new pa),f.includes(ie.PDF_417)&&p.push(new On),b&&u&&p.push(new za(l,this.verbose))}p.length===0&&(u||p.push(new za(l,this.verbose)),p.push(new Us),p.push(new Fs),p.push(new pa),p.push(new On),u&&p.push(new za(l,this.verbose))),this.readers=p}reset(){if(this.readers!==null)for(const l of this.readers)l.reset()}decodeInternal(l){if(this.readers===null)throw new Hc("No readers where selected, nothing can be read.");for(const u of this.readers)try{return u.decode(l,this.hints)}catch(f){if(f instanceof Hc)continue}throw new ae("No MultiFormat Readers were able to detect the code.")}}class Gm extends fe{constructor(l=null,u=500){const f=new $m;f.setHints(l),super(f,u)}decodeBitmap(l){return this.reader.decodeWithState(l)}}class p1 extends fe{constructor(l=500){super(new On,l)}}class y1 extends fe{constructor(l=500){super(new Us,l)}}var Sd;(function(q){q[q.ERROR_CORRECTION=0]="ERROR_CORRECTION",q[q.CHARACTER_SET=1]="CHARACTER_SET",q[q.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",q[q.MIN_SIZE=3]="MIN_SIZE",q[q.MAX_SIZE=4]="MAX_SIZE",q[q.MARGIN=5]="MARGIN",q[q.PDF417_COMPACT=6]="PDF417_COMPACT",q[q.PDF417_COMPACTION=7]="PDF417_COMPACTION",q[q.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",q[q.AZTEC_LAYERS=9]="AZTEC_LAYERS",q[q.QR_VERSION=10]="QR_VERSION"})(Sd||(Sd={}));var sn=Sd;class jo{constructor(l){this.field=l,this.cachedGenerators=[],this.cachedGenerators.push(new be(l,Int32Array.from([1])))}buildGenerator(l){const u=this.cachedGenerators;if(l>=u.length){let f=u[u.length-1];const p=this.field;for(let b=u.length;b<=l;b++){const E=f.multiply(new be(p,Int32Array.from([1,p.exp(b-1+p.getGeneratorBase())])));u.push(E),f=E}}return u[l]}encode(l,u){if(u===0)throw new w("No error correction bytes");const f=l.length-u;if(f<=0)throw new w("No data bytes provided");const p=this.buildGenerator(u),b=new Int32Array(f);k.arraycopy(l,0,b,0,f);let E=new be(this.field,b);E=E.multiplyByMonomial(u,1);const T=E.divide(p)[1].getCoefficients(),P=u-T.length;for(let B=0;B<P;B++)l[f+B]=0;k.arraycopy(T,0,l,f+P,T.length)}}class Ir{constructor(){}static applyMaskPenaltyRule1(l){return Ir.applyMaskPenaltyRule1Internal(l,!0)+Ir.applyMaskPenaltyRule1Internal(l,!1)}static applyMaskPenaltyRule2(l){let u=0;const f=l.getArray(),p=l.getWidth(),b=l.getHeight();for(let E=0;E<b-1;E++){const S=f[E];for(let T=0;T<p-1;T++){const P=S[T];P===S[T+1]&&P===f[E+1][T]&&P===f[E+1][T+1]&&u++}}return Ir.N2*u}static applyMaskPenaltyRule3(l){let u=0;const f=l.getArray(),p=l.getWidth(),b=l.getHeight();for(let E=0;E<b;E++)for(let S=0;S<p;S++){const T=f[E];S+6<p&&T[S]===1&&T[S+1]===0&&T[S+2]===1&&T[S+3]===1&&T[S+4]===1&&T[S+5]===0&&T[S+6]===1&&(Ir.isWhiteHorizontal(T,S-4,S)||Ir.isWhiteHorizontal(T,S+7,S+11))&&u++,E+6<b&&f[E][S]===1&&f[E+1][S]===0&&f[E+2][S]===1&&f[E+3][S]===1&&f[E+4][S]===1&&f[E+5][S]===0&&f[E+6][S]===1&&(Ir.isWhiteVertical(f,S,E-4,E)||Ir.isWhiteVertical(f,S,E+7,E+11))&&u++}return u*Ir.N3}static isWhiteHorizontal(l,u,f){u=Math.max(u,0),f=Math.min(f,l.length);for(let p=u;p<f;p++)if(l[p]===1)return!1;return!0}static isWhiteVertical(l,u,f,p){f=Math.max(f,0),p=Math.min(p,l.length);for(let b=f;b<p;b++)if(l[b][u]===1)return!1;return!0}static applyMaskPenaltyRule4(l){let u=0;const f=l.getArray(),p=l.getWidth(),b=l.getHeight();for(let T=0;T<b;T++){const P=f[T];for(let B=0;B<p;B++)P[B]===1&&u++}const E=l.getHeight()*l.getWidth();return Math.floor(Math.abs(u*2-E)*10/E)*Ir.N4}static getDataMaskBit(l,u,f){let p,b;switch(l){case 0:p=f+u&1;break;case 1:p=f&1;break;case 2:p=u%3;break;case 3:p=(f+u)%3;break;case 4:p=Math.floor(f/2)+Math.floor(u/3)&1;break;case 5:b=f*u,p=(b&1)+b%3;break;case 6:b=f*u,p=(b&1)+b%3&1;break;case 7:b=f*u,p=b%3+(f+u&1)&1;break;default:throw new w("Invalid mask pattern: "+l)}return p===0}static applyMaskPenaltyRule1Internal(l,u){let f=0;const p=u?l.getHeight():l.getWidth(),b=u?l.getWidth():l.getHeight(),E=l.getArray();for(let S=0;S<p;S++){let T=0,P=-1;for(let B=0;B<b;B++){const $=u?E[S][B]:E[B][S];$===P?T++:(T>=5&&(f+=Ir.N1+(T-5)),T=1,P=$)}T>=5&&(f+=Ir.N1+(T-5))}return f}}Ir.N1=3,Ir.N2=3,Ir.N3=40,Ir.N4=10;class qc{constructor(l,u){this.width=l,this.height=u;const f=new Array(u);for(let p=0;p!==u;p++)f[p]=new Uint8Array(l);this.bytes=f}getHeight(){return this.height}getWidth(){return this.width}get(l,u){return this.bytes[u][l]}getArray(){return this.bytes}setNumber(l,u,f){this.bytes[u][l]=f}setBoolean(l,u,f){this.bytes[u][l]=f?1:0}clear(l){for(const u of this.bytes)F.fill(u,l)}equals(l){if(!(l instanceof qc))return!1;const u=l;if(this.width!==u.width||this.height!==u.height)return!1;for(let f=0,p=this.height;f<p;++f){const b=this.bytes[f],E=u.bytes[f];for(let S=0,T=this.width;S<T;++S)if(b[S]!==E[S])return!1}return!0}toString(){const l=new he;for(let u=0,f=this.height;u<f;++u){const p=this.bytes[u];for(let b=0,E=this.width;b<E;++b)switch(p[b]){case 0:l.append(" 0");break;case 1:l.append(" 1");break;default:l.append("  ");break}l.append(`
`)}return l.toString()}}class Ii{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const l=new he;return l.append(`<<
`),l.append(" mode: "),l.append(this.mode?this.mode.toString():"null"),l.append(`
 ecLevel: `),l.append(this.ecLevel?this.ecLevel.toString():"null"),l.append(`
 version: `),l.append(this.version?this.version.toString():"null"),l.append(`
 maskPattern: `),l.append(this.maskPattern.toString()),this.matrix?(l.append(`
 matrix:
`),l.append(this.matrix.toString())):l.append(`
 matrix: null
`),l.append(`>>
`),l.toString()}setMode(l){this.mode=l}setECLevel(l){this.ecLevel=l}setVersion(l){this.version=l}setMaskPattern(l){this.maskPattern=l}setMatrix(l){this.matrix=l}static isValidMaskPattern(l){return l>=0&&l<Ii.NUM_MASK_PATTERNS}}Ii.NUM_MASK_PATTERNS=8;class ir extends x{}ir.kind="WriterException";class vt{constructor(){}static clearMatrix(l){l.clear(255)}static buildMatrix(l,u,f,p,b){vt.clearMatrix(b),vt.embedBasicPatterns(f,b),vt.embedTypeInfo(u,p,b),vt.maybeEmbedVersionInfo(f,b),vt.embedDataBits(l,p,b)}static embedBasicPatterns(l,u){vt.embedPositionDetectionPatternsAndSeparators(u),vt.embedDarkDotAtLeftBottomCorner(u),vt.maybeEmbedPositionAdjustmentPatterns(l,u),vt.embedTimingPatterns(u)}static embedTypeInfo(l,u,f){const p=new G;vt.makeTypeInfoBits(l,u,p);for(let b=0,E=p.getSize();b<E;++b){const S=p.get(p.getSize()-1-b),T=vt.TYPE_INFO_COORDINATES[b],P=T[0],B=T[1];if(f.setBoolean(P,B,S),b<8){const $=f.getWidth()-b-1;f.setBoolean($,8,S)}else{const W=f.getHeight()-7+(b-8);f.setBoolean(8,W,S)}}}static maybeEmbedVersionInfo(l,u){if(l.getVersionNumber()<7)return;const f=new G;vt.makeVersionInfoBits(l,f);let p=17;for(let b=0;b<6;++b)for(let E=0;E<3;++E){const S=f.get(p);p--,u.setBoolean(b,u.getHeight()-11+E,S),u.setBoolean(u.getHeight()-11+E,b,S)}}static embedDataBits(l,u,f){let p=0,b=-1,E=f.getWidth()-1,S=f.getHeight()-1;for(;E>0;){for(E===6&&(E-=1);S>=0&&S<f.getHeight();){for(let T=0;T<2;++T){const P=E-T;if(!vt.isEmpty(f.get(P,S)))continue;let B;p<l.getSize()?(B=l.get(p),++p):B=!1,u!==255&&Ir.getDataMaskBit(u,P,S)&&(B=!B),f.setBoolean(P,S,B)}S+=b}b=-b,S+=b,E-=2}if(p!==l.getSize())throw new ir("Not all bits consumed: "+p+"/"+l.getSize())}static findMSBSet(l){return 32-I.numberOfLeadingZeros(l)}static calculateBCHCode(l,u){if(u===0)throw new w("0 polynomial");const f=vt.findMSBSet(u);for(l<<=f-1;vt.findMSBSet(l)>=f;)l^=u<<vt.findMSBSet(l)-f;return l}static makeTypeInfoBits(l,u,f){if(!Ii.isValidMaskPattern(u))throw new ir("Invalid mask pattern");const p=l.getBits()<<3|u;f.appendBits(p,5);const b=vt.calculateBCHCode(p,vt.TYPE_INFO_POLY);f.appendBits(b,10);const E=new G;if(E.appendBits(vt.TYPE_INFO_MASK_PATTERN,15),f.xor(E),f.getSize()!==15)throw new ir("should not happen but we got: "+f.getSize())}static makeVersionInfoBits(l,u){u.appendBits(l.getVersionNumber(),6);const f=vt.calculateBCHCode(l.getVersionNumber(),vt.VERSION_INFO_POLY);if(u.appendBits(f,12),u.getSize()!==18)throw new ir("should not happen but we got: "+u.getSize())}static isEmpty(l){return l===255}static embedTimingPatterns(l){for(let u=8;u<l.getWidth()-8;++u){const f=(u+1)%2;vt.isEmpty(l.get(u,6))&&l.setNumber(u,6,f),vt.isEmpty(l.get(6,u))&&l.setNumber(6,u,f)}}static embedDarkDotAtLeftBottomCorner(l){if(l.get(8,l.getHeight()-8)===0)throw new ir;l.setNumber(8,l.getHeight()-8,1)}static embedHorizontalSeparationPattern(l,u,f){for(let p=0;p<8;++p){if(!vt.isEmpty(f.get(l+p,u)))throw new ir;f.setNumber(l+p,u,0)}}static embedVerticalSeparationPattern(l,u,f){for(let p=0;p<7;++p){if(!vt.isEmpty(f.get(l,u+p)))throw new ir;f.setNumber(l,u+p,0)}}static embedPositionAdjustmentPattern(l,u,f){for(let p=0;p<5;++p){const b=vt.POSITION_ADJUSTMENT_PATTERN[p];for(let E=0;E<5;++E)f.setNumber(l+E,u+p,b[E])}}static embedPositionDetectionPattern(l,u,f){for(let p=0;p<7;++p){const b=vt.POSITION_DETECTION_PATTERN[p];for(let E=0;E<7;++E)f.setNumber(l+E,u+p,b[E])}}static embedPositionDetectionPatternsAndSeparators(l){const u=vt.POSITION_DETECTION_PATTERN[0].length;vt.embedPositionDetectionPattern(0,0,l),vt.embedPositionDetectionPattern(l.getWidth()-u,0,l),vt.embedPositionDetectionPattern(0,l.getWidth()-u,l);const f=8;vt.embedHorizontalSeparationPattern(0,f-1,l),vt.embedHorizontalSeparationPattern(l.getWidth()-f,f-1,l),vt.embedHorizontalSeparationPattern(0,l.getWidth()-f,l);const p=7;vt.embedVerticalSeparationPattern(p,0,l),vt.embedVerticalSeparationPattern(l.getHeight()-p-1,0,l),vt.embedVerticalSeparationPattern(p,l.getHeight()-p,l)}static maybeEmbedPositionAdjustmentPatterns(l,u){if(l.getVersionNumber()<2)return;const f=l.getVersionNumber()-1,p=vt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[f];for(let b=0,E=p.length;b!==E;b++){const S=p[b];if(S>=0)for(let T=0;T!==E;T++){const P=p[T];P>=0&&vt.isEmpty(u.get(P,S))&&vt.embedPositionAdjustmentPattern(P-2,S-2,u)}}}}vt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),vt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),vt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),vt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),vt.VERSION_INFO_POLY=7973,vt.TYPE_INFO_POLY=1335,vt.TYPE_INFO_MASK_PATTERN=21522;class x1{constructor(l,u){this.dataBytes=l,this.errorCorrectionBytes=u}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class xr{constructor(){}static calculateMaskPenalty(l){return Ir.applyMaskPenaltyRule1(l)+Ir.applyMaskPenaltyRule2(l)+Ir.applyMaskPenaltyRule3(l)+Ir.applyMaskPenaltyRule4(l)}static encode(l,u,f=null){let p=xr.DEFAULT_BYTE_MODE_ENCODING;const b=f!==null&&f.get(sn.CHARACTER_SET)!==void 0;b&&(p=f.get(sn.CHARACTER_SET).toString());const E=this.chooseMode(l,p),S=new G;if(E===gt.BYTE&&(b||xr.DEFAULT_BYTE_MODE_ENCODING!==p)){const Ke=V.getCharacterSetECIByName(p);Ke!==void 0&&this.appendECI(Ke,S)}this.appendModeInfo(E,S);const T=new G;this.appendBytes(l,E,T,p);let P;if(f!==null&&f.get(sn.QR_VERSION)!==void 0){const Ke=Number.parseInt(f.get(sn.QR_VERSION).toString(),10);P=dt.getVersionForNumber(Ke);const Ge=this.calculateBitsNeeded(E,S,T,P);if(!this.willFit(Ge,P,u))throw new ir("Data too big for requested version")}else P=this.recommendVersion(u,E,S,T);const B=new G;B.appendBitArray(S);const $=E===gt.BYTE?T.getSizeInBytes():l.length;this.appendLengthInfo($,P,E,B),B.appendBitArray(T);const W=P.getECBlocksForLevel(u),re=P.getTotalCodewords()-W.getTotalECCodewords();this.terminateBits(re,B);const ue=this.interleaveWithECBytes(B,P.getTotalCodewords(),re,W.getNumBlocks()),de=new Ii;de.setECLevel(u),de.setMode(E),de.setVersion(P);const Ee=P.getDimensionForVersion(),_e=new qc(Ee,Ee),Qe=this.chooseMaskPattern(ue,u,P,_e);return de.setMaskPattern(Qe),vt.buildMatrix(ue,u,P,Qe,_e),de.setMatrix(_e),de}static recommendVersion(l,u,f,p){const b=this.calculateBitsNeeded(u,f,p,dt.getVersionForNumber(1)),E=this.chooseVersion(b,l),S=this.calculateBitsNeeded(u,f,p,E);return this.chooseVersion(S,l)}static calculateBitsNeeded(l,u,f,p){return u.getSize()+l.getCharacterCountBits(p)+f.getSize()}static getAlphanumericCode(l){return l<xr.ALPHANUMERIC_TABLE.length?xr.ALPHANUMERIC_TABLE[l]:-1}static chooseMode(l,u=null){if(V.SJIS.getName()===u&&this.isOnlyDoubleByteKanji(l))return gt.KANJI;let f=!1,p=!1;for(let b=0,E=l.length;b<E;++b){const S=l.charAt(b);if(xr.isDigit(S))f=!0;else if(this.getAlphanumericCode(S.charCodeAt(0))!==-1)p=!0;else return gt.BYTE}return p?gt.ALPHANUMERIC:f?gt.NUMERIC:gt.BYTE}static isOnlyDoubleByteKanji(l){let u;try{u=Y.encode(l,V.SJIS)}catch{return!1}const f=u.length;if(f%2!==0)return!1;for(let p=0;p<f;p+=2){const b=u[p]&255;if((b<129||b>159)&&(b<224||b>235))return!1}return!0}static chooseMaskPattern(l,u,f,p){let b=Number.MAX_SAFE_INTEGER,E=-1;for(let S=0;S<Ii.NUM_MASK_PATTERNS;S++){vt.buildMatrix(l,u,f,S,p);let T=this.calculateMaskPenalty(p);T<b&&(b=T,E=S)}return E}static chooseVersion(l,u){for(let f=1;f<=40;f++){const p=dt.getVersionForNumber(f);if(xr.willFit(l,p,u))return p}throw new ir("Data too big")}static willFit(l,u,f){const p=u.getTotalCodewords(),E=u.getECBlocksForLevel(f).getTotalECCodewords(),S=p-E,T=(l+7)/8;return S>=T}static terminateBits(l,u){const f=l*8;if(u.getSize()>f)throw new ir("data bits cannot fit in the QR Code"+u.getSize()+" > "+f);for(let E=0;E<4&&u.getSize()<f;++E)u.appendBit(!1);const p=u.getSize()&7;if(p>0)for(let E=p;E<8;E++)u.appendBit(!1);const b=l-u.getSizeInBytes();for(let E=0;E<b;++E)u.appendBits((E&1)===0?236:17,8);if(u.getSize()!==f)throw new ir("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(l,u,f,p,b,E){if(p>=f)throw new ir("Block ID too large");const S=l%f,T=f-S,P=Math.floor(l/f),B=P+1,$=Math.floor(u/f),W=$+1,re=P-$,ue=B-W;if(re!==ue)throw new ir("EC bytes mismatch");if(f!==T+S)throw new ir("RS blocks mismatch");if(l!==($+re)*T+(W+ue)*S)throw new ir("Total bytes mismatch");p<T?(b[0]=$,E[0]=re):(b[0]=W,E[0]=ue)}static interleaveWithECBytes(l,u,f,p){if(l.getSizeInBytes()!==f)throw new ir("Number of bits and data bytes does not match");let b=0,E=0,S=0;const T=new Array;for(let B=0;B<p;++B){const $=new Int32Array(1),W=new Int32Array(1);xr.getNumDataBytesAndNumECBytesForBlockID(u,f,p,B,$,W);const re=$[0],ue=new Uint8Array(re);l.toBytes(8*b,ue,0,re);const de=xr.generateECBytes(ue,W[0]);T.push(new x1(ue,de)),E=Math.max(E,re),S=Math.max(S,de.length),b+=$[0]}if(f!==b)throw new ir("Data bytes does not match offset");const P=new G;for(let B=0;B<E;++B)for(const $ of T){const W=$.getDataBytes();B<W.length&&P.appendBits(W[B],8)}for(let B=0;B<S;++B)for(const $ of T){const W=$.getErrorCorrectionBytes();B<W.length&&P.appendBits(W[B],8)}if(u!==P.getSizeInBytes())throw new ir("Interleaving error: "+u+" and "+P.getSizeInBytes()+" differ.");return P}static generateECBytes(l,u){const f=l.length,p=new Int32Array(f+u);for(let E=0;E<f;E++)p[E]=l[E]&255;new jo(je.QR_CODE_FIELD_256).encode(p,u);const b=new Uint8Array(u);for(let E=0;E<u;E++)b[E]=p[f+E];return b}static appendModeInfo(l,u){u.appendBits(l.getBits(),4)}static appendLengthInfo(l,u,f,p){const b=f.getCharacterCountBits(u);if(l>=1<<b)throw new ir(l+" is bigger than "+((1<<b)-1));p.appendBits(l,b)}static appendBytes(l,u,f,p){switch(u){case gt.NUMERIC:xr.appendNumericBytes(l,f);break;case gt.ALPHANUMERIC:xr.appendAlphanumericBytes(l,f);break;case gt.BYTE:xr.append8BitBytes(l,f,p);break;case gt.KANJI:xr.appendKanjiBytes(l,f);break;default:throw new ir("Invalid mode: "+u)}}static getDigit(l){return l.charCodeAt(0)-48}static isDigit(l){const u=xr.getDigit(l);return u>=0&&u<=9}static appendNumericBytes(l,u){const f=l.length;let p=0;for(;p<f;){const b=xr.getDigit(l.charAt(p));if(p+2<f){const E=xr.getDigit(l.charAt(p+1)),S=xr.getDigit(l.charAt(p+2));u.appendBits(b*100+E*10+S,10),p+=3}else if(p+1<f){const E=xr.getDigit(l.charAt(p+1));u.appendBits(b*10+E,7),p+=2}else u.appendBits(b,4),p++}}static appendAlphanumericBytes(l,u){const f=l.length;let p=0;for(;p<f;){const b=xr.getAlphanumericCode(l.charCodeAt(p));if(b===-1)throw new ir;if(p+1<f){const E=xr.getAlphanumericCode(l.charCodeAt(p+1));if(E===-1)throw new ir;u.appendBits(b*45+E,11),p+=2}else u.appendBits(b,6),p++}}static append8BitBytes(l,u,f){let p;try{p=Y.encode(l,f)}catch(b){throw new ir(b)}for(let b=0,E=p.length;b!==E;b++){const S=p[b];u.appendBits(S,8)}}static appendKanjiBytes(l,u){let f;try{f=Y.encode(l,V.SJIS)}catch(b){throw new ir(b)}const p=f.length;for(let b=0;b<p;b+=2){const E=f[b]&255,S=f[b+1]&255,T=E<<8&4294967295|S;let P=-1;if(T>=33088&&T<=40956?P=T-33088:T>=57408&&T<=60351&&(P=T-49472),P===-1)throw new ir("Invalid byte sequence");const B=(P>>8)*192+(P&255);u.appendBits(B,13)}}static appendECI(l,u){u.appendBits(gt.ECI.getBits(),4),u.appendBits(l.getValue(),8)}}xr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),xr.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class Li{write(l,u,f,p=null){if(l.length===0)throw new w("Found empty contents");if(u<0||f<0)throw new w("Requested dimensions are too small: "+u+"x"+f);let b=Ft.L,E=Li.QUIET_ZONE_SIZE;p!==null&&(p.get(sn.ERROR_CORRECTION)!==void 0&&(b=Ft.fromString(p.get(sn.ERROR_CORRECTION).toString())),p.get(sn.MARGIN)!==void 0&&(E=Number.parseInt(p.get(sn.MARGIN).toString(),10)));const S=xr.encode(l,b,p);return this.renderResult(S,u,f,E)}writeToDom(l,u,f,p,b=null){typeof l=="string"&&(l=document.querySelector(l));const E=this.write(u,f,p,b);l&&l.appendChild(E)}renderResult(l,u,f,p){const b=l.getMatrix();if(b===null)throw new Ie;const E=b.getWidth(),S=b.getHeight(),T=E+p*2,P=S+p*2,B=Math.max(u,T),$=Math.max(f,P),W=Math.min(Math.floor(B/T),Math.floor($/P)),re=Math.floor((B-E*W)/2),ue=Math.floor(($-S*W)/2),de=this.createSVGElement(B,$);for(let Ee=0,_e=ue;Ee<S;Ee++,_e+=W)for(let Qe=0,Ke=re;Qe<E;Qe++,Ke+=W)if(b.get(Qe,Ee)===1){const Ge=this.createSvgRectElement(Ke,_e,W,W);de.appendChild(Ge)}return de}createSVGElement(l,u){const f=document.createElementNS(Li.SVG_NS,"svg");return f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",u.toString()),f}createSvgRectElement(l,u,f,p){const b=document.createElementNS(Li.SVG_NS,"rect");return b.setAttributeNS(null,"x",l.toString()),b.setAttributeNS(null,"y",u.toString()),b.setAttributeNS(null,"height",f.toString()),b.setAttributeNS(null,"width",p.toString()),b.setAttributeNS(null,"fill","#000000"),b}}Li.QUIET_ZONE_SIZE=4,Li.SVG_NS="http://www.w3.org/2000/svg";class Ll{encode(l,u,f,p,b){if(l.length===0)throw new w("Found empty contents");if(u!==ie.QR_CODE)throw new w("Can only encode QR_CODE, but got "+u);if(f<0||p<0)throw new w(`Requested dimensions are too small: ${f}x${p}`);let E=Ft.L,S=Ll.QUIET_ZONE_SIZE;b!==null&&(b.get(sn.ERROR_CORRECTION)!==void 0&&(E=Ft.fromString(b.get(sn.ERROR_CORRECTION).toString())),b.get(sn.MARGIN)!==void 0&&(S=Number.parseInt(b.get(sn.MARGIN).toString(),10)));const T=xr.encode(l,E,b);return Ll.renderResult(T,f,p,S)}static renderResult(l,u,f,p){const b=l.getMatrix();if(b===null)throw new Ie;const E=b.getWidth(),S=b.getHeight(),T=E+p*2,P=S+p*2,B=Math.max(u,T),$=Math.max(f,P),W=Math.min(Math.floor(B/T),Math.floor($/P)),re=Math.floor((B-E*W)/2),ue=Math.floor(($-S*W)/2),de=new xe(B,$);for(let Ee=0,_e=ue;Ee<S;Ee++,_e+=W)for(let Qe=0,Ke=re;Qe<E;Qe++,Ke+=W)b.get(Qe,Ee)===1&&de.setRegion(Ke,_e,W,W);return de}}Ll.QUIET_ZONE_SIZE=4;class b1{encode(l,u,f,p,b){let E;switch(u){case ie.QR_CODE:E=new Ll;break;default:throw new w("No encoder available for format "+u)}return E.encode(l,u,f,p,b)}}class cs extends Te{constructor(l,u,f,p,b,E,S,T){if(super(E,S),this.yuvData=l,this.dataWidth=u,this.dataHeight=f,this.left=p,this.top=b,p+E>u||b+S>f)throw new w("Crop rectangle does not fit within image data.");T&&this.reverseHorizontal(E,S)}getRow(l,u){if(l<0||l>=this.getHeight())throw new w("Requested row is outside the image: "+l);const f=this.getWidth();(u==null||u.length<f)&&(u=new Uint8ClampedArray(f));const p=(l+this.top)*this.dataWidth+this.left;return k.arraycopy(this.yuvData,p,u,0,f),u}getMatrix(){const l=this.getWidth(),u=this.getHeight();if(l===this.dataWidth&&u===this.dataHeight)return this.yuvData;const f=l*u,p=new Uint8ClampedArray(f);let b=this.top*this.dataWidth+this.left;if(l===this.dataWidth)return k.arraycopy(this.yuvData,b,p,0,f),p;for(let E=0;E<u;E++){const S=E*l;k.arraycopy(this.yuvData,b,p,S,l),b+=this.dataWidth}return p}isCropSupported(){return!0}crop(l,u,f,p){return new cs(this.yuvData,this.dataWidth,this.dataHeight,this.left+l,this.top+u,f,p,!1)}renderThumbnail(){const l=this.getWidth()/cs.THUMBNAIL_SCALE_FACTOR,u=this.getHeight()/cs.THUMBNAIL_SCALE_FACTOR,f=new Int32Array(l*u),p=this.yuvData;let b=this.top*this.dataWidth+this.left;for(let E=0;E<u;E++){const S=E*l;for(let T=0;T<l;T++){const P=p[b+T*cs.THUMBNAIL_SCALE_FACTOR]&255;f[S+T]=4278190080|P*65793}b+=this.dataWidth*cs.THUMBNAIL_SCALE_FACTOR}return f}getThumbnailWidth(){return this.getWidth()/cs.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/cs.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(l,u){const f=this.yuvData;for(let p=0,b=this.top*this.dataWidth+this.left;p<u;p++,b+=this.dataWidth){const E=b+l/2;for(let S=b,T=b+l-1;S<E;S++,T--){const P=f[S];f[S]=f[T],f[T]=P}}}invert(){return new we(this)}}cs.THUMBNAIL_SCALE_FACTOR=2;class Cd extends Te{constructor(l,u,f,p,b,E,S){if(super(u,f),this.dataWidth=p,this.dataHeight=b,this.left=E,this.top=S,l.BYTES_PER_ELEMENT===4){const T=u*f,P=new Uint8ClampedArray(T);for(let B=0;B<T;B++){const $=l[B],W=$>>16&255,re=$>>7&510,ue=$&255;P[B]=(W+re+ue)/4&255}this.luminances=P}else this.luminances=l;if(p===void 0&&(this.dataWidth=u),b===void 0&&(this.dataHeight=f),E===void 0&&(this.left=0),S===void 0&&(this.top=0),this.left+u>this.dataWidth||this.top+f>this.dataHeight)throw new w("Crop rectangle does not fit within image data.")}getRow(l,u){if(l<0||l>=this.getHeight())throw new w("Requested row is outside the image: "+l);const f=this.getWidth();(u==null||u.length<f)&&(u=new Uint8ClampedArray(f));const p=(l+this.top)*this.dataWidth+this.left;return k.arraycopy(this.luminances,p,u,0,f),u}getMatrix(){const l=this.getWidth(),u=this.getHeight();if(l===this.dataWidth&&u===this.dataHeight)return this.luminances;const f=l*u,p=new Uint8ClampedArray(f);let b=this.top*this.dataWidth+this.left;if(l===this.dataWidth)return k.arraycopy(this.luminances,b,p,0,f),p;for(let E=0;E<u;E++){const S=E*l;k.arraycopy(this.luminances,b,p,S,l),b+=this.dataWidth}return p}isCropSupported(){return!0}crop(l,u,f,p){return new Cd(this.luminances,f,p,this.dataWidth,this.dataHeight,this.left+l,this.top+u)}invert(){return new we(this)}}class Ym extends V{static forName(l){return this.getCharacterSetECIByName(l)}}class zo{}zo.ISO_8859_1=V.ISO8859_1;class Bl{isCompact(){return this.compact}setCompact(l){this.compact=l}getSize(){return this.size}setSize(l){this.size=l}getLayers(){return this.layers}setLayers(l){this.layers=l}getCodeWords(){return this.codeWords}setCodeWords(l){this.codeWords=l}getMatrix(){return this.matrix}setMatrix(l){this.matrix=l}}class Xm{static singletonList(l){return[l]}static min(l,u){return l.sort(u)[0]}}class Wm{constructor(l){this.previous=l}getPrevious(){return this.previous}}class Bi extends Wm{constructor(l,u,f){super(l),this.value=u,this.bitCount=f}appendTo(l,u){l.appendBits(this.value,this.bitCount)}add(l,u){return new Bi(this,l,u)}addBinaryShift(l,u){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Bi(this,l,u)}toString(){let l=this.value&(1<<this.bitCount)-1;return l|=1<<this.bitCount,"<"+I.toBinaryString(l|1<<this.bitCount).substring(1)+">"}}class $c extends Bi{constructor(l,u,f){super(l,0,0),this.binaryShiftStart=u,this.binaryShiftByteCount=f}appendTo(l,u){for(let f=0;f<this.binaryShiftByteCount;f++)(f===0||f===31&&this.binaryShiftByteCount<=62)&&(l.appendBits(31,5),this.binaryShiftByteCount>62?l.appendBits(this.binaryShiftByteCount-31,16):f===0?l.appendBits(Math.min(this.binaryShiftByteCount,31),5):l.appendBits(this.binaryShiftByteCount-31,5)),l.appendBits(u[this.binaryShiftStart+f],8)}addBinaryShift(l,u){return new $c(this,l,u)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Km(q,l,u){return new $c(q,l,u)}function Fl(q,l,u){return new Bi(q,l,u)}const Ul=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],fi=0,Gc=1,wa=2,Ad=3,qa=4,Vo=new Bi(null,0,0),Fi=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function v1(q){for(let l of q)F.fill(l,-1);return q[fi][qa]=0,q[Gc][qa]=0,q[Gc][fi]=28,q[Ad][qa]=0,q[wa][qa]=0,q[wa][fi]=15,q}const Ho=v1(F.createInt32Array(6,6));class $a{constructor(l,u,f,p){this.token=l,this.mode=u,this.binaryShiftByteCount=f,this.bitCount=p}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(l,u){let f=this.bitCount,p=this.token;if(l!==this.mode){let E=Fi[this.mode][l];p=Fl(p,E&65535,E>>16),f+=E>>16}let b=l===wa?4:5;return p=Fl(p,u,b),new $a(p,l,0,f+b)}shiftAndAppend(l,u){let f=this.token,p=this.mode===wa?4:5;return f=Fl(f,Ho[this.mode][l],p),f=Fl(f,u,5),new $a(f,this.mode,0,this.bitCount+p+5)}addBinaryShiftChar(l){let u=this.token,f=this.mode,p=this.bitCount;if(this.mode===qa||this.mode===wa){let S=Fi[f][fi];u=Fl(u,S&65535,S>>16),p+=S>>16,f=fi}let b=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,E=new $a(u,f,this.binaryShiftByteCount+1,p+b);return E.binaryShiftByteCount===2078&&(E=E.endBinaryShift(l+1)),E}endBinaryShift(l){if(this.binaryShiftByteCount===0)return this;let u=this.token;return u=Km(u,l-this.binaryShiftByteCount,this.binaryShiftByteCount),new $a(u,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(l){let u=this.bitCount+(Fi[this.mode][l.mode]>>16);return this.binaryShiftByteCount<l.binaryShiftByteCount?u+=$a.calculateBinaryShiftCost(l)-$a.calculateBinaryShiftCost(this):this.binaryShiftByteCount>l.binaryShiftByteCount&&l.binaryShiftByteCount>0&&(u+=10),u<=l.bitCount}toBitArray(l){let u=[];for(let p=this.endBinaryShift(l.length).token;p!==null;p=p.getPrevious())u.unshift(p);let f=new G;for(const p of u)p.appendTo(f,l);return f}toString(){return X.format("%s bits=%d bytes=%d",Ul[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(l){return l.binaryShiftByteCount>62?21:l.binaryShiftByteCount>31?20:l.binaryShiftByteCount>0?10:0}}$a.INITIAL_STATE=new $a(Vo,fi,0,0);function Zm(q){const l=X.getCharCode(" "),u=X.getCharCode("."),f=X.getCharCode(",");q[fi][l]=1;const p=X.getCharCode("Z"),b=X.getCharCode("A");for(let W=b;W<=p;W++)q[fi][W]=W-b+2;q[Gc][l]=1;const E=X.getCharCode("z"),S=X.getCharCode("a");for(let W=S;W<=E;W++)q[Gc][W]=W-S+2;q[wa][l]=1;const T=X.getCharCode("9"),P=X.getCharCode("0");for(let W=P;W<=T;W++)q[wa][W]=W-P+2;q[wa][f]=12,q[wa][u]=13;const B=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let W=0;W<B.length;W++)q[Ad][X.getCharCode(B[W])]=W;const $=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let W=0;W<$.length;W++)X.getCharCode($[W])>0&&(q[qa][X.getCharCode($[W])]=W);return q}const qo=Zm(F.createInt32Array(5,256));class Ui{constructor(l){this.text=l}encode(){const l=X.getCharCode(" "),u=X.getCharCode(`
`);let f=Xm.singletonList($a.INITIAL_STATE);for(let b=0;b<this.text.length;b++){let E,S=b+1<this.text.length?this.text[b+1]:0;switch(this.text[b]){case X.getCharCode("\r"):E=S===u?2:0;break;case X.getCharCode("."):E=S===l?3:0;break;case X.getCharCode(","):E=S===l?4:0;break;case X.getCharCode(":"):E=S===l?5:0;break;default:E=0}E>0?(f=Ui.updateStateListForPair(f,b,E),b++):f=this.updateStateListForChar(f,b)}return Xm.min(f,(b,E)=>b.getBitCount()-E.getBitCount()).toBitArray(this.text)}updateStateListForChar(l,u){const f=[];for(let p of l)this.updateStateForChar(p,u,f);return Ui.simplifyStates(f)}updateStateForChar(l,u,f){let p=this.text[u]&255,b=qo[l.getMode()][p]>0,E=null;for(let S=0;S<=qa;S++){let T=qo[S][p];if(T>0){if(E==null&&(E=l.endBinaryShift(u)),!b||S===l.getMode()||S===wa){const P=E.latchAndAppend(S,T);f.push(P)}if(!b&&Ho[l.getMode()][S]>=0){const P=E.shiftAndAppend(S,T);f.push(P)}}}if(l.getBinaryShiftByteCount()>0||qo[l.getMode()][p]===0){let S=l.addBinaryShiftChar(u);f.push(S)}}static updateStateListForPair(l,u,f){const p=[];for(let b of l)this.updateStateForPair(b,u,f,p);return this.simplifyStates(p)}static updateStateForPair(l,u,f,p){let b=l.endBinaryShift(u);if(p.push(b.latchAndAppend(qa,f)),l.getMode()!==qa&&p.push(b.shiftAndAppend(qa,f)),f===3||f===4){let E=b.latchAndAppend(wa,16-f).latchAndAppend(wa,1);p.push(E)}if(l.getBinaryShiftByteCount()>0){let E=l.addBinaryShiftChar(u).addBinaryShiftChar(u+1);p.push(E)}}static simplifyStates(l){let u=[];for(const f of l){let p=!0;for(const b of u){if(b.isBetterThanOrEqualTo(f)){p=!1;break}f.isBetterThanOrEqualTo(b)&&(u=u.filter(E=>E!==b))}p&&u.push(f)}return u}}class Vt{constructor(){}static encodeBytes(l){return Vt.encode(l,Vt.DEFAULT_EC_PERCENT,Vt.DEFAULT_AZTEC_LAYERS)}static encode(l,u,f){let p=new Ui(l).encode(),b=I.truncDivision(p.getSize()*u,100)+11,E=p.getSize()+b,S,T,P,B,$;if(f!==Vt.DEFAULT_AZTEC_LAYERS){if(S=f<0,T=Math.abs(f),T>(S?Vt.MAX_NB_BITS_COMPACT:Vt.MAX_NB_BITS))throw new w(X.format("Illegal value %s for layers",f));P=Vt.totalBitsInLayer(T,S),B=Vt.WORD_SIZE[T];let Ge=P-P%B;if($=Vt.stuffBits(p,B),$.getSize()+b>Ge)throw new w("Data to large for user specified layer");if(S&&$.getSize()>B*64)throw new w("Data to large for user specified layer")}else{B=0,$=null;for(let Ge=0;;Ge++){if(Ge>Vt.MAX_NB_BITS)throw new w("Data too large for an Aztec code");if(S=Ge<=3,T=S?Ge+1:Ge,P=Vt.totalBitsInLayer(T,S),E>P)continue;($==null||B!==Vt.WORD_SIZE[T])&&(B=Vt.WORD_SIZE[T],$=Vt.stuffBits(p,B));let Bt=P-P%B;if(!(S&&$.getSize()>B*64)&&$.getSize()+b<=Bt)break}}let W=Vt.generateCheckWords($,P,B),re=$.getSize()/B,ue=Vt.generateModeMessage(S,T,re),de=(S?11:14)+T*4,Ee=new Int32Array(de),_e;if(S){_e=de;for(let Ge=0;Ge<Ee.length;Ge++)Ee[Ge]=Ge}else{_e=de+1+2*I.truncDivision(I.truncDivision(de,2)-1,15);let Ge=I.truncDivision(de,2),Bt=I.truncDivision(_e,2);for(let At=0;At<Ge;At++){let Kr=At+I.truncDivision(At,15);Ee[Ge-At-1]=Bt-Kr-1,Ee[Ge+At]=Bt+Kr+1}}let Qe=new xe(_e);for(let Ge=0,Bt=0;Ge<T;Ge++){let At=(T-Ge)*4+(S?9:12);for(let Kr=0;Kr<At;Kr++){let Na=Kr*2;for(let Yn=0;Yn<2;Yn++)W.get(Bt+Na+Yn)&&Qe.set(Ee[Ge*2+Yn],Ee[Ge*2+Kr]),W.get(Bt+At*2+Na+Yn)&&Qe.set(Ee[Ge*2+Kr],Ee[de-1-Ge*2-Yn]),W.get(Bt+At*4+Na+Yn)&&Qe.set(Ee[de-1-Ge*2-Yn],Ee[de-1-Ge*2-Kr]),W.get(Bt+At*6+Na+Yn)&&Qe.set(Ee[de-1-Ge*2-Kr],Ee[Ge*2+Yn])}Bt+=At*8}if(Vt.drawModeMessage(Qe,S,_e,ue),S)Vt.drawBullsEye(Qe,I.truncDivision(_e,2),5);else{Vt.drawBullsEye(Qe,I.truncDivision(_e,2),7);for(let Ge=0,Bt=0;Ge<I.truncDivision(de,2)-1;Ge+=15,Bt+=16)for(let At=I.truncDivision(_e,2)&1;At<_e;At+=2)Qe.set(I.truncDivision(_e,2)-Bt,At),Qe.set(I.truncDivision(_e,2)+Bt,At),Qe.set(At,I.truncDivision(_e,2)-Bt),Qe.set(At,I.truncDivision(_e,2)+Bt)}let Ke=new Bl;return Ke.setCompact(S),Ke.setSize(_e),Ke.setLayers(T),Ke.setCodeWords(re),Ke.setMatrix(Qe),Ke}static drawBullsEye(l,u,f){for(let p=0;p<f;p+=2)for(let b=u-p;b<=u+p;b++)l.set(b,u-p),l.set(b,u+p),l.set(u-p,b),l.set(u+p,b);l.set(u-f,u-f),l.set(u-f+1,u-f),l.set(u-f,u-f+1),l.set(u+f,u-f),l.set(u+f,u-f+1),l.set(u+f,u+f-1)}static generateModeMessage(l,u,f){let p=new G;return l?(p.appendBits(u-1,2),p.appendBits(f-1,6),p=Vt.generateCheckWords(p,28,4)):(p.appendBits(u-1,5),p.appendBits(f-1,11),p=Vt.generateCheckWords(p,40,4)),p}static drawModeMessage(l,u,f,p){let b=I.truncDivision(f,2);if(u)for(let E=0;E<7;E++){let S=b-3+E;p.get(E)&&l.set(S,b-5),p.get(E+7)&&l.set(b+5,S),p.get(20-E)&&l.set(S,b+5),p.get(27-E)&&l.set(b-5,S)}else for(let E=0;E<10;E++){let S=b-5+E+I.truncDivision(E,5);p.get(E)&&l.set(S,b-7),p.get(E+10)&&l.set(b+7,S),p.get(29-E)&&l.set(S,b+7),p.get(39-E)&&l.set(b-7,S)}}static generateCheckWords(l,u,f){let p=l.getSize()/f,b=new jo(Vt.getGF(f)),E=I.truncDivision(u,f),S=Vt.bitsToWords(l,f,E);b.encode(S,E-p);let T=u%f,P=new G;P.appendBits(0,T);for(const B of Array.from(S))P.appendBits(B,f);return P}static bitsToWords(l,u,f){let p=new Int32Array(f),b,E;for(b=0,E=l.getSize()/u;b<E;b++){let S=0;for(let T=0;T<u;T++)S|=l.get(b*u+T)?1<<u-T-1:0;p[b]=S}return p}static getGF(l){switch(l){case 4:return je.AZTEC_PARAM;case 6:return je.AZTEC_DATA_6;case 8:return je.AZTEC_DATA_8;case 10:return je.AZTEC_DATA_10;case 12:return je.AZTEC_DATA_12;default:throw new w("Unsupported word size "+l)}}static stuffBits(l,u){let f=new G,p=l.getSize(),b=(1<<u)-2;for(let E=0;E<p;E+=u){let S=0;for(let T=0;T<u;T++)(E+T>=p||l.get(E+T))&&(S|=1<<u-1-T);(S&b)===b?(f.appendBits(S&b,u),E--):(S&b)===0?(f.appendBits(S|1,u),E--):f.appendBits(S,u)}return f}static totalBitsInLayer(l,u){return((u?88:112)+16*l)*l}}Vt.DEFAULT_EC_PERCENT=33,Vt.DEFAULT_AZTEC_LAYERS=0,Vt.MAX_NB_BITS=32,Vt.MAX_NB_BITS_COMPACT=4,Vt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class $o{encode(l,u,f,p){return this.encodeWithHints(l,u,f,p,null)}encodeWithHints(l,u,f,p,b){let E=zo.ISO_8859_1,S=Vt.DEFAULT_EC_PERCENT,T=Vt.DEFAULT_AZTEC_LAYERS;return b!=null&&(b.has(sn.CHARACTER_SET)&&(E=Ym.forName(b.get(sn.CHARACTER_SET).toString())),b.has(sn.ERROR_CORRECTION)&&(S=I.parseInt(b.get(sn.ERROR_CORRECTION).toString())),b.has(sn.AZTEC_LAYERS)&&(T=I.parseInt(b.get(sn.AZTEC_LAYERS).toString()))),$o.encodeLayers(l,u,f,p,E,S,T)}static encodeLayers(l,u,f,p,b,E,S){if(u!==ie.AZTEC)throw new w("Can only encode AZTEC, but got "+u);let T=Vt.encode(X.getBytes(l,b),E,S);return $o.renderResult(T,f,p)}static renderResult(l,u,f){let p=l.getMatrix();if(p==null)throw new Ie;let b=p.getWidth(),E=p.getHeight(),S=Math.max(u,b),T=Math.max(f,E),P=Math.min(S/b,T/E),B=(S-b*P)/2,$=(T-E*P)/2,W=new xe(S,T);for(let re=0,ue=$;re<E;re++,ue+=P)for(let de=0,Ee=B;de<b;de++,Ee+=P)p.get(de,re)&&W.setRegion(Ee,ue,P,P);return W}}r.AbstractExpandedDecoder=Rr,r.ArgumentException=y,r.ArithmeticException=ye,r.AztecCode=Bl,r.AztecCodeReader=pa,r.AztecCodeWriter=$o,r.AztecDecoder=et,r.AztecDetector=La,r.AztecDetectorResult=Re,r.AztecEncoder=Vt,r.AztecHighLevelEncoder=Ui,r.AztecPoint=Cr,r.BarcodeFormat=ie,r.Binarizer=D,r.BinaryBitmap=C,r.BitArray=G,r.BitMatrix=xe,r.BitSource=Va,r.BrowserAztecCodeReader=Ls,r.BrowserBarcodeReader=m1,r.BrowserCodeReader=fe,r.BrowserDatamatrixCodeReader=Fc,r.BrowserMultiFormatReader=Gm,r.BrowserPDF417Reader=p1,r.BrowserQRCodeReader=y1,r.BrowserQRCodeSvgWriter=Li,r.CharacterSetECI=V,r.ChecksumException=_,r.Code128Reader=ge,r.Code39Reader=Je,r.DataMatrixDecodedBitStreamParser=Bs,r.DataMatrixReader=Fs,r.DecodeHintType=z,r.DecoderResult=ve,r.DefaultGridSampler=ar,r.DetectorResult=nt,r.EAN13Reader=Gr,r.EncodeHintType=sn,r.Exception=x,r.FormatException=L,r.GenericGF=je,r.GenericGFPoly=be,r.GlobalHistogramBinarizer=ne,r.GridSampler=St,r.GridSamplerInstance=$r,r.HTMLCanvasElementLuminanceSource=te,r.HybridBinarizer=se,r.ITFReader=rt,r.IllegalArgumentException=w,r.IllegalStateException=Ie,r.InvertedLuminanceSource=we,r.LuminanceSource=Te,r.MathUtils=mt,r.MultiFormatOneDReader=za,r.MultiFormatReader=$m,r.MultiFormatWriter=b1,r.NotFoundException=ae,r.OneDReader=Gt,r.PDF417DecodedBitStreamParser=ke,r.PDF417DecoderErrorCorrection=js,r.PDF417Reader=On,r.PDF417ResultMetadata=Il,r.PerspectiveTransform=pt,r.PlanarYUVLuminanceSource=cs,r.QRCodeByteMatrix=qc,r.QRCodeDataMask=la,r.QRCodeDecodedBitStreamParser=pr,r.QRCodeDecoderErrorCorrectionLevel=Ft,r.QRCodeDecoderFormatInformation=pn,r.QRCodeEncoder=xr,r.QRCodeEncoderQRCode=Ii,r.QRCodeMaskUtil=Ir,r.QRCodeMatrixUtil=vt,r.QRCodeMode=gt,r.QRCodeReader=Us,r.QRCodeVersion=dt,r.QRCodeWriter=Ll,r.RGBLuminanceSource=Cd,r.RSS14Reader=sr,r.RSSExpandedReader=$e,r.ReaderException=Hc,r.ReedSolomonDecoder=ut,r.ReedSolomonEncoder=jo,r.ReedSolomonException=Ze,r.Result=ce,r.ResultMetadataType=He,r.ResultPoint=tt,r.StringUtils=X,r.UnsupportedOperationException=Q,r.VideoInputDevice=K,r.WhiteRectangleDetector=Be,r.WriterException=ir,r.ZXingArrays=F,r.ZXingCharset=Ym,r.ZXingInteger=I,r.ZXingStandardCharsets=zo,r.ZXingStringBuilder=he,r.ZXingStringEncoding=Y,r.ZXingSystem=k,r.createAbstractExpandedDecoder=Ue,Object.defineProperty(r,"__esModule",{value:!0})}))})(Of,Of.exports)),Of.exports}var kr=Zue();const Que=ki(kr),Jue=ZO({__proto__:null,default:Que},[kr]);var zO=(function(){function e(t,r,n){if(this.formatMap=new Map([[it.QR_CODE,kr.BarcodeFormat.QR_CODE],[it.AZTEC,kr.BarcodeFormat.AZTEC],[it.CODABAR,kr.BarcodeFormat.CODABAR],[it.CODE_39,kr.BarcodeFormat.CODE_39],[it.CODE_93,kr.BarcodeFormat.CODE_93],[it.CODE_128,kr.BarcodeFormat.CODE_128],[it.DATA_MATRIX,kr.BarcodeFormat.DATA_MATRIX],[it.MAXICODE,kr.BarcodeFormat.MAXICODE],[it.ITF,kr.BarcodeFormat.ITF],[it.EAN_13,kr.BarcodeFormat.EAN_13],[it.EAN_8,kr.BarcodeFormat.EAN_8],[it.PDF_417,kr.BarcodeFormat.PDF_417],[it.RSS_14,kr.BarcodeFormat.RSS_14],[it.RSS_EXPANDED,kr.BarcodeFormat.RSS_EXPANDED],[it.UPC_A,kr.BarcodeFormat.UPC_A],[it.UPC_E,kr.BarcodeFormat.UPC_E],[it.UPC_EAN_EXTENSION,kr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Jue)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var i=this.createZXingFormats(t),o=new Map;o.set(kr.DecodeHintType.POSSIBLE_FORMATS,i),o.set(kr.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(n,i){try{n(r.decode(t))}catch(o){i(o)}})},e.prototype.decode=function(t){var r=new kr.MultiFormatReader(this.verbose,this.hints),n=new kr.HTMLCanvasElementLuminanceSource(t),i=new kr.BinaryBitmap(new kr.HybridBinarizer(n)),o=r.decode(i);return{text:o.text,format:hI.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,i){t.set(r,n)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],n=0,i=t;n<i.length;n++){var o=i[n];this.formatMap.has(o)?r.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),ede=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function g(y){try{x(n.next(y))}catch(w){d(w)}}function h(y){try{x(n.throw(y))}catch(w){d(w)}}function x(y){y.done?o(y.value):i(y.value).then(g,h)}x((n=n.apply(e,t||[])).next())})},tde=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(x){return function(y){return h([x,y])}}function h(x){if(n)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(r=0)),r;)try{if(n=1,i&&(o=x[0]&2?i.return:x[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,x[1])).done)return o;switch(i=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,i=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){r.label=x[1];break}if(x[0]===6&&r.label<o[1]){r.label=o[1],o=x;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(x);break}o[2]&&r.ops.pop(),r.trys.pop();continue}x=t.call(e,r)}catch(y){x=[6,y],i=0}finally{n=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},VO=(function(){function e(t,r,n){if(this.formatMap=new Map([[it.QR_CODE,"qr_code"],[it.AZTEC,"aztec"],[it.CODABAR,"codabar"],[it.CODE_39,"code_39"],[it.CODE_93,"code_93"],[it.CODE_128,"code_128"],[it.DATA_MATRIX,"data_matrix"],[it.ITF,"itf"],[it.EAN_13,"ean_13"],[it.EAN_8,"ean_8"],[it.PDF_417,"pdf417"],[it.UPC_A,"upc_a"],[it.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return ede(this,void 0,void 0,function(){var r,n;return tde(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=i.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:hI.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,n=0,i=0,o=t;i<o.length;i++){var d=o[i],g=d.boundingBox.width*d.boundingBox.height;g>n&&(n=g,r=d)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],n=0,i=t;n<i.length;n++){var o=i[n];this.formatMap.has(o)?r.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,i){t.set(r,n)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),HO=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function g(y){try{x(n.next(y))}catch(w){d(w)}}function h(y){try{x(n.throw(y))}catch(w){d(w)}}function x(y){y.done?o(y.value):i(y.value).then(g,h)}x((n=n.apply(e,t||[])).next())})},qO=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(x){return function(y){return h([x,y])}}function h(x){if(n)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(r=0)),r;)try{if(n=1,i&&(o=x[0]&2?i.return:x[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,x[1])).done)return o;switch(i=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,i=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){r.label=x[1];break}if(x[0]===6&&r.label<o[1]){r.label=o[1],o=x;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(x);break}o[2]&&r.ops.pop(),r.trys.pop();continue}x=t.call(e,r)}catch(y){x=[6,y],i=0}finally{n=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},rde=(function(){function e(t,r,n,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&VO.isSupported()?(this.primaryDecoder=new VO(t,n,i),this.secondaryDecoder=new zO(t,n,i)):this.primaryDecoder=new zO(t,n,i)}return e.prototype.decodeAsync=function(t){return HO(this,void 0,void 0,function(){var r;return qO(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return HO(this,void 0,void 0,function(){var r,n;return qO(this,function(i){switch(i.label){case 0:r=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,i.sent()];case 3:if(n=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,n=this.executionResults;r<n.length;r++){var i=n[r];t+=i}var o=t/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),BN=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),up=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function g(y){try{x(n.next(y))}catch(w){d(w)}}function h(y){try{x(n.throw(y))}catch(w){d(w)}}function x(y){y.done?o(y.value):i(y.value).then(g,h)}x((n=n.apply(e,t||[])).next())})},dp=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(x){return function(y){return h([x,y])}}function h(x){if(n)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(r=0)),r;)try{if(n=1,i&&(o=x[0]&2?i.return:x[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,x[1])).done)return o;switch(i=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,i=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){r.label=x[1];break}if(x[0]===6&&r.label<o[1]){r.label=o[1],o=x;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(x);break}o[2]&&r.ops.pop(),r.trys.pop();continue}x=t.call(e,r)}catch(y){x=[6,y],i=0}finally{n=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},pI=(function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e})(),nde=(function(e){BN(t,e);function t(r,n){return e.call(this,r,n)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var n={};n[this.name]=r;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(pI),ade=(function(e){BN(t,e);function t(r){return e.call(this,"zoom",r)||this}return t})(nde),sde=(function(e){BN(t,e);function t(r){return e.call(this,"torch",r)||this}return t})(pI),ide=(function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new ade(this.track)},e.prototype.torchFeature=function(){return new sde(this.track)},e})(),lde=(function(){function e(t,r,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=t.surface.clientWidth,i=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,i),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,i){return up(this,void 0,void 0,function(){var o,d;return dp(this,function(g){switch(g.label){case 0:return o=new e(t,r,i),n.aspectRatio?(d={aspectRatio:n.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(d)]):[3,2];case 1:g.sent(),g.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,n=function(){setTimeout(t,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return up(this,void 0,void 0,function(){return dp(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,n){var i=t.mediaStream.getVideoTracks(),o=i.length,d=0;t.mediaStream.getVideoTracks().forEach(function(g){t.mediaStream.removeTrack(g),g.stop(),++d,d>=o&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new ide(this.getFirstTrackOrFail())},e})(),ode=(function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,n){return up(this,void 0,void 0,function(){return dp(this,function(i){return[2,lde.create(t,this.mediaStream,r,n)]})})},e.create=function(t){return up(this,void 0,void 0,function(){var r,n;return dp(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=i.sent(),[2,new e(n)]}})})},e})(),$O=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function g(y){try{x(n.next(y))}catch(w){d(w)}}function h(y){try{x(n.throw(y))}catch(w){d(w)}}function x(y){y.done?o(y.value):i(y.value).then(g,h)}x((n=n.apply(e,t||[])).next())})},GO=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(x){return function(y){return h([x,y])}}function h(x){if(n)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(r=0)),r;)try{if(n=1,i&&(o=x[0]&2?i.return:x[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,x[1])).done)return o;switch(i=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,i=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){r.label=x[1];break}if(x[0]===6&&r.label<o[1]){r.label=o[1],o=x;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(x);break}o[2]&&r.ops.pop(),r.trys.pop();continue}x=t.call(e,r)}catch(y){x=[6,y],i=0}finally{n=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},cde=(function(){function e(){}return e.failIfNotSupported=function(){return $O(this,void 0,void 0,function(){return GO(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return $O(this,void 0,void 0,function(){return GO(this,function(r){return[2,ode.create(t)]})})},e})(),ude=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function g(y){try{x(n.next(y))}catch(w){d(w)}}function h(y){try{x(n.throw(y))}catch(w){d(w)}}function x(y){y.done?o(y.value):i(y.value).then(g,h)}x((n=n.apply(e,t||[])).next())})},dde=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(x){return function(y){return h([x,y])}}function h(x){if(n)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(r=0)),r;)try{if(n=1,i&&(o=x[0]&2?i.return:x[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,x[1])).done)return o;switch(i=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,i=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){r.label=x[1];break}if(x[0]===6&&r.label<o[1]){r.label=o[1],o=x;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(x);break}o[2]&&r.ops.pop(),r.trys.pop();continue}x=t.call(e,r)}catch(y){x=[6,y],i=0}finally{n=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},fde=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Lu.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Lu.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return ude(this,void 0,void 0,function(){var t,r,n,i,o,d,g;return dde(this,function(h){switch(h.label){case 0:return t=function(x){for(var y=x.getVideoTracks(),w=0,C=y;w<C.length;w++){var _=C[w];_.enabled=!1,_.stop(),x.removeTrack(_)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=h.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=h.sent(),i=[],o=0,d=n;o<d.length;o++)g=d[o],g.kind==="videoinput"&&i.push({id:g.deviceId,label:g.label});return t(r),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var n=function(o){for(var d=[],g=0,h=o;g<h.length;g++){var x=h[g];x.kind==="video"&&d.push({id:x.id,label:x.label})}t(d)},i=MediaStreamTrack;i.getSources(n)})},e})(),Jr;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Jr||(Jr={}));var mde=(function(){function e(){this.state=Jr.NOT_STARTED,this.onGoingTransactionNewState=Jr.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Jr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Jr.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Jr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Jr.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Jr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Jr.UNKNOWN:throw"Transition from unknown is not allowed";case Jr.NOT_STARTED:this.failIfNewStateIs(t,[Jr.PAUSED]);break;case Jr.SCANNING:break;case Jr.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var n=0,i=r;n<i.length;n++){var o=i[n];if(t===o)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e})(),hde=(function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Jr.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Jr.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Jr.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Jr.PAUSED},e})(),gde=(function(){function e(){}return e.create=function(){return new hde(new mde)},e})(),pde=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ja=(function(e){pde(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(Yue),yde=(function(){function e(t,r){this.logger=r,this.fps=Ja.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Ja.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?gI.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!rl(this.qrbox)},e.create=function(t,r){return new e(t,r)},e})(),xv=(function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new Wue(this.verbose),this.qrcode=new rde(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=gde.create()}return e.prototype.start=function(t,r,n,i){var o=this;if(!t)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var d;i?d=i:d=this.verbose?this.logger.log:function(){};var g=yde.create(r,this.logger);this.clearElement();var h=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?h=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=h,y=document.getElementById(this.elementId);y.clientWidth?y.clientWidth:Ja.DEFAULT_WIDTH,y.style.position="relative",this.shouldScan=!0,this.element=y;var w=this,C=this.stateManagerProxy.startTransition(Jr.SCANNING);return new Promise(function(_,D){var k=x?g.videoConstraints:w.createVideoConstraints(t);if(!k){C.cancel(),D("videoConstraints should be defined");return}var M={};(!x||g.aspectRatio)&&(M.aspectRatio=g.aspectRatio);var R={onRenderSurfaceReady:function(F,I){w.setupUi(F,I,g),w.isScanning=!0,w.foreverScan(g,n,d)}};cde.failIfNotSupported().then(function(F){F.create(k).then(function(I){return I.render(o.element,M,R).then(function(G){w.renderedCamera=G,C.execute(),_(null)}).catch(function(G){C.cancel(),D(G)})}).catch(function(I){C.cancel(),D(Lu.errorGettingUserMedia(I))})}).catch(function(F){C.cancel(),D(Lu.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Jr.PAUSED),this.showPausedState(),(rl(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(Jr.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(Jr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var o=document.getElementById(Ja.SHADED_REGION_ELEMENT_ID);o&&t.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),n(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),r.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(t,r){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(rl(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var d=new Image;d.onload=function(){var g=d.width,h=d.height,x=document.getElementById(n.elementId),y=x.clientWidth?x.clientWidth:Ja.DEFAULT_WIDTH,w=Math.max(x.clientHeight?x.clientHeight:h,Ja.FILE_SCAN_MIN_HEIGHT),C=n.computeCanvasDrawConfig(g,h,y,w);if(r){var _=n.createCanvasElement(y,w,"qr-canvas-visible");_.style.display="inline-block",x.appendChild(_);var D=_.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=y,D.canvas.height=w,D.drawImage(d,0,0,g,h,C.x,C.y,C.width,C.height)}var k=Ja.FILE_SCAN_HIDDEN_CANVAS_PADDING,M=Math.max(d.width,C.width),R=Math.max(d.height,C.height),F=M+2*k,I=R+2*k,G=n.createCanvasElement(F,I);x.appendChild(G);var U=G.getContext("2d");if(!U)throw"Unable to get 2d context from canvas";U.canvas.width=F,U.canvas.height=I,U.drawImage(d,0,0,g,h,k,k,M,R);try{n.qrcode.decodeRobustlyAsync(G).then(function(z){i(UO.createFromQrcodeResult(z))}).catch(o)}catch(z){o("QR code parse error, error = ".concat(z))}},d.onerror=o,d.onabort=o,d.onstalled=o,d.onsuspend=o,d.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return fde.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!gI.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[it.QR_CODE,it.AZTEC,it.CODABAR,it.CODE_39,it.CODE_93,it.CODE_128,it.DATA_MATRIX,it.MAXICODE,it.ITF,it.EAN_13,it.EAN_8,it.PDF_417,it.RSS_14,it.RSS_EXPANDED,it.UPC_A,it.UPC_E,it.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],i=0,o=t.formatsToSupport;i<o.length;i++){var d=o[i];Gue(d)?n.push(d):this.logger.warn("Invalid format: ".concat(d," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(rl(t))return!0;if(!rl(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(rl(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return rl(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,n){var i=this,o=n.qrbox;this.validateQrboxConfig(o);var d=this.toQrdimensions(t,r,o),g=function(x){if(x<Ja.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ja.MIN_QR_BOX_SIZE,"px.")},h=function(x){return x>t&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=t),x};g(d.width),g(d.height),d.width=h(d.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(t,r)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return n},e.prototype.setupUi=function(t,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,n);var i=rl(n.qrbox)?{width:t,height:r}:n.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(t,r,i);o.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=n.isShadedBoxEnabled()&&o.height<=r,g={x:0,y:0,width:t,height:r},h=d?this.getShadedRegionBounds(t,r,o):g,x=this.createCanvasElement(h.width,h.height),y={willReadFrequently:!0},w=x.getContext("2d",y);w.canvas.width=h.width,w.canvas.height=h.height,this.element.append(x),d&&this.possiblyInsertShadingElement(this.element,t,r,o),this.createScannerPausedUiElement(this.element),this.qrRegion=h,this.context=w,this.canvasElement=x},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=Lu.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return t(i.text,UO.createFromQrcodeResult(i)),n.possiblyUpdateShaders(!0),!0}).catch(function(i){n.possiblyUpdateShaders(!1);var o=Lu.codeParseError(i);return r(o,Xue.createFrom(o)),!1})},e.prototype.foreverScan=function(t,r,n){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),d=o.videoWidth/o.clientWidth,g=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var h=this.qrRegion.width*d,x=this.qrRegion.height*g,y=this.qrRegion.x*d,w=this.qrRegion.y*g;this.context.drawImage(o,y,w,h,x,0,0,this.qrRegion.width,this.qrRegion.height);var C=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(t,r,n)},i.getTimeoutFps(t.fps))};this.scanContext(r,n).then(function(_){!_&&t.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(r,n).finally(function(){C()})):C()}).catch(function(_){i.logger.logError("Error happend while scanning context",_),C()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",n="deviceId",i={user:!0,environment:!0},o="exact",d=function(D){if(D in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(D,"'")},g=Object.keys(t);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var h=Object.keys(t)[0];if(h!==r&&h!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(h===r){var x=t.facingMode;if(typeof x=="string"){if(d(x))return{facingMode:x}}else if(typeof x=="object")if(o in x){if(d(x["".concat(o)]))return{facingMode:{exact:x["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var y=typeof x;throw"Invalid type of 'facingMode' = ".concat(y)}}else{var w=t.deviceId;if(typeof w=="string")return{deviceId:w};if(typeof w=="object"){if(o in w)return{deviceId:{exact:w["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var C=typeof w;throw"Invalid type of 'deviceId' = ".concat(C)}}}var _=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(_)},e.prototype.computeCanvasDrawConfig=function(t,r,n,i){if(t<=n&&r<=i){var o=(n-t)/2,d=(i-r)/2;return{x:o,y:d,width:t,height:r}}else{var g=t,h=r;return t>n&&(r=n/t*r,t=n),r>i&&(t=i/r*t,r=i),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(h)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,n,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?Ja.BORDER_SHADER_MATCH_COLOR:Ja.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,n){var i=t,o=r,d=document.createElement("canvas");return d.style.width="".concat(i,"px"),d.style.height="".concat(o,"px"),d.style.display="none",d.id=rl(n)?"qr-canvas":n,d},e.prototype.getShadedRegionBounds=function(t,r,n){if(n.width>t||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(t,r,n,i){if(!(r-i.width<1||n-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var d=(r-i.width)/2,g=(n-i.height)/2;if(o.style.borderLeft="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(Ja.SHADED_REGION_ELEMENT_ID),r-i.width<11||n-i.height<11)this.hasBorderShaders=!1;else{var h=5,x=40;this.insertShaderBorders(o,x,h,-h,null,0,!0),this.insertShaderBorders(o,x,h,-h,null,0,!1),this.insertShaderBorders(o,x,h,null,-h,0,!0),this.insertShaderBorders(o,x,h,null,-h,0,!1),this.insertShaderBorders(o,h,x+h,-h,null,-h,!0),this.insertShaderBorders(o,h,x+h,null,-h,-h,!0),this.insertShaderBorders(o,h,x+h,-h,null,-h,!1),this.insertShaderBorders(o,h,x+h,null,-h,-h,!1),this.hasBorderShaders=!0}t.append(o)}},e.prototype.insertShaderBorders=function(t,r,n,i,o,d,g){var h=document.createElement("div");h.style.position="absolute",h.style.backgroundColor=Ja.BORDER_SHADER_DEFAULT_COLOR,h.style.width="".concat(r,"px"),h.style.height="".concat(n,"px"),i!==null&&(h.style.top="".concat(i,"px")),o!==null&&(h.style.bottom="".concat(o,"px")),g?h.style.left="".concat(d,"px"):h.style.right="".concat(d,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(h),t.appendChild(h)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e})(),YO;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(YO||(YO={}));class xde extends N.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Scanner Error:",t,r)}render(){return this.state.hasError?a.createElement("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-center"},a.createElement("p",{className:"text-red-800 font-semibold"},"Scanner Error"),a.createElement("p",{className:"text-sm text-red-600 mt-2"},"Please refresh the page to try again."),a.createElement("button",{onClick:()=>window.location.reload(),className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"},"Refresh Page")):this.props.children}}const yI=N.memo(({scannerContainerId:e})=>{const t=N.useRef(null),r=N.useRef(null);return N.useEffect(()=>(console.log("[ScannerContainer] Mounted ONCE",{scannerContainerId:e,containerExists:!!document.getElementById(e)}),()=>{console.log("[ScannerContainer] Unmounting (should only happen on page leave)",{scannerContainerId:e})}),[e]),a.createElement("div",{id:e,ref:t,className:"relative w-full aspect-square max-w-[320px] sm:max-w-md mx-auto rounded-xl overflow-hidden bg-gray-100 border-2 border-dashed border-gray-300",style:{minHeight:"320px"}},a.createElement("div",{ref:r,"data-placeholder":"true",className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500 p-4 z-10 bg-gray-100"},a.createElement(Fk,{className:"w-10 h-10 sm:w-12 sm:h-12 mb-3"}),a.createElement("p",{className:"text-sm font-medium text-center"},"Camera Preview"),a.createElement("p",{className:"text-xs text-gray-400 mt-1 text-center"},"Tap the button below to start scanning")))},()=>!0);yI.displayName="ScannerContainer";function bde(){const[e,t]=N.useState(!1),[r,n]=N.useState(null),[i,o]=N.useState("unknown"),[d,g]=N.useState([]),[h,x]=N.useState(null),[y,w]=N.useState(!1),[C,_]=N.useState([]),[D,k]=N.useState(""),[M,R]=N.useState(!0),[F,I]=N.useState(!1),[G,U]=N.useState(null),[z,L]=N.useState(!1),[H,V]=N.useState(null),[Q,Y]=N.useState(!1),X=N.useRef(null),he=N.useRef(`qr-scanner-${Date.now()}`).current,xe=N.useRef(!1),ae=N.useRef(!0),ne=N.useRef(0);N.useEffect(()=>{console.log("[ScanQR] State changed:",{isScanning:e,isLoading:y,permissionStatus:i,availableCameras:d.length,hasScanner:!!X.current})},[e,y,i,d]),N.useEffect(()=>{console.log("[ScanQR] Component mounted",{scannerContainerId:he});const be=window.location.protocol==="https:"||window.location.hostname==="localhost";R(be);const ye=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return I(ye),ae.current=!0,()=>{if(console.log("[ScanQR] Component unmounting",{scannerContainerId:he,hasScanner:!!X.current,isCleaningUp:xe.current}),ae.current=!1,X.current&&!xe.current){xe.current=!0;const je=X.current;try{const Ze=je.getState();console.log("[ScanQR] Unmount cleanup - scanner state:",Ze),Ze===2&&je.stop().catch(Ie=>{console.log("[ScanQR] Unmount stop error:",Ie.message)})}catch(Ze){console.log("[ScanQR] Unmount cleanup error:",Ze.message)}X.current=null,setTimeout(()=>{const Ze=document.getElementById(he);console.log("[ScanQR] Clearing container after unmount:",{containerExists:!!Ze,children:Ze?.children.length||0}),Ze&&(Ze.innerHTML="")},0)}}},[he]);const se=async()=>{try{const be=await xv.getCameras();if(be&&be.length>0){g(be);const ye=be.find(je=>{const Ze=je.label.toLowerCase();return Ze.includes("back")||Ze.includes("rear")||Ze.includes("environment")||Ze.includes("0")});return x(ye?.id||be[0].id),o("granted"),!0}else return k("No cameras found on this device."),o("error"),!1}catch(be){return console.error("Error getting cameras:",be),Te(be),!1}},Te=be=>{console.error("Camera error:",be);const ye=be.name||"",je=be.message||"";ye==="NotAllowedError"||je.includes("Permission")?(o("denied"),k(F?"Camera permission denied. On mobile, please go to your browser settings, find this site, and allow camera access.":"Camera permission was denied. Please allow camera access in your browser settings.")):ye==="NotFoundError"||je.includes("not found")?(o("error"),k("No camera found on this device.")):ye==="NotReadableError"||je.includes("in use")?(o("error"),k("Camera is already in use by another application. Please close other apps using the camera.")):ye==="SecurityError"?(o("error"),k("Camera access blocked due to security settings. Please use HTTPS.")):ye==="AbortError"?(o("error"),k("Camera access was interrupted. Please try again.")):(o("error"),k(je||"Failed to access camera. Please try again."))},we=async()=>{if(w(!0),o("checking"),k(""),F&&!M)return o("error"),k("Camera access requires HTTPS on mobile devices. Please access this site via HTTPS."),w(!1),!1;if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return o("error"),k("Your browser does not support camera access. Please try a different browser."),w(!1),!1;try{let be;try{be=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}}})}catch(je){console.log("Environment camera failed, trying any camera:",je),be=await navigator.mediaDevices.getUserMedia({video:!0})}return be.getTracks().forEach(je=>je.stop()),await se()?(ht.success("Camera access granted!"),!0):!1}catch(be){return console.error("Camera permission error:",be),Te(be),be.name==="NotAllowedError"?ht.error("Camera permission denied."):ht.error("Failed to access camera."),!1}finally{w(!1)}},te=async()=>{if(console.log("[startScanner] Called",{availableCameras:d.length,isScanning:e,isLoading:y,hasExistingScanner:!!X.current}),d.length===0){if(!await we())return;await new Promise(ye=>setTimeout(ye,100))}w(!0),n(null);try{const be=document.getElementById(he);if(console.log("[startScanner] Container check",{containerExists:!!be,containerChildren:be?.children.length||0,containerHTML:be?.innerHTML.substring(0,100)}),!be){ht.error("Scanner container not ready. Please try again."),w(!1);return}X.current&&!xe.current&&(console.log("[startScanner] Stopping existing scanner"),await K(),await new Promise(Le=>setTimeout(Le,300)));const ye=be.querySelectorAll("video, canvas, #qr-shaded-region");if(console.log("[startScanner] Clearing leftover elements",{count:ye.length,types:Array.from(ye).map(Le=>Le.tagName)}),ye.forEach(Le=>{try{Le.parentNode===be&&(console.log("[startScanner] Removing element:",Le.tagName,Le.id),Le.remove())}catch(et){console.log("[startScanner] Error removing leftover element:",et.message)}}),!ae.current){console.log("[startScanner] Component unmounted, aborting"),w(!1);return}console.log("[startScanner] Creating new Html5Qrcode instance");const je=new xv(he);X.current=je;const Ze={fps:10,qrbox:F?{width:200,height:200}:{width:250,height:250},aspectRatio:1,disableFlip:!1},Ie=h||{facingMode:"environment"};if(console.log("[startScanner] Starting scanner with config",{cameraConfig:Ie,config:Ze}),await je.start(Ie,Ze,fe,ce),console.log("[startScanner] Scanner started successfully",{containerChildren:be.children.length,hasVideo:!!be.querySelector("video"),hasCanvas:!!be.querySelector("canvas")}),!ae.current){console.log("[startScanner] Component unmounted after start, stopping"),await je.stop().catch(()=>{});return}const ut=be.querySelector('[data-placeholder="true"]');ut&&(console.log("[startScanner] Hiding placeholder via DOM"),ut.style.display="none"),be.classList.remove("bg-gray-100"),be.classList.add("bg-black"),ne.current=0,t(!0),o("granted"),ht.info("Scanner started. Point camera at a QR code."),console.log("[startScanner]  Scanner ready - point camera at QR code")}catch(be){if(console.error("Error starting scanner:",be),h&&be.message?.includes("Unable to start"))try{const ye=new xv(he);X.current=ye,await ye.start({facingMode:"environment"},{fps:10,qrbox:{width:200,height:200}},fe,ce),t(!0),o("granted"),ht.info("Scanner started.");return}catch(ye){console.error("Fallback also failed:",ye)}Te(be),ht.error("Failed to start scanner.")}finally{w(!1)}},K=async()=>{if(console.log("[stopScanner] Called",{hasScanner:!!X.current,isCleaningUp:xe.current,isMounted:ae.current}),!X.current||xe.current){console.log("[stopScanner] Early return - no scanner or already cleaning"),t(!1);return}xe.current=!0;try{const be=X.current,ye=be.getState();console.log("[stopScanner] Scanner state:",ye),ye===2&&(console.log("[stopScanner] Stopping scanner..."),await be.stop(),console.log("[stopScanner] Scanner stopped successfully"),ae.current&&await new Promise(je=>setTimeout(je,200)))}catch(be){console.error("[stopScanner] Error stopping scanner:",be);try{const ye=document.getElementById(he);if(ye){const je=ye.querySelector("video");je&&je.srcObject&&(console.log("[stopScanner] Manually stopping video tracks"),je.srcObject.getTracks().forEach(Ze=>Ze.stop()))}}catch(ye){console.log("[stopScanner] Could not stop video tracks:",ye.message)}}finally{console.log("[stopScanner] Cleanup - setting refs to null"),X.current=null,xe.current=!1;const be=document.getElementById(he);if(be){const ye=be.querySelector('[data-placeholder="true"]');ye&&(console.log("[stopScanner] Showing placeholder via DOM"),ye.style.display="flex"),be.classList.remove("bg-black"),be.classList.add("bg-gray-100")}ae.current&&t(!1)}},ee=async be=>{Y(!0);try{const je=await(await fetch(`http://192.168.29.105:5000/api/api/qr/validate/${be}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();return console.log("[validateTicket] API Response:",je),je}catch(ye){return console.error("[validateTicket] API Error:",ye),{status:500,message:"Failed to validate ticket",error:ye.message,data:null}}finally{Y(!1)}},fe=async(be,ye)=>{console.log("[onScanSuccess] QR Code scanned:",be),n(be);let je=null;try{const Ie=new URL(be),ut={};Ie.searchParams.forEach((Le,et)=>{ut[et]=Le}),je={type:"url",fullUrl:be,protocol:Ie.protocol,host:Ie.host,pathname:Ie.pathname,parameters:ut,hash:Ie.hash||null},console.log("[onScanSuccess]  URL detected!"),console.log("[onScanSuccess] Full URL:",be),console.log("[onScanSuccess] Protocol:",Ie.protocol),console.log("[onScanSuccess] Host:",Ie.host),console.log("[onScanSuccess] Pathname:",Ie.pathname),console.log("[onScanSuccess] Parameters:",ut),Object.keys(ut).length>0?(console.log("[onScanSuccess]  Extracted Parameters:"),Object.entries(ut).forEach(([Le,et])=>{console.log(`   ${Le}: ${et}`)})):console.log("[onScanSuccess]  No parameters found in URL"),Ie.hash&&console.log("[onScanSuccess] Hash:",Ie.hash)}catch{console.log("[onScanSuccess]  Not a URL, just plain text:",be),je={type:"text",text:be}}U(je);let Ze=null;je.type==="url"&&je.parameters.id?(console.log("[onScanSuccess] Validating ticket with API..."),ht.info(" Validating ticket..."),Ze=await ee(je.parameters.id),console.log("[onScanSuccess] Full API Response:",JSON.stringify(Ze,null,2)),V(Ze),Ze.status===200?(console.log("[onScanSuccess] API Data:",{message:Ze.message,isValid:Ze.data?.isValid,isAlreadyScanned:Ze.data?.isAlreadyScanned,enrollment:Ze.data?.enrollment?.name}),Ze.data?.isAlreadyScanned===!0||Ze.message?.toLowerCase().includes("already scanned")?(console.log("[onScanSuccess]  Ticket already scanned!"),ht.warning(" This ticket was already scanned!",{autoClose:5e3}),navigator.vibrate&&navigator.vibrate([100,50,100,50,100]),L(!0)):Ze.data?.isValid===!0?(console.log("[onScanSuccess]  First time scan - Valid!"),ht.success(" Ticket Verified - First Scan!"),navigator.vibrate&&navigator.vibrate([200,100,200]),L(!0)):(console.log("[onScanSuccess]  Invalid ticket!"),ht.error(" Invalid Ticket!"),navigator.vibrate&&navigator.vibrate([300,100,300]),L(!1))):(console.log("[onScanSuccess]  API Error or Invalid Response"),ht.error(" Failed to validate ticket!"),navigator.vibrate&&navigator.vibrate([300,100,300]),L(!1))):(L(!0),ht.success(" QR Code Scanned!"),navigator.vibrate&&navigator.vibrate([200,100,200])),_(Ie=>[{text:be,timestamp:new Date,format:ye?.result?.format?.formatName||"QR_CODE"},...Ie.slice(0,9)]),K()},ce=be=>{ne.current+=1,ne.current%10===0&&console.log(`[onScanFailure] Scanner active, attempts: ${ne.current}`),be&&!be.includes("No MultiFormat Readers")&&!be.includes("NotFoundException")&&console.log("[onScanFailure] Error:",be)},Se=async()=>{if(d.length<=1)return;const ye=(d.findIndex(Ze=>Ze.id===h)+1)%d.length,je=d[ye];await K(),x(je.id),setTimeout(()=>te(),200),ht.info(`Switched to ${je.label||"Camera "+(ye+1)}`)},ie=async be=>{try{await navigator.clipboard.writeText(be),ht.success("Copied to clipboard!")}catch{try{const je=document.createElement("textarea");je.value=be,document.body.appendChild(je),je.select(),document.execCommand("copy"),document.body.removeChild(je),ht.success("Copied to clipboard!")}catch{ht.error("Failed to copy")}}},oe=be=>{try{return new URL(be),!0}catch{return!1}},He=be=>{oe(be)?window.open(be,"_blank","noopener,noreferrer"):ie(be)},ve=i==="denied"||i==="error",We=!ve;return a.createElement("div",{className:"space-y-4 sm:space-y-6"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 tracking-tight"},"Scan QR Code"),a.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Scan QR codes using your device camera"))),F&&!M&&a.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex items-start gap-3"},a.createElement(NA,{className:"w-6 h-6 text-yellow-600 shrink-0 mt-0.5"}),a.createElement("div",null,a.createElement("h3",{className:"font-semibold text-yellow-800"},"HTTPS Required"),a.createElement("p",{className:"text-sm text-yellow-700 mt-1"},"Camera access on mobile requires a secure connection (HTTPS). Please access this site via HTTPS to use the scanner."))),a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6"},a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6"},a.createElement("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},a.createElement(ih,{className:"w-6 h-6 text-blue-600"}),"Scanner"),ve&&a.createElement("div",{className:"text-center py-6 sm:py-8"},a.createElement("div",{className:`w-14 h-14 sm:w-16 sm:h-16 ${i==="denied"?"bg-red-100":"bg-orange-100"} rounded-full flex items-center justify-center mx-auto mb-4`},a.createElement(NG,{className:`w-7 h-7 sm:w-8 sm:h-8 ${i==="denied"?"text-red-500":"text-orange-500"}`})),a.createElement("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-2"},i==="denied"?"Camera Access Denied":"Camera Error"),a.createElement("p",{className:"text-gray-600 mb-4 text-sm max-w-sm mx-auto px-2"},D||"Unable to access camera. Please check your permissions and try again."),a.createElement("button",{onClick:we,disabled:y||F&&!M,className:"px-5 sm:px-6 py-2.5 sm:py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-2 mx-auto text-sm sm:text-base"},y?a.createElement(a.Fragment,null,a.createElement("div",{className:"w-4 h-4 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.createElement("span",null,"Requesting...")):a.createElement(a.Fragment,null,a.createElement(Fk,{className:"w-4 h-4"}),a.createElement("span",null,"Request Camera Access"))),i==="denied"&&a.createElement("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg max-w-xs mx-auto"},a.createElement("p",{className:"text-xs text-gray-600"},F?"Go to your browser settings  Site settings  Camera  Allow for this site.":"Click the camera icon in your browser's address bar to allow access."))),We&&a.createElement(xde,null,a.createElement("div",{className:"space-y-4"},a.createElement(yI,{scannerContainerId:he}),a.createElement("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-3"},e?a.createElement(a.Fragment,null,a.createElement("button",{onClick:K,className:"flex items-center gap-2 px-5 sm:px-6 py-2.5 sm:py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm sm:text-base"},a.createElement(Ez,{className:"w-5 h-5"}),a.createElement("span",null,"Stop")),d.length>1&&a.createElement("button",{onClick:Se,className:"flex items-center gap-2 px-4 py-2.5 sm:py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm sm:text-base",title:"Switch Camera"},a.createElement(yz,{className:"w-5 h-5"}),a.createElement("span",{className:"hidden sm:inline"},"Switch Camera"))):a.createElement("button",{onClick:te,disabled:y||F&&!M,className:"flex items-center gap-2 px-5 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all disabled:opacity-50 shadow-lg shadow-blue-500/30 text-sm sm:text-base"},y?a.createElement(a.Fragment,null,a.createElement("div",{className:"w-4 h-4 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.createElement("span",null,"Starting...")):a.createElement(a.Fragment,null,a.createElement(ih,{className:"w-5 h-5"}),a.createElement("span",null,"Start Scanner")))),d.length>1&&!e&&a.createElement("div",{className:"flex items-center justify-center gap-2"},a.createElement("label",{className:"text-sm text-gray-600"},"Camera:"),a.createElement("select",{value:h||"",onChange:be=>x(be.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 max-w-[200px]"},d.map((be,ye)=>a.createElement("option",{key:be.id,value:be.id},be.label||`Camera ${ye+1}`))))))),a.createElement("div",{className:"space-y-4 sm:space-y-6"},z&&G&&(()=>{const be=H?.data?.isAlreadyScanned===!0||H?.message?.toLowerCase().includes("already scanned");return a.createElement("div",{className:`rounded-xl shadow-lg border-2 p-6 sm:p-8 ${be?"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-400":"bg-gradient-to-br from-green-50 to-emerald-50 border-green-300"}`},a.createElement("div",{className:"text-center mb-6"},be?a.createElement(a.Fragment,null,a.createElement("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-yellow-500 rounded-full mb-4 animate-pulse"},a.createElement(NA,{className:"w-12 h-12 text-white"})),a.createElement("h2",{className:"text-2xl sm:text-3xl font-bold text-yellow-800 mb-2"}," ALREADY SCANNED"),a.createElement("p",{className:"text-yellow-700 font-medium"},"This ticket was previously scanned"),H.data.scannedAt&&a.createElement("p",{className:"text-sm text-yellow-600 mt-2"},"Previously scanned: ",new Date(H.data.scannedAt).toLocaleString())):a.createElement(a.Fragment,null,a.createElement("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-500 rounded-full mb-4 animate-pulse"},a.createElement(So,{className:"w-12 h-12 text-white"})),a.createElement("h2",{className:"text-2xl sm:text-3xl font-bold text-green-800 mb-2"}," VERIFIED - FIRST SCAN"),a.createElement("p",{className:"text-green-700 font-medium"},"Person is Allowed & Authenticated"))),H?.data?.enrollment&&a.createElement("div",{className:"bg-white rounded-lg p-4 sm:p-6 mb-4 shadow-sm"},a.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},a.createElement(So,{className:"w-5 h-5 text-blue-600"}),"Attendee Information"),a.createElement("div",{className:"space-y-3"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-blue-50 rounded-lg"},a.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Name:"),a.createElement("span",{className:"text-base sm:text-lg font-bold text-gray-900 bg-white px-4 py-2 rounded border border-blue-200"},H.data.enrollment.name)),a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg"},a.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Phone:"),a.createElement("span",{className:"text-sm sm:text-base font-mono text-gray-900 bg-white px-3 py-1 rounded border border-gray-200"},H.data.enrollment.phone)),H.data.enrollment.event&&a.createElement(a.Fragment,null,a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg"},a.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Event:"),a.createElement("span",{className:"text-sm sm:text-base font-semibold text-gray-900 bg-white px-3 py-1 rounded border border-gray-200"},H.data.enrollment.event.name)),a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg"},a.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},"Event Date:"),a.createElement("span",{className:"text-xs sm:text-sm text-gray-900 bg-white px-3 py-1 rounded border border-gray-200"},new Date(H.data.enrollment.event.startDate).toLocaleDateString()," - ",new Date(H.data.enrollment.event.endDate).toLocaleDateString()))))),!H?.data?.enrollment&&G.type==="url"&&Object.keys(G.parameters).length>0&&a.createElement("div",{className:"bg-white rounded-lg p-4 sm:p-6 mb-4 shadow-sm"},a.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},a.createElement(yx,{className:"w-5 h-5 text-blue-600"}),"Ticket Information"),a.createElement("div",{className:"space-y-3"},Object.entries(G.parameters).map(([ye,je])=>a.createElement("div",{key:ye,className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},a.createElement("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1 sm:mb-0"},ye.replace(/_/g," "),":"),a.createElement("span",{className:"text-sm sm:text-base font-mono text-gray-900 bg-white px-3 py-1 rounded border border-gray-200"},je))))),G.type==="url"&&a.createElement("div",{className:"bg-blue-50 rounded-lg p-4 mb-4"},a.createElement("p",{className:"text-xs text-blue-700 font-semibold mb-1"},"SCANNED URL:"),a.createElement("p",{className:"text-sm text-blue-900 break-all font-mono"},G.fullUrl)),G.type==="text"&&a.createElement("div",{className:"bg-white rounded-lg p-4 sm:p-6 mb-4 shadow-sm"},a.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-3"},"Scanned Content:"),a.createElement("p",{className:"text-gray-900 break-all font-mono text-sm bg-gray-50 p-3 rounded border border-gray-200"},G.text)),a.createElement("div",{className:"flex flex-wrap gap-3 justify-center"},a.createElement("button",{onClick:()=>{n(null),U(null),L(!1),V(null),te()},className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all shadow-md hover:shadow-lg font-semibold"},a.createElement(ih,{className:"w-5 h-5"}),"Scan Next Person"),a.createElement("button",{onClick:()=>ie(r),className:"flex items-center gap-2 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors shadow-md"},a.createElement(yx,{className:"w-5 h-5"}),"Copy Data")))})(),a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6"},a.createElement("h2",{className:"text-lg font-bold text-gray-900 mb-4"},"Scan History"),C.length===0?a.createElement("div",{className:"text-center py-6 sm:py-8 text-gray-500"},a.createElement(ih,{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-2 opacity-30"}),a.createElement("p",{className:"text-sm"},"No scans yet. Start scanning to see history.")):a.createElement("div",{className:"space-y-2 sm:space-y-3 max-h-60 sm:max-h-80 overflow-y-auto"},C.map((be,ye)=>a.createElement("div",{key:ye,className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer group active:bg-gray-200",onClick:()=>He(be.text)},a.createElement("div",{className:"flex items-start justify-between gap-2"},a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("p",{className:"text-sm text-gray-900 break-all font-mono truncate group-hover:text-blue-600"},be.text),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},be.timestamp.toLocaleTimeString(),"  ",be.format)),a.createElement("button",{onClick:je=>{je.stopPropagation(),ie(be.text)},className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded transition-colors"},a.createElement(yx,{className:"w-4 h-4"}))))))),a.createElement("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200"},a.createElement("h3",{className:"font-semibold text-blue-900 mb-2"},"Tips for better scanning:"),a.createElement("ul",{className:"text-sm text-blue-800 space-y-1"},a.createElement("li",null," Hold your device steady"),a.createElement("li",null," Ensure good lighting"),a.createElement("li",null," Position QR code within the frame"),a.createElement("li",null," Keep the QR code flat and clear"),F&&a.createElement("li",null," Try switching to back camera if using front"))))))}const vde=async(e,t={})=>Xe(Ye.get(`/web/tickets/reshare/list/${e}`,{params:{page:t.page||1,limit:t.limit||20,search:t.search||void 0,enrollmentType:t.enrollmentType||void 0,scannedStatus:t.scannedStatus||void 0}})),Ede=async(e,t,r={})=>Xe(Ye.post(`/web/tickets/reshare/${e}/${t}`,{phone:r.phone,sendVia:r.sendVia||"both"})),wde=async(e,t="whatsapp")=>Xe(Ye.post("/web/tickets/reshare/bulk",{tickets:e,sendVia:t})),Nde=async()=>Xe(Ye.get("/web/events")),XO=[{value:"",label:"All Types"},{value:"ONLINE",label:"Online"},{value:"CASH",label:"Cash"}],WO=[{value:"",label:"All Status"},{value:"false",label:"Not Scanned"},{value:"true",label:"Scanned"}],KO=[{value:"both",label:"WhatsApp & Email"},{value:"whatsapp",label:"WhatsApp Only"},{value:"email",label:"Email Only"}],Sde=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(""),[i,o]=N.useState(null),[d,g]=N.useState([]),[h,x]=N.useState(null),[y,w]=N.useState(!1),[C,_]=N.useState(!0),[D,k]=N.useState({currentPage:1,totalPages:1,totalCount:0,limit:20}),[M,R]=N.useState({search:"",enrollmentType:"",scannedStatus:""}),[F,I]=N.useState([]),[G,U]=N.useState(!1),[z,L]=N.useState({}),[H,V]=N.useState(!1);N.useEffect(()=>{Q()},[]),N.useEffect(()=>{r?Y():(g([]),x(null),o(null))},[r,D.currentPage,M]),N.useEffect(()=>{I([]),U(!1)},[d]);const Q=async()=>{_(!0);try{const ee=await Nde();if(ee.success){const fe=ee.data?.events||ee.data||[];t(Array.isArray(fe)?fe:[])}else ht.error(ee.message||"Failed to load events")}catch(ee){console.error("Error fetching events:",ee),ht.error("Failed to load events")}finally{_(!1)}},Y=N.useCallback(async()=>{if(r){w(!0);try{const ee=await vde(r,{page:D.currentPage,limit:D.limit,search:M.search||void 0,enrollmentType:M.enrollmentType||void 0,scannedStatus:M.scannedStatus||void 0});ee.success?(g(ee.data.ticketHolders||[]),o(ee.data.event||null),x(ee.data.statistics||null),k(fe=>({...fe,...ee.data.pagination}))):(ht.error(ee.message||"Failed to load ticket holders"),g([]))}catch(ee){console.error("Error fetching ticket holders:",ee),ht.error("Failed to load ticket holders"),g([])}finally{w(!1)}}},[r,D.currentPage,D.limit,M]);return{events:e,selectedEventId:r,eventData:i,ticketHolders:d,statistics:h,pagination:D,filters:M,loading:y,eventsLoading:C,reshareLoading:z,bulkReshareLoading:H,selectedTickets:F,selectAll:G,isTicketSelected:ee=>F.some(fe=>fe.enrollmentType===ee.enrollmentType&&fe.enrollmentId===ee.enrollmentId),handleEventChange:ee=>{n(ee),k(fe=>({...fe,currentPage:1})),R({search:"",enrollmentType:"",scannedStatus:""})},handleFilterChange:(ee,fe)=>{R(ce=>({...ce,[ee]:fe})),k(ce=>({...ce,currentPage:1}))},handleSearch:ee=>{R(fe=>({...fe,search:ee})),k(fe=>({...fe,currentPage:1}))},handlePageChange:ee=>{k(fe=>({...fe,currentPage:ee}))},handleTicketSelect:ee=>{const fe=`${ee.enrollmentType}-${ee.enrollmentId}`;I(ce=>ce.find(ie=>`${ie.enrollmentType}-${ie.enrollmentId}`===fe)?ce.filter(ie=>`${ie.enrollmentType}-${ie.enrollmentId}`!==fe):[...ce,ee])},handleSelectAll:()=>{I(G?[]:[...d]),U(!G)},handleReshareTicket:async(ee,fe="both")=>{const ce=`${ee.enrollmentType}-${ee.enrollmentId}`;L(Se=>({...Se,[ce]:!0}));try{const Se=await Ede(ee.enrollmentType,ee.enrollmentId,{phone:ee.phone||ee.user?.phone,sendVia:fe});Se.success?(ht.success("Ticket reshared successfully!"),Y()):ht.error(Se.message||"Failed to reshare ticket")}catch(Se){console.error("Error resharing ticket:",Se),ht.error("Failed to reshare ticket")}finally{L(Se=>({...Se,[ce]:!1}))}},handleBulkReshare:async(ee="whatsapp")=>{if(F.length===0){ht.warning("Please select tickets to reshare");return}if(F.length>50){ht.warning("Maximum 50 tickets can be reshared at once");return}V(!0);try{const fe=F.map(Se=>({enrollmentType:Se.enrollmentType,enrollmentId:Se.enrollmentId,phone:Se.phone||Se.user?.phone})),ce=await wde(fe,ee);if(ce.success){const{summary:Se}=ce.data;Se.failed>0?ht.warning(`Reshared ${Se.success} tickets. ${Se.failed} failed.`):ht.success(`Successfully reshared ${Se.success} tickets!`),I([]),U(!1),Y()}else ht.error(ce.message||"Bulk reshare failed")}catch(fe){console.error("Error in bulk reshare:",fe),ht.error("Bulk reshare failed")}finally{V(!1)}},refresh:()=>{r&&Y()}}};function Cde(){const{events:e,selectedEventId:t,ticketHolders:r,statistics:n,pagination:i,filters:o,loading:d,eventsLoading:g,reshareLoading:h,bulkReshareLoading:x,selectedTickets:y,selectAll:w,isTicketSelected:C,handleEventChange:_,handleFilterChange:D,handleSearch:k,handlePageChange:M,handleTicketSelect:R,handleSelectAll:F,handleReshareTicket:I,handleBulkReshare:G,refresh:U}=Sde(),[z,L]=N.useState(""),[H,V]=N.useState(!1),[Q,Y]=N.useState("whatsapp"),[X,he]=N.useState(null),[xe,ae]=N.useState("both");N.useEffect(()=>{const te=setTimeout(()=>{z!==o.search&&k(z)},500);return()=>clearTimeout(te)},[z]);const ne=te=>te?new Date(te).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",se=te=>!te&&te!==0?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(te),Te=te=>{he(te),ae("both")},we=async()=>{X&&(await I(X,xe),he(null))};return a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 tracking-tight"},"Ticket Reshare"),a.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Regenerate and reshare ticket QR codes to users")),a.createElement("button",{onClick:U,disabled:d||!t,className:"flex items-center gap-1.5 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm text-sm"},a.createElement(eD,{className:`w-4 h-4 ${d?"animate-spin":""}`}),a.createElement("span",{className:"hidden sm:inline font-medium"},"Refresh"))),a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},a.createElement("label",{className:"block text-sm font-semibold text-gray-700 mb-2"},"Select Event"),a.createElement("select",{value:t,onChange:te=>_(te.target.value),disabled:g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 bg-white disabled:bg-gray-100"},a.createElement("option",{value:""},g?"Loading events...":"-- Select an Event --"),e.map(te=>a.createElement("option",{key:te._id,value:te._id},te.name," - ",ne(te.startDate))))),t&&a.createElement(a.Fragment,null,n&&a.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3"},a.createElement(Au,{label:"Total",value:n.total,color:"blue",icon:a.createElement(vg,null)}),a.createElement(Au,{label:"Online",value:n.online,color:"purple",icon:a.createElement(CA,null)}),a.createElement(Au,{label:"Cash",value:n.cash,color:"green",icon:a.createElement(CA,null)}),a.createElement(Au,{label:"Scanned",value:n.scanned,color:"emerald",icon:a.createElement(So,null)}),a.createElement(Au,{label:"Not Scanned",value:n.notScanned,color:"orange",icon:a.createElement(Df,null)}),a.createElement(Au,{label:"Cancelled",value:n.cancelled,color:"red",icon:a.createElement(vz,null)})),a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},a.createElement("div",{className:"flex flex-col lg:flex-row gap-3"},a.createElement("div",{className:"flex-1 relative"},a.createElement(cz,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.createElement("input",{type:"text",placeholder:"Search by phone, name, or email...",value:z,onChange:te=>L(te.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})),a.createElement("button",{onClick:()=>V(!H),className:"lg:hidden flex items-center gap-2 px-4 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50"},a.createElement(gz,{className:"w-5 h-5"}),"Filters"),a.createElement("div",{className:"hidden lg:flex items-center gap-3"},a.createElement("select",{value:o.enrollmentType,onChange:te=>D("enrollmentType",te.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},XO.map(te=>a.createElement("option",{key:te.value,value:te.value},te.label))),a.createElement("select",{value:o.scannedStatus,onChange:te=>D("scannedStatus",te.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},WO.map(te=>a.createElement("option",{key:te.value,value:te.value},te.label))))),H&&a.createElement("div",{className:"lg:hidden mt-3 pt-3 border-t border-gray-200 grid grid-cols-2 gap-3"},a.createElement("select",{value:o.enrollmentType,onChange:te=>D("enrollmentType",te.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-sm"},XO.map(te=>a.createElement("option",{key:te.value,value:te.value},te.label))),a.createElement("select",{value:o.scannedStatus,onChange:te=>D("scannedStatus",te.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-sm"},WO.map(te=>a.createElement("option",{key:te.value,value:te.value},te.label))))),y.length>0&&a.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement(SG,{className:"text-blue-600 w-5 h-5"}),a.createElement("span",{className:"font-semibold text-blue-900"},y.length," ticket(s) selected")),a.createElement("div",{className:"flex items-center gap-2 w-full sm:w-auto"},a.createElement("select",{value:Q,onChange:te=>Y(te.target.value),className:"flex-1 sm:flex-none px-3 py-2 border border-blue-300 rounded-lg bg-white text-sm focus:ring-2 focus:ring-blue-500"},KO.map(te=>a.createElement("option",{key:te.value,value:te.value},te.label))),a.createElement("button",{onClick:()=>G(Q),disabled:x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm font-medium"},x?a.createElement("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.createElement(mg,{className:"w-4 h-4"}),"Reshare Selected"))),a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},a.createElement("div",{className:"hidden lg:block"},a.createElement("div",{className:"bg-gray-50 border-b border-gray-200 px-4 py-3"},a.createElement("div",{className:"flex items-center gap-4"},a.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:w,onChange:F,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.createElement("span",{className:"text-sm font-medium text-gray-700"},"Select All")),a.createElement("span",{className:"text-sm text-gray-500"},i.totalCount," ticket holder(s)")))),d&&a.createElement("div",{className:"p-8 text-center"},a.createElement("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),a.createElement("p",{className:"text-gray-600"},"Loading ticket holders...")),!d&&r.length===0&&a.createElement("div",{className:"p-12 text-center"},a.createElement(Df,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},"No Ticket Holders Found"),a.createElement("p",{className:"text-gray-600"},o.search||o.enrollmentType||o.scannedStatus?"Try adjusting your filters":"No tickets have been issued for this event yet")),!d&&r.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:"hidden lg:block overflow-x-auto"},a.createElement("table",{className:"w-full"},a.createElement("thead",{className:"bg-gray-50 border-b border-gray-200"},a.createElement("tr",null,a.createElement("th",{className:"w-12 px-4 py-3"}),a.createElement("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700"},"User Details"),a.createElement("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700"},"Type"),a.createElement("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700"},"Tier / Price"),a.createElement("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700"},"Scan Status"),a.createElement("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700"},"Created"),a.createElement("th",{className:"text-right px-4 py-3 text-sm font-semibold text-gray-700"},"Action"))),a.createElement("tbody",{className:"divide-y divide-gray-100"},r.map(te=>a.createElement(Ade,{key:`${te.enrollmentType}-${te.enrollmentId}`,ticket:te,isSelected:C(te),onSelect:()=>R(te),onReshare:()=>Te(te),isResharing:h[`${te.enrollmentType}-${te.enrollmentId}`],formatDate:ne,formatCurrency:se}))))),a.createElement("div",{className:"lg:hidden divide-y divide-gray-100"},a.createElement("div",{className:"px-4 py-3 bg-gray-50 flex items-center justify-between"},a.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:w,onChange:F,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.createElement("span",{className:"text-sm font-medium text-gray-700"},"Select All")),a.createElement("span",{className:"text-sm text-gray-500"},i.totalCount," total")),r.map(te=>a.createElement(Tde,{key:`${te.enrollmentType}-${te.enrollmentId}`,ticket:te,isSelected:C(te),onSelect:()=>R(te),onReshare:()=>Te(te),isResharing:h[`${te.enrollmentType}-${te.enrollmentId}`],formatDate:ne,formatCurrency:se})))),!d&&i.totalPages>1&&a.createElement("div",{className:"border-t border-gray-200 px-4 py-3 flex flex-col sm:flex-row items-center justify-between gap-3"},a.createElement("p",{className:"text-sm text-gray-600"},"Page ",i.currentPage," of ",i.totalPages," (",i.totalCount," items)"),a.createElement("div",{className:"flex items-center gap-2"},a.createElement("button",{onClick:()=>M(i.currentPage-1),disabled:i.currentPage===1,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},"Previous"),a.createElement("div",{className:"hidden sm:flex items-center gap-1"},Array.from({length:Math.min(5,i.totalPages)},(te,K)=>{let ee;return i.totalPages<=5||i.currentPage<=3?ee=K+1:i.currentPage>=i.totalPages-2?ee=i.totalPages-4+K:ee=i.currentPage-2+K,a.createElement("button",{key:ee,onClick:()=>M(ee),className:`w-8 h-8 text-sm rounded-lg ${i.currentPage===ee?"bg-gray-900 text-white":"border border-gray-300 hover:bg-gray-50"}`},ee)})),a.createElement("button",{onClick:()=>M(i.currentPage+1),disabled:i.currentPage===i.totalPages,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},"Next"))))),!t&&!g&&a.createElement("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center"},a.createElement(Df,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),a.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-2"},"Select an Event"),a.createElement("p",{className:"text-gray-600"},"Choose an event from the dropdown above to view and manage ticket holders")),X&&a.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},a.createElement("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6"},a.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-2"},"Confirm Reshare"),a.createElement("p",{className:"text-gray-600 mb-4"},"This will reset the scan status and send a new QR code to:"),a.createElement("div",{className:"bg-gray-50 rounded-lg p-3 mb-4"},a.createElement("p",{className:"font-semibold text-gray-900"},X.user?.name||X.name||"Unknown"),a.createElement("p",{className:"text-sm text-gray-600"},X.phone||X.user?.phone),X.user?.email&&a.createElement("p",{className:"text-sm text-gray-600"},X.user?.email)),a.createElement("div",{className:"mb-4"},a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Send via"),a.createElement("select",{value:xe,onChange:te=>ae(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},KO.map(te=>a.createElement("option",{key:te.value,value:te.value},te.label)))),a.createElement("div",{className:"flex items-center gap-3"},a.createElement("button",{onClick:()=>he(null),className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium"},"Cancel"),a.createElement("button",{onClick:we,disabled:h[`${X.enrollmentType}-${X.enrollmentId}`],className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50"},h[`${X.enrollmentType}-${X.enrollmentId}`]?a.createElement("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.createElement(mg,{className:"w-4 h-4"}),"Reshare")))))}function Au({label:e,value:t,color:r,icon:n}){const i={blue:"bg-blue-50 text-blue-600 border-blue-200",purple:"bg-purple-50 text-purple-600 border-purple-200",green:"bg-green-50 text-green-600 border-green-200",emerald:"bg-emerald-50 text-emerald-600 border-emerald-200",orange:"bg-orange-50 text-orange-600 border-orange-200",red:"bg-red-50 text-red-600 border-red-200"};return a.createElement("div",{className:`rounded-lg border p-3 ${i[r]||i.blue}`},a.createElement("div",{className:"flex items-center gap-2 mb-1"},a.createElement("span",{className:"w-4 h-4"},n),a.createElement("span",{className:"text-xs font-medium opacity-80"},e)),a.createElement("p",{className:"text-xl font-bold"},t||0))}function Ade({ticket:e,isSelected:t,onSelect:r,onReshare:n,isResharing:i,formatDate:o,formatCurrency:d}){const g=e.user?.name||e.name||"Unknown",h=e.phone||e.user?.phone||"N/A",x=e.user?.email||"N/A",y=e.enrollmentType==="ONLINE"?e.ticketPrice:e.priceCharged;return a.createElement("tr",{className:"hover:bg-gray-50 transition-colors"},a.createElement("td",{className:"px-4 py-3"},a.createElement("input",{type:"checkbox",checked:t,onChange:r,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})),a.createElement("td",{className:"px-4 py-3"},a.createElement("div",null,a.createElement("p",{className:"font-semibold text-gray-900"},g),a.createElement("div",{className:"flex items-center gap-3 text-sm text-gray-600"},a.createElement("span",{className:"flex items-center gap-1"},a.createElement(hz,{className:"w-3.5 h-3.5"}),h),x!=="N/A"&&a.createElement("span",{className:"flex items-center gap-1 truncate max-w-[200px]"},a.createElement(fz,{className:"w-3.5 h-3.5"}),x)))),a.createElement("td",{className:"px-4 py-3"},a.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.enrollmentType==="ONLINE"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`},e.enrollmentType)),a.createElement("td",{className:"px-4 py-3"},a.createElement("div",null,e.tierName&&a.createElement("p",{className:"text-sm font-medium text-gray-900"},e.tierName),a.createElement("p",{className:"text-sm text-gray-600"},d(y)))),a.createElement("td",{className:"px-4 py-3 text-center"},e.isTicketScanned?a.createElement("div",{className:"inline-flex flex-col items-center"},a.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},a.createElement(So,{className:"w-3.5 h-3.5"}),"Scanned"),e.ticketScannedAt&&a.createElement("span",{className:"text-xs text-gray-500 mt-1"},o(e.ticketScannedAt))):a.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800"},a.createElement(Df,{className:"w-3.5 h-3.5"}),"Not Scanned")),a.createElement("td",{className:"px-4 py-3"},a.createElement("span",{className:"text-sm text-gray-600"},o(e.createdAt))),a.createElement("td",{className:"px-4 py-3 text-right"},a.createElement("button",{onClick:n,disabled:i||e.status==="CANCELLED",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},i?a.createElement("div",{className:"w-3.5 h-3.5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.createElement(mg,{className:"w-3.5 h-3.5"}),"Reshare")))}function Tde({ticket:e,isSelected:t,onSelect:r,onReshare:n,isResharing:i,formatDate:o,formatCurrency:d}){const g=e.user?.name||e.name||"Unknown",h=e.phone||e.user?.phone||"N/A";e.user?.email;const x=e.enrollmentType==="ONLINE"?e.ticketPrice:e.priceCharged;return a.createElement("div",{className:"p-4 hover:bg-gray-50 transition-colors"},a.createElement("div",{className:"flex items-start gap-3"},a.createElement("input",{type:"checkbox",checked:t,onChange:r,className:"w-4 h-4 mt-1 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("div",{className:"flex items-start justify-between gap-2 mb-2"},a.createElement("div",null,a.createElement("p",{className:"font-semibold text-gray-900"},g),a.createElement("p",{className:"text-sm text-gray-600"},h)),a.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium shrink-0 ${e.enrollmentType==="ONLINE"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`},e.enrollmentType)),a.createElement("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3"},a.createElement("div",null,a.createElement("p",{className:"text-gray-500 text-xs"},"Price"),a.createElement("p",{className:"font-medium text-gray-900"},d(x))),e.tierName&&a.createElement("div",null,a.createElement("p",{className:"text-gray-500 text-xs"},"Tier"),a.createElement("p",{className:"font-medium text-gray-900"},e.tierName))),a.createElement("div",{className:"flex items-center justify-between"},e.isTicketScanned?a.createElement("div",null,a.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},a.createElement(So,{className:"w-3.5 h-3.5"}),"Scanned"),e.ticketScannedAt&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},o(e.ticketScannedAt))):a.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800"},a.createElement(Df,{className:"w-3.5 h-3.5"}),"Not Scanned"),a.createElement("button",{onClick:n,disabled:i||e.status==="CANCELLED",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},i?a.createElement("div",{className:"w-3.5 h-3.5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.createElement(mg,{className:"w-3.5 h-3.5"}),"Reshare")))))}function Ode(){return a.createElement(sB,null,a.createElement(qF,null,a.createElement(LL,null,a.createElement(cn,{path:"/login",element:a.createElement(GF,null,a.createElement(Kj,null))}),a.createElement(cn,{element:a.createElement($F,null,a.createElement(Wj,null))},a.createElement(cn,{path:"/dashboard",element:a.createElement(Foe,null)}),a.createElement(cn,{path:"/events",element:a.createElement(tce,null)}),a.createElement(cn,{path:"/enrollments",element:a.createElement(rce,null)}),a.createElement(cn,{path:"/coupons",element:a.createElement(nce,null)}),a.createElement(cn,{path:"/users",element:a.createElement(cce,null)}),a.createElement(cn,{path:"/admins",element:a.createElement(Nce,null)}),a.createElement(cn,{path:"/payments",element:a.createElement(Sce,null)}),a.createElement(cn,{path:"/cash-tickets",element:a.createElement(Rce,null)}),a.createElement(cn,{path:"/vouchers",element:a.createElement(jce,null)}),a.createElement(cn,{path:"/sessions",element:a.createElement(Zce,null)}),a.createElement(cn,{path:"/quizes",element:a.createElement(cue,null)}),a.createElement(cn,{path:"/challenges",element:a.createElement(yue,null)}),a.createElement(cn,{path:"/polls",element:a.createElement(Tue,null)}),a.createElement(cn,{path:"/stories",element:a.createElement($ue,null)}),a.createElement(cn,{path:"/scan-qr",element:a.createElement(bde,null)}),a.createElement(cn,{path:"/ticket-reshare",element:a.createElement(Cde,null)})),a.createElement(cn,{path:"/",element:a.createElement(ng,{to:"/dashboard",replace:!0})}),a.createElement(cn,{path:"*",element:a.createElement(ng,{to:"/dashboard",replace:!0})}))))}V9.createRoot(document.getElementById("root")).render(a.createElement(N.StrictMode,null,a.createElement(Ode,null)));
